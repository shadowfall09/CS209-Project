{"items":[{"tags":["java","multithreading","spring","spring-batch"],"answers":[{"comments":[{"owner":{"account_id":3011114,"reputation":1412,"user_id":2554622,"display_name":"Ashish Shetkar"},"score":0,"creation_date":1556801734,"post_id":3282317,"comment_id":98557817,"body_markdown":"for scaling and implementing parallel executions you can refer this - https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/core/task/SimpleAsyncTaskExecutor.html#setConcurrencyLimit-int-","body":"for scaling and implementing parallel executions you can refer this - <a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/core/task/SimpleAsyncTaskExecutor.html#setConcurrencyLimit-int-\" rel=\"nofollow noreferrer\">docs.spring.io/spring/docs/current/javadoc-api/org/&hellip;</a>"}],"tags":[],"owner":{"account_id":102920,"reputation":3485,"user_id":275973,"display_name":"Jean-Philippe Briend"},"comment_count":1,"down_vote_count":0,"up_vote_count":15,"is_accepted":true,"score":15,"last_activity_date":1279552292,"creation_date":1279552292,"answer_id":3282317,"question_id":2326695,"body_markdown":"Create a Split and you will be able to use multithreading between the different branches.\r\nUse a TaskExecutor to define your parallelism policy.\r\n\r\nSee [Multi-threaded Step][1]\r\n\r\nBe sure to use the latest version of Spring Batch if you want to use multithreading and the MapJobRepository (prior to latest version, this JobRepository was not thread safe).\r\n\r\n\r\n  [1]: http://static.springsource.org/spring-batch/reference/html/scalability.html#multithreadedStep","title":"How to set up multi-threading in Spring Batch?","body":"<p>Create a Split and you will be able to use multithreading between the different branches.\nUse a TaskExecutor to define your parallelism policy.</p>\n\n<p>See <a href=\"http://static.springsource.org/spring-batch/reference/html/scalability.html#multithreadedStep\" rel=\"noreferrer\">Multi-threaded Step</a></p>\n\n<p>Be sure to use the latest version of Spring Batch if you want to use multithreading and the MapJobRepository (prior to latest version, this JobRepository was not thread safe).</p>\n"},{"tags":[],"owner":{"account_id":2244344,"reputation":604,"user_id":1978082,"accept_rate":64,"display_name":"HenioJR"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1420544033,"creation_date":1420544033,"answer_id":27797780,"question_id":2326695,"body_markdown":"Take a look at Jean answers&#39;. An easy way is create a bean of SimpleAsyncTaskExecutor and associate a tasklet to use this bean, like that.\r\n\r\n\t&lt;bean id=&quot;simpleTaskExecutor&quot;\r\n\t\tclass=&quot;org.springframework.core.task.SimpleAsyncTaskExecutor&quot;&gt;\r\n\t\t&lt;property name=&quot;concurrencyLimit&quot; value=&quot;10&quot;/&gt;\r\n\t&lt;/bean&gt;\r\n\r\n\t&lt;batch:job id=&quot;jobTest&quot;&gt;\r\n\t\t&lt;batch:step id=&quot;step1&quot;&gt;\r\n\t\t&lt;!-- throttle-limit default is 4. Increase this to ensure that a thread pool is fully utilized --&gt;\r\n\t\t\t&lt;batch:tasklet task-executor=&quot;simpleTaskExecutor&quot; throttle-limit=&quot;20&quot;&gt;\r\n\t\t\t\t&lt;batch:chunk /&gt;\r\n\t\t\t&lt;/batch:tasklet&gt;\r\n\t\t&lt;/batch:step&gt;\r\n\t&lt;/batch:job&gt;\r\n","title":"How to set up multi-threading in Spring Batch?","body":"<p>Take a look at Jean answers'. An easy way is create a bean of SimpleAsyncTaskExecutor and associate a tasklet to use this bean, like that.</p>\n\n<pre><code>&lt;bean id=\"simpleTaskExecutor\"\n    class=\"org.springframework.core.task.SimpleAsyncTaskExecutor\"&gt;\n    &lt;property name=\"concurrencyLimit\" value=\"10\"/&gt;\n&lt;/bean&gt;\n\n&lt;batch:job id=\"jobTest\"&gt;\n    &lt;batch:step id=\"step1\"&gt;\n    &lt;!-- throttle-limit default is 4. Increase this to ensure that a thread pool is fully utilized --&gt;\n        &lt;batch:tasklet task-executor=\"simpleTaskExecutor\" throttle-limit=\"20\"&gt;\n            &lt;batch:chunk /&gt;\n        &lt;/batch:tasklet&gt;\n    &lt;/batch:step&gt;\n&lt;/batch:job&gt;\n</code></pre>\n"}],"owner":{"account_id":35665,"reputation":17726,"user_id":101095,"accept_rate":94,"display_name":"Cuga"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58378,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"accepted_answer_id":3282317,"answer_count":2,"score":15,"last_activity_date":1666893251,"creation_date":1267021900,"question_id":2326695,"body_markdown":"I&#39;ve successfully set up a tutorial Spring Batch project.  I&#39;d really like to know if it&#39;s possible to make it multi-threaded at the &quot;Spring level&quot;.  \r\n\r\nThe basic idea of what I want is to make a list of tasks or task steps and let them be picked up and worked on by independent threads, ideally out of a pool limited to &#39;n&#39; number of threads.\r\n\r\nIs this possible?  If so, how?  Could someone show guide me to that point from where I&#39;m currently at?\r\n\r\nThe simple project I have is from this tutorial [here][1].  It basically has different tasks which print out a message to the screen.  \r\n\r\nHere&#39;s my current simpleJob.xml file, which contains the job details:\r\n\r\n    &lt;import resource=&quot;applicationContext.xml&quot;/&gt;\r\n    \r\n        &lt;bean id=&quot;hello&quot; class=&quot;helloworld.PrintTasklet&quot;&gt;\r\n            &lt;property name=&quot;message&quot; value=&quot;Hello&quot;/&gt;\r\n        &lt;/bean&gt;\r\n    \r\n        &lt;bean id=&quot;space&quot; class=&quot;helloworld.PrintTasklet&quot;&gt;\r\n            &lt;property name=&quot;message&quot; value=&quot; &quot;/&gt;\r\n        &lt;/bean&gt;\r\n    \r\n        &lt;bean id=&quot;world&quot; class=&quot;helloworld.PrintTasklet&quot;&gt;\r\n            &lt;property name=&quot;message&quot; value=&quot;World!\\n&quot;/&gt;\r\n        &lt;/bean&gt;\r\n    \r\n        &lt;bean id=&quot;taskletStep&quot; class=&quot;org.springframework.batch.core.step.tasklet.TaskletStep&quot; &gt;\r\n            &lt;property name=&quot;jobRepository&quot; ref=&quot;jobRepository&quot;/&gt;\r\n            &lt;property name=&quot;transactionManager&quot; ref=&quot;transactionManager&quot;/&gt;\r\n        &lt;/bean&gt;\r\n    \r\n        &lt;bean id=&quot;simpleJob&quot; class=&quot;org.springframework.batch.core.job.SimpleJob&quot;&gt;\r\n            &lt;property name=&quot;name&quot; value=&quot;simpleJob&quot; /&gt;\r\n            &lt;property name=&quot;steps&quot;&gt;\r\n                &lt;list&gt;\r\n                    &lt;bean parent=&quot;taskletStep&quot;&gt;\r\n                        &lt;property name=&quot;tasklet&quot; ref=&quot;hello&quot;/&gt;\r\n                    &lt;/bean&gt;\r\n                    &lt;bean parent=&quot;taskletStep&quot;&gt;\r\n                        &lt;property name=&quot;tasklet&quot; ref=&quot;space&quot;/&gt;\r\n                    &lt;/bean&gt;\r\n                    &lt;bean parent=&quot;taskletStep&quot;&gt;\r\n                        &lt;property name=&quot;tasklet&quot; ref=&quot;world&quot;/&gt;\r\n                    &lt;/bean&gt;\r\n                &lt;/list&gt;\r\n            &lt;/property&gt;\r\n            &lt;property name=&quot;jobRepository&quot; ref=&quot;jobRepository&quot;/&gt;\r\n        &lt;/bean&gt;\r\n\r\n\r\nMy appContext contains the job repository bean (`SimpleJobRepository`), transaction manager (`ResourceLessTransactionManager`) and job launcher (`SimpleJobLauncher`).  I can provide this code if desired as well, I just didn&#39;t want to bog down this post with tons of XML.\r\n\r\nThanks very very much for any help!\r\n\r\n\r\n  [1]: http://java.dzone.com/news/spring-batch-hello-world-1","title":"How to set up multi-threading in Spring Batch?","body":"<p>I've successfully set up a tutorial Spring Batch project.  I'd really like to know if it's possible to make it multi-threaded at the \"Spring level\".  </p>\n\n<p>The basic idea of what I want is to make a list of tasks or task steps and let them be picked up and worked on by independent threads, ideally out of a pool limited to 'n' number of threads.</p>\n\n<p>Is this possible?  If so, how?  Could someone show guide me to that point from where I'm currently at?</p>\n\n<p>The simple project I have is from this tutorial <a href=\"http://java.dzone.com/news/spring-batch-hello-world-1\" rel=\"noreferrer\">here</a>.  It basically has different tasks which print out a message to the screen.  </p>\n\n<p>Here's my current simpleJob.xml file, which contains the job details:</p>\n\n<pre><code>&lt;import resource=\"applicationContext.xml\"/&gt;\n\n    &lt;bean id=\"hello\" class=\"helloworld.PrintTasklet\"&gt;\n        &lt;property name=\"message\" value=\"Hello\"/&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"space\" class=\"helloworld.PrintTasklet\"&gt;\n        &lt;property name=\"message\" value=\" \"/&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"world\" class=\"helloworld.PrintTasklet\"&gt;\n        &lt;property name=\"message\" value=\"World!\\n\"/&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"taskletStep\" class=\"org.springframework.batch.core.step.tasklet.TaskletStep\" &gt;\n        &lt;property name=\"jobRepository\" ref=\"jobRepository\"/&gt;\n        &lt;property name=\"transactionManager\" ref=\"transactionManager\"/&gt;\n    &lt;/bean&gt;\n\n    &lt;bean id=\"simpleJob\" class=\"org.springframework.batch.core.job.SimpleJob\"&gt;\n        &lt;property name=\"name\" value=\"simpleJob\" /&gt;\n        &lt;property name=\"steps\"&gt;\n            &lt;list&gt;\n                &lt;bean parent=\"taskletStep\"&gt;\n                    &lt;property name=\"tasklet\" ref=\"hello\"/&gt;\n                &lt;/bean&gt;\n                &lt;bean parent=\"taskletStep\"&gt;\n                    &lt;property name=\"tasklet\" ref=\"space\"/&gt;\n                &lt;/bean&gt;\n                &lt;bean parent=\"taskletStep\"&gt;\n                    &lt;property name=\"tasklet\" ref=\"world\"/&gt;\n                &lt;/bean&gt;\n            &lt;/list&gt;\n        &lt;/property&gt;\n        &lt;property name=\"jobRepository\" ref=\"jobRepository\"/&gt;\n    &lt;/bean&gt;\n</code></pre>\n\n<p>My appContext contains the job repository bean (<code>SimpleJobRepository</code>), transaction manager (<code>ResourceLessTransactionManager</code>) and job launcher (<code>SimpleJobLauncher</code>).  I can provide this code if desired as well, I just didn't want to bog down this post with tons of XML.</p>\n\n<p>Thanks very very much for any help!</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1666887882,"post_id":74225160,"comment_id":131046937,"body_markdown":"Can you link to the Oracle documentation that you mentioned?","body":"Can you link to the Oracle documentation that you mentioned?"},{"owner":{"account_id":371416,"reputation":1004,"user_id":719934,"accept_rate":75,"display_name":"ewh"},"score":0,"creation_date":1666889485,"post_id":74225160,"comment_id":131047449,"body_markdown":"https://docs.oracle.com/javase/8/docs/technotes/guides/deploy/properties.html","body":"<a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/deploy/properties.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/technotes/guides/deploy/&hellip;</a>"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1666889871,"post_id":74225160,"comment_id":131047582,"body_markdown":"Post such details as edits to your Question rather than as Comments.","body":"Post such details as edits to your Question rather than as Comments."}],"owner":{"account_id":371416,"reputation":1004,"user_id":719934,"accept_rate":75,"display_name":"ewh"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":90,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1666893244,"creation_date":1666887229,"question_id":74225160,"body_markdown":"I am struggling to verify if deployment.properties is used at all in OpenJDK 8 releases or not, or it is only specific to the Oracle release of the JDK/JRE.\r\n\r\nI am on a project that uses OpenJDK 8 releases from https://adoptium.net/, and from the image retrieved, I see none of the components that (Oracle) documentation (https://docs.oracle.com/javase/8/docs/technotes/guides/deploy/properties.html) states is used by deployment.properties: Java Plugins, Java Web Start, and Java Control Panel. The project is undergoing a cybersecurity review, and there is a debate if the deployment.properties (based on past Oracle JRE releases) is applicable to OpenJDK, mainly version 8 releases.\r\n\r\nDoes OpenJDK 8, in any way, check for deployment.properties?  Is there an authoritative source verifying if the answer is &quot;yes&quot; or &quot;no&quot;?\r\n\r\nBTW, doing a search for &quot;deployment.properties&quot; on the OpenJDK issue tracking website, https://bugs.openjdk.org/projects/JDK/issues/, provides a lot of hits, including hits for 8 and later releases.  But it is not clear to me if these are really Oracle-specific-release items that happen to be in the database, or they are applicable to core OpenJDK releases.","title":"Is deployment.properties used/accessed in OpenJDK 8 releases","body":"<p>I am struggling to verify if deployment.properties is used at all in OpenJDK 8 releases or not, or it is only specific to the Oracle release of the JDK/JRE.</p>\n<p>I am on a project that uses OpenJDK 8 releases from <a href=\"https://adoptium.net/\" rel=\"nofollow noreferrer\">https://adoptium.net/</a>, and from the image retrieved, I see none of the components that (Oracle) documentation (<a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/deploy/properties.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/technotes/guides/deploy/properties.html</a>) states is used by deployment.properties: Java Plugins, Java Web Start, and Java Control Panel. The project is undergoing a cybersecurity review, and there is a debate if the deployment.properties (based on past Oracle JRE releases) is applicable to OpenJDK, mainly version 8 releases.</p>\n<p>Does OpenJDK 8, in any way, check for deployment.properties?  Is there an authoritative source verifying if the answer is &quot;yes&quot; or &quot;no&quot;?</p>\n<p>BTW, doing a search for &quot;deployment.properties&quot; on the OpenJDK issue tracking website, <a href=\"https://bugs.openjdk.org/projects/JDK/issues/\" rel=\"nofollow noreferrer\">https://bugs.openjdk.org/projects/JDK/issues/</a>, provides a lot of hits, including hits for 8 and later releases.  But it is not clear to me if these are really Oracle-specific-release items that happen to be in the database, or they are applicable to core OpenJDK releases.</p>\n"},{"tags":["java","xml","dom"],"comments":[{"owner":{"account_id":10030,"reputation":333803,"user_id":18771,"accept_rate":87,"display_name":"Tomalak"},"score":0,"creation_date":1239119165,"post_id":726395,"comment_id":538085,"body_markdown":"*Why* do you need to keep an order? The request implies that you are processing the XML text with tools that have not been made for XML. Is that the case?","body":"<i>Why</i> do you need to keep an order? The request implies that you are processing the XML text with tools that have not been made for XML. Is that the case?"},{"owner":{"account_id":28542,"reputation":160910,"user_id":76337,"accept_rate":70,"display_name":"John Saunders"},"score":0,"creation_date":1312982687,"post_id":726395,"comment_id":8372162,"body_markdown":"The solution to your stated problem is to write a program that preprocesses the files to compare before comparing them. Such a program would put the attributes into a canonical order.","body":"The solution to your stated problem is to write a program that preprocesses the files to compare before comparing them. Such a program would put the attributes into a canonical order."},{"owner":{"account_id":7281,"reputation":248677,"user_id":12597,"accept_rate":76,"display_name":"Ian Boyd"},"score":7,"creation_date":1335365588,"post_id":726395,"comment_id":13282636,"body_markdown":"Commander @Tomalak, i am processing XML text with tools that have not been made for XML: my eyes. Xml is also a human-readable format.","body":"Commander @Tomalak, i am processing XML text with tools that have not been made for XML: my eyes. Xml is also a human-readable format."},{"owner":{"account_id":28542,"reputation":160910,"user_id":76337,"accept_rate":70,"display_name":"John Saunders"},"score":0,"creation_date":1410396493,"post_id":726395,"comment_id":40314280,"body_markdown":"@IanBoyd: do your eyes a favor, then, and process the XML into something that&#39;s easier to read. If your eyes find the order to be important, then your conversion tool should output to a specific order.","body":"@IanBoyd: do your eyes a favor, then, and process the XML into something that&#39;s easier to read. If your eyes find the order to be important, then your conversion tool should output to a specific order."},{"owner":{"account_id":7281,"reputation":248677,"user_id":12597,"accept_rate":76,"display_name":"Ian Boyd"},"score":2,"creation_date":1410447616,"post_id":726395,"comment_id":40337784,"body_markdown":"@JohnSaunders I&#39;m trying to; which is why i need the original order!","body":"@JohnSaunders I&#39;m trying to; which is why i need the original order!"},{"owner":{"account_id":28542,"reputation":160910,"user_id":76337,"accept_rate":70,"display_name":"John Saunders"},"score":0,"creation_date":1410451259,"post_id":726395,"comment_id":40340302,"body_markdown":"@IanBoyd: the _original_ order, or a specific order? Recall that the original order was indeterminate and unimportant. Choose an order and stick to it. I always prefer alphabetical, since XSLT can do that fairly easily.","body":"@IanBoyd: the <i>original</i> order, or a specific order? Recall that the original order was indeterminate and unimportant. Choose an order and stick to it. I always prefer alphabetical, since XSLT can do that fairly easily."},{"owner":{"account_id":1133450,"reputation":2017,"user_id":1118996,"display_name":"IvanNik"},"score":0,"creation_date":1554843156,"post_id":726395,"comment_id":97898198,"body_markdown":"I have another option to change to order using DOM apache parser: https://stackoverflow.com/a/55598817/1118996","body":"I have another option to change to order using DOM apache parser: <a href=\"https://stackoverflow.com/a/55598817/1118996\">stackoverflow.com/a/55598817/1118996</a>"},{"owner":{"account_id":2203785,"reputation":2039,"user_id":1947482,"display_name":"Valentyn Kolesnikov"},"score":0,"creation_date":1584247682,"post_id":726395,"comment_id":107376016,"body_markdown":"Underscore-java library preserves attribute order while loading xml.","body":"Underscore-java library preserves attribute order while loading xml."}],"answers":[{"tags":[],"owner":{"account_id":19858,"reputation":89106,"user_id":46914,"accept_rate":89,"display_name":"Soviut"},"comment_count":0,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1239119125,"creation_date":1239119125,"answer_id":726409,"question_id":726395,"body_markdown":"You really shouldn&#39;t need to keep any sort of order.  As far as I know, no schema takes attribute order into account when validating an XML document either.  It sounds like whatever is processing XML on the other end isn&#39;t using a proper DOM to parse the results.\r\n\r\nI suppose one option would be to manually build up the document using string building, but I strongly recommend against that.","title":"Order of XML attributes after DOM processing","body":"<p>You really shouldn't need to keep any sort of order.  As far as I know, no schema takes attribute order into account when validating an XML document either.  It sounds like whatever is processing XML on the other end isn't using a proper DOM to parse the results.</p>\n\n<p>I suppose one option would be to manually build up the document using string building, but I strongly recommend against that.</p>\n"},{"tags":[],"owner":{"account_id":10305,"reputation":95008,"user_id":19403,"accept_rate":59,"display_name":"Robert Rossney"},"comment_count":0,"down_vote_count":3,"up_vote_count":27,"is_accepted":false,"score":24,"last_activity_date":1239127636,"creation_date":1239127636,"answer_id":726933,"question_id":726395,"body_markdown":"Look at section 3.1 of the XML recommendation.  It says, &quot;Note that the order of attribute specifications in a start-tag or empty-element tag is not significant.&quot;\r\n\r\nIf a piece of software requires attributes on an XML element to appear in a specific order, that software is not processing XML, it&#39;s processing text that looks superficially like XML.  It needs to be fixed.  \r\n\r\nIf it can&#39;t be fixed, and you have to produce files that conform to its requirements, you can&#39;t reliably use standard XML tools to produce those files.  For instance, you might try (as you suggest) to use XSLT to produce attributes in a defined order, e.g.:\r\n\r\n    &lt;test&gt;\r\n       &lt;xsl:attribute name=&quot;foo&quot;/&gt;\r\n       &lt;xsl:attribute name=&quot;bar&quot;/&gt;\r\n       &lt;xsl:attribute name=&quot;baz&quot;/&gt;\r\n    &lt;/test&gt;\r\n\r\nonly to find that the XSLT processor emits this:\r\n\r\n    &lt;test bar=&quot;&quot; baz=&quot;&quot; foo=&quot;&quot;/&gt;\r\n\r\nbecause the DOM that the processor is using orders attributes alphabetically by tag name.  (That&#39;s common but not universal behavior among XML DOMs.)\r\n\r\nBut I want to emphasize something.  If a piece of software violates the XML recommendation in one respect, it probably violates it in other respects.  If it breaks when you feed it attributes in the wrong order, it probably also breaks if you delimit attributes with single quotes, or if the attribute values contain character entities, or any of a dozen other things that the XML recommendation says that an XML document can do that the author of this software probably didn&#39;t think about.","title":"Order of XML attributes after DOM processing","body":"<p>Look at section 3.1 of the XML recommendation.  It says, \"Note that the order of attribute specifications in a start-tag or empty-element tag is not significant.\"</p>\n\n<p>If a piece of software requires attributes on an XML element to appear in a specific order, that software is not processing XML, it's processing text that looks superficially like XML.  It needs to be fixed.  </p>\n\n<p>If it can't be fixed, and you have to produce files that conform to its requirements, you can't reliably use standard XML tools to produce those files.  For instance, you might try (as you suggest) to use XSLT to produce attributes in a defined order, e.g.:</p>\n\n<pre><code>&lt;test&gt;\n   &lt;xsl:attribute name=\"foo\"/&gt;\n   &lt;xsl:attribute name=\"bar\"/&gt;\n   &lt;xsl:attribute name=\"baz\"/&gt;\n&lt;/test&gt;\n</code></pre>\n\n<p>only to find that the XSLT processor emits this:</p>\n\n<pre><code>&lt;test bar=\"\" baz=\"\" foo=\"\"/&gt;\n</code></pre>\n\n<p>because the DOM that the processor is using orders attributes alphabetically by tag name.  (That's common but not universal behavior among XML DOMs.)</p>\n\n<p>But I want to emphasize something.  If a piece of software violates the XML recommendation in one respect, it probably violates it in other respects.  If it breaks when you feed it attributes in the wrong order, it probably also breaks if you delimit attributes with single quotes, or if the attribute values contain character entities, or any of a dozen other things that the XML recommendation says that an XML document can do that the author of this software probably didn't think about.</p>\n"},{"tags":[],"owner":{"account_id":28542,"reputation":160910,"user_id":76337,"accept_rate":70,"display_name":"John Saunders"},"comment_count":0,"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1239128860,"creation_date":1239128860,"answer_id":727011,"question_id":726395,"body_markdown":"It&#39;s not possible to over-emphasize what Robert Rossney just said, but I&#39;ll try.  ;-)\r\n\r\nThe benefit of International Standards is that, when everybody follows them, life is good. All our software gets along peacefully.\r\n\r\nXML has to be one of the most important standards we have. It&#39;s the basis of &quot;old web&quot; stuff like SOAP, and still &#39;web 2.0&#39; stuff like RSS and Atom. It&#39;s because of clear standards that XML is able to interoperate between different platforms.\r\n\r\nIf we give up on XML, little by little, we&#39;ll get into a situation where a producer of XML will not be able to assume that a consumer of XML will be able to consumer their content. This would have a disasterous affect on the industry.\r\n\r\nWe should push back very forcefully, on anyone who writes code that does not process XML according to the standard. I understand that, in these economic times, there is a reluctance to offend customers and business partners by saying &quot;no&quot;. But in this case, I think it&#39;s worth it. We would be in much worse financial shape if we had to hand-craft XML for each business partner.\r\n\r\nSo, don&#39;t &quot;enable&quot; companies who do not understand XML. Send them the standard, with the appropriate lines highlighted. They need to stop thinking that XML is just text with angle brackets in it. It simply does not behave like text with angle brackets in it.\r\n\r\nIt&#39;s not like there&#39;s an excuse for this. Even the smallest embedded devices can have full-featured XML parser implementations in them. I have not yet heard a good reason for not being able to parse standard XML, even if one can&#39;t afford a fully-featured DOM implementation.","title":"Order of XML attributes after DOM processing","body":"<p>It's not possible to over-emphasize what Robert Rossney just said, but I'll try.  ;-)</p>\n\n<p>The benefit of International Standards is that, when everybody follows them, life is good. All our software gets along peacefully.</p>\n\n<p>XML has to be one of the most important standards we have. It's the basis of \"old web\" stuff like SOAP, and still 'web 2.0' stuff like RSS and Atom. It's because of clear standards that XML is able to interoperate between different platforms.</p>\n\n<p>If we give up on XML, little by little, we'll get into a situation where a producer of XML will not be able to assume that a consumer of XML will be able to consumer their content. This would have a disasterous affect on the industry.</p>\n\n<p>We should push back very forcefully, on anyone who writes code that does not process XML according to the standard. I understand that, in these economic times, there is a reluctance to offend customers and business partners by saying \"no\". But in this case, I think it's worth it. We would be in much worse financial shape if we had to hand-craft XML for each business partner.</p>\n\n<p>So, don't \"enable\" companies who do not understand XML. Send them the standard, with the appropriate lines highlighted. They need to stop thinking that XML is just text with angle brackets in it. It simply does not behave like text with angle brackets in it.</p>\n\n<p>It's not like there's an excuse for this. Even the smallest embedded devices can have full-featured XML parser implementations in them. I have not yet heard a good reason for not being able to parse standard XML, even if one can't afford a fully-featured DOM implementation.</p>\n"},{"comments":[{"owner":{"account_id":77251,"reputation":17324,"user_id":220627,"accept_rate":79,"display_name":"Adrian Smith"},"score":5,"creation_date":1354704881,"post_id":727029,"comment_id":18848420,"body_markdown":"In my case I am writing a migration script manipulating some XML configuration, which is stored in the VCS. The VCS diff is showing meaningless changes (modification of attribute order) as well as meaningful changes (what the program has modified). It would be nice to show only meaningful changes. Also (although this is not a problem I have) spurious merge conflicts will result if multiple people did this sort of thing and their XML serializers wrote non-modified attributes in various orders.","body":"In my case I am writing a migration script manipulating some XML configuration, which is stored in the VCS. The VCS diff is showing meaningless changes (modification of attribute order) as well as meaningful changes (what the program has modified). It would be nice to show only meaningful changes. Also (although this is not a problem I have) spurious merge conflicts will result if multiple people did this sort of thing and their XML serializers wrote non-modified attributes in various orders."},{"owner":{"account_id":286750,"reputation":2034,"user_id":586182,"accept_rate":71,"display_name":"kierans"},"score":1,"creation_date":1386054222,"post_id":727029,"comment_id":30367921,"body_markdown":"Sometimes one is writing a script for third party software/configuration files.  XML is forced upon you.","body":"Sometimes one is writing a script for third party software/configuration files.  XML is forced upon you."},{"owner":{"account_id":28542,"reputation":160910,"user_id":76337,"accept_rate":70,"display_name":"John Saunders"},"score":1,"creation_date":1410396070,"post_id":727029,"comment_id":40314175,"body_markdown":"@AdrianSmith: your scenario can be handled by processing both sides of the comparison ahead of time with a script or stylesheet that outputs the XML in a canonical order. I have done this in order to compare SQL Server Integration Services .dtsx files, which have far worse problems that attribute order. Among other things, these files change simply by opening them in the design tool.","body":"@AdrianSmith: your scenario can be handled by processing both sides of the comparison ahead of time with a script or stylesheet that outputs the XML in a canonical order. I have done this in order to compare SQL Server Integration Services .dtsx files, which have far worse problems that attribute order. Among other things, these files change simply by opening them in the design tool."},{"owner":{"account_id":28542,"reputation":160910,"user_id":76337,"accept_rate":70,"display_name":"John Saunders"},"score":0,"creation_date":1410396107,"post_id":727029,"comment_id":40314185,"body_markdown":"@kierans: no, it is not forced on you. Just say &quot;no&quot; to garbage, or you will find yourself writing custom code every time you have to process XML.","body":"@kierans: no, it is not forced on you. Just say &quot;no&quot; to garbage, or you will find yourself writing custom code every time you have to process XML."}],"tags":[],"owner":{"account_id":27071,"reputation":11482,"user_id":71034,"display_name":"Dan Breslau"},"comment_count":4,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1337884165,"creation_date":1239129141,"answer_id":727029,"question_id":726395,"body_markdown":"Robert Rossney said it well: if you&#39;re relying on the ordering of attributes, you&#39;re not really processing XML, but rather, something that looks like XML.\r\n\r\nI can think of at least two reasons why you might care about attribute ordering. There may be others, but at least for these two I can suggest alternatives:\r\n\r\n1. You&#39;re using multiple instances of attributes with the same name:\r\n\r\n        &lt;foo myAttribute=&quot;a&quot; myAttribute=&quot;b&quot; myAttribute=&quot;c&quot;/&gt;\r\n\r\n This is just plain invalid XML; a DOM processor will probably drop all but one of these values – if it processes the document at all.  Instead of this, you want to use child elements:\r\n\r\n        &lt;foo&gt;\r\n            &lt;myChild=&quot;a&quot;/&gt;\r\n            &lt;myChild=&quot;b&quot;/&gt;\r\n            &lt;myChild=&quot;c&quot;/&gt;\r\n        &lt;/foo&gt;\r\n\r\n2. You&#39;re assuming that some sort of distinction applies to the attribute(s) that come first. Make this explicit, either through other attributes or through child elements. For example:\r\n\r\n        &lt;foo attr1=&quot;a&quot; attr2=&quot;b&quot; attr3=&quot;c&quot; theMostImportantAttribute=&quot;attr1&quot; /&gt;","title":"Order of XML attributes after DOM processing","body":"<p>Robert Rossney said it well: if you're relying on the ordering of attributes, you're not really processing XML, but rather, something that looks like XML.</p>\n\n<p>I can think of at least two reasons why you might care about attribute ordering. There may be others, but at least for these two I can suggest alternatives:</p>\n\n<ol>\n<li><p>You're using multiple instances of attributes with the same name:</p>\n\n<pre><code>&lt;foo myAttribute=\"a\" myAttribute=\"b\" myAttribute=\"c\"/&gt;\n</code></pre>\n\n<p>This is just plain invalid XML; a DOM processor will probably drop all but one of these values – if it processes the document at all.  Instead of this, you want to use child elements:</p>\n\n<pre><code>&lt;foo&gt;\n    &lt;myChild=\"a\"/&gt;\n    &lt;myChild=\"b\"/&gt;\n    &lt;myChild=\"c\"/&gt;\n&lt;/foo&gt;\n</code></pre></li>\n<li><p>You're assuming that some sort of distinction applies to the attribute(s) that come first. Make this explicit, either through other attributes or through child elements. For example:</p>\n\n<pre><code>&lt;foo attr1=\"a\" attr2=\"b\" attr3=\"c\" theMostImportantAttribute=\"attr1\" /&gt;\n</code></pre></li>\n</ol>\n"},{"comments":[{"owner":{"account_id":28542,"reputation":160910,"user_id":76337,"accept_rate":70,"display_name":"John Saunders"},"score":1,"creation_date":1410396420,"post_id":3728241,"comment_id":40314265,"body_markdown":"+1 but your example of regression testing is a &quot;red herring&quot;. The solution is to have the regression testing tool first convert the XML file to a canonical order before comparing.","body":"+1 but your example of regression testing is a &quot;red herring&quot;. The solution is to have the regression testing tool first convert the XML file to a canonical order before comparing."},{"owner":{"account_id":1042372,"reputation":429,"user_id":1048117,"accept_rate":40,"display_name":"MushyMiddle"},"score":8,"creation_date":1421175969,"post_id":3728241,"comment_id":44256281,"body_markdown":"@JohnSaunders On the other hand, one of the beauty things about XML is that humans can read it, and at least in LtoR countries, we tend to look for important things towards the L, with less important things to the R.  So, ideally it would be nice to preserve the order when the XML is created, as the creator may have considered attribute ordering to be significant to humans.  At least, this should be an option on the writer or document object.","body":"@JohnSaunders On the other hand, one of the beauty things about XML is that humans can read it, and at least in LtoR countries, we tend to look for important things towards the L, with less important things to the R.  So, ideally it would be nice to preserve the order when the XML is created, as the creator may have considered attribute ordering to be significant to humans.  At least, this should be an option on the writer or document object."},{"owner":{"account_id":28542,"reputation":160910,"user_id":76337,"accept_rate":70,"display_name":"John Saunders"},"score":0,"creation_date":1421176360,"post_id":3728241,"comment_id":44256525,"body_markdown":"But since XML does not consider the order of the attributes, that wouldn&#39;t make much sense.","body":"But since XML does not consider the order of the attributes, that wouldn&#39;t make much sense."},{"owner":{"account_id":64387,"reputation":464,"user_id":190113,"accept_rate":100,"display_name":"SketchBookGames"},"score":21,"creation_date":1425676263,"post_id":3728241,"comment_id":46074763,"body_markdown":"clean diffs in version control is another reason to keep the order of a file the same.","body":"clean diffs in version control is another reason to keep the order of a file the same."},{"owner":{"account_id":28542,"reputation":160910,"user_id":76337,"accept_rate":70,"display_name":"John Saunders"},"score":0,"creation_date":1484869951,"post_id":3728241,"comment_id":70700036,"body_markdown":"@sketch the solution would be to use a compare tool that understands XML. Such a tool would show as identical two XML documents which different only in attribute order.","body":"@sketch the solution would be to use a compare tool that understands XML. Such a tool would show as identical two XML documents which different only in attribute order."},{"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"score":2,"creation_date":1546532291,"post_id":3728241,"comment_id":94888351,"body_markdown":"Allow me to add a comment on an old answer. It may well be that certain SAX parsers preserve attribute order, or that they did so back in 2010. But it&#39;s not part of the specification, and relying on an accidental unspecified property of a particular implementation is not good engineering.","body":"Allow me to add a comment on an old answer. It may well be that certain SAX parsers preserve attribute order, or that they did so back in 2010. But it&#39;s not part of the specification, and relying on an accidental unspecified property of a particular implementation is not good engineering."},{"owner":{"account_id":2037921,"reputation":276,"user_id":1828726,"accept_rate":83,"display_name":"Daniel Yang"},"score":0,"creation_date":1592467881,"post_id":3728241,"comment_id":110437306,"body_markdown":"I just suggest Open Source implementation use ordered map / set  other than hash map/set. with Hash Map,  order of 3-attributes is possibly different from that of 5-attributes, so that after I added few information and save back the file change is bigger than expected, if I commit change to SVN, system thinks there is a big change.","body":"I just suggest Open Source implementation use ordered map / set  other than hash map/set. with Hash Map,  order of 3-attributes is possibly different from that of 5-attributes, so that after I added few information and save back the file change is bigger than expected, if I commit change to SVN, system thinks there is a big change."}],"tags":[],"owner":{"account_id":740156,"reputation":342,"user_id":449695,"display_name":"Alain Pannetier"},"comment_count":7,"down_vote_count":2,"up_vote_count":33,"is_accepted":true,"score":31,"last_activity_date":1410396379,"creation_date":1284651111,"answer_id":3728241,"question_id":726395,"body_markdown":"Sorry to say, but the answer is more subtle than &quot;No you can&#39;t&quot; or &quot;Why do you need to do this in the first place ?&quot;.\r\n\r\nThe short answer is &quot;DOM will not allow you to do that, but SAX will&quot;.\r\n\r\nThis is because DOM does not care about the attribute order, since it&#39;s meaningless as far as the standard is concerned, and by the time the XSL gets hold of the input stream, the info is already lost.\r\nMost XSL engine will actually gracefully preserve the input stream attribute order (e.g.\r\nXalan-C (except in one case) or Xalan-J (always)).  Especially if you use `&lt;xsl:copy*&gt;`.\r\n\r\nCases where the attribute order is not kept, best of my knowledge, are.\r\n  - If the input stream is a DOM\r\n  - Xalan-C: if you insert your result-tree tags literally (e.g. `&lt;elem att1={@att1} .../&gt;`\r\n\r\nHere is one example with SAX, for the record (inhibiting DTD nagging as well).\r\n\r\n    SAXParserFactory spf = SAXParserFactoryImpl.newInstance();\r\n    spf.setNamespaceAware(true);\r\n    spf.setValidating(false);\r\n    spf.setFeature(&quot;http://xml.org/sax/features/validation&quot;, false);\r\n    spf.setFeature(&quot;http://apache.org/xml/features/nonvalidating/load-dtd-grammar&quot;, false);\r\n    spf.setFeature(&quot;http://apache.org/xml/features/nonvalidating/load-external-dtd&quot;, false);\r\n    SAXParser sp = spf.newSAXParser() ;\r\n    Source src = new SAXSource ( sp.getXMLReader(), new InputSource( input.getAbsolutePath() ) ) ;\r\n    String resultFileName = input.getAbsolutePath().replaceAll(&quot;.xml$&quot;, &quot;.cooked.xml&quot; ) ;\r\n    Result result = new StreamResult( new File (resultFileName) ) ;\r\n    TransformerFactory tf = TransformerFactory.newInstance();\r\n    Source xsltSource = new StreamSource( new File ( COOKER_XSL ) );\r\n    xsl = tf.newTransformer( xsltSource ) ;\r\n    xsl.setParameter( &quot;srcDocumentName&quot;, input.getName() ) ;\r\n    xsl.setParameter( &quot;srcDocumentPath&quot;, input.getAbsolutePath() ) ;\r\n    \r\n    xsl.transform(src, result );\r\n\r\nI&#39;d also like to point out, at the intention of many naysayers that there *are* cases where attribute order *does* matter.  \r\n\r\nRegression testing is an obvious case.\r\nWhoever has been called to optimise not-so-well written XSL knows that you usually want to make sure that &quot;new&quot; result trees are similar or identical to the &quot;old&quot; ones. And when the result tree are around one million lines, XML diff tools prove too unwieldy...\r\nIn these cases, preserving attribute order is of great help.\r\n\r\nHope this helps ;-)\r\n","title":"Order of XML attributes after DOM processing","body":"<p>Sorry to say, but the answer is more subtle than \"No you can't\" or \"Why do you need to do this in the first place ?\".</p>\n\n<p>The short answer is \"DOM will not allow you to do that, but SAX will\".</p>\n\n<p>This is because DOM does not care about the attribute order, since it's meaningless as far as the standard is concerned, and by the time the XSL gets hold of the input stream, the info is already lost.\nMost XSL engine will actually gracefully preserve the input stream attribute order (e.g.\nXalan-C (except in one case) or Xalan-J (always)).  Especially if you use <code>&lt;xsl:copy*&gt;</code>.</p>\n\n<p>Cases where the attribute order is not kept, best of my knowledge, are.\n  - If the input stream is a DOM\n  - Xalan-C: if you insert your result-tree tags literally (e.g. <code>&lt;elem att1={@att1} .../&gt;</code></p>\n\n<p>Here is one example with SAX, for the record (inhibiting DTD nagging as well).</p>\n\n<pre><code>SAXParserFactory spf = SAXParserFactoryImpl.newInstance();\nspf.setNamespaceAware(true);\nspf.setValidating(false);\nspf.setFeature(\"http://xml.org/sax/features/validation\", false);\nspf.setFeature(\"http://apache.org/xml/features/nonvalidating/load-dtd-grammar\", false);\nspf.setFeature(\"http://apache.org/xml/features/nonvalidating/load-external-dtd\", false);\nSAXParser sp = spf.newSAXParser() ;\nSource src = new SAXSource ( sp.getXMLReader(), new InputSource( input.getAbsolutePath() ) ) ;\nString resultFileName = input.getAbsolutePath().replaceAll(\".xml$\", \".cooked.xml\" ) ;\nResult result = new StreamResult( new File (resultFileName) ) ;\nTransformerFactory tf = TransformerFactory.newInstance();\nSource xsltSource = new StreamSource( new File ( COOKER_XSL ) );\nxsl = tf.newTransformer( xsltSource ) ;\nxsl.setParameter( \"srcDocumentName\", input.getName() ) ;\nxsl.setParameter( \"srcDocumentPath\", input.getAbsolutePath() ) ;\n\nxsl.transform(src, result );\n</code></pre>\n\n<p>I'd also like to point out, at the intention of many naysayers that there <em>are</em> cases where attribute order <em>does</em> matter.  </p>\n\n<p>Regression testing is an obvious case.\nWhoever has been called to optimise not-so-well written XSL knows that you usually want to make sure that \"new\" result trees are similar or identical to the \"old\" ones. And when the result tree are around one million lines, XML diff tools prove too unwieldy...\nIn these cases, preserving attribute order is of great help.</p>\n\n<p>Hope this helps ;-)</p>\n"},{"comments":[{"owner":{"account_id":16147,"reputation":11216,"user_id":34880,"accept_rate":73,"display_name":"Fernando Migu&#233;lez"},"score":0,"creation_date":1284869590,"post_id":3728269,"comment_id":3957981,"body_markdown":"Though the problem no longer applies to my current situation I do thank your answer. In a near future it could be useful","body":"Though the problem no longer applies to my current situation I do thank your answer. In a near future it could be useful"},{"owner":{"account_id":379606,"reputation":5664,"user_id":733092,"accept_rate":86,"display_name":"Noumenon"},"score":0,"creation_date":1513303597,"post_id":3728269,"comment_id":82612150,"body_markdown":"This is the answer for people who are looking to have XML be comparable in automated tests and diffs. That&#39;s why canonicalization was developed. It does make a lot of potential [changes](https://www.ibm.com/developerworks/library/x-c14n/index.html) to the document, but they didn&#39;t affect me much and I kept them. I did my c14n with python `lxml`, full working snippet at https://stackoverflow.com/questions/22959577/python-exclusive-xml-canonicalization-xml-exc-c14n/22960033#22960033.","body":"This is the answer for people who are looking to have XML be comparable in automated tests and diffs. That&#39;s why canonicalization was developed. It does make a lot of potential <a href=\"https://www.ibm.com/developerworks/library/x-c14n/index.html\" rel=\"nofollow noreferrer\">changes</a> to the document, but they didn&#39;t affect me much and I kept them. I did my c14n with python <code>lxml</code>, full working snippet at <a href=\"https://stackoverflow.com/questions/22959577/python-exclusive-xml-canonicalization-xml-exc-c14n/22960033#22960033\" title=\"python exclusive xml canonicalization xml exc c14n\">stackoverflow.com/questions/22959577/&hellip;</a>."}],"tags":[],"owner":{"account_id":172481,"reputation":110942,"user_id":400547,"display_name":"Jon Hanna"},"comment_count":2,"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1284651386,"creation_date":1284651386,"answer_id":3728269,"question_id":726395,"body_markdown":"XML Canonicalisation results in a consistent attribute ordering, primarily to allow one to check a signature over some or all of the XML, though there are other potential uses. This may suit your purposes.","title":"Order of XML attributes after DOM processing","body":"<p>XML Canonicalisation results in a consistent attribute ordering, primarily to allow one to check a signature over some or all of the XML, though there are other potential uses. This may suit your purposes.</p>\n"},{"comments":[{"owner":{"account_id":28542,"reputation":160910,"user_id":76337,"accept_rate":70,"display_name":"John Saunders"},"score":0,"creation_date":1410396235,"post_id":11263710,"comment_id":40314215,"body_markdown":"Your humans should be taught that the order doesn&#39;t matter. And, yes, if your government is the kind which takes dissident software engineers out back and shoots them, then, don&#39;t say no. But do try to find a way to tell us which government it is, so we know for the future.","body":"Your humans should be taught that the order doesn&#39;t matter. And, yes, if your government is the kind which takes dissident software engineers out back and shoots them, then, don&#39;t say no. But do try to find a way to tell us which government it is, so we know for the future."},{"owner":{"account_id":3721597,"reputation":1647,"user_id":3096537,"display_name":"Renascienza"},"score":6,"creation_date":1484868394,"post_id":11263710,"comment_id":70699633,"body_markdown":"Sorry, @John Saunders. People doesn&#39;t need to be &quot;taught&quot; by software, software need to fulfill people needs. If you have users that can find useful to review attributes on specific order (maybe to not to do a 15min job in 2h...), you need to do it or you are an incompetent engineer. People comes first.","body":"Sorry, @John Saunders. People doesn&#39;t need to be &quot;taught&quot; by software, software need to fulfill people needs. If you have users that can find useful to review attributes on specific order (maybe to not to do a 15min job in 2h...), you need to do it or you are an incompetent engineer. People comes first."},{"owner":{"account_id":28542,"reputation":160910,"user_id":76337,"accept_rate":70,"display_name":"John Saunders"},"score":0,"creation_date":1484869773,"post_id":11263710,"comment_id":70699988,"body_markdown":"@ren I didn&#39;t say they needed to be taught by software. I said they need to be taught _about_ software. XML works how it works, not as uninformed people imagine it does. A compliant XML implementation can present the attributes in any order and still be correct. In this case, the OP confused the UI of a tool for the behavior of the standard. He needed a compare tool that understood XML.","body":"@ren I didn&#39;t say they needed to be taught by software. I said they need to be taught <i>about</i> software. XML works how it works, not as uninformed people imagine it does. A compliant XML implementation can present the attributes in any order and still be correct. In this case, the OP confused the UI of a tool for the behavior of the standard. He needed a compare tool that understood XML."},{"owner":{"account_id":3721597,"reputation":1647,"user_id":3096537,"display_name":"Renascienza"},"score":3,"creation_date":1484871450,"post_id":11263710,"comment_id":70700506,"body_markdown":"I think users really can be taught about XML constraints and how about the format work. But I doubt that this fact change their requirements. If users need ordered attributes to accomplish some job, so they need. If they want to use a simple webpage or a basic text viewer to do it, that&#39;s exactly how this will work. Isn&#39;t developer call to decide that they can&#39;t have it. The developer job is build what people ask for.","body":"I think users really can be taught about XML constraints and how about the format work. But I doubt that this fact change their requirements. If users need ordered attributes to accomplish some job, so they need. If they want to use a simple webpage or a basic text viewer to do it, that&#39;s exactly how this will work. Isn&#39;t developer call to decide that they can&#39;t have it. The developer job is build what people ask for."},{"owner":{"account_id":28542,"reputation":160910,"user_id":76337,"accept_rate":70,"display_name":"John Saunders"},"score":0,"creation_date":1591179508,"post_id":11263710,"comment_id":109954660,"body_markdown":"@Renascienza if your users require ordered attributes in order to do the job, then they need elements instead. Attributes are not ordered.","body":"@Renascienza if your users require ordered attributes in order to do the job, then they need elements instead. Attributes are not ordered."}],"tags":[],"owner":{"account_id":345995,"reputation":6762,"user_id":679240,"accept_rate":61,"display_name":"Haroldo_OK"},"comment_count":5,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1484904574,"creation_date":1340980360,"answer_id":11263710,"question_id":726395,"body_markdown":"I think I can find some valid justifications for caring about attribute order: \r\n\r\n - You may be expecting humans to have to manually read, diagnose or edit the XML data one time or another; readability would be important in that instance, and a consistent and logical ordering of the attributes helps with that;\r\n - You may have to communicate with some tool or service that (admitedly erroneously) cares about the order; asking the provider to correct its code may not be an option: try to ask that from a government agency while your user&#39;s deadline for electronically delivering a bunch of fiscal documents looms closer and closer!\r\n\r\nIt seems like [Alain Pannetier&#39;s solution](https://stackoverflow.com/questions/726395/order-of-xml-attributes-after-dom-processing/3728241#3728241) is the way to go.\r\n\r\nAlso, you may want to take a look at [DecentXML](https://bitbucket.org/digulla/decentxml); it gives you full control of how the XML is formatted, even though it&#39;s not DOM-compatible. Specially useful if you want to modify some hand-edited XML without losing the formatting.","title":"Order of XML attributes after DOM processing","body":"<p>I think I can find some valid justifications for caring about attribute order: </p>\n\n<ul>\n<li>You may be expecting humans to have to manually read, diagnose or edit the XML data one time or another; readability would be important in that instance, and a consistent and logical ordering of the attributes helps with that;</li>\n<li>You may have to communicate with some tool or service that (admitedly erroneously) cares about the order; asking the provider to correct its code may not be an option: try to ask that from a government agency while your user's deadline for electronically delivering a bunch of fiscal documents looms closer and closer!</li>\n</ul>\n\n<p>It seems like <a href=\"https://stackoverflow.com/questions/726395/order-of-xml-attributes-after-dom-processing/3728241#3728241\">Alain Pannetier's solution</a> is the way to go.</p>\n\n<p>Also, you may want to take a look at <a href=\"https://bitbucket.org/digulla/decentxml\" rel=\"nofollow noreferrer\">DecentXML</a>; it gives you full control of how the XML is formatted, even though it's not DOM-compatible. Specially useful if you want to modify some hand-edited XML without losing the formatting.</p>\n"},{"tags":[],"owner":{"account_id":257351,"reputation":266,"user_id":538708,"display_name":"Bashir"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1383252064,"creation_date":1359670383,"answer_id":14636121,"question_id":726395,"body_markdown":"I had the same exact problem. I wanted to modify XML attributes but wanted to keep the order because of diff. I used [StAX][1] to achieve this. You have to use XMLStreamReader and XMLStreamWriter (the Cursor based solution). When you get a START_ELEMENT event type, the cursor keeps the index of the attributes. Hence, you can make appropriate modifications and write them to the output file &quot;in order&quot;. \r\n\r\nLook at this [article/discussion][2]. You can see how to read the attributes of the start elements in order. \r\n\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/tutorial/jaxp/stax/index.html\r\n  [2]: https://forums.oracle.com/forums/thread.jspa?threadID=2428142&amp;tstart=0","title":"Order of XML attributes after DOM processing","body":"<p>I had the same exact problem. I wanted to modify XML attributes but wanted to keep the order because of diff. I used <a href=\"http://docs.oracle.com/javase/tutorial/jaxp/stax/index.html\" rel=\"nofollow\">StAX</a> to achieve this. You have to use XMLStreamReader and XMLStreamWriter (the Cursor based solution). When you get a START_ELEMENT event type, the cursor keeps the index of the attributes. Hence, you can make appropriate modifications and write them to the output file \"in order\". </p>\n\n<p>Look at this <a href=\"https://forums.oracle.com/forums/thread.jspa?threadID=2428142&amp;tstart=0\" rel=\"nofollow\">article/discussion</a>. You can see how to read the attributes of the start elements in order. </p>\n"},{"tags":[],"owner":{"account_id":5120138,"reputation":1,"user_id":4103994,"display_name":"Roberto Taschetto"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1412285296,"creation_date":1412285296,"answer_id":26169932,"question_id":726395,"body_markdown":"I have a quite similar problem. I need to have always the same attribute for first.\r\nExample : \r\n\r\n    &lt;h50row a=&quot;1&quot; xidx=&quot;1&quot; c=&quot;1&quot;&gt;&lt;/h50row&gt;\r\n    &lt;h50row a=&quot;2&quot; b=&quot;2&quot; xidx=&quot;2&quot;&gt;&lt;/h50row&gt;\r\n\r\nmust become \r\n\r\n    &lt;h50row xidx=&quot;1&quot; a=&quot;1&quot; c=&quot;1&quot;&gt;&lt;/h50row&gt;\r\n    &lt;h50row xidx=&quot;2&quot; a=&quot;2&quot; b=&quot;2&quot;&gt;&lt;/h50row&gt;\r\n\r\nI found a solution with a regex:\r\n\r\n    test = &quot;&lt;h50row a=\\&quot;1\\&quot; xidx=\\&quot;1\\&quot; c=\\&quot;1\\&quot;&gt;&lt;/h50row&gt;&quot;;\r\n    test = test.replaceAll(&quot;(&lt;h5.*row)(.*)(.xidx=\\&quot;\\\\w*\\&quot;)([^&gt;]*)(&gt;)&quot;, &quot;$1$3$2$4$5&quot;);\r\n\r\nHope you find this usefull\r\n\r\n","title":"Order of XML attributes after DOM processing","body":"<p>I have a quite similar problem. I need to have always the same attribute for first.\nExample : </p>\n\n<pre><code>&lt;h50row a=\"1\" xidx=\"1\" c=\"1\"&gt;&lt;/h50row&gt;\n&lt;h50row a=\"2\" b=\"2\" xidx=\"2\"&gt;&lt;/h50row&gt;\n</code></pre>\n\n<p>must become </p>\n\n<pre><code>&lt;h50row xidx=\"1\" a=\"1\" c=\"1\"&gt;&lt;/h50row&gt;\n&lt;h50row xidx=\"2\" a=\"2\" b=\"2\"&gt;&lt;/h50row&gt;\n</code></pre>\n\n<p>I found a solution with a regex:</p>\n\n<pre><code>test = \"&lt;h50row a=\\\"1\\\" xidx=\\\"1\\\" c=\\\"1\\\"&gt;&lt;/h50row&gt;\";\ntest = test.replaceAll(\"(&lt;h5.*row)(.*)(.xidx=\\\"\\\\w*\\\")([^&gt;]*)(&gt;)\", \"$1$3$2$4$5\");\n</code></pre>\n\n<p>Hope you find this usefull</p>\n"},{"tags":[],"owner":{"account_id":244548,"reputation":4557,"user_id":517450,"display_name":"Radu Simionescu"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1433855622,"creation_date":1433855622,"answer_id":30733059,"question_id":726395,"body_markdown":"You can still do this using the standard DOM and Transformation API by using a quick and dirty solution like the one I am describing:\r\n\r\nWe know that the transformation API solution orders the attributes alphabetically. You can prefix the attributes names with some easy-to-strip-later strings so that they will be output in the order you want. Simple prefixes as &quot;a_&quot; &quot;b_&quot; etc should suffice in most situations and can be easily stripped from the output xml using a one liner regex.\r\n\r\nIf you are loading an xml and resave and want to preserve attributes order, you can use the same principle, by first modifying the attribute names in the input xml text and then parsing it into a Document object. Again, make this modification based on a textual processing of the xml. This can be tricky but can be done by detecting elements and their attributes strings, again, using regex. Note that this is a dirty solution. There are many pitfalls when parsing XML on your own, even for something as simple as this, so be careful if you decide to implement this.","title":"Order of XML attributes after DOM processing","body":"<p>You can still do this using the standard DOM and Transformation API by using a quick and dirty solution like the one I am describing:</p>\n\n<p>We know that the transformation API solution orders the attributes alphabetically. You can prefix the attributes names with some easy-to-strip-later strings so that they will be output in the order you want. Simple prefixes as \"a_\" \"b_\" etc should suffice in most situations and can be easily stripped from the output xml using a one liner regex.</p>\n\n<p>If you are loading an xml and resave and want to preserve attributes order, you can use the same principle, by first modifying the attribute names in the input xml text and then parsing it into a Document object. Again, make this modification based on a textual processing of the xml. This can be tricky but can be done by detecting elements and their attributes strings, again, using regex. Note that this is a dirty solution. There are many pitfalls when parsing XML on your own, even for something as simple as this, so be careful if you decide to implement this.</p>\n"},{"comments":[{"owner":{"account_id":3721597,"reputation":1647,"user_id":3096537,"display_name":"Renascienza"},"score":1,"creation_date":1484868217,"post_id":32575759,"comment_id":70699583,"body_markdown":"Not really related with this question. The guy doesn&#39;t need to order elements, but attributes inside elements.","body":"Not really related with this question. The guy doesn&#39;t need to order elements, but attributes inside elements."}],"tags":[],"owner":{"account_id":3088921,"reputation":1890,"user_id":2615510,"display_name":"Andrey Lebedenko"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1443117505,"creation_date":1442276135,"answer_id":32575759,"question_id":726395,"body_markdown":"Kind of works...\r\n\r\n    package mynewpackage;\r\n\r\n    // for the method\r\n    import java.lang.reflect.Constructor;\r\n    import java.util.ArrayList;\r\n    import java.util.Arrays;\r\n    import java.util.Comparator;\r\n    import java.util.List;\r\n    import org.w3c.dom.Element;\r\n    import org.w3c.dom.Node;\r\n    import org.w3c.dom.NodeList;\r\n    \r\n    // for the test example\r\n    import org.xml.sax.InputSource;\r\n    import javax.xml.parsers.DocumentBuilder;\r\n    import javax.xml.parsers.DocumentBuilderFactory;\r\n    import java.io.StringReader;\r\n    import org.w3c.dom.Document;\r\n    import java.math.BigDecimal;\r\n\r\n    public class NodeTools {\r\n        /**\r\n         * Method sorts any NodeList by provided attribute.\r\n         * @param nl NodeList to sort\r\n         * @param attributeName attribute name to use\r\n         * @param asc true - ascending, false - descending\r\n         * @param B class must implement Comparable and have Constructor(String) - e.g. Integer.class , BigDecimal.class etc\r\n         * @return \r\n         */\r\n        public static Node[] sortNodes(NodeList nl, String attributeName, boolean asc, Class&lt;? extends Comparable&gt; B)\r\n        {        \r\n            class NodeComparator&lt;T&gt; implements Comparator&lt;T&gt;\r\n            {\r\n                @Override\r\n                public int compare(T a, T b)\r\n                {\r\n                    int ret;\r\n                    Comparable bda = null, bdb = null;\r\n                    try{\r\n                        Constructor bc = B.getDeclaredConstructor(String.class);\r\n                        bda = (Comparable)bc.newInstance(((Element)a).getAttribute(attributeName));\r\n                        bdb = (Comparable)bc.newInstance(((Element)b).getAttribute(attributeName));\r\n                    }\r\n                    catch(Exception e)\r\n                    {\r\n                        return 0; // yes, ugly, i know :)\r\n                    }\r\n                    ret = bda.compareTo(bdb);\r\n                    return asc ? ret : -ret; \r\n                }\r\n            }\r\n    \r\n            List&lt;Node&gt; x = new ArrayList&lt;&gt;();\r\n            for(int i = 0; i &lt; nl.getLength(); i++)\r\n            {\r\n                x.add(nl.item(i));\r\n            }\r\n            Node[] ret = new Node[x.size()];\r\n            ret = x.toArray(ret);\r\n            Arrays.sort(ret, new NodeComparator&lt;Node&gt;());\r\n            return ret;\r\n        }    \r\n        \r\n        public static void main(String... args)\r\n        {\r\n            DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();  \r\n            DocumentBuilder builder;\r\n            String s = &quot;&lt;xml&gt;&lt;item id=\\&quot;1\\&quot; price=\\&quot;100.00\\&quot; /&gt;&lt;item id=\\&quot;3\\&quot; price=\\&quot;29.99\\&quot; /&gt;&lt;item id=\\&quot;2\\&quot; price=\\&quot;5.10\\&quot; /&gt;&lt;/xml&gt;&quot;;\r\n            Document doc = null;\r\n            try \r\n            {  \r\n                builder = factory.newDocumentBuilder();  \r\n                doc = builder.parse(new InputSource(new StringReader(s)));\r\n            }\r\n            catch(Exception e) { System.out.println(&quot;Alarm &quot;+e); return; }\r\n            \r\n            System.out.println(&quot;*** Sort by id ***&quot;);\r\n            Node[] ret = NodeTools.sortNodes(doc.getElementsByTagName(&quot;item&quot;), &quot;id&quot;, true, Integer.class);\r\n            \r\n            for(Node n: ret)\r\n            {\r\n                System.out.println(((Element)n).getAttribute(&quot;id&quot;)+&quot; : &quot;+((Element)n).getAttribute(&quot;price&quot;));\r\n            }\r\n            \r\n            System.out.println(&quot;*** Sort by price ***&quot;);\r\n            ret = NodeTools.sortNodes(doc.getElementsByTagName(&quot;item&quot;), &quot;price&quot;, true, BigDecimal.class);\r\n            for(Node n: ret)\r\n            {\r\n                System.out.println(((Element)n).getAttribute(&quot;id&quot;)+&quot; : &quot;+((Element)n).getAttribute(&quot;price&quot;));\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nIn my simple test it prints:\r\n\r\n    *** Sort by id ***\r\n    1 : 100.00\r\n    2 : 5.10\r\n    3 : 29.99\r\n    *** Sort by price ***\r\n    2 : 5.10\r\n    3 : 29.99\r\n    1 : 100.00","title":"Order of XML attributes after DOM processing","body":"<p>Kind of works...</p>\n\n<pre><code>package mynewpackage;\n\n// for the method\nimport java.lang.reflect.Constructor;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.Comparator;\nimport java.util.List;\nimport org.w3c.dom.Element;\nimport org.w3c.dom.Node;\nimport org.w3c.dom.NodeList;\n\n// for the test example\nimport org.xml.sax.InputSource;\nimport javax.xml.parsers.DocumentBuilder;\nimport javax.xml.parsers.DocumentBuilderFactory;\nimport java.io.StringReader;\nimport org.w3c.dom.Document;\nimport java.math.BigDecimal;\n\npublic class NodeTools {\n    /**\n     * Method sorts any NodeList by provided attribute.\n     * @param nl NodeList to sort\n     * @param attributeName attribute name to use\n     * @param asc true - ascending, false - descending\n     * @param B class must implement Comparable and have Constructor(String) - e.g. Integer.class , BigDecimal.class etc\n     * @return \n     */\n    public static Node[] sortNodes(NodeList nl, String attributeName, boolean asc, Class&lt;? extends Comparable&gt; B)\n    {        \n        class NodeComparator&lt;T&gt; implements Comparator&lt;T&gt;\n        {\n            @Override\n            public int compare(T a, T b)\n            {\n                int ret;\n                Comparable bda = null, bdb = null;\n                try{\n                    Constructor bc = B.getDeclaredConstructor(String.class);\n                    bda = (Comparable)bc.newInstance(((Element)a).getAttribute(attributeName));\n                    bdb = (Comparable)bc.newInstance(((Element)b).getAttribute(attributeName));\n                }\n                catch(Exception e)\n                {\n                    return 0; // yes, ugly, i know :)\n                }\n                ret = bda.compareTo(bdb);\n                return asc ? ret : -ret; \n            }\n        }\n\n        List&lt;Node&gt; x = new ArrayList&lt;&gt;();\n        for(int i = 0; i &lt; nl.getLength(); i++)\n        {\n            x.add(nl.item(i));\n        }\n        Node[] ret = new Node[x.size()];\n        ret = x.toArray(ret);\n        Arrays.sort(ret, new NodeComparator&lt;Node&gt;());\n        return ret;\n    }    \n\n    public static void main(String... args)\n    {\n        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();  \n        DocumentBuilder builder;\n        String s = \"&lt;xml&gt;&lt;item id=\\\"1\\\" price=\\\"100.00\\\" /&gt;&lt;item id=\\\"3\\\" price=\\\"29.99\\\" /&gt;&lt;item id=\\\"2\\\" price=\\\"5.10\\\" /&gt;&lt;/xml&gt;\";\n        Document doc = null;\n        try \n        {  \n            builder = factory.newDocumentBuilder();  \n            doc = builder.parse(new InputSource(new StringReader(s)));\n        }\n        catch(Exception e) { System.out.println(\"Alarm \"+e); return; }\n\n        System.out.println(\"*** Sort by id ***\");\n        Node[] ret = NodeTools.sortNodes(doc.getElementsByTagName(\"item\"), \"id\", true, Integer.class);\n\n        for(Node n: ret)\n        {\n            System.out.println(((Element)n).getAttribute(\"id\")+\" : \"+((Element)n).getAttribute(\"price\"));\n        }\n\n        System.out.println(\"*** Sort by price ***\");\n        ret = NodeTools.sortNodes(doc.getElementsByTagName(\"item\"), \"price\", true, BigDecimal.class);\n        for(Node n: ret)\n        {\n            System.out.println(((Element)n).getAttribute(\"id\")+\" : \"+((Element)n).getAttribute(\"price\"));\n        }\n    }\n}\n</code></pre>\n\n<p>In my simple test it prints:</p>\n\n<pre><code>*** Sort by id ***\n1 : 100.00\n2 : 5.10\n3 : 29.99\n*** Sort by price ***\n2 : 5.10\n3 : 29.99\n1 : 100.00\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8466817,"reputation":1,"user_id":6350743,"display_name":"trh0"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666893185,"creation_date":1666893109,"answer_id":74226333,"question_id":726395,"body_markdown":"Inspired by the answer of [Andrey Lebedenko][1].  \r\nCapable of sorting by a Nodes attribute or by a Nodes text content.  \r\nReady to be used in Your XML utility class.  \r\n\r\n    public static Collection&lt;Node&gt; nodeListCollection(final NodeList nodeList) {\r\n      if (nodeList == null) {\r\n        return Collections.emptyList();\r\n      }\r\n      final int length = nodeList.getLength();\r\n      if (length == 0) {\r\n        return Collections.emptyList();\r\n      }\r\n      return IntStream.range(0, length)\r\n          .mapToObj(nodeList::item)\r\n          .collect(Collectors.toList());\r\n    }\r\n\r\n    private static int compareString(final String str1, final String str2, final boolean nullIsLess) {\r\n      if (Objects.equals(str1, str2)) { \r\n        return 0;\r\n      }\r\n      if (str1 == null) {\r\n        return nullIsLess ? -1 : 1;\r\n      }\r\n      if (str2 == null) {\r\n        return nullIsLess ? 1 : -1;\r\n      }\r\n      return str1.compareTo(str2);\r\n    }\r\n    \r\n    private static final Function&lt;Boolean, Comparator&lt;Node&gt;&gt; StringNodeValueComparatorSupplier = (asc) -&gt;\r\n        (Node a, Node b) -&gt; {\r\n          final String va = a == null ? null : a.getTextContent();\r\n          final String vb = b == null ? null : b.getTextContent();\r\n          return (asc ? 1 : -1) * compareString(va, vb,asc);\r\n        };\r\n    \r\n    private static final BiFunction&lt;Boolean, String, Comparator&lt;Node&gt;&gt; StringNodeAttributeComparatorSupplier = (asc, attrName) -&gt;\r\n        (Node a, Node b) -&gt; {\r\n          final String va = a == null ? null : a.hasAttributes() ?\r\n              ((Element) a).getAttribute(attrName) : null;\r\n          final String vb = b == null ? null : b.hasAttributes() ?\r\n              ((Element) b).getAttribute(attrName) : null;\r\n          return (asc ? 1 : -1) * compareString(va, vb,asc);\r\n        };\r\n    \r\n    private static &lt;T extends Comparable&lt;T&gt;&gt; Comparator&lt;Node&gt; nodeComparator(\r\n        final boolean asc,\r\n        final boolean useAttr,\r\n        final String attribute,\r\n        final Constructor&lt;T&gt; constructor\r\n    ) {\r\n      return (Node a, Node b) -&gt; {\r\n        if (a == null &amp;&amp; b == null) {\r\n          return 0;\r\n        } else if (a == null) {\r\n          return (asc ? -1 : 1);\r\n        } else if (b == null) {\r\n          return (asc ? 1 : -1);\r\n        }\r\n    \r\n        T aV;\r\n        try {\r\n          final String aStr;\r\n          if (useAttr) {\r\n            aStr = a.hasAttributes() ? ((Element) a).getAttribute(attribute) : null;\r\n          } else {\r\n            aStr = a.getTextContent();\r\n          }\r\n          aV = aStr == null || aStr.matches(&quot;\\\\s+&quot;) ? null : constructor.newInstance(aStr);\r\n        } catch (Exception ignored) {\r\n          aV = null;\r\n        }\r\n    \r\n        T bV;\r\n        try {\r\n          final String bStr;\r\n          if (useAttr) {\r\n            bStr = b.hasAttributes() ? ((Element) b).getAttribute(attribute) : null;\r\n          } else {\r\n            bStr = b.getTextContent();\r\n          }\r\n          bV = bStr == null || bStr.matches(&quot;\\\\s+&quot;) ? null : constructor.newInstance(bStr);\r\n        } catch (Exception ignored) {\r\n          bV = null;\r\n        }\r\n    \r\n        final int ret;\r\n        if (aV == null &amp;&amp; bV == null) {\r\n          ret = 0;\r\n        } else if (aV == null) {\r\n          ret = -1;\r\n        } else if (bV == null) {\r\n          ret = 1;\r\n        } else {\r\n          ret = aV.compareTo(bV);\r\n        }\r\n        return (asc ? 1 : -1) * ret;\r\n      };\r\n    }\r\n    \r\n    \r\n    /**\r\n     * Method to sort any NodeList by an attribute all nodes must have. &lt;br&gt;If the attribute is absent for a signle\r\n     * {@link Node} or the {@link NodeList} does contain elements without Attributes, null is used instead. &lt;br&gt;If\r\n     * &lt;code&gt;asc&lt;/code&gt; is\r\n     * &lt;code&gt;true&lt;/code&gt;, nulls first, else nulls last.\r\n     *\r\n     * @param nodeList The {@link NodeList} containing all {@link Node} to sort.\r\n     * @param attribute Name of the attribute to extract and compare\r\n     * @param asc &lt;code&gt;true&lt;/code&gt;: ascending, &lt;code&gt;false&lt;/code&gt;: descending\r\n     * @param compareType Optional class to use for comparison. Must implement {@link Comparable} and have Constructor\r\n     * that takes a single {@link String} argument. If &lt;code&gt;null&lt;/code&gt; is supplied, {@link String} is used.\r\n     * @return A collection of the {@link Node}s passed as {@link NodeList}\r\n     * @throws RuntimeException If &lt;code&gt;compareType&lt;/code&gt; does not have a constructor taking a single {@link String}\r\n     * argument. Also, if the comparator created does violate the {@link Comparator} contract, an\r\n     * {@link IllegalArgumentException} is raised.\r\n     * @implNote Exceptions during calls of the single String argument constructor of &lt;code&gt;compareType&lt;/code&gt; are\r\n     * ignored. Values are substituted by &lt;code&gt;null&lt;/code&gt;\r\n     */\r\n    public static &lt;T extends Comparable&lt;T&gt;&gt; Collection&lt;Node&gt; sortNodesByAttribute(\r\n        final NodeList nodeList,\r\n        String attribute,\r\n        boolean asc,\r\n        Class&lt;T&gt; compareType) {\r\n    \r\n      final Comparator&lt;Node&gt; nodeComparator;\r\n      if (compareType == null) {\r\n        nodeComparator = StringNodeAttributeComparatorSupplier.apply(asc, attribute);\r\n      } else {\r\n        final Constructor&lt;T&gt; constructor;\r\n        try {\r\n          constructor = compareType.getDeclaredConstructor(String.class);\r\n        } catch (NoSuchMethodException e) {\r\n          throw new RuntimeException(\r\n              &quot;Cannot compare Node Attribute &#39;&quot; + attribute + &quot;&#39; using the Type &#39;&quot; + compareType.getName()\r\n                  + &quot;&#39;: No Constructor available that takes a single String argument.&quot;, e);\r\n        }\r\n        nodeComparator = nodeComparator(asc, true, attribute, constructor);\r\n      }\r\n      final List&lt;Node&gt; nodes = new ArrayList&lt;&gt;(nodeListCollection(nodeList));\r\n      nodes.sort(nodeComparator);\r\n      return nodes;\r\n    }\r\n    \r\n    /**\r\n     * Method to sort any NodeList by their text content using an optional type. &lt;br&gt;If\r\n     * &lt;code&gt;asc&lt;/code&gt; is\r\n     * &lt;code&gt;true&lt;/code&gt;, nulls first, else nulls last.\r\n     *\r\n     * @param nodeList The {@link NodeList} containing all {@link Node}s to sort.\r\n     * @param asc &lt;code&gt;true&lt;/code&gt;: ascending, &lt;code&gt;false&lt;/code&gt;: descending\r\n     * @param compareType Optional class to use for comparison. Must implement {@link Comparable} and have Constructor\r\n     * that takes a single {@link String} argument. If &lt;code&gt;null&lt;/code&gt; is supplied, {@link String} is used.\r\n     * @return A collection of the {@link Node}s passed as {@link NodeList}\r\n     * @throws RuntimeException If &lt;code&gt;compareType&lt;/code&gt; does not have a constructor taking a single {@link String}\r\n     * argument. Also, if the comparator created does violate the {@link Comparator} contract, an\r\n     * {@link IllegalArgumentException} is raised.\r\n     * @implNote Exceptions during calls of the single String argument constructor of &lt;code&gt;compareType&lt;/code&gt; are\r\n     * ignored. Values are substituted by &lt;code&gt;null&lt;/code&gt;\r\n     */\r\n    public static &lt;T extends Comparable&lt;T&gt;&gt; Collection&lt;Node&gt; sortNodes(\r\n        final NodeList nodeList,\r\n        boolean asc,\r\n        Class&lt;T&gt; compareType) {\r\n    \r\n      final Comparator&lt;Node&gt; nodeComparator;\r\n      if (compareType == null) {\r\n        nodeComparator = StringNodeValueComparatorSupplier.apply(asc);\r\n      } else {\r\n        final Constructor&lt;T&gt; constructor;\r\n        try {\r\n          constructor = compareType.getDeclaredConstructor(String.class);\r\n        } catch (NoSuchMethodException e) {\r\n          throw new RuntimeException(\r\n              &quot;Cannot compare Nodes using the Type &#39;&quot; + compareType.getName()\r\n                  + &quot;&#39;: No Constructor available that takes a single String argument.&quot;, e);\r\n        }\r\n        nodeComparator = nodeComparator(asc, false, null, constructor);\r\n      }\r\n      final List&lt;Node&gt; nodes = new ArrayList&lt;&gt;(nodeListCollection(nodeList));\r\n      nodes.sort(nodeComparator);\r\n      return nodes;\r\n    }\r\n\r\n  [1]: https://stackoverflow.com/a/32575759/6350743","title":"Order of XML attributes after DOM processing","body":"<p>Inspired by the answer of <a href=\"https://stackoverflow.com/a/32575759/6350743\">Andrey Lebedenko</a>.<br />\nCapable of sorting by a Nodes attribute or by a Nodes text content.<br />\nReady to be used in Your XML utility class.</p>\n<pre><code>public static Collection&lt;Node&gt; nodeListCollection(final NodeList nodeList) {\n  if (nodeList == null) {\n    return Collections.emptyList();\n  }\n  final int length = nodeList.getLength();\n  if (length == 0) {\n    return Collections.emptyList();\n  }\n  return IntStream.range(0, length)\n      .mapToObj(nodeList::item)\n      .collect(Collectors.toList());\n}\n\nprivate static int compareString(final String str1, final String str2, final boolean nullIsLess) {\n  if (Objects.equals(str1, str2)) { \n    return 0;\n  }\n  if (str1 == null) {\n    return nullIsLess ? -1 : 1;\n  }\n  if (str2 == null) {\n    return nullIsLess ? 1 : -1;\n  }\n  return str1.compareTo(str2);\n}\n\nprivate static final Function&lt;Boolean, Comparator&lt;Node&gt;&gt; StringNodeValueComparatorSupplier = (asc) -&gt;\n    (Node a, Node b) -&gt; {\n      final String va = a == null ? null : a.getTextContent();\n      final String vb = b == null ? null : b.getTextContent();\n      return (asc ? 1 : -1) * compareString(va, vb,asc);\n    };\n\nprivate static final BiFunction&lt;Boolean, String, Comparator&lt;Node&gt;&gt; StringNodeAttributeComparatorSupplier = (asc, attrName) -&gt;\n    (Node a, Node b) -&gt; {\n      final String va = a == null ? null : a.hasAttributes() ?\n          ((Element) a).getAttribute(attrName) : null;\n      final String vb = b == null ? null : b.hasAttributes() ?\n          ((Element) b).getAttribute(attrName) : null;\n      return (asc ? 1 : -1) * compareString(va, vb,asc);\n    };\n\nprivate static &lt;T extends Comparable&lt;T&gt;&gt; Comparator&lt;Node&gt; nodeComparator(\n    final boolean asc,\n    final boolean useAttr,\n    final String attribute,\n    final Constructor&lt;T&gt; constructor\n) {\n  return (Node a, Node b) -&gt; {\n    if (a == null &amp;&amp; b == null) {\n      return 0;\n    } else if (a == null) {\n      return (asc ? -1 : 1);\n    } else if (b == null) {\n      return (asc ? 1 : -1);\n    }\n\n    T aV;\n    try {\n      final String aStr;\n      if (useAttr) {\n        aStr = a.hasAttributes() ? ((Element) a).getAttribute(attribute) : null;\n      } else {\n        aStr = a.getTextContent();\n      }\n      aV = aStr == null || aStr.matches(&quot;\\\\s+&quot;) ? null : constructor.newInstance(aStr);\n    } catch (Exception ignored) {\n      aV = null;\n    }\n\n    T bV;\n    try {\n      final String bStr;\n      if (useAttr) {\n        bStr = b.hasAttributes() ? ((Element) b).getAttribute(attribute) : null;\n      } else {\n        bStr = b.getTextContent();\n      }\n      bV = bStr == null || bStr.matches(&quot;\\\\s+&quot;) ? null : constructor.newInstance(bStr);\n    } catch (Exception ignored) {\n      bV = null;\n    }\n\n    final int ret;\n    if (aV == null &amp;&amp; bV == null) {\n      ret = 0;\n    } else if (aV == null) {\n      ret = -1;\n    } else if (bV == null) {\n      ret = 1;\n    } else {\n      ret = aV.compareTo(bV);\n    }\n    return (asc ? 1 : -1) * ret;\n  };\n}\n\n\n/**\n * Method to sort any NodeList by an attribute all nodes must have. &lt;br&gt;If the attribute is absent for a signle\n * {@link Node} or the {@link NodeList} does contain elements without Attributes, null is used instead. &lt;br&gt;If\n * &lt;code&gt;asc&lt;/code&gt; is\n * &lt;code&gt;true&lt;/code&gt;, nulls first, else nulls last.\n *\n * @param nodeList The {@link NodeList} containing all {@link Node} to sort.\n * @param attribute Name of the attribute to extract and compare\n * @param asc &lt;code&gt;true&lt;/code&gt;: ascending, &lt;code&gt;false&lt;/code&gt;: descending\n * @param compareType Optional class to use for comparison. Must implement {@link Comparable} and have Constructor\n * that takes a single {@link String} argument. If &lt;code&gt;null&lt;/code&gt; is supplied, {@link String} is used.\n * @return A collection of the {@link Node}s passed as {@link NodeList}\n * @throws RuntimeException If &lt;code&gt;compareType&lt;/code&gt; does not have a constructor taking a single {@link String}\n * argument. Also, if the comparator created does violate the {@link Comparator} contract, an\n * {@link IllegalArgumentException} is raised.\n * @implNote Exceptions during calls of the single String argument constructor of &lt;code&gt;compareType&lt;/code&gt; are\n * ignored. Values are substituted by &lt;code&gt;null&lt;/code&gt;\n */\npublic static &lt;T extends Comparable&lt;T&gt;&gt; Collection&lt;Node&gt; sortNodesByAttribute(\n    final NodeList nodeList,\n    String attribute,\n    boolean asc,\n    Class&lt;T&gt; compareType) {\n\n  final Comparator&lt;Node&gt; nodeComparator;\n  if (compareType == null) {\n    nodeComparator = StringNodeAttributeComparatorSupplier.apply(asc, attribute);\n  } else {\n    final Constructor&lt;T&gt; constructor;\n    try {\n      constructor = compareType.getDeclaredConstructor(String.class);\n    } catch (NoSuchMethodException e) {\n      throw new RuntimeException(\n          &quot;Cannot compare Node Attribute '&quot; + attribute + &quot;' using the Type '&quot; + compareType.getName()\n              + &quot;': No Constructor available that takes a single String argument.&quot;, e);\n    }\n    nodeComparator = nodeComparator(asc, true, attribute, constructor);\n  }\n  final List&lt;Node&gt; nodes = new ArrayList&lt;&gt;(nodeListCollection(nodeList));\n  nodes.sort(nodeComparator);\n  return nodes;\n}\n\n/**\n * Method to sort any NodeList by their text content using an optional type. &lt;br&gt;If\n * &lt;code&gt;asc&lt;/code&gt; is\n * &lt;code&gt;true&lt;/code&gt;, nulls first, else nulls last.\n *\n * @param nodeList The {@link NodeList} containing all {@link Node}s to sort.\n * @param asc &lt;code&gt;true&lt;/code&gt;: ascending, &lt;code&gt;false&lt;/code&gt;: descending\n * @param compareType Optional class to use for comparison. Must implement {@link Comparable} and have Constructor\n * that takes a single {@link String} argument. If &lt;code&gt;null&lt;/code&gt; is supplied, {@link String} is used.\n * @return A collection of the {@link Node}s passed as {@link NodeList}\n * @throws RuntimeException If &lt;code&gt;compareType&lt;/code&gt; does not have a constructor taking a single {@link String}\n * argument. Also, if the comparator created does violate the {@link Comparator} contract, an\n * {@link IllegalArgumentException} is raised.\n * @implNote Exceptions during calls of the single String argument constructor of &lt;code&gt;compareType&lt;/code&gt; are\n * ignored. Values are substituted by &lt;code&gt;null&lt;/code&gt;\n */\npublic static &lt;T extends Comparable&lt;T&gt;&gt; Collection&lt;Node&gt; sortNodes(\n    final NodeList nodeList,\n    boolean asc,\n    Class&lt;T&gt; compareType) {\n\n  final Comparator&lt;Node&gt; nodeComparator;\n  if (compareType == null) {\n    nodeComparator = StringNodeValueComparatorSupplier.apply(asc);\n  } else {\n    final Constructor&lt;T&gt; constructor;\n    try {\n      constructor = compareType.getDeclaredConstructor(String.class);\n    } catch (NoSuchMethodException e) {\n      throw new RuntimeException(\n          &quot;Cannot compare Nodes using the Type '&quot; + compareType.getName()\n              + &quot;': No Constructor available that takes a single String argument.&quot;, e);\n    }\n    nodeComparator = nodeComparator(asc, false, null, constructor);\n  }\n  final List&lt;Node&gt; nodes = new ArrayList&lt;&gt;(nodeListCollection(nodeList));\n  nodes.sort(nodeComparator);\n  return nodes;\n}\n</code></pre>\n"}],"owner":{"account_id":16147,"reputation":11216,"user_id":34880,"accept_rate":73,"display_name":"Fernando Migu&#233;lez"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52431,"favorite_count":0,"down_vote_count":0,"up_vote_count":48,"accepted_answer_id":3728241,"answer_count":12,"score":48,"last_activity_date":1666893185,"creation_date":1239118934,"question_id":726395,"body_markdown":"When processing XML by means of standard DOM, attribute order is not guaranteed after you serialize back. At last that is what I just realized when using standard java XML Transform API to serialize the output.\r\n\r\nHowever I do need to keep an order. I would like to know if there is any posibility on Java to keep the original order of attributes of an XML file processed by means of DOM API, or any way to force the order (maybe by using an alternative serialization API that lets you set this kind of property). In my case processing reduces to alter the value of some attributes (not all) of a sequence of the same elements with a bunch of attributes, and maybe insert a few more elements.\r\n\r\nIs there any &quot;easy&quot; way or do I have to define my own XSLT transformation stylesheet to specify the output and altering the whole input XML file?\r\n\r\n**Update** I must thank all your answers. The answer seems now more obvious than I expected. I never paid any attention to attribute order, since I had never needed it before.\r\n\r\nThe main reason to require an attribute order is that the resulting XML file just *looks* different. The target is a configuration file that holds hundreds of alarms (every alarm is defined by a set of attributes). This file usually has little modifications over time, but it is convenient to keep it ordered, since when we need to modify something it is edited by hand. Now and then some projects need light modifications of this file, such as setting one of the attributes to a customer specific code. \r\n\r\nI just developed a little application to merge original file (common to all projects) with specific parts of each project (modify the value of some attributes), so project-specific file gets the updates of the base one (new alarm definitions or some attribute values bugfixes). My main motivation to require ordered attributes is to be able to check the output of the application againts the original file by means of a text comparation tool (such as Winmerge). If the format (mainly attribute order) remains the same, the differences can be easily spotted.\r\n\r\nI really thought this was possible, since XML handling programs, such as XML Spy, lets you edit XML files and apply some ordering (grid mode). Maybe my only choice is to use one of these programs to *manually* modify the output file.","title":"Order of XML attributes after DOM processing","body":"<p>When processing XML by means of standard DOM, attribute order is not guaranteed after you serialize back. At last that is what I just realized when using standard java XML Transform API to serialize the output.</p>\n\n<p>However I do need to keep an order. I would like to know if there is any posibility on Java to keep the original order of attributes of an XML file processed by means of DOM API, or any way to force the order (maybe by using an alternative serialization API that lets you set this kind of property). In my case processing reduces to alter the value of some attributes (not all) of a sequence of the same elements with a bunch of attributes, and maybe insert a few more elements.</p>\n\n<p>Is there any \"easy\" way or do I have to define my own XSLT transformation stylesheet to specify the output and altering the whole input XML file?</p>\n\n<p><strong>Update</strong> I must thank all your answers. The answer seems now more obvious than I expected. I never paid any attention to attribute order, since I had never needed it before.</p>\n\n<p>The main reason to require an attribute order is that the resulting XML file just <em>looks</em> different. The target is a configuration file that holds hundreds of alarms (every alarm is defined by a set of attributes). This file usually has little modifications over time, but it is convenient to keep it ordered, since when we need to modify something it is edited by hand. Now and then some projects need light modifications of this file, such as setting one of the attributes to a customer specific code. </p>\n\n<p>I just developed a little application to merge original file (common to all projects) with specific parts of each project (modify the value of some attributes), so project-specific file gets the updates of the base one (new alarm definitions or some attribute values bugfixes). My main motivation to require ordered attributes is to be able to check the output of the application againts the original file by means of a text comparation tool (such as Winmerge). If the format (mainly attribute order) remains the same, the differences can be easily spotted.</p>\n\n<p>I really thought this was possible, since XML handling programs, such as XML Spy, lets you edit XML files and apply some ordering (grid mode). Maybe my only choice is to use one of these programs to <em>manually</em> modify the output file.</p>\n"},{"tags":["java","spring","session","tomcat","servlets"],"comments":[{"owner":{"account_id":83010,"reputation":27402,"user_id":233014,"display_name":"Christoffer Hammarstr&#246;m"},"score":0,"creation_date":1305717355,"post_id":6042846,"comment_id":6991613,"body_markdown":"Why do you need to change the session id?","body":"Why do you need to change the session id?"},{"owner":{"account_id":104911,"reputation":119222,"user_id":280244,"accept_rate":81,"display_name":"Ralph"},"score":2,"creation_date":1305717624,"post_id":6042846,"comment_id":6991684,"body_markdown":"@Christoffer Hammarstr&#246;m: chanching session id after login prevents session hijacking.","body":"@Christoffer Hammarstr&#246;m: chanching session id after login prevents session hijacking."}],"answers":[{"comments":[{"owner":{"account_id":84463,"reputation":2913,"user_id":236112,"accept_rate":85,"display_name":"coder247"},"score":0,"creation_date":1305789678,"post_id":6043884,"comment_id":7007739,"body_markdown":"When I call session.invalidate() is throws an exception.java.lang.IllegalStateException: getLastAccessedTime: Session already invalidated","body":"When I call session.invalidate() is throws an exception.java.lang.IllegalStateException: getLastAccessedTime: Session already invalidated"},{"owner":{"account_id":104911,"reputation":119222,"user_id":280244,"accept_rate":81,"display_name":"Ralph"},"score":0,"creation_date":1305790094,"post_id":6043884,"comment_id":7007858,"body_markdown":"To my understanding: the doc said you do not need to do anything. Have you checked that the session id does not change automatically, before trying to implement your own logic?","body":"To my understanding: the doc said you do not need to do anything. Have you checked that the session id does not change automatically, before trying to implement your own logic?"},{"owner":{"account_id":84463,"reputation":2913,"user_id":236112,"accept_rate":85,"display_name":"coder247"},"score":0,"creation_date":1305790398,"post_id":6043884,"comment_id":7007920,"body_markdown":"sorry. the context is different. It is not about spring security","body":"sorry. the context is different. It is not about spring security"},{"owner":{"account_id":7487560,"reputation":145,"user_id":5690287,"display_name":"Dhruv Singhal"},"score":0,"creation_date":1539007579,"post_id":6043884,"comment_id":92334654,"body_markdown":"Hi! Is there a way to add session attribute just after login? Where should I put the adding attribute part? I am using Spring Security Just in case","body":"Hi! Is there a way to add session attribute just after login? Where should I put the adding attribute part? I am using Spring Security Just in case"},{"owner":{"account_id":104911,"reputation":119222,"user_id":280244,"accept_rate":81,"display_name":"Ralph"},"score":1,"creation_date":1539021870,"post_id":6043884,"comment_id":92341859,"body_markdown":"@Dhruv Singhal: you could implement a `AuthenticationSuccessHandler` to get access to the Http Session after successfull login (do not forget to invoke the &quot;original&quot; `AuthenticationSuccessHandler`. Or you hook up at the `AuthenticationSuccessEvent` or `InteractiveAuthenticationSuccessEvent` and try to get access to the http request via `RequestContextHolder` _(I never used `RequestContextHolder` before, so I do not know how to get it running)_","body":"@Dhruv Singhal: you could implement a <code>AuthenticationSuccessHandler</code> to get access to the Http Session after successfull login (do not forget to invoke the &quot;original&quot; <code>AuthenticationSuccessHandler</code>. Or you hook up at the <code>AuthenticationSuccessEvent</code> or <code>InteractiveAuthenticationSuccessEvent</code> and try to get access to the http request via <code>RequestContextHolder</code> <i>(I never used <code>RequestContextHolder</code> before, so I do not know how to get it running)</i>"},{"owner":{"account_id":7487560,"reputation":145,"user_id":5690287,"display_name":"Dhruv Singhal"},"score":0,"creation_date":1539065509,"post_id":6043884,"comment_id":92354305,"body_markdown":"Thanks a ton, somehow I also got the link for tutorials explaining the same thing.","body":"Thanks a ton, somehow I also got the link for tutorials explaining the same thing."}],"tags":[],"owner":{"account_id":104911,"reputation":119222,"user_id":280244,"accept_rate":81,"display_name":"Ralph"},"comment_count":6,"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1305791067,"creation_date":1305717859,"answer_id":6043884,"question_id":6042846,"body_markdown":"If you use Spring Security, the framework should change the session id after login by default.\n\n@see [Spring Security FAQ][1]:\n\n&gt;Why does the session Id change when I authenticate through Spring Security?\n&gt;\n&gt;With the default configuration, Spring Security invalidates the existing session when the user authenticates and creates a new one, transferring the session data to it. The intention is to change the session identifier to prevent “session-fixation” attacks. You can find more about this online and in the reference manual\n\n-----\nIf you do not use Spring (Security) you have to do it by your own. A bit in this way:\n\n    public class Login extends HttpServlet {\n    ...\n        HttpSession session = request.getSession();\n        Map&lt;String,Object&gt; values = session.GetAll(); //This line is psydo code\n        //Use getValueNames() and a loop with getValue(String name);\n    \n        // Kill the current session\n       session.invalidate();\n    \n       HttpSession newSession = request.getSession(true);\n       newSession.putAllValues(values); //This line is psydo code\n    ... \n\n\n  [1]: http://static.springsource.org/spring-security/site/faq.html#faq-new-session-on-authentication","title":"session id change and attributes copying after login","body":"<p>If you use Spring Security, the framework should change the session id after login by default.</p>\n<p>@see <a href=\"http://static.springsource.org/spring-security/site/faq.html#faq-new-session-on-authentication\" rel=\"noreferrer\">Spring Security FAQ</a>:</p>\n<blockquote>\n<p>Why does the session Id change when I authenticate through Spring Security?</p>\n<p>With the default configuration, Spring Security invalidates the existing session when the user authenticates and creates a new one, transferring the session data to it. The intention is to change the session identifier to prevent “session-fixation” attacks. You can find more about this online and in the reference manual</p>\n</blockquote>\n<hr />\n<p>If you do not use Spring (Security) you have to do it by your own. A bit in this way:</p>\n<pre><code>public class Login extends HttpServlet {\n...\n    HttpSession session = request.getSession();\n    Map&lt;String,Object&gt; values = session.GetAll(); //This line is psydo code\n    //Use getValueNames() and a loop with getValue(String name);\n\n    // Kill the current session\n   session.invalidate();\n\n   HttpSession newSession = request.getSession(true);\n   newSession.putAllValues(values); //This line is psydo code\n... \n</code></pre>\n"},{"tags":[],"owner":{"account_id":428088,"reputation":3113,"user_id":810176,"accept_rate":85,"display_name":"Ankit"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1344838661,"creation_date":1344838661,"answer_id":11929036,"question_id":6042846,"body_markdown":"This might help\r\n\r\n    Cookie cookie = new Cookie(&quot;JSESSIONID&quot;, null);\r\n    cookie.setPath(&quot;/&quot;);\r\n    cookie.setMaxAge(0);\r\n    response.addProperty(cookie);","title":"session id change and attributes copying after login","body":"<p>This might help</p>\n\n<pre><code>Cookie cookie = new Cookie(\"JSESSIONID\", null);\ncookie.setPath(\"/\");\ncookie.setMaxAge(0);\nresponse.addProperty(cookie);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5772257,"reputation":1594,"user_id":4555367,"accept_rate":73,"display_name":"Prasad"},"score":1,"creation_date":1483166779,"post_id":41406052,"comment_id":70015230,"body_markdown":"Some more explanation helps folks to understand clearly","body":"Some more explanation helps folks to understand clearly"}],"tags":[],"owner":{"account_id":9944879,"reputation":21,"user_id":7359994,"display_name":"sachin berad"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1483166427,"creation_date":1483165801,"answer_id":41406052,"question_id":6042846,"body_markdown":"        session=request.getSession(true);\r\n\t\tEnumeration keys = session.getAttributeNames();\t\t\r\n\t\tHashMap&lt;String,Object&gt; hm=new HashMap&lt;String,Object&gt;();  \r\n\t\twhile (keys.hasMoreElements())\r\n\t\t{\r\n\t\t  String key = (String)keys.nextElement();\r\n\t\t  hm.put(key,session.getValue(key));\r\n\t\t  session.removeAttribute(key);\t\t \r\n\t\t}\r\n\t\tsession.invalidate();\r\n\t\tsession=request.getSession(true);\r\n\t    for(Map.Entry m:hm.entrySet())\r\n\t    {\r\n\t\t  session.setAttribute((String)m.getKey(),m.getValue());  \r\n\t\t  hm.remove(m);\r\n       \t}  \r\n","title":"session id change and attributes copying after login","body":"<pre><code>    session=request.getSession(true);\n    Enumeration keys = session.getAttributeNames();     \n    HashMap&lt;String,Object&gt; hm=new HashMap&lt;String,Object&gt;();  \n    while (keys.hasMoreElements())\n    {\n      String key = (String)keys.nextElement();\n      hm.put(key,session.getValue(key));\n      session.removeAttribute(key);      \n    }\n    session.invalidate();\n    session=request.getSession(true);\n    for(Map.Entry m:hm.entrySet())\n    {\n      session.setAttribute((String)m.getKey(),m.getValue());  \n      hm.remove(m);\n    }  \n</code></pre>\n"},{"tags":[],"owner":{"account_id":26752531,"reputation":21,"user_id":20351670,"display_name":"Ram"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1666893052,"creation_date":1666893052,"answer_id":74226321,"question_id":6042846,"body_markdown":"```\r\nprivate void regenrateSession(HttpServletRequest request) {\r\n  \r\n  HttpSession oldSession = request.getSession();\r\n  \r\n  Enumeration attrNames = oldSession.getAttributeNames();\r\n  Properties props = new Properties();\r\n  \r\n  while (attrNames != null &amp;&amp; attrNames.hasMoreElements()) {\r\n   String key = (String) attrNames.nextElement();\r\n   props.put(key, oldSession.getAttribute(key));\r\n  }\r\n  \r\n  oldSession.invalidate();\r\n  HttpSession newSession = request.getSession(true);\r\n  attrNames = props.keys();\r\n  \r\n  while (attrNames != null &amp;&amp; attrNames.hasMoreElements()) {\r\n   String key = (String) attrNames.nextElement();\r\n   newSession.setAttribute(key, props.get(key));\r\n  }\r\n }\r\n```","title":"session id change and attributes copying after login","body":"<pre><code>private void regenrateSession(HttpServletRequest request) {\n  \n  HttpSession oldSession = request.getSession();\n  \n  Enumeration attrNames = oldSession.getAttributeNames();\n  Properties props = new Properties();\n  \n  while (attrNames != null &amp;&amp; attrNames.hasMoreElements()) {\n   String key = (String) attrNames.nextElement();\n   props.put(key, oldSession.getAttribute(key));\n  }\n  \n  oldSession.invalidate();\n  HttpSession newSession = request.getSession(true);\n  attrNames = props.keys();\n  \n  while (attrNames != null &amp;&amp; attrNames.hasMoreElements()) {\n   String key = (String) attrNames.nextElement();\n   newSession.setAttribute(key, props.get(key));\n  }\n }\n</code></pre>\n"}],"owner":{"account_id":84463,"reputation":2913,"user_id":236112,"accept_rate":85,"display_name":"coder247"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23079,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":6043884,"answer_count":4,"score":5,"last_activity_date":1666893052,"creation_date":1305712501,"question_id":6042846,"body_markdown":"My application use java servlets,jsp and tomcat 6. I like to implement session id change and want to copy the old session attributes to the new one after login. We started using a little bit of spring in this. \r\nWhich is the best way to add this feature to a 10 year old application like this.","title":"session id change and attributes copying after login","body":"<p>My application use java servlets,jsp and tomcat 6. I like to implement session id change and want to copy the old session attributes to the new one after login. We started using a little bit of spring in this. \nWhich is the best way to add this feature to a 10 year old application like this.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2345668,"reputation":13002,"user_id":2055998,"accept_rate":68,"display_name":"PM 77-1"},"score":0,"creation_date":1666889292,"post_id":74225506,"comment_id":131047391,"body_markdown":"You will need to use `substring` multiple times in a loop (as a sliding window) and count matches until the first mismatch.","body":"You will need to use <code>substring</code> multiple times in a loop (as a sliding window) and count matches until the first mismatch."},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1666889308,"post_id":74225506,"comment_id":131047396,"body_markdown":"What&#39;s the specific issue? You know the substring to look for, and you can find out where in a string the substring was found (used to continue looking).","body":"What&#39;s the specific issue? You know the substring to look for, and you can find out where in a string the substring was found (used to continue looking)."}],"answers":[{"tags":[],"owner":{"account_id":26493810,"reputation":323,"user_id":20131874,"display_name":"mmartinez04"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666892868,"creation_date":1666892868,"answer_id":74226288,"question_id":74225506,"body_markdown":"        //Initialize boolean isRepeated\r\n\t    boolean isRepeated = false;\r\n\t    \r\n\t    //Initialize scanner\r\n\t\tScanner input = new Scanner(System.in);\r\n\t\t\r\n\t\t//Obtain user input for word\r\n\t\tSystem.out.print(&quot;Enter a word: &quot;);\r\n\t\tString word = input.nextLine();\r\n\t\t\r\n\t\t//Obtain user input for number\r\n\t\tSystem.out.print(&quot;Enter a number: &quot;);\r\n\t\tint num = input.nextInt();\r\n\t\t\r\n\t\t//Set prefix as substring of word\r\n\t\tString prefix = word.substring(0, num);\r\n\t\t\r\n\t\t//Iterate across the word starting after the prefix\r\n\t\t//Make sure i+num &lt;= length of word to prevent \r\n\t\t//an array out of bounds exception\r\n\t\tfor (int i = num; i + num &lt;= word.length(); i++){\r\n\t\t    \r\n\t\t    //If the substring starting at i and ending before i+num\r\n\t\t    //equals the prefix, set isRepeated to true and break loop\r\n\t\t    if (word.substring(i, i+num).equals(prefix)){\r\n\t\t        isRepeated = true;\r\n                break;\r\n\t\t    }\r\n\t\t}\r\n\t\t\r\n\t\t//Print whether the prefix was repeated or not\r\n\t\tSystem.out.println(prefix + (isRepeated ? &quot; is repeated&quot; : &quot; is not repeated&quot;));","title":"How do I make a program that recognizes that a certain prefix is repeated in a String?","body":"<pre><code>    //Initialize boolean isRepeated\n    boolean isRepeated = false;\n    \n    //Initialize scanner\n    Scanner input = new Scanner(System.in);\n    \n    //Obtain user input for word\n    System.out.print(&quot;Enter a word: &quot;);\n    String word = input.nextLine();\n    \n    //Obtain user input for number\n    System.out.print(&quot;Enter a number: &quot;);\n    int num = input.nextInt();\n    \n    //Set prefix as substring of word\n    String prefix = word.substring(0, num);\n    \n    //Iterate across the word starting after the prefix\n    //Make sure i+num &lt;= length of word to prevent \n    //an array out of bounds exception\n    for (int i = num; i + num &lt;= word.length(); i++){\n        \n        //If the substring starting at i and ending before i+num\n        //equals the prefix, set isRepeated to true and break loop\n        if (word.substring(i, i+num).equals(prefix)){\n            isRepeated = true;\n            break;\n        }\n    }\n    \n    //Print whether the prefix was repeated or not\n    System.out.println(prefix + (isRepeated ? &quot; is repeated&quot; : &quot; is not repeated&quot;));\n</code></pre>\n"}],"owner":{"account_id":26751522,"reputation":1,"user_id":20350804,"display_name":"Dαin"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1666892868,"creation_date":1666888981,"question_id":74225506,"body_markdown":"I have to create a program that recognizes prefix repetition, for example, if the string selected by the user was &quot;coconut&quot;, and &quot;2&quot; was the int value, the program would print &quot;co is a repeated prefix in coconut&quot;. If &quot;3&quot; was the int value, then, upon running, &quot;coc is NOT a repeated prefix in coconut&quot; would be printed. \r\n\r\n\r\n\r\n\r\nI&#39;ve tried utilizing substrings to return the characters of the persons choosing, however, from there, I can&#39;t figure out how to make a Boolean or if statement to accomplish what I want.","title":"How do I make a program that recognizes that a certain prefix is repeated in a String?","body":"<p>I have to create a program that recognizes prefix repetition, for example, if the string selected by the user was &quot;coconut&quot;, and &quot;2&quot; was the int value, the program would print &quot;co is a repeated prefix in coconut&quot;. If &quot;3&quot; was the int value, then, upon running, &quot;coc is NOT a repeated prefix in coconut&quot; would be printed.</p>\n<p>I've tried utilizing substrings to return the characters of the persons choosing, however, from there, I can't figure out how to make a Boolean or if statement to accomplish what I want.</p>\n"},{"tags":["java","swing","java-2d"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1666891054,"post_id":74225511,"comment_id":131047936,"body_markdown":"[Avoid null layouts in Swing](https://technojeeves.com/index.php/aliasjava1/114-avoid-null-layouts-in-swing)","body":"<a href=\"https://technojeeves.com/index.php/aliasjava1/114-avoid-null-layouts-in-swing\" rel=\"nofollow noreferrer\">Avoid null layouts in Swing</a>"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":2,"creation_date":1666891410,"post_id":74225511,"comment_id":131048045,"body_markdown":"*but I can&#39;t place my Jbuttons on the desired places.* well, we have no idea what your &quot;desired location&quot; is for all the components. We can only guess.  I would suggest you create a panel for the buttons and add this panel to the BorderLayout.PAGE_START of the frame. Then you add the panel with the images to the BorderLayout.CENTER.","body":"<i>but I can&#39;t place my Jbuttons on the desired places.</i> well, we have no idea what your &quot;desired location&quot; is for all the components. We can only guess.  I would suggest you create a panel for the buttons and add this panel to the BorderLayout.PAGE_START of the frame. Then you add the panel with the images to the BorderLayout.CENTER."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1666892896,"post_id":74225511,"comment_id":131048574,"body_markdown":"you probably did not set the size of the panel, so it has a size of (0,0) and there is nothing to draw (without layout manager, the code must do everything...)","body":"you probably did not set the size of the panel, so it has a size of (0,0) and there is nothing to draw (without layout manager, the code must do everything...)"}],"answers":[{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1667222046,"post_id":74226280,"comment_id":131112235,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/74226280/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":25205956,"reputation":1,"user_id":19044308,"display_name":"thatsouris"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666892850,"creation_date":1666892850,"answer_id":74226280,"question_id":74225511,"body_markdown":"I would recomend using anything other then a `null` layout for swing. You should check out the documentation for layouts such as `GridBagLayout` and `GridLayout`; since they are much more friendly in terms of compatibility.  \r\n\r\nIf that isn&#39;t what you are looking for, you should also try making two seperate panels, seperating your buttons and images. \r\n\r\n**Swing was specifically built to incorporate layouts in which they provide.**\r\n\r\nI hope you figure it out! :)","title":"Unable to drawimage on null layout swing","body":"<p>I would recomend using anything other then a <code>null</code> layout for swing. You should check out the documentation for layouts such as <code>GridBagLayout</code> and <code>GridLayout</code>; since they are much more friendly in terms of compatibility.</p>\n<p>If that isn't what you are looking for, you should also try making two seperate panels, seperating your buttons and images.</p>\n<p><strong>Swing was specifically built to incorporate layouts in which they provide.</strong></p>\n<p>I hope you figure it out! :)</p>\n"}],"owner":{"account_id":16581173,"reputation":23,"user_id":12474483,"display_name":"Zolak"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1666892850,"creation_date":1666888997,"question_id":74225511,"body_markdown":"I want to draw some images on screen alongside some JButtons placed in different places of the screen. However whenever I have ```setLayout(null);``` the images do not show up on screen. If i don&#39;t set it to null I can make the images show up but I can&#39;t place my Jbuttons on the desired places.\r\n\r\nHow can i make so i have ```setLayout(null);``` and still be able to draw multiple images on screen while placing my buttons anywhere?\r\n\r\nMy Frame Class:\r\n```\r\npublic class PFrame extends JFrame {\r\n\tJPanel p;\r\n\tpublic PFrame() {\r\n\t\tp = new PPanel();\r\n\t\tp.setBackground(Color.WHITE);\r\n\t\tContainer c = getContentPane();\r\n\t\tc.setLayout(null);\r\n\t\tc.add(p);\r\n\t\tsetSize(1200,700);\r\n\t\t\r\n\t\tJRadioButton White = new JRadioButton(&quot;White&quot;);\r\n        ButtonGroup G1 = new ButtonGroup();\r\n        White.setBounds(1000, 30, 80, 50);\r\n        G1.add(White);\r\n        this.add(White);\r\n       //rest of buttons code here...\r\n```\r\n```\r\npublic class PPanel extends JPanel{\r\n\r\n\tpublic void paintComponent(Graphics g) {\r\n\t\tsuper.paintComponent(g);\r\n\t\tImage [] vi = ImgArray();\r\n\t\tint x = 0;\r\n\t\tint y = 0;\r\n\t\tint i;\r\n\t\tfor (i = 0; i &lt; vi.length / 2; i++) {\r\n\t\t\tg.drawImage(vi[i],x,y,240,310,null);\r\n\t\t\tx+= 250;\r\n\t\t\t\r\n\t\t}\r\n\t\ty = 320;\r\n\t\tx = 0;\r\n\t\tfor (i = vi.length / 2; i &lt; vi.length; i++) {\r\n\t\t\tg.drawImage(vi[i],x,y,240,310,null);\r\n\t\t\tx+= 250;\r\n\t\t}\r\n\t}\r\n}\r\n```\r\nMain method:\r\n```\r\npublic static void main(String[] args) {\r\n\t\tPersonagensFrame f =new PFrame();\r\n\t\tf.setVisible(true);\r\n\t\tf.repaint();\r\n\r\n\t}\r\n```","title":"Unable to drawimage on null layout swing","body":"<p>I want to draw some images on screen alongside some JButtons placed in different places of the screen. However whenever I have <code>setLayout(null);</code> the images do not show up on screen. If i don't set it to null I can make the images show up but I can't place my Jbuttons on the desired places.</p>\n<p>How can i make so i have <code>setLayout(null);</code> and still be able to draw multiple images on screen while placing my buttons anywhere?</p>\n<p>My Frame Class:</p>\n<pre><code>public class PFrame extends JFrame {\n    JPanel p;\n    public PFrame() {\n        p = new PPanel();\n        p.setBackground(Color.WHITE);\n        Container c = getContentPane();\n        c.setLayout(null);\n        c.add(p);\n        setSize(1200,700);\n        \n        JRadioButton White = new JRadioButton(&quot;White&quot;);\n        ButtonGroup G1 = new ButtonGroup();\n        White.setBounds(1000, 30, 80, 50);\n        G1.add(White);\n        this.add(White);\n       //rest of buttons code here...\n</code></pre>\n<pre><code>public class PPanel extends JPanel{\n\n    public void paintComponent(Graphics g) {\n        super.paintComponent(g);\n        Image [] vi = ImgArray();\n        int x = 0;\n        int y = 0;\n        int i;\n        for (i = 0; i &lt; vi.length / 2; i++) {\n            g.drawImage(vi[i],x,y,240,310,null);\n            x+= 250;\n            \n        }\n        y = 320;\n        x = 0;\n        for (i = vi.length / 2; i &lt; vi.length; i++) {\n            g.drawImage(vi[i],x,y,240,310,null);\n            x+= 250;\n        }\n    }\n}\n</code></pre>\n<p>Main method:</p>\n<pre><code>public static void main(String[] args) {\n        PersonagensFrame f =new PFrame();\n        f.setVisible(true);\n        f.repaint();\n\n    }\n</code></pre>\n"},{"tags":["java","json"],"comments":[{"owner":{"account_id":11380920,"reputation":8254,"user_id":8343843,"display_name":"Alexey R."},"score":1,"creation_date":1666874428,"post_id":74222174,"comment_id":131041635,"body_markdown":"Which lib do you use for generating json?","body":"Which lib do you use for generating json?"},{"owner":{"account_id":1580243,"reputation":2552,"user_id":1465758,"accept_rate":71,"display_name":"Steffen"},"score":0,"creation_date":1666874777,"post_id":74222174,"comment_id":131041769,"body_markdown":"@alexey-r: javax.ws.rs.client.Entity","body":"@alexey-r: javax.ws.rs.client.Entity"}],"answers":[{"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1666879748,"post_id":74222335,"comment_id":131043785,"body_markdown":"Steffen is not using Jackson.","body":"Steffen is not using Jackson."},{"owner":{"account_id":1580243,"reputation":2552,"user_id":1465758,"accept_rate":71,"display_name":"Steffen"},"score":0,"creation_date":1666880996,"post_id":74222335,"comment_id":131044285,"body_markdown":"@VGR: Of course. I&#39;m using jaxrs. But the solution works also together with jaxrs. If I want to make a pull request I can call ```myBuilder.post(Entity.json(new ObjectMapper().writeValueAsString(myObject)));```","body":"@VGR: Of course. I&#39;m using jaxrs. But the solution works also together with jaxrs. If I want to make a pull request I can call <code>myBuilder.post(Entity.json(new ObjectMapper().writeValueAsString(myObject)));</code>"}],"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"comment_count":2,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1666874974,"creation_date":1666874974,"answer_id":74222335,"question_id":74222174,"body_markdown":"```java\r\nimport com.fasterxml.jackson.annotation.JsonProperty;\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\n\r\npublic static void main(String... args) throws IOException {\r\n    MyObject obj = new MyObject();\r\n    obj.name = &quot;Hein Bl&#246;d&quot;;\r\n    obj.extension = &quot;blah blah&quot;;\r\n\r\n    String json = new ObjectMapper().writeValueAsString(obj);\r\n    MyObject res = new ObjectMapper().readValue(json, MyObject.class);\r\n}\r\n\r\npublic static class MyObject {\r\n\r\n    @JsonProperty(&quot;name&quot;)\r\n    private String name;\r\n    @JsonProperty(&quot;extension:anybill&quot;)\r\n    private String extension;\r\n\r\n}\r\n```","title":"Entity.json(...): how to generate JSON with special characters (like &quot;:&quot;) in the JSON key","body":"<pre class=\"lang-java prettyprint-override\"><code>import com.fasterxml.jackson.annotation.JsonProperty;\nimport com.fasterxml.jackson.databind.ObjectMapper;\n\npublic static void main(String... args) throws IOException {\n    MyObject obj = new MyObject();\n    obj.name = &quot;Hein Blöd&quot;;\n    obj.extension = &quot;blah blah&quot;;\n\n    String json = new ObjectMapper().writeValueAsString(obj);\n    MyObject res = new ObjectMapper().readValue(json, MyObject.class);\n}\n\npublic static class MyObject {\n\n    @JsonProperty(&quot;name&quot;)\n    private String name;\n    @JsonProperty(&quot;extension:anybill&quot;)\n    private String extension;\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1666881856,"creation_date":1666881856,"answer_id":74223967,"question_id":74222174,"body_markdown":"I don’t recommend mixing JAX-RS and Jackson.  Since you are using javax.ws.rs.client.Entity, you should use [@JsonbProperty](https://javaee.github.io/javaee-spec/javadocs/javax/json/bind/annotation/JsonbProperty.html), which is part of Java EE’s JSON-P and which is intended to work with JAX-RS, on your entity class:\r\n\r\n    @JsonbProperty(&quot;extension:anybill&quot;)\r\n    private String extension;\r\n","title":"Entity.json(...): how to generate JSON with special characters (like &quot;:&quot;) in the JSON key","body":"<p>I don’t recommend mixing JAX-RS and Jackson.  Since you are using javax.ws.rs.client.Entity, you should use <a href=\"https://javaee.github.io/javaee-spec/javadocs/javax/json/bind/annotation/JsonbProperty.html\" rel=\"nofollow noreferrer\">@JsonbProperty</a>, which is part of Java EE’s JSON-P and which is intended to work with JAX-RS, on your entity class:</p>\n<pre><code>@JsonbProperty(&quot;extension:anybill&quot;)\nprivate String extension;\n</code></pre>\n"}],"owner":{"account_id":1580243,"reputation":2552,"user_id":1465758,"accept_rate":71,"display_name":"Steffen"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74223967,"answer_count":2,"score":0,"last_activity_date":1666892669,"creation_date":1666874313,"question_id":74222174,"body_markdown":"I have an entity like\r\n\r\n    @Getter\r\n    @Setter\r\n    public class MyObject {\r\n      private String name;\r\n      private String extension;\r\n    }\r\n\r\nI need to generate (for a web service) following JSON:\r\n\r\n    {\r\n      &quot;name&quot; : &quot;Hein Bl&#246;d&quot;\r\n      &quot;extension:anybill&quot; : &quot;blah blah&quot;\r\n    }\r\n\r\nTo generate the JSON I use ```javax.ws.rs.client.Entity.json(myObject)```. The problem is the &quot;:&quot; in the second attribute (because &quot;:&quot; is an invalid character for variable names). Is there any annotation to specify the name of attribute key? Or can I  rename the generated JSON attribute in any other way?","title":"Entity.json(...): how to generate JSON with special characters (like &quot;:&quot;) in the JSON key","body":"<p>I have an entity like</p>\n<pre><code>@Getter\n@Setter\npublic class MyObject {\n  private String name;\n  private String extension;\n}\n</code></pre>\n<p>I need to generate (for a web service) following JSON:</p>\n<pre><code>{\n  &quot;name&quot; : &quot;Hein Blöd&quot;\n  &quot;extension:anybill&quot; : &quot;blah blah&quot;\n}\n</code></pre>\n<p>To generate the JSON I use <code>javax.ws.rs.client.Entity.json(myObject)</code>. The problem is the &quot;:&quot; in the second attribute (because &quot;:&quot; is an invalid character for variable names). Is there any annotation to specify the name of attribute key? Or can I  rename the generated JSON attribute in any other way?</p>\n"},{"tags":["java","jar","extract"],"comments":[{"owner":{"account_id":85671,"reputation":40858,"user_id":238704,"display_name":"President James K. Polk"},"score":2,"creation_date":1474244600,"post_id":39563843,"comment_id":66438188,"body_markdown":"A .class file is Java object code, *not* source code. A jar need not contain any source code.","body":"A .class file is Java object code, <i>not</i> source code. A jar need not contain any source code."},{"owner":{"account_id":5829313,"reputation":16741,"user_id":4596596,"accept_rate":93,"display_name":"ShanZhengYang"},"score":1,"creation_date":1474244658,"post_id":39563843,"comment_id":66438197,"body_markdown":"@JamesKPolk I see. There&#39;s no way to see what code they wrote?","body":"@JamesKPolk I see. There&#39;s no way to see what code they wrote?"},{"owner":{"account_id":1726512,"reputation":683,"user_id":1581037,"accept_rate":71,"display_name":"chifer"},"score":1,"creation_date":1474244702,"post_id":39563843,"comment_id":66438203,"body_markdown":"Looks like you have downloaded the lib rather than src, use jar tf filename.jar to view the contents","body":"Looks like you have downloaded the lib rather than src, use jar tf filename.jar to view the contents"},{"owner":{"account_id":1726512,"reputation":683,"user_id":1581037,"accept_rate":71,"display_name":"chifer"},"score":0,"creation_date":1474244825,"post_id":39563843,"comment_id":66438218,"body_markdown":"Use JAD http://jd.benow.ca/ pretty good","body":"Use JAD <a href=\"http://jd.benow.ca/\" rel=\"nofollow noreferrer\">jd.benow.ca</a> pretty good"}],"answers":[{"tags":[],"owner":{"account_id":997513,"reputation":12945,"user_id":3893496,"accept_rate":54,"display_name":"arcy"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1474245007,"creation_date":1474245007,"answer_id":39563896,"question_id":39563843,"body_markdown":"A jar file *may* contain source code, but more commonly contains only class files. Class files are normally for execution, not for extracting source.\r\n\r\nYou can decompile class files into source code, but the decompiled code will not be nearly as helpful as the original source code.\r\n\r\nIf it is open source, go back to the site where you downloaded the jar files and look for the source. It might be in Zip files to be downloaded, it might be in jar files to be downloaded, and it might be in some kind of repository, like Git, that you can connect to with the right software.","title":"How to extract the source code from a *.jar file on a Mac?","body":"<p>A jar file <em>may</em> contain source code, but more commonly contains only class files. Class files are normally for execution, not for extracting source.</p>\n\n<p>You can decompile class files into source code, but the decompiled code will not be nearly as helpful as the original source code.</p>\n\n<p>If it is open source, go back to the site where you downloaded the jar files and look for the source. It might be in Zip files to be downloaded, it might be in jar files to be downloaded, and it might be in some kind of repository, like Git, that you can connect to with the right software.</p>\n"},{"comments":[{"owner":{"account_id":5829313,"reputation":16741,"user_id":4596596,"accept_rate":93,"display_name":"ShanZhengYang"},"score":0,"creation_date":1474246513,"post_id":39563912,"comment_id":66438517,"body_markdown":"`java -jar fernflower.jar -dgs=true JarToDecompile.jar DecompiledJar` just gives me a subdirectory with the exact same jar file in question","body":"<code>java -jar fernflower.jar -dgs=true JarToDecompile.jar DecompiledJar</code> just gives me a subdirectory with the exact same jar file in question"},{"owner":{"account_id":1576433,"reputation":22963,"user_id":1462718,"accept_rate":89,"display_name":"Brandon"},"score":1,"creation_date":1474246697,"post_id":39563912,"comment_id":66438553,"body_markdown":"Open the file you got in the sub directory. It&#39;s just a zip file that contains a bunch of Java source files.","body":"Open the file you got in the sub directory. It&#39;s just a zip file that contains a bunch of Java source files."},{"owner":{"account_id":5829313,"reputation":16741,"user_id":4596596,"accept_rate":93,"display_name":"ShanZhengYang"},"score":0,"creation_date":1474246722,"post_id":39563912,"comment_id":66438559,"body_markdown":"Should I rename it as a zip file and unzip it?","body":"Should I rename it as a zip file and unzip it?"},{"owner":{"account_id":1576433,"reputation":22963,"user_id":1462718,"accept_rate":89,"display_name":"Brandon"},"score":1,"creation_date":1474246736,"post_id":39563912,"comment_id":66438562,"body_markdown":"Yeah. Rename it and unzip it.","body":"Yeah. Rename it and unzip it."}],"tags":[],"owner":{"account_id":1576433,"reputation":22963,"user_id":1462718,"accept_rate":89,"display_name":"Brandon"},"comment_count":4,"down_vote_count":0,"up_vote_count":24,"is_accepted":true,"score":24,"last_activity_date":1666892305,"creation_date":1474245215,"answer_id":39563912,"question_id":39563843,"body_markdown":"- Download FernFlower.jar: https://the.bytecode.club/fernflower.jar //the fernflower.jar site changed from http to https\r\n- Documentation: http://the.bytecode.club/fernflower.txt\r\n- Repository: https://github.com/JetBrains/intellij-community/tree/master/plugins/java-decompiler/engine/src/org/jetbrains/java/decompiler\r\n\r\n\r\nRun &quot;`java -jar fernflower.jar -dgs=true JarToDecompile.jar DecompiledJar`&quot;\r\n\r\n\r\nThis is what Intelli-J &amp; Android-Studio Decompiler does.\r\n\r\n\r\nNote: Fernflower extracts the `.java` files to a `.jar` file. You can either Unzip the jar file as a regular zip file (if your version of `Archive Utility` on OSX allows it -- It doesn&#39;t do it for me on OSX Sierra but works on El Capitan) OR you can do `jar xf DecompiledJar` and it&#39;ll extract it.\r\n\r\nExample (all in one command -- multiple commands separated by `&amp;&amp;`):\r\n\r\n`java -jar fernflower.jar -dgs=true JarToDecompile.jar DecompiledJar &amp;&amp; cd DecompiledJar &amp;&amp; jar xf DecompiledJar.jar &amp;&amp; cd ../`","title":"How to extract the source code from a *.jar file on a Mac?","body":"<ul>\n<li>Download FernFlower.jar: <a href=\"https://the.bytecode.club/fernflower.jar\" rel=\"nofollow noreferrer\">https://the.bytecode.club/fernflower.jar</a> //the fernflower.jar site changed from http to https</li>\n<li>Documentation: <a href=\"http://the.bytecode.club/fernflower.txt\" rel=\"nofollow noreferrer\">http://the.bytecode.club/fernflower.txt</a></li>\n<li>Repository: <a href=\"https://github.com/JetBrains/intellij-community/tree/master/plugins/java-decompiler/engine/src/org/jetbrains/java/decompiler\" rel=\"nofollow noreferrer\">https://github.com/JetBrains/intellij-community/tree/master/plugins/java-decompiler/engine/src/org/jetbrains/java/decompiler</a></li>\n</ul>\n<p>Run &quot;<code>java -jar fernflower.jar -dgs=true JarToDecompile.jar DecompiledJar</code>&quot;</p>\n<p>This is what Intelli-J &amp; Android-Studio Decompiler does.</p>\n<p>Note: Fernflower extracts the <code>.java</code> files to a <code>.jar</code> file. You can either Unzip the jar file as a regular zip file (if your version of <code>Archive Utility</code> on OSX allows it -- It doesn't do it for me on OSX Sierra but works on El Capitan) OR you can do <code>jar xf DecompiledJar</code> and it'll extract it.</p>\n<p>Example (all in one command -- multiple commands separated by <code>&amp;&amp;</code>):</p>\n<p><code>java -jar fernflower.jar -dgs=true JarToDecompile.jar DecompiledJar &amp;&amp; cd DecompiledJar &amp;&amp; jar xf DecompiledJar.jar &amp;&amp; cd ../</code></p>\n"},{"comments":[{"owner":{"account_id":4932125,"reputation":81,"user_id":3971561,"display_name":"noriks"},"score":4,"creation_date":1642754607,"post_id":51478235,"comment_id":125160994,"body_markdown":"For intellij Idea: Right click on a project-&gt; Open module sttings-&gt;Dependencies tab-&gt;&#39;+&#39; button-&gt;Jars or libraries-&gt;Select your jar-&gt;Save. Then you can see jar content in project navigation window in External Libraries.","body":"For intellij Idea: Right click on a project-&gt; Open module sttings-&gt;Dependencies tab-&gt;&#39;+&#39; button-&gt;Jars or libraries-&gt;Select your jar-&gt;Save. Then you can see jar content in project navigation window in External Libraries."},{"owner":{"account_id":8002380,"reputation":79,"user_id":6036772,"display_name":"Jordan MacLachlan"},"score":0,"creation_date":1677212793,"post_id":51478235,"comment_id":133297553,"body_markdown":"@noriks - thank you. Is there ANY way that I can edit files after importing decompiled *.jar code?","body":"@noriks - thank you. Is there ANY way that I can edit files after importing decompiled *.jar code?"}],"tags":[],"owner":{"account_id":12478113,"reputation":634,"user_id":9083843,"display_name":"saravanan saminathan"},"comment_count":2,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1532347036,"creation_date":1532347036,"answer_id":51478235,"question_id":39563843,"body_markdown":"Easy solution:\r\n\r\nIf you have eclipse just add the jar file in the classpath of current project u can see all the packages and source code in the jar. You no need to install and use the commands. You will get a better view of all files","title":"How to extract the source code from a *.jar file on a Mac?","body":"<p>Easy solution:</p>\n\n<p>If you have eclipse just add the jar file in the classpath of current project u can see all the packages and source code in the jar. You no need to install and use the commands. You will get a better view of all files</p>\n"},{"tags":[],"owner":{"account_id":7551375,"reputation":900,"user_id":5732661,"display_name":"OHY"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1627033315,"creation_date":1627033315,"answer_id":68497204,"question_id":39563843,"body_markdown":"Another solution is to use JD for OSX (http://java-decompiler.github.io/).\r\nFor Java 11 with BigSur version, make sure to fix a common error by adding the line export JAVA_HOME=$(/usr/libexec/java_home -v11) into the file /Applications/JD-GUI.app/Contents/MacOS/universalJavaApplicationStub.sh as suggested in https://github.com/java-decompiler/jd-gui/issues/332","title":"How to extract the source code from a *.jar file on a Mac?","body":"<p>Another solution is to use JD for OSX (<a href=\"http://java-decompiler.github.io/\" rel=\"nofollow noreferrer\">http://java-decompiler.github.io/</a>).\nFor Java 11 with BigSur version, make sure to fix a common error by adding the line export JAVA_HOME=$(/usr/libexec/java_home -v11) into the file /Applications/JD-GUI.app/Contents/MacOS/universalJavaApplicationStub.sh as suggested in <a href=\"https://github.com/java-decompiler/jd-gui/issues/332\" rel=\"nofollow noreferrer\">https://github.com/java-decompiler/jd-gui/issues/332</a></p>\n"},{"tags":[],"owner":{"account_id":18227382,"reputation":71,"user_id":13266897,"display_name":"V Surya Kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1633498066,"creation_date":1633498066,"answer_id":69460256,"question_id":39563843,"body_markdown":"Adding to the solution provided by [@saravanan][1].\r\n\r\nAnother solution is to use **Eclipse IDE** to extract the files.\r\n1. Open the Eclipse\r\n2. Paste the jar file in any of the projects.\r\n3. Right-click on the jar file under Package Explorer.\r\n4. Extract the file to the desired location.\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/9083843/saravanan-saminathan","title":"How to extract the source code from a *.jar file on a Mac?","body":"<p>Adding to the solution provided by <a href=\"https://stackoverflow.com/users/9083843/saravanan-saminathan\">@saravanan</a>.</p>\n<p>Another solution is to use <strong>Eclipse IDE</strong> to extract the files.</p>\n<ol>\n<li>Open the Eclipse</li>\n<li>Paste the jar file in any of the projects.</li>\n<li>Right-click on the jar file under Package Explorer.</li>\n<li>Extract the file to the desired location.</li>\n</ol>\n"}],"owner":{"account_id":5829313,"reputation":16741,"user_id":4596596,"accept_rate":93,"display_name":"ShanZhengYang"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68241,"favorite_count":0,"down_vote_count":0,"up_vote_count":22,"accepted_answer_id":39563912,"answer_count":5,"score":22,"last_activity_date":1666892305,"creation_date":1474244500,"question_id":39563843,"body_markdown":"I&#39;m very confused. I downloaded a *.jar file as a bit of software. So, I would like to extract the source code to look at it\r\n\r\nI used the command `jar xf filename.jar`\r\n\r\nwhich returned two more `*.jar` files and a `*.class` file. I still cannot open these in the terminal with standard text editors. \r\n\r\nPerhaps this is not open source software? Is there an alternative to see what has been done here?","title":"How to extract the source code from a *.jar file on a Mac?","body":"<p>I'm very confused. I downloaded a *.jar file as a bit of software. So, I would like to extract the source code to look at it</p>\n\n<p>I used the command <code>jar xf filename.jar</code></p>\n\n<p>which returned two more <code>*.jar</code> files and a <code>*.class</code> file. I still cannot open these in the terminal with standard text editors. </p>\n\n<p>Perhaps this is not open source software? Is there an alternative to see what has been done here?</p>\n"},{"tags":["java","xml","xpath"],"answers":[{"comments":[{"owner":{"account_id":962360,"reputation":2794,"user_id":986437,"accept_rate":53,"display_name":"GionJh"},"score":0,"creation_date":1666889716,"post_id":74225587,"comment_id":131047507,"body_markdown":"Thanks for your fast response, small additional question: I see that using the org.w3c.dom.Document API, there&#39;s no easy way to achieve that if you do not know whether the tag you are looking for has a name space or not, would you have any hint on how xpath achieves that ?","body":"Thanks for your fast response, small additional question: I see that using the org.w3c.dom.Document API, there&#39;s no easy way to achieve that if you do not know whether the tag you are looking for has a name space or not, would you have any hint on how xpath achieves that ?"},{"owner":{"account_id":4261091,"reputation":32684,"user_id":3485434,"accept_rate":97,"display_name":"Prophet"},"score":0,"creation_date":1666890160,"post_id":74225587,"comment_id":131047666,"body_markdown":"Well, I have no such practical experience, but I guess: you can try using 2 xpathes: one with `name` and the second with `local-name`. In case they will give you the same result you will know there is no name space there, otherwise you will be able to get the name space by reducing the local name received with `local-name` from total name received with `name`. Or maybe I did not understand your question?","body":"Well, I have no such practical experience, but I guess: you can try using 2 xpathes: one with <code>name</code> and the second with <code>local-name</code>. In case they will give you the same result you will know there is no name space there, otherwise you will be able to get the name space by reducing the local name received with <code>local-name</code> from total name received with <code>name</code>. Or maybe I did not understand your question?"},{"owner":{"account_id":4261091,"reputation":32684,"user_id":3485434,"accept_rate":97,"display_name":"Prophet"},"score":0,"creation_date":1666890533,"post_id":74225587,"comment_id":131047804,"body_markdown":"It&#39;s my pleasure :)","body":"It&#39;s my pleasure :)"},{"owner":{"account_id":4261091,"reputation":32684,"user_id":3485434,"accept_rate":97,"display_name":"Prophet"},"score":1,"creation_date":1666891356,"post_id":74225587,"comment_id":131048024,"body_markdown":"Thanks a lot @kjhughes. if you wish you are welcome to edit my answer","body":"Thanks a lot @kjhughes. if you wish you are welcome to edit my answer"}],"tags":[],"owner":{"account_id":4261091,"reputation":32684,"user_id":3485434,"accept_rate":97,"display_name":"Prophet"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1666891936,"creation_date":1666889399,"answer_id":74225587,"question_id":74225492,"body_markdown":"**No**, you do not have to know a document name space when using `local-name`.   \r\nThe only difference between `local-name` and `name` is that `local-name` will give you local name only, without the namespace (if exists) while `name` will give you the name including the the namespace (if exists).   See [this explanation][1] for more details.\r\n\r\nIn general, however, be aware that using `local-host()` to defeat namespaces is not recommended.  The purpose of XML namespaces is to allow names such as `Example` to exist in an XML document from multiple XML vocabularies without conflict.  Namespaces enable this capability and shouldn&#39;t be defeated without good reason.  For examples of how to declare and use namespace prefixes for XPath in many different hosting languages and libraries, see https://stackoverflow.com/q/40796231/290085\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/2464906/3485434","title":"xpath local-name and name space aware document","body":"<p><strong>No</strong>, you do not have to know a document name space when using <code>local-name</code>.<br />\nThe only difference between <code>local-name</code> and <code>name</code> is that <code>local-name</code> will give you local name only, without the namespace (if exists) while <code>name</code> will give you the name including the the namespace (if exists).   See <a href=\"https://stackoverflow.com/a/2464906/3485434\">this explanation</a> for more details.</p>\n<p>In general, however, be aware that using <code>local-host()</code> to defeat namespaces is not recommended.  The purpose of XML namespaces is to allow names such as <code>Example</code> to exist in an XML document from multiple XML vocabularies without conflict.  Namespaces enable this capability and shouldn't be defeated without good reason.  For examples of how to declare and use namespace prefixes for XPath in many different hosting languages and libraries, see <a href=\"https://stackoverflow.com/q/40796231/290085\">How does XPath deal with XML namespaces?</a></p>\n"}],"owner":{"account_id":962360,"reputation":2794,"user_id":986437,"accept_rate":53,"display_name":"GionJh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":113,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1666890836,"accepted_answer_id":74225587,"answer_count":1,"score":1,"last_activity_date":1666891936,"creation_date":1666888880,"question_id":74225492,"body_markdown":"While using xpath,\r\ndo we need to have a document name space aware to be able to use `local-name`\r\n\r\n```\r\n&quot;//*[local-name()=&#39;Example&#39;]&quot;\r\n```\r\n\r\nForm the tests I performed looks like it does not play a role, but this\r\nraises another question.\r\n\r\nDoes xpath care if the document is namespace aware or not ?\r\nAny pointer to rights docs or resources is appreciated.\r\nThanks\r\n","title":"xpath local-name and name space aware document","body":"<p>While using xpath,\ndo we need to have a document name space aware to be able to use <code>local-name</code></p>\n<pre><code>&quot;//*[local-name()='Example']&quot;\n</code></pre>\n<p>Form the tests I performed looks like it does not play a role, but this\nraises another question.</p>\n<p>Does xpath care if the document is namespace aware or not ?\nAny pointer to rights docs or resources is appreciated.\nThanks</p>\n"},{"tags":["java","database","h2"],"answers":[{"comments":[{"owner":{"account_id":171109,"reputation":36863,"user_id":398309,"accept_rate":68,"display_name":"Michael Spector"},"score":0,"creation_date":1292518198,"post_id":4444458,"comment_id":4877154,"body_markdown":"I read the docs, but I still can&#39;t understand what &quot;connection timed out&quot; means. After restarting the computer the problem went away, but it&#39;s interesting to know what happened...","body":"I read the docs, but I still can&#39;t understand what &quot;connection timed out&quot; means. After restarting the computer the problem went away, but it&#39;s interesting to know what happened..."},{"owner":{"account_id":161745,"reputation":49245,"user_id":382763,"accept_rate":92,"display_name":"Thomas Mueller"},"score":1,"creation_date":1292910501,"post_id":4444458,"comment_id":4920321,"body_markdown":"What it could be (I didn&#39;t test it) is that the IP address of the computer changed (for example the wireless connection dropped) while the database was already open.","body":"What it could be (I didn&#39;t test it) is that the IP address of the computer changed (for example the wireless connection dropped) while the database was already open."},{"owner":{"account_id":171109,"reputation":36863,"user_id":398309,"accept_rate":68,"display_name":"Michael Spector"},"score":0,"creation_date":1305121167,"post_id":4444458,"comment_id":6881117,"body_markdown":"Java property: `h2.bindAddress` comes in handy to prevent DB throw this kind of exception when IP address changes (if you only use DB locally).","body":"Java property: <code>h2.bindAddress</code> comes in handy to prevent DB throw this kind of exception when IP address changes (if you only use DB locally)."}],"tags":[],"owner":{"account_id":161745,"reputation":49245,"user_id":382763,"accept_rate":92,"display_name":"Thomas Mueller"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1292362401,"creation_date":1292362401,"answer_id":4444458,"question_id":4437153,"body_markdown":"I guess you read the [docs about the automatic mixed mode][1]? It&#39;s hard to say what the problem is, because for me it works. Could you post the content of the file C:\\Users\\Michael\\.myadd\\db.lock.db ? For me it is (after connecting):\r\n\r\n    #FileLock\r\n    #Tue Dec 14 22:29:22 CET 2010\r\n    id=12ce6c9a16a912077e514cc6fff231e91b09d2dbe43\r\n    method=file\r\n    server=192.168.0.126\\:52068\r\n\r\nThat means the database is open, and the client that opened it started a server on this IP address and port.\r\n\r\n\r\n  [1]: http://h2database.com/html/features.html#auto_mixed_mode","title":"H2 Database (embedded) connection timeout","body":"<p>I guess you read the <a href=\"http://h2database.com/html/features.html#auto_mixed_mode\" rel=\"nofollow\">docs about the automatic mixed mode</a>? It's hard to say what the problem is, because for me it works. Could you post the content of the file C:\\Users\\Michael.myadd\\db.lock.db ? For me it is (after connecting):</p>\n\n<pre><code>#FileLock\n#Tue Dec 14 22:29:22 CET 2010\nid=12ce6c9a16a912077e514cc6fff231e91b09d2dbe43\nmethod=file\nserver=192.168.0.126\\:52068\n</code></pre>\n\n<p>That means the database is open, and the client that opened it started a server on this IP address and port.</p>\n"},{"tags":[],"owner":{"account_id":213292,"reputation":1793,"user_id":466608,"accept_rate":83,"display_name":"ranjeetcao"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1445015406,"creation_date":1444851821,"answer_id":33134228,"question_id":4437153,"body_markdown":"For h2 default connection pool size is 10 and login timeout is 30 sec, if we acquire 10 simultaneous connection for longer period then new request to acquire connection will be timed out. \r\nfor my case found that connection was not getting closed due to bug in code. we can increase max connection count.\r\n\r\n    connectionPool.setMaxConnections(20);\r\n\r\nbut by default db manager is single threaded so more connection will not gain any performance. \r\n\r\n ","title":"H2 Database (embedded) connection timeout","body":"<p>For h2 default connection pool size is 10 and login timeout is 30 sec, if we acquire 10 simultaneous connection for longer period then new request to acquire connection will be timed out. \nfor my case found that connection was not getting closed due to bug in code. we can increase max connection count.</p>\n\n<pre><code>connectionPool.setMaxConnections(20);\n</code></pre>\n\n<p>but by default db manager is single threaded so more connection will not gain any performance. </p>\n"},{"tags":[],"owner":{"account_id":18770784,"reputation":177,"user_id":13687639,"display_name":"MoKi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1624139885,"creation_date":1624139885,"answer_id":68051050,"question_id":4437153,"body_markdown":"&gt; Restart your computer first (^_^)/ 再起動\r\n\r\nI tried everything, but the only thing that seems to work is **restarting** my computer.\r\n\r\nHere&#39;s a list of things that did **NOT** work:\r\n 1. refreshing the project and maven\r\n 2. closing and opening applications\r\n 3. adjusting the code\r\n\r\nI could even see the database working fine in the H2 Console, but eclipse would not connect to it until I restarted my computer.\r\n\r\nI logged this error many times:\r\n&quot;connection: org.h2.jdbc.JdbcSQLNonTransientConnectionException: Connection is broken: &quot;java.net.SocketTimeoutException: Connect timed out: ...&quot;\r\n\r\nI restarted to connect to the database before lunch, and worked on my pc for an hour. It slept through lunch, then I had to restart my computer again to connect to the database in the afternoon.\r\n\r\nOther comments are about `MaxConnections`, but I am the only one using this database.","title":"H2 Database (embedded) connection timeout","body":"<blockquote>\n<p>Restart your computer first (^_^)/ 再起動</p>\n</blockquote>\n<p>I tried everything, but the only thing that seems to work is <strong>restarting</strong> my computer.</p>\n<p>Here's a list of things that did <strong>NOT</strong> work:</p>\n<ol>\n<li>refreshing the project and maven</li>\n<li>closing and opening applications</li>\n<li>adjusting the code</li>\n</ol>\n<p>I could even see the database working fine in the H2 Console, but eclipse would not connect to it until I restarted my computer.</p>\n<p>I logged this error many times:\n&quot;connection: org.h2.jdbc.JdbcSQLNonTransientConnectionException: Connection is broken: &quot;java.net.SocketTimeoutException: Connect timed out: ...&quot;</p>\n<p>I restarted to connect to the database before lunch, and worked on my pc for an hour. It slept through lunch, then I had to restart my computer again to connect to the database in the afternoon.</p>\n<p>Other comments are about <code>MaxConnections</code>, but I am the only one using this database.</p>\n"},{"tags":[],"owner":{"account_id":132051,"reputation":4348,"user_id":332517,"accept_rate":58,"display_name":"Rostislav Matl"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666891686,"creation_date":1666891686,"answer_id":74226044,"question_id":4437153,"body_markdown":"It could happen, especially on Windows, when some process locks access to the db file. Easy way how to test it is to try to delete the file, if you can recreate it easily. Then you have to find the process and kill it.","title":"H2 Database (embedded) connection timeout","body":"<p>It could happen, especially on Windows, when some process locks access to the db file. Easy way how to test it is to try to delete the file, if you can recreate it easily. Then you have to find the process and kill it.</p>\n"}],"owner":{"account_id":171109,"reputation":36863,"user_id":398309,"accept_rate":68,"display_name":"Michael Spector"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12404,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":4444458,"answer_count":4,"score":3,"last_activity_date":1666891686,"creation_date":1292314706,"question_id":4437153,"body_markdown":"I get the following exception when connecting to the database:\r\n\r\n    org.h2.jdbc.JdbcSQLException: Connection is broken: &quot;connect timed out&quot; [90067-142]\r\n    \tat org.h2.message.DbException.getJdbcSQLException(DbException.java:327)\r\n    \tat org.h2.message.DbException.get(DbException.java:156)\r\n    \tat org.h2.engine.SessionRemote.connectServer(SessionRemote.java:326)\r\n    \tat org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:248)\r\n    \tat org.h2.engine.SessionRemote.createSession(SessionRemote.java:214)\r\n    \tat org.h2.jdbc.JdbcConnection.&lt;init&gt;(JdbcConnection.java:111)\r\n    \tat org.h2.jdbc.JdbcConnection.&lt;init&gt;(JdbcConnection.java:95)\r\n    \tat org.h2.Driver.connect(Driver.java:73)\r\n    \tat java.sql.DriverManager.getConnection(DriverManager.java:582)\r\n    \tat java.sql.DriverManager.getConnection(DriverManager.java:185)\r\n    ................\r\n    Caused by: java.net.SocketTimeoutException: connect timed out\r\n    \tat java.net.PlainSocketImpl.socketConnect(Native Method)\r\n    \tat java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333)\r\n    \tat java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:195)\r\n    \tat java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182)\r\n    \tat java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)\r\n    \tat java.net.Socket.connect(Socket.java:525)\r\n    \tat org.h2.util.NetUtils.createSocket(NetUtils.java:109)\r\n    \tat org.h2.util.NetUtils.createSocket(NetUtils.java:91)\r\n    \tat org.h2.engine.SessionRemote.initTransfer(SessionRemote.java:92)\r\n    \tat org.h2.engine.SessionRemote.connectServer(SessionRemote.java:322)\r\n    \t... 38 more\r\n\r\n\r\nThe connection string looks as follows:\r\n\r\n    jdbc:h2:C:\\Users\\Michael\\.myadd\\db;AUTO_SERVER=TRUE;CIPHER=AES\r\n\r\n\r\nWhat can be the reason for such exception?\r\n\r\nThanks!","title":"H2 Database (embedded) connection timeout","body":"<p>I get the following exception when connecting to the database:</p>\n\n<pre><code>org.h2.jdbc.JdbcSQLException: Connection is broken: \"connect timed out\" [90067-142]\n    at org.h2.message.DbException.getJdbcSQLException(DbException.java:327)\n    at org.h2.message.DbException.get(DbException.java:156)\n    at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:326)\n    at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:248)\n    at org.h2.engine.SessionRemote.createSession(SessionRemote.java:214)\n    at org.h2.jdbc.JdbcConnection.&lt;init&gt;(JdbcConnection.java:111)\n    at org.h2.jdbc.JdbcConnection.&lt;init&gt;(JdbcConnection.java:95)\n    at org.h2.Driver.connect(Driver.java:73)\n    at java.sql.DriverManager.getConnection(DriverManager.java:582)\n    at java.sql.DriverManager.getConnection(DriverManager.java:185)\n................\nCaused by: java.net.SocketTimeoutException: connect timed out\n    at java.net.PlainSocketImpl.socketConnect(Native Method)\n    at java.net.PlainSocketImpl.doConnect(PlainSocketImpl.java:333)\n    at java.net.PlainSocketImpl.connectToAddress(PlainSocketImpl.java:195)\n    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:182)\n    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)\n    at java.net.Socket.connect(Socket.java:525)\n    at org.h2.util.NetUtils.createSocket(NetUtils.java:109)\n    at org.h2.util.NetUtils.createSocket(NetUtils.java:91)\n    at org.h2.engine.SessionRemote.initTransfer(SessionRemote.java:92)\n    at org.h2.engine.SessionRemote.connectServer(SessionRemote.java:322)\n    ... 38 more\n</code></pre>\n\n<p>The connection string looks as follows:</p>\n\n<pre><code>jdbc:h2:C:\\Users\\Michael\\.myadd\\db;AUTO_SERVER=TRUE;CIPHER=AES\n</code></pre>\n\n<p>What can be the reason for such exception?</p>\n\n<p>Thanks!</p>\n"},{"tags":["java","android-studio","dronekit","dronekit-android"],"answers":[{"tags":[],"owner":{"account_id":25846806,"reputation":1,"user_id":19581506,"display_name":"Aditya"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666891540,"creation_date":1666891540,"answer_id":74226009,"question_id":70760669,"body_markdown":"When you open the Android Library file(dronekit.aar) with WinRAR, you will see an AndroidManifest.xml file, open it with notepad or any text Editor and add a function \r\n\r\n    android:exported=&quot;true&quot;\r\n in every service and activity which are there.\r\nThen export it again in android studio and add dependency in build. gradle. It will work.","title":"Android Studio Error Manifest merger failed : Apps targeting Android 12 exported already exists","body":"<p>When you open the Android Library file(dronekit.aar) with WinRAR, you will see an AndroidManifest.xml file, open it with notepad or any text Editor and add a function</p>\n<pre><code>android:exported=&quot;true&quot;\n</code></pre>\n<p>in every service and activity which are there.\nThen export it again in android studio and add dependency in build. gradle. It will work.</p>\n"}],"owner":{"account_id":23979475,"reputation":11,"user_id":17967145,"display_name":"mist-rain"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":109,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1666891540,"creation_date":1642530681,"question_id":70760669,"body_markdown":"I&#39;m not good at English, so I use a translator. I&#39;m sorry.\r\n\r\nI&#39;m working on a project to control drones on mobile, and I&#39;m going to find a module called dronekit and use it, but when I apply it, the same error appears.\r\n\r\n`Manifest merger failed : android:exported needs to be explicitly specified for &lt;service&gt;. Apps targeting Android 12 and higher are required to specify an explicit value for `android:exported` when the corresponding component has an intent filter defined`\r\n\r\nmy manifest:\r\n\r\n        &lt;activity\r\n            android:name=&quot;.MainActivity&quot;\r\n            android:exported=&quot;true&quot;\r\n            android:screenOrientation=&quot;landscape&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n\r\nmy build.gradle(:app):\r\n\r\n    android {\r\n    ...\r\n    compileSdk 31\r\n    defaultConfig {\r\n        ...\r\n        minSdk 23\r\n        targetSdk 31\r\n        ...\r\n    }\r\n    dependencies {\r\n    ...\r\n    implementation files(&#39;../libs/dronekit-android.3.0.2.aar&#39;)\r\n    }\r\n\r\nAs you can see, android:exported is already in it. But there&#39;s an error in &quot;Merged Manifest&quot;. Please help me.\r\n","title":"Android Studio Error Manifest merger failed : Apps targeting Android 12 exported already exists","body":"<p>I'm not good at English, so I use a translator. I'm sorry.</p>\n<p>I'm working on a project to control drones on mobile, and I'm going to find a module called dronekit and use it, but when I apply it, the same error appears.</p>\n<p><code>Manifest merger failed : android:exported needs to be explicitly specified for &lt;service&gt;. Apps targeting Android 12 and higher are required to specify an explicit value for </code>android:exported<code> when the corresponding component has an intent filter defined</code></p>\n<p>my manifest:</p>\n<pre><code>    &lt;activity\n        android:name=&quot;.MainActivity&quot;\n        android:exported=&quot;true&quot;\n        android:screenOrientation=&quot;landscape&quot;&gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n            &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n        &lt;/intent-filter&gt;\n    &lt;/activity&gt;\n</code></pre>\n<p>my build.gradle(:app):</p>\n<pre><code>android {\n...\ncompileSdk 31\ndefaultConfig {\n    ...\n    minSdk 23\n    targetSdk 31\n    ...\n}\ndependencies {\n...\nimplementation files('../libs/dronekit-android.3.0.2.aar')\n}\n</code></pre>\n<p>As you can see, android:exported is already in it. But there's an error in &quot;Merged Manifest&quot;. Please help me.</p>\n"},{"tags":["java","vaadin","vaadin14","vaadin-grid"],"answers":[{"comments":[{"owner":{"account_id":12280349,"reputation":10212,"user_id":8962195,"display_name":"Tatu Lund"},"score":1,"creation_date":1666934960,"post_id":74225726,"comment_id":131056629,"body_markdown":"The first query should return limit amount of items starting from offset. So there you need to use the limit. The second query returns the total data size based on filtering. There offset and limit are not used. Grid will render scroll bar using the data size.","body":"The first query should return limit amount of items starting from offset. So there you need to use the limit. The second query returns the total data size based on filtering. There offset and limit are not used. Grid will render scroll bar using the data size."},{"owner":{"account_id":1956083,"reputation":4432,"user_id":1759063,"accept_rate":53,"display_name":"Eljah"},"score":0,"creation_date":1666953131,"post_id":74225726,"comment_id":131061661,"body_markdown":"@TatuLund can I customize grid to accept less values for data query, than it was brought by counter? Filtering between the datasource that accepts limit and offset doesn&#39;t gives me a chance to return the same number of values as query limit, since I can provide the overall counter, but not exactly how much data would be on each page, i.e. actual limits per page after my filtering of initial datasource page turn out to be a rather random","body":"@TatuLund can I customize grid to accept less values for data query, than it was brought by counter? Filtering between the datasource that accepts limit and offset doesn&#39;t gives me a chance to return the same number of values as query limit, since I can provide the overall counter, but not exactly how much data would be on each page, i.e. actual limits per page after my filtering of initial datasource page turn out to be a rather random"}],"tags":[],"owner":{"account_id":1956083,"reputation":4432,"user_id":1759063,"accept_rate":53,"display_name":"Eljah"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1666890060,"creation_date":1666890060,"answer_id":74225726,"question_id":74225725,"body_markdown":"1) First my mistake was passing limit and offset params to the counter query. However, all that was passed haven&#39;t broke the counting results.\r\n\r\n2) The main mistake was to associate the grid&#39;s limit and offset with DB limit and offset, if then the list of items it was filtered out and no longer the same length as it was given to the counter query. So, I can&#39;t no longer use offset and limit there, as it isn&#39;t known how much data would be filtered out. So I had to give them all and that potentially wrong on large data grids\r\n\r\n \r\n\r\n        DataProvider&lt;WebLogFileRow, WebLogFileFilter&gt; dataProvider = DataProvider.fromFilteringCallbacks(\r\n                    query -&gt; {\r\n                        int offset = query.getOffset();\r\n                        int limit = query.getLimit();\r\n                        return webLogFileService.getLogFileRows(query.getFilter().get(), null, null).stream();\r\n                    },\r\n                    query -&gt; {\r\n                        int offset = query.getOffset();\r\n                        int limit = query.getLimit();\r\n                        return  webLogFileService.getLogFileRowsCount(query.getFilter().get(), null, null);\r\n                    }\r\n            );","title":"Vaadin&#39;s DataProvider.fromFilteringCallbacks hangs forever in loop, how to make it being complete?","body":"<ol>\n<li><p>First my mistake was passing limit and offset params to the counter query. However, all that was passed haven't broke the counting results.</p>\n</li>\n<li><p>The main mistake was to associate the grid's limit and offset with DB limit and offset, if then the list of items it was filtered out and no longer the same length as it was given to the counter query. So, I can't no longer use offset and limit there, as it isn't known how much data would be filtered out. So I had to give them all and that potentially wrong on large data grids</p>\n<pre><code> DataProvider&lt;WebLogFileRow, WebLogFileFilter&gt; dataProvider = DataProvider.fromFilteringCallbacks(\n             query -&gt; {\n                 int offset = query.getOffset();\n                 int limit = query.getLimit();\n                 return webLogFileService.getLogFileRows(query.getFilter().get(), null, null).stream();\n             },\n             query -&gt; {\n                 int offset = query.getOffset();\n                 int limit = query.getLimit();\n                 return  webLogFileService.getLogFileRowsCount(query.getFilter().get(), null, null);\n             }\n     );\n</code></pre>\n</li>\n</ol>\n"}],"owner":{"account_id":1956083,"reputation":4432,"user_id":1759063,"accept_rate":53,"display_name":"Eljah"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":142,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74225726,"answer_count":1,"score":0,"last_activity_date":1666890060,"creation_date":1666890060,"question_id":74225725,"body_markdown":"I have the below dataProvider\r\n\r\n     DataProvider&lt;WebLogFileRow, WebLogFileFilter&gt; dataProvider = DataProvider.fromFilteringCallbacks(\r\n                    query -&gt; {\r\n                        int offset = query.getOffset();\r\n                        int limit = query.getLimit();\r\n                        return webLogFileService.getLogFileRows(query.getFilter().get(), offset, limit).stream();\r\n                    },\r\n                    query -&gt; {\r\n                        int offset = query.getOffset();\r\n                        int limit = query.getLimit();\r\n                        return  webLogFileService.getLogFileRowsCount(query.getFilter().get(), offset, limit);\r\n                    }\r\n            );\r\n\r\nand the methods in fact call inside of them \r\n\r\n1) data repository with offset and limit values passed \r\n\r\n2) filter the results based on some conditions, so in fact not the whole set comes to grid output. \r\n\r\n\r\nSo, hanging happens when the counter query defines that the only 1 row should be present, then it puts limit 1 to data query and retrieves only one row, at step 1 only one piece of data is taken from the DB and at step 2 it is filtered out, so the total number of rows becomes 0. Instead of throwing some exception for me, the `DataProvider` starts the eternal loop. Is there a way to throw the exception when the data query&#39;s limit doesn&#39;t fit the expected value, instead of trying more and more?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/85Erh.png","title":"Vaadin&#39;s DataProvider.fromFilteringCallbacks hangs forever in loop, how to make it being complete?","body":"<p>I have the below dataProvider</p>\n<pre><code> DataProvider&lt;WebLogFileRow, WebLogFileFilter&gt; dataProvider = DataProvider.fromFilteringCallbacks(\n                query -&gt; {\n                    int offset = query.getOffset();\n                    int limit = query.getLimit();\n                    return webLogFileService.getLogFileRows(query.getFilter().get(), offset, limit).stream();\n                },\n                query -&gt; {\n                    int offset = query.getOffset();\n                    int limit = query.getLimit();\n                    return  webLogFileService.getLogFileRowsCount(query.getFilter().get(), offset, limit);\n                }\n        );\n</code></pre>\n<p>and the methods in fact call inside of them</p>\n<ol>\n<li><p>data repository with offset and limit values passed</p>\n</li>\n<li><p>filter the results based on some conditions, so in fact not the whole set comes to grid output.</p>\n</li>\n</ol>\n<p>So, hanging happens when the counter query defines that the only 1 row should be present, then it puts limit 1 to data query and retrieves only one row, at step 1 only one piece of data is taken from the DB and at step 2 it is filtered out, so the total number of rows becomes 0. Instead of throwing some exception for me, the <code>DataProvider</code> starts the eternal loop. Is there a way to throw the exception when the data query's limit doesn't fit the expected value, instead of trying more and more?</p>\n<p><a href=\"https://i.stack.imgur.com/85Erh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/85Erh.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","collections","synchronized"],"answers":[{"tags":[],"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":true,"score":2,"last_activity_date":1666889942,"creation_date":1451635311,"answer_id":34554529,"question_id":34554428,"body_markdown":"&gt; What&#39;s wrong with that?\r\n\r\nI&#39;ll quote the documentation from the `Collections` class:\r\n\r\nhttps://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#synchronizedCollection-java.util.Collection-\r\n\r\n&gt; Returns a synchronized (thread-safe) collection backed by the specified collection. In order to guarantee serial access, it is critical that all access to the backing collection is accomplished through the returned collection.\r\n\r\nSo the documentation tells you to **NOT** retain a reference to the original list and modify it.  You have to go through the returned collection or it doesn&#39;t work.\r\n\r\nI don&#39;t think there&#39;s any way of enforcing ownership in Java programmatically.  Auto-pointers can&#39;t exist (or at least they aren&#39;t implemented, so no APIs use them).  You just have to read the docs and write correct code.","title":"Understanding object ownership in Java","body":"<blockquote>\n<p>What's wrong with that?</p>\n</blockquote>\n<p>I'll quote the documentation from the <code>Collections</code> class:</p>\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#synchronizedCollection-java.util.Collection-\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#synchronizedCollection-java.util.Collection-</a></p>\n<blockquote>\n<p>Returns a synchronized (thread-safe) collection backed by the specified collection. In order to guarantee serial access, it is critical that all access to the backing collection is accomplished through the returned collection.</p>\n</blockquote>\n<p>So the documentation tells you to <strong>NOT</strong> retain a reference to the original list and modify it.  You have to go through the returned collection or it doesn't work.</p>\n<p>I don't think there's any way of enforcing ownership in Java programmatically.  Auto-pointers can't exist (or at least they aren't implemented, so no APIs use them).  You just have to read the docs and write correct code.</p>\n"}],"owner":{"account_id":3313246,"reputation":26489,"user_id":2786156,"accept_rate":76,"display_name":"St.Antario"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1404,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":34554529,"answer_count":1,"score":3,"last_activity_date":1666889942,"creation_date":1451633857,"question_id":34554428,"body_markdown":"I&#39;m reading Brian Goetz&#39;s *Java Concurrency in Practice* and have a question about the so-called object ownership concept. Here&#39;s what he stated:\r\n\r\n&gt; A class usually does not own the objects passed to its methods or\r\n&gt; constructors, unless the method is designed to explicitly transfer\r\n&gt; ownership of objects passed in (such as the synchronized collection\r\n&gt; wrapper factory methods).\r\n\r\n[Collections.synchronizedCollection(Collection) source][1] is:\r\n\r\n    public static &lt;T&gt; Collection&lt;T&gt; More ...synchronizedCollection(Collection&lt;T&gt; c) {\r\n        return new SynchronizedCollection&lt;T&gt;(c);\r\n    }\r\n\r\nwhere [SynchornizedCollection][2]&#39;s constructor is:\r\n\r\n    SynchronizedCollection(Collection&lt;E&gt; c) {\r\n        if (c==null)\r\n            throw new NullPointerException();\r\n        this.c = c;\r\n        mutex = this;\r\n    }\r\n\r\nSo, if we call this method as follows:\r\n\r\n    List&lt;Date&gt; lst;\r\n    //initialize the list\r\n    Collection&lt;Date&gt; synchedLst = Collections.syncrhonizedCollection(lst);\r\n    //modify lst&#39;s content\r\n\r\nwe could modify the list&#39;s content later, so I&#39;d say the synchronized wrappers have shared ownership.\r\n\r\nWhat&#39;s wrong with that?\r\n\r\n  [1]: http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/Collections.java#Collections.synchronizedCollection%28java.util.Collection%29\r\n  [2]: http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/Collections.java#Collections.SynchronizedCollection\r\n","title":"Understanding object ownership in Java","body":"<p>I'm reading Brian Goetz's <em>Java Concurrency in Practice</em> and have a question about the so-called object ownership concept. Here's what he stated:</p>\n\n<blockquote>\n  <p>A class usually does not own the objects passed to its methods or\n  constructors, unless the method is designed to explicitly transfer\n  ownership of objects passed in (such as the synchronized collection\n  wrapper factory methods).</p>\n</blockquote>\n\n<p><a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/Collections.java#Collections.synchronizedCollection%28java.util.Collection%29\" rel=\"nofollow noreferrer\">Collections.synchronizedCollection(Collection) source</a> is:</p>\n\n<pre><code>public static &lt;T&gt; Collection&lt;T&gt; More ...synchronizedCollection(Collection&lt;T&gt; c) {\n    return new SynchronizedCollection&lt;T&gt;(c);\n}\n</code></pre>\n\n<p>where <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/Collections.java#Collections.SynchronizedCollection\" rel=\"nofollow noreferrer\">SynchornizedCollection</a>'s constructor is:</p>\n\n<pre><code>SynchronizedCollection(Collection&lt;E&gt; c) {\n    if (c==null)\n        throw new NullPointerException();\n    this.c = c;\n    mutex = this;\n}\n</code></pre>\n\n<p>So, if we call this method as follows:</p>\n\n<pre><code>List&lt;Date&gt; lst;\n//initialize the list\nCollection&lt;Date&gt; synchedLst = Collections.syncrhonizedCollection(lst);\n//modify lst's content\n</code></pre>\n\n<p>we could modify the list's content later, so I'd say the synchronized wrappers have shared ownership.</p>\n\n<p>What's wrong with that?</p>\n"},{"tags":["java","maven","jenkins","sonarqube"],"answers":[{"comments":[{"owner":{"account_id":20669887,"reputation":137,"user_id":15175890,"display_name":"Compte Gmail"},"score":0,"creation_date":1666697585,"post_id":74187512,"comment_id":130993807,"body_markdown":"Hi this caused me an error in my pipeline. I got the Connection Failed exception. So I opened Camp (my local host) and I still get that error. But based on the console output, it really considers it as a test class but I believe it is being considered as Junit and not Mockito which is why it was asking me to open the database. I&#39;ll try to add a plugin like the solution above stated.","body":"Hi this caused me an error in my pipeline. I got the Connection Failed exception. So I opened Camp (my local host) and I still get that error. But based on the console output, it really considers it as a test class but I believe it is being considered as Junit and not Mockito which is why it was asking me to open the database. I&#39;ll try to add a plugin like the solution above stated."},{"owner":{"account_id":20669887,"reputation":137,"user_id":15175890,"display_name":"Compte Gmail"},"score":0,"creation_date":1666700201,"post_id":74187512,"comment_id":130994686,"body_markdown":"So I tried to add the Jacoco plugin and it&#39;s also not working (Just updated my code in the question so you could have a look)","body":"So I tried to add the Jacoco plugin and it&#39;s also not working (Just updated my code in the question so you could have a look)"}],"tags":[],"owner":{"account_id":16971536,"reputation":301,"user_id":12276050,"display_name":"fneira"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1666651293,"creation_date":1666651293,"answer_id":74187512,"question_id":74187422,"body_markdown":"I think it&#39;s because of the name of the test class:\r\n\r\nBy default Maven uses the following naming conventions when looking for tests to run:\r\n\r\n - Test*\r\n - *Test\r\n - *Tests (has been added in Maven Surefire Plugin 2.20)\r\n - *TestCase\r\n\r\nextracted from: https://stackoverflow.com/questions/6178583/maven-does-not-find-junit-tests-to-run/6178629#6178629","title":"Code Coverage is 0% in Sonarqube for Mockito tests","body":"<p>I think it's because of the name of the test class:</p>\n<p>By default Maven uses the following naming conventions when looking for tests to run:</p>\n<ul>\n<li>Test*</li>\n<li>*Test</li>\n<li>*Tests (has been added in Maven Surefire Plugin 2.20)</li>\n<li>*TestCase</li>\n</ul>\n<p>extracted from: <a href=\"https://stackoverflow.com/questions/6178583/maven-does-not-find-junit-tests-to-run/6178629#6178629\">Maven does not find JUnit tests to run</a></p>\n"},{"comments":[{"owner":{"account_id":20669887,"reputation":137,"user_id":15175890,"display_name":"Compte Gmail"},"score":0,"creation_date":1666699816,"post_id":74187730,"comment_id":130994550,"body_markdown":"Hi again , I did what you asked me and it doesn&#39;t seem to work. I edited my question where I just added the plugin so you could have a look. I honestly don&#39;t know what version I should use for JaCoCo","body":"Hi again , I did what you asked me and it doesn&#39;t seem to work. I edited my question where I just added the plugin so you could have a look. I honestly don&#39;t know what version I should use for JaCoCo"},{"owner":{"account_id":13181158,"reputation":420,"user_id":9520479,"display_name":"Jhilton"},"score":1,"creation_date":1666858900,"post_id":74187730,"comment_id":131036314,"body_markdown":"@CompteGmail I have updated the answer, let me know if you still have some issues. Again, Im not completely sure your tests are being picked up at all, does the test goal tells you how many tests were executed ?","body":"@CompteGmail I have updated the answer, let me know if you still have some issues. Again, Im not completely sure your tests are being picked up at all, does the test goal tells you how many tests were executed ?"},{"owner":{"account_id":20669887,"reputation":137,"user_id":15175890,"display_name":"Compte Gmail"},"score":0,"creation_date":1666889747,"post_id":74187730,"comment_id":131047522,"body_markdown":"Hey @Jhilton I just tried what you told me. I tried different methods of plugin of Sonar and still not working. I updated my answer and pom.xml. The exception that i&#39;m getting is that he&#39;s still not reading my tests and forcing me to have database connection","body":"Hey @Jhilton I just tried what you told me. I tried different methods of plugin of Sonar and still not working. I updated my answer and pom.xml. The exception that i&#39;m getting is that he&#39;s still not reading my tests and forcing me to have database connection"},{"owner":{"account_id":13181158,"reputation":420,"user_id":9520479,"display_name":"Jhilton"},"score":0,"creation_date":1666913126,"post_id":74187730,"comment_id":131053702,"body_markdown":"@CompteGmail looks like the issue is not longer your sonar setup but your tests, all 11 tests are failing, I am guessing before any code in `/src/main/java` gets executed, therefore the 0% coverage. So instead, it would be better to get a look into the Unit Test class. Do you use Spring test framework, or do you test the class as a Plain Class? maybe create a simple &quot;sure fire&quot; class with a method that return true and a unit test for it. that should give you coverage for that single class","body":"@CompteGmail looks like the issue is not longer your sonar setup but your tests, all 11 tests are failing, I am guessing before any code in <code>&#47;src&#47;main&#47;java</code> gets executed, therefore the 0% coverage. So instead, it would be better to get a look into the Unit Test class. Do you use Spring test framework, or do you test the class as a Plain Class? maybe create a simple &quot;sure fire&quot; class with a method that return true and a unit test for it. that should give you coverage for that single class"}],"tags":[],"owner":{"account_id":13181158,"reputation":420,"user_id":9520479,"display_name":"Jhilton"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1666858729,"creation_date":1666653770,"answer_id":74187730,"question_id":74187422,"body_markdown":"I see 2 things:\r\n1. For code coverage reports you need an additional maven plugin, usually JaCoCo\r\nhttps://www.eclemma.org/jacoco/trunk/doc/maven.html\r\n2. Conventions\r\nHaving the 2 folders is OK, and it is usually done like this, however the default naming convention is `src/main/java/` for your application sources and `src/main/test/` for test related sources.\r\nUsage of the `{artifact-id}` is more of a good practice (thumbs up) than part of the convention, so I&#39;m glad you do it\r\n\r\nI would question if `mvn test` can pick up your tests at all (issue #2) and once you confirm this, then try to setup the JaCoCo plugin \r\n\r\n-- Update 2022-10-27\r\nFor JaCoCo setting you can setup the plugin as\r\n```xml\r\n    &lt;plugin&gt;\r\n        &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;0.8.7&lt;/version&gt;\r\n        &lt;executions&gt;\r\n          &lt;execution&gt;\r\n            &lt;goals&gt;\r\n              &lt;goal&gt;prepare-agent&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n          &lt;/execution&gt;\r\n          &lt;execution&gt;\r\n            &lt;id&gt;report&lt;/id&gt;\r\n            &lt;phase&gt;test&lt;/phase&gt;\r\n            &lt;goals&gt;\r\n              &lt;goal&gt;report&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n          &lt;/execution&gt;\r\n        &lt;/executions&gt;\r\n      &lt;/plugin&gt;\r\n```\r\nThis will make it so when you run the `test` mvn goal the reports will be generated under `${buildDir}/site/jacoco`\r\n\r\nAs for linking it to sonar you can set he following property in your `sh` script `-Dsonar.jacoco.reportPath=${project.basedir}/../target/site/jacoco/jacoco.xml`\r\n\r\nHere, I am assuming your sonar instance is somewhat upgraded and prefers the XML JaCoCo report over the old binage `.exec` file :)","title":"Code Coverage is 0% in Sonarqube for Mockito tests","body":"<p>I see 2 things:</p>\n<ol>\n<li>For code coverage reports you need an additional maven plugin, usually JaCoCo\n<a href=\"https://www.eclemma.org/jacoco/trunk/doc/maven.html\" rel=\"nofollow noreferrer\">https://www.eclemma.org/jacoco/trunk/doc/maven.html</a></li>\n<li>Conventions\nHaving the 2 folders is OK, and it is usually done like this, however the default naming convention is <code>src/main/java/</code> for your application sources and <code>src/main/test/</code> for test related sources.\nUsage of the <code>{artifact-id}</code> is more of a good practice (thumbs up) than part of the convention, so I'm glad you do it</li>\n</ol>\n<p>I would question if <code>mvn test</code> can pick up your tests at all (issue #2) and once you confirm this, then try to setup the JaCoCo plugin</p>\n<p>-- Update 2022-10-27\nFor JaCoCo setting you can setup the plugin as</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;plugin&gt;\n        &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\n        &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\n        &lt;version&gt;0.8.7&lt;/version&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;prepare-agent&lt;/goal&gt;\n            &lt;/goals&gt;\n          &lt;/execution&gt;\n          &lt;execution&gt;\n            &lt;id&gt;report&lt;/id&gt;\n            &lt;phase&gt;test&lt;/phase&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;report&lt;/goal&gt;\n            &lt;/goals&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n      &lt;/plugin&gt;\n</code></pre>\n<p>This will make it so when you run the <code>test</code> mvn goal the reports will be generated under <code>${buildDir}/site/jacoco</code></p>\n<p>As for linking it to sonar you can set he following property in your <code>sh</code> script <code>-Dsonar.jacoco.reportPath=${project.basedir}/../target/site/jacoco/jacoco.xml</code></p>\n<p>Here, I am assuming your sonar instance is somewhat upgraded and prefers the XML JaCoCo report over the old binage <code>.exec</code> file :)</p>\n"}],"owner":{"account_id":20669887,"reputation":137,"user_id":15175890,"display_name":"Compte Gmail"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3819,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1666889672,"creation_date":1666650395,"question_id":74187422,"body_markdown":"I developed some Mockito tests using Jenkins pipeline and will see the report through SonarQube. \r\n\r\nSo far this is what I typed in the Jenkins script:\r\n```\r\nsh &#39;  mvn sonar:sonar -Dsonar.sources=src/main/java -Dsonar.css.node=. \r\n-Dsonar.java.binaries=. -Dsonar.host.url=http://192.168.2.2:9000/ \r\n-Dsonar.login=admin   -Dsonar.password=sonar -Dsonar.jacoco.reportPath=build/reports/jacoco.xml&#39;\r\n```\r\n\r\nI&#39;ve also added this command to the stage before creating the artifact to clean the project (so it ignores at first tests so it doesn&#39;t generate the exception for ConnectionNeeded)\r\n\r\n```\r\n sh &#39;mvn package -Dmaven.test.skip=true -P test-coverage&#39;\r\n```\r\n[![enter image description here][1]][1]\r\n\r\nI get an exception and the final stage (I believe this is because I don&#39;t have a database on my Centos machine) \r\n[![enter image description here][2]][2]\r\n\r\n```\r\n[ERROR] Tests run: 11, Failures: 0, Errors: 11, Skipped: 0\r\n```\r\n\r\n and the Coverage percentage on SonarQube is still 0% and the number of lines is not changing after adding my tests. \r\n\r\n[![enter image description here][3]][3]\r\n\r\n```\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.5.3&lt;/version&gt;\r\n    \t\t&lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\r\n    \t&lt;/parent&gt;\r\n    \t&lt;groupId&gt;uk.un.ts&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;proj&lt;/artifactId&gt;\r\n    \t&lt;version&gt;1.0&lt;/version&gt;\r\n    \t&lt;name&gt;achat&lt;/name&gt;\r\n    \t&lt;description&gt;Projet pour le module DevOps&lt;/description&gt;\r\n    \t&lt;properties&gt;\r\n    \t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n    \t\t&lt;maven-jar-plugin.version&gt;3.1.0&lt;/maven-jar-plugin.version&gt;\r\n    \t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    \t\t &lt;jacoco.version&gt;0.8.6&lt;/jacoco.version&gt;\r\n        &lt;sonar.java.coveragePlugin&gt;jacoco&lt;/sonar.java.coveragePlugin&gt;\r\n        &lt;sonar.dynamicAnalysis&gt;reuseReports&lt;/sonar.dynamicAnalysis&gt;\r\n        &lt;sonar.jacoco.reportPath&gt;${project.basedir}/../target/jacoco.exec&lt;/sonar.jacoco.reportPath&gt;\r\n        &lt;sonar.language&gt;java&lt;/sonar.language&gt;\r\n    \t&lt;/properties&gt;\r\n    \r\n    \t&lt;distributionManagement&gt;\r\n    \t\t&lt;snapshotRepository&gt;\r\n    \t\t\t&lt;id&gt;nexus-snapshots&lt;/id&gt;\r\n    \t\t\t&lt;url&gt;http://192.168.2.2:8081/repository/maven-snapshots/&lt;/url&gt;\r\n    \t\t&lt;/snapshotRepository&gt;\r\n    \t\t&lt;repository&gt;\r\n    \t\t\t&lt;id&gt;nexus-releases&lt;/id&gt;\r\n    \t\t\t&lt;url&gt;http://192.168.2.2:8081/repository/maven-releases/ &lt;/url&gt;\r\n    \t\t&lt;/repository&gt;\r\n    \r\n    \r\n    \t&lt;/distributionManagement&gt;\r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n    \t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;springfox-boot-starter&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;3.0.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;3.0.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;5.9.1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.jacoco&lt;/groupId&gt; \r\n        &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;0.8.6&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    &lt;plugin&gt;\r\n        &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;${jacoco.version}&lt;/version&gt;\r\n        &lt;executions&gt;\r\n            &lt;execution&gt;\r\n                &lt;id&gt;jacoco-initialize&lt;/id&gt;\r\n                &lt;goals&gt;\r\n                    &lt;goal&gt;prepare-agent&lt;/goal&gt;\r\n                &lt;/goals&gt;\r\n            &lt;/execution&gt;\r\n            &lt;execution&gt;\r\n                &lt;id&gt;jacoco-site&lt;/id&gt;\r\n                &lt;phase&gt;package&lt;/phase&gt;\r\n                &lt;goals&gt;\r\n                    &lt;goal&gt;report&lt;/goal&gt;\r\n                &lt;/goals&gt;\r\n            &lt;/execution&gt;\r\n        &lt;/executions&gt;\r\n    &lt;/plugin&gt;\r\n    \r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;${maven-deploy-plugin.version}&lt;/version&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;skip&gt;true&lt;/skip&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.sonatype.plugins&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;nexus-staging-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;executions&gt;\r\n    \t\t\t\t\t&lt;execution&gt;\r\n    \t\t\t\t\t\t&lt;id&gt;default-deploy&lt;/id&gt;\r\n    \t\t\t\t\t\t&lt;phase&gt;deploy&lt;/phase&gt;\r\n    \t\t\t\t\t\t&lt;goals&gt;\r\n    \t\t\t\t\t\t\t&lt;goal&gt;deploy&lt;/goal&gt;\r\n    \t\t\t\t\t\t&lt;/goals&gt;\r\n    \t\t\t\t\t&lt;/execution&gt;\r\n    \t\t\t\t&lt;/executions&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;serverId&gt;nexus&lt;/serverId&gt;\r\n    \t\t\t\t\t&lt;nexusUrl&gt;http://192.168.2.2:8081/&lt;/nexusUrl&gt;\r\n    \t\t\t\t\t&lt;skipStaging&gt;true&lt;/skipStaging&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;3.1.0&lt;/version&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;excludes&gt;\r\n    \t\t\t\t\t\t&lt;exclude&gt;\r\n    \t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n    \t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n    \t\t\t\t\t\t&lt;/exclude&gt;\r\n    \t\t\t\t\t&lt;/excludes&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/iS7hR.png\r\n  [2]: https://i.stack.imgur.com/2J8BQ.png\r\n  [3]: https://i.stack.imgur.com/A0GDE.png","title":"Code Coverage is 0% in Sonarqube for Mockito tests","body":"<p>I developed some Mockito tests using Jenkins pipeline and will see the report through SonarQube.</p>\n<p>So far this is what I typed in the Jenkins script:</p>\n<pre><code>sh '  mvn sonar:sonar -Dsonar.sources=src/main/java -Dsonar.css.node=. \n-Dsonar.java.binaries=. -Dsonar.host.url=http://192.168.2.2:9000/ \n-Dsonar.login=admin   -Dsonar.password=sonar -Dsonar.jacoco.reportPath=build/reports/jacoco.xml'\n</code></pre>\n<p>I've also added this command to the stage before creating the artifact to clean the project (so it ignores at first tests so it doesn't generate the exception for ConnectionNeeded)</p>\n<pre><code> sh 'mvn package -Dmaven.test.skip=true -P test-coverage'\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/iS7hR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iS7hR.png\" alt=\"enter image description here\" /></a></p>\n<p>I get an exception and the final stage (I believe this is because I don't have a database on my Centos machine)\n<a href=\"https://i.stack.imgur.com/2J8BQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2J8BQ.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>[ERROR] Tests run: 11, Failures: 0, Errors: 11, Skipped: 0\n</code></pre>\n<p>and the Coverage percentage on SonarQube is still 0% and the number of lines is not changing after adding my tests.</p>\n<p><a href=\"https://i.stack.imgur.com/A0GDE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/A0GDE.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n        xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n        &lt;parent&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n            &lt;version&gt;2.5.3&lt;/version&gt;\n            &lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\n        &lt;/parent&gt;\n        &lt;groupId&gt;uk.un.ts&lt;/groupId&gt;\n        &lt;artifactId&gt;proj&lt;/artifactId&gt;\n        &lt;version&gt;1.0&lt;/version&gt;\n        &lt;name&gt;achat&lt;/name&gt;\n        &lt;description&gt;Projet pour le module DevOps&lt;/description&gt;\n        &lt;properties&gt;\n            &lt;java.version&gt;1.8&lt;/java.version&gt;\n            &lt;maven-jar-plugin.version&gt;3.1.0&lt;/maven-jar-plugin.version&gt;\n            &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n             &lt;jacoco.version&gt;0.8.6&lt;/jacoco.version&gt;\n        &lt;sonar.java.coveragePlugin&gt;jacoco&lt;/sonar.java.coveragePlugin&gt;\n        &lt;sonar.dynamicAnalysis&gt;reuseReports&lt;/sonar.dynamicAnalysis&gt;\n        &lt;sonar.jacoco.reportPath&gt;${project.basedir}/../target/jacoco.exec&lt;/sonar.jacoco.reportPath&gt;\n        &lt;sonar.language&gt;java&lt;/sonar.language&gt;\n        &lt;/properties&gt;\n    \n        &lt;distributionManagement&gt;\n            &lt;snapshotRepository&gt;\n                &lt;id&gt;nexus-snapshots&lt;/id&gt;\n                &lt;url&gt;http://192.168.2.2:8081/repository/maven-snapshots/&lt;/url&gt;\n            &lt;/snapshotRepository&gt;\n            &lt;repository&gt;\n                &lt;id&gt;nexus-releases&lt;/id&gt;\n                &lt;url&gt;http://192.168.2.2:8081/repository/maven-releases/ &lt;/url&gt;\n            &lt;/repository&gt;\n    \n    \n        &lt;/distributionManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n            &lt;/dependency&gt;\n    \n            &lt;dependency&gt;\n                &lt;groupId&gt;mysql&lt;/groupId&gt;\n                &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n                &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                &lt;optional&gt;true&lt;/optional&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n                &lt;scope&gt;test&lt;/scope&gt;\n            &lt;/dependency&gt;\n    \n            &lt;dependency&gt;\n                &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n                &lt;artifactId&gt;springfox-boot-starter&lt;/artifactId&gt;\n                &lt;version&gt;3.0.0&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n                &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;\n                &lt;version&gt;3.0.0&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n                &lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;\n                &lt;version&gt;5.9.1&lt;/version&gt;\n            &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.jacoco&lt;/groupId&gt; \n        &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\n        &lt;version&gt;0.8.6&lt;/version&gt;\n    &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n        &lt;build&gt;\n            &lt;plugins&gt;\n    &lt;plugin&gt;\n        &lt;groupId&gt;org.jacoco&lt;/groupId&gt;\n        &lt;artifactId&gt;jacoco-maven-plugin&lt;/artifactId&gt;\n        &lt;version&gt;${jacoco.version}&lt;/version&gt;\n        &lt;executions&gt;\n            &lt;execution&gt;\n                &lt;id&gt;jacoco-initialize&lt;/id&gt;\n                &lt;goals&gt;\n                    &lt;goal&gt;prepare-agent&lt;/goal&gt;\n                &lt;/goals&gt;\n            &lt;/execution&gt;\n            &lt;execution&gt;\n                &lt;id&gt;jacoco-site&lt;/id&gt;\n                &lt;phase&gt;package&lt;/phase&gt;\n                &lt;goals&gt;\n                    &lt;goal&gt;report&lt;/goal&gt;\n                &lt;/goals&gt;\n            &lt;/execution&gt;\n        &lt;/executions&gt;\n    &lt;/plugin&gt;\n    \n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                    &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;${maven-deploy-plugin.version}&lt;/version&gt;\n                    &lt;configuration&gt;\n                        &lt;skip&gt;true&lt;/skip&gt;\n                    &lt;/configuration&gt;\n                &lt;/plugin&gt;\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.sonatype.plugins&lt;/groupId&gt;\n                    &lt;artifactId&gt;nexus-staging-maven-plugin&lt;/artifactId&gt;\n                    &lt;executions&gt;\n                        &lt;execution&gt;\n                            &lt;id&gt;default-deploy&lt;/id&gt;\n                            &lt;phase&gt;deploy&lt;/phase&gt;\n                            &lt;goals&gt;\n                                &lt;goal&gt;deploy&lt;/goal&gt;\n                            &lt;/goals&gt;\n                        &lt;/execution&gt;\n                    &lt;/executions&gt;\n                    &lt;configuration&gt;\n                        &lt;serverId&gt;nexus&lt;/serverId&gt;\n                        &lt;nexusUrl&gt;http://192.168.2.2:8081/&lt;/nexusUrl&gt;\n                        &lt;skipStaging&gt;true&lt;/skipStaging&gt;\n                    &lt;/configuration&gt;\n                &lt;/plugin&gt;\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                    &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;3.1.0&lt;/version&gt;\n                &lt;/plugin&gt;\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                    &lt;configuration&gt;\n                        &lt;excludes&gt;\n                            &lt;exclude&gt;\n                                &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                                &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                            &lt;/exclude&gt;\n                        &lt;/excludes&gt;\n                    &lt;/configuration&gt;\n                &lt;/plugin&gt;\n            &lt;/plugins&gt;\n        &lt;/build&gt;\n    \n    &lt;/project&gt;\n\n</code></pre>\n"},{"tags":["java","spring","api","spring-boot","exception"],"comments":[{"owner":{"account_id":13798611,"reputation":37885,"user_id":9959152,"display_name":"Ryuzaki L"},"score":0,"creation_date":1570553428,"post_id":58290710,"comment_id":102945859,"body_markdown":"are you getting `404` error code? and can you try with only one parameter `handleUserNotFoundException(RecordNotFoundException ex)`","body":"are you getting <code>404</code> error code? and can you try with only one parameter <code>handleUserNotFoundException(RecordNotFoundException ex)</code>"},{"owner":{"account_id":11351835,"reputation":244,"user_id":8322533,"display_name":"J. Doe"},"score":0,"creation_date":1570553741,"post_id":58290710,"comment_id":102946004,"body_markdown":"@Deadpool before i made the exception package, i got 500 error code with &quot;java.lang.NullPointerException&quot; in the message, after i made the package I just get {} and yes I tried your suggestion but its still giving me {}","body":"@Deadpool before i made the exception package, i got 500 error code with &quot;java.lang.NullPointerException&quot; in the message, after i made the package I just get {} and yes I tried your suggestion but its still giving me {}"},{"owner":{"account_id":13798611,"reputation":37885,"user_id":9959152,"display_name":"Ryuzaki L"},"score":0,"creation_date":1570553835,"post_id":58290710,"comment_id":102946049,"body_markdown":"You already have that methos right in the exception class, just remove the second argument @J.Doe","body":"You already have that methos right in the exception class, just remove the second argument @J.Doe"},{"owner":{"account_id":11351835,"reputation":244,"user_id":8322533,"display_name":"J. Doe"},"score":0,"creation_date":1570553951,"post_id":58290710,"comment_id":102946104,"body_markdown":"sorry i dont understand, which second argument are you talking about? the one in studycontroller?","body":"sorry i dont understand, which second argument are you talking about? the one in studycontroller?"},{"owner":{"account_id":13798611,"reputation":37885,"user_id":9959152,"display_name":"Ryuzaki L"},"score":0,"creation_date":1570555400,"post_id":58290710,"comment_id":102946756,"body_markdown":"change this `public final ResponseEntity&lt;Object&gt; handleUserNotFoundException(RecordNotFoundException ex, WebRequest request)` to this `public final ResponseEntity&lt;Object&gt; handleUserNotFoundException(RecordNotFoundException ex)` and try","body":"change this <code>public final ResponseEntity&lt;Object&gt; handleUserNotFoundException(RecordNotFoundException ex, WebRequest request)</code> to this <code>public final ResponseEntity&lt;Object&gt; handleUserNotFoundException(RecordNotFoundException ex)</code> and try"},{"owner":{"account_id":11351835,"reputation":244,"user_id":8322533,"display_name":"J. Doe"},"score":0,"creation_date":1570555992,"post_id":58290710,"comment_id":102947017,"body_markdown":"@Deadpool still doesnt work","body":"@Deadpool still doesnt work"},{"owner":{"account_id":13798611,"reputation":37885,"user_id":9959152,"display_name":"Ryuzaki L"},"score":0,"creation_date":1570556123,"post_id":58290710,"comment_id":102947078,"body_markdown":"I can&#39;t debug your code, but i can guide you how to pull out from this, First find out which method in `CustomExceptionHandler` is getting executed when exception is thrown. that solves the problem","body":"I can&#39;t debug your code, but i can guide you how to pull out from this, First find out which method in <code>CustomExceptionHandler</code> is getting executed when exception is thrown. that solves the problem"},{"owner":{"account_id":11351835,"reputation":244,"user_id":8322533,"display_name":"J. Doe"},"score":0,"creation_date":1570558495,"post_id":58290710,"comment_id":102948119,"body_markdown":"@Deadpool CustomExceptionHandler is using RecordNotFoundException class as an annotation and a parameter in the method handleRecordNotFoundException, but to answer your question, CustomExceptionHandler first executed in StudyController  inside the catch block (RecordNotFoundException)","body":"@Deadpool CustomExceptionHandler is using RecordNotFoundException class as an annotation and a parameter in the method handleRecordNotFoundException, but to answer your question, CustomExceptionHandler first executed in StudyController  inside the catch block (RecordNotFoundException)"}],"answers":[{"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1570599167,"post_id":58296120,"comment_id":102958000,"body_markdown":"This is more suitable for a comment then an answer.","body":"This is more suitable for a comment then an answer."}],"tags":[],"owner":{"account_id":14362680,"reputation":92,"user_id":10374599,"display_name":"Cody huang"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1570586876,"creation_date":1570586876,"answer_id":58296120,"question_id":58290710,"body_markdown":"maybe you should remove @ResponseStatus(HttpStatus.NOT_FOUND) on the exception class.\r\n","title":"Throwing Exception In SpringBoot","body":"<p>maybe you should remove @ResponseStatus(HttpStatus.NOT_FOUND) on the exception class.</p>\n"},{"tags":[],"owner":{"account_id":22853808,"reputation":1,"user_id":16998982,"display_name":"vikas rokana"},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1666889570,"creation_date":1666889528,"answer_id":74225607,"question_id":58290710,"body_markdown":"    package com.vk.common;\r\n    \r\n    import org.springframework.http.HttpStatus;\r\n    import org.springframework.web.bind.annotation.ResponseStatus;\r\n    \r\n    @ResponseStatus(value = HttpStatus.NOT_FOUND)\r\n    public class RecordNotFoundException extends Exception {\r\n    \tprivate static final long serialVersionUID = 1L;\r\n    \r\n    \tpublic RecordNotFoundException(String message) {\r\n    \t\tsuper(message);\r\n    \t}\r\n    \r\n    }","title":"Throwing Exception In SpringBoot","body":"<pre><code>package com.vk.common;\n\nimport org.springframework.http.HttpStatus;\nimport org.springframework.web.bind.annotation.ResponseStatus;\n\n@ResponseStatus(value = HttpStatus.NOT_FOUND)\npublic class RecordNotFoundException extends Exception {\n    private static final long serialVersionUID = 1L;\n\n    public RecordNotFoundException(String message) {\n        super(message);\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":11351835,"reputation":244,"user_id":8322533,"display_name":"J. Doe"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1016,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1666889570,"creation_date":1570553206,"question_id":58290710,"body_markdown":"So I&#39;m trying to throw an exception for a GET request (more requests are coming but for now I&#39;m working on GET). Before I created my error package and the classes in it, I got the usual java null pointer error. But, after I created them, I only got this\r\n\r\n{}\r\n\r\nin the postman when I put the incorrect ID. Here are my classes starting from exception package to the controller\r\n\r\nRecordNotFoundException class\r\n```\r\npackage com.yash.questionnaire.exception;\r\n\r\nimport org.springframework.http.HttpStatus;\r\nimport org.springframework.web.bind.annotation.ResponseStatus;\r\n \r\n@ResponseStatus(HttpStatus.NOT_FOUND)\r\npublic class RecordNotFoundException extends RuntimeException\r\n{\r\n    public RecordNotFoundException(String exception) {\r\n        super(exception);\r\n    }\r\n}\r\n```\r\nErrorResponse class\r\n```\r\npackage com.yash.questionnaire.exception;\r\n\r\nimport java.util.List;\r\nimport javax.xml.bind.annotation.XmlRootElement;\r\n \r\n@XmlRootElement(name = &quot;error&quot;)\r\npublic class ErrorResponse\r\n{\r\n    public ErrorResponse(String message, List&lt;String&gt; details) {\r\n        super();\r\n        this.message = message;\r\n        this.details = details;\r\n    }\r\n \r\n    //General error message about nature of error\r\n    private String message;\r\n \r\n    //Specific errors in API request processing\r\n    private List&lt;String&gt; details;\r\n \r\n    //Getter and setters\r\n}\r\n```\r\nCustomExceptionHandler class\r\n```\r\npackage com.yash.questionnaire.exception;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n \r\nimport org.springframework.http.HttpHeaders;\r\nimport org.springframework.http.HttpStatus;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.validation.ObjectError;\r\nimport org.springframework.web.bind.MethodArgumentNotValidException;\r\nimport org.springframework.web.bind.annotation.ControllerAdvice;\r\nimport org.springframework.web.bind.annotation.ExceptionHandler;\r\nimport org.springframework.web.context.request.WebRequest;\r\nimport org.springframework.web.servlet.mvc.method.annotation.ResponseEntityExceptionHandler;\r\n \r\n@SuppressWarnings({&quot;unchecked&quot;,&quot;rawtypes&quot;})\r\n@ControllerAdvice\r\npublic class CustomExceptionHandler extends ResponseEntityExceptionHandler\r\n{\r\n    @ExceptionHandler(Exception.class)\r\n    public final ResponseEntity&lt;Object&gt; handleAllExceptions(Exception ex, WebRequest request) {\r\n        List&lt;String&gt; details = new ArrayList&lt;&gt;();\r\n        details.add(ex.getLocalizedMessage());\r\n        ErrorResponse error = new ErrorResponse(&quot;Server Error&quot;, details);\r\n        return new ResponseEntity(error, HttpStatus.INTERNAL_SERVER_ERROR);\r\n    }\r\n \r\n    @ExceptionHandler(RecordNotFoundException.class)\r\n    public final ResponseEntity&lt;Object&gt; handleUserNotFoundException(RecordNotFoundException ex, WebRequest request) {\r\n        List&lt;String&gt; details = new ArrayList&lt;&gt;();\r\n        details.add(ex.getLocalizedMessage());\r\n        ErrorResponse error = new ErrorResponse(&quot;Record Not Found&quot;, details);\r\n        return new ResponseEntity(error, HttpStatus.NOT_FOUND);\r\n    }\r\n \r\n    @Override\r\n    protected ResponseEntity&lt;Object&gt; handleMethodArgumentNotValid(MethodArgumentNotValidException ex, HttpHeaders headers, HttpStatus status, WebRequest request) {\r\n        List&lt;String&gt; details = new ArrayList&lt;&gt;();\r\n        for(ObjectError error : ex.getBindingResult().getAllErrors()) {\r\n            details.add(error.getDefaultMessage());\r\n        }\r\n        ErrorResponse error = new ErrorResponse(&quot;Validation Failed&quot;, details);\r\n        return new ResponseEntity(error, HttpStatus.BAD_REQUEST);\r\n    }\r\n}\r\n```\r\nStudyController class\r\n```\r\n\r\npackage com.yash.questionnaire.web;\r\n\r\nimport java.util.List;\r\nimport java.util.Map;\r\n\r\nimport javax.validation.Valid;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.http.HttpStatus;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.validation.BindingResult;\r\nimport org.springframework.web.bind.annotation.CrossOrigin;\r\nimport org.springframework.web.bind.annotation.DeleteMapping;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.PathVariable;\r\nimport org.springframework.web.bind.annotation.PostMapping;\r\nimport org.springframework.web.bind.annotation.PutMapping;\r\nimport org.springframework.web.bind.annotation.RequestBody;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RequestParam;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\nimport com.yash.questionnaire.exception.RecordNotFoundException;\r\nimport com.yash.questionnaire.model.Study;\r\nimport com.yash.questionnaire.repository.MapValidationError;\r\nimport com.yash.questionnaire.repository.StudyRepository;\r\n\r\nimport io.swagger.annotations.Api;\r\nimport io.swagger.annotations.ApiOperation;\r\nimport io.swagger.annotations.ApiParam;\r\n\r\n@RestController\r\n@RequestMapping(&quot;/api&quot;)\r\n@CrossOrigin(origins = &quot;*&quot;)\r\n@Api(value= &quot;DDR&quot;, description=&quot;This API provides the facility to create a new Study&quot;)\r\npublic class StudyController {\r\n\r\n\t@Autowired\r\n\tprivate StudyRepository repository;\r\n\r\n\t@Autowired\r\n\tprivate MapValidationError mapValidationError;    //ToDo: to fetch Json post request\r\n\r\n\t@ApiOperation(value = &quot;Read a study by study-name&quot;)\r\n\t@GetMapping(&quot;/studies/{studyType}&quot;)\r\n\tpublic ResponseEntity&lt;Map&lt;String, Object&gt;&gt; getByStudyType(@ApiParam(value = &quot;Questionnaire StudyType will retrieve&quot;, required = true) @PathVariable(&quot;studyType&quot;) String studyType) {\r\n\t\ttry {\r\n\t\t\treturn new ResponseEntity&lt;&gt;(repository.getByStudyType(studyType), HttpStatus.OK);\r\n\r\n\t\t} catch (RecordNotFoundException ex) {\r\n\t\t\tthrow new RecordNotFoundException(&quot;Invalid studyType : &quot; + studyType);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n```\r\nCan anyone help me figure out how to display the custom error I put in StudyController class instead of just {}\r\n\r\n","title":"Throwing Exception In SpringBoot","body":"<p>So I'm trying to throw an exception for a GET request (more requests are coming but for now I'm working on GET). Before I created my error package and the classes in it, I got the usual java null pointer error. But, after I created them, I only got this</p>\n\n<p>{}</p>\n\n<p>in the postman when I put the incorrect ID. Here are my classes starting from exception package to the controller</p>\n\n<p>RecordNotFoundException class</p>\n\n<pre><code>package com.yash.questionnaire.exception;\n\nimport org.springframework.http.HttpStatus;\nimport org.springframework.web.bind.annotation.ResponseStatus;\n\n@ResponseStatus(HttpStatus.NOT_FOUND)\npublic class RecordNotFoundException extends RuntimeException\n{\n    public RecordNotFoundException(String exception) {\n        super(exception);\n    }\n}\n</code></pre>\n\n<p>ErrorResponse class</p>\n\n<pre><code>package com.yash.questionnaire.exception;\n\nimport java.util.List;\nimport javax.xml.bind.annotation.XmlRootElement;\n\n@XmlRootElement(name = \"error\")\npublic class ErrorResponse\n{\n    public ErrorResponse(String message, List&lt;String&gt; details) {\n        super();\n        this.message = message;\n        this.details = details;\n    }\n\n    //General error message about nature of error\n    private String message;\n\n    //Specific errors in API request processing\n    private List&lt;String&gt; details;\n\n    //Getter and setters\n}\n</code></pre>\n\n<p>CustomExceptionHandler class</p>\n\n<pre><code>package com.yash.questionnaire.exception;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport org.springframework.http.HttpHeaders;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.validation.ObjectError;\nimport org.springframework.web.bind.MethodArgumentNotValidException;\nimport org.springframework.web.bind.annotation.ControllerAdvice;\nimport org.springframework.web.bind.annotation.ExceptionHandler;\nimport org.springframework.web.context.request.WebRequest;\nimport org.springframework.web.servlet.mvc.method.annotation.ResponseEntityExceptionHandler;\n\n@SuppressWarnings({\"unchecked\",\"rawtypes\"})\n@ControllerAdvice\npublic class CustomExceptionHandler extends ResponseEntityExceptionHandler\n{\n    @ExceptionHandler(Exception.class)\n    public final ResponseEntity&lt;Object&gt; handleAllExceptions(Exception ex, WebRequest request) {\n        List&lt;String&gt; details = new ArrayList&lt;&gt;();\n        details.add(ex.getLocalizedMessage());\n        ErrorResponse error = new ErrorResponse(\"Server Error\", details);\n        return new ResponseEntity(error, HttpStatus.INTERNAL_SERVER_ERROR);\n    }\n\n    @ExceptionHandler(RecordNotFoundException.class)\n    public final ResponseEntity&lt;Object&gt; handleUserNotFoundException(RecordNotFoundException ex, WebRequest request) {\n        List&lt;String&gt; details = new ArrayList&lt;&gt;();\n        details.add(ex.getLocalizedMessage());\n        ErrorResponse error = new ErrorResponse(\"Record Not Found\", details);\n        return new ResponseEntity(error, HttpStatus.NOT_FOUND);\n    }\n\n    @Override\n    protected ResponseEntity&lt;Object&gt; handleMethodArgumentNotValid(MethodArgumentNotValidException ex, HttpHeaders headers, HttpStatus status, WebRequest request) {\n        List&lt;String&gt; details = new ArrayList&lt;&gt;();\n        for(ObjectError error : ex.getBindingResult().getAllErrors()) {\n            details.add(error.getDefaultMessage());\n        }\n        ErrorResponse error = new ErrorResponse(\"Validation Failed\", details);\n        return new ResponseEntity(error, HttpStatus.BAD_REQUEST);\n    }\n}\n</code></pre>\n\n<p>StudyController class</p>\n\n<pre><code>\npackage com.yash.questionnaire.web;\n\nimport java.util.List;\nimport java.util.Map;\n\nimport javax.validation.Valid;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.validation.BindingResult;\nimport org.springframework.web.bind.annotation.CrossOrigin;\nimport org.springframework.web.bind.annotation.DeleteMapping;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.PutMapping;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestParam;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport com.yash.questionnaire.exception.RecordNotFoundException;\nimport com.yash.questionnaire.model.Study;\nimport com.yash.questionnaire.repository.MapValidationError;\nimport com.yash.questionnaire.repository.StudyRepository;\n\nimport io.swagger.annotations.Api;\nimport io.swagger.annotations.ApiOperation;\nimport io.swagger.annotations.ApiParam;\n\n@RestController\n@RequestMapping(\"/api\")\n@CrossOrigin(origins = \"*\")\n@Api(value= \"DDR\", description=\"This API provides the facility to create a new Study\")\npublic class StudyController {\n\n    @Autowired\n    private StudyRepository repository;\n\n    @Autowired\n    private MapValidationError mapValidationError;    //ToDo: to fetch Json post request\n\n    @ApiOperation(value = \"Read a study by study-name\")\n    @GetMapping(\"/studies/{studyType}\")\n    public ResponseEntity&lt;Map&lt;String, Object&gt;&gt; getByStudyType(@ApiParam(value = \"Questionnaire StudyType will retrieve\", required = true) @PathVariable(\"studyType\") String studyType) {\n        try {\n            return new ResponseEntity&lt;&gt;(repository.getByStudyType(studyType), HttpStatus.OK);\n\n        } catch (RecordNotFoundException ex) {\n            throw new RecordNotFoundException(\"Invalid studyType : \" + studyType);\n        }\n    }\n\n}\n</code></pre>\n\n<p>Can anyone help me figure out how to display the custom error I put in StudyController class instead of just {}</p>\n"},{"tags":["java","jackson"],"answers":[{"comments":[{"owner":{"account_id":1761359,"reputation":1866,"user_id":1608386,"display_name":"Pancakeo"},"score":0,"creation_date":1362622893,"post_id":15261908,"comment_id":21527234,"body_markdown":"I used this one earlier today, has some more info, e.g. auto discovery. http://stackoverflow.com/questions/4362104/strange-jackson-exception-being-thrown-when-serializing-hibernate-object","body":"I used this one earlier today, has some more info, e.g. auto discovery. <a href=\"http://stackoverflow.com/questions/4362104/strange-jackson-exception-being-thrown-when-serializing-hibernate-object\" title=\"strange jackson exception being thrown when serializing hibernate object\">stackoverflow.com/questions/4362104/&hellip;</a>"},{"owner":{"account_id":412450,"reputation":6101,"user_id":785523,"accept_rate":87,"display_name":"tuk"},"score":1,"creation_date":1459508947,"post_id":15261908,"comment_id":60329225,"body_markdown":"Can you give an example on how to use `@JsonSerialize` to disable `FAIL_ON_EMPTY_BEANS` on class declaration?","body":"Can you give an example on how to use <code>@JsonSerialize</code> to disable <code>FAIL_ON_EMPTY_BEANS</code> on class declaration?"},{"owner":{"account_id":1761359,"reputation":1866,"user_id":1608386,"display_name":"Pancakeo"},"score":2,"creation_date":1468096696,"post_id":15261908,"comment_id":63990727,"body_markdown":"Been a few years :). This might help: http://stackoverflow.com/questions/12162413/jackson-use-jsonserialize-inclusion-non-null-except-for-one-class","body":"Been a few years :). This might help: <a href=\"http://stackoverflow.com/questions/12162413/jackson-use-jsonserialize-inclusion-non-null-except-for-one-class\" title=\"jackson use jsonserialize inclusion non null except for one class\">stackoverflow.com/questions/12162413/&hellip;</a>"},{"owner":{"account_id":9053796,"reputation":500,"user_id":6742855,"display_name":"R Pidugu"},"score":0,"creation_date":1520859294,"post_id":15261908,"comment_id":85474645,"body_markdown":"Or you can use the disable method of ObjectMapper class like &quot;mapper.disable(SerializationFeature.FAIL_ON_EMPTY_BEANS)&quot;","body":"Or you can use the disable method of ObjectMapper class like &quot;mapper.disable(SerializationFeature.FAIL_ON_EMPTY_BEANS)&quot;"}],"tags":[],"owner":{"account_id":1761359,"reputation":1866,"user_id":1608386,"display_name":"Pancakeo"},"comment_count":4,"down_vote_count":0,"up_vote_count":175,"is_accepted":true,"score":175,"last_activity_date":1438898490,"creation_date":1362622810,"answer_id":15261908,"question_id":15261456,"body_markdown":"You can do this per class or globally, I believe.\r\n\r\nFor per class, try @JsonSerialize above class declaration.\r\n\r\nFor a mapper, here&#39;s one example:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    ObjectMapper mapper = new ObjectMapper();\r\n    mapper.configure(SerializationFeature.FAIL_ON_EMPTY_BEANS, false);\r\n    // do various things, perhaps:\r\n    String someJsonString = mapper.writeValueAsString(someClassInstance);\r\n    SomeClass someClassInstance = mapper.readValue(someJsonString, SomeClass.class)\r\n\r\nThe StackOverflow link below also has an example for a Spring project.\r\n\r\nFor REST with Jersey, I don&#39;t remember off the top off my head, but I believe it&#39;s similar.\r\n\r\n----\r\n\r\nCouple of links I dug up: (edited 1st link due to Codehaus shutting down).\r\n\r\n- https://web.archive.org/web/20150513164332/https://jira.codehaus.org/browse/JACKSON-201\r\n- https://stackoverflow.com/questions/5110586/jackson-serializationconfig","title":"How do I disable fail_on_empty_beans in Jackson?","body":"<p>You can do this per class or globally, I believe.</p>\n\n<p>For per class, try @JsonSerialize above class declaration.</p>\n\n<p>For a mapper, here's one example:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>ObjectMapper mapper = new ObjectMapper();\nmapper.configure(SerializationFeature.FAIL_ON_EMPTY_BEANS, false);\n// do various things, perhaps:\nString someJsonString = mapper.writeValueAsString(someClassInstance);\nSomeClass someClassInstance = mapper.readValue(someJsonString, SomeClass.class)\n</code></pre>\n\n<p>The StackOverflow link below also has an example for a Spring project.</p>\n\n<p>For REST with Jersey, I don't remember off the top off my head, but I believe it's similar.</p>\n\n<hr>\n\n<p>Couple of links I dug up: (edited 1st link due to Codehaus shutting down).</p>\n\n<ul>\n<li><a href=\"https://web.archive.org/web/20150513164332/https://jira.codehaus.org/browse/JACKSON-201\" rel=\"noreferrer\">https://web.archive.org/web/20150513164332/https://jira.codehaus.org/browse/JACKSON-201</a></li>\n<li><a href=\"https://stackoverflow.com/questions/5110586/jackson-serializationconfig\">Jackson serializationConfig</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":310643,"reputation":619,"user_id":623738,"display_name":"RJStanford"},"comment_count":0,"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1389100737,"creation_date":1389100737,"answer_id":20972677,"question_id":15261456,"body_markdown":"You can also get the same issue if your class doesn&#39;t contain any public methods/properties.  I normally have dedicated DTOs for API requests and responses, declared public, but forgot in one case to make the methods public as well - which caused the &quot;empty&quot; bean in the first place.","title":"How do I disable fail_on_empty_beans in Jackson?","body":"<p>You can also get the same issue if your class doesn't contain any public methods/properties.  I normally have dedicated DTOs for API requests and responses, declared public, but forgot in one case to make the methods public as well - which caused the \"empty\" bean in the first place.</p>\n"},{"comments":[{"owner":{"account_id":1994975,"reputation":173,"user_id":1788119,"accept_rate":25,"display_name":"maryoush"},"score":6,"creation_date":1487693296,"post_id":29616102,"comment_id":71894250,"body_markdown":"This will not work if the whole bean is actually null","body":"This will not work if the whole bean is actually null"}],"tags":[],"owner":{"account_id":928328,"reputation":2383,"user_id":958651,"display_name":"AllDayAmazing"},"comment_count":1,"down_vote_count":3,"up_vote_count":14,"is_accepted":false,"score":11,"last_activity_date":1428963916,"creation_date":1428963916,"answer_id":29616102,"question_id":15261456,"body_markdown":"You can also probably annotate the class with `@JsonIgnoreProperties(ignoreUnknown=true)` to ignore the fields undefined in the class","title":"How do I disable fail_on_empty_beans in Jackson?","body":"<p>You can also probably annotate the class with <code>@JsonIgnoreProperties(ignoreUnknown=true)</code> to ignore the fields undefined in the class</p>\n"},{"tags":[],"owner":{"account_id":1001865,"reputation":4245,"user_id":1016544,"accept_rate":27,"display_name":"Wahib Ul Haq"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1437394908,"creation_date":1437394908,"answer_id":31516396,"question_id":15261456,"body_markdown":"In my case, I missed to write @JsonProperty annotation in one of the fields which was causing this error. ","title":"How do I disable fail_on_empty_beans in Jackson?","body":"<p>In my case, I missed to write @JsonProperty annotation in one of the fields which was causing this error. </p>\n"},{"tags":[],"owner":{"account_id":4289036,"reputation":846,"user_id":3505878,"accept_rate":60,"display_name":"thangamanikasi"},"comment_count":0,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1452602770,"creation_date":1452602770,"answer_id":34744103,"question_id":15261456,"body_markdown":"If you use org.codehaus.jackson.map.ObjectMapper, then pls. use the following lines\r\n\r\n    mapper.configure(SerializationConfig.Feature.FAIL_ON_EMPTY_BEANS, false);","title":"How do I disable fail_on_empty_beans in Jackson?","body":"<p>If you use org.codehaus.jackson.map.ObjectMapper, then pls. use the following lines</p>\n\n<pre><code>mapper.configure(SerializationConfig.Feature.FAIL_ON_EMPTY_BEANS, false);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1451053,"reputation":456,"user_id":1367983,"display_name":"Kirk B."},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1480902510,"creation_date":1480902510,"answer_id":40965970,"question_id":15261456,"body_markdown":"Adding a solution here for a different problem, but one that manifests with the same error... Take care when constructing json on the fly (as api responses or whatever) to escape literal double quotes in your string members. You may be consuming your own malformed json.\r\n\r\n","title":"How do I disable fail_on_empty_beans in Jackson?","body":"<p>Adding a solution here for a different problem, but one that manifests with the same error... Take care when constructing json on the fly (as api responses or whatever) to escape literal double quotes in your string members. You may be consuming your own malformed json.</p>\n"},{"tags":[],"owner":{"account_id":9053796,"reputation":500,"user_id":6742855,"display_name":"R Pidugu"},"comment_count":0,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1567061273,"creation_date":1520859223,"answer_id":49235769,"question_id":15261456,"body_markdown":"T o fix this issue configure your JsonDataFormat class like below\r\n\r\n    ObjectMapper mapper = new ObjectMapper();\r\n    mapper.disable(SerializationFeature.FAIL_ON_EMPTY_BEANS);\r\n\r\nwhich is almost equivalent to,\r\n\r\n    mapper.configure(SerializationConfig.Feature.FAIL_ON_EMPTY_BEANS, false);\r\n","title":"How do I disable fail_on_empty_beans in Jackson?","body":"<p>T o fix this issue configure your JsonDataFormat class like below</p>\n\n<pre><code>ObjectMapper mapper = new ObjectMapper();\nmapper.disable(SerializationFeature.FAIL_ON_EMPTY_BEANS);\n</code></pre>\n\n<p>which is almost equivalent to,</p>\n\n<pre><code>mapper.configure(SerializationConfig.Feature.FAIL_ON_EMPTY_BEANS, false);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2349225,"reputation":26836,"user_id":2058547,"accept_rate":60,"display_name":"Ojonugwa Jude Ochalifu"},"score":0,"creation_date":1601555889,"post_id":51650126,"comment_id":113448163,"body_markdown":"Yep. Solved it.","body":"Yep. Solved it."},{"owner":{"account_id":10186372,"reputation":174,"user_id":7521154,"display_name":"dyon048"},"score":0,"creation_date":1617192283,"post_id":51650126,"comment_id":118234408,"body_markdown":"Works like a charm!","body":"Works like a charm!"},{"owner":{"account_id":11214877,"reputation":141,"user_id":8227834,"display_name":"Radhesh Khanna"},"score":3,"creation_date":1672136776,"post_id":51650126,"comment_id":132226689,"body_markdown":"Does not work in Spring Boot 2.7.5","body":"Does not work in Spring Boot 2.7.5"}],"tags":[],"owner":{"account_id":11363069,"reputation":901,"user_id":8330737,"display_name":"abhishek jain"},"comment_count":3,"down_vote_count":0,"up_vote_count":90,"is_accepted":false,"score":90,"last_activity_date":1627414978,"creation_date":1533202095,"answer_id":51650126,"question_id":15261456,"body_markdown":"If you are using Spring Boot, you can set the following property in application.properties file.\r\n```spring.jackson.serialization.FAIL_ON_EMPTY_BEANS=false```","title":"How do I disable fail_on_empty_beans in Jackson?","body":"<p>If you are using Spring Boot, you can set the following property in application.properties file.\n<code>spring.jackson.serialization.FAIL_ON_EMPTY_BEANS=false</code></p>\n"},{"tags":[],"owner":{"account_id":12898503,"reputation":2596,"user_id":9328117,"display_name":"Shahid Hussain Abbasi"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1537287532,"creation_date":1537281122,"answer_id":52388929,"question_id":15261456,"body_markdown":"    ObjectMapper mapper = new ObjectMapper();\r\n\r\nHi,\r\n\r\nWhen I use `mapper.configure(SerializationFeature.FAIL_ON_EMPTY_BEANS, false)`\r\n\r\nMy json object values come &#39;&#39; blank in angular page mean in response\r\n\r\n**Solved** with the help of only below settings\r\n\r\n  \r\n  \r\n  \r\n  \r\n\r\n    mapper.setVisibility(mapper.getSerializationConfig().getDefaultVisibilityChecker().\r\n    withFieldVisibility(JsonAutoDetect.Visibility.ANY).withGetterVisibility(JsonAutoDetect.Visibility.NONE)\r\n    \t            .withSetterVisibility(JsonAutoDetect.Visibility.NONE)\r\n    \t            .withCreatorVisibility(JsonAutoDetect.Visibility.NONE));","title":"How do I disable fail_on_empty_beans in Jackson?","body":"<pre><code>ObjectMapper mapper = new ObjectMapper();\n</code></pre>\n\n<p>Hi,</p>\n\n<p>When I use <code>mapper.configure(SerializationFeature.FAIL_ON_EMPTY_BEANS, false)</code></p>\n\n<p>My json object values come '' blank in angular page mean in response</p>\n\n<p><strong>Solved</strong> with the help of only below settings</p>\n\n<pre><code>mapper.setVisibility(mapper.getSerializationConfig().getDefaultVisibilityChecker().\nwithFieldVisibility(JsonAutoDetect.Visibility.ANY).withGetterVisibility(JsonAutoDetect.Visibility.NONE)\n                .withSetterVisibility(JsonAutoDetect.Visibility.NONE)\n                .withCreatorVisibility(JsonAutoDetect.Visibility.NONE));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":177007,"reputation":13776,"user_id":408079,"accept_rate":93,"display_name":"ninjasense"},"score":0,"creation_date":1550118421,"post_id":53845446,"comment_id":96155037,"body_markdown":"I was trying to return JSON from inside one of my controllers in my spring-boot REST app and this fix it for me.","body":"I was trying to return JSON from inside one of my controllers in my spring-boot REST app and this fix it for me."},{"owner":{"account_id":11793534,"reputation":982,"user_id":8628851,"display_name":"Georgi Peev"},"score":0,"creation_date":1573946066,"post_id":53845446,"comment_id":104056789,"body_markdown":"The perfect way if you have a empty object!","body":"The perfect way if you have a empty object!"}],"tags":[],"owner":{"account_id":2159021,"reputation":527,"user_id":1913615,"accept_rate":100,"display_name":"assaf.gov"},"comment_count":2,"down_vote_count":0,"up_vote_count":29,"is_accepted":false,"score":29,"last_activity_date":1545204167,"creation_date":1545199650,"answer_id":53845446,"question_id":15261456,"body_markdown":"If you wish to get JSON object without any extra fields - please add this annotation to your class, it worked perfect for me.\r\n\r\n    @JsonIgnoreProperties({&quot;hibernateLazyInitializer&quot;, &quot;handler&quot;})\r\n\r\n\r\nYou can also add in your application.properties file this row, but it will add an extra field to your JSON.\r\n\r\n    spring.jackson.serialization.FAIL_ON_EMPTY_BEANS=false\r\n\r\n","title":"How do I disable fail_on_empty_beans in Jackson?","body":"<p>If you wish to get JSON object without any extra fields - please add this annotation to your class, it worked perfect for me.</p>\n\n<pre><code>@JsonIgnoreProperties({\"hibernateLazyInitializer\", \"handler\"})\n</code></pre>\n\n<p>You can also add in your application.properties file this row, but it will add an extra field to your JSON.</p>\n\n<pre><code>spring.jackson.serialization.FAIL_ON_EMPTY_BEANS=false\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17936532,"reputation":91,"user_id":13032748,"display_name":"mephistopheles78"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1583756296,"creation_date":1583756296,"answer_id":60600415,"question_id":15261456,"body_markdown":"In Jersey Rest Services just use the JacksonFeatures annotation ...\r\n\r\n    @JacksonFeatures(serializationDisable = {SerializationFeature.FAIL_ON_EMPTY_BEANS})\r\n    public Response getSomething() {\r\n        Object entity = doSomething();\r\n        return Response.ok(entity).build();\r\n    }","title":"How do I disable fail_on_empty_beans in Jackson?","body":"<p>In Jersey Rest Services just use the JacksonFeatures annotation ...</p>\n\n<pre><code>@JacksonFeatures(serializationDisable = {SerializationFeature.FAIL_ON_EMPTY_BEANS})\npublic Response getSomething() {\n    Object entity = doSomething();\n    return Response.ok(entity).build();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6755440,"reputation":144,"user_id":5204057,"display_name":"AppEmmanuel"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1595414375,"creation_date":1595414375,"answer_id":63032325,"question_id":15261456,"body_markdown":"In my case I didnt need to disable it , rather I had to put this code on top of my class : (and this solved my issue)\r\n\r\n        @JsonNaming(PropertyNamingStrategy.SnakeCaseStrategy.class)//this is what was added\r\n        @Value //this was there already\r\n        @Builder//this was there already\r\n    \r\n    public class NameOfClass {\r\n         //some code in here.\r\n    }","title":"How do I disable fail_on_empty_beans in Jackson?","body":"<p>In my case I didnt need to disable it , rather I had to put this code on top of my class : (and this solved my issue)</p>\n<pre><code>    @JsonNaming(PropertyNamingStrategy.SnakeCaseStrategy.class)//this is what was added\n    @Value //this was there already\n    @Builder//this was there already\n\npublic class NameOfClass {\n     //some code in here.\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9053796,"reputation":500,"user_id":6742855,"display_name":"R Pidugu"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1611746641,"creation_date":1611746641,"answer_id":65918137,"question_id":15261456,"body_markdown":"If it is a Spring App, just paste the code in config class\r\n   \r\n\r\n            @Bean\r\n            public ObjectMapper getJacksonObjectMapper() {\r\n                ObjectMapper objectMapper = new ObjectMapper();\r\n                objectMapper.findAndRegisterModules();\r\n                objectMapper.configure(\r\n                        com.fasterxml.jackson.databind.SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false);\r\n                objectMapper.setSerializationInclusion(JsonInclude.Include.NON_NULL);\r\n                objectMapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\r\n                return objectMapper;\r\n            }\r\n      ","title":"How do I disable fail_on_empty_beans in Jackson?","body":"<p>If it is a Spring App, just paste the code in config class</p>\n<pre><code>        @Bean\n        public ObjectMapper getJacksonObjectMapper() {\n            ObjectMapper objectMapper = new ObjectMapper();\n            objectMapper.findAndRegisterModules();\n            objectMapper.configure(\n                    com.fasterxml.jackson.databind.SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false);\n            objectMapper.setSerializationInclusion(JsonInclude.Include.NON_NULL);\n            objectMapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);\n            return objectMapper;\n        }\n  \n</code></pre>\n"},{"tags":[],"owner":{"account_id":19196094,"reputation":474,"user_id":14024740,"display_name":"AussieDev81"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1639121581,"creation_date":1639121581,"answer_id":70301110,"question_id":15261456,"body_markdown":"I don&#39;t fully understand the reason behind this exception, but for Spring Boot projects adding the following to the properties file works a treat\r\n\r\napplication.yml\r\n```\r\nspring:\r\n  jackson:\r\n   serialization:\r\n     FAIL_ON_EMPTY_BEANS: false\r\n```\r\napplication.properties\r\n```\r\nspring.jackson.serialization.FAIL_ON_EMPTY_BEANS = false\r\n```","title":"How do I disable fail_on_empty_beans in Jackson?","body":"<p>I don't fully understand the reason behind this exception, but for Spring Boot projects adding the following to the properties file works a treat</p>\n<p>application.yml</p>\n<pre><code>spring:\n  jackson:\n   serialization:\n     FAIL_ON_EMPTY_BEANS: false\n</code></pre>\n<p>application.properties</p>\n<pre><code>spring.jackson.serialization.FAIL_ON_EMPTY_BEANS = false\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22938461,"reputation":538,"user_id":17071589,"display_name":"abdella"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1666889301,"creation_date":1666889301,"answer_id":74225565,"question_id":15261456,"body_markdown":"I get the same error when I return InvoiceDTO as a response to the client. The problem was when I used the bean (Customer) in the DTO (InvoiceDTO). So, to solve I changed the bean (Customer) to DTO (CustomerDTO) to disable serialization and it is worked fine.","title":"How do I disable fail_on_empty_beans in Jackson?","body":"<p>I get the same error when I return InvoiceDTO as a response to the client. The problem was when I used the bean (Customer) in the DTO (InvoiceDTO). So, to solve I changed the bean (Customer) to DTO (CustomerDTO) to disable serialization and it is worked fine.</p>\n"}],"owner":{"account_id":1059510,"reputation":15581,"user_id":1061426,"accept_rate":69,"display_name":"bharal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":235577,"favorite_count":0,"down_vote_count":0,"up_vote_count":153,"accepted_answer_id":15261908,"answer_count":15,"score":153,"last_activity_date":1666889301,"creation_date":1362619706,"question_id":15261456,"body_markdown":"Using jackson 2.1, how do I disable the `fail_on_empty beans` that the error message seems to want me to disable? \r\n\r\nI&#39;m assuming this is just the simplest thing in the world, but hell it is late and I haven&#39;t been able to find a simple tutorial or anything particularly obvious from the `api`. `SerializationFactory`? Why would they make it so unintuitive and then make the error message seem so straightforward?\r\n\r\nAlthough I *do* like the error message, I mean, it is better than an NPE.\r\n\r\nI&#39;m assuming there is a way to do this using annotations - but I&#39;m not keen on using them at all for the simplistic work I&#39;m doing!","title":"How do I disable fail_on_empty_beans in Jackson?","body":"<p>Using jackson 2.1, how do I disable the <code>fail_on_empty beans</code> that the error message seems to want me to disable? </p>\n\n<p>I'm assuming this is just the simplest thing in the world, but hell it is late and I haven't been able to find a simple tutorial or anything particularly obvious from the <code>api</code>. <code>SerializationFactory</code>? Why would they make it so unintuitive and then make the error message seem so straightforward?</p>\n\n<p>Although I <em>do</em> like the error message, I mean, it is better than an NPE.</p>\n\n<p>I'm assuming there is a way to do this using annotations - but I'm not keen on using them at all for the simplistic work I'm doing!</p>\n"},{"tags":["java","jakarta-ee","jsonb","websphere-liberty","open-liberty"],"comments":[{"owner":{"account_id":1623729,"reputation":5200,"user_id":1499766,"accept_rate":86,"display_name":"Scott Kurz"},"score":0,"creation_date":1666887511,"post_id":74224882,"comment_id":131046794,"body_markdown":"What Liberty features do you have active (configured in your server.xml file)?","body":"What Liberty features do you have active (configured in your server.xml file)?"},{"owner":{"account_id":1623729,"reputation":5200,"user_id":1499766,"accept_rate":86,"display_name":"Scott Kurz"},"score":1,"creation_date":1666988627,"post_id":74224882,"comment_id":131072961,"body_markdown":"OK, this is a current limitation.  Seems we already have an issue tracking:  https://github.com/OpenLiberty/open-liberty/issues/19698.  Open Liberty does use Yasson and since, as you noted, there seems to be now Yasson versions with support for records, it would appear to be just a matter of integrating an updated Yasson version within Open Liberty.","body":"OK, this is a current limitation.  Seems we already have an issue tracking:  <a href=\"https://github.com/OpenLiberty/open-liberty/issues/19698\" rel=\"nofollow noreferrer\">github.com/OpenLiberty/open-liberty/issues/19698</a>.  Open Liberty does use Yasson and since, as you noted, there seems to be now Yasson versions with support for records, it would appear to be just a matter of integrating an updated Yasson version within Open Liberty."}],"owner":{"account_id":1247323,"reputation":1647,"user_id":1319938,"accept_rate":67,"display_name":"mah454"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":185,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1666888057,"creation_date":1666885914,"question_id":74224882,"body_markdown":"I have this setup :     \r\n\r\n    @Path(&quot;/client&quot;)\r\n    @Stateless\r\n    @Produces({MediaType.APPLICATION_JSON})\r\n    @Consumes({MediaType.APPLICATION_JSON})\r\n    public class ClientResources {\r\n        @EJB\r\n        private ClientService clientService;\r\n    \r\n        @GET\r\n        @Path(&quot;/get&quot;)\r\n        public ResponseMessage getClient() {\r\n            ClientRecordDTO resultDTO = new ClientRecordDTO(1L,&quot;john&quot;,&quot;Maxim&quot;,&quot;23456789&quot;);\r\n            return new ResponseMessage(resultDTO);\r\n        }\r\n    }      \r\n\r\nAnd record :      \r\n\r\n    import jakarta.json.bind.annotation.JsonbCreator;\r\n    import jakarta.json.bind.annotation.JsonbProperty;\r\n    import jakarta.xml.bind.annotation.XmlRootElement;\r\n    \r\n    @XmlRootElement\r\n    public record ClientRecordDTO(\r\n            @JsonbProperty(&quot;id&quot;)\r\n            Long id,\r\n\r\n            @JsonbProperty(&quot;name&quot;)\r\n            String name,\r\n    \r\n            @JsonbProperty(&quot;family&quot;)\r\n            String family,\r\n    \r\n            @JsonbProperty(&quot;nationalCode&quot;)\r\n            String nationalCode\r\n    ) {\r\n        @JsonbCreator\r\n        public ClientRecordDTO(@JsonbProperty(&quot;name&quot;)\r\n                               String name,\r\n    \r\n                               @JsonbProperty(&quot;family&quot;)\r\n                               String family,\r\n    \r\n                               @JsonbProperty(&quot;nationalCode&quot;)\r\n                               String nationalCode) {\r\n            this(null, name, family, nationalCode);\r\n        }\r\n    }      \r\n\r\nI can not understand why liberty application server can not serialize record to json !     \r\nI also wrote custom `MessageBodyWriter` but does not work      \r\n\r\n    @Provider\r\n    public class RecordWriter implements MessageBodyWriter&lt;ResponseMessage&gt; {\r\n        private static final Jsonb jsonb = JsonbBuilder.create();\r\n        @Override\r\n        public boolean isWriteable(Class&lt;?&gt; type, Type genericType, Annotation[] annotations, MediaType mediaType) {\r\n            return true;\r\n        }\r\n    \r\n        @Override\r\n        public void writeTo(ResponseMessage responseMessage, Class&lt;?&gt; type, Type genericType, Annotation[] annotations, MediaType mediaType, MultivaluedMap&lt;String, Object&gt; httpHeaders, OutputStream entityStream) throws IOException, WebApplicationException {\r\n            OutputStreamWriter writer = new OutputStreamWriter(entityStream);\r\n            writer.write(jsonb.toJson(responseMessage));\r\n            writer.flush();\r\n            writer.close();\r\n        }\r\n    }\r\n\r\nThe interesting point is, I added eclipse yasson to pom.xml and try to serialize object. \r\n      \r\n    &lt;dependency&gt;\r\n         &lt;groupId&gt;org.eclipse&lt;/groupId&gt;\r\n         &lt;artifactId&gt;yasson&lt;/artifactId&gt;\r\n         &lt;version&gt;3.0.0&lt;/version&gt;\r\n         &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n   \r\nthat work without any problem :      \r\n    \r\n    import jakarta.json.bind.Jsonb;\r\n    import jakarta.json.bind.JsonbBuilder;\r\n    public class JsonTest {\r\n        private static final Jsonb jsonb = JsonbBuilder.create();\r\n        public static void main(String[] args) {\r\n        ClientRecordDTO resultDTO = new ClientRecordDTO(1L,&quot;john&quot;,&quot;Maxim&quot;,&quot;23456789&quot;);\r\n            System.out.println(jsonb.toJson(dto));\r\n        }\r\n    }\r\n\r\nbut liberty application server returned empty json block `{}` !    \r\nActually i want to use record as DTO objects . there is any way to fix this problem ?\r\n\r\n**UPDATE :**    \r\nthis is server.xml      \r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;server description=&quot;Tutorial server&quot;&gt;\r\n        &lt;featureManager&gt;\r\n            &lt;feature&gt;managedBeans-2.0&lt;/feature&gt;\r\n            &lt;feature&gt;enterpriseBeansHome-4.0&lt;/feature&gt;\r\n            &lt;feature&gt;mpOpenAPI-3.0&lt;/feature&gt;\r\n            &lt;feature&gt;cdi-3.0&lt;/feature&gt;\r\n            &lt;feature&gt;concurrent-2.0&lt;/feature&gt;\r\n            &lt;feature&gt;enterpriseBeansLite-4.0&lt;/feature&gt;\r\n            &lt;feature&gt;restfulWS-3.0&lt;/feature&gt;\r\n            &lt;feature&gt;servlet-5.0&lt;/feature&gt;\r\n            &lt;feature&gt;json-1.0&lt;/feature&gt;\r\n            &lt;feature&gt;jsonb-2.0&lt;/feature&gt;\r\n            &lt;feature&gt;jsonp-2.0&lt;/feature&gt;\r\n            &lt;feature&gt;persistence-3.0&lt;/feature&gt;\r\n            &lt;feature&gt;beanValidation-3.0&lt;/feature&gt;\r\n        &lt;/featureManager&gt;\r\n    \r\n        &lt;library id=&quot;project-libs&quot;&gt;\r\n            &lt;fileset dir=&quot;${server.config.dir}/lib/global/&quot; includes=&quot;*.jar&quot;/&gt;\r\n        &lt;/library&gt;\r\n    \r\n        &lt;dataSource jndiName=&quot;jdbc/jta-datasource&quot; transactional=&quot;true&quot;&gt;\r\n            &lt;jdbcDriver id=&quot;database-driver&quot; libraryRef=&quot;project-libs&quot;/&gt;\r\n            &lt;properties databaseName=&quot;${database.name}&quot; serverName=&quot;${database.hostname}&quot; portNumber=&quot;${database.port}&quot;\r\n                        user=&quot;${database.username}&quot; password=&quot;${database.password}&quot;/&gt;\r\n        &lt;/dataSource&gt;\r\n    \r\n    \r\n        &lt;basicRegistry id=&quot;basic&quot; realm=&quot;BasicRealm&quot;/&gt;\r\n        &lt;httpSession securityIntegrationEnabled=&quot;false&quot;/&gt;\r\n        &lt;httpEndpoint id=&quot;defaultHttpEndpoint&quot; host=&quot;${default.hostname}&quot; httpPort=&quot;${default.http.port}&quot;\r\n                      httpsPort=&quot;${default.https.port}&quot;&gt;\r\n            &lt;httpOptions http2=&quot;enabled&quot;/&gt;\r\n        &lt;/httpEndpoint&gt;\r\n        &lt;webContainer disableXPoweredBy=&quot;true&quot;/&gt;\r\n        &lt;applicationManager autoExpand=&quot;true&quot;/&gt;\r\n        &lt;applicationMonitor updateTrigger=&quot;mbean&quot;/&gt;\r\n    &lt;/server&gt;","title":"Liberty can not serialize record type to json","body":"<p>I have this setup :</p>\n<pre><code>@Path(&quot;/client&quot;)\n@Stateless\n@Produces({MediaType.APPLICATION_JSON})\n@Consumes({MediaType.APPLICATION_JSON})\npublic class ClientResources {\n    @EJB\n    private ClientService clientService;\n\n    @GET\n    @Path(&quot;/get&quot;)\n    public ResponseMessage getClient() {\n        ClientRecordDTO resultDTO = new ClientRecordDTO(1L,&quot;john&quot;,&quot;Maxim&quot;,&quot;23456789&quot;);\n        return new ResponseMessage(resultDTO);\n    }\n}      \n</code></pre>\n<p>And record :</p>\n<pre><code>import jakarta.json.bind.annotation.JsonbCreator;\nimport jakarta.json.bind.annotation.JsonbProperty;\nimport jakarta.xml.bind.annotation.XmlRootElement;\n\n@XmlRootElement\npublic record ClientRecordDTO(\n        @JsonbProperty(&quot;id&quot;)\n        Long id,\n\n        @JsonbProperty(&quot;name&quot;)\n        String name,\n\n        @JsonbProperty(&quot;family&quot;)\n        String family,\n\n        @JsonbProperty(&quot;nationalCode&quot;)\n        String nationalCode\n) {\n    @JsonbCreator\n    public ClientRecordDTO(@JsonbProperty(&quot;name&quot;)\n                           String name,\n\n                           @JsonbProperty(&quot;family&quot;)\n                           String family,\n\n                           @JsonbProperty(&quot;nationalCode&quot;)\n                           String nationalCode) {\n        this(null, name, family, nationalCode);\n    }\n}      \n</code></pre>\n<p>I can not understand why liberty application server can not serialize record to json !<br />\nI also wrote custom <code>MessageBodyWriter</code> but does not work</p>\n<pre><code>@Provider\npublic class RecordWriter implements MessageBodyWriter&lt;ResponseMessage&gt; {\n    private static final Jsonb jsonb = JsonbBuilder.create();\n    @Override\n    public boolean isWriteable(Class&lt;?&gt; type, Type genericType, Annotation[] annotations, MediaType mediaType) {\n        return true;\n    }\n\n    @Override\n    public void writeTo(ResponseMessage responseMessage, Class&lt;?&gt; type, Type genericType, Annotation[] annotations, MediaType mediaType, MultivaluedMap&lt;String, Object&gt; httpHeaders, OutputStream entityStream) throws IOException, WebApplicationException {\n        OutputStreamWriter writer = new OutputStreamWriter(entityStream);\n        writer.write(jsonb.toJson(responseMessage));\n        writer.flush();\n        writer.close();\n    }\n}\n</code></pre>\n<p>The interesting point is, I added eclipse yasson to pom.xml and try to serialize object.</p>\n<pre><code>&lt;dependency&gt;\n     &lt;groupId&gt;org.eclipse&lt;/groupId&gt;\n     &lt;artifactId&gt;yasson&lt;/artifactId&gt;\n     &lt;version&gt;3.0.0&lt;/version&gt;\n     &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>that work without any problem :</p>\n<pre><code>import jakarta.json.bind.Jsonb;\nimport jakarta.json.bind.JsonbBuilder;\npublic class JsonTest {\n    private static final Jsonb jsonb = JsonbBuilder.create();\n    public static void main(String[] args) {\n    ClientRecordDTO resultDTO = new ClientRecordDTO(1L,&quot;john&quot;,&quot;Maxim&quot;,&quot;23456789&quot;);\n        System.out.println(jsonb.toJson(dto));\n    }\n}\n</code></pre>\n<p>but liberty application server returned empty json block <code>{}</code> !<br />\nActually i want to use record as DTO objects . there is any way to fix this problem ?</p>\n<p><strong>UPDATE :</strong><br />\nthis is server.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;server description=&quot;Tutorial server&quot;&gt;\n    &lt;featureManager&gt;\n        &lt;feature&gt;managedBeans-2.0&lt;/feature&gt;\n        &lt;feature&gt;enterpriseBeansHome-4.0&lt;/feature&gt;\n        &lt;feature&gt;mpOpenAPI-3.0&lt;/feature&gt;\n        &lt;feature&gt;cdi-3.0&lt;/feature&gt;\n        &lt;feature&gt;concurrent-2.0&lt;/feature&gt;\n        &lt;feature&gt;enterpriseBeansLite-4.0&lt;/feature&gt;\n        &lt;feature&gt;restfulWS-3.0&lt;/feature&gt;\n        &lt;feature&gt;servlet-5.0&lt;/feature&gt;\n        &lt;feature&gt;json-1.0&lt;/feature&gt;\n        &lt;feature&gt;jsonb-2.0&lt;/feature&gt;\n        &lt;feature&gt;jsonp-2.0&lt;/feature&gt;\n        &lt;feature&gt;persistence-3.0&lt;/feature&gt;\n        &lt;feature&gt;beanValidation-3.0&lt;/feature&gt;\n    &lt;/featureManager&gt;\n\n    &lt;library id=&quot;project-libs&quot;&gt;\n        &lt;fileset dir=&quot;${server.config.dir}/lib/global/&quot; includes=&quot;*.jar&quot;/&gt;\n    &lt;/library&gt;\n\n    &lt;dataSource jndiName=&quot;jdbc/jta-datasource&quot; transactional=&quot;true&quot;&gt;\n        &lt;jdbcDriver id=&quot;database-driver&quot; libraryRef=&quot;project-libs&quot;/&gt;\n        &lt;properties databaseName=&quot;${database.name}&quot; serverName=&quot;${database.hostname}&quot; portNumber=&quot;${database.port}&quot;\n                    user=&quot;${database.username}&quot; password=&quot;${database.password}&quot;/&gt;\n    &lt;/dataSource&gt;\n\n\n    &lt;basicRegistry id=&quot;basic&quot; realm=&quot;BasicRealm&quot;/&gt;\n    &lt;httpSession securityIntegrationEnabled=&quot;false&quot;/&gt;\n    &lt;httpEndpoint id=&quot;defaultHttpEndpoint&quot; host=&quot;${default.hostname}&quot; httpPort=&quot;${default.http.port}&quot;\n                  httpsPort=&quot;${default.https.port}&quot;&gt;\n        &lt;httpOptions http2=&quot;enabled&quot;/&gt;\n    &lt;/httpEndpoint&gt;\n    &lt;webContainer disableXPoweredBy=&quot;true&quot;/&gt;\n    &lt;applicationManager autoExpand=&quot;true&quot;/&gt;\n    &lt;applicationMonitor updateTrigger=&quot;mbean&quot;/&gt;\n&lt;/server&gt;\n</code></pre>\n"},{"tags":["java","unit-testing","mocking","twilio"],"answers":[{"comments":[{"owner":{"account_id":3461609,"reputation":565,"user_id":2898535,"display_name":"McFlurriez"},"score":0,"creation_date":1624495927,"post_id":61727016,"comment_id":120377172,"body_markdown":"Could you provide an example? I think the implementation is where it gets difficult here.","body":"Could you provide an example? I think the implementation is where it gets difficult here."}],"tags":[],"owner":{"account_id":76251,"reputation":2214,"user_id":218441,"accept_rate":75,"display_name":"Jocke"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1589191804,"creation_date":1589191232,"answer_id":61727016,"question_id":61628434,"body_markdown":"You need to introduce an interface or abstract class _between_ the twilio concrete implementation of Message.creator and your code that is using it. By doing so you can use standard mocking frameworks like mockito to create the mocks for you. And in the production setup you will inject code that uses the real implementation. For this you can use standard IOC tools, or go with constructor injection.","title":"How to mock Message.creator(to, from, smsRequest.getMessage()).create(); method in Twilio","body":"<p>You need to introduce an interface or abstract class <em>between</em> the twilio concrete implementation of Message.creator and your code that is using it. By doing so you can use standard mocking frameworks like mockito to create the mocks for you. And in the production setup you will inject code that uses the real implementation. For this you can use standard IOC tools, or go with constructor injection.</p>\n"},{"tags":[],"owner":{"account_id":9998469,"reputation":131,"user_id":7395303,"display_name":"Tomas Pinto"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666887824,"creation_date":1666887824,"answer_id":74225301,"question_id":61628434,"body_markdown":"    Message.creator(to, from, smsRequest.getMessage()).create();\r\n\r\nreturns a MessageCreator class, which actually does the job of sending the message.\r\n\r\nLet&#39;s say your class has a method named sendMessage which calls \r\n\r\n    Message.creator(...).create().\r\n\r\nThen, create a class that extends the actual class and overrides the sendMessage. In this way, you can quickly put the mock of MessageCreator class.\r\n\r\n    ...\r\n    import com.twilio.rest.api.v2010.account\r\n    ...\r\n          @Test\r\n        void testMockCreateOfTwilio() {\r\n          //given\r\n          messageCreator = mock(MessageCreator.class);\r\n        \r\n          MyClassUnderTest underTest = new MyClassUnderTest();   \r\n          underTest.setMessageCreator(messageCreator);\r\n        \r\n          //when\r\n          //For example You can throw an exception with your mock\r\n          when(messageCreator.create()).thenThrow(ApiException.class);\r\n             \r\n          underTest.sendMessage(new SomerParams);\r\n        \r\n          //then\r\n          ....  \r\n        }\r\n        \r\n        \r\n        class MyClassUnderTest extends MyActualClass {\r\n        \r\n          MessageCreator messageCreator;\r\n        \r\n          public Message sendMessage(SomeParams params) {\r\n               return this.messageCreator.create();\r\n           }\r\n        \r\n           public void setMessageCreator(MessageCreator messageCreator) {\r\n               this.messageCreator = messageCreator;\r\n           }\r\n        }\r\n\r\n","title":"How to mock Message.creator(to, from, smsRequest.getMessage()).create(); method in Twilio","body":"<pre><code>Message.creator(to, from, smsRequest.getMessage()).create();\n</code></pre>\n<p>returns a MessageCreator class, which actually does the job of sending the message.</p>\n<p>Let's say your class has a method named sendMessage which calls</p>\n<pre><code>Message.creator(...).create().\n</code></pre>\n<p>Then, create a class that extends the actual class and overrides the sendMessage. In this way, you can quickly put the mock of MessageCreator class.</p>\n<pre><code>...\nimport com.twilio.rest.api.v2010.account\n...\n      @Test\n    void testMockCreateOfTwilio() {\n      //given\n      messageCreator = mock(MessageCreator.class);\n    \n      MyClassUnderTest underTest = new MyClassUnderTest();   \n      underTest.setMessageCreator(messageCreator);\n    \n      //when\n      //For example You can throw an exception with your mock\n      when(messageCreator.create()).thenThrow(ApiException.class);\n         \n      underTest.sendMessage(new SomerParams);\n    \n      //then\n      ....  \n    }\n    \n    \n    class MyClassUnderTest extends MyActualClass {\n    \n      MessageCreator messageCreator;\n    \n      public Message sendMessage(SomeParams params) {\n           return this.messageCreator.create();\n       }\n    \n       public void setMessageCreator(MessageCreator messageCreator) {\n           this.messageCreator = messageCreator;\n       }\n    }\n</code></pre>\n"}],"owner":{"account_id":13139073,"reputation":842,"user_id":9491191,"display_name":"KNDheeraj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":875,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1666887824,"creation_date":1588745073,"question_id":61628434,"body_markdown":"I have used twilio to send sms to my users using Java 8 and Spring. So I want Unit test my code using JUnit5 and Mockito. But the issue is that I am unable to mock this code \r\n`Message.creator(to, from, smsRequest.getMessage()).create();`\r\n\r\nSo I would require help in successfully mocking this code for properly Unit testing my function.\r\n\r\nAny help is appreciated.","title":"How to mock Message.creator(to, from, smsRequest.getMessage()).create(); method in Twilio","body":"<p>I have used twilio to send sms to my users using Java 8 and Spring. So I want Unit test my code using JUnit5 and Mockito. But the issue is that I am unable to mock this code \n<code>Message.creator(to, from, smsRequest.getMessage()).create();</code></p>\n\n<p>So I would require help in successfully mocking this code for properly Unit testing my function.</p>\n\n<p>Any help is appreciated.</p>\n"},{"tags":["java","dialect","info"],"comments":[{"owner":{"account_id":18550,"reputation":79669,"user_id":42585,"accept_rate":67,"display_name":"Alohci"},"score":0,"creation_date":1623883538,"post_id":68006497,"comment_id":120207845,"body_markdown":"That&#39;s information. It&#39;s not your problem. &quot;Not running&quot; is not a problem description. Explain exactly what happens.","body":"That&#39;s information. It&#39;s not your problem. &quot;Not running&quot; is not a problem description. Explain exactly what happens."}],"answers":[{"tags":[],"owner":{"account_id":22867497,"reputation":1,"user_id":17011070,"display_name":"Ajeeth kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1632693465,"creation_date":1632693465,"answer_id":69339279,"question_id":68006497,"body_markdown":"Kindly check the chrome browser version and download and use the chrome driver accordingly.\r\n\r\nBecause chrome is updating automatically and I&#39;m also facing the same issue and it is resolved now.","title":"How to resolve this error - INFO: Detected dialect: W3C","body":"<p>Kindly check the chrome browser version and download and use the chrome driver accordingly.</p>\n<p>Because chrome is updating automatically and I'm also facing the same issue and it is resolved now.</p>\n"}],"owner":{"account_id":11858214,"reputation":3,"user_id":8677676,"display_name":"Ishwarya Ramaswamy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1677,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1666887812,"creation_date":1623860161,"question_id":68006497,"body_markdown":"My script is not running and could see this message in console. What is the solution for it? Please help\r\n\r\n&#39;Jun 16, 2021 9:34:35 PM org.openqa.selenium.remote.ProtocolHandshake createSession\r\nINFO: Detected dialect: W3C&#39;\r\n\r\nThis is my script\r\n\r\n    import java.util.Arrays;\r\n    import java.util.List;\r\n    \r\n    import org.openqa.selenium.By;\r\n    import org.openqa.selenium.WebDriver;\r\n    import org.openqa.selenium.WebElement;\r\n    import org.openqa.selenium.chrome.ChromeDriver;\r\n    import org.openqa.selenium.By;\r\n    public class Cart_Assignment {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\t\r\n    \t\tSystem.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;E:\\\\ishu\\\\Selenium\\\\Selenium new learning\\\\Chromedriver\\\\Chromedriver.exe&quot;);\r\n    \t\tWebDriver driver=new ChromeDriver();\r\n    \t\tString[] vegetables = {&quot;Cauliflower&quot;, &quot;Carrot&quot;, &quot;Beetroot&quot;};\r\n    \t\tdriver.get(&quot;https://rahulshettyacademy.com/seleniumPractise/&quot;);\r\n    \t\tdriver.manage().window().maximize();\r\n    \t\t\t\t\r\n    \r\n    \t\tList&lt;WebElement&gt; items = driver.findElements(By.cssSelector(&quot;h4.product-name&quot;));\r\n    \t\t\r\n    \t\t\tfor(int i=0;i&lt;items.size();i++)\r\n    \t\t\t{\r\n    \t\t\t\tString nameOfVeggie = items.get(i).getText();\r\n    \t\t\t\tList veglist = Arrays.asList(vegetables);\r\n    \t\t\t\t\r\n    \t\t\t\t\r\n    \t\t\t\tif(veglist.contains(nameOfVeggie))\r\n    \t\t\t\t{\r\n    \t\t\t\t\t\r\n    \t\t\t\t driver.findElements(By.xpath(&quot;//button[text()=&#39;ADD TO CART&#39;]&quot;)).get(i).click();\r\n    \t\t\t\t\t \r\n    \t\t\t\t\t\r\n    \t\t\t\t}\r\n    \t\t\r\n    \t}\r\n    \t}\r\n    }\r\n\r\n\r\n\r\n\r\n","title":"How to resolve this error - INFO: Detected dialect: W3C","body":"<p>My script is not running and could see this message in console. What is the solution for it? Please help</p>\n<p>'Jun 16, 2021 9:34:35 PM org.openqa.selenium.remote.ProtocolHandshake createSession\nINFO: Detected dialect: W3C'</p>\n<p>This is my script</p>\n<pre><code>import java.util.Arrays;\nimport java.util.List;\n\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.WebElement;\nimport org.openqa.selenium.chrome.ChromeDriver;\nimport org.openqa.selenium.By;\npublic class Cart_Assignment {\n\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n        \n        System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;E:\\\\ishu\\\\Selenium\\\\Selenium new learning\\\\Chromedriver\\\\Chromedriver.exe&quot;);\n        WebDriver driver=new ChromeDriver();\n        String[] vegetables = {&quot;Cauliflower&quot;, &quot;Carrot&quot;, &quot;Beetroot&quot;};\n        driver.get(&quot;https://rahulshettyacademy.com/seleniumPractise/&quot;);\n        driver.manage().window().maximize();\n                \n\n        List&lt;WebElement&gt; items = driver.findElements(By.cssSelector(&quot;h4.product-name&quot;));\n        \n            for(int i=0;i&lt;items.size();i++)\n            {\n                String nameOfVeggie = items.get(i).getText();\n                List veglist = Arrays.asList(vegetables);\n                \n                \n                if(veglist.contains(nameOfVeggie))\n                {\n                    \n                 driver.findElements(By.xpath(&quot;//button[text()='ADD TO CART']&quot;)).get(i).click();\n                     \n                    \n                }\n        \n    }\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-data-jpa","spring-data"],"comments":[{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1666905689,"post_id":74224911,"comment_id":131052253,"body_markdown":"Welcome to stackoverflow. We prefer a [mcve] as text in the question... if you need to link to a github repository, it&#39;s probably too much code to wade through. See also [ask].","body":"Welcome to stackoverflow. We prefer a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> as text in the question... if you need to link to a github repository, it&#39;s probably too much code to wade through. See also <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}],"answers":[{"comments":[{"owner":{"account_id":10693447,"reputation":878,"user_id":7871511,"display_name":"Rohit Agarwal"},"score":0,"creation_date":1666943516,"post_id":74225149,"comment_id":131058531,"body_markdown":"Good to know that your issue is resolved","body":"Good to know that your issue is resolved"}],"tags":[],"owner":{"account_id":10693447,"reputation":878,"user_id":7871511,"display_name":"Rohit Agarwal"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1666887662,"creation_date":1666887162,"answer_id":74225149,"question_id":74224911,"body_markdown":"I can see you have excluded ```DataSourceAutoConfiguration.class``` from ```@SpringBootApplication``` annotation. \r\n\r\n```@SpringBootApplication(exclude={DataSourceAutoConfiguration.class})``` \r\n\r\nThis is the issue. DatasourceAutoConfiguration.class is required for running integration test cases with H2 db. Please don&#39;t exclude it and also add H2 dependency in pom.xml.\r\n\r\n```\r\n\t    &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n```\r\n\r\nAlso, you need to add empty application.properties file in resources folder like this.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nAfter this issue will be resolved.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Tfo0q.png","title":"Spring Boot Bean could not be found","body":"<p>I can see you have excluded <code>DataSourceAutoConfiguration.class</code> from <code>@SpringBootApplication</code> annotation.</p>\n<p><code>@SpringBootApplication(exclude={DataSourceAutoConfiguration.class})</code></p>\n<p>This is the issue. DatasourceAutoConfiguration.class is required for running integration test cases with H2 db. Please don't exclude it and also add H2 dependency in pom.xml.</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>Also, you need to add empty application.properties file in resources folder like this.</p>\n<p><a href=\"https://i.stack.imgur.com/Tfo0q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Tfo0q.png\" alt=\"enter image description here\" /></a></p>\n<p>After this issue will be resolved.</p>\n"}],"owner":{"account_id":26751325,"reputation":3,"user_id":20350628,"display_name":"Emanuel Covelli"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":144,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74225149,"answer_count":1,"score":0,"last_activity_date":1666887662,"creation_date":1666886074,"question_id":74224911,"body_markdown":"Hello I&#39;m learning Spring Boot and I&#39;m working on a simple project. I have this problem when I try to execute the tests. Please tell me what I&#39;m doing wrong :(\r\n\r\nMy project Github is here: https://github.com/emicovi/GildedRose_SpringBoot\r\n\r\n```\r\n\r\n```\r\nAPPLICATION FAILED TO START\r\n***************************\r\n\r\nDescription:\r\n\r\nField itemRepository in com.gildedrose.gildedRose.DBLoader required a bean of type &#39;com.gildedrose.gildedRose.ItemRepository&#39; that could not be found.\r\n\r\nThe injection point has the following annotations:\r\n\t- @org.springframework.beans.factory.annotation.Autowired(required=true)\r\n\r\n```\r\n\r\n\r\n\r\n```\r\n\r\nI tried many solution already posted on the net but I was not able to fix.","title":"Spring Boot Bean could not be found","body":"<p>Hello I'm learning Spring Boot and I'm working on a simple project. I have this problem when I try to execute the tests. Please tell me what I'm doing wrong :(</p>\n<p>My project Github is here: <a href=\"https://github.com/emicovi/GildedRose_SpringBoot\" rel=\"nofollow noreferrer\">https://github.com/emicovi/GildedRose_SpringBoot</a></p>\n<pre><code>\n</code></pre>\n<p>APPLICATION FAILED TO START</p>\n<hr />\n<p>Description:</p>\n<p>Field itemRepository in com.gildedrose.gildedRose.DBLoader required a bean of type 'com.gildedrose.gildedRose.ItemRepository' that could not be found.</p>\n<p>The injection point has the following annotations:\n- @org.springframework.beans.factory.annotation.Autowired(required=true)</p>\n<pre><code>\n\n\n</code></pre>\n<p>I tried many solution already posted on the net but I was not able to fix.</p>\n"},{"tags":["java","maven","azure-functions"],"comments":[{"owner":{"account_id":3894930,"reputation":4026,"user_id":3224238,"display_name":"Paizo"},"score":0,"creation_date":1667389424,"post_id":74225210,"comment_id":131154357,"body_markdown":"are you behind a company proxy?","body":"are you behind a company proxy?"},{"owner":{"account_id":2212439,"reputation":21,"user_id":1953901,"display_name":"user1953901"},"score":0,"creation_date":1667509488,"post_id":74225210,"comment_id":131189968,"body_markdown":"No I am not behind company proxy.","body":"No I am not behind company proxy."}],"owner":{"account_id":2212439,"reputation":21,"user_id":1953901,"display_name":"user1953901"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":145,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1666887421,"creation_date":1666887421,"question_id":74225210,"body_markdown":"I am trying to deploy a java jar via mvn azure-functions:deploy command to Azure. previously I have had no issues with deploying this function. However I am now getting the following error:\r\n\r\n&gt; [INFO] Auth type: AZURE_CLI\r\nDefault subscription: *********************a1cb3e)\r\nUsername: *********.com\r\n[INFO] Subscription: *************************\r\n[INFO] Reflections took 271 ms to scan 5 urls, producing 25 keys and 747 values\r\n[WARNING] [f259252a, L:/********* - R:management.azure.com/****************] The connection observed an error\r\njavax.net.ssl.SSLHandshakeException: General OpenSslEngine problem\r\n    at io.netty.handler.ssl.ReferenceCountedOpenSslEngine.handshakeException (ReferenceCountedOpenSslEngine.java:1907)\r\n    at io.netty.handler.ssl.ReferenceCountedOpenSslEngine.wrap (ReferenceCountedOpenSslEngine.java:834)\r\n    at javax.net.ssl.SSLEngine.wrap (SSLEngine.java:509)\r\n    at io.netty.handler.ssl.SslHandler.wrap (SslHandler.java:1041)\r\n    at io.netty.handler.ssl.SslHandler.wrapNonAppData (SslHandler.java:927)\r\n    at io.netty.handler.ssl.SslHandler.unwrap (SslHandler.java:1409)\r\n    at io.netty.handler.ssl.SslHandler.decodeNonJdkCompatible (SslHandler.java:1247)\r\n    at io.netty.handler.ssl.SslHandler.decode (SslHandler.java:1287)\r\n    at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection (ByteToMessageDecoder.java:510)\r\n    at io.netty.handler.codec.ByteToMessageDecoder.callDecode (ByteToMessageDecoder.java:449)\r\n    at io.netty.handler.codec.ByteToMessageDecoder.channelRead (ByteToMessageDecoder.java:279)\r\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead (AbstractChannelHandlerContext.java:379)\r\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead (AbstractChannelHandlerContext.java:365)\r\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead (AbstractChannelHandlerContext.java:357)\r\n    at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead (DefaultChannelPipeline.java:1410)\r\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead (AbstractChannelHandlerContext.java:379)\r\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead (AbstractChannelHandlerContext.java:365)\r\n    at io.netty.channel.DefaultChannelPipeline.fireChannelRead (DefaultChannelPipeline.java:919)\r\n    at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read (AbstractNioByteChannel.java:166)\r\n    at io.netty.channel.nio.NioEventLoop.processSelectedKey (NioEventLoop.java:722)\r\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized (NioEventLoop.java:658)\r\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeys (NioEventLoop.java:584)\r\n    at io.netty.channel.nio.NioEventLoop.run (NioEventLoop.java:496)\r\n    at io.netty.util.concurrent.SingleThreadEventExecutor$4.run (SingleThreadEventExecutor.java:997)\r\n    at io.netty.util.internal.ThreadExecutorMap$2.run (ThreadExecutorMap.java:74)\r\n    at io.netty.util.concurrent.FastThreadLocalRunnable.run (FastThreadLocalRunnable.java:30)\r\n    at java.lang.Thread.run (Thread.java:748)\r\nCaused by: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n\r\n\r\nI am using java 8 maven version 3.8.5, my pom is using:\r\n\r\n             &lt;azure.functions.maven.plugin.version&gt;1.20.0&lt;/azure.functions.maven.plugin.version&gt;\r\n        &lt;azure.functions.java.library.version&gt;2.1.0&lt;/azure.functions.java.library.version&gt;\r\n\r\n       &lt;dependency&gt;\r\n      &lt;groupId&gt;com.azure&lt;/groupId&gt;\r\n      &lt;artifactId&gt;azure-sdk-bom&lt;/artifactId&gt;\r\n      &lt;version&gt;1.2.5&lt;/version&gt;\r\n      &lt;type&gt;pom&lt;/type&gt;\r\n      &lt;scope&gt;import&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\nAny help on this issue would be appreciated","title":"Deploying java azure function via maven and getting ssl handshake error","body":"<p>I am trying to deploy a java jar via mvn azure-functions:deploy command to Azure. previously I have had no issues with deploying this function. However I am now getting the following error:</p>\n<blockquote>\n<p>[INFO] Auth type: AZURE_CLI\nDefault subscription: *****<strong><strong><strong><strong><strong><strong><strong><strong>a1cb3e)\nUsername: <em><strong><strong><strong><strong>.com\n[INFO] Subscription: *************************\n[INFO] Reflections took 271 ms to scan 5 urls, producing 25 keys and 747 values\n[WARNING] [f259252a, L:/</strong></strong></strong></strong></em> - R:management.azure.com/</strong></strong></strong></strong></strong></strong></strong></strong>] The connection observed an error\njavax.net.ssl.SSLHandshakeException: General OpenSslEngine problem\nat io.netty.handler.ssl.ReferenceCountedOpenSslEngine.handshakeException (ReferenceCountedOpenSslEngine.java:1907)\nat io.netty.handler.ssl.ReferenceCountedOpenSslEngine.wrap (ReferenceCountedOpenSslEngine.java:834)\nat javax.net.ssl.SSLEngine.wrap (SSLEngine.java:509)\nat io.netty.handler.ssl.SslHandler.wrap (SslHandler.java:1041)\nat io.netty.handler.ssl.SslHandler.wrapNonAppData (SslHandler.java:927)\nat io.netty.handler.ssl.SslHandler.unwrap (SslHandler.java:1409)\nat io.netty.handler.ssl.SslHandler.decodeNonJdkCompatible (SslHandler.java:1247)\nat io.netty.handler.ssl.SslHandler.decode (SslHandler.java:1287)\nat io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection (ByteToMessageDecoder.java:510)\nat io.netty.handler.codec.ByteToMessageDecoder.callDecode (ByteToMessageDecoder.java:449)\nat io.netty.handler.codec.ByteToMessageDecoder.channelRead (ByteToMessageDecoder.java:279)\nat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead (AbstractChannelHandlerContext.java:379)\nat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead (AbstractChannelHandlerContext.java:365)\nat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead (AbstractChannelHandlerContext.java:357)\nat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead (DefaultChannelPipeline.java:1410)\nat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead (AbstractChannelHandlerContext.java:379)\nat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead (AbstractChannelHandlerContext.java:365)\nat io.netty.channel.DefaultChannelPipeline.fireChannelRead (DefaultChannelPipeline.java:919)\nat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read (AbstractNioByteChannel.java:166)\nat io.netty.channel.nio.NioEventLoop.processSelectedKey (NioEventLoop.java:722)\nat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized (NioEventLoop.java:658)\nat io.netty.channel.nio.NioEventLoop.processSelectedKeys (NioEventLoop.java:584)\nat io.netty.channel.nio.NioEventLoop.run (NioEventLoop.java:496)\nat io.netty.util.concurrent.SingleThreadEventExecutor$4.run (SingleThreadEventExecutor.java:997)\nat io.netty.util.internal.ThreadExecutorMap$2.run (ThreadExecutorMap.java:74)\nat io.netty.util.concurrent.FastThreadLocalRunnable.run (FastThreadLocalRunnable.java:30)\nat java.lang.Thread.run (Thread.java:748)\nCaused by: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target</p>\n</blockquote>\n<p>I am using java 8 maven version 3.8.5, my pom is using:</p>\n<pre><code>         &lt;azure.functions.maven.plugin.version&gt;1.20.0&lt;/azure.functions.maven.plugin.version&gt;\n    &lt;azure.functions.java.library.version&gt;2.1.0&lt;/azure.functions.java.library.version&gt;\n\n   &lt;dependency&gt;\n  &lt;groupId&gt;com.azure&lt;/groupId&gt;\n  &lt;artifactId&gt;azure-sdk-bom&lt;/artifactId&gt;\n  &lt;version&gt;1.2.5&lt;/version&gt;\n  &lt;type&gt;pom&lt;/type&gt;\n  &lt;scope&gt;import&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Any help on this issue would be appreciated</p>\n"},{"tags":["java","recursion"],"comments":[{"owner":{"account_id":26377,"reputation":352197,"user_id":68587,"accept_rate":95,"display_name":"John Kugelman"},"score":1,"creation_date":1666886581,"post_id":74224956,"comment_id":131046484,"body_markdown":"What result are you getting? Are you seeing a `java.lang.StackOverflowError`?","body":"What result are you getting? Are you seeing a <code>java.lang.StackOverflowError</code>?"},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1666886593,"post_id":74224956,"comment_id":131046489,"body_markdown":"First of all can you describe what your code is intended to do? Secondly, describe the cases when the code fails.","body":"First of all can you describe what your code is intended to do? Secondly, describe the cases when the code fails."},{"owner":{"account_id":2450346,"reputation":5181,"user_id":2136795,"display_name":"Gyro Gearless"},"score":0,"creation_date":1666887516,"post_id":74224956,"comment_id":131046797,"body_markdown":"&quot;doesn&#39;t work&quot; is the worst possible description of a problem","body":"&quot;doesn&#39;t work&quot; is the worst possible description of a problem"}],"answers":[{"tags":[],"owner":{"account_id":23057660,"reputation":477,"user_id":17173476,"display_name":"Vinz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1666887415,"creation_date":1666887415,"answer_id":74225209,"question_id":74224956,"body_markdown":"What you are experiencing, is a `StackOverflowError`. You can read more on what causes them and the default stack size etc. [here][1] and [ here][2].\r\n\r\nIn your case, simply increasing the stack size will allow you to run this with the inputs 4, 1. You can achieve this by running your program as follows:\r\n\r\n```\r\njavac Recursion.java\r\njava -Xss8m Recursion.java\r\n```\r\n\r\nThe `-Xss` Flag sets a higher stack size, and you should get the expected output 65533 after a while.\r\n\r\n  [1]: https://stackoverflow.com/a/214758/17173476\r\n  [2]: https://stackoverflow.com/questions/3700459/how-to-increase-the-java-stack-size","title":"Ackermann function won&#39;t work when m &gt;= 4","body":"<p>What you are experiencing, is a <code>StackOverflowError</code>. You can read more on what causes them and the default stack size etc. <a href=\"https://stackoverflow.com/a/214758/17173476\">here</a> and <a href=\"https://stackoverflow.com/questions/3700459/how-to-increase-the-java-stack-size\"> here</a>.</p>\n<p>In your case, simply increasing the stack size will allow you to run this with the inputs 4, 1. You can achieve this by running your program as follows:</p>\n<pre><code>javac Recursion.java\njava -Xss8m Recursion.java\n</code></pre>\n<p>The <code>-Xss</code> Flag sets a higher stack size, and you should get the expected output 65533 after a while.</p>\n"}],"owner":{"display_name":"user20350658"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74225209,"answer_count":1,"score":0,"last_activity_date":1666887415,"creation_date":1666886312,"question_id":74224956,"body_markdown":"**Wikipedia:** [Ackermann function](https://en.wikipedia.org/wiki/Ackermann_function)\r\n\r\nI&#39;m writing this program for my computer science class and I don&#39;t know why it doesn&#39;t work. too be clear, the program works when m &lt;= 3. \r\n\r\nI&#39;ve checked that when m = 4 and n = 1, the result should be 65533 so the variable isn&#39;t too small. I&#39;ve tried using int, long, and double.\r\n\r\n\r\n```\r\npublic class Recursion {\r\n\r\n    public static void main(String[] args) {\r\n        System.out.print(ack(3, 8));\r\n    }\r\n\r\n    public static long ack(long m, long n) {\r\n        if (m == 0) {\r\n            return n + 1;\r\n        } else if (m &gt; 0 &amp;&amp; n == 0) {\r\n            return ack(m - 1, 1);\r\n        }\r\n        return ack(m - 1, ack(m, n - 1));\r\n    }\r\n}\r\n```\r\n","title":"Ackermann function won&#39;t work when m &gt;= 4","body":"<p><strong>Wikipedia:</strong> <a href=\"https://en.wikipedia.org/wiki/Ackermann_function\" rel=\"nofollow noreferrer\">Ackermann function</a></p>\n<p>I'm writing this program for my computer science class and I don't know why it doesn't work. too be clear, the program works when m &lt;= 3.</p>\n<p>I've checked that when m = 4 and n = 1, the result should be 65533 so the variable isn't too small. I've tried using int, long, and double.</p>\n<pre><code>public class Recursion {\n\n    public static void main(String[] args) {\n        System.out.print(ack(3, 8));\n    }\n\n    public static long ack(long m, long n) {\n        if (m == 0) {\n            return n + 1;\n        } else if (m &gt; 0 &amp;&amp; n == 0) {\n            return ack(m - 1, 1);\n        }\n        return ack(m - 1, ack(m, n - 1));\n    }\n}\n</code></pre>\n"},{"tags":["java","javafx","fxml"],"comments":[{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":1,"creation_date":1666890043,"post_id":74225184,"comment_id":131047628,"body_markdown":"You need to actually create a new pane on every iteration of the loop, instead of repeatedly adding the same pane to `articleInfoPane`. Just create the pane in code, in the loop, instead of in FXML.","body":"You need to actually create a new pane on every iteration of the loop, instead of repeatedly adding the same pane to <code>articleInfoPane</code>. Just create the pane in code, in the loop, instead of in FXML."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":1,"creation_date":1666890095,"post_id":74225184,"comment_id":131047644,"body_markdown":"Off-topic, but consider using a `Label` (which can be styled) instead of a `Text` inside a `Pane`.","body":"Off-topic, but consider using a <code>Label</code> (which can be styled) instead of a <code>Text</code> inside a <code>Pane</code>."}],"owner":{"account_id":16969303,"reputation":423,"user_id":12274354,"display_name":"Moemen Hussein"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1666887304,"creation_date":1666887304,"question_id":74225184,"body_markdown":"So I have a HashMap that has a size of let&#39;s say 5. So what I am trying to do is to add as many panes as the same size of the HashMap. \r\n\r\nI already have a Pane (aNewPane) defined in my .FXML file, that&#39;s nested in a VBox called &quot;articleInfoBox&quot;.\r\n\r\nSo when I am trying to make more panes based on the size of my HashMap im getting this error:\r\n```\r\n/C:/Users/Moeme/Documents/School/HsLeiden/2de%20jaars/IPSEN2/IPSEN2-FE/target/classes/fxml/article.fxml\r\n\r\n\tat javafx.fxml@18.0.1/javafx.fxml.FXMLLoader.constructLoadException(FXMLLoader.java:2707)\r\n\tat javafx.fxml@18.0.1/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2685)\r\n\tat javafx.fxml@18.0.1/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2548)\r\n\tat javafx.fxml@18.0.1/javafx.fxml.FXMLLoader.load(FXMLLoader.java:2516)\r\n\tat Controller.NavigationSceneController.openArticlePage(NavigationSceneController.java:51)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:577)\r\n\tat com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:77)\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:577)\r\n\tat javafx.base@18.0.1/com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:275)\r\n\tat javafx.fxml@18.0.1/com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84)\r\n\tat javafx.fxml@18.0.1/javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1854)\r\n\tat javafx.fxml@18.0.1/javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1724)\r\n\tat javafx.base@18.0.1/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)\r\n\tat javafx.base@18.0.1/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:234)\r\n\tat javafx.base@18.0.1/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)\r\n\tat javafx.base@18.0.1/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)\r\n\tat javafx.base@18.0.1/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)\r\n\tat javafx.base@18.0.1/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\r\n\tat javafx.base@18.0.1/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\r\n\tat javafx.base@18.0.1/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\r\n\tat javafx.base@18.0.1/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\r\n\tat javafx.base@18.0.1/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\r\n\tat javafx.base@18.0.1/com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)\r\n\tat javafx.base@18.0.1/com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49)\r\n\tat javafx.base@18.0.1/javafx.event.Event.fireEvent(Event.java:198)\r\n\tat javafx.graphics@18.0.1/javafx.scene.Node.fireEvent(Node.java:8797)\r\n\tat javafx.controls@18.0.1/javafx.scene.control.Button.fire(Button.java:203)\r\n\tat javafx.controls@18.0.1/com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:208)\r\n\tat javafx.controls@18.0.1/com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274)\r\n\tat javafx.base@18.0.1/com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247)\r\n\tat javafx.base@18.0.1/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80)\r\n\tat javafx.base@18.0.1/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:234)\r\n\tat javafx.base@18.0.1/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)\r\n\tat javafx.base@18.0.1/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)\r\n\tat javafx.base@18.0.1/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)\r\n\tat javafx.base@18.0.1/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\r\n\tat javafx.base@18.0.1/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\r\n\tat javafx.base@18.0.1/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\r\n\tat javafx.base@18.0.1/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\r\n\tat javafx.base@18.0.1/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\r\n\tat javafx.base@18.0.1/com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)\r\n\tat javafx.base@18.0.1/com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)\r\n\tat javafx.base@18.0.1/javafx.event.Event.fireEvent(Event.java:198)\r\n\tat javafx.graphics@18.0.1/javafx.scene.Scene$MouseHandler.process(Scene.java:3881)\r\n\tat javafx.graphics@18.0.1/javafx.scene.Scene.processMouseEvent(Scene.java:1874)\r\n\tat javafx.graphics@18.0.1/javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2607)\r\n\tat javafx.graphics@18.0.1/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411)\r\n\tat javafx.graphics@18.0.1/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301)\r\n\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\r\n\tat javafx.graphics@18.0.1/com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450)\r\n\tat javafx.graphics@18.0.1/com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424)\r\n\tat javafx.graphics@18.0.1/com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449)\r\n\tat javafx.graphics@18.0.1/com.sun.glass.ui.View.handleMouseEvent(View.java:551)\r\n\tat javafx.graphics@18.0.1/com.sun.glass.ui.View.notifyMouse(View.java:937)\r\n\tat javafx.graphics@18.0.1/com.sun.glass.ui.win.WinApplication._runLoop(Native Method)\r\n\tat javafx.graphics@18.0.1/com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:184)\r\n\tat java.base/java.lang.Thread.run(Thread.java:833)\r\nCaused by: java.lang.IllegalArgumentException: Children: duplicate children added: parent = VBox[id=articleInfoPane]\r\n\tat javafx.graphics@18.0.1/javafx.scene.Parent$3.onProposedChange(Parent.java:561)\r\n\tat javafx.base@18.0.1/com.sun.javafx.collections.VetoableListDecorator.add(VetoableListDecorator.java:205)\r\n\tat Controller.ArticleController.getArticles(ArticleController.java:92)\r\n\tat Controller.ArticleController.initialize(ArticleController.java:47)\r\n\tat javafx.fxml@18.0.1/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2655)\r\n\t... 57 more\r\n\r\n```\r\n\r\nThis is how I initialise the FXML attritbutes:\r\n```\r\n@FXML private VBox articleInfoPane = new VBox();\r\n@FXML private Pane aNewPane;\r\n```\r\n\r\n\r\nThe code that&#39;s trying to make a new pane is:\r\n```\r\nfor (int a = 0; a &lt; AllArticleItems.size(); a++){\r\n            Text text = new Text();\r\n            text.setText(&quot;some text&quot;);\r\n            aNewPane.getChildren().add(text);\r\n            articleInfoBox.getChildren().add(aNewPane);\r\n        }\r\n```\r\n\r\nThe FXML:\r\n```\r\n&lt;VBox fx:id=&quot;articleInfoPane&quot; layoutX=&quot;65.0&quot; layoutY=&quot;183.0&quot; prefHeight=&quot;200.0&quot; prefWidth=&quot;990.0&quot;&gt;\r\n         &lt;children&gt;\r\n            &lt;Pane fx:id=&quot;aNewPane&quot; prefHeight=&quot;74.0&quot; prefWidth=&quot;975.0&quot; style=&quot;-fx-background-color: white; -fx-background-radius: 8;&quot;&gt;\r\n\r\n            &lt;/Pane&gt;\r\n         &lt;/children&gt;\r\n      &lt;/VBox&gt;\r\n```\r\n\r\n","title":"JavaFX VBox children duplicates","body":"<p>So I have a HashMap that has a size of let's say 5. So what I am trying to do is to add as many panes as the same size of the HashMap.</p>\n<p>I already have a Pane (aNewPane) defined in my .FXML file, that's nested in a VBox called &quot;articleInfoBox&quot;.</p>\n<p>So when I am trying to make more panes based on the size of my HashMap im getting this error:</p>\n<pre><code>/C:/Users/Moeme/Documents/School/HsLeiden/2de%20jaars/IPSEN2/IPSEN2-FE/target/classes/fxml/article.fxml\n\n    at javafx.fxml@18.0.1/javafx.fxml.FXMLLoader.constructLoadException(FXMLLoader.java:2707)\n    at javafx.fxml@18.0.1/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2685)\n    at javafx.fxml@18.0.1/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2548)\n    at javafx.fxml@18.0.1/javafx.fxml.FXMLLoader.load(FXMLLoader.java:2516)\n    at Controller.NavigationSceneController.openArticlePage(NavigationSceneController.java:51)\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:577)\n    at com.sun.javafx.reflect.Trampoline.invoke(MethodUtil.java:77)\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:577)\n    at javafx.base@18.0.1/com.sun.javafx.reflect.MethodUtil.invoke(MethodUtil.java:275)\n    at javafx.fxml@18.0.1/com.sun.javafx.fxml.MethodHelper.invoke(MethodHelper.java:84)\n    at javafx.fxml@18.0.1/javafx.fxml.FXMLLoader$MethodHandler.invoke(FXMLLoader.java:1854)\n    at javafx.fxml@18.0.1/javafx.fxml.FXMLLoader$ControllerMethodEventHandler.handle(FXMLLoader.java:1724)\n    at javafx.base@18.0.1/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:86)\n    at javafx.base@18.0.1/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:234)\n    at javafx.base@18.0.1/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)\n    at javafx.base@18.0.1/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)\n    at javafx.base@18.0.1/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)\n    at javafx.base@18.0.1/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\n    at javafx.base@18.0.1/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\n    at javafx.base@18.0.1/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\n    at javafx.base@18.0.1/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\n    at javafx.base@18.0.1/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\n    at javafx.base@18.0.1/com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)\n    at javafx.base@18.0.1/com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:49)\n    at javafx.base@18.0.1/javafx.event.Event.fireEvent(Event.java:198)\n    at javafx.graphics@18.0.1/javafx.scene.Node.fireEvent(Node.java:8797)\n    at javafx.controls@18.0.1/javafx.scene.control.Button.fire(Button.java:203)\n    at javafx.controls@18.0.1/com.sun.javafx.scene.control.behavior.ButtonBehavior.mouseReleased(ButtonBehavior.java:208)\n    at javafx.controls@18.0.1/com.sun.javafx.scene.control.inputmap.InputMap.handle(InputMap.java:274)\n    at javafx.base@18.0.1/com.sun.javafx.event.CompositeEventHandler$NormalEventHandlerRecord.handleBubblingEvent(CompositeEventHandler.java:247)\n    at javafx.base@18.0.1/com.sun.javafx.event.CompositeEventHandler.dispatchBubblingEvent(CompositeEventHandler.java:80)\n    at javafx.base@18.0.1/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:234)\n    at javafx.base@18.0.1/com.sun.javafx.event.EventHandlerManager.dispatchBubblingEvent(EventHandlerManager.java:191)\n    at javafx.base@18.0.1/com.sun.javafx.event.CompositeEventDispatcher.dispatchBubblingEvent(CompositeEventDispatcher.java:59)\n    at javafx.base@18.0.1/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:58)\n    at javafx.base@18.0.1/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\n    at javafx.base@18.0.1/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\n    at javafx.base@18.0.1/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\n    at javafx.base@18.0.1/com.sun.javafx.event.BasicEventDispatcher.dispatchEvent(BasicEventDispatcher.java:56)\n    at javafx.base@18.0.1/com.sun.javafx.event.EventDispatchChainImpl.dispatchEvent(EventDispatchChainImpl.java:114)\n    at javafx.base@18.0.1/com.sun.javafx.event.EventUtil.fireEventImpl(EventUtil.java:74)\n    at javafx.base@18.0.1/com.sun.javafx.event.EventUtil.fireEvent(EventUtil.java:54)\n    at javafx.base@18.0.1/javafx.event.Event.fireEvent(Event.java:198)\n    at javafx.graphics@18.0.1/javafx.scene.Scene$MouseHandler.process(Scene.java:3881)\n    at javafx.graphics@18.0.1/javafx.scene.Scene.processMouseEvent(Scene.java:1874)\n    at javafx.graphics@18.0.1/javafx.scene.Scene$ScenePeerListener.mouseEvent(Scene.java:2607)\n    at javafx.graphics@18.0.1/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:411)\n    at javafx.graphics@18.0.1/com.sun.javafx.tk.quantum.GlassViewEventHandler$MouseEventNotification.run(GlassViewEventHandler.java:301)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\n    at javafx.graphics@18.0.1/com.sun.javafx.tk.quantum.GlassViewEventHandler.lambda$handleMouseEvent$2(GlassViewEventHandler.java:450)\n    at javafx.graphics@18.0.1/com.sun.javafx.tk.quantum.QuantumToolkit.runWithoutRenderLock(QuantumToolkit.java:424)\n    at javafx.graphics@18.0.1/com.sun.javafx.tk.quantum.GlassViewEventHandler.handleMouseEvent(GlassViewEventHandler.java:449)\n    at javafx.graphics@18.0.1/com.sun.glass.ui.View.handleMouseEvent(View.java:551)\n    at javafx.graphics@18.0.1/com.sun.glass.ui.View.notifyMouse(View.java:937)\n    at javafx.graphics@18.0.1/com.sun.glass.ui.win.WinApplication._runLoop(Native Method)\n    at javafx.graphics@18.0.1/com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:184)\n    at java.base/java.lang.Thread.run(Thread.java:833)\nCaused by: java.lang.IllegalArgumentException: Children: duplicate children added: parent = VBox[id=articleInfoPane]\n    at javafx.graphics@18.0.1/javafx.scene.Parent$3.onProposedChange(Parent.java:561)\n    at javafx.base@18.0.1/com.sun.javafx.collections.VetoableListDecorator.add(VetoableListDecorator.java:205)\n    at Controller.ArticleController.getArticles(ArticleController.java:92)\n    at Controller.ArticleController.initialize(ArticleController.java:47)\n    at javafx.fxml@18.0.1/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2655)\n    ... 57 more\n\n</code></pre>\n<p>This is how I initialise the FXML attritbutes:</p>\n<pre><code>@FXML private VBox articleInfoPane = new VBox();\n@FXML private Pane aNewPane;\n</code></pre>\n<p>The code that's trying to make a new pane is:</p>\n<pre><code>for (int a = 0; a &lt; AllArticleItems.size(); a++){\n            Text text = new Text();\n            text.setText(&quot;some text&quot;);\n            aNewPane.getChildren().add(text);\n            articleInfoBox.getChildren().add(aNewPane);\n        }\n</code></pre>\n<p>The FXML:</p>\n<pre><code>&lt;VBox fx:id=&quot;articleInfoPane&quot; layoutX=&quot;65.0&quot; layoutY=&quot;183.0&quot; prefHeight=&quot;200.0&quot; prefWidth=&quot;990.0&quot;&gt;\n         &lt;children&gt;\n            &lt;Pane fx:id=&quot;aNewPane&quot; prefHeight=&quot;74.0&quot; prefWidth=&quot;975.0&quot; style=&quot;-fx-background-color: white; -fx-background-radius: 8;&quot;&gt;\n\n            &lt;/Pane&gt;\n         &lt;/children&gt;\n      &lt;/VBox&gt;\n</code></pre>\n"},{"tags":["java","servlets","file-upload","servletcontextlistener"],"comments":[{"owner":{"account_id":45842,"reputation":13608,"user_id":135294,"display_name":"cjstehno"},"score":1,"creation_date":1666887747,"post_id":74225163,"comment_id":131046892,"body_markdown":"You are probably missing a dependency of one of those jars. Does your tutorial use a build tool like maven or gradle? If not, it might be good to find one that does... otherwise you will have to look at each of those projects and determine which other jars you need to add. That being said I would think that missing class would be in the servlet-api.jar file - generally it&#39;s in the `javax.servlet:javax.servlet-api:&lt;version&gt;` artifact.","body":"You are probably missing a dependency of one of those jars. Does your tutorial use a build tool like maven or gradle? If not, it might be good to find one that does... otherwise you will have to look at each of those projects and determine which other jars you need to add. That being said I would think that missing class would be in the servlet-api.jar file - generally it&#39;s in the <code>javax.servlet:javax.servlet-api:&lt;version&gt;</code> artifact."},{"owner":{"account_id":26749411,"reputation":21,"user_id":20349024,"display_name":"K Yassin"},"score":0,"creation_date":1667047287,"post_id":74225163,"comment_id":131080720,"body_markdown":"You&#39;re right. I have added ( javax.servlet-3.0.jar ) and replaced jakarta with javax and every thing is working fine. And I&#39;m going to follow your advice of using a build tool. Thank you very much.","body":"You&#39;re right. I have added ( javax.servlet-3.0.jar ) and replaced jakarta with javax and every thing is working fine. And I&#39;m going to follow your advice of using a build tool. Thank you very much."}],"owner":{"account_id":26749411,"reputation":21,"user_id":20349024,"display_name":"K Yassin"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3376,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1666887242,"creation_date":1666887242,"question_id":74225163,"body_markdown":"The code below is for servlet file-upload, I got it from a servlet tutorial but when I try to compile it, this error is thrown -&gt;  \r\n```\r\nUploadServlet.java:28: error: cannot access HttpServletRequest\r\n        isMultipart = ServletFileUpload.isMultipartContent(req);\r\n                                       ^\r\n  class file for javax.servlet.http.HttpServletRequest not found\r\nUploadServlet.java:49: error: no suitable method found for parseRequest(jakarta.servlet.http.HttpServletRequest)\r\n            List fileItems = upload.parseRequest(req);\r\n                                   ^\r\n    method FileUploadBase.parseRequest(RequestContext) is not applicable\r\n      (argument mismatch; jakarta.servlet.http.HttpServletRequest cannot be converted to RequestContext)\r\n    method ServletFileUpload.parseRequest(javax.servlet.http.HttpServletRequest) is not applicable\r\n      (argument mismatch; jakarta.servlet.http.HttpServletRequest cannot be converted to javax.servlet.http.HttpServletRequest)\r\n2 errors\r\n\r\n```\r\n\r\n---\r\n\r\n---\r\n\r\n```\r\npackage fileUpload;\r\n\r\nimport jakarta.servlet.*;\r\nimport jakarta.servlet.http.*;\r\n\r\nimport org.apache.commons.fileupload.*;\r\nimport org.apache.commons.fileupload.disk.DiskFileItemFactory;\r\nimport org.apache.commons.fileupload.servlet.*;\r\n\r\nimport java.io.*;\r\nimport java.util.*;\r\n\r\npublic class UploadServlet extends HttpServlet {\r\n    private boolean isMultipart;\r\n    private String filePath;\r\n    private int maxFileSize=50 * 1024;\r\n    private int maxMemSize = 4 * 1024;\r\n    private File file;\r\n\r\n    @Override\r\n    public void init() throws ServletException {\r\n         filePath = getServletContext().getInitParameter(&quot;file-upload&quot;);\r\n    }\r\n\r\n    @Override\r\n    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\r\n\r\n        isMultipart = ServletFileUpload.isMultipartContent(req);\r\n        resp.setContentType(&quot;text/html&quot;);\r\n        PrintWriter out = resp.getWriter();\r\n        if (!isMultipart){\r\n            out.println(&quot;&lt;html&gt;&quot;);\r\n            out.println(&quot;&lt;head&gt;&quot;);\r\n            out.println(&quot;&lt;title&gt;Servlet Upload&lt;/title&gt;&quot;);\r\n            out.println(&quot;&lt;body&gt;&quot;);\r\n            out.println(&quot;&lt;p&gt; No file Uploaded. &lt;/p&gt;&quot;);\r\n            out.println(&quot;&lt;/body&gt;&quot;);\r\n            out.println(&quot;&lt;/head&gt;&quot;);\r\n            out.println(&quot;&lt;/html&gt;&quot;);\r\n            return;\r\n        }\r\n        DiskFileItemFactory factory = new DiskFileItemFactory();\r\n        factory.setSizeThreshold(maxMemSize);\r\n        factory.setRepository(new File(&quot;/user/temp&quot;));\r\n        ServletFileUpload upload = new ServletFileUpload(factory);\r\n        upload.setSizeMax(maxFileSize);\r\n\r\n        try {\r\n            List fileItems = upload.parseRequest(req);\r\n            Iterator i = fileItems.iterator();\r\n\r\n            out.println(&quot;&lt;html&gt;&quot;);\r\n            out.println(&quot;&lt;head&gt;&quot;);\r\n            out.println(&quot;&lt;title&gt;Servlet Upload&lt;/title&gt;&quot;);\r\n            out.println(&quot;&lt;body&gt;&quot;);\r\n\r\n            while (i.hasNext()){\r\n                FileItem fi = (FileItem) i.next();\r\n                if (!fi.isFormField()){\r\n                    String fieldName = fi.getFieldName();\r\n                    String fileName = fi.getName();\r\n                    String contentType = fi.getContentType();\r\n                    boolean isInMemory = fi.isInMemory();\r\n                    long sizeInByte = fi.getSize();\r\n\r\n                    if (fileName.lastIndexOf(&quot;\\\\&quot;) &gt;= 0){\r\n                        file = new File(filePath + fileName.substring(fileName.lastIndexOf(&quot;\\\\&quot;)));\r\n                    }else {\r\n                        file = new File(filePath + fileName.substring(fileName.lastIndexOf(&quot;\\\\&quot;)+1));\r\n                    }\r\n                    fi.write(file);\r\n                    out.println(&quot;Uplaoded FileName &quot;+ fileName+&quot;&lt;br/&gt;&quot;);\r\n                }\r\n            }\r\n            out.println(&quot;&lt;/body&gt;&quot;);\r\n            out.println(&quot;&lt;/html&gt;&quot;);\r\n        }\r\n        catch (FileUploadException e) { e.printStackTrace(); }\r\n        catch (Exception e){e.printStackTrace();}\r\n    }\r\n\r\n    @Override\r\n    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\r\n        throw new ServletException(&quot;Get method used with &quot;+getClass().getName()+&quot;: POST method required.&quot;);\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\nI have added all the following jar files in the classpath\r\n1. commons-fileupload-1.4.jar\r\n2. commons-io-2.11.0.jar\r\n3. jsp-api.jar\r\n4. servlet-api.jar\r\n\r\nI have also tried a different example from a different tutorial but still I got the same error. I have did all I can in four days but still I have failed.\r\nPlease, may someone help me.","title":"Class file for javax.servlet.http.HttpServletRequest not found, &quot;cannot access HttpServletRequest&quot;","body":"<p>The code below is for servlet file-upload, I got it from a servlet tutorial but when I try to compile it, this error is thrown -&gt;</p>\n<pre><code>UploadServlet.java:28: error: cannot access HttpServletRequest\n        isMultipart = ServletFileUpload.isMultipartContent(req);\n                                       ^\n  class file for javax.servlet.http.HttpServletRequest not found\nUploadServlet.java:49: error: no suitable method found for parseRequest(jakarta.servlet.http.HttpServletRequest)\n            List fileItems = upload.parseRequest(req);\n                                   ^\n    method FileUploadBase.parseRequest(RequestContext) is not applicable\n      (argument mismatch; jakarta.servlet.http.HttpServletRequest cannot be converted to RequestContext)\n    method ServletFileUpload.parseRequest(javax.servlet.http.HttpServletRequest) is not applicable\n      (argument mismatch; jakarta.servlet.http.HttpServletRequest cannot be converted to javax.servlet.http.HttpServletRequest)\n2 errors\n\n</code></pre>\n<hr />\n<hr />\n<pre><code>package fileUpload;\n\nimport jakarta.servlet.*;\nimport jakarta.servlet.http.*;\n\nimport org.apache.commons.fileupload.*;\nimport org.apache.commons.fileupload.disk.DiskFileItemFactory;\nimport org.apache.commons.fileupload.servlet.*;\n\nimport java.io.*;\nimport java.util.*;\n\npublic class UploadServlet extends HttpServlet {\n    private boolean isMultipart;\n    private String filePath;\n    private int maxFileSize=50 * 1024;\n    private int maxMemSize = 4 * 1024;\n    private File file;\n\n    @Override\n    public void init() throws ServletException {\n         filePath = getServletContext().getInitParameter(&quot;file-upload&quot;);\n    }\n\n    @Override\n    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n\n        isMultipart = ServletFileUpload.isMultipartContent(req);\n        resp.setContentType(&quot;text/html&quot;);\n        PrintWriter out = resp.getWriter();\n        if (!isMultipart){\n            out.println(&quot;&lt;html&gt;&quot;);\n            out.println(&quot;&lt;head&gt;&quot;);\n            out.println(&quot;&lt;title&gt;Servlet Upload&lt;/title&gt;&quot;);\n            out.println(&quot;&lt;body&gt;&quot;);\n            out.println(&quot;&lt;p&gt; No file Uploaded. &lt;/p&gt;&quot;);\n            out.println(&quot;&lt;/body&gt;&quot;);\n            out.println(&quot;&lt;/head&gt;&quot;);\n            out.println(&quot;&lt;/html&gt;&quot;);\n            return;\n        }\n        DiskFileItemFactory factory = new DiskFileItemFactory();\n        factory.setSizeThreshold(maxMemSize);\n        factory.setRepository(new File(&quot;/user/temp&quot;));\n        ServletFileUpload upload = new ServletFileUpload(factory);\n        upload.setSizeMax(maxFileSize);\n\n        try {\n            List fileItems = upload.parseRequest(req);\n            Iterator i = fileItems.iterator();\n\n            out.println(&quot;&lt;html&gt;&quot;);\n            out.println(&quot;&lt;head&gt;&quot;);\n            out.println(&quot;&lt;title&gt;Servlet Upload&lt;/title&gt;&quot;);\n            out.println(&quot;&lt;body&gt;&quot;);\n\n            while (i.hasNext()){\n                FileItem fi = (FileItem) i.next();\n                if (!fi.isFormField()){\n                    String fieldName = fi.getFieldName();\n                    String fileName = fi.getName();\n                    String contentType = fi.getContentType();\n                    boolean isInMemory = fi.isInMemory();\n                    long sizeInByte = fi.getSize();\n\n                    if (fileName.lastIndexOf(&quot;\\\\&quot;) &gt;= 0){\n                        file = new File(filePath + fileName.substring(fileName.lastIndexOf(&quot;\\\\&quot;)));\n                    }else {\n                        file = new File(filePath + fileName.substring(fileName.lastIndexOf(&quot;\\\\&quot;)+1));\n                    }\n                    fi.write(file);\n                    out.println(&quot;Uplaoded FileName &quot;+ fileName+&quot;&lt;br/&gt;&quot;);\n                }\n            }\n            out.println(&quot;&lt;/body&gt;&quot;);\n            out.println(&quot;&lt;/html&gt;&quot;);\n        }\n        catch (FileUploadException e) { e.printStackTrace(); }\n        catch (Exception e){e.printStackTrace();}\n    }\n\n    @Override\n    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n        throw new ServletException(&quot;Get method used with &quot;+getClass().getName()+&quot;: POST method required.&quot;);\n    }\n}\n\n</code></pre>\n<p>I have added all the following jar files in the classpath</p>\n<ol>\n<li>commons-fileupload-1.4.jar</li>\n<li>commons-io-2.11.0.jar</li>\n<li>jsp-api.jar</li>\n<li>servlet-api.jar</li>\n</ol>\n<p>I have also tried a different example from a different tutorial but still I got the same error. I have did all I can in four days but still I have failed.\nPlease, may someone help me.</p>\n"},{"tags":["java","spring","freemarker"],"answers":[{"tags":[],"owner":{"account_id":12204971,"reputation":1227,"user_id":8908318,"accept_rate":100,"display_name":"monamona"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1666887205,"creation_date":1666887205,"answer_id":74225157,"question_id":74222445,"body_markdown":"The problem lied in the `.equals()`\r\n\r\nI got confused because of the java context of my application. Freemarker treats Strings differently than Java, and the way to go is to use `==` to compare Strings.","title":"Apache Freemarker NonHashException: Expected a hash, but this has evaluated to a string","body":"<p>The problem lied in the <code>.equals()</code></p>\n<p>I got confused because of the java context of my application. Freemarker treats Strings differently than Java, and the way to go is to use <code>==</code> to compare Strings.</p>\n"}],"owner":{"account_id":12204971,"reputation":1227,"user_id":8908318,"accept_rate":100,"display_name":"monamona"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":484,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74225157,"answer_count":1,"score":0,"last_activity_date":1666887205,"creation_date":1666875488,"question_id":74222445,"body_markdown":"I want to build a search site with Spring and Apache Freemarker. I have a form, that contains some data about a previous search,  it&#39;s stored in a simple data class, like so:\r\n\r\n```java\r\nimport lombok.Data;\r\n\r\n@Data\r\npublic class TicketSearchForm {\r\n    private String status = &quot;ALL&quot;;\r\n    \r\n    //More fields...\r\n}\r\n\r\n```\r\n\r\nI wish to use that data, that is passed through the `Model` of my Spring Request, like so, to determine which value is the default on a select:\r\n\r\n```html\r\n&lt;select name=&quot;status&quot; id=&quot;status&quot; class=&quot;form-control select2&quot;&gt;\r\n                                        &lt;option value=&quot;ALL&quot; &lt;#if previousSearch.getStatus().equals(&quot;ALL&quot;)&gt;selected&lt;/#if&gt;&gt;Alle anzeigen&lt;/option&gt;\r\n                                        &lt;option value=&quot;OPEN&quot; &lt;#if previousSearch.status.equals(&quot;OPEN&quot;)&gt;selected&lt;/#if&gt;&gt;Offen&lt;/option&gt;\r\n                                        &lt;option value=&quot;DONE&quot; &lt;#if previousSearch.status.equals(&quot;DONE&quot;)&gt;selected&lt;/#if&gt;&gt;Geschlossen&lt;/option&gt;\r\n                                    &lt;/select&gt;\r\n```\r\n\r\nHowever, this is rewarded with the error\r\n\r\n```\r\nError executing FreeMarker template\r\n\r\nfreemarker.core.NonHashException: For &quot;.&quot; left-hand operand: Expected a hash, but this has evaluated to a string (wrapper: f.t.SimpleScalar):\r\n==&gt; previousSearch.status  [in template &quot;ticket/search.ftlh&quot; at line 22, column 66]\r\n\r\n----\r\nFTL stack trace (&quot;~&quot; means nesting-related):\r\n\t- Failed at: #if previousSearch.status.equals(&quot;ALL&quot;)  [in template &quot;ticket/search.ftlh&quot; in macro &quot;page_body&quot; at line 22, column 61]\r\n\t- Reached through: @page_body  [in template &quot;base.ftlh&quot; at line 86, column 9]\r\n\t- Reached through: #include &quot;/base.ftlh&quot;  [in template &quot;ticket/search.ftlh&quot; at line 1, column 1]\r\n----\r\n```\r\n\r\nThe `previousSearch` does contain all the data, I can display it as a String on the site, but I can&#39;t seem to access any of it&#39;s properties. Why is that, and how can I access them? I&#39;d rather not pass all of the values that I need as separate booleans through the Model, that just seems wrong to me.","title":"Apache Freemarker NonHashException: Expected a hash, but this has evaluated to a string","body":"<p>I want to build a search site with Spring and Apache Freemarker. I have a form, that contains some data about a previous search,  it's stored in a simple data class, like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import lombok.Data;\n\n@Data\npublic class TicketSearchForm {\n    private String status = &quot;ALL&quot;;\n    \n    //More fields...\n}\n\n</code></pre>\n<p>I wish to use that data, that is passed through the <code>Model</code> of my Spring Request, like so, to determine which value is the default on a select:</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;select name=&quot;status&quot; id=&quot;status&quot; class=&quot;form-control select2&quot;&gt;\n                                        &lt;option value=&quot;ALL&quot; &lt;#if previousSearch.getStatus().equals(&quot;ALL&quot;)&gt;selected&lt;/#if&gt;&gt;Alle anzeigen&lt;/option&gt;\n                                        &lt;option value=&quot;OPEN&quot; &lt;#if previousSearch.status.equals(&quot;OPEN&quot;)&gt;selected&lt;/#if&gt;&gt;Offen&lt;/option&gt;\n                                        &lt;option value=&quot;DONE&quot; &lt;#if previousSearch.status.equals(&quot;DONE&quot;)&gt;selected&lt;/#if&gt;&gt;Geschlossen&lt;/option&gt;\n                                    &lt;/select&gt;\n</code></pre>\n<p>However, this is rewarded with the error</p>\n<pre><code>Error executing FreeMarker template\n\nfreemarker.core.NonHashException: For &quot;.&quot; left-hand operand: Expected a hash, but this has evaluated to a string (wrapper: f.t.SimpleScalar):\n==&gt; previousSearch.status  [in template &quot;ticket/search.ftlh&quot; at line 22, column 66]\n\n----\nFTL stack trace (&quot;~&quot; means nesting-related):\n    - Failed at: #if previousSearch.status.equals(&quot;ALL&quot;)  [in template &quot;ticket/search.ftlh&quot; in macro &quot;page_body&quot; at line 22, column 61]\n    - Reached through: @page_body  [in template &quot;base.ftlh&quot; at line 86, column 9]\n    - Reached through: #include &quot;/base.ftlh&quot;  [in template &quot;ticket/search.ftlh&quot; at line 1, column 1]\n----\n</code></pre>\n<p>The <code>previousSearch</code> does contain all the data, I can display it as a String on the site, but I can't seem to access any of it's properties. Why is that, and how can I access them? I'd rather not pass all of the values that I need as separate booleans through the Model, that just seems wrong to me.</p>\n"},{"tags":["java","google-cloud-platform","google-cloud-auth"],"owner":{"account_id":14639,"reputation":15102,"user_id":30341,"accept_rate":77,"display_name":"Aamir"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":173,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1666886923,"creation_date":1666705564,"question_id":74195096,"body_markdown":"I have an Api &amp; Services project in Google Cloud. In that project, I have set up some credentials. Inside the credentials screen, there are options available to specify the `Authorized JavaScript origins` and `Authorized redirect URIs`. \r\n\r\nI have specified one value each for these and it works fine. However, I want to dynamically add to these later on, so that there are more than one JavaScript origin and redirect URI. Is this somehow possible to do in Java? Can somebody point me to the documentation where it specifies how to modify an existing GCP project&#39;s Credentials?\r\n\r\nI can get an active `Project` object like following, but I can&#39;t seem to find the way to get or update the `Credentials` that are inside a project.\r\n\r\n```\r\nResourceManager resourceManager = ResourceManagerOptions.getDefaultInstance().getService();\r\nString projectId = &quot;my-unique-project-id&quot;;\r\nProject project = resourceManager.get(projectId);\r\nSystem.out.println(&quot;Got project &quot; + project.getProjectId() + &quot; from the server.&quot;);\r\n```","title":"Dynamically add javascript origin and redirect URI in GCP Api and Services Credentials","body":"<p>I have an Api &amp; Services project in Google Cloud. In that project, I have set up some credentials. Inside the credentials screen, there are options available to specify the <code>Authorized JavaScript origins</code> and <code>Authorized redirect URIs</code>.</p>\n<p>I have specified one value each for these and it works fine. However, I want to dynamically add to these later on, so that there are more than one JavaScript origin and redirect URI. Is this somehow possible to do in Java? Can somebody point me to the documentation where it specifies how to modify an existing GCP project's Credentials?</p>\n<p>I can get an active <code>Project</code> object like following, but I can't seem to find the way to get or update the <code>Credentials</code> that are inside a project.</p>\n<pre><code>ResourceManager resourceManager = ResourceManagerOptions.getDefaultInstance().getService();\nString projectId = &quot;my-unique-project-id&quot;;\nProject project = resourceManager.get(projectId);\nSystem.out.println(&quot;Got project &quot; + project.getProjectId() + &quot; from the server.&quot;);\n</code></pre>\n"},{"tags":["java","spring","spring-mvc","spring-boot","jakarta-ee"],"comments":[{"owner":{"account_id":12695174,"reputation":45207,"user_id":9223839,"display_name":"Joakim Danielson"},"score":0,"creation_date":1530857186,"post_id":51203893,"comment_id":89388910,"body_markdown":"It looks like your classpath isn&#39;t set-up correctly","body":"It looks like your classpath isn&#39;t set-up correctly"},{"owner":{"account_id":12174629,"reputation":101,"user_id":8888083,"display_name":"Abhishek"},"score":0,"creation_date":1530857601,"post_id":51203893,"comment_id":89389063,"body_markdown":"How can i fix it?","body":"How can i fix it?"},{"owner":{"account_id":12174629,"reputation":101,"user_id":8888083,"display_name":"Abhishek"},"score":0,"creation_date":1530858100,"post_id":51203893,"comment_id":89389259,"body_markdown":"ya but i use spring boot so it is adding all the dependancy jar into it !!!","body":"ya but i use spring boot so it is adding all the dependancy jar into it !!!"}],"answers":[{"tags":[],"owner":{"account_id":1663626,"reputation":61,"user_id":1531469,"display_name":"abchau"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1563527146,"creation_date":1563527146,"answer_id":57109075,"question_id":51203893,"body_markdown":"It might be a bit late but I encounted the same error recently on Windows and fixed it with a dirtly hack. I hope future people looking for the same question will find this useful for their problem.\r\n\r\nFirst of all, eclipse &quot;run&quot; your Spring Boot app in a different way. It does not do `java -jar foo.jar` but reference all classes and libraries directly i.e. `java -classpath xxx/target/classes:a.jar:b.jar...`. So soetimes running in eclipse will behave differently.\r\n\r\nI suppose you are running into the same situtation as I did which is you have a Spring Boot app and you want to package it as executable jar and you are referencing external dependencies and could not fix what went wrong inside those external dependencies.\r\n\r\nWhat I found out was that somewhere inside the external library I was using is generating a temporary file and reading it using Java&#39;s `ClassLoader` but Spring Boot&#39;s `LaunchedURLClassLoader` could not handle Windows&#39;s &quot;x:\\&quot; syntax\r\n\r\nIn my case, it was\r\n```\r\nURL findResource(name): C:\\foo\\bar.xml\r\n```\r\n\r\nSo the hack is to build your own `LaunchedURLClassLoader` and replace it in the executable jar. If you unpack the excutable jar, you will find `LaunchedURLClassLoader.class` under `org\\springframework\\boot\\loader`. The idea is to reaplce `C:\\foo\\bar.xml` to `file:///C:/foo/bar.xml` so Java ClassLoader will know how to deal with the file. \r\n\r\n```java\r\n...\r\n\r\npackage org.springframework.boot.loader;\r\n...\r\n\r\npublic class LaunchedURLClassLoader extends URLClassLoader {\r\n\r\n\t...\r\n\r\n\t@Override\r\n\tpublic URL findResource(String name) {\r\n\r\n        // This is where I added the dirty hack\r\n\t\tif (name.contains(&quot;:\\\\&quot;) &amp;&amp; !name.startsWith(&quot;file:///&quot;)) {\r\n\t\t\tSystem.out.println(&quot;URL findResource(name): &quot; + name); // just for you to debug\r\n\t\t\tname = &quot;file:///&quot; + name.replace(&quot;\\\\&quot;, &quot;/&quot;);\r\n\t\t\tSystem.out.println(&quot;URL findResource(name): Reaplced to &quot; + name); // just for you to debug\r\n\t\t}\r\n\t\t\r\n\t\tHandler.setUseFastConnectionExceptions(true);\r\n\t\ttry {\r\n\t\t\treturn super.findResource(name);\r\n\t\t}\r\n\t\tfinally {\r\n\t\t\tHandler.setUseFastConnectionExceptions(false);\r\n\t\t}\r\n\t}\r\n    ....\r\n}\r\n\r\n```","title":"java.lang.IllegalArgumentException: name","body":"<p>It might be a bit late but I encounted the same error recently on Windows and fixed it with a dirtly hack. I hope future people looking for the same question will find this useful for their problem.</p>\n\n<p>First of all, eclipse \"run\" your Spring Boot app in a different way. It does not do <code>java -jar foo.jar</code> but reference all classes and libraries directly i.e. <code>java -classpath xxx/target/classes:a.jar:b.jar...</code>. So soetimes running in eclipse will behave differently.</p>\n\n<p>I suppose you are running into the same situtation as I did which is you have a Spring Boot app and you want to package it as executable jar and you are referencing external dependencies and could not fix what went wrong inside those external dependencies.</p>\n\n<p>What I found out was that somewhere inside the external library I was using is generating a temporary file and reading it using Java's <code>ClassLoader</code> but Spring Boot's <code>LaunchedURLClassLoader</code> could not handle Windows's \"x:\\\" syntax</p>\n\n<p>In my case, it was</p>\n\n<pre><code>URL findResource(name): C:\\foo\\bar.xml\n</code></pre>\n\n<p>So the hack is to build your own <code>LaunchedURLClassLoader</code> and replace it in the executable jar. If you unpack the excutable jar, you will find <code>LaunchedURLClassLoader.class</code> under <code>org\\springframework\\boot\\loader</code>. The idea is to reaplce <code>C:\\foo\\bar.xml</code> to <code>file:///C:/foo/bar.xml</code> so Java ClassLoader will know how to deal with the file. </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>...\n\npackage org.springframework.boot.loader;\n...\n\npublic class LaunchedURLClassLoader extends URLClassLoader {\n\n    ...\n\n    @Override\n    public URL findResource(String name) {\n\n        // This is where I added the dirty hack\n        if (name.contains(\":\\\\\") &amp;&amp; !name.startsWith(\"file:///\")) {\n            System.out.println(\"URL findResource(name): \" + name); // just for you to debug\n            name = \"file:///\" + name.replace(\"\\\\\", \"/\");\n            System.out.println(\"URL findResource(name): Reaplced to \" + name); // just for you to debug\n        }\n\n        Handler.setUseFastConnectionExceptions(true);\n        try {\n            return super.findResource(name);\n        }\n        finally {\n            Handler.setUseFastConnectionExceptions(false);\n        }\n    }\n    ....\n}\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26751312,"reputation":1,"user_id":20350615,"display_name":"edmario"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666886737,"creation_date":1666886545,"answer_id":74225003,"question_id":51203893,"body_markdown":"I ran into this issue with JasperReport and I solved it when I opened the JRXML file in a text editor like (Notepad, notepad++). Inside this file there were several references to the &quot;name&quot; tag and, one of them, was referencing an image in a fixed path on the hard disk, causing, when I ran the application on another machine, directly through the jar  file, thows the error &quot;java.lang .IllegalArgumentException: name&quot;\r\n\r\nTo solve this, I removed a hard reference to image, like showed below:\r\n\r\n[&quot;D:\\\\Projetos\\\\REPORT\\\\Logo.png&quot;]\r\n\r\nand passed the image as an ImputStream in the report parameter to JRXML\r\n\r\n","title":"java.lang.IllegalArgumentException: name","body":"<p>I ran into this issue with JasperReport and I solved it when I opened the JRXML file in a text editor like (Notepad, notepad++). Inside this file there were several references to the &quot;name&quot; tag and, one of them, was referencing an image in a fixed path on the hard disk, causing, when I ran the application on another machine, directly through the jar  file, thows the error &quot;java.lang .IllegalArgumentException: name&quot;</p>\n<p>To solve this, I removed a hard reference to image, like showed below:</p>\n<p>[&quot;D:\\Projetos\\REPORT\\Logo.png&quot;]</p>\n<p>and passed the image as an ImputStream in the report parameter to JRXML</p>\n"}],"owner":{"account_id":12174629,"reputation":101,"user_id":8888083,"display_name":"Abhishek"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7662,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":2,"score":5,"last_activity_date":1666886737,"creation_date":1530856923,"question_id":51203893,"body_markdown":"    \r\n\r\n&quot;it work fine in eclipse but when i create jar and run it will give me this exception.This is non web spring boot application i am using which i supposed to run as standalone jar&quot;  \r\n\r\n  \r\n    \r\n    java.lang.IllegalArgumentException: name\r\n                        at sun.misc.URLClassPath$Loader.findResource(Unknown Source) ~[na:1.8.0_171]\r\n    \r\n                    \r\n    \r\n    at sun.misc.URLClassPath.findResource(Unknown Source) ~[na:1.8.0_171]\r\n                        at java.net.URLClassLoader$2.run(Unknown Source) ~[na:1.8.0_171]\r\n                        at java.net.URLClassLoader$2.run(Unknown Source) ~[na:1.8.0_171]\r\n                        at java.security.AccessController.doPrivileged(Native Method) ~[na:1.8.0_171]\r\n                        at java.net.URLClassLoader.findResource(Unknown Source) ~[na:1.8.0_171]\r\n                        at org.springframework.boot.loader.LaunchedURLClassLoader.findResource(LaunchedURLClassLoader.java:58) ~[extension-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\r\n                        at java.lang.ClassLoader.getResource(Unknown Source) ~[na:1.8.0_171]\r\n                        at java.net.URLClassLoader.getResourceAsStream(Unknown Source) ~[na:1.8.0_171]\r\n               ","title":"java.lang.IllegalArgumentException: name","body":"<p>\"it work fine in eclipse but when i create jar and run it will give me this exception.This is non web spring boot application i am using which i supposed to run as standalone jar\"  </p>\n\n<pre><code>java.lang.IllegalArgumentException: name\n                    at sun.misc.URLClassPath$Loader.findResource(Unknown Source) ~[na:1.8.0_171]\n\n\n\nat sun.misc.URLClassPath.findResource(Unknown Source) ~[na:1.8.0_171]\n                    at java.net.URLClassLoader$2.run(Unknown Source) ~[na:1.8.0_171]\n                    at java.net.URLClassLoader$2.run(Unknown Source) ~[na:1.8.0_171]\n                    at java.security.AccessController.doPrivileged(Native Method) ~[na:1.8.0_171]\n                    at java.net.URLClassLoader.findResource(Unknown Source) ~[na:1.8.0_171]\n                    at org.springframework.boot.loader.LaunchedURLClassLoader.findResource(LaunchedURLClassLoader.java:58) ~[extension-0.0.1-SNAPSHOT.jar:0.0.1-SNAPSHOT]\n                    at java.lang.ClassLoader.getResource(Unknown Source) ~[na:1.8.0_171]\n                    at java.net.URLClassLoader.getResourceAsStream(Unknown Source) ~[na:1.8.0_171]\n</code></pre>\n"},{"tags":["java","reflection","java-8","interface","mocking"],"comments":[{"owner":{"account_id":215690,"reputation":1398,"user_id":470477,"display_name":"Bill Horvath"},"score":0,"creation_date":1665440320,"post_id":73999625,"comment_id":130696717,"body_markdown":"Why does `thenReturn` not return anything?","body":"Why does <code>thenReturn</code> not return anything?"}],"answers":[{"comments":[{"owner":{"account_id":215690,"reputation":1398,"user_id":470477,"display_name":"Bill Horvath"},"score":0,"creation_date":1665446227,"post_id":74021703,"comment_id":130697667,"body_markdown":"If you wanted to get fancier, you could add a generic field for the class of the kind of object you&#39;re trying to mock, then check that against the class of the proxy and make sure one is assignable from the other. That might prevent some same-method-name-entirely-different-object-type problems.","body":"If you wanted to get fancier, you could add a generic field for the class of the kind of object you&#39;re trying to mock, then check that against the class of the proxy and make sure one is assignable from the other. That might prevent some same-method-name-entirely-different-object-type problems."},{"owner":{"account_id":3837342,"reputation":6111,"user_id":3181365,"accept_rate":70,"display_name":"learner"},"score":0,"creation_date":1666357470,"post_id":74021703,"comment_id":130924179,"body_markdown":"I am getting exception as `Exception in thread &quot;main&quot; java.lang.IllegalArgumentException: The supplied method signature isn&#39;t implemented in the proxy.` when I run the main method in TestApplication after using this code.","body":"I am getting exception as <code>Exception in thread &quot;main&quot; java.lang.IllegalArgumentException: The supplied method signature isn&#39;t implemented in the proxy.</code> when I run the main method in TestApplication after using this code."}],"tags":[],"owner":{"account_id":215690,"reputation":1398,"user_id":470477,"display_name":"Bill Horvath"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665518931,"creation_date":1665446045,"answer_id":74021703,"question_id":73999625,"body_markdown":"`InvocationHandler` is used to invoke a method signature against an object instance (proxy) that&#39;s instantiated in memory (or a class, if you&#39;re tapping a static method), not to support methods that aren&#39;t in the supplied proxy&#39;s class _at all_, which is how you&#39;ve implemented it here. That said, you can probably achieve what you&#39;re trying to do by holding the method signature you&#39;re trying to mock (as well as the value you want to return when the args match) in private variables. \r\n\r\nThis may work, with the proviso that I haven&#39;t done Java in a couple of years, so I may be a bit rusty:\r\n\r\n    class MyMock implements InvocationHandler {\r\n        private String methodName = null;\r\n        private Object[] supportedArgs = null;\r\n        private Object returnValue = null;\r\n    \r\n        @Override\r\n        public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {\r\n    \r\n            // If we don&#39;t know when this mock is supposed to be used, it&#39;s useless\r\n            assert this.methodName != null: &quot;when(method, args) hasn&#39;t been called against the mock yet!&quot;;\r\n    \r\n            // Note that both args and supportedArgs will be null if the method signature has no params\r\n            if (method.getName().equals(this.methodName) &amp;&amp; this.supportedArgs == args) {\r\n                return this.returnValue;\r\n            }\r\n            try {\r\n                return method.invoke(proxy, args);\r\n            }\r\n            catch (IllegalAccessException | InvocationTargetException innerException){\r\n                // The proxy didn&#39;t support the method either, so let&#39;s throw an IllegalArgumentException\r\n                throw new IllegalArgumentException(&quot;The supplied method signature isn&#39;t implemented in the proxy.&quot;);\r\n            }\r\n        }\r\n    \r\n        public MyMock when(String method, Object[] args) {\r\n            this.methodName = method;\r\n            this.supportedArgs = args;\r\n            return this;\r\n        }\r\n    \r\n        public void thenReturn(Object val) {\r\n            this.returnValue = val;\r\n        }\r\n    }","title":"Creating a mock library","body":"<p><code>InvocationHandler</code> is used to invoke a method signature against an object instance (proxy) that's instantiated in memory (or a class, if you're tapping a static method), not to support methods that aren't in the supplied proxy's class <em>at all</em>, which is how you've implemented it here. That said, you can probably achieve what you're trying to do by holding the method signature you're trying to mock (as well as the value you want to return when the args match) in private variables.</p>\n<p>This may work, with the proviso that I haven't done Java in a couple of years, so I may be a bit rusty:</p>\n<pre><code>class MyMock implements InvocationHandler {\n    private String methodName = null;\n    private Object[] supportedArgs = null;\n    private Object returnValue = null;\n\n    @Override\n    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {\n\n        // If we don't know when this mock is supposed to be used, it's useless\n        assert this.methodName != null: &quot;when(method, args) hasn't been called against the mock yet!&quot;;\n\n        // Note that both args and supportedArgs will be null if the method signature has no params\n        if (method.getName().equals(this.methodName) &amp;&amp; this.supportedArgs == args) {\n            return this.returnValue;\n        }\n        try {\n            return method.invoke(proxy, args);\n        }\n        catch (IllegalAccessException | InvocationTargetException innerException){\n            // The proxy didn't support the method either, so let's throw an IllegalArgumentException\n            throw new IllegalArgumentException(&quot;The supplied method signature isn't implemented in the proxy.&quot;);\n        }\n    }\n\n    public MyMock when(String method, Object[] args) {\n        this.methodName = method;\n        this.supportedArgs = args;\n        return this;\n    }\n\n    public void thenReturn(Object val) {\n        this.returnValue = val;\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3837342,"reputation":6111,"user_id":3181365,"accept_rate":70,"display_name":"learner"},"score":0,"creation_date":1666357000,"post_id":74026000,"comment_id":130924005,"body_markdown":"Can you please help me with how to do this in Java 8, I am not able to understand how to convert this in Java 8 version.","body":"Can you please help me with how to do this in Java 8, I am not able to understand how to convert this in Java 8 version."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1666360245,"post_id":74026000,"comment_id":130925224,"body_markdown":"Get familiar with [what records are](https://docs.oracle.com/en/java/javase/17/language/records.html) and you’ll understand, how the longer form of an ordinary class would look like. If you’re using IntelliJ, you can [let the software do the transformation](https://www.jetbrains.com/idea/guide/tips/convert-from-record/).","body":"Get familiar with <a href=\"https://docs.oracle.com/en/java/javase/17/language/records.html\" rel=\"nofollow noreferrer\">what records are</a> and you’ll understand, how the longer form of an ordinary class would look like. If you’re using IntelliJ, you can <a href=\"https://www.jetbrains.com/idea/guide/tips/convert-from-record/\" rel=\"nofollow noreferrer\">let the software do the transformation</a>."},{"owner":{"account_id":3837342,"reputation":6111,"user_id":3181365,"accept_rate":70,"display_name":"learner"},"score":0,"creation_date":1666882838,"post_id":74026000,"comment_id":131045001,"body_markdown":"I updated my post with the code I tried using Java 8 based on your answer, I am not able to find where I made the mistake, I am getting an exception with my converted code now.","body":"I updated my post with the code I tried using Java 8 based on your answer, I am not able to find where I made the mistake, I am getting an exception with my converted code now."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1666885144,"post_id":74026000,"comment_id":131045935,"body_markdown":"In your constructor of `Key` you have the loop `for (Object e : arguments) { this.arguments.add(e); }` which has no effect as `arguments` is the name of the field whereas the parameter you want to iterate is `arg` (note that good IDEs like Eclipse will warn you about this). But you can simplify the entire constructor to `Key(String name, Object... arg) { this.arguments = arg == null? Collections.emptyList(): Arrays.asList(arg); this.name = name; }`","body":"In your constructor of <code>Key</code> you have the loop <code>for (Object e : arguments) { this.arguments.add(e); }</code> which has no effect as <code>arguments</code> is the name of the field whereas the parameter you want to iterate is <code>arg</code> (note that good IDEs like Eclipse will warn you about this). But you can simplify the entire constructor to <code>Key(String name, Object... arg) { this.arguments = arg == null? Collections.emptyList(): Arrays.asList(arg); this.name = name; }</code>"}],"tags":[],"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"comment_count":4,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1665481715,"creation_date":1665481062,"answer_id":74026000,"question_id":73999625,"body_markdown":"You have to separate the *builder* logic from the object to build. The method `when` has to return something which remembers the arguments, so that the invocation of `thenReturn` still knows the context.\r\n\r\nFor example\r\n\r\n```java\r\npublic class MyMock implements InvocationHandler {\r\n    record Key(String name, List&lt;?&gt; arguments) {\r\n        Key { // stream().toList() creates an immutable list allowing null\r\n            arguments = arguments.stream().toList();\r\n        }\r\n        Key(String name, Object... arg) {\r\n            this(name, arg == null? List.of(): Arrays.stream(arg).toList());\r\n        }\r\n    }\r\n    final Map&lt;Key, Function&lt;Object[], Object&gt;&gt; rules = new HashMap&lt;&gt;();\r\n\r\n    @Override\r\n    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {\r\n        var rule = rules.get(new Key(method.getName(), args));\r\n        if(rule == null) throw new IllegalStateException(&quot;No matching rule&quot;);\r\n        return rule.apply(args);\r\n    }\r\n    public record Rule(MyMock mock, Key key) {\r\n        public void thenReturn(Object val) {\r\n            var existing = mock.rules.putIfAbsent(key, arg -&gt; val);\r\n            if(existing != null) throw new IllegalStateException(&quot;Rule already exist&quot;);\r\n        }\r\n        public void then(Function&lt;Object[], Object&gt; f) {\r\n            var existing = mock.rules.putIfAbsent(key, Objects.requireNonNull(f));\r\n            if(existing != null) throw new IllegalStateException(&quot;Rule already exist&quot;);\r\n        }\r\n    }\r\n    public Rule when(String method, Object... args) {\r\n        Key key = new Key(method, args);\r\n        if(rules.containsKey(key)) throw new IllegalStateException(&quot;Rule already exist&quot;);\r\n        return new Rule(this, key);\r\n    }\r\n}\r\n```\r\n\r\nThis is already capable of executing your example literally, but also supports something like\r\n\r\n```java\r\nMyMock m = new MyMock();\r\nCalcInterface ref = (CalcInterface) Proxy.newProxyInstance(\r\n        CalcInterface.class.getClassLoader(), new Class[]{CalcInterface.class}, m);\r\n\r\nm.when(&quot;add&quot;, 1,2).thenReturn(3);\r\nm.when(&quot;add&quot;, &quot;x&quot;,&quot;y&quot;).thenReturn(&quot;xy&quot;);\r\nAtomicInteger count = new AtomicInteger();\r\nm.when(&quot;getValue&quot;).then(arg -&gt; &quot;getValue invoked &quot; + count.incrementAndGet() + &quot; times&quot;);\r\n\r\nSystem.out.println(ref.add(1,2)); // prints 3\r\nSystem.out.println(ref.add(&quot;x&quot;,&quot;y&quot;)); // prints &quot;xy&quot;\r\nSystem.out.println(ref.getValue()); // prints getValue invoked 1 times\r\nSystem.out.println(ref.getValue()); // prints getValue invoked 2 times\r\n```\r\n\r\nNote that when you want to add support for rules beyond simple value matching, a hash lookup will not work anymore. In that case you have to resort to a data structure you have to search linearly for a match.\r\n\r\nThe example above uses newer Java features like `record` classes but it shouldn’t be too hard to rewrite it for previous Java versions if required.\r\n\r\n---\r\n\r\nIt’s also possible to redesign this code to use the real builder pattern, i.e. to use a builder to describe the configuration prior to creating the actual handler/mock instance. This allows the handler/mock to use an immutable state:\r\n\r\n```java\r\npublic class MyMock2 {\r\n    public static Builder builder() {\r\n        return new Builder();\r\n    }\r\n    public interface Rule {\r\n        Builder thenReturn(Object val);\r\n        Builder then(Function&lt;Object[], Object&gt; f);\r\n    }\r\n    public static class Builder {\r\n        final Map&lt;Key, Function&lt;Object[], Object&gt;&gt; rules = new HashMap&lt;&gt;();\r\n\r\n        public Rule when(String method, Object... args) {\r\n            Key key = new Key(method, args);\r\n            if(rules.containsKey(key))\r\n                throw new IllegalStateException(&quot;Rule already exist&quot;);\r\n            return new RuleImpl(this, key);\r\n        }\r\n        public &lt;T&gt; T build(Class&lt;T&gt; type) {\r\n            Map&lt;Key, Function&lt;Object[], Object&gt;&gt; rules = Map.copyOf(this.rules);\r\n            return type.cast(Proxy.newProxyInstance(type.getClassLoader(),\r\n                new Class[]{ type }, (proxy, method, args) -&gt; {\r\n                   var rule = rules.get(new Key(method.getName(), args));\r\n                   if(rule == null) throw new IllegalStateException(&quot;No matching rule&quot;);\r\n                   return rule.apply(args);\r\n                }));\r\n\r\n        }\r\n    }\r\n    record RuleImpl(MyMock2.Builder builder, Key key) implements Rule {\r\n        public Builder thenReturn(Object val) {\r\n            var existing = builder.rules.putIfAbsent(key, arg -&gt; val);\r\n            if(existing != null) throw new IllegalStateException(&quot;Rule already exist&quot;);\r\n            return builder;\r\n        }\r\n        public Builder then(Function&lt;Object[], Object&gt; f) {\r\n            var existing = builder.rules.putIfAbsent(key, Objects.requireNonNull(f));\r\n            if(existing != null) throw new IllegalStateException(&quot;Rule already exist&quot;);\r\n            return builder;\r\n        }\r\n    }\r\n    record Key(String name, List&lt;?&gt; arguments) {\r\n        Key { // stream().toList() createns an immutable list allowing null\r\n            arguments = arguments.stream().toList();\r\n        }\r\n        Key(String name, Object... arg) {\r\n            this(name, arg == null? List.of(): Arrays.stream(arg).toList());\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nwhich can be used like\r\n\r\n```java\r\nAtomicInteger count = new AtomicInteger();\r\nCalcInterface ref = MyMock2.builder()\r\n        .when(&quot;add&quot;, 1,2).thenReturn(3)\r\n        .when(&quot;add&quot;, &quot;x&quot;,&quot;y&quot;).thenReturn(&quot;xy&quot;)\r\n        .when(&quot;getValue&quot;)\r\n            .then(arg -&gt; &quot;getValue invoked &quot; + count.incrementAndGet() + &quot; times&quot;)\r\n        .build(CalcInterface.class);\r\n\r\nSystem.out.println(ref.add(1,2)); // prints 3\r\nSystem.out.println(ref.add(&quot;x&quot;,&quot;y&quot;)); // prints &quot;xy&quot;\r\nSystem.out.println(ref.getValue()); // prints getValue invoked 1 times\r\nSystem.out.println(ref.getValue()); // prints getValue invoked 2 times\r\n```\r\n\r\n","title":"Creating a mock library","body":"<p>You have to separate the <em>builder</em> logic from the object to build. The method <code>when</code> has to return something which remembers the arguments, so that the invocation of <code>thenReturn</code> still knows the context.</p>\n<p>For example</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyMock implements InvocationHandler {\n    record Key(String name, List&lt;?&gt; arguments) {\n        Key { // stream().toList() creates an immutable list allowing null\n            arguments = arguments.stream().toList();\n        }\n        Key(String name, Object... arg) {\n            this(name, arg == null? List.of(): Arrays.stream(arg).toList());\n        }\n    }\n    final Map&lt;Key, Function&lt;Object[], Object&gt;&gt; rules = new HashMap&lt;&gt;();\n\n    @Override\n    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {\n        var rule = rules.get(new Key(method.getName(), args));\n        if(rule == null) throw new IllegalStateException(&quot;No matching rule&quot;);\n        return rule.apply(args);\n    }\n    public record Rule(MyMock mock, Key key) {\n        public void thenReturn(Object val) {\n            var existing = mock.rules.putIfAbsent(key, arg -&gt; val);\n            if(existing != null) throw new IllegalStateException(&quot;Rule already exist&quot;);\n        }\n        public void then(Function&lt;Object[], Object&gt; f) {\n            var existing = mock.rules.putIfAbsent(key, Objects.requireNonNull(f));\n            if(existing != null) throw new IllegalStateException(&quot;Rule already exist&quot;);\n        }\n    }\n    public Rule when(String method, Object... args) {\n        Key key = new Key(method, args);\n        if(rules.containsKey(key)) throw new IllegalStateException(&quot;Rule already exist&quot;);\n        return new Rule(this, key);\n    }\n}\n</code></pre>\n<p>This is already capable of executing your example literally, but also supports something like</p>\n<pre class=\"lang-java prettyprint-override\"><code>MyMock m = new MyMock();\nCalcInterface ref = (CalcInterface) Proxy.newProxyInstance(\n        CalcInterface.class.getClassLoader(), new Class[]{CalcInterface.class}, m);\n\nm.when(&quot;add&quot;, 1,2).thenReturn(3);\nm.when(&quot;add&quot;, &quot;x&quot;,&quot;y&quot;).thenReturn(&quot;xy&quot;);\nAtomicInteger count = new AtomicInteger();\nm.when(&quot;getValue&quot;).then(arg -&gt; &quot;getValue invoked &quot; + count.incrementAndGet() + &quot; times&quot;);\n\nSystem.out.println(ref.add(1,2)); // prints 3\nSystem.out.println(ref.add(&quot;x&quot;,&quot;y&quot;)); // prints &quot;xy&quot;\nSystem.out.println(ref.getValue()); // prints getValue invoked 1 times\nSystem.out.println(ref.getValue()); // prints getValue invoked 2 times\n</code></pre>\n<p>Note that when you want to add support for rules beyond simple value matching, a hash lookup will not work anymore. In that case you have to resort to a data structure you have to search linearly for a match.</p>\n<p>The example above uses newer Java features like <code>record</code> classes but it shouldn’t be too hard to rewrite it for previous Java versions if required.</p>\n<hr />\n<p>It’s also possible to redesign this code to use the real builder pattern, i.e. to use a builder to describe the configuration prior to creating the actual handler/mock instance. This allows the handler/mock to use an immutable state:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyMock2 {\n    public static Builder builder() {\n        return new Builder();\n    }\n    public interface Rule {\n        Builder thenReturn(Object val);\n        Builder then(Function&lt;Object[], Object&gt; f);\n    }\n    public static class Builder {\n        final Map&lt;Key, Function&lt;Object[], Object&gt;&gt; rules = new HashMap&lt;&gt;();\n\n        public Rule when(String method, Object... args) {\n            Key key = new Key(method, args);\n            if(rules.containsKey(key))\n                throw new IllegalStateException(&quot;Rule already exist&quot;);\n            return new RuleImpl(this, key);\n        }\n        public &lt;T&gt; T build(Class&lt;T&gt; type) {\n            Map&lt;Key, Function&lt;Object[], Object&gt;&gt; rules = Map.copyOf(this.rules);\n            return type.cast(Proxy.newProxyInstance(type.getClassLoader(),\n                new Class[]{ type }, (proxy, method, args) -&gt; {\n                   var rule = rules.get(new Key(method.getName(), args));\n                   if(rule == null) throw new IllegalStateException(&quot;No matching rule&quot;);\n                   return rule.apply(args);\n                }));\n\n        }\n    }\n    record RuleImpl(MyMock2.Builder builder, Key key) implements Rule {\n        public Builder thenReturn(Object val) {\n            var existing = builder.rules.putIfAbsent(key, arg -&gt; val);\n            if(existing != null) throw new IllegalStateException(&quot;Rule already exist&quot;);\n            return builder;\n        }\n        public Builder then(Function&lt;Object[], Object&gt; f) {\n            var existing = builder.rules.putIfAbsent(key, Objects.requireNonNull(f));\n            if(existing != null) throw new IllegalStateException(&quot;Rule already exist&quot;);\n            return builder;\n        }\n    }\n    record Key(String name, List&lt;?&gt; arguments) {\n        Key { // stream().toList() createns an immutable list allowing null\n            arguments = arguments.stream().toList();\n        }\n        Key(String name, Object... arg) {\n            this(name, arg == null? List.of(): Arrays.stream(arg).toList());\n        }\n    }\n}\n</code></pre>\n<p>which can be used like</p>\n<pre class=\"lang-java prettyprint-override\"><code>AtomicInteger count = new AtomicInteger();\nCalcInterface ref = MyMock2.builder()\n        .when(&quot;add&quot;, 1,2).thenReturn(3)\n        .when(&quot;add&quot;, &quot;x&quot;,&quot;y&quot;).thenReturn(&quot;xy&quot;)\n        .when(&quot;getValue&quot;)\n            .then(arg -&gt; &quot;getValue invoked &quot; + count.incrementAndGet() + &quot; times&quot;)\n        .build(CalcInterface.class);\n\nSystem.out.println(ref.add(1,2)); // prints 3\nSystem.out.println(ref.add(&quot;x&quot;,&quot;y&quot;)); // prints &quot;xy&quot;\nSystem.out.println(ref.getValue()); // prints getValue invoked 1 times\nSystem.out.println(ref.getValue()); // prints getValue invoked 2 times\n</code></pre>\n"}],"owner":{"account_id":3837342,"reputation":6111,"user_id":3181365,"accept_rate":70,"display_name":"learner"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":282,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":74026000,"answer_count":2,"score":2,"last_activity_date":1666886636,"creation_date":1665254340,"question_id":73999625,"body_markdown":"I want to create a Mock Library class that implements `InvocationHandler` interface from Java Reflection. \r\n\r\nThis is the template I have created:\r\n\r\n    import java.lang.reflect.*;\r\n    import java.util.*;\r\n    \r\n    class MyMock implements InvocationHandler {\r\n    \t\t@Override\r\n    \t\tpublic Object invoke(Object proxy, Method method, Object[] args) throws Throwable {\r\n    \t\t\t// todo\r\n    \t\t}\r\n    \t\t\r\n    \t\tpublic MyMock when(String method, Object[] args) {\r\n    \t\t\t// todo\r\n    \t\t}\r\n    \t\t\r\n    \t\tpublic void thenReturn(Object val) {\r\n    \t\t\t// todo\r\n    \t\t}\r\n    }\r\n\r\nThe when and thenReturn methods are chained methods.\r\n\r\nThen `when` method registers the given mock parameters.\r\n\r\n`thenReturn` method registers the expected return values for the given mock parameters.\r\n\r\nAlso, I want to throw java.lang.IllegalArgumentException if the proxied interface calls methods or uses parameters that are not registered.\r\n\r\nThis is a sample interface:\r\n\r\n    interface CalcInterface {\r\n    \tint add(int a, int b);\r\n    \tString add(String a, String b);\r\n        String getValue();\r\n    }\r\n\r\nHere we have two overloaded `add` methods.\r\n\r\nThis is a program to test the mock class I wanted to implement.\r\n\r\n    class TestApplication {\t\t\r\n    \t\tpublic static void main(String[] args) {\r\n    \t\t\tMyMock m = new MyMock();\r\n    \t\t\tCalcInterface ref = (CalcInterface) Proxy.newProxyInstance(MyMock.class.getClassLoader(), new Class[]{CalcInterface.class}, m);\r\n    \t\t\t\r\n    \t\t\tm.when(&quot;add&quot;, new Object[]{1,2}).thenReturn(3);\r\n    \t\t\tm.when(&quot;add&quot;, new Object[]{&quot;x&quot;,&quot;y&quot;}).thenReturn(&quot;xy&quot;);\r\n    \t\t\t\r\n    \t\t\tSystem.out.println(ref.add(1,2)); // prints 3\r\n    \t\t\tSystem.out.println(ref.add(&quot;x&quot;,&quot;y&quot;)); // prints &quot;xy&quot;\r\n    \t\t}\r\n    }\r\n\r\nThis is the code which I have implemented so far to check the methods in CalcInterface:\r\n\r\n    class MyMock implements InvocationHandler {\r\n    \t\t@Override\r\n    \t\tpublic Object invoke(Object proxy, Method method, Object[] args) throws Throwable {\r\n    \t\t\tint n = args.length;\r\n    \t\t\tif(n == 2 &amp;&amp; method.getName().equals(&quot;add&quot;)) {\r\n    \t\t\t\tObject o1 = args[0], o2 = args[1];\r\n    \t\t\t\tif((o1 instanceof String) &amp;&amp; (o2 instanceof String)) {\r\n    \t\t\t\t\tString s1 = (String) o1, s2 = (String) o2;\r\n    \t\t\t\t\treturn s1+ s2;\r\n    \t\t\t\t} else if((o1 instanceof Integer) &amp;&amp; (o2 instanceof Integer)) {\r\n    \t\t\t\t\tint s1 = (Integer) o1, s2 = (Integer) o2;\r\n    \t\t\t\t\treturn s1+ s2;\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\tthrow new IllegalArgumentException();\r\n    \t\t}\r\n    \t\t\r\n    \t\tpublic MyMock when(String method, Object[] args) {\r\n    \t\t\treturn this;\r\n    \t\t}\r\n    \t\t\r\n    \t\tpublic void thenReturn(Object val) {\r\n    \t\t\r\n    \t\t}\r\n    }\r\n\r\nHere I am checking only for methods with the name `add` and having 2 arguments, with their type as `String` or `Integer`.\r\n\r\nBut I wanted to create this `MyMock` class in a general fashion, supporting different interfaces not just `CalcInterface`, and also supporting different methods not just the `add` method I implemented here. \r\n\r\n\r\n","title":"Creating a mock library","body":"<p>I want to create a Mock Library class that implements <code>InvocationHandler</code> interface from Java Reflection.</p>\n<p>This is the template I have created:</p>\n<pre><code>import java.lang.reflect.*;\nimport java.util.*;\n\nclass MyMock implements InvocationHandler {\n        @Override\n        public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {\n            // todo\n        }\n        \n        public MyMock when(String method, Object[] args) {\n            // todo\n        }\n        \n        public void thenReturn(Object val) {\n            // todo\n        }\n}\n</code></pre>\n<p>The when and thenReturn methods are chained methods.</p>\n<p>Then <code>when</code> method registers the given mock parameters.</p>\n<p><code>thenReturn</code> method registers the expected return values for the given mock parameters.</p>\n<p>Also, I want to throw java.lang.IllegalArgumentException if the proxied interface calls methods or uses parameters that are not registered.</p>\n<p>This is a sample interface:</p>\n<pre><code>interface CalcInterface {\n    int add(int a, int b);\n    String add(String a, String b);\n    String getValue();\n}\n</code></pre>\n<p>Here we have two overloaded <code>add</code> methods.</p>\n<p>This is a program to test the mock class I wanted to implement.</p>\n<pre><code>class TestApplication {     \n        public static void main(String[] args) {\n            MyMock m = new MyMock();\n            CalcInterface ref = (CalcInterface) Proxy.newProxyInstance(MyMock.class.getClassLoader(), new Class[]{CalcInterface.class}, m);\n            \n            m.when(&quot;add&quot;, new Object[]{1,2}).thenReturn(3);\n            m.when(&quot;add&quot;, new Object[]{&quot;x&quot;,&quot;y&quot;}).thenReturn(&quot;xy&quot;);\n            \n            System.out.println(ref.add(1,2)); // prints 3\n            System.out.println(ref.add(&quot;x&quot;,&quot;y&quot;)); // prints &quot;xy&quot;\n        }\n}\n</code></pre>\n<p>This is the code which I have implemented so far to check the methods in CalcInterface:</p>\n<pre><code>class MyMock implements InvocationHandler {\n        @Override\n        public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {\n            int n = args.length;\n            if(n == 2 &amp;&amp; method.getName().equals(&quot;add&quot;)) {\n                Object o1 = args[0], o2 = args[1];\n                if((o1 instanceof String) &amp;&amp; (o2 instanceof String)) {\n                    String s1 = (String) o1, s2 = (String) o2;\n                    return s1+ s2;\n                } else if((o1 instanceof Integer) &amp;&amp; (o2 instanceof Integer)) {\n                    int s1 = (Integer) o1, s2 = (Integer) o2;\n                    return s1+ s2;\n                }\n            }\n            throw new IllegalArgumentException();\n        }\n        \n        public MyMock when(String method, Object[] args) {\n            return this;\n        }\n        \n        public void thenReturn(Object val) {\n        \n        }\n}\n</code></pre>\n<p>Here I am checking only for methods with the name <code>add</code> and having 2 arguments, with their type as <code>String</code> or <code>Integer</code>.</p>\n<p>But I wanted to create this <code>MyMock</code> class in a general fashion, supporting different interfaces not just <code>CalcInterface</code>, and also supporting different methods not just the <code>add</code> method I implemented here.</p>\n"},{"tags":["java","windows-services"],"comments":[{"owner":{"account_id":208830,"reputation":10240,"user_id":459557,"display_name":"vanje"},"score":1,"creation_date":1551973435,"post_id":55047551,"comment_id":96845559,"body_markdown":"What do you mean by &quot;without access to target systems&quot;? How can you install and configure a Windows service without running some kind of setup on your target system?","body":"What do you mean by &quot;without access to target systems&quot;? How can you install and configure a Windows service without running some kind of setup on your target system?"},{"owner":{"account_id":4223329,"reputation":123,"user_id":3469922,"display_name":"kvhadzhiev"},"score":0,"creation_date":1551973757,"post_id":55047551,"comment_id":96845769,"body_markdown":"@vanje When I tried YAJSW&#39;s basic example, it required to perform configuration on the target system(run my JAR and check its PID, then run genConfig.bat, then modify the config script and finally install as service). I would need to automate these steps and wrap them in installation executable.","body":"@vanje When I tried YAJSW&#39;s basic example, it required to perform configuration on the target system(run my JAR and check its PID, then run genConfig.bat, then modify the config script and finally install as service). I would need to automate these steps and wrap them in installation executable."},{"owner":{"account_id":208830,"reputation":10240,"user_id":459557,"display_name":"vanje"},"score":1,"creation_date":1551974005,"post_id":55047551,"comment_id":96845925,"body_markdown":"With Apache Commons Daemon you only have to call prunsrv.exe with the appropriate parameters to install or remove a Windows service. It should be easy to integrate this in your setup routine. As an example you can look at the [Jetty documentation](https://www.eclipse.org/jetty/documentation/9.4.x/startup-windows-service.html). There is a batch file to install Jetty as a Windows service.","body":"With Apache Commons Daemon you only have to call prunsrv.exe with the appropriate parameters to install or remove a Windows service. It should be easy to integrate this in your setup routine. As an example you can look at the <a href=\"https://www.eclipse.org/jetty/documentation/9.4.x/startup-windows-service.html\" rel=\"nofollow noreferrer\">Jetty documentation</a>. There is a batch file to install Jetty as a Windows service."}],"answers":[{"tags":[],"owner":{"account_id":4223329,"reputation":123,"user_id":3469922,"display_name":"kvhadzhiev"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1666886532,"creation_date":1666886532,"answer_id":74224997,"question_id":55047551,"body_markdown":"I just wrapped the JAR into a Windows executable with Launch4j&#39;s Maven plugin.\r\n\r\nThen the executable was distributed to the end users to their Windows Startup folders, and when combined with Launch4j&#39;s option to auto-restart on crash removed the need to run the program as Windows Service.","title":"Wrapping JAR as NT Service without access to target systems","body":"<p>I just wrapped the JAR into a Windows executable with Launch4j's Maven plugin.</p>\n<p>Then the executable was distributed to the end users to their Windows Startup folders, and when combined with Launch4j's option to auto-restart on crash removed the need to run the program as Windows Service.</p>\n"}],"owner":{"account_id":4223329,"reputation":123,"user_id":3469922,"display_name":"kvhadzhiev"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74224997,"answer_count":1,"score":0,"last_activity_date":1666886532,"creation_date":1551972996,"question_id":55047551,"body_markdown":"I have a Java application packaged as runnable JAR which I need to install on end users Windows machines.\r\n\r\nThe application must be resilient and unobtrusive, I could only provide a link for the users, and they would expect to download and install it(the Windows way, like with NSIS). After installation it should run automatically as Windows Service, which must be autoconfigured to restart on failure.\r\n\r\nI investigated these wrapper frameworks:\r\n\r\n * [Yet Another Java Service Wrapper(YAJSW)](http://yajsw.sourceforge.net/) - Tried it, but it seems to require access to the target systems in order to configure and install the service(run my JAR and check its PID, then run genConfig.bat, then modify the config script and finally install as service).\r\n * [Tanuki&#39;s Java Service Wrapper(JSW)](https://wrapper.tanukisoftware.com/) - Similar to YAJSW?\r\n * [Apache Commons Daemon](https://commons.apache.org/proper/commons-daemon/) - Haven&#39;t tried it\r\n * [Launch4j](http://launch4j.sourceforge.net/) - Used by YAJSW &quot;for generating wrapper.exe on windows&quot;?\r\n * [Non-Sucking Service Manager(NSSM)](https://nssm.cc/) - Just found this one\r\n\r\nDoes any one of them support my scenario, or could be integrated with install system to complete it?\r\n\r\nIf there is no way to achieve this, I could fallback to these options:\r\n\r\n* Rewrite the application with .NET or C(Windows API) which have native integration with the services facility.\r\n* Provide the runnable JAR for download and tell the users to put it in the Startup folder(similar effect).\r\n\r\nWhat would you suggest?","title":"Wrapping JAR as NT Service without access to target systems","body":"<p>I have a Java application packaged as runnable JAR which I need to install on end users Windows machines.</p>\n\n<p>The application must be resilient and unobtrusive, I could only provide a link for the users, and they would expect to download and install it(the Windows way, like with NSIS). After installation it should run automatically as Windows Service, which must be autoconfigured to restart on failure.</p>\n\n<p>I investigated these wrapper frameworks:</p>\n\n<ul>\n<li><a href=\"http://yajsw.sourceforge.net/\" rel=\"nofollow noreferrer\">Yet Another Java Service Wrapper(YAJSW)</a> - Tried it, but it seems to require access to the target systems in order to configure and install the service(run my JAR and check its PID, then run genConfig.bat, then modify the config script and finally install as service).</li>\n<li><a href=\"https://wrapper.tanukisoftware.com/\" rel=\"nofollow noreferrer\">Tanuki's Java Service Wrapper(JSW)</a> - Similar to YAJSW?</li>\n<li><a href=\"https://commons.apache.org/proper/commons-daemon/\" rel=\"nofollow noreferrer\">Apache Commons Daemon</a> - Haven't tried it</li>\n<li><a href=\"http://launch4j.sourceforge.net/\" rel=\"nofollow noreferrer\">Launch4j</a> - Used by YAJSW \"for generating wrapper.exe on windows\"?</li>\n<li><a href=\"https://nssm.cc/\" rel=\"nofollow noreferrer\">Non-Sucking Service Manager(NSSM)</a> - Just found this one</li>\n</ul>\n\n<p>Does any one of them support my scenario, or could be integrated with install system to complete it?</p>\n\n<p>If there is no way to achieve this, I could fallback to these options:</p>\n\n<ul>\n<li>Rewrite the application with .NET or C(Windows API) which have native integration with the services facility.</li>\n<li>Provide the runnable JAR for download and tell the users to put it in the Startup folder(similar effect).</li>\n</ul>\n\n<p>What would you suggest?</p>\n"},{"tags":["java","intellij-idea","junit","junit5"],"comments":[{"owner":{"account_id":3295353,"reputation":4907,"user_id":2772755,"display_name":"Admit"},"score":1,"creation_date":1509367802,"post_id":46882930,"comment_id":80977673,"body_markdown":"What&#39;s you version of IDEA? You can try to download EAP (the cutting edge version) https://www.jetbrains.com/idea/nextversion/ and do the migration there.","body":"What&#39;s you version of IDEA? You can try to download EAP (the cutting edge version) <a href=\"https://www.jetbrains.com/idea/nextversion/\" rel=\"nofollow noreferrer\">jetbrains.com/idea/nextversion</a> and do the migration there."},{"owner":{"account_id":165479,"reputation":30126,"user_id":388980,"display_name":"Sam Brannen"},"score":4,"creation_date":1509379549,"post_id":46882930,"comment_id":80985905,"body_markdown":"You might find this tool useful: https://github.com/boyarsky/convert-junit4-to-junit5","body":"You might find this tool useful: <a href=\"https://github.com/boyarsky/convert-junit4-to-junit5\" rel=\"nofollow noreferrer\">github.com/boyarsky/convert-junit4-to-junit5</a>"},{"owner":{"account_id":9197571,"reputation":464,"user_id":6835804,"display_name":"Ran Koretzki"},"score":1,"creation_date":1509443299,"post_id":46882930,"comment_id":81010978,"body_markdown":"Thanks sam, this is what I was looking for.","body":"Thanks sam, this is what I was looking for."},{"owner":{"account_id":1939636,"reputation":28467,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":0,"creation_date":1509443446,"post_id":46882930,"comment_id":81011058,"body_markdown":"Also, seems like the IntelliJIDEA feature is not very ready either =&gt; https://youtrack.jetbrains.com/issue/IDEA-179927","body":"Also, seems like the IntelliJIDEA feature is not very ready either =&gt; <a href=\"https://youtrack.jetbrains.com/issue/IDEA-179927\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/IDEA-179927</a>"},{"owner":{"account_id":2650998,"reputation":29491,"user_id":3411681,"accept_rate":61,"display_name":"Marcelo Glasberg"},"score":3,"creation_date":1509485503,"post_id":46882930,"comment_id":81037011,"body_markdown":"@SamBrannen You should write your link as an answer, so that Ran can accept it.","body":"@SamBrannen You should write your link as an answer, so that Ran can accept it."},{"owner":{"account_id":165479,"reputation":30126,"user_id":388980,"display_name":"Sam Brannen"},"score":0,"creation_date":1509540535,"post_id":46882930,"comment_id":81057354,"body_markdown":"Glad you find that converter useful. I&#39;ll post it as an answer now.","body":"Glad you find that converter useful. I&#39;ll post it as an answer now."}],"answers":[{"comments":[{"owner":{"account_id":435063,"reputation":4304,"user_id":821436,"accept_rate":79,"display_name":"Martin Schr&#246;der"},"score":0,"creation_date":1512391148,"post_id":47054523,"comment_id":82224664,"body_markdown":"no main manifest attribute, in target/convert-junit4-to-to-junit5-0.0.1-SNAPSHOT.jar","body":"no main manifest attribute, in target/convert-junit4-to-to-junit5-0.0.1-SNAPSHOT.jar"}],"tags":[],"owner":{"account_id":930977,"reputation":8260,"user_id":960875,"accept_rate":98,"display_name":"saw303"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1509538267,"creation_date":1509538267,"answer_id":47054523,"question_id":46882930,"body_markdown":"It seems that converting test from JUnit 4 to JUnit 5 in IntelliJ 2017.3 is not complete. As suggested by Sam Brannen there is a small application on Github called *[convert-junit4-to-junit5][1]* that can do the job.\r\n\r\nJust clone the Github repo and build the software using Maven `mvn clean package`. Then run the the application using \r\n\r\n    java -jar \\\r\n         &lt;path-to-your-cloned-repo&gt;/convert-junit4-to-junit5/target/convert-junit4-to-to-junit5-0.0.1-SNAPSHOT.jar \\\r\n         &lt;path to where your JUnit 4 tests are located&gt;\r\n\r\nFor further instruction please read the projects [documentation][2].\r\n\r\n\r\n  [1]: https://github.com/boyarsky/convert-junit4-to-junit5\r\n  [2]: https://github.com/boyarsky/convert-junit4-to-junit5/blob/master/README.md","title":"Migrating specific tests from JUnit 4 to JUnit 5 in IntelliJ","body":"<p>It seems that converting test from JUnit 4 to JUnit 5 in IntelliJ 2017.3 is not complete. As suggested by Sam Brannen there is a small application on Github called <em><a href=\"https://github.com/boyarsky/convert-junit4-to-junit5\" rel=\"nofollow noreferrer\">convert-junit4-to-junit5</a></em> that can do the job.</p>\n\n<p>Just clone the Github repo and build the software using Maven <code>mvn clean package</code>. Then run the the application using </p>\n\n<pre><code>java -jar \\\n     &lt;path-to-your-cloned-repo&gt;/convert-junit4-to-junit5/target/convert-junit4-to-to-junit5-0.0.1-SNAPSHOT.jar \\\n     &lt;path to where your JUnit 4 tests are located&gt;\n</code></pre>\n\n<p>For further instruction please read the projects <a href=\"https://github.com/boyarsky/convert-junit4-to-junit5/blob/master/README.md\" rel=\"nofollow noreferrer\">documentation</a>.</p>\n"},{"comments":[{"owner":{"account_id":2001172,"reputation":329,"user_id":1792188,"display_name":"Dmitry Timofeev"},"score":1,"creation_date":1534356702,"post_id":47055280,"comment_id":90680490,"body_markdown":"See also the brilliant built-in Error Prone refactorings to migrate ExpectedExceptions and other exception-testing idioms to `assertThrows`, a rather tedious task if done manually: https://stackoverflow.com/a/51847402/1792188","body":"See also the brilliant built-in Error Prone refactorings to migrate ExpectedExceptions and other exception-testing idioms to <code>assertThrows</code>, a rather tedious task if done manually: <a href=\"https://stackoverflow.com/a/51847402/1792188\">stackoverflow.com/a/51847402/1792188</a>"}],"tags":[],"owner":{"account_id":165479,"reputation":30126,"user_id":388980,"display_name":"Sam Brannen"},"comment_count":1,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1509540606,"creation_date":1509540606,"answer_id":47055280,"question_id":46882930,"body_markdown":"Jeanne Boyarsky created a tool to convert JUnit 4 based tests to JUnit Jupiter.\r\n\r\nYou can find it in her GitHub account: https://github.com/boyarsky/convert-junit4-to-junit5\r\n","title":"Migrating specific tests from JUnit 4 to JUnit 5 in IntelliJ","body":"<p>Jeanne Boyarsky created a tool to convert JUnit 4 based tests to JUnit Jupiter.</p>\n\n<p>You can find it in her GitHub account: <a href=\"https://github.com/boyarsky/convert-junit4-to-junit5\" rel=\"noreferrer\">https://github.com/boyarsky/convert-junit4-to-junit5</a></p>\n"},{"tags":[],"owner":{"account_id":216698,"reputation":26495,"user_id":472109,"accept_rate":85,"display_name":"Geoffrey De Smet"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1666886313,"creation_date":1666886313,"answer_id":74224957,"question_id":46882930,"body_markdown":"Use [openrewrite][1]:\r\n\r\n    mvn org.openrewrite.maven:rewrite-maven-plugin:4.36.0:run -Drewrite.recipeArtifactCoordinates=org.openrewrite.recipe:rewrite-testing-frameworks:1.28.0 -Drewrite.activeRecipes=org.openrewrite.java.testing.junit5.JUnit5BestPractices\r\n\r\nwhich migrates automatically from JUnit 4 to JUnit 5 without modifying your code style.\r\n\r\n  [1]: https://docs.openrewrite.org/tutorials/running-recipes/migrate-from-junit-4-to-junit-5","title":"Migrating specific tests from JUnit 4 to JUnit 5 in IntelliJ","body":"<p>Use <a href=\"https://docs.openrewrite.org/tutorials/running-recipes/migrate-from-junit-4-to-junit-5\" rel=\"noreferrer\">openrewrite</a>:</p>\n<pre><code>mvn org.openrewrite.maven:rewrite-maven-plugin:4.36.0:run -Drewrite.recipeArtifactCoordinates=org.openrewrite.recipe:rewrite-testing-frameworks:1.28.0 -Drewrite.activeRecipes=org.openrewrite.java.testing.junit5.JUnit5BestPractices\n</code></pre>\n<p>which migrates automatically from JUnit 4 to JUnit 5 without modifying your code style.</p>\n"}],"owner":{"account_id":9197571,"reputation":464,"user_id":6835804,"display_name":"Ran Koretzki"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3166,"favorite_count":0,"down_vote_count":1,"up_vote_count":11,"answer_count":3,"score":10,"last_activity_date":1666886313,"creation_date":1508738962,"question_id":46882930,"body_markdown":"I am trying to migrate test files from Junit 4 to Junit 5\r\nusing IntelliJ refactor code -&gt; migrate -&gt; junit 4 to junit 5.\r\n\r\nBut it only run import optimization and show all unit tests in the project and ask yes or no on refactoring and nothing happens when I chose do refactor.\r\n\r\nany one know on another migration tool / plug in or a way to make the migration work ?\r\n ","title":"Migrating specific tests from JUnit 4 to JUnit 5 in IntelliJ","body":"<p>I am trying to migrate test files from Junit 4 to Junit 5\nusing IntelliJ refactor code -> migrate -> junit 4 to junit 5.</p>\n\n<p>But it only run import optimization and show all unit tests in the project and ask yes or no on refactoring and nothing happens when I chose do refactor.</p>\n\n<p>any one know on another migration tool / plug in or a way to make the migration work ?</p>\n"},{"tags":["java","docker","selenium","jaeger","coursier"],"answers":[{"tags":[],"owner":{"account_id":346350,"reputation":14221,"user_id":679824,"accept_rate":40,"display_name":"Krishnan Mahadevan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666886289,"creation_date":1666886289,"answer_id":74224950,"question_id":73413741,"body_markdown":"Here&#39;s what worked for me. As an example here&#39;s how the modified command in the shell script looks like:\r\n\r\n&lt;!-- language: shell --&gt;\r\n\r\n    curl -fL https://github.com/coursier/launchers/raw/master/cs-x86_64-pc-linux.gz | gzip -d &gt; /tmp/cs\r\n    chmod +x /tmp/cs\r\n    \r\n    java ${JAVA_OPTS:-$SE_JAVA_OPTS} -Dwebdriver.http.factory=jdk-http-client \\\r\n      -jar /opt/selenium/selenium-server.jar \\\r\n      --ext /opt/selenium/selenium-http-jdk-client.jar:$(/tmp/cs fetch --classpath --cache /tmp io.opentelemetry:opentelemetry-exporter-jaeger:1.19.0 io.grpc:grpc-netty:1.50.2) hub \\\r\n      --session-request-timeout ${SE_SESSION_REQUEST_TIMEOUT} \\\r\n      --session-retry-interval ${SE_SESSION_RETRY_INTERVAL} \\\r\n      --relax-checks ${SE_RELAX_CHECKS} \\\r\n      --bind-host ${SE_BIND_HOST} \\\r\n      ${HOST_CONFIG} \\\r\n      ${PORT_CONFIG} \\\r\n      ${SE_OPTS}\r\n\r\nI have created a full fledged demo project and uploaded it to GitHub which demonstrates how to perform tracing for \r\n\r\n - a simple grid (the one that has just a Hub and a node)\r\n - a distributed grid (which has an event-bus, sessions, session-queue, router, distributer and a node)\r\n\r\nPlease take a look at the [GitHub project][1] \r\n\r\n\r\n  [1]: https://github.com/krmahadevan/docker-grid-tracer","title":"Coursier command not found and Unable to access jarfile selenium-beta-4.jar","body":"<p>Here's what worked for me. As an example here's how the modified command in the shell script looks like:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>curl -fL https://github.com/coursier/launchers/raw/master/cs-x86_64-pc-linux.gz | gzip -d &gt; /tmp/cs\nchmod +x /tmp/cs\n\njava ${JAVA_OPTS:-$SE_JAVA_OPTS} -Dwebdriver.http.factory=jdk-http-client \\\n  -jar /opt/selenium/selenium-server.jar \\\n  --ext /opt/selenium/selenium-http-jdk-client.jar:$(/tmp/cs fetch --classpath --cache /tmp io.opentelemetry:opentelemetry-exporter-jaeger:1.19.0 io.grpc:grpc-netty:1.50.2) hub \\\n  --session-request-timeout ${SE_SESSION_REQUEST_TIMEOUT} \\\n  --session-retry-interval ${SE_SESSION_RETRY_INTERVAL} \\\n  --relax-checks ${SE_RELAX_CHECKS} \\\n  --bind-host ${SE_BIND_HOST} \\\n  ${HOST_CONFIG} \\\n  ${PORT_CONFIG} \\\n  ${SE_OPTS}\n</code></pre>\n<p>I have created a full fledged demo project and uploaded it to GitHub which demonstrates how to perform tracing for</p>\n<ul>\n<li>a simple grid (the one that has just a Hub and a node)</li>\n<li>a distributed grid (which has an event-bus, sessions, session-queue, router, distributer and a node)</li>\n</ul>\n<p>Please take a look at the <a href=\"https://github.com/krmahadevan/docker-grid-tracer\" rel=\"nofollow noreferrer\">GitHub project</a></p>\n"}],"owner":{"account_id":25821811,"reputation":1,"user_id":19560756,"display_name":"TonyLiu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":143,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1666886289,"creation_date":1660896911,"question_id":73413741,"body_markdown":"I run the selenium grid on container and would like to apply opentracing to this container.Here are my Dockerfile for test image and docker-compose file .\r\n\r\nDocker_compose file:\r\n\r\n    version: &quot;3&quot;\r\n    services:\r\n      chrome:\r\n        image: test\r\n        shm_size: 4gb\r\n        container_name: Chrome\r\n        expose : \r\n          - &quot;4444&quot;\r\n        command: &gt;\r\n          sh -c &quot;\r\n          ./shell/start-grid-standalone.sh\r\n          &quot;\r\n        volumes:\r\n          - &quot;grid:/app:rw&quot;\r\n     jaeger:\r\n        container_name: Jaeger\r\n        image: jaegertracing/all-in-one:latest\r\n        ports:\r\n          - 16686:16686\r\n          - 6831:6831/udp\r\n        volumes:\r\n          - Jaeger-vol:/var/lib/jaeger\r\n    volumes:\r\n     Jaeger-vol:\r\n     grid:\r\n\r\nDockerfile for image **test** :\r\n\r\n    FROM selenium/standalone-chrome:latest\r\n    WORKDIR /app\r\n    COPY . . \r\n    RUN sudo apt install curl\r\n    RUN curl -fL https://github.com/coursier/launchers/raw/master/cs-x86_64-pc-linux.gz | gzip -d\r\n    &gt; cs\r\n    RUN chmod +x cs \r\n    RUN ./cs setup --yes\r\n    RUN export PATH=&quot;/home/.local/share/coursier/bin&quot;\r\n\r\nThe docker file takes reference from  https://get-coursier.io/docs/cli-installation and the docker compose takes reference from https://github.com/manoj9788/tracing-selenium-grid. \r\nThe content of **/shell/start-grid-standalone.sh** is as same as https://github.com/manoj9788/tracing-selenium-grid/blob/master/start-grid-standalone.sh \r\n\r\nAnd the error I get is :\r\n\r\n&gt; Chrome    | + grep selenium-server-4.0.0-alpha-7.jar\r\nChrome    | + awk &#39;{print $2}&#39;\r\nChrome    | + xargs kill\r\nChrome    | kill: (9): No such process\r\nChrome    | ++ coursier fetch -p io.opentelemetry:opentelemetry-exporter-jaeger:1.0.0 io.grpc:grpc-netty:1.35.0\r\nChrome    | ./shell/start-grid-standalone.sh: line 4: coursier: command not \r\nfound\r\nChrome    | + java -Dotel.traces.exporter=jaeger -Dotel.exporter.jaeger.endpoint=localhost:14250 -Dotel.resource.attributes=service.name=selenium-standalone -jar selenium-beta-4.jar --ext standalone\r\nChrome    | Error: Unable to access jarfile selenium-beta-4.jar\r\n\r\nI actually save the location of coursier binary file as environment variable,so why I still get the error for **coursier: command not found** ? \r\nHope someone could help me ,thanks!","title":"Coursier command not found and Unable to access jarfile selenium-beta-4.jar","body":"<p>I run the selenium grid on container and would like to apply opentracing to this container.Here are my Dockerfile for test image and docker-compose file .</p>\n<p>Docker_compose file:</p>\n<pre><code>version: &quot;3&quot;\nservices:\n  chrome:\n    image: test\n    shm_size: 4gb\n    container_name: Chrome\n    expose : \n      - &quot;4444&quot;\n    command: &gt;\n      sh -c &quot;\n      ./shell/start-grid-standalone.sh\n      &quot;\n    volumes:\n      - &quot;grid:/app:rw&quot;\n jaeger:\n    container_name: Jaeger\n    image: jaegertracing/all-in-one:latest\n    ports:\n      - 16686:16686\n      - 6831:6831/udp\n    volumes:\n      - Jaeger-vol:/var/lib/jaeger\nvolumes:\n Jaeger-vol:\n grid:\n</code></pre>\n<p>Dockerfile for image <strong>test</strong> :</p>\n<pre><code>FROM selenium/standalone-chrome:latest\nWORKDIR /app\nCOPY . . \nRUN sudo apt install curl\nRUN curl -fL https://github.com/coursier/launchers/raw/master/cs-x86_64-pc-linux.gz | gzip -d\n&gt; cs\nRUN chmod +x cs \nRUN ./cs setup --yes\nRUN export PATH=&quot;/home/.local/share/coursier/bin&quot;\n</code></pre>\n<p>The docker file takes reference from  <a href=\"https://get-coursier.io/docs/cli-installation\" rel=\"nofollow noreferrer\">https://get-coursier.io/docs/cli-installation</a> and the docker compose takes reference from <a href=\"https://github.com/manoj9788/tracing-selenium-grid\" rel=\"nofollow noreferrer\">https://github.com/manoj9788/tracing-selenium-grid</a>.\nThe content of <strong>/shell/start-grid-standalone.sh</strong> is as same as <a href=\"https://github.com/manoj9788/tracing-selenium-grid/blob/master/start-grid-standalone.sh\" rel=\"nofollow noreferrer\">https://github.com/manoj9788/tracing-selenium-grid/blob/master/start-grid-standalone.sh</a></p>\n<p>And the error I get is :</p>\n<blockquote>\n<p>Chrome    | + grep selenium-server-4.0.0-alpha-7.jar\nChrome    | + awk '{print $2}'\nChrome    | + xargs kill\nChrome    | kill: (9): No such process\nChrome    | ++ coursier fetch -p io.opentelemetry:opentelemetry-exporter-jaeger:1.0.0 io.grpc:grpc-netty:1.35.0\nChrome    | ./shell/start-grid-standalone.sh: line 4: coursier: command not\nfound\nChrome    | + java -Dotel.traces.exporter=jaeger -Dotel.exporter.jaeger.endpoint=localhost:14250 -Dotel.resource.attributes=service.name=selenium-standalone -jar selenium-beta-4.jar --ext standalone\nChrome    | Error: Unable to access jarfile selenium-beta-4.jar</p>\n</blockquote>\n<p>I actually save the location of coursier binary file as environment variable,so why I still get the error for <strong>coursier: command not found</strong> ?\nHope someone could help me ,thanks!</p>\n"},{"tags":["java","unit-testing","asynchronous","junit"],"comments":[{"owner":{"account_id":430482,"reputation":27583,"user_id":813951,"accept_rate":75,"display_name":"Mister Smith"},"score":1,"creation_date":1474359740,"post_id":39588658,"comment_id":66487376,"body_markdown":"Doing async testing in Java is a PITA. I usually design most of my layers synchronous for testing, and only the topmost application layer would be async. I used some synchronization. mechanisms (mostly wait/notify) in the past for testing, but as you said it sucks.","body":"Doing async testing in Java is a PITA. I usually design most of my layers synchronous for testing, and only the topmost application layer would be async. I used some synchronization. mechanisms (mostly wait/notify) in the past for testing, but as you said it sucks."},{"owner":{"account_id":2078462,"reputation":10342,"user_id":2986984,"accept_rate":80,"display_name":"tkruse"},"score":0,"creation_date":1512545408,"post_id":39588658,"comment_id":82296745,"body_markdown":"Possible duplicate of [How to use Junit to test asynchronous processes](https://stackoverflow.com/questions/631598/how-to-use-junit-to-test-asynchronous-processes)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/631598/how-to-use-junit-to-test-asynchronous-processes\">How to use Junit to test asynchronous processes</a>"}],"answers":[{"comments":[{"owner":{"account_id":198162,"reputation":3912,"user_id":1924798,"accept_rate":95,"display_name":"Marco Faustinelli"},"score":1,"creation_date":1474364609,"post_id":39589029,"comment_id":66490386,"body_markdown":"There&#39;s that myth going around that derelict JS programmers are forced to use callbacks because of the nature of the language. If promises (pardon, CompletableFuture&#39;s) are coming to Java is just because they are a good idea). Too bad if the major testing frameworks do not take notice.","body":"There&#39;s that myth going around that derelict JS programmers are forced to use callbacks because of the nature of the language. If promises (pardon, CompletableFuture&#39;s) are coming to Java is just because they are a good idea). Too bad if the major testing frameworks do not take notice."},{"owner":{"account_id":198162,"reputation":3912,"user_id":1924798,"accept_rate":95,"display_name":"Marco Faustinelli"},"score":0,"creation_date":1474364737,"post_id":39589029,"comment_id":66490468,"body_markdown":"Anyway, thank you for the suggestion. But that Awaitility library looks like a blocking thing to me. Am I correct?","body":"Anyway, thank you for the suggestion. But that Awaitility library looks like a blocking thing to me. Am I correct?"},{"owner":{"account_id":476019,"reputation":14699,"user_id":886697,"accept_rate":92,"display_name":"Stanislav Bashkyrtsev"},"score":0,"creation_date":1474400713,"post_id":39589029,"comment_id":66513578,"body_markdown":"Awaitility - yes, it&#39;s blocking. Maybe it&#39;s worth looking at TestRules - they can alter the way JUnit treats test results: http://junit.org/junit4/javadoc/4.12/org/junit/rules/TestRule.html","body":"Awaitility - yes, it&#39;s blocking. Maybe it&#39;s worth looking at TestRules - they can alter the way JUnit treats test results: <a href=\"http://junit.org/junit4/javadoc/4.12/org/junit/rules/TestRule.html\" rel=\"nofollow noreferrer\">junit.org/junit4/javadoc/4.12/org/junit/rules/TestRule.html</a>"}],"tags":[],"owner":{"account_id":476019,"reputation":14699,"user_id":886697,"accept_rate":92,"display_name":"Stanislav Bashkyrtsev"},"comment_count":3,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1474361503,"creation_date":1474359667,"answer_id":39589029,"question_id":39588658,"body_markdown":"Async nature of JS tests is a problem that complicates testing a lot (our brain thinks in a synchronous way). But everyone (well, [not everyone][1]) makes peace with it because this is the nature of NodeJS and it&#39;s probably not wise to use the tool not in a way that it was designed.\r\n\r\nJava doesn&#39;t have this &quot;problem&quot; (you&#39;d have to explicitly choose to work with NIO &amp; Co to go async) which means you can write tests in a normal (synchronous) way. So instead of applying JS patterns in the environment that&#39;s not designed to work this way you should write tests Java-way (or Rub-way, or .Net-way, or AlmostAnything-way) without worrying about callbacks.\r\n\r\nBut if you happen to test an async code (e.g. you use MOMs like JMS) then you may want to look at [Awaitility][2] - special lib to test such cases.\r\n\r\n\r\n  [1]: https://www.npmjs.com/package/webdriver-sync\r\n  [2]: https://github.com/awaitility/awaitility","title":"Asynchronous unit testing in Java/Junit - a very simple yet unsuccessful example","body":"<p>Async nature of JS tests is a problem that complicates testing a lot (our brain thinks in a synchronous way). But everyone (well, <a href=\"https://www.npmjs.com/package/webdriver-sync\" rel=\"nofollow\">not everyone</a>) makes peace with it because this is the nature of NodeJS and it's probably not wise to use the tool not in a way that it was designed.</p>\n\n<p>Java doesn't have this \"problem\" (you'd have to explicitly choose to work with NIO &amp; Co to go async) which means you can write tests in a normal (synchronous) way. So instead of applying JS patterns in the environment that's not designed to work this way you should write tests Java-way (or Rub-way, or .Net-way, or AlmostAnything-way) without worrying about callbacks.</p>\n\n<p>But if you happen to test an async code (e.g. you use MOMs like JMS) then you may want to look at <a href=\"https://github.com/awaitility/awaitility\" rel=\"nofollow\">Awaitility</a> - special lib to test such cases.</p>\n"},{"comments":[{"owner":{"account_id":198162,"reputation":3912,"user_id":1924798,"accept_rate":95,"display_name":"Marco Faustinelli"},"score":0,"creation_date":1490254373,"post_id":42946535,"comment_id":73032144,"body_markdown":"This sounds darn interesting! Let&#39;s try. I put the invocation of `fut.join` as last line of the test method and it works like a charm! Can understand only half of what&#39;s going on, but I am happy anyhow. Thank you!","body":"This sounds darn interesting! Let&#39;s try. I put the invocation of <code>fut.join</code> as last line of the test method and it works like a charm! Can understand only half of what&#39;s going on, but I am happy anyhow. Thank you!"},{"owner":{"account_id":535042,"reputation":754,"user_id":635621,"display_name":"Federico Fissore"},"score":1,"creation_date":1490254761,"post_id":42946535,"comment_id":73032352,"body_markdown":"It works just as Thread.join. The current thread awaits for CompletableFuture to end all the tasks it&#39;s composed of. Then the final result is returned. `join` and `get` differ in that `get` throws checked exceptions, while `join` does not.","body":"It works just as Thread.join. The current thread awaits for CompletableFuture to end all the tasks it&#39;s composed of. Then the final result is returned. <code>join</code> and <code>get</code> differ in that <code>get</code> throws checked exceptions, while <code>join</code> does not."}],"tags":[],"owner":{"account_id":535042,"reputation":754,"user_id":635621,"display_name":"Federico Fissore"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1490172214,"creation_date":1490172214,"answer_id":42946535,"question_id":39588658,"body_markdown":"When testing `CompletableFuture` you need to wait until all its steps are completed.\r\n\r\nInstead of a `Thread.sleep`, add a final `fut.join()`","title":"Asynchronous unit testing in Java/Junit - a very simple yet unsuccessful example","body":"<p>When testing <code>CompletableFuture</code> you need to wait until all its steps are completed.</p>\n\n<p>Instead of a <code>Thread.sleep</code>, add a final <code>fut.join()</code></p>\n"}],"owner":{"account_id":198162,"reputation":3912,"user_id":1924798,"accept_rate":95,"display_name":"Marco Faustinelli"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7022,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":42946535,"answer_count":2,"score":5,"last_activity_date":1666886022,"creation_date":1474358345,"question_id":39588658,"body_markdown":"In JavaScript (for example using Mocha) I can write asynchronous unit tests which assert things inside the final callback.\r\n\r\nThis is accomplished by passing a token function (usually called `done`) as argument to the test method.\r\n\r\nWhen the function is invoked, the testing framework understands that the test is completed.\r\n\r\nFor example:\r\n\r\n      it(&#39;succeeds or fails in the last callback&#39;, function(done) {\r\n\r\n          var deferred = Q.defer();\r\n          setTimeout(function() { deferred.resolve(&#39;expected&#39;); }, 500);\r\n\r\n          deferred.promise.then(function(result) {\r\n              assertEquals(&#39;expected&#39;, result);\r\n              done();  // end of test\r\n          });\r\n\r\n      });\r\n\r\nI see that Junit does not cater for such a scenario. First of all, test methods cannot handle an argument, and anyhow if I try for example:\r\n\r\n      @Test\r\n      public void testAssertionInsideContinuation() {\r\n    \r\n          Long now = System.currentTimeMillis();\r\n          System.out.println(&quot;TimeMillis=&quot; + now);\r\n    \r\n          CompletableFuture fut = new CompletableFuture();\r\n\r\n          Executors.newScheduledThreadPool(1)\r\n              .schedule(() -&gt; { fut.complete(&quot;whatever&quot;); }, 500, TimeUnit.MILLISECONDS);\r\n    \r\n          fut.thenRun(() -&gt; {\r\n              long then = System.currentTimeMillis();\r\n              System.out.println(&quot;TimeMillis=&quot; + then);\r\n              assertTrue(then - now &gt;= 500);\r\n          });\r\n      }\r\n\r\nthe second `println` will not be executed, because the test has happily completed long time before.\r\n\r\nIf I cheat and put a `Thread.currentThread().sleep(500);` at the end of the test method, then the future gets a chance to be completed, and the assertion + the second printout are executed.\r\n\r\nI have a few questions:\r\n\r\n- what is the simplest Java setup in which I would be able to verify assertions inside callbacks/continuations/thenables (call them whatever you like) without having to block the test?\r\n- do I have to give up Junit altogether?\r\n- is there a mainstream testing framework (TestNG, maybe?) that allows writing async unit tests this way?\r\n\r\nBTW, I&#39;d also be grateful if anyone could suggest me a way to write this Java sample test without resorting to `ScheduledFuture`&#39;s.\r\nI have tried some experiment with `supplyAsync` without really nailing down a solution.\r\n\r\n\r\n\r\n","title":"Asynchronous unit testing in Java/Junit - a very simple yet unsuccessful example","body":"<p>In JavaScript (for example using Mocha) I can write asynchronous unit tests which assert things inside the final callback.</p>\n<p>This is accomplished by passing a token function (usually called <code>done</code>) as argument to the test method.</p>\n<p>When the function is invoked, the testing framework understands that the test is completed.</p>\n<p>For example:</p>\n<pre><code>  it('succeeds or fails in the last callback', function(done) {\n\n      var deferred = Q.defer();\n      setTimeout(function() { deferred.resolve('expected'); }, 500);\n\n      deferred.promise.then(function(result) {\n          assertEquals('expected', result);\n          done();  // end of test\n      });\n\n  });\n</code></pre>\n<p>I see that Junit does not cater for such a scenario. First of all, test methods cannot handle an argument, and anyhow if I try for example:</p>\n<pre><code>  @Test\n  public void testAssertionInsideContinuation() {\n\n      Long now = System.currentTimeMillis();\n      System.out.println(&quot;TimeMillis=&quot; + now);\n\n      CompletableFuture fut = new CompletableFuture();\n\n      Executors.newScheduledThreadPool(1)\n          .schedule(() -&gt; { fut.complete(&quot;whatever&quot;); }, 500, TimeUnit.MILLISECONDS);\n\n      fut.thenRun(() -&gt; {\n          long then = System.currentTimeMillis();\n          System.out.println(&quot;TimeMillis=&quot; + then);\n          assertTrue(then - now &gt;= 500);\n      });\n  }\n</code></pre>\n<p>the second <code>println</code> will not be executed, because the test has happily completed long time before.</p>\n<p>If I cheat and put a <code>Thread.currentThread().sleep(500);</code> at the end of the test method, then the future gets a chance to be completed, and the assertion + the second printout are executed.</p>\n<p>I have a few questions:</p>\n<ul>\n<li>what is the simplest Java setup in which I would be able to verify assertions inside callbacks/continuations/thenables (call them whatever you like) without having to block the test?</li>\n<li>do I have to give up Junit altogether?</li>\n<li>is there a mainstream testing framework (TestNG, maybe?) that allows writing async unit tests this way?</li>\n</ul>\n<p>BTW, I'd also be grateful if anyone could suggest me a way to write this Java sample test without resorting to <code>ScheduledFuture</code>'s.\nI have tried some experiment with <code>supplyAsync</code> without really nailing down a solution.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1938802,"reputation":12091,"user_id":1745544,"accept_rate":23,"display_name":"OldProgrammer"},"score":2,"creation_date":1666886915,"post_id":74224866,"comment_id":131046613,"body_markdown":"https://www.baeldung.com/jvm-list-all-classes-loaded","body":"<a href=\"https://www.baeldung.com/jvm-list-all-classes-loaded\" rel=\"nofollow noreferrer\">baeldung.com/jvm-list-all-classes-loaded</a>"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1666937529,"post_id":74224866,"comment_id":131057032,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":20400396,"reputation":1,"user_id":20350612,"display_name":"Alistair"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1666885847,"creation_date":1666885847,"question_id":74224866,"body_markdown":"How can you find out if a JVM or a product with a JVM is using a particular jar file?\r\n\r\nIs the only why of doing this is to do a &quot;lsof | grep name&quot; ? or looking at the CLASSPATH how can you tell?\r\n\r\nlsof | grep name and looking at the CLASSPATH","title":"Find out if a JVM is using a particular jar file","body":"<p>How can you find out if a JVM or a product with a JVM is using a particular jar file?</p>\n<p>Is the only why of doing this is to do a &quot;lsof | grep name&quot; ? or looking at the CLASSPATH how can you tell?</p>\n<p>lsof | grep name and looking at the CLASSPATH</p>\n"},{"tags":["java","windows","command-prompt","javac"],"comments":[{"owner":{"account_id":3181432,"reputation":6481,"user_id":2688027,"display_name":"MultiplyByZer0"},"score":0,"creation_date":1539458513,"post_id":1678520,"comment_id":92512907,"body_markdown":"Possible duplicate of [javac is not recognized as an internal or external command, operable program or batch file](https://stackoverflow.com/questions/7709041/javac-is-not-recognized-as-an-internal-or-external-command-operable-program-or)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/7709041/javac-is-not-recognized-as-an-internal-or-external-command-operable-program-or\">javac is not recognized as an internal or external command, operable program or batch file</a>"}],"answers":[{"comments":[{"owner":{"account_id":45286,"reputation":3769,"user_id":133458,"accept_rate":100,"display_name":"Dom M."},"score":12,"creation_date":1257400974,"post_id":1678526,"comment_id":1552723,"body_markdown":"ah yes, all i had to do was re-open the command prompt and it worked fine, thanks!","body":"ah yes, all i had to do was re-open the command prompt and it worked fine, thanks!"},{"owner":{"account_id":19067,"reputation":5283,"user_id":44355,"display_name":"david a."},"score":1,"creation_date":1282240942,"post_id":1678526,"comment_id":3686673,"body_markdown":"+1. The &quot;for %i in (java.exe) do @echo %~$PATH:i&quot; just saved my day. I&#39;m just a occasional Windows user and I just did not know there&#39;s could be yet another hidden java.exe in c:\\windows\\system :)","body":"+1. The &quot;for %i in (java.exe) do @echo %~$PATH:i&quot; just saved my day. I&#39;m just a occasional Windows user and I just did not know there&#39;s could be yet another hidden java.exe in c:\\windows\\system :)"},{"owner":{"account_id":369217,"reputation":1543,"user_id":716468,"accept_rate":70,"display_name":"user716468"},"score":1,"creation_date":1357457725,"post_id":1678526,"comment_id":19651939,"body_markdown":"The above set path command does not work for me under windows 7. I had to use set path=&quot;%path%;c:\\program files\\java\\jdk1.6.0_16\\bin. That is without quotes! I am not familiar with windows command line but it seems that quotes are preserved. So having them in the %path% will make it entirely unusable.","body":"The above set path command does not work for me under windows 7. I had to use set path=&quot;%path%;c:\\program files\\java\\jdk1.6.0_16\\bin. That is without quotes! I am not familiar with windows command line but it seems that quotes are preserved. So having them in the %path% will make it entirely unusable."},{"owner":{"account_id":1971139,"reputation":1130,"user_id":1770031,"accept_rate":75,"display_name":"itsfarseen"},"score":0,"creation_date":1379785447,"post_id":1678526,"comment_id":27960157,"body_markdown":"@user716468, There is a GUI way to do this in windows instead of command line. If you are on windows 7, just type var in start menu search and click on Edit Environment Variables. If you are on Windows XP, right click My Computer, Click on properties, go to advanced tab and click on the Environment variables button on the bottom side. There you can find two list boxes. Find out the one with name PATH from the bottom list box and click on Edit. Now append the path to your _JDK_ preceded by a semicolon. You&#39;re Done!","body":"@user716468, There is a GUI way to do this in windows instead of command line. If you are on windows 7, just type var in start menu search and click on Edit Environment Variables. If you are on Windows XP, right click My Computer, Click on properties, go to advanced tab and click on the Environment variables button on the bottom side. There you can find two list boxes. Find out the one with name PATH from the bottom list box and click on Edit. Now append the path to your <i>JDK</i> preceded by a semicolon. You&#39;re Done!"},{"owner":{"account_id":468812,"reputation":1761,"user_id":875020,"accept_rate":86,"display_name":"x29a"},"score":0,"creation_date":1390465971,"post_id":1678526,"comment_id":32105847,"body_markdown":"there is also a &quot;where&quot; command in recent windows command lines","body":"there is also a &quot;where&quot; command in recent windows command lines"}],"tags":[],"owner":{"account_id":8291,"reputation":860527,"user_id":14860,"accept_rate":100,"display_name":"paxdiablo"},"comment_count":5,"down_vote_count":0,"up_vote_count":166,"is_accepted":true,"score":166,"last_activity_date":1504335496,"creation_date":1257398981,"answer_id":1678526,"question_id":1678520,"body_markdown":"If you added it in the control panel while your command prompt was open, that won&#39;t affect your current command prompt. You&#39;ll need to exit and re-open or simply do:\r\n\r\n    set &quot;path=%path%;c:\\program files\\java\\jdk1.6.0_16\\bin&quot;\r\n\r\nBy way of checking, execute:\r\n\r\n    echo %path%\r\nfrom your command prompt and let us know what it is.\r\n\r\nOtherwise, make sure there *is* a javac in that directory by trying:\r\n\r\n    &quot;c:\\program files\\java\\jdk1.6.0_16\\bin\\javac.exe&quot;\r\nfrom the command prompt. You can also tell *which* executable (if any) is being used with the command:\r\n\r\n    for %i in (javac.exe) do @echo %~$PATH:i\r\n\r\nThis is a neat trick similar to the `which` and/or `whence` commands in some UNIX-type operating systems.\r\n","title":"javac not working in windows command prompt","body":"<p>If you added it in the control panel while your command prompt was open, that won't affect your current command prompt. You'll need to exit and re-open or simply do:</p>\n\n<pre><code>set \"path=%path%;c:\\program files\\java\\jdk1.6.0_16\\bin\"\n</code></pre>\n\n<p>By way of checking, execute:</p>\n\n<pre><code>echo %path%\n</code></pre>\n\n<p>from your command prompt and let us know what it is.</p>\n\n<p>Otherwise, make sure there <em>is</em> a javac in that directory by trying:</p>\n\n<pre><code>\"c:\\program files\\java\\jdk1.6.0_16\\bin\\javac.exe\"\n</code></pre>\n\n<p>from the command prompt. You can also tell <em>which</em> executable (if any) is being used with the command:</p>\n\n<pre><code>for %i in (javac.exe) do @echo %~$PATH:i\n</code></pre>\n\n<p>This is a neat trick similar to the <code>which</code> and/or <code>whence</code> commands in some UNIX-type operating systems.</p>\n"},{"comments":[{"owner":{"account_id":8291,"reputation":860527,"user_id":14860,"accept_rate":100,"display_name":"paxdiablo"},"score":2,"creation_date":1257399808,"post_id":1678534,"comment_id":1552648,"body_markdown":"I don&#39;t think that&#39;s correct. I can set my path to be nothing but &quot;C:\\Program Files\\Java\\jdk1.6.0_16\\bin\\&quot; (with trailing slash) and it still works fine.","body":"I don&#39;t think that&#39;s correct. I can set my path to be nothing but &quot;C:\\Program Files\\Java\\jdk1.6.0_16\\bin\\&quot; (with trailing slash) and it still works fine."}],"tags":[],"owner":{"account_id":58610,"reputation":5815,"user_id":175422,"display_name":"valli"},"comment_count":1,"down_vote_count":7,"up_vote_count":0,"is_accepted":false,"score":-7,"last_activity_date":1257399062,"creation_date":1257399062,"answer_id":1678534,"question_id":1678520,"body_markdown":"Give it as &quot;C:\\Program Files\\Java\\jdk1.6.0_16\\bin&quot;. Remove the backslash it will work","title":"javac not working in windows command prompt","body":"<p>Give it as \"C:\\Program Files\\Java\\jdk1.6.0_16\\bin\". Remove the backslash it will work</p>\n"},{"comments":[{"owner":{"account_id":7567,"reputation":10188,"user_id":13189,"accept_rate":75,"display_name":"eckes"},"score":1,"creation_date":1321416148,"post_id":8146196,"comment_id":9998883,"body_markdown":"I guess unsetting the classpath is better here. I would not use the CLASSPATH variable, especially not on Windows where it is global and affects multiple JREs...","body":"I guess unsetting the classpath is better here. I would not use the CLASSPATH variable, especially not on Windows where it is global and affects multiple JREs..."}],"tags":[],"owner":{"account_id":1043344,"reputation":51,"user_id":1048851,"display_name":"Ryan Summey"},"comment_count":1,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1321417448,"creation_date":1321413043,"answer_id":8146196,"question_id":1678520,"body_markdown":"I just had to do this to get this to work on windows 7 64.\r\n\r\nOpen up a command prompt (cmd.exe) and type:\r\n\r\n    set CLASSPATH=C:\\Program Files\\Java\\jdk1.7.0_01\\bin\r\n\r\nMake sure you reopen all running command prompt Windows to get the environment variable updated as well.","title":"javac not working in windows command prompt","body":"<p>I just had to do this to get this to work on windows 7 64.</p>\n\n<p>Open up a command prompt (cmd.exe) and type:</p>\n\n<pre><code>set CLASSPATH=C:\\Program Files\\Java\\jdk1.7.0_01\\bin\n</code></pre>\n\n<p>Make sure you reopen all running command prompt Windows to get the environment variable updated as well.</p>\n"},{"tags":[],"owner":{"account_id":411191,"reputation":841,"user_id":783487,"accept_rate":86,"display_name":"Sam"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1333449089,"creation_date":1333449089,"answer_id":9991453,"question_id":1678520,"body_markdown":"I know this may not be your specific error, but I once had a leading space in my path and java would work but javac would not. \r\n\r\nFor what it&#39;s worth, I offer the sage advice: &quot;Examine your Path closely&quot;.","title":"javac not working in windows command prompt","body":"<p>I know this may not be your specific error, but I once had a leading space in my path and java would work but javac would not. </p>\n\n<p>For what it's worth, I offer the sage advice: \"Examine your Path closely\".</p>\n"},{"comments":[{"owner":{"account_id":1430200,"reputation":3112,"user_id":1352766,"accept_rate":82,"display_name":"Morgan Kenyon"},"score":0,"creation_date":1377738419,"post_id":10046715,"comment_id":27200999,"body_markdown":"For Step 4. I found that I had to select not jre&lt;yournumber&gt;, but jdk&lt;yournumber&gt;. Then everything else worked fine.","body":"For Step 4. I found that I had to select not jre&lt;yournumber&gt;, but jdk&lt;yournumber&gt;. Then everything else worked fine."},{"owner":{"account_id":1443280,"reputation":6009,"user_id":1362713,"accept_rate":100,"display_name":"M_R_K"},"score":0,"creation_date":1395014648,"post_id":10046715,"comment_id":34136185,"body_markdown":"Neat and Clear ! Best answer. Worked for me.","body":"Neat and Clear ! Best answer. Worked for me."},{"owner":{"account_id":4412342,"reputation":7113,"user_id":3594865,"accept_rate":82,"display_name":"sedeh"},"score":0,"creation_date":1412865667,"post_id":10046715,"comment_id":41234291,"body_markdown":"In my case, for step 4, I opened jdk. In essense, I had this for PATH: C:\\Program Files\\Java\\jdk1.7.0_67\\bin. javac.exe was not in the jre but in the jdk.","body":"In my case, for step 4, I opened jdk. In essense, I had this for PATH: C:\\Program Files\\Java\\jdk1.7.0_67\\bin. javac.exe was not in the jre but in the jdk."},{"owner":{"account_id":7564658,"reputation":1570,"user_id":5740760,"accept_rate":43,"display_name":"RAJESH KUMAR ARUMUGAM"},"score":0,"creation_date":1493975108,"post_id":10046715,"comment_id":74641195,"body_markdown":"Works for Me :)","body":"Works for Me :)"}],"tags":[],"owner":{"account_id":1385842,"reputation":871,"user_id":1317929,"display_name":"mike"},"comment_count":4,"down_vote_count":0,"up_vote_count":87,"is_accepted":false,"score":87,"last_activity_date":1442076287,"creation_date":1333732061,"answer_id":10046715,"question_id":1678520,"body_markdown":"Windows OS searches the current directory and the directories listed in the PATH environment variable for executable programs. JDK&#39;s programs (such as Java compiler javac.exe and Java runtime java.exe) reside in directory &quot;&lt;JAVA_HOME&gt;\\bin&quot; (where &lt;JAVA_HOME&gt; denotes the JDK installed directory, e.g., C:\\Program Files\\Java\\jdk1.8.0_xx). You need to include the &quot;&lt;JAVA_HOME&gt;\\bin&quot; directory in the PATH.\r\n\r\nTo edit the PATH environment variable in Windows XP/Vista/7/8:\r\n\r\n1. Control Panel ⇒ System ⇒ Advanced system settings\r\n\r\n2. Switch to &quot;Advanced&quot; tab ⇒ Environment Variables\r\n\r\n3. In &quot;System Variables&quot;, scroll down to select &quot;PATH&quot; ⇒ Edit\r\n\r\n(( now read the following 3 times before proceeding, **THERE IS NO UNDO** ))\r\n\r\nIn &quot;Variable value&quot; field, INSERT &quot;c:\\Program Files\\Java\\jdk1.8.0_xx\\bin&quot; (Replace xx with the upgrade number and VERIFY that this is your JDK&#39;s binary directory!!!) IN FRONT of all the existing directories, followed by a semi-colon (;) which separates the JDK&#39;s binary directory from the rest of the existing directories.\r\nDO NOT DELETE any existing entries; otherwise, some existing applications may not run.\r\n\r\n    Variable name  : PATH\r\n    Variable value : c:\\Program Files\\Java\\jdk1.8.0_xx\\bin;[existing entries...]\r\n\r\n![Screenshot ][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/7jqLF.png","title":"javac not working in windows command prompt","body":"<p>Windows OS searches the current directory and the directories listed in the PATH environment variable for executable programs. JDK's programs (such as Java compiler javac.exe and Java runtime java.exe) reside in directory \"\\bin\" (where  denotes the JDK installed directory, e.g., C:\\Program Files\\Java\\jdk1.8.0_xx). You need to include the \"\\bin\" directory in the PATH.</p>\n\n<p>To edit the PATH environment variable in Windows XP/Vista/7/8:</p>\n\n<ol>\n<li><p>Control Panel ⇒ System ⇒ Advanced system settings</p></li>\n<li><p>Switch to \"Advanced\" tab ⇒ Environment Variables</p></li>\n<li><p>In \"System Variables\", scroll down to select \"PATH\" ⇒ Edit</p></li>\n</ol>\n\n<p>(( now read the following 3 times before proceeding, <strong>THERE IS NO UNDO</strong> ))</p>\n\n<p>In \"Variable value\" field, INSERT \"c:\\Program Files\\Java\\jdk1.8.0_xx\\bin\" (Replace xx with the upgrade number and VERIFY that this is your JDK's binary directory!!!) IN FRONT of all the existing directories, followed by a semi-colon (;) which separates the JDK's binary directory from the rest of the existing directories.\nDO NOT DELETE any existing entries; otherwise, some existing applications may not run.</p>\n\n<pre><code>Variable name  : PATH\nVariable value : c:\\Program Files\\Java\\jdk1.8.0_xx\\bin;[existing entries...]\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/7jqLF.png\" alt=\"Screenshot \"></p>\n"},{"tags":[],"owner":{"account_id":1561015,"reputation":1,"user_id":1450883,"display_name":"Someone"},"comment_count":0,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1339494428,"creation_date":1339494428,"answer_id":10994136,"question_id":1678520,"body_markdown":"When i tried to make the .java to .class the command Javac didnt work. I got it working by going to C:\\Program Files (x86)\\Java\\jdk1.7.0_04\\bin and when i was on that directory I typed Javac.exe C\\Test\\test.java and it made the class with that tactic. Try that out.","title":"javac not working in windows command prompt","body":"<p>When i tried to make the .java to .class the command Javac didnt work. I got it working by going to C:\\Program Files (x86)\\Java\\jdk1.7.0_04\\bin and when i was on that directory I typed Javac.exe C\\Test\\test.java and it made the class with that tactic. Try that out.</p>\n"},{"tags":[],"owner":{"account_id":2746665,"reputation":11,"user_id":2366939,"display_name":"Sundararajan wasuvan"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1368114492,"creation_date":1368114492,"answer_id":16465822,"question_id":1678520,"body_markdown":"&quot;;C:\\Program Files\\Java\\jdk1.6.0\\bin&quot; sometime you may forget to put semicolon on last existing path.","title":"javac not working in windows command prompt","body":"<p>\";C:\\Program Files\\Java\\jdk1.6.0\\bin\" sometime you may forget to put semicolon on last existing path.</p>\n"},{"tags":[],"owner":{"account_id":2834008,"reputation":518,"user_id":2434973,"display_name":"Malay Desai"},"comment_count":0,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1375515149,"creation_date":1375515149,"answer_id":18030500,"question_id":1678520,"body_markdown":"Okay this can not be the case always but many of us have done this mistake in the past and few out of those are still not aware of it, which is, every time you append a path (any path) of any environment variable, you&#39;re likely to hit the space bar right after the &quot;semicolon&quot; (as you normally would, after the &quot;period&quot; while typing in an editor).  \r\n\r\nThis will create a leading space in the path e.g &quot; C:\\Program Files\\Java\\jdk1.6.0\\bin&quot; and therefore &quot;javac.exe&quot; won&#39;t be found by the system.\r\n","title":"javac not working in windows command prompt","body":"<p>Okay this can not be the case always but many of us have done this mistake in the past and few out of those are still not aware of it, which is, every time you append a path (any path) of any environment variable, you're likely to hit the space bar right after the \"semicolon\" (as you normally would, after the \"period\" while typing in an editor).  </p>\n\n<p>This will create a leading space in the path e.g \" C:\\Program Files\\Java\\jdk1.6.0\\bin\" and therefore \"javac.exe\" won't be found by the system.</p>\n"},{"comments":[{"owner":{"account_id":1007298,"reputation":340,"user_id":2436687,"display_name":"user31389"},"score":2,"creation_date":1451681719,"post_id":19770751,"comment_id":56863428,"body_markdown":"For invoking javac like that I had to use &quot;set PATH=%PATH%;%JAVA_HOME%\\bin&quot; (notice the added \\bin).","body":"For invoking javac like that I had to use &quot;set PATH=%PATH%;%JAVA_HOME%\\bin&quot; (notice the added \\bin)."}],"tags":[],"owner":{"account_id":149396,"reputation":11779,"user_id":361855,"accept_rate":58,"display_name":"Jason"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1383577850,"creation_date":1383577850,"answer_id":19770751,"question_id":1678520,"body_markdown":"Try the solutions here: http://techdem.centerkey.com/2009/05/javahome-command-script.html\r\n\r\nThese are much more robust to change -- like when you upgrade the JDK or JRE, since there is no hard coded path.\r\n\r\nThe quick solution (if you don&#39;t want to read the blog) is\r\n\r\n    C:\\&gt;for /d %i in (&quot;\\Program Files\\Java\\jdk*&quot;) do set JAVA_HOME=%i\r\n    C:\\&gt;set PATH=%PATH%;%JAVA_HOME%\r\n\r\nYou can then add these lines to a startup/login script.","title":"javac not working in windows command prompt","body":"<p>Try the solutions here: <a href=\"http://techdem.centerkey.com/2009/05/javahome-command-script.html\" rel=\"noreferrer\">http://techdem.centerkey.com/2009/05/javahome-command-script.html</a></p>\n\n<p>These are much more robust to change -- like when you upgrade the JDK or JRE, since there is no hard coded path.</p>\n\n<p>The quick solution (if you don't want to read the blog) is</p>\n\n<pre><code>C:\\&gt;for /d %i in (\"\\Program Files\\Java\\jdk*\") do set JAVA_HOME=%i\nC:\\&gt;set PATH=%PATH%;%JAVA_HOME%\n</code></pre>\n\n<p>You can then add these lines to a startup/login script.</p>\n"},{"tags":[],"owner":{"account_id":3641844,"reputation":3049,"user_id":3035746,"display_name":"TechDog"},"comment_count":0,"down_vote_count":0,"up_vote_count":39,"is_accepted":false,"score":39,"last_activity_date":1666884619,"creation_date":1388502414,"answer_id":20859212,"question_id":1678520,"body_markdown":"After a long Google, I came to know that javac.exe will be inside **JDK**(C:\\Program Files\\Java\\jdk(version number)\\bin) not inside **JRE** (C:\\Program Files (x86)\\Java\\jre7\\bin)  **&quot;JRE doesn&#39;t come with a compiler. It(JRE) is simply a java runtime environment. What you need is the Java development kit.&quot;** in order to use  compiler javac\r\n\r\njavac will not work if the path points to  **bin** inside **jre** folder\r\n\r\nIn order to use javac in cmd , JDK must be installed in your system...\r\n\r\n\r\n**For javac  path**\r\n\r\n**path = C:\\Program Files (x86)\\Java\\jre7\\bin**  this is wrong \r\n\r\n**path = C:\\Program Files\\Java\\jdk(version number)\\bin**  this is correct\r\n\r\nMake sure that &quot;javac.exe&quot; is inside your **&quot;C:\\Program Files\\Java\\jdk(version number)\\bin&quot;**\r\n\r\n\r\nDon&#39;t get confused with JRE and JDK  both are totally different \r\n\r\nif you don&#39;t have JDK pls download from this link \r\n\r\nhttps://jdk.java.net/\r\n\r\nor\r\n\r\nhttp://www.oracle.com/technetwork/java/javase/downloads/index.html\r\n\r\n\r\nreference thread for JDK VS JRE  https://stackoverflow.com/questions/1906445/what-is-the-difference-between-jdk-and-jre\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"javac not working in windows command prompt","body":"<p>After a long Google, I came to know that javac.exe will be inside <strong>JDK</strong>(C:\\Program Files\\Java\\jdk(version number)\\bin) not inside <strong>JRE</strong> (C:\\Program Files (x86)\\Java\\jre7\\bin)  <strong>&quot;JRE doesn't come with a compiler. It(JRE) is simply a java runtime environment. What you need is the Java development kit.&quot;</strong> in order to use  compiler javac</p>\n<p>javac will not work if the path points to  <strong>bin</strong> inside <strong>jre</strong> folder</p>\n<p>In order to use javac in cmd , JDK must be installed in your system...</p>\n<p><strong>For javac  path</strong></p>\n<p><strong>path = C:\\Program Files (x86)\\Java\\jre7\\bin</strong>  this is wrong</p>\n<p><strong>path = C:\\Program Files\\Java\\jdk(version number)\\bin</strong>  this is correct</p>\n<p>Make sure that &quot;javac.exe&quot; is inside your <strong>&quot;C:\\Program Files\\Java\\jdk(version number)\\bin&quot;</strong></p>\n<p>Don't get confused with JRE and JDK  both are totally different</p>\n<p>if you don't have JDK pls download from this link</p>\n<p><a href=\"https://jdk.java.net/\" rel=\"nofollow noreferrer\">https://jdk.java.net/</a></p>\n<p>or</p>\n<p><a href=\"http://www.oracle.com/technetwork/java/javase/downloads/index.html\" rel=\"nofollow noreferrer\">http://www.oracle.com/technetwork/java/javase/downloads/index.html</a></p>\n<p>reference thread for JDK VS JRE  <a href=\"https://stackoverflow.com/questions/1906445/what-is-the-difference-between-jdk-and-jre\">What is the difference between JDK and JRE?</a></p>\n"},{"tags":[],"owner":{"account_id":4105639,"reputation":1,"user_id":3369769,"display_name":"Taiton"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1430559591,"creation_date":1396280945,"answer_id":22766186,"question_id":1678520,"body_markdown":"I was having the same problem posted in this title. Java would work, but `javac` would not in the Windows command prompt (`cmd.exe`).\r\n\r\nFor me, it was simply that I had placed a space when adding `C:\\Program Files\\Java\\jdk1.8.0\\bin` to the end of my `%PATH%` environment variable.  \r\nRemove the space between the `;` and the next file path.","title":"javac not working in windows command prompt","body":"<p>I was having the same problem posted in this title. Java would work, but <code>javac</code> would not in the Windows command prompt (<code>cmd.exe</code>).</p>\n\n<p>For me, it was simply that I had placed a space when adding <code>C:\\Program Files\\Java\\jdk1.8.0\\bin</code> to the end of my <code>%PATH%</code> environment variable.<br>\nRemove the space between the <code>;</code> and the next file path.</p>\n"},{"tags":[],"owner":{"account_id":4607106,"reputation":21,"user_id":3736254,"display_name":"NewDev"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1402629689,"creation_date":1402629689,"answer_id":24197173,"question_id":1678520,"body_markdown":"Change the folder &quot;jdk1.7.0_45&quot; &quot;jdk1_7_0_60&quot; and update the path in Windows environment. Otherwise, the path ignores the dot at the front which stands for hidden file and so the folder is not displayed in PATH strings.","title":"javac not working in windows command prompt","body":"<p>Change the folder \"jdk1.7.0_45\" \"jdk1_7_0_60\" and update the path in Windows environment. Otherwise, the path ignores the dot at the front which stands for hidden file and so the folder is not displayed in PATH strings.</p>\n"},{"tags":[],"owner":{"account_id":5032587,"reputation":1,"user_id":4042340,"display_name":"Kevin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1410781809,"creation_date":1410780249,"answer_id":25846953,"question_id":1678520,"body_markdown":"I faced the exact same problem that java would work but javac would not on a cmd prompt in Windows 8.\r\n\r\nThe problem occured because I forgot to remove `&#39;&gt;&#39;` at the end of the path name, i.e., it was like this:\r\n\r\n    C:\\Program Files\\Java\\jdk*\\bin&gt;\r\n\r\nwhere it was suppose to be like this:\r\n\r\n    C:\\Program Files\\Java\\jdk*\\bin","title":"javac not working in windows command prompt","body":"<p>I faced the exact same problem that java would work but javac would not on a cmd prompt in Windows 8.</p>\n\n<p>The problem occured because I forgot to remove <code>'&gt;'</code> at the end of the path name, i.e., it was like this:</p>\n\n<pre><code>C:\\Program Files\\Java\\jdk*\\bin&gt;\n</code></pre>\n\n<p>where it was suppose to be like this:</p>\n\n<pre><code>C:\\Program Files\\Java\\jdk*\\bin\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user4433410"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1420729336,"creation_date":1420729336,"answer_id":27843094,"question_id":1678520,"body_markdown":"The path will only be set for the administrator account. Therefore it is important to launch command prompt as administrator, if you are not already.","title":"javac not working in windows command prompt","body":"<p>The path will only be set for the administrator account. Therefore it is important to launch command prompt as administrator, if you are not already.</p>\n"},{"tags":[],"owner":{"account_id":4121525,"reputation":1,"user_id":3381695,"display_name":"TRHUMMEL"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1422327357,"creation_date":1422324335,"answer_id":28162054,"question_id":1678520,"body_markdown":"Ensure you don&#39;t allow spaces (white space) in between paths in the Path variable. My problem was I had white space in and I believe Windows treated it as a NULL and didn&#39;t read my path in for Java.","title":"javac not working in windows command prompt","body":"<p>Ensure you don't allow spaces (white space) in between paths in the Path variable. My problem was I had white space in and I believe Windows treated it as a NULL and didn't read my path in for Java.</p>\n"},{"tags":[],"owner":{"account_id":2780952,"reputation":413,"user_id":2393517,"accept_rate":43,"display_name":"Neil"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1475014203,"creation_date":1475014203,"answer_id":39735131,"question_id":1678520,"body_markdown":"I appreciate this is an old question now but my solution wasn&#39;t an answer on here so posting it in case anyone else tries all the rest.\r\n\r\nIn my case, a previous install of the Java JRE (in ProgramData/Oracle/Java) had a path variable at the top of my list of path variables. The contents of that &quot;Oracle&quot; path had a java.exe but not a javac.exe.\r\nI added my full JDK path to the top of the list of path variables, ahead of the &quot;Oracle&quot; one, and it then picked up javac.exe as well as java.","title":"javac not working in windows command prompt","body":"<p>I appreciate this is an old question now but my solution wasn't an answer on here so posting it in case anyone else tries all the rest.</p>\n\n<p>In my case, a previous install of the Java JRE (in ProgramData/Oracle/Java) had a path variable at the top of my list of path variables. The contents of that \"Oracle\" path had a java.exe but not a javac.exe.\nI added my full JDK path to the top of the list of path variables, ahead of the \"Oracle\" one, and it then picked up javac.exe as well as java.</p>\n"},{"comments":[{"owner":{"account_id":4965921,"reputation":7744,"user_id":3995261,"accept_rate":71,"display_name":"YakovL"},"score":0,"creation_date":1504336075,"post_id":46011242,"comment_id":78982970,"body_markdown":"I&#39;d suggest to add more annotation to your answer directly instead of just providing a link: the link may get broken. Best regards","body":"I&#39;d suggest to add more annotation to your answer directly instead of just providing a link: the link may get broken. Best regards"}],"tags":[],"owner":{"account_id":6448782,"reputation":628,"user_id":4996446,"display_name":"Cristian Agudelo"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1504334706,"creation_date":1504334706,"answer_id":46011242,"question_id":1678520,"body_markdown":"    for /d %i in (&quot;\\Program Files\\Java\\jdk*&quot;) do set JAVA_HOME=%i\r\n    set JAVA_HOME\r\n\r\n[this][1] solution worked to me\r\n\r\n\r\n  [1]: http://blog.centerkey.com/2009/05/javahome-command-script.html","title":"javac not working in windows command prompt","body":"<pre><code>for /d %i in (\"\\Program Files\\Java\\jdk*\") do set JAVA_HOME=%i\nset JAVA_HOME\n</code></pre>\n\n<p><a href=\"http://blog.centerkey.com/2009/05/javahome-command-script.html\" rel=\"nofollow noreferrer\">this</a> solution worked to me</p>\n"}],"owner":{"account_id":45286,"reputation":3769,"user_id":133458,"accept_rate":100,"display_name":"Dom M."},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":616581,"favorite_count":0,"down_vote_count":1,"up_vote_count":139,"accepted_answer_id":1678526,"answer_count":17,"score":138,"last_activity_date":1666884619,"creation_date":1257398797,"question_id":1678520,"body_markdown":"I&#39;m trying to use `javac` with the windows command prompt, but it&#39;s not working.\r\n\r\nAfter adding the directory `&quot;C:\\Program Files\\Java\\jdk1.6.0_16\\bin\\&quot;` to the end of the `PATH` environment variable, the `java` command works fine, but using `javac` gives me the following error:\r\n\r\n&gt; &#39;javac&#39; is not recognized as an internal or external command, operable program or batch file.","title":"javac not working in windows command prompt","body":"<p>I'm trying to use <code>javac</code> with the windows command prompt, but it's not working.</p>\n\n<p>After adding the directory <code>\"C:\\Program Files\\Java\\jdk1.6.0_16\\bin\\\"</code> to the end of the <code>PATH</code> environment variable, the <code>java</code> command works fine, but using <code>javac</code> gives me the following error:</p>\n\n<blockquote>\n  <p>'javac' is not recognized as an internal or external command, operable program or batch file.</p>\n</blockquote>\n"},{"tags":["java","android","firebase","firebase-realtime-database","firebase-authentication"],"comments":[{"owner":{"account_id":353320,"reputation":6609,"user_id":690952,"display_name":"Selvin"},"score":0,"creation_date":1666779346,"post_id":74205985,"comment_id":131015130,"body_markdown":"you never use `mAuthListener` in other context than `removeAuthStateListener`","body":"you never use <code>mAuthListener</code> in other context than <code>removeAuthStateListener</code>"},{"owner":{"account_id":26715118,"reputation":21,"user_id":20319818,"display_name":"Nithin reddy"},"score":0,"creation_date":1666779557,"post_id":74205985,"comment_id":131015200,"body_markdown":"That wasn&#39;t clear. Can you add few more lines to that","body":"That wasn&#39;t clear. Can you add few more lines to that"},{"owner":{"account_id":353320,"reputation":6609,"user_id":690952,"display_name":"Selvin"},"score":0,"creation_date":1666782094,"post_id":74205985,"comment_id":131015986,"body_markdown":"You never set listener so how you expect to get it called","body":"You never set listener so how you expect to get it called"},{"owner":{"account_id":26715118,"reputation":21,"user_id":20319818,"display_name":"Nithin reddy"},"score":0,"creation_date":1666783965,"post_id":74205985,"comment_id":131016600,"body_markdown":"I added mAuth.addAuthStateListener(mAuthListener) method in onStart method but because of that line the app is getting crashed as soon as I enter the register activity, so I removed it. Can you help me in spotting the error that is causing the app to crash.","body":"I added mAuth.addAuthStateListener(mAuthListener) method in onStart method but because of that line the app is getting crashed as soon as I enter the register activity, so I removed it. Can you help me in spotting the error that is causing the app to crash."},{"owner":{"account_id":72426,"reputation":573804,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"score":0,"creation_date":1666794074,"post_id":74205985,"comment_id":131020492,"body_markdown":"When an app crashes, it writes an error message and stack trace to its logcat. Please find those, and add them to your question by clicking the `edit` link under it. Also see https://stackoverflow.com/questions/23353173/unfortunately-myapp-has-stopped-how-can-i-solve-this and https://stackoverflow.com/questions/3988788/what-is-a-stack-trace-and-how-can-i-use-it-to-debug-my-application-errors","body":"When an app crashes, it writes an error message and stack trace to its logcat. Please find those, and add them to your question by clicking the <code>edit</code> link under it. Also see <a href=\"https://stackoverflow.com/questions/23353173/unfortunately-myapp-has-stopped-how-can-i-solve-this\" title=\"unfortunately myapp has stopped how can i solve this\">stackoverflow.com/questions/23353173/&hellip;</a> and <a href=\"https://stackoverflow.com/questions/3988788/what-is-a-stack-trace-and-how-can-i-use-it-to-debug-my-application-errors\" title=\"what is a stack trace and how can i use it to debug my application errors\">stackoverflow.com/questions/3988788/&hellip;</a>"},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1666865198,"post_id":74205985,"comment_id":131038550,"body_markdown":"Please edit your question and add the information Frank asked for, and please also respond using @.","body":"Please edit your question and add the information Frank asked for, and please also respond using @."},{"owner":{"account_id":26715118,"reputation":21,"user_id":20319818,"display_name":"Nithin reddy"},"score":0,"creation_date":1666875002,"post_id":74205985,"comment_id":131041869,"body_markdown":"@FrankvanPuffelen Added the logcat message","body":"@FrankvanPuffelen Added the logcat message"}],"owner":{"account_id":26715118,"reputation":21,"user_id":20319818,"display_name":"Nithin reddy"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1666879706,"answer_count":0,"score":0,"last_activity_date":1666884242,"creation_date":1666778983,"question_id":74205985,"body_markdown":"**Problem**\r\nI want my user details to be saved in the real time database (Firebase) by using setUpFirebaseAuth() method but i observed that the method is not entering into OnAuthStateChanged() part of the code\r\n\r\n**Code**\r\n    \r\n    package com.example.movies4u;\r\n    \r\n    import static android.content.ContentValues.TAG;\r\n    \r\n    import androidx.annotation.NonNull;\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    \r\n    import android.annotation.SuppressLint;\r\n    import android.content.Intent;\r\n    import android.os.Bundle;\r\n    import android.util.Log;\r\n    import android.view.View;\r\n    import android.view.WindowManager;\r\n    import android.widget.Button;\r\n    import android.widget.EditText;\r\n    import android.widget.ProgressBar;\r\n    import android.widget.TextView;\r\n    import android.widget.Toast;\r\n    \r\n    import com.example.movies4u.Utils.FirebaseMethods;\r\n    import com.google.android.gms.tasks.OnCompleteListener;\r\n    import com.google.android.gms.tasks.OnFailureListener;\r\n    import com.google.android.gms.tasks.Task;\r\n    import com.google.firebase.auth.AuthResult;\r\n    import com.google.firebase.auth.FirebaseAuth;\r\n    import com.google.firebase.auth.FirebaseAuthUserCollisionException;\r\n    import com.google.firebase.auth.FirebaseUser;\r\n    import com.google.firebase.database.DataSnapshot;\r\n    import com.google.firebase.database.DatabaseError;\r\n    import com.google.firebase.database.DatabaseReference;\r\n    import com.google.firebase.database.FirebaseDatabase;\r\n    import com.google.firebase.database.ValueEventListener;\r\n    \r\n    public class activity_register extends AppCompatActivity {\r\n        TextView HaveAccount;\r\n        EditText inputUsername,inputEmail,inputPassword,inputConfirmPassword;\r\n        String username,email,password;\r\n        Button btnRegister;\r\n        FirebaseAuth mAuth;\r\n        ProgressBar pb;\r\n        private String userID;\r\n        private FirebaseAuth.AuthStateListener mAuthListener;\r\n        private FirebaseMethods firebaseMethods;\r\n        private FirebaseDatabase mFirebaseDatabase;\r\n        private DatabaseReference myRef;\r\n    \r\n        private String append;\r\n    \r\n        @SuppressLint(&quot;MissingInflatedId&quot;)\r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN); //Hide status Bar\r\n            setContentView(R.layout.activity_register);\r\n            firebaseMethods =new FirebaseMethods(activity_register.this);\r\n    \r\n            HaveAccount= (TextView) findViewById(R.id.HaveAccount);\r\n            pb = findViewById(R.id.progressBar3);\r\n            inputUsername=findViewById(R.id.inputUsername);\r\n            inputEmail=findViewById(R.id.inputEmail);\r\n            inputPassword=findViewById(R.id.inputPassword);\r\n            inputConfirmPassword=findViewById(R.id.inputConfirmPassword);\r\n            btnRegister=findViewById(R.id.btnRegister);\r\n            username=inputUsername.getText().toString();\r\n            email=inputEmail.getText().toString();\r\n            password=inputPassword.getText().toString();\r\n    \r\n            pb.setVisibility(View.GONE);\r\n            HaveAccount.setOnClickListener(view -&gt; {\r\n                Intent loginintent=new Intent(activity_register.this,login_activity.class);\r\n                startActivity(loginintent);\r\n            });\r\n    \r\n            mAuth=FirebaseAuth.getInstance();\r\n            btnRegister.setOnClickListener(view -&gt; ValidateDataandDoRegister());\r\n        }\r\n    \r\n        private void ValidateDataandDoRegister() {\r\n            String username=inputUsername.getText().toString().trim();\r\n            String email=inputEmail.getText().toString().trim();\r\n            String password=inputPassword.getText().toString().trim();\r\n            String confirmPassword=inputConfirmPassword.getText().toString().trim();\r\n            if(email.isEmpty()){\r\n                inputEmail.setError(&quot;Enter Email Address&quot;);\r\n                inputEmail.requestFocus();\r\n                pb.setVisibility(View.GONE);\r\n            }\r\n            else if(email.length()&lt;10){\r\n                inputEmail.setError(&quot;Enter valid Email&quot;);\r\n                inputEmail.requestFocus();\r\n                pb.setVisibility(View.GONE);\r\n            }\r\n            else if(password.isEmpty()){\r\n                inputPassword.setError(&quot;Enter the password&quot;);\r\n                inputPassword.requestFocus();\r\n                pb.setVisibility(View.GONE);\r\n            }\r\n            else if(password.length()&lt;8){\r\n                inputPassword.setError(&quot;Password should be greater than 8 characters&quot;);\r\n                inputPassword.requestFocus();\r\n                pb.setVisibility(View.GONE);\r\n            }\r\n            else if(confirmPassword.isEmpty()){\r\n                inputConfirmPassword.setError(&quot;Re-Enter the Password&quot;);\r\n                inputConfirmPassword.requestFocus();\r\n                pb.setVisibility(View.GONE);\r\n            }\r\n            else if(confirmPassword.length()&lt;8){\r\n                inputConfirmPassword.setError(&quot;Password should be greater than 8 characters&quot;);\r\n                inputConfirmPassword.requestFocus();\r\n                pb.setVisibility(View.GONE);\r\n            }\r\n            else if(!password.equals(confirmPassword)){\r\n                inputPassword.setError(&quot;Password not matched&quot;);\r\n                inputPassword.requestFocus();\r\n                inputConfirmPassword.setError(&quot;Password not matched&quot;);\r\n                inputConfirmPassword.requestFocus();\r\n                inputPassword.setText(&quot;&quot;);\r\n                inputConfirmPassword.setText(&quot;&quot;);\r\n                pb.setVisibility(View.GONE);\r\n            }\r\n            else{\r\n                pb.setVisibility(View.VISIBLE);\r\n                doRegister(username,email,password);\r\n            }\r\n        }\r\n    \r\n        private void doRegister(String username,String email, String password) {\r\n            pb.setVisibility(View.VISIBLE);\r\n            mAuth.createUserWithEmailAndPassword(email, password).addOnSuccessListener(task -&gt; {\r\n                if(task != null ){\r\n                    if(mAuth.getCurrentUser() != null){\r\n                        userID=mAuth.getCurrentUser().getUid();\r\n                    }\r\n                    setupFirebaseAuth();\r\n                }\r\n    \r\n            }).addOnFailureListener(e -&gt; {\r\n                if(e instanceof FirebaseAuthUserCollisionException){\r\n                    btnRegister.setEnabled(true);\r\n                    inputEmail.setError(&quot;Email Already Registered&quot;);\r\n                    pb.setVisibility(View.GONE);\r\n                    inputEmail.requestFocus();\r\n                }\r\n                else{\r\n                    btnRegister.setEnabled(true);\r\n                    pb.setVisibility(View.GONE);\r\n                    Toast.makeText(activity_register.this, &quot;Oops! Something Went wrong&quot;, Toast.LENGTH_SHORT).show();\r\n                }\r\n            });\r\n        }\r\n    \r\n        private void sendVerificationEmail() {\r\n            mAuth.getCurrentUser().sendEmailVerification().addOnCompleteListener(task -&gt; {\r\n                if(task != null &amp;&amp; task.isSuccessful()){\r\n                    btnRegister.setEnabled(true);\r\n                    pb.setVisibility(View.GONE);\r\n                    Toast.makeText(activity_register.this, &quot;Email has been sent to your email address&quot;, Toast.LENGTH_SHORT).show();\r\n                }\r\n                else {\r\n                    btnRegister.setEnabled(true);\r\n                    pb.setVisibility(View.GONE);\r\n                    Toast.makeText(getApplicationContext(), &quot;Oops! failed to send verification email&quot;,Toast.LENGTH_SHORT).show();\r\n                }\r\n            });\r\n        }\r\n    \r\n    \r\n        /*\r\n        ------------------------------------ Firebase ---------------------------------------------\r\n         */\r\n    \r\n        /**\r\n         * Setup the firebase auth object\r\n         */\r\n        private void setupFirebaseAuth(){\r\n            Log.d(TAG, &quot;setupFirebaseAuth: setting up firebase auth.&quot;);\r\n    \r\n            mAuth = FirebaseAuth.getInstance();\r\n            mFirebaseDatabase = FirebaseDatabase.getInstance();\r\n            myRef = mFirebaseDatabase.getReference();\r\n    \r\n            //cannot get into this part of code\r\n            mAuthListener = new FirebaseAuth.AuthStateListener() {\r\n                @Override\r\n                public void onAuthStateChanged(@NonNull FirebaseAuth firebaseAuth) {\r\n                    FirebaseUser user=firebaseAuth.getCurrentUser();\r\n                    if (user != null) {\r\n                        // User is signed in\r\n                        Log.d(TAG, &quot;onAuthStateChanged:signed_in:&quot; + user.getUid());\r\n    \r\n                        myRef.addListenerForSingleValueEvent(new ValueEventListener() {\r\n                            @Override\r\n                            public void onDataChange(DataSnapshot dataSnapshot) {\r\n                                //1st check: Make sure the username is not already in use\r\n                                if(firebaseMethods.checkIfUsernameExists(username, dataSnapshot)){\r\n                                    //to randomly generate key to make sure username is unique\r\n                                    append = myRef.push().getKey().substring(3,10);\r\n                                    Log.d(TAG, &quot;onDataChange: username already exists. Appending random string to name: &quot; + append);\r\n                                }\r\n                                username = username + append;\r\n    \r\n                                //add new user to the database\r\n                                firebaseMethods.addNewUser(email, username);\r\n                                Toast.makeText(activity_register.this, &quot;SignUp successful&quot;, Toast.LENGTH_SHORT).show();\r\n                            }\r\n    \r\n                            @Override\r\n                            public void onCancelled(DatabaseError databaseError) {\r\n                                Toast.makeText(activity_register.this, &quot;unsuccessful&quot;, Toast.LENGTH_SHORT).show();\r\n                            }\r\n                        });\r\n                        finish();\r\n    \r\n                    } else {\r\n                        // User is signed out\r\n                        Toast.makeText(activity_register.this, &quot;unsuccessful&quot;, Toast.LENGTH_SHORT).show();\r\n                        Log.d(TAG, &quot;onAuthStateChanged:signed _out&quot;);\r\n                    }\r\n                    // ...\r\n                }\r\n            };\r\n        }\r\n    \r\n        @Override\r\n        public void onStart() {\r\n            super.onStart();\r\n        }\r\n    \r\n        @Override\r\n        public void onStop() {\r\n            super.onStop();\r\n            if (mAuthListener != null) {\r\n                mAuth.removeAuthStateListener(mAuthListener);\r\n            }\r\n        }\r\n    \r\n    }\r\n    \r\n    \r\n    \r\n**FirebaseMethods**\r\n    \r\n    \r\n    ```\r\n    package com.example.movies4u.Utils;\r\n    \r\n    import android.content.Context;\r\n    import android.util.Log;\r\n    import android.widget.Toast;\r\n    \r\n    import androidx.annotation.NonNull;\r\n    \r\n    import com.example.movies4u.Models.User;\r\n    import com.example.movies4u.Models.UserAccountSettings;\r\n    import com.example.movies4u.R;\r\n    import com.google.android.gms.tasks.OnCompleteListener;\r\n    import com.google.android.gms.tasks.OnFailureListener;\r\n    import com.google.android.gms.tasks.OnSuccessListener;\r\n    import com.google.android.gms.tasks.Task;\r\n    import com.google.firebase.auth.AuthResult;\r\n    import com.google.firebase.auth.FirebaseAuth;\r\n    import com.google.firebase.database.DataSnapshot;\r\n    import com.google.firebase.database.DatabaseReference;\r\n    import com.google.firebase.database.FirebaseDatabase;\r\n    \r\n    public class FirebaseMethods {\r\n        private static final String TAG=&quot;FirebaseMethods&quot;;\r\n    \r\n        //Firebase\r\n        private FirebaseAuth mAuth;\r\n        private FirebaseAuth.AuthStateListener mAuthListener;\r\n        private FirebaseDatabase mFirebaseDatabase;\r\n        private DatabaseReference myRef;\r\n        private String userID;\r\n    \r\n        private Context mContext;\r\n    \r\n        public FirebaseMethods(Context context){\r\n            mAuth=FirebaseAuth.getInstance();\r\n            mFirebaseDatabase =FirebaseDatabase.getInstance();\r\n            myRef=mFirebaseDatabase.getReference();\r\n            mContext =context;\r\n    \r\n            if(mAuth.getCurrentUser() !=null){\r\n                userID =mAuth.getCurrentUser().getUid();\r\n            }\r\n        }\r\n    \r\n        public boolean checkIfUsernameExists(String username, DataSnapshot dataSnapshot){\r\n            User user =new User();\r\n            for (DataSnapshot ds: dataSnapshot.child(userID).getChildren()){\r\n                user.setUsername(ds.getValue(User.class).getUsername());\r\n    \r\n                if(StringManipulation.expandUsername(user.getUsername()).equals(username)){\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n    \r\n        /**\r\n         * Registering a new email and password\r\n         * @param username\r\n         * @param email\r\n         * @param password\r\n         */\r\n        public void registerNewEmail(final String username,final String email,String password){\r\n            mAuth.createUserWithEmailAndPassword(email, password)\r\n                    .addOnCompleteListener(new OnCompleteListener&lt;AuthResult&gt;() {\r\n                        @Override\r\n                        public void onComplete(@NonNull Task&lt;AuthResult&gt; task) {\r\n                            if(!task.isSuccessful()){\r\n                                Toast.makeText(mContext, R.string.auth_failed, Toast.LENGTH_SHORT).show();\r\n                            }\r\n                            else if(task.isSuccessful()){\r\n                                userID=mAuth.getCurrentUser().getUid();\r\n                            }\r\n                        }\r\n                    });\r\n        }\r\n    \r\n        public void addNewUser(String email, String username){\r\n            User user=new User(email,username);\r\n            if(userID!=null)\r\n            {\r\n                myRef.child(mContext.getString(R.string.dbname_users))\r\n                        .child(userID)\r\n                        .setValue(user).addOnSuccessListener(new OnSuccessListener&lt;Void&gt;() {\r\n                            @Override\r\n                            public void onSuccess(Void unused) {\r\n                                Log.d(TAG, &quot;user added&quot;);\r\n                                Toast.makeText(mContext, &quot;user added&quot;, Toast.LENGTH_SHORT).show();\r\n                            }\r\n                        }).addOnFailureListener(new OnFailureListener() {\r\n                            @Override\r\n                            public void onFailure(@NonNull Exception e) {\r\n                                Log.d(TAG, &quot;user not added&quot;);\r\n                                Toast.makeText(mContext, e.getMessage(), Toast.LENGTH_SHORT).show();\r\n                            }\r\n                        });\r\n    \r\n                UserAccountSettings settings = new UserAccountSettings(username, username);\r\n    \r\n                myRef.child(mContext.getString(R.string.dbname_user_account_settings))\r\n                        .child(userID)\r\n                        .setValue(settings);\r\n            }\r\n            else {\r\n                Log.d(TAG, &quot;user is null&quot;);\r\n            }\r\n    \r\n    \r\n        }\r\n    \r\n    \r\n    }\r\n    \r\n    ```\r\n\r\n\r\nI tried directly calling my method\r\nfirebaseMethods.addNewUser(email, username);\r\nbut I am getting an error in addNewUser method as UserId is null.\r\nI am expecting to make sure that the User details gets added in database just after the user clicks the register button by making sure that the UserId is not null.\r\n\r\n**Tried** \r\n\r\nadding mAuth.addAuthStateListener(mAuthListener) method in onStart method\r\n\r\n**Error**\r\n\r\nShows a null pointer exception in logcat, when i try to start the register activity\r\n\r\n**Logcat message**\r\n\r\n    FATAL EXCEPTION: main\r\n                                                                                                    \r\n    Process: com.example.movies4u, PID: 6821\r\n                                                                                                    \r\n    java.lang.NullPointerException: Attempt to invoke interface method &#39;void com.google.firebase.auth.FirebaseAuth$AuthStateListener.onAuthStateChanged(com.google.firebase.auth.FirebaseAuth)&#39; on a null object reference\r\n                                                                                                    \t \r\n    at com.google.firebase.auth.zzl.run(com.google.firebase:firebase-auth@@21.0.3:1)\r\n                                                                                                    \t \r\n    at android.os.Handler.handleCallback(Handler.java:873)\r\n                                                                                                    \t \r\n    at android.os.Handler.dispatchMessage(Handler.java:99)\r\n                                                                                                    \t \r\n    at android.os.Looper.loop(Looper.java:224)\r\n                                                                                                    \t \r\n    at android.app.ActivityThread.main(ActivityThread.java:7081)\r\n                                                                                                    \t \r\n    at java.lang.reflect.Method.invoke(Native Method)\r\n                                                                                                    \t \r\n    at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:604)\r\n                                                                                                    \t \r\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:928)","title":"Cannot get inside of OnAuthStateChanged() part of the code","body":"<p><strong>Problem</strong>\nI want my user details to be saved in the real time database (Firebase) by using setUpFirebaseAuth() method but i observed that the method is not entering into OnAuthStateChanged() part of the code</p>\n<p><strong>Code</strong></p>\n<pre><code>package com.example.movies4u;\n\nimport static android.content.ContentValues.TAG;\n\nimport androidx.annotation.NonNull;\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.annotation.SuppressLint;\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.view.View;\nimport android.view.WindowManager;\nimport android.widget.Button;\nimport android.widget.EditText;\nimport android.widget.ProgressBar;\nimport android.widget.TextView;\nimport android.widget.Toast;\n\nimport com.example.movies4u.Utils.FirebaseMethods;\nimport com.google.android.gms.tasks.OnCompleteListener;\nimport com.google.android.gms.tasks.OnFailureListener;\nimport com.google.android.gms.tasks.Task;\nimport com.google.firebase.auth.AuthResult;\nimport com.google.firebase.auth.FirebaseAuth;\nimport com.google.firebase.auth.FirebaseAuthUserCollisionException;\nimport com.google.firebase.auth.FirebaseUser;\nimport com.google.firebase.database.DataSnapshot;\nimport com.google.firebase.database.DatabaseError;\nimport com.google.firebase.database.DatabaseReference;\nimport com.google.firebase.database.FirebaseDatabase;\nimport com.google.firebase.database.ValueEventListener;\n\npublic class activity_register extends AppCompatActivity {\n    TextView HaveAccount;\n    EditText inputUsername,inputEmail,inputPassword,inputConfirmPassword;\n    String username,email,password;\n    Button btnRegister;\n    FirebaseAuth mAuth;\n    ProgressBar pb;\n    private String userID;\n    private FirebaseAuth.AuthStateListener mAuthListener;\n    private FirebaseMethods firebaseMethods;\n    private FirebaseDatabase mFirebaseDatabase;\n    private DatabaseReference myRef;\n\n    private String append;\n\n    @SuppressLint(&quot;MissingInflatedId&quot;)\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN); //Hide status Bar\n        setContentView(R.layout.activity_register);\n        firebaseMethods =new FirebaseMethods(activity_register.this);\n\n        HaveAccount= (TextView) findViewById(R.id.HaveAccount);\n        pb = findViewById(R.id.progressBar3);\n        inputUsername=findViewById(R.id.inputUsername);\n        inputEmail=findViewById(R.id.inputEmail);\n        inputPassword=findViewById(R.id.inputPassword);\n        inputConfirmPassword=findViewById(R.id.inputConfirmPassword);\n        btnRegister=findViewById(R.id.btnRegister);\n        username=inputUsername.getText().toString();\n        email=inputEmail.getText().toString();\n        password=inputPassword.getText().toString();\n\n        pb.setVisibility(View.GONE);\n        HaveAccount.setOnClickListener(view -&gt; {\n            Intent loginintent=new Intent(activity_register.this,login_activity.class);\n            startActivity(loginintent);\n        });\n\n        mAuth=FirebaseAuth.getInstance();\n        btnRegister.setOnClickListener(view -&gt; ValidateDataandDoRegister());\n    }\n\n    private void ValidateDataandDoRegister() {\n        String username=inputUsername.getText().toString().trim();\n        String email=inputEmail.getText().toString().trim();\n        String password=inputPassword.getText().toString().trim();\n        String confirmPassword=inputConfirmPassword.getText().toString().trim();\n        if(email.isEmpty()){\n            inputEmail.setError(&quot;Enter Email Address&quot;);\n            inputEmail.requestFocus();\n            pb.setVisibility(View.GONE);\n        }\n        else if(email.length()&lt;10){\n            inputEmail.setError(&quot;Enter valid Email&quot;);\n            inputEmail.requestFocus();\n            pb.setVisibility(View.GONE);\n        }\n        else if(password.isEmpty()){\n            inputPassword.setError(&quot;Enter the password&quot;);\n            inputPassword.requestFocus();\n            pb.setVisibility(View.GONE);\n        }\n        else if(password.length()&lt;8){\n            inputPassword.setError(&quot;Password should be greater than 8 characters&quot;);\n            inputPassword.requestFocus();\n            pb.setVisibility(View.GONE);\n        }\n        else if(confirmPassword.isEmpty()){\n            inputConfirmPassword.setError(&quot;Re-Enter the Password&quot;);\n            inputConfirmPassword.requestFocus();\n            pb.setVisibility(View.GONE);\n        }\n        else if(confirmPassword.length()&lt;8){\n            inputConfirmPassword.setError(&quot;Password should be greater than 8 characters&quot;);\n            inputConfirmPassword.requestFocus();\n            pb.setVisibility(View.GONE);\n        }\n        else if(!password.equals(confirmPassword)){\n            inputPassword.setError(&quot;Password not matched&quot;);\n            inputPassword.requestFocus();\n            inputConfirmPassword.setError(&quot;Password not matched&quot;);\n            inputConfirmPassword.requestFocus();\n            inputPassword.setText(&quot;&quot;);\n            inputConfirmPassword.setText(&quot;&quot;);\n            pb.setVisibility(View.GONE);\n        }\n        else{\n            pb.setVisibility(View.VISIBLE);\n            doRegister(username,email,password);\n        }\n    }\n\n    private void doRegister(String username,String email, String password) {\n        pb.setVisibility(View.VISIBLE);\n        mAuth.createUserWithEmailAndPassword(email, password).addOnSuccessListener(task -&gt; {\n            if(task != null ){\n                if(mAuth.getCurrentUser() != null){\n                    userID=mAuth.getCurrentUser().getUid();\n                }\n                setupFirebaseAuth();\n            }\n\n        }).addOnFailureListener(e -&gt; {\n            if(e instanceof FirebaseAuthUserCollisionException){\n                btnRegister.setEnabled(true);\n                inputEmail.setError(&quot;Email Already Registered&quot;);\n                pb.setVisibility(View.GONE);\n                inputEmail.requestFocus();\n            }\n            else{\n                btnRegister.setEnabled(true);\n                pb.setVisibility(View.GONE);\n                Toast.makeText(activity_register.this, &quot;Oops! Something Went wrong&quot;, Toast.LENGTH_SHORT).show();\n            }\n        });\n    }\n\n    private void sendVerificationEmail() {\n        mAuth.getCurrentUser().sendEmailVerification().addOnCompleteListener(task -&gt; {\n            if(task != null &amp;&amp; task.isSuccessful()){\n                btnRegister.setEnabled(true);\n                pb.setVisibility(View.GONE);\n                Toast.makeText(activity_register.this, &quot;Email has been sent to your email address&quot;, Toast.LENGTH_SHORT).show();\n            }\n            else {\n                btnRegister.setEnabled(true);\n                pb.setVisibility(View.GONE);\n                Toast.makeText(getApplicationContext(), &quot;Oops! failed to send verification email&quot;,Toast.LENGTH_SHORT).show();\n            }\n        });\n    }\n\n\n    /*\n    ------------------------------------ Firebase ---------------------------------------------\n     */\n\n    /**\n     * Setup the firebase auth object\n     */\n    private void setupFirebaseAuth(){\n        Log.d(TAG, &quot;setupFirebaseAuth: setting up firebase auth.&quot;);\n\n        mAuth = FirebaseAuth.getInstance();\n        mFirebaseDatabase = FirebaseDatabase.getInstance();\n        myRef = mFirebaseDatabase.getReference();\n\n        //cannot get into this part of code\n        mAuthListener = new FirebaseAuth.AuthStateListener() {\n            @Override\n            public void onAuthStateChanged(@NonNull FirebaseAuth firebaseAuth) {\n                FirebaseUser user=firebaseAuth.getCurrentUser();\n                if (user != null) {\n                    // User is signed in\n                    Log.d(TAG, &quot;onAuthStateChanged:signed_in:&quot; + user.getUid());\n\n                    myRef.addListenerForSingleValueEvent(new ValueEventListener() {\n                        @Override\n                        public void onDataChange(DataSnapshot dataSnapshot) {\n                            //1st check: Make sure the username is not already in use\n                            if(firebaseMethods.checkIfUsernameExists(username, dataSnapshot)){\n                                //to randomly generate key to make sure username is unique\n                                append = myRef.push().getKey().substring(3,10);\n                                Log.d(TAG, &quot;onDataChange: username already exists. Appending random string to name: &quot; + append);\n                            }\n                            username = username + append;\n\n                            //add new user to the database\n                            firebaseMethods.addNewUser(email, username);\n                            Toast.makeText(activity_register.this, &quot;SignUp successful&quot;, Toast.LENGTH_SHORT).show();\n                        }\n\n                        @Override\n                        public void onCancelled(DatabaseError databaseError) {\n                            Toast.makeText(activity_register.this, &quot;unsuccessful&quot;, Toast.LENGTH_SHORT).show();\n                        }\n                    });\n                    finish();\n\n                } else {\n                    // User is signed out\n                    Toast.makeText(activity_register.this, &quot;unsuccessful&quot;, Toast.LENGTH_SHORT).show();\n                    Log.d(TAG, &quot;onAuthStateChanged:signed _out&quot;);\n                }\n                // ...\n            }\n        };\n    }\n\n    @Override\n    public void onStart() {\n        super.onStart();\n    }\n\n    @Override\n    public void onStop() {\n        super.onStop();\n        if (mAuthListener != null) {\n            mAuth.removeAuthStateListener(mAuthListener);\n        }\n    }\n\n}\n</code></pre>\n<p><strong>FirebaseMethods</strong></p>\n<pre><code>```\npackage com.example.movies4u.Utils;\n\nimport android.content.Context;\nimport android.util.Log;\nimport android.widget.Toast;\n\nimport androidx.annotation.NonNull;\n\nimport com.example.movies4u.Models.User;\nimport com.example.movies4u.Models.UserAccountSettings;\nimport com.example.movies4u.R;\nimport com.google.android.gms.tasks.OnCompleteListener;\nimport com.google.android.gms.tasks.OnFailureListener;\nimport com.google.android.gms.tasks.OnSuccessListener;\nimport com.google.android.gms.tasks.Task;\nimport com.google.firebase.auth.AuthResult;\nimport com.google.firebase.auth.FirebaseAuth;\nimport com.google.firebase.database.DataSnapshot;\nimport com.google.firebase.database.DatabaseReference;\nimport com.google.firebase.database.FirebaseDatabase;\n\npublic class FirebaseMethods {\n    private static final String TAG=&quot;FirebaseMethods&quot;;\n\n    //Firebase\n    private FirebaseAuth mAuth;\n    private FirebaseAuth.AuthStateListener mAuthListener;\n    private FirebaseDatabase mFirebaseDatabase;\n    private DatabaseReference myRef;\n    private String userID;\n\n    private Context mContext;\n\n    public FirebaseMethods(Context context){\n        mAuth=FirebaseAuth.getInstance();\n        mFirebaseDatabase =FirebaseDatabase.getInstance();\n        myRef=mFirebaseDatabase.getReference();\n        mContext =context;\n\n        if(mAuth.getCurrentUser() !=null){\n            userID =mAuth.getCurrentUser().getUid();\n        }\n    }\n\n    public boolean checkIfUsernameExists(String username, DataSnapshot dataSnapshot){\n        User user =new User();\n        for (DataSnapshot ds: dataSnapshot.child(userID).getChildren()){\n            user.setUsername(ds.getValue(User.class).getUsername());\n\n            if(StringManipulation.expandUsername(user.getUsername()).equals(username)){\n                return true;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Registering a new email and password\n     * @param username\n     * @param email\n     * @param password\n     */\n    public void registerNewEmail(final String username,final String email,String password){\n        mAuth.createUserWithEmailAndPassword(email, password)\n                .addOnCompleteListener(new OnCompleteListener&lt;AuthResult&gt;() {\n                    @Override\n                    public void onComplete(@NonNull Task&lt;AuthResult&gt; task) {\n                        if(!task.isSuccessful()){\n                            Toast.makeText(mContext, R.string.auth_failed, Toast.LENGTH_SHORT).show();\n                        }\n                        else if(task.isSuccessful()){\n                            userID=mAuth.getCurrentUser().getUid();\n                        }\n                    }\n                });\n    }\n\n    public void addNewUser(String email, String username){\n        User user=new User(email,username);\n        if(userID!=null)\n        {\n            myRef.child(mContext.getString(R.string.dbname_users))\n                    .child(userID)\n                    .setValue(user).addOnSuccessListener(new OnSuccessListener&lt;Void&gt;() {\n                        @Override\n                        public void onSuccess(Void unused) {\n                            Log.d(TAG, &quot;user added&quot;);\n                            Toast.makeText(mContext, &quot;user added&quot;, Toast.LENGTH_SHORT).show();\n                        }\n                    }).addOnFailureListener(new OnFailureListener() {\n                        @Override\n                        public void onFailure(@NonNull Exception e) {\n                            Log.d(TAG, &quot;user not added&quot;);\n                            Toast.makeText(mContext, e.getMessage(), Toast.LENGTH_SHORT).show();\n                        }\n                    });\n\n            UserAccountSettings settings = new UserAccountSettings(username, username);\n\n            myRef.child(mContext.getString(R.string.dbname_user_account_settings))\n                    .child(userID)\n                    .setValue(settings);\n        }\n        else {\n            Log.d(TAG, &quot;user is null&quot;);\n        }\n\n\n    }\n\n\n}\n\n```\n</code></pre>\n<p>I tried directly calling my method\nfirebaseMethods.addNewUser(email, username);\nbut I am getting an error in addNewUser method as UserId is null.\nI am expecting to make sure that the User details gets added in database just after the user clicks the register button by making sure that the UserId is not null.</p>\n<p><strong>Tried</strong></p>\n<p>adding mAuth.addAuthStateListener(mAuthListener) method in onStart method</p>\n<p><strong>Error</strong></p>\n<p>Shows a null pointer exception in logcat, when i try to start the register activity</p>\n<p><strong>Logcat message</strong></p>\n<pre><code>FATAL EXCEPTION: main\n                                                                                                \nProcess: com.example.movies4u, PID: 6821\n                                                                                                \njava.lang.NullPointerException: Attempt to invoke interface method 'void com.google.firebase.auth.FirebaseAuth$AuthStateListener.onAuthStateChanged(com.google.firebase.auth.FirebaseAuth)' on a null object reference\n                                                                                                     \nat com.google.firebase.auth.zzl.run(com.google.firebase:firebase-auth@@21.0.3:1)\n                                                                                                     \nat android.os.Handler.handleCallback(Handler.java:873)\n                                                                                                     \nat android.os.Handler.dispatchMessage(Handler.java:99)\n                                                                                                     \nat android.os.Looper.loop(Looper.java:224)\n                                                                                                     \nat android.app.ActivityThread.main(ActivityThread.java:7081)\n                                                                                                     \nat java.lang.reflect.Method.invoke(Native Method)\n                                                                                                     \nat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:604)\n                                                                                                     \nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:928)\n</code></pre>\n"},{"tags":["java","oracle","mybatis","ibatis"],"comments":[{"owner":{"account_id":8211,"reputation":23893,"user_id":14663,"accept_rate":88,"display_name":"WW."},"score":0,"creation_date":1433817954,"post_id":30721898,"comment_id":49501693,"body_markdown":"possible duplicate of [Iterate list of Objects in Ibatis](http://stackoverflow.com/questions/3360070/iterate-list-of-objects-in-ibatis)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/3360070/iterate-list-of-objects-in-ibatis\">Iterate list of Objects in Ibatis</a>"},{"owner":{"account_id":6340456,"reputation":49,"user_id":4922538,"display_name":"Nil"},"score":0,"creation_date":1433819621,"post_id":30721898,"comment_id":49502107,"body_markdown":"The examples in the link shows the use of IN operator but I can&#39;t use IN here because I have wild card in the search.","body":"The examples in the link shows the use of IN operator but I can&#39;t use IN here because I have wild card in the search."},{"owner":{"account_id":8211,"reputation":23893,"user_id":14663,"accept_rate":88,"display_name":"WW."},"score":0,"creation_date":1434104446,"post_id":30721898,"comment_id":49649705,"body_markdown":"You don&#39;t have to use IN, you can adapt that example to generate multiple OR conditions","body":"You don&#39;t have to use IN, you can adapt that example to generate multiple OR conditions"}],"answers":[{"tags":[],"owner":{"account_id":7990930,"reputation":4132,"user_id":6028807,"display_name":"Miss Chanandler Bong"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1666884012,"creation_date":1666884012,"answer_id":74224469,"question_id":30721898,"body_markdown":"Here is an example of how to do that:\r\n\r\nMapper Class:\r\n```java\r\nList&lt;MyEntity&gt; search(String terms);\r\n```\r\n\r\nMapper XML:\r\n```\r\n&lt;select id=&quot;search&quot; resultMap=&quot;myEntityResultMap&quot;&gt;\r\n    SELECT * FROM `my_table`\r\n    &lt;if test=&quot;_parameter != null&quot;&gt;\r\n        &lt;where&gt;\r\n            &lt;foreach collection=&quot;_parameter.split(&#39;\\\\s+&#39;)&quot; item=&quot;item&quot; open=&quot;(&quot; close=&quot;)&quot; separator=&quot; OR &quot;&gt;\r\n                name LIKE CONCAT(CONCAT(&#39;%&#39;, #{item}), &#39;%&#39;)\r\n            &lt;/foreach&gt;\r\n        &lt;/where&gt;\r\n    &lt;/if&gt;\r\n&lt;/select&gt;\r\n```\r\nNotes:\r\n\r\n - `&lt;if&gt;` Checks for a null parameter. In that case, no `WHERE` clause will be added.\r\n - `&lt;foreach&gt;` Splits the parameter using the `\\s+` regex and then iterates over the results adding each term in a separate `name LIKE` clause and joining them by ` OR `.\r\n - `CONCAT(CONCAT(&#39;%&#39;, #{item}), &#39;%&#39;)` Is written in this way to be used with Oracle database (takes two parameters in Oracle). It can be different in other database systems. For example, `CONCAT(&#39;%&#39;, #{item}, &#39;%&#39;)` can be used in MySQL.","title":"Multi value wildcard search in ibatis","body":"<p>Here is an example of how to do that:</p>\n<p>Mapper Class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;MyEntity&gt; search(String terms);\n</code></pre>\n<p>Mapper XML:</p>\n<pre><code>&lt;select id=&quot;search&quot; resultMap=&quot;myEntityResultMap&quot;&gt;\n    SELECT * FROM `my_table`\n    &lt;if test=&quot;_parameter != null&quot;&gt;\n        &lt;where&gt;\n            &lt;foreach collection=&quot;_parameter.split('\\\\s+')&quot; item=&quot;item&quot; open=&quot;(&quot; close=&quot;)&quot; separator=&quot; OR &quot;&gt;\n                name LIKE CONCAT(CONCAT('%', #{item}), '%')\n            &lt;/foreach&gt;\n        &lt;/where&gt;\n    &lt;/if&gt;\n&lt;/select&gt;\n</code></pre>\n<p>Notes:</p>\n<ul>\n<li><code>&lt;if&gt;</code> Checks for a null parameter. In that case, no <code>WHERE</code> clause will be added.</li>\n<li><code>&lt;foreach&gt;</code> Splits the parameter using the <code>\\s+</code> regex and then iterates over the results adding each term in a separate <code>name LIKE</code> clause and joining them by <code>OR</code>.</li>\n<li><code>CONCAT(CONCAT('%', #{item}), '%')</code> Is written in this way to be used with Oracle database (takes two parameters in Oracle). It can be different in other database systems. For example, <code>CONCAT('%', #{item}, '%')</code> can be used in MySQL.</li>\n</ul>\n"}],"owner":{"account_id":6340456,"reputation":49,"user_id":4922538,"display_name":"Nil"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":299,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1666884108,"creation_date":1433815416,"question_id":30721898,"body_markdown":"I have a search field that can take values separated by blank spaces for multi-value search. But now I want to make it a multi-value search using wildcards. For example, if I add &#39;away%&#39; and &#39;ds%&#39; separated by a blank space in the search field it should search for both wild card values in a given column. The query should be as :\r\n    \r\n    SELECT * FROM [table]\r\n    WHERE [column] LIKE (&#39;away%&#39;) OR\r\n    [column] LIKE (&#39;ds%&#39;);\r\n\r\nHow can I achieve this repetitive column reference based on the number of search values? P.S: search value can be of any number.\r\n\r\n","title":"Multi value wildcard search in ibatis","body":"<p>I have a search field that can take values separated by blank spaces for multi-value search. But now I want to make it a multi-value search using wildcards. For example, if I add 'away%' and 'ds%' separated by a blank space in the search field it should search for both wild card values in a given column. The query should be as :</p>\n<pre><code>SELECT * FROM [table]\nWHERE [column] LIKE ('away%') OR\n[column] LIKE ('ds%');\n</code></pre>\n<p>How can I achieve this repetitive column reference based on the number of search values? P.S: search value can be of any number.</p>\n"},{"tags":["java","mongodb","nosql"],"answers":[{"tags":[],"owner":{"account_id":14916818,"reputation":21534,"user_id":10770370,"display_name":"Tom Slabbaert"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1666883893,"creation_date":1666883893,"answer_id":74224441,"question_id":74223151,"body_markdown":"This was definitely slightly tricky, but you&#39;re right it is achievable in a single native query, here&#39;s how to do it:\r\n\r\n\r\n\r\n```\r\ndb.collection.aggregate([\r\n  {\r\n    $match: {\r\n      $or: [\r\n        {\r\n          &quot;data.code1&quot;: {\r\n            $exists: true\r\n          }\r\n        },\r\n        {\r\n          &quot;data.code2&quot;: {\r\n            $exists: true\r\n          }\r\n        },\r\n        {\r\n          &quot;data.code3&quot;: {\r\n            $exists: true\r\n          }\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  {\r\n    $addFields: {\r\n      maxSize: {\r\n        $reduce: {\r\n          input: {\r\n            &quot;$objectToArray&quot;: &quot;$data&quot;\r\n          },\r\n          initialValue: 0,\r\n          in: {\r\n            $max: [\r\n              &quot;$$value&quot;,\r\n              {\r\n                $size: &quot;$$this.v.iterations&quot;\r\n              }\r\n            ]\r\n          }\r\n        }\r\n      }\r\n    }\r\n  },\r\n  {\r\n    $addFields: {\r\n      values: {\r\n        $map: {\r\n          input: {\r\n            $range: [\r\n              0,\r\n              &quot;$maxSize&quot;\r\n            ]\r\n          },\r\n          as: &quot;iter&quot;,\r\n          in: {\r\n            $arrayToObject: {\r\n              $map: {\r\n                input: {\r\n                  &quot;$objectToArray&quot;: &quot;$data&quot;\r\n                },\r\n                as: &quot;datum&quot;,\r\n                in: {\r\n                  k: &quot;$$datum.k&quot;,\r\n                  v: {\r\n                    $ifNull: [\r\n                      {\r\n                        $arrayElemAt: [\r\n                          &quot;$$datum.v.iterations&quot;,\r\n                          &quot;$$iter&quot;\r\n                        ]\r\n                      },\r\n                      null\r\n                    ]\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  },\r\n  {\r\n    $unwind: &quot;$values&quot;\r\n  },\r\n  {\r\n    $replaceRoot: {\r\n      newRoot: {\r\n        $mergeObjects: [\r\n          {\r\n            companyId: &quot;$companyId&quot;,\r\n            companyName: &quot;$companyName&quot;,\r\n            \r\n          },\r\n          &quot;$values&quot;\r\n        ]\r\n      }\r\n    }\r\n  }\r\n])\r\n```\r\n[Mongo Playground][1]\r\n\r\n[1]:https://mongoplayground.net/p/c-70J0Sb-ax ","title":"How to obtain a table results from mongodb query","body":"<p>This was definitely slightly tricky, but you're right it is achievable in a single native query, here's how to do it:</p>\n<pre><code>db.collection.aggregate([\n  {\n    $match: {\n      $or: [\n        {\n          &quot;data.code1&quot;: {\n            $exists: true\n          }\n        },\n        {\n          &quot;data.code2&quot;: {\n            $exists: true\n          }\n        },\n        {\n          &quot;data.code3&quot;: {\n            $exists: true\n          }\n        }\n      ]\n    }\n  },\n  {\n    $addFields: {\n      maxSize: {\n        $reduce: {\n          input: {\n            &quot;$objectToArray&quot;: &quot;$data&quot;\n          },\n          initialValue: 0,\n          in: {\n            $max: [\n              &quot;$$value&quot;,\n              {\n                $size: &quot;$$this.v.iterations&quot;\n              }\n            ]\n          }\n        }\n      }\n    }\n  },\n  {\n    $addFields: {\n      values: {\n        $map: {\n          input: {\n            $range: [\n              0,\n              &quot;$maxSize&quot;\n            ]\n          },\n          as: &quot;iter&quot;,\n          in: {\n            $arrayToObject: {\n              $map: {\n                input: {\n                  &quot;$objectToArray&quot;: &quot;$data&quot;\n                },\n                as: &quot;datum&quot;,\n                in: {\n                  k: &quot;$$datum.k&quot;,\n                  v: {\n                    $ifNull: [\n                      {\n                        $arrayElemAt: [\n                          &quot;$$datum.v.iterations&quot;,\n                          &quot;$$iter&quot;\n                        ]\n                      },\n                      null\n                    ]\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  {\n    $unwind: &quot;$values&quot;\n  },\n  {\n    $replaceRoot: {\n      newRoot: {\n        $mergeObjects: [\n          {\n            companyId: &quot;$companyId&quot;,\n            companyName: &quot;$companyName&quot;,\n            \n          },\n          &quot;$values&quot;\n        ]\n      }\n    }\n  }\n])\n</code></pre>\n<p><a href=\"https://mongoplayground.net/p/c-70J0Sb-ax\" rel=\"nofollow noreferrer\">Mongo Playground</a></p>\n"}],"owner":{"account_id":4211425,"reputation":364,"user_id":3448998,"display_name":"Luca Riccitelli"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":261,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74224441,"answer_count":1,"score":1,"last_activity_date":1666883893,"creation_date":1666878380,"question_id":74223151,"body_markdown":"I&#39;m tring to map some results from mongo db into a table for generate an Excel report. My Java code generates the report from a List&lt;Map&lt;String, Object&gt;&gt; where Object can be number, string date or boolean.\r\n\r\nOn Mongo I was able to obtain the results as I need with this command:\r\n\r\n    db.collection.find(query,projection).map(function).flat();\r\n\r\nBut when I tried to replicate this command on Java I found that the eval comand was deprecated and that is not possible to execute javascript from Java Driver.\r\nI would like to execute the mapping on database instead of mapping in my JAVA class. And I would like to execute an &quot;native query&quot; instead of using Spring Data to better manipulate my report query if needed.\r\n\r\nI&#39;m new to mongo and searching for a solution I found the aggregation pipeline, but I&#39;m not sure that can help me.\r\n\r\nIs it possible to obtain the same results with an aggregation pipeline or an other commad that can be executed with JAVA driver?\r\n\r\nThis is my query\r\n\r\n    db.data_export.find({\r\n    $and: [\r\n      { &quot;data&quot;: {$exists: true}},\r\n      {$or: [\r\n\t\t{&quot;data.code1&quot;: {$exists: true}},\r\n\t\t{&quot;data.code2&quot;: {$exists: true}},\r\n\t\t{&quot;data.code3&quot;: {$exists: true}}\r\n\t\t]\r\n    }, {\r\n        companyId: 1,\r\n\t    companyName: 1,\r\n        &quot;data.code1.iterations&quot;: 1,\r\n        &quot;data.code2.iterations&quot;:1,\r\n        &quot;data.code3.iterations&quot;:1\r\n    }).map(function(v) {\r\n        let maxSize = 0;\r\n        let codes = [&#39;code1&#39;,\r\n            &#39;code2&#39;,\r\n            &#39;code3&#39;];\r\n        let codeFounded = [];\r\n        for(const [key, value] of Object.entries(v.data)) {\r\n            if(value &amp;&amp; value.iterations){\r\n                maxSize = Math.max(value.iterations.length, maxSize);\r\n                codeFounded.push(key);\r\n            }\r\n        }\r\n        let res = []\r\n        for(let i=0; i&lt;maxSize;i++){\r\n            let o = {\r\n                companyId: v.companyId,\r\n\t\t    \tcompanyName: v.companyName\r\n            }\r\n            for(let s=0; s&lt; codes.length; s++){\r\n                const code = codes[s];\r\n                let val = null;\r\n                if(codeFounded.includes(code)){\r\n                    val = v.data[code].iterations[i];\r\n                }\r\n                o[code] = val;\r\n            }\r\n            res.push(o);\r\n        }\r\n        return res;\r\n    }).flat();\r\n\r\nThis is my model\r\n\r\n    {\r\n\t\t&quot;companyId&quot;: 1,\r\n\t\t&quot;companyName&quot;: &quot;Company Name 1&quot;,\r\n\t\t&quot;data&quot;: {\r\n\t\t\t&quot;code1&quot;: {\r\n\t\t\t\t&quot;iterations&quot;: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t&quot;procedure&quot;: &quot;Functions&quot;\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t&quot;procedure&quot;: &quot;Planning&quot;\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t&quot;procedure&quot;: &quot;Monitoring&quot;\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t&quot;code2&quot;: {\r\n\t\t\t&quot;iterations&quot;: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t&quot;digitization&quot;: true\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t&quot;code3&quot;: {\r\n\t\t\t&quot;iterations&quot;: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t&quot;meeting_freq&quot;: &quot;Every month&quot;\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\nThis is what I&#39;m obtain as result like the follow table:\r\n\r\n| CompanyId | CompanyName | code1 | code2 | code3 |\r\n| --------- | ----------- | ----- | ----- | ----- |\r\n| 1 | Company Name 1 | val1 of code1 | val1 code2 | val1 of code3|\r\n| 1 | Company Name 1 | val2 of code1 | null | null|\r\n| 1 | Company Name 1 | val3 of code1 | null | null|\r\n| 2 | Company Name 2 | val1 of code1 | val1 code2 | val1 of code3|\r\n| 2 | Company Name 2 | val2 of code1 | null | null|\r\n| 3 | Company Name 3 | val1 of code1 | val1 code2 | val1 of code3|\r\n| 3 | Company Name 3 | val2 of code1 | null | null|\r\n| 3 | Company Name 3 | val3 of code1 | null | null|\r\n| 3 | Company Name 3 | val4 of code1 | null | null|\r\n| 3 | Company Name 3 | val5 of code1 | null | null|\r\n\r\n","title":"How to obtain a table results from mongodb query","body":"<p>I'm tring to map some results from mongo db into a table for generate an Excel report. My Java code generates the report from a List&lt;Map&lt;String, Object&gt;&gt; where Object can be number, string date or boolean.</p>\n<p>On Mongo I was able to obtain the results as I need with this command:</p>\n<pre><code>db.collection.find(query,projection).map(function).flat();\n</code></pre>\n<p>But when I tried to replicate this command on Java I found that the eval comand was deprecated and that is not possible to execute javascript from Java Driver.\nI would like to execute the mapping on database instead of mapping in my JAVA class. And I would like to execute an &quot;native query&quot; instead of using Spring Data to better manipulate my report query if needed.</p>\n<p>I'm new to mongo and searching for a solution I found the aggregation pipeline, but I'm not sure that can help me.</p>\n<p>Is it possible to obtain the same results with an aggregation pipeline or an other commad that can be executed with JAVA driver?</p>\n<p>This is my query</p>\n<pre><code>db.data_export.find({\n$and: [\n  { &quot;data&quot;: {$exists: true}},\n  {$or: [\n    {&quot;data.code1&quot;: {$exists: true}},\n    {&quot;data.code2&quot;: {$exists: true}},\n    {&quot;data.code3&quot;: {$exists: true}}\n    ]\n}, {\n    companyId: 1,\n    companyName: 1,\n    &quot;data.code1.iterations&quot;: 1,\n    &quot;data.code2.iterations&quot;:1,\n    &quot;data.code3.iterations&quot;:1\n}).map(function(v) {\n    let maxSize = 0;\n    let codes = ['code1',\n        'code2',\n        'code3'];\n    let codeFounded = [];\n    for(const [key, value] of Object.entries(v.data)) {\n        if(value &amp;&amp; value.iterations){\n            maxSize = Math.max(value.iterations.length, maxSize);\n            codeFounded.push(key);\n        }\n    }\n    let res = []\n    for(let i=0; i&lt;maxSize;i++){\n        let o = {\n            companyId: v.companyId,\n            companyName: v.companyName\n        }\n        for(let s=0; s&lt; codes.length; s++){\n            const code = codes[s];\n            let val = null;\n            if(codeFounded.includes(code)){\n                val = v.data[code].iterations[i];\n            }\n            o[code] = val;\n        }\n        res.push(o);\n    }\n    return res;\n}).flat();\n</code></pre>\n<p>This is my model</p>\n<pre><code>{\n    &quot;companyId&quot;: 1,\n    &quot;companyName&quot;: &quot;Company Name 1&quot;,\n    &quot;data&quot;: {\n        &quot;code1&quot;: {\n            &quot;iterations&quot;: [\n                {\n                    &quot;procedure&quot;: &quot;Functions&quot;\n                },\n                {\n                    &quot;procedure&quot;: &quot;Planning&quot;\n                },\n                {\n                    &quot;procedure&quot;: &quot;Monitoring&quot;\n                }\n            ]\n        },\n    &quot;code2&quot;: {\n        &quot;iterations&quot;: [\n                {\n                    &quot;digitization&quot;: true\n                }\n            ]\n        },\n    &quot;code3&quot;: {\n        &quot;iterations&quot;: [\n                {\n                    &quot;meeting_freq&quot;: &quot;Every month&quot;                       \n                }\n            ]\n        }\n    }\n}\n</code></pre>\n<p>This is what I'm obtain as result like the follow table:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>CompanyId</th>\n<th>CompanyName</th>\n<th>code1</th>\n<th>code2</th>\n<th>code3</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>Company Name 1</td>\n<td>val1 of code1</td>\n<td>val1 code2</td>\n<td>val1 of code3</td>\n</tr>\n<tr>\n<td>1</td>\n<td>Company Name 1</td>\n<td>val2 of code1</td>\n<td>null</td>\n<td>null</td>\n</tr>\n<tr>\n<td>1</td>\n<td>Company Name 1</td>\n<td>val3 of code1</td>\n<td>null</td>\n<td>null</td>\n</tr>\n<tr>\n<td>2</td>\n<td>Company Name 2</td>\n<td>val1 of code1</td>\n<td>val1 code2</td>\n<td>val1 of code3</td>\n</tr>\n<tr>\n<td>2</td>\n<td>Company Name 2</td>\n<td>val2 of code1</td>\n<td>null</td>\n<td>null</td>\n</tr>\n<tr>\n<td>3</td>\n<td>Company Name 3</td>\n<td>val1 of code1</td>\n<td>val1 code2</td>\n<td>val1 of code3</td>\n</tr>\n<tr>\n<td>3</td>\n<td>Company Name 3</td>\n<td>val2 of code1</td>\n<td>null</td>\n<td>null</td>\n</tr>\n<tr>\n<td>3</td>\n<td>Company Name 3</td>\n<td>val3 of code1</td>\n<td>null</td>\n<td>null</td>\n</tr>\n<tr>\n<td>3</td>\n<td>Company Name 3</td>\n<td>val4 of code1</td>\n<td>null</td>\n<td>null</td>\n</tr>\n<tr>\n<td>3</td>\n<td>Company Name 3</td>\n<td>val5 of code1</td>\n<td>null</td>\n<td>null</td>\n</tr>\n</tbody>\n</table>\n</div>"},{"tags":["java","brainfuck"],"comments":[{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":4,"creation_date":1666876000,"post_id":74222331,"comment_id":131042259,"body_markdown":"Cannot reproduce when benchmarked with JMH. Looks like you just haven&#39;t written your benchmark correctly.","body":"Cannot reproduce when benchmarked with JMH. Looks like you just haven&#39;t written your benchmark correctly."},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1666876168,"post_id":74222331,"comment_id":131042331,"body_markdown":"And by the way: `long t1 = System.nanoTime(); Interpreter.interpret(source); long t2 = System.nanoTime();` even with a piece of source code that has 4000 characters, considering what goes on in the `interpret` method is still too little an input to be measured in any significant way with `System.nanoTime()`. Use a profiler as Sweeper did.","body":"And by the way: <code>long t1 = System.nanoTime(); Interpreter.interpret(source); long t2 = System.nanoTime();</code> even with a piece of source code that has 4000 characters, considering what goes on in the <code>interpret</code> method is still too little an input to be measured in any significant way with <code>System.nanoTime()</code>. Use a profiler as Sweeper did."}],"answers":[{"tags":[],"owner":{"account_id":21437799,"reputation":40,"user_id":15792969,"display_name":"Setvizan"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1666883882,"creation_date":1666883882,"answer_id":74224436,"question_id":74222331,"body_markdown":"Turns out as @Sweeper said, I didn&#39;t write my benchmark correctly. &lt;br&gt;\r\nAfter setting up JMH and learning how to use it. &lt;br&gt;\r\nIt turns out that the optimized code runs about 0.4ms faster.","title":"Unoptimized Brainfuck code runs faster than optimized Brainfuck code","body":"<p>Turns out as @Sweeper said, I didn't write my benchmark correctly. <br>\nAfter setting up JMH and learning how to use it. <br>\nIt turns out that the optimized code runs about 0.4ms faster.</p>\n"}],"owner":{"account_id":21437799,"reputation":40,"user_id":15792969,"display_name":"Setvizan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":201,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74224436,"answer_count":1,"score":0,"last_activity_date":1666883882,"creation_date":1666874956,"question_id":74222331,"body_markdown":"I am currently trying to program a Brainfuck interpreter in Java. I try to optimize the Brainfuck code by removing comments and code that is redundant (I use regex for this). However, my unoptimized code runs about a few milliseconds faster than my optimized code, which in my opinion shouldn&#39;t even be possible as I am only timing the execution time of the Brainfuck code.\r\n\r\nHere&#39;s the Brainfuck interpreter itself (ReducedIntStack is basically a self-implementation of a stack):\r\n\r\n```java\r\npackage io.github.setvizan.brainfuck;\r\n\r\nimport io.github.setvizan.utils.ReducedIntStack;\r\n\r\npublic class Interpreter {\r\n    private static final int   MAX_LENGTH = 65535;\r\n    private final        int[] jmp        = new int[MAX_LENGTH];\r\n    private final        int[] arr        = new int[MAX_LENGTH];\r\n    private              int   ptr        = 0;\r\n\r\n    public static void interpret(String c) {\r\n        char[]      commands    = c.toCharArray();\r\n        Interpreter interpreter = new Interpreter();\r\n        interpreter.preloadJumpTable(commands);\r\n        interpreter.run(commands);\r\n    }\r\n\r\n    private void run(char[] commands) {\r\n        for (int i = -1, size = commands.length; ++i &lt; size; ) {\r\n            switch (commands[i]) {\r\n                case &#39;+&#39;:\r\n                    arr[ptr]++;\r\n                    break;\r\n                case &#39;-&#39;:\r\n                    arr[ptr]--;\r\n                    break;\r\n                case &#39;&lt;&#39;:\r\n                    if (ptr != 0) ptr--;\r\n                    break;\r\n                case &#39;&gt;&#39;:\r\n                    ptr++;\r\n                    break;\r\n                case &#39;[&#39;:\r\n                    if (arr[ptr] == 0) i = jmp[i];\r\n                    break;\r\n                case &#39;]&#39;:\r\n                    if (arr[ptr] != 0) i = jmp[i];\r\n                    break;\r\n                case &#39;.&#39;:\r\n                    System.out.print((char) arr[ptr]);\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n\r\n    private void preloadJumpTable(char[] commands) {\r\n        ReducedIntStack stk = new ReducedIntStack(MAX_LENGTH);\r\n        for (int i = -1; ++i &lt; commands.length; ) {\r\n            if (commands[i] == &#39;[&#39;) {\r\n                stk.push(i);\r\n            } else if (commands[i] == &#39;]&#39;) {\r\n                jmp[i] = stk.pop();\r\n                jmp[jmp[i]] = i;\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nOptimizer class:\r\n```\r\npackage io.github.setvizan.brainfuck;\r\n\r\nimport java.util.regex.Pattern;\r\n\r\npublic class Optimizer {\r\n    private static final Pattern ENDLESS_LOOP_PATTERN = Pattern.compile(&quot;\\\\[\\\\]&quot;);\r\n\r\n    private static final Pattern INCREMENT_DECREMENT_PATTERN = Pattern.compile(&quot;\\\\+-|-\\\\+&quot;);\r\n\r\n    private static final Pattern FORWARD_BACKWARD_PATTERN = Pattern.compile(&quot;&gt;&lt;|&lt;&gt;&quot;);\r\n\r\n    private static final Pattern REMOVE_USELESS_CHARACTERS = Pattern.compile(&quot;[^&lt;&gt;\\\\.,\\\\[\\\\]\\\\+-]&quot;);\r\n\r\n    public static String apply(String in) {\r\n        String optimized = in;\r\n        optimized = removeUselessCharacters(optimized);\r\n        optimized = removeEndlessLoops(optimized);\r\n        optimized = removeForwardBackwards(optimized);\r\n        optimized = removeIncrementDecrements(optimized);\r\n        return optimized;\r\n    }\r\n\r\n    private static String removeEndlessLoops(String input) {\r\n        return ENDLESS_LOOP_PATTERN.matcher(input).replaceAll(&quot;&quot;);\r\n    }\r\n\r\n    private static String removeIncrementDecrements(String input) {\r\n        return INCREMENT_DECREMENT_PATTERN.matcher(input).replaceAll(&quot;&quot;);\r\n    }\r\n\r\n    private static String removeForwardBackwards(String input) {\r\n        return FORWARD_BACKWARD_PATTERN.matcher(input).replaceAll(&quot;&quot;);\r\n    }\r\n\r\n    private static String removeUselessCharacters(String input) {\r\n        return REMOVE_USELESS_CHARACTERS.matcher(input).replaceAll(&quot;&quot;);\r\n    }\r\n}\r\n```\r\n\r\nThis is how I time my code in Java:\r\n\r\n```\r\npublic static void run(String file, boolean optimize){\r\n    File bfFile = new File(file);\r\n    try {\r\n        BufferedReader bufferedReader = new BufferedReader(new FileReader(bfFile));\r\n\r\n        String source = bufferedReader.lines().collect(Collectors.joining());\r\n        if (optimize) source = Optimizer.apply(source);\r\n        long t1 = System.nanoTime();\r\n        Interpreter.interpret(source);\r\n        long t2 = System.nanoTime();\r\n        System.out.println(&quot;\\n&quot;+(t2 - t1) + &quot;ns - this program was optimized? &quot;+optimize);\r\n    } catch (FileNotFoundException e) {\r\n        e.printStackTrace();\r\n    }\r\n}\r\n```\r\n\r\nI tried to take a file with a lot of comments like (4000 symbols that are not used in Brainfuck and 400 that are used in Brainfuck) and the unoptimized script still runs faster.\r\n\r\nI also checked if the Brainfuck interpreter wouldn&#39;t really run the optimized version when needed.\r\n\r\nI made a script that runs the Java exactly 100 times and the unoptimized was around a full second faster.\r\n","title":"Unoptimized Brainfuck code runs faster than optimized Brainfuck code","body":"<p>I am currently trying to program a Brainfuck interpreter in Java. I try to optimize the Brainfuck code by removing comments and code that is redundant (I use regex for this). However, my unoptimized code runs about a few milliseconds faster than my optimized code, which in my opinion shouldn't even be possible as I am only timing the execution time of the Brainfuck code.</p>\n<p>Here's the Brainfuck interpreter itself (ReducedIntStack is basically a self-implementation of a stack):</p>\n<pre class=\"lang-java prettyprint-override\"><code>package io.github.setvizan.brainfuck;\n\nimport io.github.setvizan.utils.ReducedIntStack;\n\npublic class Interpreter {\n    private static final int   MAX_LENGTH = 65535;\n    private final        int[] jmp        = new int[MAX_LENGTH];\n    private final        int[] arr        = new int[MAX_LENGTH];\n    private              int   ptr        = 0;\n\n    public static void interpret(String c) {\n        char[]      commands    = c.toCharArray();\n        Interpreter interpreter = new Interpreter();\n        interpreter.preloadJumpTable(commands);\n        interpreter.run(commands);\n    }\n\n    private void run(char[] commands) {\n        for (int i = -1, size = commands.length; ++i &lt; size; ) {\n            switch (commands[i]) {\n                case '+':\n                    arr[ptr]++;\n                    break;\n                case '-':\n                    arr[ptr]--;\n                    break;\n                case '&lt;':\n                    if (ptr != 0) ptr--;\n                    break;\n                case '&gt;':\n                    ptr++;\n                    break;\n                case '[':\n                    if (arr[ptr] == 0) i = jmp[i];\n                    break;\n                case ']':\n                    if (arr[ptr] != 0) i = jmp[i];\n                    break;\n                case '.':\n                    System.out.print((char) arr[ptr]);\n                    break;\n            }\n        }\n    }\n\n    private void preloadJumpTable(char[] commands) {\n        ReducedIntStack stk = new ReducedIntStack(MAX_LENGTH);\n        for (int i = -1; ++i &lt; commands.length; ) {\n            if (commands[i] == '[') {\n                stk.push(i);\n            } else if (commands[i] == ']') {\n                jmp[i] = stk.pop();\n                jmp[jmp[i]] = i;\n            }\n        }\n    }\n}\n</code></pre>\n<p>Optimizer class:</p>\n<pre><code>package io.github.setvizan.brainfuck;\n\nimport java.util.regex.Pattern;\n\npublic class Optimizer {\n    private static final Pattern ENDLESS_LOOP_PATTERN = Pattern.compile(&quot;\\\\[\\\\]&quot;);\n\n    private static final Pattern INCREMENT_DECREMENT_PATTERN = Pattern.compile(&quot;\\\\+-|-\\\\+&quot;);\n\n    private static final Pattern FORWARD_BACKWARD_PATTERN = Pattern.compile(&quot;&gt;&lt;|&lt;&gt;&quot;);\n\n    private static final Pattern REMOVE_USELESS_CHARACTERS = Pattern.compile(&quot;[^&lt;&gt;\\\\.,\\\\[\\\\]\\\\+-]&quot;);\n\n    public static String apply(String in) {\n        String optimized = in;\n        optimized = removeUselessCharacters(optimized);\n        optimized = removeEndlessLoops(optimized);\n        optimized = removeForwardBackwards(optimized);\n        optimized = removeIncrementDecrements(optimized);\n        return optimized;\n    }\n\n    private static String removeEndlessLoops(String input) {\n        return ENDLESS_LOOP_PATTERN.matcher(input).replaceAll(&quot;&quot;);\n    }\n\n    private static String removeIncrementDecrements(String input) {\n        return INCREMENT_DECREMENT_PATTERN.matcher(input).replaceAll(&quot;&quot;);\n    }\n\n    private static String removeForwardBackwards(String input) {\n        return FORWARD_BACKWARD_PATTERN.matcher(input).replaceAll(&quot;&quot;);\n    }\n\n    private static String removeUselessCharacters(String input) {\n        return REMOVE_USELESS_CHARACTERS.matcher(input).replaceAll(&quot;&quot;);\n    }\n}\n</code></pre>\n<p>This is how I time my code in Java:</p>\n<pre><code>public static void run(String file, boolean optimize){\n    File bfFile = new File(file);\n    try {\n        BufferedReader bufferedReader = new BufferedReader(new FileReader(bfFile));\n\n        String source = bufferedReader.lines().collect(Collectors.joining());\n        if (optimize) source = Optimizer.apply(source);\n        long t1 = System.nanoTime();\n        Interpreter.interpret(source);\n        long t2 = System.nanoTime();\n        System.out.println(&quot;\\n&quot;+(t2 - t1) + &quot;ns - this program was optimized? &quot;+optimize);\n    } catch (FileNotFoundException e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n<p>I tried to take a file with a lot of comments like (4000 symbols that are not used in Brainfuck and 400 that are used in Brainfuck) and the unoptimized script still runs faster.</p>\n<p>I also checked if the Brainfuck interpreter wouldn't really run the optimized version when needed.</p>\n<p>I made a script that runs the Java exactly 100 times and the unoptimized was around a full second faster.</p>\n"},{"tags":["java","xpath","events","xml-parsing","sax"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":1,"creation_date":1666883355,"post_id":74224297,"comment_id":131045179,"body_markdown":"&quot;several MB&quot; is not a reason not to use a common library that supports xpath expressions.","body":"&quot;several MB&quot; is not a reason not to use a common library that supports xpath expressions."}],"answers":[{"tags":[],"owner":{"account_id":24102338,"reputation":876,"user_id":18074007,"display_name":"Ahmed Mohamed"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1666883807,"creation_date":1666883807,"answer_id":74224422,"question_id":74224297,"body_markdown":"To match a streaming XML parser against a set of simple xpaths, you can use the following steps:\r\n\r\n- Create a `Map&lt;String, String&gt;` to store the xpaths and their corresponding values. Initialize the values to `null`.\r\n- Create a `Stack&lt;String&gt;` to keep track of the current path of the XML elements.\r\n- Create a `SAXParser` and a `DefaultHandler` to parse the XML input.\r\n- In the `startElement` method of the handler, push the element name to the stack and append it to the current path. Then, check if the current path matches any of the xpaths in the map. If yes, set a flag to indicate that the value should be extracted.\r\n- In the `endElement` method of the handler, pop the element name from the stack and remove it from the current path. Then, reset the flag to indicate that the value should not be extracted.\r\n- In the `characters` method of the handler, check if the flag is set. If yes, append the character data to the value of the matching xpath in the map.\r\n- After parsing the XML input, return the map with the xpaths and their values.\r\n\r\n## Explanation\r\n\r\nA streaming XML parser, such as `SAXParser`, reads the XML input sequentially and triggers events when it encounters different parts of the document, such as start tags, end tags, text, etc. It does not build a tree structure of the document in memory, which makes it more efficient for large XML inputs.\r\n\r\nAn xpath is a syntax for selecting nodes from an XML document. It consists of a series of steps, separated by slashes, that describe the location of the desired node. For example, `/bookstore/book/title` selects the title element of the book element of the bookstore element.\r\n\r\nA simple xpath involves only tags and attributes, no predicates. For example, `/bookstore/book[@lang=&#39;en&#39;]/title` selects the title element of the book element that has an attribute `lang` with value `en`.\r\n\r\nTo match a streaming XML parser against a set of simple xpaths, we need to keep track of the current path of the XML elements as we parse the input, and compare it with the xpaths in the set. If we find a match, we need to extract the value of the node and store it in a map. We also need to handle the cases where the node value spans across multiple character events, or where the node has multiple occurrences in the document.\r\n\r\n## Example\r\n\r\nSuppose we have the following XML input:\r\n\r\n```xml\r\n&lt;bookstore&gt;\r\n  &lt;book lang=&quot;en&quot;&gt;\r\n    &lt;title&gt;Harry Potter and the Philosopher&#39;s Stone&lt;/title&gt;\r\n    &lt;author&gt;J. K. Rowling&lt;/author&gt;\r\n    &lt;price&gt;10.99&lt;/price&gt;\r\n  &lt;/book&gt;\r\n  &lt;book lang=&quot;fr&quot;&gt;\r\n    &lt;title&gt;Le Petit Prince&lt;/title&gt;\r\n    &lt;author&gt;Antoine de Saint-Exup&#233;ry&lt;/author&gt;\r\n    &lt;price&gt;8.50&lt;/price&gt;\r\n  &lt;/book&gt;\r\n&lt;/bookstore&gt;\r\n```\r\n\r\nAnd the following set of simple xpaths:\r\n\r\n- `/bookstore/book/title`\r\n- `/bookstore/book/author`\r\n- `/bookstore/book[@lang=&#39;fr&#39;]/price`\r\n\r\nWe can use the following Java code to match the streaming XML parser against the set of xpaths:\r\n\r\n```java\r\nimport java.io.*;\r\nimport java.util.*;\r\nimport javax.xml.parsers.*;\r\nimport org.xml.sax.*;\r\nimport org.xml.sax.helpers.*;\r\n\r\npublic class XPathMatcher {\r\n\r\n  public static Map&lt;String, String&gt; match(InputStream xmlInput, Set&lt;String&gt; xpaths) throws Exception {\r\n    // Create a map to store the xpaths and their values\r\n    Map&lt;String, String&gt; map = new HashMap&lt;&gt;();\r\n    for (String xpath : xpaths) {\r\n      map.put(xpath, null);\r\n    }\r\n\r\n    // Create a stack to keep track of the current path\r\n    Stack&lt;String&gt; stack = new Stack&lt;&gt;();\r\n\r\n    // Create a SAXParser and a DefaultHandler to parse the XML input\r\n    SAXParserFactory factory = SAXParserFactory.newInstance();\r\n    SAXParser parser = factory.newSAXParser();\r\n    DefaultHandler handler = new DefaultHandler() {\r\n\r\n      // A flag to indicate if the value should be extracted\r\n      boolean extract = false;\r\n\r\n      // A variable to store the current path\r\n      String currentPath = &quot;&quot;;\r\n\r\n      // A variable to store the matching xpath\r\n      String matchingXPath = &quot;&quot;;\r\n\r\n      @Override\r\n      public void startElement(String uri, String localName, String qName, Attributes attributes) throws SAXException {\r\n        // Push the element name to the stack and append it to the current path\r\n        stack.push(qName);\r\n        currentPath += &quot;/&quot; + qName;\r\n\r\n        // Check if the current path matches any of the xpaths in the map\r\n        for (String xpath : map.keySet()) {\r\n          // If the xpath has an attribute, extract the attribute name and value\r\n          String attrName = &quot;&quot;;\r\n          String attrValue = &quot;&quot;;\r\n          if (xpath.contains(&quot;[@&quot;)) {\r\n            int start = xpath.indexOf(&quot;[@&quot;) + 2;\r\n            int end = xpath.indexOf(&quot;=&quot;);\r\n            attrName = xpath.substring(start, end);\r\n            start = end + 2;\r\n            end = xpath.indexOf(&quot;]&quot;);\r\n            attrValue = xpath.substring(start, end - 1);\r\n          }\r\n\r\n          // If the xpath matches the current path, and either has no attribute or has a matching attribute, set the flag and the matching xpath\r\n          if (xpath.startsWith(currentPath) &amp;&amp; (attrName.isEmpty() || attrValue.equals(attributes.getValue(attrName)))) {\r\n            extract = true;\r\n            matchingXPath = xpath;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n\r\n      @Override\r\n      public void endElement(String uri, String localName, String qName) throws SAXException {\r\n        // Pop the element name from the stack and remove it from the current path\r\n        stack.pop();\r\n        currentPath = currentPath.substring(0, currentPath.length() - qName.length() - 1);\r\n\r\n        // Reset the flag and the matching xpath\r\n        extract = false;\r\n        matchingXPath = &quot;&quot;;\r\n      }\r\n\r\n      @Override\r\n      public void characters(char[] ch, int start, int length) throws SAXException {\r\n        // Check if the flag is set\r\n        if (extract) {\r\n          // Append the character data to the value of the matching xpath in the map\r\n          String value = map.get(matchingXPath);\r\n          if (value == null) {\r\n            value = &quot;&quot;;\r\n          }\r\n          value += new String(ch, start, length);\r\n          map.put(matchingXPath, value);\r\n        }\r\n      }\r\n    };\r\n\r\n    // Parse the XML input\r\n    parser.parse(xmlInput, handler);\r\n\r\n    // Return the map with the xpaths and their values\r\n    return map;\r\n  }\r\n\r\n  public static void main(String[] args) throws Exception {\r\n    // Create an input stream from the XML file\r\n    InputStream xmlInput = new FileInputStream(&quot;bookstore.xml&quot;);\r\n\r\n    // Create a set of simple xpaths\r\n    Set&lt;String&gt; xpaths = new HashSet&lt;&gt;();\r\n    xpaths.add(&quot;/bookstore/book/title&quot;);\r\n    xpaths.add(&quot;/bookstore/book/author&quot;);\r\n    xpaths.add(&quot;/bookstore/book[@lang=&#39;fr&#39;]/price&quot;);\r\n\r\n    // Match the streaming XML parser against the set of xpaths\r\n    Map&lt;String, String&gt; map = match(xmlInput, xpaths);\r\n\r\n    // Print the results\r\n    for (String xpath : map.keySet()) {\r\n      System.out.println(xpath + &quot; = &quot; + map.get(xpath));\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nThe output of the code is:\r\n\r\n```\r\n/bookstore/book/title = Harry Potter and the Philosopher&#39;s StoneLe Petit Prince\r\n/bookstore/book/author = J. K. RowlingAntoine de Saint-Exup&#233;ry\r\n/bookstore/book[@lang=&#39;fr&#39;]/price = 8.50\r\n```","title":"Match set of simple xpaths with SAX","body":"<p>To match a streaming XML parser against a set of simple xpaths, you can use the following steps:</p>\n<ul>\n<li>Create a <code>Map&lt;String, String&gt;</code> to store the xpaths and their corresponding values. Initialize the values to <code>null</code>.</li>\n<li>Create a <code>Stack&lt;String&gt;</code> to keep track of the current path of the XML elements.</li>\n<li>Create a <code>SAXParser</code> and a <code>DefaultHandler</code> to parse the XML input.</li>\n<li>In the <code>startElement</code> method of the handler, push the element name to the stack and append it to the current path. Then, check if the current path matches any of the xpaths in the map. If yes, set a flag to indicate that the value should be extracted.</li>\n<li>In the <code>endElement</code> method of the handler, pop the element name from the stack and remove it from the current path. Then, reset the flag to indicate that the value should not be extracted.</li>\n<li>In the <code>characters</code> method of the handler, check if the flag is set. If yes, append the character data to the value of the matching xpath in the map.</li>\n<li>After parsing the XML input, return the map with the xpaths and their values.</li>\n</ul>\n<h2>Explanation</h2>\n<p>A streaming XML parser, such as <code>SAXParser</code>, reads the XML input sequentially and triggers events when it encounters different parts of the document, such as start tags, end tags, text, etc. It does not build a tree structure of the document in memory, which makes it more efficient for large XML inputs.</p>\n<p>An xpath is a syntax for selecting nodes from an XML document. It consists of a series of steps, separated by slashes, that describe the location of the desired node. For example, <code>/bookstore/book/title</code> selects the title element of the book element of the bookstore element.</p>\n<p>A simple xpath involves only tags and attributes, no predicates. For example, <code>/bookstore/book[@lang='en']/title</code> selects the title element of the book element that has an attribute <code>lang</code> with value <code>en</code>.</p>\n<p>To match a streaming XML parser against a set of simple xpaths, we need to keep track of the current path of the XML elements as we parse the input, and compare it with the xpaths in the set. If we find a match, we need to extract the value of the node and store it in a map. We also need to handle the cases where the node value spans across multiple character events, or where the node has multiple occurrences in the document.</p>\n<h2>Example</h2>\n<p>Suppose we have the following XML input:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;bookstore&gt;\n  &lt;book lang=&quot;en&quot;&gt;\n    &lt;title&gt;Harry Potter and the Philosopher's Stone&lt;/title&gt;\n    &lt;author&gt;J. K. Rowling&lt;/author&gt;\n    &lt;price&gt;10.99&lt;/price&gt;\n  &lt;/book&gt;\n  &lt;book lang=&quot;fr&quot;&gt;\n    &lt;title&gt;Le Petit Prince&lt;/title&gt;\n    &lt;author&gt;Antoine de Saint-Exupéry&lt;/author&gt;\n    &lt;price&gt;8.50&lt;/price&gt;\n  &lt;/book&gt;\n&lt;/bookstore&gt;\n</code></pre>\n<p>And the following set of simple xpaths:</p>\n<ul>\n<li><code>/bookstore/book/title</code></li>\n<li><code>/bookstore/book/author</code></li>\n<li><code>/bookstore/book[@lang='fr']/price</code></li>\n</ul>\n<p>We can use the following Java code to match the streaming XML parser against the set of xpaths:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.*;\nimport java.util.*;\nimport javax.xml.parsers.*;\nimport org.xml.sax.*;\nimport org.xml.sax.helpers.*;\n\npublic class XPathMatcher {\n\n  public static Map&lt;String, String&gt; match(InputStream xmlInput, Set&lt;String&gt; xpaths) throws Exception {\n    // Create a map to store the xpaths and their values\n    Map&lt;String, String&gt; map = new HashMap&lt;&gt;();\n    for (String xpath : xpaths) {\n      map.put(xpath, null);\n    }\n\n    // Create a stack to keep track of the current path\n    Stack&lt;String&gt; stack = new Stack&lt;&gt;();\n\n    // Create a SAXParser and a DefaultHandler to parse the XML input\n    SAXParserFactory factory = SAXParserFactory.newInstance();\n    SAXParser parser = factory.newSAXParser();\n    DefaultHandler handler = new DefaultHandler() {\n\n      // A flag to indicate if the value should be extracted\n      boolean extract = false;\n\n      // A variable to store the current path\n      String currentPath = &quot;&quot;;\n\n      // A variable to store the matching xpath\n      String matchingXPath = &quot;&quot;;\n\n      @Override\n      public void startElement(String uri, String localName, String qName, Attributes attributes) throws SAXException {\n        // Push the element name to the stack and append it to the current path\n        stack.push(qName);\n        currentPath += &quot;/&quot; + qName;\n\n        // Check if the current path matches any of the xpaths in the map\n        for (String xpath : map.keySet()) {\n          // If the xpath has an attribute, extract the attribute name and value\n          String attrName = &quot;&quot;;\n          String attrValue = &quot;&quot;;\n          if (xpath.contains(&quot;[@&quot;)) {\n            int start = xpath.indexOf(&quot;[@&quot;) + 2;\n            int end = xpath.indexOf(&quot;=&quot;);\n            attrName = xpath.substring(start, end);\n            start = end + 2;\n            end = xpath.indexOf(&quot;]&quot;);\n            attrValue = xpath.substring(start, end - 1);\n          }\n\n          // If the xpath matches the current path, and either has no attribute or has a matching attribute, set the flag and the matching xpath\n          if (xpath.startsWith(currentPath) &amp;&amp; (attrName.isEmpty() || attrValue.equals(attributes.getValue(attrName)))) {\n            extract = true;\n            matchingXPath = xpath;\n            break;\n          }\n        }\n      }\n\n      @Override\n      public void endElement(String uri, String localName, String qName) throws SAXException {\n        // Pop the element name from the stack and remove it from the current path\n        stack.pop();\n        currentPath = currentPath.substring(0, currentPath.length() - qName.length() - 1);\n\n        // Reset the flag and the matching xpath\n        extract = false;\n        matchingXPath = &quot;&quot;;\n      }\n\n      @Override\n      public void characters(char[] ch, int start, int length) throws SAXException {\n        // Check if the flag is set\n        if (extract) {\n          // Append the character data to the value of the matching xpath in the map\n          String value = map.get(matchingXPath);\n          if (value == null) {\n            value = &quot;&quot;;\n          }\n          value += new String(ch, start, length);\n          map.put(matchingXPath, value);\n        }\n      }\n    };\n\n    // Parse the XML input\n    parser.parse(xmlInput, handler);\n\n    // Return the map with the xpaths and their values\n    return map;\n  }\n\n  public static void main(String[] args) throws Exception {\n    // Create an input stream from the XML file\n    InputStream xmlInput = new FileInputStream(&quot;bookstore.xml&quot;);\n\n    // Create a set of simple xpaths\n    Set&lt;String&gt; xpaths = new HashSet&lt;&gt;();\n    xpaths.add(&quot;/bookstore/book/title&quot;);\n    xpaths.add(&quot;/bookstore/book/author&quot;);\n    xpaths.add(&quot;/bookstore/book[@lang='fr']/price&quot;);\n\n    // Match the streaming XML parser against the set of xpaths\n    Map&lt;String, String&gt; map = match(xmlInput, xpaths);\n\n    // Print the results\n    for (String xpath : map.keySet()) {\n      System.out.println(xpath + &quot; = &quot; + map.get(xpath));\n    }\n  }\n}\n</code></pre>\n<p>The output of the code is:</p>\n<pre><code>/bookstore/book/title = Harry Potter and the Philosopher's StoneLe Petit Prince\n/bookstore/book/author = J. K. RowlingAntoine de Saint-Exupéry\n/bookstore/book[@lang='fr']/price = 8.50\n</code></pre>\n"}],"owner":{"account_id":16285107,"reputation":1793,"user_id":11760058,"display_name":"cachius"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74224422,"answer_count":1,"score":0,"last_activity_date":1666883807,"creation_date":1666883269,"question_id":74224297,"body_markdown":"I have a set of simple xpaths involving only tags and attributes, no predicates. My XML input has a size of several MB so I want to use a streaming XML parser.\r\n\r\nHow can I match the streaming XML parser against the set of xapths to retrieve one value for each xpath?\r\n\r\nThe crux seems to build the right data structure from the set of xpaths so it can be evaluated based on the xml events.\r\n\r\nThis seems like a fairly common task but I couldn&#39;t find any readily available solutions.","title":"Match set of simple xpaths with SAX","body":"<p>I have a set of simple xpaths involving only tags and attributes, no predicates. My XML input has a size of several MB so I want to use a streaming XML parser.</p>\n<p>How can I match the streaming XML parser against the set of xapths to retrieve one value for each xpath?</p>\n<p>The crux seems to build the right data structure from the set of xpaths so it can be evaluated based on the xml events.</p>\n<p>This seems like a fairly common task but I couldn't find any readily available solutions.</p>\n"},{"tags":["java","spring","guava"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1666873389,"post_id":74221756,"comment_id":131041232,"body_markdown":"Not sure if guava supports that. But you can always create your own class like `ValueWithTimestamp&lt;String&gt;` that holds a value and a timestamp when it was loaded into the cache. That way you can calculcate the time left yourself.","body":"Not sure if guava supports that. But you can always create your own class like <code>ValueWithTimestamp&lt;String&gt;</code> that holds a value and a timestamp when it was loaded into the cache. That way you can calculcate the time left yourself."},{"owner":{"account_id":10326,"reputation":9293,"user_id":19450,"display_name":"Ben Manes"},"score":2,"creation_date":1666915523,"post_id":74221756,"comment_id":131054048,"body_markdown":"That&#39;s available in the successor project, [Caffeine](https://github.com/ben-manes/caffeine). You can query using the `Cache.policy()` api, e.g. `ageOf(key)`.","body":"That&#39;s available in the successor project, <a href=\"https://github.com/ben-manes/caffeine\" rel=\"nofollow noreferrer\">Caffeine</a>. You can query using the <code>Cache.policy()</code> api, e.g. <code>ageOf(key)</code>."}],"owner":{"account_id":14860190,"reputation":13,"user_id":10731292,"display_name":"Fatih Enes"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":514,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1666883718,"creation_date":1666872348,"question_id":74221756,"body_markdown":"I have created a cache object with this code. It is a google-guava cache.\r\n\r\n\r\n```\r\n\r\nCache&lt;String, String&gt; myCache = CacheBuilder.newBuilder()\r\n    .expireAfterAccess(7200, TimeUnit.SECONDS)\r\n    .build();\r\n\r\n```\r\n\r\nI need to get the expire time left. For example, after 3000 seconds, i want to get &quot;there are 4200 seconds left to expire.&quot; Do you know any way about this?\r\n\r\nI need to get the expire time left and i want to use this value.","title":"How to get guava cache expire time left java?","body":"<p>I have created a cache object with this code. It is a google-guava cache.</p>\n<pre><code>\nCache&lt;String, String&gt; myCache = CacheBuilder.newBuilder()\n    .expireAfterAccess(7200, TimeUnit.SECONDS)\n    .build();\n\n</code></pre>\n<p>I need to get the expire time left. For example, after 3000 seconds, i want to get &quot;there are 4200 seconds left to expire.&quot; Do you know any way about this?</p>\n<p>I need to get the expire time left and i want to use this value.</p>\n"},{"tags":["java","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1666866940,"post_id":74220517,"comment_id":131039160,"body_markdown":"Is there a connection from child to parent?","body":"Is there a connection from child to parent?"},{"owner":{"account_id":1736824,"reputation":5410,"user_id":1589188,"accept_rate":66,"display_name":"user1589188"},"score":0,"creation_date":1666869768,"post_id":74220517,"comment_id":131039991,"body_markdown":"@XtremeBaumer yes","body":"@XtremeBaumer yes"},{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1666876611,"post_id":74220517,"comment_id":131042489,"body_markdown":"Then provide the full mapping between the entities","body":"Then provide the full mapping between the entities"}],"answers":[{"tags":[],"owner":{"account_id":6484184,"reputation":2035,"user_id":5020294,"display_name":"Andriy Slobodyanyk"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1666881764,"creation_date":1666881449,"answer_id":74223874,"question_id":74220517,"body_markdown":"You&#39;re using `Set` of children. That&#39;s fine but by its definition it should check that the newly added child wasn&#39;t present at the collection before. Consider using `List` instead.\r\n\r\nAlso, I would suggest to check [how to implement equals() and hashCode()](https://vladmihalcea.com/how-to-implement-equals-and-hashcode-using-the-jpa-entity-identifier/) for the entity correctly.","title":"Hibernate generating SELECT before INSERT for new child entities","body":"<p>You're using <code>Set</code> of children. That's fine but by its definition it should check that the newly added child wasn't present at the collection before. Consider using <code>List</code> instead.</p>\n<p>Also, I would suggest to check <a href=\"https://vladmihalcea.com/how-to-implement-equals-and-hashcode-using-the-jpa-entity-identifier/\" rel=\"nofollow noreferrer\">how to implement equals() and hashCode()</a> for the entity correctly.</p>\n"},{"comments":[{"owner":{"account_id":1736824,"reputation":5410,"user_id":1589188,"accept_rate":66,"display_name":"user1589188"},"score":0,"creation_date":1666884472,"post_id":74223986,"comment_id":131045648,"body_markdown":"Yes, using a repository of `MyChild` to save the new `myChild` does indeed skip the SELECT and only INSERT is generated! So what is the pros and cons of this method vs my original method (i.e. saving child directly vs saving parent and then cascade save the child)?","body":"Yes, using a repository of <code>MyChild</code> to save the new <code>myChild</code> does indeed skip the SELECT and only INSERT is generated! So what is the pros and cons of this method vs my original method (i.e. saving child directly vs saving parent and then cascade save the child)?"},{"owner":{"account_id":476019,"reputation":14699,"user_id":886697,"accept_rate":92,"display_name":"Stanislav Bashkyrtsev"},"score":0,"creation_date":1666888154,"post_id":74223986,"comment_id":131047026,"body_markdown":"There are no cons of this approach - the way you mapped your entities suggests that you use exactly these steps. Adding to a collection is necessary only if you&#39;re _not_ using `mappedBy`.","body":"There are no cons of this approach - the way you mapped your entities suggests that you use exactly these steps. Adding to a collection is necessary only if you&#39;re <i>not</i> using <code>mappedBy</code>."},{"owner":{"account_id":1736824,"reputation":5410,"user_id":1589188,"accept_rate":66,"display_name":"user1589188"},"score":0,"creation_date":1666917618,"post_id":74223986,"comment_id":131054329,"body_markdown":"Right ok, got it. Then is there a way to avoid SELECT when there is no `mappedBy` (i.e. uni direction)?","body":"Right ok, got it. Then is there a way to avoid SELECT when there is no <code>mappedBy</code> (i.e. uni direction)?"},{"owner":{"account_id":476019,"reputation":14699,"user_id":886697,"accept_rate":92,"display_name":"Stanislav Bashkyrtsev"},"score":1,"creation_date":1666944926,"post_id":74223986,"comment_id":131058964,"body_markdown":"No, as mentioned by @Andriy Slobodyanyk in another answer, Set has to check if the newly added element already exists in the collection. For this it needs to load other elements. The only solution is to switch to another type of collection - List (which uses PersistedBag if elements aren&#39;t ordered in DB). And also as mentioned by @Andriy Slobodyanyk - be careful with Sets as `hashCode()` which relies on IDs may lead to nasty bugs when those IDs are generated _after_ adding elements to the set.","body":"No, as mentioned by @Andriy Slobodyanyk in another answer, Set has to check if the newly added element already exists in the collection. For this it needs to load other elements. The only solution is to switch to another type of collection - List (which uses PersistedBag if elements aren&#39;t ordered in DB). And also as mentioned by @Andriy Slobodyanyk - be careful with Sets as <code>hashCode()</code> which relies on IDs may lead to nasty bugs when those IDs are generated <i>after</i> adding elements to the set."},{"owner":{"account_id":1736824,"reputation":5410,"user_id":1589188,"accept_rate":66,"display_name":"user1589188"},"score":0,"creation_date":1667443858,"post_id":74223986,"comment_id":131170366,"body_markdown":"@Stanislav_Bashkyrtsev I tried your method, it works for existing `MyParent` when I try to persist a new `MyChild`, but if the parent is also new, I get error when persisting the child saying foreign reference key violation from the database because the parent hasn&#39;t been saved yet. How would you solve this?","body":"@Stanislav_Bashkyrtsev I tried your method, it works for existing <code>MyParent</code> when I try to persist a new <code>MyChild</code>, but if the parent is also new, I get error when persisting the child saying foreign reference key violation from the database because the parent hasn&#39;t been saved yet. How would you solve this?"},{"owner":{"account_id":476019,"reputation":14699,"user_id":886697,"accept_rate":92,"display_name":"Stanislav Bashkyrtsev"},"score":0,"creation_date":1667445027,"post_id":74223986,"comment_id":131170523,"body_markdown":"The error that you mention implies that you didn&#39;t set the field `MyChild.parent`. You need to set it, but also you&#39;d need to either `persist(parent)` prior to persisting the child or set up a cascade.","body":"The error that you mention implies that you didn&#39;t set the field <code>MyChild.parent</code>. You need to set it, but also you&#39;d need to either <code>persist(parent)</code> prior to persisting the child or set up a cascade."}],"tags":[],"owner":{"account_id":476019,"reputation":14699,"user_id":886697,"accept_rate":92,"display_name":"Stanislav Bashkyrtsev"},"comment_count":6,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1666882296,"creation_date":1666881932,"answer_id":74223986,"question_id":74220517,"body_markdown":"You&#39;re adding an element to a collection. This has to initialize the lazy collection - therefore you get your `SELECT`.\r\n\r\nNote, that you don&#39;t need to work with the collection at all in order to add the element. You&#39;re using an &quot;inverse&quot; mapping by declaring `mappedBy = &quot;myParent&quot;`. This means that it&#39;s the child who&#39;s responsible for persisting the association with its parent.\r\n\r\nSo what you need is:\r\n\r\n    MyParent myParent = myParentRepository.findById(1);\r\n    MyChild myChild = buildNewChild();\r\n    myChild.setParent(myParent);\r\n    someRepository.persist(myChild)\r\n\r\nNext time you select MyParent from a different Hibernate Session, you&#39;ll get your new element in the collection.\r\n\r\nIt makes sense to add to the collection only if you intend to work with that list in the same request. But that means you do need the `SELECT`.\r\n\r\nPS: If you get rid of Spring Data in favour of Hibernate Session or JPA EntityManager, you&#39;d be able to eliminate `SELECT`ing MyParent too by using `session.load(1)` or `entityManager.getRerence(1)`.","title":"Hibernate generating SELECT before INSERT for new child entities","body":"<p>You're adding an element to a collection. This has to initialize the lazy collection - therefore you get your <code>SELECT</code>.</p>\n<p>Note, that you don't need to work with the collection at all in order to add the element. You're using an &quot;inverse&quot; mapping by declaring <code>mappedBy = &quot;myParent&quot;</code>. This means that it's the child who's responsible for persisting the association with its parent.</p>\n<p>So what you need is:</p>\n<pre><code>MyParent myParent = myParentRepository.findById(1);\nMyChild myChild = buildNewChild();\nmyChild.setParent(myParent);\nsomeRepository.persist(myChild)\n</code></pre>\n<p>Next time you select MyParent from a different Hibernate Session, you'll get your new element in the collection.</p>\n<p>It makes sense to add to the collection only if you intend to work with that list in the same request. But that means you do need the <code>SELECT</code>.</p>\n<p>PS: If you get rid of Spring Data in favour of Hibernate Session or JPA EntityManager, you'd be able to eliminate <code>SELECT</code>ing MyParent too by using <code>session.load(1)</code> or <code>entityManager.getRerence(1)</code>.</p>\n"}],"owner":{"account_id":1736824,"reputation":5410,"user_id":1589188,"accept_rate":66,"display_name":"user1589188"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":600,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74223986,"answer_count":2,"score":0,"last_activity_date":1666882296,"creation_date":1666866218,"question_id":74220517,"body_markdown":"I have a parent entity with some children entities. When saving a new parent entity and its children entities, Spring is able to call `persist` and I could see there are only some INSERT statements generated.\r\n\r\nProblem is when I add some new children entities to an existing parent entity and save it, Spring calls `merge` instead and what I found was there were some SELECT statements generated for those new children entities before their INSERT statements.\r\n\r\nHow to avoid these extra SELECT statements?\r\n\r\ne.g.\r\n\r\n    @Entity\r\n    public class MyParent {\r\n        ...\r\n        @OneToMany(fetch = FetchType.LAZY, mappedBy = &quot;myParent&quot;, cascade = CascadeType.ALL)\r\n        private Set&lt;MyChild&gt; children;\r\n    }\r\n\r\n    @Entity\r\n    public class MyChild {\r\n        ...        \r\n    }\r\n\r\nand \r\n\r\n    MyParent myParent = buildNewParentAndChildren();\r\n    myParentRepository.save(myParent); // deep down calls persist(), generates INSERT only\r\n\r\nbut\r\n\r\n    MyParent myParent = myParentRepository.findById(1);\r\n    MyChild myChild = buildNewChild();\r\n    myParent.getMyChildren().add(myChild);\r\n    myParentRepository.save(myParent); // deep down calls merge(), generates SELECT and INSERT","title":"Hibernate generating SELECT before INSERT for new child entities","body":"<p>I have a parent entity with some children entities. When saving a new parent entity and its children entities, Spring is able to call <code>persist</code> and I could see there are only some INSERT statements generated.</p>\n<p>Problem is when I add some new children entities to an existing parent entity and save it, Spring calls <code>merge</code> instead and what I found was there were some SELECT statements generated for those new children entities before their INSERT statements.</p>\n<p>How to avoid these extra SELECT statements?</p>\n<p>e.g.</p>\n<pre><code>@Entity\npublic class MyParent {\n    ...\n    @OneToMany(fetch = FetchType.LAZY, mappedBy = &quot;myParent&quot;, cascade = CascadeType.ALL)\n    private Set&lt;MyChild&gt; children;\n}\n\n@Entity\npublic class MyChild {\n    ...        \n}\n</code></pre>\n<p>and</p>\n<pre><code>MyParent myParent = buildNewParentAndChildren();\nmyParentRepository.save(myParent); // deep down calls persist(), generates INSERT only\n</code></pre>\n<p>but</p>\n<pre><code>MyParent myParent = myParentRepository.findById(1);\nMyChild myChild = buildNewChild();\nmyParent.getMyChildren().add(myChild);\nmyParentRepository.save(myParent); // deep down calls merge(), generates SELECT and INSERT\n</code></pre>\n"},{"tags":["java","elasticsearch"],"comments":[{"owner":{"account_id":5254014,"reputation":1809,"user_id":4197363,"display_name":"Anirudh Modi"},"score":0,"creation_date":1451415598,"post_id":34513132,"comment_id":56775703,"body_markdown":"I really doubt if there is any way out, except for using different name.. because this feature was something implemented by elastic in 2.0, and it was a pretty big change from their end","body":"I really doubt if there is any way out, except for using different name.. because this feature was something implemented by elastic in 2.0, and it was a pretty big change from their end"},{"owner":{"account_id":3801754,"reputation":301,"user_id":3155208,"accept_rate":20,"display_name":"user3155208"},"score":0,"creation_date":1451421875,"post_id":34513132,"comment_id":56778773,"body_markdown":"If I want to use different name - how I&#39;m doing it technically? Is there any &quot;filter&quot; that modifies the name based on certain pattern? Since fields are dynamic, I cannot do it in advance, before data arrives. What feature should I look for in their documentation? Another option I thought about is to redesign the way data is stored: use current type as index (all the data in each index will be mapped the same way) and make tenant id one of the fields added somehow to the document. Though it makes indices bigger and multi-tenancy support more challenging.","body":"If I want to use different name - how I&#39;m doing it technically? Is there any &quot;filter&quot; that modifies the name based on certain pattern? Since fields are dynamic, I cannot do it in advance, before data arrives. What feature should I look for in their documentation? Another option I thought about is to redesign the way data is stored: use current type as index (all the data in each index will be mapped the same way) and make tenant id one of the fields added somehow to the document. Though it makes indices bigger and multi-tenancy support more challenging."},{"owner":{"account_id":5254014,"reputation":1809,"user_id":4197363,"display_name":"Anirudh Modi"},"score":0,"creation_date":1451445471,"post_id":34513132,"comment_id":56786404,"body_markdown":"No there is no filter that can mosify the name of a field based on any pattern... I will suggest you to rethink about how the data need to be stored.. Storing the type as an index is also not recommended..","body":"No there is no filter that can mosify the name of a field based on any pattern... I will suggest you to rethink about how the data need to be stored.. Storing the type as an index is also not recommended.."},{"owner":{"account_id":7503566,"reputation":6078,"user_id":5700967,"accept_rate":42,"display_name":"oblivion"},"score":0,"creation_date":1487230131,"post_id":34513132,"comment_id":71691375,"body_markdown":"Any luck with this ? Please share what you did.","body":"Any luck with this ? Please share what you did."},{"owner":{"account_id":3801754,"reputation":301,"user_id":3155208,"accept_rate":20,"display_name":"user3155208"},"score":1,"creation_date":1487232200,"post_id":34513132,"comment_id":71692515,"body_markdown":"Eventually the original problem was solved by saving different types in different indices. Not the brilliant idea but we couldn&#39;t think about something better. Note that we have multiple but limited number of sources so number of indices grows reasonably. In addition we added pre-index-enricher service that interfering to the data-in flow just before actual indexing of the document. We add some synthetic fields there. However if your fields list is known list (but not types), you can use it for renaming. It wasn&#39;t our case though (fields list could change) so we didn&#39;t use it for this purpose.","body":"Eventually the original problem was solved by saving different types in different indices. Not the brilliant idea but we couldn&#39;t think about something better. Note that we have multiple but limited number of sources so number of indices grows reasonably. In addition we added pre-index-enricher service that interfering to the data-in flow just before actual indexing of the document. We add some synthetic fields there. However if your fields list is known list (but not types), you can use it for renaming. It wasn&#39;t our case though (fields list could change) so we didn&#39;t use it for this purpose."}],"answers":[{"tags":[],"owner":{"account_id":2353623,"reputation":300,"user_id":2061958,"display_name":"Chris Wendt"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1666882279,"creation_date":1491668009,"answer_id":43297367,"question_id":34513132,"body_markdown":"There is no way to do index arbitrary JSON without pre-processing before it&#39;s indexed - not even [Dynamic templates][2] are flexible enough.\r\n\r\nYou can flatten nested objects into key-value pairs and use a [Nested datatype][3], [Multi-fields][4], and [`ignore_malformed`][5] to index arbitrary JSON (even with type conflicts) as described [here][1]. Unfortunately, Elasticsearch can still throw an exception at query time if you try to, for example, match a string to `kv_pairs.value.long`, so you&#39;ll have choose appropriate fields based on format of the value.\r\n\r\n[1]: https://dev.to/chrismwendt/indexing-arbitrary-json-into-elasticsearch-28m7\r\n[2]: https://www.elastic.co/guide/en/elasticsearch/reference/2.4/dynamic-templates.html\r\n[3]: https://www.elastic.co/guide/en/elasticsearch/reference/2.4/nested.html\r\n[4]: https://www.elastic.co/guide/en/elasticsearch/reference/2.4/multi-fields.html\r\n[5]: https://www.elastic.co/guide/en/elasticsearch/reference/2.4/ignore-malformed.html\r\n","title":"Elasticsearch - what to do if fields have the same name but multiple mapping","body":"<p>There is no way to do index arbitrary JSON without pre-processing before it's indexed - not even <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/2.4/dynamic-templates.html\" rel=\"nofollow noreferrer\">Dynamic templates</a> are flexible enough.</p>\n<p>You can flatten nested objects into key-value pairs and use a <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/2.4/nested.html\" rel=\"nofollow noreferrer\">Nested datatype</a>, <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/2.4/multi-fields.html\" rel=\"nofollow noreferrer\">Multi-fields</a>, and <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/2.4/ignore-malformed.html\" rel=\"nofollow noreferrer\"><code>ignore_malformed</code></a> to index arbitrary JSON (even with type conflicts) as described <a href=\"https://dev.to/chrismwendt/indexing-arbitrary-json-into-elasticsearch-28m7\" rel=\"nofollow noreferrer\">here</a>. Unfortunately, Elasticsearch can still throw an exception at query time if you try to, for example, match a string to <code>kv_pairs.value.long</code>, so you'll have choose appropriate fields based on format of the value.</p>\n"},{"tags":[],"owner":{"account_id":2774008,"reputation":18025,"user_id":2387977,"accept_rate":69,"display_name":"Dherik"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1586225645,"creation_date":1586225645,"answer_id":61071760,"question_id":34513132,"body_markdown":"It&#39;s not the best practice I suppose, but you can store the field content as a `String` and make the deserialization manually after retrieve the information.\r\n\r\nSo, imagine a class like:\r\n\r\n    class Person {\r\n        private final Object name;\r\n    }\r\n\r\nThat can receive a `List` of `String` or a List of any other `Object`, just for example\r\n\r\nSo, instead of serialize the Person to a `String` and save it, you can serialize to a `String` **and** save the content on another class, like:\r\n\r\n    String personContent new ObjectMapper().writeValueAsString(person);\r\n    RequestDto dto = new RequestDto(personContent);\r\n    String dtoContent new ObjectMapper().writeValueAsString(dto);\r\n\r\nAnd save the `dtoContent`:\r\n\r\n    IndexRequest request = new IndexRequest(&quot;persons&quot;)\r\n    request.source(dtoContent, XContentType.JSON);\r\n    IndexResponse response = client.index(request, RequestOptions.DEFAULT);\r\n\r\nThe `RequestDto` will be a simple class with a `String` field:\r\n\r\n    class RequestDto {\r\n        private String content;\r\n    }\r\n\r\nI&#39;m not a expert on ElasticSearch, but probably you will loose a lot of features from the ElasticSearch by passing his validations doing that.","title":"Elasticsearch - what to do if fields have the same name but multiple mapping","body":"<p>It's not the best practice I suppose, but you can store the field content as a <code>String</code> and make the deserialization manually after retrieve the information.</p>\n\n<p>So, imagine a class like:</p>\n\n<pre><code>class Person {\n    private final Object name;\n}\n</code></pre>\n\n<p>That can receive a <code>List</code> of <code>String</code> or a List of any other <code>Object</code>, just for example</p>\n\n<p>So, instead of serialize the Person to a <code>String</code> and save it, you can serialize to a <code>String</code> <strong>and</strong> save the content on another class, like:</p>\n\n<pre><code>String personContent new ObjectMapper().writeValueAsString(person);\nRequestDto dto = new RequestDto(personContent);\nString dtoContent new ObjectMapper().writeValueAsString(dto);\n</code></pre>\n\n<p>And save the <code>dtoContent</code>:</p>\n\n<pre><code>IndexRequest request = new IndexRequest(\"persons\")\nrequest.source(dtoContent, XContentType.JSON);\nIndexResponse response = client.index(request, RequestOptions.DEFAULT);\n</code></pre>\n\n<p>The <code>RequestDto</code> will be a simple class with a <code>String</code> field:</p>\n\n<pre><code>class RequestDto {\n    private String content;\n}\n</code></pre>\n\n<p>I'm not a expert on ElasticSearch, but probably you will loose a lot of features from the ElasticSearch by passing his validations doing that.</p>\n"}],"owner":{"account_id":3801754,"reputation":301,"user_id":3155208,"accept_rate":20,"display_name":"user3155208"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5699,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"answer_count":2,"score":12,"last_activity_date":1666882279,"creation_date":1451399538,"question_id":34513132,"body_markdown":"I use Elasticsearch for storing data sent from multiple sources outside of my system, i.e. I&#39;m not controlling the incoming data - I just receive json document and store it. I have no logstash with its filters in the middle, only ES and Kibana. Each data source sent its own data type and all of them are stored in the same index (per tenant) but in different types. However since I cannot control the data that is sent to me, it is possible to receive documents of different types with the field having the same name and different structure.  \r\n**For example**, assume that I have type1 and type2 with field FLD, which is an object in both cases but the structure of this object is not the same. Specifically FLD.name is a string field in type1 but an object in type2. And in this case, when type1 data arrives it is stored successfully but when type2 data arrives, it is rejected: \r\n\r\n&gt; failed to put mappings on indices [[myindex]], type [type2]  \r\n&gt; java.lang.IllegalArgumentException: Mapper for [FLD] conflicts with existing mapping in other types[Can&#39;t merge a non object mapping [FLD.name] with an object mapping [FLD.name]]\r\n\r\nES documentation clearly declare that fields with the same name in the same index in different mapping types mapped to the same field internally and must have the same mapping ([see here][1]).  \r\n\r\n**My question** is what can I do in this case? I&#39;d prefer to keep all the types in the same index. Is it possible to add a unique-per-type suffix to field names or something like this? Any other solution? I&#39;m a newbie in Elasticsearch so maybe I&#39;m missing something simple... Thanks in advance.\r\n\r\n\r\n  [1]: https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping.html#field-conflicts","title":"Elasticsearch - what to do if fields have the same name but multiple mapping","body":"<p>I use Elasticsearch for storing data sent from multiple sources outside of my system, i.e. I'm not controlling the incoming data - I just receive json document and store it. I have no logstash with its filters in the middle, only ES and Kibana. Each data source sent its own data type and all of them are stored in the same index (per tenant) but in different types. However since I cannot control the data that is sent to me, it is possible to receive documents of different types with the field having the same name and different structure.<br>\n<strong>For example</strong>, assume that I have type1 and type2 with field FLD, which is an object in both cases but the structure of this object is not the same. Specifically FLD.name is a string field in type1 but an object in type2. And in this case, when type1 data arrives it is stored successfully but when type2 data arrives, it is rejected: </p>\n\n<blockquote>\n  <p>failed to put mappings on indices [[myindex]], type [type2]<br>\n  java.lang.IllegalArgumentException: Mapper for [FLD] conflicts with existing mapping in other types[Can't merge a non object mapping [FLD.name] with an object mapping [FLD.name]]</p>\n</blockquote>\n\n<p>ES documentation clearly declare that fields with the same name in the same index in different mapping types mapped to the same field internally and must have the same mapping (<a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping.html#field-conflicts\" rel=\"nofollow noreferrer\">see here</a>).  </p>\n\n<p><strong>My question</strong> is what can I do in this case? I'd prefer to keep all the types in the same index. Is it possible to add a unique-per-type suffix to field names or something like this? Any other solution? I'm a newbie in Elasticsearch so maybe I'm missing something simple... Thanks in advance.</p>\n"},{"tags":["java","sql-server","talend"],"comments":[{"owner":{"account_id":13407034,"reputation":755,"user_id":9674760,"display_name":"Amine Ben Khelifa"},"score":0,"creation_date":1666337990,"post_id":74149780,"comment_id":130917646,"body_markdown":"do this and i will tell you what to do : Window-&gt;Preferences-&gt;general-&gt;network Connections       .   Please take a picture and post it in the question i will tell you what do then ! Because your are probably passing by a proxy that why you cannot establish http connexion ;)","body":"do this and i will tell you what to do : Window-&gt;Preferences-&gt;general-&gt;network Connections       .   Please take a picture and post it in the question i will tell you what do then ! Because your are probably passing by a proxy that why you cannot establish http connexion ;)"},{"owner":{"account_id":13407034,"reputation":755,"user_id":9674760,"display_name":"Amine Ben Khelifa"},"score":0,"creation_date":1666338276,"post_id":74149780,"comment_id":130917715,"body_markdown":"Try in the active provider : Manual and test if the download work or not","body":"Try in the active provider : Manual and test if the download work or not"}],"answers":[{"tags":[],"owner":{"account_id":8809828,"reputation":2512,"user_id":6583204,"display_name":"Corentin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666682140,"creation_date":1666682140,"answer_id":74190300,"question_id":74149780,"body_markdown":"You can find this driver on microsoft website if download from talend is not possible.","title":"Issue with creating CONNECTION MANAGER IN TALEND USING SQL SERVER","body":"<p>You can find this driver on microsoft website if download from talend is not possible.</p>\n"},{"tags":[],"owner":{"account_id":13407034,"reputation":755,"user_id":9674760,"display_name":"Amine Ben Khelifa"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666882244,"creation_date":1666882244,"answer_id":74224066,"question_id":74149780,"body_markdown":"do this  `Window-&gt;Preferences-&gt;general-&gt;network Connections`  \r\n\r\nTry in the  `active provider : Manual` and test if the download work or not","title":"Issue with creating CONNECTION MANAGER IN TALEND USING SQL SERVER","body":"<p>do this  <code>Window-&gt;Preferences-&gt;general-&gt;network Connections</code></p>\n<p>Try in the  <code>active provider : Manual</code> and test if the download work or not</p>\n"}],"owner":{"account_id":26689695,"reputation":1,"user_id":20298441,"display_name":"Deenathayalan Thiruvengadam"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":118,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1666882244,"creation_date":1666335238,"question_id":74149780,"body_markdown":"while try to connect with my DB . I&#39;m getting some popup window to download some .jar files. But for a single file I can&#39;t to download it. Please say how to resolve this issue. I&#39;m getting error code for missing file \r\n\r\n&quot;mvn:org.talend.libraries/mssql-jdbc/6&quot;\r\n\r\nError Screenshot in below link : \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/8LR4G.jpg","title":"Issue with creating CONNECTION MANAGER IN TALEND USING SQL SERVER","body":"<p>while try to connect with my DB . I'm getting some popup window to download some .jar files. But for a single file I can't to download it. Please say how to resolve this issue. I'm getting error code for missing file</p>\n<p>&quot;mvn:org.talend.libraries/mssql-jdbc/6&quot;</p>\n<p>Error Screenshot in below link :</p>\n<p><a href=\"https://i.stack.imgur.com/8LR4G.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8LR4G.jpg\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring","apache-kafka","legacy"],"answers":[{"comments":[{"owner":{"account_id":329814,"reputation":11000,"user_id":653539,"accept_rate":50,"display_name":"Tom&#225;š Z&#225;lusk&#253;"},"score":0,"creation_date":1666881039,"post_id":74214180,"comment_id":131044296,"body_markdown":"Yes, with https://mvnrepository.com/artifact/org.springframework.kafka/spring-kafka/1.3.11.RELEASE (which has kafka-clients 0.11.0.3) I managed to connect do Kafka 2.7 and send some messages. Thanks for advice.","body":"Yes, with <a href=\"https://mvnrepository.com/artifact/org.springframework.kafka/spring-kafka/1.3.11.RELEASE\" rel=\"nofollow noreferrer\">mvnrepository.com/artifact/org.springframework.kafka/&hellip;</a> (which has kafka-clients 0.11.0.3) I managed to connect do Kafka 2.7 and send some messages. Thanks for advice."},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1666881260,"post_id":74214180,"comment_id":131044389,"body_markdown":"You should use a later version which has at least kafka-clients 2.7 dependency","body":"You should use a later version which has at least kafka-clients 2.7 dependency"}],"tags":[],"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1666881295,"creation_date":1666818124,"answer_id":74214180,"question_id":74213917,"body_markdown":"`kafka-clients` is all you need (from Maven Central, not Confluent). You could go a step further and look into Log4j2 Kafka bridge, then property files for that. \r\n\r\nIf you want to externalize config into regular Java `.properties` file, you can, or you can pull values from environment variables, if you follow 12-factor principles. \r\n\r\nBut if you don&#39;t already have Spring Boot dependencies, then I do not think adding them is worth it for only Kafka. \r\n\r\nAlso, the Spring-Kafka documentation covers how to configure your app **without** Boot. ","title":"How to connect Kafka to legacy Spring","body":"<p><code>kafka-clients</code> is all you need (from Maven Central, not Confluent). You could go a step further and look into Log4j2 Kafka bridge, then property files for that.</p>\n<p>If you want to externalize config into regular Java <code>.properties</code> file, you can, or you can pull values from environment variables, if you follow 12-factor principles.</p>\n<p>But if you don't already have Spring Boot dependencies, then I do not think adding them is worth it for only Kafka.</p>\n<p>Also, the Spring-Kafka documentation covers how to configure your app <strong>without</strong> Boot.</p>\n"}],"owner":{"account_id":329814,"reputation":11000,"user_id":653539,"accept_rate":50,"display_name":"Tom&#225;š Z&#225;lusk&#253;"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74214180,"answer_count":1,"score":0,"last_activity_date":1666881295,"creation_date":1666816403,"question_id":74213917,"body_markdown":"I am working on PoC of connecting legacy Spring application to Kafka. It is `war` application to be deployed in Tomcat, Spring version 4.3.12. Is there some library to make communication with Kafka almost as easy as with Spring Boot? I need just fundamental operations: sending message, listening for confirmation, receiving.\r\n\r\nI have some experience with Spring Boot support as is provided in `org.springframework.kafka:spring-kafka` library. I am not sure how to efficiently adopt Kafka for legacy Spring - I&#39;m thinking of using [Kafka Java client](https://docs.confluent.io/kafka-clients/java/current/overview.html#ak-java) which looks promising but as I am used to working at Spring Boot abstraction level I don&#39;t have clue how much code should I supply myself.\r\n\r\nWeb search is not much helpful in this case since it tends to show Spring Boot-related solutions. Migration of legacy application is considered too, I just need to have some idea how difficult each way is.\r\n","title":"How to connect Kafka to legacy Spring","body":"<p>I am working on PoC of connecting legacy Spring application to Kafka. It is <code>war</code> application to be deployed in Tomcat, Spring version 4.3.12. Is there some library to make communication with Kafka almost as easy as with Spring Boot? I need just fundamental operations: sending message, listening for confirmation, receiving.</p>\n<p>I have some experience with Spring Boot support as is provided in <code>org.springframework.kafka:spring-kafka</code> library. I am not sure how to efficiently adopt Kafka for legacy Spring - I'm thinking of using <a href=\"https://docs.confluent.io/kafka-clients/java/current/overview.html#ak-java\" rel=\"nofollow noreferrer\">Kafka Java client</a> which looks promising but as I am used to working at Spring Boot abstraction level I don't have clue how much code should I supply myself.</p>\n<p>Web search is not much helpful in this case since it tends to show Spring Boot-related solutions. Migration of legacy application is considered too, I just need to have some idea how difficult each way is.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":0,"creation_date":1607651992,"post_id":65244768,"comment_id":115346622,"body_markdown":"Yes, there is a way. --- [Why is “Is there a way to…” a poorly worded question?](https://softwareengineering.meta.stackexchange.com/q/7273/202153)","body":"Yes, there is a way. --- <a href=\"https://softwareengineering.meta.stackexchange.com/q/7273/202153\">Why is “Is there a way to…” a poorly worded question?</a>"}],"answers":[{"comments":[{"owner":{"account_id":9533601,"reputation":538,"user_id":13564911,"display_name":"Regex"},"score":0,"creation_date":1607655190,"post_id":65244823,"comment_id":115347153,"body_markdown":"It works, thank you. But when I send an SMS using this form it doesn&#39;t receive in Arabic words, it is being sent as a normal text.","body":"It works, thank you. But when I send an SMS using this form it doesn&#39;t receive in Arabic words, it is being sent as a normal text."},{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":0,"creation_date":1607669946,"post_id":65244823,"comment_id":115350149,"body_markdown":"@IlyasseSalama Can&#39;t help with that, since you don&#39;t say which SMS API you&#39;re using, and don&#39;t show any code using it, so we can&#39;t help you figure out what you might have done wrong. This question has been answered. If you want help with the API itself, create a new question and include the relevant information.","body":"@IlyasseSalama Can&#39;t help with that, since you don&#39;t say which SMS API you&#39;re using, and don&#39;t show any code using it, so we can&#39;t help you figure out what you might have done wrong. This question has been answered. If you want help with the API itself, create a new question and include the relevant information."},{"owner":{"account_id":9533601,"reputation":538,"user_id":13564911,"display_name":"Regex"},"score":0,"creation_date":1607695402,"post_id":65244823,"comment_id":115360256,"body_markdown":"Thanks, solved by adding &quot;encoding=UCS2&quot; to my request","body":"Thanks, solved by adding &quot;encoding=UCS2&quot; to my request"},{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":0,"creation_date":1607712840,"post_id":65244823,"comment_id":115368349,"body_markdown":"@IlyasseSalama So UTF-16, not UTF-8.","body":"@IlyasseSalama So UTF-16, not UTF-8."}],"tags":[],"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"comment_count":4,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1607652293,"creation_date":1607652293,"answer_id":65244823,"question_id":65244768,"body_markdown":"You can e.g. do it like this:\r\n\r\n```lang-java\r\nString input = &quot;مرحبا هذا نص تجريبي&quot;;\r\n\r\nStringBuilder buf = new StringBuilder();\r\nfor (int i = 0; i &lt; input.length(); i++) {\r\n\tchar ch = input.charAt(i);\r\n\tif (ch &gt;= 32 &amp;&amp; ch &lt; 127)\r\n\t\tbuf.append(ch);\r\n\telse\r\n\t\tbuf.append(String.format(&quot;\\\\u%04x&quot;, (int) ch));\r\n}\r\nString result = buf.toString();\r\n\r\nSystem.out.println(result);\r\n```\r\n\r\n*Output*\r\n\r\n```lang-none\r\n\\u0645\\u0631\\u062d\\u0628\\u0627 \\u0647\\u0630\\u0627 \\u0646\\u0635 \\u062a\\u062c\\u0631\\u064a\\u0628\\u064a\r\n```","title":"Convert Arabic string to Unicode","body":"<p>You can e.g. do it like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String input = &quot;مرحبا هذا نص تجريبي&quot;;\n\nStringBuilder buf = new StringBuilder();\nfor (int i = 0; i &lt; input.length(); i++) {\n    char ch = input.charAt(i);\n    if (ch &gt;= 32 &amp;&amp; ch &lt; 127)\n        buf.append(ch);\n    else\n        buf.append(String.format(&quot;\\\\u%04x&quot;, (int) ch));\n}\nString result = buf.toString();\n\nSystem.out.println(result);\n</code></pre>\n<p><em>Output</em></p>\n<pre class=\"lang-none prettyprint-override\"><code>\\u0645\\u0631\\u062d\\u0628\\u0627 \\u0647\\u0630\\u0627 \\u0646\\u0635 \\u062a\\u062c\\u0631\\u064a\\u0628\\u064a\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20149715,"reputation":472,"user_id":14777334,"display_name":"a guest"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1607655369,"creation_date":1607655369,"answer_id":65245182,"question_id":65244768,"body_markdown":"A possibly-pedantic footnote. In Java,\r\n\r\n&quot;مرحبا هذا نص تجريبي&quot;\r\n\r\nis **already** Unicode. Because Strings are Unicode in Java.  What you want is generally referred to as &quot;escaping&quot; the string -- representing characters by sequences of other characters.\r\n\r\nThe answer from @Andreas is good for how to do that.\r\n\r\n\r\n","title":"Convert Arabic string to Unicode","body":"<p>A possibly-pedantic footnote. In Java,</p>\n<p>&quot;مرحبا هذا نص تجريبي&quot;</p>\n<p>is <strong>already</strong> Unicode. Because Strings are Unicode in Java.  What you want is generally referred to as &quot;escaping&quot; the string -- representing characters by sequences of other characters.</p>\n<p>The answer from @Andreas is good for how to do that.</p>\n"},{"comments":[{"owner":{"account_id":9533601,"reputation":538,"user_id":13564911,"display_name":"Regex"},"score":0,"creation_date":1607663086,"post_id":65245981,"comment_id":115348605,"body_markdown":"I&#39;m trying to send an SMS through API, but it sends like this &quot;??? ???? ??&quot; Is there any solution for that?","body":"I&#39;m trying to send an SMS through API, but it sends like this &quot;??? ???? ??&quot; Is there any solution for that?"},{"owner":{"account_id":19105750,"reputation":471,"user_id":13952938,"display_name":"sbenati"},"score":0,"creation_date":1607689322,"post_id":65245981,"comment_id":115357530,"body_markdown":"@IlyasseSalama have you tried to use &amp;type=unicode in your POST command?","body":"@IlyasseSalama have you tried to use &amp;type=unicode in your POST command?"},{"owner":{"account_id":9533601,"reputation":538,"user_id":13564911,"display_name":"Regex"},"score":0,"creation_date":1607695357,"post_id":65245981,"comment_id":115360231,"body_markdown":"Thank you, solved by adding &quot;encoding=UCS2&quot;","body":"Thank you, solved by adding &quot;encoding=UCS2&quot;"}],"tags":[],"owner":{"account_id":19105750,"reputation":471,"user_id":13952938,"display_name":"sbenati"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1607662553,"creation_date":1607662553,"answer_id":65245981,"question_id":65244768,"body_markdown":"I had a similar issue with JavaMail, but it did not require me escaping characters. All I had to do was add one line of code:\r\n\r\n    MimeUtility.encodeText(fileName)","title":"Convert Arabic string to Unicode","body":"<p>I had a similar issue with JavaMail, but it did not require me escaping characters. All I had to do was add one line of code:</p>\n<pre><code>MimeUtility.encodeText(fileName)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3106922,"reputation":1,"user_id":5586846,"display_name":"Orochimaru86"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666880914,"creation_date":1666880914,"answer_id":74223764,"question_id":65244768,"body_markdown":"Thanks Andreas,\r\nIt works, For my case under SOAPUI, I created a script that is using this code as a defined function that I call whenever I need.\r\n\r\nVery helpuful:\r\n\r\n    def convertToUnicode (inputString){\r\n    StringBuilder buf = new StringBuilder()\r\n    for (int i = 0; i &lt; inputString.length(); i++) {\r\n        char ch = inputString.charAt(i)\r\n        if (ch &gt;= 32 &amp;&amp; ch &lt; 127)\r\n            buf.append(ch)\r\n        else\r\n            buf.append(String.format(&quot;\\\\u%04x&quot;, (int) ch));\r\n    }\r\n    String result = buf.toString()\r\n    return result\r\n    }","title":"Convert Arabic string to Unicode","body":"<p>Thanks Andreas,\nIt works, For my case under SOAPUI, I created a script that is using this code as a defined function that I call whenever I need.</p>\n<p>Very helpuful:</p>\n<pre><code>def convertToUnicode (inputString){\nStringBuilder buf = new StringBuilder()\nfor (int i = 0; i &lt; inputString.length(); i++) {\n    char ch = inputString.charAt(i)\n    if (ch &gt;= 32 &amp;&amp; ch &lt; 127)\n        buf.append(ch)\n    else\n        buf.append(String.format(&quot;\\\\u%04x&quot;, (int) ch));\n}\nString result = buf.toString()\nreturn result\n}\n</code></pre>\n"}],"owner":{"account_id":9533601,"reputation":538,"user_id":13564911,"display_name":"Regex"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2266,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":65244823,"answer_count":4,"score":0,"last_activity_date":1666880914,"creation_date":1607651861,"question_id":65244768,"body_markdown":"I have a string like this:\r\n\r\n    &quot;مرحبا هذا نص تجريبي&quot;\r\n\r\nAnd, I want to convert it to something like this:\r\n\r\n    &quot;\\u0623\\u0646\\u0627&quot;","title":"Convert Arabic string to Unicode","body":"<p>I have a string like this:</p>\n<pre><code>&quot;مرحبا هذا نص تجريبي&quot;\n</code></pre>\n<p>And, I want to convert it to something like this:</p>\n<pre><code>&quot;\\u0623\\u0646\\u0627&quot;\n</code></pre>\n"},{"tags":["java","multimap","unmodifiable"],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89873,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1666880880,"creation_date":1666879356,"answer_id":74223379,"question_id":74223142,"body_markdown":"Java&#39;s own core library is a general purpose library.\r\n\r\nGuava is a general purpose library.\r\n\r\nApache commons is a general purpose library.\r\n\r\nYou&#39;re using all 3 in a weird mix and match. This isn&#39;t a good idea. Generally the apache stuff is exceedingly low quality. The reason guava and apache-commons exist in the first place is due to perceived lack of utility in the core libs, but in the last decade or so (note that guava and apache-commons are much, much older), the core libs have been adding stuff at rapid pace.\r\n\r\nThus, I&#39;d get rid of apache for sure, and possibly guava as well; core libs can do all this now.\r\n\r\n## Getting an immutable multimap using just guava\r\n\r\nGuava has class [`ImmutableListMultimap`](https://guava.dev/releases/23.0/api/docs/com/google/common/collect/ImmutableListMultimap.html) and [`ImmutableSetMultimap`](https://guava.dev/releases/23.0/api/docs/com/google/common/collect/ImmutableSetMultimap.html). They have a `copyOf` static &#39;constructor&#39;. So just `ImmutableSetMultimap.copyOf(myMutableMultimap)` is all you need.\r\n\r\n## Getting an immutable multimap using just java core\r\n\r\nJava core does multimaps a little different. Instead of a `Multimap&lt;Integer, String&gt;`, you have a `Map&lt;Integer, List&lt;String&gt;&gt;` (or `Set&lt;String&gt;`, mirroring how guava&#39;s multimap has &#39;SetMultimap&#39; and &#39;ListMultimap&#39; variants). The major downside to it, and presumably the reason guava has multimaps in the first place, is that adding a new element sounds really complicated; you have to get the set/list first. If it exists, use it. If it does not exist, create it, then use that.\r\n\r\nExcept since Java9 it&#39;s not that complicated anymore:\r\n\r\n```\r\nMap&lt;Integer, List&lt;String&gt;&gt; multimap = new HashMap&lt;&gt;();\r\n\r\nint k = 5;\r\nString v = &quot;hello&quot;;\r\n\r\n// add a new item:\r\n\r\nmultimap.computeIfAbsent(5, x -&gt; new ArrayList&lt;&gt;()).add(v);\r\n```\r\n\r\n`computeIfAbsent` is the key that makes this palatable.\r\n\r\nGiven that it&#39;s &quot;just a map&quot;, you can use `Collections.unmodifiableMap()` as usual.\r\n\r\nGuava&#39;s multimap still has advantages; you may want to continue to use it.\r\n\r\nBut apache cannot help here.\r\n","title":"Unmodifiable Multimap","body":"<p>Java's own core library is a general purpose library.</p>\n<p>Guava is a general purpose library.</p>\n<p>Apache commons is a general purpose library.</p>\n<p>You're using all 3 in a weird mix and match. This isn't a good idea. Generally the apache stuff is exceedingly low quality. The reason guava and apache-commons exist in the first place is due to perceived lack of utility in the core libs, but in the last decade or so (note that guava and apache-commons are much, much older), the core libs have been adding stuff at rapid pace.</p>\n<p>Thus, I'd get rid of apache for sure, and possibly guava as well; core libs can do all this now.</p>\n<h2>Getting an immutable multimap using just guava</h2>\n<p>Guava has class <a href=\"https://guava.dev/releases/23.0/api/docs/com/google/common/collect/ImmutableListMultimap.html\" rel=\"nofollow noreferrer\"><code>ImmutableListMultimap</code></a> and <a href=\"https://guava.dev/releases/23.0/api/docs/com/google/common/collect/ImmutableSetMultimap.html\" rel=\"nofollow noreferrer\"><code>ImmutableSetMultimap</code></a>. They have a <code>copyOf</code> static 'constructor'. So just <code>ImmutableSetMultimap.copyOf(myMutableMultimap)</code> is all you need.</p>\n<h2>Getting an immutable multimap using just java core</h2>\n<p>Java core does multimaps a little different. Instead of a <code>Multimap&lt;Integer, String&gt;</code>, you have a <code>Map&lt;Integer, List&lt;String&gt;&gt;</code> (or <code>Set&lt;String&gt;</code>, mirroring how guava's multimap has 'SetMultimap' and 'ListMultimap' variants). The major downside to it, and presumably the reason guava has multimaps in the first place, is that adding a new element sounds really complicated; you have to get the set/list first. If it exists, use it. If it does not exist, create it, then use that.</p>\n<p>Except since Java9 it's not that complicated anymore:</p>\n<pre><code>Map&lt;Integer, List&lt;String&gt;&gt; multimap = new HashMap&lt;&gt;();\n\nint k = 5;\nString v = &quot;hello&quot;;\n\n// add a new item:\n\nmultimap.computeIfAbsent(5, x -&gt; new ArrayList&lt;&gt;()).add(v);\n</code></pre>\n<p><code>computeIfAbsent</code> is the key that makes this palatable.</p>\n<p>Given that it's &quot;just a map&quot;, you can use <code>Collections.unmodifiableMap()</code> as usual.</p>\n<p>Guava's multimap still has advantages; you may want to continue to use it.</p>\n<p>But apache cannot help here.</p>\n"}],"owner":{"account_id":24179619,"reputation":25,"user_id":18140495,"display_name":"BlackMonkee"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":356,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74223379,"answer_count":1,"score":1,"last_activity_date":1666880880,"creation_date":1666878345,"question_id":74223142,"body_markdown":"# Is there a way to create (/return) an unmodifiable Multimap?\r\n\r\nI am using the Multimap of com.google.common.collect and need to create an unmodfiable Multimap, but I couldn&#39;t find a lib that has a method, which returns the a given Multimap as an umodifiable Multimap.\r\n\r\nFor &quot;normal&quot; Maps I usually use the MapUtils.unmodifiableMap(map) method of the org.apache.commons.collections4.MapUtils lib.\r\n\r\n*example:*\r\n\r\n```\r\npublic static Map&lt;String, String&gt; bufferName()\r\n{\r\n    Map&lt;String, String&gt; fooMap = new HashMap&lt;&gt;();\r\n    fooMap.put(&quot;foo&quot;, &quot;bar&quot;);\r\n    return MapUtils.unmodifiableMap(fooMap);\r\n}\r\n```\r\n\r\n*what I need:*\r\n\r\n```\r\npublic static Multimap&lt;String, String&gt; bufferName1()\r\n{\r\n    HashMultimap&lt;String, String&gt; fooMultimap = HashMultimap.create();\r\n    fooMultimap.put(&quot;foo&quot;, &quot;bar&quot;);\r\n    fooMultimap.put(&quot;foo&quot;, &quot;foobar&quot;);\r\n    // ! the next line needs to be optimized so that the returned HashMultimap cannot be modified.\r\n    return fooMultimap;\r\n}\r\n```\r\n\r\n\r\n\r\nI tried to find a lib, that can return given mutable Multimaps as immutable Multimaps, but couldn&#39;t find any.\r\n\r\nI also tried to put the mutable Multimap into an immmutable Object, but that is everything else than clean.\r\n\r\n*example:*\r\n\r\n```\r\npublic static Set&lt;HashMultimap&lt;String, String&gt;&gt; bufferName1()\r\n{\r\n    HashMultimap&lt;String, String&gt; fooMultimap = HashMultimap.create();\r\n    fooMultimap.put(&quot;foo&quot;, &quot;bar&quot;);\r\n    fooMultimap.put(&quot;foo&quot;, &quot;foobar&quot;);\r\n    // org.apache.commons.collections4.SetUtils\r\n    SetUtils.unmodifiableSet(Set.of(fooMultimap));\r\n}\r\n```\r\n","title":"Unmodifiable Multimap","body":"<h1>Is there a way to create (/return) an unmodifiable Multimap?</h1>\n<p>I am using the Multimap of com.google.common.collect and need to create an unmodfiable Multimap, but I couldn't find a lib that has a method, which returns the a given Multimap as an umodifiable Multimap.</p>\n<p>For &quot;normal&quot; Maps I usually use the MapUtils.unmodifiableMap(map) method of the org.apache.commons.collections4.MapUtils lib.</p>\n<p><em>example:</em></p>\n<pre><code>public static Map&lt;String, String&gt; bufferName()\n{\n    Map&lt;String, String&gt; fooMap = new HashMap&lt;&gt;();\n    fooMap.put(&quot;foo&quot;, &quot;bar&quot;);\n    return MapUtils.unmodifiableMap(fooMap);\n}\n</code></pre>\n<p><em>what I need:</em></p>\n<pre><code>public static Multimap&lt;String, String&gt; bufferName1()\n{\n    HashMultimap&lt;String, String&gt; fooMultimap = HashMultimap.create();\n    fooMultimap.put(&quot;foo&quot;, &quot;bar&quot;);\n    fooMultimap.put(&quot;foo&quot;, &quot;foobar&quot;);\n    // ! the next line needs to be optimized so that the returned HashMultimap cannot be modified.\n    return fooMultimap;\n}\n</code></pre>\n<p>I tried to find a lib, that can return given mutable Multimaps as immutable Multimaps, but couldn't find any.</p>\n<p>I also tried to put the mutable Multimap into an immmutable Object, but that is everything else than clean.</p>\n<p><em>example:</em></p>\n<pre><code>public static Set&lt;HashMultimap&lt;String, String&gt;&gt; bufferName1()\n{\n    HashMultimap&lt;String, String&gt; fooMultimap = HashMultimap.create();\n    fooMultimap.put(&quot;foo&quot;, &quot;bar&quot;);\n    fooMultimap.put(&quot;foo&quot;, &quot;foobar&quot;);\n    // org.apache.commons.collections4.SetUtils\n    SetUtils.unmodifiableSet(Set.of(fooMultimap));\n}\n</code></pre>\n"},{"tags":["java","reflection"],"comments":[{"owner":{"account_id":18231926,"reputation":111,"user_id":13270701,"display_name":"hayden.mumm"},"score":0,"creation_date":1666878958,"post_id":74222612,"comment_id":131043443,"body_markdown":"Does [this post](https://stackoverflow.com/questions/1901164/get-type-of-a-generic-parameter-in-java-with-reflection) answer your question?","body":"Does <a href=\"https://stackoverflow.com/questions/1901164/get-type-of-a-generic-parameter-in-java-with-reflection\">this post</a> answer your question?"}],"answers":[{"tags":[],"owner":{"account_id":15413287,"reputation":63,"user_id":11119471,"display_name":"mrmirg"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1666880743,"creation_date":1666880743,"answer_id":74223723,"question_id":74222612,"body_markdown":"Try this:\r\n`.getDeclaredMethod(&quot;registerServiceClass&quot;, Class.class, Object.class) ;`\r\n\r\nIt is impossible to infer generic types within method scope at runtime, as this information is erased by the compiler\r\n\r\nhttps://docs.oracle.com/javase/tutorial/java/generics/erasure.html","title":"Getting method with Generic Types within signature using Reflection","body":"<p>Try this:\n<code>.getDeclaredMethod(&quot;registerServiceClass&quot;, Class.class, Object.class) ;</code></p>\n<p>It is impossible to infer generic types within method scope at runtime, as this information is erased by the compiler</p>\n<p><a href=\"https://docs.oracle.com/javase/tutorial/java/generics/erasure.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/tutorial/java/generics/erasure.html</a></p>\n"}],"owner":{"account_id":22807677,"reputation":414,"user_id":16959486,"display_name":"Teddy Tsai"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74223723,"answer_count":1,"score":0,"last_activity_date":1666880743,"creation_date":1666876248,"question_id":74222612,"body_markdown":"I would like to invoke this method using Reflection but am a bit confused with getting the method with getDeclaredMethod(), how would this be done?\r\n\r\n```\r\n private static &lt;T&gt; void registerServiceClass(final Class&lt;T&gt; service, final T instance) {\r\n        Collection&lt;Class&lt;?&gt;&gt; serviceClasses = SERVICE_MAP.get(service);\r\n        if (null == serviceClasses) {\r\n            serviceClasses = new LinkedHashSet&lt;&gt;();\r\n        }\r\n        serviceClasses.add(instance.getClass());\r\n        SERVICE_MAP.put(service, serviceClasses);\r\n    }\r\n}\r\n```","title":"Getting method with Generic Types within signature using Reflection","body":"<p>I would like to invoke this method using Reflection but am a bit confused with getting the method with getDeclaredMethod(), how would this be done?</p>\n<pre><code> private static &lt;T&gt; void registerServiceClass(final Class&lt;T&gt; service, final T instance) {\n        Collection&lt;Class&lt;?&gt;&gt; serviceClasses = SERVICE_MAP.get(service);\n        if (null == serviceClasses) {\n            serviceClasses = new LinkedHashSet&lt;&gt;();\n        }\n        serviceClasses.add(instance.getClass());\n        SERVICE_MAP.put(service, serviceClasses);\n    }\n}\n</code></pre>\n"},{"tags":["java","security","spring-security","oauth-2.0","spring-security-oauth2"],"answers":[{"comments":[{"owner":{"account_id":4438395,"reputation":521,"user_id":3613594,"display_name":"user3613594"},"score":0,"creation_date":1399909244,"post_id":23575945,"comment_id":36250643,"body_markdown":"Hmm... Any way around this limitation? Or is it just &quot;the way it works&quot;?","body":"Hmm... Any way around this limitation? Or is it just &quot;the way it works&quot;?"},{"owner":{"account_id":1571965,"reputation":1507,"user_id":1459479,"accept_rate":82,"display_name":"raonirenosto"},"score":1,"creation_date":1399927797,"post_id":23575945,"comment_id":36261410,"body_markdown":"Maybe you could achieve it using filters, but I guess it would be overcomplicated. How about using different endpoints? Lets say: /basic/users and /oauth/users.","body":"Maybe you could achieve it using filters, but I guess it would be overcomplicated. How about using different endpoints? Lets say: /basic/users and /oauth/users."},{"owner":{"account_id":4438395,"reputation":521,"user_id":3613594,"display_name":"user3613594"},"score":0,"creation_date":1400082404,"post_id":23575945,"comment_id":36340680,"body_markdown":"We are considering exactly that now. Will keep digging and see if I can come up with a way to make it work. Thanks for your feedback and suggestions!","body":"We are considering exactly that now. Will keep digging and see if I can come up with a way to make it work. Thanks for your feedback and suggestions!"},{"owner":{"account_id":1571965,"reputation":1507,"user_id":1459479,"accept_rate":82,"display_name":"raonirenosto"},"score":0,"creation_date":1400085133,"post_id":23575945,"comment_id":36342473,"body_markdown":"Glad to help. If this answer was useful to you somehow, please accept the answer, thanks.","body":"Glad to help. If this answer was useful to you somehow, please accept the answer, thanks."}],"tags":[],"owner":{"account_id":1571965,"reputation":1507,"user_id":1459479,"accept_rate":82,"display_name":"raonirenosto"},"comment_count":4,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1399910340,"creation_date":1399681963,"answer_id":23575945,"question_id":23526644,"body_markdown":"I believe that is not possible to have both authentications. You can have basic authentication and oauth2 authentication, but for distinct endpoints. The way as you did, the first configuration will overcome the second, in this case, http basic will be used.","title":"Spring security with Oauth2 or Http-Basic authentication for the same resource","body":"<p>I believe that is not possible to have both authentications. You can have basic authentication and oauth2 authentication, but for distinct endpoints. The way as you did, the first configuration will overcome the second, in this case, http basic will be used.</p>\n"},{"comments":[{"owner":{"account_id":4438395,"reputation":521,"user_id":3613594,"display_name":"user3613594"},"score":0,"creation_date":1408580991,"post_id":25382366,"comment_id":39648298,"body_markdown":"Thanks for the tip! I&#39;m going to try to work on this again soon, and will post back if I&#39;m able to resolve it.","body":"Thanks for the tip! I&#39;m going to try to work on this again soon, and will post back if I&#39;m able to resolve it."}],"tags":[],"owner":{"account_id":2156706,"reputation":631,"user_id":3303207,"display_name":"zeldigas"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1408448015,"creation_date":1408448015,"answer_id":25382366,"question_id":23526644,"body_markdown":"Can&#39;t provide you with complete example, but here&#39;s a hints to dig:\r\n\r\nRoughly, spring auth is just a combination of request filter that extract auth data from request (headers) and authentication manager that provides authentication object for that auth.\r\n\r\nSo to get basic and oauth at the same url, you need 2 filters installed in filter chain BasicAuthenticationFilter and OAuth2AuthenticationProcessingFilter.\r\n\r\nI think the problem is that ConfiguringAdapters good for more simple confs as they tend to override each other. So as a first step try to move \r\n\r\n    .httpBasic();\r\n\r\ncall to ```ResourceServerConfiguration```\r\nNote that you also need to provide 2 different auth managers: one for basic auth and one for oauth","title":"Spring security with Oauth2 or Http-Basic authentication for the same resource","body":"<p>Can't provide you with complete example, but here's a hints to dig:</p>\n\n<p>Roughly, spring auth is just a combination of request filter that extract auth data from request (headers) and authentication manager that provides authentication object for that auth.</p>\n\n<p>So to get basic and oauth at the same url, you need 2 filters installed in filter chain BasicAuthenticationFilter and OAuth2AuthenticationProcessingFilter.</p>\n\n<p>I think the problem is that ConfiguringAdapters good for more simple confs as they tend to override each other. So as a first step try to move </p>\n\n<pre><code>.httpBasic();\n</code></pre>\n\n<p>call to <code>ResourceServerConfiguration</code>\nNote that you also need to provide 2 different auth managers: one for basic auth and one for oauth</p>\n"},{"tags":[],"owner":{"account_id":901873,"reputation":851,"user_id":937808,"accept_rate":33,"display_name":"Michael Ressler"},"comment_count":0,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1421962312,"creation_date":1421820655,"answer_id":28060682,"question_id":23526644,"body_markdown":"This may be close to what you were looking for:\r\n\r\n\t@Override\r\n\tpublic void configure(HttpSecurity http) throws Exception {\r\n\t\thttp.requestMatcher(new OAuthRequestedMatcher())\r\n\t\t.authorizeRequests()\r\n\t\t\t.anyRequest().authenticated();\r\n\t}\r\n\t\r\n\tprivate static class OAuthRequestedMatcher implements RequestMatcher {\r\n\t\t@Override\r\n\t\tpublic boolean matches(HttpServletRequest request) {\r\n\t\t\tString auth = request.getHeader(&quot;Authorization&quot;);\r\n\t\t\t// Determine if the client request contained an OAuth Authorization\r\n\t\t\treturn (auth != null) &amp;&amp; auth.startsWith(&quot;Bearer&quot;);\r\n\t\t}\r\n\t}\r\n\r\nThe only thing this doesn&#39;t provide is a way to &quot;fall back&quot; if the authentication isn&#39;t successful.\r\n\r\nTo me, this approach makes sense.  If a User is directly providing authentication to the request via Basic auth, then OAuth is not necessary.  If the Client is the one acting, then we need this filter to step in and make sure the request is properly authenticated.","title":"Spring security with Oauth2 or Http-Basic authentication for the same resource","body":"<p>This may be close to what you were looking for:</p>\n\n<pre><code>@Override\npublic void configure(HttpSecurity http) throws Exception {\n    http.requestMatcher(new OAuthRequestedMatcher())\n    .authorizeRequests()\n        .anyRequest().authenticated();\n}\n\nprivate static class OAuthRequestedMatcher implements RequestMatcher {\n    @Override\n    public boolean matches(HttpServletRequest request) {\n        String auth = request.getHeader(\"Authorization\");\n        // Determine if the client request contained an OAuth Authorization\n        return (auth != null) &amp;&amp; auth.startsWith(\"Bearer\");\n    }\n}\n</code></pre>\n\n<p>The only thing this doesn't provide is a way to \"fall back\" if the authentication isn't successful.</p>\n\n<p>To me, this approach makes sense.  If a User is directly providing authentication to the request via Basic auth, then OAuth is not necessary.  If the Client is the one acting, then we need this filter to step in and make sure the request is properly authenticated.</p>\n"},{"comments":[{"owner":{"account_id":90257,"reputation":37945,"user_id":248521,"accept_rate":70,"display_name":"jax"},"score":12,"creation_date":1497501974,"post_id":36243650,"comment_id":76107136,"body_markdown":"Where is `oAuth2AuthenticationEntryPoint()` defined?","body":"Where is <code>oAuth2AuthenticationEntryPoint()</code> defined?"},{"owner":{"account_id":1148819,"reputation":2299,"user_id":1130975,"accept_rate":32,"display_name":"kboom"},"score":4,"creation_date":1510298649,"post_id":36243650,"comment_id":81384594,"body_markdown":"Anyone knows how to do this properly for session-based authentication? (form login)","body":"Anyone knows how to do this properly for session-based authentication? (form login)"},{"owner":{"account_id":2555708,"reputation":1769,"user_id":2217743,"display_name":"AntonioOtero"},"score":1,"creation_date":1586144424,"post_id":36243650,"comment_id":108009816,"body_markdown":"Answer for @jax    \n                .authenticationEntryPoint(new OAuth2AuthenticationEntryPoint())                 where OAuth2AuthenticationEntryPoint comes from                                              \n                import org.springframework.security.oauth2.provider.error.OAuth2AuthenticationEntryPoint;","body":"Answer for @jax                     .authenticationEntryPoint(new OAuth2AuthenticationEntryPoint())                 where OAuth2AuthenticationEntryPoint comes from                                                               import org.springframework.security.oauth2.provider.error.OAuth2Aut&zwnj;&#8203;henticationEntryPoin&zwnj;&#8203;t;"}],"tags":[],"owner":{"account_id":8123777,"reputation":671,"user_id":6119490,"display_name":"kca2ply"},"comment_count":3,"down_vote_count":0,"up_vote_count":57,"is_accepted":false,"score":57,"last_activity_date":1529378955,"creation_date":1459050857,"answer_id":36243650,"question_id":23526644,"body_markdown":"I managed to get this work based on the hints by Michael Ressler&#39;s answer but with some tweaks. \r\n\r\nMy goal was to allow both Basic Auth and Oauth on the same resource endpoints, e.g., /leafcase/123.  I was trapped for quite some time due to the ordering of the filterChains (can be inspected in FilterChainProxy.filterChains); the default order is as follows: \r\n\r\n- Oauth authentication server (if enabled in the same project)&#39;s filterChains. default order 0 (see AuthorizationServerSecurityConfiguration)\r\n- Oauth resource server&#39;s filterChains. default order 3 (see ResourceServerConfiguration).  It has a request matcher logic that matches anything other than the Oauth authentication endpoints (e.g., /oauth/token, /oauth/authorize, etc. See ResourceServerConfiguration$NotOauthRequestMatcher.matches()). \r\n- The filterChains that corresponds to config(HttpSecurity http) - default order 100, see WebSecurityConfigurerAdapter. \r\n\r\nSince resource server&#39;s filterChains ranks higher than the one by WebSecurityConfigurerAdapter configured filterchain, and the former matches practically every resource endpoint, then Oauth resource server logic always kick in for any request to resource endpoints (even if the request uses the Authorization:Basic header).  The error you would get is:\r\n\r\n    {\r\n        &quot;error&quot;: &quot;unauthorized&quot;,\r\n        &quot;error_description&quot;: &quot;Full authentication is required to access this resource&quot;\r\n    }\r\n\r\nI made 2 changes to get this work:\r\n\r\nFirstly, order the WebSecurityConfigurerAdapter higher than the resource server (order 2 is higher than order 3). \r\n\r\n    @Configuration\r\n    @Order(2)\r\n    public class WebSecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\nSecondly, let configure(HttpSecurity) use a customer RequestMatcher that only matches &quot;Authorization: Basic&quot;.  \r\n\r\n    @Override\r\n\tprotected void configure(HttpSecurity http) throws Exception {\r\n\t\t\r\n\t\thttp\r\n\t\t\t.anonymous().disable()\r\n\t\t\t.requestMatcher(new BasicRequestMatcher())\r\n\t\t\t.authorizeRequests()\r\n\t\t\t\t.anyRequest().authenticated()\r\n                .and()\r\n            .httpBasic()\r\n\t\t\t\t .authenticationEntryPoint(oAuth2AuthenticationEntryPoint())\r\n\t\t\t\t.and()\r\n            // ... other stuff\r\n     }\r\n     ...\r\n     private static class BasicRequestMatcher implements RequestMatcher {\r\n\t\t@Override\r\n\t\tpublic boolean matches(HttpServletRequest request) {\r\n\t\t\tString auth = request.getHeader(&quot;Authorization&quot;);\r\n\t\t\treturn (auth != null &amp;&amp; auth.startsWith(&quot;Basic&quot;));\r\n\t\t}\r\n\t }\r\n\r\nAs a result it matches and handles a Basic Auth resource request before the resource server&#39;s filterChain has a chance to match it.  It also ONLY handles Authorizaiton:Basic resource request, thus any requests with Authorization:Bearer will fall through, and then handled by resource server&#39;s filterChain (i.e., Oauth&#39;s filter kicks in).  Also, it ranks lower than the AuthenticationServer (in case AuthenticationServer is enabled on the same project), so it doesn&#39;t prevent AuthenticaitonServer&#39;s filterchain from handling the request to /oauth/token, etc. ","title":"Spring security with Oauth2 or Http-Basic authentication for the same resource","body":"<p>I managed to get this work based on the hints by Michael Ressler's answer but with some tweaks. </p>\n\n<p>My goal was to allow both Basic Auth and Oauth on the same resource endpoints, e.g., /leafcase/123.  I was trapped for quite some time due to the ordering of the filterChains (can be inspected in FilterChainProxy.filterChains); the default order is as follows: </p>\n\n<ul>\n<li>Oauth authentication server (if enabled in the same project)'s filterChains. default order 0 (see AuthorizationServerSecurityConfiguration)</li>\n<li>Oauth resource server's filterChains. default order 3 (see ResourceServerConfiguration).  It has a request matcher logic that matches anything other than the Oauth authentication endpoints (e.g., /oauth/token, /oauth/authorize, etc. See ResourceServerConfiguration$NotOauthRequestMatcher.matches()). </li>\n<li>The filterChains that corresponds to config(HttpSecurity http) - default order 100, see WebSecurityConfigurerAdapter. </li>\n</ul>\n\n<p>Since resource server's filterChains ranks higher than the one by WebSecurityConfigurerAdapter configured filterchain, and the former matches practically every resource endpoint, then Oauth resource server logic always kick in for any request to resource endpoints (even if the request uses the Authorization:Basic header).  The error you would get is:</p>\n\n<pre><code>{\n    \"error\": \"unauthorized\",\n    \"error_description\": \"Full authentication is required to access this resource\"\n}\n</code></pre>\n\n<p>I made 2 changes to get this work:</p>\n\n<p>Firstly, order the WebSecurityConfigurerAdapter higher than the resource server (order 2 is higher than order 3). </p>\n\n<pre><code>@Configuration\n@Order(2)\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\n</code></pre>\n\n<p>Secondly, let configure(HttpSecurity) use a customer RequestMatcher that only matches \"Authorization: Basic\".  </p>\n\n<pre><code>@Override\nprotected void configure(HttpSecurity http) throws Exception {\n\n    http\n        .anonymous().disable()\n        .requestMatcher(new BasicRequestMatcher())\n        .authorizeRequests()\n            .anyRequest().authenticated()\n            .and()\n        .httpBasic()\n             .authenticationEntryPoint(oAuth2AuthenticationEntryPoint())\n            .and()\n        // ... other stuff\n }\n ...\n private static class BasicRequestMatcher implements RequestMatcher {\n    @Override\n    public boolean matches(HttpServletRequest request) {\n        String auth = request.getHeader(\"Authorization\");\n        return (auth != null &amp;&amp; auth.startsWith(\"Basic\"));\n    }\n }\n</code></pre>\n\n<p>As a result it matches and handles a Basic Auth resource request before the resource server's filterChain has a chance to match it.  It also ONLY handles Authorizaiton:Basic resource request, thus any requests with Authorization:Bearer will fall through, and then handled by resource server's filterChain (i.e., Oauth's filter kicks in).  Also, it ranks lower than the AuthenticationServer (in case AuthenticationServer is enabled on the same project), so it doesn't prevent AuthenticaitonServer's filterchain from handling the request to /oauth/token, etc. </p>\n"},{"tags":[],"owner":{"account_id":875392,"reputation":1699,"user_id":925141,"display_name":"Ryan J. McDonough"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1473389091,"creation_date":1473389091,"answer_id":39403052,"question_id":23526644,"body_markdown":"The solution @kca2ply provided works very well. I noticed the browser wasn&#39;t issuing a challenge so I tweaked the code a little to the following:\r\n\r\n    @Configuration\r\n    @Order(2)\r\n    public class WebSecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n      @Override\r\n      protected void configure(HttpSecurity http) throws Exception {\r\n\r\n        // @formatter:off\r\n        http.anonymous().disable()\r\n          .requestMatcher(request -&gt; {\r\n              String auth = request.getHeader(HttpHeaders.AUTHORIZATION);\r\n              return (auth != null &amp;&amp; auth.startsWith(&quot;Basic&quot;));\r\n          })\r\n          .antMatcher(&quot;/**&quot;)\r\n          .authorizeRequests().anyRequest().authenticated()\r\n        .and()\r\n          .httpBasic();\r\n        // @formatter:on\r\n      }\r\n\r\n      @Autowired\r\n      public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {\r\n        auth.inMemoryAuthentication()\r\n        .withUser(&quot;user&quot;).password(&quot;password&quot;).roles(&quot;USER&quot;);\r\n      }\r\n    }\r\n\r\nUsing both `requestMatcher()` and `antMatcher()` made things work perfectly. Browsers and HTTP clients will now challenge for basic creds first if not provided already. If no credentials are provided, it falls through to OAuth2.","title":"Spring security with Oauth2 or Http-Basic authentication for the same resource","body":"<p>The solution @kca2ply provided works very well. I noticed the browser wasn't issuing a challenge so I tweaked the code a little to the following:</p>\n\n<pre><code>@Configuration\n@Order(2)\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\n\n  @Override\n  protected void configure(HttpSecurity http) throws Exception {\n\n    // @formatter:off\n    http.anonymous().disable()\n      .requestMatcher(request -&gt; {\n          String auth = request.getHeader(HttpHeaders.AUTHORIZATION);\n          return (auth != null &amp;&amp; auth.startsWith(\"Basic\"));\n      })\n      .antMatcher(\"/**\")\n      .authorizeRequests().anyRequest().authenticated()\n    .and()\n      .httpBasic();\n    // @formatter:on\n  }\n\n  @Autowired\n  public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {\n    auth.inMemoryAuthentication()\n    .withUser(\"user\").password(\"password\").roles(\"USER\");\n  }\n}\n</code></pre>\n\n<p>Using both <code>requestMatcher()</code> and <code>antMatcher()</code> made things work perfectly. Browsers and HTTP clients will now challenge for basic creds first if not provided already. If no credentials are provided, it falls through to OAuth2.</p>\n"},{"comments":[{"owner":{"account_id":713274,"reputation":1313,"user_id":621588,"accept_rate":67,"display_name":"Max"},"score":0,"creation_date":1536869350,"post_id":40254402,"comment_id":91589701,"body_markdown":"BasicAuthenticationFilter would require an AuthenticationManager that could handle UserPasswordAuthentication and there is no such registered by the ResourceServerSecurityConfigurer. It gets a lot more code to make both oauth2 and basic auth work in a single filter chain.","body":"BasicAuthenticationFilter would require an AuthenticationManager that could handle UserPasswordAuthentication and there is no such registered by the ResourceServerSecurityConfigurer. It gets a lot more code to make both oauth2 and basic auth work in a single filter chain."}],"tags":[],"owner":{"account_id":384402,"reputation":1902,"user_id":740888,"display_name":"httPants"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1477459846,"creation_date":1477459846,"answer_id":40254402,"question_id":23526644,"body_markdown":"You can add a BasicAuthenticationFilter to the security filter chain to get OAuth2 OR Basic authentication security on a protected resource.  Example config is below...\r\n\r\n    @Configuration\r\n    @EnableResourceServer\r\n    public class OAuth2ResourceServerConfig extends ResourceServerConfigurerAdapter {\r\n    \r\n        @Autowired\r\n        private AuthenticationManager authenticationManagerBean;\r\n    \r\n        @Override\r\n        public void configure(HttpSecurity http) throws Exception {\r\n            // @formatter:off\r\n    \t    final String[] userEndpoints = {\r\n                &quot;/v1/api/airline&quot;\r\n            };\r\n    \r\n            final String[] adminEndpoints = {\r\n                    &quot;/v1/api/jobs**&quot;\r\n                };\r\n    \r\n    \t\thttp\r\n    \t\t\t.requestMatchers()\r\n    \t\t\t\t.antMatchers(userEndpoints)\r\n    \t\t\t\t.antMatchers(adminEndpoints)\r\n    \t\t\t\t.antMatchers(&quot;/secure/**&quot;)\r\n    \t\t\t\t.and()\r\n    \t\t\t.authorizeRequests()\r\n    \t\t\t\t.antMatchers(&quot;/secure/**&quot;).authenticated()\r\n    \t\t\t    .antMatchers(userEndpoints).hasRole(&quot;USER&quot;)\r\n    \t\t\t    .antMatchers(adminEndpoints).hasRole(&quot;ADMIN&quot;);\r\n    \r\n    \t\t// @formatter:on\r\n            http.addFilterBefore(new BasicAuthenticationFilter(authenticationManagerBean),\r\n                    UsernamePasswordAuthenticationFilter.class);\r\n        }\r\n    \r\n    }","title":"Spring security with Oauth2 or Http-Basic authentication for the same resource","body":"<p>You can add a BasicAuthenticationFilter to the security filter chain to get OAuth2 OR Basic authentication security on a protected resource.  Example config is below...</p>\n\n<pre><code>@Configuration\n@EnableResourceServer\npublic class OAuth2ResourceServerConfig extends ResourceServerConfigurerAdapter {\n\n    @Autowired\n    private AuthenticationManager authenticationManagerBean;\n\n    @Override\n    public void configure(HttpSecurity http) throws Exception {\n        // @formatter:off\n        final String[] userEndpoints = {\n            \"/v1/api/airline\"\n        };\n\n        final String[] adminEndpoints = {\n                \"/v1/api/jobs**\"\n            };\n\n        http\n            .requestMatchers()\n                .antMatchers(userEndpoints)\n                .antMatchers(adminEndpoints)\n                .antMatchers(\"/secure/**\")\n                .and()\n            .authorizeRequests()\n                .antMatchers(\"/secure/**\").authenticated()\n                .antMatchers(userEndpoints).hasRole(\"USER\")\n                .antMatchers(adminEndpoints).hasRole(\"ADMIN\");\n\n        // @formatter:on\n        http.addFilterBefore(new BasicAuthenticationFilter(authenticationManagerBean),\n                UsernamePasswordAuthenticationFilter.class);\n    }\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2522425,"reputation":577,"user_id":2192527,"accept_rate":61,"display_name":"Dave"},"score":1,"creation_date":1599036865,"post_id":47218548,"comment_id":112645953,"body_markdown":"After 5 hours trying to resolve this problem, this solution worked like a treat ;-) I shall be toasting your health with a glass of the finest cider tonight","body":"After 5 hours trying to resolve this problem, this solution worked like a treat ;-) I shall be toasting your health with a glass of the finest cider tonight"}],"tags":[],"owner":{"account_id":1148819,"reputation":2299,"user_id":1130975,"accept_rate":32,"display_name":"kboom"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1510309463,"creation_date":1510302751,"answer_id":47218548,"question_id":23526644,"body_markdown":"And why not doing this the other way round? Just bypass resource server if there is no token attached, then fallback to normal security filter chain. This is by the way what resource server filter is stopping on.\r\n\r\n    @Configuration\r\n    @EnableResourceServer\r\n    class ResourceServerConfig : ResourceServerConfigurerAdapter() {\r\n    \r\n    \r\n        @Throws(Exception::class)\r\n        override fun configure(resources: ResourceServerSecurityConfigurer) {\r\n            resources.resourceId(&quot;aaa&quot;)\r\n        }\r\n    \r\n        /**\r\n         * Resources exposed via oauth. As we are providing also local user interface they are also accessible from within.\r\n         */\r\n        @Throws(Exception::class)\r\n        override fun configure(http: HttpSecurity) {\r\n            http.requestMatcher(BearerAuthorizationHeaderMatcher())\r\n                    .authorizeRequests()\r\n                    .anyRequest()\r\n                    .authenticated()\r\n        }\r\n    \r\n        private class BearerAuthorizationHeaderMatcher : RequestMatcher {\r\n            override fun matches(request: HttpServletRequest): Boolean {\r\n                val auth = request.getHeader(&quot;Authorization&quot;)\r\n                return auth != null &amp;&amp; auth.startsWith(&quot;Bearer&quot;)\r\n            }\r\n        }\r\n    \r\n    }","title":"Spring security with Oauth2 or Http-Basic authentication for the same resource","body":"<p>And why not doing this the other way round? Just bypass resource server if there is no token attached, then fallback to normal security filter chain. This is by the way what resource server filter is stopping on.</p>\n\n<pre><code>@Configuration\n@EnableResourceServer\nclass ResourceServerConfig : ResourceServerConfigurerAdapter() {\n\n\n    @Throws(Exception::class)\n    override fun configure(resources: ResourceServerSecurityConfigurer) {\n        resources.resourceId(\"aaa\")\n    }\n\n    /**\n     * Resources exposed via oauth. As we are providing also local user interface they are also accessible from within.\n     */\n    @Throws(Exception::class)\n    override fun configure(http: HttpSecurity) {\n        http.requestMatcher(BearerAuthorizationHeaderMatcher())\n                .authorizeRequests()\n                .anyRequest()\n                .authenticated()\n    }\n\n    private class BearerAuthorizationHeaderMatcher : RequestMatcher {\n        override fun matches(request: HttpServletRequest): Boolean {\n            val auth = request.getHeader(\"Authorization\")\n            return auth != null &amp;&amp; auth.startsWith(\"Bearer\")\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13065197,"reputation":41,"user_id":9440829,"display_name":"tbl"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1597900727,"creation_date":1597900727,"answer_id":63498728,"question_id":23526644,"body_markdown":"If anyone is trying to get this working with Spring WebFlux, the method which determines whether the request is handled is called &quot;securityMatcher&quot;, rather than &quot;requestMatcher&quot;.\r\n\r\ni.e.\r\n\r\n    fun configureBasicAuth(http: ServerHttpSecurity): SecurityWebFilterChain {\r\n        return http\r\n            .securityMatcher(BasicAuthServerWebExchangeMatcher())\r\n            .authorizeExchange()\r\n            ...","title":"Spring security with Oauth2 or Http-Basic authentication for the same resource","body":"<p>If anyone is trying to get this working with Spring WebFlux, the method which determines whether the request is handled is called &quot;securityMatcher&quot;, rather than &quot;requestMatcher&quot;.</p>\n<p>i.e.</p>\n<pre><code>fun configureBasicAuth(http: ServerHttpSecurity): SecurityWebFilterChain {\n    return http\n        .securityMatcher(BasicAuthServerWebExchangeMatcher())\n        .authorizeExchange()\n        ...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7670388,"reputation":197,"user_id":5812830,"accept_rate":0,"display_name":"Aramis Rodr&#237;guez Blanco"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1666618138,"creation_date":1666618138,"answer_id":74181822,"question_id":23526644,"body_markdown":"In the latest version of Spring Boot the [WebSecurityConfigurerAdapter][1] class is deprecated.\r\n\r\nThe solution to have HTTP Basic authorization for some endpoints and Oauth2 authorization for other endpoints is setting the HTTP Basic configuration calls before Oauth2 configuration calls in the HttpSecurityFilterChain Bean calls.\r\nFor example:\r\n\r\n    \r\n\t\r\n\r\n    @Bean\r\n    \tpublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n    \t\thttp\r\n    \t\t\r\n    \t\t.authorizeRequests()\r\n    \t\t.antMatchers(&quot;/auth/basic/endpoints/**&quot;,&quot;/basic-auth/**&quot;).authenticated().and().httpBasic()\r\n    \t\t.and()\r\n    \t\t\r\n    \t\t.authorizeRequests()\r\n    \t\t.antMatchers(HttpMethod.POST,&quot;/auth/oauth2/test/**&quot;).hasAnyAuthority(&quot;SCOPE_somescope/test&quot;)\r\n    \t\t.antMatchers(HttpMethod.POST,&quot;/auth/oauth2/other/**&quot;).hasAnyAuthority(&quot;SCOPE_somescope/other&quot;)\r\n    \t\t.and()\r\n    \t\t\r\n    \t\t.oauth2ResourceServer().jwt().decoder(jwtDecoder())\r\n    \t\t.and()\r\n    \t\t\r\n    \t\t.accessDeniedHandler(accessDeniedHandler)\r\n    \t\t.and()\r\n    \t\t\r\n    \t\t.authorizeRequests()\r\n    \t\t.anyRequest().permitAll()\r\n    \t\t.and()\r\n    \t\t\r\n    \t\t.csrf().disable();\r\n    \t\t\r\n    \t\treturn http.build();\r\n    \t}\r\n\r\nWhere jwtDecoder() must be a bean defined in the configuration class as folows:\r\n\r\n    \t@Bean\r\n\tJwtDecoder jwtDecoder() {\r\n\t\treturn JwtDecoders.fromIssuerLocation(issuerUri);\r\n\t}\r\n\r\nAdditionally you should define a UserDetailsService bean in your configuration, for example, the simplest one for development porpuses is defining an InMemoryUserDetailsManager:\r\n\r\n    \t\r\n\r\n    @Bean\r\n    \tpublic UserDetailsService users() {\r\n    \t\t// The builder will ensure the passwords are encoded before saving in memory\r\n    \t\tUserDetails admin = User.builder()\r\n    \t\t\t\t.username(&quot;user-basic-auth&quot;)\r\n    \t\t\t\t.password(&quot;{bcrypt}&quot;+bcryptPassword)\r\n    \t\t\t\t.roles(&quot;USER&quot;, &quot;ADMIN&quot;)\r\n    \t\t\t\t.build();\r\n    \t\treturn new InMemoryUserDetailsManager(admin);\r\n        }\r\n\r\nwhere {bcrypt} is used to decode the password stored somewhere, for instance, in a database table.\r\nyou could also use {noop} in front of a password if it&#39;s in plain text (not recommended, except for testing and development purposes)\r\n\r\nAll these beans should be defined inside a class annotated as follows:\r\n\r\n    @Configuration\t\r\n    @EnableWebSecurity\r\n    public class WebSecurityConfig{\r\n    ...\r\n    }\r\n\r\nand dont forget to specify in your configuration file the JWT issuer URI for Oauth2 to work:\r\n\r\n    spring.security.oauth2.resourceserver.jwt.issuer-uri\r\n\r\n  [1]: https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter","title":"Spring security with Oauth2 or Http-Basic authentication for the same resource","body":"<p>In the latest version of Spring Boot the <a href=\"https://spring.io/blog/2022/02/21/spring-security-without-the-websecurityconfigureradapter\" rel=\"nofollow noreferrer\">WebSecurityConfigurerAdapter</a> class is deprecated.</p>\n<p>The solution to have HTTP Basic authorization for some endpoints and Oauth2 authorization for other endpoints is setting the HTTP Basic configuration calls before Oauth2 configuration calls in the HttpSecurityFilterChain Bean calls.\nFor example:</p>\n<pre><code>@Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http\n        \n        .authorizeRequests()\n        .antMatchers(&quot;/auth/basic/endpoints/**&quot;,&quot;/basic-auth/**&quot;).authenticated().and().httpBasic()\n        .and()\n        \n        .authorizeRequests()\n        .antMatchers(HttpMethod.POST,&quot;/auth/oauth2/test/**&quot;).hasAnyAuthority(&quot;SCOPE_somescope/test&quot;)\n        .antMatchers(HttpMethod.POST,&quot;/auth/oauth2/other/**&quot;).hasAnyAuthority(&quot;SCOPE_somescope/other&quot;)\n        .and()\n        \n        .oauth2ResourceServer().jwt().decoder(jwtDecoder())\n        .and()\n        \n        .accessDeniedHandler(accessDeniedHandler)\n        .and()\n        \n        .authorizeRequests()\n        .anyRequest().permitAll()\n        .and()\n        \n        .csrf().disable();\n        \n        return http.build();\n    }\n</code></pre>\n<p>Where jwtDecoder() must be a bean defined in the configuration class as folows:</p>\n<pre><code>    @Bean\nJwtDecoder jwtDecoder() {\n    return JwtDecoders.fromIssuerLocation(issuerUri);\n}\n</code></pre>\n<p>Additionally you should define a UserDetailsService bean in your configuration, for example, the simplest one for development porpuses is defining an InMemoryUserDetailsManager:</p>\n<pre><code>@Bean\n    public UserDetailsService users() {\n        // The builder will ensure the passwords are encoded before saving in memory\n        UserDetails admin = User.builder()\n                .username(&quot;user-basic-auth&quot;)\n                .password(&quot;{bcrypt}&quot;+bcryptPassword)\n                .roles(&quot;USER&quot;, &quot;ADMIN&quot;)\n                .build();\n        return new InMemoryUserDetailsManager(admin);\n    }\n</code></pre>\n<p>where {bcrypt} is used to decode the password stored somewhere, for instance, in a database table.\nyou could also use {noop} in front of a password if it's in plain text (not recommended, except for testing and development purposes)</p>\n<p>All these beans should be defined inside a class annotated as follows:</p>\n<pre><code>@Configuration  \n@EnableWebSecurity\npublic class WebSecurityConfig{\n...\n}\n</code></pre>\n<p>and dont forget to specify in your configuration file the JWT issuer URI for Oauth2 to work:</p>\n<pre><code>spring.security.oauth2.resourceserver.jwt.issuer-uri\n</code></pre>\n"}],"owner":{"account_id":4438395,"reputation":521,"user_id":3613594,"display_name":"user3613594"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42614,"favorite_count":0,"down_vote_count":0,"up_vote_count":52,"answer_count":9,"score":52,"last_activity_date":1666880458,"creation_date":1399490945,"question_id":23526644,"body_markdown":"I&#39;m attempting to implement an API with resources that are protected by either Oauth2 OR Http-Basic authentication.\r\n\r\nWhen I load the WebSecurityConfigurerAdapter which applies http-basic authentication to the resource first, Oauth2 token authentication is not accepted. And vice-versa.\r\n\r\n**Example configurations:**\r\nThis applies http-basic authentication to all /user/** resources\r\n\r\n    @Configuration\r\n    @EnableWebMvcSecurity\r\n    public class WebSecurityConfig extends WebSecurityConfigurerAdapter {\r\n    \r\n    \tprivate LoginApi loginApi;\r\n    \r\n    \t@Autowired\r\n    \tpublic void setLoginApi(LoginApi loginApi) {\r\n    \t\tthis.loginApi = loginApi;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tprotected void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n    \t\tauth.authenticationProvider(new PortalUserAuthenticationProvider(loginApi));\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tprotected void configure(HttpSecurity http) throws Exception {\r\n    \t\thttp\r\n    \t\t\t.authorizeRequests()\r\n    \t\t\t\t.antMatchers(&quot;/users/**&quot;).authenticated()\r\n    \t\t\t\t.and()\r\n    \t\t\t.httpBasic();\r\n    \t}\r\n    \r\n    \t@Override\r\n    \t@Bean\r\n    \tpublic AuthenticationManager authenticationManagerBean() throws Exception {\r\n    \t\treturn super.authenticationManagerBean();\r\n    \t}\r\n    }\r\n\r\nThis applies oauth token protection to the /user/** resource\r\n\r\n    @Configuration\r\n    @EnableResourceServer\r\n    protected static class ResourceServerConfiguration extends ResourceServerConfigurerAdapter {\r\n    \r\n    \t@Override\r\n    \tpublic void configure(HttpSecurity http) throws Exception {\r\n    \t\thttp\r\n    \t\t\t.requestMatchers().antMatchers(&quot;/users/**&quot;)\r\n    \t\t.and()\r\n    \t\t\t.authorizeRequests()\r\n    \t\t\t\t.antMatchers(&quot;/users/**&quot;).access(&quot;#oauth2.clientHasRole(&#39;ROLE_CLIENT&#39;) and #oauth2.hasScope(&#39;read&#39;)&quot;);\r\n    \t}\r\n    }\r\n\r\nI&#39;m sure there is some piece of magic code I&#39;m missing which tells spring to attempt both if the first has failed?\r\n\r\nAny assistance would be most appreciated.","title":"Spring security with Oauth2 or Http-Basic authentication for the same resource","body":"<p>I'm attempting to implement an API with resources that are protected by either Oauth2 OR Http-Basic authentication.</p>\n\n<p>When I load the WebSecurityConfigurerAdapter which applies http-basic authentication to the resource first, Oauth2 token authentication is not accepted. And vice-versa.</p>\n\n<p><strong>Example configurations:</strong>\nThis applies http-basic authentication to all /user/** resources</p>\n\n<pre><code>@Configuration\n@EnableWebMvcSecurity\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\n\n    private LoginApi loginApi;\n\n    @Autowired\n    public void setLoginApi(LoginApi loginApi) {\n        this.loginApi = loginApi;\n    }\n\n    @Override\n    protected void configure(AuthenticationManagerBuilder auth) throws Exception {\n        auth.authenticationProvider(new PortalUserAuthenticationProvider(loginApi));\n    }\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http\n            .authorizeRequests()\n                .antMatchers(\"/users/**\").authenticated()\n                .and()\n            .httpBasic();\n    }\n\n    @Override\n    @Bean\n    public AuthenticationManager authenticationManagerBean() throws Exception {\n        return super.authenticationManagerBean();\n    }\n}\n</code></pre>\n\n<p>This applies oauth token protection to the /user/** resource</p>\n\n<pre><code>@Configuration\n@EnableResourceServer\nprotected static class ResourceServerConfiguration extends ResourceServerConfigurerAdapter {\n\n    @Override\n    public void configure(HttpSecurity http) throws Exception {\n        http\n            .requestMatchers().antMatchers(\"/users/**\")\n        .and()\n            .authorizeRequests()\n                .antMatchers(\"/users/**\").access(\"#oauth2.clientHasRole('ROLE_CLIENT') and #oauth2.hasScope('read')\");\n    }\n}\n</code></pre>\n\n<p>I'm sure there is some piece of magic code I'm missing which tells spring to attempt both if the first has failed?</p>\n\n<p>Any assistance would be most appreciated.</p>\n"},{"tags":["java","mysql","amazon-web-services","intellij-idea","jdbc"],"comments":[{"owner":{"account_id":17693330,"reputation":3781,"user_id":12844632,"display_name":"Egor Klepikov"},"score":0,"creation_date":1666862112,"post_id":74219233,"comment_id":131037464,"body_markdown":"Please check if the problem reproduces in the latest build from https://www.jetbrains.com/idea/nextversion","body":"Please check if the problem reproduces in the latest build from <a href=\"https://www.jetbrains.com/idea/nextversion\" rel=\"nofollow noreferrer\">jetbrains.com/idea/nextversion</a>"},{"owner":{"account_id":25628346,"reputation":13,"user_id":19399096,"display_name":"Lariz14"},"score":0,"creation_date":1666862828,"post_id":74219233,"comment_id":131037719,"body_markdown":"Thanks for the reply - I can confirm I&#39;m running the most recent version of Intellij ultimate.","body":"Thanks for the reply - I can confirm I&#39;m running the most recent version of Intellij ultimate."}],"answers":[{"tags":[],"owner":{"account_id":25628346,"reputation":13,"user_id":19399096,"display_name":"Lariz14"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1666880396,"creation_date":1666880396,"answer_id":74223634,"question_id":74219233,"body_markdown":"I rebuilt both mySQL and AWS in the exact same way and it&#39;s now working.\r\nUnsure as to what or why, but there&#39;s quite literally no amendments in settings, or code for that matter.","title":"Failed to retrieve JMX service url when attempting AWS/mySQL DB connection via intellij","body":"<p>I rebuilt both mySQL and AWS in the exact same way and it's now working.\nUnsure as to what or why, but there's quite literally no amendments in settings, or code for that matter.</p>\n"}],"owner":{"account_id":25628346,"reputation":13,"user_id":19399096,"display_name":"Lariz14"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":174,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74223634,"answer_count":1,"score":0,"last_activity_date":1666880396,"creation_date":1666860606,"question_id":74219233,"body_markdown":"I&#39;ve made the leap towards learning AWS and unfortunately have hit an impass, it would seem.\r\nWhen attempting to launch my application, I&#39;m receiving a notification of \r\n&quot;Failed to retrieive application JMX service URL&quot;.\r\n\r\nThe peculiar thing about this is, my connection is successfully authenticated via AWS and Workbench, however when launching the application it&#39;s seemingly attempting to connect with a different usernam specified in appliation.properties or anywhere else for that matter.\r\n\r\nAlthough not good practice, I&#39;ve been attempting to connect via my admin account through AWS which is further mirrored within workbench, however the error returned is specifying my IRL name which isn&#39;t specified anywhere other than the &quot;Remote Management&quot; panel in DB connections within workbench.\r\nThis being SSH connectivity url, which is specified never to be used.\r\nI&#39;m unsure whether or not this is where it&#39;s being read from, although certain it&#39;s the only place being referenced.\r\nI&#39;ve made an attempt at disabling this, which it currently is - Still reads the same name.\r\nI&#39;ve made attempts at creating and granting authorities to a user of this username within my DB and still no avail. \r\n\r\n```\r\njava.sql.SQLException: Access denied for user &#39;removed for safety&#39; (using password: YES)\r\n```\r\n\r\nThe above is the error returned, which again specifies a username not declared anywhere for use (other than SSH remote management which is unused) and an IP address which is unrecognised.\r\n\r\nFollowing creation of a new user within both AWS and mySQL DB the error message changes to the following:\r\n\r\n```\r\njava.sql.SQLException: null,  message from server: &quot;Host&#39; is not allowed to connect to this MySQL server&quot;\r\n```\r\n\r\nAny help would be greatly appreciated as I&#39;ve now tried everything within my currently limited knowledge base. \r\n\r\nAttempted configuring user within AWS and mySQL matching credentials attempting access - Hoping authorisation would be granted, although simply changed the error message.\r\nConducted research, although not coming across anything related to AWS/mySQL connectivity related, or varying issues. ","title":"Failed to retrieve JMX service url when attempting AWS/mySQL DB connection via intellij","body":"<p>I've made the leap towards learning AWS and unfortunately have hit an impass, it would seem.\nWhen attempting to launch my application, I'm receiving a notification of\n&quot;Failed to retrieive application JMX service URL&quot;.</p>\n<p>The peculiar thing about this is, my connection is successfully authenticated via AWS and Workbench, however when launching the application it's seemingly attempting to connect with a different usernam specified in appliation.properties or anywhere else for that matter.</p>\n<p>Although not good practice, I've been attempting to connect via my admin account through AWS which is further mirrored within workbench, however the error returned is specifying my IRL name which isn't specified anywhere other than the &quot;Remote Management&quot; panel in DB connections within workbench.\nThis being SSH connectivity url, which is specified never to be used.\nI'm unsure whether or not this is where it's being read from, although certain it's the only place being referenced.\nI've made an attempt at disabling this, which it currently is - Still reads the same name.\nI've made attempts at creating and granting authorities to a user of this username within my DB and still no avail.</p>\n<pre><code>java.sql.SQLException: Access denied for user 'removed for safety' (using password: YES)\n</code></pre>\n<p>The above is the error returned, which again specifies a username not declared anywhere for use (other than SSH remote management which is unused) and an IP address which is unrecognised.</p>\n<p>Following creation of a new user within both AWS and mySQL DB the error message changes to the following:</p>\n<pre><code>java.sql.SQLException: null,  message from server: &quot;Host' is not allowed to connect to this MySQL server&quot;\n</code></pre>\n<p>Any help would be greatly appreciated as I've now tried everything within my currently limited knowledge base.</p>\n<p>Attempted configuring user within AWS and mySQL matching credentials attempting access - Hoping authorisation would be granted, although simply changed the error message.\nConducted research, although not coming across anything related to AWS/mySQL connectivity related, or varying issues.</p>\n"},{"tags":["java","tomcat","jdbc"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1666880203,"post_id":74223350,"comment_id":131043973,"body_markdown":"IIRC, the problem has to do with the DLL getting loaded from two classloaders. Possibly, putting the driver itself in the Tomcat `lib` folder (and removing it from the WAR) might be sufficient. Possibly you may even have to define the data source(s) in the server.xml, and look up the data source through JNDI in the individual WARs, instead of configuring this per WAR.","body":"IIRC, the problem has to do with the DLL getting loaded from two classloaders. Possibly, putting the driver itself in the Tomcat <code>lib</code> folder (and removing it from the WAR) might be sufficient. Possibly you may even have to define the data source(s) in the server.xml, and look up the data source through JNDI in the individual WARs, instead of configuring this per WAR."},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":1,"creation_date":1666883731,"post_id":74223350,"comment_id":131045337,"body_markdown":"I don&#39;t see any reason why you can&#39;t use an all-Java solution for this problem.  No good reason for a DLL.  Give each WAR its own type IV JDBC driver and a connection pool with auth parameters.  Better be very thoughtful about isolation and transactions.","body":"I don&#39;t see any reason why you can&#39;t use an all-Java solution for this problem.  No good reason for a DLL.  Give each WAR its own type IV JDBC driver and a connection pool with auth parameters.  Better be very thoughtful about isolation and transactions."},{"owner":{"account_id":26536132,"reputation":1,"user_id":20167636,"display_name":"arnaud92"},"score":0,"creation_date":1666969483,"post_id":74223350,"comment_id":131067113,"body_markdown":"I have put the dll in the bin folder of Tomcat but it doesnt change anything. SQL access are not shared between multiple wars","body":"I have put the dll in the bin folder of Tomcat but it doesnt change anything. SQL access are not shared between multiple wars"}],"owner":{"account_id":26536132,"reputation":1,"user_id":20167636,"display_name":"arnaud92"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1666880277,"answer_count":0,"score":0,"last_activity_date":1666880355,"creation_date":1666879231,"question_id":74223350,"body_markdown":"I have two Java applications on a server run by Tomcat 8.5 with two WAR files. These two Java applications must connect to a database. I use the file sqljdbc_auth.dll so that it can connect automatically with JDBC.\r\n\r\nPutting the command `-Djava.library.path=C:\\JDBC` in Tomcat Java option, but the database access doesn&#39;t work with the two WARs at the same time and I don&#39;t know why.\r\n\r\nAny solution to solve the problem and make my two WARs able to connect to db at the same time? I tried to deactivate one of the WARs so that db access works for the other WAR.","title":"How to share database access between multiple Java wars?","body":"<p>I have two Java applications on a server run by Tomcat 8.5 with two WAR files. These two Java applications must connect to a database. I use the file sqljdbc_auth.dll so that it can connect automatically with JDBC.</p>\n<p>Putting the command <code>-Djava.library.path=C:\\JDBC</code> in Tomcat Java option, but the database access doesn't work with the two WARs at the same time and I don't know why.</p>\n<p>Any solution to solve the problem and make my two WARs able to connect to db at the same time? I tried to deactivate one of the WARs so that db access works for the other WAR.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1475713858,"post_id":39885679,"comment_id":67058040,"body_markdown":"Looks pretty straightforward, except for the fact that you&#39;re swallowing the `InterruptedException`. There&#39;s a library for these kind of tasks called [retrier](https://github.com/alexo/retrier), but I can&#39;t say I&#39;ve used it.","body":"Looks pretty straightforward, except for the fact that you&#39;re swallowing the <code>InterruptedException</code>. There&#39;s a library for these kind of tasks called <a href=\"https://github.com/alexo/retrier\" rel=\"nofollow noreferrer\">retrier</a>, but I can&#39;t say I&#39;ve used it."}],"answers":[{"tags":[],"owner":{"account_id":3793185,"reputation":300,"user_id":3149142,"display_name":"Tomasz R"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1475713774,"creation_date":1475713774,"answer_id":39885696,"question_id":39885679,"body_markdown":"I do not see anything wrong with using try .. catch.\r\n\r\nThis is in harmony with the basic philosophy that an exception is not an error - it is just a situation that happens, a way of handling the control flow.\r\n\r\nSo - I like your solution. I would not change that.","title":"Best method to retry with delay in Java","body":"<p>I do not see anything wrong with using try .. catch.</p>\n\n<p>This is in harmony with the basic philosophy that an exception is not an error - it is just a situation that happens, a way of handling the control flow.</p>\n\n<p>So - I like your solution. I would not change that.</p>\n"},{"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":1,"creation_date":1475714457,"post_id":39885726,"comment_id":67058187,"body_markdown":"There&#39;s also Guava&#39;s `Uninterruptibles.sleepUninterruptibly()`.","body":"There&#39;s also Guava&#39;s <code>Uninterruptibles.sleepUninterruptibly()</code>."}],"tags":[],"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1475714000,"creation_date":1475714000,"answer_id":39885726,"question_id":39885679,"body_markdown":"At the end of the day you can not get around the fact that in needs to catch the Exception\r\n\r\nWhat you can do though is *hide* it by putting in in your own method\r\n\r\n    public static void mySleep (int val) {\r\n\t\ttry { \r\n            TimeUnit.SECONDS.sleep(val);\r\n        } catch (InterruptedException e) {\r\n            log.error(&quot;Thread interrupted&quot;);\r\n        }\r\n\t}\r\n\r\nSo you `main` function becomes cleaner as\r\n\r\n    while (value.equals(&quot;&quot;) &amp;&amp; tries &lt; 3){\r\n        mySleep (1);\r\n        value = getValue(input);\r\n        tries += 1;\r\n    }","title":"Best method to retry with delay in Java","body":"<p>At the end of the day you can not get around the fact that in needs to catch the Exception</p>\n\n<p>What you can do though is <em>hide</em> it by putting in in your own method</p>\n\n<pre><code>public static void mySleep (int val) {\n    try { \n        TimeUnit.SECONDS.sleep(val);\n    } catch (InterruptedException e) {\n        log.error(\"Thread interrupted\");\n    }\n}\n</code></pre>\n\n<p>So you <code>main</code> function becomes cleaner as</p>\n\n<pre><code>while (value.equals(\"\") &amp;&amp; tries &lt; 3){\n    mySleep (1);\n    value = getValue(input);\n    tries += 1;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":187570,"reputation":4917,"user_id":425722,"accept_rate":83,"display_name":"Andrew Rueckert"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1475714215,"creation_date":1475714215,"answer_id":39885744,"question_id":39885679,"body_markdown":"Your example works, and basically any solution is going to have that _general_ form at its center. If you don&#39;t like the verbosity of writing your own retry, check out [Failsafe][1] and [Guava-Retrying][2], which are libraries to accomplish the same basic thing.\r\n\r\n[1]:https://github.com/jhalterman/failsafe\r\n[2]:https://github.com/rholder/guava-retrying","title":"Best method to retry with delay in Java","body":"<p>Your example works, and basically any solution is going to have that <em>general</em> form at its center. If you don't like the verbosity of writing your own retry, check out <a href=\"https://github.com/jhalterman/failsafe\" rel=\"nofollow\">Failsafe</a> and <a href=\"https://github.com/rholder/guava-retrying\" rel=\"nofollow\">Guava-Retrying</a>, which are libraries to accomplish the same basic thing.</p>\n"},{"tags":[],"owner":{"account_id":246243,"reputation":9164,"user_id":520275,"accept_rate":83,"display_name":"Gonzalo Matheu"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1475715672,"creation_date":1475715672,"answer_id":39885913,"question_id":39885679,"body_markdown":"[Fixed Poll Interval][1] feature of [awaitility][2] might help:\r\n\r\n    Awaitility.with()\r\n      .pollInterval(1, SECONDS)\r\n      .atMost(3, SECONDS)\r\n      .await()\r\n      .until(() -&gt; (&quot;&quot; != getValue(input)));\r\n\r\nIt offers a fluent interface for synchronizing asynchronous operations.\r\n\r\n  [1]: https://github.com/awaitility/awaitility/wiki/Usage#fixed-poll-interval\r\n  [2]: https://github.com/awaitility/awaitility","title":"Best method to retry with delay in Java","body":"<p><a href=\"https://github.com/awaitility/awaitility/wiki/Usage#fixed-poll-interval\" rel=\"noreferrer\">Fixed Poll Interval</a> feature of <a href=\"https://github.com/awaitility/awaitility\" rel=\"noreferrer\">awaitility</a> might help:</p>\n\n<pre><code>Awaitility.with()\n  .pollInterval(1, SECONDS)\n  .atMost(3, SECONDS)\n  .await()\n  .until(() -&gt; (\"\" != getValue(input)));\n</code></pre>\n\n<p>It offers a fluent interface for synchronizing asynchronous operations.</p>\n"},{"tags":[],"owner":{"account_id":87230,"reputation":36826,"user_id":242042,"accept_rate":57,"display_name":"Archimedes Trajano"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1604267624,"creation_date":1604267624,"answer_id":64637381,"question_id":39885679,"body_markdown":"Here&#39;s an example with Thread.sleep and catching interrupted exception.  The main issue is it will block the thread until it finishes.  To avoid this you&#39;d need some application server level support to allow it [undertow for example](https://www.stubbornjava.com/posts/creating-a-non-blocking-delay-in-the-undertow-web-server-for-artificial-latency)\r\n\r\n```java\r\n    private void sendWithRetry(final InternetAddress[] toAddresses, final Transport transport, final MimeMessage msg) throws MessagingException {\r\n\r\n        boolean guard = false;\r\n        for (int retry = 0; !guard &amp;&amp; retry &lt; SMTP_RETRY_LIMIT - 1; ++retry) {\r\n            try (final Transport trans = transport) {\r\n                trans.connect();\r\n\r\n                // Actually send the message\r\n                trans.sendMessage(msg, toAddresses);\r\n\r\n                // Close the connection\r\n                guard = true;\r\n            } catch (final MessagingException me) {\r\n                log.warn(&quot;Retry {}&quot;, retry, me);\r\n                try {\r\n                    Thread.sleep(SMTP_RETRY_DELAY_IN_MS);\r\n                } catch (InterruptedException ie) {\r\n                    Thread.currentThread().interrupt();\r\n                    log.warn(&quot;Interrupt exception received so interrupting thread and breaking out of retry loop&quot;);\r\n                    guard = true;\r\n                }\r\n            }\r\n        }\r\n        if (!guard) {\r\n            try (final Transport trans = transport) {\r\n                trans.connect();\r\n\r\n                // Actually send the message\r\n                trans.sendMessage(msg, toAddresses);\r\n            }\r\n        }\r\n    }\r\n```","title":"Best method to retry with delay in Java","body":"<p>Here's an example with Thread.sleep and catching interrupted exception.  The main issue is it will block the thread until it finishes.  To avoid this you'd need some application server level support to allow it <a href=\"https://www.stubbornjava.com/posts/creating-a-non-blocking-delay-in-the-undertow-web-server-for-artificial-latency\" rel=\"nofollow noreferrer\">undertow for example</a></p>\n<pre class=\"lang-java prettyprint-override\"><code>    private void sendWithRetry(final InternetAddress[] toAddresses, final Transport transport, final MimeMessage msg) throws MessagingException {\n\n        boolean guard = false;\n        for (int retry = 0; !guard &amp;&amp; retry &lt; SMTP_RETRY_LIMIT - 1; ++retry) {\n            try (final Transport trans = transport) {\n                trans.connect();\n\n                // Actually send the message\n                trans.sendMessage(msg, toAddresses);\n\n                // Close the connection\n                guard = true;\n            } catch (final MessagingException me) {\n                log.warn(&quot;Retry {}&quot;, retry, me);\n                try {\n                    Thread.sleep(SMTP_RETRY_DELAY_IN_MS);\n                } catch (InterruptedException ie) {\n                    Thread.currentThread().interrupt();\n                    log.warn(&quot;Interrupt exception received so interrupting thread and breaking out of retry loop&quot;);\n                    guard = true;\n                }\n            }\n        }\n        if (!guard) {\n            try (final Transport trans = transport) {\n                trans.connect();\n\n                // Actually send the message\n                trans.sendMessage(msg, toAddresses);\n            }\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6146602,"reputation":688,"user_id":4793190,"display_name":"Matt"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666879909,"creation_date":1666309902,"answer_id":74147396,"question_id":39885679,"body_markdown":"[ScheduledExecutorService][1] (added in Java 7) is a good way to implement retries with a delay.\r\n\r\n```\r\n class RetryThreeTimesExample {\r\n   private final ScheduledExecutorService scheduler = Executors.newSingleThreadExecutor();\r\n   private ScheduledFuture&lt;?&gt; getValueHandle;\r\n\r\n   public void retryForUpToThreeSeconds() {\r\n     final Runnable getValue = new Runnable() {\r\n       public void run() {\r\n           String value = getValue();\r\n           if (!value.equals(&quot;&quot;)) getValueHandle.cancel(false);\r\n       }\r\n     };\r\n     getValueHandle = scheduler.scheduleAtFixedRate(getValue, 1, 1, SECONDS);\r\n     scheduler.schedule(new Runnable() {\r\n       public void run() { getValueHandle.cancel(false); }\r\n     }, 3, SECONDS);\r\n   }\r\n }\r\n```\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html","title":"Best method to retry with delay in Java","body":"<p><a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html\" rel=\"nofollow noreferrer\">ScheduledExecutorService</a> (added in Java 7) is a good way to implement retries with a delay.</p>\n<pre><code> class RetryThreeTimesExample {\n   private final ScheduledExecutorService scheduler = Executors.newSingleThreadExecutor();\n   private ScheduledFuture&lt;?&gt; getValueHandle;\n\n   public void retryForUpToThreeSeconds() {\n     final Runnable getValue = new Runnable() {\n       public void run() {\n           String value = getValue();\n           if (!value.equals(&quot;&quot;)) getValueHandle.cancel(false);\n       }\n     };\n     getValueHandle = scheduler.scheduleAtFixedRate(getValue, 1, 1, SECONDS);\n     scheduler.schedule(new Runnable() {\n       public void run() { getValueHandle.cancel(false); }\n     }, 3, SECONDS);\n   }\n }\n</code></pre>\n"}],"owner":{"account_id":6993304,"reputation":6347,"user_id":5361741,"accept_rate":75,"display_name":"annedroiid"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26733,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":39885726,"answer_count":6,"score":9,"last_activity_date":1666879909,"creation_date":1475713625,"question_id":39885679,"body_markdown":"In my program I call a method that can either return a value or &quot;&quot;, and basically I want it to retry looking up the value 3 times with a delay of 1 second inbetween each try until it gets a value or the tries are finished.\r\n\r\n\r\nThis is what I currently have but I feel like this solution is pretty gross, particularly having to put the try/catch around the sleep. Does anyone know of a better way to retry with a delay?\r\n\r\n    public void method(String input){\r\n        String value = getValue(input);\r\n\r\n        int tries = 0\r\n        while (value.equals(&quot;&quot;) &amp;&amp; tries &lt; 3){\r\n            try { \r\n                TimeUnit.SECONDS.sleep(1);\r\n            } catch (InterruptedException e) {\r\n                log.error(&quot;Thread interrupted&quot;);\r\n            }\r\n            value = getValue(input);\r\n            tries += 1;\r\n        }\r\n\r\n        return value;\r\n    }","title":"Best method to retry with delay in Java","body":"<p>In my program I call a method that can either return a value or \"\", and basically I want it to retry looking up the value 3 times with a delay of 1 second inbetween each try until it gets a value or the tries are finished.</p>\n\n<p>This is what I currently have but I feel like this solution is pretty gross, particularly having to put the try/catch around the sleep. Does anyone know of a better way to retry with a delay?</p>\n\n<pre><code>public void method(String input){\n    String value = getValue(input);\n\n    int tries = 0\n    while (value.equals(\"\") &amp;&amp; tries &lt; 3){\n        try { \n            TimeUnit.SECONDS.sleep(1);\n        } catch (InterruptedException e) {\n            log.error(\"Thread interrupted\");\n        }\n        value = getValue(input);\n        tries += 1;\n    }\n\n    return value;\n}\n</code></pre>\n"},{"tags":["java","gradle","build.gradle"],"owner":{"account_id":13711911,"reputation":21,"user_id":9894058,"display_name":"Penchala Yegu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":193,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1666879706,"creation_date":1666055539,"question_id":74104687,"body_markdown":"Once Gradle has downloaded the dependencies I&#39;m trying to iterate over each jar file, extract a specific file, swagger yml, into a folder. However, when I execute the task it returns NO-SOURCE. \r\n\r\nThe task to extract the file into a folder:\r\n```\r\ntask unzip(type: Copy) {\r\n    configurations.artifact.asFileTree.each {\r\n        from zipTree(it).matching { include &quot;OpenApi-*.yml&quot; }\r\n        into &#39;swaggerExtract/&#39;\r\n    }\r\n}\r\n```\r\n\r\nbuild.gradle\r\n\r\n```\r\nrepositories {\r\n    mavenLocal()\r\n}\r\nconfigurations {\r\n    artifact\r\n}\r\n\r\ndependencies {\r\n    artifact &#39;com.example.android:accounts-service:0.0.2-SNAPSHOT&#39;\r\n    artifact &#39;com.example.android:my-service:0.0.4.RELEASE&#39;\r\n}\r\n\r\napply plugin: &#39;java&#39;\r\n```","title":"Gradle, iterating over the downloaded dependency Jar&#39;s and extract a specific file using Gradle Task","body":"<p>Once Gradle has downloaded the dependencies I'm trying to iterate over each jar file, extract a specific file, swagger yml, into a folder. However, when I execute the task it returns NO-SOURCE.</p>\n<p>The task to extract the file into a folder:</p>\n<pre><code>task unzip(type: Copy) {\n    configurations.artifact.asFileTree.each {\n        from zipTree(it).matching { include &quot;OpenApi-*.yml&quot; }\n        into 'swaggerExtract/'\n    }\n}\n</code></pre>\n<p>build.gradle</p>\n<pre><code>repositories {\n    mavenLocal()\n}\nconfigurations {\n    artifact\n}\n\ndependencies {\n    artifact 'com.example.android:accounts-service:0.0.2-SNAPSHOT'\n    artifact 'com.example.android:my-service:0.0.4.RELEASE'\n}\n\napply plugin: 'java'\n</code></pre>\n"},{"tags":["java","collections","hashmap"],"answers":[{"comments":[{"owner":{"account_id":4938,"reputation":69433,"user_id":7671,"accept_rate":70,"display_name":"Alex Miller"},"score":0,"creation_date":1258322513,"post_id":1738968,"comment_id":1619540,"body_markdown":"In particular on the second, the value would only be overwritten if a) the hashCode() is the same and b) the equals() evaluates to true.","body":"In particular on the second, the value would only be overwritten if a) the hashCode() is the same and b) the equals() evaluates to true."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1258330402,"post_id":1738968,"comment_id":1620092,"body_markdown":"Aside: it is worth pointing out that the behaviour described by @Alex does NOT apply in the case of `IdentityHashmap`.  There, the &quot;identity hashcode&quot; and `==` are used for the key, irrespective of how `hashcode` and `equals` have been overridden.","body":"Aside: it is worth pointing out that the behaviour described by @Alex does NOT apply in the case of <code>IdentityHashmap</code>.  There, the &quot;identity hashcode&quot; and <code>==</code> are used for the key, irrespective of how <code>hashcode</code> and <code>equals</code> have been overridden."}],"tags":[],"owner":{"account_id":44712,"reputation":99796,"user_id":131368,"accept_rate":78,"display_name":"ChssPly76"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1258321699,"creation_date":1258321699,"answer_id":1738968,"question_id":1738963,"body_markdown":"Firstly, take a look at &lt;a href=&quot;http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/collect/Multimap.html&quot;&gt;Google Collections Multimap&lt;/a&gt; which would let you assign multiple values per key without having to manually maintain list of values.\r\n\r\nSecondly, no - keys that have the same hashcode will not collide. Hash codes are not guaranteed or required to be unique; HashMap maintains a &quot;bucket&quot; of key/value pairs for each hash code internally.","title":"Is HashMap in Java collision safe","body":"<p>Firstly, take a look at <a href=\"http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/collect/Multimap.html\" rel=\"noreferrer\">Google Collections Multimap</a> which would let you assign multiple values per key without having to manually maintain list of values.</p>\n\n<p>Secondly, no - keys that have the same hashcode will not collide. Hash codes are not guaranteed or required to be unique; HashMap maintains a \"bucket\" of key/value pairs for each hash code internally.</p>\n"},{"tags":[],"owner":{"account_id":62440,"reputation":23185,"user_id":185541,"display_name":"rsp"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1258321709,"creation_date":1258321709,"answer_id":1738970,"question_id":1738963,"body_markdown":"If the hash of the key in the map collides with an existing key, the Map will re-arrange or keep the keys in a list under that hash. No keys will get overwritten by other keys that happen so be sorted in the same bucket.\r\n\r\nIf multiple threads are using the map concurrently, you might want to synchronize access to the map if it does not handle concurrent access. (Some standard Maps do, other don&#39;t. The Java Collections package does contain wrapper classes that add synchronisation.)","title":"Is HashMap in Java collision safe","body":"<p>If the hash of the key in the map collides with an existing key, the Map will re-arrange or keep the keys in a list under that hash. No keys will get overwritten by other keys that happen so be sorted in the same bucket.</p>\n\n<p>If multiple threads are using the map concurrently, you might want to synchronize access to the map if it does not handle concurrent access. (Some standard Maps do, other don't. The Java Collections package does contain wrapper classes that add synchronisation.)</p>\n"},{"tags":[],"owner":{"account_id":62096,"reputation":8688,"user_id":184686,"accept_rate":100,"display_name":"Anthony Mills"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1258321811,"creation_date":1258321811,"answer_id":1738975,"question_id":1738963,"body_markdown":"It will only overwrite the previous key&#39;s value if it is equal to the previous key. There are methods like linear probing, rehashing, buckets, etc., which are used in hash implementations to prevent hashcode collisions from overwriting unequal keys.","title":"Is HashMap in Java collision safe","body":"<p>It will only overwrite the previous key's value if it is equal to the previous key. There are methods like linear probing, rehashing, buckets, etc., which are used in hash implementations to prevent hashcode collisions from overwriting unequal keys.</p>\n"},{"tags":[],"owner":{"account_id":72519,"reputation":7464,"user_id":209359,"display_name":"Chip Uni"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1258323246,"creation_date":1258323246,"answer_id":1739048,"question_id":1738963,"body_markdown":"HashMap is collision-safe: look at &lt;a href=&quot;http://www.docjar.com/html/api/java/util/HashMap.java.html&quot;&gt;the sourcecode&lt;/a&gt; for put:\r\n\r\n         /**\r\n          * Associates the specified value with the specified key in this map.\r\n          * If the map previously contained a mapping for the key, the old\r\n          * value is replaced.\r\n          *\r\n          * @param key key with which the specified value is to be associated\r\n          * @param value value to be associated with the specified key\r\n          * @return the previous value associated with &lt;tt&gt;key&lt;/tt&gt;, or\r\n          *         &lt;tt&gt;null&lt;/tt&gt; if there was no mapping for &lt;tt&gt;key&lt;/tt&gt;.\r\n          *         (A &lt;tt&gt;null&lt;/tt&gt; return can also indicate that \r\n          *         previously associated &lt;tt&gt;null&lt;/tt&gt; with &lt;tt&gt;key&lt;/tt&gt;.)\r\n          */\r\n         public V put(K key, V value) {\r\n             if (key == null)\r\n                 return putForNullKey(value);\r\n             int hash = hash(key.hashCode());\r\n             int i = indexFor(hash, table.length);\r\n             for (Entry&lt;K,V&gt; e = table[i]; e != null; e = e.next) {\r\n                 Object k;\r\n                 if (e.hash == hash &amp;&amp; ((k = e.key) == key || key.equals(k))) {\r\n                     V oldValue = e.value;\r\n                     e.value = value;\r\n                     e.recordAccess(this);\r\n                     return oldValue;\r\n                 }\r\n             }\r\n     \r\n             modCount++;\r\n             addEntry(hash, key, value, i);\r\n             return null;\r\n         }\r\n\r\nand\r\n\r\n         /**\r\n          * Adds a new entry with the specified key, value and hash code to\r\n          * the specified bucket.  It is the responsibility of this\r\n          * method to resize the table if appropriate.\r\n          *\r\n          * Subclass overrides this to alter the behavior of put method.\r\n          */\r\n         void addEntry(int hash, K key, V value, int bucketIndex) {\r\n             Entry&lt;K,V&gt; e = table[bucketIndex];\r\n             table[bucketIndex] = new Entry&lt;K,V&gt;(hash, key, value, e);\r\n             if (size++ &gt;= threshold)\r\n                 resize(2 * table.length);\r\n         }\r\n\r\n\r\nThe entries of the table act like a linked list.  When you put a new entry into the same bucket, it just adds to the linked list.","title":"Is HashMap in Java collision safe","body":"<p>HashMap is collision-safe: look at <a href=\"http://www.docjar.com/html/api/java/util/HashMap.java.html\" rel=\"nofollow noreferrer\">the sourcecode</a> for put:</p>\n\n<pre><code>     /**\n      * Associates the specified value with the specified key in this map.\n      * If the map previously contained a mapping for the key, the old\n      * value is replaced.\n      *\n      * @param key key with which the specified value is to be associated\n      * @param value value to be associated with the specified key\n      * @return the previous value associated with &lt;tt&gt;key&lt;/tt&gt;, or\n      *         &lt;tt&gt;null&lt;/tt&gt; if there was no mapping for &lt;tt&gt;key&lt;/tt&gt;.\n      *         (A &lt;tt&gt;null&lt;/tt&gt; return can also indicate that \n      *         previously associated &lt;tt&gt;null&lt;/tt&gt; with &lt;tt&gt;key&lt;/tt&gt;.)\n      */\n     public V put(K key, V value) {\n         if (key == null)\n             return putForNullKey(value);\n         int hash = hash(key.hashCode());\n         int i = indexFor(hash, table.length);\n         for (Entry&lt;K,V&gt; e = table[i]; e != null; e = e.next) {\n             Object k;\n             if (e.hash == hash &amp;&amp; ((k = e.key) == key || key.equals(k))) {\n                 V oldValue = e.value;\n                 e.value = value;\n                 e.recordAccess(this);\n                 return oldValue;\n             }\n         }\n\n         modCount++;\n         addEntry(hash, key, value, i);\n         return null;\n     }\n</code></pre>\n\n<p>and</p>\n\n<pre><code>     /**\n      * Adds a new entry with the specified key, value and hash code to\n      * the specified bucket.  It is the responsibility of this\n      * method to resize the table if appropriate.\n      *\n      * Subclass overrides this to alter the behavior of put method.\n      */\n     void addEntry(int hash, K key, V value, int bucketIndex) {\n         Entry&lt;K,V&gt; e = table[bucketIndex];\n         table[bucketIndex] = new Entry&lt;K,V&gt;(hash, key, value, e);\n         if (size++ &gt;= threshold)\n             resize(2 * table.length);\n     }\n</code></pre>\n\n<p>The entries of the table act like a linked list.  When you put a new entry into the same bucket, it just adds to the linked list.</p>\n"},{"tags":[],"owner":{"account_id":458337,"reputation":179,"user_id":858168,"accept_rate":100,"display_name":"kodjeff1"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1360179109,"creation_date":1360179109,"answer_id":14737231,"question_id":1738963,"body_markdown":"I would contribute that a collision is not the same as inserting an identical key. Collisions occur when separate keys hash to the same value. It is understood that anyone who implements the Map interface should be equipped to handle collisions. Thus, the answer to your question is that yes, HashMap in Java does safely handle collisions.\r\n\r\nHowever, if an identical key is inserted, then the previous Value associated with *that exact same key* will be updated/overwritten. This is not considered a collision per se, but a direct clobbering of what is already there.","title":"Is HashMap in Java collision safe","body":"<p>I would contribute that a collision is not the same as inserting an identical key. Collisions occur when separate keys hash to the same value. It is understood that anyone who implements the Map interface should be equipped to handle collisions. Thus, the answer to your question is that yes, HashMap in Java does safely handle collisions.</p>\n\n<p>However, if an identical key is inserted, then the previous Value associated with <em>that exact same key</em> will be updated/overwritten. This is not considered a collision per se, but a direct clobbering of what is already there.</p>\n"}],"owner":{"account_id":61301,"reputation":2123,"user_id":182766,"accept_rate":72,"display_name":"changed"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11004,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":1738970,"answer_count":5,"score":2,"last_activity_date":1666879465,"creation_date":1258321582,"question_id":1738963,"body_markdown":"I am developing a parser that needs to put key value pairs in hashmap. A key can have multiple values which I can do in this way `HashMap&lt;String,ArrayList&lt;String&gt;&gt;` .\r\n\r\nWhat happens if the number of keys are very large and they start matching with other key&#39;s hashcode? Will that rewrite previous key&#39;s value?\r\n\r\n","title":"Is HashMap in Java collision safe","body":"<p>I am developing a parser that needs to put key value pairs in hashmap. A key can have multiple values which I can do in this way <code>HashMap&lt;String,ArrayList&lt;String&gt;&gt;</code> .</p>\n<p>What happens if the number of keys are very large and they start matching with other key's hashcode? Will that rewrite previous key's value?</p>\n"},{"tags":["java","protocol-buffers"],"comments":[{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1666883734,"post_id":74223272,"comment_id":131045341,"body_markdown":"Note that your question would be clearer if you showed us the proto and explained what `descriptor` is.","body":"Note that your question would be clearer if you showed us the proto and explained what <code>descriptor</code> is."}],"answers":[{"tags":[],"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1666879439,"creation_date":1666879439,"answer_id":74223405,"question_id":74223272,"body_markdown":"I suspect you want `message.getOneofFieldDescriptor(containingOneof)`. From the [docs](https://developers.google.com/protocol-buffers/docs/reference/java/com/google/protobuf/MessageOrBuilder.html#getOneofFieldDescriptor-com.google.protobuf.Descriptors.OneofDescriptor-):\r\n\r\n&gt; Obtains the FieldDescriptor if the given oneof is set. Returns null if no field is set.\r\n\r\nNote that your `isInitialized()` call is just checking whether the [`OneofOptions`](https://developers.google.com/protocol-buffers/docs/reference/java/com/google/protobuf/DescriptorProtos.OneofOptions.html) message associated with the oneof is initialized - it has nothing to do with `message`.","title":"In the java protocol buffers 3 api, how can the descriptor object be used to check if a oneof is set?","body":"<p>I suspect you want <code>message.getOneofFieldDescriptor(containingOneof)</code>. From the <a href=\"https://developers.google.com/protocol-buffers/docs/reference/java/com/google/protobuf/MessageOrBuilder.html#getOneofFieldDescriptor-com.google.protobuf.Descriptors.OneofDescriptor-\" rel=\"nofollow noreferrer\">docs</a>:</p>\n<blockquote>\n<p>Obtains the FieldDescriptor if the given oneof is set. Returns null if no field is set.</p>\n</blockquote>\n<p>Note that your <code>isInitialized()</code> call is just checking whether the <a href=\"https://developers.google.com/protocol-buffers/docs/reference/java/com/google/protobuf/DescriptorProtos.OneofOptions.html\" rel=\"nofollow noreferrer\"><code>OneofOptions</code></a> message associated with the oneof is initialized - it has nothing to do with <code>message</code>.</p>\n"}],"owner":{"account_id":5476121,"reputation":143,"user_id":4354090,"display_name":"0x SLC"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":276,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":74223405,"answer_count":1,"score":-1,"last_activity_date":1666879439,"creation_date":1666878906,"question_id":74223272,"body_markdown":"I&#39;m writing a generic proto 2 bson document converter and using the descriptors to map the values. I&#39;m having a time finding the correct method within the java protobuf api to tell me if a oneof is set. \r\n\r\nWhat I have so far is:\r\n\r\n          } else if (descriptor.getContainingOneof() != null) {\r\n        final OneofDescriptor containingOneof = descriptor.getContainingOneof();\r\n        for (FieldDescriptor oneOfField : containingOneof.getFields()){\r\n          //how to check if the oneof is set and how to find which field in the oneof has the value?\r\n        }\r\n\r\nI am toying with this but isInitialized returns true even if the oneof isn&#39;t set.\r\n\r\n       if (message.hasField(descriptor)) {\r\n          final boolean initialized = containingOneof.getOptions().isInitialized();\r\n          for (var oneOfItem : containingOneof.getFields()) {\r\n            var field = message.getField(oneOfItem);\r\n            if(field != null) {\r\n              //the field\r\n            }\r\n          }\r\n        }","title":"In the java protocol buffers 3 api, how can the descriptor object be used to check if a oneof is set?","body":"<p>I'm writing a generic proto 2 bson document converter and using the descriptors to map the values. I'm having a time finding the correct method within the java protobuf api to tell me if a oneof is set.</p>\n<p>What I have so far is:</p>\n<pre><code>      } else if (descriptor.getContainingOneof() != null) {\n    final OneofDescriptor containingOneof = descriptor.getContainingOneof();\n    for (FieldDescriptor oneOfField : containingOneof.getFields()){\n      //how to check if the oneof is set and how to find which field in the oneof has the value?\n    }\n</code></pre>\n<p>I am toying with this but isInitialized returns true even if the oneof isn't set.</p>\n<pre><code>   if (message.hasField(descriptor)) {\n      final boolean initialized = containingOneof.getOptions().isInitialized();\n      for (var oneOfItem : containingOneof.getFields()) {\n        var field = message.getField(oneOfItem);\n        if(field != null) {\n          //the field\n        }\n      }\n    }\n</code></pre>\n"},{"tags":["java","android","printing","console","system"],"comments":[{"owner":{"account_id":84475,"reputation":36366,"user_id":236128,"accept_rate":92,"display_name":"Samuh"},"score":5,"creation_date":1265641157,"post_id":2220547,"comment_id":2176318,"body_markdown":"Though you have got your answer below,I would like to add that output of SOP statements are directed to LogCat too: only that the tag name would be System.out","body":"Though you have got your answer below,I would like to add that output of SOP statements are directed to LogCat too: only that the tag name would be System.out"},{"owner":{"account_id":92150,"reputation":8806,"user_id":252676,"accept_rate":88,"display_name":"Charlie Collins"},"score":1,"creation_date":1298143816,"post_id":2220547,"comment_id":5656735,"body_markdown":"Before 0.9 System.out was lost, I think. After it was passed to the logcat output: http://code.google.com/p/android/issues/detail?id=92. (If you&#39;re using an existing library or such that uses System.out, right or wrong, it will show up in logcat with later versions of Android.)","body":"Before 0.9 System.out was lost, I think. After it was passed to the logcat output: <a href=\"http://code.google.com/p/android/issues/detail?id=92\" rel=\"nofollow noreferrer\">code.google.com/p/android/issues/detail?id=92</a>. (If you&#39;re using an existing library or such that uses System.out, right or wrong, it will show up in logcat with later versions of Android.)"},{"owner":{"account_id":300692,"reputation":4895,"user_id":607968,"accept_rate":33,"display_name":"rDroid"},"score":0,"creation_date":1321851157,"post_id":2220547,"comment_id":10088542,"body_markdown":"we can see the System.out.printlns inside the logcat.","body":"we can see the System.out.printlns inside the logcat."}],"answers":[{"comments":[{"owner":{"account_id":810469,"reputation":16247,"user_id":913935,"accept_rate":80,"display_name":"kaspermoerch"},"score":35,"creation_date":1317368318,"post_id":2220559,"comment_id":9231028,"body_markdown":"Actually - System.out prints to LogCat through Log.i().","body":"Actually - System.out prints to LogCat through Log.i()."},{"owner":{"account_id":2288,"reputation":191205,"user_id":3171,"accept_rate":92,"display_name":"David Webb"},"score":7,"creation_date":1354189171,"post_id":2220559,"comment_id":18685359,"body_markdown":"@JosephEarl - Feel free to use the Edit button.","body":"@JosephEarl - Feel free to use the Edit button."},{"owner":{"account_id":405571,"reputation":726,"user_id":774543,"accept_rate":80,"display_name":"Zorb"},"score":11,"creation_date":1398525019,"post_id":2220559,"comment_id":35691410,"body_markdown":"there is also Log.wtf() :-)","body":"there is also Log.wtf() :-)"},{"owner":{"account_id":899572,"reputation":1168,"user_id":936042,"accept_rate":20,"display_name":"PVS"},"score":2,"creation_date":1454083440,"post_id":2220559,"comment_id":57899588,"body_markdown":"System.out.println does show in Android Studio, under Android Monitor. These are shown as &quot;I/System.out&quot;","body":"System.out.println does show in Android Studio, under Android Monitor. These are shown as &quot;I/System.out&quot;"},{"owner":{"account_id":55190,"reputation":62637,"user_id":165216,"accept_rate":100,"display_name":"PaulMcG"},"score":0,"creation_date":1459869386,"post_id":2220559,"comment_id":60475136,"body_markdown":"The new Console add-in library is also very useful.","body":"The new Console add-in library is also very useful."},{"owner":{"account_id":6473006,"reputation":27420,"user_id":6296561,"accept_rate":95,"display_name":"Zoe is on strike"},"score":1,"creation_date":1507536572,"post_id":2220559,"comment_id":80232383,"body_markdown":"It&#39;s worth noting that Log.wtf can throw an exception when used. It shouldn&#39;t be used unless there is a case that never should happen in the first place","body":"It&#39;s worth noting that Log.wtf can throw an exception when used. It shouldn&#39;t be used unless there is a case that never should happen in the first place"}],"tags":[],"owner":{"account_id":2288,"reputation":191205,"user_id":3171,"accept_rate":92,"display_name":"David Webb"},"comment_count":6,"down_vote_count":0,"up_vote_count":235,"is_accepted":true,"score":235,"last_activity_date":1466942406,"creation_date":1265621230,"answer_id":2220559,"question_id":2220547,"body_markdown":"**Correction:**&lt;p&gt;\r\nOn the emulator and most devices `System.out.println` gets redirected to LogCat and printed using `Log.i()`. This may not be true on very old or custom Android versions. \r\n\r\n**Original:**&lt;p&gt;\r\nThere is no console to send the messages to so the `System.out.println` messages get lost.  In the same way this happens when you run a &quot;traditional&quot; Java application with `javaw`.\r\n\r\nInstead, you can use the [Android `Log` class][1]:\r\n\r\n    Log.d(&quot;MyApp&quot;,&quot;I am here&quot;);\r\n\r\nYou can then view the log either in the __Logcat__ view in Eclipse, or by running the following command:\r\n\r\n    adb logcat\r\n\r\nIt&#39;s good to get in to the habit of looking at logcat output as that is also where the Stack Traces of any uncaught Exceptions are displayed.\r\n\r\n[&lt;img src=&quot;https://content.screencast.com/users/davweb/folders/Snagit/media/04ab3404-7d58-4e6f-97c3-27c0637d8050/02.08.2010-09.37.55.png&quot; width=&quot;480&quot;&gt;][2]\r\n\r\nThe first Entry to every logging call is the log tag which identifies the source of the log message.  This is helpful as you can filter the output of the log to show just your messages.  To make sure that you&#39;re consistent with your log tag it&#39;s probably best to define it once as a `static final String` somewhere.\r\n\r\n    Log.d(MyActivity.LOG_TAG,&quot;Application started&quot;);\r\n\r\nThere are five one-letter methods in `Log` corresponding to the following levels:\r\n\r\n - `e()` - Error\r\n - `w()` - Warning\r\n - `i()` - Information\r\n - `d()` - Debug\r\n - `v()` - Verbose\r\n - `wtf()` - What a Terrible Failure\r\n\r\nThe [documentation says the following about the levels][3]:\r\n\r\n&gt; Verbose should never be compiled into an application except during development. Debug logs are compiled in but stripped at runtime. Error, warning and info logs are always kept.\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/util/Log.html\r\n  [2]: https://content.screencast.com/users/davweb/folders/Snagit/media/04ab3404-7d58-4e6f-97c3-27c0637d8050/02.08.2010-09.37.55.png &quot;Click for full size&quot;\r\n  [3]: https://developer.android.com/reference/android/util/Log.html#ASSERT","title":"Why doesn&#39;t &quot;System.out.println&quot; work in Android?","body":"<p><strong>Correction:</strong><p>\nOn the emulator and most devices <code>System.out.println</code> gets redirected to LogCat and printed using <code>Log.i()</code>. This may not be true on very old or custom Android versions. </p>\n\n<p><strong>Original:</strong><p>\nThere is no console to send the messages to so the <code>System.out.println</code> messages get lost.  In the same way this happens when you run a \"traditional\" Java application with <code>javaw</code>.</p>\n\n<p>Instead, you can use the <a href=\"https://developer.android.com/reference/android/util/Log.html\" rel=\"noreferrer\">Android <code>Log</code> class</a>:</p>\n\n<pre><code>Log.d(\"MyApp\",\"I am here\");\n</code></pre>\n\n<p>You can then view the log either in the <strong>Logcat</strong> view in Eclipse, or by running the following command:</p>\n\n<pre><code>adb logcat\n</code></pre>\n\n<p>It's good to get in to the habit of looking at logcat output as that is also where the Stack Traces of any uncaught Exceptions are displayed.</p>\n\n<p><a href=\"https://content.screencast.com/users/davweb/folders/Snagit/media/04ab3404-7d58-4e6f-97c3-27c0637d8050/02.08.2010-09.37.55.png\" rel=\"noreferrer\" title=\"Click for full size\"><img src=\"https://content.screencast.com/users/davweb/folders/Snagit/media/04ab3404-7d58-4e6f-97c3-27c0637d8050/02.08.2010-09.37.55.png\" width=\"480\"></a></p>\n\n<p>The first Entry to every logging call is the log tag which identifies the source of the log message.  This is helpful as you can filter the output of the log to show just your messages.  To make sure that you're consistent with your log tag it's probably best to define it once as a <code>static final String</code> somewhere.</p>\n\n<pre><code>Log.d(MyActivity.LOG_TAG,\"Application started\");\n</code></pre>\n\n<p>There are five one-letter methods in <code>Log</code> corresponding to the following levels:</p>\n\n<ul>\n<li><code>e()</code> - Error</li>\n<li><code>w()</code> - Warning</li>\n<li><code>i()</code> - Information</li>\n<li><code>d()</code> - Debug</li>\n<li><code>v()</code> - Verbose</li>\n<li><code>wtf()</code> - What a Terrible Failure</li>\n</ul>\n\n<p>The <a href=\"https://developer.android.com/reference/android/util/Log.html#ASSERT\" rel=\"noreferrer\">documentation says the following about the levels</a>:</p>\n\n<blockquote>\n  <p>Verbose should never be compiled into an application except during development. Debug logs are compiled in but stripped at runtime. Error, warning and info logs are always kept.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":92183,"reputation":9859,"user_id":252736,"accept_rate":79,"display_name":"Maurits Rijk"},"comment_count":0,"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1265621266,"creation_date":1265621266,"answer_id":2220562,"question_id":2220547,"body_markdown":"Use the  [Log class][1]. Output visible with LogCat\r\n\r\n\r\n  [1]: http://developer.android.com/reference/android/util/Log.html","title":"Why doesn&#39;t &quot;System.out.println&quot; work in Android?","body":"<p>Use the  <a href=\"http://developer.android.com/reference/android/util/Log.html\" rel=\"noreferrer\">Log class</a>. Output visible with LogCat</p>\n"},{"comments":[{"owner":{"account_id":2373264,"reputation":980,"user_id":2077368,"accept_rate":80,"display_name":"Byron Gavras"},"score":3,"creation_date":1426765556,"post_id":10243073,"comment_id":46510327,"body_markdown":"Additional to this answer bear in mind that some times &quot;something happens&quot; and no input is printed with the usage of System.out. If this the case try to close and restart the emulator. This worked for me.","body":"Additional to this answer bear in mind that some times &quot;something happens&quot; and no input is printed with the usage of System.out. If this the case try to close and restart the emulator. This worked for me."}],"tags":[],"owner":{"account_id":1347881,"reputation":381,"user_id":1288271,"accept_rate":100,"display_name":"kaushikSuman"},"comment_count":1,"down_vote_count":1,"up_vote_count":17,"is_accepted":false,"score":16,"last_activity_date":1360358787,"creation_date":1334912015,"answer_id":10243073,"question_id":2220547,"body_markdown":"Yes it does. If you&#39;re using the emulator, it will show in the Logcat view under the `System.out` tag. Write something and try it in your emulator.","title":"Why doesn&#39;t &quot;System.out.println&quot; work in Android?","body":"<p>Yes it does. If you're using the emulator, it will show in the Logcat view under the <code>System.out</code> tag. Write something and try it in your emulator.</p>\n"},{"tags":[],"owner":{"account_id":7585128,"reputation":604,"user_id":5754527,"accept_rate":100,"display_name":"Marc"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1453883055,"creation_date":1453883055,"answer_id":35032087,"question_id":2220547,"body_markdown":"Of course, to see the result in logcat, you should set the Log level at least to &quot;Info&quot; ([Log level in logcat][1]); otherwise, as it happened to me, you won&#39;t see your output.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/hWCH7.png","title":"Why doesn&#39;t &quot;System.out.println&quot; work in Android?","body":"<p>Of course, to see the result in logcat, you should set the Log level at least to \"Info\" (<a href=\"https://i.stack.imgur.com/hWCH7.png\" rel=\"nofollow\">Log level in logcat</a>); otherwise, as it happened to me, you won't see your output.</p>\n"},{"comments":[{"owner":{"display_name":"user285372"},"score":1,"creation_date":1497429759,"post_id":41312419,"comment_id":76070038,"body_markdown":"When I click on `Android Monitor` and then `logcat`, I see many many messages constantly being printed... Is it supposed to be like this? Then how would I see my own debug messages?","body":"When I click on <code>Android Monitor</code> and then <code>logcat</code>, I see many many messages constantly being printed... Is it supposed to be like this? Then how would I see my own debug messages?"},{"owner":{"account_id":6160599,"reputation":632,"user_id":4802336,"accept_rate":60,"display_name":"Valentin Filyov"},"score":0,"creation_date":1497550361,"post_id":41312419,"comment_id":76137215,"body_markdown":"I just scroll through the other things and find it :D","body":"I just scroll through the other things and find it :D"}],"tags":[],"owner":{"account_id":6160599,"reputation":632,"user_id":4802336,"accept_rate":60,"display_name":"Valentin Filyov"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1482575073,"creation_date":1482575073,"answer_id":41312419,"question_id":2220547,"body_markdown":"There is no place on your phone that you can read the `System.out.println();`\r\n\r\nInstead, if you want to see the result of something either look at your `logcat/console` window or make a `Toast` or a `Snackbar` (if you&#39;re on a newer device) appear on the device&#39;s screen with the message :) \r\nThat&#39;s what i do when i have to check for example where it goes in a `switch case` code! Have fun coding! :)","title":"Why doesn&#39;t &quot;System.out.println&quot; work in Android?","body":"<p>There is no place on your phone that you can read the <code>System.out.println();</code></p>\n\n<p>Instead, if you want to see the result of something either look at your <code>logcat/console</code> window or make a <code>Toast</code> or a <code>Snackbar</code> (if you're on a newer device) appear on the device's screen with the message :) \nThat's what i do when i have to check for example where it goes in a <code>switch case</code> code! Have fun coding! :)</p>\n"},{"tags":[],"owner":{"account_id":2129581,"reputation":807,"user_id":1890716,"display_name":"7heaven"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1489655800,"creation_date":1489655800,"answer_id":42829746,"question_id":2220547,"body_markdown":"if you really need System.out.println to work(eg. it&#39;s called from third party library). you can simply use reflection to change out field in System.class:\r\n\r\n    try{\r\n        Field outField = System.class.getDeclaredField(&quot;out&quot;);\r\n        Field modifiersField = Field.class.getDeclaredField(&quot;accessFlags&quot;);\r\n        modifiersField.setAccessible(true);\r\n        modifiersField.set(outField, outField.getModifiers() &amp; ~Modifier.FINAL);\r\n        outField.setAccessible(true);\r\n        outField.set(null, new PrintStream(new RedirectLogOutputStream()); \r\n    }catch(NoSuchFieldException e){\r\n        e.printStackTrace(); \r\n    }catch(IllegalAccessException e){\r\n        e.printStackTrace(); \r\n    }\r\nRedirectLogOutputStream class:\r\n\r\n\r\n    public class RedirectLogOutputStream extends OutputStream{\r\n        private String mCache;\r\n\r\n        @Override\r\n        public void write(int b) throws IOException{\r\n            if(mCache == null) mCache = &quot;&quot;;\r\n\r\n            if(((char) b) == &#39;\\n&#39;){\r\n                Log.i(&quot;redirect from system.out&quot;, mCache);\r\n                mCache = &quot;&quot;;\r\n            }else{\r\n                mCache += (char) b;\r\n            }\r\n        }\r\n    }","title":"Why doesn&#39;t &quot;System.out.println&quot; work in Android?","body":"<p>if you really need System.out.println to work(eg. it's called from third party library). you can simply use reflection to change out field in System.class:</p>\n\n<pre><code>try{\n    Field outField = System.class.getDeclaredField(\"out\");\n    Field modifiersField = Field.class.getDeclaredField(\"accessFlags\");\n    modifiersField.setAccessible(true);\n    modifiersField.set(outField, outField.getModifiers() &amp; ~Modifier.FINAL);\n    outField.setAccessible(true);\n    outField.set(null, new PrintStream(new RedirectLogOutputStream()); \n}catch(NoSuchFieldException e){\n    e.printStackTrace(); \n}catch(IllegalAccessException e){\n    e.printStackTrace(); \n}\n</code></pre>\n\n<p>RedirectLogOutputStream class:</p>\n\n<pre><code>public class RedirectLogOutputStream extends OutputStream{\n    private String mCache;\n\n    @Override\n    public void write(int b) throws IOException{\n        if(mCache == null) mCache = \"\";\n\n        if(((char) b) == '\\n'){\n            Log.i(\"redirect from system.out\", mCache);\n            mCache = \"\";\n        }else{\n            mCache += (char) b;\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7605211,"reputation":1533,"user_id":5768269,"accept_rate":79,"display_name":"Wesos de Queso"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1527195384,"creation_date":1527195384,"answer_id":50518049,"question_id":2220547,"body_markdown":"System.out.println(&quot;...&quot;) is displayed on the Android Monitor in Android Studio","title":"Why doesn&#39;t &quot;System.out.println&quot; work in Android?","body":"<p>System.out.println(\"...\") is displayed on the Android Monitor in Android Studio</p>\n"},{"comments":[{"owner":{"account_id":3890955,"reputation":546,"user_id":6835932,"display_name":"Michał Jaroń"},"score":0,"creation_date":1634839295,"post_id":53785394,"comment_id":123141335,"body_markdown":"There is a race when reading/writing variable LogUtil.log. You should use e.g. condition variable or monitor to synchronize variables and avoid active waiting loop.","body":"There is a race when reading/writing variable LogUtil.log. You should use e.g. condition variable or monitor to synchronize variables and avoid active waiting loop."}],"tags":[],"owner":{"account_id":13610868,"reputation":16,"user_id":9986393,"display_name":"Nut eater"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1544813596,"creation_date":1544813596,"answer_id":53785394,"question_id":2220547,"body_markdown":"I&#39;ll leave this for further visitors as for me it was something about the main thread being unable to `System.out.println`.\r\n\r\n    public class LogUtil {\r\n\r\n    private static String log = &quot;&quot;;\r\n    private static boolean started = false;\r\n    public static void print(String s) {\r\n        //Start the thread unless it&#39;s already running\r\n        if(!started) {\r\n            start();\r\n        }\r\n        //Append a String to the log\r\n        log += s;\r\n    }\r\n\r\n    public static void println(String s) {\r\n        //Start the thread unless it&#39;s already running\r\n        if(!started) {\r\n            start();\r\n        }\r\n        //Append a String to the log with a newline.\r\n        //NOTE: Change to print(s + &quot;\\n&quot;) if you don&#39;t want it to trim the last newline.\r\n        log += (s.endsWith(&quot;\\n&quot;) )? s : (s + &quot;\\n&quot;);\r\n    }\r\n\r\n    private static void start() {\r\n        //Creates a new Thread responsible for showing the logs.\r\n        Thread thread = new Thread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                while(true) {\r\n                    //Execute 100 times per second to save CPU cycles.\r\n                    try {\r\n                        Thread.sleep(10);\r\n                    } catch (InterruptedException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                    //If the log variable has any contents...\r\n                    if(!log.isEmpty()) {\r\n                        //...print it and clear the log variable for new data.\r\n                        System.out.print(log);\r\n                        log = &quot;&quot;;\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        thread.start();\r\n        started = true;\r\n    }\r\n    }\r\nUsage: `LogUtil.println(&quot;This is a string&quot;);`","title":"Why doesn&#39;t &quot;System.out.println&quot; work in Android?","body":"<p>I'll leave this for further visitors as for me it was something about the main thread being unable to <code>System.out.println</code>.</p>\n\n<pre><code>public class LogUtil {\n\nprivate static String log = \"\";\nprivate static boolean started = false;\npublic static void print(String s) {\n    //Start the thread unless it's already running\n    if(!started) {\n        start();\n    }\n    //Append a String to the log\n    log += s;\n}\n\npublic static void println(String s) {\n    //Start the thread unless it's already running\n    if(!started) {\n        start();\n    }\n    //Append a String to the log with a newline.\n    //NOTE: Change to print(s + \"\\n\") if you don't want it to trim the last newline.\n    log += (s.endsWith(\"\\n\") )? s : (s + \"\\n\");\n}\n\nprivate static void start() {\n    //Creates a new Thread responsible for showing the logs.\n    Thread thread = new Thread(new Runnable() {\n        @Override\n        public void run() {\n            while(true) {\n                //Execute 100 times per second to save CPU cycles.\n                try {\n                    Thread.sleep(10);\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n                //If the log variable has any contents...\n                if(!log.isEmpty()) {\n                    //...print it and clear the log variable for new data.\n                    System.out.print(log);\n                    log = \"\";\n                }\n            }\n        }\n    });\n    thread.start();\n    started = true;\n}\n}\n</code></pre>\n\n<p>Usage: <code>LogUtil.println(\"This is a string\");</code></p>\n"},{"tags":[],"owner":{"account_id":9739987,"reputation":1,"user_id":7221937,"display_name":"Ronak Desai"},"comment_count":0,"down_vote_count":6,"up_vote_count":0,"is_accepted":false,"score":-6,"last_activity_date":1563961196,"creation_date":1548695720,"answer_id":54407112,"question_id":2220547,"body_markdown":"Recently I noticed the same issue in Android Studio 3.3. I closed the other Android studio projects and Logcat started working. The accepted answer above is not logical at all.","title":"Why doesn&#39;t &quot;System.out.println&quot; work in Android?","body":"<p>Recently I noticed the same issue in Android Studio 3.3. I closed the other Android studio projects and Logcat started working. The accepted answer above is not logical at all.</p>\n"},{"comments":[{"owner":{"account_id":7407971,"reputation":2389,"user_id":5636313,"accept_rate":76,"display_name":"Farid"},"score":1,"creation_date":1566721214,"post_id":57178666,"comment_id":101739858,"body_markdown":"This is the very first sentence of the OP &quot;I want to print something in console&quot;","body":"This is the very first sentence of the OP &quot;I want to print something in console&quot;"}],"tags":[],"owner":{"account_id":8033190,"reputation":92,"user_id":6057325,"display_name":"ALSP"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1564014014,"creation_date":1563957478,"answer_id":57178666,"question_id":2220547,"body_markdown":"it is not displayed in your application... it is under your emulator&#39;s logcat","title":"Why doesn&#39;t &quot;System.out.println&quot; work in Android?","body":"<p>it is not displayed in your application... it is under your emulator's logcat</p>\n"},{"tags":[],"owner":{"account_id":11687350,"reputation":363,"user_id":13947194,"display_name":"user13947194"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1597593002,"creation_date":1597499217,"answer_id":63426733,"question_id":2220547,"body_markdown":"I dont having fancy IDE to use LogCat as I use a mobile IDE.\r\n\r\nI had to use various other methods and I have the classes and utilties for you to use if you need.\r\n\r\n1. class jav.android.Msg. Has a collection of static methods.\r\n A: methods for printing android TOASTS.\r\n B: methods for popping up a dialog box.\r\nEach method requires a valid Context. You can set the default context.\r\n\r\n2. A more ambitious way, An Android Console. You instantiate a handle to the console in your app, which fires up the console(if it is installed), and you can write to the console. I recently updated the console to implement reading input from the console. Which doesnt return until the input is recieved, like a regular console. \r\n A: Download and install Android Console( get it from me)\r\n B: A java file is shipped with it(jav.android.console.IConsole). Place it at the appropriate directory. It contains the methods to operate Android Console.\r\n C: Call the constructor which completes the initialization.\r\n D: read&lt;*&gt; and write the console.\r\nThere is still work to do. Namely, since OnServiceConnected is not called immediately, You cannot use IConsole in the same function you instantiated it.\r\n\r\n3. Before creating Android Console, I created Console Dialog, which was a dialog operating in the same app to resemble a console. Pro: no need to wait on OnServiceConnected to use it. Con: When app crashes, you dont get the message that crashed the app.\r\n\r\n Since Android Console is a seperate app in a seperate process, if your app crashes, you definately get to see the error. Furthermore IConsole sets an uncaught exception handler in your app incase you are not keen in exception handling. It pretty much prints the stack traces and exception messages to Android Console. Finally, if Android Console crashes, it sends its stacktrace and exceptions to you and you can choose an app to read it. Actually, AndroidConsole is not required to crash.\r\n\r\n*****Edit Extras*****\r\nI noticed that my while APK Builder has no LogCat; AIDE does. Then I realized a pro of using my Android Console anyhow. \r\n\r\n1. Android Console is design to take up only a portion of the screen, so you can see both your app, and data emitted from your app to the console. This is not possible with AIDE. So I I want to touch the screen and see coordinates, Android Console makes this easy.\r\n\r\n2. Android Console is designed to pop up when you write to it.\r\n\r\n3. Android Console will hide when you backpress.","title":"Why doesn&#39;t &quot;System.out.println&quot; work in Android?","body":"<p>I dont having fancy IDE to use LogCat as I use a mobile IDE.</p>\n<p>I had to use various other methods and I have the classes and utilties for you to use if you need.</p>\n<ol>\n<li><p>class jav.android.Msg. Has a collection of static methods.\nA: methods for printing android TOASTS.\nB: methods for popping up a dialog box.\nEach method requires a valid Context. You can set the default context.</p>\n</li>\n<li><p>A more ambitious way, An Android Console. You instantiate a handle to the console in your app, which fires up the console(if it is installed), and you can write to the console. I recently updated the console to implement reading input from the console. Which doesnt return until the input is recieved, like a regular console.\nA: Download and install Android Console( get it from me)\nB: A java file is shipped with it(jav.android.console.IConsole). Place it at the appropriate directory. It contains the methods to operate Android Console.\nC: Call the constructor which completes the initialization.\nD: read&lt;*&gt; and write the console.\nThere is still work to do. Namely, since OnServiceConnected is not called immediately, You cannot use IConsole in the same function you instantiated it.</p>\n</li>\n<li><p>Before creating Android Console, I created Console Dialog, which was a dialog operating in the same app to resemble a console. Pro: no need to wait on OnServiceConnected to use it. Con: When app crashes, you dont get the message that crashed the app.</p>\n</li>\n</ol>\n<p>Since Android Console is a seperate app in a seperate process, if your app crashes, you definately get to see the error. Furthermore IConsole sets an uncaught exception handler in your app incase you are not keen in exception handling. It pretty much prints the stack traces and exception messages to Android Console. Finally, if Android Console crashes, it sends its stacktrace and exceptions to you and you can choose an app to read it. Actually, AndroidConsole is not required to crash.</p>\n<p><em><strong><strong>Edit Extras</strong></strong></em>\nI noticed that my while APK Builder has no LogCat; AIDE does. Then I realized a pro of using my Android Console anyhow.</p>\n<ol>\n<li><p>Android Console is design to take up only a portion of the screen, so you can see both your app, and data emitted from your app to the console. This is not possible with AIDE. So I I want to touch the screen and see coordinates, Android Console makes this easy.</p>\n</li>\n<li><p>Android Console is designed to pop up when you write to it.</p>\n</li>\n<li><p>Android Console will hide when you backpress.</p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":4086927,"reputation":654,"user_id":3355999,"display_name":"Goldfish"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1666879420,"creation_date":1666879420,"answer_id":74223397,"question_id":2220547,"body_markdown":"**Solution that worked for me:**\r\n\r\nUnder **Logcat**. (To show Logcat if not already shown. Click View menu--&gt;Tool Windows--&gt;Logcat). It is shown as System.out not as System.out.println as you might expect it. **Rebuild** the app if you have not already. \r\n\r\nIn the picture, **highlighted yellow** shows the System.out and output &quot;Hello again&quot;.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/6zifS.jpg","title":"Why doesn&#39;t &quot;System.out.println&quot; work in Android?","body":"<p><strong>Solution that worked for me:</strong></p>\n<p>Under <strong>Logcat</strong>. (To show Logcat if not already shown. Click View menu--&gt;Tool Windows--&gt;Logcat). It is shown as System.out not as System.out.println as you might expect it. <strong>Rebuild</strong> the app if you have not already.</p>\n<p>In the picture, <strong>highlighted yellow</strong> shows the System.out and output &quot;Hello again&quot;.</p>\n<p><a href=\"https://i.stack.imgur.com/6zifS.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6zifS.jpg\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":60131,"reputation":262750,"user_id":179736,"accept_rate":81,"display_name":"TIMEX"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":283976,"favorite_count":0,"down_vote_count":0,"up_vote_count":209,"accepted_answer_id":2220559,"answer_count":12,"score":209,"last_activity_date":1666879420,"creation_date":1265621100,"question_id":2220547,"body_markdown":"I want to print something in console, so that I can debug it.  But for some reason, nothing prints in my Android application.  \r\n\r\nHow do I debug then?\r\n\r\n\r\n    public class HelloWebview extends Activity {\r\n    \tWebView webview;\t\r\n    \tprivate static final String LOG_TAG = &quot;WebViewDemo&quot;;\r\n    \tprivate class HelloWebViewClient extends WebViewClient {\r\n    \t    @Override\r\n    \t    public boolean shouldOverrideUrlLoading(WebView view, String url) {\r\n    \t        view.loadUrl(url);\r\n    \t        return true;\r\n    \t    }\r\n    \t}\r\n    \t\r\n        /** Called when the activity is first created. */\r\n        @Override\r\n        public void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.main);\r\n            webview = (WebView) findViewById(R.id.webview);\r\n            webview.setWebViewClient(new HelloWebViewClient());\r\n            webview.getSettings().setJavaScriptEnabled(true);\r\n            webview.setWebChromeClient(new MyWebChromeClient());\r\n            webview.loadUrl(&quot;http://example.com/&quot;);    \r\n            System.out.println(&quot;I am here&quot;);\r\n        }","title":"Why doesn&#39;t &quot;System.out.println&quot; work in Android?","body":"<p>I want to print something in console, so that I can debug it.  But for some reason, nothing prints in my Android application.  </p>\n\n<p>How do I debug then?</p>\n\n<pre><code>public class HelloWebview extends Activity {\n    WebView webview;    \n    private static final String LOG_TAG = \"WebViewDemo\";\n    private class HelloWebViewClient extends WebViewClient {\n        @Override\n        public boolean shouldOverrideUrlLoading(WebView view, String url) {\n            view.loadUrl(url);\n            return true;\n        }\n    }\n\n    /** Called when the activity is first created. */\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.main);\n        webview = (WebView) findViewById(R.id.webview);\n        webview.setWebViewClient(new HelloWebViewClient());\n        webview.getSettings().setJavaScriptEnabled(true);\n        webview.setWebChromeClient(new MyWebChromeClient());\n        webview.loadUrl(\"http://example.com/\");    \n        System.out.println(\"I am here\");\n    }\n</code></pre>\n"},{"tags":["java","postgresql","spring-boot"],"comments":[{"owner":{"account_id":3430916,"reputation":3799,"user_id":3059385,"accept_rate":40,"display_name":"Christopher Schneider"},"score":2,"creation_date":1666793849,"post_id":74209163,"comment_id":131020386,"body_markdown":"What is &quot;Java&quot; to you in this context? JPQL? What does Spring have to do with this? Spring&#39;s `@Qualifier` is not for queries. You should share some code.","body":"What is &quot;Java&quot; to you in this context? JPQL? What does Spring have to do with this? Spring&#39;s <code>@Qualifier</code> is not for queries. You should share some code."}],"answers":[{"tags":[],"owner":{"account_id":17197306,"reputation":119,"user_id":12449753,"display_name":"w97802"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1666879374,"creation_date":1666879374,"answer_id":74223384,"question_id":74209163,"body_markdown":"Sorry, the question is now solved, it&#39;s because we just need to use  `AND x.maturityDate &lt; date(:asOf) + ‘1 day’`","title":"Translate Postgre SQL code to Java in @Query","body":"<p>Sorry, the question is now solved, it's because we just need to use  <code>AND x.maturityDate &lt; date(:asOf) + ‘1 day’</code></p>\n"}],"owner":{"account_id":17197306,"reputation":119,"user_id":12449753,"display_name":"w97802"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":74223384,"answer_count":1,"score":-1,"last_activity_date":1666879374,"creation_date":1666793156,"question_id":74209163,"body_markdown":"I trying to use `@Query` followed by SQL commands in Java Spring Boot to get data from Postgre SQL database.\r\n\r\nMy code in Postgre SQL includes something like `… AND x.maturity_date &lt; date(’2022-10-10’) + interval ‘1 day’`. The code works in Postgre SQL.\r\n\r\nI translated this SQL Code to Java: \r\n`… AND x.maturityDate &lt; date(:asOf) + interval ‘1 day’`\r\nWhere `asOf` is actually a variable in the Java function (in SQL I was using `2022-10-10` as the `asOf` variable. \r\n\r\nHowever, there is an error, which shows this is not how it&#39;s supposed to be done. \r\n\r\nMay I ask if this is the correct way to translate this Postgre SQL code to Java ?\r\n\r\nAny help will be appreciated. ","title":"Translate Postgre SQL code to Java in @Query","body":"<p>I trying to use <code>@Query</code> followed by SQL commands in Java Spring Boot to get data from Postgre SQL database.</p>\n<p>My code in Postgre SQL includes something like <code>… AND x.maturity_date &lt; date(’2022-10-10’) + interval ‘1 day’</code>. The code works in Postgre SQL.</p>\n<p>I translated this SQL Code to Java:\n<code>… AND x.maturityDate &lt; date(:asOf) + interval ‘1 day’</code>\nWhere <code>asOf</code> is actually a variable in the Java function (in SQL I was using <code>2022-10-10</code> as the <code>asOf</code> variable.</p>\n<p>However, there is an error, which shows this is not how it's supposed to be done.</p>\n<p>May I ask if this is the correct way to translate this Postgre SQL code to Java ?</p>\n<p>Any help will be appreciated.</p>\n"},{"tags":["java","hashmap"],"comments":[{"owner":{"account_id":336748,"reputation":22028,"user_id":664577,"accept_rate":98,"display_name":"Anthony Accioly"},"score":3,"creation_date":1357752521,"post_id":14242899,"comment_id":19761628,"body_markdown":"Humm... Try to read `HashMap` source code, it is a good exercice: http://www.docjar.com/html/api/java/util/HashMap.java.html","body":"Humm... Try to read <code>HashMap</code> source code, it is a good exercice: <a href=\"http://www.docjar.com/html/api/java/util/HashMap.java.html\" rel=\"nofollow noreferrer\">docjar.com/html/api/java/util/HashMap.java.html</a>"},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":2,"creation_date":1357753289,"post_id":14242899,"comment_id":19762023,"body_markdown":"It uses a linked list structure. No `LinkedList` object is created.","body":"It uses a linked list structure. No <code>LinkedList</code> object is created."}],"answers":[{"comments":[{"owner":{"account_id":1345421,"reputation":377,"user_id":1286288,"accept_rate":71,"display_name":"Chris"},"score":2,"creation_date":1406301956,"post_id":14242937,"comment_id":38793221,"body_markdown":"Do you have any proof, or perhaps an example?  Splattered around the internet are claims like &quot;it creates a linked list&quot;, but the specification doesn&#39;t indicate this at all.  How does it create a linked list?  The `get` method is supposed to return a single object.","body":"Do you have any proof, or perhaps an example?  Splattered around the internet are claims like &quot;it creates a linked list&quot;, but the specification doesn&#39;t indicate this at all.  How does it create a linked list?  The <code>get</code> method is supposed to return a single object."},{"owner":{"account_id":97082,"reputation":375036,"user_id":263525,"accept_rate":85,"display_name":"Denys S&#233;guret"},"score":5,"creation_date":1406302168,"post_id":14242937,"comment_id":38793345,"body_markdown":"[A proof](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/HashMap.java) ? It&#39;s splattered around the internet because the hash table and hash map designs are very old and standards. Many of us have used or coded hash maps long before the birth of Java.","body":"<a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/HashMap.java\" rel=\"nofollow noreferrer\">A proof</a> ? It&#39;s splattered around the internet because the hash table and hash map designs are very old and standards. Many of us have used or coded hash maps long before the birth of Java."},{"owner":{"account_id":1345421,"reputation":377,"user_id":1286288,"accept_rate":71,"display_name":"Chris"},"score":0,"creation_date":1406303001,"post_id":14242937,"comment_id":38793887,"body_markdown":"So do you need to insert an entry, because `get` allegedly returns an instance of type `V`, which cannot be linked :\nhttp://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html#get(java.lang.Object)\n`There can be at most one such mapping`","body":"So do you need to insert an entry, because <code>get</code> allegedly returns an instance of type <code>V</code>, which cannot be linked : <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html#get(java.lang.Object)\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/api/java/util/&hellip;</a> <code>There can be at most one such mapping</code>"},{"owner":{"account_id":97082,"reputation":375036,"user_id":263525,"accept_rate":85,"display_name":"Denys S&#233;guret"},"score":1,"creation_date":1406304166,"post_id":14242937,"comment_id":38794613,"body_markdown":"The entry are internal. You don&#39;t directly put them or get them. That&#39;s added for you internally (wrapping your V instance).","body":"The entry are internal. You don&#39;t directly put them or get them. That&#39;s added for you internally (wrapping your V instance)."},{"owner":{"account_id":1345421,"reputation":377,"user_id":1286288,"accept_rate":71,"display_name":"Chris"},"score":0,"creation_date":1406304484,"post_id":14242937,"comment_id":38794784,"body_markdown":"HashMap&lt;Integer,String&gt; map = new HashMap &lt;Integer,String&gt; ();\n    \t\n\t\tmap.put(1, &quot;hi&quot;);\n\t\tmap.put(1,&quot;there&quot;);\n\t\t\n\t\tString s = map.get(1);\n\t\tSystem.out.println(s);\n\t\t s = map.remove(1);\n\t\tSystem.out.println(s);\n\t\t s = map.remove(1);\n\t\tSystem.out.println(s);\n\nOutput: \nthere\nthere\nnull","body":"HashMap&lt;Integer,String&gt; map = new HashMap &lt;Integer,String&gt; ();     \t \t\tmap.put(1, &quot;hi&quot;); \t\tmap.put(1,&quot;there&quot;); \t\t \t\tString s = map.get(1); \t\tSystem.out.println(s); \t\t s = map.remove(1); \t\tSystem.out.println(s); \t\t s = map.remove(1); \t\tSystem.out.println(s);  Output:  there there null"},{"owner":{"account_id":2332852,"reputation":1068,"user_id":2045807,"accept_rate":62,"display_name":"Bhavuk Mathur"},"score":0,"creation_date":1412017665,"post_id":14242937,"comment_id":40913726,"body_markdown":"@dystroy\nThe output of this code \n hash.put(&quot;1&quot;, &quot;one&quot;);\n hash.put(&quot;1&quot;, &quot;four&quot;);\n hash.put(&quot;1&quot;, &quot;three&quot;);\n hash.put(&quot;1&quot;, &quot;two&quot;);\n\nis coming as only {1=two}..?? How to display all the elements if the values are not being overridden?","body":"@dystroy The output of this code   hash.put(&quot;1&quot;, &quot;one&quot;);  hash.put(&quot;1&quot;, &quot;four&quot;);  hash.put(&quot;1&quot;, &quot;three&quot;);  hash.put(&quot;1&quot;, &quot;two&quot;);  is coming as only {1=two}..?? How to display all the elements if the values are not being overridden?"},{"owner":{"account_id":97082,"reputation":375036,"user_id":263525,"accept_rate":85,"display_name":"Denys S&#233;guret"},"score":1,"creation_date":1412057246,"post_id":14242937,"comment_id":40925589,"body_markdown":"Two solutions : 1) use an array as value. 2) use a collection able to store more than one value per key, for example guava&#39;s [multimap](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Multimap.html)","body":"Two solutions : 1) use an array as value. 2) use a collection able to store more than one value per key, for example guava&#39;s <a href=\"http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Multimap.html\" rel=\"nofollow noreferrer\">multimap</a>"}],"tags":[],"owner":{"account_id":97082,"reputation":375036,"user_id":263525,"accept_rate":85,"display_name":"Denys S&#233;guret"},"comment_count":7,"down_vote_count":0,"up_vote_count":41,"is_accepted":true,"score":41,"last_activity_date":1666879290,"creation_date":1357752406,"answer_id":14242937,"question_id":14242899,"body_markdown":"No, the first one isn&#39;t overwritten just because the second one has the same `hashCode`.\r\n\r\nIt will be overwritten only if it is also equal (as said by `equals`). If not, both values will be kept in the linked list.\r\n\r\nWhen fetching a key, all nodes with the same `hashCode` will be compared to the provided key until one is equal then its value will be returned (using the `equals` method).\r\n\r\nIf no key in the map is equal, you&#39;ll get `null`.\r\n\r\nThe only problem you have if many objects have the same hashCode (or more precisely the same hashCode modulo the size of the internal `Entry[] table`) is that the linked list will always be read, which is slower (and defeats the purpose of any hash table). That&#39;s why it&#39;s important when designing a `hashcode` method to ensure the generated integers are well distributed.","title":"java HashMap collision","body":"<p>No, the first one isn't overwritten just because the second one has the same <code>hashCode</code>.</p>\n<p>It will be overwritten only if it is also equal (as said by <code>equals</code>). If not, both values will be kept in the linked list.</p>\n<p>When fetching a key, all nodes with the same <code>hashCode</code> will be compared to the provided key until one is equal then its value will be returned (using the <code>equals</code> method).</p>\n<p>If no key in the map is equal, you'll get <code>null</code>.</p>\n<p>The only problem you have if many objects have the same hashCode (or more precisely the same hashCode modulo the size of the internal <code>Entry[] table</code>) is that the linked list will always be read, which is slower (and defeats the purpose of any hash table). That's why it's important when designing a <code>hashcode</code> method to ensure the generated integers are well distributed.</p>\n"},{"tags":[],"owner":{"account_id":198822,"reputation":16528,"user_id":443716,"accept_rate":92,"display_name":"Isaac"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1357752501,"creation_date":1357752501,"answer_id":14242961,"question_id":14242899,"body_markdown":"Assuming that you&#39;re following the rules for [defining `hashCode` and `equals`][1], the scenario you described will not result in loss of data. At most, performance will degrade over time.\r\n\r\n\r\n  [1]: http://javarevisited.blogspot.co.il/2011/02/how-to-write-equals-method-in-java.html","title":"java HashMap collision","body":"<p>Assuming that you're following the rules for <a href=\"http://javarevisited.blogspot.co.il/2011/02/how-to-write-equals-method-in-java.html\" rel=\"nofollow\">defining <code>hashCode</code> and <code>equals</code></a>, the scenario you described will not result in loss of data. At most, performance will degrade over time.</p>\n"},{"comments":[{"owner":{"account_id":2183673,"reputation":12897,"user_id":1932588,"display_name":"Lee Meador"},"score":0,"creation_date":1357753003,"post_id":14243022,"comment_id":19761884,"body_markdown":"Notice that your data may have characteristics that make it important to generate a hash code that improves performance for your data but would suck in general. That is, if you need better performance.","body":"Notice that your data may have characteristics that make it important to generate a hash code that improves performance for your data but would suck in general. That is, if you need better performance."}],"tags":[],"owner":{"account_id":2183673,"reputation":12897,"user_id":1932588,"display_name":"Lee Meador"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1357752668,"creation_date":1357752668,"answer_id":14243022,"question_id":14242899,"body_markdown":"In the Java hashmap they could use several ways to do it. From my old CS 201 Data Structures class back during the dark ages:\r\n\r\n1) Each bucket in the hash map can become the head of a linked list holding all the entries added that have the same hash value. A collision on adding means you add the new entry to the end of the linked list. Search means you have to linearly check all the ones in any linked list once you hash into the bucket for it.\r\n\r\n2) If a collision occurs and the store is conceptually an array, you can just iterate starting at that point until you find an empty spot and add the new entry there. For search this means if you find the hash bucket is occupied, then you have to compare linearly from that point to the next empty spot in the array that backs the hash map.\r\n\r\nIn both cases, the performance degrades if there are multiple entries with the same hash. In the general case, this means that a hash function (used to generate the hash code) returns a small number of possible values, performance will degrade as the map fills up. The Java HashMap has taken advantage of 50 years of research on such things to be a good fit to the general case of general data going into a hashed map.\r\n\r\nNote @dystroy made a comment about the rule that you can&#39;t have two entries in the map with that match according to the equals() method.","title":"java HashMap collision","body":"<p>In the Java hashmap they could use several ways to do it. From my old CS 201 Data Structures class back during the dark ages:</p>\n\n<p>1) Each bucket in the hash map can become the head of a linked list holding all the entries added that have the same hash value. A collision on adding means you add the new entry to the end of the linked list. Search means you have to linearly check all the ones in any linked list once you hash into the bucket for it.</p>\n\n<p>2) If a collision occurs and the store is conceptually an array, you can just iterate starting at that point until you find an empty spot and add the new entry there. For search this means if you find the hash bucket is occupied, then you have to compare linearly from that point to the next empty spot in the array that backs the hash map.</p>\n\n<p>In both cases, the performance degrades if there are multiple entries with the same hash. In the general case, this means that a hash function (used to generate the hash code) returns a small number of possible values, performance will degrade as the map fills up. The Java HashMap has taken advantage of 50 years of research on such things to be a good fit to the general case of general data going into a hashed map.</p>\n\n<p>Note @dystroy made a comment about the rule that you can't have two entries in the map with that match according to the equals() method.</p>\n"},{"tags":[],"owner":{"account_id":1587132,"reputation":6980,"user_id":1471203,"accept_rate":89,"display_name":"Rais Alam"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1375380723,"creation_date":1357816968,"answer_id":14256798,"question_id":14242899,"body_markdown":"Let me explain working of hashmap. \r\n\r\n**Working of put method:**\r\n\r\n*HashMap*  works on principle of hashing, we have `put()` and `get()` method for storing and retrieving object form HashMap. When we pass an both key and value to `put()` method to store on HashMap , it uses key object `hashcode()` method to calculate hashcode and they by applying hashing on that hashcode it identifies bucket location for storing value object. While retrieving it uses key object equals method to find out correct key value pair and return value object associated with that key. HashMap  uses linked list in case of collision and object will be stored in next node of linked list.\r\nAlso HashMap  stores both key+value tuple in every node of linked list\r\n\r\n\r\n**Working of get method:**\r\n\r\nWhen we pass Key and Value object  to `put()` method on Java HashMap, HashMap implementation calls hashCode method on Key object and applies returned hashcode into its own hashing function to find a bucket location for storing Entry object, important point to mention is that HashMap in Java stores both key and value object as Map.Entry in bucket. If more than one Entry object found in the bucket the it will call ke.equals method of each node in same bucket. \r\n\r\n","title":"java HashMap collision","body":"<p>Let me explain working of hashmap. </p>\n\n<p><strong>Working of put method:</strong></p>\n\n<p><em>HashMap</em>  works on principle of hashing, we have <code>put()</code> and <code>get()</code> method for storing and retrieving object form HashMap. When we pass an both key and value to <code>put()</code> method to store on HashMap , it uses key object <code>hashcode()</code> method to calculate hashcode and they by applying hashing on that hashcode it identifies bucket location for storing value object. While retrieving it uses key object equals method to find out correct key value pair and return value object associated with that key. HashMap  uses linked list in case of collision and object will be stored in next node of linked list.\nAlso HashMap  stores both key+value tuple in every node of linked list</p>\n\n<p><strong>Working of get method:</strong></p>\n\n<p>When we pass Key and Value object  to <code>put()</code> method on Java HashMap, HashMap implementation calls hashCode method on Key object and applies returned hashcode into its own hashing function to find a bucket location for storing Entry object, important point to mention is that HashMap in Java stores both key and value object as Map.Entry in bucket. If more than one Entry object found in the bucket the it will call ke.equals method of each node in same bucket. </p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1637484176,"creation_date":1637484176,"answer_id":70053033,"question_id":14242899,"body_markdown":"In Java 8, they overhauled the implementation of `HashMap`.  Now the hash buckets are organized as either linked lists or balanced binary trees, depending on:\r\n\r\n  - the hash array size, and / or\r\n  - the number of entries in a given bucket.\r\n\r\nThis means that you no longer get catastrophically bad performance in cases where many entries land in the same hash bucket.\r\n\r\nFor more information, read this blog post:\r\n\r\n  - [Performance Improvement for HashMap in Java 8](https://www.nagarro.com/en/blog/post/24/performance-improvement-for-hashmap-in-java-8)","title":"java HashMap collision","body":"<p>In Java 8, they overhauled the implementation of <code>HashMap</code>.  Now the hash buckets are organized as either linked lists or balanced binary trees, depending on:</p>\n<ul>\n<li>the hash array size, and / or</li>\n<li>the number of entries in a given bucket.</li>\n</ul>\n<p>This means that you no longer get catastrophically bad performance in cases where many entries land in the same hash bucket.</p>\n<p>For more information, read this blog post:</p>\n<ul>\n<li><a href=\"https://www.nagarro.com/en/blog/post/24/performance-improvement-for-hashmap-in-java-8\" rel=\"nofollow noreferrer\">Performance Improvement for HashMap in Java 8</a></li>\n</ul>\n"}],"owner":{"account_id":98618,"reputation":13889,"user_id":266827,"accept_rate":78,"display_name":"Sandy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33061,"favorite_count":0,"down_vote_count":1,"up_vote_count":31,"accepted_answer_id":14242937,"answer_count":5,"score":30,"last_activity_date":1666879290,"creation_date":1357752295,"question_id":14242899,"body_markdown":"I was reading about how hashmap works. I was reading through the \r\n[&quot;What will happen if two different objects have same hashcode&quot;][1]. \r\n\r\nAccording to it if two objects has same hashcode both will be stored in `LinkedList` but as far as I know if two hashcode then previous one will get overwritten with new one (correct me if I am wrong).\r\n\r\nCan someone please put more light on how hashmap use object as key internally and what will happen if two objects has same hashcode and how both objects will be fetched with `get()`?\r\n\r\n\r\n\r\n  [1]: http://javarevisited.blogspot.in/2011/02/how-hashmap-works-in-java.html","title":"java HashMap collision","body":"<p>I was reading about how hashmap works. I was reading through the\n<a href=\"http://javarevisited.blogspot.in/2011/02/how-hashmap-works-in-java.html\" rel=\"nofollow noreferrer\">&quot;What will happen if two different objects have same hashcode&quot;</a>.</p>\n<p>According to it if two objects has same hashcode both will be stored in <code>LinkedList</code> but as far as I know if two hashcode then previous one will get overwritten with new one (correct me if I am wrong).</p>\n<p>Can someone please put more light on how hashmap use object as key internally and what will happen if two objects has same hashcode and how both objects will be fetched with <code>get()</code>?</p>\n"},{"tags":["java","spring","spring-data-jpa","spring-data","amazon-rds"],"answers":[{"tags":[],"owner":{"account_id":357760,"reputation":1492,"user_id":2304483,"display_name":"user2304483"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1664975269,"creation_date":1664975269,"answer_id":73960843,"question_id":73959943,"body_markdown":"Try this, change:\r\n\r\n    spring.datasource.driver-class-name\r\nto\r\n\r\n    spring.datasource.driverClassName","title":"Could not open JPA EntityManager for transaction;nested exception is org.hibernate.exception.JDBCConnectionException:Unable to acquire JDBC Connection","body":"<p>Try this, change:</p>\n<pre><code>spring.datasource.driver-class-name\n</code></pre>\n<p>to</p>\n<pre><code>spring.datasource.driverClassName\n</code></pre>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1666948908,"post_id":74223334,"comment_id":131060272,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/74223334/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":18662431,"reputation":1,"user_id":17129108,"display_name":"Наш Тренеришка"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666879152,"creation_date":1666879152,"answer_id":74223334,"question_id":73959943,"body_markdown":"My problem was, that in hibernate.properties I&#39;ve named my url-connection not correct.\r\n\r\nhibernate.connection.url=jdbc:postgresql://localhost:5432/project2\r\n\r\nbut actually it was named &#39;first_db&#39;\r\n\r\n\r\nCheck it","title":"Could not open JPA EntityManager for transaction;nested exception is org.hibernate.exception.JDBCConnectionException:Unable to acquire JDBC Connection","body":"<p>My problem was, that in hibernate.properties I've named my url-connection not correct.</p>\n<p>hibernate.connection.url=jdbc:postgresql://localhost:5432/project2</p>\n<p>but actually it was named 'first_db'</p>\n<p>Check it</p>\n"}],"owner":{"account_id":16808188,"reputation":107,"user_id":12151794,"display_name":"Krn S"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11309,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":73960843,"answer_count":2,"score":3,"last_activity_date":1666879152,"creation_date":1664970757,"question_id":73959943,"body_markdown":"I am learning how to use Hibernate and Spring JPA for a website. While trying to check and add data to a MySql database in AWS RDS by using Postman. But when I am accessing the URI I am receiving 500 Internal Server. Can anyone please help me to resolve this issue.\r\n\r\nError Stack:\r\n```\r\n&quot;org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection\\r\\n\\tat org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:467)\\r\\n\\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400)\\r\\n\\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373)\\r\\n\\tat org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:595)\\r\\n\\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:382)\\r\\n\\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\\r\\n\\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\\r\\n\\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)\\r\\n\\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\\r\\n\\tat org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)\\r\\n\\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\\r\\n\\tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\\r\\n\\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\\r\\n\\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)\\r\\n\\tat jdk.proxy4/jdk.proxy4.$Proxy102.save(Unknown Source)\\r\\n\\tat com.example.FootballPred.serviceImp.ClubFootballServiceImp.addTeam(ClubFootballServiceImp.java:18)\\r\\n\\tat com.example.FootballPred.controller.ClubFootballController.addTeam(ClubFootballController.java:21)\\r\\n\\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\\r\\n\\tat java.base/java.lang.reflect.Method.invoke(Method.java:577)\\r\\n\\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)\\r\\n\\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)\\r\\n\\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\\r\\n\\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)\\r\\n\\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)\\r\\n\\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\\r\\n\\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1071)\\r\\n\\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:964)\\r\\n\\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\\r\\n\\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)\\r\\n\\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:681)\\r\\n\\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\\r\\n\\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:764)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\\r\\n\\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\\r\\n\\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\\r\\n\\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\\r\\n\\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\\r\\n\\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\\r\\n\\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\\r\\n\\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\\r\\n\\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\\r\\n\\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\\r\\n\\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)\\r\\n\\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\\r\\n\\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\\r\\n\\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\\r\\n\\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)\\r\\n\\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)\\r\\n\\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\\r\\n\\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)\\r\\n\\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789)\\r\\n\\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\\r\\n\\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\\r\\n\\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\\r\\n\\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\\r\\n\\tat java.base/java.lang.Thread.run(Thread.java:833)\\r\\nCaused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection\\r\\n\\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:48)\\r\\n\\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:37)\\r\\n\\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)\\r\\n\\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)\\r\\n\\tat org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:111)\\r\\n\\tat org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:138)\\r\\n\\tat org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:276)\\r\\n\\tat org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:284)\\r\\n\\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:246)\\r\\n\\tat org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)\\r\\n\\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:164)\\r\\n\\tat org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:421)\\r\\n\\t... 64 more\\r\\nCaused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30097ms.\\r\\n\\tat com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)\\r\\n\\tat com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:197)\\r\\n\\tat com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:162)\\r\\n\\tat com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)\\r\\n\\tat org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)\\r\\n\\tat org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:38)\\r\\n\\tat org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:108)\\r\\n\\t... 71 more\\r\\nCaused by: java.sql.SQLNonTransientConnectionException: No operations allowed after connection closed.\\r\\n\\tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:110)\\r\\n\\tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)\\r\\n\\tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:89)\\r\\n\\tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:63)\\r\\n\\tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:73)\\r\\n\\tat com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:73)\\r\\n\\tat com.mysql.cj.jdbc.ConnectionImpl.setNetworkTimeout(ConnectionImpl.java:2485)\\r\\n\\tat com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:566)\\r\\n\\tat com.zaxxer.hikari.pool.PoolBase.isConnectionAlive(PoolBase.java:173)\\r\\n\\tat com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:186)\\r\\n\\t... 76 more\\r\\nCaused by: com.mysql.cj.exceptions.ConnectionIsClosedException: No operations allowed after connection closed.\\r\\n\\tat java.base/jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:67)\\r\\n\\tat java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\\r\\n\\tat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:483)\\r\\n\\tat com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61)\\r\\n\\tat com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)\\r\\n\\tat com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151)\\r\\n\\tat com.mysql.cj.NativeSession.checkClosed(NativeSession.java:761)\\r\\n\\tat com.mysql.cj.jdbc.ConnectionImpl.checkClosed(ConnectionImpl.java:568)\\r\\n\\tat com.mysql.cj.jdbc.ConnectionImpl.setNetworkTimeout(ConnectionImpl.java:2481)\\r\\n\\t... 79 more\\r\\n&quot;,\r\n\r\n&quot;message&quot;: &quot;Could not open JPA EntityManager for transaction; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection&quot;,\r\n```\r\n\r\nThese are the below files:\r\n\r\napplication.properties:\r\n```\r\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\nspring.datasource.url=jdbc:mysql://database-1.cogwxhggkept.ap-south-1.rds.amazonaws.com:3306/Football\r\nspring.datasource.username=user\r\nspring.datasource.password=user\r\nspring.jpa.hibernate.ddl-auto=create\r\n\r\n## Hibernate Properties\r\nspring.jpa.properties.hibernate.dialect = org.hibernate.dialect.MySQL5InnoDBDialect\r\n\r\n```\r\n\r\nClubFootballTeamEntity1:\r\n```\r\n@Entity\r\n@Table(name = &quot;FottballTeamClub&quot;)\r\npublic class ClubFootballTeamEntity {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    @Column(name = &quot;footballTeamId&quot;)\r\n    private int id;\r\n\r\n    @Column(name = &quot;footballTeamName&quot;)\r\n    private String teamName;\r\n\r\n    @Column(name = &quot;footballTeamNat&quot;)\r\n    private String teamNameNat;\r\n\r\n    @Column(name = &quot;footballTeamNameAbv&quot;)\r\n    private String teamNameAbv;\r\n\r\n    public ClubFootballTeamEntity() {\r\n    }\r\n\r\n    public ClubFootballTeamEntity(String teamName, String teamNameNat, String teamNameAbv) {\r\n        this.teamName = teamName;\r\n        this.teamNameNat = teamNameNat;\r\n        this.teamNameAbv = teamNameAbv;\r\n    }\r\n\r\n    public int getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(int id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getTeamName() {\r\n        return teamName;\r\n    }\r\n\r\n    public void setTeamName(String teamName) {\r\n        this.teamName = teamName;\r\n    }\r\n\r\n    public String getTeamNameNat() {\r\n        return teamNameNat;\r\n    }\r\n\r\n    public void setTeamNameNat(String teamNameNat) {\r\n        this.teamNameNat = teamNameNat;\r\n    }\r\n\r\n    public String getTeamNameAbv() {\r\n        return teamNameAbv;\r\n    }\r\n\r\n    public void setTeamNameAbv(String teamNameAbv) {\r\n        this.teamNameAbv = teamNameAbv;\r\n    }\r\n}\r\n\r\n```\r\n\r\nClubFootballController:\r\n```\r\n@RestController\r\n@RequestMapping(&quot;/api/clubfootball/v1&quot;)\r\npublic class ClubFootballController {\r\n\r\n    @Autowired\r\n    private ClubFootballService clubFootballService;\r\n\r\n    @PostMapping(&quot;/addteam&quot;)\r\n    public ResponseEntity&lt;ClubFootballTeamEntity&gt; addTeam(@RequestBody ClubFootballTeamEntity team){\r\n        return ResponseEntity.ok(clubFootballService.addTeam(team));\r\n    }\r\n\r\n}\r\n```\r\nClubFootballRepository:\r\n\r\n```\r\n@Repository\r\npublic interface ClubFootballRepository extends JpaRepository&lt;ClubFootballTeamEntity, Integer&gt; {\r\n\r\n}\r\n```\r\n\r\nClubFootballServiceImp:\r\n```\r\n@Service\r\npublic class ClubFootballServiceImp implements ClubFootballService {\r\n\r\n    @Autowired\r\n    private ClubFootballRepository clubFootballRepository;\r\n\r\n    @Override\r\n    public ClubFootballTeamEntity addTeam(ClubFootballTeamEntity team) {\r\n        clubFootballRepository.save(team);\r\n        System.out.println(team.getTeamName());\r\n        return team;\r\n    }\r\n}\r\n\r\n```\r\n\r\n","title":"Could not open JPA EntityManager for transaction;nested exception is org.hibernate.exception.JDBCConnectionException:Unable to acquire JDBC Connection","body":"<p>I am learning how to use Hibernate and Spring JPA for a website. While trying to check and add data to a MySql database in AWS RDS by using Postman. But when I am accessing the URI I am receiving 500 Internal Server. Can anyone please help me to resolve this issue.</p>\n<p>Error Stack:</p>\n<pre><code>&quot;org.springframework.transaction.CannotCreateTransactionException: Could not open JPA EntityManager for transaction; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection\\r\\n\\tat org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:467)\\r\\n\\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.startTransaction(AbstractPlatformTransactionManager.java:400)\\r\\n\\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:373)\\r\\n\\tat org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:595)\\r\\n\\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:382)\\r\\n\\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\\r\\n\\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\\r\\n\\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)\\r\\n\\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\\r\\n\\tat org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)\\r\\n\\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\\r\\n\\tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\\r\\n\\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\\r\\n\\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)\\r\\n\\tat jdk.proxy4/jdk.proxy4.$Proxy102.save(Unknown Source)\\r\\n\\tat com.example.FootballPred.serviceImp.ClubFootballServiceImp.addTeam(ClubFootballServiceImp.java:18)\\r\\n\\tat com.example.FootballPred.controller.ClubFootballController.addTeam(ClubFootballController.java:21)\\r\\n\\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\\r\\n\\tat java.base/java.lang.reflect.Method.invoke(Method.java:577)\\r\\n\\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)\\r\\n\\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)\\r\\n\\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\\r\\n\\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)\\r\\n\\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)\\r\\n\\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\\r\\n\\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1071)\\r\\n\\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:964)\\r\\n\\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\\r\\n\\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)\\r\\n\\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:681)\\r\\n\\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\\r\\n\\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:764)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\\r\\n\\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\\r\\n\\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\\r\\n\\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\\r\\n\\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\\r\\n\\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\\r\\n\\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\\r\\n\\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\\r\\n\\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\\r\\n\\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\\r\\n\\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\\r\\n\\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)\\r\\n\\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\\r\\n\\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\\r\\n\\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\\r\\n\\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)\\r\\n\\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)\\r\\n\\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\\r\\n\\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)\\r\\n\\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1789)\\r\\n\\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\\r\\n\\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\\r\\n\\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\\r\\n\\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\\r\\n\\tat java.base/java.lang.Thread.run(Thread.java:833)\\r\\nCaused by: org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection\\r\\n\\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:48)\\r\\n\\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:37)\\r\\n\\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)\\r\\n\\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)\\r\\n\\tat org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:111)\\r\\n\\tat org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getPhysicalConnection(LogicalConnectionManagedImpl.java:138)\\r\\n\\tat org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.getConnectionForTransactionManagement(LogicalConnectionManagedImpl.java:276)\\r\\n\\tat org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.begin(LogicalConnectionManagedImpl.java:284)\\r\\n\\tat org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.begin(JdbcResourceLocalTransactionCoordinatorImpl.java:246)\\r\\n\\tat org.hibernate.engine.transaction.internal.TransactionImpl.begin(TransactionImpl.java:83)\\r\\n\\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.beginTransaction(HibernateJpaDialect.java:164)\\r\\n\\tat org.springframework.orm.jpa.JpaTransactionManager.doBegin(JpaTransactionManager.java:421)\\r\\n\\t... 64 more\\r\\nCaused by: java.sql.SQLTransientConnectionException: HikariPool-1 - Connection is not available, request timed out after 30097ms.\\r\\n\\tat com.zaxxer.hikari.pool.HikariPool.createTimeoutException(HikariPool.java:696)\\r\\n\\tat com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:197)\\r\\n\\tat com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:162)\\r\\n\\tat com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:128)\\r\\n\\tat org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)\\r\\n\\tat org.hibernate.internal.NonContextualJdbcConnectionAccess.obtainConnection(NonContextualJdbcConnectionAccess.java:38)\\r\\n\\tat org.hibernate.resource.jdbc.internal.LogicalConnectionManagedImpl.acquireConnectionIfNeeded(LogicalConnectionManagedImpl.java:108)\\r\\n\\t... 71 more\\r\\nCaused by: java.sql.SQLNonTransientConnectionException: No operations allowed after connection closed.\\r\\n\\tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:110)\\r\\n\\tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)\\r\\n\\tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:89)\\r\\n\\tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:63)\\r\\n\\tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:73)\\r\\n\\tat com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:73)\\r\\n\\tat com.mysql.cj.jdbc.ConnectionImpl.setNetworkTimeout(ConnectionImpl.java:2485)\\r\\n\\tat com.zaxxer.hikari.pool.PoolBase.setNetworkTimeout(PoolBase.java:566)\\r\\n\\tat com.zaxxer.hikari.pool.PoolBase.isConnectionAlive(PoolBase.java:173)\\r\\n\\tat com.zaxxer.hikari.pool.HikariPool.getConnection(HikariPool.java:186)\\r\\n\\t... 76 more\\r\\nCaused by: com.mysql.cj.exceptions.ConnectionIsClosedException: No operations allowed after connection closed.\\r\\n\\tat java.base/jdk.internal.reflect.DirectConstructorHandleAccessor.newInstance(DirectConstructorHandleAccessor.java:67)\\r\\n\\tat java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\\r\\n\\tat java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:483)\\r\\n\\tat com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:61)\\r\\n\\tat com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:105)\\r\\n\\tat com.mysql.cj.exceptions.ExceptionFactory.createException(ExceptionFactory.java:151)\\r\\n\\tat com.mysql.cj.NativeSession.checkClosed(NativeSession.java:761)\\r\\n\\tat com.mysql.cj.jdbc.ConnectionImpl.checkClosed(ConnectionImpl.java:568)\\r\\n\\tat com.mysql.cj.jdbc.ConnectionImpl.setNetworkTimeout(ConnectionImpl.java:2481)\\r\\n\\t... 79 more\\r\\n&quot;,\n\n&quot;message&quot;: &quot;Could not open JPA EntityManager for transaction; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to acquire JDBC Connection&quot;,\n</code></pre>\n<p>These are the below files:</p>\n<p>application.properties:</p>\n<pre><code>spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\nspring.datasource.url=jdbc:mysql://database-1.cogwxhggkept.ap-south-1.rds.amazonaws.com:3306/Football\nspring.datasource.username=user\nspring.datasource.password=user\nspring.jpa.hibernate.ddl-auto=create\n\n## Hibernate Properties\nspring.jpa.properties.hibernate.dialect = org.hibernate.dialect.MySQL5InnoDBDialect\n\n</code></pre>\n<p>ClubFootballTeamEntity1:</p>\n<pre><code>@Entity\n@Table(name = &quot;FottballTeamClub&quot;)\npublic class ClubFootballTeamEntity {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    @Column(name = &quot;footballTeamId&quot;)\n    private int id;\n\n    @Column(name = &quot;footballTeamName&quot;)\n    private String teamName;\n\n    @Column(name = &quot;footballTeamNat&quot;)\n    private String teamNameNat;\n\n    @Column(name = &quot;footballTeamNameAbv&quot;)\n    private String teamNameAbv;\n\n    public ClubFootballTeamEntity() {\n    }\n\n    public ClubFootballTeamEntity(String teamName, String teamNameNat, String teamNameAbv) {\n        this.teamName = teamName;\n        this.teamNameNat = teamNameNat;\n        this.teamNameAbv = teamNameAbv;\n    }\n\n    public int getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    public String getTeamName() {\n        return teamName;\n    }\n\n    public void setTeamName(String teamName) {\n        this.teamName = teamName;\n    }\n\n    public String getTeamNameNat() {\n        return teamNameNat;\n    }\n\n    public void setTeamNameNat(String teamNameNat) {\n        this.teamNameNat = teamNameNat;\n    }\n\n    public String getTeamNameAbv() {\n        return teamNameAbv;\n    }\n\n    public void setTeamNameAbv(String teamNameAbv) {\n        this.teamNameAbv = teamNameAbv;\n    }\n}\n\n</code></pre>\n<p>ClubFootballController:</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/api/clubfootball/v1&quot;)\npublic class ClubFootballController {\n\n    @Autowired\n    private ClubFootballService clubFootballService;\n\n    @PostMapping(&quot;/addteam&quot;)\n    public ResponseEntity&lt;ClubFootballTeamEntity&gt; addTeam(@RequestBody ClubFootballTeamEntity team){\n        return ResponseEntity.ok(clubFootballService.addTeam(team));\n    }\n\n}\n</code></pre>\n<p>ClubFootballRepository:</p>\n<pre><code>@Repository\npublic interface ClubFootballRepository extends JpaRepository&lt;ClubFootballTeamEntity, Integer&gt; {\n\n}\n</code></pre>\n<p>ClubFootballServiceImp:</p>\n<pre><code>@Service\npublic class ClubFootballServiceImp implements ClubFootballService {\n\n    @Autowired\n    private ClubFootballRepository clubFootballRepository;\n\n    @Override\n    public ClubFootballTeamEntity addTeam(ClubFootballTeamEntity team) {\n        clubFootballRepository.save(team);\n        System.out.println(team.getTeamName());\n        return team;\n    }\n}\n\n</code></pre>\n"},{"tags":["java","oracle","encryption","wildfly","ojdbc"],"comments":[{"owner":{"account_id":3509196,"reputation":16493,"user_id":2933977,"display_name":"stdunbar"},"score":1,"creation_date":1666561668,"post_id":74134349,"comment_id":130960963,"body_markdown":"Does this answer your question? [Oracle JDBC Thin: enforce network encryption](https://stackoverflow.com/questions/69644315/oracle-jdbc-thin-enforce-network-encryption)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/69644315/oracle-jdbc-thin-enforce-network-encryption\">Oracle JDBC Thin: enforce network encryption</a>"},{"owner":{"account_id":1471077,"reputation":5601,"user_id":1382647,"accept_rate":43,"display_name":"fatherazrael"},"score":0,"creation_date":1666870683,"post_id":74134349,"comment_id":131040321,"body_markdown":"@stdunbar: No i am using  OJDBC7","body":"@stdunbar: No i am using  OJDBC7"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1666879158,"post_id":74134349,"comment_id":131043534,"body_markdown":"OJDBC7 only tells us it is for Java 7, it provides zero information about the actual version of the OJDBC driver you&#39;re using. However, the fact you&#39;re using an OJDBC7 driver suggests your project is seriously out-of-date on its dependencies, as recent versions of the OJDBC driver don&#39;t even offer a Java 7 variant of the driver.","body":"OJDBC7 only tells us it is for Java 7, it provides zero information about the actual version of the OJDBC driver you&#39;re using. However, the fact you&#39;re using an OJDBC7 driver suggests your project is seriously out-of-date on its dependencies, as recent versions of the OJDBC driver don&#39;t even offer a Java 7 variant of the driver."}],"owner":{"account_id":1471077,"reputation":5601,"user_id":1382647,"accept_rate":43,"display_name":"fatherazrael"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":370,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1666879037,"creation_date":1666239093,"question_id":74134349,"body_markdown":"My company is implementing encryption on all database connections. I am using Wildfly and Java Project. We also use straight JDBC connections. \r\n\r\nServices are connecting to Oracle DB for saving data or fetching data.\r\n\r\nMy connection string looks like:\r\n\r\n    jdbc:oracle:thin:@ora01.man.cosng.net:1521/int_prod\r\n\r\nThere is no encryption thing passed. Java code also has nothing related to encryption.\r\n\r\nIs Java driver encrypted by default? (ojdbc7.jar), or do we need to send extra properties defined in this article (but this require changes in 140 projects) -&gt; https://docs.oracle.com/cd/B19306_01/java.102/b14355/clntsec.htm#EHAFHEIG \r\n\r\nOr any other idea?\r\n\r\nAlso Wildfly has following settings: anything you can suggest here which is straightforward:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n[![enter image description here][2]][2]\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/KE8jC.png\r\n  [2]: https://i.stack.imgur.com/Nsuzi.png\r\n  [3]: https://i.stack.imgur.com/qRXPW.png","title":"How to make encrypted connection to Oracle using Java JDBC Library (OJDBC 7)?","body":"<p>My company is implementing encryption on all database connections. I am using Wildfly and Java Project. We also use straight JDBC connections.</p>\n<p>Services are connecting to Oracle DB for saving data or fetching data.</p>\n<p>My connection string looks like:</p>\n<pre><code>jdbc:oracle:thin:@ora01.man.cosng.net:1521/int_prod\n</code></pre>\n<p>There is no encryption thing passed. Java code also has nothing related to encryption.</p>\n<p>Is Java driver encrypted by default? (ojdbc7.jar), or do we need to send extra properties defined in this article (but this require changes in 140 projects) -&gt; <a href=\"https://docs.oracle.com/cd/B19306_01/java.102/b14355/clntsec.htm#EHAFHEIG\" rel=\"nofollow noreferrer\">https://docs.oracle.com/cd/B19306_01/java.102/b14355/clntsec.htm#EHAFHEIG</a></p>\n<p>Or any other idea?</p>\n<p>Also Wildfly has following settings: anything you can suggest here which is straightforward:</p>\n<p><a href=\"https://i.stack.imgur.com/KE8jC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KE8jC.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/Nsuzi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Nsuzi.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/qRXPW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qRXPW.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","docker","maven","docker-compose","nexus"],"comments":[{"owner":{"account_id":2488420,"reputation":5122,"user_id":2166420,"display_name":"rseddon"},"score":0,"creation_date":1667042834,"post_id":74223279,"comment_id":131079978,"body_markdown":"That isn’t possible, and the docker folks have no plans to make it possible:  https://github.com/moby/moby/issues/7203","body":"That isn’t possible, and the docker folks have no plans to make it possible:  <a href=\"https://github.com/moby/moby/issues/7203\" rel=\"nofollow noreferrer\">github.com/moby/moby/issues/7203</a>"},{"owner":{"account_id":5284837,"reputation":40522,"user_id":9401096,"display_name":"Zeitounator"},"score":0,"creation_date":1667207052,"post_id":74223279,"comment_id":131107347,"body_markdown":"The following is a bit dirty IMO but &quot;works&quot; 1) on your nexus server create a proxy to dockerhub 2) create a docker group containting the previously created dockerhub procy and your private registry 3) configure your docker daemon to use the docker group as a mirror (i.e. set it in the list of `registry-mirrors` inside `daemon.json`)","body":"The following is a bit dirty IMO but &quot;works&quot; 1) on your nexus server create a proxy to dockerhub 2) create a docker group containting the previously created dockerhub procy and your private registry 3) configure your docker daemon to use the docker group as a mirror (i.e. set it in the list of <code>registry-mirrors</code> inside <code>daemon.json</code>)"}],"owner":{"account_id":26725571,"reputation":19,"user_id":20328746,"display_name":"giiosas"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":121,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1666878928,"creation_date":1666878928,"question_id":74223279,"body_markdown":"I try to pull image from my nexus repository\r\nwhen i try to pull from nexus working fine, but i want remove path not working\r\n\r\nWhat is solution to use 10.100.23.30:7777/ by default ?\r\n\r\n`docker pull 10.100.23.30:7777/test/jdk-17:snapshot-4` - work\r\n\r\n`docker pull jdk-17:snapshot-4` - not work","title":"Docker image pull from nexus repo","body":"<p>I try to pull image from my nexus repository\nwhen i try to pull from nexus working fine, but i want remove path not working</p>\n<p>What is solution to use 10.100.23.30:7777/ by default ?</p>\n<p><code>docker pull 10.100.23.30:7777/test/jdk-17:snapshot-4</code> - work</p>\n<p><code>docker pull jdk-17:snapshot-4</code> - not work</p>\n"},{"tags":["java","eclipse","pmd"],"comments":[{"owner":{"account_id":3543094,"reputation":506,"user_id":2959709,"display_name":"SanderDN"},"score":0,"creation_date":1387799734,"post_id":20741541,"comment_id":31081415,"body_markdown":"[Found a solution](http://zavyn.blogspot.be/2011/09/solution-modify-pmds-shortvariable-rule.html) (maybe not the greatest) after a bit of searching.","body":"<a href=\"http://zavyn.blogspot.be/2011/09/solution-modify-pmds-shortvariable-rule.html\" rel=\"nofollow noreferrer\">Found a solution</a> (maybe not the greatest) after a bit of searching."},{"owner":{"account_id":987285,"reputation":17009,"user_id":1005481,"accept_rate":89,"display_name":"barfuin"},"score":1,"creation_date":1387805675,"post_id":20741541,"comment_id":31084350,"body_markdown":"Your linked solution is very good! Please post it as an answer and accept it after the grace period. Thanks.","body":"Your linked solution is very good! Please post it as an answer and accept it after the grace period. Thanks."}],"answers":[{"comments":[{"owner":{"account_id":2200924,"reputation":1364,"user_id":1945342,"accept_rate":43,"display_name":"John Doe"},"score":1,"creation_date":1400725194,"post_id":20748768,"comment_id":36602329,"body_markdown":"You need to put the &lt;property&gt; tag inside &lt;properties&gt; tag.","body":"You need to put the &lt;property&gt; tag inside &lt;properties&gt; tag."}],"tags":[],"owner":{"account_id":3543094,"reputation":506,"user_id":2959709,"display_name":"SanderDN"},"comment_count":1,"down_vote_count":0,"up_vote_count":16,"is_accepted":true,"score":16,"last_activity_date":1406797109,"creation_date":1387821565,"answer_id":20748768,"question_id":20741541,"body_markdown":"I found a solution to my problem [here](http://zavyn.blogspot.be/2011/09/solution-modify-pmds-shortvariable-rule.html).\r\n\r\nThe resulting xml looks like this:\r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n    &lt;?xml version=&quot;1.0&quot;?&gt;\r\n    &lt;ruleset name=&quot;My PMD ruleset&quot;\r\n     xmlns=&quot;http://pmd.sourceforge.net/ruleset/2.0.0&quot;\r\n     xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n     xsi:schemaLocation=&quot;http://pmd.sourceforge.net/ruleset/2.0.0 http://pmd.sourceforge.net/ruleset_2_0_0.xsd&quot;&gt;\r\n        &lt;description&gt;\r\n            My PMD\r\n        &lt;/description&gt;\r\n        &lt;rule ref=&quot;rulesets/java/naming.xml/ShortVariable&quot;&gt;\r\n            &lt;properties&gt;\r\n                &lt;property name=&quot;xpath&quot;&gt;\r\n                    &lt;value&gt;\r\n                        //VariableDeclaratorId[(string-length(@Image) &amp;lt; 3) and (not (@Image=&#39;id&#39;))]\r\n                        [not(ancestor::ForInit)]\r\n                        [not((ancestor::FormalParameter) and (ancestor::TryStatement))]\r\n                    &lt;/value&gt;\r\n                &lt;/property&gt;\r\n            &lt;/properties&gt;\r\n        &lt;/rule&gt;\r\n    &lt;/ruleset&gt;\r\n\r\nTo be able to ignore more variable names, repeat the following part:\r\n\r\n    and (not (@Image=&#39;myVariableToIgnore&#39;))\r\n\r\n","title":"How to ignore &quot;id&quot; in Short Variable rule using PMD","body":"<p>I found a solution to my problem <a href=\"http://zavyn.blogspot.be/2011/09/solution-modify-pmds-shortvariable-rule.html\">here</a>.</p>\n\n<p>The resulting xml looks like this:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;ruleset name=\"My PMD ruleset\"\n xmlns=\"http://pmd.sourceforge.net/ruleset/2.0.0\"\n xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n xsi:schemaLocation=\"http://pmd.sourceforge.net/ruleset/2.0.0 http://pmd.sourceforge.net/ruleset_2_0_0.xsd\"&gt;\n    &lt;description&gt;\n        My PMD\n    &lt;/description&gt;\n    &lt;rule ref=\"rulesets/java/naming.xml/ShortVariable\"&gt;\n        &lt;properties&gt;\n            &lt;property name=\"xpath\"&gt;\n                &lt;value&gt;\n                    //VariableDeclaratorId[(string-length(@Image) &amp;lt; 3) and (not (@Image='id'))]\n                    [not(ancestor::ForInit)]\n                    [not((ancestor::FormalParameter) and (ancestor::TryStatement))]\n                &lt;/value&gt;\n            &lt;/property&gt;\n        &lt;/properties&gt;\n    &lt;/rule&gt;\n&lt;/ruleset&gt;\n</code></pre>\n\n<p>To be able to ignore more variable names, repeat the following part:</p>\n\n<pre><code>and (not (@Image='myVariableToIgnore'))\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3543094,"reputation":506,"user_id":2959709,"display_name":"SanderDN"},"score":1,"creation_date":1421756950,"post_id":28043298,"comment_id":44473222,"body_markdown":"Not working with PMD 5.1.3:\njava.lang.IllegalArgumentException: Cannot set non-existant property &#39;exceptions&#39; on Rule ShortVariable","body":"Not working with PMD 5.1.3: java.lang.IllegalArgumentException: Cannot set non-existant property &#39;exceptions&#39; on Rule ShortVariable"},{"owner":{"account_id":1724667,"reputation":43,"user_id":1579645,"display_name":"Simon"},"score":0,"creation_date":1439363399,"post_id":28043298,"comment_id":51824792,"body_markdown":"Sorry, I&#39;m using PHPMD 2.2.3, I didn&#39;t realize it was Eclipse (JAVA World) question.","body":"Sorry, I&#39;m using PHPMD 2.2.3, I didn&#39;t realize it was Eclipse (JAVA World) question."}],"tags":[],"owner":{"account_id":1724667,"reputation":43,"user_id":1579645,"display_name":"Simon"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1439363488,"creation_date":1421750591,"answer_id":28043298,"question_id":20741541,"body_markdown":"The folowing XML is valid for PHP tool PHPMD 2.2.3 \r\n\r\n    &lt;?xml version=&quot;1.0&quot;?&gt;\r\n    &lt;!DOCTYPE ruleset&gt;\r\n    &lt;ruleset\r\n        name=&quot;My PMD ruleset for symfony 2.5&quot;\r\n        xmlns=&quot;http://pmd.sourceforge.net/ruleset/2.0.0&quot;\r\n        xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n        xsi:schemaLocation=&quot;http://pmd.sourceforge.net/ruleset/2.0.0 http://pmd.sourceforge.net/ruleset_2_0_0.xsd&quot;\r\n    &gt;\r\n    \r\n    \t&lt;rule ref=&quot;rulesets/unusedcode.xml&quot; /&gt;\r\n    \t&lt;rule ref=&quot;rulesets/codesize.xml&quot; /&gt;\r\n    \t&lt;rule ref=&quot;rulesets/cleancode.xml&quot; /&gt;\r\n    \t&lt;rule ref=&quot;rulesets/controversial.xml&quot; /&gt;\r\n    \t&lt;rule ref=&quot;rulesets/design.xml&quot; /&gt;\r\n    \t&lt;rule ref=&quot;rulesets/naming.xml&quot;&gt;\r\n    \t   &lt;exclude name=&quot;ShortVariable&quot; /&gt;\r\n    \t&lt;/rule&gt;\r\n    \t&lt;rule ref=&quot;rulesets/naming.xml/ShortVariable&quot;&gt;\r\n            &lt;properties&gt;\r\n                &lt;property name=&quot;exceptions&quot; value=&quot;id,em&quot; /&gt;\r\n            &lt;/properties&gt;\r\n        &lt;/rule&gt;\r\n    &lt;/ruleset&gt;","title":"How to ignore &quot;id&quot; in Short Variable rule using PMD","body":"<p>The folowing XML is valid for PHP tool PHPMD 2.2.3 </p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;!DOCTYPE ruleset&gt;\n&lt;ruleset\n    name=\"My PMD ruleset for symfony 2.5\"\n    xmlns=\"http://pmd.sourceforge.net/ruleset/2.0.0\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://pmd.sourceforge.net/ruleset/2.0.0 http://pmd.sourceforge.net/ruleset_2_0_0.xsd\"\n&gt;\n\n    &lt;rule ref=\"rulesets/unusedcode.xml\" /&gt;\n    &lt;rule ref=\"rulesets/codesize.xml\" /&gt;\n    &lt;rule ref=\"rulesets/cleancode.xml\" /&gt;\n    &lt;rule ref=\"rulesets/controversial.xml\" /&gt;\n    &lt;rule ref=\"rulesets/design.xml\" /&gt;\n    &lt;rule ref=\"rulesets/naming.xml\"&gt;\n       &lt;exclude name=\"ShortVariable\" /&gt;\n    &lt;/rule&gt;\n    &lt;rule ref=\"rulesets/naming.xml/ShortVariable\"&gt;\n        &lt;properties&gt;\n            &lt;property name=\"exceptions\" value=\"id,em\" /&gt;\n        &lt;/properties&gt;\n    &lt;/rule&gt;\n&lt;/ruleset&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22804874,"reputation":1,"user_id":18141233,"display_name":"Serik Koder "},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666878820,"creation_date":1666878820,"answer_id":74223248,"question_id":20741541,"body_markdown":"Update xml \r\n\r\n     &lt;rule ref=&quot;category/java/codestyle.xml/ShortVariable&quot;&gt;\r\n        &lt;properties&gt;\r\n            &lt;property name=&quot;xpath&quot;&gt;\r\n                &lt;value&gt;\r\n                    //VariableDeclaratorId[(string-length(@Image) &amp;lt; 3) and (not (@Name=&#39;id&#39;))]\r\n                    [not(ancestor::ForInit)]\r\n                    [not((ancestor::FormalParameter) and (ancestor::TryStatement))]\r\n                &lt;/value&gt;\r\n            &lt;/property&gt;\r\n        &lt;/properties&gt;\r\n    &lt;/rule&gt;\r\n\r\n","title":"How to ignore &quot;id&quot; in Short Variable rule using PMD","body":"<p>Update xml</p>\n<pre><code> &lt;rule ref=&quot;category/java/codestyle.xml/ShortVariable&quot;&gt;\n    &lt;properties&gt;\n        &lt;property name=&quot;xpath&quot;&gt;\n            &lt;value&gt;\n                //VariableDeclaratorId[(string-length(@Image) &amp;lt; 3) and (not (@Name='id'))]\n                [not(ancestor::ForInit)]\n                [not((ancestor::FormalParameter) and (ancestor::TryStatement))]\n            &lt;/value&gt;\n        &lt;/property&gt;\n    &lt;/properties&gt;\n&lt;/rule&gt;\n</code></pre>\n"}],"owner":{"account_id":3543094,"reputation":506,"user_id":2959709,"display_name":"SanderDN"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3730,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":20748768,"answer_count":3,"score":11,"last_activity_date":1666878820,"creation_date":1387794369,"question_id":20741541,"body_markdown":"I am using PMD plugin (version 4.0.2) for Eclipse (Eclipse Kepler Java EE). I have configured a naming rule: [ShortVariable](http://pmd.sourceforge.net/pmd-5.0.5/rules/java/naming.html#ShortVariable).\r\n\r\nThis works fine except for parameters like `&quot;id&quot;` and `&quot;e&quot;`. I want PMD to ignore these. So I searched for a way to ignore certain parameters. I found [this link](https://github.com/phpmd/phpmd/pull/66) (although it&#39;s for phpmd) and tried it, yet I can&#39;t seem to get it working. My config file looks like this (XML):\r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n    &lt;?xml version=&quot;1.0&quot;?&gt;\r\n    &lt;ruleset name=&quot;My PMD ruleset&quot;\r\n     xmlns=&quot;http://pmd.sourceforge.net/ruleset/2.0.0&quot;\r\n     xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n     xsi:schemaLocation=&quot;http://pmd.sourceforge.net/ruleset/2.0.0 http://pmd.sourceforge.net/ruleset_2_0_0.xsd&quot;&gt;\r\n        &lt;description&gt;\r\n            My PMD\r\n        &lt;/description&gt;\r\n        &lt;rule ref=&quot;rulesets/java/naming.xml/ShortVariable&quot;&gt;\r\n            &lt;property name=&quot;exceptions&quot; value=&quot;id&quot; /&gt;\r\n        &lt;/rule&gt;\r\n    &lt;/ruleset&gt;\r\n\r\nWhen I try to import this ruleset using the eclipse plugin, it shows no possible rules to import.\r\nAny ideas?","title":"How to ignore &quot;id&quot; in Short Variable rule using PMD","body":"<p>I am using PMD plugin (version 4.0.2) for Eclipse (Eclipse Kepler Java EE). I have configured a naming rule: <a href=\"http://pmd.sourceforge.net/pmd-5.0.5/rules/java/naming.html#ShortVariable\">ShortVariable</a>.</p>\n\n<p>This works fine except for parameters like <code>\"id\"</code> and <code>\"e\"</code>. I want PMD to ignore these. So I searched for a way to ignore certain parameters. I found <a href=\"https://github.com/phpmd/phpmd/pull/66\">this link</a> (although it's for phpmd) and tried it, yet I can't seem to get it working. My config file looks like this (XML):</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;ruleset name=\"My PMD ruleset\"\n xmlns=\"http://pmd.sourceforge.net/ruleset/2.0.0\"\n xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n xsi:schemaLocation=\"http://pmd.sourceforge.net/ruleset/2.0.0 http://pmd.sourceforge.net/ruleset_2_0_0.xsd\"&gt;\n    &lt;description&gt;\n        My PMD\n    &lt;/description&gt;\n    &lt;rule ref=\"rulesets/java/naming.xml/ShortVariable\"&gt;\n        &lt;property name=\"exceptions\" value=\"id\" /&gt;\n    &lt;/rule&gt;\n&lt;/ruleset&gt;\n</code></pre>\n\n<p>When I try to import this ruleset using the eclipse plugin, it shows no possible rules to import.\nAny ideas?</p>\n"},{"tags":["java","mysql","stored-procedures","jdbc"],"comments":[{"owner":{"account_id":9744358,"reputation":39903,"user_id":10138734,"display_name":"Akina"},"score":0,"creation_date":1604422043,"post_id":64666960,"comment_id":114340324,"body_markdown":"Replace your final `set BugList = replace(BugList,&#39;\\n&#39;, &#39;&lt;br/&gt;&#39;);` with simple `SELECT replace(BugList,&#39;\\n&#39;, &#39;&lt;br/&gt;&#39;);`. Then get the output of SP like it is a common SELECT query.","body":"Replace your final <code>set BugList = replace(BugList,&#39;\\n&#39;, &#39;&lt;br&#47;&gt;&#39;);</code> with simple <code>SELECT replace(BugList,&#39;\\n&#39;, &#39;&lt;br&#47;&gt;&#39;);</code>. Then get the output of SP like it is a common SELECT query."},{"owner":{"account_id":2007211,"reputation":581,"user_id":1796748,"accept_rate":40,"display_name":"yonikawa"},"score":0,"creation_date":1604423442,"post_id":64666960,"comment_id":114340978,"body_markdown":"@Akina -  that worked, thanks. If you post it as answer I can accept it.","body":"@Akina -  that worked, thanks. If you post it as answer I can accept it."}],"answers":[{"tags":[],"owner":{"account_id":262293,"reputation":5388,"user_id":547065,"display_name":"Vladislav Vaintroub"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1666876177,"creation_date":1604438331,"answer_id":64670858,"question_id":64666960,"body_markdown":"Your stored procedure should not return result set, since you&#39;re not producing result set. Instead, it returns the result in an INOUT variable.\r\n\r\n\r\nyou should be doing something like below instead\r\n\r\n``` lang-java\r\ncs.registerOutParameter(1, Types.LONGVARBINARY);\r\n..\r\ncs.executeUpdate();\r\nSystem.out.println(cs.getString(1));\r\n\r\n```\r\n\r\nIt may be easier to not mess up with output parameters, and just ```SELECT BugList``` at the end of SP, and have a procedure that returns string as result set, as Akina mentioned in the comment.\r\n","title":"MySQL stored procedure not returning result set","body":"<p>Your stored procedure should not return result set, since you're not producing result set. Instead, it returns the result in an INOUT variable.</p>\n<p>you should be doing something like below instead</p>\n<pre class=\"lang-java prettyprint-override\"><code>cs.registerOutParameter(1, Types.LONGVARBINARY);\n..\ncs.executeUpdate();\nSystem.out.println(cs.getString(1));\n\n</code></pre>\n<p>It may be easier to not mess up with output parameters, and just <code>SELECT BugList</code> at the end of SP, and have a procedure that returns string as result set, as Akina mentioned in the comment.</p>\n"}],"owner":{"account_id":2007211,"reputation":581,"user_id":1796748,"accept_rate":40,"display_name":"yonikawa"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1666878545,"creation_date":1604421681,"question_id":64666960,"body_markdown":"I have a MySQL stored procedure that does a select on a table, then wrap the result using concatenated string (HTML code). I get data back when ran through Workbench, but the Java result set seems empty. Pretty much it returns one big line of concatenated string data (over 1000 lines that creates HTML table out of it). \r\n\r\n```sql\r\nCREATE DEFINER=`root`@`localhost` PROCEDURE `get_html`(\r\n    INOUT BugList varchar(30000))\r\n\r\n    Block1: BEGIN\r\n    DECLARE done INT DEFAULT 0;\r\n    DECLARE LongDesc Varchar(10000) DEFAULT &quot;&quot;;\r\n    DECLARE BugShortList Varchar(10000) DEFAULT &quot;&quot;;\r\n    DECLARE sd varchar(1000) DEFAULT &quot;&quot;;\r\n    declare cname char(20) default &quot;&quot;;\r\n    DECLARE bid int DEFAULT 0;\r\n    DECLARE cid int DEFAULT 0;\r\n    declare prevbid int default 0;\r\n    declare rpl varchar (64) default &quot;&quot;;\r\n    declare os varchar (64) default &quot;&quot;;\r\n    declare bs varchar (64) default &quot;&quot;;\r\n    declare dts date;\r\n\r\n    DECLARE c_1 CURSOR FOR select   b.bug_id,b.short_desc,l.thetext,b.component_id,b.rep_platform,b.op_sys,b.bug_severity\r\n    from bugs b \r\n    INNER JOIN longdescs l ON b.bug_id=l.bug_id \r\n    where component_id in (4,5,6,7,15,16,19,25,26,28,29,32,33,35) and \r\n    b.bug_id &gt; 100 and\r\n    version=&#39;1.0&#39; and \r\n    resolution=&#39;fixed&#39; \r\n    order by b.bug_id desc;\r\n\r\n    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;\r\n\r\n    set BugList= CONCAT(&#39;&lt;table style=&quot;2&quot;, border=&quot;1&quot;&gt;&lt;tr&gt;&lt;td   width=420&gt;&#39;,&#39;&lt;b&gt;=================================== EXPANDED LIST ==================================&lt;/b&gt;&#39;);\r\n\r\n    OPEN c_1;\r\n\r\n    repeat\r\n\r\n    FETCH c_1 INTO bid,sd,LongDesc,cid,rpl,os,bs;\r\n\r\n       if bid = prevbid then\r\n           if LongDesc &lt;&gt; &quot;&quot; then \r\n                 set BugList=CONCAT(BugList,&#39;&lt;br/&gt;&#39;,LongDesc,&#39;&lt;br/&gt;&#39;);\r\n                                   end if;\r\n       else\r\n           select name from components where cid=id into cname;\r\n\t\t   set BugShortList=CONCAT(BugShortList,&#39;&lt;br/&gt;&#39;,&#39;&amp;#160;&#39;,&#39;&amp;#160;&#39;,&#39;&lt;a href=#&#39;,bid,&#39;&gt;&#39;,bid,&#39;&lt;/a&gt;&#39;,&#39; - &#39;,sd);\r\n          -- set LongDesc = replace(LongDesc,&#39;\\n&#39;, &#39;&lt;br/&gt;&#39;);\r\n           set BugList=CONCAT(BugList,&#39;&lt;br/&gt;&#39;,&#39;&lt;tr bgcolor=lightgrey&gt;&lt;td width=420&gt;&#39;,&#39;&amp;#160;&#39;,&#39;************************************************************************************************&#39;,&#39;&lt;br/&gt;&#39;);\r\n           set BugList=CONCAT(BugList,\r\n           &#39;&amp;#160;&#39;,&#39;* &#39;,&#39;&lt;a id=&#39;,&#39;#&#39;,bid,&#39;&gt;&#39;,&#39;&lt;font color=red&gt;&#39;,bid,&#39;&lt;/font&gt;&#39;,&#39;&lt;/a&gt;&#39;,&#39; - &#39;,&#39;&lt;b&gt;&#39;,sd,&#39;&lt;/b&gt;&#39;,&#39;&lt;br/&gt;&#39;,\r\n           &#39;&amp;#160;&#39;,&#39;* Version: 2.3.0 | Component: &#39;,cname,&#39; | Platform: &#39;,rpl,&#39; | OS: &#39;,os,&#39; | Severity: &#39;,bs,&#39;&lt;br/&gt;&#39;,\r\n           &#39;&amp;#160;&#39;,&#39;************************************************************************************************&#39;,&#39;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td width=420&gt;&#39;,&#39;&lt;br/&gt;&#39;,LongDesc,&#39;&lt;br/&gt;&#39;);\r\n           set prevbid=bid;\r\n       end if;\r\n       \r\n     until done end repeat;\r\n    CLOSE c_1;\r\n    set BugList=CONCAT(&#39;&lt;tr&gt;&lt;td&gt;&#39;,&#39;&lt;br/&gt;&#39;,&#39;&lt;b&gt;==================================== CONDENSED LIST ======================================&lt;/b&gt;&#39;,&#39;&lt;br/&gt;&#39;,\r\n\t\t\t\t  BugShortList,&#39;&lt;/td&gt;&lt;/tr&gt;&#39;,BugList);\r\n      set BugList=CONCAT(BugList,&#39;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&#39;);\r\n    set BugList = replace(BugList,&#39;\\n&#39;, &#39;&lt;br/&gt;&#39;);\r\nEND Block1\r\n```\r\n\r\nMySQL Workbench returns the string data when I make the call\r\n\r\n```sql\r\nset @list=&quot;&quot;;\r\ncall get_fixed_web_bugs_html(@list);\r\nselect @list \r\n```\r\n\r\nI&#39;m not quite sure if java accepts big string data as result set. Any tips?\r\n\r\nMy java call:\r\n\r\n```java\r\nStringBuilder out = new StringBuilder(&quot;&quot;);\r\nCallableStatement cs = conn.prepareCall(&quot;{ CALL get_html(?)}&quot;);\r\ncs.registerOutParameter(1, Types.LONGVARBINARY);\r\ncs.setString(1, out.toString());\r\n\r\nResultSet rs = cs.executeQuery();\r\nwhile (rs.next()) {\r\n\tSystem.out.println(String.format(&quot;%s - %s&quot;, rs.getString(&quot;out&quot;)));\r\n}\r\n```\r\n\r\n`rs` seems to be empty.","title":"MySQL stored procedure not returning result set","body":"<p>I have a MySQL stored procedure that does a select on a table, then wrap the result using concatenated string (HTML code). I get data back when ran through Workbench, but the Java result set seems empty. Pretty much it returns one big line of concatenated string data (over 1000 lines that creates HTML table out of it).</p>\n<pre class=\"lang-sql prettyprint-override\"><code>CREATE DEFINER=`root`@`localhost` PROCEDURE `get_html`(\n    INOUT BugList varchar(30000))\n\n    Block1: BEGIN\n    DECLARE done INT DEFAULT 0;\n    DECLARE LongDesc Varchar(10000) DEFAULT &quot;&quot;;\n    DECLARE BugShortList Varchar(10000) DEFAULT &quot;&quot;;\n    DECLARE sd varchar(1000) DEFAULT &quot;&quot;;\n    declare cname char(20) default &quot;&quot;;\n    DECLARE bid int DEFAULT 0;\n    DECLARE cid int DEFAULT 0;\n    declare prevbid int default 0;\n    declare rpl varchar (64) default &quot;&quot;;\n    declare os varchar (64) default &quot;&quot;;\n    declare bs varchar (64) default &quot;&quot;;\n    declare dts date;\n\n    DECLARE c_1 CURSOR FOR select   b.bug_id,b.short_desc,l.thetext,b.component_id,b.rep_platform,b.op_sys,b.bug_severity\n    from bugs b \n    INNER JOIN longdescs l ON b.bug_id=l.bug_id \n    where component_id in (4,5,6,7,15,16,19,25,26,28,29,32,33,35) and \n    b.bug_id &gt; 100 and\n    version='1.0' and \n    resolution='fixed' \n    order by b.bug_id desc;\n\n    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;\n\n    set BugList= CONCAT('&lt;table style=&quot;2&quot;, border=&quot;1&quot;&gt;&lt;tr&gt;&lt;td   width=420&gt;','&lt;b&gt;=================================== EXPANDED LIST ==================================&lt;/b&gt;');\n\n    OPEN c_1;\n\n    repeat\n\n    FETCH c_1 INTO bid,sd,LongDesc,cid,rpl,os,bs;\n\n       if bid = prevbid then\n           if LongDesc &lt;&gt; &quot;&quot; then \n                 set BugList=CONCAT(BugList,'&lt;br/&gt;',LongDesc,'&lt;br/&gt;');\n                                   end if;\n       else\n           select name from components where cid=id into cname;\n           set BugShortList=CONCAT(BugShortList,'&lt;br/&gt;','&amp;#160;','&amp;#160;','&lt;a href=#',bid,'&gt;',bid,'&lt;/a&gt;',' - ',sd);\n          -- set LongDesc = replace(LongDesc,'\\n', '&lt;br/&gt;');\n           set BugList=CONCAT(BugList,'&lt;br/&gt;','&lt;tr bgcolor=lightgrey&gt;&lt;td width=420&gt;','&amp;#160;','************************************************************************************************','&lt;br/&gt;');\n           set BugList=CONCAT(BugList,\n           '&amp;#160;','* ','&lt;a id=','#',bid,'&gt;','&lt;font color=red&gt;',bid,'&lt;/font&gt;','&lt;/a&gt;',' - ','&lt;b&gt;',sd,'&lt;/b&gt;','&lt;br/&gt;',\n           '&amp;#160;','* Version: 2.3.0 | Component: ',cname,' | Platform: ',rpl,' | OS: ',os,' | Severity: ',bs,'&lt;br/&gt;',\n           '&amp;#160;','************************************************************************************************','&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td width=420&gt;','&lt;br/&gt;',LongDesc,'&lt;br/&gt;');\n           set prevbid=bid;\n       end if;\n       \n     until done end repeat;\n    CLOSE c_1;\n    set BugList=CONCAT('&lt;tr&gt;&lt;td&gt;','&lt;br/&gt;','&lt;b&gt;==================================== CONDENSED LIST ======================================&lt;/b&gt;','&lt;br/&gt;',\n                  BugShortList,'&lt;/td&gt;&lt;/tr&gt;',BugList);\n      set BugList=CONCAT(BugList,'&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;');\n    set BugList = replace(BugList,'\\n', '&lt;br/&gt;');\nEND Block1\n</code></pre>\n<p>MySQL Workbench returns the string data when I make the call</p>\n<pre class=\"lang-sql prettyprint-override\"><code>set @list=&quot;&quot;;\ncall get_fixed_web_bugs_html(@list);\nselect @list \n</code></pre>\n<p>I'm not quite sure if java accepts big string data as result set. Any tips?</p>\n<p>My java call:</p>\n<pre class=\"lang-java prettyprint-override\"><code>StringBuilder out = new StringBuilder(&quot;&quot;);\nCallableStatement cs = conn.prepareCall(&quot;{ CALL get_html(?)}&quot;);\ncs.registerOutParameter(1, Types.LONGVARBINARY);\ncs.setString(1, out.toString());\n\nResultSet rs = cs.executeQuery();\nwhile (rs.next()) {\n    System.out.println(String.format(&quot;%s - %s&quot;, rs.getString(&quot;out&quot;)));\n}\n</code></pre>\n<p><code>rs</code> seems to be empty.</p>\n"},{"tags":["java","redis","jedis"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":2,"creation_date":1643052310,"post_id":70839338,"comment_id":125232886,"body_markdown":"What do you think `match(&quot;*&quot;)` does?","body":"What do you think <code>match(&quot;*&quot;)</code> does?"},{"owner":{"account_id":3419544,"reputation":403,"user_id":17417246,"display_name":"Tony"},"score":0,"creation_date":1643053260,"post_id":70839338,"comment_id":125233240,"body_markdown":"Thanks I now have scanParams.match(partialkey+&quot;-*&quot;);","body":"Thanks I now have scanParams.match(partialkey+&quot;-*&quot;);"}],"answers":[{"tags":[],"owner":{"account_id":3419544,"reputation":403,"user_id":17417246,"display_name":"Tony"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1643052969,"creation_date":1643052969,"answer_id":70839515,"question_id":70839338,"body_markdown":"With thanks to shmosel\r\n\r\n``` \r\npublic List&lt;String&gt; getKeys(String partialkey) {\r\n\t\tScanParams scanParams = new ScanParams();\r\n\t\tscanParams.match(partialkey+&quot;-*&quot;);\r\n\t\tString cur = redis.clients.jedis.ScanParams.SCAN_POINTER_START;\r\n\t\tJedis jedis = jedisPool.getResource();\r\n\r\n\t\tList&lt;String&gt; keys = new ArrayList&lt;String&gt;();\r\n\t\tboolean cycleIsFinished = false;\r\n\t\twhile (!cycleIsFinished) {\r\n\t\t\tScanResult&lt;String&gt; scanResult = jedis.scan(cur, scanParams);\r\n\t\t\tcur = scanResult.getCursor();\r\n\t\t\tfor(String key :scanResult.getResult()) {\r\n\t\t\t\t//if(isKey(key, partialkey) ) {\r\n\t\t\t\t\tkeys.add(key);\r\n\t\t\t\t//}\r\n\t\t\t}\r\n\t\t\tif (cur.equals(&quot;0&quot;)) {\r\n\t\t\t\tcycleIsFinished = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn keys;\r\n\t}\r\n``` \r\n\r\n","title":"Return all keys from jedis that match a partial key","body":"<p>With thanks to shmosel</p>\n<pre><code>public List&lt;String&gt; getKeys(String partialkey) {\n        ScanParams scanParams = new ScanParams();\n        scanParams.match(partialkey+&quot;-*&quot;);\n        String cur = redis.clients.jedis.ScanParams.SCAN_POINTER_START;\n        Jedis jedis = jedisPool.getResource();\n\n        List&lt;String&gt; keys = new ArrayList&lt;String&gt;();\n        boolean cycleIsFinished = false;\n        while (!cycleIsFinished) {\n            ScanResult&lt;String&gt; scanResult = jedis.scan(cur, scanParams);\n            cur = scanResult.getCursor();\n            for(String key :scanResult.getResult()) {\n                //if(isKey(key, partialkey) ) {\n                    keys.add(key);\n                //}\n            }\n            if (cur.equals(&quot;0&quot;)) {\n                cycleIsFinished = true;\n            }\n        }\n        return keys;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25332634,"reputation":11,"user_id":19152228,"display_name":"Andrii Popovych"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1652953145,"creation_date":1652953145,"answer_id":72302180,"question_id":70839338,"body_markdown":"Use Redis command [KEYS][1] to return all keys matching pattern\r\n\r\n\r\n    KEYS 1111-*\r\n[Redis example][2]\r\n\r\nJava example\r\n\r\n    private List&lt;String&gt; getKeys(String partialKey) {\r\n        try (Jedis jedis = jedisPool.getResource()) {\r\n            return jedis.keys(partialKey + &quot;-*&quot;)\r\n                    .stream()\r\n                    .toList();\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://redis.io/commands/keys/\r\n  [2]: https://i.stack.imgur.com/n858j.png","title":"Return all keys from jedis that match a partial key","body":"<p>Use Redis command <a href=\"https://redis.io/commands/keys/\" rel=\"nofollow noreferrer\">KEYS</a> to return all keys matching pattern</p>\n<pre><code>KEYS 1111-*\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/n858j.png\" rel=\"nofollow noreferrer\">Redis example</a></p>\n<p>Java example</p>\n<pre><code>private List&lt;String&gt; getKeys(String partialKey) {\n    try (Jedis jedis = jedisPool.getResource()) {\n        return jedis.keys(partialKey + &quot;-*&quot;)\n                .stream()\n                .toList();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16135529,"reputation":49,"user_id":11648074,"display_name":"Otman El"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666878438,"creation_date":1666878438,"answer_id":74223161,"question_id":70839338,"body_markdown":"Be carefull with jedis.keys() method, it could ruin performance:\r\n\r\n&gt; Warning: consider KEYS as a command that should only be used in production environments with extreme care. It may ruin performance when it is executed against large databases. This command is intended for debugging and special operations, such as changing your keyspace layout. Don&#39;t use KEYS in your regular application code. If you&#39;re looking for a way to find keys in a subset of your keyspace, consider using SCAN or sets.\r\n\r\nMore explanation [here][1], use SCAN is good alternative\r\n\r\n\r\n  [1]: https://redis.io/commands/keys/","title":"Return all keys from jedis that match a partial key","body":"<p>Be carefull with jedis.keys() method, it could ruin performance:</p>\n<blockquote>\n<p>Warning: consider KEYS as a command that should only be used in production environments with extreme care. It may ruin performance when it is executed against large databases. This command is intended for debugging and special operations, such as changing your keyspace layout. Don't use KEYS in your regular application code. If you're looking for a way to find keys in a subset of your keyspace, consider using SCAN or sets.</p>\n</blockquote>\n<p>More explanation <a href=\"https://redis.io/commands/keys/\" rel=\"nofollow noreferrer\">here</a>, use SCAN is good alternative</p>\n"}],"owner":{"account_id":3419544,"reputation":403,"user_id":17417246,"display_name":"Tony"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1563,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":3,"score":0,"last_activity_date":1666878438,"creation_date":1643052071,"question_id":70839338,"body_markdown":"In Redis cache I have 3 keys\r\n\r\n1111-2222-4444\r\n1111-2222-3333\r\n1112-2222-3333\r\n\r\nI have a partial key 1111, and I want to return the two keys 1111-2222-4444, 1111-2222-3333\r\n\r\nI have the following code\r\n```\r\npublic List&lt;String&gt; getKeys(String partialkey) {\r\n\t\tScanParams scanParams = new ScanParams();\r\n\t\tscanParams.match(&quot;*&quot;);\r\n\t\tString cur = redis.clients.jedis.ScanParams.SCAN_POINTER_START;\r\n\t\tJedis jedis = jedisPool.getResource();\r\n\r\n\t\tList&lt;String&gt; keys = new ArrayList&lt;String&gt;();\r\n\t\tboolean cycleIsFinished = false;\r\n\t\twhile (!cycleIsFinished) {\r\n\t\t\tScanResult&lt;String&gt; scanResult = jedis.scan(cur, scanParams);\r\n\t\t\tcur = scanResult.getCursor();\r\n\t\t\tfor(String key :scanResult.getResult()) {\r\n\t\t\t\tif(isKey(key, partialkey) ) {\r\n\t\t\t\t\tkeys.add(key);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (cur.equals(&quot;0&quot;)) {\r\n\t\t\t\tcycleIsFinished = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn keys;\r\n\t}\r\n```\r\nAnd a method to match for partial key\r\n\r\n```\r\n\tprivate boolean isKey(String key, String match) {\r\n\t\tString[] fields = key.split(&quot;-&quot;);\r\n\t\tif(match.equals(fields[0])) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n```\r\n\r\nNow this works, but it seems very clunky, there could be thousands of keys, to search through.\r\nMy question is, is there a pure redis way to do this.\r\nWhere it only returns the two keys, that the partial key matches to.\r\n\r\n\r\n\r\n","title":"Return all keys from jedis that match a partial key","body":"<p>In Redis cache I have 3 keys</p>\n<p>1111-2222-4444\n1111-2222-3333\n1112-2222-3333</p>\n<p>I have a partial key 1111, and I want to return the two keys 1111-2222-4444, 1111-2222-3333</p>\n<p>I have the following code</p>\n<pre><code>public List&lt;String&gt; getKeys(String partialkey) {\n        ScanParams scanParams = new ScanParams();\n        scanParams.match(&quot;*&quot;);\n        String cur = redis.clients.jedis.ScanParams.SCAN_POINTER_START;\n        Jedis jedis = jedisPool.getResource();\n\n        List&lt;String&gt; keys = new ArrayList&lt;String&gt;();\n        boolean cycleIsFinished = false;\n        while (!cycleIsFinished) {\n            ScanResult&lt;String&gt; scanResult = jedis.scan(cur, scanParams);\n            cur = scanResult.getCursor();\n            for(String key :scanResult.getResult()) {\n                if(isKey(key, partialkey) ) {\n                    keys.add(key);\n                }\n            }\n            if (cur.equals(&quot;0&quot;)) {\n                cycleIsFinished = true;\n            }\n        }\n        return keys;\n    }\n</code></pre>\n<p>And a method to match for partial key</p>\n<pre><code>    private boolean isKey(String key, String match) {\n        String[] fields = key.split(&quot;-&quot;);\n        if(match.equals(fields[0])) {\n            return true;\n        }\n        return false;\n    }\n</code></pre>\n<p>Now this works, but it seems very clunky, there could be thousands of keys, to search through.\nMy question is, is there a pure redis way to do this.\nWhere it only returns the two keys, that the partial key matches to.</p>\n"},{"tags":["java","ssl","active-directory","ldap","tls1.2"],"comments":[{"owner":{"account_id":31959,"reputation":10608,"user_id":88122,"accept_rate":0,"display_name":"jwilleke"},"score":1,"creation_date":1666853709,"post_id":74216986,"comment_id":131034607,"body_markdown":"Tell us what you have tried and show logs or results and the code where you change the attribute values. Are you setting this on creation or After creation?\nI doubt that the values could be changed by a &quot;normal user account&quot;.\nand Read:\nhttps://stackoverflow.com/help/how-to-ask","body":"Tell us what you have tried and show logs or results and the code where you change the attribute values. Are you setting this on creation or After creation? I doubt that the values could be changed by a &quot;normal user account&quot;. and Read: <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1666859117,"post_id":74216986,"comment_id":131036389,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"comments":[{"owner":{"account_id":24315810,"reputation":1,"user_id":18257005,"display_name":"Sibi KVR"},"score":0,"creation_date":1666954610,"post_id":74223082,"comment_id":131062072,"body_markdown":".pfx certificate got. can we import this certificate to java code without any conversions","body":".pfx certificate got. can we import this certificate to java code without any conversions"},{"owner":{"account_id":1239958,"reputation":39024,"user_id":1202807,"display_name":"Gabriel Luci"},"score":0,"creation_date":1666961050,"post_id":74223082,"comment_id":131064155,"body_markdown":"The pfx is the private key? You don&#39;t need the private key. You just need to trust the root certificate. I&#39;m not a Java developer, but there&#39;s an example of using LDAPS in Java here (note the `TRUST_STORE`): https://bitbucket.org/jwilleke/examples/src/91c2df9b5481b30e5ca213a7baa0ce7e0a04752c/Examples-JNDI/src/com/willeke/samples/ldap/jndi/ADConnection.java?at=master&amp;fileviewer=file-view-default","body":"The pfx is the private key? You don&#39;t need the private key. You just need to trust the root certificate. I&#39;m not a Java developer, but there&#39;s an example of using LDAPS in Java here (note the <code>TRUST_STORE</code>): <a href=\"https://bitbucket.org/jwilleke/examples/src/91c2df9b5481b30e5ca213a7baa0ce7e0a04752c/Examples-JNDI/src/com/willeke/samples/ldap/jndi/ADConnection.java?at=master&amp;fileviewer=file-view-default\" rel=\"nofollow noreferrer\">bitbucket.org/jwilleke/examples/src/&hellip;</a>"},{"owner":{"account_id":24315810,"reputation":1,"user_id":18257005,"display_name":"Sibi KVR"},"score":0,"creation_date":1667023524,"post_id":74223082,"comment_id":131077212,"body_markdown":"Why this error javax.naming.CommunicationException: simple bind failed: host:636 [Root exception is java.net.SocketException: Connection or outbound has closed]","body":"Why this error javax.naming.CommunicationException: simple bind failed: host:636 [Root exception is java.net.SocketException: Connection or outbound has closed]"}],"tags":[],"owner":{"account_id":1239958,"reputation":39024,"user_id":1202807,"display_name":"Gabriel Luci"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666878087,"creation_date":1666878087,"answer_id":74223082,"question_id":74216986,"body_markdown":"I&#39;m going to assume that you mean that you need to change it *to* a normal user account.\r\n\r\nWhen you create an account and don&#39;t set the password, [`userAccountControl`](https://learn.microsoft.com/en-us/troubleshoot/windows-server/identity/useraccountcontrol-manipulate-account-properties) has to be set either disabled (512 + 2), or password not required (512 + 32).\r\n\r\nIf you want a normal enabled account (512), you have to first set the password. The attribute for the password is [`unicodePwd`](https://learn.microsoft.com/en-us/openspecs/windows_protocols/ms-adts/6e803168-f140-4d23-b2d3-c3a8ab5917d2). It is a little tricky to set. There are two requirements:\r\n\r\n1. The connection has to be encrypted. This can be by LDAPS (LDAP over SSL).\r\n2. The password value must be enclosed in double quotes and encoded in UTF-16.\r\n\r\nThere is an example [here of how to do it in Java](https://ldapwiki.com/wiki/Example%20-%20Active%20Directory%20Change%20Password%20JNDI):\r\n\r\n\tString quotedPassword = &quot;\\&quot;&quot; + password + &quot;\\&quot;&quot;;\r\n\tchar unicodePwd[] = quotedPassword.toCharArray();\r\n\tbyte pwdArray[] = new byte[unicodePwd.length * 2];\r\n\tfor (int i = 0; i &lt; unicodePwd.length; i++)\r\n\t{\r\n\t    pwdArray[i * 2 + 1] = (byte) (unicodePwd[i] &gt;&gt;&gt; 8);\r\n\t    pwdArray[i * 2 + 0] = (byte) (unicodePwd[i] &amp; 0xff);\r\n\t}\r\n\tSystem.out.print(&quot;encoded password: &quot;);\r\n\tfor (int i = 0; i &lt; pwdArray.length; i++)\r\n\t{\r\n\t    System.out.print(pwdArray[i] + &quot; &quot;);\r\n\t}\r\n\tSystem.out.println();\r\n\tModificationItem[] mods = new ModificationItem[1];\r\n\tmods[0] = new ModificationItem(DirContext.REPLACE_ATTRIBUTE, new BasicAttribute(&quot;UnicodePwd&quot;, pwdArray));\r\n\tldapContext.modifyAttributes(&quot;cn=&quot; + username + BASE_NAME, mods);\r\n\r\nYou can modify this code to fit yours.","title":"how to change useraccountcontrol attribute from 544 to 512 by ldap java","body":"<p>I'm going to assume that you mean that you need to change it <em>to</em> a normal user account.</p>\n<p>When you create an account and don't set the password, <a href=\"https://learn.microsoft.com/en-us/troubleshoot/windows-server/identity/useraccountcontrol-manipulate-account-properties\" rel=\"nofollow noreferrer\"><code>userAccountControl</code></a> has to be set either disabled (512 + 2), or password not required (512 + 32).</p>\n<p>If you want a normal enabled account (512), you have to first set the password. The attribute for the password is <a href=\"https://learn.microsoft.com/en-us/openspecs/windows_protocols/ms-adts/6e803168-f140-4d23-b2d3-c3a8ab5917d2\" rel=\"nofollow noreferrer\"><code>unicodePwd</code></a>. It is a little tricky to set. There are two requirements:</p>\n<ol>\n<li>The connection has to be encrypted. This can be by LDAPS (LDAP over SSL).</li>\n<li>The password value must be enclosed in double quotes and encoded in UTF-16.</li>\n</ol>\n<p>There is an example <a href=\"https://ldapwiki.com/wiki/Example%20-%20Active%20Directory%20Change%20Password%20JNDI\" rel=\"nofollow noreferrer\">here of how to do it in Java</a>:</p>\n<pre><code>String quotedPassword = &quot;\\&quot;&quot; + password + &quot;\\&quot;&quot;;\nchar unicodePwd[] = quotedPassword.toCharArray();\nbyte pwdArray[] = new byte[unicodePwd.length * 2];\nfor (int i = 0; i &lt; unicodePwd.length; i++)\n{\n    pwdArray[i * 2 + 1] = (byte) (unicodePwd[i] &gt;&gt;&gt; 8);\n    pwdArray[i * 2 + 0] = (byte) (unicodePwd[i] &amp; 0xff);\n}\nSystem.out.print(&quot;encoded password: &quot;);\nfor (int i = 0; i &lt; pwdArray.length; i++)\n{\n    System.out.print(pwdArray[i] + &quot; &quot;);\n}\nSystem.out.println();\nModificationItem[] mods = new ModificationItem[1];\nmods[0] = new ModificationItem(DirContext.REPLACE_ATTRIBUTE, new BasicAttribute(&quot;UnicodePwd&quot;, pwdArray));\nldapContext.modifyAttributes(&quot;cn=&quot; + username + BASE_NAME, mods);\n</code></pre>\n<p>You can modify this code to fit yours.</p>\n"}],"owner":{"account_id":24315810,"reputation":1,"user_id":18257005,"display_name":"Sibi KVR"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":750,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1666878087,"creation_date":1666846680,"question_id":74216986,"body_markdown":"javax.naming.OperationNotSupportedException: [LDAP: error code 53 - 0000052D: SvcErr: DSID-031A12E8, problem 5003 (WILL_NOT_PERFORM), data 0\r\n\r\n```\r\n DirContext connection ;\r\n\t\t\r\n\t\tProperties env = new Properties();\r\n\t\tenv.put(Context.INITIAL_CONTEXT_FACTORY, &quot;com.sun.jndi.ldap.LdapCtxFactory&quot;);\r\n\t\tenv.put(Context.PROVIDER_URL, &quot;ldap://localhost:10389&quot;);\r\n\t\tenv.put(Context.SECURITY_PRINCIPAL, &quot;uid=admin, ou=system&quot;);\r\n\t\tenv.put(Context.SECURITY_CREDENTIALS, &quot;secret&quot;);\r\n```\r\n.\r\nWhenever am creating user through Java code. the user is enable and passwordNOtRequited type. but i need to change this as a normal user account","title":"how to change useraccountcontrol attribute from 544 to 512 by ldap java","body":"<p>javax.naming.OperationNotSupportedException: [LDAP: error code 53 - 0000052D: SvcErr: DSID-031A12E8, problem 5003 (WILL_NOT_PERFORM), data 0</p>\n<pre><code> DirContext connection ;\n        \n        Properties env = new Properties();\n        env.put(Context.INITIAL_CONTEXT_FACTORY, &quot;com.sun.jndi.ldap.LdapCtxFactory&quot;);\n        env.put(Context.PROVIDER_URL, &quot;ldap://localhost:10389&quot;);\n        env.put(Context.SECURITY_PRINCIPAL, &quot;uid=admin, ou=system&quot;);\n        env.put(Context.SECURITY_CREDENTIALS, &quot;secret&quot;);\n</code></pre>\n<p>.\nWhenever am creating user through Java code. the user is enable and passwordNOtRequited type. but i need to change this as a normal user account</p>\n"},{"tags":["java","gradle","intellij-idea","jfreechart"],"comments":[{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1666131591,"post_id":74117706,"comment_id":130862246,"body_markdown":"For reference, version 1.5.3 is current.","body":"For reference, version 1.5.3 is current."},{"owner":{"account_id":18559672,"reputation":300,"user_id":13523946,"display_name":"notAPPP"},"score":0,"creation_date":1666134851,"post_id":74117706,"comment_id":130862798,"body_markdown":"Did you add dependency to your build.gradle?","body":"Did you add dependency to your build.gradle?"},{"owner":{"account_id":17693330,"reputation":3781,"user_id":12844632,"display_name":"Egor Klepikov"},"score":1,"creation_date":1666160300,"post_id":74117706,"comment_id":130866618,"body_markdown":"Since you&#39;re using Gradle as a build system Project Structure settings might be lost after the project reload. Instead of manually adding dependencies to your project you can add https://mvnrepository.com/artifact/org.jfree/jcommon/1.0.23 and https://mvnrepository.com/artifact/org.jfree/jfreechart/1.0.19 to your build.gradle file and reload the project.","body":"Since you&#39;re using Gradle as a build system Project Structure settings might be lost after the project reload. Instead of manually adding dependencies to your project you can add <a href=\"https://mvnrepository.com/artifact/org.jfree/jcommon/1.0.23\" rel=\"nofollow noreferrer\">mvnrepository.com/artifact/org.jfree/jcommon/1.0.23</a> and <a href=\"https://mvnrepository.com/artifact/org.jfree/jfreechart/1.0.19\" rel=\"nofollow noreferrer\">mvnrepository.com/artifact/org.jfree/jfreechart/1.0.19</a> to your build.gradle file and reload the project."},{"owner":{"account_id":26528655,"reputation":145,"user_id":20161220,"display_name":"Lacie"},"score":0,"creation_date":1666190941,"post_id":74117706,"comment_id":130878029,"body_markdown":"@EgorKlepikov It works. Thanks for the info! For some reason, I thought build.gradle is used to add springboot-related dependencies only and other libraries should be added via Project Structure.","body":"@EgorKlepikov It works. Thanks for the info! For some reason, I thought build.gradle is used to add springboot-related dependencies only and other libraries should be added via Project Structure."}],"owner":{"account_id":26528655,"reputation":145,"user_id":20161220,"display_name":"Lacie"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":414,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1666877965,"creation_date":1666128882,"question_id":74117706,"body_markdown":"I&#39;m using IntelliJ to build a Spring Boot Java project with Gradle. I have `jcommon-1.0.23.jar` and `jfreechart-1.0.19.jar` in a libs directory and follow [these solutions][1] to add Jar files as libraries in IntelliJ.\r\n\r\nIt works fine in another project, but in this project, nothing works and I got the error\r\n\r\n&gt; Task :compileJava D:\\dev\\logsview\\logsview\\src\\main\\java\\com\\tool\\logsview\\generic\\entity\\GanttChart.java:4: error: package org.jfree.chart does not exist import org.jfree.chart.ChartPanel;\r\n\r\nThe weird thing is after some tries, the IDEA doesn&#39;t show errors, but still fails when compiled.\r\n\r\nJava file:  \r\n[![enter image description here][2]][2]\r\n\r\nLib dir structure:  \r\n[![enter image description here][3]][3]\r\n\r\nLib added in Project Structures Module:  \r\n[![enter image description here][4]][4]\r\n\r\nLib added in Project Structures Lib:\r\n[![enter image description here][5]][5]\r\n\r\nI have tried restarting the IDEA, recompiling, compiling using the command line and IDEA, etc.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/1051640/correct-way-to-add-external-jars-lib-jar-to-an-intellij-idea-project\r\n  [2]: https://i.stack.imgur.com/Yw1Pg.png\r\n  [3]: https://i.stack.imgur.com/NjwZw.png\r\n  [4]: https://i.stack.imgur.com/3hRct.png\r\n  [5]: https://i.stack.imgur.com/s8OnP.png\r\n","title":"Gradle &quot;package org.jfree.chart does not exist&quot; in IntelliJ","body":"<p>I'm using IntelliJ to build a Spring Boot Java project with Gradle. I have <code>jcommon-1.0.23.jar</code> and <code>jfreechart-1.0.19.jar</code> in a libs directory and follow <a href=\"https://stackoverflow.com/questions/1051640/correct-way-to-add-external-jars-lib-jar-to-an-intellij-idea-project\">these solutions</a> to add Jar files as libraries in IntelliJ.</p>\n<p>It works fine in another project, but in this project, nothing works and I got the error</p>\n<blockquote>\n<p>Task :compileJava D:\\dev\\logsview\\logsview\\src\\main\\java\\com\\tool\\logsview\\generic\\entity\\GanttChart.java:4: error: package org.jfree.chart does not exist import org.jfree.chart.ChartPanel;</p>\n</blockquote>\n<p>The weird thing is after some tries, the IDEA doesn't show errors, but still fails when compiled.</p>\n<p>Java file:<br />\n<a href=\"https://i.stack.imgur.com/Yw1Pg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Yw1Pg.png\" alt=\"enter image description here\" /></a></p>\n<p>Lib dir structure:<br />\n<a href=\"https://i.stack.imgur.com/NjwZw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NjwZw.png\" alt=\"enter image description here\" /></a></p>\n<p>Lib added in Project Structures Module:<br />\n<a href=\"https://i.stack.imgur.com/3hRct.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3hRct.png\" alt=\"enter image description here\" /></a></p>\n<p>Lib added in Project Structures Lib:\n<a href=\"https://i.stack.imgur.com/s8OnP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/s8OnP.png\" alt=\"enter image description here\" /></a></p>\n<p>I have tried restarting the IDEA, recompiling, compiling using the command line and IDEA, etc.</p>\n"},{"tags":["java","arrays","for-loop","char"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":2,"creation_date":1666876029,"post_id":74222425,"comment_id":131042278,"body_markdown":"You seem to be making this more complex than it need be. A: change all input characters to the same case and B: ignore any character that&#39;s not a letter. That&#39;s it - now you can get on with implementing the actual cipher ;)","body":"You seem to be making this more complex than it need be. A: change all input characters to the same case and B: ignore any character that&#39;s not a letter. That&#39;s it - now you can get on with implementing the actual cipher ;)"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1666877852,"post_id":74222425,"comment_id":131042993,"body_markdown":"The term is cipher, not chiffre (unless you&#39;re talking about [C&#233;sar Chiffre](https://en.wikipedia.org/wiki/C%C3%A9sar_Chiffre), which is unlikely given the context ;)).","body":"The term is cipher, not chiffre (unless you&#39;re talking about <a href=\"https://en.wikipedia.org/wiki/C%C3%A9sar_Chiffre\" rel=\"nofollow noreferrer\">C&#233;sar Chiffre</a>, which is unlikely given the context ;))."}],"answers":[{"tags":[],"owner":{"account_id":26493810,"reputation":323,"user_id":20131874,"display_name":"mmartinez04"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1666877941,"creation_date":1666877564,"answer_id":74222962,"question_id":74222425,"body_markdown":"I would tackle the problem by iterating through the String and considering the possible cases for each letter\r\n\r\n- Uppercase Letter\r\n- Lowercase Letter\r\n- Special Character\r\n\r\n      public static String encrypt(String text, int number) {\r\n\r\n        //String to hold our return value\r\n        String toReturn = &quot;&quot;;\r\n        \r\n        //Iterate across the string at each character\r\n        for (char c : text.toCharArray()){\r\n            \r\n            if (Character.isUpperCase(c)){\r\n\r\n                /* If uppercase, add number to the character\r\n                If the character plus number is more than 90,\r\n                subtract 25 [uppercase letters have ASCII 65 to 90] */\r\n                toReturn += c + number &gt; 90 ? (char)(c + number - 25) : (char)(c + number);\r\n\r\n            } else if (Character.isLowerCase(c)){\r\n\r\n                /* If lowercase, add number to the character\r\n                If the character plus number is more than 122,\r\n                subtract 25 [uppercase letters have ASCII 97 to 122] */\r\n                toReturn += c + number &gt; 122 ? (char)(c + number - 25) : (char)(c + number);\r\n\r\n            } else {\r\n\r\n                // For other characters, just add it onto the return string\r\n                toReturn += c;\r\n\r\n            }\r\n       \r\n        }\r\n\r\n        return toReturn;\r\n\r\n      }\r\n\r\n**Explanation of Code**\r\n\r\nYou might be wondering what the following code does\r\n\r\n`toReturn += c + number &gt; 90 ? (char)(c + number - 25) : (char)(c + number)`\r\n\r\nThe structure is\r\n\r\n`toReturn += CONDITION ? A : B`\r\n\r\nIt basically reads as \r\n\r\n`IF CONDITION IS TRUE, toReturn += A, ELSE toReturn += B`\r\n\r\nThe `CONDITION` is simply `c + number &gt; 90` since we want to make sure that we are sticking with uppercase letters only\r\n\r\nWhen this is true (`A`), we subtract `25` from `c + number`, otherwise (`B`) we just keep it as `c + number` (B)\r\n\r\nWe then cast this value into a `char` since it is initially an `int`","title":"Caesar cipher by comparing char array with two arrays","body":"<p>I would tackle the problem by iterating through the String and considering the possible cases for each letter</p>\n<ul>\n<li><p>Uppercase Letter</p>\n</li>\n<li><p>Lowercase Letter</p>\n</li>\n<li><p>Special Character</p>\n<pre><code>public static String encrypt(String text, int number) {\n\n  //String to hold our return value\n  String toReturn = &quot;&quot;;\n\n  //Iterate across the string at each character\n  for (char c : text.toCharArray()){\n\n      if (Character.isUpperCase(c)){\n\n          /* If uppercase, add number to the character\n          If the character plus number is more than 90,\n          subtract 25 [uppercase letters have ASCII 65 to 90] */\n          toReturn += c + number &gt; 90 ? (char)(c + number - 25) : (char)(c + number);\n\n      } else if (Character.isLowerCase(c)){\n\n          /* If lowercase, add number to the character\n          If the character plus number is more than 122,\n          subtract 25 [uppercase letters have ASCII 97 to 122] */\n          toReturn += c + number &gt; 122 ? (char)(c + number - 25) : (char)(c + number);\n\n      } else {\n\n          // For other characters, just add it onto the return string\n          toReturn += c;\n\n      }\n\n  }\n\n  return toReturn;\n\n}\n</code></pre>\n</li>\n</ul>\n<p><strong>Explanation of Code</strong></p>\n<p>You might be wondering what the following code does</p>\n<p><code>toReturn += c + number &gt; 90 ? (char)(c + number - 25) : (char)(c + number)</code></p>\n<p>The structure is</p>\n<p><code>toReturn += CONDITION ? A : B</code></p>\n<p>It basically reads as</p>\n<p><code>IF CONDITION IS TRUE, toReturn += A, ELSE toReturn += B</code></p>\n<p>The <code>CONDITION</code> is simply <code>c + number &gt; 90</code> since we want to make sure that we are sticking with uppercase letters only</p>\n<p>When this is true (<code>A</code>), we subtract <code>25</code> from <code>c + number</code>, otherwise (<code>B</code>) we just keep it as <code>c + number</code> (B)</p>\n<p>We then cast this value into a <code>char</code> since it is initially an <code>int</code></p>\n"}],"owner":{"account_id":26583720,"reputation":19,"user_id":20207972,"display_name":"cordesjan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74222962,"answer_count":1,"score":0,"last_activity_date":1666877941,"creation_date":1666875386,"question_id":74222425,"body_markdown":"I need to build a Caesar cipher that only encrypts letters, but no special characters. My concept was, to compare the input char[] with two alphabet char[]. If there is no match in a char, the char should be added to the String without being changed. The problem is that the not-changed char will be added to the String until the the for-loop ends. How do I fix this? \r\n\r\n\r\n```java\r\npublic static String encrypt(String text, int number) {\r\n\tString str = &quot;&quot;;\r\n\tchar[] chars = text.toCharArray();\r\n\tchar[] al = &quot;abcdefghijklmnopqrstuvwxyz&quot;.toCharArray();\r\n\tchar[] ab = &quot;abcdefghijklmnopqrstuvwxyz&quot;.toUpperCase().toCharArray();\r\n\r\n\tfor (char c : chars) {\r\n\t\tboolean match = false;\r\n\r\n\t\tfor (int i = 1; i &lt; chars.length - 1; i++) {\r\n\t\t\tfor (int k = 0; (k &lt; al.length || k &lt; ab.length) &amp;&amp; !match; k++) {\r\n\t\t\t\tmatch = (c == al[k] || c == ab[k]);\r\n\r\n\t\t\t\tif (match) {\r\n\t\t\t\t\tc += number;\r\n\t\t\t\t\tstr += c;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (!match) {\r\n\t\t\t\tstr += c;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn str;\r\n}\r\n```\r\n\r\nI already tried to put the case for not changing the string within the other for-loop, but it will be added until the for-loop has reached it&#39;s end.","title":"Caesar cipher by comparing char array with two arrays","body":"<p>I need to build a Caesar cipher that only encrypts letters, but no special characters. My concept was, to compare the input char[] with two alphabet char[]. If there is no match in a char, the char should be added to the String without being changed. The problem is that the not-changed char will be added to the String until the the for-loop ends. How do I fix this?</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static String encrypt(String text, int number) {\n    String str = &quot;&quot;;\n    char[] chars = text.toCharArray();\n    char[] al = &quot;abcdefghijklmnopqrstuvwxyz&quot;.toCharArray();\n    char[] ab = &quot;abcdefghijklmnopqrstuvwxyz&quot;.toUpperCase().toCharArray();\n\n    for (char c : chars) {\n        boolean match = false;\n\n        for (int i = 1; i &lt; chars.length - 1; i++) {\n            for (int k = 0; (k &lt; al.length || k &lt; ab.length) &amp;&amp; !match; k++) {\n                match = (c == al[k] || c == ab[k]);\n\n                if (match) {\n                    c += number;\n                    str += c;\n                }\n            }\n\n            if (!match) {\n                str += c;\n            }\n        }\n    }\n\n    return str;\n}\n</code></pre>\n<p>I already tried to put the case for not changing the string within the other for-loop, but it will be added until the for-loop has reached it's end.</p>\n"},{"tags":["java","spring-boot","gradle","spring-security","bouncycastle"],"answers":[{"tags":[],"owner":{"account_id":3156203,"reputation":4585,"user_id":2668564,"display_name":"jfk"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666877700,"creation_date":1666864740,"answer_id":74220196,"question_id":74217512,"body_markdown":"I could solve this by using gradle constraints\r\n\r\n     implementation &#39;org.springframework.cloud:spring-cloud-starter-sleuth&#39;\r\n     constraints {\r\n            implementation &#39;org.bouncycastle:bcprov-jdk15on:1.70&#39;\r\n            implementation &#39;org.bouncycastle:bcpkix-jdk15on:1.70&#39;\r\n            implementation &#39;org.bouncycastle:bcutil-jdk15on:1.70&#39;\r\n     }\r\n\r\nor by excluding it and adding the required dependencies manually\r\n\r\n    configurations.all {\r\n       exclude group:&quot;org.bouncycastle&quot;, module: &quot;bcprov-jdk15on&quot;\r\n       exclude group:&quot;org.bouncycastle&quot;, module: &quot;bcutil-jdk15on&quot;\r\n       exclude group:&quot;org.bouncycastle&quot;, module: &quot;bcpkix-jdk15on&quot;\r\n    }\r\n\r\n\r\n    implementation &#39;org.bouncycastle:bcprov-jdk18on:1.72&#39;\r\n    implementation &#39;org.bouncycastle:bcpkix-jdk18on:1.72&#39;\r\n    implementation &#39;org.bouncycastle:bcutil-jdk18on:1.72&#39;","title":"How to specify transitive dependency for bouncycastle in spring boot gradle project","body":"<p>I could solve this by using gradle constraints</p>\n<pre><code> implementation 'org.springframework.cloud:spring-cloud-starter-sleuth'\n constraints {\n        implementation 'org.bouncycastle:bcprov-jdk15on:1.70'\n        implementation 'org.bouncycastle:bcpkix-jdk15on:1.70'\n        implementation 'org.bouncycastle:bcutil-jdk15on:1.70'\n }\n</code></pre>\n<p>or by excluding it and adding the required dependencies manually</p>\n<pre><code>configurations.all {\n   exclude group:&quot;org.bouncycastle&quot;, module: &quot;bcprov-jdk15on&quot;\n   exclude group:&quot;org.bouncycastle&quot;, module: &quot;bcutil-jdk15on&quot;\n   exclude group:&quot;org.bouncycastle&quot;, module: &quot;bcpkix-jdk15on&quot;\n}\n\n\nimplementation 'org.bouncycastle:bcprov-jdk18on:1.72'\nimplementation 'org.bouncycastle:bcpkix-jdk18on:1.72'\nimplementation 'org.bouncycastle:bcutil-jdk18on:1.72'\n</code></pre>\n"}],"owner":{"account_id":3156203,"reputation":4585,"user_id":2668564,"display_name":"jfk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1226,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1666877700,"creation_date":1666851128,"question_id":74217512,"body_markdown":"We are using Spring `org.springframework.boot&quot; version &#39;2.7.5&#39;` where we identified some vulnerabilities with `bouncycastle` which has only transitive dependency in our project.\r\n\r\nWe wanted to specify the latest version of bouncycastle as it is described here [overriding-dependency-versions-with-spring-boot][1]\r\n\r\n    ext[&#39;bouncycastle.version&#39;] = &#39;1.72&#39;\r\n\r\nBust still after trying this, it shows the old dependency. Any idea what is missing ?\r\n\r\nDependency insight for `bouncycastle`\r\n\r\n    gradlew dependencyInsight --dependency bouncycastle --configuration compileClasspath\r\nResult\r\n\r\n    org.bouncycastle:bcpkix-jdk15on:1.69\r\n    \\--- org.springframework.security:spring-security-rsa:1.0.11.RELEASE\r\n         +--- org.springframework.cloud:spring-cloud-dependencies:2021.0.4\r\n         |    \\--- compileClasspath\r\n         \\--- org.springframework.cloud:spring-cloud-starter:3.1.4\r\n              +--- org.springframework.cloud:spring-cloud-dependencies:2021.0.4 (*)\r\n              \\--- org.springframework.cloud:spring-cloud-starter-sleuth:3.1.4\r\n                   +--- compileClasspath (requested org.springframework.cloud:spring-cloud-starter-sleuth)\r\n                   \\--- org.springframework.cloud:spring-cloud-dependencies:2021.0.4 (*)\r\n\r\n\r\n  [1]: https://spring.io/blog/2016/04/13/overriding-dependency-versions-with-spring-boot","title":"How to specify transitive dependency for bouncycastle in spring boot gradle project","body":"<p>We are using Spring <code>org.springframework.boot&quot; version '2.7.5'</code> where we identified some vulnerabilities with <code>bouncycastle</code> which has only transitive dependency in our project.</p>\n<p>We wanted to specify the latest version of bouncycastle as it is described here <a href=\"https://spring.io/blog/2016/04/13/overriding-dependency-versions-with-spring-boot\" rel=\"nofollow noreferrer\">overriding-dependency-versions-with-spring-boot</a></p>\n<pre><code>ext['bouncycastle.version'] = '1.72'\n</code></pre>\n<p>Bust still after trying this, it shows the old dependency. Any idea what is missing ?</p>\n<p>Dependency insight for <code>bouncycastle</code></p>\n<pre><code>gradlew dependencyInsight --dependency bouncycastle --configuration compileClasspath\n</code></pre>\n<p>Result</p>\n<pre><code>org.bouncycastle:bcpkix-jdk15on:1.69\n\\--- org.springframework.security:spring-security-rsa:1.0.11.RELEASE\n     +--- org.springframework.cloud:spring-cloud-dependencies:2021.0.4\n     |    \\--- compileClasspath\n     \\--- org.springframework.cloud:spring-cloud-starter:3.1.4\n          +--- org.springframework.cloud:spring-cloud-dependencies:2021.0.4 (*)\n          \\--- org.springframework.cloud:spring-cloud-starter-sleuth:3.1.4\n               +--- compileClasspath (requested org.springframework.cloud:spring-cloud-starter-sleuth)\n               \\--- org.springframework.cloud:spring-cloud-dependencies:2021.0.4 (*)\n</code></pre>\n"},{"tags":["java","spring","sap-commerce-cloud"],"answers":[{"tags":[],"owner":{"account_id":3392662,"reputation":5562,"user_id":2847159,"display_name":"mkysoft"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1666877249,"creation_date":1666877249,"answer_id":74222860,"question_id":74219094,"body_markdown":"You can use regex for single line of code like below:\r\n\r\n    final Pattern PATTERN_PAN = Pattern.compile(&quot;^[a-zA-Z]{5}[0-9]{4}[a-zA-Z]{1}$&quot;);\r\n    if (!PATTERN_PAN.matcher(pan).matches()) {\r\n        errors.rejectValue(&quot;pan&quot;, &quot;register.pan.invalid&quot;);\r\n    }","title":"Applying validation on attribute in Hybris","body":"<p>You can use regex for single line of code like below:</p>\n<pre><code>final Pattern PATTERN_PAN = Pattern.compile(&quot;^[a-zA-Z]{5}[0-9]{4}[a-zA-Z]{1}$&quot;);\nif (!PATTERN_PAN.matcher(pan).matches()) {\n    errors.rejectValue(&quot;pan&quot;, &quot;register.pan.invalid&quot;);\n}\n</code></pre>\n"}],"owner":{"account_id":26745867,"reputation":11,"user_id":20345940,"display_name":"user0809"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":137,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1666877249,"creation_date":1666859858,"question_id":74219094,"body_markdown":"I have created Pan attribute on registration page.  I have to apply validation for it like 1-5 digits will be alphabets, 6-9 will be numeric and tenth digit will be alphabet.\r\n\r\nI tried logic for length of Pan no it worked\r\n\tprivate void validatePan(final Errors errors, final String pan)\r\n\t{\r\n\t\t\r\n\t\tif (StringUtils.isEmpty(pan))\r\n\t\t{\r\n\t\t\terrors.rejectValue(&quot;pan&quot;, &quot;register.pan.invalid&quot;);\r\n\t\t}\r\n\t\telse if (StringUtils.length(pan) &gt; 10 || StringUtils.length(pan) &lt; 10)\r\n\t\t{\r\n\t\t\terrors.rejectValue(&quot;pan&quot;, &quot;register.pan.invalid&quot;);\r\n\t\t}\r\n\r\n\t}\r\nPlease provide the next part of validation as per requirement.\r\n\r\n","title":"Applying validation on attribute in Hybris","body":"<p>I have created Pan attribute on registration page.  I have to apply validation for it like 1-5 digits will be alphabets, 6-9 will be numeric and tenth digit will be alphabet.</p>\n<p>I tried logic for length of Pan no it worked\nprivate void validatePan(final Errors errors, final String pan)\n{</p>\n<pre><code>    if (StringUtils.isEmpty(pan))\n    {\n        errors.rejectValue(&quot;pan&quot;, &quot;register.pan.invalid&quot;);\n    }\n    else if (StringUtils.length(pan) &gt; 10 || StringUtils.length(pan) &lt; 10)\n    {\n        errors.rejectValue(&quot;pan&quot;, &quot;register.pan.invalid&quot;);\n    }\n\n}\n</code></pre>\n<p>Please provide the next part of validation as per requirement.</p>\n"},{"tags":["java","methods","call"],"comments":[{"owner":{"account_id":3076358,"reputation":512,"user_id":2605566,"display_name":"Godwin"},"score":0,"creation_date":1666772798,"post_id":74204496,"comment_id":131013010,"body_markdown":"bucket.consume(); does this means you are already using some queue mechanism in your project?","body":"bucket.consume(); does this means you are already using some queue mechanism in your project?"},{"owner":{"account_id":1014024,"reputation":191,"user_id":1026005,"accept_rate":67,"display_name":"jalmen"},"score":0,"creation_date":1666774871,"post_id":74204496,"comment_id":131013669,"body_markdown":"Yes this is just for Rate Limiter. It will check that calls are not made too often . But we have seen that the API we are calling is not stable and can sometimes giv&#233; a 429 although rate limit is not surpassed . But this is just a side note not important for the functionality i want to achiev by the question","body":"Yes this is just for Rate Limiter. It will check that calls are not made too often . But we have seen that the API we are calling is not stable and can sometimes giv&#233; a 429 although rate limit is not surpassed . But this is just a side note not important for the functionality i want to achiev by the question"}],"answers":[{"comments":[{"owner":{"account_id":1014024,"reputation":191,"user_id":1026005,"accept_rate":67,"display_name":"jalmen"},"score":0,"creation_date":1666777216,"post_id":74205086,"comment_id":131014437,"body_markdown":"Yes the IntegrationException needs to be handled in some way.  It is not thrown by method.get()","body":"Yes the IntegrationException needs to be handled in some way.  It is not thrown by method.get()"}],"tags":[],"owner":{"account_id":3284439,"reputation":39734,"user_id":2764255,"accept_rate":50,"display_name":"Nikos Paraskevopoulos"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1666874136,"creation_date":1666774776,"answer_id":74205086,"question_id":74204496,"body_markdown":"If you are at least on Java 8 with lambdas, you can do it like this:\r\n\r\n```java\r\n&lt;T&gt; T handleIntegration(Supplier&lt;T&gt; method) {\r\n  bucket.consume(); // I don&#39;t know how this fits - BEWARE!\r\n  T response = null;\r\n  try {\r\n    response = method.get();\r\n  } catch (IntegrationException e) {\r\n    if (e.getStatusCode() == 401) {\r\n      this.newAccessFromRefreshToken();\r\n      response = method.get();\r\n    } else if (e.getStatusCode() == 429){\r\n      Thread.sleep(500);\r\n      response = method.get();\r\n    } else\r\n      throw e;\r\n    }\r\n  }\r\n  // I don&#39;t know what you want to do with the response, returning it here for example\r\n  return response;\r\n}\r\n```\r\n\r\nAnd use it e.g. as:\r\n\r\n```java\r\nCustomersResponse customersReponse = handleIntegration(\r\n  CustomersResponse.class,\r\n  () -&gt; connection.customers.findCustomersResponse()\r\n);\r\n```\r\n\r\nCaveat: I assumed `IntegrationException` is an *unchecked* exception. If it is checked or in any case, e.g. `connection.customers.findCustomersResponse()` throws a checked exception, the provided `java.util.function.Supplier` will not do. You will have to provide a functional interface that throws the specific checked exception.\r\n\r\nUnrelated Note: `Thread.sleep()` is easy, but you may want to consider a better way, because `sleep` blocks the thread.","title":"Java Call method with return type and method to be called","body":"<p>If you are at least on Java 8 with lambdas, you can do it like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>&lt;T&gt; T handleIntegration(Supplier&lt;T&gt; method) {\n  bucket.consume(); // I don't know how this fits - BEWARE!\n  T response = null;\n  try {\n    response = method.get();\n  } catch (IntegrationException e) {\n    if (e.getStatusCode() == 401) {\n      this.newAccessFromRefreshToken();\n      response = method.get();\n    } else if (e.getStatusCode() == 429){\n      Thread.sleep(500);\n      response = method.get();\n    } else\n      throw e;\n    }\n  }\n  // I don't know what you want to do with the response, returning it here for example\n  return response;\n}\n</code></pre>\n<p>And use it e.g. as:</p>\n<pre class=\"lang-java prettyprint-override\"><code>CustomersResponse customersReponse = handleIntegration(\n  CustomersResponse.class,\n  () -&gt; connection.customers.findCustomersResponse()\n);\n</code></pre>\n<p>Caveat: I assumed <code>IntegrationException</code> is an <em>unchecked</em> exception. If it is checked or in any case, e.g. <code>connection.customers.findCustomersResponse()</code> throws a checked exception, the provided <code>java.util.function.Supplier</code> will not do. You will have to provide a functional interface that throws the specific checked exception.</p>\n<p>Unrelated Note: <code>Thread.sleep()</code> is easy, but you may want to consider a better way, because <code>sleep</code> blocks the thread.</p>\n"},{"tags":[],"owner":{"account_id":9850021,"reputation":411,"user_id":7296372,"display_name":"mrkachariker"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1666877215,"creation_date":1666774824,"answer_id":74205096,"question_id":74204496,"body_markdown":"You could try something like the following with the help of Java 8+ Functional Interfaces and Generics: \r\n\r\n```java\r\npublic &lt;T&gt; T handleIntegration(Supplier&lt;T&gt; supplier) {\r\n    bucket.consume();\r\n    T result = null;\r\n    try {\r\n        result = supplier.get();\r\n    } catch (IntegrationException e) {\r\n        if (e.getStatusCode() == 401) {\r\n            this.newAccessFromRefreshToken();\r\n            result = supplier.get();\r\n        } else if (e.getStatusCode() == 429) {\r\n            Thread.sleep(500);\r\n            result = supplier.get();\r\n        } else\r\n            throw e;\r\n    }\r\n    return result;\r\n}\r\n```\r\n\r\nThen you could call the method like this: \r\n\r\n```CustomersResponse returnVal = handleIntegration(connection.customers::findCustomersResponse)```\r\n\r\n","title":"Java Call method with return type and method to be called","body":"<p>You could try something like the following with the help of Java 8+ Functional Interfaces and Generics:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public &lt;T&gt; T handleIntegration(Supplier&lt;T&gt; supplier) {\n    bucket.consume();\n    T result = null;\n    try {\n        result = supplier.get();\n    } catch (IntegrationException e) {\n        if (e.getStatusCode() == 401) {\n            this.newAccessFromRefreshToken();\n            result = supplier.get();\n        } else if (e.getStatusCode() == 429) {\n            Thread.sleep(500);\n            result = supplier.get();\n        } else\n            throw e;\n    }\n    return result;\n}\n</code></pre>\n<p>Then you could call the method like this:</p>\n<p><code>CustomersResponse returnVal = handleIntegration(connection.customers::findCustomersResponse)</code></p>\n"}],"owner":{"account_id":1014024,"reputation":191,"user_id":1026005,"accept_rate":67,"display_name":"jalmen"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":379,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74205086,"answer_count":2,"score":0,"last_activity_date":1666877215,"creation_date":1666771483,"question_id":74204496,"body_markdown":"   I have lots of calls against a REST API that i want handled the same way.\r\n   Perform call, check if not authenticated. Refresh Token call again or if we hit rate \r\n   limit despite rate limit function. Sleep and perform call again.  \r\n\r\n  I would like to wrap this in a function that can be called in the way \r\n\r\n     ReturnType returnVal=  handleIntegration(ReturnType , functionToBecCalled)\r\n\r\nHow can this be achieved?\r\n\r\n  For the example below something like   \r\n\r\n    CustomersResponse customersReponse = handleIntegration(CustomersResponse , connection.customers.findCustomersResponse())\r\n    EmployeesReponse employeesRepsonse = handleIntegration(EmployeeResponse , connection.employees.findEmployeesResponse())\r\n\r\n  \r\n//Current Code\r\n\r\n                bucket.consume();\r\n    \t\t\tCustomersResponse customersResponse = null;\r\n    \t\t\ttry {\r\n    \t\t\t\t customersResponse = connection.customers.findCustomersResponse();\r\n    \t\t\t} catch (IntegrationException e) {\r\n    \t\t\t\tif (e.getStatusCode() == 401) {\r\n    \t\t\t\t\tthis.newAccessFromRefreshToken();\r\n    \t\t\t\t\tcustomersResponse = connection.customers.findCustomersResponse();\r\n    \t\t\t\t}else if (e.getStatusCode() == 429){\r\n    \t\t\t\t\tThread.sleep(500);\r\n    \t\t\t\t\tcustomersResponse = connection.customers.findCustomersResponse();\r\n    \t\t\t\t}else\r\n    \t\t\t\t\tthrow e;\r\n    \t\t\t}\t\r\n    \r\n            bucket.consume();\r\n    \t\t\tEmployeeResponse employeeResponse = null;\r\n    \t\t\ttry {\r\n    \t\t\t\t employeeResponse = connection.employees.findEmployeesResponse();\r\n    \t\t\t} catch (IntegrationException e) {\r\n    \t\t\t\tif (e.getStatusCode() == 401) {\r\n    \t\t\t\t\tthis.newAccessFromRefreshToken();\r\n    \t\t\t\t\temployeeResponse = connection.employees.findEmployeesResponse();\r\n    \t\t\t\t}else if (e.getStatusCode() == 429){\r\n    \t\t\t\t\tThread.sleep(500);\r\n    \t\t\t\t\temployeeResponse = connection.employees.findEmployeesResponse();\r\n    \t\t\t\t}else\r\n    \t\t\t\t\tthrow e;\r\n    \t\t\t}\t","title":"Java Call method with return type and method to be called","body":"<p>I have lots of calls against a REST API that i want handled the same way.\nPerform call, check if not authenticated. Refresh Token call again or if we hit rate\nlimit despite rate limit function. Sleep and perform call again.</p>\n<p>I would like to wrap this in a function that can be called in the way</p>\n<pre><code> ReturnType returnVal=  handleIntegration(ReturnType , functionToBecCalled)\n</code></pre>\n<p>How can this be achieved?</p>\n<p>For the example below something like</p>\n<pre><code>CustomersResponse customersReponse = handleIntegration(CustomersResponse , connection.customers.findCustomersResponse())\nEmployeesReponse employeesRepsonse = handleIntegration(EmployeeResponse , connection.employees.findEmployeesResponse())\n</code></pre>\n<p>//Current Code</p>\n<pre><code>            bucket.consume();\n            CustomersResponse customersResponse = null;\n            try {\n                 customersResponse = connection.customers.findCustomersResponse();\n            } catch (IntegrationException e) {\n                if (e.getStatusCode() == 401) {\n                    this.newAccessFromRefreshToken();\n                    customersResponse = connection.customers.findCustomersResponse();\n                }else if (e.getStatusCode() == 429){\n                    Thread.sleep(500);\n                    customersResponse = connection.customers.findCustomersResponse();\n                }else\n                    throw e;\n            }   \n\n        bucket.consume();\n            EmployeeResponse employeeResponse = null;\n            try {\n                 employeeResponse = connection.employees.findEmployeesResponse();\n            } catch (IntegrationException e) {\n                if (e.getStatusCode() == 401) {\n                    this.newAccessFromRefreshToken();\n                    employeeResponse = connection.employees.findEmployeesResponse();\n                }else if (e.getStatusCode() == 429){\n                    Thread.sleep(500);\n                    employeeResponse = connection.employees.findEmployeesResponse();\n                }else\n                    throw e;\n            }   \n</code></pre>\n"},{"tags":["java","elasticsearch"],"comments":[{"owner":{"account_id":7172796,"reputation":605,"user_id":5913437,"accept_rate":0,"display_name":"DHARMENDRA SINGH"},"score":0,"creation_date":1558344971,"post_id":56217904,"comment_id":99056734,"body_markdown":"I think you do not have net set x permission to plugin directory                                   find /usr/share/elasticsearch -type d -exec chmod +x {} \\;","body":"I think you do not have net set x permission to plugin directory                                   find /usr/share/elasticsearch -type d -exec chmod +x {} \\;"},{"owner":{"account_id":3785624,"reputation":7670,"user_id":3143670,"accept_rate":50,"display_name":"Neeraj Jain"},"score":0,"creation_date":1558345632,"post_id":56217904,"comment_id":99057140,"body_markdown":"There is no such directory : `find: /usr/share/elasticsearch: No such file or directory`","body":"There is no such directory : <code>find: &#47;usr&#47;share&#47;elasticsearch: No such file or directory</code>"},{"owner":{"account_id":7172796,"reputation":605,"user_id":5913437,"accept_rate":0,"display_name":"DHARMENDRA SINGH"},"score":0,"creation_date":1558345827,"post_id":56217904,"comment_id":99057254,"body_markdown":"are you using windows or linux this is the linux path.","body":"are you using windows or linux this is the linux path."},{"owner":{"account_id":3785624,"reputation":7670,"user_id":3143670,"accept_rate":50,"display_name":"Neeraj Jain"},"score":0,"creation_date":1558346133,"post_id":56217904,"comment_id":99057423,"body_markdown":"@DHARMENDRASINGH Added the bin folder image,","body":"@DHARMENDRASINGH Added the bin folder image,"},{"owner":{"account_id":3785624,"reputation":7670,"user_id":3143670,"accept_rate":50,"display_name":"Neeraj Jain"},"score":0,"creation_date":1558346163,"post_id":56217904,"comment_id":99057453,"body_markdown":"@DHARMENDRASINGH I am on Mac-OS","body":"@DHARMENDRASINGH I am on Mac-OS"},{"owner":{"account_id":13574311,"reputation":2059,"user_id":9792104,"display_name":"hamid bayat"},"score":0,"creation_date":1558346304,"post_id":56217904,"comment_id":99057526,"body_markdown":"make sure all file in /var/folders/ql/403xvvqs42v00xlnqgr6d8540000gn/T/embedded-elasticsearch-temp-dir/elasticsearch-6.6.0/bin/ have elasticsearch user permission.","body":"make sure all file in /var/folders/ql/403xvvqs42v00xlnqgr6d8540000gn/T/embedded-el&zwnj;&#8203;asticsearch-temp-dir&zwnj;&#8203;/elasticsearch-6.6.0&zwnj;&#8203;/bin/ have elasticsearch user permission."},{"owner":{"account_id":7172796,"reputation":605,"user_id":5913437,"accept_rate":0,"display_name":"DHARMENDRA SINGH"},"score":0,"creation_date":1558346557,"post_id":56217904,"comment_id":99057644,"body_markdown":"For reference follow this link https://discuss.elastic.co/t/facing-issue-to-start-elasticsearch-permission-denied/131970","body":"For reference follow this link <a href=\"https://discuss.elastic.co/t/facing-issue-to-start-elasticsearch-permission-denied/131970\" rel=\"nofollow noreferrer\">discuss.elastic.co/t/&hellip;</a>"},{"owner":{"account_id":3785624,"reputation":7670,"user_id":3143670,"accept_rate":50,"display_name":"Neeraj Jain"},"score":0,"creation_date":1558346896,"post_id":56217904,"comment_id":99057803,"body_markdown":"@DHARMENDRASINGH This links talks about the user is unable to start the elastic instance at all (not from the terminal as well). I can successfully start the elastic instance from the downloaded directory using : `/bin/elasticsearch -d -p elastic_pid -Ecluster.name=neeraj_elasticsearch_cluster -Enode.name=neeraj_elastic_cluster_node`","body":"@DHARMENDRASINGH This links talks about the user is unable to start the elastic instance at all (not from the terminal as well). I can successfully start the elastic instance from the downloaded directory using : <code>&#47;bin&#47;elasticsearch -d -p elastic_pid -Ecluster.name=neeraj_elasticsearch_cluster -Enode.name=neeraj_elastic_cluster_node</code>"}],"answers":[{"tags":[],"owner":{"account_id":1556647,"reputation":1904,"user_id":1447544,"display_name":"Nuno Aniceto"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666876700,"creation_date":1666876700,"answer_id":74222727,"question_id":56217904,"body_markdown":"If you are making use of systemd daemon files, and a WorkingDirectory entry, then make sure it ends with a slash (&#39;/&#39;).","title":"Permission denied Exception while Running Embedded ElasticSearch","body":"<p>If you are making use of systemd daemon files, and a WorkingDirectory entry, then make sure it ends with a slash ('/').</p>\n"}],"owner":{"account_id":3785624,"reputation":7670,"user_id":3143670,"accept_rate":50,"display_name":"Neeraj Jain"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":711,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1666876700,"creation_date":1558344247,"question_id":56217904,"body_markdown":"I am using [https://github.com/allegro/embedded-elasticsearch](https://github.com/allegro/embedded-elasticsearch) for writing integration tests for Elastic. After initial setup when I ran the tests this plugin downloaded the elastic instance successfully but start giving **permission denied errors.** \r\n\r\n**My Java version :** \r\n```\r\nopenjdk 11.0.2 2019-01-15\r\nOpenJDK Runtime Environment 18.9 (build 11.0.2+9)\r\nOpenJDK 64-Bit Server VM 18.9 (build 11.0.2+9, mixed mode)\r\n```\r\n\r\n**Full Stack Trace**\r\n```\r\nException in thread &quot;EmbeddedElsHandler&quot; pl.allegro.tech.embeddedelasticsearch.EmbeddedElasticsearchStartupException: java.io.IOException: Cannot run program &quot;/var/folders/ql/403xvvqs42v00xlnqgr6d8540000gn/T/embedded-elasticsearch-temp-dir/elasticsearch-6.6.0/bin/elasticsearch&quot;: error=13, Permission denied\r\n\tat pl.allegro.tech.embeddedelasticsearch.ElasticServer.lambda$startElasticProcess$6(ElasticServer.java:89)\r\n\tat java.base/java.lang.Thread.run(Thread.java:834)\r\nCaused by: java.io.IOException: Cannot run program &quot;/var/folders/ql/403xvvqs42v00xlnqgr6d8540000gn/T/embedded-elasticsearch-temp-dir/elasticsearch-6.6.0/bin/elasticsearch&quot;: error=13, Permission denied\r\n\tat java.base/java.lang.ProcessBuilder.start(ProcessBuilder.java:1128)\r\n\tat java.base/java.lang.ProcessBuilder.start(ProcessBuilder.java:1071)\r\n\tat pl.allegro.tech.embeddedelasticsearch.ElasticServer.lambda$startElasticProcess$6(ElasticServer.java:80)\r\n\t... 1 more\r\nCaused by: java.io.IOException: error=13, Permission denied\r\n\tat java.base/java.lang.ProcessImpl.forkAndExec(Native Method)\r\n\tat java.base/java.lang.ProcessImpl.&lt;init&gt;(ProcessImpl.java:340)\r\n\tat java.base/java.lang.ProcessImpl.start(ProcessImpl.java:271)\r\n\tat java.base/java.lang.ProcessBuilder.start(ProcessBuilder.java:1107)\r\n\t... 3 more\r\n```\r\n**My Embedded Elastic Configuration**\r\n```\r\n@BeforeClass\r\npublic static void setup() {\r\n final EmbeddedElastic embeddedElastic = EmbeddedElastic.builder()\r\n .withElasticVersion(&quot;6.6.0&quot;)\r\n .withSetting(PopularProperties.TRANSPORT_TCP_PORT, &quot;9200&quot;)\r\n .withSetting(PopularProperties.CLUSTER_NAME, &quot;partner_portal_elasticsearch_cluster&quot;)\r\n .withPlugin(&quot;analysis-stempel&quot;) // Commented this line, with this line permission deined came while installing the plugin\r\n  .build();\r\n\r\n     try {\r\n         embeddedElastic.start();\r\n        System.out.println(&quot;Embedded Elastic Search instance started................&quot;);\r\n     } catch (IOException e) {\r\n         e.printStackTrace();\r\n     } catch (InterruptedException e) {\r\n        e.printStackTrace();\r\n     }\r\n  }\r\n```\r\n\r\nElasticSearch bin Folder looks like this (for permission reference)\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/tBrHL.png","title":"Permission denied Exception while Running Embedded ElasticSearch","body":"<p>I am using <a href=\"https://github.com/allegro/embedded-elasticsearch\" rel=\"nofollow noreferrer\">https://github.com/allegro/embedded-elasticsearch</a> for writing integration tests for Elastic. After initial setup when I ran the tests this plugin downloaded the elastic instance successfully but start giving <strong>permission denied errors.</strong> </p>\n\n<p><strong>My Java version :</strong> </p>\n\n<pre><code>openjdk 11.0.2 2019-01-15\nOpenJDK Runtime Environment 18.9 (build 11.0.2+9)\nOpenJDK 64-Bit Server VM 18.9 (build 11.0.2+9, mixed mode)\n</code></pre>\n\n<p><strong>Full Stack Trace</strong></p>\n\n<pre><code>Exception in thread \"EmbeddedElsHandler\" pl.allegro.tech.embeddedelasticsearch.EmbeddedElasticsearchStartupException: java.io.IOException: Cannot run program \"/var/folders/ql/403xvvqs42v00xlnqgr6d8540000gn/T/embedded-elasticsearch-temp-dir/elasticsearch-6.6.0/bin/elasticsearch\": error=13, Permission denied\n    at pl.allegro.tech.embeddedelasticsearch.ElasticServer.lambda$startElasticProcess$6(ElasticServer.java:89)\n    at java.base/java.lang.Thread.run(Thread.java:834)\nCaused by: java.io.IOException: Cannot run program \"/var/folders/ql/403xvvqs42v00xlnqgr6d8540000gn/T/embedded-elasticsearch-temp-dir/elasticsearch-6.6.0/bin/elasticsearch\": error=13, Permission denied\n    at java.base/java.lang.ProcessBuilder.start(ProcessBuilder.java:1128)\n    at java.base/java.lang.ProcessBuilder.start(ProcessBuilder.java:1071)\n    at pl.allegro.tech.embeddedelasticsearch.ElasticServer.lambda$startElasticProcess$6(ElasticServer.java:80)\n    ... 1 more\nCaused by: java.io.IOException: error=13, Permission denied\n    at java.base/java.lang.ProcessImpl.forkAndExec(Native Method)\n    at java.base/java.lang.ProcessImpl.&lt;init&gt;(ProcessImpl.java:340)\n    at java.base/java.lang.ProcessImpl.start(ProcessImpl.java:271)\n    at java.base/java.lang.ProcessBuilder.start(ProcessBuilder.java:1107)\n    ... 3 more\n</code></pre>\n\n<p><strong>My Embedded Elastic Configuration</strong></p>\n\n<pre><code>@BeforeClass\npublic static void setup() {\n final EmbeddedElastic embeddedElastic = EmbeddedElastic.builder()\n .withElasticVersion(\"6.6.0\")\n .withSetting(PopularProperties.TRANSPORT_TCP_PORT, \"9200\")\n .withSetting(PopularProperties.CLUSTER_NAME, \"partner_portal_elasticsearch_cluster\")\n .withPlugin(\"analysis-stempel\") // Commented this line, with this line permission deined came while installing the plugin\n  .build();\n\n     try {\n         embeddedElastic.start();\n        System.out.println(\"Embedded Elastic Search instance started................\");\n     } catch (IOException e) {\n         e.printStackTrace();\n     } catch (InterruptedException e) {\n        e.printStackTrace();\n     }\n  }\n</code></pre>\n\n<p>ElasticSearch bin Folder looks like this (for permission reference)\n<a href=\"https://i.stack.imgur.com/tBrHL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tBrHL.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":["java","android","api","retrofit2","response"],"comments":[{"owner":{"account_id":6908647,"reputation":9026,"user_id":5305430,"accept_rate":67,"display_name":"sushildlh"},"score":0,"creation_date":1565348807,"post_id":57428312,"comment_id":101335395,"body_markdown":"Have you tried using POSTMAN also?","body":"Have you tried using POSTMAN also?"},{"owner":{"account_id":5652361,"reputation":725,"user_id":4472486,"accept_rate":64,"display_name":"Sushrita"},"score":0,"creation_date":1565349845,"post_id":57428312,"comment_id":101335885,"body_markdown":"yes it&#39;s working there. @sushildlh","body":"yes it&#39;s working there. @sushildlh"},{"owner":{"account_id":6908647,"reputation":9026,"user_id":5305430,"accept_rate":67,"display_name":"sushildlh"},"score":0,"creation_date":1565351679,"post_id":57428312,"comment_id":101336772,"body_markdown":"Why you sending JSON object? Just try to make POJO for your request and try to hit it.","body":"Why you sending JSON object? Just try to make POJO for your request and try to hit it."},{"owner":{"account_id":5652361,"reputation":725,"user_id":4472486,"accept_rate":64,"display_name":"Sushrita"},"score":0,"creation_date":1565351741,"post_id":57428312,"comment_id":101336805,"body_markdown":"because i have to send body and headers in the POST method. the api is designed that way.and this is th e object i need to send {\n    &quot;param&quot;: {\n       &quot;max_results&quot;: 100,\n        &quot;search&quot;: &quot;modi&quot;\n    }\n}","body":"because i have to send body and headers in the POST method. the api is designed that way.and this is th e object i need to send {     &quot;param&quot;: {        &quot;max_results&quot;: 100,         &quot;search&quot;: &quot;modi&quot;     } }"},{"owner":{"account_id":6908647,"reputation":9026,"user_id":5305430,"accept_rate":67,"display_name":"sushildlh"},"score":0,"creation_date":1565351912,"post_id":57428312,"comment_id":101336891,"body_markdown":"make POJO of this and send using @Body replace JSOn Object with this POJO class.","body":"make POJO of this and send using @Body replace JSOn Object with this POJO class."},{"owner":{"account_id":5652361,"reputation":725,"user_id":4472486,"accept_rate":64,"display_name":"Sushrita"},"score":0,"creation_date":1565352002,"post_id":57428312,"comment_id":101336944,"body_markdown":"is there any specific reason? i sent the data like this in another api call that was working","body":"is there any specific reason? i sent the data like this in another api call that was working"},{"owner":{"account_id":6908647,"reputation":9026,"user_id":5305430,"accept_rate":67,"display_name":"sushildlh"},"score":0,"creation_date":1565352142,"post_id":57428312,"comment_id":101337019,"body_markdown":"If you are using this `.addConverterFactory(GsonConverterFactory.create())`. It converts your request and response into an object form JSON. That is the only reason I am giving you a suggestion. All other things look good for me in your code.","body":"If you are using this <code>.addConverterFactory(GsonConverterFactory.create())</code>. It converts your request and response into an object form JSON. That is the only reason I am giving you a suggestion. All other things look good for me in your code."},{"owner":{"account_id":5652361,"reputation":725,"user_id":4472486,"accept_rate":64,"display_name":"Sushrita"},"score":0,"creation_date":1565355048,"post_id":57428312,"comment_id":101338740,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/197726/discussion-between-sushrita-and-sushildlh).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/197726/discussion-between-sushrita-and-sushildlh\">continue this discussion in chat</a>."}],"answers":[{"comments":[{"owner":{"account_id":5652361,"reputation":725,"user_id":4472486,"accept_rate":64,"display_name":"Sushrita"},"score":0,"creation_date":1565349275,"post_id":57428688,"comment_id":101335642,"body_markdown":"it&#39;s not the complete json object I have just given it for reference.","body":"it&#39;s not the complete json object I have just given it for reference."}],"tags":[],"owner":{"account_id":6605477,"reputation":543,"user_id":5102423,"display_name":"Zaid Zakir"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1565348447,"creation_date":1565348447,"answer_id":57428688,"question_id":57428312,"body_markdown":"On first look your json seems wrong theres an additional &quot;,&quot;, after &quot;video_category&quot;: &quot;News/Politics&quot;, &lt;--- maybe thats the problem\r\n    \r\n    Btw i would do my pojo like this \r\n    \r\ni used this site to create it automatically http://www.jsonschema2pojo.org/\r\n\r\nyou can always use this site to validate your JSON https://jsonformatter.curiousconcept.com/\r\n\r\n    -----------------------------------ResponseVideoList.java-----------------------------------\r\n    \r\n    package com.example;\r\n    \r\n    import com.google.gson.annotations.Expose;\r\n    import com.google.gson.annotations.SerializedName;\r\n    \r\n    public class ResponseVideoList{\r\n    \r\n    @SerializedName(&quot;resonse&quot;)\r\n    @Expose\r\n    private Resonse resonse;\r\n    \r\n    public Resonse getResonse() {\r\n    return resonse;\r\n    }\r\n    \r\n    public void setResonse(Resonse resonse) {\r\n    this.resonse = resonse;\r\n    }\r\n    \r\n    }\r\n    -----------------------------------Resonse.java-----------------------------------\r\n    \r\n    package com.example;\r\n    \r\n    import java.util.List;\r\n    import com.google.gson.annotations.Expose;\r\n    import com.google.gson.annotations.SerializedName;\r\n    \r\n    public class Resonse {\r\n    \r\n    @SerializedName(&quot;status&quot;)\r\n    @Expose\r\n    private Integer status;\r\n    @SerializedName(&quot;result&quot;)\r\n    @Expose\r\n    private List&lt;Result&gt; result = null;\r\n    \r\n    public Integer getStatus() {\r\n    return status;\r\n    }\r\n    \r\n    public void setStatus(Integer status) {\r\n    this.status = status;\r\n    }\r\n    \r\n    public List&lt;Result&gt; getResult() {\r\n    return result;\r\n    }\r\n    \r\n    public void setResult(List&lt;Result&gt; result) {\r\n    this.result = result;\r\n    }\r\n    \r\n    }\r\n    -----------------------------------Result.java-----------------------------------\r\n    \r\n    package com.example;\r\n    \r\n    import com.google.gson.annotations.Expose;\r\n    import com.google.gson.annotations.SerializedName;\r\n    \r\n    public class Result {\r\n    \r\n    @SerializedName(&quot;video_id&quot;)\r\n    @Expose\r\n    private String videoId;\r\n    @SerializedName(&quot;video_title&quot;)\r\n    @Expose\r\n    private String videoTitle;\r\n    @SerializedName(&quot;video_description&quot;)\r\n    @Expose\r\n    private String videoDescription;\r\n    @SerializedName(&quot;video_poster&quot;)\r\n    @Expose\r\n    private String videoPoster;\r\n    @SerializedName(&quot;video_duration&quot;)\r\n    @Expose\r\n    private String videoDuration;\r\n    @SerializedName(&quot;video_category&quot;)\r\n    @Expose\r\n    private String videoCategory;\r\n    \r\n    public String getVideoId() {\r\n    return videoId;\r\n    }\r\n    \r\n    public void setVideoId(String videoId) {\r\n    this.videoId = videoId;\r\n    }\r\n    \r\n    public String getVideoTitle() {\r\n    return videoTitle;\r\n    }\r\n    \r\n    public void setVideoTitle(String videoTitle) {\r\n    this.videoTitle = videoTitle;\r\n    }\r\n    \r\n    public String getVideoDescription() {\r\n    return videoDescription;\r\n    }\r\n    \r\n    public void setVideoDescription(String videoDescription) {\r\n    this.videoDescription = videoDescription;\r\n    }\r\n    \r\n    public String getVideoPoster() {\r\n    return videoPoster;\r\n    }\r\n    \r\n    public void setVideoPoster(String videoPoster) {\r\n    this.videoPoster = videoPoster;\r\n    }\r\n    \r\n    public String getVideoDuration() {\r\n    return videoDuration;\r\n    }\r\n    \r\n    public void setVideoDuration(String videoDuration) {\r\n    this.videoDuration = videoDuration;\r\n    }\r\n    \r\n    public String getVideoCategory() {\r\n    return videoCategory;\r\n    }\r\n    \r\n    public void setVideoCategory(String videoCategory) {\r\n    this.videoCategory = videoCategory;\r\n    }\r\n    \r\n    }\r\n    \r\n       \r\n    \r\n","title":"Api call in android and receive this error using Retrofit 2 :Response{protocol=h2, code=200, message=, url=https://api.com/video/list-video.php}","body":"<p>On first look your json seems wrong theres an additional \",\", after \"video_category\": \"News/Politics\", &lt;--- maybe thats the problem</p>\n\n<pre><code>Btw i would do my pojo like this \n</code></pre>\n\n<p>i used this site to create it automatically <a href=\"http://www.jsonschema2pojo.org/\" rel=\"nofollow noreferrer\">http://www.jsonschema2pojo.org/</a></p>\n\n<p>you can always use this site to validate your JSON <a href=\"https://jsonformatter.curiousconcept.com/\" rel=\"nofollow noreferrer\">https://jsonformatter.curiousconcept.com/</a></p>\n\n<pre><code>-----------------------------------ResponseVideoList.java-----------------------------------\n\npackage com.example;\n\nimport com.google.gson.annotations.Expose;\nimport com.google.gson.annotations.SerializedName;\n\npublic class ResponseVideoList{\n\n@SerializedName(\"resonse\")\n@Expose\nprivate Resonse resonse;\n\npublic Resonse getResonse() {\nreturn resonse;\n}\n\npublic void setResonse(Resonse resonse) {\nthis.resonse = resonse;\n}\n\n}\n-----------------------------------Resonse.java-----------------------------------\n\npackage com.example;\n\nimport java.util.List;\nimport com.google.gson.annotations.Expose;\nimport com.google.gson.annotations.SerializedName;\n\npublic class Resonse {\n\n@SerializedName(\"status\")\n@Expose\nprivate Integer status;\n@SerializedName(\"result\")\n@Expose\nprivate List&lt;Result&gt; result = null;\n\npublic Integer getStatus() {\nreturn status;\n}\n\npublic void setStatus(Integer status) {\nthis.status = status;\n}\n\npublic List&lt;Result&gt; getResult() {\nreturn result;\n}\n\npublic void setResult(List&lt;Result&gt; result) {\nthis.result = result;\n}\n\n}\n-----------------------------------Result.java-----------------------------------\n\npackage com.example;\n\nimport com.google.gson.annotations.Expose;\nimport com.google.gson.annotations.SerializedName;\n\npublic class Result {\n\n@SerializedName(\"video_id\")\n@Expose\nprivate String videoId;\n@SerializedName(\"video_title\")\n@Expose\nprivate String videoTitle;\n@SerializedName(\"video_description\")\n@Expose\nprivate String videoDescription;\n@SerializedName(\"video_poster\")\n@Expose\nprivate String videoPoster;\n@SerializedName(\"video_duration\")\n@Expose\nprivate String videoDuration;\n@SerializedName(\"video_category\")\n@Expose\nprivate String videoCategory;\n\npublic String getVideoId() {\nreturn videoId;\n}\n\npublic void setVideoId(String videoId) {\nthis.videoId = videoId;\n}\n\npublic String getVideoTitle() {\nreturn videoTitle;\n}\n\npublic void setVideoTitle(String videoTitle) {\nthis.videoTitle = videoTitle;\n}\n\npublic String getVideoDescription() {\nreturn videoDescription;\n}\n\npublic void setVideoDescription(String videoDescription) {\nthis.videoDescription = videoDescription;\n}\n\npublic String getVideoPoster() {\nreturn videoPoster;\n}\n\npublic void setVideoPoster(String videoPoster) {\nthis.videoPoster = videoPoster;\n}\n\npublic String getVideoDuration() {\nreturn videoDuration;\n}\n\npublic void setVideoDuration(String videoDuration) {\nthis.videoDuration = videoDuration;\n}\n\npublic String getVideoCategory() {\nreturn videoCategory;\n}\n\npublic void setVideoCategory(String videoCategory) {\nthis.videoCategory = videoCategory;\n}\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2742564,"reputation":337,"user_id":4664198,"accept_rate":75,"display_name":"LearningCharlito"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1629863760,"creation_date":1629863760,"answer_id":68916539,"question_id":57428312,"body_markdown":"Just for new people who comes here with this error..  it can also happens when your data classes (model) does not correspond to the json you are consuming.\r\n\r\nYou can validate this by setting the onResponse() method from Retrofit to Any (kotlin) or to an Object (java)\r\n\r\n\r\n       @Override\r\n        public void onResponse(Call&lt;Object&gt; call, Response&lt;Object&gt; response) {\r\n            Log.d(&quot;zzz&quot;, &quot;debug this line and check if response have ur object&quot;);\r\n        }","title":"Api call in android and receive this error using Retrofit 2 :Response{protocol=h2, code=200, message=, url=https://api.com/video/list-video.php}","body":"<p>Just for new people who comes here with this error..  it can also happens when your data classes (model) does not correspond to the json you are consuming.</p>\n<p>You can validate this by setting the onResponse() method from Retrofit to Any (kotlin) or to an Object (java)</p>\n<pre><code>   @Override\n    public void onResponse(Call&lt;Object&gt; call, Response&lt;Object&gt; response) {\n        Log.d(&quot;zzz&quot;, &quot;debug this line and check if response have ur object&quot;);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2074322,"reputation":729,"user_id":1848119,"accept_rate":75,"display_name":"Bernauer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666876620,"creation_date":1666876620,"answer_id":74222708,"question_id":57428312,"body_markdown":"Seems the returned JSON is not well formatted (unless you cropped the file to paste it here...)[![enter image description here][1]][1]\r\n\r\n\r\nI used [JSONLint][2] to validate it\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Zfwz0.png\r\n  [2]: https://jsonlint.com/","title":"Api call in android and receive this error using Retrofit 2 :Response{protocol=h2, code=200, message=, url=https://api.com/video/list-video.php}","body":"<p>Seems the returned JSON is not well formatted (unless you cropped the file to paste it here...)<a href=\"https://i.stack.imgur.com/Zfwz0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Zfwz0.png\" alt=\"enter image description here\" /></a></p>\n<p>I used <a href=\"https://jsonlint.com/\" rel=\"nofollow noreferrer\">JSONLint</a> to validate it</p>\n"}],"owner":{"account_id":5652361,"reputation":725,"user_id":4472486,"accept_rate":64,"display_name":"Sushrita"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1851,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1666876620,"creation_date":1565347036,"question_id":57428312,"body_markdown":"[![log response][1]][1]I am getting null response in place of value.\r\n     \r\n My json response is     \r\n    \r\n\r\n     \r\n    {\r\n        &quot;resonse&quot;: {\r\n            &quot;status&quot;: 200,\r\n            &quot;result&quot;: [\r\n                {\r\n                    &quot;video_id&quot;: &quot;3c19979979&quot;,\r\n                    &quot;video_title&quot;: &quot;Sushil Kumar Modi press conference after serial bomb blasts at Modi rally in Patna&quot;,\r\n                    &quot;video_description&quot;: &quot;BJP at Patna serial blast in Bihar, Nitish government has stood in the dock. Former Deputy Chief Minister Sushil Kumar Modi said the blasts Narendra Modi were targeted. He said that Nitish Kumar look Modi as the enemy.&lt;br /&gt;\\r\\n&quot;,\r\n                    &quot;video_poster&quot;: &quot;https://vbcdn.com/cdn/download/2013102913830306761810268995.jpg&quot;,\r\n                    &quot;video_duration&quot;: &quot;02:02&quot;,\r\n                    &quot;video_category&quot;: &quot;News/Politics&quot;,\r\n        }\r\n      ]}\r\n    }\r\n\r\nRetrofit client :\r\n\r\n     OkHttpClient client = new OkHttpClient.Builder().addInterceptor(new Interceptor() {\r\n                @Override\r\n                public Response intercept(Chain chain) throws IOException {\r\n                    Request newRequest  = chain.request().newBuilder()\r\n                            .addHeader(&quot;Authorization&quot;, &quot;Bearer &quot; + token)\r\n                            .build();\r\n                    return chain.proceed(newRequest);\r\n                }\r\n            }).build();\r\n           if (retrofit==null)\r\n           retrofit = new Retrofit.Builder()\r\n                    .baseUrl(API_BASE_URL)\r\n                    .addConverterFactory(GsonConverterFactory.create())\r\n                   .client(client)\r\n                   .build();\r\n            return retrofit;\r\n\r\nAPI CLIENT :\r\n\r\n      @Headers(&quot;Content-Type:application/json&quot;)\r\n        @POST(&quot;video/list-video.php&quot;)\r\n        Call&lt;ResponseVideoList&gt; getVideoListFromSearchText(@Body JsonObject jsonObject);\r\n\r\nPOJO class is:\r\n\r\n    public class ResponseVideoList implements  Serializable{\r\n    \r\n    \r\n        @SerializedName(&quot;resonse&quot;)\r\n        @Expose\r\n        private Resonse resonse;\r\n        private final static long serialVersionUID = -2645239251698186770L;\r\n    \r\n        public Resonse getResonse() {\r\n            return resonse;\r\n        }\r\n    \r\n        public void setResonse(Resonse resonse) {\r\n            this.resonse = resonse;\r\n        }\r\n    \r\n    \r\n        public class Resonse implements Serializable\r\n        {\r\n    \r\n            @SerializedName(&quot;status&quot;)\r\n            @Expose\r\n            private String status;\r\n            @SerializedName(&quot;result&quot;)\r\n            @Expose\r\n            private List&lt;VIdeoItem&gt; result = null;\r\n            private final static long serialVersionUID = -350882274147346830L;\r\n    \r\n            public String getStatus() {\r\n                return status;\r\n            }\r\n    \r\n            public void setStatus(String status) {\r\n                this.status = status;\r\n            }\r\n    \r\n            public List&lt;VIdeoItem&gt; getResult() {\r\n                return result;\r\n            }\r\n    \r\n            public void setResult(List&lt;VIdeoItem&gt; result) {\r\n                this.result = result;\r\n            }\r\n    \r\n        }\r\n    \r\n        }\r\n\r\nWhenever I call the api , the statuscode is 200 but the response body is always coming as null.\r\nthe message i received is this :\r\n\r\n \r\nResponse{protocol=h2, code=200, message=, url=https://api.com/video/list-video.php}\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/de3SD.png\r\nAny help or suggestion is appreciated .","title":"Api call in android and receive this error using Retrofit 2 :Response{protocol=h2, code=200, message=, url=https://api.com/video/list-video.php}","body":"<p><a href=\"https://i.stack.imgur.com/de3SD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/de3SD.png\" alt=\"log response\"></a>I am getting null response in place of value.</p>\n\n<p>My json response is     </p>\n\n<pre><code>{\n    \"resonse\": {\n        \"status\": 200,\n        \"result\": [\n            {\n                \"video_id\": \"3c19979979\",\n                \"video_title\": \"Sushil Kumar Modi press conference after serial bomb blasts at Modi rally in Patna\",\n                \"video_description\": \"BJP at Patna serial blast in Bihar, Nitish government has stood in the dock. Former Deputy Chief Minister Sushil Kumar Modi said the blasts Narendra Modi were targeted. He said that Nitish Kumar look Modi as the enemy.&lt;br /&gt;\\r\\n\",\n                \"video_poster\": \"https://vbcdn.com/cdn/download/2013102913830306761810268995.jpg\",\n                \"video_duration\": \"02:02\",\n                \"video_category\": \"News/Politics\",\n    }\n  ]}\n}\n</code></pre>\n\n<p>Retrofit client :</p>\n\n<pre><code> OkHttpClient client = new OkHttpClient.Builder().addInterceptor(new Interceptor() {\n            @Override\n            public Response intercept(Chain chain) throws IOException {\n                Request newRequest  = chain.request().newBuilder()\n                        .addHeader(\"Authorization\", \"Bearer \" + token)\n                        .build();\n                return chain.proceed(newRequest);\n            }\n        }).build();\n       if (retrofit==null)\n       retrofit = new Retrofit.Builder()\n                .baseUrl(API_BASE_URL)\n                .addConverterFactory(GsonConverterFactory.create())\n               .client(client)\n               .build();\n        return retrofit;\n</code></pre>\n\n<p>API CLIENT :</p>\n\n<pre><code>  @Headers(\"Content-Type:application/json\")\n    @POST(\"video/list-video.php\")\n    Call&lt;ResponseVideoList&gt; getVideoListFromSearchText(@Body JsonObject jsonObject);\n</code></pre>\n\n<p>POJO class is:</p>\n\n<pre><code>public class ResponseVideoList implements  Serializable{\n\n\n    @SerializedName(\"resonse\")\n    @Expose\n    private Resonse resonse;\n    private final static long serialVersionUID = -2645239251698186770L;\n\n    public Resonse getResonse() {\n        return resonse;\n    }\n\n    public void setResonse(Resonse resonse) {\n        this.resonse = resonse;\n    }\n\n\n    public class Resonse implements Serializable\n    {\n\n        @SerializedName(\"status\")\n        @Expose\n        private String status;\n        @SerializedName(\"result\")\n        @Expose\n        private List&lt;VIdeoItem&gt; result = null;\n        private final static long serialVersionUID = -350882274147346830L;\n\n        public String getStatus() {\n            return status;\n        }\n\n        public void setStatus(String status) {\n            this.status = status;\n        }\n\n        public List&lt;VIdeoItem&gt; getResult() {\n            return result;\n        }\n\n        public void setResult(List&lt;VIdeoItem&gt; result) {\n            this.result = result;\n        }\n\n    }\n\n    }\n</code></pre>\n\n<p>Whenever I call the api , the statuscode is 200 but the response body is always coming as null.\nthe message i received is this :</p>\n\n<p>Response{protocol=h2, code=200, message=, url=<a href=\"https://api.com/video/list-video.php\" rel=\"nofollow noreferrer\">https://api.com/video/list-video.php</a>}</p>\n\n<p>Any help or suggestion is appreciated .</p>\n"},{"tags":["java","spring-boot","autowired"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1666849850,"post_id":74217314,"comment_id":131033763,"body_markdown":"In your example, you are trying to Autowire an instance of List. Not sure if that &#39;ll work.","body":"In your example, you are trying to Autowire an instance of List. Not sure if that &#39;ll work."},{"owner":{"account_id":9772576,"reputation":77,"user_id":7374236,"display_name":"Lilia"},"score":0,"creation_date":1666876452,"post_id":74217314,"comment_id":131042437,"body_markdown":"@Stultuske, I am injecting all beans, that implement `AwesomeInterface` and collecting them to a list. It is working","body":"@Stultuske, I am injecting all beans, that implement <code>AwesomeInterface</code> and collecting them to a list. It is working"}],"owner":{"account_id":9772576,"reputation":77,"user_id":7374236,"display_name":"Lilia"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1666850258,"answer_count":0,"score":0,"last_activity_date":1666876390,"creation_date":1666849619,"question_id":74217314,"body_markdown":"For example, I have 1000+ services, and each of them implements some interface `AwesomeInterface`.\r\n\r\nMy plan is to autowire the collection of such services into MainService&#39;s constructor so that I can use them afterward:\r\n\r\n    public MainService(@Autowired List&lt;AwesomeInterface&gt; services){\r\n        this.services = services;\r\n    }\r\n\r\nThe question is: can I autowire so many services technically? I mean, is it enough memory, etc? I do not want to create all of them to test my theory :)\r\n\r\nP.S. I believe that it may be not the best thing to autowire such a big amount of bins, however, I am still curious :)\r\n\r\nI use SpringBoot, Java11","title":"how many beans can i autowire in spring boot","body":"<p>For example, I have 1000+ services, and each of them implements some interface <code>AwesomeInterface</code>.</p>\n<p>My plan is to autowire the collection of such services into MainService's constructor so that I can use them afterward:</p>\n<pre><code>public MainService(@Autowired List&lt;AwesomeInterface&gt; services){\n    this.services = services;\n}\n</code></pre>\n<p>The question is: can I autowire so many services technically? I mean, is it enough memory, etc? I do not want to create all of them to test my theory :)</p>\n<p>P.S. I believe that it may be not the best thing to autowire such a big amount of bins, however, I am still curious :)</p>\n<p>I use SpringBoot, Java11</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":22450291,"reputation":364,"user_id":16653700,"display_name":"Alias Cartellano"},"score":0,"creation_date":1666803284,"post_id":74211356,"comment_id":131024129,"body_markdown":"Try looking at [Programmatically change launcher activity](https://stackoverflow.com/questions/12765118/programmatically-change-launcher-activity?adlt=strict&amp;toWww=1&amp;redig=0DD3BAF58C5749C08D836C76C66898B4).","body":"Try looking at <a href=\"https://stackoverflow.com/questions/12765118/programmatically-change-launcher-activity?adlt=strict&amp;toWww=1&amp;redig=0DD3BAF58C5749C08D836C76C66898B4\">Programmatically change launcher activity</a>."}],"answers":[{"tags":[],"owner":{"account_id":16266080,"reputation":56,"user_id":16564712,"display_name":"Gaya Touak"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1666876036,"creation_date":1666808303,"answer_id":74212496,"question_id":74211356,"body_markdown":"You can keep your existant launcher `Activity`, in the `onCreate` methode, check for your condition, change the `Activity` :\r\n\r\n    @Override\r\n    public void onCreate(Bundle b){\r\n    super.onCreate();\r\n    if(your_condition){\r\n    startActivity(new Intent(this, MainActivity2.class);\r\n    finish();\r\n    }\r\n    setContentView(R.layout.main_activity1);\r\n    }\r\n\r\n","title":"Android Studio - change launcher activity after certain instruction","body":"<p>You can keep your existant launcher <code>Activity</code>, in the <code>onCreate</code> methode, check for your condition, change the <code>Activity</code> :</p>\n<pre><code>@Override\npublic void onCreate(Bundle b){\nsuper.onCreate();\nif(your_condition){\nstartActivity(new Intent(this, MainActivity2.class);\nfinish();\n}\nsetContentView(R.layout.main_activity1);\n}\n</code></pre>\n"}],"owner":{"account_id":26227591,"reputation":43,"user_id":19904057,"display_name":"Tholvnar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":89,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74212496,"answer_count":1,"score":1,"last_activity_date":1666876036,"creation_date":1666802475,"question_id":74211356,"body_markdown":"I wanna change starting activity after the user will make certain instructions. \r\nLet&#39;s say that for now MainActivity.java starts every time when the user runs the app. I wanna change that to MainActivity2.java after the user will click on specified button in app. I&#39;m trying to do that by using shared preferences but can&#39;t figure it out how to make it. \r\nI know that I need a context to start an activity, so do I need to create empty activity and then just put code with &quot;if&quot; instruction to run proper activity? \r\n\r\nI already tried to do that on a simple java class (non-activity class) but it can&#39;t be done since it does not extend &quot;AppCompatActivity&quot;.","title":"Android Studio - change launcher activity after certain instruction","body":"<p>I wanna change starting activity after the user will make certain instructions.\nLet's say that for now MainActivity.java starts every time when the user runs the app. I wanna change that to MainActivity2.java after the user will click on specified button in app. I'm trying to do that by using shared preferences but can't figure it out how to make it.\nI know that I need a context to start an activity, so do I need to create empty activity and then just put code with &quot;if&quot; instruction to run proper activity?</p>\n<p>I already tried to do that on a simple java class (non-activity class) but it can't be done since it does not extend &quot;AppCompatActivity&quot;.</p>\n"},{"tags":["java","unit-testing","junit"],"comments":[{"owner":{"account_id":1482854,"reputation":250,"user_id":1391779,"display_name":"DNAj"},"score":1,"creation_date":1491734591,"post_id":43305739,"comment_id":73676347,"body_markdown":"Probably the jar is not in the classpath. Could you please confirm that? also please tell which jar are you using?","body":"Probably the jar is not in the classpath. Could you please confirm that? also please tell which jar are you using?"},{"owner":{"account_id":9910924,"reputation":241,"user_id":7337678,"accept_rate":75,"display_name":"Leo"},"score":1,"creation_date":1491736228,"post_id":43305739,"comment_id":73676782,"body_markdown":"I&#39;m using JUnit 4.12 and the jar should be in the classpath. I&#39;m able to compile a similar test in the same folder.","body":"I&#39;m using JUnit 4.12 and the jar should be in the classpath. I&#39;m able to compile a similar test in the same folder."},{"owner":{"account_id":9910924,"reputation":241,"user_id":7337678,"accept_rate":75,"display_name":"Leo"},"score":1,"creation_date":1491737953,"post_id":43305739,"comment_id":73677244,"body_markdown":"Ok, I was making a mistake with the classpath. Thanks for the help.","body":"Ok, I was making a mistake with the classpath. Thanks for the help."},{"owner":{"account_id":3703110,"reputation":3347,"user_id":3082272,"accept_rate":50,"display_name":"bobbel"},"score":0,"creation_date":1491927476,"post_id":43305739,"comment_id":73765726,"body_markdown":"Possible duplicate of [Cannot find symbol assertEquals](http://stackoverflow.com/questions/20631621/cannot-find-symbol-assertequals)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/20631621/cannot-find-symbol-assertequals\">Cannot find symbol assertEquals</a>"}],"answers":[{"comments":[{"owner":{"account_id":9910924,"reputation":241,"user_id":7337678,"accept_rate":75,"display_name":"Leo"},"score":0,"creation_date":1491736367,"post_id":43305791,"comment_id":73676825,"body_markdown":"Addind the keyword gives me the following error:  package org.junit does not exist","body":"Addind the keyword gives me the following error:  package org.junit does not exist"}],"tags":[],"owner":{"account_id":6087813,"reputation":15135,"user_id":4751165,"accept_rate":96,"display_name":"Pau"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1491735004,"creation_date":1491734623,"answer_id":43305791,"question_id":43305739,"body_markdown":"You should add the keyword `static` to import it. An example:\r\n\r\n     import static org.junit.Assert.assertFalse;\r\n","title":"Error with import of org.junit.Assert","body":"<p>You should add the keyword <code>static</code> to import it. An example:</p>\n\n<pre><code> import static org.junit.Assert.assertFalse;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":9910924,"reputation":241,"user_id":7337678,"accept_rate":75,"display_name":"Leo"},"score":0,"creation_date":1491737959,"post_id":43305792,"comment_id":73677247,"body_markdown":"Ok, I was making a mistake with the classpath. Thanks for the help anyway.","body":"Ok, I was making a mistake with the classpath. Thanks for the help anyway."}],"tags":[],"owner":{"account_id":1528364,"reputation":125614,"user_id":1426227,"accept_rate":79,"display_name":"cassiomolin"},"comment_count":1,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1491900710,"creation_date":1491734628,"answer_id":43305792,"question_id":43305739,"body_markdown":"Assuming that you have the [JUnit dependency][1] in the classpath, use `import static` for the assert methods:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    import static org.junit.Assert.assertArrayEquals;\r\n    import static org.junit.Assert.assertEquals;\r\n    import static org.junit.Assert.assertFalse;\r\n    import static org.junit.Assert.assertTrue;\r\n\r\nOr simply use:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n\timport static org.junit.Assert.*;\r\n\r\n\r\n   [1]: https://github.com/junit-team/junit4/wiki/Download-and-Install","title":"Error with import of org.junit.Assert","body":"<p>Assuming that you have the <a href=\"https://github.com/junit-team/junit4/wiki/Download-and-Install\" rel=\"nofollow noreferrer\">JUnit dependency</a> in the classpath, use <code>import static</code> for the assert methods:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>import static org.junit.Assert.assertArrayEquals;\nimport static org.junit.Assert.assertEquals;\nimport static org.junit.Assert.assertFalse;\nimport static org.junit.Assert.assertTrue;\n</code></pre>\n\n<p>Or simply use:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>import static org.junit.Assert.*;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8521831,"reputation":133,"user_id":7047760,"display_name":"7H3_H4CK3R"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1491734750,"creation_date":1491734750,"answer_id":43305803,"question_id":43305739,"body_markdown":"What you are looking for is a *Static import*\r\n\r\nThe line `import org.junit.Assert.assertArrayEquals;` is referencing the method `assertArrayEquals` from the class `org.junit.Assert`\r\n\r\nImporting a static method so that it is callable like `assertEquals(0,orderedArray.size());` is done with a static import line. Try out the following:\r\n\r\n    import static org.junit.Assert.assertArrayEquals;\r\n    import static org.junit.Assert.assertEquals;\r\n    import static org.junit.Assert.assertFalse;\r\n    import static org.junit.Assert.assertTrue;\r\n\r\nAlternatively you can:\r\n\r\n    import static org.junit.Assert.*;\r\n\r\n, or you could:\r\n\r\n    import org.junit.Assert;\r\nand reference the methods like\r\n\r\n    Assert.assertEquals(0,orderedArray.size());","title":"Error with import of org.junit.Assert","body":"<p>What you are looking for is a <em>Static import</em></p>\n\n<p>The line <code>import org.junit.Assert.assertArrayEquals;</code> is referencing the method <code>assertArrayEquals</code> from the class <code>org.junit.Assert</code></p>\n\n<p>Importing a static method so that it is callable like <code>assertEquals(0,orderedArray.size());</code> is done with a static import line. Try out the following:</p>\n\n<pre><code>import static org.junit.Assert.assertArrayEquals;\nimport static org.junit.Assert.assertEquals;\nimport static org.junit.Assert.assertFalse;\nimport static org.junit.Assert.assertTrue;\n</code></pre>\n\n<p>Alternatively you can:</p>\n\n<pre><code>import static org.junit.Assert.*;\n</code></pre>\n\n<p>, or you could:</p>\n\n<pre><code>import org.junit.Assert;\n</code></pre>\n\n<p>and reference the methods like</p>\n\n<pre><code>Assert.assertEquals(0,orderedArray.size());\n</code></pre>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1667268991,"post_id":74222511,"comment_id":131124616,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/74222511/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":26749665,"reputation":1,"user_id":20349244,"display_name":"user20349244"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666875807,"creation_date":1666875807,"answer_id":74222511,"question_id":43305739,"body_markdown":"If you are using junit version 5 and above then use org.junit.jupiter.api.assertions .\r\n\r\nPath has been moved in junit 5","title":"Error with import of org.junit.Assert","body":"<p>If you are using junit version 5 and above then use org.junit.jupiter.api.assertions .</p>\n<p>Path has been moved in junit 5</p>\n"}],"owner":{"account_id":9910924,"reputation":241,"user_id":7337678,"accept_rate":75,"display_name":"Leo"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37860,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":4,"score":6,"last_activity_date":1666875807,"creation_date":1491734288,"question_id":43305739,"body_markdown":"I&#39;m having a little problem with a unit-test my professor gave me. Upon compilation, I recieve the following errors:  \r\n`cannot find symbol import org.junit.Assert.assertArrayEquals;\r\ncannot find symbol import org.junit.Assert.assertEquals;\r\nimport org.junit.Assert.assertFalse;\r\nimport org.junit.Assert.assertTrue;`\r\n\r\nI have downloaded JUnit and I can compile a similar file, so why am I having problems with this?\r\nThe code is:\r\n\r\n    import java.util.Comparator;\r\n    import org.junit.Assert.assertArrayEquals;\r\n    import org.junit.Assert.assertEquals;\r\n    import org.junit.Assert.assertFalse;\r\n    import org.junit.Assert.assertTrue;\r\n    import org.junit.Before;\r\n    import org.junit.Test;\r\n\r\n        public class SortingTests {\r\n  \r\n          class IntegerComparator implements Comparator&lt;Integer&gt; {\r\n            @Override\r\n            public int compare(Integer i1, Integer i2) {\r\n              return i1.compareTo(i2);\r\n            }\r\n          }\r\n  \r\n          private Integer i1,i2,i3;\r\n          private OrderedArray&lt;Integer&gt; orderedArray;\r\n  \r\n          @Before\r\n          public void createOrderedArray(){\r\n            i1 = -12;\r\n            i2 = 0;\r\n            i3 = 4;\r\n            orderedArray = new OrderedArray&lt;&gt;(new IntegerComparator());\r\n          }\r\n  \r\n          @Test\r\n          public void testIsEmpty_zeroEl(){\r\n            assertTrue(orderedArray.isEmpty());\r\n          }\r\n  \r\n          @Test\r\n          public void testIsEmpty_oneEl() throws Exception{\r\n            orderedArray.add(i1);\r\n            assertFalse(orderedArray.isEmpty());\r\n          }\r\n  \r\n  \r\n          @Test\r\n          public void testSize_zeroEl() throws Exception{\r\n            assertEquals(0,orderedArray.size());\r\n          }\r\n  \r\n        }","title":"Error with import of org.junit.Assert","body":"<p>I'm having a little problem with a unit-test my professor gave me. Upon compilation, I recieve the following errors:<br>\n<code>cannot find symbol import org.junit.Assert.assertArrayEquals;\ncannot find symbol import org.junit.Assert.assertEquals;\nimport org.junit.Assert.assertFalse;\nimport org.junit.Assert.assertTrue;</code></p>\n\n<p>I have downloaded JUnit and I can compile a similar file, so why am I having problems with this?\nThe code is:</p>\n\n<pre><code>import java.util.Comparator;\nimport org.junit.Assert.assertArrayEquals;\nimport org.junit.Assert.assertEquals;\nimport org.junit.Assert.assertFalse;\nimport org.junit.Assert.assertTrue;\nimport org.junit.Before;\nimport org.junit.Test;\n\n    public class SortingTests {\n\n      class IntegerComparator implements Comparator&lt;Integer&gt; {\n        @Override\n        public int compare(Integer i1, Integer i2) {\n          return i1.compareTo(i2);\n        }\n      }\n\n      private Integer i1,i2,i3;\n      private OrderedArray&lt;Integer&gt; orderedArray;\n\n      @Before\n      public void createOrderedArray(){\n        i1 = -12;\n        i2 = 0;\n        i3 = 4;\n        orderedArray = new OrderedArray&lt;&gt;(new IntegerComparator());\n      }\n\n      @Test\n      public void testIsEmpty_zeroEl(){\n        assertTrue(orderedArray.isEmpty());\n      }\n\n      @Test\n      public void testIsEmpty_oneEl() throws Exception{\n        orderedArray.add(i1);\n        assertFalse(orderedArray.isEmpty());\n      }\n\n\n      @Test\n      public void testSize_zeroEl() throws Exception{\n        assertEquals(0,orderedArray.size());\n      }\n\n    }\n</code></pre>\n"},{"tags":["java","arrays","string","line"],"answers":[{"comments":[{"owner":{"account_id":2163634,"reputation":1349,"user_id":1917215,"accept_rate":75,"display_name":"user1231232141214124"},"score":0,"creation_date":1449771884,"post_id":34209035,"comment_id":56162450,"body_markdown":"I don&#39;t think thats what he was looking for. `line` will be overwritten every time so its kind of pointless to even declare it. Why not just `println(input.nextLine())` ? `String line = ...` is kind of redundant.","body":"I don&#39;t think thats what he was looking for. <code>line</code> will be overwritten every time so its kind of pointless to even declare it. Why not just <code>println(input.nextLine())</code> ? <code>String line = ...</code> is kind of redundant."}],"tags":[],"owner":{"account_id":4301027,"reputation":3755,"user_id":3514736,"accept_rate":42,"display_name":"Rahman"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1449822302,"creation_date":1449771691,"answer_id":34209035,"question_id":34208962,"body_markdown":"    File file = new File(fileName);\r\n    Scanner input = new Scanner(file);\r\n    while (input.hasNextLine()) {\r\n      System.out.println(input.nextLine());\r\n    }","title":"Read a text file line by line into strings","body":"<pre><code>File file = new File(fileName);\nScanner input = new Scanner(file);\nwhile (input.hasNextLine()) {\n  System.out.println(input.nextLine());\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4254130,"reputation":13758,"user_id":3480246,"display_name":"Jan"},"score":0,"creation_date":1449774158,"post_id":34209110,"comment_id":56163549,"body_markdown":"You don&#39;t need to know it&#39;s an ArrayList. Coding `List&lt;String&gt; arrayList = new ArrayList&lt;String&gt;();` is cleaner","body":"You don&#39;t need to know it&#39;s an ArrayList. Coding <code>List&lt;String&gt; arrayList = new ArrayList&lt;String&gt;();</code> is cleaner"},{"owner":{"account_id":7421543,"reputation":2874,"user_id":5645656,"accept_rate":100,"display_name":"Cardinal System"},"score":0,"creation_date":1449784035,"post_id":34209110,"comment_id":56169034,"body_markdown":"I&#39;m using Eclipse.\n\n Next to `arrayList.add(Input.nextLine());` there is an error that says  `Multiple markers at this line\n\t- Syntax error on token &quot;)&quot;, ; expected\n\t- implements \n\t java.awt.event.ActionListener.actionPerformed\n\t- Syntax error on token &quot;(&quot;, ; expected`\n\nand next to `File file = new File(fileName);` there is an error that says `fileName cannot be resolved to a variable` \n\nThis also causes errors in other parts of my class.","body":"I&#39;m using Eclipse.   Next to <code>arrayList.add(Input.nextLine());</code> there is an error that says  <code>Multiple markers at this line \t- Syntax error on token &quot;)&quot;, ; expected \t- implements  \t java.awt.event.ActionListener.actionPerformed \t- Syntax error on token &quot;(&quot;, ; expected</code>  and next to <code>File file = new File(fileName);</code> there is an error that says <code>fileName cannot be resolved to a variable</code>   This also causes errors in other parts of my class."},{"owner":{"account_id":7421543,"reputation":2874,"user_id":5645656,"accept_rate":100,"display_name":"Cardinal System"},"score":0,"creation_date":1449784608,"post_id":34209110,"comment_id":56169386,"body_markdown":"Also, where do I put the path leading to the txt file?","body":"Also, where do I put the path leading to the txt file?"},{"owner":{"account_id":5999644,"reputation":539,"user_id":4713326,"accept_rate":73,"display_name":"Kevin Mee"},"score":0,"creation_date":1449845371,"post_id":34209110,"comment_id":56196322,"body_markdown":"You put the filepath where `fileName` is. Like this: `File file = new File(&quot;ThisIsYourFilePath.txt&quot;);`","body":"You put the filepath where <code>fileName</code> is. Like this: <code>File file = new File(&quot;ThisIsYourFilePath.txt&quot;);</code>"}],"tags":[],"owner":{"account_id":5999644,"reputation":539,"user_id":4713326,"accept_rate":73,"display_name":"Kevin Mee"},"comment_count":4,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1492856810,"creation_date":1449771965,"answer_id":34209110,"question_id":34208962,"body_markdown":"You should use an `ArrayList`.\r\n\r\n    File file = new File(fileName);\r\n    Scanner input = new Scanner(file);\r\n    List&lt;String&gt; list = new ArrayList&lt;String&gt;();\r\n    \r\n    while (input.hasNextLine()) {\r\n        list.add(input.nextLine());\r\n    }\r\n\r\nThen you can access to one specific element of your list from its index as next:\r\n\r\n    System.out.println(list.get(0));\r\n\r\nwhich will give you the first line (ie: Purlplemonkeys)","title":"Read a text file line by line into strings","body":"<p>You should use an <code>ArrayList</code>.</p>\n\n<pre><code>File file = new File(fileName);\nScanner input = new Scanner(file);\nList&lt;String&gt; list = new ArrayList&lt;String&gt;();\n\nwhile (input.hasNextLine()) {\n    list.add(input.nextLine());\n}\n</code></pre>\n\n<p>Then you can access to one specific element of your list from its index as next:</p>\n\n<pre><code>System.out.println(list.get(0));\n</code></pre>\n\n<p>which will give you the first line (ie: Purlplemonkeys)</p>\n"},{"tags":[],"owner":{"account_id":4254130,"reputation":13758,"user_id":3480246,"display_name":"Jan"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1449774106,"creation_date":1449774106,"answer_id":34209674,"question_id":34208962,"body_markdown":"How about using [commons-io][1]:\r\n\r\n    List&lt;String&gt; lines = org.apache.commons.io.IOUtils.readLines(new FileReader(file));\r\n\r\n    //Direct access if enough lines read\r\n    if(lines.size() &gt; 2) {\r\n      String line1 = lines.get(0);\r\n      String line2 = lines.get(1);\r\n    }\r\n\r\n    //Iterate over all lines\r\n    for(String line : lines) {\r\n      //Do something with lines\r\n    }\r\n\r\n    //Using Lambdas\r\n    list.forEach(line -&gt; {\r\n\t  //Do something with line\r\n    });\r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-io/apidocs/org/apache/commons/io/IOUtils.html","title":"Read a text file line by line into strings","body":"<p>How about using <a href=\"https://commons.apache.org/proper/commons-io/apidocs/org/apache/commons/io/IOUtils.html\" rel=\"nofollow\">commons-io</a>:</p>\n\n<pre><code>List&lt;String&gt; lines = org.apache.commons.io.IOUtils.readLines(new FileReader(file));\n\n//Direct access if enough lines read\nif(lines.size() &gt; 2) {\n  String line1 = lines.get(0);\n  String line2 = lines.get(1);\n}\n\n//Iterate over all lines\nfor(String line : lines) {\n  //Do something with lines\n}\n\n//Using Lambdas\nlist.forEach(line -&gt; {\n  //Do something with line\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1170165,"reputation":23155,"user_id":1147529,"accept_rate":95,"display_name":"Paulius Matulionis"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1449822887,"creation_date":1449822887,"answer_id":34219164,"question_id":34208962,"body_markdown":"Sinse JDK 7 is quite easy to read a file into lines:\r\n\r\n    List&lt;String&gt; lines = Files.readAllLines(new File(&quot;text.txt&quot;).toPath())\r\n\r\n    String p1 = lines.get(0);\r\n    String p2 = lines.get(1);\r\n","title":"Read a text file line by line into strings","body":"<p>Sinse JDK 7 is quite easy to read a file into lines:</p>\n\n<pre><code>List&lt;String&gt; lines = Files.readAllLines(new File(\"text.txt\").toPath())\n\nString p1 = lines.get(0);\nString p2 = lines.get(1);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3005685,"reputation":1397,"user_id":2550273,"accept_rate":50,"display_name":"Rustam"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1449822942,"creation_date":1449822942,"answer_id":34219171,"question_id":34208962,"body_markdown":"You can read text file to list:\r\n\r\n    List&lt;String&gt; lst = Files.readAllLines(Paths.get(&quot;C:\\\\test.txt&quot;));\r\n\r\nand then access each line as you want\r\n\r\nP.S. Files - java.nio.file.Files","title":"Read a text file line by line into strings","body":"<p>You can read text file to list:</p>\n\n<pre><code>List&lt;String&gt; lst = Files.readAllLines(Paths.get(\"C:\\\\test.txt\"));\n</code></pre>\n\n<p>and then access each line as you want</p>\n\n<p>P.S. Files - java.nio.file.Files</p>\n"},{"comments":[{"owner":{"account_id":7421543,"reputation":2874,"user_id":5645656,"accept_rate":100,"display_name":"Cardinal System"},"score":0,"creation_date":1521905290,"post_id":34219343,"comment_id":85935526,"body_markdown":"My personal favorite approach :)","body":"My personal favorite approach :)"},{"owner":{"account_id":1744260,"reputation":14886,"user_id":1594823,"accept_rate":64,"display_name":"Saikat"},"score":2,"creation_date":1527311199,"post_id":34219343,"comment_id":88090718,"body_markdown":"The method readAllLines(Path) in the type Files is not applicable for the arguments (File)","body":"The method readAllLines(Path) in the type Files is not applicable for the arguments (File)"}],"tags":[],"owner":{"account_id":1313746,"reputation":4358,"user_id":1261166,"accept_rate":87,"display_name":"Viktor Mellgren"},"comment_count":2,"down_vote_count":2,"up_vote_count":5,"is_accepted":false,"score":3,"last_activity_date":1666875338,"creation_date":1449823591,"answer_id":34219343,"question_id":34208962,"body_markdown":"If you use Java 7 or later\r\n\r\n    List&lt;String&gt; lines = Files.readAllLines(new File(fileName).toPath());\r\n \r\n    for(String line : lines){\r\n       // Do whatever you want\r\n       System.out.println(line);\r\n    }","title":"Read a text file line by line into strings","body":"<p>If you use Java 7 or later</p>\n<pre><code>List&lt;String&gt; lines = Files.readAllLines(new File(fileName).toPath());\n\nfor(String line : lines){\n   // Do whatever you want\n   System.out.println(line);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1590496,"reputation":1304,"user_id":1473907,"accept_rate":73,"display_name":"mcacorner"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1531370066,"creation_date":1531300796,"answer_id":51281732,"question_id":34208962,"body_markdown":"You can use `apache.commons.io.LineIterator`&lt;br/&gt;\r\n\r\n\r\n    LineIterator it = FileUtils.lineIterator(file, &quot;UTF-8&quot;);\r\n     try {\r\n       while (it.hasNext()) {\r\n         String line = it.nextLine();\r\n         // do something with line\r\n       }\r\n     } finally {\r\n       it.close();\r\n     }\r\n\r\nOne can also validate line by overriding `boolean isValidLine(String line)` method.\r\n[refer doc][1]\r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-io/javadocs/api-2.5/org/apache/commons/io/LineIterator.html","title":"Read a text file line by line into strings","body":"<p>You can use <code>apache.commons.io.LineIterator</code><br/></p>\n\n<pre><code>LineIterator it = FileUtils.lineIterator(file, \"UTF-8\");\n try {\n   while (it.hasNext()) {\n     String line = it.nextLine();\n     // do something with line\n   }\n } finally {\n   it.close();\n }\n</code></pre>\n\n<p>One can also validate line by overriding <code>boolean isValidLine(String line)</code> method.\n<a href=\"https://commons.apache.org/proper/commons-io/javadocs/api-2.5/org/apache/commons/io/LineIterator.html\" rel=\"nofollow noreferrer\">refer doc</a></p>\n"}],"owner":{"account_id":7421543,"reputation":2874,"user_id":5645656,"accept_rate":100,"display_name":"Cardinal System"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28872,"favorite_count":0,"down_vote_count":2,"up_vote_count":4,"accepted_answer_id":34209110,"answer_count":7,"score":2,"last_activity_date":1666875338,"creation_date":1449771403,"question_id":34208962,"body_markdown":"How do I read the contents of a text file line by line into `String` without using a `BufferedReader`?\r\n\r\nFor example, I have a text file that looks like this inside:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    Purlplemonkeys\r\n    greenGorilla\r\n\r\nI would want to create two `strings`, then use something like this\r\n\r\n    File file = new File(System.getProperty(&quot;user.dir&quot;) + &quot;\\Textfile.txt&quot;);\r\n    String str = new String(file.nextLine());\r\n    String str2 = new String(file.nextLine());\r\n\r\nThat way it assigns `str` the value of `&quot;Purlplemonkeys&quot;`, and `str2` the value of `&quot;greenGorilla&quot;`.\r\n\r\n\r\n","title":"Read a text file line by line into strings","body":"<p>How do I read the contents of a text file line by line into <code>String</code> without using a <code>BufferedReader</code>?</p>\n\n<p>For example, I have a text file that looks like this inside:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Purlplemonkeys\ngreenGorilla\n</code></pre>\n\n<p>I would want to create two <code>strings</code>, then use something like this</p>\n\n<pre><code>File file = new File(System.getProperty(\"user.dir\") + \"\\Textfile.txt\");\nString str = new String(file.nextLine());\nString str2 = new String(file.nextLine());\n</code></pre>\n\n<p>That way it assigns <code>str</code> the value of <code>\"Purlplemonkeys\"</code>, and <code>str2</code> the value of <code>\"greenGorilla\"</code>.</p>\n"},{"tags":["java","firebase","firebase-realtime-database","firebase-storage"],"answers":[{"comments":[{"owner":{"account_id":8092293,"reputation":1327,"user_id":6097845,"display_name":"user6097845"},"score":0,"creation_date":1666872415,"post_id":74219892,"comment_id":131040894,"body_markdown":"can you explain why it depends in the number of times this image is displayed?","body":"can you explain why it depends in the number of times this image is displayed?"},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1666944046,"post_id":74219892,"comment_id":131058700,"body_markdown":"Please check my updated answer. Is it clear now?","body":"Please check my updated answer. Is it clear now?"},{"owner":{"account_id":8092293,"reputation":1327,"user_id":6097845,"display_name":"user6097845"},"score":0,"creation_date":1667141290,"post_id":74219892,"comment_id":131095525,"body_markdown":"but you can still get the download URL, using storage ref and getDownloadURL (please see my example), and that can be done even after the initial upload. It requires an extra call to Firestore, but saves the need to store the downloadURL. So my question is if this is a valid technique, or is it better to always save the downloadURL?","body":"but you can still get the download URL, using storage ref and getDownloadURL (please see my example), and that can be done even after the initial upload. It requires an extra call to Firestore, but saves the need to store the downloadURL. So my question is if this is a valid technique, or is it better to always save the downloadURL?"},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1667203459,"post_id":74219892,"comment_id":131106389,"body_markdown":"Yes, but you also need to store the path of the file somewhere. So instead of storing the path,  the best option that you have is to save the URL in an online database. That&#39;s also a valid technique, but it&#39;s not recommended to have dynamic data in your application code. Only constants should be saved in the application&#39;s code. Is it ok now?","body":"Yes, but you also need to store the path of the file somewhere. So instead of storing the path,  the best option that you have is to save the URL in an online database. That&#39;s also a valid technique, but it&#39;s not recommended to have dynamic data in your application code. Only constants should be saved in the application&#39;s code. Is it ok now?"},{"owner":{"account_id":8092293,"reputation":1327,"user_id":6097845,"display_name":"user6097845"},"score":0,"creation_date":1667216917,"post_id":74219892,"comment_id":131110379,"body_markdown":"Actually, the DB path can be &quot;computed&quot; ( _users/[userID]/avatar and _users/[userID]/avatar_thumb ). is that what you mean by &quot;dynamic data in your application code&quot;?","body":"Actually, the DB path can be &quot;computed&quot; ( _users/[userID]/avatar and _users/[userID]/avatar_thumb ). is that what you mean by &quot;dynamic data in your application code&quot;?"},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1667219748,"post_id":74219892,"comment_id":131111339,"body_markdown":"If you can create the path to a file using only the data that you already have in your application code, then there is no need to save something in the database. You can directly get the download URL.","body":"If you can create the path to a file using only the data that you already have in your application code, then there is no need to save something in the database. You can directly get the download URL."},{"owner":{"account_id":8092293,"reputation":1327,"user_id":6097845,"display_name":"user6097845"},"score":0,"creation_date":1667498525,"post_id":74219892,"comment_id":131186805,"body_markdown":"indeed, but it requires an extra call (to get the download URL) - so this got me wondered...","body":"indeed, but it requires an extra call (to get the download URL) - so this got me wondered..."},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1667502939,"post_id":74219892,"comment_id":131188116,"body_markdown":"Yes, that&#39;s an extra call to Storage. That indeed it&#39;s an async call.","body":"Yes, that&#39;s an extra call to Storage. That indeed it&#39;s an async call."}],"tags":[],"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"comment_count":8,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1666875221,"creation_date":1666863499,"answer_id":74219892,"question_id":74196071,"body_markdown":"If you only need to display the image once, then you can only use the `downloadURL` when you upload the image to Cloud Storage. If you need to display the image more than once, then you can store the image URL either in [Firestore][1] or in the [Realtime Database][2], and get it from there whenever you need it.\r\n\r\n**Edit:**\r\n\r\nWhen you display an image only once, then there is no need to save the URL in a database, because you&#39;ll get it in the callback when the upload to Cloud Storage operation completes. If you need to display the image sometime later, you don&#39;t have to upload the image again, in order to display it, you can only grab the URL from the database and display the image.\r\n\r\n  [1]: https://firebase.google.com/docs/firestore\r\n  [2]: https://firebase.google.com/docs/database","title":"Firebase storage use getDownloadURL vs store download link","body":"<p>If you only need to display the image once, then you can only use the <code>downloadURL</code> when you upload the image to Cloud Storage. If you need to display the image more than once, then you can store the image URL either in <a href=\"https://firebase.google.com/docs/firestore\" rel=\"nofollow noreferrer\">Firestore</a> or in the <a href=\"https://firebase.google.com/docs/database\" rel=\"nofollow noreferrer\">Realtime Database</a>, and get it from there whenever you need it.</p>\n<p><strong>Edit:</strong></p>\n<p>When you display an image only once, then there is no need to save the URL in a database, because you'll get it in the callback when the upload to Cloud Storage operation completes. If you need to display the image sometime later, you don't have to upload the image again, in order to display it, you can only grab the URL from the database and display the image.</p>\n"}],"owner":{"account_id":8092293,"reputation":1327,"user_id":6097845,"display_name":"user6097845"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":786,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":74219892,"answer_count":1,"score":3,"last_activity_date":1666875221,"creation_date":1666709777,"question_id":74196071,"body_markdown":"I&#39;m uploading images to Firebase Storage.  \r\n\r\nWhat would be a better approach to show the image in my app?\r\n\r\nUse the `getDownloadURL` on `imageRef` like so:\r\n\r\n    final storageRef = FirebaseStorage.instance.ref();\r\n    final imagesRef = storageRef.child(&quot;images/image.jpg&quot;);\r\n    final String downloadLink = imagesRef.getDownloadURL();\r\n\r\nOr saving the downloadLink (when putting the file in storage) is Firestore DB?\r\n\r\nThe motivation for this is to access thumbnails:\r\n1. An image is uploaded to the storage\r\n2. A cloud function is generating a thumbnail\r\n3. Instead of saving the thumbnail download link, it can be retrieved using the sample code\r\n\r\nlike so:\r\n\r\n    final storageRef = FirebaseStorage.instance.ref();\r\n    final thumbRef = storageRef.child(&quot;images/thumb_image.jpg&quot;);\r\n    final String downloadLink = imagesRef.getDownloadURL();\r\n\r\n\r\n","title":"Firebase storage use getDownloadURL vs store download link","body":"<p>I'm uploading images to Firebase Storage.</p>\n<p>What would be a better approach to show the image in my app?</p>\n<p>Use the <code>getDownloadURL</code> on <code>imageRef</code> like so:</p>\n<pre><code>final storageRef = FirebaseStorage.instance.ref();\nfinal imagesRef = storageRef.child(&quot;images/image.jpg&quot;);\nfinal String downloadLink = imagesRef.getDownloadURL();\n</code></pre>\n<p>Or saving the downloadLink (when putting the file in storage) is Firestore DB?</p>\n<p>The motivation for this is to access thumbnails:</p>\n<ol>\n<li>An image is uploaded to the storage</li>\n<li>A cloud function is generating a thumbnail</li>\n<li>Instead of saving the thumbnail download link, it can be retrieved using the sample code</li>\n</ol>\n<p>like so:</p>\n<pre><code>final storageRef = FirebaseStorage.instance.ref();\nfinal thumbRef = storageRef.child(&quot;images/thumb_image.jpg&quot;);\nfinal String downloadLink = imagesRef.getDownloadURL();\n</code></pre>\n"},{"tags":["java","json","spring","encryption"],"comments":[{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":1,"creation_date":1666874690,"post_id":74222175,"comment_id":131041734,"body_markdown":"Maybe that IV is not correct or not base 64 encoded. What you get is about what you get if the IV is incorrect. As you can see [here](https://en.wikipedia.org/wiki/Block_cipher_mode_of_operation#/media/File:CBC_decryption.svg) it is XOR&#39;ed with the result of block cipher decryption. As you only get about 9 bad bytes you can tell that the IV decoding is not correct, as the last bytes are probably zero&#39;ed out and thus OK. I&#39;d try `iv.toBytes(StandardCharsets.US_ASCII)` instead of base 64 decoding first.","body":"Maybe that IV is not correct or not base 64 encoded. What you get is about what you get if the IV is incorrect. As you can see <a href=\"https://en.wikipedia.org/wiki/Block_cipher_mode_of_operation#/media/File:CBC_decryption.svg\" rel=\"nofollow noreferrer\">here</a> it is XOR&#39;ed with the result of block cipher decryption. As you only get about 9 bad bytes you can tell that the IV decoding is not correct, as the last bytes are probably zero&#39;ed out and thus OK. I&#39;d try <code>iv.toBytes(StandardCharsets.US_ASCII)</code> instead of base 64 decoding first."},{"owner":{"account_id":26714866,"reputation":3,"user_id":20319609,"display_name":"jhon"},"score":0,"creation_date":1666878053,"post_id":74222175,"comment_id":131043075,"body_markdown":"@MaartenBodewes i think your correct i made it like this `iv.getBytes(StandardCharsets.US_ASCII)`  and the `+\\r+pvb);` in output is changing to like a wildcard or something `���z�j��k���` like this. what to do next?","body":"@MaartenBodewes i think your correct i made it like this <code>iv.getBytes(StandardCharsets.US_ASCII)</code>  and the <code>+\\r+pvb);</code> in output is changing to like a wildcard or something <code>���z�j��k���</code> like this. what to do next?"},{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":0,"creation_date":1666878315,"post_id":74222175,"comment_id":131043197,"body_markdown":"What happens if you use the empty string? There is two things you can do: 1) keep guessing how the IV is encoded or 2) take the output **bytes** after decryption and XOR those with the ASCII of `&quot;teacher&quot;: ` as that will give you the IV... XOR works both ways :) Of course, without doing this myself, I cannot tell what kind of IV is used. Furthermore, I don&#39;t know if the bad decryption displayed contains any non-printable characters and such, so I might be missing bytes.","body":"What happens if you use the empty string? There is two things you can do: 1) keep guessing how the IV is encoded or 2) take the output <b>bytes</b> after decryption and XOR those with the ASCII of <code>&quot;teacher&quot;: </code> as that will give you the IV... XOR works both ways :) Of course, without doing this myself, I cannot tell what kind of IV is used. Furthermore, I don&#39;t know if the bad decryption displayed contains any non-printable characters and such, so I might be missing bytes."},{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":1,"creation_date":1666894462,"post_id":74222175,"comment_id":131049089,"body_markdown":"Top. I don&#39;t think the question / answer will directly benefit anybody else and the iv handling has duplicates. So you can remove the question or self- answer it (so it doesn&#39;t stay open) :)","body":"Top. I don&#39;t think the question / answer will directly benefit anybody else and the iv handling has duplicates. So you can remove the question or self- answer it (so it doesn&#39;t stay open) :)"}],"owner":{"account_id":26714866,"reputation":3,"user_id":20319609,"display_name":"jhon"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1666874883,"creation_date":1666874315,"question_id":74222175,"body_markdown":"\r\nImplemeting decrypt all everything and output will same as payload.\r\n\r\nBut i only manage to get the path of `teacher` key. and also the teacher key is missing.\r\nis there is also way to get the student and teacher at desame time?\r\n\r\n```\r\nimport javax.crypto.spec.SecretKeySpec;\r\nimport java.io.FileReader;\r\nimport java.util.Base64;\r\nimport org.json.simple.JSONObject;\r\nimport org.json.simple.parser.JSONParser;\r\nimport javax.crypto.Cipher;\r\nimport javax.crypto.spec.IvParameterSpec;\r\n\r\npublic class TestClass{\r\npublic static void main( String[] args ) throws Exception {\r\n\r\n    String secret = &quot;secret&quot;;\r\n\r\n    JSONParser parser = new JSONParser();\r\n    Object object = parser.parse(new FileReader(&quot;src/main/resources/test.json&quot;));\r\n\r\n    JSONObject jsonObject = (JSONObject) object;\r\n\r\n    JSONObject teacher = (JSONObject)jsonObject.get(&quot;teacher&quot;);\r\n    String encrypt= (String) teacher.get(&quot;profile&quot;);\r\n\r\n    String iv = (String) teacher.get(&quot;iv&quot;);\r\n\r\n    byte[] newKey = Base64.getDecoder().decode(secret);\r\n    byte[] IVTest = Base64.getDecoder().decode(iv);\r\n\r\n    String Decrypt = decryption(encrypt,newKey, IVTest);\r\n    System.out.println(&quot;Decrypt output : &quot;+ Decrypt);\r\n}\r\n\r\npublic static String decryption (String cipherText, byte[] myKey,byte[] IV) throws Exception {\r\n    Cipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5Padding&quot;);\r\n    SecretKeySpec keySpec = new SecretKeySpec(myKey, &quot;AES&quot;);\r\n    IvParameterSpec ivSpec = new IvParameterSpec(IV);\r\n    cipher.init(Cipher.DECRYPT_MODE, keySpec, ivSpec);\r\n    byte[] decryptedText = cipher.doFinal(Base64.getDecoder().decode(cipherText));\r\n    return new String(decryptedText);\r\n}\r\n}\r\n```\r\n\r\nJson payload\r\n```\r\n\r\n{\r\n  &quot;student&quot;: {\r\n    &quot;firstname&quot;: &quot;Joan&quot;,\r\n    &quot;lastname&quot;: &quot;lastname&quot;\r\n  },\r\n  &quot;teacher&quot;: {\r\n    &quot;profile&quot;: {\r\n      &quot;firstname&quot;: &quot;Mary&quot;,\r\n      &quot;lastname&quot;: &quot;lastname&quot;\r\n    },\r\n    &quot;iv&quot;: &quot;ivvvv&quot;\r\n\r\n  }\r\n}\r\n\r\n```\r\nOutput of decryption\r\n```\r\n\r\n +\\r+pvb);{\r\n    &quot;profile&quot;: {\r\n      &quot;firstname&quot;: &quot;Mary&quot;,\r\n      &quot;lastname&quot;: &quot;lastname&quot;\r\n    },\r\n    &quot;iv&quot;: &quot;ivvvv&quot;\r\n\r\n  }\r\n}\r\n\r\n```\r\n","title":"Decryption not able to get all the value and key","body":"<p>Implemeting decrypt all everything and output will same as payload.</p>\n<p>But i only manage to get the path of <code>teacher</code> key. and also the teacher key is missing.\nis there is also way to get the student and teacher at desame time?</p>\n<pre><code>import javax.crypto.spec.SecretKeySpec;\nimport java.io.FileReader;\nimport java.util.Base64;\nimport org.json.simple.JSONObject;\nimport org.json.simple.parser.JSONParser;\nimport javax.crypto.Cipher;\nimport javax.crypto.spec.IvParameterSpec;\n\npublic class TestClass{\npublic static void main( String[] args ) throws Exception {\n\n    String secret = &quot;secret&quot;;\n\n    JSONParser parser = new JSONParser();\n    Object object = parser.parse(new FileReader(&quot;src/main/resources/test.json&quot;));\n\n    JSONObject jsonObject = (JSONObject) object;\n\n    JSONObject teacher = (JSONObject)jsonObject.get(&quot;teacher&quot;);\n    String encrypt= (String) teacher.get(&quot;profile&quot;);\n\n    String iv = (String) teacher.get(&quot;iv&quot;);\n\n    byte[] newKey = Base64.getDecoder().decode(secret);\n    byte[] IVTest = Base64.getDecoder().decode(iv);\n\n    String Decrypt = decryption(encrypt,newKey, IVTest);\n    System.out.println(&quot;Decrypt output : &quot;+ Decrypt);\n}\n\npublic static String decryption (String cipherText, byte[] myKey,byte[] IV) throws Exception {\n    Cipher cipher = Cipher.getInstance(&quot;AES/CBC/PKCS5Padding&quot;);\n    SecretKeySpec keySpec = new SecretKeySpec(myKey, &quot;AES&quot;);\n    IvParameterSpec ivSpec = new IvParameterSpec(IV);\n    cipher.init(Cipher.DECRYPT_MODE, keySpec, ivSpec);\n    byte[] decryptedText = cipher.doFinal(Base64.getDecoder().decode(cipherText));\n    return new String(decryptedText);\n}\n}\n</code></pre>\n<p>Json payload</p>\n<pre><code>\n{\n  &quot;student&quot;: {\n    &quot;firstname&quot;: &quot;Joan&quot;,\n    &quot;lastname&quot;: &quot;lastname&quot;\n  },\n  &quot;teacher&quot;: {\n    &quot;profile&quot;: {\n      &quot;firstname&quot;: &quot;Mary&quot;,\n      &quot;lastname&quot;: &quot;lastname&quot;\n    },\n    &quot;iv&quot;: &quot;ivvvv&quot;\n\n  }\n}\n\n</code></pre>\n<p>Output of decryption</p>\n<pre><code>\n +\\r+pvb);{\n    &quot;profile&quot;: {\n      &quot;firstname&quot;: &quot;Mary&quot;,\n      &quot;lastname&quot;: &quot;lastname&quot;\n    },\n    &quot;iv&quot;: &quot;ivvvv&quot;\n\n  }\n}\n\n</code></pre>\n"},{"tags":["java","multithreading","concurrency"],"answers":[{"comments":[{"owner":{"account_id":120116,"reputation":1626,"user_id":312331,"display_name":"blucz"},"score":1,"creation_date":1283478558,"post_id":3632362,"comment_id":3816851,"body_markdown":"Your first example doesn&#39;t make sense because there is no guarantee of a deterministic single clock relating operations on multiple CPUs. Also, virtually all CPUs in common use guarantee that happens-before isn&#39;t violated with respect to a single memory address--you need multiple memory addresses to illustrate the concept effectively. Once you get rid of the broken single-clock idea, you&#39;re left with viewing the operations from the perspective of one thread at a time, at which point your example boils down to simple thread interference.","body":"Your first example doesn&#39;t make sense because there is no guarantee of a deterministic single clock relating operations on multiple CPUs. Also, virtually all CPUs in common use guarantee that happens-before isn&#39;t violated with respect to a single memory address--you need multiple memory addresses to illustrate the concept effectively. Once you get rid of the broken single-clock idea, you&#39;re left with viewing the operations from the perspective of one thread at a time, at which point your example boils down to simple thread interference."},{"owner":{"account_id":131213,"reputation":47334,"user_id":331052,"display_name":"Affe"},"score":0,"creation_date":1283528815,"post_id":3632362,"comment_id":3822573,"body_markdown":"While everything you&#39;ve written is correct, I don&#39;t think it helps OP with his goal of learning to write a safe java program.  The Java Virtual Machine has its own internal memory model that isolates the program from the nuances of the underlying platform.  The example I gave is the problem that he will actually run into in an improperly written java program, although as you say not strictly fitting a computer engineering definition of a memory consistency issue.","body":"While everything you&#39;ve written is correct, I don&#39;t think it helps OP with his goal of learning to write a safe java program.  The Java Virtual Machine has its own internal memory model that isolates the program from the nuances of the underlying platform.  The example I gave is the problem that he will actually run into in an improperly written java program, although as you say not strictly fitting a computer engineering definition of a memory consistency issue."},{"owner":{"account_id":120116,"reputation":1626,"user_id":312331,"display_name":"blucz"},"score":1,"creation_date":1283724354,"post_id":3632362,"comment_id":3835824,"body_markdown":"I suggest you check your understanding of the JVM specification. The JVM does not hide the &quot;nuances&quot; that I was using as examples. The point I&#39;m making is that both of your examples are thread interference. MCE&#39;s *must* involve the underlying platform, by definition.","body":"I suggest you check your understanding of the JVM specification. The JVM does not hide the &quot;nuances&quot; that I was using as examples. The point I&#39;m making is that both of your examples are thread interference. MCE&#39;s <i>must</i> involve the underlying platform, by definition."},{"owner":{"account_id":131213,"reputation":47334,"user_id":331052,"display_name":"Affe"},"score":0,"creation_date":1283889921,"post_id":3632362,"comment_id":3853156,"body_markdown":"For whatever arguing on the internet in a week old thread is worth -  That example is the Sun/Oracle tutorial&#39;s example of a Memory Consistency problem that the OP referred to in his question.  So I tried to supplement it with some more information to make the difference between the two examples more clear to him.  If the original article is wrong, I guess we should let Oracle know! :)","body":"For whatever arguing on the internet in a week old thread is worth -  That example is the Sun/Oracle tutorial&#39;s example of a Memory Consistency problem that the OP referred to in his question.  So I tried to supplement it with some more information to make the difference between the two examples more clear to him.  If the original article is wrong, I guess we should let Oracle know! :)"}],"tags":[],"owner":{"account_id":131213,"reputation":47334,"user_id":331052,"display_name":"Affe"},"comment_count":4,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1283529185,"creation_date":1283475682,"answer_id":3632362,"question_id":3632299,"body_markdown":"Memory Consistency problems are normally manifest as broken happens-before relationships.\r\n\r\n    Time A: Thread 1 sets int i = 1\r\n    Time B: Thread 2 sets i = 2\r\n    Time C: Thread 1 reads i, but still sees a value of 1, because of any number of reasons that it did not get the most recent stored value in memory.\r\n\r\nYou prevent this from happening either by using the `volatile` keyword on the variable, or by using the AtomicX classes from the `java.util.concurrent.atomic` package.  Either of these messages makes sure that no second thread will see a partially modified value, and no one will ever see a value that isn&#39;t the most current real value in memory.\r\n\r\n(Synchronizing the getter and setter would also fix the problem, but may look strange to other programmers who don&#39;t know why you did it, and can also break down in the face of things like binding frameworks and persistence frameworks that use reflection.)\r\n\r\n--\r\n\r\nThread interleaves are when two threads munge an object up and see inconsistent states.\r\n\r\nWe have a PurchaseOrder object with an itemQuantity and itemPrice, automatic logic generates the invoice total.\r\n\r\n    Time 0: Thread 1 sets itemQuantity 50\r\n    Time 1: Thread 2 sets itemQuantity 100\r\n    Time 2: Thread 1 sets itemPrice 2.50, invoice total is calculated $250\r\n    Time 3: Thread 2 sets itemPrice 3, invoice total is calculated at $300\r\n\r\nThread 1 performed an incorrect calculation because some other thread was messing with the object in between his operations.\r\n\r\nYou address this issue either by using the `synchronized` keyword, to make sure only one person can perform the entire process at a time, or alternately with a lock from the `java.util.concurrent.locks` package.  Using java.util.concurrent is generally the preferred approach for new programs.","title":"Memory Consistency Errors vs Thread interference","body":"<p>Memory Consistency problems are normally manifest as broken happens-before relationships.</p>\n\n<pre><code>Time A: Thread 1 sets int i = 1\nTime B: Thread 2 sets i = 2\nTime C: Thread 1 reads i, but still sees a value of 1, because of any number of reasons that it did not get the most recent stored value in memory.\n</code></pre>\n\n<p>You prevent this from happening either by using the <code>volatile</code> keyword on the variable, or by using the AtomicX classes from the <code>java.util.concurrent.atomic</code> package.  Either of these messages makes sure that no second thread will see a partially modified value, and no one will ever see a value that isn't the most current real value in memory.</p>\n\n<p>(Synchronizing the getter and setter would also fix the problem, but may look strange to other programmers who don't know why you did it, and can also break down in the face of things like binding frameworks and persistence frameworks that use reflection.)</p>\n\n<p>--</p>\n\n<p>Thread interleaves are when two threads munge an object up and see inconsistent states.</p>\n\n<p>We have a PurchaseOrder object with an itemQuantity and itemPrice, automatic logic generates the invoice total.</p>\n\n<pre><code>Time 0: Thread 1 sets itemQuantity 50\nTime 1: Thread 2 sets itemQuantity 100\nTime 2: Thread 1 sets itemPrice 2.50, invoice total is calculated $250\nTime 3: Thread 2 sets itemPrice 3, invoice total is calculated at $300\n</code></pre>\n\n<p>Thread 1 performed an incorrect calculation because some other thread was messing with the object in between his operations.</p>\n\n<p>You address this issue either by using the <code>synchronized</code> keyword, to make sure only one person can perform the entire process at a time, or alternately with a lock from the <code>java.util.concurrent.locks</code> package.  Using java.util.concurrent is generally the preferred approach for new programs.</p>\n"},{"tags":[],"owner":{"account_id":120116,"reputation":1626,"user_id":312331,"display_name":"blucz"},"comment_count":0,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1666874765,"creation_date":1283476422,"answer_id":3632400,"question_id":3632299,"body_markdown":"**Memory consistency errors** can&#39;t be understood purely in the context of java--the details of shared memory behavior on multi-cpu systems are highly architecture-specific, and to make it worse, x86 (where most people coding today learned to code) has pretty programmer-friendly semantics compared to architectures that were designed for multi-processor machines from the beginning (like POWER and SPARC), so most people really aren&#39;t used to thinking about memory access semantics. \r\n\r\nI&#39;ll give a common example of where memory consistency errors can get you into trouble. Assume for this example, that the initial value of &lt;code&gt;x&lt;/code&gt; is 3. Nearly all architectures guarantee that if one CPU executes the code:\r\n\r\n&lt;pre&gt;&lt;code&gt;STORE 4 -&gt; x     // x is a memory address\r\nSTORE 5 -&gt; x \r\n&lt;/code&gt;&lt;/pre&gt;\r\n\r\nand another CPU executes\r\n\r\n&lt;pre&gt;&lt;code&gt;LOAD x\r\nLOAD x\r\n&lt;/code&gt;&lt;/pre&gt;\r\n\r\nwill either see &lt;code&gt;3,3&lt;/code&gt;, &lt;code&gt;3,4&lt;/code&gt;, &lt;code&gt;4,4&lt;/code&gt;, &lt;code&gt;4,5&lt;/code&gt;, or &lt;code&gt;5,5&lt;/code&gt; from the perspective its two &lt;code&gt;LOAD&lt;/code&gt; instructions. Basically, CPUs guarantee that the order of writes to a single memory location is maintained from the perspective of all CPUs, even if the exact time that each of the writes become known to other CPUs is allowed to vary.\r\n\r\nWhere CPUs differ from one another tends to be in the guarantees they make about &lt;code&gt;LOAD&lt;/code&gt; and &lt;code&gt;STORE&lt;/code&gt; operations involving different memory addresses. Assume for this example, that the initial values of both &lt;code&gt;x&lt;/code&gt; and &lt;code&gt;y&lt;/code&gt; are 4.\r\n\r\n&lt;pre&gt;&lt;code&gt;STORE 5 -&gt; x   // x is a memory address\r\nSTORE 5 -&gt; y // y is a different memory address\r\n&lt;/code&gt;&lt;/pre&gt;\r\n\r\nthen another CPU executes\r\n\r\n&lt;pre&gt;&lt;code&gt;LOAD x\r\nLOAD y\r\n&lt;/code&gt;&lt;/pre&gt;\r\n\r\nIn this example, on some architectures, the second thread can see &lt;code&gt;4,4&lt;/code&gt;, &lt;code&gt;5,5&lt;/code&gt;, &lt;code&gt;4,5&lt;/code&gt;, OR &lt;code&gt;5,4&lt;/code&gt;. Ouch!\r\n\r\nMost architectures deal with memory at the granularity of a 32 or 64 bit word--this means that on a 32 bit POWER/SPARC machine, you can&#39;t update a 64-bit integer memory location and safely read it from another thread _ever_ without explicit synchronization. Goofy, huh?\r\n\r\n**Thread interference** is much simpler. The basic idea is that java doesn&#39;t guarantee that a single statement of java code executes atomically. For example, incrementing a value requires reading the value, incrementing it, then storing it again. So you can have &lt;code&gt;int x = 1&lt;/code&gt; after two threads  execute &lt;code&gt;x++&lt;/code&gt;, &lt;code&gt;x&lt;/code&gt; can end up as &lt;code&gt;2&lt;/code&gt; or &lt;code&gt;3&lt;/code&gt; depending on how the lower-level code interleaved (the lower-level abstract code at work here presumably looks like &lt;code&gt;LOAD x, INCREMENT, STORE x&lt;/code&gt;). The basic idea here is that java code is broken down into smaller atomic pieces and you don&#39;t get to make assumptions of how they interleave unless you use synchronization primitives explicitly.\r\n\r\n**For more information**, check out [this][1] paper. It&#39;s long and dry and written by a notorious asshole, but hey, it&#39;s pretty good too. Also check out [this][2] (or just google for &quot;double checked locking is broken&quot;). These memory reordering issues reared their ugly heads for many C++/java programmers who tried to get a little bit too clever with their singleton initializations a few years ago.\r\n\r\n\r\n  [1]: http://web.archive.org/web/20150126124619/http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.91.957&amp;rep=rep1&amp;type=pdf\r\n  [2]: http://www.cs.umd.edu/~pugh/java/memoryModel/DoubleCheckedLocking.html","title":"Memory Consistency Errors vs Thread interference","body":"<p><strong>Memory consistency errors</strong> can't be understood purely in the context of java--the details of shared memory behavior on multi-cpu systems are highly architecture-specific, and to make it worse, x86 (where most people coding today learned to code) has pretty programmer-friendly semantics compared to architectures that were designed for multi-processor machines from the beginning (like POWER and SPARC), so most people really aren't used to thinking about memory access semantics.</p>\n<p>I'll give a common example of where memory consistency errors can get you into trouble. Assume for this example, that the initial value of <code>x</code> is 3. Nearly all architectures guarantee that if one CPU executes the code:</p>\n<pre><code>STORE 4 -> x     // x is a memory address\nSTORE 5 -> x \n</code></pre>\n<p>and another CPU executes</p>\n<pre><code>LOAD x\nLOAD x\n</code></pre>\n<p>will either see <code>3,3</code>, <code>3,4</code>, <code>4,4</code>, <code>4,5</code>, or <code>5,5</code> from the perspective its two <code>LOAD</code> instructions. Basically, CPUs guarantee that the order of writes to a single memory location is maintained from the perspective of all CPUs, even if the exact time that each of the writes become known to other CPUs is allowed to vary.</p>\n<p>Where CPUs differ from one another tends to be in the guarantees they make about <code>LOAD</code> and <code>STORE</code> operations involving different memory addresses. Assume for this example, that the initial values of both <code>x</code> and <code>y</code> are 4.</p>\n<pre><code>STORE 5 -> x   // x is a memory address\nSTORE 5 -> y // y is a different memory address\n</code></pre>\n<p>then another CPU executes</p>\n<pre><code>LOAD x\nLOAD y\n</code></pre>\n<p>In this example, on some architectures, the second thread can see <code>4,4</code>, <code>5,5</code>, <code>4,5</code>, OR <code>5,4</code>. Ouch!</p>\n<p>Most architectures deal with memory at the granularity of a 32 or 64 bit word--this means that on a 32 bit POWER/SPARC machine, you can't update a 64-bit integer memory location and safely read it from another thread <em>ever</em> without explicit synchronization. Goofy, huh?</p>\n<p><strong>Thread interference</strong> is much simpler. The basic idea is that java doesn't guarantee that a single statement of java code executes atomically. For example, incrementing a value requires reading the value, incrementing it, then storing it again. So you can have <code>int x = 1</code> after two threads  execute <code>x++</code>, <code>x</code> can end up as <code>2</code> or <code>3</code> depending on how the lower-level code interleaved (the lower-level abstract code at work here presumably looks like <code>LOAD x, INCREMENT, STORE x</code>). The basic idea here is that java code is broken down into smaller atomic pieces and you don't get to make assumptions of how they interleave unless you use synchronization primitives explicitly.</p>\n<p><strong>For more information</strong>, check out <a href=\"http://web.archive.org/web/20150126124619/http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.91.957&amp;rep=rep1&amp;type=pdf\" rel=\"nofollow noreferrer\">this</a> paper. It's long and dry and written by a notorious asshole, but hey, it's pretty good too. Also check out <a href=\"http://www.cs.umd.edu/%7Epugh/java/memoryModel/DoubleCheckedLocking.html\" rel=\"nofollow noreferrer\">this</a> (or just google for &quot;double checked locking is broken&quot;). These memory reordering issues reared their ugly heads for many C++/java programmers who tried to get a little bit too clever with their singleton initializations a few years ago.</p>\n"},{"tags":[],"owner":{"account_id":39718,"reputation":6959,"user_id":114662,"accept_rate":76,"display_name":"Mark Lutton"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1283530094,"creation_date":1283530094,"answer_id":3637554,"question_id":3632299,"body_markdown":"The article to read on this is &quot;Memory Models: A Case for Rethinking Parallel Languages and Hardware&quot; by Adve and Boehm in the August 2010 vol. 53 number 8 issue of Communications of the ACM.  This is available online for Association for Computer Machinery members (http://www.acm.org).  This deals with the problem in general and also discusses the Java Memory Model.\r\n\r\nFor more information on the Java Memory Model, see http://www.cs.umd.edu/~pugh/java/memoryModel/\r\n\r\n\r\n","title":"Memory Consistency Errors vs Thread interference","body":"<p>The article to read on this is \"Memory Models: A Case for Rethinking Parallel Languages and Hardware\" by Adve and Boehm in the August 2010 vol. 53 number 8 issue of Communications of the ACM.  This is available online for Association for Computer Machinery members (<a href=\"http://www.acm.org\" rel=\"nofollow noreferrer\">http://www.acm.org</a>).  This deals with the problem in general and also discusses the Java Memory Model.</p>\n\n<p>For more information on the Java Memory Model, see <a href=\"http://www.cs.umd.edu/~pugh/java/memoryModel/\" rel=\"nofollow noreferrer\">http://www.cs.umd.edu/~pugh/java/memoryModel/</a></p>\n"},{"tags":[],"owner":{"account_id":1168077,"reputation":6543,"user_id":1145905,"accept_rate":47,"display_name":"kip2"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1417667942,"creation_date":1417667942,"answer_id":27286397,"question_id":3632299,"body_markdown":"Thread interference is about threads overwriting each other&#39;s statements (say, thread A incrementing a counter and thread B decrementing it *at the same time*), leading to a situation where the actual value of counter is unpredictable. You avoid them by enforcing exclusive access, one thread at a time. \r\n\r\nOn the other hand, memory inconsistency is about visibility. Thread A may increment `counter`, but then thread B may not be aware of this change *yet* so it might read some prior value. You avoid them by establishing a happens-before relationship, which is \r\n\r\n&gt; is simply a guarantee that memory writes by one specific statement are visible to another specific statement.(per [Oracle][1])\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/tutorial/essential/concurrency/memconsist.html","title":"Memory Consistency Errors vs Thread interference","body":"<p>Thread interference is about threads overwriting each other's statements (say, thread A incrementing a counter and thread B decrementing it <em>at the same time</em>), leading to a situation where the actual value of counter is unpredictable. You avoid them by enforcing exclusive access, one thread at a time. </p>\n\n<p>On the other hand, memory inconsistency is about visibility. Thread A may increment <code>counter</code>, but then thread B may not be aware of this change <em>yet</em> so it might read some prior value. You avoid them by establishing a happens-before relationship, which is </p>\n\n<blockquote>\n  <p>is simply a guarantee that memory writes by one specific statement are visible to another specific statement.(per <a href=\"http://docs.oracle.com/javase/tutorial/essential/concurrency/memconsist.html\" rel=\"noreferrer\">Oracle</a>)</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":3291773,"reputation":3668,"user_id":2769917,"accept_rate":65,"display_name":"Asif Mushtaq"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1443896481,"creation_date":1443896481,"answer_id":32925923,"question_id":3632299,"body_markdown":"**1. Thread Interference** \r\n\r\n    class Counter {\r\n        private int c = 0;\r\n    \r\n        public void increment() {\r\n            c++;\r\n        }\r\n    \r\n        public void decrement() {\r\n            c--;\r\n        }\r\n    \r\n        public int value() {\r\n            return c;\r\n        }\r\n    \r\n    }\r\n\r\n&gt; Suppose there are two threads Thread-A and Thread-B working on the\r\n&gt; same counter instance  . Say Thread-A invokes increment() , and at the\r\n&gt; same time Thread-B invokes decrement() . Thread-A reads the value c\r\n&gt; and  increment it by 1 . At the same time Thread-B reads the value (\r\n&gt; which is 0 because the incremented value is not yet set by Thread-A) ,\r\n&gt; decrements it and set it to -1 . Now Thread-A sets the value to 1 .\r\n\r\n**2. Memory Consistency Errors** \r\n\r\n&gt; Memory Consistency Errors occurs when different threads have\r\n&gt; inconsistent views of the shared data.  In the above class counter ,\r\n&gt; Lets say there are two threads working on the same counter instance , \r\n&gt; calls the increment method to increase the counter&#39;s value by 1 . Here\r\n&gt; it is no guarantee that the changes made by one thread is visible to\r\n&gt; the other .\r\n\r\nFor more visit [this][1].\r\n\r\n\r\n  [1]: http://javasolutionsonline.blogspot.com/2013/09/thread-interference-and-memory.html","title":"Memory Consistency Errors vs Thread interference","body":"<p><strong>1. Thread Interference</strong> </p>\n\n<pre><code>class Counter {\n    private int c = 0;\n\n    public void increment() {\n        c++;\n    }\n\n    public void decrement() {\n        c--;\n    }\n\n    public int value() {\n        return c;\n    }\n\n}\n</code></pre>\n\n<blockquote>\n  <p>Suppose there are two threads Thread-A and Thread-B working on the\n  same counter instance  . Say Thread-A invokes increment() , and at the\n  same time Thread-B invokes decrement() . Thread-A reads the value c\n  and  increment it by 1 . At the same time Thread-B reads the value (\n  which is 0 because the incremented value is not yet set by Thread-A) ,\n  decrements it and set it to -1 . Now Thread-A sets the value to 1 .</p>\n</blockquote>\n\n<p><strong>2. Memory Consistency Errors</strong> </p>\n\n<blockquote>\n  <p>Memory Consistency Errors occurs when different threads have\n  inconsistent views of the shared data.  In the above class counter ,\n  Lets say there are two threads working on the same counter instance , \n  calls the increment method to increase the counter's value by 1 . Here\n  it is no guarantee that the changes made by one thread is visible to\n  the other .</p>\n</blockquote>\n\n<p>For more visit <a href=\"http://javasolutionsonline.blogspot.com/2013/09/thread-interference-and-memory.html\" rel=\"nofollow\">this</a>.</p>\n"},{"tags":[],"owner":{"account_id":978905,"reputation":2840,"user_id":999165,"accept_rate":75,"display_name":"LAFK says reinstate Monica"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1498438914,"creation_date":1498438914,"answer_id":44751937,"question_id":3632299,"body_markdown":"First, please note, that your source is NOT the best place to learn what you&#39;re trying to learn. You will do well reading papers from @blucz &#39;s answer (as well as his answer in general), even if it&#39;s out of scope of Java. Oracle Trails aren&#39;t _bad_ per se, but they simplify matters and gloss over them, hence you may find you don&#39;t understand what you&#39;ve just learned or whether it&#39;s useful or not and how much.\r\n\r\nNow, trying to answer primarily within Java context.\r\n\r\n## Thread interference\r\n\r\nhappens when thread operations **interleave**, that is, mingle. We need two executors (threads) and shared data (place to interfere).\r\nImage by Daniel Stori, from turnoff.us website:\r\n\r\n[![Daniel Stori, turnoff.us][1]][1]\r\n\r\nIn the image you see that two threads in a GNU/Linux process can interfere with each other. Java threads are essentially Java objects pointing to native threads and they also can interfere with each other, if they operate on same data (like here where &quot;Rick&quot; messes up the data - drawing - of his younger brother).\r\n\r\n## Memory Consistency Errors - MCE\r\n\r\nCrucial points here are memory visibility, happens-before and - brought up by @blucz, hardware.\r\n\r\nMCE are - obviously - situations, where memory becomes inconsistent. Which actually is a term for humans - for computers the memory is consistent at all times (unless it&#39;s corrupted). The &quot;inconsistencies&quot; are something humans are &quot;seeing&quot;, because they don&#39;t understand what exactly happened and were expecting something else.  &quot;Why is it 1? It should be 2?!&quot;\r\n\r\nThis &quot;perceived inconsistency&quot;, this &quot;gap&quot;, relates to memory _visibility_, that is, what different threads _see_ when they _look at_ memory. And therefore what those threads _operate on_.\r\nYou see, while reads from and writes to memory are linear when we reason about code (especially when thinking about how it is executed line by line)... actually they are not. Especially, when threads are involved. So, the tutorial you read gives you an example of a counter being incremented by two threads and how thread 2 reads same value as thread 1. Actual reasons for memory inconsistencies might be due to optimizations done to your code, by javac, JIT or hardware memory consistency model (that is, something that CPU people did to speed up their CPU and make it more efficient). These optimizations include prescient stores, branch prediction and for now you may think of them as reordering code so that in the end, it runs faster and uses/wastes less CPU cycles. However, to make sure optimizing doesn&#39;t go out of control (or too far), some guarantees are made. These guarantees form relationship of &quot;happens-before&quot;, where we can tell that before _this point_ and after, things &quot;happened-before&quot;. Imagine you running a party and remembering, that Tom got here BEFORE Suzie, cause you know that Rob came after tom and before Suzie. Rob is the event which you use to form happens-before relationship before events of Tom/Suzie coming in. \r\n\r\nhttps://docs.oracle.com/javase/8/docs/api/java/util/concurrent/package-summary.html#MemoryVisibility\r\n\r\nLink above tells you more about memory visibility and what establishes happens-before relationship in Java. It will not come as a surprise, but:\r\n\r\n1. synchronization does\r\n2. starting a Thread\r\n3. joining a Thread\r\n4. volatile keyword tells you that writes happens-before subsequent reads, that is, that reads AFTER writes will not be reordered to be &quot;before&quot; writes, as that would break &quot;happens-before&quot; relationship.\r\n\r\nSince all that touches memory, hardware is essential. Your platform has it&#39;s own rules and while JVM tries to make them universal by making all platforms behave similarly, just that alone means that on platform A there will be more memory barriers than on platform B.\r\n\r\n## Your questions\r\n\r\n&gt; What is the difference between memory consistency errors and thread interference? \r\nMCE are about **visibility** of the memory to program threads and NOT having **happens-before relationship** between reads and writes, therefore having a gap between what humans think &quot;should be&quot; and what &quot;actually is&quot;.\r\n\r\nThread interference is about thread operations overlapping, mingling, interleaving and touching shared data, screwing it in the process, that may lead to thread A having nice drawing destroyed by thread B. Interference being harmful usually marks a critical section, which is why synchronization works.\r\n\r\n\r\n&gt; How does the use of synchronization to avoid them differ or not? \r\n\r\nPlease read also about thin locks, fat locks and thread contention.\r\nSynchronization to avoid thread interference does it in making only one thread access the critical section, other thread is blocked (costly, thread contention). When it comes to MCE synchronization establishes happens-before when it comes to locking and unlocking the mutex, see earlier link to java.util.concurrent package description.\r\n\r\nFor examples: see both earlier sections.\r\n\r\n  [1]: https://i.stack.imgur.com/JIhds.png","title":"Memory Consistency Errors vs Thread interference","body":"<p>First, please note, that your source is NOT the best place to learn what you're trying to learn. You will do well reading papers from @blucz 's answer (as well as his answer in general), even if it's out of scope of Java. Oracle Trails aren't <em>bad</em> per se, but they simplify matters and gloss over them, hence you may find you don't understand what you've just learned or whether it's useful or not and how much.</p>\n\n<p>Now, trying to answer primarily within Java context.</p>\n\n<h2>Thread interference</h2>\n\n<p>happens when thread operations <strong>interleave</strong>, that is, mingle. We need two executors (threads) and shared data (place to interfere).\nImage by Daniel Stori, from turnoff.us website:</p>\n\n<p><a href=\"https://i.stack.imgur.com/JIhds.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JIhds.png\" alt=\"Daniel Stori, turnoff.us\"></a></p>\n\n<p>In the image you see that two threads in a GNU/Linux process can interfere with each other. Java threads are essentially Java objects pointing to native threads and they also can interfere with each other, if they operate on same data (like here where \"Rick\" messes up the data - drawing - of his younger brother).</p>\n\n<h2>Memory Consistency Errors - MCE</h2>\n\n<p>Crucial points here are memory visibility, happens-before and - brought up by @blucz, hardware.</p>\n\n<p>MCE are - obviously - situations, where memory becomes inconsistent. Which actually is a term for humans - for computers the memory is consistent at all times (unless it's corrupted). The \"inconsistencies\" are something humans are \"seeing\", because they don't understand what exactly happened and were expecting something else.  \"Why is it 1? It should be 2?!\"</p>\n\n<p>This \"perceived inconsistency\", this \"gap\", relates to memory <em>visibility</em>, that is, what different threads <em>see</em> when they <em>look at</em> memory. And therefore what those threads <em>operate on</em>.\nYou see, while reads from and writes to memory are linear when we reason about code (especially when thinking about how it is executed line by line)... actually they are not. Especially, when threads are involved. So, the tutorial you read gives you an example of a counter being incremented by two threads and how thread 2 reads same value as thread 1. Actual reasons for memory inconsistencies might be due to optimizations done to your code, by javac, JIT or hardware memory consistency model (that is, something that CPU people did to speed up their CPU and make it more efficient). These optimizations include prescient stores, branch prediction and for now you may think of them as reordering code so that in the end, it runs faster and uses/wastes less CPU cycles. However, to make sure optimizing doesn't go out of control (or too far), some guarantees are made. These guarantees form relationship of \"happens-before\", where we can tell that before <em>this point</em> and after, things \"happened-before\". Imagine you running a party and remembering, that Tom got here BEFORE Suzie, cause you know that Rob came after tom and before Suzie. Rob is the event which you use to form happens-before relationship before events of Tom/Suzie coming in. </p>\n\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/package-summary.html#MemoryVisibility\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/package-summary.html#MemoryVisibility</a></p>\n\n<p>Link above tells you more about memory visibility and what establishes happens-before relationship in Java. It will not come as a surprise, but:</p>\n\n<ol>\n<li>synchronization does</li>\n<li>starting a Thread</li>\n<li>joining a Thread</li>\n<li>volatile keyword tells you that writes happens-before subsequent reads, that is, that reads AFTER writes will not be reordered to be \"before\" writes, as that would break \"happens-before\" relationship.</li>\n</ol>\n\n<p>Since all that touches memory, hardware is essential. Your platform has it's own rules and while JVM tries to make them universal by making all platforms behave similarly, just that alone means that on platform A there will be more memory barriers than on platform B.</p>\n\n<h2>Your questions</h2>\n\n<blockquote>\n  <p>What is the difference between memory consistency errors and thread interference? \n  MCE are about <strong>visibility</strong> of the memory to program threads and NOT having <strong>happens-before relationship</strong> between reads and writes, therefore having a gap between what humans think \"should be\" and what \"actually is\".</p>\n</blockquote>\n\n<p>Thread interference is about thread operations overlapping, mingling, interleaving and touching shared data, screwing it in the process, that may lead to thread A having nice drawing destroyed by thread B. Interference being harmful usually marks a critical section, which is why synchronization works.</p>\n\n<blockquote>\n  <p>How does the use of synchronization to avoid them differ or not? </p>\n</blockquote>\n\n<p>Please read also about thin locks, fat locks and thread contention.\nSynchronization to avoid thread interference does it in making only one thread access the critical section, other thread is blocked (costly, thread contention). When it comes to MCE synchronization establishes happens-before when it comes to locking and unlocking the mutex, see earlier link to java.util.concurrent package description.</p>\n\n<p>For examples: see both earlier sections.</p>\n"}],"owner":{"account_id":647248,"reputation":171,"user_id":438402,"display_name":"msk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5820,"favorite_count":0,"down_vote_count":0,"up_vote_count":17,"answer_count":6,"score":17,"last_activity_date":1666874765,"creation_date":1283474579,"question_id":3632299,"body_markdown":"What is the difference between memory consistency errors and thread interference?\r\nHow does the use of synchronization to avoid them differ or not? Please illustrate with an example. I couldn&#39;t get this from the sun Java tutorial. Any recommendation of reading material(s) to understand this purely in context of java would be helpful.\r\n","title":"Memory Consistency Errors vs Thread interference","body":"<p>What is the difference between memory consistency errors and thread interference?\nHow does the use of synchronization to avoid them differ or not? Please illustrate with an example. I couldn't get this from the sun Java tutorial. Any recommendation of reading material(s) to understand this purely in context of java would be helpful.</p>\n"},{"tags":["java","android","android-studio","kotlin","vpn"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1666875272,"post_id":74222202,"comment_id":131041984,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."},{"owner":{"account_id":23020130,"reputation":1,"user_id":17141302,"display_name":"TAUSEEQ"},"score":0,"creation_date":1666875545,"post_id":74222202,"comment_id":131042095,"body_markdown":"For Example When i Connect through Vpn i want to Block  Website &quot;https://www.google.com&quot; remaining all websites will open except this one","body":"For Example When i Connect through Vpn i want to Block  Website &quot;<a href=\"https://www.google.com\" rel=\"nofollow noreferrer\">google.com</a>&quot; remaining all websites will open except this one"}],"owner":{"account_id":23020130,"reputation":1,"user_id":17141302,"display_name":"TAUSEEQ"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1666874418,"creation_date":1666874418,"question_id":74222202,"body_markdown":"I  Have Created the VPN Client Application Using the open VPN Servers &quot;VPN Gate&quot;, Now I want to block some IP addresses and websites that do not open when VPN is Connected can I manage this at the application end &quot;Java&quot; or Kotlin any Solution?\r\n\r\nPacket Capturing , Traffic Details ","title":"Domain URL or Address Using VPN Server","body":"<p>I  Have Created the VPN Client Application Using the open VPN Servers &quot;VPN Gate&quot;, Now I want to block some IP addresses and websites that do not open when VPN is Connected can I manage this at the application end &quot;Java&quot; or Kotlin any Solution?</p>\n<p>Packet Capturing , Traffic Details</p>\n"},{"tags":["java","spring","spring-boot","flyway","testcontainers"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1626868968,"post_id":68468851,"comment_id":121005804,"body_markdown":"This is generally due to wrongly using a `DataSource` yourself (obtaining connections and not closing them). However there is basically too little information to answer this question.","body":"This is generally due to wrongly using a <code>DataSource</code> yourself (obtaining connections and not closing them). However there is basically too little information to answer this question."},{"owner":{"account_id":2075808,"reputation":2132,"user_id":1849188,"display_name":"Jcov"},"score":0,"creation_date":1626869913,"post_id":68468851,"comment_id":121006285,"body_markdown":"I don&#39;t believe anywhere I actively get a connection manually. I rely on the JPA repos. I will keep digging. I may be doing something daft with Flyway...","body":"I don&#39;t believe anywhere I actively get a connection manually. I rely on the JPA repos. I will keep digging. I may be doing something daft with Flyway..."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1626870078,"post_id":68468851,"comment_id":121006360,"body_markdown":"Another thing might be if you are using `@DirtiesContext` and/or the container is class based you may end up with more datasources than you think. Which is I suspect the case as  `HikariPool-45` means there are 44 others as well (44 *3 is 136 connections).","body":"Another thing might be if you are using <code>@DirtiesContext</code> and/or the container is class based you may end up with more datasources than you think. Which is I suspect the case as  <code>HikariPool-45</code> means there are 44 others as well (44 *3 is 136 connections)."},{"owner":{"account_id":2075808,"reputation":2132,"user_id":1849188,"display_name":"Jcov"},"score":0,"creation_date":1626870406,"post_id":68468851,"comment_id":121006498,"body_markdown":"When I use the spring props to create the containers, does that mean the container is reused between all classes or torn down and remade between? I can see the flyway migration scripts re-run each time so I am guessing it&#39;s the latter...","body":"When I use the spring props to create the containers, does that mean the container is reused between all classes or torn down and remade between? I can see the flyway migration scripts re-run each time so I am guessing it&#39;s the latter..."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1626870679,"post_id":68468851,"comment_id":121006618,"body_markdown":"Not sure if they are reused (that is quite test containers specific) but it might as the docker container is already started. The application contexts are cached (so depending on what you run you add new contexts for each test, which is quite slow as well) by default a max of 32. Apparently that is what is happening here because the flyway init is part of the booting process.","body":"Not sure if they are reused (that is quite test containers specific) but it might as the docker container is already started. The application contexts are cached (so depending on what you run you add new contexts for each test, which is quite slow as well) by default a max of 32. Apparently that is what is happening here because the flyway init is part of the booting process."},{"owner":{"account_id":2075808,"reputation":2132,"user_id":1849188,"display_name":"Jcov"},"score":0,"creation_date":1626871075,"post_id":68468851,"comment_id":121006785,"body_markdown":"So I have 32 cached contexts with their own 3 Hikari pools basically because I am using Flyway?","body":"So I have 32 cached contexts with their own 3 Hikari pools basically because I am using Flyway?"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1626871244,"post_id":68468851,"comment_id":121006861,"body_markdown":"No, because something is leading to additional contexts (probably the `@Sql` which requires new beans).  And you don&#39;t have 32 cached contexts as that would yield `HikariPool-96` which you don&#39;t so you reach about 16 . Multiple things lead to a (re)creation of an application context, see https://docs.spring.io/spring-framework/docs/current/reference/html/testing.html#testcontext-ctx-management-caching for things that contribute to a new context being created.","body":"No, because something is leading to additional contexts (probably the <code>@Sql</code> which requires new beans).  And you don&#39;t have 32 cached contexts as that would yield <code>HikariPool-96</code> which you don&#39;t so you reach about 16 . Multiple things lead to a (re)creation of an application context, see <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/testing.html#testcontext-ctx-management-caching\" rel=\"nofollow noreferrer\">docs.spring.io/spring-framework/docs/current/reference/html/&zwnj;&#8203;&hellip;</a> for things that contribute to a new context being created."},{"owner":{"account_id":2075808,"reputation":2132,"user_id":1849188,"display_name":"Jcov"},"score":0,"creation_date":1626871576,"post_id":68468851,"comment_id":121007010,"body_markdown":"Oh wow thank you.\nI seem to have fallen foul to a few! I have used ActiveProfiles, MockBean etc in various combinations.\nSo may be able to use DirtiesContext to basically remove that context from the cache so then the extra pools will go?\n\nAlso added the logging and yeah:\n: `Spring test ApplicationContext cache statistics: [DefaultContextCache@3bf92d96 size = 16, maxSize = 32, parentContextCount = 0, hitCount = 683, missCount = 16]`","body":"Oh wow thank you. I seem to have fallen foul to a few! I have used ActiveProfiles, MockBean etc in various combinations. So may be able to use DirtiesContext to basically remove that context from the cache so then the extra pools will go?  Also added the logging and yeah: : <code>Spring test ApplicationContext cache statistics: [DefaultContextCache@3bf92d96 size = 16, maxSize = 32, parentContextCount = 0, hitCount = 683, missCount = 16]</code>"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":4,"creation_date":1626872164,"post_id":68468851,"comment_id":121007250,"body_markdown":"`@DirtiesContext` wil not remove the context, it will reload it instead. But each combination will lead to a new one being loaded and cached. You can control the number of cached contexts you could set it to 4 or 8 instead of 32. Which will close the contexts. BUt you could also check if you really need all those `@MockBean` instances and if everything really needs to be a full integration test with `@SpringBootTest` or that you could use a simpler slice like `@WebMvcTest` or `@DataJpaTest` to name a few.","body":"<code>@DirtiesContext</code> wil not remove the context, it will reload it instead. But each combination will lead to a new one being loaded and cached. You can control the number of cached contexts you could set it to 4 or 8 instead of 32. Which will close the contexts. BUt you could also check if you really need all those <code>@MockBean</code> instances and if everything really needs to be a full integration test with <code>@SpringBootTest</code> or that you could use a simpler slice like <code>@WebMvcTest</code> or <code>@DataJpaTest</code> to name a few."},{"owner":{"account_id":2075808,"reputation":2132,"user_id":1849188,"display_name":"Jcov"},"score":0,"creation_date":1626872345,"post_id":68468851,"comment_id":121007331,"body_markdown":"Thank you very much.\nI mean how do people manage Integration testing in general...because this seems like it could become quite a challenge as more are added?\nOr do you just try and minimise the number of contexts/combinations of stuff to try and keep it minimal?\nI think I maybe need to check what tests I am running...I think I overlap a lot...\nThank you very much for the help!","body":"Thank you very much. I mean how do people manage Integration testing in general...because this seems like it could become quite a challenge as more are added? Or do you just try and minimise the number of contexts/combinations of stuff to try and keep it minimal? I think I maybe need to check what tests I am running...I think I overlap a lot... Thank you very much for the help!"}],"answers":[{"tags":[],"owner":{"account_id":2075808,"reputation":2132,"user_id":1849188,"display_name":"Jcov"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1626900593,"creation_date":1626900593,"answer_id":68476307,"question_id":68468851,"body_markdown":"Thanks to the help from M. Deinum:\r\n\r\nApplication contexts are cached between tests to help speed up tests:\r\nhttps://docs.spring.io/spring-framework/docs/current/reference/html/testing.html#testcontext-ctx-management-caching\r\n\r\nA new context is created say for example a different set of `@MockBean`s are used, different `Profiles` are used.\r\n\r\nDue to this, there were more than 16 Hikari datasources cached in my test environment which all at least used 3-10 connections. This was more than the default for the TestContainer so by the time a certain number of tests with differing contexts had been reached/cached, the connection pools (as a sum of ) would not be able to create new connections to the datasource(s) giving the SQL connection errors.\r\n\r\n**Takeaway:**\r\n\r\nThink about test overlap more. I.e. does it need to be a full `@SpringBootTest` if some logic has already been done or will a `MocMvc` or `DataJPATest` suffice.\r\n\r\nThe number of cached contexts is 32 by default, but that can be set via a JVM system arg (see docs).\r\n ","title":"TestContainers SQL too many connections exception","body":"<p>Thanks to the help from M. Deinum:</p>\n<p>Application contexts are cached between tests to help speed up tests:\n<a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/testing.html#testcontext-ctx-management-caching\" rel=\"noreferrer\">https://docs.spring.io/spring-framework/docs/current/reference/html/testing.html#testcontext-ctx-management-caching</a></p>\n<p>A new context is created say for example a different set of <code>@MockBean</code>s are used, different <code>Profiles</code> are used.</p>\n<p>Due to this, there were more than 16 Hikari datasources cached in my test environment which all at least used 3-10 connections. This was more than the default for the TestContainer so by the time a certain number of tests with differing contexts had been reached/cached, the connection pools (as a sum of ) would not be able to create new connections to the datasource(s) giving the SQL connection errors.</p>\n<p><strong>Takeaway:</strong></p>\n<p>Think about test overlap more. I.e. does it need to be a full <code>@SpringBootTest</code> if some logic has already been done or will a <code>MocMvc</code> or <code>DataJPATest</code> suffice.</p>\n<p>The number of cached contexts is 32 by default, but that can be set via a JVM system arg (see docs).</p>\n"},{"tags":[],"owner":{"account_id":9912640,"reputation":1710,"user_id":7338755,"display_name":"Seun Matt"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1649803428,"creation_date":1649803428,"answer_id":71849913,"question_id":68468851,"body_markdown":"You can also reduce the max size of the cache by creating adding a `spring.properties` file in the test resources directory with the following content:\r\n\r\n```\r\nspring.test.context.cache.maxSize=4 \r\n```\r\n\r\nIn this case, the max cache size will be 4 instead of the default 32 mentioned in the docs.\r\n\r\nIf you&#39;re having this problem, it most likely means the cache is not working for you in the first place as a lot of the application contexts are considered unique. So, reducing the size seems expedient.\r\n\r\n\r\n","title":"TestContainers SQL too many connections exception","body":"<p>You can also reduce the max size of the cache by creating adding a <code>spring.properties</code> file in the test resources directory with the following content:</p>\n<pre><code>spring.test.context.cache.maxSize=4 \n</code></pre>\n<p>In this case, the max cache size will be 4 instead of the default 32 mentioned in the docs.</p>\n<p>If you're having this problem, it most likely means the cache is not working for you in the first place as a lot of the application contexts are considered unique. So, reducing the size seems expedient.</p>\n"}],"owner":{"account_id":2075808,"reputation":2132,"user_id":1849188,"display_name":"Jcov"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4266,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":68476307,"answer_count":2,"score":1,"last_activity_date":1666874373,"creation_date":1626867715,"question_id":68468851,"body_markdown":"I am using Spring Boot with 3 SQL datasources defined.\r\nI am using the SpringBoot properties to make the 3 TestContainers for the Datasources.\r\n\r\nWhen I run my tests, the containers are getting slower and eventually I&#39;ve finally gotten a \r\n`Caused by: java.sql.SQLNonTransientConnectionException: Too many connections` exception.\r\n\r\nAn example test is:\r\n\r\n```java\r\n\r\n    @Test\r\n    @DisplayName(&quot;Require Client Access.&quot;)\r\n    @Transactional(transactionManager = &quot;thirdTransactionManager&quot;)\r\n    @Sql(\r\n        scripts = &quot;/db/sql/some_test_data_basic.sql&quot;,\r\n        config = @SqlConfig(dataSource = &quot;thirdDatasource&quot;, transactionManager = &quot;thirdTransactionManager&quot;))\r\n    void requireCustomerAccess() throws CompClientAccessException {\r\n\r\n         //Assertions\r\n     }\r\n\r\n```\r\n\r\nI am using FlyWay to migrate schema so I am unsure if between each test class either Hikari or Flyway is not closing its Connection Pool connections after each method class leading to the too many connections?\r\n\r\nI have 3 TestContainers started via Spring&#39;s props like below. I can see them in docker.\r\n```text\r\ndatasource.jdbc.url=jdbc:tc:mysql:8.0.22:///databasename?TC_TEMPFS=/testtempfs:rw\r\ndatasource.username=dev\r\ndatasource.password=password\r\n```\r\n\r\nA snippet of the DatasourceConf (one of the three):\r\n\r\n```java\r\n   @Qualifier(&quot;thirdDatasource&quot;)\r\n    @Bean(name = &quot;thirdDatasource&quot;)\r\n    public HikariDataSource thirdDatasource() {\r\n        HikariDataSource hikariDataSource = new HikariDataSource();\r\n        hikariDataSource.setMaximumPoolSize(3);\r\n        hikariDataSource.setJdbcUrl(thirdUrl);\r\n        hikariDataSource.setUsername(thirdUsername);\r\n        hikariDataSource.setPassword(thirdUsername);\r\n        hikariDataSource.setDriverClassName(driverClassName);\r\n        return hikariDataSource;\r\n    }\r\n\r\n    @Bean(name=&quot;thirdTransactionManager&quot;)\r\n    @Qualifier(&quot;thirdTransactionManager&quot;)\r\n    public PlatformTransactionManager thirdTransactionManager(\r\n\r\n        final @Qualifier(&quot;thirdEntityManagerFactory&quot;) LocalContainerEntityManagerFactoryBean thirdEntityManagerFactory) {\r\n        return new JpaTransactionManager(thirdEntityManagerFactory.getObject());\r\n    }\r\n\r\n\r\n```\r\n\r\nI am guessing the HikariPools are being remade for each Test class and not shutting down?\r\n\r\n```\r\n o.h.e.j.s.SqlExceptionHelper   : HikariPool-45 - Connection is not available, request timed out after 30000ms.\r\n```\r\n\r\nThank you for any help.\r\n\r\n","title":"TestContainers SQL too many connections exception","body":"<p>I am using Spring Boot with 3 SQL datasources defined.\nI am using the SpringBoot properties to make the 3 TestContainers for the Datasources.</p>\n<p>When I run my tests, the containers are getting slower and eventually I've finally gotten a\n<code>Caused by: java.sql.SQLNonTransientConnectionException: Too many connections</code> exception.</p>\n<p>An example test is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n    @Test\n    @DisplayName(&quot;Require Client Access.&quot;)\n    @Transactional(transactionManager = &quot;thirdTransactionManager&quot;)\n    @Sql(\n        scripts = &quot;/db/sql/some_test_data_basic.sql&quot;,\n        config = @SqlConfig(dataSource = &quot;thirdDatasource&quot;, transactionManager = &quot;thirdTransactionManager&quot;))\n    void requireCustomerAccess() throws CompClientAccessException {\n\n         //Assertions\n     }\n\n</code></pre>\n<p>I am using FlyWay to migrate schema so I am unsure if between each test class either Hikari or Flyway is not closing its Connection Pool connections after each method class leading to the too many connections?</p>\n<p>I have 3 TestContainers started via Spring's props like below. I can see them in docker.</p>\n<pre><code>datasource.jdbc.url=jdbc:tc:mysql:8.0.22:///databasename?TC_TEMPFS=/testtempfs:rw\ndatasource.username=dev\ndatasource.password=password\n</code></pre>\n<p>A snippet of the DatasourceConf (one of the three):</p>\n<pre class=\"lang-java prettyprint-override\"><code>   @Qualifier(&quot;thirdDatasource&quot;)\n    @Bean(name = &quot;thirdDatasource&quot;)\n    public HikariDataSource thirdDatasource() {\n        HikariDataSource hikariDataSource = new HikariDataSource();\n        hikariDataSource.setMaximumPoolSize(3);\n        hikariDataSource.setJdbcUrl(thirdUrl);\n        hikariDataSource.setUsername(thirdUsername);\n        hikariDataSource.setPassword(thirdUsername);\n        hikariDataSource.setDriverClassName(driverClassName);\n        return hikariDataSource;\n    }\n\n    @Bean(name=&quot;thirdTransactionManager&quot;)\n    @Qualifier(&quot;thirdTransactionManager&quot;)\n    public PlatformTransactionManager thirdTransactionManager(\n\n        final @Qualifier(&quot;thirdEntityManagerFactory&quot;) LocalContainerEntityManagerFactoryBean thirdEntityManagerFactory) {\n        return new JpaTransactionManager(thirdEntityManagerFactory.getObject());\n    }\n\n\n</code></pre>\n<p>I am guessing the HikariPools are being remade for each Test class and not shutting down?</p>\n<pre><code> o.h.e.j.s.SqlExceptionHelper   : HikariPool-45 - Connection is not available, request timed out after 30000ms.\n</code></pre>\n<p>Thank you for any help.</p>\n"},{"tags":["java","sql","jpa"],"owner":{"account_id":20165855,"reputation":21,"user_id":14789822,"display_name":"Omnigospel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":0,"score":-1,"last_activity_date":1666874365,"creation_date":1666874239,"question_id":74222153,"body_markdown":"I have a table named deposit, and I want to display an error or exception message when certain criteria is met in the query.\r\n\r\n**I have a query like:**\r\n```\r\nquery = em.createNativeQuery(&quot;UPDATE deposit SET deposit_amount = CASE WHEN (SELECT SUM(deposit_amount) WHERE user_id =:user_id) &lt;=100 THEN &quot; + insufficientBalance() + &quot; ELSE (SELECT SUM(deposit_amount) - 50 END WHERE user_id =:user_id&quot;);\r\n\r\n```\r\n**The insufficientBalance() is method below**\r\n\r\n```\r\npublic String insufficientBalance(){\r\n\r\n  throw new InsufficientBalanceException(&quot;insufficient Balance &quot;);\r\n}\r\n```\r\nBut when I run the query it calls to **insufficientBalance() method** directly without even running the query itself.\r\n\r\nAll I want is to display an error message when the the sum amount of the said user is &lt;=100\r\n**Please how do I query or do this in a right way?**","title":"How to a correctly update-set-Case query in sql and display Exception messages In it through Java","body":"<p>I have a table named deposit, and I want to display an error or exception message when certain criteria is met in the query.</p>\n<p><strong>I have a query like:</strong></p>\n<pre><code>query = em.createNativeQuery(&quot;UPDATE deposit SET deposit_amount = CASE WHEN (SELECT SUM(deposit_amount) WHERE user_id =:user_id) &lt;=100 THEN &quot; + insufficientBalance() + &quot; ELSE (SELECT SUM(deposit_amount) - 50 END WHERE user_id =:user_id&quot;);\n\n</code></pre>\n<p><strong>The insufficientBalance() is method below</strong></p>\n<pre><code>public String insufficientBalance(){\n\n  throw new InsufficientBalanceException(&quot;insufficient Balance &quot;);\n}\n</code></pre>\n<p>But when I run the query it calls to <strong>insufficientBalance() method</strong> directly without even running the query itself.</p>\n<p>All I want is to display an error message when the the sum amount of the said user is &lt;=100\n<strong>Please how do I query or do this in a right way?</strong></p>\n"},{"tags":["java","itext","itext7"],"answers":[{"comments":[{"owner":{"account_id":189816,"reputation":33533,"user_id":429377,"accept_rate":91,"display_name":"Mahmoud Saleh"},"score":0,"creation_date":1666943440,"post_id":74222151,"comment_id":131058504,"body_markdown":"My support contract was finished that&#39;s why I was searching for a solution here","body":"My support contract was finished that&#39;s why I was searching for a solution here"}],"tags":[],"owner":{"account_id":25750858,"reputation":46,"user_id":19503437,"display_name":"LionelRichTea"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1666874232,"creation_date":1666874232,"answer_id":74222151,"question_id":74221488,"body_markdown":"As you&#39;ve discovered, iText switched to JSON license keys from iText 7.2 (and the corresponding add-ons). There&#39;s no way to convert XML license keys to valid JSON ones, so iText will simply generate new one(s) for you.\r\n\r\nSince you have commercial licenses, just log a support request on their [Jira Support Service Desk](https://jira.itextsupport.com/servicedesk/customer/portal/5/).\r\nYou are paying for support after all, commercial customers don&#39;t need to rely on the Stack Overflow community.","title":"com.itextpdf.commons.exceptions.UnknownProductException: Product pdfCalligraph is unknown. Probably you have to register it","body":"<p>As you've discovered, iText switched to JSON license keys from iText 7.2 (and the corresponding add-ons). There's no way to convert XML license keys to valid JSON ones, so iText will simply generate new one(s) for you.</p>\n<p>Since you have commercial licenses, just log a support request on their <a href=\"https://jira.itextsupport.com/servicedesk/customer/portal/5/\" rel=\"nofollow noreferrer\">Jira Support Service Desk</a>.\nYou are paying for support after all, commercial customers don't need to rely on the Stack Overflow community.</p>\n"}],"owner":{"account_id":189816,"reputation":33533,"user_id":429377,"accept_rate":91,"display_name":"Mahmoud Saleh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":388,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1666874232,"creation_date":1666870938,"question_id":74221488,"body_markdown":"I have an application using **Itext 7.1.17** and **typography 2.0.9** to generate Arabic pdf files\r\nand I have two xml license files as follows :\r\n\r\n**1- itext-core-license.xml**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;\r\n    &lt;license date=&quot;*******&quot; issuer=&quot;iText Group NV&quot; library=&quot;3&quot;&gt;\r\n        &lt;licensee expire=&quot;*******&quot;&gt;\r\n            &lt;name&gt;*******&lt;/name&gt;\r\n            &lt;email&gt;*******&lt;/email&gt;\r\n            &lt;company&gt;*******&lt;/company&gt;\r\n            &lt;version&gt;7.1&lt;/version&gt;\r\n            &lt;key&gt;*******&lt;/key&gt;\r\n            &lt;licensetype&gt;commercial&lt;/licensetype&gt;\r\n            &lt;signature&gt;*******&lt;/signature&gt;\r\n        &lt;/licensee&gt;\r\n    &lt;/license&gt;\r\n\r\n**2- pdfCalligraph-license.xml**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;\r\n    &lt;license date=&quot;*********&quot; issuer=&quot;iText Group NV&quot; library=&quot;3&quot;&gt;\r\n        &lt;licensee expire=&quot;*********&quot;&gt;\r\n            &lt;name&gt;*********&lt;/name&gt;\r\n            &lt;email&gt;*********&lt;/email&gt;\r\n            &lt;company&gt;*********&lt;/company&gt;\r\n            &lt;version&gt;7.1&lt;/version&gt;\r\n            &lt;key&gt;*********&lt;/key&gt;\r\n            &lt;licensetype&gt;commercial&lt;/licensetype&gt;\r\n            &lt;signature&gt;*********&lt;/signature&gt;\r\n        &lt;/licensee&gt;\r\n        &lt;product deploymenttype=&quot;&quot; expire=&quot;*********&quot; licensetype=&quot;commercial&quot; major=&quot;2&quot; name=&quot;pdfCalligraph&quot; platform=&quot;java&quot;&gt;\r\n            &lt;signature&gt;*********&lt;/signature&gt;\r\n        &lt;/product&gt;\r\n    &lt;/license&gt;\r\n\r\nIn my java code before working on the pdf, I load the license files as follows :\r\n\r\n    LicenseKey.loadLicenseFile(licensePath + itextkeyCoreFile);\r\n    LicenseKey.loadLicenseFile(licensePath + itextkeyPdfCalligraphFile);\r\n\r\nThe above code works fine on version **7.1.17** but when upgrading to **itext 7.2.4** and **typography 3.0.1**\r\nI get the following exception :\r\n\r\n    com.itextpdf.commons.exceptions.UnknownProductException: Product pdfCalligraph is unknown. Probably you have to register it.\r\n    \tat com.itextpdf.commons.actions.ProductEventHandler.tryProcessEvent(ProductEventHandler.java:147) ~[commons-7.2.4.jar:?]\r\n    \tat com.itextpdf.commons.actions.ProductEventHandler.onAcceptedEvent(ProductEventHandler.java:72) ~[commons-7.2.4.jar:?]\r\n    \tat com.itextpdf.commons.actions.AbstractContextBasedEventHandler.onEvent(AbstractContextBasedEventHandler.java:70) ~[commons-7.2.4.jar:?]\r\n    \tat com.itextpdf.commons.actions.EventManager.onEvent(EventManager.java:74) ~[commons-7.2.4.jar:?]\r\n    \tat com.itextpdf.typography.shaping.Shaper.applyOtfScript(Shaper.java:198) ~[typography-3.0.1.jar:?]\r\n    \tat com.itextpdf.typography.shaping.TypographyApplier.applyOtfScript(TypographyApplier.java:51) ~[typography-3.0.1.jar:?]\r\n    \tat com.itextpdf.layout.renderer.TypographyUtils.applyOtfScript(TypographyUtils.java:122) ~[layout-7.2.4.jar:?]\r\n    \tat com.itextpdf.layout.renderer.TextRenderer.applyOtf(TextRenderer.java:815) ~[layout-7.2.4.jar:?]\r\n    \tat com.itextpdf.layout.renderer.LineRenderer.applyOtf(LineRenderer.java:1314) ~[layout-7.2.4.jar:?]\r\n    \tat com.itextpdf.layout.renderer.LineRenderer.layout(LineRenderer.java:176) ~[layout-7.2.4.jar:?]\r\n    \tat com.itextpdf.layout.renderer.ParagraphRenderer.directLayout(ParagraphRenderer.java:237) ~[layout-7.2.4.jar:?]\r\n    \tat com.itextpdf.layout.renderer.ParagraphRenderer.layout(ParagraphRenderer.java:108) ~[layout-7.2.4.jar:?]\r\n    \tat com.itextpdf.layout.renderer.BlockRenderer.layout(BlockRenderer.java:251) ~[layout-7.2.4.jar:?]\r\n    \tat com.itextpdf.layout.renderer.TableRenderer.layout(TableRenderer.java:592) ~[layout-7.2.4.jar:?]\r\n    \tat com.itextpdf.layout.renderer.TableRenderer.layout(TableRenderer.java:423) ~[layout-7.2.4.jar:?]\r\n    \tat com.itextpdf.layout.renderer.RootRenderer.addChild(RootRenderer.java:141) ~[layout-7.2.4.jar:?]\r\n    \tat com.itextpdf.layout.RootElement.createAndAddRendererSubTree(RootElement.java:367) ~[layout-7.2.4.jar:?]\r\n    \tat com.itextpdf.layout.RootElement.addElement(RootElement.java:376) ~[layout-7.2.4.jar:?]\r\n    \tat com.itextpdf.layout.RootElement.add(RootElement.java:105) ~[layout-7.2.4.jar:?]\r\n    \tat com.itextpdf.layout.Document.add(Document.java:140) ~[layout-7.2.4.jar:?]\r\n    \tat com.itextpdf.layout.element.Table.flush(Table.java:764) ~[layout-7.2.4.jar:?]\r\n\r\n**UPDATE:** looking at the following link\r\n\r\nhttps://kb.itextpdf.com/home/it7kb/installation-guidelines/installing-the-itext-license-key-and-license-key-library-for-java-and-net\r\n\r\nI found out that from version 7.2, I have to use **json license file** instead of xml (there should be a guide to convert from xml license format to json license format)\r\nAlso I Will have to use **licensing-base** jar instead of **itext-licensekey** jar","title":"com.itextpdf.commons.exceptions.UnknownProductException: Product pdfCalligraph is unknown. Probably you have to register it","body":"<p>I have an application using <strong>Itext 7.1.17</strong> and <strong>typography 2.0.9</strong> to generate Arabic pdf files\nand I have two xml license files as follows :</p>\n<p><strong>1- itext-core-license.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;\n&lt;license date=&quot;*******&quot; issuer=&quot;iText Group NV&quot; library=&quot;3&quot;&gt;\n    &lt;licensee expire=&quot;*******&quot;&gt;\n        &lt;name&gt;*******&lt;/name&gt;\n        &lt;email&gt;*******&lt;/email&gt;\n        &lt;company&gt;*******&lt;/company&gt;\n        &lt;version&gt;7.1&lt;/version&gt;\n        &lt;key&gt;*******&lt;/key&gt;\n        &lt;licensetype&gt;commercial&lt;/licensetype&gt;\n        &lt;signature&gt;*******&lt;/signature&gt;\n    &lt;/licensee&gt;\n&lt;/license&gt;\n</code></pre>\n<p><strong>2- pdfCalligraph-license.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;\n&lt;license date=&quot;*********&quot; issuer=&quot;iText Group NV&quot; library=&quot;3&quot;&gt;\n    &lt;licensee expire=&quot;*********&quot;&gt;\n        &lt;name&gt;*********&lt;/name&gt;\n        &lt;email&gt;*********&lt;/email&gt;\n        &lt;company&gt;*********&lt;/company&gt;\n        &lt;version&gt;7.1&lt;/version&gt;\n        &lt;key&gt;*********&lt;/key&gt;\n        &lt;licensetype&gt;commercial&lt;/licensetype&gt;\n        &lt;signature&gt;*********&lt;/signature&gt;\n    &lt;/licensee&gt;\n    &lt;product deploymenttype=&quot;&quot; expire=&quot;*********&quot; licensetype=&quot;commercial&quot; major=&quot;2&quot; name=&quot;pdfCalligraph&quot; platform=&quot;java&quot;&gt;\n        &lt;signature&gt;*********&lt;/signature&gt;\n    &lt;/product&gt;\n&lt;/license&gt;\n</code></pre>\n<p>In my java code before working on the pdf, I load the license files as follows :</p>\n<pre><code>LicenseKey.loadLicenseFile(licensePath + itextkeyCoreFile);\nLicenseKey.loadLicenseFile(licensePath + itextkeyPdfCalligraphFile);\n</code></pre>\n<p>The above code works fine on version <strong>7.1.17</strong> but when upgrading to <strong>itext 7.2.4</strong> and <strong>typography 3.0.1</strong>\nI get the following exception :</p>\n<pre><code>com.itextpdf.commons.exceptions.UnknownProductException: Product pdfCalligraph is unknown. Probably you have to register it.\n    at com.itextpdf.commons.actions.ProductEventHandler.tryProcessEvent(ProductEventHandler.java:147) ~[commons-7.2.4.jar:?]\n    at com.itextpdf.commons.actions.ProductEventHandler.onAcceptedEvent(ProductEventHandler.java:72) ~[commons-7.2.4.jar:?]\n    at com.itextpdf.commons.actions.AbstractContextBasedEventHandler.onEvent(AbstractContextBasedEventHandler.java:70) ~[commons-7.2.4.jar:?]\n    at com.itextpdf.commons.actions.EventManager.onEvent(EventManager.java:74) ~[commons-7.2.4.jar:?]\n    at com.itextpdf.typography.shaping.Shaper.applyOtfScript(Shaper.java:198) ~[typography-3.0.1.jar:?]\n    at com.itextpdf.typography.shaping.TypographyApplier.applyOtfScript(TypographyApplier.java:51) ~[typography-3.0.1.jar:?]\n    at com.itextpdf.layout.renderer.TypographyUtils.applyOtfScript(TypographyUtils.java:122) ~[layout-7.2.4.jar:?]\n    at com.itextpdf.layout.renderer.TextRenderer.applyOtf(TextRenderer.java:815) ~[layout-7.2.4.jar:?]\n    at com.itextpdf.layout.renderer.LineRenderer.applyOtf(LineRenderer.java:1314) ~[layout-7.2.4.jar:?]\n    at com.itextpdf.layout.renderer.LineRenderer.layout(LineRenderer.java:176) ~[layout-7.2.4.jar:?]\n    at com.itextpdf.layout.renderer.ParagraphRenderer.directLayout(ParagraphRenderer.java:237) ~[layout-7.2.4.jar:?]\n    at com.itextpdf.layout.renderer.ParagraphRenderer.layout(ParagraphRenderer.java:108) ~[layout-7.2.4.jar:?]\n    at com.itextpdf.layout.renderer.BlockRenderer.layout(BlockRenderer.java:251) ~[layout-7.2.4.jar:?]\n    at com.itextpdf.layout.renderer.TableRenderer.layout(TableRenderer.java:592) ~[layout-7.2.4.jar:?]\n    at com.itextpdf.layout.renderer.TableRenderer.layout(TableRenderer.java:423) ~[layout-7.2.4.jar:?]\n    at com.itextpdf.layout.renderer.RootRenderer.addChild(RootRenderer.java:141) ~[layout-7.2.4.jar:?]\n    at com.itextpdf.layout.RootElement.createAndAddRendererSubTree(RootElement.java:367) ~[layout-7.2.4.jar:?]\n    at com.itextpdf.layout.RootElement.addElement(RootElement.java:376) ~[layout-7.2.4.jar:?]\n    at com.itextpdf.layout.RootElement.add(RootElement.java:105) ~[layout-7.2.4.jar:?]\n    at com.itextpdf.layout.Document.add(Document.java:140) ~[layout-7.2.4.jar:?]\n    at com.itextpdf.layout.element.Table.flush(Table.java:764) ~[layout-7.2.4.jar:?]\n</code></pre>\n<p><strong>UPDATE:</strong> looking at the following link</p>\n<p><a href=\"https://kb.itextpdf.com/home/it7kb/installation-guidelines/installing-the-itext-license-key-and-license-key-library-for-java-and-net\" rel=\"nofollow noreferrer\">https://kb.itextpdf.com/home/it7kb/installation-guidelines/installing-the-itext-license-key-and-license-key-library-for-java-and-net</a></p>\n<p>I found out that from version 7.2, I have to use <strong>json license file</strong> instead of xml (there should be a guide to convert from xml license format to json license format)\nAlso I Will have to use <strong>licensing-base</strong> jar instead of <strong>itext-licensekey</strong> jar</p>\n"},{"tags":["java","persistence","h2","dbvisualizer"],"comments":[{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1416790388,"post_id":27096363,"comment_id":42698103,"body_markdown":"What are the connection details you are using for your program and `DbVisualizer`?","body":"What are the connection details you are using for your program and <code>DbVisualizer</code>?"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1416790837,"post_id":27096363,"comment_id":42698190,"body_markdown":"Try and make sure the path is using `/` and not `\\` (in `DbVisualizer`)","body":"Try and make sure the path is using <code>&#47;</code> and not <code>` (in </code>DbVisualizer`)"},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1416911638,"post_id":27096363,"comment_id":42748828,"body_markdown":"For convenience, append `;IFEXISTS=TRUE` to avoid creating spurious database files, as suggested [here](http://stackoverflow.com/a/2443685/230513).","body":"For convenience, append <code>;IFEXISTS=TRUE</code> to avoid creating spurious database files, as suggested <a href=\"http://stackoverflow.com/a/2443685/230513\">here</a>."}],"answers":[{"comments":[{"owner":{"account_id":2144972,"reputation":1107,"user_id":1902792,"accept_rate":50,"display_name":"bob"},"score":0,"creation_date":1449135767,"post_id":27100675,"comment_id":55878203,"body_markdown":"i can confirm the `1.4.190` version of h2 will create a `&lt;databaseName&gt;.h2.db` instead of `&lt;databaseName&gt;.mv.db`(even i set `MVCC=TRUE;MULTI_THREADED=TRUE` in jdbc url). what i have to do is set `MC_STORE=TRUE` to force h2 use `&lt;databaseName&gt;.mv.db` file.","body":"i can confirm the <code>1.4.190</code> version of h2 will create a <code>&lt;databaseName&gt;.h2.db</code> instead of <code>&lt;databaseName&gt;.mv.db</code>(even i set <code>MVCC=TRUE;MULTI_THREADED=TRUE</code> in jdbc url). what i have to do is set <code>MC_STORE=TRUE</code> to force h2 use <code>&lt;databaseName&gt;.mv.db</code> file."},{"owner":{"account_id":161745,"reputation":49245,"user_id":382763,"accept_rate":92,"display_name":"Thomas Mueller"},"score":0,"creation_date":1449217367,"post_id":27100675,"comment_id":55920087,"body_markdown":"I think you are using an older version 1.4.190, or the database already existed. Could you check by running `select * from information_schema.settings where name like &#39;%BUILD%&#39;`? With version 1.4.190 you will get `190` twice as the result (`CREATE_BUILD` is the build that was used to create the database, and `info.BUILD_ID` is the current version). By the way it is `MV_STORE` not `MC_STORE`.","body":"I think you are using an older version 1.4.190, or the database already existed. Could you check by running <code>select * from information_schema.settings where name like &#39;%BUILD%&#39;</code>? With version 1.4.190 you will get <code>190</code> twice as the result (<code>CREATE_BUILD</code> is the build that was used to create the database, and <code>info.BUILD_ID</code> is the current version). By the way it is <code>MV_STORE</code> not <code>MC_STORE</code>."},{"owner":{"account_id":2144972,"reputation":1107,"user_id":1902792,"accept_rate":50,"display_name":"bob"},"score":1,"creation_date":1449304756,"post_id":27100675,"comment_id":55957308,"body_markdown":"sorry, i find out it was caused by the database has been created before(without MVCC=TRUE). if the `&lt;databaseName&gt;.h2.db` exist, it seems h2 will reuse the older one rather create new one called `&lt;databaseName&gt;.mv.db`.","body":"sorry, i find out it was caused by the database has been created before(without MVCC=TRUE). if the <code>&lt;databaseName&gt;.h2.db</code> exist, it seems h2 will reuse the older one rather create new one called <code>&lt;databaseName&gt;.mv.db</code>."},{"owner":{"account_id":161745,"reputation":49245,"user_id":382763,"accept_rate":92,"display_name":"Thomas Mueller"},"score":1,"creation_date":1449409521,"post_id":27100675,"comment_id":55985038,"body_markdown":"Yes if a database (created by an older version) already exists, it is used.","body":"Yes if a database (created by an older version) already exists, it is used."}],"tags":[],"owner":{"account_id":161745,"reputation":49245,"user_id":382763,"accept_rate":92,"display_name":"Thomas Mueller"},"comment_count":4,"down_vote_count":0,"up_vote_count":22,"is_accepted":true,"score":22,"last_activity_date":1416927282,"creation_date":1416817944,"answer_id":27100675,"question_id":27096363,"body_markdown":"In H2 version 1.3.x, the database file `&lt;databaseName&gt;.h2.db` is the default. (The storage engine &quot;PageStore&quot; is used).\r\n\r\nIn H2 version 1.4.x, the database file `&lt;databaseName&gt;.mv.db`is the default. (The storage engine &quot;MVStore&quot; is used). The MVStore is still beta right now (November 2014). But you can disable the MVStore by appending `;mv_store=false` to the database URL.\r\n\r\n","title":"How to access *.mv.db file of H2 database?","body":"<p>In H2 version 1.3.x, the database file <code>&lt;databaseName&gt;.h2.db</code> is the default. (The storage engine \"PageStore\" is used).</p>\n\n<p>In H2 version 1.4.x, the database file <code>&lt;databaseName&gt;.mv.db</code>is the default. (The storage engine \"MVStore\" is used). The MVStore is still beta right now (November 2014). But you can disable the MVStore by appending <code>;mv_store=false</code> to the database URL.</p>\n"},{"tags":[],"owner":{"account_id":950627,"reputation":10909,"user_id":976858,"display_name":"Tom Bollwitt"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1495560984,"creation_date":1495560984,"answer_id":44141533,"question_id":27096363,"body_markdown":"The accepted answer is now  several years old and since others may be looking for a more &quot;current&quot; solution...\r\n\r\nTo get it to work just update the H2 JDBC driver that DBVizualizer uses. Basically download the &quot;Platform-Independent Zip&quot; from http://www.h2database.com/html/download.html and copy the ```h2/bin/h2-X.X.X.jar``` file to ```~/.dbvis/jdbc/``` and then restart DBVizualizer so it can pick up the updated driver.\r\n\r\nAlso, make sure you remove ```.mv.db``` from the file name when setting the Database file name in DBVizualizer.","title":"How to access *.mv.db file of H2 database?","body":"<p>The accepted answer is now  several years old and since others may be looking for a more \"current\" solution...</p>\n\n<p>To get it to work just update the H2 JDBC driver that DBVizualizer uses. Basically download the \"Platform-Independent Zip\" from <a href=\"http://www.h2database.com/html/download.html\" rel=\"noreferrer\">http://www.h2database.com/html/download.html</a> and copy the <code>h2/bin/h2-X.X.X.jar</code> file to <code>~/.dbvis/jdbc/</code> and then restart DBVizualizer so it can pick up the updated driver.</p>\n\n<p>Also, make sure you remove <code>.mv.db</code> from the file name when setting the Database file name in DBVizualizer.</p>\n"},{"tags":[],"owner":{"account_id":11791592,"reputation":11,"user_id":8627541,"display_name":"ajit peshane"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1666874029,"creation_date":1666873703,"answer_id":74222043,"question_id":27096363,"body_markdown":"**For Windows Users:**\r\nThe excellent way to read a ***.db.mv** file would be locally installing the h2 database and then running that database locally with the java command. \r\nThen your path to the file will definitely show the data from your table until and unless any errors occur.\r\n\r\nYou can download the h2 database form:\r\nhttp://www.h2database.com/html/download-archive.html\r\n**Note:** choose the database version for H2 which supports your file.\r\nYou can install the H2 database by installing the downloaded .exe file would be around 7 MB.\r\n\r\nthen in the bin directory of H2 open a command prompt and run the command \r\njava -jar &lt;filename&gt; in my case it is \r\n\r\n**command:** java -jar h2-1.4.200.jar\r\n\r\nIt will show the console of the H2 database on the browser\r\n\r\nProvide the database details: \r\nDriver Class: org.h2.Driver JDBC \r\nURL: jdbc:h2:~/h2      &quot;file path&quot;\r\nUser Name:             &quot;blank by default&quot;\r\nPassword:              &quot;blank by default&quot;\r\n\r\nRefer SS below\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/4a7xv.png","title":"How to access *.mv.db file of H2 database?","body":"<p><strong>For Windows Users:</strong>\nThe excellent way to read a *<strong>.db.mv</strong> file would be locally installing the h2 database and then running that database locally with the java command.\nThen your path to the file will definitely show the data from your table until and unless any errors occur.</p>\n<p>You can download the h2 database form:\n<a href=\"http://www.h2database.com/html/download-archive.html\" rel=\"nofollow noreferrer\">http://www.h2database.com/html/download-archive.html</a>\n<strong>Note:</strong> choose the database version for H2 which supports your file.\nYou can install the H2 database by installing the downloaded .exe file would be around 7 MB.</p>\n<p>then in the bin directory of H2 open a command prompt and run the command\njava -jar  in my case it is</p>\n<p><strong>command:</strong> java -jar h2-1.4.200.jar</p>\n<p>It will show the console of the H2 database on the browser</p>\n<p>Provide the database details:\nDriver Class: org.h2.Driver JDBC\nURL: jdbc:h2:~/h2      &quot;file path&quot;\nUser Name:             &quot;blank by default&quot;\nPassword:              &quot;blank by default&quot;</p>\n<p>Refer SS below\n<a href=\"https://i.stack.imgur.com/4a7xv.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"}],"owner":{"account_id":1200939,"reputation":29489,"user_id":1171620,"accept_rate":43,"display_name":"Suzan Cioc"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43209,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"accepted_answer_id":27100675,"answer_count":3,"score":18,"last_activity_date":1666874029,"creation_date":1416790312,"question_id":27096363,"body_markdown":"I have created database with my own program and it appeared as `mydatabase.mv.db` file. \r\n\r\nBut when I tried to access the same database with `DbVisualizer`, with apparently same parameters, it created two files `mydatabase.lock.db` and `celebrity.h2.db` and didn&#39;t see tables, created in the program.\r\n\r\nWhat was the incompatibility?\r\n\r\n**UPDATE**\r\n\r\nboth setups are follows:\r\n\r\n![enter image description here][1]\r\n\r\n![enter image description here][2]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/yvAkN.png\r\n  [2]: http://i.stack.imgur.com/FDTMT.png","title":"How to access *.mv.db file of H2 database?","body":"<p>I have created database with my own program and it appeared as <code>mydatabase.mv.db</code> file. </p>\n\n<p>But when I tried to access the same database with <code>DbVisualizer</code>, with apparently same parameters, it created two files <code>mydatabase.lock.db</code> and <code>celebrity.h2.db</code> and didn't see tables, created in the program.</p>\n\n<p>What was the incompatibility?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>both setups are follows:</p>\n\n<p><img src=\"https://i.stack.imgur.com/yvAkN.png\" alt=\"enter image description here\"></p>\n\n<p><img src=\"https://i.stack.imgur.com/FDTMT.png\" alt=\"enter image description here\"></p>\n"},{"tags":["java","arrays","function","storage"],"comments":[{"owner":{"account_id":3430916,"reputation":3799,"user_id":3059385,"accept_rate":40,"display_name":"Christopher Schneider"},"score":2,"creation_date":1666805482,"post_id":74211883,"comment_id":131024811,"body_markdown":"This can be done with `Object[]` arrays. But why _aren&#39;t_ your Pokemon the same class or at least implement a common interface? Surely they all share some of the same properties (name, HP, MP, etc.) if not the exact same properties.","body":"This can be done with <code>Object[]</code> arrays. But why <i>aren&#39;t</i> your Pokemon the same class or at least implement a common interface? Surely they all share some of the same properties (name, HP, MP, etc.) if not the exact same properties."}],"answers":[{"tags":[],"owner":{"account_id":26493810,"reputation":323,"user_id":20131874,"display_name":"mmartinez04"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1666807753,"creation_date":1666807753,"answer_id":74212372,"question_id":74211883,"body_markdown":"I recommend making each Pokemon extend an abstract class `Pokemon`\r\n\r\n    public abstract class Pokemon {\r\n        // Variables all Pokemon share\r\n        int level;\r\n        int maxHP;\r\n        int currentHP;\r\n        String type;\r\n        ArrayList&lt;Attack&gt; attacks;\r\n        \r\n        public boolean attack(int num){\r\n            ...\r\n        }\r\n    }\r\n    \r\n    public class Charmander extends Pokemon {\r\n        public Charmander(int level, int maxHP){\r\n            this.level = level;\r\n            this.maxHP = maxHP;\r\n            this.currentHP = maxHP;\r\n            this.type = &quot;Fire&quot;;\r\n        }\r\n    }\r\n\r\nThen, you could make an `Array` such as `Pokemon[] myPokemon` that holds different `Pokemon`","title":"how to store multiple different classes into one array","body":"<p>I recommend making each Pokemon extend an abstract class <code>Pokemon</code></p>\n<pre><code>public abstract class Pokemon {\n    // Variables all Pokemon share\n    int level;\n    int maxHP;\n    int currentHP;\n    String type;\n    ArrayList&lt;Attack&gt; attacks;\n    \n    public boolean attack(int num){\n        ...\n    }\n}\n\npublic class Charmander extends Pokemon {\n    public Charmander(int level, int maxHP){\n        this.level = level;\n        this.maxHP = maxHP;\n        this.currentHP = maxHP;\n        this.type = &quot;Fire&quot;;\n    }\n}\n</code></pre>\n<p>Then, you could make an <code>Array</code> such as <code>Pokemon[] myPokemon</code> that holds different <code>Pokemon</code></p>\n"}],"owner":{"account_id":21509801,"reputation":1,"user_id":15852678,"display_name":"Aaron Baer"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":74212372,"answer_count":1,"score":-1,"last_activity_date":1666873990,"creation_date":1666805323,"question_id":74211883,"body_markdown":"I am trying to make a pokemon text based clone for a school project and I need to store the 2 different pokemon that are fighting in a single array so I can easily compare and exchange stats instead of using thousands of if statements for each possible combination of pokemon classes.\r\n\r\n\r\nnothing, i cannot figure out how to store different classes into one single array if the arrays can only be made from one class","title":"how to store multiple different classes into one array","body":"<p>I am trying to make a pokemon text based clone for a school project and I need to store the 2 different pokemon that are fighting in a single array so I can easily compare and exchange stats instead of using thousands of if statements for each possible combination of pokemon classes.</p>\n<p>nothing, i cannot figure out how to store different classes into one single array if the arrays can only be made from one class</p>\n"},{"tags":["java","android-studio","google-cloud-firestore"],"comments":[{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1666794331,"post_id":74163511,"comment_id":131020608,"body_markdown":"Have you solved the issue? If not, show us the entire code that you&#39;re using to read the data from Firestore and how your User class looks like.","body":"Have you solved the issue? If not, show us the entire code that you&#39;re using to read the data from Firestore and how your User class looks like."},{"owner":{"account_id":18997428,"reputation":11,"user_id":13865435,"display_name":"BilalSylver"},"score":0,"creation_date":1666871949,"post_id":74163511,"comment_id":131040732,"body_markdown":"No i didnt solved yet i will edit and post the code you asked me for","body":"No i didnt solved yet i will edit and post the code you asked me for"},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1666872069,"post_id":74163511,"comment_id":131040782,"body_markdown":"Ok, leave a message when you&#39;re done editing.","body":"Ok, leave a message when you&#39;re done editing."},{"owner":{"account_id":18997428,"reputation":11,"user_id":13865435,"display_name":"BilalSylver"},"score":0,"creation_date":1666873729,"post_id":74163511,"comment_id":131041360,"body_markdown":"@AlexMamo it&#39;s ok","body":"@AlexMamo it&#39;s ok"},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1666875304,"post_id":74163511,"comment_id":131041999,"body_markdown":"Can you also show us, how the `rentMeRequestListRef` object is defined?","body":"Can you also show us, how the <code>rentMeRequestListRef</code> object is defined?"},{"owner":{"account_id":18997428,"reputation":11,"user_id":13865435,"display_name":"BilalSylver"},"score":0,"creation_date":1666953812,"post_id":74163511,"comment_id":131061858,"body_markdown":"It&#39;s like in the screenshot.  CollectionReference rentMeRequestListRef = FirebaseFirestore.getInstance().collection(&quot;RentMe Request&quot;);","body":"It&#39;s like in the screenshot.  CollectionReference rentMeRequestListRef = FirebaseFirestore.getInstance().collection(&quot;RentMe Request&quot;);"},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1666955326,"post_id":74163511,"comment_id":131062283,"body_markdown":"Why are you using the `Xpfr...Dom1` as the key of the Map?","body":"Why are you using the <code>Xpfr...Dom1</code> as the key of the Map?"},{"owner":{"account_id":18997428,"reputation":11,"user_id":13865435,"display_name":"BilalSylver"},"score":0,"creation_date":1666958058,"post_id":74163511,"comment_id":131063209,"body_markdown":"As key of the map im putting the user id, and the id is generated automatically","body":"As key of the map im putting the user id, and the id is generated automatically"},{"owner":{"account_id":18997428,"reputation":11,"user_id":13865435,"display_name":"BilalSylver"},"score":0,"creation_date":1666958535,"post_id":74163511,"comment_id":131063361,"body_markdown":"i&#39;ll explain what am doing it&#39;s a renting app in first we have the doc (the renter) and the document is named by the user id (renter) then in that document there are the list of object he want to rent (in this exemple other users(screenshot)) i used map to classifie by user id and the value is data about the object","body":"i&#39;ll explain what am doing it&#39;s a renting app in first we have the doc (the renter) and the document is named by the user id (renter) then in that document there are the list of object he want to rent (in this exemple other users(screenshot)) i used map to classifie by user id and the value is data about the object"},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1666963125,"post_id":74163511,"comment_id":131064875,"body_markdown":"Are you allowed to change the database schema?","body":"Are you allowed to change the database schema?"},{"owner":{"account_id":18997428,"reputation":11,"user_id":13865435,"display_name":"BilalSylver"},"score":0,"creation_date":1667164914,"post_id":74163511,"comment_id":131100658,"body_markdown":"Do you have any suggestion for a better schema ?","body":"Do you have any suggestion for a better schema ?"},{"owner":{"account_id":18997428,"reputation":11,"user_id":13865435,"display_name":"BilalSylver"},"score":0,"creation_date":1667166826,"post_id":74163511,"comment_id":131101039,"body_markdown":"I just saw this topic [link](https://stackoverflow.com/questions/49621231/android-retrieve-custom-objects-stored-in-a-document-in-cloud-firestore) he have same problem as me and you already answered him by restructuring the way he store the data i think i will try the same think","body":"I just saw this topic <a href=\"https://stackoverflow.com/questions/49621231/android-retrieve-custom-objects-stored-in-a-document-in-cloud-firestore\">link</a> he have same problem as me and you already answered him by restructuring the way he store the data i think i will try the same think"},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1667203030,"post_id":74163511,"comment_id":131106273,"body_markdown":"Ok, give it a try and tell me if it works.","body":"Ok, give it a try and tell me if it works."}],"owner":{"account_id":18997428,"reputation":11,"user_id":13865435,"display_name":"BilalSylver"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1666873687,"creation_date":1666441316,"question_id":74163511,"body_markdown":"I stored some data in cloud firestore like this : collection-&gt;document-&gt;map&lt;String, User) look at screenshot.\r\n[![enter image description here][1]][1]\r\nI want to retrieve the data stored in that map what i do :\r\n\r\n    for(DocumetnSnapshot doc : queryDocumentSnapshots){\r\n      Map&lt;String, Object&gt; myMap = doc.getData()}\r\n\r\nThe problem is that i want to retrieve the value of the map as User type but with this method i retrieve it as Object type and i cant cast it what is the solution.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/T59Vp.png\r\n\r\n**EDIT**\r\n\r\nMy User class:\r\n\r\n    public class User {\r\n        private String email;\r\n        private String user_id;\r\n        private String username;\r\n        private String location;\r\n        private String status;\r\n        private String priceUnit;\r\n\r\n        public User(String email, String user_id, String username, String location, String status, String price) {\r\n            this.email = email;\r\n            this.user_id = user_id;\r\n            this.username = username;\r\n            this.location = location;\r\n            this.status = status;\r\n            this.priceUnit = price;\r\n        }\r\n \r\n        public User() { }\r\n    \r\n        public String getPriceUnit() {\r\n            return priceUnit;\r\n        }\r\n    \r\n        public void setPriceUnit(String priceUnit) {\r\n            this.priceUnit = priceUnit;\r\n        }\r\n    \r\n        public String getStatus() {\r\n            return status;\r\n        }\r\n    \r\n        public void setStatus(String status) {\r\n            this.status = status;\r\n        }\r\n    \r\n        public String getEmail() {\r\n            return email;\r\n        }\r\n    \r\n        public void setEmail(String email) {\r\n            this.email = email;\r\n        }\r\n    \r\n        public String getUser_id() {\r\n            return user_id;\r\n        }\r\n    \r\n        public void setUser_id(String user_id) {\r\n            this.user_id = user_id;\r\n        }\r\n    \r\n        public String getUsername() {\r\n            return username;\r\n        }\r\n    \r\n        public void setUsername(String username) {\r\n            this.username = username;\r\n        }\r\n    \r\n        public String getLocation() {\r\n            return location;\r\n        }\r\n    \r\n        public void setLocation(String location) {\r\n            this.location = location;\r\n        }\r\n    }\r\n\r\nMy code to save data is:\r\n\r\n                    rentMeRequestListRef.get().addOnSuccessListener(new OnSuccessListener&lt;QuerySnapshot&gt;() {\r\n                        @Override\r\n                        public void onSuccess(QuerySnapshot queryDocumentSnapshots) {\r\n                            for (DocumentSnapshot doc : queryDocumentSnapshots){\r\n                                if (doc.getId().equals(user.getUser_id())){\r\n                                    rentMeRequestListRef.document(user.getUser_id()).get()\r\n                                            .addOnSuccessListener(new OnSuccessListener&lt;DocumentSnapshot&gt;() {\r\n                                        @Override\r\n                                        public void onSuccess(DocumentSnapshot documentSnapshot) {\r\n                                            Map&lt;String, Object&gt; mapGet = new HashMap&lt;&gt;();\r\n                                            mapGet = documentSnapshot.getData();\r\n                                            mapGet.put(renterUser.getUser_id(), renterUser);\r\n                                            rentMeRequestListRef.document(user.getUser_id()).set(mapGet);\r\n                                        }\r\n                                    });\r\n                                }else{\r\n                                    rentMeRequestListRef.document(user.getUser_id()).get()\r\n                                            .addOnSuccessListener(new OnSuccessListener&lt;DocumentSnapshot&gt;() {\r\n                                        @Override\r\n                                        public void onSuccess(DocumentSnapshot documentSnapshot) {\r\n                                            if (!documentSnapshot.exists()) {\r\n                                                rentMeRequestListRef.document(user.getUser_id()).set(rentMeMap);\r\n                                            }\r\n                                        }\r\n                                    });\r\n                                }\r\n                            }\r\n                        }\r\n                    });","title":"Retrieve map data from document and convert the value type","body":"<p>I stored some data in cloud firestore like this : collection-&gt;document-&gt;map&lt;String, User) look at screenshot.\n<a href=\"https://i.stack.imgur.com/T59Vp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/T59Vp.png\" alt=\"enter image description here\" /></a>\nI want to retrieve the data stored in that map what i do :</p>\n<pre><code>for(DocumetnSnapshot doc : queryDocumentSnapshots){\n  Map&lt;String, Object&gt; myMap = doc.getData()}\n</code></pre>\n<p>The problem is that i want to retrieve the value of the map as User type but with this method i retrieve it as Object type and i cant cast it what is the solution.</p>\n<p><strong>EDIT</strong></p>\n<p>My User class:</p>\n<pre><code>public class User {\n    private String email;\n    private String user_id;\n    private String username;\n    private String location;\n    private String status;\n    private String priceUnit;\n\n    public User(String email, String user_id, String username, String location, String status, String price) {\n        this.email = email;\n        this.user_id = user_id;\n        this.username = username;\n        this.location = location;\n        this.status = status;\n        this.priceUnit = price;\n    }\n\n    public User() { }\n\n    public String getPriceUnit() {\n        return priceUnit;\n    }\n\n    public void setPriceUnit(String priceUnit) {\n        this.priceUnit = priceUnit;\n    }\n\n    public String getStatus() {\n        return status;\n    }\n\n    public void setStatus(String status) {\n        this.status = status;\n    }\n\n    public String getEmail() {\n        return email;\n    }\n\n    public void setEmail(String email) {\n        this.email = email;\n    }\n\n    public String getUser_id() {\n        return user_id;\n    }\n\n    public void setUser_id(String user_id) {\n        this.user_id = user_id;\n    }\n\n    public String getUsername() {\n        return username;\n    }\n\n    public void setUsername(String username) {\n        this.username = username;\n    }\n\n    public String getLocation() {\n        return location;\n    }\n\n    public void setLocation(String location) {\n        this.location = location;\n    }\n}\n</code></pre>\n<p>My code to save data is:</p>\n<pre><code>                rentMeRequestListRef.get().addOnSuccessListener(new OnSuccessListener&lt;QuerySnapshot&gt;() {\n                    @Override\n                    public void onSuccess(QuerySnapshot queryDocumentSnapshots) {\n                        for (DocumentSnapshot doc : queryDocumentSnapshots){\n                            if (doc.getId().equals(user.getUser_id())){\n                                rentMeRequestListRef.document(user.getUser_id()).get()\n                                        .addOnSuccessListener(new OnSuccessListener&lt;DocumentSnapshot&gt;() {\n                                    @Override\n                                    public void onSuccess(DocumentSnapshot documentSnapshot) {\n                                        Map&lt;String, Object&gt; mapGet = new HashMap&lt;&gt;();\n                                        mapGet = documentSnapshot.getData();\n                                        mapGet.put(renterUser.getUser_id(), renterUser);\n                                        rentMeRequestListRef.document(user.getUser_id()).set(mapGet);\n                                    }\n                                });\n                            }else{\n                                rentMeRequestListRef.document(user.getUser_id()).get()\n                                        .addOnSuccessListener(new OnSuccessListener&lt;DocumentSnapshot&gt;() {\n                                    @Override\n                                    public void onSuccess(DocumentSnapshot documentSnapshot) {\n                                        if (!documentSnapshot.exists()) {\n                                            rentMeRequestListRef.document(user.getUser_id()).set(rentMeMap);\n                                        }\n                                    }\n                                });\n                            }\n                        }\n                    }\n                });\n</code></pre>\n"},{"tags":["java","android","angular","cordova","ionic-framework"],"comments":[{"owner":{"account_id":2078089,"reputation":9678,"user_id":1850851,"accept_rate":42,"display_name":"Christian Vincenzo Traina"},"score":0,"creation_date":1666874170,"post_id":74221630,"comment_id":131041534,"body_markdown":"Your code looks fine to me (except for `\\&lt;`). Did you try debugging your code? Are you using a promisify function? You&#39;d rather use an Observable","body":"Your code looks fine to me (except for <code>\\&lt;</code>). Did you try debugging your code? Are you using a promisify function? You&#39;d rather use an Observable"},{"owner":{"account_id":2078089,"reputation":9678,"user_id":1850851,"accept_rate":42,"display_name":"Christian Vincenzo Traina"},"score":0,"creation_date":1666874321,"post_id":74221630,"comment_id":131041595,"body_markdown":"I mean, promises are meant to be executed only once.  You should return a raw callback or an Observable","body":"I mean, promises are meant to be executed only once.  You should return a raw callback or an Observable"},{"owner":{"account_id":14456424,"reputation":31,"user_id":10442499,"display_name":"Halil Polat"},"score":0,"creation_date":1666940996,"post_id":74221630,"comment_id":131057872,"body_markdown":"cordova exec return always a promise. I couldn&#39;t find how the observable is returned. Is there a way return observable from cordova exec function?","body":"cordova exec return always a promise. I couldn&#39;t find how the observable is returned. Is there a way return observable from cordova exec function?"},{"owner":{"account_id":2078089,"reputation":9678,"user_id":1850851,"accept_rate":42,"display_name":"Christian Vincenzo Traina"},"score":0,"creation_date":1666945488,"post_id":74221630,"comment_id":131059137,"body_markdown":"I&#39;m not an expert, my `cordova.exec` returns a callback and I wrap it in a Promise. I suppose it&#39;s something in new versions because I&#39;m not aware of it","body":"I&#39;m not an expert, my <code>cordova.exec</code> returns a callback and I wrap it in a Promise. I suppose it&#39;s something in new versions because I&#39;m not aware of it"},{"owner":{"account_id":2078089,"reputation":9678,"user_id":1850851,"accept_rate":42,"display_name":"Christian Vincenzo Traina"},"score":0,"creation_date":1666946051,"post_id":74221630,"comment_id":131059340,"body_markdown":"The [docs](https://cordova.apache.org/docs/en/11.x/guide/hybrid/plugins/#the-javascript-interface) about cordova 11 say that `cordova.exec` accepts two callbacks. Why don&#39;t you try `cordova.exec` in place of `cordova()`?","body":"The <a href=\"https://cordova.apache.org/docs/en/11.x/guide/hybrid/plugins/#the-javascript-interface\" rel=\"nofollow noreferrer\">docs</a> about cordova 11 say that <code>cordova.exec</code> accepts two callbacks. Why don&#39;t you try <code>cordova.exec</code> in place of <code>cordova()</code>?"},{"owner":{"account_id":14456424,"reputation":31,"user_id":10442499,"display_name":"Halil Polat"},"score":0,"creation_date":1666966738,"post_id":74221630,"comment_id":131066101,"body_markdown":"I have tried but there is no difference between  cordova.exec and cordova(). Thank you for your help:)","body":"I have tried but there is no difference between  cordova.exec and cordova(). Thank you for your help:)"}],"answers":[{"comments":[{"owner":{"account_id":14456424,"reputation":31,"user_id":10442499,"display_name":"Halil Polat"},"score":0,"creation_date":1666943263,"post_id":74222009,"comment_id":131058444,"body_markdown":"Can I use  this logic for  observable data ? So I get a continuous data from plugin and I processing this data. Can I return Observable from plugin and subscibe to it in ionic side?","body":"Can I use  this logic for  observable data ? So I get a continuous data from plugin and I processing this data. Can I return Observable from plugin and subscibe to it in ionic side?"}],"tags":[],"owner":{"account_id":1387788,"reputation":866,"user_id":1319393,"accept_rate":61,"display_name":"Maximilian K&#246;rner"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666873558,"creation_date":1666873558,"answer_id":74222009,"question_id":74221630,"body_markdown":"If i understand your problem correctly you have a custom cordova plugin which you call from your js side. \r\nYou then want to return results from your plugin to the js world multiple times and not just once.\r\n\r\nThe problem is that the lifecycle of your plugin invocation is completed by calling `sendPluginResult()`\r\n\r\nI have solved this by not using `sendPluginResult()` to transfer my return values to JS but calling a JS function directly via the WebView:\r\n\r\n **1.** In JS set a custom function which will be called from your plugin with your result values on the object of your custom plugin like:\r\n\r\n```\r\ncordova.plugins.&lt;pluginPackage&gt;.&lt;CustomPlugin&gt;.&lt;CustomCallbackFunction&gt; = (data) =&gt; {\r\n //your JS side processing of data returned from your plugin more than once\r\n}\r\n```\r\nWith your values for &lt;pluginPackage&gt; &lt;CustomPlugin&gt; and&lt;CustomCallbackFunction&gt;\r\n\r\n **2.**  Persisting your callbackContext in your custom Plugin to finally finish the call as you already do by calling `sendPluginResult()`\r\n\r\n**3.** \r\nUpon invocation of your plugin function dont&#39;t call `sendPluginResult()` but instead directly prompt the webview to process JS code where you call your previously in 1. defined callback Function\r\n`webView.sendJavascript(&quot;cordova.plugins.&lt;pluginPackage&gt;.&lt;CustomPlugin&gt;.&lt;CustomCallbackFunction&gt;(&#39;&quot; + &lt;your payload as JSON string&gt; + &quot;&#39;)&quot;)` (Kotlin code)\r\n\r\n**4.** Finally when you are finished calling your callback multiple times call `sendPluginResult()` on your persisted callbackContext status OK to finish the plugin invocation.","title":"I can&#39;t execute a cordova callback multiple times","body":"<p>If i understand your problem correctly you have a custom cordova plugin which you call from your js side.\nYou then want to return results from your plugin to the js world multiple times and not just once.</p>\n<p>The problem is that the lifecycle of your plugin invocation is completed by calling <code>sendPluginResult()</code></p>\n<p>I have solved this by not using <code>sendPluginResult()</code> to transfer my return values to JS but calling a JS function directly via the WebView:</p>\n<p><strong>1.</strong> In JS set a custom function which will be called from your plugin with your result values on the object of your custom plugin like:</p>\n<pre><code>cordova.plugins.&lt;pluginPackage&gt;.&lt;CustomPlugin&gt;.&lt;CustomCallbackFunction&gt; = (data) =&gt; {\n //your JS side processing of data returned from your plugin more than once\n}\n</code></pre>\n<p>With your values for   and</p>\n<p><strong>2.</strong>  Persisting your callbackContext in your custom Plugin to finally finish the call as you already do by calling <code>sendPluginResult()</code></p>\n<p><strong>3.</strong>\nUpon invocation of your plugin function dont't call <code>sendPluginResult()</code> but instead directly prompt the webview to process JS code where you call your previously in 1. defined callback Function\n<code>webView.sendJavascript(&quot;cordova.plugins.&lt;pluginPackage&gt;.&lt;CustomPlugin&gt;.&lt;CustomCallbackFunction&gt;('&quot; + &lt;your payload as JSON string&gt; + &quot;')&quot;)</code> (Kotlin code)</p>\n<p><strong>4.</strong> Finally when you are finished calling your callback multiple times call <code>sendPluginResult()</code> on your persisted callbackContext status OK to finish the plugin invocation.</p>\n"}],"owner":{"account_id":14456424,"reputation":31,"user_id":10442499,"display_name":"Halil Polat"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":291,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1666873558,"creation_date":1666871663,"question_id":74221630,"body_markdown":"I develop an ionic-cordova project. I need execute a cordova callback more than once.\r\n\r\nHere is my Component codes:\r\n\r\n```\r\n\r\nlet data =JSON.parse(JSON.stringify(this.someOptions)) \r\n    this.customService.TestFunction(data).then(response =&gt; {\r\n      console.log(response);\r\n    })\r\n      .catch(ex =&gt; {\r\n       // console.log(ex)\r\n      })\r\n  }\r\n```\r\n\r\nHere is my CustomService\r\n\r\n```\r\n TestFunction(arg1: any): Promise&lt;any&gt; {\r\n        var temp = cordova(this, &quot;TestFunction&quot;, { callbackStyle: &quot;object&quot; }, [arg1]);\r\n        return temp\r\n    }\r\n```\r\n\r\nHere is js code\r\n\r\n```\r\nexports.TestFunction = function (arg0, success, error) {\r\n    exec(success, error, &#39;SomeCordovaPlugin&#39;, &#39;TestFunction&#39;, [arg0]);\r\n};\r\n```\r\n\r\nHere is Java codes for android\r\n\r\n```\r\n  public class SomeCordovaPlugin extends CordovaPlugin {\r\n\r\n  private CallbackContext testCallbackContext;\r\n\r\n  @Override\r\n  public boolean execute(String action, JSONArray args, CallbackContext callbackContext) throws JSONException {\r\n       if (action.equals(&quot;TestFunction&quot;)) {\r\n           this.TestFunction(args, callbackContext);\r\n           return true;\r\n       }\r\n       return false;\r\n  }\r\n\r\n  private void TestFunction(JSONArray args, CallbackContext callbackContext) {\r\n     testCallbackContext=callbackContext;\r\n     if (args != null) {\r\n       try {\r\n           for(int i=0;i\\&lt;7;i++){\r\n                 PluginResult pluginResult = new PluginResult(PluginResult.Status.OK ,testCallbackContext.getCallbackId());\r\n                 pluginResult.setKeepCallback(true); // keep callback\r\n                 testCallbackContext.sendPluginResult(pluginResult);  \r\n            }\r\n          } catch (Exception ex) {\r\n                 testCallbackContext.error(&quot;An error occured:&quot; + ex);\r\n                }\r\n     }\r\n  }\r\n\r\n}\r\n```\r\n\r\nI want to call cordova exec more than once. pluginResult.setKeepCallback(true) is not work for me. I am using ionic 6 and cordova 11. How can I call cordova  exec more than once?","title":"I can&#39;t execute a cordova callback multiple times","body":"<p>I develop an ionic-cordova project. I need execute a cordova callback more than once.</p>\n<p>Here is my Component codes:</p>\n<pre><code>\nlet data =JSON.parse(JSON.stringify(this.someOptions)) \n    this.customService.TestFunction(data).then(response =&gt; {\n      console.log(response);\n    })\n      .catch(ex =&gt; {\n       // console.log(ex)\n      })\n  }\n</code></pre>\n<p>Here is my CustomService</p>\n<pre><code> TestFunction(arg1: any): Promise&lt;any&gt; {\n        var temp = cordova(this, &quot;TestFunction&quot;, { callbackStyle: &quot;object&quot; }, [arg1]);\n        return temp\n    }\n</code></pre>\n<p>Here is js code</p>\n<pre><code>exports.TestFunction = function (arg0, success, error) {\n    exec(success, error, 'SomeCordovaPlugin', 'TestFunction', [arg0]);\n};\n</code></pre>\n<p>Here is Java codes for android</p>\n<pre><code>  public class SomeCordovaPlugin extends CordovaPlugin {\n\n  private CallbackContext testCallbackContext;\n\n  @Override\n  public boolean execute(String action, JSONArray args, CallbackContext callbackContext) throws JSONException {\n       if (action.equals(&quot;TestFunction&quot;)) {\n           this.TestFunction(args, callbackContext);\n           return true;\n       }\n       return false;\n  }\n\n  private void TestFunction(JSONArray args, CallbackContext callbackContext) {\n     testCallbackContext=callbackContext;\n     if (args != null) {\n       try {\n           for(int i=0;i\\&lt;7;i++){\n                 PluginResult pluginResult = new PluginResult(PluginResult.Status.OK ,testCallbackContext.getCallbackId());\n                 pluginResult.setKeepCallback(true); // keep callback\n                 testCallbackContext.sendPluginResult(pluginResult);  \n            }\n          } catch (Exception ex) {\n                 testCallbackContext.error(&quot;An error occured:&quot; + ex);\n                }\n     }\n  }\n\n}\n</code></pre>\n<p>I want to call cordova exec more than once. pluginResult.setKeepCallback(true) is not work for me. I am using ionic 6 and cordova 11. How can I call cordova  exec more than once?</p>\n"},{"tags":["java","graphics","download"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":1,"creation_date":1666880881,"post_id":74221872,"comment_id":131044242,"body_markdown":"`newBack = imageVoid;` - you are always painting on top of the same image. You can&#39;t just assign the original image using the equals statement. You need to paint the imageVoid onto the newBack BuffererredImage the same way you paint the dimg.","body":"<code>newBack = imageVoid;</code> - you are always painting on top of the same image. You can&#39;t just assign the original image using the equals statement. You need to paint the imageVoid onto the newBack BuffererredImage the same way you paint the dimg."},{"owner":{"account_id":26749028,"reputation":1,"user_id":20348708,"display_name":"Bawich"},"score":0,"creation_date":1666883618,"post_id":74221872,"comment_id":131045294,"body_markdown":"Thank you, i didn&#39;t know about useless of equals statement in this case! I made even more, used BufferedImage.BITMASK to make every time new transparrent picture 125x75px, and then draw my srcImage on it, so thats code in try:\n`srcImage = ImageIO.read(in).getScaledInstance(75,75,Image.SCALE_DEFAULT);\n                    newBack = new BufferedImage(125, 75, BufferedImage.BITMASK);\n                    newBack.createGraphics().drawImage(srcImage,25,0,null);\n                    ImageIO.write(newBack, &quot;png&quot;, new File(picturesPass + channel.getName() + &quot;.png&quot;));`","body":"Thank you, i didn&#39;t know about useless of equals statement in this case! I made even more, used BufferedImage.BITMASK to make every time new transparrent picture 125x75px, and then draw my srcImage on it, so thats code in try: <code>srcImage = ImageIO.read(in).getScaledInstance(75,75,Image.SCALE_DEFAULT&zwnj;&#8203;);                     newBack = new BufferedImage(125, 75, BufferedImage.BITMASK);                     newBack.createGraphics().drawImage(srcImage,25,0,null);                     ImageIO.write(newBack, &quot;png&quot;, new File(picturesPass + channel.getName() + &quot;.png&quot;));</code>"}],"owner":{"account_id":26749028,"reputation":1,"user_id":20348708,"display_name":"Bawich"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1666873366,"creation_date":1666872902,"question_id":74221872,"body_markdown":"every &quot;try&quot; I&#39;m download picture and put in *srcImage*, then i make it picture size 75x75(and it works). After that I take void picture(*imageVoid*) 125x75 size, and I want to draw on this void picture my downloaded picture, and then save this file. The first picture goes good, but on the next pictures i can see that new picture writes tight on the old and after several iterations i have something like this:[![enter image description here](https://i.stack.imgur.com/zRaoQ.png)](https://i.stack.imgur.com/zRaoQ.png) \r\nThats my part of code:\r\n\r\n```\r\npublic static void downloadPictures(ArrayList&lt;Channel&gt; channels){\r\n    String url;\r\n    File output;\r\n    BufferedImage imageVoid = null;\r\n    BufferedImage imageNotFound = null;\r\n    BufferedImage newBack;\r\n    BufferedImage srcImage;\r\n    try {\r\n        imageNotFound = ImageIO.read(new File(notImagePass));\r\n        imageVoid = ImageIO.read(new File(voidPass));\r\n    } catch (IOException e) {\r\n        System.out.println(&quot;There is no picture for not founded file OR no void picture&quot;);\r\n    }\r\n    //==============================\r\n    //==============================Making pictures and checking if link exists\r\n    //==============================\r\n    for (Channel channel : channels) {\r\n        url = channel.getLink();\r\n        if (!channel.ifLinkExists()) {  //=====link exists\r\n            try (InputStream in = URI.create(url).toURL().openStream()) {\r\n                srcImage = ImageIO.read(in);\r\n\r\n                Image tmp = srcImage.getScaledInstance(75,75,Image.SCALE_DEFAULT);\r\n                BufferedImage dimg = new BufferedImage(75,75,BufferedImage.TYPE_INT_ARGB);\r\n                Graphics2D g2d = dimg.createGraphics();\r\n                g2d.drawImage(tmp, 0, 0, null);\r\n                g2d.dispose();\r\n\r\n                newBack = imageVoid;\r\n                newBack.createGraphics().drawImage(dimg,25,0,null);\r\n\r\n                ImageIO.write(newBack, &quot;png&quot;, new File(picturesPass + channel.getName() + &quot;.png&quot;));\r\n            } catch (IOException e) {  //=====link exists but source not founded\r\n                output = new File(picturesPass + channel.getName() + &quot;.png&quot;);\r\n                try {\r\n                    ImageIO.write(imageNotFound, &quot;png&quot;,output);\r\n                } catch (IOException ex) {\r\n                    throw new RuntimeException(ex);\r\n                }\r\n            }\r\n        } else {  //=====link doesnt exists\r\n            output = new File(picturesPass + channel.getName() + &quot;.png&quot;);\r\n            try {\r\n                ImageIO.write(imageNotFound, &quot;png&quot;,output);\r\n            } catch (IOException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n\r\nI checked if I do resize right and it was OK, I checked my void picture,maybe there&#39;s something I don&#39;t know about downloading, maybe its somewhere in the buffer(??), maybe it&#39;s because od method drawImage, idk.","title":"Downloading and drawing images, and they&#39;re overdrawing","body":"<p>every &quot;try&quot; I'm download picture and put in <em>srcImage</em>, then i make it picture size 75x75(and it works). After that I take void picture(<em>imageVoid</em>) 125x75 size, and I want to draw on this void picture my downloaded picture, and then save this file. The first picture goes good, but on the next pictures i can see that new picture writes tight on the old and after several iterations i have something like this:<a href=\"https://i.stack.imgur.com/zRaoQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zRaoQ.png\" alt=\"enter image description here\" /></a>\nThats my part of code:</p>\n<pre><code>public static void downloadPictures(ArrayList&lt;Channel&gt; channels){\n    String url;\n    File output;\n    BufferedImage imageVoid = null;\n    BufferedImage imageNotFound = null;\n    BufferedImage newBack;\n    BufferedImage srcImage;\n    try {\n        imageNotFound = ImageIO.read(new File(notImagePass));\n        imageVoid = ImageIO.read(new File(voidPass));\n    } catch (IOException e) {\n        System.out.println(&quot;There is no picture for not founded file OR no void picture&quot;);\n    }\n    //==============================\n    //==============================Making pictures and checking if link exists\n    //==============================\n    for (Channel channel : channels) {\n        url = channel.getLink();\n        if (!channel.ifLinkExists()) {  //=====link exists\n            try (InputStream in = URI.create(url).toURL().openStream()) {\n                srcImage = ImageIO.read(in);\n\n                Image tmp = srcImage.getScaledInstance(75,75,Image.SCALE_DEFAULT);\n                BufferedImage dimg = new BufferedImage(75,75,BufferedImage.TYPE_INT_ARGB);\n                Graphics2D g2d = dimg.createGraphics();\n                g2d.drawImage(tmp, 0, 0, null);\n                g2d.dispose();\n\n                newBack = imageVoid;\n                newBack.createGraphics().drawImage(dimg,25,0,null);\n\n                ImageIO.write(newBack, &quot;png&quot;, new File(picturesPass + channel.getName() + &quot;.png&quot;));\n            } catch (IOException e) {  //=====link exists but source not founded\n                output = new File(picturesPass + channel.getName() + &quot;.png&quot;);\n                try {\n                    ImageIO.write(imageNotFound, &quot;png&quot;,output);\n                } catch (IOException ex) {\n                    throw new RuntimeException(ex);\n                }\n            }\n        } else {  //=====link doesnt exists\n            output = new File(picturesPass + channel.getName() + &quot;.png&quot;);\n            try {\n                ImageIO.write(imageNotFound, &quot;png&quot;,output);\n            } catch (IOException e) {\n                throw new RuntimeException(e);\n            }\n        }\n    }\n}\n</code></pre>\n<p>I checked if I do resize right and it was OK, I checked my void picture,maybe there's something I don't know about downloading, maybe its somewhere in the buffer(??), maybe it's because od method drawImage, idk.</p>\n"},{"tags":["java","android","firebase","firebase-dynamic-links","android-deep-link"],"answers":[{"comments":[{"owner":{"account_id":22011354,"reputation":394,"user_id":16281582,"display_name":"Venkat"},"score":0,"creation_date":1628680460,"post_id":68733148,"comment_id":121484560,"body_markdown":"Do you mean `postID` means Document id?","body":"Do you mean <code>postID</code> means Document id?"},{"owner":{"account_id":7233201,"reputation":7147,"user_id":5519300,"display_name":"Tarik Huber"},"score":0,"creation_date":1628714502,"post_id":68733148,"comment_id":121498531,"body_markdown":"Yes. Or any kind of id defining a post. You can also add some kind of `path` data to the params to be more flexible and open `comments` or other parts of your app.","body":"Yes. Or any kind of id defining a post. You can also add some kind of <code>path</code> data to the params to be more flexible and open <code>comments</code> or other parts of your app."}],"tags":[],"owner":{"account_id":7233201,"reputation":7147,"user_id":5519300,"display_name":"Tarik Huber"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1628627393,"creation_date":1628627393,"answer_id":68733148,"question_id":68723662,"body_markdown":"You can use URL parameters in your Firebase Dynamic links and with that determine what post to show in the app when it&#39;s opened by a dynamic link.\r\n\r\nFor example such an URL:\r\n\r\n````\r\nUri.parse(&#39;https://your.page.link/view_post/?postID=${post.uid}&#39;\r\n````\r\n","title":"how to create a deep link for FireStore content?","body":"<p>You can use URL parameters in your Firebase Dynamic links and with that determine what post to show in the app when it's opened by a dynamic link.</p>\n<p>For example such an URL:</p>\n<pre><code>Uri.parse('https://your.page.link/view_post/?postID=${post.uid}'\n</code></pre>\n"}],"owner":{"account_id":22011354,"reputation":394,"user_id":16281582,"display_name":"Venkat"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":269,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1666873327,"creation_date":1628585221,"question_id":68723662,"body_markdown":"In my android app, I have some user posts like in social media posts with some text, photo, and some additional details.\r\n\r\nWhat I need is when user clicks on the share button it will create a dynamic or deep-link to that specific post.\r\n\r\nI had stored some posts in Firestore and some in Realtime Database. How to create dynamic links to the specific posts?\r\n\r\nI had seen the developer page, but not found how to achieve this. Any suggestions please...","title":"how to create a deep link for FireStore content?","body":"<p>In my android app, I have some user posts like in social media posts with some text, photo, and some additional details.</p>\n<p>What I need is when user clicks on the share button it will create a dynamic or deep-link to that specific post.</p>\n<p>I had stored some posts in Firestore and some in Realtime Database. How to create dynamic links to the specific posts?</p>\n<p>I had seen the developer page, but not found how to achieve this. Any suggestions please...</p>\n"},{"tags":["java","prepared-statement","aggregation","dao","composition"],"comments":[{"owner":{"account_id":1726806,"reputation":13951,"user_id":4790924,"accept_rate":67,"display_name":"Sharon Ben Asher"},"score":0,"creation_date":1666849040,"post_id":74217104,"comment_id":131033612,"body_markdown":"what do you mean &quot;proper way&quot; ? efficient? extensible? readable?","body":"what do you mean &quot;proper way&quot; ? efficient? extensible? readable?"},{"owner":{"account_id":1810821,"reputation":475,"user_id":1646928,"accept_rate":71,"display_name":"JamesB"},"score":0,"creation_date":1666873005,"post_id":74217104,"comment_id":131041097,"body_markdown":"@SharonBenAsher Made this by intuition, does not know if is good practice, for example, to call product DAO to save products lists inside de shopping cart DAO.","body":"@SharonBenAsher Made this by intuition, does not know if is good practice, for example, to call product DAO to save products lists inside de shopping cart DAO."}],"answers":[{"comments":[{"owner":{"account_id":1810821,"reputation":475,"user_id":1646928,"accept_rate":71,"display_name":"JamesB"},"score":0,"creation_date":1666873736,"post_id":74218323,"comment_id":131041365,"body_markdown":"So it&#39;s okay from inside, method shoppingCardPersistence.create(ShoppingCart cart) to access productPersistence.create(List&lt;Products&gt; p), right?","body":"So it&#39;s okay from inside, method shoppingCardPersistence.create(ShoppingCart cart) to access productPersistence.create(List&lt;Products&gt; p), right?"},{"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"score":0,"creation_date":1666873836,"post_id":74218323,"comment_id":131041404,"body_markdown":"@JamesB In my opinion, it is. Why wouldn&#39;t it?","body":"@JamesB In my opinion, it is. Why wouldn&#39;t it?"},{"owner":{"account_id":1810821,"reputation":475,"user_id":1646928,"accept_rate":71,"display_name":"JamesB"},"score":0,"creation_date":1666874009,"post_id":74218323,"comment_id":131041489,"body_markdown":"Maybe it was a bad practice and there is an alternative pattern.","body":"Maybe it was a bad practice and there is an alternative pattern."},{"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"score":0,"creation_date":1666874263,"post_id":74218323,"comment_id":131041572,"body_markdown":"What makes you think it&#39;s bad practice?","body":"What makes you think it&#39;s bad practice?"},{"owner":{"account_id":1810821,"reputation":475,"user_id":1646928,"accept_rate":71,"display_name":"JamesB"},"score":0,"creation_date":1667004434,"post_id":74218323,"comment_id":131075560,"body_markdown":"Solid and high cohesion, DAO inside DAO.","body":"Solid and high cohesion, DAO inside DAO."}],"tags":[],"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1666872068,"creation_date":1666855906,"answer_id":74218323,"question_id":74217104,"body_markdown":"You have a Java model for your data, what database schema do you need to store it?\r\n\r\nIt&#39;s pretty obvious for the simple types like numbers and strings; for the `List` of products in your `ShoppingCart`, I assume you want to conserve the order of the `Product`s in you `ShoppingCart`. I also assume that a `Product` is in fact an item in a `ShoppingCart` since it has a `quantity` field; so a `Product` has no existence of it&#39;s own: it&#39;s a part of a `ShoppingCard`.\r\n\r\nWith these assumptions, I can represent the Java model in the database with two tables:\r\n\r\n - SHOPPING_CART(ID, DATE)\r\n - PRODUCT(SHOPPING_CART_ID, POS, NAME, QUANTITY)\r\n\r\nand then define class `ShoppingCartPersistence`:\r\n\r\n    public class ShoppingCardPersistence {\r\n        private final Connection connection;\r\n        private final ProductPersistence productPersistence;\r\n    \r\n        public ShoppingCardPersistence(Connection connection) {\r\n            this.connection = connection;\r\n            this.productPersistence = new ProductPersistence(connection);\r\n        }\r\n    \r\n        public void create(ShoppingCart cart) throws SQLException {\r\n            try (PreparedStatement stmt = connection.prepareStatement(\r\n                    &quot;INSERT INTO SHOPPING_CART(ID, DATE) VALUES(?, ?)&quot;)) {\r\n                stmt.setLong(1, cart.getId());\r\n                stmt.setTimestamp(2, new Timestamp(cart.getDate().getTime()));\r\n                stmt.executeUpdate();\r\n            }\r\n            productPersistence.create(cart.getId(), cart.getProducts());\r\n        }\r\n    \r\n        public ShoppingCart read(long id) throws SQLException {\r\n            ShoppingCart cart;\r\n            try (PreparedStatement stmt = connection.prepareStatement(\r\n                    &quot;SELECT DATE FROM SHOPPING_CART WHERE ID=?&quot;)) {\r\n                stmt.setLong(1, id);\r\n                ResultSet rs = stmt.executeQuery();\r\n                if (!rs.next()) {\r\n                    return null;\r\n                }\r\n                cart = new ShoppingCart();\r\n                cart.setId(id);\r\n                cart.setDate(new Date(rs.getTimestamp(1).getTime()));\r\n            }\r\n            cart.setProducts(productPersistence.read(cart.getId()));\r\n            return cart;\r\n        }\r\n    \r\n        public void update(ShoppingCart cart) throws SQLException {\r\n            productPersistence.delete(cart.getId());\r\n            try (PreparedStatement stmt = connection.prepareStatement(\r\n                    &quot;UPDATE SHOPPING_CART SET DATE=? WHERE ID=?&quot;)) {\r\n                stmt.setLong(2, cart.getId());\r\n                stmt.setTimestamp(1, new Timestamp(cart.getDate().getTime()));\r\n                stmt.executeUpdate();\r\n            }\r\n            productPersistence.create(cart.getId(), cart.getProducts());\r\n        }\r\n    \r\n        public void delete(ShoppingCart cart) throws SQLException {\r\n            productPersistence.delete(cart.getId());\r\n            try (PreparedStatement stmt = connection.prepareStatement(\r\n                    &quot;DELETE SHOPPING_CART WHERE ID=?&quot;)) {\r\n            stmt.setLong(1, cart.getId());\r\n            stmt.executeUpdate();\r\n        }\r\n    }\r\n}\r\n\r\nand `ProductPersistence`:\r\n\r\n    public class ProductPersistence {\r\n        private final Connection connection;\r\n    \r\n        public ProductPersistence(Connection connection) {\r\n            this.connection = connection;\r\n        }\r\n    \r\n        public void create(long id, List&lt;Product&gt; products) throws SQLException {\r\n            if (!products.isEmpty()) {\r\n                try (PreparedStatement stmt = connection.prepareStatement(\r\n                        &quot;INSERT INTO PRODUCT(SHOPPING_CART_ID, POS, NAME, QUANTITY)&quot;\r\n                        + &quot; VALUES(?,?,?,?)&quot;)) {\r\n                    for (int i = 0; i &lt; products.size(); ++i) {\r\n                        Product prod = products.get(i);\r\n                        stmt.setLong(1, id);\r\n                        stmt.setInt(2, i);\r\n                        stmt.setString(3, prod.getName());\r\n                        stmt.setInt(4, prod.getQuantity());\r\n                        stmt.addBatch();\r\n                    }\r\n                    stmt.executeBatch();\r\n                }\r\n            }\r\n        }\r\n    \r\n        public List&lt;Product&gt; read(long id) throws SQLException {\r\n            try (PreparedStatement stmt = connection.prepareStatement(\r\n                    &quot;SELECT POS, NAME, QUANTITY FROM PRODUCT&quot;\r\n                    + &quot; WHERE SHOPPING_CART_ID=?&quot;\r\n                    + &quot; ORDER BY POS&quot;)) {\r\n                List&lt;Product&gt; result = new ArrayList&lt;&gt;();\r\n                stmt.setLong(1, id);\r\n                ResultSet rs = stmt.executeQuery();\r\n                while (rs.next()) {\r\n                    Product prod = new Product();\r\n                    prod.setQuantity(rs.getInt(2));\r\n                    prod.setName(rs.getString(3));\r\n                    result.add(prod);\r\n                }\r\n                return result;\r\n            }\r\n        }\r\n    \r\n        public void delete(long id) throws SQLException {\r\n            try (PreparedStatement stmt = connection.prepareStatement(\r\n                    &quot;DELETE PRODUCT WHERE SHOPPING_CART_ID=?&quot;)) {\r\n                stmt.setLong(1, id);\r\n                stmt.executeUpdate();\r\n            }\r\n        }\r\n    }\r\n\r\nYou would typically use these classes with a piece of code like this:\r\n\r\n        try (Connection connection = ConnectionFactory.getConnection()) {\r\n            ShoppingCartPersistence pm\r\n                    = new ShoppingCartPersistence(connection);\r\n            \r\n            ShoppingCart cart = pm.read(shoppingCardId);\r\n            \r\n            // do a lot of useful thing with the cart\r\n            \r\n            pm.update(cart);\r\n            connection.commit();\r\n        } catch (SQLException ex) {\r\n            ex.printStackTrace();\r\n        }\r\n\r\nNote that in your `ConnectionFactory` you should disable autocommit.\r\n\r\nThe ID of a shopping card has to be assigned before a call to `ShoppingCardPersistence.create` but databases offer mechanisms to automatically generate them, either with an autoincremented column or with a sequence.\r\n\r\n","title":"How to Composition/Association/List of Objects in DAO implementation","body":"<p>You have a Java model for your data, what database schema do you need to store it?</p>\n<p>It's pretty obvious for the simple types like numbers and strings; for the <code>List</code> of products in your <code>ShoppingCart</code>, I assume you want to conserve the order of the <code>Product</code>s in you <code>ShoppingCart</code>. I also assume that a <code>Product</code> is in fact an item in a <code>ShoppingCart</code> since it has a <code>quantity</code> field; so a <code>Product</code> has no existence of it's own: it's a part of a <code>ShoppingCard</code>.</p>\n<p>With these assumptions, I can represent the Java model in the database with two tables:</p>\n<ul>\n<li>SHOPPING_CART(ID, DATE)</li>\n<li>PRODUCT(SHOPPING_CART_ID, POS, NAME, QUANTITY)</li>\n</ul>\n<p>and then define class <code>ShoppingCartPersistence</code>:</p>\n<pre><code>public class ShoppingCardPersistence {\n    private final Connection connection;\n    private final ProductPersistence productPersistence;\n\n    public ShoppingCardPersistence(Connection connection) {\n        this.connection = connection;\n        this.productPersistence = new ProductPersistence(connection);\n    }\n\n    public void create(ShoppingCart cart) throws SQLException {\n        try (PreparedStatement stmt = connection.prepareStatement(\n                &quot;INSERT INTO SHOPPING_CART(ID, DATE) VALUES(?, ?)&quot;)) {\n            stmt.setLong(1, cart.getId());\n            stmt.setTimestamp(2, new Timestamp(cart.getDate().getTime()));\n            stmt.executeUpdate();\n        }\n        productPersistence.create(cart.getId(), cart.getProducts());\n    }\n\n    public ShoppingCart read(long id) throws SQLException {\n        ShoppingCart cart;\n        try (PreparedStatement stmt = connection.prepareStatement(\n                &quot;SELECT DATE FROM SHOPPING_CART WHERE ID=?&quot;)) {\n            stmt.setLong(1, id);\n            ResultSet rs = stmt.executeQuery();\n            if (!rs.next()) {\n                return null;\n            }\n            cart = new ShoppingCart();\n            cart.setId(id);\n            cart.setDate(new Date(rs.getTimestamp(1).getTime()));\n        }\n        cart.setProducts(productPersistence.read(cart.getId()));\n        return cart;\n    }\n\n    public void update(ShoppingCart cart) throws SQLException {\n        productPersistence.delete(cart.getId());\n        try (PreparedStatement stmt = connection.prepareStatement(\n                &quot;UPDATE SHOPPING_CART SET DATE=? WHERE ID=?&quot;)) {\n            stmt.setLong(2, cart.getId());\n            stmt.setTimestamp(1, new Timestamp(cart.getDate().getTime()));\n            stmt.executeUpdate();\n        }\n        productPersistence.create(cart.getId(), cart.getProducts());\n    }\n\n    public void delete(ShoppingCart cart) throws SQLException {\n        productPersistence.delete(cart.getId());\n        try (PreparedStatement stmt = connection.prepareStatement(\n                &quot;DELETE SHOPPING_CART WHERE ID=?&quot;)) {\n        stmt.setLong(1, cart.getId());\n        stmt.executeUpdate();\n    }\n}\n</code></pre>\n<p>}</p>\n<p>and <code>ProductPersistence</code>:</p>\n<pre><code>public class ProductPersistence {\n    private final Connection connection;\n\n    public ProductPersistence(Connection connection) {\n        this.connection = connection;\n    }\n\n    public void create(long id, List&lt;Product&gt; products) throws SQLException {\n        if (!products.isEmpty()) {\n            try (PreparedStatement stmt = connection.prepareStatement(\n                    &quot;INSERT INTO PRODUCT(SHOPPING_CART_ID, POS, NAME, QUANTITY)&quot;\n                    + &quot; VALUES(?,?,?,?)&quot;)) {\n                for (int i = 0; i &lt; products.size(); ++i) {\n                    Product prod = products.get(i);\n                    stmt.setLong(1, id);\n                    stmt.setInt(2, i);\n                    stmt.setString(3, prod.getName());\n                    stmt.setInt(4, prod.getQuantity());\n                    stmt.addBatch();\n                }\n                stmt.executeBatch();\n            }\n        }\n    }\n\n    public List&lt;Product&gt; read(long id) throws SQLException {\n        try (PreparedStatement stmt = connection.prepareStatement(\n                &quot;SELECT POS, NAME, QUANTITY FROM PRODUCT&quot;\n                + &quot; WHERE SHOPPING_CART_ID=?&quot;\n                + &quot; ORDER BY POS&quot;)) {\n            List&lt;Product&gt; result = new ArrayList&lt;&gt;();\n            stmt.setLong(1, id);\n            ResultSet rs = stmt.executeQuery();\n            while (rs.next()) {\n                Product prod = new Product();\n                prod.setQuantity(rs.getInt(2));\n                prod.setName(rs.getString(3));\n                result.add(prod);\n            }\n            return result;\n        }\n    }\n\n    public void delete(long id) throws SQLException {\n        try (PreparedStatement stmt = connection.prepareStatement(\n                &quot;DELETE PRODUCT WHERE SHOPPING_CART_ID=?&quot;)) {\n            stmt.setLong(1, id);\n            stmt.executeUpdate();\n        }\n    }\n}\n</code></pre>\n<p>You would typically use these classes with a piece of code like this:</p>\n<pre><code>    try (Connection connection = ConnectionFactory.getConnection()) {\n        ShoppingCartPersistence pm\n                = new ShoppingCartPersistence(connection);\n        \n        ShoppingCart cart = pm.read(shoppingCardId);\n        \n        // do a lot of useful thing with the cart\n        \n        pm.update(cart);\n        connection.commit();\n    } catch (SQLException ex) {\n        ex.printStackTrace();\n    }\n</code></pre>\n<p>Note that in your <code>ConnectionFactory</code> you should disable autocommit.</p>\n<p>The ID of a shopping card has to be assigned before a call to <code>ShoppingCardPersistence.create</code> but databases offer mechanisms to automatically generate them, either with an autoincremented column or with a sequence.</p>\n"}],"owner":{"account_id":1810821,"reputation":475,"user_id":1646928,"accept_rate":71,"display_name":"JamesB"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":225,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74218323,"answer_count":1,"score":1,"last_activity_date":1666873240,"creation_date":1666847845,"question_id":74217104,"body_markdown":"A minimum runnable example of my project is above:\r\n\r\n`Shopping Cart` and its `Products`;  I need to save this aggregation in pure JDBC, without ORM, in the Database. Is it the proper way to save the product list to DB, passing to the `shopping_cart_fk_id` to each product and its `DAOs`?\r\n\r\n**MainClass**\r\n\r\n    package ShoppingCartDAO;\r\n\r\n    import java.util.Scanner;\r\n\r\n    public class MainClass {\r\n\r\n\t\tpublic static void main(String[] args) \r\n\t\t{\r\n\t\t\tShoppingCart shoppingCart = new ShoppingCart();\r\n\t\t\tInteger choice = 0;\r\n\t\t\tScanner input = new Scanner(System.in);\r\n\t\t\t\r\n\t\t\tdo {\t\r\n\r\n\t\t\t\tchoice = 0;\r\n\t\t\t\tSystem.out.print(&quot;Choose one option: \\n&quot;);\r\n\t\t\t\tSystem.out.print(&quot;1 - Register New Product \\n&quot;);\r\n\t\t\t\tSystem.out.print(&quot;0 - Exit And Save&quot;);\r\n\t\t\t\t\r\n\t\t\t\tchoice = input.nextInt();\r\n\r\n\t\t\t\t\tswitch (choice)\r\n\t\t\t\t\t{\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\tnew ShoppingCart().InsertInto(new ProductRegister().RegisterNewProduct());\r\n\t\t\t\t\t\tbreak;\t\t\t\t\r\n\t\t\t\t\tdefault: \r\n\t\t\t\t\t\tSystem.out.print(&quot; Invalid Option \\n&quot;);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\t\r\n\t\t\t\t} while (choice != 0);\r\n\t\t\t\r\n\t\t\tnew ShoppingCartDao().add(shoppingCart);\r\n\t\t\t\r\n\t\t\tinput.close();\r\n\t\t\t}\r\n\t}\r\n\r\n\r\n\r\n**ConnectionFactory**\r\n\r\n\r\n    package ShoppingCartDAO;\r\n\r\n    import java.sql.PreparedStatement;\r\n    import java.sql.ResultSet;\r\n    import java.sql.SQLException;\r\n    import java.sql.Statement;\r\n\r\n    class ShoppingCartDao{\r\n\r\n\r\n\tpublic void add(ShoppingCart shoppingCart)\r\n\t{\r\n\t\ttry\r\n\t\t{\t\t\r\n\t\t\tPreparedStatement pstmt = ConnectionFactory.getConnection().prepareStatement(&quot;Insert into shoppingCart (date) values (?)&quot;);\r\n\t\t\tpstmt.setDate(1, new java.sql.Date(System.currentTimeMillis()));\r\n\t\t\tpstmt.execute();\r\n\t\t\tpstmt.close();\r\n\t\t} catch(SQLException e)\r\n\t\t{\r\n\t\t\tthrow new RuntimeException(e);\r\n\t\t}\r\n\r\n\t\tProductDao productDAO = new ProductDao();\r\n\t\tfor(Product product : shoppingCart.getProduct()){\r\n\t\t\tproductDAO.add(product);\r\n\t\t}\r\n\t }\r\n\r\n\tpublic Integer getCount()\r\n\t{\r\n\t\tInteger count;\r\n\t\ttry\r\n\t\t{\t\t\r\n\t\t\tStatement stmt = ConnectionFactory.getConnection().createStatement();\r\n\t\t\tResultSet rs = stmt.executeQuery(&quot;SELECT COUNT(*) AS recordCount FROM shoppingcart&quot;);\r\n\t\t\trs.next();\r\n\t\t\tcount = rs.getInt(1);\r\n\r\n\t\t\trs.close();\r\n\t\t\tstmt.close();\r\n\r\n\t\t} catch(SQLException e)\r\n\t\t{\r\n\t\t\tthrow new RuntimeException(e);\r\n\t\t}\r\n\t\treturn count;\r\n\t}\r\n    }\r\n\r\n**ShoppingCart Entity**\r\n\r\n\r\n    public class ShoppingCart\r\n    {\r\n\tLong id;\r\n\tDate date;\t\r\n\tArrayList&lt;Product&gt;products = new ArrayList&lt;Product&gt;();\r\n\r\n\tpublic ShoppingCart(){\r\n\t     this.date = new Date();\r\n\t}\r\n\tpublic void InsertInto(Product product){\r\n\t      products.add(product);\r\n\t}\r\n\tpublic Date getDate(){\r\n\t      return this.buyDate;\r\n\t}\r\n\tpublic ArrayList&lt;Product&gt;getProduct(){\r\n\t      return this.products;\r\n\t}\r\n\r\n    }\r\n\r\n**Product Entity**\r\n\r\n    public class Product\r\n    {\t\r\n\tString name = new String();\r\n\tInteger quantity = new Integer();\r\n\r\n\tpublic void setName(String name){\r\n\t\tthis.name = name;\r\n\t}\r\n\tpublic String getName(){\r\n\t\treturn this.name;\r\n\t}\r\n\tpublic void setQuantity(Integer quantity){\r\n\t\tthis.quantity = quantity;\r\n\t}\r\n\tpublic Integer getQuantity(){\r\n\t\treturn this.quantity;\r\n\t}\r\n    }\r\n\r\n**Shopping Cart DAO**\r\n\r\n    package ShoppingCartDAO;\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.Date;\r\n\r\n    public class ShoppingCart {\r\n\r\n\tLong id;\r\n\tDate date;\t\r\n\tArrayList&lt;Product&gt;products = new ArrayList&lt;Product&gt;();\r\n\r\n\tpublic ShoppingCart(){\r\n\t     this.date = new Date();\r\n\t}\r\n\tpublic void InsertInto(Product product){\r\n\t      products.add(product);\r\n\t}\r\n\tpublic Date getDate(){\r\n\t      return this.date;\r\n\t}\r\n\tpublic ArrayList&lt;Product&gt;getProduct(){\r\n\t      return this.products;\r\n\t}\r\n\tpublic void addProduct(Product product) {\r\n\t\tproducts.add(product);\r\n\t}\r\n    }\r\n\r\n**ProductDAO**\r\n    \r\n    package ShoppingCartDAO;\r\n\r\n    import java.sql.PreparedStatement;\r\n    import java.sql.SQLException;\r\n\r\n    public class ProductDao {\r\n\r\n\tpublic void add(Product product)\r\n\t{\r\n\ttry\r\n\t{\t\t\t\t\t\r\n\t\t\r\n\t\tString query = &quot;Insert into product (fkShoppingCartId, name, quantity) values (?, ?, ?)&quot;;\r\n\r\n\t\tPreparedStatement pstmt = ConnectionFactory.getConnection().prepareStatement(query);\r\n\t\t\t\r\n\t\t\r\n\t\tpstmt.setLong(1, new ShoppingCartDao().getCount() + 1);\r\n\t\tpstmt.setString(2, product.getName());\r\n\t\tpstmt.setInt(3, product.getQuantity());\r\n\t\tpstmt.execute();\r\n\t\tpstmt.close();\r\n\t}\r\n\tcatch(SQLException e)\r\n\t{\r\n\t\tthrow new RuntimeException(e);\r\n\t}\r\n\t}\r\n","title":"How to Composition/Association/List of Objects in DAO implementation","body":"<p>A minimum runnable example of my project is above:</p>\n<p><code>Shopping Cart</code> and its <code>Products</code>;  I need to save this aggregation in pure JDBC, without ORM, in the Database. Is it the proper way to save the product list to DB, passing to the <code>shopping_cart_fk_id</code> to each product and its <code>DAOs</code>?</p>\n<p><strong>MainClass</strong></p>\n<pre><code>package ShoppingCartDAO;\n\nimport java.util.Scanner;\n\npublic class MainClass {\n\n    public static void main(String[] args) \n    {\n        ShoppingCart shoppingCart = new ShoppingCart();\n        Integer choice = 0;\n        Scanner input = new Scanner(System.in);\n        \n        do {    \n\n            choice = 0;\n            System.out.print(&quot;Choose one option: \\n&quot;);\n            System.out.print(&quot;1 - Register New Product \\n&quot;);\n            System.out.print(&quot;0 - Exit And Save&quot;);\n            \n            choice = input.nextInt();\n\n                switch (choice)\n                {\n                case 1:\n                    new ShoppingCart().InsertInto(new ProductRegister().RegisterNewProduct());\n                    break;              \n                default: \n                    System.out.print(&quot; Invalid Option \\n&quot;);\n                    break;\n                }   \n            } while (choice != 0);\n        \n        new ShoppingCartDao().add(shoppingCart);\n        \n        input.close();\n        }\n}\n</code></pre>\n<p><strong>ConnectionFactory</strong></p>\n<pre><code>package ShoppingCartDAO;\n\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport java.sql.Statement;\n\nclass ShoppingCartDao{\n\n\npublic void add(ShoppingCart shoppingCart)\n{\n    try\n    {       \n        PreparedStatement pstmt = ConnectionFactory.getConnection().prepareStatement(&quot;Insert into shoppingCart (date) values (?)&quot;);\n        pstmt.setDate(1, new java.sql.Date(System.currentTimeMillis()));\n        pstmt.execute();\n        pstmt.close();\n    } catch(SQLException e)\n    {\n        throw new RuntimeException(e);\n    }\n\n    ProductDao productDAO = new ProductDao();\n    for(Product product : shoppingCart.getProduct()){\n        productDAO.add(product);\n    }\n }\n\npublic Integer getCount()\n{\n    Integer count;\n    try\n    {       \n        Statement stmt = ConnectionFactory.getConnection().createStatement();\n        ResultSet rs = stmt.executeQuery(&quot;SELECT COUNT(*) AS recordCount FROM shoppingcart&quot;);\n        rs.next();\n        count = rs.getInt(1);\n\n        rs.close();\n        stmt.close();\n\n    } catch(SQLException e)\n    {\n        throw new RuntimeException(e);\n    }\n    return count;\n}\n}\n</code></pre>\n<p><strong>ShoppingCart Entity</strong></p>\n<pre><code>public class ShoppingCart\n{\nLong id;\nDate date;  \nArrayList&lt;Product&gt;products = new ArrayList&lt;Product&gt;();\n\npublic ShoppingCart(){\n     this.date = new Date();\n}\npublic void InsertInto(Product product){\n      products.add(product);\n}\npublic Date getDate(){\n      return this.buyDate;\n}\npublic ArrayList&lt;Product&gt;getProduct(){\n      return this.products;\n}\n\n}\n</code></pre>\n<p><strong>Product Entity</strong></p>\n<pre><code>public class Product\n{   \nString name = new String();\nInteger quantity = new Integer();\n\npublic void setName(String name){\n    this.name = name;\n}\npublic String getName(){\n    return this.name;\n}\npublic void setQuantity(Integer quantity){\n    this.quantity = quantity;\n}\npublic Integer getQuantity(){\n    return this.quantity;\n}\n}\n</code></pre>\n<p><strong>Shopping Cart DAO</strong></p>\n<pre><code>package ShoppingCartDAO;\n\nimport java.util.ArrayList;\nimport java.util.Date;\n\npublic class ShoppingCart {\n\nLong id;\nDate date;  \nArrayList&lt;Product&gt;products = new ArrayList&lt;Product&gt;();\n\npublic ShoppingCart(){\n     this.date = new Date();\n}\npublic void InsertInto(Product product){\n      products.add(product);\n}\npublic Date getDate(){\n      return this.date;\n}\npublic ArrayList&lt;Product&gt;getProduct(){\n      return this.products;\n}\npublic void addProduct(Product product) {\n    products.add(product);\n}\n}\n</code></pre>\n<p><strong>ProductDAO</strong></p>\n<pre><code>package ShoppingCartDAO;\n\nimport java.sql.PreparedStatement;\nimport java.sql.SQLException;\n\npublic class ProductDao {\n\npublic void add(Product product)\n{\ntry\n{                   \n    \n    String query = &quot;Insert into product (fkShoppingCartId, name, quantity) values (?, ?, ?)&quot;;\n\n    PreparedStatement pstmt = ConnectionFactory.getConnection().prepareStatement(query);\n        \n    \n    pstmt.setLong(1, new ShoppingCartDao().getCount() + 1);\n    pstmt.setString(2, product.getName());\n    pstmt.setInt(3, product.getQuantity());\n    pstmt.execute();\n    pstmt.close();\n}\ncatch(SQLException e)\n{\n    throw new RuntimeException(e);\n}\n}\n</code></pre>\n"},{"tags":["java","android","alert"],"answers":[{"tags":[],"owner":{"account_id":14064733,"reputation":3952,"user_id":10159898,"display_name":"Bruno"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666873198,"creation_date":1666873198,"answer_id":74221932,"question_id":74221813,"body_markdown":"A best practice to do this is to disable the *Validate* button until your form is valid. It implies to indicates the user which fields are mandatory, with red asterisk for example. The consequence is to have a listener on all fields to launch the validation method or to use some &#39;form validation&#39; libraries\r\n\r\n","title":"Best practices to validate fields","body":"<p>A best practice to do this is to disable the <em>Validate</em> button until your form is valid. It implies to indicates the user which fields are mandatory, with red asterisk for example. The consequence is to have a listener on all fields to launch the validation method or to use some 'form validation' libraries</p>\n"}],"owner":{"account_id":17408002,"reputation":97,"user_id":12615735,"display_name":"C-Gian"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1666875694,"answer_count":1,"score":-1,"last_activity_date":1666873198,"creation_date":1666872627,"question_id":74221813,"body_markdown":"In my activity, I get user input with editText, checkbox, image and dropdown menu and save these informations inside Firebase.\r\n\r\nI need a way to validate the fields. For example, if editTexts are empty, I&#39;d like to show an alert to remember the user to insert that data. Same thing if no dropdown element is selected.\r\n\r\nI tried with alert dialog but as I can see they dont stop the app&#39;s execution, so when the user click save to send data, the alert shows but it disappers instantly and the app goes on...\r\n\r\nHow can I archieve the validation I need ? ","title":"Best practices to validate fields","body":"<p>In my activity, I get user input with editText, checkbox, image and dropdown menu and save these informations inside Firebase.</p>\n<p>I need a way to validate the fields. For example, if editTexts are empty, I'd like to show an alert to remember the user to insert that data. Same thing if no dropdown element is selected.</p>\n<p>I tried with alert dialog but as I can see they dont stop the app's execution, so when the user click save to send data, the alert shows but it disappers instantly and the app goes on...</p>\n<p>How can I archieve the validation I need ?</p>\n"},{"tags":["java","spring","saaj"],"answers":[{"comments":[{"owner":{"account_id":2084596,"reputation":1166,"user_id":1855840,"display_name":"ranma2913"},"score":0,"creation_date":1651777704,"post_id":66006502,"comment_id":127450386,"body_markdown":"adding\n\n```xml\n&lt;dependency&gt;\n      &lt;groupId&gt;com.sun.xml.messaging.saaj&lt;/groupId&gt;\n      &lt;artifactId&gt;saaj-impl&lt;/artifactId&gt;\n      &lt;version&gt;1.5.3&lt;/version&gt;\n    &lt;/dependency&gt;\n```\n\nsolved it for me. I didn&#39;t need the System.setProperty commands other&#39;s suggested.","body":"adding  <code>xml &lt;dependency&gt;       &lt;groupId&gt;com.sun.xml.messaging.saaj&lt;&#47;groupId&gt;       &lt;artifactId&gt;saaj-impl&lt;&#47;artifactId&gt;       &lt;version&gt;1.5.3&lt;&#47;version&gt;     &lt;&#47;dependency&gt; </code>  solved it for me. I didn&#39;t need the System.setProperty commands other&#39;s suggested."}],"tags":[],"owner":{"account_id":16269349,"reputation":13462,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"comment_count":1,"down_vote_count":0,"up_vote_count":16,"is_accepted":true,"score":16,"last_activity_date":1612256528,"creation_date":1612256528,"answer_id":66006502,"question_id":65791963,"body_markdown":"Probably you resolved the problem by now, but for future reference:\r\n - `com.sun.xml.internal.messaging.saaj.soap.SAAJMetaFactoryImpl` is the name of the `SAAJMetaFactory` distributed in JREs up to Java SE 8. It is the default factory used whenever no implementation of `javax.xml.soap.SAAJMetaFactory` is found on the classpath. In my opinion this is a bug: an external `jakarta.xml.soap-api` jar, shouldn&#39;t fall back to an internal JRE implementation of the API, but throw an exception stating that no implementation was found.\r\n - you added `saaj-impl-2.0.0` to the classpath. However this is part of the new Jakarta EE 9 standard and uses `jakarta` instead of `javax` as prefix (i.e. it contains an implementation of `jakarta.xml.soap.SAAJMetaFactory`). Switch to version 1.5.2 and everything should work.","title":"Unable to create SAAJ meta-factory: Provider com.sun.xml.internal.messaging.saaj.soap.SAAJMetaFactoryImpl not found","body":"<p>Probably you resolved the problem by now, but for future reference:</p>\n<ul>\n<li><code>com.sun.xml.internal.messaging.saaj.soap.SAAJMetaFactoryImpl</code> is the name of the <code>SAAJMetaFactory</code> distributed in JREs up to Java SE 8. It is the default factory used whenever no implementation of <code>javax.xml.soap.SAAJMetaFactory</code> is found on the classpath. In my opinion this is a bug: an external <code>jakarta.xml.soap-api</code> jar, shouldn't fall back to an internal JRE implementation of the API, but throw an exception stating that no implementation was found.</li>\n<li>you added <code>saaj-impl-2.0.0</code> to the classpath. However this is part of the new Jakarta EE 9 standard and uses <code>jakarta</code> instead of <code>javax</code> as prefix (i.e. it contains an implementation of <code>jakarta.xml.soap.SAAJMetaFactory</code>). Switch to version 1.5.2 and everything should work.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":22038482,"reputation":11,"user_id":16304602,"display_name":"skarppin"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1624519424,"creation_date":1624519424,"answer_id":68111254,"question_id":65791963,"body_markdown":"I spent some time struggling with this issue as well, and in my case I had to set the system property in my code:\r\n\r\n    System.setProperty(&quot;jakarta.xml.soap.SAAJMetaFactory&quot;, &quot;com.sun.xml.messaging.saaj.soap.SAAJMetaFactoryImpl&quot;);","title":"Unable to create SAAJ meta-factory: Provider com.sun.xml.internal.messaging.saaj.soap.SAAJMetaFactoryImpl not found","body":"<p>I spent some time struggling with this issue as well, and in my case I had to set the system property in my code:</p>\n<pre><code>System.setProperty(&quot;jakarta.xml.soap.SAAJMetaFactory&quot;, &quot;com.sun.xml.messaging.saaj.soap.SAAJMetaFactoryImpl&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23649273,"reputation":41,"user_id":17678414,"display_name":"Eric"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1643766959,"creation_date":1643761320,"answer_id":70949240,"question_id":65791963,"body_markdown":"In my case, I was not using the new Jakarta EE standard.  I set these two properties:\r\n\r\n    System.setProperty(&quot;javax.xml.soap.SAAJMetaFactory&quot;,&quot;com.sun.xml.messaging.saaj.soap.SAAJMetaFactoryImpl&quot;);\r\n    System.setProperty(&quot;javax.xml.soap.MetaFactory&quot;,&quot;com.sun.xml.messaging.saaj.soap.SAAJMetaFactoryImpl&quot;);\r\n\r\nReason for both is that my local maven build + tomcat warned on MetaFactory to use SAAJMetaFactory instead but the server I deployed to only seems to use MetaFactory so I set both.","title":"Unable to create SAAJ meta-factory: Provider com.sun.xml.internal.messaging.saaj.soap.SAAJMetaFactoryImpl not found","body":"<p>In my case, I was not using the new Jakarta EE standard.  I set these two properties:</p>\n<pre><code>System.setProperty(&quot;javax.xml.soap.SAAJMetaFactory&quot;,&quot;com.sun.xml.messaging.saaj.soap.SAAJMetaFactoryImpl&quot;);\nSystem.setProperty(&quot;javax.xml.soap.MetaFactory&quot;,&quot;com.sun.xml.messaging.saaj.soap.SAAJMetaFactoryImpl&quot;);\n</code></pre>\n<p>Reason for both is that my local maven build + tomcat warned on MetaFactory to use SAAJMetaFactory instead but the server I deployed to only seems to use MetaFactory so I set both.</p>\n"},{"tags":[],"owner":{"account_id":8341024,"reputation":1015,"user_id":6266336,"accept_rate":38,"display_name":"Diana"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1666872679,"creation_date":1666872679,"answer_id":74221828,"question_id":65791963,"body_markdown":"I used the version 3.0.0 of `com.sun.xml.messaging.saaj:saaj-impl` at first and faced the same problem.\r\n\r\nFor me the issue was fixed when I switched the version to 1.4.0 --&gt;\r\n\r\n`implementation(&quot;com.sun.xml.messaging.saaj:saaj-impl:1.4.0&quot;)`\r\n","title":"Unable to create SAAJ meta-factory: Provider com.sun.xml.internal.messaging.saaj.soap.SAAJMetaFactoryImpl not found","body":"<p>I used the version 3.0.0 of <code>com.sun.xml.messaging.saaj:saaj-impl</code> at first and faced the same problem.</p>\n<p>For me the issue was fixed when I switched the version to 1.4.0 --&gt;</p>\n<p><code>implementation(&quot;com.sun.xml.messaging.saaj:saaj-impl:1.4.0&quot;)</code></p>\n"}],"owner":{"account_id":15050300,"reputation":93,"user_id":10862203,"display_name":"hemantSingh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13846,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":66006502,"answer_count":4,"score":9,"last_activity_date":1666872679,"creation_date":1611060986,"question_id":65791963,"body_markdown":"I am trying to upgrade my project to java 15. While trying to launch the server I&#39;m getting error during bean creation.\r\n\r\nutil-context.xml:\r\n\r\n ```xml\r\n&lt;beans:bean id=&quot;dummyAdaptor&quot; class=&quot;org.dummy.adaptor.DummyAdaptor&quot;&gt;&lt;/beans:bean&gt;\r\n &lt;beans:bean id = &quot;soapRequestProcessorWithAction&quot; class=&quot;org.dummy.adaptor.request.processor.SOAPRequestProcessorWithAction&quot; /&gt;\r\n &lt;beans:bean id=&quot;soapWebServiceTemplate&quot; class=&quot;org.springframework.ws.client.core.WebServiceTemplate&quot;&gt;\r\n\t&lt;beans:property name=&quot;marshaller&quot; ref=&quot;marshaller&quot; /&gt;\r\n\t&lt;beans:property name=&quot;unmarshaller&quot; ref=&quot;unmarshaller&quot; /&gt;\r\n &lt;/beans:bean&gt;\r\n``` \r\n\r\nDummyAdaptor.java:\r\n\r\n```java@Qualifier(&quot;soapRequestProcessorWithAction&quot;)\r\nprivate SOAPRequestProcessorWithAction&lt;CTRMProcessRequest, CTRMProcessResponse&gt; soapRequestProcessorWithAction;\r\n```\r\n\r\nSOAPRequestProcessorWithAction.java:\r\n```java\r\n@Autowired\r\n@Qualifier(&quot;soapWebServiceTemplate&quot;)\r\nprivate WebServiceTemplate webServiceTemplate;\r\n```\r\n\r\nerrors:\r\n\r\n    org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;dummyAdaptor&#39;: Unsatisfied dependency expressed through field &#39;soapRequestProcessorWithAction&#39;; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;soapRequestProcessorWithAction&#39;: Unsatisfied dependency expressed through field &#39;webServiceTemplate&#39;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;soapWebServiceTemplate&#39; defined in class path resource [util-context.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.ws.client.core.WebServiceTemplate]: Constructor threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Invocation of init method failed; nested exception is org.springframework.ws.soap.SoapMessageCreationException: Could not create SAAJ MessageFactory: Unable to create SAAJ meta-factory: Provider com.sun.xml.internal.messaging.saaj.soap.SAAJMetaFactoryImpl not found; nested exception is javax.xml.soap.SOAPException: Unable to create SAAJ meta-factory: Provider com.sun.xml.internal.messaging.saaj.soap.SAAJMetaFactoryImpl not found\r\n            at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:643)\r\n            at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119)\r\n            at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399)\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1415)\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:608)\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:531)\r\n            at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\r\n            at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n            at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\r\n            at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\n            ...\r\n    Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;soapRequestProcessorWithAction&#39;: Unsatisfied dependency expressed through field &#39;webServiceTemplate&#39;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;soapWebServiceTemplate&#39; defined in class path resource [util-context.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.ws.client.core.WebServiceTemplate]: Constructor threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Invocation of init method failed; nested exception is org.springframework.ws.soap.SoapMessageCreationException: Could not create SAAJ MessageFactory: Unable to create SAAJ meta-factory: Provider com.sun.xml.internal.messaging.saaj.soap.SAAJMetaFactoryImpl not found; nested exception is javax.xml.soap.SOAPException: Unable to create SAAJ meta-factory: Provider com.sun.xml.internal.messaging.saaj.soap.SAAJMetaFactoryImpl not found\r\n            at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:643)\r\n            at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119)\r\n            at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399)\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1415)\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:608)\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:531)\r\n            at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\r\n            at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n            at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\r\n            at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\n            at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)\r\n            at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1367)\r\n            at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1287)\r\n            at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:640)\r\n            ... 60 more\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;soapWebServiceTemplate&#39; defined in class path resource [util-context.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.ws.client.core.WebServiceTemplate]: Constructor threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Invocation of init method failed; nested exception is org.springframework.ws.soap.SoapMessageCreationException: Could not create SAAJ MessageFactory: Unable to create SAAJ meta-factory: Provider com.sun.xml.internal.messaging.saaj.soap.SAAJMetaFactoryImpl not found; nested exception is javax.xml.soap.SOAPException: Unable to create SAAJ meta-factory: Provider com.sun.xml.internal.messaging.saaj.soap.SAAJMetaFactoryImpl not found\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1318)\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1216)\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:571)\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:531)\r\n            at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\r\n            at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n            at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\r\n            at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\n            at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)\r\n            at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1367)\r\n            at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1287)\r\n            at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:640)\r\n            ... 73 more\r\n    Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.ws.client.core.WebServiceTemplate]: Constructor threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Invocation of init method failed; nested exception is org.springframework.ws.soap.SoapMessageCreationException: Could not create SAAJ MessageFactory: Unable to create SAAJ meta-factory: Provider com.sun.xml.internal.messaging.saaj.soap.SAAJMetaFactoryImpl not found; nested exception is javax.xml.soap.SOAPException: Unable to create SAAJ meta-factory: Provider com.sun.xml.internal.messaging.saaj.soap.SAAJMetaFactoryImpl not found\r\n            at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:225)\r\n            at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:87)\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1310)\r\n            ... 84 more\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Invocation of init method failed; nested exception is org.springframework.ws.soap.SoapMessageCreationException: Could not create SAAJ MessageFactory: Unable to create SAAJ meta-factory: Provider com.sun.xml.internal.messaging.saaj.soap.SAAJMetaFactoryImpl not found; nested exception is javax.xml.soap.SOAPException: Unable to create SAAJ meta-factory: Provider com.sun.xml.internal.messaging.saaj.soap.SAAJMetaFactoryImpl not found\r\n            at org.springframework.ws.support.DefaultStrategiesHelper.instantiateBean(DefaultStrategiesHelper.java:188)\r\n            at org.springframework.ws.support.DefaultStrategiesHelper.getDefaultStrategies(DefaultStrategiesHelper.java:134)\r\n            at org.springframework.ws.support.DefaultStrategiesHelper.getDefaultStrategy(DefaultStrategiesHelper.java:219)\r\n            at org.springframework.ws.support.DefaultStrategiesHelper.getDefaultStrategy(DefaultStrategiesHelper.java:203)\r\n            at org.springframework.ws.client.core.WebServiceTemplate.initMessageFactory(WebServiceTemplate.java:353)\r\n            at org.springframework.ws.client.core.WebServiceTemplate.initDefaultStrategies(WebServiceTemplate.java:342)\r\n            at org.springframework.ws.client.core.WebServiceTemplate.&lt;init&gt;(WebServiceTemplate.java:130)\r\n            at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n            at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:64)\r\n            at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n            at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500)\r\n            at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:481)\r\n            at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:212)\r\n            ... 86 more\r\n    Caused by: org.springframework.ws.soap.SoapMessageCreationException: Could not create SAAJ MessageFactory: Unable to create SAAJ meta-factory: Provider com.sun.xml.internal.messaging.saaj.soap.SAAJMetaFactoryImpl not found; nested exception is javax.xml.soap.SOAPException: Unable to create SAAJ meta-factory: Provider com.sun.xml.internal.messaging.saaj.soap.SAAJMetaFactoryImpl not found\r\n            at org.springframework.ws.soap.saaj.SaajSoapMessageFactory.afterPropertiesSet(SaajSoapMessageFactory.java:165)\r\n            at org.springframework.ws.support.DefaultStrategiesHelper.instantiateBean(DefaultStrategiesHelper.java:185)\r\n            ... 98 more\r\n    **Caused by: javax.xml.soap.SOAPException: Unable to create SAAJ meta-factory: Provider com.sun.xml.internal.messaging.saaj.soap.SAAJMetaFactoryImpl not found**\r\n            at javax.xml.soap.SAAJMetaFactory.getInstance(SAAJMetaFactory.java:112)\r\n            at javax.xml.soap.MessageFactory.newInstance(MessageFactory.java:150)\r\n            at org.springframework.ws.soap.saaj.SaajSoapMessageFactory.afterPropertiesSet(SaajSoapMessageFactory.java:143)\r\n            ... 99 more\r\n\r\n\t\t\r\n\t\t\r\n\t\t\r\nAs per the solutions I found online i added below mentioned dependecy.\r\n\r\n`compile group: &#39;com.sun.xml.messaging.saaj&#39;, name: &#39;saaj-impl&#39;, version: &#39;2.0.0&#39;`\r\n\r\nHowever in the `saaj-impl.jar` the `SAAJMetaFactoryImpl.class` in present at location `com.sun.xml.messaging.saaj.soap.SAAJMetaFactoryImpl` instead of `com.sun.xml.internal.messaging.saaj.soap.SAAJMetaFactoryImpl`.\r\n\r\n","title":"Unable to create SAAJ meta-factory: Provider com.sun.xml.internal.messaging.saaj.soap.SAAJMetaFactoryImpl not found","body":"<p>I am trying to upgrade my project to java 15. While trying to launch the server I'm getting error during bean creation.</p>\n<p>util-context.xml:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;beans:bean id=&quot;dummyAdaptor&quot; class=&quot;org.dummy.adaptor.DummyAdaptor&quot;&gt;&lt;/beans:bean&gt;\n&lt;beans:bean id = &quot;soapRequestProcessorWithAction&quot; class=&quot;org.dummy.adaptor.request.processor.SOAPRequestProcessorWithAction&quot; /&gt;\n&lt;beans:bean id=&quot;soapWebServiceTemplate&quot; class=&quot;org.springframework.ws.client.core.WebServiceTemplate&quot;&gt;\n   &lt;beans:property name=&quot;marshaller&quot; ref=&quot;marshaller&quot; /&gt;\n   &lt;beans:property name=&quot;unmarshaller&quot; ref=&quot;unmarshaller&quot; /&gt;\n&lt;/beans:bean&gt;\n</code></pre>\n<p>DummyAdaptor.java:</p>\n<pre><code>private SOAPRequestProcessorWithAction&lt;CTRMProcessRequest, CTRMProcessResponse&gt; soapRequestProcessorWithAction;\n</code></pre>\n<p>SOAPRequestProcessorWithAction.java:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Autowired\n@Qualifier(&quot;soapWebServiceTemplate&quot;)\nprivate WebServiceTemplate webServiceTemplate;\n</code></pre>\n<p>errors:</p>\n<pre><code>org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'dummyAdaptor': Unsatisfied dependency expressed through field 'soapRequestProcessorWithAction'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'soapRequestProcessorWithAction': Unsatisfied dependency expressed through field 'webServiceTemplate'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'soapWebServiceTemplate' defined in class path resource [util-context.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.ws.client.core.WebServiceTemplate]: Constructor threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Invocation of init method failed; nested exception is org.springframework.ws.soap.SoapMessageCreationException: Could not create SAAJ MessageFactory: Unable to create SAAJ meta-factory: Provider com.sun.xml.internal.messaging.saaj.soap.SAAJMetaFactoryImpl not found; nested exception is javax.xml.soap.SOAPException: Unable to create SAAJ meta-factory: Provider com.sun.xml.internal.messaging.saaj.soap.SAAJMetaFactoryImpl not found\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:643)\n        at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119)\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1415)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:608)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:531)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n        ...\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'soapRequestProcessorWithAction': Unsatisfied dependency expressed through field 'webServiceTemplate'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'soapWebServiceTemplate' defined in class path resource [util-context.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.ws.client.core.WebServiceTemplate]: Constructor threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Invocation of init method failed; nested exception is org.springframework.ws.soap.SoapMessageCreationException: Could not create SAAJ MessageFactory: Unable to create SAAJ meta-factory: Provider com.sun.xml.internal.messaging.saaj.soap.SAAJMetaFactoryImpl not found; nested exception is javax.xml.soap.SOAPException: Unable to create SAAJ meta-factory: Provider com.sun.xml.internal.messaging.saaj.soap.SAAJMetaFactoryImpl not found\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:643)\n        at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119)\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1415)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:608)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:531)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n        at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1367)\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1287)\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:640)\n        ... 60 more\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'soapWebServiceTemplate' defined in class path resource [util-context.xml]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.ws.client.core.WebServiceTemplate]: Constructor threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Invocation of init method failed; nested exception is org.springframework.ws.soap.SoapMessageCreationException: Could not create SAAJ MessageFactory: Unable to create SAAJ meta-factory: Provider com.sun.xml.internal.messaging.saaj.soap.SAAJMetaFactoryImpl not found; nested exception is javax.xml.soap.SOAPException: Unable to create SAAJ meta-factory: Provider com.sun.xml.internal.messaging.saaj.soap.SAAJMetaFactoryImpl not found\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1318)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1216)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:571)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:531)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n        at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:276)\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1367)\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1287)\n        at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:640)\n        ... 73 more\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.ws.client.core.WebServiceTemplate]: Constructor threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Invocation of init method failed; nested exception is org.springframework.ws.soap.SoapMessageCreationException: Could not create SAAJ MessageFactory: Unable to create SAAJ meta-factory: Provider com.sun.xml.internal.messaging.saaj.soap.SAAJMetaFactoryImpl not found; nested exception is javax.xml.soap.SOAPException: Unable to create SAAJ meta-factory: Provider com.sun.xml.internal.messaging.saaj.soap.SAAJMetaFactoryImpl not found\n        at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:225)\n        at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:87)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1310)\n        ... 84 more\nCaused by: org.springframework.beans.factory.BeanCreationException: Invocation of init method failed; nested exception is org.springframework.ws.soap.SoapMessageCreationException: Could not create SAAJ MessageFactory: Unable to create SAAJ meta-factory: Provider com.sun.xml.internal.messaging.saaj.soap.SAAJMetaFactoryImpl not found; nested exception is javax.xml.soap.SOAPException: Unable to create SAAJ meta-factory: Provider com.sun.xml.internal.messaging.saaj.soap.SAAJMetaFactoryImpl not found\n        at org.springframework.ws.support.DefaultStrategiesHelper.instantiateBean(DefaultStrategiesHelper.java:188)\n        at org.springframework.ws.support.DefaultStrategiesHelper.getDefaultStrategies(DefaultStrategiesHelper.java:134)\n        at org.springframework.ws.support.DefaultStrategiesHelper.getDefaultStrategy(DefaultStrategiesHelper.java:219)\n        at org.springframework.ws.support.DefaultStrategiesHelper.getDefaultStrategy(DefaultStrategiesHelper.java:203)\n        at org.springframework.ws.client.core.WebServiceTemplate.initMessageFactory(WebServiceTemplate.java:353)\n        at org.springframework.ws.client.core.WebServiceTemplate.initDefaultStrategies(WebServiceTemplate.java:342)\n        at org.springframework.ws.client.core.WebServiceTemplate.&lt;init&gt;(WebServiceTemplate.java:130)\n        at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n        at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:64)\n        at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n        at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:500)\n        at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:481)\n        at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:212)\n        ... 86 more\nCaused by: org.springframework.ws.soap.SoapMessageCreationException: Could not create SAAJ MessageFactory: Unable to create SAAJ meta-factory: Provider com.sun.xml.internal.messaging.saaj.soap.SAAJMetaFactoryImpl not found; nested exception is javax.xml.soap.SOAPException: Unable to create SAAJ meta-factory: Provider com.sun.xml.internal.messaging.saaj.soap.SAAJMetaFactoryImpl not found\n        at org.springframework.ws.soap.saaj.SaajSoapMessageFactory.afterPropertiesSet(SaajSoapMessageFactory.java:165)\n        at org.springframework.ws.support.DefaultStrategiesHelper.instantiateBean(DefaultStrategiesHelper.java:185)\n        ... 98 more\n**Caused by: javax.xml.soap.SOAPException: Unable to create SAAJ meta-factory: Provider com.sun.xml.internal.messaging.saaj.soap.SAAJMetaFactoryImpl not found**\n        at javax.xml.soap.SAAJMetaFactory.getInstance(SAAJMetaFactory.java:112)\n        at javax.xml.soap.MessageFactory.newInstance(MessageFactory.java:150)\n        at org.springframework.ws.soap.saaj.SaajSoapMessageFactory.afterPropertiesSet(SaajSoapMessageFactory.java:143)\n        ... 99 more\n\n    \n    \n    \n</code></pre>\n<p>As per the solutions I found online i added below mentioned dependecy.</p>\n<p><code>compile group: 'com.sun.xml.messaging.saaj', name: 'saaj-impl', version: '2.0.0'</code></p>\n<p>However in the <code>saaj-impl.jar</code> the <code>SAAJMetaFactoryImpl.class</code> in present at location <code>com.sun.xml.messaging.saaj.soap.SAAJMetaFactoryImpl</code> instead of <code>com.sun.xml.internal.messaging.saaj.soap.SAAJMetaFactoryImpl</code>.</p>\n"},{"tags":["java","selenium","testing","selenoid"],"answers":[{"tags":[],"owner":{"account_id":3243767,"reputation":2973,"user_id":2736017,"accept_rate":71,"display_name":"vania-pooh"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1666872515,"creation_date":1666872515,"answer_id":74221782,"question_id":74218762,"body_markdown":"There is a dedicated API for that: https://aerokube.com/selenoid/latest/#_accessing_files_downloaded_with_browser","title":"How can I check downloaded files with Selenoid?","body":"<p>There is a dedicated API for that: <a href=\"https://aerokube.com/selenoid/latest/#_accessing_files_downloaded_with_browser\" rel=\"nofollow noreferrer\">https://aerokube.com/selenoid/latest/#_accessing_files_downloaded_with_browser</a></p>\n"}],"owner":{"account_id":15441638,"reputation":121,"user_id":11140018,"display_name":"Yashmerino"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":673,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74221782,"answer_count":1,"score":0,"last_activity_date":1666872515,"creation_date":1666858214,"question_id":74218762,"body_markdown":"I&#39;m running some java selenium tests on hosted Selenoid hub and I have to download some files during these tests.\r\n\r\nHow can I check these files during the tests?","title":"How can I check downloaded files with Selenoid?","body":"<p>I'm running some java selenium tests on hosted Selenoid hub and I have to download some files during these tests.</p>\n<p>How can I check these files during the tests?</p>\n"},{"tags":["java","google-maps","tls1.2"],"comments":[{"owner":{"account_id":77400,"reputation":4234,"user_id":220935,"accept_rate":95,"display_name":"alexyorke"},"score":0,"creation_date":1575827505,"post_id":59238188,"comment_id":104687800,"body_markdown":"What version of the api are you using?","body":"What version of the api are you using?"},{"owner":{"account_id":14619528,"reputation":79,"user_id":10558667,"display_name":"Brendan McCauley"},"score":0,"creation_date":1575828998,"post_id":59238188,"comment_id":104688265,"body_markdown":"Google Maps version 0.10.1","body":"Google Maps version 0.10.1"}],"answers":[{"tags":[],"owner":{"account_id":26320282,"reputation":11,"user_id":19982382,"display_name":"Pranali Kurumkar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666872505,"creation_date":1666872505,"answer_id":74221779,"question_id":59238188,"body_markdown":"its looks like some version issue you can try with different version of TLS and also Maps api","title":"How does the Google Maps Java API determine the supported TLS protocols?","body":"<p>its looks like some version issue you can try with different version of TLS and also Maps api</p>\n"}],"owner":{"account_id":14619528,"reputation":79,"user_id":10558667,"display_name":"Brendan McCauley"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":269,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1666872505,"creation_date":1575827371,"question_id":59238188,"body_markdown":"I can successfully run the example Google Maps code in a standalone Java 8 project:\r\n\r\n```\r\n\t    \tGeoApiContext context = new GeoApiContext.Builder()\r\n    \t\t    .apiKey(&quot;API_KEY_HERE&quot;)\r\n    \t\t    .build();\r\n    \t\tGeocodingResult[] results =  GeocodingApi.geocode(context,\r\n    \t\t    &quot;1600 Amphitheatre Parkway Mountain View, CA 94043&quot;).await();\r\n    \t\tGson gson = new GsonBuilder().setPrettyPrinting().create();\r\n    \t\tSystem.out.println(gson.toJson(results[0].addressComponents));\r\n```\r\n\r\nHowever, if I run it within my existing application, I see:\r\n\r\n```\r\njava.net.UnknownServiceException: Unable to find acceptable protocols. isFallback=false, modes=[ConnectionSpec(cipherSuites=[TLS_AES_128_GCM_SHA256, TLS_AES_256_GCM_SHA384, TLS_CHACHA20_POLY1305_SHA256, TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256, TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256, TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384, TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384, TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256, TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA, TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA, TLS_RSA_WITH_AES_128_GCM_SHA256, TLS_RSA_WITH_AES_256_GCM_SHA384, TLS_RSA_WITH_AES_128_CBC_SHA, TLS_RSA_WITH_AES_256_CBC_SHA, SSL_RSA_WITH_3DES_EDE_CBC_SHA], tlsVersions=[TLS_1_3, TLS_1_2], supportsTlsExtensions=true), ConnectionSpec()], supported protocols=[TLSv1]\r\n```\r\n\r\nindicating that it thinks that only TLSv1 is available. But if I create an SSLSocket in the same file:\r\n\r\n```\r\n\t\t\tSSLSocketFactory socketFactory = (SSLSocketFactory) SSLSocketFactory.getDefault();\r\n\t\t\tSSLSocket sslSocket = (SSLSocket) socketFactory.createSocket(&quot;www.verisign.com&quot;, 443);\r\n\t\t\tString[] protocols = sslSocket.getEnabledProtocols();\r\n```\r\n\r\nI see that TLSv1, TLSv1.1, and TLSv1.2 are all available. How does Google Maps source its TLS versions and how do I tell it to use TLS 1.2?","title":"How does the Google Maps Java API determine the supported TLS protocols?","body":"<p>I can successfully run the example Google Maps code in a standalone Java 8 project:</p>\n\n<pre><code>            GeoApiContext context = new GeoApiContext.Builder()\n                .apiKey(\"API_KEY_HERE\")\n                .build();\n            GeocodingResult[] results =  GeocodingApi.geocode(context,\n                \"1600 Amphitheatre Parkway Mountain View, CA 94043\").await();\n            Gson gson = new GsonBuilder().setPrettyPrinting().create();\n            System.out.println(gson.toJson(results[0].addressComponents));\n</code></pre>\n\n<p>However, if I run it within my existing application, I see:</p>\n\n<pre><code>java.net.UnknownServiceException: Unable to find acceptable protocols. isFallback=false, modes=[ConnectionSpec(cipherSuites=[TLS_AES_128_GCM_SHA256, TLS_AES_256_GCM_SHA384, TLS_CHACHA20_POLY1305_SHA256, TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256, TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256, TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384, TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384, TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256, TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA, TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA, TLS_RSA_WITH_AES_128_GCM_SHA256, TLS_RSA_WITH_AES_256_GCM_SHA384, TLS_RSA_WITH_AES_128_CBC_SHA, TLS_RSA_WITH_AES_256_CBC_SHA, SSL_RSA_WITH_3DES_EDE_CBC_SHA], tlsVersions=[TLS_1_3, TLS_1_2], supportsTlsExtensions=true), ConnectionSpec()], supported protocols=[TLSv1]\n</code></pre>\n\n<p>indicating that it thinks that only TLSv1 is available. But if I create an SSLSocket in the same file:</p>\n\n<pre><code>            SSLSocketFactory socketFactory = (SSLSocketFactory) SSLSocketFactory.getDefault();\n            SSLSocket sslSocket = (SSLSocket) socketFactory.createSocket(\"www.verisign.com\", 443);\n            String[] protocols = sslSocket.getEnabledProtocols();\n</code></pre>\n\n<p>I see that TLSv1, TLSv1.1, and TLSv1.2 are all available. How does Google Maps source its TLS versions and how do I tell it to use TLS 1.2?</p>\n"},{"tags":["java","servlet-3.0","refresh-token","google-people-api","revoke-token"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1666855227,"post_id":74218157,"comment_id":131035025,"body_markdown":"Token has been expired or revoked. -&gt; check whether or not your token is still valid. check how long your token remains valid. increase that time","body":"Token has been expired or revoked. -&gt; check whether or not your token is still valid. check how long your token remains valid. increase that time"},{"owner":{"account_id":26746182,"reputation":1,"user_id":20346211,"display_name":"Vishnu MCA"},"score":0,"creation_date":1666857478,"post_id":74218157,"comment_id":131035767,"body_markdown":"I tried creating a new project in Google console and changing the credentials. But its not working","body":"I tried creating a new project in Google console and changing the credentials. But its not working"},{"owner":{"account_id":26746182,"reputation":1,"user_id":20346211,"display_name":"Vishnu MCA"},"score":0,"creation_date":1666862960,"post_id":74218157,"comment_id":131037773,"body_markdown":"How can I check that? Beacause I am new @Stultuske","body":"How can I check that? Beacause I am new @Stultuske"},{"owner":{"account_id":26746182,"reputation":1,"user_id":20346211,"display_name":"Vishnu MCA"},"score":0,"creation_date":1666871631,"post_id":74218157,"comment_id":131040618,"body_markdown":"help me to solve this problem @Jon Skeet","body":"help me to solve this problem @Jon Skeet"},{"owner":{"account_id":26746182,"reputation":1,"user_id":20346211,"display_name":"Vishnu MCA"},"score":0,"creation_date":1666872166,"post_id":74218157,"comment_id":131040819,"body_markdown":"Even token folder is not created by the code  whats worng with my code","body":"Even token folder is not created by the code  whats worng with my code"}],"owner":{"account_id":26746182,"reputation":1,"user_id":20346211,"display_name":"Vishnu MCA"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":151,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1666872267,"creation_date":1666855076,"question_id":74218157,"body_markdown":"I am new to java. I have to fetch contacts from google contacts and store it in MySQL table. I got the code from google documentation. I am using **Java Servlet without gradle**. I got the **error while run the code on Servlet class** but its **work correctly in Main class**. I don&#39;t know how to solve please Help me !!.\r\n\r\nThis is my code for your reference:\r\n\r\n\r\n```\r\n   \r\nimport com.google.api.client.auth.oauth2.Credential;\r\nimport com.google.api.client.extensions.java6.auth.oauth2.AuthorizationCodeInstalledApp;\r\nimport com.google.api.client.extensions.jetty.auth.oauth2.LocalServerReceiver;\r\nimport com.google.api.client.googleapis.auth.oauth2.GoogleAuthorizationCodeFlow;\r\nimport com.google.api.client.googleapis.auth.oauth2.GoogleClientSecrets;\r\nimport com.google.api.client.googleapis.javanet.GoogleNetHttpTransport;\r\nimport com.google.api.client.http.javanet.NetHttpTransport;\r\nimport com.google.api.client.json.JsonFactory;\r\nimport com.google.api.client.json.gson.GsonFactory;\r\nimport com.google.api.client.util.store.FileDataStoreFactory;\r\nimport com.google.api.services.people.v1.PeopleService;\r\nimport com.google.api.services.people.v1.PeopleServiceScopes;\r\nimport com.google.api.services.people.v1.model.ListConnectionsResponse;\r\nimport com.google.api.services.people.v1.model.Name;\r\nimport com.google.api.services.people.v1.model.Person;\r\n\r\nimport java.io.FileNotFoundException;\r\nimport java.io.IOException;\r\nimport java.io.InputStream;\r\nimport java.io.InputStreamReader;\r\nimport java.security.GeneralSecurityException;\r\nimport java.util.Arrays;\r\nimport java.util.List;\r\n\r\nimport javax.servlet.ServletException;\r\nimport javax.servlet.http.HttpServlet;\r\nimport javax.servlet.http.HttpServletRequest;\r\nimport javax.servlet.http.HttpServletResponse;\r\nimport javax.servlet.http.HttpSession;\r\n\r\n\r\npublic class PeopleQuickstart extends HttpServlet{\r\n  private static final String APPLICATION_NAME = &quot;Google People API Java Quickstart&quot;;\r\n  private static final JsonFactory JSON_FACTORY = GsonFactory.getDefaultInstance();\r\n  private static final String TOKENS_DIRECTORY_PATH = &quot;tokens&quot;;\r\n\r\n  /**\r\n   * Global instance of the scopes required by this quickstart.\r\n   * If modifying these scopes, delete your previously saved tokens/ folder.\r\n   */\r\n  private static final List&lt;String&gt; SCOPES = Arrays.asList(PeopleServiceScopes.CONTACTS_READONLY);\r\n  private static final String CREDENTIALS_FILE_PATH = &quot;/client_secret.json&quot;;\r\n\r\n  /**\r\n   * Creates an authorized Credential object.\r\n   *\r\n   * @param HTTP_TRANSPORT The network HTTP Transport.\r\n   * @return An authorized Credential object.\r\n   * @throws IOException If the credentials.json file cannot be found.\r\n   */\r\n  private static Credential getCredentials(final NetHttpTransport HTTP_TRANSPORT)\r\n      throws IOException {\r\n    // Load client secrets.\r\n    InputStream in = PeopleQuickstart.class.getResourceAsStream(CREDENTIALS_FILE_PATH);\r\n    if (in == null) {\r\n      throw new FileNotFoundException(&quot;Resource not found: &quot; + CREDENTIALS_FILE_PATH);\r\n    }\r\n    GoogleClientSecrets clientSecrets =\r\n        GoogleClientSecrets.load(JSON_FACTORY, new InputStreamReader(in));\r\n\r\n    // Build flow and trigger user authorization request.\r\n    GoogleAuthorizationCodeFlow flow = new GoogleAuthorizationCodeFlow.Builder(\r\n        HTTP_TRANSPORT, JSON_FACTORY, clientSecrets, SCOPES)\r\n        .setDataStoreFactory(new FileDataStoreFactory(new java.io.File(TOKENS_DIRECTORY_PATH)))\r\n        .setAccessType(&quot;offline&quot;)\r\n        .build();\r\n    LocalServerReceiver receiver = new LocalServerReceiver.Builder().setPort(8888).build();\r\n    System.out.println(&quot;completed 1&quot;);\r\n    return new AuthorizationCodeInstalledApp(flow, receiver).authorize(&quot;user&quot;);\r\n  }\r\n\r\n  // ************************ Main Class ******************************\r\n  // public static void main(String... args) throws IOException, GeneralSecurityException {\r\n\r\n\r\n    public static void getContacts() throws IOException, GeneralSecurityException {\r\n    \r\n    // Build a new authorized API client service.\r\n    final NetHttpTransport HTTP_TRANSPORT = GoogleNetHttpTransport.newTrustedTransport();\r\n    PeopleService service =\r\n        new PeopleService.Builder(HTTP_TRANSPORT, JSON_FACTORY, getCredentials(HTTP_TRANSPORT))\r\n            .setApplicationName(APPLICATION_NAME)\r\n            .build();\r\n    System.out.println(&quot;Completed 2&quot;);\r\n    // Request 10 connections.\r\n    ListConnectionsResponse response = service.people().connections()\r\n        .list(&quot;people/me&quot;)\r\n        .setPageSize(10)\r\n        .setPersonFields(&quot;names,emailAddresses,phoneNumbers&quot;)\r\n        .execute();\r\n    System.out.println(&quot;Completed 3&quot;);\r\n    // Print display name of connections if available.\r\n    List&lt;Person&gt; connections = response.getConnections();\r\n    // return connections;\r\n    if (connections != null &amp;&amp; connections.size() &gt; 0) {\r\n      for (Person person : connections) {\r\n        List&lt;Name&gt; names = person.getNames();\r\n        if (names != null &amp;&amp; names.size() &gt; 0) {\r\n          String name = person.getNames().get(0).getDisplayName();\r\n          String email = person.getEmailAddresses().get(0).getValue();\r\n          String phone = person.getPhoneNumbers().get(0).getValue();\r\n          System.out.println(&quot;name: &quot; +name+ &quot; email: &quot;+email+ &quot; phone: &quot;+phone);\r\n        } else {\r\n          System.out.println(&quot;No names available for connection.&quot;);\r\n        }\r\n      }\r\n    } else {\r\n      System.out.println(&quot;No connections found.&quot;);\r\n    }\r\n  }\r\n\r\n  @Override\r\n  protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\r\n    try {\r\n      getContacts();\r\n    } catch (GeneralSecurityException e) {\r\n      e.printStackTrace();\r\n    }  \r\n  }\r\n}\r\n\r\n\r\n```\r\n\r\n\r\nI Got this error while runing on server Tomcat version 9\r\n\r\n```\r\nType Exception Report\r\n\r\nMessage 400 Bad Request\r\n\r\nDescription The server encountered an unexpected condition that prevented it from fulfilling the request.\r\n\r\nException\r\n\r\ncom.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request\r\nPOST https://oauth2.googleapis.com/token\r\n{\r\n  &quot;error&quot;: &quot;invalid_grant&quot;,\r\n  &quot;error_description&quot;: &quot;Token has been expired or revoked.&quot;\r\n}\r\n\tcom.google.api.client.auth.oauth2.TokenResponseException.from(TokenResponseException.java:103)\r\n\tcom.google.api.client.auth.oauth2.TokenRequest.executeUnparsed(TokenRequest.java:308)\r\n\tcom.google.api.client.auth.oauth2.TokenRequest.execute(TokenRequest.java:324)\r\n\tcom.google.api.client.auth.oauth2.Credential.executeRefreshToken(Credential.java:547)\r\n\tcom.google.api.client.auth.oauth2.Credential.refreshToken(Credential.java:470)\r\n\tcom.google.api.client.auth.oauth2.Credential.intercept(Credential.java:201)\r\n\tcom.google.api.client.http.HttpRequest.execute(HttpRequest.java:880)\r\n\tcom.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:419)\r\n\tcom.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:352)\r\n\tcom.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:469)\r\n\tPeopleQuickstart.getContacts(PeopleQuickstart.java:86)\r\n\tPeopleQuickstart.doPost(PeopleQuickstart.java:111)\r\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:696)\r\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:779)\r\n\torg.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\nNote The full stack trace of the root cause is available in the server logs.\r\n```\r\n\r\n\r\n\r\n\r\n\r\nI am execpting read contact from google people api and store it in DB using java Servlet.","title":"Token has been expired or revoked while using Java Servlet","body":"<p>I am new to java. I have to fetch contacts from google contacts and store it in MySQL table. I got the code from google documentation. I am using <strong>Java Servlet without gradle</strong>. I got the <strong>error while run the code on Servlet class</strong> but its <strong>work correctly in Main class</strong>. I don't know how to solve please Help me !!.</p>\n<p>This is my code for your reference:</p>\n<pre><code>   \nimport com.google.api.client.auth.oauth2.Credential;\nimport com.google.api.client.extensions.java6.auth.oauth2.AuthorizationCodeInstalledApp;\nimport com.google.api.client.extensions.jetty.auth.oauth2.LocalServerReceiver;\nimport com.google.api.client.googleapis.auth.oauth2.GoogleAuthorizationCodeFlow;\nimport com.google.api.client.googleapis.auth.oauth2.GoogleClientSecrets;\nimport com.google.api.client.googleapis.javanet.GoogleNetHttpTransport;\nimport com.google.api.client.http.javanet.NetHttpTransport;\nimport com.google.api.client.json.JsonFactory;\nimport com.google.api.client.json.gson.GsonFactory;\nimport com.google.api.client.util.store.FileDataStoreFactory;\nimport com.google.api.services.people.v1.PeopleService;\nimport com.google.api.services.people.v1.PeopleServiceScopes;\nimport com.google.api.services.people.v1.model.ListConnectionsResponse;\nimport com.google.api.services.people.v1.model.Name;\nimport com.google.api.services.people.v1.model.Person;\n\nimport java.io.FileNotFoundException;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.security.GeneralSecurityException;\nimport java.util.Arrays;\nimport java.util.List;\n\nimport javax.servlet.ServletException;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\nimport javax.servlet.http.HttpSession;\n\n\npublic class PeopleQuickstart extends HttpServlet{\n  private static final String APPLICATION_NAME = &quot;Google People API Java Quickstart&quot;;\n  private static final JsonFactory JSON_FACTORY = GsonFactory.getDefaultInstance();\n  private static final String TOKENS_DIRECTORY_PATH = &quot;tokens&quot;;\n\n  /**\n   * Global instance of the scopes required by this quickstart.\n   * If modifying these scopes, delete your previously saved tokens/ folder.\n   */\n  private static final List&lt;String&gt; SCOPES = Arrays.asList(PeopleServiceScopes.CONTACTS_READONLY);\n  private static final String CREDENTIALS_FILE_PATH = &quot;/client_secret.json&quot;;\n\n  /**\n   * Creates an authorized Credential object.\n   *\n   * @param HTTP_TRANSPORT The network HTTP Transport.\n   * @return An authorized Credential object.\n   * @throws IOException If the credentials.json file cannot be found.\n   */\n  private static Credential getCredentials(final NetHttpTransport HTTP_TRANSPORT)\n      throws IOException {\n    // Load client secrets.\n    InputStream in = PeopleQuickstart.class.getResourceAsStream(CREDENTIALS_FILE_PATH);\n    if (in == null) {\n      throw new FileNotFoundException(&quot;Resource not found: &quot; + CREDENTIALS_FILE_PATH);\n    }\n    GoogleClientSecrets clientSecrets =\n        GoogleClientSecrets.load(JSON_FACTORY, new InputStreamReader(in));\n\n    // Build flow and trigger user authorization request.\n    GoogleAuthorizationCodeFlow flow = new GoogleAuthorizationCodeFlow.Builder(\n        HTTP_TRANSPORT, JSON_FACTORY, clientSecrets, SCOPES)\n        .setDataStoreFactory(new FileDataStoreFactory(new java.io.File(TOKENS_DIRECTORY_PATH)))\n        .setAccessType(&quot;offline&quot;)\n        .build();\n    LocalServerReceiver receiver = new LocalServerReceiver.Builder().setPort(8888).build();\n    System.out.println(&quot;completed 1&quot;);\n    return new AuthorizationCodeInstalledApp(flow, receiver).authorize(&quot;user&quot;);\n  }\n\n  // ************************ Main Class ******************************\n  // public static void main(String... args) throws IOException, GeneralSecurityException {\n\n\n    public static void getContacts() throws IOException, GeneralSecurityException {\n    \n    // Build a new authorized API client service.\n    final NetHttpTransport HTTP_TRANSPORT = GoogleNetHttpTransport.newTrustedTransport();\n    PeopleService service =\n        new PeopleService.Builder(HTTP_TRANSPORT, JSON_FACTORY, getCredentials(HTTP_TRANSPORT))\n            .setApplicationName(APPLICATION_NAME)\n            .build();\n    System.out.println(&quot;Completed 2&quot;);\n    // Request 10 connections.\n    ListConnectionsResponse response = service.people().connections()\n        .list(&quot;people/me&quot;)\n        .setPageSize(10)\n        .setPersonFields(&quot;names,emailAddresses,phoneNumbers&quot;)\n        .execute();\n    System.out.println(&quot;Completed 3&quot;);\n    // Print display name of connections if available.\n    List&lt;Person&gt; connections = response.getConnections();\n    // return connections;\n    if (connections != null &amp;&amp; connections.size() &gt; 0) {\n      for (Person person : connections) {\n        List&lt;Name&gt; names = person.getNames();\n        if (names != null &amp;&amp; names.size() &gt; 0) {\n          String name = person.getNames().get(0).getDisplayName();\n          String email = person.getEmailAddresses().get(0).getValue();\n          String phone = person.getPhoneNumbers().get(0).getValue();\n          System.out.println(&quot;name: &quot; +name+ &quot; email: &quot;+email+ &quot; phone: &quot;+phone);\n        } else {\n          System.out.println(&quot;No names available for connection.&quot;);\n        }\n      }\n    } else {\n      System.out.println(&quot;No connections found.&quot;);\n    }\n  }\n\n  @Override\n  protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n    try {\n      getContacts();\n    } catch (GeneralSecurityException e) {\n      e.printStackTrace();\n    }  \n  }\n}\n\n\n</code></pre>\n<p>I Got this error while runing on server Tomcat version 9</p>\n<pre><code>Type Exception Report\n\nMessage 400 Bad Request\n\nDescription The server encountered an unexpected condition that prevented it from fulfilling the request.\n\nException\n\ncom.google.api.client.auth.oauth2.TokenResponseException: 400 Bad Request\nPOST https://oauth2.googleapis.com/token\n{\n  &quot;error&quot;: &quot;invalid_grant&quot;,\n  &quot;error_description&quot;: &quot;Token has been expired or revoked.&quot;\n}\n    com.google.api.client.auth.oauth2.TokenResponseException.from(TokenResponseException.java:103)\n    com.google.api.client.auth.oauth2.TokenRequest.executeUnparsed(TokenRequest.java:308)\n    com.google.api.client.auth.oauth2.TokenRequest.execute(TokenRequest.java:324)\n    com.google.api.client.auth.oauth2.Credential.executeRefreshToken(Credential.java:547)\n    com.google.api.client.auth.oauth2.Credential.refreshToken(Credential.java:470)\n    com.google.api.client.auth.oauth2.Credential.intercept(Credential.java:201)\n    com.google.api.client.http.HttpRequest.execute(HttpRequest.java:880)\n    com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:419)\n    com.google.api.client.googleapis.services.AbstractGoogleClientRequest.executeUnparsed(AbstractGoogleClientRequest.java:352)\n    com.google.api.client.googleapis.services.AbstractGoogleClientRequest.execute(AbstractGoogleClientRequest.java:469)\n    PeopleQuickstart.getContacts(PeopleQuickstart.java:86)\n    PeopleQuickstart.doPost(PeopleQuickstart.java:111)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:696)\n    javax.servlet.http.HttpServlet.service(HttpServlet.java:779)\n    org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\nNote The full stack trace of the root cause is available in the server logs.\n</code></pre>\n<p>I am execpting read contact from google people api and store it in DB using java Servlet.</p>\n"},{"tags":["java","liferay"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1666861357,"post_id":74219307,"comment_id":131037183,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."},{"owner":{"account_id":6173919,"reputation":11,"user_id":4811451,"display_name":"Kiran Kumar"},"score":0,"creation_date":1666861599,"post_id":74219307,"comment_id":131037268,"body_markdown":"Unable to receive message from Kafka after pushed from Kafka terminal","body":"Unable to receive message from Kafka after pushed from Kafka terminal"},{"owner":{"account_id":7701,"reputation":47163,"user_id":13447,"accept_rate":100,"display_name":"Olaf Kock"},"score":0,"creation_date":1666871977,"post_id":74219307,"comment_id":131040741,"body_markdown":"You&#39;re running in an OSGi container, not a spring runtime. The spring runtime does not necessarily know how to wire your listener in that environment. But other than this pointer, I can&#39;t provide more details. And as you tag liferay-6, liferay-6 and liferay-theme: you might want to specify what they have to do with your question. I&#39;m assuming that you&#39;re not running version 6.x, or that your Kafka listener is a visual component for the Look&amp;Feel. (Tags edited)","body":"You&#39;re running in an OSGi container, not a spring runtime. The spring runtime does not necessarily know how to wire your listener in that environment. But other than this pointer, I can&#39;t provide more details. And as you tag liferay-6, liferay-6 and liferay-theme: you might want to specify what they have to do with your question. I&#39;m assuming that you&#39;re not running version 6.x, or that your Kafka listener is a visual component for the Look&amp;Feel. (Tags edited)"}],"owner":{"account_id":6173919,"reputation":11,"user_id":4811451,"display_name":"Kiran Kumar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":166,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1666872082,"creation_date":1666861002,"question_id":74219307,"body_markdown":"Over internet I didn&#39;t got reference to implement Kafka in liferay.\r\n\r\nBelow are the requirements needs to be implemented\r\n- Push the message to Kafka topic\r\n- Poll and receive message from Kafka topic.\r\n\r\nTried below, but unable to receive message from kafka after pushed from kafka terminal\r\n\r\nDependencies :\r\n\r\ncompileInclude &quot;org.springframework.kafka:spring-kafka:2.9.2&quot;\r\n\r\ncompileInclude &quot;org.apache.kafka:kafka-streams:3.3.1&quot;\r\n\r\n\r\nCode: \r\n\r\n\r\n```\r\nimport org.apache.kafka.common.serialization.Serdes;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.kafka.annotation.EnableKafka;\r\nimport org.springframework.kafka.annotation.EnableKafkaStreams;\r\nimport org.springframework.kafka.annotation.KafkaStreamsDefaultConfiguration;\r\nimport org.springframework.kafka.config.KafkaStreamsConfiguration;\r\n\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\nimport static org.apache.kafka.streams.StreamsConfig.APPLICATION_ID_CONFIG;\r\nimport static org.apache.kafka.streams.StreamsConfig.BOOTSTRAP_SERVERS_CONFIG;\r\nimport static org.apache.kafka.streams.StreamsConfig.DEFAULT_KEY_SERDE_CLASS_CONFIG;\r\nimport static org.apache.kafka.streams.StreamsConfig.DEFAULT_VALUE_SERDE_CLASS_CONFIG;\r\n\r\n@Configuration\r\n@EnableKafka\r\n@EnableKafkaStreams\r\npublic class KafkaConfig {\r\n\r\n    @Bean(name = KafkaStreamsDefaultConfiguration.DEFAULT_STREAMS_CONFIG_BEAN_NAME)\r\n    KafkaStreamsConfiguration kStreamsConfig() {\r\n        Map&lt;String, Object&gt; props = new HashMap&lt;&gt;();\r\n        props.put(APPLICATION_ID_CONFIG, &quot;streams-app&quot;);\r\n        props.put(BOOTSTRAP_SERVERS_CONFIG, &quot;localhost:9092&quot;);\r\n        props.put(DEFAULT_KEY_SERDE_CLASS_CONFIG, Serdes.String().getClass().getName());\r\n        props.put(DEFAULT_VALUE_SERDE_CLASS_CONFIG, Serdes.String().getClass().getName());\r\n        return new KafkaStreamsConfiguration(props);\r\n    }\r\n}\r\n```\r\n\r\n\r\n```\r\nimport com.liferay.portal.kernel.log.Log;\r\nimport com.liferay.portal.kernel.log.LogFactoryUtil;\r\nimport org.osgi.service.component.annotations.Component;\r\nimport org.springframework.kafka.annotation.KafkaListener;\r\nimport org.springframework.scheduling.annotation.Async;\r\nimport org.springframework.transaction.annotation.Transactional;\r\n\r\n@Component(immediate = true)\r\npublic class KafkaMessageReceiver {\r\n\r\n    public static Log _log = LogFactoryUtil.getLog(KafkaMessageReceiver.class);\r\n\r\n    @Async\r\n    @KafkaListener(\r\n        topics = &quot;liferay-topic&quot;,\r\n        concurrency = &quot;2&quot;\r\n    )\r\n    @Transactional\r\n    public void handleMessage(String payload) {\r\n        _log.info(payload);\r\n    }\r\n}\r\n```","title":"Liferay Kafka integration","body":"<p>Over internet I didn't got reference to implement Kafka in liferay.</p>\n<p>Below are the requirements needs to be implemented</p>\n<ul>\n<li>Push the message to Kafka topic</li>\n<li>Poll and receive message from Kafka topic.</li>\n</ul>\n<p>Tried below, but unable to receive message from kafka after pushed from kafka terminal</p>\n<p>Dependencies :</p>\n<p>compileInclude &quot;org.springframework.kafka:spring-kafka:2.9.2&quot;</p>\n<p>compileInclude &quot;org.apache.kafka:kafka-streams:3.3.1&quot;</p>\n<p>Code:</p>\n<pre><code>import org.apache.kafka.common.serialization.Serdes;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.kafka.annotation.EnableKafka;\nimport org.springframework.kafka.annotation.EnableKafkaStreams;\nimport org.springframework.kafka.annotation.KafkaStreamsDefaultConfiguration;\nimport org.springframework.kafka.config.KafkaStreamsConfiguration;\n\nimport java.util.HashMap;\nimport java.util.Map;\n\nimport static org.apache.kafka.streams.StreamsConfig.APPLICATION_ID_CONFIG;\nimport static org.apache.kafka.streams.StreamsConfig.BOOTSTRAP_SERVERS_CONFIG;\nimport static org.apache.kafka.streams.StreamsConfig.DEFAULT_KEY_SERDE_CLASS_CONFIG;\nimport static org.apache.kafka.streams.StreamsConfig.DEFAULT_VALUE_SERDE_CLASS_CONFIG;\n\n@Configuration\n@EnableKafka\n@EnableKafkaStreams\npublic class KafkaConfig {\n\n    @Bean(name = KafkaStreamsDefaultConfiguration.DEFAULT_STREAMS_CONFIG_BEAN_NAME)\n    KafkaStreamsConfiguration kStreamsConfig() {\n        Map&lt;String, Object&gt; props = new HashMap&lt;&gt;();\n        props.put(APPLICATION_ID_CONFIG, &quot;streams-app&quot;);\n        props.put(BOOTSTRAP_SERVERS_CONFIG, &quot;localhost:9092&quot;);\n        props.put(DEFAULT_KEY_SERDE_CLASS_CONFIG, Serdes.String().getClass().getName());\n        props.put(DEFAULT_VALUE_SERDE_CLASS_CONFIG, Serdes.String().getClass().getName());\n        return new KafkaStreamsConfiguration(props);\n    }\n}\n</code></pre>\n<pre><code>import com.liferay.portal.kernel.log.Log;\nimport com.liferay.portal.kernel.log.LogFactoryUtil;\nimport org.osgi.service.component.annotations.Component;\nimport org.springframework.kafka.annotation.KafkaListener;\nimport org.springframework.scheduling.annotation.Async;\nimport org.springframework.transaction.annotation.Transactional;\n\n@Component(immediate = true)\npublic class KafkaMessageReceiver {\n\n    public static Log _log = LogFactoryUtil.getLog(KafkaMessageReceiver.class);\n\n    @Async\n    @KafkaListener(\n        topics = &quot;liferay-topic&quot;,\n        concurrency = &quot;2&quot;\n    )\n    @Transactional\n    public void handleMessage(String payload) {\n        _log.info(payload);\n    }\n}\n</code></pre>\n"},{"tags":["java","json","string","memory","jackson"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1666868712,"post_id":74220990,"comment_id":131039689,"body_markdown":"Your question may in fact be an [XY Problem](http://mywiki.wooledge.org/XyProblem) where you ask &quot;how do I fix this code problem&quot; when the best solution is to use a different approach entirely (such as perhaps *not* holding 50k JSON objects in memory, but instead using a database, and extracting smaller amounts of data on an as-needed basis). Consider telling us the overall problem that you&#39;re trying to solve rather than how you&#39;re currently trying to solve it.","body":"Your question may in fact be an <a href=\"http://mywiki.wooledge.org/XyProblem\" rel=\"nofollow noreferrer\">XY Problem</a> where you ask &quot;how do I fix this code problem&quot; when the best solution is to use a different approach entirely (such as perhaps <i>not</i> holding 50k JSON objects in memory, but instead using a database, and extracting smaller amounts of data on an as-needed basis). Consider telling us the overall problem that you&#39;re trying to solve rather than how you&#39;re currently trying to solve it."},{"owner":{"account_id":341492,"reputation":1861,"user_id":672135,"accept_rate":88,"display_name":"HectorLector"},"score":0,"creation_date":1666869790,"post_id":74220990,"comment_id":131039999,"body_markdown":"Added my use-case. There is no code problem, this is purely research about expected memory consumption for different scenarios.","body":"Added my use-case. There is no code problem, this is purely research about expected memory consumption for different scenarios."},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1666870753,"post_id":74220990,"comment_id":131040352,"body_markdown":"There&#39;s a little you can do with a plain `String`. Use-case incomplete. When you have two JSON-objects with no particular order of properties, in order to compare them efficiently, you would need to index these properties.","body":"There&#39;s a little you can do with a plain <code>String</code>. Use-case incomplete. When you have two JSON-objects with no particular order of properties, in order to compare them efficiently, you would need to index these properties."},{"owner":{"account_id":341492,"reputation":1861,"user_id":672135,"accept_rate":88,"display_name":"HectorLector"},"score":0,"creation_date":1666871785,"post_id":74220990,"comment_id":131040687,"body_markdown":"I only expect a very small subset of the json objects to actually change every minute (and I can check for a change very quickly by only comparing one version field, but then I need to get detailed change information).\nBut I still need to hold all objects in memory.\nSo I can still convert the string later to JsonNode for processing.","body":"I only expect a very small subset of the json objects to actually change every minute (and I can check for a change very quickly by only comparing one version field, but then I need to get detailed change information). But I still need to hold all objects in memory. So I can still convert the string later to JsonNode for processing."},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1666872541,"post_id":74220990,"comment_id":131040939,"body_markdown":"@HectorLector I have no idea which degree of Consistency and Availability you need, you might consider various non-SQL storage solutions like Redis, DinamoDB, etc. for caching and retrieving your data (I&#39;m pretty sure you can find something sufficiently fast). That&#39;s the only way to how you can reduce memory consumption of your application.","body":"@HectorLector I have no idea which degree of Consistency and Availability you need, you might consider various non-SQL storage solutions like Redis, DinamoDB, etc. for caching and retrieving your data (I&#39;m pretty sure you can find something sufficiently fast). That&#39;s the only way to how you can reduce memory consumption of your application."},{"owner":{"account_id":9850021,"reputation":411,"user_id":7296372,"display_name":"mrkachariker"},"score":0,"creation_date":1667906734,"post_id":74220990,"comment_id":131274509,"body_markdown":"Hey @HectorLector what is the status of your issue? Did you check out my answer? If my answer helped you solve your issue I would appreciate it if you marked it as correct!","body":"Hey @HectorLector what is the status of your issue? Did you check out my answer? If my answer helped you solve your issue I would appreciate it if you marked it as correct!"},{"owner":{"account_id":341492,"reputation":1861,"user_id":672135,"accept_rate":88,"display_name":"HectorLector"},"score":0,"creation_date":1667918142,"post_id":74220990,"comment_id":131279011,"body_markdown":"We are going to test it look at the memory consumption. I was hoping someone could (from Jackson library?) could give me an answer, based on some experience.","body":"We are going to test it look at the memory consumption. I was hoping someone could (from Jackson library?) could give me an answer, based on some experience."}],"answers":[{"tags":[],"owner":{"account_id":9850021,"reputation":411,"user_id":7296372,"display_name":"mrkachariker"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666871633,"creation_date":1666871633,"answer_id":74221626,"question_id":74220990,"body_markdown":"You can use the java.lang.instrument package&#39;s [getObjectSize](https://docs.oracle.com/javase/8/docs/api/java/lang/instrument/Instrumentation.html#getObjectSize-java.lang.Object-)() method, to get approximations on the sizes of the objects with the both ways.\r\n\r\n```java \r\nlong getObjectSize(Object objectToSize)\r\n```\r\n\r\nFrom the javadoc: \r\n&gt;Returns an implementation-specific approximation of the amount of storage consumed by the specified object. The result may include some or all of the object&#39;s overhead, and thus is useful for comparison within an implementation but not between implementations. The estimate may change during a single invocation of the JVM.","title":"Java json object size: JsonNode vs. String","body":"<p>You can use the java.lang.instrument package's <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/instrument/Instrumentation.html#getObjectSize-java.lang.Object-\" rel=\"nofollow noreferrer\">getObjectSize</a>() method, to get approximations on the sizes of the objects with the both ways.</p>\n<pre class=\"lang-java prettyprint-override\"><code>long getObjectSize(Object objectToSize)\n</code></pre>\n<p>From the javadoc:</p>\n<blockquote>\n<p>Returns an implementation-specific approximation of the amount of storage consumed by the specified object. The result may include some or all of the object's overhead, and thus is useful for comparison within an implementation but not between implementations. The estimate may change during a single invocation of the JVM.</p>\n</blockquote>\n"}],"owner":{"account_id":341492,"reputation":1861,"user_id":672135,"accept_rate":88,"display_name":"HectorLector"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":596,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1666871633,"creation_date":1666868228,"question_id":74220990,"body_markdown":"I work on a java application that needs to hold ~50k json objects in memory.\r\n\r\nEach json string is ~5000 characters long.\r\n\r\nExtra memory consumption is my concern.\r\nI want to compare the json objects later, but processing is not my concern, only extra memory consumption.\r\n\r\nWhat is more efficient:\r\n- Keep json as java String\r\n- Keep json as Jackson `JsonNode` object\r\n\r\nI tried serializing the JsonNode objects and the resulting files are smaller, than the string size - but I am not sure if the same is true in memory.\r\n\r\n\r\n**My use-case:**\r\n\r\nI need to detect changes to some objects, which are encoded as json. This change detection runs every minute and compares the current state with the last state (which we hold in memory).\r\n\r\nThere are no hooks or events or similar to get changes.\r\n\r\nWe already hold a list of these objects in memory - with only a limited subset of the json fields.\r\n\r\nI cannot change that architecture.\r\n\r\nNow instead of mapping json data to some Pojo and comparing each property manually, the idea is to hold the json string/objects and then calculate the diff/patch with some library.\r\nThis simplifies the logic a lot and is more generic - but we are worried about the extra memory consumption.","title":"Java json object size: JsonNode vs. String","body":"<p>I work on a java application that needs to hold ~50k json objects in memory.</p>\n<p>Each json string is ~5000 characters long.</p>\n<p>Extra memory consumption is my concern.\nI want to compare the json objects later, but processing is not my concern, only extra memory consumption.</p>\n<p>What is more efficient:</p>\n<ul>\n<li>Keep json as java String</li>\n<li>Keep json as Jackson <code>JsonNode</code> object</li>\n</ul>\n<p>I tried serializing the JsonNode objects and the resulting files are smaller, than the string size - but I am not sure if the same is true in memory.</p>\n<p><strong>My use-case:</strong></p>\n<p>I need to detect changes to some objects, which are encoded as json. This change detection runs every minute and compares the current state with the last state (which we hold in memory).</p>\n<p>There are no hooks or events or similar to get changes.</p>\n<p>We already hold a list of these objects in memory - with only a limited subset of the json fields.</p>\n<p>I cannot change that architecture.</p>\n<p>Now instead of mapping json data to some Pojo and comparing each property manually, the idea is to hold the json string/objects and then calculate the diff/patch with some library.\nThis simplifies the logic a lot and is more generic - but we are worried about the extra memory consumption.</p>\n"},{"tags":["java","locking"],"answers":[{"tags":[],"owner":{"account_id":2139538,"reputation":42521,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1666871064,"creation_date":1666871064,"answer_id":74221508,"question_id":74221265,"body_markdown":"&gt; If other threads are holding it, I guess I should not unlock?\r\n\r\nDefinitely not.\r\n\r\nYou&#39;re overcomplicating it. Don&#39;t unlock unless you know you&#39;ve acquired it. Move the try-finally block. You don&#39;t need 2 calls to unlock either. The finally block will do it for all cases; that&#39;s why it exists.\r\n\r\n    public String getToken(String userId, ReentrantLock lock) throws InterruptedException {\r\n        // lock is in a cache of ConcurrentHashMap with key of userId\r\n        if (!lock.tryLock(LOCK_TIMEOUT_SEC, TimeUnit.SECONDS)) {\r\n            throw new AppException(&quot;Could not get lock in &quot; + LOCK_TIMEOUT_SEC + &quot;s&quot;); // 10 sec\r\n        }\r\n        try {\r\n            return fetchNewToken(userId); // call external endpoint\r\n        } finally {\r\n            lock.unlock();\r\n        }","title":"ReentrantLock - should we check who holds the lock while unlocking in finally block?","body":"<blockquote>\n<p>If other threads are holding it, I guess I should not unlock?</p>\n</blockquote>\n<p>Definitely not.</p>\n<p>You're overcomplicating it. Don't unlock unless you know you've acquired it. Move the try-finally block. You don't need 2 calls to unlock either. The finally block will do it for all cases; that's why it exists.</p>\n<pre><code>public String getToken(String userId, ReentrantLock lock) throws InterruptedException {\n    // lock is in a cache of ConcurrentHashMap with key of userId\n    if (!lock.tryLock(LOCK_TIMEOUT_SEC, TimeUnit.SECONDS)) {\n        throw new AppException(&quot;Could not get lock in &quot; + LOCK_TIMEOUT_SEC + &quot;s&quot;); // 10 sec\n    }\n    try {\n        return fetchNewToken(userId); // call external endpoint\n    } finally {\n        lock.unlock();\n    }\n</code></pre>\n"}],"owner":{"account_id":5745825,"reputation":11553,"user_id":4537090,"accept_rate":79,"display_name":"WesternGun"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74221508,"answer_count":1,"score":0,"last_activity_date":1666871064,"creation_date":1666869657,"question_id":74221265,"body_markdown":"A simple snippet get stuck often when delay is slightly high:\r\n\r\n\r\n```java\r\npublic String getToken(String userId, ReentrantLock lock) throws InterruptedException {\r\n    try {\r\n        // lock is in a cache of ConcurrentHashMap with key of userId\r\n        if (!lock.tryLock(LOCK_TIMEOUT_SEC, TimeUnit.SECONDS)) {\r\n            throw new AppException(&quot;Could not get lock in &quot; + LOCK_TIMEOUT_SEC + &quot;s&quot;); // 10 sec\r\n        }\r\n        String token = fetchNewToken(userId); // call external endpoint\r\n        lock.unlock();\r\n        return token;\r\n    } finally {\r\n        while (lock.isHeldByCurrentThread()) {\r\n            lock.unlock();\r\n        }\r\n    }\r\n```\r\n\r\n\r\nNow the situation is it often locks 10 seconds when `fetchNewToken` has slightly higher delay(like 1 sec) and throws a lot of exceptions. Formerly it unlocks without checking, I changed the finally part but now I am not sure. \r\n\r\nShould I check the lock owner in the finally block? If other threads are holding it, I guess I should not unlock? \r\n\r\n\r\nExamples I found never checks the owner. So the doubt.\r\n\r\n","title":"ReentrantLock - should we check who holds the lock while unlocking in finally block?","body":"<p>A simple snippet get stuck often when delay is slightly high:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public String getToken(String userId, ReentrantLock lock) throws InterruptedException {\n    try {\n        // lock is in a cache of ConcurrentHashMap with key of userId\n        if (!lock.tryLock(LOCK_TIMEOUT_SEC, TimeUnit.SECONDS)) {\n            throw new AppException(&quot;Could not get lock in &quot; + LOCK_TIMEOUT_SEC + &quot;s&quot;); // 10 sec\n        }\n        String token = fetchNewToken(userId); // call external endpoint\n        lock.unlock();\n        return token;\n    } finally {\n        while (lock.isHeldByCurrentThread()) {\n            lock.unlock();\n        }\n    }\n</code></pre>\n<p>Now the situation is it often locks 10 seconds when <code>fetchNewToken</code> has slightly higher delay(like 1 sec) and throws a lot of exceptions. Formerly it unlocks without checking, I changed the finally part but now I am not sure.</p>\n<p>Should I check the lock owner in the finally block? If other threads are holding it, I guess I should not unlock?</p>\n<p>Examples I found never checks the owner. So the doubt.</p>\n"},{"tags":["java","spring-boot","intellij-idea","preview","mapstruct"],"comments":[{"owner":{"account_id":3052937,"reputation":17914,"user_id":2587166,"accept_rate":83,"display_name":"Luca Basso Ricci"},"score":0,"creation_date":1665490601,"post_id":74027591,"comment_id":130708266,"body_markdown":"https://github.com/mapstruct/mapstruct/issues/2294 can help?","body":"<a href=\"https://github.com/mapstruct/mapstruct/issues/2294\" rel=\"nofollow noreferrer\">github.com/mapstruct/mapstruct/issues/2294</a> can help?"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1665491107,"post_id":74027591,"comment_id":130708432,"body_markdown":"https://www.jetbrains.com/idea/guide/tips/turn-on-preview-features/ (if it&#39;s coming from IntelliJ)","body":"<a href=\"https://www.jetbrains.com/idea/guide/tips/turn-on-preview-features/\" rel=\"nofollow noreferrer\">jetbrains.com/idea/guide/tips/turn-on-preview-features</a> (if it&#39;s coming from IntelliJ)"},{"owner":{"account_id":4738200,"reputation":92,"user_id":3831918,"display_name":"Danny M"},"score":0,"creation_date":1665491779,"post_id":74027591,"comment_id":130708720,"body_markdown":"@LucaBassoRicci I tried with jdk 16 and still failing","body":"@LucaBassoRicci I tried with jdk 16 and still failing"},{"owner":{"account_id":4738200,"reputation":92,"user_id":3831918,"display_name":"Danny M"},"score":0,"creation_date":1665491802,"post_id":74027591,"comment_id":130708731,"body_markdown":"@xerx593 tried that option too but not working","body":"@xerx593 tried that option too but not working"}],"answers":[{"tags":[],"owner":{"account_id":4738200,"reputation":92,"user_id":3831918,"display_name":"Danny M"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1666870928,"creation_date":1666870928,"answer_id":74221487,"question_id":74027591,"body_markdown":"This issue is resolved by java in open JDK 17. Just tested the code with having a preview feature and with the latest IntelliJ 2022 and it&#39;s working as expected.","title":"Java preview feature in Mapstruct","body":"<p>This issue is resolved by java in open JDK 17. Just tested the code with having a preview feature and with the latest IntelliJ 2022 and it's working as expected.</p>\n"}],"owner":{"account_id":4738200,"reputation":92,"user_id":3831918,"display_name":"Danny M"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":183,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74221487,"answer_count":1,"score":0,"last_activity_date":1666870928,"creation_date":1665488799,"question_id":74027591,"body_markdown":"I am facing issues with mapstruct while running the code in Intellij \r\n\r\n```\r\njava: classfile for /C:/Users/workspace/ng-service/target/classes/org/converter/RepresentationConverterImpl.class \r\nuses preview features of Java SE 15. (use --enable-preview to allow loading of classfiles which contain preview features)\r\n\r\n```\r\n\r\nBecause of the error above I am not able to run the app on Intellij&#39;s latest version 2022. I tried adding --enable-preview in pom.xml as well as in Intellij compiler but still no luck. \r\n\r\nIt is working fine with Intellij-2021. The person who uses preview features of java 15 left the organization and now all are suffering to use old intellij version. \r\n\r\n\r\n```\r\n\r\n      &lt;java.version&gt;15&lt;/java.version&gt;\r\n      &lt;mapstruct.version&gt;1.5.2.Final&lt;/mapstruct.version&gt;\r\n    \r\n      &lt;configuration&gt;\r\n          &lt;includes&gt;\r\n              &lt;include&gt;Test.java&lt;/include&gt;\r\n          &lt;/includes&gt;\r\n          &lt;skipTests&gt;false&lt;/skipTests&gt;\r\n          &lt;argLine&gt;@{argLine} --enable-preview&lt;/argLine&gt;\r\n      &lt;/configuration&gt;\r\n    \r\n    \r\n             &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.8.0&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;source&gt;${java.version}&lt;/source&gt;\r\n                        &lt;target&gt;${java.version}&lt;/target&gt;\r\n                        &lt;release&gt;${java.version}&lt;/release&gt;\r\n                        &lt;compilerArgs&gt;--enable-preview&lt;/compilerArgs&gt;\r\n                        &lt;annotationProcessorPaths&gt;\r\n                            &lt;path&gt;\r\n                                &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                                &lt;artifactId&gt;lombok-mapstruct-binding&lt;/artifactId&gt;\r\n                                &lt;version&gt;0.2.0&lt;/version&gt;\r\n                            &lt;/path&gt;\r\n                            &lt;path&gt;\r\n                                &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\r\n                                &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\r\n                                &lt;version&gt;${mapstruct.version}&lt;/version&gt;\r\n                            &lt;/path&gt;\r\n                            &lt;path&gt;\r\n                                &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                                &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                                &lt;version&gt;${lombok.version}&lt;/version&gt;\r\n                            &lt;/path&gt;\r\n                        &lt;/annotationProcessorPaths&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n\r\n```\r\n\r\nI tried following most of resources on web to fix the issue but not finding any working solution. \r\n\r\nthank you","title":"Java preview feature in Mapstruct","body":"<p>I am facing issues with mapstruct while running the code in Intellij</p>\n<pre><code>java: classfile for /C:/Users/workspace/ng-service/target/classes/org/converter/RepresentationConverterImpl.class \nuses preview features of Java SE 15. (use --enable-preview to allow loading of classfiles which contain preview features)\n\n</code></pre>\n<p>Because of the error above I am not able to run the app on Intellij's latest version 2022. I tried adding --enable-preview in pom.xml as well as in Intellij compiler but still no luck.</p>\n<p>It is working fine with Intellij-2021. The person who uses preview features of java 15 left the organization and now all are suffering to use old intellij version.</p>\n<pre><code>\n      &lt;java.version&gt;15&lt;/java.version&gt;\n      &lt;mapstruct.version&gt;1.5.2.Final&lt;/mapstruct.version&gt;\n    \n      &lt;configuration&gt;\n          &lt;includes&gt;\n              &lt;include&gt;Test.java&lt;/include&gt;\n          &lt;/includes&gt;\n          &lt;skipTests&gt;false&lt;/skipTests&gt;\n          &lt;argLine&gt;@{argLine} --enable-preview&lt;/argLine&gt;\n      &lt;/configuration&gt;\n    \n    \n             &lt;plugin&gt;\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;3.8.0&lt;/version&gt;\n                    &lt;configuration&gt;\n                        &lt;source&gt;${java.version}&lt;/source&gt;\n                        &lt;target&gt;${java.version}&lt;/target&gt;\n                        &lt;release&gt;${java.version}&lt;/release&gt;\n                        &lt;compilerArgs&gt;--enable-preview&lt;/compilerArgs&gt;\n                        &lt;annotationProcessorPaths&gt;\n                            &lt;path&gt;\n                                &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                                &lt;artifactId&gt;lombok-mapstruct-binding&lt;/artifactId&gt;\n                                &lt;version&gt;0.2.0&lt;/version&gt;\n                            &lt;/path&gt;\n                            &lt;path&gt;\n                                &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n                                &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\n                                &lt;version&gt;${mapstruct.version}&lt;/version&gt;\n                            &lt;/path&gt;\n                            &lt;path&gt;\n                                &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                                &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                                &lt;version&gt;${lombok.version}&lt;/version&gt;\n                            &lt;/path&gt;\n                        &lt;/annotationProcessorPaths&gt;\n                    &lt;/configuration&gt;\n                &lt;/plugin&gt;\n\n</code></pre>\n<p>I tried following most of resources on web to fix the issue but not finding any working solution.</p>\n<p>thank you</p>\n"},{"tags":["java","android-studio"],"comments":[{"owner":{"account_id":1026069,"reputation":1183,"user_id":1035364,"display_name":"mjlowky"},"score":0,"creation_date":1505976661,"post_id":46337217,"comment_id":79634146,"body_markdown":"You have to see: https://stackoverflow.com/questions/9807306/android-certificate-can-not-install-app-by-using-apk-file","body":"You have to see: <a href=\"https://stackoverflow.com/questions/9807306/android-certificate-can-not-install-app-by-using-apk-file\" title=\"android certificate can not install app by using apk file\">stackoverflow.com/questions/9807306/&hellip;</a>"},{"owner":{"account_id":3030715,"reputation":11451,"user_id":2569793,"accept_rate":58,"display_name":"WISHY"},"score":0,"creation_date":1530461775,"post_id":46337217,"comment_id":89234869,"body_markdown":"did you found the solution @Prasad","body":"did you found the solution @Prasad"}],"answers":[{"tags":[],"owner":{"account_id":17022915,"reputation":1,"user_id":14183564,"display_name":"Sandaruwan Kumarasingha"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1611439256,"creation_date":1611425687,"answer_id":65862761,"question_id":46337217,"body_markdown":"Go to Files in OPPO A37 phone and select APK icon. Then you can see your downloaded apk file. Click install:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/9xLr9.jpg","title":"APK files not install on my oppo a37","body":"<p>Go to Files in OPPO A37 phone and select APK icon. Then you can see your downloaded apk file. Click install:</p>\n<p><a href=\"https://i.stack.imgur.com/9xLr9.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9xLr9.jpg\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":11816469,"reputation":11,"user_id":8646552,"display_name":"Prasad Madusanka"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":4675,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1666870368,"creation_date":1505976538,"question_id":46337217,"body_markdown":"I made a simple app by using android studio &amp; build both signed and unsigned apk files. Then put those files into my oppo a37 device and try to install those. But both files gave following error message.\r\n&quot;Unable to install because of an error in the app APK. We recommend installing only certified apps from the play store.&quot;\r\nI already checked these APKs by using android studio emulator and both works fine...\r\nPlease help me... Thank you...","title":"APK files not install on my oppo a37","body":"<p>I made a simple app by using android studio &amp; build both signed and unsigned apk files. Then put those files into my oppo a37 device and try to install those. But both files gave following error message.\n\"Unable to install because of an error in the app APK. We recommend installing only certified apps from the play store.\"\nI already checked these APKs by using android studio emulator and both works fine...\nPlease help me... Thank you...</p>\n"},{"tags":["java","swing"],"comments":[{"owner":{"account_id":114128,"reputation":50467,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":4,"creation_date":1666813097,"post_id":74213092,"comment_id":131027312,"body_markdown":"You don&#39;t call the `paintComponent` method at all.  You call `repaint`, which calls the `paintComponent` method.  Oracle has a helpful tutorial, [Creating a GUI With Swing](https://docs.oracle.com/javase/tutorial/uiswing/index.html).  Skip the Learning Swing with the NetBeans IDE section.  Pay particular attention to the [Performing Custom Painting](https://docs.oracle.com/javase/tutorial/uiswing/painting/index.html) section.","body":"You don&#39;t call the <code>paintComponent</code> method at all.  You call <code>repaint</code>, which calls the <code>paintComponent</code> method.  Oracle has a helpful tutorial, <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/index.html\" rel=\"nofollow noreferrer\">Creating a GUI With Swing</a>.  Skip the Learning Swing with the NetBeans IDE section.  Pay particular attention to the <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/painting/index.html\" rel=\"nofollow noreferrer\">Performing Custom Painting</a> section."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":3,"creation_date":1666815391,"post_id":74213092,"comment_id":131027949,"body_markdown":"Don&#39;t call repaint() from a loop. If you need animation, you should be using a Swing Timer. For example: https://stackoverflow.com/a/54028681/131872","body":"Don&#39;t call repaint() from a loop. If you need animation, you should be using a Swing Timer. For example: <a href=\"https://stackoverflow.com/a/54028681/131872\">stackoverflow.com/a/54028681/131872</a>"},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1666869998,"post_id":74213092,"comment_id":131040087,"body_markdown":"For checking the code, always add `@Override` before overriding _and implementing_ methods.","body":"For checking the code, always add <code>@Override</code> before overriding <i>and implementing</i> methods."}],"owner":{"account_id":26615499,"reputation":1,"user_id":20234986,"display_name":"Peterlem"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1666870274,"creation_date":1666811564,"question_id":74213092,"body_markdown":"I am trying to draw graphics by calling the class `Habitat` in the code below.\r\nI am calling it from a loop.\r\nI am guessing this isn&#39;t the best way to do it as is it making multiple instances of the same name?\r\nSorry, new to Java so hope this makes sense.\r\n\r\n```java\r\npublic Habitat (int c,int w,int h,int[][] s) {\r\n    habitatWidth = w;\r\n    habitatHeight = h;\r\n    plantSize = s;\r\n    counter = c;\r\n    p1 = new Plants(10,10,40,s);\r\n}\r\n\r\npublic void paintComponent (Graphics g) {\r\n    Graphics2D g2d = (Graphics2D) g;\r\n    RenderingHints rh = new RenderingHints(RenderingHints.KEY_ANTIALIASING,\r\n                                           RenderingHints.VALUE_ANTIALIAS_ON);\r\n    g2d.setRenderingHints(rh);\r\n\r\n    //sets background color\r\n    Rectangle2D.Double r = new Rectangle2D.Double(0, 0, habitatWidth, habitatHeight);\r\n    g2d.setColor(new Color(0, 0, 0));\r\n\r\n    // fill the shape\r\n    g2d.fill(r);\r\n\r\n    //draw the plant p1\r\n    p1.drawPlants(g2d);\r\n}\r\n```\r\n","title":"How to call the paintComponent method from a loop?","body":"<p>I am trying to draw graphics by calling the class <code>Habitat</code> in the code below.\nI am calling it from a loop.\nI am guessing this isn't the best way to do it as is it making multiple instances of the same name?\nSorry, new to Java so hope this makes sense.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public Habitat (int c,int w,int h,int[][] s) {\n    habitatWidth = w;\n    habitatHeight = h;\n    plantSize = s;\n    counter = c;\n    p1 = new Plants(10,10,40,s);\n}\n\npublic void paintComponent (Graphics g) {\n    Graphics2D g2d = (Graphics2D) g;\n    RenderingHints rh = new RenderingHints(RenderingHints.KEY_ANTIALIASING,\n                                           RenderingHints.VALUE_ANTIALIAS_ON);\n    g2d.setRenderingHints(rh);\n\n    //sets background color\n    Rectangle2D.Double r = new Rectangle2D.Double(0, 0, habitatWidth, habitatHeight);\n    g2d.setColor(new Color(0, 0, 0));\n\n    // fill the shape\n    g2d.fill(r);\n\n    //draw the plant p1\n    p1.drawPlants(g2d);\n}\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9294,"page":929,"page_size":100}
