{"items":[{"tags":["java","multidimensional-array"],"comments":[{"owner":{"account_id":9206791,"reputation":33,"user_id":6841721,"accept_rate":60,"display_name":"Max Orozco"},"score":0,"creation_date":1510340169,"post_id":47229359,"comment_id":81409326,"body_markdown":"That&#39;s what I&#39;m trying to do within the for loop but obviously that&#39;s totally wrong lolol @Caleb_McCreary","body":"That&#39;s what I&#39;m trying to do within the for loop but obviously that&#39;s totally wrong lolol @Caleb_McCreary"},{"owner":{"account_id":9206791,"reputation":33,"user_id":6841721,"accept_rate":60,"display_name":"Max Orozco"},"score":0,"creation_date":1510340246,"post_id":47229359,"comment_id":81409355,"body_markdown":"Actually I do have `Coordinates[][] coord = new Coordinates[20][20];` as well. Would that be causing the issue? @Caleb_McCreary","body":"Actually I do have <code>Coordinates[][] coord = new Coordinates[20][20];</code> as well. Would that be causing the issue? @Caleb_McCreary"}],"answers":[{"tags":[],"owner":{"account_id":424395,"reputation":971,"user_id":804376,"accept_rate":42,"display_name":"TuaimiAA"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1510340678,"creation_date":1510340678,"answer_id":47229559,"question_id":47229359,"body_markdown":"    public Coordinates setCoordinates (int row, int column){\r\n       Coordinates c = new Coordinates();\r\n       c.setRow(row);\r\n       c.setColumn(column);\r\n       return c;\r\n    }\r\n\r\nIn this case coord should be `Coordinates[][] coord = new Coordinates[x][y];`","title":"Creating a 2D array of coordinates in java","body":"<pre><code>public Coordinates setCoordinates (int row, int column){\n   Coordinates c = new Coordinates();\n   c.setRow(row);\n   c.setColumn(column);\n   return c;\n}\n</code></pre>\n\n<p>In this case coord should be <code>Coordinates[][] coord = new Coordinates[x][y];</code></p>\n"},{"tags":[],"owner":{"account_id":7816581,"reputation":3357,"user_id":5911096,"display_name":"oetoni"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1510344773,"creation_date":1510344142,"answer_id":47230285,"question_id":47229359,"body_markdown":"I am not able to get much from your explanation but I am showing you two full examples with Coordinates class and without:\r\n\r\nexample 1, with you setCoordinate function that returns the Coordinates object:\r\n\r\n    package com.company;\r\n    \r\n    import java.io.Console;\r\n    import java.util.concurrent.ThreadLocalRandom;\r\n    \r\n    public class Main {\r\n    \r\n        public static void main(String[] args) {\r\n    \t// write your code here\r\n    \r\n            Coordinates[] coord = new Coordinates[20];\r\n    \r\n            createMap();\r\n        }\r\n    \r\n        public static void createMap(){\r\n            Coordinates[] coord = new Coordinates[20];\r\n    \r\n            for(int i = 0; i &lt; 20; i ++){\r\n                coord[i] = setCoordinates(ThreadLocalRandom.current().nextInt(0, 99) + 1, ThreadLocalRandom.current().nextInt(0, 99) + 1);\r\n            }\r\n    \r\n            for(int i = 0; i &lt; 20; i ++){\r\n                coord[i].getCoord();\r\n            }\r\n        }\r\n    \r\n        public static Coordinates setCoordinates (int row, int column){\r\n            Coordinates c = new Coordinates();\r\n            c.setRow(row);\r\n            c.setColumn(column);\r\n            return c;\r\n        }\r\n    \r\n        public static class Coordinates {\r\n            int row;\r\n            int column;\r\n    \r\n            public Coordinates(){\r\n                //constructor\r\n            }\r\n    \r\n            public void setColumn(int column){\r\n                this.column = column;\r\n            }\r\n    \r\n            public void setRow(int row){\r\n                this.row = row;\r\n            }\r\n    \r\n            public int getRow(){\r\n                return row;\r\n            }\r\n    \r\n            public int getColumn(){\r\n                return column;\r\n            }\r\n    \r\n            public void getCoord(){\r\n                //just return and print the coordinates\r\n                System.out.println(&quot;ROW: &quot; + this.getRow() + &quot;      COL: &quot; + this.getColumn());\r\n                //change void to return and return value if you like :)\r\n            }\r\n    \r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\nif you want you can play around with the getCoord() and return array of coordinates by knowing that [0] is row and [1] is column like this:\r\n\r\n    public int[] getCoord()\r\n            {\r\n                int coords[] = new int[2];\r\n    \r\n                coords[0] = this.getRow();\r\n                coords[1] = this.getColumn();\r\n    \r\n                return coords;\r\n            }\r\n\r\nand then you can print this like this\r\n\r\n    for(int i = 0; i &lt; 20; i ++){\r\n                int coords[] = coord[i].getCoord();\r\n                System.out.println(coords[0] + &quot; - &quot; + coords[1]);\r\n            }\r\n\r\n\r\nand example 2, without returning Coordinates\r\n\r\n    package com.company;\r\n    \r\n    import java.io.Console;\r\n    import java.util.concurrent.ThreadLocalRandom;\r\n    \r\n    public class Main {\r\n    \r\n        public static void main(String[] args) {\r\n    \t// write your code here\r\n    \r\n            Coordinates[] coord = new Coordinates[20];\r\n    \r\n            createMap();\r\n        }\r\n    \r\n        public static void createMap(){\r\n            Coordinates[] coord = new Coordinates[20];\r\n    \r\n            for(int i = 0; i &lt; 20; i ++){\r\n                coord[i].setCoordinates(ThreadLocalRandom.current().nextInt(0, 99) + 1, ThreadLocalRandom.current().nextInt(0, 99) + 1);\r\n            }\r\n    \r\n            for(int i = 0; i &lt; 20; i ++){\r\n                coord[i].getCoord();\r\n            }\r\n        }\r\n    \r\n        public static class Coordinates {\r\n            int row;\r\n            int column;\r\n    \r\n            public Coordinates(){\r\n                //constructor\r\n            }\r\n    \r\n            public void setColumn(int column){\r\n                this.column = column;\r\n            }\r\n    \r\n            public void setRow(int row){\r\n                this.row = row;\r\n            }\r\n    \r\n            public int getRow(){\r\n                return row;\r\n            }\r\n    \r\n            public int getColumn(){\r\n                return column;\r\n            }\r\n    \r\n            public void setCoordinates (int row, int column){\r\n                this.setRow(row);\r\n                this.setColumn(column);\r\n            }\r\n    \r\n            public void getCoord(){\r\n                //just return and print the coordinates\r\n                System.out.println(&quot;ROW: &quot; + this.getRow() + &quot;      COL: &quot; + this.getColumn());\r\n                //change void to return and return value if you like :)\r\n            }\r\n    \r\n        }\r\n    }\r\n      \r\n\r\n","title":"Creating a 2D array of coordinates in java","body":"<p>I am not able to get much from your explanation but I am showing you two full examples with Coordinates class and without:</p>\n\n<p>example 1, with you setCoordinate function that returns the Coordinates object:</p>\n\n<pre><code>package com.company;\n\nimport java.io.Console;\nimport java.util.concurrent.ThreadLocalRandom;\n\npublic class Main {\n\n    public static void main(String[] args) {\n    // write your code here\n\n        Coordinates[] coord = new Coordinates[20];\n\n        createMap();\n    }\n\n    public static void createMap(){\n        Coordinates[] coord = new Coordinates[20];\n\n        for(int i = 0; i &lt; 20; i ++){\n            coord[i] = setCoordinates(ThreadLocalRandom.current().nextInt(0, 99) + 1, ThreadLocalRandom.current().nextInt(0, 99) + 1);\n        }\n\n        for(int i = 0; i &lt; 20; i ++){\n            coord[i].getCoord();\n        }\n    }\n\n    public static Coordinates setCoordinates (int row, int column){\n        Coordinates c = new Coordinates();\n        c.setRow(row);\n        c.setColumn(column);\n        return c;\n    }\n\n    public static class Coordinates {\n        int row;\n        int column;\n\n        public Coordinates(){\n            //constructor\n        }\n\n        public void setColumn(int column){\n            this.column = column;\n        }\n\n        public void setRow(int row){\n            this.row = row;\n        }\n\n        public int getRow(){\n            return row;\n        }\n\n        public int getColumn(){\n            return column;\n        }\n\n        public void getCoord(){\n            //just return and print the coordinates\n            System.out.println(\"ROW: \" + this.getRow() + \"      COL: \" + this.getColumn());\n            //change void to return and return value if you like :)\n        }\n\n    }\n}\n</code></pre>\n\n<p>if you want you can play around with the getCoord() and return array of coordinates by knowing that [0] is row and [1] is column like this:</p>\n\n<pre><code>public int[] getCoord()\n        {\n            int coords[] = new int[2];\n\n            coords[0] = this.getRow();\n            coords[1] = this.getColumn();\n\n            return coords;\n        }\n</code></pre>\n\n<p>and then you can print this like this</p>\n\n<pre><code>for(int i = 0; i &lt; 20; i ++){\n            int coords[] = coord[i].getCoord();\n            System.out.println(coords[0] + \" - \" + coords[1]);\n        }\n</code></pre>\n\n<p>and example 2, without returning Coordinates</p>\n\n<pre><code>package com.company;\n\nimport java.io.Console;\nimport java.util.concurrent.ThreadLocalRandom;\n\npublic class Main {\n\n    public static void main(String[] args) {\n    // write your code here\n\n        Coordinates[] coord = new Coordinates[20];\n\n        createMap();\n    }\n\n    public static void createMap(){\n        Coordinates[] coord = new Coordinates[20];\n\n        for(int i = 0; i &lt; 20; i ++){\n            coord[i].setCoordinates(ThreadLocalRandom.current().nextInt(0, 99) + 1, ThreadLocalRandom.current().nextInt(0, 99) + 1);\n        }\n\n        for(int i = 0; i &lt; 20; i ++){\n            coord[i].getCoord();\n        }\n    }\n\n    public static class Coordinates {\n        int row;\n        int column;\n\n        public Coordinates(){\n            //constructor\n        }\n\n        public void setColumn(int column){\n            this.column = column;\n        }\n\n        public void setRow(int row){\n            this.row = row;\n        }\n\n        public int getRow(){\n            return row;\n        }\n\n        public int getColumn(){\n            return column;\n        }\n\n        public void setCoordinates (int row, int column){\n            this.setRow(row);\n            this.setColumn(column);\n        }\n\n        public void getCoord(){\n            //just return and print the coordinates\n            System.out.println(\"ROW: \" + this.getRow() + \"      COL: \" + this.getColumn());\n            //change void to return and return value if you like :)\n        }\n\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":9206791,"reputation":33,"user_id":6841721,"accept_rate":60,"display_name":"Max Orozco"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8089,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1698062770,"creation_date":1510339897,"question_id":47229359,"body_markdown":"I am trying to create a 2-Dimensional array of coordinates with random values between 1 and 4 at each position. I am currently having trouble initialization the values. Here is my current code for the method: \r\n\r\n    public void createMap(){\r\n        for (int i = 1; i &lt; 20; i ++){\r\n            for (int j = 1 ; j &lt; 20; j ++) {\r\n\r\n              coord[i][j] = setCoordinates(random.nextInt(4) + 1, random.nextInt(4) + 1);\r\n            }\r\n        }\r\n\r\n        System.out.println(getCoord());\r\n    }\r\n\r\nand this method:\r\n\r\n    public Coordinates setCoordinates (int row, int column){\r\n        this.row = row;\r\n        this.column = column;\r\n        return coord[row][column];\r\n    }\r\n\r\nand the coordinate class: \r\n\r\n    public class Coordinates {\r\n    int row;\r\n    int column;\r\n  \r\n\r\n    public void setColumn(int column){\r\n        this.column = column;\r\n    }\r\n\r\n    public void setRow(int row){\r\n        this.row = row;\r\n    }\r\n\r\n    public int getRow(){\r\n        return row;\r\n    }\r\n\r\n    public int getColumn(){\r\n        return column;\r\n    }\r\n\r\n    }\r\n\r\nThe result is always `null` in the console.\r\nHow can I change my code to actually initialize the values in the array? \r\nThe end goal is to create a coordinate grid for a 2D game. Is there anything specific I should keep in mind if I&#39;m trying to use this on a GUI GridPane such as return type? Please let me know if more information is needed. Thanks in advance for your help.","title":"Creating a 2D array of coordinates in java","body":"<p>I am trying to create a 2-Dimensional array of coordinates with random values between 1 and 4 at each position. I am currently having trouble initialization the values. Here is my current code for the method: </p>\n\n<pre><code>public void createMap(){\n    for (int i = 1; i &lt; 20; i ++){\n        for (int j = 1 ; j &lt; 20; j ++) {\n\n          coord[i][j] = setCoordinates(random.nextInt(4) + 1, random.nextInt(4) + 1);\n        }\n    }\n\n    System.out.println(getCoord());\n}\n</code></pre>\n\n<p>and this method:</p>\n\n<pre><code>public Coordinates setCoordinates (int row, int column){\n    this.row = row;\n    this.column = column;\n    return coord[row][column];\n}\n</code></pre>\n\n<p>and the coordinate class: </p>\n\n<pre><code>public class Coordinates {\nint row;\nint column;\n\n\npublic void setColumn(int column){\n    this.column = column;\n}\n\npublic void setRow(int row){\n    this.row = row;\n}\n\npublic int getRow(){\n    return row;\n}\n\npublic int getColumn(){\n    return column;\n}\n\n}\n</code></pre>\n\n<p>The result is always <code>null</code> in the console.\nHow can I change my code to actually initialize the values in the array? \nThe end goal is to create a coordinate grid for a 2D game. Is there anything specific I should keep in mind if I'm trying to use this on a GUI GridPane such as return type? Please let me know if more information is needed. Thanks in advance for your help.</p>\n"},{"tags":["java","selenium-webdriver","xpath","dopostback","javascriptexecutor"],"comments":[{"owner":{"account_id":12027303,"reputation":1,"user_id":8798735,"display_name":"StrugglingDev"},"score":0,"creation_date":1694815998,"post_id":77115582,"comment_id":135945893,"body_markdown":"Additional information provided in prior post of this question by me 77109360","body":"Additional information provided in prior post of this question by me 77109360"},{"owner":{"account_id":6077817,"reputation":1213,"user_id":4744568,"display_name":"pcalkins"},"score":0,"creation_date":1695066241,"post_id":77115582,"comment_id":135971862,"body_markdown":"try with WE = wait.until(ExpectedConditions.elementToBeClickable(WD.findElement(By.xpath(&quot;//a[@id=&#39;ctl00_Content1_button_accept&#39;]&quot;)));  WE.click();  If that don&#39;t do it, include the full markup of the page at the time this code is run.  (The wait will return the webelement if it is found... otherwise the timeout exception is thrown... it may also help to post the full exception you catch there...)","body":"try with WE = wait.until(ExpectedConditions.elementToBeClickable(WD.findEl&zwnj;&#8203;ement(By.xpath(&quot;//a[&zwnj;&#8203;@id=&#39;ctl00_Content1_&zwnj;&#8203;button_accept&#39;]&quot;)));  WE.click();  If that don&#39;t do it, include the full markup of the page at the time this code is run.  (The wait will return the webelement if it is found... otherwise the timeout exception is thrown... it may also help to post the full exception you catch there...)"},{"owner":{"account_id":6077817,"reputation":1213,"user_id":4744568,"display_name":"pcalkins"},"score":0,"creation_date":1695066647,"post_id":77115582,"comment_id":135971937,"body_markdown":"you might also try clicking on just the image using XPATH of //img[@id=&#39;ctl00_Content1_Image2&#39;]","body":"you might also try clicking on just the image using XPATH of //img[@id=&#39;ctl00_Content1_Image2&#39;]"},{"owner":{"account_id":12027303,"reputation":1,"user_id":8798735,"display_name":"StrugglingDev"},"score":0,"creation_date":1695083741,"post_id":77115582,"comment_id":135973890,"body_markdown":"No joy.  I believe you are looking for the error message - that is:\n\n\norg.openqa.selenium.NoSuchElementException: Unable to locate element: //a[@id=&#39;ctl00_Content1_button_accept&#39;]\nFor documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception\nBuild info: version: &#39;4.10.0&#39;, revision: &#39;c14d967899&#39;","body":"No joy.  I believe you are looking for the error message - that is:   org.openqa.selenium.NoSuchElementException: Unable to locate element: //a[@id=&#39;ctl00_Content1_button_accept&#39;] For documentation on this error, please visit: <a href=\"https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception\" rel=\"nofollow noreferrer\">selenium.dev/documentation/webdriver/troubleshooting/&hellip;</a> Build info: version: &#39;4.10.0&#39;, revision: &#39;c14d967899&#39;"},{"owner":{"account_id":12027303,"reputation":1,"user_id":8798735,"display_name":"StrugglingDev"},"score":0,"creation_date":1695083910,"post_id":77115582,"comment_id":135973902,"body_markdown":"HTML on the target page is:\n\n&lt;p class=&quot;center_align&quot;&gt;\n    &lt;a id=&quot;ctl00_Content1_button_accept&quot; class=&quot;button_imaged&quot; onfocus=&quot;highlight(this);&quot; onblur=&quot;doBlur(this);&quot; href=&quot;javascript:__doPostBack(&#39;ctl00$Content1$button_accept&#39;,&#39;&#39;)&quot;&gt;&lt;img id=&quot;ctl00_Content1_Image2&quot; src=&quot;images/icons/page_go.png&quot; align=&quot;absmiddle&quot;&gt;\n      Accept&lt;/a&gt;      \n&lt;/p&gt;","body":"HTML on the target page is:  &lt;p class=&quot;center_align&quot;&gt;     &lt;a id=&quot;ctl00_Content1_button_accept&quot; class=&quot;button_imaged&quot; onfocus=&quot;highlight(this);&quot; onblur=&quot;doBlur(this);&quot; href=&quot;javascript:__doPostBack(&#39;ctl00$Content1$button_accept&#39;&zwnj;&#8203;,&#39;&#39;)&quot;&gt;&lt;img id=&quot;ctl00_Content1_Image2&quot; src=&quot;images/icons/page_go.png&quot; align=&quot;absmiddle&quot;&gt;       Accept&lt;/a&gt;       &lt;/p&gt;"},{"owner":{"account_id":12027303,"reputation":1,"user_id":8798735,"display_name":"StrugglingDev"},"score":0,"creation_date":1695084159,"post_id":77115582,"comment_id":135973924,"body_markdown":"Tried second option of clicking on image and received this error message:\n\n\norg.openqa.selenium.NoSuchElementException: Unable to locate element: //*[@id=&quot;ctl00_Content1_Image2&quot;]\nFor documentation on this error, please visit: https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception\nBuild info: version: &#39;4.10.0&#39;, revision: &#39;c14d967899&#39;","body":"Tried second option of clicking on image and received this error message:   org.openqa.selenium.NoSuchElementException: Unable to locate element: //*[@id=&quot;ctl00_Content1_Image2&quot;] For documentation on this error, please visit: <a href=\"https://www.selenium.dev/documentation/webdriver/troubleshooting/errors#no-such-element-exception\" rel=\"nofollow noreferrer\">selenium.dev/documentation/webdriver/troubleshooting/&hellip;</a> Build info: version: &#39;4.10.0&#39;, revision: &#39;c14d967899&#39;"},{"owner":{"account_id":6077817,"reputation":1213,"user_id":4744568,"display_name":"pcalkins"},"score":0,"creation_date":1695142880,"post_id":77115582,"comment_id":135983432,"body_markdown":"you&#39;ll want to post the full markup of the DOM at the time you try to find the element.  (right-click in browser and choose, &quot;Inspect&quot;)  Also be sure to use webdriverwaits.","body":"you&#39;ll want to post the full markup of the DOM at the time you try to find the element.  (right-click in browser and choose, &quot;Inspect&quot;)  Also be sure to use webdriverwaits."},{"owner":{"account_id":12027303,"reputation":1,"user_id":8798735,"display_name":"StrugglingDev"},"score":0,"creation_date":1695844875,"post_id":77115582,"comment_id":136079871,"body_markdown":"Sorry, had to go out of town for a wedding.  Let me work on this and post DOM.","body":"Sorry, had to go out of town for a wedding.  Let me work on this and post DOM."},{"owner":{"account_id":12027303,"reputation":1,"user_id":8798735,"display_name":"StrugglingDev"},"score":0,"creation_date":1695854350,"post_id":77115582,"comment_id":136081236,"body_markdown":"I&#39;m assuming you do not mean the entire DOM as I can&#39;t find an easy way to do that nor would I have enough room to post due to character restrictions on this site.  That being said, here is the portion of the DOM from the inspection of the element after arriving on the page:\n\n&lt;a id=&quot;ctl00_Content1_button_accept&quot; class=&quot;button_imaged&quot; onfocus=&quot;highlight(this);&quot; onblur=&quot;doBlur(this);&quot; href=&quot;javascript:__doPostBack(&#39;ctl00$Content1$button_accept&#39;,&#39;&#39;)&quot;&gt;&lt;img id=&quot;ctl00_Content1_Image2&quot; src=&quot;images/icons/page_go.png&quot; align=&quot;absmiddle&quot;&gt;\n      Accept&lt;/a&gt;","body":"I&#39;m assuming you do not mean the entire DOM as I can&#39;t find an easy way to do that nor would I have enough room to post due to character restrictions on this site.  That being said, here is the portion of the DOM from the inspection of the element after arriving on the page:  &lt;a id=&quot;ctl00_Content1_button_accept&quot; class=&quot;button_imaged&quot; onfocus=&quot;highlight(this);&quot; onblur=&quot;doBlur(this);&quot; href=&quot;javascript:__doPostBack(&#39;ctl00$Content1$button_accept&#39;&zwnj;&#8203;,&#39;&#39;)&quot;&gt;&lt;img id=&quot;ctl00_Content1_Image2&quot; src=&quot;images/icons/page_go.png&quot; align=&quot;absmiddle&quot;&gt;       Accept&lt;/a&gt;"},{"owner":{"account_id":12027303,"reputation":1,"user_id":8798735,"display_name":"StrugglingDev"},"score":0,"creation_date":1695854437,"post_id":77115582,"comment_id":136081244,"body_markdown":"after attempting to click the link:\n\n&lt;a id=&quot;ctl00_Content1_button_accept&quot; class=&quot;button_imaged&quot; onfocus=&quot;highlight(this);&quot; onblur=&quot;doBlur(this);&quot; href=&quot;javascript:__doPostBack(&#39;ctl00$Content1$button_accept&#39;,&#39;&#39;)&quot;&gt;&lt;img id=&quot;ctl00_Content1_Image2&quot; src=&quot;images/icons/page_go.png&quot; align=&quot;absmiddle&quot;&gt;\n      Accept&lt;/a&gt;","body":"after attempting to click the link:  &lt;a id=&quot;ctl00_Content1_button_accept&quot; class=&quot;button_imaged&quot; onfocus=&quot;highlight(this);&quot; onblur=&quot;doBlur(this);&quot; href=&quot;javascript:__doPostBack(&#39;ctl00$Content1$button_accept&#39;&zwnj;&#8203;,&#39;&#39;)&quot;&gt;&lt;img id=&quot;ctl00_Content1_Image2&quot; src=&quot;images/icons/page_go.png&quot; align=&quot;absmiddle&quot;&gt;       Accept&lt;/a&gt;"},{"owner":{"account_id":12027303,"reputation":1,"user_id":8798735,"display_name":"StrugglingDev"},"score":0,"creation_date":1695854522,"post_id":77115582,"comment_id":136081256,"body_markdown":"using the following code:\n\n\nWebDriverWait \t\twait;\nwait\t\t= \tnew WebDriverWait(WD,Duration.ofSeconds(30));\nWE \t\t= \twait.until(ExpectedConditions.elementToBeClickable(WD.findElement(By.xpath(&quot;//*[@id=\\&quot;ctl00_Content1_Image2\\&quot;]&quot;))));\nWE.click();","body":"using the following code:   WebDriverWait \t\twait; wait\t\t= \tnew WebDriverWait(WD,Duration.ofSeconds(30)); WE \t\t= \twait.until(ExpectedConditions.elementToBeClickable(WD.findE&zwnj;&#8203;lement(By.xpath(&quot;//*&zwnj;&#8203;[@id=\\&quot;ctl00_Content&zwnj;&#8203;1_Image2\\&quot;]&quot;)))); WE.click();"},{"owner":{"account_id":12027303,"reputation":1,"user_id":8798735,"display_name":"StrugglingDev"},"score":0,"creation_date":1695854766,"post_id":77115582,"comment_id":136081277,"body_markdown":"Error Message:\n\nUnable to locate element: //*[@id=&quot;ctl00_Content1_Image2&quot;]","body":"Error Message:  Unable to locate element: //*[@id=&quot;ctl00_Content1_Image2&quot;]"},{"owner":{"account_id":12027303,"reputation":1,"user_id":8798735,"display_name":"StrugglingDev"},"score":0,"creation_date":1695855325,"post_id":77115582,"comment_id":136081326,"body_markdown":"Changed line of code to try CSS Selector:\nWE = wait.until(ExpectedConditions.elementToBeClickable(WD.findElement(By.cssSelector(&quot;#ctl00_Content1_button_accept&quot;))));\n\nand received similar error:\nUnable to locate element: #ctl00_Content1_button_accept","body":"Changed line of code to try CSS Selector: WE = wait.until(ExpectedConditions.elementToBeClickable(WD.findEl&zwnj;&#8203;ement(By.cssSelector&zwnj;&#8203;(&quot;#ctl00_Content1_bu&zwnj;&#8203;tton_accept&quot;))));  and received similar error: Unable to locate element: #ctl00_Content1_button_accept"}],"answers":[{"tags":[],"owner":{"account_id":12027303,"reputation":1,"user_id":8798735,"display_name":"StrugglingDev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1698062509,"creation_date":1697989021,"answer_id":77340615,"question_id":77115582,"body_markdown":"So after months of trial and error, I stumbled upon this YouTube Video:\r\n\r\nhttps://www.youtube.com/watch?v=_pZjz050TBA\r\n\r\nIn this video Prakash Narkhede walks through the stepping of xpath layers to arrive at the specific element he is searching for.  My first challenge was understanding where in the DevTools he was entering the search criteria to evaluate the xpath - this was simply &lt;ctrnl&gt; f to &#39;find&#39; the elements in the DOM (simple but was confusing at the time).\r\n\r\nNext I navigated as he did entering each node down to where I was trying to find the element I needed to click.  The following xpath:\r\n \r\n&quot;//div[@class=&#39;deptparagraphdescription2&#39;]/p[@class=&#39;center_align&#39;]/a&quot;\r\n\r\n\r\nfinally got click to work w/ the following code (Note:  Challenging page url found in code below as well:\r\n\r\n```java\r\npublic static void Main() {\r\n\tWebElement WE;\r\n\tWebDriver WD;\r\n\r\n\tSystem.setProperty(&quot;webdriver.gecko.driver&quot;, &quot;/home/ms/Development/WS/WebScrape/src-fl/geckodriver/geckodriver&quot;);\r\n\tSystem.setProperty(&quot;webdirver.firfox.bin&quot;, &quot;/usr/bin/firefox&quot;);\r\n\r\n\t// Fire Up Firefox Browser\r\n\tWD = new FirefoxDriver();\r\n\r\n\t// Navigate to Target Site / specific page where object can NOT be clicked (&#39;Accept button&#39;)\r\n\tL.SendLog(&quot;Running&quot;, &quot;Testing&quot;, &quot;JETesting&quot;, &quot;Main&quot;, &quot;Navigating to problem page&quot;, &quot;&quot;);\r\n\tWD.get(&quot;https://app02.clerk.org/cm_rpt/?id=fci&quot;);\r\n\tL.SendLog(&quot;Running&quot;, &quot;Testing&quot;, &quot;JETesting&quot;, &quot;Main&quot;, &quot;Navigation to problem page completed&quot;, &quot;&quot;);\r\n\r\n\ttry {\r\n\t\tL.SendLog(&quot;Running&quot;, &quot;Testing&quot;, &quot;JETesting&quot;, &quot;Main&quot;, &quot;Attempting to select and click element by using xpath &#39;//div[@class=&#39;deptparagraphdescription2&#39;]/p[@class=&#39;center_align&#39;]/a&#39;&quot;, &quot;&quot;);\r\n\t\tWebDriverWait wait;\r\n\t\twait = new WebDriverWait(WD, Duration.ofSeconds(30));\r\n\r\n\t\tWE = wait.until(ExpectedConditions.elementToBeClickable(WD.findElement(By.xpath(&quot;//div[@class=&#39;deptparagraphdescription2&#39;]/p[@class=&#39;center_align&#39;]/a&quot;))));\r\n\t\tWE.click();\r\n\t\ts = &quot;pause for breakpoint&quot;;\r\n\t} catch (Exception e) {\r\n\t\te.printStackTrace();\r\n\t\tL.SendLog(&quot;Running&quot;, &quot;Testing&quot;, &quot;JETesting&quot;, &quot;Main&quot;, &quot;Clicking by xpath &#39;//div[@class=&#39;deptparagraphdescription2&#39;]/p[@class=&#39;center_align&#39;]/a&#39; FAILED&quot;, e.getMessage());\r\n\t\ts = &quot;pause for breakpoint&quot;;\r\n\t}\r\n}\r\n```\r\n\r\nTraversing the path as Prakash did in his video, helped ID an xpath for the anchor (&lt;a&gt;) element to allow the click to work.  Simply copying the xpath for what I believed was the element to select and click on didn&#39;t work.  Selecting an xpath via the traversal path technique seemed to solve the problem.","title":"ASPX Form DoPostBack with Java and Selenium","body":"<p>So after months of trial and error, I stumbled upon this YouTube Video:</p>\n<p><a href=\"https://www.youtube.com/watch?v=_pZjz050TBA\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=_pZjz050TBA</a></p>\n<p>In this video Prakash Narkhede walks through the stepping of xpath layers to arrive at the specific element he is searching for.  My first challenge was understanding where in the DevTools he was entering the search criteria to evaluate the xpath - this was simply  f to 'find' the elements in the DOM (simple but was confusing at the time).</p>\n<p>Next I navigated as he did entering each node down to where I was trying to find the element I needed to click.  The following xpath:</p>\n<p>&quot;//div[@class='deptparagraphdescription2']/p[@class='center_align']/a&quot;</p>\n<p>finally got click to work w/ the following code (Note:  Challenging page url found in code below as well:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void Main() {\n    WebElement WE;\n    WebDriver WD;\n\n    System.setProperty(&quot;webdriver.gecko.driver&quot;, &quot;/home/ms/Development/WS/WebScrape/src-fl/geckodriver/geckodriver&quot;);\n    System.setProperty(&quot;webdirver.firfox.bin&quot;, &quot;/usr/bin/firefox&quot;);\n\n    // Fire Up Firefox Browser\n    WD = new FirefoxDriver();\n\n    // Navigate to Target Site / specific page where object can NOT be clicked ('Accept button')\n    L.SendLog(&quot;Running&quot;, &quot;Testing&quot;, &quot;JETesting&quot;, &quot;Main&quot;, &quot;Navigating to problem page&quot;, &quot;&quot;);\n    WD.get(&quot;https://app02.clerk.org/cm_rpt/?id=fci&quot;);\n    L.SendLog(&quot;Running&quot;, &quot;Testing&quot;, &quot;JETesting&quot;, &quot;Main&quot;, &quot;Navigation to problem page completed&quot;, &quot;&quot;);\n\n    try {\n        L.SendLog(&quot;Running&quot;, &quot;Testing&quot;, &quot;JETesting&quot;, &quot;Main&quot;, &quot;Attempting to select and click element by using xpath '//div[@class='deptparagraphdescription2']/p[@class='center_align']/a'&quot;, &quot;&quot;);\n        WebDriverWait wait;\n        wait = new WebDriverWait(WD, Duration.ofSeconds(30));\n\n        WE = wait.until(ExpectedConditions.elementToBeClickable(WD.findElement(By.xpath(&quot;//div[@class='deptparagraphdescription2']/p[@class='center_align']/a&quot;))));\n        WE.click();\n        s = &quot;pause for breakpoint&quot;;\n    } catch (Exception e) {\n        e.printStackTrace();\n        L.SendLog(&quot;Running&quot;, &quot;Testing&quot;, &quot;JETesting&quot;, &quot;Main&quot;, &quot;Clicking by xpath '//div[@class='deptparagraphdescription2']/p[@class='center_align']/a' FAILED&quot;, e.getMessage());\n        s = &quot;pause for breakpoint&quot;;\n    }\n}\n</code></pre>\n<p>Traversing the path as Prakash did in his video, helped ID an xpath for the anchor () element to allow the click to work.  Simply copying the xpath for what I believed was the element to select and click on didn't work.  Selecting an xpath via the traversal path technique seemed to solve the problem.</p>\n"}],"owner":{"account_id":12027303,"reputation":1,"user_id":8798735,"display_name":"StrugglingDev"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77340615,"answer_count":1,"score":0,"last_activity_date":1698062509,"creation_date":1694815906,"question_id":77115582,"body_markdown":"Test Scenario:\r\n\r\n1. Navigate to target site\r\n2. Select hyperlink and advance to 2nd page\r\n3. Select hyperlink on 2nd page and advance to 3rd page\r\n4. Click on &quot;Accept&quot; button to advance to following page\r\n\r\nThe Accept Page has a doPostBack javascript hyperlink and I&#39;m unable to use xpath, javascriptExecutor, or any other means to advance to the next page.\r\n\r\nCode in question w/ inline comments:\r\n\r\n```\r\npublic static void Main\t()  {\r\nWebElement      WE;\r\nWebDriver\tWD;\r\nWebDriverWait   WW;\r\n\r\nSystem.setProperty(&quot;webdriver.gecko.driver&quot;, &quot;MyPathTo/geckodriver&quot;);\r\nSystem.setProperty(&quot;webdirver.firfox.bin&quot;, &quot;/usr/bin/firefox&quot;);\r\n\r\n//Fire Up Firefox Browser\r\nWD  = \tnew FirefoxDriver();\r\n\r\n//Navigate to Target Site\r\nWD.get(&quot;https://MyFakeSite.org&quot;);\r\n\r\n//Find first link / page to navigate to from site\r\nWE   =\tWD.findElement(By.xpath(&quot;/html/body/form/div[6]/div[1]/div/div[2]/div/div[2]/a&quot;));\r\nWD.get(WE.getAttribute(&quot;href&quot;));\r\n\r\n//Find second link / page to navigate to from current page\r\nWE   = WD.findElement(By.xpath(&quot;/html/body/form/div[5]/div/div[2]/div[3]/div/span[2]/div[4]/a&quot;));\r\nWE.click();\r\n\r\n//Train falls off the rails here:\r\ntry\r\n{\r\nWebDriverWait   wait;\r\nwait   =   new WebDriverWait(WD,Duration.ofSeconds(30));\r\n\r\n//Error occurs with this line\r\nwait.until(ExpectedConditions.elementToBeClickable(WD.findElement(By.xpath(&quot;//*[@id=\\&quot;ctl00_Content1_button_accept\\&quot;]&quot;))));\r\n\r\nWE = WD.findElement(By.xpath(&quot;//[@id=&#39;ctl00_Content1_button_accept&#39;]&quot;)); \r\n//Never Reach this line - Error occurs and jumps to Catch...\r\nWE.click(); \r\n\r\n}\r\n```\r\n\r\nSelenium can NOT find the element and results in an error:  Unable to locate element: //\\[@id=&quot;ctl00_Content1_button_accept&quot;\\].  Since Selenium can not find the element.  I originally believe the code was erroring out on the following executable line from the error line above, but stand corrected.  user @pcalkins attempted to help me suggesting I was on the right path - @pacalkins suggested an xpath w/ an &quot;a&quot; instead of the &quot;\\*&quot; - I tried that it did not work; same result / error message.  An inspection of the html code using dev tools shows this:\r\n\r\n```\r\n&lt;a id=&quot;ctl00_Content1_button_accept&quot; class=&quot;button_imaged&quot; onfocus=&quot;highlight(this);&quot; onblur=&quot;doBlur(this);&quot; href=&quot;javascript:__doPostBack(&#39;ctl00$Content1$button_accept&#39;,&#39;&#39;)&quot;&gt;&lt;img id=&quot;ctl00_Content1_Image2&quot; src=&quot;images/icons/page_go.png&quot; align=&quot;absmiddle&quot;&gt;\r\n      Accept&lt;/a&gt;\r\n```\r\n\r\nResearch into the network payload has been discouraged as the form should be automatically sending the payload / variables / necessary parameters if I can just get the &quot;Accept&quot; button to click.  I&#39;ve tried WebDriver, WebElement, JavascriptExecutor, send keys (with enter key - performing the manual task of hitting the enter key on the keyboard works / advances you, but not when you send the keystrokes programmatically).\r\n\r\nWhat do I do ?  What is the code that will work ?  Who can help me ?  And a big thanks to @pcalkins for trying to help me out !!!","title":"ASPX Form DoPostBack with Java and Selenium","body":"<p>Test Scenario:</p>\n<ol>\n<li>Navigate to target site</li>\n<li>Select hyperlink and advance to 2nd page</li>\n<li>Select hyperlink on 2nd page and advance to 3rd page</li>\n<li>Click on &quot;Accept&quot; button to advance to following page</li>\n</ol>\n<p>The Accept Page has a doPostBack javascript hyperlink and I'm unable to use xpath, javascriptExecutor, or any other means to advance to the next page.</p>\n<p>Code in question w/ inline comments:</p>\n<pre><code>public static void Main ()  {\nWebElement      WE;\nWebDriver   WD;\nWebDriverWait   WW;\n\nSystem.setProperty(&quot;webdriver.gecko.driver&quot;, &quot;MyPathTo/geckodriver&quot;);\nSystem.setProperty(&quot;webdirver.firfox.bin&quot;, &quot;/usr/bin/firefox&quot;);\n\n//Fire Up Firefox Browser\nWD  =   new FirefoxDriver();\n\n//Navigate to Target Site\nWD.get(&quot;https://MyFakeSite.org&quot;);\n\n//Find first link / page to navigate to from site\nWE   =  WD.findElement(By.xpath(&quot;/html/body/form/div[6]/div[1]/div/div[2]/div/div[2]/a&quot;));\nWD.get(WE.getAttribute(&quot;href&quot;));\n\n//Find second link / page to navigate to from current page\nWE   = WD.findElement(By.xpath(&quot;/html/body/form/div[5]/div/div[2]/div[3]/div/span[2]/div[4]/a&quot;));\nWE.click();\n\n//Train falls off the rails here:\ntry\n{\nWebDriverWait   wait;\nwait   =   new WebDriverWait(WD,Duration.ofSeconds(30));\n\n//Error occurs with this line\nwait.until(ExpectedConditions.elementToBeClickable(WD.findElement(By.xpath(&quot;//*[@id=\\&quot;ctl00_Content1_button_accept\\&quot;]&quot;))));\n\nWE = WD.findElement(By.xpath(&quot;//[@id='ctl00_Content1_button_accept']&quot;)); \n//Never Reach this line - Error occurs and jumps to Catch...\nWE.click(); \n\n}\n</code></pre>\n<p>Selenium can NOT find the element and results in an error:  Unable to locate element: //[@id=&quot;ctl00_Content1_button_accept&quot;].  Since Selenium can not find the element.  I originally believe the code was erroring out on the following executable line from the error line above, but stand corrected.  user @pcalkins attempted to help me suggesting I was on the right path - @pacalkins suggested an xpath w/ an &quot;a&quot; instead of the &quot;*&quot; - I tried that it did not work; same result / error message.  An inspection of the html code using dev tools shows this:</p>\n<pre><code>&lt;a id=&quot;ctl00_Content1_button_accept&quot; class=&quot;button_imaged&quot; onfocus=&quot;highlight(this);&quot; onblur=&quot;doBlur(this);&quot; href=&quot;javascript:__doPostBack('ctl00$Content1$button_accept','')&quot;&gt;&lt;img id=&quot;ctl00_Content1_Image2&quot; src=&quot;images/icons/page_go.png&quot; align=&quot;absmiddle&quot;&gt;\n      Accept&lt;/a&gt;\n</code></pre>\n<p>Research into the network payload has been discouraged as the form should be automatically sending the payload / variables / necessary parameters if I can just get the &quot;Accept&quot; button to click.  I've tried WebDriver, WebElement, JavascriptExecutor, send keys (with enter key - performing the manual task of hitting the enter key on the keyboard works / advances you, but not when you send the keystrokes programmatically).</p>\n<p>What do I do ?  What is the code that will work ?  Who can help me ?  And a big thanks to @pcalkins for trying to help me out !!!</p>\n"},{"tags":["java","unit-testing","junit","mocking","mockito"],"comments":[{"owner":{"account_id":22577442,"reputation":758,"user_id":16775102,"display_name":"Feel free"},"score":0,"creation_date":1698130405,"post_id":77344947,"comment_id":136362677,"body_markdown":"Just remove BeforeClass and AfterClass. Instead of openMocks use @RunWith(MockitoJUnitRunner.class) on class. In the testData method use try-with-resources too. And don&#39;t forget to remove MockedStatic&lt;MyProperties&gt; myPropertiesMockedStatic; from dependencies","body":"Just remove BeforeClass and AfterClass. Instead of openMocks use @RunWith(MockitoJUnitRunner.class) on class. In the testData method use try-with-resources too. And don&#39;t forget to remove MockedStatic&lt;MyProperties&gt; myPropertiesMockedStatic; from dependencies"},{"owner":{"account_id":29734554,"reputation":1,"user_id":22788396,"display_name":"priyanshi sahu"},"score":0,"creation_date":1698219091,"post_id":77344947,"comment_id":136375729,"body_markdown":"I have already used this annotation on class level, but after using this my code coverage has gone down by 10%. And also that code i have shared, its working fine when i&#39;m running only this class test cases but i&#39;m trying to run whole module test cases then i&#39;m getting this error","body":"I have already used this annotation on class level, but after using this my code coverage has gone down by 10%. And also that code i have shared, its working fine when i&#39;m running only this class test cases but i&#39;m trying to run whole module test cases then i&#39;m getting this error"}],"owner":{"account_id":29734554,"reputation":1,"user_id":22788396,"display_name":"priyanshi sahu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698061858,"creation_date":1698061858,"question_id":77344947,"body_markdown":"I am getting the following exception when trying to mock the static method.\r\n\r\nstatic mocking is already registered in the current thread To create a new mock, the existing static mock registration must be deregistered\r\n\r\n\r\n\r\n\r\npublic class MockitoTest  {\r\n\r\n    MockedStatic&lt;MyProperties&gt; myPropertiesMockedStatic;\r\n\r\n    @Mock;\r\n    Student student;\r\n\r\n    @BeforeClass(groups = {&quot;mocks&quot;})\r\n    public void setup() {\r\n        MockitoAnnotations.openMocks(this);\r\n        myPropertiesMockedStatic=Mockito.mockStatic(MyProperties.class);\r\n        myPropertiesMockedStatic.when(() -&gt; MyProperties.getProperty(&quot;document.abc.Id&quot;)).thenReturn(&quot;souJobId&quot;);\r\n\r\n    }\r\n\r\n    @Test(groups = {&quot;mocks&quot;})\r\n    public void testJobId() {\r\n        try(MockedStatic&lt;MyProperties&gt; properties =Mockito.mockStatic(MyProperties.class)) {\r\n            properties.when(()-&gt;MyProperties.getProperty(&quot;abc.url&quot;)).thenReturn(&quot;url&quot;);\r\n            student.getStudentData();\r\n        }\r\n    }\r\n    @Test(groups = {&quot;mocks&quot;})\r\n    public void testData(){\r\n            myPropertiesMockedStatic.when(()-&gt;MyProperties.getProperty(&quot;abc.url&quot;)).thenReturn(&quot;testUrl&quot;);\r\n\r\n            List&lt;Student&gt; list = new ArrayList&lt;&gt;();\r\n            Student st = new Student();\r\n            list.add(st);\r\n            //todo\r\n       \r\n    }\r\n    @AfterClass(groups = {&quot;mocks&quot;})\r\n    public void cleanUp(){\r\n        myPropertiesMockedStatic.close();\r\n    }\r\n}\r\n\r\nI&#39;m a running multiple tests in different classes, the way we are using the myProperties individually then run fine, but when I run all of them at once, I get  For com.test.MyProperties, static mocking is already registered in the current thread. To create a new mock, the existing static mocking must be deregistered.\r\n\r\nIs there any another way I can configure the , or is there a way to resolve this? I tried using different variable names for each of them but that doesn&#39;t work. Also tried close() on them after the test, but that doesn&#39;t seem to work, still getting getting the same issue for every classes.\r\nIf there&#39;s a way to do this via Mockito, without a try-with-resources for multiple objects and their behaviour, that would work for me as well.\r\n\r\nThanks in advance!\r\n\r\n","title":"Mockito 5.0.0 Static Mocking Exception","body":"<p>I am getting the following exception when trying to mock the static method.</p>\n<p>static mocking is already registered in the current thread To create a new mock, the existing static mock registration must be deregistered</p>\n<p>public class MockitoTest  {</p>\n<pre><code>MockedStatic&lt;MyProperties&gt; myPropertiesMockedStatic;\n\n@Mock;\nStudent student;\n\n@BeforeClass(groups = {&quot;mocks&quot;})\npublic void setup() {\n    MockitoAnnotations.openMocks(this);\n    myPropertiesMockedStatic=Mockito.mockStatic(MyProperties.class);\n    myPropertiesMockedStatic.when(() -&gt; MyProperties.getProperty(&quot;document.abc.Id&quot;)).thenReturn(&quot;souJobId&quot;);\n\n}\n\n@Test(groups = {&quot;mocks&quot;})\npublic void testJobId() {\n    try(MockedStatic&lt;MyProperties&gt; properties =Mockito.mockStatic(MyProperties.class)) {\n        properties.when(()-&gt;MyProperties.getProperty(&quot;abc.url&quot;)).thenReturn(&quot;url&quot;);\n        student.getStudentData();\n    }\n}\n@Test(groups = {&quot;mocks&quot;})\npublic void testData(){\n        myPropertiesMockedStatic.when(()-&gt;MyProperties.getProperty(&quot;abc.url&quot;)).thenReturn(&quot;testUrl&quot;);\n\n        List&lt;Student&gt; list = new ArrayList&lt;&gt;();\n        Student st = new Student();\n        list.add(st);\n        //todo\n   \n}\n@AfterClass(groups = {&quot;mocks&quot;})\npublic void cleanUp(){\n    myPropertiesMockedStatic.close();\n}\n</code></pre>\n<p>}</p>\n<p>I'm a running multiple tests in different classes, the way we are using the myProperties individually then run fine, but when I run all of them at once, I get  For com.test.MyProperties, static mocking is already registered in the current thread. To create a new mock, the existing static mocking must be deregistered.</p>\n<p>Is there any another way I can configure the , or is there a way to resolve this? I tried using different variable names for each of them but that doesn't work. Also tried close() on them after the test, but that doesn't seem to work, still getting getting the same issue for every classes.\nIf there's a way to do this via Mockito, without a try-with-resources for multiple objects and their behaviour, that would work for me as well.</p>\n<p>Thanks in advance!</p>\n"},{"tags":["java","swing","java-8","jscrollpane","jtextpane"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":1,"creation_date":1697829031,"post_id":77333145,"comment_id":136333389,"body_markdown":"When I click on _Insert2_ [`JButton`], I get an error: _`javax.swing.text.BadLocationException`: Invalid insert_","body":"When I click on <i>Insert2</i> [<code>JButton</code>], I get an error: <i><code>javax.swing.text.BadLocationException</code>: Invalid insert</i>"},{"owner":{"account_id":7421543,"reputation":2880,"user_id":5645656,"accept_rate":100,"display_name":"Cardinal System"},"score":0,"creation_date":1697829951,"post_id":77333145,"comment_id":136333516,"body_markdown":"@Abra strange. That is not happening for me. I am using JDK 8.","body":"@Abra strange. That is not happening for me. I am using JDK 8."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1697830946,"post_id":77333145,"comment_id":136333657,"body_markdown":"It seems `doc.getEndPosition().getOffset()` returns 1 in all versions of Java.  And `doc.getText(0, doc.getEndPosition().getOffset())` returns &quot;\\u000a&quot; in all versions of Java.  I suspect there’s a “magic” Element at the end, which was mistakenly treated as normal text in Java 8.","body":"It seems <code>doc.getEndPosition().getOffset()</code> returns 1 in all versions of Java.  And <code>doc.getText(0, doc.getEndPosition().getOffset())</code> returns &quot;\\u000a&quot; in all versions of Java.  I suspect there’s a “magic” Element at the end, which was mistakenly treated as normal text in Java 8."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1697835045,"post_id":77333145,"comment_id":136334190,"body_markdown":"*the first frame will automatically scroll to the bottom when the text is appended,* - check out [Text Area Scrolling](https://tips4java.wordpress.com/2008/10/22/text-area-scrolling/) for what I believe to be the conditions for automatic scrolling. I also get a BLE on the second frame (JDK 11). The BLE is on the getEndPosition(...) method which tells me there is something in the logic that changes the state of the Document to break one of the conditions for automatic scrolling.","body":"<i>the first frame will automatically scroll to the bottom when the text is appended,</i> - check out <a href=\"https://tips4java.wordpress.com/2008/10/22/text-area-scrolling/\" rel=\"nofollow noreferrer\">Text Area Scrolling</a> for what I believe to be the conditions for automatic scrolling. I also get a BLE on the second frame (JDK 11). The BLE is on the getEndPosition(...) method which tells me there is something in the logic that changes the state of the Document to break one of the conditions for automatic scrolling."}],"owner":{"account_id":7421543,"reputation":2880,"user_id":5645656,"accept_rate":100,"display_name":"Cardinal System"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1698061580,"creation_date":1697827314,"question_id":77333145,"body_markdown":"I noticed some interesting behavior with [`JScrollPane`][1] when manipulating the underlying document in a [`JTextPane`][1]. Consider this example:\r\n\r\n    public class Example {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tString text = &quot;I like trains :)\\n&quot;;\r\n    \t\tcreateExample(1, doc -&gt; doc.insertString(doc.getLength(), text, null));\r\n    \t\tcreateExample(2, doc -&gt; doc.insertString(doc.getEndPosition().getOffset(), text, null));\r\n    \t}\r\n    \r\n    \tprivate static void createExample(int exampleNumber, ThrowingConsumer&lt;Document&gt; insertAction) {\r\n    \t\tJTextPane textPane = new JTextPane();\r\n    \t\tJScrollPane scrollPane = new JScrollPane(textPane);\r\n    \t\t\r\n    \t\tDocument document = textPane.getDocument();\r\n    \t\tJButton insert = new JButton(&quot;Insert&quot; + exampleNumber);\r\n    \t\tinsert.addActionListener(e -&gt; {\r\n    \t\t\ttry {\r\n    \t\t\t\tinsertAction.accept(document);\r\n    \t\t\t} catch (Throwable e1) {\r\n    \t\t\t\te1.printStackTrace();\r\n    \t\t\t}\r\n    \t\t});\r\n    \r\n    \t\tJFrame frame = new JFrame(&quot;Test Frame &quot; + exampleNumber);\r\n    \t\tframe.setLayout(new BorderLayout(0, 10));\r\n    \t\tframe.add(scrollPane, BorderLayout.CENTER);\r\n    \t\tframe.add(insert, BorderLayout.SOUTH);\r\n    \r\n    \t\tframe.setSize(400, 200);\r\n    \t\tframe.setLocationByPlatform(true);\r\n    \t\tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    \t\tframe.setVisible(true);\r\n    \t}\r\n    \r\n    \tprivate static interface ThrowingConsumer&lt;T&gt; {\r\n    \t\tvoid accept(T t) throws Throwable;\r\n    \t}\r\n    \r\n    }\r\n\r\nThis creates two frames that append text to a text pane&#39;s underlying document when a button is pushed. The frames have almost identical logic, with the only distinction being that the first frame uses [`Document.getLength()`][2] when inserting the text and the second frame uses [`Document.getEndPosition()`][3] and [`Position.getOffset()`][4].\r\n\r\nSomehow, the first frame will automatically scroll to the bottom when the text is appended, while the second frame will remain at the start of the document (unless the user drags the scrollbar manually).\r\n\r\nDoes anyone know why this is?\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/javax/swing/JTextPane.html\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/javax/swing/text/Document.html#getLength--\r\n  [3]: https://docs.oracle.com/javase/8/docs/api/javax/swing/text/Document.html#getEndPosition--\r\n  [4]: https://docs.oracle.com/javase/8/docs/api/javax/swing/text/Position.html#getOffset--&#39;","title":"Why does Document.insertString() auto-scroll with getLength()?","body":"<p>I noticed some interesting behavior with <a href=\"https://docs.oracle.com/javase/8/docs/api/javax/swing/JTextPane.html\" rel=\"nofollow noreferrer\"><code>JScrollPane</code></a> when manipulating the underlying document in a <a href=\"https://docs.oracle.com/javase/8/docs/api/javax/swing/JTextPane.html\" rel=\"nofollow noreferrer\"><code>JTextPane</code></a>. Consider this example:</p>\n<pre><code>public class Example {\n\n    public static void main(String[] args) {\n        String text = &quot;I like trains :)\\n&quot;;\n        createExample(1, doc -&gt; doc.insertString(doc.getLength(), text, null));\n        createExample(2, doc -&gt; doc.insertString(doc.getEndPosition().getOffset(), text, null));\n    }\n\n    private static void createExample(int exampleNumber, ThrowingConsumer&lt;Document&gt; insertAction) {\n        JTextPane textPane = new JTextPane();\n        JScrollPane scrollPane = new JScrollPane(textPane);\n        \n        Document document = textPane.getDocument();\n        JButton insert = new JButton(&quot;Insert&quot; + exampleNumber);\n        insert.addActionListener(e -&gt; {\n            try {\n                insertAction.accept(document);\n            } catch (Throwable e1) {\n                e1.printStackTrace();\n            }\n        });\n\n        JFrame frame = new JFrame(&quot;Test Frame &quot; + exampleNumber);\n        frame.setLayout(new BorderLayout(0, 10));\n        frame.add(scrollPane, BorderLayout.CENTER);\n        frame.add(insert, BorderLayout.SOUTH);\n\n        frame.setSize(400, 200);\n        frame.setLocationByPlatform(true);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.setVisible(true);\n    }\n\n    private static interface ThrowingConsumer&lt;T&gt; {\n        void accept(T t) throws Throwable;\n    }\n\n}\n</code></pre>\n<p>This creates two frames that append text to a text pane's underlying document when a button is pushed. The frames have almost identical logic, with the only distinction being that the first frame uses <a href=\"https://docs.oracle.com/javase/8/docs/api/javax/swing/text/Document.html#getLength--\" rel=\"nofollow noreferrer\"><code>Document.getLength()</code></a> when inserting the text and the second frame uses <a href=\"https://docs.oracle.com/javase/8/docs/api/javax/swing/text/Document.html#getEndPosition--\" rel=\"nofollow noreferrer\"><code>Document.getEndPosition()</code></a> and <a href=\"https://docs.oracle.com/javase/8/docs/api/javax/swing/text/Position.html#getOffset--%27\" rel=\"nofollow noreferrer\"><code>Position.getOffset()</code></a>.</p>\n<p>Somehow, the first frame will automatically scroll to the bottom when the text is appended, while the second frame will remain at the start of the document (unless the user drags the scrollbar manually).</p>\n<p>Does anyone know why this is?</p>\n"},{"tags":["java","sonarqube","sonarlint","sonarlint-intellij"],"comments":[{"owner":{"account_id":5912629,"reputation":93,"user_id":4652337,"display_name":"Chandika"},"score":1,"creation_date":1698913970,"post_id":77343052,"comment_id":136465401,"body_markdown":"https://community.sonarsource.com/t/proper-connection-close-check-not-working-sonar/103216","body":"<a href=\"https://community.sonarsource.com/t/proper-connection-close-check-not-working-sonar/103216\" rel=\"nofollow noreferrer\">community.sonarsource.com/t/&hellip;</a>"}],"owner":{"account_id":5912629,"reputation":93,"user_id":4652337,"display_name":"Chandika"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698061190,"creation_date":1698042776,"question_id":77343052,"body_markdown":"In the below code, there is a issue, con,ps,rs close will not be called if an exception is thrown.\r\n\r\n```\r\npublic List&lt;String&gt; getRecordData(String email) {\r\n        List&lt;String&gt; data = new ArrayList&lt;&gt;();\r\n        Connection con = getConnection();\r\n        try {\r\n            PreparedStatement ps = con.prepareStatement(&quot;select subject from email_record where email=?&quot;);\r\n            ps.setString(1, email);\r\n            ResultSet rs = ps.executeQuery();\r\n            while (rs.next()) {\r\n                data.add(rs.getString(&quot;subject&quot;));\r\n            }\r\n            rs.close();\r\n            ps.close();\r\n            con.close();\r\n        } catch (SQLException e) {\r\n            throw new TestException(e);\r\n        }\r\n        return data;\r\n    }\r\n```\r\n\r\nBut sonarqube or sonarlint does not find any issue in this code. Do I need to enable some additional rules or something here?\r\n\r\nsample sonarqube project - https://sonarcloud.io/project/issues?resolved=false&amp;id=zchandikaz_sonar-test-code","title":"Proper connection close check not working sonar","body":"<p>In the below code, there is a issue, con,ps,rs close will not be called if an exception is thrown.</p>\n<pre><code>public List&lt;String&gt; getRecordData(String email) {\n        List&lt;String&gt; data = new ArrayList&lt;&gt;();\n        Connection con = getConnection();\n        try {\n            PreparedStatement ps = con.prepareStatement(&quot;select subject from email_record where email=?&quot;);\n            ps.setString(1, email);\n            ResultSet rs = ps.executeQuery();\n            while (rs.next()) {\n                data.add(rs.getString(&quot;subject&quot;));\n            }\n            rs.close();\n            ps.close();\n            con.close();\n        } catch (SQLException e) {\n            throw new TestException(e);\n        }\n        return data;\n    }\n</code></pre>\n<p>But sonarqube or sonarlint does not find any issue in this code. Do I need to enable some additional rules or something here?</p>\n<p>sample sonarqube project - <a href=\"https://sonarcloud.io/project/issues?resolved=false&amp;id=zchandikaz_sonar-test-code\" rel=\"nofollow noreferrer\">https://sonarcloud.io/project/issues?resolved=false&amp;id=zchandikaz_sonar-test-code</a></p>\n"},{"tags":["java","openapi","micronaut"],"answers":[{"tags":[],"owner":{"account_id":1677047,"reputation":5886,"user_id":1542319,"accept_rate":100,"display_name":"Sergey Tselovalnikov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698061076,"creation_date":1698061076,"answer_id":77344857,"question_id":77344726,"body_markdown":"It&#39;s possible to use `ServerRequestContext.currentRequest()` to obtain the current request. \r\n\r\n```java\r\nvar req = ServerRequestContext.currentRequest().orElseThrow();\r\nvar requestAttr = req.getAttribute(&quot;myattr&quot;).orElseThrow();\r\n```","title":"Obtaining a request attribute in an OpenAPI-generated controller in Micronaut","body":"<p>It's possible to use <code>ServerRequestContext.currentRequest()</code> to obtain the current request.</p>\n<pre class=\"lang-java prettyprint-override\"><code>var req = ServerRequestContext.currentRequest().orElseThrow();\nvar requestAttr = req.getAttribute(&quot;myattr&quot;).orElseThrow();\n</code></pre>\n"}],"owner":{"account_id":1677047,"reputation":5886,"user_id":1542319,"accept_rate":100,"display_name":"Sergey Tselovalnikov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698061076,"creation_date":1698059886,"question_id":77344726,"body_markdown":"I&#39;ve generated a controller in Micronaut from an OpenAPI spec, but it&#39;s missing a way to access to the attributes in the request object. Consider the following OpenAPI spec:\r\n\r\n```yaml\r\n...\r\npaths:\r\n  /api/auth/login:\r\n    post:\r\n      tags:\r\n        - auth\r\n      summary: User login\r\n      operationId: login\r\n      requestBody:\r\n        required: true\r\n        content:\r\n          application/json:\r\n            schema:\r\n              $ref: &#39;#/components/schemas/LoginRequest&#39;\r\n...\r\n```\r\n\r\nThe generated controller method looks like the following\r\n\r\n```java\r\n@Post(&quot;/api/auth/login&quot;)\r\n@Produces({})\r\n@Consumes({&quot;application/json&quot;})\r\nHttpResponse&lt;Void&gt; login(\r\n    @Body\r\n    LoginRequest loginRequest\r\n);\r\n```\r\n\r\nIs there a way to obtain the request object in order to have access to the attributes set by a filter? \r\n","title":"Obtaining a request attribute in an OpenAPI-generated controller in Micronaut","body":"<p>I've generated a controller in Micronaut from an OpenAPI spec, but it's missing a way to access to the attributes in the request object. Consider the following OpenAPI spec:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>...\npaths:\n  /api/auth/login:\n    post:\n      tags:\n        - auth\n      summary: User login\n      operationId: login\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              $ref: '#/components/schemas/LoginRequest'\n...\n</code></pre>\n<p>The generated controller method looks like the following</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Post(&quot;/api/auth/login&quot;)\n@Produces({})\n@Consumes({&quot;application/json&quot;})\nHttpResponse&lt;Void&gt; login(\n    @Body\n    LoginRequest loginRequest\n);\n</code></pre>\n<p>Is there a way to obtain the request object in order to have access to the attributes set by a filter?</p>\n"},{"tags":["java","django","session","token","feign"],"owner":{"account_id":29734178,"reputation":1,"user_id":22788096,"display_name":"Tom Siwy "},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698060834,"creation_date":1698057905,"question_id":77344533,"body_markdown":"I have to connect to django web application using feign client.\r\n\r\nFirst, i checked the flow in postman.\r\n\r\n**In postman**\r\n1. I&#39;m using GET on myapp/accounts/login/?next=/ **and retrive csrftoken** as entry Set-Cookie in response headers\r\n\r\n2. I&#39;m using POST on myapp/accounts/login/?next=/ with body as x-www-form-urlencoded\r\n```\r\n&quot;username=login&amp;password=password&amp;csrfmiddlewaretoken=token&amp;next=/&quot;\r\n```\r\n\r\nand **retrive NEW csrftoken and sessionid** as entry in Set-Cookie. The response code is 302 (Found) so it&#39;s working fine\r\n\r\nI need those two cookies to use as request headers with another endpoints\r\n\r\nThe problem is that i cannot reproduce the same in feign client which i have to use\r\n1. The feign response from POST doesn&#39;t have second cookie (sessionId)\r\n2. The csrftoken is not refreshed\r\n   \r\n\r\nI think i was trying almost everything : cookieinterceptor, turning off follow redirects in okhttp client, session interceptor in okhttp\r\n\r\nMy simple code looks like :\r\n\r\n\r\n```\r\npublic class Main {\r\n    private static final String AUTHENTICATION_TEMPLATE = &quot;username=%s&amp;password=%s&amp;csrfmiddlewaretoken=%s&amp;next=/&quot;;\r\n\r\n    public static void main(String[] args) throws IOException {\r\n        RouteClient routeClient = Feign.builder()\r\n                .client(new OkHttpClient())\r\n                .logger(new CustomFeignLogger())\r\n                .logLevel(Logger.Level.FULL)\r\n                .encoder(new JacksonEncoder())\r\n                .decoder(new JacksonDecoder())\r\n                .target(RouteClient.class, DataInput.url);\r\n\r\n        Response getResponse = routeClient.getToken();\r\n\r\n        String cookie = extractCookie(getResponse);\r\n        String token = extractToken(cookie);\r\n\r\n        Response postResponse = routeClient.postDataWithParametersInBody(insertHeaderMap(token),\r\n                insertBody(AUTHENTICATION_TEMPLATE, token));\r\n\r\n        System.out.println(postResponse);\r\n\r\n    }\r\n\r\n    public static String insertBody(String template, String token) {\r\n        return String.format(template, DataInput.username, DataInput.password, token);\r\n    }\r\n\r\n    public static String extractToken(String cookie) {\r\n        return cookie.split(&quot;=&quot;)[1].split(&quot;;&quot;)[0];\r\n    }\r\n\r\n    public static Map&lt;String, String&gt; insertHeaderMap(String token) {\r\n        Map&lt;String, String&gt; map = new LinkedHashMap&lt;&gt;();\r\n        map.put(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;);\r\n        map.put(&quot;Cookie&quot;, &quot;csrftoken=&quot;+token);\r\n        return map;\r\n    }\r\n\r\n    public static String extractCookie(Response response) {\r\n        return new ArrayList&lt;&gt;(response.headers().get(&quot;set-cookie&quot;)).get(0);\r\n    }\r\n}\r\n```\r\n\r\nDoes anybody knows why i am not retriving the second cookie and the first cookie does not refresh?\r\n\r\n\r\nThe similar code for python works well\r\n\r\nand retrives two cookies where the first one is refreshed\r\n\r\n&gt; &lt;RequestsCookieJar [&lt;Cookie csrftoken=ygfcLx...... for ......com/&gt;,  \r\n&gt; &lt;Cookie sessionid=vtvo5cbe2cew... for ....com/&gt;]&gt;\r\n\r\n\r\n","title":"feign client response does not retrive cookie named sessionid while postman does","body":"<p>I have to connect to django web application using feign client.</p>\n<p>First, i checked the flow in postman.</p>\n<p><strong>In postman</strong></p>\n<ol>\n<li><p>I'm using GET on myapp/accounts/login/?next=/ <strong>and retrive csrftoken</strong> as entry Set-Cookie in response headers</p>\n</li>\n<li><p>I'm using POST on myapp/accounts/login/?next=/ with body as x-www-form-urlencoded</p>\n</li>\n</ol>\n<pre><code>&quot;username=login&amp;password=password&amp;csrfmiddlewaretoken=token&amp;next=/&quot;\n</code></pre>\n<p>and <strong>retrive NEW csrftoken and sessionid</strong> as entry in Set-Cookie. The response code is 302 (Found) so it's working fine</p>\n<p>I need those two cookies to use as request headers with another endpoints</p>\n<p>The problem is that i cannot reproduce the same in feign client which i have to use</p>\n<ol>\n<li>The feign response from POST doesn't have second cookie (sessionId)</li>\n<li>The csrftoken is not refreshed</li>\n</ol>\n<p>I think i was trying almost everything : cookieinterceptor, turning off follow redirects in okhttp client, session interceptor in okhttp</p>\n<p>My simple code looks like :</p>\n<pre><code>public class Main {\n    private static final String AUTHENTICATION_TEMPLATE = &quot;username=%s&amp;password=%s&amp;csrfmiddlewaretoken=%s&amp;next=/&quot;;\n\n    public static void main(String[] args) throws IOException {\n        RouteClient routeClient = Feign.builder()\n                .client(new OkHttpClient())\n                .logger(new CustomFeignLogger())\n                .logLevel(Logger.Level.FULL)\n                .encoder(new JacksonEncoder())\n                .decoder(new JacksonDecoder())\n                .target(RouteClient.class, DataInput.url);\n\n        Response getResponse = routeClient.getToken();\n\n        String cookie = extractCookie(getResponse);\n        String token = extractToken(cookie);\n\n        Response postResponse = routeClient.postDataWithParametersInBody(insertHeaderMap(token),\n                insertBody(AUTHENTICATION_TEMPLATE, token));\n\n        System.out.println(postResponse);\n\n    }\n\n    public static String insertBody(String template, String token) {\n        return String.format(template, DataInput.username, DataInput.password, token);\n    }\n\n    public static String extractToken(String cookie) {\n        return cookie.split(&quot;=&quot;)[1].split(&quot;;&quot;)[0];\n    }\n\n    public static Map&lt;String, String&gt; insertHeaderMap(String token) {\n        Map&lt;String, String&gt; map = new LinkedHashMap&lt;&gt;();\n        map.put(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;);\n        map.put(&quot;Cookie&quot;, &quot;csrftoken=&quot;+token);\n        return map;\n    }\n\n    public static String extractCookie(Response response) {\n        return new ArrayList&lt;&gt;(response.headers().get(&quot;set-cookie&quot;)).get(0);\n    }\n}\n</code></pre>\n<p>Does anybody knows why i am not retriving the second cookie and the first cookie does not refresh?</p>\n<p>The similar code for python works well</p>\n<p>and retrives two cookies where the first one is refreshed</p>\n<blockquote>\n<p>&lt;RequestsCookieJar [&lt;Cookie csrftoken=ygfcLx...... for ......com/&gt;,<br />\n&lt;Cookie sessionid=vtvo5cbe2cew... for ....com/&gt;]&gt;</p>\n</blockquote>\n"},{"tags":["java","android","kotlin","storage-access-framework","android-13"],"comments":[{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":1,"creation_date":1698060954,"post_id":77344794,"comment_id":136353114,"body_markdown":"&quot;Should I use the Storage Access Framework (SAF)?&quot; -- IMHO, yes. &quot;I found examples on how to read files from external storage but not how to write to it&quot; -- it is covered in [the documentation](https://developer.android.com/training/data-storage/shared/documents-files#perform-operations). It is also covered in [this free book of mine](https://commonsware.com/Jetpack) and [this free book of mine](https://commonsware.com/AndExplore), among other books and training.","body":"&quot;Should I use the Storage Access Framework (SAF)?&quot; -- IMHO, yes. &quot;I found examples on how to read files from external storage but not how to write to it&quot; -- it is covered in <a href=\"https://developer.android.com/training/data-storage/shared/documents-files#perform-operations\" rel=\"nofollow noreferrer\">the documentation</a>. It is also covered in <a href=\"https://commonsware.com/Jetpack\" rel=\"nofollow noreferrer\">this free book of mine</a> and <a href=\"https://commonsware.com/AndExplore\" rel=\"nofollow noreferrer\">this free book of mine</a>, among other books and training."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1698069744,"post_id":77344794,"comment_id":136354986,"body_markdown":"`However, there isn&#39;t a specific permission for downloading documents, `Indeed there is not and there has never been one.","body":"<code>However, there isn&#39;t a specific permission for downloading documents, </code>Indeed there is not and there has never been one."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1698069856,"post_id":77344794,"comment_id":136355010,"body_markdown":"`noticed that the storage permissions have changed` Indeed you always needed a storage WRITE permission  to create/write files. But not anymore for Android 13+ devices.","body":"<code>noticed that the storage permissions have changed</code> Indeed you always needed a storage WRITE permission  to create/write files. But not anymore for Android 13+ devices."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1698069944,"post_id":77344794,"comment_id":136355034,"body_markdown":"`DownloadManager API to initiate the download.` DownloadManager has never needed a storage WRITE permission to store files on external storage.","body":"<code>DownloadManager API to initiate the download.</code> DownloadManager has never needed a storage WRITE permission to store files on external storage."},{"owner":{"account_id":20566972,"reputation":57,"user_id":15096086,"display_name":"Juan Gil"},"score":0,"creation_date":1698071200,"post_id":77344794,"comment_id":136355353,"body_markdown":"@CommonsWare Yes, I&#39;ve seen the example, but I was a little confused because I had the URL of a file I wanted to download and resultData also has a URI. I assume that the URI in resultData refers to the folder where I want to download my pdf in this case, am I correct?","body":"@CommonsWare Yes, I&#39;ve seen the example, but I was a little confused because I had the URL of a file I wanted to download and resultData also has a URI. I assume that the URI in resultData refers to the folder where I want to download my pdf in this case, am I correct?"},{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1698072471,"post_id":77344794,"comment_id":136355638,"body_markdown":"@JuanGil: No, it represents the file (or equivalent) of where you want to download the PDF.","body":"@JuanGil: No, it represents the file (or equivalent) of where you want to download the PDF."}],"owner":{"account_id":20566972,"reputation":57,"user_id":15096086,"display_name":"Juan Gil"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":148,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1698060652,"creation_date":1698060652,"question_id":77344794,"body_markdown":"My app needs to download PDF bills for customers, and I&#39;m targeting Android 13 for this release. I&#39;ve noticed that the storage permissions have changed, and now there are three new permissions: READ_MEDIA_IMAGES, READ_MEDIA_VIDEO, and READ_MEDIA_AUDIO. However, there isn&#39;t a specific permission for downloading documents, and I&#39;m unsure about the right approach to achieve this.\r\n\r\nShould I use the Storage Access Framework (SAF)? I found examples on how to read files from external storage but not how to write to it.\r\n\r\nHere are some key details about my app:\r\n\r\n - The app&#39;s main activity displays a list of settlements.\r\n - When the user clicks on an item in the list, a custom dialog is\r\n   opened, which provides details about the payroll and a button to\r\n   download the PDF bill.\r\n - The bills are stored in an S3 bucket, and I currently use the\r\n   document URL with the DownloadManager API to initiate the download.","title":"Android 13 - How to save a pdf to external storage?","body":"<p>My app needs to download PDF bills for customers, and I'm targeting Android 13 for this release. I've noticed that the storage permissions have changed, and now there are three new permissions: READ_MEDIA_IMAGES, READ_MEDIA_VIDEO, and READ_MEDIA_AUDIO. However, there isn't a specific permission for downloading documents, and I'm unsure about the right approach to achieve this.</p>\n<p>Should I use the Storage Access Framework (SAF)? I found examples on how to read files from external storage but not how to write to it.</p>\n<p>Here are some key details about my app:</p>\n<ul>\n<li>The app's main activity displays a list of settlements.</li>\n<li>When the user clicks on an item in the list, a custom dialog is\nopened, which provides details about the payroll and a button to\ndownload the PDF bill.</li>\n<li>The bills are stored in an S3 bucket, and I currently use the\ndocument URL with the DownloadManager API to initiate the download.</li>\n</ul>\n"},{"tags":["java","mysql","ssl","jdbc","amazon-rds"],"owner":{"account_id":29732850,"reputation":11,"user_id":22787016,"display_name":"buggrinder"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1698059145,"creation_date":1698059145,"question_id":77344654,"body_markdown":"I am having trouble enabling the SSL/TLS connection between a Java application and a MySQL instance.\r\n\r\nThe following warning message is present in the logs of my Java application:\r\n\r\n```\r\nWARN: Establishing SSL connection without server&#39;s identity verification is not recommended. According to MySQL 5.5.45+, 5.6.26+ and 5.7.6+ requirements SSL connection must be established by default if explicit option isn&#39;t set. For compliance with existing applications not using SSL the verifyServerCertificate property is set to &#39;false&#39;. You need either to explicitly disable SSL by setting useSSL=false, or set useSSL=true and provide truststore for server certificate verification.\r\n```\r\n\r\n**Initial situation:**\r\n\r\nMy MySQL database is hosted on AWS RDS. In the AWS Console, the database&#39;s Certificate Authority is listed as &quot;rds-ca-2019.&quot; According to [AWS documentation](https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/UsingWithRDS.SSL.html), this Certificate Authority provides certificates included in both the regional and global certificate bundles. I&#39;ve utilized both the appropriate regional bundle in .pem format and the corresponding global bundle in .pem format. The application is running on Java 17 and establishes connections using a jdbc URL. The MySQL version is 5.7.42.\r\n\r\n\r\n**Attempt 1:**\r\n\r\nI built the jdbc URL like this:\r\n\r\n```\r\njdbc:mysql://&lt;dns_name&gt;:3306/&lt;db_name&gt;?zeroDateTimeBehavior=convertToNull&amp;amp;autoReconnect=true&amp;amp;useUnicode=yes&amp;amp;characterEncoding=UTF-8&amp;amp;useSSL=true&amp;amp;sslMode=VERIFY_IDENTITY&amp;amp;trustCertificateKeyStoreUrl=file%3A%2Fetc%2Fssl%2Fcerts\r\n```\r\n\r\nas trustCertificateKeyStoreUrl I used the default folder for certificates in Debian systems `/etc/ssl/certs`. There I put the just mentioned bundles and set the permissions with chmod to 644.\r\n\r\n**Attempt 2**\r\n\r\nI created my own truststore.jks with keytool and imported the two official AWS certificate bundles there with keytool as well and adjusted the jdbc URL:\r\n\r\n```\r\njdbc:mysql://&lt;dns_name&gt;:3306/&lt;db_name&gt;?zeroDateTimeBehavior=convertToNull&amp;autoReconnect=true&amp;useUnicode=yes&amp;characterEncoding=UTF-8&amp;useSSL=true&amp;sslMode=VERIFY_IDENTITY&amp;trustCertificateKeyStoreUrl=file%3A%2Fetc%2Fssl%2Fcerts%2Ftruststore.jks&amp;trustCertificateKeyStorePassword=&lt;my_pass&gt;\r\n```\r\n\r\nUnfortunately, that couldn&#39;t solve the problem either and I still get the warning.\r\n\r\n**Attempt 3:**\r\n\r\nI found out that Java has a default truststore, which is apparently used if you don&#39;t specify one in the jdbc URL. It is linked as symbolic link under `/usr/lib/jvm/temurin-17-jdk-amd64/lib/security/cacerts` to `/etc/ssl/certs/adoptium/cacerts`. There I imported again the regional and global certificate bundle with keytool. Still with warning messages...\r\n\r\n**Attempt 4:**\r\n\r\nI enabled SSL debug logs when running the .jar and the logs did not help me:\r\n\r\n```\r\njavax.net.ssl|DEBUG|10|main|2023-10-18 14:12:55.371 CEST|SSLCipher.java:466|jdk.tls.keyLimits:  entry = AES/GCM/NoPadding KeyUpdate 2^37. AES/GCM/NOPADDING:KEYUPDATE = ...\r\njavax.net.ssl|DEBUG|10|main|2023-10-18 14:12:55.381 CEST|SSLCipher.java:466|jdk.tls.keyLimits:  entry =  ChaCha20-Poly1305 KeyUpdate 2^37. CHACHA20-POLY1305:KEYUPDATE = ...\r\njavax.net.ssl|ALL|10|main|2023-10-18 14:12:55.654 CEST|X509Authentication.java:249|No X.509 cert selected for RSA\r\njavax.net.ssl|ALL|10|main|2023-10-18 14:12:55.655 CEST|X509Authentication.java:249|No X.509 cert selected for EC\r\njavax.net.ssl|ALL|10|main|2023-10-18 14:12:55.656 CEST|X509Authentication.java:249|No X.509 cert selected for RSA\r\njavax.net.ssl|ALL|10|main|2023-10-18 14:12:55.657 CEST|X509Authentication.java:249|No X.509 cert selected for EC\r\njavax.net.ssl|ALL|10|main|2023-10-18 14:12:55.657 CEST|X509Authentication.java:249|No X.509 cert selected for RSA\r\njavax.net.ssl|ALL|10|main|2023-10-18 14:12:55.658 CEST|X509Authentication.java:249|No X.509 cert selected for DSA\r\njavax.net.ssl|ALL|10|main|2023-10-18 14:12:55.658 CEST|X509Authentication.java:249|No X.509 cert selected for EC\r\njavax.net.ssl|ALL|10|main|2023-10-18 14:12:55.659 CEST|X509Authentication.java:249|No X.509 cert selected for RSA\r\njavax.net.ssl|ALL|10|main|2023-10-18 14:12:55.659 CEST|X509Authentication.java:249|No X.509 cert selected for DSA\r\njavax.net.ssl|ALL|10|main|2023-10-18 14:12:55.660 CEST|X509Authentication.java:249|No X.509 cert selected for EC\r\njavax.net.ssl|ALL|10|main|2023-10-18 14:12:55.660 CEST|X509Authentication.java:249|No X.509 cert selected for RSA\r\njavax.net.ssl|ALL|10|main|2023-10-18 14:12:55.661 CEST|X509Authentication.java:249|No X.509 cert selected for DSA\r\njavax.net.ssl|ALL|10|main|2023-10-18 14:12:55.661 CEST|X509Authentication.java:249|No X.509 cert selected for EC\r\njavax.net.ssl|ALL|10|main|2023-10-18 14:12:55.810 CEST|SSLSocketImpl.java:1334|Closing output stream\r\njavax.net.ssl|DEBUG|10|main|2023-10-18 14:12:55.811 CEST|SSLSocketImpl.java:577|duplex close of SSLSocket\r\njavax.net.ssl|DEBUG|10|main|2023-10-18 14:12:55.812 CEST|SSLSocketImpl.java:1759|close the underlying socket\r\njavax.net.ssl|DEBUG|10|main|2023-10-18 14:12:55.813 CEST|SSLSocketImpl.java:1785|close the SSL connection (initiative)\r\njavax.net.ssl|DEBUG|10|main|2023-10-18 14:12:55.813 CEST|SSLSocketImpl.java:837|close inbound of SSLSocket\r\njavax.net.ssl|WARNING|10|main|2023-10-18 14:12:55.816 CEST|SSLSocketImpl.java:595|SSLSocket duplex close failed. Debug info only. Exception details: (\r\n&quot;throwable&quot; : {\r\n  java.net.SocketException: Socket is closed\r\n        at java.base/java.net.Socket.shutdownInput(Socket.java:1601)\r\n        at java.base/sun.security.ssl.BaseSSLSocketImpl.shutdownInput(BaseSSLSocketImpl.java:219)\r\n        at java.base/sun.security.ssl.SSLSocketImpl.shutdownInput(SSLSocketImpl.java:853)\r\n        at java.base/sun.security.ssl.SSLSocketImpl.bruteForceCloseInput(SSLSocketImpl.java:802)\r\n        at java.base/sun.security.ssl.SSLSocketImpl.duplexCloseOutput(SSLSocketImpl.java:664)\r\n        at java.base/sun.security.ssl.SSLSocketImpl.close(SSLSocketImpl.java:584)\r\n        at java.base/sun.security.ssl.SSLSocketImpl$AppOutputStream.close(SSLSocketImpl.java:1338)\r\n        at java.base/java.io.FilterOutputStream.close(FilterOutputStream.java:188)\r\n        at org.postgresql.core.PGStream.close(PGStream.java:738)\r\n        at org.postgresql.core.QueryExecutorBase.close(QueryExecutorBase.java:156)\r\n        at org.postgresql.jdbc.PgConnection.close(PgConnection.java:749)\r\n        at com.dtad.dtad_content_indexer.Indexer.initGeoMapper(Indexer.java:130)\r\n        at com.dtad.dtad_content_indexer.Indexer.&lt;init&gt;(Indexer.java:48)\r\n        at com.dtad.dtad_content_indexer.Indexer.main(Indexer.java:56)}\r\n\r\n)\r\njavax.net.ssl|ALL|10|main|2023-10-18 14:12:55.817 CEST|SSLSocketImpl.java:1139|Closing input stream\r\n```\r\n\r\nI hope someone can help me troubleshoot this, as I have already made several attempts that did not work. I&#39;m also not entirely certain whether the issue is related to the truststore or if it&#39;s caused by something else.\r\n\r\nThanks in advance!","title":"Trouble enabling the SSL connection between a Java application and a MySQL instance","body":"<p>I am having trouble enabling the SSL/TLS connection between a Java application and a MySQL instance.</p>\n<p>The following warning message is present in the logs of my Java application:</p>\n<pre><code>WARN: Establishing SSL connection without server's identity verification is not recommended. According to MySQL 5.5.45+, 5.6.26+ and 5.7.6+ requirements SSL connection must be established by default if explicit option isn't set. For compliance with existing applications not using SSL the verifyServerCertificate property is set to 'false'. You need either to explicitly disable SSL by setting useSSL=false, or set useSSL=true and provide truststore for server certificate verification.\n</code></pre>\n<p><strong>Initial situation:</strong></p>\n<p>My MySQL database is hosted on AWS RDS. In the AWS Console, the database's Certificate Authority is listed as &quot;rds-ca-2019.&quot; According to <a href=\"https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/UsingWithRDS.SSL.html\" rel=\"nofollow noreferrer\">AWS documentation</a>, this Certificate Authority provides certificates included in both the regional and global certificate bundles. I've utilized both the appropriate regional bundle in .pem format and the corresponding global bundle in .pem format. The application is running on Java 17 and establishes connections using a jdbc URL. The MySQL version is 5.7.42.</p>\n<p><strong>Attempt 1:</strong></p>\n<p>I built the jdbc URL like this:</p>\n<pre><code>jdbc:mysql://&lt;dns_name&gt;:3306/&lt;db_name&gt;?zeroDateTimeBehavior=convertToNull&amp;amp;autoReconnect=true&amp;amp;useUnicode=yes&amp;amp;characterEncoding=UTF-8&amp;amp;useSSL=true&amp;amp;sslMode=VERIFY_IDENTITY&amp;amp;trustCertificateKeyStoreUrl=file%3A%2Fetc%2Fssl%2Fcerts\n</code></pre>\n<p>as trustCertificateKeyStoreUrl I used the default folder for certificates in Debian systems <code>/etc/ssl/certs</code>. There I put the just mentioned bundles and set the permissions with chmod to 644.</p>\n<p><strong>Attempt 2</strong></p>\n<p>I created my own truststore.jks with keytool and imported the two official AWS certificate bundles there with keytool as well and adjusted the jdbc URL:</p>\n<pre><code>jdbc:mysql://&lt;dns_name&gt;:3306/&lt;db_name&gt;?zeroDateTimeBehavior=convertToNull&amp;autoReconnect=true&amp;useUnicode=yes&amp;characterEncoding=UTF-8&amp;useSSL=true&amp;sslMode=VERIFY_IDENTITY&amp;trustCertificateKeyStoreUrl=file%3A%2Fetc%2Fssl%2Fcerts%2Ftruststore.jks&amp;trustCertificateKeyStorePassword=&lt;my_pass&gt;\n</code></pre>\n<p>Unfortunately, that couldn't solve the problem either and I still get the warning.</p>\n<p><strong>Attempt 3:</strong></p>\n<p>I found out that Java has a default truststore, which is apparently used if you don't specify one in the jdbc URL. It is linked as symbolic link under <code>/usr/lib/jvm/temurin-17-jdk-amd64/lib/security/cacerts</code> to <code>/etc/ssl/certs/adoptium/cacerts</code>. There I imported again the regional and global certificate bundle with keytool. Still with warning messages...</p>\n<p><strong>Attempt 4:</strong></p>\n<p>I enabled SSL debug logs when running the .jar and the logs did not help me:</p>\n<pre><code>javax.net.ssl|DEBUG|10|main|2023-10-18 14:12:55.371 CEST|SSLCipher.java:466|jdk.tls.keyLimits:  entry = AES/GCM/NoPadding KeyUpdate 2^37. AES/GCM/NOPADDING:KEYUPDATE = ...\njavax.net.ssl|DEBUG|10|main|2023-10-18 14:12:55.381 CEST|SSLCipher.java:466|jdk.tls.keyLimits:  entry =  ChaCha20-Poly1305 KeyUpdate 2^37. CHACHA20-POLY1305:KEYUPDATE = ...\njavax.net.ssl|ALL|10|main|2023-10-18 14:12:55.654 CEST|X509Authentication.java:249|No X.509 cert selected for RSA\njavax.net.ssl|ALL|10|main|2023-10-18 14:12:55.655 CEST|X509Authentication.java:249|No X.509 cert selected for EC\njavax.net.ssl|ALL|10|main|2023-10-18 14:12:55.656 CEST|X509Authentication.java:249|No X.509 cert selected for RSA\njavax.net.ssl|ALL|10|main|2023-10-18 14:12:55.657 CEST|X509Authentication.java:249|No X.509 cert selected for EC\njavax.net.ssl|ALL|10|main|2023-10-18 14:12:55.657 CEST|X509Authentication.java:249|No X.509 cert selected for RSA\njavax.net.ssl|ALL|10|main|2023-10-18 14:12:55.658 CEST|X509Authentication.java:249|No X.509 cert selected for DSA\njavax.net.ssl|ALL|10|main|2023-10-18 14:12:55.658 CEST|X509Authentication.java:249|No X.509 cert selected for EC\njavax.net.ssl|ALL|10|main|2023-10-18 14:12:55.659 CEST|X509Authentication.java:249|No X.509 cert selected for RSA\njavax.net.ssl|ALL|10|main|2023-10-18 14:12:55.659 CEST|X509Authentication.java:249|No X.509 cert selected for DSA\njavax.net.ssl|ALL|10|main|2023-10-18 14:12:55.660 CEST|X509Authentication.java:249|No X.509 cert selected for EC\njavax.net.ssl|ALL|10|main|2023-10-18 14:12:55.660 CEST|X509Authentication.java:249|No X.509 cert selected for RSA\njavax.net.ssl|ALL|10|main|2023-10-18 14:12:55.661 CEST|X509Authentication.java:249|No X.509 cert selected for DSA\njavax.net.ssl|ALL|10|main|2023-10-18 14:12:55.661 CEST|X509Authentication.java:249|No X.509 cert selected for EC\njavax.net.ssl|ALL|10|main|2023-10-18 14:12:55.810 CEST|SSLSocketImpl.java:1334|Closing output stream\njavax.net.ssl|DEBUG|10|main|2023-10-18 14:12:55.811 CEST|SSLSocketImpl.java:577|duplex close of SSLSocket\njavax.net.ssl|DEBUG|10|main|2023-10-18 14:12:55.812 CEST|SSLSocketImpl.java:1759|close the underlying socket\njavax.net.ssl|DEBUG|10|main|2023-10-18 14:12:55.813 CEST|SSLSocketImpl.java:1785|close the SSL connection (initiative)\njavax.net.ssl|DEBUG|10|main|2023-10-18 14:12:55.813 CEST|SSLSocketImpl.java:837|close inbound of SSLSocket\njavax.net.ssl|WARNING|10|main|2023-10-18 14:12:55.816 CEST|SSLSocketImpl.java:595|SSLSocket duplex close failed. Debug info only. Exception details: (\n&quot;throwable&quot; : {\n  java.net.SocketException: Socket is closed\n        at java.base/java.net.Socket.shutdownInput(Socket.java:1601)\n        at java.base/sun.security.ssl.BaseSSLSocketImpl.shutdownInput(BaseSSLSocketImpl.java:219)\n        at java.base/sun.security.ssl.SSLSocketImpl.shutdownInput(SSLSocketImpl.java:853)\n        at java.base/sun.security.ssl.SSLSocketImpl.bruteForceCloseInput(SSLSocketImpl.java:802)\n        at java.base/sun.security.ssl.SSLSocketImpl.duplexCloseOutput(SSLSocketImpl.java:664)\n        at java.base/sun.security.ssl.SSLSocketImpl.close(SSLSocketImpl.java:584)\n        at java.base/sun.security.ssl.SSLSocketImpl$AppOutputStream.close(SSLSocketImpl.java:1338)\n        at java.base/java.io.FilterOutputStream.close(FilterOutputStream.java:188)\n        at org.postgresql.core.PGStream.close(PGStream.java:738)\n        at org.postgresql.core.QueryExecutorBase.close(QueryExecutorBase.java:156)\n        at org.postgresql.jdbc.PgConnection.close(PgConnection.java:749)\n        at com.dtad.dtad_content_indexer.Indexer.initGeoMapper(Indexer.java:130)\n        at com.dtad.dtad_content_indexer.Indexer.&lt;init&gt;(Indexer.java:48)\n        at com.dtad.dtad_content_indexer.Indexer.main(Indexer.java:56)}\n\n)\njavax.net.ssl|ALL|10|main|2023-10-18 14:12:55.817 CEST|SSLSocketImpl.java:1139|Closing input stream\n</code></pre>\n<p>I hope someone can help me troubleshoot this, as I have already made several attempts that did not work. I'm also not entirely certain whether the issue is related to the truststore or if it's caused by something else.</p>\n<p>Thanks in advance!</p>\n"},{"tags":["java","spring","spring-security","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":4431041,"reputation":9073,"user_id":3608192,"display_name":"Stefan Isele - prefabware.com"},"down_vote_count":3,"up_vote_count":1,"is_accepted":false,"score":-2,"last_activity_date":1698058922,"creation_date":1461513682,"answer_id":36825557,"question_id":36824973,"body_markdown":"The class SecurityMockMvcConfigurers is included in\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n    &lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;4.2.1.RELEASE&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nIn other releases SecurityMockMvcConfigurers may not exist.\r\n\r\nHowever there is a class MockMvcConfigurer, may be you can work with this instead ?\r\n\r\n\r\n**regarding : but this dependency does not contain the corresponding class.** \r\n\r\nYes you are right that class is not inluded in the jar.\r\nSo I think you have to use what is there.\r\nAnyway, the class is rather simple and the sourcecode is here :\r\n[SecurityMockMvcConfigurers][1]\r\n\r\nJust copy the code in your own class and you are done.\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-security/blob/master/test/src/main/java/org/springframework/security/test/web/servlet/setup/SecurityMockMvcConfigurers.java","title":"Can&#39;t find SecurityMockMvcConfigurers","body":"<p>The class SecurityMockMvcConfigurers is included in</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n    &lt;version&gt;4.2.1.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>In other releases SecurityMockMvcConfigurers may not exist.</p>\n<p>However there is a class MockMvcConfigurer, may be you can work with this instead ?</p>\n<p><strong>regarding : but this dependency does not contain the corresponding class.</strong></p>\n<p>Yes you are right that class is not inluded in the jar.\nSo I think you have to use what is there.\nAnyway, the class is rather simple and the sourcecode is here :\n<a href=\"https://github.com/spring-projects/spring-security/blob/master/test/src/main/java/org/springframework/security/test/web/servlet/setup/SecurityMockMvcConfigurers.java\" rel=\"nofollow noreferrer\">SecurityMockMvcConfigurers</a></p>\n<p>Just copy the code in your own class and you are done.</p>\n"},{"tags":[],"owner":{"account_id":5636066,"reputation":6620,"user_id":4461537,"accept_rate":89,"display_name":"Ren&#233; Winkler"},"down_vote_count":0,"up_vote_count":44,"is_accepted":true,"score":44,"last_activity_date":1461517730,"creation_date":1461517730,"answer_id":36826311,"question_id":36824973,"body_markdown":"The missing dependency was:\r\n\r\n    &lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;4.0.4.RELEASE&lt;/version&gt;\r\n\t&lt;/dependency&gt;","title":"Can&#39;t find SecurityMockMvcConfigurers","body":"<p>The missing dependency was:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n    &lt;version&gt;4.0.4.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":100270,"reputation":127154,"user_id":270371,"accept_rate":33,"display_name":"davidxxx"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1512852439,"creation_date":1512852122,"answer_id":47732984,"question_id":36824973,"body_markdown":"The required dependency for the `org.springframework.security.test.web.servlet.setup.SecurityMockMvcConfigurers` class is the `org.springframework.security:spring-security-test` dependency.&lt;br&gt;\r\n\r\nThe question is tagged Spring Boot and Spring Boot provides the dependency as a managed dependency in the `spring-boot-starter-parent` pom.&lt;br&gt;\r\nYour pom inherits very probably from `spring-boot-starter-parent`.&lt;br&gt;\r\nSo above all don&#39;t specify a version without a very good reason and use simply the version inherited from the parent.&lt;br&gt;\r\nThat is enough :\r\n\r\n\t&lt;dependencies&gt; \r\n         ...\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\t\t\t\r\n\t\t&lt;/dependency&gt;\r\n         ...\r\n\t&lt;dependencies&gt; \r\n\r\nFor example with Spring Boot 2.0.0.M5, the managed version is \r\n\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\r\n        &lt;version&gt;5.0.0.M5&lt;/version&gt;\r\n      &lt;/dependency&gt;\r\n\r\nThe `M5` is not just chance.&lt;br&gt;\r\nThese are designed to work &quot;better&quot; together.&lt;br&gt;\r\n\r\nNote that `org.springframework.boot:spring-boot-starter-test` dependency doesn&#39;t pull the `spring-security-test` dependency.\r\n\r\nIn case you don&#39;t use Spring Boot, you should endeavor to specify a `spring-security-test` version conform to the Core Spring version used by the application.","title":"Can&#39;t find SecurityMockMvcConfigurers","body":"<p>The required dependency for the <code>org.springframework.security.test.web.servlet.setup.SecurityMockMvcConfigurers</code> class is the <code>org.springframework.security:spring-security-test</code> dependency.<br></p>\n\n<p>The question is tagged Spring Boot and Spring Boot provides the dependency as a managed dependency in the <code>spring-boot-starter-parent</code> pom.<br>\nYour pom inherits very probably from <code>spring-boot-starter-parent</code>.<br>\nSo above all don't specify a version without a very good reason and use simply the version inherited from the parent.<br>\nThat is enough :</p>\n\n<pre><code>&lt;dependencies&gt; \n     ...\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;         \n    &lt;/dependency&gt;\n     ...\n&lt;dependencies&gt; \n</code></pre>\n\n<p>For example with Spring Boot 2.0.0.M5, the managed version is </p>\n\n<pre><code>  &lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n    &lt;version&gt;5.0.0.M5&lt;/version&gt;\n  &lt;/dependency&gt;\n</code></pre>\n\n<p>The <code>M5</code> is not just chance.<br>\nThese are designed to work \"better\" together.<br></p>\n\n<p>Note that <code>org.springframework.boot:spring-boot-starter-test</code> dependency doesn't pull the <code>spring-security-test</code> dependency.</p>\n\n<p>In case you don't use Spring Boot, you should endeavor to specify a <code>spring-security-test</code> version conform to the Core Spring version used by the application.</p>\n"}],"owner":{"account_id":5636066,"reputation":6620,"user_id":4461537,"accept_rate":89,"display_name":"Ren&#233; Winkler"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14051,"favorite_count":0,"down_vote_count":0,"up_vote_count":22,"accepted_answer_id":36826311,"answer_count":3,"score":22,"last_activity_date":1698058922,"creation_date":1461510870,"question_id":36824973,"body_markdown":"I&#39;am trying to write a spring security test as described here http://docs.spring.io/spring-security/site/docs/4.0.x/reference/htmlsingle/#test-mockmvc-setup. I need to import `SecurityMockMvcConfigurers` as a static import, but my IDE does not find the class.\r\n\r\nMy pom.xml looks as follows:\r\n\r\n    &lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;1.4.0.M2&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n\t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\nSpring Boot 1.4.0.M2 imports Spring Security 4.0.4.RELEASE. I&#39; can&#39;t find the class in this release. Which additional dependency do I need? Or what else I haven&#39;t considered?","title":"Can&#39;t find SecurityMockMvcConfigurers","body":"<p>I'am trying to write a spring security test as described here <a href=\"http://docs.spring.io/spring-security/site/docs/4.0.x/reference/htmlsingle/#test-mockmvc-setup\" rel=\"noreferrer\">http://docs.spring.io/spring-security/site/docs/4.0.x/reference/htmlsingle/#test-mockmvc-setup</a>. I need to import <code>SecurityMockMvcConfigurers</code> as a static import, but my IDE does not find the class.</p>\n\n<p>My pom.xml looks as follows:</p>\n\n<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;1.4.0.M2&lt;/version&gt;\n    &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n&lt;/parent&gt;\n\n&lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;java.version&gt;1.8&lt;/java.version&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n\n<p>Spring Boot 1.4.0.M2 imports Spring Security 4.0.4.RELEASE. I' can't find the class in this release. Which additional dependency do I need? Or what else I haven't considered?</p>\n"},{"tags":["java","sql"],"comments":[{"owner":{"display_name":"user180100"},"score":0,"creation_date":1382680450,"post_id":19581950,"comment_id":29062578,"body_markdown":"The procedure is named `SaveLabourDetailsHead` and you call `SaveLabourWageDetails`, that might be the problem.","body":"The procedure is named <code>SaveLabourDetailsHead</code> and you call <code>SaveLabourWageDetails</code>, that might be the problem."},{"owner":{"account_id":220462,"reputation":177831,"user_id":477878,"display_name":"Joachim Isaksson"},"score":0,"creation_date":1382680841,"post_id":19581950,"comment_id":29062727,"body_markdown":"Shouldn&#39;t that be `{? = CALL SaveLabourDetailsHead(?)}`","body":"Shouldn&#39;t that be <code>{? = CALL SaveLabourDetailsHead(?)}</code>"},{"owner":{"account_id":1217010,"reputation":249,"user_id":1184391,"accept_rate":50,"display_name":"Abdul Razak"},"score":0,"creation_date":1382680915,"post_id":19581950,"comment_id":29062746,"body_markdown":"I made a simple mistake.. and spoiled lot of time.. thanks alot","body":"I made a simple mistake.. and spoiled lot of time.. thanks alot"}],"answers":[{"tags":[],"owner":{"account_id":2931887,"reputation":8248,"user_id":2511915,"accept_rate":85,"display_name":"Dark Knight"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1382680349,"creation_date":1382680349,"answer_id":19582055,"question_id":19581950,"body_markdown":"Your out parameter is of type String, but it should be int. Try this out.\r\n\r\n    int lastIsertId=cs.getInt(2);","title":"java.sql.SQLException: Parameter number 2 is not an OUT parameter","body":"<p>Your out parameter is of type String, but it should be int. Try this out.</p>\n\n<pre><code>int lastIsertId=cs.getInt(2);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1021804,"reputation":12875,"user_id":1031945,"accept_rate":83,"display_name":"Aniket Kulkarni"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1382681365,"creation_date":1382681365,"answer_id":19582291,"question_id":19581950,"body_markdown":"You are calling wrong procedure. You have procedure `SaveLabourDetailsHead` and you are calling  \r\n\r\n    1. cs = getCon1().prepareCall(&quot;{CALL SaveLabourWageDetails(?,?)}&quot;);  \r\n                                             ↑  \r\nChange to,\r\n\r\n    1. cs = getCon1().prepareCall(&quot;{CALL SaveLabourDetailsHead(?)}&quot;);  \r\nSet String parameter `wage_entered_by`.","title":"java.sql.SQLException: Parameter number 2 is not an OUT parameter","body":"<p>You are calling wrong procedure. You have procedure <code>SaveLabourDetailsHead</code> and you are calling  </p>\n\n<pre><code>1. cs = getCon1().prepareCall(\"{CALL SaveLabourWageDetails(?,?)}\");  \n                                         ↑  \n</code></pre>\n\n<p>Change to,</p>\n\n<pre><code>1. cs = getCon1().prepareCall(\"{CALL SaveLabourDetailsHead(?)}\");  \n</code></pre>\n\n<p>Set String parameter <code>wage_entered_by</code>.</p>\n"},{"tags":[],"owner":{"account_id":9751327,"reputation":167,"user_id":7467860,"display_name":"Sahil Garg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582804266,"creation_date":1582802371,"answer_id":60432089,"question_id":19581950,"body_markdown":"I had the same problem but the output exception is misleading as the root cause was the procedure name. \r\n\r\nI typed incorrect procedure which did not exist in database. \r\n\r\nInstead of providing a SQL exception something like &quot;routine does not exist&quot;, it gave:\r\n```\r\njava.sql.SQLException: Parameter number 2 is not an OUT parameter.\r\n```\r\n ","title":"java.sql.SQLException: Parameter number 2 is not an OUT parameter","body":"<p>I had the same problem but the output exception is misleading as the root cause was the procedure name. </p>\n\n<p>I typed incorrect procedure which did not exist in database. </p>\n\n<p>Instead of providing a SQL exception something like \"routine does not exist\", it gave:</p>\n\n<pre><code>java.sql.SQLException: Parameter number 2 is not an OUT parameter.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3231606,"reputation":173,"user_id":2726733,"display_name":"hertg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1593088481,"creation_date":1593088481,"answer_id":62575470,"question_id":19581950,"body_markdown":"Just had the same problem.\r\n\r\nIt was a permission issue in my case. The MySQL user my application uses lacked the `EXECUTE` permission on the schema I&#39;m working on.\r\n\r\n```sql\r\nGRANT EXECUTE ON &lt;your_schema&gt;.* TO &#39;&lt;your_user&gt;&#39;@&#39;localhost&#39;;\r\nFLUSH PRIVILEGES;\r\n```","title":"java.sql.SQLException: Parameter number 2 is not an OUT parameter","body":"<p>Just had the same problem.</p>\n<p>It was a permission issue in my case. The MySQL user my application uses lacked the <code>EXECUTE</code> permission on the schema I'm working on.</p>\n<pre class=\"lang-sql prettyprint-override\"><code>GRANT EXECUTE ON &lt;your_schema&gt;.* TO '&lt;your_user&gt;'@'localhost';\nFLUSH PRIVILEGES;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4173774,"reputation":36,"user_id":3420908,"display_name":"Yowser"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698058370,"creation_date":1698058370,"answer_id":77344578,"question_id":19581950,"body_markdown":"I was chasing this for ages, then found out I&#39;d missed and underscore from the name of the stored procedure! I didn&#39;t even have a procedure with the incorrect name.\r\n\r\nWhat a stupid error message!\r\n\r\n&quot;The parameter is wrong - ooh, by the way, that procedure doesn&#39;t exist&quot;","title":"java.sql.SQLException: Parameter number 2 is not an OUT parameter","body":"<p>I was chasing this for ages, then found out I'd missed and underscore from the name of the stored procedure! I didn't even have a procedure with the incorrect name.</p>\n<p>What a stupid error message!</p>\n<p>&quot;The parameter is wrong - ooh, by the way, that procedure doesn't exist&quot;</p>\n"}],"owner":{"account_id":1217010,"reputation":249,"user_id":1184391,"accept_rate":50,"display_name":"Abdul Razak"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12687,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":19582291,"answer_count":5,"score":0,"last_activity_date":1698058370,"creation_date":1382679864,"question_id":19581950,"body_markdown":"I am getting an Error while running this:\r\n\r\n    1. cs = getCon1().prepareCall(&quot;{CALL SaveLabourWageDetails(?,?)}&quot;);\r\n    \r\n    2. cs.setString(1, user.getUserId());\r\n\r\n    3. cs.registerOutParameter(2, java.sql.Types.INTEGER); //&lt;--- ERROR at this line\r\n    \r\n    4. cs.execute();\r\n    \r\n    5. String lastIsertId=cs.getString(2);\r\n\r\n\r\nThe  Stored Procedure is :\r\n\r\n\r\n    CREATE\r\n    \r\n        PROCEDURE `cheque_alert`.`SaveLabourDetailsHead`(IN wage_entered_by VARCHAR(10),OUT LastInsertId INT)\r\n        \r\n        BEGIN\r\n    \tINSERT INTO `cheque_alert`.`labour_wage_head`\r\n                (\r\n                 `wage_entered_by`,\r\n                 `entered_date_time`)\r\n    \tVALUES (wage_entered_by,\r\n             NOW());\r\n              \r\n              SELECT LAST_INSERT_ID() INTO LastInsertId;\r\n    \r\n        END$$\r\n    \r\n    DELIMITER ;\r\n\r\nPlease point out the problem in this code..","title":"java.sql.SQLException: Parameter number 2 is not an OUT parameter","body":"<p>I am getting an Error while running this:</p>\n\n<pre><code>1. cs = getCon1().prepareCall(\"{CALL SaveLabourWageDetails(?,?)}\");\n\n2. cs.setString(1, user.getUserId());\n\n3. cs.registerOutParameter(2, java.sql.Types.INTEGER); //&lt;--- ERROR at this line\n\n4. cs.execute();\n\n5. String lastIsertId=cs.getString(2);\n</code></pre>\n\n<p>The  Stored Procedure is :</p>\n\n<pre><code>CREATE\n\n    PROCEDURE `cheque_alert`.`SaveLabourDetailsHead`(IN wage_entered_by VARCHAR(10),OUT LastInsertId INT)\n\n    BEGIN\n    INSERT INTO `cheque_alert`.`labour_wage_head`\n            (\n             `wage_entered_by`,\n             `entered_date_time`)\n    VALUES (wage_entered_by,\n         NOW());\n\n          SELECT LAST_INSERT_ID() INTO LastInsertId;\n\n    END$$\n\nDELIMITER ;\n</code></pre>\n\n<p>Please point out the problem in this code..</p>\n"},{"tags":["java","jpa","criteria-api","findbugs"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1505227358,"post_id":46178630,"comment_id":79321221,"body_markdown":"You could add a `setter` for the field.","body":"You could add a <code>setter</code> for the field."},{"owner":{"account_id":2472947,"reputation":3401,"user_id":2154300,"accept_rate":94,"display_name":"bish"},"score":1,"creation_date":1505283326,"post_id":46178630,"comment_id":79342295,"body_markdown":"@StephenC the metamodel classes are generated within each build and their attributs are `static`","body":"@StephenC the metamodel classes are generated within each build and their attributs are <code>static</code>"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1505283896,"post_id":46178630,"comment_id":79342557,"body_markdown":"You can implement a getter for a `static`.  This doesn&#39;t need to be &quot;good style&quot; :-)","body":"You can implement a getter for a <code>static</code>.  This doesn&#39;t need to be &quot;good style&quot; :-)"}],"answers":[{"tags":[],"owner":{"account_id":3969760,"reputation":342,"user_id":3274644,"display_name":"Anand Mattikopp"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1505227388,"creation_date":1505227388,"answer_id":46179374,"question_id":46178630,"body_markdown":"Possible duplicate of https://stackoverflow.com/questions/14503001/how-to-suppress-findbugs-warnings-for-fields-or-local-variables.\r\n\r\nYou can extract a method and apply method level @SuppressFBWarnings to that method. ","title":"FindBugs: How to avoid &quot;Unwritten public field&quot; warning when using JPA meta model?","body":"<p>Possible duplicate of <a href=\"https://stackoverflow.com/questions/14503001/how-to-suppress-findbugs-warnings-for-fields-or-local-variables\">How to suppress FindBugs warnings for fields or local variables</a>.</p>\n\n<p>You can extract a method and apply method level @SuppressFBWarnings to that method. </p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1648809585,"creation_date":1505283958,"answer_id":46190249,"question_id":46178630,"body_markdown":"Here are some ideas:\r\n\r\n  - Modify the generator to add a (redundant) setter&lt;sup&gt;1&lt;/sup&gt;.\r\n  - Implement a FindBugs filter (see http://findbugs.sourceforge.net/manual/filter.html) to exclude that specific bug in specific classes or packages.  Or generally.\r\n\r\n----------------\r\n\r\n&lt;sup&gt;1 - The setter could potentially be declared as `private`.  There is a good chance that FindBugs doesn&#39;t check that the setter is called.&lt;/sup&gt;","title":"FindBugs: How to avoid &quot;Unwritten public field&quot; warning when using JPA meta model?","body":"<p>Here are some ideas:</p>\n<ul>\n<li>Modify the generator to add a (redundant) setter<sup>1</sup>.</li>\n<li>Implement a FindBugs filter (see <a href=\"http://findbugs.sourceforge.net/manual/filter.html\" rel=\"nofollow noreferrer\">http://findbugs.sourceforge.net/manual/filter.html</a>) to exclude that specific bug in specific classes or packages.  Or generally.</li>\n</ul>\n<hr />\n<p><sup>1 - The setter could potentially be declared as <code>private</code>.  There is a good chance that FindBugs doesn't check that the setter is called.</sup></p>\n"},{"tags":[],"owner":{"account_id":4066076,"reputation":2498,"user_id":3340968,"accept_rate":43,"display_name":"Yasir Shabbir Choudhary"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1563264605,"creation_date":1563264605,"answer_id":57052797,"question_id":46178630,"body_markdown":"You can add the Setter of these fields, then it&#39;s able to remove the FindBugs error message","title":"FindBugs: How to avoid &quot;Unwritten public field&quot; warning when using JPA meta model?","body":"<p>You can add the Setter of these fields, then it's able to remove the FindBugs error message</p>\n"},{"tags":[],"owner":{"account_id":449256,"reputation":2122,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698058344,"creation_date":1685888673,"answer_id":76400859,"question_id":46178630,"body_markdown":"This is the code marking the violation: \r\n\r\nhttps://github.com/spotbugs/spotbugs/blob/267af9fe850a7637252a748f7ce3483fab80968c/spotbugs/src/main/java/edu/umd/cs/findbugs/detect/UnreadFields.java#L1000\r\n\r\nAfter reading the code there are two suggestions:\r\n\r\n1. Add a `@NotNull` to the field (This way the field find its way into the collection `writtenNonNullFields` and the violation is ignored).\r\n\r\n2. A bad idea (but possible from the source) to place a native method in the dto class (`native void hi();`). But I do strongly not recommend that.\r\n\r\nFrom the comments:\r\n\r\nSuggestion **2** is a bad idea because:\r\n\r\n&gt; The native hack is relying on implementation specific behavior. The JLS states: &quot;Additionally, an UnsatisfiedLinkError, a subclass of LinkageError, may be thrown if a class declares a native method for which no implementation can be found. The error will occur if the method is used, or earlier, depending on what kind of resolution strategy is being used by an implementation of the Java Virtual Machine (&#167;12.3).&quot;. &quot;Earlier&quot; could mean when the &quot;class&quot; is initialized ... which could be problematic if the native method has no native implementation at that time. (StephenC)\r\n\r\nI tried both and both works fine (Suggestion 2 only in my current jvm).","title":"FindBugs: How to avoid &quot;Unwritten public field&quot; warning when using JPA meta model?","body":"<p>This is the code marking the violation:</p>\n<p><a href=\"https://github.com/spotbugs/spotbugs/blob/267af9fe850a7637252a748f7ce3483fab80968c/spotbugs/src/main/java/edu/umd/cs/findbugs/detect/UnreadFields.java#L1000\" rel=\"nofollow noreferrer\">https://github.com/spotbugs/spotbugs/blob/267af9fe850a7637252a748f7ce3483fab80968c/spotbugs/src/main/java/edu/umd/cs/findbugs/detect/UnreadFields.java#L1000</a></p>\n<p>After reading the code there are two suggestions:</p>\n<ol>\n<li><p>Add a <code>@NotNull</code> to the field (This way the field find its way into the collection <code>writtenNonNullFields</code> and the violation is ignored).</p>\n</li>\n<li><p>A bad idea (but possible from the source) to place a native method in the dto class (<code>native void hi();</code>). But I do strongly not recommend that.</p>\n</li>\n</ol>\n<p>From the comments:</p>\n<p>Suggestion <strong>2</strong> is a bad idea because:</p>\n<blockquote>\n<p>The native hack is relying on implementation specific behavior. The JLS states: &quot;Additionally, an UnsatisfiedLinkError, a subclass of LinkageError, may be thrown if a class declares a native method for which no implementation can be found. The error will occur if the method is used, or earlier, depending on what kind of resolution strategy is being used by an implementation of the Java Virtual Machine (§12.3).&quot;. &quot;Earlier&quot; could mean when the &quot;class&quot; is initialized ... which could be problematic if the native method has no native implementation at that time. (StephenC)</p>\n</blockquote>\n<p>I tried both and both works fine (Suggestion 2 only in my current jvm).</p>\n"},{"tags":[],"owner":{"account_id":11669572,"reputation":1,"user_id":8545149,"display_name":"sirKrono"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697697334,"creation_date":1697697082,"answer_id":77321436,"question_id":46178630,"body_markdown":"Try using upper case field names in criteria rules, i.e. root.get(EntityA_.**ENTITY_B**).\r\n\r\nIt solved my problem with find bugs warning. \r\nHope it also be of any help for you.","title":"FindBugs: How to avoid &quot;Unwritten public field&quot; warning when using JPA meta model?","body":"<p>Try using upper case field names in criteria rules, i.e. root.get(EntityA_.<strong>ENTITY_B</strong>).</p>\n<p>It solved my problem with find bugs warning.\nHope it also be of any help for you.</p>\n"}],"owner":{"account_id":2472947,"reputation":3401,"user_id":2154300,"accept_rate":94,"display_name":"bish"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17372,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":46190249,"answer_count":5,"score":4,"last_activity_date":1698058344,"creation_date":1505225291,"question_id":46178630,"body_markdown":"I&#39;ve written quite a lot of DAO class and using the `JPA criteria API` and its meta model in them, like in this example:\r\n\r\n    @Override\r\n    public EntityA findByEntityB(EntityB entityB) {\r\n      CriteriaBuilder builder = this.getCriteriaBuilder();\r\n      CriteriaQuery&lt;EntityA&gt; criteriaQuery = builder.createQuery(EntityA.class);\r\n      Root&lt;EntityA&gt; root = criteriaQuery.from(EntityA.class);\r\n      criteriaQuery.select(root);\r\n      criteriaQuery.where(builder.and(builder.equal(root.get(EntityA_.entityB), entityB)));\r\n      return this.findByCriteriaQuery(criteriaQuery);\r\n    }\r\n\r\nWhile running static code analysis, `FindBugs` throws the following warning:\r\n\r\n\r\n&gt; UWF_UNWRITTEN_PUBLIC_OR_PROTECTED_FIELD, Priorit&#228;t: Normal\r\n&gt;\r\n&gt; Unwritten public or protected field: EntityA_.entityB\r\n&gt; \r\n&gt; No writes were seen to this public/protected field.  All reads of it will return the default value. Check for errors (should it have been initialized?), or remove it if it is useless.\r\n\r\nAs I use the meta model classes in nearly all of my queries this warning is thrown very often.\r\n\r\nIs there any useful way to avoid these warnings? As we all know the meta model classes are just generated and their attributs are never written.\r\n\r\n**I don&#39;t want to exclude the DAO classes from FindBugs sca** as I want to check these to maybe find other possible bugs!\r\n\r\n","title":"FindBugs: How to avoid &quot;Unwritten public field&quot; warning when using JPA meta model?","body":"<p>I've written quite a lot of DAO class and using the <code>JPA criteria API</code> and its meta model in them, like in this example:</p>\n\n<pre><code>@Override\npublic EntityA findByEntityB(EntityB entityB) {\n  CriteriaBuilder builder = this.getCriteriaBuilder();\n  CriteriaQuery&lt;EntityA&gt; criteriaQuery = builder.createQuery(EntityA.class);\n  Root&lt;EntityA&gt; root = criteriaQuery.from(EntityA.class);\n  criteriaQuery.select(root);\n  criteriaQuery.where(builder.and(builder.equal(root.get(EntityA_.entityB), entityB)));\n  return this.findByCriteriaQuery(criteriaQuery);\n}\n</code></pre>\n\n<p>While running static code analysis, <code>FindBugs</code> throws the following warning:</p>\n\n<blockquote>\n  <p>UWF_UNWRITTEN_PUBLIC_OR_PROTECTED_FIELD, Priorität: Normal</p>\n  \n  <p>Unwritten public or protected field: EntityA_.entityB</p>\n  \n  <p>No writes were seen to this public/protected field.  All reads of it will return the default value. Check for errors (should it have been initialized?), or remove it if it is useless.</p>\n</blockquote>\n\n<p>As I use the meta model classes in nearly all of my queries this warning is thrown very often.</p>\n\n<p>Is there any useful way to avoid these warnings? As we all know the meta model classes are just generated and their attributs are never written.</p>\n\n<p><strong>I don't want to exclude the DAO classes from FindBugs sca</strong> as I want to check these to maybe find other possible bugs!</p>\n"},{"tags":["java","docker","alpine-linux","jlink","corretto"],"answers":[{"tags":[],"owner":{"account_id":350117,"reputation":8653,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1698050962,"creation_date":1698050093,"answer_id":77343744,"question_id":77343684,"body_markdown":"On Linux `jlink` needs a tool called `objcopy` that is not present in Alpine but can be installed with:\r\n\r\n    apk add --no-cache binutils\r\n\r\nAlso note that `--compress=2` is deprecated in Java 21 after [JDK-8293667][1].  This fact is not reported yet in the [official documentation][2] but is present in the help page that says:\r\n\r\n```lang-none\r\n--compress &lt;compress&gt;         Compression to use in compressing resources:\r\n                              Accepted values are:\r\n                              zip-[0-9], where zip-0 provides no compression,\r\n                              and zip-9 provides the best compression.\r\n                              Default is zip-6.\r\n                              Deprecated values to be removed in a future release:\r\n                              0:  No compression. Equivalent to zip-0.\r\n                              1:  Constant String Sharing\r\n                              2:  Equivalent to zip-6.\r\n```\r\nso in Java 21+ you should use `--compress=zip-6` or `--compress=zip-9`.\r\n\r\nHowever I want to emphasize that an unofficial Alpine-based JRE-only image of Amazon Corretto already exists as [amazoncorretto-jre][3] so you could reduce your effort using it.  It is much smaller than other official JRE images and I use it in production.\r\n\r\n\r\n  [1]: https://bugs.openjdk.org/browse/JDK-8293667\r\n  [2]: https://docs.oracle.com/en/java/javase/21/docs/specs/man/jlink.html#jlink-options\r\n  [3]: https://hub.docker.com/r/pnavato/amazoncorretto-jre","title":"How to create an Alpine-based JRE-only Docker image of Amazon Corretto?","body":"<p>On Linux <code>jlink</code> needs a tool called <code>objcopy</code> that is not present in Alpine but can be installed with:</p>\n<pre><code>apk add --no-cache binutils\n</code></pre>\n<p>Also note that <code>--compress=2</code> is deprecated in Java 21 after <a href=\"https://bugs.openjdk.org/browse/JDK-8293667\" rel=\"nofollow noreferrer\">JDK-8293667</a>.  This fact is not reported yet in the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/specs/man/jlink.html#jlink-options\" rel=\"nofollow noreferrer\">official documentation</a> but is present in the help page that says:</p>\n<pre class=\"lang-none prettyprint-override\"><code>--compress &lt;compress&gt;         Compression to use in compressing resources:\n                              Accepted values are:\n                              zip-[0-9], where zip-0 provides no compression,\n                              and zip-9 provides the best compression.\n                              Default is zip-6.\n                              Deprecated values to be removed in a future release:\n                              0:  No compression. Equivalent to zip-0.\n                              1:  Constant String Sharing\n                              2:  Equivalent to zip-6.\n</code></pre>\n<p>so in Java 21+ you should use <code>--compress=zip-6</code> or <code>--compress=zip-9</code>.</p>\n<p>However I want to emphasize that an unofficial Alpine-based JRE-only image of Amazon Corretto already exists as <a href=\"https://hub.docker.com/r/pnavato/amazoncorretto-jre\" rel=\"nofollow noreferrer\">amazoncorretto-jre</a> so you could reduce your effort using it.  It is much smaller than other official JRE images and I use it in production.</p>\n"}],"owner":{"account_id":29733270,"reputation":23,"user_id":22787373,"display_name":"Jdev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":219,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77343744,"answer_count":1,"score":1,"last_activity_date":1698057883,"creation_date":1698049621,"question_id":77343684,"body_markdown":"I will deploy my dockerized Java application to AWS so I would like to use Amazon Corretto.  I also want to keep the size of the Docker image small so I want to use a JRE-only image based on Alpine.\r\n\r\nUnfortunately Amazon does not provide a JRE-only image of Java 17 or Java 21 but I know I can create it using `jlink` so I tried this command\r\n\r\n```\r\njlink --add-modules ALL-MODULE-PATH --output jre \\\r\n      --strip-debug --no-man-pages --no-header-files --compress=2\r\n```\r\n\t  \r\nas suggested in [this page][1].  It works on my Windows PC but on Alpine it gives a strange error:\r\n\r\n    Error: java.io.IOException: Cannot run program &quot;objcopy&quot;: error=2, No such file or directory\r\n\r\nWhat does it mean?  How can I create the base image?\r\n\r\n\r\n  [1]: https://adoptium.net/blog/2021/10/jlink-to-produce-own-runtime/","title":"How to create an Alpine-based JRE-only Docker image of Amazon Corretto?","body":"<p>I will deploy my dockerized Java application to AWS so I would like to use Amazon Corretto.  I also want to keep the size of the Docker image small so I want to use a JRE-only image based on Alpine.</p>\n<p>Unfortunately Amazon does not provide a JRE-only image of Java 17 or Java 21 but I know I can create it using <code>jlink</code> so I tried this command</p>\n<pre><code>jlink --add-modules ALL-MODULE-PATH --output jre \\\n      --strip-debug --no-man-pages --no-header-files --compress=2\n</code></pre>\n<p>as suggested in <a href=\"https://adoptium.net/blog/2021/10/jlink-to-produce-own-runtime/\" rel=\"nofollow noreferrer\">this page</a>.  It works on my Windows PC but on Alpine it gives a strange error:</p>\n<pre><code>Error: java.io.IOException: Cannot run program &quot;objcopy&quot;: error=2, No such file or directory\n</code></pre>\n<p>What does it mean?  How can I create the base image?</p>\n"},{"tags":["java","selenium-webdriver","junit","frameworks"],"comments":[{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":1,"creation_date":1698006147,"post_id":77339909,"comment_id":136347443,"body_markdown":"Please don&#39;t post images of code, errors, logs, or other text; see [ask].","body":"Please don&#39;t post images of code, errors, logs, or other text; see <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}],"answers":[{"tags":[],"owner":{"account_id":13688997,"reputation":658,"user_id":9877340,"display_name":"kenneth"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698057486,"creation_date":1698057486,"answer_id":77344499,"question_id":77339909,"body_markdown":"You should post snippets of code inside your questions, but outside of that; in your `BaseClass.java` on line 27, you should try change the line to: \r\n\r\n    driver = new ChromeDriver();\r\n\r\nDon&#39;t use`WebDriver` in front, otherwise you would create a new object in memory instead of referring to the `driver` on line 18.","title":"getting java NullPointerException in selenium code","body":"<p>You should post snippets of code inside your questions, but outside of that; in your <code>BaseClass.java</code> on line 27, you should try change the line to:</p>\n<pre><code>driver = new ChromeDriver();\n</code></pre>\n<p>Don't use<code>WebDriver</code> in front, otherwise you would create a new object in memory instead of referring to the <code>driver</code> on line 18.</p>\n"}],"owner":{"account_id":29727734,"reputation":1,"user_id":22783243,"display_name":"prateek"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1698057486,"creation_date":1697976957,"question_id":77339909,"body_markdown":"I have stuck in the selenium code i have developed a frame work of page_object model while running the code with the help of junit i am not able to run the selenium test it is throwing exception error as java Nullpointerexception.(https://i.stack.imgur.com/90C22.png)\r\n(https://i.stack.imgur.com/o46cT.png)\r\n(https://i.stack.imgur.com/j9Pqn.png)","title":"getting java NullPointerException in selenium code","body":"<p>I have stuck in the selenium code i have developed a frame work of page_object model while running the code with the help of junit i am not able to run the selenium test it is throwing exception error as java Nullpointerexception.(<a href=\"https://i.stack.imgur.com/90C22.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/90C22.png</a>)\n(<a href=\"https://i.stack.imgur.com/o46cT.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/o46cT.png</a>)\n(<a href=\"https://i.stack.imgur.com/j9Pqn.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/j9Pqn.png</a>)</p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":5867720,"reputation":527,"user_id":4621089,"accept_rate":73,"display_name":"Afshin Izadi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698057180,"creation_date":1698057180,"answer_id":77344471,"question_id":77344135,"body_markdown":"Well, the problem is about some attributes doesn&#39;t work while some Visibility enhancements option are enabled, in my case disabling High contrast fonts solve the issue and the textColor attribute worked again. ","title":"color doesn&#39;t change on Custom Text View class","body":"<p>Well, the problem is about some attributes doesn't work while some Visibility enhancements option are enabled, in my case disabling High contrast fonts solve the issue and the textColor attribute worked again.</p>\n"}],"owner":{"account_id":5867720,"reputation":527,"user_id":4621089,"accept_rate":73,"display_name":"Afshin Izadi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698057180,"creation_date":1698053848,"question_id":77344135,"body_markdown":"changing text color attribute doesn&#39;t work with creaing custom TextView class on runtime, but the color change on design mode on IDE(android studio)\r\n\r\nhere is my layout code to add the CustomTextView with textColor attribute\r\n```\r\n&lt;mypackage.CustomTextView\r\n                android:id=&quot;@+id/textView2&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:layout_gravity=&quot;center&quot;\r\n                android:drawablePadding=&quot;5dip&quot;\r\n                android:gravity=&quot;center&quot;\r\n                android:padding=&quot;5dip&quot;\r\n                android:text=&quot;mytext&quot;\r\n                android:textColor=&quot;#FF0000&quot;\r\n                android:textSize=&quot;25dp&quot; /&gt;\r\n```\r\n\r\nand my CustomTextView class and the way I implemented it\r\n```\r\n    public class CustomTextView extends androidx.appcompat.widget.AppCompatTextView {\r\n\r\n    public CustomTextView(Context context) {\r\n        super(context);\r\n        Log.e(&quot;test=&quot;,&quot;11111&quot;);\r\n        init();\r\n        // TODO Auto-generated constructor stub\r\n    }\r\n    public CustomTextView(Context context, AttributeSet attrs) {\r\n        super(context, attrs);\r\n        Log.e(&quot;test=&quot;,&quot;2222&quot;);\r\n        init();\r\n        // TODO Auto-generated constructor stub\r\n    }\r\n\r\n\r\n\r\n    public CustomTextView(Context context, AttributeSet attrs, int defStyle) {\r\n        super(context, attrs, defStyle);\r\n        Log.e(&quot;test=&quot;,&quot;33333&quot;);\r\n        init();\r\n        // TODO Auto-generated constructor stub\r\n    }\r\n\r\n    private void init() {\r\n        Typeface font_type = Typeface.createFromAsset(getContext().getAssets(), &quot;fonts/Action_Man_Bold.ttf&quot;);\r\n        setTypeface(font_type);\r\n    }\r\n\r\n    protected void onDraw (Canvas canvas) {\r\n        super.onDraw(canvas);\r\n\r\n\r\n    }\r\n}\r\n```\r\n\r\nin addition changing color programmatically doesn&#39;t work too\r\n","title":"color doesn&#39;t change on Custom Text View class","body":"<p>changing text color attribute doesn't work with creaing custom TextView class on runtime, but the color change on design mode on IDE(android studio)</p>\n<p>here is my layout code to add the CustomTextView with textColor attribute</p>\n<pre><code>&lt;mypackage.CustomTextView\n                android:id=&quot;@+id/textView2&quot;\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:layout_gravity=&quot;center&quot;\n                android:drawablePadding=&quot;5dip&quot;\n                android:gravity=&quot;center&quot;\n                android:padding=&quot;5dip&quot;\n                android:text=&quot;mytext&quot;\n                android:textColor=&quot;#FF0000&quot;\n                android:textSize=&quot;25dp&quot; /&gt;\n</code></pre>\n<p>and my CustomTextView class and the way I implemented it</p>\n<pre><code>    public class CustomTextView extends androidx.appcompat.widget.AppCompatTextView {\n\n    public CustomTextView(Context context) {\n        super(context);\n        Log.e(&quot;test=&quot;,&quot;11111&quot;);\n        init();\n        // TODO Auto-generated constructor stub\n    }\n    public CustomTextView(Context context, AttributeSet attrs) {\n        super(context, attrs);\n        Log.e(&quot;test=&quot;,&quot;2222&quot;);\n        init();\n        // TODO Auto-generated constructor stub\n    }\n\n\n\n    public CustomTextView(Context context, AttributeSet attrs, int defStyle) {\n        super(context, attrs, defStyle);\n        Log.e(&quot;test=&quot;,&quot;33333&quot;);\n        init();\n        // TODO Auto-generated constructor stub\n    }\n\n    private void init() {\n        Typeface font_type = Typeface.createFromAsset(getContext().getAssets(), &quot;fonts/Action_Man_Bold.ttf&quot;);\n        setTypeface(font_type);\n    }\n\n    protected void onDraw (Canvas canvas) {\n        super.onDraw(canvas);\n\n\n    }\n}\n</code></pre>\n<p>in addition changing color programmatically doesn't work too</p>\n"},{"tags":["java","android","memory-leaks"],"comments":[{"owner":{"account_id":7419981,"reputation":2073,"user_id":5644761,"display_name":"JakeB"},"score":0,"creation_date":1698057269,"post_id":77344468,"comment_id":136352509,"body_markdown":"https://developer.android.com/studio/profile/memory-profiler\nCapture a heap dump and load it into the profiler","body":"<a href=\"https://developer.android.com/studio/profile/memory-profiler\" rel=\"nofollow noreferrer\">developer.android.com/studio/profile/memory-profiler</a> Capture a heap dump and load it into the profiler"}],"owner":{"account_id":29734152,"reputation":1,"user_id":22788075,"display_name":"NajaR"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698057135,"creation_date":1698057135,"question_id":77344468,"body_markdown":"1st cycle\r\n\r\nApp Summary\r\n\r\n                       Pss(KB)                        Rss(KB)\r\n\r\n                        ------                         ------\r\n\r\n           Java Heap:     4844                          38296\r\n\r\n         Native Heap:     5392                           8684\r\n\r\n                Code:      128                         107648\r\n\r\n               Stack:      656                            972\r\n\r\n            Graphics:     8036                           8040\r\n\r\n       Private Other:     6520\r\n\r\n              System:    35205\r\n\r\n             Unknown:                                    8400\r\n\r\n \r\n\r\n           TOTAL PSS:    60781            TOTAL RSS:   172040       TOTAL SWAP PSS:    31105\r\n\r\n \r\n\r\n Objects\r\n\r\n               Views:      457         ViewRootImpl:        2\r\n\r\n         AppContexts:       14           Activities:        2\r\n\r\n              Assets:       28        AssetManagers:        0\r\n\r\n       Local Binders:       82        Proxy Binders:       99\r\n\r\n       Parcel memory:       47         Parcel count:      130\r\n\r\n    Death Recipients:        1             WebViews:        1\r\n\r\n\t\r\n\r\nafter 104 cycle: \r\n\r\nApp Summary\r\n\r\n                       Pss(KB)                        Rss(KB)\r\n\r\n                        ------                         ------\r\n\r\n           Java Heap:     4260                          35820\r\n\r\n         Native Heap:     6232                           8648\r\n\r\n                Code:      336                          98472\r\n\r\n               Stack:      560                            740\r\n\r\n            Graphics:     8148                           8152\r\n\r\n       Private Other:     7204\r\n\r\n              System:   213197\r\n\r\n             Unknown:                                    7280\r\n\r\n \r\n\r\n           TOTAL PSS:   239937            TOTAL RSS:   159112       TOTAL SWAP PSS:   209472\r\n\r\n \r\n\r\n Objects\r\n\r\n               Views:     8547         ViewRootImpl:        2\r\n\r\n         AppContexts:      223           Activities:      105\r\n\r\n              Assets:       28        AssetManagers:        0\r\n\r\n       Local Binders:      185        Proxy Binders:      407\r\n\r\n       Parcel memory:      638         Parcel count:      342\r\n\r\n    Death Recipients:        2             WebViews:      104\r\n\r\n\r\n\r\nHow can I figure out what views are increasing in every cycle, is there any tool in android studio or something. \r\nI am new here, please be kind.\r\n\r\nI tried to check android studio profiler if I can get any clue, but cannot find.","title":"In my app when I open an activity and then destroy it, I take memory info using dumpsys meminfo command, After every cycle number of views increase","body":"<p>1st cycle</p>\n<p>App Summary</p>\n<pre><code>                   Pss(KB)                        Rss(KB)\n\n                    ------                         ------\n\n       Java Heap:     4844                          38296\n\n     Native Heap:     5392                           8684\n\n            Code:      128                         107648\n\n           Stack:      656                            972\n\n        Graphics:     8036                           8040\n\n   Private Other:     6520\n\n          System:    35205\n\n         Unknown:                                    8400\n\n\n\n       TOTAL PSS:    60781            TOTAL RSS:   172040       TOTAL SWAP PSS:    31105\n</code></pre>\n<p>Objects</p>\n<pre><code>           Views:      457         ViewRootImpl:        2\n\n     AppContexts:       14           Activities:        2\n\n          Assets:       28        AssetManagers:        0\n\n   Local Binders:       82        Proxy Binders:       99\n\n   Parcel memory:       47         Parcel count:      130\n\nDeath Recipients:        1             WebViews:        1\n</code></pre>\n<p>after 104 cycle:</p>\n<p>App Summary</p>\n<pre><code>                   Pss(KB)                        Rss(KB)\n\n                    ------                         ------\n\n       Java Heap:     4260                          35820\n\n     Native Heap:     6232                           8648\n\n            Code:      336                          98472\n\n           Stack:      560                            740\n\n        Graphics:     8148                           8152\n\n   Private Other:     7204\n\n          System:   213197\n\n         Unknown:                                    7280\n\n\n\n       TOTAL PSS:   239937            TOTAL RSS:   159112       TOTAL SWAP PSS:   209472\n</code></pre>\n<p>Objects</p>\n<pre><code>           Views:     8547         ViewRootImpl:        2\n\n     AppContexts:      223           Activities:      105\n\n          Assets:       28        AssetManagers:        0\n\n   Local Binders:      185        Proxy Binders:      407\n\n   Parcel memory:      638         Parcel count:      342\n\nDeath Recipients:        2             WebViews:      104\n</code></pre>\n<p>How can I figure out what views are increasing in every cycle, is there any tool in android studio or something.\nI am new here, please be kind.</p>\n<p>I tried to check android studio profiler if I can get any clue, but cannot find.</p>\n"},{"tags":["java","swing","trie"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1697728035,"post_id":77324791,"comment_id":136318821,"body_markdown":"Use a single column `JTable` which supports &quot;filtering&quot;. Read the section from the Swing tutorial on [Sorting and Filtering](https://docs.oracle.com/javase/tutorial/uiswing/components/table.html#sorting) for a complete working example.","body":"Use a single column <code>JTable</code> which supports &quot;filtering&quot;. Read the section from the Swing tutorial on <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/table.html#sorting\" rel=\"nofollow noreferrer\">Sorting and Filtering</a> for a complete working example."},{"owner":{"account_id":25875099,"reputation":1,"user_id":19605244,"display_name":"dreamboy27"},"score":0,"creation_date":1697729311,"post_id":77324791,"comment_id":136319153,"body_markdown":"@camickr thank you, but I really think that won&#39;t work efficiently with a huge database.","body":"@camickr thank you, but I really think that won&#39;t work efficiently with a huge database."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1697803131,"post_id":77324791,"comment_id":136328897,"body_markdown":"@dreamboy27 `JTable` was explicitly built to handle gigantic amounts of info. How big is your database that you think that `JTable` is not a good fit?","body":"@dreamboy27 <code>JTable</code> was explicitly built to handle gigantic amounts of info. How big is your database that you think that <code>JTable</code> is not a good fit?"},{"owner":{"account_id":25875099,"reputation":1,"user_id":19605244,"display_name":"dreamboy27"},"score":0,"creation_date":1697819472,"post_id":77324791,"comment_id":136331959,"body_markdown":"@davidalayachew I think this is Swing&#39;s render problem. Are you sure about &quot;JTable was explicitly built to handle gigantic amounts of info&quot;","body":"@davidalayachew I think this is Swing&#39;s render problem. Are you sure about &quot;JTable was explicitly built to handle gigantic amounts of info&quot;"},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1697835347,"post_id":77324791,"comment_id":136334213,"body_markdown":"@dreamboy27 I&#39;ve used `JTable` to handle thousands of rows. Obviously, you will run into a memory limit at some point, but you were already approaching that limit if you are trying to hold thousands of rows of data in memory. If that is true, then you need to paginate the data. Let me know if that is where you are at.","body":"@dreamboy27 I&#39;ve used <code>JTable</code> to handle thousands of rows. Obviously, you will run into a memory limit at some point, but you were already approaching that limit if you are trying to hold thousands of rows of data in memory. If that is true, then you need to paginate the data. Let me know if that is where you are at."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1697911675,"post_id":77324791,"comment_id":136340025,"body_markdown":"I don&#39;t think the issue is the size of the table. I think the issue is that I would guess the filtering logic just does a linear search of all the rows in the table to determine which rows should be filtered.  I would guess the current data structure from above would do a more efficient search. Maybe multiple TableModels could be used to improve the search.","body":"I don&#39;t think the issue is the size of the table. I think the issue is that I would guess the filtering logic just does a linear search of all the rows in the table to determine which rows should be filtered.  I would guess the current data structure from above would do a more efficient search. Maybe multiple TableModels could be used to improve the search."},{"owner":{"account_id":25875099,"reputation":1,"user_id":19605244,"display_name":"dreamboy27"},"score":0,"creation_date":1697990654,"post_id":77324791,"comment_id":136345757,"body_markdown":"My algorithm is Prefix tree search. Of course the issue isn&#39;t algorithm. \nAnd I just show 15 items on list. So problem is swing&#39;s renderer @davidalayachew","body":"My algorithm is Prefix tree search. Of course the issue isn&#39;t algorithm.  And I just show 15 items on list. So problem is swing&#39;s renderer @davidalayachew"},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1698004205,"post_id":77324791,"comment_id":136347257,"body_markdown":"@dreamboy27 If you are running into trouble with only 15 items, then the problem is definitely not the Swing renderer. Swing renderer starts to get slow on my (very weak and underpowered laptop) when I have around 10,000 elements. Up until that point, it is as smooth as butter and can definitely beat 50 ms. Please post your swing code. I believe the problem we are looking for is there. Looking at your algorithm, I can see that it is not slow. So I agree that your problem is not your algorithm, but I disagree that the problem is Swing. Let us see your Swing code and we will find out.","body":"@dreamboy27 If you are running into trouble with only 15 items, then the problem is definitely not the Swing renderer. Swing renderer starts to get slow on my (very weak and underpowered laptop) when I have around 10,000 elements. Up until that point, it is as smooth as butter and can definitely beat 50 ms. Please post your swing code. I believe the problem we are looking for is there. Looking at your algorithm, I can see that it is not slow. So I agree that your problem is not your algorithm, but I disagree that the problem is Swing. Let us see your Swing code and we will find out."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1698004469,"post_id":77324791,"comment_id":136347284,"body_markdown":"@dreamboy27 Oh, I guess I should have asked - how many elements are you working with? Is it more than 10,000? If so, then there are a few optimizations that could be made. Let me know.","body":"@dreamboy27 Oh, I guess I should have asked - how many elements are you working with? Is it more than 10,000? If so, then there are a few optimizations that could be made. Let me know."},{"owner":{"account_id":25875099,"reputation":1,"user_id":19605244,"display_name":"dreamboy27"},"score":0,"creation_date":1698056367,"post_id":77324791,"comment_id":136352367,"body_markdown":"@davidalayachew I updated my code. My dictionary has 140000 words, but I only show 15 elements.","body":"@davidalayachew I updated my code. My dictionary has 140000 words, but I only show 15 elements."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1698064588,"post_id":77324791,"comment_id":136353824,"body_markdown":"@dreamboy27 Please also post the code for `ListWord`. But still, you said that your code right now is searching 140,000 words and only returning 15? That is definitely a lot harder for Swing to do in under 50 ms, but it is definitely possible. Let me know once you have posted the `ListWord` code. It is the morning before work for me, so I may take a long time to respond.","body":"@dreamboy27 Please also post the code for <code>ListWord</code>. But still, you said that your code right now is searching 140,000 words and only returning 15? That is definitely a lot harder for Swing to do in under 50 ms, but it is definitely possible. Let me know once you have posted the <code>ListWord</code> code. It is the morning before work for me, so I may take a long time to respond."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1698064666,"post_id":77324791,"comment_id":136353838,"body_markdown":"Also, if you could post a link to the 140,000 words, that would be appreciated. If not, I can make my own 140,000 words. But if you have yours handy, I would rather not go to the trouble.","body":"Also, if you could post a link to the 140,000 words, that would be appreciated. If not, I can make my own 140,000 words. But if you have yours handy, I would rather not go to the trouble."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1698095435,"post_id":77324791,"comment_id":136359578,"body_markdown":"@dreamboy27 I am back, but you still have not posted the code for `ListWord`. I need you to post that before I can write up a complete answer. Respond to me once you have done so, and I will write up an answer for you then.","body":"@dreamboy27 I am back, but you still have not posted the code for <code>ListWord</code>. I need you to post that before I can write up a complete answer. Respond to me once you have done so, and I will write up an answer for you then."},{"owner":{"account_id":25875099,"reputation":1,"user_id":19605244,"display_name":"dreamboy27"},"score":0,"creation_date":1698216775,"post_id":77324791,"comment_id":136375398,"body_markdown":"@davidalayachew just a custom jList (custom listCellRenderer). But when I only use JList, the problem still be there. I will upload video as soon as possible. Thanks for your help.","body":"@davidalayachew just a custom jList (custom listCellRenderer). But when I only use JList, the problem still be there. I will upload video as soon as possible. Thanks for your help."},{"owner":{"account_id":14010051,"reputation":1143,"user_id":10118965,"display_name":"davidalayachew"},"score":0,"creation_date":1698234616,"post_id":77324791,"comment_id":136378746,"body_markdown":"@dreamboy27 Ok, post that code too please. I need to see it in order to provide a good answer.","body":"@dreamboy27 Ok, post that code too please. I need to see it in order to provide a good answer."}],"owner":{"account_id":25875099,"reputation":1,"user_id":19605244,"display_name":"dreamboy27"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698056434,"creation_date":1697726708,"question_id":77324791,"body_markdown":"I&#39;m making a dictionary application, which has a search function. When we type something to the textfield, we want receive a list result in the JList instantly, but I can&#39;t make it has been done instantly, always has latency, maybe 50ms.\r\n\r\nMeanwhile I&#39;m using another application, which can do it with 0ms latency. You can see it there: [video](https://streamable.com/m48zh5)\r\n\r\nI&#39;m using prefix tree. Here is my code:\r\n\r\nDictionary trie to search words.\r\n```\r\n// I have another arraylist **dictionary** contains all words\r\n// you can see attribute **count** in DictionaryTrie, and **index** in Node\r\n// You can see that: I use Trie to find index, and I use index to receive a list through dictionary\r\npublic class DictionaryTrie {\r\n    private final Node root;\r\n    private static int count;\r\n    private static ArrayList&lt;Word&gt; dictionary;\r\n    public DictionaryTrie() {\r\n        count = 0;\r\n        root = new Node(count);\r\n        dictionary = Dictionary.getInstance().getDictionary();\r\n    }\r\n    \r\n    public void insert(Word newWord) {\r\n        String word = newWord.getWordTarget();\r\n        Node currentNode = root;\r\n        for (int i = 0; i &lt; word.length(); i++) {\r\n            char c = word.charAt(i);\r\n            Node node = currentNode.children.get(c);\r\n            if (node == null) {\r\n                node = new Node(count);\r\n                currentNode.children.put(c, node);\r\n            }\r\n            currentNode = node;\r\n        }\r\n        count++;\r\n    }\r\n    \r\n    public ArrayList&lt;Word&gt; search(String word) {\r\n        ArrayList&lt;Word&gt; list = new ArrayList&lt;Word&gt;();\r\n        Node currentNode = root;\r\n        for (int i = 0; i &lt; word.length(); i++) {\r\n            char c = word.charAt(i);\r\n            Node node = currentNode.children.get(c);\r\n            if (node == null) {\r\n                return null;\r\n            }\r\n            currentNode = node;\r\n        }\r\n        int start = currentNode.index;\r\n        for (int i = start; i &lt; Math.min(dictionary.size(), start + 15); i++) {\r\n            list.add(dictionary.get(i));\r\n        }\r\n        return list;\r\n    }\r\n    \r\n    \r\n    private class Node {\r\n        public Map&lt;Character, Node&gt; children;\r\n        public int index; \r\n        \r\n        public Node(int idx) {\r\n            children = new HashMap&lt;Character, Node&gt;();\r\n            index = idx;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nDictionary Management:\r\n```\r\npublic class DictionaryManagement {\r\n    \r\n    private static DictionaryManagement instance;\r\n    private static Dictionary dict;\r\n    private static ArrayList&lt;Word&gt; listWord;\r\n    private static DictionaryTrie dictionaryTrie;\r\n    ConnectJDBC connectJDBC;\r\n    Connection conn;\r\n\r\n    private DictionaryManagement() {\r\n        dict = Dictionary.getInstance();\r\n        listWord = dict.getDictionary();\r\n        dictionaryTrie = new DictionaryTrie();\r\n    }\r\n\r\n    public static DictionaryManagement getInstance() {\r\n        if (instance == null) {\r\n            instance = new DictionaryManagement();\r\n        }\r\n        return instance;\r\n    }\r\n\r\n    \r\n    public ArrayList&lt;Word&gt; searchWord(String word) {\r\n        return dictionaryTrie.search(word);\r\n    }\r\n}\r\n```\r\n\r\nSearch controller\r\n```\r\npublic class SearchController{\r\n    private ListWord listWord;\r\n    private JTextField searchField;\r\n    private DictionaryManagement dictionaryManagement;\r\n    \r\n    public SearchController(ListWord list, JTextField field) {\r\n        dictionaryManagement = DictionaryManagement.getInstance();\r\n        this.listWord = list;\r\n        this.searchField = field;\r\n        this.searchField.addKeyListener(new SearchFieldListener());\r\n    }\r\n    \r\n    private void search(String string) {\r\n        ArrayList&lt;Word&gt; list = dictionaryManagement.searchWord(string);\r\n        listWord.removeItem();\r\n        if (list != null) {\r\n            listWord.addItem(list);\r\n        }\r\n        listWord.setSelectedIndex(-1);\r\n    }\r\n    \r\n    private class SearchFieldListener implements KeyListener{\r\n\r\n        @Override\r\n        public void keyTyped(KeyEvent e) {\r\n            \r\n        }\r\n\r\n        @Override\r\n        public void keyPressed(KeyEvent e) {\r\n            \r\n        }\r\n\r\n        @Override\r\n        public void keyReleased(KeyEvent e) {\r\n            String text = searchField.getText();\r\n            search(text);\r\n        }\r\n        \r\n    }\r\n}\r\n```\r\n\r\n\r\nMain\r\n```\r\nsearchController = new SearchController(listWord, searchField);\r\n```\r\n\r\n\r\n\r\n\r\nI think I have no problem with my algorithm.\r\n","title":"Search string instantly by JTextField and JList","body":"<p>I'm making a dictionary application, which has a search function. When we type something to the textfield, we want receive a list result in the JList instantly, but I can't make it has been done instantly, always has latency, maybe 50ms.</p>\n<p>Meanwhile I'm using another application, which can do it with 0ms latency. You can see it there: <a href=\"https://streamable.com/m48zh5\" rel=\"nofollow noreferrer\">video</a></p>\n<p>I'm using prefix tree. Here is my code:</p>\n<p>Dictionary trie to search words.</p>\n<pre><code>// I have another arraylist **dictionary** contains all words\n// you can see attribute **count** in DictionaryTrie, and **index** in Node\n// You can see that: I use Trie to find index, and I use index to receive a list through dictionary\npublic class DictionaryTrie {\n    private final Node root;\n    private static int count;\n    private static ArrayList&lt;Word&gt; dictionary;\n    public DictionaryTrie() {\n        count = 0;\n        root = new Node(count);\n        dictionary = Dictionary.getInstance().getDictionary();\n    }\n    \n    public void insert(Word newWord) {\n        String word = newWord.getWordTarget();\n        Node currentNode = root;\n        for (int i = 0; i &lt; word.length(); i++) {\n            char c = word.charAt(i);\n            Node node = currentNode.children.get(c);\n            if (node == null) {\n                node = new Node(count);\n                currentNode.children.put(c, node);\n            }\n            currentNode = node;\n        }\n        count++;\n    }\n    \n    public ArrayList&lt;Word&gt; search(String word) {\n        ArrayList&lt;Word&gt; list = new ArrayList&lt;Word&gt;();\n        Node currentNode = root;\n        for (int i = 0; i &lt; word.length(); i++) {\n            char c = word.charAt(i);\n            Node node = currentNode.children.get(c);\n            if (node == null) {\n                return null;\n            }\n            currentNode = node;\n        }\n        int start = currentNode.index;\n        for (int i = start; i &lt; Math.min(dictionary.size(), start + 15); i++) {\n            list.add(dictionary.get(i));\n        }\n        return list;\n    }\n    \n    \n    private class Node {\n        public Map&lt;Character, Node&gt; children;\n        public int index; \n        \n        public Node(int idx) {\n            children = new HashMap&lt;Character, Node&gt;();\n            index = idx;\n        }\n    }\n}\n</code></pre>\n<p>Dictionary Management:</p>\n<pre><code>public class DictionaryManagement {\n    \n    private static DictionaryManagement instance;\n    private static Dictionary dict;\n    private static ArrayList&lt;Word&gt; listWord;\n    private static DictionaryTrie dictionaryTrie;\n    ConnectJDBC connectJDBC;\n    Connection conn;\n\n    private DictionaryManagement() {\n        dict = Dictionary.getInstance();\n        listWord = dict.getDictionary();\n        dictionaryTrie = new DictionaryTrie();\n    }\n\n    public static DictionaryManagement getInstance() {\n        if (instance == null) {\n            instance = new DictionaryManagement();\n        }\n        return instance;\n    }\n\n    \n    public ArrayList&lt;Word&gt; searchWord(String word) {\n        return dictionaryTrie.search(word);\n    }\n}\n</code></pre>\n<p>Search controller</p>\n<pre><code>public class SearchController{\n    private ListWord listWord;\n    private JTextField searchField;\n    private DictionaryManagement dictionaryManagement;\n    \n    public SearchController(ListWord list, JTextField field) {\n        dictionaryManagement = DictionaryManagement.getInstance();\n        this.listWord = list;\n        this.searchField = field;\n        this.searchField.addKeyListener(new SearchFieldListener());\n    }\n    \n    private void search(String string) {\n        ArrayList&lt;Word&gt; list = dictionaryManagement.searchWord(string);\n        listWord.removeItem();\n        if (list != null) {\n            listWord.addItem(list);\n        }\n        listWord.setSelectedIndex(-1);\n    }\n    \n    private class SearchFieldListener implements KeyListener{\n\n        @Override\n        public void keyTyped(KeyEvent e) {\n            \n        }\n\n        @Override\n        public void keyPressed(KeyEvent e) {\n            \n        }\n\n        @Override\n        public void keyReleased(KeyEvent e) {\n            String text = searchField.getText();\n            search(text);\n        }\n        \n    }\n}\n</code></pre>\n<p>Main</p>\n<pre><code>searchController = new SearchController(listWord, searchField);\n</code></pre>\n<p>I think I have no problem with my algorithm.</p>\n"},{"tags":["java","math","integer","overflow","underflow"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1697995670,"post_id":77340972,"comment_id":136346344,"body_markdown":"There is no `int`-value that is `&lt; Integer.MIN_VALUE`, and there is no `int`-value that is `&gt; Integer.MAX_VALUE`. --- I do not see how the code presented is related to the question. Please [edit] the post and clarify.","body":"There is no <code>int</code>-value that is <code>&lt; Integer.MIN_VALUE</code>, and there is no <code>int</code>-value that is <code>&gt; Integer.MAX_VALUE</code>. --- I do not see how the code presented is related to the question. Please <a href=\"https://stackoverflow.com/posts/77340972/edit\">edit</a> the post and clarify."},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1697997335,"post_id":77340972,"comment_id":136346550,"body_markdown":"It sounds like you want to verify that the intermediate result neither underflows nor overflows `int`. When you [edit] your question, please cite/recapitulate the original problem.","body":"It sounds like you want to verify that the intermediate result neither underflows nor overflows <code>int</code>. When you <a href=\"https://stackoverflow.com/posts/77340972/edit\">edit</a> your question, please cite/recapitulate the original problem."},{"owner":{"account_id":3485114,"reputation":317,"user_id":2916263,"accept_rate":56,"display_name":"hallo02"},"score":0,"creation_date":1697998197,"post_id":77340972,"comment_id":136346646,"body_markdown":"Hi all, I edited my post and reduced it to it&#39;s underlying question.","body":"Hi all, I edited my post and reduced it to it&#39;s underlying question."}],"answers":[{"tags":[],"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1697999825,"creation_date":1697999825,"answer_id":77341237,"question_id":77340972,"body_markdown":"It&#39;s happening because the [Java language](https://docs.oracle.com/javase/specs/jls/se17/jls17.pdf) says it must.  See section 5.1.3,  Narrowing Primitive Conversion.\r\n\r\n&gt;  Otherwise, if the floating-point number is not an infinity, the\r\n&gt; floating-point value is rounded to an integer value V using the round\r\n&gt; toward zero rounding policy (&#167;4.2.4). Then there are two cases:   \r\n&gt; a. If\r\n&gt; T is long, and this integer value can be represented as a long, then\r\n&gt; the result of the first step is the long value V.   \r\n&gt; b. Otherwise, if\r\n&gt; this integer value can be represented as an int, then the result of\r\n&gt; the first step is the int value V.   \r\n&gt; • Otherwise, one of the following\r\n&gt; two cases must be true:   \r\n&gt; a. The value must be too small (a negative\r\n&gt; value of large magnitude or negative infinity), and the result of the\r\n&gt; first step is the smallest representable value of type int or long.  \r\n&gt; b.\r\n&gt; The value must be too large (a positive value of large magnitude or\r\n&gt; positive infinity), and the result of the first step is the largest\r\n&gt; representable value of type int or long\r\n\r\nThis last clause is what you are witnessing in action.","title":"Java Integer underflow / overflow not happen during math operation?","body":"<p>It's happening because the <a href=\"https://docs.oracle.com/javase/specs/jls/se17/jls17.pdf\" rel=\"nofollow noreferrer\">Java language</a> says it must.  See section 5.1.3,  Narrowing Primitive Conversion.</p>\n<blockquote>\n<p>Otherwise, if the floating-point number is not an infinity, the\nfloating-point value is rounded to an integer value V using the round\ntoward zero rounding policy (§4.2.4). Then there are two cases:<br />\na. If\nT is long, and this integer value can be represented as a long, then\nthe result of the first step is the long value V.<br />\nb. Otherwise, if\nthis integer value can be represented as an int, then the result of\nthe first step is the int value V.<br />\n• Otherwise, one of the following\ntwo cases must be true:<br />\na. The value must be too small (a negative\nvalue of large magnitude or negative infinity), and the result of the\nfirst step is the smallest representable value of type int or long.<br />\nb.\nThe value must be too large (a positive value of large magnitude or\npositive infinity), and the result of the first step is the largest\nrepresentable value of type int or long</p>\n</blockquote>\n<p>This last clause is what you are witnessing in action.</p>\n"}],"owner":{"account_id":3485114,"reputation":317,"user_id":2916263,"accept_rate":56,"display_name":"hallo02"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":93,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":77341237,"answer_count":1,"score":-1,"last_activity_date":1698056349,"creation_date":1697995069,"question_id":77340972,"body_markdown":"Could someone explain me, why `a` is equals `2&#39;147&#39;483&#39;647` ?\r\n\r\n    int a = (int)(3434 * 2353253.0)\r\n\r\nWhy is this &quot;sticking to Integer.MAX_VALUE&quot; happening?\r\nI expected some integer overflow behavior and a result of `-508&#39;863&#39;790`\r\n\r\n(openjdk 11.0.16.1 2022-08-12)","title":"Java Integer underflow / overflow not happen during math operation?","body":"<p>Could someone explain me, why <code>a</code> is equals <code>2'147'483'647</code> ?</p>\n<pre><code>int a = (int)(3434 * 2353253.0)\n</code></pre>\n<p>Why is this &quot;sticking to Integer.MAX_VALUE&quot; happening?\nI expected some integer overflow behavior and a result of <code>-508'863'790</code></p>\n<p>(openjdk 11.0.16.1 2022-08-12)</p>\n"},{"tags":["java","rest","header","quarkus","microprofile"],"comments":[{"owner":{"account_id":213468,"reputation":103493,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1697892342,"post_id":77336005,"comment_id":136338064,"body_markdown":"If Quarkus doesn&#39;t support reuse via custom annotations, then there probably is no possibility. It is not possible to reuse arrays in annotations, as Java requires constant expressions in headers, and array references are not constant expressions.","body":"If Quarkus doesn&#39;t support reuse via custom annotations, then there probably is no possibility. It is not possible to reuse arrays in annotations, as Java requires constant expressions in headers, and array references are not constant expressions."}],"answers":[{"tags":[],"owner":{"account_id":6518557,"reputation":2810,"user_id":5043481,"display_name":"zforgo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1698056321,"creation_date":1698056321,"answer_id":77344376,"question_id":77336005,"body_markdown":"At first I&#39;d like to mention that passing pagination information to HTTP headers is not the best idea. For example firewalls or proxy servers can modify (even remove) HTTP headers. I&#39;m going to show my preferred solution later.\r\n\r\n## Add pagination headers to response\r\n\r\nHowever, reusing header constants is not fully supported neither OpenAPI nor Quarkus the MicroProfile OpenAPI Specification (and Smallrye OpenAPI implementation) supports to modify OpenAPI documentation programatically.\r\n\r\nA REST resource\r\n```java\r\n@Path(&quot;/hello&quot;)\r\npublic class ExampleResource {\r\n\r\n    @Operation(\r\n            operationId = &quot;listExamples&quot;,\r\n            summary = &quot;List examples&quot;\r\n    )\r\n    @APIResponse(\r\n            headers = @Header(name = &quot;X-Paginated&quot;),\r\n            responseCode = &quot;200&quot;,\r\n            description = &quot;Successful operation&quot;\r\n    )\r\n    @APIResponse(\r\n            responseCode = &quot;418&quot;,\r\n            description = &quot;In case of Armageddon&quot;\r\n    )\r\n\r\n    @GET\r\n    @Produces(MediaType.TEXT_PLAIN)\r\n    public List&lt;String&gt; filter() {\r\n        return List.of(&quot;Hello from RESTEasy Reactive&quot;);\r\n    }\r\n\r\n    @DELETE\r\n    public void remove() {\r\n        // Just to haven an other endpoint\r\n    }\r\n}\r\n```\r\nThe `listExamples` operation has possible two responses, but the only one should contain pagination response headers. I&#39;ve introduced a meta header `X-Paginated` to mark which response has to be modified.\r\n\r\nBy implementing a custom OpenAPI filter it is possible to change OpenAPI definition programatically.\r\n\r\nThe following filter will change each occurrence of `X-Paginated` header to `X-Length`, `X-Offset` and `X-Limit` triple.\r\n```java\r\npublic class PaginatedHeaderOASFilter implements OASFilter {\r\n\r\n    @Override\r\n    public APIResponse filterAPIResponse(APIResponse apiResponse) {\r\n        return Optional.of(apiResponse)\r\n                .filter(isPaginated)\r\n                .map(mapResponse)\r\n                .orElse(apiResponse);\r\n    }\r\n\r\n    private static final Predicate&lt;APIResponse&gt; isPaginated = response -&gt; Optional\r\n            .ofNullable(response.getHeaders())\r\n            .map(map -&gt; map.containsKey(&quot;X-Paginated&quot;))\r\n            .orElse(false);\r\n\r\n    private static final UnaryOperator&lt;APIResponse&gt; mapResponse = response -&gt; {\r\n        response.removeHeader(&quot;X-Paginated&quot;);\r\n        return response\r\n                .addHeader(&quot;X-Length&quot;, OASFactory.createHeader()\r\n                        .description(&quot;Description of X-Length&quot;)\r\n                        .schema(OASFactory.createSchema().type(Schema.SchemaType.INTEGER))\r\n                )\r\n                .addHeader(&quot;X-Offset&quot;, OASFactory.createHeader().description(&quot;Description of X-Offset&quot;))\r\n                .addHeader(&quot;X-Limit&quot;, OASFactory.createHeader().description(&quot;Description of X-Limit&quot;));\r\n    };\r\n}\r\n```\r\nNote: Don&#39;t forget to register custom OASFilter(s) in application configuration file e.g.:\r\n```none\r\nmp.openapi.filter=io.github.zforgo.PaginatedHeaderOASFilter\r\n```\r\n\r\n## Add pagination properties to response\r\n\r\nAs I started I prefer to pass pagination properties in response body. Luckily it can be reusable, because Smallrye supports generic response types.\r\n\r\n`Pagination` holds the pagination properties\r\n\r\n```java\r\npublic class Pagination {\r\n\r\n    protected long totalCount;\r\n    protected Integer pageCount;\r\n    protected Integer pageIndex;\r\n\r\n    protected Integer pageSize;\r\n\r\n    public Pagination(long totalCount, Integer pageCount, Integer pageIndex) {\r\n        this.totalCount = totalCount;\r\n        this.pageCount = pageCount;\r\n        this.pageIndex = pageIndex;\r\n    }\r\n\r\n    // getters / setters / others\r\n}\r\n```\r\n\r\n`FilterResult` contains the result list along with pagination\r\n\r\n```java\r\npublic class FilterResult&lt;T&gt; {\r\n    private final Pagination pagination;\r\n    private final List&lt;T&gt; items;\r\n\r\n    public FilterResult(List&lt;T&gt; items, Pagination pagination) {\r\n        this.items = items;\r\n        this.pagination = pagination;\r\n    }\r\n\r\n    @JsonCreator\r\n    public FilterResult(List&lt;T&gt; items, long totalCount, Integer pageCount, Integer pageIndex) {\r\n        this(items, new Pagination(totalCount, pageCount, pageIndex));\r\n    }\r\n\r\n    // getters / setters / others\r\n}\r\n```\r\n\r\nNow, an enpoint like\r\n```java\r\n@GET\r\n@Path(&quot;/orders&quot;)\r\n@Produces(MediaType.APPLICATION_JSON)\r\npublic FilterResult&lt;OrderDto&gt; filterOrders() {\r\n    return null;\r\n}\r\n```\r\nwill be generated in OpenAPI documentation as:\r\n\r\n```yaml\r\npaths:\r\n  /orders:\r\n    get:\r\n      responses:\r\n        &quot;200&quot;:\r\n          description: OK\r\n          content:\r\n            application/json:\r\n              schema:\r\n                $ref: &#39;#/components/schemas/FilterResultOrderDto&#39;\r\ncomponents:\r\n  schemas:\r\n    FilterResultOrderDto:\r\n      type: object\r\n      properties:\r\n        pagination:\r\n          $ref: &#39;#/components/schemas/Pagination&#39;\r\n        items:\r\n          type: array\r\n          items:\r\n            $ref: &#39;#/components/schemas/OrderDto&#39;\r\n    OrderDto:\r\n      type: object\r\n      properties:\r\n        billingAddress:\r\n          type: string\r\n    Pagination:\r\n      type: object\r\n      properties:\r\n        totalCount:\r\n          format: int64\r\n          type: integer\r\n        pageCount:\r\n          format: int32\r\n          type: integer\r\n        pageIndex:\r\n          format: int32\r\n          type: integer\r\n        pageSize:\r\n          format: int32\r\n          type: integer\r\n```","title":"Reuse Eclipse Microprofile @Header definition in REST API declaration","body":"<p>At first I'd like to mention that passing pagination information to HTTP headers is not the best idea. For example firewalls or proxy servers can modify (even remove) HTTP headers. I'm going to show my preferred solution later.</p>\n<h2>Add pagination headers to response</h2>\n<p>However, reusing header constants is not fully supported neither OpenAPI nor Quarkus the MicroProfile OpenAPI Specification (and Smallrye OpenAPI implementation) supports to modify OpenAPI documentation programatically.</p>\n<p>A REST resource</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Path(&quot;/hello&quot;)\npublic class ExampleResource {\n\n    @Operation(\n            operationId = &quot;listExamples&quot;,\n            summary = &quot;List examples&quot;\n    )\n    @APIResponse(\n            headers = @Header(name = &quot;X-Paginated&quot;),\n            responseCode = &quot;200&quot;,\n            description = &quot;Successful operation&quot;\n    )\n    @APIResponse(\n            responseCode = &quot;418&quot;,\n            description = &quot;In case of Armageddon&quot;\n    )\n\n    @GET\n    @Produces(MediaType.TEXT_PLAIN)\n    public List&lt;String&gt; filter() {\n        return List.of(&quot;Hello from RESTEasy Reactive&quot;);\n    }\n\n    @DELETE\n    public void remove() {\n        // Just to haven an other endpoint\n    }\n}\n</code></pre>\n<p>The <code>listExamples</code> operation has possible two responses, but the only one should contain pagination response headers. I've introduced a meta header <code>X-Paginated</code> to mark which response has to be modified.</p>\n<p>By implementing a custom OpenAPI filter it is possible to change OpenAPI definition programatically.</p>\n<p>The following filter will change each occurrence of <code>X-Paginated</code> header to <code>X-Length</code>, <code>X-Offset</code> and <code>X-Limit</code> triple.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class PaginatedHeaderOASFilter implements OASFilter {\n\n    @Override\n    public APIResponse filterAPIResponse(APIResponse apiResponse) {\n        return Optional.of(apiResponse)\n                .filter(isPaginated)\n                .map(mapResponse)\n                .orElse(apiResponse);\n    }\n\n    private static final Predicate&lt;APIResponse&gt; isPaginated = response -&gt; Optional\n            .ofNullable(response.getHeaders())\n            .map(map -&gt; map.containsKey(&quot;X-Paginated&quot;))\n            .orElse(false);\n\n    private static final UnaryOperator&lt;APIResponse&gt; mapResponse = response -&gt; {\n        response.removeHeader(&quot;X-Paginated&quot;);\n        return response\n                .addHeader(&quot;X-Length&quot;, OASFactory.createHeader()\n                        .description(&quot;Description of X-Length&quot;)\n                        .schema(OASFactory.createSchema().type(Schema.SchemaType.INTEGER))\n                )\n                .addHeader(&quot;X-Offset&quot;, OASFactory.createHeader().description(&quot;Description of X-Offset&quot;))\n                .addHeader(&quot;X-Limit&quot;, OASFactory.createHeader().description(&quot;Description of X-Limit&quot;));\n    };\n}\n</code></pre>\n<p>Note: Don't forget to register custom OASFilter(s) in application configuration file e.g.:</p>\n<pre class=\"lang-none prettyprint-override\"><code>mp.openapi.filter=io.github.zforgo.PaginatedHeaderOASFilter\n</code></pre>\n<h2>Add pagination properties to response</h2>\n<p>As I started I prefer to pass pagination properties in response body. Luckily it can be reusable, because Smallrye supports generic response types.</p>\n<p><code>Pagination</code> holds the pagination properties</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Pagination {\n\n    protected long totalCount;\n    protected Integer pageCount;\n    protected Integer pageIndex;\n\n    protected Integer pageSize;\n\n    public Pagination(long totalCount, Integer pageCount, Integer pageIndex) {\n        this.totalCount = totalCount;\n        this.pageCount = pageCount;\n        this.pageIndex = pageIndex;\n    }\n\n    // getters / setters / others\n}\n</code></pre>\n<p><code>FilterResult</code> contains the result list along with pagination</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class FilterResult&lt;T&gt; {\n    private final Pagination pagination;\n    private final List&lt;T&gt; items;\n\n    public FilterResult(List&lt;T&gt; items, Pagination pagination) {\n        this.items = items;\n        this.pagination = pagination;\n    }\n\n    @JsonCreator\n    public FilterResult(List&lt;T&gt; items, long totalCount, Integer pageCount, Integer pageIndex) {\n        this(items, new Pagination(totalCount, pageCount, pageIndex));\n    }\n\n    // getters / setters / others\n}\n</code></pre>\n<p>Now, an enpoint like</p>\n<pre class=\"lang-java prettyprint-override\"><code>@GET\n@Path(&quot;/orders&quot;)\n@Produces(MediaType.APPLICATION_JSON)\npublic FilterResult&lt;OrderDto&gt; filterOrders() {\n    return null;\n}\n</code></pre>\n<p>will be generated in OpenAPI documentation as:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>paths:\n  /orders:\n    get:\n      responses:\n        &quot;200&quot;:\n          description: OK\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/FilterResultOrderDto'\ncomponents:\n  schemas:\n    FilterResultOrderDto:\n      type: object\n      properties:\n        pagination:\n          $ref: '#/components/schemas/Pagination'\n        items:\n          type: array\n          items:\n            $ref: '#/components/schemas/OrderDto'\n    OrderDto:\n      type: object\n      properties:\n        billingAddress:\n          type: string\n    Pagination:\n      type: object\n      properties:\n        totalCount:\n          format: int64\n          type: integer\n        pageCount:\n          format: int32\n          type: integer\n        pageIndex:\n          format: int32\n          type: integer\n        pageSize:\n          format: int32\n          type: integer\n</code></pre>\n"}],"owner":{"account_id":11833988,"reputation":3,"user_id":8659875,"display_name":"mitch-lbw"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77344376,"answer_count":1,"score":0,"last_activity_date":1698056321,"creation_date":1697891913,"question_id":77336005,"body_markdown":"I&#39;m struggling on how to reuse an @Header annotation within my API specification using Quarkus and Eclipse Microprofile. I have a lot of methods which return a paginated list of objects and I want to deliver the information about the \r\n- total amount of objects existing\r\n- current offset\r\n- current limit\r\n\r\nas X-... Header, this currently looks like\r\n\r\n```java\r\n@GET\r\n@Path(&quot;/obj1&quot;)\r\n@Operation(description = &quot;get filtered list of obj1&quot;)\r\n@APIResponse(\r\n  responseCode = &quot;200&quot;,\r\n  headers = { @Header(name = &quot;X-Length&quot;),@Header(name = &quot;X-Offset&quot;) ,@Header(name = &quot;X-Limit&quot;)},\r\n  content = @Content(\r\n    mediaType = MediaType.APPLICATION_JSON,\r\n    schema = @Schema(implementation = Obj1.class, type = SchemaType.ARRAY)\r\n  )\r\n)\r\n```\r\nSince the headers are always the same for every method returning a list, I don&#39;t want to copy &amp; paste them on every method, since I&#39;m also currently not sure about the naming.\r\n\r\nIs it possible, and if so how, to declare this array once and reuse it like\r\n```\r\npaginationHeaders = { @Header(name = &quot;X-Length&quot;),@Header(name = &quot;X-Offset&quot;) ,@Header(name = &quot;X-Limit&quot;)}\r\n...\r\n@APIResponse(...\r\nheaders = paginationHeaders\r\n```\r\nIs there maybe another standardized way to return pagination information (but not in the response object) using Quarkus?\r\n\r\nI tried searching via Google, browsing the Quarkus docs and defining a custom annotation.","title":"Reuse Eclipse Microprofile @Header definition in REST API declaration","body":"<p>I'm struggling on how to reuse an @Header annotation within my API specification using Quarkus and Eclipse Microprofile. I have a lot of methods which return a paginated list of objects and I want to deliver the information about the</p>\n<ul>\n<li>total amount of objects existing</li>\n<li>current offset</li>\n<li>current limit</li>\n</ul>\n<p>as X-... Header, this currently looks like</p>\n<pre class=\"lang-java prettyprint-override\"><code>@GET\n@Path(&quot;/obj1&quot;)\n@Operation(description = &quot;get filtered list of obj1&quot;)\n@APIResponse(\n  responseCode = &quot;200&quot;,\n  headers = { @Header(name = &quot;X-Length&quot;),@Header(name = &quot;X-Offset&quot;) ,@Header(name = &quot;X-Limit&quot;)},\n  content = @Content(\n    mediaType = MediaType.APPLICATION_JSON,\n    schema = @Schema(implementation = Obj1.class, type = SchemaType.ARRAY)\n  )\n)\n</code></pre>\n<p>Since the headers are always the same for every method returning a list, I don't want to copy &amp; paste them on every method, since I'm also currently not sure about the naming.</p>\n<p>Is it possible, and if so how, to declare this array once and reuse it like</p>\n<pre><code>paginationHeaders = { @Header(name = &quot;X-Length&quot;),@Header(name = &quot;X-Offset&quot;) ,@Header(name = &quot;X-Limit&quot;)}\n...\n@APIResponse(...\nheaders = paginationHeaders\n</code></pre>\n<p>Is there maybe another standardized way to return pagination information (but not in the response object) using Quarkus?</p>\n<p>I tried searching via Google, browsing the Quarkus docs and defining a custom annotation.</p>\n"},{"tags":["java","database","nullpointerexception","h2"],"comments":[{"owner":{"account_id":161745,"reputation":49235,"user_id":382763,"accept_rate":92,"display_name":"Thomas Mueller"},"score":0,"creation_date":1418050698,"post_id":27360272,"comment_id":43173456,"body_markdown":"This is the stack trace for the old version (1.4.177), could you post the stack trace for the newest version (1.4.182) please?","body":"This is the stack trace for the old version (1.4.177), could you post the stack trace for the newest version (1.4.182) please?"},{"owner":{"account_id":1738273,"reputation":530,"user_id":1590342,"accept_rate":44,"display_name":"Lucas Wa"},"score":0,"creation_date":1418051111,"post_id":27360272,"comment_id":43173687,"body_markdown":"Yes, you&#39;re right. I updated stacktrace but it seems to be the same.","body":"Yes, you&#39;re right. I updated stacktrace but it seems to be the same."},{"owner":{"account_id":161745,"reputation":49235,"user_id":382763,"accept_rate":92,"display_name":"Thomas Mueller"},"score":0,"creation_date":1418052586,"post_id":27360272,"comment_id":43174578,"body_markdown":"Did you try using the `Recover` tool? This is in package `org.h2.tools`. See also the documentation for this tool.","body":"Did you try using the <code>Recover</code> tool? This is in package <code>org.h2.tools</code>. See also the documentation for this tool."},{"owner":{"account_id":1738273,"reputation":530,"user_id":1590342,"accept_rate":44,"display_name":"Lucas Wa"},"score":0,"creation_date":1418113308,"post_id":27360272,"comment_id":43198847,"body_markdown":"I have added stacktrace after using the tool.","body":"I have added stacktrace after using the tool."},{"owner":{"account_id":161745,"reputation":49235,"user_id":382763,"accept_rate":92,"display_name":"Thomas Mueller"},"score":1,"creation_date":1418154357,"post_id":27360272,"comment_id":43222944,"body_markdown":"I&#39;m afraid this database file is so broken it can&#39;t be repaired. I&#39;m interested to analyze this problem. Would it be possible if you send me the database file?","body":"I&#39;m afraid this database file is so broken it can&#39;t be repaired. I&#39;m interested to analyze this problem. Would it be possible if you send me the database file?"},{"owner":{"account_id":1738273,"reputation":530,"user_id":1590342,"accept_rate":44,"display_name":"Lucas Wa"},"score":0,"creation_date":1418203726,"post_id":27360272,"comment_id":43240815,"body_markdown":"Unfortunately I&#39;m not allowed to send you the data. But is there any way to recover at least a part of data?","body":"Unfortunately I&#39;m not allowed to send you the data. But is there any way to recover at least a part of data?"},{"owner":{"account_id":161745,"reputation":49235,"user_id":382763,"accept_rate":92,"display_name":"Thomas Mueller"},"score":0,"creation_date":1418210398,"post_id":27360272,"comment_id":43244656,"body_markdown":"Probably most of the data can be retrieved, but the Recover tool right now can&#39;t handle this case. I will see what I can do, but it will take some time.","body":"Probably most of the data can be retrieved, but the Recover tool right now can&#39;t handle this case. I will see what I can do, but it will take some time."},{"owner":{"account_id":161745,"reputation":49235,"user_id":382763,"accept_rate":92,"display_name":"Thomas Mueller"},"score":1,"creation_date":1418296275,"post_id":27360272,"comment_id":43285245,"body_markdown":"I have change the Recover tool of H2 in the trunk so in theory it should continue even in this case. Would it be possible for you to test it? You would need to build H2 yourself from the trunk at https://code.google.com/p/support/source/checkout","body":"I have change the Recover tool of H2 in the trunk so in theory it should continue even in this case. Would it be possible for you to test it? You would need to build H2 yourself from the trunk at <a href=\"https://code.google.com/p/support/source/checkout\" rel=\"nofollow noreferrer\">code.google.com/p/support/source/checkout</a>"}],"answers":[{"tags":[],"owner":{"account_id":7899786,"reputation":151,"user_id":5967180,"display_name":"Justin Nguyen"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1456214492,"creation_date":1456214492,"answer_id":35571906,"question_id":27360272,"body_markdown":"I got the same situation last week with JIRA database, it took me few hours to do google regarding to this problem however, there are no answers which can resolve the situation.\r\n\r\nI decided to take a look at H2 source code and I can recover the whole database with very simple code. I may not understand whole picture about the situation e.g. root cause, in which condition it happened, etc. \r\nHowever, the cause is: when you connect to h2 file then H2 engine will look into auditLog and rollback the in-progress transactions, there are some data which have unknown type (id is 17) and H2 fails to rollback due to exception during recognize the type (id 17).\r\n\r\nMy code is simple, add h2 lib into your build path then just manual connect to file and clear auditLog because I think it is just the log and will not have big impact (someone may correct me).\r\nHopefully, you can resolve your problem as well.\r\n\r\n    public static void main(final String[] args) {\r\n\t\t// open the store (in-memory if fileName is null)\r\n\t\tfinal MVStore store = MVStore.open(&quot;C:\\\\temp\\\\h2db.mv.db&quot;);\r\n\r\n\t\tfinal MVMap&lt;Object, Object&gt; openMap = store.openMap(&quot;undoLog&quot;);\r\n\r\n\t\topenMap.clear();\r\n\r\n\t\t// close the store (this will persist changes)\r\n\t\tstore.close();\r\n\t}\r\n","title":"H2 - General&#160;error:&#160;&quot;java.lang.NullPointerException&quot;&#160;[50000-182]","body":"<p>I got the same situation last week with JIRA database, it took me few hours to do google regarding to this problem however, there are no answers which can resolve the situation.</p>\n\n<p>I decided to take a look at H2 source code and I can recover the whole database with very simple code. I may not understand whole picture about the situation e.g. root cause, in which condition it happened, etc. \nHowever, the cause is: when you connect to h2 file then H2 engine will look into auditLog and rollback the in-progress transactions, there are some data which have unknown type (id is 17) and H2 fails to rollback due to exception during recognize the type (id 17).</p>\n\n<p>My code is simple, add h2 lib into your build path then just manual connect to file and clear auditLog because I think it is just the log and will not have big impact (someone may correct me).\nHopefully, you can resolve your problem as well.</p>\n\n<pre><code>public static void main(final String[] args) {\n    // open the store (in-memory if fileName is null)\n    final MVStore store = MVStore.open(\"C:\\\\temp\\\\h2db.mv.db\");\n\n    final MVMap&lt;Object, Object&gt; openMap = store.openMap(\"undoLog\");\n\n    openMap.clear();\n\n    // close the store (this will persist changes)\n    store.close();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4230517,"reputation":78,"user_id":3462911,"display_name":"Kozaka"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1461053850,"creation_date":1461053850,"answer_id":36712519,"question_id":27360272,"body_markdown":"I had a similar problem:\r\n\r\n    [HY000][50000] Allgemeiner Fehler: &quot;java.lang.NullPointerException&quot;\r\n    General error: &quot;java.lang.NullPointerException&quot; [50000-176]\r\n    java.lang.NullPointerException\r\n\r\nI tried to connect with IntelliJ to H2 file DB. H2 driver version was 1.3.176 but the DB file version had 1.3.161. So downgraded the driver to 1.3.161 in IntelliJ solved the problem completely.","title":"H2 - General&#160;error:&#160;&quot;java.lang.NullPointerException&quot;&#160;[50000-182]","body":"<p>I had a similar problem:</p>\n\n<pre><code>[HY000][50000] Allgemeiner Fehler: \"java.lang.NullPointerException\"\nGeneral error: \"java.lang.NullPointerException\" [50000-176]\njava.lang.NullPointerException\n</code></pre>\n\n<p>I tried to connect with IntelliJ to H2 file DB. H2 driver version was 1.3.176 but the DB file version had 1.3.161. So downgraded the driver to 1.3.161 in IntelliJ solved the problem completely.</p>\n"},{"tags":[],"owner":{"account_id":12032503,"reputation":21,"user_id":8802280,"display_name":"Matthew Kenney"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1508433240,"creation_date":1508430163,"answer_id":46834569,"question_id":27360272,"body_markdown":"Another solution for this problem:\r\n\r\n1. Go to your home folder (~ in linux).\r\n\r\n2. Move all files named [*.mv.db] to a backup with a different name.  For example:  `mv xyz.mv.db xyz.mv.db.backup`\r\n\r\n3. Restart your database.\r\n\r\nThis seems to clear out MVStore meta-data used for H2 undo features, and resolves the NPE from the MV Store compare.","title":"H2 - General&#160;error:&#160;&quot;java.lang.NullPointerException&quot;&#160;[50000-182]","body":"<p>Another solution for this problem:</p>\n\n<ol>\n<li><p>Go to your home folder (~ in linux).</p></li>\n<li><p>Move all files named [*.mv.db] to a backup with a different name.  For example:  <code>mv xyz.mv.db xyz.mv.db.backup</code></p></li>\n<li><p>Restart your database.</p></li>\n</ol>\n\n<p>This seems to clear out MVStore meta-data used for H2 undo features, and resolves the NPE from the MV Store compare.</p>\n"}],"owner":{"account_id":1738273,"reputation":530,"user_id":1590342,"accept_rate":44,"display_name":"Lucas Wa"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12870,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":3,"score":8,"last_activity_date":1698055597,"creation_date":1418049180,"question_id":27360272,"body_markdown":"I have a quite big (&gt;2.5 GB) h2 database file. Driver version is 1.4.182. Everything worked fine but recently the DB stop to work with exception:\r\n\r\n    Błąd og&#243;lny: &quot;java.lang.NullPointerException&quot;\r\n    General error: &quot;java.lang.NullPointerException&quot; [50000-182] HY000/50000 (Help)\r\n    org.h2.jdbc.JdbcSQLException: Błąd og&#243;lny: &quot;java.lang.NullPointerException&quot;\r\n    General error: &quot;java.lang.NullPointerException&quot; [50000-182] \r\n        at org.h2.message.DbException.getJdbcSQLException(DbException.java:345) \r\n        at org.h2.message.DbException.get(DbException.java:168) \r\n        at org.h2.message.DbException.convert(DbException.java:295) \r\n        at org.h2.engine.Database.openDatabase(Database.java:297) \r\n        at org.h2.engine.Database.&lt;init&gt;(Database.java:260) \r\n        at org.h2.engine.Engine.openSession(Engine.java:60) \r\n        at org.h2.engine.Engine.openSession(Engine.java:167) \r\n        at org.h2.engine.Engine.createSessionAndValidate(Engine.java:145) \r\n        at org.h2.engine.Engine.createSession(Engine.java:128) \r\n        at org.h2.engine.Engine.createSession(Engine.java:26) \r\n        at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:347) \r\n        at org.h2.jdbc.JdbcConnection.&lt;init&gt;(JdbcConnection.java:108) \r\n        at org.h2.jdbc.JdbcConnection.&lt;init&gt;(JdbcConnection.java:92) \r\n        at org.h2.Driver.connect(Driver.java:72) \r\n        at org.h2.server.web.WebServer.getConnection(WebServer.java:750) \r\n        at org.h2.server.web.WebApp.test(WebApp.java:895) \r\n        at org.h2.server.web.WebApp.process(WebApp.java:221) \r\n        at org.h2.server.web.WebApp.processRequest(WebApp.java:170) \r\n        at org.h2.server.web.WebThread.process(WebThread.java:137) \r\n        at org.h2.server.web.WebThread.run(WebThread.java:93) \r\n        at java.lang.Thread.run(Thread.java:722) \r\n    Caused by: java.lang.NullPointerException \r\n        at org.h2.mvstore.db.ValueDataType.compare(ValueDataType.java:102) \r\n        at org.h2.mvstore.MVMap.compare(MVMap.java:741) \r\n        at org.h2.mvstore.Page.binarySearch(Page.java:388) \r\n        at org.h2.mvstore.MVMap.put(MVMap.java:179) \r\n        at org.h2.mvstore.MVMap.put(MVMap.java:133) \r\n        at org.h2.mvstore.db.TransactionStore.rollbackTo(TransactionStore.java:491) \r\n        at org.h2.mvstore.db.TransactionStore$Transaction.rollback(TransactionStore.java:785) \r\n        at org.h2.mvstore.db.MVTableEngine$Store.initTransactions(MVTableEngine.java:223) \r\n        at org.h2.engine.Database.open(Database.java:736) \r\n        at org.h2.engine.Database.openDatabase(Database.java:266) \r\n    ... 17 more \r\n\r\n\r\nThe problem occurs in my application and using H2 web frontend.\r\nI have tried solution from [similar question][1] but I cannot downgrade H2 to 1.3.x as it cannot read 1.4.x DB files. \r\n\r\n**My questions are**:\r\n\r\nHow to handle it? Is it to possible to make it work again? I have tried downgrade H2 to 1.4.177 but it didn&#39;t help.\r\n\r\nIs there any way to at least recover data to other format? I could use other DB (Sqlite, etc.) however I would need a way to get to these data.\r\n\r\n**EDIT:** updated stacktrace\r\n\r\n**EDIT 2:** Result of using Recovery tool:\r\n\r\n    $ java -cp h2-1.4.182.jar org.h2.tools.Recover\r\n    Exception in thread &quot;main&quot; java.lang.IllegalStateException: Unknown tag 50 [1.4.182/6]\r\n       at org.h2.mvstore.DataUtils.newIllegalStateException(DataUtils.java:762)\r\n       at org.h2.mvstore.type.ObjectDataType.read(ObjectDataType.java:222)\r\n       at org.h2.mvstore.db.TransactionStore$ArrayType.read(TransactionStore.java:1792)\r\n       at org.h2.mvstore.db.TransactionStore$ArrayType.read(TransactionStore.java:1759)\r\n       at org.h2.mvstore.Page.read(Page.java:843)\r\n       at org.h2.mvstore.Page.read(Page.java:230)\r\n       at org.h2.mvstore.MVStore.readPage(MVStore.java:1813)\r\n       at org.h2.mvstore.MVMap.readPage(MVMap.java:769)\r\n       at org.h2.mvstore.Page.getChildPage(Page.java:252)\r\n       at org.h2.mvstore.MVMap.getFirstLast(MVMap.java:351)\r\n       at org.h2.mvstore.MVMap.firstKey(MVMap.java:218)\r\n       at org.h2.mvstore.db.TransactionStore.init(TransactionStore.java:169)\r\n       at org.h2.mvstore.db.TransactionStore.&lt;init&gt;(TransactionStore.java:117)\r\n       at org.h2.mvstore.db.TransactionStore.&lt;init&gt;(TransactionStore.java:81)\r\n       at org.h2.tools.Recover.dumpMVStoreFile(Recover.java:593)\r\n       at org.h2.tools.Recover.process(Recover.java:331)\r\n       at org.h2.tools.Recover.runTool(Recover.java:192)\r\n       at org.h2.tools.Recover.main(Recover.java:155)\r\n\r\nI also noticed that two another files (.txt and .sql) has been created but they don&#39;t seem to contain  a data.\r\n\r\n  [1]: https://stackoverflow.com/questions/21724841/generic-error-50000-175-caused-by-nullpointerexception","title":"H2 - General&#160;error:&#160;&quot;java.lang.NullPointerException&quot;&#160;[50000-182]","body":"<p>I have a quite big (>2.5 GB) h2 database file. Driver version is 1.4.182. Everything worked fine but recently the DB stop to work with exception:</p>\n\n<pre><code>Błąd ogólny: \"java.lang.NullPointerException\"\nGeneral error: \"java.lang.NullPointerException\" [50000-182] HY000/50000 (Help)\norg.h2.jdbc.JdbcSQLException: Błąd ogólny: \"java.lang.NullPointerException\"\nGeneral error: \"java.lang.NullPointerException\" [50000-182] \n    at org.h2.message.DbException.getJdbcSQLException(DbException.java:345) \n    at org.h2.message.DbException.get(DbException.java:168) \n    at org.h2.message.DbException.convert(DbException.java:295) \n    at org.h2.engine.Database.openDatabase(Database.java:297) \n    at org.h2.engine.Database.&lt;init&gt;(Database.java:260) \n    at org.h2.engine.Engine.openSession(Engine.java:60) \n    at org.h2.engine.Engine.openSession(Engine.java:167) \n    at org.h2.engine.Engine.createSessionAndValidate(Engine.java:145) \n    at org.h2.engine.Engine.createSession(Engine.java:128) \n    at org.h2.engine.Engine.createSession(Engine.java:26) \n    at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:347) \n    at org.h2.jdbc.JdbcConnection.&lt;init&gt;(JdbcConnection.java:108) \n    at org.h2.jdbc.JdbcConnection.&lt;init&gt;(JdbcConnection.java:92) \n    at org.h2.Driver.connect(Driver.java:72) \n    at org.h2.server.web.WebServer.getConnection(WebServer.java:750) \n    at org.h2.server.web.WebApp.test(WebApp.java:895) \n    at org.h2.server.web.WebApp.process(WebApp.java:221) \n    at org.h2.server.web.WebApp.processRequest(WebApp.java:170) \n    at org.h2.server.web.WebThread.process(WebThread.java:137) \n    at org.h2.server.web.WebThread.run(WebThread.java:93) \n    at java.lang.Thread.run(Thread.java:722) \nCaused by: java.lang.NullPointerException \n    at org.h2.mvstore.db.ValueDataType.compare(ValueDataType.java:102) \n    at org.h2.mvstore.MVMap.compare(MVMap.java:741) \n    at org.h2.mvstore.Page.binarySearch(Page.java:388) \n    at org.h2.mvstore.MVMap.put(MVMap.java:179) \n    at org.h2.mvstore.MVMap.put(MVMap.java:133) \n    at org.h2.mvstore.db.TransactionStore.rollbackTo(TransactionStore.java:491) \n    at org.h2.mvstore.db.TransactionStore$Transaction.rollback(TransactionStore.java:785) \n    at org.h2.mvstore.db.MVTableEngine$Store.initTransactions(MVTableEngine.java:223) \n    at org.h2.engine.Database.open(Database.java:736) \n    at org.h2.engine.Database.openDatabase(Database.java:266) \n... 17 more \n</code></pre>\n\n<p>The problem occurs in my application and using H2 web frontend.\nI have tried solution from <a href=\"https://stackoverflow.com/questions/21724841/generic-error-50000-175-caused-by-nullpointerexception\">similar question</a> but I cannot downgrade H2 to 1.3.x as it cannot read 1.4.x DB files. </p>\n\n<p><strong>My questions are</strong>:</p>\n\n<p>How to handle it? Is it to possible to make it work again? I have tried downgrade H2 to 1.4.177 but it didn't help.</p>\n\n<p>Is there any way to at least recover data to other format? I could use other DB (Sqlite, etc.) however I would need a way to get to these data.</p>\n\n<p><strong>EDIT:</strong> updated stacktrace</p>\n\n<p><strong>EDIT 2:</strong> Result of using Recovery tool:</p>\n\n<pre><code>$ java -cp h2-1.4.182.jar org.h2.tools.Recover\nException in thread \"main\" java.lang.IllegalStateException: Unknown tag 50 [1.4.182/6]\n   at org.h2.mvstore.DataUtils.newIllegalStateException(DataUtils.java:762)\n   at org.h2.mvstore.type.ObjectDataType.read(ObjectDataType.java:222)\n   at org.h2.mvstore.db.TransactionStore$ArrayType.read(TransactionStore.java:1792)\n   at org.h2.mvstore.db.TransactionStore$ArrayType.read(TransactionStore.java:1759)\n   at org.h2.mvstore.Page.read(Page.java:843)\n   at org.h2.mvstore.Page.read(Page.java:230)\n   at org.h2.mvstore.MVStore.readPage(MVStore.java:1813)\n   at org.h2.mvstore.MVMap.readPage(MVMap.java:769)\n   at org.h2.mvstore.Page.getChildPage(Page.java:252)\n   at org.h2.mvstore.MVMap.getFirstLast(MVMap.java:351)\n   at org.h2.mvstore.MVMap.firstKey(MVMap.java:218)\n   at org.h2.mvstore.db.TransactionStore.init(TransactionStore.java:169)\n   at org.h2.mvstore.db.TransactionStore.&lt;init&gt;(TransactionStore.java:117)\n   at org.h2.mvstore.db.TransactionStore.&lt;init&gt;(TransactionStore.java:81)\n   at org.h2.tools.Recover.dumpMVStoreFile(Recover.java:593)\n   at org.h2.tools.Recover.process(Recover.java:331)\n   at org.h2.tools.Recover.runTool(Recover.java:192)\n   at org.h2.tools.Recover.main(Recover.java:155)\n</code></pre>\n\n<p>I also noticed that two another files (.txt and .sql) has been created but they don't seem to contain  a data.</p>\n"},{"tags":["java","spring","spring-boot","spring-webflux"],"owner":{"account_id":11409918,"reputation":1,"user_id":8364394,"display_name":"fokas90"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698054893,"creation_date":1698054893,"question_id":77344230,"body_markdown":"The OTEL spec has json-rpc part. It requires to pass attributes that must be extraceted from request and responce bodies. I can&#39;t find out how to get access to request body in webflux. I&#39;ve just found a posibility to add ExchangeFilterFunction where I can get access to a response body, but not request. Also, OTEL Context has Scope that must be opened and closed in same thread (if I&#39;m not mistaken), therefore extracting request body should respect that.\r\n\r\nIs there posibility to extract request body so that I can insert attributes to otel span from it?\r\nIs there pass some request context that I can read inside ExchangeFilterFunction?\r\n\r\n\r\nI&#39;ve tried implement some kind of custom interceptor. I grab request before executing WebClient exchanging. At that moment I start a Span and then subscribe Mono/Flux in order to get access to response body (via doOnSuccess/doOnError). By that way I can&#39;t close Scope in the same Thread because WebClient uses own thread pool for exchanging.\r\nShort code for explainig\r\n\r\n```java\r\nvar request = ...\r\nvar jsonrpcOtelInterceptor = obtainInterceptor();\r\nvar publisher = doCall(request,...) //Mono/Flux\r\nreturn publisher.doOnSubscribe(jsonrpcOtelInterceptor.before(request)) // &lt;--- there main thread and start otel request context\r\n         .doOnSuccess(response -&gt; jsonrpcOtelInterceptor.after(response, null)) // &lt;--- reactor&#39;s thread, there close request context and scope\r\n         .doOnError(error -&gt; jsonrpcOtelInterceptor.after(null, error));\r\n```\r\n","title":"Opentelemetry for jsonrpc via spring webflux","body":"<p>The OTEL spec has json-rpc part. It requires to pass attributes that must be extraceted from request and responce bodies. I can't find out how to get access to request body in webflux. I've just found a posibility to add ExchangeFilterFunction where I can get access to a response body, but not request. Also, OTEL Context has Scope that must be opened and closed in same thread (if I'm not mistaken), therefore extracting request body should respect that.</p>\n<p>Is there posibility to extract request body so that I can insert attributes to otel span from it?\nIs there pass some request context that I can read inside ExchangeFilterFunction?</p>\n<p>I've tried implement some kind of custom interceptor. I grab request before executing WebClient exchanging. At that moment I start a Span and then subscribe Mono/Flux in order to get access to response body (via doOnSuccess/doOnError). By that way I can't close Scope in the same Thread because WebClient uses own thread pool for exchanging.\nShort code for explainig</p>\n<pre class=\"lang-java prettyprint-override\"><code>var request = ...\nvar jsonrpcOtelInterceptor = obtainInterceptor();\nvar publisher = doCall(request,...) //Mono/Flux\nreturn publisher.doOnSubscribe(jsonrpcOtelInterceptor.before(request)) // &lt;--- there main thread and start otel request context\n         .doOnSuccess(response -&gt; jsonrpcOtelInterceptor.after(response, null)) // &lt;--- reactor's thread, there close request context and scope\n         .doOnError(error -&gt; jsonrpcOtelInterceptor.after(null, error));\n</code></pre>\n"},{"tags":["java","sorting","data-structures","comparable","timsort"],"comments":[{"owner":{"account_id":5964120,"reputation":4275,"user_id":4688321,"display_name":"kiner_shah"},"score":1,"creation_date":1698055086,"post_id":77344220,"comment_id":136352145,"body_markdown":"It probably uses the comparable to compare two objects and then swaps it internally. What the comparable should return is what you define and that controls ascending, descending.","body":"It probably uses the comparable to compare two objects and then swaps it internally. What the comparable should return is what you define and that controls ascending, descending."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1698059537,"post_id":77344220,"comment_id":136352851,"body_markdown":"The sorting gets to know the sort order by calling your `compareTo` method. If you return a negative number, it means that this car is “less than” the other car, so the *sorting algorithm* will be sort it before the other car. A positive number would mean the opposite. I also find it a bit hard to hold in my head, but I just use it and trust that it works and never got disappointed.","body":"The sorting gets to know the sort order by calling your <code>compareTo</code> method. If you return a negative number, it means that this car is “less than” the other car, so the <i>sorting algorithm</i> will be sort it before the other car. A positive number would mean the opposite. I also find it a bit hard to hold in my head, but I just use it and trust that it works and never got disappointed."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1698382159,"post_id":77344220,"comment_id":136400807,"body_markdown":"*`compareTo()` method would follow natural ordering by default.* No, it’s the other way around: The *natural ordering* is *defined* as the ordering given by `compareTo()`.","body":"<i><code>compareTo()</code> method would follow natural ordering by default.</i> No, it’s the other way around: The <i>natural ordering</i> is <i>defined</i> as the ordering given by <code>compareTo()</code>."}],"owner":{"account_id":10135165,"reputation":79,"user_id":7487000,"accept_rate":40,"display_name":"Rakesh .p"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698054731,"creation_date":1698054731,"question_id":77344220,"body_markdown":"I have been looking at different articles on internet and everyone mentions that `compareTo()` method would follow natural ordering by default. Let&#39;s taken an example.\r\n\r\n    class Car implements Comparable&lt;Car&gt; {\r\n      int id\r\n      Car(int id){\r\n        this.id = id;\r\n      }\r\n\r\n      public int compareTo(Car car){\r\n        return this.id - car.id;    //ascending\r\n      }\r\n\r\n    }\r\n\r\n It was mentioned that compareTo only specifies if the object being compared with the current object is greater, smaller or equal and it really does n&#39;t control the swap of the elements in\r\nsorting. if so, why does the array gets sorted when we just reverse the return type like\r\n\r\n    return car.id - this.id     //descending\r\n\r\nHere, the main question is if the compareTo purpose is only to find which object is smaller or greater How does the timsort understands if the sorting should be in ascending or descending order. We have n&#39;t specified it anywhere. please explain with any example so it would help everyone. Thanks in advance","title":"Internal working of timsort and compareTo() method in Comparable interface","body":"<p>I have been looking at different articles on internet and everyone mentions that <code>compareTo()</code> method would follow natural ordering by default. Let's taken an example.</p>\n<pre><code>class Car implements Comparable&lt;Car&gt; {\n  int id\n  Car(int id){\n    this.id = id;\n  }\n\n  public int compareTo(Car car){\n    return this.id - car.id;    //ascending\n  }\n\n}\n</code></pre>\n<p>It was mentioned that compareTo only specifies if the object being compared with the current object is greater, smaller or equal and it really does n't control the swap of the elements in\nsorting. if so, why does the array gets sorted when we just reverse the return type like</p>\n<pre><code>return car.id - this.id     //descending\n</code></pre>\n<p>Here, the main question is if the compareTo purpose is only to find which object is smaller or greater How does the timsort understands if the sorting should be in ascending or descending order. We have n't specified it anywhere. please explain with any example so it would help everyone. Thanks in advance</p>\n"},{"tags":["java","spring-boot","multithreading","multipartform-data"],"owner":{"account_id":29733799,"reputation":1,"user_id":22787812,"display_name":"Ayush Kumar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698054037,"creation_date":1698054037,"question_id":77344155,"body_markdown":"I have a rest end point that accepts a file as an input which is currently a multipart file, and since this is a multipart file this file is first stored on a temp location on the tomcat server and then we read this file from this temp location and then deploy it to the object store.\r\n\r\n1. I want to change this implementation so that we no longer need to store this file in temp location on tomcat .\r\n2. Since the file size is going to be huge in my case that is above 50MB for sure I need this operation to be performed asynchronously.\r\n\r\n\r\n\r\nAny suggestion from the community on how I can achieve this.\r\n\r\n\r\nSo far I have tried `HttpServletRequest` and then from this request I have extracted the InputStream and synchronously I am able to deploy the file to object store .","title":"Upload a file to Object Store without needing to store the file on local tomcat server","body":"<p>I have a rest end point that accepts a file as an input which is currently a multipart file, and since this is a multipart file this file is first stored on a temp location on the tomcat server and then we read this file from this temp location and then deploy it to the object store.</p>\n<ol>\n<li>I want to change this implementation so that we no longer need to store this file in temp location on tomcat .</li>\n<li>Since the file size is going to be huge in my case that is above 50MB for sure I need this operation to be performed asynchronously.</li>\n</ol>\n<p>Any suggestion from the community on how I can achieve this.</p>\n<p>So far I have tried <code>HttpServletRequest</code> and then from this request I have extracted the InputStream and synchronously I am able to deploy the file to object store .</p>\n"},{"tags":["java","selenium","maven","selenium-webdriver","nosuchmethoderror"],"answers":[{"tags":[],"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1644699051,"creation_date":1644699051,"answer_id":71095778,"question_id":71095560,"body_markdown":"This error message...\r\n\r\n\tjava.lang.NoSuchMethodError: &#39;com.google.common.collect.ImmutableMap com.google.common.collect.ImmutableMap.of(java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object)&#39;\r\n\r\n...implies that there is _NoSuchMethod_ as `com.google.common.collect.ImmutableMap` which indicates it might be corrupted or there is some incompatibility between the version of the binaries you are using specifically with the **guava** _version_ / _dependency_ (maven).\r\n\r\n\r\n----------\r\n\r\n\r\nYou need to take care of a couple of things as follows:\r\n\r\n- You need to add the `System.setProperty()`:\r\n\r\n\t  System.setProperty(&quot;webdriver.gecko.driver&quot;,&quot;C:\\\\Program Files\\\\Java\\\\jre1.8.0_231\\\\lib\\\\ext\\\\geckodriver.exe&quot;);\r\n\t\t\r\n- Use only a single instance of WebDriver, either from the _class_ scope or from the _method_ scope.\r\n- Effectively, you line of code will be;\r\n\r\n\t  public class TestYoutubeClass {\r\n\t      WebDriver driver;\r\n\t      @Before\r\n\t      public void runDriver(){\r\n\t\t      System.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;/path/to/chromedriver&quot;);\r\n\t\t      driver = new ChromeDriver();\r\n\t\t      driver.get(&quot;http://www.kabum.com.br&quot;);\r\n\r\n- Incase you are using [tag:maven] deleting the corrupt/incompatible `.m2` folder can solve your issue.","title":"java.lang.NoSuchMethodError: &#39;com.google.common.collect.ImmutableMap error when trying to execute tests using Chromedriver and Maven","body":"<p>This error message...</p>\n<pre><code>java.lang.NoSuchMethodError: 'com.google.common.collect.ImmutableMap com.google.common.collect.ImmutableMap.of(java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object)'\n</code></pre>\n<p>...implies that there is <em>NoSuchMethod</em> as <code>com.google.common.collect.ImmutableMap</code> which indicates it might be corrupted or there is some incompatibility between the version of the binaries you are using specifically with the <strong>guava</strong> <em>version</em> / <em>dependency</em> (maven).</p>\n<hr />\n<p>You need to take care of a couple of things as follows:</p>\n<ul>\n<li><p>You need to add the <code>System.setProperty()</code>:</p>\n<pre><code>System.setProperty(&quot;webdriver.gecko.driver&quot;,&quot;C:\\\\Program Files\\\\Java\\\\jre1.8.0_231\\\\lib\\\\ext\\\\geckodriver.exe&quot;);\n</code></pre>\n</li>\n<li><p>Use only a single instance of WebDriver, either from the <em>class</em> scope or from the <em>method</em> scope.</p>\n</li>\n<li><p>Effectively, you line of code will be;</p>\n<pre><code>public class TestYoutubeClass {\n    WebDriver driver;\n    @Before\n    public void runDriver(){\n        System.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;/path/to/chromedriver&quot;);\n        driver = new ChromeDriver();\n        driver.get(&quot;http://www.kabum.com.br&quot;);\n</code></pre>\n</li>\n<li><p>Incase you are using <a href=\"/questions/tagged/maven\" class=\"post-tag\" title=\"show questions tagged &#39;maven&#39;\" rel=\"tag\">maven</a> deleting the corrupt/incompatible <code>.m2</code> folder can solve your issue.</p>\n</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":7992105,"reputation":244,"user_id":6029661,"display_name":"Alex.K"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1644906460,"creation_date":1644840383,"answer_id":71111639,"question_id":71095560,"body_markdown":"Theres seems to be a bug in 5.0.x versions of webdrivermanager, see last two messages in this thread - https://github.com/bonigarcia/webdrivermanager/issues/576\r\n\r\nTry switching the webdrivermanager dependency version to 4.4.3, worked for me.","title":"java.lang.NoSuchMethodError: &#39;com.google.common.collect.ImmutableMap error when trying to execute tests using Chromedriver and Maven","body":"<p>Theres seems to be a bug in 5.0.x versions of webdrivermanager, see last two messages in this thread - <a href=\"https://github.com/bonigarcia/webdrivermanager/issues/576\" rel=\"nofollow noreferrer\">https://github.com/bonigarcia/webdrivermanager/issues/576</a></p>\n<p>Try switching the webdrivermanager dependency version to 4.4.3, worked for me.</p>\n"},{"tags":[],"owner":{"account_id":24283040,"reputation":121,"user_id":18229223,"display_name":"Alex Boghda"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1645066132,"creation_date":1645066132,"answer_id":71151881,"question_id":71095560,"body_markdown":"I&#39;m using maven and downgraded Version 4.1.2 to 4.1.1 solved my problem\r\n \r\n\r\n&lt;!-- https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-java --&gt;\r\n\t\t\r\n    &lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;4.1.1&lt;/version&gt;\r\n    &lt;/dependency&gt;","title":"java.lang.NoSuchMethodError: &#39;com.google.common.collect.ImmutableMap error when trying to execute tests using Chromedriver and Maven","body":"<p>I'm using maven and downgraded Version 4.1.2 to 4.1.1 solved my problem</p>\n\n<pre><code>&lt;dependency&gt;\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n            &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n            &lt;version&gt;4.1.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12480263,"reputation":10843,"user_id":9085273,"display_name":"rieckpil"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1645190559,"creation_date":1645190559,"answer_id":71174201,"question_id":71095560,"body_markdown":"The issue comes from conflicting Guava (transitive dependency) versions.\r\n\r\nIt should be fixed with the [WebDriverManager version 5.1.0][1].\r\n\r\nAs an alternative, you can also use the `&lt;dependencyManagement&gt;` section of your `pom.xml` to _force_ a resolution of the latest Guava version:\r\n\r\n    &lt;dependencyManagement&gt;\r\n      &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\r\n          &lt;artifactId&gt;guava&lt;/artifactId&gt;\r\n          &lt;version&gt;31.0.1-jre&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n      &lt;/dependencies&gt;\r\n    &lt;/dependencyManagement&gt;\r\n\r\nor exclude the Guava dependency from the WebDriverManager (no longer required for &gt;= 5.1.0):\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\r\n        &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\r\n        &lt;version&gt;5.0.3&lt;/version&gt;\r\n        &lt;exclusions&gt;\r\n            &lt;exclusion&gt;\r\n                &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\r\n                &lt;artifactId&gt;guava&lt;/artifactId&gt;\r\n            &lt;/exclusion&gt;\r\n        &lt;/exclusions&gt;\r\n    &lt;/dependency&gt;\r\n\r\nPS: To ensure dependency convergence for your Maven project, consider adding the Maven Enforcer Plugin [to detect multiple versions][2] of the transitive dependency early on.\r\n\r\n\r\n  [1]: https://github.com/bonigarcia/webdrivermanager/blob/master/CHANGELOG.md#removed\r\n  [2]: https://rieckpil.de/top-3-maven-plugins-to-ensure-quality-and-security-for-your-project/","title":"java.lang.NoSuchMethodError: &#39;com.google.common.collect.ImmutableMap error when trying to execute tests using Chromedriver and Maven","body":"<p>The issue comes from conflicting Guava (transitive dependency) versions.</p>\n<p>It should be fixed with the <a href=\"https://github.com/bonigarcia/webdrivermanager/blob/master/CHANGELOG.md#removed\" rel=\"noreferrer\">WebDriverManager version 5.1.0</a>.</p>\n<p>As an alternative, you can also use the <code>&lt;dependencyManagement&gt;</code> section of your <code>pom.xml</code> to <em>force</em> a resolution of the latest Guava version:</p>\n<pre><code>&lt;dependencyManagement&gt;\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n      &lt;artifactId&gt;guava&lt;/artifactId&gt;\n      &lt;version&gt;31.0.1-jre&lt;/version&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n&lt;/dependencyManagement&gt;\n</code></pre>\n<p>or exclude the Guava dependency from the WebDriverManager (no longer required for &gt;= 5.1.0):</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\n    &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\n    &lt;version&gt;5.0.3&lt;/version&gt;\n    &lt;exclusions&gt;\n        &lt;exclusion&gt;\n            &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n            &lt;artifactId&gt;guava&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n    &lt;/exclusions&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>PS: To ensure dependency convergence for your Maven project, consider adding the Maven Enforcer Plugin <a href=\"https://rieckpil.de/top-3-maven-plugins-to-ensure-quality-and-security-for-your-project/\" rel=\"noreferrer\">to detect multiple versions</a> of the transitive dependency early on.</p>\n"},{"tags":[],"owner":{"account_id":24365070,"reputation":81,"user_id":18298929,"display_name":"Upasana"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1645704552,"creation_date":1645704552,"answer_id":71251754,"question_id":71095560,"body_markdown":"I also faced the above issue after adding below dependency it worked fine. I am using Chrome 98 version\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\r\n          &lt;artifactId&gt;guava&lt;/artifactId&gt;\r\n          &lt;version&gt;31.0.1-jre&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n      &lt;/dependencies&gt;\r\n\r\n","title":"java.lang.NoSuchMethodError: &#39;com.google.common.collect.ImmutableMap error when trying to execute tests using Chromedriver and Maven","body":"<p>I also faced the above issue after adding below dependency it worked fine. I am using Chrome 98 version</p>\n<pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n      &lt;artifactId&gt;guava&lt;/artifactId&gt;\n      &lt;version&gt;31.0.1-jre&lt;/version&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3062301,"reputation":1119,"user_id":2594694,"accept_rate":50,"display_name":"Asraful Haque"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1652086975,"creation_date":1652086975,"answer_id":72169417,"question_id":71095560,"body_markdown":"If you are using Maven pom.xml file then\r\ncheck the version of the WebDriverManager below 5.1.0 .\r\nI used the below version \r\n\r\n&gt; (5.1.0)\r\n\r\n to solve the shown issue!\r\n\r\n&lt;!-- https://mvnrepository.com/artifact/io.github.bonigarcia/webdrivermanager --&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;5.1.0&lt;/version&gt;\r\n\t&lt;/dependency&gt;","title":"java.lang.NoSuchMethodError: &#39;com.google.common.collect.ImmutableMap error when trying to execute tests using Chromedriver and Maven","body":"<p>If you are using Maven pom.xml file then\ncheck the version of the WebDriverManager below 5.1.0 .\nI used the below version</p>\n<blockquote>\n<p>(5.1.0)</p>\n</blockquote>\n<p>to solve the shown issue!</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\n    &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\n    &lt;version&gt;5.1.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24216077,"reputation":11,"user_id":18171948,"display_name":"siva"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1655237559,"creation_date":1655237559,"answer_id":72622861,"question_id":71095560,"body_markdown":"use version version 4.1.1\r\n\r\n    &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.1.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;","title":"java.lang.NoSuchMethodError: &#39;com.google.common.collect.ImmutableMap error when trying to execute tests using Chromedriver and Maven","body":"<p>use version version 4.1.1</p>\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n        &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n        &lt;version&gt;4.1.1&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25173965,"reputation":21,"user_id":19016445,"display_name":"Thư Nguyễn"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1655315356,"creation_date":1655279062,"answer_id":72627590,"question_id":71095560,"body_markdown":"Just add\r\n\r\n    \tworkbook.close();\r\n\r\n\r\n \t\r\nOr try this code in your pom.xml, it works for me\r\n\r\n    \t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.google.guava&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;guava&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;31.0.1-jre&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.2.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.0.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n","title":"java.lang.NoSuchMethodError: &#39;com.google.common.collect.ImmutableMap error when trying to execute tests using Chromedriver and Maven","body":"<p>Just add</p>\n<pre><code>    workbook.close();\n</code></pre>\n<p>Or try this code in your pom.xml, it works for me</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n        &lt;artifactId&gt;guava&lt;/artifactId&gt;\n        &lt;version&gt;31.0.1-jre&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n        &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n        &lt;version&gt;4.2.0&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\n        &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\n        &lt;version&gt;5.0.1&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5165021,"reputation":108,"user_id":4135343,"display_name":"PVDM"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1657395439,"creation_date":1657395439,"answer_id":72924125,"question_id":71095560,"body_markdown":"Looking at the master branch of Guava today, it looks like the actual issue is simply that no version of `com.google.common.collect.ImmutableMap.of(...)` accepts more than 10 parameters (the thread starter&#39;s error shows 12). It is documented in the source code here:\r\n\r\nhttps://github.com/google/guava/blob/master/guava/src/com/google/common/collect/ImmutableMap.java\r\n\r\nThis is the comment after the version that accepts 10 entries:\r\n`// looking for of() with &gt; 10 entries? Use the builder or ofEntries instead.`\r\n\r\nI am suggesting the usage of .of() in Selenium is changed to on of the suggested methods in the copied comment above since this seems to be a recurring issue for a lot of people.\r\n\r\nWill try to re-open this issue to get this taken care of:\r\nhttps://github.com/SeleniumHQ/selenium/issues/10324","title":"java.lang.NoSuchMethodError: &#39;com.google.common.collect.ImmutableMap error when trying to execute tests using Chromedriver and Maven","body":"<p>Looking at the master branch of Guava today, it looks like the actual issue is simply that no version of <code>com.google.common.collect.ImmutableMap.of(...)</code> accepts more than 10 parameters (the thread starter's error shows 12). It is documented in the source code here:</p>\n<p><a href=\"https://github.com/google/guava/blob/master/guava/src/com/google/common/collect/ImmutableMap.java\" rel=\"nofollow noreferrer\">https://github.com/google/guava/blob/master/guava/src/com/google/common/collect/ImmutableMap.java</a></p>\n<p>This is the comment after the version that accepts 10 entries:\n<code>// looking for of() with &gt; 10 entries? Use the builder or ofEntries instead.</code></p>\n<p>I am suggesting the usage of .of() in Selenium is changed to on of the suggested methods in the copied comment above since this seems to be a recurring issue for a lot of people.</p>\n<p>Will try to re-open this issue to get this taken care of:\n<a href=\"https://github.com/SeleniumHQ/selenium/issues/10324\" rel=\"nofollow noreferrer\">https://github.com/SeleniumHQ/selenium/issues/10324</a></p>\n"},{"tags":[],"owner":{"account_id":23997127,"reputation":1,"user_id":17982517,"display_name":"Enzo33B3I1I2"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668691009,"creation_date":1668691009,"answer_id":74476137,"question_id":71095560,"body_markdown":"I have personally solved these with these versions:\r\n\r\n    &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n        &lt;spring.boot.version&gt;1.5.21.RELEASE&lt;/spring.boot.version&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n            &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n            &lt;version&gt;4.1.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\r\n            &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\r\n            &lt;version&gt;5.0.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n    &lt;/dependencies&gt;","title":"java.lang.NoSuchMethodError: &#39;com.google.common.collect.ImmutableMap error when trying to execute tests using Chromedriver and Maven","body":"<p>I have personally solved these with these versions:</p>\n<pre><code>&lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n    &lt;spring.boot.version&gt;1.5.21.RELEASE&lt;/spring.boot.version&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n        &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n        &lt;version&gt;4.1.1&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\n        &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\n        &lt;version&gt;5.0.1&lt;/version&gt;\n    &lt;/dependency&gt;\n\n&lt;/dependencies&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27443047,"reputation":11,"user_id":20937412,"display_name":"Venkatesh Thatha"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672928485,"creation_date":1672928485,"answer_id":75019880,"question_id":71095560,"body_markdown":"    &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\r\n            &lt;artifactId&gt;guava&lt;/artifactId&gt;\r\n            &lt;version&gt;31.0.1-jre&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;!-- https://mvnrepository.com/artifact/io.github.bonigarcia/webdrivermanager  --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\r\n        &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\r\n        &lt;version&gt;5.1.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n        &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n        &lt;version&gt;4.2.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    I used above version in pom.xml.This will help me to come out of this error.","title":"java.lang.NoSuchMethodError: &#39;com.google.common.collect.ImmutableMap error when trying to execute tests using Chromedriver and Maven","body":"<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n        &lt;artifactId&gt;guava&lt;/artifactId&gt;\n        &lt;version&gt;31.0.1-jre&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;!-- https://mvnrepository.com/artifact/io.github.bonigarcia/webdrivermanager  --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\n    &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\n    &lt;version&gt;5.1.0&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n    &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n    &lt;version&gt;4.2.0&lt;/version&gt;\n&lt;/dependency&gt;\nI used above version in pom.xml.This will help me to come out of this error.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1046620,"reputation":3372,"user_id":1051462,"display_name":"Dmitri Algazin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672942017,"creation_date":1672942017,"answer_id":75022624,"question_id":71095560,"body_markdown":"Spend another 3 hours fighting with selenium.\r\n\r\nThat worked for me:\r\n\r\n        &lt;selenium.version&gt;4.1.2&lt;/selenium.version&gt;\r\n        &lt;selenium-webdrivermanager.version&gt;5.0.1&lt;/selenium-webdrivermanager.version&gt;\r\n        &lt;guava.version&gt;31.0.1-jre&lt;/guava.version&gt;\r\n\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n            &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n            &lt;version&gt;${selenium.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n            &lt;artifactId&gt;selenium-leg-rc&lt;/artifactId&gt;\r\n            &lt;version&gt;${selenium.version}&lt;/version&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;org.testng&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;testng&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n            &lt;artifactId&gt;selenium-api&lt;/artifactId&gt;\r\n            &lt;version&gt;${selenium.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n            &lt;artifactId&gt;selenium-chrome-driver&lt;/artifactId&gt;\r\n            &lt;version&gt;${selenium.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n            &lt;artifactId&gt;selenium-remote-driver&lt;/artifactId&gt;\r\n            &lt;version&gt;${selenium.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n            &lt;artifactId&gt;selenium-support&lt;/artifactId&gt;\r\n            &lt;version&gt;${selenium.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\r\n            &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\r\n            &lt;version&gt;${selenium-webdrivermanager.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\r\n            &lt;artifactId&gt;guava&lt;/artifactId&gt;\r\n            &lt;version&gt;${guava.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;","title":"java.lang.NoSuchMethodError: &#39;com.google.common.collect.ImmutableMap error when trying to execute tests using Chromedriver and Maven","body":"<p>Spend another 3 hours fighting with selenium.</p>\n<p>That worked for me:</p>\n<pre><code>    &lt;selenium.version&gt;4.1.2&lt;/selenium.version&gt;\n    &lt;selenium-webdrivermanager.version&gt;5.0.1&lt;/selenium-webdrivermanager.version&gt;\n    &lt;guava.version&gt;31.0.1-jre&lt;/guava.version&gt;\n\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n        &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n        &lt;version&gt;${selenium.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n        &lt;artifactId&gt;selenium-leg-rc&lt;/artifactId&gt;\n        &lt;version&gt;${selenium.version}&lt;/version&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;org.testng&lt;/groupId&gt;\n                &lt;artifactId&gt;testng&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n        &lt;artifactId&gt;selenium-api&lt;/artifactId&gt;\n        &lt;version&gt;${selenium.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n        &lt;artifactId&gt;selenium-chrome-driver&lt;/artifactId&gt;\n        &lt;version&gt;${selenium.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n        &lt;artifactId&gt;selenium-remote-driver&lt;/artifactId&gt;\n        &lt;version&gt;${selenium.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n        &lt;artifactId&gt;selenium-support&lt;/artifactId&gt;\n        &lt;version&gt;${selenium.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\n        &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\n        &lt;version&gt;${selenium-webdrivermanager.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n        &lt;artifactId&gt;guava&lt;/artifactId&gt;\n        &lt;version&gt;${guava.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29170437,"reputation":1,"user_id":22346937,"display_name":"Naveen Dwivedi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698053883,"creation_date":1698053883,"answer_id":77344140,"question_id":71095560,"body_markdown":"It solved while I am using this dependency.\r\nUse selenium 4.1.1 version.\r\n\r\n\r\n   ","title":"java.lang.NoSuchMethodError: &#39;com.google.common.collect.ImmutableMap error when trying to execute tests using Chromedriver and Maven","body":"<p>It solved while I am using this dependency.\nUse selenium 4.1.1 version.</p>\n"}],"owner":{"account_id":13061287,"reputation":151,"user_id":9438380,"display_name":"Tuna"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51054,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"answer_count":13,"score":15,"last_activity_date":1698053883,"creation_date":1644697244,"question_id":71095560,"body_markdown":"I am new to selenium tests and I am currently watching some youtube videos using maven.\r\n\r\nToday I tried a few codes and worked fine but when accessing one store page and trying to search a product it gives me &quot;Access Denied&quot; message\r\nSo I tried a few ways to open chrome instead of chromedriver.\r\n\r\nBut I gave up and was willing to try another webpage. But now chromedriver wont open (gives error message). operadriver, geckodriver and etc will immediately close after launch.\r\n\r\nI am getting this error:\r\n```\r\njava.lang.NoSuchMethodError: &#39;com.google.common.collect.ImmutableMap com.google.common.collect.ImmutableMap.of(java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object)&#39;\r\n```\r\nI tried looking in a lot of places but most said it was guava version, I dont use guava, even though I tried adding it to dependencies...\r\n\r\nMy code is this:\r\n\r\n    public class TestYoutubeClass {\r\n        WebDriver driver;\r\n        @Before\r\n        public void runDriver(){\r\n            WebDriver driver = new ChromeDriver();\r\n            driver.get(&quot;http://www.kabum.com.br&quot;);\r\n\r\nI tried starting from the beginning and nothing worked.\r\nI am using IntelliJ\r\nOn `pom.xml` I added: `junit; selenium-java` and `webdrivermanager`.\r\n\r\nEvery help is really appreciated.","title":"java.lang.NoSuchMethodError: &#39;com.google.common.collect.ImmutableMap error when trying to execute tests using Chromedriver and Maven","body":"<p>I am new to selenium tests and I am currently watching some youtube videos using maven.</p>\n<p>Today I tried a few codes and worked fine but when accessing one store page and trying to search a product it gives me &quot;Access Denied&quot; message\nSo I tried a few ways to open chrome instead of chromedriver.</p>\n<p>But I gave up and was willing to try another webpage. But now chromedriver wont open (gives error message). operadriver, geckodriver and etc will immediately close after launch.</p>\n<p>I am getting this error:</p>\n<pre><code>java.lang.NoSuchMethodError: 'com.google.common.collect.ImmutableMap com.google.common.collect.ImmutableMap.of(java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object, java.lang.Object)'\n</code></pre>\n<p>I tried looking in a lot of places but most said it was guava version, I dont use guava, even though I tried adding it to dependencies...</p>\n<p>My code is this:</p>\n<pre><code>public class TestYoutubeClass {\n    WebDriver driver;\n    @Before\n    public void runDriver(){\n        WebDriver driver = new ChromeDriver();\n        driver.get(&quot;http://www.kabum.com.br&quot;);\n</code></pre>\n<p>I tried starting from the beginning and nothing worked.\nI am using IntelliJ\nOn <code>pom.xml</code> I added: <code>junit; selenium-java</code> and <code>webdrivermanager</code>.</p>\n<p>Every help is really appreciated.</p>\n"},{"tags":["java","spring","maven","junit"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":5,"creation_date":1400698650,"post_id":23789271,"comment_id":36592313,"body_markdown":"You are mixing Spring versions (4.0.2, 3.1.4 and 2.0.8) never mix versions of a framework that is trouble waiting to happen. Note `spring-dap` is now `spring-orm`. Move all versions to `4.0.5.RELEASE`.","body":"You are mixing Spring versions (4.0.2, 3.1.4 and 2.0.8) never mix versions of a framework that is trouble waiting to happen. Note <code>spring-dap</code> is now <code>spring-orm</code>. Move all versions to <code>4.0.5.RELEASE</code>."}],"answers":[{"tags":[],"owner":{"account_id":259073,"reputation":8102,"user_id":541688,"display_name":"Oleg Estekhin"},"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1400691191,"creation_date":1400691191,"answer_id":23789416,"question_id":23789271,"body_markdown":"That method appeared in [that commit][1], which seems to be 4.0.3+. Just update spring dependencies to the latest version.\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-framework/commit/979c4833847400a73519e14a3a082e676a6e004d","title":"java.lang.NoSuchMethodError: org.springframework.core.annotation.AnnotationUtils.isInJavaLangAnnotationPackage(Ljava/lang/annotation/Annotation;)Z","body":"<p>That method appeared in <a href=\"https://github.com/spring-projects/spring-framework/commit/979c4833847400a73519e14a3a082e676a6e004d\" rel=\"noreferrer\">that commit</a>, which seems to be 4.0.3+. Just update spring dependencies to the latest version.</p>\n"},{"tags":[],"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"down_vote_count":0,"up_vote_count":30,"is_accepted":false,"score":30,"last_activity_date":1400699446,"creation_date":1400699446,"answer_id":23791840,"question_id":23789271,"body_markdown":"The problem is that you are mixing different versions of Spring, you are mixing (2.0.8, 3.1.4 and 4.0.2) in your project. That is trouble waiting to happen. \r\n\r\nTo prevent these kind of things there is now a so called [&quot;bill of materials&quot; POM][1] which you can import.\r\n\r\nYou need to add a dependencyManagement section to import the bom.\r\n\r\n    &lt;dependencyManagement&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-framework-bom&lt;/artifactId&gt;\r\n                &lt;version&gt;4.0.5.RELEASE&lt;/version&gt;\r\n                &lt;type&gt;pom&lt;/type&gt;\r\n                &lt;scope&gt;import&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    &lt;/dependencyManagement&gt;\r\n\r\nNow in  your dependencies you can remove the version and replace `spring-dao` with `spring-orm`. Added benefit is that all your spring-* dependencies will now be managed to the latest release and you only have a single location for your version number.\r\n\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-core&lt;/artifactId&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\r\n\t&lt;/dependency&gt;\r\n\r\nYou could apply the same trick for Spring Data as that also has a [bom][2]. \r\n\r\n[1]: http://spring.io/blog/2013/12/03/spring-framework-4-0-rc2-available\r\n[2]: http://search.maven.org/#artifactdetails%7Corg.springframework.data%7Cspring-data-releasetrain%7CCodd-SR2%7Cpom","title":"java.lang.NoSuchMethodError: org.springframework.core.annotation.AnnotationUtils.isInJavaLangAnnotationPackage(Ljava/lang/annotation/Annotation;)Z","body":"<p>The problem is that you are mixing different versions of Spring, you are mixing (2.0.8, 3.1.4 and 4.0.2) in your project. That is trouble waiting to happen. </p>\n\n<p>To prevent these kind of things there is now a so called <a href=\"http://spring.io/blog/2013/12/03/spring-framework-4-0-rc2-available\">\"bill of materials\" POM</a> which you can import.</p>\n\n<p>You need to add a dependencyManagement section to import the bom.</p>\n\n<pre><code>&lt;dependencyManagement&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-framework-bom&lt;/artifactId&gt;\n            &lt;version&gt;4.0.5.RELEASE&lt;/version&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n            &lt;scope&gt;import&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/dependencyManagement&gt;\n</code></pre>\n\n<p>Now in  your dependencies you can remove the version and replace <code>spring-dao</code> with <code>spring-orm</code>. Added benefit is that all your spring-* dependencies will now be managed to the latest release and you only have a single location for your version number.</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>You could apply the same trick for Spring Data as that also has a <a href=\"http://search.maven.org/#artifactdetails%7Corg.springframework.data%7Cspring-data-releasetrain%7CCodd-SR2%7Cpom\">bom</a>. </p>\n"},{"tags":[],"owner":{"account_id":2348323,"reputation":13158,"user_id":2057902,"accept_rate":80,"display_name":"Sireesh Yarlagadda"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1435681708,"creation_date":1407937908,"answer_id":25288017,"question_id":23789271,"body_markdown":"Replace your old jars with new one&#39;s based on the spring-framework-bom.LATEST.VERSION.pom file.\r\n\r\nThat way, i had resolved my issue.","title":"java.lang.NoSuchMethodError: org.springframework.core.annotation.AnnotationUtils.isInJavaLangAnnotationPackage(Ljava/lang/annotation/Annotation;)Z","body":"<p>Replace your old jars with new one's based on the spring-framework-bom.LATEST.VERSION.pom file.</p>\n\n<p>That way, i had resolved my issue.</p>\n"},{"tags":[],"owner":{"account_id":1866298,"reputation":41,"user_id":1689784,"accept_rate":0,"display_name":"user1689784"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1472220240,"creation_date":1472220240,"answer_id":39168202,"question_id":23789271,"body_markdown":"I just deleted the target folder in my maven project and rebuilt the war and this problem vanished. ","title":"java.lang.NoSuchMethodError: org.springframework.core.annotation.AnnotationUtils.isInJavaLangAnnotationPackage(Ljava/lang/annotation/Annotation;)Z","body":"<p>I just deleted the target folder in my maven project and rebuilt the war and this problem vanished. </p>\n"},{"tags":[],"owner":{"account_id":12696854,"reputation":91,"user_id":9225032,"display_name":"Himanshu Pujari"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1596376514,"creation_date":1596367398,"answer_id":63215412,"question_id":23789271,"body_markdown":"Try this from [https://stackoverflow.com/a/63215379/9225032](https://stackoverflow.com/a/63215379/9225032):\r\n\r\nJust check all spring dependencies versions. All should be same or at least new. Example:\r\n\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\r\n    &lt;version&gt;5.2.5.RELEASE&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n            \r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;\r\n    &lt;version&gt;5.2.5.RELEASE&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n    \r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\r\n    &lt;version&gt;5.2.5.RELEASE&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```","title":"java.lang.NoSuchMethodError: org.springframework.core.annotation.AnnotationUtils.isInJavaLangAnnotationPackage(Ljava/lang/annotation/Annotation;)Z","body":"<p>Try this from <a href=\"https://stackoverflow.com/a/63215379/9225032\">https://stackoverflow.com/a/63215379/9225032</a>:</p>\n<p>Just check all spring dependencies versions. All should be same or at least new. Example:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\n    &lt;version&gt;5.2.5.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n            \n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;\n    &lt;version&gt;5.2.5.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n    \n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n    &lt;version&gt;5.2.5.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6957911,"reputation":1,"user_id":5338388,"display_name":"Paresh Dave"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698053829,"creation_date":1698053829,"answer_id":77344133,"question_id":23789271,"body_markdown":"I just updated my spring-boot-starter-web and spring-web versions to the latest versions and I was able to get rid of this error.","title":"java.lang.NoSuchMethodError: org.springframework.core.annotation.AnnotationUtils.isInJavaLangAnnotationPackage(Ljava/lang/annotation/Annotation;)Z","body":"<p>I just updated my spring-boot-starter-web and spring-web versions to the latest versions and I was able to get rid of this error.</p>\n"}],"owner":{"account_id":4401996,"reputation":253,"user_id":3587377,"display_name":"JavaBee"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79016,"favorite_count":0,"down_vote_count":0,"up_vote_count":24,"accepted_answer_id":23789416,"answer_count":6,"score":24,"last_activity_date":1698053829,"creation_date":1400690718,"question_id":23789271,"body_markdown":"Am very new to spring and JUnit. \r\nAm trying to run a simple JUnit test case for spring service class, but it fails and I get this exception.I didnt write any test yet, but trying to run through before implementing. \r\nUsing tomcat v7.0.\r\nAnd I dont think have any spring conflicting versions. Please help. \r\n\r\n    java.lang.NoSuchMethodError: org.springframework.core.annotation.AnnotationUtils.isInJavaLangAnnotationPackage(Ljava/lang/annotation/Annotation;)Z\r\n\tat org.springframework.test.context.MetaAnnotationUtils.findAnnotationDescriptor(MetaAnnotationUtils.java:126)\r\n\tat org.springframework.test.context.MetaAnnotationUtils.findAnnotationDescriptor(MetaAnnotationUtils.java:96)\r\n\tat org.springframework.test.context.ContextLoaderUtils.resolveActiveProfiles(ContextLoaderUtils.java:499)\r\n\tat org.springframework.test.context.ContextLoaderUtils.buildMergedContextConfiguration(ContextLoaderUtils.java:722)\r\n\tat org.springframework.test.context.ContextLoaderUtils.buildMergedContextConfiguration(ContextLoaderUtils.java:656)\r\n\tat org.springframework.test.context.DefaultTestContext.&lt;init&gt;(DefaultTestContext.java:93)\r\n\tat org.springframework.test.context.TestContextManager.&lt;init&gt;(TestContextManager.java:119)\r\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTestContextManager(SpringJUnit4ClassRunner.java:120)\r\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.&lt;init&gt;(SpringJUnit4ClassRunner.java:109)\r\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)\r\n\tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n\tat java.lang.reflect.Constructor.newInstance(Constructor.java:526)\r\n\tat org.junit.internal.builders.AnnotatedBuilder.buildRunner(AnnotatedBuilder.java:29)\r\n\tat org.junit.internal.builders.AnnotatedBuilder.runnerForClass(AnnotatedBuilder.java:21)\r\n\tat org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:59)\r\n\tat org.junit.internal.builders.AllDefaultPossibilitiesBuilder.runnerForClass(AllDefaultPossibilitiesBuilder.java:26)\r\n\tat org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:59)\r\n\tat org.junit.internal.requests.ClassRequest.getRunner(ClassRequest.java:26)\r\n\tat org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.&lt;init&gt;(JUnit4TestReference.java:33)\r\n\tat org.eclipse.jdt.internal.junit4.runner.JUnit4TestClassReference.&lt;init&gt;(JUnit4TestClassReference.java:25)\r\n\tat org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.createTest(JUnit4TestLoader.java:48)\r\n\tat org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.loadTests(JUnit4TestLoader.java:38)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:452)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)\r\n\tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)\r\n\r\nWhere else do i need to check, if there are any conflicting spring jars in my project?\r\nAnd my pom.xml file is:\r\n\r\n\r\n    &lt;dependencies&gt;\r\n  \t&lt;dependency&gt;\r\n  \t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n  \t\t&lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\r\n  \t\t&lt;version&gt;4.0.2.RELEASE&lt;/version&gt;\r\n  \t&lt;/dependency&gt;\r\n  \t&lt;dependency&gt;\r\n  \t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n  \t\t&lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n  \t\t&lt;version&gt;4.0.2.RELEASE&lt;/version&gt;\r\n  \t&lt;/dependency&gt;\r\n  \t&lt;dependency&gt;\r\n  \t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n  \t\t&lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;\r\n  \t\t&lt;version&gt;4.0.2.RELEASE&lt;/version&gt;\r\n  \t&lt;/dependency&gt;\r\n  \t&lt;dependency&gt;\r\n  \t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n  \t\t&lt;artifactId&gt;spring-core&lt;/artifactId&gt;\r\n  \t\t&lt;version&gt;4.0.2.RELEASE&lt;/version&gt;\r\n  \t&lt;/dependency&gt;\r\n  \t&lt;dependency&gt;\r\n  \t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n  \t\t&lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\r\n  \t\t&lt;version&gt;3.1.4.RELEASE&lt;/version&gt;\r\n  \t&lt;/dependency&gt;\r\n  \t&lt;dependency&gt;\r\n  \t\t&lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\r\n  \t\t&lt;artifactId&gt;spring-data-commons&lt;/artifactId&gt;\r\n  \t\t&lt;version&gt;1.5.0.RELEASE&lt;/version&gt;\r\n  \t&lt;/dependency&gt;\r\n  \t&lt;dependency&gt;\r\n  \t\t&lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\r\n  \t\t&lt;artifactId&gt;spring-data-commons-core&lt;/artifactId&gt;\r\n  \t\t&lt;version&gt;1.4.1.RELEASE&lt;/version&gt;\r\n  \t&lt;/dependency&gt;\r\n  \t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-dao&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.0.8&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.apache.derby&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;derby&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;10.10.1.1&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.apache.derby&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;derbyclient&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;10.10.1.1&lt;/version&gt;\r\n\t&lt;/dependency&gt;         \r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;commons-pool&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;commons-pool&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;1.6&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n\t\t&lt;groupId&gt;commons-dbcp&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;commons-dbcp&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;1.4&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t&lt;version&gt;1.0.0.RELEASE&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n  &lt;/dependencies&gt;\r\n\r\n\r\n","title":"java.lang.NoSuchMethodError: org.springframework.core.annotation.AnnotationUtils.isInJavaLangAnnotationPackage(Ljava/lang/annotation/Annotation;)Z","body":"<p>Am very new to spring and JUnit. \nAm trying to run a simple JUnit test case for spring service class, but it fails and I get this exception.I didnt write any test yet, but trying to run through before implementing. \nUsing tomcat v7.0.\nAnd I dont think have any spring conflicting versions. Please help. </p>\n\n<pre><code>java.lang.NoSuchMethodError: org.springframework.core.annotation.AnnotationUtils.isInJavaLangAnnotationPackage(Ljava/lang/annotation/Annotation;)Z\nat org.springframework.test.context.MetaAnnotationUtils.findAnnotationDescriptor(MetaAnnotationUtils.java:126)\nat org.springframework.test.context.MetaAnnotationUtils.findAnnotationDescriptor(MetaAnnotationUtils.java:96)\nat org.springframework.test.context.ContextLoaderUtils.resolveActiveProfiles(ContextLoaderUtils.java:499)\nat org.springframework.test.context.ContextLoaderUtils.buildMergedContextConfiguration(ContextLoaderUtils.java:722)\nat org.springframework.test.context.ContextLoaderUtils.buildMergedContextConfiguration(ContextLoaderUtils.java:656)\nat org.springframework.test.context.DefaultTestContext.&lt;init&gt;(DefaultTestContext.java:93)\nat org.springframework.test.context.TestContextManager.&lt;init&gt;(TestContextManager.java:119)\nat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTestContextManager(SpringJUnit4ClassRunner.java:120)\nat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.&lt;init&gt;(SpringJUnit4ClassRunner.java:109)\nat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\nat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)\nat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\nat java.lang.reflect.Constructor.newInstance(Constructor.java:526)\nat org.junit.internal.builders.AnnotatedBuilder.buildRunner(AnnotatedBuilder.java:29)\nat org.junit.internal.builders.AnnotatedBuilder.runnerForClass(AnnotatedBuilder.java:21)\nat org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:59)\nat org.junit.internal.builders.AllDefaultPossibilitiesBuilder.runnerForClass(AllDefaultPossibilitiesBuilder.java:26)\nat org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:59)\nat org.junit.internal.requests.ClassRequest.getRunner(ClassRequest.java:26)\nat org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.&lt;init&gt;(JUnit4TestReference.java:33)\nat org.eclipse.jdt.internal.junit4.runner.JUnit4TestClassReference.&lt;init&gt;(JUnit4TestClassReference.java:25)\nat org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.createTest(JUnit4TestLoader.java:48)\nat org.eclipse.jdt.internal.junit4.runner.JUnit4TestLoader.loadTests(JUnit4TestLoader.java:38)\nat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:452)\nat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)\nat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)\nat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)\n</code></pre>\n\n<p>Where else do i need to check, if there are any conflicting spring jars in my project?\nAnd my pom.xml file is:</p>\n\n<pre><code>&lt;dependencies&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\n    &lt;version&gt;4.0.2.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n    &lt;version&gt;4.0.2.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;\n    &lt;version&gt;4.0.2.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n    &lt;version&gt;4.0.2.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\n    &lt;version&gt;3.1.4.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-data-commons&lt;/artifactId&gt;\n    &lt;version&gt;1.5.0.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-data-commons-core&lt;/artifactId&gt;\n    &lt;version&gt;1.4.1.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-dao&lt;/artifactId&gt;\n    &lt;version&gt;2.0.8&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.derby&lt;/groupId&gt;\n    &lt;artifactId&gt;derby&lt;/artifactId&gt;\n    &lt;version&gt;10.10.1.1&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.derby&lt;/groupId&gt;\n    &lt;artifactId&gt;derbyclient&lt;/artifactId&gt;\n    &lt;version&gt;10.10.1.1&lt;/version&gt;\n&lt;/dependency&gt;         \n&lt;dependency&gt;\n    &lt;groupId&gt;commons-pool&lt;/groupId&gt;\n    &lt;artifactId&gt;commons-pool&lt;/artifactId&gt;\n    &lt;version&gt;1.6&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;commons-dbcp&lt;/groupId&gt;\n    &lt;artifactId&gt;commons-dbcp&lt;/artifactId&gt;\n    &lt;version&gt;1.4&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n    &lt;version&gt;1.0.0.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p></p>\n"},{"tags":["java","maven","semantics"],"comments":[{"owner":{"account_id":47518,"reputation":21228,"user_id":140803,"accept_rate":78,"display_name":"Blessed Geek"},"score":2,"creation_date":1349906668,"post_id":12824112,"comment_id":17355663,"body_markdown":"Someone edited the title to &quot;Is there a Maven “compiler dependencies” scope for libraries required by build tools (not javac)&quot; which is not appropriate. Firstly, javac is involved (due to annotation processor for source retention policies). 2ndly, the Maven term is &quot;artifacts&quot; and I intend to use the precise term of &quot;artifacts&quot; rather than &quot;libraries&quot;.","body":"Someone edited the title to &quot;Is there a Maven “compiler dependencies” scope for libraries required by build tools (not javac)&quot; which is not appropriate. Firstly, javac is involved (due to annotation processor for source retention policies). 2ndly, the Maven term is &quot;artifacts&quot; and I intend to use the precise term of &quot;artifacts&quot; rather than &quot;libraries&quot;."},{"owner":{"account_id":47518,"reputation":21228,"user_id":140803,"accept_rate":78,"display_name":"Blessed Geek"},"score":0,"creation_date":1349906719,"post_id":12824112,"comment_id":17355678,"body_markdown":"Therefore, I am changing the title back.","body":"Therefore, I am changing the title back."}],"answers":[{"tags":[],"owner":{"account_id":61566,"reputation":68924,"user_id":183406,"accept_rate":74,"display_name":"meriton"},"down_vote_count":8,"up_vote_count":24,"is_accepted":false,"score":16,"last_activity_date":1698053697,"creation_date":1349888485,"answer_id":12824626,"question_id":12824112,"body_markdown":"If a dependency is only used for building, such as an annotation processor, it should be a maven `&lt;plugin&gt;`, or `&lt;dependency&gt;` thereof.\r\n\r\nOtherwise, if it is in the compilation classpath, it will be necessary for linking the generated class file at runtime. Then, there are two cases:\r\n\r\n1. It is always necessary to load that class\r\n    1. the class should be shipped as part of the application: `&lt;scope&gt;compile&lt;/scope&gt;`\r\n    1. the class should be provided by the runtime environment: `&lt;scope&gt;provided&lt;/scope&gt;`\r\n2. It is sometimes necessary (because that class will be loaded only under particular circumstances): `&lt;optional&gt;true&lt;/optional&gt;`\r\n\r\nThe only option not covered is compiling a Java program, and never running it in a JVM. This is a really obscure use case, and I can&#39;t fault the designers of maven for not including a scope just to express this distinction - particularly since it is irrelevant to Maven&#39;s core responsibility (building the software).","title":"Is there a Maven &quot;compiler-only&quot; scope for dependency artifacts","body":"<p>If a dependency is only used for building, such as an annotation processor, it should be a maven <code>&lt;plugin&gt;</code>, or <code>&lt;dependency&gt;</code> thereof.</p>\n<p>Otherwise, if it is in the compilation classpath, it will be necessary for linking the generated class file at runtime. Then, there are two cases:</p>\n<ol>\n<li>It is always necessary to load that class\n<ol>\n<li>the class should be shipped as part of the application: <code>&lt;scope&gt;compile&lt;/scope&gt;</code></li>\n<li>the class should be provided by the runtime environment: <code>&lt;scope&gt;provided&lt;/scope&gt;</code></li>\n</ol>\n</li>\n<li>It is sometimes necessary (because that class will be loaded only under particular circumstances): <code>&lt;optional&gt;true&lt;/optional&gt;</code></li>\n</ol>\n<p>The only option not covered is compiling a Java program, and never running it in a JVM. This is a really obscure use case, and I can't fault the designers of maven for not including a scope just to express this distinction - particularly since it is irrelevant to Maven's core responsibility (building the software).</p>\n"},{"tags":[],"owner":{"account_id":4855,"reputation":10230,"user_id":7507,"accept_rate":90,"display_name":"noahlz"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1349901893,"creation_date":1349901893,"answer_id":12828039,"question_id":12824112,"body_markdown":"If the jars with are not true &quot;runtime&quot; dependencies (only for building) but not for the final artifact, you can exclude them various means:\r\n\r\n  1. Exclusion in the assembly descriptor\r\n  2. Exclusion in the jar (or war, ear, whatever) plugin configuration\r\n  3. [Shade Plugin minimize jar](http://maven.apache.org/plugins/maven-shade-plugin/examples/includes-excludes.html) goal\r\n\r\nI agree that shipping unnecessary classes is annoying (I&#39;ve seen junit and testng jars in production deployments - brrrr...), but for all practical purposes it&#39;s a rather minor one.\r\n\r\nIf you have a dependency conflict (i.e shipping a &quot;all deps&quot; version of a library or framework), that&#39;s a different story, but doesn&#39;t sound like what you&#39;re facing here.","title":"Is there a Maven &quot;compiler-only&quot; scope for dependency artifacts","body":"<p>If the jars with are not true \"runtime\" dependencies (only for building) but not for the final artifact, you can exclude them various means:</p>\n\n<ol>\n<li>Exclusion in the assembly descriptor</li>\n<li>Exclusion in the jar (or war, ear, whatever) plugin configuration</li>\n<li><a href=\"http://maven.apache.org/plugins/maven-shade-plugin/examples/includes-excludes.html\" rel=\"noreferrer\">Shade Plugin minimize jar</a> goal</li>\n</ol>\n\n<p>I agree that shipping unnecessary classes is annoying (I've seen junit and testng jars in production deployments - brrrr...), but for all practical purposes it's a rather minor one.</p>\n\n<p>If you have a dependency conflict (i.e shipping a \"all deps\" version of a library or framework), that's a different story, but doesn't sound like what you're facing here.</p>\n"}],"owner":{"account_id":47518,"reputation":21228,"user_id":140803,"accept_rate":78,"display_name":"Blessed Geek"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24386,"favorite_count":0,"down_vote_count":1,"up_vote_count":38,"accepted_answer_id":12828039,"answer_count":2,"score":37,"last_activity_date":1698053697,"creation_date":1349886501,"question_id":12824112,"body_markdown":"I realise this is more of a semantic quest rather than a functionality quest.\r\n\r\nI have three types of compile-scope dependencies:\r\n\r\n1. Compile-only scope, not used at run-time.\r\n GWT client-side dev, MVP4G, RestyGWT, Source retention annotation processors. I use REST, so I don&#39;t need GWT server side.\r\n\r\n2. Provided - Hibernate jars required for compilation but provided by JBoss.\r\n\r\n3. Compile + runtime jars.\r\n\r\nFor case 2, we could use provided scope. Case 3, we would use compile scope.\r\n\r\nHowever for case 1, I use provided scope, even though JBoss does not provide those files at all. Nor are they needed at run-time.\r\n\r\nAnyway, don&#39;t you think Maven should provide for a synonym for &quot;provided&quot; for a scope where the artefacts are not really needed except at compile time? Perhaps, should there be a &quot;compile-only&quot; scope?\r\n\r\n\r\n\r\n\r\n","title":"Is there a Maven &quot;compiler-only&quot; scope for dependency artifacts","body":"<p>I realise this is more of a semantic quest rather than a functionality quest.</p>\n\n<p>I have three types of compile-scope dependencies:</p>\n\n<ol>\n<li><p>Compile-only scope, not used at run-time.\nGWT client-side dev, MVP4G, RestyGWT, Source retention annotation processors. I use REST, so I don't need GWT server side.</p></li>\n<li><p>Provided - Hibernate jars required for compilation but provided by JBoss.</p></li>\n<li><p>Compile + runtime jars.</p></li>\n</ol>\n\n<p>For case 2, we could use provided scope. Case 3, we would use compile scope.</p>\n\n<p>However for case 1, I use provided scope, even though JBoss does not provide those files at all. Nor are they needed at run-time.</p>\n\n<p>Anyway, don't you think Maven should provide for a synonym for \"provided\" for a scope where the artefacts are not really needed except at compile time? Perhaps, should there be a \"compile-only\" scope?</p>\n"},{"tags":["java","spring-mvc","tomcat","logging","request"],"answers":[{"tags":[],"owner":{"account_id":214333,"reputation":1988,"user_id":468249,"accept_rate":50,"display_name":"rince"},"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1659453436,"creation_date":1493749138,"answer_id":43744667,"question_id":42685694,"body_markdown":"`%D` includes `%F` plus any network time\r\n\r\nThere is a bit more information in the API Doc\r\nhttps://tomcat.apache.org/tomcat-7.0-doc/api/org/apache/catalina/valves/AccessLogValve.html\r\n\r\n&gt; `AccessLogValve.ElapsedTimeElement` write time taken to process the\r\n&gt; request - %D, %T\r\n&gt; \r\n&gt; `AccessLogValve.FirstByteTimeElement` write time until first byte is\r\n&gt; written (commit time) in millis - `%F`\r\n\r\nIn the [Bugzilla 55102 entry for `%F`](https://bz.apache.org/bugzilla/show_bug.cgi?id=55102) it says:\r\n\r\n\r\n&gt; Tomcat&#39;s `AccessLogValve` is able to report the time taken to send an\r\n&gt; entire request using `%D`. This is the total processing time and may be\r\n&gt; affected by network conditions. It is sometimes useful to be able to\r\n&gt; record the time taken by the server to prepare the response and send\r\n&gt; the first content to the client.\r\n&gt; \r\n&gt; Attached is a patch that records the time the response is committed\r\n&gt; and then allows that to be reported in the access log using a `%F`\r\n&gt; pattern (which is the same as used by the `mod-log-firstbyte` module for\r\n&gt; HTTPD).","title":"Tomcat log: What&#39;s the difference between %D and %F?","body":"<p><code>%D</code> includes <code>%F</code> plus any network time</p>\n<p>There is a bit more information in the API Doc\n<a href=\"https://tomcat.apache.org/tomcat-7.0-doc/api/org/apache/catalina/valves/AccessLogValve.html\" rel=\"nofollow noreferrer\">https://tomcat.apache.org/tomcat-7.0-doc/api/org/apache/catalina/valves/AccessLogValve.html</a></p>\n<blockquote>\n<p><code>AccessLogValve.ElapsedTimeElement</code> write time taken to process the\nrequest - %D, %T</p>\n<p><code>AccessLogValve.FirstByteTimeElement</code> write time until first byte is\nwritten (commit time) in millis - <code>%F</code></p>\n</blockquote>\n<p>In the <a href=\"https://bz.apache.org/bugzilla/show_bug.cgi?id=55102\" rel=\"nofollow noreferrer\">Bugzilla 55102 entry for <code>%F</code></a> it says:</p>\n<blockquote>\n<p>Tomcat's <code>AccessLogValve</code> is able to report the time taken to send an\nentire request using <code>%D</code>. This is the total processing time and may be\naffected by network conditions. It is sometimes useful to be able to\nrecord the time taken by the server to prepare the response and send\nthe first content to the client.</p>\n<p>Attached is a patch that records the time the response is committed\nand then allows that to be reported in the access log using a <code>%F</code>\npattern (which is the same as used by the <code>mod-log-firstbyte</code> module for\nHTTPD).</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":6409279,"reputation":958,"user_id":7676237,"display_name":"puppylpg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698053505,"creation_date":1698053505,"answer_id":77344102,"question_id":42685694,"body_markdown":"FYI, the unit for `%D` in tomcat 8 is millisecond, while in tomcat 10 it&#39;s microsecond...\r\n\r\nSo `%{ms}T` in tomcat 10 could be used as a equivalence for `%D` in tomcat 8.\r\n\r\n- https://tomcat.apache.org/tomcat-8.0-doc/config/valve.html\r\n- https://tomcat.apache.org/tomcat-10.0-doc/config/valve.html","title":"Tomcat log: What&#39;s the difference between %D and %F?","body":"<p>FYI, the unit for <code>%D</code> in tomcat 8 is millisecond, while in tomcat 10 it's microsecond...</p>\n<p>So <code>%{ms}T</code> in tomcat 10 could be used as a equivalence for <code>%D</code> in tomcat 8.</p>\n<ul>\n<li><a href=\"https://tomcat.apache.org/tomcat-8.0-doc/config/valve.html\" rel=\"nofollow noreferrer\">https://tomcat.apache.org/tomcat-8.0-doc/config/valve.html</a></li>\n<li><a href=\"https://tomcat.apache.org/tomcat-10.0-doc/config/valve.html\" rel=\"nofollow noreferrer\">https://tomcat.apache.org/tomcat-10.0-doc/config/valve.html</a></li>\n</ul>\n"}],"owner":{"account_id":9847660,"reputation":111,"user_id":7294644,"accept_rate":83,"display_name":"Minky"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5414,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":43744667,"answer_count":2,"score":8,"last_activity_date":1698053505,"creation_date":1489027191,"question_id":42685694,"body_markdown":"I am using Tomcat log to log the access info. And the definitions of `%D` and `%F` in official doc are:\r\n\r\n* `%D` - Time taken to process the request, in millis\r\n\r\n* `%F` - Time taken to commit the response, in millis\r\n\r\nI am confused by these two definitions. Does the time of `%F` include the time of `%D`?","title":"Tomcat log: What&#39;s the difference between %D and %F?","body":"<p>I am using Tomcat log to log the access info. And the definitions of <code>%D</code> and <code>%F</code> in official doc are:</p>\n<ul>\n<li><p><code>%D</code> - Time taken to process the request, in millis</p>\n</li>\n<li><p><code>%F</code> - Time taken to commit the response, in millis</p>\n</li>\n</ul>\n<p>I am confused by these two definitions. Does the time of <code>%F</code> include the time of <code>%D</code>?</p>\n"},{"tags":["java","spring-boot","keycloak"],"owner":{"account_id":29733681,"reputation":1,"user_id":22787720,"display_name":"Aniyar Durmagambetova"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698053320,"creation_date":1698053320,"question_id":77344081,"body_markdown":"In my application I have users with roles admin, manager, and applicant\r\n\r\nI need to add a search mechanism that searches users of 1 specific role by username/firstname/lastname/email/etc. Like I want to have separate a search page for applicants, separate search page for managers/admins.\r\n\r\nThe following method searches users with some username/firstname/lastname/email with pagination. But I can&#39;t filter by role here.\r\n \r\n\r\n```\r\nList&lt;UserRepresentation&gt; users = realmResource.users().search(\r\n                request.getUserName(),\r\n                request.getFirstName(),\r\n                request.getLastName(),\r\n                request.getEmail(),\r\n                page * size,\r\n                size);\r\n```\r\n\r\nThis function gets me users of given role but I can&#39;t filter them by other parameters while preserving pagination:\r\n\r\n\r\n```\r\nList&lt;UserRepresentation&gt; usersByRole = realmResource\r\n                .roles()\r\n                .get(request.getRole())\r\n                .getUserMembers(page * size, size);\r\n```\r\n\r\nIs there a way to search both by user role and other user attributes?","title":"Keycloak how to search users by role AND username/email/other attributes with pagination","body":"<p>In my application I have users with roles admin, manager, and applicant</p>\n<p>I need to add a search mechanism that searches users of 1 specific role by username/firstname/lastname/email/etc. Like I want to have separate a search page for applicants, separate search page for managers/admins.</p>\n<p>The following method searches users with some username/firstname/lastname/email with pagination. But I can't filter by role here.</p>\n<pre><code>List&lt;UserRepresentation&gt; users = realmResource.users().search(\n                request.getUserName(),\n                request.getFirstName(),\n                request.getLastName(),\n                request.getEmail(),\n                page * size,\n                size);\n</code></pre>\n<p>This function gets me users of given role but I can't filter them by other parameters while preserving pagination:</p>\n<pre><code>List&lt;UserRepresentation&gt; usersByRole = realmResource\n                .roles()\n                .get(request.getRole())\n                .getUserMembers(page * size, size);\n</code></pre>\n<p>Is there a way to search both by user role and other user attributes?</p>\n"},{"tags":["java","json","jackson","objectmapper"],"comments":[{"owner":{"account_id":15440820,"reputation":180,"user_id":11139453,"display_name":"Joseph Samuel"},"score":1,"creation_date":1698053582,"post_id":77344073,"comment_id":136351880,"body_markdown":"hi, maybe you need to implement custom serializer and de-serializer with jackson.","body":"hi, maybe you need to implement custom serializer and de-serializer with jackson."},{"owner":{"account_id":350117,"reputation":8653,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":0,"creation_date":1698055318,"post_id":77344073,"comment_id":136352180,"body_markdown":"In your 2nd JSON, where `&quot;name&quot;: &quot;Bernd&quot;` should come from?  Also note that your `Contact` class has a property named `contactPerson`, not `name`.","body":"In your 2nd JSON, where <code>&quot;name&quot;: &quot;Bernd&quot;</code> should come from?  Also note that your <code>Contact</code> class has a property named <code>contactPerson</code>, not <code>name</code>."}],"owner":{"account_id":12834353,"reputation":65,"user_id":9284489,"display_name":"Beanssss"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698053208,"creation_date":1698053208,"question_id":77344073,"body_markdown":"I get a JSON like this:\r\n\r\n```\r\n{\r\n  &quot;contactPointId&quot;: &quot;123&quot;,\r\n  &quot;testString&quot;: &quot;41277082&quot;,\r\n  &quot;address&quot;: {\r\n    &quot;name1&quot;: &quot;name1&quot;,\r\n    &quot;name2&quot;: &quot;name2&quot;,\r\n    &quot;street&quot;: &quot;street&quot;,\r\n    &quot;houseNumber&quot;: &quot;123&quot;,\r\n    &quot;zipCode&quot;: &quot;45567&quot;,\r\n    &quot;country&quot;: &quot;276&quot;,\r\n    &quot;contactPerson&quot;: &quot;Bernd&quot;,\r\n    &quot;phone1&quot;: &quot;1239&quot;,\r\n    &quot;phone2&quot;: &quot;456&quot;\r\n  }\r\n}\r\n```\r\n\r\ni want to deserialize it into 3 Java Classes\r\n\r\nContactPoint, Contact, and Address\r\n\r\nso after i Serialize them again the JSON should look like this:\r\n\r\n\r\n``` \r\n{\r\n  &quot;contactPointId&quot;: &quot;123&quot;,\r\n  &quot;testString&quot;: &quot;41277082&quot;,\r\n  &quot;contact&quot;: {\r\n    &quot;name&quot;: &quot;Bernd&quot;,\r\n    &quot;phone1&quot;: &quot;1239&quot;,\r\n    &quot;phone2&quot;: &quot;456&quot;\r\n  },\r\n  &quot;address&quot;: {\r\n    &quot;name1&quot;: &quot;name1&quot;,\r\n    &quot;name2&quot;: &quot;name2&quot;,\r\n    &quot;street&quot;: &quot;street&quot;,\r\n    &quot;houseNumber&quot;: &quot;123&quot;,\r\n    &quot;zipCode&quot;: &quot;45567&quot;,\r\n    &quot;country&quot;: &quot;276&quot;\r\n  }\r\n}\r\n```\r\n\r\nMy Java Classes look like this:\r\n\r\n``` \r\npublic class ContactPoint\r\n{\r\n\r\n   private String contactPointId;\r\n\r\n   private String testString;\r\n\r\n   private Address address;\r\n\r\n   private Contact contact;\r\n\r\n   public ContactPoint( String contactPointId, String testString, Address address, Contact contact )\r\n   {\r\n      this.contactPointId = contactPointId;\r\n      this.testString = testString;\r\n      this.address = address;\r\n      this.contact = contact;\r\n   }\r\n\r\n   public ContactPoint()\r\n   {\r\n   }\r\n\r\n   public String getContactPointId()\r\n   {\r\n      return contactPointId;\r\n   }\r\n\r\n   public void setContactPointId( String contactPointId )\r\n   {\r\n      this.contactPointId = contactPointId;\r\n   }\r\n\r\n   public String getTestString()\r\n   {\r\n      return testString;\r\n   }\r\n\r\n   public void setTestString( String testString )\r\n   {\r\n      this.testString = testString;\r\n   }\r\n\r\n   public Address getAddress()\r\n   {\r\n      return address;\r\n   }\r\n\r\n   public void setAddress( Address address )\r\n   {\r\n      this.address = address;\r\n   }\r\n\r\n   public Contact getContact()\r\n   {\r\n      return contact;\r\n   }\r\n\r\n   public void setContact( Contact contact )\r\n   {\r\n      this.contact = contact;\r\n   }\r\n}\r\n\r\n```\r\n\r\n``` \r\n\r\npublic class Contact\r\n{\r\n\r\n   private String contactPerson;\r\n\r\n   private String phone1;\r\n\r\n   private String phone2;\r\n\r\n   public String getContactPerson()\r\n   {\r\n      return contactPerson;\r\n   }\r\n\r\n   public void setContactPerson( String contactPerson )\r\n   {\r\n      this.contactPerson = contactPerson;\r\n   }\r\n\r\n   public String getPhone1()\r\n   {\r\n      return phone1;\r\n   }\r\n\r\n   public void setPhone1( String phone1 )\r\n   {\r\n      this.phone1 = phone1;\r\n   }\r\n\r\n   public String getPhone2()\r\n   {\r\n      return phone2;\r\n   }\r\n\r\n   public void setPhone2( String phone2 )\r\n   {\r\n      this.phone2 = phone2;\r\n   }\r\n}\r\n\r\n```\r\n\r\n``` \r\n\r\npublic class Address\r\n{\r\n\r\n   private String name1;\r\n\r\n   private String name2;\r\n\r\n   private String street;\r\n\r\n   private String houseNumber;\r\n\r\n   private String zipCode;\r\n\r\n   private String country;\r\n\r\n   public String getName1()\r\n   {\r\n      return name1;\r\n   }\r\n\r\n   public void setName1( String name1 )\r\n   {\r\n      this.name1 = name1;\r\n   }\r\n\r\n   public String getName2()\r\n   {\r\n      return name2;\r\n   }\r\n\r\n   public void setName2( String name2 )\r\n   {\r\n      this.name2 = name2;\r\n   }\r\n\r\n   public String getStreet()\r\n   {\r\n      return street;\r\n   }\r\n\r\n   public void setStreet( String street )\r\n   {\r\n      this.street = street;\r\n   }\r\n\r\n   public String getHouseNumber()\r\n   {\r\n      return houseNumber;\r\n   }\r\n\r\n   public void setHouseNumber( String houseNumber )\r\n   {\r\n      this.houseNumber = houseNumber;\r\n   }\r\n\r\n   public String getZipCode()\r\n   {\r\n      return zipCode;\r\n   }\r\n\r\n   public void setZipCode( String zipCode )\r\n   {\r\n      this.zipCode = zipCode;\r\n   }\r\n\r\n   public String getCountry()\r\n   {\r\n      return country;\r\n   }\r\n\r\n   public void setCountry( String country )\r\n   {\r\n      this.country = country;\r\n   }\r\n}\r\n\r\n```\r\n\r\nI was hoping for an Annotation which tells the Objectmapper where to get the Informations for Contact.\r\n\r\nSomething like\r\n\r\n``` \r\n\r\n   @JsonProperty(&quot;address.contact&quot;)\r\n   private Contact contact;\r\n\r\n```\r\n\r\nI don&#39;t want to create a whole new Java class structure just to change those 3 fields.\r\n\r\nDoes anybody have an idea?\r\n\r\n\r\n","title":"JSON ObjectMapper serializes and deserializes to different JSON objects","body":"<p>I get a JSON like this:</p>\n<pre><code>{\n  &quot;contactPointId&quot;: &quot;123&quot;,\n  &quot;testString&quot;: &quot;41277082&quot;,\n  &quot;address&quot;: {\n    &quot;name1&quot;: &quot;name1&quot;,\n    &quot;name2&quot;: &quot;name2&quot;,\n    &quot;street&quot;: &quot;street&quot;,\n    &quot;houseNumber&quot;: &quot;123&quot;,\n    &quot;zipCode&quot;: &quot;45567&quot;,\n    &quot;country&quot;: &quot;276&quot;,\n    &quot;contactPerson&quot;: &quot;Bernd&quot;,\n    &quot;phone1&quot;: &quot;1239&quot;,\n    &quot;phone2&quot;: &quot;456&quot;\n  }\n}\n</code></pre>\n<p>i want to deserialize it into 3 Java Classes</p>\n<p>ContactPoint, Contact, and Address</p>\n<p>so after i Serialize them again the JSON should look like this:</p>\n<pre><code>{\n  &quot;contactPointId&quot;: &quot;123&quot;,\n  &quot;testString&quot;: &quot;41277082&quot;,\n  &quot;contact&quot;: {\n    &quot;name&quot;: &quot;Bernd&quot;,\n    &quot;phone1&quot;: &quot;1239&quot;,\n    &quot;phone2&quot;: &quot;456&quot;\n  },\n  &quot;address&quot;: {\n    &quot;name1&quot;: &quot;name1&quot;,\n    &quot;name2&quot;: &quot;name2&quot;,\n    &quot;street&quot;: &quot;street&quot;,\n    &quot;houseNumber&quot;: &quot;123&quot;,\n    &quot;zipCode&quot;: &quot;45567&quot;,\n    &quot;country&quot;: &quot;276&quot;\n  }\n}\n</code></pre>\n<p>My Java Classes look like this:</p>\n<pre><code>public class ContactPoint\n{\n\n   private String contactPointId;\n\n   private String testString;\n\n   private Address address;\n\n   private Contact contact;\n\n   public ContactPoint( String contactPointId, String testString, Address address, Contact contact )\n   {\n      this.contactPointId = contactPointId;\n      this.testString = testString;\n      this.address = address;\n      this.contact = contact;\n   }\n\n   public ContactPoint()\n   {\n   }\n\n   public String getContactPointId()\n   {\n      return contactPointId;\n   }\n\n   public void setContactPointId( String contactPointId )\n   {\n      this.contactPointId = contactPointId;\n   }\n\n   public String getTestString()\n   {\n      return testString;\n   }\n\n   public void setTestString( String testString )\n   {\n      this.testString = testString;\n   }\n\n   public Address getAddress()\n   {\n      return address;\n   }\n\n   public void setAddress( Address address )\n   {\n      this.address = address;\n   }\n\n   public Contact getContact()\n   {\n      return contact;\n   }\n\n   public void setContact( Contact contact )\n   {\n      this.contact = contact;\n   }\n}\n\n</code></pre>\n<pre><code>\npublic class Contact\n{\n\n   private String contactPerson;\n\n   private String phone1;\n\n   private String phone2;\n\n   public String getContactPerson()\n   {\n      return contactPerson;\n   }\n\n   public void setContactPerson( String contactPerson )\n   {\n      this.contactPerson = contactPerson;\n   }\n\n   public String getPhone1()\n   {\n      return phone1;\n   }\n\n   public void setPhone1( String phone1 )\n   {\n      this.phone1 = phone1;\n   }\n\n   public String getPhone2()\n   {\n      return phone2;\n   }\n\n   public void setPhone2( String phone2 )\n   {\n      this.phone2 = phone2;\n   }\n}\n\n</code></pre>\n<pre><code>\npublic class Address\n{\n\n   private String name1;\n\n   private String name2;\n\n   private String street;\n\n   private String houseNumber;\n\n   private String zipCode;\n\n   private String country;\n\n   public String getName1()\n   {\n      return name1;\n   }\n\n   public void setName1( String name1 )\n   {\n      this.name1 = name1;\n   }\n\n   public String getName2()\n   {\n      return name2;\n   }\n\n   public void setName2( String name2 )\n   {\n      this.name2 = name2;\n   }\n\n   public String getStreet()\n   {\n      return street;\n   }\n\n   public void setStreet( String street )\n   {\n      this.street = street;\n   }\n\n   public String getHouseNumber()\n   {\n      return houseNumber;\n   }\n\n   public void setHouseNumber( String houseNumber )\n   {\n      this.houseNumber = houseNumber;\n   }\n\n   public String getZipCode()\n   {\n      return zipCode;\n   }\n\n   public void setZipCode( String zipCode )\n   {\n      this.zipCode = zipCode;\n   }\n\n   public String getCountry()\n   {\n      return country;\n   }\n\n   public void setCountry( String country )\n   {\n      this.country = country;\n   }\n}\n\n</code></pre>\n<p>I was hoping for an Annotation which tells the Objectmapper where to get the Informations for Contact.</p>\n<p>Something like</p>\n<pre><code>\n   @JsonProperty(&quot;address.contact&quot;)\n   private Contact contact;\n\n</code></pre>\n<p>I don't want to create a whole new Java class structure just to change those 3 fields.</p>\n<p>Does anybody have an idea?</p>\n"},{"tags":["java","spring-boot","javafx","desktop-application"],"comments":[{"owner":{"account_id":29581624,"reputation":571,"user_id":22671285,"display_name":"David Teo"},"score":2,"creation_date":1698052488,"post_id":77343974,"comment_id":136351666,"body_markdown":"can you provide the specific error message or stack trace that you&#39;re receiving? Additionally, if there are any relevant log files or error messages from your application, please share them as well.","body":"can you provide the specific error message or stack trace that you&#39;re receiving? Additionally, if there are any relevant log files or error messages from your application, please share them as well."},{"owner":{"account_id":26093133,"reputation":9,"user_id":19789654,"display_name":"Chamithu Dinsara"},"score":0,"creation_date":1698053019,"post_id":77343974,"comment_id":136351762,"body_markdown":"@DavidTeo now i added brother, sorry for that.","body":"@DavidTeo now i added brother, sorry for that."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1698057204,"post_id":77343974,"comment_id":136352498,"body_markdown":"Possible duplicate: [Column count doesn&#39;t match value count at row 1](https://stackoverflow.com/q/18369252/6395627)","body":"Possible duplicate: <a href=\"https://stackoverflow.com/q/18369252/6395627\">Column count doesn&#39;t match value count at row 1</a>"},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":3,"creation_date":1698057409,"post_id":77343974,"comment_id":136352529,"body_markdown":"As an aside, for any future questions you may ask here, please read [Why should I not upload images of code/data/errors?](https://meta.stackoverflow.com/q/285551/6395627)","body":"As an aside, for any future questions you may ask here, please read <a href=\"https://meta.stackoverflow.com/q/285551/6395627\">Why should I not upload images of code/data/errors?</a>"}],"owner":{"account_id":26093133,"reputation":9,"user_id":19789654,"display_name":"Chamithu Dinsara"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1698068671,"answer_count":0,"score":0,"last_activity_date":1698052898,"creation_date":1698052303,"question_id":77343974,"body_markdown":"before the error is occuring ,this task is executing in perfect way.but this error\r\n[enter image description here][1]\r\n is occured without not going to changing of any code line.all of my team member have same issue.\r\nim trying to save  \r\n \r\n\r\n       private String code;\r\n    private String barcode;\r\n    private int qtyOnHand;\r\n    private double sellingPrice;\r\n    private double showPrice;\r\n    private double buyingPrice;\r\n    private int productCode;\r\n    private boolean discountAvailability;\r\n\r\nthese attributes on oder_details table.\r\nthis is the part of my db graph\r\n[enter image description here][2]\r\n\r\nthis code lines shows ProductDetailBoImpl under the bo layer\r\n\r\n```\r\npublic class ProductDetailBoImpl implements ProductDetailBo {\r\n    ProductDetailDao dao = DaoFactory.getInstance().getDao(DaoType.PRODUCT_DETAIL);\r\n\r\n    @Override\r\n    public boolean saveProductDetail(@org.jetbrains.annotations.NotNull ProductDetailDto dto) throws SQLException, ClassNotFoundException {\r\n        return dao.save(\r\n                new ProductDetail(\r\n                        dto.getCode(), dto.getBarcode(), dto.getQtyOnHand(), dto.getSellingPrice(),\r\n                        dto.getShowPrice(), dto.getBuyingPrice(), dto.getProductCode(),\r\n                        dto.isDiscountAvailability()\r\n                )\r\n        );\r\n    }\r\n\r\n}\r\n```\r\nthis is the interface\r\n\r\n     public boolean saveProductDetail(ProductDetailDto dto) throws SQLException, \r\n     ClassNotFoundException;\r\n\r\nNewBatchFormController class is interface called NewbatchForm.fxml\r\n```\r\npublic void saveBatch(ActionEvent actionEvent) throws IOException {\r\n\r\n        ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n        javax.imageio.ImageIO.write(bufferedImage, &quot;barcode&quot;, baos);\r\n        byte[] arr = baos.toByteArray();\r\n\r\n        ProductDetailDto dto = new ProductDetailDto(\r\n                uniqueData, Base64.encodeBase64String(arr),\r\n                Integer.parseInt(txtQty.getText()),\r\n                Double.parseDouble(txtSellingPrice.getText()),\r\n                Double.parseDouble(txtShowPrice.getText()),\r\n                Double.parseDouble(txtBuyingPrice.getText()),\r\n                Integer.parseInt(txtProductCode.getText()),\r\n                rBtnYes.isSelected() ? true : false\r\n        );\r\n\r\n        try {\r\n            if (\r\n                    productDetailBo.saveProductDetail(dto)\r\n            ) {\r\n                new Alert(Alert.AlertType.CONFIRMATION, &quot;Batch Saved!&quot;).show();\r\n                Thread.sleep(3000);\r\n                this.stage.close();\r\n               /* Platform.runLater(() -&gt; {\r\n                });*/\r\n            } else {\r\n                new Alert(Alert.AlertType.WARNING, &quot;Try Again!&quot;).show();\r\n            }\r\n\r\n        } catch (SQLException | ClassNotFoundException | InterruptedException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n```\r\n\r\nProductdetailDaoimpl is locate under the dao layer.\r\n\r\n```\r\npublic class ProductDetailDaoImpl implements ProductDetailDao {\r\n    @Override\r\n    public boolean save(ProductDetail productDetail) throws SQLException, ClassNotFoundException {\r\n        return CrudUtil.execute(\r\n                &quot;INSERT INTO product_detail VALUES (?,?,?,?,?,?,?,?)&quot;,\r\n                productDetail.getCode(),\r\n                productDetail.getBarcode(),\r\n                productDetail.getQtyOnHand(),\r\n                productDetail.getSellingPrice(),\r\n                productDetail.isDiscountAvailability(),\r\n                productDetail.getShowPrice(),\r\n                productDetail.getProductCode(),\r\n                productDetail.getBuyingPrice()\r\n        );\r\n    }\r\n\r\n```\r\nthis is the interface of this application\r\n[enter image description here][1]\r\n\r\nhere is the hierarchy of this application\r\n\r\n[enter image description here][2]\r\n\r\nthe error massege \r\n[enter image description here][1]\r\n\r\nplease give some support me to resolve this this application is university project the only part is this one is not working at now.\r\nthank you.\r\n \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/mz8h9.png","title":"In JavaFX Error data not going to save on db","body":"<p>before the error is occuring ,this task is executing in perfect way.but this error\n<a href=\"https://i.stack.imgur.com/mz8h9.png\" rel=\"nofollow noreferrer\">enter image description here</a>\nis occured without not going to changing of any code line.all of my team member have same issue.\nim trying to save</p>\n<pre><code>   private String code;\nprivate String barcode;\nprivate int qtyOnHand;\nprivate double sellingPrice;\nprivate double showPrice;\nprivate double buyingPrice;\nprivate int productCode;\nprivate boolean discountAvailability;\n</code></pre>\n<p>these attributes on oder_details table.\nthis is the part of my db graph\n[enter image description here][2]</p>\n<p>this code lines shows ProductDetailBoImpl under the bo layer</p>\n<pre><code>public class ProductDetailBoImpl implements ProductDetailBo {\n    ProductDetailDao dao = DaoFactory.getInstance().getDao(DaoType.PRODUCT_DETAIL);\n\n    @Override\n    public boolean saveProductDetail(@org.jetbrains.annotations.NotNull ProductDetailDto dto) throws SQLException, ClassNotFoundException {\n        return dao.save(\n                new ProductDetail(\n                        dto.getCode(), dto.getBarcode(), dto.getQtyOnHand(), dto.getSellingPrice(),\n                        dto.getShowPrice(), dto.getBuyingPrice(), dto.getProductCode(),\n                        dto.isDiscountAvailability()\n                )\n        );\n    }\n\n}\n</code></pre>\n<p>this is the interface</p>\n<pre><code> public boolean saveProductDetail(ProductDetailDto dto) throws SQLException, \n ClassNotFoundException;\n</code></pre>\n<p>NewBatchFormController class is interface called NewbatchForm.fxml</p>\n<pre><code>public void saveBatch(ActionEvent actionEvent) throws IOException {\n\n        ByteArrayOutputStream baos = new ByteArrayOutputStream();\n        javax.imageio.ImageIO.write(bufferedImage, &quot;barcode&quot;, baos);\n        byte[] arr = baos.toByteArray();\n\n        ProductDetailDto dto = new ProductDetailDto(\n                uniqueData, Base64.encodeBase64String(arr),\n                Integer.parseInt(txtQty.getText()),\n                Double.parseDouble(txtSellingPrice.getText()),\n                Double.parseDouble(txtShowPrice.getText()),\n                Double.parseDouble(txtBuyingPrice.getText()),\n                Integer.parseInt(txtProductCode.getText()),\n                rBtnYes.isSelected() ? true : false\n        );\n\n        try {\n            if (\n                    productDetailBo.saveProductDetail(dto)\n            ) {\n                new Alert(Alert.AlertType.CONFIRMATION, &quot;Batch Saved!&quot;).show();\n                Thread.sleep(3000);\n                this.stage.close();\n               /* Platform.runLater(() -&gt; {\n                });*/\n            } else {\n                new Alert(Alert.AlertType.WARNING, &quot;Try Again!&quot;).show();\n            }\n\n        } catch (SQLException | ClassNotFoundException | InterruptedException e) {\n            throw new RuntimeException(e);\n        }\n    }\n</code></pre>\n<p>ProductdetailDaoimpl is locate under the dao layer.</p>\n<pre><code>public class ProductDetailDaoImpl implements ProductDetailDao {\n    @Override\n    public boolean save(ProductDetail productDetail) throws SQLException, ClassNotFoundException {\n        return CrudUtil.execute(\n                &quot;INSERT INTO product_detail VALUES (?,?,?,?,?,?,?,?)&quot;,\n                productDetail.getCode(),\n                productDetail.getBarcode(),\n                productDetail.getQtyOnHand(),\n                productDetail.getSellingPrice(),\n                productDetail.isDiscountAvailability(),\n                productDetail.getShowPrice(),\n                productDetail.getProductCode(),\n                productDetail.getBuyingPrice()\n        );\n    }\n\n</code></pre>\n<p>this is the interface of this application\n<a href=\"https://i.stack.imgur.com/mz8h9.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>here is the hierarchy of this application</p>\n<p>[enter image description here][2]</p>\n<p>the error massege\n<a href=\"https://i.stack.imgur.com/mz8h9.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>please give some support me to resolve this this application is university project the only part is this one is not working at now.\nthank you.</p>\n"},{"tags":["java","redirect","spring-webflux"],"answers":[{"tags":[],"owner":{"account_id":15814177,"reputation":31,"user_id":11410409,"display_name":"Arvind Kasale"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1556195762,"creation_date":1556195762,"answer_id":55849451,"question_id":55848688,"body_markdown":"Well made it work using the code below\r\n\r\n```\r\n@GetMapping(&quot;/&quot;)\r\nMono&lt;Void&gt; redirect(ServerHttpResponse response) {\r\n  response.setStatus(TEMPORARY_REDIRECT);\r\n  response.getHeaders().setLocation(URI.create(authorizationUrl));\r\n  return response.setComplete();\r\n}\r\n```","title":"Redirection to an external absolute URL in spring-boot-starter-webflux without a View Resolver","body":"<p>Well made it work using the code below</p>\n\n<pre><code>@GetMapping(\"/\")\nMono&lt;Void&gt; redirect(ServerHttpResponse response) {\n  response.setStatus(TEMPORARY_REDIRECT);\n  response.getHeaders().setLocation(URI.create(authorizationUrl));\n  return response.setComplete();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6615151,"reputation":7343,"user_id":5108695,"display_name":"Dupinder Singh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698052881,"creation_date":1698052881,"answer_id":77344036,"question_id":55848688,"body_markdown":"This helped me:\r\n\r\n@Configuration\r\npublic class RedirectHandler {\r\n\r\n    @Bean\r\n    public RouterFunction&lt;ServerResponse&gt; route() {\r\n        return RouterFunctions.route()\r\n            .GET(&quot;/redirect&quot;, this::redirect) // Define your redirect route\r\n            .build();\r\n    }\r\n\r\n    public Mono&lt;ServerResponse&gt; redirect(ServerRequest request) {\r\n        // Perform any necessary logic here, if needed\r\n        String targetUrl = &quot;https://example.com&quot;; // Define the target URL you want to redirect to\r\n        return ServerResponse.temporaryRedirect(URI.create(targetUrl)).build();\r\n    }\r\n}","title":"Redirection to an external absolute URL in spring-boot-starter-webflux without a View Resolver","body":"<p>This helped me:</p>\n<p>@Configuration\npublic class RedirectHandler {</p>\n<pre><code>@Bean\npublic RouterFunction&lt;ServerResponse&gt; route() {\n    return RouterFunctions.route()\n        .GET(&quot;/redirect&quot;, this::redirect) // Define your redirect route\n        .build();\n}\n\npublic Mono&lt;ServerResponse&gt; redirect(ServerRequest request) {\n    // Perform any necessary logic here, if needed\n    String targetUrl = &quot;https://example.com&quot;; // Define the target URL you want to redirect to\n    return ServerResponse.temporaryRedirect(URI.create(targetUrl)).build();\n}\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":15814177,"reputation":31,"user_id":11410409,"display_name":"Arvind Kasale"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1872,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1698052881,"creation_date":1556193094,"question_id":55848688,"body_markdown":"I am creating an application using spring-webflux. I have exposed a controller which has a method that is reactive and returns a Mono&lt;View&gt; as the return type. \r\nThe stack is reactive. \r\nThe request comes in the browser and the API is expected to redirect the user in the browser to a url based on some calculation which are async in nature. Instead of redirection right now I am getting a response as shown below.\r\n\r\nIs there a way to achieve this?\r\n\r\n```\r\n{\r\n&quot;defaultCharset&quot;: &quot;UTF-8&quot;,\r\n&quot;requestContextAttribute&quot;: null,\r\n&quot;beanName&quot;: null,\r\n&quot;applicationContext&quot;: null,\r\n&quot;url&quot;: &quot;https://my.box.com/service/auth/oauth/authorize?client_id=3d58a6ae9da221193d688feb521cf3f78ab8f1e04b3110813798b6feb877aa4d&amp;amp;response_type=code&amp;amp;redirect_uri=https://memini.serveo.net/api/v1/sources/BOX/connection?state=79299a49-e716-4ac5-a4f1-d16a2fdf6de5&quot;,\r\n&quot;contextRelative&quot;: true,\r\n&quot;statusCode&quot;: &quot;SEE_OTHER&quot;,\r\n&quot;propagateQuery&quot;: false,\r\n&quot;hosts&quot;: null,\r\n&quot;redirectView&quot;: true,\r\n&quot;supportedMediaTypes&quot;: [\r\n{\r\n&quot;type&quot;: &quot;text&quot;,\r\n&quot;subtype&quot;: &quot;html&quot;,\r\n&quot;parameters&quot;: {\r\n&quot;charset&quot;: &quot;UTF-8&quot;\r\n},\r\n&quot;qualityValue&quot;: 1,\r\n&quot;wildcardType&quot;: false,\r\n&quot;wildcardSubtype&quot;: false,\r\n&quot;charset&quot;: &quot;UTF-8&quot;,\r\n&quot;concrete&quot;: true\r\n}\r\n]\r\n}\r\n```","title":"Redirection to an external absolute URL in spring-boot-starter-webflux without a View Resolver","body":"<p>I am creating an application using spring-webflux. I have exposed a controller which has a method that is reactive and returns a Mono as the return type. \nThe stack is reactive. \nThe request comes in the browser and the API is expected to redirect the user in the browser to a url based on some calculation which are async in nature. Instead of redirection right now I am getting a response as shown below.</p>\n\n<p>Is there a way to achieve this?</p>\n\n<pre><code>{\n\"defaultCharset\": \"UTF-8\",\n\"requestContextAttribute\": null,\n\"beanName\": null,\n\"applicationContext\": null,\n\"url\": \"https://my.box.com/service/auth/oauth/authorize?client_id=3d58a6ae9da221193d688feb521cf3f78ab8f1e04b3110813798b6feb877aa4d&amp;amp;response_type=code&amp;amp;redirect_uri=https://memini.serveo.net/api/v1/sources/BOX/connection?state=79299a49-e716-4ac5-a4f1-d16a2fdf6de5\",\n\"contextRelative\": true,\n\"statusCode\": \"SEE_OTHER\",\n\"propagateQuery\": false,\n\"hosts\": null,\n\"redirectView\": true,\n\"supportedMediaTypes\": [\n{\n\"type\": \"text\",\n\"subtype\": \"html\",\n\"parameters\": {\n\"charset\": \"UTF-8\"\n},\n\"qualityValue\": 1,\n\"wildcardType\": false,\n\"wildcardSubtype\": false,\n\"charset\": \"UTF-8\",\n\"concrete\": true\n}\n]\n}\n</code></pre>\n"},{"tags":["java","amazon-web-services","amazon-s3"],"comments":[{"owner":{"account_id":100740,"reputation":73217,"user_id":271415,"accept_rate":91,"display_name":"jarmod"},"score":0,"creation_date":1698079239,"post_id":77344031,"comment_id":136356948,"body_markdown":"This is basically the documented AWS [download a file](https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/transfer-manager.html#transfer-manager-download) example. Where is this deployed? EC2? Lambda?","body":"This is basically the documented AWS <a href=\"https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/transfer-manager.html#transfer-manager-download\" rel=\"nofollow noreferrer\">download a file</a> example. Where is this deployed? EC2? Lambda?"}],"owner":{"account_id":4280502,"reputation":193,"user_id":3500028,"accept_rate":50,"display_name":"Rehab Reda"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698052838,"creation_date":1698052838,"question_id":77344031,"body_markdown":"I&#39;m facing a strange issue with the API I am trying to build, specifically when trying to download a file. Here&#39;s what&#39;s happening:\r\n\r\nWhen I run the API on my local machine and request to download a file, everything works fine and the whole file gets downloaded without any problems. However, when I try to make the same request on staging where the API is deployed, only a small part of the file is downloaded.\r\n\r\nThe Amazon S3 async client is set up the same way for both my local environment and the staging environment, except for the credentials provider object. we use the S3 Transfer Manager to handle file downloads\r\n\r\nhere is the code to download a file\r\n\r\n```\r\npublic Long downloadFile(\r\n      String key, String downloadedFileWithPath) {\r\n    if (key == null || key.isEmpty() || downloadedFileWithPath == null\r\n      || downloadedFileWithPath.isEmpty()) {\r\n      throw new IllegalArgumentException(\r\n        &quot;key and downloadedFileWithPath should have a value.&quot;);\r\n    }\r\n    DownloadFileRequest downloadFileRequest =\r\n        DownloadFileRequest.builder()\r\n            .getObjectRequest(b -&gt; b.bucket(bucketName).key(key))\r\n            .addTransferListener(LoggingTransferListener.create())\r\n            .destination(Paths.get(downloadedFileWithPath))\r\n            .build();\r\n\r\n    FileDownload downloadFile = transferManager.downloadFile(\r\n        downloadFileRequest);\r\n\r\n    CompletedFileDownload downloadResult = downloadFile.completionFuture()\r\n        .join();\r\n    return downloadResult.response().contentLength();\r\n\r\n\r\n  }\r\n\r\n\r\n```","title":"File is not completely downloaded using Amazon S3 Transfer Manager AWS SDK Java 2","body":"<p>I'm facing a strange issue with the API I am trying to build, specifically when trying to download a file. Here's what's happening:</p>\n<p>When I run the API on my local machine and request to download a file, everything works fine and the whole file gets downloaded without any problems. However, when I try to make the same request on staging where the API is deployed, only a small part of the file is downloaded.</p>\n<p>The Amazon S3 async client is set up the same way for both my local environment and the staging environment, except for the credentials provider object. we use the S3 Transfer Manager to handle file downloads</p>\n<p>here is the code to download a file</p>\n<pre><code>public Long downloadFile(\n      String key, String downloadedFileWithPath) {\n    if (key == null || key.isEmpty() || downloadedFileWithPath == null\n      || downloadedFileWithPath.isEmpty()) {\n      throw new IllegalArgumentException(\n        &quot;key and downloadedFileWithPath should have a value.&quot;);\n    }\n    DownloadFileRequest downloadFileRequest =\n        DownloadFileRequest.builder()\n            .getObjectRequest(b -&gt; b.bucket(bucketName).key(key))\n            .addTransferListener(LoggingTransferListener.create())\n            .destination(Paths.get(downloadedFileWithPath))\n            .build();\n\n    FileDownload downloadFile = transferManager.downloadFile(\n        downloadFileRequest);\n\n    CompletedFileDownload downloadResult = downloadFile.completionFuture()\n        .join();\n    return downloadResult.response().contentLength();\n\n\n  }\n\n\n</code></pre>\n"},{"tags":["java","spring-boot","hibernate","intellij-idea","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":3622515,"reputation":3911,"user_id":3020903,"accept_rate":50,"display_name":"Tarmo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662105519,"creation_date":1662105519,"answer_id":73579460,"question_id":73579399,"body_markdown":"I would assume because classes `Account` and `Proposal` have a field called `id`, but `CarBrands` and `CarTypes` don&#39;t.","title":"Cannot resolve column &#39;id&#39; on @JoinColumn","body":"<p>I would assume because classes <code>Account</code> and <code>Proposal</code> have a field called <code>id</code>, but <code>CarBrands</code> and <code>CarTypes</code> don't.</p>\n"}],"owner":{"account_id":21932089,"reputation":160,"user_id":16213900,"display_name":"covenant"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":268,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1698052579,"creation_date":1662105157,"question_id":73579399,"body_markdown":"I know there is so much posts about this and i&#39;m searching for this problem for hours. I assigned the data sources and got rid of other &quot;`Cannot resolve column ...`&quot; warnings but these 2 warnings just makes no sense because the `referencedColumnName` method is referencing the same column types in particular classes on the above lines:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/S9T7I.png\r\n\r\nWhy i&#39;m getting errors on the below 2 lines but not above 2 lines?\r\n\r\nCarBrand entity:\r\n\r\n    package com.sbm.insurance.entities;\r\n    \r\n    import lombok.*;\r\n    \r\n    import javax.persistence.*;\r\n    import javax.validation.constraints.Max;\r\n    import javax.validation.constraints.Min;\r\n    import javax.validation.constraints.NotBlank;\r\n    import java.util.List;\r\n    \r\n    @Entity\r\n    @Getter\r\n    @Setter\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @Builder\r\n    @Table(\r\n            uniqueConstraints = @UniqueConstraint(\r\n                    name = &quot;carBrand&quot;,\r\n                    columnNames = &quot;carBrand&quot;\r\n            )\r\n    )\r\n    public class CarBrands {\r\n\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Long id;\r\n    \r\n        @NotBlank(message = &quot;Car Brand can&#39;t be null or empty&quot;)\r\n        private String carBrand;\r\n    \r\n        @Min(1)\r\n        @Max(999999)\r\n        private float carBrandMultiplier;\r\n    \r\n        @OneToMany(\r\n                mappedBy = &quot;brand&quot;,\r\n                cascade = CascadeType.REMOVE,\r\n                fetch = FetchType.LAZY\r\n        )\r\n        private List&lt;Car&gt; car;\r\n\r\n    }","title":"Cannot resolve column &#39;id&#39; on @JoinColumn","body":"<p>I know there is so much posts about this and i'm searching for this problem for hours. I assigned the data sources and got rid of other &quot;<code>Cannot resolve column ...</code>&quot; warnings but these 2 warnings just makes no sense because the <code>referencedColumnName</code> method is referencing the same column types in particular classes on the above lines:\n<a href=\"https://i.stack.imgur.com/S9T7I.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/S9T7I.png\" alt=\"enter image description here\" /></a></p>\n<p>Why i'm getting errors on the below 2 lines but not above 2 lines?</p>\n<p>CarBrand entity:</p>\n<pre><code>package com.sbm.insurance.entities;\n\nimport lombok.*;\n\nimport javax.persistence.*;\nimport javax.validation.constraints.Max;\nimport javax.validation.constraints.Min;\nimport javax.validation.constraints.NotBlank;\nimport java.util.List;\n\n@Entity\n@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\n@Builder\n@Table(\n        uniqueConstraints = @UniqueConstraint(\n                name = &quot;carBrand&quot;,\n                columnNames = &quot;carBrand&quot;\n        )\n)\npublic class CarBrands {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @NotBlank(message = &quot;Car Brand can't be null or empty&quot;)\n    private String carBrand;\n\n    @Min(1)\n    @Max(999999)\n    private float carBrandMultiplier;\n\n    @OneToMany(\n            mappedBy = &quot;brand&quot;,\n            cascade = CascadeType.REMOVE,\n            fetch = FetchType.LAZY\n    )\n    private List&lt;Car&gt; car;\n\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1698070288,"post_id":77343757,"comment_id":136355114,"body_markdown":"Questions like this do better on [codereview.se]. At least I would hope so, but you&#39;ve already gotten two answers to this off-topic (on SO) question :-(","body":"Questions like this do better on <a href=\"https://codereview.stackexchange.com\">Code Review</a>. At least I would hope so, but you&#39;ve already gotten two answers to this off-topic (on SO) question :-("}],"answers":[{"tags":[],"owner":{"account_id":11733063,"reputation":156,"user_id":8587847,"display_name":"Md Alif Al Amin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698052273,"creation_date":1698052273,"answer_id":77343969,"question_id":77343757,"body_markdown":"Using a static menu is not wrong but if you want more controls on each of the options, Then I will suggest you to write your own menu class. here is a sample class what you can expect: \r\n\r\n    public class Menu {\r\n        private String[] menuOptions;\r\n        private Scanner input;\r\n        private boolean quitProgram;\r\n    \r\n        public Menu(String[] menuOptions, Scanner input) {\r\n            this.menuOptions = menuOptions;\r\n            this.input = input;\r\n        }\r\n    \r\n        public void runMenu() {\r\n            do {\r\n                for (String option : menuOptions) {\r\n                    System.out.println(option);\r\n                }\r\n                System.out.print(&quot;Enter an option: &quot;);\r\n                int choice = input.nextInt();\r\n                input.nextLine();  // Consume the newline character\r\n                processOption(choice);\r\n            } while (!quitProgram);\r\n        }\r\n    \r\n        private void processOption(int choice) {\r\n            // Logic to handle the chosen option\r\n        }\r\n    }\r\nhere are some suggestions,\r\nyour code is not well-separated. The Menu class combines the responsibilities of displaying menus, handling user input, and controlling program flow. It&#39;s generally a good practice to separate these concerns.\r\n\r\n 1. Displaying menus could be separated into a dedicated UI class.\r\n 2. Handling user input could be moved to a separate input-handling class. \r\n 3. The Menu class should primarily focus on controlling the flow of the\r\n    program based on user input.\r\n\r\nBy separating these concerns, you make the code more modular, maintainable, and easier to extend. \r\n\r\nHope it helps :)\r\n","title":"Practices for implementing a Menu class in Java","body":"<p>Using a static menu is not wrong but if you want more controls on each of the options, Then I will suggest you to write your own menu class. here is a sample class what you can expect:</p>\n<pre><code>public class Menu {\n    private String[] menuOptions;\n    private Scanner input;\n    private boolean quitProgram;\n\n    public Menu(String[] menuOptions, Scanner input) {\n        this.menuOptions = menuOptions;\n        this.input = input;\n    }\n\n    public void runMenu() {\n        do {\n            for (String option : menuOptions) {\n                System.out.println(option);\n            }\n            System.out.print(&quot;Enter an option: &quot;);\n            int choice = input.nextInt();\n            input.nextLine();  // Consume the newline character\n            processOption(choice);\n        } while (!quitProgram);\n    }\n\n    private void processOption(int choice) {\n        // Logic to handle the chosen option\n    }\n}\n</code></pre>\n<p>here are some suggestions,\nyour code is not well-separated. The Menu class combines the responsibilities of displaying menus, handling user input, and controlling program flow. It's generally a good practice to separate these concerns.</p>\n<ol>\n<li>Displaying menus could be separated into a dedicated UI class.</li>\n<li>Handling user input could be moved to a separate input-handling class.</li>\n<li>The Menu class should primarily focus on controlling the flow of the\nprogram based on user input.</li>\n</ol>\n<p>By separating these concerns, you make the code more modular, maintainable, and easier to extend.</p>\n<p>Hope it helps :)</p>\n"}],"owner":{"account_id":29313591,"reputation":19,"user_id":22458828,"display_name":"Kerem Tazedal"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1698078207,"answer_count":1,"score":-1,"last_activity_date":1698052273,"creation_date":1698050242,"question_id":77343757,"body_markdown":"I&#39;m working on a Java program where I have implemented a Menu class with static methods to manage menu options. Is this considered a good practice in Java programming? Here&#39;s my code:\r\n\r\n```\r\nimport java.io.File;\r\nimport java.io.FileNotFoundException;\r\nimport java.util.InputMismatchException;\r\nimport java.util.Scanner;\r\n\r\npublic class Menu {\r\n    public static Scanner input = new Scanner(System.in);\r\n    public static boolean quitProgram = false;\r\n\r\n    static String[] customerMenuOptions = {&quot;\\n1. Search the catalog.&quot;,\r\n            &quot;2. Browse the catalog.&quot;,\r\n            &quot;3. Log in as Administrator.&quot;,\r\n            &quot;4. Exit the program&quot;};\r\n    static String[] employeeMenuOptions = {&quot;\\n1. Add a product.&quot;,\r\n            &quot;2. Search the catalog.&quot;,\r\n            &quot;3. Browse the catalog.&quot;,\r\n            &quot;4. Remove a product.&quot;,\r\n            &quot;5. Exit the program&quot;};\r\n    static String[] catalogOptions = {&quot;1. Browse the catalog.&quot;,\r\n            &quot;2. Search the catalog.&quot;,\r\n            &quot;3. Go back to the main menu.&quot;};\r\n\r\n    public static void menu(String[] args) {\r\n\r\n    }\r\n\r\n    public static void showIntroduction() {\r\n        System.out.println(&quot;Welcome to the Fruit and Vegetable program.&quot;);\r\n        System.out.print(&quot;Please enter any key to continue to the meny.&quot;);\r\n        String employeeInput = input.nextLine();\r\n    }\r\n\r\n    public static void runCustomerInterface() {\r\n        do {\r\n            for (String listOfMenuOptions : customerMenuOptions) {\r\n                System.out.println(listOfMenuOptions);\r\n            }\r\n            System.out.print(&quot;Enter one of the following numbers to continue: &quot;);\r\n\r\n            try {\r\n                customerMenu();\r\n\r\n            } catch (InputMismatchException e) {\r\n                System.out.println(&quot;\\nThe input is not valid, you cannot enter a letter, please enter a number.&quot;);\r\n                input.nextLine();\r\n            }\r\n\r\n        } while (!quitProgram);\r\n    }\r\n\r\n    public static void customerMenu() {\r\n        int employeeInput = input.nextInt();\r\n        input.nextLine();\r\n\r\n        switch (employeeInput) {\r\n            case 1 -&gt; Catalog.searchTheCatalog();\r\n            case 2 -&gt; Catalog.browseTheCatalog();\r\n            case 3 -&gt; logInAsAdmin();\r\n            case 4 -&gt; quitProgram = true;\r\n            default -&gt; System.out.println(&quot;\\nThe input is not valid, please enter a number between 1-5. &quot;);\r\n        }\r\n    }\r\n\r\n    public static void runAdminInterface() {\r\n        do {\r\n            for (String listOfMenuOptions : employeeMenuOptions) {\r\n                System.out.println(listOfMenuOptions);\r\n            }\r\n            System.out.print(&quot;Enter one of the following numbers to continue: &quot;);\r\n\r\n            try {\r\n                employeeMenu();\r\n\r\n            } catch (InputMismatchException e) {\r\n                System.out.println(&quot;\\nThe input is not valid, you cannot enter a letter, please enter a number.&quot;);\r\n                input.nextLine();\r\n            }\r\n\r\n        } while (!quitProgram);\r\n    }\r\n\r\n    private static void logInAsAdmin() {\r\n        File userNames = new File(&quot;usernames.txt&quot;);\r\n        File passwords = new File(&quot;passwords.txt&quot;);\r\n\r\n        System.out.println(&quot;\\nWelcome to the login menu.&quot;);\r\n        System.out.print(&quot;Please enter username: &quot;);\r\n        String username = input.nextLine();\r\n        System.out.print(&quot;Please enter password: &quot;);\r\n        String password = input.nextLine();\r\n\r\n        try {\r\n            Scanner userNamesFile = new Scanner(userNames);\r\n            Scanner userPasswordFile = new Scanner(passwords);\r\n            while (userNamesFile.hasNext() &amp;&amp; userPasswordFile.hasNext()) {\r\n                String userExist = userNamesFile.nextLine();\r\n                String passExist = userPasswordFile.nextLine();\r\n                if (userExist.equals(username) &amp;&amp; passExist.equals(password)) {\r\n                    System.out.print(&quot;\\nWelcome to the employee platform.&quot;);\r\n                    runAdminInterface();\r\n                }\r\n            }\r\n        } catch (FileNotFoundException e) {\r\n            System.out.println(&quot;File not found&quot;);\r\n        }\r\n    }\r\n\r\n    public static void printQuitProgramMessage() {\r\n        System.out.println(&quot;\\nThank you for using the Fruit and Vegetable program.&quot;);\r\n        System.out.println(&quot;All credit goes to Kerem Incorporated.&quot;);\r\n    }\r\n\r\n    public static void employeeMenu() {\r\n        int employeeInput = input.nextInt();\r\n        input.nextLine();\r\n\r\n        switch (employeeInput) {\r\n            case 1 -&gt; Catalog.addFruitOrVegetableToCatalog();\r\n            case 2 -&gt; Catalog.searchTheCatalog();\r\n            case 3 -&gt; Catalog.browseTheCatalog();\r\n            case 4 -&gt; Catalog.removeProduct();\r\n            case 5 -&gt; quitProgram = true;\r\n            default -&gt; System.out.println(&quot;\\nThe input is not valid, please enter a number between 1-5. &quot;);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n\r\nMy primary concerns are:\r\n\r\nObject-Oriented Approach: Is it a best practice to use static methods for a Menu class in Java? I&#39;ve heard that Java is an object-oriented language, and I&#39;m wondering if there&#39;s a more object-oriented way to implement the menu.\r\n\r\nSeparation of Concerns: Is this code maintaining a clean separation of concerns? Right now, my Menu class is responsible for displaying menus, handling user input, and directing control flow to different parts of the program. \r\n\r\nI appreciate any insights or suggestions on improving this code structure.","title":"Practices for implementing a Menu class in Java","body":"<p>I'm working on a Java program where I have implemented a Menu class with static methods to manage menu options. Is this considered a good practice in Java programming? Here's my code:</p>\n<pre><code>import java.io.File;\nimport java.io.FileNotFoundException;\nimport java.util.InputMismatchException;\nimport java.util.Scanner;\n\npublic class Menu {\n    public static Scanner input = new Scanner(System.in);\n    public static boolean quitProgram = false;\n\n    static String[] customerMenuOptions = {&quot;\\n1. Search the catalog.&quot;,\n            &quot;2. Browse the catalog.&quot;,\n            &quot;3. Log in as Administrator.&quot;,\n            &quot;4. Exit the program&quot;};\n    static String[] employeeMenuOptions = {&quot;\\n1. Add a product.&quot;,\n            &quot;2. Search the catalog.&quot;,\n            &quot;3. Browse the catalog.&quot;,\n            &quot;4. Remove a product.&quot;,\n            &quot;5. Exit the program&quot;};\n    static String[] catalogOptions = {&quot;1. Browse the catalog.&quot;,\n            &quot;2. Search the catalog.&quot;,\n            &quot;3. Go back to the main menu.&quot;};\n\n    public static void menu(String[] args) {\n\n    }\n\n    public static void showIntroduction() {\n        System.out.println(&quot;Welcome to the Fruit and Vegetable program.&quot;);\n        System.out.print(&quot;Please enter any key to continue to the meny.&quot;);\n        String employeeInput = input.nextLine();\n    }\n\n    public static void runCustomerInterface() {\n        do {\n            for (String listOfMenuOptions : customerMenuOptions) {\n                System.out.println(listOfMenuOptions);\n            }\n            System.out.print(&quot;Enter one of the following numbers to continue: &quot;);\n\n            try {\n                customerMenu();\n\n            } catch (InputMismatchException e) {\n                System.out.println(&quot;\\nThe input is not valid, you cannot enter a letter, please enter a number.&quot;);\n                input.nextLine();\n            }\n\n        } while (!quitProgram);\n    }\n\n    public static void customerMenu() {\n        int employeeInput = input.nextInt();\n        input.nextLine();\n\n        switch (employeeInput) {\n            case 1 -&gt; Catalog.searchTheCatalog();\n            case 2 -&gt; Catalog.browseTheCatalog();\n            case 3 -&gt; logInAsAdmin();\n            case 4 -&gt; quitProgram = true;\n            default -&gt; System.out.println(&quot;\\nThe input is not valid, please enter a number between 1-5. &quot;);\n        }\n    }\n\n    public static void runAdminInterface() {\n        do {\n            for (String listOfMenuOptions : employeeMenuOptions) {\n                System.out.println(listOfMenuOptions);\n            }\n            System.out.print(&quot;Enter one of the following numbers to continue: &quot;);\n\n            try {\n                employeeMenu();\n\n            } catch (InputMismatchException e) {\n                System.out.println(&quot;\\nThe input is not valid, you cannot enter a letter, please enter a number.&quot;);\n                input.nextLine();\n            }\n\n        } while (!quitProgram);\n    }\n\n    private static void logInAsAdmin() {\n        File userNames = new File(&quot;usernames.txt&quot;);\n        File passwords = new File(&quot;passwords.txt&quot;);\n\n        System.out.println(&quot;\\nWelcome to the login menu.&quot;);\n        System.out.print(&quot;Please enter username: &quot;);\n        String username = input.nextLine();\n        System.out.print(&quot;Please enter password: &quot;);\n        String password = input.nextLine();\n\n        try {\n            Scanner userNamesFile = new Scanner(userNames);\n            Scanner userPasswordFile = new Scanner(passwords);\n            while (userNamesFile.hasNext() &amp;&amp; userPasswordFile.hasNext()) {\n                String userExist = userNamesFile.nextLine();\n                String passExist = userPasswordFile.nextLine();\n                if (userExist.equals(username) &amp;&amp; passExist.equals(password)) {\n                    System.out.print(&quot;\\nWelcome to the employee platform.&quot;);\n                    runAdminInterface();\n                }\n            }\n        } catch (FileNotFoundException e) {\n            System.out.println(&quot;File not found&quot;);\n        }\n    }\n\n    public static void printQuitProgramMessage() {\n        System.out.println(&quot;\\nThank you for using the Fruit and Vegetable program.&quot;);\n        System.out.println(&quot;All credit goes to Kerem Incorporated.&quot;);\n    }\n\n    public static void employeeMenu() {\n        int employeeInput = input.nextInt();\n        input.nextLine();\n\n        switch (employeeInput) {\n            case 1 -&gt; Catalog.addFruitOrVegetableToCatalog();\n            case 2 -&gt; Catalog.searchTheCatalog();\n            case 3 -&gt; Catalog.browseTheCatalog();\n            case 4 -&gt; Catalog.removeProduct();\n            case 5 -&gt; quitProgram = true;\n            default -&gt; System.out.println(&quot;\\nThe input is not valid, please enter a number between 1-5. &quot;);\n        }\n    }\n}\n</code></pre>\n<p>My primary concerns are:</p>\n<p>Object-Oriented Approach: Is it a best practice to use static methods for a Menu class in Java? I've heard that Java is an object-oriented language, and I'm wondering if there's a more object-oriented way to implement the menu.</p>\n<p>Separation of Concerns: Is this code maintaining a clean separation of concerns? Right now, my Menu class is responsible for displaying menus, handling user input, and directing control flow to different parts of the program.</p>\n<p>I appreciate any insights or suggestions on improving this code structure.</p>\n"},{"tags":["java","spring-boot","ssl","tomcat","sslcontext-kickstart"],"owner":{"account_id":9107988,"reputation":3190,"user_id":6777695,"display_name":"Hakan54"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":101,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698052112,"creation_date":1697708816,"question_id":77322685,"body_markdown":"I am trying to configure the ssl configuration of a spring boot with a tomcat embedded server. Spring Boot is by default provided with a tomcat. SSL can be configured with the application properties such as keystore path, truststore path etc. I don&#39;t want to configure it with properties, so I just want to configure it programatically. I have developed my [own ssl library][1] which I want to use as it has couple of additional feature which I need use. In the past I attempted to configure it but failed, so I switch to either using spring boot with jetty or netty to configure my server ssl programatically. However it was still in my mind to give it another try. Today I am still failing to configure it programatically, maybe someone can help me out.\r\n\r\nMy stacktrace is:\r\n```\r\nCaused by: org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat server\r\n\tat org.springframework.boot.web.embedded.tomcat.TomcatWebServer.start(TomcatWebServer.java:229)\r\n\tat org.springframework.boot.web.servlet.context.WebServerStartStopLifecycle.start(WebServerStartStopLifecycle.java:43)\r\n\tat org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:178)\r\n\t... 14 more\r\nCaused by: java.lang.IllegalArgumentException: standardService.connector.startFailed\r\n\tat org.apache.catalina.core.StandardService.addConnector(StandardService.java:238)\r\n\tat org.springframework.boot.web.embedded.tomcat.TomcatWebServer.addPreviouslyRemovedConnectors(TomcatWebServer.java:282)\r\n\tat org.springframework.boot.web.embedded.tomcat.TomcatWebServer.start(TomcatWebServer.java:213)\r\n\t... 16 more\r\nCaused by: org.apache.catalina.LifecycleException: Protocol handler start failed\r\n\tat org.apache.catalina.connector.Connector.startInternal(Connector.java:1077)\r\n\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\tat org.apache.catalina.core.StandardService.addConnector(StandardService.java:234)\r\n\t... 18 more\r\nCaused by: java.lang.IllegalArgumentException: SSLHostConfig attribute certificateFile must be defined when using an SSL connector\r\n\tat org.apache.tomcat.util.net.AbstractJsseEndpoint.createSSLContext(AbstractJsseEndpoint.java:107)\r\n\tat org.apache.tomcat.util.net.AbstractJsseEndpoint.initialiseSsl(AbstractJsseEndpoint.java:71)\r\n\tat org.apache.tomcat.util.net.NioEndpoint.bind(NioEndpoint.java:235)\r\n\tat org.apache.tomcat.util.net.AbstractEndpoint.bindWithCleanup(AbstractEndpoint.java:1227)\r\n\tat org.apache.tomcat.util.net.AbstractEndpoint.start(AbstractEndpoint.java:1313)\r\n\tat org.apache.coyote.AbstractProtocol.start(AbstractProtocol.java:617)\r\n\tat org.apache.catalina.connector.Connector.startInternal(Connector.java:1074)\r\n\t... 20 more\r\nCaused by: java.io.IOException: SSLHostConfig attribute certificateFile must be defined when using an SSL connector\r\n\tat org.apache.tomcat.util.net.SSLUtilBase.getKeyManagers(SSLUtilBase.java:312)\r\n\tat org.apache.tomcat.util.net.SSLUtilBase.createSSLContext(SSLUtilBase.java:247)\r\n\tat org.apache.tomcat.util.net.AbstractJsseEndpoint.createSSLContext(AbstractJsseEndpoint.java:105)\r\n\t... 26 more\r\n```\r\n\r\nMy code looks like this:\r\n```java\r\nimport org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory;\r\nimport org.springframework.boot.web.servlet.server.ServletWebServerFactory;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\n\r\n@Configuration\r\npublic class ServerConfig {\r\n\r\n    @Bean\r\n    public ServletWebServerFactory servletContainer(SSLConnectorCustomizer sslConnectorCustomizer) {\r\n        TomcatServletWebServerFactory tomcat = new TomcatServletWebServerFactory();\r\n        tomcat.addConnectorCustomizers(sslConnectorCustomizer);\r\n        return tomcat;\r\n    }\r\n\r\n}\r\n```\r\n\r\n```java\r\nimport nl.altindag.ssl.SSLFactory;\r\nimport org.springframework.beans.factory.annotation.Value;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\n\r\n@Configuration\r\npublic class SSLConfig {\r\n\r\n    @Bean\r\n    public SSLFactory sslFactory(@Value(&quot;${ssl.keystore-path}&quot;) String keyStorePath,\r\n                                 @Value(&quot;${ssl.keystore-password}&quot;) char[] keyStorePassword,\r\n                                 @Value(&quot;${ssl.truststore-path}&quot;) String trustStorePath,\r\n                                 @Value(&quot;${ssl.truststore-password}&quot;) char[] trustStorePassword,\r\n                                 @Value(&quot;${ssl.client-auth}&quot;) boolean isClientAuthenticationRequired) {\r\n\r\n        return SSLFactory.builder()\r\n                .withSwappableIdentityMaterial()\r\n                .withSwappableTrustMaterial()\r\n                .withIdentityMaterial(keyStorePath, keyStorePassword)\r\n                .withTrustMaterial(trustStorePath, trustStorePassword)\r\n                .withDefaultTrustMaterial()\r\n                .withSystemTrustMaterial()\r\n                .withNeedClientAuthentication(isClientAuthenticationRequired)\r\n                .build();\r\n    }\r\n\r\n}\r\n```\r\n\r\n```java\r\nimport nl.altindag.ssl.SSLFactory;\r\nimport nl.altindag.ssl.util.KeyStoreUtils;\r\nimport org.apache.catalina.connector.Connector;\r\nimport org.apache.coyote.http11.AbstractHttp11Protocol;\r\nimport org.apache.tomcat.util.net.SSLHostConfig;\r\nimport org.apache.tomcat.util.net.SSLHostConfigCertificate;\r\nimport org.apache.tomcat.util.net.SSLHostConfigCertificate.Type;\r\nimport org.springframework.boot.web.embedded.tomcat.TomcatConnectorCustomizer;\r\nimport org.springframework.context.annotation.Configuration;\r\n\r\nimport javax.net.ssl.SSLParameters;\r\nimport javax.net.ssl.X509TrustManager;\r\nimport java.security.KeyStore;\r\n\r\n@Configuration\r\npublic class SSLConnectorCustomizer implements TomcatConnectorCustomizer {\r\n\r\n    private final SSLFactory sslFactory;\r\n\r\n    public SSLConnectorCustomizer(SSLFactory sslFactory) {\r\n        this.sslFactory = sslFactory;\r\n    }\r\n\r\n    @Override\r\n    public void customize(Connector connector) {\r\n        connector.setScheme(&quot;https&quot;);\r\n        connector.setSecure(true);\r\n        connector.setPort(8444);\r\n\r\n        AbstractHttp11Protocol&lt;?&gt; protocol = (AbstractHttp11Protocol&lt;?&gt;) connector.getProtocolHandler();\r\n        configureSsl(protocol);\r\n    }\r\n\r\n    private void configureSsl(AbstractHttp11Protocol&lt;?&gt; protocol) {\r\n        protocol.setSSLEnabled(true);\r\n\r\n        SSLHostConfig sslHostConfig = new SSLHostConfig();\r\n        sslHostConfig.setSslProtocol(&quot;TLS&quot;);\r\n        sslHostConfig.setHostName(protocol.getDefaultSSLHostConfigName());\r\n\r\n        configureSslClientAuth(sslHostConfig);\r\n\r\n        KeyStore trustStore = sslFactory.getTrustManager()\r\n                .map(X509TrustManager::getAcceptedIssuers)\r\n                .map(KeyStoreUtils::createTrustStore)\r\n                .orElseThrow();\r\n        sslHostConfig.setTrustStore(trustStore);\r\n\r\n        SSLHostConfigCertificate certificate = new SSLHostConfigCertificate(sslHostConfig, Type.UNDEFINED);\r\n        certificate.setSslContext(new SSLContextWrapper(sslFactory));\r\n        sslFactory.getKeyManager().ifPresent(certificate::setCertificateKeyManager);\r\n        sslHostConfig.addCertificate(certificate);\r\n\r\n        String ciphers = String.join(&quot;,&quot;, sslFactory.getCiphers());\r\n        sslHostConfig.setCiphers(ciphers);\r\n\r\n        String protocols = String.join(&quot;,&quot;, sslFactory.getProtocols());\r\n        sslHostConfig.setProtocols(protocols);\r\n\r\n        protocol.addSslHostConfig(sslHostConfig);\r\n    }\r\n\r\n    private void configureSslClientAuth(SSLHostConfig config) {\r\n        String clientAuth;\r\n        SSLParameters sslParameters = sslFactory.getSslParameters();\r\n        if (sslParameters.getNeedClientAuth()) {\r\n            clientAuth = &quot;required&quot;;\r\n        } else if (sslParameters.getWantClientAuth()) {\r\n            clientAuth = &quot;optional&quot;;\r\n        } else {\r\n            clientAuth = &quot;none&quot;;\r\n        }\r\n\r\n        config.setCertificateVerification(clientAuth);\r\n    }\r\n\r\n}\r\n```\r\n\r\n```java\r\nimport nl.altindag.ssl.SSLFactory;\r\nimport org.apache.tomcat.util.net.SSLContext;\r\n\r\nimport javax.net.ssl.KeyManager;\r\nimport javax.net.ssl.SSLEngine;\r\nimport javax.net.ssl.SSLParameters;\r\nimport javax.net.ssl.SSLServerSocketFactory;\r\nimport javax.net.ssl.SSLSessionContext;\r\nimport javax.net.ssl.TrustManager;\r\nimport java.security.SecureRandom;\r\nimport java.security.cert.X509Certificate;\r\n\r\npublic final class SSLContextWrapper implements SSLContext {\r\n\r\n    private final SSLFactory sslFactory;\r\n\r\n    public SSLContextWrapper(SSLFactory sslFactory) {\r\n        this.sslFactory = sslFactory;\r\n    }\r\n\r\n\r\n    @Override\r\n    public void init(KeyManager[] kms, TrustManager[] tms, SecureRandom sr) {\r\n        // not needed to initialize as it is already initialized\r\n    }\r\n\r\n    @Override\r\n    public void destroy() {\r\n\r\n    }\r\n\r\n    @Override\r\n    public SSLSessionContext getServerSessionContext() {\r\n        return sslFactory.getSslContext().getServerSessionContext();\r\n    }\r\n\r\n    @Override\r\n    public SSLEngine createSSLEngine() {\r\n        return sslFactory.getSSLEngine();\r\n    }\r\n\r\n    @Override\r\n    public SSLServerSocketFactory getServerSocketFactory() {\r\n        return sslFactory.getSslServerSocketFactory();\r\n    }\r\n\r\n    @Override\r\n    public SSLParameters getSupportedSSLParameters() {\r\n        return sslFactory.getSslParameters();\r\n    }\r\n\r\n    @Override\r\n    public X509Certificate[] getCertificateChain(String alias) {\r\n        return sslFactory.getKeyManager()\r\n                .map(keyManager -&gt; keyManager.getCertificateChain(&quot;server&quot;))\r\n                .orElseThrow();\r\n    }\r\n\r\n    @Override\r\n    public X509Certificate[] getAcceptedIssuers() {\r\n        return sslFactory.getTrustedCertificates().toArray(new X509Certificate[0]);\r\n    }\r\n\r\n}\r\n```\r\n\r\nI am not able to share the keystores as a file here, so I converted them to a base64 encoded string. So if you want to give it a try on your side you can decode and create the binary file out of it.\r\n\r\n**identity.jks**\r\n```\r\nMIIOcwIBAzCCDiwGCSqGSIb3DQEHAaCCDh0Egg4ZMIIOFTCCBWEGCSqGSIb3DQEH\r\nAaCCBVIEggVOMIIFSjCCBUYGCyqGSIb3DQEMCgECoIIE8zCCBO8wKQYKKoZIhvcN\r\nAQwBAzAbBBTU8ZeqKOoF7Pmc7PrK1Q9hRT8FRAIDAMNQBIIEwEI/jcEKkEnevxHl\r\nqODLeIHtT72gr+S34JT99nUeSOyqdWko7mN7ilZQ84scJmdvQoaJYHnjG7hLPxpi\r\nghEYFwMyA5ZRcpdqKoRnCyI1SBzeNI1xho5pxpjukivLdXLBxmPrykNpawtkBNgN\r\n6oamN7wI437IsnunvtBMrjohQZlvf0/5X4DBaBlxXB3T+ZjpQcqdGfA7LTNsdlHt\r\nF2/pzolJYc8BFBBEGMFNBb3NPQ91tBANPvDMIaaEEbY5G7zJX+BAKqnN3DmUrfEa\r\nUNyjYdCd8apDfHV6SezuKle5nDz4KGpnsTfwANSDGLiy9SKo4Tv+E1nUMtA24yb4\r\n54L0CfCnoTTtNaqGRJ0KM6a3xH92ImjD6KaOHlMjwUrlOcT6HOzQk5Mknvjv8B/B\r\n1rixVlC69ctySSMH3eZG6vdcV267ZR3L1wHZSCtuXbCHgylbvGY1N/5JCWbY7poT\r\neQ45SSsDxz1tgy4Hv6lrjrQ+c1+fm7aCYmFEH3iT/xpX0BdD+eqQ8enzbPOuYvL7\r\n1HsQo8f1XIzt6QHnGqvZ3QUKJ+fJLqr7DiHwVW1wt3S3Dea7SCyy+UmM5bo/RlUG\r\ncldEc6mkTCAxrl3BMM8H0ShMg3WyNkaF/CnZJhUAHC/DYzyax0UVJk8/Q/i9qjnY\r\nbhO2E0fCe97T48wPVswMG4LuE0IHKbHr6nBaX4hhZcf3CBjtJvKdfFvGwtswylqY\r\npFm8JWZiEqNmZN6nRP7EY8xkmnRIp6LN4ve0i3vkBolN35G58kjwXjSKFirlGuJV\r\nAz6k+r0EjqQrHsj6oteVT7tAI6BzxodnY5mooMrAtnttYS7vl3MIXkpYBzwe0KFM\r\n2NWXwLug5QvQ0uAEdX9aPR/ly7SP5XzQpQKdiixvAQRZ2Zxtfo32wGqVQawbKEKE\r\npfVsQK9agx7ofGbUiztVXYem9jVq/gvzAro1XFH94Pt+Lg1iVmi2LZt6mljHH/eC\r\namMzqG7td3G1hKU3sKYUaIVgbyJw+LSlXbrcbV5vsLepOFV+lH9SxoXJzzdxYrAs\r\ncw033weLwLTkQUPgSjYy0XTKIZqIRZM5oKDT6wEzN1QqvQJe59O6N3fl1bH9uZuj\r\nYF1iuxLKtdb/aawhtckp3iREpqTYbIZQEM4cDrPyElkbBUw34kj/TYnRE0ooorDI\r\nL5yP3WTaawLlsLFPlwnIqS4bjQCkfb8PPBVJSmk+v2K16rSlxnu2zjINe1gVbeLl\r\ngsuKL1IWC7yBdbE0sqVVgi9TiSzZglNMQIaLuA+wmY8U7jHz697NTeWL/XUnf5+T\r\nrMmYjQo0GWLDJq1mOmaSUxKo0kx20go0dMfONIiRaKlfFvxpIF9aLhfSGSFWMs3g\r\niwd+9Jzencx/gtm8Rb9U1oDMEyc6GwU5JHiwmDLQ5e1P6jsZPTLGdiUSQd6tdU+u\r\nPs+0nCVwawaH9O1grDwHRKQcw7Dy+LKCjy3PSzbEPValY7MmjJmLA/jSQ0kUAr9j\r\nB+XVG0QyqBSluBUmlOafhdnRh8nkldIiTZiWdfUMTPg2hJGdFqlZA+kMI6O9V4aW\r\nyw/jlHR8U076MC1vdrSf+ysQK/GF0ipcvndH1Ci3o/3qgUNGYiJyoh2jH5FAnsJl\r\nYeoBlcwxQDAbBgkqhkiG9w0BCRQxDh4MAHMAZQByAHYAZQByMCEGCSqGSIb3DQEJ\r\nFTEUBBJUaW1lIDE2MjAwOTg5NDEwNDIwggisBgkqhkiG9w0BBwagggidMIIImQIB\r\nADCCCJIGCSqGSIb3DQEHATApBgoqhkiG9w0BDAEGMBsEFF7A5A+E84WmDPd2Cys2\r\nPDdJB5ZGAgMAw1CAgghYNQ5VqiEWhLWXChJB10sg9tTGj69Yw0jU1bBJKaK10xOv\r\napPElDnkb13sDk+Wt15VcF6i9uvvmEXjakfsWCT4VmR0coiNLCtqBCmIXTlSzKcN\r\nYiTAWt//LMVyXQvsPyxai7/TFrHnUjYPlMYTEjZZsRtSiaAGKSeS0zY0vw8/fkvE\r\nFuuz3k95NsuWCuxBMsSBzTAFhxmcjggShG9RBSzW0zjf4tyGULEi8vs7qXF4Ky42\r\nVUDiiQ25WP135+BM04eNGHREQMWzKBcl5udJCheHxOevZRBB9M74d/d2PYT3QnnG\r\nFodcHz20lX2L7c7KpE1CvfA1PND3EFVh+6X4ZOB3fJMIriSnzogDPYB34BIvSLcG\r\njUx2CmdnM2FTrWLb1Tx77Dp0R6lONaHmJmruJWesVwGdZHVRTdszggw802vDySxD\r\n5H16ONWXmag2w94KAogWN/ijFYFloKS55cNhWCYZ5fLrmQIilDq13DujcENce8dk\r\n81x86/b/gEW98bhxAZLA59niQWRULJjESLvRTF7I8dgKnE2Hinnjc/hLctNfLgIV\r\nEq0xw2Y7QpVtX+Vown66fLADD9bxWPQUHHZmlnIejCW1wibzEsCBtYlFSmX7MqYH\r\nr5gtx8fLveqCasGuPHCZQ9sJNrhKQG+RbOKZqAP9wexvks3U1YwApYhcSEAmQDEs\r\n/efxoPFBFsrRHhmoTLpWzMzptSw8/AJ1V1BFZZ2QIh4l2a97Bz7ho00QGD9BYL0C\r\n1qtvM1RnVJUYtIR2l7Rj0lH9s7DfH4ha5dE/Vxx+PeRO0NBy7hC3wgFKp4tpQAgi\r\ntYaKCjGlCA+FK7avWdIfB6NZjSuTSyv6JitkjVPY00Fh05OpB/r0OGX1FXYEWmxs\r\nusUD4WGk0zTAUaex5Ji4qpW9g7xWo/8phkoiAxdLmrAam4pJHS8ihy7VSr0HHT88\r\nyo0t/AclEgwgX/ZzW9ewvLJ5na7wbH+ES6cWYK/8GTS9KYVK5QztL7FHEbptQoNT\r\n0w9MEqcFHgFqZdYxkzGvVY+/3pd3B5PxfX3c+ncLfDrLRhgPJE8wvlX3PSzsJ9kp\r\nENGgWRJhp7t6GGcrJzLcoHD8uRF3T1MRpIkH9+a7P1WMF2TWXbz0b5TfgERQte49\r\nY+MLg0evEj2pMUA323NCjc3EkraVJkMeGcwIWOJUIeT91nKRQ8YjV6DOQV9ChYIB\r\nNkkqmKaL5vNP+kRVo/JeLsFEpi3x/GkahGWB5qN5FUdsAbRRMT0ZmD+LujSvczlZ\r\nftyf40h9umSSlmlvuF+SH2j18Wd0/1Ky+dITFEM7OK2tiNVNdWOXXgU0skO3wkjt\r\nfhV41y4R+usENPX2lPxqO/VDRPAvvsCOY3/Ugwsg8Fkedx1A7JhPzcJ4HrYDfI3z\r\ncNDt5x0oPsDIYwJTOnrj/WXdUaVA56447ajBpRnkS8dSswWQmrRUBbw6V1h4V6Gz\r\n/m4MPklkFSM7Yv8+10/8IyC4vFR4YCCyGD3/BB3JsRtw5woWwGMuwhZp/PD32bHk\r\nfZC8OWBNLbYT1UTXyNLaZjzpk/aUrrXP5vzDUR5DxhBtNalce2vY45RHinf9Urcp\r\n2TVV7rHQRlFjfF4TPv3+iq8m1u7QWfVBsmKKWSpQsu9qcJAvsWmnQ+ry9dW+fqJY\r\nXC9bwAijaZgJcUbGjtTRXyaZaoxXNL0ZO7QOkhX901a1WBAzYTh8IYR761nCzTAG\r\nA3JEKpwm328IGVitnc2ca2KZ36I/0rcUNBKI3A56OMUryInwBEhlJ2rAEYAPEZf/\r\nZvyiez7iZ5nlzTCKzfDH94qaiRoY6F1npWYOXCgn29ycw2kU+NCHX+pG6sDfCmxr\r\n2FVcUREQ3U0wkaH5vnxqViehAd8x9jr1x2TTekbRbtcbZktO7ps0LMFeDGr2nx0p\r\n4nr2rc9qs0Rl4LaoeMO4Cr96joClsobewAu11/wWby/+1YcPLypa22ScBbz5BB9V\r\nPK6DCWKcGiR/rfK2pJI1OYxHfzDLMV44PvLU+KsdTwJTXUSUv3upIxn2i+VoHGA4\r\ne2dx4OdLxhAGwpNBDaV2/IHjUQypezErAaXrE3J0fT4Xrp+QaCy/CBvuNTrSjzyz\r\nytUGZQXgS85K5VSybexokXDxoZ/Nlx8SyK+wwrXv4XVGFa/CBw+VLRTnICq0j3qS\r\nvbTJw/EM585Z6kyqRfEUDArPPugVrEtVdfSbtXrxDxbOzuCYFn/yCcebgHF85MdB\r\nj0j84lVyH0yQb9xSFlyd4JInLJEZDhtufEBLMKxyMSYQnyWPqcjWh1waDXd5ZeFw\r\n1gCj79kTYBeXbJ01glGyr0V9EEWKDVhdr9TBvbbdmUNhyp8iLoa7G2TC8VAjY9JQ\r\nt8vklzswwHhoVomvW8bsyd9HZ2kfDMZ77wzqUaYO9X6blTlDw4mPdxPO0IhHM7JJ\r\np9shRidzBFA1xL1aSWPSpjYx0qiajKpK/uNKJnyrrbAkYTt+DpEAv5qB9nvAFbmJ\r\nn49CYsTxqyqVRiSElFPXN3Rf0qnLH4fXn4fl26jRRdHkZV96+f1AII+g3b+JIgZK\r\ngjyWcKRReL+mbgcgaw6xj5mdSvDnz9YCilRSPMaI8+rZDJCemS2VHSVhD8yM+3n0\r\n1BoBx322uKJPhlQ9Qjl38pHf4l2gOIepnzV9/juyAe+hGOrbUn/IRm8eB+4SWI9+\r\nDU6coVcdYP9PIljU7OPFrl7G6aBUNe2O464MfQKbINxhyCPvFbCL8ph50xpHjy1G\r\nk/IzrLByjfQqM9G2gngLwIz0Frwbgr3hS5Z/VvEUmdAXmKt6xwx28kNAij16lU1E\r\nVjsc76TbsbZXejkEH3b4ukXEd/BwSHFDMNNXp1n/s07rvESorhDzMD4wITAJBgUr\r\nDgMCGgUABBQ2jDd+DUe7kqihYR6vB53AVXPxQAQU3cqWrZq06vBkZs/IL2rnCJli\r\nO3MCAwGGoA==\r\n```\r\n\r\n**truststore.jks**\r\n```\r\nMIIEjgIBAzCCBEcGCSqGSIb3DQEHAaCCBDgEggQ0MIIEMDCCBCwGCSqGSIb3DQEH\r\nBqCCBB0wggQZAgEAMIIEEgYJKoZIhvcNAQcBMCkGCiqGSIb3DQEMAQYwGwQUCQPL\r\nV1YP9wunGMWFyv1BwcRTIAACAwDDUICCA9jrocMHqNhm8aHENyLPmEi8qSuSPdut\r\n++OBZvYRI5Bb2fFwye3dsoo9xEcSpDTcjp3cCiPPnGzcaWyvOvyTFtGr7AuUISte\r\nqI2bfHd+bR1e7KhC4a8xZDhpsn7TmYTOHGhHJi7W4Yaw6UbgYhzfE++KpqNMfWBk\r\nt4/4V2n3BNzShtxXDBw9CmT1Fdcv1lJ1j5YWKdgD0/p59ccEZHtiUvY6QOROBfjq\r\noI6kkMzW/mDJqQDKowLsW2O/UbPaRC1B8Ew0NSlHWhxaU347UFsotW8iKuXVnei0\r\ngPiPfBFSuZ24MFaz6XENgEZcnNCJBeeK/MGma8i1rOADKbEaErzvlwBNm8BWtlC3\r\nIx4akym2XSy3pqFJrP+1cJJONwsI766IL72PUyXTBRtKEaqSd6jZZGkiyTPsiiK6\r\nG3apckGnKpgJLyR6hrUd2SC8bwf92waRne9VihA0O4CovO9G0ab6ud02bEISVQAt\r\n/n+lnU6FmjK3tGy1P/Kpx1vomkmZkdWqE56dvAQv5DRV7EZQ9TJU8FoAyP4E5RWD\r\n1AQi7uDA233e1Wv4rYzWhwm/0XeFsdKw/N3rjmeNilgG4/KwSFFkl53fNECDDEmS\r\nczcEkA99JU6nJBCuFF8kn0yVXTh+8ezgdSiT8LIUtqbldzKR8uMXFlzCMOCdJc21\r\ncBC7DX9LA+Dz/pkcEj1smtDDSv+zM+DbEA4iJZBlF68xqiZzhrWcmbdtSKN5iUN/\r\nkkLELUUjO76OIdxXILW2GHLHSe01fbqpHeY9NC732WmF329+ucODzCq9BjxARpAm\r\nbCEX8tbcOrCqm3947JuSbgW6CxzDd2gzmYoE6d4LSfWLRgQ4SdLpgieVhfbsunBk\r\nlnvCrnsa/VAQnEMZEzWCgvRAcuRs6bPvUXXFPwrz8OvQoPmdDRA4uWYfhEZZJjq4\r\nuRGQRt+Bf4v5H1e2yzxSfRKlecJlhpVMyZtNsWTaNgZFX+c1SfzXXZGGMgLBEh9t\r\nwLFdDWA848eXP97te7boqusR/UTXd6hLDmU5bb5NmjzY92aEK3LfIeLhFlKjWQKF\r\nFooNxvKA/jyqUt/LxffAxK4co8ivyLzOMdHsPsqTjpkqjro5RgnYJTJWhBLMois5\r\nsJej6EphOUzBMeEwgdlEs3pbT3/yp8QrhYKUG2HjkUVE2GKVwWNcjRfguGGK8MYC\r\nB3ztnwPeAblpaPi4aQY55maYGXR3SPTAX2MVGScBfL8GhDZGr/yf7441wi6YntOH\r\nCYts3VW/0zHAXNTaycdUTSMg9f7O312aYrk59Hd5Yfiw1StzMtdJMnMxlOdgTP33\r\nw+wwPjAhMAkGBSsOAwIaBQAEFDdfecmJ7H2HFI93DLhyZ4r8Mx2iBBT/uNLzzuIO\r\nSZI0e5jSFcFmOoYSvwIDAYag\r\n```\r\n\r\nThese two base64 encoded strings can be tranformed into binary files with the snippet bellow. Please make sure to replace the empty content with the above base64 encoded strings.\r\n\r\n```java\r\nimport java.io.IOException;\r\nimport java.nio.file.Files;\r\nimport java.nio.file.Path;\r\nimport java.nio.file.Paths;\r\nimport java.nio.file.StandardOpenOption;\r\nimport java.util.Base64;\r\n\r\npublic class Base64DecoderUtils {\r\n\r\n    public static void main(String[] args) throws IOException {\r\n        String identityContentAsBase64Encoded = &quot;&quot;;\r\n        String trustStoreContentAsBase64Encoded = &quot;&quot;;\r\n        \r\n        Path identityPath = Paths.get(&quot;/path/to/identity.jks&quot;);\r\n        Path trustStorePath = Paths.get(&quot;/path/to/truststore.jks&quot;);\r\n        \r\n        byte[] decoded = Base64.getDecoder().decode(String.join(&quot;&quot;, identityContentAsBase64Encoded.split(System.lineSeparator())));\r\n        Files.write(identityPath, decoded, StandardOpenOption.CREATE);\r\n\r\n        decoded = Base64.getDecoder().decode(String.join(&quot;&quot;, trustStoreContentAsBase64Encoded.split(System.lineSeparator())));\r\n        Files.write(trustStorePath, decoded, StandardOpenOption.CREATE);\r\n    }\r\n}\r\n```\r\n\r\nThe password of these to files are: **secret**\r\n\r\nmy application property file is:\r\n```yml\r\nserver:\r\n  port: 8443\r\n\r\nssl:\r\n  client-auth: true\r\n  keystore-path: identity.jks\r\n  keystore-password: secret\r\n  truststore-path: truststore.jks\r\n  truststore-password: secret\r\n```\r\n\r\nI am using the following dependencies:\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;io.github.hakky54&lt;/groupId&gt;\r\n    &lt;artifactId&gt;sslcontext-kickstart&lt;/artifactId&gt;\r\n    &lt;version&gt;8.1.7&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot&lt;/artifactId&gt;\r\n    &lt;version&gt;2.7.5&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    &lt;version&gt;2.7.5&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\n# Update 2023-10-23\r\n\r\nThe supplied configuration such as keymanager or sslcontext is being ignored. It seems like it was never the intention of the developers/maintainers to allow such custom configuration. I opened a pull request here to enable it in tomcat: https://github.com/apache/tomcat/pull/673\r\n\r\nHowever I don&#39;t know whether the maintainers will allow that kind of option to configure the server with a custom sslcontext.\r\n\r\n\r\n  [1]: https://github.com/Hakky54/sslcontext-kickstart","title":"Configuring SSL programatically of a Spring Boot server with Tomcat is failing","body":"<p>I am trying to configure the ssl configuration of a spring boot with a tomcat embedded server. Spring Boot is by default provided with a tomcat. SSL can be configured with the application properties such as keystore path, truststore path etc. I don't want to configure it with properties, so I just want to configure it programatically. I have developed my <a href=\"https://github.com/Hakky54/sslcontext-kickstart\" rel=\"nofollow noreferrer\">own ssl library</a> which I want to use as it has couple of additional feature which I need use. In the past I attempted to configure it but failed, so I switch to either using spring boot with jetty or netty to configure my server ssl programatically. However it was still in my mind to give it another try. Today I am still failing to configure it programatically, maybe someone can help me out.</p>\n<p>My stacktrace is:</p>\n<pre><code>Caused by: org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat server\n    at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.start(TomcatWebServer.java:229)\n    at org.springframework.boot.web.servlet.context.WebServerStartStopLifecycle.start(WebServerStartStopLifecycle.java:43)\n    at org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:178)\n    ... 14 more\nCaused by: java.lang.IllegalArgumentException: standardService.connector.startFailed\n    at org.apache.catalina.core.StandardService.addConnector(StandardService.java:238)\n    at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.addPreviouslyRemovedConnectors(TomcatWebServer.java:282)\n    at org.springframework.boot.web.embedded.tomcat.TomcatWebServer.start(TomcatWebServer.java:213)\n    ... 16 more\nCaused by: org.apache.catalina.LifecycleException: Protocol handler start failed\n    at org.apache.catalina.connector.Connector.startInternal(Connector.java:1077)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.StandardService.addConnector(StandardService.java:234)\n    ... 18 more\nCaused by: java.lang.IllegalArgumentException: SSLHostConfig attribute certificateFile must be defined when using an SSL connector\n    at org.apache.tomcat.util.net.AbstractJsseEndpoint.createSSLContext(AbstractJsseEndpoint.java:107)\n    at org.apache.tomcat.util.net.AbstractJsseEndpoint.initialiseSsl(AbstractJsseEndpoint.java:71)\n    at org.apache.tomcat.util.net.NioEndpoint.bind(NioEndpoint.java:235)\n    at org.apache.tomcat.util.net.AbstractEndpoint.bindWithCleanup(AbstractEndpoint.java:1227)\n    at org.apache.tomcat.util.net.AbstractEndpoint.start(AbstractEndpoint.java:1313)\n    at org.apache.coyote.AbstractProtocol.start(AbstractProtocol.java:617)\n    at org.apache.catalina.connector.Connector.startInternal(Connector.java:1074)\n    ... 20 more\nCaused by: java.io.IOException: SSLHostConfig attribute certificateFile must be defined when using an SSL connector\n    at org.apache.tomcat.util.net.SSLUtilBase.getKeyManagers(SSLUtilBase.java:312)\n    at org.apache.tomcat.util.net.SSLUtilBase.createSSLContext(SSLUtilBase.java:247)\n    at org.apache.tomcat.util.net.AbstractJsseEndpoint.createSSLContext(AbstractJsseEndpoint.java:105)\n    ... 26 more\n</code></pre>\n<p>My code looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory;\nimport org.springframework.boot.web.servlet.server.ServletWebServerFactory;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\npublic class ServerConfig {\n\n    @Bean\n    public ServletWebServerFactory servletContainer(SSLConnectorCustomizer sslConnectorCustomizer) {\n        TomcatServletWebServerFactory tomcat = new TomcatServletWebServerFactory();\n        tomcat.addConnectorCustomizers(sslConnectorCustomizer);\n        return tomcat;\n    }\n\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>import nl.altindag.ssl.SSLFactory;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\npublic class SSLConfig {\n\n    @Bean\n    public SSLFactory sslFactory(@Value(&quot;${ssl.keystore-path}&quot;) String keyStorePath,\n                                 @Value(&quot;${ssl.keystore-password}&quot;) char[] keyStorePassword,\n                                 @Value(&quot;${ssl.truststore-path}&quot;) String trustStorePath,\n                                 @Value(&quot;${ssl.truststore-password}&quot;) char[] trustStorePassword,\n                                 @Value(&quot;${ssl.client-auth}&quot;) boolean isClientAuthenticationRequired) {\n\n        return SSLFactory.builder()\n                .withSwappableIdentityMaterial()\n                .withSwappableTrustMaterial()\n                .withIdentityMaterial(keyStorePath, keyStorePassword)\n                .withTrustMaterial(trustStorePath, trustStorePassword)\n                .withDefaultTrustMaterial()\n                .withSystemTrustMaterial()\n                .withNeedClientAuthentication(isClientAuthenticationRequired)\n                .build();\n    }\n\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>import nl.altindag.ssl.SSLFactory;\nimport nl.altindag.ssl.util.KeyStoreUtils;\nimport org.apache.catalina.connector.Connector;\nimport org.apache.coyote.http11.AbstractHttp11Protocol;\nimport org.apache.tomcat.util.net.SSLHostConfig;\nimport org.apache.tomcat.util.net.SSLHostConfigCertificate;\nimport org.apache.tomcat.util.net.SSLHostConfigCertificate.Type;\nimport org.springframework.boot.web.embedded.tomcat.TomcatConnectorCustomizer;\nimport org.springframework.context.annotation.Configuration;\n\nimport javax.net.ssl.SSLParameters;\nimport javax.net.ssl.X509TrustManager;\nimport java.security.KeyStore;\n\n@Configuration\npublic class SSLConnectorCustomizer implements TomcatConnectorCustomizer {\n\n    private final SSLFactory sslFactory;\n\n    public SSLConnectorCustomizer(SSLFactory sslFactory) {\n        this.sslFactory = sslFactory;\n    }\n\n    @Override\n    public void customize(Connector connector) {\n        connector.setScheme(&quot;https&quot;);\n        connector.setSecure(true);\n        connector.setPort(8444);\n\n        AbstractHttp11Protocol&lt;?&gt; protocol = (AbstractHttp11Protocol&lt;?&gt;) connector.getProtocolHandler();\n        configureSsl(protocol);\n    }\n\n    private void configureSsl(AbstractHttp11Protocol&lt;?&gt; protocol) {\n        protocol.setSSLEnabled(true);\n\n        SSLHostConfig sslHostConfig = new SSLHostConfig();\n        sslHostConfig.setSslProtocol(&quot;TLS&quot;);\n        sslHostConfig.setHostName(protocol.getDefaultSSLHostConfigName());\n\n        configureSslClientAuth(sslHostConfig);\n\n        KeyStore trustStore = sslFactory.getTrustManager()\n                .map(X509TrustManager::getAcceptedIssuers)\n                .map(KeyStoreUtils::createTrustStore)\n                .orElseThrow();\n        sslHostConfig.setTrustStore(trustStore);\n\n        SSLHostConfigCertificate certificate = new SSLHostConfigCertificate(sslHostConfig, Type.UNDEFINED);\n        certificate.setSslContext(new SSLContextWrapper(sslFactory));\n        sslFactory.getKeyManager().ifPresent(certificate::setCertificateKeyManager);\n        sslHostConfig.addCertificate(certificate);\n\n        String ciphers = String.join(&quot;,&quot;, sslFactory.getCiphers());\n        sslHostConfig.setCiphers(ciphers);\n\n        String protocols = String.join(&quot;,&quot;, sslFactory.getProtocols());\n        sslHostConfig.setProtocols(protocols);\n\n        protocol.addSslHostConfig(sslHostConfig);\n    }\n\n    private void configureSslClientAuth(SSLHostConfig config) {\n        String clientAuth;\n        SSLParameters sslParameters = sslFactory.getSslParameters();\n        if (sslParameters.getNeedClientAuth()) {\n            clientAuth = &quot;required&quot;;\n        } else if (sslParameters.getWantClientAuth()) {\n            clientAuth = &quot;optional&quot;;\n        } else {\n            clientAuth = &quot;none&quot;;\n        }\n\n        config.setCertificateVerification(clientAuth);\n    }\n\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>import nl.altindag.ssl.SSLFactory;\nimport org.apache.tomcat.util.net.SSLContext;\n\nimport javax.net.ssl.KeyManager;\nimport javax.net.ssl.SSLEngine;\nimport javax.net.ssl.SSLParameters;\nimport javax.net.ssl.SSLServerSocketFactory;\nimport javax.net.ssl.SSLSessionContext;\nimport javax.net.ssl.TrustManager;\nimport java.security.SecureRandom;\nimport java.security.cert.X509Certificate;\n\npublic final class SSLContextWrapper implements SSLContext {\n\n    private final SSLFactory sslFactory;\n\n    public SSLContextWrapper(SSLFactory sslFactory) {\n        this.sslFactory = sslFactory;\n    }\n\n\n    @Override\n    public void init(KeyManager[] kms, TrustManager[] tms, SecureRandom sr) {\n        // not needed to initialize as it is already initialized\n    }\n\n    @Override\n    public void destroy() {\n\n    }\n\n    @Override\n    public SSLSessionContext getServerSessionContext() {\n        return sslFactory.getSslContext().getServerSessionContext();\n    }\n\n    @Override\n    public SSLEngine createSSLEngine() {\n        return sslFactory.getSSLEngine();\n    }\n\n    @Override\n    public SSLServerSocketFactory getServerSocketFactory() {\n        return sslFactory.getSslServerSocketFactory();\n    }\n\n    @Override\n    public SSLParameters getSupportedSSLParameters() {\n        return sslFactory.getSslParameters();\n    }\n\n    @Override\n    public X509Certificate[] getCertificateChain(String alias) {\n        return sslFactory.getKeyManager()\n                .map(keyManager -&gt; keyManager.getCertificateChain(&quot;server&quot;))\n                .orElseThrow();\n    }\n\n    @Override\n    public X509Certificate[] getAcceptedIssuers() {\n        return sslFactory.getTrustedCertificates().toArray(new X509Certificate[0]);\n    }\n\n}\n</code></pre>\n<p>I am not able to share the keystores as a file here, so I converted them to a base64 encoded string. So if you want to give it a try on your side you can decode and create the binary file out of it.</p>\n<p><strong>identity.jks</strong></p>\n<pre><code>MIIOcwIBAzCCDiwGCSqGSIb3DQEHAaCCDh0Egg4ZMIIOFTCCBWEGCSqGSIb3DQEH\nAaCCBVIEggVOMIIFSjCCBUYGCyqGSIb3DQEMCgECoIIE8zCCBO8wKQYKKoZIhvcN\nAQwBAzAbBBTU8ZeqKOoF7Pmc7PrK1Q9hRT8FRAIDAMNQBIIEwEI/jcEKkEnevxHl\nqODLeIHtT72gr+S34JT99nUeSOyqdWko7mN7ilZQ84scJmdvQoaJYHnjG7hLPxpi\nghEYFwMyA5ZRcpdqKoRnCyI1SBzeNI1xho5pxpjukivLdXLBxmPrykNpawtkBNgN\n6oamN7wI437IsnunvtBMrjohQZlvf0/5X4DBaBlxXB3T+ZjpQcqdGfA7LTNsdlHt\nF2/pzolJYc8BFBBEGMFNBb3NPQ91tBANPvDMIaaEEbY5G7zJX+BAKqnN3DmUrfEa\nUNyjYdCd8apDfHV6SezuKle5nDz4KGpnsTfwANSDGLiy9SKo4Tv+E1nUMtA24yb4\n54L0CfCnoTTtNaqGRJ0KM6a3xH92ImjD6KaOHlMjwUrlOcT6HOzQk5Mknvjv8B/B\n1rixVlC69ctySSMH3eZG6vdcV267ZR3L1wHZSCtuXbCHgylbvGY1N/5JCWbY7poT\neQ45SSsDxz1tgy4Hv6lrjrQ+c1+fm7aCYmFEH3iT/xpX0BdD+eqQ8enzbPOuYvL7\n1HsQo8f1XIzt6QHnGqvZ3QUKJ+fJLqr7DiHwVW1wt3S3Dea7SCyy+UmM5bo/RlUG\ncldEc6mkTCAxrl3BMM8H0ShMg3WyNkaF/CnZJhUAHC/DYzyax0UVJk8/Q/i9qjnY\nbhO2E0fCe97T48wPVswMG4LuE0IHKbHr6nBaX4hhZcf3CBjtJvKdfFvGwtswylqY\npFm8JWZiEqNmZN6nRP7EY8xkmnRIp6LN4ve0i3vkBolN35G58kjwXjSKFirlGuJV\nAz6k+r0EjqQrHsj6oteVT7tAI6BzxodnY5mooMrAtnttYS7vl3MIXkpYBzwe0KFM\n2NWXwLug5QvQ0uAEdX9aPR/ly7SP5XzQpQKdiixvAQRZ2Zxtfo32wGqVQawbKEKE\npfVsQK9agx7ofGbUiztVXYem9jVq/gvzAro1XFH94Pt+Lg1iVmi2LZt6mljHH/eC\namMzqG7td3G1hKU3sKYUaIVgbyJw+LSlXbrcbV5vsLepOFV+lH9SxoXJzzdxYrAs\ncw033weLwLTkQUPgSjYy0XTKIZqIRZM5oKDT6wEzN1QqvQJe59O6N3fl1bH9uZuj\nYF1iuxLKtdb/aawhtckp3iREpqTYbIZQEM4cDrPyElkbBUw34kj/TYnRE0ooorDI\nL5yP3WTaawLlsLFPlwnIqS4bjQCkfb8PPBVJSmk+v2K16rSlxnu2zjINe1gVbeLl\ngsuKL1IWC7yBdbE0sqVVgi9TiSzZglNMQIaLuA+wmY8U7jHz697NTeWL/XUnf5+T\nrMmYjQo0GWLDJq1mOmaSUxKo0kx20go0dMfONIiRaKlfFvxpIF9aLhfSGSFWMs3g\niwd+9Jzencx/gtm8Rb9U1oDMEyc6GwU5JHiwmDLQ5e1P6jsZPTLGdiUSQd6tdU+u\nPs+0nCVwawaH9O1grDwHRKQcw7Dy+LKCjy3PSzbEPValY7MmjJmLA/jSQ0kUAr9j\nB+XVG0QyqBSluBUmlOafhdnRh8nkldIiTZiWdfUMTPg2hJGdFqlZA+kMI6O9V4aW\nyw/jlHR8U076MC1vdrSf+ysQK/GF0ipcvndH1Ci3o/3qgUNGYiJyoh2jH5FAnsJl\nYeoBlcwxQDAbBgkqhkiG9w0BCRQxDh4MAHMAZQByAHYAZQByMCEGCSqGSIb3DQEJ\nFTEUBBJUaW1lIDE2MjAwOTg5NDEwNDIwggisBgkqhkiG9w0BBwagggidMIIImQIB\nADCCCJIGCSqGSIb3DQEHATApBgoqhkiG9w0BDAEGMBsEFF7A5A+E84WmDPd2Cys2\nPDdJB5ZGAgMAw1CAgghYNQ5VqiEWhLWXChJB10sg9tTGj69Yw0jU1bBJKaK10xOv\napPElDnkb13sDk+Wt15VcF6i9uvvmEXjakfsWCT4VmR0coiNLCtqBCmIXTlSzKcN\nYiTAWt//LMVyXQvsPyxai7/TFrHnUjYPlMYTEjZZsRtSiaAGKSeS0zY0vw8/fkvE\nFuuz3k95NsuWCuxBMsSBzTAFhxmcjggShG9RBSzW0zjf4tyGULEi8vs7qXF4Ky42\nVUDiiQ25WP135+BM04eNGHREQMWzKBcl5udJCheHxOevZRBB9M74d/d2PYT3QnnG\nFodcHz20lX2L7c7KpE1CvfA1PND3EFVh+6X4ZOB3fJMIriSnzogDPYB34BIvSLcG\njUx2CmdnM2FTrWLb1Tx77Dp0R6lONaHmJmruJWesVwGdZHVRTdszggw802vDySxD\n5H16ONWXmag2w94KAogWN/ijFYFloKS55cNhWCYZ5fLrmQIilDq13DujcENce8dk\n81x86/b/gEW98bhxAZLA59niQWRULJjESLvRTF7I8dgKnE2Hinnjc/hLctNfLgIV\nEq0xw2Y7QpVtX+Vown66fLADD9bxWPQUHHZmlnIejCW1wibzEsCBtYlFSmX7MqYH\nr5gtx8fLveqCasGuPHCZQ9sJNrhKQG+RbOKZqAP9wexvks3U1YwApYhcSEAmQDEs\n/efxoPFBFsrRHhmoTLpWzMzptSw8/AJ1V1BFZZ2QIh4l2a97Bz7ho00QGD9BYL0C\n1qtvM1RnVJUYtIR2l7Rj0lH9s7DfH4ha5dE/Vxx+PeRO0NBy7hC3wgFKp4tpQAgi\ntYaKCjGlCA+FK7avWdIfB6NZjSuTSyv6JitkjVPY00Fh05OpB/r0OGX1FXYEWmxs\nusUD4WGk0zTAUaex5Ji4qpW9g7xWo/8phkoiAxdLmrAam4pJHS8ihy7VSr0HHT88\nyo0t/AclEgwgX/ZzW9ewvLJ5na7wbH+ES6cWYK/8GTS9KYVK5QztL7FHEbptQoNT\n0w9MEqcFHgFqZdYxkzGvVY+/3pd3B5PxfX3c+ncLfDrLRhgPJE8wvlX3PSzsJ9kp\nENGgWRJhp7t6GGcrJzLcoHD8uRF3T1MRpIkH9+a7P1WMF2TWXbz0b5TfgERQte49\nY+MLg0evEj2pMUA323NCjc3EkraVJkMeGcwIWOJUIeT91nKRQ8YjV6DOQV9ChYIB\nNkkqmKaL5vNP+kRVo/JeLsFEpi3x/GkahGWB5qN5FUdsAbRRMT0ZmD+LujSvczlZ\nftyf40h9umSSlmlvuF+SH2j18Wd0/1Ky+dITFEM7OK2tiNVNdWOXXgU0skO3wkjt\nfhV41y4R+usENPX2lPxqO/VDRPAvvsCOY3/Ugwsg8Fkedx1A7JhPzcJ4HrYDfI3z\ncNDt5x0oPsDIYwJTOnrj/WXdUaVA56447ajBpRnkS8dSswWQmrRUBbw6V1h4V6Gz\n/m4MPklkFSM7Yv8+10/8IyC4vFR4YCCyGD3/BB3JsRtw5woWwGMuwhZp/PD32bHk\nfZC8OWBNLbYT1UTXyNLaZjzpk/aUrrXP5vzDUR5DxhBtNalce2vY45RHinf9Urcp\n2TVV7rHQRlFjfF4TPv3+iq8m1u7QWfVBsmKKWSpQsu9qcJAvsWmnQ+ry9dW+fqJY\nXC9bwAijaZgJcUbGjtTRXyaZaoxXNL0ZO7QOkhX901a1WBAzYTh8IYR761nCzTAG\nA3JEKpwm328IGVitnc2ca2KZ36I/0rcUNBKI3A56OMUryInwBEhlJ2rAEYAPEZf/\nZvyiez7iZ5nlzTCKzfDH94qaiRoY6F1npWYOXCgn29ycw2kU+NCHX+pG6sDfCmxr\n2FVcUREQ3U0wkaH5vnxqViehAd8x9jr1x2TTekbRbtcbZktO7ps0LMFeDGr2nx0p\n4nr2rc9qs0Rl4LaoeMO4Cr96joClsobewAu11/wWby/+1YcPLypa22ScBbz5BB9V\nPK6DCWKcGiR/rfK2pJI1OYxHfzDLMV44PvLU+KsdTwJTXUSUv3upIxn2i+VoHGA4\ne2dx4OdLxhAGwpNBDaV2/IHjUQypezErAaXrE3J0fT4Xrp+QaCy/CBvuNTrSjzyz\nytUGZQXgS85K5VSybexokXDxoZ/Nlx8SyK+wwrXv4XVGFa/CBw+VLRTnICq0j3qS\nvbTJw/EM585Z6kyqRfEUDArPPugVrEtVdfSbtXrxDxbOzuCYFn/yCcebgHF85MdB\nj0j84lVyH0yQb9xSFlyd4JInLJEZDhtufEBLMKxyMSYQnyWPqcjWh1waDXd5ZeFw\n1gCj79kTYBeXbJ01glGyr0V9EEWKDVhdr9TBvbbdmUNhyp8iLoa7G2TC8VAjY9JQ\nt8vklzswwHhoVomvW8bsyd9HZ2kfDMZ77wzqUaYO9X6blTlDw4mPdxPO0IhHM7JJ\np9shRidzBFA1xL1aSWPSpjYx0qiajKpK/uNKJnyrrbAkYTt+DpEAv5qB9nvAFbmJ\nn49CYsTxqyqVRiSElFPXN3Rf0qnLH4fXn4fl26jRRdHkZV96+f1AII+g3b+JIgZK\ngjyWcKRReL+mbgcgaw6xj5mdSvDnz9YCilRSPMaI8+rZDJCemS2VHSVhD8yM+3n0\n1BoBx322uKJPhlQ9Qjl38pHf4l2gOIepnzV9/juyAe+hGOrbUn/IRm8eB+4SWI9+\nDU6coVcdYP9PIljU7OPFrl7G6aBUNe2O464MfQKbINxhyCPvFbCL8ph50xpHjy1G\nk/IzrLByjfQqM9G2gngLwIz0Frwbgr3hS5Z/VvEUmdAXmKt6xwx28kNAij16lU1E\nVjsc76TbsbZXejkEH3b4ukXEd/BwSHFDMNNXp1n/s07rvESorhDzMD4wITAJBgUr\nDgMCGgUABBQ2jDd+DUe7kqihYR6vB53AVXPxQAQU3cqWrZq06vBkZs/IL2rnCJli\nO3MCAwGGoA==\n</code></pre>\n<p><strong>truststore.jks</strong></p>\n<pre><code>MIIEjgIBAzCCBEcGCSqGSIb3DQEHAaCCBDgEggQ0MIIEMDCCBCwGCSqGSIb3DQEH\nBqCCBB0wggQZAgEAMIIEEgYJKoZIhvcNAQcBMCkGCiqGSIb3DQEMAQYwGwQUCQPL\nV1YP9wunGMWFyv1BwcRTIAACAwDDUICCA9jrocMHqNhm8aHENyLPmEi8qSuSPdut\n++OBZvYRI5Bb2fFwye3dsoo9xEcSpDTcjp3cCiPPnGzcaWyvOvyTFtGr7AuUISte\nqI2bfHd+bR1e7KhC4a8xZDhpsn7TmYTOHGhHJi7W4Yaw6UbgYhzfE++KpqNMfWBk\nt4/4V2n3BNzShtxXDBw9CmT1Fdcv1lJ1j5YWKdgD0/p59ccEZHtiUvY6QOROBfjq\noI6kkMzW/mDJqQDKowLsW2O/UbPaRC1B8Ew0NSlHWhxaU347UFsotW8iKuXVnei0\ngPiPfBFSuZ24MFaz6XENgEZcnNCJBeeK/MGma8i1rOADKbEaErzvlwBNm8BWtlC3\nIx4akym2XSy3pqFJrP+1cJJONwsI766IL72PUyXTBRtKEaqSd6jZZGkiyTPsiiK6\nG3apckGnKpgJLyR6hrUd2SC8bwf92waRne9VihA0O4CovO9G0ab6ud02bEISVQAt\n/n+lnU6FmjK3tGy1P/Kpx1vomkmZkdWqE56dvAQv5DRV7EZQ9TJU8FoAyP4E5RWD\n1AQi7uDA233e1Wv4rYzWhwm/0XeFsdKw/N3rjmeNilgG4/KwSFFkl53fNECDDEmS\nczcEkA99JU6nJBCuFF8kn0yVXTh+8ezgdSiT8LIUtqbldzKR8uMXFlzCMOCdJc21\ncBC7DX9LA+Dz/pkcEj1smtDDSv+zM+DbEA4iJZBlF68xqiZzhrWcmbdtSKN5iUN/\nkkLELUUjO76OIdxXILW2GHLHSe01fbqpHeY9NC732WmF329+ucODzCq9BjxARpAm\nbCEX8tbcOrCqm3947JuSbgW6CxzDd2gzmYoE6d4LSfWLRgQ4SdLpgieVhfbsunBk\nlnvCrnsa/VAQnEMZEzWCgvRAcuRs6bPvUXXFPwrz8OvQoPmdDRA4uWYfhEZZJjq4\nuRGQRt+Bf4v5H1e2yzxSfRKlecJlhpVMyZtNsWTaNgZFX+c1SfzXXZGGMgLBEh9t\nwLFdDWA848eXP97te7boqusR/UTXd6hLDmU5bb5NmjzY92aEK3LfIeLhFlKjWQKF\nFooNxvKA/jyqUt/LxffAxK4co8ivyLzOMdHsPsqTjpkqjro5RgnYJTJWhBLMois5\nsJej6EphOUzBMeEwgdlEs3pbT3/yp8QrhYKUG2HjkUVE2GKVwWNcjRfguGGK8MYC\nB3ztnwPeAblpaPi4aQY55maYGXR3SPTAX2MVGScBfL8GhDZGr/yf7441wi6YntOH\nCYts3VW/0zHAXNTaycdUTSMg9f7O312aYrk59Hd5Yfiw1StzMtdJMnMxlOdgTP33\nw+wwPjAhMAkGBSsOAwIaBQAEFDdfecmJ7H2HFI93DLhyZ4r8Mx2iBBT/uNLzzuIO\nSZI0e5jSFcFmOoYSvwIDAYag\n</code></pre>\n<p>These two base64 encoded strings can be tranformed into binary files with the snippet bellow. Please make sure to replace the empty content with the above base64 encoded strings.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.IOException;\nimport java.nio.file.Files;\nimport java.nio.file.Path;\nimport java.nio.file.Paths;\nimport java.nio.file.StandardOpenOption;\nimport java.util.Base64;\n\npublic class Base64DecoderUtils {\n\n    public static void main(String[] args) throws IOException {\n        String identityContentAsBase64Encoded = &quot;&quot;;\n        String trustStoreContentAsBase64Encoded = &quot;&quot;;\n        \n        Path identityPath = Paths.get(&quot;/path/to/identity.jks&quot;);\n        Path trustStorePath = Paths.get(&quot;/path/to/truststore.jks&quot;);\n        \n        byte[] decoded = Base64.getDecoder().decode(String.join(&quot;&quot;, identityContentAsBase64Encoded.split(System.lineSeparator())));\n        Files.write(identityPath, decoded, StandardOpenOption.CREATE);\n\n        decoded = Base64.getDecoder().decode(String.join(&quot;&quot;, trustStoreContentAsBase64Encoded.split(System.lineSeparator())));\n        Files.write(trustStorePath, decoded, StandardOpenOption.CREATE);\n    }\n}\n</code></pre>\n<p>The password of these to files are: <strong>secret</strong></p>\n<p>my application property file is:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>server:\n  port: 8443\n\nssl:\n  client-auth: true\n  keystore-path: identity.jks\n  keystore-password: secret\n  truststore-path: truststore.jks\n  truststore-password: secret\n</code></pre>\n<p>I am using the following dependencies:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;io.github.hakky54&lt;/groupId&gt;\n    &lt;artifactId&gt;sslcontext-kickstart&lt;/artifactId&gt;\n    &lt;version&gt;8.1.7&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot&lt;/artifactId&gt;\n    &lt;version&gt;2.7.5&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;version&gt;2.7.5&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<h1>Update 2023-10-23</h1>\n<p>The supplied configuration such as keymanager or sslcontext is being ignored. It seems like it was never the intention of the developers/maintainers to allow such custom configuration. I opened a pull request here to enable it in tomcat: <a href=\"https://github.com/apache/tomcat/pull/673\" rel=\"nofollow noreferrer\">https://github.com/apache/tomcat/pull/673</a></p>\n<p>However I don't know whether the maintainers will allow that kind of option to configure the server with a custom sslcontext.</p>\n"},{"tags":["java","logging","spring-cloud-feign","feign"],"comments":[{"owner":{"account_id":454686,"reputation":1461,"user_id":852412,"display_name":"Sigrist"},"score":0,"creation_date":1492716260,"post_id":42751269,"comment_id":74109442,"body_markdown":"Do you have any configuration file for the SLF4J that may be ignoring the logs for the MyClient class?","body":"Do you have any configuration file for the SLF4J that may be ignoring the logs for the MyClient class?"},{"owner":{"account_id":1211515,"reputation":949,"user_id":1179948,"accept_rate":100,"display_name":"Igor Bljahhin"},"score":1,"creation_date":1498466917,"post_id":42751269,"comment_id":76492691,"body_markdown":"In my Spring Boot app Feign&#39;s logging is configured in application.yml as ```logging.level.com.mycompany.admintool.external.persons.resource.CustomerResource: DEBUG```","body":"In my Spring Boot app Feign&#39;s logging is configured in application.yml as <code>logging.level.com.mycompany.admintool.external.persons.resou&zwnj;&#8203;rce.CustomerResource&zwnj;&#8203;: DEBUG</code>"},{"owner":{"account_id":4373010,"reputation":801,"user_id":3566757,"display_name":"Ali M"},"score":0,"creation_date":1517609660,"post_id":42751269,"comment_id":84180457,"body_markdown":"I&#39;m having the same problem here. did you find any solution?","body":"I&#39;m having the same problem here. did you find any solution?"}],"answers":[{"tags":[],"owner":{"account_id":3527180,"reputation":587,"user_id":2947937,"display_name":"Stimp"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1525122741,"creation_date":1525122741,"answer_id":50108265,"question_id":42751269,"body_markdown":"You may also need to configure your log4j logging level for `feign` to DEBUG.  If you are using spring boot, what worked for me is:\r\n\r\n    curl -X POST http://localhost/loggers/feign -H &#39;Content-Type: application/json&#39; -d &#39;{&quot;configuredLevel&quot;: &quot;DEBUG&quot;}&#39;","title":"Feign logging not working when alter level","body":"<p>You may also need to configure your log4j logging level for <code>feign</code> to DEBUG.  If you are using spring boot, what worked for me is:</p>\n\n<pre><code>curl -X POST http://localhost/loggers/feign -H 'Content-Type: application/json' -d '{\"configuredLevel\": \"DEBUG\"}'\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2343711,"reputation":1519,"user_id":2054487,"accept_rate":62,"display_name":"Maverick"},"down_vote_count":0,"up_vote_count":35,"is_accepted":false,"score":35,"last_activity_date":1528983761,"creation_date":1528983761,"answer_id":50858978,"question_id":42751269,"body_markdown":"You need to configure logging in application.properties as below:\r\n\r\n    logging.level.&lt;package path&gt;.MyClient=DEBUG\r\n\r\nIf you&#39;re using application.yml then:\r\n\r\n    logging.level.&lt;package path&gt;.MyClient: DEBUG\r\n\r\nThe log level can be set to tell Feign how much to log. \r\n\r\nOptions are:\r\n\r\n - NONE, No logging (DEFAULT)\r\n - BASIC, Log only the request method and URL and the response status code and execution time\r\n - HEADERS, Log the basic information along with request and response headers\r\n - FULL, Log the headers, body, and metadata for both requests and responses\r\n\r\nExample:\r\n\r\n    logLevel(feign.Logger.Level.NONE)\r\n    or\r\n    logLevel(feign.Logger.Level.BASIC)\r\n    or\r\n    logLevel(feign.Logger.Level.HEADERS)\r\n    or\r\n    logLevel(feign.Logger.Level.FULL)\r\n\r\n\r\nFor more details, you can refer [this][1]\r\n\r\n\r\n  [1]: http://projects.spring.io/spring-cloud/spring-cloud.html#_feign_logging","title":"Feign logging not working when alter level","body":"<p>You need to configure logging in application.properties as below:</p>\n\n<pre><code>logging.level.&lt;package path&gt;.MyClient=DEBUG\n</code></pre>\n\n<p>If you're using application.yml then:</p>\n\n<pre><code>logging.level.&lt;package path&gt;.MyClient: DEBUG\n</code></pre>\n\n<p>The log level can be set to tell Feign how much to log. </p>\n\n<p>Options are:</p>\n\n<ul>\n<li>NONE, No logging (DEFAULT)</li>\n<li>BASIC, Log only the request method and URL and the response status code and execution time</li>\n<li>HEADERS, Log the basic information along with request and response headers</li>\n<li>FULL, Log the headers, body, and metadata for both requests and responses</li>\n</ul>\n\n<p>Example:</p>\n\n<pre><code>logLevel(feign.Logger.Level.NONE)\nor\nlogLevel(feign.Logger.Level.BASIC)\nor\nlogLevel(feign.Logger.Level.HEADERS)\nor\nlogLevel(feign.Logger.Level.FULL)\n</code></pre>\n\n<p>For more details, you can refer <a href=\"http://projects.spring.io/spring-cloud/spring-cloud.html#_feign_logging\" rel=\"noreferrer\">this</a></p>\n"},{"tags":[],"owner":{"account_id":948742,"reputation":723,"user_id":975386,"display_name":"Jean-Alexis Aufauvre"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1552049464,"creation_date":1552049464,"answer_id":55063617,"question_id":42751269,"body_markdown":"    private void setup() {\r\n        //...\r\n        feignBuilder.logger(new MyLogger());\r\n        feignBuilder.logLevel(Logger.Level.FULL);\r\n    }\r\n\r\n    private static class MyLogger extends Logger {\r\n        @Override\r\n        protected void log(String s, String s1, Object... objects) {\r\n            System.out.println(String.format(s + s1, objects)); // Change me!\r\n        }\r\n    }","title":"Feign logging not working when alter level","body":"<pre><code>private void setup() {\n    //...\n    feignBuilder.logger(new MyLogger());\n    feignBuilder.logLevel(Logger.Level.FULL);\n}\n\nprivate static class MyLogger extends Logger {\n    @Override\n    protected void log(String s, String s1, Object... objects) {\n        System.out.println(String.format(s + s1, objects)); // Change me!\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":124772,"reputation":10425,"user_id":320087,"accept_rate":90,"display_name":"Niraj Sonawane"},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1553233366,"creation_date":1553233366,"answer_id":55293530,"question_id":42751269,"body_markdown":"This is how i was able to log using Custom Config class \r\n\r\n**Note** Feign logging only responds to the DEBUG level.\r\n\r\n**Config Class**\r\n\r\n    @Configuration\r\n    public class UserClientConfig {\r\n    \r\n        @Bean\r\n        Logger.Level feignLoggerLevel() {\r\n            return Logger.Level.HEADERS;\r\n        }\r\n    } \r\n\r\n**Client**\r\n\r\n    @FeignClient(name = &quot;User&quot;, url = &quot;http://localhost:8080&quot;,configuration=UserClientConfig.class)\r\n    public interface UserClient {\r\n    \r\n        @RequestMapping(method = RequestMethod.GET, value = &quot;/user&quot;)\r\n        List&lt;User&gt; getAllUsers();    \r\n        \r\n    }\r\n\r\napplication.properties \r\n\r\n    logging.level.&lt;pcakgepath&gt;.UserClient: DEBUG\r\n\r\n","title":"Feign logging not working when alter level","body":"<p>This is how i was able to log using Custom Config class </p>\n\n<p><strong>Note</strong> Feign logging only responds to the DEBUG level.</p>\n\n<p><strong>Config Class</strong></p>\n\n<pre><code>@Configuration\npublic class UserClientConfig {\n\n    @Bean\n    Logger.Level feignLoggerLevel() {\n        return Logger.Level.HEADERS;\n    }\n} \n</code></pre>\n\n<p><strong>Client</strong></p>\n\n<pre><code>@FeignClient(name = \"User\", url = \"http://localhost:8080\",configuration=UserClientConfig.class)\npublic interface UserClient {\n\n    @RequestMapping(method = RequestMethod.GET, value = \"/user\")\n    List&lt;User&gt; getAllUsers();    \n\n}\n</code></pre>\n\n<p>application.properties </p>\n\n<pre><code>logging.level.&lt;pcakgepath&gt;.UserClient: DEBUG\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5199669,"reputation":808,"user_id":4159559,"display_name":"Roland"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1698051905,"creation_date":1558078229,"answer_id":56181660,"question_id":42751269,"body_markdown":"First you need to set the logging level for your feign client class to `DEBUG`, as Maverick already mentioned in his answer.\r\n\r\nThen if you use Spring Boot, beside the option to create `@Configuration` classes as Niraj already mentioned in his answer, you can configure each client individually in you application properties/yml config file:\r\n\r\n```yaml\r\nspring:\r\n  cloud:\r\n    openfeign:\r\n      client:\r\n        config:\r\n          the_name_of_your_feign_client:\r\n            connectTimeout: 5000\r\n            readTimeout: 5000\r\n            loggerLevel: basic\r\n```\r\n\r\nOr use default instead of `the_name_of_your_feign_client` to configure all your feign clients in the same way:\r\n\r\n\r\n```yaml\r\nspring:\r\n  cloud:\r\n    openfeign:\r\n      client:\r\n        config:\r\n          default:\r\n            connectTimeout: 5000\r\n            readTimeout: 5000\r\n            loggerLevel: basic\r\n```\r\nThis should be valid for Spring Boot 3.\r\nFor older version the path would be:\r\n```yaml\r\nfeign:\r\n    client:\r\n        config:\r\n            the_name_of_your_feign_client:\r\n```\r\n","title":"Feign logging not working when alter level","body":"<p>First you need to set the logging level for your feign client class to <code>DEBUG</code>, as Maverick already mentioned in his answer.</p>\n<p>Then if you use Spring Boot, beside the option to create <code>@Configuration</code> classes as Niraj already mentioned in his answer, you can configure each client individually in you application properties/yml config file:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>spring:\n  cloud:\n    openfeign:\n      client:\n        config:\n          the_name_of_your_feign_client:\n            connectTimeout: 5000\n            readTimeout: 5000\n            loggerLevel: basic\n</code></pre>\n<p>Or use default instead of <code>the_name_of_your_feign_client</code> to configure all your feign clients in the same way:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>spring:\n  cloud:\n    openfeign:\n      client:\n        config:\n          default:\n            connectTimeout: 5000\n            readTimeout: 5000\n            loggerLevel: basic\n</code></pre>\n<p>This should be valid for Spring Boot 3.\nFor older version the path would be:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>feign:\n    client:\n        config:\n            the_name_of_your_feign_client:\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5940200,"reputation":721,"user_id":4671737,"accept_rate":50,"display_name":"Tony Murphy"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1578558357,"creation_date":1578504768,"answer_id":59651045,"question_id":42751269,"body_markdown":"I hadn&#39;t set a client, and my client calls were failing, and logging wasn&#39;t working.. once I added OkHttpClient and changed logback.xml file, worked fine\r\n\r\n        MyApi myApi = Feign.builder()\r\n                .client(new OkHttpClient())\r\n                .decoder(new JacksonDecoder())\r\n                .encoder(new JacksonEncoder())\r\n                .logger(new Slf4jLogger())\r\n                .logLevel(feign.Logger.Level.FULL)\r\n                .target(MyApi.class, &quot;http://localhost:8082&quot;);\r\n\r\nthis is logback.xml\r\n\r\n    &lt;configuration&gt;\r\n        &lt;appender name=&quot;STDOUT&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n            &lt;encoder class=&quot;ch.qos.logback.classic.encoder.PatternLayoutEncoder&quot;&gt;\r\n                &lt;pattern&gt;%d %green([%thread]) %highlight(%level) %logger{50} - %msg%n&lt;/pattern&gt;\r\n            &lt;/encoder&gt;\r\n        &lt;/appender&gt;\r\n        &lt;logger name=&quot;feign.Logger&quot; level=&quot;DEBUG&quot; /&gt;\r\n        &lt;root level=&quot;INFO&quot;&gt;\r\n            &lt;appender-ref ref=&quot;STDOUT&quot;/&gt;\r\n        &lt;/root&gt;\r\n    &lt;/configuration&gt;","title":"Feign logging not working when alter level","body":"<p>I hadn't set a client, and my client calls were failing, and logging wasn't working.. once I added OkHttpClient and changed logback.xml file, worked fine</p>\n\n<pre><code>    MyApi myApi = Feign.builder()\n            .client(new OkHttpClient())\n            .decoder(new JacksonDecoder())\n            .encoder(new JacksonEncoder())\n            .logger(new Slf4jLogger())\n            .logLevel(feign.Logger.Level.FULL)\n            .target(MyApi.class, \"http://localhost:8082\");\n</code></pre>\n\n<p>this is logback.xml</p>\n\n<pre><code>&lt;configuration&gt;\n    &lt;appender name=\"STDOUT\" class=\"ch.qos.logback.core.ConsoleAppender\"&gt;\n        &lt;encoder class=\"ch.qos.logback.classic.encoder.PatternLayoutEncoder\"&gt;\n            &lt;pattern&gt;%d %green([%thread]) %highlight(%level) %logger{50} - %msg%n&lt;/pattern&gt;\n        &lt;/encoder&gt;\n    &lt;/appender&gt;\n    &lt;logger name=\"feign.Logger\" level=\"DEBUG\" /&gt;\n    &lt;root level=\"INFO\"&gt;\n        &lt;appender-ref ref=\"STDOUT\"/&gt;\n    &lt;/root&gt;\n&lt;/configuration&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19878904,"reputation":186,"user_id":14563324,"display_name":"hitesh"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1628251913,"creation_date":1628251913,"answer_id":68681380,"question_id":42751269,"body_markdown":"Below code changes worked for me in kotlin: \r\n```\r\nimport feign.Logger\r\nimport org.springframework.context.annotation.Bean\r\nimport org.springframework.context.annotation.Configuration\r\n\r\n@Configuration\r\nclass FeignLoggingConfiguration {\r\n\r\n    @Bean\r\n    fun feignLoggerLevel(): Logger.Level {\r\n        return Logger.Level.HEADERS\r\n    }\r\n}\r\n```\r\n\r\nadd this configuration class in client: \r\n```\r\n@FeignClient(name = &quot;yourClient&quot;, url = &quot;\\${base-url}&quot;, configuration = [FeignLoggingConfiguration::class])\r\ninterface yourClient \r\n\r\n```\r\n\r\n**Note:**  please make sure logging level for `yourClient` class is DEBUG\r\n\r\nLoggin level supported by feign : \r\n\r\nNONE, No logging (DEFAULT)\r\n\r\nBASIC, Log only the request method and URL and the response status code and execution time\r\n\r\nHEADERS, Log the basic information along with request and response headers\r\n\r\nFULL, Log the headers, body, and metadata for both requests and responses","title":"Feign logging not working when alter level","body":"<p>Below code changes worked for me in kotlin:</p>\n<pre><code>import feign.Logger\nimport org.springframework.context.annotation.Bean\nimport org.springframework.context.annotation.Configuration\n\n@Configuration\nclass FeignLoggingConfiguration {\n\n    @Bean\n    fun feignLoggerLevel(): Logger.Level {\n        return Logger.Level.HEADERS\n    }\n}\n</code></pre>\n<p>add this configuration class in client:</p>\n<pre><code>@FeignClient(name = &quot;yourClient&quot;, url = &quot;\\${base-url}&quot;, configuration = [FeignLoggingConfiguration::class])\ninterface yourClient \n\n</code></pre>\n<p><strong>Note:</strong>  please make sure logging level for <code>yourClient</code> class is DEBUG</p>\n<p>Loggin level supported by feign :</p>\n<p>NONE, No logging (DEFAULT)</p>\n<p>BASIC, Log only the request method and URL and the response status code and execution time</p>\n<p>HEADERS, Log the basic information along with request and response headers</p>\n<p>FULL, Log the headers, body, and metadata for both requests and responses</p>\n"},{"tags":[],"owner":{"account_id":3414783,"reputation":3286,"user_id":2863995,"accept_rate":57,"display_name":"Arnold Galovics"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1638562510,"creation_date":1638562510,"answer_id":70220179,"question_id":42751269,"body_markdown":"I&#39;m kinda late from here but let me try to help fellow people finding this thread.\r\n\r\nThere are two things we have to distinguish. Feign logging when using plain Feign and when using it with Spring Cloud OpenFeign.\r\n\r\nWith plain Feign, you gotta do a few things do make things work:\r\n\r\n 1. You have to set the log level for your client\r\n 2. You have to configure the appropriate log adapter of your choice\r\n 3. You have to set the `feign` logger to `DEBUG`\r\n\r\nLet me show you how to do it:\r\n\r\n    Feign.builder()\r\n         .logLevel(Logger.Level.FULL)\r\n         .logger(new Slf4jLogger())\r\n         .target(MyClient.class, &quot;http://localhost:8081&quot;);\r\n\r\nIn this particular case, I&#39;m using SLF4J as the logging adapter. This configuration took care of step 1 and 2. \r\nNow let&#39;s configure the logger. And don&#39;t forget, this may vary depending on your logging setup, I&#39;ll show you one with Spring Boot:\r\n\r\n`application.properties`:\r\n\r\n    logging.level.feign=DEBUG\r\n\r\nBut this could be done with plain Logback in your `logback.xml`, log4j, whatever logging system you have. The only important thing is to configure the `feign` named logger to `DEBUG`.\r\n\r\nThis is due to the fact that the Feign library logs everything with the `feign` logger and not with the class name of the target clients.\r\n\r\nWith Spring Cloud OpenFeign, it changes a little bit because Spring uses the client&#39;s class name to set up the logger.\r\n\r\nFor this case, we only have to do 2 things - if you&#39;re using the `@FeignClient` annotation.\r\n\r\n 1. Configure the log level for the clients\r\n 2. Configure the appropriate client logger to `DEBUG`\r\n\r\nThe first can be done this way:\r\n\r\n    @Configuration\r\n    public class FeignConfiguration {\r\n        @Bean\r\n        public Logger.Level loggerLevel() {\r\n            return Logger.Level.FULL;\r\n        }\r\n    }\r\n\r\nThis will configure the log level for all the Feign clients unless you use a specific configuration in the `@FeignClient` annotation.\r\n\r\nSecond thing, enable `DEBUG` logging for the client&#39;s class/package.\r\n\r\n`application.properties`:\r\n\r\n    logging.level.com.example.MyClient=DEBUG\r\n\r\nIf you&#39;re struggling with Feign configuration, you might wanna take a look at my [articles][1] or [my course][2].\r\n \r\nCheers.\r\n\r\n\r\n  [1]: https://arnoldgalovics.com/tag/feign/?utm_source=stackoverflow&amp;utm_medium=post&amp;utm_campaign=tag-feign\r\n  [2]: https://www.udemy.com/course/mastering-microservice-communication-with-spring-cloud-feign/?referralCode=437693FE520ABDF6F4E3","title":"Feign logging not working when alter level","body":"<p>I'm kinda late from here but let me try to help fellow people finding this thread.</p>\n<p>There are two things we have to distinguish. Feign logging when using plain Feign and when using it with Spring Cloud OpenFeign.</p>\n<p>With plain Feign, you gotta do a few things do make things work:</p>\n<ol>\n<li>You have to set the log level for your client</li>\n<li>You have to configure the appropriate log adapter of your choice</li>\n<li>You have to set the <code>feign</code> logger to <code>DEBUG</code></li>\n</ol>\n<p>Let me show you how to do it:</p>\n<pre><code>Feign.builder()\n     .logLevel(Logger.Level.FULL)\n     .logger(new Slf4jLogger())\n     .target(MyClient.class, &quot;http://localhost:8081&quot;);\n</code></pre>\n<p>In this particular case, I'm using SLF4J as the logging adapter. This configuration took care of step 1 and 2.\nNow let's configure the logger. And don't forget, this may vary depending on your logging setup, I'll show you one with Spring Boot:</p>\n<p><code>application.properties</code>:</p>\n<pre><code>logging.level.feign=DEBUG\n</code></pre>\n<p>But this could be done with plain Logback in your <code>logback.xml</code>, log4j, whatever logging system you have. The only important thing is to configure the <code>feign</code> named logger to <code>DEBUG</code>.</p>\n<p>This is due to the fact that the Feign library logs everything with the <code>feign</code> logger and not with the class name of the target clients.</p>\n<p>With Spring Cloud OpenFeign, it changes a little bit because Spring uses the client's class name to set up the logger.</p>\n<p>For this case, we only have to do 2 things - if you're using the <code>@FeignClient</code> annotation.</p>\n<ol>\n<li>Configure the log level for the clients</li>\n<li>Configure the appropriate client logger to <code>DEBUG</code></li>\n</ol>\n<p>The first can be done this way:</p>\n<pre><code>@Configuration\npublic class FeignConfiguration {\n    @Bean\n    public Logger.Level loggerLevel() {\n        return Logger.Level.FULL;\n    }\n}\n</code></pre>\n<p>This will configure the log level for all the Feign clients unless you use a specific configuration in the <code>@FeignClient</code> annotation.</p>\n<p>Second thing, enable <code>DEBUG</code> logging for the client's class/package.</p>\n<p><code>application.properties</code>:</p>\n<pre><code>logging.level.com.example.MyClient=DEBUG\n</code></pre>\n<p>If you're struggling with Feign configuration, you might wanna take a look at my <a href=\"https://arnoldgalovics.com/tag/feign/?utm_source=stackoverflow&amp;utm_medium=post&amp;utm_campaign=tag-feign\" rel=\"nofollow noreferrer\">articles</a> or <a href=\"https://www.udemy.com/course/mastering-microservice-communication-with-spring-cloud-feign/?referralCode=437693FE520ABDF6F4E3\" rel=\"nofollow noreferrer\">my course</a>.</p>\n<p>Cheers.</p>\n"},{"tags":[],"owner":{"account_id":10594228,"reputation":1,"user_id":11942232,"display_name":"user11942232"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673444403,"creation_date":1673444403,"answer_id":75083952,"question_id":42751269,"body_markdown":"U can put log level in bootstrap/application property it will give u all the debug logs for your spring boot application \r\nfor example:-\r\nlogging.leve.root=debug","title":"Feign logging not working when alter level","body":"<p>U can put log level in bootstrap/application property it will give u all the debug logs for your spring boot application\nfor example:-\nlogging.leve.root=debug</p>\n"}],"owner":{"account_id":97808,"reputation":4702,"user_id":265119,"accept_rate":31,"display_name":"Magick"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81592,"favorite_count":0,"down_vote_count":0,"up_vote_count":43,"answer_count":9,"score":43,"last_activity_date":1698051905,"creation_date":1489342665,"question_id":42751269,"body_markdown":"I&#39;m trying to get logging working for each request from a Feign rest client.\r\n\r\nHowever I cannot get the logging to work, while &#39;standard&#39; Slf4j logging does work.\r\n\r\nI have the following:\r\n\r\n    public MyClient() {\r\n        initConnectionProperties();\r\n        this.service = Feign.builder()\r\n            .contract(new JAXRSContract())\r\n            .decoder(getJacksonDecoder())\r\n            .encoder(getJacksonEncoder())\r\n            .requestInterceptor(new BasicAuthRequestInterceptor(user, password))\r\n            .logger(new Slf4jLogger(MyClient.class)) //not working\r\n            .logLevel(feign.Logger.Level.BASIC)\r\n            .target(MyClient.class, this.url);\r\n        logger.info(&quot;Connection parameters: url = &quot; + url + &quot;, user = &quot; + user); // working\r\n    }","title":"Feign logging not working when alter level","body":"<p>I'm trying to get logging working for each request from a Feign rest client.</p>\n<p>However I cannot get the logging to work, while 'standard' Slf4j logging does work.</p>\n<p>I have the following:</p>\n<pre><code>public MyClient() {\n    initConnectionProperties();\n    this.service = Feign.builder()\n        .contract(new JAXRSContract())\n        .decoder(getJacksonDecoder())\n        .encoder(getJacksonEncoder())\n        .requestInterceptor(new BasicAuthRequestInterceptor(user, password))\n        .logger(new Slf4jLogger(MyClient.class)) //not working\n        .logLevel(feign.Logger.Level.BASIC)\n        .target(MyClient.class, this.url);\n    logger.info(&quot;Connection parameters: url = &quot; + url + &quot;, user = &quot; + user); // working\n}\n</code></pre>\n"},{"tags":["java","android","sockets","mirroring"],"answers":[{"tags":[],"owner":{"account_id":474397,"reputation":1849,"user_id":884052,"display_name":"Ajeet47"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1389244887,"creation_date":1389244887,"answer_id":21012178,"question_id":21011724,"body_markdown":"it possible but difficult to implement, instead you can use VNC implemention on android .\r\n\r\n1) https://code.google.com/p/fastdroid-vnc/\r\n\r\nor \r\n\r\n2) http://code.google.com/p/android-vnc-server/\r\n\r\nor \r\n\r\nsearch android VNC server porting.\r\n","title":"screen mirroring in android","body":"<p>it possible but difficult to implement, instead you can use VNC implemention on android .</p>\n\n<p>1) <a href=\"https://code.google.com/p/fastdroid-vnc/\" rel=\"nofollow\">https://code.google.com/p/fastdroid-vnc/</a></p>\n\n<p>or </p>\n\n<p>2) <a href=\"http://code.google.com/p/android-vnc-server/\" rel=\"nofollow\">http://code.google.com/p/android-vnc-server/</a></p>\n\n<p>or </p>\n\n<p>search android VNC server porting.</p>\n"},{"tags":[],"owner":{"account_id":6324969,"reputation":398,"user_id":4911707,"display_name":"Phaneendra Kasalanati"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1483694663,"creation_date":1483694663,"answer_id":41502551,"question_id":21011724,"body_markdown":"The same way I implemented Android screen mirroring which are connected in same network. Code is available @ https://github.com/phaneendrak5757/ScreenMirroring","title":"screen mirroring in android","body":"<p>The same way I implemented Android screen mirroring which are connected in same network. Code is available @ <a href=\"https://github.com/phaneendrak5757/ScreenMirroring\" rel=\"nofollow noreferrer\">https://github.com/phaneendrak5757/ScreenMirroring</a></p>\n"}],"owner":{"account_id":1010883,"reputation":277,"user_id":1023478,"accept_rate":11,"display_name":"Ankith"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11817,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1698051820,"creation_date":1389242518,"question_id":21011724,"body_markdown":"I want to implement screen mirroring in Android platform.\r\n\r\nI am thinking to follow this approach, is there any better way for the same:\r\n\r\n1. Open socket connection Android and PC.  \r\n2. Capture screen or take screenshot at regular intervals and send it through socket.  \r\n3. Display the received image in Canvas\r\n\r\nLanguage: Java, Socket programming\r\n\r\n**My questions**\r\n\r\n1. Is there any other better way to implement the above feature?  \r\n2. How do I capture screen in Android Platform?","title":"screen mirroring in android","body":"<p>I want to implement screen mirroring in Android platform.</p>\n\n<p>I am thinking to follow this approach, is there any better way for the same:</p>\n\n<ol>\n<li>Open socket connection Android and PC.  </li>\n<li>Capture screen or take screenshot at regular intervals and send it through socket.  </li>\n<li>Display the received image in Canvas</li>\n</ol>\n\n<p>Language: Java, Socket programming</p>\n\n<p><strong>My questions</strong></p>\n\n<ol>\n<li>Is there any other better way to implement the above feature?  </li>\n<li>How do I capture screen in Android Platform?</li>\n</ol>\n"},{"tags":["java","rest-assured"],"answers":[{"tags":[],"owner":{"account_id":1386466,"reputation":417,"user_id":1318411,"display_name":"sen4ik"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1579311246,"creation_date":1579310934,"answer_id":59796785,"question_id":59780811,"body_markdown":"I found an answer by looking at logged rest-assured issue [here][1].\r\n\r\nI just had to make sure I am not using STRICT mode (which is the default):\r\n```\r\n.config(RestAssuredConfig.config().httpClient(HttpClientConfig.httpClientConfig().httpMultipartMode(HttpMultipartMode.BROWSER_COMPATIBLE))\r\n```\r\n\r\n\r\n  [1]: https://github.com/rest-assured/rest-assured/issues/844","title":"Rest-assured POST call with multipart file that contains Cyrillic characters in the filename","body":"<p>I found an answer by looking at logged rest-assured issue <a href=\"https://github.com/rest-assured/rest-assured/issues/844\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>I just had to make sure I am not using STRICT mode (which is the default):</p>\n\n<pre><code>.config(RestAssuredConfig.config().httpClient(HttpClientConfig.httpClientConfig().httpMultipartMode(HttpMultipartMode.BROWSER_COMPATIBLE))\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2853559,"reputation":1838,"user_id":2450219,"accept_rate":83,"display_name":"ITurchenko"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698051537,"creation_date":1698051537,"answer_id":77343891,"question_id":59780811,"body_markdown":"Another solution (HttpMultipartMode.BROWSER_COMPATIBLE didn&#39;t work for me)\r\n\r\nJust use MultiPartSpecBuilder with specified charset\r\n\r\n    .multiPart(MultiPartSpecBuilder(DocumentStatus.Действующий.name)\r\n        .controlName(&quot;status&quot;).mimeType(&quot;text&quot;)\r\n        .charset(Charsets.UTF_8)\r\n        .build())","title":"Rest-assured POST call with multipart file that contains Cyrillic characters in the filename","body":"<p>Another solution (HttpMultipartMode.BROWSER_COMPATIBLE didn't work for me)</p>\n<p>Just use MultiPartSpecBuilder with specified charset</p>\n<pre><code>.multiPart(MultiPartSpecBuilder(DocumentStatus.Действующий.name)\n    .controlName(&quot;status&quot;).mimeType(&quot;text&quot;)\n    .charset(Charsets.UTF_8)\n    .build())\n</code></pre>\n"}],"owner":{"account_id":1386466,"reputation":417,"user_id":1318411,"display_name":"sen4ik"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1638,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":59796785,"answer_count":2,"score":2,"last_activity_date":1698051537,"creation_date":1579231841,"question_id":59780811,"body_markdown":"I am sending POST call to an endpoint with file that does have Cyrillic characters in the filename. I have tried setting encoding to UTF-8 in every place I knew about.\r\n\r\n```\r\nRestAssured.config = RestAssured.config()\r\n        .encoderConfig(encoderConfig().defaultContentCharset(&quot;UTF-8&quot;))\r\n        .encoderConfig(encoderConfig().defaultCharsetForContentType(&quot;UTF-8&quot;, &quot;multipart/form-data&quot;))\r\n        .multiPartConfig(multiPartConfig().defaultCharset(&quot;UTF-8&quot;))\r\n        .decoderConfig(decoderConfig().defaultContentCharset(&quot;UTF-8&quot;))\r\n        .decoderConfig(decoderConfig().defaultCharsetForContentType(&quot;UTF-8&quot;, &quot;multipart/form-data&quot;));\r\n\r\nRequestSpecification rs = given()\r\n        .baseUri(baseUrl)\r\n        .header(&quot;Content-Type&quot;, &quot;multipart/form-data&quot;)\r\n        .header(getAuthHeader())\r\n        .config(RestAssured.config)\r\n        .multiPart(\r\n                new MultiPartSpecBuilder(file)\r\n                        .controlName(&quot;file&quot;)\r\n                        .mimeType(&quot;audio/mpeg&quot;)\r\n                        .fileName(file.getName())\r\n                        .charset(&quot;UTF-8&quot;)\r\n                        .build()\r\n        )\r\n        .multiPart(\r\n                new MultiPartSpecBuilder(categoryId)\r\n                        .controlName(&quot;categoryId&quot;)\r\n                        .build()\r\n        )\r\n        .multiPart(\r\n                new MultiPartSpecBuilder(fileTitle)\r\n                        .charset(Charsets.UTF_8)\r\n                        .controlName(&quot;fileTitle&quot;)\r\n                        .build()\r\n        )\r\n        .log().everything();\r\n\r\nrs\r\n    .when()\r\n        .post(FilePaths.add.value)\r\n    .then()\r\n        .log().everything()\r\n        .statusCode(201)\r\n        .contentType(ContentType.JSON);\r\n```\r\n\r\nWhen I am debugging an API code, I can see that in above case content-disposition header comes with Cyrillic characters replaced with question mark: `form-data; name=&quot;file&quot;; filename=&quot;??????.mp3&quot;`. \r\n\r\nWhen I make same call with Postman, it works just fine. The only difference I see between rest-assured call and Postman call is the content-disposition header.\r\n\r\nAny idea what needs to be tweaked for rest-assured configuration?","title":"Rest-assured POST call with multipart file that contains Cyrillic characters in the filename","body":"<p>I am sending POST call to an endpoint with file that does have Cyrillic characters in the filename. I have tried setting encoding to UTF-8 in every place I knew about.</p>\n\n<pre><code>RestAssured.config = RestAssured.config()\n        .encoderConfig(encoderConfig().defaultContentCharset(\"UTF-8\"))\n        .encoderConfig(encoderConfig().defaultCharsetForContentType(\"UTF-8\", \"multipart/form-data\"))\n        .multiPartConfig(multiPartConfig().defaultCharset(\"UTF-8\"))\n        .decoderConfig(decoderConfig().defaultContentCharset(\"UTF-8\"))\n        .decoderConfig(decoderConfig().defaultCharsetForContentType(\"UTF-8\", \"multipart/form-data\"));\n\nRequestSpecification rs = given()\n        .baseUri(baseUrl)\n        .header(\"Content-Type\", \"multipart/form-data\")\n        .header(getAuthHeader())\n        .config(RestAssured.config)\n        .multiPart(\n                new MultiPartSpecBuilder(file)\n                        .controlName(\"file\")\n                        .mimeType(\"audio/mpeg\")\n                        .fileName(file.getName())\n                        .charset(\"UTF-8\")\n                        .build()\n        )\n        .multiPart(\n                new MultiPartSpecBuilder(categoryId)\n                        .controlName(\"categoryId\")\n                        .build()\n        )\n        .multiPart(\n                new MultiPartSpecBuilder(fileTitle)\n                        .charset(Charsets.UTF_8)\n                        .controlName(\"fileTitle\")\n                        .build()\n        )\n        .log().everything();\n\nrs\n    .when()\n        .post(FilePaths.add.value)\n    .then()\n        .log().everything()\n        .statusCode(201)\n        .contentType(ContentType.JSON);\n</code></pre>\n\n<p>When I am debugging an API code, I can see that in above case content-disposition header comes with Cyrillic characters replaced with question mark: <code>form-data; name=\"file\"; filename=\"??????.mp3\"</code>. </p>\n\n<p>When I make same call with Postman, it works just fine. The only difference I see between rest-assured call and Postman call is the content-disposition header.</p>\n\n<p>Any idea what needs to be tweaked for rest-assured configuration?</p>\n"},{"tags":["java","spring","spring-boot","spring-security","keycloak"],"comments":[{"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1697782810,"post_id":77327028,"comment_id":136325334,"body_markdown":"instead of `.requestMatchers(&quot;auth/**&quot;).permitAll()` write `.requestMatchers(&quot;/auth/**&quot;).permitAll()`. You forgot to add `/` before `auth`.","body":"instead of <code>.requestMatchers(&quot;auth&#47;**&quot;).permitAll()</code> write <code>.requestMatchers(&quot;&#47;auth&#47;**&quot;).permitAll()</code>. You forgot to add <code>&#47;</code> before <code>auth</code>."}],"answers":[{"tags":[],"owner":{"account_id":29712283,"reputation":1,"user_id":22771622,"display_name":"lptrk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697760744,"creation_date":1697760744,"answer_id":77327674,"question_id":77327028,"body_markdown":"Did you check the Controller?\r\nThere may be a chance you didn&#39;t add the RequestMapping to the URL in RequestMatchers:\r\n\r\nMaybe  `&quot;api/v1/auth/**&quot;`\r\n\r\ninsted of `&quot;auth/**&quot;`\r\n\r\nDepending of your RequestMapping","title":"Spring Security 6 .permitAll() not working","body":"<p>Did you check the Controller?\nThere may be a chance you didn't add the RequestMapping to the URL in RequestMatchers:</p>\n<p>Maybe  <code>&quot;api/v1/auth/**&quot;</code></p>\n<p>insted of <code>&quot;auth/**&quot;</code></p>\n<p>Depending of your RequestMapping</p>\n"},{"tags":[],"owner":{"account_id":19261826,"reputation":1,"user_id":14077540,"display_name":"Vinicius Finger"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1698051254,"creation_date":1697802651,"answer_id":77330708,"question_id":77327028,"body_markdown":"I solved the problem! In my security filter chain I needed to ignore the /auth in CSRF config:\r\n```java\r\nreturn http\r\n       .cors(Customizer.withDefaults())\r\n       .csrf(csrf -&gt; csrf\r\n\t\t\t.csrfTokenRequestHandler(csrfRequestHandler)\r\n\t\t\t.ignoringRequestMatchers(&quot;/auth/**&quot;)\r\n\t\t\t.csrfTokenRepository(CookieCsrfTokenRepository.withHttpOnlyFalse()))\r\n       .authorizeHttpRequests(requests -&gt; requests\r\n\t\t\t.requestMatchers(new AntPathRequestMatcher(&quot;/auth/**&quot;)).permitAll()\r\n\t\t\t.anyRequest().authenticated())\r\n       .oauth2ResourceServer(oauth2 -&gt; oauth2\r\n\t\t\t.jwt(jwt -&gt; jwt\r\n\t\t\t\t.jwtAuthenticationConverter(grantedAuthoritiesExtractor())))\r\n       .build();\r\n```","title":"Spring Security 6 .permitAll() not working","body":"<p>I solved the problem! In my security filter chain I needed to ignore the /auth in CSRF config:</p>\n<pre class=\"lang-java prettyprint-override\"><code>return http\n       .cors(Customizer.withDefaults())\n       .csrf(csrf -&gt; csrf\n            .csrfTokenRequestHandler(csrfRequestHandler)\n            .ignoringRequestMatchers(&quot;/auth/**&quot;)\n            .csrfTokenRepository(CookieCsrfTokenRepository.withHttpOnlyFalse()))\n       .authorizeHttpRequests(requests -&gt; requests\n            .requestMatchers(new AntPathRequestMatcher(&quot;/auth/**&quot;)).permitAll()\n            .anyRequest().authenticated())\n       .oauth2ResourceServer(oauth2 -&gt; oauth2\n            .jwt(jwt -&gt; jwt\n                .jwtAuthenticationConverter(grantedAuthoritiesExtractor())))\n       .build();\n</code></pre>\n"}],"owner":{"account_id":19261826,"reputation":1,"user_id":14077540,"display_name":"Vinicius Finger"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":190,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77330708,"answer_count":2,"score":0,"last_activity_date":1698051254,"creation_date":1697748698,"question_id":77327028,"body_markdown":"I&#39;m bulding an API using Java 21, Spring boot 3 and spring security 6 authenticating in keycloak 22.\r\n\r\nI have this code that configure my spring security:\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        CsrfTokenRequestAttributeHandler csrfRequestHandler = new CsrfTokenRequestAttributeHandler();\r\n        csrfRequestHandler.setCsrfRequestAttributeName(&quot;_csrf&quot;);\r\n    \r\n        return http\r\n                .cors(Customizer.withDefaults())\r\n                .csrf(csrf -&gt; csrf\r\n                        .csrfTokenRequestHandler(csrfRequestHandler)\r\n                        .csrfTokenRepository(CookieCsrfTokenRepository.withHttpOnlyFalse()))\r\n                .authorizeHttpRequests(requests -&gt; requests\r\n                        .requestMatchers(&quot;auth/**&quot;).permitAll()\r\n                        .anyRequest().authenticated())\r\n                .oauth2ResourceServer(oauth2 -&gt; oauth2\r\n                        .jwt(jwt -&gt; jwt\r\n                                .jwtAuthenticationConverter(grantedAuthoritiesExtractor())))\r\n    \r\n                .build();\r\n    }\r\n\r\n\r\nI also have this configuration pointing to my Keycloak to validate the token.\r\n`\r\nsecurity:\r\n    oauth2:\r\n      resourceserver:\r\n        jwt:\r\n          issuer-uri: &#39;http://localhost:8080/realms/core-creare&#39;\r\n`\r\n\r\nI&#39;m trying to bypass authentication in the path &quot;/auth&quot;, but the .permitAll() its not working. When I do a post request in &quot;/auth&quot;, return as 401 unauthorized.","title":"Spring Security 6 .permitAll() not working","body":"<p>I'm bulding an API using Java 21, Spring boot 3 and spring security 6 authenticating in keycloak 22.</p>\n<p>I have this code that configure my spring security:</p>\n<pre><code>@Bean\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n    CsrfTokenRequestAttributeHandler csrfRequestHandler = new CsrfTokenRequestAttributeHandler();\n    csrfRequestHandler.setCsrfRequestAttributeName(&quot;_csrf&quot;);\n\n    return http\n            .cors(Customizer.withDefaults())\n            .csrf(csrf -&gt; csrf\n                    .csrfTokenRequestHandler(csrfRequestHandler)\n                    .csrfTokenRepository(CookieCsrfTokenRepository.withHttpOnlyFalse()))\n            .authorizeHttpRequests(requests -&gt; requests\n                    .requestMatchers(&quot;auth/**&quot;).permitAll()\n                    .anyRequest().authenticated())\n            .oauth2ResourceServer(oauth2 -&gt; oauth2\n                    .jwt(jwt -&gt; jwt\n                            .jwtAuthenticationConverter(grantedAuthoritiesExtractor())))\n\n            .build();\n}\n</code></pre>\n<p>I also have this configuration pointing to my Keycloak to validate the token.\n<code>security: oauth2: resourceserver: jwt: issuer-uri: 'http://localhost:8080/realms/core-creare'</code></p>\n<p>I'm trying to bypass authentication in the path &quot;/auth&quot;, but the .permitAll() its not working. When I do a post request in &quot;/auth&quot;, return as 401 unauthorized.</p>\n"},{"tags":["java","amazon-web-services","amazon-elasticache","aws-java-sdk"],"answers":[{"tags":[],"owner":{"account_id":6676906,"reputation":1323,"user_id":8747361,"display_name":"Chaitanya Chitturi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698031755,"creation_date":1698031755,"answer_id":77342502,"question_id":77327973,"body_markdown":"Did you check your IAM? \r\nMake sure that your AWS IAM user or role, which is used to create the Amazon CloudWatch client, has the necessary permissions to read the Elasticache metrics from CloudWatch. Verify the IAM policies attached to the user or role to ensure it has permission for cloudwatch:GetMetricStatistics.\r\n\r\nFrom a quick review of your code, I can&#39;t see any obvious errors, but I do notice a potential issue with the &quot;MetricName&quot; in the getSumMetricValue and getAverageMetricValue methods.\r\n\r\nYou are specifying metric names like &quot;SwapUsage&quot; and &quot;CurrConnections&quot; in your code, but Elasticache metrics are usually reported with metric names like &quot;SwapUsage:PerNode&quot; and &quot;CurrConnections:PerNode.&quot; These are examples, and the actual metric names might have additional suffixes to differentiate between different nodes.","title":"Can&#39;t get AWS cloudwatch metrics for Elasticache in Java","body":"<p>Did you check your IAM?\nMake sure that your AWS IAM user or role, which is used to create the Amazon CloudWatch client, has the necessary permissions to read the Elasticache metrics from CloudWatch. Verify the IAM policies attached to the user or role to ensure it has permission for cloudwatch:GetMetricStatistics.</p>\n<p>From a quick review of your code, I can't see any obvious errors, but I do notice a potential issue with the &quot;MetricName&quot; in the getSumMetricValue and getAverageMetricValue methods.</p>\n<p>You are specifying metric names like &quot;SwapUsage&quot; and &quot;CurrConnections&quot; in your code, but Elasticache metrics are usually reported with metric names like &quot;SwapUsage:PerNode&quot; and &quot;CurrConnections:PerNode.&quot; These are examples, and the actual metric names might have additional suffixes to differentiate between different nodes.</p>\n"},{"tags":[],"owner":{"account_id":6756948,"reputation":1523,"user_id":5205011,"accept_rate":47,"display_name":"davidb"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1698051156,"creation_date":1698051156,"answer_id":77343851,"question_id":77327973,"body_markdown":"Ok, so I found out what was wrong. I had a look at AWS metrics in Cloudwatch metrics(not from Elasticache Metrics tab) and it turned out that each node in Elasticache is treated as `CacheClusterId`, where I thought each node was `CacheNodeId`. So I had a cluster with 3 nodes and each node has its own `CacheClusterId`, and under that you have `CacheNodeId` like 001. In the code above I only had to change `CacheNodeId` to `CacheClusterId` and it worked like a charm. ","title":"Can&#39;t get AWS cloudwatch metrics for Elasticache in Java","body":"<p>Ok, so I found out what was wrong. I had a look at AWS metrics in Cloudwatch metrics(not from Elasticache Metrics tab) and it turned out that each node in Elasticache is treated as <code>CacheClusterId</code>, where I thought each node was <code>CacheNodeId</code>. So I had a cluster with 3 nodes and each node has its own <code>CacheClusterId</code>, and under that you have <code>CacheNodeId</code> like 001. In the code above I only had to change <code>CacheNodeId</code> to <code>CacheClusterId</code> and it worked like a charm.</p>\n"}],"owner":{"account_id":6756948,"reputation":1523,"user_id":5205011,"accept_rate":47,"display_name":"davidb"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":119,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":77343851,"answer_count":2,"score":3,"last_activity_date":1698051156,"creation_date":1697767909,"question_id":77327973,"body_markdown":"I am trying to retrieve some Elasticache metrics from CloudWatch using Java SDK 1.x. I have several classes for multiple services, and they all work, except for Elasticache. This class is passed a list of Elasticache nodes, along with start and end times. For each node, I&#39;m attempting to retrieve some metrics from Elasticache with a 30-minute period. However, for some reason, I keep getting values of 0.0 for each metric. I have confirmed that the metrics are not empty in the AWS console. Here&#39;s my code:\r\n\r\n    public class ElastiCacheCWMetricsRetriever {\r\n        private final AmazonCloudWatch cloudWatchClient;\r\n    \r\n        public ElastiCacheCWMetricsRetriever(AmazonCloudWatch cloudWatchClient) {\r\n            this.cloudWatchClient = cloudWatchClient;\r\n        }\r\n    \r\n    \r\n        public Map&lt;String, Map&lt;String, Object&gt;&gt; getElastiCacheMetrics(List&lt;String&gt; nodeNames, \r\n            String startTimeStr, String endTimeStr) {\r\n            Map&lt;String, Map&lt;String, Object&gt;&gt; elastiCacheMetricsMap = new HashMap&lt;&gt;();\r\n    \r\n            try {\r\n                SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss&#39;Z&#39;&quot;);\r\n                Date startTime = dateFormat.parse(startTimeStr);\r\n                Date endTime = dateFormat.parse(endTimeStr);\r\n    \r\n                for (String nodeName : nodeNames) {\r\n                    Map&lt;String, Object&gt; nodeMetrics = new HashMap&lt;&gt;();\r\n    \r\n                    nodeMetrics.put(&quot;SwapUsage&quot;, getAverageMetricValue(&quot;AWS/ElastiCache&quot;, \r\n                        &quot;SwapUsage&quot;, &quot;CacheNodeId&quot;, nodeName, startTime, endTime));\r\n                    Double SwapUsage = getSumMetricValue(&quot;AWS/ElastiCache&quot;, &quot;SwapUsage&quot;, \r\n                        &quot;CacheNodeId&quot;, nodeName, startTime, endTime);\r\n                    System.out.println(&quot;SwapUsage for &quot; + nodeName + &quot; is &quot; + \r\n                        String.valueOf(SwapUsage));\r\n    \r\n                    nodeMetrics.put(&quot;CurrentConnections&quot;, getSumMetricValue(&quot;AWS/ElastiCache&quot;, \r\n                        &quot;CurrConnections&quot;, &quot;CacheNodeId&quot;, nodeName, startTime, endTime));\r\n    \r\n                    nodeMetrics.put(&quot;DatabaseMemoryUsagePercentage&quot;, \r\n                    getAverageMetricValue(&quot;AWS/ElastiCache&quot;, &quot;DatabaseMemoryUsagePercentage&quot;, \r\n                        &quot;CacheNodeId&quot;, nodeName, startTime, endTime) * 100.0);\r\n    \r\n                    nodeMetrics.put(&quot;EngineCPUUtilization&quot;, \r\n                         getAverageMetricValue(&quot;AWS/ElastiCache&quot;, &quot;EngineCPUUtilization&quot;, \r\n                         &quot;CacheNodeId&quot;, nodeName, startTime, endTime) * 100.0);\r\n    \r\n                    Double EngineCPUUtil = getAverageMetricValue(&quot;AWS/ElastiCache&quot;, \r\n                        &quot;EngineCPUUtilization&quot;, &quot;CacheNodeId&quot;, nodeName, startTime, endTime) * 100.0;\r\n                    System.out.println(&quot;EngineCPUUtilization for &quot; + nodeName + &quot; is &quot; + String.valueOf(EngineCPUUtil));\r\n                    elastiCacheMetricsMap.put(nodeName, nodeMetrics);\r\n                }\r\n            } catch (Exception e) {\r\n                System.out.println(&quot;Error in Elasticache&quot; + e.getMessage());\r\n            }   \r\n            return elastiCacheMetricsMap;\r\n        }\r\n    \r\n         private double getAverageMetricValue(String namespace, String metricName, String \r\n             dimensionName, String dimensionValue, Date startTime, Date endTime) {\r\n             int period = calculatePeriod(startTime, endTime);\r\n             return getMetricValue(namespace, metricName, dimensionName, dimensionValue, startTime, endTime, period, &quot;Average&quot;);\r\n         }\r\n    \r\n        private double getSumMetricValue(String namespace, String metricName, String dimensionName, String dimensionValue, Date startTime, Date endTime) {\r\n            int period = calculatePeriod(startTime, endTime);\r\n            return getMetricValue(namespace, metricName, dimensionName, dimensionValue, startTime, endTime, period, &quot;Sum&quot;);\r\n        }\r\n    \r\n        private double getMetricValue(String namespace, String metricName, String dimensionName, String dimensionValue, Date startTime, Date endTime, int period, String statistic) {\r\n            try {\r\n                GetMetricStatisticsRequest request = new GetMetricStatisticsRequest()\r\n                    .withNamespace(namespace)\r\n                    .withMetricName(metricName)\r\n                    .withDimensions(new Dimension().withName(dimensionName).withValue(dimensionValue))\r\n                    .withStartTime(startTime)\r\n                    .withEndTime(endTime)\r\n                    .withPeriod(period)\r\n                    .withStatistics(statistic);\r\n    \r\n                GetMetricStatisticsResult result = cloudWatchClient.getMetricStatistics(request);\r\n                System.out.println(&quot;Result for &quot; + dimensionValue + &quot; is &quot; + result.toString());\r\n                return result.getDatapoints().isEmpty() ? 0 : result.getDatapoints().get(0).getAverage();\r\n            } catch (Exception e) {\r\n                System.out.println(&quot;Error in Elasticache&quot; + e.getMessage());\r\n                return 0;\r\n            }\r\n        }\r\n    \r\n    \r\n        private int calculatePeriod(Date startTime, Date endTime) {\r\n            long diffInSeconds = (endTime.getTime() - startTime.getTime()) / 1000;\r\n            int periods = (int) Math.ceil(diffInSeconds / 1800);\r\n    \r\n            return (periods &gt; 0) ? 1800 : 60;\r\n        }\r\n    }\r\n\r\nI am using `System.out.println(&quot;SwapUsage for &quot; + nodeName + &quot; is &quot; + String.valueOf(SwapUsage));` for troubleshooting. I am not sure where to look next. Any ideas/suggestions?\r\n\r\n\r\nEDIT: So I tested this some more and I added this line `System.out.println(&quot;Result for &quot; + dimensionValue + &quot; is &quot; + result.toString());` inside `getMetricValue`. The result I am getting is `Result for scrsquy-001 is {Label: EngineCPUUtilization,Datapoints: []}`. Why is it empty and how can I get this to work?","title":"Can&#39;t get AWS cloudwatch metrics for Elasticache in Java","body":"<p>I am trying to retrieve some Elasticache metrics from CloudWatch using Java SDK 1.x. I have several classes for multiple services, and they all work, except for Elasticache. This class is passed a list of Elasticache nodes, along with start and end times. For each node, I'm attempting to retrieve some metrics from Elasticache with a 30-minute period. However, for some reason, I keep getting values of 0.0 for each metric. I have confirmed that the metrics are not empty in the AWS console. Here's my code:</p>\n<pre><code>public class ElastiCacheCWMetricsRetriever {\n    private final AmazonCloudWatch cloudWatchClient;\n\n    public ElastiCacheCWMetricsRetriever(AmazonCloudWatch cloudWatchClient) {\n        this.cloudWatchClient = cloudWatchClient;\n    }\n\n\n    public Map&lt;String, Map&lt;String, Object&gt;&gt; getElastiCacheMetrics(List&lt;String&gt; nodeNames, \n        String startTimeStr, String endTimeStr) {\n        Map&lt;String, Map&lt;String, Object&gt;&gt; elastiCacheMetricsMap = new HashMap&lt;&gt;();\n\n        try {\n            SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd'T'HH:mm:ss'Z'&quot;);\n            Date startTime = dateFormat.parse(startTimeStr);\n            Date endTime = dateFormat.parse(endTimeStr);\n\n            for (String nodeName : nodeNames) {\n                Map&lt;String, Object&gt; nodeMetrics = new HashMap&lt;&gt;();\n\n                nodeMetrics.put(&quot;SwapUsage&quot;, getAverageMetricValue(&quot;AWS/ElastiCache&quot;, \n                    &quot;SwapUsage&quot;, &quot;CacheNodeId&quot;, nodeName, startTime, endTime));\n                Double SwapUsage = getSumMetricValue(&quot;AWS/ElastiCache&quot;, &quot;SwapUsage&quot;, \n                    &quot;CacheNodeId&quot;, nodeName, startTime, endTime);\n                System.out.println(&quot;SwapUsage for &quot; + nodeName + &quot; is &quot; + \n                    String.valueOf(SwapUsage));\n\n                nodeMetrics.put(&quot;CurrentConnections&quot;, getSumMetricValue(&quot;AWS/ElastiCache&quot;, \n                    &quot;CurrConnections&quot;, &quot;CacheNodeId&quot;, nodeName, startTime, endTime));\n\n                nodeMetrics.put(&quot;DatabaseMemoryUsagePercentage&quot;, \n                getAverageMetricValue(&quot;AWS/ElastiCache&quot;, &quot;DatabaseMemoryUsagePercentage&quot;, \n                    &quot;CacheNodeId&quot;, nodeName, startTime, endTime) * 100.0);\n\n                nodeMetrics.put(&quot;EngineCPUUtilization&quot;, \n                     getAverageMetricValue(&quot;AWS/ElastiCache&quot;, &quot;EngineCPUUtilization&quot;, \n                     &quot;CacheNodeId&quot;, nodeName, startTime, endTime) * 100.0);\n\n                Double EngineCPUUtil = getAverageMetricValue(&quot;AWS/ElastiCache&quot;, \n                    &quot;EngineCPUUtilization&quot;, &quot;CacheNodeId&quot;, nodeName, startTime, endTime) * 100.0;\n                System.out.println(&quot;EngineCPUUtilization for &quot; + nodeName + &quot; is &quot; + String.valueOf(EngineCPUUtil));\n                elastiCacheMetricsMap.put(nodeName, nodeMetrics);\n            }\n        } catch (Exception e) {\n            System.out.println(&quot;Error in Elasticache&quot; + e.getMessage());\n        }   \n        return elastiCacheMetricsMap;\n    }\n\n     private double getAverageMetricValue(String namespace, String metricName, String \n         dimensionName, String dimensionValue, Date startTime, Date endTime) {\n         int period = calculatePeriod(startTime, endTime);\n         return getMetricValue(namespace, metricName, dimensionName, dimensionValue, startTime, endTime, period, &quot;Average&quot;);\n     }\n\n    private double getSumMetricValue(String namespace, String metricName, String dimensionName, String dimensionValue, Date startTime, Date endTime) {\n        int period = calculatePeriod(startTime, endTime);\n        return getMetricValue(namespace, metricName, dimensionName, dimensionValue, startTime, endTime, period, &quot;Sum&quot;);\n    }\n\n    private double getMetricValue(String namespace, String metricName, String dimensionName, String dimensionValue, Date startTime, Date endTime, int period, String statistic) {\n        try {\n            GetMetricStatisticsRequest request = new GetMetricStatisticsRequest()\n                .withNamespace(namespace)\n                .withMetricName(metricName)\n                .withDimensions(new Dimension().withName(dimensionName).withValue(dimensionValue))\n                .withStartTime(startTime)\n                .withEndTime(endTime)\n                .withPeriod(period)\n                .withStatistics(statistic);\n\n            GetMetricStatisticsResult result = cloudWatchClient.getMetricStatistics(request);\n            System.out.println(&quot;Result for &quot; + dimensionValue + &quot; is &quot; + result.toString());\n            return result.getDatapoints().isEmpty() ? 0 : result.getDatapoints().get(0).getAverage();\n        } catch (Exception e) {\n            System.out.println(&quot;Error in Elasticache&quot; + e.getMessage());\n            return 0;\n        }\n    }\n\n\n    private int calculatePeriod(Date startTime, Date endTime) {\n        long diffInSeconds = (endTime.getTime() - startTime.getTime()) / 1000;\n        int periods = (int) Math.ceil(diffInSeconds / 1800);\n\n        return (periods &gt; 0) ? 1800 : 60;\n    }\n}\n</code></pre>\n<p>I am using <code>System.out.println(&quot;SwapUsage for &quot; + nodeName + &quot; is &quot; + String.valueOf(SwapUsage));</code> for troubleshooting. I am not sure where to look next. Any ideas/suggestions?</p>\n<p>EDIT: So I tested this some more and I added this line <code>System.out.println(&quot;Result for &quot; + dimensionValue + &quot; is &quot; + result.toString());</code> inside <code>getMetricValue</code>. The result I am getting is <code>Result for scrsquy-001 is {Label: EngineCPUUtilization,Datapoints: []}</code>. Why is it empty and how can I get this to work?</p>\n"},{"tags":["java","android-studio"],"comments":[{"owner":{"account_id":6410870,"reputation":1740,"user_id":4970679,"display_name":"ahuemmer"},"score":0,"creation_date":1698064391,"post_id":77343782,"comment_id":136353785,"body_markdown":"Please take a look at [how to ask](https://stackoverflow.com/help/how-to-ask) and ask a concrete question.","body":"Please take a look at <a href=\"https://stackoverflow.com/help/how-to-ask\">how to ask</a> and ask a concrete question."}],"owner":{"account_id":29733358,"reputation":1,"user_id":22787439,"display_name":"refer"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698050572,"creation_date":1698050478,"question_id":77343782,"body_markdown":"I&#39;m contributing to open source library and got lint error &quot;Do not treat position as fixed; only use immediately and call myHolder.getAdapterPosition() to look it up later&quot; for this code:\r\n\r\n  @Override\r\n    public void onBindViewHolder(@NonNull MyHolder myHolder, int i) {\r\n\r\n\r\n\r\n        myHolder.recipeTitle.setText(mData.get(i).getRecipeName());\r\n        myHolder.img_recipe_thumbnail.setImageResource(mData.get(i).getThumbnail());\r\n        myHolder.cardView.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(mContext,RecipeActivity.class);\r\n\r\n                intent.putExtra(&quot;RecipeName&quot;,mData.get(i).getRecipeName());\r\n                intent.putExtra(&quot;RecipeIngredients&quot;,mData.get(i).getRecipeIngredients());\r\n                intent.putExtra(&quot;RecipeMethodTitle&quot;,mData.get(i).getRecipeMethodTitle());\r\n                intent.putExtra(&quot;Recipe&quot;,mData.get(i).getRecipe());\r\n                intent.putExtra(&quot;Thumbnail&quot;,mData.get(i).getThumbnail());\r\n\r\n                mContext.startActivity(intent);\r\n            }\r\n        });\r\n    }","title":"Lint error &quot;Do not treat position as fixed; only use immediately and call myHolder.getAdapterPosition() to look it up later&quot;","body":"<p>I'm contributing to open source library and got lint error &quot;Do not treat position as fixed; only use immediately and call myHolder.getAdapterPosition() to look it up later&quot; for this code:</p>\n<p>@Override\npublic void onBindViewHolder(@NonNull MyHolder myHolder, int i) {</p>\n<pre><code>    myHolder.recipeTitle.setText(mData.get(i).getRecipeName());\n    myHolder.img_recipe_thumbnail.setImageResource(mData.get(i).getThumbnail());\n    myHolder.cardView.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n            Intent intent = new Intent(mContext,RecipeActivity.class);\n\n            intent.putExtra(&quot;RecipeName&quot;,mData.get(i).getRecipeName());\n            intent.putExtra(&quot;RecipeIngredients&quot;,mData.get(i).getRecipeIngredients());\n            intent.putExtra(&quot;RecipeMethodTitle&quot;,mData.get(i).getRecipeMethodTitle());\n            intent.putExtra(&quot;Recipe&quot;,mData.get(i).getRecipe());\n            intent.putExtra(&quot;Thumbnail&quot;,mData.get(i).getThumbnail());\n\n            mContext.startActivity(intent);\n        }\n    });\n}\n</code></pre>\n"},{"tags":["java","android","camera","surfaceview","android-camera2"],"owner":{"account_id":11226516,"reputation":1868,"user_id":8235983,"accept_rate":81,"display_name":"Peter"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698050563,"creation_date":1698050563,"question_id":77343789,"body_markdown":"I created a custom surface view for camera, to take a picture when button is clicked but it always reset to `onCaptureFailed`\r\n\r\nHere is my full code https://codeshare.io/VZAAm3\r\n\r\n    public void captureImage() {\r\n            // Capture an image when the custom button is clicked\r\n            if (cameraDevice != null) {\r\n                try {\r\n                    int width = previewSize.getWidth();\r\n                    int height = previewSize.getHeight();\r\n                    CameraCharacteristics characteristics = cameraManager.getCameraCharacteristics(cameraDevice.getId());\r\n                    StreamConfigurationMap map = characteristics.get(CameraCharacteristics.SCALER_STREAM_CONFIGURATION_MAP);\r\n                    if(map != null) {\r\n                        Size[] outputSizes = map.getOutputSizes(ImageFormat.JPEG);\r\n                        if (outputSizes != null &amp;&amp; outputSizes.length &gt; 0) {\r\n                            width = outputSizes[0].getWidth();\r\n                            height = outputSizes[0].getHeight();\r\n                        }\r\n                    }\r\n    \r\n                    try (ImageReader cameraImageReader = ImageReader.newInstance(width, height, ImageFormat.JPEG, 1)) {\r\n                      List&lt;Surface&gt; outputSurface = new ArrayList&lt;&gt;(2);\r\n                      outputSurface.add(cameraImageReader.getSurface());\r\n                      outputSurface.add(new Surface(cameraPreview.getSurfaceTexture()));\r\n    \r\n                        final CaptureRequest.Builder captureBuilder = cameraDevice.createCaptureRequest(CameraDevice.TEMPLATE_STILL_CAPTURE);\r\n                        captureBuilder.addTarget(cameraImageReader.getSurface());\r\n                        captureBuilder.set(CaptureRequest.CONTROL_MODE, CameraMetadata.CONTROL_MODE_AUTO);\r\n    \r\n                        //Check orientation base on device\r\n                        int rotation = getWindowManager().getDefaultDisplay().getRotation();\r\n                        captureBuilder.set(CaptureRequest.JPEG_ORIENTATION, ORIENTATIONS.get(rotation));\r\n    \r\n                        cameraDevice.createCaptureSession(outputSurface, new CameraCaptureSession.StateCallback() {\r\n                            @Override\r\n                            public void onConfigured(@NonNull CameraCaptureSession session) {\r\n                                try {\r\n                                    session.capture(captureBuilder.build(), new CameraCaptureSession.CaptureCallback() {\r\n                                        @Override\r\n                                        public void onCaptureCompleted(@NonNull CameraCaptureSession session, @NonNull CaptureRequest request, @NonNull TotalCaptureResult result) {\r\n                                            super.onCaptureCompleted(session, request, result);\r\n                                            cameraImageReader.setOnImageAvailableListener(imageReaderListener, null);\r\n                                            Log.e(&quot;Capture&quot;, &quot;Captured&quot;);\r\n                                        }\r\n    \r\n                                        @Override\r\n                                        public void onCaptureFailed(@NonNull CameraCaptureSession session, @NonNull CaptureRequest request, @NonNull CaptureFailure failure) {\r\n                                            super.onCaptureFailed(session, request, failure);\r\n                                            int reason = failure.getReason();\r\n                                            int sequenceId = failure.getSequenceId();\r\n                                            Log.e(&quot;Capture&quot;, &quot;Capture failed with reason: &quot; + reason + &quot;, sequenceId: &quot; + sequenceId);\r\n                                        }\r\n                                    }, null);\r\n                                } catch (CameraAccessException e) {\r\n                                    e.printStackTrace();\r\n                                }\r\n                            }\r\n    \r\n                            @Override\r\n                            public void onConfigureFailed(@NonNull CameraCaptureSession cameraCaptureSession) {\r\n    \r\n                            }\r\n                        }, null);\r\n                    } catch (CameraAccessException e) {\r\n                        // Handle camera access exception\r\n                    }\r\n                } catch (CameraAccessException e) {\r\n                    // Handle camera access exception\r\n                }\r\n            }\r\n        }","title":"Android custom camera surfaceview always fail to take picture","body":"<p>I created a custom surface view for camera, to take a picture when button is clicked but it always reset to <code>onCaptureFailed</code></p>\n<p>Here is my full code <a href=\"https://codeshare.io/VZAAm3\" rel=\"nofollow noreferrer\">https://codeshare.io/VZAAm3</a></p>\n<pre><code>public void captureImage() {\n        // Capture an image when the custom button is clicked\n        if (cameraDevice != null) {\n            try {\n                int width = previewSize.getWidth();\n                int height = previewSize.getHeight();\n                CameraCharacteristics characteristics = cameraManager.getCameraCharacteristics(cameraDevice.getId());\n                StreamConfigurationMap map = characteristics.get(CameraCharacteristics.SCALER_STREAM_CONFIGURATION_MAP);\n                if(map != null) {\n                    Size[] outputSizes = map.getOutputSizes(ImageFormat.JPEG);\n                    if (outputSizes != null &amp;&amp; outputSizes.length &gt; 0) {\n                        width = outputSizes[0].getWidth();\n                        height = outputSizes[0].getHeight();\n                    }\n                }\n\n                try (ImageReader cameraImageReader = ImageReader.newInstance(width, height, ImageFormat.JPEG, 1)) {\n                  List&lt;Surface&gt; outputSurface = new ArrayList&lt;&gt;(2);\n                  outputSurface.add(cameraImageReader.getSurface());\n                  outputSurface.add(new Surface(cameraPreview.getSurfaceTexture()));\n\n                    final CaptureRequest.Builder captureBuilder = cameraDevice.createCaptureRequest(CameraDevice.TEMPLATE_STILL_CAPTURE);\n                    captureBuilder.addTarget(cameraImageReader.getSurface());\n                    captureBuilder.set(CaptureRequest.CONTROL_MODE, CameraMetadata.CONTROL_MODE_AUTO);\n\n                    //Check orientation base on device\n                    int rotation = getWindowManager().getDefaultDisplay().getRotation();\n                    captureBuilder.set(CaptureRequest.JPEG_ORIENTATION, ORIENTATIONS.get(rotation));\n\n                    cameraDevice.createCaptureSession(outputSurface, new CameraCaptureSession.StateCallback() {\n                        @Override\n                        public void onConfigured(@NonNull CameraCaptureSession session) {\n                            try {\n                                session.capture(captureBuilder.build(), new CameraCaptureSession.CaptureCallback() {\n                                    @Override\n                                    public void onCaptureCompleted(@NonNull CameraCaptureSession session, @NonNull CaptureRequest request, @NonNull TotalCaptureResult result) {\n                                        super.onCaptureCompleted(session, request, result);\n                                        cameraImageReader.setOnImageAvailableListener(imageReaderListener, null);\n                                        Log.e(&quot;Capture&quot;, &quot;Captured&quot;);\n                                    }\n\n                                    @Override\n                                    public void onCaptureFailed(@NonNull CameraCaptureSession session, @NonNull CaptureRequest request, @NonNull CaptureFailure failure) {\n                                        super.onCaptureFailed(session, request, failure);\n                                        int reason = failure.getReason();\n                                        int sequenceId = failure.getSequenceId();\n                                        Log.e(&quot;Capture&quot;, &quot;Capture failed with reason: &quot; + reason + &quot;, sequenceId: &quot; + sequenceId);\n                                    }\n                                }, null);\n                            } catch (CameraAccessException e) {\n                                e.printStackTrace();\n                            }\n                        }\n\n                        @Override\n                        public void onConfigureFailed(@NonNull CameraCaptureSession cameraCaptureSession) {\n\n                        }\n                    }, null);\n                } catch (CameraAccessException e) {\n                    // Handle camera access exception\n                }\n            } catch (CameraAccessException e) {\n                // Handle camera access exception\n            }\n        }\n    }\n</code></pre>\n"},{"tags":["java","batch-file","runtime.exec"],"answers":[{"tags":[],"owner":{"account_id":1273,"reputation":187668,"user_id":1694,"accept_rate":95,"display_name":"Eli Courtwright"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1236278471,"creation_date":1236277710,"answer_id":615971,"question_id":615948,"body_markdown":"The executable used to run batch scripts is `cmd.exe` which uses the `/c` flag to specify the name of the batch file to run:\r\n\r\n    Runtime.getRuntime().exec(new String[]{&quot;cmd.exe&quot;, &quot;/c&quot;, &quot;build.bat&quot;});\r\n\r\nTheoretically you should also be able to run Scons in this manner, though I haven&#39;t tested this:\r\n\r\n    Runtime.getRuntime().exec(new String[]{&quot;scons&quot;, &quot;-Q&quot;, &quot;implicit-deps-changed&quot;, &quot;build\\file_load_type&quot;, &quot;export\\file_load_type&quot;});\r\n\r\nEDIT: Amara, you say that this isn&#39;t working.  The error you listed is the error you&#39;d get when running Java from a Cygwin terminal on a Windows box; is this what you&#39;re doing?  The problem with that is that Windows and Cygwin have different paths, so the Windows version of Java won&#39;t find the scons executable on your Cygwin path.  I can explain further if this turns out to be your problem.","title":"How do I run a batch file from my Java Application?","body":"<p>The executable used to run batch scripts is <code>cmd.exe</code> which uses the <code>/c</code> flag to specify the name of the batch file to run:</p>\n\n<pre><code>Runtime.getRuntime().exec(new String[]{\"cmd.exe\", \"/c\", \"build.bat\"});\n</code></pre>\n\n<p>Theoretically you should also be able to run Scons in this manner, though I haven't tested this:</p>\n\n<pre><code>Runtime.getRuntime().exec(new String[]{\"scons\", \"-Q\", \"implicit-deps-changed\", \"build\\file_load_type\", \"export\\file_load_type\"});\n</code></pre>\n\n<p>EDIT: Amara, you say that this isn't working.  The error you listed is the error you'd get when running Java from a Cygwin terminal on a Windows box; is this what you're doing?  The problem with that is that Windows and Cygwin have different paths, so the Windows version of Java won't find the scons executable on your Cygwin path.  I can explain further if this turns out to be your problem.</p>\n"},{"tags":[],"owner":{"account_id":15832,"reputation":7189,"user_id":33857,"accept_rate":84,"display_name":"Paulo Guedes"},"down_vote_count":1,"up_vote_count":192,"is_accepted":true,"score":191,"last_activity_date":1502146385,"creation_date":1236278147,"answer_id":616014,"question_id":615948,"body_markdown":"Batch files are not an executable.  They need an application to run them (i.e. cmd).\r\n\r\nOn UNIX, the script file has shebang (#!) at the start of a file to specify the program that executes it.  Double-clicking in Windows is performed by Windows Explorer.  `CreateProcess` does not know anything about that.\r\n\r\n    Runtime.\r\n       getRuntime().\r\n       exec(&quot;cmd /c start \\&quot;\\&quot; build.bat&quot;);\r\n\r\nNote: With the `start \\&quot;\\&quot;` command, a separate command window will be opened with a blank title and any output from the batch file will be displayed there.  It should also work with just `cmd /c build.bat&quot;, in which case the output can be read from the sub-process in Java if desired.","title":"How do I run a batch file from my Java Application?","body":"<p>Batch files are not an executable.  They need an application to run them (i.e. cmd).</p>\n\n<p>On UNIX, the script file has shebang (#!) at the start of a file to specify the program that executes it.  Double-clicking in Windows is performed by Windows Explorer.  <code>CreateProcess</code> does not know anything about that.</p>\n\n<pre><code>Runtime.\n   getRuntime().\n   exec(\"cmd /c start \\\"\\\" build.bat\");\n</code></pre>\n\n<p>Note: With the <code>start \\\"\\\"</code> command, a separate command window will be opened with a blank title and any output from the batch file will be displayed there.  It should also work with just `cmd /c build.bat\", in which case the output can be read from the sub-process in Java if desired.</p>\n"},{"tags":[],"owner":{"account_id":232,"reputation":29734,"user_id":287,"accept_rate":91,"display_name":"basszero"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1236278340,"creation_date":1236278340,"answer_id":616028,"question_id":615948,"body_markdown":"[ProcessBuilder][1] is the Java 5/6 way to run external processes.\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/lang/ProcessBuilder.html","title":"How do I run a batch file from my Java Application?","body":"<p><a href=\"http://java.sun.com/javase/6/docs/api/java/lang/ProcessBuilder.html\" rel=\"noreferrer\">ProcessBuilder</a> is the Java 5/6 way to run external processes.</p>\n"},{"tags":[],"owner":{"account_id":1008666,"reputation":201,"user_id":1021730,"display_name":"Isha"},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1321286852,"creation_date":1320054985,"answer_id":7952126,"question_id":615948,"body_markdown":"    Runtime runtime = Runtime.getRuntime();\r\n    try {\r\n        Process p1 = runtime.exec(&quot;cmd /c start D:\\\\temp\\\\a.bat&quot;);\r\n        InputStream is = p1.getInputStream();\r\n        int i = 0;\r\n        while( (i = is.read() ) != -1) {\r\n            System.out.print((char)i);\r\n        }\r\n    } catch(IOException ioException) {\r\n        System.out.println(ioException.getMessage() );\r\n    }","title":"How do I run a batch file from my Java Application?","body":"<pre><code>Runtime runtime = Runtime.getRuntime();\ntry {\n    Process p1 = runtime.exec(\"cmd /c start D:\\\\temp\\\\a.bat\");\n    InputStream is = p1.getInputStream();\n    int i = 0;\n    while( (i = is.read() ) != -1) {\n        System.out.print((char)i);\n    }\n} catch(IOException ioException) {\n    System.out.println(ioException.getMessage() );\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1063592,"reputation":231,"user_id":1064687,"display_name":"Juan Carlos Alp&#237;zar"},"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1322173372,"creation_date":1322170843,"answer_id":8262728,"question_id":615948,"body_markdown":"Sometimes the thread execution process time is higher than JVM thread waiting process time, it use to happen when the process you&#39;re invoking takes some time to be processed, use the waitFor() command as follows:\r\n\r\n    try{\t\r\n\t\tProcess p = Runtime.getRuntime().exec(&quot;file location here, don&#39;t forget using / instead of \\\\ to make it interoperable&quot;);\r\n\t\tp.waitFor();\r\n\t\t\r\n\t}catch( IOException ex ){\r\n\t\t//Validate the case the file can&#39;t be accesed (not enought permissions)\r\n\t\t\r\n\t}catch( InterruptedException ex ){\r\n\t\t//Validate the case the process is being stopped by some external situation\t\t\r\n\t\t\r\n\t}\r\n\r\nThis way the JVM will stop until the process you&#39;re invoking is done before it continue with the thread execution stack.","title":"How do I run a batch file from my Java Application?","body":"<p>Sometimes the thread execution process time is higher than JVM thread waiting process time, it use to happen when the process you're invoking takes some time to be processed, use the waitFor() command as follows:</p>\n\n<pre><code>try{    \n    Process p = Runtime.getRuntime().exec(\"file location here, don't forget using / instead of \\\\ to make it interoperable\");\n    p.waitFor();\n\n}catch( IOException ex ){\n    //Validate the case the file can't be accesed (not enought permissions)\n\n}catch( InterruptedException ex ){\n    //Validate the case the process is being stopped by some external situation     \n\n}\n</code></pre>\n\n<p>This way the JVM will stop until the process you're invoking is done before it continue with the thread execution stack.</p>\n"},{"tags":[],"owner":{"account_id":1925156,"reputation":141,"user_id":1735800,"display_name":"Abbia"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1349893346,"creation_date":1349892729,"answer_id":12825694,"question_id":615948,"body_markdown":"To run batch files using java if that&#39;s you&#39;re talking about...\r\n\r\n    String path=&quot;cmd /c start d:\\\\sample\\\\sample.bat&quot;;\r\n    Runtime rn=Runtime.getRuntime();\r\n    Process pr=rn.exec(path);`\r\n\r\nThis should do it.","title":"How do I run a batch file from my Java Application?","body":"<p>To run batch files using java if that's you're talking about...</p>\n\n<pre><code>String path=\"cmd /c start d:\\\\sample\\\\sample.bat\";\nRuntime rn=Runtime.getRuntime();\nProcess pr=rn.exec(path);`\n</code></pre>\n\n<p>This should do it.</p>\n"},{"tags":[],"owner":{"account_id":2894090,"reputation":51,"user_id":2482254,"display_name":"Suren"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1391465567,"creation_date":1371126872,"answer_id":17087187,"question_id":615948,"body_markdown":"&lt;!-- language: java --&gt;\r\n\r\n    Process p = Runtime.getRuntime().exec( \r\n      new String[]{&quot;cmd&quot;, &quot;/C&quot;, &quot;orgreg.bat&quot;},\r\n      null, \r\n      new File(&quot;D://TEST//home//libs//&quot;));\r\n\r\ntested with jdk1.5 and jdk1.6\r\n\r\nThis was working fine for me, hope it helps others too.\r\nto get this i have struggled more days. :(","title":"How do I run a batch file from my Java Application?","body":"<pre class=\"lang-java prettyprint-override\"><code>Process p = Runtime.getRuntime().exec( \n  new String[]{\"cmd\", \"/C\", \"orgreg.bat\"},\n  null, \n  new File(\"D://TEST//home//libs//\"));\n</code></pre>\n\n<p>tested with jdk1.5 and jdk1.6</p>\n\n<p>This was working fine for me, hope it helps others too.\nto get this i have struggled more days. :(</p>\n"},{"tags":[],"owner":{"account_id":5921080,"reputation":11,"user_id":4658396,"display_name":"bharath"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1426078465,"creation_date":1426076817,"answer_id":28986612,"question_id":615948,"body_markdown":"The following is working fine:\r\n\r\n    String path=&quot;cmd /c start d:\\\\sample\\\\sample.bat&quot;;\r\n    Runtime rn=Runtime.getRuntime();\r\n    Process pr=rn.exec(path);\r\n","title":"How do I run a batch file from my Java Application?","body":"<p>The following is working fine:</p>\n\n<pre><code>String path=\"cmd /c start d:\\\\sample\\\\sample.bat\";\nRuntime rn=Runtime.getRuntime();\nProcess pr=rn.exec(path);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7628857,"reputation":309,"user_id":5784553,"accept_rate":62,"display_name":"Ben Jost"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1465422455,"creation_date":1465421580,"answer_id":37713311,"question_id":615948,"body_markdown":"I had the same issue. However sometimes CMD failed to run my files.\r\nThat&#39;s why i create a temp.bat on my desktop, next this temp.bat is going to run my file, and next the temp file is going to be deleted.\r\n\r\nI know this is a bigger code, however worked for me in 100% when even Runtime.getRuntime().exec() failed.\r\n\r\n    // creating a string for the Userprofile (either C:\\Admin or whatever)\r\n    String userprofile = System.getenv(&quot;USERPROFILE&quot;);\r\n    \r\n    BufferedWriter writer = null;\r\n            try {\r\n                //create a temporary file\r\n                File logFile = new File(userprofile+&quot;\\\\Desktop\\\\temp.bat&quot;);   \r\n                writer = new BufferedWriter(new FileWriter(logFile));\r\n\r\n                // Here comes the lines for the batch file!\r\n                // First line is @echo off\r\n                // Next line is the directory of our file\r\n                // Then we open our file in that directory and exit the cmd\r\n                // To seperate each line, please use \\r\\n\r\n                writer.write(&quot;cd %ProgramFiles(x86)%\\\\SOME_FOLDER \\r\\nstart xyz.bat \\r\\nexit&quot;);\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            } finally {\r\n                try {\r\n                    // Close the writer regardless of what happens...\r\n                    writer.close();\r\n                } catch (Exception e) {\r\n                }\r\n            \r\n            }\r\n            \r\n            // running our temp.bat file\r\n            Runtime rt = Runtime.getRuntime();\r\n            try {\r\n                \r\n                Process pr = rt.exec(&quot;cmd /c start \\&quot;\\&quot; \\&quot;&quot;+userprofile+&quot;\\\\Desktop\\\\temp.bat&quot; );\r\n                pr.getOutputStream().close();\r\n            } catch (IOException ex) {\r\n                Logger.getLogger(MainFrame.class.getName()).log(Level.SEVERE, null, ex);\r\n    \r\n            }\r\n            // deleting our temp file\r\n            File databl = new File(userprofile+&quot;\\\\Desktop\\\\temp.bat&quot;);\r\n            databl.delete();","title":"How do I run a batch file from my Java Application?","body":"<p>I had the same issue. However sometimes CMD failed to run my files.\nThat's why i create a temp.bat on my desktop, next this temp.bat is going to run my file, and next the temp file is going to be deleted.</p>\n\n<p>I know this is a bigger code, however worked for me in 100% when even Runtime.getRuntime().exec() failed.</p>\n\n<pre><code>// creating a string for the Userprofile (either C:\\Admin or whatever)\nString userprofile = System.getenv(\"USERPROFILE\");\n\nBufferedWriter writer = null;\n        try {\n            //create a temporary file\n            File logFile = new File(userprofile+\"\\\\Desktop\\\\temp.bat\");   \n            writer = new BufferedWriter(new FileWriter(logFile));\n\n            // Here comes the lines for the batch file!\n            // First line is @echo off\n            // Next line is the directory of our file\n            // Then we open our file in that directory and exit the cmd\n            // To seperate each line, please use \\r\\n\n            writer.write(\"cd %ProgramFiles(x86)%\\\\SOME_FOLDER \\r\\nstart xyz.bat \\r\\nexit\");\n        } catch (Exception e) {\n            e.printStackTrace();\n        } finally {\n            try {\n                // Close the writer regardless of what happens...\n                writer.close();\n            } catch (Exception e) {\n            }\n\n        }\n\n        // running our temp.bat file\n        Runtime rt = Runtime.getRuntime();\n        try {\n\n            Process pr = rt.exec(\"cmd /c start \\\"\\\" \\\"\"+userprofile+\"\\\\Desktop\\\\temp.bat\" );\n            pr.getOutputStream().close();\n        } catch (IOException ex) {\n            Logger.getLogger(MainFrame.class.getName()).log(Level.SEVERE, null, ex);\n\n        }\n        // deleting our temp file\n        File databl = new File(userprofile+\"\\\\Desktop\\\\temp.bat\");\n        databl.delete();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10155336,"reputation":329,"user_id":7500593,"display_name":"رامي عبد الله"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1515863063,"creation_date":1515863063,"answer_id":48242200,"question_id":615948,"body_markdown":"This code will execute two commands.bat that exist in the path C:/folders/folder.\r\n\r\n    Runtime.getRuntime().exec(&quot;cd C:/folders/folder &amp; call commands.bat&quot;);","title":"How do I run a batch file from my Java Application?","body":"<p>This code will execute two commands.bat that exist in the path C:/folders/folder.</p>\n\n<pre><code>Runtime.getRuntime().exec(\"cd C:/folders/folder &amp; call commands.bat\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":178169,"reputation":15302,"user_id":409958,"accept_rate":86,"display_name":"rolling_codes"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1521050924,"creation_date":1521050924,"answer_id":49284911,"question_id":615948,"body_markdown":"To expand on [@Isha&#39;s anwser](https://stackoverflow.com/a/7952126/409958) you could just do the following to get the returned output (post-facto not in rea-ltime) of the script that was run:\r\n\r\n    try {\r\n        Process process = Runtime.getRuntime().exec(&quot;cmd /c start D:\\\\temp\\\\a.bat&quot;);\r\n        System.out.println(process.getText());\r\n    } catch(IOException e) {\r\n        e.printStackTrace();\r\n    }","title":"How do I run a batch file from my Java Application?","body":"<p>To expand on <a href=\"https://stackoverflow.com/a/7952126/409958\">@Isha's anwser</a> you could just do the following to get the returned output (post-facto not in rea-ltime) of the script that was run:</p>\n\n<pre><code>try {\n    Process process = Runtime.getRuntime().exec(\"cmd /c start D:\\\\temp\\\\a.bat\");\n    System.out.println(process.getText());\n} catch(IOException e) {\n    e.printStackTrace();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19883552,"reputation":33,"user_id":14671518,"display_name":"taing hong"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1616606502,"creation_date":1616606502,"answer_id":66786144,"question_id":615948,"body_markdown":"    import java.io.IOException;\r\n    \r\n    public class TestBatch {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\t{\r\n    \t\t\ttry {\r\n    \t\t        String[] command = {&quot;cmd.exe&quot;, &quot;/C&quot;, &quot;Start&quot;, &quot;C:\\\\temp\\\\runtest.bat&quot;};\r\n    \t\t        Process p =  Runtime.getRuntime().exec(command);           \r\n    \t\t    } catch (IOException ex) {\r\n    \t\t    }\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    }","title":"How do I run a batch file from my Java Application?","body":"<pre><code>import java.io.IOException;\n\npublic class TestBatch {\n\n    public static void main(String[] args) {\n        {\n            try {\n                String[] command = {&quot;cmd.exe&quot;, &quot;/C&quot;, &quot;Start&quot;, &quot;C:\\\\temp\\\\runtest.bat&quot;};\n                Process p =  Runtime.getRuntime().exec(command);           \n            } catch (IOException ex) {\n            }\n        }\n\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2985164,"reputation":5188,"user_id":2534191,"accept_rate":25,"display_name":"Yuriy N."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698049662,"creation_date":1698049662,"answer_id":77343688,"question_id":615948,"body_markdown":"When you execute your batch file from Java (or, I guess, any other language) it runs from `Windows/System32/` directory where  `cmd.exe` is. \r\n\r\nTo make it run from its own directory add `cd /D &quot;%~dp0&quot;` to the beginning of your batch file. \r\n\r\nLike this: \r\n\r\n    cd /D &quot;%~dp0&quot;\r\n    ffmpeg -f concat -safe 0 -i list.txt -c copy output.mp3","title":"How do I run a batch file from my Java Application?","body":"<p>When you execute your batch file from Java (or, I guess, any other language) it runs from <code>Windows/System32/</code> directory where  <code>cmd.exe</code> is.</p>\n<p>To make it run from its own directory add <code>cd /D &quot;%~dp0&quot;</code> to the beginning of your batch file.</p>\n<p>Like this:</p>\n<pre><code>cd /D &quot;%~dp0&quot;\nffmpeg -f concat -safe 0 -i list.txt -c copy output.mp3\n</code></pre>\n"}],"owner":{"account_id":17059,"reputation":14009,"user_id":37804,"accept_rate":94,"display_name":"Amara"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":333024,"favorite_count":0,"down_vote_count":0,"up_vote_count":120,"accepted_answer_id":616014,"answer_count":13,"score":120,"last_activity_date":1698049662,"creation_date":1236277465,"question_id":615948,"body_markdown":"In my Java application, I want to run a batch file that calls &quot;`scons -Q implicit-deps-changed build\\file_load_type export\\file_load_type`&quot;\r\n\r\nIt seems that I can&#39;t even get my batch file to execute. I&#39;m out of ideas. \r\n\r\nThis is what I have in Java:\r\n\r\n    Runtime.\r\n       getRuntime().\r\n       exec(&quot;build.bat&quot;, null, new File(&quot;.&quot;));\r\n\r\nPreviously, I had a Python Sconscript file that I wanted to run but since that didn&#39;t work I decided I would call the script via a batch file but that method has not been successful as of yet. ","title":"How do I run a batch file from my Java Application?","body":"<p>In my Java application, I want to run a batch file that calls \"<code>scons -Q implicit-deps-changed build\\file_load_type export\\file_load_type</code>\"</p>\n\n<p>It seems that I can't even get my batch file to execute. I'm out of ideas. </p>\n\n<p>This is what I have in Java:</p>\n\n<pre><code>Runtime.\n   getRuntime().\n   exec(\"build.bat\", null, new File(\".\"));\n</code></pre>\n\n<p>Previously, I had a Python Sconscript file that I wanted to run but since that didn't work I decided I would call the script via a batch file but that method has not been successful as of yet. </p>\n"},{"tags":["java","java-8"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1697734511,"post_id":77325629,"comment_id":136320189,"body_markdown":"[The documentation of ConcurrentHashMap](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/ConcurrentHashMap.html) actually has an example of this.","body":"<a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/concurrent/ConcurrentHashMap.html\" rel=\"nofollow noreferrer\">The documentation of ConcurrentHashMap</a> actually has an example of this."},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":1,"creation_date":1697753249,"post_id":77325629,"comment_id":136322958,"body_markdown":"`Character key-&gt;key` is not proper lambda syntax.","body":"<code>Character key-&gt;key</code> is not proper lambda syntax."}],"answers":[{"tags":[],"owner":{"account_id":7421543,"reputation":2880,"user_id":5645656,"accept_rate":100,"display_name":"Cardinal System"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697734035,"creation_date":1697734035,"answer_id":77325688,"question_id":77325629,"body_markdown":"I would use utilize [`Collectors.toMap(Function, Function, BinaryOperator)`][1] which takes a `mergeFunction` parameter that you can use to calculate the frequencies. In order to use this approach, you need to map your int stream to a generic stream using [`IntStream.mapToObj(IntFunction)`][2].\r\n\r\nHere&#39;s an example:\r\n\r\n\tString input = &quot;aabbbcdd&quot;;\r\n\tMap&lt;Character, Integer&gt; frequencies = input.chars().mapToObj(i -&gt; (char) i)\r\n\t\t\t.collect(Collectors.toMap(c -&gt; c, c -&gt; 1, (t, u) -&gt; t + u));\r\n\tSystem.out.println(frequencies);\r\n\r\nOutput:\r\n\r\n    {a=2, b=3, c=1, d=2}\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#toMap-java.util.function.Function-java.util.function.Function-java.util.function.BinaryOperator-\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html#mapToObj-java.util.function.IntFunction-","title":"How to convert stream of character to Map&lt;Character, Integer&gt;","body":"<p>I would use utilize <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#toMap-java.util.function.Function-java.util.function.Function-java.util.function.BinaryOperator-\" rel=\"nofollow noreferrer\"><code>Collectors.toMap(Function, Function, BinaryOperator)</code></a> which takes a <code>mergeFunction</code> parameter that you can use to calculate the frequencies. In order to use this approach, you need to map your int stream to a generic stream using <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html#mapToObj-java.util.function.IntFunction-\" rel=\"nofollow noreferrer\"><code>IntStream.mapToObj(IntFunction)</code></a>.</p>\n<p>Here's an example:</p>\n<pre><code>String input = &quot;aabbbcdd&quot;;\nMap&lt;Character, Integer&gt; frequencies = input.chars().mapToObj(i -&gt; (char) i)\n        .collect(Collectors.toMap(c -&gt; c, c -&gt; 1, (t, u) -&gt; t + u));\nSystem.out.println(frequencies);\n</code></pre>\n<p>Output:</p>\n<pre><code>{a=2, b=3, c=1, d=2}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9797553,"reputation":88,"user_id":7260006,"display_name":"Thai Hoc Ha Nguyen"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697734441,"creation_date":1697734441,"answer_id":77325723,"question_id":77325629,"body_markdown":"\r\nFirst: .map() will return IntStream =&gt; should use mapToObject\r\n\r\nSecond: you are missing parentheses for: Character key-&gt;key\r\n\r\n    s.chars().mapToObj(i-&gt;(char)i).collect(Collectors.toMap((Character key)-&gt;key,(Character k)-&gt;1,(Integer ov,Integer nv)-&gt;ov+nv));\r\n\r\n","title":"How to convert stream of character to Map&lt;Character, Integer&gt;","body":"<p>First: .map() will return IntStream =&gt; should use mapToObject</p>\n<p>Second: you are missing parentheses for: Character key-&gt;key</p>\n<pre><code>s.chars().mapToObj(i-&gt;(char)i).collect(Collectors.toMap((Character key)-&gt;key,(Character k)-&gt;1,(Integer ov,Integer nv)-&gt;ov+nv));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1697735966,"creation_date":1697735966,"answer_id":77325864,"question_id":77325629,"body_markdown":"Use [Collectors.counting](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Collectors.html#counting()), and wrap it in [collectingAndThen](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Collectors.html#collectingAndThen(java.util.stream.Collector,java.util.function.Function)) to transform each Long value into an Integer value:\r\n\r\n    Map&lt;Character, Integer&gt; frequencies =\r\n        s.chars().mapToObj(c -&gt; (char) c).collect(\r\n            Collectors.groupingBy(c -&gt; c,\r\n                Collectors.collectingAndThen(\r\n                    Collectors.counting(), Long::intValue)));\r\n","title":"How to convert stream of character to Map&lt;Character, Integer&gt;","body":"<p>Use <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Collectors.html#counting()\" rel=\"nofollow noreferrer\">Collectors.counting</a>, and wrap it in <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Collectors.html#collectingAndThen(java.util.stream.Collector,java.util.function.Function)\" rel=\"nofollow noreferrer\">collectingAndThen</a> to transform each Long value into an Integer value:</p>\n<pre><code>Map&lt;Character, Integer&gt; frequencies =\n    s.chars().mapToObj(c -&gt; (char) c).collect(\n        Collectors.groupingBy(c -&gt; c,\n            Collectors.collectingAndThen(\n                Collectors.counting(), Long::intValue)));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1697798884,"creation_date":1697737024,"answer_id":77325981,"question_id":77325629,"body_markdown":"Try it like this. Use `toMap` with a constant of `1` and then add one for each occurrence of the character. \r\n```\r\nString s = &quot;zwdddaaaaacbb&quot;;\r\n        Map&lt;Character, Integer&gt; frequencies = s.chars()\r\n                .mapToObj(chr -&gt; (char) chr)\r\n                .collect(Collectors.toMap(chr -&gt; chr, a -&gt; 1, Integer::sum));\r\n        \r\nfrequencies.entrySet().forEach(System.out::println);\r\n```\r\nprints\r\n```\r\na=5\r\nb=2\r\nc=1\r\nd=3\r\nw=1\r\nz=1\r\n```\r\nNote that if you collect to a `Map&lt;Character,Long&gt;` you can do it as follows:\r\n```\r\nMap&lt;Character, Long&gt; frequencies = s.chars().mapToObj(c -&gt; (char) c)\r\n   .collect(Collectors.groupingBy(c -&gt; c, Collectors.counting()));\r\n```\r\nAnd streams are not always the most efficient solution.  Here is one that uses a loop and the `Map.merge` method.\r\n```\r\nMap&lt;Character, Integer&gt; frequencies = new HashMap&lt;&gt;();\r\nfor (char c : s.toCharArray()) {\r\n     frequencies.merge(Character.valueOf((char) c), 1, Integer::sum);\r\n}\r\nfrequencies.entrySet().forEach(System.out::println);\r\n```","title":"How to convert stream of character to Map&lt;Character, Integer&gt;","body":"<p>Try it like this. Use <code>toMap</code> with a constant of <code>1</code> and then add one for each occurrence of the character.</p>\n<pre><code>String s = &quot;zwdddaaaaacbb&quot;;\n        Map&lt;Character, Integer&gt; frequencies = s.chars()\n                .mapToObj(chr -&gt; (char) chr)\n                .collect(Collectors.toMap(chr -&gt; chr, a -&gt; 1, Integer::sum));\n        \nfrequencies.entrySet().forEach(System.out::println);\n</code></pre>\n<p>prints</p>\n<pre><code>a=5\nb=2\nc=1\nd=3\nw=1\nz=1\n</code></pre>\n<p>Note that if you collect to a <code>Map&lt;Character,Long&gt;</code> you can do it as follows:</p>\n<pre><code>Map&lt;Character, Long&gt; frequencies = s.chars().mapToObj(c -&gt; (char) c)\n   .collect(Collectors.groupingBy(c -&gt; c, Collectors.counting()));\n</code></pre>\n<p>And streams are not always the most efficient solution.  Here is one that uses a loop and the <code>Map.merge</code> method.</p>\n<pre><code>Map&lt;Character, Integer&gt; frequencies = new HashMap&lt;&gt;();\nfor (char c : s.toCharArray()) {\n     frequencies.merge(Character.valueOf((char) c), 1, Integer::sum);\n}\nfrequencies.entrySet().forEach(System.out::println);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1697737726,"creation_date":1697737726,"answer_id":77326057,"question_id":77325629,"body_markdown":"Use the _[groupingBy](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/stream/Collectors.html#groupingBy(java.util.function.Function,java.util.stream.Collector))_ and _[counting](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/stream/Collectors.html#counting())_ methods.\r\n\r\n```java\r\nString s  = &quot;zwdacb&quot;;\r\nMap&lt;Character, Long&gt; m\r\n    = s.chars()\r\n       .mapToObj(x -&gt; (char) x)\r\n       .collect(Collectors.groupingBy(x -&gt; x, Collectors.counting()));\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n{a=1, b=1, c=1, d=1, w=1, z=1}\r\n```\r\n\r\nHere is a relevant question and answer.\\\r\n_[StackOverflow &amp;ndash; How to count frequency of characters in a string?](https://stackoverflow.com/questions/6712587/how-to-count-frequency-of-characters-in-a-string)_","title":"How to convert stream of character to Map&lt;Character, Integer&gt;","body":"<p>Use the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/stream/Collectors.html#groupingBy(java.util.function.Function,java.util.stream.Collector)\" rel=\"nofollow noreferrer\">groupingBy</a></em> and <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/stream/Collectors.html#counting()\" rel=\"nofollow noreferrer\">counting</a></em> methods.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String s  = &quot;zwdacb&quot;;\nMap&lt;Character, Long&gt; m\n    = s.chars()\n       .mapToObj(x -&gt; (char) x)\n       .collect(Collectors.groupingBy(x -&gt; x, Collectors.counting()));\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>{a=1, b=1, c=1, d=1, w=1, z=1}\n</code></pre>\n<p>Here is a relevant question and answer.<br />\n<em><a href=\"https://stackoverflow.com/questions/6712587/how-to-count-frequency-of-characters-in-a-string\">StackOverflow – How to count frequency of characters in a string?</a></em></p>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1697769701,"creation_date":1697752804,"answer_id":77327304,"question_id":77325629,"body_markdown":"## tl;dr\r\n\r\nUse code points, not `char`. \r\n\r\n```java\r\nMap &lt; Integer, Integer &gt; frequencies =\r\n        input\r\n                .codePoints ( )                          // Generate an `IntStream` of `int` primitive values, one or more per character encountered in the input text. \r\n                .boxed ( )                               // Convert each `int` primitive into a `Integer` object.\r\n                .collect (\r\n                        Collectors.toMap (\r\n                                Function.identity ( ) ,  // Code point.\r\n                                ( Integer a ) -&gt; 1 ,\r\n                                Integer :: sum           // Increment the frequency count, the value for this entry in our Map. \r\n                        )\r\n                );\r\n```\r\n\r\n## Code point\r\n\r\nUnfortunately, the `char` type has been essentially broken since Java 2, and legacy since Java 5. As a 16-bit value, `char` is physically incapable of representing most characters. Example: try `&quot;&#128567;&quot;.length()`. \r\n\r\nInstead, use [code point][1] integer numbers to work with individual characters. \r\n\r\nHere is an code point savvy version of the `Collectors.toMap` approach seen in the Answers [by WJS][2] and by [Cardinal System][3]. \r\n\r\nAs the key in our map, we use [`Integer`][4] to represent each code point. \r\n\r\nThe [`IntStream`][5] returned by [`String#codePoints`][6] yields a series of `int` primitive values, one per code point found in the input string. We convert each code point from an `int` primitive to a `Integer` object as we need an object rather than a primitive to be a key. The `int` to `Integer` conversion is performed by the call to [`.boxed()`][7]. \r\n\r\n```java\r\nString input = &quot;&#128567;&#129436;zwdddaaaaacbb&#129436;&quot;;\r\nMap &lt; Integer, Integer &gt; frequencies =\r\n        input\r\n                .codePoints ( )                \r\n                .boxed ( )\r\n                .collect (\r\n                        Collectors.toMap (\r\n                                ( Integer codePoint ) -&gt; codePoint ,\r\n                                ( Integer a ) -&gt; 1 ,\r\n                                Integer :: sum\r\n                        )\r\n                );\r\n\r\nSystem.out.println ( &quot;frequencies = &quot; + frequencies );\r\nfrequencies.forEach ( ( Integer codePoint , Integer count ) -&gt; System.out.println ( Character.toString ( codePoint ) + &quot; = &quot; + count ) );\r\n```\r\n\r\n## `Function.identity`\r\n\r\nThat first argument to `toMap` is saying for every code point, just use that code point. A shorter way of doing that is [`Function.identity()`][8]. \r\n\r\n```java\r\nString input = &quot;&#128567;&#129436;zwdddaaaaacbb&#129436;&quot;;\r\nMap &lt; Integer, Integer &gt; frequencies =\r\n        input\r\n                .codePoints ( )                          // Generate an `IntStream` of `int` primitive values, one or more per character encountered in the input text. \r\n                .boxed ( )                               // Convert each `int` primitive into a `Integer` object.\r\n                .collect (\r\n                        Collectors.toMap (\r\n                                Function.identity ( ) ,  // Code point.\r\n                                ( Integer a ) -&gt; 1 ,\r\n                                Integer :: sum           // Increment the frequency count, the value for this entry in our Map. \r\n                        )\r\n                );\r\n\r\nSystem.out.println ( &quot;frequencies = &quot; + frequencies );\r\nfrequencies.forEach ( ( Integer codePoint , Integer count ) -&gt; System.out.println ( Character.toString ( codePoint ) + &quot; = &quot; + count ) );\r\n```\r\n\r\n## Result\r\n\r\nWhen run:\r\n\r\n```none\r\nfrequencies = {97=5, 98=2, 99=1, 100=3, 128567=1, 119=1, 122=1, 129436=2}\r\na = 5\r\nb = 2\r\nc = 1\r\nd = 3\r\n&#128567; = 1\r\nw = 1\r\nz = 1\r\n&#129436; = 2\r\n```\r\n\r\nIn contrast, if we changed `.codePoints()` to `.chars()`, we get incorrect results:\r\n\r\n```none\r\nfrequencies = {97=5, 98=2, 99=1, 100=3, 119=1, 56887=1, 122=1, 56732=2, 55357=1, 55358=2}\r\na = 5\r\nb = 2\r\nc = 1\r\nd = 3\r\nw = 1\r\n? = 1\r\nz = 1\r\n? = 2\r\n? = 1\r\n? = 2\r\n```\r\n\r\n\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Code_point\r\n  [2]: https://stackoverflow.com/a/77325981/642706\r\n  [3]: https://stackoverflow.com/a/77325688/642706\r\n  [4]: https://docs.oracle.com/en/java/javase/21/docs//api/java.base/java/lang/Integer.html\r\n  [5]: https://docs.oracle.com/en/java/javase/21/docs//api/java.base/java/util/stream/IntStream.html\r\n  [6]: https://docs.oracle.com/en/java/javase/21/docs//api/java.base/java/lang/String.html#codePoints()\r\n  [7]: https://docs.oracle.com/en/java/javase/21/docs//api/java.base/java/util/stream/IntStream.html#boxed()\r\n  [8]: https://docs.oracle.com/en/java/javase/21/docs//api/java.base/java/util/function/Function.html#identity()","title":"How to convert stream of character to Map&lt;Character, Integer&gt;","body":"<h2>tl;dr</h2>\n<p>Use code points, not <code>char</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map &lt; Integer, Integer &gt; frequencies =\n        input\n                .codePoints ( )                          // Generate an `IntStream` of `int` primitive values, one or more per character encountered in the input text. \n                .boxed ( )                               // Convert each `int` primitive into a `Integer` object.\n                .collect (\n                        Collectors.toMap (\n                                Function.identity ( ) ,  // Code point.\n                                ( Integer a ) -&gt; 1 ,\n                                Integer :: sum           // Increment the frequency count, the value for this entry in our Map. \n                        )\n                );\n</code></pre>\n<h2>Code point</h2>\n<p>Unfortunately, the <code>char</code> type has been essentially broken since Java 2, and legacy since Java 5. As a 16-bit value, <code>char</code> is physically incapable of representing most characters. Example: try <code>&quot;😷&quot;.length()</code>.</p>\n<p>Instead, use <a href=\"https://en.wikipedia.org/wiki/Code_point\" rel=\"nofollow noreferrer\">code point</a> integer numbers to work with individual characters.</p>\n<p>Here is an code point savvy version of the <code>Collectors.toMap</code> approach seen in the Answers <a href=\"https://stackoverflow.com/a/77325981/642706\">by WJS</a> and by <a href=\"https://stackoverflow.com/a/77325688/642706\">Cardinal System</a>.</p>\n<p>As the key in our map, we use <a href=\"https://docs.oracle.com/en/java/javase/21/docs//api/java.base/java/lang/Integer.html\" rel=\"nofollow noreferrer\"><code>Integer</code></a> to represent each code point.</p>\n<p>The <a href=\"https://docs.oracle.com/en/java/javase/21/docs//api/java.base/java/util/stream/IntStream.html\" rel=\"nofollow noreferrer\"><code>IntStream</code></a> returned by <a href=\"https://docs.oracle.com/en/java/javase/21/docs//api/java.base/java/lang/String.html#codePoints()\" rel=\"nofollow noreferrer\"><code>String#codePoints</code></a> yields a series of <code>int</code> primitive values, one per code point found in the input string. We convert each code point from an <code>int</code> primitive to a <code>Integer</code> object as we need an object rather than a primitive to be a key. The <code>int</code> to <code>Integer</code> conversion is performed by the call to <a href=\"https://docs.oracle.com/en/java/javase/21/docs//api/java.base/java/util/stream/IntStream.html#boxed()\" rel=\"nofollow noreferrer\"><code>.boxed()</code></a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String input = &quot;😷🦜zwdddaaaaacbb🦜&quot;;\nMap &lt; Integer, Integer &gt; frequencies =\n        input\n                .codePoints ( )                \n                .boxed ( )\n                .collect (\n                        Collectors.toMap (\n                                ( Integer codePoint ) -&gt; codePoint ,\n                                ( Integer a ) -&gt; 1 ,\n                                Integer :: sum\n                        )\n                );\n\nSystem.out.println ( &quot;frequencies = &quot; + frequencies );\nfrequencies.forEach ( ( Integer codePoint , Integer count ) -&gt; System.out.println ( Character.toString ( codePoint ) + &quot; = &quot; + count ) );\n</code></pre>\n<h2><code>Function.identity</code></h2>\n<p>That first argument to <code>toMap</code> is saying for every code point, just use that code point. A shorter way of doing that is <a href=\"https://docs.oracle.com/en/java/javase/21/docs//api/java.base/java/util/function/Function.html#identity()\" rel=\"nofollow noreferrer\"><code>Function.identity()</code></a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String input = &quot;😷🦜zwdddaaaaacbb🦜&quot;;\nMap &lt; Integer, Integer &gt; frequencies =\n        input\n                .codePoints ( )                          // Generate an `IntStream` of `int` primitive values, one or more per character encountered in the input text. \n                .boxed ( )                               // Convert each `int` primitive into a `Integer` object.\n                .collect (\n                        Collectors.toMap (\n                                Function.identity ( ) ,  // Code point.\n                                ( Integer a ) -&gt; 1 ,\n                                Integer :: sum           // Increment the frequency count, the value for this entry in our Map. \n                        )\n                );\n\nSystem.out.println ( &quot;frequencies = &quot; + frequencies );\nfrequencies.forEach ( ( Integer codePoint , Integer count ) -&gt; System.out.println ( Character.toString ( codePoint ) + &quot; = &quot; + count ) );\n</code></pre>\n<h2>Result</h2>\n<p>When run:</p>\n<pre class=\"lang-none prettyprint-override\"><code>frequencies = {97=5, 98=2, 99=1, 100=3, 128567=1, 119=1, 122=1, 129436=2}\na = 5\nb = 2\nc = 1\nd = 3\n😷 = 1\nw = 1\nz = 1\n🦜 = 2\n</code></pre>\n<p>In contrast, if we changed <code>.codePoints()</code> to <code>.chars()</code>, we get incorrect results:</p>\n<pre class=\"lang-none prettyprint-override\"><code>frequencies = {97=5, 98=2, 99=1, 100=3, 119=1, 56887=1, 122=1, 56732=2, 55357=1, 55358=2}\na = 5\nb = 2\nc = 1\nd = 3\nw = 1\n? = 1\nz = 1\n? = 2\n? = 1\n? = 2\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1712726,"reputation":6528,"user_id":1570415,"display_name":"Donald Raab"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697843405,"creation_date":1697775207,"answer_id":77328294,"question_id":77325629,"body_markdown":"If you are open to using a third-party library, you could use [Eclipse Collections][1] `CharAdapter` or `CodePointAdapter` classes, and create either a `CharBag` or `IntBag` to count the characters by simply calling `toBag` on either adapter. While this answer doesn&#39;t use Streams, the advantage here, aside from being more concise, is that there is no boxing of `char` as `Character` instances or `int` as `Integer` instances. Everything remains either as `char` or `int` primitive values.\r\n\r\nBut before you continue using chars or codePoints with Strings in Java, you should read this blog from Cay Horstmann: [Stop using char in Java. And Code Points.][2]\r\n\r\nIf you&#39;re still convinced you want to use chars or codePoints, here are some examples with Eclipse Collections.\r\n\r\nHere&#39;s a char example.\r\n\r\n    @Test\r\n    public void chars()\r\n    {\r\n        String input = &quot;abacab&quot;;\r\n        CharAdapter chars = Strings.asChars(input);\r\n        CharBag counts = chars.toBag();\r\n    \r\n        MutableCharBag expected = CharBags.mutable.empty();\r\n        expected.addOccurrences(&#39;a&#39;, 3);\r\n        expected.addOccurrences(&#39;b&#39;, 2);\r\n        expected.addOccurrences(&#39;c&#39;, 1);    \r\n        Assertions.assertEquals(expected, counts);\r\n\r\n        CharAdapter output = Strings.toChars(counts.toSortedList().toArray());\r\n        Assertions.assertEquals(Strings.asChars(&quot;aaabbc&quot;), output);\r\n    }\r\n\r\nHere&#39;s a code point example.\r\n\r\n    @Test\r\n    public void codePoints()\r\n    {\r\n        // Using the example input from Basil Bourque&#39;s answer\r\n        String input = &quot;&#128567;&#129436;zwdddaaaaacbb&#129436;&quot;;\r\n        CodePointAdapter codePoints = Strings.asCodePoints(input);\r\n        IntBag counts = codePoints.toBag();\r\n\r\n        MutableIntBag expected = IntBags.mutable.empty();\r\n        expected.addOccurrences(97, 5);\r\n        expected.addOccurrences(98, 2);\r\n        expected.addOccurrences(99, 1);\r\n        expected.addOccurrences(100, 3);\r\n        expected.addOccurrences(128567, 1);\r\n        expected.addOccurrences(119, 1);\r\n        expected.addOccurrences(122, 1);\r\n        expected.addOccurrences(129436, 2);\r\n        Assertions.assertEquals(expected, counts);\r\n\r\n        CodePointAdapter output = Strings.toCodePoints(counts.toSortedList().toArray());\r\n        Assertions.assertEquals(Strings.asCodePoints(&quot;aaaaabbcdddwz&#128567;&#129436;&#129436;&quot;), output);\r\n    }\r\n\r\nNote: I am a committer for Eclipse Collections.\r\n\r\n\r\n  [1]: https://github.com/eclipse/eclipse-collections\r\n  [2]: https://horstmann.com/unblog/2023-10-03/index.html","title":"How to convert stream of character to Map&lt;Character, Integer&gt;","body":"<p>If you are open to using a third-party library, you could use <a href=\"https://github.com/eclipse/eclipse-collections\" rel=\"nofollow noreferrer\">Eclipse Collections</a> <code>CharAdapter</code> or <code>CodePointAdapter</code> classes, and create either a <code>CharBag</code> or <code>IntBag</code> to count the characters by simply calling <code>toBag</code> on either adapter. While this answer doesn't use Streams, the advantage here, aside from being more concise, is that there is no boxing of <code>char</code> as <code>Character</code> instances or <code>int</code> as <code>Integer</code> instances. Everything remains either as <code>char</code> or <code>int</code> primitive values.</p>\n<p>But before you continue using chars or codePoints with Strings in Java, you should read this blog from Cay Horstmann: <a href=\"https://horstmann.com/unblog/2023-10-03/index.html\" rel=\"nofollow noreferrer\">Stop using char in Java. And Code Points.</a></p>\n<p>If you're still convinced you want to use chars or codePoints, here are some examples with Eclipse Collections.</p>\n<p>Here's a char example.</p>\n<pre><code>@Test\npublic void chars()\n{\n    String input = &quot;abacab&quot;;\n    CharAdapter chars = Strings.asChars(input);\n    CharBag counts = chars.toBag();\n\n    MutableCharBag expected = CharBags.mutable.empty();\n    expected.addOccurrences('a', 3);\n    expected.addOccurrences('b', 2);\n    expected.addOccurrences('c', 1);    \n    Assertions.assertEquals(expected, counts);\n\n    CharAdapter output = Strings.toChars(counts.toSortedList().toArray());\n    Assertions.assertEquals(Strings.asChars(&quot;aaabbc&quot;), output);\n}\n</code></pre>\n<p>Here's a code point example.</p>\n<pre><code>@Test\npublic void codePoints()\n{\n    // Using the example input from Basil Bourque's answer\n    String input = &quot;😷🦜zwdddaaaaacbb🦜&quot;;\n    CodePointAdapter codePoints = Strings.asCodePoints(input);\n    IntBag counts = codePoints.toBag();\n\n    MutableIntBag expected = IntBags.mutable.empty();\n    expected.addOccurrences(97, 5);\n    expected.addOccurrences(98, 2);\n    expected.addOccurrences(99, 1);\n    expected.addOccurrences(100, 3);\n    expected.addOccurrences(128567, 1);\n    expected.addOccurrences(119, 1);\n    expected.addOccurrences(122, 1);\n    expected.addOccurrences(129436, 2);\n    Assertions.assertEquals(expected, counts);\n\n    CodePointAdapter output = Strings.toCodePoints(counts.toSortedList().toArray());\n    Assertions.assertEquals(Strings.asCodePoints(&quot;aaaaabbcdddwz😷🦜🦜&quot;), output);\n}\n</code></pre>\n<p>Note: I am a committer for Eclipse Collections.</p>\n"},{"tags":[],"owner":{"account_id":5951494,"reputation":12969,"user_id":4679320,"accept_rate":67,"display_name":"prasad_"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1698049613,"creation_date":1697784887,"answer_id":77328854,"question_id":77325629,"body_markdown":"Here is another way of producing the desired result:\r\n\r\n    Map&lt;Character, Integer&gt; result = Stream.of(s.split(&quot;&quot;))\r\n                                           .collect(groupingBy(\r\n    \t\t\t\t\t\t\t                      e -&gt; Character.valueOf(e.charAt(0)), \r\n    \t\t\t\t\t\t\t\t                  summingInt(e -&gt; 1)\r\n                                            ));\r\n\r\nNOTE: Prior to Java version 8, use `s.split(&quot;(?!^)&quot;)` (to return a `String []` of individual characters as strings).\r\n\r\nThe `Stream#collect` method can take different grouping collectors as parameter. The one used here is [Collectors#groupingBy][1]\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collectors.html#groupingBy(java.util.function.Function,java.util.stream.Collector)\r\n\r\n&lt;hr&gt;\r\n\r\nThis also produces the result by using the `IntStream#collect` method:\r\n\r\n    Map&lt;Character, Integer&gt; result =\r\n        s.chars()\r\n             .collect(\r\n                 () -&gt; new HashMap&lt;&gt;(),\r\n                 (m, k) -&gt; m.merge((char) k, 1, (v, x) -&gt; v + x),\r\n                 (m1, m2) -&gt; m1.putAll(m2)\r\n              );\r\n\r\n","title":"How to convert stream of character to Map&lt;Character, Integer&gt;","body":"<p>Here is another way of producing the desired result:</p>\n<pre><code>Map&lt;Character, Integer&gt; result = Stream.of(s.split(&quot;&quot;))\n                                       .collect(groupingBy(\n                                                  e -&gt; Character.valueOf(e.charAt(0)), \n                                                  summingInt(e -&gt; 1)\n                                        ));\n</code></pre>\n<p>NOTE: Prior to Java version 8, use <code>s.split(&quot;(?!^)&quot;)</code> (to return a <code>String []</code> of individual characters as strings).</p>\n<p>The <code>Stream#collect</code> method can take different grouping collectors as parameter. The one used here is <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collectors.html#groupingBy(java.util.function.Function,java.util.stream.Collector)\" rel=\"nofollow noreferrer\">Collectors#groupingBy</a></p>\n<hr>\n<p>This also produces the result by using the <code>IntStream#collect</code> method:</p>\n<pre><code>Map&lt;Character, Integer&gt; result =\n    s.chars()\n         .collect(\n             () -&gt; new HashMap&lt;&gt;(),\n             (m, k) -&gt; m.merge((char) k, 1, (v, x) -&gt; v + x),\n             (m1, m2) -&gt; m1.putAll(m2)\n          );\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697789731,"creation_date":1697789731,"answer_id":77329320,"question_id":77325629,"body_markdown":"Using plain Java:\r\n```java\r\npublic static Map&lt;Character, Long&gt; histogram(String str) {\r\n    Map&lt;Character, Long&gt; map = new HashMap&lt;&gt;();\r\n\r\n    for (int i = 0; i &lt; str.length(); i++) {\r\n        char ch = str.charAt(i);\r\n        map.put(ch, map.getOrDefault(ch, 0L) + 1);\r\n    }\r\n\r\n    return Collections.unmodifiableMap(map);\r\n}\r\n```\r\n\r\nUsing Stream:\r\n```java\r\npublic static Map&lt;Character, Long&gt; histogram(String str) {\r\n    return IntStream.range(0, str.length())\r\n            .mapToObj(str::charAt)\r\n            .collect(Collectors.groupingBy(Function.identity(),\r\n                                           Collectors.counting()));\r\n}\r\n```","title":"How to convert stream of character to Map&lt;Character, Integer&gt;","body":"<p>Using plain Java:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static Map&lt;Character, Long&gt; histogram(String str) {\n    Map&lt;Character, Long&gt; map = new HashMap&lt;&gt;();\n\n    for (int i = 0; i &lt; str.length(); i++) {\n        char ch = str.charAt(i);\n        map.put(ch, map.getOrDefault(ch, 0L) + 1);\n    }\n\n    return Collections.unmodifiableMap(map);\n}\n</code></pre>\n<p>Using Stream:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static Map&lt;Character, Long&gt; histogram(String str) {\n    return IntStream.range(0, str.length())\n            .mapToObj(str::charAt)\n            .collect(Collectors.groupingBy(Function.identity(),\n                                           Collectors.counting()));\n}\n</code></pre>\n"}],"owner":{"account_id":5344340,"reputation":2306,"user_id":4260303,"accept_rate":42,"display_name":"curiousengineer"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":222,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1697800620,"answer_count":9,"score":0,"last_activity_date":1698049613,"creation_date":1697733383,"question_id":77325629,"body_markdown":"I want the map to have key as `Character` and value as `Integer`, value represents the frequency of the character.\r\n\r\nThe below code won&#39;t compile because I am probably using the wrong signature for the `.toMap`\r\n\r\n```\r\nString s  = &quot;zwdacb&quot;;\r\n\r\n// Snippet to get a map\r\ns.chars().map(i-&gt;(char)i).collect(Collectors.toMap(Character key-&gt;key,(Character k)-&gt;1,(Integer ov,Integer nv)-&gt;ov+nv));\r\n```\r\n\r\nCompiler gives this error:\r\n```\r\nCandidates for method call Collectors.toMap(Character key-&gt;key,(Character k)-&gt;1,(Integer ov,Integer nv)-&gt;ov+nv) are:  \r\n  \r\nCollector&lt;Object, ?, Map&lt;Object, Object&gt;&gt; toMap(Function&lt;? super Object, ?&gt;, Function&lt;? super Object, ?&gt;)   \r\n\r\nCollector&lt;Object, ?, Map&lt;Object, Object&gt;&gt; toMap(Function&lt;? super Object, ?&gt;, Function&lt;? super Object, ?&gt;, BinaryOperator&lt;Object&gt;)   \r\n\r\nCollector&lt;T, ?, M&gt; toMap(Function&lt;? super T, ? extends K&gt;, Function&lt;? super T, ? extends U&gt;, BinaryOperator&lt;U&gt;, Supplier&lt;M&gt;) \r\n```","title":"How to convert stream of character to Map&lt;Character, Integer&gt;","body":"<p>I want the map to have key as <code>Character</code> and value as <code>Integer</code>, value represents the frequency of the character.</p>\n<p>The below code won't compile because I am probably using the wrong signature for the <code>.toMap</code></p>\n<pre><code>String s  = &quot;zwdacb&quot;;\n\n// Snippet to get a map\ns.chars().map(i-&gt;(char)i).collect(Collectors.toMap(Character key-&gt;key,(Character k)-&gt;1,(Integer ov,Integer nv)-&gt;ov+nv));\n</code></pre>\n<p>Compiler gives this error:</p>\n<pre><code>Candidates for method call Collectors.toMap(Character key-&gt;key,(Character k)-&gt;1,(Integer ov,Integer nv)-&gt;ov+nv) are:  \n  \nCollector&lt;Object, ?, Map&lt;Object, Object&gt;&gt; toMap(Function&lt;? super Object, ?&gt;, Function&lt;? super Object, ?&gt;)   \n\nCollector&lt;Object, ?, Map&lt;Object, Object&gt;&gt; toMap(Function&lt;? super Object, ?&gt;, Function&lt;? super Object, ?&gt;, BinaryOperator&lt;Object&gt;)   \n\nCollector&lt;T, ?, M&gt; toMap(Function&lt;? super T, ? extends K&gt;, Function&lt;? super T, ? extends U&gt;, BinaryOperator&lt;U&gt;, Supplier&lt;M&gt;) \n</code></pre>\n"},{"tags":["java","exchangewebservices","ewsjavaapi"],"owner":{"account_id":26888371,"reputation":1,"user_id":20467558,"display_name":"niubi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698049298,"creation_date":1698049183,"question_id":77343642,"body_markdown":"1\r\n\r\nI am using Pull Notification and EWS to have synchronization of appointments with Exchange 2010 server and my application. It works find, I am able to pull notification whenever user create, modify or delete an appointment.\r\n\r\nUsers have auto archive in their Microsoft Outlook, the auto archive can delete or move appointments in their calendar in Outlook, and notification fired and Pull Notification gets the message and process accordingly, this is correct.\r\n\r\nWhat I want to ask is, is there a way EWS can check whether the appointment (delete or modify or move) is archive\r\n\r\nThanks.\r\n\r\n\r\n\r\n\r\n\r\n\r\nThe following code is how I use EWS Java-API, i think i can get archiveTag from Appointment,but it not work,The APPOINTMENT class has no way to get ArchiveTag\r\n```java\r\n       PropertySet propertySet = new PropertySet(BasePropertySet.FirstClassProperties);\r\n        propertySet.add(AppointmentSchema.Recurrence);\r\n        propertySet.add(AppointmentSchema.ICalUid);\r\n        //there is no archive propertySet with AppointmentSchema\r\n        ExchangeService service2 = getExchangeService(&quot;*****&quot;, &quot;****&quot;);\r\n      \r\n       Appointment appointment2 = Appointment.bind(service2,new ItemId(&quot;::&quot;),propertySet);\r\n\r\n```","title":"java -EWS-api calendar archive","body":"<p>1</p>\n<p>I am using Pull Notification and EWS to have synchronization of appointments with Exchange 2010 server and my application. It works find, I am able to pull notification whenever user create, modify or delete an appointment.</p>\n<p>Users have auto archive in their Microsoft Outlook, the auto archive can delete or move appointments in their calendar in Outlook, and notification fired and Pull Notification gets the message and process accordingly, this is correct.</p>\n<p>What I want to ask is, is there a way EWS can check whether the appointment (delete or modify or move) is archive</p>\n<p>Thanks.</p>\n<p>The following code is how I use EWS Java-API, i think i can get archiveTag from Appointment,but it not work,The APPOINTMENT class has no way to get ArchiveTag</p>\n<pre class=\"lang-java prettyprint-override\"><code>       PropertySet propertySet = new PropertySet(BasePropertySet.FirstClassProperties);\n        propertySet.add(AppointmentSchema.Recurrence);\n        propertySet.add(AppointmentSchema.ICalUid);\n        //there is no archive propertySet with AppointmentSchema\n        ExchangeService service2 = getExchangeService(&quot;*****&quot;, &quot;****&quot;);\n      \n       Appointment appointment2 = Appointment.bind(service2,new ItemId(&quot;::&quot;),propertySet);\n\n</code></pre>\n"},{"tags":["java","spring-boot","elasticsearch","spring-data-elasticsearch"],"answers":[{"tags":[],"owner":{"account_id":29195976,"reputation":29,"user_id":22367071,"display_name":"Rodrick Zadrozny"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698048685,"creation_date":1698048685,"answer_id":77343588,"question_id":49009070,"body_markdown":"I guess you haven&#39;t set up a Repository for this entity, like this:\r\n```\r\nimport org.springframework.data.elasticsearch.repository.ElasticsearchRepository;\r\n\r\npublic interface CityRepository extends ElasticsearchRepository&lt;City, String&gt; {\r\n\r\n}\r\n```","title":"Spring-data-elasticsearch @CompletionField does not create field with type &quot;complete&quot;","body":"<p>I guess you haven't set up a Repository for this entity, like this:</p>\n<pre><code>import org.springframework.data.elasticsearch.repository.ElasticsearchRepository;\n\npublic interface CityRepository extends ElasticsearchRepository&lt;City, String&gt; {\n\n}\n</code></pre>\n"}],"owner":{"account_id":4271284,"reputation":12416,"user_id":3493036,"accept_rate":81,"display_name":"Patrick"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1225,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":1,"score":7,"last_activity_date":1698048685,"creation_date":1519735596,"question_id":49009070,"body_markdown":"I am using `Spring-data-elasticsearch` and there `ElasticsearchTemplate` functions.\r\n\r\nI try to create an index by using the `@CompletionField` annotation on a `Completion` field named `suggest`. \r\n\r\n    @Document(indexName = &quot;city&quot;, type = &quot;city&quot;)\r\n    public class City {\r\n        \r\n        @Id\r\n        private String id;\r\n        \r\n        @Field\r\n        private String name;\r\n        \r\n        @CompletionField\r\n        private Completion suggest;\r\n    }\r\nThe `@CompletionField` annotation should be used to for the suggest-complete functions of elasticsearch. Like described in the java-doc:\r\n\r\n    /**\r\n     * Based on the reference doc - http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-suggesters-completion.html\r\n     *\r\n     * @author Mewes Kochheim\r\n     */\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @Target(ElementType.FIELD)\r\n    @Documented\r\n    @Inherited\r\n    public @interface CompletionField {\r\n\r\nIn the [elasticsearch docs][1] they say, that the field should have a type `complete` to use the suggest-complete functions.\r\n\r\n**But if I create my index unfortunately the field `suggest` has not the type `complete` instead it hast the type `keyword`. Which gives me an error when I try to query a suggest query.**\r\n\r\n    CompletionSuggestionBuilder s = SuggestBuilders.completionSuggestion(&quot;suggest&quot;).prefix(text, Fuzziness.ONE);\r\n    SuggestBuilder b = new SuggestBuilder().addSuggestion(&quot;test-suggest&quot;, s);\r\n    SearchResponse response = elasticsearchTemplate.suggest(b, &quot;city&quot;);\r\n\r\nException:\r\n\r\n    java.lang.IllegalArgumentException: no mapping found for field [suggest]\r\n\r\nAll my code is based on the spring-data-elasticsearch git repository. \r\n\r\n[ElasticsearchTemplateCompletionTests.java][2]\r\n\r\n[CompletionAnnotatedEntity.java][3]\r\n\r\nDo I miss any configuration in my `City` document or any other annotation? \r\n\r\n\r\n  [1]: https://www.elastic.co/guide/en/elasticsearch/reference/5.5/search-suggesters-completion.html#completion-suggester-mapping\r\n  [2]: https://github.com/spring-projects/spring-data-elasticsearch/blob/master/src/test/java/org/springframework/data/elasticsearch/core/completion/ElasticsearchTemplateCompletionTests.java\r\n  [3]: https://github.com/spring-projects/spring-data-elasticsearch/blob/master/src/test/java/org/springframework/data/elasticsearch/core/completion/CompletionAnnotatedEntity.java","title":"Spring-data-elasticsearch @CompletionField does not create field with type &quot;complete&quot;","body":"<p>I am using <code>Spring-data-elasticsearch</code> and there <code>ElasticsearchTemplate</code> functions.</p>\n\n<p>I try to create an index by using the <code>@CompletionField</code> annotation on a <code>Completion</code> field named <code>suggest</code>. </p>\n\n<pre><code>@Document(indexName = \"city\", type = \"city\")\npublic class City {\n\n    @Id\n    private String id;\n\n    @Field\n    private String name;\n\n    @CompletionField\n    private Completion suggest;\n}\n</code></pre>\n\n<p>The <code>@CompletionField</code> annotation should be used to for the suggest-complete functions of elasticsearch. Like described in the java-doc:</p>\n\n<pre><code>/**\n * Based on the reference doc - http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-suggesters-completion.html\n *\n * @author Mewes Kochheim\n */\n@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.FIELD)\n@Documented\n@Inherited\npublic @interface CompletionField {\n</code></pre>\n\n<p>In the <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/5.5/search-suggesters-completion.html#completion-suggester-mapping\" rel=\"noreferrer\">elasticsearch docs</a> they say, that the field should have a type <code>complete</code> to use the suggest-complete functions.</p>\n\n<p><strong>But if I create my index unfortunately the field <code>suggest</code> has not the type <code>complete</code> instead it hast the type <code>keyword</code>. Which gives me an error when I try to query a suggest query.</strong></p>\n\n<pre><code>CompletionSuggestionBuilder s = SuggestBuilders.completionSuggestion(\"suggest\").prefix(text, Fuzziness.ONE);\nSuggestBuilder b = new SuggestBuilder().addSuggestion(\"test-suggest\", s);\nSearchResponse response = elasticsearchTemplate.suggest(b, \"city\");\n</code></pre>\n\n<p>Exception:</p>\n\n<pre><code>java.lang.IllegalArgumentException: no mapping found for field [suggest]\n</code></pre>\n\n<p>All my code is based on the spring-data-elasticsearch git repository. </p>\n\n<p><a href=\"https://github.com/spring-projects/spring-data-elasticsearch/blob/master/src/test/java/org/springframework/data/elasticsearch/core/completion/ElasticsearchTemplateCompletionTests.java\" rel=\"noreferrer\">ElasticsearchTemplateCompletionTests.java</a></p>\n\n<p><a href=\"https://github.com/spring-projects/spring-data-elasticsearch/blob/master/src/test/java/org/springframework/data/elasticsearch/core/completion/CompletionAnnotatedEntity.java\" rel=\"noreferrer\">CompletionAnnotatedEntity.java</a></p>\n\n<p>Do I miss any configuration in my <code>City</code> document or any other annotation? </p>\n"},{"tags":["java","ftp","ftp-client","apache-commons-net"],"comments":[{"owner":{"account_id":453710,"reputation":192083,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"score":0,"creation_date":1565073549,"post_id":57369232,"comment_id":101225618,"body_markdown":"I guess that this is your related question, posted using a different account: [Can the FTP client control FTP server time-out settings?](https://stackoverflow.com/q/57352335/850848)","body":"I guess that this is your related question, posted using a different account: <a href=\"https://stackoverflow.com/q/57352335/850848\">Can the FTP client control FTP server time-out settings?</a>"}],"answers":[{"tags":[],"owner":{"account_id":453710,"reputation":192083,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1698048352,"creation_date":1565073483,"answer_id":57370215,"question_id":57369232,"body_markdown":"There&#39;s nothing that will do it for you, the comment you have quoted is clear about that.\r\n\r\nYou have to code it yourself:  \r\nRead the stream and while doing that, in regular intervals, call the [`FTPClient.sendNoOp`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#sendNoOp()).","title":"FTPClient - Send Noop to a FTP server in a stream method","body":"<p>There's nothing that will do it for you, the comment you have quoted is clear about that.</p>\n<p>You have to code it yourself:<br />\nRead the stream and while doing that, in regular intervals, call the <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#sendNoOp()\" rel=\"nofollow noreferrer\"><code>FTPClient.sendNoOp</code></a>.</p>\n"}],"owner":{"account_id":16454328,"reputation":27,"user_id":11886918,"display_name":"puregyu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1084,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":57370215,"answer_count":1,"score":1,"last_activity_date":1698048352,"creation_date":1565067783,"question_id":57369232,"body_markdown":"I&#39;m using `FTPClient` (Apache Commons Net)\r\n\r\nI know that `FTPClient` provides two methods to avoid the idle state of the FTP server:\r\n\r\n 1. `ftpClient.setControlKeepAliveTimeout(300)` &amp;ndash; Send a noop every five minutes\r\n 2. `ftpClient.sendNoOp()` &amp;ndash; send a noop a one-time event\r\n\r\nI tried to use `setControlKeepAliveTimeout()`\r\n\r\nBut the official FTPClient document On `setControlKeepAliveTimeout`....\r\n\r\n&gt; Please note: this does not apply to the methods where the user is\r\n&gt; responsible for writing or reading the data stream, i.e.\r\n&gt; `retrieveFileStream(String)`, `storeFileStream*(String)` and the other\r\n&gt; `xxxFileStream` methods\r\n\r\nMy program uses only `retrieveFileStream`, which is not applied to `setControlKeepAliveTimeout` .\r\n\r\nIs there no way to operate the noop repeatedly in a stream method, not a one-time event, like a `sendNoOp`?","title":"FTPClient - Send Noop to a FTP server in a stream method","body":"<p>I'm using <code>FTPClient</code> (Apache Commons Net)</p>\n\n<p>I know that <code>FTPClient</code> provides two methods to avoid the idle state of the FTP server:</p>\n\n<ol>\n<li><code>ftpClient.setControlKeepAliveTimeout(300)</code> &ndash; Send a noop every five minutes</li>\n<li><code>ftpClient.sendNoOp()</code> &ndash; send a noop a one-time event</li>\n</ol>\n\n<p>I tried to use <code>setControlKeepAliveTimeout()</code></p>\n\n<p>But the official FTPClient document On <code>setControlKeepAliveTimeout</code>....</p>\n\n<blockquote>\n  <p>Please note: this does not apply to the methods where the user is\n  responsible for writing or reading the data stream, i.e.\n  <code>retrieveFileStream(String)</code>, <code>storeFileStream*(String)</code> and the other\n  <code>xxxFileStream</code> methods</p>\n</blockquote>\n\n<p>My program uses only <code>retrieveFileStream</code>, which is not applied to <code>setControlKeepAliveTimeout</code> .</p>\n\n<p>Is there no way to operate the noop repeatedly in a stream method, not a one-time event, like a <code>sendNoOp</code>?</p>\n"},{"tags":["java","android","ftp","apache-commons-net"],"answers":[{"tags":[],"owner":{"account_id":453710,"reputation":192083,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1698048326,"creation_date":1578660830,"answer_id":59682115,"question_id":59681644,"body_markdown":"Apache Commons Net [`FTPClient.retrieveFile`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#retrieveFile(java.lang.String,java.io.OutputStream)) does not work with any local files directly. It takes [`OutputStream`](https://docs.oracle.com/javase/8/docs/api/java/io/OutputStream.html) as a parameter and blindly writes the downloaded data to it.\r\n\r\nIt is up to the `OutputStream`, what it does with the data.\r\n\r\nIf you use [`FileOutputStream`](https://docs.oracle.com/javase/8/docs/api/java/io/FileOutputStream.html), it will overwrite the existing file *immediately* – even *before* you actually call `FTPClient.retrieveFile`.\r\n\r\nIf you need any other behavior, you have to code it.","title":"Whether the Apache FTPClient.retrieveFile method creates temporary file","body":"<p>Apache Commons Net <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#retrieveFile(java.lang.String,java.io.OutputStream)\" rel=\"nofollow noreferrer\"><code>FTPClient.retrieveFile</code></a> does not work with any local files directly. It takes <a href=\"https://docs.oracle.com/javase/8/docs/api/java/io/OutputStream.html\" rel=\"nofollow noreferrer\"><code>OutputStream</code></a> as a parameter and blindly writes the downloaded data to it.</p>\n<p>It is up to the <code>OutputStream</code>, what it does with the data.</p>\n<p>If you use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/io/FileOutputStream.html\" rel=\"nofollow noreferrer\"><code>FileOutputStream</code></a>, it will overwrite the existing file <em>immediately</em> – even <em>before</em> you actually call <code>FTPClient.retrieveFile</code>.</p>\n<p>If you need any other behavior, you have to code it.</p>\n"}],"owner":{"account_id":15412186,"reputation":13,"user_id":12653322,"display_name":"Ксения Ивашкина"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":355,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":59682115,"answer_count":1,"score":1,"last_activity_date":1698048326,"creation_date":1578659091,"question_id":59681644,"body_markdown":"I am using Apache `FTPClient` for the Android. I download files from the server and overwrite them instead of local ones. I need to make sure that the files were downloaded correctly. Will the method `FTPClient.retrieveFile` work for me? Does it check the correctness of the file or just overwrite it immediately? I. e. if the broken file was downloaded (for example the Internet disconnect), then on the local device I will receive old version of the file or broken?","title":"Whether the Apache FTPClient.retrieveFile method creates temporary file","body":"<p>I am using Apache <code>FTPClient</code> for the Android. I download files from the server and overwrite them instead of local ones. I need to make sure that the files were downloaded correctly. Will the method <code>FTPClient.retrieveFile</code> work for me? Does it check the correctness of the file or just overwrite it immediately? I. e. if the broken file was downloaded (for example the Internet disconnect), then on the local device I will receive old version of the file or broken?</p>\n"},{"tags":["java","selenium-webdriver","fluentwait"],"comments":[{"owner":{"account_id":4057546,"reputation":138,"user_id":6453997,"accept_rate":33,"display_name":"John Smith"},"score":0,"creation_date":1698048042,"post_id":77343239,"comment_id":136350904,"body_markdown":"Just set it to implicit wait, usually implicit is better anyway","body":"Just set it to implicit wait, usually implicit is better anyway"}],"answers":[{"tags":[],"owner":{"account_id":13688997,"reputation":658,"user_id":9877340,"display_name":"kenneth"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1698048294,"creation_date":1698048294,"answer_id":77343559,"question_id":77343239,"body_markdown":"I have little to no experience in FluentWaits, but there are several causes for Selenium not finding an element with NoSuchElementException. You might want to use WebDriverWait instead of FluentWait, since it&#39;s giving you a lot of options to choose from. Using these options the correct way helps you find the element the right way.\r\n\r\nLet&#39;s first initialize a WebDriverWait, simple:\r\n\r\n    WebDriverWait wait = new WebDriverWait(driver, 30);\r\n\r\nThe enormous amount of ExpectedConditions are given in [this documentation](https://www.selenium.dev/selenium/docs/api/java/org/openqa/selenium/support/ui/ExpectedConditions.html). But I would advise you two of the most frequently and simple ones you can use:\r\n\r\n1. **visibilityOfElementLocated**(By locator)\r\n\r\nThis one is my preffered way, since it&#39;s checking (1) if the element exists and (2) it&#39;s visible in the window/viewport. That way you have most guarantee you can interact with the element.\r\n\r\n    wait.until(ExpectedConditions.visibilityOfElementLocated(By locator));\r\n\r\n2. **presenceOfElementLocated**(By locator)\r\n\r\nIf you come across `TimeoutException` or `NoSuchElementException`, this would be a good choice. Since it&#39;s now scanning the entire DOM and it doesn&#39;t need to be visible in your screen. You might have issues when interacting with the element like `click()`, but it&#39;s your best choice if you need to just see if the element exists.\r\n\r\n    wait.until(ExpectedConditions.presenceOfElementLocated(By locator));\r\n\r\n**Solution** When having issues with NoSuchElementException, choose for Waits where you will see if the element Exists.","title":"Selenium NoSuchElementException when waiting","body":"<p>I have little to no experience in FluentWaits, but there are several causes for Selenium not finding an element with NoSuchElementException. You might want to use WebDriverWait instead of FluentWait, since it's giving you a lot of options to choose from. Using these options the correct way helps you find the element the right way.</p>\n<p>Let's first initialize a WebDriverWait, simple:</p>\n<pre><code>WebDriverWait wait = new WebDriverWait(driver, 30);\n</code></pre>\n<p>The enormous amount of ExpectedConditions are given in <a href=\"https://www.selenium.dev/selenium/docs/api/java/org/openqa/selenium/support/ui/ExpectedConditions.html\" rel=\"nofollow noreferrer\">this documentation</a>. But I would advise you two of the most frequently and simple ones you can use:</p>\n<ol>\n<li><strong>visibilityOfElementLocated</strong>(By locator)</li>\n</ol>\n<p>This one is my preffered way, since it's checking (1) if the element exists and (2) it's visible in the window/viewport. That way you have most guarantee you can interact with the element.</p>\n<pre><code>wait.until(ExpectedConditions.visibilityOfElementLocated(By locator));\n</code></pre>\n<ol start=\"2\">\n<li><strong>presenceOfElementLocated</strong>(By locator)</li>\n</ol>\n<p>If you come across <code>TimeoutException</code> or <code>NoSuchElementException</code>, this would be a good choice. Since it's now scanning the entire DOM and it doesn't need to be visible in your screen. You might have issues when interacting with the element like <code>click()</code>, but it's your best choice if you need to just see if the element exists.</p>\n<pre><code>wait.until(ExpectedConditions.presenceOfElementLocated(By locator));\n</code></pre>\n<p><strong>Solution</strong> When having issues with NoSuchElementException, choose for Waits where you will see if the element Exists.</p>\n"}],"owner":{"account_id":20310722,"reputation":143,"user_id":14897868,"display_name":"Kyle"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77343559,"answer_count":1,"score":1,"last_activity_date":1698048294,"creation_date":1698044909,"question_id":77343239,"body_markdown":"I&#39;m getting the what seems fairly common `NoSuchElementException` when waiting on an element to load in the DOM. I&#39;ve used a fluent wait and ignored it but it still seems to be happening. Tests are passing, it does eventually locate the element. \r\n\r\nCode:\r\n\r\n     Wait&lt;WebDriver&gt; wait = new FluentWait&lt;&gt;(driver)\r\n                    .withTimeout(Duration.ofSeconds(15))\r\n                    .pollingEvery(Duration.ofMillis(500))\r\n                    .ignoring(ElementNotInteractableException.class, NoSuchElementException.class);\r\n\r\nStack:\r\n\r\n    org.openqa.selenium.NoSuchElementException: no such element: Unable to locate element: {&quot;method&quot;:&quot;css selector&quot;,&quot;selector&quot;:&quot;[class=&quot;fsrAbandonButton&quot;]&quot;}\r\n      (Session info: headless chrome=118.0.5993.88)\r\n\r\nI&#39;m confused as to why it would still output this error when I&#39;m explicitly telling it to ignore this?","title":"Selenium NoSuchElementException when waiting","body":"<p>I'm getting the what seems fairly common <code>NoSuchElementException</code> when waiting on an element to load in the DOM. I've used a fluent wait and ignored it but it still seems to be happening. Tests are passing, it does eventually locate the element.</p>\n<p>Code:</p>\n<pre><code> Wait&lt;WebDriver&gt; wait = new FluentWait&lt;&gt;(driver)\n                .withTimeout(Duration.ofSeconds(15))\n                .pollingEvery(Duration.ofMillis(500))\n                .ignoring(ElementNotInteractableException.class, NoSuchElementException.class);\n</code></pre>\n<p>Stack:</p>\n<pre><code>org.openqa.selenium.NoSuchElementException: no such element: Unable to locate element: {&quot;method&quot;:&quot;css selector&quot;,&quot;selector&quot;:&quot;[class=&quot;fsrAbandonButton&quot;]&quot;}\n  (Session info: headless chrome=118.0.5993.88)\n</code></pre>\n<p>I'm confused as to why it would still output this error when I'm explicitly telling it to ignore this?</p>\n"},{"tags":["java","android","android-studio","ftp","apache-commons-net"],"answers":[{"tags":[],"owner":{"account_id":453710,"reputation":192083,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1698048249,"creation_date":1651089555,"answer_id":72034615,"question_id":72034438,"body_markdown":"Your error handling is wrong.\r\n\r\nThe [`FTPClient.login`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#login(java.lang.String,java.lang.String)) does not *throw an exception*, when the credentials are wrong. It *returns* a `false`. You do not test for that. Your code carries on, trying to work with not authorized session instead, all of which will obviously fail too.\r\n\r\nBut as the same is true for [`FTPClient.storeFile`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#storeFile(java.lang.String,java.io.InputStream)), which also just returns `false`, your code basically does not notice any errors.\r\n\r\n","title":"Apache Commons Net FTP does not throw any exception on wrong credentials","body":"<p>Your error handling is wrong.</p>\n<p>The <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#login(java.lang.String,java.lang.String)\" rel=\"nofollow noreferrer\"><code>FTPClient.login</code></a> does not <em>throw an exception</em>, when the credentials are wrong. It <em>returns</em> a <code>false</code>. You do not test for that. Your code carries on, trying to work with not authorized session instead, all of which will obviously fail too.</p>\n<p>But as the same is true for <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#storeFile(java.lang.String,java.io.InputStream)\" rel=\"nofollow noreferrer\"><code>FTPClient.storeFile</code></a>, which also just returns <code>false</code>, your code basically does not notice any errors.</p>\n"}],"owner":{"account_id":8387433,"reputation":25,"user_id":6297365,"display_name":"Logic"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":337,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":72034615,"answer_count":1,"score":1,"last_activity_date":1698048249,"creation_date":1651088545,"question_id":72034438,"body_markdown":"I just managed to upload some files to an FTP server using Apache Commons Net FTP. When I use everything as it should be it works fine, I mean, the file uploading is working, but when I use, for example, a wrong password for the FTP account, obviously the files don&#39;t get uploaded to the server, but I don&#39;t get an error message either. In other words: I don&#39;t know how to show the error. I tried to show with a toast the `e.getMessage()` from the `Exception` but nothing is shown. Is there any documentation that would help me? Or am I missing something you could help me with? thank you!\r\n\r\nThis is my code:\r\n\r\n```\r\n@Override\r\nprotected Void doInBackground(Void... voids) {\r\n    FTPClient ftpClient=new FTPClient();\r\n    try {\r\n        ftpClient.connect(fserver);\r\n        ftpClient.login(fusername,fpassword);\r\n        ftpClient.enterLocalPassiveMode();\r\n\r\n        dirArch = new ArrayList&lt;&gt;();\r\n        for (int k=0;k&lt;adapter.getSelected().size();k++){\r\n            dirArch.add(adapter.getSelected().get(k).getArch());\r\n        }\r\n        for (String archTXT : dirArch){\r\n            File fileX =new File(stringFolder,archTXT);\r\n            InputStream inputStream=new FileInputStream(fileX);\r\n            ftpClient.storeFile(archTXT,inputStream);\r\n            inputStream.close();\r\n            pbPorc=pbPorc+pbSum;\r\n            pb1.setProgress(pbPorc);\r\n            pb2.setProgress(pbPorc);\r\n        }\r\n        ftpClient.logout();\r\n        ftpClient.disconnect();\r\n    } catch (IOException e) {\r\n        e.printStackTrace();\r\n        Toast.makeText(ExportTracks.this,e.getMessage(),Toast.LENGTH_LONG).show();\r\n    }\r\n    return null;\r\n}\r\n```","title":"Apache Commons Net FTP does not throw any exception on wrong credentials","body":"<p>I just managed to upload some files to an FTP server using Apache Commons Net FTP. When I use everything as it should be it works fine, I mean, the file uploading is working, but when I use, for example, a wrong password for the FTP account, obviously the files don't get uploaded to the server, but I don't get an error message either. In other words: I don't know how to show the error. I tried to show with a toast the <code>e.getMessage()</code> from the <code>Exception</code> but nothing is shown. Is there any documentation that would help me? Or am I missing something you could help me with? thank you!</p>\n<p>This is my code:</p>\n<pre><code>@Override\nprotected Void doInBackground(Void... voids) {\n    FTPClient ftpClient=new FTPClient();\n    try {\n        ftpClient.connect(fserver);\n        ftpClient.login(fusername,fpassword);\n        ftpClient.enterLocalPassiveMode();\n\n        dirArch = new ArrayList&lt;&gt;();\n        for (int k=0;k&lt;adapter.getSelected().size();k++){\n            dirArch.add(adapter.getSelected().get(k).getArch());\n        }\n        for (String archTXT : dirArch){\n            File fileX =new File(stringFolder,archTXT);\n            InputStream inputStream=new FileInputStream(fileX);\n            ftpClient.storeFile(archTXT,inputStream);\n            inputStream.close();\n            pbPorc=pbPorc+pbSum;\n            pb1.setProgress(pbPorc);\n            pb2.setProgress(pbPorc);\n        }\n        ftpClient.logout();\n        ftpClient.disconnect();\n    } catch (IOException e) {\n        e.printStackTrace();\n        Toast.makeText(ExportTracks.this,e.getMessage(),Toast.LENGTH_LONG).show();\n    }\n    return null;\n}\n</code></pre>\n"},{"tags":["java","ftp","apache-commons-net"],"answers":[{"tags":[],"owner":{"account_id":453710,"reputation":192083,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1698048158,"creation_date":1523255522,"answer_id":49726800,"question_id":49711631,"body_markdown":"Use [`FTPClient.mlistDir`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#mlistDir()) (recommended, if the server supports it) or\r\n[`FTPClient.listFiles`](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#listFiles()) to retrieve list of files. And then filter them according to your needs.\r\n\r\nThe following example downloads all files matching a regular expression `.*\\.jpg`:\r\n\r\n    FTPFile[] remoteFiles = ftpClient.listFiles(remotePath);\r\n    \r\n    Pattern pattern = Pattern.compile(&quot;.*\\\\.jpg&quot;);\r\n    Stream&lt;FTPFile&gt; matchingFiles =\r\n        Arrays.stream(remoteFiles).filter(\r\n            (FTPFile remoteFile) -&gt; pattern.matcher(remoteFile.getName()).matches());\r\n    \r\n    for (Iterator&lt;FTPFile&gt; iter = matchingFiles.iterator(); iter.hasNext(); ) {\r\n    \tFTPFile remoteFile = iter.next();\r\n        System.out.println(&quot;Found file &quot; + remoteFile.getName() + &quot;, downloading ...&quot;);\r\n    \r\n        File localFile = new File(localPath + &quot;\\\\&quot; + remoteFile.getName());\r\n        \r\n        OutputStream outputStream =\r\n            new BufferedOutputStream(new FileOutputStream(localFile));\r\n        if (ftpClient.retrieveFile(remotePath + &quot;/&quot; + remoteFile.getName(), outputStream))\r\n        {\r\n            System.out.println(\r\n                &quot;File &quot; + remoteFile.getName() + &quot; downloaded successfully.&quot;);\r\n        }\r\n        outputStream.close();\r\n    }\r\n\r\n","title":"Download a files from FTP matching a wildcard using Java Apache Commons Net","body":"<p>Use <a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#mlistDir()\" rel=\"nofollow noreferrer\"><code>FTPClient.mlistDir</code></a> (recommended, if the server supports it) or\n<a href=\"https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#listFiles()\" rel=\"nofollow noreferrer\"><code>FTPClient.listFiles</code></a> to retrieve list of files. And then filter them according to your needs.</p>\n<p>The following example downloads all files matching a regular expression <code>.*\\.jpg</code>:</p>\n<pre><code>FTPFile[] remoteFiles = ftpClient.listFiles(remotePath);\n\nPattern pattern = Pattern.compile(&quot;.*\\\\.jpg&quot;);\nStream&lt;FTPFile&gt; matchingFiles =\n    Arrays.stream(remoteFiles).filter(\n        (FTPFile remoteFile) -&gt; pattern.matcher(remoteFile.getName()).matches());\n\nfor (Iterator&lt;FTPFile&gt; iter = matchingFiles.iterator(); iter.hasNext(); ) {\n    FTPFile remoteFile = iter.next();\n    System.out.println(&quot;Found file &quot; + remoteFile.getName() + &quot;, downloading ...&quot;);\n\n    File localFile = new File(localPath + &quot;\\\\&quot; + remoteFile.getName());\n    \n    OutputStream outputStream =\n        new BufferedOutputStream(new FileOutputStream(localFile));\n    if (ftpClient.retrieveFile(remotePath + &quot;/&quot; + remoteFile.getName(), outputStream))\n    {\n        System.out.println(\n            &quot;File &quot; + remoteFile.getName() + &quot; downloaded successfully.&quot;);\n    }\n    outputStream.close();\n}\n</code></pre>\n"}],"owner":{"account_id":12239260,"reputation":144,"user_id":8932774,"display_name":"Karthik Deepan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3224,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":1,"score":7,"last_activity_date":1698048158,"creation_date":1523132524,"question_id":49711631,"body_markdown":"Basically I need to download list of matching files for the search from a FTP server.  I have the code to download a specific file from a FTP server.  But I need to download all the matching files with my wildcard search.  How is that possible in Java?\r\n\r\nHere is code for file downloading of a specific filename, from a FTP server - \r\n\r\n    import java.io.BufferedOutputStream;\r\n    import java.io.File;\r\n    import java.io.FileInputStream;\r\n    import java.io.FileOutputStream;\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.io.OutputStream;\r\n    import org.apache.commons.net.ftp.FTP;\r\n    import org.apache.commons.net.ftp.FTPClient;\r\n    import org.apache.commons.net.ftp.FTPFile;\r\n    public class FTPDownloadFileDemowithoutmodandfilefilter {\r\n        public static void main(String[] args) {\r\n            String server = &quot;test.rebex.net&quot;;\r\n            int port = 21;\r\n            String user = &quot;demo&quot;;\r\n            String pass = &quot;password&quot;;\r\n            FTPClient ftpClient = new FTPClient();\r\n            try {\r\n                ftpClient.connect(server, port);\r\n                ftpClient.login(user, pass);\r\n                ftpClient.enterLocalPassiveMode();\r\n                ftpClient.setFileType(FTP.BINARY_FILE_TYPE);\r\n               \r\n                File localFile = new File(&quot;C:\\\\project\\\\readme1.txt&quot;);\r\n                FTPFile remoteFile = ftpClient.mdtmFile(&quot;/readme.txt&quot;);\r\n                if (remoteFile != null)\r\n                {\r\n                    OutputStream outputStream =\r\n                        new BufferedOutputStream(new FileOutputStream(localFile));\r\n                    if (ftpClient.retrieveFile(remoteFile.getName(), outputStream))\r\n                    {\r\n                        System.out.println(&quot;File downloaded successfully.&quot;);\r\n                    }\r\n                    outputStream.close();\r\n    \r\n                    localFile.setLastModified(remoteFile.getTimestamp().getTimeInMillis());\r\n                }\r\n                \r\n            } catch (IOException ex) {\r\n                System.out.println(&quot;Error: &quot; + ex.getMessage());\r\n                ex.printStackTrace();\r\n            } finally {\r\n                try {\r\n                    if (ftpClient.isConnected()) {\r\n                        ftpClient.logout();\r\n                        ftpClient.disconnect();\r\n                    }\r\n                } catch (IOException ex) {\r\n                    ex.printStackTrace();\r\n                }\r\n            }\r\n    \r\n    }","title":"Download a files from FTP matching a wildcard using Java Apache Commons Net","body":"<p>Basically I need to download list of matching files for the search from a FTP server.  I have the code to download a specific file from a FTP server.  But I need to download all the matching files with my wildcard search.  How is that possible in Java?</p>\n\n<p>Here is code for file downloading of a specific filename, from a FTP server - </p>\n\n<pre><code>import java.io.BufferedOutputStream;\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.io.FileOutputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.OutputStream;\nimport org.apache.commons.net.ftp.FTP;\nimport org.apache.commons.net.ftp.FTPClient;\nimport org.apache.commons.net.ftp.FTPFile;\npublic class FTPDownloadFileDemowithoutmodandfilefilter {\n    public static void main(String[] args) {\n        String server = \"test.rebex.net\";\n        int port = 21;\n        String user = \"demo\";\n        String pass = \"password\";\n        FTPClient ftpClient = new FTPClient();\n        try {\n            ftpClient.connect(server, port);\n            ftpClient.login(user, pass);\n            ftpClient.enterLocalPassiveMode();\n            ftpClient.setFileType(FTP.BINARY_FILE_TYPE);\n\n            File localFile = new File(\"C:\\\\project\\\\readme1.txt\");\n            FTPFile remoteFile = ftpClient.mdtmFile(\"/readme.txt\");\n            if (remoteFile != null)\n            {\n                OutputStream outputStream =\n                    new BufferedOutputStream(new FileOutputStream(localFile));\n                if (ftpClient.retrieveFile(remoteFile.getName(), outputStream))\n                {\n                    System.out.println(\"File downloaded successfully.\");\n                }\n                outputStream.close();\n\n                localFile.setLastModified(remoteFile.getTimestamp().getTimeInMillis());\n            }\n\n        } catch (IOException ex) {\n            System.out.println(\"Error: \" + ex.getMessage());\n            ex.printStackTrace();\n        } finally {\n            try {\n                if (ftpClient.isConnected()) {\n                    ftpClient.logout();\n                    ftpClient.disconnect();\n                }\n            } catch (IOException ex) {\n                ex.printStackTrace();\n            }\n        }\n\n}\n</code></pre>\n"},{"tags":["java","tomcat","tomcat7","tomcat8"],"comments":[{"owner":{"account_id":593875,"reputation":20373,"user_id":276232,"accept_rate":50,"display_name":"Christopher Schultz"},"score":0,"creation_date":1343322256,"post_id":11656596,"comment_id":15474871,"body_markdown":"Please post your attempted configuration. It&#39;s hard to guess why it&#39;s not working when you don&#39;t post what you&#39;ve tried.","body":"Please post your attempted configuration. It&#39;s hard to guess why it&#39;s not working when you don&#39;t post what you&#39;ve tried."},{"owner":{"account_id":176213,"reputation":2413,"user_id":406759,"accept_rate":72,"display_name":"Gonzalo Gallotti"},"score":0,"creation_date":1343394920,"post_id":11656596,"comment_id":15497477,"body_markdown":"I&#39;ve added the line i&#39;am using in context.xml. Sorry and thanks","body":"I&#39;ve added the line i&#39;am using in context.xml. Sorry and thanks"},{"owner":{"account_id":593875,"reputation":20373,"user_id":276232,"accept_rate":50,"display_name":"Christopher Schultz"},"score":0,"creation_date":1343421198,"post_id":11656596,"comment_id":15509002,"body_markdown":"Do you want to disable scanning of all JAR files entirely? You have no `.tld` files that need to be auto-discovered and you don&#39;t use any annotations?","body":"Do you want to disable scanning of all JAR files entirely? You have no <code>.tld</code> files that need to be auto-discovered and you don&#39;t use any annotations?"},{"owner":{"account_id":176213,"reputation":2413,"user_id":406759,"accept_rate":72,"display_name":"Gonzalo Gallotti"},"score":0,"creation_date":1343926786,"post_id":11656596,"comment_id":15650106,"body_markdown":"I removed the entry from web.xml and the issue stoped. Still wanting to disable JarScanner from Context.xml (for prototyiping purposes)","body":"I removed the entry from web.xml and the issue stoped. Still wanting to disable JarScanner from Context.xml (for prototyiping purposes)"}],"answers":[{"tags":[],"owner":{"account_id":55444,"reputation":5230,"user_id":166062,"display_name":"Lari Hotari"},"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1687152456,"creation_date":1421360691,"answer_id":27974133,"question_id":11656596,"body_markdown":"You should add the JarScanner element as a child of the root Context element in the context.xml file.\r\n\r\nI have this kind of META-INF/context.xml file in the war file for disabling the JarScanner:\r\n\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;Context&gt;\r\n    &lt;JarScanner scanClassPath=&quot;false&quot; scanAllFiles=&quot;false&quot; scanAllDirectories=&quot;false&quot;/&gt;\r\n&lt;/Context&gt;\r\n```","title":"How to disable Tomcat JARScanner","body":"<p>You should add the JarScanner element as a child of the root Context element in the context.xml file.</p>\n<p>I have this kind of META-INF/context.xml file in the war file for disabling the JarScanner:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Context&gt;\n    &lt;JarScanner scanClassPath=&quot;false&quot; scanAllFiles=&quot;false&quot; scanAllDirectories=&quot;false&quot;/&gt;\n&lt;/Context&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":423223,"reputation":5101,"user_id":802482,"accept_rate":67,"display_name":"Black"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1698047777,"creation_date":1590839654,"answer_id":62102049,"question_id":11656596,"body_markdown":"you can disable the JarScanner globally for user-defined patterns by opening the file at\r\n\r\n    %TOMCAT_HOME%/conf/catalina.properties\r\n\r\nand add a filename pattern to `tomcat.util.scan.StandardJarScanFilter.jarsToSkip` list.\r\nFor example, if you want to disable jar scanning completely you could add:\r\n\r\n    tomcat.util.scan.StandardJarScanFilter.jarsToSkip=\\\r\n    *.jar,\\\r\n\r\nNOTE: this may of course lead to issues if you&#39;re employing JSTL, as templates won&#39;t be found by the scanner\r\n","title":"How to disable Tomcat JARScanner","body":"<p>you can disable the JarScanner globally for user-defined patterns by opening the file at</p>\n<pre><code>%TOMCAT_HOME%/conf/catalina.properties\n</code></pre>\n<p>and add a filename pattern to <code>tomcat.util.scan.StandardJarScanFilter.jarsToSkip</code> list.\nFor example, if you want to disable jar scanning completely you could add:</p>\n<pre><code>tomcat.util.scan.StandardJarScanFilter.jarsToSkip=\\\n*.jar,\\\n</code></pre>\n<p>NOTE: this may of course lead to issues if you're employing JSTL, as templates won't be found by the scanner</p>\n"},{"tags":[],"owner":{"account_id":7730752,"reputation":92,"user_id":5853985,"display_name":"Shaheed"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1649066108,"creation_date":1649066108,"answer_id":71735242,"question_id":11656596,"body_markdown":"  in your java app add this :\r\n  \r\n\r\n    @Bean\r\n    public TomcatServletWebServerFactory tomcatServletFactory() {\r\n        return new TomcatServletWebServerFactory() {\r\n            @Override\r\n            protected void postProcessContext(final Context context) {\r\n                ((StandardJarScanner) context.getJarScanner()).setScanManifest(false);\r\n            }\r\n        };\r\n    }","title":"How to disable Tomcat JARScanner","body":"<p>in your java app add this :</p>\n<pre><code>@Bean\npublic TomcatServletWebServerFactory tomcatServletFactory() {\n    return new TomcatServletWebServerFactory() {\n        @Override\n        protected void postProcessContext(final Context context) {\n            ((StandardJarScanner) context.getJarScanner()).setScanManifest(false);\n        }\n    };\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":90694,"reputation":31596,"user_id":249538,"accept_rate":91,"display_name":"goat"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661628723,"creation_date":1661628723,"answer_id":73513872,"question_id":11656596,"body_markdown":"This is what I did for Spring Boot. \r\n\r\nBasically, append a new ignored jar file to the existing list of jars to ignore. This way, you don&#39;t totally disable the scanner, affecting who knows what else.\r\n\r\n    @Configuration\r\n    public class Config {\r\n\r\n\t\t@Bean\r\n\t\tpublic ServletWebServerFactory servletContainer() {\r\n\t\t\treturn new TomcatServletWebServerFactory() {\r\n\t\t\t\t@Override\r\n\t\t\t\tprotected void postProcessContext(Context context) {\r\n\t\t\t\t\t// db2 puts a ref to pdq.jar in the manifest, and tomcat then tries to find it, but it doesn&#39;t exist.\r\n\t\t\t\t\t// The jar isn&#39;t needed, so we just disable looking for it. You could also remove it from the manifest,\r\n\t\t\t\t\t// but that prob needs to be done after the build process.\r\n\t\t\t\t\tJarScanFilter jarScanFilter = context.getJarScanner().getJarScanFilter();\r\n\t\t\t\t\tif (jarScanFilter instanceof StandardJarScanFilter) {\r\n\t\t\t\t\t\tStandardJarScanFilter filter = (StandardJarScanFilter) jarScanFilter;\r\n\t\t\t\t\t\tString oldTldSkip = filter.getTldSkip();\r\n\t\t\t\t\t\tString newTldSkip = oldTldSkip == null || oldTldSkip.trim().isEmpty() ? &quot;pdq.jar&quot; : oldTldSkip + &quot;,pdq.jar&quot;;\r\n\t\t\t\t\t\tfilter.setTldSkip(newTldSkip);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlogger.warn(&quot;Unable to disable the tomcat jar scanner for pdq.jar. You may see a FileNotFound exception complaining of not finding a db2 pdq.jar file. You can probably ignore the error. Ref: https://stackoverflow.com/questions/11656596/how-to-disable-tomcat-jarscanner&quot;);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\r\n    }","title":"How to disable Tomcat JARScanner","body":"<p>This is what I did for Spring Boot.</p>\n<p>Basically, append a new ignored jar file to the existing list of jars to ignore. This way, you don't totally disable the scanner, affecting who knows what else.</p>\n<pre><code>@Configuration\npublic class Config {\n\n    @Bean\n    public ServletWebServerFactory servletContainer() {\n        return new TomcatServletWebServerFactory() {\n            @Override\n            protected void postProcessContext(Context context) {\n                // db2 puts a ref to pdq.jar in the manifest, and tomcat then tries to find it, but it doesn't exist.\n                // The jar isn't needed, so we just disable looking for it. You could also remove it from the manifest,\n                // but that prob needs to be done after the build process.\n                JarScanFilter jarScanFilter = context.getJarScanner().getJarScanFilter();\n                if (jarScanFilter instanceof StandardJarScanFilter) {\n                    StandardJarScanFilter filter = (StandardJarScanFilter) jarScanFilter;\n                    String oldTldSkip = filter.getTldSkip();\n                    String newTldSkip = oldTldSkip == null || oldTldSkip.trim().isEmpty() ? &quot;pdq.jar&quot; : oldTldSkip + &quot;,pdq.jar&quot;;\n                    filter.setTldSkip(newTldSkip);\n                } else {\n                    logger.warn(&quot;Unable to disable the tomcat jar scanner for pdq.jar. You may see a FileNotFound exception complaining of not finding a db2 pdq.jar file. You can probably ignore the error. Ref: https://stackoverflow.com/questions/11656596/how-to-disable-tomcat-jarscanner&quot;);\n                }\n            }\n        };\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":176213,"reputation":2413,"user_id":406759,"accept_rate":72,"display_name":"Gonzalo Gallotti"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21143,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":27974133,"answer_count":4,"score":9,"last_activity_date":1698047777,"creation_date":1343242312,"question_id":11656596,"body_markdown":"**How:** To disable Tomcat JARScanner?  \r\n**Why:** To stop Tomcat scan every .jar in my LIB folder. \r\n\r\n\r\nAccording to [documentation][1] it says that it is possible to disable it within context.xml. But it seems to not be working. (May be I am missing something)\r\nI made an exhaustive search in forums and could not find the solution. \r\n\r\n\r\nThis is in context.xml (not working yet):\r\n\r\n    &lt;JarScanner scanClassPath=&quot;false&quot; scanAllFiles=&quot;false&quot; scanAllDirectories=&quot;false&quot;&gt;&lt;/JarScanner&gt;\r\n\r\nThanks in advance. \r\n\r\n\r\n  [1]: http://tomcat.apache.org/tomcat-7.0-doc/config/jar-scanner.html","title":"How to disable Tomcat JARScanner","body":"<p><strong>How:</strong> To disable Tomcat JARScanner?<br>\n<strong>Why:</strong> To stop Tomcat scan every .jar in my LIB folder. </p>\n\n<p>According to <a href=\"http://tomcat.apache.org/tomcat-7.0-doc/config/jar-scanner.html\" rel=\"nofollow noreferrer\">documentation</a> it says that it is possible to disable it within context.xml. But it seems to not be working. (May be I am missing something)\nI made an exhaustive search in forums and could not find the solution. </p>\n\n<p>This is in context.xml (not working yet):</p>\n\n<pre><code>&lt;JarScanner scanClassPath=\"false\" scanAllFiles=\"false\" scanAllDirectories=\"false\"&gt;&lt;/JarScanner&gt;\n</code></pre>\n\n<p>Thanks in advance. </p>\n"},{"tags":["java","android","gradle","github-actions"],"owner":{"account_id":5505460,"reputation":449,"user_id":4373421,"display_name":"Cheolho Jeon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698047548,"creation_date":1698040482,"question_id":77342875,"body_markdown":"I&#39;m building &amp; running my android unit tests on Github actions.\r\n\r\nMy gradle build logs says:\r\n\r\n~~~none\r\n&gt; Task :app:hiltJavaCompileDebug\r\nThe Daemon will expire after the build after running out of JVM Metaspace.\r\nThe project memory settings are likely not configured or are configured to an insufficient value.\r\nThe daemon will restart for the next build, which may increase subsequent build times.\r\nThese settings can be adjusted by setting &#39;org.gradle.jvmargs&#39; in &#39;gradle.properties&#39;.\r\nThe currently configured max heap space is &#39;4 GiB&#39; and the configured max metaspace is &#39;256 MiB&#39;.\r\nFor more information on how to set these values, visit the user guide at https://docs.gradle.org/8.0/userguide/build_environment.html#configuring_jvm_memory\r\nTo disable this warning, set &#39;org.gradle.daemon.performance.disable-logging=true&#39;.\r\nDaemon will be stopped at the end of the build after running out of JVM Metaspace\r\n~~~\r\n\r\nBut that&#39;s not true - I&#39;ve set the memory as below: (`gradle.properties`)\r\n~~~none\r\norg.gradle.jvmargs=-Xmx6g -Dfile.encoding=UTF-8 -XX:+UseParallelGC -XX:MaxMetaspaceSize=256m -XX:+HeapDumpOnOutOfMemoryError\r\n~~~\r\n\r\nMy Github Actions settings are as below:\r\n``` yml\r\n      - name: Run tests\r\n        uses: gradle/gradle-build-action@v2\r\n        with:\r\n          cache-read-only: false\r\n          arguments: &quot;${{ env.command }}&quot;\r\n```\r\n(where `env.command` is very long command with test names)\r\n\r\nAnyone encountered similar problems?","title":"Github Action&#39;s Gradle complains memory settings not configured - I did","body":"<p>I'm building &amp; running my android unit tests on Github actions.</p>\n<p>My gradle build logs says:</p>\n<pre class=\"lang-none prettyprint-override\"><code>&gt; Task :app:hiltJavaCompileDebug\nThe Daemon will expire after the build after running out of JVM Metaspace.\nThe project memory settings are likely not configured or are configured to an insufficient value.\nThe daemon will restart for the next build, which may increase subsequent build times.\nThese settings can be adjusted by setting 'org.gradle.jvmargs' in 'gradle.properties'.\nThe currently configured max heap space is '4 GiB' and the configured max metaspace is '256 MiB'.\nFor more information on how to set these values, visit the user guide at https://docs.gradle.org/8.0/userguide/build_environment.html#configuring_jvm_memory\nTo disable this warning, set 'org.gradle.daemon.performance.disable-logging=true'.\nDaemon will be stopped at the end of the build after running out of JVM Metaspace\n</code></pre>\n<p>But that's not true - I've set the memory as below: (<code>gradle.properties</code>)</p>\n<pre class=\"lang-none prettyprint-override\"><code>org.gradle.jvmargs=-Xmx6g -Dfile.encoding=UTF-8 -XX:+UseParallelGC -XX:MaxMetaspaceSize=256m -XX:+HeapDumpOnOutOfMemoryError\n</code></pre>\n<p>My Github Actions settings are as below:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>      - name: Run tests\n        uses: gradle/gradle-build-action@v2\n        with:\n          cache-read-only: false\n          arguments: &quot;${{ env.command }}&quot;\n</code></pre>\n<p>(where <code>env.command</code> is very long command with test names)</p>\n<p>Anyone encountered similar problems?</p>\n"},{"tags":["java","alpine-linux","openjdk-17"],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1645538546,"creation_date":1645522310,"answer_id":71218829,"question_id":71217570,"body_markdown":"The first page you linked *explains* why the Alpine build has been removed:\r\n\r\n&gt; &quot;*The Alpine Linux build previously available on this page was removed as of the first JDK 17 release candidate. It is not production-ready because it has not been tested thoroughly enough to be considered a GA build. Please use the early-access JDK 18 Alpine Linux build in its place.&quot;*\r\n\r\n&gt; Does this means alpine uses an early access build?\r\n\r\nI doubt it.\r\n\r\n&gt; Not GA? \r\n\r\nWell, the GA builds were deemed to be not &quot;GA quality&quot; ... due to lack of testing.\r\n\r\nBut if you compare the build name (e.g. 17.0.2_p8-r1) with the tags in the OpenJDK repo ([here][1]), it looks like the Alpine builds are tracking the 17u updates.  Indeed, it looks they are what the GA builds *would have been* ... if the team had been willing to apply the &quot;GA&quot; label to them.\r\n\r\nThis is moot if you follow the recommendation of the OpenJDK site and use the early-access JDK 18 Alpine Linux build instead.  Presumably they recommend this because they think it is *better quality* ... despite being early access!\r\n\r\n\r\n&gt; How can we confirm this?\r\n\r\nYou could contact the person responsible for creating the Alpine builds.  Or you could look at the evidence yourself.\r\n\r\n  [1]: https://github.com/openjdk/jdk17u/tags","title":"OpenJDK 17 Alpine build availability","body":"<p>The first page you linked <em>explains</em> why the Alpine build has been removed:</p>\n<blockquote>\n<p>&quot;<em>The Alpine Linux build previously available on this page was removed as of the first JDK 17 release candidate. It is not production-ready because it has not been tested thoroughly enough to be considered a GA build. Please use the early-access JDK 18 Alpine Linux build in its place.&quot;</em></p>\n</blockquote>\n<blockquote>\n<p>Does this means alpine uses an early access build?</p>\n</blockquote>\n<p>I doubt it.</p>\n<blockquote>\n<p>Not GA?</p>\n</blockquote>\n<p>Well, the GA builds were deemed to be not &quot;GA quality&quot; ... due to lack of testing.</p>\n<p>But if you compare the build name (e.g. 17.0.2_p8-r1) with the tags in the OpenJDK repo (<a href=\"https://github.com/openjdk/jdk17u/tags\" rel=\"nofollow noreferrer\">here</a>), it looks like the Alpine builds are tracking the 17u updates.  Indeed, it looks they are what the GA builds <em>would have been</em> ... if the team had been willing to apply the &quot;GA&quot; label to them.</p>\n<p>This is moot if you follow the recommendation of the OpenJDK site and use the early-access JDK 18 Alpine Linux build instead.  Presumably they recommend this because they think it is <em>better quality</em> ... despite being early access!</p>\n<blockquote>\n<p>How can we confirm this?</p>\n</blockquote>\n<p>You could contact the person responsible for creating the Alpine builds.  Or you could look at the evidence yourself.</p>\n"},{"tags":[],"owner":{"account_id":26233832,"reputation":21,"user_id":19909316,"display_name":"RonyRyan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698047202,"creation_date":1698047202,"answer_id":77343455,"question_id":71217570,"body_markdown":"Search JDK\r\n==========\r\nYou just need to search either openjdk or specific openjdk17\r\n\r\n```bash\r\napk search openjdk\r\n```\r\n&gt; **Or**\r\n\r\n```bash\r\napk search openjdk17\r\n```\r\n\r\n&gt; **Then just install after checking your favorite on the list, which on our case is openjdk17.**\r\n\r\n```bash\r\napk add openjdk17\r\n```\r\n\r\n### Hope it helps! ###\r\n\r\n&lt;hr/&gt; \r\n\r\n# Configure to work on terminal #\r\n\r\n&gt; Ensure nano is installed through `apk add nano` then open bash source file but for this case we will use zsh.\r\n\r\n```bash\r\nnano  ~/.zshrc\r\n```\r\n&gt; Paste the following on the end of file.\r\n\r\n```bash\r\nexport JAVA_HOME=/usr/lib/jvm/java-17-openjdk\r\nexport PATH=$PATH:$JAVA_HOME/bin\r\n\r\nexport LD_LIBRARY_PATH=$JAVA_HOME/lib/server\r\n```\r\n\r\n&gt; Restart zsh to save the changes. Thats all, next run java files on Alpine wsl.\r\n\r\n```bash\r\nsource ~/.bashrc\r\n```\r\n\r\n\r\n\r\n\r\n\r\n","title":"OpenJDK 17 Alpine build availability","body":"<h1>Search JDK</h1>\n<p>You just need to search either openjdk or specific openjdk17</p>\n<pre class=\"lang-bash prettyprint-override\"><code>apk search openjdk\n</code></pre>\n<blockquote>\n<p><strong>Or</strong></p>\n</blockquote>\n<pre class=\"lang-bash prettyprint-override\"><code>apk search openjdk17\n</code></pre>\n<blockquote>\n<p><strong>Then just install after checking your favorite on the list, which on our case is openjdk17.</strong></p>\n</blockquote>\n<pre class=\"lang-bash prettyprint-override\"><code>apk add openjdk17\n</code></pre>\n<h3>Hope it helps!</h3>\n<hr/> \n<h1>Configure to work on terminal</h1>\n<blockquote>\n<p>Ensure nano is installed through <code>apk add nano</code> then open bash source file but for this case we will use zsh.</p>\n</blockquote>\n<pre class=\"lang-bash prettyprint-override\"><code>nano  ~/.zshrc\n</code></pre>\n<blockquote>\n<p>Paste the following on the end of file.</p>\n</blockquote>\n<pre class=\"lang-bash prettyprint-override\"><code>export JAVA_HOME=/usr/lib/jvm/java-17-openjdk\nexport PATH=$PATH:$JAVA_HOME/bin\n\nexport LD_LIBRARY_PATH=$JAVA_HOME/lib/server\n</code></pre>\n<blockquote>\n<p>Restart zsh to save the changes. Thats all, next run java files on Alpine wsl.</p>\n</blockquote>\n<pre class=\"lang-bash prettyprint-override\"><code>source ~/.bashrc\n</code></pre>\n"}],"owner":{"account_id":6307461,"reputation":365,"user_id":4900133,"display_name":"enthusiast"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9209,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":71218829,"answer_count":2,"score":3,"last_activity_date":1698047202,"creation_date":1645515908,"question_id":71217570,"body_markdown":"It looks like &lt;https://jdk.java.net/17/&gt; says alpine build is not available, but the alpine repo has a package. &lt;https://pkgs.alpinelinux.org/package/edge/community/x86_64/openjdk17-jre&gt;\r\n\r\nAny idea why this happens? Does this means alpine uses an early access build? not GA? How can we confirm this?","title":"OpenJDK 17 Alpine build availability","body":"<p>It looks like <a href=\"https://jdk.java.net/17/\" rel=\"nofollow noreferrer\">https://jdk.java.net/17/</a> says alpine build is not available, but the alpine repo has a package. <a href=\"https://pkgs.alpinelinux.org/package/edge/community/x86_64/openjdk17-jre\" rel=\"nofollow noreferrer\">https://pkgs.alpinelinux.org/package/edge/community/x86_64/openjdk17-jre</a></p>\n<p>Any idea why this happens? Does this means alpine uses an early access build? not GA? How can we confirm this?</p>\n"},{"tags":["java","akamai"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1663772685,"post_id":73801424,"comment_id":130318984,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"answers":[{"tags":[],"owner":{"account_id":26402489,"reputation":31,"user_id":20052755,"display_name":"TOMMASO26175"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666019374,"creation_date":1663767172,"answer_id":73801670,"question_id":73801424,"body_markdown":"This means that Akamai (the provider that zalando uses for bot protection), has detected and stopped your request because it detected you as a bot. To avoid this &quot;stop&quot; you **MUST** send a `valid _abck cookie, generated by passing sensor data to the zalando akamai endpoint`( you can find using chrome devtools and analyzing the requests )","title":"Akamai Bypass (Java)","body":"<p>This means that Akamai (the provider that zalando uses for bot protection), has detected and stopped your request because it detected you as a bot. To avoid this &quot;stop&quot; you <strong>MUST</strong> send a <code>valid _abck cookie, generated by passing sensor data to the zalando akamai endpoint</code>( you can find using chrome devtools and analyzing the requests )</p>\n"}],"owner":{"account_id":19477475,"reputation":11,"user_id":14248605,"display_name":"Bryan Jeetun"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":827,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1698046652,"creation_date":1663766211,"question_id":73801424,"body_markdown":"I am writing a bot to auto purchase items on a website (zalando).\r\nEverything goes well from login to adding items to shopping cart but at the very end it doesn&#39;t work anyomore. It sends this error: \r\n```{  &quot;edge_error&quot;: &quot;halt&quot;,  &quot;ref_id&quot;: &quot;18.57c51102.1663765843.299fc0e&quot;,  &quot;wait&quot;: 60,  &quot;feedback&quot;: {    &quot;email&quot;: true,    &quot;url&quot;: &quot;&quot;,    &quot;recaptcha&quot;: {      &quot;enabled&quot;: false,      &quot;type&quot;: 0,      &quot;sitekey&quot;: &quot;&quot;    }  }}```\r\n\r\nI think it has something to do with their protection or just me missing a header or cookie or a delay... I honestly have no clue anymore\r\nThis is the code I use in the end (to checkout and generate a paypal link (post response)):\r\n\r\n\r\n    public void makePostJsonRequest(WebDriver driver, String eTag, String checkoutID)\r\n    {\r\n        retrieveCookiesMap(driver);\r\n        HttpClient httpClient = new DefaultHttpClient();\r\n        try {\r\n            HttpPost postRequest = new HttpPost(&quot;https://www.zalando.be/api/checkout/buy-now&quot;);\r\n            postRequest.setHeader(&quot;authority&quot;, &quot;www.zalando.be&quot;);\r\n            postRequest.setHeader(&quot;accept&quot;, &quot;application/json&quot;);\r\n            postRequest.setHeader(&quot;accept-language&quot;, &quot;en-US,en;q=0.9&quot;);\r\n            postRequest.setHeader(&quot;content-type&quot;, &quot;application/json&quot;);\r\n            postRequest.setHeader(&quot;cookie&quot;, &quot;language-preference=nl;&quot; +\r\n                    &quot; Zalando-Client-Id=&quot; + cookiesMap.get(&quot;Zalando-Client-Id&quot;) + &quot;;&quot; +\r\n                    &quot; ncx=f;&quot; +\r\n                    &quot; _gcl_au=&quot; + cookiesMap.get(&quot;_gcl_au&quot;) + &quot;;&quot; +\r\n                    &quot; sqt_cap=&quot; + cookiesMap.get(&quot;sqt_cap&quot;) + &quot;;&quot; +\r\n                    &quot; _ga=&quot; + cookiesMap.get(&quot;_ga&quot;) + &quot;;&quot; +\r\n                    &quot; _gid=&quot; + cookiesMap.get(&quot;_gid&quot;) + &quot;;&quot; +\r\n                    &quot; bm_sz=&quot; + cookiesMap.get(&quot;bm_sz&quot;) + &quot;;&quot; +\r\n                    &quot; ak_bms=&quot; + cookiesMap.get(&quot;ak_bms&quot;) + &quot;;&quot; +\r\n                    &quot; _gat_zalga=1;&quot; +\r\n                    &quot; mpulseinject=false;&quot; +\r\n                    &quot; frsx=&quot; + cookiesMap.get(&quot;frsx&quot;) + &quot;;&quot; +\r\n                    &quot; zsa=&quot; + cookiesMap.get(&quot;zsa&quot;) + &quot;;&quot; +\r\n                    &quot; zsr=&quot; + cookiesMap.get(&quot;zsr&quot;) + &quot;;&quot; +\r\n                    &quot; zsi=&quot; + cookiesMap.get(&quot;zsi&quot;) + &quot;;&quot; +\r\n                    &quot; bm_sv=&quot; + cookiesMap.get(&quot;bm_sv&quot;) + &quot;;&quot; +\r\n                    &quot; _abck=&quot; + cookiesMap.get(&quot;_abck&quot;) + &quot;;&quot;);\r\n            postRequest.setHeader(&quot;origin&quot;, &quot;https://www.zalando.be&quot;);\r\n            postRequest.setHeader(&quot;referer&quot;, &quot;https://www.zalando.be/checkout/confirm&quot;);\r\n            postRequest.setHeader(&quot;sec-ch-ua&quot;, &quot;\\&quot;Chromium\\&quot;;v=\\&quot;104\\&quot;, \\&quot; Not A;Brand\\&quot;;v=\\&quot;99\\&quot;, \\&quot;Google Chrome\\&quot;;v=\\&quot;104\\&quot;&quot;);\r\n            postRequest.setHeader(&quot;sec-ch-ua-mobile&quot;, &quot;?0&quot;);\r\n            postRequest.setHeader(&quot;sec-ch-ua-platform&quot;, &quot;\\&quot;Linux\\&quot;&quot;);\r\n            postRequest.setHeader(&quot;sec-fetch-dest&quot;, &quot;empty&quot;);\r\n            postRequest.setHeader(&quot;sec-fetch-mode&quot;, &quot;cors&quot;);\r\n            postRequest.setHeader(&quot;sec-fetch-site&quot;, &quot;same-origin&quot;);\r\n            postRequest.setHeader(&quot;user-agent&quot;, &quot;Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36&quot;);\r\n            postRequest.setHeader(&quot;x-xsrf-token&quot;, cookiesMap.get(&quot;frsx&quot;));\r\n            postRequest.setHeader(&quot;x-zalando-checkout-app&quot;, &quot;web&quot;);\r\n            postRequest.setHeader(&quot;x-zalando-footer-mode&quot;, &quot;desktop&quot;);\r\n            postRequest.setHeader(&quot;x-zalando-header-mode&quot;, &quot;desktop&quot;);\r\n            eTag = StringUtils.chop(eTag);\r\n            eTag += &quot;\\\\&quot;;\r\n\r\n            String jsonString = &quot;{\\&quot;checkoutId\\&quot;:\\&quot;&quot; + checkoutID + &quot;\\&quot;,&quot; +\r\n                    &quot;\\&quot;eTag\\&quot;:&quot; + &quot;\\&quot;\\\\&quot; + eTag + &quot;\\&quot;&quot; + &quot;\\&quot;&quot; + &quot;}&quot;;\r\n\r\n            System.out.println(jsonString);\r\n\r\n            StringEntity entity = new StringEntity(jsonString);\r\n\r\n            postRequest.setEntity(entity);\r\n\r\n            long startTime = System.currentTimeMillis();\r\n            HttpResponse response = httpClient.execute(postRequest);\r\n            long elapsedTime = System.currentTimeMillis() - startTime;\r\n            System.out.println(&quot;Time taken : &quot;+elapsedTime+&quot;ms&quot;);\r\n\r\n            InputStream is = response.getEntity().getContent();\r\n            Reader reader = new InputStreamReader(is);\r\n            BufferedReader bufferedReader = new BufferedReader(reader);\r\n            StringBuilder builder = new StringBuilder();\r\n            while (true) {\r\n                try {\r\n                    String line = bufferedReader.readLine();\r\n                    if (line != null) {\r\n                        builder.append(line);\r\n                    } else {\r\n                        break;\r\n                    }\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n            System.out.println(builder.toString());\r\n            System.out.println(&quot;****************&quot;);\r\n        } catch (Exception ex) {\r\n            ex.printStackTrace();\r\n        }\r\n    }\r\n\r\n","title":"Akamai Bypass (Java)","body":"<p>I am writing a bot to auto purchase items on a website (zalando).\nEverything goes well from login to adding items to shopping cart but at the very end it doesn't work anyomore. It sends this error:\n<code>{  &quot;edge_error&quot;: &quot;halt&quot;,  &quot;ref_id&quot;: &quot;18.57c51102.1663765843.299fc0e&quot;,  &quot;wait&quot;: 60,  &quot;feedback&quot;: {    &quot;email&quot;: true,    &quot;url&quot;: &quot;&quot;,    &quot;recaptcha&quot;: {      &quot;enabled&quot;: false,      &quot;type&quot;: 0,      &quot;sitekey&quot;: &quot;&quot;    }  }}</code></p>\n<p>I think it has something to do with their protection or just me missing a header or cookie or a delay... I honestly have no clue anymore\nThis is the code I use in the end (to checkout and generate a paypal link (post response)):</p>\n<pre><code>public void makePostJsonRequest(WebDriver driver, String eTag, String checkoutID)\n{\n    retrieveCookiesMap(driver);\n    HttpClient httpClient = new DefaultHttpClient();\n    try {\n        HttpPost postRequest = new HttpPost(&quot;https://www.zalando.be/api/checkout/buy-now&quot;);\n        postRequest.setHeader(&quot;authority&quot;, &quot;www.zalando.be&quot;);\n        postRequest.setHeader(&quot;accept&quot;, &quot;application/json&quot;);\n        postRequest.setHeader(&quot;accept-language&quot;, &quot;en-US,en;q=0.9&quot;);\n        postRequest.setHeader(&quot;content-type&quot;, &quot;application/json&quot;);\n        postRequest.setHeader(&quot;cookie&quot;, &quot;language-preference=nl;&quot; +\n                &quot; Zalando-Client-Id=&quot; + cookiesMap.get(&quot;Zalando-Client-Id&quot;) + &quot;;&quot; +\n                &quot; ncx=f;&quot; +\n                &quot; _gcl_au=&quot; + cookiesMap.get(&quot;_gcl_au&quot;) + &quot;;&quot; +\n                &quot; sqt_cap=&quot; + cookiesMap.get(&quot;sqt_cap&quot;) + &quot;;&quot; +\n                &quot; _ga=&quot; + cookiesMap.get(&quot;_ga&quot;) + &quot;;&quot; +\n                &quot; _gid=&quot; + cookiesMap.get(&quot;_gid&quot;) + &quot;;&quot; +\n                &quot; bm_sz=&quot; + cookiesMap.get(&quot;bm_sz&quot;) + &quot;;&quot; +\n                &quot; ak_bms=&quot; + cookiesMap.get(&quot;ak_bms&quot;) + &quot;;&quot; +\n                &quot; _gat_zalga=1;&quot; +\n                &quot; mpulseinject=false;&quot; +\n                &quot; frsx=&quot; + cookiesMap.get(&quot;frsx&quot;) + &quot;;&quot; +\n                &quot; zsa=&quot; + cookiesMap.get(&quot;zsa&quot;) + &quot;;&quot; +\n                &quot; zsr=&quot; + cookiesMap.get(&quot;zsr&quot;) + &quot;;&quot; +\n                &quot; zsi=&quot; + cookiesMap.get(&quot;zsi&quot;) + &quot;;&quot; +\n                &quot; bm_sv=&quot; + cookiesMap.get(&quot;bm_sv&quot;) + &quot;;&quot; +\n                &quot; _abck=&quot; + cookiesMap.get(&quot;_abck&quot;) + &quot;;&quot;);\n        postRequest.setHeader(&quot;origin&quot;, &quot;https://www.zalando.be&quot;);\n        postRequest.setHeader(&quot;referer&quot;, &quot;https://www.zalando.be/checkout/confirm&quot;);\n        postRequest.setHeader(&quot;sec-ch-ua&quot;, &quot;\\&quot;Chromium\\&quot;;v=\\&quot;104\\&quot;, \\&quot; Not A;Brand\\&quot;;v=\\&quot;99\\&quot;, \\&quot;Google Chrome\\&quot;;v=\\&quot;104\\&quot;&quot;);\n        postRequest.setHeader(&quot;sec-ch-ua-mobile&quot;, &quot;?0&quot;);\n        postRequest.setHeader(&quot;sec-ch-ua-platform&quot;, &quot;\\&quot;Linux\\&quot;&quot;);\n        postRequest.setHeader(&quot;sec-fetch-dest&quot;, &quot;empty&quot;);\n        postRequest.setHeader(&quot;sec-fetch-mode&quot;, &quot;cors&quot;);\n        postRequest.setHeader(&quot;sec-fetch-site&quot;, &quot;same-origin&quot;);\n        postRequest.setHeader(&quot;user-agent&quot;, &quot;Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36&quot;);\n        postRequest.setHeader(&quot;x-xsrf-token&quot;, cookiesMap.get(&quot;frsx&quot;));\n        postRequest.setHeader(&quot;x-zalando-checkout-app&quot;, &quot;web&quot;);\n        postRequest.setHeader(&quot;x-zalando-footer-mode&quot;, &quot;desktop&quot;);\n        postRequest.setHeader(&quot;x-zalando-header-mode&quot;, &quot;desktop&quot;);\n        eTag = StringUtils.chop(eTag);\n        eTag += &quot;\\\\&quot;;\n\n        String jsonString = &quot;{\\&quot;checkoutId\\&quot;:\\&quot;&quot; + checkoutID + &quot;\\&quot;,&quot; +\n                &quot;\\&quot;eTag\\&quot;:&quot; + &quot;\\&quot;\\\\&quot; + eTag + &quot;\\&quot;&quot; + &quot;\\&quot;&quot; + &quot;}&quot;;\n\n        System.out.println(jsonString);\n\n        StringEntity entity = new StringEntity(jsonString);\n\n        postRequest.setEntity(entity);\n\n        long startTime = System.currentTimeMillis();\n        HttpResponse response = httpClient.execute(postRequest);\n        long elapsedTime = System.currentTimeMillis() - startTime;\n        System.out.println(&quot;Time taken : &quot;+elapsedTime+&quot;ms&quot;);\n\n        InputStream is = response.getEntity().getContent();\n        Reader reader = new InputStreamReader(is);\n        BufferedReader bufferedReader = new BufferedReader(reader);\n        StringBuilder builder = new StringBuilder();\n        while (true) {\n            try {\n                String line = bufferedReader.readLine();\n                if (line != null) {\n                    builder.append(line);\n                } else {\n                    break;\n                }\n            } catch (Exception e) {\n                e.printStackTrace();\n            }\n        }\n        System.out.println(builder.toString());\n        System.out.println(&quot;****************&quot;);\n    } catch (Exception ex) {\n        ex.printStackTrace();\n    }\n}\n</code></pre>\n"},{"tags":["java","mysql","spring-boot","hibernate"],"answers":[{"tags":[],"owner":{"account_id":25785912,"reputation":52,"user_id":19530736,"display_name":"CuriousCat"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1698045764,"creation_date":1698045764,"answer_id":77343321,"question_id":77096172,"body_markdown":"Apparently, when the tables were restored (possibly recreated), the id was not created to auto-increment and even as a primary key. So, I modified the columns and that fixed the issue.","title":"How to fix the database returned no natively generated identity value","body":"<p>Apparently, when the tables were restored (possibly recreated), the id was not created to auto-increment and even as a primary key. So, I modified the columns and that fixed the issue.</p>\n"}],"owner":{"account_id":25785912,"reputation":52,"user_id":19530736,"display_name":"CuriousCat"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77343321,"answer_count":1,"score":0,"last_activity_date":1698046063,"creation_date":1694600350,"question_id":77096172,"body_markdown":"I keep getting the error above whenever I am trying to save. I am using MySQL and Springboot with Hibernate. An incident occurred — production tables were restored. After this whenever there is action that calls .save() the error is thrown. It was worthy to note that the DBA administrator revoked DDL right from the user as a short-term strategy.\r\n\r\nThe tables have auto-increment in them and this is a sample of one of the models.\r\n\r\n\r\n    public class Pojo implements Serializable {\r\n        \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        @JsonIgnore\r\n        private Long id;\r\n\r\nI would not know what else could be causing the error. I have read through other similar problems, none is able to solve the problem at hand.\r\n","title":"How to fix the database returned no natively generated identity value","body":"<p>I keep getting the error above whenever I am trying to save. I am using MySQL and Springboot with Hibernate. An incident occurred — production tables were restored. After this whenever there is action that calls .save() the error is thrown. It was worthy to note that the DBA administrator revoked DDL right from the user as a short-term strategy.</p>\n<p>The tables have auto-increment in them and this is a sample of one of the models.</p>\n<pre><code>public class Pojo implements Serializable {\n    \n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @JsonIgnore\n    private Long id;\n</code></pre>\n<p>I would not know what else could be causing the error. I have read through other similar problems, none is able to solve the problem at hand.</p>\n"},{"tags":["java","intellij-idea","keyboard-shortcuts","code-snippets","live-templates"],"comments":[{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":1,"creation_date":1349081591,"post_id":12669948,"comment_id":17097022,"body_markdown":"I use `iter` + `&lt;tab&gt;` and select `map.entrySet()` Do you need to create a new template to do this? If so you can look at how this one is implemented already.","body":"I use <code>iter</code> + <code>&lt;tab&gt;</code> and select <code>map.entrySet()</code> Do you need to create a new template to do this? If so you can look at how this one is implemented already."}],"answers":[{"tags":[],"owner":{"account_id":1427644,"reputation":47311,"user_id":1350762,"display_name":"maba"},"down_vote_count":0,"up_vote_count":47,"is_accepted":true,"score":47,"last_activity_date":1349081574,"creation_date":1349081574,"answer_id":12670127,"question_id":12669948,"body_markdown":"It is easier if you just type `iter` and then &lt;kbd&gt;Tab&lt;/kbd&gt;.\r\n\r\nYou will get a drop-down and there you can choose `map.entrySet()` and it will give you:\r\n\r\n    for (Map.Entry&lt;String, Object&gt; stringObjectEntry : map.entrySet()) {\r\n           \r\n    }\r\n","title":"Live Template fore Intellij IDEA for Iterating through Map","body":"<p>It is easier if you just type <code>iter</code> and then <kbd>Tab</kbd>.</p>\n\n<p>You will get a drop-down and there you can choose <code>map.entrySet()</code> and it will give you:</p>\n\n<pre><code>for (Map.Entry&lt;String, Object&gt; stringObjectEntry : map.entrySet()) {\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":527903,"reputation":2938,"user_id":1605852,"display_name":"Sivabalan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1496843378,"creation_date":1438161241,"answer_id":31696121,"question_id":12669948,"body_markdown":"To view a list of live template available: `Ctrl + J` and then &lt;kbd&gt;Tab&lt;/kbd&gt;.\r\n\r\nFrom there you will have list of live template, **iter** (for each loop) will be on the list.","title":"Live Template fore Intellij IDEA for Iterating through Map","body":"<p>To view a list of live template available: <code>Ctrl + J</code> and then <kbd>Tab</kbd>.</p>\n\n<p>From there you will have list of live template, <strong>iter</strong> (for each loop) will be on the list.</p>\n"},{"tags":[],"owner":{"account_id":17181260,"reputation":1,"user_id":12436650,"display_name":"Madcode"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1579524398,"creation_date":1579524398,"answer_id":59823611,"question_id":12669948,"body_markdown":"I wrote this, it works in 1 step. I also like having the `key` and `value` in there already, but those can be omitted:\r\n\r\n    for (Map.Entry&lt;$KEY_TYPE$, $VALUE_TYPE$&gt; $PAIR$ : $ITERABLE_TYPE$.entrySet()) {\r\n        $KEY_TYPE$ key = $PAIR$.getKey();\r\n        $VALUE_TYPE$ value = $PAIR$.getValue();\r\n        $END$\r\n    }\r\n\r\nVariables:\r\n\r\n- KEY_TYPE: `guessElementType(iterableVariable())`\r\n- VALUE_TYPE: `regularExpression(typeOfVariable(ITERABLE_TYPE),&quot;^.*,(.*)&gt;$&quot;, &quot;$1&quot;)`\r\n- PAIR: `suggestVariableName()`\r\n- ITERABLE_TYPE: `variableOfType(&quot;java.util.Map&quot;)`\r\n\r\nThe [large amount of variables and functions](https://www.jetbrains.com/help/idea/template-variables.html) make the Live Templates a powerful tool. In VALUE_TYPE, I am using a regular expression to get the `ValueType` out of `Map&lt;KeyType, ValueType&gt;`. I tried a lot of &quot;cleaner&quot; approaches, but none worked.\r\n\r\n","title":"Live Template fore Intellij IDEA for Iterating through Map","body":"<p>I wrote this, it works in 1 step. I also like having the <code>key</code> and <code>value</code> in there already, but those can be omitted:</p>\n\n<pre><code>for (Map.Entry&lt;$KEY_TYPE$, $VALUE_TYPE$&gt; $PAIR$ : $ITERABLE_TYPE$.entrySet()) {\n    $KEY_TYPE$ key = $PAIR$.getKey();\n    $VALUE_TYPE$ value = $PAIR$.getValue();\n    $END$\n}\n</code></pre>\n\n<p>Variables:</p>\n\n<ul>\n<li>KEY_TYPE: <code>guessElementType(iterableVariable())</code></li>\n<li>VALUE_TYPE: <code>regularExpression(typeOfVariable(ITERABLE_TYPE),\"^.*,(.*)&gt;$\", \"$1\")</code></li>\n<li>PAIR: <code>suggestVariableName()</code></li>\n<li>ITERABLE_TYPE: <code>variableOfType(\"java.util.Map\")</code></li>\n</ul>\n\n<p>The <a href=\"https://www.jetbrains.com/help/idea/template-variables.html\" rel=\"nofollow noreferrer\">large amount of variables and functions</a> make the Live Templates a powerful tool. In VALUE_TYPE, I am using a regular expression to get the <code>ValueType</code> out of <code>Map&lt;KeyType, ValueType&gt;</code>. I tried a lot of \"cleaner\" approaches, but none worked.</p>\n"},{"tags":[],"owner":{"account_id":1329158,"reputation":139,"user_id":1273403,"display_name":"sagaofsilence"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698045297,"creation_date":1698045297,"answer_id":77343273,"question_id":12669948,"body_markdown":"It is easier if you just type `itm` and then `Tab`.\r\n\r\n     for (Map.Entry&lt;String, Object&gt; entry: map.entrySet()) {\r\n         String key = entry.getKey();\r\n         List&lt;String&gt; value = entry.getValue();   \r\n     }","title":"Live Template fore Intellij IDEA for Iterating through Map","body":"<p>It is easier if you just type <code>itm</code> and then <code>Tab</code>.</p>\n<pre><code> for (Map.Entry&lt;String, Object&gt; entry: map.entrySet()) {\n     String key = entry.getKey();\n     List&lt;String&gt; value = entry.getValue();   \n }\n</code></pre>\n"}],"owner":{"account_id":182362,"reputation":15840,"user_id":416996,"accept_rate":85,"display_name":"Jama A."},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6858,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"accepted_answer_id":12670127,"answer_count":4,"score":19,"last_activity_date":1698045297,"creation_date":1349080798,"question_id":12669948,"body_markdown":"We can iterate through collection easily by pressing &lt;kbd&gt;Ctrl&lt;/kbd&gt;+&lt;kbd&gt;Alt&lt;/kbd&gt;+&lt;kbd&gt;T&lt;/kbd&gt;, ![][1]\r\n\r\nAnd then I wanted to create such template for iterating through map:\r\nI wrote these lines to *template text* box:\r\n\r\n    for (Map.Entry&lt;$ELEMENT_TYPE$&gt; $VAR$ : $SELECTION$.entrySet()) {\r\n      $END$\r\n    }\r\n     \r\nNow it is generating these codes:\r\n \r\n   \r\n\r\n     HashMap&lt;String,Object&gt; map=new HashMap&lt;String,Object&gt;();\r\n        for (Map.Entry&lt;Object&gt; objectEntry : map.entrySet()) {\r\n                        \r\n        }\r\n \r\n\r\n   \r\n `Map.Entry&lt;Object&gt;` should be `Map.Entry&lt;String,Object&gt;`. I cannot find a way to introduce variable correctly. How can I do that?\r\n\r\n  [1]: http://i.stack.imgur.com/EjE8Q.png","title":"Live Template fore Intellij IDEA for Iterating through Map","body":"<p>We can iterate through collection easily by pressing <kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>T</kbd>, <img src=\"https://i.stack.imgur.com/EjE8Q.png\" alt=\"\"></p>\n\n<p>And then I wanted to create such template for iterating through map:\nI wrote these lines to <em>template text</em> box:</p>\n\n<pre><code>for (Map.Entry&lt;$ELEMENT_TYPE$&gt; $VAR$ : $SELECTION$.entrySet()) {\n  $END$\n}\n</code></pre>\n\n<p>Now it is generating these codes:</p>\n\n<pre><code> HashMap&lt;String,Object&gt; map=new HashMap&lt;String,Object&gt;();\n    for (Map.Entry&lt;Object&gt; objectEntry : map.entrySet()) {\n\n    }\n</code></pre>\n\n<p><code>Map.Entry&lt;Object&gt;</code> should be <code>Map.Entry&lt;String,Object&gt;</code>. I cannot find a way to introduce variable correctly. How can I do that?</p>\n"},{"tags":["java","android","datetime-format"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1697807046,"post_id":77330981,"comment_id":136329596,"body_markdown":"So your problem is that `ε` is displayed (instead of `έ`) ?","body":"So your problem is that <code>ε</code> is displayed (instead of <code>έ</code>) ?"},{"owner":{"account_id":15480820,"reputation":71,"user_id":11168157,"display_name":"Chris Damianidis"},"score":0,"creation_date":1697807206,"post_id":77330981,"comment_id":136329626,"body_markdown":"@Abra No, read again please carefully because I describe my problem. It&#39;s about the meaning of the words, I want November but I get November&#39;s.","body":"@Abra No, read again please carefully because I describe my problem. It&#39;s about the meaning of the words, I want November but I get November&#39;s."},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":1,"creation_date":1697808758,"post_id":77330981,"comment_id":136329930,"body_markdown":"have you tried `&quot;LLLL yyyy&quot;` ? From the [documentation](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/format/DateTimeFormatter.html): &quot;Pattern letters &#39;L&#39;, &#39;c&#39;, and &#39;q&#39; specify the stand-alone form of the text styles.&quot; (and I would even prefer `&quot;LLLL uuuu&quot;` {for the year, see documentation} )","body":"have you tried <code>&quot;LLLL yyyy&quot;</code> ? From the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/format/DateTimeFormatter.html\" rel=\"nofollow noreferrer\">documentation</a>: &quot;Pattern letters &#39;L&#39;, &#39;c&#39;, and &#39;q&#39; specify the stand-alone form of the text styles.&quot; (and I would even prefer <code>&quot;LLLL uuuu&quot;</code> {for the year, see documentation} )"},{"owner":{"account_id":15480820,"reputation":71,"user_id":11168157,"display_name":"Chris Damianidis"},"score":0,"creation_date":1697810104,"post_id":77330981,"comment_id":136330204,"body_markdown":"@user85421 unfortunately for me no, I get this result https://ibb.co/Ykb7nYb","body":"@user85421 unfortunately for me no, I get this result <a href=\"https://ibb.co/Ykb7nYb\" rel=\"nofollow noreferrer\">ibb.co/Ykb7nYb</a>"},{"owner":{"account_id":15480820,"reputation":71,"user_id":11168157,"display_name":"Chris Damianidis"},"score":0,"creation_date":1698044086,"post_id":77330981,"comment_id":136350310,"body_markdown":"@user85421 I don&#39;t know your code seems right, when i put as format &quot;LLLL yyyy&quot; I get back &quot;10 2023&quot; and when I put &quot;MMMM yyyy&quot; I get back text in the wrong way as I told in my question&#39;s headline.","body":"@user85421 I don&#39;t know your code seems right, when i put as format &quot;LLLL yyyy&quot; I get back &quot;10 2023&quot; and when I put &quot;MMMM yyyy&quot; I get back text in the wrong way as I told in my question&#39;s headline."}],"answers":[{"tags":[],"owner":{"account_id":17528529,"reputation":306,"user_id":12713089,"display_name":"Hossein Shahmohammadi"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1697809278,"creation_date":1697809278,"answer_id":77331403,"question_id":77330981,"body_markdown":"this code will work for you :\r\n\r\n    public static String monthYearFromDate(LocalDate date)\r\n    {\r\n        Locale greekLocale = new Locale(&quot;el&quot;,&quot;GR&quot;);\r\n        DateTimeFormatter formatter = new DateTimeFormatterBuilder()\r\n                .appendPattern(&quot;LLLL yyyy&quot;)\r\n                .toFormatter(greekLocale);\r\n        return formatter.format(date);\r\n    }\r\n\r\nIf you got confused I would suggest you to read JDK docs","title":"datetimeformatter doesnt return the expected output of month value in greek locale","body":"<p>this code will work for you :</p>\n<pre><code>public static String monthYearFromDate(LocalDate date)\n{\n    Locale greekLocale = new Locale(&quot;el&quot;,&quot;GR&quot;);\n    DateTimeFormatter formatter = new DateTimeFormatterBuilder()\n            .appendPattern(&quot;LLLL yyyy&quot;)\n            .toFormatter(greekLocale);\n    return formatter.format(date);\n}\n</code></pre>\n<p>If you got confused I would suggest you to read JDK docs</p>\n"}],"owner":{"account_id":15480820,"reputation":71,"user_id":11168157,"display_name":"Chris Damianidis"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":109,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1698045007,"creation_date":1697805467,"question_id":77330981,"body_markdown":"I am building a calendar so for every month i show i want in the top to show the month following by the year like: &quot;November 2023&quot;, the application is in greek so in greek the same result I expect is: &quot;Νοέμβριος 2023&quot;. I made a method and the output i get is &quot;Νοεμβρίου 2023&quot;, this output in english is like November&#39;s 2023, in free translation. I know that maybe a solution is via an MapList that based the wrong value I give the true I want. I want to know if there is another way faster, because i cant find any built in way. \r\n\r\n\r\nI think for greek programmers maybe is easier to help me, but appreciate any help by every programmer that had similar problem in his native language.\r\n \r\n\r\n       public static String monthYearFromDate(LocalDate date) \r\n        {\r\n            Locale greekLocale = new Locale(&quot;el&quot;);\r\n            DateTimeFormatter formatter = new DateTimeFormatterBuilder()\r\n                    .appendPattern(&quot;MMMM yyyy&quot;)\r\n                    .toFormatter(greekLocale);\r\n    \r\n            return date.format(formatter);\r\n        }\r\n\r\n[![This is the wrong format.][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/X8Ewh.jpg","title":"datetimeformatter doesnt return the expected output of month value in greek locale","body":"<p>I am building a calendar so for every month i show i want in the top to show the month following by the year like: &quot;November 2023&quot;, the application is in greek so in greek the same result I expect is: &quot;Νοέμβριος 2023&quot;. I made a method and the output i get is &quot;Νοεμβρίου 2023&quot;, this output in english is like November's 2023, in free translation. I know that maybe a solution is via an MapList that based the wrong value I give the true I want. I want to know if there is another way faster, because i cant find any built in way.</p>\n<p>I think for greek programmers maybe is easier to help me, but appreciate any help by every programmer that had similar problem in his native language.</p>\n<pre><code>   public static String monthYearFromDate(LocalDate date) \n    {\n        Locale greekLocale = new Locale(&quot;el&quot;);\n        DateTimeFormatter formatter = new DateTimeFormatterBuilder()\n                .appendPattern(&quot;MMMM yyyy&quot;)\n                .toFormatter(greekLocale);\n\n        return date.format(formatter);\n    }\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/X8Ewh.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/X8Ewh.jpg\" alt=\"This is the wrong format.\" /></a></p>\n"},{"tags":["java","terminal","osx-mavericks"],"comments":[{"owner":{"account_id":3579901,"reputation":4953,"user_id":2988360,"accept_rate":77,"display_name":"PKlumpp"},"score":0,"creation_date":1400058626,"post_id":23650193,"comment_id":36322724,"body_markdown":"execute java commands or os commands?","body":"execute java commands or os commands?"},{"owner":{"account_id":2447660,"reputation":3251,"user_id":2134587,"accept_rate":28,"display_name":"Gobi M"},"score":0,"creation_date":1400058717,"post_id":23650193,"comment_id":36322789,"body_markdown":"os commands like rm filename","body":"os commands like rm filename"},{"owner":{"account_id":2049682,"reputation":7411,"user_id":1828937,"accept_rate":56,"display_name":"Dmitry Ginzburg"},"score":1,"creation_date":1400058904,"post_id":23650193,"comment_id":36322938,"body_markdown":"It is absolutely the same as for Linux, you should look at this answer: http://stackoverflow.com/a/15356548/1828937","body":"It is absolutely the same as for Linux, you should look at this answer: <a href=\"http://stackoverflow.com/a/15356548/1828937\">stackoverflow.com/a/15356548/1828937</a>"},{"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"score":0,"creation_date":1698045421,"post_id":23650193,"comment_id":136350511,"body_markdown":"Do you really need to open a terminal window or do you need to display the output and accept input from the console?","body":"Do you really need to open a terminal window or do you need to display the output and accept input from the console?"}],"answers":[{"tags":[],"owner":{"account_id":4462273,"reputation":38,"user_id":3630759,"display_name":"SongLing Dong"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1460031650,"creation_date":1400059668,"answer_id":23650641,"question_id":23650193,"body_markdown":"You need to run it using bash executable like this:\r\n\r\n    Runtime.getRuntime().exec(&quot;/bin/bash -c **YouTerminalSoftWareName**&quot;);\r\n\r\nYouTerminalSoftWareName must be absolute path or aready in your PATH environment variable","title":"How to open Terminal and execute command using java code in OSX","body":"<p>You need to run it using bash executable like this:</p>\n\n<pre><code>Runtime.getRuntime().exec(\"/bin/bash -c **YouTerminalSoftWareName**\");\n</code></pre>\n\n<p>YouTerminalSoftWareName must be absolute path or aready in your PATH environment variable</p>\n"},{"tags":[],"owner":{"account_id":9509982,"reputation":1,"user_id":7068224,"display_name":"Jitu Patel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1549341520,"creation_date":1549340035,"answer_id":54527603,"question_id":23650193,"body_markdown":"Use Apple Script Editor to open Terminal and run your code.\r\n\r\nFor Example :\r\n\r\n    String action1 = jsonDriver.readApplicationDetails(&quot;OFF&quot;);\r\n    Runtime runtime = Runtime.getRuntime();\r\n    String applescriptCommand = &quot;tell application \\&quot;Terminal\\&quot;\\n&quot; + \r\n             &quot;activate\\n&quot; + &quot;delay 1\\n&quot; + &quot;tell application \\&quot;System Events\\&quot;\\n&quot; + \r\n             &quot;keystroke \\&quot;&quot; + action1 + &quot;\\&quot;\\n&quot; + &quot;end tell\\n&quot; + &quot;end tell&quot;; \r\n    String[] args1 = { &quot;osascript&quot;, &quot;-e&quot;, applescriptCommand };\r\n    Process process = runtime.exec(args1);\r\n    Thread.sleep(5000);\r\n\r\n","title":"How to open Terminal and execute command using java code in OSX","body":"<p>Use Apple Script Editor to open Terminal and run your code.</p>\n\n<p>For Example :</p>\n\n<pre><code>String action1 = jsonDriver.readApplicationDetails(\"OFF\");\nRuntime runtime = Runtime.getRuntime();\nString applescriptCommand = \"tell application \\\"Terminal\\\"\\n\" + \n         \"activate\\n\" + \"delay 1\\n\" + \"tell application \\\"System Events\\\"\\n\" + \n         \"keystroke \\\"\" + action1 + \"\\\"\\n\" + \"end tell\\n\" + \"end tell\"; \nString[] args1 = { \"osascript\", \"-e\", applescriptCommand };\nProcess process = runtime.exec(args1);\nThread.sleep(5000);\n</code></pre>\n"}],"owner":{"account_id":2447660,"reputation":3251,"user_id":2134587,"accept_rate":28,"display_name":"Gobi M"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10696,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1698044870,"creation_date":1400058452,"question_id":23650193,"body_markdown":"How to launch terminal and execute some commands using java code in MAC?\r\n\r\nSimilar question i have found for LINUX OS from below link.\r\n\r\nhttps://stackoverflow.com/questions/15356405/how-to-run-a-command-at-terminal-from-java-program","title":"How to open Terminal and execute command using java code in OSX","body":"<p>How to launch terminal and execute some commands using java code in MAC?</p>\n\n<p>Similar question i have found for LINUX OS from below link.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/15356405/how-to-run-a-command-at-terminal-from-java-program\">how to run a command at terminal from java program?</a></p>\n"},{"tags":["python","java","maven","graalvm"],"comments":[{"owner":{"account_id":213468,"reputation":103493,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1697629528,"post_id":77315830,"comment_id":136303308,"body_markdown":"The word _&quot;crash&quot;_  has a specific meaning (terminating abruptly), and in this case Maven didn&#39;t _&quot;crash&quot;_, it exited with an error because a precondition of a plugin wasn&#39;t met (i.e. _&quot;You must set JAVA_HOME to a GraalVM with Python installed.&quot;_), and that plugin reported the error to Maven, and then Maven reported that error to you.","body":"The word <i>&quot;crash&quot;</i>  has a specific meaning (terminating abruptly), and in this case Maven didn&#39;t <i>&quot;crash&quot;</i>, it exited with an error because a precondition of a plugin wasn&#39;t met (i.e. <i>&quot;You must set JAVA_HOME to a GraalVM with Python installed.&quot;</i>), and that plugin reported the error to Maven, and then Maven reported that error to you."},{"owner":{"account_id":29699400,"reputation":3,"user_id":22761917,"display_name":"Eshgin Hasanov"},"score":0,"creation_date":1697630507,"post_id":77315830,"comment_id":136303512,"body_markdown":"It was my first time to ask question. I sometimes am not well aware of exact terminology. Thank you for correction.","body":"It was my first time to ask question. I sometimes am not well aware of exact terminology. Thank you for correction."},{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1697645436,"post_id":77315830,"comment_id":136306937,"body_markdown":"“ You must set JAVA_HOME to a GraalVM with Python installed.” - sounds like you can’t skip that step.","body":"“ You must set JAVA_HOME to a GraalVM with Python installed.” - sounds like you can’t skip that step."}],"answers":[{"tags":[],"owner":{"account_id":125486,"reputation":2868,"user_id":321302,"accept_rate":100,"display_name":"Steves"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1698044729,"creation_date":1698044729,"answer_id":77343221,"question_id":77315830,"body_markdown":"The latest release of GraalVM (GraalVM for JDK21) changes how languages are deployed. There is no `gu` (Graal Updater) and GraalPy is not installed into the GraalVM installation, but instead it is published on Mavencentral. The `pom.xml` script in the article assumes older version of GraalVM. We will update the article. \r\n\r\nFor the time being, this is a new article about the changes:\r\n\r\nhttps://medium.com/graalvm/truffle-unchained-13887b77b62c\r\n\r\nyou&#39;d have to modify `pom.xml` from the old GraalPy article accordingly. Another alternative is to use the new GraalPy&#39;s `standalone` tool to generate a skeleton of Java app:\r\n\r\nhttps://www.graalvm.org/latest/reference-manual/python/standalone-binaries/#embedding-graalpy-in-a-java-application","title":"How to install GraalVM with Python?","body":"<p>The latest release of GraalVM (GraalVM for JDK21) changes how languages are deployed. There is no <code>gu</code> (Graal Updater) and GraalPy is not installed into the GraalVM installation, but instead it is published on Mavencentral. The <code>pom.xml</code> script in the article assumes older version of GraalVM. We will update the article.</p>\n<p>For the time being, this is a new article about the changes:</p>\n<p><a href=\"https://medium.com/graalvm/truffle-unchained-13887b77b62c\" rel=\"nofollow noreferrer\">https://medium.com/graalvm/truffle-unchained-13887b77b62c</a></p>\n<p>you'd have to modify <code>pom.xml</code> from the old GraalPy article accordingly. Another alternative is to use the new GraalPy's <code>standalone</code> tool to generate a skeleton of Java app:</p>\n<p><a href=\"https://www.graalvm.org/latest/reference-manual/python/standalone-binaries/#embedding-graalpy-in-a-java-application\" rel=\"nofollow noreferrer\">https://www.graalvm.org/latest/reference-manual/python/standalone-binaries/#embedding-graalpy-in-a-java-application</a></p>\n"}],"owner":{"account_id":29699400,"reputation":3,"user_id":22761917,"display_name":"Eshgin Hasanov"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":127,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77343221,"answer_count":1,"score":0,"last_activity_date":1698044729,"creation_date":1697627975,"question_id":77315830,"body_markdown":"I wanted to test the [GraalVM project](https://github.com/hpi-swa-lab/graalpython-java-example). I firstly installed [graalvm-jdk-21.0.1+12.1](https://www.graalvm.org/downloads/); however, in the step where I had to run the command &#39;&quot;${JAVA_HOME}&quot;/bin/gu install python&#39;, I run into trouble.  There was no /bin/gu file inside the &quot;graalvm-jdk-21.0.1+12.1&quot; directory.\r\n\r\nI then installed [graalvm-jdk-17.0.9+11.1](https://www.graalvm.org/downloads/) which contained /bin/gu file. But this time I run into another issue which was:\r\n[Python not available](https://i.stack.imgur.com/RhCbr.png)\r\n\r\nI tried to skip this step and run &quot;mvn compile&quot; and it gave the error below:\r\n`\r\n```\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  0.623 s\r\n[INFO] Finished at: 2023-10-18T15:08:57+04:00\r\n[INFO] ------------------------------------------------------------------------\r\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-enforcer-plugin:3.0.0-M3:enforce (enforce-graalvm-python) on project PygalExample: org.apache.maven.plugins.enforcer.RequireFilesExist failed with message:\r\n[ERROR] You must set JAVA_HOME to a GraalVM with Python installed.\r\n[ERROR] Some required files are missing:\r\n[ERROR] /home/eshqin/Downloads/graalvm-jdk-17_linux-x64_bin/graalvm-jdk-17.0.9+11.1/bin/graalpython\r\n[ERROR] \r\n[ERROR] -&gt; [Help 1]\r\n[ERROR] \r\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n[ERROR] \r\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\r\n\r\n````\r\n\r\nHow can I solve this issue and replicate the test? When I run &quot;mvn clean install&quot; it also fails.\r\n\r\nMy operating system is Ubuntu 20.04\r\n\r\nI would like this project to be compiled and run successfully.","title":"How to install GraalVM with Python?","body":"<p>I wanted to test the <a href=\"https://github.com/hpi-swa-lab/graalpython-java-example\" rel=\"nofollow noreferrer\">GraalVM project</a>. I firstly installed <a href=\"https://www.graalvm.org/downloads/\" rel=\"nofollow noreferrer\">graalvm-jdk-21.0.1+12.1</a>; however, in the step where I had to run the command '&quot;${JAVA_HOME}&quot;/bin/gu install python', I run into trouble.  There was no /bin/gu file inside the &quot;graalvm-jdk-21.0.1+12.1&quot; directory.</p>\n<p>I then installed <a href=\"https://www.graalvm.org/downloads/\" rel=\"nofollow noreferrer\">graalvm-jdk-17.0.9+11.1</a> which contained /bin/gu file. But this time I run into another issue which was:\n<a href=\"https://i.stack.imgur.com/RhCbr.png\" rel=\"nofollow noreferrer\">Python not available</a></p>\n<p>I tried to skip this step and run &quot;mvn compile&quot; and it gave the error below:\n`</p>\n<pre><code>[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  0.623 s\n[INFO] Finished at: 2023-10-18T15:08:57+04:00\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-enforcer-plugin:3.0.0-M3:enforce (enforce-graalvm-python) on project PygalExample: org.apache.maven.plugins.enforcer.RequireFilesExist failed with message:\n[ERROR] You must set JAVA_HOME to a GraalVM with Python installed.\n[ERROR] Some required files are missing:\n[ERROR] /home/eshqin/Downloads/graalvm-jdk-17_linux-x64_bin/graalvm-jdk-17.0.9+11.1/bin/graalpython\n[ERROR] \n[ERROR] -&gt; [Help 1]\n[ERROR] \n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR] \n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\n\n</code></pre>\n<p>How can I solve this issue and replicate the test? When I run &quot;mvn clean install&quot; it also fails.</p>\n<p>My operating system is Ubuntu 20.04</p>\n<p>I would like this project to be compiled and run successfully.</p>\n"},{"tags":["java","visual-studio-code","syntax-highlighting"],"comments":[{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1697986917,"post_id":77340403,"comment_id":136345381,"body_markdown":"This seems like a bug. You should report it to the Visual Code project.","body":"This seems like a bug. You should report it to the Visual Code project."},{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1697987489,"post_id":77340403,"comment_id":136345437,"body_markdown":"One line method `IntStream.of(7, 1, 2, 3, 4, 5, 6).mapToObj(val -&gt; DayOfWeek.of(val).getDisplayName(TextStyle.FULL, Locale.ENGLISH) + &quot;s Temperature:&quot;).forEachOrdered(sb -&gt; System.out.printf(&quot;%-23s %d%n&quot;, sb, ThreadLocalRandom.current().nextInt(100)));`","body":"One line method <code>IntStream.of(7, 1, 2, 3, 4, 5, 6).mapToObj(val -&gt; DayOfWeek.of(val).getDisplayName(TextStyle.FULL, Locale.ENGLISH) + &quot;s Temperature:&quot;).forEachOrdered(sb -&gt; System.out.printf(&quot;%-23s %d%n&quot;, sb, ThreadLocalRandom.current().nextInt(100)));</code>"},{"owner":{"account_id":13770793,"reputation":25892,"user_id":9938317,"display_name":"rioV8"},"score":0,"creation_date":1697987772,"post_id":77340403,"comment_id":136345467,"body_markdown":"first report it at the Java extension Repo, what do the TextMate Scopes tell you of the different colored pieces","body":"first report it at the Java extension Repo, what do the TextMate Scopes tell you of the different colored pieces"},{"owner":{"account_id":29728572,"reputation":1,"user_id":22783845,"display_name":"MossBorb"},"score":0,"creation_date":1697988024,"post_id":77340403,"comment_id":136345494,"body_markdown":"I have fixed the issue by renaming the Main.java file to WeatherApp.java and I am unsure why the issue existed when the file was named Main.java. I had also allowed something to refactor the code, but I will also report to Visual Code Project.","body":"I have fixed the issue by renaming the Main.java file to WeatherApp.java and I am unsure why the issue existed when the file was named Main.java. I had also allowed something to refactor the code, but I will also report to Visual Code Project."},{"owner":{"account_id":15396644,"reputation":25733,"user_id":11107541,"display_name":"starball"},"score":0,"creation_date":1698006390,"post_id":77340403,"comment_id":136347468,"body_markdown":"1) if you raise an issue ticket, please ping me with a link to it. 2) please edit this question post to add the code in a code block so we can copy and paste to reproduce the issue. 3) potentially related on reddit: https://www.reddit.com/r/vscode/comments/16szhue/how_can_i_fix_the_issue_with_color_coding_on_line/","body":"1) if you raise an issue ticket, please ping me with a link to it. 2) please edit this question post to add the code in a code block so we can copy and paste to reproduce the issue. 3) potentially related on reddit: <a href=\"https://www.reddit.com/r/vscode/comments/16szhue/how_can_i_fix_the_issue_with_color_coding_on_line/\" rel=\"nofollow noreferrer\">reddit.com/r/vscode/comments/16szhue/&hellip;</a>"},{"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"score":0,"creation_date":1698044279,"post_id":77340403,"comment_id":136350341,"body_markdown":"Can you paste your code? Please see \n\n[minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example)","body":"Can you paste your code? Please see   <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}],"owner":{"account_id":29728572,"reputation":1,"user_id":22783845,"display_name":"MossBorb"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698044542,"creation_date":1697985676,"question_id":77340403,"body_markdown":"Overview of incorrect syntax highlighting\r\n![](https://i.stack.imgur.com/BCqRg.jpg)\r\n\r\nLines 24, 25 show incorrect syntax highlighting which is effected by how many new empty lines I have in-between the last declared variable, and  \r\nSystem out println function.\r\n\r\nIn the image above, there is one empty space between line 22 and 24. If I have three empty lines the syntax highlighting returns to normal.\r\n\r\nShowing that syntax highlighting corrects it&#39;s self with three spaces between code lines\r\n\r\n![Showing that syntax highlighting corrects it&#39;s self with three spaces between code lines](https://i.stack.imgur.com/X7RQ0.jpg)\r\n\r\nSee below three images where syntax highlighting remains inconsistent while writing out         System out println\r\n\r\nImage of System\r\n\r\n![Image of System][1]\r\n\r\nImage of System out\r\n\r\n![Image of System out](https://i.stack.imgur.com/WRIhl.png)\r\n\r\nImage of system out println incorrectly highlighted\r\n\r\n![Image of system out println incorrectly highlighted][2]\r\n\r\nI have tried uninstalling any packages that help with syntax highlighting in VsCode, and reinstalling them, however problem persists.\r\n\r\nI am hoping the syntax highlighting remains consistent\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Tzte1.png\r\n  [2]: https://i.stack.imgur.com/YvkmP.png","title":"VsCode&#39;s syntax highlighting incorrect colors syntax for Java Development","body":"<p>Overview of incorrect syntax highlighting\n<img src=\"https://i.stack.imgur.com/BCqRg.jpg\" alt=\"\" /></p>\n<p>Lines 24, 25 show incorrect syntax highlighting which is effected by how many new empty lines I have in-between the last declared variable, and<br />\nSystem out println function.</p>\n<p>In the image above, there is one empty space between line 22 and 24. If I have three empty lines the syntax highlighting returns to normal.</p>\n<p>Showing that syntax highlighting corrects it's self with three spaces between code lines</p>\n<p><img src=\"https://i.stack.imgur.com/X7RQ0.jpg\" alt=\"Showing that syntax highlighting corrects it's self with three spaces between code lines\" /></p>\n<p>See below three images where syntax highlighting remains inconsistent while writing out         System out println</p>\n<p>Image of System</p>\n<p><img src=\"https://i.stack.imgur.com/Tzte1.png\" alt=\"Image of System\" /></p>\n<p>Image of System out</p>\n<p><img src=\"https://i.stack.imgur.com/WRIhl.png\" alt=\"Image of System out\" /></p>\n<p>Image of system out println incorrectly highlighted</p>\n<p><img src=\"https://i.stack.imgur.com/YvkmP.png\" alt=\"Image of system out println incorrectly highlighted\" /></p>\n<p>I have tried uninstalling any packages that help with syntax highlighting in VsCode, and reinstalling them, however problem persists.</p>\n<p>I am hoping the syntax highlighting remains consistent</p>\n"},{"tags":["java","spring-boot","postman","resttemplate"],"comments":[{"owner":{"account_id":3687151,"reputation":131,"user_id":3070677,"display_name":"G10"},"score":0,"creation_date":1698036292,"post_id":77342557,"comment_id":136349468,"body_markdown":"Share your postman response details. How much time it is taking","body":"Share your postman response details. How much time it is taking"},{"owner":{"account_id":14491333,"reputation":129,"user_id":10467473,"display_name":"Gagak"},"score":0,"creation_date":1698044580,"post_id":77342557,"comment_id":136350387,"body_markdown":"This is my response details on postman when hitting the targeted url directly (https://i.imgur.com/neC4HOZ.png) it only take me 570ms","body":"This is my response details on postman when hitting the targeted url directly (<a href=\"https://i.imgur.com/neC4HOZ.png\" rel=\"nofollow noreferrer\">i.imgur.com/neC4HOZ.png</a>) it only take me 570ms"},{"owner":{"account_id":14491333,"reputation":129,"user_id":10467473,"display_name":"Gagak"},"score":0,"creation_date":1698053838,"post_id":77342557,"comment_id":136351928,"body_markdown":"Is it possible there is a firewall that block from http localhost request to https url?","body":"Is it possible there is a firewall that block from http localhost request to https url?"}],"owner":{"account_id":14491333,"reputation":129,"user_id":10467473,"display_name":"Gagak"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698044429,"creation_date":1698033082,"question_id":77342557,"body_markdown":"I am currently trying to use a service to send a WhatsApp message.  \r\nHere is **my snippet** of code:\r\n\r\n```java\r\nString url = &quot;https://[service-url].com/[rest-of-the-path]&quot;\r\nString username = &quot;username&quot;\r\nString password = &quot;password&quot;\r\nString auth = username + &quot;:&quot; + password\r\nString encoded = Base64.getEncoder().encodeToString(auth.getBytes(StandardCharsets.UTF_8));\r\nHttpHeaders headers = new HttpHeaders(){{\r\n     set(&quot;Authorization&quot;, &quot;Basic &quot; + encoded);\r\n}};\r\nRestTemplate restTemplate = new RestTemplate();\r\nSimpleClientHttpRequestFactory requestFactory = new SimpleClientHttpRequestFactory();\r\nrequestFactory.setConnectTimeout(5000);\r\nrequestFactory.setReadTimeout(5000);\r\nrestTemplate.setRequestFactory(requestFactory);\r\nString result = restTemplate.postForObject(url, headers, String.class);\r\n```\r\nWhen I run this program, the code got an error with the message of connection timed out error when it tries to `postForObject`. I tried to googled and it says that firewall/proxy could be the issues. However, if that is the case - When I tried using the same url with the same username and password as the basic authentication on Postman, I got the result that I desired. If it is indeed due to the proxy issues, shouldn&#39;t Postman give me the same error? So I believe that the error might be somewhere else that I am not aware of.  \r\n\r\nCan someone points out where did I go wrong on this one?\r\n\r\n**Edit:** I have tried various alternative like using `Unirest` or `HttpUrlConnection` it gives me the same problem which is connection timed out whenever it tries to connect to the url. There was some article suggest that the service could be overloaded so it got a timeout error but I tried doing it through my java localhost and hit directly to the url through postman at almost similar time - the java localhost gives me an error meanwhile when I hit directly to the url through postman it works as intended\r\n            \r\n**Edit** I forgot to mention that I am using java 8 and for some reasons, I can&#39;t upgrade to to later version","title":"RestTemplate on Java got timeout error but on Postman it is okay","body":"<p>I am currently trying to use a service to send a WhatsApp message.<br />\nHere is <strong>my snippet</strong> of code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String url = &quot;https://[service-url].com/[rest-of-the-path]&quot;\nString username = &quot;username&quot;\nString password = &quot;password&quot;\nString auth = username + &quot;:&quot; + password\nString encoded = Base64.getEncoder().encodeToString(auth.getBytes(StandardCharsets.UTF_8));\nHttpHeaders headers = new HttpHeaders(){{\n     set(&quot;Authorization&quot;, &quot;Basic &quot; + encoded);\n}};\nRestTemplate restTemplate = new RestTemplate();\nSimpleClientHttpRequestFactory requestFactory = new SimpleClientHttpRequestFactory();\nrequestFactory.setConnectTimeout(5000);\nrequestFactory.setReadTimeout(5000);\nrestTemplate.setRequestFactory(requestFactory);\nString result = restTemplate.postForObject(url, headers, String.class);\n</code></pre>\n<p>When I run this program, the code got an error with the message of connection timed out error when it tries to <code>postForObject</code>. I tried to googled and it says that firewall/proxy could be the issues. However, if that is the case - When I tried using the same url with the same username and password as the basic authentication on Postman, I got the result that I desired. If it is indeed due to the proxy issues, shouldn't Postman give me the same error? So I believe that the error might be somewhere else that I am not aware of.</p>\n<p>Can someone points out where did I go wrong on this one?</p>\n<p><strong>Edit:</strong> I have tried various alternative like using <code>Unirest</code> or <code>HttpUrlConnection</code> it gives me the same problem which is connection timed out whenever it tries to connect to the url. There was some article suggest that the service could be overloaded so it got a timeout error but I tried doing it through my java localhost and hit directly to the url through postman at almost similar time - the java localhost gives me an error meanwhile when I hit directly to the url through postman it works as intended</p>\n<p><strong>Edit</strong> I forgot to mention that I am using java 8 and for some reasons, I can't upgrade to to later version</p>\n"},{"tags":["java","java-stream"],"owner":{"account_id":7402211,"reputation":21,"user_id":13296173,"display_name":"EMED"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1698042248,"answer_count":0,"score":0,"last_activity_date":1698044401,"creation_date":1698042098,"question_id":77342999,"body_markdown":"The order of the intermiediate operations is not being followed. I have code snippet below\r\n      \r\n         Integer[] arr = {5,4,3,2,7,8,9,0,6};\r\n         List&lt;Integer&gt; lst = Stream.of(arr)\r\n        .filter(e -&gt; (e % 2) == 0)\r\n        .peek(System.out::println) \r\n        .limit(3)              \r\n        .collect(Collectors.toList());\r\n\r\noutput is \r\n\r\n         4\r\n         2\r\n         8\r\n\r\nSince peek(System.out::println) is applied before limit, I expected it to print all even numbers and after that it should apply limit and get list of 3 items. \r\n\r\nWhy is that it println is called for 3 items only. Should the order of my functions on stream not matter ?\r\n\r\n","title":"Order of intermediate operations in Java Stream pipeline","body":"<p>The order of the intermiediate operations is not being followed. I have code snippet below</p>\n<pre><code>     Integer[] arr = {5,4,3,2,7,8,9,0,6};\n     List&lt;Integer&gt; lst = Stream.of(arr)\n    .filter(e -&gt; (e % 2) == 0)\n    .peek(System.out::println) \n    .limit(3)              \n    .collect(Collectors.toList());\n</code></pre>\n<p>output is</p>\n<pre><code>     4\n     2\n     8\n</code></pre>\n<p>Since peek(System.out::println) is applied before limit, I expected it to print all even numbers and after that it should apply limit and get list of 3 items.</p>\n<p>Why is that it println is called for 3 items only. Should the order of my functions on stream not matter ?</p>\n"},{"tags":["java","servlets","zip","response-headers","zipoutputstream"],"answers":[{"tags":[],"owner":{"account_id":9585668,"reputation":3895,"user_id":7123519,"accept_rate":95,"display_name":"Sebastian Nielsen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658317821,"creation_date":1658317821,"answer_id":73051125,"question_id":73048971,"body_markdown":"Solved it by changing `zos.setUseZip64(Zip64Mode.Always);` to `zos.setUseZip64(Zip64Mode.AsNeeded);`","title":"The archive is corrupt / warning &#39;headers error&#39; ... but everything works? (zip64)","body":"<p>Solved it by changing <code>zos.setUseZip64(Zip64Mode.Always);</code> to <code>zos.setUseZip64(Zip64Mode.AsNeeded);</code></p>\n"},{"tags":[],"owner":{"account_id":6690978,"reputation":31,"user_id":5160488,"display_name":"mariusi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698044142,"creation_date":1698044142,"answer_id":77343161,"question_id":73048971,"body_markdown":"    zout.setUseZip64(Zip64Mode.AlwaysWithCompatibility);\r\n\r\nhas worked for me.","title":"The archive is corrupt / warning &#39;headers error&#39; ... but everything works? (zip64)","body":"<pre><code>zout.setUseZip64(Zip64Mode.AlwaysWithCompatibility);\n</code></pre>\n<p>has worked for me.</p>\n"}],"owner":{"account_id":9585668,"reputation":3895,"user_id":7123519,"accept_rate":95,"display_name":"Sebastian Nielsen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":949,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1698044142,"creation_date":1658308836,"question_id":73048971,"body_markdown":"I am zipping (using zip64) a number of files and then returning it in a response to the user.\r\n\r\n```java\r\n\r\n         response.setContentType(&quot;application/zip&quot;);  // Doesn&#39;t seem like this makes any difference?\r\n         response.setHeader(&quot;Content-Disposition&quot;, &quot;attachment; filename=&quot; + getZipFileName(survey) + &quot;.zip&quot;);  // Doesn&#39;t seem like this makes any difference?\r\n\r\n         // Remove caching prevention\r\n         response.setHeader(&quot;Pragma&quot;, &quot;&quot;);\r\n         response.setHeader(&quot;Cache-Control&quot;, &quot;&quot;);\r\n\r\n         response.setHeader(&quot;Connection&quot;, &quot;keep-alive&quot;);\r\n\r\n\r\n      ServletOutputStream responseOutputStream = response.getOutputStream();\r\n\r\n         ByteArrayOutputStream bos = new ByteArrayOutputStream();\r\n         ZipArchiveOutputStream zos = new ZipArchiveOutputStream(bos);\r\n\r\n         zos.setUseZip64(Zip64Mode.Always);  \r\n\r\n         try {\r\n\r\n            for (RespondentUploadedFile file : filesNotFromDeletedVariables) {\r\n               String fileName = buildFileName(file);\r\n\r\n               ZipArchiveEntry entry = new ZipArchiveEntry(fileName);\r\n               zos.putArchiveEntry(entry); // Writes the header for an archive entry to the outputstream\r\n\r\n               byte[] fileData = file.getRamFile().getData();\r\n               zos.write(fileData);\r\n\r\n               zos.closeArchiveEntry();\r\n            }\r\n\r\n         } catch (Exception e) {\r\n            ...             // We never get in here\r\n         } finally {\r\n            zos.close();\r\n         }\r\n\r\n         responseOutputStream.write(bos.toByteArray());\r\n         responseOutputStream.flush(); // tried adding / removing this ... no difference\r\n\r\n\r\n      } catch (Exception e) {\r\n         response.sendError(SC_INTERNAL_SERVER_ERROR);    // We never get here\r\n      }\r\n``` \r\n\r\nIf I just click on the downloaded zip file, then I get no errors/warnings.\r\n\r\nIf I try to extract the zip file, then I get the warning as shown here:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nInside the extracted folder, everything is fine and as expected ... so what&#39;s going on? How can I get rid of this warning as to not confuse any user when nothing is wrong. \r\n\r\n\r\n----\r\n\r\nI thought it might have something to do with the `.setContentType` and `.setHeader`, but to my surprise, there is no difference in terms of behavior if I change those as you can see here:\r\n\r\n[![enter image description here][2]][2]\r\n\r\n----\r\n\r\nI suspect it might have somthing to do with the fact that I am dealing with [zip64](https://en.wikipedia.org/wiki/ZIP_(file_format)#ZIP64), but something is perceiving it as just a zip?\r\n\r\n  [1]: https://i.stack.imgur.com/4rF7a.png\r\n  [2]: https://i.stack.imgur.com/42VaN.png","title":"The archive is corrupt / warning &#39;headers error&#39; ... but everything works? (zip64)","body":"<p>I am zipping (using zip64) a number of files and then returning it in a response to the user.</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n         response.setContentType(&quot;application/zip&quot;);  // Doesn't seem like this makes any difference?\n         response.setHeader(&quot;Content-Disposition&quot;, &quot;attachment; filename=&quot; + getZipFileName(survey) + &quot;.zip&quot;);  // Doesn't seem like this makes any difference?\n\n         // Remove caching prevention\n         response.setHeader(&quot;Pragma&quot;, &quot;&quot;);\n         response.setHeader(&quot;Cache-Control&quot;, &quot;&quot;);\n\n         response.setHeader(&quot;Connection&quot;, &quot;keep-alive&quot;);\n\n\n      ServletOutputStream responseOutputStream = response.getOutputStream();\n\n         ByteArrayOutputStream bos = new ByteArrayOutputStream();\n         ZipArchiveOutputStream zos = new ZipArchiveOutputStream(bos);\n\n         zos.setUseZip64(Zip64Mode.Always);  \n\n         try {\n\n            for (RespondentUploadedFile file : filesNotFromDeletedVariables) {\n               String fileName = buildFileName(file);\n\n               ZipArchiveEntry entry = new ZipArchiveEntry(fileName);\n               zos.putArchiveEntry(entry); // Writes the header for an archive entry to the outputstream\n\n               byte[] fileData = file.getRamFile().getData();\n               zos.write(fileData);\n\n               zos.closeArchiveEntry();\n            }\n\n         } catch (Exception e) {\n            ...             // We never get in here\n         } finally {\n            zos.close();\n         }\n\n         responseOutputStream.write(bos.toByteArray());\n         responseOutputStream.flush(); // tried adding / removing this ... no difference\n\n\n      } catch (Exception e) {\n         response.sendError(SC_INTERNAL_SERVER_ERROR);    // We never get here\n      }\n</code></pre>\n<p>If I just click on the downloaded zip file, then I get no errors/warnings.</p>\n<p>If I try to extract the zip file, then I get the warning as shown here:</p>\n<p><a href=\"https://i.stack.imgur.com/4rF7a.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4rF7a.png\" alt=\"enter image description here\" /></a></p>\n<p>Inside the extracted folder, everything is fine and as expected ... so what's going on? How can I get rid of this warning as to not confuse any user when nothing is wrong.</p>\n<hr />\n<p>I thought it might have something to do with the <code>.setContentType</code> and <code>.setHeader</code>, but to my surprise, there is no difference in terms of behavior if I change those as you can see here:</p>\n<p><a href=\"https://i.stack.imgur.com/42VaN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/42VaN.png\" alt=\"enter image description here\" /></a></p>\n<hr />\n<p>I suspect it might have somthing to do with the fact that I am dealing with <a href=\"https://en.wikipedia.org/wiki/ZIP_(file_format)#ZIP64\" rel=\"nofollow noreferrer\">zip64</a>, but something is perceiving it as just a zip?</p>\n"},{"tags":["java","jmeter","windows-10"],"comments":[{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1698026783,"post_id":77341065,"comment_id":136348903,"body_markdown":"Read jmeter documentation instead of random YouTube tutorials. Also what your Windows installation shows as icons is not related to jmeter but to whatever you installed on Windows. You seem to not understand your Windows installation.","body":"Read jmeter documentation instead of random YouTube tutorials. Also what your Windows installation shows as icons is not related to jmeter but to whatever you installed on Windows. You seem to not understand your Windows installation."}],"answers":[{"tags":[],"owner":{"account_id":3460456,"reputation":162728,"user_id":2897748,"display_name":"Dmitri T"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1698043869,"creation_date":1698043869,"answer_id":77343134,"question_id":77341065,"body_markdown":"It looks like an issue with your [Windows file associations][1]. The `ApacheJMeter.jar` file is there but your operating system considers it as an archive and it makes sense because [.jar files][2] are basically [.zip archives][3]. \r\n\r\nAnyway you&#39;re not supposed to launch `ApacheJMeter.jar` file directly, you should use `jmeter.bat` wrapper script because it does some checks and sets some parameters which are necessary to properly initialize and run JMeter. \r\n\r\n[![enter image description here][4]][4]\r\n\r\nIn general I would recommend following [official JMeter documentation][5] which states:\r\n\r\n&gt;To run JMeter, run the jmeter.bat (for Windows) or jmeter (for Unix) file. These files are found in the bin directory.\r\n\r\nIf you need a little more detailed instructions check out [JMeter Installation: How to Get Started][6] article \r\n\r\n\r\n  [1]: https://learn.microsoft.com/en-us/windows/win32/shell/fa-intro\r\n  [2]: https://docs.oracle.com/javase/tutorial/deployment/jar/basicsindex.html\r\n  [3]: https://en.wikipedia.org/wiki/ZIP_(file_format)\r\n  [4]: https://i.stack.imgur.com/imKNy.png\r\n  [5]: https://jmeter.apache.org/usermanual/get-started.html#install\r\n  [6]: https://www.blazemeter.com/blog/jmeter-installation","title":"Unable to see the Executable JAR File in the apache JMeter bin folder","body":"<p>It looks like an issue with your <a href=\"https://learn.microsoft.com/en-us/windows/win32/shell/fa-intro\" rel=\"nofollow noreferrer\">Windows file associations</a>. The <code>ApacheJMeter.jar</code> file is there but your operating system considers it as an archive and it makes sense because <a href=\"https://docs.oracle.com/javase/tutorial/deployment/jar/basicsindex.html\" rel=\"nofollow noreferrer\">.jar files</a> are basically <a href=\"https://en.wikipedia.org/wiki/ZIP_(file_format)\" rel=\"nofollow noreferrer\">.zip archives</a>.</p>\n<p>Anyway you're not supposed to launch <code>ApacheJMeter.jar</code> file directly, you should use <code>jmeter.bat</code> wrapper script because it does some checks and sets some parameters which are necessary to properly initialize and run JMeter.</p>\n<p><a href=\"https://i.stack.imgur.com/imKNy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/imKNy.png\" alt=\"enter image description here\" /></a></p>\n<p>In general I would recommend following <a href=\"https://jmeter.apache.org/usermanual/get-started.html#install\" rel=\"nofollow noreferrer\">official JMeter documentation</a> which states:</p>\n<blockquote>\n<p>To run JMeter, run the jmeter.bat (for Windows) or jmeter (for Unix) file. These files are found in the bin directory.</p>\n</blockquote>\n<p>If you need a little more detailed instructions check out <a href=\"https://www.blazemeter.com/blog/jmeter-installation\" rel=\"nofollow noreferrer\">JMeter Installation: How to Get Started</a> article</p>\n"}],"owner":{"account_id":23740498,"reputation":75,"user_id":22054564,"display_name":"The Massacre"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77343134,"answer_count":1,"score":0,"last_activity_date":1698043869,"creation_date":1697996726,"question_id":77341065,"body_markdown":"Following this YouTube [tutorial][1],\r\n\r\n- I have downloaded the Apache JMeter 5.6.2, extracted in the downloads folder.\r\n- Placed that extracted folder in the C drive - Program Files directory.\r\n- Opened to bin folder &gt; I cannot see the executable Jar File as shown in the video to open the J Meter.\r\n[![Youtube Video Screenshot][2]][2]\r\n\r\n\r\n But I can see the Jar file named as Apache J Meter, it is not showing the Java SE environment option to open the application:\r\n\r\n[![enter image description here][3]][3]\r\n\r\nThe ApacheJMeter file icon also showing as winrar symbol for me but in the video it is shown as Java application logo.\r\n\r\nHow to resolve this issue and install the ApacheJMeter perfectly in Windows System?\r\n\r\n\r\n  [1]: https://www.youtube.com/watch?v=A55CV8EwKw4&amp;t=7s\r\n  [2]: https://i.stack.imgur.com/VxZgc.png\r\n  [3]: https://i.stack.imgur.com/67y7z.png","title":"Unable to see the Executable JAR File in the apache JMeter bin folder","body":"<p>Following this YouTube <a href=\"https://www.youtube.com/watch?v=A55CV8EwKw4&amp;t=7s\" rel=\"nofollow noreferrer\">tutorial</a>,</p>\n<ul>\n<li>I have downloaded the Apache JMeter 5.6.2, extracted in the downloads folder.</li>\n<li>Placed that extracted folder in the C drive - Program Files directory.</li>\n<li>Opened to bin folder &gt; I cannot see the executable Jar File as shown in the video to open the J Meter.\n<a href=\"https://i.stack.imgur.com/VxZgc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VxZgc.png\" alt=\"Youtube Video Screenshot\" /></a></li>\n</ul>\n<p>But I can see the Jar file named as Apache J Meter, it is not showing the Java SE environment option to open the application:</p>\n<p><a href=\"https://i.stack.imgur.com/67y7z.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/67y7z.png\" alt=\"enter image description here\" /></a></p>\n<p>The ApacheJMeter file icon also showing as winrar symbol for me but in the video it is shown as Java application logo.</p>\n<p>How to resolve this issue and install the ApacheJMeter perfectly in Windows System?</p>\n"},{"tags":["java","mysql","hibernate","jboss7.x"],"comments":[{"owner":{"account_id":200609,"reputation":2282,"user_id":446552,"accept_rate":78,"display_name":"sherif"},"score":2,"creation_date":1337984543,"post_id":10761910,"comment_id":13989180,"body_markdown":"may be this helps https://community.jboss.org/wiki/DataSourceConfigurationInAS7?_sscc=t","body":"may be this helps <a href=\"https://community.jboss.org/wiki/DataSourceConfigurationInAS7?_sscc=t\" rel=\"nofollow noreferrer\">community.jboss.org/wiki/DataSourceConfigurationInAS7?_sscc=&zwnj;&#8203;t</a>"},{"owner":{"account_id":1515133,"reputation":183,"user_id":1416310,"accept_rate":20,"display_name":"Sancho.Pansa"},"score":0,"creation_date":1337985556,"post_id":10761910,"comment_id":13989381,"body_markdown":"Thanks, I read it before posting here - no solution there. I also read documentation which is mentioned in your link, but still no clue what is wrong.","body":"Thanks, I read it before posting here - no solution there. I also read documentation which is mentioned in your link, but still no clue what is wrong."},{"owner":{"account_id":1091376,"reputation":5589,"user_id":1085958,"accept_rate":83,"display_name":"djmj"},"score":0,"creation_date":1337988337,"post_id":10761910,"comment_id":13989887,"body_markdown":"Is it working without the container? Test in a main class? Is mysql running on the default port, since you did not specified it?","body":"Is it working without the container? Test in a main class? Is mysql running on the default port, since you did not specified it?"},{"owner":{"account_id":1515133,"reputation":183,"user_id":1416310,"accept_rate":20,"display_name":"Sancho.Pansa"},"score":0,"creation_date":1338021746,"post_id":10761910,"comment_id":13993794,"body_markdown":"Port is OK, I checked everything two times;-) BUT, now I&#39;m really confused, because code is working well outside the container. I created class which uses the same code (HIbernateUtil to obtain session factory) and there are no exceptions, and data is inserted to DB. Could you please explain me why it is working in that way, and why it is not working under the container? And how to fix this, because I have no idea... Thank you very much!","body":"Port is OK, I checked everything two times;-) BUT, now I&#39;m really confused, because code is working well outside the container. I created class which uses the same code (HIbernateUtil to obtain session factory) and there are no exceptions, and data is inserted to DB. Could you please explain me why it is working in that way, and why it is not working under the container? And how to fix this, because I have no idea... Thank you very much!"},{"owner":{"account_id":87165,"reputation":3549,"user_id":241899,"accept_rate":92,"display_name":"Vitaly Olegovitch"},"score":0,"creation_date":1338055323,"post_id":10761910,"comment_id":14000117,"body_markdown":"Your `standalone.xml` looks correct. What Hibernate version are you using?","body":"Your <code>standalone.xml</code> looks correct. What Hibernate version are you using?"},{"owner":{"account_id":1515133,"reputation":183,"user_id":1416310,"accept_rate":20,"display_name":"Sancho.Pansa"},"score":0,"creation_date":1338061074,"post_id":10761910,"comment_id":14001091,"body_markdown":"Hibernate 4.1.3, I had to add Hibernate jars as external jars to build path, even after changes in modules/org/hibernate/main (I changed module.xml and replaced old jars). After that changes I got different exception during deploy:\n\n.org.hibernate.service.classloading.spi.ClassLoadingException: Specified JDBC Driver com.mysql.jdbc.Driver class not found\n\nIn Jboss&#39;s logs there is mentioned that com.mysql.jdbc.Driver is deployed. HELP!","body":"Hibernate 4.1.3, I had to add Hibernate jars as external jars to build path, even after changes in modules/org/hibernate/main (I changed module.xml and replaced old jars). After that changes I got different exception during deploy:  .org.hibernate.service.classloading.spi.ClassLoadingExceptio&zwnj;&#8203;n: Specified JDBC Driver com.mysql.jdbc.Driver class not found  In Jboss&#39;s logs there is mentioned that com.mysql.jdbc.Driver is deployed. HELP!"}],"answers":[{"tags":[],"owner":{"account_id":1091376,"reputation":5589,"user_id":1085958,"accept_rate":83,"display_name":"djmj"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1337988425,"creation_date":1337986079,"answer_id":10762179,"question_id":10761910,"body_markdown":"Place the jdbc sql in the library folder: jboss/server/default/lib\r\n\r\nhttps://stackoverflow.com/questions/8418625/jboss-mysql-no-suitable-driver-found-for-jdbc","title":"JBoss 7.1: No suitable driver found java:mysql - could not open connection","body":"<p>Place the jdbc sql in the library folder: jboss/server/default/lib</p>\n\n<p><a href=\"https://stackoverflow.com/questions/8418625/jboss-mysql-no-suitable-driver-found-for-jdbc\">Jboss mysql - No suitable driver found for jdbc</a></p>\n"},{"tags":[],"owner":{"account_id":30319,"reputation":90360,"user_id":82609,"accept_rate":84,"display_name":"Sebastien Lorber"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1337993652,"creation_date":1337993652,"answer_id":10762841,"question_id":10761910,"body_markdown":"Normally your jboss configuration should have a lib folder in which you can put your jdbc driver:\r\n\r\n&gt; 8.2.2. Installing the JDBC Driver and Deploying the DataSource\r\n&gt; \r\n&gt; To make the JDBC driver classes available to JBoss, copy the file\r\n&gt; mysql-connector-java-3.0.15-ga-bin.jar from the Connector/J\r\n&gt; distribution to the lib directory in the default server configuration\r\n&gt; (assuming that is the configuration you’re running, of course). Then\r\n&gt; create a file in the deploy directory called mysql-ds.xml with the\r\n&gt; following datasource configuration. The database user name and\r\n&gt; password corresponds the MySql user we created in the previous\r\n&gt; section.\r\n\r\nhttp://docs.jboss.org/jbossas/getting_started/v4/html/db.html\r\n\r\n\r\nIf it doesn&#39;t work, you can still put the driver in lib/ext/ folder of your jdk, but it&#39;s not the appropriate usage.","title":"JBoss 7.1: No suitable driver found java:mysql - could not open connection","body":"<p>Normally your jboss configuration should have a lib folder in which you can put your jdbc driver:</p>\n\n<blockquote>\n  <p>8.2.2. Installing the JDBC Driver and Deploying the DataSource</p>\n  \n  <p>To make the JDBC driver classes available to JBoss, copy the file\n  mysql-connector-java-3.0.15-ga-bin.jar from the Connector/J\n  distribution to the lib directory in the default server configuration\n  (assuming that is the configuration you’re running, of course). Then\n  create a file in the deploy directory called mysql-ds.xml with the\n  following datasource configuration. The database user name and\n  password corresponds the MySql user we created in the previous\n  section.</p>\n</blockquote>\n\n<p><a href=\"http://docs.jboss.org/jbossas/getting_started/v4/html/db.html\" rel=\"nofollow\">http://docs.jboss.org/jbossas/getting_started/v4/html/db.html</a></p>\n\n<p>If it doesn't work, you can still put the driver in lib/ext/ folder of your jdk, but it's not the appropriate usage.</p>\n"},{"tags":[],"owner":{"account_id":1515133,"reputation":183,"user_id":1416310,"accept_rate":20,"display_name":"Sancho.Pansa"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1338075388,"creation_date":1338075388,"answer_id":10770576,"question_id":10761910,"body_markdown":"If anybody is facing a similar problem, here is a solution:\r\n\r\n- check stuff people mentioned under my question here;\r\n- if this do not work, check if hibernate libraries are from the same bundle (the newest is 4.1.3, JBoss 7.1.1 has 4.0.1);\r\n- make sure you do not duplicate connector and hibernate libraries in class-path and Manifest.mf dependencies (that was cause of my issue)\r\n\r\nThanks to everyone who replied here, you were very helpful!","title":"JBoss 7.1: No suitable driver found java:mysql - could not open connection","body":"<p>If anybody is facing a similar problem, here is a solution:</p>\n\n<ul>\n<li>check stuff people mentioned under my question here;</li>\n<li>if this do not work, check if hibernate libraries are from the same bundle (the newest is 4.1.3, JBoss 7.1.1 has 4.0.1);</li>\n<li>make sure you do not duplicate connector and hibernate libraries in class-path and Manifest.mf dependencies (that was cause of my issue)</li>\n</ul>\n\n<p>Thanks to everyone who replied here, you were very helpful!</p>\n"},{"tags":[],"owner":{"account_id":3841313,"reputation":103,"user_id":3184289,"display_name":"Pravin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1393715198,"creation_date":1393715198,"answer_id":22121610,"question_id":10761910,"body_markdown":"\r\n\r\n    Step 1:\r\n    \r\n    You create one folder in jboss-as-7.1.1.Final\\modules\\com\r\n    \r\n     create mysql folder&gt;&gt;\r\n    \r\n     create main folder&gt;&gt;\r\n    \r\n     create module.xml file&gt;&gt;\r\n    \r\n     put mysql connector jar file (mysql-connector-java-5.1.10-bin)\r\n    \r\n    \r\n    Step 2:\r\n    \r\n     add line on this location jboss-as-7.1.1.Final\\modules\\org\\hibernate\\main\\module\r\n     \r\n      &lt;module name=&quot;com.mysql&quot;/&gt; \r\n\r\n\r\n","title":"JBoss 7.1: No suitable driver found java:mysql - could not open connection","body":"<pre><code>Step 1:\n\nYou create one folder in jboss-as-7.1.1.Final\\modules\\com\n\n create mysql folder&gt;&gt;\n\n create main folder&gt;&gt;\n\n create module.xml file&gt;&gt;\n\n put mysql connector jar file (mysql-connector-java-5.1.10-bin)\n\n\nStep 2:\n\n add line on this location jboss-as-7.1.1.Final\\modules\\org\\hibernate\\main\\module\n\n  &lt;module name=\"com.mysql\"/&gt; \n</code></pre>\n"},{"tags":[],"owner":{"account_id":3171905,"reputation":10222,"user_id":2680640,"display_name":"sendon1982"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698043869,"creation_date":1698043869,"answer_id":77343133,"question_id":10761910,"body_markdown":"It seems jboss is using hibernate from its own module which does not have the visibility to see com.mysql driver.\r\n\r\nFirst configured mysql connector as a module in JBoss7.1 modules\r\n\r\nThen you need to added dependency in hibernate module provided by JBOSS\r\n\r\nPath for module.xml should be `${JBOSS_HOME}/modules/system/layers/base/org/hibernate/main`\r\n\r\n```\r\n\r\n&lt;!-- Represents the Hibernate 4.0.x module--&gt;\r\n&lt;module xmlns=&quot;urn:jboss:module:1.1&quot; name=&quot;org.hibernate&quot;&gt;\r\n    &lt;resources&gt;\r\n        &lt;resource-root path=&quot;hibernate-core-4.2.18.Final-redhat-2.jar&quot;/&gt;\r\n        &lt;resource-root path=&quot;hibernate-entitymanager-4.2.18.Final-redhat-2.jar&quot;/&gt;\r\n        &lt;resource-root path=&quot;hibernate-infinispan-4.2.18.Final-redhat-2.jar&quot;/&gt;\r\n        &lt;!-- Insert resources here --&gt;\r\n    &lt;/resources&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;module name=&quot;asm.asm&quot;/&gt;\r\n        &lt;module name=&quot;javax.api&quot;/&gt;\r\n        &lt;module name=&quot;javax.persistence.api&quot;/&gt;\r\n        &lt;module name=&quot;javax.transaction.api&quot;/&gt;\r\n        &lt;module name=&quot;javax.validation.api&quot;/&gt;\r\n        &lt;module name=&quot;org.antlr&quot;/&gt;\r\n        &lt;module name=&quot;org.apache.commons.collections&quot;/&gt;\r\n        &lt;module name=&quot;org.dom4j&quot;/&gt;\r\n        &lt;module name=&quot;org.infinispan&quot; optional=&quot;true&quot;/&gt;\r\n        &lt;module name=&quot;org.javassist&quot;/&gt;\r\n        &lt;module name=&quot;org.jboss.as.jpa.hibernate&quot; slot=&quot;4&quot; optional=&quot;true&quot;/&gt;\r\n        &lt;module name=&quot;org.jboss.logging&quot;/&gt;\r\n        &lt;module name=&quot;org.hibernate.envers&quot; services=&quot;import&quot; optional=&quot;true&quot;/&gt;\r\n        &lt;module name=&quot;org.hibernate.commons-annotations&quot;/&gt;\r\n        \r\n        &lt;module name=&quot;com.mysql&quot;/&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n```","title":"JBoss 7.1: No suitable driver found java:mysql - could not open connection","body":"<p>It seems jboss is using hibernate from its own module which does not have the visibility to see com.mysql driver.</p>\n<p>First configured mysql connector as a module in JBoss7.1 modules</p>\n<p>Then you need to added dependency in hibernate module provided by JBOSS</p>\n<p>Path for module.xml should be <code>${JBOSS_HOME}/modules/system/layers/base/org/hibernate/main</code></p>\n<pre><code>\n&lt;!-- Represents the Hibernate 4.0.x module--&gt;\n&lt;module xmlns=&quot;urn:jboss:module:1.1&quot; name=&quot;org.hibernate&quot;&gt;\n    &lt;resources&gt;\n        &lt;resource-root path=&quot;hibernate-core-4.2.18.Final-redhat-2.jar&quot;/&gt;\n        &lt;resource-root path=&quot;hibernate-entitymanager-4.2.18.Final-redhat-2.jar&quot;/&gt;\n        &lt;resource-root path=&quot;hibernate-infinispan-4.2.18.Final-redhat-2.jar&quot;/&gt;\n        &lt;!-- Insert resources here --&gt;\n    &lt;/resources&gt;\n\n    &lt;dependencies&gt;\n        &lt;module name=&quot;asm.asm&quot;/&gt;\n        &lt;module name=&quot;javax.api&quot;/&gt;\n        &lt;module name=&quot;javax.persistence.api&quot;/&gt;\n        &lt;module name=&quot;javax.transaction.api&quot;/&gt;\n        &lt;module name=&quot;javax.validation.api&quot;/&gt;\n        &lt;module name=&quot;org.antlr&quot;/&gt;\n        &lt;module name=&quot;org.apache.commons.collections&quot;/&gt;\n        &lt;module name=&quot;org.dom4j&quot;/&gt;\n        &lt;module name=&quot;org.infinispan&quot; optional=&quot;true&quot;/&gt;\n        &lt;module name=&quot;org.javassist&quot;/&gt;\n        &lt;module name=&quot;org.jboss.as.jpa.hibernate&quot; slot=&quot;4&quot; optional=&quot;true&quot;/&gt;\n        &lt;module name=&quot;org.jboss.logging&quot;/&gt;\n        &lt;module name=&quot;org.hibernate.envers&quot; services=&quot;import&quot; optional=&quot;true&quot;/&gt;\n        &lt;module name=&quot;org.hibernate.commons-annotations&quot;/&gt;\n        \n        &lt;module name=&quot;com.mysql&quot;/&gt;\n    &lt;/dependencies&gt;\n\n</code></pre>\n"}],"owner":{"account_id":1515133,"reputation":183,"user_id":1416310,"accept_rate":20,"display_name":"Sancho.Pansa"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11764,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":5,"score":6,"last_activity_date":1698043869,"creation_date":1337983843,"question_id":10761910,"body_markdown":"I was looking for an answer but didn&#39;t find solution.\r\nI&#39;m developing simple web-app using JSF2 and Hibernate. This is first time I&#39;m using Hibernate and I&#39;m facing many problems with configuration. My current issue is:\r\nI configured mysql connector as a module in JBoss7.1 modules. Then I created datasource and added mysql-connector-java-5.1.20-bin.jar to the classpath (It is in WEB-INF/lib directory in .war). After starting JBoss I&#39;m getting following logs:\r\n\r\n    23:44:07,497 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010403: Deploying JDBC-compliant driver class org.h2.Driver (version 1.3)\r\n    23:44:07,603 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010404: Deploying non-JDBC-compliant driver class com.mysql.jdbc.Driver (version 5.1)\r\n    ...\r\n    23:44:20,348 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-3) JBAS010404: Deploying non-JDBC-compliant driver class com.mysql.jdbc.Driver (version 5.1)\r\n    23:44:21,532 INFO  \r\n    ...\r\n    [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (MSC service thread 1-3) HHH000401: using driver [com.mysql.jdbc.Driver] at URL [jdbc:mysql://localhost/testdb]\r\n    23:44:21,535 INFO  [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (MSC service thread 1-3) HHH000046: Connection properties: {user=root}\r\n    23:44:21,556 WARN  [org.hibernate.engine.jdbc.internal.JdbcServicesImpl] (MSC service thread 1-3) HHH000342: Could not obtain connection to query metadata : No suitable driver found for jdbc:mysql://localhost/testdb\r\n\r\nAnd then application is deployed and server starts successfully. When I try to invoke method trying to persist some data I obtain  \r\n\r\n    org.hibernate.exception.JDBCConnectionException: Could not open connection\r\n    and\r\n    java.sql.SQLException: No suitable driver found for jdbc:mysql://localhost/testdb\r\n\r\nI&#39;m sure the mysql-connector-java-5.1.20-bin.jar is in the WEB-INF/lib directory in war file. Any ideas what am I missing here? MySQL server wersion is 5.1.63, but I don&#39;t think it is relevant here. \r\nThank&#39;s a lot in advance!\r\n\r\nedit:\r\nPort is OK, I checked everything two times;-) BUT, now I&#39;m really confused, because code is working well outside the container. I created class which uses the same code (HIbernateUtil to obtain session factory) and there are no exceptions, and data is inserted to DB. Could you please explain me why it is working in that way, and why it is not working under the container? And how to fix this, because I have no idea... Thank you very much!\r\n\r\nMy standalone.xml file:\r\n    &lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39;?&gt;\r\n    \r\n    &lt;server xmlns=&quot;urn:jboss:domain:1.2&quot;&gt;\r\n    \r\n        &lt;extensions&gt;\r\n            &lt;extension module=&quot;org.jboss.as.clustering.infinispan&quot;/&gt;\r\n            &lt;extension module=&quot;org.jboss.as.configadmin&quot;/&gt;\r\n            &lt;extension module=&quot;org.jboss.as.connector&quot;/&gt;\r\n            &lt;extension module=&quot;org.jboss.as.deployment-scanner&quot;/&gt;\r\n            &lt;extension module=&quot;org.jboss.as.ee&quot;/&gt;\r\n            &lt;extension module=&quot;org.jboss.as.ejb3&quot;/&gt;\r\n            &lt;extension module=&quot;org.jboss.as.jaxrs&quot;/&gt;\r\n            &lt;extension module=&quot;org.jboss.as.jdr&quot;/&gt;\r\n            &lt;extension module=&quot;org.jboss.as.jmx&quot;/&gt;\r\n            &lt;extension module=&quot;org.jboss.as.jpa&quot;/&gt;\r\n            &lt;extension module=&quot;org.jboss.as.logging&quot;/&gt;\r\n            &lt;extension module=&quot;org.jboss.as.mail&quot;/&gt;\r\n            &lt;extension module=&quot;org.jboss.as.naming&quot;/&gt;\r\n            &lt;extension module=&quot;org.jboss.as.osgi&quot;/&gt;\r\n            &lt;extension module=&quot;org.jboss.as.pojo&quot;/&gt;\r\n            &lt;extension module=&quot;org.jboss.as.remoting&quot;/&gt;\r\n            &lt;extension module=&quot;org.jboss.as.sar&quot;/&gt;\r\n            &lt;extension module=&quot;org.jboss.as.security&quot;/&gt;\r\n            &lt;extension module=&quot;org.jboss.as.threads&quot;/&gt;\r\n            &lt;extension module=&quot;org.jboss.as.transactions&quot;/&gt;\r\n            &lt;extension module=&quot;org.jboss.as.web&quot;/&gt;\r\n            &lt;extension module=&quot;org.jboss.as.webservices&quot;/&gt;\r\n            &lt;extension module=&quot;org.jboss.as.weld&quot;/&gt;\r\n        &lt;/extensions&gt;\r\n    \r\n        &lt;management&gt;\r\n            &lt;security-realms&gt;\r\n                &lt;security-realm name=&quot;ManagementRealm&quot;&gt;\r\n                    &lt;authentication&gt;\r\n                        &lt;properties path=&quot;mgmt-users.properties&quot; relative-to=&quot;jboss.server.config.dir&quot;/&gt;\r\n                    &lt;/authentication&gt;\r\n                &lt;/security-realm&gt;\r\n                &lt;security-realm name=&quot;ApplicationRealm&quot;&gt;\r\n                    &lt;authentication&gt;\r\n                        &lt;properties path=&quot;application-users.properties&quot; relative-to=&quot;jboss.server.config.dir&quot;/&gt;\r\n                    &lt;/authentication&gt;\r\n                &lt;/security-realm&gt;\r\n            &lt;/security-realms&gt;\r\n            &lt;management-interfaces&gt;\r\n                &lt;native-interface security-realm=&quot;ManagementRealm&quot;&gt;\r\n                    &lt;socket-binding native=&quot;management-native&quot;/&gt;\r\n                &lt;/native-interface&gt;\r\n                &lt;http-interface security-realm=&quot;ManagementRealm&quot;&gt;\r\n                    &lt;socket-binding http=&quot;management-http&quot;/&gt;\r\n                &lt;/http-interface&gt;\r\n            &lt;/management-interfaces&gt;\r\n        &lt;/management&gt;\r\n    \r\n        &lt;profile&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:logging:1.1&quot;&gt;\r\n                &lt;console-handler name=&quot;CONSOLE&quot;&gt;\r\n                    &lt;level name=&quot;INFO&quot;/&gt;\r\n                    &lt;formatter&gt;\r\n                        &lt;pattern-formatter pattern=&quot;%d{HH:mm:ss,SSS} %-5p [%c] (%t) %s%E%n&quot;/&gt;\r\n                    &lt;/formatter&gt;\r\n                &lt;/console-handler&gt;\r\n                &lt;periodic-rotating-file-handler name=&quot;FILE&quot;&gt;\r\n                    &lt;formatter&gt;\r\n                        &lt;pattern-formatter pattern=&quot;%d{HH:mm:ss,SSS} %-5p [%c] (%t) %s%E%n&quot;/&gt;\r\n                    &lt;/formatter&gt;\r\n                    &lt;file relative-to=&quot;jboss.server.log.dir&quot; path=&quot;server.log&quot;/&gt;\r\n                    &lt;suffix value=&quot;.yyyy-MM-dd&quot;/&gt;\r\n                    &lt;append value=&quot;true&quot;/&gt;\r\n                &lt;/periodic-rotating-file-handler&gt;\r\n                &lt;logger category=&quot;com.arjuna&quot;&gt;\r\n                    &lt;level name=&quot;WARN&quot;/&gt;\r\n                &lt;/logger&gt;\r\n                &lt;logger category=&quot;org.apache.tomcat.util.modeler&quot;&gt;\r\n                    &lt;level name=&quot;WARN&quot;/&gt;\r\n                &lt;/logger&gt;\r\n                &lt;logger category=&quot;sun.rmi&quot;&gt;\r\n                    &lt;level name=&quot;WARN&quot;/&gt;\r\n                &lt;/logger&gt;\r\n                &lt;logger category=&quot;jacorb&quot;&gt;\r\n                    &lt;level name=&quot;WARN&quot;/&gt;\r\n                &lt;/logger&gt;\r\n                &lt;logger category=&quot;jacorb.config&quot;&gt;\r\n                    &lt;level name=&quot;ERROR&quot;/&gt;\r\n                &lt;/logger&gt;\r\n                &lt;root-logger&gt;\r\n                    &lt;level name=&quot;INFO&quot;/&gt;\r\n                    &lt;handlers&gt;\r\n                        &lt;handler name=&quot;CONSOLE&quot;/&gt;\r\n                        &lt;handler name=&quot;FILE&quot;/&gt;\r\n                    &lt;/handlers&gt;\r\n                &lt;/root-logger&gt;\r\n            &lt;/subsystem&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:configadmin:1.0&quot;/&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:datasources:1.0&quot;&gt;\r\n                &lt;datasources&gt;\r\n                    &lt;datasource jndi-name=&quot;java:jboss/datasources/testDS&quot; pool-name=&quot;testDS&quot;&gt;\r\n                        &lt;connection-url&gt;jdbc:mysql://localhost:3306/testdb&lt;/connection-url&gt;\r\n                        &lt;driver&gt;mysql&lt;/driver&gt;\r\n                        &lt;pool&gt;\r\n                            &lt;min-pool-size&gt;10&lt;/min-pool-size&gt;\r\n                            &lt;max-pool-size&gt;20&lt;/max-pool-size&gt;\r\n                            &lt;prefill&gt;true&lt;/prefill&gt;\r\n                        &lt;/pool&gt;\r\n                        &lt;security&gt;\r\n                            &lt;user-name&gt;root&lt;/user-name&gt;\r\n                        &lt;/security&gt;\r\n                    &lt;/datasource&gt;\r\n                    &lt;datasource jndi-name=&quot;java:jboss/datasources/ExampleDS&quot; pool-name=&quot;ExampleDS&quot; enabled=&quot;true&quot; use-java-context=&quot;true&quot;&gt;\r\n                        &lt;connection-url&gt;jdbc:h2:mem:test;DB_CLOSE_DELAY=-1&lt;/connection-url&gt;\r\n                        &lt;driver&gt;h2&lt;/driver&gt;\r\n                        &lt;security&gt;\r\n                            &lt;user-name&gt;sa&lt;/user-name&gt;\r\n                            &lt;password&gt;sa&lt;/password&gt;\r\n                        &lt;/security&gt;\r\n                    &lt;/datasource&gt;\r\n                    &lt;drivers&gt;\r\n                        &lt;driver name=&quot;h2&quot; module=&quot;com.h2database.h2&quot;&gt;\r\n                            &lt;xa-datasource-class&gt;org.h2.jdbcx.JdbcDataSource&lt;/xa-datasource-class&gt;\r\n                        &lt;/driver&gt;\r\n                        &lt;driver name=&quot;mysql&quot; module=&quot;com.mysql&quot;/&gt;\r\n                    &lt;/drivers&gt;\r\n                &lt;/datasources&gt;\r\n            &lt;/subsystem&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:deployment-scanner:1.1&quot;&gt;\r\n                &lt;deployment-scanner path=&quot;deployments&quot; relative-to=&quot;jboss.server.base.dir&quot; scan-interval=&quot;5000&quot;/&gt;\r\n            &lt;/subsystem&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:ee:1.0&quot;/&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:ejb3:1.2&quot;&gt;\r\n                &lt;session-bean&gt;\r\n                    &lt;stateless&gt;\r\n                        &lt;bean-instance-pool-ref pool-name=&quot;slsb-strict-max-pool&quot;/&gt;\r\n                    &lt;/stateless&gt;\r\n                    &lt;stateful default-access-timeout=&quot;5000&quot; cache-ref=&quot;simple&quot;/&gt;\r\n                    &lt;singleton default-access-timeout=&quot;5000&quot;/&gt;\r\n                &lt;/session-bean&gt;\r\n                &lt;pools&gt;\r\n                    &lt;bean-instance-pools&gt;\r\n                        &lt;strict-max-pool name=&quot;slsb-strict-max-pool&quot; max-pool-size=&quot;20&quot; instance-acquisition-timeout=&quot;5&quot; instance-acquisition-timeout-unit=&quot;MINUTES&quot;/&gt;\r\n                        &lt;strict-max-pool name=&quot;mdb-strict-max-pool&quot; max-pool-size=&quot;20&quot; instance-acquisition-timeout=&quot;5&quot; instance-acquisition-timeout-unit=&quot;MINUTES&quot;/&gt;\r\n                    &lt;/bean-instance-pools&gt;\r\n                &lt;/pools&gt;\r\n                &lt;caches&gt;\r\n                    &lt;cache name=&quot;simple&quot; aliases=&quot;NoPassivationCache&quot;/&gt;\r\n                    &lt;cache name=&quot;passivating&quot; passivation-store-ref=&quot;file&quot; aliases=&quot;SimpleStatefulCache&quot;/&gt;\r\n                &lt;/caches&gt;\r\n                &lt;passivation-stores&gt;\r\n                    &lt;file-passivation-store name=&quot;file&quot;/&gt;\r\n                &lt;/passivation-stores&gt;\r\n                &lt;async thread-pool-name=&quot;default&quot;/&gt;\r\n                &lt;timer-service thread-pool-name=&quot;default&quot;&gt;\r\n                    &lt;data-store path=&quot;timer-service-data&quot; relative-to=&quot;jboss.server.data.dir&quot;/&gt;\r\n                &lt;/timer-service&gt;\r\n                &lt;remote connector-ref=&quot;remoting-connector&quot; thread-pool-name=&quot;default&quot;/&gt;\r\n                &lt;thread-pools&gt;\r\n                    &lt;thread-pool name=&quot;default&quot;&gt;\r\n                        &lt;max-threads count=&quot;10&quot;/&gt;\r\n                        &lt;keepalive-time time=&quot;100&quot; unit=&quot;milliseconds&quot;/&gt;\r\n                    &lt;/thread-pool&gt;\r\n                &lt;/thread-pools&gt;\r\n            &lt;/subsystem&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:infinispan:1.2&quot; default-cache-container=&quot;hibernate&quot;&gt;\r\n                &lt;cache-container name=&quot;hibernate&quot; default-cache=&quot;local-query&quot;&gt;\r\n                    &lt;local-cache name=&quot;entity&quot;&gt;\r\n                        &lt;transaction mode=&quot;NON_XA&quot;/&gt;\r\n                        &lt;eviction strategy=&quot;LRU&quot; max-entries=&quot;10000&quot;/&gt;\r\n                        &lt;expiration max-idle=&quot;100000&quot;/&gt;\r\n                    &lt;/local-cache&gt;\r\n                    &lt;local-cache name=&quot;local-query&quot;&gt;\r\n                        &lt;transaction mode=&quot;NONE&quot;/&gt;\r\n                        &lt;eviction strategy=&quot;LRU&quot; max-entries=&quot;10000&quot;/&gt;\r\n                        &lt;expiration max-idle=&quot;100000&quot;/&gt;\r\n                    &lt;/local-cache&gt;\r\n                    &lt;local-cache name=&quot;timestamps&quot;&gt;\r\n                        &lt;transaction mode=&quot;NONE&quot;/&gt;\r\n                        &lt;eviction strategy=&quot;NONE&quot;/&gt;\r\n                    &lt;/local-cache&gt;\r\n                &lt;/cache-container&gt;\r\n            &lt;/subsystem&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:jaxrs:1.0&quot;/&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:jca:1.1&quot;&gt;\r\n                &lt;archive-validation enabled=&quot;true&quot; fail-on-error=&quot;true&quot; fail-on-warn=&quot;false&quot;/&gt;\r\n                &lt;bean-validation enabled=&quot;true&quot;/&gt;\r\n                &lt;default-workmanager&gt;\r\n                    &lt;short-running-threads&gt;\r\n                        &lt;core-threads count=&quot;50&quot;/&gt;\r\n                        &lt;queue-length count=&quot;50&quot;/&gt;\r\n                        &lt;max-threads count=&quot;50&quot;/&gt;\r\n                        &lt;keepalive-time time=&quot;10&quot; unit=&quot;seconds&quot;/&gt;\r\n                    &lt;/short-running-threads&gt;\r\n                    &lt;long-running-threads&gt;\r\n                        &lt;core-threads count=&quot;50&quot;/&gt;\r\n                        &lt;queue-length count=&quot;50&quot;/&gt;\r\n                        &lt;max-threads count=&quot;50&quot;/&gt;\r\n                        &lt;keepalive-time time=&quot;10&quot; unit=&quot;seconds&quot;/&gt;\r\n                    &lt;/long-running-threads&gt;\r\n                &lt;/default-workmanager&gt;\r\n                &lt;cached-connection-manager/&gt;\r\n            &lt;/subsystem&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:jdr:1.0&quot;/&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:jmx:1.1&quot;&gt;\r\n                &lt;show-model value=&quot;true&quot;/&gt;\r\n                &lt;remoting-connector/&gt;\r\n            &lt;/subsystem&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:jpa:1.0&quot;&gt;\r\n                &lt;jpa default-datasource=&quot;&quot;/&gt;\r\n            &lt;/subsystem&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:mail:1.0&quot;&gt;\r\n                &lt;mail-session jndi-name=&quot;java:jboss/mail/Default&quot;&gt;\r\n                    &lt;smtp-server outbound-socket-binding-ref=&quot;mail-smtp&quot;/&gt;\r\n                &lt;/mail-session&gt;\r\n            &lt;/subsystem&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:naming:1.1&quot;/&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:osgi:1.2&quot; activation=&quot;lazy&quot;&gt;\r\n                &lt;properties&gt;\r\n                    &lt;property name=&quot;org.osgi.framework.startlevel.beginning&quot;&gt;\r\n                        1\r\n                    &lt;/property&gt;\r\n                &lt;/properties&gt;\r\n                &lt;capabilities&gt;\r\n                    &lt;capability name=&quot;javax.servlet.api:v25&quot;/&gt;\r\n                    &lt;capability name=&quot;javax.transaction.api&quot;/&gt;\r\n                    &lt;capability name=&quot;org.apache.felix.log&quot; startlevel=&quot;1&quot;/&gt;\r\n                    &lt;capability name=&quot;org.jboss.osgi.logging&quot; startlevel=&quot;1&quot;/&gt;\r\n                    &lt;capability name=&quot;org.apache.felix.configadmin&quot; startlevel=&quot;1&quot;/&gt;\r\n                    &lt;capability name=&quot;org.jboss.as.osgi.configadmin&quot; startlevel=&quot;1&quot;/&gt;\r\n                &lt;/capabilities&gt;\r\n            &lt;/subsystem&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:pojo:1.0&quot;/&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:remoting:1.1&quot;&gt;\r\n                &lt;connector name=&quot;remoting-connector&quot; socket-binding=&quot;remoting&quot; security-realm=&quot;ApplicationRealm&quot;/&gt;\r\n            &lt;/subsystem&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:resource-adapters:1.0&quot;/&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:sar:1.0&quot;/&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:security:1.1&quot;&gt;\r\n                &lt;security-domains&gt;\r\n                    &lt;security-domain name=&quot;other&quot; cache-type=&quot;default&quot;&gt;\r\n                        &lt;authentication&gt;\r\n                            &lt;login-module code=&quot;Remoting&quot; flag=&quot;optional&quot;&gt;\r\n                                &lt;module-option name=&quot;password-stacking&quot; value=&quot;useFirstPass&quot;/&gt;\r\n                            &lt;/login-module&gt;\r\n                            &lt;login-module code=&quot;RealmUsersRoles&quot; flag=&quot;required&quot;&gt;\r\n                                &lt;module-option name=&quot;usersProperties&quot; value=&quot;${jboss.server.config.dir}/application-users.properties&quot;/&gt;\r\n                                &lt;module-option name=&quot;rolesProperties&quot; value=&quot;${jboss.server.config.dir}/application-roles.properties&quot;/&gt;\r\n                                &lt;module-option name=&quot;realm&quot; value=&quot;ApplicationRealm&quot;/&gt;\r\n                                &lt;module-option name=&quot;password-stacking&quot; value=&quot;useFirstPass&quot;/&gt;\r\n                            &lt;/login-module&gt;\r\n                        &lt;/authentication&gt;\r\n                    &lt;/security-domain&gt;\r\n                    &lt;security-domain name=&quot;jboss-web-policy&quot; cache-type=&quot;default&quot;&gt;\r\n                        &lt;authorization&gt;\r\n                            &lt;policy-module code=&quot;Delegating&quot; flag=&quot;required&quot;/&gt;\r\n                        &lt;/authorization&gt;\r\n                    &lt;/security-domain&gt;\r\n                    &lt;security-domain name=&quot;jboss-ejb-policy&quot; cache-type=&quot;default&quot;&gt;\r\n                        &lt;authorization&gt;\r\n                            &lt;policy-module code=&quot;Delegating&quot; flag=&quot;required&quot;/&gt;\r\n                        &lt;/authorization&gt;\r\n                    &lt;/security-domain&gt;\r\n                &lt;/security-domains&gt;\r\n            &lt;/subsystem&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:threads:1.1&quot;/&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:transactions:1.1&quot;&gt;\r\n                &lt;core-environment&gt;\r\n                    &lt;process-id&gt;\r\n                        &lt;uuid/&gt;\r\n                    &lt;/process-id&gt;\r\n                &lt;/core-environment&gt;\r\n                &lt;recovery-environment socket-binding=&quot;txn-recovery-environment&quot; status-socket-binding=&quot;txn-status-manager&quot;/&gt;\r\n                &lt;coordinator-environment default-timeout=&quot;300&quot;/&gt;\r\n            &lt;/subsystem&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:web:1.1&quot; default-virtual-server=&quot;default-host&quot; native=&quot;false&quot;&gt;\r\n                &lt;connector name=&quot;http&quot; protocol=&quot;HTTP/1.1&quot; scheme=&quot;http&quot; socket-binding=&quot;http&quot;/&gt;\r\n                &lt;virtual-server name=&quot;default-host&quot; enable-welcome-root=&quot;true&quot;&gt;\r\n                    &lt;alias name=&quot;localhost&quot;/&gt;\r\n                    &lt;alias name=&quot;example.com&quot;/&gt;\r\n                &lt;/virtual-server&gt;\r\n            &lt;/subsystem&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:webservices:1.1&quot;&gt;\r\n                &lt;modify-wsdl-address&gt;true&lt;/modify-wsdl-address&gt;\r\n                &lt;wsdl-host&gt;${jboss.bind.address:127.0.0.1}&lt;/wsdl-host&gt;\r\n                &lt;endpoint-config name=&quot;Standard-Endpoint-Config&quot;/&gt;\r\n                &lt;endpoint-config name=&quot;Recording-Endpoint-Config&quot;&gt;\r\n                    &lt;pre-handler-chain name=&quot;recording-handlers&quot; protocol-bindings=&quot;##SOAP11_HTTP ##SOAP11_HTTP_MTOM ##SOAP12_HTTP ##SOAP12_HTTP_MTOM&quot;&gt;\r\n                        &lt;handler name=&quot;RecordingHandler&quot; class=&quot;org.jboss.ws.common.invocation.RecordingServerHandler&quot;/&gt;\r\n                    &lt;/pre-handler-chain&gt;\r\n                &lt;/endpoint-config&gt;\r\n            &lt;/subsystem&gt;\r\n            &lt;subsystem xmlns=&quot;urn:jboss:domain:weld:1.0&quot;/&gt;\r\n        &lt;/profile&gt;\r\n    \r\n        &lt;interfaces&gt;\r\n            &lt;interface name=&quot;management&quot;&gt;\r\n                &lt;inet-address value=&quot;${jboss.bind.address.management:127.0.0.1}&quot;/&gt;\r\n            &lt;/interface&gt;\r\n            &lt;interface name=&quot;public&quot;&gt;\r\n                &lt;inet-address value=&quot;${jboss.bind.address:127.0.0.1}&quot;/&gt;\r\n            &lt;/interface&gt;\r\n            &lt;interface name=&quot;unsecure&quot;&gt;\r\n                &lt;inet-address value=&quot;${jboss.bind.address.unsecure:127.0.0.1}&quot;/&gt;\r\n            &lt;/interface&gt;\r\n        &lt;/interfaces&gt;\r\n    \r\n        &lt;socket-binding-group name=&quot;standard-sockets&quot; default-interface=&quot;public&quot; port-offset=&quot;${jboss.socket.binding.port-offset:0}&quot;&gt;\r\n            &lt;socket-binding name=&quot;management-native&quot; interface=&quot;management&quot; port=&quot;${jboss.management.native.port:9999}&quot;/&gt;\r\n            &lt;socket-binding name=&quot;management-http&quot; interface=&quot;management&quot; port=&quot;${jboss.management.http.port:9990}&quot;/&gt;\r\n            &lt;socket-binding name=&quot;management-https&quot; interface=&quot;management&quot; port=&quot;${jboss.management.https.port:9443}&quot;/&gt;\r\n            &lt;socket-binding name=&quot;ajp&quot; port=&quot;8009&quot;/&gt;\r\n            &lt;socket-binding name=&quot;http&quot; port=&quot;8080&quot;/&gt;\r\n            &lt;socket-binding name=&quot;https&quot; port=&quot;8443&quot;/&gt;\r\n            &lt;socket-binding name=&quot;osgi-http&quot; interface=&quot;management&quot; port=&quot;8090&quot;/&gt;\r\n            &lt;socket-binding name=&quot;remoting&quot; port=&quot;4447&quot;/&gt;\r\n            &lt;socket-binding name=&quot;txn-recovery-environment&quot; port=&quot;4712&quot;/&gt;\r\n            &lt;socket-binding name=&quot;txn-status-manager&quot; port=&quot;4713&quot;/&gt;\r\n            &lt;outbound-socket-binding name=&quot;mail-smtp&quot;&gt;\r\n                &lt;remote-destination host=&quot;localhost&quot; port=&quot;25&quot;/&gt;\r\n            &lt;/outbound-socket-binding&gt;\r\n        &lt;/socket-binding-group&gt;\r\n    \r\n        &lt;deployments&gt;\r\n            &lt;deployment name=&quot;jboss-as-helloworld-jsf.war&quot; runtime-name=&quot;jboss-as-helloworld-jsf.war&quot;&gt;\r\n                &lt;content sha1=&quot;87e5656e4c0b15f7864df9e68328d290999a1144&quot;/&gt;\r\n            &lt;/deployment&gt;\r\n        &lt;/deployments&gt;\r\n    &lt;/server&gt;\r\n\r\n\r\nI&#39;m using Hibernate 4.1.3, I had to add Hibernate jars as external jars to build path, even after changes in modules/org/hibernate/main (I changed module.xml and replaced old jars). After that changes I got different exception during deploy: .org.hibernate.service.classloading.spi.ClassLoadingException: Specified JDBC Driver com.mysql.jdbc.Driver class not found In Jboss&#39;s logs there is mentioned that com.mysql.jdbc.Driver is deployed. HELP!","title":"JBoss 7.1: No suitable driver found java:mysql - could not open connection","body":"<p>I was looking for an answer but didn't find solution.\nI'm developing simple web-app using JSF2 and Hibernate. This is first time I'm using Hibernate and I'm facing many problems with configuration. My current issue is:\nI configured mysql connector as a module in JBoss7.1 modules. Then I created datasource and added mysql-connector-java-5.1.20-bin.jar to the classpath (It is in WEB-INF/lib directory in .war). After starting JBoss I'm getting following logs:</p>\n\n<pre><code>23:44:07,497 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010403: Deploying JDBC-compliant driver class org.h2.Driver (version 1.3)\n23:44:07,603 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 27) JBAS010404: Deploying non-JDBC-compliant driver class com.mysql.jdbc.Driver (version 5.1)\n...\n23:44:20,348 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-3) JBAS010404: Deploying non-JDBC-compliant driver class com.mysql.jdbc.Driver (version 5.1)\n23:44:21,532 INFO  \n...\n[org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (MSC service thread 1-3) HHH000401: using driver [com.mysql.jdbc.Driver] at URL [jdbc:mysql://localhost/testdb]\n23:44:21,535 INFO  [org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl] (MSC service thread 1-3) HHH000046: Connection properties: {user=root}\n23:44:21,556 WARN  [org.hibernate.engine.jdbc.internal.JdbcServicesImpl] (MSC service thread 1-3) HHH000342: Could not obtain connection to query metadata : No suitable driver found for jdbc:mysql://localhost/testdb\n</code></pre>\n\n<p>And then application is deployed and server starts successfully. When I try to invoke method trying to persist some data I obtain  </p>\n\n<pre><code>org.hibernate.exception.JDBCConnectionException: Could not open connection\nand\njava.sql.SQLException: No suitable driver found for jdbc:mysql://localhost/testdb\n</code></pre>\n\n<p>I'm sure the mysql-connector-java-5.1.20-bin.jar is in the WEB-INF/lib directory in war file. Any ideas what am I missing here? MySQL server wersion is 5.1.63, but I don't think it is relevant here. \nThank's a lot in advance!</p>\n\n<p>edit:\nPort is OK, I checked everything two times;-) BUT, now I'm really confused, because code is working well outside the container. I created class which uses the same code (HIbernateUtil to obtain session factory) and there are no exceptions, and data is inserted to DB. Could you please explain me why it is working in that way, and why it is not working under the container? And how to fix this, because I have no idea... Thank you very much!</p>\n\n<p>My standalone.xml file:\n    </p>\n\n<pre><code>&lt;server xmlns=\"urn:jboss:domain:1.2\"&gt;\n\n    &lt;extensions&gt;\n        &lt;extension module=\"org.jboss.as.clustering.infinispan\"/&gt;\n        &lt;extension module=\"org.jboss.as.configadmin\"/&gt;\n        &lt;extension module=\"org.jboss.as.connector\"/&gt;\n        &lt;extension module=\"org.jboss.as.deployment-scanner\"/&gt;\n        &lt;extension module=\"org.jboss.as.ee\"/&gt;\n        &lt;extension module=\"org.jboss.as.ejb3\"/&gt;\n        &lt;extension module=\"org.jboss.as.jaxrs\"/&gt;\n        &lt;extension module=\"org.jboss.as.jdr\"/&gt;\n        &lt;extension module=\"org.jboss.as.jmx\"/&gt;\n        &lt;extension module=\"org.jboss.as.jpa\"/&gt;\n        &lt;extension module=\"org.jboss.as.logging\"/&gt;\n        &lt;extension module=\"org.jboss.as.mail\"/&gt;\n        &lt;extension module=\"org.jboss.as.naming\"/&gt;\n        &lt;extension module=\"org.jboss.as.osgi\"/&gt;\n        &lt;extension module=\"org.jboss.as.pojo\"/&gt;\n        &lt;extension module=\"org.jboss.as.remoting\"/&gt;\n        &lt;extension module=\"org.jboss.as.sar\"/&gt;\n        &lt;extension module=\"org.jboss.as.security\"/&gt;\n        &lt;extension module=\"org.jboss.as.threads\"/&gt;\n        &lt;extension module=\"org.jboss.as.transactions\"/&gt;\n        &lt;extension module=\"org.jboss.as.web\"/&gt;\n        &lt;extension module=\"org.jboss.as.webservices\"/&gt;\n        &lt;extension module=\"org.jboss.as.weld\"/&gt;\n    &lt;/extensions&gt;\n\n    &lt;management&gt;\n        &lt;security-realms&gt;\n            &lt;security-realm name=\"ManagementRealm\"&gt;\n                &lt;authentication&gt;\n                    &lt;properties path=\"mgmt-users.properties\" relative-to=\"jboss.server.config.dir\"/&gt;\n                &lt;/authentication&gt;\n            &lt;/security-realm&gt;\n            &lt;security-realm name=\"ApplicationRealm\"&gt;\n                &lt;authentication&gt;\n                    &lt;properties path=\"application-users.properties\" relative-to=\"jboss.server.config.dir\"/&gt;\n                &lt;/authentication&gt;\n            &lt;/security-realm&gt;\n        &lt;/security-realms&gt;\n        &lt;management-interfaces&gt;\n            &lt;native-interface security-realm=\"ManagementRealm\"&gt;\n                &lt;socket-binding native=\"management-native\"/&gt;\n            &lt;/native-interface&gt;\n            &lt;http-interface security-realm=\"ManagementRealm\"&gt;\n                &lt;socket-binding http=\"management-http\"/&gt;\n            &lt;/http-interface&gt;\n        &lt;/management-interfaces&gt;\n    &lt;/management&gt;\n\n    &lt;profile&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:logging:1.1\"&gt;\n            &lt;console-handler name=\"CONSOLE\"&gt;\n                &lt;level name=\"INFO\"/&gt;\n                &lt;formatter&gt;\n                    &lt;pattern-formatter pattern=\"%d{HH:mm:ss,SSS} %-5p [%c] (%t) %s%E%n\"/&gt;\n                &lt;/formatter&gt;\n            &lt;/console-handler&gt;\n            &lt;periodic-rotating-file-handler name=\"FILE\"&gt;\n                &lt;formatter&gt;\n                    &lt;pattern-formatter pattern=\"%d{HH:mm:ss,SSS} %-5p [%c] (%t) %s%E%n\"/&gt;\n                &lt;/formatter&gt;\n                &lt;file relative-to=\"jboss.server.log.dir\" path=\"server.log\"/&gt;\n                &lt;suffix value=\".yyyy-MM-dd\"/&gt;\n                &lt;append value=\"true\"/&gt;\n            &lt;/periodic-rotating-file-handler&gt;\n            &lt;logger category=\"com.arjuna\"&gt;\n                &lt;level name=\"WARN\"/&gt;\n            &lt;/logger&gt;\n            &lt;logger category=\"org.apache.tomcat.util.modeler\"&gt;\n                &lt;level name=\"WARN\"/&gt;\n            &lt;/logger&gt;\n            &lt;logger category=\"sun.rmi\"&gt;\n                &lt;level name=\"WARN\"/&gt;\n            &lt;/logger&gt;\n            &lt;logger category=\"jacorb\"&gt;\n                &lt;level name=\"WARN\"/&gt;\n            &lt;/logger&gt;\n            &lt;logger category=\"jacorb.config\"&gt;\n                &lt;level name=\"ERROR\"/&gt;\n            &lt;/logger&gt;\n            &lt;root-logger&gt;\n                &lt;level name=\"INFO\"/&gt;\n                &lt;handlers&gt;\n                    &lt;handler name=\"CONSOLE\"/&gt;\n                    &lt;handler name=\"FILE\"/&gt;\n                &lt;/handlers&gt;\n            &lt;/root-logger&gt;\n        &lt;/subsystem&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:configadmin:1.0\"/&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:datasources:1.0\"&gt;\n            &lt;datasources&gt;\n                &lt;datasource jndi-name=\"java:jboss/datasources/testDS\" pool-name=\"testDS\"&gt;\n                    &lt;connection-url&gt;jdbc:mysql://localhost:3306/testdb&lt;/connection-url&gt;\n                    &lt;driver&gt;mysql&lt;/driver&gt;\n                    &lt;pool&gt;\n                        &lt;min-pool-size&gt;10&lt;/min-pool-size&gt;\n                        &lt;max-pool-size&gt;20&lt;/max-pool-size&gt;\n                        &lt;prefill&gt;true&lt;/prefill&gt;\n                    &lt;/pool&gt;\n                    &lt;security&gt;\n                        &lt;user-name&gt;root&lt;/user-name&gt;\n                    &lt;/security&gt;\n                &lt;/datasource&gt;\n                &lt;datasource jndi-name=\"java:jboss/datasources/ExampleDS\" pool-name=\"ExampleDS\" enabled=\"true\" use-java-context=\"true\"&gt;\n                    &lt;connection-url&gt;jdbc:h2:mem:test;DB_CLOSE_DELAY=-1&lt;/connection-url&gt;\n                    &lt;driver&gt;h2&lt;/driver&gt;\n                    &lt;security&gt;\n                        &lt;user-name&gt;sa&lt;/user-name&gt;\n                        &lt;password&gt;sa&lt;/password&gt;\n                    &lt;/security&gt;\n                &lt;/datasource&gt;\n                &lt;drivers&gt;\n                    &lt;driver name=\"h2\" module=\"com.h2database.h2\"&gt;\n                        &lt;xa-datasource-class&gt;org.h2.jdbcx.JdbcDataSource&lt;/xa-datasource-class&gt;\n                    &lt;/driver&gt;\n                    &lt;driver name=\"mysql\" module=\"com.mysql\"/&gt;\n                &lt;/drivers&gt;\n            &lt;/datasources&gt;\n        &lt;/subsystem&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:deployment-scanner:1.1\"&gt;\n            &lt;deployment-scanner path=\"deployments\" relative-to=\"jboss.server.base.dir\" scan-interval=\"5000\"/&gt;\n        &lt;/subsystem&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:ee:1.0\"/&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:ejb3:1.2\"&gt;\n            &lt;session-bean&gt;\n                &lt;stateless&gt;\n                    &lt;bean-instance-pool-ref pool-name=\"slsb-strict-max-pool\"/&gt;\n                &lt;/stateless&gt;\n                &lt;stateful default-access-timeout=\"5000\" cache-ref=\"simple\"/&gt;\n                &lt;singleton default-access-timeout=\"5000\"/&gt;\n            &lt;/session-bean&gt;\n            &lt;pools&gt;\n                &lt;bean-instance-pools&gt;\n                    &lt;strict-max-pool name=\"slsb-strict-max-pool\" max-pool-size=\"20\" instance-acquisition-timeout=\"5\" instance-acquisition-timeout-unit=\"MINUTES\"/&gt;\n                    &lt;strict-max-pool name=\"mdb-strict-max-pool\" max-pool-size=\"20\" instance-acquisition-timeout=\"5\" instance-acquisition-timeout-unit=\"MINUTES\"/&gt;\n                &lt;/bean-instance-pools&gt;\n            &lt;/pools&gt;\n            &lt;caches&gt;\n                &lt;cache name=\"simple\" aliases=\"NoPassivationCache\"/&gt;\n                &lt;cache name=\"passivating\" passivation-store-ref=\"file\" aliases=\"SimpleStatefulCache\"/&gt;\n            &lt;/caches&gt;\n            &lt;passivation-stores&gt;\n                &lt;file-passivation-store name=\"file\"/&gt;\n            &lt;/passivation-stores&gt;\n            &lt;async thread-pool-name=\"default\"/&gt;\n            &lt;timer-service thread-pool-name=\"default\"&gt;\n                &lt;data-store path=\"timer-service-data\" relative-to=\"jboss.server.data.dir\"/&gt;\n            &lt;/timer-service&gt;\n            &lt;remote connector-ref=\"remoting-connector\" thread-pool-name=\"default\"/&gt;\n            &lt;thread-pools&gt;\n                &lt;thread-pool name=\"default\"&gt;\n                    &lt;max-threads count=\"10\"/&gt;\n                    &lt;keepalive-time time=\"100\" unit=\"milliseconds\"/&gt;\n                &lt;/thread-pool&gt;\n            &lt;/thread-pools&gt;\n        &lt;/subsystem&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:infinispan:1.2\" default-cache-container=\"hibernate\"&gt;\n            &lt;cache-container name=\"hibernate\" default-cache=\"local-query\"&gt;\n                &lt;local-cache name=\"entity\"&gt;\n                    &lt;transaction mode=\"NON_XA\"/&gt;\n                    &lt;eviction strategy=\"LRU\" max-entries=\"10000\"/&gt;\n                    &lt;expiration max-idle=\"100000\"/&gt;\n                &lt;/local-cache&gt;\n                &lt;local-cache name=\"local-query\"&gt;\n                    &lt;transaction mode=\"NONE\"/&gt;\n                    &lt;eviction strategy=\"LRU\" max-entries=\"10000\"/&gt;\n                    &lt;expiration max-idle=\"100000\"/&gt;\n                &lt;/local-cache&gt;\n                &lt;local-cache name=\"timestamps\"&gt;\n                    &lt;transaction mode=\"NONE\"/&gt;\n                    &lt;eviction strategy=\"NONE\"/&gt;\n                &lt;/local-cache&gt;\n            &lt;/cache-container&gt;\n        &lt;/subsystem&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:jaxrs:1.0\"/&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:jca:1.1\"&gt;\n            &lt;archive-validation enabled=\"true\" fail-on-error=\"true\" fail-on-warn=\"false\"/&gt;\n            &lt;bean-validation enabled=\"true\"/&gt;\n            &lt;default-workmanager&gt;\n                &lt;short-running-threads&gt;\n                    &lt;core-threads count=\"50\"/&gt;\n                    &lt;queue-length count=\"50\"/&gt;\n                    &lt;max-threads count=\"50\"/&gt;\n                    &lt;keepalive-time time=\"10\" unit=\"seconds\"/&gt;\n                &lt;/short-running-threads&gt;\n                &lt;long-running-threads&gt;\n                    &lt;core-threads count=\"50\"/&gt;\n                    &lt;queue-length count=\"50\"/&gt;\n                    &lt;max-threads count=\"50\"/&gt;\n                    &lt;keepalive-time time=\"10\" unit=\"seconds\"/&gt;\n                &lt;/long-running-threads&gt;\n            &lt;/default-workmanager&gt;\n            &lt;cached-connection-manager/&gt;\n        &lt;/subsystem&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:jdr:1.0\"/&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:jmx:1.1\"&gt;\n            &lt;show-model value=\"true\"/&gt;\n            &lt;remoting-connector/&gt;\n        &lt;/subsystem&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:jpa:1.0\"&gt;\n            &lt;jpa default-datasource=\"\"/&gt;\n        &lt;/subsystem&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:mail:1.0\"&gt;\n            &lt;mail-session jndi-name=\"java:jboss/mail/Default\"&gt;\n                &lt;smtp-server outbound-socket-binding-ref=\"mail-smtp\"/&gt;\n            &lt;/mail-session&gt;\n        &lt;/subsystem&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:naming:1.1\"/&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:osgi:1.2\" activation=\"lazy\"&gt;\n            &lt;properties&gt;\n                &lt;property name=\"org.osgi.framework.startlevel.beginning\"&gt;\n                    1\n                &lt;/property&gt;\n            &lt;/properties&gt;\n            &lt;capabilities&gt;\n                &lt;capability name=\"javax.servlet.api:v25\"/&gt;\n                &lt;capability name=\"javax.transaction.api\"/&gt;\n                &lt;capability name=\"org.apache.felix.log\" startlevel=\"1\"/&gt;\n                &lt;capability name=\"org.jboss.osgi.logging\" startlevel=\"1\"/&gt;\n                &lt;capability name=\"org.apache.felix.configadmin\" startlevel=\"1\"/&gt;\n                &lt;capability name=\"org.jboss.as.osgi.configadmin\" startlevel=\"1\"/&gt;\n            &lt;/capabilities&gt;\n        &lt;/subsystem&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:pojo:1.0\"/&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:remoting:1.1\"&gt;\n            &lt;connector name=\"remoting-connector\" socket-binding=\"remoting\" security-realm=\"ApplicationRealm\"/&gt;\n        &lt;/subsystem&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:resource-adapters:1.0\"/&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:sar:1.0\"/&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:security:1.1\"&gt;\n            &lt;security-domains&gt;\n                &lt;security-domain name=\"other\" cache-type=\"default\"&gt;\n                    &lt;authentication&gt;\n                        &lt;login-module code=\"Remoting\" flag=\"optional\"&gt;\n                            &lt;module-option name=\"password-stacking\" value=\"useFirstPass\"/&gt;\n                        &lt;/login-module&gt;\n                        &lt;login-module code=\"RealmUsersRoles\" flag=\"required\"&gt;\n                            &lt;module-option name=\"usersProperties\" value=\"${jboss.server.config.dir}/application-users.properties\"/&gt;\n                            &lt;module-option name=\"rolesProperties\" value=\"${jboss.server.config.dir}/application-roles.properties\"/&gt;\n                            &lt;module-option name=\"realm\" value=\"ApplicationRealm\"/&gt;\n                            &lt;module-option name=\"password-stacking\" value=\"useFirstPass\"/&gt;\n                        &lt;/login-module&gt;\n                    &lt;/authentication&gt;\n                &lt;/security-domain&gt;\n                &lt;security-domain name=\"jboss-web-policy\" cache-type=\"default\"&gt;\n                    &lt;authorization&gt;\n                        &lt;policy-module code=\"Delegating\" flag=\"required\"/&gt;\n                    &lt;/authorization&gt;\n                &lt;/security-domain&gt;\n                &lt;security-domain name=\"jboss-ejb-policy\" cache-type=\"default\"&gt;\n                    &lt;authorization&gt;\n                        &lt;policy-module code=\"Delegating\" flag=\"required\"/&gt;\n                    &lt;/authorization&gt;\n                &lt;/security-domain&gt;\n            &lt;/security-domains&gt;\n        &lt;/subsystem&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:threads:1.1\"/&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:transactions:1.1\"&gt;\n            &lt;core-environment&gt;\n                &lt;process-id&gt;\n                    &lt;uuid/&gt;\n                &lt;/process-id&gt;\n            &lt;/core-environment&gt;\n            &lt;recovery-environment socket-binding=\"txn-recovery-environment\" status-socket-binding=\"txn-status-manager\"/&gt;\n            &lt;coordinator-environment default-timeout=\"300\"/&gt;\n        &lt;/subsystem&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:web:1.1\" default-virtual-server=\"default-host\" native=\"false\"&gt;\n            &lt;connector name=\"http\" protocol=\"HTTP/1.1\" scheme=\"http\" socket-binding=\"http\"/&gt;\n            &lt;virtual-server name=\"default-host\" enable-welcome-root=\"true\"&gt;\n                &lt;alias name=\"localhost\"/&gt;\n                &lt;alias name=\"example.com\"/&gt;\n            &lt;/virtual-server&gt;\n        &lt;/subsystem&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:webservices:1.1\"&gt;\n            &lt;modify-wsdl-address&gt;true&lt;/modify-wsdl-address&gt;\n            &lt;wsdl-host&gt;${jboss.bind.address:127.0.0.1}&lt;/wsdl-host&gt;\n            &lt;endpoint-config name=\"Standard-Endpoint-Config\"/&gt;\n            &lt;endpoint-config name=\"Recording-Endpoint-Config\"&gt;\n                &lt;pre-handler-chain name=\"recording-handlers\" protocol-bindings=\"##SOAP11_HTTP ##SOAP11_HTTP_MTOM ##SOAP12_HTTP ##SOAP12_HTTP_MTOM\"&gt;\n                    &lt;handler name=\"RecordingHandler\" class=\"org.jboss.ws.common.invocation.RecordingServerHandler\"/&gt;\n                &lt;/pre-handler-chain&gt;\n            &lt;/endpoint-config&gt;\n        &lt;/subsystem&gt;\n        &lt;subsystem xmlns=\"urn:jboss:domain:weld:1.0\"/&gt;\n    &lt;/profile&gt;\n\n    &lt;interfaces&gt;\n        &lt;interface name=\"management\"&gt;\n            &lt;inet-address value=\"${jboss.bind.address.management:127.0.0.1}\"/&gt;\n        &lt;/interface&gt;\n        &lt;interface name=\"public\"&gt;\n            &lt;inet-address value=\"${jboss.bind.address:127.0.0.1}\"/&gt;\n        &lt;/interface&gt;\n        &lt;interface name=\"unsecure\"&gt;\n            &lt;inet-address value=\"${jboss.bind.address.unsecure:127.0.0.1}\"/&gt;\n        &lt;/interface&gt;\n    &lt;/interfaces&gt;\n\n    &lt;socket-binding-group name=\"standard-sockets\" default-interface=\"public\" port-offset=\"${jboss.socket.binding.port-offset:0}\"&gt;\n        &lt;socket-binding name=\"management-native\" interface=\"management\" port=\"${jboss.management.native.port:9999}\"/&gt;\n        &lt;socket-binding name=\"management-http\" interface=\"management\" port=\"${jboss.management.http.port:9990}\"/&gt;\n        &lt;socket-binding name=\"management-https\" interface=\"management\" port=\"${jboss.management.https.port:9443}\"/&gt;\n        &lt;socket-binding name=\"ajp\" port=\"8009\"/&gt;\n        &lt;socket-binding name=\"http\" port=\"8080\"/&gt;\n        &lt;socket-binding name=\"https\" port=\"8443\"/&gt;\n        &lt;socket-binding name=\"osgi-http\" interface=\"management\" port=\"8090\"/&gt;\n        &lt;socket-binding name=\"remoting\" port=\"4447\"/&gt;\n        &lt;socket-binding name=\"txn-recovery-environment\" port=\"4712\"/&gt;\n        &lt;socket-binding name=\"txn-status-manager\" port=\"4713\"/&gt;\n        &lt;outbound-socket-binding name=\"mail-smtp\"&gt;\n            &lt;remote-destination host=\"localhost\" port=\"25\"/&gt;\n        &lt;/outbound-socket-binding&gt;\n    &lt;/socket-binding-group&gt;\n\n    &lt;deployments&gt;\n        &lt;deployment name=\"jboss-as-helloworld-jsf.war\" runtime-name=\"jboss-as-helloworld-jsf.war\"&gt;\n            &lt;content sha1=\"87e5656e4c0b15f7864df9e68328d290999a1144\"/&gt;\n        &lt;/deployment&gt;\n    &lt;/deployments&gt;\n&lt;/server&gt;\n</code></pre>\n\n<p>I'm using Hibernate 4.1.3, I had to add Hibernate jars as external jars to build path, even after changes in modules/org/hibernate/main (I changed module.xml and replaced old jars). After that changes I got different exception during deploy: .org.hibernate.service.classloading.spi.ClassLoadingException: Specified JDBC Driver com.mysql.jdbc.Driver class not found In Jboss's logs there is mentioned that com.mysql.jdbc.Driver is deployed. HELP!</p>\n"},{"tags":["java","esper"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1698144235,"post_id":77343009,"comment_id":136365102,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"answers":[{"tags":[],"owner":{"account_id":4438616,"reputation":816,"user_id":3613754,"display_name":"user3613754"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698043677,"creation_date":1698043677,"answer_id":77343112,"question_id":77343009,"body_markdown":"The keys will depend on the EPL query. When the query has, for example, &quot;...where key1=value&quot;, the keys that are passed will have the value. There is an example that comes with the distribution.\r\n","title":"Esper VirtualDataWindowLookup","body":"<p>The keys will depend on the EPL query. When the query has, for example, &quot;...where key1=value&quot;, the keys that are passed will have the value. There is an example that comes with the distribution.</p>\n"}],"owner":{"account_id":29732556,"reputation":1,"user_id":22786779,"display_name":"Vikas M"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698043677,"creation_date":1698042216,"question_id":77343009,"body_markdown":"Hash anyone used Esper VirtualDataWindowLookup . I want to use Cache has my store and do not know how to integrate with VirtaulDataWindows.\r\n\r\nCan anyone help me in this regards\r\n\r\nI have tried implementing it but the keys are random","title":"Esper VirtualDataWindowLookup","body":"<p>Hash anyone used Esper VirtualDataWindowLookup . I want to use Cache has my store and do not know how to integrate with VirtaulDataWindows.</p>\n<p>Can anyone help me in this regards</p>\n<p>I have tried implementing it but the keys are random</p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":24440940,"reputation":3122,"user_id":18364656,"display_name":"Andrei Lisa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698043677,"creation_date":1698043677,"answer_id":77343111,"question_id":77336085,"body_markdown":"In this case you should use\r\n\r\n    spring:\r\n      profiles:\r\n        active: some-env\r\nMore details about it you can find in [documentation][1]\r\n\r\nAbout \r\n\r\n    spring:\r\n      config:\r\n        activate:\r\n          on-profile: some-env\r\n\r\nAlso all that you need is described in [documentation][2] (can be used to mark a configuration file segment profile-specific.)\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/3.0.0-M4/reference/htmlsingle/#howto.properties-and-configuration.set-active-spring-profiles\r\n  [2]: https://docs.spring.io/spring-boot/docs/3.0.0-M4/reference/htmlsingle/#howto.properties-and-configuration.change-configuration-depending-on-the-environment","title":"Migrating to spring.config.activate.on-profile in Spring Boot 3","body":"<p>In this case you should use</p>\n<pre><code>spring:\n  profiles:\n    active: some-env\n</code></pre>\n<p>More details about it you can find in <a href=\"https://docs.spring.io/spring-boot/docs/3.0.0-M4/reference/htmlsingle/#howto.properties-and-configuration.set-active-spring-profiles\" rel=\"nofollow noreferrer\">documentation</a></p>\n<p>About</p>\n<pre><code>spring:\n  config:\n    activate:\n      on-profile: some-env\n</code></pre>\n<p>Also all that you need is described in <a href=\"https://docs.spring.io/spring-boot/docs/3.0.0-M4/reference/htmlsingle/#howto.properties-and-configuration.change-configuration-depending-on-the-environment\" rel=\"nofollow noreferrer\">documentation</a> (can be used to mark a configuration file segment profile-specific.)</p>\n"}],"owner":{"account_id":3428378,"reputation":337,"user_id":2873514,"accept_rate":75,"display_name":"soso"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":225,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698043677,"creation_date":1697893275,"question_id":77336085,"body_markdown":"I am in the process of migrating an old Spring Boot application from 2.3.5.RELEASE to version 3.1.2 and attempting to update a module that uses configuration file format to align with the new profile activation mechanism introduced in Spring Boot 2.4. Previously, I was using spring.profiles to activate different configurations based on the active profile. However, in the new version, it seems that spring.config.activate.on-profile is the recommended approach.\r\n\r\nHere is an excerpt from my original configuration file (src/test/resources/example/auto-loaded/config-file.yaml):\r\n\r\n```\r\nauto-loaded:\r\n  yaml-config-file:\r\n    yaml-config-file-property: default value\r\n\r\n---\r\nspring:\r\n  profiles: some-env\r\n\r\nauto-loaded:\r\n  yaml-config-file:\r\n    yaml-config-file-property: value for some-env\r\n\r\n---\r\nspring:\r\n  profiles: some-other-env\r\n\r\nauto-loaded:\r\n  yaml-config-file:\r\n    yaml-config-file-property: value for some-other-env\r\n    some-other-env-property: expected not to be loaded\r\n\r\n```\r\nI attempted to migrate this to the new format as follows:\r\n\r\n```\r\nauto-loaded:\r\n  yaml-config-file:\r\n    yaml-config-file-property: default value\r\n\r\n---\r\nspring:\r\n  config:\r\n    activate:\r\n      on-profile: some-env\r\n\r\nauto-loaded:\r\n  yaml-config-file:\r\n    yaml-config-file-property: value for some-env\r\n\r\n---\r\nspring:\r\n  config:\r\n    activate:\r\n      on-profile: some-other-env\r\n\r\nauto-loaded:\r\n  yaml-config-file:\r\n    yaml-config-file-property: value for some-other-env\r\n    some-other-env-property: expected not to be loaded\r\n\r\n```\r\nAfter updating the configuration file, I am not seeing the expected behavior when activating the profiles some-env and some-other-env. The properties don&#39;t seem to be loaded or overridden as they were before the migration.\r\n\r\nHere are my questions:\r\n\r\nIs my updated configuration file format correct according to the new profile activation mechanism in Spring Boot 3?\r\nAre there additional steps needed to ensure that the profile-specific configurations are loaded and applied correctly?\r\nmore details can be found here https://github.com/negadras/config-properties (test class DefaultConfigLoaderTest and DefaultConfigLoaderWithProfileTest)\r\n","title":"Migrating to spring.config.activate.on-profile in Spring Boot 3","body":"<p>I am in the process of migrating an old Spring Boot application from 2.3.5.RELEASE to version 3.1.2 and attempting to update a module that uses configuration file format to align with the new profile activation mechanism introduced in Spring Boot 2.4. Previously, I was using spring.profiles to activate different configurations based on the active profile. However, in the new version, it seems that spring.config.activate.on-profile is the recommended approach.</p>\n<p>Here is an excerpt from my original configuration file (src/test/resources/example/auto-loaded/config-file.yaml):</p>\n<pre><code>auto-loaded:\n  yaml-config-file:\n    yaml-config-file-property: default value\n\n---\nspring:\n  profiles: some-env\n\nauto-loaded:\n  yaml-config-file:\n    yaml-config-file-property: value for some-env\n\n---\nspring:\n  profiles: some-other-env\n\nauto-loaded:\n  yaml-config-file:\n    yaml-config-file-property: value for some-other-env\n    some-other-env-property: expected not to be loaded\n\n</code></pre>\n<p>I attempted to migrate this to the new format as follows:</p>\n<pre><code>auto-loaded:\n  yaml-config-file:\n    yaml-config-file-property: default value\n\n---\nspring:\n  config:\n    activate:\n      on-profile: some-env\n\nauto-loaded:\n  yaml-config-file:\n    yaml-config-file-property: value for some-env\n\n---\nspring:\n  config:\n    activate:\n      on-profile: some-other-env\n\nauto-loaded:\n  yaml-config-file:\n    yaml-config-file-property: value for some-other-env\n    some-other-env-property: expected not to be loaded\n\n</code></pre>\n<p>After updating the configuration file, I am not seeing the expected behavior when activating the profiles some-env and some-other-env. The properties don't seem to be loaded or overridden as they were before the migration.</p>\n<p>Here are my questions:</p>\n<p>Is my updated configuration file format correct according to the new profile activation mechanism in Spring Boot 3?\nAre there additional steps needed to ensure that the profile-specific configurations are loaded and applied correctly?\nmore details can be found here <a href=\"https://github.com/negadras/config-properties\" rel=\"nofollow noreferrer\">https://github.com/negadras/config-properties</a> (test class DefaultConfigLoaderTest and DefaultConfigLoaderWithProfileTest)</p>\n"},{"tags":["java","spring-boot","caching","configuration","hazelcast"],"comments":[{"owner":{"account_id":25660752,"reputation":1,"user_id":19426520,"display_name":"Ritesh Kumar"},"score":0,"creation_date":1697786622,"post_id":77329019,"comment_id":136325939,"body_markdown":"Even doing second level cache to false,  not resolving the issue","body":"Even doing second level cache to false,  not resolving the issue"}],"answers":[{"tags":[],"owner":{"account_id":5639587,"reputation":412,"user_id":4463900,"display_name":"Or&#231;un &#199;olak"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698043333,"creation_date":1698043333,"answer_id":77343085,"question_id":77329019,"body_markdown":"My guess is there is a version conflict. You seem to be using **hazelcast-4.1.6** according to exception stack trace\r\n\r\n\r\nThis pom.xml works for me. It should bring in hazelcast **5.X**. Just make sure that you are **not using** hazelcast **4.X** somehow\r\n\r\n```xml\r\n&lt;parent&gt;\r\n  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n  &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n  &lt;version&gt;3.1.3&lt;/version&gt;\r\n  &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n&lt;/parent&gt;\r\n```\r\n\r\nAnd\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;com.hazelcast&lt;/groupId&gt;\r\n  &lt;artifactId&gt;hazelcast-hibernate53&lt;/artifactId&gt;\r\n  &lt;version&gt;5.1.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```","title":"Node failed to start! HazelCast","body":"<p>My guess is there is a version conflict. You seem to be using <strong>hazelcast-4.1.6</strong> according to exception stack trace</p>\n<p>This pom.xml works for me. It should bring in hazelcast <strong>5.X</strong>. Just make sure that you are <strong>not using</strong> hazelcast <strong>4.X</strong> somehow</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;parent&gt;\n  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n  &lt;version&gt;3.1.3&lt;/version&gt;\n  &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n&lt;/parent&gt;\n</code></pre>\n<p>And</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n  &lt;groupId&gt;com.hazelcast&lt;/groupId&gt;\n  &lt;artifactId&gt;hazelcast-hibernate53&lt;/artifactId&gt;\n  &lt;version&gt;5.1.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":25660752,"reputation":1,"user_id":19426520,"display_name":"Ritesh Kumar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1698043333,"creation_date":1697786513,"question_id":77329019,"body_markdown":"`\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource [com/prospecta/mdo/notification/config/MultiTenantDatasourceConfig.class]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.cache.spi.CacheImplementor]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804) ~[spring-beans-5.3.13.jar:5.3.13]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) ~[spring-beans-5.3.13.jar:5.3.13]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.13.jar:5.3.13]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.13.jar:5.3.13]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.13.jar:5.3.13]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.13.jar:5.3.13]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.13.jar:5.3.13]\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154) ~[spring-context-5.3.13.jar:5.3.13]\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908) ~[spring-context-5.3.13.jar:5.3.13]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.13.jar:5.3.13]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:765) ~[spring-boot-2.5.7.jar:2.5.7]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:445) ~[spring-boot-2.5.7.jar:2.5.7]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:338) ~[spring-boot-2.5.7.jar:2.5.7]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1354) ~[spring-boot-2.5.7.jar:2.5.7]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1343) ~[spring-boot-2.5.7.jar:2.5.7]\r\n\tat com.prospecta.mdo.notification.MdoNotificationApplication.main(MdoNotificationApplication.java:33) ~[classes/:na]\r\nCaused by: javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.cache.spi.CacheImplementor]\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:421) ~[spring-orm-5.3.13.jar:5.3.13]\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-5.3.13.jar:5.3.13]\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341) ~[spring-orm-5.3.13.jar:5.3.13]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863) ~[spring-beans-5.3.13.jar:5.3.13]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800) ~[spring-beans-5.3.13.jar:5.3.13]\r\n\t... 15 common frames omitted\r\nCaused by: org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.cache.spi.CacheImplementor]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:275) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:237) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.service.internal.SessionFactoryServiceRegistryImpl.getService(SessionFactoryServiceRegistryImpl.java:98) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:246) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:468) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1259) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58) ~[spring-orm-5.3.13.jar:5.3.13]\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365) ~[spring-orm-5.3.13.jar:5.3.13]\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-5.3.13.jar:5.3.13]\r\n\t... 19 common frames omitted\r\nCaused by: java.lang.IllegalStateException: Cache provider not started\r\n\tat org.hibernate.cache.spi.AbstractRegionFactory.verifyStarted(AbstractRegionFactory.java:65) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.cache.spi.support.RegionFactoryTemplate.buildTimestampsRegion(RegionFactoryTemplate.java:66) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.cache.internal.EnabledCaching.&lt;init&gt;(EnabledCaching.java:85) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.engine.spi.CacheInitiator.initiateService(CacheInitiator.java:33) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.engine.spi.CacheInitiator.initiateService(CacheInitiator.java:24) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.service.spi.SessionFactoryServiceInitiator.initiateService(SessionFactoryServiceInitiator.java:30) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.service.internal.SessionFactoryServiceRegistryImpl.initiateService(SessionFactoryServiceRegistryImpl.java:62) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:263) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\t... 28 common frames omitted\r\nCaused by: java.lang.IllegalStateException: Node failed to start!\r\n\tat com.hazelcast.instance.impl.HazelcastInstanceImpl.&lt;init&gt;(HazelcastInstanceImpl.java:125) ~[hazelcast-4.1.6.jar:4.1.6]\r\n\tat com.hazelcast.instance.impl.HazelcastInstanceFactory.constructHazelcastInstance(HazelcastInstanceFactory.java:211) ~[hazelcast-4.1.6.jar:4.1.6]\r\n\tat com.hazelcast.instance.impl.HazelcastInstanceFactory.newHazelcastInstance(HazelcastInstanceFactory.java:190) ~[hazelcast-4.1.6.jar:4.1.6]\r\n\tat com.hazelcast.instance.impl.HazelcastInstanceFactory.newHazelcastInstance(HazelcastInstanceFactory.java:128) ~[hazelcast-4.1.6.jar:4.1.6]\r\n\tat com.hazelcast.core.Hazelcast.newHazelcastInstance(Hazelcast.java:57) ~[hazelcast-4.1.6.jar:4.1.6]\r\n\tat com.hazelcast.hibernate.instance.HazelcastInstanceLoader.loadInstance(HazelcastInstanceLoader.java:79) ~[hazelcast-hibernate53-2.2.1.jar:2.2.1]\r\n\tat com.hazelcast.hibernate.AbstractHazelcastCacheRegionFactory.prepareForUse(AbstractHazelcastCacheRegionFactory.java:147) ~[hazelcast-hibernate53-2.2.1.jar:2.2.1]\r\n\tat org.hibernate.cache.spi.AbstractRegionFactory.start(AbstractRegionFactory.java:91) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\tat org.hibernate.cache.internal.EnabledCaching.&lt;init&gt;(EnabledCaching.java:82) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\r\n\t... 33 common frames omitted\r\n\r\n`\r\n\r\n\r\nPropeties file\r\n\r\nspring.mvc.pathmatch.matching-strategy=ANT_PATH_MATCHER\r\n\r\nspring.jpa.properties.hibernate.cache.use_second_level_cache=true\r\n\r\nspring.jpa.properties.javax.persistence.sharedCache.mode=ENABLE_SELECTIVE\r\n\r\nspring.jpa.properties.hibernate.cache.use_query_cache=true\r\n\r\nspring.jpa.properties.hibernate.cache.region.factory_class=com.hazelcast.hibernate.HazelcastCacheRegionFactory\r\n\r\nMy application is not getting up\r\n\r\n","title":"Node failed to start! HazelCast","body":"<p>`\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [com/prospecta/mdo/notification/config/MultiTenantDatasourceConfig.class]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.cache.spi.CacheImplementor]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804) ~[spring-beans-5.3.13.jar:5.3.13]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) ~[spring-beans-5.3.13.jar:5.3.13]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.13.jar:5.3.13]\nat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.13.jar:5.3.13]\nat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.13.jar:5.3.13]\nat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.13.jar:5.3.13]\nat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.13.jar:5.3.13]\nat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154) ~[spring-context-5.3.13.jar:5.3.13]\nat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908) ~[spring-context-5.3.13.jar:5.3.13]\nat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.13.jar:5.3.13]\nat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:765) ~[spring-boot-2.5.7.jar:2.5.7]\nat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:445) ~[spring-boot-2.5.7.jar:2.5.7]\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:338) ~[spring-boot-2.5.7.jar:2.5.7]\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:1354) ~[spring-boot-2.5.7.jar:2.5.7]\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:1343) ~[spring-boot-2.5.7.jar:2.5.7]\nat com.prospecta.mdo.notification.MdoNotificationApplication.main(MdoNotificationApplication.java:33) ~[classes/:na]\nCaused by: javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.cache.spi.CacheImplementor]\nat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:421) ~[spring-orm-5.3.13.jar:5.3.13]\nat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-5.3.13.jar:5.3.13]\nat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341) ~[spring-orm-5.3.13.jar:5.3.13]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863) ~[spring-beans-5.3.13.jar:5.3.13]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800) ~[spring-beans-5.3.13.jar:5.3.13]\n... 15 common frames omitted\nCaused by: org.hibernate.service.spi.ServiceException: Unable to create requested service [org.hibernate.cache.spi.CacheImplementor]\nat org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:275) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\nat org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:237) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\nat org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\nat org.hibernate.service.internal.SessionFactoryServiceRegistryImpl.getService(SessionFactoryServiceRegistryImpl.java:98) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\nat org.hibernate.internal.SessionFactoryImpl.(SessionFactoryImpl.java:246) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\nat org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:468) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\nat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1259) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\nat org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:58) ~[spring-orm-5.3.13.jar:5.3.13]\nat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:365) ~[spring-orm-5.3.13.jar:5.3.13]\nat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-5.3.13.jar:5.3.13]\n... 19 common frames omitted\nCaused by: java.lang.IllegalStateException: Cache provider not started\nat org.hibernate.cache.spi.AbstractRegionFactory.verifyStarted(AbstractRegionFactory.java:65) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\nat org.hibernate.cache.spi.support.RegionFactoryTemplate.buildTimestampsRegion(RegionFactoryTemplate.java:66) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\nat org.hibernate.cache.internal.EnabledCaching.(EnabledCaching.java:85) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\nat org.hibernate.engine.spi.CacheInitiator.initiateService(CacheInitiator.java:33) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\nat org.hibernate.engine.spi.CacheInitiator.initiateService(CacheInitiator.java:24) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\nat org.hibernate.service.spi.SessionFactoryServiceInitiator.initiateService(SessionFactoryServiceInitiator.java:30) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\nat org.hibernate.service.internal.SessionFactoryServiceRegistryImpl.initiateService(SessionFactoryServiceRegistryImpl.java:62) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\nat org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:263) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n... 28 common frames omitted\nCaused by: java.lang.IllegalStateException: Node failed to start!\nat com.hazelcast.instance.impl.HazelcastInstanceImpl.(HazelcastInstanceImpl.java:125) ~[hazelcast-4.1.6.jar:4.1.6]\nat com.hazelcast.instance.impl.HazelcastInstanceFactory.constructHazelcastInstance(HazelcastInstanceFactory.java:211) ~[hazelcast-4.1.6.jar:4.1.6]\nat com.hazelcast.instance.impl.HazelcastInstanceFactory.newHazelcastInstance(HazelcastInstanceFactory.java:190) ~[hazelcast-4.1.6.jar:4.1.6]\nat com.hazelcast.instance.impl.HazelcastInstanceFactory.newHazelcastInstance(HazelcastInstanceFactory.java:128) ~[hazelcast-4.1.6.jar:4.1.6]\nat com.hazelcast.core.Hazelcast.newHazelcastInstance(Hazelcast.java:57) ~[hazelcast-4.1.6.jar:4.1.6]\nat com.hazelcast.hibernate.instance.HazelcastInstanceLoader.loadInstance(HazelcastInstanceLoader.java:79) ~[hazelcast-hibernate53-2.2.1.jar:2.2.1]\nat com.hazelcast.hibernate.AbstractHazelcastCacheRegionFactory.prepareForUse(AbstractHazelcastCacheRegionFactory.java:147) ~[hazelcast-hibernate53-2.2.1.jar:2.2.1]\nat org.hibernate.cache.spi.AbstractRegionFactory.start(AbstractRegionFactory.java:91) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\nat org.hibernate.cache.internal.EnabledCaching.(EnabledCaching.java:82) ~[hibernate-core-5.4.32.Final.jar:5.4.32.Final]\n... 33 common frames omitted</p>\n<p>`</p>\n<p>Propeties file</p>\n<p>spring.mvc.pathmatch.matching-strategy=ANT_PATH_MATCHER</p>\n<p>spring.jpa.properties.hibernate.cache.use_second_level_cache=true</p>\n<p>spring.jpa.properties.javax.persistence.sharedCache.mode=ENABLE_SELECTIVE</p>\n<p>spring.jpa.properties.hibernate.cache.use_query_cache=true</p>\n<p>spring.jpa.properties.hibernate.cache.region.factory_class=com.hazelcast.hibernate.HazelcastCacheRegionFactory</p>\n<p>My application is not getting up</p>\n"},{"tags":["java","user-interface","javafx","scenebuilder","javafx-11"],"comments":[{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":2,"creation_date":1697796148,"post_id":77329935,"comment_id":136327635,"body_markdown":"You may have a better chance of assistance if you provide a [mcve] of what you already have, even if it doesn’t currently function as you wish it to.","body":"You may have a better chance of assistance if you provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of what you already have, even if it doesn’t currently function as you wish it to."},{"owner":{"account_id":4498992,"reputation":735,"user_id":3658055,"display_name":"Birdasaur"},"score":1,"creation_date":1697819943,"post_id":77329935,"comment_id":136332046,"body_markdown":"To get the desired effect I can see two paths... Create a custom control or extend the JavaFX Menu Nodes. Creating a custom control will present the challenge of getting the overlay logic correct. Extending the Menu nodes will be a matter of setting the graphic assigned to each MenuItem to a small custom node which is reactive in the way you want. Both ways seem like the same amount of total work, though admittedly reusing the Menu components probably gets you a functional though incomplete capability quicker.","body":"To get the desired effect I can see two paths... Create a custom control or extend the JavaFX Menu Nodes. Creating a custom control will present the challenge of getting the overlay logic correct. Extending the Menu nodes will be a matter of setting the graphic assigned to each MenuItem to a small custom node which is reactive in the way you want. Both ways seem like the same amount of total work, though admittedly reusing the Menu components probably gets you a functional though incomplete capability quicker."},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":1,"creation_date":1697825908,"post_id":77329935,"comment_id":136333006,"body_markdown":"See if any of the ideas [here](https://stackoverflow.com/questions/76420533/how-to-slide-a-vbox-open-and-close-in-javafx/76424415#76424415) can help.","body":"See if any of the ideas <a href=\"https://stackoverflow.com/questions/76420533/how-to-slide-a-vbox-open-and-close-in-javafx/76424415#76424415\">here</a> can help."}],"answers":[{"tags":[],"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1697859029,"creation_date":1697842912,"answer_id":77334133,"question_id":77329935,"body_markdown":"Simplistically, you can use a [`MenuButton`][1] with a [`popupSide`][2] of `Side.TOP`.  *It may not be exactly what you are after.* In particular, there is no &quot;Toggle when Hovered&quot; functionality.\r\n\r\nThe example does not *exactly* match how the Windows button and menus are working.  The Windows start button has lots of stuff going on (and I think it can also be configured to work different ways).  You probably don&#39;t want all of that functionality.  For example, the Windows button displays two menus side by side on pressing the button, one with the icons for various actions and another with an alphabetical application list.  The UI is optimized to be able to display both unless you hover on the icons on left side, in which case it removes the right alphabetical list and displays the text for the icons instead.  But if you only need to display one menu list (likely) then you may as well display both the icons and text for the left side menu at the same time, which is what the example I provided does. \r\n\r\n[![MenuButton][3]][3]\r\n\r\nMy example is in code, but most of the stuff will translate to FXML and SceneBuilder if you wish to use that.  Most of the icons I used are provided in [this question](https://stackoverflow.com/questions/72050368/javafx-combobox-with-custom-cell-factory-buggy-rendering/72050915#72050915).\r\n\r\n    import javafx.application.Application;\r\n    import javafx.geometry.Side;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.MenuButton;\r\n    import javafx.scene.control.MenuItem;\r\n    import javafx.scene.image.Image;\r\n    import javafx.scene.image.ImageView;\r\n    import javafx.scene.layout.*;\r\n    import javafx.scene.paint.*;\r\n    import javafx.stage.Stage;\r\n    import org.jetbrains.annotations.NotNull;\r\n    \r\n    import java.util.Objects;\r\n    \r\n    public class MenuApp extends Application {\r\n        private static final String CSS = &quot;data:text/css,.root { -fx-base: #3c3f4a; -fx-font-size: 18px; }&quot;;\r\n    \r\n        @Override\r\n        public void start(Stage stage) {\r\n            StackPane content = new StackPane();\r\n            content.setPrefSize(400, 300);\r\n            content.setBackground(createGradient());\r\n    \r\n            MenuButton windowsMenuButton = new MenuButton(\r\n                    null,\r\n                    createImageView(&quot;Dragon-icon.png&quot;)\r\n            );\r\n            MenuItem documents = new MenuItem(\r\n                    &quot;Documents&quot;,\r\n                    createImageView(&quot;Medusa-icon.png&quot;)\r\n            );\r\n            MenuItem pictures = new MenuItem(\r\n                    &quot;Pictures&quot;,\r\n                    createImageView(&quot;Unicorn-icon.png&quot;)\r\n            );\r\n            MenuItem settings = new MenuItem(\r\n                    &quot;Settings&quot;,\r\n                    createImageView(&quot;Treant-icon.png&quot;)\r\n            );\r\n            MenuItem power = new MenuItem(\r\n                    &quot;Power&quot;,\r\n                    createImageView(&quot;spaceShip.png&quot;)\r\n            );\r\n            windowsMenuButton.getItems().addAll(documents, pictures, settings, power);\r\n            windowsMenuButton.setPopupSide(Side.TOP);\r\n\r\n            HBox bottomBar = new HBox(windowsMenuButton);\r\n    \r\n            BorderPane borderPane = new BorderPane();\r\n            borderPane.setCenter(content);\r\n            borderPane.setBottom(bottomBar);\r\n            borderPane.getStylesheets().add(CSS);\r\n    \r\n            stage.setScene(new Scene(borderPane));\r\n            stage.show();\r\n        }\r\n    \r\n        @NotNull\r\n        private static Background createGradient() {\r\n            return Background.fill(\r\n                    new LinearGradient(\r\n                            0, 0, 1, 0,\r\n                            true,\r\n                            CycleMethod.NO_CYCLE,\r\n                            new Stop(0, Color.LIGHTBLUE),\r\n                            new Stop(1, Color.PALEGREEN)\r\n                    )\r\n            );\r\n        }\r\n    \r\n        @NotNull\r\n        private static ImageView createImageView(String iconFilename) {\r\n            return new ImageView(\r\n                    new Image(\r\n                            Objects.requireNonNull(\r\n                                    MenuApp.class.getResource(\r\n                                            iconFilename\r\n                                    )\r\n                            ).toExternalForm(),\r\n                            48, 48, true, true\r\n                    )\r\n            );\r\n        }\r\n    }\r\n\r\nWhen I tried this, there was a slight bug for JavaFX 21, OS X, in that the pop-up menu did not appear in the correct location the very first time I clicked on it (it displayed fine on subsequent clicks).  Your outcome may vary depending on your JavaFX version.\r\n\r\n\r\n  [1]: https://openjfx.io/javadoc/21/javafx.controls/javafx/scene/control/MenuButton.html\r\n  [2]: https://openjfx.io/javadoc/21/javafx.controls/javafx/scene/control/MenuButton.html#popupSideProperty()\r\n  [3]: https://i.stack.imgur.com/hClU0.png\r\n","title":"javafx - Navigation Sidebar with Toggle When Hovered","body":"<p>Simplistically, you can use a <a href=\"https://openjfx.io/javadoc/21/javafx.controls/javafx/scene/control/MenuButton.html\" rel=\"nofollow noreferrer\"><code>MenuButton</code></a> with a <a href=\"https://openjfx.io/javadoc/21/javafx.controls/javafx/scene/control/MenuButton.html#popupSideProperty()\" rel=\"nofollow noreferrer\"><code>popupSide</code></a> of <code>Side.TOP</code>.  <em>It may not be exactly what you are after.</em> In particular, there is no &quot;Toggle when Hovered&quot; functionality.</p>\n<p>The example does not <em>exactly</em> match how the Windows button and menus are working.  The Windows start button has lots of stuff going on (and I think it can also be configured to work different ways).  You probably don't want all of that functionality.  For example, the Windows button displays two menus side by side on pressing the button, one with the icons for various actions and another with an alphabetical application list.  The UI is optimized to be able to display both unless you hover on the icons on left side, in which case it removes the right alphabetical list and displays the text for the icons instead.  But if you only need to display one menu list (likely) then you may as well display both the icons and text for the left side menu at the same time, which is what the example I provided does.</p>\n<p><a href=\"https://i.stack.imgur.com/hClU0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hClU0.png\" alt=\"MenuButton\" /></a></p>\n<p>My example is in code, but most of the stuff will translate to FXML and SceneBuilder if you wish to use that.  Most of the icons I used are provided in <a href=\"https://stackoverflow.com/questions/72050368/javafx-combobox-with-custom-cell-factory-buggy-rendering/72050915#72050915\">this question</a>.</p>\n<pre><code>import javafx.application.Application;\nimport javafx.geometry.Side;\nimport javafx.scene.Scene;\nimport javafx.scene.control.MenuButton;\nimport javafx.scene.control.MenuItem;\nimport javafx.scene.image.Image;\nimport javafx.scene.image.ImageView;\nimport javafx.scene.layout.*;\nimport javafx.scene.paint.*;\nimport javafx.stage.Stage;\nimport org.jetbrains.annotations.NotNull;\n\nimport java.util.Objects;\n\npublic class MenuApp extends Application {\n    private static final String CSS = &quot;data:text/css,.root { -fx-base: #3c3f4a; -fx-font-size: 18px; }&quot;;\n\n    @Override\n    public void start(Stage stage) {\n        StackPane content = new StackPane();\n        content.setPrefSize(400, 300);\n        content.setBackground(createGradient());\n\n        MenuButton windowsMenuButton = new MenuButton(\n                null,\n                createImageView(&quot;Dragon-icon.png&quot;)\n        );\n        MenuItem documents = new MenuItem(\n                &quot;Documents&quot;,\n                createImageView(&quot;Medusa-icon.png&quot;)\n        );\n        MenuItem pictures = new MenuItem(\n                &quot;Pictures&quot;,\n                createImageView(&quot;Unicorn-icon.png&quot;)\n        );\n        MenuItem settings = new MenuItem(\n                &quot;Settings&quot;,\n                createImageView(&quot;Treant-icon.png&quot;)\n        );\n        MenuItem power = new MenuItem(\n                &quot;Power&quot;,\n                createImageView(&quot;spaceShip.png&quot;)\n        );\n        windowsMenuButton.getItems().addAll(documents, pictures, settings, power);\n        windowsMenuButton.setPopupSide(Side.TOP);\n\n        HBox bottomBar = new HBox(windowsMenuButton);\n\n        BorderPane borderPane = new BorderPane();\n        borderPane.setCenter(content);\n        borderPane.setBottom(bottomBar);\n        borderPane.getStylesheets().add(CSS);\n\n        stage.setScene(new Scene(borderPane));\n        stage.show();\n    }\n\n    @NotNull\n    private static Background createGradient() {\n        return Background.fill(\n                new LinearGradient(\n                        0, 0, 1, 0,\n                        true,\n                        CycleMethod.NO_CYCLE,\n                        new Stop(0, Color.LIGHTBLUE),\n                        new Stop(1, Color.PALEGREEN)\n                )\n        );\n    }\n\n    @NotNull\n    private static ImageView createImageView(String iconFilename) {\n        return new ImageView(\n                new Image(\n                        Objects.requireNonNull(\n                                MenuApp.class.getResource(\n                                        iconFilename\n                                )\n                        ).toExternalForm(),\n                        48, 48, true, true\n                )\n        );\n    }\n}\n</code></pre>\n<p>When I tried this, there was a slight bug for JavaFX 21, OS X, in that the pop-up menu did not appear in the correct location the very first time I clicked on it (it displayed fine on subsequent clicks).  Your outcome may vary depending on your JavaFX version.</p>\n"},{"tags":[],"owner":{"account_id":21741636,"reputation":1166,"user_id":16048914,"display_name":"David Weber"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698042803,"creation_date":1698042803,"answer_id":77343057,"question_id":77329935,"body_markdown":"**Solution** \r\n\r\nStep 1:\r\nCreate the complete view inclusive the opened content as scene. Use a BorderLayout as root node, put a vbox into left and into center. Put the content and the menu into this vboxes. \r\n\r\nStep 2:\r\nBoth vboxes need an ID / must be annotated with @FXML, so that you can access them in the controller.\r\n\r\nStep 3: \r\nOn initialize, hide the content-vbox and set an onHoverListener to the menu-vbox. I think this is done like this \r\n`menuVbox.hoverProperty().addListener(...)`.\r\n\r\nStep 4: \r\nAdd functionality to the listener. On hover, show the element, otherwise hide the element. \r\n\r\nTip:\r\nUse computed sizes. Check if the stages resizes automatically. If not, resize the stage in the listener manually.","title":"javafx - Navigation Sidebar with Toggle When Hovered","body":"<p><strong>Solution</strong></p>\n<p>Step 1:\nCreate the complete view inclusive the opened content as scene. Use a BorderLayout as root node, put a vbox into left and into center. Put the content and the menu into this vboxes.</p>\n<p>Step 2:\nBoth vboxes need an ID / must be annotated with @FXML, so that you can access them in the controller.</p>\n<p>Step 3:\nOn initialize, hide the content-vbox and set an onHoverListener to the menu-vbox. I think this is done like this\n<code>menuVbox.hoverProperty().addListener(...)</code>.</p>\n<p>Step 4:\nAdd functionality to the listener. On hover, show the element, otherwise hide the element.</p>\n<p>Tip:\nUse computed sizes. Check if the stages resizes automatically. If not, resize the stage in the listener manually.</p>\n"}],"owner":{"account_id":29580923,"reputation":9,"user_id":22670733,"display_name":"Haris Veerabadran"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1698042803,"creation_date":1697795400,"question_id":77329935,"body_markdown":"So in windows 10 you have the windows menu with the icons on the left side:\r\n\r\n[![left][1]][1]\r\n\r\nWhen Hover the left side the menu expands and text is show\r\n\r\n[![expanded][2]][2]\r\n\r\nThe expanded part is overlaying the content. \r\n\r\nIn my application I want to create that kind of design using Javafx and SceneBuilder.  \r\n\r\nI managed to design the button like when I hover the button it will expand and show the text but, I don&#39;t know how to expand the whole pane which contain the button. I put my buttons in VBox and give the same condition which I gave for my button expand design but, it doesn&#39;t work.\r\n\r\nAny help would be appreciated, especially examples.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/XFmce.png\r\n  [2]: https://i.stack.imgur.com/Lu1RE.png","title":"javafx - Navigation Sidebar with Toggle When Hovered","body":"<p>So in windows 10 you have the windows menu with the icons on the left side:</p>\n<p><a href=\"https://i.stack.imgur.com/XFmce.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XFmce.png\" alt=\"left\" /></a></p>\n<p>When Hover the left side the menu expands and text is show</p>\n<p><a href=\"https://i.stack.imgur.com/Lu1RE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Lu1RE.png\" alt=\"expanded\" /></a></p>\n<p>The expanded part is overlaying the content.</p>\n<p>In my application I want to create that kind of design using Javafx and SceneBuilder.</p>\n<p>I managed to design the button like when I hover the button it will expand and show the text but, I don't know how to expand the whole pane which contain the button. I put my buttons in VBox and give the same condition which I gave for my button expand design but, it doesn't work.</p>\n<p>Any help would be appreciated, especially examples.</p>\n"},{"tags":["java","spring-boot","redis","redis-sentinel","redisson"],"comments":[{"owner":{"account_id":8794729,"reputation":15297,"user_id":6572971,"display_name":"Alien"},"score":0,"creation_date":1544172471,"post_id":53665923,"comment_id":94189738,"body_markdown":".addSentinelAddress(&quot;redis://localhost:26379&quot;)\n                    .addSentinelAddress(&quot;redis://localhost:26379&quot;); both lines are same..change 2nd line port to 26378","body":".addSentinelAddress(&quot;redis://localhost:26379&quot;)                     .addSentinelAddress(&quot;redis://localhost:26379&quot;); both lines are same..change 2nd line port to 26378"},{"owner":{"account_id":6118321,"reputation":782,"user_id":4772633,"accept_rate":74,"display_name":"rohanagarwal"},"score":0,"creation_date":1544173129,"post_id":53665923,"comment_id":94190061,"body_markdown":"that&#39;s a typo in posting the question, I tried using different ports, different formats like - localhost:26379, 127.0.0.1:26379, redis://127.0.0.1:26379, none works","body":"that&#39;s a typo in posting the question, I tried using different ports, different formats like - localhost:26379, 127.0.0.1:26379, redis://127.0.0.1:26379, none works"}],"answers":[{"tags":[],"owner":{"account_id":6118321,"reputation":782,"user_id":4772633,"accept_rate":74,"display_name":"rohanagarwal"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1544595671,"creation_date":1544595671,"answer_id":53737171,"question_id":53665923,"body_markdown":"Redisson doesn&#39;t seem to be working with localhost addresses. When I replaced the sentinel nodes addresses with the ones hosted on AWS, it worked fine.\r\n\r\nRedisson, in my opinion, is a very immature client. Consider using lettuce or jedis.\r\n\r\nSee the bug filed at https://github.com/redisson/redisson/issues/1736\r\nwhich doesn&#39;t allow it to shut down.\r\n\r\nMost of the problems I faced were when I used the sentinel mode. Cluster mode I have not tried. Works fine in single mode.\r\n\r\nAlso, they don&#39;t cater to bugs or issues filed on github for months which is obvious as they have a pro and paid version, so you are on your own.\r\n\r\nI won&#39;t recommend using Redisson as of now.","title":"Spring Redisson Sentinel Error - At least two sentinels are required","body":"<p>Redisson doesn't seem to be working with localhost addresses. When I replaced the sentinel nodes addresses with the ones hosted on AWS, it worked fine.</p>\n\n<p>Redisson, in my opinion, is a very immature client. Consider using lettuce or jedis.</p>\n\n<p>See the bug filed at <a href=\"https://github.com/redisson/redisson/issues/1736\" rel=\"nofollow noreferrer\">https://github.com/redisson/redisson/issues/1736</a>\nwhich doesn't allow it to shut down.</p>\n\n<p>Most of the problems I faced were when I used the sentinel mode. Cluster mode I have not tried. Works fine in single mode.</p>\n\n<p>Also, they don't cater to bugs or issues filed on github for months which is obvious as they have a pro and paid version, so you are on your own.</p>\n\n<p>I won't recommend using Redisson as of now.</p>\n"},{"tags":[],"owner":{"account_id":11624596,"reputation":1170,"user_id":8514772,"display_name":"Pradipta Sarma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1618479891,"creation_date":1618479891,"answer_id":67106086,"question_id":53665923,"body_markdown":"Make sure you run both `redis-server` as well as `redis-sentinal &lt;config&gt;`.\r\nOnce done, check which port sentinal is running at. It could also be 5000, it was in my case. Then pass `&quot;redis://localhost:5000&quot;` to `addSentinelAddress`.","title":"Spring Redisson Sentinel Error - At least two sentinels are required","body":"<p>Make sure you run both <code>redis-server</code> as well as <code>redis-sentinal &lt;config&gt;</code>.\nOnce done, check which port sentinal is running at. It could also be 5000, it was in my case. Then pass <code>&quot;redis://localhost:5000&quot;</code> to <code>addSentinelAddress</code>.</p>\n"},{"tags":[],"owner":{"account_id":399098,"reputation":10373,"user_id":764206,"display_name":"Nikita Koksharov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698042451,"creation_date":1698042451,"answer_id":77343025,"question_id":53665923,"body_markdown":"You need to set `checkSentinelsList = false` setting.\r\n\r\n","title":"Spring Redisson Sentinel Error - At least two sentinels are required","body":"<p>You need to set <code>checkSentinelsList = false</code> setting.</p>\n"}],"owner":{"account_id":6118321,"reputation":782,"user_id":4772633,"accept_rate":74,"display_name":"rohanagarwal"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5320,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":53737171,"answer_count":3,"score":0,"last_activity_date":1698042451,"creation_date":1544171970,"question_id":53665923,"body_markdown":"I am using Sentinel mode for Redis. I am using Redisson Client version 3.9.1\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.redisson&lt;/groupId&gt;\r\n            &lt;artifactId&gt;redisson-spring-data-20&lt;/artifactId&gt;\r\n            &lt;version&gt;${redisson-version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.redisson&lt;/groupId&gt;\r\n            &lt;artifactId&gt;redisson&lt;/artifactId&gt;\r\n            &lt;version&gt;${redisson-version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\nThe configuration of Sentinel using Redisson:\r\n\r\n    @EnableCaching\r\n    public class RedisCache {\r\n    \r\n        @Autowired\r\n        private ObjectMapper objectMapper;\r\n    \r\n        @Bean\r\n        public RedissonClient redissonClient() {\r\n            Config config = new Config();\r\n            config.setCodec(new JsonJacksonCodec(objectMapper));\r\n    \r\n            config.useSentinelServers()\r\n                        .setMasterName(&quot;redis-master&quot;)\r\n                        .addSentinelAddress(&quot;redis://localhost:26378&quot;)\r\n                        .addSentinelAddress(&quot;redis://localhost:26379&quot;);\r\n    \r\n            return Redisson.create(config);\r\n        }\r\n    \r\n        @Bean\r\n        public RedissonConnectionFactory redissonConnectionFactory(RedissonClient redisson) {\r\n            return new RedissonConnectionFactory(redisson);\r\n        }\r\n    }\r\n\r\n\r\nI am running two sentinel servers and one Redis master with no slave.\r\nThis is just a setup on my local environment.  \r\nOutput of some commands:  \r\n\r\n    redis-cli -p 26379\r\n    127.0.0.1:26379&gt; SENTINEL get-master-addr-by-name redis-master\r\n    1) &quot;127.0.0.1&quot;\r\n    2) &quot;6379&quot;\r\n    redis-cli -p 26378\r\n    127.0.0.1:26378&gt; SENTINEL get-master-addr-by-name redis-master\r\n    1) &quot;127.0.0.1&quot;\r\n    2) &quot;6379&quot;\r\n\r\nWhenever I am running my Spring Boot Application, I get the following error:\r\n\r\n \r\n\r\n           Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;redissonClient&#39; defined in class path resource [xxxx/cache/impl/redis/config/RedisCache.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.redisson.api.RedissonClient]: Factory method &#39;redissonClient&#39; threw exception; nested exception is org.redisson.client.RedisConnectionException: At least two sentinels should be defined in Redis configuration!\r\n    \r\n    ......\r\n    \r\n                at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0 (AbstractBeanFactory.java:317)\r\n                at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton (DefaultSingletonBeanRegistry.java:222)\r\n                at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean (AbstractBeanFactory.java:315)\r\n                at org.springframework.beans.factory.support.AbstractBeanFactory.getBean (AbstractBeanFactory.java:204)\r\n                at org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType (ServletContextInitializerBeans.java:226)\r\n                at org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType (ServletContextInitializerBeans.java:214)\r\n                at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addServletContextInitializerBeans (ServletContextInitializerBeans.java:91)\r\n                at org.springframework.boot.web.servlet.ServletContextInitializerBeans.&lt;init&gt; (ServletContextInitializerBeans.java:80)\r\n                at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.getServletContextInitializerBeans (ServletWebServerApplicationContext.java:250)\r\n                at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.selfInitialize (ServletWebServerApplicationContext.java:237)\r\n                at org.springframework.boot.web.embedded.tomcat.TomcatStarter.onStartup (TomcatStarter.java:54)\r\n                at org.apache.catalina.core.StandardContext.startInternal (StandardContext.java:5245)\r\n                at org.apache.catalina.util.LifecycleBase.start (LifecycleBase.java:150)\r\n                at org.apache.catalina.core.ContainerBase$StartChild.call (ContainerBase.java:1420)\r\n                at org.apache.catalina.core.ContainerBase$StartChild.call (ContainerBase.java:1410)\r\n                at java.util.concurrent.FutureTask.run (FutureTask.java:266)\r\n                at java.util.concurrent.ThreadPoolExecutor.runWorker (ThreadPoolExecutor.java:1149)\r\n                at java.util.concurrent.ThreadPoolExecutor$Worker.run (ThreadPoolExecutor.java:624)\r\n                at java.lang.Thread.run (Thread.java:748)\r\n            [INFO] ------------------------------------------------------------------------\r\n            [INFO] BUILD FAILURE\r\n            [INFO] ------------------------------------------------------------------------\r\n            [INFO] Total time: 22.566 s\r\n            [INFO] Finished at: 2018-12-07T13:44:14+05:30\r\n            [INFO] ------------------------------------------------------------------------\r\n            [ERROR] Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:2.1.1.RELEASE:run (default-cli) on project xxx: An exception occurred while running. null: InvocationTargetException: Unable to start web server; nested exception is org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat: Error creating bean with name &#39;servletEndpointRegistrar&#39; defined in class path resource [org/springframework/boot/actuate/autoconfigure/endpoint/web/ServletEndpointManagementContextConfiguration$WebMvcServletEndpointManagementContextConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.actuate.endpoint.web.ServletEndpointRegistrar]: Factory method &#39;servletEndpointRegistrar&#39; threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;healthEndpoint&#39; defined in class path resource [org/springframework/boot/actuate/autoconfigure/health/HealthEndpointConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.actuate.health.HealthEndpoint]: Factory method &#39;healthEndpoint&#39; threw exception; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;org.springframework.boot.actuate.autoconfigure.redis.RedisHealthIndicatorConfiguration&#39;: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;redissonConnectionFactory&#39; defined in class path resource [xxxxxxx/cache/impl/redis/config/RedisCache.class]: Unsatisfied dependency expressed through method &#39;redissonConnectionFactory&#39; parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;redissonClient&#39; defined in class path resource [xxxxxx/cache/impl/redis/config/RedisCache.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.redisson.api.RedissonClient]: Factory method &#39;redissonClient&#39; threw exception; nested exception is org.redisson.client.RedisConnectionException: At least two sentinels should be defined in Redis configuration!\r\n\r\nHow do I resolve this error?\r\n\r\nPS: I have tried master-slave configuration also, with one sentinel attached to the host and other one attached to the slave, but the error remains the same. I have tried sentinels running on different local machines with different private IPs, but the error remains the same.\r\nTried with 3 sentinel servers, no benefits.\r\n\r\n","title":"Spring Redisson Sentinel Error - At least two sentinels are required","body":"<p>I am using Sentinel mode for Redis. I am using Redisson Client version 3.9.1</p>\n\n<pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.redisson&lt;/groupId&gt;\n        &lt;artifactId&gt;redisson-spring-data-20&lt;/artifactId&gt;\n        &lt;version&gt;${redisson-version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.redisson&lt;/groupId&gt;\n        &lt;artifactId&gt;redisson&lt;/artifactId&gt;\n        &lt;version&gt;${redisson-version}&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n\n<p>The configuration of Sentinel using Redisson:</p>\n\n<pre><code>@EnableCaching\npublic class RedisCache {\n\n    @Autowired\n    private ObjectMapper objectMapper;\n\n    @Bean\n    public RedissonClient redissonClient() {\n        Config config = new Config();\n        config.setCodec(new JsonJacksonCodec(objectMapper));\n\n        config.useSentinelServers()\n                    .setMasterName(\"redis-master\")\n                    .addSentinelAddress(\"redis://localhost:26378\")\n                    .addSentinelAddress(\"redis://localhost:26379\");\n\n        return Redisson.create(config);\n    }\n\n    @Bean\n    public RedissonConnectionFactory redissonConnectionFactory(RedissonClient redisson) {\n        return new RedissonConnectionFactory(redisson);\n    }\n}\n</code></pre>\n\n<p>I am running two sentinel servers and one Redis master with no slave.\nThis is just a setup on my local environment.<br>\nOutput of some commands:  </p>\n\n<pre><code>redis-cli -p 26379\n127.0.0.1:26379&gt; SENTINEL get-master-addr-by-name redis-master\n1) \"127.0.0.1\"\n2) \"6379\"\nredis-cli -p 26378\n127.0.0.1:26378&gt; SENTINEL get-master-addr-by-name redis-master\n1) \"127.0.0.1\"\n2) \"6379\"\n</code></pre>\n\n<p>Whenever I am running my Spring Boot Application, I get the following error:</p>\n\n<pre><code>       Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'redissonClient' defined in class path resource [xxxx/cache/impl/redis/config/RedisCache.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.redisson.api.RedissonClient]: Factory method 'redissonClient' threw exception; nested exception is org.redisson.client.RedisConnectionException: At least two sentinels should be defined in Redis configuration!\n\n......\n\n            at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0 (AbstractBeanFactory.java:317)\n            at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton (DefaultSingletonBeanRegistry.java:222)\n            at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean (AbstractBeanFactory.java:315)\n            at org.springframework.beans.factory.support.AbstractBeanFactory.getBean (AbstractBeanFactory.java:204)\n            at org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType (ServletContextInitializerBeans.java:226)\n            at org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType (ServletContextInitializerBeans.java:214)\n            at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addServletContextInitializerBeans (ServletContextInitializerBeans.java:91)\n            at org.springframework.boot.web.servlet.ServletContextInitializerBeans.&lt;init&gt; (ServletContextInitializerBeans.java:80)\n            at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.getServletContextInitializerBeans (ServletWebServerApplicationContext.java:250)\n            at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.selfInitialize (ServletWebServerApplicationContext.java:237)\n            at org.springframework.boot.web.embedded.tomcat.TomcatStarter.onStartup (TomcatStarter.java:54)\n            at org.apache.catalina.core.StandardContext.startInternal (StandardContext.java:5245)\n            at org.apache.catalina.util.LifecycleBase.start (LifecycleBase.java:150)\n            at org.apache.catalina.core.ContainerBase$StartChild.call (ContainerBase.java:1420)\n            at org.apache.catalina.core.ContainerBase$StartChild.call (ContainerBase.java:1410)\n            at java.util.concurrent.FutureTask.run (FutureTask.java:266)\n            at java.util.concurrent.ThreadPoolExecutor.runWorker (ThreadPoolExecutor.java:1149)\n            at java.util.concurrent.ThreadPoolExecutor$Worker.run (ThreadPoolExecutor.java:624)\n            at java.lang.Thread.run (Thread.java:748)\n        [INFO] ------------------------------------------------------------------------\n        [INFO] BUILD FAILURE\n        [INFO] ------------------------------------------------------------------------\n        [INFO] Total time: 22.566 s\n        [INFO] Finished at: 2018-12-07T13:44:14+05:30\n        [INFO] ------------------------------------------------------------------------\n        [ERROR] Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:2.1.1.RELEASE:run (default-cli) on project xxx: An exception occurred while running. null: InvocationTargetException: Unable to start web server; nested exception is org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat: Error creating bean with name 'servletEndpointRegistrar' defined in class path resource [org/springframework/boot/actuate/autoconfigure/endpoint/web/ServletEndpointManagementContextConfiguration$WebMvcServletEndpointManagementContextConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.actuate.endpoint.web.ServletEndpointRegistrar]: Factory method 'servletEndpointRegistrar' threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'healthEndpoint' defined in class path resource [org/springframework/boot/actuate/autoconfigure/health/HealthEndpointConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.actuate.health.HealthEndpoint]: Factory method 'healthEndpoint' threw exception; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.boot.actuate.autoconfigure.redis.RedisHealthIndicatorConfiguration': Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'redissonConnectionFactory' defined in class path resource [xxxxxxx/cache/impl/redis/config/RedisCache.class]: Unsatisfied dependency expressed through method 'redissonConnectionFactory' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'redissonClient' defined in class path resource [xxxxxx/cache/impl/redis/config/RedisCache.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.redisson.api.RedissonClient]: Factory method 'redissonClient' threw exception; nested exception is org.redisson.client.RedisConnectionException: At least two sentinels should be defined in Redis configuration!\n</code></pre>\n\n<p>How do I resolve this error?</p>\n\n<p>PS: I have tried master-slave configuration also, with one sentinel attached to the host and other one attached to the slave, but the error remains the same. I have tried sentinels running on different local machines with different private IPs, but the error remains the same.\nTried with 3 sentinel servers, no benefits.</p>\n"},{"tags":["java","android","performance","kotlin"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1697465669,"post_id":77302697,"comment_id":136279913,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":1,"creation_date":1697467327,"post_id":77302697,"comment_id":136280281,"body_markdown":"`When I opens any activity` Any? You said you had only one activity. Dont understand.","body":"<code>When I opens any activity</code> Any? You said you had only one activity. Dont understand."},{"owner":{"account_id":29684097,"reputation":1,"user_id":22750119,"display_name":"Taha"},"score":0,"creation_date":1697533552,"post_id":77302697,"comment_id":136288612,"body_markdown":"Yes, I&#39;ve single activity but I&#39;m trying to share an image from one of my fragment and for that I need to start an activity","body":"Yes, I&#39;ve single activity but I&#39;m trying to share an image from one of my fragment and for that I need to start an activity"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1697548288,"post_id":77302697,"comment_id":136291574,"body_markdown":"Which activity? Your activity is already running. Your fragment is in an activity that runs. Still don&#39;t understand.","body":"Which activity? Your activity is already running. Your fragment is in an activity that runs. Still don&#39;t understand."},{"owner":{"account_id":29684097,"reputation":1,"user_id":22750119,"display_name":"Taha"},"score":0,"creation_date":1697563547,"post_id":77302697,"comment_id":136294655,"body_markdown":"Yes, my activity is already running and my fragments are within this activity and as per the requirement I&#39;m trying to open another activity from one of my fragment","body":"Yes, my activity is already running and my fragments are within this activity and as per the requirement I&#39;m trying to open another activity from one of my fragment"}],"answers":[{"tags":[],"owner":{"account_id":270025,"reputation":6187,"user_id":3649629,"accept_rate":67,"display_name":"Gleichmut"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697469988,"creation_date":1697469988,"answer_id":77303202,"question_id":77302697,"body_markdown":"Please turn on ```StrictMode``` and add ```LeakCanary``` to evaluate the most obvious issues with your performance. \r\n\r\nAfter that try to to turn on Proguard to obfuscate and strip code from not relevant things. \r\n\r\nIf performance still will be an issue, consider to move code into separate activities or to try ```compose``` if you have specific requirements. ","title":"In Single Activity Architecture, If I start an activity multiple times from any of my fragment, my app is becoming slow","body":"<p>Please turn on <code>StrictMode</code> and add <code>LeakCanary</code> to evaluate the most obvious issues with your performance.</p>\n<p>After that try to to turn on Proguard to obfuscate and strip code from not relevant things.</p>\n<p>If performance still will be an issue, consider to move code into separate activities or to try <code>compose</code> if you have specific requirements.</p>\n"}],"owner":{"account_id":29684097,"reputation":1,"user_id":22750119,"display_name":"Taha"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698042330,"creation_date":1697465533,"question_id":77302697,"body_markdown":"I&#39;ve an activity in which I&#39;ve almost 20 fragments. App is working perfectly fine but :\r\n\r\n1. When I opens any activity (either implicit or explicit) from a fragment and press back, my app is gradually becoming slow (UI is lagging mostly on scrolling). \r\n\r\nSluggish behavior of the app increases on the basis of repeating the step 1 again &amp; again \r\n \r\nWhile doing RCA, I was thinking that this might be happening because of some specific heavy activity or fragment so, I&#39;ve created a sample activity which I&#39;ve tried opening from different fragments but the issue is still there and it is not related to a specific activity or fragment it is related to all over the app\r\n\r\n\r\nNeed an expert opinion how to resolved this issue\r\n\r\nTried multiple things :\r\n- Removed unused resources\r\n- Used coroutines for heavy tasks\r\n- Network cache api\r\n- Profiler is not showing anything wired \r\netc etc..\r\n\r\nAlso, I&#39;d like to mention an amazing thing happened to me :\r\nMy app is live on playstore since an year ago and it was working perfectly fine!\r\n\r\nAlmost a month ago, suddenly, the app has started this sluggish behavior without publishing any update on playstore\r\n\r\n**Fix :**\r\n - Resolved this issue by just making this boolean &quot;false&quot;\r\n\r\n       &lt;meta-data android:name=&quot;com.facebook.sdk.AutoInitEnabled&quot;\r\n                android:value=&quot;false&quot;/&gt;\r\n\r\n","title":"In Single Activity Architecture, If I start an activity multiple times from any of my fragment, my app is becoming slow","body":"<p>I've an activity in which I've almost 20 fragments. App is working perfectly fine but :</p>\n<ol>\n<li>When I opens any activity (either implicit or explicit) from a fragment and press back, my app is gradually becoming slow (UI is lagging mostly on scrolling).</li>\n</ol>\n<p>Sluggish behavior of the app increases on the basis of repeating the step 1 again &amp; again</p>\n<p>While doing RCA, I was thinking that this might be happening because of some specific heavy activity or fragment so, I've created a sample activity which I've tried opening from different fragments but the issue is still there and it is not related to a specific activity or fragment it is related to all over the app</p>\n<p>Need an expert opinion how to resolved this issue</p>\n<p>Tried multiple things :</p>\n<ul>\n<li>Removed unused resources</li>\n<li>Used coroutines for heavy tasks</li>\n<li>Network cache api</li>\n<li>Profiler is not showing anything wired\netc etc..</li>\n</ul>\n<p>Also, I'd like to mention an amazing thing happened to me :\nMy app is live on playstore since an year ago and it was working perfectly fine!</p>\n<p>Almost a month ago, suddenly, the app has started this sluggish behavior without publishing any update on playstore</p>\n<p><strong>Fix :</strong></p>\n<ul>\n<li><p>Resolved this issue by just making this boolean &quot;false&quot;</p>\n<pre><code>&lt;meta-data android:name=&quot;com.facebook.sdk.AutoInitEnabled&quot;\n         android:value=&quot;false&quot;/&gt;\n</code></pre>\n</li>\n</ul>\n"},{"tags":["java","authentication","jwt"],"answers":[{"tags":[],"owner":{"account_id":29683667,"reputation":1,"user_id":22749777,"display_name":"alip8"},"down_vote_count":6,"up_vote_count":0,"is_accepted":false,"score":-6,"last_activity_date":1697464577,"creation_date":1697461702,"answer_id":77302242,"question_id":77301662,"body_markdown":"You have two servers, if you want to keep the status of the Token consistent in the two servers, it is recommended to use middleware nosql to store the user&#39;s status in the database. It is recommended to use redis (fast response, kv structure is enough to deal with your situation), and store the login information in redis. Then add a layer of filter to redis when the user requests to obtain the status, if not, to generate the token stored in redis, if there is a direct release and parse the Token to get the user&#39;s information","title":"How to validate jwt token signature using certificate thumbprint in java?","body":"<p>You have two servers, if you want to keep the status of the Token consistent in the two servers, it is recommended to use middleware nosql to store the user's status in the database. It is recommended to use redis (fast response, kv structure is enough to deal with your situation), and store the login information in redis. Then add a layer of filter to redis when the user requests to obtain the status, if not, to generate the token stored in redis, if there is a direct release and parse the Token to get the user's information</p>\n"},{"tags":[],"owner":{"account_id":23584006,"reputation":3,"user_id":17622679,"display_name":"meg1311"},"down_vote_count":2,"up_vote_count":0,"is_accepted":true,"score":-2,"last_activity_date":1698042295,"creation_date":1697532571,"answer_id":77307455,"question_id":77301662,"body_markdown":"I found out that it&#39;s not possible to validate signature using thumbprint. The public key only can do the job. So instead of or in addition to sharing thumbprints the two servers (S1 and S2) will have to publish the public key as well which will be used for JWT token signature. ","title":"How to validate jwt token signature using certificate thumbprint in java?","body":"<p>I found out that it's not possible to validate signature using thumbprint. The public key only can do the job. So instead of or in addition to sharing thumbprints the two servers (S1 and S2) will have to publish the public key as well which will be used for JWT token signature.</p>\n"}],"owner":{"account_id":23584006,"reputation":3,"user_id":17622679,"display_name":"meg1311"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":144,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"closed_date":1698051627,"accepted_answer_id":77307455,"answer_count":2,"score":-2,"last_activity_date":1698042295,"creation_date":1697456503,"question_id":77301662,"body_markdown":"There is 1 client (C1) and 2 servers (S1 and S2). Both servers have their own self-signed certificates and have published their respective certificate thumbprint such that one can access the thumbprint of another. C1 interacts with S1 and gets a JWT token signed by S1&#39;s self-signed certificate. Now C1 interacts with S2 using the JWT token it received from S1. How does S2 validate the signature of the JWT token using the thumbprint of S1 in Java?","title":"How to validate jwt token signature using certificate thumbprint in java?","body":"<p>There is 1 client (C1) and 2 servers (S1 and S2). Both servers have their own self-signed certificates and have published their respective certificate thumbprint such that one can access the thumbprint of another. C1 interacts with S1 and gets a JWT token signed by S1's self-signed certificate. Now C1 interacts with S2 using the JWT token it received from S1. How does S2 validate the signature of the JWT token using the thumbprint of S1 in Java?</p>\n"},{"tags":["java","spring","spring-data-jpa","geometry","postgis"],"comments":[{"owner":{"account_id":16223139,"reputation":579,"user_id":11714234,"display_name":"DarkLeader"},"score":0,"creation_date":1685035898,"post_id":75638770,"comment_id":134608695,"body_markdown":"Can you please provide the full setup that solved your issue? i&#39;m facing simillar errors","body":"Can you please provide the full setup that solved your issue? i&#39;m facing simillar errors"}],"answers":[{"tags":[],"owner":{"account_id":18524434,"reputation":65,"user_id":13496635,"display_name":"Arjen10"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698042139,"creation_date":1678086241,"answer_id":75647932,"question_id":75638770,"body_markdown":"# JPA （SpringBoot 2.7）\r\n1. You can try this AttributeConverter interface implementation. Geometry in postgis storage format is WKB.\r\n\r\n2. add @Type(type = &quot;org.example.GeometryType&quot;) in pojo field\r\n\r\n3. There are also some methods that are not implemented \r\n\r\n```java\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.geotools.geometry.jts.WKBReader;\r\nimport org.hibernate.HibernateException;\r\nimport org.hibernate.engine.spi.SharedSessionContractImplementor;\r\nimport org.hibernate.usertype.UserType;\r\nimport org.locationtech.jts.geom.Geometry;\r\nimport org.locationtech.jts.io.ParseException;\r\nimport org.locationtech.jts.io.WKBWriter;\r\n\r\nimport java.io.ByteArrayInputStream;\r\nimport java.io.IOException;\r\nimport java.io.InputStream;\r\nimport java.io.Serializable;\r\nimport java.sql.PreparedStatement;\r\nimport java.sql.ResultSet;\r\nimport java.sql.SQLException;\r\nimport java.sql.Types;\r\nimport java.util.Objects;\r\nimport java.util.Optional;\r\n\r\n/**\r\n * @author Arjen10\r\n * @date 2023/5/29 下午7:48\r\n */\r\n@Slf4j\r\npublic class GeometryType implements UserType {\r\n\r\n    private static final int[] TYPES = new int[] {Types.BINARY};\r\n\r\n    @Override\r\n    public int[] sqlTypes() {\r\n        return TYPES;\r\n    }\r\n\r\n    @Override\r\n    public Class&lt;Geometry&gt; returnedClass() {\r\n        return Geometry.class;\r\n    }\r\n\r\n    @Override\r\n    public boolean equals(Object o, Object o1) throws HibernateException {\r\n        return Objects.equals(o, o1);\r\n    }\r\n\r\n    @Override\r\n    public int hashCode(Object o) throws HibernateException {\r\n        return Objects.hashCode(o);\r\n    }\r\n\r\n    @Override\r\n    public Object nullSafeGet(ResultSet rs, String[] strings, SharedSessionContractImplementor sc, Object o) throws HibernateException, SQLException {\r\n        if (rs.wasNull()) {\r\n            return null;\r\n        }\r\n        String wkbString = rs.getString(strings[0]);\r\n        byte[] bytes = WKBReader.hexToBytes(wkbString);\r\n        try {\r\n            return new WKBReader().read(bytes);\r\n        } catch (ParseException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void nullSafeSet(PreparedStatement ps, Object o, int i, SharedSessionContractImplementor sc) throws HibernateException, SQLException {\r\n        if (Objects.isNull(o)) {\r\n            ps.setNull(i, Types.BINARY);\r\n            return;\r\n        }\r\n        Geometry geometry = (Geometry) o;\r\n        byte[] write = new WKBWriter().write(geometry);\r\n        try (InputStream is = new ByteArrayInputStream(Optional.of(write).get())) {\r\n            ps.setBinaryStream(i, is);\r\n        } catch (IOException | NullPointerException e) {\r\n            throw new SQLException(e);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public Object deepCopy(Object o) throws HibernateException {\r\n        return null;\r\n    }\r\n\r\n    @Override\r\n    public boolean isMutable() {\r\n        return false;\r\n    }\r\n\r\n    @Override\r\n    public Serializable disassemble(Object o) throws HibernateException {\r\n        return null;\r\n    }\r\n\r\n    @Override\r\n    public Object assemble(Serializable serializable, Object o) throws HibernateException {\r\n        return null;\r\n    }\r\n\r\n    @Override\r\n    public Object replace(Object o, Object o1, Object o2) throws HibernateException {\r\n        return null;\r\n    }\r\n\r\n}\r\n```\r\n\r\n# myBatis\r\n\r\n```java\r\nimport com.baomidou.mybatisplus.core.toolkit.StringUtils;\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.apache.ibatis.type.BaseTypeHandler;\r\nimport org.apache.ibatis.type.JdbcType;\r\nimport org.geotools.geometry.jts.WKBReader;\r\nimport org.locationtech.jts.geom.Geometry;\r\nimport org.locationtech.jts.io.ParseException;\r\nimport org.locationtech.jts.io.WKBWriter;\r\n\r\nimport java.io.ByteArrayInputStream;\r\nimport java.io.IOException;\r\nimport java.io.InputStream;\r\nimport java.sql.CallableStatement;\r\nimport java.sql.PreparedStatement;\r\nimport java.sql.ResultSet;\r\nimport java.sql.SQLException;\r\nimport java.util.Optional;\r\nimport java.util.concurrent.locks.ReentrantLock;\r\n\r\n/**\r\n * @author Arjen10\r\n * @date 2022/8/30 11:30\r\n */\r\n@Slf4j\r\npublic class GeometryTypeHandler extends BaseTypeHandler&lt;Geometry&gt; {\r\n\r\n    private static final WKBWriter WKB_WRITER = new WKBWriter();\r\n\r\n    private static final WKBReader WKB_READER = new WKBReader();\r\n\r\n    private static final ReentrantLock WRITE_LOCK = new ReentrantLock();\r\n\r\n    private static final ReentrantLock READ_LOCK = new ReentrantLock();\r\n\r\n    @Override\r\n    public void setNonNullParameter(PreparedStatement ps, int i, Geometry geometry, JdbcType jdbcType)\r\n            throws SQLException {\r\n        byte[] write;\r\n        WRITE_LOCK.lock();\r\n        try {\r\n            //PostGIS 矢量数据存储方式为WKB\r\n            write = WKB_WRITER.write(geometry);\r\n        } catch (Exception e) {\r\n            throw new SQLException(e);\r\n        } finally {\r\n            WRITE_LOCK.unlock();\r\n        }\r\n        try (InputStream is = new ByteArrayInputStream(Optional.of(write).get())) {\r\n            ps.setBinaryStream(i, is);\r\n        } catch (IOException | NullPointerException e) {\r\n            throw new SQLException(e);\r\n        }\r\n\r\n    }\r\n\r\n    @Override\r\n    public Geometry getNullableResult(ResultSet rs, String s) throws SQLException {\r\n        return getGeometry(rs.getString(s));\r\n    }\r\n\r\n    @Override\r\n    public Geometry getNullableResult(ResultSet rs, int i) throws SQLException {\r\n        return getGeometry(rs.getString(i));\r\n    }\r\n\r\n    @Override\r\n    public Geometry getNullableResult(CallableStatement cs, int i) throws SQLException {\r\n        return getGeometry(cs.getString(i));\r\n    }\r\n\r\n    private static Geometry getGeometry(String wkbString) throws SQLException {\r\n        if (StringUtils.isEmpty(wkbString)) {\r\n            return null;\r\n        }\r\n        byte[] bytes = WKBReader.hexToBytes(wkbString);\r\n        READ_LOCK.lock();\r\n        try {\r\n            return WKB_READER.read(bytes);\r\n        } catch (ParseException e) {\r\n            throw new SQLException(e);\r\n        } finally {\r\n            READ_LOCK.unlock();\r\n        }\r\n    }\r\n\r\n}\r\n```","title":"How do i insert a Point / MultiPolygon in postgres ( using postgis ) with Spring data JPA?","body":"<h1>JPA （SpringBoot 2.7）</h1>\n<ol>\n<li><p>You can try this AttributeConverter interface implementation. Geometry in postgis storage format is WKB.</p>\n</li>\n<li><p>add @Type(type = &quot;org.example.GeometryType&quot;) in pojo field</p>\n</li>\n<li><p>There are also some methods that are not implemented</p>\n</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>import lombok.extern.slf4j.Slf4j;\nimport org.geotools.geometry.jts.WKBReader;\nimport org.hibernate.HibernateException;\nimport org.hibernate.engine.spi.SharedSessionContractImplementor;\nimport org.hibernate.usertype.UserType;\nimport org.locationtech.jts.geom.Geometry;\nimport org.locationtech.jts.io.ParseException;\nimport org.locationtech.jts.io.WKBWriter;\n\nimport java.io.ByteArrayInputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.Serializable;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport java.sql.Types;\nimport java.util.Objects;\nimport java.util.Optional;\n\n/**\n * @author Arjen10\n * @date 2023/5/29 下午7:48\n */\n@Slf4j\npublic class GeometryType implements UserType {\n\n    private static final int[] TYPES = new int[] {Types.BINARY};\n\n    @Override\n    public int[] sqlTypes() {\n        return TYPES;\n    }\n\n    @Override\n    public Class&lt;Geometry&gt; returnedClass() {\n        return Geometry.class;\n    }\n\n    @Override\n    public boolean equals(Object o, Object o1) throws HibernateException {\n        return Objects.equals(o, o1);\n    }\n\n    @Override\n    public int hashCode(Object o) throws HibernateException {\n        return Objects.hashCode(o);\n    }\n\n    @Override\n    public Object nullSafeGet(ResultSet rs, String[] strings, SharedSessionContractImplementor sc, Object o) throws HibernateException, SQLException {\n        if (rs.wasNull()) {\n            return null;\n        }\n        String wkbString = rs.getString(strings[0]);\n        byte[] bytes = WKBReader.hexToBytes(wkbString);\n        try {\n            return new WKBReader().read(bytes);\n        } catch (ParseException e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n    @Override\n    public void nullSafeSet(PreparedStatement ps, Object o, int i, SharedSessionContractImplementor sc) throws HibernateException, SQLException {\n        if (Objects.isNull(o)) {\n            ps.setNull(i, Types.BINARY);\n            return;\n        }\n        Geometry geometry = (Geometry) o;\n        byte[] write = new WKBWriter().write(geometry);\n        try (InputStream is = new ByteArrayInputStream(Optional.of(write).get())) {\n            ps.setBinaryStream(i, is);\n        } catch (IOException | NullPointerException e) {\n            throw new SQLException(e);\n        }\n    }\n\n    @Override\n    public Object deepCopy(Object o) throws HibernateException {\n        return null;\n    }\n\n    @Override\n    public boolean isMutable() {\n        return false;\n    }\n\n    @Override\n    public Serializable disassemble(Object o) throws HibernateException {\n        return null;\n    }\n\n    @Override\n    public Object assemble(Serializable serializable, Object o) throws HibernateException {\n        return null;\n    }\n\n    @Override\n    public Object replace(Object o, Object o1, Object o2) throws HibernateException {\n        return null;\n    }\n\n}\n</code></pre>\n<h1>myBatis</h1>\n<pre class=\"lang-java prettyprint-override\"><code>import com.baomidou.mybatisplus.core.toolkit.StringUtils;\nimport lombok.extern.slf4j.Slf4j;\nimport org.apache.ibatis.type.BaseTypeHandler;\nimport org.apache.ibatis.type.JdbcType;\nimport org.geotools.geometry.jts.WKBReader;\nimport org.locationtech.jts.geom.Geometry;\nimport org.locationtech.jts.io.ParseException;\nimport org.locationtech.jts.io.WKBWriter;\n\nimport java.io.ByteArrayInputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.sql.CallableStatement;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport java.util.Optional;\nimport java.util.concurrent.locks.ReentrantLock;\n\n/**\n * @author Arjen10\n * @date 2022/8/30 11:30\n */\n@Slf4j\npublic class GeometryTypeHandler extends BaseTypeHandler&lt;Geometry&gt; {\n\n    private static final WKBWriter WKB_WRITER = new WKBWriter();\n\n    private static final WKBReader WKB_READER = new WKBReader();\n\n    private static final ReentrantLock WRITE_LOCK = new ReentrantLock();\n\n    private static final ReentrantLock READ_LOCK = new ReentrantLock();\n\n    @Override\n    public void setNonNullParameter(PreparedStatement ps, int i, Geometry geometry, JdbcType jdbcType)\n            throws SQLException {\n        byte[] write;\n        WRITE_LOCK.lock();\n        try {\n            //PostGIS 矢量数据存储方式为WKB\n            write = WKB_WRITER.write(geometry);\n        } catch (Exception e) {\n            throw new SQLException(e);\n        } finally {\n            WRITE_LOCK.unlock();\n        }\n        try (InputStream is = new ByteArrayInputStream(Optional.of(write).get())) {\n            ps.setBinaryStream(i, is);\n        } catch (IOException | NullPointerException e) {\n            throw new SQLException(e);\n        }\n\n    }\n\n    @Override\n    public Geometry getNullableResult(ResultSet rs, String s) throws SQLException {\n        return getGeometry(rs.getString(s));\n    }\n\n    @Override\n    public Geometry getNullableResult(ResultSet rs, int i) throws SQLException {\n        return getGeometry(rs.getString(i));\n    }\n\n    @Override\n    public Geometry getNullableResult(CallableStatement cs, int i) throws SQLException {\n        return getGeometry(cs.getString(i));\n    }\n\n    private static Geometry getGeometry(String wkbString) throws SQLException {\n        if (StringUtils.isEmpty(wkbString)) {\n            return null;\n        }\n        byte[] bytes = WKBReader.hexToBytes(wkbString);\n        READ_LOCK.lock();\n        try {\n            return WKB_READER.read(bytes);\n        } catch (ParseException e) {\n            throw new SQLException(e);\n        } finally {\n            READ_LOCK.unlock();\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16223139,"reputation":579,"user_id":11714234,"display_name":"DarkLeader"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1692121379,"creation_date":1685466887,"answer_id":76367151,"question_id":75638770,"body_markdown":"This solution is based on Arjen&#39;s solution with some changes for it to work with Spring boot 3.\r\n\r\nfile GeometryType :\r\n\r\n    import lombok.extern.slf4j.Slf4j;\r\n    import org.hibernate.HibernateException;\r\n    import org.hibernate.engine.spi.SharedSessionContractImplementor;\r\n    import org.hibernate.usertype.UserType;\r\n    import org.locationtech.jts.geom.Geometry;\r\n    import org.locationtech.jts.io.WKBReader;\r\n    import org.locationtech.jts.io.WKBWriter;\r\n\r\n    import java.io.*;\r\n    import java.sql.PreparedStatement;\r\n    import java.sql.ResultSet;\r\n    import java.sql.SQLException;\r\n    import java.sql.Types;\r\n    import java.util.Objects;\r\n\r\n    @Slf4j\r\n    public class GeometryType implements UserType&lt;Geometry&gt; {\r\n\r\n        @Override\r\n        public int getSqlType() {\r\n            return Types.BINARY;\r\n        }\r\n\r\n        @Override\r\n        public Class&lt;Geometry&gt; returnedClass() {\r\n            return Geometry.class;\r\n        }\r\n\r\n        @Override\r\n        public boolean equals(Geometry o,Geometry o1) throws HibernateException {\r\n            return Objects.equals(o, o1);\r\n        }\r\n\r\n        @Override\r\n        public int hashCode(Geometry o) throws HibernateException {\r\n            return Objects.hashCode(o);\r\n        }\r\n\r\n        @Override\r\n        public Geometry nullSafeGet(ResultSet rs, int position, SharedSessionContractImplementor session, Object owner) throws SQLException   {\r\n            if (rs.wasNull()) {\r\n                return null;\r\n            }\r\n            try {\r\n                String string = rs.getString(position);\r\n                if (string == null) {\r\n                    return null;\r\n                }\r\n                final byte[] bytes = WKBReader.hexToBytes(string);\r\n                return new WKBReader().read(bytes);\r\n            } catch (Exception e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        }\r\n\r\n        @Override\r\n        public void nullSafeSet(PreparedStatement ps, Geometry geometry, int i, SharedSessionContractImplementor sc) throws HibernateException, SQLException {\r\n            if (Objects.isNull(geometry)) {\r\n                ps.setNull(i, Types.BINARY);\r\n                return;\r\n            }\r\n            byte[] write = new WKBWriter().write(geometry);\r\n            try (InputStream is = new ByteArrayInputStream(write)) {\r\n                ps.setBinaryStream(i, is);\r\n            } catch (IOException | NullPointerException e) {\r\n                throw new SQLException(e);\r\n            }\r\n        }\r\n\r\n        @Override\r\n        public Geometry deepCopy(Geometry geometry) throws HibernateException {\r\n            if (Objects.isNull(geometry)) {\r\n                return null;\r\n            }\r\n            return geometry.copy();\r\n        }\r\n\r\n        @Override\r\n        public boolean isMutable() {\r\n            return false;\r\n        }\r\n\r\n        @Override\r\n        public Serializable disassemble(Geometry o) throws HibernateException {\r\n            return o;\r\n        }\r\n\r\n        @Override\r\n        public Geometry assemble(Serializable serializable, Object o) throws HibernateException {\r\n            return deepCopy((Geometry) serializable);\r\n        }\r\n\r\n        @Override\r\n        public Geometry replace(Geometry original, Geometry o1, Object o2) throws HibernateException {\r\n            return deepCopy(original);\r\n        }\r\n\r\n    }\r\n\r\n\r\nnow inside the entity use: @Type(GeometryType.class) for the geometry field.\r\n\r\n\r\nI&#39;m not sure if the implementation of all the functions is correct (meaning I / you might encounter an error along the line) but I managed to save an entity that has a locationtech.jts.jeom.Geometry field to postgres and managed to pull the entity back from the database.","title":"How do i insert a Point / MultiPolygon in postgres ( using postgis ) with Spring data JPA?","body":"<p>This solution is based on Arjen's solution with some changes for it to work with Spring boot 3.</p>\n<p>file GeometryType :</p>\n<pre><code>import lombok.extern.slf4j.Slf4j;\nimport org.hibernate.HibernateException;\nimport org.hibernate.engine.spi.SharedSessionContractImplementor;\nimport org.hibernate.usertype.UserType;\nimport org.locationtech.jts.geom.Geometry;\nimport org.locationtech.jts.io.WKBReader;\nimport org.locationtech.jts.io.WKBWriter;\n\nimport java.io.*;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport java.sql.Types;\nimport java.util.Objects;\n\n@Slf4j\npublic class GeometryType implements UserType&lt;Geometry&gt; {\n\n    @Override\n    public int getSqlType() {\n        return Types.BINARY;\n    }\n\n    @Override\n    public Class&lt;Geometry&gt; returnedClass() {\n        return Geometry.class;\n    }\n\n    @Override\n    public boolean equals(Geometry o,Geometry o1) throws HibernateException {\n        return Objects.equals(o, o1);\n    }\n\n    @Override\n    public int hashCode(Geometry o) throws HibernateException {\n        return Objects.hashCode(o);\n    }\n\n    @Override\n    public Geometry nullSafeGet(ResultSet rs, int position, SharedSessionContractImplementor session, Object owner) throws SQLException   {\n        if (rs.wasNull()) {\n            return null;\n        }\n        try {\n            String string = rs.getString(position);\n            if (string == null) {\n                return null;\n            }\n            final byte[] bytes = WKBReader.hexToBytes(string);\n            return new WKBReader().read(bytes);\n        } catch (Exception e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n    @Override\n    public void nullSafeSet(PreparedStatement ps, Geometry geometry, int i, SharedSessionContractImplementor sc) throws HibernateException, SQLException {\n        if (Objects.isNull(geometry)) {\n            ps.setNull(i, Types.BINARY);\n            return;\n        }\n        byte[] write = new WKBWriter().write(geometry);\n        try (InputStream is = new ByteArrayInputStream(write)) {\n            ps.setBinaryStream(i, is);\n        } catch (IOException | NullPointerException e) {\n            throw new SQLException(e);\n        }\n    }\n\n    @Override\n    public Geometry deepCopy(Geometry geometry) throws HibernateException {\n        if (Objects.isNull(geometry)) {\n            return null;\n        }\n        return geometry.copy();\n    }\n\n    @Override\n    public boolean isMutable() {\n        return false;\n    }\n\n    @Override\n    public Serializable disassemble(Geometry o) throws HibernateException {\n        return o;\n    }\n\n    @Override\n    public Geometry assemble(Serializable serializable, Object o) throws HibernateException {\n        return deepCopy((Geometry) serializable);\n    }\n\n    @Override\n    public Geometry replace(Geometry original, Geometry o1, Object o2) throws HibernateException {\n        return deepCopy(original);\n    }\n\n}\n</code></pre>\n<p>now inside the entity use: @Type(GeometryType.class) for the geometry field.</p>\n<p>I'm not sure if the implementation of all the functions is correct (meaning I / you might encounter an error along the line) but I managed to save an entity that has a locationtech.jts.jeom.Geometry field to postgres and managed to pull the entity back from the database.</p>\n"}],"owner":{"account_id":27936475,"reputation":21,"user_id":21333381,"display_name":"Pedro Augusto Almeida Duarte"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2181,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76367151,"answer_count":2,"score":1,"last_activity_date":1698042139,"creation_date":1677965282,"question_id":75638770,"body_markdown":"I created a map using leaflet and i&#39;m trying to send point / multipolygon drawns to my postgres database using spring data JPA. The server initially receives a string geoJSON ( converted to org.locationtech.jts.geom.MultiPolygon and org.locationtech.jts.geom.Point by the follow deserialize methods ).\r\nObs: I took care that the geojson string is always valid\r\n\r\n```\r\nimport com.fasterxml.jackson.core.JsonParser;\r\nimport com.fasterxml.jackson.databind.DeserializationContext;\r\nimport com.fasterxml.jackson.databind.JsonDeserializer;\r\nimport org.locationtech.jts.geom.MultiPolygon;\r\nimport java.io.IOException;\r\nimport org.locationtech.jts.io.ParseException;\r\nimport org.locationtech.jts.io.geojson.GeoJsonReader;\r\n\r\npublic class MultiPolygonDeserializer extends JsonDeserializer&lt;MultiPolygon&gt; {\r\n\r\n    @Override\r\n    public MultiPolygon deserialize(JsonParser parser, DeserializationContext context) throws IOException {\r\n        String geoJson = parser.getValueAsString();\r\n        GeoJsonReader reader = new GeoJsonReader();\r\n        try {\r\n            return (MultiPolygon) reader.read(geoJson);\r\n        } catch (ParseException e) {\r\n            throw new IOException(e);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n\r\n```\r\nimport com.fasterxml.jackson.core.JsonParser;\r\nimport com.fasterxml.jackson.databind.DeserializationContext;\r\nimport com.fasterxml.jackson.databind.JsonDeserializer;\r\nimport org.locationtech.jts.geom.Point;\r\nimport java.io.IOException;\r\nimport org.locationtech.jts.io.ParseException;\r\nimport org.locationtech.jts.io.geojson.GeoJsonReader;\r\n\r\npublic class PointDeserializer extends JsonDeserializer&lt;Point&gt; {\r\n\r\n    @Override\r\n    public Point deserialize(JsonParser parser, DeserializationContext context) throws IOException {\r\n        String geoJson = parser.getValueAsString();\r\n        GeoJsonReader reader = new GeoJsonReader();\r\n        try {\r\n            return (Point) reader.read(geoJson);\r\n        } catch (ParseException e) {\r\n            throw new IOException(e);\r\n        }\r\n    }\r\n}\r\n```\r\nThey apparently work fine, returning, for example:\r\nMULTIPOLYGON (((-42.538033 -19.461896, -42.542667 -19.489894, -42.487564 -19.478404, -42.538033 -19.461896))) \r\nand \r\nPOINT (-42.5270802 -19.4777807)\r\n\r\n\r\nAnd this is my model:\r\n\r\n\r\n```\r\nimport com.fasterxml.jackson.databind.annotation.JsonDeserialize;\r\nimport com.pedro.geoPartners.util.MultiPolygonDeserializer;\r\nimport com.pedro.geoPartners.util.PointDeserializer;\r\nimport jakarta.persistence.Column;\r\nimport jakarta.persistence.Entity;\r\nimport jakarta.persistence.GeneratedValue;\r\nimport jakarta.persistence.GenerationType;\r\nimport jakarta.persistence.Id;\r\nimport java.util.UUID;\r\nimport org.locationtech.jts.geom.MultiPolygon;\r\nimport org.locationtech.jts.geom.Point;\r\n\r\n\r\n/**\r\n *\r\n * @author pedro\r\n */\r\n@Entity\r\npublic class Partner {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.UUID)\r\n    private UUID id;\r\n\r\n    private String tradingName;\r\n    private String ownerName;\r\n    private String document;\r\n\r\n    @Column(columnDefinition = &quot;geometry(Point,4326)&quot;)\r\n    @JsonDeserialize(using = PointDeserializer.class)\r\n    private Point address;\r\n\r\n    @Column(columnDefinition = &quot;geometry(MultiPolygon,4326)&quot;)\r\n    @JsonDeserialize(using = MultiPolygonDeserializer.class)\r\n    private MultiPolygon coverageArea;\r\n\r\n    public UUID getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(UUID id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getTradingName() {\r\n        return tradingName;\r\n    }\r\n\r\n    public void setTradingName(String tradingName) {\r\n        this.tradingName = tradingName;\r\n    }\r\n\r\n    public String getOwnerName() {\r\n        return ownerName;\r\n    }\r\n\r\n    public void setOwnerName(String ownerName) {\r\n        this.ownerName = ownerName;\r\n    }\r\n\r\n    public String getDocument() {\r\n        return document;\r\n    }\r\n\r\n    public void setDocument(String document) {\r\n        this.document = document;\r\n    }\r\n\r\n    public Point getAddress() {\r\n        return address;\r\n    }\r\n\r\n    public void setAddress(Point address) {\r\n        this.address = address;\r\n    }\r\n\r\n    public MultiPolygon getCoverageArea() {\r\n        return coverageArea;\r\n    }\r\n\r\n    public void setCoverageArea(MultiPolygon coverageArea) {\r\n        this.coverageArea = coverageArea;\r\n    }\r\n```\r\n\r\nHowever, when i try to save a Partner in db, i receive: \r\n\r\n\r\n```\r\n2023-03-04T17:51:39.152-03:00  WARN 116266 --- [nio-8080-exec-1] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 0, SQLState: XX000\r\n2023-03-04T17:51:39.152-03:00 ERROR 116266 --- [nio-8080-exec-1] o.h.engine.jdbc.spi.SqlExceptionHelper   : ERROR: Invalid endian flag value encountered.\r\n2023-03-04T17:51:39.152-03:00  INFO 116266 --- [nio-8080-exec-1] o.h.e.j.b.internal.AbstractBatchImpl     : HHH000010: On release of batch it still contained JDBC statements\r\n2023-03-04T17:51:39.157-03:00 ERROR 116266 --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.orm.jpa.JpaSystemException: could not execute statement] with root cause\r\n\r\norg.postgresql.util.PSQLException: ERROR: Invalid endian flag value encountered.\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2676) ~[postgresql-42.5.4.jar:42.5.4]\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2366) ~[postgresql-42.5.4.jar:42.5.4]\r\n\tat org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:356) ~[postgresql-42.5.4.jar:42.5.4]\r\n\tat org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:496) ~[postgresql-42.5.4.jar:42.5.4]...\r\n```\r\n\r\n* I tried numerous implementantios of &quot;JPA Attribute Converters&quot; and always same error. Moreover, i read somewhere ( not sure )  that  MultiPolygon and Point locationtech can be directly inserted in @Column(columnDefinition = &quot;geometry(MultiPolygon,4326)&quot;) and  @Column(columnDefinition = &quot;geometry(Point,4326)&quot;).\r\n\r\n*Also read about hibernate @Type... but apparently doens&#39;t works ( deprecated?) in hibernate spatial version 5.4.32\r\n\r\n*Only for have sure, i tried to set coverageArea and address null before try to save in db, and it saves correctly.\r\n\r\nMy application properties: \r\n\r\n```\r\nspring.jpa.database=POSTGRESQL\r\nspring.datasource.url=jdbc:postgresql://localhost:5432/GeoPartners?useTimeZone=true&amp;serverTimezone=UTC&amp;autoReconnect=true&amp;useSSL=false\r\nspring.datasource.username=postgres\r\nspring.datasource.password=:)\r\nspring.datasource.testWhileIdle=true\r\nspring.datasource.validationQuery=SELECT 1\r\nspring.jpa.show-sql=true\r\nspring.jpa.hibernate.ddl-auto=update\r\nspring.jpa.hibernate.naming-strategy=org.hibernate.cfg.ImprovedNamingStrategy\r\nspring.sql.init.mode=ALWAYS\r\nspring.jpa.defer-datasource-initialization=true\r\nhibernate.dialect=org.hibernate.spatial.dialect.postgis.PostgisDialect\r\n```\r\n\r\nMy pom.xml:\r\n\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;3.0.3&lt;/version&gt;\r\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    &lt;/parent&gt;\r\n    &lt;groupId&gt;com.pedro&lt;/groupId&gt;\r\n    &lt;artifactId&gt;geoPartners&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    &lt;packaging&gt;war&lt;/packaging&gt;\r\n    &lt;name&gt;geoPartners&lt;/name&gt;\r\n    &lt;description&gt;update of &amp;quot;JavaWebProject&amp;quot;, implementing new features and Front-end&lt;/description&gt;\r\n    &lt;properties&gt;\r\n        &lt;java.version&gt;17&lt;/java.version&gt;\r\n    &lt;/properties&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n            &lt;optional&gt;true&lt;/optional&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-spatial&lt;/artifactId&gt;\r\n            &lt;version&gt;5.4.32.Final&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.locationtech.jts.io&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jts-io-common&lt;/artifactId&gt;\r\n            &lt;version&gt;1.19.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.postgis&lt;/groupId&gt;\r\n            &lt;artifactId&gt;postgis-jdbc&lt;/artifactId&gt;\r\n            &lt;version&gt;1.3.3&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;repositories&gt;\r\n        &lt;repository&gt;\r\n            &lt;id&gt;osgeo-alt&lt;/id&gt;\r\n            &lt;url&gt;https://repo.osgeo.org/repository/release/&lt;/url&gt;\r\n        &lt;/repository&gt;\r\n        &lt;repository&gt;\r\n            &lt;id&gt;geomajas&lt;/id&gt;\r\n            &lt;name&gt;Geomajas Maven Repository&lt;/name&gt;\r\n            &lt;url&gt;http://maven.geomajas.org/(http://maven.geomajas.org/)&lt;/url&gt;\r\n        &lt;/repository&gt;\r\n    &lt;/repositories&gt;\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\nIts my first question here, sorry if i made a mistake or forget something. Thank You\r\n\r\n\r\nTried to save a &quot;Partner&quot; ( model )  in a postgres db with JpaRepository &quot;save&quot;. Expected to save all attributes but always receive same error (org.postgresql.util.PSQLException: ERROR: Invalid endian flag value encountered.) when i try to save a MultiPolygon or/and Point.","title":"How do i insert a Point / MultiPolygon in postgres ( using postgis ) with Spring data JPA?","body":"<p>I created a map using leaflet and i'm trying to send point / multipolygon drawns to my postgres database using spring data JPA. The server initially receives a string geoJSON ( converted to org.locationtech.jts.geom.MultiPolygon and org.locationtech.jts.geom.Point by the follow deserialize methods ).\nObs: I took care that the geojson string is always valid</p>\n<pre><code>import com.fasterxml.jackson.core.JsonParser;\nimport com.fasterxml.jackson.databind.DeserializationContext;\nimport com.fasterxml.jackson.databind.JsonDeserializer;\nimport org.locationtech.jts.geom.MultiPolygon;\nimport java.io.IOException;\nimport org.locationtech.jts.io.ParseException;\nimport org.locationtech.jts.io.geojson.GeoJsonReader;\n\npublic class MultiPolygonDeserializer extends JsonDeserializer&lt;MultiPolygon&gt; {\n\n    @Override\n    public MultiPolygon deserialize(JsonParser parser, DeserializationContext context) throws IOException {\n        String geoJson = parser.getValueAsString();\n        GeoJsonReader reader = new GeoJsonReader();\n        try {\n            return (MultiPolygon) reader.read(geoJson);\n        } catch (ParseException e) {\n            throw new IOException(e);\n        }\n    }\n}\n</code></pre>\n<pre><code>import com.fasterxml.jackson.core.JsonParser;\nimport com.fasterxml.jackson.databind.DeserializationContext;\nimport com.fasterxml.jackson.databind.JsonDeserializer;\nimport org.locationtech.jts.geom.Point;\nimport java.io.IOException;\nimport org.locationtech.jts.io.ParseException;\nimport org.locationtech.jts.io.geojson.GeoJsonReader;\n\npublic class PointDeserializer extends JsonDeserializer&lt;Point&gt; {\n\n    @Override\n    public Point deserialize(JsonParser parser, DeserializationContext context) throws IOException {\n        String geoJson = parser.getValueAsString();\n        GeoJsonReader reader = new GeoJsonReader();\n        try {\n            return (Point) reader.read(geoJson);\n        } catch (ParseException e) {\n            throw new IOException(e);\n        }\n    }\n}\n</code></pre>\n<p>They apparently work fine, returning, for example:\nMULTIPOLYGON (((-42.538033 -19.461896, -42.542667 -19.489894, -42.487564 -19.478404, -42.538033 -19.461896)))\nand\nPOINT (-42.5270802 -19.4777807)</p>\n<p>And this is my model:</p>\n<pre><code>import com.fasterxml.jackson.databind.annotation.JsonDeserialize;\nimport com.pedro.geoPartners.util.MultiPolygonDeserializer;\nimport com.pedro.geoPartners.util.PointDeserializer;\nimport jakarta.persistence.Column;\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.GenerationType;\nimport jakarta.persistence.Id;\nimport java.util.UUID;\nimport org.locationtech.jts.geom.MultiPolygon;\nimport org.locationtech.jts.geom.Point;\n\n\n/**\n *\n * @author pedro\n */\n@Entity\npublic class Partner {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.UUID)\n    private UUID id;\n\n    private String tradingName;\n    private String ownerName;\n    private String document;\n\n    @Column(columnDefinition = &quot;geometry(Point,4326)&quot;)\n    @JsonDeserialize(using = PointDeserializer.class)\n    private Point address;\n\n    @Column(columnDefinition = &quot;geometry(MultiPolygon,4326)&quot;)\n    @JsonDeserialize(using = MultiPolygonDeserializer.class)\n    private MultiPolygon coverageArea;\n\n    public UUID getId() {\n        return id;\n    }\n\n    public void setId(UUID id) {\n        this.id = id;\n    }\n\n    public String getTradingName() {\n        return tradingName;\n    }\n\n    public void setTradingName(String tradingName) {\n        this.tradingName = tradingName;\n    }\n\n    public String getOwnerName() {\n        return ownerName;\n    }\n\n    public void setOwnerName(String ownerName) {\n        this.ownerName = ownerName;\n    }\n\n    public String getDocument() {\n        return document;\n    }\n\n    public void setDocument(String document) {\n        this.document = document;\n    }\n\n    public Point getAddress() {\n        return address;\n    }\n\n    public void setAddress(Point address) {\n        this.address = address;\n    }\n\n    public MultiPolygon getCoverageArea() {\n        return coverageArea;\n    }\n\n    public void setCoverageArea(MultiPolygon coverageArea) {\n        this.coverageArea = coverageArea;\n    }\n</code></pre>\n<p>However, when i try to save a Partner in db, i receive:</p>\n<pre><code>2023-03-04T17:51:39.152-03:00  WARN 116266 --- [nio-8080-exec-1] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 0, SQLState: XX000\n2023-03-04T17:51:39.152-03:00 ERROR 116266 --- [nio-8080-exec-1] o.h.engine.jdbc.spi.SqlExceptionHelper   : ERROR: Invalid endian flag value encountered.\n2023-03-04T17:51:39.152-03:00  INFO 116266 --- [nio-8080-exec-1] o.h.e.j.b.internal.AbstractBatchImpl     : HHH000010: On release of batch it still contained JDBC statements\n2023-03-04T17:51:39.157-03:00 ERROR 116266 --- [nio-8080-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.orm.jpa.JpaSystemException: could not execute statement] with root cause\n\norg.postgresql.util.PSQLException: ERROR: Invalid endian flag value encountered.\n    at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2676) ~[postgresql-42.5.4.jar:42.5.4]\n    at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2366) ~[postgresql-42.5.4.jar:42.5.4]\n    at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:356) ~[postgresql-42.5.4.jar:42.5.4]\n    at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:496) ~[postgresql-42.5.4.jar:42.5.4]...\n</code></pre>\n<ul>\n<li>I tried numerous implementantios of &quot;JPA Attribute Converters&quot; and always same error. Moreover, i read somewhere ( not sure )  that  MultiPolygon and Point locationtech can be directly inserted in @Column(columnDefinition = &quot;geometry(MultiPolygon,4326)&quot;) and  @Column(columnDefinition = &quot;geometry(Point,4326)&quot;).</li>\n</ul>\n<p>*Also read about hibernate @Type... but apparently doens't works ( deprecated?) in hibernate spatial version 5.4.32</p>\n<p>*Only for have sure, i tried to set coverageArea and address null before try to save in db, and it saves correctly.</p>\n<p>My application properties:</p>\n<pre><code>spring.jpa.database=POSTGRESQL\nspring.datasource.url=jdbc:postgresql://localhost:5432/GeoPartners?useTimeZone=true&amp;serverTimezone=UTC&amp;autoReconnect=true&amp;useSSL=false\nspring.datasource.username=postgres\nspring.datasource.password=:)\nspring.datasource.testWhileIdle=true\nspring.datasource.validationQuery=SELECT 1\nspring.jpa.show-sql=true\nspring.jpa.hibernate.ddl-auto=update\nspring.jpa.hibernate.naming-strategy=org.hibernate.cfg.ImprovedNamingStrategy\nspring.sql.init.mode=ALWAYS\nspring.jpa.defer-datasource-initialization=true\nhibernate.dialect=org.hibernate.spatial.dialect.postgis.PostgisDialect\n</code></pre>\n<p>My pom.xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.3&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.pedro&lt;/groupId&gt;\n    &lt;artifactId&gt;geoPartners&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;name&gt;geoPartners&lt;/name&gt;\n    &lt;description&gt;update of &amp;quot;JavaWebProject&amp;quot;, implementing new features and Front-end&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-spatial&lt;/artifactId&gt;\n            &lt;version&gt;5.4.32.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.locationtech.jts.io&lt;/groupId&gt;\n            &lt;artifactId&gt;jts-io-common&lt;/artifactId&gt;\n            &lt;version&gt;1.19.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgis&lt;/groupId&gt;\n            &lt;artifactId&gt;postgis-jdbc&lt;/artifactId&gt;\n            &lt;version&gt;1.3.3&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;id&gt;osgeo-alt&lt;/id&gt;\n            &lt;url&gt;https://repo.osgeo.org/repository/release/&lt;/url&gt;\n        &lt;/repository&gt;\n        &lt;repository&gt;\n            &lt;id&gt;geomajas&lt;/id&gt;\n            &lt;name&gt;Geomajas Maven Repository&lt;/name&gt;\n            &lt;url&gt;http://maven.geomajas.org/(http://maven.geomajas.org/)&lt;/url&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>Its my first question here, sorry if i made a mistake or forget something. Thank You</p>\n<p>Tried to save a &quot;Partner&quot; ( model )  in a postgres db with JpaRepository &quot;save&quot;. Expected to save all attributes but always receive same error (org.postgresql.util.PSQLException: ERROR: Invalid endian flag value encountered.) when i try to save a MultiPolygon or/and Point.</p>\n"},{"tags":["java","php","android-studio"],"comments":[{"owner":{"account_id":1129881,"reputation":11552,"user_id":1116230,"display_name":"Nico Haase"},"score":0,"creation_date":1698043411,"post_id":77342987,"comment_id":136350206,"body_markdown":"What is a &quot;gagal&quot; response? How is this problem related to PHP or Android Studio?","body":"What is a &quot;gagal&quot; response? How is this problem related to PHP or Android Studio?"},{"owner":{"account_id":29360244,"reputation":1,"user_id":22495119,"display_name":"Ahmad Fauzan"},"score":0,"creation_date":1698043880,"post_id":77342987,"comment_id":136350281,"body_markdown":"I added a toast to the else logic section by displaying the words &quot;gagal&quot; which means failure in English and the &quot;gagal&quot; toast section is what appears when I try to post data","body":"I added a toast to the else logic section by displaying the words &quot;gagal&quot; which means failure in English and the &quot;gagal&quot; toast section is what appears when I try to post data"},{"owner":{"account_id":1129881,"reputation":11552,"user_id":1116230,"display_name":"Nico Haase"},"score":0,"creation_date":1698045650,"post_id":77342987,"comment_id":136350544,"body_markdown":"Please add all clarification to your question by editing it, along with your attempts to resolve the problem","body":"Please add all clarification to your question by editing it, along with your attempts to resolve the problem"}],"owner":{"account_id":29360244,"reputation":1,"user_id":22495119,"display_name":"Ahmad Fauzan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698041974,"creation_date":1698041974,"question_id":77342987,"body_markdown":"I want to connect my project calling the database connector with retrofit, but I always get a &quot;gagal&quot; response in the else(fail) section, can anyone correct the code I made? \r\nNote : In the PHP section, when I tested using Postman, the data was able to be posted.\r\n\r\n\r\npublic class incomingItemActivity extends AppCompatActivity {\r\n    String item,quantity;\r\n\r\n    TextInputEditText etNama;\r\n    TextInputEditText etQuantity;\r\n    TextInputEditText etTanggal;\r\n    Button button;\r\n    private ResponseItemDatang respon;\r\n\r\n    private ModelItemDatang dataItem;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_incoming_item);\r\n        getSupportActionBar().setTitle(&quot;FORM BARANG&quot;);\r\n\r\n        //etNama\r\n        etNama = findViewById(R.id.NamaItemET);\r\n        //etQuantity\r\n        etQuantity = findViewById(R.id.QuantityItemET);\r\n\r\n        //button + panggilAPI\r\n        button = findViewById(R.id.simpan);\r\n        button.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                setAPI();\r\n            }\r\n        });\r\n        //DatePicker\r\n        etTanggal = findViewById(R.id.Date);\r\n        Calendar calendar = Calendar.getInstance();\r\n        int year = calendar.get(Calendar.YEAR);\r\n        int month = calendar.get(Calendar.MONTH);\r\n        int day = calendar.get(Calendar.DAY_OF_MONTH);\r\n\r\n        etTanggal.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                DatePickerDialog dialog = new DatePickerDialog(incomingItemActivity.this, new DatePickerDialog.OnDateSetListener() {\r\n                    @Override\r\n                    public void onDateSet(DatePicker view, int year, int month, int dayOfMonth) {\r\n                        month = month + 1;\r\n                        String date = dayOfMonth + &quot;/&quot; + month + &quot;/&quot; + year;\r\n                        etTanggal.setText(date);\r\n                    }\r\n                }, year, month, day);\r\n                dialog.show();\r\n            }\r\n        });\r\n    }\r\n\r\n    private void setAPI() {\r\n        APInterface apInterface = APIclient.getAPIclient().create(APInterface.class);\r\n        Call&lt;ResponseItemDatang&gt; call  = apInterface.tambahItem(item,quantity);\r\n        call.enqueue(new Callback&lt;ResponseItemDatang&gt;() {\r\n            @Override\r\n            public void onResponse(Call&lt;ResponseItemDatang&gt; call, Response&lt;ResponseItemDatang&gt; response) {\r\n                if (response.isSuccessful()){\r\n                    ResponseItemDatang itemDatang = response.body();\r\n                    etNama.setText(itemDatang.getItem());\r\n                    etQuantity.setText(itemDatang.getQuantity());\r\n\r\n                    Intent intent = new Intent(incomingItemActivity.this, MainActivity.class);\r\n                    startActivity(intent);\r\n                    SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;yyyy-dd-mm hh:mm:ss&quot;);\r\n                    try {\r\n                        Date Time = dateFormat.parse(respon.getTanggal());\r\n                        etTanggal.setText(dataItem.getDate().substring(11, 16) + &quot;|&quot; + dateFormat.format(Time));\r\n                    } catch (ParseException e) {\r\n                        throw new RuntimeException(e);\r\n                    }\r\n                }else {\r\n                    Toast.makeText(incomingItemActivity.this, &quot;gagal&quot;, Toast.LENGTH_SHORT).show();\r\n                }\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onFailure(Call&lt;ResponseItemDatang&gt; call, Throwable t) {\r\n\r\n            }\r\n        });\r\n    }\r\n}","title":"Call retrofit api for post data","body":"<p>I want to connect my project calling the database connector with retrofit, but I always get a &quot;gagal&quot; response in the else(fail) section, can anyone correct the code I made?\nNote : In the PHP section, when I tested using Postman, the data was able to be posted.</p>\n<p>public class incomingItemActivity extends AppCompatActivity {\nString item,quantity;</p>\n<pre><code>TextInputEditText etNama;\nTextInputEditText etQuantity;\nTextInputEditText etTanggal;\nButton button;\nprivate ResponseItemDatang respon;\n\nprivate ModelItemDatang dataItem;\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_incoming_item);\n    getSupportActionBar().setTitle(&quot;FORM BARANG&quot;);\n\n    //etNama\n    etNama = findViewById(R.id.NamaItemET);\n    //etQuantity\n    etQuantity = findViewById(R.id.QuantityItemET);\n\n    //button + panggilAPI\n    button = findViewById(R.id.simpan);\n    button.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n            setAPI();\n        }\n    });\n    //DatePicker\n    etTanggal = findViewById(R.id.Date);\n    Calendar calendar = Calendar.getInstance();\n    int year = calendar.get(Calendar.YEAR);\n    int month = calendar.get(Calendar.MONTH);\n    int day = calendar.get(Calendar.DAY_OF_MONTH);\n\n    etTanggal.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n            DatePickerDialog dialog = new DatePickerDialog(incomingItemActivity.this, new DatePickerDialog.OnDateSetListener() {\n                @Override\n                public void onDateSet(DatePicker view, int year, int month, int dayOfMonth) {\n                    month = month + 1;\n                    String date = dayOfMonth + &quot;/&quot; + month + &quot;/&quot; + year;\n                    etTanggal.setText(date);\n                }\n            }, year, month, day);\n            dialog.show();\n        }\n    });\n}\n\nprivate void setAPI() {\n    APInterface apInterface = APIclient.getAPIclient().create(APInterface.class);\n    Call&lt;ResponseItemDatang&gt; call  = apInterface.tambahItem(item,quantity);\n    call.enqueue(new Callback&lt;ResponseItemDatang&gt;() {\n        @Override\n        public void onResponse(Call&lt;ResponseItemDatang&gt; call, Response&lt;ResponseItemDatang&gt; response) {\n            if (response.isSuccessful()){\n                ResponseItemDatang itemDatang = response.body();\n                etNama.setText(itemDatang.getItem());\n                etQuantity.setText(itemDatang.getQuantity());\n\n                Intent intent = new Intent(incomingItemActivity.this, MainActivity.class);\n                startActivity(intent);\n                SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;yyyy-dd-mm hh:mm:ss&quot;);\n                try {\n                    Date Time = dateFormat.parse(respon.getTanggal());\n                    etTanggal.setText(dataItem.getDate().substring(11, 16) + &quot;|&quot; + dateFormat.format(Time));\n                } catch (ParseException e) {\n                    throw new RuntimeException(e);\n                }\n            }else {\n                Toast.makeText(incomingItemActivity.this, &quot;gagal&quot;, Toast.LENGTH_SHORT).show();\n            }\n\n        }\n\n        @Override\n        public void onFailure(Call&lt;ResponseItemDatang&gt; call, Throwable t) {\n\n        }\n    });\n}\n</code></pre>\n<p>}</p>\n"},{"tags":["java","sockets","ssl","server","serversocket"],"comments":[{"owner":{"account_id":3701398,"reputation":116662,"user_id":3081018,"display_name":"Steffen Ullrich"},"score":4,"creation_date":1698042251,"post_id":77342968,"comment_id":136350043,"body_markdown":"RSA is only intended and suitable to encrypt small amount of data, like the keys for symmetric encryption like AES. It is therefore used as part of [hybrid encryption](https://en.wikipedia.org/wiki/Hybrid_cryptosystem). Given that you are using Socket it looks like you want to protect communication. In this case use the established and widely used TLS as provided by SSLSocket instead of inventing your own.","body":"RSA is only intended and suitable to encrypt small amount of data, like the keys for symmetric encryption like AES. It is therefore used as part of <a href=\"https://en.wikipedia.org/wiki/Hybrid_cryptosystem\" rel=\"nofollow noreferrer\">hybrid encryption</a>. Given that you are using Socket it looks like you want to protect communication. In this case use the established and widely used TLS as provided by SSLSocket instead of inventing your own."},{"owner":{"account_id":27003082,"reputation":1,"user_id":20564055,"display_name":"Balpreet Singh"},"score":0,"creation_date":1698042643,"post_id":77342968,"comment_id":136350106,"body_markdown":"So, can I replace `Socket` with `SSLSocket` and communication will be protected?","body":"So, can I replace <code>Socket</code> with <code>SSLSocket</code> and communication will be protected?"},{"owner":{"account_id":27003082,"reputation":1,"user_id":20564055,"display_name":"Balpreet Singh"},"score":0,"creation_date":1698042699,"post_id":77342968,"comment_id":136350112,"body_markdown":"Can I transfer large data with SSLSocket?","body":"Can I transfer large data with SSLSocket?"},{"owner":{"account_id":3701398,"reputation":116662,"user_id":3081018,"display_name":"Steffen Ullrich"},"score":4,"creation_date":1698042860,"post_id":77342968,"comment_id":136350136,"body_markdown":"*&quot;Can I transfer large data with SSLSocket? &quot;* - Yes, there is no limit. *&quot;can I replace Socket with SSLSocket and communication will be protected?&quot;* - basically yes, but SSLSocket needs additional setup like a certificate on the server side in order to properly protect the communication. There are zillions of examples out there to help you.","body":"<i>&quot;Can I transfer large data with SSLSocket? &quot;</i> - Yes, there is no limit. <i>&quot;can I replace Socket with SSLSocket and communication will be protected?&quot;</i> - basically yes, but SSLSocket needs additional setup like a certificate on the server side in order to properly protect the communication. There are zillions of examples out there to help you."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1698052376,"post_id":77342968,"comment_id":136351641,"body_markdown":"For the record, the reason that RSA is limited to small chunks of data is that encoding and decoding is relatively expensive.  Block ciphers with symmetric keys are orders of magnitude cheaper.  (I couldn&#39;t quickly an actual comparison.  Benchmarking studies typically *don&#39;t even bother measuring* the performance of public key algorithms.)","body":"For the record, the reason that RSA is limited to small chunks of data is that encoding and decoding is relatively expensive.  Block ciphers with symmetric keys are orders of magnitude cheaper.  (I couldn&#39;t quickly an actual comparison.  Benchmarking studies typically <i>don&#39;t even bother measuring</i> the performance of public key algorithms.)"}],"owner":{"account_id":27003082,"reputation":1,"user_id":20564055,"display_name":"Balpreet Singh"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698041782,"creation_date":1698041782,"question_id":77342968,"body_markdown":"I am making a server in java using `ServerSocket` and `Socket` class. I wanted it encrypted so I used `RSA` encryption to encrypt and decrypt data in form of Strings. I got into a problem. The problem is that I can only encrypt maximum 500 bytes of data with 4096 key size and around 240 bytes with 2048 key size. Also I use `Scanner` and `PrintWriter` for reading and sending data. I found there is class `SSL` but I am not really sure if it can replace `Socket`. I tried sending large data by breaking it into pieces and then sending it but I don&#39;t really think it is really efficient. Please can anyone guide me how to make encrypted communication in server.\r\n\r\nI want to find a way to encrypt my communication in server.","title":"How to make Encrypted Connection in Java","body":"<p>I am making a server in java using <code>ServerSocket</code> and <code>Socket</code> class. I wanted it encrypted so I used <code>RSA</code> encryption to encrypt and decrypt data in form of Strings. I got into a problem. The problem is that I can only encrypt maximum 500 bytes of data with 4096 key size and around 240 bytes with 2048 key size. Also I use <code>Scanner</code> and <code>PrintWriter</code> for reading and sending data. I found there is class <code>SSL</code> but I am not really sure if it can replace <code>Socket</code>. I tried sending large data by breaking it into pieces and then sending it but I don't really think it is really efficient. Please can anyone guide me how to make encrypted communication in server.</p>\n<p>I want to find a way to encrypt my communication in server.</p>\n"},{"tags":["java","guava"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1698041270,"post_id":77342913,"comment_id":136349906,"body_markdown":"https://guava.dev/releases/22.0/api/docs/com/google/common/collect/Tables.html#newCustomTable-java.util.Map-com.google.common.base.Supplier-","body":"<a href=\"https://guava.dev/releases/22.0/api/docs/com/google/common/collect/Tables.html#newCustomTable-java.util.Map-com.google.common.base.Supplier-\" rel=\"nofollow noreferrer\">guava.dev/releases/22.0/api/docs/com/google/common/collect/&hellip;</a>"},{"owner":{"account_id":2221535,"reputation":412,"user_id":1960799,"accept_rate":70,"display_name":"Michael"},"score":0,"creation_date":1698041595,"post_id":77342913,"comment_id":136349944,"body_markdown":"@shmosel. thanks for reply, the backingMap must be empty according the api :(","body":"@shmosel. thanks for reply, the backingMap must be empty according the api :("},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1698042790,"post_id":77342913,"comment_id":136350128,"body_markdown":"Indeed. Weird that it doesn&#39;t mention that till the `@throws` section. And that it accepts a map instance instead of a supplier.","body":"Indeed. Weird that it doesn&#39;t mention that till the <code>@throws</code> section. And that it accepts a map instance instead of a supplier."}],"owner":{"account_id":2221535,"reputation":412,"user_id":1960799,"accept_rate":70,"display_name":"Michael"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698041049,"creation_date":1698041049,"question_id":77342913,"body_markdown":"Suppose I have an existing Map&lt;Integer, Map&lt;Integer, String&gt;&gt; which contains items, I want to construct a com.google.common.collect.Table from that map for there&#39;s unnecessary data copy","title":"Is possible to construct a com.google.common.collect.Table from an existing map?","body":"<p>Suppose I have an existing Map&lt;Integer, Map&lt;Integer, String&gt;&gt; which contains items, I want to construct a com.google.common.collect.Table from that map for there's unnecessary data copy</p>\n"},{"tags":["java","while-loop","sentinel"],"comments":[{"owner":{"account_id":1853886,"reputation":210597,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"score":3,"creation_date":1354224296,"post_id":13634992,"comment_id":18703365,"body_markdown":"Show us the code that you tried?","body":"Show us the code that you tried?"},{"owner":{"account_id":2095676,"reputation":19,"user_id":1864508,"display_name":"user1864508"},"score":0,"creation_date":1354227576,"post_id":13634992,"comment_id":18704786,"body_markdown":"there i added what i have so far..","body":"there i added what i have so far.."}],"answers":[{"tags":[],"owner":{"account_id":1468618,"reputation":466,"user_id":1380776,"accept_rate":73,"display_name":"joval"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1354228499,"creation_date":1354228101,"answer_id":13635929,"question_id":13634992,"body_markdown":"    do {\r\n        name = reader.next();\r\n    } while (name.lastIndexOf(SENTINEL) == -1);\r\n\r\n\r\nI assume that name cannot contain the sentinel in it. In other case, change &lt;code&gt;== -1&lt;/code&gt; to\r\n    \r\n    != length(name) - 1\r\n\r\nPS. You&#39;re declaring &lt;code&gt;String name&lt;/code&gt; twice.\r\n\r\nPS2. Even better condition:\r\n    \r\n    while (!name.endsWith(String.valueOf(SENTINEL));\r\n\r\n","title":"Using sentinel-controlled loop","body":"<pre><code>do {\n    name = reader.next();\n} while (name.lastIndexOf(SENTINEL) == -1);\n</code></pre>\n\n<p>I assume that name cannot contain the sentinel in it. In other case, change <code>== -1</code> to</p>\n\n<pre><code>!= length(name) - 1\n</code></pre>\n\n<p>PS. You're declaring <code>String name</code> twice.</p>\n\n<p>PS2. Even better condition:</p>\n\n<pre><code>while (!name.endsWith(String.valueOf(SENTINEL));\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user1773603"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1587888314,"creation_date":1587888314,"answer_id":61437591,"question_id":13634992,"body_markdown":"**The use of sentinel for loop:**\r\n\r\n&gt; In a sentinel controlled loop the change part depends on data from the user. It is awkward to do this inside a for statement. So the change part is omitted from the for statement and put in a convenient location.\r\n\r\n    import java.util.Scanner;\r\n\r\n    class EvalSqrt\r\n    {\r\n      public static void main (String[] args )\r\n      {\r\n        Scanner scan = new Scanner( System.in );\r\n        double x;\r\n\r\n        System.out.print(&quot;Enter a value for x or -1 to exit: &quot;)  ;\r\n        x = scan.nextDouble();\r\n\r\n        for (    ; x &gt;= 0.0 ;   )  \r\n        {\r\n          System.out.println( &quot;Square root of &quot; + x + &quot; is &quot; + Math.sqrt( x ) ); \r\n\r\n          System.out.print(&quot;Enter a value for x or -1 to exit: &quot;)  ;\r\n          x =  scan.nextDouble();\r\n        }\r\n      }\r\n    }\r\nFor more details: https://chortle.ccsu.edu/java5/Notes/chap41/ch41_13.html","title":"Using sentinel-controlled loop","body":"<p><strong>The use of sentinel for loop:</strong></p>\n\n<blockquote>\n  <p>In a sentinel controlled loop the change part depends on data from the user. It is awkward to do this inside a for statement. So the change part is omitted from the for statement and put in a convenient location.</p>\n</blockquote>\n\n<pre><code>import java.util.Scanner;\n\nclass EvalSqrt\n{\n  public static void main (String[] args )\n  {\n    Scanner scan = new Scanner( System.in );\n    double x;\n\n    System.out.print(\"Enter a value for x or -1 to exit: \")  ;\n    x = scan.nextDouble();\n\n    for (    ; x &gt;= 0.0 ;   )  \n    {\n      System.out.println( \"Square root of \" + x + \" is \" + Math.sqrt( x ) ); \n\n      System.out.print(\"Enter a value for x or -1 to exit: \")  ;\n      x =  scan.nextDouble();\n    }\n  }\n}\n</code></pre>\n\n<p>For more details: <a href=\"https://chortle.ccsu.edu/java5/Notes/chap41/ch41_13.html\" rel=\"nofollow noreferrer\">https://chortle.ccsu.edu/java5/Notes/chap41/ch41_13.html</a></p>\n"},{"tags":[],"owner":{"account_id":2698782,"reputation":38625,"user_id":2330053,"display_name":"Idle_Mind"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643228820,"creation_date":1643228820,"answer_id":70869847,"question_id":13634992,"body_markdown":"&gt; an exercise asking to have a user prompt a name and echoes that name\r\n&gt; to the screen until user enters a sentinel value.\r\n\r\nI would expect to see something more like:\r\n\r\n      public static void main(String[] args) {\r\n        Scanner reader = new Scanner(System.in);\r\n        String SENTINEL = &quot;stop&quot;;\r\n        String name;\r\n        do { \r\n          System.out.print(&quot;Enter a name (&#39;&quot; + SENTINEL + &quot;&#39; to quit): &quot;); \r\n          name = reader.nextLine();\r\n          if (!name.equals(SENTINEL)) {\r\n            System.out.println(name);\r\n          }\r\n        } while (!name.equals(SENTINEL));\r\n        System.out.println(&quot;Goodbye!&quot;);\r\n      } ","title":"Using sentinel-controlled loop","body":"<blockquote>\n<p>an exercise asking to have a user prompt a name and echoes that name\nto the screen until user enters a sentinel value.</p>\n</blockquote>\n<p>I would expect to see something more like:</p>\n<pre><code>  public static void main(String[] args) {\n    Scanner reader = new Scanner(System.in);\n    String SENTINEL = &quot;stop&quot;;\n    String name;\n    do { \n      System.out.print(&quot;Enter a name ('&quot; + SENTINEL + &quot;' to quit): &quot;); \n      name = reader.nextLine();\n      if (!name.equals(SENTINEL)) {\n        System.out.println(name);\n      }\n    } while (!name.equals(SENTINEL));\n    System.out.println(&quot;Goodbye!&quot;);\n  } \n</code></pre>\n"}],"owner":{"account_id":2095676,"reputation":19,"user_id":1864508,"display_name":"user1864508"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14448,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":3,"score":0,"last_activity_date":1698040995,"creation_date":1354224238,"question_id":13634992,"body_markdown":"I&#39;m having trouble with an exercise asking to have a user prompt a name and echoes that name to the screen until user enters a sentinel value. I understand this is a sentinel-controlled loop but I&#39;m stuck on the fact that I&#39;m dealing with entering a name instead of an integer. I tried to follow a program in my book which only explains how to use a sentinel value with integers but not with String &quot;name&quot;. I tried looking up this answer and saw something like name.equals(&quot;stop&quot;) if it even applies to this. and looked it up on the APIs and still didn&#39;t find it helpful. I would like to see how it applies as a whole.  \r\nNote: here is what I have done so far and I want to know how far off I am.\r\n\r\n    import java.util.*;\r\n\r\n    public class SentinelControlledLoop {\r\n\r\n        static Scanner console = new Scanner(System.in);\r\n        static final int SENTINEL = #;\r\n\r\n        public static void main (String[] args) {\r\n\t\t\r\n\t\t    String name;\r\n\t\t    System.out.println(&quot;Enter a name &quot; + &quot;ending with &quot; + SENTINEL); \r\n\t\t    String name = reader.next();\r\n\r\n\t\t    while (!name.equals(“stop”)) {\r\n\t\t        name = reader.next();\r\n\t\t    }\r\n\r\n\r\n\r\n\t\t","title":"Using sentinel-controlled loop","body":"<p>I'm having trouble with an exercise asking to have a user prompt a name and echoes that name to the screen until user enters a sentinel value. I understand this is a sentinel-controlled loop but I'm stuck on the fact that I'm dealing with entering a name instead of an integer. I tried to follow a program in my book which only explains how to use a sentinel value with integers but not with String \"name\". I tried looking up this answer and saw something like name.equals(\"stop\") if it even applies to this. and looked it up on the APIs and still didn't find it helpful. I would like to see how it applies as a whole.<br>\nNote: here is what I have done so far and I want to know how far off I am.</p>\n\n<pre><code>import java.util.*;\n\npublic class SentinelControlledLoop {\n\n    static Scanner console = new Scanner(System.in);\n    static final int SENTINEL = #;\n\n    public static void main (String[] args) {\n\n        String name;\n        System.out.println(\"Enter a name \" + \"ending with \" + SENTINEL); \n        String name = reader.next();\n\n        while (!name.equals(“stop”)) {\n            name = reader.next();\n        }\n</code></pre>\n"},{"tags":["java","netbeans","glassfish","java-21"],"answers":[{"tags":[],"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698040930,"creation_date":1696233330,"answer_id":77213961,"question_id":77210369,"body_markdown":"**TLDR**:\r\n\r\nYou can&#39;t start GlassFish 7.0.9 within NetBeans 19 when running JDK 21. That combination is simply not supported. As you have discovered, the most recent GlassFish release that NetBeans 19 supports is GlassFish 7.0.6 when using JDK +21.\r\n\r\n**Solution:**\r\n\r\n&lt;strike&gt;Wait for the next quarterly release of NetBeans, which will almost certainly support GlassFish 7.0.9 and JDK 21.&lt;/strike&gt;\r\n\r\nWait for the next quarterly release of NetBeans (NetBeans 20), which will support GlassFish 7.0.9 and JDK 21. NetBeans Bug Report [Add support for GlassFish 7.0.7, 7.0.8, and 7.0.9 #6542](https://github.com/apache/netbeans/pull/6542) documents this planned enhancement.\r\n\r\n\r\n**Workaround**:\r\n\r\nAs you point out, you can run GlassFish 7.0.9 outside of NetBeans 19, and manually deploy your applications to the GlassFish server via its Admin Console. That&#39;s tedious, but straightforward, and may be appropriate since there have been quite a few fixes and enhancements since GlassFish 7.0.6. \r\n\r\n**Explanation**:\r\n\r\nThese are the release dates for the software products you are using:\r\n- NetBeans 19 was released on September 1, 2023.\r\n- JDK 21 was released on September 19, 2023.\r\n- GlassFish 7.0.9 was released on September 29, 2023.\r\n\r\nThat&#39;s a lot of cutting edge technology. To state the obvious, NetBeans 19 necessarily cannot be expected to offer formal support for products released after its own release date, because those products cannot have been fully tested. Therefore, NetBeans 19 does not formally support JDK 21 or GlassFish 7.0.9. From the [Release Notes for NetBeans 19][1]:\r\n\r\n&gt; _The Apache NetBeans 19 binary releases require JDK 11+, and officially\r\n&gt; support running on JDK 11, 17 and 20_.\r\n\r\nSimilarly, [GlassFish 7.0.9 is not formally supported under JDK 21][2], and its Release Notes explicitly state that:\r\n\r\n&gt; _This release prepares GlassFish for the upcoming JDK 21; it compiles\r\n&gt; and passes all internal tests using OpenJDK 21ea35. Several TCKs\r\n&gt; passed on JDK 21 as well, but the TCK as a whole is not JDK 21\r\n&gt; compatible yet._\r\n\r\nSo even if NetBeans 19 did support GlassFish 7.0.9, GlassFish itself might not work, and definitely would not be supported, when using JDK 21.\r\n\r\nNotes:\r\n\r\n- The readme for GlassFish 7.0.6 states: _&quot;Eclipse GlassFish 7.0.9 requires JDK 11 or newer.&quot;_. Based on its own Release Notes I think that&#39;s misleading/wrong, and it should instead state _&quot;Eclipse GlassFish 7.0.9 requires a JDK between JDK 11 and JDK 20.&quot;_.\r\n- There is a distinction between software releases not being supported and software releases not being permitted. For example, NetBeans 19 does not formally support JDK 21, but you can still use it at your own risk. In contrast, NetBeans 19 explicitly prevents you from using any GlassFish release &gt; 7.0.6, and the GlassFish 7.0.9 documentation explicitly disallows the use of JDK 21.\r\n\r\n\r\n  [1]: https://netbeans.apache.org/download/nb19/\r\n  [2]: https://glassfish.org/download.html","title":"How to register and start glassfish 7.0.9 from netbeans 19 IDE","body":"<p><strong>TLDR</strong>:</p>\n<p>You can't start GlassFish 7.0.9 within NetBeans 19 when running JDK 21. That combination is simply not supported. As you have discovered, the most recent GlassFish release that NetBeans 19 supports is GlassFish 7.0.6 when using JDK +21.</p>\n<p><strong>Solution:</strong></p>\n<p><strike>Wait for the next quarterly release of NetBeans, which will almost certainly support GlassFish 7.0.9 and JDK 21.</strike></p>\n<p>Wait for the next quarterly release of NetBeans (NetBeans 20), which will support GlassFish 7.0.9 and JDK 21. NetBeans Bug Report <a href=\"https://github.com/apache/netbeans/pull/6542\" rel=\"nofollow noreferrer\">Add support for GlassFish 7.0.7, 7.0.8, and 7.0.9 #6542</a> documents this planned enhancement.</p>\n<p><strong>Workaround</strong>:</p>\n<p>As you point out, you can run GlassFish 7.0.9 outside of NetBeans 19, and manually deploy your applications to the GlassFish server via its Admin Console. That's tedious, but straightforward, and may be appropriate since there have been quite a few fixes and enhancements since GlassFish 7.0.6.</p>\n<p><strong>Explanation</strong>:</p>\n<p>These are the release dates for the software products you are using:</p>\n<ul>\n<li>NetBeans 19 was released on September 1, 2023.</li>\n<li>JDK 21 was released on September 19, 2023.</li>\n<li>GlassFish 7.0.9 was released on September 29, 2023.</li>\n</ul>\n<p>That's a lot of cutting edge technology. To state the obvious, NetBeans 19 necessarily cannot be expected to offer formal support for products released after its own release date, because those products cannot have been fully tested. Therefore, NetBeans 19 does not formally support JDK 21 or GlassFish 7.0.9. From the <a href=\"https://netbeans.apache.org/download/nb19/\" rel=\"nofollow noreferrer\">Release Notes for NetBeans 19</a>:</p>\n<blockquote>\n<p><em>The Apache NetBeans 19 binary releases require JDK 11+, and officially\nsupport running on JDK 11, 17 and 20</em>.</p>\n</blockquote>\n<p>Similarly, <a href=\"https://glassfish.org/download.html\" rel=\"nofollow noreferrer\">GlassFish 7.0.9 is not formally supported under JDK 21</a>, and its Release Notes explicitly state that:</p>\n<blockquote>\n<p><em>This release prepares GlassFish for the upcoming JDK 21; it compiles\nand passes all internal tests using OpenJDK 21ea35. Several TCKs\npassed on JDK 21 as well, but the TCK as a whole is not JDK 21\ncompatible yet.</em></p>\n</blockquote>\n<p>So even if NetBeans 19 did support GlassFish 7.0.9, GlassFish itself might not work, and definitely would not be supported, when using JDK 21.</p>\n<p>Notes:</p>\n<ul>\n<li>The readme for GlassFish 7.0.6 states: <em>&quot;Eclipse GlassFish 7.0.9 requires JDK 11 or newer.&quot;</em>. Based on its own Release Notes I think that's misleading/wrong, and it should instead state <em>&quot;Eclipse GlassFish 7.0.9 requires a JDK between JDK 11 and JDK 20.&quot;</em>.</li>\n<li>There is a distinction between software releases not being supported and software releases not being permitted. For example, NetBeans 19 does not formally support JDK 21, but you can still use it at your own risk. In contrast, NetBeans 19 explicitly prevents you from using any GlassFish release &gt; 7.0.6, and the GlassFish 7.0.9 documentation explicitly disallows the use of JDK 21.</li>\n</ul>\n"}],"owner":{"account_id":2042955,"reputation":1341,"user_id":1823710,"accept_rate":59,"display_name":"qualebs"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":170,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698040930,"creation_date":1696161157,"question_id":77210369,"body_markdown":"I have done a fresh installation of JDK 21 installed Netbeans 19 IDE.\r\n`java --version` gives the output `java 21 2023-09-19 LTS\r\nJava(TM) SE Runtime Environment (build 21+35-LTS-2513)\r\nJava HotSpot(TM) 64-Bit Server VM (build 21+35-LTS-2513, mixed mode, sharing)\r\n` \r\nIn then I started netbeans and created a new project &gt; servers clicked add server &gt; then from the list I can only see chose netbeans 7.0.6 as the latest version. But my I had already downloaded glassfish 7.0.9 and netbeans can see detect it from the glassfish directory so I click next to add. Problem is that netbeans still sees it as glassfish 7.0.6. When i try to run my project I get an error `Could not find Java SE Development Kit to start GlassFish Server,`But in the `glassfish/bin` directory I can start glassfish with the command `./asadmin start-domain domain1` \r\n\r\nHow do I properly register glassfish 7.0.9 to netbeans and is it even supported. I have also confirmed that the JDK platform is properly added as shown in the attached image. [![enter image description here](https://i.stack.imgur.com/HmmSd.png)](https://i.stack.imgur.com/HmmSd.png)\r\n\r\nIn summary I have tried all versions of glassfish 7.x.x in netbeans. I have downloaded a stand alone instance and tried to register it to netbeans. I downgraded to netbeans 18 with jdk 17 and followed the same exact steps and the server worked.","title":"How to register and start glassfish 7.0.9 from netbeans 19 IDE","body":"<p>I have done a fresh installation of JDK 21 installed Netbeans 19 IDE.\n<code>java --version</code> gives the output <code>java 21 2023-09-19 LTS Java(TM) SE Runtime Environment (build 21+35-LTS-2513) Java HotSpot(TM) 64-Bit Server VM (build 21+35-LTS-2513, mixed mode, sharing) </code>\nIn then I started netbeans and created a new project &gt; servers clicked add server &gt; then from the list I can only see chose netbeans 7.0.6 as the latest version. But my I had already downloaded glassfish 7.0.9 and netbeans can see detect it from the glassfish directory so I click next to add. Problem is that netbeans still sees it as glassfish 7.0.6. When i try to run my project I get an error <code>Could not find Java SE Development Kit to start GlassFish Server,</code>But in the <code>glassfish/bin</code> directory I can start glassfish with the command <code>./asadmin start-domain domain1</code></p>\n<p>How do I properly register glassfish 7.0.9 to netbeans and is it even supported. I have also confirmed that the JDK platform is properly added as shown in the attached image. <a href=\"https://i.stack.imgur.com/HmmSd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HmmSd.png\" alt=\"enter image description here\" /></a></p>\n<p>In summary I have tried all versions of glassfish 7.x.x in netbeans. I have downloaded a stand alone instance and tried to register it to netbeans. I downgraded to netbeans 18 with jdk 17 and followed the same exact steps and the server worked.</p>\n"},{"tags":["java","kafka-consumer-api","spring-kafka"],"comments":[{"owner":{"account_id":1288095,"reputation":169316,"user_id":1240763,"display_name":"Gary Russell"},"score":0,"creation_date":1698069775,"post_id":77342832,"comment_id":136354994,"body_markdown":"What you are suggesting makes no sense; there is a separate listener container for each topic; they are independent. Please provide an [MCRE](https://stackoverflow.com/help/minimal-reproducible-example) that exhibits this behavior. Also `maxAttempts` is total attempts (including the first) so 4 retries only.","body":"What you are suggesting makes no sense; there is a separate listener container for each topic; they are independent. Please provide an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">MCRE</a> that exhibits this behavior. Also <code>maxAttempts</code> is total attempts (including the first) so 4 retries only."}],"owner":{"account_id":22922007,"reputation":5,"user_id":17057696,"display_name":"Vasily"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698040437,"creation_date":1698039648,"question_id":77342832,"body_markdown":"**KafkaProducerConfiguration.java:**\r\n```\r\n@Configuration\r\npublic class KafkaProducerConfiguration {\r\n\r\n    @Bean\r\n    public ProducerFactory&lt;String, String&gt; producerFactory(KafkaProperties kafkaProperties) {\r\n        return new DefaultKafkaProducerFactory&lt;&gt;(kafkaProperties.buildProducerProperties());\r\n    }\r\n\r\n    @Bean\r\n    public KafkaTemplate&lt;String, String&gt; applicationIdKafkaProducer(ProducerFactory&lt;String, String&gt; producerFactory) {\r\n        KafkaTemplate&lt;String, String&gt; kafkaTemplate = new KafkaTemplate&lt;&gt;(producerFactory);\r\n\r\n        kafkaTemplate.setObservationEnabled(true);\r\n\r\n        return kafkaTemplate;\r\n    }\r\n}\r\n```\r\n\r\n\r\n**KafkaConsumerConfiguration.java:**\r\n```\r\n@Configuration\r\npublic class KafkaConsumerConfiguration {\r\n\r\n    @Value(&quot;${spring.kafka.consumer.bootstrap-servers}&quot;)\r\n    private String kafkaBootstrapServer;\r\n\r\n    @Value(&quot;${spring.kafka.consumer.group-id}&quot;)\r\n    private String kafkaGroupId;\r\n\r\n    @Bean\r\n    public ConsumerFactory&lt;String, String&gt; applicationIdConsumerFactory() {\r\n        Map&lt;String, Object&gt; kafkaConsumerConfigurationProperties = Map.ofEntries(\r\n                new AbstractMap.SimpleEntry&lt;&gt;(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, kafkaBootstrapServer),\r\n                new AbstractMap.SimpleEntry&lt;&gt;(ConsumerConfig.GROUP_ID_CONFIG, kafkaGroupId)\r\n        );\r\n\r\n        return new DefaultKafkaConsumerFactory&lt;&gt;(kafkaConsumerConfigurationProperties, new StringDeserializer(), new StringDeserializer());\r\n    }\r\n\r\n    @Bean\r\n    public ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; applicationIdKafkaListenerContainerFactory() {\r\n        ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; factory = new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\r\n\r\n        factory.getContainerProperties().setObservationEnabled(true);\r\n        factory.setConsumerFactory(applicationIdConsumerFactory());\r\n\r\n        return factory;\r\n    }\r\n}\r\n```\r\n**KafkaRetryConfiguration.java:**\r\n\r\n```\r\n@Configuration\r\n@EnableKafkaRetryTopic\r\npublic class KafkaRetryConfiguration {\r\n\r\n    @Bean\r\n    public RetryTopicConfiguration applicationIdRetryTopic(@Value(&quot;${application.kafka.topic}&quot;) String topic,\r\n                                                               @Value(&quot;${application.kafka.topic.retry.attempts}&quot;) Integer attempts,\r\n                                                               @Value(&quot;${application.kafka.topic.retry.delay}&quot;) Integer delay,\r\n                                                               @Value(&quot;${application.kafka.topic.retry.multiplier}&quot;) Integer multiplier,\r\n                                                               KafkaTemplate&lt;String, String&gt; applicationIdKafkaProducer) {\r\n        return RetryTopicConfigurationBuilder\r\n                .newInstance()\r\n                .maxAttempts(attempts)\r\n                .exponentialBackoff(delay, multiplier, delay * (long) Math.pow(multiplier, attempts - 1))\r\n                .notRetryOn(List.of(\r\n                        DeserializationException.class, MessageConversionException.class, MethodArgumentResolutionException.class,\r\n                        NoSuchMethodException.class, ClassCastException.class, java.lang.IllegalStateException.class\r\n                ))\r\n                .includeTopics(Collections.singletonList(topic))\r\n                .create(applicationIdKafkaProducer);\r\n    }\r\n}\r\n```\r\n\r\n**application.properties:**\r\n```\r\nspring.kafka.properties.security.protocol=PLAINTEXT\r\nspring.kafka.consumer.bootstrap-servers=http://localhost:9092\r\nspring.kafka.consumer.group-id=refusal-application-filter-group\r\nspring.kafka.consumer.auto-offset-reset=earliest\r\n\r\napplication.kafka.topic=RAF.APPLICATION.IN\r\napplication.kafka.topic.retry.attempts=5\r\napplication.kafka.topic.retry.delay=2400\r\napplication.kafka.topic.retry.multiplier=5\r\n```\r\n\r\n**@KafkaListener method:**\r\n```\r\n    @KafkaListener(\r\n            id = &quot;${spring.kafka.consumer.group-id}&quot;,\r\n            topics = &quot;${application.kafka.topic}&quot;,\r\n            containerFactory = &quot;applicationIdKafkaListenerContainerFactory&quot;\r\n    )\r\n    public void listenApplicationId(@Header(&quot;kafka_original-topic&quot;) String topic,\r\n                                    @Header(&quot;retry_topic-attempts&quot;) Integer attempt,\r\n                                    @Headers MessageHeaders messageHeaders,\r\n                                    String applicationId) throws CustomWrongResponseException {\r\n        log.info(&quot;Message &#39;{}&#39; was received from topic {}, attempt: {}&quot;, applicationId, topic, attempt);\r\n\r\n        try {\r\n            applicationService.sendApplication(applicationId);\r\n\r\n            log.info(&quot;Processing message &#39;{}&#39; from topic {} is finished&quot;, applicationId, topic);\r\n        } catch (Exception e) {\r\n            log.error(&quot;Process message id &#39;{}&#39; from topic {} is violated:&quot;, applicationId, topic, e);\r\n\r\n            throw e;\r\n        }\r\n    }\r\n```\r\n\r\n**Created topics** (there is one partition everywhere):\r\n```\r\nRAF.APPLICATION.IN-0\r\nRAF.APPLICATION.IN-dlt-0\r\nRAF.APPLICATION.IN-retry-2400-0\r\nRAF.APPLICATION.IN-retry-12000-0\r\nRAF.APPLICATION.IN-retry-60000-0\r\nRAF.APPLICATION.IN-retry-300000-0\r\n```\r\n**Environment:** Java 17, Spring Boot 3.0.6, WildFly 28.0.0, Kafka 2.13 - 3.3.2\r\n\r\nMy goal - consumer reading message from topic `RAF.APPLICATION.IN-0` without big delay (&lt; 1 second, in first time).\r\nBut for some reason consumer reading first retry-topic `RAF.APPLICATION.IN-retry-2400-0` instead main-topic `RAF.APPLICATION.IN-0`.\r\nAccordingly, a delay of 2.4 seconds is obtained.\r\n\r\n**Logs:**\r\n\r\n```\r\n2023-10-23 07:57:34.013 INFO  [default task-1] [traceId=ae165306b0b90bee753bfcb7883fff18, spanId=3357f33254026b7b] ru.naysav.raf.service.ApplicationService: Message &#39;39f78426-8dee-4629-9759-000000000022&#39; successfully produce to topic RAF.APPLICATION.IN\r\n...\r\n2023-10-23 07:57:34.709 INFO  [refusal-application-filter-group-retry-2400-0-C-1] [traceId=ae165306b0b90bee753bfcb7883fff18, spanId=0e34de57c8add6cf] org.apache.kafka.clients.consumer.KafkaConsumer: [Consumer clientId=consumer-refusal-application-filter-group-retry-2400-1, groupId=refusal-application-filter-group-retry-2400] Seeking to offset 0 for partition RAF.APPLICATION.IN-retry-2400-0\r\n2023-10-23 07:57:36.628 INFO  [refusal-application-filter-group-retry-2400-0-C-1] [traceId=ae165306b0b90bee753bfcb7883fff18, spanId=eff2518344cd8116] ru.naysav.raf.api.listener.ApplicationIdListener: Message &#39;39f78426-8dee-4629-9759-000000000022&#39; was received from topic RAF.APPLICATION.IN, attempt: 2\r\n```\r\nAt the same time, there is a message in the main-topic `RAF.APPLICATION.IN-0`:\r\n[Offset explorer screen](https://i.stack.imgur.com/3Suy0.png)\r\n\r\n**Additionally: topic `RAF.APPLICATION.IN-retry-1500000-0` was not created, although 5 attempts were indicated**\r\n","title":"Read message lag in Spring Kafka: consumer starts read message from retry topic instead main topic","body":"<p><strong>KafkaProducerConfiguration.java:</strong></p>\n<pre><code>@Configuration\npublic class KafkaProducerConfiguration {\n\n    @Bean\n    public ProducerFactory&lt;String, String&gt; producerFactory(KafkaProperties kafkaProperties) {\n        return new DefaultKafkaProducerFactory&lt;&gt;(kafkaProperties.buildProducerProperties());\n    }\n\n    @Bean\n    public KafkaTemplate&lt;String, String&gt; applicationIdKafkaProducer(ProducerFactory&lt;String, String&gt; producerFactory) {\n        KafkaTemplate&lt;String, String&gt; kafkaTemplate = new KafkaTemplate&lt;&gt;(producerFactory);\n\n        kafkaTemplate.setObservationEnabled(true);\n\n        return kafkaTemplate;\n    }\n}\n</code></pre>\n<p><strong>KafkaConsumerConfiguration.java:</strong></p>\n<pre><code>@Configuration\npublic class KafkaConsumerConfiguration {\n\n    @Value(&quot;${spring.kafka.consumer.bootstrap-servers}&quot;)\n    private String kafkaBootstrapServer;\n\n    @Value(&quot;${spring.kafka.consumer.group-id}&quot;)\n    private String kafkaGroupId;\n\n    @Bean\n    public ConsumerFactory&lt;String, String&gt; applicationIdConsumerFactory() {\n        Map&lt;String, Object&gt; kafkaConsumerConfigurationProperties = Map.ofEntries(\n                new AbstractMap.SimpleEntry&lt;&gt;(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, kafkaBootstrapServer),\n                new AbstractMap.SimpleEntry&lt;&gt;(ConsumerConfig.GROUP_ID_CONFIG, kafkaGroupId)\n        );\n\n        return new DefaultKafkaConsumerFactory&lt;&gt;(kafkaConsumerConfigurationProperties, new StringDeserializer(), new StringDeserializer());\n    }\n\n    @Bean\n    public ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; applicationIdKafkaListenerContainerFactory() {\n        ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; factory = new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\n\n        factory.getContainerProperties().setObservationEnabled(true);\n        factory.setConsumerFactory(applicationIdConsumerFactory());\n\n        return factory;\n    }\n}\n</code></pre>\n<p><strong>KafkaRetryConfiguration.java:</strong></p>\n<pre><code>@Configuration\n@EnableKafkaRetryTopic\npublic class KafkaRetryConfiguration {\n\n    @Bean\n    public RetryTopicConfiguration applicationIdRetryTopic(@Value(&quot;${application.kafka.topic}&quot;) String topic,\n                                                               @Value(&quot;${application.kafka.topic.retry.attempts}&quot;) Integer attempts,\n                                                               @Value(&quot;${application.kafka.topic.retry.delay}&quot;) Integer delay,\n                                                               @Value(&quot;${application.kafka.topic.retry.multiplier}&quot;) Integer multiplier,\n                                                               KafkaTemplate&lt;String, String&gt; applicationIdKafkaProducer) {\n        return RetryTopicConfigurationBuilder\n                .newInstance()\n                .maxAttempts(attempts)\n                .exponentialBackoff(delay, multiplier, delay * (long) Math.pow(multiplier, attempts - 1))\n                .notRetryOn(List.of(\n                        DeserializationException.class, MessageConversionException.class, MethodArgumentResolutionException.class,\n                        NoSuchMethodException.class, ClassCastException.class, java.lang.IllegalStateException.class\n                ))\n                .includeTopics(Collections.singletonList(topic))\n                .create(applicationIdKafkaProducer);\n    }\n}\n</code></pre>\n<p><strong>application.properties:</strong></p>\n<pre><code>spring.kafka.properties.security.protocol=PLAINTEXT\nspring.kafka.consumer.bootstrap-servers=http://localhost:9092\nspring.kafka.consumer.group-id=refusal-application-filter-group\nspring.kafka.consumer.auto-offset-reset=earliest\n\napplication.kafka.topic=RAF.APPLICATION.IN\napplication.kafka.topic.retry.attempts=5\napplication.kafka.topic.retry.delay=2400\napplication.kafka.topic.retry.multiplier=5\n</code></pre>\n<p><strong>@KafkaListener method:</strong></p>\n<pre><code>    @KafkaListener(\n            id = &quot;${spring.kafka.consumer.group-id}&quot;,\n            topics = &quot;${application.kafka.topic}&quot;,\n            containerFactory = &quot;applicationIdKafkaListenerContainerFactory&quot;\n    )\n    public void listenApplicationId(@Header(&quot;kafka_original-topic&quot;) String topic,\n                                    @Header(&quot;retry_topic-attempts&quot;) Integer attempt,\n                                    @Headers MessageHeaders messageHeaders,\n                                    String applicationId) throws CustomWrongResponseException {\n        log.info(&quot;Message '{}' was received from topic {}, attempt: {}&quot;, applicationId, topic, attempt);\n\n        try {\n            applicationService.sendApplication(applicationId);\n\n            log.info(&quot;Processing message '{}' from topic {} is finished&quot;, applicationId, topic);\n        } catch (Exception e) {\n            log.error(&quot;Process message id '{}' from topic {} is violated:&quot;, applicationId, topic, e);\n\n            throw e;\n        }\n    }\n</code></pre>\n<p><strong>Created topics</strong> (there is one partition everywhere):</p>\n<pre><code>RAF.APPLICATION.IN-0\nRAF.APPLICATION.IN-dlt-0\nRAF.APPLICATION.IN-retry-2400-0\nRAF.APPLICATION.IN-retry-12000-0\nRAF.APPLICATION.IN-retry-60000-0\nRAF.APPLICATION.IN-retry-300000-0\n</code></pre>\n<p><strong>Environment:</strong> Java 17, Spring Boot 3.0.6, WildFly 28.0.0, Kafka 2.13 - 3.3.2</p>\n<p>My goal - consumer reading message from topic <code>RAF.APPLICATION.IN-0</code> without big delay (&lt; 1 second, in first time).\nBut for some reason consumer reading first retry-topic <code>RAF.APPLICATION.IN-retry-2400-0</code> instead main-topic <code>RAF.APPLICATION.IN-0</code>.\nAccordingly, a delay of 2.4 seconds is obtained.</p>\n<p><strong>Logs:</strong></p>\n<pre><code>2023-10-23 07:57:34.013 INFO  [default task-1] [traceId=ae165306b0b90bee753bfcb7883fff18, spanId=3357f33254026b7b] ru.naysav.raf.service.ApplicationService: Message '39f78426-8dee-4629-9759-000000000022' successfully produce to topic RAF.APPLICATION.IN\n...\n2023-10-23 07:57:34.709 INFO  [refusal-application-filter-group-retry-2400-0-C-1] [traceId=ae165306b0b90bee753bfcb7883fff18, spanId=0e34de57c8add6cf] org.apache.kafka.clients.consumer.KafkaConsumer: [Consumer clientId=consumer-refusal-application-filter-group-retry-2400-1, groupId=refusal-application-filter-group-retry-2400] Seeking to offset 0 for partition RAF.APPLICATION.IN-retry-2400-0\n2023-10-23 07:57:36.628 INFO  [refusal-application-filter-group-retry-2400-0-C-1] [traceId=ae165306b0b90bee753bfcb7883fff18, spanId=eff2518344cd8116] ru.naysav.raf.api.listener.ApplicationIdListener: Message '39f78426-8dee-4629-9759-000000000022' was received from topic RAF.APPLICATION.IN, attempt: 2\n</code></pre>\n<p>At the same time, there is a message in the main-topic <code>RAF.APPLICATION.IN-0</code>:\n<a href=\"https://i.stack.imgur.com/3Suy0.png\" rel=\"nofollow noreferrer\">Offset explorer screen</a></p>\n<p><strong>Additionally: topic <code>RAF.APPLICATION.IN-retry-1500000-0</code> was not created, although 5 attempts were indicated</strong></p>\n"},{"tags":["java","spring","spring-boot","websocket"],"answers":[{"tags":[],"owner":{"account_id":19573912,"reputation":793,"user_id":14324416,"display_name":"jacky-neo"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1609742936,"creation_date":1609742936,"answer_id":65558679,"question_id":65554969,"body_markdown":"I find your code has some error:\r\n1) if you use WebSocket() as client, you should comment withSocktJS() in WebSocketConfig. and like it\r\n``` java\r\n@Configuration\r\n@EnableWebSocket\r\npublic class WebSocketConfig2 implements WebSocketConfigurer {\r\n\r\n    @Override\r\n    public void registerWebSocketHandlers(WebSocketHandlerRegistry registry) {\r\n        registry.addHandler(new WsMessageHandler(), &quot;/ws&quot;)\r\n                .addInterceptors(new CustomInterceptor())\r\n                .setAllowedOrigins(&quot;*&quot;)\r\n                .setHandshakeHandler(new DefaultHandshakeHandler())\r\n//                .withSockJS()\r\n        ;\r\n    }\r\n}\r\n\r\n```\r\n\r\n2. Your client js code is wrong. there is no ws. You should use exampleSocket to send. like as below\r\n``` javascript\r\n\t            var exampleSocket = new WebSocket(&quot;ws://localhost:8081/ws&quot;, &quot;protocolOne&quot;);\r\n           \t\texampleSocket.onopen = function(ws) {\r\n                    console.log(&#39;-----------------&#39;, ws);\r\n\t\t\t\t\t// Web Socket is connected, send data using send()\r\n\t\t\t\t\texampleSocket.send(&quot;Message to send&quot;);\r\n\t\t\t\t\talert(&quot;Message is sent...&quot;);\r\n           \t\t};\r\n\r\n```\r\n\r\n3. You point a protocol called &#39;protocolOne&#39; when sending websocket in client, you should return it back in CustomInterceptor. You can do as below.\r\n``` java\r\npublic class CustomInterceptor implements HandshakeInterceptor {\r\n    @Override\r\n    public boolean beforeHandshake(ServerHttpRequest serverHttpRequest, ServerHttpResponse serverHttpResponse, WebSocketHandler webSocketHandler, Map&lt;String, Object&gt; map) throws Exception {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public void afterHandshake(ServerHttpRequest serverHttpRequest, ServerHttpResponse serverHttpResponse, WebSocketHandler webSocketHandler, @Nullable Exception e) {\r\n        if(serverHttpRequest.getHeaders() == null )\r\n            return ;\r\n        if(serverHttpRequest.getHeaders().get(&quot;Sec-WebSocket-Protocol&quot;) == null)\r\n            return ;\r\n        String protocol = (String) serverHttpRequest.getHeaders().get(&quot;Sec-WebSocket-Protocol&quot;).get(0);\r\n        if(protocol == null)\r\n            return ;\r\n\r\n        serverHttpResponse.getHeaders().add(&quot;Sec-WebSocket-Protocol&quot;, protocol);\r\n\r\n    }\r\n\r\n}\r\n\r\n```","title":"Error during WebSocket handshake: Unexpected response code: 400 Spring boot websockets","body":"<p>I find your code has some error:</p>\n<ol>\n<li>if you use WebSocket() as client, you should comment withSocktJS() in WebSocketConfig. and like it</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebSocket\npublic class WebSocketConfig2 implements WebSocketConfigurer {\n\n    @Override\n    public void registerWebSocketHandlers(WebSocketHandlerRegistry registry) {\n        registry.addHandler(new WsMessageHandler(), &quot;/ws&quot;)\n                .addInterceptors(new CustomInterceptor())\n                .setAllowedOrigins(&quot;*&quot;)\n                .setHandshakeHandler(new DefaultHandshakeHandler())\n//                .withSockJS()\n        ;\n    }\n}\n\n</code></pre>\n<ol start=\"2\">\n<li>Your client js code is wrong. there is no ws. You should use exampleSocket to send. like as below</li>\n</ol>\n<pre class=\"lang-js prettyprint-override\"><code>                var exampleSocket = new WebSocket(&quot;ws://localhost:8081/ws&quot;, &quot;protocolOne&quot;);\n                exampleSocket.onopen = function(ws) {\n                    console.log('-----------------', ws);\n                    // Web Socket is connected, send data using send()\n                    exampleSocket.send(&quot;Message to send&quot;);\n                    alert(&quot;Message is sent...&quot;);\n                };\n\n</code></pre>\n<ol start=\"3\">\n<li>You point a protocol called 'protocolOne' when sending websocket in client, you should return it back in CustomInterceptor. You can do as below.</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>public class CustomInterceptor implements HandshakeInterceptor {\n    @Override\n    public boolean beforeHandshake(ServerHttpRequest serverHttpRequest, ServerHttpResponse serverHttpResponse, WebSocketHandler webSocketHandler, Map&lt;String, Object&gt; map) throws Exception {\n        return true;\n    }\n\n    @Override\n    public void afterHandshake(ServerHttpRequest serverHttpRequest, ServerHttpResponse serverHttpResponse, WebSocketHandler webSocketHandler, @Nullable Exception e) {\n        if(serverHttpRequest.getHeaders() == null )\n            return ;\n        if(serverHttpRequest.getHeaders().get(&quot;Sec-WebSocket-Protocol&quot;) == null)\n            return ;\n        String protocol = (String) serverHttpRequest.getHeaders().get(&quot;Sec-WebSocket-Protocol&quot;).get(0);\n        if(protocol == null)\n            return ;\n\n        serverHttpResponse.getHeaders().add(&quot;Sec-WebSocket-Protocol&quot;, protocol);\n\n    }\n\n}\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29666459,"reputation":1,"user_id":22736854,"display_name":"frankenstein"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698040113,"creation_date":1698040113,"answer_id":77342863,"question_id":65554969,"body_markdown":"there is an issue in your client side code, yu don&#39;t need to pass ws, instead make it http\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/tLFBV.png\r\nheere you can see that http followed by localhost and port if not you rdefault port and then path that you have configured","title":"Error during WebSocket handshake: Unexpected response code: 400 Spring boot websockets","body":"<p>there is an issue in your client side code, yu don't need to pass ws, instead make it http\n<a href=\"https://i.stack.imgur.com/tLFBV.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>heere you can see that http followed by localhost and port if not you rdefault port and then path that you have configured</p>\n"}],"owner":{"account_id":7527198,"reputation":1099,"user_id":5716914,"accept_rate":11,"display_name":"Johnyb"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4995,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1698040113,"creation_date":1609708204,"question_id":65554969,"body_markdown":"I am trying to implement websockets. My code:\r\n\r\nIn spring security i allow the path w/e authentitcation\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity httpSecurity) throws Exception {\r\n        httpSecurity.csrf()\r\n                .disable()\r\n                .authorizeRequests()\r\n                .antMatchers(&quot;/register&quot;,&quot;/login&quot;,&quot;/testAuth&quot;,&quot;/web&quot;,&quot;/ws&quot;).permitAll()\r\n                .anyRequest().authenticated()\r\n                .and()\r\n                .exceptionHandling()\r\n                .authenticationEntryPoint(jwtAuthenticationEntryPoint)\r\n                .and()\r\n                .sessionManagement()\r\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS);\r\n        httpSecurity.addFilterBefore(jwtRequestFilter, UsernamePasswordAuthenticationFilter.class);\r\n    }\r\n\r\nAnd config for ws\r\n\r\n    @Configuration\r\n    @EnableWebSocket\r\n    public class WebSocketConfig implements WebSocketConfigurer {\r\n    \r\n    \r\n        @Override\r\n        public void registerWebSocketHandlers(WebSocketHandlerRegistry registry) {\r\n            registry.addHandler(new WsMessageHandler(), &quot;/ws&quot;)\r\n                    .addInterceptors(new CustomInterceptor())\r\n                    .setAllowedOrigins(&quot;*&quot;)\r\n                    .setHandshakeHandler(new DefaultHandshakeHandler())\r\n                    .withSockJS();\r\n        }\r\n    }\r\n`\r\n  \r\n\r\n      public class CustomInterceptor implements HandshakeInterceptor {\r\n            @Override\r\n            public boolean beforeHandshake(ServerHttpRequest serverHttpRequest, ServerHttpResponse serverHttpResponse, WebSocketHandler webSocketHandler, Map&lt;String, Object&gt; map) throws Exception {\r\n                return true;\r\n            }\r\n        \r\n            @Override\r\n            public void afterHandshake(ServerHttpRequest serverHttpRequest, ServerHttpResponse serverHttpResponse, WebSocketHandler webSocketHandler, @Nullable Exception e) {\r\n        \r\n            }\r\n        }\r\n\r\nAs client i use simple js code:\r\n\r\n    var exampleSocket = new WebSocket(&quot;ws://localhost:8080/ws&quot;, &quot;protocolOne&quot;);\r\n               exampleSocket.onopen = function() {\r\n                  \r\n                  // Web Socket is connected, send data using send()\r\n                  ws.send(&quot;Message to send&quot;);\r\n                  alert(&quot;Message is sent...&quot;);\r\n               };\r\n\r\nHowever i recieve error:\r\n\r\n&gt; WebSocket connection to &#39;ws://localhost:8080/ws&#39; failed: Error during\r\n&gt; WebSocket handshake: Unexpected response code: 400\r\n\r\nWhat is causing this? Everything should be correct. Thanks for answer\r\n\r\n","title":"Error during WebSocket handshake: Unexpected response code: 400 Spring boot websockets","body":"<p>I am trying to implement websockets. My code:</p>\n<p>In spring security i allow the path w/e authentitcation</p>\n<pre><code>@Override\nprotected void configure(HttpSecurity httpSecurity) throws Exception {\n    httpSecurity.csrf()\n            .disable()\n            .authorizeRequests()\n            .antMatchers(&quot;/register&quot;,&quot;/login&quot;,&quot;/testAuth&quot;,&quot;/web&quot;,&quot;/ws&quot;).permitAll()\n            .anyRequest().authenticated()\n            .and()\n            .exceptionHandling()\n            .authenticationEntryPoint(jwtAuthenticationEntryPoint)\n            .and()\n            .sessionManagement()\n            .sessionCreationPolicy(SessionCreationPolicy.STATELESS);\n    httpSecurity.addFilterBefore(jwtRequestFilter, UsernamePasswordAuthenticationFilter.class);\n}\n</code></pre>\n<p>And config for ws</p>\n<pre><code>@Configuration\n@EnableWebSocket\npublic class WebSocketConfig implements WebSocketConfigurer {\n\n\n    @Override\n    public void registerWebSocketHandlers(WebSocketHandlerRegistry registry) {\n        registry.addHandler(new WsMessageHandler(), &quot;/ws&quot;)\n                .addInterceptors(new CustomInterceptor())\n                .setAllowedOrigins(&quot;*&quot;)\n                .setHandshakeHandler(new DefaultHandshakeHandler())\n                .withSockJS();\n    }\n}\n</code></pre>\n<p>`</p>\n<pre><code>  public class CustomInterceptor implements HandshakeInterceptor {\n        @Override\n        public boolean beforeHandshake(ServerHttpRequest serverHttpRequest, ServerHttpResponse serverHttpResponse, WebSocketHandler webSocketHandler, Map&lt;String, Object&gt; map) throws Exception {\n            return true;\n        }\n    \n        @Override\n        public void afterHandshake(ServerHttpRequest serverHttpRequest, ServerHttpResponse serverHttpResponse, WebSocketHandler webSocketHandler, @Nullable Exception e) {\n    \n        }\n    }\n</code></pre>\n<p>As client i use simple js code:</p>\n<pre><code>var exampleSocket = new WebSocket(&quot;ws://localhost:8080/ws&quot;, &quot;protocolOne&quot;);\n           exampleSocket.onopen = function() {\n              \n              // Web Socket is connected, send data using send()\n              ws.send(&quot;Message to send&quot;);\n              alert(&quot;Message is sent...&quot;);\n           };\n</code></pre>\n<p>However i recieve error:</p>\n<blockquote>\n<p>WebSocket connection to 'ws://localhost:8080/ws' failed: Error during\nWebSocket handshake: Unexpected response code: 400</p>\n</blockquote>\n<p>What is causing this? Everything should be correct. Thanks for answer</p>\n"},{"tags":["java","xml","xpath","namespaces"],"comments":[{"owner":{"account_id":91947,"reputation":161814,"user_id":252228,"accept_rate":80,"display_name":"Martin Honnen"},"score":0,"creation_date":1697801029,"post_id":77329916,"comment_id":136328535,"body_markdown":"I would rather think that you overlooked the default namespace declaration `xmlns=&quot;http://www.w3.org/2005/Atom&quot;` on the root element that is also in scope for `entry` to your attempt with `//entry` doesn&#39;t select anything as it selects `entry` elements in no namespace.","body":"I would rather think that you overlooked the default namespace declaration <code>xmlns=&quot;http:&#47;&#47;www.w3.org&#47;2005&#47;Atom&quot;</code> on the root element that is also in scope for <code>entry</code> to your attempt with <code>&#47;&#47;entry</code> doesn&#39;t select anything as it selects <code>entry</code> elements in no namespace."},{"owner":{"account_id":91947,"reputation":161814,"user_id":252228,"accept_rate":80,"display_name":"Martin Honnen"},"score":0,"creation_date":1697801155,"post_id":77329916,"comment_id":136328558,"body_markdown":"And of course the problem with `//*[local-name()=&#39;Modified&#39;]` is that it looks through the whole context document so you want `.//d:Modified` or `.//*[local-name() = &#39;Modified&#39;]`, if you prefer that hack.","body":"And of course the problem with <code>&#47;&#47;*[local-name()=&#39;Modified&#39;]</code> is that it looks through the whole context document so you want <code>.&#47;&#47;d:Modified</code> or <code>.&#47;&#47;*[local-name() = &#39;Modified&#39;]</code>, if you prefer that hack."},{"owner":{"account_id":12296207,"reputation":1838,"user_id":8971773,"accept_rate":25,"display_name":"Kira Resari"},"score":0,"creation_date":1697805420,"post_id":77329916,"comment_id":136329324,"body_markdown":"@MartinHonnen : I tried adding the default namespace, but maybe I did it wrong. Can you maybe give me an example for how that would look in this case? This whole namespace thing is very confusing for me.","body":"@MartinHonnen : I tried adding the default namespace, but maybe I did it wrong. Can you maybe give me an example for how that would look in this case? This whole namespace thing is very confusing for me."}],"answers":[{"tags":[],"owner":{"account_id":12296207,"reputation":1838,"user_id":8971773,"accept_rate":25,"display_name":"Kira Resari"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1698039638,"creation_date":1697806083,"answer_id":77331046,"question_id":77329916,"body_markdown":"For the record, I have now found something that works. I don&#39;t think it&#39;s ideal, but it _does_ get the job done.\r\n\r\nBasically, what I now do is rely on the fact that I can read the ID from a node once I have it, and then use that ID to build a complete XPath with the namespace-ignore-hack.\r\n\r\nThe whole mess looks somewhat like this:\r\n```\r\npublic String getTargetNodeModified(XPathNodes entries) {\r\n\tNode targetEntry = getTargetNode(entries);\r\n\tString targetEntryId = evaluteXpath(latestEntry, &quot;*&quot;, String.class);\r\n\tString searchString = String.format(\r\n        &quot;//entry[id=&#39;%s&#39;]//*[local-name()=&#39;Modified&#39;]&quot;,\r\n        targetEntryId\r\n    );\r\n\treturn evaluteXpath(targetEntry, searchString, String.class);\r\n}\r\n\r\npublic &lt;T&gt; T evaluteXpath(Object object, String xPathString, Class&lt;T&gt; type) {\r\n\tXPathExpression xPathExpression = xPath.compile(xPathString);\r\n\treturn xPathExpression.evaluateExpression(object, type);\r\n}\t\r\n```\r\n\r\nAgain, I find it very funky that I need to add the `//entry[id=&#39;%s&#39;]` when I&#39;m basing my search on the `targetEntry`, but apparently that&#39;s how it works.\r\n\r\nIf anyone can think of a cleaner solution for this mess, please post it here.\r\n\r\n---\r\nEDIT:\r\n\r\nThanks to one of @Michael Kay &#39;s comments below, I was now able to simplify it to this:\r\n\r\n```\r\npublic String getTargetNodeModified(XPathNodes entries) {\r\n\tNode targetEntry = getTargetNode(entries);\r\n\treturn evaluteXpath(targetEntry, &quot;.//*[local-name()=&#39;Modified&#39;]&quot;, String.class);\r\n}\r\n```","title":"Find XML node in d:-namespace in Java using XPath","body":"<p>For the record, I have now found something that works. I don't think it's ideal, but it <em>does</em> get the job done.</p>\n<p>Basically, what I now do is rely on the fact that I can read the ID from a node once I have it, and then use that ID to build a complete XPath with the namespace-ignore-hack.</p>\n<p>The whole mess looks somewhat like this:</p>\n<pre><code>public String getTargetNodeModified(XPathNodes entries) {\n    Node targetEntry = getTargetNode(entries);\n    String targetEntryId = evaluteXpath(latestEntry, &quot;*&quot;, String.class);\n    String searchString = String.format(\n        &quot;//entry[id='%s']//*[local-name()='Modified']&quot;,\n        targetEntryId\n    );\n    return evaluteXpath(targetEntry, searchString, String.class);\n}\n\npublic &lt;T&gt; T evaluteXpath(Object object, String xPathString, Class&lt;T&gt; type) {\n    XPathExpression xPathExpression = xPath.compile(xPathString);\n    return xPathExpression.evaluateExpression(object, type);\n}   \n</code></pre>\n<p>Again, I find it very funky that I need to add the <code>//entry[id='%s']</code> when I'm basing my search on the <code>targetEntry</code>, but apparently that's how it works.</p>\n<p>If anyone can think of a cleaner solution for this mess, please post it here.</p>\n<hr />\n<p>EDIT:</p>\n<p>Thanks to one of @Michael Kay 's comments below, I was now able to simplify it to this:</p>\n<pre><code>public String getTargetNodeModified(XPathNodes entries) {\n    Node targetEntry = getTargetNode(entries);\n    return evaluteXpath(targetEntry, &quot;.//*[local-name()='Modified']&quot;, String.class);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":116746,"reputation":12467,"user_id":306030,"accept_rate":70,"display_name":"forty-two"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697837382,"creation_date":1697837382,"answer_id":77333859,"question_id":77329916,"body_markdown":"I think your problem stems from not realizing that the namespace prefixes in the input document does not have to match the prefixes used in the XPath expression. As long as the prefixes resolves to the same Namespace URIs, everything should be ok. Here&#39;s an example:\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        Document doc = ....\r\n\r\n        XPathFactory xpf = XPathFactory.newDefaultInstance();\r\n\r\n        XPath xp = xpf.newXPath();\r\n        xp.setNamespaceContext(new MyNamespaceContext());\r\n        String template = &quot;//a:entry[a:id=&#39;%s&#39;]//b:Modified&quot;;\r\n        String expr = String.format(template, &quot;c0a9aca5-2a1e-41e5-9da8-95fcd46d3109&quot;);\r\n        Element m = (Element) xp.evaluate(expr, doc, XPathConstants.NODE);\r\n        if (m != null) {\r\n            System.out.println(m.getTextContent());\r\n        }\r\n    }\r\n\r\n    static class MyNamespaceContext implements NamespaceContext {\r\n\r\n        private final Map&lt;String, String&gt; mappings = Map.of(\r\n                &quot;a&quot;, &quot;http://www.w3.org/2005/Atom&quot;,\r\n                &quot;b&quot;, &quot;http://schemas.microsoft.com/ado/2007/08/dataservices&quot;,\r\n                &quot;c&quot;, &quot;http://schemas.microsoft.com/ado/2007/08/dataservices/metadata&quot;\r\n                );\r\n\r\n        @Override\r\n        public String getNamespaceURI(String prefix) {\r\n            return mappings.get(prefix);\r\n        }\r\n        \r\n        // other methods returns null\r\n    }\r\n\r\nExecuting this against your sample prints:\r\n\r\n    2023-10-16T06:46:11Z\r\n","title":"Find XML node in d:-namespace in Java using XPath","body":"<p>I think your problem stems from not realizing that the namespace prefixes in the input document does not have to match the prefixes used in the XPath expression. As long as the prefixes resolves to the same Namespace URIs, everything should be ok. Here's an example:</p>\n<pre><code>public static void main(String[] args) throws Exception {\n    Document doc = ....\n\n    XPathFactory xpf = XPathFactory.newDefaultInstance();\n\n    XPath xp = xpf.newXPath();\n    xp.setNamespaceContext(new MyNamespaceContext());\n    String template = &quot;//a:entry[a:id='%s']//b:Modified&quot;;\n    String expr = String.format(template, &quot;c0a9aca5-2a1e-41e5-9da8-95fcd46d3109&quot;);\n    Element m = (Element) xp.evaluate(expr, doc, XPathConstants.NODE);\n    if (m != null) {\n        System.out.println(m.getTextContent());\n    }\n}\n\nstatic class MyNamespaceContext implements NamespaceContext {\n\n    private final Map&lt;String, String&gt; mappings = Map.of(\n            &quot;a&quot;, &quot;http://www.w3.org/2005/Atom&quot;,\n            &quot;b&quot;, &quot;http://schemas.microsoft.com/ado/2007/08/dataservices&quot;,\n            &quot;c&quot;, &quot;http://schemas.microsoft.com/ado/2007/08/dataservices/metadata&quot;\n            );\n\n    @Override\n    public String getNamespaceURI(String prefix) {\n        return mappings.get(prefix);\n    }\n    \n    // other methods returns null\n}\n</code></pre>\n<p>Executing this against your sample prints:</p>\n<pre><code>2023-10-16T06:46:11Z\n</code></pre>\n"}],"owner":{"account_id":12296207,"reputation":1838,"user_id":8971773,"accept_rate":25,"display_name":"Kira Resari"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77331046,"answer_count":2,"score":0,"last_activity_date":1698039638,"creation_date":1697795158,"question_id":77329916,"body_markdown":"I have an XML file of which I want to address a certain element in Java using an XPath. The problem is that the element is in the d:-namespace, and everything I have tried to add the namespace to the XPath according to the topics on this that I have found did not work. Is the d:-namespace a special namespace that follows different rules?\r\n\r\nFor reference, here is the XML I am trying to work with:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;feed xml:base=&quot;https://company.com/organisation/_api/&quot;\r\n\txmlns=&quot;http://www.w3.org/2005/Atom&quot;\r\n\txmlns:d=&quot;http://schemas.microsoft.com/ado/2007/08/dataservices&quot;\r\n\txmlns:m=&quot;http://schemas.microsoft.com/ado/2007/08/dataservices/metadata&quot;&gt;\r\n\t&lt;entry m:etag=&quot;&amp;quot;3&amp;quot;&quot;&gt;\r\n\t\t&lt;id&gt;067d7924-2a19-4094-b588-347b0869a19c&lt;/id&gt;\r\n\t\t&lt;content type=&quot;application/xml&quot;&gt;\r\n\t\t\t&lt;m:properties&gt;\r\n\t\t\t\t&lt;d:Modified m:type=&quot;Edm.DateTime&quot;&gt;2023-10-06T11:02:47Z&lt;/d:Modified&gt;\r\n\t\t\t&lt;/m:properties&gt;\r\n\t\t&lt;/content&gt;\r\n\t&lt;/entry&gt;\r\n\t&lt;entry m:etag=&quot;&amp;quot;6&amp;quot;&quot;&gt;\r\n\t\t&lt;id&gt;c0a9aca5-2a1e-41e5-9da8-95fcd46d3109&lt;/id&gt;\r\n\t\t&lt;content type=&quot;application/xml&quot;&gt;\r\n\t\t\t&lt;m:properties&gt;\r\n\t\t\t\t&lt;d:Modified m:type=&quot;Edm.DateTime&quot;&gt;2023-10-16T06:46:11Z&lt;/d:Modified&gt;\r\n\t\t\t&lt;/m:properties&gt;\r\n\t\t&lt;/content&gt;\r\n\t&lt;/entry&gt;\r\n&lt;/feed&gt;\r\n```\r\n\r\nEffectively, I am first getting a list of both entries as `XPathNodes` via the XPath `/feed/entry`, then iterate over them and trying to get the Modified dates via the XPath `//d:Modified`. In theory, that should work, but in practice, it always returns me an empty string.\r\n\r\nI have tried the following for adding the namespace to the XPath, but without any success so far:\r\n\r\nOption A (the answer I found on other threads):\r\n\r\n```\r\n        XPathFactory xf = XPathFactory.newInstance();\r\n        XPath xpath = XPathFactory.newInstance().newXPath();\r\n        xpath.setNamespaceContext(new NamespaceContext() {\r\n            @Override\r\n            public String getNamespaceURI(String prefix) {\r\n                if (&quot;d&quot;.equals(prefix)) {\r\n                    return &quot;http://schemas.microsoft.com/ado/2007/08/dataservices&quot;;\r\n                }\r\n                return null; // Return null for other prefixes\r\n            }\r\n\r\n            @Override\r\n            public String getPrefix(String namespaceURI) {\r\n                throw new UnsupportedOperationException();\r\n            }\r\n\r\n            @Override\r\n            public Iterator&lt;String&gt; getPrefixes(String namespaceURI) {\r\n                throw new UnsupportedOperationException();\r\n            }\r\n        });\r\n```\r\nOption B (something I tried myself):\r\n```\r\n\t\tXPathFactory xf = XPathFactory.newInstance();\r\n\t\tSimpleNamespaceContext namespaceContext = new SimpleNamespaceContext();\r\n\t\tnamespaceContext.bindNamespaceUri(&quot;d&quot;, &quot;http://schemas.microsoft.com/ado/2007/08/dataservices&quot;);\r\n\t\txPath = xf.newXPath();\r\n\t\txPath.setNamespaceContext(namespaceContext);\r\n```\r\n\r\nOption C (if I do it like that, the code I use to get the entries no longer works and the XPathNodes contains 0 entries)\r\n```\r\n\t\tDocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\r\n\t\tfactory.setNamespaceAware(true);\r\n\t\tDocumentBuilder builder = factory.newDocumentBuilder();\r\n```\r\n\r\nI have also tried accessing it via the XPath `//*[local-name()=&#39;Modified&#39;]`, but the problem with that is that even if I am already in one specific entry, it still returns to me the Modified nodes of *both* entries (which confused me at first until I realized that all nodes apparently still contain the entire document tree). If I try to access something inside the nodes such as the id (via `//id`), it works nicely and returns just that one correct node. It just doesn&#39;t work with anything in that weird d:-namespace, and I have no idea why.\r\n\r\nCan anyone tell me what I am doing wrong here?\r\n\r\n---\r\n\r\nEDIT:\r\n\r\nTo clarify, my aim is to find all entries, iterate over them and get their &quot;Modified&quot; dates so I can work with that. In essence, this is how I imagine that should look like, but I tried and it doesn&#39;t work that way, forcing me to use the workaround with the node ID and the namespace breaking.\r\n```\r\nNode getMostRecentNode(){\r\n\tDocument document = getDocument();\r\n\tXPathNodes entries = evaluteXpath(itemsDocument, &quot;/feed/entry&quot;, XPathNodes.class);\r\n\tfor (int index = 1; index &lt; entries.size(); index++) {\r\n\t\tNode entry = entries.get(index);\r\n\t\tString modifiedString = evaluteXpath(entry, &quot;//d:Modified&quot;, String.class);\r\n\t\t[...logic for getting most recent node ...]\r\n\t}\r\n}\r\n```\r\nIs this something that could work if I got the namespaces right? Or do I already have an error in my understanding of how XPaths work at this stage?","title":"Find XML node in d:-namespace in Java using XPath","body":"<p>I have an XML file of which I want to address a certain element in Java using an XPath. The problem is that the element is in the d:-namespace, and everything I have tried to add the namespace to the XPath according to the topics on this that I have found did not work. Is the d:-namespace a special namespace that follows different rules?</p>\n<p>For reference, here is the XML I am trying to work with:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;feed xml:base=&quot;https://company.com/organisation/_api/&quot;\n    xmlns=&quot;http://www.w3.org/2005/Atom&quot;\n    xmlns:d=&quot;http://schemas.microsoft.com/ado/2007/08/dataservices&quot;\n    xmlns:m=&quot;http://schemas.microsoft.com/ado/2007/08/dataservices/metadata&quot;&gt;\n    &lt;entry m:etag=&quot;&amp;quot;3&amp;quot;&quot;&gt;\n        &lt;id&gt;067d7924-2a19-4094-b588-347b0869a19c&lt;/id&gt;\n        &lt;content type=&quot;application/xml&quot;&gt;\n            &lt;m:properties&gt;\n                &lt;d:Modified m:type=&quot;Edm.DateTime&quot;&gt;2023-10-06T11:02:47Z&lt;/d:Modified&gt;\n            &lt;/m:properties&gt;\n        &lt;/content&gt;\n    &lt;/entry&gt;\n    &lt;entry m:etag=&quot;&amp;quot;6&amp;quot;&quot;&gt;\n        &lt;id&gt;c0a9aca5-2a1e-41e5-9da8-95fcd46d3109&lt;/id&gt;\n        &lt;content type=&quot;application/xml&quot;&gt;\n            &lt;m:properties&gt;\n                &lt;d:Modified m:type=&quot;Edm.DateTime&quot;&gt;2023-10-16T06:46:11Z&lt;/d:Modified&gt;\n            &lt;/m:properties&gt;\n        &lt;/content&gt;\n    &lt;/entry&gt;\n&lt;/feed&gt;\n</code></pre>\n<p>Effectively, I am first getting a list of both entries as <code>XPathNodes</code> via the XPath <code>/feed/entry</code>, then iterate over them and trying to get the Modified dates via the XPath <code>//d:Modified</code>. In theory, that should work, but in practice, it always returns me an empty string.</p>\n<p>I have tried the following for adding the namespace to the XPath, but without any success so far:</p>\n<p>Option A (the answer I found on other threads):</p>\n<pre><code>        XPathFactory xf = XPathFactory.newInstance();\n        XPath xpath = XPathFactory.newInstance().newXPath();\n        xpath.setNamespaceContext(new NamespaceContext() {\n            @Override\n            public String getNamespaceURI(String prefix) {\n                if (&quot;d&quot;.equals(prefix)) {\n                    return &quot;http://schemas.microsoft.com/ado/2007/08/dataservices&quot;;\n                }\n                return null; // Return null for other prefixes\n            }\n\n            @Override\n            public String getPrefix(String namespaceURI) {\n                throw new UnsupportedOperationException();\n            }\n\n            @Override\n            public Iterator&lt;String&gt; getPrefixes(String namespaceURI) {\n                throw new UnsupportedOperationException();\n            }\n        });\n</code></pre>\n<p>Option B (something I tried myself):</p>\n<pre><code>        XPathFactory xf = XPathFactory.newInstance();\n        SimpleNamespaceContext namespaceContext = new SimpleNamespaceContext();\n        namespaceContext.bindNamespaceUri(&quot;d&quot;, &quot;http://schemas.microsoft.com/ado/2007/08/dataservices&quot;);\n        xPath = xf.newXPath();\n        xPath.setNamespaceContext(namespaceContext);\n</code></pre>\n<p>Option C (if I do it like that, the code I use to get the entries no longer works and the XPathNodes contains 0 entries)</p>\n<pre><code>        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\n        factory.setNamespaceAware(true);\n        DocumentBuilder builder = factory.newDocumentBuilder();\n</code></pre>\n<p>I have also tried accessing it via the XPath <code>//*[local-name()='Modified']</code>, but the problem with that is that even if I am already in one specific entry, it still returns to me the Modified nodes of <em>both</em> entries (which confused me at first until I realized that all nodes apparently still contain the entire document tree). If I try to access something inside the nodes such as the id (via <code>//id</code>), it works nicely and returns just that one correct node. It just doesn't work with anything in that weird d:-namespace, and I have no idea why.</p>\n<p>Can anyone tell me what I am doing wrong here?</p>\n<hr />\n<p>EDIT:</p>\n<p>To clarify, my aim is to find all entries, iterate over them and get their &quot;Modified&quot; dates so I can work with that. In essence, this is how I imagine that should look like, but I tried and it doesn't work that way, forcing me to use the workaround with the node ID and the namespace breaking.</p>\n<pre><code>Node getMostRecentNode(){\n    Document document = getDocument();\n    XPathNodes entries = evaluteXpath(itemsDocument, &quot;/feed/entry&quot;, XPathNodes.class);\n    for (int index = 1; index &lt; entries.size(); index++) {\n        Node entry = entries.get(index);\n        String modifiedString = evaluteXpath(entry, &quot;//d:Modified&quot;, String.class);\n        [...logic for getting most recent node ...]\n    }\n}\n</code></pre>\n<p>Is this something that could work if I got the namespaces right? Or do I already have an error in my understanding of how XPaths work at this stage?</p>\n"},{"tags":["java","spring-boot","google-cloud-pubsub","spring-cloud-gcp"],"answers":[{"tags":[],"owner":{"account_id":11733063,"reputation":156,"user_id":8587847,"display_name":"Md Alif Al Amin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698039061,"creation_date":1698039061,"answer_id":77342798,"question_id":77342398,"body_markdown":"You have to explicitly shutdown ***ManagedChannel*** instances when they are no longer needed. To close the channels to release resources.\r\n\r\nWhile using Spring Cloud GCP to work with Pub/Sub.you can explicitly shut down the **PubSubTemplate** and the associated channel when they are no longer needed. You can define a @PreDestroy method in your ***MessagePublisher*** bean to handle the shutdown, here is the code:\r\n\r\n    @PreDestroy\r\n    public void shutdown() {\r\n        log.info(&quot;Shutting down PubSubTemplate and its channels...&quot;);\r\n        pubSubTemplate.getPublisherFactory().shutdown();\r\n    }\r\n\r\n\r\nThe @PreDestroy method is called when the Spring container is shutting down and can be used to perform cleanup tasks like closing resources.\r\n\r\n","title":"How to fix &quot;Previous Channel was not shutdown properly error&quot; when trying to publish multiple messages to GCP Pubsub topic","body":"<p>You have to explicitly shutdown <em><strong>ManagedChannel</strong></em> instances when they are no longer needed. To close the channels to release resources.</p>\n<p>While using Spring Cloud GCP to work with Pub/Sub.you can explicitly shut down the <strong>PubSubTemplate</strong> and the associated channel when they are no longer needed. You can define a @PreDestroy method in your <em><strong>MessagePublisher</strong></em> bean to handle the shutdown, here is the code:</p>\n<pre><code>@PreDestroy\npublic void shutdown() {\n    log.info(&quot;Shutting down PubSubTemplate and its channels...&quot;);\n    pubSubTemplate.getPublisherFactory().shutdown();\n}\n</code></pre>\n<p>The @PreDestroy method is called when the Spring container is shutting down and can be used to perform cleanup tasks like closing resources.</p>\n"}],"owner":{"account_id":375036,"reputation":3318,"user_id":725619,"accept_rate":53,"display_name":"RKodakandla"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698039061,"creation_date":1698029122,"question_id":77342398,"body_markdown":"I&#39;m trying to publish messages to GCP pubsub topic using Spring Boot framework. Occasionally running into errors where it says managed channel was not shutdown but I&#39;m not sure where exactly I need to shut it down. \r\n\r\n**GCPPublisherConfig.java**\r\n\r\n    @Configuration\r\n    @RequiredArgsConstructor\r\n    public class GCPPublisherConfig {\r\n    \r\n        private final AppProperties appProperties;\r\n    \r\n        @Bean\r\n        public PublisherFactory publisherFactory(CredentialsProvider defaultCredentialsProvider) {\r\n            DefaultPublisherFactory factory = new DefaultPublisherFactory(() -&gt; appProperties.getPubsubProjectId());\r\n            factory.setEnableMessageOrdering(true);\r\n            factory.setCredentialsProvider(defaultCredentialsProvider);\r\n            return factory;\r\n        }\r\n    \r\n        @Bean\r\n        public PubSubTemplate pubSubTemplate(\r\n                PublisherFactory publisherFactory, SubscriberFactory subscriberFactory) {\r\n            return new PubSubTemplate(publisherFactory, subscriberFactory);\r\n        }\r\n    \r\n    }\r\n\r\n**MessagePublisher.java**\r\n\r\n    @RequiredArgsConstructor\r\n    @Component\r\n    public class MessagePublisher {\r\n    \r\n        private final PubSubTemplate pubSubTemplate;\r\n        private final AppProperties appProperties;\r\n        private final Gson gson;\r\n    \r\n        public Mono&lt;String&gt; publishMessageToGcpTopic(Message message, String orderingKey){\r\n            log.info(&quot;publishing message to pubsub topic&quot;);\r\n    \r\n            PubsubMessage msgToPublish = PubsubMessage.newBuilder()\r\n                    .setData(ByteString.copyFromUtf8(gson.toJson(message)))\r\n                    .setOrderingKey(orderingKey)\r\n                    .build();\r\n    \r\n            return Mono.fromFuture(\r\n                    this.pubSubTemplate\r\n                    .publish(appProperties.getPubsubTopicId(), msgToPublish)\r\n                    .exceptionally(ex -&gt; {\r\n                        log.error(&quot;error when publishing messaging to gcp&quot;, ex);\r\n                        return &quot;0&quot;;\r\n                    }));\r\n        }\r\n    }\r\n\r\n**AppService.java**\r\n\r\n    @Override\r\n        public Flux&lt;Integer&gt; getData(){\r\n          // this is not the actual service logic. I have created this sample logic to reproduce the error.\r\n               return Flux.range(1, 1000)\r\n                        .map(it -&gt; {\r\n                            log.info(&quot;number - {}&quot;, it);\r\n                            return it;\r\n                        });\r\n        };\r\n\r\n**AppController.java**\r\n\r\n    @GetMapping(&quot;/publish/messages&quot;)\r\n        public Mono&lt;Boolean&gt; testMessages(){\r\n    \r\n            return appService.getData()\r\n                    .flatMap(it -&gt; {\r\n                        EdslMessage edslMessage = EdslMessage.builder().build();\r\n                        messagePublisher.publishMessageToGcpTopic(edslMessage, it);\r\n                        return Mono.just(true);\r\n                    })\r\n                    .switchIfEmpty(Mono.defer(() -&gt; {\r\n                        log.warn(&quot;No entries found for date less than current date&quot;);\r\n                        return Mono.just(false);\r\n                   }))\r\n                    .reduce((a, b) -&gt; a &amp;&amp; b);\r\n    }\r\n\r\n**Error Stacktrace**\r\n\r\n    [ctor-http-nio-3] i.g.i.ManagedChannelOrphanWrapper        : *~*~*~ Previous channel ManagedChannelImpl{logId=571, target=pubsub.googleapis.com:443} was not shutdown properly!!! ~*~*~*\r\n        Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.\r\n    \r\n    java.lang.RuntimeException: ManagedChannel allocation site\r\n    \tat io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.&lt;init&gt;(ManagedChannelOrphanWrapper.java:102)\r\n    \tat io.grpc.internal.ManagedChannelOrphanWrapper.&lt;init&gt;(ManagedChannelOrphanWrapper.java:60)\r\n    \tat io.grpc.internal.ManagedChannelOrphanWrapper.&lt;init&gt;(ManagedChannelOrphanWrapper.java:51)\r\n    \tat io.grpc.internal.ManagedChannelImplBuilder.build(ManagedChannelImplBuilder.java:631)\r\n    \tat io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:297)\r\n    \tat com.google.api.gax.grpc.InstantiatingGrpcChannelProvider.createSingleChannel(InstantiatingGrpcChannelProvider.java:391)\r\n    \tat com.google.api.gax.grpc.ChannelPool.&lt;init&gt;(ChannelPool.java:107)\r\n    \tat com.google.api.gax.grpc.ChannelPool.create(ChannelPool.java:85)\r\n    \tat com.google.api.gax.grpc.InstantiatingGrpcChannelProvider.createChannel(InstantiatingGrpcChannelProvider.java:237)\r\n    \tat com.google.api.gax.grpc.InstantiatingGrpcChannelProvider.getTransportChannel(InstantiatingGrpcChannelProvider.java:231)\r\n    \tat com.google.api.gax.rpc.ClientContext.create(ClientContext.java:236)\r\n    \tat com.google.cloud.pubsub.v1.stub.GrpcPublisherStub.create(GrpcPublisherStub.java:203)\r\n    \tat com.google.cloud.pubsub.v1.Publisher.&lt;init&gt;(Publisher.java:201)\r\n    \tat com.google.cloud.pubsub.v1.Publisher.&lt;init&gt;(Publisher.java:91)\r\n    \tat com.google.cloud.pubsub.v1.Publisher$Builder.build(Publisher.java:881)\r\n    \tat com.google.cloud.spring.pubsub.support.DefaultPublisherFactory.createPublisher(DefaultPublisherFactory.java:186)\r\n    \tat com.google.cloud.spring.pubsub.core.publisher.PubSubPublisherTemplate.publish(PubSubPublisherTemplate.java:94)\r\n    \tat com.google.cloud.spring.pubsub.core.PubSubTemplate.publish(PubSubTemplate.java:120)\r\n    \tat org.ascension.swe.myaccount.careteambuilder.replay.MessagePublisher.publishMessageToGcpTopic(MessagePublisher.java:33)\r\n    \tat org.ascension.swe.myaccount.careteambuilder.replay.TestController.lambda$testMessages$1(TestController.java:54)\r\n    \tat reactor.core.publisher.FluxFlatMap$FlatMapMain.onNext(FluxFlatMap.java:386)\r\n    \tat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)\r\n    \tat reactor.core.publisher.FluxRange$RangeSubscription.slowPath(FluxRange.java:156)\r\n    \tat reactor.core.publisher.FluxRange$RangeSubscription.request(FluxRange.java:111)\r\n    \tat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.request(FluxMapFuseable.java:171)\r\n    \tat reactor.core.publisher.FluxFlatMap$FlatMapMain.onSubscribe(FluxFlatMap.java:371)\r\n    \tat reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onSubscribe(FluxMapFuseable.java:96)\r\n    \tat reactor.core.publisher.FluxRange.subscribe(FluxRange.java:69)\r\n    \tat reactor.core.publisher.FluxFromMonoOperator.subscribe(FluxFromMonoOperator.java:83)\r\n    \tat reactor.core.publisher.FluxDeferContextual.subscribe(FluxDeferContextual.java:57)\r\n    \tat reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64)\r\n    \tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:165)\r\n    \tat reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79)\r\n    \tat reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:200)\r\n    \tat reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:200)\r\n    \tat reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.complete(MonoIgnoreThen.java:292)\r\n    \tat reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.onNext(MonoIgnoreThen.java:187)\r\n    \tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:158)\r\n    \tat reactor.core.publisher.MonoZip$ZipCoordinator.signal(MonoZip.java:293)\r\n    \tat reactor.core.publisher.MonoZip$ZipInner.onNext(MonoZip.java:474)\r\n    \tat reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onNext(MonoPeekTerminal.java:180)\r\n    \tat reactor.core.publisher.FluxDefaultIfEmpty$DefaultIfEmptySubscriber.onNext(FluxDefaultIfEmpty.java:122)\r\n    \tat reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onNext(FluxSwitchIfEmpty.java:74)\r\n    \tat reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79)\r\n    \tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:158)\r\n    \tat reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onNext(FluxContextWrite.java:107)\r\n    \tat reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onNext(FluxMapFuseable.java:299)\r\n    \tat reactor.core.publisher.FluxFilterFuseable$FilterFuseableConditionalSubscriber.onNext(FluxFilterFuseable.java:337)\r\n    \tat reactor.core.publisher.Operators$BaseFluxToMonoOperator.completePossiblyEmpty(Operators.java:2071)\r\n    \tat reactor.core.publisher.MonoCollect$CollectSubscriber.onComplete(MonoCollect.java:145)\r\n    \tat reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144)\r\n    \tat reactor.core.publisher.FluxPeek$PeekSubscriber.onComplete(FluxPeek.java:260)\r\n    \tat reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144)\r\n    \tat reactor.netty.channel.FluxReceive.onInboundComplete(FluxReceive.java:413)\r\n    \tat reactor.netty.channel.ChannelOperations.onInboundComplete(ChannelOperations.java:431)\r\n    \tat reactor.netty.http.server.HttpServerOperations.onInboundNext(HttpServerOperations.java:651)\r\n    \tat reactor.netty.channel.ChannelOperationsHandler.channelRead(ChannelOperationsHandler.java:113)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n    \tat reactor.netty.http.server.HttpTrafficHandler.channelRead(HttpTrafficHandler.java:276)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n    \tat io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:436)\r\n    \tat io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:346)\r\n    \tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:318)\r\n    \tat io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:251)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\r\n    \tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\r\n    \tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\r\n    \tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\r\n    \tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\r\n    \tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\r\n    \tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\r\n    \tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\r\n    \tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n    \tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n    \tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n    \tat java.base/java.lang.Thread.run(Thread.java:833)\r\n\r\n\r\n","title":"How to fix &quot;Previous Channel was not shutdown properly error&quot; when trying to publish multiple messages to GCP Pubsub topic","body":"<p>I'm trying to publish messages to GCP pubsub topic using Spring Boot framework. Occasionally running into errors where it says managed channel was not shutdown but I'm not sure where exactly I need to shut it down.</p>\n<p><strong>GCPPublisherConfig.java</strong></p>\n<pre><code>@Configuration\n@RequiredArgsConstructor\npublic class GCPPublisherConfig {\n\n    private final AppProperties appProperties;\n\n    @Bean\n    public PublisherFactory publisherFactory(CredentialsProvider defaultCredentialsProvider) {\n        DefaultPublisherFactory factory = new DefaultPublisherFactory(() -&gt; appProperties.getPubsubProjectId());\n        factory.setEnableMessageOrdering(true);\n        factory.setCredentialsProvider(defaultCredentialsProvider);\n        return factory;\n    }\n\n    @Bean\n    public PubSubTemplate pubSubTemplate(\n            PublisherFactory publisherFactory, SubscriberFactory subscriberFactory) {\n        return new PubSubTemplate(publisherFactory, subscriberFactory);\n    }\n\n}\n</code></pre>\n<p><strong>MessagePublisher.java</strong></p>\n<pre><code>@RequiredArgsConstructor\n@Component\npublic class MessagePublisher {\n\n    private final PubSubTemplate pubSubTemplate;\n    private final AppProperties appProperties;\n    private final Gson gson;\n\n    public Mono&lt;String&gt; publishMessageToGcpTopic(Message message, String orderingKey){\n        log.info(&quot;publishing message to pubsub topic&quot;);\n\n        PubsubMessage msgToPublish = PubsubMessage.newBuilder()\n                .setData(ByteString.copyFromUtf8(gson.toJson(message)))\n                .setOrderingKey(orderingKey)\n                .build();\n\n        return Mono.fromFuture(\n                this.pubSubTemplate\n                .publish(appProperties.getPubsubTopicId(), msgToPublish)\n                .exceptionally(ex -&gt; {\n                    log.error(&quot;error when publishing messaging to gcp&quot;, ex);\n                    return &quot;0&quot;;\n                }));\n    }\n}\n</code></pre>\n<p><strong>AppService.java</strong></p>\n<pre><code>@Override\n    public Flux&lt;Integer&gt; getData(){\n      // this is not the actual service logic. I have created this sample logic to reproduce the error.\n           return Flux.range(1, 1000)\n                    .map(it -&gt; {\n                        log.info(&quot;number - {}&quot;, it);\n                        return it;\n                    });\n    };\n</code></pre>\n<p><strong>AppController.java</strong></p>\n<pre><code>@GetMapping(&quot;/publish/messages&quot;)\n    public Mono&lt;Boolean&gt; testMessages(){\n\n        return appService.getData()\n                .flatMap(it -&gt; {\n                    EdslMessage edslMessage = EdslMessage.builder().build();\n                    messagePublisher.publishMessageToGcpTopic(edslMessage, it);\n                    return Mono.just(true);\n                })\n                .switchIfEmpty(Mono.defer(() -&gt; {\n                    log.warn(&quot;No entries found for date less than current date&quot;);\n                    return Mono.just(false);\n               }))\n                .reduce((a, b) -&gt; a &amp;&amp; b);\n}\n</code></pre>\n<p><strong>Error Stacktrace</strong></p>\n<pre><code>[ctor-http-nio-3] i.g.i.ManagedChannelOrphanWrapper        : *~*~*~ Previous channel ManagedChannelImpl{logId=571, target=pubsub.googleapis.com:443} was not shutdown properly!!! ~*~*~*\n    Make sure to call shutdown()/shutdownNow() and wait until awaitTermination() returns true.\n\njava.lang.RuntimeException: ManagedChannel allocation site\n    at io.grpc.internal.ManagedChannelOrphanWrapper$ManagedChannelReference.&lt;init&gt;(ManagedChannelOrphanWrapper.java:102)\n    at io.grpc.internal.ManagedChannelOrphanWrapper.&lt;init&gt;(ManagedChannelOrphanWrapper.java:60)\n    at io.grpc.internal.ManagedChannelOrphanWrapper.&lt;init&gt;(ManagedChannelOrphanWrapper.java:51)\n    at io.grpc.internal.ManagedChannelImplBuilder.build(ManagedChannelImplBuilder.java:631)\n    at io.grpc.internal.AbstractManagedChannelImplBuilder.build(AbstractManagedChannelImplBuilder.java:297)\n    at com.google.api.gax.grpc.InstantiatingGrpcChannelProvider.createSingleChannel(InstantiatingGrpcChannelProvider.java:391)\n    at com.google.api.gax.grpc.ChannelPool.&lt;init&gt;(ChannelPool.java:107)\n    at com.google.api.gax.grpc.ChannelPool.create(ChannelPool.java:85)\n    at com.google.api.gax.grpc.InstantiatingGrpcChannelProvider.createChannel(InstantiatingGrpcChannelProvider.java:237)\n    at com.google.api.gax.grpc.InstantiatingGrpcChannelProvider.getTransportChannel(InstantiatingGrpcChannelProvider.java:231)\n    at com.google.api.gax.rpc.ClientContext.create(ClientContext.java:236)\n    at com.google.cloud.pubsub.v1.stub.GrpcPublisherStub.create(GrpcPublisherStub.java:203)\n    at com.google.cloud.pubsub.v1.Publisher.&lt;init&gt;(Publisher.java:201)\n    at com.google.cloud.pubsub.v1.Publisher.&lt;init&gt;(Publisher.java:91)\n    at com.google.cloud.pubsub.v1.Publisher$Builder.build(Publisher.java:881)\n    at com.google.cloud.spring.pubsub.support.DefaultPublisherFactory.createPublisher(DefaultPublisherFactory.java:186)\n    at com.google.cloud.spring.pubsub.core.publisher.PubSubPublisherTemplate.publish(PubSubPublisherTemplate.java:94)\n    at com.google.cloud.spring.pubsub.core.PubSubTemplate.publish(PubSubTemplate.java:120)\n    at org.ascension.swe.myaccount.careteambuilder.replay.MessagePublisher.publishMessageToGcpTopic(MessagePublisher.java:33)\n    at org.ascension.swe.myaccount.careteambuilder.replay.TestController.lambda$testMessages$1(TestController.java:54)\n    at reactor.core.publisher.FluxFlatMap$FlatMapMain.onNext(FluxFlatMap.java:386)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onNext(FluxMapFuseable.java:129)\n    at reactor.core.publisher.FluxRange$RangeSubscription.slowPath(FluxRange.java:156)\n    at reactor.core.publisher.FluxRange$RangeSubscription.request(FluxRange.java:111)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.request(FluxMapFuseable.java:171)\n    at reactor.core.publisher.FluxFlatMap$FlatMapMain.onSubscribe(FluxFlatMap.java:371)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableSubscriber.onSubscribe(FluxMapFuseable.java:96)\n    at reactor.core.publisher.FluxRange.subscribe(FluxRange.java:69)\n    at reactor.core.publisher.FluxFromMonoOperator.subscribe(FluxFromMonoOperator.java:83)\n    at reactor.core.publisher.FluxDeferContextual.subscribe(FluxDeferContextual.java:57)\n    at reactor.core.publisher.InternalMonoOperator.subscribe(InternalMonoOperator.java:64)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:165)\n    at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79)\n    at reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:200)\n    at reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:200)\n    at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.complete(MonoIgnoreThen.java:292)\n    at reactor.core.publisher.MonoIgnoreThen$ThenIgnoreMain.onNext(MonoIgnoreThen.java:187)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:158)\n    at reactor.core.publisher.MonoZip$ZipCoordinator.signal(MonoZip.java:293)\n    at reactor.core.publisher.MonoZip$ZipInner.onNext(MonoZip.java:474)\n    at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onNext(MonoPeekTerminal.java:180)\n    at reactor.core.publisher.FluxDefaultIfEmpty$DefaultIfEmptySubscriber.onNext(FluxDefaultIfEmpty.java:122)\n    at reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onNext(FluxSwitchIfEmpty.java:74)\n    at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onNext(FluxOnErrorResume.java:79)\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:158)\n    at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onNext(FluxContextWrite.java:107)\n    at reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onNext(FluxMapFuseable.java:299)\n    at reactor.core.publisher.FluxFilterFuseable$FilterFuseableConditionalSubscriber.onNext(FluxFilterFuseable.java:337)\n    at reactor.core.publisher.Operators$BaseFluxToMonoOperator.completePossiblyEmpty(Operators.java:2071)\n    at reactor.core.publisher.MonoCollect$CollectSubscriber.onComplete(MonoCollect.java:145)\n    at reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144)\n    at reactor.core.publisher.FluxPeek$PeekSubscriber.onComplete(FluxPeek.java:260)\n    at reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144)\n    at reactor.netty.channel.FluxReceive.onInboundComplete(FluxReceive.java:413)\n    at reactor.netty.channel.ChannelOperations.onInboundComplete(ChannelOperations.java:431)\n    at reactor.netty.http.server.HttpServerOperations.onInboundNext(HttpServerOperations.java:651)\n    at reactor.netty.channel.ChannelOperationsHandler.channelRead(ChannelOperationsHandler.java:113)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n    at reactor.netty.http.server.HttpTrafficHandler.channelRead(HttpTrafficHandler.java:276)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n    at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:436)\n    at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:346)\n    at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:318)\n    at io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:251)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412)\n    at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420)\n    at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\n    at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\n    at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)\n    at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)\n    at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\n    at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\n    at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\n    at java.base/java.lang.Thread.run(Thread.java:833)\n</code></pre>\n"},{"tags":["java","spring","spring-cloud-gateway"],"owner":{"account_id":21290524,"reputation":53,"user_id":15667610,"display_name":"Camille Ferrous"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698038258,"creation_date":1697968481,"question_id":77339452,"body_markdown":"I just started learning spring cloud gateway. I have created a custom GlobalFilter to check the access-key in the request header.The official Spring Cloud Gateway documentation states that a GlobalFilter does not require any configuration and can be activated simply by adding the @Component annotation. I followed this method, but it did not work.\r\nwhen i send a request to gateway ,it just redirect it to backend without filtering it .\r\n\r\nmy springboot version is 3.1.4 and\r\npom.xml is following:\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-cloud-gateway-webflux&lt;/artifactId&gt;\r\n    &lt;version&gt;4.0.6&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-cloud-gateway-server&lt;/artifactId&gt;\r\n    &lt;version&gt;4.0.6&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\nhere is ApiApplication code :\r\n```\r\n@RestController\r\n@SpringBootApplication\r\npublic class ApiApplication {\r\n\r\n    private String home=&quot;http://localhost:8080&quot;;\r\n\r\n    private static final Logger logger = LoggerFactory.getLogger(ApiApplication.class);\r\n\r\n\r\n    @GetMapping(&quot;/test&quot;)\r\n    public Mono&lt;ResponseEntity&lt;byte[]&gt;&gt; proxy(ProxyExchange&lt;byte[]&gt; proxy){\r\n        return proxy.uri(home + &quot;/cves&quot;).get();\r\n    }\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(ApiApplication.class, args);}\r\n```\r\nhere is my custom filter code :\r\n\r\n```\r\n@Component\r\npublic class ApiKeyFilter implements GlobalFilter, Ordered {\r\n\r\n    private static final Logger log = LoggerFactory.getLogger(ApiKeyFilter.class);\r\n    \r\n    @Override\r\n    public Mono&lt;Void&gt; filter(ServerWebExchange exchange, GatewayFilterChain chain) {\r\n        String apiKey = exchange.getRequest().getHeaders().getFirst(&quot;access-key&quot;);\r\n        System.out.println(apiKey);\r\n        log.info(&quot;ApiKeyFilter is being called&quot;);\r\n        if (!isValid(apiKey)) {\r\n            exchange.getResponse().setStatusCode(HttpStatusCode.valueOf(HttpStatus.UNAUTHORIZED));\r\n            return exchange.getResponse().setComplete();\r\n        }\r\n    \r\n        return chain.filter(exchange);\r\n    }\r\n    \r\n    private boolean isValid(String apiKey) {\r\n        return &quot;123&quot;.equals(apiKey);\r\n    }\r\n    \r\n    @Override\r\n    public int getOrder() {\r\n        return -100;\r\n    }\r\n}\r\n```\r\nhere is application.yml :\r\n```\r\nspring: cloud: gateway: discovery: locator: enabled: false\r\n```\r\n\r\nAfter starting Spring Boot, I printed out the loaded beans and noticed that ApiKeyFilter had been loaded. However, when I added a breakpoint to its filter method for debugging, I discovered that the program did not enter the filter method at all. In addition, I also tried debugging the default GlobalFilters of Spring Cloud Gateway, such as RemoveCachedBodyFilter, and found that it was not taking effect either.\r\nIf there is any other information you need from me, I would be happy to provide it. Thank you very much for your help.","title":"spring cloud gateway GlobalFilter doesn&#39;t work","body":"<p>I just started learning spring cloud gateway. I have created a custom GlobalFilter to check the access-key in the request header.The official Spring Cloud Gateway documentation states that a GlobalFilter does not require any configuration and can be activated simply by adding the @Component annotation. I followed this method, but it did not work.\nwhen i send a request to gateway ,it just redirect it to backend without filtering it .</p>\n<p>my springboot version is 3.1.4 and\npom.xml is following:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-cloud-gateway-webflux&lt;/artifactId&gt;\n    &lt;version&gt;4.0.6&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-cloud-gateway-server&lt;/artifactId&gt;\n    &lt;version&gt;4.0.6&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>here is ApiApplication code :</p>\n<pre><code>@RestController\n@SpringBootApplication\npublic class ApiApplication {\n\n    private String home=&quot;http://localhost:8080&quot;;\n\n    private static final Logger logger = LoggerFactory.getLogger(ApiApplication.class);\n\n\n    @GetMapping(&quot;/test&quot;)\n    public Mono&lt;ResponseEntity&lt;byte[]&gt;&gt; proxy(ProxyExchange&lt;byte[]&gt; proxy){\n        return proxy.uri(home + &quot;/cves&quot;).get();\n    }\n    public static void main(String[] args) {\n        SpringApplication.run(ApiApplication.class, args);}\n</code></pre>\n<p>here is my custom filter code :</p>\n<pre><code>@Component\npublic class ApiKeyFilter implements GlobalFilter, Ordered {\n\n    private static final Logger log = LoggerFactory.getLogger(ApiKeyFilter.class);\n    \n    @Override\n    public Mono&lt;Void&gt; filter(ServerWebExchange exchange, GatewayFilterChain chain) {\n        String apiKey = exchange.getRequest().getHeaders().getFirst(&quot;access-key&quot;);\n        System.out.println(apiKey);\n        log.info(&quot;ApiKeyFilter is being called&quot;);\n        if (!isValid(apiKey)) {\n            exchange.getResponse().setStatusCode(HttpStatusCode.valueOf(HttpStatus.UNAUTHORIZED));\n            return exchange.getResponse().setComplete();\n        }\n    \n        return chain.filter(exchange);\n    }\n    \n    private boolean isValid(String apiKey) {\n        return &quot;123&quot;.equals(apiKey);\n    }\n    \n    @Override\n    public int getOrder() {\n        return -100;\n    }\n}\n</code></pre>\n<p>here is application.yml :</p>\n<pre><code>spring: cloud: gateway: discovery: locator: enabled: false\n</code></pre>\n<p>After starting Spring Boot, I printed out the loaded beans and noticed that ApiKeyFilter had been loaded. However, when I added a breakpoint to its filter method for debugging, I discovered that the program did not enter the filter method at all. In addition, I also tried debugging the default GlobalFilters of Spring Cloud Gateway, such as RemoveCachedBodyFilter, and found that it was not taking effect either.\nIf there is any other information you need from me, I would be happy to provide it. Thank you very much for your help.</p>\n"},{"tags":["java","rest","httprequest","java-http-client"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":2,"creation_date":1642902411,"post_id":70817285,"comment_id":125196366,"body_markdown":"Always use a synchronous call, unless you have a specific reason not to.  It’s simpler and easier to follow.  An asynchronous call might make sense when you want to make sure the current thread does not get held up due the speed of the network, such as when making a call from a Swing and JavaFX application.","body":"Always use a synchronous call, unless you have a specific reason not to.  It’s simpler and easier to follow.  An asynchronous call might make sense when you want to make sure the current thread does not get held up due the speed of the network, such as when making a call from a Swing and JavaFX application."},{"owner":{"account_id":9443476,"reputation":481,"user_id":12645782,"display_name":"Kotaka Danski"},"score":0,"creation_date":1642922010,"post_id":70817285,"comment_id":125198699,"body_markdown":"@VGR All right. A synchronous call is indeed so much easier to implement. Especially since my task is to provide an API, not a GUI or Console app, I guess it would really be an overkill. Thanks.","body":"@VGR All right. A synchronous call is indeed so much easier to implement. Especially since my task is to provide an API, not a GUI or Console app, I guess it would really be an overkill. Thanks."}],"answers":[{"tags":[],"owner":{"account_id":234929,"reputation":909,"user_id":501399,"accept_rate":83,"display_name":"vadipp"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698037741,"creation_date":1698037741,"answer_id":77342737,"question_id":70817285,"body_markdown":"1. Async HTTP requests are good in case you need to make many requests in parallel, because you are saving on native thread overhead. This is especially true, if it takes a long time to receive the response from the server. (However, if you are using Virtual threads released in Java 21, this is becoming less relevant).\r\n1. Async requests might be good if you need to make several HTTP requests in parallel, and return any first response that you get, while cancelling other requests.\r\n1. You will have to make async requests, if you are writing code inside an async context already, for example, an asynchronous Spring controller method.","title":"Java HttpClient synchronous vs asynchronous request","body":"<ol>\n<li>Async HTTP requests are good in case you need to make many requests in parallel, because you are saving on native thread overhead. This is especially true, if it takes a long time to receive the response from the server. (However, if you are using Virtual threads released in Java 21, this is becoming less relevant).</li>\n<li>Async requests might be good if you need to make several HTTP requests in parallel, and return any first response that you get, while cancelling other requests.</li>\n<li>You will have to make async requests, if you are writing code inside an async context already, for example, an asynchronous Spring controller method.</li>\n</ol>\n"}],"owner":{"account_id":9443476,"reputation":481,"user_id":12645782,"display_name":"Kotaka Danski"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":672,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698037741,"creation_date":1642886825,"question_id":70817285,"body_markdown":"The Java `HttpClient` can send either a synchronous or an asynchronous request. The synchronous method blocks until a response has been received, while the asynchronous does not. But what does this mean for a developer? Generally speaking, I assume that asynchronous should be more efficient. Yet, the fact that synchronous requests exist, means that there are usages for them as well. So the question is:\r\nWhen should I send a synchronous request and when should I send an asynchronous? \r\nMy assumption is there is no specific rule on this but there should be some well-known cases, when one is a particularly better option than the other. \r\n&lt;br&gt; In my current case, I am trying to write an app for searching articles from a web API, which has paging. However, my question is not just about this particular case. I&#39;d like to receive some general tips on how to chose one of the two approaches, as well. ","title":"Java HttpClient synchronous vs asynchronous request","body":"<p>The Java <code>HttpClient</code> can send either a synchronous or an asynchronous request. The synchronous method blocks until a response has been received, while the asynchronous does not. But what does this mean for a developer? Generally speaking, I assume that asynchronous should be more efficient. Yet, the fact that synchronous requests exist, means that there are usages for them as well. So the question is:\nWhen should I send a synchronous request and when should I send an asynchronous?\nMy assumption is there is no specific rule on this but there should be some well-known cases, when one is a particularly better option than the other.\n<br> In my current case, I am trying to write an app for searching articles from a web API, which has paging. However, my question is not just about this particular case. I'd like to receive some general tips on how to chose one of the two approaches, as well.</p>\n"},{"tags":["java","selenium-webdriver","testng","jxl"],"comments":[{"owner":{"account_id":1970066,"reputation":7766,"user_id":1769273,"accept_rate":74,"display_name":"Nathan Merrill"},"score":0,"creation_date":1393352318,"post_id":22021793,"comment_id":33383974,"body_markdown":"Well, from this code it looks like you know how data providers work.  All you need to do is give it a 3-D array of String, and it will pass the innermost array to the test.","body":"Well, from this code it looks like you know how data providers work.  All you need to do is give it a 3-D array of String, and it will pass the innermost array to the test."},{"owner":{"account_id":2106302,"reputation":945,"user_id":1872565,"accept_rate":62,"display_name":"Learner"},"score":0,"creation_date":1393381162,"post_id":22021793,"comment_id":33398031,"body_markdown":"Iam new to this can you please help me in doing this,","body":"Iam new to this can you please help me in doing this,"},{"owner":{"account_id":2106302,"reputation":945,"user_id":1872565,"accept_rate":62,"display_name":"Learner"},"score":0,"creation_date":1393417037,"post_id":22021793,"comment_id":33416310,"body_markdown":"Hi MrTi, Can you please help me, or give a link to solve this, iam striuck here, Not able to proceed further.","body":"Hi MrTi, Can you please help me, or give a link to solve this, iam striuck here, Not able to proceed further."},{"owner":{"account_id":1970066,"reputation":7766,"user_id":1769273,"accept_rate":74,"display_name":"Nathan Merrill"},"score":0,"creation_date":1393424538,"post_id":22021793,"comment_id":33421991,"body_markdown":"I&#39;m personally against giving out code.  However, I am not against helping you.  Do you understand how arrays work?  If not, there are plenty of resources to help you there.  If you do, what exactly don&#39;t you understand?","body":"I&#39;m personally against giving out code.  However, I am not against helping you.  Do you understand how arrays work?  If not, there are plenty of resources to help you there.  If you do, what exactly don&#39;t you understand?"},{"owner":{"account_id":2106302,"reputation":945,"user_id":1872565,"accept_rate":62,"display_name":"Learner"},"score":0,"creation_date":1393432206,"post_id":22021793,"comment_id":33427953,"body_markdown":"Hi Thanks for Replying, i was trying to give like this   @DataProvider(name = &quot;DP1&quot;)\npublic Object[][][] createData1() throws Exception{\n  \t Object[][][] retObjArr=getTableArray(&quot;G:\\\\Selenium Jar Files\\\\TestData\\\\Data.xls&quot;,&quot;DataPool&quot;);\n    return (retObjArr);\n   \n}                                                                   public Object[][][] getTableArray(String xlFilePath,String sheetName) throws Exception{\n    Object[][][] tabArray=null;","body":"Hi Thanks for Replying, i was trying to give like this   @DataProvider(name = &quot;DP1&quot;) public Object[][][] createData1() throws Exception{   \t Object[][][] retObjArr=getTableArray(&quot;G:\\\\Selenium Jar Files\\\\TestData\\\\Data.xls&quot;,&quot;DataPool&quot;);     return (retObjArr);     }                                                                   public Object[][][] getTableArray(String xlFilePath,String sheetName) throws Exception{     Object[][][] tabArray=null;"},{"owner":{"account_id":1970066,"reputation":7766,"user_id":1769273,"accept_rate":74,"display_name":"Nathan Merrill"},"score":0,"creation_date":1393432453,"post_id":22021793,"comment_id":33428168,"body_markdown":"Please add the code to your description above.  What error is being thrown?","body":"Please add the code to your description above.  What error is being thrown?"}],"answers":[{"tags":[],"owner":{"account_id":1970066,"reputation":7766,"user_id":1769273,"accept_rate":74,"display_name":"Nathan Merrill"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1393433706,"creation_date":1393433706,"answer_id":22048051,"question_id":22021793,"body_markdown":"This is how a `@DataProvider` works, assuming I have the following array:\r\n\r\n    [[value1, value2],\r\n     [value3, value4],\r\n     [value5, value6]]\r\n\r\nNote that there are 3 rows and 2 columns.  The Test will be run 3 times, and passed in 2 values each time.  It doesn&#39;t matter what the value is.\r\n\r\nNow, if you want the test to only be run once, your array should look like this:\r\n\r\n    [[value1]]\r\n\r\nWe can make `value1` to be whatever we want it to be, so if `value1` is the array above, then it will pass in the entire array to the dataProvider.  Thus, your return statement should return `{{tabArray}}`\r\n\r\n","title":"TestNG: Iterate through array using the Dataprovider","body":"<p>This is how a <code>@DataProvider</code> works, assuming I have the following array:</p>\n\n<pre><code>[[value1, value2],\n [value3, value4],\n [value5, value6]]\n</code></pre>\n\n<p>Note that there are 3 rows and 2 columns.  The Test will be run 3 times, and passed in 2 values each time.  It doesn't matter what the value is.</p>\n\n<p>Now, if you want the test to only be run once, your array should look like this:</p>\n\n<pre><code>[[value1]]\n</code></pre>\n\n<p>We can make <code>value1</code> to be whatever we want it to be, so if <code>value1</code> is the array above, then it will pass in the entire array to the dataProvider.  Thus, your return statement should return <code>{{tabArray}}</code></p>\n"},{"tags":[],"owner":{"account_id":5693312,"reputation":387,"user_id":4500645,"accept_rate":67,"display_name":"thekevinmonster"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1424466434,"creation_date":1424464300,"answer_id":28637667,"question_id":22021793,"body_markdown":"Looking at your code, you are trying to create a dataprovider function that returns Object[][][]. You cannot do that; the dataprovider function must return either Object[][] (a two dimensional array of any Object), or an Iterator&lt;Object[]&gt; which will perform the same function but in a slightly different way.\r\n\r\nYou can certainly nest another array inside of the 2D array that is returned; that is why it is Object[][] and not a specific type. \r\n\r\nAlso make sure you construct your return result correctly. For example, you can&#39;t do the following because that does not construct the Object[][] array:\r\n\r\n    return {{myArray}};\r\n\r\nInstead, you would do this:\r\n\r\n    return new Object[][]{{myArray}};\r\n\r\n\r\n","title":"TestNG: Iterate through array using the Dataprovider","body":"<p>Looking at your code, you are trying to create a dataprovider function that returns Object[][][]. You cannot do that; the dataprovider function must return either Object[][] (a two dimensional array of any Object), or an Iterator which will perform the same function but in a slightly different way.</p>\n\n<p>You can certainly nest another array inside of the 2D array that is returned; that is why it is Object[][] and not a specific type. </p>\n\n<p>Also make sure you construct your return result correctly. For example, you can't do the following because that does not construct the Object[][] array:</p>\n\n<pre><code>return {{myArray}};\n</code></pre>\n\n<p>Instead, you would do this:</p>\n\n<pre><code>return new Object[][]{{myArray}};\n</code></pre>\n"},{"tags":[],"owner":{"account_id":40774,"reputation":28739,"user_id":118228,"accept_rate":85,"display_name":"djangofan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1424467432,"creation_date":1424467049,"answer_id":28638371,"question_id":22021793,"body_markdown":"I think [jxl][1] is harder than it needs to be.  I wrote an example of a TestNG DataProvider [reading Excel data][2] using [Apache MetaModel][3] (which recently became a full fledged Apache project) , and you can find that [here][4].\r\n\r\n    public static Object[][] getCsvData( File csvFile ) \r\n    \t{\t\r\n    \t\tCsvConfiguration conf = new CsvConfiguration( 1 );\r\n    \t\tDataContext csvContext = DataContextFactory.createCsvDataContext( csvFile, conf );\r\n    \t\tSchema schema = csvContext.getDefaultSchema();\r\n    \t\tTable[] tables = schema.getTables();\r\n    \t\tTable table = tables[0]; // a representation of the csv file name including extension\r\n    \t\tDataSet dataSet = csvContext.query()\r\n    \t\t\t\t.from( table )\r\n    \t\t\t\t.selectAll()\r\n    \t\t\t\t.where(&quot;run&quot;).eq(&quot;Y&quot;)\r\n    \t\t\t\t.execute();\r\n    \t\tList&lt;Row&gt; rows = dataSet.toRows();\r\n    \t\tObject[][] myArray = get2ArgArrayFromRows( rows );\r\n    \t\treturn myArray;\r\n    \t}\r\n\r\nAnd second part of that:\r\n\r\n    public static Object[][] get2ArgArrayFromRows( List&lt;Row&gt; rows ) {\r\n    \t\tObject[][] myArray = new Object[rows.size()][2];\r\n    \t\tint i = 0;\r\n    \t\tSelectItem[] cols = rows.get(0).getSelectItems();\r\n    \t\tfor ( Row r : rows ) {\r\n    \t\t\tObject[] data = r.getValues();\r\n    \t\t\tfor ( int j = 0; j &lt; cols.length; j++ ) {\r\n    \t\t\t\tif ( data[j] == null ) data[j] = &quot;&quot;; // force empty string where there are NULL values\r\n    \t\t\t}\r\n    \t\t\tmyArray[i][0] = cols;\r\n    \t\t\tmyArray[i][1] = data;\r\n    \t\t\ti++;\r\n    \t\t}\r\n    \t\tlogger.info( &quot;Row count: &quot; + rows.size() );\r\n    \t\tlogger.info( &quot;Column names: &quot; + Arrays.toString( cols ) );\r\n    \t\treturn myArray;\r\n    \t}\r\n\r\nAnd an example of a test that uses this DataProvider:\r\n\r\n    @Test( dataProvider = &quot;csv&quot; )\r\n    public void testPrintCsvRowToLog( SelectItem[] cols, Object[] data ) {\r\n        String theCols = Joiner.on(&quot;|&quot;).join( cols );\r\n    \tString aRow = Joiner.on(&quot;|&quot;).join( data );\r\n    \tlogger.info( theCols ); \r\n        logger.info( aRow ); \r\n    }\r\n\r\n\r\n  [1]: http://jexcelapi.sourceforge.net/\r\n  [2]: https://github.com/djangofan/MetaModelExample/blob/master/src/main/java/qa/test/Data.java\r\n  [3]: http://metamodel.apache.org/\r\n  [4]: https://github.com/djangofan/MetaModelExample\r\n  [5]: https://github.com/djangofan/MetaModelExample\r\n  [6]: https://github.com/djangofan/MetaModelExample/blob/master/src/main/java/qa/test/Data.java","title":"TestNG: Iterate through array using the Dataprovider","body":"<p>I think <a href=\"http://jexcelapi.sourceforge.net/\" rel=\"nofollow\">jxl</a> is harder than it needs to be.  I wrote an example of a TestNG DataProvider <a href=\"https://github.com/djangofan/MetaModelExample/blob/master/src/main/java/qa/test/Data.java\" rel=\"nofollow\">reading Excel data</a> using <a href=\"http://metamodel.apache.org/\" rel=\"nofollow\">Apache MetaModel</a> (which recently became a full fledged Apache project) , and you can find that <a href=\"https://github.com/djangofan/MetaModelExample\" rel=\"nofollow\">here</a>.</p>\n\n<pre><code>public static Object[][] getCsvData( File csvFile ) \n    {   \n        CsvConfiguration conf = new CsvConfiguration( 1 );\n        DataContext csvContext = DataContextFactory.createCsvDataContext( csvFile, conf );\n        Schema schema = csvContext.getDefaultSchema();\n        Table[] tables = schema.getTables();\n        Table table = tables[0]; // a representation of the csv file name including extension\n        DataSet dataSet = csvContext.query()\n                .from( table )\n                .selectAll()\n                .where(\"run\").eq(\"Y\")\n                .execute();\n        List&lt;Row&gt; rows = dataSet.toRows();\n        Object[][] myArray = get2ArgArrayFromRows( rows );\n        return myArray;\n    }\n</code></pre>\n\n<p>And second part of that:</p>\n\n<pre><code>public static Object[][] get2ArgArrayFromRows( List&lt;Row&gt; rows ) {\n        Object[][] myArray = new Object[rows.size()][2];\n        int i = 0;\n        SelectItem[] cols = rows.get(0).getSelectItems();\n        for ( Row r : rows ) {\n            Object[] data = r.getValues();\n            for ( int j = 0; j &lt; cols.length; j++ ) {\n                if ( data[j] == null ) data[j] = \"\"; // force empty string where there are NULL values\n            }\n            myArray[i][0] = cols;\n            myArray[i][1] = data;\n            i++;\n        }\n        logger.info( \"Row count: \" + rows.size() );\n        logger.info( \"Column names: \" + Arrays.toString( cols ) );\n        return myArray;\n    }\n</code></pre>\n\n<p>And an example of a test that uses this DataProvider:</p>\n\n<pre><code>@Test( dataProvider = \"csv\" )\npublic void testPrintCsvRowToLog( SelectItem[] cols, Object[] data ) {\n    String theCols = Joiner.on(\"|\").join( cols );\n    String aRow = Joiner.on(\"|\").join( data );\n    logger.info( theCols ); \n    logger.info( aRow ); \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14878716,"reputation":133,"user_id":10744050,"display_name":"Rajan Domala"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1580214535,"creation_date":1580214535,"answer_id":59948803,"question_id":22021793,"body_markdown":"You cannot use TestNg Parameter and Dataprovider for @Test annotation.\r\n\r\nBetter to use DataProvider annotation for BeforeTest/Beforeclass annotation and Use @Parameter annotataion for @Test annotation","title":"TestNG: Iterate through array using the Dataprovider","body":"<p>You cannot use TestNg Parameter and Dataprovider for @Test annotation.</p>\n\n<p>Better to use DataProvider annotation for BeforeTest/Beforeclass annotation and Use @Parameter annotataion for @Test annotation</p>\n"}],"owner":{"account_id":2106302,"reputation":945,"user_id":1872565,"accept_rate":62,"display_name":"Learner"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17912,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":4,"score":1,"last_activity_date":1698037590,"creation_date":1393349574,"question_id":22021793,"body_markdown":"I&#39;m conducting Automation testing using Selenium Webdriver,  this code is for TestNg `dataprovider`, Summary:  I am taking data from Excel sheet to data,\r\nit&#39;s working fine.   When I&#39;m debugging the code, I&#39;m getting TestData as `testGoogle1(String search1, String Search2)`  for 1st Iteration it `Search1 = Webdriver, Search2 = Qtp, so on,,,,`\r\nWhat I want is that it should directly return the array of values something like `testGoogle1(String search[])` so that in the `@Test` itself I can add my function iterate all the rows and columns and test them.\r\n\r\nCan anyone please give me the idea how to write it.\r\n\r\n\r\nTest Data sheet\r\n\r\n![Test Data ][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/nrHpW.jpg\r\n\r\nhere is my code\r\n\r\n    package ExcelTest;\r\n    import com.thoughtworks.selenium.*;\r\n    import static org.testng.AssertJUnit.*;\r\n    import java.io.IOException;\r\n    import jxl.Cell;\r\n    import jxl.CellType;\r\n    import jxl.Sheet;\r\n    import jxl.Workbook;\r\n    import jxl.read.biff.BiffException;\r\n    import org.openqa.selenium.By;\r\n    import org.openqa.selenium.WebDriver;\r\n    import org.openqa.selenium.WebElement;\r\n    import org.testng.annotations.AfterClass;\r\n    import org.testng.annotations.BeforeTest;   \r\n    import org.testng.annotations.DataProvider;\r\n    import org.testng.annotations.Test;   \r\n    import org.testng.annotations.AfterTest;\r\n    import java.io.File;\r\n    import java.io.FileInputStream;\r\n    import java.util.Iterator;\r\n    import jxl.*;\r\n    \r\n    \r\n    public class Sample{\r\n    \r\n    \t  WebDriver driver;\r\n    \r\n    \t    @BeforeTest\r\n    \t    public void startTest(){\r\n    \t        driver = Startup.basic();\r\n    \t    } \r\n    \t\r\n    \t\r\n    @DataProvider(name = &quot;DP1&quot;)\r\n    public Object[][] createData1() throws Exception{\r\n      \t Object[][] retObjArr=getTableArray(&quot;G:\\\\Selenium Jar Files\\\\TestData\\\\Data.xls&quot;,&quot;DataPool&quot;);\r\n        return(retObjArr);\r\n       \r\n    }\r\n    \r\n    @Test (dataProvider = &quot;DP1&quot;)\r\n    public void testGoogle1(String search1, String Search2) throws Exception{\r\n    //selenium.open(&quot;http://www.google.co.in/&quot;);\r\n    //\tdriver.get(&quot;http://www.google.co.in/&quot;);\r\n    \t\r\n    \t//String hello = search.length;\r\n    //for(int i=0; i&lt; search.length ;i++)\r\n    //{\r\n    System.out.println(&quot;param   &quot; +search);\r\n    Thread.sleep(3000);\r\n    System.out.println(&quot;Opened&quot;);\r\n    WebElement element = driver.findElement(By.name(&quot;q&quot;));\r\n    element.sendKeys(search);\r\n    element.submit();\r\n    System.out.println(&quot;Clicked&quot;);\r\n    }\r\n    //}\r\n    \r\n    @AfterClass\r\n    public void tearDown() throws Exception {\r\n    //selenium.stop();\r\n    }\r\n    \r\n    \r\n    public String[][] getTableArray(String xlFilePath,String sheetName) throws Exception{\r\n           \r\n    \tString[][] tabArray=null;\r\n            \r\n                  \r\n          File inputWorkbook = new File(xlFilePath);\r\n            Workbook w;\r\n            int startRow,startCol, endRow, endCol,ci,cj;\r\n            try {\r\n            \t//w = Workbook.\r\n                w =\tWorkbook.getWorkbook(inputWorkbook);\r\n                // Get the first sheet\r\n                Sheet sheet = w.getSheet(sheetName);\r\n                // Loop over first 10 column and lines\r\n                endRow = sheet.getRows();\r\n                endCol = sheet.getColumns();\r\n                tabArray=new String[endRow-1][endCol-1];\r\n                \r\n                ci=0;\r\n    \r\n                for (int i=1;i&lt;endRow;i++,ci++){\r\n                    cj=0;\r\n                    for (int j=1;j&lt;endCol;j++,cj++){\r\n                \t  \r\n                \t  Cell cell = sheet.getCell(j, i);\r\n                \ttabArray[ci][cj] = cell.getContents(); \r\n                \t  \r\n                    }\r\n                //    System.out.println(&quot;&quot;);\r\n                }\r\n                //file.close();\r\n            }\r\n            catch (Exception e)\r\n            {\r\n                e.printStackTrace();\r\n            }\r\n        \r\n                              \r\n            \r\n            \r\n           return(tabArray);\r\n        }\r\n        \r\n    }\r\n\r\nCan anyone please share any idea ?\r\nThanks\r\n \r\nEdited Code: \r\n\r\n    public class Sample{\r\n    \r\n    \t  WebDriver driver;\r\n    \r\n    \t    @BeforeTest\r\n    \t    public void startTest(){\r\n    \t        driver = Startup.basic();\r\n    \t    } \r\n    \t\r\n    \t\r\n    @DataProvider(name = &quot;DP1&quot;)\r\n    public Object[][][] createData1() throws Exception{\r\n      \t Object[][][] retObjArr=getTableArray(&quot;G:\\\\Selenium Jar Files\\\\TestData\\\\Data.xls&quot;,&quot;DataPool&quot;);\r\n        return (retObjArr);\r\n       \r\n    }\r\n    \r\n    @Test (dataProvider = &quot;DP1&quot;)\r\n    public void testGoogle1(String search, String het) throws Exception{\r\n    \r\n    System.out.println(&quot;param   &quot; +search);\r\n    Thread.sleep(3000);\r\n    System.out.println(&quot;Opened&quot;);\r\n    WebElement element = driver.findElement(By.name(&quot;q&quot;));\r\n    element.sendKeys(search);\r\n    element.submit();\r\n    System.out.println(&quot;Clicked&quot;);\r\n    }\r\n    //}\r\n    \r\n    @AfterClass\r\n    public void tearDown() throws Exception {\r\n    //selenium.stop();\r\n    }\r\n    \r\n    \r\n    public Object[][][] getTableArray(String xlFilePath,String sheetName) throws Exception{\r\n           \r\n    \tObject[][] tabArray=null;\r\n            \r\n                  \r\n          File inputWorkbook = new File(xlFilePath);\r\n            Workbook w;\r\n            int startRow,startCol, endRow, endCol,ci,cj,ck;\r\n            try {\r\n            \t//w = Workbook.\r\n                w =\tWorkbook.getWorkbook(inputWorkbook);\r\n                // Get the first sheet\r\n                Sheet sheet = w.getSheet(sheetName);\r\n                // Loop over first 10 column and lines\r\n                endRow = sheet.getRows();\r\n                endCol = sheet.getColumns();\r\n                tabArray=new String[endRow-1][endCol-1];\r\n                \r\n                ci=0;\r\n    \r\n                for (int i=1;i&lt;endRow;i++,ci++){\r\n                    cj=0;\r\n                    \r\n                    for (int j=1;j&lt;endCol;j++,cj++){\r\n                \t  \r\n                \t  Cell cell = sheet.getCell(j, i);\r\n                \ttabArray[ci][cj] = cell.getContents(); \r\n                \t  \r\n                    }\r\n                //    System.out.println(&quot;&quot;);\r\n                }\r\n                //file.close();\r\n            }\r\n            catch (Exception e)\r\n            {\r\n                e.printStackTrace();\r\n            }\r\n                              \r\n        \r\n            \r\n           return(tabArray);  /// Here Getting the error **Type mismatch: cannot convert from Object[][] to Object[][][]**\r\n        }\r\n        \r\n    }\r\n\r\n","title":"TestNG: Iterate through array using the Dataprovider","body":"<p>I'm conducting Automation testing using Selenium Webdriver,  this code is for TestNg <code>dataprovider</code>, Summary:  I am taking data from Excel sheet to data,\nit's working fine.   When I'm debugging the code, I'm getting TestData as <code>testGoogle1(String search1, String Search2)</code>  for 1st Iteration it <code>Search1 = Webdriver, Search2 = Qtp, so on,,,,</code>\nWhat I want is that it should directly return the array of values something like <code>testGoogle1(String search[])</code> so that in the <code>@Test</code> itself I can add my function iterate all the rows and columns and test them.</p>\n\n<p>Can anyone please give me the idea how to write it.</p>\n\n<p>Test Data sheet</p>\n\n<p><img src=\"https://i.stack.imgur.com/nrHpW.jpg\" alt=\"Test Data \"></p>\n\n<p>here is my code</p>\n\n<pre><code>package ExcelTest;\nimport com.thoughtworks.selenium.*;\nimport static org.testng.AssertJUnit.*;\nimport java.io.IOException;\nimport jxl.Cell;\nimport jxl.CellType;\nimport jxl.Sheet;\nimport jxl.Workbook;\nimport jxl.read.biff.BiffException;\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.WebElement;\nimport org.testng.annotations.AfterClass;\nimport org.testng.annotations.BeforeTest;   \nimport org.testng.annotations.DataProvider;\nimport org.testng.annotations.Test;   \nimport org.testng.annotations.AfterTest;\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.util.Iterator;\nimport jxl.*;\n\n\npublic class Sample{\n\n      WebDriver driver;\n\n        @BeforeTest\n        public void startTest(){\n            driver = Startup.basic();\n        } \n\n\n@DataProvider(name = \"DP1\")\npublic Object[][] createData1() throws Exception{\n     Object[][] retObjArr=getTableArray(\"G:\\\\Selenium Jar Files\\\\TestData\\\\Data.xls\",\"DataPool\");\n    return(retObjArr);\n\n}\n\n@Test (dataProvider = \"DP1\")\npublic void testGoogle1(String search1, String Search2) throws Exception{\n//selenium.open(\"http://www.google.co.in/\");\n//  driver.get(\"http://www.google.co.in/\");\n\n    //String hello = search.length;\n//for(int i=0; i&lt; search.length ;i++)\n//{\nSystem.out.println(\"param   \" +search);\nThread.sleep(3000);\nSystem.out.println(\"Opened\");\nWebElement element = driver.findElement(By.name(\"q\"));\nelement.sendKeys(search);\nelement.submit();\nSystem.out.println(\"Clicked\");\n}\n//}\n\n@AfterClass\npublic void tearDown() throws Exception {\n//selenium.stop();\n}\n\n\npublic String[][] getTableArray(String xlFilePath,String sheetName) throws Exception{\n\n    String[][] tabArray=null;\n\n\n      File inputWorkbook = new File(xlFilePath);\n        Workbook w;\n        int startRow,startCol, endRow, endCol,ci,cj;\n        try {\n            //w = Workbook.\n            w = Workbook.getWorkbook(inputWorkbook);\n            // Get the first sheet\n            Sheet sheet = w.getSheet(sheetName);\n            // Loop over first 10 column and lines\n            endRow = sheet.getRows();\n            endCol = sheet.getColumns();\n            tabArray=new String[endRow-1][endCol-1];\n\n            ci=0;\n\n            for (int i=1;i&lt;endRow;i++,ci++){\n                cj=0;\n                for (int j=1;j&lt;endCol;j++,cj++){\n\n                  Cell cell = sheet.getCell(j, i);\n                tabArray[ci][cj] = cell.getContents(); \n\n                }\n            //    System.out.println(\"\");\n            }\n            //file.close();\n        }\n        catch (Exception e)\n        {\n            e.printStackTrace();\n        }\n\n\n\n\n       return(tabArray);\n    }\n\n}\n</code></pre>\n\n<p>Can anyone please share any idea ?\nThanks</p>\n\n<p>Edited Code: </p>\n\n<pre><code>public class Sample{\n\n      WebDriver driver;\n\n        @BeforeTest\n        public void startTest(){\n            driver = Startup.basic();\n        } \n\n\n@DataProvider(name = \"DP1\")\npublic Object[][][] createData1() throws Exception{\n     Object[][][] retObjArr=getTableArray(\"G:\\\\Selenium Jar Files\\\\TestData\\\\Data.xls\",\"DataPool\");\n    return (retObjArr);\n\n}\n\n@Test (dataProvider = \"DP1\")\npublic void testGoogle1(String search, String het) throws Exception{\n\nSystem.out.println(\"param   \" +search);\nThread.sleep(3000);\nSystem.out.println(\"Opened\");\nWebElement element = driver.findElement(By.name(\"q\"));\nelement.sendKeys(search);\nelement.submit();\nSystem.out.println(\"Clicked\");\n}\n//}\n\n@AfterClass\npublic void tearDown() throws Exception {\n//selenium.stop();\n}\n\n\npublic Object[][][] getTableArray(String xlFilePath,String sheetName) throws Exception{\n\n    Object[][] tabArray=null;\n\n\n      File inputWorkbook = new File(xlFilePath);\n        Workbook w;\n        int startRow,startCol, endRow, endCol,ci,cj,ck;\n        try {\n            //w = Workbook.\n            w = Workbook.getWorkbook(inputWorkbook);\n            // Get the first sheet\n            Sheet sheet = w.getSheet(sheetName);\n            // Loop over first 10 column and lines\n            endRow = sheet.getRows();\n            endCol = sheet.getColumns();\n            tabArray=new String[endRow-1][endCol-1];\n\n            ci=0;\n\n            for (int i=1;i&lt;endRow;i++,ci++){\n                cj=0;\n\n                for (int j=1;j&lt;endCol;j++,cj++){\n\n                  Cell cell = sheet.getCell(j, i);\n                tabArray[ci][cj] = cell.getContents(); \n\n                }\n            //    System.out.println(\"\");\n            }\n            //file.close();\n        }\n        catch (Exception e)\n        {\n            e.printStackTrace();\n        }\n\n\n\n       return(tabArray);  /// Here Getting the error **Type mismatch: cannot convert from Object[][] to Object[][][]**\n    }\n\n}\n</code></pre>\n"},{"tags":["java","jvm","jit"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1698051449,"post_id":77342723,"comment_id":136351459,"body_markdown":"Replace “info” with “debug”. I don’t think that the old option `-XX:+PrintCompilation` is relevant to the unified logging configuration.","body":"Replace “info” with “debug”. I don’t think that the old option <code>-XX:+PrintCompilation</code> is relevant to the unified logging configuration."},{"owner":{"account_id":17675286,"reputation":1,"user_id":12830366,"display_name":"FlyChenKai"},"score":0,"creation_date":1698059651,"post_id":77342723,"comment_id":136352874,"body_markdown":"You&#39;re right. I just need to replace “info” with “debug”.\nMy service records the logs rightly now. Thank you very much!","body":"You&#39;re right. I just need to replace “info” with “debug”. My service records the logs rightly now. Thank you very much!"}],"owner":{"account_id":17675286,"reputation":1,"user_id":12830366,"display_name":"FlyChenKai"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698037526,"creation_date":1698037349,"question_id":77342723,"body_markdown":"For printing Java JIT compilation logs, I have now used some jvm parameters.But there is no content in the compilation.log.\r\n\r\nThe jvm parameters I have now used:\r\n```\r\n-XX:+PrintCompilation -Xlog:compilation*=info:file=compilation.log:time,uptime,level,tags\r\n```\r\nI want to print the JIT logs with the timestamp.\r\n\r\nThank you for your help first!","title":"How can I print JIT compilation logs to the specified log file in Java 11/17?","body":"<p>For printing Java JIT compilation logs, I have now used some jvm parameters.But there is no content in the compilation.log.</p>\n<p>The jvm parameters I have now used:</p>\n<pre><code>-XX:+PrintCompilation -Xlog:compilation*=info:file=compilation.log:time,uptime,level,tags\n</code></pre>\n<p>I want to print the JIT logs with the timestamp.</p>\n<p>Thank you for your help first!</p>\n"},{"tags":["java","hibernate","grails","groovy","grails-orm"],"comments":[{"owner":{"account_id":1701455,"reputation":299,"user_id":1561397,"display_name":"kaefert"},"score":1,"creation_date":1435838045,"post_id":1692871,"comment_id":50373115,"body_markdown":"I ran into the same exception, for me it was caused by having the same attribute twice in the inheritance path of my entity class","body":"I ran into the same exception, for me it was caused by having the same attribute twice in the inheritance path of my entity class"},{"owner":{"account_id":1291135,"reputation":2869,"user_id":2587343,"display_name":"Vlastimil Ovč&#225;č&#237;k"},"score":0,"creation_date":1453982854,"post_id":1692871,"comment_id":57844766,"body_markdown":"I ran into the same problem as @kaefert (i.e. the same property more than once in inheritance path), but I got the exception only when the same criteria was run twice (calling `list()` twice). Tricky.","body":"I ran into the same problem as @kaefert (i.e. the same property more than once in inheritance path), but I got the exception only when the same criteria was run twice (calling <code>list()</code> twice). Tricky."}],"answers":[{"tags":[],"owner":{"account_id":44712,"reputation":99786,"user_id":131368,"accept_rate":78,"display_name":"ChssPly76"},"down_vote_count":0,"up_vote_count":93,"is_accepted":true,"score":93,"last_activity_date":1453979768,"creation_date":1257624286,"answer_id":1694236,"question_id":1692871,"body_markdown":"Hibernate shows this error when you attempt to persist more than one entity instance sharing the **same** collection reference (i.e. the collection identity in contrast with collection equality).\r\n\r\nNote that it means the same **collection**, not collection element - in other words `relatedPersons` on both `person` and `anotherPerson` must be the same. Perhaps you&#39;re resetting that collection after entities are loaded? Or you&#39;ve initialized both references with the same collection instance?","title":"Found shared references to a collection org.hibernate.HibernateException","body":"<p>Hibernate shows this error when you attempt to persist more than one entity instance sharing the <strong>same</strong> collection reference (i.e. the collection identity in contrast with collection equality).</p>\n\n<p>Note that it means the same <strong>collection</strong>, not collection element - in other words <code>relatedPersons</code> on both <code>person</code> and <code>anotherPerson</code> must be the same. Perhaps you're resetting that collection after entities are loaded? Or you've initialized both references with the same collection instance?</p>\n"},{"tags":[],"owner":{"account_id":116442,"reputation":1022,"user_id":305327,"display_name":"dgt"},"down_vote_count":0,"up_vote_count":73,"is_accepted":false,"score":73,"last_activity_date":1432238038,"creation_date":1320178949,"answer_id":7972414,"question_id":1692871,"body_markdown":"I had the same problem. In my case, the issue was that someone used BeanUtils to copy the properties of one entity to another, so we ended up having two entities referencing the same collection.\r\n\r\nGiven that I spent some time investigating this issue, I would recommend the following checklist:\r\n\r\n - Look for scenarios like `entity1.setCollection(entity2.getCollection())` and `getCollection` returns the internal reference to the collection (if getCollection() returns a new instance of the collection, then you don&#39;t need to worry).\r\n\r\n - Look if `clone()` has been implemented correctly.\r\n\r\n - Look for `BeanUtils.copyProperties(entity1, entity2)`.","title":"Found shared references to a collection org.hibernate.HibernateException","body":"<p>I had the same problem. In my case, the issue was that someone used BeanUtils to copy the properties of one entity to another, so we ended up having two entities referencing the same collection.</p>\n\n<p>Given that I spent some time investigating this issue, I would recommend the following checklist:</p>\n\n<ul>\n<li><p>Look for scenarios like <code>entity1.setCollection(entity2.getCollection())</code> and <code>getCollection</code> returns the internal reference to the collection (if getCollection() returns a new instance of the collection, then you don't need to worry).</p></li>\n<li><p>Look if <code>clone()</code> has been implemented correctly.</p></li>\n<li><p>Look for <code>BeanUtils.copyProperties(entity1, entity2)</code>.</p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1258953,"reputation":737,"user_id":1217799,"display_name":"Mirimas"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1454496555,"creation_date":1347009078,"answer_id":12315104,"question_id":1692871,"body_markdown":"Explanation on practice. If you try to save your object, e.g.:\r\n\r\n    Set&lt;Folder&gt; folders = message.getFolders();\r\n       folders.remove(inputFolder);\r\n       folders.add(trashFolder);\r\n       message.setFiles(folders);\r\n    MESSAGESDAO.getMessageDAO().save(message);\r\n\r\nyou don&#39;t need to set updated object to a parent object:\r\n\r\n    message.setFiles(folders);\r\n\r\nSimple save your parent object like:\r\n\r\n    Set&lt;Folder&gt; folders = message.getFolders();\r\n       folders.remove(inputFolder);\r\n       folders.add(trashFolder);\r\n       // Not set updated object here\r\n    MESSAGESDAO.getMessageDAO().save(message);","title":"Found shared references to a collection org.hibernate.HibernateException","body":"<p>Explanation on practice. If you try to save your object, e.g.:</p>\n\n<pre><code>Set&lt;Folder&gt; folders = message.getFolders();\n   folders.remove(inputFolder);\n   folders.add(trashFolder);\n   message.setFiles(folders);\nMESSAGESDAO.getMessageDAO().save(message);\n</code></pre>\n\n<p>you don't need to set updated object to a parent object:</p>\n\n<pre><code>message.setFiles(folders);\n</code></pre>\n\n<p>Simple save your parent object like:</p>\n\n<pre><code>Set&lt;Folder&gt; folders = message.getFolders();\n   folders.remove(inputFolder);\n   folders.add(trashFolder);\n   // Not set updated object here\nMESSAGESDAO.getMessageDAO().save(message);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5263557,"reputation":127,"user_id":4204338,"accept_rate":100,"display_name":"John Lopez"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1466716894,"creation_date":1466716894,"answer_id":38002065,"question_id":1692871,"body_markdown":"In my case, I was copying and pasting code from my other classes, so I did not notice that the getter code was bad written:\r\n\r\n    @OneToMany(fetch = FetchType.LAZY, mappedBy = &quot;credito&quot;)\r\n    public Set getConceptoses() {\r\n        return this.letrases;\r\n    }\r\n\r\n    public void setConceptoses(Set conceptoses) {\r\n        this.conceptoses = conceptoses;\r\n    }\r\n\r\nAll references ***conceptoses*** but if you look at the get says ***letrases***","title":"Found shared references to a collection org.hibernate.HibernateException","body":"<p>In my case, I was copying and pasting code from my other classes, so I did not notice that the getter code was bad written:</p>\n\n<pre><code>@OneToMany(fetch = FetchType.LAZY, mappedBy = \"credito\")\npublic Set getConceptoses() {\n    return this.letrases;\n}\n\npublic void setConceptoses(Set conceptoses) {\n    this.conceptoses = conceptoses;\n}\n</code></pre>\n\n<p>All references <strong><em>conceptoses</em></strong> but if you look at the get says <strong><em>letrases</em></strong></p>\n"},{"tags":[],"owner":{"account_id":4160185,"reputation":1657,"user_id":3410465,"accept_rate":40,"display_name":"Diego87"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1470844597,"creation_date":1470844597,"answer_id":38878295,"question_id":1692871,"body_markdown":"Reading online the cause of this error can be also an **hibernate bug**, as **workaround** that it seems to work, it is to put a:\r\n\r\n    session.clear()\r\n\r\nYou must to put the clear after getting data and before commit and close, see example:\r\n\r\n    //getting data\r\n    SrReq sr = (SrReq) crit.uniqueResult();\r\n    SrSalesDetailDTO dt=SrSalesDetailMapper.INSTANCE.map(sr);\r\n    //CLEAR            \r\n    session.clear();\r\n    //close session\r\n    session.getTransaction().commit();\r\n    session.close();\r\n    return dt;\r\n\r\n**I use this solution for select to database, for update or insert i don&#39;t know if this solution can work or can cause problems.**\r\n\r\nMy problem is equal at 100% of this: http://www.progtown.com/topic128073-hibernate-many-to-many-on-two-tables.html","title":"Found shared references to a collection org.hibernate.HibernateException","body":"<p>Reading online the cause of this error can be also an <strong>hibernate bug</strong>, as <strong>workaround</strong> that it seems to work, it is to put a:</p>\n\n<pre><code>session.clear()\n</code></pre>\n\n<p>You must to put the clear after getting data and before commit and close, see example:</p>\n\n<pre><code>//getting data\nSrReq sr = (SrReq) crit.uniqueResult();\nSrSalesDetailDTO dt=SrSalesDetailMapper.INSTANCE.map(sr);\n//CLEAR            \nsession.clear();\n//close session\nsession.getTransaction().commit();\nsession.close();\nreturn dt;\n</code></pre>\n\n<p><strong>I use this solution for select to database, for update or insert i don't know if this solution can work or can cause problems.</strong></p>\n\n<p>My problem is equal at 100% of this: <a href=\"http://www.progtown.com/topic128073-hibernate-many-to-many-on-two-tables.html\" rel=\"noreferrer\">http://www.progtown.com/topic128073-hibernate-many-to-many-on-two-tables.html</a></p>\n"},{"tags":[],"owner":{"account_id":4213442,"reputation":421,"user_id":3450440,"display_name":"raji"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1524357855,"creation_date":1500985724,"answer_id":45303327,"question_id":1692871,"body_markdown":"I too got the same issue, someone used `BeanUtils.copyProperties(source, target)`. Here both source and target, are using the same collection as attribute. \r\n\r\nSo i just used the deep copy as below..\r\n\r\n[How to Clone Collection in Java - Deep copy of ArrayList and HashSet](http://javarevisited.blogspot.com/2014/03/how-to-clone-collection-in-java-deep-copy-vs-shallow.html)","title":"Found shared references to a collection org.hibernate.HibernateException","body":"<p>I too got the same issue, someone used <code>BeanUtils.copyProperties(source, target)</code>. Here both source and target, are using the same collection as attribute. </p>\n\n<p>So i just used the deep copy as below..</p>\n\n<p><a href=\"http://javarevisited.blogspot.com/2014/03/how-to-clone-collection-in-java-deep-copy-vs-shallow.html\" rel=\"nofollow noreferrer\">How to Clone Collection in Java - Deep copy of ArrayList and HashSet</a></p>\n"},{"tags":[],"owner":{"account_id":9967151,"reputation":61,"user_id":7374504,"display_name":"Tarun"},"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1524361838,"creation_date":1502098323,"answer_id":45543657,"question_id":1692871,"body_markdown":"Consider an entity:\r\n\r\n    public class Foo{\r\n    private&lt;user&gt; user;\r\n    /* with getters and setters */\r\n    }\r\n\r\nAnd consider an Business Logic class:\r\n\r\n    class Foo1{\r\n    List&lt;User&gt; user = new ArrayList&lt;&gt;();\r\n    user = foo.getUser();\r\n    }\r\n\r\nHere the user and `foo.getUser()` share the same reference. But saving the two references creates a conflict. \r\n\r\nThe proper usage should be:\r\n\r\n    class Foo1 {\r\n    List&lt;User&gt; user = new ArrayList&lt;&gt;();\r\n    user.addAll(foo.getUser);\r\n    }\r\n\r\nThis avoids the conflict.","title":"Found shared references to a collection org.hibernate.HibernateException","body":"<p>Consider an entity:</p>\n\n<pre><code>public class Foo{\nprivate&lt;user&gt; user;\n/* with getters and setters */\n}\n</code></pre>\n\n<p>And consider an Business Logic class:</p>\n\n<pre><code>class Foo1{\nList&lt;User&gt; user = new ArrayList&lt;&gt;();\nuser = foo.getUser();\n}\n</code></pre>\n\n<p>Here the user and <code>foo.getUser()</code> share the same reference. But saving the two references creates a conflict. </p>\n\n<p>The proper usage should be:</p>\n\n<pre><code>class Foo1 {\nList&lt;User&gt; user = new ArrayList&lt;&gt;();\nuser.addAll(foo.getUser);\n}\n</code></pre>\n\n<p>This avoids the conflict.</p>\n"},{"tags":[],"owner":{"account_id":5537559,"reputation":1,"user_id":4395304,"display_name":"Dinesh Angolkar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1520876996,"creation_date":1516298375,"answer_id":48327591,"question_id":1692871,"body_markdown":"I faced similar exception in my application. After looking into the stacktrace it was clear that exception was thrown within a `FlushEntityEventListener` class.\r\n\r\nIn Hibernate 4.3.7 the `MSLocalSessionFactory` bean no longer supports the `eventListeners` property. Hence, one has to explicitly fetch the service registry from individual Hibernate session beans and then set the required custom event listeners.\r\n\r\nIn the process of adding custom event listeners we need to make sure the corresponding default event listeners are removed from the respective Hibernate session.\r\n\r\nIf the default event listener is not removed then the case arises of two event listeners registered against same event. In this case while iterating over these listeners, against first listeners any collections in the session will be flagged as reached and while processing the same collection against second listener would throw this Hibernate exception.\r\n\r\nSo, make sure that when registering custom listeners corresponding default listeners are removed from registry.","title":"Found shared references to a collection org.hibernate.HibernateException","body":"<p>I faced similar exception in my application. After looking into the stacktrace it was clear that exception was thrown within a <code>FlushEntityEventListener</code> class.</p>\n\n<p>In Hibernate 4.3.7 the <code>MSLocalSessionFactory</code> bean no longer supports the <code>eventListeners</code> property. Hence, one has to explicitly fetch the service registry from individual Hibernate session beans and then set the required custom event listeners.</p>\n\n<p>In the process of adding custom event listeners we need to make sure the corresponding default event listeners are removed from the respective Hibernate session.</p>\n\n<p>If the default event listener is not removed then the case arises of two event listeners registered against same event. In this case while iterating over these listeners, against first listeners any collections in the session will be flagged as reached and while processing the same collection against second listener would throw this Hibernate exception.</p>\n\n<p>So, make sure that when registering custom listeners corresponding default listeners are removed from registry.</p>\n"},{"tags":[],"owner":{"account_id":8826227,"reputation":7898,"user_id":6594394,"accept_rate":40,"display_name":"simibac"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1589964561,"creation_date":1589964561,"answer_id":61908895,"question_id":1692871,"body_markdown":"My problem was that I had setup an `@ManyToOne` relationship. Maybe if the answers above don&#39;t fix your problem you might want to check the relationship that was mentioned in the error message.","title":"Found shared references to a collection org.hibernate.HibernateException","body":"<p>My problem was that I had setup an <code>@ManyToOne</code> relationship. Maybe if the answers above don't fix your problem you might want to check the relationship that was mentioned in the error message.</p>\n"},{"tags":[],"owner":{"account_id":19075603,"reputation":1,"user_id":13928948,"display_name":"afsaneh"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1594739415,"creation_date":1594729397,"answer_id":62895123,"question_id":1692871,"body_markdown":"In a ***one to many*** and ***many to one*** relationship this error will occur. If you attempt to devote same instance from ***many to one*** entity to more than one instance from ***one to many*** entity. \r\n\r\nFor example, each person can have many books but each of these books can be owned by only one person if you consider more than one owner for a book this issue is raised.","title":"Found shared references to a collection org.hibernate.HibernateException","body":"<p>In a <em><strong>one to many</strong></em> and <em><strong>many to one</strong></em> relationship this error will occur. If you attempt to devote same instance from <em><strong>many to one</strong></em> entity to more than one instance from <em><strong>one to many</strong></em> entity.</p>\n<p>For example, each person can have many books but each of these books can be owned by only one person if you consider more than one owner for a book this issue is raised.</p>\n"},{"tags":[],"owner":{"account_id":3206624,"reputation":63,"user_id":2707582,"display_name":"MetallFoX"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1596128615,"creation_date":1596127837,"answer_id":63177801,"question_id":1692871,"body_markdown":"I have experienced a great example of reproducing such a problem.\r\nMaybe my experience will help someone one day.\r\n\r\n## Short version ##\r\nCheck that your @Embedded Id of container has no possible collisions.\r\n\r\n## Long version ##\r\nWhen Hibernate instantiates collection wrapper, it searches for already instantiated collection by CollectionKey in internal Map.\r\n\r\nFor Entity with @Embedded id, CollectionKey wraps EmbeddedComponentType and uses @Embedded Id properties for equality checks and hashCode calculation.\r\n\r\nSo if you have two entities with equal @Embedded Ids, Hibernate will instantiate and put new collection by the first key and will find same collection for the second key.\r\nSo two entities with same @Embedded Id will be populated with same collection.\r\n\r\n## Example ##\r\nSuppose you have Account entity which has lazy set of loans.\r\nAnd Account has @Embedded Id consists of several parts(columns).\r\n\r\n    @Entity\r\n    @Table(schema = &quot;SOME&quot;, name = &quot;ACCOUNT&quot;)\r\n    public class Account {\r\n        @OneToMany(fetch = FetchType.LAZY, mappedBy = &quot;account&quot;)\r\n        private Set&lt;Loan&gt; loans;\r\n    \r\n        @Embedded\r\n        private AccountId accountId;\r\n\r\n        ...\r\n    }\r\n\r\n    @Embeddable\r\n    public class AccountId {\r\n        @Column(name = &quot;X&quot;)\r\n        private Long x;\r\n        \r\n        @Column(name = &quot;BRANCH&quot;)\r\n        private String branchId;\r\n        \r\n        @Column(name = &quot;Z&quot;)\r\n        private String z;\r\n\r\n        ...\r\n    }\r\n\r\nThen suppose that Account has additional property mapped by @Embedded Id but has relation to other entity Branch.\r\n\r\n    @ManyToOne(fetch = FetchType.EAGER)\r\n    @JoinColumn(name = &quot;BRANCH&quot;)\r\n    @MapsId(&quot;accountId.branchId&quot;)\r\n    @NotFound(action = NotFoundAction.IGNORE)//Look at this!\r\n    private Branch branch;\r\n\r\nIt could happen that you have no FK for Account to Brunch relation id DB so Account.BRANCH column can have any value not presented in Branch table.\r\n\r\nAccording to `@NotFound(action = NotFoundAction.IGNORE)` if value is not present in related table, Hibernate will load **null** value for the property.\r\n\r\nIf X and Y columns of two Accounts are same(which is fine), but BRANCH is different and not presented in Branch table, hibernate will load **null** for both and Embedded Ids will be equal.\r\n\r\nSo two CollectionKey objects will be equal and will have same hashCode for different Accounts.\r\n\r\n    result = {CollectionKey@34809} &quot;CollectionKey[Account.loans#Account@43deab74]&quot;\r\n     role = &quot;Account.loans&quot;\r\n     key = {Account@26451} \r\n     keyType = {EmbeddedComponentType@21355} \r\n     factory = {SessionFactoryImpl@21356} \r\n     hashCode = 1187125168\r\n     entityMode = {EntityMode@17415} &quot;pojo&quot;\r\n    \r\n    result = {CollectionKey@35653} &quot;CollectionKey[Account.loans#Account@33470aa]&quot;\r\n     role = &quot;Account.loans&quot;\r\n     key = {Account@35225} \r\n     keyType = {EmbeddedComponentType@21355} \r\n     factory = {SessionFactoryImpl@21356} \r\n     hashCode = 1187125168\r\n     entityMode = {EntityMode@17415} &quot;pojo&quot;\r\n\r\nBecause of this, Hibernate will load same PesistentSet for two entities.","title":"Found shared references to a collection org.hibernate.HibernateException","body":"<p>I have experienced a great example of reproducing such a problem.\nMaybe my experience will help someone one day.</p>\n<h2>Short version</h2>\n<p>Check that your @Embedded Id of container has no possible collisions.</p>\n<h2>Long version</h2>\n<p>When Hibernate instantiates collection wrapper, it searches for already instantiated collection by CollectionKey in internal Map.</p>\n<p>For Entity with @Embedded id, CollectionKey wraps EmbeddedComponentType and uses @Embedded Id properties for equality checks and hashCode calculation.</p>\n<p>So if you have two entities with equal @Embedded Ids, Hibernate will instantiate and put new collection by the first key and will find same collection for the second key.\nSo two entities with same @Embedded Id will be populated with same collection.</p>\n<h2>Example</h2>\n<p>Suppose you have Account entity which has lazy set of loans.\nAnd Account has @Embedded Id consists of several parts(columns).</p>\n<pre><code>@Entity\n@Table(schema = &quot;SOME&quot;, name = &quot;ACCOUNT&quot;)\npublic class Account {\n    @OneToMany(fetch = FetchType.LAZY, mappedBy = &quot;account&quot;)\n    private Set&lt;Loan&gt; loans;\n\n    @Embedded\n    private AccountId accountId;\n\n    ...\n}\n\n@Embeddable\npublic class AccountId {\n    @Column(name = &quot;X&quot;)\n    private Long x;\n    \n    @Column(name = &quot;BRANCH&quot;)\n    private String branchId;\n    \n    @Column(name = &quot;Z&quot;)\n    private String z;\n\n    ...\n}\n</code></pre>\n<p>Then suppose that Account has additional property mapped by @Embedded Id but has relation to other entity Branch.</p>\n<pre><code>@ManyToOne(fetch = FetchType.EAGER)\n@JoinColumn(name = &quot;BRANCH&quot;)\n@MapsId(&quot;accountId.branchId&quot;)\n@NotFound(action = NotFoundAction.IGNORE)//Look at this!\nprivate Branch branch;\n</code></pre>\n<p>It could happen that you have no FK for Account to Brunch relation id DB so Account.BRANCH column can have any value not presented in Branch table.</p>\n<p>According to <code>@NotFound(action = NotFoundAction.IGNORE)</code> if value is not present in related table, Hibernate will load <strong>null</strong> value for the property.</p>\n<p>If X and Y columns of two Accounts are same(which is fine), but BRANCH is different and not presented in Branch table, hibernate will load <strong>null</strong> for both and Embedded Ids will be equal.</p>\n<p>So two CollectionKey objects will be equal and will have same hashCode for different Accounts.</p>\n<pre><code>result = {CollectionKey@34809} &quot;CollectionKey[Account.loans#Account@43deab74]&quot;\n role = &quot;Account.loans&quot;\n key = {Account@26451} \n keyType = {EmbeddedComponentType@21355} \n factory = {SessionFactoryImpl@21356} \n hashCode = 1187125168\n entityMode = {EntityMode@17415} &quot;pojo&quot;\n\nresult = {CollectionKey@35653} &quot;CollectionKey[Account.loans#Account@33470aa]&quot;\n role = &quot;Account.loans&quot;\n key = {Account@35225} \n keyType = {EmbeddedComponentType@21355} \n factory = {SessionFactoryImpl@21356} \n hashCode = 1187125168\n entityMode = {EntityMode@17415} &quot;pojo&quot;\n</code></pre>\n<p>Because of this, Hibernate will load same PesistentSet for two entities.</p>\n"},{"tags":[],"owner":{"account_id":8736620,"reputation":449,"user_id":6535053,"display_name":"FooBar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1597868202,"creation_date":1597868202,"answer_id":63494380,"question_id":1692871,"body_markdown":"Posting here because it&#39;s taken me over 2 weeks to get to the bottom of this, and I *still* haven&#39;t fully resolved it.\r\n\r\nThere is a *chance*, that you&#39;re also just running into [this bug which has been around since 2017 and hasn&#39;t been addressed][1].\r\n\r\nI honestly have no clue how to get around this bug. I&#39;m posting here for my sanity and hopefully to shave a couple weeks of your googling. I&#39;d love any input anyone may have, but my particular &quot;answer&quot; to this problem was not listed in *any* of the above answers.\r\n\r\n  [1]: https://hibernate.atlassian.net/browse/HHH-11605","title":"Found shared references to a collection org.hibernate.HibernateException","body":"<p>Posting here because it's taken me over 2 weeks to get to the bottom of this, and I <em>still</em> haven't fully resolved it.</p>\n<p>There is a <em>chance</em>, that you're also just running into <a href=\"https://hibernate.atlassian.net/browse/HHH-11605\" rel=\"nofollow noreferrer\">this bug which has been around since 2017 and hasn't been addressed</a>.</p>\n<p>I honestly have no clue how to get around this bug. I'm posting here for my sanity and hopefully to shave a couple weeks of your googling. I'd love any input anyone may have, but my particular &quot;answer&quot; to this problem was not listed in <em>any</em> of the above answers.</p>\n"},{"tags":[],"owner":{"account_id":3333666,"reputation":2544,"user_id":2801909,"accept_rate":33,"display_name":"Vijay Nandwana"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648124749,"creation_date":1648124749,"answer_id":71602528,"question_id":1692871,"body_markdown":"I had to replace the following collection initilization:\r\n\r\n    challenge.setGoals(memberChallenge.getGoals());\r\n\r\nwith \r\n\r\n\t\tchallenge.setGoals(memberChallenge.getGoals()\r\n\t\t\t\t\t\t\t\t\t\t  .stream()\r\n\t\t\t\t\t\t\t\t\t\t  .map(dmo -&gt; {\r\n\t\t\t\t\t\t\t\t\t\t\t  final ChallengeGoal goal = new ChallengeGoalImpl();\r\n\t\t\t\t\t\t\t\t\t\t\t  goal.setMemberChallenge(challenge);\r\n\t\t\t\t\t\t\t\t\t\t\t  goal.setGoalDate(dmo.getGoalDate());\r\n\t\t\t\t\t\t\t\t\t\t\t  goal.setGoalValue(dmo.getGoalValue());\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t  return goal;\r\n\t\t\t\t\t\t\t\t\t\t  })\r\n\t\t\t\t\t\t\t\t\t\t  .collect(Collectors.toList()));\r\n","title":"Found shared references to a collection org.hibernate.HibernateException","body":"<p>I had to replace the following collection initilization:</p>\n<pre><code>challenge.setGoals(memberChallenge.getGoals());\n</code></pre>\n<p>with</p>\n<pre><code>    challenge.setGoals(memberChallenge.getGoals()\n                                      .stream()\n                                      .map(dmo -&gt; {\n                                          final ChallengeGoal goal = new ChallengeGoalImpl();\n                                          goal.setMemberChallenge(challenge);\n                                          goal.setGoalDate(dmo.getGoalDate());\n                                          goal.setGoalValue(dmo.getGoalValue());\n\n                                          return goal;\n                                      })\n                                      .collect(Collectors.toList()));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13249424,"reputation":61,"user_id":9567391,"display_name":"PankajTekwani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664210601,"creation_date":1664210601,"answer_id":73857315,"question_id":1692871,"body_markdown":"I changed \r\n\r\n\r\n\r\n    @OneToMany( cascade= CascadeType.ALL)\r\n        \r\n    @JoinColumn(\r\n                name = &quot;some_id&quot;,\r\n                referencedColumnName = &quot;some_id&quot;\r\n        )\r\n    \r\n    to\r\n    \r\n    @OneToMany(mappedBy = &quot;some_id&quot;, cascade= CascadeType.ALL)\r\n\r\n","title":"Found shared references to a collection org.hibernate.HibernateException","body":"<p>I changed</p>\n<pre><code>@OneToMany( cascade= CascadeType.ALL)\n    \n@JoinColumn(\n            name = &quot;some_id&quot;,\n            referencedColumnName = &quot;some_id&quot;\n    )\n\nto\n\n@OneToMany(mappedBy = &quot;some_id&quot;, cascade= CascadeType.ALL)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10791884,"reputation":53,"user_id":7940628,"display_name":"emolano"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673365965,"creation_date":1673365965,"answer_id":75072530,"question_id":1692871,"body_markdown":"You&#39;re using pointers(indirectly), so sometimes you&#39;re copying the memory address instead of the object/collection you want. Hibernate checks this and throw that error. Here&#39;s what can you do:\r\n\r\n 1. Don&#39;t copy the object/collection;\r\n 2. Initiate a new empty one;\r\n 3. Make a function to copy it&#39;s content and call it;\r\n\r\nFor example: \r\n\r\n    public Entity copyEntity(Entity e){\r\n        Entity copy = new Entity();\r\n        e.copy(name);\r\n        e.setCollection2(null);\r\n        e.setCollection3(copyCollection(e.getCollection3());\r\n        return copy;\r\n    }","title":"Found shared references to a collection org.hibernate.HibernateException","body":"<p>You're using pointers(indirectly), so sometimes you're copying the memory address instead of the object/collection you want. Hibernate checks this and throw that error. Here's what can you do:</p>\n<ol>\n<li>Don't copy the object/collection;</li>\n<li>Initiate a new empty one;</li>\n<li>Make a function to copy it's content and call it;</li>\n</ol>\n<p>For example:</p>\n<pre><code>public Entity copyEntity(Entity e){\n    Entity copy = new Entity();\n    e.copy(name);\n    e.setCollection2(null);\n    e.setCollection3(copyCollection(e.getCollection3());\n    return copy;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27604474,"reputation":1,"user_id":21068920,"display_name":"SS KK"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694517519,"creation_date":1694349076,"answer_id":77076106,"question_id":1692871,"body_markdown":"I was getting same error. And in my case, I had an incorrect relationship between my parent and child entities. I had `@OneToMany`, and changing it to `@ManyToMany` solved my problem.","title":"Found shared references to a collection org.hibernate.HibernateException","body":"<p>I was getting same error. And in my case, I had an incorrect relationship between my parent and child entities. I had <code>@OneToMany</code>, and changing it to <code>@ManyToMany</code> solved my problem.</p>\n"},{"tags":[],"owner":{"account_id":14537432,"reputation":874,"user_id":10500330,"display_name":"Anurag Bhalekar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698037060,"creation_date":1698037060,"answer_id":77342709,"question_id":1692871,"body_markdown":"It basically means that JPA doesn&#39;t want to save the exact same instance again, just being associated (set) to another object. Create a deep copy instead, and you should be fine.","title":"Found shared references to a collection org.hibernate.HibernateException","body":"<p>It basically means that JPA doesn't want to save the exact same instance again, just being associated (set) to another object. Create a deep copy instead, and you should be fine.</p>\n"}],"owner":{"account_id":41025,"reputation":10135,"user_id":119139,"accept_rate":67,"display_name":"nightingale2k1"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":152809,"favorite_count":0,"down_vote_count":1,"up_vote_count":85,"accepted_answer_id":1694236,"answer_count":17,"score":84,"last_activity_date":1698037060,"creation_date":1257596846,"question_id":1692871,"body_markdown":"I got this error message:\r\n\r\n&gt; error: Found shared references to a collection: Person.relatedPersons\r\n\r\nWhen I tried to execute `addToRelatedPersons(anotherPerson)`:\r\n\r\n    person.addToRelatedPersons(anotherPerson);\r\n    anotherPerson.addToRelatedPersons(person);\r\n    \r\n    anotherPerson.save();\r\n    person.save();\r\n\r\nMy domain:\r\n\r\n    Person {\r\n    \r\n     static hasMany = [relatedPersons:Person];\r\n    \r\n    }\r\n\r\nany idea why this happens ?\r\n\r\n","title":"Found shared references to a collection org.hibernate.HibernateException","body":"<p>I got this error message:</p>\n\n<blockquote>\n  <p>error: Found shared references to a collection: Person.relatedPersons</p>\n</blockquote>\n\n<p>When I tried to execute <code>addToRelatedPersons(anotherPerson)</code>:</p>\n\n<pre><code>person.addToRelatedPersons(anotherPerson);\nanotherPerson.addToRelatedPersons(person);\n\nanotherPerson.save();\nperson.save();\n</code></pre>\n\n<p>My domain:</p>\n\n<pre><code>Person {\n\n static hasMany = [relatedPersons:Person];\n\n}\n</code></pre>\n\n<p>any idea why this happens ?</p>\n"},{"tags":["java","pdf","barcode","aspose.pdf","adobe-javascript"],"comments":[{"owner":{"account_id":5335569,"reputation":4676,"user_id":4254700,"display_name":"joelgeraci"},"score":0,"creation_date":1492974273,"post_id":43568719,"comment_id":74200693,"body_markdown":"Dynamic barcodes in PDF are actually calculated text fields with special appearances. In order to give you an answer, I&#39;ll need to know if you want the text value of the barcode to be tab delimited or XML and if you want the field names to be included.","body":"Dynamic barcodes in PDF are actually calculated text fields with special appearances. In order to give you an answer, I&#39;ll need to know if you want the text value of the barcode to be tab delimited or XML and if you want the field names to be included."},{"owner":{"account_id":3019075,"reputation":123,"user_id":2560522,"display_name":"Marius Cirstea"},"score":0,"creation_date":1492975357,"post_id":43568719,"comment_id":74201054,"body_markdown":"Hei Joel, I don&#39;t need the text value to be displayed under the barcode. Can you provide me some hints for both situations (tab delimited/xml)? Also, it would be nice to include field names into generated barcode information. Thank you","body":"Hei Joel, I don&#39;t need the text value to be displayed under the barcode. Can you provide me some hints for both situations (tab delimited/xml)? Also, it would be nice to include field names into generated barcode information. Thank you"},{"owner":{"account_id":1917572,"reputation":441,"user_id":1729837,"display_name":"codewarior"},"score":0,"creation_date":1493148049,"post_id":43568719,"comment_id":74287380,"body_markdown":"In order to accomplish this requirement, you can get user input, pass this information to Aspose.Barcode for Java to generate barcode image and then add this image to PDF file using Aspose.Pdf for Java.\nPlease check https://docs.aspose.com/display/barcodejava/Set+Code+Text+for+Barcode\nand\nhttps://docs.aspose.com/display/pdfjava/Add%2C+Delete+and+Extract+Images+from+the+PDF+file#Add,DeleteandExtractImagesfromthePDFfile-AddImagetoExistingPDFFile","body":"In order to accomplish this requirement, you can get user input, pass this information to Aspose.Barcode for Java to generate barcode image and then add this image to PDF file using Aspose.Pdf for Java. Please check <a href=\"https://docs.aspose.com/display/barcodejava/Set+Code+Text+for+Barcode\" rel=\"nofollow noreferrer\">docs.aspose.com/display/barcodejava/Set+Code+Text+for+Barcod&zwnj;&#8203;e</a> and <a href=\"https://docs.aspose.com/display/pdfjava/Add%2C+Delete+and+Extract+Images+from+the+PDF+file#Add,DeleteandExtractImagesfromthePDFfile-AddImagetoExistingPDFFile\" rel=\"nofollow noreferrer\">docs.aspose.com/display/pdfjava/&hellip;</a>"},{"owner":{"account_id":3019075,"reputation":123,"user_id":2560522,"display_name":"Marius Cirstea"},"score":0,"creation_date":1493186645,"post_id":43568719,"comment_id":74300999,"body_markdown":"Thank you for your reply @codewarior, but I need to trigger the generate and regenerate barcode events from Javascript. After the PDF document was generated with Aspose (PDF+Barcode), I won&#39;t be able to &quot;touch&quot; it. any idea?","body":"Thank you for your reply @codewarior, but I need to trigger the generate and regenerate barcode events from Javascript. After the PDF document was generated with Aspose (PDF+Barcode), I won&#39;t be able to &quot;touch&quot; it. any idea?"},{"owner":{"account_id":1917572,"reputation":441,"user_id":1729837,"display_name":"codewarior"},"score":0,"creation_date":1493267630,"post_id":43568719,"comment_id":74345385,"body_markdown":"As per my understanding, you need to generate Barcode through JavaScript trigger/event ? Therefore you need the API to work with JavaScript.\nPlease share the details, so I can comment further.","body":"As per my understanding, you need to generate Barcode through JavaScript trigger/event ? Therefore you need the API to work with JavaScript. Please share the details, so I can comment further."},{"owner":{"account_id":3019075,"reputation":123,"user_id":2560522,"display_name":"Marius Cirstea"},"score":0,"creation_date":1493276956,"post_id":43568719,"comment_id":74349414,"body_markdown":"Hello again, @codewarior. \nI went a little further and found a solution to generate a barcode as a byte array in Javascript. Now, I need to &quot;draw&quot; that byte array on the pdf dynamically (triggered by Javascript validation event). On the other hand I found out that I can&#39;t use trusted functions inside document JS. You can see that at [link](http://imgur.com/a/08g1F)","body":"Hello again, @codewarior.  I went a little further and found a solution to generate a barcode as a byte array in Javascript. Now, I need to &quot;draw&quot; that byte array on the pdf dynamically (triggered by Javascript validation event). On the other hand I found out that I can&#39;t use trusted functions inside document JS. You can see that at <a href=\"http://imgur.com/a/08g1F\" rel=\"nofollow noreferrer\">link</a>"},{"owner":{"account_id":1917572,"reputation":441,"user_id":1729837,"display_name":"codewarior"},"score":0,"creation_date":1493385812,"post_id":43568719,"comment_id":74408714,"body_markdown":"Hi Marius, In order to add BarCode image to PDF file, first you need to save it in Image format and then use following code to add the image to PDF file using Aspose.Pdf for Java\n[Java]\nDocument doc = new Document();\nPage page = doc.getPages().add();\nImage image = new Image();\nimage.getMargin().setLeft(100);\nimage.setFile(&quot;c:/input.PNG&quot;);\npage.getParagraphs().add(image);\ndoc.save(&quot;c:/sample.pdf&quot;);","body":"Hi Marius, In order to add BarCode image to PDF file, first you need to save it in Image format and then use following code to add the image to PDF file using Aspose.Pdf for Java [Java] Document doc = new Document(); Page page = doc.getPages().add(); Image image = new Image(); image.getMargin().setLeft(100); image.setFile(&quot;c:/input.PNG&quot;); page.getParagraphs().add(image); doc.save(&quot;c:/sample.pdf&quot;);"},{"owner":{"account_id":3019075,"reputation":123,"user_id":2560522,"display_name":"Marius Cirstea"},"score":0,"creation_date":1493828585,"post_id":43568719,"comment_id":74572035,"body_markdown":"Hello again @codewarior, I need you to tell me if there is a way to generate a PDF417 barcode using the Javascript API provided by Adobe. I successfully managed to generate PDF417 barcode using Aspose.Barcode and then import the resulting image on a button field added dynamically with JS.\nBelow is the workflow I want to achieve:\nI have a textfield A, a button B and another button BC. When I press the B button, I want to get A&#39;s value and then generate an image with a coresponding PDF417 barcode value, which I will then set as buttonIcon for the BC button. Thank you for your patience, Marius","body":"Hello again @codewarior, I need you to tell me if there is a way to generate a PDF417 barcode using the Javascript API provided by Adobe. I successfully managed to generate PDF417 barcode using Aspose.Barcode and then import the resulting image on a button field added dynamically with JS. Below is the workflow I want to achieve: I have a textfield A, a button B and another button BC. When I press the B button, I want to get A&#39;s value and then generate an image with a coresponding PDF417 barcode value, which I will then set as buttonIcon for the BC button. Thank you for your patience, Marius"},{"owner":{"account_id":1917572,"reputation":441,"user_id":1729837,"display_name":"codewarior"},"score":0,"creation_date":1493902146,"post_id":43568719,"comment_id":74606971,"body_markdown":"Hi Marius, as per my understanding, you have managed to accomplish the requirement of PDF417 Barcode generation using Aspose.Barcode and have been able to place the image as icon over button and now you are looking for same functionality using API provided by Adobe ?","body":"Hi Marius, as per my understanding, you have managed to accomplish the requirement of PDF417 Barcode generation using Aspose.Barcode and have been able to place the image as icon over button and now you are looking for same functionality using API provided by Adobe ?"},{"owner":{"account_id":3019075,"reputation":123,"user_id":2560522,"display_name":"Marius Cirstea"},"score":0,"creation_date":1493905272,"post_id":43568719,"comment_id":74609464,"body_markdown":"Exactly. Is anything I can do to generate the barcode with Java, when I click a button from Pdf (Javascript). Or is there a way to generate a barcode field directly from Javascript? I tried adding a field as text and then set it&#39;s cFieldType to &quot;barcode&quot;, but nothing happened. Thanks","body":"Exactly. Is anything I can do to generate the barcode with Java, when I click a button from Pdf (Javascript). Or is there a way to generate a barcode field directly from Javascript? I tried adding a field as text and then set it&#39;s cFieldType to &quot;barcode&quot;, but nothing happened. Thanks"},{"owner":{"account_id":1917572,"reputation":441,"user_id":1729837,"display_name":"codewarior"},"score":0,"creation_date":1494016956,"post_id":43568719,"comment_id":74666388,"body_markdown":"Hi Marius, I am afraid Aspose.BarCode does not provide the feature requested above. But you can explore the Aspose,BarCode REST API and it can be useful.\nhttps://www.aspose.com/products/barcode/cloud","body":"Hi Marius, I am afraid Aspose.BarCode does not provide the feature requested above. But you can explore the Aspose,BarCode REST API and it can be useful. <a href=\"https://www.aspose.com/products/barcode/cloud\" rel=\"nofollow noreferrer\">aspose.com/products/barcode/cloud</a>"},{"owner":{"account_id":3019075,"reputation":123,"user_id":2560522,"display_name":"Marius Cirstea"},"score":0,"creation_date":1494151430,"post_id":43568719,"comment_id":74697568,"body_markdown":"Hi all, do you know any method of adding a PDF417 barcode into a form programmatically, using only Javascript? I tried the following https://jsfiddle.net/5wjdqL2t/ , but I only get a gray rectangle, saying &quot;Barcode Render Error&quot;. Using the Prepare Form, I am able to insert a valid barcode and work with it, but I need to do that programmatically. Thanks","body":"Hi all, do you know any method of adding a PDF417 barcode into a form programmatically, using only Javascript? I tried the following <a href=\"https://jsfiddle.net/5wjdqL2t/\" rel=\"nofollow noreferrer\">jsfiddle.net/5wjdqL2t</a> , but I only get a gray rectangle, saying &quot;Barcode Render Error&quot;. Using the Prepare Form, I am able to insert a valid barcode and work with it, but I need to do that programmatically. Thanks"},{"owner":{"account_id":1917572,"reputation":441,"user_id":1729837,"display_name":"codewarior"},"score":0,"creation_date":1494276799,"post_id":43568719,"comment_id":74749999,"body_markdown":"Hi, If you consider using Aspose.Barcode, you can generate Barcode image and then add it to PDF file using Aspose.Pdf for Cloud API.\n\nExample code is shared over https://gist.github.com/aspose-pdf/12c062ac4f2dfa4cd833a5227405bb99#file-examples-dotnet-csharp-form-fields-updateformfield-1-cs","body":"Hi, If you consider using Aspose.Barcode, you can generate Barcode image and then add it to PDF file using Aspose.Pdf for Cloud API.  Example code is shared over <a href=\"https://gist.github.com/aspose-pdf/12c062ac4f2dfa4cd833a5227405bb99#file-examples-dotnet-csharp-form-fields-updateformfield-1-cs\" rel=\"nofollow noreferrer\">gist.github.com/aspose-pdf/&hellip;</a>"}],"owner":{"account_id":3019075,"reputation":123,"user_id":2560522,"display_name":"Marius Cirstea"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":791,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698036922,"creation_date":1492934199,"question_id":43568719,"body_markdown":"I&#39;m trying to generate some editable PDF using Java. For that I&#39;m using the Aspose.PDF library ([Aspose.PDF Java][1]), which exposes some nice methods, which allow me to generate a document, like the one below, but only at runtime.\r\n[![GeneratedTexts][2]][2]  \r\nI need to know if there is a way to add (or edit) a TextBoxField barcode when the user fills the given text fields with data. I would like to use the text field validation event and regenerate the barcode, just like in the workflow described below.\r\n[![PDF Generate diagram][3]][3]  \r\nAny suggestion would be appreciated!\r\n\r\n  [1]: https://www.aspose.com/products/pdf/java\r\n  [2]: https://i.stack.imgur.com/gvS5I.png\r\n  [3]: https://i.stack.imgur.com/uTa36.png","title":"Editable PDF with dynamic barcode generation","body":"<p>I'm trying to generate some editable PDF using Java. For that I'm using the Aspose.PDF library (<a href=\"https://www.aspose.com/products/pdf/java\" rel=\"nofollow noreferrer\">Aspose.PDF Java</a>), which exposes some nice methods, which allow me to generate a document, like the one below, but only at runtime.\n<a href=\"https://i.stack.imgur.com/gvS5I.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gvS5I.png\" alt=\"GeneratedTexts\"></a><br>\nI need to know if there is a way to add (or edit) a TextBoxField barcode when the user fills the given text fields with data. I would like to use the text field validation event and regenerate the barcode, just like in the workflow described below.\n<a href=\"https://i.stack.imgur.com/uTa36.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uTa36.png\" alt=\"PDF Generate diagram\"></a><br>\nAny suggestion would be appreciated!</p>\n"},{"tags":["java","sorting","merge","compare","swap"],"comments":[{"owner":{"account_id":5559444,"reputation":43202,"user_id":4409409,"display_name":"Daniel Nugent"},"score":0,"creation_date":1430328515,"post_id":29950160,"comment_id":48022010,"body_markdown":"Are you trying to get the total counts of swaps and compares after all of the recursive calls are completed?","body":"Are you trying to get the total counts of swaps and compares after all of the recursive calls are completed?"},{"owner":{"account_id":5918087,"reputation":145,"user_id":4656232,"accept_rate":56,"display_name":"sippycup"},"score":0,"creation_date":1430328656,"post_id":29950160,"comment_id":48022095,"body_markdown":"Yea I am trying to sysout the results to understand how each sorting method works.","body":"Yea I am trying to sysout the results to understand how each sorting method works."}],"answers":[{"tags":[],"owner":{"account_id":5495336,"reputation":1198,"user_id":4366670,"display_name":"Rezwan Azfar Haleem"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1430329788,"creation_date":1430329788,"answer_id":29950946,"question_id":29950160,"body_markdown":"Make a global variable or a field within the class which holds the merge and merge sort methods. This will allow the methods to increment to the variable. If you declare inside the method it will stay as a local variable and each recursive call will produce different local variables of the same name but belonging to the different recursive method calls. Therefore your code should look like:\r\n\r\n    public class ClassWithMergeMethodInside\r\n    {\r\n        int swapCount;\r\n        int compCount;\r\n        \r\n        public void mergeSort(int[] a, int howMany) {\r\n            //Since merge sort begins here you may initiliaze the variables here\r\n            swapCount = 0;\r\n            compCount = 0;\r\n            if (a.length &gt;= 2) {\r\n                // split array into two halves\r\n                int[] left  = Arrays.copyOfRange(a, 0, a.length/2);\r\n                int[] right = Arrays.copyOfRange(a, a.length/2, a.length);\r\n\r\n\r\n                // sort the two halves\r\n                mergeSort(left,howMany);\r\n                mergeSort(right, howMany);\r\n        \r\n                // merge the sorted halves into a sorted whole\r\n                merge(a, left, right);\r\n    \r\n            }\r\n        }\r\n    \r\n    \r\n    \r\n    \r\n        // Merges the left/right elements into a sorted result.\r\n        // Precondition: left/right are sorted\r\n        public static void merge(int[] result, int[] left, \r\n                                               int[] right) {\r\n            int i1 = 0;   // index into left array\r\n            int i2 = 0;   // index into right array\r\n            //Will not declare counter variables here\r\n            for (int i = 0; i &lt; result.length; i++) {\r\n                compCount++;\r\n                if (i2 &gt;= right.length ||\r\n                   (i1 &lt; left.length &amp;&amp; left[i1] &lt;= right[i2])) {\r\n                    result[i] = left[i1];    // take from left\r\n                    i1++;\r\n                   swapCount++;\r\n                } else {\r\n                    result[i] = right[i2];   // take from right\r\n                    i2++;\r\n                   swapCount++;\r\n                }\r\n            }\r\n           //figure this loop issue out System.out.println(&quot;merge sort &quot; + compCount + &quot; &quot; + swapCount);\r\n        }\r\n    }","title":"Merge Sort count number of swaps and compares","body":"<p>Make a global variable or a field within the class which holds the merge and merge sort methods. This will allow the methods to increment to the variable. If you declare inside the method it will stay as a local variable and each recursive call will produce different local variables of the same name but belonging to the different recursive method calls. Therefore your code should look like:</p>\n\n<pre><code>public class ClassWithMergeMethodInside\n{\n    int swapCount;\n    int compCount;\n\n    public void mergeSort(int[] a, int howMany) {\n        //Since merge sort begins here you may initiliaze the variables here\n        swapCount = 0;\n        compCount = 0;\n        if (a.length &gt;= 2) {\n            // split array into two halves\n            int[] left  = Arrays.copyOfRange(a, 0, a.length/2);\n            int[] right = Arrays.copyOfRange(a, a.length/2, a.length);\n\n\n            // sort the two halves\n            mergeSort(left,howMany);\n            mergeSort(right, howMany);\n\n            // merge the sorted halves into a sorted whole\n            merge(a, left, right);\n\n        }\n    }\n\n\n\n\n    // Merges the left/right elements into a sorted result.\n    // Precondition: left/right are sorted\n    public static void merge(int[] result, int[] left, \n                                           int[] right) {\n        int i1 = 0;   // index into left array\n        int i2 = 0;   // index into right array\n        //Will not declare counter variables here\n        for (int i = 0; i &lt; result.length; i++) {\n            compCount++;\n            if (i2 &gt;= right.length ||\n               (i1 &lt; left.length &amp;&amp; left[i1] &lt;= right[i2])) {\n                result[i] = left[i1];    // take from left\n                i1++;\n               swapCount++;\n            } else {\n                result[i] = right[i2];   // take from right\n                i2++;\n               swapCount++;\n            }\n        }\n       //figure this loop issue out System.out.println(\"merge sort \" + compCount + \" \" + swapCount);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5559444,"reputation":43202,"user_id":4409409,"display_name":"Daniel Nugent"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1430329856,"creation_date":1430329856,"answer_id":29950962,"question_id":29950160,"body_markdown":"I think the most elegant solution is to simulate pass-by-reference by using an `int` wrapper class.  Everything in Java is pass-by-value, but if you don&#39;t change the reference that an Object reference points to, you can simulate pass-by-reference for recursive calls.\r\n\r\n\r\nHere is an example:\r\n\r\n    import java.util.Arrays; \r\n    \r\n    public class TestMain\r\n    {\r\n      public static void main(String[] args)\r\n      {\r\n        int[] array = new int[]{6, 2, 1, 4, 5, 3};\r\n        \r\n        IntWrapper countCompare = new IntWrapper();\r\n        IntWrapper countSwap = new IntWrapper();\r\n        \r\n        \r\n        \r\n        MergeSort mSort = new MergeSort();\r\n        \r\n        mSort.mergeSort(array, countCompare, countSwap);\r\n        \r\n        System.out.println(&quot;Compares: &quot; + countCompare.val);\r\n        \r\n        System.out.println(&quot;Swaps: &quot; + countSwap.val);\r\n        \r\n        for (int i = 0; i &lt; array.length; i++){\r\n        \tSystem.out.print(String.format(&quot;%-3d&quot;, array[i]));\r\n        }\r\n      }\r\n      \r\n      \r\n    }\r\n    \r\n    public class IntWrapper{\r\n       int val = 0; \r\n    }\r\n    \r\n    public class MergeSort\r\n    {\r\n       \r\n      \r\n        public void mergeSort(int[] a, IntWrapper compares, IntWrapper swaps) {\r\n    \r\n    \r\n          if (a.length &gt;= 2) {\r\n              // split array into two halves\r\n              int[] left  = Arrays.copyOfRange(a, 0, a.length/2);\r\n              int[] right = Arrays.copyOfRange(a, a.length/2, a.length);\r\n    \r\n    \r\n              // sort the two halves\r\n              mergeSort(left, compares, swaps);\r\n              mergeSort(right, compares, swaps);\r\n    \r\n              // merge the sorted halves into a sorted whole\r\n              merge(a, left, right, compares, swaps);\r\n    \r\n          }\r\n      }\r\n    \r\n    \r\n    \r\n    \r\n      // Merges the left/right elements into a sorted result.\r\n      // Precondition: left/right are sorted\r\n      public static void merge(int[] result, int[] left, int[] right, IntWrapper compares, IntWrapper swaps) {\r\n          int i1 = 0;   // index into left array\r\n          int i2 = 0;   // index into right array\r\n         //int compCount = 0;\r\n         //int swapCount = 0;  \r\n          for (int i = 0; i &lt; result.length; i++) {\r\n              //compCount++;\r\n              compares.val++;\r\n              if (i2 &gt;= right.length ||\r\n                 (i1 &lt; left.length &amp;&amp; left[i1] &lt;= right[i2])) {\r\n                  result[i] = left[i1];    // take from left\r\n                  i1++;\r\n                 //swapCount++;\r\n                 swaps.val++;\r\n              } else {\r\n                  result[i] = right[i2];   // take from right\r\n                  i2++;\r\n                 //swapCount++;\r\n                 swaps.val++;\r\n              }\r\n          }\r\n         //figure this loop issue out System.out.println(&quot;merge sort &quot; + compCount + &quot; &quot; + swapCount);\r\n      }\r\n    }\r\n\r\nOutput:\r\n\r\n    Compares: 16\r\n    Swaps: 16\r\n    1  2  3  4  5  6  \r\n\r\n","title":"Merge Sort count number of swaps and compares","body":"<p>I think the most elegant solution is to simulate pass-by-reference by using an <code>int</code> wrapper class.  Everything in Java is pass-by-value, but if you don't change the reference that an Object reference points to, you can simulate pass-by-reference for recursive calls.</p>\n\n<p>Here is an example:</p>\n\n<pre><code>import java.util.Arrays; \n\npublic class TestMain\n{\n  public static void main(String[] args)\n  {\n    int[] array = new int[]{6, 2, 1, 4, 5, 3};\n\n    IntWrapper countCompare = new IntWrapper();\n    IntWrapper countSwap = new IntWrapper();\n\n\n\n    MergeSort mSort = new MergeSort();\n\n    mSort.mergeSort(array, countCompare, countSwap);\n\n    System.out.println(\"Compares: \" + countCompare.val);\n\n    System.out.println(\"Swaps: \" + countSwap.val);\n\n    for (int i = 0; i &lt; array.length; i++){\n        System.out.print(String.format(\"%-3d\", array[i]));\n    }\n  }\n\n\n}\n\npublic class IntWrapper{\n   int val = 0; \n}\n\npublic class MergeSort\n{\n\n\n    public void mergeSort(int[] a, IntWrapper compares, IntWrapper swaps) {\n\n\n      if (a.length &gt;= 2) {\n          // split array into two halves\n          int[] left  = Arrays.copyOfRange(a, 0, a.length/2);\n          int[] right = Arrays.copyOfRange(a, a.length/2, a.length);\n\n\n          // sort the two halves\n          mergeSort(left, compares, swaps);\n          mergeSort(right, compares, swaps);\n\n          // merge the sorted halves into a sorted whole\n          merge(a, left, right, compares, swaps);\n\n      }\n  }\n\n\n\n\n  // Merges the left/right elements into a sorted result.\n  // Precondition: left/right are sorted\n  public static void merge(int[] result, int[] left, int[] right, IntWrapper compares, IntWrapper swaps) {\n      int i1 = 0;   // index into left array\n      int i2 = 0;   // index into right array\n     //int compCount = 0;\n     //int swapCount = 0;  \n      for (int i = 0; i &lt; result.length; i++) {\n          //compCount++;\n          compares.val++;\n          if (i2 &gt;= right.length ||\n             (i1 &lt; left.length &amp;&amp; left[i1] &lt;= right[i2])) {\n              result[i] = left[i1];    // take from left\n              i1++;\n             //swapCount++;\n             swaps.val++;\n          } else {\n              result[i] = right[i2];   // take from right\n              i2++;\n             //swapCount++;\n             swaps.val++;\n          }\n      }\n     //figure this loop issue out System.out.println(\"merge sort \" + compCount + \" \" + swapCount);\n  }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Compares: 16\nSwaps: 16\n1  2  3  4  5  6  \n</code></pre>\n"}],"owner":{"account_id":5918087,"reputation":145,"user_id":4656232,"accept_rate":56,"display_name":"sippycup"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9746,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1698034070,"creation_date":1430327142,"question_id":29950160,"body_markdown":"I have this existing code that I need to add a swap and compare counter for. So far I believe I have the counts correctly however I cannot get the output to no display a loop of each swap.\r\n\r\n    public void mergeSort(int[] a, int howMany) {\r\n\t\t\r\n\t\t\r\n\t    if (a.length &gt;= 2) {\r\n\t        // split array into two halves\r\n\t        int[] left  = Arrays.copyOfRange(a, 0, a.length/2);\r\n\t        int[] right = Arrays.copyOfRange(a, a.length/2, a.length);\r\n\r\n\t\r\n\t        // sort the two halves\r\n\t        mergeSort(left,howMany);\r\n\t        mergeSort(right, howMany);\r\n\r\n\t        // merge the sorted halves into a sorted whole\r\n\t        merge(a, left, right);\r\n           \r\n\t    }\r\n\t}\r\n\r\n\t\r\n\r\n\t\r\n\t// Merges the left/right elements into a sorted result.\r\n\t// Precondition: left/right are sorted\r\n\tpublic static void merge(int[] result, int[] left, \r\n\t                                       int[] right) {\r\n\t    int i1 = 0;   // index into left array\r\n\t    int i2 = 0;   // index into right array\r\n       int compCount = 0;\r\n       int swapCount = 0;  \r\n\t    for (int i = 0; i &lt; result.length; i++) {\r\n            compCount++;\r\n\t        if (i2 &gt;= right.length ||\r\n\t           (i1 &lt; left.length &amp;&amp; left[i1] &lt;= right[i2])) {\r\n\t            result[i] = left[i1];    // take from left\r\n\t            i1++;\r\n               swapCount++;\r\n\t        } else {\r\n\t            result[i] = right[i2];   // take from right\r\n\t            i2++;\r\n               swapCount++;\r\n\t        }\r\n\t    }\r\n       //figure this loop issue out System.out.println(&quot;merge sort &quot; + compCount + &quot; &quot; + swapCount);\r\n\t}","title":"Merge Sort count number of swaps and compares","body":"<p>I have this existing code that I need to add a swap and compare counter for. So far I believe I have the counts correctly however I cannot get the output to no display a loop of each swap.</p>\n\n<pre><code>public void mergeSort(int[] a, int howMany) {\n\n\n    if (a.length &gt;= 2) {\n        // split array into two halves\n        int[] left  = Arrays.copyOfRange(a, 0, a.length/2);\n        int[] right = Arrays.copyOfRange(a, a.length/2, a.length);\n\n\n        // sort the two halves\n        mergeSort(left,howMany);\n        mergeSort(right, howMany);\n\n        // merge the sorted halves into a sorted whole\n        merge(a, left, right);\n\n    }\n}\n\n\n\n\n// Merges the left/right elements into a sorted result.\n// Precondition: left/right are sorted\npublic static void merge(int[] result, int[] left, \n                                       int[] right) {\n    int i1 = 0;   // index into left array\n    int i2 = 0;   // index into right array\n   int compCount = 0;\n   int swapCount = 0;  \n    for (int i = 0; i &lt; result.length; i++) {\n        compCount++;\n        if (i2 &gt;= right.length ||\n           (i1 &lt; left.length &amp;&amp; left[i1] &lt;= right[i2])) {\n            result[i] = left[i1];    // take from left\n            i1++;\n           swapCount++;\n        } else {\n            result[i] = right[i2];   // take from right\n            i2++;\n           swapCount++;\n        }\n    }\n   //figure this loop issue out System.out.println(\"merge sort \" + compCount + \" \" + swapCount);\n}\n</code></pre>\n"},{"tags":["java","json","jackson","spring-jms"],"comments":[{"owner":{"account_id":9144834,"reputation":4430,"user_id":6801443,"display_name":"Sean F"},"score":0,"creation_date":1603715537,"post_id":64428070,"comment_id":114114589,"body_markdown":"I don&#39;t see how it can use your jmsListenerQueueFactory method because you have given it your own method  signature. So that method is likely not getting called, so the error handler is not set.","body":"I don&#39;t see how it can use your jmsListenerQueueFactory method because you have given it your own method  signature. So that method is likely not getting called, so the error handler is not set."},{"owner":{"account_id":337700,"reputation":6689,"user_id":666133,"accept_rate":95,"display_name":"Patrick D"},"score":0,"creation_date":1603731949,"post_id":64428070,"comment_id":114123078,"body_markdown":"If you are referring to the method parameters of the factory, these are beans injected by type via Spring.","body":"If you are referring to the method parameters of the factory, these are beans injected by type via Spring."}],"answers":[{"tags":[],"owner":{"account_id":3175948,"reputation":74316,"user_id":2683814,"accept_rate":100,"display_name":"s7vr"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1603726812,"creation_date":1603726812,"answer_id":64540337,"question_id":64428070,"body_markdown":"Looks like ConditionalOnMissingBean autoconfiguration is on [bean name]( https://github.com/spring-projects/spring-boot/blob/v2.3.4.RELEASE/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/jms/JmsAnnotationDrivenConfiguration.java#L76)\r\n\r\nSo you should have something like this.\r\n\r\n  \r\n\r\n    @Bean\r\n      public JmsListenerContainerFactory&lt;?&gt; jmsListenerContainerFactory(ConnectionFactory connectionFactory,\r\n          DefaultJmsListenerContainerFactoryConfigurer configurer, JmsErrorHandler jmsErrorHandler) {\r\n        DefaultJmsListenerContainerFactory factory = new DefaultJmsListenerContainerFactory();\r\n        factory.setErrorHandler(jmsErrorHandler); // &lt;-- I expect this to be used\r\n        configurer.configure(factory, connectionFactory);\r\n        return factory;\r\n      }","title":"Spring JMS MappingJackson2MessageConverter - No way to handle errors","body":"<p>Looks like ConditionalOnMissingBean autoconfiguration is on <a href=\"https://github.com/spring-projects/spring-boot/blob/v2.3.4.RELEASE/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/jms/JmsAnnotationDrivenConfiguration.java#L76\" rel=\"nofollow noreferrer\">bean name</a></p>\n<p>So you should have something like this.</p>\n<pre><code>@Bean\n  public JmsListenerContainerFactory&lt;?&gt; jmsListenerContainerFactory(ConnectionFactory connectionFactory,\n      DefaultJmsListenerContainerFactoryConfigurer configurer, JmsErrorHandler jmsErrorHandler) {\n    DefaultJmsListenerContainerFactory factory = new DefaultJmsListenerContainerFactory();\n    factory.setErrorHandler(jmsErrorHandler); // &lt;-- I expect this to be used\n    configurer.configure(factory, connectionFactory);\n    return factory;\n  }\n</code></pre>\n"}],"owner":{"account_id":337700,"reputation":6689,"user_id":666133,"accept_rate":95,"display_name":"Patrick D"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1844,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":64540337,"answer_count":1,"score":1,"last_activity_date":1698034001,"creation_date":1603113122,"question_id":64428070,"body_markdown":"I am using Spring JMS, and I am using the `MappingJackson2MessageConverter` to pass along messages between various components. \r\n\r\nMy core problem is that when the `MappingJackson2MessageConverter` experiences an internal deserialization error, when deserializing a String into some Object, these exceptions are not raised in any way that I can respond to them. My Error Handler logic never gets called, and no exceptions are thrown that I have access to. These deserialization errors appear to be completely swallowed and, while they are logged in the console, I am offered no chance to perform custom logic in response to them.\r\n\r\nI define my `MappingJackson2MessageConverter` bean as follows:\r\n\r\n```  \r\n  @Bean\r\n  public MessageConverter jacksonJmsMessageConverter() {\r\n    MappingJackson2MessageConverter converter = new MappingJackson2MessageConverter();\r\n    converter.setTargetType(MessageType.TEXT);\r\n    converter.setTypeIdPropertyName(&quot;_type&quot;);\r\n    return converter;\r\n  }\r\n```\r\n\r\nI define a JMS Listener factory as follows:\r\n\r\n```  \r\n  @Bean\r\n  public JmsListenerContainerFactory&lt;?&gt; jmsListenerQueueFactory(ConnectionFactory connectionFactory,\r\n      DefaultJmsListenerContainerFactoryConfigurer configurer, JmsErrorHandler jmsErrorHandler) {\r\n    DefaultJmsListenerContainerFactory factory = new DefaultJmsListenerContainerFactory();\r\n    factory.setErrorHandler(jmsErrorHandler); // &lt;-- I expect this to be used\r\n    configurer.configure(factory, connectionFactory);\r\n\r\n    return factory;\r\n  }\r\n```\r\n\r\nOf importance in the above line is the `setErrorHandler` call. I have defined a simple `ErrorHandler` object that is attempting to catch errors that my `@JmsListener` methods may throw. This simple error handler looks like this:\r\n\r\n```\r\n  public class JmsErrorHandler implements ErrorHandler {\r\n\r\n  @Override\r\n  public void handleError(Throwable t) {\r\n    System.out.println(&quot;WE HAVE THE ERROR!&quot;);\r\n  }\r\n}\r\n```\r\n\r\nMy listener is also simple, as follows:\r\n\r\n```\r\n  @JmsListener(id = MY_ID, destination = MY_DEST)\r\n  public void processMessage(MyPojoMessage myPojoMessage) {\r\n     // This code is obviously never reached, since the serialization error occurs. \r\n```\r\n\r\nOverall, this is a very simple and basic setup. Now when I send an invalid message, that Jackson will *fail* to parse, I get the following errors in my console:\r\n\r\n```\r\n19-10-2020 09:05:33.933 [35m[DefaultMessageListenerContainer-1][0;39m [31mWARN [0;39m o.s.j.l.DefaultMessageListenerContainer.invokeErrorHandler - Execution of JMS message listener failed, and no ErrorHandler has been set.\r\n\r\norg.springframework.jms.listener.adapter.ListenerExecutionFailedException: Listener method &#39;public void com.example.processMessage(com.example.MyPojoMessage)&#39; threw exception; nested exception is org.springframework.jms.support.converter.MessageConversionException: Failed to convert JSON message content; nested exception is com.fasterxml.jackson.databind.JsonMappingException\r\n```\r\n\r\nThis exception is expected - since I provide an invalid payload that Jackson cannot serialize. However, there is seemingly *no way* for me to configure the code to actually catch this exception in a way I can respond to it. I am setting the Error Handler in the above code. Yet the logs complain that `no ErrorHandler has been set` which seems wrong. \r\n\r\nI see no other ways to get a reference to this Jackson inner exception. Is there any way?","title":"Spring JMS MappingJackson2MessageConverter - No way to handle errors","body":"<p>I am using Spring JMS, and I am using the <code>MappingJackson2MessageConverter</code> to pass along messages between various components.</p>\n<p>My core problem is that when the <code>MappingJackson2MessageConverter</code> experiences an internal deserialization error, when deserializing a String into some Object, these exceptions are not raised in any way that I can respond to them. My Error Handler logic never gets called, and no exceptions are thrown that I have access to. These deserialization errors appear to be completely swallowed and, while they are logged in the console, I am offered no chance to perform custom logic in response to them.</p>\n<p>I define my <code>MappingJackson2MessageConverter</code> bean as follows:</p>\n<pre><code>  @Bean\n  public MessageConverter jacksonJmsMessageConverter() {\n    MappingJackson2MessageConverter converter = new MappingJackson2MessageConverter();\n    converter.setTargetType(MessageType.TEXT);\n    converter.setTypeIdPropertyName(&quot;_type&quot;);\n    return converter;\n  }\n</code></pre>\n<p>I define a JMS Listener factory as follows:</p>\n<pre><code>  @Bean\n  public JmsListenerContainerFactory&lt;?&gt; jmsListenerQueueFactory(ConnectionFactory connectionFactory,\n      DefaultJmsListenerContainerFactoryConfigurer configurer, JmsErrorHandler jmsErrorHandler) {\n    DefaultJmsListenerContainerFactory factory = new DefaultJmsListenerContainerFactory();\n    factory.setErrorHandler(jmsErrorHandler); // &lt;-- I expect this to be used\n    configurer.configure(factory, connectionFactory);\n\n    return factory;\n  }\n</code></pre>\n<p>Of importance in the above line is the <code>setErrorHandler</code> call. I have defined a simple <code>ErrorHandler</code> object that is attempting to catch errors that my <code>@JmsListener</code> methods may throw. This simple error handler looks like this:</p>\n<pre><code>  public class JmsErrorHandler implements ErrorHandler {\n\n  @Override\n  public void handleError(Throwable t) {\n    System.out.println(&quot;WE HAVE THE ERROR!&quot;);\n  }\n}\n</code></pre>\n<p>My listener is also simple, as follows:</p>\n<pre><code>  @JmsListener(id = MY_ID, destination = MY_DEST)\n  public void processMessage(MyPojoMessage myPojoMessage) {\n     // This code is obviously never reached, since the serialization error occurs. \n</code></pre>\n<p>Overall, this is a very simple and basic setup. Now when I send an invalid message, that Jackson will <em>fail</em> to parse, I get the following errors in my console:</p>\n<pre><code>19-10-2020 09:05:33.933 [35m[DefaultMessageListenerContainer-1][0;39m [31mWARN [0;39m o.s.j.l.DefaultMessageListenerContainer.invokeErrorHandler - Execution of JMS message listener failed, and no ErrorHandler has been set.\n\norg.springframework.jms.listener.adapter.ListenerExecutionFailedException: Listener method 'public void com.example.processMessage(com.example.MyPojoMessage)' threw exception; nested exception is org.springframework.jms.support.converter.MessageConversionException: Failed to convert JSON message content; nested exception is com.fasterxml.jackson.databind.JsonMappingException\n</code></pre>\n<p>This exception is expected - since I provide an invalid payload that Jackson cannot serialize. However, there is seemingly <em>no way</em> for me to configure the code to actually catch this exception in a way I can respond to it. I am setting the Error Handler in the above code. Yet the logs complain that <code>no ErrorHandler has been set</code> which seems wrong.</p>\n<p>I see no other ways to get a reference to this Jackson inner exception. Is there any way?</p>\n"},{"tags":["java","kotlin","kotlin-java-interop"],"answers":[{"tags":[],"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698033996,"creation_date":1698033996,"answer_id":77342586,"question_id":77342585,"body_markdown":"I couldn&#39;t find an annotation like that, but a workaround would be to write extension functions in Kotlin that act as wrappers for the Java methods. The Java methods can be marked `@kotlin.Deprecated` (not `@java.lang.Deprecated`!).\r\n\r\n```java\r\nimport kotlin.Deprecated;\r\nimport kotlin.ReplaceWith;\r\n\r\npublic class Foo {\r\n\r\n    @Deprecated(\r\n            message = &quot;Use doFoo instead&quot;,\r\n            replaceWith = @ReplaceWith(expression = &quot;doFoo(list)&quot;, imports = {})\r\n            // should add the package in which the wrapper extension functions resides into &quot;imports = {}&quot;\r\n    )\r\n    public void doFooWithStrings(List&lt;String&gt; list) { ... }\r\n    @Deprecated(\r\n            message = &quot;Use doFoo instead&quot;,\r\n            replaceWith = @ReplaceWith(expression = &quot;doFoo(list)&quot;, imports = {})\r\n    )\r\n    public void doFooWithInts(List&lt;Integer&gt; list) { ... }\r\n}\r\n```\r\n\r\n```kotlin\r\n@Suppress(&quot;DEPRECATION&quot;)\r\n@JvmName(&quot;doFooWithStrings&quot;) // ironically the wrapper functions also need different JVM names\r\n@JvmSynthetic\r\nfun Foo.doFoo(list: List&lt;String&gt;) {\r\n    doFooWithStrings(list)\r\n}\r\n\r\n@Suppress(&quot;DEPRECATION&quot;)\r\n@JvmName(&quot;doFooWithInts&quot;)\r\n@JvmSynthetic\r\nfun Foo.doFoo(list: List&lt;Int&gt;) {\r\n    doFooWithInts(list)\r\n}\r\n```","title":"How to make two Java methods have the same name in Kotlin?","body":"<p>I couldn't find an annotation like that, but a workaround would be to write extension functions in Kotlin that act as wrappers for the Java methods. The Java methods can be marked <code>@kotlin.Deprecated</code> (not <code>@java.lang.Deprecated</code>!).</p>\n<pre class=\"lang-java prettyprint-override\"><code>import kotlin.Deprecated;\nimport kotlin.ReplaceWith;\n\npublic class Foo {\n\n    @Deprecated(\n            message = &quot;Use doFoo instead&quot;,\n            replaceWith = @ReplaceWith(expression = &quot;doFoo(list)&quot;, imports = {})\n            // should add the package in which the wrapper extension functions resides into &quot;imports = {}&quot;\n    )\n    public void doFooWithStrings(List&lt;String&gt; list) { ... }\n    @Deprecated(\n            message = &quot;Use doFoo instead&quot;,\n            replaceWith = @ReplaceWith(expression = &quot;doFoo(list)&quot;, imports = {})\n    )\n    public void doFooWithInts(List&lt;Integer&gt; list) { ... }\n}\n</code></pre>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@Suppress(&quot;DEPRECATION&quot;)\n@JvmName(&quot;doFooWithStrings&quot;) // ironically the wrapper functions also need different JVM names\n@JvmSynthetic\nfun Foo.doFoo(list: List&lt;String&gt;) {\n    doFooWithStrings(list)\n}\n\n@Suppress(&quot;DEPRECATION&quot;)\n@JvmName(&quot;doFooWithInts&quot;)\n@JvmSynthetic\nfun Foo.doFoo(list: List&lt;Int&gt;) {\n    doFooWithInts(list)\n}\n</code></pre>\n"}],"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698033996,"creation_date":1698033996,"question_id":77342585,"body_markdown":"In Kotlin, one can use the `@JvmName` annotation to allow Java to refer to a declaration using a different name. For example, if two Kotlin methods have the same erasure.\r\n\r\n```kotlin\r\n@JvmName(&quot;doFooWithStrings&quot;)\r\nfun doFoo(list: List&lt;String&gt;) {\r\n    ...\r\n}\r\n\r\n@JvmName(&quot;doFooWithInts&quot;)\r\nfun doFoo(list: List&lt;Int&gt;) {\r\n   ...\r\n}\r\n```\r\n\r\nI want to do the opposite - I have two Java methods with different names, because they have the same erasure otherwise. I want these methods to have the same name in Kotlin.\r\n\r\n```java\r\npublic class Foo {\r\n    public void doFooWithStrings(List&lt;String&gt; list) { ... }\r\n\r\n    public void doFooWithInts(List&lt;Integer&gt; list) { ... }\r\n}\r\n```\r\n\r\n```kotlin\r\n// I want users to use doFoo to refer to both of the above in Kotin\r\ndoFoo(listOf(&quot;1&quot;, &quot;2&quot;, &quot;3&quot;)) // calls doFooWithStrings\r\ndoFoo(listOf(1, 2, 3)) // calls doFooWithInts\r\n```\r\n\r\nIs there any annotation that allows me to specify a `KotlinName` or something like that? The original Java method names should ideally not be accessible from Kotlin, or at least, show a warning so that people are discouraged from using them.","title":"How to make two Java methods have the same name in Kotlin?","body":"<p>In Kotlin, one can use the <code>@JvmName</code> annotation to allow Java to refer to a declaration using a different name. For example, if two Kotlin methods have the same erasure.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@JvmName(&quot;doFooWithStrings&quot;)\nfun doFoo(list: List&lt;String&gt;) {\n    ...\n}\n\n@JvmName(&quot;doFooWithInts&quot;)\nfun doFoo(list: List&lt;Int&gt;) {\n   ...\n}\n</code></pre>\n<p>I want to do the opposite - I have two Java methods with different names, because they have the same erasure otherwise. I want these methods to have the same name in Kotlin.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Foo {\n    public void doFooWithStrings(List&lt;String&gt; list) { ... }\n\n    public void doFooWithInts(List&lt;Integer&gt; list) { ... }\n}\n</code></pre>\n<pre class=\"lang-kotlin prettyprint-override\"><code>// I want users to use doFoo to refer to both of the above in Kotin\ndoFoo(listOf(&quot;1&quot;, &quot;2&quot;, &quot;3&quot;)) // calls doFooWithStrings\ndoFoo(listOf(1, 2, 3)) // calls doFooWithInts\n</code></pre>\n<p>Is there any annotation that allows me to specify a <code>KotlinName</code> or something like that? The original Java method names should ideally not be accessible from Kotlin, or at least, show a warning so that people are discouraged from using them.</p>\n"},{"tags":["java","rest","postman","spring-boot-3"],"answers":[{"tags":[],"owner":{"account_id":6881862,"reputation":541,"user_id":5288331,"accept_rate":50,"display_name":"Digital"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697986701,"creation_date":1697986701,"answer_id":77340471,"question_id":77334500,"body_markdown":"After spending a lot of time I figured out that spring webflux doesn&#39;t support  MultipartFile, so to process the multipart data in a streaming fashion I need to use Flux&lt;Part&gt;, so the solution is\r\n\r\n    @PostMapping(value = &quot;/upload&quot;, consumes = {&quot;*/*&quot;}, produces = {&quot;*/*&quot;})\r\n    public ResponseEntity upload(@RequestPart(value = &quot;file&quot;) Flux&lt;Part&gt; file) {\r\n        log.info(&quot;upload :: file : {}.&quot;, file);\r\n        &lt;-- Logic goes here --&gt;\r\n    }","title":"@RequestPart MultipartFile not working with spring boot 3.1.4","body":"<p>After spending a lot of time I figured out that spring webflux doesn't support  MultipartFile, so to process the multipart data in a streaming fashion I need to use Flux, so the solution is</p>\n<pre><code>@PostMapping(value = &quot;/upload&quot;, consumes = {&quot;*/*&quot;}, produces = {&quot;*/*&quot;})\npublic ResponseEntity upload(@RequestPart(value = &quot;file&quot;) Flux&lt;Part&gt; file) {\n    log.info(&quot;upload :: file : {}.&quot;, file);\n    &lt;-- Logic goes here --&gt;\n}\n</code></pre>\n"}],"owner":{"account_id":6881862,"reputation":541,"user_id":5288331,"accept_rate":50,"display_name":"Digital"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698032417,"creation_date":1697853629,"question_id":77334500,"body_markdown":"I have below rest endpoint in my application with spring boot version as 3.1.4 and Java 17\r\n\r\n    @PostMapping(value = &quot;/upload&quot;, consumes = {&quot;*/*&quot;}, produces = {&quot;*/*&quot;})\r\n    public ResponseEntity upload(@RequestPart(value = &quot;file&quot;) MultipartFile file) {\r\n        log.info(&quot;upload :: file : {}.&quot;, file);\r\n        return null;\r\n    }\r\n\r\nBut when I tried invoking this endpoint from postman and with curl command getting the error as below\r\n\r\n    {\r\n        &quot;timestamp&quot;: &quot;2023-10-21T01:47:26.217+00:00&quot;,\r\n        &quot;path&quot;: &quot;/upload&quot;,\r\n        &quot;status&quot;: 400,\r\n        &quot;error&quot;: &quot;Bad Request&quot;,\r\n        &quot;requestId&quot;: &quot;6db7d61&quot;\r\n    }\r\n\r\n[![enter image description here][1]][1]\r\n\r\nAny help much appreciated. Thanks.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nDFlp.png","title":"@RequestPart MultipartFile not working with spring boot 3.1.4","body":"<p>I have below rest endpoint in my application with spring boot version as 3.1.4 and Java 17</p>\n<pre><code>@PostMapping(value = &quot;/upload&quot;, consumes = {&quot;*/*&quot;}, produces = {&quot;*/*&quot;})\npublic ResponseEntity upload(@RequestPart(value = &quot;file&quot;) MultipartFile file) {\n    log.info(&quot;upload :: file : {}.&quot;, file);\n    return null;\n}\n</code></pre>\n<p>But when I tried invoking this endpoint from postman and with curl command getting the error as below</p>\n<pre><code>{\n    &quot;timestamp&quot;: &quot;2023-10-21T01:47:26.217+00:00&quot;,\n    &quot;path&quot;: &quot;/upload&quot;,\n    &quot;status&quot;: 400,\n    &quot;error&quot;: &quot;Bad Request&quot;,\n    &quot;requestId&quot;: &quot;6db7d61&quot;\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/nDFlp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nDFlp.png\" alt=\"enter image description here\" /></a></p>\n<p>Any help much appreciated. Thanks.</p>\n"},{"tags":["java","svg","pdfbox","graphics2d"],"comments":[{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1698047022,"post_id":77341604,"comment_id":136350751,"body_markdown":"don&#39;t forget to update pdfbox to 2.0.29.","body":"don&#39;t forget to update pdfbox to 2.0.29."}],"answers":[{"tags":[],"owner":{"account_id":29730588,"reputation":16,"user_id":22785332,"display_name":"Steffan Kastner"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1698010083,"creation_date":1698010061,"answer_id":77341765,"question_id":77341604,"body_markdown":"try this:\r\n\r\n    diagram.getRoot().addAttribute(&quot;fill&quot;, AnimationElement.AT_CSS, colorLight);+","title":"Changing color when rendering SVG in PDFBox","body":"<p>try this:</p>\n<pre><code>diagram.getRoot().addAttribute(&quot;fill&quot;, AnimationElement.AT_CSS, colorLight);+\n</code></pre>\n"}],"owner":{"account_id":29730474,"reputation":15,"user_id":22785241,"display_name":"ChristophDaniel"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77341765,"answer_count":1,"score":0,"last_activity_date":1698032264,"creation_date":1698006845,"question_id":77341604,"body_markdown":"Does anybody know how to change color when rendering SVG into PDF with *pdfbox* ?\r\n\r\nI am using following code:\r\n```java\r\nFile svgFile = new File(&quot;roots.svg&quot;);\r\n\r\nSVGUniverse svgUniverse = new SVGUniverse();\r\nSVGDiagram diagram = svgUniverse.getDiagram(svgUniverse.loadSVG(svgFile.toURL()));\r\n\r\nPdfBoxGraphics2D graphics = new PdfBoxGraphics2D(document, 32, 32);\r\ngraphics.setColor(Color.green);\r\n\r\ntry {\r\n    diagram.render(graphics);\r\n} catch (SVGException e) {\r\n    e.printStackTrace();\r\n} finally {\r\n    graphics.dispose();\r\n}\r\n\r\nPDFormXObject xform = graphics.getXFormObject();\r\n\r\ntry (PDPageContentStream contentWriter = new PDPageContentStream(document, page, PDPageContentStream.AppendMode.APPEND, false)) {\r\n    AffineTransform transform = AffineTransform.getTranslateInstance(0, 0);\r\n    transform.scale(2,2);\r\n    xform.setMatrix(transform);\r\n    contentWriter.setNonStrokingColor(Color.green);\r\n    contentWriter.setStrokingColor(Color.green);\r\n    contentWriter.drawForm(xform);\r\n}\r\n```\r\nWith following dependencies:\r\n```none\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.apache.pdfbox&lt;/groupId&gt;\r\n    &lt;artifactId&gt;pdfbox&lt;/artifactId&gt;\r\n    &lt;version&gt;2.0.25&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.weblookandfeel&lt;/groupId&gt;\r\n    &lt;artifactId&gt;svg-salamander&lt;/artifactId&gt;\r\n    &lt;version&gt;1.1.2.2&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\nBut the Icon appears black instead of green.\r\n\r\nThanks in advance to everybody!\r\n```java\r\ncontentWriter.setNonStrokingColor(Color.green);\r\ncontentWriter.setStrokingColor(Color.green);\r\n```\r\nChanges nothing.\r\n","title":"Changing color when rendering SVG in PDFBox","body":"<p>Does anybody know how to change color when rendering SVG into PDF with <em>pdfbox</em> ?</p>\n<p>I am using following code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>File svgFile = new File(&quot;roots.svg&quot;);\n\nSVGUniverse svgUniverse = new SVGUniverse();\nSVGDiagram diagram = svgUniverse.getDiagram(svgUniverse.loadSVG(svgFile.toURL()));\n\nPdfBoxGraphics2D graphics = new PdfBoxGraphics2D(document, 32, 32);\ngraphics.setColor(Color.green);\n\ntry {\n    diagram.render(graphics);\n} catch (SVGException e) {\n    e.printStackTrace();\n} finally {\n    graphics.dispose();\n}\n\nPDFormXObject xform = graphics.getXFormObject();\n\ntry (PDPageContentStream contentWriter = new PDPageContentStream(document, page, PDPageContentStream.AppendMode.APPEND, false)) {\n    AffineTransform transform = AffineTransform.getTranslateInstance(0, 0);\n    transform.scale(2,2);\n    xform.setMatrix(transform);\n    contentWriter.setNonStrokingColor(Color.green);\n    contentWriter.setStrokingColor(Color.green);\n    contentWriter.drawForm(xform);\n}\n</code></pre>\n<p>With following dependencies:</p>\n<pre class=\"lang-none prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.pdfbox&lt;/groupId&gt;\n    &lt;artifactId&gt;pdfbox&lt;/artifactId&gt;\n    &lt;version&gt;2.0.25&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;com.weblookandfeel&lt;/groupId&gt;\n    &lt;artifactId&gt;svg-salamander&lt;/artifactId&gt;\n    &lt;version&gt;1.1.2.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>But the Icon appears black instead of green.</p>\n<p>Thanks in advance to everybody!</p>\n<pre class=\"lang-java prettyprint-override\"><code>contentWriter.setNonStrokingColor(Color.green);\ncontentWriter.setStrokingColor(Color.green);\n</code></pre>\n<p>Changes nothing.</p>\n"},{"tags":["java","android","json","http-post","esp32"],"comments":[{"owner":{"account_id":29098058,"reputation":267,"user_id":22290531,"display_name":"ChipChop Gizmo"},"score":0,"creation_date":1697956530,"post_id":77338714,"comment_id":136342798,"body_markdown":"I would first try and print the entire &quot;request&quot; to see how it&#39;s formed or to be more precise how ESPAsyncWebServer.h is formatting the &quot;args&quot; key:values. You may find that the json is already split in args to something like request-&gt;arg(&quot;username&quot;), request-&gt;arg(&quot;user_id&quot;)","body":"I would first try and print the entire &quot;request&quot; to see how it&#39;s formed or to be more precise how ESPAsyncWebServer.h is formatting the &quot;args&quot; key:values. You may find that the json is already split in args to something like request-&gt;arg(&quot;username&quot;), request-&gt;arg(&quot;user_id&quot;)"},{"owner":{"account_id":29726061,"reputation":1,"user_id":22781991,"display_name":"Lemuel Mojica V&#225;zquez"},"score":0,"creation_date":1698030201,"post_id":77338714,"comment_id":136349092,"body_markdown":"I tried your suggestion and didnt work either... but I just found an alternative way to do it and it works now... I am using WebServer.h now and havent had any issues... its a bit simlpler to use as well.","body":"I tried your suggestion and didnt work either... but I just found an alternative way to do it and it works now... I am using WebServer.h now and havent had any issues... its a bit simlpler to use as well."}],"answers":[{"tags":[],"owner":{"account_id":29726061,"reputation":1,"user_id":22781991,"display_name":"Lemuel Mojica V&#225;zquez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698031743,"creation_date":1698031527,"answer_id":77342489,"question_id":77338714,"body_markdown":"For some reason the following libraries always gave me an empty string when trying to send something from the mobile app to the esp32:\r\nESP8266WebServer\r\nAsyncWebServer_ESP32_W5500\r\nESPAsyncWebServer\r\nESPAsyncWebSrv\r\n\r\nNote: these worked when communicating with something else like a flask server in python... I still don&#39;t know what the issue is with the mobile app.\r\n\r\nThis one worked perfectly with both the mobile app and the flask server... I didn&#39;t really change anything of what I was doing except for minor sintax changes for the following library:\r\nWebServer\r\n\r\n\r\nHere is how it looks:\r\n\r\n    #include &lt;ArduinoJson.h&gt;\r\n    #include &lt;WiFi.h&gt;\r\n    #include &lt;WebServer.h&gt;\r\n    \r\n    String ssid = &quot;wifi_ssid&quot;;\r\n    String password = &quot;wifi_password&quot;;\r\n    WebServer server(80);\r\n    \r\n    void setup(){\r\n    \r\n        Serial.print(&quot;Connecting to Wifi...&quot;);\r\n        \r\n        // Connect to Wi-Fi\r\n        WiFi.begin(ssid, password);\r\n        while (WiFi.status() != WL_CONNECTED) {\r\n        \r\n            Serial.print(&quot;.&quot;);\r\n            delay(1000);\r\n        \r\n        }\r\n        \r\n        server.on(&quot;/brew_coffee&quot;, HTTP_POST, handleBrewCoffee);\r\n        server.begin();\r\n    \r\n    }\r\n    \r\n    void handleBrewCoffee() {\r\n    \r\n        if (server.hasArg(&quot;plain&quot;)) {\r\n    \r\n            String recipeReceived = server.arg(&quot;plain&quot;);\r\n            Serial.println(&quot;Received JSON data:&quot;);\r\n            Serial.println(recipeReceived);\r\n            DynamicJsonDocument jsonDoc(1024);\r\n            DeserializationError error = deserializeJson(jsonDoc, recipeReceived);\r\n    \r\n            if (error) {\r\n    \r\n                Serial.print(&quot;Failed to parse JSON: &quot;);\r\n                Serial.println(error.c_str());\r\n                recipeReceived = &quot;not&quot;;\r\n        \r\n            } else{\r\n    \r\n                const char* username = jsonDoc[&quot;username&quot;];\r\n                //same for the rest\r\n        \r\n                Serial.println(&quot;Coffee Information:&quot;);\r\n                Serial.print(&quot;username: &quot;); Serial.println(username);\r\n                //same for the rest\r\n          \r\n                recipeReceived = &quot;Coffee Received&quot;;\r\n    \r\n            }\r\n    \r\n            server.send(200, &quot;text/plain&quot;, recipeReceived);\r\n    \r\n        }\r\n    \r\n    }\r\n\r\n","title":"Every time I send data from android app to esp32 module, it arrives as an &quot;EmptyInput&quot;","body":"<p>For some reason the following libraries always gave me an empty string when trying to send something from the mobile app to the esp32:\nESP8266WebServer\nAsyncWebServer_ESP32_W5500\nESPAsyncWebServer\nESPAsyncWebSrv</p>\n<p>Note: these worked when communicating with something else like a flask server in python... I still don't know what the issue is with the mobile app.</p>\n<p>This one worked perfectly with both the mobile app and the flask server... I didn't really change anything of what I was doing except for minor sintax changes for the following library:\nWebServer</p>\n<p>Here is how it looks:</p>\n<pre><code>#include &lt;ArduinoJson.h&gt;\n#include &lt;WiFi.h&gt;\n#include &lt;WebServer.h&gt;\n\nString ssid = &quot;wifi_ssid&quot;;\nString password = &quot;wifi_password&quot;;\nWebServer server(80);\n\nvoid setup(){\n\n    Serial.print(&quot;Connecting to Wifi...&quot;);\n    \n    // Connect to Wi-Fi\n    WiFi.begin(ssid, password);\n    while (WiFi.status() != WL_CONNECTED) {\n    \n        Serial.print(&quot;.&quot;);\n        delay(1000);\n    \n    }\n    \n    server.on(&quot;/brew_coffee&quot;, HTTP_POST, handleBrewCoffee);\n    server.begin();\n\n}\n\nvoid handleBrewCoffee() {\n\n    if (server.hasArg(&quot;plain&quot;)) {\n\n        String recipeReceived = server.arg(&quot;plain&quot;);\n        Serial.println(&quot;Received JSON data:&quot;);\n        Serial.println(recipeReceived);\n        DynamicJsonDocument jsonDoc(1024);\n        DeserializationError error = deserializeJson(jsonDoc, recipeReceived);\n\n        if (error) {\n\n            Serial.print(&quot;Failed to parse JSON: &quot;);\n            Serial.println(error.c_str());\n            recipeReceived = &quot;not&quot;;\n    \n        } else{\n\n            const char* username = jsonDoc[&quot;username&quot;];\n            //same for the rest\n    \n            Serial.println(&quot;Coffee Information:&quot;);\n            Serial.print(&quot;username: &quot;); Serial.println(username);\n            //same for the rest\n      \n            recipeReceived = &quot;Coffee Received&quot;;\n\n        }\n\n        server.send(200, &quot;text/plain&quot;, recipeReceived);\n\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":29726061,"reputation":1,"user_id":22781991,"display_name":"Lemuel Mojica V&#225;zquez"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698031743,"creation_date":1697951048,"question_id":77338714,"body_markdown":"I need to send data in json format from the android app to the esp32 wifi module (&quot;arduino&quot;).\r\n\r\nThe android app succesfully sends the data in proper json format... the esp32 module knows its receiving something but it always arrives as an empty input and gives me an error due to it.\r\n\r\nOn the other hand, when I send/receive data from a flask server to the esp32 module it works fine. Same with sending/receiving data from flask server to android app... Any suggestions or am I doing something wrong between the two? \r\n\r\n\r\nThis is part of a &quot;big project&quot; for class and has over 2 months of work into it, so I really need this to work here. Thanks!\r\n\r\nI have tried sending simple strings like &quot;hey&quot;, where the content type is set as &quot;plain&quot; and it still arrives as an empty string to the esp32...\r\n\r\n\r\n**I have the following in the esp32 module:**\r\n\r\n```\r\n#include &lt;ArduinoJson.h&gt;\r\n#include &lt;WiFi.h&gt;\r\n#include &lt;ESPAsyncWebServer.h&gt;\r\n#include &lt;HTTPClient.h&gt;\r\n#include &quot;AsyncJson.h&quot;\r\n\r\nconst char* ssid = &quot;wifi_ssid&quot;;                //changed these for the post\r\nconst char* password = &quot;wifi_password&quot;;        //changed these for the post\r\nconst unsigned long connectionTimeout = 10000;\r\n\r\nAsyncWebServer server(80);\r\n\r\nvoid setup() {\r\n  Serial.begin(115200);\r\n\r\n  Serial.print(&quot;Connecting to Wifi...&quot;);\r\n\r\n  // Connect to Wi-Fi\r\n  WiFi.begin(ssid, password);\r\n  while (WiFi.status() != WL_CONNECTED) {\r\n    Serial.print(&quot;.&quot;);\r\n    delay(1000);\r\n  }\r\n  Serial.print(&quot;Connected to WiFi. IP address: &quot;);\r\n  Serial.println(WiFi.localIP());\r\n\r\n  //other code stuff...\r\n\r\n  // Start server\r\n  //other server.on() stuff...\r\n  server.on(&quot;/brew_coffee&quot;, HTTP_POST, handleBrewCoffee);\r\n  \r\n  server.begin();\r\n}\r\n\r\nvoid handleBrewCoffee(AsyncWebServerRequest *request) {\r\n  if (request != nullptr) {\r\n\r\n    String clientIPAddress = request-&gt;client()-&gt;remoteIP().toString();\r\n\r\n    // Here I receive the data and print it\r\n    String recipeReceived = request-&gt;arg(&quot;application/json&quot;);\r\n    Serial.print(&quot;\\n&quot; + clientIPAddress);\r\n    Serial.print(&quot; sent string: &quot;);\r\n    Serial.println(recipeReceived);\r\n\r\n    DynamicJsonDocument jsonDoc(16386);\r\n    DeserializationError error = deserializeJson(jsonDoc, recipeReceived);\r\n\r\n    //This is where I get the EmptyInput error\r\n    if (error) {\r\n      Serial.print(&quot;Failed to parse JSON: &quot;);\r\n      Serial.println(error.c_str());\r\n      recipeReceived = &quot;not: &quot; + clientIPAddress;\r\n\r\n    } else{\r\n        //Extracting json data\r\n        const char* username = jsonDoc[&quot;username&quot;];\r\n        const char* user_ip = jsonDoc[&quot;user_ip&quot;];\r\n        const char* user_id = jsonDoc[&quot;user_id&quot;];\r\n        const char* name = jsonDoc[&quot;name&quot;];\r\n        //I do rest of the data likewise\r\n\r\n        // Print the coffee information\r\n        Serial.println(&quot;\\nCoffee Information:&quot;);\r\n        Serial.print(&quot;username: &quot;); Serial.println(username);\r\n        Serial.print(&quot;user_id: &quot;); Serial.println(user_id);\r\n        Serial.print(&quot;Coffee Name: &quot;); Serial.println(name);\r\n        //I do rest of the data likewise\r\n        \r\n        recipeReceived = &quot;Coffee Received&quot;;\r\n      }\r\n  }\r\n}\r\n\r\n```\r\n\r\n\r\n**This is the function in my android app (from android studio) that sends the data:**\r\n\r\n```\r\n    public String makeServiceCallPostJSON(String reqUrl, String username, String user_ip, int user_id, String name, more params...) {\r\n\r\n        String response = null;\r\n        try {\r\n\r\n            //This url is the same as the esp32 with its proper endpoint\r\n            URL url = new URL(reqUrl);\r\n\r\n            HttpURLConnection conn = (HttpURLConnection) url.openConnection();\r\n\r\n            conn.setRequestMethod(&quot;POST&quot;);\r\n\r\n            JSONObject jsonParams = new JSONObject();\r\n            jsonParams.put(&quot;username&quot;, username);\r\n            jsonParams.put(&quot;user_ip&quot;, user_ip);\r\n            jsonParams.put(&quot;user_id&quot;, user_id);\r\n            jsonParams.put(&quot;name&quot;, name);\r\n            //I do rest likewise\r\n\r\n\r\n            conn.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;);\r\n\r\n            conn.setDoOutput(true);\r\n            conn.setDoInput(true);\r\n            System.out.println(jsonParams.toString());\r\n\r\n            conn.getOutputStream().write(jsonParams.toString().getBytes(&quot;UTF-8&quot;));\r\n\r\n            // read the response\r\n            InputStream in = new BufferedInputStream(conn.getInputStream());\r\n\r\n            // Convert the InputStream in a String\r\n            response = convertStreamToString(in);\r\n\r\n            System.out.println(&quot;This is what i got... &quot; + response);\r\n\r\n        } catch (MalformedURLException e) {\r\n            Log.e(TAG, &quot;MalformedURLException: &quot; + e.getMessage());\r\n        } catch (ProtocolException e) {\r\n            Log.e(TAG, &quot;ProtocolException: &quot; + e.getMessage());\r\n        } catch (IOException e) {\r\n            Log.e(TAG, &quot;IOException: &quot; + e.getMessage());\r\n        } catch (Exception e) {\r\n            Log.e(TAG, &quot;Exception: &quot; + e.getMessage());\r\n        }\r\n        return response;\r\n    }\r\n```\r\n\r\n**This is the output I get in the esp32 module**\r\n&gt; ###.###.#.### (client address) Sent string: \r\n&gt; Failed to parse JSON: EmptyInput\r\n\r\n\r\n\r\n**These are the prints I get in android studio&#39;s Logcat**\r\n&gt; {&quot;username&quot;:&quot;guest&quot;,&quot;user_ip&quot;:&quot;###.###.#.###&quot;,&quot;user_id&quot;:1,&quot;name&quot;:&quot;Coffee B&quot;, ...} \r\n&gt; This is what i got... not\r\n\r\n\r\nThe user_ip is the same as the client address printed in the esp32 output. Which further proofs its &quot;receiving&quot; something even if its empty...","title":"Every time I send data from android app to esp32 module, it arrives as an &quot;EmptyInput&quot;","body":"<p>I need to send data in json format from the android app to the esp32 wifi module (&quot;arduino&quot;).</p>\n<p>The android app succesfully sends the data in proper json format... the esp32 module knows its receiving something but it always arrives as an empty input and gives me an error due to it.</p>\n<p>On the other hand, when I send/receive data from a flask server to the esp32 module it works fine. Same with sending/receiving data from flask server to android app... Any suggestions or am I doing something wrong between the two?</p>\n<p>This is part of a &quot;big project&quot; for class and has over 2 months of work into it, so I really need this to work here. Thanks!</p>\n<p>I have tried sending simple strings like &quot;hey&quot;, where the content type is set as &quot;plain&quot; and it still arrives as an empty string to the esp32...</p>\n<p><strong>I have the following in the esp32 module:</strong></p>\n<pre><code>#include &lt;ArduinoJson.h&gt;\n#include &lt;WiFi.h&gt;\n#include &lt;ESPAsyncWebServer.h&gt;\n#include &lt;HTTPClient.h&gt;\n#include &quot;AsyncJson.h&quot;\n\nconst char* ssid = &quot;wifi_ssid&quot;;                //changed these for the post\nconst char* password = &quot;wifi_password&quot;;        //changed these for the post\nconst unsigned long connectionTimeout = 10000;\n\nAsyncWebServer server(80);\n\nvoid setup() {\n  Serial.begin(115200);\n\n  Serial.print(&quot;Connecting to Wifi...&quot;);\n\n  // Connect to Wi-Fi\n  WiFi.begin(ssid, password);\n  while (WiFi.status() != WL_CONNECTED) {\n    Serial.print(&quot;.&quot;);\n    delay(1000);\n  }\n  Serial.print(&quot;Connected to WiFi. IP address: &quot;);\n  Serial.println(WiFi.localIP());\n\n  //other code stuff...\n\n  // Start server\n  //other server.on() stuff...\n  server.on(&quot;/brew_coffee&quot;, HTTP_POST, handleBrewCoffee);\n  \n  server.begin();\n}\n\nvoid handleBrewCoffee(AsyncWebServerRequest *request) {\n  if (request != nullptr) {\n\n    String clientIPAddress = request-&gt;client()-&gt;remoteIP().toString();\n\n    // Here I receive the data and print it\n    String recipeReceived = request-&gt;arg(&quot;application/json&quot;);\n    Serial.print(&quot;\\n&quot; + clientIPAddress);\n    Serial.print(&quot; sent string: &quot;);\n    Serial.println(recipeReceived);\n\n    DynamicJsonDocument jsonDoc(16386);\n    DeserializationError error = deserializeJson(jsonDoc, recipeReceived);\n\n    //This is where I get the EmptyInput error\n    if (error) {\n      Serial.print(&quot;Failed to parse JSON: &quot;);\n      Serial.println(error.c_str());\n      recipeReceived = &quot;not: &quot; + clientIPAddress;\n\n    } else{\n        //Extracting json data\n        const char* username = jsonDoc[&quot;username&quot;];\n        const char* user_ip = jsonDoc[&quot;user_ip&quot;];\n        const char* user_id = jsonDoc[&quot;user_id&quot;];\n        const char* name = jsonDoc[&quot;name&quot;];\n        //I do rest of the data likewise\n\n        // Print the coffee information\n        Serial.println(&quot;\\nCoffee Information:&quot;);\n        Serial.print(&quot;username: &quot;); Serial.println(username);\n        Serial.print(&quot;user_id: &quot;); Serial.println(user_id);\n        Serial.print(&quot;Coffee Name: &quot;); Serial.println(name);\n        //I do rest of the data likewise\n        \n        recipeReceived = &quot;Coffee Received&quot;;\n      }\n  }\n}\n\n</code></pre>\n<p><strong>This is the function in my android app (from android studio) that sends the data:</strong></p>\n<pre><code>    public String makeServiceCallPostJSON(String reqUrl, String username, String user_ip, int user_id, String name, more params...) {\n\n        String response = null;\n        try {\n\n            //This url is the same as the esp32 with its proper endpoint\n            URL url = new URL(reqUrl);\n\n            HttpURLConnection conn = (HttpURLConnection) url.openConnection();\n\n            conn.setRequestMethod(&quot;POST&quot;);\n\n            JSONObject jsonParams = new JSONObject();\n            jsonParams.put(&quot;username&quot;, username);\n            jsonParams.put(&quot;user_ip&quot;, user_ip);\n            jsonParams.put(&quot;user_id&quot;, user_id);\n            jsonParams.put(&quot;name&quot;, name);\n            //I do rest likewise\n\n\n            conn.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;);\n\n            conn.setDoOutput(true);\n            conn.setDoInput(true);\n            System.out.println(jsonParams.toString());\n\n            conn.getOutputStream().write(jsonParams.toString().getBytes(&quot;UTF-8&quot;));\n\n            // read the response\n            InputStream in = new BufferedInputStream(conn.getInputStream());\n\n            // Convert the InputStream in a String\n            response = convertStreamToString(in);\n\n            System.out.println(&quot;This is what i got... &quot; + response);\n\n        } catch (MalformedURLException e) {\n            Log.e(TAG, &quot;MalformedURLException: &quot; + e.getMessage());\n        } catch (ProtocolException e) {\n            Log.e(TAG, &quot;ProtocolException: &quot; + e.getMessage());\n        } catch (IOException e) {\n            Log.e(TAG, &quot;IOException: &quot; + e.getMessage());\n        } catch (Exception e) {\n            Log.e(TAG, &quot;Exception: &quot; + e.getMessage());\n        }\n        return response;\n    }\n</code></pre>\n<p><strong>This is the output I get in the esp32 module</strong></p>\n<blockquote>\n<p>###.###.#.### (client address) Sent string:\nFailed to parse JSON: EmptyInput</p>\n</blockquote>\n<p><strong>These are the prints I get in android studio's Logcat</strong></p>\n<blockquote>\n<p>{&quot;username&quot;:&quot;guest&quot;,&quot;user_ip&quot;:&quot;###.###.#.###&quot;,&quot;user_id&quot;:1,&quot;name&quot;:&quot;Coffee B&quot;, ...}\nThis is what i got... not</p>\n</blockquote>\n<p>The user_ip is the same as the client address printed in the esp32 output. Which further proofs its &quot;receiving&quot; something even if its empty...</p>\n"},{"tags":["java","spring-boot","gradle","heroku"],"comments":[{"owner":{"account_id":12937672,"reputation":1290,"user_id":9354495,"display_name":"yuppie-flu"},"score":0,"creation_date":1673819200,"post_id":75128503,"comment_id":132577362,"body_markdown":"It looks like your configuration is setting Java 8 as the target, instead of Java 17. Can you share your `build.gradle`? Or check for any properties with `8` or `1.8` there.","body":"It looks like your configuration is setting Java 8 as the target, instead of Java 17. Can you share your <code>build.gradle</code>? Or check for any properties with <code>8</code> or <code>1.8</code> there."},{"owner":{"account_id":22105620,"reputation":339,"user_id":16361345,"display_name":"eko"},"score":0,"creation_date":1673819572,"post_id":75128503,"comment_id":132577421,"body_markdown":"Updated the post with the file. I couldn&#39;t find anywhere v8 or 1.8 :\\","body":"Updated the post with the file. I couldn&#39;t find anywhere v8 or 1.8 :\\"},{"owner":{"account_id":12937672,"reputation":1290,"user_id":9354495,"display_name":"yuppie-flu"},"score":1,"creation_date":1673820542,"post_id":75128503,"comment_id":132577561,"body_markdown":"The `build.gradle` looks correct. Then my only guess would be that your configuration for heroku to use Java 17 didn&#39;t apply, because Heroku docs say the default Java version is 8: https://devcenter.heroku.com/articles/java-support#specifying-a-java-version","body":"The <code>build.gradle</code> looks correct. Then my only guess would be that your configuration for heroku to use Java 17 didn&#39;t apply, because Heroku docs say the default Java version is 8: <a href=\"https://devcenter.heroku.com/articles/java-support#specifying-a-java-version\" rel=\"nofollow noreferrer\">devcenter.heroku.com/articles/&hellip;</a>"},{"owner":{"account_id":22105620,"reputation":339,"user_id":16361345,"display_name":"eko"},"score":0,"creation_date":1673856938,"post_id":75128503,"comment_id":132582508,"body_markdown":"Yes this worked, i have missed that in docs. Thank you !","body":"Yes this worked, i have missed that in docs. Thank you !"}],"answers":[{"tags":[],"owner":{"account_id":19598896,"reputation":153,"user_id":14344214,"display_name":"Ricardo Costa"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1688541146,"creation_date":1688541146,"answer_id":76617878,"question_id":75128503,"body_markdown":"If you are using InteliJ you need to go to File &gt; Settings &gt; Build, Execution, Deployment &gt; Build Tools &gt; Gradle and change the Gradle JVM to be the 17.\r\n\r\nCheers","title":"Spring boot gradle build fails","body":"<p>If you are using InteliJ you need to go to File &gt; Settings &gt; Build, Execution, Deployment &gt; Build Tools &gt; Gradle and change the Gradle JVM to be the 17.</p>\n<p>Cheers</p>\n"},{"tags":[],"owner":{"account_id":1374386,"reputation":3070,"user_id":1308685,"accept_rate":88,"display_name":"Jeremy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698031578,"creation_date":1698031578,"answer_id":77342493,"question_id":75128503,"body_markdown":"The Java version being invoked may not match.\r\n  \r\nYou might check version output from `java --version`  and any java environment variables, such as `JAVA_HOME` to make sure it matches JDK v17.   \r\nAlso, make sure the java being executed is a JDK installation and not just a java runtime.  \r\n \r\nI was getting this error on GitHub actions when running `ubuntu-latest` which at the time uses JVM 20.  \r\n\r\nI explicitly configured JDK 17, and the error was resolved.  \r\n\r\nExample GitHub action config - \r\n```\r\njobs:\r\n  build:\r\n    name: Build\r\n    runs-on: ubuntu-latest \r\n    steps:\r\n      - uses: actions/checkout@v2\r\n\r\n      - uses: actions/setup-java@v3\r\n        with:\r\n          distribution: &#39;temurin&#39; # See &#39;Supported distributions&#39; for available options\r\n          java-version: &#39;17&#39;\r\n\r\n      - name: Build Jar\r\n        run: ./gradlew build \r\n```","title":"Spring boot gradle build fails","body":"<p>The Java version being invoked may not match.</p>\n<p>You might check version output from <code>java --version</code>  and any java environment variables, such as <code>JAVA_HOME</code> to make sure it matches JDK v17.<br />\nAlso, make sure the java being executed is a JDK installation and not just a java runtime.</p>\n<p>I was getting this error on GitHub actions when running <code>ubuntu-latest</code> which at the time uses JVM 20.</p>\n<p>I explicitly configured JDK 17, and the error was resolved.</p>\n<p>Example GitHub action config -</p>\n<pre><code>jobs:\n  build:\n    name: Build\n    runs-on: ubuntu-latest \n    steps:\n      - uses: actions/checkout@v2\n\n      - uses: actions/setup-java@v3\n        with:\n          distribution: 'temurin' # See 'Supported distributions' for available options\n          java-version: '17'\n\n      - name: Build Jar\n        run: ./gradlew build \n</code></pre>\n"}],"owner":{"account_id":22105620,"reputation":339,"user_id":16361345,"display_name":"eko"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4610,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1698031578,"creation_date":1673817869,"question_id":75128503,"body_markdown":"When i try to build the project i am getting this error (while deploying to heroku). Its my first Spring boot app and honestly i can&#39;t find any solution to this issue. My Jdk is v.17\r\n\r\n```\r\nremote:        A problem occurred configuring root project &#39;demo&#39;.\r\nremote:        &gt; Could not resolve all files for configuration &#39;:classpath&#39;.\r\nremote:           &gt; Could not resolve org.springframework.boot:spring-boot-gradle-plugin:3.0.1.\r\nremote:             Required by:\r\nremote:                 project : &gt; org.springframework.boot:org.springframework.boot.gradle.plugin:3.0.1\r\nremote:              &gt; No matching variant of org.springframework.boot:spring-boot-gradle-plugin:3.0.1 was found. The consumer was configured to find a runtime of a library compatible with Java 8, packaged as a jar, and its dependencies declared externally, as well as attribute &#39;org.gradle.plugin.api-version&#39; with value &#39;7.6&#39; but:\r\nremote:                  - Variant &#39;apiElements&#39; capability org.springframework.boot:spring-boot-gradle-plugin:3.0.1 declares a library, packaged as a jar, and its dependencies declared externally:\r\nremote:                      - Incompatible because this component declares an API of a component compatible with Java 17 and the consumer needed a runtime of a component compatible with Java 8\r\nremote:                      - Other compatible attribute:\r\nremote:                          - Doesn&#39;t say anything about org.gradle.plugin.api-version (required &#39;7.6&#39;)\r\nremote:                  - Variant &#39;javadocElements&#39; capability org.springframework.boot:spring-boot-gradle-plugin:3.0.1 declares a runtime of a component, and its dependencies declared externally:\r\nremote:                      - Incompatible because this component declares documentation and the consumer needed a library\r\nremote:                      - Other compatible attributes:\r\nremote:                          - Doesn&#39;t say anything about its target Java version (required compatibility with Java 8)\r\nremote:                          - Doesn&#39;t say anything about its elements (required them packaged as a jar)\r\nremote:                          - Doesn&#39;t say anything about org.gradle.plugin.api-version (required &#39;7.6&#39;)\r\nremote:                  - Variant &#39;mavenOptionalApiElements&#39; capability org.springframework.boot:spring-boot-gradle-plugin-maven-optional:3.0.1 declares a library, packaged as a jar, and its dependencies declared externally:\r\nremote:                      - Incompatible because this component declares an API of a component compatible with Java 17 and the consumer needed a runtime of a component compatible with Java 8\r\nremote:                      - Other compatible attribute:\r\nremote:                          - Doesn&#39;t say anything about org.gradle.plugin.api-version (required &#39;7.6&#39;)\r\nremote:                  - Variant &#39;mavenOptionalRuntimeElements&#39; capability org.springframework.boot:spring-boot-gradle-plugin-maven-optional:3.0.1 declares a runtime of a library, packaged as a jar, and its dependencies declared externally:\r\nremote:                      - Incompatible because this component declares a component compatible with Java 17 and the consumer needed a component compatible with Java 8\r\nremote:                      - Other compatible attribute:\r\nremote:                          - Doesn&#39;t say anything about org.gradle.plugin.api-version (required &#39;7.6&#39;)\r\nremote:                  - Variant &#39;runtimeElements&#39; capability org.springframework.boot:spring-boot-gradle-plugin:3.0.1 declares a runtime of a library, packaged as a jar, and its dependencies declared externally:\r\nremote:                      - Incompatible because this component declares a component compatible with Java 17 and the consumer needed a component compatible with Java 8\r\nremote:                      - Other compatible attribute:\r\nremote:                          - Doesn&#39;t say anything about org.gradle.plugin.api-version (required &#39;7.6&#39;)\r\nremote:                  - Variant &#39;sourcesElements&#39; capability org.springframework.boot:spring-boot-gradle-plugin:3.0.1 declares a runtime of a component, and its dependencies declared externally:\r\nremote:                      - Incompatible because this component declares documentation and the consumer needed a library\r\nremote:                      - Other compatible attributes:\r\nremote:                          - Doesn&#39;t say anything about its target Java version (required compatibility with Java 8)\r\nremote:                          - Doesn&#39;t say anything about its elements (required them packaged as a jar)\r\nremote:                          - Doesn&#39;t say anything about org.gradle.plugin.api-version (required &#39;7.6&#39;)\r\n\r\n```\r\n\r\nEDIT:\r\n\r\nHere is the build.gradle file configuration. Perhaps some dependency is not compatible?\r\n\r\n```\r\nplugins {\r\n    id &#39;java-library&#39;\r\n    id &#39;org.springframework.boot&#39; version &#39;3.0.1&#39;\r\n    id &#39;io.spring.dependency-management&#39; version &#39;1.1.0&#39;\r\n}\r\n\r\ngroup = &#39;com.example&#39;\r\nversion = &#39;0.0.1-SNAPSHOT&#39;\r\nsourceCompatibility = &#39;17&#39;\r\n\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\n\r\ndependencies {\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-validation&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n    compileOnly &#39;org.projectlombok:lombok&#39;\r\n    runtimeOnly &#39;org.postgresql:postgresql&#39;\r\n    annotationProcessor &#39;org.projectlombok:lombok&#39;\r\n    testImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n    implementation group: &#39;com.opencsv&#39;, name: &#39;opencsv&#39;, version: &#39;5.7.1&#39;\r\n    implementation group: &#39;org.modelmapper&#39;, name: &#39;modelmapper&#39;, version: &#39;3.1.1&#39;\r\n\r\n}\r\n\r\ntasks.named(&#39;test&#39;) {\r\n    useJUnitPlatform()\r\n}\r\n\r\n```","title":"Spring boot gradle build fails","body":"<p>When i try to build the project i am getting this error (while deploying to heroku). Its my first Spring boot app and honestly i can't find any solution to this issue. My Jdk is v.17</p>\n<pre><code>remote:        A problem occurred configuring root project 'demo'.\nremote:        &gt; Could not resolve all files for configuration ':classpath'.\nremote:           &gt; Could not resolve org.springframework.boot:spring-boot-gradle-plugin:3.0.1.\nremote:             Required by:\nremote:                 project : &gt; org.springframework.boot:org.springframework.boot.gradle.plugin:3.0.1\nremote:              &gt; No matching variant of org.springframework.boot:spring-boot-gradle-plugin:3.0.1 was found. The consumer was configured to find a runtime of a library compatible with Java 8, packaged as a jar, and its dependencies declared externally, as well as attribute 'org.gradle.plugin.api-version' with value '7.6' but:\nremote:                  - Variant 'apiElements' capability org.springframework.boot:spring-boot-gradle-plugin:3.0.1 declares a library, packaged as a jar, and its dependencies declared externally:\nremote:                      - Incompatible because this component declares an API of a component compatible with Java 17 and the consumer needed a runtime of a component compatible with Java 8\nremote:                      - Other compatible attribute:\nremote:                          - Doesn't say anything about org.gradle.plugin.api-version (required '7.6')\nremote:                  - Variant 'javadocElements' capability org.springframework.boot:spring-boot-gradle-plugin:3.0.1 declares a runtime of a component, and its dependencies declared externally:\nremote:                      - Incompatible because this component declares documentation and the consumer needed a library\nremote:                      - Other compatible attributes:\nremote:                          - Doesn't say anything about its target Java version (required compatibility with Java 8)\nremote:                          - Doesn't say anything about its elements (required them packaged as a jar)\nremote:                          - Doesn't say anything about org.gradle.plugin.api-version (required '7.6')\nremote:                  - Variant 'mavenOptionalApiElements' capability org.springframework.boot:spring-boot-gradle-plugin-maven-optional:3.0.1 declares a library, packaged as a jar, and its dependencies declared externally:\nremote:                      - Incompatible because this component declares an API of a component compatible with Java 17 and the consumer needed a runtime of a component compatible with Java 8\nremote:                      - Other compatible attribute:\nremote:                          - Doesn't say anything about org.gradle.plugin.api-version (required '7.6')\nremote:                  - Variant 'mavenOptionalRuntimeElements' capability org.springframework.boot:spring-boot-gradle-plugin-maven-optional:3.0.1 declares a runtime of a library, packaged as a jar, and its dependencies declared externally:\nremote:                      - Incompatible because this component declares a component compatible with Java 17 and the consumer needed a component compatible with Java 8\nremote:                      - Other compatible attribute:\nremote:                          - Doesn't say anything about org.gradle.plugin.api-version (required '7.6')\nremote:                  - Variant 'runtimeElements' capability org.springframework.boot:spring-boot-gradle-plugin:3.0.1 declares a runtime of a library, packaged as a jar, and its dependencies declared externally:\nremote:                      - Incompatible because this component declares a component compatible with Java 17 and the consumer needed a component compatible with Java 8\nremote:                      - Other compatible attribute:\nremote:                          - Doesn't say anything about org.gradle.plugin.api-version (required '7.6')\nremote:                  - Variant 'sourcesElements' capability org.springframework.boot:spring-boot-gradle-plugin:3.0.1 declares a runtime of a component, and its dependencies declared externally:\nremote:                      - Incompatible because this component declares documentation and the consumer needed a library\nremote:                      - Other compatible attributes:\nremote:                          - Doesn't say anything about its target Java version (required compatibility with Java 8)\nremote:                          - Doesn't say anything about its elements (required them packaged as a jar)\nremote:                          - Doesn't say anything about org.gradle.plugin.api-version (required '7.6')\n\n</code></pre>\n<p>EDIT:</p>\n<p>Here is the build.gradle file configuration. Perhaps some dependency is not compatible?</p>\n<pre><code>plugins {\n    id 'java-library'\n    id 'org.springframework.boot' version '3.0.1'\n    id 'io.spring.dependency-management' version '1.1.0'\n}\n\ngroup = 'com.example'\nversion = '0.0.1-SNAPSHOT'\nsourceCompatibility = '17'\n\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'\n    implementation 'org.springframework.boot:spring-boot-starter-validation'\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n    compileOnly 'org.projectlombok:lombok'\n    runtimeOnly 'org.postgresql:postgresql'\n    annotationProcessor 'org.projectlombok:lombok'\n    testImplementation 'org.springframework.boot:spring-boot-starter-test'\n    implementation group: 'com.opencsv', name: 'opencsv', version: '5.7.1'\n    implementation group: 'org.modelmapper', name: 'modelmapper', version: '3.1.1'\n\n}\n\ntasks.named('test') {\n    useJUnitPlatform()\n}\n\n</code></pre>\n"},{"tags":["java","spring-mvc"],"answers":[{"tags":[],"owner":{"account_id":4205783,"reputation":3,"user_id":3444717,"accept_rate":75,"display_name":"Kush Khandelwal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1536175388,"creation_date":1536175388,"answer_id":52192122,"question_id":52189445,"body_markdown":"In my case it happened when I created a bean at request level and tried to access it from another thread created using @Async annotation. The bean information was stored in the thread local of the original thread only.\r\n\r\nAre you using something created and stored in the thread local of the base thread in the function or subsequent functions after @Async notification?\r\n\r\n@Async creates another thread but doesn&#39;t copy the thread local of the original thread which causes the issue.\r\n\r\nSee this - https://jira.spring.io/browse/SPR-6873","title":"Getting java.lang.IllegalStateException: No thread-bound request found","body":"<p>In my case it happened when I created a bean at request level and tried to access it from another thread created using @Async annotation. The bean information was stored in the thread local of the original thread only.</p>\n\n<p>Are you using something created and stored in the thread local of the base thread in the function or subsequent functions after @Async notification?</p>\n\n<p>@Async creates another thread but doesn't copy the thread local of the original thread which causes the issue.</p>\n\n<p>See this - <a href=\"https://jira.spring.io/browse/SPR-6873\" rel=\"nofollow noreferrer\">https://jira.spring.io/browse/SPR-6873</a></p>\n"}],"owner":{"account_id":152408,"reputation":6071,"user_id":366916,"accept_rate":50,"display_name":"bharathi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12172,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1698030100,"creation_date":1536163710,"question_id":52189445,"body_markdown":"I am getting below error when I try to use @Async annotation.\r\n\r\n    java.lang.IllegalStateException: No thread-bound request found: Are you referring to request attributes outside of an actual web request, or processing a request outside of the originally receiving thread? If you are actually operating within a web request and still receive this message, your code is probably running outside of DispatcherServlet/DispatcherPortlet: In this case, use RequestContextListener or RequestContextFilter to expose the current request.\r\n\r\nCode:\r\n\r\n   \r\n\r\n    @Async\r\n\t@Override\r\n\t@Transactional\r\n\tpublic void triggerEmailCommunication(List&lt;String&gt; eventCode, Integer authorizationId, Integer claimId,\r\n\t\t\tboolean callMethod) {\r\n\t\tMap&lt;String, Object&gt; emailBody = new HashMap&lt;&gt;();\r\n\t\ttry {\r\n\r\n\t\t\tif (callMethod) {\r\n\t\t\t\tLOGGER.info(&quot;Communication async flow triggerEmailCommunication method starts.&quot;);\r\n\t\t\t\temailBody = emailBodyObject(authorizationId, claimId, eventCode);\r\n      }\r\n\r\n\r\n    private Map&lt;String, Object&gt; emailBodyObject(Integer authorizationId, Integer claimId, List&lt;String&gt; eventCode)\r\n\t\t\tthrows CareBusinessServiceException {\r\n\t\tLOGGER.info(&quot;EmailBodyObject method starts.&quot;);\r\n\t\tMap&lt;String, Object&gt; emailBody = new HashMap&lt;String, Object&gt;();\r\n\t\tEmailClaimDetailsVO emailClaimDetails = new EmailClaimDetailsVO();\r\n\t\tClaimAuthorizationVO claimAuthVO = new ClaimAuthorizationVO();\r\n\t\tClaim claim = new Claim();\r\n\t\tAuthorization authorization = new Authorization();\r\n\t\tList&lt;String&gt; rejectReasonList = new ArrayList&lt;&gt;();\r\n\t\tProvider provider = new Provider();\r\n\t\tString providerName = null;\r\n\t\tString claimIntimationNbr = null;\r\n\t\tString authorizationNbr = null;\r\n\t\tSimpleDateFormat formatter = new SimpleDateFormat(AmhiConstants.DATE_FORMAT_DD_MM_YYYY);\r\n\t\ttry {\r\n\t\t\tInteger claimIntimationId = null;\r\n\t\t\tif (null != claimId) {\r\n\t\t\t\tclaim = enableBusinessService.retrieveClaimDetails(claimId);\r\n         } catch(Exception e) {\r\n         }\r\n    }\r\n\r\nDAO Layer\r\n\r\n   \r\n\r\n    @Override\r\n\tpublic Claim retrieveClaimIdRecord(Integer claimId) {\r\n\t\tCriteriaBuilder builder = manager.getCriteriaBuilder();\r\n\t\tCriteriaQuery&lt;Claim&gt; criteriaQuery = builder.createQuery(Claim.class);\r\n\t\tRoot&lt;Claim&gt; root = criteriaQuery.from(Claim.class);\r\n\t\tArrayList&lt;Predicate&gt; conditions = new ArrayList&lt;&gt;();\r\n\t\tconditions.add(builder.equal(root.get(Claim_.claimId), claimId));\r\n\t\tcriteriaQuery.select(root).where(conditions.toArray(new Predicate[] {}));\r\n\t\tjavax.persistence.Query query = manager.createQuery(criteriaQuery);\r\n\t\tList&lt;Claim&gt; claims = query.getResultList();\r\n\t\tif(CollectionUtils.isNotEmpty(claims)){\r\n\t\t\treturn claims.get(0);\r\n\t\t}\r\n\t\treturn new Claim();\r\n\t}\r\n\r\nThe value is getting retrieved from DB. But I am getting above exception as mentioned.\r\n\r\n","title":"Getting java.lang.IllegalStateException: No thread-bound request found","body":"<p>I am getting below error when I try to use @Async annotation.</p>\n\n<pre><code>java.lang.IllegalStateException: No thread-bound request found: Are you referring to request attributes outside of an actual web request, or processing a request outside of the originally receiving thread? If you are actually operating within a web request and still receive this message, your code is probably running outside of DispatcherServlet/DispatcherPortlet: In this case, use RequestContextListener or RequestContextFilter to expose the current request.\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>@Async\n@Override\n@Transactional\npublic void triggerEmailCommunication(List&lt;String&gt; eventCode, Integer authorizationId, Integer claimId,\n        boolean callMethod) {\n    Map&lt;String, Object&gt; emailBody = new HashMap&lt;&gt;();\n    try {\n\n        if (callMethod) {\n            LOGGER.info(\"Communication async flow triggerEmailCommunication method starts.\");\n            emailBody = emailBodyObject(authorizationId, claimId, eventCode);\n  }\n\n\nprivate Map&lt;String, Object&gt; emailBodyObject(Integer authorizationId, Integer claimId, List&lt;String&gt; eventCode)\n        throws CareBusinessServiceException {\n    LOGGER.info(\"EmailBodyObject method starts.\");\n    Map&lt;String, Object&gt; emailBody = new HashMap&lt;String, Object&gt;();\n    EmailClaimDetailsVO emailClaimDetails = new EmailClaimDetailsVO();\n    ClaimAuthorizationVO claimAuthVO = new ClaimAuthorizationVO();\n    Claim claim = new Claim();\n    Authorization authorization = new Authorization();\n    List&lt;String&gt; rejectReasonList = new ArrayList&lt;&gt;();\n    Provider provider = new Provider();\n    String providerName = null;\n    String claimIntimationNbr = null;\n    String authorizationNbr = null;\n    SimpleDateFormat formatter = new SimpleDateFormat(AmhiConstants.DATE_FORMAT_DD_MM_YYYY);\n    try {\n        Integer claimIntimationId = null;\n        if (null != claimId) {\n            claim = enableBusinessService.retrieveClaimDetails(claimId);\n     } catch(Exception e) {\n     }\n}\n</code></pre>\n\n<p>DAO Layer</p>\n\n<pre><code>@Override\npublic Claim retrieveClaimIdRecord(Integer claimId) {\n    CriteriaBuilder builder = manager.getCriteriaBuilder();\n    CriteriaQuery&lt;Claim&gt; criteriaQuery = builder.createQuery(Claim.class);\n    Root&lt;Claim&gt; root = criteriaQuery.from(Claim.class);\n    ArrayList&lt;Predicate&gt; conditions = new ArrayList&lt;&gt;();\n    conditions.add(builder.equal(root.get(Claim_.claimId), claimId));\n    criteriaQuery.select(root).where(conditions.toArray(new Predicate[] {}));\n    javax.persistence.Query query = manager.createQuery(criteriaQuery);\n    List&lt;Claim&gt; claims = query.getResultList();\n    if(CollectionUtils.isNotEmpty(claims)){\n        return claims.get(0);\n    }\n    return new Claim();\n}\n</code></pre>\n\n<p>The value is getting retrieved from DB. But I am getting above exception as mentioned.</p>\n"},{"tags":["java","google-analytics-4"],"owner":{"account_id":2704775,"reputation":61,"user_id":2334598,"display_name":"KarelH"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":303,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698029825,"creation_date":1681407098,"question_id":76008311,"body_markdown":"we are using GA4 to monitor all installed application in our customers. And we need to know, which version is there. Our app is web app (WAR) in Tomcat.\r\n\r\nEach page which is generated and sended to client browser contains this gtag script.\r\n\r\n`gtag(&#39;config&#39;, &#39;OUR-COMON-GA4-ID&#39;, {&#39;app_version&#39;: &#39;1.0.1&#39;});`\r\n\r\nThere we put additional config information (https://developers.google.com/tag-platform/gtagjs/reference#config) and this additional information is in GA4 joined to each logged event.\r\n\r\nI need to help with reading this additional information, using official JAVA library for acces GA4 so that I can determine for each event the version of the application that generated it.\r\n\r\nDoes anybody know how to read events additional parameters via API\r\n\r\nThanks a lot\r\n\r\nI try to add new dimension\r\n\r\n    addDimensions(Dimension.newBuilder().setName(&quot;event_params.app_version&quot;))\r\n\r\nbut it does not works.\r\n\r\nI get error\r\nINVALID_ARGUMENT: Field event_params.app_version is not a valid dimension.\r\n\r\nwithout this dimension event_params.app_version I am able to read data successfully\r\n\r\n```\r\nstatic void sampleRunReport(String propertyId, String credentialsJsonPath) throws Exception {\r\n\t// [START analyticsdata_json_credentials_initialize]\r\n\t// Explicitly use service account credentials by specifying\r\n\t// the private key file.\r\n\tGoogleCredentials credentials =\r\n\t\tGoogleCredentials.fromStream(new FileInputStream(credentialsJsonPath));\r\n\r\n\tBetaAnalyticsDataSettings betaAnalyticsDataSettings =\r\n\t\tBetaAnalyticsDataSettings.newBuilder()\r\n\t\t\t.setCredentialsProvider(FixedCredentialsProvider.create(credentials))\r\n\t\t\t.build();\r\n\r\n\ttry (BetaAnalyticsDataClient analyticsData =\r\n\t\tBetaAnalyticsDataClient.create(betaAnalyticsDataSettings)) {\r\n\t  // [END analyticsdata_json_credentials_initialize]\r\n\r\n\t  // [START analyticsdata_json_credentials_run_report]\r\n\t  RunReportRequest request =\r\n\t\t  RunReportRequest.newBuilder()\r\n\t\t\t  .setProperty(&quot;properties/&quot; + propertyId)\r\n\t\t\t  .addDimensions(Dimension.newBuilder().setName(&quot;event_params.app_version&quot;))\r\n\t\t\t  .addDimensions(Dimension.newBuilder().setName(&quot;pagePath&quot;))\r\n\t\t\t  .addDimensions(Dimension.newBuilder().setName(&quot;date&quot;))\r\n\t\t\t  .addMetrics(Metric.newBuilder().setName(&quot;sessions&quot;))\r\n\t\t\t  .addDateRanges(DateRange.newBuilder().setStartDate(&quot;2023-03-31&quot;).setEndDate(&quot;2023-04-02&quot;))\r\n\t\t\t  .addOrderBys(OrderBy.newBuilder().setDimension(DimensionOrderBy.newBuilder().setDimensionName(&quot;date&quot;))).build();\r\n\r\n\t  // Make the request.\r\n\t  RunReportResponse response = analyticsData.runReport(request);\r\n\t  // [END analyticsdata_json_credentials_run_report]\r\n\r\n\t  //READ RESPONSE\r\n```\r\n\r\nDoes anobody know how to read it ?\r\n\r\nThank a lot.","title":"Google Analytics 4 (GA4) - reading events include custom properties","body":"<p>we are using GA4 to monitor all installed application in our customers. And we need to know, which version is there. Our app is web app (WAR) in Tomcat.</p>\n<p>Each page which is generated and sended to client browser contains this gtag script.</p>\n<p><code>gtag('config', 'OUR-COMON-GA4-ID', {'app_version': '1.0.1'});</code></p>\n<p>There we put additional config information (<a href=\"https://developers.google.com/tag-platform/gtagjs/reference#config\" rel=\"nofollow noreferrer\">https://developers.google.com/tag-platform/gtagjs/reference#config</a>) and this additional information is in GA4 joined to each logged event.</p>\n<p>I need to help with reading this additional information, using official JAVA library for acces GA4 so that I can determine for each event the version of the application that generated it.</p>\n<p>Does anybody know how to read events additional parameters via API</p>\n<p>Thanks a lot</p>\n<p>I try to add new dimension</p>\n<pre><code>addDimensions(Dimension.newBuilder().setName(&quot;event_params.app_version&quot;))\n</code></pre>\n<p>but it does not works.</p>\n<p>I get error\nINVALID_ARGUMENT: Field event_params.app_version is not a valid dimension.</p>\n<p>without this dimension event_params.app_version I am able to read data successfully</p>\n<pre><code>static void sampleRunReport(String propertyId, String credentialsJsonPath) throws Exception {\n    // [START analyticsdata_json_credentials_initialize]\n    // Explicitly use service account credentials by specifying\n    // the private key file.\n    GoogleCredentials credentials =\n        GoogleCredentials.fromStream(new FileInputStream(credentialsJsonPath));\n\n    BetaAnalyticsDataSettings betaAnalyticsDataSettings =\n        BetaAnalyticsDataSettings.newBuilder()\n            .setCredentialsProvider(FixedCredentialsProvider.create(credentials))\n            .build();\n\n    try (BetaAnalyticsDataClient analyticsData =\n        BetaAnalyticsDataClient.create(betaAnalyticsDataSettings)) {\n      // [END analyticsdata_json_credentials_initialize]\n\n      // [START analyticsdata_json_credentials_run_report]\n      RunReportRequest request =\n          RunReportRequest.newBuilder()\n              .setProperty(&quot;properties/&quot; + propertyId)\n              .addDimensions(Dimension.newBuilder().setName(&quot;event_params.app_version&quot;))\n              .addDimensions(Dimension.newBuilder().setName(&quot;pagePath&quot;))\n              .addDimensions(Dimension.newBuilder().setName(&quot;date&quot;))\n              .addMetrics(Metric.newBuilder().setName(&quot;sessions&quot;))\n              .addDateRanges(DateRange.newBuilder().setStartDate(&quot;2023-03-31&quot;).setEndDate(&quot;2023-04-02&quot;))\n              .addOrderBys(OrderBy.newBuilder().setDimension(DimensionOrderBy.newBuilder().setDimensionName(&quot;date&quot;))).build();\n\n      // Make the request.\n      RunReportResponse response = analyticsData.runReport(request);\n      // [END analyticsdata_json_credentials_run_report]\n\n      //READ RESPONSE\n</code></pre>\n<p>Does anobody know how to read it ?</p>\n<p>Thank a lot.</p>\n"},{"tags":["java","unit-testing","junit","junit4"],"answers":[{"tags":[],"owner":{"account_id":27529235,"reputation":437,"user_id":21008053,"display_name":"subasri_"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698029699,"creation_date":1698029699,"answer_id":77342429,"question_id":77339996,"body_markdown":"Directly invoking the `main` method and expecting the entire flow to happen on its own is not essentially unit testing. Unit tests are written to test/verify the smallest piece of executable code (units) in an isolated manner. Meaning that you test every flow in a method individually separating it from the external behaviors. This isolation is commonly done using test doubles ([mocks][1])\r\n\r\nI suggest you understand the fundamentals right by referring to the official documentations and other resources available\r\n\r\n  [1]: https://site.mockito.org/","title":"How to test java input and expected Output with Junit 4","body":"<p>Directly invoking the <code>main</code> method and expecting the entire flow to happen on its own is not essentially unit testing. Unit tests are written to test/verify the smallest piece of executable code (units) in an isolated manner. Meaning that you test every flow in a method individually separating it from the external behaviors. This isolation is commonly done using test doubles (<a href=\"https://site.mockito.org/\" rel=\"nofollow noreferrer\">mocks</a>)</p>\n<p>I suggest you understand the fundamentals right by referring to the official documentations and other resources available</p>\n"}],"owner":{"account_id":19635074,"reputation":1,"user_id":14372488,"display_name":"mlhb"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1698029699,"creation_date":1697978879,"question_id":77339996,"body_markdown":"# How to test Java input/output\r\n\r\nHello, \r\n\r\nI have the following problem: I have a class, which handles the user interaction (Input/Output) and I need to write Junit4 tests for it. \r\n\r\nThe class I want to test looks something like this:\r\n```java\r\npackage program;\r\n// imports\r\npublic class UserInteraction {\r\n\tprivate Program program;\r\n\r\n    private UserInteraction(){\r\n        program = new Program();\r\n    }\r\n\r\n\t// Menu display\r\n\tprivate void start() {\r\n\t\twhile (!program.getProgramStarted) {\r\n\t\t\tString input = readInput();\r\n\t\t\tswitch (input) {\r\n\t\t\tcase &quot;1&quot;:\r\n\t\t\t\taddUser();\r\n\t\t\t\tbreak;\r\n\t\t\tcase &quot;2&quot;:\r\n\t\t\t\tdeleteUser();\r\n\t\t\t\tbreak;\r\n\t\t\tcase &quot;3&quot;:\r\n\t\t\t\t// ...\r\n\t\t\tdefault:\r\n\t\t\t\tSystem.err.println(&quot;Unknown option&quot;);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate void addUser() {\r\n\t\t// Output\r\n\t\tString username = readInput();\r\n\t\tprogram.addUser(username);\r\n\t\tSystem.out.println(&quot;User &quot; + username + &quot;added&quot;);\r\n\t}\r\n\r\n\tprivate void deleteUser() {\r\n\t\t// Output\r\n\t\tString username = readInput();\r\n\t\tprogram.deleteUser(username);\r\n\t\tSystem.out.println(&quot;User &quot; + username + &quot;deleted&quot;);\r\n\t}\r\n\r\n\t@SuppressWarnings(&quot;resource&quot;)\r\n\tprivate String readInput() {\r\n\t\treturn (new Scanner(System.in)).nextLine();\r\n\t}\r\n\r\n\tpublic void main(String[] args) {\r\n\t\tUserInteraction ui = new UserInteraction();\r\n\t\tui.start();\r\n\t}\r\n\r\n}\r\n```\r\nAnd the program class looks something like this: \r\n```java\r\npackage program;\r\n// imports\r\npublic class Program {\r\n    // fields\r\n    private User currentUser;\r\n\tprivate List&lt;User&gt; user = new ArrayList&lt;User&gt;();\r\n\t// constructor\r\n\r\n\tpublic void addUser(String name) throws Exception {\r\n\t\tif (user.size() &gt;= 6) {\r\n\t\t\tthrow new Exception();\r\n\t\t}\r\n\t\tint newID = user.size() + 1;\r\n\t\tuser.add(new User(name, newID));\r\n\t}\r\n\r\n\tpublic String[] getALlUser() {\r\n\t\tint counter = 0;\r\n\t\tString[] userArray = new String[user.size()];\r\n\r\n\t\tfor (User s : user) {\r\n\t\t\tuserArray[counter++] = s.toString();\r\n\t\t}\r\n\t\treturn userArray;\r\n\t}\r\n}\r\n```\r\nNow, for example, I want to test, if the following Input is handled correctly:\r\n```\r\n1\r\nJohn\r\n=&gt; User John added\r\n```\r\nFor this purpose I wrote a Junit test that looks like this:\r\n```java\r\npackage tests;\r\n\r\nimport java.io.ByteArrayInputStream;\r\nimport java.io.ByteArrayOutputStream;\r\nimport java.io.InputStream;\r\nimport java.io.PrintStream;\r\n\r\nimport org.junit.After;\r\nimport org.junit.Test;\r\n\r\nimport program.*;\r\n\r\npublic class UserInteractionTest {\r\n\r\n\tprivate final InputStream originalIn = System.in;\r\n\tprivate final PrintStream originalOut = System.out;\r\n\tprivate Program program;\r\n\r\n\t@After\r\n\tpublic void restoreStreams() {\r\n\t\tSystem.setIn(originalIn);\r\n\t\tSystem.setOut(originalOut);\r\n\t}\r\n\r\n\t@Test\r\n\tpublic void testCreateUser() throws Exception {\r\n\t\tString input = &quot;1\\nJohn\\n&quot;;\r\n\t\tByteArrayInputStream in = new ByteArrayInputStream(input.getBytes());\r\n\t\tSystem.setIn(in);\r\n\t\tByteArrayOutputStream outContent = new ByteArrayOutputStream();\r\n\t\tSystem.setOut(new PrintStream(outContent)); // Leitet System.out um\r\n\r\n\t\tprogram = new Program();\r\n\t\ttry {\r\n\t\t\tprogram.main(null);\r\n\t\t} finally {\r\n\t\t\tSystem.setIn(originalIn);\r\n\t\t}\r\n\t\tString expectedOutput = &quot;User John added&quot;;\r\n\t\tassertTrue(&quot;Output not found&quot;, outContent.toString().contains(expectedOutput));\r\n\t}\r\n\r\n}\r\n\r\n```\r\nThe input (&quot;1\\n&quot;) is made, however after that, no input is inserted, so the test hangs.\r\nDoes anyone know how to solve this problem? Or, perhaps a better way to test/validate the input/output of my Java program?\r\n\r\nThanks in advance!\r\n\r\nI tried various modifications to the input Stream, like using `System.lineSeparator()` instead of `\\n`, but the problem persists.\r\n\r\n","title":"How to test java input and expected Output with Junit 4","body":"<h1>How to test Java input/output</h1>\n<p>Hello,</p>\n<p>I have the following problem: I have a class, which handles the user interaction (Input/Output) and I need to write Junit4 tests for it.</p>\n<p>The class I want to test looks something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package program;\n// imports\npublic class UserInteraction {\n    private Program program;\n\n    private UserInteraction(){\n        program = new Program();\n    }\n\n    // Menu display\n    private void start() {\n        while (!program.getProgramStarted) {\n            String input = readInput();\n            switch (input) {\n            case &quot;1&quot;:\n                addUser();\n                break;\n            case &quot;2&quot;:\n                deleteUser();\n                break;\n            case &quot;3&quot;:\n                // ...\n            default:\n                System.err.println(&quot;Unknown option&quot;);\n                break;\n            }\n        }\n    }\n\n    private void addUser() {\n        // Output\n        String username = readInput();\n        program.addUser(username);\n        System.out.println(&quot;User &quot; + username + &quot;added&quot;);\n    }\n\n    private void deleteUser() {\n        // Output\n        String username = readInput();\n        program.deleteUser(username);\n        System.out.println(&quot;User &quot; + username + &quot;deleted&quot;);\n    }\n\n    @SuppressWarnings(&quot;resource&quot;)\n    private String readInput() {\n        return (new Scanner(System.in)).nextLine();\n    }\n\n    public void main(String[] args) {\n        UserInteraction ui = new UserInteraction();\n        ui.start();\n    }\n\n}\n</code></pre>\n<p>And the program class looks something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package program;\n// imports\npublic class Program {\n    // fields\n    private User currentUser;\n    private List&lt;User&gt; user = new ArrayList&lt;User&gt;();\n    // constructor\n\n    public void addUser(String name) throws Exception {\n        if (user.size() &gt;= 6) {\n            throw new Exception();\n        }\n        int newID = user.size() + 1;\n        user.add(new User(name, newID));\n    }\n\n    public String[] getALlUser() {\n        int counter = 0;\n        String[] userArray = new String[user.size()];\n\n        for (User s : user) {\n            userArray[counter++] = s.toString();\n        }\n        return userArray;\n    }\n}\n</code></pre>\n<p>Now, for example, I want to test, if the following Input is handled correctly:</p>\n<pre><code>1\nJohn\n=&gt; User John added\n</code></pre>\n<p>For this purpose I wrote a Junit test that looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package tests;\n\nimport java.io.ByteArrayInputStream;\nimport java.io.ByteArrayOutputStream;\nimport java.io.InputStream;\nimport java.io.PrintStream;\n\nimport org.junit.After;\nimport org.junit.Test;\n\nimport program.*;\n\npublic class UserInteractionTest {\n\n    private final InputStream originalIn = System.in;\n    private final PrintStream originalOut = System.out;\n    private Program program;\n\n    @After\n    public void restoreStreams() {\n        System.setIn(originalIn);\n        System.setOut(originalOut);\n    }\n\n    @Test\n    public void testCreateUser() throws Exception {\n        String input = &quot;1\\nJohn\\n&quot;;\n        ByteArrayInputStream in = new ByteArrayInputStream(input.getBytes());\n        System.setIn(in);\n        ByteArrayOutputStream outContent = new ByteArrayOutputStream();\n        System.setOut(new PrintStream(outContent)); // Leitet System.out um\n\n        program = new Program();\n        try {\n            program.main(null);\n        } finally {\n            System.setIn(originalIn);\n        }\n        String expectedOutput = &quot;User John added&quot;;\n        assertTrue(&quot;Output not found&quot;, outContent.toString().contains(expectedOutput));\n    }\n\n}\n\n</code></pre>\n<p>The input (&quot;1\\n&quot;) is made, however after that, no input is inserted, so the test hangs.\nDoes anyone know how to solve this problem? Or, perhaps a better way to test/validate the input/output of my Java program?</p>\n<p>Thanks in advance!</p>\n<p>I tried various modifications to the input Stream, like using <code>System.lineSeparator()</code> instead of <code>\\n</code>, but the problem persists.</p>\n"},{"tags":["java","spring","spring-security"],"comments":[{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":1,"creation_date":1697786706,"post_id":77328074,"comment_id":136325951,"body_markdown":"`authenticationJwtTokenFilter` this is not from the spring security documentation, why are you using JWTs as sessions, why have you written custom security and not read the spring documentation on how to actually build security?","body":"<code>authenticationJwtTokenFilter</code> this is not from the spring security documentation, why are you using JWTs as sessions, why have you written custom security and not read the spring documentation on how to actually build security?"},{"owner":{"account_id":25804254,"reputation":774,"user_id":19546048,"display_name":"DingHao"},"score":0,"creation_date":1697792144,"post_id":77328074,"comment_id":136326902,"body_markdown":"please post your JwtTokenFilter  code","body":"please post your JwtTokenFilter  code"},{"owner":{"account_id":29712821,"reputation":9,"user_id":22772020,"display_name":"guapi"},"score":0,"creation_date":1698023796,"post_id":77328074,"comment_id":136348718,"body_markdown":"@Toerktumlare Your question is excellent. I&#39;m doing this project to get a better grasp of Spring Security, and I&#39;ll check the official documentation for your hints","body":"@Toerktumlare Your question is excellent. I&#39;m doing this project to get a better grasp of Spring Security, and I&#39;ll check the official documentation for your hints"},{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1698042265,"post_id":77328074,"comment_id":136350046,"body_markdown":"If you are learning, dont read poor blogposts.","body":"If you are learning, dont read poor blogposts."},{"owner":{"account_id":29712821,"reputation":9,"user_id":22772020,"display_name":"guapi"},"score":0,"creation_date":1698110115,"post_id":77328074,"comment_id":136360979,"body_markdown":"I just graduated from university and work a year, there are many need me to further study and master, once again, thank you for your teaching","body":"I just graduated from university and work a year, there are many need me to further study and master, once again, thank you for your teaching"}],"answers":[{"tags":[],"owner":{"account_id":29712821,"reputation":9,"user_id":22772020,"display_name":"guapi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1698028841,"creation_date":1698028841,"answer_id":77342380,"question_id":77328074,"body_markdown":"All right, it&#39;s so crazy bug .and I&#39;ve fixed it perfectly\r\n\r\nI tried a lot, When I copy the reference project to my project ,it run successfully, then I found that my SecConfig path is: **/config/security/SecConfig.java**, the other I copied to my project is **/config/security/config/SecurityConfig.java**.\r\n\r\nAfter continuous attempts to compare and query information, I found that the configuration file takes effect only in ralative path **/config**\r\n\r\nMy problem has been solved perfectly. thanks for all!\r\n","title":"Security exceptionHandling cant register successfully,Filter has somthing wrong","body":"<p>All right, it's so crazy bug .and I've fixed it perfectly</p>\n<p>I tried a lot, When I copy the reference project to my project ,it run successfully, then I found that my SecConfig path is: <strong>/config/security/SecConfig.java</strong>, the other I copied to my project is <strong>/config/security/config/SecurityConfig.java</strong>.</p>\n<p>After continuous attempts to compare and query information, I found that the configuration file takes effect only in ralative path <strong>/config</strong></p>\n<p>My problem has been solved perfectly. thanks for all!</p>\n"}],"owner":{"account_id":29712821,"reputation":9,"user_id":22772020,"display_name":"guapi"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":77342380,"answer_count":1,"score":-1,"last_activity_date":1698028841,"creation_date":1697770371,"question_id":77328074,"body_markdown":"```\r\n&lt;spring-boot.version&gt;3.1.3&lt;/spring-boot.version&gt;\r\n\r\n-------SecConfig---------\r\n\r\n@Autowired\r\nprivate AnonymousAuthenticationHandler anonymousAuthenticationHandler;\r\n@Bean\r\npublic JwtTokenFilter authenticationJwtTokenFilter() {\r\n    return new JwtTokenFilter();\r\n}\r\n...\r\n@Bean\r\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n   ...\r\nhttp.exceptionHandling((exception) -&gt; exception.authenticationEntryPoint(anonymousAuthenticationHandler))\r\n    .authorizeHttpRequests(authorizeHttpRequests -&gt; authorizeHttpRequests\r\n        .requestMatchers(HttpMethod.OPTIONS, &quot;/**&quot;).permitAll()\r\n        .requestMatchers(HttpMethod.POST, &quot;/web/authenticate&quot;).permitAll()\r\n        .requestMatchers(&quot;/error&quot;).permitAll()\r\n        .anyRequest().authenticated())\r\n   .addFilterBefore(authenticationJwtTokenFilter(), UsernamePasswordAuthenticationFilter.class);\r\n   ...\r\n\r\n-------AnonymousAuthenticationHandler ---------\r\n@Component\r\npublic class AnonymousAuthenticationHandler implements AuthenticationEntryPoint {\r\n    @Override\r\n    public void commence(HttpServletRequest request, HttpServletResponse response,\r\n            AuthenticationException authException) throws IOException, ServletException {\r\n\r\n        ResponseUtil.out(Result.error().code(ResultCode.NO_AUTH).message(&quot;匿名用户无权限访问！&quot;));\r\n    }\r\n}\r\n}\r\n```\r\nWhen I initiate a request, the request is successfully entered **authenticationJwtTokenFilter**, but when the request not auth, it cant into my **anonymousAuthenticationHandler**, when I check the type of chainFilter, discover its type seems a bit problematic. For example, its type is **ApplicationFinterConfig** instead of **FilterChainProxy** and my filterChains just own seven filter\r\n\r\n# My project\r\n[enter image description here](https://i.stack.imgur.com/LyimU.png)\r\n\r\n# Other project[click here for check the code](https://github.com/markvivv/springboot-security-jwt-example)\r\n[enter image description here](https://i.stack.imgur.com/IUp0Q.png)\r\n\r\n\r\n\r\n\r\nMy configuration is not much different from his configuration\r\nWhat is the cause of this problem and how can I modify my code\r\n\r\n    public class JwtTokenFilter extends OncePerRequestFilter {\r\n    //获取登录请求地址\r\n    @Value(&quot;${request.login.url}&quot;)\r\n    private String loginUrl;\r\n\r\n    //获取登录请求地址\r\n    @Value(&quot;${request.logout.url}&quot;)\r\n    private String logoutUrl;\r\n\r\n    @Value(&quot;${jwt.expire}&quot;)\r\n    private int expire;\r\n\r\n    @Autowired\r\n    private LoginFailureHandler loginFailureHandler;\r\n\r\n    @Autowired\r\n    private SecurityUserDetailsService securityUserDetailsService;\r\n\r\n    @Autowired\r\n    private RedisUtil redisUtil;\r\n\r\n    @Override\r\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\r\n            throws ServletException, IOException {\r\n        try {\r\n            // 如果是登录或者登出接口，直接放行\r\n            String requestURI = request.getRequestURI();\r\n            if (requestURI.equals(loginUrl) || requestURI.equals(logoutUrl)) {\r\n                filterChain.doFilter(request, response);\r\n            }\r\n            // 从request获取token\r\n            validToken(request);\r\n        } catch (AuthenticationException e) {\r\n            loginFailureHandler.onAuthenticationFailure(request, response, e);\r\n            logger.error(&quot;Cannot set user authentication!&quot;, e);\r\n        }\r\n        filterChain.doFilter(request, response);\r\n    }\r\n\r\n    private void validToken(HttpServletRequest request) throws AuthenticationException, ValidateException {\r\n        //从头部获取token信息\r\n        String token = request.getHeader(&quot;X-token&quot;);\r\n        //如果请求头部没有获取到token，则从请求的参数中进行获取\r\n        if (ObjUtil.isEmpty(token)) {\r\n            token = request.getParameter(&quot;X-token&quot;);\r\n        }\r\n        //如果请求参数中也不存在token信息，则抛出异常\r\n        if (ObjUtil.isEmpty(token)) {\r\n            throw new CustomAuthException(&quot;token不存在&quot;);\r\n        }\r\n        //判断redis中是否存在该token\r\n        String tokenKey = &quot;&quot;;\r\n        String redisToken = (String) RedisUtil.string.builder().build().get(tokenKey);\r\n\r\n        //如果redis里面没有token,说明该token失效\r\n        if (ObjUtil.isEmpty(redisToken)) {\r\n            throw new CustomAuthException(&quot;token已过期&quot;);\r\n        }\r\n        // 如果token和Redis中的token不一致，则验证失败\r\n        if (!token.equals(redisToken)) {\r\n            throw new CustomAuthException(&quot;token与记录不一致&quot;);\r\n        }\r\n        //如果存在token，则从token中解析出用户名\r\n        JWT jwt = new JWT();\r\n        try {\r\n            JWTUtil.verify(token, &quot;signer&quot;.getBytes());\r\n            JWTValidator.of(token).validateDate(DateUtil.date());\r\n            jwt = JWTUtil.parseToken(token);\r\n        } catch (ValidateException e) {\r\n            throw new CustomAuthException(&quot;token已过期&quot;);\r\n        }\r\n        \r\n        //获取用户信息\r\n        UserDetails user = JSONUtil.toBean(jwt.getPayload(&quot;user&quot;).toString(), User.class);\r\n        //获取权限列表\r\n        user = securityUserDetailsService.loadUserByUsername(user.getUsername());\r\n\r\n        //如果用户为空，则解析失败\r\n        if (ObjUtil.isEmpty(user)) {\r\n            throw new CustomAuthException(&quot;token中不存在用户信息&quot;);\r\n        }\r\n        //此处需要获取token过期时间，如果过期时间剩下预设时间的1/4，则为用户续期token，时间为预设的1/2\r\n        long expired = redisUtil.getExpired(tokenKey);\r\n        if (expired &lt; expire / 4) {\r\n            redisUtil.expire(tokenKey, expire / 2);\r\n        }\r\n\r\n        //创建身份验证对象\r\n        UsernamePasswordAuthenticationToken authenticationToken = new UsernamePasswordAuthenticationToken(user, null,\r\n                user.getAuthorities());\r\n        authenticationToken.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\r\n        //设置到Spring Security上下文\r\n        SecurityContextHolder.setStrategyName(SecurityContextHolder.MODE_INHERITABLETHREADLOCAL);\r\n        SecurityContextHolder.getContext().setAuthentication(authenticationToken);\r\n    }\r\n}    \r\n\r\n    @Component\r\n    public class LoginFailureHandler implements AuthenticationFailureHandler {\r\n    @Override\r\n    public void onAuthenticationFailure(HttpServletRequest request, HttpServletResponse response,\r\n            AuthenticationException exception) throws IOException, ServletException {\r\n        //设置客户端响应编码格式\r\n        response.setContentType(&quot;application/json;charset=UTF-8&quot;);\r\n        //获取输出流\r\n        ServletOutputStream outputStream = response.getOutputStream();\r\n        //提示信息\r\n        String message = null;\r\n        //判断异常类型\r\n        if (exception instanceof AccountExpiredException) {\r\n            message = &quot;账户过期,登录失败！&quot;;\r\n        } else if (exception instanceof BadCredentialsException) {\r\n            message = &quot;用户名或密码错误,登录失败！&quot;;\r\n        } else if (exception instanceof CredentialsExpiredException) {\r\n            message = &quot;密码过期,登录失败！&quot;;\r\n        } else if (exception instanceof DisabledException) {\r\n            message = &quot;账户被禁用,登录失败！ &quot;;\r\n        } else if (exception instanceof LockedException) {\r\n            message = &quot;账户被锁,登录失败！&quot;;\r\n        } else if (exception instanceof InternalAuthenticationServiceException) {\r\n            message = &quot;账户不存在,登录失败！ &quot;;\r\n        } else if (exception instanceof CustomAuthException) {\r\n            message = exception.getMessage();\r\n        } else {\r\n            message = &quot;登录失败！&quot;;\r\n        }\r\n        //将错误信息转换成JSON\r\n\r\n        ResponseUtil.out(Result.error().code(ResultCode.ERROR).message(message));\r\n    }\r\n\r\nthis is my **JwtTokenFilter**, In addition, I also provided the **LoginFailureHandler** for you. The **CustomAuthException** is extends AuthenticationException. Are you aware of any potential problems in my code? @DingHao. thanks","title":"Security exceptionHandling cant register successfully,Filter has somthing wrong","body":"<pre><code>&lt;spring-boot.version&gt;3.1.3&lt;/spring-boot.version&gt;\n\n-------SecConfig---------\n\n@Autowired\nprivate AnonymousAuthenticationHandler anonymousAuthenticationHandler;\n@Bean\npublic JwtTokenFilter authenticationJwtTokenFilter() {\n    return new JwtTokenFilter();\n}\n...\n@Bean\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n   ...\nhttp.exceptionHandling((exception) -&gt; exception.authenticationEntryPoint(anonymousAuthenticationHandler))\n    .authorizeHttpRequests(authorizeHttpRequests -&gt; authorizeHttpRequests\n        .requestMatchers(HttpMethod.OPTIONS, &quot;/**&quot;).permitAll()\n        .requestMatchers(HttpMethod.POST, &quot;/web/authenticate&quot;).permitAll()\n        .requestMatchers(&quot;/error&quot;).permitAll()\n        .anyRequest().authenticated())\n   .addFilterBefore(authenticationJwtTokenFilter(), UsernamePasswordAuthenticationFilter.class);\n   ...\n\n-------AnonymousAuthenticationHandler ---------\n@Component\npublic class AnonymousAuthenticationHandler implements AuthenticationEntryPoint {\n    @Override\n    public void commence(HttpServletRequest request, HttpServletResponse response,\n            AuthenticationException authException) throws IOException, ServletException {\n\n        ResponseUtil.out(Result.error().code(ResultCode.NO_AUTH).message(&quot;匿名用户无权限访问！&quot;));\n    }\n}\n}\n</code></pre>\n<p>When I initiate a request, the request is successfully entered <strong>authenticationJwtTokenFilter</strong>, but when the request not auth, it cant into my <strong>anonymousAuthenticationHandler</strong>, when I check the type of chainFilter, discover its type seems a bit problematic. For example, its type is <strong>ApplicationFinterConfig</strong> instead of <strong>FilterChainProxy</strong> and my filterChains just own seven filter</p>\n<h1>My project</h1>\n<p><a href=\"https://i.stack.imgur.com/LyimU.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<h1>Other project<a href=\"https://github.com/markvivv/springboot-security-jwt-example\" rel=\"nofollow noreferrer\">click here for check the code</a></h1>\n<p><a href=\"https://i.stack.imgur.com/IUp0Q.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>My configuration is not much different from his configuration\nWhat is the cause of this problem and how can I modify my code</p>\n<pre><code>public class JwtTokenFilter extends OncePerRequestFilter {\n//获取登录请求地址\n@Value(&quot;${request.login.url}&quot;)\nprivate String loginUrl;\n\n//获取登录请求地址\n@Value(&quot;${request.logout.url}&quot;)\nprivate String logoutUrl;\n\n@Value(&quot;${jwt.expire}&quot;)\nprivate int expire;\n\n@Autowired\nprivate LoginFailureHandler loginFailureHandler;\n\n@Autowired\nprivate SecurityUserDetailsService securityUserDetailsService;\n\n@Autowired\nprivate RedisUtil redisUtil;\n\n@Override\nprotected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\n        throws ServletException, IOException {\n    try {\n        // 如果是登录或者登出接口，直接放行\n        String requestURI = request.getRequestURI();\n        if (requestURI.equals(loginUrl) || requestURI.equals(logoutUrl)) {\n            filterChain.doFilter(request, response);\n        }\n        // 从request获取token\n        validToken(request);\n    } catch (AuthenticationException e) {\n        loginFailureHandler.onAuthenticationFailure(request, response, e);\n        logger.error(&quot;Cannot set user authentication!&quot;, e);\n    }\n    filterChain.doFilter(request, response);\n}\n\nprivate void validToken(HttpServletRequest request) throws AuthenticationException, ValidateException {\n    //从头部获取token信息\n    String token = request.getHeader(&quot;X-token&quot;);\n    //如果请求头部没有获取到token，则从请求的参数中进行获取\n    if (ObjUtil.isEmpty(token)) {\n        token = request.getParameter(&quot;X-token&quot;);\n    }\n    //如果请求参数中也不存在token信息，则抛出异常\n    if (ObjUtil.isEmpty(token)) {\n        throw new CustomAuthException(&quot;token不存在&quot;);\n    }\n    //判断redis中是否存在该token\n    String tokenKey = &quot;&quot;;\n    String redisToken = (String) RedisUtil.string.builder().build().get(tokenKey);\n\n    //如果redis里面没有token,说明该token失效\n    if (ObjUtil.isEmpty(redisToken)) {\n        throw new CustomAuthException(&quot;token已过期&quot;);\n    }\n    // 如果token和Redis中的token不一致，则验证失败\n    if (!token.equals(redisToken)) {\n        throw new CustomAuthException(&quot;token与记录不一致&quot;);\n    }\n    //如果存在token，则从token中解析出用户名\n    JWT jwt = new JWT();\n    try {\n        JWTUtil.verify(token, &quot;signer&quot;.getBytes());\n        JWTValidator.of(token).validateDate(DateUtil.date());\n        jwt = JWTUtil.parseToken(token);\n    } catch (ValidateException e) {\n        throw new CustomAuthException(&quot;token已过期&quot;);\n    }\n    \n    //获取用户信息\n    UserDetails user = JSONUtil.toBean(jwt.getPayload(&quot;user&quot;).toString(), User.class);\n    //获取权限列表\n    user = securityUserDetailsService.loadUserByUsername(user.getUsername());\n\n    //如果用户为空，则解析失败\n    if (ObjUtil.isEmpty(user)) {\n        throw new CustomAuthException(&quot;token中不存在用户信息&quot;);\n    }\n    //此处需要获取token过期时间，如果过期时间剩下预设时间的1/4，则为用户续期token，时间为预设的1/2\n    long expired = redisUtil.getExpired(tokenKey);\n    if (expired &lt; expire / 4) {\n        redisUtil.expire(tokenKey, expire / 2);\n    }\n\n    //创建身份验证对象\n    UsernamePasswordAuthenticationToken authenticationToken = new UsernamePasswordAuthenticationToken(user, null,\n            user.getAuthorities());\n    authenticationToken.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\n    //设置到Spring Security上下文\n    SecurityContextHolder.setStrategyName(SecurityContextHolder.MODE_INHERITABLETHREADLOCAL);\n    SecurityContextHolder.getContext().setAuthentication(authenticationToken);\n}\n</code></pre>\n<p>}</p>\n<pre><code>@Component\npublic class LoginFailureHandler implements AuthenticationFailureHandler {\n@Override\npublic void onAuthenticationFailure(HttpServletRequest request, HttpServletResponse response,\n        AuthenticationException exception) throws IOException, ServletException {\n    //设置客户端响应编码格式\n    response.setContentType(&quot;application/json;charset=UTF-8&quot;);\n    //获取输出流\n    ServletOutputStream outputStream = response.getOutputStream();\n    //提示信息\n    String message = null;\n    //判断异常类型\n    if (exception instanceof AccountExpiredException) {\n        message = &quot;账户过期,登录失败！&quot;;\n    } else if (exception instanceof BadCredentialsException) {\n        message = &quot;用户名或密码错误,登录失败！&quot;;\n    } else if (exception instanceof CredentialsExpiredException) {\n        message = &quot;密码过期,登录失败！&quot;;\n    } else if (exception instanceof DisabledException) {\n        message = &quot;账户被禁用,登录失败！ &quot;;\n    } else if (exception instanceof LockedException) {\n        message = &quot;账户被锁,登录失败！&quot;;\n    } else if (exception instanceof InternalAuthenticationServiceException) {\n        message = &quot;账户不存在,登录失败！ &quot;;\n    } else if (exception instanceof CustomAuthException) {\n        message = exception.getMessage();\n    } else {\n        message = &quot;登录失败！&quot;;\n    }\n    //将错误信息转换成JSON\n\n    ResponseUtil.out(Result.error().code(ResultCode.ERROR).message(message));\n}\n</code></pre>\n<p>this is my <strong>JwtTokenFilter</strong>, In addition, I also provided the <strong>LoginFailureHandler</strong> for you. The <strong>CustomAuthException</strong> is extends AuthenticationException. Are you aware of any potential problems in my code? @DingHao. thanks</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9925,"page":107,"page_size":100}
