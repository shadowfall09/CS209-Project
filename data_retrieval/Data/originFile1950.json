{"items":[{"tags":["java","amazon-web-services","amazon-ec2"],"answers":[{"tags":[],"owner":{"account_id":100740,"reputation":73217,"user_id":271415,"accept_rate":91,"display_name":"jarmod"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1634089898,"creation_date":1634089898,"answer_id":69548827,"question_id":69546505,"body_markdown":"Instance status can be one of:\r\n\r\n`ok | impaired | initializing | insufficient-data | not-applicable`\r\n\r\nThe [instanceStatusOK][1] waiter method is a helper that creates a pre-configured waiter which can then be run to poll until the waiter determines whether or not the EC2 instance has the desired status (`ok`) or not.\r\n\r\nIt *knows* your desired status (of `ok`) because it&#39;s pre-configured with that status. You can create waiters for other status values but they don&#39;t have equivalent pre-configured helpers afaik (presumably because they&#39;re not as useful, in general).\r\n\r\n\r\n  [1]: https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/ec2/waiters/AmazonEC2Waiters.html#instanceStatusOk--","title":"Understanding EC2 waiters","body":"<p>Instance status can be one of:</p>\n<p><code>ok | impaired | initializing | insufficient-data | not-applicable</code></p>\n<p>The <a href=\"https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/ec2/waiters/AmazonEC2Waiters.html#instanceStatusOk--\" rel=\"nofollow noreferrer\">instanceStatusOK</a> waiter method is a helper that creates a pre-configured waiter which can then be run to poll until the waiter determines whether or not the EC2 instance has the desired status (<code>ok</code>) or not.</p>\n<p>It <em>knows</em> your desired status (of <code>ok</code>) because it's pre-configured with that status. You can create waiters for other status values but they don't have equivalent pre-configured helpers afaik (presumably because they're not as useful, in general).</p>\n"}],"owner":{"account_id":21791742,"reputation":212,"user_id":16091860,"display_name":"croakPedlar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":292,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69548827,"answer_count":1,"score":0,"last_activity_date":1634089898,"creation_date":1634069614,"question_id":69546505,"body_markdown":"I have the following code that I&#39;d like to understand:\r\n\r\n    DescribeInstanceStatusRequest instanceRequest = new DescribeInstanceStatusRequest().withInstanceIds([String of our instanceId]);\r\n    AmazonEC2 ec2 = AmazonEC2ClientBuilder.defaultClient();\r\n    ec2.startInstances([instanceID string]);\r\n    ec2.waiters().instanceStatusOK().run(new WaiterParameters&lt;DescribeInstanceStatusRequest&gt;().withRequest(instanceRequest));\r\n\r\nI was assured that this will start my ec2 instance and check that it it&#39;s running. I also understand that documentation states that `instanceStatusOk()` will poll until my desired state is achieved. How does the 4th line know what my desired state is?","title":"Understanding EC2 waiters","body":"<p>I have the following code that I'd like to understand:</p>\n<pre><code>DescribeInstanceStatusRequest instanceRequest = new DescribeInstanceStatusRequest().withInstanceIds([String of our instanceId]);\nAmazonEC2 ec2 = AmazonEC2ClientBuilder.defaultClient();\nec2.startInstances([instanceID string]);\nec2.waiters().instanceStatusOK().run(new WaiterParameters&lt;DescribeInstanceStatusRequest&gt;().withRequest(instanceRequest));\n</code></pre>\n<p>I was assured that this will start my ec2 instance and check that it it's running. I also understand that documentation states that <code>instanceStatusOk()</code> will poll until my desired state is achieved. How does the 4th line know what my desired state is?</p>\n"},{"tags":["java","bouncycastle","dsa"],"comments":[{"owner":{"account_id":2806090,"reputation":80148,"user_id":2413303,"accept_rate":100,"display_name":"EpicPandaForce"},"score":0,"creation_date":1423493359,"post_id":28411607,"comment_id":45158230,"body_markdown":"is the DER file encoded in any way, or protected with password?","body":"is the DER file encoded in any way, or protected with password?"},{"owner":{"account_id":2806090,"reputation":80148,"user_id":2413303,"accept_rate":100,"display_name":"EpicPandaForce"},"score":0,"creation_date":1423493466,"post_id":28411607,"comment_id":45158296,"body_markdown":"according to the source, the following method is called: `PrivateKeyFactory.createKey(PrivateKeyInfo.getInstance(new ASN1InputStream(inputStream).readObject()));` please try to do this manually and see which step fails using `new FileInputStream(&quot;sign-key-private.der&quot;);`","body":"according to the source, the following method is called: <code>PrivateKeyFactory.createKey(PrivateKeyInfo.getInstance(new ASN1InputStream(inputStream).readObject()));</code> please try to do this manually and see which step fails using <code>new FileInputStream(&quot;sign-key-private.der&quot;);</code>"},{"owner":{"account_id":1619595,"reputation":793,"user_id":1496472,"accept_rate":40,"display_name":"Greycon"},"score":0,"creation_date":1423502756,"post_id":28411607,"comment_id":45164480,"body_markdown":"From the source, and the stacktrace, it&#39;s trying to parse the ANS encoded Algorithm Identifier, expecting a sequence, and getting an ASN encoded Integer. So... any chance you could use openssl to dump the contents of the .DER file and ensure that it can do so successfully?","body":"From the source, and the stacktrace, it&#39;s trying to parse the ANS encoded Algorithm Identifier, expecting a sequence, and getting an ASN encoded Integer. So... any chance you could use openssl to dump the contents of the .DER file and ensure that it can do so successfully?"},{"owner":{"account_id":2860791,"reputation":1601,"user_id":2456113,"accept_rate":96,"display_name":"kulatamicuda"},"score":0,"creation_date":1423563500,"post_id":28411607,"comment_id":45189413,"body_markdown":"DER file is not protected with password and is generated with XCA 0.9.3. I have workarounded the problem by converting to PEM file","body":"DER file is not protected with password and is generated with XCA 0.9.3. I have workarounded the problem by converting to PEM file"}],"answers":[{"tags":[],"owner":{"account_id":2860791,"reputation":1601,"user_id":2456113,"accept_rate":96,"display_name":"kulatamicuda"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1423563814,"creation_date":1423563814,"answer_id":28429262,"question_id":28411607,"body_markdown":"The workaround solution I have finally used was to convert key to PEM format and use the following:\r\n\r\n     @Cleanup\r\n     FileReader privateKeyReader = new FileReader(new File(&quot;key.pem&quot;));\r\n     @Cleanup\r\n     PEMParser parser = new PEMParser(privateKeyReader);\r\n    \r\n     PEMKeyPair keyPair = (PEMKeyPair) parser.readObject();\r\n     AsymmetricKeyParameter privateKey = PrivateKeyFactory\r\n         .createKey(keyPair.getPrivateKeyInfo());\r\n     AsymmetricKeyParameter publicKey = PublicKeyFactory\r\n         .createKey(keyPair.getPublicKeyInfo());\r\n","title":"How to read DER DSA private key to AsymmetricKeyParameter in bouncy castle (Java)","body":"<p>The workaround solution I have finally used was to convert key to PEM format and use the following:</p>\n\n<pre><code> @Cleanup\n FileReader privateKeyReader = new FileReader(new File(\"key.pem\"));\n @Cleanup\n PEMParser parser = new PEMParser(privateKeyReader);\n\n PEMKeyPair keyPair = (PEMKeyPair) parser.readObject();\n AsymmetricKeyParameter privateKey = PrivateKeyFactory\n     .createKey(keyPair.getPrivateKeyInfo());\n AsymmetricKeyParameter publicKey = PublicKeyFactory\n     .createKey(keyPair.getPublicKeyInfo());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22343417,"reputation":11,"user_id":16562855,"display_name":"Karl Engel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634089800,"creation_date":1634089800,"answer_id":69548812,"question_id":28411607,"body_markdown":"    byte[] privateKeyBytes = FileUtils.readFileToByteArray(new File(&quot;sign-key-private.der&quot;));\r\n    KeyFactory kf = KeyFactory.getInstance(&quot;RSA&quot;, &quot;BC&quot;);\r\n    PKCS8EncodedKeySpec keySpec = new PKCS8EncodedKeySpec(privateKeyBytes);\r\n    RSAPrivateKey rsaKey = (RSAPrivateKey) kf.generatePrivate(keySpec);\r\n    AsymmetricKeyParameter privateKeyParameter = new RSAKeyParameters(true, rsaKey.getModulus(), rsaKey.getPrivateExponent());\r\n\r\n","title":"How to read DER DSA private key to AsymmetricKeyParameter in bouncy castle (Java)","body":"<pre><code>byte[] privateKeyBytes = FileUtils.readFileToByteArray(new File(&quot;sign-key-private.der&quot;));\nKeyFactory kf = KeyFactory.getInstance(&quot;RSA&quot;, &quot;BC&quot;);\nPKCS8EncodedKeySpec keySpec = new PKCS8EncodedKeySpec(privateKeyBytes);\nRSAPrivateKey rsaKey = (RSAPrivateKey) kf.generatePrivate(keySpec);\nAsymmetricKeyParameter privateKeyParameter = new RSAKeyParameters(true, rsaKey.getModulus(), rsaKey.getPrivateExponent());\n</code></pre>\n"}],"owner":{"account_id":2860791,"reputation":1601,"user_id":2456113,"accept_rate":96,"display_name":"kulatamicuda"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3994,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":28429262,"answer_count":2,"score":0,"last_activity_date":1634089800,"creation_date":1423490746,"question_id":28411607,"body_markdown":"How to read DER file with private DSA key (4096 bit) into AsymmetricKeyParameter for usage in DSASigner ?\r\n\r\nThe following code I tried:\r\n\r\n     byte[] privateKeyBytes = FileUtils.readFileToByteArray(new File(\r\n                        &quot;sign-key-private.der&quot;));\r\n     AsymmetricKeyParameter privateKey = PrivateKeyFactory\r\n                        .createKey(privateKeyBytes);\r\n\r\nResult is an exception:\r\n\r\n    java.lang.IllegalArgumentException: unknown object in getInstance: org.bouncycastle.asn1.ASN1Integer\r\n    \tat org.bouncycastle.asn1.ASN1Sequence.getInstance(Unknown Source)\r\n    \tat org.bouncycastle.asn1.x509.AlgorithmIdentifier.getInstance(Unknown Source)\r\n    \tat org.bouncycastle.asn1.pkcs.PrivateKeyInfo.&lt;init&gt;(Unknown Source)\r\n    \tat org.bouncycastle.asn1.pkcs.PrivateKeyInfo.getInstance(Unknown Source)\r\n    \tat org.bouncycastle.crypto.util.PrivateKeyFactory.createKey(Unknown Source)\r\n    \tat test.security.core.Program.main(Program.java:41)","title":"How to read DER DSA private key to AsymmetricKeyParameter in bouncy castle (Java)","body":"<p>How to read DER file with private DSA key (4096 bit) into AsymmetricKeyParameter for usage in DSASigner ?</p>\n\n<p>The following code I tried:</p>\n\n<pre><code> byte[] privateKeyBytes = FileUtils.readFileToByteArray(new File(\n                    \"sign-key-private.der\"));\n AsymmetricKeyParameter privateKey = PrivateKeyFactory\n                    .createKey(privateKeyBytes);\n</code></pre>\n\n<p>Result is an exception:</p>\n\n<pre><code>java.lang.IllegalArgumentException: unknown object in getInstance: org.bouncycastle.asn1.ASN1Integer\n    at org.bouncycastle.asn1.ASN1Sequence.getInstance(Unknown Source)\n    at org.bouncycastle.asn1.x509.AlgorithmIdentifier.getInstance(Unknown Source)\n    at org.bouncycastle.asn1.pkcs.PrivateKeyInfo.&lt;init&gt;(Unknown Source)\n    at org.bouncycastle.asn1.pkcs.PrivateKeyInfo.getInstance(Unknown Source)\n    at org.bouncycastle.crypto.util.PrivateKeyFactory.createKey(Unknown Source)\n    at test.security.core.Program.main(Program.java:41)\n</code></pre>\n"},{"tags":["java","recursion","linked-list","truncate"],"answers":[{"tags":[],"owner":{"display_name":"user4910279"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634089714,"creation_date":1634087338,"answer_id":69548585,"question_id":69548455,"body_markdown":"Try this.\r\n\r\n    record ListNode(int val, ListNode next) {}\r\n\r\n    public static ListNode truncate(ListNode head, int numNodes) {\r\n        if (head == null || numNodes &lt;= 0)\r\n            return null;\r\n        else\r\n            return new ListNode(head.val, truncate(head.next, numNodes - 1));\r\n    }\r\n\r\n    public static String toString(ListNode head) {\r\n        List&lt;String&gt; list = new ArrayList&lt;&gt;();\r\n        for ( ; head != null; head = head.next)\r\n            list.add(&quot;&quot; + head.val);\r\n        return list.toString();\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        ListNode list = new ListNode(1, new ListNode(2, new ListNode(3, null)));\r\n        System.out.println(&quot;list = &quot; + toString(list));\r\n        System.out.println(&quot;truncate(list, 3) = &quot; + toString(truncate(list, 3)));\r\n        System.out.println(&quot;truncate(list, 2) = &quot; + toString(truncate(list, 2)));\r\n        System.out.println(&quot;truncate(list, 1) = &quot; + toString(truncate(list, 1)));\r\n        System.out.println(&quot;truncate(list, 0) = &quot; + toString(truncate(list, 0)));\r\n    }\r\n\r\noutput:\r\n\r\n    list = [1, 2, 3]\r\n    truncate(list, 3) = [1, 2, 3]\r\n    truncate(list, 2) = [1, 2]\r\n    truncate(list, 1) = [1]\r\n    truncate(list, 0) = []\r\n\r\n","title":"Recursive solution for truncating a linked list","body":"<p>Try this.</p>\n<pre><code>record ListNode(int val, ListNode next) {}\n\npublic static ListNode truncate(ListNode head, int numNodes) {\n    if (head == null || numNodes &lt;= 0)\n        return null;\n    else\n        return new ListNode(head.val, truncate(head.next, numNodes - 1));\n}\n\npublic static String toString(ListNode head) {\n    List&lt;String&gt; list = new ArrayList&lt;&gt;();\n    for ( ; head != null; head = head.next)\n        list.add(&quot;&quot; + head.val);\n    return list.toString();\n}\n\npublic static void main(String[] args) {\n    ListNode list = new ListNode(1, new ListNode(2, new ListNode(3, null)));\n    System.out.println(&quot;list = &quot; + toString(list));\n    System.out.println(&quot;truncate(list, 3) = &quot; + toString(truncate(list, 3)));\n    System.out.println(&quot;truncate(list, 2) = &quot; + toString(truncate(list, 2)));\n    System.out.println(&quot;truncate(list, 1) = &quot; + toString(truncate(list, 1)));\n    System.out.println(&quot;truncate(list, 0) = &quot; + toString(truncate(list, 0)));\n}\n</code></pre>\n<p>output:</p>\n<pre><code>list = [1, 2, 3]\ntruncate(list, 3) = [1, 2, 3]\ntruncate(list, 2) = [1, 2]\ntruncate(list, 1) = [1]\ntruncate(list, 0) = []\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4400801,"reputation":21,"user_id":3586570,"display_name":"Leo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634087696,"creation_date":1634087696,"answer_id":69548615,"question_id":69548455,"body_markdown":"Maybe you can use prefix increment instead of postfix at the recursive call to truncate, changing from truncate(head.next, numNodes--) to truncate(head.next, --numNodes) so that numNodes is decremented before the recursion.","title":"Recursive solution for truncating a linked list","body":"<p>Maybe you can use prefix increment instead of postfix at the recursive call to truncate, changing from truncate(head.next, numNodes--) to truncate(head.next, --numNodes) so that numNodes is decremented before the recursion.</p>\n"}],"owner":{"account_id":23016622,"reputation":11,"user_id":17138291,"display_name":"leetcodder1980"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":100,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1634089714,"creation_date":1634085907,"question_id":69548455,"body_markdown":"```\r\npublic class Solution {\r\n\r\n  /**\r\n   * Return a list containing, at most, the first numNodes nodes in the list starting with head. If\r\n   * numNodes is larger than the length of the list, then the entire list will be returned.\r\n   * \r\n   * Examples:\r\n   * \r\n   * &lt;pre&gt;\r\n   * [11, 12, 13], numNodes = 2\r\n   * returns [11, 12]\r\n   * \r\n   * [11, 12, 13], numNodes = 0\r\n   * returns []\r\n   * \r\n   * [11, 12, 13], numNodes = 100\r\n   * returns [11, 12, 13]\r\n   * \r\n   * [], numNodes = 5\r\n   * returns []\r\n   * &lt;/pre&gt;\r\n   * \r\n   * @param head - Head of the list to truncate\r\n   * @param numNodes - Maximum number of nodes in the resulting list\r\n   * @return head of the truncated list\r\n   */\r\n  public static ListNode truncate(ListNode head, int numNodes) {\r\n    // just return null\r\n    if (head == null) {\r\n      return null;\r\n    }\r\n    // Recursion head.next\r\n    if (head.next != null) {\r\n      head.next = truncate(head.next, numNodes--);\r\n    }\r\n    \r\n    if (numNodes &lt;= 0) {\r\n      return head.next;\r\n    } else {\r\n      return head;\r\n    }\r\n  }\r\n```\r\nAs you can see, the purpose of this code is to truncate every node past numNodes. Im passing every test besides the situation where a list of length 4 is passed through and I need to return the first 3 nodes(numNodes = 3). If anyone could help me out, that would be much appreciated. I don&#39;t know what Im doing wrong. \r\n\r\nheres the ListNode class\r\n\r\n```\r\n/**\r\n * Simple Singly-linked-list node.\r\n */\r\npublic class ListNode {\r\n\r\n  public int val;\r\n  public ListNode next;\r\n\r\n  public ListNode(int val, ListNode next) {\r\n    this.val = val;\r\n    this.next = next;\r\n  }\r\n\r\n  public ListNode(int val) {\r\n    this.val = val;\r\n    this.next = null;\r\n  }\r\n\r\n  public ListNode() {\r\n    this.val = 0;\r\n    this.next = null;\r\n  }\r\n}\r\n```\r\nhere is the only test I&#39;m failing\r\n\r\ntestTruncateLengthFourListToThree()\t\texpected: [10, 11, 12] actual: [10, 11, 12, 13]\r\n\r\nSolution has to be recursive.","title":"Recursive solution for truncating a linked list","body":"<pre><code>public class Solution {\n\n  /**\n   * Return a list containing, at most, the first numNodes nodes in the list starting with head. If\n   * numNodes is larger than the length of the list, then the entire list will be returned.\n   * \n   * Examples:\n   * \n   * &lt;pre&gt;\n   * [11, 12, 13], numNodes = 2\n   * returns [11, 12]\n   * \n   * [11, 12, 13], numNodes = 0\n   * returns []\n   * \n   * [11, 12, 13], numNodes = 100\n   * returns [11, 12, 13]\n   * \n   * [], numNodes = 5\n   * returns []\n   * &lt;/pre&gt;\n   * \n   * @param head - Head of the list to truncate\n   * @param numNodes - Maximum number of nodes in the resulting list\n   * @return head of the truncated list\n   */\n  public static ListNode truncate(ListNode head, int numNodes) {\n    // just return null\n    if (head == null) {\n      return null;\n    }\n    // Recursion head.next\n    if (head.next != null) {\n      head.next = truncate(head.next, numNodes--);\n    }\n    \n    if (numNodes &lt;= 0) {\n      return head.next;\n    } else {\n      return head;\n    }\n  }\n</code></pre>\n<p>As you can see, the purpose of this code is to truncate every node past numNodes. Im passing every test besides the situation where a list of length 4 is passed through and I need to return the first 3 nodes(numNodes = 3). If anyone could help me out, that would be much appreciated. I don't know what Im doing wrong.</p>\n<p>heres the ListNode class</p>\n<pre><code>/**\n * Simple Singly-linked-list node.\n */\npublic class ListNode {\n\n  public int val;\n  public ListNode next;\n\n  public ListNode(int val, ListNode next) {\n    this.val = val;\n    this.next = next;\n  }\n\n  public ListNode(int val) {\n    this.val = val;\n    this.next = null;\n  }\n\n  public ListNode() {\n    this.val = 0;\n    this.next = null;\n  }\n}\n</code></pre>\n<p>here is the only test I'm failing</p>\n<p>testTruncateLengthFourListToThree()     expected: [10, 11, 12] actual: [10, 11, 12, 13]</p>\n<p>Solution has to be recursive.</p>\n"},{"tags":["java","sockets","udp"],"comments":[{"owner":{"account_id":22425724,"reputation":1060,"user_id":16632363,"display_name":"user16632363"},"score":2,"creation_date":1634077765,"post_id":69547536,"comment_id":122928422,"body_markdown":"You know datagrams do not guarantee delivery anyway?  The U in UDP tells you that.  So pacing on the send side is not necessarily a complete solution.","body":"You know datagrams do not guarantee delivery anyway?  The U in UDP tells you that.  So pacing on the send side is not necessarily a complete solution."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1634096344,"post_id":69547536,"comment_id":122931605,"body_markdown":"You&#39;re barking up the wrong tree. Packets are not dropped because the send buffer is full. That causes `DatagramSocket.send()` to *block*. See the Javadoc. Packets are being dropped because UDP can drop them any time it likes anywhere in the network, including the sending host, any intermediate routers, and the receiving host. Either speed up your *receiver* or don&#39;t send so fast, or both, or use a reliable protocol with pacing.","body":"You&#39;re barking up the wrong tree. Packets are not dropped because the send buffer is full. That causes <code>DatagramSocket.send()</code> to <i>block</i>. See the Javadoc. Packets are being dropped because UDP can drop them any time it likes anywhere in the network, including the sending host, any intermediate routers, and the receiving host. Either speed up your <i>receiver</i> or don&#39;t send so fast, or both, or use a reliable protocol with pacing."}],"answers":[{"tags":[],"owner":{"account_id":22425724,"reputation":1060,"user_id":16632363,"display_name":"user16632363"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1634089143,"creation_date":1634089143,"answer_id":69548751,"question_id":69547536,"body_markdown":"You can use a [DatagramChannel](https://docs.oracle.com/javase/7/docs/api/java/nio/channels/DatagramChannel.html) instead of creating the socket directly.\r\n\r\nThe channel can be set in blocking mode which, according to the description of [send](https://docs.oracle.com/javase/7/docs/api/java/nio/channels/DatagramChannel.html#send(java.nio.ByteBuffer,%20java.net.SocketAddress)) means the call will wait until buffer space is available.\r\n","title":"Blocking java UDP DatagramSocket send","body":"<p>You can use a <a href=\"https://docs.oracle.com/javase/7/docs/api/java/nio/channels/DatagramChannel.html\" rel=\"nofollow noreferrer\">DatagramChannel</a> instead of creating the socket directly.</p>\n<p>The channel can be set in blocking mode which, according to the description of <a href=\"https://docs.oracle.com/javase/7/docs/api/java/nio/channels/DatagramChannel.html#send(java.nio.ByteBuffer,%20java.net.SocketAddress)\" rel=\"nofollow noreferrer\">send</a> means the call will wait until buffer space is available.</p>\n"}],"owner":{"account_id":17067184,"reputation":1,"user_id":16164796,"display_name":"jo&#227;o correia"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":184,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1634089143,"creation_date":1634076345,"question_id":69547536,"body_markdown":"I&#39;m building a client/server type of application, where the client will be sending millions  of messages. I have a thread whose purpose is only to send packets through a DatagramSocket. The problem is that, right now, the thread is calling the send() method so many types that some packets are being dropped as the internal sending buffer is full.\r\n\r\nIs there a way, on java, to have this send() of a DatagramSocket object call block if the buffer is already full, in order to not drop packets? ","title":"Blocking java UDP DatagramSocket send","body":"<p>I'm building a client/server type of application, where the client will be sending millions  of messages. I have a thread whose purpose is only to send packets through a DatagramSocket. The problem is that, right now, the thread is calling the send() method so many types that some packets are being dropped as the internal sending buffer is full.</p>\n<p>Is there a way, on java, to have this send() of a DatagramSocket object call block if the buffer is already full, in order to not drop packets?</p>\n"},{"tags":["java","mongodb","spring-boot"],"comments":[{"owner":{"account_id":10846480,"reputation":8784,"user_id":7975771,"accept_rate":12,"display_name":"varman"},"score":0,"creation_date":1634090067,"post_id":69548219,"comment_id":122930602,"body_markdown":"The error says that u dont have constructor. Create `@NoArgsConstructor` and `@AllArgsConstructor` in CustomerResponse","body":"The error says that u dont have constructor. Create <code>@NoArgsConstructor</code> and <code>@AllArgsConstructor</code> in CustomerResponse"},{"owner":{"account_id":1837765,"reputation":1991,"user_id":1667768,"accept_rate":44,"display_name":"Valay"},"score":1,"creation_date":1634090612,"post_id":69548219,"comment_id":122930683,"body_markdown":"@varman Adding a constructor as suggested in below answer helped me to resolve the issue. Thanks.","body":"@varman Adding a constructor as suggested in below answer helped me to resolve the issue. Thanks."}],"answers":[{"tags":[],"owner":{"account_id":4700393,"reputation":3576,"user_id":6099811,"display_name":"navnath"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1634083985,"creation_date":1634083985,"answer_id":69548276,"question_id":69548219,"body_markdown":"Here `new CustomerResponse(customerRepository.save(customer))`.  Inside `CustomerResponse` there is no constructor which accepts `Customer` as a parameter. You can create one. So your `CustomerResponse ` would look like this.\r\n\r\n    import com.customerapi.model.Customer;\r\n    \r\n    @Getter\r\n    @Setter\r\n    @ToString\r\n    @JsonInclude(Include.NON_NULL)\r\n    public class CustomerResponse {\r\n        @JsonProperty(&quot;custRefId&quot;)\r\n        private String custRefId;\r\n    \t\r\n        public CustomerResponse(Customer customer){\r\n    \t\tthis.custRefId = customer.getCustRefId();\r\n    \t}\r\n    }\r\n\r\n","title":"Spring-boot mongodb - how to convert MongoRepository save response to custom class and return as JSON","body":"<p>Here <code>new CustomerResponse(customerRepository.save(customer))</code>.  Inside <code>CustomerResponse</code> there is no constructor which accepts <code>Customer</code> as a parameter. You can create one. So your <code>CustomerResponse </code> would look like this.</p>\n<pre><code>import com.customerapi.model.Customer;\n\n@Getter\n@Setter\n@ToString\n@JsonInclude(Include.NON_NULL)\npublic class CustomerResponse {\n    @JsonProperty(&quot;custRefId&quot;)\n    private String custRefId;\n    \n    public CustomerResponse(Customer customer){\n        this.custRefId = customer.getCustRefId();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1837765,"reputation":1991,"user_id":1667768,"accept_rate":44,"display_name":"Valay"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":708,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69548276,"answer_count":1,"score":0,"last_activity_date":1634089140,"creation_date":1634083344,"question_id":69548219,"body_markdown":"I&#39;m trying to learn `spring-boot` with `mongodb`. I&#39;ve followed online articles and tutorials and the sample application is working fine for returning string as API response. But when I&#39;m trying to return response as JSON using `ResponseEntity` I&#39;m getting an error. \r\n\r\nHere&#39;s the code:\r\n\r\n`src/customerapi/model/Customer.java`\r\n\r\n    package com.customerapi.model;\r\n    \r\n    import org.springframework.data.annotation.Id;\r\n    import org.springframework.data.mongodb.core.mapping.Document;\r\n    \r\n    import lombok.Getter;\r\n    import lombok.Setter;\r\n    import lombok.ToString;\r\n    \r\n    @Getter\r\n    @Setter\r\n    @ToString\r\n    \r\n    @Document(collation = &quot;customer&quot;)\r\n    public class Customer {\r\n    \t@Id\r\n    \tprivate String custRefId;\r\n    \t\r\n        private String title;\r\n    \r\n        private String firstName;\r\n        \r\n        private String middleName;\r\n    \r\n        private String lastName;\r\n        \r\n        private String businessName;\r\n    \r\n        private String email;\r\n    \r\n        private String phone;\r\n    \r\n        private String note;\r\n        \r\n        private String dateOfBirth;\r\n    \r\n        private String sex;\r\n        \r\n        \r\n    }\r\n\r\n`src/customerapi/dto/CustomerResponse.java`\r\n\r\n    package com.customerapi.dto;\r\n    \r\n    import com.fasterxml.jackson.annotation.JsonInclude;\r\n    import com.fasterxml.jackson.annotation.JsonProperty;\r\n    import com.fasterxml.jackson.annotation.JsonInclude.Include;\r\n    \r\n    import lombok.Getter;\r\n    import lombok.Setter;\r\n    import lombok.ToString;\r\n    \r\n    @Getter\r\n    @Setter\r\n    @ToString\r\n    @JsonInclude(Include.NON_NULL)\r\n    public class CustomerResponse {\r\n    \t@JsonProperty(&quot;custRefId&quot;)\r\n    \tprivate String custRefId;\r\n    \t\r\n    }\r\n\r\n`src/customerapi/repository/CustomerRepository.java`\r\n\r\n    package com.customerapi.repository;\r\n    \r\n    import org.springframework.data.mongodb.repository.MongoRepository;\r\n    \r\n    import com.customerapi.dto.CustomerResponse;\r\n    import com.customerapi.model.Customer;\r\n    \r\n    public interface CustomerRepository extends MongoRepository&lt;Customer, String&gt; {\r\n    }\r\n\r\n`src/customerapi/resource/CustomerController.java`\r\n\r\n    package com.customerapi.resource;\r\n    \r\n    import static java.util.concurrent.TimeUnit.MILLISECONDS;\r\n    \r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.http.HttpStatus;\r\n    import org.springframework.http.MediaType;\r\n    import org.springframework.http.ResponseEntity;\r\n    import org.springframework.web.bind.annotation.PostMapping;\r\n    import org.springframework.web.bind.annotation.RequestBody;\r\n    import org.springframework.web.bind.annotation.ResponseStatus;\r\n    import org.springframework.web.bind.annotation.RestController;\r\n    \r\n    import com.customerapi.repository.CustomerRepository;\r\n    import com.customerapi.model.Customer;\r\n    import com.customerapi.dto.CustomerResponse;\r\n    \r\n    @RestController\r\n    public class CustomerController {\r\n    \t\r\n    \t@Autowired\r\n    \tprivate CustomerRepository customerRepository;\r\n    \t\r\n    \t@PostMapping(value=&quot;/addCustomer&quot;, produces = MediaType.APPLICATION_JSON_VALUE)\r\n    \t@ResponseStatus(HttpStatus.CREATED)\r\n    \tpublic ResponseEntity&lt;CustomerResponse&gt; saveCustomer(@RequestBody Customer customer) {\r\n    \t\t\r\n    \t\ttry {\r\n    \t\t\treturn new ResponseEntity&lt;CustomerResponse&gt;(new customerRepository.save(customer), HttpStatus.CREATED);\r\n    \t\t}finally {\r\n    \t\t\tSystem.out.println(&quot;Issue with saving data in DB&quot;);\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nReturning a `string` from `saveCustomer()` works fine. But when I&#39;m trying to return `ResponseEntity&lt;CustomerResponse&gt;` and hit the endpoint in Postman I&#39;m getting this error.\r\n\r\n[![postman error][1]][1]\r\n\r\nI searched online and tried multiple things from stackoverflow answers but nothing seems to be working for me. \r\n\r\n**How do I convert `MongoRepository`&#39;s `save` response to custom class and return as JSON using `ResponseEntity`? **\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/M9XHu.png","title":"Spring-boot mongodb - how to convert MongoRepository save response to custom class and return as JSON","body":"<p>I'm trying to learn <code>spring-boot</code> with <code>mongodb</code>. I've followed online articles and tutorials and the sample application is working fine for returning string as API response. But when I'm trying to return response as JSON using <code>ResponseEntity</code> I'm getting an error.</p>\n<p>Here's the code:</p>\n<p><code>src/customerapi/model/Customer.java</code></p>\n<pre><code>package com.customerapi.model;\n\nimport org.springframework.data.annotation.Id;\nimport org.springframework.data.mongodb.core.mapping.Document;\n\nimport lombok.Getter;\nimport lombok.Setter;\nimport lombok.ToString;\n\n@Getter\n@Setter\n@ToString\n\n@Document(collation = &quot;customer&quot;)\npublic class Customer {\n    @Id\n    private String custRefId;\n    \n    private String title;\n\n    private String firstName;\n    \n    private String middleName;\n\n    private String lastName;\n    \n    private String businessName;\n\n    private String email;\n\n    private String phone;\n\n    private String note;\n    \n    private String dateOfBirth;\n\n    private String sex;\n    \n    \n}\n</code></pre>\n<p><code>src/customerapi/dto/CustomerResponse.java</code></p>\n<pre><code>package com.customerapi.dto;\n\nimport com.fasterxml.jackson.annotation.JsonInclude;\nimport com.fasterxml.jackson.annotation.JsonProperty;\nimport com.fasterxml.jackson.annotation.JsonInclude.Include;\n\nimport lombok.Getter;\nimport lombok.Setter;\nimport lombok.ToString;\n\n@Getter\n@Setter\n@ToString\n@JsonInclude(Include.NON_NULL)\npublic class CustomerResponse {\n    @JsonProperty(&quot;custRefId&quot;)\n    private String custRefId;\n    \n}\n</code></pre>\n<p><code>src/customerapi/repository/CustomerRepository.java</code></p>\n<pre><code>package com.customerapi.repository;\n\nimport org.springframework.data.mongodb.repository.MongoRepository;\n\nimport com.customerapi.dto.CustomerResponse;\nimport com.customerapi.model.Customer;\n\npublic interface CustomerRepository extends MongoRepository&lt;Customer, String&gt; {\n}\n</code></pre>\n<p><code>src/customerapi/resource/CustomerController.java</code></p>\n<pre><code>package com.customerapi.resource;\n\nimport static java.util.concurrent.TimeUnit.MILLISECONDS;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.MediaType;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.ResponseStatus;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport com.customerapi.repository.CustomerRepository;\nimport com.customerapi.model.Customer;\nimport com.customerapi.dto.CustomerResponse;\n\n@RestController\npublic class CustomerController {\n    \n    @Autowired\n    private CustomerRepository customerRepository;\n    \n    @PostMapping(value=&quot;/addCustomer&quot;, produces = MediaType.APPLICATION_JSON_VALUE)\n    @ResponseStatus(HttpStatus.CREATED)\n    public ResponseEntity&lt;CustomerResponse&gt; saveCustomer(@RequestBody Customer customer) {\n        \n        try {\n            return new ResponseEntity&lt;CustomerResponse&gt;(new customerRepository.save(customer), HttpStatus.CREATED);\n        }finally {\n            System.out.println(&quot;Issue with saving data in DB&quot;);\n        }\n    }\n}\n</code></pre>\n<p>Returning a <code>string</code> from <code>saveCustomer()</code> works fine. But when I'm trying to return <code>ResponseEntity&lt;CustomerResponse&gt;</code> and hit the endpoint in Postman I'm getting this error.</p>\n<p><a href=\"https://i.stack.imgur.com/M9XHu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/M9XHu.png\" alt=\"postman error\" /></a></p>\n<p>I searched online and tried multiple things from stackoverflow answers but nothing seems to be working for me.</p>\n<p>**How do I convert <code>MongoRepository</code>'s <code>save</code> response to custom class and return as JSON using <code>ResponseEntity</code>? **</p>\n"},{"tags":["java","operator-precedence"],"comments":[{"owner":{"account_id":384206,"reputation":50386,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":0,"creation_date":1634086559,"post_id":69548513,"comment_id":122930020,"body_markdown":"Only trust [the official documentation](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html), and know the difference between integer division and floating point division.","body":"Only trust <a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html\" rel=\"nofollow noreferrer\">the official documentation</a>, and know the difference between integer division and floating point division."},{"owner":{"account_id":2645973,"reputation":65777,"user_id":2288659,"accept_rate":90,"display_name":"Silvio Mayolo"},"score":4,"creation_date":1634086725,"post_id":69548513,"comment_id":122930051,"body_markdown":"What do you mean &quot;if I declare the whole expression to be a float&quot;? Changing the type of the whole expression doesn&#39;t change the computation that happens *inside* it. If you just wrote `(float)` in front of this with no parentheses, then you&#39;re only casting the `11`, not the whole expression, and then you *do* get floating-point division.","body":"What do you mean &quot;if I declare the whole expression to be a float&quot;? Changing the type of the whole expression doesn&#39;t change the computation that happens <i>inside</i> it. If you just wrote <code>(float)</code> in front of this with no parentheses, then you&#39;re only casting the <code>11</code>, not the whole expression, and then you <i>do</i> get floating-point division."},{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1634086789,"post_id":69548513,"comment_id":122930064,"body_markdown":"Everything is evaluated left to right. And everything is an **integer**. So everything is integer math. First, `11%2` is `1`. `1 * 7` is `7`. We divide `7` by something. Here precedence means we divide `7` with `5`. That results in `1`. Because we are performing integer math.","body":"Everything is evaluated left to right. And everything is an <b>integer</b>. So everything is integer math. First, <code>11%2</code> is <code>1</code>. <code>1 * 7</code> is <code>7</code>. We divide <code>7</code> by something. Here precedence means we divide <code>7</code> with <code>5</code>. That results in <code>1</code>. Because we are performing integer math."}],"answers":[{"tags":[],"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1634086990,"creation_date":1634086990,"answer_id":69548558,"question_id":69548513,"body_markdown":"If you do `(float)11%2...`  you cast the 11 as a float and end up with 11.0%2 using the floating point modulus function, which returns 1.0.  Then that 1.0 causes the multiplication to be 1.0*7 which returns 7.0  This causes us to use the floating point division which returns 1.4.\r\n\r\nIf you want 1 (integer), you need to use `(float)(11%2...)` to cast the entire result as a float","title":"Operator precedence in Java for the expression: 11%2*7/(3+2)?","body":"<p>If you do <code>(float)11%2...</code>  you cast the 11 as a float and end up with 11.0%2 using the floating point modulus function, which returns 1.0.  Then that 1.0 causes the multiplication to be 1.0*7 which returns 7.0  This causes us to use the floating point division which returns 1.4.</p>\n<p>If you want 1 (integer), you need to use <code>(float)(11%2...)</code> to cast the entire result as a float</p>\n"},{"tags":[],"owner":{"account_id":22425724,"reputation":1060,"user_id":16632363,"display_name":"user16632363"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634088137,"creation_date":1634088137,"answer_id":69548660,"question_id":69548513,"body_markdown":"&gt;So, which is the right answer 1 or 1.4?\r\n\r\nBoth of them.  The two cases you cite are **different expressions**.  \r\n\r\nAs a programmer, you write the expression you need.\r\n\r\n","title":"Operator precedence in Java for the expression: 11%2*7/(3+2)?","body":"<blockquote>\n<p>So, which is the right answer 1 or 1.4?</p>\n</blockquote>\n<p>Both of them.  The two cases you cite are <strong>different expressions</strong>.</p>\n<p>As a programmer, you write the expression you need.</p>\n"}],"owner":{"account_id":5327838,"reputation":1,"user_id":4249356,"display_name":"pratyaksh sudan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":125,"favorite_count":0,"down_vote_count":4,"up_vote_count":0,"closed_date":1634092392,"accepted_answer_id":69548558,"answer_count":2,"score":-4,"last_activity_date":1634088137,"creation_date":1634086450,"question_id":69548513,"body_markdown":"As per my understanding the operator precedence for the above expression should turn out to be 1 as per PEDMAS \r\nbut If I declare the whole expression to be a float then the answer is 1.4.\r\n\r\nSo, which is the right answer 1 or 1.4?\r\n```\r\n11%2*7/(3+2)? \r\n\r\n 1. (3+2) = 5\r\n 2. 11%2 = 1\r\n 3. Putting all together = 1*7/5 = 1 ans\r\n```","title":"Operator precedence in Java for the expression: 11%2*7/(3+2)?","body":"<p>As per my understanding the operator precedence for the above expression should turn out to be 1 as per PEDMAS\nbut If I declare the whole expression to be a float then the answer is 1.4.</p>\n<p>So, which is the right answer 1 or 1.4?</p>\n<pre><code>11%2*7/(3+2)? \n\n 1. (3+2) = 5\n 2. 11%2 = 1\n 3. Putting all together = 1*7/5 = 1 ans\n</code></pre>\n"},{"tags":["java","linux"],"comments":[{"owner":{"account_id":22425724,"reputation":1060,"user_id":16632363,"display_name":"user16632363"},"score":1,"creation_date":1634088563,"post_id":69548406,"comment_id":122930365,"body_markdown":"It&#39;s not an [Exception](https://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html), it&#39;s an [Error](https://docs.oracle.com/javase/7/docs/api/java/lang/Error.html).  Catching an error is generally not a good idea, though can be useful in certain circumstances if carefully done.","body":"It&#39;s not an <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html\" rel=\"nofollow noreferrer\">Exception</a>, it&#39;s an <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Error.html\" rel=\"nofollow noreferrer\">Error</a>.  Catching an error is generally not a good idea, though can be useful in certain circumstances if carefully done."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1634090309,"post_id":69548406,"comment_id":122930637,"body_markdown":"You don&#39;t catch the exception, or do similar in your application because there is no way to trigger the dump creation from application code in the JVM.  Instead you set JVM options on the command line.  The real answer is in the duplink (that you found!).","body":"You don&#39;t catch the exception, or do similar in your application because there is no way to trigger the dump creation from application code in the JVM.  Instead you set JVM options on the command line.  The real answer is in the duplink (that you found!)."},{"owner":{"account_id":12119886,"reputation":366,"user_id":8851882,"display_name":"Vinto"},"score":0,"creation_date":1638867725,"post_id":69548406,"comment_id":124195625,"body_markdown":"This question is not answered in https://stackoverflow.com/questions/2787976/how-to-generate-thread-dump-java-on-out-of-memory-error?rq=1.\nWhile the OOM is related to Direct buffer memory, VM flags are not catching it.\nI have checked it in JDK 11","body":"This question is not answered in <a href=\"https://stackoverflow.com/questions/2787976/how-to-generate-thread-dump-java-on-out-of-memory-error?rq=1\" title=\"how to generate thread dump java on out of memory error\">stackoverflow.com/questions/2787976/&hellip;</a>. While the OOM is related to Direct buffer memory, VM flags are not catching it. I have checked it in JDK 11"}],"answers":[{"tags":[],"owner":{"account_id":23016848,"reputation":11,"user_id":17138466,"display_name":"mandingoteck"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634088097,"creation_date":1634088097,"answer_id":69548655,"question_id":69548406,"body_markdown":"Actually, I found answer to detecting direct memory out of memory exception at :\r\nhttps://stackoverflow.com/questions/2787976/how-to-generate-thread-dump-java-on-out-of-memory-error?rq=1\r\n","title":"How to programmatically detect java.lang.OutOfMemoryError: Direct buffer memory to create a java heap dump?","body":"<p>Actually, I found answer to detecting direct memory out of memory exception at :\n<a href=\"https://stackoverflow.com/questions/2787976/how-to-generate-thread-dump-java-on-out-of-memory-error?rq=1\">how to generate thread dump java on out of memory error</a></p>\n"}],"owner":{"account_id":23016848,"reputation":11,"user_id":17138466,"display_name":"mandingoteck"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":281,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1634090187,"answer_count":1,"score":1,"last_activity_date":1634088097,"creation_date":1634085375,"question_id":69548406,"body_markdown":"From the linux journal file, the &quot;java.lang.OutOfMemoryError: Direct buffer memory&quot; exception was logged. How do I catch the exception, so that I can create a heap dump of my java process? I will also need to know how I can restart the java program when exception occurs. However, I will post another question for that. By the way, the Java tool option, &quot; -XX:+HeapDumpOnOutOfMemoryError&quot;, does not create a heap dump on direct memory exceptions.\r\n\r\n&lt;pre&gt;\r\nSep 20 23:02:55 CKM01204505062-A control-path[128819]: 2021-09-20 23:02:55.266 [] [INFO] [com.emc.bedrock.http.HttpVerticle|vert.x-eventloop-thread-3]  Request ID: 2c7633a4-db9c-4ec5-b4ca-c93c47512384 completed in 4 ms.\r\nSep 20 23:02:55 CKM01204505062-A control-path[128199]: Exception in thread &quot;iothread-2&quot; java.lang.OutOfMemoryError: Direct buffer memory\r\nSep 20 23:02:55 CKM01204505062-A control-path[128199]:         at java.nio.Bits.reserveMemory(Bits.java:695)\r\nSep 20 23:02:55 CKM01204505062-A control-path[128199]:         at java.nio.DirectByteBuffer.&lt;init&gt;(DirectByteBuffer.java:123)\r\nSep 20 23:02:55 CKM01204505062-A control-path[128199]:         at java.nio.ByteBuffer.allocateDirect(ByteBuffer.java:311)\r\nSep 20 23:02:55 CKM01204505062-A control-path[128199]:         at zmq.DecoderBase.&lt;init&gt;(DecoderBase.java:35)\r\nSep 20 23:02:55 CKM01204505062-A control-path[128199]:         at zmq.V1Decoder.&lt;init&gt;(V1Decoder.java:21)\r\nSep 20 23:02:55 CKM01204505062-A control-path[128199]:         at zmq.StreamEngine.newDecoder(StreamEngine.java:102)\r\nSep 20 23:02:55 CKM01204505062-A control-path[128199]:         at zmq.StreamEngine.handshake(StreamEngine.java:549)\r\nSep 20 23:02:55 CKM01204505062-A control-path[128199]:         at zmq.StreamEngine.inEvent(StreamEngine.java:278)\r\nSep 20 23:02:55 CKM01204505062-A control-path[128199]:         at zmq.IOObject.inEvent(IOObject.java:86)\r\nSep 20 23:02:55 CKM01204505062-A control-path[128199]:         at zmq.Poller.run(Poller.java:228)\r\nSep 20 23:02:55 CKM01204505062-A control-path[128199]:         at java.lang.Thread.run(Thread.java:748)\r\n&lt;/pre&gt;","title":"How to programmatically detect java.lang.OutOfMemoryError: Direct buffer memory to create a java heap dump?","body":"<p>From the linux journal file, the &quot;java.lang.OutOfMemoryError: Direct buffer memory&quot; exception was logged. How do I catch the exception, so that I can create a heap dump of my java process? I will also need to know how I can restart the java program when exception occurs. However, I will post another question for that. By the way, the Java tool option, &quot; -XX:+HeapDumpOnOutOfMemoryError&quot;, does not create a heap dump on direct memory exceptions.</p>\n<pre>\nSep 20 23:02:55 CKM01204505062-A control-path[128819]: 2021-09-20 23:02:55.266 [] [INFO] [com.emc.bedrock.http.HttpVerticle|vert.x-eventloop-thread-3]  Request ID: 2c7633a4-db9c-4ec5-b4ca-c93c47512384 completed in 4 ms.\nSep 20 23:02:55 CKM01204505062-A control-path[128199]: Exception in thread \"iothread-2\" java.lang.OutOfMemoryError: Direct buffer memory\nSep 20 23:02:55 CKM01204505062-A control-path[128199]:         at java.nio.Bits.reserveMemory(Bits.java:695)\nSep 20 23:02:55 CKM01204505062-A control-path[128199]:         at java.nio.DirectByteBuffer.(DirectByteBuffer.java:123)\nSep 20 23:02:55 CKM01204505062-A control-path[128199]:         at java.nio.ByteBuffer.allocateDirect(ByteBuffer.java:311)\nSep 20 23:02:55 CKM01204505062-A control-path[128199]:         at zmq.DecoderBase.(DecoderBase.java:35)\nSep 20 23:02:55 CKM01204505062-A control-path[128199]:         at zmq.V1Decoder.(V1Decoder.java:21)\nSep 20 23:02:55 CKM01204505062-A control-path[128199]:         at zmq.StreamEngine.newDecoder(StreamEngine.java:102)\nSep 20 23:02:55 CKM01204505062-A control-path[128199]:         at zmq.StreamEngine.handshake(StreamEngine.java:549)\nSep 20 23:02:55 CKM01204505062-A control-path[128199]:         at zmq.StreamEngine.inEvent(StreamEngine.java:278)\nSep 20 23:02:55 CKM01204505062-A control-path[128199]:         at zmq.IOObject.inEvent(IOObject.java:86)\nSep 20 23:02:55 CKM01204505062-A control-path[128199]:         at zmq.Poller.run(Poller.java:228)\nSep 20 23:02:55 CKM01204505062-A control-path[128199]:         at java.lang.Thread.run(Thread.java:748)\n</pre>\n"},{"tags":["java","algorithm","java-stream","big-o","coding-efficiency"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1634109708,"post_id":69546951,"comment_id":122934642,"body_markdown":"If you care for performance, [dont use `LinkedList`](https://stackoverflow.com/q/322715/2711488), in almost every case, either of `ArrayDeque` or `ArrayList` will do better. Further, dont use `StringBuffer` where `StringBuilder` is sufficient and dont use `Integer` objects where a plain `int` does the job. All these points may not affect the time complexity (big O notation), but still have significant effects.","body":"If you care for performance, <a href=\"https://stackoverflow.com/q/322715/2711488\">dont use <code>LinkedList</code></a>, in almost every case, either of <code>ArrayDeque</code> or <code>ArrayList</code> will do better. Further, dont use <code>StringBuffer</code> where <code>StringBuilder</code> is sufficient and dont use <code>Integer</code> objects where a plain <code>int</code> does the job. All these points may not affect the time complexity (big O notation), but still have significant effects."}],"answers":[{"tags":[],"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1634087772,"creation_date":1634087772,"answer_id":69548622,"question_id":69546951,"body_markdown":"For loops, the big O notation time is basically count the iterations.  If you loop over an array, it&#39;s O(n) (n is the size of the list).  If you have a loop inside a loop, its O(outer loop count * inner loop count).  So the first algorithm is O(n) where n is the size of the array.\r\n\r\nAlso-  what are you doing with \r\n\r\n    result.add(Character.getNumericValue(partialResult.toString().charAt(1)));\r\n    carry = 1;\r\n\r\nHere&#39;s a much easier way to do it:\r\n\r\n       result.add(partialResult%10);\r\n       carry = partialResult/10;\r\n\r\nThis way also works with the exact same code if you&#39;re adding 3 or more arrays.\r\n\r\nYour second one has a major flaw-  it won&#39;t work for numbers that add up to over 2^32 (or 4 billionish).  The first will.  Ignoring that, it is an O(n) operation to do the map, then an O(n) operation to join them, then an O(n) operation to reverse it.  So it&#39;s O(3n), which is the same as O(n). \r\n\r\nThat means complexity wise, they&#39;re the same.  Timewise-  the first algorithm will blow the second away, because the operation you&#39;re doing n times is so much more efficient, especially if you get rid of the needless string usage and use the code I showed you.  Complexity is an approximation of time for comparison sake, but its not a direct correlation.  It can only be used to compare algorithms with different classes (say O(n) vs O(n^2)) and is only valid at large n.","title":"Most efficient algorithm and BigO notation","body":"<p>For loops, the big O notation time is basically count the iterations.  If you loop over an array, it's O(n) (n is the size of the list).  If you have a loop inside a loop, its O(outer loop count * inner loop count).  So the first algorithm is O(n) where n is the size of the array.</p>\n<p>Also-  what are you doing with</p>\n<pre><code>result.add(Character.getNumericValue(partialResult.toString().charAt(1)));\ncarry = 1;\n</code></pre>\n<p>Here's a much easier way to do it:</p>\n<pre><code>   result.add(partialResult%10);\n   carry = partialResult/10;\n</code></pre>\n<p>This way also works with the exact same code if you're adding 3 or more arrays.</p>\n<p>Your second one has a major flaw-  it won't work for numbers that add up to over 2^32 (or 4 billionish).  The first will.  Ignoring that, it is an O(n) operation to do the map, then an O(n) operation to join them, then an O(n) operation to reverse it.  So it's O(3n), which is the same as O(n).</p>\n<p>That means complexity wise, they're the same.  Timewise-  the first algorithm will blow the second away, because the operation you're doing n times is so much more efficient, especially if you get rid of the needless string usage and use the code I showed you.  Complexity is an approximation of time for comparison sake, but its not a direct correlation.  It can only be used to compare algorithms with different classes (say O(n) vs O(n^2)) and is only valid at large n.</p>\n"}],"owner":{"account_id":4460208,"reputation":3797,"user_id":3629330,"accept_rate":88,"display_name":"fgonzalez"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":180,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69548622,"answer_count":1,"score":0,"last_activity_date":1634087772,"creation_date":1634072309,"question_id":69546951,"body_markdown":"I am practicing some coding algorithms. In some interviews they don&#39;t only ask you to solve a problem, but to solve it in the most efficient way, and also specify the efficiency of the algorithm (aka Big O notation). I&#39;ve always had issues measuring that efficiency, so I would really appreciate someone explaining how to calculate the efficiency of the algorithmor to point to some resources in order to check it (did not find very useful docs so far).\r\n\r\n\r\nFor example, take a look to this problem below. I have solved it in two different ways. using Java. The first way is using an imperative approach (which I find it more efficient as we don&#39;t need to iterate over the lists many times) and the second approach, with functional programming approach and stream API (that I find much less efficient in this case).\r\n\r\n\r\nCould someone tell me with an explanation what is the Big O notation of both approaches, explaining the way to calculate it?\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n        package exercises;\r\n    \r\n    import org.junit.Assert;\r\n    import org.junit.Test;\r\n    \r\n    import java.util.*;\r\n    import java.util.stream.Collectors;\r\n    \r\n    \r\n    /**\r\n     * You are given two non-empty linked lists representing two non-negative integers. The digits are stored in reverse order, and each of their nodes contains a single digit. Add the two numbers and return the sum as a linked list.\r\n     *\r\n     * You may assume the two numbers do not contain any leading zero, except the number 0 itself.\r\n     */\r\n    public class AddTwoNumbers {\r\n    \r\n        //Most efficient implemention of the two\r\n        private List&lt;Integer&gt; addTwoNumbersImplementation1(LinkedList&lt;Integer&gt; l1, LinkedList&lt;Integer&gt; l2) {\r\n    \r\n            Integer carry = 0;\r\n            List&lt;Integer&gt; result = new ArrayList&lt;Integer&gt;();\r\n            while (l1.size() &gt; 0 || l2.size() &gt; 0) {\r\n    \r\n                Integer l1Last = Optional.ofNullable(l1.pollLast()).orElse(0);\r\n                Integer l2Last = Optional.ofNullable(l2.pollLast()).orElse(0);\r\n    \r\n                Integer partialResult = l1Last + l2Last + carry;\r\n    \r\n                if (partialResult &gt;= 10) {\r\n                    result.add(Character.getNumericValue(partialResult.toString().charAt(1)));\r\n                    carry = 1;\r\n                } else {\r\n                    result.add(partialResult);\r\n                    carry = 0;\r\n                }\r\n            }\r\n    \r\n            if(carry == 1) {result.add(1);}\r\n    \r\n            return result;\r\n        }\r\n    \r\n    \r\n        //Least efficient implemention of the two\r\n        private List&lt;Integer&gt; addTwoNumbersImplementation2(LinkedList&lt;Integer&gt; l1, LinkedList&lt;Integer&gt; l2) {\r\n            Integer n1 = Integer.parseInt(new StringBuffer(l1.stream().map(e -&gt; e.toString()).collect(Collectors.joining())).reverse().toString());\r\n            Integer n2 = Integer.parseInt(new StringBuffer(l2.stream().map(e -&gt; e.toString()).collect(Collectors.joining())).reverse().toString());\r\n            Integer result = n1 + n2;\r\n            return new StringBuffer(result.toString()).reverse().toString().chars().mapToObj(Character::getNumericValue).collect(Collectors.toList());\r\n        }\r\n    \r\n    \r\n        @Test\r\n        public void test() {\r\n            LinkedList&lt;Integer&gt; list1 = new LinkedList&lt;&gt;();\r\n            list1.addAll(Arrays.asList(2,4,3));\r\n            LinkedList&lt;Integer&gt; list2 = new LinkedList&lt;&gt;();\r\n            list2.addAll(Arrays.asList(5,6,4));\r\n            List&lt;Integer&gt; resultList = new LinkedList&lt;&gt;();\r\n            resultList.addAll(Arrays.asList(7,0,8));\r\n            Assert.assertEquals(resultList, addTwoNumbersImplementation1(list1, list2));\r\n        }\r\n    \r\n        @Test\r\n        public void test2() {\r\n            LinkedList&lt;Integer&gt; list1 = new LinkedList&lt;&gt;();\r\n            list1.add(0);\r\n            LinkedList&lt;Integer&gt; list2 = new LinkedList&lt;&gt;();\r\n            list2.add(0);\r\n            List&lt;Integer&gt; resultList = new LinkedList&lt;&gt;();\r\n            resultList.add(0);\r\n            Assert.assertEquals(resultList, addTwoNumbersImplementation1(list1, list2));\r\n        }\r\n    \r\n        @Test\r\n        public void test3() {\r\n            LinkedList&lt;Integer&gt; list1 = new LinkedList&lt;&gt;();\r\n            list1.addAll(Arrays.asList(9,9,9,9,9,9,9));\r\n            LinkedList&lt;Integer&gt; list2 = new LinkedList&lt;&gt;();\r\n            list2.addAll(Arrays.asList(9,9,9,9));\r\n            List&lt;Integer&gt; expected = new LinkedList&lt;&gt;();\r\n            expected.addAll(Arrays.asList(8,9,9,9,0,0,0,1));\r\n            Assert.assertEquals(expected, addTwoNumbersImplementation1(list1, list2));\r\n        }\r\n    \r\n    \r\n        @Test\r\n        public void test4() {\r\n            LinkedList&lt;Integer&gt; list1 = new LinkedList&lt;&gt;();\r\n            list1.addAll(Arrays.asList(2,4,3));\r\n            LinkedList&lt;Integer&gt; list2 = new LinkedList&lt;&gt;();\r\n            list2.addAll(Arrays.asList(5,6,4));\r\n            List&lt;Integer&gt; resultList = new LinkedList&lt;&gt;();\r\n            resultList.addAll(Arrays.asList(7,0,8));\r\n            Assert.assertEquals(resultList, addTwoNumbersImplementation2(list1, list2));\r\n        }\r\n    \r\n        @Test\r\n        public void test5() {\r\n            LinkedList&lt;Integer&gt; list1 = new LinkedList&lt;&gt;();\r\n            list1.add(0);\r\n            LinkedList&lt;Integer&gt; list2 = new LinkedList&lt;&gt;();\r\n            list2.add(0);\r\n            List&lt;Integer&gt; resultList = new LinkedList&lt;&gt;();\r\n            resultList.add(0);\r\n            Assert.assertEquals(resultList, addTwoNumbersImplementation2(list1, list2));\r\n        }\r\n    \r\n        @Test\r\n        public void test6() {\r\n            LinkedList&lt;Integer&gt; list1 = new LinkedList&lt;&gt;();\r\n            list1.addAll(Arrays.asList(9,9,9,9,9,9,9));\r\n            LinkedList&lt;Integer&gt; list2 = new LinkedList&lt;&gt;();\r\n            list2.addAll(Arrays.asList(9,9,9,9));\r\n            List&lt;Integer&gt; expected = new LinkedList&lt;&gt;();\r\n            expected.addAll(Arrays.asList(8,9,9,9,0,0,0,1));\r\n            Assert.assertEquals(expected, addTwoNumbersImplementation2(list1, list2));\r\n        }\r\n    }\r\n\r\n  \r\n","title":"Most efficient algorithm and BigO notation","body":"<p>I am practicing some coding algorithms. In some interviews they don't only ask you to solve a problem, but to solve it in the most efficient way, and also specify the efficiency of the algorithm (aka Big O notation). I've always had issues measuring that efficiency, so I would really appreciate someone explaining how to calculate the efficiency of the algorithmor to point to some resources in order to check it (did not find very useful docs so far).</p>\n<p>For example, take a look to this problem below. I have solved it in two different ways. using Java. The first way is using an imperative approach (which I find it more efficient as we don't need to iterate over the lists many times) and the second approach, with functional programming approach and stream API (that I find much less efficient in this case).</p>\n<p>Could someone tell me with an explanation what is the Big O notation of both approaches, explaining the way to calculate it?</p>\n<pre><code>    package exercises;\n\nimport org.junit.Assert;\nimport org.junit.Test;\n\nimport java.util.*;\nimport java.util.stream.Collectors;\n\n\n/**\n * You are given two non-empty linked lists representing two non-negative integers. The digits are stored in reverse order, and each of their nodes contains a single digit. Add the two numbers and return the sum as a linked list.\n *\n * You may assume the two numbers do not contain any leading zero, except the number 0 itself.\n */\npublic class AddTwoNumbers {\n\n    //Most efficient implemention of the two\n    private List&lt;Integer&gt; addTwoNumbersImplementation1(LinkedList&lt;Integer&gt; l1, LinkedList&lt;Integer&gt; l2) {\n\n        Integer carry = 0;\n        List&lt;Integer&gt; result = new ArrayList&lt;Integer&gt;();\n        while (l1.size() &gt; 0 || l2.size() &gt; 0) {\n\n            Integer l1Last = Optional.ofNullable(l1.pollLast()).orElse(0);\n            Integer l2Last = Optional.ofNullable(l2.pollLast()).orElse(0);\n\n            Integer partialResult = l1Last + l2Last + carry;\n\n            if (partialResult &gt;= 10) {\n                result.add(Character.getNumericValue(partialResult.toString().charAt(1)));\n                carry = 1;\n            } else {\n                result.add(partialResult);\n                carry = 0;\n            }\n        }\n\n        if(carry == 1) {result.add(1);}\n\n        return result;\n    }\n\n\n    //Least efficient implemention of the two\n    private List&lt;Integer&gt; addTwoNumbersImplementation2(LinkedList&lt;Integer&gt; l1, LinkedList&lt;Integer&gt; l2) {\n        Integer n1 = Integer.parseInt(new StringBuffer(l1.stream().map(e -&gt; e.toString()).collect(Collectors.joining())).reverse().toString());\n        Integer n2 = Integer.parseInt(new StringBuffer(l2.stream().map(e -&gt; e.toString()).collect(Collectors.joining())).reverse().toString());\n        Integer result = n1 + n2;\n        return new StringBuffer(result.toString()).reverse().toString().chars().mapToObj(Character::getNumericValue).collect(Collectors.toList());\n    }\n\n\n    @Test\n    public void test() {\n        LinkedList&lt;Integer&gt; list1 = new LinkedList&lt;&gt;();\n        list1.addAll(Arrays.asList(2,4,3));\n        LinkedList&lt;Integer&gt; list2 = new LinkedList&lt;&gt;();\n        list2.addAll(Arrays.asList(5,6,4));\n        List&lt;Integer&gt; resultList = new LinkedList&lt;&gt;();\n        resultList.addAll(Arrays.asList(7,0,8));\n        Assert.assertEquals(resultList, addTwoNumbersImplementation1(list1, list2));\n    }\n\n    @Test\n    public void test2() {\n        LinkedList&lt;Integer&gt; list1 = new LinkedList&lt;&gt;();\n        list1.add(0);\n        LinkedList&lt;Integer&gt; list2 = new LinkedList&lt;&gt;();\n        list2.add(0);\n        List&lt;Integer&gt; resultList = new LinkedList&lt;&gt;();\n        resultList.add(0);\n        Assert.assertEquals(resultList, addTwoNumbersImplementation1(list1, list2));\n    }\n\n    @Test\n    public void test3() {\n        LinkedList&lt;Integer&gt; list1 = new LinkedList&lt;&gt;();\n        list1.addAll(Arrays.asList(9,9,9,9,9,9,9));\n        LinkedList&lt;Integer&gt; list2 = new LinkedList&lt;&gt;();\n        list2.addAll(Arrays.asList(9,9,9,9));\n        List&lt;Integer&gt; expected = new LinkedList&lt;&gt;();\n        expected.addAll(Arrays.asList(8,9,9,9,0,0,0,1));\n        Assert.assertEquals(expected, addTwoNumbersImplementation1(list1, list2));\n    }\n\n\n    @Test\n    public void test4() {\n        LinkedList&lt;Integer&gt; list1 = new LinkedList&lt;&gt;();\n        list1.addAll(Arrays.asList(2,4,3));\n        LinkedList&lt;Integer&gt; list2 = new LinkedList&lt;&gt;();\n        list2.addAll(Arrays.asList(5,6,4));\n        List&lt;Integer&gt; resultList = new LinkedList&lt;&gt;();\n        resultList.addAll(Arrays.asList(7,0,8));\n        Assert.assertEquals(resultList, addTwoNumbersImplementation2(list1, list2));\n    }\n\n    @Test\n    public void test5() {\n        LinkedList&lt;Integer&gt; list1 = new LinkedList&lt;&gt;();\n        list1.add(0);\n        LinkedList&lt;Integer&gt; list2 = new LinkedList&lt;&gt;();\n        list2.add(0);\n        List&lt;Integer&gt; resultList = new LinkedList&lt;&gt;();\n        resultList.add(0);\n        Assert.assertEquals(resultList, addTwoNumbersImplementation2(list1, list2));\n    }\n\n    @Test\n    public void test6() {\n        LinkedList&lt;Integer&gt; list1 = new LinkedList&lt;&gt;();\n        list1.addAll(Arrays.asList(9,9,9,9,9,9,9));\n        LinkedList&lt;Integer&gt; list2 = new LinkedList&lt;&gt;();\n        list2.addAll(Arrays.asList(9,9,9,9));\n        List&lt;Integer&gt; expected = new LinkedList&lt;&gt;();\n        expected.addAll(Arrays.asList(8,9,9,9,0,0,0,1));\n        Assert.assertEquals(expected, addTwoNumbersImplementation2(list1, list2));\n    }\n}\n</code></pre>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":16384867,"reputation":249,"user_id":11835023,"display_name":"shrimpcolo"},"score":0,"creation_date":1634094736,"post_id":69548530,"comment_id":122931348,"body_markdown":"If you use ViewModel, try this approach: share one ViewModel between the two Activities.","body":"If you use ViewModel, try this approach: share one ViewModel between the two Activities."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1634219699,"post_id":69548530,"comment_id":122970910,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":7608227,"reputation":700,"user_id":5770116,"display_name":"JonR85"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634087592,"creation_date":1634087592,"answer_id":69548608,"question_id":69548530,"body_markdown":"Sounds like you need to save the value of the spinner. Than in your other activity, load the saved value.","title":"Access Spinner in another activity","body":"<p>Sounds like you need to save the value of the spinner. Than in your other activity, load the saved value.</p>\n"}],"owner":{"account_id":22534471,"reputation":13,"user_id":16725996,"display_name":"Nishant0823"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1634087592,"creation_date":1634086671,"question_id":69548530,"body_markdown":"what is a good way to approach accessing spinner in another activity?\r\nI have two dependent spinners , one is a bus route and another is bus stops within those routes. I want to access the list(spinner) of bus stops associated with the selected route in another activity. ","title":"Access Spinner in another activity","body":"<p>what is a good way to approach accessing spinner in another activity?\nI have two dependent spinners , one is a bus route and another is bus stops within those routes. I want to access the list(spinner) of bus stops associated with the selected route in another activity.</p>\n"},{"tags":["java","spring-boot","mockito"],"answers":[{"tags":[],"owner":{"account_id":18586978,"reputation":2220,"user_id":15000097,"display_name":"Georgii Lvov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1629822228,"creation_date":1629822228,"answer_id":68910861,"question_id":68908992,"body_markdown":"You create an `OriginFilter` object using the `new` operator, and since this is not done by spring, `CustomJdbcTokenStore` should be injected into `OriginFilter` manually:\r\n\r\n    @RunWith(MockitoJUnitRunner.class)\r\n    public class OFilterTest {\r\n    \r\n    @InjectMocks\r\n    OriginFilter filter;\r\n\r\n    @Mock\r\n    CustomJdbcTokenStore tokenStore;\r\n    \r\n\r\n    @Test\r\n    public void \r\n    CheckIfFilterPreventsDifferentOriginAccess() throws IOException, ServletException, ParseException {\r\n        Assert.assertNotNull(tokenStore);\r\n        \r\n        MockHttpServletRequest mockRequest = new MockHttpServletRequest();\r\n    \r\n        MockHttpServletResponse mockResponse = new MockHttpServletResponse();\r\n    \r\n        FilterChain mockFilterChain = Mockito.mock(FilterChain.class);\r\n    \r\n        when(tokenStore.verifyUserAgentAndHostname(any(),any(),any())).thenReturn(true);\r\n    \r\n        filter.doFilterInternal(mockRequest, mockResponse, mockFilterChain);\r\n        filter.destroy();\r\n    \r\n    }\r\nAlso you don&#39;t need `MockitoAnnotations.initMocks(this)` since you use `@RunWith(MockitoJUnitRunner.class)`\r\n","title":"Mocked Class specified with Mockito is null when called in OncePerRequestFilterTest","body":"<p>You create an <code>OriginFilter</code> object using the <code>new</code> operator, and since this is not done by spring, <code>CustomJdbcTokenStore</code> should be injected into <code>OriginFilter</code> manually:</p>\n<pre><code>@RunWith(MockitoJUnitRunner.class)\npublic class OFilterTest {\n\n@InjectMocks\nOriginFilter filter;\n\n@Mock\nCustomJdbcTokenStore tokenStore;\n\n\n@Test\npublic void \nCheckIfFilterPreventsDifferentOriginAccess() throws IOException, ServletException, ParseException {\n    Assert.assertNotNull(tokenStore);\n    \n    MockHttpServletRequest mockRequest = new MockHttpServletRequest();\n\n    MockHttpServletResponse mockResponse = new MockHttpServletResponse();\n\n    FilterChain mockFilterChain = Mockito.mock(FilterChain.class);\n\n    when(tokenStore.verifyUserAgentAndHostname(any(),any(),any())).thenReturn(true);\n\n    filter.doFilterInternal(mockRequest, mockResponse, mockFilterChain);\n    filter.destroy();\n\n}\n</code></pre>\n<p>Also you don't need <code>MockitoAnnotations.initMocks(this)</code> since you use <code>@RunWith(MockitoJUnitRunner.class)</code></p>\n"}],"owner":{"account_id":5635704,"reputation":3288,"user_id":4461271,"accept_rate":0,"display_name":"midi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":316,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":68910861,"answer_count":1,"score":0,"last_activity_date":1634087316,"creation_date":1629814906,"question_id":68908992,"body_markdown":"I have the following Filter:\r\n\r\n    @Component\r\n    public class OriginFilter extends OncePerRequestFilter {\r\n\r\n    @Autowired\r\n    private CustomJdbcTokenStore tokenStore;\r\n\r\n    @Override\r\n    protected void doFilterInternal(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, FilterChain filterChain)\r\n            throws ServletException, IOException {\r\n        final String requestTokenHeader = httpServletRequest.getHeader(&quot;Authorization&quot;);\r\n        \r\n        if (requestTokenHeader != null) {\r\n\r\n            if(tokenStore.verifyUserAgentAndHostname(requestTokenHeader.substring(7), httpServletRequest.getHeader(&quot;User-Agent&quot;), httpServletRequest.getRemoteAddr())){\r\n                filterChain.doFilter(httpServletRequest, httpServletResponse);\r\n            }else {\r\n                httpServletResponse.setStatus(HttpServletResponse.SC_UNAUTHORIZED);\r\n            }\r\n        } else {\r\n            logger.warn(&quot;Token is null&quot;);\r\n    }\r\n    }\r\n\r\nI have the following Test:\r\n\r\nBut in there the mocked tokenStore is always Null, seems its taking it from the Instance in the Class itself but not the one specified with Mockito.\r\n\r\n    @RunWith(MockitoJUnitRunner.class)\r\n    public class OFilterTest {\r\n\r\n    @Mock\r\n    CustomJdbcTokenStore tokenStore;\r\n\r\n    @Before\r\n    public void setUp() {\r\n        MockitoAnnotations.initMocks(this);\r\n    }\r\n\r\n    @Test\r\n    public void \r\n    CheckIfFilterPreventsDifferentOriginAccess() throws IOException, ServletException, ParseException {\r\n        Assert.assertNotNull(tokenStore);\r\n        OriginFilter filter = new OriginFilter();\r\n        MockHttpServletRequest mockRequest = new MockHttpServletRequest();\r\n\r\n        MockHttpServletResponse mockResponse = new MockHttpServletResponse();\r\n\r\n        FilterChain mockFilterChain = Mockito.mock(FilterChain.class);\r\n \r\n        when(tokenStore.verifyUserAgentAndHostname(any(),any(),any())).thenReturn(true);\r\n\r\n        filter.doFilterInternal(mockRequest, mockResponse, mockFilterChain);\r\n        filter.destroy();\r\n\r\n    }\r\n    }\r\n\r\nWhat am I doing wrong here?\r\n","title":"Mocked Class specified with Mockito is null when called in OncePerRequestFilterTest","body":"<p>I have the following Filter:</p>\n<pre><code>@Component\npublic class OriginFilter extends OncePerRequestFilter {\n\n@Autowired\nprivate CustomJdbcTokenStore tokenStore;\n\n@Override\nprotected void doFilterInternal(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, FilterChain filterChain)\n        throws ServletException, IOException {\n    final String requestTokenHeader = httpServletRequest.getHeader(&quot;Authorization&quot;);\n    \n    if (requestTokenHeader != null) {\n\n        if(tokenStore.verifyUserAgentAndHostname(requestTokenHeader.substring(7), httpServletRequest.getHeader(&quot;User-Agent&quot;), httpServletRequest.getRemoteAddr())){\n            filterChain.doFilter(httpServletRequest, httpServletResponse);\n        }else {\n            httpServletResponse.setStatus(HttpServletResponse.SC_UNAUTHORIZED);\n        }\n    } else {\n        logger.warn(&quot;Token is null&quot;);\n}\n}\n</code></pre>\n<p>I have the following Test:</p>\n<p>But in there the mocked tokenStore is always Null, seems its taking it from the Instance in the Class itself but not the one specified with Mockito.</p>\n<pre><code>@RunWith(MockitoJUnitRunner.class)\npublic class OFilterTest {\n\n@Mock\nCustomJdbcTokenStore tokenStore;\n\n@Before\npublic void setUp() {\n    MockitoAnnotations.initMocks(this);\n}\n\n@Test\npublic void \nCheckIfFilterPreventsDifferentOriginAccess() throws IOException, ServletException, ParseException {\n    Assert.assertNotNull(tokenStore);\n    OriginFilter filter = new OriginFilter();\n    MockHttpServletRequest mockRequest = new MockHttpServletRequest();\n\n    MockHttpServletResponse mockResponse = new MockHttpServletResponse();\n\n    FilterChain mockFilterChain = Mockito.mock(FilterChain.class);\n\n    when(tokenStore.verifyUserAgentAndHostname(any(),any(),any())).thenReturn(true);\n\n    filter.doFilterInternal(mockRequest, mockResponse, mockFilterChain);\n    filter.destroy();\n\n}\n}\n</code></pre>\n<p>What am I doing wrong here?</p>\n"},{"tags":["javascript","java"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1634087079,"post_id":69548541,"comment_id":122930111,"body_markdown":"you need to use `multipart/form-data`","body":"you need to use <code>multipart&#47;form-data</code>"},{"owner":{"account_id":21008825,"reputation":21,"user_id":16960272,"display_name":"AtikiniAmal"},"score":0,"creation_date":1634087152,"post_id":69548541,"comment_id":122930121,"body_markdown":"tries, but then it changes the request format,","body":"tries, but then it changes the request format,"},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1634087198,"post_id":69548541,"comment_id":122930131,"body_markdown":"Have a look at https://stackoverflow.com/questions/10899384/uploading-both-data-and-files-in-one-form-using-ajax","body":"Have a look at <a href=\"https://stackoverflow.com/questions/10899384/uploading-both-data-and-files-in-one-form-using-ajax\" title=\"uploading both data and files in one form using ajax\">stackoverflow.com/questions/10899384/&hellip;</a>"},{"owner":{"account_id":21008825,"reputation":21,"user_id":16960272,"display_name":"AtikiniAmal"},"score":0,"creation_date":1634087409,"post_id":69548541,"comment_id":122930172,"body_markdown":"great, thanks, will try it out, and since looks like it is duplicate to that, will delet this one","body":"great, thanks, will try it out, and since looks like it is duplicate to that, will delet this one"},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1634087493,"post_id":69548541,"comment_id":122930186,"body_markdown":"Yes a duplicate - see the accepted answer (it is a multipart/form-data form)","body":"Yes a duplicate - see the accepted answer (it is a multipart/form-data form)"}],"owner":{"account_id":21008825,"reputation":21,"user_id":16960272,"display_name":"AtikiniAmal"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1634088024,"answer_count":0,"score":0,"last_activity_date":1634086782,"creation_date":1634086782,"question_id":69548541,"body_markdown":"[enter image description here][1]\r\nSo, this is the payload and I am trying send form data along with the file but using form.serialize is formatting the csv file as well, any suggestion on how it can be sent without affecting the file?\r\n\r\n[enter image description here][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/09ZWg.png\r\n  [2]: https://i.stack.imgur.com/EkHJD.png","title":"How to send form data and file in csv using AJAX?","body":"<p><a href=\"https://i.stack.imgur.com/09ZWg.png\" rel=\"nofollow noreferrer\">enter image description here</a>\nSo, this is the payload and I am trying send form data along with the file but using form.serialize is formatting the csv file as well, any suggestion on how it can be sent without affecting the file?</p>\n<p><a href=\"https://i.stack.imgur.com/EkHJD.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":["java","jdbc","derby"],"comments":[{"owner":{"account_id":65826,"reputation":16198,"user_id":193453,"display_name":"Bryan Pendleton"},"score":1,"creation_date":1634080684,"post_id":69547203,"comment_id":122929017,"body_markdown":"You might have encountered https://issues.apache.org/jira/browse/DERBY-3609 .","body":"You might have encountered <a href=\"https://issues.apache.org/jira/browse/DERBY-3609\" rel=\"nofollow noreferrer\">issues.apache.org/jira/browse/DERBY-3609</a> ."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1634086212,"post_id":69547203,"comment_id":122929956,"body_markdown":"And judging by the age of that report they don&#39;t plan to fix it, even though they have a contributed patch.","body":"And judging by the age of that report they don&#39;t plan to fix it, even though they have a contributed patch."}],"owner":{"account_id":23016010,"reputation":1,"user_id":17137775,"display_name":"S&#233;rgio"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":115,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1634086672,"creation_date":1634073907,"question_id":69547203,"body_markdown":"A multi-line insert, in the style \r\n\r\n    INSERT INTO table (col_a, col_b) VALUES (?,?),(?,?),(?,?)\r\n\r\n\r\nIn MySQL, when I call the getGeneratedKeys() method, the ResultSet correctly returns the created keys. In Java DB, only one key is returned.\r\n\r\nI need to insert hundreds of rows, and with multiple insert it&#39;s much faster than adding one at a time. I can&#39;t use batch either, because Java DB doesn&#39;t return generated keys either.","title":"How to get the generated keys from a multiple insert in Java DB?","body":"<p>A multi-line insert, in the style</p>\n<pre><code>INSERT INTO table (col_a, col_b) VALUES (?,?),(?,?),(?,?)\n</code></pre>\n<p>In MySQL, when I call the getGeneratedKeys() method, the ResultSet correctly returns the created keys. In Java DB, only one key is returned.</p>\n<p>I need to insert hundreds of rows, and with multiple insert it's much faster than adding one at a time. I can't use batch either, because Java DB doesn't return generated keys either.</p>\n"},{"tags":["java","algorithm","cluster-analysis","gaussian","mixture-model"],"comments":[{"owner":{"account_id":24885,"reputation":30822,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1634086013,"post_id":6219967,"comment_id":122929910,"body_markdown":"Both links are (effectively) broken (the first&#39;s manual GitHub links (two identical URLs) redirect lead to a 404 and the second leads to *&quot;Forbidden. You don&#39;t have permission to access this resource.&quot;*)","body":"Both links are (effectively) broken (the first&#39;s manual GitHub links (two identical URLs) redirect lead to a 404 and the second leads to <i>&quot;Forbidden. You don&#39;t have permission to access this resource.&quot;</i>)"}],"answers":[{"tags":[],"owner":{"account_id":348820,"reputation":4788,"user_id":683739,"display_name":"jberg"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1634086131,"creation_date":1307046458,"answer_id":6219992,"question_id":6219967,"body_markdown":"[Weka][1] is Java data mining software that can do GMMs. It also has a nice GUI where you can do some preliminary modeling before doing everything in Java.\r\n\r\n  [1]: http://www.cs.waikato.ac.nz/ml/weka/\r\n","title":"How can I write GMM (Gaussian Mixture Model) in Java?","body":"<p><a href=\"http://www.cs.waikato.ac.nz/ml/weka/\" rel=\"nofollow noreferrer\">Weka</a> is Java data mining software that can do GMMs. It also has a nice GUI where you can do some preliminary modeling before doing everything in Java.</p>\n"},{"tags":[],"owner":{"account_id":481182,"reputation":5,"user_id":894842,"display_name":"Adil"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1634085275,"creation_date":1314032257,"answer_id":7150843,"question_id":6219967,"body_markdown":"You can use [&quot;MATLAB Builder JA&quot;][1] to get &quot;.JAR&quot; file and source code from your &quot;implementations in MATLAB&quot;. Like that, you can incorporate the result into your Java application.\r\n\r\n  [1]: http://www.mathworks.com/products/javabuilder/\r\n\r\n\r\n","title":"How can I write GMM (Gaussian Mixture Model) in Java?","body":"<p>You can use <a href=\"http://www.mathworks.com/products/javabuilder/\" rel=\"nofollow noreferrer\">&quot;MATLAB Builder JA&quot;</a> to get &quot;.JAR&quot; file and source code from your &quot;implementations in MATLAB&quot;. Like that, you can incorporate the result into your Java application.</p>\n"},{"tags":[],"owner":{"account_id":2341059,"reputation":31,"user_id":2052341,"display_name":"Garcia"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1634086187,"creation_date":1360269950,"answer_id":14760664,"question_id":6219967,"body_markdown":"I&#39;m the author of jMEF :) jMEF will allow you to create, process and manage mixtures of exponential families including of course GMMs. You basically have to create a mixture model  based on the Gaussian distribution. I&#39;ve written a bunch of tutorials to help understanding how to use it properly. It&#39;s pretty straightforward. The good thing is that you can estimate your mixture from samples using the EM algorithm.\r\n\r\n","title":"How can I write GMM (Gaussian Mixture Model) in Java?","body":"<p>I'm the author of jMEF :) jMEF will allow you to create, process and manage mixtures of exponential families including of course GMMs. You basically have to create a mixture model  based on the Gaussian distribution. I've written a bunch of tutorials to help understanding how to use it properly. It's pretty straightforward. The good thing is that you can estimate your mixture from samples using the EM algorithm.</p>\n"}],"owner":{"account_id":205049,"reputation":73345,"user_id":453596,"accept_rate":76,"display_name":"kamaci"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8727,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":3,"score":4,"last_activity_date":1634086187,"creation_date":1307046346,"question_id":6219967,"body_markdown":"How can I write a GMM ([Gaussian mixture model][1]) in Java? There are some implementations in MATLAB, but I am looking for some documentation about it and example code in Java.\r\n\r\n**PS:** If it is possible, how can I adopt the Weka implementation in my code?\r\n\r\n**PS 2:** I found http://www.lix.polytechnique.fr/~nielsen/MEF/ Where is the source code of GMM inside it so I can adopt it at my code?\r\n\r\n**PS 3:** Other code found is: http://www.dii.unisi.it/~freno/JProGraM.html, but it still has the problem how to adopt it. I should give the List of my input and get all the classified elements list from the algorithm.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Mixture_model#Gaussian_mixture_model\r\n\r\n\r\n","title":"How can I write GMM (Gaussian Mixture Model) in Java?","body":"<p>How can I write a GMM (<a href=\"https://en.wikipedia.org/wiki/Mixture_model#Gaussian_mixture_model\" rel=\"nofollow noreferrer\">Gaussian mixture model</a>) in Java? There are some implementations in MATLAB, but I am looking for some documentation about it and example code in Java.</p>\n<p><strong>PS:</strong> If it is possible, how can I adopt the Weka implementation in my code?</p>\n<p><strong>PS 2:</strong> I found <a href=\"http://www.lix.polytechnique.fr/%7Enielsen/MEF/\" rel=\"nofollow noreferrer\">http://www.lix.polytechnique.fr/~nielsen/MEF/</a> Where is the source code of GMM inside it so I can adopt it at my code?</p>\n<p><strong>PS 3:</strong> Other code found is: <a href=\"http://www.dii.unisi.it/%7Efreno/JProGraM.html\" rel=\"nofollow noreferrer\">http://www.dii.unisi.it/~freno/JProGraM.html</a>, but it still has the problem how to adopt it. I should give the List of my input and get all the classified elements list from the algorithm.</p>\n"},{"tags":["java","coordinates","jung","vertices"],"comments":[{"owner":{"account_id":336919,"reputation":2704,"user_id":664856,"display_name":"Joshua O&#39;Madadhain"},"score":0,"creation_date":1484322979,"post_id":41625298,"comment_id":70476742,"body_markdown":"Your question is not very clear, and your code example is not specific enough to demonstrate your specific concern; no one is going to read several hundred lines of your code.  I&#39;ve answered what I think your question is below.","body":"Your question is not very clear, and your code example is not specific enough to demonstrate your specific concern; no one is going to read several hundred lines of your code.  I&#39;ve answered what I think your question is below."},{"owner":{"account_id":24885,"reputation":30822,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1634085761,"post_id":41625298,"comment_id":122929862,"body_markdown":"The *&quot;see the picture&quot;* part was invalidated by revision 3. Why did you remove the picture (not a rhetorical question)? Can you fix it (whatever it should be)?","body":"The <i>&quot;see the picture&quot;</i> part was invalidated by revision 3. Why did you remove the picture (not a rhetorical question)? Can you fix it (whatever it should be)?"}],"answers":[{"tags":[],"owner":{"account_id":336919,"reputation":2704,"user_id":664856,"display_name":"Joshua O&#39;Madadhain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1634084775,"creation_date":1484322903,"answer_id":41638554,"question_id":41625298,"body_markdown":"The StaticLayout class may be used to specify known (rather than algorithmically generated) vertex locations; this is a frequent JUNG-related question on Stack Overflow: https://stackoverflow.com/search?q=staticlayout+jung\r\n\r\n","title":"Java, Jung Framework: How to edit and set vertices locations","body":"<p>The StaticLayout class may be used to specify known (rather than algorithmically generated) vertex locations; this is a frequent JUNG-related question on Stack Overflow: <a href=\"https://stackoverflow.com/search?q=staticlayout+jung\">https://stackoverflow.com/search?q=staticlayout+jung</a></p>\n"}],"owner":{"account_id":481182,"reputation":5,"user_id":894842,"display_name":"Adil"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":790,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"accepted_answer_id":41638554,"answer_count":1,"score":-3,"last_activity_date":1634085571,"creation_date":1484266111,"question_id":41625298,"body_markdown":"I&#39;m trying to set coordinates (x and y) of vertices in given position. I use the VertexImageShaperDemo example. The x,y coordinates for every vertex are already in the database. How can I place all IP addresses in their specific locations which is the square (see the picture)?\r\n\r\nHere&#39;s the code of what I am working on:\r\n\r\n    public class VertexImageShaperDemo extends JApplet {\r\n\r\n        private static final long serialVersionUID = -4332663871914930864L;\r\n\r\n        private static int VERTEX_COUNT ;\r\n\r\n        Map&lt;Number,Double&gt; mapX = new HashMap&lt;Number,Double&gt;();\r\n        Map&lt;Number,Double&gt; mapY = new HashMap&lt;Number,Double&gt;();\r\n\r\n        /**\r\n         * the graph\r\n         */\r\n        DirectedSparseGraph&lt;Number, Number&gt; graph;\r\n\r\n\r\n        //edu.uci.ics.jung.graph\r\n        /**\r\n         * the visual component and renderer for the graph\r\n         */\r\n        VisualizationViewer&lt;Number, Number&gt; vv;\r\n\r\n        /**\r\n         * some icon names to use\r\n         */\r\n        // String[] iconNames ;\r\n        // ArrayList&lt;String&gt; iconNames = new ArrayList&lt;String&gt;();\r\n\r\n        public VertexImageShaperDemo(JFrame frm) {\r\n\r\n            try{\r\n                String pilote = &quot;com.mysql.jdbc.Driver&quot;;\r\n                Class.forName(pilote);\r\n                Connection connexion = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/topology&quot;,&quot;root&quot;,&quot;&quot;);\r\n                Statement instruction = connexion.createStatement();\r\n                ResultSet resultat = instruction.executeQuery(&quot;select count(*) from node&quot;);\r\n                resultat.next();\r\n                int rowcount = resultat.getInt(1);\r\n                VERTEX_COUNT = rowcount;\r\n            }\r\n            catch (Exception e1){\r\n                System.out.println(&quot;echec pilote VERTEX_COUNT : &quot;+e1);\r\n            }\r\n\r\n            // Create a simple graph for the demo\r\n            graph = new DirectedSparseGraph&lt;Number,Number&gt;();\r\n            createGraph(VERTEX_COUNT);\r\n\r\n            // A Map for the labels\r\n            Map&lt;Number,String&gt; map = new HashMap&lt;Number,String&gt;();\r\n            /*\r\n                for(int i=1; i&lt;=VERTEX_COUNT; i++) {\r\n                    map.put(i, iconNames[i%iconNames.length]);\r\n                }\r\n            */\r\n\r\n            try{\r\n                String pilote = &quot;com.mysql.jdbc.Driver&quot;;\r\n                Class.forName(pilote);\r\n                Connection connexion = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/topology&quot;,&quot;root&quot;,&quot;&quot;);\r\n                Statement instruction = connexion.createStatement();\r\n\r\n                ResultSet resultat_Nodes = instruction.executeQuery(&quot;select * from node&quot;);\r\n\r\n                while(resultat_Nodes.next()){\r\n                    int Node_ID =resultat_Nodes.getInt(&quot;Node_ID&quot;);\r\n                    String Host_name = resultat_Nodes.getString(&quot;Host_name&quot;);\r\n                    int OL_Bit =resultat_Nodes.getInt(&quot;OL_Bit&quot;);\r\n                    String TE_rtr_ID = resultat_Nodes.getString(&quot;TE_rtr_ID&quot;);\r\n                    double X = resultat_Nodes.getDouble(&quot;X&quot;);\r\n                    double Y = resultat_Nodes.getDouble(&quot;Y&quot;);\r\n                    //iconNames[Node_ID] = Host_name;\r\n                    map.put(Node_ID, TE_rtr_ID);\r\n                    mapX.put(Node_ID, X);\r\n                    mapY.put(Node_ID, Y);\r\n                }\r\n\r\n            }\r\n            catch (Exception e1){\r\n                    System.out.println(&quot;echec pilote Nodes : &quot;+e1);\r\n            }\r\n\r\n            // A Map for the Icons\r\n            final FRLayout &lt;Number, Number&gt; layout = new FRLayout &lt;Number, Number&gt;(graph);\r\n            //layout.setMaxIterations(100);\r\n            // layout.setInitializer(new RandomLocationTransformer&lt;Number&gt;(new Dimension(400,400), 0));\r\n\r\n            vv =  new VisualizationViewer&lt;Number, Number&gt;(layout, new Dimension(400,400));\r\n\r\n            // This demo uses a special renderer to turn outlines on and off.\r\n            // you do not need to do this in a real application.\r\n            // Instead, just let vv use the Renderer it already has\r\n            vv.getRenderer().setVertexRenderer(new DemoRenderer&lt;Number,Number&gt;());\r\n\r\n            //PickedState&lt;String&gt; ps = vv.setPickedVertexState();\r\n\r\n            //Renderer.VertexLabel.Position position =\r\n            //(Renderer.VertexLabel.Position)e.getItem();\r\n            //vv.getRenderer().getVertexLabelRenderer().setPosition(position);\r\n            //vv.repaint();\r\n\r\n            Transformer&lt;Number,Paint&gt; vpf = new PickableVertexPaintTransformer&lt;Number&gt;(vv.getPickedVertexState(), Color.white, Color.yellow);\r\n\r\n            vv.getRenderContext().setVertexFillPaintTransformer(vpf);\r\n            vv.getRenderContext().setEdgeDrawPaintTransformer(new PickableEdgePaintTransformer&lt;Number&gt;(vv.getPickedEdgeState(), Color.black, Color.cyan));\r\n\r\n            vv.setBackground(Color.white);\r\n\r\n            final Transformer&lt;Number,String&gt; vertexStringerImpl = new VertexStringerImpl&lt;Number,String&gt;(map);\r\n            vv.getRenderContext().setVertexLabelTransformer(vertexStringerImpl);\r\n            vv.getRenderer().getVertexLabelRenderer().setPosition(Position.CNTR);\r\n            vv.getRenderContext().setVertexLabelRenderer(new DefaultVertexLabelRenderer(Color.green));\r\n\r\n            // vv.getRenderContext().setEdgeShapeTransformer(new EdgeShape.Line&lt;Integer,String&gt;());\r\n            vv.getRenderContext().setEdgeShapeTransformer(new EdgeShape.Line());\r\n            vv.getRenderContext().setEdgeLabelRenderer(new DefaultEdgeLabelRenderer(Color.cyan));\r\n\r\n            vv.getRenderContext().setEdgeLabelTransformer(new Transformer&lt;Number,String&gt;() {\r\n\r\n                public String transform(Number input) {\r\n\r\n                    return input.toString();\r\n                }\r\n            });\r\n\r\n            // For this demo only, I use a special class that lets me turn various\r\n            // features on and off. For a real application, use VertexIconShapeTransformer instead.\r\n            final DemoVertexIconShapeTransformer&lt;Number&gt; vertexIconShapeTransformer =\r\n                new DemoVertexIconShapeTransformer&lt;Number&gt;(new EllipseVertexShapeTransformer&lt;Number&gt;());\r\n\r\n            final DemoVertexIconTransformer&lt;Number&gt; vertexIconTransformer =\r\n                new DemoVertexIconTransformer&lt;Number&gt;();\r\n\r\n            vv.getRenderContext().setVertexShapeTransformer(vertexIconShapeTransformer);\r\n            vv.getRenderContext().setVertexIconTransformer(vertexIconTransformer);\r\n\r\n            /********************************************************************************************************/\r\n            /*\r\n            JFrame frame = new JFrame(&quot;Editing and Mouse Menu Demo&quot;);\r\n            SparseMultigraph&lt;GraphElements.MyVertex, GraphElements.MyEdge&gt; g = new SparseMultigraph&lt;GraphElements.MyVertex, GraphElements.MyEdge&gt;();\r\n\r\n            // Layout&lt;V, E&gt;, VisualizationViewer&lt;V,E&gt;\r\n            //Map&lt;GraphElements.MyVertex,Point2D&gt; vertexLocations = new HashMap&lt;GraphElements.MyVertex, Point2D&gt;();\r\n            Layout&lt;GraphElements.MyVertex, GraphElements.MyEdge&gt; layout = new StaticLayout(g);\r\n            layout.setSize(new Dimension(300,300));\r\n            VisualizationViewer&lt;GraphElements.MyVertex,GraphElements.MyEdge&gt; vv = new VisualizationViewer&lt;GraphElements.MyVertex,GraphElements.MyEdge&gt;(layout);\r\n            vv.setPreferredSize(new Dimension(350,350));\r\n\r\n\r\n            // Show vertex and edge labels\r\n            vv.getRenderContext().setVertexLabelTransformer(new ToStringLabeller());\r\n            vv.getRenderContext().setEdgeLabelTransformer(new ToStringLabeller());\r\n\r\n\r\n            // Create a graph mouse and add it to the visualization viewer\r\n            EditingModalGraphMouse gm = new EditingModalGraphMouse(vv.getRenderContext(), GraphElements.MyVertexFactory.getInstance(),GraphElements.MyEdgeFactory.getInstance());\r\n            // Set some defaults for the Edges...\r\n            GraphElements.MyEdgeFactory.setDefaultCapacity(192.0);\r\n            GraphElements.MyEdgeFactory.setDefaultWeight(5.0);\r\n            // Trying out our new popup menu mouse plugin...\r\n            PopupVertexEdgeMenuMousePlugin myPlugin = new PopupVertexEdgeMenuMousePlugin();\r\n            // Add some popup menus for the edges and vertices to our mouse plugin.\r\n            JPopupMenu edgeMenu = new MyMouseMenus.EdgeMenu(frame);\r\n            JPopupMenu vertexMenu = new MyMouseMenus.VertexMenu();\r\n            myPlugin.setEdgePopup(edgeMenu);\r\n            myPlugin.setVertexPopup(vertexMenu);\r\n            gm.remove(gm.getPopupEditingPlugin());  // Removes the existing popup editing plugin\r\n\r\n            gm.add(myPlugin);   // Add our new plugin to the mouse\r\n\r\n            vv.setGraphMouse(gm);\r\n\r\n\r\n            //JFrame frame = new JFrame(&quot;Editing and Mouse Menu Demo&quot;);\r\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n            frame.getContentPane().add(vv);\r\n\r\n            // Let&#39;s add a menu for changing mouse modes\r\n            JMenuBar menuBar = new JMenuBar();\r\n            JMenu modeMenu = gm.getModeMenu();\r\n            modeMenu.setText(&quot;Mouse Mode&quot;);\r\n            modeMenu.setIcon(null); // I&#39;m using this in a main menu\r\n            modeMenu.setPreferredSize(new Dimension(80,20)); // Change the size so I can see the text\r\n\r\n            menuBar.add(modeMenu);\r\n            frame.setJMenuBar(menuBar);\r\n            gm.setMode(ModalGraphMouse.Mode.EDITING); // Start off in editing mode\r\n            frame.pack();\r\n            frame.setVisible(true);\r\n            */\r\n            /***********************************************************************************************************/\r\n            // un-comment for RStar Tree visual testing\r\n            //vv.addPostRenderPaintable(new BoundingRectanglePaintable(vv.getRenderContext(), vv.getGraphLayout()));\r\n\r\n            // Get the pickedState and add a listener that will decorate the\r\n            // Vertex images with a checkmark icon when they are picked\r\n            //PickedState&lt;Number&gt; ps = vv.getPickedVertexState();\r\n            //ps.addItemListener(new PickWithIconListener&lt;Number&gt;(vertexIconTransformer));\r\n\r\n            // add a listener for ToolTips\r\n            vv.setVertexToolTipTransformer(new ToStringLabeller&lt;Number&gt;());\r\n            /*\r\n            vv.getGraphLayout().transform(1).setLocation(mapX.get(1), mapY.get(1));\r\n            vv.getGraphLayout().transform(2).setLocation(mapX.get(2), mapY.get(2));\r\n            vv.getGraphLayout().transform(3).setLocation(mapX.get(3), mapY.get(3));\r\n            vv.getGraphLayout().transform(4).setLocation(mapX.get(4), mapY.get(4));\r\n            vv.getGraphLayout().transform(5).setLocation(mapX.get(5), mapY.get(5));\r\n            vv.getGraphLayout().transform(6).setLocation(mapX.get(6), mapY.get(6));\r\n            vv.getGraphLayout().transform(7).setLocation(mapX.get(7), mapY.get(7));\r\n            vv.getGraphLayout().transform(8).setLocation(mapX.get(8), mapY.get(8));\r\n            */\r\n\r\n            Container content = getContentPane();\r\n            final GraphZoomScrollPane panel = new GraphZoomScrollPane(vv);\r\n            content.add(panel);\r\n\r\n            final DefaultModalGraphMouse&lt;Number,Number&gt; graphMouse = new DefaultModalGraphMouse&lt;Number,Number&gt;();\r\n            // final EditingModalGraphMouse graphMouse = new EditingModalGraphMouse(vv.getRenderContext(), GraphElements.MyVertexFactory.getInstance(),GraphElements.MyEdgeFactory.getInstance());\r\n\r\n\r\n            /***********************************************************/\r\n            /*\r\n            // Set some defaults for the Edges...\r\n            GraphElements.MyEdgeFactory.setDefaultCapacity(192.0);\r\n            GraphElements.MyEdgeFactory.setDefaultWeight(5.0);\r\n            // Trying out our new popup menu mouse plugin...\r\n            PopupVertexEdgeMenuMousePlugin myPlugin = new PopupVertexEdgeMenuMousePlugin();\r\n            // Add some popup menus for the edges and vertices to our mouse plugin.\r\n            JPopupMenu edgeMenu = new MyMouseMenus.EdgeMenu(frm);\r\n            JPopupMenu vertexMenu = new MyMouseMenus.VertexMenu();\r\n            myPlugin.setEdgePopup(edgeMenu);\r\n            myPlugin.setVertexPopup(vertexMenu);\r\n            graphMouse.remove(graphMouse.getPopupEditingPlugin());  // Removes the existing popup editing plugin\r\n\r\n            graphMouse.add(myPlugin);   // Add our new plugin to the mouse\r\n            */\r\n            /***********************************************************/\r\n\r\n\r\n            vv.setGraphMouse(graphMouse);\r\n            vv.addKeyListener(graphMouse.getModeKeyListener());\r\n            final ScalingControl scaler = new CrossoverScalingControl();\r\n\r\n            JButton plus = new JButton(&quot;+&quot;);\r\n            plus.addActionListener(new ActionListener() {\r\n                public void actionPerformed(ActionEvent e) {\r\n                    scaler.scale(vv, 1.1f, vv.getCenter());\r\n                }\r\n            });\r\n            JButton minus = new JButton(&quot;-&quot;);\r\n            minus.addActionListener(new ActionListener() {\r\n                public void actionPerformed(ActionEvent e) {\r\n                    scaler.scale(vv, 1/1.1f, vv.getCenter());\r\n                }\r\n            });\r\n\r\n            JButton XYButton = new JButton(&quot;Save X &amp; Y coordiantes&quot;);\r\n            XYButton.addActionListener(new ActionListener() {\r\n                public void actionPerformed(ActionEvent e) {\r\n\r\n                    try{\r\n                        String pilote = &quot;com.mysql.jdbc.Driver&quot;;\r\n                        Class.forName(pilote);\r\n                        Connection connexion = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/topology&quot;,&quot;root&quot;,&quot;&quot;);\r\n                        Statement instruction = connexion.createStatement();\r\n\r\n                        for (int i = 1; i &lt;= VERTEX_COUNT; i++) {\r\n                            mapX.put(i, layout.getX(i));\r\n                            mapY.put(i, layout.getY(i));\r\n\r\n                            instruction.executeUpdate(&quot;Update node set X =&quot; + layout.getX(i) + &quot;, Y=&quot;+ layout.getY(i) +&quot;where Node_ID = &quot; + i +&quot;&quot;);\r\n                        }\r\n                    }\r\n                    catch (Exception e1){\r\n                        System.out.println(&quot;echec pilote : &quot;+e1);\r\n                    }\r\n                }\r\n            });\r\n\r\n            JCheckBox shape = new JCheckBox(&quot;Shape&quot;);\r\n            shape.addItemListener(new ItemListener(){\r\n\r\n                public void itemStateChanged(ItemEvent e) {\r\n                    vertexIconShapeTransformer.setShapeImages(e.getStateChange()==ItemEvent.SELECTED);\r\n                    vv.repaint();\r\n                }\r\n            });\r\n            shape.setSelected(false);\r\n\r\n            JCheckBox fill = new JCheckBox(&quot;Fill&quot;);\r\n            fill.addItemListener(new ItemListener(){\r\n\r\n                public void itemStateChanged(ItemEvent e) {\r\n                    vertexIconTransformer.setFillImages(e.getStateChange()==ItemEvent.SELECTED);\r\n                    vv.repaint();\r\n                }\r\n            });\r\n            fill.setSelected(false);\r\n\r\n            JCheckBox drawOutlines = new JCheckBox(&quot;Outline&quot;);\r\n            drawOutlines.addItemListener(new ItemListener(){\r\n\r\n                public void itemStateChanged(ItemEvent e) {\r\n                    vertexIconTransformer.setOutlineImages(e.getStateChange()==ItemEvent.SELECTED);\r\n                    vv.repaint();\r\n                }\r\n            });\r\n            drawOutlines.setSelected(true);\r\n\r\n            JComboBox modeBox = graphMouse.getModeComboBox();\r\n            JPanel modePanel = new JPanel();\r\n            modePanel.setBorder(BorderFactory.createTitledBorder(&quot;Mouse Mode&quot;));\r\n            modePanel.add(modeBox);\r\n\r\n            /*\r\n            vv.setGraphMouse(graphMouse);\r\n            vv.addKeyListener(graphMouse.getModeKeyListener());\r\n            graphMouse.setMode(ModalGraphMouse.Mode.EDITING);\r\n             **/\r\n\r\n            JPanel scaleGrid = new JPanel(new GridLayout(1,0));\r\n            scaleGrid.setBorder(BorderFactory.createTitledBorder(&quot;Zoom&quot;));\r\n\r\n            JPanel labelFeatures = new JPanel(new GridLayout(1,0));\r\n            labelFeatures.setBorder(BorderFactory.createTitledBorder(&quot;Image Effects&quot;));\r\n\r\n            JPanel controls = new JPanel();\r\n            controls.add(XYButton);\r\n\r\n            scaleGrid.add(plus);\r\n            scaleGrid.add(minus);\r\n\r\n            controls.add(scaleGrid);\r\n\r\n            /*\r\n                labelFeatures.add(shape);\r\n                labelFeatures.add(fill);\r\n                labelFeatures.add(drawOutlines);\r\n\r\n                controls.add(labelFeatures);\r\n            */\r\n\r\n            controls.add(modePanel);\r\n            content.add(controls, BorderLayout.SOUTH);\r\n        }\r\n\r\n        /**\r\n         * When Vertices are picked, add a checkmark icon to the imager.\r\n         * Remove the icon when a Vertex is unpicked\r\n         * @author Tom Nelson\r\n         *\r\n         */\r\n        public static class PickWithIconListener&lt;V&gt; implements ItemListener {\r\n            DefaultVertexIconTransformer&lt;V&gt; imager;\r\n            Icon checked;\r\n\r\n            public PickWithIconListener(DefaultVertexIconTransformer&lt;V&gt; imager) {\r\n                this.imager = imager;\r\n                checked = new Checkmark();\r\n            }\r\n\r\n            public void itemStateChanged(ItemEvent e) {\r\n                Icon icon = imager.transform((V)e.getItem());\r\n                if(icon != null &amp;&amp; icon instanceof LayeredIcon) {\r\n                    if(e.getStateChange() == ItemEvent.SELECTED) {\r\n                        ((LayeredIcon)icon).add(checked);\r\n                    } else {\r\n                        ((LayeredIcon)icon).remove(checked);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * A simple implementation of VertexStringer that\r\n         * gets Vertex labels from a Map\r\n         *\r\n         * @author Tom Nelson\r\n         *\r\n         *\r\n         */\r\n        public static class VertexStringerImpl&lt;V,S&gt; implements Transformer&lt;V,String&gt; {\r\n            /*\r\n            vv.getGraphLayout().transform(1).setLocation(mapX.get(1), mapY.get(1));\r\n            vv.getGraphLayout().transform(2).setLocation(mapX.get(2), mapY.get(2));\r\n            vv.getGraphLayout().transform(3).setLocation(mapX.get(3), mapY.get(3));\r\n            vv.getGraphLayout().transform(4).setLocation(mapX.get(4), mapY.get(4));\r\n            vv.getGraphLayout().transform(5).setLocation(mapX.get(5), mapY.get(5));\r\n            vv.getGraphLayout().transform(6).setLocation(mapX.get(6), mapY.get(6));\r\n            vv.getGraphLayout().transform(7).setLocation(mapX.get(7), mapY.get(7));\r\n            vv.getGraphLayout().transform(8).setLocation(mapX.get(8), mapY.get(8));\r\n            */\r\n            Map&lt;V,String&gt; map = new HashMap&lt;V,String&gt;();\r\n\r\n            boolean enabled = true;\r\n\r\n            public VertexStringerImpl(Map&lt;V,String&gt; map) {\r\n                this.map = map;\r\n            }\r\n\r\n            /* (non-Javadoc)\r\n             * @see edu.uci.ics.jung.graph.decorators.VertexStringer#getLabel(edu.uci.ics.jung.graph.Vertex)\r\n             */\r\n            public String transform(V v) {\r\n                if(isEnabled()) {\r\n                    return map.get(v);\r\n                    //layout.transform(v).setLocation(x, y);\r\n                } else {\r\n                    return &quot;&quot;;\r\n                }\r\n            }\r\n\r\n            /**\r\n             * @return Returns the enabled.\r\n             */\r\n            public boolean isEnabled() {\r\n                return enabled;\r\n            }\r\n\r\n            /**\r\n             * @param enabled The enabled to set.\r\n             */\r\n            public void setEnabled(boolean enabled) {\r\n                this.enabled = enabled;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * create some vertices\r\n         * @param count how many to create\r\n         * @return the Vertices in an array\r\n         */\r\n        private void createGraph(int vertexCount) {\r\n            for (int i = 1; i &lt;= vertexCount; i++) {\r\n                graph.addVertex(i);\r\n            }\r\n\r\n            try{\r\n                String pilote = &quot;com.mysql.jdbc.Driver&quot;;\r\n                Class.forName(pilote);\r\n                Connection connexion = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/topology&quot;,&quot;root&quot;,&quot;&quot;);\r\n                Statement instruction = connexion.createStatement();\r\n                ResultSet resultat_Links = instruction.executeQuery(&quot;select * from link&quot;);\r\n\r\n                while(resultat_Links.next()){\r\n                    int Link_ID =resultat_Links.getInt(&quot;Link_ID&quot;);\r\n                    int Node_id =resultat_Links.getInt(&quot;Node_id&quot;);\r\n                    int remote_link_node_id =resultat_Links.getInt(&quot;remote_link_node_id&quot;);\r\n                    graph.addEdge(Link_ID, Node_id, remote_link_node_id, EdgeType.DIRECTED);\r\n                }\r\n\r\n            }\r\n            catch (Exception e1){\r\n                System.out.println(&quot;echec pilote links: &quot; + e1);\r\n            }\r\n            /*\r\n             * int j=1;\r\n            graph.addEdge(j++, 0, 1, EdgeType.DIRECTED);\r\n            graph.addEdge(j++, 3, 0, EdgeType.DIRECTED);\r\n            graph.addEdge(j++, 0, 4, EdgeType.DIRECTED);\r\n            graph.addEdge(j++, 4, 5, EdgeType.DIRECTED);\r\n            graph.addEdge(j++, 5, 3, EdgeType.DIRECTED);\r\n            graph.addEdge(j++, 2, 1, EdgeType.DIRECTED);\r\n            graph.addEdge(j++, 4, 1, EdgeType.DIRECTED);\r\n            graph.addEdge(j++, 8, 2, EdgeType.DIRECTED);\r\n            graph.addEdge(j++, 3, 8, EdgeType.DIRECTED);\r\n            graph.addEdge(j++, 6, 7, EdgeType.DIRECTED);\r\n            graph.addEdge(j++, 7, 5, EdgeType.DIRECTED);\r\n            graph.addEdge(j++, 0, 9, EdgeType.DIRECTED);\r\n            graph.addEdge(j++, 9, 8, EdgeType.DIRECTED);\r\n            graph.addEdge(j++, 7, 6, EdgeType.DIRECTED);\r\n            graph.addEdge(j++, 6, 5, EdgeType.DIRECTED);\r\n            graph.addEdge(j++, 4, 2, EdgeType.DIRECTED);\r\n            graph.addEdge(j++, 5, 4, EdgeType.DIRECTED);\r\n            graph.addEdge(j++, 4, 10, EdgeType.DIRECTED);\r\n            graph.addEdge(j++, 10, 4, EdgeType.DIRECTED);\r\n            */\r\n        }\r\n\r\n        /**\r\n         * this class exists only to provide settings to turn on/off shapes and image fill\r\n         * in this demo.\r\n         * In a real application, use DefaultVertexIconTransformer instead.\r\n         *\r\n         */\r\n        public static class DemoVertexIconTransformer&lt;V&gt; extends DefaultVertexIconTransformer&lt;V&gt;\r\n            implements Transformer&lt;V,Icon&gt; {\r\n\r\n            boolean fillImages = true;\r\n            boolean outlineImages = false;\r\n\r\n            /**\r\n             * @return Returns the fillImages.\r\n             */\r\n            public boolean isFillImages() {\r\n                return fillImages;\r\n            }\r\n            /**\r\n             * @param fillImages The fillImages to set.\r\n             */\r\n            public void setFillImages(boolean fillImages) {\r\n                this.fillImages = fillImages;\r\n            }\r\n\r\n            public boolean isOutlineImages() {\r\n                return outlineImages;\r\n            }\r\n            public void setOutlineImages(boolean outlineImages) {\r\n                this.outlineImages = outlineImages;\r\n            }\r\n\r\n            public Icon transform(V v) {\r\n                if(fillImages) {\r\n                    return (Icon)iconMap.get(v);\r\n                } else {\r\n                    return null;\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * this class exists only to provide settings to turn on/off shapes and image fill\r\n         * in this demo.\r\n         * In a real application, use VertexIconShapeTransformer instead.\r\n         *\r\n         */\r\n        public static class DemoVertexIconShapeTransformer&lt;V&gt; extends VertexIconShapeTransformer&lt;V&gt; {\r\n\r\n            boolean shapeImages = true;\r\n\r\n            public DemoVertexIconShapeTransformer(Transformer&lt;V,Shape&gt; delegate) {\r\n                super(delegate);\r\n            }\r\n\r\n            /**\r\n             * @return Returns the shapeImages.\r\n             */\r\n            public boolean isShapeImages() {\r\n                return shapeImages;\r\n            }\r\n\r\n            /**\r\n             * @param shapeImages The shapeImages to set.\r\n             */\r\n            public void setShapeImages(boolean shapeImages) {\r\n                shapeMap.clear();\r\n                this.shapeImages = shapeImages;\r\n            }\r\n\r\n            public Shape transform(V v) {\r\n                //Icon icon = (Icon) iconMap.get(v);\r\n\r\n                Icon icon = new LayeredIcon(new ImageIcon(VertexImageShaperDemo.class.getResource(&quot;/images/Router.png&quot;)).getImage());\r\n\r\n                if (icon != null &amp;&amp; icon instanceof ImageIcon) {\r\n\r\n                    Image image = ((ImageIcon) icon).getImage();\r\n\r\n                    Shape shape = shapeMap.get(image);\r\n                    if (shape == null) {\r\n                        if (shapeImages) {\r\n                            shape = FourPassImageShaper.getShape(image, 30);\r\n                        }\r\n                        else {\r\n                            shape = new Rectangle2D.Float(0, 0, image.getWidth(null), image.getHeight(null));\r\n                        }\r\n                        if(shape.getBounds().getWidth() &gt; 0 &amp;&amp;\r\n                                shape.getBounds().getHeight() &gt; 0) {\r\n                            int width = image.getWidth(null);\r\n                            int height = image.getHeight(null);\r\n                            AffineTransform transform =\r\n                                AffineTransform.getTranslateInstance(-width / 2, -height / 2);\r\n                            shape = transform.createTransformedShape(shape);\r\n                            shapeMap.put(image, shape);\r\n                        }\r\n                    }\r\n                    return shape;\r\n                }\r\n                else {\r\n                    return delegate.transform(v);\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * A special renderer that can turn outlines on and off\r\n         * in this demo.\r\n         * You won&#39;t need this for a real application.\r\n         * Use BasicVertexRenderer instead\r\n         *\r\n         * @author Tom Nelson\r\n         *\r\n         */\r\n        class DemoRenderer&lt;V,E&gt; extends BasicVertexRenderer&lt;V,E&gt; {\r\n            public void paintIconForVertex(RenderContext&lt;V,E&gt; rc, V v, Layout&lt;V,E&gt; layout) {\r\n\r\n                //layout.transform(v).setLocation(mapX.get(v), mapY.get(v));\r\n                Point2D p = layout.transform(v);\r\n                p = rc.getMultiLayerTransformer().transform(Layer.LAYOUT, p);\r\n                //Shape shape = null;\r\n\r\n\r\n                float x = (float)p.getX();\r\n                float y = (float)p.getY();\r\n\r\n                //double x = mapX.get(v);\r\n                //double y = mapY.get(v);\r\n\r\n                GraphicsDecorator g = rc.getGraphicsContext();\r\n                boolean outlineImages = false;\r\n                Transformer&lt;V,Icon&gt; vertexIconFunction = rc.getVertexIconTransformer();\r\n\r\n                if(vertexIconFunction instanceof DemoVertexIconTransformer) {\r\n                    outlineImages = ((DemoVertexIconTransformer&lt;V&gt;)vertexIconFunction).isOutlineImages();\r\n                }\r\n                Icon icon = vertexIconFunction.transform(v);\r\n                if(icon == null || outlineImages ) {\r\n\r\n                    if(mapX.isEmpty() &amp;&amp; mapY.isEmpty()){\r\n                        Shape s = AffineTransform.getTranslateInstance(mapX.get(v),mapY.get(v)).createTransformedShape(rc.getVertexShapeTransformer().transform(v).getBounds2D());\r\n                        paintShapeForVertex(rc, v, s);\r\n                    }\r\n                    else{\r\n                        Shape s = AffineTransform.getTranslateInstance(mapX.get(v),mapY.get(v)).createTransformedShape(rc.getVertexShapeTransformer().transform(v).getBounds2D());\r\n                        paintShapeForVertex(rc, v, s);\r\n                    }\r\n\r\n\r\n\r\n                    /*\r\n                    int xLoc = (int) (x - 50/2);\r\n                    int yLoc = (int) (y - 50/2);\r\n                    shape = new Rectangle (xLoc, yLoc, 50, 50);\r\n                    paintShapeForVertex(rc, v, shape);\r\n                 */\r\n\r\n                }\r\n                if(icon != null) {\r\n                    int xLoc = (int) (mapX.get(v) - icon.getIconWidth()/2);\r\n                    int yLoc = (int) (mapY.get(v) - icon.getIconHeight()/2);\r\n                    icon.paintIcon(rc.getScreenDevice(), g.getDelegate(), xLoc, yLoc);\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * A driver for this demo\r\n         */\r\n        public static void main(String[] args) {\r\n            JFrame frame = new JFrame(&quot;Segment routing topology project&quot;);\r\n            Container content = frame.getContentPane();\r\n\r\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\r\n            content.add(new VertexImageShaperDemo(frame));\r\n            frame.pack();\r\n            frame.setVisible(true);\r\n        }\r\n    }\r\n\r\n","title":"Java, Jung Framework: How to edit and set vertices locations","body":"<p>I'm trying to set coordinates (x and y) of vertices in given position. I use the VertexImageShaperDemo example. The x,y coordinates for every vertex are already in the database. How can I place all IP addresses in their specific locations which is the square (see the picture)?</p>\n<p>Here's the code of what I am working on:</p>\n<pre><code>public class VertexImageShaperDemo extends JApplet {\n\n    private static final long serialVersionUID = -4332663871914930864L;\n\n    private static int VERTEX_COUNT ;\n\n    Map&lt;Number,Double&gt; mapX = new HashMap&lt;Number,Double&gt;();\n    Map&lt;Number,Double&gt; mapY = new HashMap&lt;Number,Double&gt;();\n\n    /**\n     * the graph\n     */\n    DirectedSparseGraph&lt;Number, Number&gt; graph;\n\n\n    //edu.uci.ics.jung.graph\n    /**\n     * the visual component and renderer for the graph\n     */\n    VisualizationViewer&lt;Number, Number&gt; vv;\n\n    /**\n     * some icon names to use\n     */\n    // String[] iconNames ;\n    // ArrayList&lt;String&gt; iconNames = new ArrayList&lt;String&gt;();\n\n    public VertexImageShaperDemo(JFrame frm) {\n\n        try{\n            String pilote = &quot;com.mysql.jdbc.Driver&quot;;\n            Class.forName(pilote);\n            Connection connexion = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/topology&quot;,&quot;root&quot;,&quot;&quot;);\n            Statement instruction = connexion.createStatement();\n            ResultSet resultat = instruction.executeQuery(&quot;select count(*) from node&quot;);\n            resultat.next();\n            int rowcount = resultat.getInt(1);\n            VERTEX_COUNT = rowcount;\n        }\n        catch (Exception e1){\n            System.out.println(&quot;echec pilote VERTEX_COUNT : &quot;+e1);\n        }\n\n        // Create a simple graph for the demo\n        graph = new DirectedSparseGraph&lt;Number,Number&gt;();\n        createGraph(VERTEX_COUNT);\n\n        // A Map for the labels\n        Map&lt;Number,String&gt; map = new HashMap&lt;Number,String&gt;();\n        /*\n            for(int i=1; i&lt;=VERTEX_COUNT; i++) {\n                map.put(i, iconNames[i%iconNames.length]);\n            }\n        */\n\n        try{\n            String pilote = &quot;com.mysql.jdbc.Driver&quot;;\n            Class.forName(pilote);\n            Connection connexion = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/topology&quot;,&quot;root&quot;,&quot;&quot;);\n            Statement instruction = connexion.createStatement();\n\n            ResultSet resultat_Nodes = instruction.executeQuery(&quot;select * from node&quot;);\n\n            while(resultat_Nodes.next()){\n                int Node_ID =resultat_Nodes.getInt(&quot;Node_ID&quot;);\n                String Host_name = resultat_Nodes.getString(&quot;Host_name&quot;);\n                int OL_Bit =resultat_Nodes.getInt(&quot;OL_Bit&quot;);\n                String TE_rtr_ID = resultat_Nodes.getString(&quot;TE_rtr_ID&quot;);\n                double X = resultat_Nodes.getDouble(&quot;X&quot;);\n                double Y = resultat_Nodes.getDouble(&quot;Y&quot;);\n                //iconNames[Node_ID] = Host_name;\n                map.put(Node_ID, TE_rtr_ID);\n                mapX.put(Node_ID, X);\n                mapY.put(Node_ID, Y);\n            }\n\n        }\n        catch (Exception e1){\n                System.out.println(&quot;echec pilote Nodes : &quot;+e1);\n        }\n\n        // A Map for the Icons\n        final FRLayout &lt;Number, Number&gt; layout = new FRLayout &lt;Number, Number&gt;(graph);\n        //layout.setMaxIterations(100);\n        // layout.setInitializer(new RandomLocationTransformer&lt;Number&gt;(new Dimension(400,400), 0));\n\n        vv =  new VisualizationViewer&lt;Number, Number&gt;(layout, new Dimension(400,400));\n\n        // This demo uses a special renderer to turn outlines on and off.\n        // you do not need to do this in a real application.\n        // Instead, just let vv use the Renderer it already has\n        vv.getRenderer().setVertexRenderer(new DemoRenderer&lt;Number,Number&gt;());\n\n        //PickedState&lt;String&gt; ps = vv.setPickedVertexState();\n\n        //Renderer.VertexLabel.Position position =\n        //(Renderer.VertexLabel.Position)e.getItem();\n        //vv.getRenderer().getVertexLabelRenderer().setPosition(position);\n        //vv.repaint();\n\n        Transformer&lt;Number,Paint&gt; vpf = new PickableVertexPaintTransformer&lt;Number&gt;(vv.getPickedVertexState(), Color.white, Color.yellow);\n\n        vv.getRenderContext().setVertexFillPaintTransformer(vpf);\n        vv.getRenderContext().setEdgeDrawPaintTransformer(new PickableEdgePaintTransformer&lt;Number&gt;(vv.getPickedEdgeState(), Color.black, Color.cyan));\n\n        vv.setBackground(Color.white);\n\n        final Transformer&lt;Number,String&gt; vertexStringerImpl = new VertexStringerImpl&lt;Number,String&gt;(map);\n        vv.getRenderContext().setVertexLabelTransformer(vertexStringerImpl);\n        vv.getRenderer().getVertexLabelRenderer().setPosition(Position.CNTR);\n        vv.getRenderContext().setVertexLabelRenderer(new DefaultVertexLabelRenderer(Color.green));\n\n        // vv.getRenderContext().setEdgeShapeTransformer(new EdgeShape.Line&lt;Integer,String&gt;());\n        vv.getRenderContext().setEdgeShapeTransformer(new EdgeShape.Line());\n        vv.getRenderContext().setEdgeLabelRenderer(new DefaultEdgeLabelRenderer(Color.cyan));\n\n        vv.getRenderContext().setEdgeLabelTransformer(new Transformer&lt;Number,String&gt;() {\n\n            public String transform(Number input) {\n\n                return input.toString();\n            }\n        });\n\n        // For this demo only, I use a special class that lets me turn various\n        // features on and off. For a real application, use VertexIconShapeTransformer instead.\n        final DemoVertexIconShapeTransformer&lt;Number&gt; vertexIconShapeTransformer =\n            new DemoVertexIconShapeTransformer&lt;Number&gt;(new EllipseVertexShapeTransformer&lt;Number&gt;());\n\n        final DemoVertexIconTransformer&lt;Number&gt; vertexIconTransformer =\n            new DemoVertexIconTransformer&lt;Number&gt;();\n\n        vv.getRenderContext().setVertexShapeTransformer(vertexIconShapeTransformer);\n        vv.getRenderContext().setVertexIconTransformer(vertexIconTransformer);\n\n        /********************************************************************************************************/\n        /*\n        JFrame frame = new JFrame(&quot;Editing and Mouse Menu Demo&quot;);\n        SparseMultigraph&lt;GraphElements.MyVertex, GraphElements.MyEdge&gt; g = new SparseMultigraph&lt;GraphElements.MyVertex, GraphElements.MyEdge&gt;();\n\n        // Layout&lt;V, E&gt;, VisualizationViewer&lt;V,E&gt;\n        //Map&lt;GraphElements.MyVertex,Point2D&gt; vertexLocations = new HashMap&lt;GraphElements.MyVertex, Point2D&gt;();\n        Layout&lt;GraphElements.MyVertex, GraphElements.MyEdge&gt; layout = new StaticLayout(g);\n        layout.setSize(new Dimension(300,300));\n        VisualizationViewer&lt;GraphElements.MyVertex,GraphElements.MyEdge&gt; vv = new VisualizationViewer&lt;GraphElements.MyVertex,GraphElements.MyEdge&gt;(layout);\n        vv.setPreferredSize(new Dimension(350,350));\n\n\n        // Show vertex and edge labels\n        vv.getRenderContext().setVertexLabelTransformer(new ToStringLabeller());\n        vv.getRenderContext().setEdgeLabelTransformer(new ToStringLabeller());\n\n\n        // Create a graph mouse and add it to the visualization viewer\n        EditingModalGraphMouse gm = new EditingModalGraphMouse(vv.getRenderContext(), GraphElements.MyVertexFactory.getInstance(),GraphElements.MyEdgeFactory.getInstance());\n        // Set some defaults for the Edges...\n        GraphElements.MyEdgeFactory.setDefaultCapacity(192.0);\n        GraphElements.MyEdgeFactory.setDefaultWeight(5.0);\n        // Trying out our new popup menu mouse plugin...\n        PopupVertexEdgeMenuMousePlugin myPlugin = new PopupVertexEdgeMenuMousePlugin();\n        // Add some popup menus for the edges and vertices to our mouse plugin.\n        JPopupMenu edgeMenu = new MyMouseMenus.EdgeMenu(frame);\n        JPopupMenu vertexMenu = new MyMouseMenus.VertexMenu();\n        myPlugin.setEdgePopup(edgeMenu);\n        myPlugin.setVertexPopup(vertexMenu);\n        gm.remove(gm.getPopupEditingPlugin());  // Removes the existing popup editing plugin\n\n        gm.add(myPlugin);   // Add our new plugin to the mouse\n\n        vv.setGraphMouse(gm);\n\n\n        //JFrame frame = new JFrame(&quot;Editing and Mouse Menu Demo&quot;);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.getContentPane().add(vv);\n\n        // Let's add a menu for changing mouse modes\n        JMenuBar menuBar = new JMenuBar();\n        JMenu modeMenu = gm.getModeMenu();\n        modeMenu.setText(&quot;Mouse Mode&quot;);\n        modeMenu.setIcon(null); // I'm using this in a main menu\n        modeMenu.setPreferredSize(new Dimension(80,20)); // Change the size so I can see the text\n\n        menuBar.add(modeMenu);\n        frame.setJMenuBar(menuBar);\n        gm.setMode(ModalGraphMouse.Mode.EDITING); // Start off in editing mode\n        frame.pack();\n        frame.setVisible(true);\n        */\n        /***********************************************************************************************************/\n        // un-comment for RStar Tree visual testing\n        //vv.addPostRenderPaintable(new BoundingRectanglePaintable(vv.getRenderContext(), vv.getGraphLayout()));\n\n        // Get the pickedState and add a listener that will decorate the\n        // Vertex images with a checkmark icon when they are picked\n        //PickedState&lt;Number&gt; ps = vv.getPickedVertexState();\n        //ps.addItemListener(new PickWithIconListener&lt;Number&gt;(vertexIconTransformer));\n\n        // add a listener for ToolTips\n        vv.setVertexToolTipTransformer(new ToStringLabeller&lt;Number&gt;());\n        /*\n        vv.getGraphLayout().transform(1).setLocation(mapX.get(1), mapY.get(1));\n        vv.getGraphLayout().transform(2).setLocation(mapX.get(2), mapY.get(2));\n        vv.getGraphLayout().transform(3).setLocation(mapX.get(3), mapY.get(3));\n        vv.getGraphLayout().transform(4).setLocation(mapX.get(4), mapY.get(4));\n        vv.getGraphLayout().transform(5).setLocation(mapX.get(5), mapY.get(5));\n        vv.getGraphLayout().transform(6).setLocation(mapX.get(6), mapY.get(6));\n        vv.getGraphLayout().transform(7).setLocation(mapX.get(7), mapY.get(7));\n        vv.getGraphLayout().transform(8).setLocation(mapX.get(8), mapY.get(8));\n        */\n\n        Container content = getContentPane();\n        final GraphZoomScrollPane panel = new GraphZoomScrollPane(vv);\n        content.add(panel);\n\n        final DefaultModalGraphMouse&lt;Number,Number&gt; graphMouse = new DefaultModalGraphMouse&lt;Number,Number&gt;();\n        // final EditingModalGraphMouse graphMouse = new EditingModalGraphMouse(vv.getRenderContext(), GraphElements.MyVertexFactory.getInstance(),GraphElements.MyEdgeFactory.getInstance());\n\n\n        /***********************************************************/\n        /*\n        // Set some defaults for the Edges...\n        GraphElements.MyEdgeFactory.setDefaultCapacity(192.0);\n        GraphElements.MyEdgeFactory.setDefaultWeight(5.0);\n        // Trying out our new popup menu mouse plugin...\n        PopupVertexEdgeMenuMousePlugin myPlugin = new PopupVertexEdgeMenuMousePlugin();\n        // Add some popup menus for the edges and vertices to our mouse plugin.\n        JPopupMenu edgeMenu = new MyMouseMenus.EdgeMenu(frm);\n        JPopupMenu vertexMenu = new MyMouseMenus.VertexMenu();\n        myPlugin.setEdgePopup(edgeMenu);\n        myPlugin.setVertexPopup(vertexMenu);\n        graphMouse.remove(graphMouse.getPopupEditingPlugin());  // Removes the existing popup editing plugin\n\n        graphMouse.add(myPlugin);   // Add our new plugin to the mouse\n        */\n        /***********************************************************/\n\n\n        vv.setGraphMouse(graphMouse);\n        vv.addKeyListener(graphMouse.getModeKeyListener());\n        final ScalingControl scaler = new CrossoverScalingControl();\n\n        JButton plus = new JButton(&quot;+&quot;);\n        plus.addActionListener(new ActionListener() {\n            public void actionPerformed(ActionEvent e) {\n                scaler.scale(vv, 1.1f, vv.getCenter());\n            }\n        });\n        JButton minus = new JButton(&quot;-&quot;);\n        minus.addActionListener(new ActionListener() {\n            public void actionPerformed(ActionEvent e) {\n                scaler.scale(vv, 1/1.1f, vv.getCenter());\n            }\n        });\n\n        JButton XYButton = new JButton(&quot;Save X &amp; Y coordiantes&quot;);\n        XYButton.addActionListener(new ActionListener() {\n            public void actionPerformed(ActionEvent e) {\n\n                try{\n                    String pilote = &quot;com.mysql.jdbc.Driver&quot;;\n                    Class.forName(pilote);\n                    Connection connexion = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/topology&quot;,&quot;root&quot;,&quot;&quot;);\n                    Statement instruction = connexion.createStatement();\n\n                    for (int i = 1; i &lt;= VERTEX_COUNT; i++) {\n                        mapX.put(i, layout.getX(i));\n                        mapY.put(i, layout.getY(i));\n\n                        instruction.executeUpdate(&quot;Update node set X =&quot; + layout.getX(i) + &quot;, Y=&quot;+ layout.getY(i) +&quot;where Node_ID = &quot; + i +&quot;&quot;);\n                    }\n                }\n                catch (Exception e1){\n                    System.out.println(&quot;echec pilote : &quot;+e1);\n                }\n            }\n        });\n\n        JCheckBox shape = new JCheckBox(&quot;Shape&quot;);\n        shape.addItemListener(new ItemListener(){\n\n            public void itemStateChanged(ItemEvent e) {\n                vertexIconShapeTransformer.setShapeImages(e.getStateChange()==ItemEvent.SELECTED);\n                vv.repaint();\n            }\n        });\n        shape.setSelected(false);\n\n        JCheckBox fill = new JCheckBox(&quot;Fill&quot;);\n        fill.addItemListener(new ItemListener(){\n\n            public void itemStateChanged(ItemEvent e) {\n                vertexIconTransformer.setFillImages(e.getStateChange()==ItemEvent.SELECTED);\n                vv.repaint();\n            }\n        });\n        fill.setSelected(false);\n\n        JCheckBox drawOutlines = new JCheckBox(&quot;Outline&quot;);\n        drawOutlines.addItemListener(new ItemListener(){\n\n            public void itemStateChanged(ItemEvent e) {\n                vertexIconTransformer.setOutlineImages(e.getStateChange()==ItemEvent.SELECTED);\n                vv.repaint();\n            }\n        });\n        drawOutlines.setSelected(true);\n\n        JComboBox modeBox = graphMouse.getModeComboBox();\n        JPanel modePanel = new JPanel();\n        modePanel.setBorder(BorderFactory.createTitledBorder(&quot;Mouse Mode&quot;));\n        modePanel.add(modeBox);\n\n        /*\n        vv.setGraphMouse(graphMouse);\n        vv.addKeyListener(graphMouse.getModeKeyListener());\n        graphMouse.setMode(ModalGraphMouse.Mode.EDITING);\n         **/\n\n        JPanel scaleGrid = new JPanel(new GridLayout(1,0));\n        scaleGrid.setBorder(BorderFactory.createTitledBorder(&quot;Zoom&quot;));\n\n        JPanel labelFeatures = new JPanel(new GridLayout(1,0));\n        labelFeatures.setBorder(BorderFactory.createTitledBorder(&quot;Image Effects&quot;));\n\n        JPanel controls = new JPanel();\n        controls.add(XYButton);\n\n        scaleGrid.add(plus);\n        scaleGrid.add(minus);\n\n        controls.add(scaleGrid);\n\n        /*\n            labelFeatures.add(shape);\n            labelFeatures.add(fill);\n            labelFeatures.add(drawOutlines);\n\n            controls.add(labelFeatures);\n        */\n\n        controls.add(modePanel);\n        content.add(controls, BorderLayout.SOUTH);\n    }\n\n    /**\n     * When Vertices are picked, add a checkmark icon to the imager.\n     * Remove the icon when a Vertex is unpicked\n     * @author Tom Nelson\n     *\n     */\n    public static class PickWithIconListener&lt;V&gt; implements ItemListener {\n        DefaultVertexIconTransformer&lt;V&gt; imager;\n        Icon checked;\n\n        public PickWithIconListener(DefaultVertexIconTransformer&lt;V&gt; imager) {\n            this.imager = imager;\n            checked = new Checkmark();\n        }\n\n        public void itemStateChanged(ItemEvent e) {\n            Icon icon = imager.transform((V)e.getItem());\n            if(icon != null &amp;&amp; icon instanceof LayeredIcon) {\n                if(e.getStateChange() == ItemEvent.SELECTED) {\n                    ((LayeredIcon)icon).add(checked);\n                } else {\n                    ((LayeredIcon)icon).remove(checked);\n                }\n            }\n        }\n    }\n\n    /**\n     * A simple implementation of VertexStringer that\n     * gets Vertex labels from a Map\n     *\n     * @author Tom Nelson\n     *\n     *\n     */\n    public static class VertexStringerImpl&lt;V,S&gt; implements Transformer&lt;V,String&gt; {\n        /*\n        vv.getGraphLayout().transform(1).setLocation(mapX.get(1), mapY.get(1));\n        vv.getGraphLayout().transform(2).setLocation(mapX.get(2), mapY.get(2));\n        vv.getGraphLayout().transform(3).setLocation(mapX.get(3), mapY.get(3));\n        vv.getGraphLayout().transform(4).setLocation(mapX.get(4), mapY.get(4));\n        vv.getGraphLayout().transform(5).setLocation(mapX.get(5), mapY.get(5));\n        vv.getGraphLayout().transform(6).setLocation(mapX.get(6), mapY.get(6));\n        vv.getGraphLayout().transform(7).setLocation(mapX.get(7), mapY.get(7));\n        vv.getGraphLayout().transform(8).setLocation(mapX.get(8), mapY.get(8));\n        */\n        Map&lt;V,String&gt; map = new HashMap&lt;V,String&gt;();\n\n        boolean enabled = true;\n\n        public VertexStringerImpl(Map&lt;V,String&gt; map) {\n            this.map = map;\n        }\n\n        /* (non-Javadoc)\n         * @see edu.uci.ics.jung.graph.decorators.VertexStringer#getLabel(edu.uci.ics.jung.graph.Vertex)\n         */\n        public String transform(V v) {\n            if(isEnabled()) {\n                return map.get(v);\n                //layout.transform(v).setLocation(x, y);\n            } else {\n                return &quot;&quot;;\n            }\n        }\n\n        /**\n         * @return Returns the enabled.\n         */\n        public boolean isEnabled() {\n            return enabled;\n        }\n\n        /**\n         * @param enabled The enabled to set.\n         */\n        public void setEnabled(boolean enabled) {\n            this.enabled = enabled;\n        }\n    }\n\n    /**\n     * create some vertices\n     * @param count how many to create\n     * @return the Vertices in an array\n     */\n    private void createGraph(int vertexCount) {\n        for (int i = 1; i &lt;= vertexCount; i++) {\n            graph.addVertex(i);\n        }\n\n        try{\n            String pilote = &quot;com.mysql.jdbc.Driver&quot;;\n            Class.forName(pilote);\n            Connection connexion = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/topology&quot;,&quot;root&quot;,&quot;&quot;);\n            Statement instruction = connexion.createStatement();\n            ResultSet resultat_Links = instruction.executeQuery(&quot;select * from link&quot;);\n\n            while(resultat_Links.next()){\n                int Link_ID =resultat_Links.getInt(&quot;Link_ID&quot;);\n                int Node_id =resultat_Links.getInt(&quot;Node_id&quot;);\n                int remote_link_node_id =resultat_Links.getInt(&quot;remote_link_node_id&quot;);\n                graph.addEdge(Link_ID, Node_id, remote_link_node_id, EdgeType.DIRECTED);\n            }\n\n        }\n        catch (Exception e1){\n            System.out.println(&quot;echec pilote links: &quot; + e1);\n        }\n        /*\n         * int j=1;\n        graph.addEdge(j++, 0, 1, EdgeType.DIRECTED);\n        graph.addEdge(j++, 3, 0, EdgeType.DIRECTED);\n        graph.addEdge(j++, 0, 4, EdgeType.DIRECTED);\n        graph.addEdge(j++, 4, 5, EdgeType.DIRECTED);\n        graph.addEdge(j++, 5, 3, EdgeType.DIRECTED);\n        graph.addEdge(j++, 2, 1, EdgeType.DIRECTED);\n        graph.addEdge(j++, 4, 1, EdgeType.DIRECTED);\n        graph.addEdge(j++, 8, 2, EdgeType.DIRECTED);\n        graph.addEdge(j++, 3, 8, EdgeType.DIRECTED);\n        graph.addEdge(j++, 6, 7, EdgeType.DIRECTED);\n        graph.addEdge(j++, 7, 5, EdgeType.DIRECTED);\n        graph.addEdge(j++, 0, 9, EdgeType.DIRECTED);\n        graph.addEdge(j++, 9, 8, EdgeType.DIRECTED);\n        graph.addEdge(j++, 7, 6, EdgeType.DIRECTED);\n        graph.addEdge(j++, 6, 5, EdgeType.DIRECTED);\n        graph.addEdge(j++, 4, 2, EdgeType.DIRECTED);\n        graph.addEdge(j++, 5, 4, EdgeType.DIRECTED);\n        graph.addEdge(j++, 4, 10, EdgeType.DIRECTED);\n        graph.addEdge(j++, 10, 4, EdgeType.DIRECTED);\n        */\n    }\n\n    /**\n     * this class exists only to provide settings to turn on/off shapes and image fill\n     * in this demo.\n     * In a real application, use DefaultVertexIconTransformer instead.\n     *\n     */\n    public static class DemoVertexIconTransformer&lt;V&gt; extends DefaultVertexIconTransformer&lt;V&gt;\n        implements Transformer&lt;V,Icon&gt; {\n\n        boolean fillImages = true;\n        boolean outlineImages = false;\n\n        /**\n         * @return Returns the fillImages.\n         */\n        public boolean isFillImages() {\n            return fillImages;\n        }\n        /**\n         * @param fillImages The fillImages to set.\n         */\n        public void setFillImages(boolean fillImages) {\n            this.fillImages = fillImages;\n        }\n\n        public boolean isOutlineImages() {\n            return outlineImages;\n        }\n        public void setOutlineImages(boolean outlineImages) {\n            this.outlineImages = outlineImages;\n        }\n\n        public Icon transform(V v) {\n            if(fillImages) {\n                return (Icon)iconMap.get(v);\n            } else {\n                return null;\n            }\n        }\n    }\n\n    /**\n     * this class exists only to provide settings to turn on/off shapes and image fill\n     * in this demo.\n     * In a real application, use VertexIconShapeTransformer instead.\n     *\n     */\n    public static class DemoVertexIconShapeTransformer&lt;V&gt; extends VertexIconShapeTransformer&lt;V&gt; {\n\n        boolean shapeImages = true;\n\n        public DemoVertexIconShapeTransformer(Transformer&lt;V,Shape&gt; delegate) {\n            super(delegate);\n        }\n\n        /**\n         * @return Returns the shapeImages.\n         */\n        public boolean isShapeImages() {\n            return shapeImages;\n        }\n\n        /**\n         * @param shapeImages The shapeImages to set.\n         */\n        public void setShapeImages(boolean shapeImages) {\n            shapeMap.clear();\n            this.shapeImages = shapeImages;\n        }\n\n        public Shape transform(V v) {\n            //Icon icon = (Icon) iconMap.get(v);\n\n            Icon icon = new LayeredIcon(new ImageIcon(VertexImageShaperDemo.class.getResource(&quot;/images/Router.png&quot;)).getImage());\n\n            if (icon != null &amp;&amp; icon instanceof ImageIcon) {\n\n                Image image = ((ImageIcon) icon).getImage();\n\n                Shape shape = shapeMap.get(image);\n                if (shape == null) {\n                    if (shapeImages) {\n                        shape = FourPassImageShaper.getShape(image, 30);\n                    }\n                    else {\n                        shape = new Rectangle2D.Float(0, 0, image.getWidth(null), image.getHeight(null));\n                    }\n                    if(shape.getBounds().getWidth() &gt; 0 &amp;&amp;\n                            shape.getBounds().getHeight() &gt; 0) {\n                        int width = image.getWidth(null);\n                        int height = image.getHeight(null);\n                        AffineTransform transform =\n                            AffineTransform.getTranslateInstance(-width / 2, -height / 2);\n                        shape = transform.createTransformedShape(shape);\n                        shapeMap.put(image, shape);\n                    }\n                }\n                return shape;\n            }\n            else {\n                return delegate.transform(v);\n            }\n        }\n    }\n\n    /**\n     * A special renderer that can turn outlines on and off\n     * in this demo.\n     * You won't need this for a real application.\n     * Use BasicVertexRenderer instead\n     *\n     * @author Tom Nelson\n     *\n     */\n    class DemoRenderer&lt;V,E&gt; extends BasicVertexRenderer&lt;V,E&gt; {\n        public void paintIconForVertex(RenderContext&lt;V,E&gt; rc, V v, Layout&lt;V,E&gt; layout) {\n\n            //layout.transform(v).setLocation(mapX.get(v), mapY.get(v));\n            Point2D p = layout.transform(v);\n            p = rc.getMultiLayerTransformer().transform(Layer.LAYOUT, p);\n            //Shape shape = null;\n\n\n            float x = (float)p.getX();\n            float y = (float)p.getY();\n\n            //double x = mapX.get(v);\n            //double y = mapY.get(v);\n\n            GraphicsDecorator g = rc.getGraphicsContext();\n            boolean outlineImages = false;\n            Transformer&lt;V,Icon&gt; vertexIconFunction = rc.getVertexIconTransformer();\n\n            if(vertexIconFunction instanceof DemoVertexIconTransformer) {\n                outlineImages = ((DemoVertexIconTransformer&lt;V&gt;)vertexIconFunction).isOutlineImages();\n            }\n            Icon icon = vertexIconFunction.transform(v);\n            if(icon == null || outlineImages ) {\n\n                if(mapX.isEmpty() &amp;&amp; mapY.isEmpty()){\n                    Shape s = AffineTransform.getTranslateInstance(mapX.get(v),mapY.get(v)).createTransformedShape(rc.getVertexShapeTransformer().transform(v).getBounds2D());\n                    paintShapeForVertex(rc, v, s);\n                }\n                else{\n                    Shape s = AffineTransform.getTranslateInstance(mapX.get(v),mapY.get(v)).createTransformedShape(rc.getVertexShapeTransformer().transform(v).getBounds2D());\n                    paintShapeForVertex(rc, v, s);\n                }\n\n\n\n                /*\n                int xLoc = (int) (x - 50/2);\n                int yLoc = (int) (y - 50/2);\n                shape = new Rectangle (xLoc, yLoc, 50, 50);\n                paintShapeForVertex(rc, v, shape);\n             */\n\n            }\n            if(icon != null) {\n                int xLoc = (int) (mapX.get(v) - icon.getIconWidth()/2);\n                int yLoc = (int) (mapY.get(v) - icon.getIconHeight()/2);\n                icon.paintIcon(rc.getScreenDevice(), g.getDelegate(), xLoc, yLoc);\n            }\n        }\n    }\n\n    /**\n     * A driver for this demo\n     */\n    public static void main(String[] args) {\n        JFrame frame = new JFrame(&quot;Segment routing topology project&quot;);\n        Container content = frame.getContentPane();\n\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n\n        content.add(new VertexImageShaperDemo(frame));\n        frame.pack();\n        frame.setVisible(true);\n    }\n}\n</code></pre>\n"},{"tags":["java","multithreading","daemon"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1634021076,"post_id":69536096,"comment_id":122907456,"body_markdown":"Basically, because the javadoc&#39;s say that.  Why?  Well I imagine that it *might* present implementation difficulties on *some* (possibly hypothetical) platforms if threads could switch between daemon and non-daemon after they were started.  Anyway, the spec says what it says, so the real reason is moot ... for all practical purposes.","body":"Basically, because the javadoc&#39;s say that.  Why?  Well I imagine that it <i>might</i> present implementation difficulties on <i>some</i> (possibly hypothetical) platforms if threads could switch between daemon and non-daemon after they were started.  Anyway, the spec says what it says, so the real reason is moot ... for all practical purposes."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1634021342,"post_id":69536096,"comment_id":122907547,"body_markdown":"Note that the javadocs have said this since the earliest version I can find online; Java 1.1.4.","body":"Note that the javadocs have said this since the earliest version I can find online; Java 1.1.4."}],"answers":[{"tags":[],"owner":{"account_id":22102140,"reputation":501,"user_id":16358429,"display_name":"cynox"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1634023842,"creation_date":1634021408,"answer_id":69536216,"question_id":69536096,"body_markdown":"`setDaemon()` must be called before the Thread started. Have a look at \r\n[https://stackoverflow.com/questions/2213340/what-is-a-daemon-thread-in-java][1] more information about Daemon Threads.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/2213340/what-is-a-daemon-thread-in-java","title":"why we can&#39;t call setDaemon(true) after starting thread?","body":"<p><code>setDaemon()</code> must be called before the Thread started. Have a look at\n<a href=\"https://stackoverflow.com/questions/2213340/what-is-a-daemon-thread-in-java\">What is a daemon thread in Java?</a> more information about Daemon Threads.</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634085086,"creation_date":1634036102,"answer_id":69539307,"question_id":69536096,"body_markdown":"The `Thread` [javadocs][1] clearly state that `setDaemon` must be called before a thread is started&lt;sup&gt;1&lt;/sup&gt;.\r\n\r\nAnd according to my research, the `Thread` javadocs have always stated this.  At least as far back to Java 1.1.4.\r\n\r\n&lt;sup&gt;1 - But interestingly, the [draft javadocs][2] for Loom it states that the behavior of calling `setDaemon` after a thread has terminated is *unspecified*.&lt;/sup&gt;\r\n\r\n------------------\r\n\r\nWhy?  \r\n\r\nOne possible reason is that if a thread&#39;s daemon status can change while it is alive, then it becomes difficult to determine when the JVM should exit.  Consider what might happen when the last non-daemon thread terminates *simultaneously* with a daemon thread setting itself to be non-daemon.  Does the JVM exit, or not?\r\n\r\nIf a running thread&#39;s daemon status can change, there is clearly potential for &quot;races&quot;, and it is unclear how an application would mitigate against them ... unless the Java SE libraries provided some extra (probably complicated) infrastructure to deal with this.\r\n\r\nIf I was the designer for the `Thread` API, I would be asking why would a running thread *need* to switch (or be switched) between daemon and non-daemon state?  I can&#39;t think of a realistic use case; i.e one that is implementing useful behavior, and that can&#39;t be implemented some other way.\r\n\r\n----------------------\r\n\r\nAnyway, the spec says what it says, so the (original) reason for this is moot ... for all practical purposes. \r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Thread.html#setDaemon(boolean)\r\n  [2]: https://download.java.net/java/early_access/loom/docs/api/java.base/java/lang/Thread.html#setDaemon(boolean)","title":"why we can&#39;t call setDaemon(true) after starting thread?","body":"<p>The <code>Thread</code> <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Thread.html#setDaemon(boolean)\" rel=\"nofollow noreferrer\">javadocs</a> clearly state that <code>setDaemon</code> must be called before a thread is started<sup>1</sup>.</p>\n<p>And according to my research, the <code>Thread</code> javadocs have always stated this.  At least as far back to Java 1.1.4.</p>\n<p><sup>1 - But interestingly, the <a href=\"https://download.java.net/java/early_access/loom/docs/api/java.base/java/lang/Thread.html#setDaemon(boolean)\" rel=\"nofollow noreferrer\">draft javadocs</a> for Loom it states that the behavior of calling <code>setDaemon</code> after a thread has terminated is <em>unspecified</em>.</sup></p>\n<hr />\n<p>Why?</p>\n<p>One possible reason is that if a thread's daemon status can change while it is alive, then it becomes difficult to determine when the JVM should exit.  Consider what might happen when the last non-daemon thread terminates <em>simultaneously</em> with a daemon thread setting itself to be non-daemon.  Does the JVM exit, or not?</p>\n<p>If a running thread's daemon status can change, there is clearly potential for &quot;races&quot;, and it is unclear how an application would mitigate against them ... unless the Java SE libraries provided some extra (probably complicated) infrastructure to deal with this.</p>\n<p>If I was the designer for the <code>Thread</code> API, I would be asking why would a running thread <em>need</em> to switch (or be switched) between daemon and non-daemon state?  I can't think of a realistic use case; i.e one that is implementing useful behavior, and that can't be implemented some other way.</p>\n<hr />\n<p>Anyway, the spec says what it says, so the (original) reason for this is moot ... for all practical purposes.</p>\n"}],"owner":{"account_id":16662660,"reputation":127,"user_id":12042237,"display_name":"javaway"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":488,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1634085086,"creation_date":1634020735,"question_id":69536096,"body_markdown":"```\r\npublic class MyThread extends Thread {\r\n\r\n    public void run() {\r\n        System.out.println(&quot;Thread is running&quot;);\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        MyThread t1 = new MyThread();\r\n        t1.start(); \r\n        t1.setDaemon(true); // throw IllegalThreadStateException why ?\r\n    }\r\n}\r\n```","title":"why we can&#39;t call setDaemon(true) after starting thread?","body":"<pre><code>public class MyThread extends Thread {\n\n    public void run() {\n        System.out.println(&quot;Thread is running&quot;);\n    }\n\n    public static void main(String[] args) {\n        MyThread t1 = new MyThread();\n        t1.start(); \n        t1.setDaemon(true); // throw IllegalThreadStateException why ?\n    }\n}\n</code></pre>\n"},{"tags":["java","random","boolean"],"comments":[{"owner":{"account_id":102965,"reputation":415230,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"score":31,"creation_date":1342173598,"post_id":11468221,"comment_id":15140269,"body_markdown":"http://xkcd.com/221/","body":"<a href=\"http://xkcd.com/221/\" rel=\"nofollow noreferrer\">xkcd.com/221</a>"},{"owner":{"account_id":258602,"reputation":20902,"user_id":540873,"display_name":"Thomas Jungblut"},"score":15,"creation_date":1342173739,"post_id":11468221,"comment_id":15140341,"body_markdown":"Why not using `Random r = new Random();\n\t\tr.nextBoolean();`","body":"Why not using <code>Random r = new Random(); \t\tr.nextBoolean();</code>"}],"answers":[{"tags":[],"owner":{"account_id":1428148,"reputation":783,"user_id":1351177,"accept_rate":100,"display_name":"Sagi"},"down_vote_count":0,"up_vote_count":35,"is_accepted":false,"score":35,"last_activity_date":1342173771,"creation_date":1342173771,"answer_id":11468287,"question_id":11468221,"body_markdown":"You could also try `nextBoolean()`-Method&lt;br&gt;&lt;br&gt;\r\nHere is an example: http://www.tutorialspoint.com/java/util/random_nextboolean.htm","title":"Get random boolean in Java","body":"<p>You could also try <code>nextBoolean()</code>-Method<br><br>\nHere is an example: <a href=\"http://www.tutorialspoint.com/java/util/random_nextboolean.htm\">http://www.tutorialspoint.com/java/util/random_nextboolean.htm</a></p>\n"},{"tags":[],"owner":{"account_id":1649969,"reputation":1623,"user_id":1520758,"display_name":"TheNewOne"},"down_vote_count":0,"up_vote_count":48,"is_accepted":false,"score":48,"last_activity_date":1588754720,"creation_date":1342173854,"answer_id":11468318,"question_id":11468221,"body_markdown":"Have you tried looking at the [Java Documentation][1]?\r\n\r\n&gt; Returns the next pseudorandom, uniformly distributed boolean value from this random number generator&#39;s sequence ... the values `true` and `false` are produced with (approximately) equal probability.\r\n\r\n\r\nFor example:\r\n\r\n\r\n\r\n    import java.util.Random;\r\n\r\n    Random random = new Random();\r\n    random.nextBoolean();\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/Random.html#nextBoolean--","title":"Get random boolean in Java","body":"<p>Have you tried looking at the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Random.html#nextBoolean--\" rel=\"noreferrer\">Java Documentation</a>?</p>\n\n<blockquote>\n  <p>Returns the next pseudorandom, uniformly distributed boolean value from this random number generator's sequence ... the values <code>true</code> and <code>false</code> are produced with (approximately) equal probability.</p>\n</blockquote>\n\n<p>For example:</p>\n\n<pre><code>import java.util.Random;\n\nRandom random = new Random();\nrandom.nextBoolean();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":102965,"reputation":415230,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"down_vote_count":1,"up_vote_count":125,"is_accepted":true,"score":124,"last_activity_date":1470649347,"creation_date":1342173891,"answer_id":11468327,"question_id":11468221,"body_markdown":"I recommend using [`Random.nextBoolean()`](https://docs.oracle.com/javase/7/docs/api/java/util/Random.html#nextBoolean%28%29)\r\n\r\nThat being said, `Math.random() &lt; 0.5` as you have used works too. Here&#39;s the behavior on my machine:\r\n\r\n    $ cat myProgram.java \r\n    public class myProgram{\r\n    \r\n       public static boolean getRandomBoolean() {\r\n           return Math.random() &lt; 0.5;\r\n           //I tried another approaches here, still the same result\r\n       }\r\n    \r\n       public static void main(String[] args) {\r\n           System.out.println(getRandomBoolean());  \r\n       }\r\n    }\r\n\r\n    $ javac myProgram.java\r\n    $ java myProgram ; java myProgram; java myProgram; java myProgram\r\n    true\r\n    false\r\n    false\r\n    true\r\n\r\n\r\nNeedless to say, there are **no guarantees** for getting different values each time. In your case however, I suspect that\r\n\r\n A) you&#39;re not working with the code you think you are, (like editing the wrong file)\r\n \r\n B) you havn&#39;t compiled your different attempts when testing, or\r\n\r\n C) you&#39;re working with some non-standard broken implementation.\r\n","title":"Get random boolean in Java","body":"<p>I recommend using <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Random.html#nextBoolean%28%29\" rel=\"noreferrer\"><code>Random.nextBoolean()</code></a></p>\n\n<p>That being said, <code>Math.random() &lt; 0.5</code> as you have used works too. Here's the behavior on my machine:</p>\n\n<pre><code>$ cat myProgram.java \npublic class myProgram{\n\n   public static boolean getRandomBoolean() {\n       return Math.random() &lt; 0.5;\n       //I tried another approaches here, still the same result\n   }\n\n   public static void main(String[] args) {\n       System.out.println(getRandomBoolean());  \n   }\n}\n\n$ javac myProgram.java\n$ java myProgram ; java myProgram; java myProgram; java myProgram\ntrue\nfalse\nfalse\ntrue\n</code></pre>\n\n<p>Needless to say, there are <strong>no guarantees</strong> for getting different values each time. In your case however, I suspect that</p>\n\n<p>A) you're not working with the code you think you are, (like editing the wrong file)</p>\n\n<p>B) you havn't compiled your different attempts when testing, or</p>\n\n<p>C) you're working with some non-standard broken implementation.</p>\n"},{"tags":[],"owner":{"account_id":1596646,"reputation":1936,"user_id":1478601,"accept_rate":67,"display_name":"PoeHaH"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1342173921,"creation_date":1342173921,"answer_id":11468336,"question_id":11468221,"body_markdown":"The easiest way to initialize a random number generator is to use the parameterless constructor, for example\r\n\r\n    Random generator = new Random();\r\n\r\nHowever, in using this constructor you should recognize that algorithmic random number generators are not truly random, they are really algorithms that generate a fixed but random-looking sequence of numbers.\r\n\r\nYou can make it appear more &#39;random&#39; by giving the Random constructor the &#39;seed&#39; parameter, which you can dynamically built by for example using system time in milliseconds (which will always be different)","title":"Get random boolean in Java","body":"<p>The easiest way to initialize a random number generator is to use the parameterless constructor, for example</p>\n\n<pre><code>Random generator = new Random();\n</code></pre>\n\n<p>However, in using this constructor you should recognize that algorithmic random number generators are not truly random, they are really algorithms that generate a fixed but random-looking sequence of numbers.</p>\n\n<p>You can make it appear more 'random' by giving the Random constructor the 'seed' parameter, which you can dynamically built by for example using system time in milliseconds (which will always be different)</p>\n"},{"tags":[],"owner":{"account_id":1513416,"reputation":110,"user_id":1414987,"display_name":"fanf"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1342174148,"creation_date":1342174148,"answer_id":11468405,"question_id":11468221,"body_markdown":"Why not use the [`Random`][1] class, which has a method `nextBoolean`:\r\n\r\n    import java.util.Random;\r\n    \r\n    /** Generate 10 random booleans. */\r\n    public final class MyProgram {\r\n      \r\n      public static final void main(String... args){\r\n        \r\n        Random randomGenerator = new Random();\r\n        for (int idx = 1; idx &lt;= 10; ++idx){\r\n          boolean randomBool = randomGenerator.nextBoolean();\r\n          System.out.println(&quot;Generated : &quot; + randomBool);\r\n        }\r\n      }\r\n    }\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/util/Random.html","title":"Get random boolean in Java","body":"<p>Why not use the <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/Random.html\" rel=\"nofollow\"><code>Random</code></a> class, which has a method <code>nextBoolean</code>:</p>\n\n<pre><code>import java.util.Random;\n\n/** Generate 10 random booleans. */\npublic final class MyProgram {\n\n  public static final void main(String... args){\n\n    Random randomGenerator = new Random();\n    for (int idx = 1; idx &lt;= 10; ++idx){\n      boolean randomBool = randomGenerator.nextBoolean();\n      System.out.println(\"Generated : \" + randomBool);\n    }\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1585670,"reputation":11607,"user_id":1470092,"accept_rate":96,"display_name":"huseyin tugrul buyukisik"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1342175171,"creation_date":1342174467,"answer_id":11468490,"question_id":11468221,"body_markdown":"you could get your clock() value and check if it is odd or even. I dont know if it is %50 of true\r\n\r\nAnd you can custom-create your random function:\r\n\r\n    static double  s=System.nanoTime();//in the instantiating of main applet\r\n\tpublic static double randoom()\r\n\t{\r\n\t\t\r\n\ts=(double)(((555555555* s+ 444444)%100000)/(double)100000);\r\n\t\r\n\t\t\r\n\t\treturn s;\r\n\t}\r\nnumbers 55555.. and 444.. are the big numbers to get a wide range function\r\nplease ignore that skype icon :D","title":"Get random boolean in Java","body":"<p>you could get your clock() value and check if it is odd or even. I dont know if it is %50 of true</p>\n\n<p>And you can custom-create your random function:</p>\n\n<pre><code>static double  s=System.nanoTime();//in the instantiating of main applet\npublic static double randoom()\n{\n\ns=(double)(((555555555* s+ 444444)%100000)/(double)100000);\n\n\n    return s;\n}\n</code></pre>\n\n<p>numbers 55555.. and 444.. are the big numbers to get a wide range function\nplease ignore that skype icon :D</p>\n"},{"tags":[],"owner":{"account_id":5068639,"reputation":11,"user_id":4068076,"display_name":"Angel Fernandez"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1500578355,"creation_date":1500578355,"answer_id":45223513,"question_id":11468221,"body_markdown":"You can also make two random integers and verify if they are the same, this gives you more control over the probabilities.\r\n\r\n    Random rand = new Random();\r\n\r\nDeclare a range to manage random probability.\r\nIn this example, there is a 50% chance of being true.\r\n\r\n    int range = 2;\r\n\r\nGenerate 2 random integers.\r\n\r\n    int a = rand.nextInt(range);\r\n    int b = rand.nextInt(range);\r\n    \r\nThen simply compare return the value.\r\n\r\n    return a == b; \r\n\r\nI also have a class you can use.\r\n[RandomRange.java][1]\r\n\r\n\r\n  [1]: https://github.com/Fethore/Sample-Code/blob/master/RandomRange.java","title":"Get random boolean in Java","body":"<p>You can also make two random integers and verify if they are the same, this gives you more control over the probabilities.</p>\n\n<pre><code>Random rand = new Random();\n</code></pre>\n\n<p>Declare a range to manage random probability.\nIn this example, there is a 50% chance of being true.</p>\n\n<pre><code>int range = 2;\n</code></pre>\n\n<p>Generate 2 random integers.</p>\n\n<pre><code>int a = rand.nextInt(range);\nint b = rand.nextInt(range);\n</code></pre>\n\n<p>Then simply compare return the value.</p>\n\n<pre><code>return a == b; \n</code></pre>\n\n<p>I also have a class you can use.\n<a href=\"https://github.com/Fethore/Sample-Code/blob/master/RandomRange.java\" rel=\"nofollow noreferrer\">RandomRange.java</a></p>\n"},{"tags":[],"owner":{"account_id":1853929,"reputation":6195,"user_id":1679903,"accept_rate":88,"display_name":"kinjelom"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1513644477,"creation_date":1513644477,"answer_id":47878542,"question_id":11468221,"body_markdown":"**Java 8**: Use random generator isolated to the current thread: [ThreadLocalRandom nextBoolean()](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ThreadLocalRandom.html#nextBoolean--)\r\n\r\n&gt; Like the global Random generator used by the Math class, a ThreadLocalRandom is initialized with an internally generated seed that may not otherwise be modified. When applicable, use of ThreadLocalRandom rather than shared Random objects in concurrent programs will typically encounter much less overhead and contention.\r\n\r\n    java.util.concurrent.ThreadLocalRandom.current().nextBoolean();","title":"Get random boolean in Java","body":"<p><strong>Java 8</strong>: Use random generator isolated to the current thread: <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ThreadLocalRandom.html#nextBoolean--\" rel=\"noreferrer\">ThreadLocalRandom nextBoolean()</a></p>\n\n<blockquote>\n  <p>Like the global Random generator used by the Math class, a ThreadLocalRandom is initialized with an internally generated seed that may not otherwise be modified. When applicable, use of ThreadLocalRandom rather than shared Random objects in concurrent programs will typically encounter much less overhead and contention.</p>\n</blockquote>\n\n<pre><code>java.util.concurrent.ThreadLocalRandom.current().nextBoolean();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14893211,"reputation":169,"user_id":10754274,"display_name":"christouandr7"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1554656054,"creation_date":1554655067,"answer_id":55561300,"question_id":11468221,"body_markdown":"You can use the following for an unbiased result:\r\n\r\n    Random random = new Random();\r\n    //For 50% chance of true\r\n    boolean chance50oftrue = (random.nextInt(2) == 0) ? true : false;\r\n\r\n**Note:** random.nextInt(2) means that the number 2 is the bound. the counting starts at 0. So we have 2 possible numbers (0 and 1) and hence the probability is 50%!\r\n\r\nIf you want to give more probability to your result to be true (or false) you can adjust the above as following! \r\n\r\n    Random random = new Random();\r\n    \r\n    //For 50% chance of true\r\n    boolean chance50oftrue = (random.nextInt(2) == 0) ? true : false;\r\n    \r\n    //For 25% chance of true\r\n    boolean chance25oftrue = (random.nextInt(4) == 0) ? true : false;\r\n    \r\n    //For 40% chance of true\r\n    boolean chance40oftrue = (random.nextInt(5) &lt; 2) ? true : false;\r\n","title":"Get random boolean in Java","body":"<p>You can use the following for an unbiased result:</p>\n\n<pre><code>Random random = new Random();\n//For 50% chance of true\nboolean chance50oftrue = (random.nextInt(2) == 0) ? true : false;\n</code></pre>\n\n<p><strong>Note:</strong> random.nextInt(2) means that the number 2 is the bound. the counting starts at 0. So we have 2 possible numbers (0 and 1) and hence the probability is 50%!</p>\n\n<p>If you want to give more probability to your result to be true (or false) you can adjust the above as following! </p>\n\n<pre><code>Random random = new Random();\n\n//For 50% chance of true\nboolean chance50oftrue = (random.nextInt(2) == 0) ? true : false;\n\n//For 25% chance of true\nboolean chance25oftrue = (random.nextInt(4) == 0) ? true : false;\n\n//For 40% chance of true\nboolean chance40oftrue = (random.nextInt(5) &lt; 2) ? true : false;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15570534,"reputation":61,"user_id":11233118,"display_name":"wile the coyote"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1556801758,"creation_date":1556801399,"answer_id":55952871,"question_id":11468221,"body_markdown":"Words in a text are always a source of randomness. Given a certain word, nothing can be inferred about the next word. For each word, we can take the ASCII codes of its letters, add those codes to form a number. The parity of this number is a good candidate for a random boolean.\r\n\r\nPossible drawbacks:\r\n \r\n1. this strategy is based upon using a text file as a source for the words. At some point, \r\nthe end of the file will be reached. However, you can estimate how many times you are expected to call the randomBoolean()\r\nfunction from your app. If you will need to call it about 1 million times, then a text file with 1 million words will be enough. \r\nAs a correction, you can use a stream of data from a live source like an online newspaper.\r\n\r\n2. using some statistical analysis of the common phrases and idioms in a language, one can estimate the next word in a phrase, \r\ngiven the first words of the phrase, with some degree of accuracy. But statistically, these cases are rare, when we can accuratelly \r\npredict the next word. So, in most cases, the next word is independent on the previous words.\r\n\r\n\r\n    package p01;\r\n    \r\n    import java.io.File;\r\n    import java.nio.file.Files;\r\n    import java.nio.file.Paths;\r\n    \r\n    public class Main {\r\n    \t\r\n    \tString words[];\r\n    \tint currentIndex=0;\r\n    \r\n    \tpublic static String readFileAsString()throws Exception \r\n    \t  { \r\n    \t    String data = &quot;&quot;; \r\n    \t    File file = new File(&quot;the_comedy_of_errors&quot;);\r\n    \t    //System.out.println(file.exists());\r\n    \t    data = new String(Files.readAllBytes(Paths.get(file.getName()))); \r\n    \t    return data; \r\n    \t  } \r\n    \t\r\n    \tpublic void init() throws Exception\r\n    \t{\r\n    \t\tString data = readFileAsString(); \r\n    \t\twords = data.split(&quot;\\\\t| |,|\\\\.|&#39;|\\\\r|\\\\n|:&quot;);\r\n    \t}\r\n    \t\r\n    \tpublic String getNextWord() throws Exception\r\n    \t{\r\n    \t\tif(currentIndex&gt;words.length-1)\r\n    \t\t\tthrow new Exception(&quot;out of words; reached end of file&quot;);\r\n    \t\t\r\n    \t\tString currentWord = words[currentIndex];\r\n    \t\tcurrentIndex++;\r\n    \t\t\r\n    \t\twhile(currentWord.isEmpty())\r\n    \t\t{\r\n    \t\t\tcurrentWord = words[currentIndex];\r\n    \t\t\tcurrentIndex++;\r\n    \t\t}\r\n    \r\n    \t\treturn currentWord;\r\n    \t}\r\n    \t\r\n    \tpublic boolean getNextRandom() throws Exception\r\n    \t{\r\n    \t\tString nextWord = getNextWord();\r\n    \t\tint asciiSum = 0;\r\n    \t\t\r\n    \t\tfor (int i = 0; i &lt; nextWord.length(); i++){\r\n    \t\t    char c = nextWord.charAt(i);        \r\n    \t\t    asciiSum = asciiSum + (int) c;\r\n    \t\t}\r\n    \t\t\r\n    \t\tSystem.out.println(nextWord+&quot;-&quot;+asciiSum);\r\n    \t\t\r\n    \t\treturn (asciiSum%2==1) ;\r\n    \t}\r\n    \t\r\n    \tpublic static void main(String args[]) throws Exception\r\n    \t{\r\n    \t\tMain m = new Main();\r\n    \t\tm.init();\r\n    \t\twhile(true)\r\n    \t\t{\r\n    \t\t\tSystem.out.println(m.getNextRandom());\r\n    \t\t\tThread.sleep(100);\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n   \r\n\r\n \r\nIn Eclipse, in the root of my project, there is a file called &#39;the_comedy_of_errors&#39; (no extension) - created with  File&gt; New &gt; File , where I pasted some content from here: http://shakespeare.mit.edu/comedy_errors/comedy_errors.1.1.html \r\n    \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/d1X1y.png","title":"Get random boolean in Java","body":"<p>Words in a text are always a source of randomness. Given a certain word, nothing can be inferred about the next word. For each word, we can take the ASCII codes of its letters, add those codes to form a number. The parity of this number is a good candidate for a random boolean.</p>\n\n<p>Possible drawbacks:</p>\n\n<ol>\n<li><p>this strategy is based upon using a text file as a source for the words. At some point, \nthe end of the file will be reached. However, you can estimate how many times you are expected to call the randomBoolean()\nfunction from your app. If you will need to call it about 1 million times, then a text file with 1 million words will be enough. \nAs a correction, you can use a stream of data from a live source like an online newspaper.</p></li>\n<li><p>using some statistical analysis of the common phrases and idioms in a language, one can estimate the next word in a phrase, \ngiven the first words of the phrase, with some degree of accuracy. But statistically, these cases are rare, when we can accuratelly \npredict the next word. So, in most cases, the next word is independent on the previous words.</p>\n\n<p>package p01;</p>\n\n<p>import java.io.File;\nimport java.nio.file.Files;\nimport java.nio.file.Paths;</p>\n\n<p>public class Main {</p>\n\n<pre><code>String words[];\nint currentIndex=0;\n\npublic static String readFileAsString()throws Exception \n  { \n    String data = \"\"; \n    File file = new File(\"the_comedy_of_errors\");\n    //System.out.println(file.exists());\n    data = new String(Files.readAllBytes(Paths.get(file.getName()))); \n    return data; \n  } \n\npublic void init() throws Exception\n{\n    String data = readFileAsString(); \n    words = data.split(\"\\\\t| |,|\\\\.|'|\\\\r|\\\\n|:\");\n}\n\npublic String getNextWord() throws Exception\n{\n    if(currentIndex&gt;words.length-1)\n        throw new Exception(\"out of words; reached end of file\");\n\n    String currentWord = words[currentIndex];\n    currentIndex++;\n\n    while(currentWord.isEmpty())\n    {\n        currentWord = words[currentIndex];\n        currentIndex++;\n    }\n\n    return currentWord;\n}\n\npublic boolean getNextRandom() throws Exception\n{\n    String nextWord = getNextWord();\n    int asciiSum = 0;\n\n    for (int i = 0; i &lt; nextWord.length(); i++){\n        char c = nextWord.charAt(i);        \n        asciiSum = asciiSum + (int) c;\n    }\n\n    System.out.println(nextWord+\"-\"+asciiSum);\n\n    return (asciiSum%2==1) ;\n}\n\npublic static void main(String args[]) throws Exception\n{\n    Main m = new Main();\n    m.init();\n    while(true)\n    {\n        System.out.println(m.getNextRandom());\n        Thread.sleep(100);\n    }\n}\n</code></pre>\n\n<p>}</p></li>\n</ol>\n\n<p>In Eclipse, in the root of my project, there is a file called 'the_comedy_of_errors' (no extension) - created with  File> New > File , where I pasted some content from here: <a href=\"http://shakespeare.mit.edu/comedy_errors/comedy_errors.1.1.html\" rel=\"nofollow noreferrer\">http://shakespeare.mit.edu/comedy_errors/comedy_errors.1.1.html</a> </p>\n"},{"tags":[],"owner":{"account_id":22762638,"reputation":138,"user_id":16921211,"display_name":"Major_Flux-"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634084486,"creation_date":1634084486,"answer_id":69548325,"question_id":11468221,"body_markdown":"&lt;h1&gt;For a flexible boolean randomizer:&lt;/h1&gt;\r\n\r\n    public static rbin(bias){\r\n        bias = bias || 50;\r\n        return(Math.random() * 100 &lt;= bias);\r\n        /*The bias argument is optional but will allow you to put some weight\r\n          on the TRUE side. The higher the bias number, the more likely it is\r\n          true.*/\r\n    }\r\n\r\n&lt;p&gt;Make sure to use numbers &lt;code&gt;0&lt;/code&gt; - &lt;code&gt;100&lt;/code&gt; or you might lower the bias and get more common &lt;code&gt;false&lt;/code&gt; values.&lt;/p&gt;\r\n&lt;h6&gt;PS: I do not know anything about Java other than it has a few features in common with JavaScript. I used my JavaScript knowledge plus my inferring power to construct this code. Expect my answer to not be functional. Y&#39;all can edit this answer to fix any issues I am not aware of.&lt;/h6&gt;","title":"Get random boolean in Java","body":"<h1>For a flexible boolean randomizer:</h1>\n<pre><code>public static rbin(bias){\n    bias = bias || 50;\n    return(Math.random() * 100 &lt;= bias);\n    /*The bias argument is optional but will allow you to put some weight\n      on the TRUE side. The higher the bias number, the more likely it is\n      true.*/\n}\n</code></pre>\n<p>Make sure to use numbers <code>0</code> - <code>100</code> or you might lower the bias and get more common <code>false</code> values.</p>\n<h6>PS: I do not know anything about Java other than it has a few features in common with JavaScript. I used my JavaScript knowledge plus my inferring power to construct this code. Expect my answer to not be functional. Y'all can edit this answer to fix any issues I am not aware of.</h6>\n"}],"owner":{"account_id":456728,"reputation":14328,"user_id":855636,"accept_rate":94,"display_name":"Pavel Janicek"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":163923,"favorite_count":0,"down_vote_count":1,"up_vote_count":89,"accepted_answer_id":11468327,"answer_count":11,"score":88,"last_activity_date":1634084486,"creation_date":1342173478,"question_id":11468221,"body_markdown":"Okay, I implemented this SO question to my code: https://stackoverflow.com/questions/8878015/return-true-or-false-randomly\r\n\r\nBut, I have strange behavior: I need to run ten instances simultaneously, where every instance returns true or false just once per run. And surprisingly, no matter what I do, every time i get just `false`\r\n\r\nIs there something to improve the method so I can have at least roughly 50% chance to get `true`?\r\n\r\n----\r\nTo make it more understandable: I have my application builded to JAR file which is then run via batch command\r\n\r\n     java -jar my-program.jar\r\n     pause\r\n\r\nContent of the program - to make it as simple as possible:\r\n\r\n\r\n    public class myProgram{\r\n       \r\n        public static boolean getRandomBoolean() {\r\n            return Math.random() &lt; 0.5;\r\n            // I tried another approaches here, still the same result\r\n        }\r\n\r\n        public static void main(String[] args) {\r\n            System.out.println(getRandomBoolean());  \r\n        }\r\n    }\r\n\r\nIf I open 10 command lines and run it, I get `false` as result every time...","title":"Get random boolean in Java","body":"<p>Okay, I implemented this SO question to my code: <a href=\"https://stackoverflow.com/questions/8878015/return-true-or-false-randomly\">Return True or False Randomly</a></p>\n\n<p>But, I have strange behavior: I need to run ten instances simultaneously, where every instance returns true or false just once per run. And surprisingly, no matter what I do, every time i get just <code>false</code></p>\n\n<p>Is there something to improve the method so I can have at least roughly 50% chance to get <code>true</code>?</p>\n\n<hr>\n\n<p>To make it more understandable: I have my application builded to JAR file which is then run via batch command</p>\n\n<pre><code> java -jar my-program.jar\n pause\n</code></pre>\n\n<p>Content of the program - to make it as simple as possible:</p>\n\n<pre><code>public class myProgram{\n\n    public static boolean getRandomBoolean() {\n        return Math.random() &lt; 0.5;\n        // I tried another approaches here, still the same result\n    }\n\n    public static void main(String[] args) {\n        System.out.println(getRandomBoolean());  \n    }\n}\n</code></pre>\n\n<p>If I open 10 command lines and run it, I get <code>false</code> as result every time...</p>\n"},{"tags":["java","spring-boot","junit4"],"comments":[{"owner":{"account_id":11568557,"reputation":1458,"user_id":8475994,"display_name":"athom"},"score":0,"creation_date":1634081680,"post_id":69547880,"comment_id":122929187,"body_markdown":"Don&#39;t mock your cache, it is just a Map. So just removing the @Mock annotation and instantiating with a HashMap should work.\nYou probably should only mock the EmployeeRepository","body":"Don&#39;t mock your cache, it is just a Map. So just removing the @Mock annotation and instantiating with a HashMap should work. You probably should only mock the EmployeeRepository"},{"owner":{"account_id":1223835,"reputation":75858,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1634081787,"post_id":69547880,"comment_id":122929204,"body_markdown":"Also avoid `assertTrue` and `assertFalse` with internal expressions. Normally you&#39;d have something like `assertThat(cache).isNotEmpty()`, which will give you much more helpful debugging in case of a test failure.","body":"Also avoid <code>assertTrue</code> and <code>assertFalse</code> with internal expressions. Normally you&#39;d have something like <code>assertThat(cache).isNotEmpty()</code>, which will give you much more helpful debugging in case of a test failure."},{"owner":{"account_id":556011,"reputation":2421,"user_id":884444,"accept_rate":51,"display_name":"ppb"},"score":0,"creation_date":1634082078,"post_id":69547880,"comment_id":122929250,"body_markdown":"I tried without mocking cache and instantiating with a `HashMap` but then I am getting `NullPointerException` for cache in Service class","body":"I tried without mocking cache and instantiating with a <code>HashMap</code> but then I am getting <code>NullPointerException</code> for cache in Service class"},{"owner":{"account_id":11568557,"reputation":1458,"user_id":8475994,"display_name":"athom"},"score":0,"creation_date":1634082518,"post_id":69547880,"comment_id":122929319,"body_markdown":"Have a look at my answer and see if that resolves your issue","body":"Have a look at my answer and see if that resolves your issue"},{"owner":{"account_id":11568557,"reputation":1458,"user_id":8475994,"display_name":"athom"},"score":0,"creation_date":1634083476,"post_id":69547880,"comment_id":122929461,"body_markdown":"Also updated my answer to show `EmployeeService.loadFromDB();` should be called on the instance so should be `employeeService.loadFromDB();`","body":"Also updated my answer to show <code>EmployeeService.loadFromDB();</code> should be called on the instance so should be <code>employeeService.loadFromDB();</code>"}],"answers":[{"tags":[],"owner":{"account_id":11568557,"reputation":1458,"user_id":8475994,"display_name":"athom"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1634083250,"creation_date":1634082318,"answer_id":69548115,"question_id":69547880,"body_markdown":"From what I can see the minimal change you would need is the following:\r\n\r\n    @Mock\r\n    private EmployeeRepository employeeRepo;\r\n\r\n    private Map&lt;String, Employee&gt; cache = new HashMap&lt;&gt;();\r\n\r\n    private EmployeeService employeeService = new EmployeeService(employeeRepo, cache);\r\n\r\n    @Test\r\n    public void shouldLoadDataFromDBtoCache(){\r\n        when(employeeRepo.findActiveEmployee()).thenReturn(buildDataFromDB());\r\n        employeeService.loadFromDB();\r\n        Assertions.assertFalse(cache.isEmpty());\r\n        //Assertions.assertTrue(cache.containsKey(&quot;1625&quot;));\r\n        //Assertions.assertTrue(cache.containsKey(&quot;1525&quot;));\r\n        //Assertions.assertFalse(cache.containsKey(&quot;1425&quot;));\r\n    }","title":"Hashmap containskey junit in Spring Boot","body":"<p>From what I can see the minimal change you would need is the following:</p>\n<pre><code>@Mock\nprivate EmployeeRepository employeeRepo;\n\nprivate Map&lt;String, Employee&gt; cache = new HashMap&lt;&gt;();\n\nprivate EmployeeService employeeService = new EmployeeService(employeeRepo, cache);\n\n@Test\npublic void shouldLoadDataFromDBtoCache(){\n    when(employeeRepo.findActiveEmployee()).thenReturn(buildDataFromDB());\n    employeeService.loadFromDB();\n    Assertions.assertFalse(cache.isEmpty());\n    //Assertions.assertTrue(cache.containsKey(&quot;1625&quot;));\n    //Assertions.assertTrue(cache.containsKey(&quot;1525&quot;));\n    //Assertions.assertFalse(cache.containsKey(&quot;1425&quot;));\n}\n</code></pre>\n"}],"owner":{"account_id":556011,"reputation":2421,"user_id":884444,"accept_rate":51,"display_name":"ppb"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":516,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69548115,"answer_count":1,"score":0,"last_activity_date":1634083250,"creation_date":1634079653,"question_id":69547880,"body_markdown":"I have below `class`\r\n\r\n     public class EmployeeService{\r\n     \r\n       private final EmployeeRepository employeeRepo;\r\n       private final Map&lt;String, Employee&gt; cache;\r\n\r\n       @Autowired\r\n       public EmployeeService(EmployeeRepository employeeRepo, Map&lt;String, Employee&gt; cache){\r\n         this.employeeRepo = employeeRepo;\r\n         this.cache = cache;\r\n       }\r\n\r\n       public void loadFromDB(){\r\n         //repo call\r\n         cache.put(&quot;123&quot;, {employee object})\r\n       }\r\n     }\r\n\r\nI want to write a junit for this where I need to check that value is inserted into cache. I tried below but there is no value in cache.\r\n\r\n    @Mock\r\n    private EmployeeRepository employeeRepo;\r\n\r\n    @Mock\r\n    private Map&lt;String, Employee&gt; cache;\r\n\r\n    @InjectMocks\r\n    private EmployeeService employeeService;\r\n\r\n    @BeforeEach\r\n    public void setUp() throws Exception {\r\n        MockitoAnnotations.initMocks(this);\r\n        employeeService = new EmployeeService(employeeRepo, cache);\r\n    }\r\n\r\n    @Test\r\n    public void shouldLoadDataFromDBtoCache(){\r\n        when(employeeRepo.findActiveEmployee()).thenReturn(buildDataFromDB());\r\n        EmployeeService.loadFromDB();\r\n        Assertions.assertFalse(cache.isEmpty());\r\n        //Assertions.assertTrue(cache.containsKey(&quot;1625&quot;));\r\n        //Assertions.assertTrue(cache.containsKey(&quot;1525&quot;));\r\n        //Assertions.assertFalse(cache.containsKey(&quot;1425&quot;));\r\n    }\r\n\r\nFor `cache.containsKey()` getting `assertion error` when I check size of the cache map is zero. \r\n\r\n    Assertions.assertFalse(cache.isEmpty()); // this is success.\r\n\r\nHow can I test `hashmap containsKey` as above.","title":"Hashmap containskey junit in Spring Boot","body":"<p>I have below <code>class</code></p>\n<pre><code> public class EmployeeService{\n \n   private final EmployeeRepository employeeRepo;\n   private final Map&lt;String, Employee&gt; cache;\n\n   @Autowired\n   public EmployeeService(EmployeeRepository employeeRepo, Map&lt;String, Employee&gt; cache){\n     this.employeeRepo = employeeRepo;\n     this.cache = cache;\n   }\n\n   public void loadFromDB(){\n     //repo call\n     cache.put(&quot;123&quot;, {employee object})\n   }\n }\n</code></pre>\n<p>I want to write a junit for this where I need to check that value is inserted into cache. I tried below but there is no value in cache.</p>\n<pre><code>@Mock\nprivate EmployeeRepository employeeRepo;\n\n@Mock\nprivate Map&lt;String, Employee&gt; cache;\n\n@InjectMocks\nprivate EmployeeService employeeService;\n\n@BeforeEach\npublic void setUp() throws Exception {\n    MockitoAnnotations.initMocks(this);\n    employeeService = new EmployeeService(employeeRepo, cache);\n}\n\n@Test\npublic void shouldLoadDataFromDBtoCache(){\n    when(employeeRepo.findActiveEmployee()).thenReturn(buildDataFromDB());\n    EmployeeService.loadFromDB();\n    Assertions.assertFalse(cache.isEmpty());\n    //Assertions.assertTrue(cache.containsKey(&quot;1625&quot;));\n    //Assertions.assertTrue(cache.containsKey(&quot;1525&quot;));\n    //Assertions.assertFalse(cache.containsKey(&quot;1425&quot;));\n}\n</code></pre>\n<p>For <code>cache.containsKey()</code> getting <code>assertion error</code> when I check size of the cache map is zero.</p>\n<pre><code>Assertions.assertFalse(cache.isEmpty()); // this is success.\n</code></pre>\n<p>How can I test <code>hashmap containsKey</code> as above.</p>\n"},{"tags":["java","sql","spring","postgresql","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":18586978,"reputation":2220,"user_id":15000097,"display_name":"Georgii Lvov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1633945814,"creation_date":1633945814,"answer_id":69524236,"question_id":69523151,"body_markdown":"Try so: \r\n\r\n\r\n    public interface OrderRepository extends CrudRepository&lt;Orders, Long&gt; {\r\n\r\n        @Modifying\r\n        @Transactional\r\n        @Query(value = &quot;DELETE FROM orders WHERE created_at &lt; now() - interval &#39;1 hour&#39;&quot;,\r\n            nativeQuery = true)\r\n        void executeDelete();\r\n    }","title":"Caused by: org.postgresql.util.PSQLException: ERROR: syntax error at or near &quot;:&quot;","body":"<p>Try so:</p>\n<pre><code>public interface OrderRepository extends CrudRepository&lt;Orders, Long&gt; {\n\n    @Modifying\n    @Transactional\n    @Query(value = &quot;DELETE FROM orders WHERE created_at &lt; now() - interval '1 hour'&quot;,\n        nativeQuery = true)\n    void executeDelete();\n}\n</code></pre>\n"}],"owner":{"account_id":1344997,"reputation":1348,"user_id":1285928,"accept_rate":56,"display_name":"user1285928"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":525,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69524236,"answer_count":1,"score":0,"last_activity_date":1634082419,"creation_date":1633940889,"question_id":69523151,"body_markdown":"I&#39;m trying to execute SQL query from Spring repository:\r\n\r\n    @Repository\r\n    public interface OrderRepository extends CrudRepository&lt;Orders, Long&gt; {\r\n        @Modifying\r\n        @Transactional\r\n        @Query(value = &quot;DELETE FROM orders WHERE created_at &lt; now()-&#39;1 hour&#39;::interval&quot;,\r\n            nativeQuery = true)\r\n        void executeDelete();\r\n    }\r\n\r\nFrom PGAdmin I can successfully run the query:\r\n\r\n    test&gt; DELETE FROM orders WHERE created_at &lt; now()-&#39;1 hour&#39;::interval\r\n    2[2021-10-07 13:41:38] completed in 48 ms\r\n\r\nBut when I run the code I get:\r\n\r\n    Caused by: org.hibernate.exception.SQLGrammarException: could not execute statement\r\n    \tat org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:103)\r\n    \tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)\r\n    \tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)\r\n    \tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)\r\n    \tat org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\r\n    \tat org.hibernate.engine.query.spi.NativeSQLQueryPlan.performExecuteUpdate(NativeSQLQueryPlan.java:107)\r\n    \tat org.hibernate.internal.SessionImpl.executeNativeUpdate(SessionImpl.java:1509)\r\n    \tat org.hibernate.query.internal.NativeQueryImpl.doExecuteUpdate(NativeQueryImpl.java:298)\r\n    \tat org.hibernate.query.internal.AbstractProducedQuery.executeUpdate(AbstractProducedQuery.java:1672)\r\n    \tat org.springframework.data.jpa.repository.query.JpaQueryExecution$ModifyingExecution.doExecute(JpaQueryExecution.java:239)\r\n    \tat org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:88)\r\n    \tat org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:155)\r\n    \tat org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:143)\r\n    \tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)\r\n    \tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)\r\n    \tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:152)\r\n    \tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:131)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    \tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n    \tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n    \tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    \tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)\r\n    \t... 31 common frames omitted\r\n    Caused by: org.postgresql.util.PSQLException: ERROR: syntax error at or near &quot;:&quot;\r\n      Position: 76\r\n\r\nDo you know how I can properly implement this SQL query?\r\n","title":"Caused by: org.postgresql.util.PSQLException: ERROR: syntax error at or near &quot;:&quot;","body":"<p>I'm trying to execute SQL query from Spring repository:</p>\n<pre><code>@Repository\npublic interface OrderRepository extends CrudRepository&lt;Orders, Long&gt; {\n    @Modifying\n    @Transactional\n    @Query(value = &quot;DELETE FROM orders WHERE created_at &lt; now()-'1 hour'::interval&quot;,\n        nativeQuery = true)\n    void executeDelete();\n}\n</code></pre>\n<p>From PGAdmin I can successfully run the query:</p>\n<pre><code>test&gt; DELETE FROM orders WHERE created_at &lt; now()-'1 hour'::interval\n2[2021-10-07 13:41:38] completed in 48 ms\n</code></pre>\n<p>But when I run the code I get:</p>\n<pre><code>Caused by: org.hibernate.exception.SQLGrammarException: could not execute statement\n    at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:103)\n    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)\n    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)\n    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)\n    at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200)\n    at org.hibernate.engine.query.spi.NativeSQLQueryPlan.performExecuteUpdate(NativeSQLQueryPlan.java:107)\n    at org.hibernate.internal.SessionImpl.executeNativeUpdate(SessionImpl.java:1509)\n    at org.hibernate.query.internal.NativeQueryImpl.doExecuteUpdate(NativeQueryImpl.java:298)\n    at org.hibernate.query.internal.AbstractProducedQuery.executeUpdate(AbstractProducedQuery.java:1672)\n    at org.springframework.data.jpa.repository.query.JpaQueryExecution$ModifyingExecution.doExecute(JpaQueryExecution.java:239)\n    at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:88)\n    at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:155)\n    at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:143)\n    at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)\n    at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:152)\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:131)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)\n    ... 31 common frames omitted\nCaused by: org.postgresql.util.PSQLException: ERROR: syntax error at or near &quot;:&quot;\n  Position: 76\n</code></pre>\n<p>Do you know how I can properly implement this SQL query?</p>\n"},{"tags":["java","h2"],"comments":[{"owner":{"account_id":1107482,"reputation":2870,"user_id":1098603,"accept_rate":94,"display_name":"Matthieu"},"score":0,"creation_date":1635313695,"post_id":69544607,"comment_id":123260498,"body_markdown":"Careful that `-cp h2*.jar` will be expanded by the shell with space separating all jar files, when java requires `:` (`;` on Windows). It will work *only* when a single jar matches that pattern.","body":"Careful that <code>-cp h2*.jar</code> will be expanded by the shell with space separating all jar files, when java requires <code>:</code> (<code>;</code> on Windows). It will work <i>only</i> when a single jar matches that pattern."}],"answers":[{"tags":[],"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1634082418,"creation_date":1634060583,"answer_id":69544862,"question_id":69544607,"body_markdown":"The server&#39;s help option may offer some guidance:\r\n\r\n     java -cp h2.jar org.h2.tools.Server -?\r\n\r\nThe output includes this:\r\n\r\n    Starts the H2 Console (web-) server, TCP, and PG server.\r\n    Usage: java org.h2.tools.Server &lt;options&gt;\r\n    When running without options, -tcp, -web, -browser and -pg are started.\r\n    \r\n\r\nThe solution is to start the TCP server explicitly:\r\n\r\n    java -cp h2.jar org.h2.tools.Server -tcp -tcpPort 9092\r\n\r\n\r\n","title":"How to start H2 database command line without PG server and Web Console?","body":"<p>The server's help option may offer some guidance:</p>\n<pre><code> java -cp h2.jar org.h2.tools.Server -?\n</code></pre>\n<p>The output includes this:</p>\n<pre><code>Starts the H2 Console (web-) server, TCP, and PG server.\nUsage: java org.h2.tools.Server &lt;options&gt;\nWhen running without options, -tcp, -web, -browser and -pg are started.\n\n</code></pre>\n<p>The solution is to start the TCP server explicitly:</p>\n<pre><code>java -cp h2.jar org.h2.tools.Server -tcp -tcpPort 9092\n</code></pre>\n"}],"owner":{"account_id":16203704,"reputation":101,"user_id":12032322,"display_name":"J-Deq87"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1681,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":69544862,"answer_count":1,"score":2,"last_activity_date":1634082418,"creation_date":1634059337,"question_id":69544607,"body_markdown":"I have the H2 database v1.4.199 on an AWS EC2 machine that I want to start in TCP mode via the command line, but it looks like by default the PG server and Web Console also start, which I don&#39;t want.\r\n\r\nI&#39;m using a very basic command to set the port. Here&#39;s the command and output:\r\n```\r\n$ java -cp h2*.jar org.h2.tools.Server -tcpPort 9092\r\nTCP server running at tcp://10.1.64.202:9092 (only local connections)\r\nPG server running at pg://10.1.64.202:5435 (only local connections)\r\nWeb Console server running at http://10.1.64.202:8082 (others can connect)\r\nFailed to start a browser to open the URL http://10.1.64.202:8082: Browser detection failed, and java property &#39;h2.browser&#39; and environment variable BROWSER are not set to a browser executable.\r\n```\r\n\r\nYou can see the PG Server and Console Server are up, but I thought the PG Server and Web Console were something you had to _explicitly_ enable? I also do _not_ want outside connections to this H2 (my Java app is on the same EC2), so seeing that the console is configured so &quot;others can connect&quot; in the output is a bit concerning.\r\n\r\nWhat&#39;s the right way to startup H2 to make this more restricted and safer?\r\n\r\nedit: For more context a Java app on the localhost will connect with this code:\r\n```\r\n    String url = &quot;jdbc:h2:tcp://localhost:9092/&quot; + filePath + &quot;;MODE=MYSQL;AUTO_RECONNECT=TRUE;DB_CLOSE_ON_EXIT=FALSE&quot;;\r\n\r\n    return DataSourceBuilder.create()\r\n        .username(&quot;sa&quot;)\r\n        .url(url)\r\n        .driverClassName(org.h2.Driver.class.getName()).build();\r\n```\r\nThe Java app connects just fine, but it shouldn&#39;t need the PG server and web console to make it work.","title":"How to start H2 database command line without PG server and Web Console?","body":"<p>I have the H2 database v1.4.199 on an AWS EC2 machine that I want to start in TCP mode via the command line, but it looks like by default the PG server and Web Console also start, which I don't want.</p>\n<p>I'm using a very basic command to set the port. Here's the command and output:</p>\n<pre><code>$ java -cp h2*.jar org.h2.tools.Server -tcpPort 9092\nTCP server running at tcp://10.1.64.202:9092 (only local connections)\nPG server running at pg://10.1.64.202:5435 (only local connections)\nWeb Console server running at http://10.1.64.202:8082 (others can connect)\nFailed to start a browser to open the URL http://10.1.64.202:8082: Browser detection failed, and java property 'h2.browser' and environment variable BROWSER are not set to a browser executable.\n</code></pre>\n<p>You can see the PG Server and Console Server are up, but I thought the PG Server and Web Console were something you had to <em>explicitly</em> enable? I also do <em>not</em> want outside connections to this H2 (my Java app is on the same EC2), so seeing that the console is configured so &quot;others can connect&quot; in the output is a bit concerning.</p>\n<p>What's the right way to startup H2 to make this more restricted and safer?</p>\n<p>edit: For more context a Java app on the localhost will connect with this code:</p>\n<pre><code>    String url = &quot;jdbc:h2:tcp://localhost:9092/&quot; + filePath + &quot;;MODE=MYSQL;AUTO_RECONNECT=TRUE;DB_CLOSE_ON_EXIT=FALSE&quot;;\n\n    return DataSourceBuilder.create()\n        .username(&quot;sa&quot;)\n        .url(url)\n        .driverClassName(org.h2.Driver.class.getName()).build();\n</code></pre>\n<p>The Java app connects just fine, but it shouldn't need the PG server and web console to make it work.</p>\n"},{"tags":["java","multithreading","javafx"],"comments":[{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":3,"creation_date":1634084163,"post_id":69548047,"comment_id":122929569,"body_markdown":"Just.. don&#39;t. You&#39;re fighting against the API instead of using it as intended. The `start()` method in the one and only application instance that exists is the entry point for the application (it&#39;s the place the application starts). Use it as intended. Don&#39;t define any other class with a `main(String[] args)` method that does anything other than call `Application.launch()`. You could, e.g., define a `StageManager` class that has your list of `Stage`s and is responsible for instantiating them,  but create an instance of that class in `start()` and pass that instance to anyone who needs it.","body":"Just.. don&#39;t. You&#39;re fighting against the API instead of using it as intended. The <code>start()</code> method in the one and only application instance that exists is the entry point for the application (it&#39;s the place the application starts). Use it as intended. Don&#39;t define any other class with a <code>main(String[] args)</code> method that does anything other than call <code>Application.launch()</code>. You could, e.g., define a <code>StageManager</code> class that has your list of <code>Stage</code>s and is responsible for instantiating them,  but create an instance of that class in <code>start()</code> and pass that instance to anyone who needs it."},{"owner":{"account_id":14937373,"reputation":328,"user_id":10901306,"display_name":"Zukaru"},"score":0,"creation_date":1634086011,"post_id":69548047,"comment_id":122929908,"body_markdown":"The original reason I did this because I want to launch the app several times. But since the Application is only allowed to launch once, I use this approach. As for the `main(String[] args)`, I didn&#39;t use it because I will launch the app using other method call as the string arguments barely used.","body":"The original reason I did this because I want to launch the app several times. But since the Application is only allowed to launch once, I use this approach. As for the <code>main(String[] args)</code>, I didn&#39;t use it because I will launch the app using other method call as the string arguments barely used."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":2,"creation_date":1634086069,"post_id":69548047,"comment_id":122929927,"body_markdown":"I want to launch the app several times is an oxymoron. By definition of launch, you can only launch an app once.","body":"I want to launch the app several times is an oxymoron. By definition of launch, you can only launch an app once."},{"owner":{"account_id":14937373,"reputation":328,"user_id":10901306,"display_name":"Zukaru"},"score":0,"creation_date":1634086134,"post_id":69548047,"comment_id":122929935,"body_markdown":"I am clearly aware of that","body":"I am clearly aware of that"},{"owner":{"account_id":14937373,"reputation":328,"user_id":10901306,"display_name":"Zukaru"},"score":0,"creation_date":1634086294,"post_id":69548047,"comment_id":122929972,"body_markdown":"Just by that mean, I want to launch the app by creating multiple threads, if you&#39;re confused by what I said. But it is prevented","body":"Just by that mean, I want to launch the app by creating multiple threads, if you&#39;re confused by what I said. But it is prevented"},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":1,"creation_date":1634086362,"post_id":69548047,"comment_id":122929986,"body_markdown":"Like every UI toolkit, JavaFX enforces that all UI operations run on a single thread.","body":"Like every UI toolkit, JavaFX enforces that all UI operations run on a single thread."},{"owner":{"account_id":14937373,"reputation":328,"user_id":10901306,"display_name":"Zukaru"},"score":0,"creation_date":1634086458,"post_id":69548047,"comment_id":122930004,"body_markdown":"That&#39;s why I create multiple stages. but I am still confused. I will try your suggestion using `StageManager`","body":"That&#39;s why I create multiple stages. but I am still confused. I will try your suggestion using <code>StageManager</code>"},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":2,"creation_date":1634086568,"post_id":69548047,"comment_id":122930022,"body_markdown":"Stages and Threads are two completely different things. Nothing in your post really talks about multithreading (except that you try to create a stage on the main thread, instead of the JavaFX thread).","body":"Stages and Threads are two completely different things. Nothing in your post really talks about multithreading (except that you try to create a stage on the main thread, instead of the JavaFX thread)."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":2,"creation_date":1634087108,"post_id":69548047,"comment_id":122930115,"body_markdown":"I wish there was an option to upvote &quot;Just.. don&#39;t.&quot; ten times.","body":"I wish there was an option to upvote &quot;Just.. don&#39;t.&quot; ten times."},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1634114673,"post_id":69548047,"comment_id":122936548,"body_markdown":"yeah _Just.. don&#39;t_ is THE answer here :) Strongly smells like a xy-problem - what do you __really__ want to achieve?","body":"yeah <i>Just.. don&#39;t</i> is THE answer here :) Strongly smells like a xy-problem - what do you <b>really</b> want to achieve?"},{"owner":{"account_id":14937373,"reputation":328,"user_id":10901306,"display_name":"Zukaru"},"score":0,"creation_date":1634117123,"post_id":69548047,"comment_id":122937488,"body_markdown":"Well guys, it worked anyway using @Geoff answer, so I don&#39;t mind the approach against the API","body":"Well guys, it worked anyway using @Geoff answer, so I don&#39;t mind the approach against the API"}],"answers":[{"tags":[],"owner":{"account_id":13404321,"reputation":438,"user_id":9672799,"display_name":"Geoff"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1634082310,"creation_date":1634081682,"answer_id":69548067,"question_id":69548047,"body_markdown":"You can use `Platform.runLater()` to execute code on the FX application thread.\r\n\r\n```\r\npublic class MainClass {\r\n    public static void main (String[] args) {\r\n        BasicApp app = getInstance();\r\n        Platform.runLater(() -&gt; createStage(&quot;Test&quot;));\r\n    }\r\n}\r\n```","title":"How to dynamically create stage from another class in JavaFX","body":"<p>You can use <code>Platform.runLater()</code> to execute code on the FX application thread.</p>\n<pre><code>public class MainClass {\n    public static void main (String[] args) {\n        BasicApp app = getInstance();\n        Platform.runLater(() -&gt; createStage(&quot;Test&quot;));\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":14937373,"reputation":328,"user_id":10901306,"display_name":"Zukaru"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":325,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":69548067,"answer_count":1,"score":-1,"last_activity_date":1634082310,"creation_date":1634081463,"question_id":69548047,"body_markdown":"Supposedly I have an extended application class to launch from another class\r\n\r\n```\r\npublic class BasicApp extends Application {\r\n    public static CountDownLatch instanceLatch = new CountDownLatch(1);\r\n    public static BasicApp instance;\r\n\r\n    public synchronized static BasicApp getInstance() {\r\n        if(instance == null) {\r\n            try {\r\n                new Thread(() -&gt; Application.launch(BasicApp.class)).start();\r\n                instanceLatch.await();\r\n            } catch (InterruptedException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n        return instance;\r\n    }\r\n\r\n    public BasicApp () {\r\n        instance = this;\r\n        instanceLatch.countDown();\r\n    }\r\n.\r\n.\r\n.\r\n```\r\n\r\nAnd I want to create multiple instances of the same stage from another class, so I might create a list of stage\r\n\r\n```\r\n    private static List&lt;Stage&gt; stages;\r\n\r\n    @Override\r\n    public void start(Stage primaryStage) throws Exception {\r\n        for (Stage st : stages) {\r\n            st.show();\r\n        }\r\n    }\r\n.\r\n.\r\n.\r\n```\r\n\r\nso I define a static method to instantiate the stage from another class\r\n\r\n```\r\n    public static Stage createStage(String data) {\r\n        Stage stage = new Stage();\r\n        Scene scene = new Scene(new Label(data));\r\n        stage.setScene(scene);\r\n\r\n        stages.add(stage);\r\n\r\n        return stage;\r\n    }\r\n}\r\n```\r\n\r\nHowever, when I tried to launch the class and create the stage,\r\n\r\n```\r\npublic class MainClass {\r\n    public static void main (String[] args) {\r\n        BasicApp app = getInstance();\r\n        app.createStage(&quot;Test&quot;);\r\n    }\r\n}\r\n```\r\n\r\nIt threw an exception that says Stage cannot be created outside the FX Application thread.\r\n`java.lang.IllegalStateException: Not on FX application thread;`\r\n\r\nThe app instance has no problem, yet,\r\nHow do I achieve to create the instance of the same stage without getting this error?","title":"How to dynamically create stage from another class in JavaFX","body":"<p>Supposedly I have an extended application class to launch from another class</p>\n<pre><code>public class BasicApp extends Application {\n    public static CountDownLatch instanceLatch = new CountDownLatch(1);\n    public static BasicApp instance;\n\n    public synchronized static BasicApp getInstance() {\n        if(instance == null) {\n            try {\n                new Thread(() -&gt; Application.launch(BasicApp.class)).start();\n                instanceLatch.await();\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n        }\n        return instance;\n    }\n\n    public BasicApp () {\n        instance = this;\n        instanceLatch.countDown();\n    }\n.\n.\n.\n</code></pre>\n<p>And I want to create multiple instances of the same stage from another class, so I might create a list of stage</p>\n<pre><code>    private static List&lt;Stage&gt; stages;\n\n    @Override\n    public void start(Stage primaryStage) throws Exception {\n        for (Stage st : stages) {\n            st.show();\n        }\n    }\n.\n.\n.\n</code></pre>\n<p>so I define a static method to instantiate the stage from another class</p>\n<pre><code>    public static Stage createStage(String data) {\n        Stage stage = new Stage();\n        Scene scene = new Scene(new Label(data));\n        stage.setScene(scene);\n\n        stages.add(stage);\n\n        return stage;\n    }\n}\n</code></pre>\n<p>However, when I tried to launch the class and create the stage,</p>\n<pre><code>public class MainClass {\n    public static void main (String[] args) {\n        BasicApp app = getInstance();\n        app.createStage(&quot;Test&quot;);\n    }\n}\n</code></pre>\n<p>It threw an exception that says Stage cannot be created outside the FX Application thread.\n<code>java.lang.IllegalStateException: Not on FX application thread;</code></p>\n<p>The app instance has no problem, yet,\nHow do I achieve to create the instance of the same stage without getting this error?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1363360,"reputation":3371,"user_id":1300307,"accept_rate":92,"display_name":"Friedrich &#39;Fred&#39; Clausen"},"score":0,"creation_date":1634081989,"post_id":69548077,"comment_id":122929237,"body_markdown":"Ah, it appears that you can list the entries without a valid password. So key there might be a password afternoon","body":"Ah, it appears that you can list the entries without a valid password. So key there might be a password afternoon"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1634083850,"post_id":69548077,"comment_id":122929521,"body_markdown":"The warning means that there *is* a password and you didn&#39;t supply one. You can list entries without a password, and retrieve certificates, but you can&#39;t get private key entries.","body":"The warning means that there <i>is</i> a password and you didn&#39;t supply one. You can list entries without a password, and retrieve certificates, but you can&#39;t get private key entries."},{"owner":{"account_id":1363360,"reputation":3371,"user_id":1300307,"accept_rate":92,"display_name":"Friedrich &#39;Fred&#39; Clausen"},"score":0,"creation_date":1634092155,"post_id":69548077,"comment_id":122930920,"body_markdown":"Ah yeah, after posting this question I have learned that. Feel free to add your comment as a answer.","body":"Ah yeah, after posting this question I have learned that. Feel free to add your comment as a answer."}],"owner":{"account_id":1363360,"reputation":3371,"user_id":1300307,"accept_rate":92,"display_name":"Friedrich &#39;Fred&#39; Clausen"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":635,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1634081751,"creation_date":1634081751,"question_id":69548077,"body_markdown":"JDK: Corretto 1.8\r\n\r\nPlatform: macOS Big Sur\r\n\r\nI am attempting to add an existing keystore without an existing password. For example, I can list as:\r\n\r\n```\r\nkeytool -list  -keystore debug.keystore\r\nEnter keystore password:\r\n\r\n*****************  WARNING WARNING WARNING  *****************\r\n* The integrity of the information stored in your keystore  *\r\n* has NOT been verified!  In order to verify its integrity, *\r\n* you must provide your keystore password.                  *\r\n*****************  WARNING WARNING WARNING  *****************\r\n\r\nKeystore type: PKCS12\r\nKeystore provider: SUN\r\n\r\nYour keystore contains 1 entry\r\n\r\nsomekey, 23/09/2021, PrivateKeyEntry,\r\n```\r\n\r\nHowever, when adding a password, I get\r\n\r\n```\r\nkeytool -storepasswd -keystore debug.keystore\r\nEnter keystore password: &lt;blank password&gt;\r\nKeystore password is too short - must be at least 6 characters\r\n```\r\n\r\nSo it seems, that if there is no initial password, you can&#39;t set one subsequently. Or am I missing something?","title":"Add password to a Java keytool&#39;s keystore that doesn&#39;t have any password","body":"<p>JDK: Corretto 1.8</p>\n<p>Platform: macOS Big Sur</p>\n<p>I am attempting to add an existing keystore without an existing password. For example, I can list as:</p>\n<pre><code>keytool -list  -keystore debug.keystore\nEnter keystore password:\n\n*****************  WARNING WARNING WARNING  *****************\n* The integrity of the information stored in your keystore  *\n* has NOT been verified!  In order to verify its integrity, *\n* you must provide your keystore password.                  *\n*****************  WARNING WARNING WARNING  *****************\n\nKeystore type: PKCS12\nKeystore provider: SUN\n\nYour keystore contains 1 entry\n\nsomekey, 23/09/2021, PrivateKeyEntry,\n</code></pre>\n<p>However, when adding a password, I get</p>\n<pre><code>keytool -storepasswd -keystore debug.keystore\nEnter keystore password: &lt;blank password&gt;\nKeystore password is too short - must be at least 6 characters\n</code></pre>\n<p>So it seems, that if there is no initial password, you can't set one subsequently. Or am I missing something?</p>\n"},{"tags":["java","spring-boot","soap"],"comments":[{"owner":{"account_id":17592368,"reputation":13891,"user_id":12763954,"display_name":"Olivier"},"score":0,"creation_date":1631015994,"post_id":68981846,"comment_id":122104885,"body_markdown":"Why not define a `Ping` method?","body":"Why not define a <code>Ping</code> method?"},{"owner":{"account_id":415808,"reputation":628,"user_id":790832,"accept_rate":67,"display_name":"Dusko"},"score":0,"creation_date":1631105093,"post_id":68981846,"comment_id":122133286,"body_markdown":"@Olivier how would I do that? The think is that as far as I can understand, BODY is non existent in `Ping` and as such I am not sure I can define a Payload that will match void? I mean I tried something along those lines but didn&#39;t work.\nI am looking into implementing some kind of interceptor that will read the whole SOAP message and then if body is empty will take care of handling that, otherwise will pass it on to dispatcher.","body":"@Olivier how would I do that? The think is that as far as I can understand, BODY is non existent in <code>Ping</code> and as such I am not sure I can define a Payload that will match void? I mean I tried something along those lines but didn&#39;t work. I am looking into implementing some kind of interceptor that will read the whole SOAP message and then if body is empty will take care of handling that, otherwise will pass it on to dispatcher."},{"owner":{"account_id":17592368,"reputation":13891,"user_id":12763954,"display_name":"Olivier"},"score":0,"creation_date":1631106136,"post_id":68981846,"comment_id":122133807,"body_markdown":"What I meant is that the request body should not be empty (which is most likely not a valid SOAP request), but should instead call a specific method (`Ping` or whatever name you prefer). If the goal is to test that the service is operational, that&#39;s all you need.","body":"What I meant is that the request body should not be empty (which is most likely not a valid SOAP request), but should instead call a specific method (<code>Ping</code> or whatever name you prefer). If the goal is to test that the service is operational, that&#39;s all you need."},{"owner":{"account_id":415808,"reputation":628,"user_id":790832,"accept_rate":67,"display_name":"Dusko"},"score":0,"creation_date":1631132766,"post_id":68981846,"comment_id":122144554,"body_markdown":"I don&#39;t control the request coming in, I just got the specification and I am not sure how they have set it up since WSDL I got has `Ping` in it as I provided it here. And When I generate `XSD` files from it and use them to build POJOs there is no way the standard Spring Web Services can handle the `Ping` since it&#39;s empty.","body":"I don&#39;t control the request coming in, I just got the specification and I am not sure how they have set it up since WSDL I got has <code>Ping</code> in it as I provided it here. And When I generate <code>XSD</code> files from it and use them to build POJOs there is no way the standard Spring Web Services can handle the <code>Ping</code> since it&#39;s empty."},{"owner":{"account_id":3714309,"reputation":867,"user_id":3090890,"display_name":"Piemol"},"score":0,"creation_date":1631567819,"post_id":68981846,"comment_id":122252527,"body_markdown":"I don&#39;t know anything about Java, Spring or Spring Web Services. Just some thoughts here. If you as server get a SOAP message with an empty body, why not just send back a SOAPFault ? If you test your own webservice, can you handle a valid `Ping` request?","body":"I don&#39;t know anything about Java, Spring or Spring Web Services. Just some thoughts here. If you as server get a SOAP message with an empty body, why not just send back a SOAPFault ? If you test your own webservice, can you handle a valid <code>Ping</code> request?"},{"owner":{"account_id":415808,"reputation":628,"user_id":790832,"accept_rate":67,"display_name":"Dusko"},"score":0,"creation_date":1631661083,"post_id":68981846,"comment_id":122281481,"body_markdown":"@Piemol I tried that, but SOAPFault is not even triggered since it&#39;s not perceived as a SOAP error but that there is no endpoint to handle it. The weird issue is that all SOAP validators show this as valid SOAP. I believe I need to create a custom MessageDispatcher that handles this type of payload.","body":"@Piemol I tried that, but SOAPFault is not even triggered since it&#39;s not perceived as a SOAP error but that there is no endpoint to handle it. The weird issue is that all SOAP validators show this as valid SOAP. I believe I need to create a custom MessageDispatcher that handles this type of payload."},{"owner":{"account_id":3714309,"reputation":867,"user_id":3090890,"display_name":"Piemol"},"score":0,"creation_date":1631689411,"post_id":68981846,"comment_id":122286684,"body_markdown":"@Dusko SOAPFaults may also be triggered on invalid payloads. E.g. the completely misssing payload; invalid `ping` message; other server errors. Maybe this is of any help for you? https://www.javaspringclub.com/spring-soap-web-services-add-soap-fault-exception-handling-part-iii/","body":"@Dusko SOAPFaults may also be triggered on invalid payloads. E.g. the completely misssing payload; invalid <code>ping</code> message; other server errors. Maybe this is of any help for you? <a href=\"https://www.javaspringclub.com/spring-soap-web-services-add-soap-fault-exception-handling-part-iii/\" rel=\"nofollow noreferrer\">javaspringclub.com/&hellip;</a>"},{"owner":{"account_id":415808,"reputation":628,"user_id":790832,"accept_rate":67,"display_name":"Dusko"},"score":0,"creation_date":1631715759,"post_id":68981846,"comment_id":122298089,"body_markdown":"@Piemol that is the tutorial I was following but still this payload is not intercepted. I will go over it again in case I missed something, thanks!","body":"@Piemol that is the tutorial I was following but still this payload is not intercepted. I will go over it again in case I missed something, thanks!"}],"answers":[{"tags":[],"owner":{"account_id":415808,"reputation":628,"user_id":790832,"accept_rate":67,"display_name":"Dusko"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1634081150,"creation_date":1634081150,"answer_id":69548021,"question_id":68981846,"body_markdown":"So, in the end I had to create a custom exception handler. Something like this:\r\n```\r\npublic class CustomEndpointNotFoundException extends Exception {\r\n    public CustomEndpointNotFoundException(String message) {\r\n        super(message);\r\n    }\r\n}\r\n```\r\nthen:\r\n\r\n```\r\n@Component\r\n@Order(Ordered.LOWEST_PRECEDENCE)\r\npublic class NoEndpointFoundEndpointMapping implements EndpointMapping {\r\n    @Override\r\n    public EndpointInvocationChain getEndpoint(MessageContext messageContext) throws Exception {\r\n        throw new CustomEndpointNotFoundException(&quot;&quot;);\r\n    }\r\n}\r\n```\r\n\r\nand finally:\r\n```\r\n@Component\r\npublic class CustomEndpointExceptionResolver implements EndpointExceptionResolver {\r\n    @Override\r\n    public boolean resolveException(MessageContext messageContext, Object endpoint, Exception ex) {\r\n        if (messageIsPing()) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n}\r\n```\r\n\r\nSo basically I am handling it as an error. It&#39;s not really ideal solution IMHO, I will still see if I can intercept the endpoint resolution, or define a default endpoint.","title":"Handling an empty SOAP message","body":"<p>So, in the end I had to create a custom exception handler. Something like this:</p>\n<pre><code>public class CustomEndpointNotFoundException extends Exception {\n    public CustomEndpointNotFoundException(String message) {\n        super(message);\n    }\n}\n</code></pre>\n<p>then:</p>\n<pre><code>@Component\n@Order(Ordered.LOWEST_PRECEDENCE)\npublic class NoEndpointFoundEndpointMapping implements EndpointMapping {\n    @Override\n    public EndpointInvocationChain getEndpoint(MessageContext messageContext) throws Exception {\n        throw new CustomEndpointNotFoundException(&quot;&quot;);\n    }\n}\n</code></pre>\n<p>and finally:</p>\n<pre><code>@Component\npublic class CustomEndpointExceptionResolver implements EndpointExceptionResolver {\n    @Override\n    public boolean resolveException(MessageContext messageContext, Object endpoint, Exception ex) {\n        if (messageIsPing()) {\n            return true;\n        }\n        return false;\n    }\n}\n</code></pre>\n<p>So basically I am handling it as an error. It's not really ideal solution IMHO, I will still see if I can intercept the endpoint resolution, or define a default endpoint.</p>\n"}],"owner":{"account_id":415808,"reputation":628,"user_id":790832,"accept_rate":67,"display_name":"Dusko"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1256,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":69548021,"answer_count":1,"score":2,"last_activity_date":1634081150,"creation_date":1630315974,"question_id":68981846,"body_markdown":"Trying to handle an empty SOAP message with Spring Web Services but failing.\r\n\r\nSo, I have a request to provide an endpoint for a sort of a PING method. Basically the SOAP messages I can handle look like this:\r\n\r\n```\r\n&lt;soapenv:Envelope\r\nxmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;\r\nxmlns:def=&quot;http://www.something.com/edf/services/defaultservice&quot;&gt;\r\n    &lt;soapenv:Header/&gt;\r\n    &lt;soapenv:Body&gt;\r\n        &lt;def:ServiceReqType&gt;\r\n            &lt;transactionId&gt;1111&lt;/transactionId&gt;\r\n            &lt;subscriberId&gt;2222&lt;/subscriberId&gt;\r\n        &lt;/def:ServiceReqType&gt;\r\n    &lt;/soapenv:Body&gt;\r\n&lt;/soapenv:Envelope&gt;\r\n```\r\n\r\nand that I can handle with an endpoint that is handling `ServiceReqType`.\r\n\r\nBut the PING looks like this:\r\n```\r\n&lt;soapenv:Envelope\r\nxmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt;\r\n    &lt;soapenv:Header/&gt;\r\n    &lt;soapenv:Body/&gt;\r\n&lt;/soapenv:Envelope&gt;\r\n```\r\n\r\nThat I can&#39;t handle, Spring logs a `Can&#39;t handle [SaajSoapMessage]`.\r\n\r\nWhat I need to return is the exactly same message.\r\n\r\nI understand there that there is a type/class missing that I would provide to `@PayloadRoot`.\r\n\r\nSo I am wondering what would an endpoint specification be for this empty bodied request?\r\n\r\nJust for reference here is my endpoint for handling the `ServiceReqType`:\r\n```\r\n@PayloadRoot(namespace = NAMESPACE_EDF, localPart = &quot;ServiceReqType&quot;)\r\n@ResponsePayload\r\npublic ServiceRespType serviceResponse(@RequestPayload ServiceReqType request) {\r\n        LOGGER.debug(&quot;-----&gt; ServiceReqType:{}&quot;, request);\r\n        return reqProcessor.process(request);\r\n}\r\n```\r\n\r\n**UPDATE 1:**\r\n\r\nSo I tried with implementing the interceptor in the following way:\r\n\r\n```\r\npublic class CustomEndpointInterceptor implements EndpointInterceptor {\r\n    private static final Logger LOGGER = LoggerFactory.getLogger(CustomEndpointInterceptor.class);\r\n\r\n    @Override\r\n    public boolean handleRequest(MessageContext messageContext, Object endpoint) throws Exception {\r\n        LOGGER.info(&quot;---&gt; Message context: {}&quot;, messageContext.toString());\r\n        LOGGER.info(&quot;---&gt; Message endpoint: {}&quot;, endpoint.toString());\r\n        return false;\r\n    }\r\n\r\n    @Override\r\n    public boolean handleResponse(MessageContext messageContext, Object endpoint) throws Exception {\r\n        LOGGER.info(&quot;handleResponse&quot;);\r\n        return false;\r\n    }\r\n\r\n    @Override\r\n    public boolean handleFault(MessageContext messageContext, Object endpoint) throws Exception {\r\n        LOGGER.info(&quot;handleFault&quot;);\r\n        return false;\r\n    }\r\n\r\n    @Override\r\n    public void afterCompletion(MessageContext messageContext, Object endpoint, Exception ex) throws Exception {\r\n        LOGGER.info(&quot;afterCompletion&quot;);\r\n    }\r\n}\r\n```\r\n\r\nand then in the `WebServiceConfiguration` class I added this:\r\n\r\n```\r\n@Override\r\npublic void addInterceptors(List&lt;EndpointInterceptor&gt; interceptors) {\r\n    interceptors.add(new CustomEndpointInterceptor());\r\n    super.addInterceptors(interceptors);\r\n}\r\n```\r\n\r\nBut it still does not work. What I get is that the interceptor is called when SOAP message has a BODY but when it is sent a `Ping` that is BODYless then I get again the same error message and interceptor is not called. So it seems I must find an interceptor that is further up the chain...\r\n\r\n**UPDATE 2:**\r\n\r\nHere is how WSDL file looks like for this Ping...\r\n```\r\n&lt;message name=&quot;PingRequest&quot;/&gt;\r\n\r\n&lt;message name=&quot;PingResponse&quot;/&gt;\r\n```\r\n\r\nThere is nothing as a part inside of these...\r\n\r\nFor comparison this is how `ServiceReqType` looks:\r\n```\r\n&lt;message name=&quot;ServiceReqType&quot;&gt;\r\n  &lt;part name=&quot;body&quot; element=&quot;tns:ServiceReqTypeDefinition&quot;/&gt;\r\n&lt;/message&gt;\r\n```\r\nand then the `ServiceReqTypeDefinition` is defined in an accompanying `xsd` file.\r\n\r\n**UPDATE 3:**\r\n\r\nSo, found the reason why interceptors won&#39;t work on this type of message :-/\r\n\r\nBelow code is from `MessageDispatcher` line 234.\r\n\r\n```\r\n// No triggering of interceptors if no endpoint is found\r\nif (endpointNotFoundLogger.isWarnEnabled()) {\r\n  endpointNotFoundLogger.warn(&quot;No endpoint mapping found for [&quot; + messageContext.getRequest() + &quot;]&quot;);\r\n}\r\nthrow ex;\r\n```\r\n\r\nSo it&#39;s on purpose, now I need to find how to handle these incomplete or incorrect SOAP messages... any ideas because rewriting `Dispatcher` doesn&#39;t feel like the right way.\r\n\r\n**UPDATE 4**\r\n\r\nSo, I managed to intercept the payload, the one that is invalid, by extending `AbstractEndpointMapping` class and then overriding `getInternalEndpoint` gives me the possibility to evaluate the message and see if it is this empty Ping request I have been trying to process.\r\n\r\nI think this would all be easily solved if I knew how to define a `defaultEndpoint` because I see that in case SOAP message is not recognised, so no endpoint mapping is found, this `defaultEndpoint` is used to handle that message.\r\n\r\nI noticed that when working with XML specification of `Beans` then there is a property to define the endpoint as a default one, but how to do it when using annotations?\r\n\r\nAnother way is to just create an endpoint and then return it from `getInternalEndpoint` so spring can handle processing, I guess, but I don&#39;t know yet how to create an endpoint object... working on that now.\r\n\r\np.s. [This][1] documentation mentions `defaultEndpoint` but not how to set it up in a non XML defining Bean way.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-ws/docs/2.4.7.RELEASE/reference/#server-endpoint-mapping","title":"Handling an empty SOAP message","body":"<p>Trying to handle an empty SOAP message with Spring Web Services but failing.</p>\n<p>So, I have a request to provide an endpoint for a sort of a PING method. Basically the SOAP messages I can handle look like this:</p>\n<pre><code>&lt;soapenv:Envelope\nxmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;\nxmlns:def=&quot;http://www.something.com/edf/services/defaultservice&quot;&gt;\n    &lt;soapenv:Header/&gt;\n    &lt;soapenv:Body&gt;\n        &lt;def:ServiceReqType&gt;\n            &lt;transactionId&gt;1111&lt;/transactionId&gt;\n            &lt;subscriberId&gt;2222&lt;/subscriberId&gt;\n        &lt;/def:ServiceReqType&gt;\n    &lt;/soapenv:Body&gt;\n&lt;/soapenv:Envelope&gt;\n</code></pre>\n<p>and that I can handle with an endpoint that is handling <code>ServiceReqType</code>.</p>\n<p>But the PING looks like this:</p>\n<pre><code>&lt;soapenv:Envelope\nxmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&gt;\n    &lt;soapenv:Header/&gt;\n    &lt;soapenv:Body/&gt;\n&lt;/soapenv:Envelope&gt;\n</code></pre>\n<p>That I can't handle, Spring logs a <code>Can't handle [SaajSoapMessage]</code>.</p>\n<p>What I need to return is the exactly same message.</p>\n<p>I understand there that there is a type/class missing that I would provide to <code>@PayloadRoot</code>.</p>\n<p>So I am wondering what would an endpoint specification be for this empty bodied request?</p>\n<p>Just for reference here is my endpoint for handling the <code>ServiceReqType</code>:</p>\n<pre><code>@PayloadRoot(namespace = NAMESPACE_EDF, localPart = &quot;ServiceReqType&quot;)\n@ResponsePayload\npublic ServiceRespType serviceResponse(@RequestPayload ServiceReqType request) {\n        LOGGER.debug(&quot;-----&gt; ServiceReqType:{}&quot;, request);\n        return reqProcessor.process(request);\n}\n</code></pre>\n<p><strong>UPDATE 1:</strong></p>\n<p>So I tried with implementing the interceptor in the following way:</p>\n<pre><code>public class CustomEndpointInterceptor implements EndpointInterceptor {\n    private static final Logger LOGGER = LoggerFactory.getLogger(CustomEndpointInterceptor.class);\n\n    @Override\n    public boolean handleRequest(MessageContext messageContext, Object endpoint) throws Exception {\n        LOGGER.info(&quot;---&gt; Message context: {}&quot;, messageContext.toString());\n        LOGGER.info(&quot;---&gt; Message endpoint: {}&quot;, endpoint.toString());\n        return false;\n    }\n\n    @Override\n    public boolean handleResponse(MessageContext messageContext, Object endpoint) throws Exception {\n        LOGGER.info(&quot;handleResponse&quot;);\n        return false;\n    }\n\n    @Override\n    public boolean handleFault(MessageContext messageContext, Object endpoint) throws Exception {\n        LOGGER.info(&quot;handleFault&quot;);\n        return false;\n    }\n\n    @Override\n    public void afterCompletion(MessageContext messageContext, Object endpoint, Exception ex) throws Exception {\n        LOGGER.info(&quot;afterCompletion&quot;);\n    }\n}\n</code></pre>\n<p>and then in the <code>WebServiceConfiguration</code> class I added this:</p>\n<pre><code>@Override\npublic void addInterceptors(List&lt;EndpointInterceptor&gt; interceptors) {\n    interceptors.add(new CustomEndpointInterceptor());\n    super.addInterceptors(interceptors);\n}\n</code></pre>\n<p>But it still does not work. What I get is that the interceptor is called when SOAP message has a BODY but when it is sent a <code>Ping</code> that is BODYless then I get again the same error message and interceptor is not called. So it seems I must find an interceptor that is further up the chain...</p>\n<p><strong>UPDATE 2:</strong></p>\n<p>Here is how WSDL file looks like for this Ping...</p>\n<pre><code>&lt;message name=&quot;PingRequest&quot;/&gt;\n\n&lt;message name=&quot;PingResponse&quot;/&gt;\n</code></pre>\n<p>There is nothing as a part inside of these...</p>\n<p>For comparison this is how <code>ServiceReqType</code> looks:</p>\n<pre><code>&lt;message name=&quot;ServiceReqType&quot;&gt;\n  &lt;part name=&quot;body&quot; element=&quot;tns:ServiceReqTypeDefinition&quot;/&gt;\n&lt;/message&gt;\n</code></pre>\n<p>and then the <code>ServiceReqTypeDefinition</code> is defined in an accompanying <code>xsd</code> file.</p>\n<p><strong>UPDATE 3:</strong></p>\n<p>So, found the reason why interceptors won't work on this type of message :-/</p>\n<p>Below code is from <code>MessageDispatcher</code> line 234.</p>\n<pre><code>// No triggering of interceptors if no endpoint is found\nif (endpointNotFoundLogger.isWarnEnabled()) {\n  endpointNotFoundLogger.warn(&quot;No endpoint mapping found for [&quot; + messageContext.getRequest() + &quot;]&quot;);\n}\nthrow ex;\n</code></pre>\n<p>So it's on purpose, now I need to find how to handle these incomplete or incorrect SOAP messages... any ideas because rewriting <code>Dispatcher</code> doesn't feel like the right way.</p>\n<p><strong>UPDATE 4</strong></p>\n<p>So, I managed to intercept the payload, the one that is invalid, by extending <code>AbstractEndpointMapping</code> class and then overriding <code>getInternalEndpoint</code> gives me the possibility to evaluate the message and see if it is this empty Ping request I have been trying to process.</p>\n<p>I think this would all be easily solved if I knew how to define a <code>defaultEndpoint</code> because I see that in case SOAP message is not recognised, so no endpoint mapping is found, this <code>defaultEndpoint</code> is used to handle that message.</p>\n<p>I noticed that when working with XML specification of <code>Beans</code> then there is a property to define the endpoint as a default one, but how to do it when using annotations?</p>\n<p>Another way is to just create an endpoint and then return it from <code>getInternalEndpoint</code> so spring can handle processing, I guess, but I don't know yet how to create an endpoint object... working on that now.</p>\n<p>p.s. <a href=\"https://docs.spring.io/spring-ws/docs/2.4.7.RELEASE/reference/#server-endpoint-mapping\" rel=\"nofollow noreferrer\">This</a> documentation mentions <code>defaultEndpoint</code> but not how to set it up in a non XML defining Bean way.</p>\n"},{"tags":["java","spring-boot","spring-ws"],"answers":[{"tags":[],"owner":{"account_id":14729494,"reputation":404,"user_id":10637296,"display_name":"Sujit"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1547652337,"creation_date":1547652337,"answer_id":54220292,"question_id":54218302,"body_markdown":"You can try the following to create a fallback method for all request\r\n\r\n    @RequestMapping(value = &quot;*&quot;, method = RequestMethod.GET)\r\n    @ResponseBody\r\n    public String getFallback() {\r\n        return &quot;Fallback for GET Requests&quot;;\r\n    }\r\nYou can get more information here https://www.baeldung.com/spring-requestmapping","title":"how to Add a DefaultEndpoint if No endpoint mapping is found","body":"<p>You can try the following to create a fallback method for all request</p>\n\n<pre><code>@RequestMapping(value = \"*\", method = RequestMethod.GET)\n@ResponseBody\npublic String getFallback() {\n    return \"Fallback for GET Requests\";\n}\n</code></pre>\n\n<p>You can get more information here <a href=\"https://www.baeldung.com/spring-requestmapping\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-requestmapping</a></p>\n"}],"owner":{"account_id":10370819,"reputation":41,"user_id":7648563,"display_name":"Anil"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":471,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1634081049,"creation_date":1547645906,"question_id":54218302,"body_markdown":"In my Spring boot app replacing a legacy, i have defined a webservice EndPoint.\r\nsoem of the user today comes in with payload that does nothave the namespace URI. \r\nsince namespace is not there, Spring throws  No Endpoint mapping found error.\r\n\r\nIs there a way i can add a default Endpoint so that it will get invoked if no mapping is found.\r\n\r\nThanks\r\n\r\n","title":"how to Add a DefaultEndpoint if No endpoint mapping is found","body":"<p>In my Spring boot app replacing a legacy, i have defined a webservice EndPoint.\nsoem of the user today comes in with payload that does nothave the namespace URI. \nsince namespace is not there, Spring throws  No Endpoint mapping found error.</p>\n\n<p>Is there a way i can add a default Endpoint so that it will get invoked if no mapping is found.</p>\n\n<p>Thanks</p>\n"},{"tags":["java","code-cleanup","legacy-code"],"comments":[{"owner":{"account_id":12601494,"reputation":4078,"user_id":9164071,"display_name":"Themelis"},"score":0,"creation_date":1585827692,"post_id":60990621,"comment_id":107902874,"body_markdown":"I believe Test Driven Development as the name implies is a discipline to use to develop software. You can refactor and unit test your code without TDD.","body":"I believe Test Driven Development as the name implies is a discipline to use to develop software. You can refactor and unit test your code without TDD."},{"owner":{"account_id":2491469,"reputation":5702,"user_id":2585090,"accept_rate":83,"display_name":"Complexity"},"score":0,"creation_date":1585827765,"post_id":60990621,"comment_id":107902914,"body_markdown":"So how am I able to refactor this, and ensure that I&#39;m not breaking anything?","body":"So how am I able to refactor this, and ensure that I&#39;m not breaking anything?"}],"answers":[{"tags":[],"owner":{"account_id":8897,"reputation":11209,"user_id":16206,"accept_rate":78,"display_name":"borjab"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1585833121,"creation_date":1585827956,"answer_id":60990830,"question_id":60990621,"body_markdown":"You can:\r\n\r\n 1. Create the new method as static\r\n 2. Create a temporal alternative constructor commented as &quot;Only for testing&quot;\r\n 3. Refactor the class to remove the dependency\r\n 4. Suppress it with [PowerMock][1]\r\n\r\n  \r\n\r\nBut the safest way to do it is to create an scaffold test. This build the class even if the constructor has dependencies. You may need to break the encapslation with setters just for testing. Once the class is really well tested you may refactor the class, add better tests and finally remove the dirty scaffold test. Depending on the complexity of the class this may be appropiate or an overkill.\r\n\r\n\r\n  [1]: https://github.com/powermock/powermock/wiki/Suppress-Unwanted-Behavior","title":"Advice needed for refactoring legacy code","body":"<p>You can:</p>\n\n<ol>\n<li>Create the new method as static</li>\n<li>Create a temporal alternative constructor commented as \"Only for testing\"</li>\n<li>Refactor the class to remove the dependency</li>\n<li>Suppress it with <a href=\"https://github.com/powermock/powermock/wiki/Suppress-Unwanted-Behavior\" rel=\"nofollow noreferrer\">PowerMock</a></li>\n</ol>\n\n<p>But the safest way to do it is to create an scaffold test. This build the class even if the constructor has dependencies. You may need to break the encapslation with setters just for testing. Once the class is really well tested you may refactor the class, add better tests and finally remove the dirty scaffold test. Depending on the complexity of the class this may be appropiate or an overkill.</p>\n"},{"tags":[],"owner":{"account_id":2422021,"reputation":2923,"user_id":2114786,"accept_rate":43,"display_name":"O.Badr"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634080871,"creation_date":1634080871,"answer_id":69547988,"question_id":60990621,"body_markdown":"You can create a new **protected** or **package-private** static method `add` with an extra `Calculator` parameter (at least for now, until the class can be easily instantiated), and create your test using [Mockito][1]:\r\n\r\n\r\n    class Calculator extends CalculatorBase {\r\n\r\n        private final int limit = 100; // to show that we need an instance state in add method \r\n    \r\n        ....\r\n    \r\n        public int add(int left, int right) {\r\n            return add(this, left, right);\r\n        }\r\n    \r\n        static int add (Calculator calculator, int left, int right) {\r\n            return Math.min(left + right, calculator.getLimit());\r\n        }\r\n    \r\n        public int getLimit() {\r\n            return limit;\r\n        }\r\n    }\r\n\r\nAnd the test becomes:\r\n\r\n        @Test\r\n        @DisplayName(&quot;Ensure that adding numbers DOES work correctly.&quot;)\r\n        void addition() throws Exception {\r\n            // ARRANGE.\r\n            Calculator calculator = Mockito.mock(Calculator.class);\r\n    \r\n            Mockito.when(calculator.getLimit()).thenReturn(100);\r\n    \r\n            // ACT.\r\n            int result = Calculator.add(calculator, 1, 1);\r\n    \r\n            // ASSERT.\r\n            Assertions.assertEquals(3, result);\r\n        }\r\n\r\nBut in this case, I prefer to create a new Class called `ArithmeticCalculator` with a simple constructor and use it inside the `Calculator` class (Aka [composition][2]), then redirect the arithmetic operations to it, so it will help for a better testing and it may promote a [Single Responsibility Principle][3].\r\n\r\n\r\n  [1]: https://github.com/mockito/mockito\r\n  [2]: https://en.wikipedia.org/wiki/Composition_over_inheritance\r\n  [3]: https://en.wikipedia.org/wiki/Single-responsibility_principle","title":"Advice needed for refactoring legacy code","body":"<p>You can create a new <strong>protected</strong> or <strong>package-private</strong> static method <code>add</code> with an extra <code>Calculator</code> parameter (at least for now, until the class can be easily instantiated), and create your test using <a href=\"https://github.com/mockito/mockito\" rel=\"nofollow noreferrer\">Mockito</a>:</p>\n<pre><code>class Calculator extends CalculatorBase {\n\n    private final int limit = 100; // to show that we need an instance state in add method \n\n    ....\n\n    public int add(int left, int right) {\n        return add(this, left, right);\n    }\n\n    static int add (Calculator calculator, int left, int right) {\n        return Math.min(left + right, calculator.getLimit());\n    }\n\n    public int getLimit() {\n        return limit;\n    }\n}\n</code></pre>\n<p>And the test becomes:</p>\n<pre><code>    @Test\n    @DisplayName(&quot;Ensure that adding numbers DOES work correctly.&quot;)\n    void addition() throws Exception {\n        // ARRANGE.\n        Calculator calculator = Mockito.mock(Calculator.class);\n\n        Mockito.when(calculator.getLimit()).thenReturn(100);\n\n        // ACT.\n        int result = Calculator.add(calculator, 1, 1);\n\n        // ASSERT.\n        Assertions.assertEquals(3, result);\n    }\n</code></pre>\n<p>But in this case, I prefer to create a new Class called <code>ArithmeticCalculator</code> with a simple constructor and use it inside the <code>Calculator</code> class (Aka <a href=\"https://en.wikipedia.org/wiki/Composition_over_inheritance\" rel=\"nofollow noreferrer\">composition</a>), then redirect the arithmetic operations to it, so it will help for a better testing and it may promote a <a href=\"https://en.wikipedia.org/wiki/Single-responsibility_principle\" rel=\"nofollow noreferrer\">Single Responsibility Principle</a>.</p>\n"}],"owner":{"account_id":2491469,"reputation":5702,"user_id":2585090,"accept_rate":83,"display_name":"Complexity"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":245,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":60990830,"answer_count":2,"score":2,"last_activity_date":1634080871,"creation_date":1585827287,"question_id":60990621,"body_markdown":"I&#39;m working a legacy code base and I would to use TDD to add new features to the code that I&#39;m currently changing.\r\n\r\nPlease note that the current code base does NOT have any UT&#39;S.\r\n\r\nI have a `Calculator` class with the following implementation:\r\n\r\n    public final class Calculator extends CalculatorBase {\r\n        public Calculator(Document document) throws Exception {\r\n            super(document);\r\n        }\r\n\r\n        public int Multiply(int source, int factor) {\r\n            return source * factor;\r\n        }\r\n    }\r\n\r\nThis class inherits from the following base class:\r\n\r\n    public class CalculatorBase {\r\n        public CalculatorBase(Document document) throws Exception {\r\n            throw new Exception(&quot;UNAVAILABLE IN UT CONTEXT.&quot;);\r\n        }\r\n    }\r\n\r\nNOTE: The constructor does actually a lot of things, which I would like not to do in UT&#39;s.\r\nFor simplicity, I&#39;ve made the constructor throw an exception.\r\n\r\nNow I want to add an &#39;Add&#39; function to the Calculator class.\r\nThis function looks like:\r\n\r\n    public int Add(int left, int right) {\r\n        return left + right;\r\n    }\r\n\r\nA UT for this particular piece of code should be very straightforward.\r\n\r\n    @Test\r\n    @DisplayName(&quot;Ensure that adding numbers DOES work correctly.&quot;)\r\n    void addition() throws Exception {\r\n        // ARRANGE.\r\n        Calculator calculator = new Calculator(null);\r\n\r\n        // ACT.\r\n        int result = calculator.Add(1, 1);\r\n\r\n        // ASSERT.\r\n        Assertions.assertEquals(2, result);\r\n    }\r\n\r\nSince the constructor of the `CalculatorBase` base does throw an exception this unit test will NEVER pass.\r\n\r\nThe tricky part to make this testable is that the `CalculatorBase` class is auto generated by a tool, thus the source code of that class cannot be modified.\r\n\r\nWhat (baby) steps should I take to make ensure that the `Add` method on the `Calculator` class can be tested? The goal is to make the whole project testable, and even get rid of the auto generated stuff, but I would like to use TDD wherever possible in order to refactor the code gradually.\r\n\r\nOne could argue that I can make the `Add` method static since it doesn&#39;t use any dependencies of the `Calculator` class, but the code is just quickly added together. The `Add` function is, in the actual scenario, something else which does consume the state of the `Calculator` class.","title":"Advice needed for refactoring legacy code","body":"<p>I'm working a legacy code base and I would to use TDD to add new features to the code that I'm currently changing.</p>\n\n<p>Please note that the current code base does NOT have any UT'S.</p>\n\n<p>I have a <code>Calculator</code> class with the following implementation:</p>\n\n<pre><code>public final class Calculator extends CalculatorBase {\n    public Calculator(Document document) throws Exception {\n        super(document);\n    }\n\n    public int Multiply(int source, int factor) {\n        return source * factor;\n    }\n}\n</code></pre>\n\n<p>This class inherits from the following base class:</p>\n\n<pre><code>public class CalculatorBase {\n    public CalculatorBase(Document document) throws Exception {\n        throw new Exception(\"UNAVAILABLE IN UT CONTEXT.\");\n    }\n}\n</code></pre>\n\n<p>NOTE: The constructor does actually a lot of things, which I would like not to do in UT's.\nFor simplicity, I've made the constructor throw an exception.</p>\n\n<p>Now I want to add an 'Add' function to the Calculator class.\nThis function looks like:</p>\n\n<pre><code>public int Add(int left, int right) {\n    return left + right;\n}\n</code></pre>\n\n<p>A UT for this particular piece of code should be very straightforward.</p>\n\n<pre><code>@Test\n@DisplayName(\"Ensure that adding numbers DOES work correctly.\")\nvoid addition() throws Exception {\n    // ARRANGE.\n    Calculator calculator = new Calculator(null);\n\n    // ACT.\n    int result = calculator.Add(1, 1);\n\n    // ASSERT.\n    Assertions.assertEquals(2, result);\n}\n</code></pre>\n\n<p>Since the constructor of the <code>CalculatorBase</code> base does throw an exception this unit test will NEVER pass.</p>\n\n<p>The tricky part to make this testable is that the <code>CalculatorBase</code> class is auto generated by a tool, thus the source code of that class cannot be modified.</p>\n\n<p>What (baby) steps should I take to make ensure that the <code>Add</code> method on the <code>Calculator</code> class can be tested? The goal is to make the whole project testable, and even get rid of the auto generated stuff, but I would like to use TDD wherever possible in order to refactor the code gradually.</p>\n\n<p>One could argue that I can make the <code>Add</code> method static since it doesn't use any dependencies of the <code>Calculator</code> class, but the code is just quickly added together. The <code>Add</code> function is, in the actual scenario, something else which does consume the state of the <code>Calculator</code> class.</p>\n"},{"tags":["java","api","architecture"],"answers":[{"tags":[],"owner":{"account_id":3782879,"reputation":24895,"user_id":3141792,"display_name":"BionicCode"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634080612,"creation_date":1634078146,"answer_id":69547722,"question_id":69547010,"body_markdown":"Generally we throw exceptions rather than returning error codes. \r\n\r\nExceptions force the client of your code (consumer of your API) to handle the exception. For example a 4xx HTTP code could indicate faulty code.  \r\nUsually the caller expects and depends on the result of your API. When your API fails to satisfy this expectation it must communicate this exceptional situation or object state by throwing an exception.  \r\n\r\nError codes are used accross application boundaries, like when consuming a Rest service. The remote service can&#39;t throw an exception in the client application. It can only send you a response containing a special code or a special response object to indicate an error.  \r\nAs soon as such an error enters your application/library, you must convert it to a meaningful exception which means a meaningful exception name and a meaningful exception message. Consider to extend `Exception` if there is no meaningful standard exception available.\r\n\r\nA good exception name and message is far more convenient to handle than a code.   \r\nWhile the name and the message can be directly consumed, a code must *always* be decoded e.g., by using an error code table.\r\n\r\nSince exceptions are expensive in terms of performance, you should *always* avoid them in the first place. It is primarily the responsibility of the caller to ensure that the arguments passed to the API are valid.  \r\nThen have your API to validate the parameters before using them (e.g., with the &quot;expensive&quot; Rest service - maybe you don&#39;t whant to waste bandwidth by sending invalid requests) and throw ArgumentException if they are invalid.  \r\nIn addition you can design your API in way that it semantically communicates that a failing operation is possible by adding an alternative the Try-Do pattern implementation:\r\n\r\n    public boolean tryGetWeather(Response response) {\r\n    \r\n      // Call Rest API\r\n    \r\n      if (restApiResponseCode != 200) {\r\n        return false;\r\n      }\r\n      \r\n      // Set the result parameter \r\n      response.Weather = weatherData;\r\n      return true;\r\n    }\r\n\r\nThe `tryxxx` implies that the operation is expected to fail and that the ccaller should observe and handle the result. This is usually used for non-critical operations (e.g., value conversions - like testing if a string is a number).  \r\n \r\nWhen using the Try-Do pattern, a good API always offers a breaking default version in case the consumer wants the application to halt on error (because it may indicate faulty code):\r\n\r\n    public Response getWeather(double latitude, double longtitude) {\r\n    \r\n     // Validate parameters before using them.\r\n     // Longitudes range from -180 to 180.\r\n     if (longitude &gt; 180 || longitude &lt; -180)\r\n       throw new InvalidLongitudeException();\r\n\r\n      // Call Rest API\r\n    \r\n      if (restApiResponseCode != 200) {\r\n        throw new WeatherServiceException();\r\n      }\r\n      \r\n      // Set the result parameter \r\n      response.Weather = weatherData;\r\n      return response;\r\n    }\r\n\r\nSince you would always expect a weather result from a weather API, the Try-Do pattern is not suitable for your scenario. You should convert the error codes to exceptions.\r\n\r\nWether you use the Try-Do pattern for less critical operations or not: always throw exceptions rather than returning error codes.","title":"Best practice of passing 3rd party api response codes","body":"<p>Generally we throw exceptions rather than returning error codes.</p>\n<p>Exceptions force the client of your code (consumer of your API) to handle the exception. For example a 4xx HTTP code could indicate faulty code.<br />\nUsually the caller expects and depends on the result of your API. When your API fails to satisfy this expectation it must communicate this exceptional situation or object state by throwing an exception.</p>\n<p>Error codes are used accross application boundaries, like when consuming a Rest service. The remote service can't throw an exception in the client application. It can only send you a response containing a special code or a special response object to indicate an error.<br />\nAs soon as such an error enters your application/library, you must convert it to a meaningful exception which means a meaningful exception name and a meaningful exception message. Consider to extend <code>Exception</code> if there is no meaningful standard exception available.</p>\n<p>A good exception name and message is far more convenient to handle than a code.<br />\nWhile the name and the message can be directly consumed, a code must <em>always</em> be decoded e.g., by using an error code table.</p>\n<p>Since exceptions are expensive in terms of performance, you should <em>always</em> avoid them in the first place. It is primarily the responsibility of the caller to ensure that the arguments passed to the API are valid.<br />\nThen have your API to validate the parameters before using them (e.g., with the &quot;expensive&quot; Rest service - maybe you don't whant to waste bandwidth by sending invalid requests) and throw ArgumentException if they are invalid.<br />\nIn addition you can design your API in way that it semantically communicates that a failing operation is possible by adding an alternative the Try-Do pattern implementation:</p>\n<pre><code>public boolean tryGetWeather(Response response) {\n\n  // Call Rest API\n\n  if (restApiResponseCode != 200) {\n    return false;\n  }\n  \n  // Set the result parameter \n  response.Weather = weatherData;\n  return true;\n}\n</code></pre>\n<p>The <code>tryxxx</code> implies that the operation is expected to fail and that the ccaller should observe and handle the result. This is usually used for non-critical operations (e.g., value conversions - like testing if a string is a number).</p>\n<p>When using the Try-Do pattern, a good API always offers a breaking default version in case the consumer wants the application to halt on error (because it may indicate faulty code):</p>\n<pre><code>public Response getWeather(double latitude, double longtitude) {\n\n // Validate parameters before using them.\n // Longitudes range from -180 to 180.\n if (longitude &gt; 180 || longitude &lt; -180)\n   throw new InvalidLongitudeException();\n\n  // Call Rest API\n\n  if (restApiResponseCode != 200) {\n    throw new WeatherServiceException();\n  }\n  \n  // Set the result parameter \n  response.Weather = weatherData;\n  return response;\n}\n</code></pre>\n<p>Since you would always expect a weather result from a weather API, the Try-Do pattern is not suitable for your scenario. You should convert the error codes to exceptions.</p>\n<p>Wether you use the Try-Do pattern for less critical operations or not: always throw exceptions rather than returning error codes.</p>\n"}],"owner":{"account_id":12463521,"reputation":13,"user_id":9074355,"display_name":"Ivan  Terekh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2122,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1634080612,"creation_date":1634072675,"question_id":69547010,"body_markdown":"Let&#39;s say I have endpoint returning weather from 3rd party api:\r\n\r\n    @Path(&quot;/weather&quot;)\r\n    Response getWeather(double latitude, double longtitude) {\r\n        Weather weather = weatherService.getWeather(latitude, longtitude);\r\n        return wrapWithHttpOK(weather);\r\n    }\r\n\r\nIt works perfectly fine when the 3rd party weather api always successfully returns weather. But sometimes it can return:\r\n\r\n - 400 Bad request for invalid latitude, longtitude\r\n - 404 Not found for locations thst this api does not cover\r\n - 500 Internal server error\r\n\r\nWhat is the best way to organize my code to return 400 and 404 from my api and handle 500 with 503 Service not available? Is it good idea to throw custom exceptions for this cases? Or should i make  `weatherService` return some kind of status alongside with entity? Is there a library for this purpose?\r\n\r\nWould also be nice to know if there is any literature or articles covering such questions.","title":"Best practice of passing 3rd party api response codes","body":"<p>Let's say I have endpoint returning weather from 3rd party api:</p>\n<pre><code>@Path(&quot;/weather&quot;)\nResponse getWeather(double latitude, double longtitude) {\n    Weather weather = weatherService.getWeather(latitude, longtitude);\n    return wrapWithHttpOK(weather);\n}\n</code></pre>\n<p>It works perfectly fine when the 3rd party weather api always successfully returns weather. But sometimes it can return:</p>\n<ul>\n<li>400 Bad request for invalid latitude, longtitude</li>\n<li>404 Not found for locations thst this api does not cover</li>\n<li>500 Internal server error</li>\n</ul>\n<p>What is the best way to organize my code to return 400 and 404 from my api and handle 500 with 503 Service not available? Is it good idea to throw custom exceptions for this cases? Or should i make  <code>weatherService</code> return some kind of status alongside with entity? Is there a library for this purpose?</p>\n<p>Would also be nice to know if there is any literature or articles covering such questions.</p>\n"},{"tags":["java","mockito"],"answers":[{"tags":[],"owner":{"account_id":18586978,"reputation":2220,"user_id":15000097,"display_name":"Georgii Lvov"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1632133752,"creation_date":1631173195,"answer_id":69114127,"question_id":69113265,"body_markdown":"If you just want to mock your map and inject it in your class under test, you should just create a mock map and inject it via `ReflectionTestUtils`:\r\n\r\nClass under test:\r\n\r\n    @Component\r\n    public class MyService {\r\n    \r\n        @Value(&quot;#{${patientTypes}}&quot;)\r\n        private Map&lt;String, Integer&gt; patientTypes;\r\n    \r\n        public Integer getPatientTypeByKey(String key) {\r\n            return patientTypes.get(key);\r\n        }\r\n    }\r\n\r\nFor Mockito-test you can use just `InjectMocks`:\r\n\r\n    @ExtendWith(MockitoExtension.class)\r\n    public class SimpleTest {\r\n\r\n        @InjectMocks\r\n        private MyService underTest;\r\n\r\n        @Mock\r\n        private Map&lt;String, Integer&gt; mockMap;\r\n    \r\n\r\n        @Test\r\n        public void test() {\r\n            when(mockMap.get(anyString())).thenReturn(15);\r\n    \r\n            Integer result = underTest.getPatientTypeByKey(&quot;some key&quot;);\r\n    \r\n            assertEquals(15, result);\r\n        }\r\n    }\r\n\r\nFor SpringBootTest `ReflectionTestUtils` can be used:\r\n\r\n    @SpringBootTest\r\n    public class SBTest {\r\n    \r\n        @Autowired\r\n        private MyService underTest;\r\n    \r\n        @Mock\r\n        private Map&lt;String, Integer&gt; mockMap;\r\n    \r\n    \r\n        @Test\r\n        public void test() {\r\n            ReflectionTestUtils.setField(underTest, &quot;patientTypes&quot;, mockMap);\r\n    \r\n            when(mockMap.get(anyString())).thenReturn(15);\r\n    \r\n            Integer result = underTest.getPatientTypeByKey(&quot;some key&quot;);\r\n    \r\n            assertEquals(15, result);\r\n        }\r\n    }","title":"How to Mock Map when using @Value using Mockito","body":"<p>If you just want to mock your map and inject it in your class under test, you should just create a mock map and inject it via <code>ReflectionTestUtils</code>:</p>\n<p>Class under test:</p>\n<pre><code>@Component\npublic class MyService {\n\n    @Value(&quot;#{${patientTypes}}&quot;)\n    private Map&lt;String, Integer&gt; patientTypes;\n\n    public Integer getPatientTypeByKey(String key) {\n        return patientTypes.get(key);\n    }\n}\n</code></pre>\n<p>For Mockito-test you can use just <code>InjectMocks</code>:</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\npublic class SimpleTest {\n\n    @InjectMocks\n    private MyService underTest;\n\n    @Mock\n    private Map&lt;String, Integer&gt; mockMap;\n\n\n    @Test\n    public void test() {\n        when(mockMap.get(anyString())).thenReturn(15);\n\n        Integer result = underTest.getPatientTypeByKey(&quot;some key&quot;);\n\n        assertEquals(15, result);\n    }\n}\n</code></pre>\n<p>For SpringBootTest <code>ReflectionTestUtils</code> can be used:</p>\n<pre><code>@SpringBootTest\npublic class SBTest {\n\n    @Autowired\n    private MyService underTest;\n\n    @Mock\n    private Map&lt;String, Integer&gt; mockMap;\n\n\n    @Test\n    public void test() {\n        ReflectionTestUtils.setField(underTest, &quot;patientTypes&quot;, mockMap);\n\n        when(mockMap.get(anyString())).thenReturn(15);\n\n        Integer result = underTest.getPatientTypeByKey(&quot;some key&quot;);\n\n        assertEquals(15, result);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":3503406,"reputation":10887,"user_id":2929562,"accept_rate":88,"display_name":"Prateek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3387,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":69114127,"answer_count":1,"score":3,"last_activity_date":1634080378,"creation_date":1631169076,"question_id":69113265,"body_markdown":"I already went through this question: https://stackoverflow.com/questions/23162777/how-do-i-mock-an-autowired-value-field-in-spring-with-mockito. How can we mock the following?\r\n\r\n    @Value(&quot;#{${patientTypes}}&quot;)\r\n    private Map&lt;String, Integer&gt; patientTypes;\r\n\r\nSo that we can access its value when doing mocking?\r\n","title":"How to Mock Map when using @Value using Mockito","body":"<p>I already went through this question: <a href=\"https://stackoverflow.com/questions/23162777/how-do-i-mock-an-autowired-value-field-in-spring-with-mockito\">How do I mock an autowired @Value field in Spring with Mockito?</a>. How can we mock the following?</p>\n<pre><code>@Value(&quot;#{${patientTypes}}&quot;)\nprivate Map&lt;String, Integer&gt; patientTypes;\n</code></pre>\n<p>So that we can access its value when doing mocking?</p>\n"},{"tags":["java","apache-spark","apache-spark-sql"],"answers":[{"tags":[],"owner":{"account_id":3859079,"reputation":2069,"user_id":3197244,"accept_rate":50,"display_name":"jgp"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1634035198,"creation_date":1634035198,"answer_id":69539110,"question_id":69535900,"body_markdown":"I had a similar case, however, I had a finite number of types of files, I do not know if this is your case, what I did:\r\n\r\n1. Read the first line of the CSV file.\r\n2. Case/Switch on the first line to pick the right sch&#233;ma\r\n3. Ingest files.\r\n4. Union by name all the dataframe (my goal was to have a large dataframe at the end).\r\n\r\nA kinda similar example can be found here: https://github.com/jgperrin/net.jgp.books.spark.ch15/blob/master/src/main/java/net/jgp/books/spark/ch15/lab300_nyc_school_stats/NewYorkSchoolStatisticsApp.java\r\n\r\nIf your header is completely variable, then you can create a schema dynamically based on reading the first line of your CSV and extrapolating the sch&#233;ma from it. It should not be that difficult but you will need to make sure that your options are the same for both your schema builder and your actual read(). I would isolate that in a utility function that does both the schema building and ingestion. \r\n\r\nAnother option is to load everything without schema and then validate the data after as part of your DQ normalization. It kind be painful, but it can also give you better control on what your looking for as anomalies. ","title":"Apache Spark bad record for large number of columns having pattern in name","body":"<p>I had a similar case, however, I had a finite number of types of files, I do not know if this is your case, what I did:</p>\n<ol>\n<li>Read the first line of the CSV file.</li>\n<li>Case/Switch on the first line to pick the right schma</li>\n<li>Ingest files.</li>\n<li>Union by name all the dataframe (my goal was to have a large dataframe at the end).</li>\n</ol>\n<p>A kinda similar example can be found here: <a href=\"https://github.com/jgperrin/net.jgp.books.spark.ch15/blob/master/src/main/java/net/jgp/books/spark/ch15/lab300_nyc_school_stats/NewYorkSchoolStatisticsApp.java\" rel=\"nofollow noreferrer\">https://github.com/jgperrin/net.jgp.books.spark.ch15/blob/master/src/main/java/net/jgp/books/spark/ch15/lab300_nyc_school_stats/NewYorkSchoolStatisticsApp.java</a></p>\n<p>If your header is completely variable, then you can create a schema dynamically based on reading the first line of your CSV and extrapolating the schma from it. It should not be that difficult but you will need to make sure that your options are the same for both your schema builder and your actual read(). I would isolate that in a utility function that does both the schema building and ingestion.</p>\n<p>Another option is to load everything without schema and then validate the data after as part of your DQ normalization. It kind be painful, but it can also give you better control on what your looking for as anomalies.</p>\n"}],"owner":{"account_id":20343054,"reputation":13,"user_id":14921789,"display_name":"dev account"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":255,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69539110,"answer_count":1,"score":1,"last_activity_date":1634079741,"creation_date":1634019550,"question_id":69535900,"body_markdown":"I am new to Spark and was trying to handle bad records. I found the below while searching \r\n\r\n    val df = spark.read\r\n              .option(&quot;badRecordsPath&quot;, &quot;/tmp/badRecordsPath&quot;)\r\n              .schema(&quot;Country String, Rank Integer&quot;)\r\n              .csv(&quot;/tmp/inputFile.csv&quot;)\r\n\r\nWe are reading multiple files and need to validate the schema. But the problem here is that in each input CSV file we have some column names with a specific pattern and it can be dynamic in numbers in each file. \r\nFor example, consider the below headers in the first CSV file\r\n\r\n    ID, POL_1, POL_2, POL_3, . . .  . POL500\r\n\r\nThe second CSV file have below headers\r\n\r\n    ID, POL_1, POL_2, POL_3, ...,POL_10\r\n\r\nNow for each file we have a different number of headers and with a similar pattern. So in that case I can not hard code the schema String or Struct fields. Is there any way to achieve the same?\r\n\r\nOne solution I can think of preload the input file each time and extract schema and then apply regex and assign the data type. But in this case, we have to load twice the file.\r\n\r\nCan anyone please help me with this because I have been struggling with this.","title":"Apache Spark bad record for large number of columns having pattern in name","body":"<p>I am new to Spark and was trying to handle bad records. I found the below while searching</p>\n<pre><code>val df = spark.read\n          .option(&quot;badRecordsPath&quot;, &quot;/tmp/badRecordsPath&quot;)\n          .schema(&quot;Country String, Rank Integer&quot;)\n          .csv(&quot;/tmp/inputFile.csv&quot;)\n</code></pre>\n<p>We are reading multiple files and need to validate the schema. But the problem here is that in each input CSV file we have some column names with a specific pattern and it can be dynamic in numbers in each file.\nFor example, consider the below headers in the first CSV file</p>\n<pre><code>ID, POL_1, POL_2, POL_3, . . .  . POL500\n</code></pre>\n<p>The second CSV file have below headers</p>\n<pre><code>ID, POL_1, POL_2, POL_3, ...,POL_10\n</code></pre>\n<p>Now for each file we have a different number of headers and with a similar pattern. So in that case I can not hard code the schema String or Struct fields. Is there any way to achieve the same?</p>\n<p>One solution I can think of preload the input file each time and extract schema and then apply regex and assign the data type. But in this case, we have to load twice the file.</p>\n<p>Can anyone please help me with this because I have been struggling with this.</p>\n"},{"tags":["java","state"],"comments":[{"owner":{"display_name":"user4307777"},"score":0,"creation_date":1511050133,"post_id":47372392,"comment_id":81697516,"body_markdown":"object.super() wasn&#39;t explained there. Does it do the same as super() but for object? Or is it the super from the class that Object is in?","body":"object.super() wasn&#39;t explained there. Does it do the same as super() but for object? Or is it the super from the class that Object is in?"},{"owner":{"account_id":44195,"reputation":269043,"user_id":129570,"accept_rate":79,"display_name":"Oliver Charlesworth"},"score":0,"creation_date":1511050795,"post_id":47372392,"comment_id":81697628,"body_markdown":"It calls the constructor of the superclass of of `StateOne`.","body":"It calls the constructor of the superclass of of <code>StateOne</code>."},{"owner":{"display_name":"user4307777"},"score":0,"creation_date":1511051374,"post_id":47372392,"comment_id":81697738,"body_markdown":"I meant what does it do in AbstractState. So in `a.super()`","body":"I meant what does it do in AbstractState. So in <code>a.super()</code>"}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1511056691,"creation_date":1511051595,"answer_id":47372571,"question_id":47372392,"body_markdown":"&gt; From my understanding, `a.super()` calls the constructor of the super class of A a, which is Object, right? So what&#39;s the point?\r\n\r\nI think you are asking why you have to write `a.super()` rather than `super()`.\r\n\r\nFirst of all, it is not calling the constructor of `A` or of the superclass of `A`.  The `super(...)` call in a constructor **always** means a constructor in the immediate superclass of the class that you are instantiating.  In this case the superclass is the inner class `A.State`.\r\n\r\nWhat `a.super()` actually says is &quot;call my super class constructor *with `a` as my enclosing instance*&quot;.  \r\n\r\nThe unusual syntax is needed because the superclass is an inner class, and when an inner class is instantiated, it needs to know what **instance** of the enclosing class that it is inside.\r\n\r\nIn your example, `State` is declared as an inner class (i.e. not `static`) so the `setState` method can see the private `_state` variable of some instance the enclosing class (`A`).  The `a.super()` is necessary so that the JVM can know *which instance of `A`* is the enclosing one.","title":"What does object.super() do? How to creating a State?","body":"<blockquote>\n  <p>From my understanding, <code>a.super()</code> calls the constructor of the super class of A a, which is Object, right? So what's the point?</p>\n</blockquote>\n\n<p>I think you are asking why you have to write <code>a.super()</code> rather than <code>super()</code>.</p>\n\n<p>First of all, it is not calling the constructor of <code>A</code> or of the superclass of <code>A</code>.  The <code>super(...)</code> call in a constructor <strong>always</strong> means a constructor in the immediate superclass of the class that you are instantiating.  In this case the superclass is the inner class <code>A.State</code>.</p>\n\n<p>What <code>a.super()</code> actually says is \"call my super class constructor <em>with <code>a</code> as my enclosing instance</em>\".  </p>\n\n<p>The unusual syntax is needed because the superclass is an inner class, and when an inner class is instantiated, it needs to know what <strong>instance</strong> of the enclosing class that it is inside.</p>\n\n<p>In your example, <code>State</code> is declared as an inner class (i.e. not <code>static</code>) so the <code>setState</code> method can see the private <code>_state</code> variable of some instance the enclosing class (<code>A</code>).  The <code>a.super()</code> is necessary so that the JVM can know <em>which instance of <code>A</code></em> is the enclosing one.</p>\n"},{"tags":[],"owner":{"account_id":23009988,"reputation":1,"user_id":17132647,"display_name":"Judy Hopps"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634079550,"creation_date":1634027924,"answer_id":69537438,"question_id":47372392,"body_markdown":"To call an inner class (State), it must tell it who is its super class A first. JVM can find who is the father class of StateOne, just using this statement &quot; extends A.State&quot; .\r\n\r\na.super() is corresponding to A.State\r\n\r\na --&gt; A in &quot; extends A.State &quot;, tell inner class who is your father class (the instance of father class)\r\nsuper() ----&gt; State in &quot;extends A.State &quot;, it is the constructor of inner class \r\n\r\nYou can understand it like this, a common class extends use &quot;super()/super(xx)&quot;, but extending inner class must have to know an instance of its super class first. So how to know its super class, in the constructor, use the parameter. Then, using super() calls father&#39;s constructor, like this, inner class use (my father class).super()\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/cC6Kh.png","title":"What does object.super() do? How to creating a State?","body":"<p>To call an inner class (State), it must tell it who is its super class A first. JVM can find who is the father class of StateOne, just using this statement &quot; extends A.State&quot; .</p>\n<p>a.super() is corresponding to A.State</p>\n<p>a --&gt; A in &quot; extends A.State &quot;, tell inner class who is your father class (the instance of father class)\nsuper() ----&gt; State in &quot;extends A.State &quot;, it is the constructor of inner class</p>\n<p>You can understand it like this, a common class extends use &quot;super()/super(xx)&quot;, but extending inner class must have to know an instance of its super class first. So how to know its super class, in the constructor, use the parameter. Then, using super() calls father's constructor, like this, inner class use (my father class).super()</p>\n"}],"owner":{"display_name":"user4307777"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":532,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":47372571,"answer_count":2,"score":0,"last_activity_date":1634079550,"creation_date":1511049600,"question_id":47372392,"body_markdown":"So I have this code:\r\n\r\n    public class A {\r\n    \tprivate State _state;\r\n    \r\n    \tpublic abstract class State {\r\n    \t\tprotected void setState(State newState) {\r\n    \t\t\t_state = newState;\r\n    \t\t}\r\n    \t}\r\n      \r\n    \tpublic A() {\r\n    \t\t_state = new AbstractState(this);\r\n    \t}\r\n    }\r\n    \r\n    public abstract class AbstractState extends A.State {\r\n    \tAbstractState(A a) {\r\n    \t\ta.super();\r\n    \t}\r\n    }\r\n\r\nAnd I&#39;m having a hard time understanding how it works.\r\n\r\nSo when a `A object` is created it creates a `AbstractState` object with that same `A object` as a parameter. And the `AbstractState` constructor, which receives that `A object`, calls `a.super()`.\r\n\r\nFrom my understanding, `a.super()` calls the construtor of the super class of `A a`, which is `Object`, right? So what&#39;s the point?\r\n\r\nI know that `AbstractState` is an abstract class. A subclass could be:\r\n\r\n    public class StateOne extends AbstractState {\r\n    \tStateOne(A a) {\r\n    \t\tsuper(a);\r\n    \t}\r\n    }\r\n\r\nThe question remains though.","title":"What does object.super() do? How to creating a State?","body":"<p>So I have this code:</p>\n\n<pre><code>public class A {\n    private State _state;\n\n    public abstract class State {\n        protected void setState(State newState) {\n            _state = newState;\n        }\n    }\n\n    public A() {\n        _state = new AbstractState(this);\n    }\n}\n\npublic abstract class AbstractState extends A.State {\n    AbstractState(A a) {\n        a.super();\n    }\n}\n</code></pre>\n\n<p>And I'm having a hard time understanding how it works.</p>\n\n<p>So when a <code>A object</code> is created it creates a <code>AbstractState</code> object with that same <code>A object</code> as a parameter. And the <code>AbstractState</code> constructor, which receives that <code>A object</code>, calls <code>a.super()</code>.</p>\n\n<p>From my understanding, <code>a.super()</code> calls the construtor of the super class of <code>A a</code>, which is <code>Object</code>, right? So what's the point?</p>\n\n<p>I know that <code>AbstractState</code> is an abstract class. A subclass could be:</p>\n\n<pre><code>public class StateOne extends AbstractState {\n    StateOne(A a) {\n        super(a);\n    }\n}\n</code></pre>\n\n<p>The question remains though.</p>\n"},{"tags":["java","swing","autocomplete"],"comments":[{"owner":{"account_id":10836,"reputation":196641,"user_id":20654,"accept_rate":80,"display_name":"OscarRyz"},"score":0,"creation_date":1233202214,"post_id":485530,"comment_id":306456,"body_markdown":"Please, post your solution when you got it.","body":"Please, post your solution when you got it."},{"owner":{"account_id":1151383,"reputation":36217,"user_id":1133011,"accept_rate":96,"display_name":"David Kroukamp"},"score":0,"creation_date":1362519165,"post_id":485530,"comment_id":21478885,"body_markdown":"Also see [this](http://stackoverflow.com/questions/15219625/how-would-be-implements-autosugesion-in-jtextarea-swing/15220056#15220056) similar answer","body":"Also see <a href=\"http://stackoverflow.com/questions/15219625/how-would-be-implements-autosugesion-in-jtextarea-swing/15220056#15220056\">this</a> similar answer"}],"answers":[{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1233094437,"creation_date":1233094437,"answer_id":485559,"question_id":485530,"body_markdown":"I would add a actionListener so you can get each key as it is pressed.\r\n\r\nYou can can then do a search in the background (another thread)","title":"How could I implement autocompletion using Swing?","body":"<p>I would add a actionListener so you can get each key as it is pressed.</p>\n\n<p>You can can then do a search in the background (another thread)</p>\n"},{"tags":[],"owner":{"account_id":4072,"reputation":3942,"user_id":6009,"accept_rate":100,"display_name":"Geekygecko"},"down_vote_count":1,"up_vote_count":14,"is_accepted":false,"score":13,"last_activity_date":1360800461,"creation_date":1233095480,"answer_id":485630,"question_id":485530,"body_markdown":"You might want to try the free AutoComplete component over at SwingLabs.\r\n\r\n[http://swinglabs.org][1]\r\n\r\nEdit: This site seems to have moved http://java.net/projects/swinglabs\r\n\r\nThere is an example how to implement this code at:\r\n\r\n[http://download.java.net/javadesktop/swinglabs/releases/0.8/docs/api/org/jdesktop/swingx/autocomplete/package-summary.html][2]\r\n\r\n\r\n\r\n  [1]: http://swinglabs.org\r\n  [2]: http://download.java.net/javadesktop/swinglabs/releases/0.8/docs/api/org/jdesktop/swingx/autocomplete/package-summary.html","title":"How could I implement autocompletion using Swing?","body":"<p>You might want to try the free AutoComplete component over at SwingLabs.</p>\n\n<p><a href=\"http://swinglabs.org\" rel=\"nofollow noreferrer\">http://swinglabs.org</a></p>\n\n<p>Edit: This site seems to have moved <a href=\"http://java.net/projects/swinglabs\" rel=\"nofollow noreferrer\">http://java.net/projects/swinglabs</a></p>\n\n<p>There is an example how to implement this code at:</p>\n\n<p><a href=\"http://download.java.net/javadesktop/swinglabs/releases/0.8/docs/api/org/jdesktop/swingx/autocomplete/package-summary.html\" rel=\"nofollow noreferrer\">http://download.java.net/javadesktop/swinglabs/releases/0.8/docs/api/org/jdesktop/swingx/autocomplete/package-summary.html</a></p>\n"},{"tags":[],"owner":{"account_id":28564,"reputation":19183,"user_id":76393,"accept_rate":65,"display_name":"ivan_ivanovich_ivanoff"},"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1244970821,"creation_date":1244970821,"answer_id":992492,"question_id":485530,"body_markdown":"There is an example for auto-completion for text area at  \r\n**[Sun&#39;s tutorials &quot;Using Swing Components&quot;][1]**.\r\n\r\nIt is done in the style of word processors (no pop ups, but the  \r\nsuggested text is typed ahead of the cursor).\r\n\r\nJust scroll down to **&quot;Another Example: TextAreaDemo&quot;**  \r\nant hit the Launch button!\r\n\r\n  [1]: http://java.sun.com/docs/books/tutorial/uiswing/components/textarea.html","title":"How could I implement autocompletion using Swing?","body":"<p>There is an example for auto-completion for text area at<br>\n<strong><a href=\"http://java.sun.com/docs/books/tutorial/uiswing/components/textarea.html\" rel=\"noreferrer\">Sun's tutorials \"Using Swing Components\"</a></strong>.</p>\n\n<p>It is done in the style of word processors (no pop ups, but the<br>\nsuggested text is typed ahead of the cursor).</p>\n\n<p>Just scroll down to <strong>\"Another Example: TextAreaDemo\"</strong><br>\nant hit the Launch button!</p>\n"},{"tags":[],"owner":{"account_id":28564,"reputation":19183,"user_id":76393,"accept_rate":65,"display_name":"ivan_ivanovich_ivanoff"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1634079533,"creation_date":1244971625,"answer_id":992510,"question_id":485530,"body_markdown":"Here is my simplified example. Sadly, you have to click the text field first,\r\nbefore start typing, or you&#39;ll get exceptions. *If anyone can figure out why, please let me know/update this answer.*\r\n\r\n    import java.awt.*;\r\n    import java.awt.event.*;\r\n    import javax.swing.*;\r\n    \r\n    public class _Autocompleter {\r\n    \r\n      private final static JPopupMenu textPopupMenu\r\n          = new JPopupMenu(&quot;MENU&quot;) {\r\n    \r\n        {\r\n          add(new JMenuItem(&quot;item 1&quot;));\r\n          add(new JMenuItem(&quot;item 2&quot;));\r\n          setFocusable(false);\r\n        }\r\n    \r\n      };\r\n    \r\n      private final static KeyListener textInputListener\r\n          = new KeyAdapter() {\r\n    \r\n        @Override\r\n        public void keyTyped(KeyEvent e) {\r\n          Point p = textInput.getCaret().getMagicCaretPosition();\r\n          if (textPopupMenu.isVisible()) {\r\n            SwingUtilities.convertPointToScreen(p, textInput);\r\n            textPopupMenu.setLocation(p.x, p.y + 20);\r\n          } else {\r\n            textPopupMenu.show(textInput, p.x, p.y + 20);\r\n          }\r\n        }\r\n    \r\n      };\r\n    \r\n      private final static JTextArea textInput\r\n          = new JTextArea(&quot;type something&quot;) {\r\n    \r\n        {\r\n          addKeyListener(textInputListener);\r\n          setCaretPosition(getText().length());\r\n        }\r\n    \r\n      };\r\n    \r\n      private final static JFrame f = new JFrame(&quot;TEST&quot;) {\r\n    \r\n        {\r\n          setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    \r\n          add(textInput);\r\n    \r\n          setSize(400, 60);\r\n          setLocationRelativeTo(null);\r\n          setVisible(true);\r\n        }\r\n    \r\n      };\r\n    \r\n      public static void main(String[] args)\r\n          throws Exception {\r\n            // YES, IT&#39;S EMPTY !!!\r\n            // It&#39;ll start anyway because of static initializers\r\n      }\r\n    \r\n    }","title":"How could I implement autocompletion using Swing?","body":"<p>Here is my simplified example. Sadly, you have to click the text field first,\nbefore start typing, or you'll get exceptions. <em>If anyone can figure out why, please let me know/update this answer.</em></p>\n<pre><code>import java.awt.*;\nimport java.awt.event.*;\nimport javax.swing.*;\n\npublic class _Autocompleter {\n\n  private final static JPopupMenu textPopupMenu\n      = new JPopupMenu(&quot;MENU&quot;) {\n\n    {\n      add(new JMenuItem(&quot;item 1&quot;));\n      add(new JMenuItem(&quot;item 2&quot;));\n      setFocusable(false);\n    }\n\n  };\n\n  private final static KeyListener textInputListener\n      = new KeyAdapter() {\n\n    @Override\n    public void keyTyped(KeyEvent e) {\n      Point p = textInput.getCaret().getMagicCaretPosition();\n      if (textPopupMenu.isVisible()) {\n        SwingUtilities.convertPointToScreen(p, textInput);\n        textPopupMenu.setLocation(p.x, p.y + 20);\n      } else {\n        textPopupMenu.show(textInput, p.x, p.y + 20);\n      }\n    }\n\n  };\n\n  private final static JTextArea textInput\n      = new JTextArea(&quot;type something&quot;) {\n\n    {\n      addKeyListener(textInputListener);\n      setCaretPosition(getText().length());\n    }\n\n  };\n\n  private final static JFrame f = new JFrame(&quot;TEST&quot;) {\n\n    {\n      setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n\n      add(textInput);\n\n      setSize(400, 60);\n      setLocationRelativeTo(null);\n      setVisible(true);\n    }\n\n  };\n\n  public static void main(String[] args)\n      throws Exception {\n        // YES, IT'S EMPTY !!!\n        // It'll start anyway because of static initializers\n  }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"gli00001"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1447193196,"creation_date":1250888807,"answer_id":1314227,"question_id":485530,"body_markdown":"Use this\r\n\r\n    import java.awt.*;\r\n    import java.awt.event.*;\r\n    \r\n    import javax.swing.*;\r\n    \r\n    public class Autocompleter2\r\n    {\r\n        //~ Methods ------------------------------------------------------------------------------------\r\n    \r\n        public static void main(String[] args)\r\n          throws Exception\r\n        {\r\n            // YES, IT&#39;S EMPTY !!!\r\n            // It&#39;ll start anyway because of static initializers\r\n            SwingUtilities.invokeLater(new Runnable()\r\n                {\r\n                    @Override\r\n                    public void run()\r\n                    {\r\n                        final JPopupMenu textPopupMenu = new JPopupMenu(&quot;MENU&quot;)\r\n                        {\r\n    \r\n                            {\r\n                                add(new JMenuItem(&quot;item 1&quot;));\r\n                                add(new JMenuItem(&quot;item 2&quot;));\r\n                                setFocusable(false);\r\n                            }\r\n                        };\r\n    \r\n                        final JTextArea textInput = new JTextArea(&quot;type something la&quot;)\r\n                        {\r\n    \r\n                            {\r\n                                setCaretPosition(getText().length());\r\n                            }\r\n                        };\r\n    \r\n                        KeyListener textInputListener = new KeyAdapter()\r\n                        {\r\n                            @Override\r\n                            public void keyTyped(KeyEvent e)\r\n                            {\r\n                                Point p = textInput.getCaret().getMagicCaretPosition();\r\n    \r\n                                if (textPopupMenu.isVisible())\r\n                                {\r\n                                    SwingUtilities.convertPointToScreen(p, textInput);\r\n                                    textPopupMenu.setLocation(p.x, p.y + 20);\r\n                                }\r\n                                else\r\n                                {\r\n                                    textPopupMenu.show(textInput, p.x, p.y + 20);\r\n                                }\r\n                            }\r\n                        };\r\n    \r\n                        textInput.addKeyListener(textInputListener);\r\n                        new JFrame(&quot;TEST&quot;)\r\n                            {\r\n    \r\n                                {\r\n                                    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n                                    add(textInput);\r\n                                    setSize(400, 60);\r\n                                    setLocationRelativeTo(null);\r\n                                    setVisible(true);\r\n                                }\r\n                            };\r\n                    }\r\n                    ;\r\n                });\r\n        }\r\n    }\r\n\r\n","title":"How could I implement autocompletion using Swing?","body":"<p>Use this</p>\n\n<pre><code>import java.awt.*;\nimport java.awt.event.*;\n\nimport javax.swing.*;\n\npublic class Autocompleter2\n{\n    //~ Methods ------------------------------------------------------------------------------------\n\n    public static void main(String[] args)\n      throws Exception\n    {\n        // YES, IT'S EMPTY !!!\n        // It'll start anyway because of static initializers\n        SwingUtilities.invokeLater(new Runnable()\n            {\n                @Override\n                public void run()\n                {\n                    final JPopupMenu textPopupMenu = new JPopupMenu(\"MENU\")\n                    {\n\n                        {\n                            add(new JMenuItem(\"item 1\"));\n                            add(new JMenuItem(\"item 2\"));\n                            setFocusable(false);\n                        }\n                    };\n\n                    final JTextArea textInput = new JTextArea(\"type something la\")\n                    {\n\n                        {\n                            setCaretPosition(getText().length());\n                        }\n                    };\n\n                    KeyListener textInputListener = new KeyAdapter()\n                    {\n                        @Override\n                        public void keyTyped(KeyEvent e)\n                        {\n                            Point p = textInput.getCaret().getMagicCaretPosition();\n\n                            if (textPopupMenu.isVisible())\n                            {\n                                SwingUtilities.convertPointToScreen(p, textInput);\n                                textPopupMenu.setLocation(p.x, p.y + 20);\n                            }\n                            else\n                            {\n                                textPopupMenu.show(textInput, p.x, p.y + 20);\n                            }\n                        }\n                    };\n\n                    textInput.addKeyListener(textInputListener);\n                    new JFrame(\"TEST\")\n                        {\n\n                            {\n                                setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n                                add(textInput);\n                                setSize(400, 60);\n                                setLocationRelativeTo(null);\n                                setVisible(true);\n                            }\n                        };\n                }\n                ;\n            });\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":42068,"reputation":20631,"user_id":122441,"accept_rate":70,"display_name":"Hendy Irawan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1268290066,"creation_date":1268290066,"answer_id":2423088,"question_id":485530,"body_markdown":"You can use [JEdit&#39;s textarea][1] with built-in completion &amp; syntax highlighting framework.\r\n\r\nA more heavyweight solution (that is good on the long term) is use [NetBeans Platform][2].\r\n\r\n\r\n  [1]: http://www.jedit.org/\r\n  [2]: http://platform.netbeans.org/","title":"How could I implement autocompletion using Swing?","body":"<p>You can use <a href=\"http://www.jedit.org/\" rel=\"nofollow noreferrer\">JEdit's textarea</a> with built-in completion &amp; syntax highlighting framework.</p>\n\n<p>A more heavyweight solution (that is good on the long term) is use <a href=\"http://platform.netbeans.org/\" rel=\"nofollow noreferrer\">NetBeans Platform</a>.</p>\n"},{"tags":[],"owner":{"account_id":1917,"reputation":17895,"user_id":2644,"accept_rate":82,"display_name":"pek"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1282822344,"creation_date":1282822344,"answer_id":3574648,"question_id":485530,"body_markdown":"Here is a great article that uses a couple of libraries: [Adding Auto-Complete Support to Swing Comboboxes](http://today.java.net/pub/a/today/2007/07/19/adding-auto-completion-to-swing-comboboxes.html) @Java.net","title":"How could I implement autocompletion using Swing?","body":"<p>Here is a great article that uses a couple of libraries: <a href=\"http://today.java.net/pub/a/today/2007/07/19/adding-auto-completion-to-swing-comboboxes.html\" rel=\"nofollow noreferrer\">Adding Auto-Complete Support to Swing Comboboxes</a> @Java.net</p>\n"},{"tags":[],"owner":{"account_id":652180,"reputation":31,"user_id":453690,"display_name":"Maciej Modelski"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1285059976,"creation_date":1285059976,"answer_id":3758765,"question_id":485530,"body_markdown":"You can use this library:\r\nhttp://fifesoft.com/autocomplete/","title":"How could I implement autocompletion using Swing?","body":"<p>You can use this library:\n<a href=\"http://fifesoft.com/autocomplete/\" rel=\"nofollow noreferrer\">http://fifesoft.com/autocomplete/</a></p>\n"}],"owner":{"account_id":15119,"reputation":93923,"user_id":31610,"accept_rate":87,"display_name":"Geo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30742,"favorite_count":0,"down_vote_count":0,"up_vote_count":29,"accepted_answer_id":992492,"answer_count":8,"score":29,"last_activity_date":1634079533,"creation_date":1233094036,"question_id":485530,"body_markdown":"I&#39;m interested in providing an autocompletion box in a JFrame. The triggering mechanism will be based on mnemonics (I think), but I&#39;m not really sure what to use for the &quot;autocompletion box&quot; (I would like results to be filtered as the user presses keys).\r\n\r\nHow would you implement this? Some sort of JFrame, or a JPopupMenu? \r\n\r\nI would like to know how this is implemented, so please don&#39;t post links to available [J]Components.\r\n","title":"How could I implement autocompletion using Swing?","body":"<p>I'm interested in providing an autocompletion box in a JFrame. The triggering mechanism will be based on mnemonics (I think), but I'm not really sure what to use for the \"autocompletion box\" (I would like results to be filtered as the user presses keys).</p>\n\n<p>How would you implement this? Some sort of JFrame, or a JPopupMenu? </p>\n\n<p>I would like to know how this is implemented, so please don't post links to available [J]Components.</p>\n"},{"tags":["java","spring-webflux","project-reactor","reactive","java-15"],"comments":[{"owner":{"account_id":1268556,"reputation":48088,"user_id":1225328,"accept_rate":93,"display_name":"sp00m"},"score":0,"creation_date":1634038108,"post_id":69539550,"comment_id":122913783,"body_markdown":"Could you format your code to make it both valid and readable?","body":"Could you format your code to make it both valid and readable?"},{"owner":{"account_id":13821491,"reputation":13,"user_id":14466603,"display_name":"user9976805"},"score":0,"creation_date":1634038311,"post_id":69539550,"comment_id":122913866,"body_markdown":"Hi @sp00m I have reformatted the json response. Thanks","body":"Hi @sp00m I have reformatted the json response. Thanks"}],"owner":{"account_id":13821491,"reputation":13,"user_id":14466603,"display_name":"user9976805"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1634079438,"creation_date":1634037190,"question_id":69539550,"body_markdown":"I am getting the response in java using the following code \r\n\r\n```\r\nList&lt;Dto&gt; Dtos = myConsignmentDao.fetchMyData(myConsignmentRequest);\r\n\r\nif(!Dtos.isEmpty()){\r\n    List&lt;MyConsignmentData&gt; myDetails  = Dtos.stream()\r\n                    .collect(Collectors.groupingBy(Dto::getConsignmentNumber))\r\n                    .entrySet().stream()\r\n                    .map(myConsData -&gt; getMyData(myConsData))\r\n                    .collect(Collectors.toList());\r\n        myResponse.setMyConsignments(myDetails);\r\n        myResponse.setMyConsignments(myDetails);\r\n        return myResponse;\r\n    }\r\n}\r\n```\r\n\r\nAnd My response is \r\n\r\n \r\n```\r\n{\r\n    &quot;myNumber&quot;: [\r\n        {\r\n            &quot;Number&quot;: &quot;12345&quot;,\r\n            &quot;consignmentItems&quot;: [\r\n                {\r\n                    &quot;ItemNumber&quot;: &quot;678954&quot;,\r\n                    &quot;deliveryDate&quot;: &quot;2021-01-05 09:09:53+00&quot;\r\n                }\r\n    ],\r\n    &quot;emailAddress&quot;: &quot;myresult@gmail.com&quot;,\r\n    &quot;mobileNumber&quot;: &quot;+91377383&quot;,\r\n    &quot;partyType&quot;: &quot;Receiver&quot;,\r\n    &quot;creationDate&quot;: &quot;2020-12-29&quot;\r\n}\r\n```\r\n\r\nI have written code using flux \r\n\r\n    Flux&lt;MtDto&gt; myDtos = myDao.fetchMyData(myConsignmentRequest);\r\n    myDtos.groupBy(MyConsignmentsDto::getConsignmentNumber).collectList();\r\n\r\nBecause of this I am getting only root object fields i.e myNumber, mobileNumber, email address not itemNumber and delivery date can someone help me write code using webflux.\r\n","title":"GroupBy in Webflux","body":"<p>I am getting the response in java using the following code</p>\n<pre><code>List&lt;Dto&gt; Dtos = myConsignmentDao.fetchMyData(myConsignmentRequest);\n\nif(!Dtos.isEmpty()){\n    List&lt;MyConsignmentData&gt; myDetails  = Dtos.stream()\n                    .collect(Collectors.groupingBy(Dto::getConsignmentNumber))\n                    .entrySet().stream()\n                    .map(myConsData -&gt; getMyData(myConsData))\n                    .collect(Collectors.toList());\n        myResponse.setMyConsignments(myDetails);\n        myResponse.setMyConsignments(myDetails);\n        return myResponse;\n    }\n}\n</code></pre>\n<p>And My response is</p>\n<pre><code>{\n    &quot;myNumber&quot;: [\n        {\n            &quot;Number&quot;: &quot;12345&quot;,\n            &quot;consignmentItems&quot;: [\n                {\n                    &quot;ItemNumber&quot;: &quot;678954&quot;,\n                    &quot;deliveryDate&quot;: &quot;2021-01-05 09:09:53+00&quot;\n                }\n    ],\n    &quot;emailAddress&quot;: &quot;myresult@gmail.com&quot;,\n    &quot;mobileNumber&quot;: &quot;+91377383&quot;,\n    &quot;partyType&quot;: &quot;Receiver&quot;,\n    &quot;creationDate&quot;: &quot;2020-12-29&quot;\n}\n</code></pre>\n<p>I have written code using flux</p>\n<pre><code>Flux&lt;MtDto&gt; myDtos = myDao.fetchMyData(myConsignmentRequest);\nmyDtos.groupBy(MyConsignmentsDto::getConsignmentNumber).collectList();\n</code></pre>\n<p>Because of this I am getting only root object fields i.e myNumber, mobileNumber, email address not itemNumber and delivery date can someone help me write code using webflux.</p>\n"},{"tags":["java","jsf","servlets"],"answers":[{"tags":[],"owner":{"account_id":120487,"reputation":5363,"user_id":312958,"accept_rate":100,"display_name":"Jose Diaz"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1279740605,"creation_date":1279740605,"answer_id":3303038,"question_id":3302933,"body_markdown":"You already have you answer :) I&#39;m afraid you&#39;ll have to use it that way, since every HTTP request will have to be retrieve from the faces context. You could, of course, simplify some part of this method, like the faces context retrieval, but its definitively the way to go, unless you use some kind of framework that abstracts away those details and let you get to the HttpRequest Object directly.\r\n\r\nRegards.","title":"Get the request URL in a JSF bean?","body":"<p>You already have you answer :) I'm afraid you'll have to use it that way, since every HTTP request will have to be retrieve from the faces context. You could, of course, simplify some part of this method, like the faces context retrieval, but its definitively the way to go, unless you use some kind of framework that abstracts away those details and let you get to the HttpRequest Object directly.</p>\n\n<p>Regards.</p>\n"},{"tags":[],"owner":{"account_id":52822,"reputation":1088970,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"down_vote_count":0,"up_vote_count":31,"is_accepted":true,"score":31,"last_activity_date":1279855717,"creation_date":1279747313,"answer_id":3303971,"question_id":3302933,"body_markdown":"If you ever need to haul the raw Servlet API from under the JSF hoods by the `FacesContext`, then chances are that you&#39;re doing the job at the wrong place. What is it, the functional requirement for which you thought that this is the right solution? Should you maybe not be using a real `Servlet` class or a `Filter` instead of a JSF managed bean? Or maybe don&#39;t you need the request URL at all because there are better &quot;jsfish&quot; ways to achieve the same?\r\n\r\nIf you update your question to include the detail about the functional requirement, then we may be able to suggest the right solution.\r\n\r\n---\r\n\r\n**Update** as per your edit: so, you just need it after all in the view side? E.g. `#{bean.requestURL}`? You can also just grab it from the `HttpServletRequest` object which is already implicitly available in EL. \r\n\r\nWhen you&#39;re on JSP:\r\n\r\n    ${pageContext.request.requestURL}\r\n\r\nOr when you&#39;re on Facelets:\r\n\r\n    #{request.requestURL}\r\n\r\nAnd now, how do you need it for JavaScript? Printing as a JavaScript variable? Like so?\r\n\r\n    var url = &#39;#{request.requestURL}&#39;;\r\n\r\nIf so, you could also just grab [`window.location`][1] for that.\r\n\r\n    var url = window.location;\r\n\r\nNo need to clutter the JSF bean with the view specific details.\r\n\r\n\r\n  [1]: https://developer.mozilla.org/en/window.location","title":"Get the request URL in a JSF bean?","body":"<p>If you ever need to haul the raw Servlet API from under the JSF hoods by the <code>FacesContext</code>, then chances are that you're doing the job at the wrong place. What is it, the functional requirement for which you thought that this is the right solution? Should you maybe not be using a real <code>Servlet</code> class or a <code>Filter</code> instead of a JSF managed bean? Or maybe don't you need the request URL at all because there are better \"jsfish\" ways to achieve the same?</p>\n\n<p>If you update your question to include the detail about the functional requirement, then we may be able to suggest the right solution.</p>\n\n<hr>\n\n<p><strong>Update</strong> as per your edit: so, you just need it after all in the view side? E.g. <code>#{bean.requestURL}</code>? You can also just grab it from the <code>HttpServletRequest</code> object which is already implicitly available in EL. </p>\n\n<p>When you're on JSP:</p>\n\n<pre><code>${pageContext.request.requestURL}\n</code></pre>\n\n<p>Or when you're on Facelets:</p>\n\n<pre><code>#{request.requestURL}\n</code></pre>\n\n<p>And now, how do you need it for JavaScript? Printing as a JavaScript variable? Like so?</p>\n\n<pre><code>var url = '#{request.requestURL}';\n</code></pre>\n\n<p>If so, you could also just grab <a href=\"https://developer.mozilla.org/en/window.location\" rel=\"noreferrer\"><code>window.location</code></a> for that.</p>\n\n<pre><code>var url = window.location;\n</code></pre>\n\n<p>No need to clutter the JSF bean with the view specific details.</p>\n"},{"tags":[],"owner":{"account_id":14668216,"reputation":47,"user_id":10593431,"display_name":"Mahdi"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1634078660,"creation_date":1634078660,"answer_id":69547781,"question_id":3302933,"body_markdown":"you can get url with all parameters so:\r\n\r\n    HttpServletRequest req = (HttpServletRequest) FacesContext.getCurrentInstance().getExternalContext()\r\n\t\t\t\t\t\t.getRequest();\r\n\tString url = req.getHeader(&quot;referer&quot;);","title":"Get the request URL in a JSF bean?","body":"<p>you can get url with all parameters so:</p>\n<pre><code>HttpServletRequest req = (HttpServletRequest) FacesContext.getCurrentInstance().getExternalContext()\n                    .getRequest();\nString url = req.getHeader(&quot;referer&quot;);\n</code></pre>\n"}],"owner":{"account_id":49462,"reputation":3715,"user_id":147265,"accept_rate":95,"display_name":"Adam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47151,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"accepted_answer_id":3303971,"answer_count":3,"score":19,"last_activity_date":1634078660,"creation_date":1279739838,"question_id":3302933,"body_markdown":"How do you get the request URL in a bean backing a JSF page? I&#39;ve been looking through the FacesContext docs and the best way I could find seems terribly long:\r\n\r\n    public String getRequestURL()\r\n    {\r\n    \tObject request = FacesContext.getCurrentInstance().getExternalContext().getRequest();\r\n    \tif(request instanceof HttpServletRequest)\r\n        {\r\n    \t        return ((HttpServletRequest) request).getRequestURL().toString();\r\n        }else\r\n        {\r\n            return &quot;&quot;;\r\n        }\r\n    }\r\n\r\n**Edit: Functional Requirements** The requirement here is that we need the full URL for a third party javascript utility. The use or architecture of the utility doesn&#39;t fit well with JSF, but everything short of this call does. The method I found will work, but it felt wrong to be digging so deep into the FacesContext. Additionally I was hoping there would be a way that could be called with JSF Expression Language since this is going to be used in a &quot;view&quot; related way. ","title":"Get the request URL in a JSF bean?","body":"<p>How do you get the request URL in a bean backing a JSF page? I've been looking through the FacesContext docs and the best way I could find seems terribly long:</p>\n\n<pre><code>public String getRequestURL()\n{\n    Object request = FacesContext.getCurrentInstance().getExternalContext().getRequest();\n    if(request instanceof HttpServletRequest)\n    {\n            return ((HttpServletRequest) request).getRequestURL().toString();\n    }else\n    {\n        return \"\";\n    }\n}\n</code></pre>\n\n<p><strong>Edit: Functional Requirements</strong> The requirement here is that we need the full URL for a third party javascript utility. The use or architecture of the utility doesn't fit well with JSF, but everything short of this call does. The method I found will work, but it felt wrong to be digging so deep into the FacesContext. Additionally I was hoping there would be a way that could be called with JSF Expression Language since this is going to be used in a \"view\" related way. </p>\n"},{"tags":["java","maven","intellij-idea"],"comments":[{"owner":{"account_id":36734,"reputation":392127,"user_id":104891,"display_name":"CrazyCoder"},"score":0,"creation_date":1634075467,"post_id":69547356,"comment_id":122927894,"body_markdown":"Could by caused by you antivirus/security tool. Check the Windows Event Log. Also try adding Maven home directory, `bin` subdirectory to the `PATH` environment variable and reboot.","body":"Could by caused by you antivirus/security tool. Check the Windows Event Log. Also try adding Maven home directory, <code>bin</code> subdirectory to the <code>PATH</code> environment variable and reboot."}],"answers":[{"tags":[],"owner":{"account_id":14937373,"reputation":328,"user_id":10901306,"display_name":"Zukaru"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1634078456,"creation_date":1634077987,"answer_id":69547706,"question_id":69547356,"body_markdown":"Terminal might be different with intellij setup. You can run the maven task through maven tool window from Intellij tab, like this\n [tutorial](https://www.jetbrains.com/help/idea/maven-projects-tool-window.html).\n[![example maven toolbar][1]][1]\n\nOr if you insist to use through the terminal, you might want to check your environment variables in your windows settings. And add variable `MAVEN_HOME` with the value of the maven install directory. Then add value `%MAVEN_HOME%\\bin` in your system `Path` variable.\n\n\n  [1]: https://i.stack.imgur.com/reKWZ.jpg","title":"Using maven commands in the Intellij terminal returns Process terminated","body":"<p>Terminal might be different with intellij setup. You can run the maven task through maven tool window from Intellij tab, like this\n<a href=\"https://www.jetbrains.com/help/idea/maven-projects-tool-window.html\" rel=\"nofollow noreferrer\">tutorial</a>.\n<a href=\"https://i.stack.imgur.com/reKWZ.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/reKWZ.jpg\" alt=\"example maven toolbar\" /></a></p>\n<p>Or if you insist to use through the terminal, you might want to check your environment variables in your windows settings. And add variable <code>MAVEN_HOME</code> with the value of the maven install directory. Then add value <code>%MAVEN_HOME%\\bin</code> in your system <code>Path</code> variable.</p>\n"}],"owner":{"account_id":22888592,"reputation":23,"user_id":17029078,"display_name":"javaontp"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2678,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69547706,"answer_count":1,"score":1,"last_activity_date":1634078456,"creation_date":1634075047,"question_id":69547356,"body_markdown":"I have maven installed and linked to the project through specifying the home path ([Maven home path][2]) in the project settings as Intellij instructs. Whenever running any command with the `mvn` prefix like `mvn -v` it returns `Process Terminated` \r\n\r\n[Process Terminated][1]\r\n\r\nIf run without the ide the terminal returns `C:\\Users\\jacec\\OneDrive\\Desktop\\DMA\\maventest&gt;mvn -v\r\n&#39;mvn&#39; is not recognized as an internal or external command,\r\noperable program or batch file.\r\n`\r\n\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/JxqIu.png\r\n  [2]: https://i.stack.imgur.com/IEYkh.png","title":"Using maven commands in the Intellij terminal returns Process terminated","body":"<p>I have maven installed and linked to the project through specifying the home path (<a href=\"https://i.stack.imgur.com/IEYkh.png\" rel=\"nofollow noreferrer\">Maven home path</a>) in the project settings as Intellij instructs. Whenever running any command with the <code>mvn</code> prefix like <code>mvn -v</code> it returns <code>Process Terminated</code></p>\n<p><a href=\"https://i.stack.imgur.com/JxqIu.png\" rel=\"nofollow noreferrer\">Process Terminated</a></p>\n<p>If run without the ide the terminal returns <code>C:\\Users\\jacec\\OneDrive\\Desktop\\DMA\\maventest&gt;mvn -v 'mvn' is not recognized as an internal or external command, operable program or batch file. </code></p>\n"},{"tags":["java","string","stream","substring","frequency"],"answers":[{"tags":[],"owner":{"account_id":2179728,"reputation":73047,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1633797472,"creation_date":1633793711,"answer_id":69508187,"question_id":69508035,"body_markdown":"You can use `Stream` API and RegEx API as shown below to meet this requirement:\r\n\r\n    import java.util.regex.MatchResult;\r\n    import java.util.regex.Pattern;\r\n    \r\n    public class Main {\r\n    \tpublic static void main(String args[]) {\r\n            // find the occurance of &#39;CO&#39; in the given string using stream API\r\n    \t\tString str = &quot;WELCOMEWELCOME&quot;;\r\n    \t\tString substring = &quot;CO&quot;;\r\n    \t\t\r\n    \t\tSystem.out.println(getSubstringCount(str, substring));\r\n    \t}\r\n    \tstatic long getSubstringCount(String str, String substring) {\r\n            return Pattern.compile(substring)\r\n                    .matcher(str)\r\n                    .results()\r\n                    .map(MatchResult::group)\r\n                    .count();\r\n        }\r\n    }\r\n\r\n**Output:**\r\n\r\n    2\r\n\r\n[&lt;kbd&gt;ONLINE DEMO&lt;/kbd&gt;][1]\r\n\r\n\r\n  [1]: https://ideone.com/aDaOHd","title":"How To Find The Repeated occurrence of substring in String Using Java Stream API","body":"<p>You can use <code>Stream</code> API and RegEx API as shown below to meet this requirement:</p>\n<pre><code>import java.util.regex.MatchResult;\nimport java.util.regex.Pattern;\n\npublic class Main {\n    public static void main(String args[]) {\n        // find the occurance of 'CO' in the given string using stream API\n        String str = &quot;WELCOMEWELCOME&quot;;\n        String substring = &quot;CO&quot;;\n        \n        System.out.println(getSubstringCount(str, substring));\n    }\n    static long getSubstringCount(String str, String substring) {\n        return Pattern.compile(substring)\n                .matcher(str)\n                .results()\n                .map(MatchResult::group)\n                .count();\n    }\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>2\n</code></pre>\n<p><a href=\"https://ideone.com/aDaOHd\" rel=\"noreferrer\"><kbd>ONLINE DEMO</kbd></a></p>\n"}],"owner":{"account_id":22988875,"reputation":29,"user_id":17114687,"display_name":"Krunal Khairnar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":332,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":1,"score":2,"last_activity_date":1634078365,"creation_date":1633792490,"question_id":69508035,"body_markdown":"    public class Test {    \r\n    \tpublic static void main(String[] args) {\r\n           String str = &quot;WELCOMEWELCOME&quot;;\r\n           // find the occurance of &#39;CO&#39; in the given string using stream API\r\n    \t}\r\n    }","title":"How To Find The Repeated occurrence of substring in String Using Java Stream API","body":"<pre><code>public class Test {    \n    public static void main(String[] args) {\n       String str = &quot;WELCOMEWELCOME&quot;;\n       // find the occurance of 'CO' in the given string using stream API\n    }\n}\n</code></pre>\n"},{"tags":["java","escaping","jsoup","html-entities"],"comments":[{"owner":{"account_id":237493,"reputation":11836,"user_id":505714,"accept_rate":87,"display_name":"Alexis Dufrenoy"},"score":0,"creation_date":1633364790,"post_id":69438688,"comment_id":122734814,"body_markdown":"I also tried with version 1.14.3, to no avail.","body":"I also tried with version 1.14.3, to no avail."}],"answers":[{"tags":[],"owner":{"account_id":22450291,"reputation":364,"user_id":16653700,"display_name":"Alias Cartellano"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634078296,"creation_date":1633396496,"answer_id":69443887,"question_id":69438688,"body_markdown":"You can pass your doc string to the `escapeHtml4()` or `escapeHtml3()` method of `StringEscapeUtils` from `org.apache.commons.text` to solve your problem:\r\n\r\n### Code:\r\n```java\r\nimport org.jsoup.*;\r\nimport org.jsoup.nodes.Entities;\r\nimport org.apache.commons.text.*;\r\n\r\npublic class MyClass {\r\n    public static void main(String[] args) {\r\n        String strHTMLInput = &quot;&lt;p style=\\&quot;text-align: justify;\\&quot;&gt;Cet amendement vise &amp;#224; rectifier le montant des annulations sur le programme 181 &amp;#171;&amp;#160;Pr&amp;#233;vention des risques&amp;#160;&amp;#187;, de la mission &amp;#171;&amp;#160;&amp;#201;cologie, d&amp;#233;veloppement et mobilit&amp;#233;s durables&amp;#160;&amp;#187;, en l&amp;#8217;abaissant de 24,2&amp;#160;M&amp;#8364;.&lt;/p&gt;\\n&quot; +\r\n                &quot;&lt;p style=\\&quot;text-align: justify;\\&quot;&gt;Cette minoration des annulations est propos&amp;#233;e dans le cadre du red&amp;#233;ploiement de cr&amp;#233;dits du programme d&amp;#8217;investissements d&amp;#8217;avenir (PIA) depuis les actions du PIA port&amp;#233;es par l&amp;#8217;Agence de l&amp;#8217;environnement et de la ma&amp;#238;trise de l&amp;#8217;&amp;#233;nergie (ADEME), vers l&amp;#8217;action &amp;#171;&amp;#160;Equipex&amp;#160;&amp;#187; port&amp;#233;e par l&amp;#8217;Agence nationale de la recherche (ANR), pour financer les projets &amp;#171;&amp;#160;Microcarb&amp;#160;&amp;#187; et &amp;#171;&amp;#160;Polar Pod&amp;#160;&amp;#187;. Le red&amp;#233;ploiement concernera pour l&amp;#8217;ADEME l&amp;#8217;action &amp;#171;&amp;#160;V&amp;#233;hicules et transporteurs du futur&amp;#160;&amp;#187;, &amp;#224; hauteur de 40&amp;#160;M&amp;#8364; et l&amp;#8217;action &amp;#171;&amp;#160;D&amp;#233;monstrateurs de la transition &amp;#233;nerg&amp;#233;tique&amp;#160;&amp;#187;, &amp;#224; hauteur de 10,8&amp;#160;M&amp;#8364;. Le soutien aux deux projets &amp;#171;&amp;#160;Microcarb&amp;#160;&amp;#187; et &amp;#171;&amp;#160;Polar Pod&amp;#160;&amp;#187; demeure complet, cette modification constituant un simple ajustement qui permet, tout en maintenant le soutien &amp;#224; &amp;#171;&amp;#160;Polar Pod&amp;#160;&amp;#187; et &amp;#171;&amp;#160;Microcarb&amp;#160;&amp;#187;, de pr&amp;#233;server des moyens sur l&amp;#8217;action &amp;#171;&amp;#160;V&amp;#233;hicules et transporteurs du futur&amp;#160;&amp;#187; du PIA en vue de la conclusion des assises de la mobilit&amp;#233;.&lt;/p&gt;\\n&quot; +\r\n                &quot;&lt;p style=\\&quot;text-align: justify;\\&quot;&gt;Cet amendement est compl&amp;#233;t&amp;#233; par un amendement miroir sur le programme 172 &amp;#171;&amp;#160;Recherches scientifiques et technologiques pluridisciplinaires&amp;#160;&amp;#187;, de la mission &amp;#171;&amp;#160;Recherche et enseignement sup&amp;#233;rieur&amp;#160;&amp;#187;.&lt;/p&gt;&quot;;\r\n        org.jsoup.nodes.Document doc = Jsoup.parse(strHTMLInput);\r\n\r\n        // This should normally do the trick\r\n        doc.outputSettings().prettyPrint(false).escapeMode(Entities.EscapeMode.extended);\r\n        String strEscapeHTML = StringEscapeUtils.escapeHtml3(doc.body().html());\r\n        System.out.println(&quot;Escaped HTML &gt;&gt;&gt; &quot; + strEscapeHTML);\r\n    }\r\n}\r\n```\r\n\r\n### Output:\r\n```\r\nEscaped HTML &gt;&gt;&gt; &amp;lt;p style=&amp;quot;text-align: justify;&amp;quot;&amp;gt;Cet amendement vise &amp;agrave; rectifier le montant des annulations sur le programme 181 &amp;laquo;&amp;amp;nbsp;Pr&amp;eacute;vention des risques&amp;amp;nbsp;&amp;raquo;, de la mission &amp;laquo;&amp;amp;nbsp;&amp;Eacute;cologie, d&amp;eacute;veloppement et mobilit&amp;eacute;s durables&amp;amp;nbsp;&amp;raquo;, en labaissant de 24,2&amp;amp;nbsp;M.&amp;lt;/p&amp;gt;\r\n&amp;lt;p style=&amp;quot;text-align: justify;&amp;quot;&amp;gt;Cette minoration des annulations est propos&amp;eacute;e dans le cadre du red&amp;eacute;ploiement de cr&amp;eacute;dits du programme dinvestissements davenir (PIA) depuis les actions du PIA port&amp;eacute;es par lAgence de lenvironnement et de la ma&amp;icirc;trise de l&amp;eacute;nergie (ADEME), vers laction &amp;laquo;&amp;amp;nbsp;Equipex&amp;amp;nbsp;&amp;raquo; port&amp;eacute;e par lAgence nationale de la recherche (ANR), pour financer les projets &amp;laquo;&amp;amp;nbsp;Microcarb&amp;amp;nbsp;&amp;raquo; et &amp;laquo;&amp;amp;nbsp;Polar Pod&amp;amp;nbsp;&amp;raquo;. Le red&amp;eacute;ploiement concernera pour lADEME laction &amp;laquo;&amp;amp;nbsp;V&amp;eacute;hicules et transporteurs du futur&amp;amp;nbsp;&amp;raquo;, &amp;agrave; hauteur de 40&amp;amp;nbsp;M et laction &amp;laquo;&amp;amp;nbsp;D&amp;eacute;monstrateurs de la transition &amp;eacute;nerg&amp;eacute;tique&amp;amp;nbsp;&amp;raquo;, &amp;agrave; hauteur de 10,8&amp;amp;nbsp;M. Le soutien aux deux projets &amp;laquo;&amp;amp;nbsp;Microcarb&amp;amp;nbsp;&amp;raquo; et &amp;laquo;&amp;amp;nbsp;Polar Pod&amp;amp;nbsp;&amp;raquo; demeure complet, cette modification constituant un simple ajustement qui permet, tout en maintenant le soutien &amp;agrave; &amp;laquo;&amp;amp;nbsp;Polar Pod&amp;amp;nbsp;&amp;raquo; et &amp;laquo;&amp;amp;nbsp;Microcarb&amp;amp;nbsp;&amp;raquo;, de pr&amp;eacute;server des moyens sur laction &amp;laquo;&amp;amp;nbsp;V&amp;eacute;hicules et transporteurs du futur&amp;amp;nbsp;&amp;raquo; du PIA en vue de la conclusion des assises de la mobilit&amp;eacute;.&amp;lt;/p&amp;gt;\r\n&amp;lt;p style=&amp;quot;text-align: justify;&amp;quot;&amp;gt;Cet amendement est compl&amp;eacute;t&amp;eacute; par un amendement miroir sur le programme 172 &amp;laquo;&amp;amp;nbsp;Recherches scientifiques et technologiques pluridisciplinaires&amp;amp;nbsp;&amp;raquo;, de la mission &amp;laquo;&amp;amp;nbsp;Recherche et enseignement sup&amp;eacute;rieur&amp;amp;nbsp;&amp;raquo;.&amp;lt;/p&amp;gt;\r\n```\r\n\r\n**Note**: You may want to reapply the missing segments from your code.\r\n### Edit:\r\nSince it was requested that html special characters remain unchanged, I devised the following:\r\n\r\n### Code:\r\n```\r\nimport org.jsoup.*;\r\nimport org.jsoup.nodes.Entities;\r\nimport org.jsoup.nodes.Element;\r\nimport org.jsoup.select.Elements;\r\nimport org.apache.commons.text.*;\r\n\r\npublic class MyClass {\r\n    public static void main(String[] args) {\r\n        String strHTMLInput = &quot;&lt;p style=\\&quot;text-align: justify;\\&quot;&gt;Cet amendement vise &amp;#224; rectifier le montant des annulations sur le programme 181 &amp;#171;&amp;#160;Pr&amp;#233;vention des risques&amp;#160;&amp;#187;, de la mission &amp;#171;&amp;#160;&amp;#201;cologie, d&amp;#233;veloppement et mobilit&amp;#233;s durables&amp;#160;&amp;#187;, en l&amp;#8217;abaissant de 24,2&amp;#160;M&amp;#8364;.&lt;/p&gt;\\n&quot; +\r\n                &quot;&lt;p style=\\&quot;text-align: justify;\\&quot;&gt;Cette minoration des annulations est propos&amp;#233;e dans le cadre du red&amp;#233;ploiement de cr&amp;#233;dits du programme d&amp;#8217;investissements d&amp;#8217;avenir (PIA) depuis les actions du PIA port&amp;#233;es par l&amp;#8217;Agence de l&amp;#8217;environnement et de la ma&amp;#238;trise de l&amp;#8217;&amp;#233;nergie (ADEME), vers l&amp;#8217;action &amp;#171;&amp;#160;Equipex&amp;#160;&amp;#187; port&amp;#233;e par l&amp;#8217;Agence nationale de la recherche (ANR), pour financer les projets &amp;#171;&amp;#160;Microcarb&amp;#160;&amp;#187; et &amp;#171;&amp;#160;Polar Pod&amp;#160;&amp;#187;. Le red&amp;#233;ploiement concernera pour l&amp;#8217;ADEME l&amp;#8217;action &amp;#171;&amp;#160;V&amp;#233;hicules et transporteurs du futur&amp;#160;&amp;#187;, &amp;#224; hauteur de 40&amp;#160;M&amp;#8364; et l&amp;#8217;action &amp;#171;&amp;#160;D&amp;#233;monstrateurs de la transition &amp;#233;nerg&amp;#233;tique&amp;#160;&amp;#187;, &amp;#224; hauteur de 10,8&amp;#160;M&amp;#8364;. Le soutien aux deux projets &amp;#171;&amp;#160;Microcarb&amp;#160;&amp;#187; et &amp;#171;&amp;#160;Polar Pod&amp;#160;&amp;#187; demeure complet, cette modification constituant un simple ajustement qui permet, tout en maintenant le soutien &amp;#224; &amp;#171;&amp;#160;Polar Pod&amp;#160;&amp;#187; et &amp;#171;&amp;#160;Microcarb&amp;#160;&amp;#187;, de pr&amp;#233;server des moyens sur l&amp;#8217;action &amp;#171;&amp;#160;V&amp;#233;hicules et transporteurs du futur&amp;#160;&amp;#187; du PIA en vue de la conclusion des assises de la mobilit&amp;#233;.&lt;/p&gt;\\n&quot; +\r\n                &quot;&lt;p style=\\&quot;text-align: justify;\\&quot;&gt;Cet amendement est compl&amp;#233;t&amp;#233; par un amendement miroir sur le programme 172 &amp;#171;&amp;#160;Recherches scientifiques et technologiques pluridisciplinaires&amp;#160;&amp;#187;, de la mission &amp;#171;&amp;#160;Recherche et enseignement sup&amp;#233;rieur&amp;#160;&amp;#187;.&lt;/p&gt;&quot;;\r\n        org.jsoup.nodes.Document doc = Jsoup.parse(strHTMLInput);\r\n        \r\n        // This should normally do the trick\r\n        doc.outputSettings().prettyPrint(false).escapeMode(null);\r\n        String strUnescapeHTML = StringEscapeUtils.unescapeHtml4(doc.body().html());\r\n        String strEscapeHTML = StringEscapeUtils.escapeHtml4(strUnescapeHTML);\r\n        String unescapeHtml=strEscapeHTML;\r\n        Elements elements=doc.body().children();\r\n        for(Element element: elements){\r\n            element.text(StringEscapeUtils.escapeHtml4(element.text()));\r\n        }\r\n\r\n        \r\n        System.out.println(&quot;\\nUnescaped HTML &gt;&gt;&gt; &quot; + strUnescapeHTML);\r\n        System.out.println(&quot;\\nEscaped HTML &gt;&gt;&gt; &quot; + StringEscapeUtils.unescapeXml(doc.body().html()));\r\n    }\r\n}\r\n```\r\n\r\n### Output:\r\n```\r\nUnescaped HTML &gt;&gt;&gt; &lt;p style=&quot;text-align: justify;&quot;&gt;Cet amendement vise &#224; rectifier le montant des annulations sur le programme 181 &#171;&#160;Pr&#233;vention des risques&#160;&#187;, de la mission &#171;&#160;&#201;cologie, d&#233;veloppement et mobilit&#233;s durables&#160;&#187;, en labaissant de 24,2&#160;M.&lt;/p&gt;\r\n&lt;p style=&quot;text-align: justify;&quot;&gt;Cette minoration des annulations est propos&#233;e dans le cadre du red&#233;ploiement de cr&#233;dits du programme dinvestissements davenir (PIA) depuis les actions du PIA port&#233;es par lAgence de lenvironnement et de la ma&#238;trise de l&#233;nergie (ADEME), vers laction &#171;&#160;Equipex&#160;&#187; port&#233;e par lAgence nationale de la recherche (ANR), pour financer les projets &#171;&#160;Microcarb&#160;&#187; et &#171;&#160;Polar Pod&#160;&#187;. Le red&#233;ploiement concernera pour lADEME laction &#171;&#160;V&#233;hicules et transporteurs du futur&#160;&#187;, &#224; hauteur de 40&#160;M et laction &#171;&#160;D&#233;monstrateurs de la transition &#233;nerg&#233;tique&#160;&#187;, &#224; hauteur de 10,8&#160;M. Le soutien aux deux projets &#171;&#160;Microcarb&#160;&#187; et &#171;&#160;Polar Pod&#160;&#187; demeure complet, cette modification constituant un simple ajustement qui permet, tout en maintenant le soutien &#224; &#171;&#160;Polar Pod&#160;&#187; et &#171;&#160;Microcarb&#160;&#187;, de pr&#233;server des moyens sur laction &#171;&#160;V&#233;hicules et transporteurs du futur&#160;&#187; du PIA en vue de la conclusion des assises de la mobilit&#233;.&lt;/p&gt;\r\n&lt;p style=&quot;text-align: justify;&quot;&gt;Cet amendement est compl&#233;t&#233; par un amendement miroir sur le programme 172 &#171;&#160;Recherches scientifiques et technologiques pluridisciplinaires&#160;&#187;, de la mission &#171;&#160;Recherche et enseignement sup&#233;rieur&#160;&#187;.&lt;/p&gt;\r\n\r\nEscaped HTML &gt;&gt;&gt; &lt;p style=&quot;text-align: justify;&quot;&gt;Cet amendement vise &amp;agrave; rectifier le montant des annulations sur le programme 181 &amp;laquo; Pr&amp;eacute;vention des risques &amp;raquo;, de la mission &amp;laquo; &amp;Eacute;cologie, d&amp;eacute;veloppement et mobilit&amp;eacute;s durables &amp;raquo;, en l&amp;rsquo;abaissant de 24,2 M&amp;euro;.&lt;/p&gt;\r\n&lt;p style=&quot;text-align: justify;&quot;&gt;Cette minoration des annulations est propos&amp;eacute;e dans le cadre du red&amp;eacute;ploiement de cr&amp;eacute;dits du programme d&amp;rsquo;investissements d&amp;rsquo;avenir (PIA) depuis les actions du PIA port&amp;eacute;es par l&amp;rsquo;Agence de l&amp;rsquo;environnement et de la ma&amp;icirc;trise de l&amp;rsquo;&amp;eacute;nergie (ADEME), vers l&amp;rsquo;action &amp;laquo; Equipex &amp;raquo; port&amp;eacute;e par l&amp;rsquo;Agence nationale de la recherche (ANR), pour financer les projets &amp;laquo; Microcarb &amp;raquo; et &amp;laquo; Polar Pod &amp;raquo;. Le red&amp;eacute;ploiement concernera pour l&amp;rsquo;ADEME l&amp;rsquo;action &amp;laquo; V&amp;eacute;hicules et transporteurs du futur &amp;raquo;, &amp;agrave; hauteur de 40 M&amp;euro; et l&amp;rsquo;action &amp;laquo; D&amp;eacute;monstrateurs de la transition &amp;eacute;nerg&amp;eacute;tique &amp;raquo;, &amp;agrave; hauteur de 10,8 M&amp;euro;. Le soutien aux deux projets &amp;laquo; Microcarb &amp;raquo; et &amp;laquo; Polar Pod &amp;raquo; demeure complet, cette modification constituant un simple ajustement qui permet, tout en maintenant le soutien &amp;agrave; &amp;laquo; Polar Pod &amp;raquo; et &amp;laquo; Microcarb &amp;raquo;, de pr&amp;eacute;server des moyens sur l&amp;rsquo;action &amp;laquo; V&amp;eacute;hicules et transporteurs du futur &amp;raquo; du PIA en vue de la conclusion des assises de la mobilit&amp;eacute;.&lt;/p&gt;\r\n&lt;p style=&quot;text-align: justify;&quot;&gt;Cet amendement est compl&amp;eacute;t&amp;eacute; par un amendement miroir sur le programme 172 &amp;laquo; Recherches scientifiques et technologiques pluridisciplinaires &amp;raquo;, de la mission &amp;laquo; Recherche et enseignement sup&amp;eacute;rieur &amp;raquo;.&lt;/p&gt;\r\n```\r\n\r\nYou can just escape all the text inside the elements(using `element.text()`) to preserve the tags, however, you will have to use `StringEscapeUtils.unescapeXml()` in order to remove extra `&amp;amps;` added by the &#39;Document&#39; when you plan on using the string.\r\n\r\nReferences:\r\n[SO: jsoup encode special characters](https://stackoverflow.com/questions/9462623/use-jsoup-to-encode-html-characters).","title":"Jsoup is not escaping entities in string like it should","body":"<p>You can pass your doc string to the <code>escapeHtml4()</code> or <code>escapeHtml3()</code> method of <code>StringEscapeUtils</code> from <code>org.apache.commons.text</code> to solve your problem:</p>\n<h3>Code:</h3>\n<pre class=\"lang-java prettyprint-override\"><code>import org.jsoup.*;\nimport org.jsoup.nodes.Entities;\nimport org.apache.commons.text.*;\n\npublic class MyClass {\n    public static void main(String[] args) {\n        String strHTMLInput = &quot;&lt;p style=\\&quot;text-align: justify;\\&quot;&gt;Cet amendement vise &amp;#224; rectifier le montant des annulations sur le programme 181 &amp;#171;&amp;#160;Pr&amp;#233;vention des risques&amp;#160;&amp;#187;, de la mission &amp;#171;&amp;#160;&amp;#201;cologie, d&amp;#233;veloppement et mobilit&amp;#233;s durables&amp;#160;&amp;#187;, en l&amp;#8217;abaissant de 24,2&amp;#160;M&amp;#8364;.&lt;/p&gt;\\n&quot; +\n                &quot;&lt;p style=\\&quot;text-align: justify;\\&quot;&gt;Cette minoration des annulations est propos&amp;#233;e dans le cadre du red&amp;#233;ploiement de cr&amp;#233;dits du programme d&amp;#8217;investissements d&amp;#8217;avenir (PIA) depuis les actions du PIA port&amp;#233;es par l&amp;#8217;Agence de l&amp;#8217;environnement et de la ma&amp;#238;trise de l&amp;#8217;&amp;#233;nergie (ADEME), vers l&amp;#8217;action &amp;#171;&amp;#160;Equipex&amp;#160;&amp;#187; port&amp;#233;e par l&amp;#8217;Agence nationale de la recherche (ANR), pour financer les projets &amp;#171;&amp;#160;Microcarb&amp;#160;&amp;#187; et &amp;#171;&amp;#160;Polar Pod&amp;#160;&amp;#187;. Le red&amp;#233;ploiement concernera pour l&amp;#8217;ADEME l&amp;#8217;action &amp;#171;&amp;#160;V&amp;#233;hicules et transporteurs du futur&amp;#160;&amp;#187;, &amp;#224; hauteur de 40&amp;#160;M&amp;#8364; et l&amp;#8217;action &amp;#171;&amp;#160;D&amp;#233;monstrateurs de la transition &amp;#233;nerg&amp;#233;tique&amp;#160;&amp;#187;, &amp;#224; hauteur de 10,8&amp;#160;M&amp;#8364;. Le soutien aux deux projets &amp;#171;&amp;#160;Microcarb&amp;#160;&amp;#187; et &amp;#171;&amp;#160;Polar Pod&amp;#160;&amp;#187; demeure complet, cette modification constituant un simple ajustement qui permet, tout en maintenant le soutien &amp;#224; &amp;#171;&amp;#160;Polar Pod&amp;#160;&amp;#187; et &amp;#171;&amp;#160;Microcarb&amp;#160;&amp;#187;, de pr&amp;#233;server des moyens sur l&amp;#8217;action &amp;#171;&amp;#160;V&amp;#233;hicules et transporteurs du futur&amp;#160;&amp;#187; du PIA en vue de la conclusion des assises de la mobilit&amp;#233;.&lt;/p&gt;\\n&quot; +\n                &quot;&lt;p style=\\&quot;text-align: justify;\\&quot;&gt;Cet amendement est compl&amp;#233;t&amp;#233; par un amendement miroir sur le programme 172 &amp;#171;&amp;#160;Recherches scientifiques et technologiques pluridisciplinaires&amp;#160;&amp;#187;, de la mission &amp;#171;&amp;#160;Recherche et enseignement sup&amp;#233;rieur&amp;#160;&amp;#187;.&lt;/p&gt;&quot;;\n        org.jsoup.nodes.Document doc = Jsoup.parse(strHTMLInput);\n\n        // This should normally do the trick\n        doc.outputSettings().prettyPrint(false).escapeMode(Entities.EscapeMode.extended);\n        String strEscapeHTML = StringEscapeUtils.escapeHtml3(doc.body().html());\n        System.out.println(&quot;Escaped HTML &gt;&gt;&gt; &quot; + strEscapeHTML);\n    }\n}\n</code></pre>\n<h3>Output:</h3>\n<pre><code>Escaped HTML &gt;&gt;&gt; &amp;lt;p style=&amp;quot;text-align: justify;&amp;quot;&amp;gt;Cet amendement vise &amp;agrave; rectifier le montant des annulations sur le programme 181 &amp;laquo;&amp;amp;nbsp;Pr&amp;eacute;vention des risques&amp;amp;nbsp;&amp;raquo;, de la mission &amp;laquo;&amp;amp;nbsp;&amp;Eacute;cologie, d&amp;eacute;veloppement et mobilit&amp;eacute;s durables&amp;amp;nbsp;&amp;raquo;, en labaissant de 24,2&amp;amp;nbsp;M.&amp;lt;/p&amp;gt;\n&amp;lt;p style=&amp;quot;text-align: justify;&amp;quot;&amp;gt;Cette minoration des annulations est propos&amp;eacute;e dans le cadre du red&amp;eacute;ploiement de cr&amp;eacute;dits du programme dinvestissements davenir (PIA) depuis les actions du PIA port&amp;eacute;es par lAgence de lenvironnement et de la ma&amp;icirc;trise de l&amp;eacute;nergie (ADEME), vers laction &amp;laquo;&amp;amp;nbsp;Equipex&amp;amp;nbsp;&amp;raquo; port&amp;eacute;e par lAgence nationale de la recherche (ANR), pour financer les projets &amp;laquo;&amp;amp;nbsp;Microcarb&amp;amp;nbsp;&amp;raquo; et &amp;laquo;&amp;amp;nbsp;Polar Pod&amp;amp;nbsp;&amp;raquo;. Le red&amp;eacute;ploiement concernera pour lADEME laction &amp;laquo;&amp;amp;nbsp;V&amp;eacute;hicules et transporteurs du futur&amp;amp;nbsp;&amp;raquo;, &amp;agrave; hauteur de 40&amp;amp;nbsp;M et laction &amp;laquo;&amp;amp;nbsp;D&amp;eacute;monstrateurs de la transition &amp;eacute;nerg&amp;eacute;tique&amp;amp;nbsp;&amp;raquo;, &amp;agrave; hauteur de 10,8&amp;amp;nbsp;M. Le soutien aux deux projets &amp;laquo;&amp;amp;nbsp;Microcarb&amp;amp;nbsp;&amp;raquo; et &amp;laquo;&amp;amp;nbsp;Polar Pod&amp;amp;nbsp;&amp;raquo; demeure complet, cette modification constituant un simple ajustement qui permet, tout en maintenant le soutien &amp;agrave; &amp;laquo;&amp;amp;nbsp;Polar Pod&amp;amp;nbsp;&amp;raquo; et &amp;laquo;&amp;amp;nbsp;Microcarb&amp;amp;nbsp;&amp;raquo;, de pr&amp;eacute;server des moyens sur laction &amp;laquo;&amp;amp;nbsp;V&amp;eacute;hicules et transporteurs du futur&amp;amp;nbsp;&amp;raquo; du PIA en vue de la conclusion des assises de la mobilit&amp;eacute;.&amp;lt;/p&amp;gt;\n&amp;lt;p style=&amp;quot;text-align: justify;&amp;quot;&amp;gt;Cet amendement est compl&amp;eacute;t&amp;eacute; par un amendement miroir sur le programme 172 &amp;laquo;&amp;amp;nbsp;Recherches scientifiques et technologiques pluridisciplinaires&amp;amp;nbsp;&amp;raquo;, de la mission &amp;laquo;&amp;amp;nbsp;Recherche et enseignement sup&amp;eacute;rieur&amp;amp;nbsp;&amp;raquo;.&amp;lt;/p&amp;gt;\n</code></pre>\n<p><strong>Note</strong>: You may want to reapply the missing segments from your code.</p>\n<h3>Edit:</h3>\n<p>Since it was requested that html special characters remain unchanged, I devised the following:</p>\n<h3>Code:</h3>\n<pre><code>import org.jsoup.*;\nimport org.jsoup.nodes.Entities;\nimport org.jsoup.nodes.Element;\nimport org.jsoup.select.Elements;\nimport org.apache.commons.text.*;\n\npublic class MyClass {\n    public static void main(String[] args) {\n        String strHTMLInput = &quot;&lt;p style=\\&quot;text-align: justify;\\&quot;&gt;Cet amendement vise &amp;#224; rectifier le montant des annulations sur le programme 181 &amp;#171;&amp;#160;Pr&amp;#233;vention des risques&amp;#160;&amp;#187;, de la mission &amp;#171;&amp;#160;&amp;#201;cologie, d&amp;#233;veloppement et mobilit&amp;#233;s durables&amp;#160;&amp;#187;, en l&amp;#8217;abaissant de 24,2&amp;#160;M&amp;#8364;.&lt;/p&gt;\\n&quot; +\n                &quot;&lt;p style=\\&quot;text-align: justify;\\&quot;&gt;Cette minoration des annulations est propos&amp;#233;e dans le cadre du red&amp;#233;ploiement de cr&amp;#233;dits du programme d&amp;#8217;investissements d&amp;#8217;avenir (PIA) depuis les actions du PIA port&amp;#233;es par l&amp;#8217;Agence de l&amp;#8217;environnement et de la ma&amp;#238;trise de l&amp;#8217;&amp;#233;nergie (ADEME), vers l&amp;#8217;action &amp;#171;&amp;#160;Equipex&amp;#160;&amp;#187; port&amp;#233;e par l&amp;#8217;Agence nationale de la recherche (ANR), pour financer les projets &amp;#171;&amp;#160;Microcarb&amp;#160;&amp;#187; et &amp;#171;&amp;#160;Polar Pod&amp;#160;&amp;#187;. Le red&amp;#233;ploiement concernera pour l&amp;#8217;ADEME l&amp;#8217;action &amp;#171;&amp;#160;V&amp;#233;hicules et transporteurs du futur&amp;#160;&amp;#187;, &amp;#224; hauteur de 40&amp;#160;M&amp;#8364; et l&amp;#8217;action &amp;#171;&amp;#160;D&amp;#233;monstrateurs de la transition &amp;#233;nerg&amp;#233;tique&amp;#160;&amp;#187;, &amp;#224; hauteur de 10,8&amp;#160;M&amp;#8364;. Le soutien aux deux projets &amp;#171;&amp;#160;Microcarb&amp;#160;&amp;#187; et &amp;#171;&amp;#160;Polar Pod&amp;#160;&amp;#187; demeure complet, cette modification constituant un simple ajustement qui permet, tout en maintenant le soutien &amp;#224; &amp;#171;&amp;#160;Polar Pod&amp;#160;&amp;#187; et &amp;#171;&amp;#160;Microcarb&amp;#160;&amp;#187;, de pr&amp;#233;server des moyens sur l&amp;#8217;action &amp;#171;&amp;#160;V&amp;#233;hicules et transporteurs du futur&amp;#160;&amp;#187; du PIA en vue de la conclusion des assises de la mobilit&amp;#233;.&lt;/p&gt;\\n&quot; +\n                &quot;&lt;p style=\\&quot;text-align: justify;\\&quot;&gt;Cet amendement est compl&amp;#233;t&amp;#233; par un amendement miroir sur le programme 172 &amp;#171;&amp;#160;Recherches scientifiques et technologiques pluridisciplinaires&amp;#160;&amp;#187;, de la mission &amp;#171;&amp;#160;Recherche et enseignement sup&amp;#233;rieur&amp;#160;&amp;#187;.&lt;/p&gt;&quot;;\n        org.jsoup.nodes.Document doc = Jsoup.parse(strHTMLInput);\n        \n        // This should normally do the trick\n        doc.outputSettings().prettyPrint(false).escapeMode(null);\n        String strUnescapeHTML = StringEscapeUtils.unescapeHtml4(doc.body().html());\n        String strEscapeHTML = StringEscapeUtils.escapeHtml4(strUnescapeHTML);\n        String unescapeHtml=strEscapeHTML;\n        Elements elements=doc.body().children();\n        for(Element element: elements){\n            element.text(StringEscapeUtils.escapeHtml4(element.text()));\n        }\n\n        \n        System.out.println(&quot;\\nUnescaped HTML &gt;&gt;&gt; &quot; + strUnescapeHTML);\n        System.out.println(&quot;\\nEscaped HTML &gt;&gt;&gt; &quot; + StringEscapeUtils.unescapeXml(doc.body().html()));\n    }\n}\n</code></pre>\n<h3>Output:</h3>\n<pre><code>Unescaped HTML &gt;&gt;&gt; &lt;p style=&quot;text-align: justify;&quot;&gt;Cet amendement vise  rectifier le montant des annulations sur le programme 181 Prvention des risques, de la mission cologie, dveloppement et mobilits durables, en labaissant de 24,2M.&lt;/p&gt;\n&lt;p style=&quot;text-align: justify;&quot;&gt;Cette minoration des annulations est propose dans le cadre du redploiement de crdits du programme dinvestissements davenir (PIA) depuis les actions du PIA portes par lAgence de lenvironnement et de la matrise de lnergie (ADEME), vers laction Equipex porte par lAgence nationale de la recherche (ANR), pour financer les projets Microcarb et Polar Pod. Le redploiement concernera pour lADEME laction Vhicules et transporteurs du futur,  hauteur de 40M et laction Dmonstrateurs de la transition nergtique,  hauteur de 10,8M. Le soutien aux deux projets Microcarb et Polar Pod demeure complet, cette modification constituant un simple ajustement qui permet, tout en maintenant le soutien  Polar Pod et Microcarb, de prserver des moyens sur laction Vhicules et transporteurs du futur du PIA en vue de la conclusion des assises de la mobilit.&lt;/p&gt;\n&lt;p style=&quot;text-align: justify;&quot;&gt;Cet amendement est complt par un amendement miroir sur le programme 172 Recherches scientifiques et technologiques pluridisciplinaires, de la mission Recherche et enseignement suprieur.&lt;/p&gt;\n\nEscaped HTML &gt;&gt;&gt; &lt;p style=&quot;text-align: justify;&quot;&gt;Cet amendement vise &amp;agrave; rectifier le montant des annulations sur le programme 181 &amp;laquo; Pr&amp;eacute;vention des risques &amp;raquo;, de la mission &amp;laquo; &amp;Eacute;cologie, d&amp;eacute;veloppement et mobilit&amp;eacute;s durables &amp;raquo;, en l&amp;rsquo;abaissant de 24,2 M&amp;euro;.&lt;/p&gt;\n&lt;p style=&quot;text-align: justify;&quot;&gt;Cette minoration des annulations est propos&amp;eacute;e dans le cadre du red&amp;eacute;ploiement de cr&amp;eacute;dits du programme d&amp;rsquo;investissements d&amp;rsquo;avenir (PIA) depuis les actions du PIA port&amp;eacute;es par l&amp;rsquo;Agence de l&amp;rsquo;environnement et de la ma&amp;icirc;trise de l&amp;rsquo;&amp;eacute;nergie (ADEME), vers l&amp;rsquo;action &amp;laquo; Equipex &amp;raquo; port&amp;eacute;e par l&amp;rsquo;Agence nationale de la recherche (ANR), pour financer les projets &amp;laquo; Microcarb &amp;raquo; et &amp;laquo; Polar Pod &amp;raquo;. Le red&amp;eacute;ploiement concernera pour l&amp;rsquo;ADEME l&amp;rsquo;action &amp;laquo; V&amp;eacute;hicules et transporteurs du futur &amp;raquo;, &amp;agrave; hauteur de 40 M&amp;euro; et l&amp;rsquo;action &amp;laquo; D&amp;eacute;monstrateurs de la transition &amp;eacute;nerg&amp;eacute;tique &amp;raquo;, &amp;agrave; hauteur de 10,8 M&amp;euro;. Le soutien aux deux projets &amp;laquo; Microcarb &amp;raquo; et &amp;laquo; Polar Pod &amp;raquo; demeure complet, cette modification constituant un simple ajustement qui permet, tout en maintenant le soutien &amp;agrave; &amp;laquo; Polar Pod &amp;raquo; et &amp;laquo; Microcarb &amp;raquo;, de pr&amp;eacute;server des moyens sur l&amp;rsquo;action &amp;laquo; V&amp;eacute;hicules et transporteurs du futur &amp;raquo; du PIA en vue de la conclusion des assises de la mobilit&amp;eacute;.&lt;/p&gt;\n&lt;p style=&quot;text-align: justify;&quot;&gt;Cet amendement est compl&amp;eacute;t&amp;eacute; par un amendement miroir sur le programme 172 &amp;laquo; Recherches scientifiques et technologiques pluridisciplinaires &amp;raquo;, de la mission &amp;laquo; Recherche et enseignement sup&amp;eacute;rieur &amp;raquo;.&lt;/p&gt;\n</code></pre>\n<p>You can just escape all the text inside the elements(using <code>element.text()</code>) to preserve the tags, however, you will have to use <code>StringEscapeUtils.unescapeXml()</code> in order to remove extra <code>&amp;amps;</code> added by the 'Document' when you plan on using the string.</p>\n<p>References:\n<a href=\"https://stackoverflow.com/questions/9462623/use-jsoup-to-encode-html-characters\">SO: jsoup encode special characters</a>.</p>\n"}],"owner":{"account_id":237493,"reputation":11836,"user_id":505714,"accept_rate":87,"display_name":"Alexis Dufrenoy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":357,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1634078296,"creation_date":1633361709,"question_id":69438688,"body_markdown":"I created a method to strip some elements from HTML using Jsoup, but Jsoup is not escaping the accented characters like it should.\r\n\r\nHere is my code, with a main() to test, so it&#39;s self-contained and executable:\r\n\r\n    public class JsoupWrapper {\r\n    \r\n        public static void main(String[] args) {\r\n            String s = &quot;&lt;p style=\\&quot;text-align: justify;\\&quot;&gt;Cet amendement vise &amp;#224; rectifier le montant des annulations sur le programme 181 &amp;#171;&amp;#160;Pr&amp;#233;vention des risques&amp;#160;&amp;#187;, de la mission &amp;#171;&amp;#160;&amp;#201;cologie, d&amp;#233;veloppement et mobilit&amp;#233;s durables&amp;#160;&amp;#187;, en l&amp;#8217;abaissant de 24,2&amp;#160;M&amp;#8364;.&lt;/p&gt;\\n&quot; +\r\n                    &quot;&lt;p style=\\&quot;text-align: justify;\\&quot;&gt;Cette minoration des annulations est propos&amp;#233;e dans le cadre du red&amp;#233;ploiement de cr&amp;#233;dits du programme d&amp;#8217;investissements d&amp;#8217;avenir (PIA) depuis les actions du PIA port&amp;#233;es par l&amp;#8217;Agence de l&amp;#8217;environnement et de la ma&amp;#238;trise de l&amp;#8217;&amp;#233;nergie (ADEME), vers l&amp;#8217;action &amp;#171;&amp;#160;Equipex&amp;#160;&amp;#187; port&amp;#233;e par l&amp;#8217;Agence nationale de la recherche (ANR), pour financer les projets &amp;#171;&amp;#160;Microcarb&amp;#160;&amp;#187; et &amp;#171;&amp;#160;Polar Pod&amp;#160;&amp;#187;. Le red&amp;#233;ploiement concernera pour l&amp;#8217;ADEME l&amp;#8217;action &amp;#171;&amp;#160;V&amp;#233;hicules et transporteurs du futur&amp;#160;&amp;#187;, &amp;#224; hauteur de 40&amp;#160;M&amp;#8364; et l&amp;#8217;action &amp;#171;&amp;#160;D&amp;#233;monstrateurs de la transition &amp;#233;nerg&amp;#233;tique&amp;#160;&amp;#187;, &amp;#224; hauteur de 10,8&amp;#160;M&amp;#8364;. Le soutien aux deux projets &amp;#171;&amp;#160;Microcarb&amp;#160;&amp;#187; et &amp;#171;&amp;#160;Polar Pod&amp;#160;&amp;#187; demeure complet, cette modification constituant un simple ajustement qui permet, tout en maintenant le soutien &amp;#224; &amp;#171;&amp;#160;Polar Pod&amp;#160;&amp;#187; et &amp;#171;&amp;#160;Microcarb&amp;#160;&amp;#187;, de pr&amp;#233;server des moyens sur l&amp;#8217;action &amp;#171;&amp;#160;V&amp;#233;hicules et transporteurs du futur&amp;#160;&amp;#187; du PIA en vue de la conclusion des assises de la mobilit&amp;#233;.&lt;/p&gt;\\n&quot; +\r\n                    &quot;&lt;p style=\\&quot;text-align: justify;\\&quot;&gt;Cet amendement est compl&amp;#233;t&amp;#233; par un amendement miroir sur le programme 172 &amp;#171;&amp;#160;Recherches scientifiques et technologiques pluridisciplinaires&amp;#160;&amp;#187;, de la mission &amp;#171;&amp;#160;Recherche et enseignement sup&amp;#233;rieur&amp;#160;&amp;#187;.&lt;/p&gt;&quot;;\r\n            System.out.println(cleanToBeforeRevision(s));\r\n        }\r\n    \r\n        public static String cleanToBeforeRevision(String html) {\r\n            if (html == null) {\r\n                return null;\r\n            }\r\n            org.jsoup.nodes.Document doc = Jsoup.parse(html);\r\n    \r\n            // This should normally do the trick\r\n            doc.outputSettings().prettyPrint(false).escapeMode(Entities.EscapeMode.extended);\r\n    \r\n            Elements toReverts = doc.select(&quot;span.ins&quot;);\r\n            Elements toRestores = doc.select(&quot;span.del, span[data-userid], span[data-username]&quot;);\r\n    \r\n            toReverts.forEach(Node::remove);\r\n    \r\n            toRestores.forEach(toRestore-&gt;{\r\n                TextNode text = new TextNode(toRestore.html());\r\n                toRestore.replaceWith(text);\r\n            });\r\n    \r\n            return doc.body().html();\r\n        }\r\n    }\r\n\r\nThe `&#224;`, for example, should be replaced by a `&amp;agrave;`, the `&#233;` by a `&amp;eacute;`, etc. However, that&#39;s not the case.\r\n\r\nI&#39;m using Jsoup 1.12.1.\r\n\r\n**Edit:** I want everything except the HTML special characters (&lt;, &gt;, &quot;...) to be encoded. Especially acccented characters. The result still needs to be HTML.","title":"Jsoup is not escaping entities in string like it should","body":"<p>I created a method to strip some elements from HTML using Jsoup, but Jsoup is not escaping the accented characters like it should.</p>\n<p>Here is my code, with a main() to test, so it's self-contained and executable:</p>\n<pre><code>public class JsoupWrapper {\n\n    public static void main(String[] args) {\n        String s = &quot;&lt;p style=\\&quot;text-align: justify;\\&quot;&gt;Cet amendement vise &amp;#224; rectifier le montant des annulations sur le programme 181 &amp;#171;&amp;#160;Pr&amp;#233;vention des risques&amp;#160;&amp;#187;, de la mission &amp;#171;&amp;#160;&amp;#201;cologie, d&amp;#233;veloppement et mobilit&amp;#233;s durables&amp;#160;&amp;#187;, en l&amp;#8217;abaissant de 24,2&amp;#160;M&amp;#8364;.&lt;/p&gt;\\n&quot; +\n                &quot;&lt;p style=\\&quot;text-align: justify;\\&quot;&gt;Cette minoration des annulations est propos&amp;#233;e dans le cadre du red&amp;#233;ploiement de cr&amp;#233;dits du programme d&amp;#8217;investissements d&amp;#8217;avenir (PIA) depuis les actions du PIA port&amp;#233;es par l&amp;#8217;Agence de l&amp;#8217;environnement et de la ma&amp;#238;trise de l&amp;#8217;&amp;#233;nergie (ADEME), vers l&amp;#8217;action &amp;#171;&amp;#160;Equipex&amp;#160;&amp;#187; port&amp;#233;e par l&amp;#8217;Agence nationale de la recherche (ANR), pour financer les projets &amp;#171;&amp;#160;Microcarb&amp;#160;&amp;#187; et &amp;#171;&amp;#160;Polar Pod&amp;#160;&amp;#187;. Le red&amp;#233;ploiement concernera pour l&amp;#8217;ADEME l&amp;#8217;action &amp;#171;&amp;#160;V&amp;#233;hicules et transporteurs du futur&amp;#160;&amp;#187;, &amp;#224; hauteur de 40&amp;#160;M&amp;#8364; et l&amp;#8217;action &amp;#171;&amp;#160;D&amp;#233;monstrateurs de la transition &amp;#233;nerg&amp;#233;tique&amp;#160;&amp;#187;, &amp;#224; hauteur de 10,8&amp;#160;M&amp;#8364;. Le soutien aux deux projets &amp;#171;&amp;#160;Microcarb&amp;#160;&amp;#187; et &amp;#171;&amp;#160;Polar Pod&amp;#160;&amp;#187; demeure complet, cette modification constituant un simple ajustement qui permet, tout en maintenant le soutien &amp;#224; &amp;#171;&amp;#160;Polar Pod&amp;#160;&amp;#187; et &amp;#171;&amp;#160;Microcarb&amp;#160;&amp;#187;, de pr&amp;#233;server des moyens sur l&amp;#8217;action &amp;#171;&amp;#160;V&amp;#233;hicules et transporteurs du futur&amp;#160;&amp;#187; du PIA en vue de la conclusion des assises de la mobilit&amp;#233;.&lt;/p&gt;\\n&quot; +\n                &quot;&lt;p style=\\&quot;text-align: justify;\\&quot;&gt;Cet amendement est compl&amp;#233;t&amp;#233; par un amendement miroir sur le programme 172 &amp;#171;&amp;#160;Recherches scientifiques et technologiques pluridisciplinaires&amp;#160;&amp;#187;, de la mission &amp;#171;&amp;#160;Recherche et enseignement sup&amp;#233;rieur&amp;#160;&amp;#187;.&lt;/p&gt;&quot;;\n        System.out.println(cleanToBeforeRevision(s));\n    }\n\n    public static String cleanToBeforeRevision(String html) {\n        if (html == null) {\n            return null;\n        }\n        org.jsoup.nodes.Document doc = Jsoup.parse(html);\n\n        // This should normally do the trick\n        doc.outputSettings().prettyPrint(false).escapeMode(Entities.EscapeMode.extended);\n\n        Elements toReverts = doc.select(&quot;span.ins&quot;);\n        Elements toRestores = doc.select(&quot;span.del, span[data-userid], span[data-username]&quot;);\n\n        toReverts.forEach(Node::remove);\n\n        toRestores.forEach(toRestore-&gt;{\n            TextNode text = new TextNode(toRestore.html());\n            toRestore.replaceWith(text);\n        });\n\n        return doc.body().html();\n    }\n}\n</code></pre>\n<p>The <code></code>, for example, should be replaced by a <code>&amp;agrave;</code>, the <code></code> by a <code>&amp;eacute;</code>, etc. However, that's not the case.</p>\n<p>I'm using Jsoup 1.12.1.</p>\n<p><strong>Edit:</strong> I want everything except the HTML special characters (&lt;, &gt;, &quot;...) to be encoded. Especially acccented characters. The result still needs to be HTML.</p>\n"},{"tags":["java","lambda","java-stream"],"comments":[{"owner":{"account_id":3930229,"reputation":2278,"user_id":4412979,"accept_rate":50,"display_name":"Vasily Liaskovsky"},"score":2,"creation_date":1634073577,"post_id":69547141,"comment_id":122927397,"body_markdown":"remove `Collectors.mapping`. groupingBy + toList will do your task","body":"remove <code>Collectors.mapping</code>. groupingBy + toList will do your task"},{"owner":{"account_id":18243171,"reputation":19300,"user_id":13279831,"display_name":"Nowhere Man"},"score":1,"creation_date":1634077777,"post_id":69547141,"comment_id":122928427,"body_markdown":"How come _in this case I am saving in each fileName the total list of objects, including those that do not apply_?  This does not seem to be reproducible and a list of `ExampleClass` instances with the same `fileName` is returned.","body":"How come <i>in this case I am saving in each fileName the total list of objects, including those that do not apply</i>?  This does not seem to be reproducible and a list of <code>ExampleClass</code> instances with the same <code>fileName</code> is returned."}],"answers":[{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1634074156,"creation_date":1634074156,"answer_id":69547243,"question_id":69547141,"body_markdown":"All you need is `Collectors.groupingBy`.  The instances will be placed in a list by default.\r\n```\r\nMap&lt;String, List&lt;ExampleClass&gt;&gt; mapValues = items.stream()\r\n                .collect(Collectors.groupingBy(item-&gt;item.getFileName()));\r\n```\r\nYou could also use `ExampleClass::getFileName` in place of the lambda.  But that is a matter of personal preference.\r\n","title":"How get a Map&lt;String, List&lt;Object&gt;&gt; from a Stream in Java 8","body":"<p>All you need is <code>Collectors.groupingBy</code>.  The instances will be placed in a list by default.</p>\n<pre><code>Map&lt;String, List&lt;ExampleClass&gt;&gt; mapValues = items.stream()\n                .collect(Collectors.groupingBy(item-&gt;item.getFileName()));\n</code></pre>\n<p>You could also use <code>ExampleClass::getFileName</code> in place of the lambda.  But that is a matter of personal preference.</p>\n"}],"owner":{"account_id":11988367,"reputation":540,"user_id":8772274,"display_name":"Nahuel Giani"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69547243,"answer_count":1,"score":0,"last_activity_date":1634078053,"creation_date":1634073485,"question_id":69547141,"body_markdown":"I have the next class:\r\n```java\r\npublic class ExampleClass {\r\n    \r\n  \tprivate String title;\r\n   \tprivate String codeResponse;\r\n   \tprivate String fileName;\r\n}\r\n```\r\nI need to generate a map in which the key is the filename, and the value is the list of objects that contain that filename. I did the following:\r\n```java\r\nMap&lt;String, List&lt;ExampleClass&gt;&gt; mapValues = items\r\n            .stream()\r\n    \t\t.collect(Collectors.groupingBy(\r\n                item -&gt; item.getFileName(), \r\n                Collectors.mapping(item -&gt; item, Collectors.toList())\r\n            ));\r\n```\r\nBut in this case I am saving in each `fileName` the total list of objects, including those that do not apply.","title":"How get a Map&lt;String, List&lt;Object&gt;&gt; from a Stream in Java 8","body":"<p>I have the next class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ExampleClass {\n    \n    private String title;\n    private String codeResponse;\n    private String fileName;\n}\n</code></pre>\n<p>I need to generate a map in which the key is the filename, and the value is the list of objects that contain that filename. I did the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String, List&lt;ExampleClass&gt;&gt; mapValues = items\n            .stream()\n            .collect(Collectors.groupingBy(\n                item -&gt; item.getFileName(), \n                Collectors.mapping(item -&gt; item, Collectors.toList())\n            ));\n</code></pre>\n<p>But in this case I am saving in each <code>fileName</code> the total list of objects, including those that do not apply.</p>\n"},{"tags":["java","spring-boot","validation","annotations","swagger"],"comments":[{"owner":{"account_id":1223835,"reputation":75858,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1634067693,"post_id":69546093,"comment_id":122925747,"body_markdown":"These should normally be request parameters, not path variables, and you can use `params=` in your request mapping to specify which parameters must be present to match.","body":"These should normally be request parameters, not path variables, and you can use <code>params=</code> in your request mapping to specify which parameters must be present to match."}],"answers":[{"tags":[],"owner":{"account_id":18745380,"reputation":34,"user_id":13667729,"display_name":"serob"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634077611,"creation_date":1634077611,"answer_id":69547669,"question_id":69546093,"body_markdown":"Try use optional, i dont know how solution you need.\r\n\r\n    @GetMapping(&quot;/users&quot;)\r\n                    @Operation(summary = &quot;API to return users based on username or phone number&quot;)\r\n                    public ResponseEntity&lt;List&lt;UserResponseObject&gt;&gt; usersByNameOrNumber(\r\n                            @Valid @RequestParam(value = &quot;phoneNumber&quot;, required = false) @Pattern(regexp = &quot;^(\\\\d{5}|\\\\d{9})$&quot;) Optional&lt;String&gt; phoneNumber,\r\n                            @Valid @RequestParam(value = &quot;userName&quot;, required = false) @Pattern(regexp = &quot;^[a-zA-Z ]*$&quot;) Optional&lt;String&gt; userName) {\r\n                \r\n                            try {\r\n                                 \t\t\tif(phoneNumber.isPresent()){} \r\n           \t\t\t\t\t\t\t\t\tif(userName.isPresent()){} \r\n                            } catch (Exception e) {\r\n                                    \r\n                            }\r\n                    }\r\nBut i&#39;m not sure the @Pattern and Optional will be work good, but probably yes. \r\nMaybe is help, if i good understend your problem.","title":"Spring MVC validation: Only one field is required","body":"<p>Try use optional, i dont know how solution you need.</p>\n<pre><code>@GetMapping(&quot;/users&quot;)\n                @Operation(summary = &quot;API to return users based on username or phone number&quot;)\n                public ResponseEntity&lt;List&lt;UserResponseObject&gt;&gt; usersByNameOrNumber(\n                        @Valid @RequestParam(value = &quot;phoneNumber&quot;, required = false) @Pattern(regexp = &quot;^(\\\\d{5}|\\\\d{9})$&quot;) Optional&lt;String&gt; phoneNumber,\n                        @Valid @RequestParam(value = &quot;userName&quot;, required = false) @Pattern(regexp = &quot;^[a-zA-Z ]*$&quot;) Optional&lt;String&gt; userName) {\n            \n                        try {\n                                        if(phoneNumber.isPresent()){} \n                                        if(userName.isPresent()){} \n                        } catch (Exception e) {\n                                \n                        }\n                }\n</code></pre>\n<p>But i'm not sure the @Pattern and Optional will be work good, but probably yes.\nMaybe is help, if i good understend your problem.</p>\n"}],"owner":{"account_id":19772987,"reputation":53,"user_id":14479613,"display_name":"Code Junkie"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":833,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1634077611,"creation_date":1634067332,"question_id":69546093,"body_markdown":"I am creating a new endpoint in this API, which accepts a request containing either a username or a 5 or 9-digit phone number.&#160;I need to add validations to validate the request to contain either a username OR phone number; if both are provided then return a validation error. Here is the current code I have.\r\n\r\n        @GetMapping(&quot;/users&quot;)\r\n        @Operation(summary = &quot;API to return users based on username or phone number&quot;)\r\n        public ResponseEntity&lt;List&lt;UserResponseObject&gt;&gt; usersByNameOrNumber(\r\n                @Valid @RequestParam(name = &quot;phone-number&quot;, required = false) @Pattern(regexp = &quot;^(\\\\d{5}|\\\\d{9})$&quot;) String userPhoneNumber,\r\n                @Valid @PathVariable(name = &quot;user-name&quot;, required = false) @Pattern(regexp = &quot;^[a-zA-Z ]*$&quot;) String userName) {\r\n\r\n                try {\r\n                        ...\r\n                } catch (Exception e) {\r\n                        ...\r\n                }\r\n        }\r\n\r\nHow can I modify this block to meet the requirements? Currently, both fields are tagged as not required and there is no validation in place. I&#39;d like it require ONLY one of these fields to be not null.","title":"Spring MVC validation: Only one field is required","body":"<p>I am creating a new endpoint in this API, which accepts a request containing either a username or a 5 or 9-digit phone number.I need to add validations to validate the request to contain either a username OR phone number; if both are provided then return a validation error. Here is the current code I have.</p>\n<pre><code>    @GetMapping(&quot;/users&quot;)\n    @Operation(summary = &quot;API to return users based on username or phone number&quot;)\n    public ResponseEntity&lt;List&lt;UserResponseObject&gt;&gt; usersByNameOrNumber(\n            @Valid @RequestParam(name = &quot;phone-number&quot;, required = false) @Pattern(regexp = &quot;^(\\\\d{5}|\\\\d{9})$&quot;) String userPhoneNumber,\n            @Valid @PathVariable(name = &quot;user-name&quot;, required = false) @Pattern(regexp = &quot;^[a-zA-Z ]*$&quot;) String userName) {\n\n            try {\n                    ...\n            } catch (Exception e) {\n                    ...\n            }\n    }\n</code></pre>\n<p>How can I modify this block to meet the requirements? Currently, both fields are tagged as not required and there is no validation in place. I'd like it require ONLY one of these fields to be not null.</p>\n"},{"tags":["java","mysql","sql","spring-boot","jpa"],"comments":[{"owner":{"account_id":5225325,"reputation":1053,"user_id":4177544,"display_name":"0x44656E6E79"},"score":0,"creation_date":1634031623,"post_id":69538099,"comment_id":122911336,"body_markdown":"In your employee class, I think you need to add @JoinColumn(name = &quot;department_id&quot;) and you should add the department_id as a foreign key in the foreign key tab.","body":"In your employee class, I think you need to add @JoinColumn(name = &quot;department_id&quot;) and you should add the department_id as a foreign key in the foreign key tab."},{"owner":{"account_id":22800715,"reputation":25,"user_id":16964458,"display_name":"q051"},"score":0,"creation_date":1634042188,"post_id":69538099,"comment_id":122915386,"body_markdown":"I added `@JoinColumn` . it worked  correctly! Thank you!","body":"I added <code>@JoinColumn</code> . it worked  correctly! Thank you!"}],"answers":[{"tags":[],"owner":{"account_id":14937373,"reputation":328,"user_id":10901306,"display_name":"Zukaru"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1634077085,"creation_date":1634035643,"answer_id":69539211,"question_id":69538099,"body_markdown":"You might want to try add annotation ```@JoinColumn(name = &quot;department_id&quot;)``` under your department data in your Employee class. Or more detail like,\r\n\r\n```\r\n@Entity\r\npublic class Employee {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    @NotBlank\r\n    @Size(max = 40)\r\n    private String name;\r\n\r\n    @ManyToOne(targetEntity = Department.class)\r\n    @JoinColumn(name = &quot;department_id&quot;, referencedColumnName = &quot;department_id&quot;)\r\n    private Department department;\r\n}\r\n```\r\n\r\nAlso, I suggest to not use the column `department_name` on your employee class (also in database).  You can get the attribute using getter after fetching the data. e.g. `employee.getDepartment().getDepartment_name()`.","title":"java.sql.SQLSyntaxErrorException: Unknown column","body":"<p>You might want to try add annotation <code>@JoinColumn(name = &quot;department_id&quot;)</code> under your department data in your Employee class. Or more detail like,</p>\n<pre><code>@Entity\npublic class Employee {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @NotBlank\n    @Size(max = 40)\n    private String name;\n\n    @ManyToOne(targetEntity = Department.class)\n    @JoinColumn(name = &quot;department_id&quot;, referencedColumnName = &quot;department_id&quot;)\n    private Department department;\n}\n</code></pre>\n<p>Also, I suggest to not use the column <code>department_name</code> on your employee class (also in database).  You can get the attribute using getter after fetching the data. e.g. <code>employee.getDepartment().getDepartment_name()</code>.</p>\n"}],"owner":{"account_id":22800715,"reputation":25,"user_id":16964458,"display_name":"q051"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2203,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69539211,"answer_count":1,"score":1,"last_activity_date":1634077085,"creation_date":1634030831,"question_id":69538099,"body_markdown":"I am studying Spring Boot.\r\nI want to refer to the MySQL data and display the MySQL data in Thymeleaf.\r\nBut, I get the following error:\r\n\r\n&gt; java.sql.SQLSyntaxErrorException: Unknown column\r\n&gt; &#39;employee0_.department_department_id&#39; in &#39;field list&#39;.\r\n\r\nAlso, I want to set to refer to Department class from Employee class. (@ManyToOne)\r\nBut I&#39;m not sure if the current Entity class and MySQL settings are correct.\r\n\r\n**EmployeeController**\r\n\r\n```` \r\npackage com.example.demo.controller;\r\n\r\n@RequiredArgsConstructor\r\n@Controller\r\npublic class EmployeeController {\r\n\r\n\tprivate final EmployeeRepository emRepository;\r\n\tprivate final DepartmentRepository deRepository;\r\n\r\n\t@GetMapping(&quot;/&quot;)\r\n\tpublic String showList(Model model) {\r\n\t\tmodel.addAttribute(&quot;employeeList&quot;, emRepository.findAll());\r\n\t\treturn &quot;index&quot;;\r\n\t}\r\n\r\n\t@GetMapping(&quot;/add&quot;)\r\n\tpublic String addEmployee(@ModelAttribute Employee employee, Model model) {\r\n\t\tmodel.addAttribute(&quot;departmentList&quot;, deRepository.findAll());\r\n\t\treturn &quot;form&quot;;\r\n\t}\r\n\r\n\t@PostMapping(&quot;/save&quot;)\r\n\tpublic String process(@Validated @ModelAttribute Employee employee, BindingResult result) {\r\n\r\n\t\tif (result.hasErrors()) {\r\n\t\t\treturn &quot;form&quot;;\r\n\t\t}\r\n\t\temRepository.save(employee);\r\n\t\treturn &quot;index&quot;;\r\n\t}\r\n\r\n\t@GetMapping(&quot;/edit/{id}&quot;)\r\n\tpublic String editEmployee(@PathVariable Long id, Model model) {\r\n\t\tmodel.addAttribute(&quot;employee&quot;, emRepository.findById(id));\r\n\t\treturn &quot;form&quot;;\r\n\t}\r\n\r\n\t@GetMapping(&quot;/delete/{id}&quot;)\r\n\tpublic String deleteEmployee(@PathVariable Long id) {\r\n\t\temRepository.deleteById(id);\r\n\t\treturn &quot;redirect:/&quot;;\r\n\t}\r\n}\r\n\r\n````\r\n\r\n\r\n**Department**\r\n\r\n\r\n````\r\npackage com.example.demo.model;\r\n\r\n@NoArgsConstructor\r\n@Getter\r\n@Setter\r\n@Entity\r\npublic class Department {\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\t@Column(name=&quot;department_id&quot;)\r\n\tprivate Long department_id;\r\n\r\n\t@NotBlank\r\n\t@Size(max = 40)\r\n\t@Column(name=&quot;department_name&quot;)\r\n\tprivate String department_name;\r\n\r\n\r\n\tpublic Department(String name) {\r\n\t\tthis.department_name = name;\r\n\r\n\t}\r\n}\r\n````\r\n\r\n\r\n**Employee**\r\n\r\n````\r\npackage com.example.demo.model;\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Getter\r\n@Setter\r\n@Entity\r\npublic class Employee {\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\tprivate Long id;\r\n\r\n\t@NotBlank\r\n\t@Size(max = 40)\r\n\tprivate String name;\r\n\r\n\t@ManyToOne\r\n\tprivate Department department;\r\n}\r\n\r\n````\r\n\r\n\r\n\r\n**DepartmentRepository**\r\n\r\n````\r\npackage com.example.demo.repository;\r\n\r\nimport org.springframework.data.jpa.repository.JpaRepository;\r\n\r\nimport com.example.demo.model.Department;\r\n\r\npublic interface DepartmentRepository  extends JpaRepository&lt;Department, Long&gt; {\r\n\r\n}\r\n````\r\n\r\n\r\n\r\n**EmployeeRepository**\r\n\r\n````\r\npackage com.example.demo.repository;\r\n\r\nimport org.springframework.data.jpa.repository.JpaRepository;\r\n\r\nimport com.example.demo.model.Employee;\r\n\r\npublic interface EmployeeRepository  extends JpaRepository&lt;Employee, Long&gt; {\r\n\r\n}\r\n\r\n````\r\n\r\n**index.html**\r\n\r\n````\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\r\n&lt;head&gt;\r\n&lt;meta charset=&quot;UTF-8&quot;&gt;\r\n&lt;title&gt;Employee List&lt;/title&gt;\r\n&lt;/head&gt;\r\n&lt;body&gt;\r\n\r\n\t&lt;h3&gt;List&lt;/h3&gt;\r\n\t&lt;div th:if=&quot;${employeeList.size==0}&quot;&gt;\r\n\t\t&lt;h3&gt;no data&lt;/h3&gt;\r\n\t&lt;/div&gt;\r\n\r\n\t&lt;table th:if=&quot;${employeeList.size()&gt;0}&quot;&gt;\r\n\r\n\t\t&lt;tr&gt;\r\n\t\t\t&lt;th&gt;id&lt;/th&gt;\r\n\t\t\t&lt;th&gt;name&lt;/th&gt;\r\n\t\t\t&lt;th&gt;Department&lt;/th&gt;\r\n\t\t\t&lt;th&gt;&lt;/th&gt;\r\n\r\n\t\t&lt;/tr&gt;\r\n\r\n\r\n\t\t&lt;tr th:each=&quot;employee:${employeeList}&quot; th:object=&quot;${employee}&quot;&gt;\r\n\r\n\t\t\t&lt;td th:text=&quot;${employee.id}&quot;&gt;&lt;/td&gt;\r\n\t\t\t&lt;td th:text=&quot;${employee.name}&quot;&gt;&lt;/td&gt;\r\n\t\t\t&lt;td th:text=&quot;${employee.department_name}&quot;&gt;&lt;/td&gt;\r\n\r\n\t\t\t&lt;td&gt;&lt;form th:action=&quot;@{&#39;/delete/&#39;+${employee.id}}&quot; method=&quot;post&quot;&gt;\r\n\t\t\t\t\t&lt;button&gt;delete&lt;/button&gt;\r\n\t\t\t\t&lt;/form&gt;&lt;/td&gt;\r\n\t\t\t&lt;td&gt;&lt;form th:action=&quot;@{&#39;/edit/&#39;+${employee.id}}&quot; method=&quot;post&quot;&gt;\r\n\t\t\t\t\t&lt;button&gt;edit&lt;/button&gt;\r\n\t\t\t\t&lt;/form&gt;&lt;/td&gt;\r\n\r\n\t\t&lt;/tr&gt;\r\n\t&lt;/table&gt;\r\n\r\n\t&lt;h3&gt;\r\n\t\t&lt;a th:href=&quot;@{/add}&quot;&gt;add&lt;/a&gt;\r\n\t&lt;/h3&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n\r\n````\r\n\r\n\r\n\r\n**application.properties**\r\n\r\n````\r\nspring.datasource.url=jdbc:mysql://localhost:3306/spring_crud\r\nspring.datasource.username=spring_crud\r\nspring.datasource.password=spring_crud\r\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\n#spring.jpa.hibernate.ddl-auto=update\r\n\r\n````\r\n\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/jrg75.jpg","title":"java.sql.SQLSyntaxErrorException: Unknown column","body":"<p>I am studying Spring Boot.\nI want to refer to the MySQL data and display the MySQL data in Thymeleaf.\nBut, I get the following error:</p>\n<blockquote>\n<p>java.sql.SQLSyntaxErrorException: Unknown column\n'employee0_.department_department_id' in 'field list'.</p>\n</blockquote>\n<p>Also, I want to set to refer to Department class from Employee class. (@ManyToOne)\nBut I'm not sure if the current Entity class and MySQL settings are correct.</p>\n<p><strong>EmployeeController</strong></p>\n<pre><code>package com.example.demo.controller;\n\n@RequiredArgsConstructor\n@Controller\npublic class EmployeeController {\n\n    private final EmployeeRepository emRepository;\n    private final DepartmentRepository deRepository;\n\n    @GetMapping(&quot;/&quot;)\n    public String showList(Model model) {\n        model.addAttribute(&quot;employeeList&quot;, emRepository.findAll());\n        return &quot;index&quot;;\n    }\n\n    @GetMapping(&quot;/add&quot;)\n    public String addEmployee(@ModelAttribute Employee employee, Model model) {\n        model.addAttribute(&quot;departmentList&quot;, deRepository.findAll());\n        return &quot;form&quot;;\n    }\n\n    @PostMapping(&quot;/save&quot;)\n    public String process(@Validated @ModelAttribute Employee employee, BindingResult result) {\n\n        if (result.hasErrors()) {\n            return &quot;form&quot;;\n        }\n        emRepository.save(employee);\n        return &quot;index&quot;;\n    }\n\n    @GetMapping(&quot;/edit/{id}&quot;)\n    public String editEmployee(@PathVariable Long id, Model model) {\n        model.addAttribute(&quot;employee&quot;, emRepository.findById(id));\n        return &quot;form&quot;;\n    }\n\n    @GetMapping(&quot;/delete/{id}&quot;)\n    public String deleteEmployee(@PathVariable Long id) {\n        emRepository.deleteById(id);\n        return &quot;redirect:/&quot;;\n    }\n}\n\n</code></pre>\n<p><strong>Department</strong></p>\n<pre><code>package com.example.demo.model;\n\n@NoArgsConstructor\n@Getter\n@Setter\n@Entity\npublic class Department {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name=&quot;department_id&quot;)\n    private Long department_id;\n\n    @NotBlank\n    @Size(max = 40)\n    @Column(name=&quot;department_name&quot;)\n    private String department_name;\n\n\n    public Department(String name) {\n        this.department_name = name;\n\n    }\n}\n</code></pre>\n<p><strong>Employee</strong></p>\n<pre><code>package com.example.demo.model;\n@NoArgsConstructor\n@AllArgsConstructor\n@Getter\n@Setter\n@Entity\npublic class Employee {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @NotBlank\n    @Size(max = 40)\n    private String name;\n\n    @ManyToOne\n    private Department department;\n}\n\n</code></pre>\n<p><strong>DepartmentRepository</strong></p>\n<pre><code>package com.example.demo.repository;\n\nimport org.springframework.data.jpa.repository.JpaRepository;\n\nimport com.example.demo.model.Department;\n\npublic interface DepartmentRepository  extends JpaRepository&lt;Department, Long&gt; {\n\n}\n</code></pre>\n<p><strong>EmployeeRepository</strong></p>\n<pre><code>package com.example.demo.repository;\n\nimport org.springframework.data.jpa.repository.JpaRepository;\n\nimport com.example.demo.model.Employee;\n\npublic interface EmployeeRepository  extends JpaRepository&lt;Employee, Long&gt; {\n\n}\n\n</code></pre>\n<p><strong>index.html</strong></p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\n&lt;head&gt;\n&lt;meta charset=&quot;UTF-8&quot;&gt;\n&lt;title&gt;Employee List&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n    &lt;h3&gt;List&lt;/h3&gt;\n    &lt;div th:if=&quot;${employeeList.size==0}&quot;&gt;\n        &lt;h3&gt;no data&lt;/h3&gt;\n    &lt;/div&gt;\n\n    &lt;table th:if=&quot;${employeeList.size()&gt;0}&quot;&gt;\n\n        &lt;tr&gt;\n            &lt;th&gt;id&lt;/th&gt;\n            &lt;th&gt;name&lt;/th&gt;\n            &lt;th&gt;Department&lt;/th&gt;\n            &lt;th&gt;&lt;/th&gt;\n\n        &lt;/tr&gt;\n\n\n        &lt;tr th:each=&quot;employee:${employeeList}&quot; th:object=&quot;${employee}&quot;&gt;\n\n            &lt;td th:text=&quot;${employee.id}&quot;&gt;&lt;/td&gt;\n            &lt;td th:text=&quot;${employee.name}&quot;&gt;&lt;/td&gt;\n            &lt;td th:text=&quot;${employee.department_name}&quot;&gt;&lt;/td&gt;\n\n            &lt;td&gt;&lt;form th:action=&quot;@{'/delete/'+${employee.id}}&quot; method=&quot;post&quot;&gt;\n                    &lt;button&gt;delete&lt;/button&gt;\n                &lt;/form&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;form th:action=&quot;@{'/edit/'+${employee.id}}&quot; method=&quot;post&quot;&gt;\n                    &lt;button&gt;edit&lt;/button&gt;\n                &lt;/form&gt;&lt;/td&gt;\n\n        &lt;/tr&gt;\n    &lt;/table&gt;\n\n    &lt;h3&gt;\n        &lt;a th:href=&quot;@{/add}&quot;&gt;add&lt;/a&gt;\n    &lt;/h3&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n\n</code></pre>\n<p><strong>application.properties</strong></p>\n<pre><code>spring.datasource.url=jdbc:mysql://localhost:3306/spring_crud\nspring.datasource.username=spring_crud\nspring.datasource.password=spring_crud\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\n#spring.jpa.hibernate.ddl-auto=update\n\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/jrg75.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jrg75.jpg\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","ssl","flutter","dart","https"],"answers":[{"tags":[],"owner":{"account_id":3111211,"reputation":2948,"user_id":2632894,"display_name":"Pascal Werkl"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1578378170,"creation_date":1578378170,"answer_id":59623206,"question_id":59622087,"body_markdown":"While developing you can use the `badCertificateCallback` callback of HttpClient and just return `true`. This will accept all bad certificates.\r\n\r\n&lt;!-- language: lang-dart --&gt;\r\n```\r\n  HttpClient client = HttpClient()\r\n    ..badCertificateCallback = ((X509Certificate cert, String host, int port) =&gt; true);\r\n```\r\n\r\nTo accept a specific bad certificate you may experiment with this code from here: https://github.com/dart-lang/http/issues/14#issuecomment-311184690\r\n\r\n&lt;!-- language: lang-dart --&gt;\r\n```\r\nimport &#39;dart:io&#39;;\r\nimport &#39;package:http/http.dart&#39; as http;\r\n\r\nbool _certificateCheck(X509Certificate cert, String host, int port) =&gt;\r\n    host == &#39;local.domain.ext&#39;; // &lt;- change\r\n\r\nHttpClient client = new HttpClient()\r\n    ..badCertificateCallback = (_certificateCheck);\r\n```","title":"Flutter https with self signed certificate","body":"<p>While developing you can use the <code>badCertificateCallback</code> callback of HttpClient and just return <code>true</code>. This will accept all bad certificates.</p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>  HttpClient client = HttpClient()\n    ..badCertificateCallback = ((X509Certificate cert, String host, int port) =&gt; true);\n</code></pre>\n\n<p>To accept a specific bad certificate you may experiment with this code from here: <a href=\"https://github.com/dart-lang/http/issues/14#issuecomment-311184690\" rel=\"noreferrer\">https://github.com/dart-lang/http/issues/14#issuecomment-311184690</a></p>\n\n<pre class=\"lang-dart prettyprint-override\"><code>import 'dart:io';\nimport 'package:http/http.dart' as http;\n\nbool _certificateCheck(X509Certificate cert, String host, int port) =&gt;\n    host == 'local.domain.ext'; // &lt;- change\n\nHttpClient client = new HttpClient()\n    ..badCertificateCallback = (_certificateCheck);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4706270,"reputation":2003,"user_id":3808307,"accept_rate":82,"display_name":"user3808307"},"down_vote_count":5,"up_vote_count":1,"is_accepted":false,"score":-4,"last_activity_date":1604416046,"creation_date":1604416046,"answer_id":64665434,"question_id":59622087,"body_markdown":"If you use dio library https://pub.dev/packages/dio you can make requests from http to https","title":"Flutter https with self signed certificate","body":"<p>If you use dio library <a href=\"https://pub.dev/packages/dio\" rel=\"nofollow noreferrer\">https://pub.dev/packages/dio</a> you can make requests from http to https</p>\n"},{"tags":[],"owner":{"account_id":8164177,"reputation":858,"user_id":6147174,"accept_rate":55,"display_name":"Wecherowski"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1613684474,"creation_date":1613684474,"answer_id":66268556,"question_id":59622087,"body_markdown":"While Pascal&#39;s answer works, it only applies to the `dart:io HttpClient`. \r\nTo apply the `badCertificateCallback` to the `http` package&#39;s `Client` instances, do the following: \r\n\r\nCreate a class that overrides `HttpOverrides` in the following way: \r\n\r\n    class DevHttpOverrides extends HttpOverrides {\r\n      @override\r\n      HttpClient createHttpClient(SecurityContext context) {\r\n        return super.createHttpClient(context)\r\n          ..badCertificateCallback = (X509Certificate cert, String host, int port) =&gt; true;\r\n      }\r\n    }\r\n\r\nThen in your main, instantiate your class as the global HttpOverride: \r\n\r\n    HttpOverrides.global = new DevHttpOverrides();\r\n\r\n\r\nThis should make all Client ignore bad certificates and is therefore onl;y recommended in development. \r\nCredit goes to this issue: https://github.com/dart-lang/http/issues/458","title":"Flutter https with self signed certificate","body":"<p>While Pascal's answer works, it only applies to the <code>dart:io HttpClient</code>.\nTo apply the <code>badCertificateCallback</code> to the <code>http</code> package's <code>Client</code> instances, do the following:</p>\n<p>Create a class that overrides <code>HttpOverrides</code> in the following way:</p>\n<pre><code>class DevHttpOverrides extends HttpOverrides {\n  @override\n  HttpClient createHttpClient(SecurityContext context) {\n    return super.createHttpClient(context)\n      ..badCertificateCallback = (X509Certificate cert, String host, int port) =&gt; true;\n  }\n}\n</code></pre>\n<p>Then in your main, instantiate your class as the global HttpOverride:</p>\n<pre><code>HttpOverrides.global = new DevHttpOverrides();\n</code></pre>\n<p>This should make all Client ignore bad certificates and is therefore onl;y recommended in development.\nCredit goes to this issue: <a href=\"https://github.com/dart-lang/http/issues/458\" rel=\"noreferrer\">https://github.com/dart-lang/http/issues/458</a></p>\n"},{"tags":[],"owner":{"account_id":4802884,"reputation":417,"user_id":3878974,"accept_rate":16,"display_name":"Ajeet Singh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1631406649,"creation_date":1631406649,"answer_id":69147640,"question_id":59622087,"body_markdown":"Amazing @Wecherowski, I think more safe way to do this is to check the other details and return true.\r\n\r\nSomething like:\r\n\r\n    HttpClient createHttpClient(SecurityContext? context)\r\n     {\r\n        return super.createHttpClient(context)\r\n           ..badCertificateCallback = (X509Certificate cert, String host, int port)\r\n           {\r\n             if (host.isNotEmpty &amp;&amp; host == &#39;xyz.example.com&#39;)\r\n               {  \r\n                   return true;  \r\n               }  \r\n               else  \r\n               {  return false;  }  \r\n     };","title":"Flutter https with self signed certificate","body":"<p>Amazing @Wecherowski, I think more safe way to do this is to check the other details and return true.</p>\n<p>Something like:</p>\n<pre><code>HttpClient createHttpClient(SecurityContext? context)\n {\n    return super.createHttpClient(context)\n       ..badCertificateCallback = (X509Certificate cert, String host, int port)\n       {\n         if (host.isNotEmpty &amp;&amp; host == 'xyz.example.com')\n           {  \n               return true;  \n           }  \n           else  \n           {  return false;  }  \n };\n</code></pre>\n"}],"owner":{"account_id":4037842,"reputation":1821,"user_id":3321579,"accept_rate":62,"display_name":"Scorb"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28506,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":4,"score":8,"last_activity_date":1634077014,"creation_date":1578370531,"question_id":59622087,"body_markdown":"I am using flutter to connect with java java server implementation over https. I first tested it to be working using just http.\r\n\r\nI then switched to https on the server side and pointed it at my self signed certificate I created using keytool.\r\n\r\nThen I tried to connect to it using the http dart package. The resulted in the following exception...\r\n\r\n&gt; Unhandled Exception: HandshakeException: Handshake error in client (OS\r\n&gt; Error:  E/flutter ( 7370): \tCERTIFICATE_VERIFY_FAILED: self signed\r\n&gt; certificate(handshake.cc:354))\r\n\r\nI am assuming I need to set my client to trust my servers self signed certificate. I have looked at the APi reference and could not figure out how to get this to happen...\r\n\r\nMy dart code in my flutter app is as follows...\r\n\r\n    void testMessage() {\r\n        var url = &#39;https://192.168.100.105:8443&#39;;\r\n        var response = await http.post(url, body: &quot;{\\&quot;message_name\\&quot;: \\&quot;TestMessage\\&quot;, \\&quot;contents\\&quot;: { \\&quot;field1\\&quot;:\\&quot;blah\\&quot;, \\&quot;field2\\&quot;:\\&quot;blah\\&quot; }}&quot;);\r\n        print(&#39;Response status: ${response.statusCode}&#39;);\r\n        print(&#39;Response body: ${response.body}&#39;);\r\n    }","title":"Flutter https with self signed certificate","body":"<p>I am using flutter to connect with java java server implementation over https. I first tested it to be working using just http.</p>\n\n<p>I then switched to https on the server side and pointed it at my self signed certificate I created using keytool.</p>\n\n<p>Then I tried to connect to it using the http dart package. The resulted in the following exception...</p>\n\n<blockquote>\n  <p>Unhandled Exception: HandshakeException: Handshake error in client (OS\n  Error:  E/flutter ( 7370):    CERTIFICATE_VERIFY_FAILED: self signed\n  certificate(handshake.cc:354))</p>\n</blockquote>\n\n<p>I am assuming I need to set my client to trust my servers self signed certificate. I have looked at the APi reference and could not figure out how to get this to happen...</p>\n\n<p>My dart code in my flutter app is as follows...</p>\n\n<pre><code>void testMessage() {\n    var url = 'https://192.168.100.105:8443';\n    var response = await http.post(url, body: \"{\\\"message_name\\\": \\\"TestMessage\\\", \\\"contents\\\": { \\\"field1\\\":\\\"blah\\\", \\\"field2\\\":\\\"blah\\\" }}\");\n    print('Response status: ${response.statusCode}');\n    print('Response body: ${response.body}');\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":1,"creation_date":1634074378,"post_id":69546993,"comment_id":122927588,"body_markdown":"About the first String, why can&#39;t you just split the String by comma, and select the values you want?  About the second String, it appears that you want to separate the last character from the prior characters.  Why can&#39;t you split the String by comma, space and then separate each part into one or more characters and single character?","body":"About the first String, why can&#39;t you just split the String by comma, and select the values you want?  About the second String, it appears that you want to separate the last character from the prior characters.  Why can&#39;t you split the String by comma, space and then separate each part into one or more characters and single character?"}],"answers":[{"tags":[],"owner":{"account_id":20882375,"reputation":81,"user_id":15339784,"display_name":"miroslav licko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634074545,"creation_date":1634074545,"answer_id":69547293,"question_id":69546993,"body_markdown":"If it helps you\r\n```\r\npublic class Main\r\n{\r\n    \r\n    public static String example1(int[] in) {\r\n        \r\n        String msg = &quot;Example 1\\n&quot;;\r\n        \r\n        for(int idx=0; idx&lt;in.length; idx++) {\r\n            \r\n            msg += in[idx] + &quot;:&quot;;\r\n            String str=String.valueOf(in[idx]);\r\n            boolean split = false;\r\n            \r\n            for(int i=1; i&lt;str.length(); i++) {\r\n                \r\n                char x = str.charAt(i-1);\r\n                char y = str.charAt(i);\r\n                \r\n                \r\n                if (x!=y &amp;&amp; i == 1) {\r\n                    \r\n                    msg += &quot; &quot; + x;\r\n                    \r\n                } \r\n                \r\n                if (x!=y) { \r\n                    \r\n                    msg += &quot; &quot; + y;\r\n                    \r\n                }\r\n                \r\n                \r\n                \r\n            }\r\n            \r\n            msg += &quot;\\n&quot;;\r\n            \r\n        }\r\n        \r\n        msg += &quot;Done&quot;;\r\n        return msg;\r\n        \r\n    }\r\n    \r\n\tpublic static void main(String[] args) {\r\n\r\n        int[] in = new int[] {12,10,12914,10,641,10,11,11,2,10};\t    \r\n\t    String msg = example1(in);\r\n\t\tSystem.out.println(msg);\r\n\t\t\r\n\t}\r\n\t\r\n}\r\n```","title":"How exactly do I parse/separate a single element of an array based on a certain number of digits?","body":"<p>If it helps you</p>\n<pre><code>public class Main\n{\n    \n    public static String example1(int[] in) {\n        \n        String msg = &quot;Example 1\\n&quot;;\n        \n        for(int idx=0; idx&lt;in.length; idx++) {\n            \n            msg += in[idx] + &quot;:&quot;;\n            String str=String.valueOf(in[idx]);\n            boolean split = false;\n            \n            for(int i=1; i&lt;str.length(); i++) {\n                \n                char x = str.charAt(i-1);\n                char y = str.charAt(i);\n                \n                \n                if (x!=y &amp;&amp; i == 1) {\n                    \n                    msg += &quot; &quot; + x;\n                    \n                } \n                \n                if (x!=y) { \n                    \n                    msg += &quot; &quot; + y;\n                    \n                }\n                \n                \n                \n            }\n            \n            msg += &quot;\\n&quot;;\n            \n        }\n        \n        msg += &quot;Done&quot;;\n        return msg;\n        \n    }\n    \n    public static void main(String[] args) {\n\n        int[] in = new int[] {12,10,12914,10,641,10,11,11,2,10};        \n        String msg = example1(in);\n        System.out.println(msg);\n        \n    }\n    \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2030459,"reputation":186,"user_id":1814305,"display_name":"ayodele"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1634075447,"creation_date":1634075094,"answer_id":69547362,"question_id":69546993,"body_markdown":"You could split the string since they are comma separate and then loop through each of the numbers and separate only those that meet your criteria.\r\n ```\r\n    String str = &quot;12,10,12914,10,641,10,11,11,2,10&quot;;\r\n    str[] ary = str.split(&quot;,&quot;);\r\n    for (str s : ary) {\r\n      if ( s.length() &gt; 1 ) {\r\n        //separate the contents of the string as you want\r\n      }\r\n    }\r\n","title":"How exactly do I parse/separate a single element of an array based on a certain number of digits?","body":"<p>You could split the string since they are comma separate and then loop through each of the numbers and separate only those that meet your criteria.</p>\n<pre><code>   String str = &quot;12,10,12914,10,641,10,11,11,2,10&quot;;\n   str[] ary = str.split(&quot;,&quot;);\n   for (str s : ary) {\n     if ( s.length() &gt; 1 ) {\n       //separate the contents of the string as you want\n     }\n   }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1634076715,"creation_date":1634076715,"answer_id":69547568,"question_id":69546993,"body_markdown":"You can do it like this.\r\n\r\nIn the first case:\r\n- split the string on `,` possibly surrounded by white space.\r\n- filter strings &gt; length of 2\r\n- convert to an Integer and store in a list.\r\n```\r\nString s1 = &quot;12,10,12914,10,641,10,11,11,2,10&quot;;\r\n\r\nList&lt;Integer&gt; list1 = Arrays.stream(s1.split(&quot;\\\\s*,\\\\s*&quot;))\r\n\t\t.filter(str -&gt; str.length() &gt; 2).map(Integer::valueOf)\r\n\t\t.toList();\r\n\r\nSystem.out.println(list1);\r\n```\r\nPrints\r\n```\r\n[12914, 641]\r\n```\r\nIn the second case\r\n- split the same way as before.\r\n- convert the string sans the last character (letter or digit) to an integer. This uses the `String.substring` method.\r\n- return in a list.\r\n```\r\nString s2 = &quot;2a, 129, 14a, 64, 1a, 11b, 2a&quot;;\r\nList&lt;Integer&gt; list2 = Arrays.stream(s2.split(&quot;\\\\s*,\\\\s*&quot;))\r\n\t\t.map(str -&gt; Integer.valueOf(\r\n\t\t\t\tstr.substring(0, str.length() - 1)))\r\n\t\t.toList();\r\nSystem.out.println(list2);\r\n```\r\nPrints\r\n```\r\n[2, 12, 14, 6, 1, 11, 2]\r\n```\r\nIn the second case an exception will be thrown if the items end in more than one non-digit character or are not at least 2 in length.","title":"How exactly do I parse/separate a single element of an array based on a certain number of digits?","body":"<p>You can do it like this.</p>\n<p>In the first case:</p>\n<ul>\n<li>split the string on <code>,</code> possibly surrounded by white space.</li>\n<li>filter strings &gt; length of 2</li>\n<li>convert to an Integer and store in a list.</li>\n</ul>\n<pre><code>String s1 = &quot;12,10,12914,10,641,10,11,11,2,10&quot;;\n\nList&lt;Integer&gt; list1 = Arrays.stream(s1.split(&quot;\\\\s*,\\\\s*&quot;))\n        .filter(str -&gt; str.length() &gt; 2).map(Integer::valueOf)\n        .toList();\n\nSystem.out.println(list1);\n</code></pre>\n<p>Prints</p>\n<pre><code>[12914, 641]\n</code></pre>\n<p>In the second case</p>\n<ul>\n<li>split the same way as before.</li>\n<li>convert the string sans the last character (letter or digit) to an integer. This uses the <code>String.substring</code> method.</li>\n<li>return in a list.</li>\n</ul>\n<pre><code>String s2 = &quot;2a, 129, 14a, 64, 1a, 11b, 2a&quot;;\nList&lt;Integer&gt; list2 = Arrays.stream(s2.split(&quot;\\\\s*,\\\\s*&quot;))\n        .map(str -&gt; Integer.valueOf(\n                str.substring(0, str.length() - 1)))\n        .toList();\nSystem.out.println(list2);\n</code></pre>\n<p>Prints</p>\n<pre><code>[2, 12, 14, 6, 1, 11, 2]\n</code></pre>\n<p>In the second case an exception will be thrown if the items end in more than one non-digit character or are not at least 2 in length.</p>\n"}],"owner":{"account_id":13397327,"reputation":11,"user_id":11195860,"display_name":"kevin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":136,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1634125257,"answer_count":3,"score":0,"last_activity_date":1634076715,"creation_date":1634072583,"question_id":69546993,"body_markdown":"How exactly do I separate a single grouping of numbers in Java in a string of digits that contains more than 1 or 2 digits? For example, I need to only separate the digits in the groups larger than 1 or 2 digits in this string: 12,10,12914,10,641,10,11,11,2,10.\r\n\r\nAlso, how can I separate/split certain elements in an array in Java without separating all of the elements? For example, I need to separate the letters from the numbers, and separate the 12 from the 9, and the 6 from the 4 in this set of elements: \r\n[12a, 129, 14a, 64, 1a, 11b, 2a].\r\n\r\nThanks for any help!\r\n","title":"How exactly do I parse/separate a single element of an array based on a certain number of digits?","body":"<p>How exactly do I separate a single grouping of numbers in Java in a string of digits that contains more than 1 or 2 digits? For example, I need to only separate the digits in the groups larger than 1 or 2 digits in this string: 12,10,12914,10,641,10,11,11,2,10.</p>\n<p>Also, how can I separate/split certain elements in an array in Java without separating all of the elements? For example, I need to separate the letters from the numbers, and separate the 12 from the 9, and the 6 from the 4 in this set of elements:\n[12a, 129, 14a, 64, 1a, 11b, 2a].</p>\n<p>Thanks for any help!</p>\n"},{"tags":["java","option-type"],"comments":[{"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":6,"creation_date":1544811663,"post_id":53784899,"comment_id":94421459,"body_markdown":"`optionalBar.map(bar -&gt; foo.add(bar)).orElse(foo)`?","body":"<code>optionalBar.map(bar -&gt; foo.add(bar)).orElse(foo)</code>?"}],"answers":[{"tags":[],"owner":{"account_id":7595189,"reputation":44576,"user_id":5761558,"display_name":"ernest_k"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1544813263,"creation_date":1544811896,"answer_id":53785053,"question_id":53784899,"body_markdown":"Using `bar` rather than `foo` seems to simplify it:\r\n\r\n    Foo foobar = bar\r\n             .map(b -&gt; foo.map(f -&gt; f.add(b)))\r\n             .orElse(foo)\r\n             .orElse(null); // if foo is not present\r\n\r\n`bar.map(b -&gt; foo.map(f -&gt; f.add(b)))` returns `Optional&lt;Optional&lt;Foo&gt;&gt;` that is &quot;present&quot; if `bar` is present.\r\n\r\n`.orElse(foo)` reverts to the original `Optional&lt;Foo&gt;` if `bar` was not present (or returns `foo.map(f -&gt; f.add(b))` otherwise).","title":"Existing way to Java map Optional&lt;&gt; onto object instead of to another object?","body":"<p>Using <code>bar</code> rather than <code>foo</code> seems to simplify it:</p>\n\n<pre><code>Foo foobar = bar\n         .map(b -&gt; foo.map(f -&gt; f.add(b)))\n         .orElse(foo)\n         .orElse(null); // if foo is not present\n</code></pre>\n\n<p><code>bar.map(b -&gt; foo.map(f -&gt; f.add(b)))</code> returns <code>Optional&lt;Optional&lt;Foo&gt;&gt;</code> that is \"present\" if <code>bar</code> is present.</p>\n\n<p><code>.orElse(foo)</code> reverts to the original <code>Optional&lt;Foo&gt;</code> if <code>bar</code> was not present (or returns <code>foo.map(f -&gt; f.add(b))</code> otherwise).</p>\n"},{"tags":[],"owner":{"account_id":7743155,"reputation":55371,"user_id":5862071,"accept_rate":86,"display_name":"Ousmane D."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1544813039,"creation_date":1544813039,"answer_id":53785278,"question_id":53784899,"body_markdown":"Given the example you&#39;ve provided, it seems that you want to apply the operation `foo.add` if `bar` is present otherwise return `foo`:\r\n\r\n    Foo foobar = bar.isPresent() ? foo.add(bar.get()) : foo;\r\n\r\nThus, I&#39;d say it&#39;s so short that it&#39;s not worthy of creating a utility method for it.\r\n\r\n    Foo foobar = optBar.map(f::add).orElse(f); // map to Foo if bar is present else return `f`\r\n\r\n - if `optBar` has a present state, we apply the `map` operation and `orElse` returns that mapped value.\r\n - if `optBar` has an absent state, the `orElse` method returns the supplied default value `f`.\r\n\r\n\r\n----------\r\n\r\n\r\nAnother thing, are you getting the result as an `Optional&lt;Bar&gt;` in the first place or are you manually wrapping `Bar` into an Optional? if it&#39;s the latter I&#39;d probably just use a simple `if` statement which would be the ideal solution, i.e.\r\n\r\n    Foo foo = new Foo();\r\n    if(bar != null) foo = foo.add(bar);","title":"Existing way to Java map Optional&lt;&gt; onto object instead of to another object?","body":"<p>Given the example you've provided, it seems that you want to apply the operation <code>foo.add</code> if <code>bar</code> is present otherwise return <code>foo</code>:</p>\n\n<pre><code>Foo foobar = bar.isPresent() ? foo.add(bar.get()) : foo;\n</code></pre>\n\n<p>Thus, I'd say it's so short that it's not worthy of creating a utility method for it.</p>\n\n<pre><code>Foo foobar = optBar.map(f::add).orElse(f); // map to Foo if bar is present else return `f`\n</code></pre>\n\n<ul>\n<li>if <code>optBar</code> has a present state, we apply the <code>map</code> operation and <code>orElse</code> returns that mapped value.</li>\n<li>if <code>optBar</code> has an absent state, the <code>orElse</code> method returns the supplied default value <code>f</code>.</li>\n</ul>\n\n<hr>\n\n<p>Another thing, are you getting the result as an <code>Optional&lt;Bar&gt;</code> in the first place or are you manually wrapping <code>Bar</code> into an Optional? if it's the latter I'd probably just use a simple <code>if</code> statement which would be the ideal solution, i.e.</p>\n\n<pre><code>Foo foo = new Foo();\nif(bar != null) foo = foo.add(bar);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1544881522,"creation_date":1544881522,"answer_id":53793761,"question_id":53784899,"body_markdown":"I think that the other answers taking a starting point from an `Optional&lt;Bar&gt;` are great for many situations. If you need `foo.addBar` conditionally in a longer method chain involving a `Foo` at some stage, the approach can be fit in there too (not tested yet):\r\n\r\n        Optional&lt;Foo&gt; foobar = foo.map(foo -&gt; bar.map(bar -&gt; foo.addBar(bar)));","title":"Existing way to Java map Optional&lt;&gt; onto object instead of to another object?","body":"<p>I think that the other answers taking a starting point from an <code>Optional&lt;Bar&gt;</code> are great for many situations. If you need <code>foo.addBar</code> conditionally in a longer method chain involving a <code>Foo</code> at some stage, the approach can be fit in there too (not tested yet):</p>\n\n<pre><code>    Optional&lt;Foo&gt; foobar = foo.map(foo -&gt; bar.map(bar -&gt; foo.addBar(bar)));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":404649,"reputation":57172,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634076629,"creation_date":1634076629,"answer_id":69547558,"question_id":53784899,"body_markdown":"What you are looking for is `Optional.flatMap()`.\r\n\r\nThe following construct:\r\n\r\n`Foo result = optionalBar.isPresent() ? optionalFooFromBar( optionalBar.get() ) : foo;`\r\n\r\nCan be rewritten as:\r\n\r\n`Foo result = optionalBar.flatMap( bar -&gt; optionalFooFromBar( bar ) ).orElse( foo );`\r\n\r\nNote that you save a whole two characters.","title":"Existing way to Java map Optional&lt;&gt; onto object instead of to another object?","body":"<p>What you are looking for is <code>Optional.flatMap()</code>.</p>\n<p>The following construct:</p>\n<p><code>Foo result = optionalBar.isPresent() ? optionalFooFromBar( optionalBar.get() ) : foo;</code></p>\n<p>Can be rewritten as:</p>\n<p><code>Foo result = optionalBar.flatMap( bar -&gt; optionalFooFromBar( bar ) ).orElse( foo );</code></p>\n<p>Note that you save a whole two characters.</p>\n"}],"owner":{"account_id":184786,"reputation":18896,"user_id":421049,"accept_rate":50,"display_name":"Garret Wilson"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2722,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":4,"score":4,"last_activity_date":1634076629,"creation_date":1544811285,"question_id":53784899,"body_markdown":"I&#39;m familiar with `Optional.map(mapper)`, which maps an optional object to something else. So if I wanted to do something with an optional `Foo` and a non-optional `Bar`, I could do:\r\n\r\n    Optional&lt;Foo&gt; foobar = foo.map(foo -&gt; foo.addBar(bar))\r\n\r\nThis works sort of like:\r\n\r\n    Optional&lt;Foo&gt; foobar = foo.isPresent() ? Optional.of(foo.get().add(bar)) : Optional.empty();\r\n\r\nBut I&#39;m seeing a recurring pattern in which _`bar`_ is optional. The functionality I want to replicate looks something like this:\r\n\r\n    Foo foobar = bar.isPresent() ? foo.add(bar.get()) : foo;\r\n\r\nIn other words, if the _other_ thing is present, let me do something with it in regards to my existing thing; otherwise, just give me my existing thing back.\r\n\r\nI could imagine making my own `Optionals.doIfOtherPresent(T object, Optional&lt;U&gt; optional, BiFunction&lt;? super T, ? super U, ? extends T&gt; fn)`. I would use it like this:\r\n\r\n    Foo foobar = doIfOtherPresent(foo, bar, foo::add);\r\n\r\nIs there something in the Java library that does this already?","title":"Existing way to Java map Optional&lt;&gt; onto object instead of to another object?","body":"<p>I'm familiar with <code>Optional.map(mapper)</code>, which maps an optional object to something else. So if I wanted to do something with an optional <code>Foo</code> and a non-optional <code>Bar</code>, I could do:</p>\n\n<pre><code>Optional&lt;Foo&gt; foobar = foo.map(foo -&gt; foo.addBar(bar))\n</code></pre>\n\n<p>This works sort of like:</p>\n\n<pre><code>Optional&lt;Foo&gt; foobar = foo.isPresent() ? Optional.of(foo.get().add(bar)) : Optional.empty();\n</code></pre>\n\n<p>But I'm seeing a recurring pattern in which <em><code>bar</code></em> is optional. The functionality I want to replicate looks something like this:</p>\n\n<pre><code>Foo foobar = bar.isPresent() ? foo.add(bar.get()) : foo;\n</code></pre>\n\n<p>In other words, if the <em>other</em> thing is present, let me do something with it in regards to my existing thing; otherwise, just give me my existing thing back.</p>\n\n<p>I could imagine making my own <code>Optionals.doIfOtherPresent(T object, Optional&lt;U&gt; optional, BiFunction&lt;? super T, ? super U, ? extends T&gt; fn)</code>. I would use it like this:</p>\n\n<pre><code>Foo foobar = doIfOtherPresent(foo, bar, foo::add);\n</code></pre>\n\n<p>Is there something in the Java library that does this already?</p>\n"},{"tags":["java","spring","spring-security"],"comments":[{"owner":{"account_id":307015,"reputation":21530,"user_id":618087,"display_name":"Rob Winch"},"score":0,"creation_date":1460498762,"post_id":36584184,"comment_id":60768685,"body_markdown":"For WithMockUser to work, the Spring Security application must be ran on the same process / thread as the test. Is that the case?","body":"For WithMockUser to work, the Spring Security application must be ran on the same process / thread as the test. Is that the case?"},{"owner":{"account_id":482117,"reputation":1294,"user_id":896315,"accept_rate":65,"display_name":"Gaurav Rawat"},"score":0,"creation_date":1460560411,"post_id":36584184,"comment_id":60802382,"body_markdown":"@RobWinch ya let me check without Cucumber these were running fine when I run all tests within my app .Is it cucumber test runs make my tests run seperatly . Have updated my issue summary with the ABstractIntegrationTest class all my test cases inherit from .","body":"@RobWinch ya let me check without Cucumber these were running fine when I run all tests within my app .Is it cucumber test runs make my tests run seperatly . Have updated my issue summary with the ABstractIntegrationTest class all my test cases inherit from ."},{"owner":{"account_id":482117,"reputation":1294,"user_id":896315,"accept_rate":65,"display_name":"Gaurav Rawat"},"score":0,"creation_date":1460755686,"post_id":36584184,"comment_id":60907234,"body_markdown":"@RobWinch is there an alternative to withMockUser to mock as seems these dont work also if you use then in with cucumber tests like this @When(&quot;^I apply a GET on (.*)$&quot;)\n`@WithMockUser(username = &quot;BROWSER&quot;, roles = { &quot;BROWSER&quot;, &quot;ADMIN&quot; })\n    public void i_search_with_rsql(String query) throws Throwable {\n\tresult = mvc.perform(get(uri, query));\n    }`","body":"@RobWinch is there an alternative to withMockUser to mock as seems these dont work also if you use then in with cucumber tests like this @When(&quot;^I apply a GET on (.*)$&quot;) <code>@WithMockUser(username = &quot;BROWSER&quot;, roles = { &quot;BROWSER&quot;, &quot;ADMIN&quot; })     public void i_search_with_rsql(String query) throws Throwable { \tresult = mvc.perform(get(uri, query));     }</code>"},{"owner":{"account_id":307015,"reputation":21530,"user_id":618087,"display_name":"Rob Winch"},"score":0,"creation_date":1460755917,"post_id":36584184,"comment_id":60907320,"body_markdown":"How are you setting up the MockMvc instance (i.e. mvc variable)?","body":"How are you setting up the MockMvc instance (i.e. mvc variable)?"},{"owner":{"account_id":482117,"reputation":1294,"user_id":896315,"accept_rate":65,"display_name":"Gaurav Rawat"},"score":0,"creation_date":1460756207,"post_id":36584184,"comment_id":60907410,"body_markdown":"@RobWinch currently I am doing that with the cucumber @Before annotation as  `@cucumber.api.java.Before\n   public void setUp()\n   {\n      this.mvc = MockMvcBuilders.webAppContextSetup(context).\n            build();\n   }`","body":"@RobWinch currently I am doing that with the cucumber @Before annotation as  <code>@cucumber.api.java.Before    public void setUp()    {       this.mvc = MockMvcBuilders.webAppContextSetup(context).             build();    }</code>"}],"answers":[{"tags":[],"owner":{"account_id":307015,"reputation":21530,"user_id":618087,"display_name":"Rob Winch"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1460760040,"creation_date":1460760040,"answer_id":36657968,"question_id":36584184,"body_markdown":"Base upon your comments you need to ensure to apply Spring Security. You can find an example of this in the [Setting Up MockMvc and Spring Security section][1] of the reference documentation:\r\n\r\n    import static org.springframework.security.test.web.servlet.setup.SecurityMockMvcConfigurers.*;\r\n\r\n    // ...\r\n    \r\n    @Before\r\n\tpublic void setup() {\r\n\t\tmvc = MockMvcBuilders\r\n\t\t\t\t.webAppContextSetup(context)\r\n\t\t\t\t.apply(springSecurity()) // ADD THIS!\r\n\t\t\t\t.build();\r\n\t}\r\n\r\n\r\n\r\n  [1]: http://docs.spring.io/spring-security/site/docs/4.0.x/reference/htmlsingle/#test-mockmvc-setup","title":"Spring Security @WithMockUser does not work with cucumber Tests","body":"<p>Base upon your comments you need to ensure to apply Spring Security. You can find an example of this in the <a href=\"http://docs.spring.io/spring-security/site/docs/4.0.x/reference/htmlsingle/#test-mockmvc-setup\" rel=\"nofollow\">Setting Up MockMvc and Spring Security section</a> of the reference documentation:</p>\n\n<pre><code>import static org.springframework.security.test.web.servlet.setup.SecurityMockMvcConfigurers.*;\n\n// ...\n\n@Before\npublic void setup() {\n    mvc = MockMvcBuilders\n            .webAppContextSetup(context)\n            .apply(springSecurity()) // ADD THIS!\n            .build();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1354796,"reputation":1589,"user_id":1293433,"display_name":"aux"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1577773556,"creation_date":1540310752,"answer_id":52953467,"question_id":36584184,"body_markdown":"`WithMockUser` does not work with Cucumber. Use cucumber hooks instead.\r\n\r\n`WithMockUser` relies on `TestExecutionListener#beforeTestMethod` from Spring&#39;s test context support, but they are not invoked when running with Cucumber runner. This is because Cucumber runs scenarios composed of steps rather than the standard JUnit test methods.\r\n\r\n**Option 1 - Security context hooks.** You can setup security context with hooks, for example:\r\n\r\n    @ActiveProfiles(&quot;test&quot;)\r\n    @SpringBootTest(classes = MyServer.class)\r\n    @AutoConfigureMockMvc\r\n    @AutoConfigureRestDocs\r\n    @AutoConfigureCache\r\n    public class MyServerContextHooks {\r\n    \r\n      @Before\r\n      public void onBeforeScenario(final Scenario scenario) {\r\n        // This method does nothing - context setup is done with annotations\r\n      }\r\n    }\r\n\r\nExample annotation on scenarios:\r\n\r\n    @WithAdminUser\r\n    Scenario: Run action as admin\r\n        ...\r\n\r\nExample hook to use annotation on scenarios:\r\n\r\n    public class TestUserHooks {\r\n\r\n      @Before(&quot;@WithAdminUser&quot;)\r\n      public void setupAdminUser() {\r\n        SecurityContextHolder.getContext().setAuthentication(\r\n                new UsernamePasswordAuthenticationToken(\r\n                    &quot;admin&quot;,\r\n                    &quot;N/A&quot;,\r\n                    createAuthorityList(&quot;admin&quot;)));         \r\n      }\r\n    }\r\n\r\n**Option 2 - Authentication steps.** Another way is to use special steps for providing user into mockMvc:\r\n\r\n    Scenario: Run action as admin\r\n        Given I am logged in as admin\r\n        ...\r\n\r\n\r\nStepdef example:\r\n\r\n    public class SecurityTestSteps {\r\n    \r\n      @Autowired\r\n      private MockMvcGlue mockMvc;\r\n    \r\n      @Autowired\r\n      private OAuth2Mocks oauth2Mocks;\r\n    \r\n      @Autowired\r\n      private TestUsers users;\r\n    \r\n      /**\r\n       * Provides a one of predefined role-based authentications for the current request.\r\n       */\r\n      @Given(&quot;^I am logged in as (admin|editor|user)$&quot;)\r\n      public void given_UserIsAuthenticatedWithRole(final String role) {\r\n        switch (role) {\r\n          case &quot;admin&quot;:\r\n            mockMvc.request().with(authentication(oauth2Mocks.auth(users.admin())));\r\n            break;\r\n          case &quot;editor&quot;:\r\n            mockMvc.request().with(authentication(oauth2Mocks.auth(users.edtior())));\r\n            break;\r\n          default:\r\n            throw new CucumberException(&quot;Unsupported role &lt;&quot; + role + &quot;&gt;&quot;);\r\n        }\r\n      }\r\n    }\r\n\r\n","title":"Spring Security @WithMockUser does not work with cucumber Tests","body":"<p><code>WithMockUser</code> does not work with Cucumber. Use cucumber hooks instead.</p>\n\n<p><code>WithMockUser</code> relies on <code>TestExecutionListener#beforeTestMethod</code> from Spring's test context support, but they are not invoked when running with Cucumber runner. This is because Cucumber runs scenarios composed of steps rather than the standard JUnit test methods.</p>\n\n<p><strong>Option 1 - Security context hooks.</strong> You can setup security context with hooks, for example:</p>\n\n<pre><code>@ActiveProfiles(\"test\")\n@SpringBootTest(classes = MyServer.class)\n@AutoConfigureMockMvc\n@AutoConfigureRestDocs\n@AutoConfigureCache\npublic class MyServerContextHooks {\n\n  @Before\n  public void onBeforeScenario(final Scenario scenario) {\n    // This method does nothing - context setup is done with annotations\n  }\n}\n</code></pre>\n\n<p>Example annotation on scenarios:</p>\n\n<pre><code>@WithAdminUser\nScenario: Run action as admin\n    ...\n</code></pre>\n\n<p>Example hook to use annotation on scenarios:</p>\n\n<pre><code>public class TestUserHooks {\n\n  @Before(\"@WithAdminUser\")\n  public void setupAdminUser() {\n    SecurityContextHolder.getContext().setAuthentication(\n            new UsernamePasswordAuthenticationToken(\n                \"admin\",\n                \"N/A\",\n                createAuthorityList(\"admin\")));         \n  }\n}\n</code></pre>\n\n<p><strong>Option 2 - Authentication steps.</strong> Another way is to use special steps for providing user into mockMvc:</p>\n\n<pre><code>Scenario: Run action as admin\n    Given I am logged in as admin\n    ...\n</code></pre>\n\n<p>Stepdef example:</p>\n\n<pre><code>public class SecurityTestSteps {\n\n  @Autowired\n  private MockMvcGlue mockMvc;\n\n  @Autowired\n  private OAuth2Mocks oauth2Mocks;\n\n  @Autowired\n  private TestUsers users;\n\n  /**\n   * Provides a one of predefined role-based authentications for the current request.\n   */\n  @Given(\"^I am logged in as (admin|editor|user)$\")\n  public void given_UserIsAuthenticatedWithRole(final String role) {\n    switch (role) {\n      case \"admin\":\n        mockMvc.request().with(authentication(oauth2Mocks.auth(users.admin())));\n        break;\n      case \"editor\":\n        mockMvc.request().with(authentication(oauth2Mocks.auth(users.edtior())));\n        break;\n      default:\n        throw new CucumberException(\"Unsupported role &lt;\" + role + \"&gt;\");\n    }\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23016297,"reputation":1,"user_id":17138018,"display_name":"Mickymandoogle"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634076581,"creation_date":1634076581,"answer_id":69547553,"question_id":36584184,"body_markdown":"In Response to Rob Winch&#39;s answer, mine worked using his method minus the line\r\n&quot;.apply(springSecurity())&quot;","title":"Spring Security @WithMockUser does not work with cucumber Tests","body":"<p>In Response to Rob Winch's answer, mine worked using his method minus the line\n&quot;.apply(springSecurity())&quot;</p>\n"}],"owner":{"account_id":482117,"reputation":1294,"user_id":896315,"accept_rate":65,"display_name":"Gaurav Rawat"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5715,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":3,"score":7,"last_activity_date":1634076581,"creation_date":1460495734,"question_id":36584184,"body_markdown":"I am using cucumber tests to test my spring boot app with spring security enabled .Things work fine except when I run my test suite with cucumber tests some tests using spring security eg.\r\n\r\n        @WithMockUser(username = &quot;BROWSER&quot;, roles =\r\n       {&quot;BROWSER&quot;,&quot;ADMIN&quot;})\r\nfail .These tests do work if I do run them in seclusion as simple junit tests but fail when run with cucumber test steps.\r\nThe issue looks like the spring security test mock behaviour isnt getting applied when I run the same with cucumber tests.\r\n\r\nMy cucumber test run class is as below \r\n\r\n    @RunWith(Cucumber.class)\r\n    @CucumberOptions(features = &quot;src/test/resources&quot;, monochrome = true, format =\r\n    {&quot;pretty&quot;, &quot;html:src/main/resources/static/cucumber&quot;})\r\n    public class CucumberTests\r\n    {\r\n    \r\n    }\r\n\r\nAlso I noticed the same works when run via Maven with  `&lt;reuseForks&gt;false&lt;/reuseForks&gt;` .Also maven triggered test case run also fails if this option is not checked .\r\n\r\n**UPDATE**\r\n\r\nAbstractIntegrationTest class all tests extend\r\n\r\n    @RunWith(SpringJUnit4ClassRunner.class)\r\n    @ContextConfiguration(classes = Services.class,loader = SpringApplicationContextLoader.class)\r\n    //@IntegrationTest\r\n    @WebIntegrationTest(randomPort = true)\r\n    public abstract class AbstractIntegrationTest {\r\n\r\nAnother use case which does not work is using theses annotation is cucumber feature conditions like below \r\n\r\n    @When(&quot;^I apply a GET on (.*)$&quot;)\r\n        @WithMockUser(username = &quot;BROWSER&quot;, roles = { &quot;BROWSER&quot;, &quot;ADMIN&quot; })\r\n        public void i_search_with_rsql(String query) throws Throwable {\r\n    \tresult = mvc.perform(get(uri, query));\r\n        }\r\n\r\n\r\nany help or workaround on this.","title":"Spring Security @WithMockUser does not work with cucumber Tests","body":"<p>I am using cucumber tests to test my spring boot app with spring security enabled .Things work fine except when I run my test suite with cucumber tests some tests using spring security eg.</p>\n\n<pre><code>    @WithMockUser(username = \"BROWSER\", roles =\n   {\"BROWSER\",\"ADMIN\"})\n</code></pre>\n\n<p>fail .These tests do work if I do run them in seclusion as simple junit tests but fail when run with cucumber test steps.\nThe issue looks like the spring security test mock behaviour isnt getting applied when I run the same with cucumber tests.</p>\n\n<p>My cucumber test run class is as below </p>\n\n<pre><code>@RunWith(Cucumber.class)\n@CucumberOptions(features = \"src/test/resources\", monochrome = true, format =\n{\"pretty\", \"html:src/main/resources/static/cucumber\"})\npublic class CucumberTests\n{\n\n}\n</code></pre>\n\n<p>Also I noticed the same works when run via Maven with  <code>&lt;reuseForks&gt;false&lt;/reuseForks&gt;</code> .Also maven triggered test case run also fails if this option is not checked .</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>AbstractIntegrationTest class all tests extend</p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(classes = Services.class,loader = SpringApplicationContextLoader.class)\n//@IntegrationTest\n@WebIntegrationTest(randomPort = true)\npublic abstract class AbstractIntegrationTest {\n</code></pre>\n\n<p>Another use case which does not work is using theses annotation is cucumber feature conditions like below </p>\n\n<pre><code>@When(\"^I apply a GET on (.*)$\")\n    @WithMockUser(username = \"BROWSER\", roles = { \"BROWSER\", \"ADMIN\" })\n    public void i_search_with_rsql(String query) throws Throwable {\n    result = mvc.perform(get(uri, query));\n    }\n</code></pre>\n\n<p>any help or workaround on this.</p>\n"},{"tags":["java","parallel-processing","java-stream"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1634030869,"post_id":69533700,"comment_id":122911028,"body_markdown":"You code doesnt produce a list at all. In this form, it doesnt even pass the compiler.","body":"You code doesnt produce a list at all. In this form, it doesnt even pass the compiler."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1634461679,"post_id":69533700,"comment_id":123026324,"body_markdown":"If you want it sequential why are you using a parallel stream?","body":"If you want it sequential why are you using a parallel stream?"},{"owner":{"account_id":6542165,"reputation":396,"user_id":5059265,"accept_rate":17,"display_name":"whishky"},"score":0,"creation_date":1634683590,"post_id":69533700,"comment_id":123090228,"body_markdown":"@user207421 why people need parallel stream ? for one for better latencies. And i didn&#39;t mention i need sequential, i just need the output coming from the method in the same order, and getting the output in any order and rearranging is also fine for me.","body":"@user207421 why people need parallel stream ? for one for better latencies. And i didn&#39;t mention i need sequential, i just need the output coming from the method in the same order, and getting the output in any order and rearranging is also fine for me."}],"answers":[{"tags":[],"owner":{"account_id":1251593,"reputation":10353,"user_id":1211906,"display_name":"Marc Baumbach"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1633998168,"creation_date":1633998168,"answer_id":69533773,"question_id":69533700,"body_markdown":"The reason it can come out of order is because `forEach` is an unordered stream terminal operation. From the [docs][1]:\r\n\r\n&gt; For parallel stream pipelines, this operation does not guarantee to respect the encounter order of the stream, as doing so would sacrifice the benefit of parallelism.\r\n\r\nGiven that, you can choose to use something like the `forEachOrdered` alternative or `map` and `collect` to preserve the order. Here&#39;s the `map` and `collect` version:\r\n\r\n```java\r\ninputs.parallelStream()\r\n    .map(input -&gt; processStringInput(input))\r\n    .collect(Collectors.toList());\r\n```\r\n\r\nThere are more details about the difference between ordered vs unordered and sequential vs parallel streams in this answer: https://stackoverflow.com/questions/29216588/how-to-ensure-order-of-processing-in-java8-streams.\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#forEach-java.util.function.Consumer-","title":"How to get responses in the same order as the original list using parallelStream","body":"<p>The reason it can come out of order is because <code>forEach</code> is an unordered stream terminal operation. From the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#forEach-java.util.function.Consumer-\" rel=\"nofollow noreferrer\">docs</a>:</p>\n<blockquote>\n<p>For parallel stream pipelines, this operation does not guarantee to respect the encounter order of the stream, as doing so would sacrifice the benefit of parallelism.</p>\n</blockquote>\n<p>Given that, you can choose to use something like the <code>forEachOrdered</code> alternative or <code>map</code> and <code>collect</code> to preserve the order. Here's the <code>map</code> and <code>collect</code> version:</p>\n<pre class=\"lang-java prettyprint-override\"><code>inputs.parallelStream()\n    .map(input -&gt; processStringInput(input))\n    .collect(Collectors.toList());\n</code></pre>\n<p>There are more details about the difference between ordered vs unordered and sequential vs parallel streams in this answer: <a href=\"https://stackoverflow.com/questions/29216588/how-to-ensure-order-of-processing-in-java8-streams\">How to ensure order of processing in java8 streams?</a>.</p>\n"}],"owner":{"account_id":6542165,"reputation":396,"user_id":5059265,"accept_rate":17,"display_name":"whishky"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":368,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":69533773,"answer_count":1,"score":-2,"last_activity_date":1634076284,"creation_date":1633997347,"question_id":69533700,"body_markdown":"I have an original list and i am using parallel processing on that list(calling a method).\r\nWhat is want is to store the response of that method to a new list in the same order as the original list.\r\n\r\n```\r\npublic List&lt;XYZResponse&gt; process(List&lt;String&gt; inputs) {\r\n        List&lt;XYZResponse&gt; myResponse = new ArrayList&lt;&gt;();\r\n        inputs.parallelStream().forEach(input -&gt; {\r\n            myResponse.add(processStringInput(input));\r\n        });\r\n    }\r\n    return myResponse;\r\n}\r\n\r\nprivate XYZResponse processStringInput(String input) {\r\n    return new XYZResponse.Builder().resp(input).build();\r\n}\r\n\r\n```\r\n\r\nHere i want my List&lt;XYZResponse&gt; to be in the same order as the inputs Array.\r\nHave tried a few other answers from stack overflow, but with no luck. \r\nAny help is appreciated.\r\n\r\n ","title":"How to get responses in the same order as the original list using parallelStream","body":"<p>I have an original list and i am using parallel processing on that list(calling a method).\nWhat is want is to store the response of that method to a new list in the same order as the original list.</p>\n<pre><code>public List&lt;XYZResponse&gt; process(List&lt;String&gt; inputs) {\n        List&lt;XYZResponse&gt; myResponse = new ArrayList&lt;&gt;();\n        inputs.parallelStream().forEach(input -&gt; {\n            myResponse.add(processStringInput(input));\n        });\n    }\n    return myResponse;\n}\n\nprivate XYZResponse processStringInput(String input) {\n    return new XYZResponse.Builder().resp(input).build();\n}\n\n</code></pre>\n<p>Here i want my List to be in the same order as the inputs Array.\nHave tried a few other answers from stack overflow, but with no luck.\nAny help is appreciated.</p>\n"},{"tags":["java","apache-poi","powerpoint"],"comments":[{"owner":{"account_id":5535686,"reputation":4753,"user_id":4394120,"display_name":"John Korchok"},"score":0,"creation_date":1634082107,"post_id":69547511,"comment_id":122929254,"body_markdown":"You know that headers exist only on notes and handout pages, right?","body":"You know that headers exist only on notes and handout pages, right?"},{"owner":{"account_id":15564945,"reputation":13,"user_id":11229017,"display_name":"CLS"},"score":0,"creation_date":1634100091,"post_id":69547511,"comment_id":122932178,"body_markdown":"Thank you for getting back to me, John.  You are correct, perhaps this is why it doesn&#39;t work.  I think perhaps what I&#39;m looking for a some search and replace regardless of where this text is.  Would you happen to have a link to a potential solution?","body":"Thank you for getting back to me, John.  You are correct, perhaps this is why it doesn&#39;t work.  I think perhaps what I&#39;m looking for a some search and replace regardless of where this text is.  Would you happen to have a link to a potential solution?"}],"owner":{"account_id":15564945,"reputation":13,"user_id":11229017,"display_name":"CLS"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":240,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1634076129,"creation_date":1634076129,"question_id":69547511,"body_markdown":"As it says in the title, I&#39;m trying to search and replace header and footer text in new and old PowerPoint (.ppt and .pptx) files.  Here&#39;s a snippet of what I&#39;ve done, but it doesn&#39;t work:\r\n\r\n&#39;&#39;&#39;\r\n\r\n       HSLFSlideShow document = null;\r\n\r\n        try {\r\n            document = new HSLFSlideShow(new FileInputStream(file));\r\n        } catch (IOException e) {\r\n            System.out.println(e.getMessage() + &quot; : &quot; + file.getName());\r\n        }\r\n\r\n        for (HSLFSlideMaster slideMaster : document.getSlideMasters()) {\r\n            HeadersFooters headersFooters = slideMaster.getHeadersFooters();\r\n            System.out.printf(&quot;header details:  Header %s and Footer %s.\\n&quot;, headersFooters.getHeaderText(), headersFooters.getFooterText());\r\n            headersFooters.setHeaderText(replacement);\r\n            headersFooters.setFootersText(replacement);\r\n            System.out.printf(&quot;NEW header details:  Header %s and Footer %s.\\n&quot;, headersFooters.getHeaderText(), headersFooters.getFooterText());\r\n        }\r\n\r\n&#39;&#39;&#39;\r\n\r\nAfter the file is saved (in code further down), I open the .ppt file and nothing has changed.","title":"Search and Replace Header and Footer text in PowerPoint (.ppt and .pptx) using POI for Java","body":"<p>As it says in the title, I'm trying to search and replace header and footer text in new and old PowerPoint (.ppt and .pptx) files.  Here's a snippet of what I've done, but it doesn't work:</p>\n<p>'''</p>\n<pre><code>   HSLFSlideShow document = null;\n\n    try {\n        document = new HSLFSlideShow(new FileInputStream(file));\n    } catch (IOException e) {\n        System.out.println(e.getMessage() + &quot; : &quot; + file.getName());\n    }\n\n    for (HSLFSlideMaster slideMaster : document.getSlideMasters()) {\n        HeadersFooters headersFooters = slideMaster.getHeadersFooters();\n        System.out.printf(&quot;header details:  Header %s and Footer %s.\\n&quot;, headersFooters.getHeaderText(), headersFooters.getFooterText());\n        headersFooters.setHeaderText(replacement);\n        headersFooters.setFootersText(replacement);\n        System.out.printf(&quot;NEW header details:  Header %s and Footer %s.\\n&quot;, headersFooters.getHeaderText(), headersFooters.getFooterText());\n    }\n</code></pre>\n<p>'''</p>\n<p>After the file is saved (in code further down), I open the .ppt file and nothing has changed.</p>\n"},{"tags":["java","android","sqlite"],"comments":[{"owner":{"account_id":1547313,"reputation":82154,"user_id":1440565,"accept_rate":59,"display_name":"Code-Apprentice"},"score":0,"creation_date":1634074879,"post_id":69546983,"comment_id":122927712,"body_markdown":"I suggest you learn about the Room API. This makes it much easier to work with a SQLite database rather than writing raw HTML.","body":"I suggest you learn about the Room API. This makes it much easier to work with a SQLite database rather than writing raw HTML."},{"owner":{"account_id":19830820,"reputation":620,"user_id":14525432,"display_name":"AwiringCameron"},"score":0,"creation_date":1634075128,"post_id":69546983,"comment_id":122927788,"body_markdown":"Have a look at [this article](https://stackoverflow.com/questions/1601151/how-do-i-check-in-sqlite-whether-a-table-exists) about querying to see if a table exists.","body":"Have a look at <a href=\"https://stackoverflow.com/questions/1601151/how-do-i-check-in-sqlite-whether-a-table-exists\">this article</a> about querying to see if a table exists."}],"answers":[{"tags":[],"owner":{"account_id":6077735,"reputation":52951,"user_id":4744514,"accept_rate":96,"display_name":"MikeT"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1634075759,"creation_date":1634074740,"answer_id":69547317,"question_id":69546983,"body_markdown":"The value a886 should be a text/string literal not a numeric literal. Therefore it should be enclosed in single quotes. The errors are because:-\r\n\r\n- a886 fails with no column found as it&#39;s taken to be a column name as it&#39;s not a literal. \r\n- whilst 88a6 is first not a valid literal (due to the a) and therefore a column name but then an invalid column (cannot start with a numeric unless enclosed) name and thus not a known token.\r\n\r\n- See [Literal Values (Constants)][1]\r\n\r\nYou could fix this using (enclosing the threadId in single quotes ) :-\r\n\r\n    String selectQuery = &quot;SELECT  * FROM &quot; + Conversations.TABLE_NAME + &quot; WHERE &quot; +\r\n        Conversations.COLUMN_THREAD_ID + &quot; LIKE &#39;&quot; + threadId + &quot;&#39;&quot;;\r\n\r\nHowever, it is recommended to use bound parameters to protect against SQL Injection.\r\n\r\nThus it would be recommended to use :-\r\n\r\n    String selectQuery = &quot;SELECT  * FROM &quot; + Conversations.TABLE_NAME + &quot; WHERE &quot; +\r\n            Conversations.COLUMN_THREAD_ID + &quot; LIKE ?&quot;;\r\n\r\nalong with :-\r\n\r\n    Cursor cursor = db.rawQuery(selectQuery, new String[]{threadId});\r\n\r\n - i.e. the ? is replaced by the threadId value properly enclosed.\r\n\r\nYou may wish to consider using the convenience [query][2] method rather than rawQuery, this would be :-\r\n\r\n    Cursor cursor = db.query(Conversations.TABLE_NAME,null,Conversations.COLUMN_THREAD_ID + &quot; LIKE ?&quot;, new String[]{theadId},null,null, null);\r\n\r\n- The SQL is built for you.\r\n\r\n&gt; It almost looks like mixing letters and numbers might be part of the reason here but should not be as the column was created to hold TEXT datatype.\r\n\r\nSQlite has no issue storing any value in any type. The type, which itself can be virtually anything (rules are used to determine the resultant type), is only an indication of the value that will be stored. The only exception is that a rowid or an alias of the rowid MUST be an integer value *(your id column is an alias of the rowid column)*.\r\n\r\n\r\n  [1]: https://sqlite.org/lang_expr.html#literal_values_constants_\r\n  [2]: https://developer.android.com/reference/android/database/sqlite/SQLiteDatabase#query(java.lang.String,%20java.lang.String[],%20java.lang.String,%20java.lang.String[],%20java.lang.String,%20java.lang.String,%20java.lang.String)","title":"SQLite database &quot;No such column&quot; error on verified existing column","body":"<p>The value a886 should be a text/string literal not a numeric literal. Therefore it should be enclosed in single quotes. The errors are because:-</p>\n<ul>\n<li><p>a886 fails with no column found as it's taken to be a column name as it's not a literal.</p>\n</li>\n<li><p>whilst 88a6 is first not a valid literal (due to the a) and therefore a column name but then an invalid column (cannot start with a numeric unless enclosed) name and thus not a known token.</p>\n</li>\n<li><p>See <a href=\"https://sqlite.org/lang_expr.html#literal_values_constants_\" rel=\"nofollow noreferrer\">Literal Values (Constants)</a></p>\n</li>\n</ul>\n<p>You could fix this using (enclosing the threadId in single quotes ) :-</p>\n<pre><code>String selectQuery = &quot;SELECT  * FROM &quot; + Conversations.TABLE_NAME + &quot; WHERE &quot; +\n    Conversations.COLUMN_THREAD_ID + &quot; LIKE '&quot; + threadId + &quot;'&quot;;\n</code></pre>\n<p>However, it is recommended to use bound parameters to protect against SQL Injection.</p>\n<p>Thus it would be recommended to use :-</p>\n<pre><code>String selectQuery = &quot;SELECT  * FROM &quot; + Conversations.TABLE_NAME + &quot; WHERE &quot; +\n        Conversations.COLUMN_THREAD_ID + &quot; LIKE ?&quot;;\n</code></pre>\n<p>along with :-</p>\n<pre><code>Cursor cursor = db.rawQuery(selectQuery, new String[]{threadId});\n</code></pre>\n<ul>\n<li>i.e. the ? is replaced by the threadId value properly enclosed.</li>\n</ul>\n<p>You may wish to consider using the convenience <a href=\"https://developer.android.com/reference/android/database/sqlite/SQLiteDatabase#query(java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String,%20java.lang.String)\" rel=\"nofollow noreferrer\">query</a> method rather than rawQuery, this would be :-</p>\n<pre><code>Cursor cursor = db.query(Conversations.TABLE_NAME,null,Conversations.COLUMN_THREAD_ID + &quot; LIKE ?&quot;, new String[]{theadId},null,null, null);\n</code></pre>\n<ul>\n<li>The SQL is built for you.</li>\n</ul>\n<blockquote>\n<p>It almost looks like mixing letters and numbers might be part of the reason here but should not be as the column was created to hold TEXT datatype.</p>\n</blockquote>\n<p>SQlite has no issue storing any value in any type. The type, which itself can be virtually anything (rules are used to determine the resultant type), is only an indication of the value that will be stored. The only exception is that a rowid or an alias of the rowid MUST be an integer value <em>(your id column is an alias of the rowid column)</em>.</p>\n"}],"owner":{"account_id":19381089,"reputation":345,"user_id":14172330,"display_name":"edgar_wideman"},"comment_count":2,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6071,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"closed_date":1669826417,"accepted_answer_id":69547317,"answer_count":1,"score":1,"last_activity_date":1634075759,"creation_date":1634072520,"question_id":69546983,"body_markdown":"I am stuck on an &quot;SQLiteException: no such column:&quot; error. I am trying to make some code to check if an item exists in the database before storing it, I don&#39;t know if it&#39;s the best way or not but it does the job. Or not really, when I use all numbers for the data in the particular column that I&#39;m searching it works fine. But if there is any letter in the column data it crashes.\r\n\r\nThe MainActivity\r\n\r\n    private ConversationsDatabaseHelper db;\r\n    //onCreate stuff here\r\n    db = new ConversationsDatabaseHelper(this);\r\n    String threadId = &quot;886&quot;;\r\n    Log.d(TAG, &quot;dbTest: EXISTS; &quot; + db.conversationExists(threadId));\r\n\r\nand in the databaseHelper class is the converstionExists function \r\n\r\n    public boolean conversationExists(String threadId) {\r\n    // Select All Query\r\n    String selectQuery = &quot;SELECT  * FROM &quot; + Conversations.TABLE_NAME + &quot; WHERE &quot; +\r\n            Conversations.COLUMN_THREAD_ID + &quot; LIKE &quot; + threadId;\r\n\r\n    SQLiteDatabase db = this.getWritableDatabase();\r\n    Cursor cursor = db.rawQuery(selectQuery, null);\r\n    boolean returnValue = false;\r\n    // Check if this message exists\r\n    if (cursor.moveToFirst()) {\r\n        returnValue = true;\r\n    }\r\n    // close db connection\r\n    db.close();\r\n    return returnValue;\r\n    }\r\nSo if I use for example &quot;886&quot; as the threadId value then all is fine. If I create a row with matching threadId then it returns true. In this case I did not so hence false.\r\nstack trace...\r\n\r\n&gt; dbTest: EXISTS; false\r\n\r\nbut using a886 results in \r\n\r\n&gt; Caused by: android.database.sqlite.SQLiteException: no such column: a886 (code 1 SQLITE_ERROR): , while compiling: SELECT  * FROM conversations WHERE thread_id LIKE a886\r\n\r\nand 88a6 results in this\r\n\r\n&gt;      Caused by: android.database.sqlite.SQLiteException: unrecognized token: &quot;88a6&quot; (code 1 SQLITE_ERROR): , while compiling: SELECT  * FROM conversations WHERE thread_id LIKE 88a6\r\nIt almost looks like mixing letters and numbers might be part of the reason here but should not be as the column was created to hold TEXT datatype. here is the database create table query string.\r\n\r\n        public static final String TABLE_NAME = &quot;conversations&quot;;\r\n\r\n    public static final String COLUMN_ID = &quot;id&quot;;\r\n    public static final String COLUMN__ID = &quot;_id&quot;;\r\n    public static final String COLUMN_GROUP_ID = &quot;group_id&quot;;\r\n    public static final String COLUMN_LAST_MESSAGE_ID = &quot;last_message_id&quot;;\r\n    public static final String COLUMN_THREAD_ID = &quot;thread_id&quot;;\r\n    public static final String COLUMN_ADDRESS = &quot;address&quot;;\r\n    public static final String COLUMN_CONTACT = &quot;contact&quot;;\r\n    public static final String COLUMN_BODY = &quot;body&quot;;\r\n    public static final String COLUMN_DATE = &quot;date&quot;;\r\n    public static final String COLUMN_TYPE = &quot;type&quot;;\r\n    public static final String COLUMN_STATE = &quot;state&quot;;\r\n    public static final String COLUMN_READ = &quot;read&quot;;\r\n    public static final String COLUMN_STATUS = &quot;status&quot;;\r\n    public static final String COLUMN_CT = &quot;ct&quot;;    \r\n    // Create table SQL query\r\n    public static final String CREATE_TABLE =\r\n            &quot;CREATE TABLE &quot; + TABLE_NAME + &quot;(&quot;\r\n                    + COLUMN_ID + &quot; INTEGER PRIMARY KEY ,&quot;\r\n                    + COLUMN_LAST_MESSAGE_ID + &quot; TEXT,&quot;\r\n                    + COLUMN__ID + &quot; TEXT,&quot;\r\n                    + COLUMN_GROUP_ID + &quot; TEXT,&quot;\r\n                    + COLUMN_THREAD_ID + &quot; TEXT,&quot;\r\n                    + COLUMN_ADDRESS + &quot; TEXT,&quot;\r\n                    + COLUMN_CONTACT + &quot; TEXT,&quot;\r\n                    + COLUMN_BODY + &quot; TEXT,&quot;\r\n                    + COLUMN_DATE + &quot; TEXT,&quot;\r\n                    + COLUMN_TYPE + &quot; TEXT,&quot;\r\n                    + COLUMN_STATE + &quot; TEXT,&quot;\r\n                    + COLUMN_READ + &quot; TEXT,&quot;\r\n                    + COLUMN_STATUS + &quot; TEXT,&quot;\r\n                    + COLUMN_CT + &quot; TEXT&quot;\r\n                    + &quot;)&quot;;\r\n\r\nI am &quot;up a creek&quot; with this and any help would be greatly appreciated. ","title":"SQLite database &quot;No such column&quot; error on verified existing column","body":"<p>I am stuck on an &quot;SQLiteException: no such column:&quot; error. I am trying to make some code to check if an item exists in the database before storing it, I don't know if it's the best way or not but it does the job. Or not really, when I use all numbers for the data in the particular column that I'm searching it works fine. But if there is any letter in the column data it crashes.</p>\n<p>The MainActivity</p>\n<pre><code>private ConversationsDatabaseHelper db;\n//onCreate stuff here\ndb = new ConversationsDatabaseHelper(this);\nString threadId = &quot;886&quot;;\nLog.d(TAG, &quot;dbTest: EXISTS; &quot; + db.conversationExists(threadId));\n</code></pre>\n<p>and in the databaseHelper class is the converstionExists function</p>\n<pre><code>public boolean conversationExists(String threadId) {\n// Select All Query\nString selectQuery = &quot;SELECT  * FROM &quot; + Conversations.TABLE_NAME + &quot; WHERE &quot; +\n        Conversations.COLUMN_THREAD_ID + &quot; LIKE &quot; + threadId;\n\nSQLiteDatabase db = this.getWritableDatabase();\nCursor cursor = db.rawQuery(selectQuery, null);\nboolean returnValue = false;\n// Check if this message exists\nif (cursor.moveToFirst()) {\n    returnValue = true;\n}\n// close db connection\ndb.close();\nreturn returnValue;\n}\n</code></pre>\n<p>So if I use for example &quot;886&quot; as the threadId value then all is fine. If I create a row with matching threadId then it returns true. In this case I did not so hence false.\nstack trace...</p>\n<blockquote>\n<p>dbTest: EXISTS; false</p>\n</blockquote>\n<p>but using a886 results in</p>\n<blockquote>\n<p>Caused by: android.database.sqlite.SQLiteException: no such column: a886 (code 1 SQLITE_ERROR): , while compiling: SELECT  * FROM conversations WHERE thread_id LIKE a886</p>\n</blockquote>\n<p>and 88a6 results in this</p>\n<blockquote>\n<pre><code> Caused by: android.database.sqlite.SQLiteException: unrecognized token: &quot;88a6&quot; (code 1 SQLITE_ERROR): , while compiling: SELECT  * FROM conversations WHERE thread_id LIKE 88a6\n</code></pre>\n</blockquote>\n<p>It almost looks like mixing letters and numbers might be part of the reason here but should not be as the column was created to hold TEXT datatype. here is the database create table query string.</p>\n<pre><code>    public static final String TABLE_NAME = &quot;conversations&quot;;\n\npublic static final String COLUMN_ID = &quot;id&quot;;\npublic static final String COLUMN__ID = &quot;_id&quot;;\npublic static final String COLUMN_GROUP_ID = &quot;group_id&quot;;\npublic static final String COLUMN_LAST_MESSAGE_ID = &quot;last_message_id&quot;;\npublic static final String COLUMN_THREAD_ID = &quot;thread_id&quot;;\npublic static final String COLUMN_ADDRESS = &quot;address&quot;;\npublic static final String COLUMN_CONTACT = &quot;contact&quot;;\npublic static final String COLUMN_BODY = &quot;body&quot;;\npublic static final String COLUMN_DATE = &quot;date&quot;;\npublic static final String COLUMN_TYPE = &quot;type&quot;;\npublic static final String COLUMN_STATE = &quot;state&quot;;\npublic static final String COLUMN_READ = &quot;read&quot;;\npublic static final String COLUMN_STATUS = &quot;status&quot;;\npublic static final String COLUMN_CT = &quot;ct&quot;;    \n// Create table SQL query\npublic static final String CREATE_TABLE =\n        &quot;CREATE TABLE &quot; + TABLE_NAME + &quot;(&quot;\n                + COLUMN_ID + &quot; INTEGER PRIMARY KEY ,&quot;\n                + COLUMN_LAST_MESSAGE_ID + &quot; TEXT,&quot;\n                + COLUMN__ID + &quot; TEXT,&quot;\n                + COLUMN_GROUP_ID + &quot; TEXT,&quot;\n                + COLUMN_THREAD_ID + &quot; TEXT,&quot;\n                + COLUMN_ADDRESS + &quot; TEXT,&quot;\n                + COLUMN_CONTACT + &quot; TEXT,&quot;\n                + COLUMN_BODY + &quot; TEXT,&quot;\n                + COLUMN_DATE + &quot; TEXT,&quot;\n                + COLUMN_TYPE + &quot; TEXT,&quot;\n                + COLUMN_STATE + &quot; TEXT,&quot;\n                + COLUMN_READ + &quot; TEXT,&quot;\n                + COLUMN_STATUS + &quot; TEXT,&quot;\n                + COLUMN_CT + &quot; TEXT&quot;\n                + &quot;)&quot;;\n</code></pre>\n<p>I am &quot;up a creek&quot; with this and any help would be greatly appreciated.</p>\n"},{"tags":["java","jsoup"],"comments":[{"owner":{"account_id":3700787,"reputation":1543,"user_id":3080610,"display_name":"melcher"},"score":2,"creation_date":1630078286,"post_id":68955955,"comment_id":121865977,"body_markdown":"It looks like the table content of that site is loaded async via JavaScript. You say you can get the links in the header - do you mean the links above the table? Your issue may be that youre loading the html but not using a scraping tool that evaluates the JavaScript / loads the table of links from the server.","body":"It looks like the table content of that site is loaded async via JavaScript. You say you can get the links in the header - do you mean the links above the table? Your issue may be that youre loading the html but not using a scraping tool that evaluates the JavaScript / loads the table of links from the server."},{"owner":{"account_id":18691442,"reputation":1,"user_id":13625679,"display_name":"JG-TLS"},"score":0,"creation_date":1630078760,"post_id":68955955,"comment_id":121866182,"body_markdown":"yes i can get all the links above the table... do you have an idea of what tool i should use to evaluates the js ?","body":"yes i can get all the links above the table... do you have an idea of what tool i should use to evaluates the js ?"},{"owner":{"account_id":8539439,"reputation":466,"user_id":6400036,"display_name":"Frighi"},"score":0,"creation_date":1630504083,"post_id":68955955,"comment_id":121974069,"body_markdown":"Do you just need all links once or are you programming something to scrape them multiple times? The page uses this API to get the links, you could just do an HTTP GET call and then scrape into the respone: \n\nhttps://s3-ap-northeast-1.amazonaws.com/data.binance.vision?delimiter=/&amp;prefix=data/spot/monthly/klines/&amp;marker=data%2Fspot%2Fmonthly%2Fklines%2FONEBIDR%2F","body":"Do you just need all links once or are you programming something to scrape them multiple times? The page uses this API to get the links, you could just do an HTTP GET call and then scrape into the respone:   <a href=\"https://s3-ap-northeast-1.amazonaws.com/data.binance.vision?delimiter=/&amp;prefix=data/spot/monthly/klines/&amp;marker=data%2Fspot%2Fmonthly%2Fklines%2FONEBIDR%2F\" rel=\"nofollow noreferrer\">s3-ap-northeast-1.amazonaws.com/data.binance.vision?delimite&zwnj;&#8203;r=/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1630080893,"creation_date":1630080893,"answer_id":68956552,"question_id":68955955,"body_markdown":"The table which includes the links you are looking for is added to the DOM by Javascript after the initial page load. In order to be able to get that content you need to to simulate a browser. For example you can use [HtmlUnit][1] which is a GUI-Less browser for Java programs. Use html unit to access the page and wait a while until the javascript code is executed and the table is loaded. Afterwards you can parse the page as usual with jsoup. \r\n\r\nMaven repo HtmlUnit:\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/net.sourceforge.htmlunit/htmlunit --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;net.sourceforge.htmlunit&lt;/groupId&gt;\r\n        &lt;artifactId&gt;htmlunit&lt;/artifactId&gt;\r\n        &lt;version&gt;2.52.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\nExample:\r\n\r\n    import java.io.IOException;\r\n    \r\n    import com.gargoylesoftware.htmlunit.WebClient;\r\n    import com.gargoylesoftware.htmlunit.html.HtmlPage;\r\n    \r\n    import org.jsoup.Jsoup;\r\n    import org.jsoup.nodes.Document;\r\n    import org.jsoup.nodes.Element;\r\n    import org.jsoup.select.Elements;\r\n    \r\n    public class Example {\r\n    \r\n        public static void main(String[] args) throws IOException {\r\n            String url = &quot;https://data.binance.vision/?prefix=data/spot/monthly/klines/&quot;;\r\n            \r\n            WebClient webClient = new WebClient();\r\n            HtmlPage page = webClient.getPage(url);        \r\n            webClient.waitForBackgroundJavaScript(5000);\r\n            \r\n            Document doc = Jsoup.parse(page.asXml());\r\n            Element tbody = doc.getElementById(&quot;listing&quot;);\r\n            Elements links = tbody.select(&quot;a[href]&quot;);\r\n            \r\n            links.forEach(link -&gt; {\r\n                System.out.println(link.attr(&quot;href&quot;));\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://htmlunit.sourceforge.io/","title":"scraping all the links in a webpage","body":"<p>The table which includes the links you are looking for is added to the DOM by Javascript after the initial page load. In order to be able to get that content you need to to simulate a browser. For example you can use <a href=\"https://htmlunit.sourceforge.io/\" rel=\"nofollow noreferrer\">HtmlUnit</a> which is a GUI-Less browser for Java programs. Use html unit to access the page and wait a while until the javascript code is executed and the table is loaded. Afterwards you can parse the page as usual with jsoup.</p>\n<p>Maven repo HtmlUnit:</p>\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/net.sourceforge.htmlunit/htmlunit --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;net.sourceforge.htmlunit&lt;/groupId&gt;\n    &lt;artifactId&gt;htmlunit&lt;/artifactId&gt;\n    &lt;version&gt;2.52.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Example:</p>\n<pre><code>import java.io.IOException;\n\nimport com.gargoylesoftware.htmlunit.WebClient;\nimport com.gargoylesoftware.htmlunit.html.HtmlPage;\n\nimport org.jsoup.Jsoup;\nimport org.jsoup.nodes.Document;\nimport org.jsoup.nodes.Element;\nimport org.jsoup.select.Elements;\n\npublic class Example {\n\n    public static void main(String[] args) throws IOException {\n        String url = &quot;https://data.binance.vision/?prefix=data/spot/monthly/klines/&quot;;\n        \n        WebClient webClient = new WebClient();\n        HtmlPage page = webClient.getPage(url);        \n        webClient.waitForBackgroundJavaScript(5000);\n        \n        Document doc = Jsoup.parse(page.asXml());\n        Element tbody = doc.getElementById(&quot;listing&quot;);\n        Elements links = tbody.select(&quot;a[href]&quot;);\n        \n        links.forEach(link -&gt; {\n            System.out.println(link.attr(&quot;href&quot;));\n        });\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":18691442,"reputation":1,"user_id":13625679,"display_name":"JG-TLS"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":396,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1634075657,"creation_date":1630077989,"question_id":68955955,"body_markdown":"I&#39;m trying to get the links of markets on this webpage [https://data.binance.vision/?prefix=data/spot/monthly/klines/][1]\r\nbut it&#39;s not working. Actually I can get links but only those from the header. I think my problem is to build the target path, examples :\r\n\r\n    Elements tableLinks = doc.select(&quot;#listing a&quot;);\r\n    \r\n    Elements tableElement = doc.getElementsByAttribute(&quot;tbody&quot;);\r\n    \r\n    Elements links = doc.select(&quot;a[href]&quot;);\r\n    \r\n    Elements resultLinks = doc.select(&quot;td &gt; a&quot;);\r\n\r\n\r\n  [1]: https://data.binance.vision/?prefix=data/spot/monthly/klines/","title":"scraping all the links in a webpage","body":"<p>I'm trying to get the links of markets on this webpage <a href=\"https://data.binance.vision/?prefix=data/spot/monthly/klines/\" rel=\"nofollow noreferrer\">https://data.binance.vision/?prefix=data/spot/monthly/klines/</a>\nbut it's not working. Actually I can get links but only those from the header. I think my problem is to build the target path, examples :</p>\n<pre><code>Elements tableLinks = doc.select(&quot;#listing a&quot;);\n\nElements tableElement = doc.getElementsByAttribute(&quot;tbody&quot;);\n\nElements links = doc.select(&quot;a[href]&quot;);\n\nElements resultLinks = doc.select(&quot;td &gt; a&quot;);\n</code></pre>\n"},{"tags":["java","apache-kafka","kafka-consumer-api","aws-msk","amazon-msk"],"comments":[{"owner":{"account_id":19112276,"reputation":777,"user_id":13958041,"display_name":"Rishabh Sharma"},"score":0,"creation_date":1615488870,"post_id":66558641,"comment_id":117713047,"body_markdown":"Is your java process going to run in the same VPC or outside? If outside, do you expect your MSK cluster to be available publicly to all ?","body":"Is your java process going to run in the same VPC or outside? If outside, do you expect your MSK cluster to be available publicly to all ?"},{"owner":{"account_id":20915978,"reputation":13,"user_id":15365638,"display_name":"sd99"},"score":0,"creation_date":1615705012,"post_id":66558641,"comment_id":117770402,"body_markdown":"@RishabhSharma It needs to run from outside (i.e. not from the same VPC). Yes, I want it to be available publicity (i.e. it should be accessed from anywhere if the correct client.properties are passed). For this I guess we need to make the IPs of bootstrap servers publicly accessible, since they are currently private to the VPC.","body":"@RishabhSharma It needs to run from outside (i.e. not from the same VPC). Yes, I want it to be available publicity (i.e. it should be accessed from anywhere if the correct client.properties are passed). For this I guess we need to make the IPs of bootstrap servers publicly accessible, since they are currently private to the VPC."}],"answers":[{"tags":[],"owner":{"account_id":14394013,"reputation":99,"user_id":11605634,"display_name":"Igor Eul&#225;lio"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634075127,"creation_date":1634075127,"answer_id":69547366,"question_id":66558641,"body_markdown":"Since you need to make the MSK Endpoints ips public, you need to improve your authentication process and place the MSK cluster on a public subnet in a VPC that have a Internet Gateway and properly configured route tables:\r\nhttps://docs.aws.amazon.com/vpc/latest/userguide/VPC_Route_Tables.html\r\n\r\nIf you connect this, even being public, in your own VPC, you can use a CLI to retrieve the bootstrap servers from MSK Cluster and inject this as an environment variable using user data in EC2 bootstraping:\r\nhttps://docs.aws.amazon.com/AWSEC2/latest/UserGuide/user-data.html\r\n\r\nA command to retrieve bootstrap servers from MSK Cluster using CLI:\r\n\r\n    aws kafka get-bootstrap-brokers --region us-east-1 --cluster-arn ClusterArn\r\n\r\nMore documentation about MSK cluster configuring:\r\nhttps://docs.aws.amazon.com/msk/latest/developerguide/produce-consume.html","title":"How to consume events form from AWS MSK cluster using KafkaConsumer java SDK?","body":"<p>Since you need to make the MSK Endpoints ips public, you need to improve your authentication process and place the MSK cluster on a public subnet in a VPC that have a Internet Gateway and properly configured route tables:\n<a href=\"https://docs.aws.amazon.com/vpc/latest/userguide/VPC_Route_Tables.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/vpc/latest/userguide/VPC_Route_Tables.html</a></p>\n<p>If you connect this, even being public, in your own VPC, you can use a CLI to retrieve the bootstrap servers from MSK Cluster and inject this as an environment variable using user data in EC2 bootstraping:\n<a href=\"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/user-data.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/user-data.html</a></p>\n<p>A command to retrieve bootstrap servers from MSK Cluster using CLI:</p>\n<pre><code>aws kafka get-bootstrap-brokers --region us-east-1 --cluster-arn ClusterArn\n</code></pre>\n<p>More documentation about MSK cluster configuring:\n<a href=\"https://docs.aws.amazon.com/msk/latest/developerguide/produce-consume.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/msk/latest/developerguide/produce-consume.html</a></p>\n"}],"owner":{"account_id":20915978,"reputation":13,"user_id":15365638,"display_name":"sd99"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1629,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1634075127,"creation_date":1615352425,"question_id":66558641,"body_markdown":"I have created a cluster in AWS MSK and created a topic. I can produce and consume events from the EC2 instance in the same VPC as the cluster. The specific use case is that I want to consume events using Java. The [KafkaClient][1] AWS SDK doesnt have any methods for event consumption, so I cant use it here. I cannot directly pass the bootstrap servers in the Properties() while  creating a [KafkaConsumer][2] as the IPs are internal to the VPC. \r\n\r\nI have gone through this AWS [guide][3] on ways to connect to MSK but not sure which method would be suitable for this exact use case. I have tried out a few ways-\r\n\r\n 1. Setting advertised.listerners to the public IP of the instance.\r\nBut still kept getting this error while listing topics after creating KafkaConsumer-\r\n`Connection to node -1 could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient)` \r\n\r\n 2. Opening relevant ports (9092 for PLAINTEXT in my case) in the security group inbound rules. I was still getting a `Connection refused` error while trying to telnet to port 9092 after doing this.\r\n\r\n\r\nMy question is will any of the above work and I&#39;m just missing something else here which can solve this. Or will the above methods wont work?\r\n\r\n\r\nMy end goal here is to consume events from MSK Cluster using Java.\r\n\r\n\r\n  [1]: https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/services/kafka/KafkaClient.html\r\n  [2]: https://kafka.apache.org/10/javadoc/index.html?org/apache/kafka/clients/consumer/KafkaConsumer.html\r\n  [3]: https://docs.aws.amazon.com/msk/latest/developerguide/client-access.html","title":"How to consume events form from AWS MSK cluster using KafkaConsumer java SDK?","body":"<p>I have created a cluster in AWS MSK and created a topic. I can produce and consume events from the EC2 instance in the same VPC as the cluster. The specific use case is that I want to consume events using Java. The <a href=\"https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/services/kafka/KafkaClient.html\" rel=\"nofollow noreferrer\">KafkaClient</a> AWS SDK doesnt have any methods for event consumption, so I cant use it here. I cannot directly pass the bootstrap servers in the Properties() while  creating a <a href=\"https://kafka.apache.org/10/javadoc/index.html?org/apache/kafka/clients/consumer/KafkaConsumer.html\" rel=\"nofollow noreferrer\">KafkaConsumer</a> as the IPs are internal to the VPC.</p>\n<p>I have gone through this AWS <a href=\"https://docs.aws.amazon.com/msk/latest/developerguide/client-access.html\" rel=\"nofollow noreferrer\">guide</a> on ways to connect to MSK but not sure which method would be suitable for this exact use case. I have tried out a few ways-</p>\n<ol>\n<li><p>Setting advertised.listerners to the public IP of the instance.\nBut still kept getting this error while listing topics after creating KafkaConsumer-\n<code>Connection to node -1 could not be established. Broker may not be available. (org.apache.kafka.clients.NetworkClient)</code></p>\n</li>\n<li><p>Opening relevant ports (9092 for PLAINTEXT in my case) in the security group inbound rules. I was still getting a <code>Connection refused</code> error while trying to telnet to port 9092 after doing this.</p>\n</li>\n</ol>\n<p>My question is will any of the above work and I'm just missing something else here which can solve this. Or will the above methods wont work?</p>\n<p>My end goal here is to consume events from MSK Cluster using Java.</p>\n"},{"tags":["java","jpa","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":11962495,"reputation":151,"user_id":8753168,"accept_rate":0,"display_name":"Luca Pasini"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634074685,"creation_date":1634074685,"answer_id":69547304,"question_id":69547170,"body_markdown":"There are a lot of answers to your question, based on the implementation you would like to achieve.\r\n\r\n- The first way is to remove the @OneToMany relation in Company and the user list. In this way you would only have to manage one side of the relation, and when you need to search for all users in a company you could use a custom query performing a left join on users and companies tables.\r\n\r\n- The second way, keeping both side of the relation, is to implement a method &#39;setCompany&#39; inside the User class like the following:\r\n```java\r\npublic void setCompany(Company c){\r\n    c.addUser(this);\r\n    this.company = c;\r\n}\r\n```\r\n\r\nHowever in my experience, the first solution fits better since less relations will lead to a lot less work to do later on, especially regarding DTO conversion and deletion of elements from the DB.","title":"Automatically persisting reverse relationship in JPA","body":"<p>There are a lot of answers to your question, based on the implementation you would like to achieve.</p>\n<ul>\n<li><p>The first way is to remove the @OneToMany relation in Company and the user list. In this way you would only have to manage one side of the relation, and when you need to search for all users in a company you could use a custom query performing a left join on users and companies tables.</p>\n</li>\n<li><p>The second way, keeping both side of the relation, is to implement a method 'setCompany' inside the User class like the following:</p>\n</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>public void setCompany(Company c){\n    c.addUser(this);\n    this.company = c;\n}\n</code></pre>\n<p>However in my experience, the first solution fits better since less relations will lead to a lot less work to do later on, especially regarding DTO conversion and deletion of elements from the DB.</p>\n"}],"owner":{"account_id":21224028,"reputation":157,"user_id":15610035,"display_name":"Voronin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":428,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1634074685,"creation_date":1634073655,"question_id":69547170,"body_markdown":"I have an entity `User`, that can have exactly one `Company`. I have a `Company`, that can be assigned to multiple `User` objects.\r\n\r\nCurrently if I want to persist a `User`, I need to get the `Company` (as it may exist without any `User` being assigned to it) and assign it. Further more **I have to add the `User` _manually_ to the `Company` using `Company#addUser`**. Afterwards I save run `CompanyRepository.save(company)` (which should suffice to persist the `User`, too, I think, because I am using `cascade = CascadeType.PERSIST`).\r\n\r\n**Is there a way to say, that if I get the `User` and assign a `Company` to it, the &quot;back-reference&quot; is dealt with automatically?** Or do I always have to get the `Company` and use `Company#addUser` to add that reference?\r\n\r\nMy entities look like this *(I omitted more properties and reduced it to the most important properties and methods)*:\r\n\r\n**Company.java**\r\n```java\r\npackage com.portal.user.persistence;\r\n(imports omitted)\r\n\r\n@Data\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Builder (toBuilder = true)\r\n@Entity\r\n@Table (name = &quot;companies&quot;)\r\npublic class Company {\r\n  @Id\r\n  @GeneratedValue (generator = &quot;uuid&quot;)\r\n  @GenericGenerator (name = &quot;uuid&quot;, strategy = &quot;uuid2&quot;)\r\n  @Column (name = &quot;id&quot;)\r\n  private String id;\r\n\r\n  @Column (name = &quot;ucid&quot;)\r\n  private String ucid;\r\n\r\n  @OneToMany (fetch = FetchType.LAZY, mappedBy = &quot;company&quot;, cascade = CascadeType.PERSIST)\r\n  private List&lt;User&gt; users;\r\n\r\n  public void addUser(@NonNull User user) {\r\n    if (users == null) {\r\n      users = new ArrayList&lt;&gt;();\r\n    }\r\n    users.add(user);\r\n  }\r\n\r\n  public void removeUser(@NonNull User user) {\r\n    users.remove(user);\r\n  }\r\n}\r\n```\r\n\r\n**User.java**\r\n```java\r\npackage com.portal.user.persistence;\r\n(imports omitted)\r\n\r\n@Data\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\n@Builder (toBuilder = true)\r\n@Entity\r\n@Table (name = &quot;users&quot;)\r\npublic class User {\r\n\r\n  @Id\r\n  @GeneratedValue (generator = &quot;uuid&quot;)\r\n  @GenericGenerator (name = &quot;uuid&quot;, strategy = &quot;uuid2&quot;)\r\n  @Column (name = &quot;id&quot;)\r\n  private String id;\r\n\r\n  @ManyToOne (cascade = CascadeType.PERSIST)\r\n  private Company company;\r\n}\r\n```","title":"Automatically persisting reverse relationship in JPA","body":"<p>I have an entity <code>User</code>, that can have exactly one <code>Company</code>. I have a <code>Company</code>, that can be assigned to multiple <code>User</code> objects.</p>\n<p>Currently if I want to persist a <code>User</code>, I need to get the <code>Company</code> (as it may exist without any <code>User</code> being assigned to it) and assign it. Further more <strong>I have to add the <code>User</code> <em>manually</em> to the <code>Company</code> using <code>Company#addUser</code></strong>. Afterwards I save run <code>CompanyRepository.save(company)</code> (which should suffice to persist the <code>User</code>, too, I think, because I am using <code>cascade = CascadeType.PERSIST</code>).</p>\n<p><strong>Is there a way to say, that if I get the <code>User</code> and assign a <code>Company</code> to it, the &quot;back-reference&quot; is dealt with automatically?</strong> Or do I always have to get the <code>Company</code> and use <code>Company#addUser</code> to add that reference?</p>\n<p>My entities look like this <em>(I omitted more properties and reduced it to the most important properties and methods)</em>:</p>\n<p><strong>Company.java</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.portal.user.persistence;\n(imports omitted)\n\n@Data\n@AllArgsConstructor\n@NoArgsConstructor\n@Builder (toBuilder = true)\n@Entity\n@Table (name = &quot;companies&quot;)\npublic class Company {\n  @Id\n  @GeneratedValue (generator = &quot;uuid&quot;)\n  @GenericGenerator (name = &quot;uuid&quot;, strategy = &quot;uuid2&quot;)\n  @Column (name = &quot;id&quot;)\n  private String id;\n\n  @Column (name = &quot;ucid&quot;)\n  private String ucid;\n\n  @OneToMany (fetch = FetchType.LAZY, mappedBy = &quot;company&quot;, cascade = CascadeType.PERSIST)\n  private List&lt;User&gt; users;\n\n  public void addUser(@NonNull User user) {\n    if (users == null) {\n      users = new ArrayList&lt;&gt;();\n    }\n    users.add(user);\n  }\n\n  public void removeUser(@NonNull User user) {\n    users.remove(user);\n  }\n}\n</code></pre>\n<p><strong>User.java</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.portal.user.persistence;\n(imports omitted)\n\n@Data\n@AllArgsConstructor\n@NoArgsConstructor\n@Builder (toBuilder = true)\n@Entity\n@Table (name = &quot;users&quot;)\npublic class User {\n\n  @Id\n  @GeneratedValue (generator = &quot;uuid&quot;)\n  @GenericGenerator (name = &quot;uuid&quot;, strategy = &quot;uuid2&quot;)\n  @Column (name = &quot;id&quot;)\n  private String id;\n\n  @ManyToOne (cascade = CascadeType.PERSIST)\n  private Company company;\n}\n</code></pre>\n"},{"tags":["java","unix","jsch"],"comments":[{"owner":{"account_id":5115401,"reputation":179,"user_id":11035088,"display_name":"Vaibhav Bhardwaj"},"score":0,"creation_date":1633704613,"post_id":69473585,"comment_id":122838621,"body_markdown":"Pipe is not working in this case. Pipe won&#39;t work here as after each command, user is asked to provide response as well. How can we provide response using the pipe.","body":"Pipe is not working in this case. Pipe won&#39;t work here as after each command, user is asked to provide response as well. How can we provide response using the pipe."},{"owner":{"account_id":453710,"reputation":192093,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"score":0,"creation_date":1633705727,"post_id":69473585,"comment_id":122839094,"body_markdown":"??? What *each command*? You wrote about one command only... Your command might have subcommands. But technically, there&#39;s no difference between those subcommands and responses to the subcommand prompts. Those all are just lines of input to the main command.","body":"??? What <i>each command</i>? You wrote about one command only... Your command might have subcommands. But technically, there&#39;s no difference between those subcommands and responses to the subcommand prompts. Those all are just lines of input to the main command."},{"owner":{"account_id":5115401,"reputation":179,"user_id":11035088,"display_name":"Vaibhav Bhardwaj"},"score":0,"creation_date":1634049490,"post_id":69473585,"comment_id":122918915,"body_markdown":"Actually there is only one command &#39;copy ftp: flash:&#39; and then there are subsequent responses from user when user press enter after the command &#39;&#39;copy ftp: flash:&#39;&#39;. Now I have to write whole thing, either in single line (which should contain all responses) or some kind of shell script which has pre-determined responses for the command.","body":"Actually there is only one command &#39;copy ftp: flash:&#39; and then there are subsequent responses from user when user press enter after the command &#39;&#39;copy ftp: flash:&#39;&#39;. Now I have to write whole thing, either in single line (which should contain all responses) or some kind of shell script which has pre-determined responses for the command."},{"owner":{"account_id":453710,"reputation":192093,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"score":0,"creation_date":1634053267,"post_id":69473585,"comment_id":122920597,"body_markdown":"Did you read this? *&quot;technically, there&#39;s no difference between those subcommands and responses to the subcommand prompts. **Those all are just lines of input to the main command.**&quot;*","body":"Did you read this? <i>&quot;technically, there&#39;s no difference between those subcommands and responses to the subcommand prompts. <b>Those all are just lines of input to the main command.</b>&quot;</i>"},{"owner":{"account_id":5115401,"reputation":179,"user_id":11035088,"display_name":"Vaibhav Bhardwaj"},"score":0,"creation_date":1634073265,"post_id":69473585,"comment_id":122927316,"body_markdown":"@Martin Prikryl : I understand sir what are you saying. As per you, those are lines of input to the main command. Is it possible to write main command and sub-commands in a single line ? Can you please help me in writing that single line ?","body":"@Martin Prikryl : I understand sir what are you saying. As per you, those are lines of input to the main command. Is it possible to write main command and sub-commands in a single line ? Can you please help me in writing that single line ?"},{"owner":{"account_id":453710,"reputation":192093,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"score":0,"creation_date":1634103645,"post_id":69473585,"comment_id":122932914,"body_markdown":"Did you see the answer by @codeforester in the duplicate question?","body":"Did you see the answer by @codeforester in the duplicate question?"}],"owner":{"account_id":5115401,"reputation":179,"user_id":11035088,"display_name":"Vaibhav Bhardwaj"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1634017858,"answer_count":0,"score":0,"last_activity_date":1634074099,"creation_date":1633561318,"question_id":69473585,"body_markdown":"I am executing a unix command which basically requires response/input from user after pressing ENTER on the first command (copy ftp: flash:). See my commands below.\r\n\r\n    copy ftp: flash:\r\n    Address or name of remote host []? **xx.yy.zz.sa**\r\n    Source filename []? **sourceFile.bin**\r\n    Destination filename [sourceFile.bin]? **dest.bin**\r\n    Accessing ftp://xx.yy.zz.sa/sourceFile.bin...\r\n\r\nNow my ask is that I want to execute above set of command (&amp; sub-commands) in a single line (which should include all responses by user) as I will be using this single line command in my Java program. Any pointers for this ?\r\n","title":"How to write a Unix command with various input in a single line","body":"<p>I am executing a unix command which basically requires response/input from user after pressing ENTER on the first command (copy ftp: flash:). See my commands below.</p>\n<pre><code>copy ftp: flash:\nAddress or name of remote host []? **xx.yy.zz.sa**\nSource filename []? **sourceFile.bin**\nDestination filename [sourceFile.bin]? **dest.bin**\nAccessing ftp://xx.yy.zz.sa/sourceFile.bin...\n</code></pre>\n<p>Now my ask is that I want to execute above set of command (&amp; sub-commands) in a single line (which should include all responses by user) as I will be using this single line command in my Java program. Any pointers for this ?</p>\n"},{"tags":["java","reactjs","spring-boot","jpa","querydsl"],"comments":[{"owner":{"account_id":2408521,"reputation":3734,"user_id":2104280,"accept_rate":78,"display_name":"Jan-Willem Gmelig Meyling"},"score":1,"creation_date":1634111197,"post_id":69547199,"comment_id":122935189,"body_markdown":"Apparently, `memberDto.getId()` is `null`, which is not allowed.","body":"Apparently, <code>memberDto.getId()</code> is <code>null</code>, which is not allowed."},{"owner":{"account_id":4289184,"reputation":9183,"user_id":3506000,"accept_rate":88,"display_name":"Robert Bain"},"score":0,"creation_date":1634159254,"post_id":69547199,"comment_id":122954196,"body_markdown":"Have you dropped a breakpoint into your controller method and inspected `memberDto`? My guess is that&#39;s going to be `null` and the issue is between the REST call from the front end and the deserialization.","body":"Have you dropped a breakpoint into your controller method and inspected <code>memberDto</code>? My guess is that&#39;s going to be <code>null</code> and the issue is between the REST call from the front end and the deserialization."}],"owner":{"account_id":20018055,"reputation":86,"user_id":14673587,"display_name":"JB P"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3446,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1634073844,"creation_date":1634073844,"question_id":69547199,"body_markdown":"This is Controller Code\r\n```JAVA\r\n    @PutMapping\r\n    @PreAuthorize(&quot;hasRole(&#39;USER&#39;)&quot;)\r\n    @RequestMapping(&quot;/update&quot;)\r\n    public ResponseEntity&lt;?&gt; userUpdate(MemberDto memberDto){\r\n        memberService.userUpdate(memberDto);\r\n        return new ResponseEntity&lt;&gt;(&quot;ok&quot;, HttpStatus.OK);\r\n    }\r\n```\r\nThis is my Member Class code\r\n```\r\n@Entity\r\n@Getter\r\n@Setter\r\n@Table(name = &quot;member&quot;)\r\n@Builder\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\npublic class Member {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    @Column(name = &quot;name&quot;)\r\n    private String name;\r\n\r\n    private String email;\r\n\r\n    private String password;\r\n\r\n    private String providerId;\r\n\r\n    @Enumerated(EnumType.STRING)\r\n    private MemberRole role;\r\n\r\n    @Enumerated(EnumType.STRING)\r\n    private AuthProvider authProvider;\r\n\r\n    private String imageUrl;\r\n\r\n    //\r\n\r\n    private String phoneNumber;\r\n\r\n    @CreationTimestamp\r\n    private LocalDateTime createTime;\r\n\r\n    @UpdateTimestamp\r\n    private LocalDateTime updateTime;\r\n\r\n\r\n   \r\n    @JsonIgnore\r\n    @OneToMany(mappedBy = &quot;member&quot;)\r\n    private List&lt;Post&gt; posts = new ArrayList&lt;&gt;();\r\n\r\n    @JsonIgnore\r\n    @OneToMany(mappedBy = &quot;member&quot;)\r\n    private List&lt;Save&gt; save = new ArrayList&lt;&gt;();\r\n\r\n//    @JsonIgnore\r\n//    @OneToMany(mappedBy = &quot;member&quot;)\r\n//    private List&lt;Follow&gt; follow = new ArrayList&lt;&gt;();\r\n\r\n    @JsonIgnore\r\n    @OneToMany(mappedBy = &quot;member&quot;)\r\n    private List&lt;Image&gt; image = new ArrayList&lt;&gt;();\r\n\r\n}\r\n\r\n```\r\n\r\n\r\nThis is DTO code\r\n```\r\n@Data\r\n@NoArgsConstructor\r\npublic class MemberDto {\r\n\r\n    private Long id;\r\n\r\n    private String email;\r\n\r\n    private String password;\r\n\r\n    private String name;\r\n\r\n    private String phoneNumber;\r\n\r\n    @QueryProjection\r\n    public MemberDto(Long id, String email, String password, String name, String phoneNumber){\r\n        this.id = id;\r\n        this.email = email;\r\n        this.password=password;\r\n        this.name = name;\r\n        this.phoneNumber = phoneNumber;\r\n    }\r\n}\r\n```\r\nThis is Service Code\r\n```\r\n@RequiredArgsConstructor\r\n@Service\r\npublic class MemberService {\r\n\r\n    @Autowired\r\n    private MemberRepository memberRepository;\r\n\r\n    public void userUpdate(MemberDto updateValue)  {\r\n        memberRepository.updateMember(updateValue);\r\n    }\r\n}\r\n```\r\n\r\nThis is Repository(impl) code\r\n```\r\n\r\n@RequiredArgsConstructor\r\npublic class MemberRepositoryImpl implements MemberRepositoryCustom {\r\n\r\n    private final EntityManager em;\r\n    private final JPAQueryFactory queryFactory;\r\n\r\n    @Override\r\n    public void updateMember(MemberDto memberDto){\r\n       QMember qMember = QMember.member;\r\n        queryFactory.update(qMember)\r\n                .where(qMember.id.eq(memberDto.getId()))\r\n                .set(qMember.email, memberDto.getEmail())\r\n                .set(qMember.password, memberDto.getPassword())\r\n                .set(qMember.name, memberDto.getName())\r\n                .set(qMember.phoneNumber, memberDto.getPhoneNumber())\r\n                .execute();\r\n    }\r\n}\r\n```\r\nAnd This is my frontend (react)code send as json\r\n```\r\n{id: 7, name: &#39;111&#39;, email: &#39;111@111.com1&#39;, password: &#39;12313&#39;, phonenumber: &#39;123123&#39;}\r\nemail: &quot;111@111.com1&quot;\r\nid: 7\r\nname: &quot;111&quot;\r\npassword: &quot;12313&quot;\r\nphonenumber: &quot;123123&quot;\r\n```\r\n\r\nI try to update myDB use member ID As you can see use querydsl with \r\n```\r\n.where(qMember.id.eq(memberDto.getId()))\r\n```\r\nThis code in Repository class\r\n\r\nso I expecte nativequery like \r\n\r\nemail: &quot;111@111.com1&quot;\r\nid: 7\r\nname: &quot;111&quot;\r\npassword: &quot;12313&quot;\r\nphonenumber: &quot;123123&quot;\r\n\r\n```\r\nupdate member(tablename) set name = 111, password = 123123, ..... where id = 7\r\n```\r\nBut querydsl throw Error\r\n```\r\njava.lang.IllegalArgumentException: eq(null) is not allowed. Use isNull() instead\r\n```\r\nI Think my code is something wrong but I can&#39;t find it.\r\n\r\nAnd also chrome console throw error\r\n```\r\nerror: &quot;Internal Server Error&quot;\r\npath: &quot;/user/update&quot;\r\nstatus: 500\r\ntimestamp: &quot;2021-10-12T21:04:00.658+00:00&quot;\r\n```\r\nInternal server error so I confident that my backend Code is wrong\r\n\r\nplease help me","title":"QueryDsl Error eq(null) is not allowed. Use isNull(instead)","body":"<p>This is Controller Code</p>\n<pre><code>    @PutMapping\n    @PreAuthorize(&quot;hasRole('USER')&quot;)\n    @RequestMapping(&quot;/update&quot;)\n    public ResponseEntity&lt;?&gt; userUpdate(MemberDto memberDto){\n        memberService.userUpdate(memberDto);\n        return new ResponseEntity&lt;&gt;(&quot;ok&quot;, HttpStatus.OK);\n    }\n</code></pre>\n<p>This is my Member Class code</p>\n<pre><code>@Entity\n@Getter\n@Setter\n@Table(name = &quot;member&quot;)\n@Builder\n@AllArgsConstructor\n@NoArgsConstructor\npublic class Member {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(name = &quot;name&quot;)\n    private String name;\n\n    private String email;\n\n    private String password;\n\n    private String providerId;\n\n    @Enumerated(EnumType.STRING)\n    private MemberRole role;\n\n    @Enumerated(EnumType.STRING)\n    private AuthProvider authProvider;\n\n    private String imageUrl;\n\n    //\n\n    private String phoneNumber;\n\n    @CreationTimestamp\n    private LocalDateTime createTime;\n\n    @UpdateTimestamp\n    private LocalDateTime updateTime;\n\n\n   \n    @JsonIgnore\n    @OneToMany(mappedBy = &quot;member&quot;)\n    private List&lt;Post&gt; posts = new ArrayList&lt;&gt;();\n\n    @JsonIgnore\n    @OneToMany(mappedBy = &quot;member&quot;)\n    private List&lt;Save&gt; save = new ArrayList&lt;&gt;();\n\n//    @JsonIgnore\n//    @OneToMany(mappedBy = &quot;member&quot;)\n//    private List&lt;Follow&gt; follow = new ArrayList&lt;&gt;();\n\n    @JsonIgnore\n    @OneToMany(mappedBy = &quot;member&quot;)\n    private List&lt;Image&gt; image = new ArrayList&lt;&gt;();\n\n}\n\n</code></pre>\n<p>This is DTO code</p>\n<pre><code>@Data\n@NoArgsConstructor\npublic class MemberDto {\n\n    private Long id;\n\n    private String email;\n\n    private String password;\n\n    private String name;\n\n    private String phoneNumber;\n\n    @QueryProjection\n    public MemberDto(Long id, String email, String password, String name, String phoneNumber){\n        this.id = id;\n        this.email = email;\n        this.password=password;\n        this.name = name;\n        this.phoneNumber = phoneNumber;\n    }\n}\n</code></pre>\n<p>This is Service Code</p>\n<pre><code>@RequiredArgsConstructor\n@Service\npublic class MemberService {\n\n    @Autowired\n    private MemberRepository memberRepository;\n\n    public void userUpdate(MemberDto updateValue)  {\n        memberRepository.updateMember(updateValue);\n    }\n}\n</code></pre>\n<p>This is Repository(impl) code</p>\n<pre><code>\n@RequiredArgsConstructor\npublic class MemberRepositoryImpl implements MemberRepositoryCustom {\n\n    private final EntityManager em;\n    private final JPAQueryFactory queryFactory;\n\n    @Override\n    public void updateMember(MemberDto memberDto){\n       QMember qMember = QMember.member;\n        queryFactory.update(qMember)\n                .where(qMember.id.eq(memberDto.getId()))\n                .set(qMember.email, memberDto.getEmail())\n                .set(qMember.password, memberDto.getPassword())\n                .set(qMember.name, memberDto.getName())\n                .set(qMember.phoneNumber, memberDto.getPhoneNumber())\n                .execute();\n    }\n}\n</code></pre>\n<p>And This is my frontend (react)code send as json</p>\n<pre><code>{id: 7, name: '111', email: '111@111.com1', password: '12313', phonenumber: '123123'}\nemail: &quot;111@111.com1&quot;\nid: 7\nname: &quot;111&quot;\npassword: &quot;12313&quot;\nphonenumber: &quot;123123&quot;\n</code></pre>\n<p>I try to update myDB use member ID As you can see use querydsl with</p>\n<pre><code>.where(qMember.id.eq(memberDto.getId()))\n</code></pre>\n<p>This code in Repository class</p>\n<p>so I expecte nativequery like</p>\n<p>email: &quot;111@111.com1&quot;\nid: 7\nname: &quot;111&quot;\npassword: &quot;12313&quot;\nphonenumber: &quot;123123&quot;</p>\n<pre><code>update member(tablename) set name = 111, password = 123123, ..... where id = 7\n</code></pre>\n<p>But querydsl throw Error</p>\n<pre><code>java.lang.IllegalArgumentException: eq(null) is not allowed. Use isNull() instead\n</code></pre>\n<p>I Think my code is something wrong but I can't find it.</p>\n<p>And also chrome console throw error</p>\n<pre><code>error: &quot;Internal Server Error&quot;\npath: &quot;/user/update&quot;\nstatus: 500\ntimestamp: &quot;2021-10-12T21:04:00.658+00:00&quot;\n</code></pre>\n<p>Internal server error so I confident that my backend Code is wrong</p>\n<p>please help me</p>\n"},{"tags":["java","swing"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1634068811,"post_id":69546338,"comment_id":122926090,"body_markdown":"You can&#39;t keep creating a new instance of your Names class. That instance will NOT be visible on the frame. You need to create an instance of the Names class when you create the frame and add the panel to the frame at that time. Then your ActionListener needs to reference that class.","body":"You can&#39;t keep creating a new instance of your Names class. That instance will NOT be visible on the frame. You need to create an instance of the Names class when you create the frame and add the panel to the frame at that time. Then your ActionListener needs to reference that class."},{"owner":{"account_id":19538779,"reputation":1,"user_id":14297004,"display_name":"amma velakin"},"score":0,"creation_date":1634069098,"post_id":69546338,"comment_id":122926169,"body_markdown":"Thank you , can you please provide an example ?","body":"Thank you , can you please provide an example ?"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1634070071,"post_id":69546338,"comment_id":122926446,"body_markdown":"You already know how to create your JButton with a variable name add add it to the tab. You do the same with the Names class. You create an instance with a variable name and then add it to the tab. Then in the ActionListener you reference the Names variable and invoke the getName() method. Give it a try and post your updated code if you still have problems.","body":"You already know how to create your JButton with a variable name add add it to the tab. You do the same with the Names class. You create an instance with a variable name and then add it to the tab. Then in the ActionListener you reference the Names variable and invoke the getName() method. Give it a try and post your updated code if you still have problems."},{"owner":{"account_id":19538779,"reputation":1,"user_id":14297004,"display_name":"amma velakin"},"score":0,"creation_date":1634070499,"post_id":69546338,"comment_id":122926562,"body_markdown":"I&#39;ve updated my code, can you please look again ? It is not working still. Thank you so much.","body":"I&#39;ve updated my code, can you please look again ? It is not working still. Thank you so much."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1634090177,"post_id":69546338,"comment_id":122930617,"body_markdown":"I specifically stated: *...You create an instance with a variable name and then add it to the tab.* - Why are you using: `tabbedPane.addTab(&quot;name&quot;, new Names());`? Why are you creating a second instance? You created a button variable and added it to a panel. It is no difference with the Names variable. You create the instance and then add the instance to the tab.","body":"I specifically stated: <i>...You create an instance with a variable name and then add it to the tab.</i> - Why are you using: <code>tabbedPane.addTab(&quot;name&quot;, new Names());</code>? Why are you creating a second instance? You created a button variable and added it to a panel. It is no difference with the Names variable. You create the instance and then add the instance to the tab."}],"answers":[{"tags":[],"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634073835,"creation_date":1634073835,"answer_id":69547198,"question_id":69546338,"body_markdown":"Just take a second and have a look at the following...\r\n\r\n    n = new Names();\r\n    //...\r\n    btn.addActionListener(e-&gt;JOptionPane.showMessageDialog(null, n.getName()));\r\n    //...\r\n    tabbedPane.addTab(&quot;name&quot;, new Names());\r\n\r\nWhat do you think is going to happen here?\r\n\r\nThe instance of `Names` which the button is interacting with is NOT the instance of `Names` that the user is interacting with\r\n\r\nChange it to...\r\n\r\n    n = new Names();\r\n    //...\r\n    btn.addActionListener(e-&gt;JOptionPane.showMessageDialog(null, n.getName()));\r\n    //...\r\n    tabbedPane.addTab(&quot;name&quot;, n);\r\n\r\n\r\nOn a side note, this...\r\n\r\n    tf.setPreferredSize(new Dimension(150,30));\r\n\r\n\r\nis a really bad idea and will come back to haunt you.  Instead make use of the `setColumns` method (or constructor) to set the number of displayed characters the text field should attempt to display","title":"can&#39;t getting updated text of JTextField","body":"<p>Just take a second and have a look at the following...</p>\n<pre><code>n = new Names();\n//...\nbtn.addActionListener(e-&gt;JOptionPane.showMessageDialog(null, n.getName()));\n//...\ntabbedPane.addTab(&quot;name&quot;, new Names());\n</code></pre>\n<p>What do you think is going to happen here?</p>\n<p>The instance of <code>Names</code> which the button is interacting with is NOT the instance of <code>Names</code> that the user is interacting with</p>\n<p>Change it to...</p>\n<pre><code>n = new Names();\n//...\nbtn.addActionListener(e-&gt;JOptionPane.showMessageDialog(null, n.getName()));\n//...\ntabbedPane.addTab(&quot;name&quot;, n);\n</code></pre>\n<p>On a side note, this...</p>\n<pre><code>tf.setPreferredSize(new Dimension(150,30));\n</code></pre>\n<p>is a really bad idea and will come back to haunt you.  Instead make use of the <code>setColumns</code> method (or constructor) to set the number of displayed characters the text field should attempt to display</p>\n"}],"owner":{"account_id":19538779,"reputation":1,"user_id":14297004,"display_name":"amma velakin"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1634073835,"creation_date":1634068661,"question_id":69546338,"body_markdown":"i can&#39;t getting updated text of JTextField from other class.\r\n\r\nchange text of JTextField ( from Names ) and go to Main tabbedPane and click button. updated text not appears on JOptionPane.\r\n\r\n\r\nthis is Frame.java\r\n\r\n```\r\nimport java.awt.event.ActionEvent;\r\n\r\npublic class Frame {\r\n\t\r\n\tJFrame frame;\r\n\tJPanel pnl;\r\n\tJButton btn;\r\n\tJTabbedPane tabbedPane;\r\n\tNames n;\r\n\t\r\n\tpublic static void main(String[] args) {\r\n\t\tFrame x = new Frame();\r\n\t}\r\n\t\r\n\tpublic Frame() {\r\n\t\tSwingUtilities.invokeLater(()-&gt;Window());\r\n\t}\r\n\r\n\tpublic void Window() {\r\n\t\tn = new Names();\r\n\t\tframe = new JFrame();\r\n\t\ttabbedPane = new JTabbedPane();\r\n\t\tpnl = new JPanel();\r\n\t\tbtn = new JButton(&quot;get Name&quot;);\r\n\t\tbtn.addActionListener(e-&gt;JOptionPane.showMessageDialog(null, n.getName()));\r\n\t\tpnl.add(btn);\r\n\t\ttabbedPane.addTab(&quot;main&quot;, pnl);\r\n\t\ttabbedPane.addTab(&quot;name&quot;, new Names());\r\n\t\tframe.add(tabbedPane);\r\n\t\tframe.setBounds(360, 130, 900, 550);\r\n\t\tframe.setDefaultCloseOperation(frame.EXIT_ON_CLOSE);\r\n\t\tframe.setVisible(true);\r\n\t}\r\n\t\r\n\t\r\n}\r\n```\r\n\r\nthis one is Names.java\r\n```\r\nimport java.awt.Dimension;\r\n\r\nimport javax.swing.JPanel;\r\nimport javax.swing.JTextField;\r\n\r\npublic class Names extends JPanel {\r\n\t\r\n\tJTextField tf;\r\n\tpublic Names() {\r\n\t\ttf = new JTextField(&quot;test&quot;);\r\n\t\ttf.setPreferredSize(new Dimension(150,30));\r\n\t\tthis.add(tf);\r\n\t}\r\n\r\n\tpublic String getName() {\r\n\t\treturn tf.getText();\r\n\t}\r\n\t\r\n}\r\n```\r\n\r\nthanks for efforts.","title":"can&#39;t getting updated text of JTextField","body":"<p>i can't getting updated text of JTextField from other class.</p>\n<p>change text of JTextField ( from Names ) and go to Main tabbedPane and click button. updated text not appears on JOptionPane.</p>\n<p>this is Frame.java</p>\n<pre><code>import java.awt.event.ActionEvent;\n\npublic class Frame {\n    \n    JFrame frame;\n    JPanel pnl;\n    JButton btn;\n    JTabbedPane tabbedPane;\n    Names n;\n    \n    public static void main(String[] args) {\n        Frame x = new Frame();\n    }\n    \n    public Frame() {\n        SwingUtilities.invokeLater(()-&gt;Window());\n    }\n\n    public void Window() {\n        n = new Names();\n        frame = new JFrame();\n        tabbedPane = new JTabbedPane();\n        pnl = new JPanel();\n        btn = new JButton(&quot;get Name&quot;);\n        btn.addActionListener(e-&gt;JOptionPane.showMessageDialog(null, n.getName()));\n        pnl.add(btn);\n        tabbedPane.addTab(&quot;main&quot;, pnl);\n        tabbedPane.addTab(&quot;name&quot;, new Names());\n        frame.add(tabbedPane);\n        frame.setBounds(360, 130, 900, 550);\n        frame.setDefaultCloseOperation(frame.EXIT_ON_CLOSE);\n        frame.setVisible(true);\n    }\n    \n    \n}\n</code></pre>\n<p>this one is Names.java</p>\n<pre><code>import java.awt.Dimension;\n\nimport javax.swing.JPanel;\nimport javax.swing.JTextField;\n\npublic class Names extends JPanel {\n    \n    JTextField tf;\n    public Names() {\n        tf = new JTextField(&quot;test&quot;);\n        tf.setPreferredSize(new Dimension(150,30));\n        this.add(tf);\n    }\n\n    public String getName() {\n        return tf.getText();\n    }\n    \n}\n</code></pre>\n<p>thanks for efforts.</p>\n"},{"tags":["java-8","java"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1475847082,"post_id":39907925,"comment_id":67120832,"body_markdown":"My actual question would be, why `ChronoUnit.DAYS` is supported. Thats inconsistent","body":"My actual question would be, why <code>ChronoUnit.DAYS</code> is supported. Thats inconsistent"},{"owner":{"account_id":20681,"reputation":1498,"user_id":49678,"accept_rate":77,"display_name":"alexandroid"},"score":2,"creation_date":1475852113,"post_id":39907925,"comment_id":67124055,"body_markdown":"Inconsistent with what? My expectation was that if a method takes a Temporal unit (Period) then it knows what to do with it, so it was surprising when it failed.","body":"Inconsistent with what? My expectation was that if a method takes a Temporal unit (Period) then it knows what to do with it, so it was surprising when it failed."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":3,"creation_date":1475854875,"post_id":39907925,"comment_id":67125816,"body_markdown":"The length of days is not constant, when measuring using exact units of higher precision, i.e. seconds, microseconds or even nanoseconds. As soon as you start supporting days, assuming them to be exactly 86400 seconds, you are giving up the actual meaning of, e.g. seconds, microseconds and nanoseconds, as well as the units that are build as unambiguous multiples of seconds, i.e. minutes and hours. So its strange to have a class supporting nanos, micros, millis, seconds, minutes, hours, *and days* where the support for days turns all former into pseudo units.","body":"The length of days is not constant, when measuring using exact units of higher precision, i.e. seconds, microseconds or even nanoseconds. As soon as you start supporting days, assuming them to be exactly 86400 seconds, you are giving up the actual meaning of, e.g. seconds, microseconds and nanoseconds, as well as the units that are build as unambiguous multiples of seconds, i.e. minutes and hours. So its strange to have a class supporting nanos, micros, millis, seconds, minutes, hours, <i>and days</i> where the support for days turns all former into pseudo units."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":0,"creation_date":1475855128,"post_id":39907925,"comment_id":67125969,"body_markdown":"The documentation of [`Instant.minus`](https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html#minus-long-java.time.temporal.TemporalUnit-) directs to [`Instant.plus`](https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html#plus-long-java.time.temporal.TemporalUnit-) which lists all supported units, further, the method [`Instant.isSupported(TemporalUnit)`](https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html#isSupported-java.time.temporal.TemporalUnit-) can be queried in advance and its documentation lists the supported `ChronoUnit`s.","body":"The documentation of <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html#minus-long-java.time.temporal.TemporalUnit-\" rel=\"nofollow noreferrer\"><code>Instant.minus</code></a> directs to <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html#plus-long-java.time.temporal.TemporalUnit-\" rel=\"nofollow noreferrer\"><code>Instant.plus</code></a> which lists all supported units, further, the method <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html#isSupported-java.time.temporal.TemporalUnit-\" rel=\"nofollow noreferrer\"><code>Instant.isSupported(TemporalUnit)</code></a> can be queried in advance and its documentation lists the supported <code>ChronoUnit</code>s."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":0,"creation_date":1475855682,"post_id":39907925,"comment_id":67126297,"body_markdown":"Of course, the `Instant` would support any `TemporalUnit` whose `addTo` method does the job, so you could implement an alternative `YEAR` unit performing the work, though this raises the question why to pass the request through `instant.minus(, YourYearUnit)` instead of invoking `addTo(instant, -)` on your custom unit directly","body":"Of course, the <code>Instant</code> would support any <code>TemporalUnit</code> whose <code>addTo</code> method does the job, so you could implement an alternative <code>YEAR</code> unit performing the work, though this raises the question why to pass the request through <code>instant.minus(, YourYearUnit)</code> instead of invoking <code>addTo(instant, -)</code> on your custom unit directly"},{"owner":{"account_id":3658624,"reputation":4692,"user_id":3049015,"accept_rate":82,"display_name":"Dominic"},"score":4,"creation_date":1520931659,"post_id":39907925,"comment_id":85507252,"body_markdown":"Interesting that there is no answer to this question yet. I am sure there must be a reason, but I am unable to find an explanation anywhere. Only advice on what to use instead...","body":"Interesting that there is no answer to this question yet. I am sure there must be a reason, but I am unable to find an explanation anywhere. Only advice on what to use instead..."},{"owner":{"account_id":2492685,"reputation":9148,"user_id":2169853,"accept_rate":65,"display_name":"Jens"},"score":0,"creation_date":1520937439,"post_id":39907925,"comment_id":85511091,"body_markdown":"@matt The same is true for minutes and hours since a minute can have 60, 59 or 61 seconds.","body":"@matt The same is true for minutes and hours since a minute can have 60, 59 or 61 seconds."},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1520937446,"post_id":39907925,"comment_id":85511098,"body_markdown":"@Holger in the docs for instant. `The Java Time-Scale divides each calendar day into exactly 86400 subdivisions, known as seconds. These seconds may differ from the SI second. It closely matches the de facto international civil time scale, the definition of which changes from time to time. `","body":"@Holger in the docs for instant. <code>The Java Time-Scale divides each calendar day into exactly 86400 subdivisions, known as seconds. These seconds may differ from the SI second. It closely matches the de facto international civil time scale, the definition of which changes from time to time. </code>"},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1520937579,"post_id":39907925,"comment_id":85511180,"body_markdown":"@jens I hadn&#39;t heard that, and if you read the javadoc for Instant they don&#39;t mention that possibility. They do however mention that days are not always 86400 seconds, but *java* defines a day as being 86400 &#39;seconds&#39;","body":"@jens I hadn&#39;t heard that, and if you read the javadoc for Instant they don&#39;t mention that possibility. They do however mention that days are not always 86400 seconds, but <i>java</i> defines a day as being 86400 &#39;seconds&#39;"},{"owner":{"account_id":2492685,"reputation":9148,"user_id":2169853,"accept_rate":65,"display_name":"Jens"},"score":0,"creation_date":1520937957,"post_id":39907925,"comment_id":85511399,"body_markdown":"@matt Oh, I didn&#39;t know that. I assumed (and I think I read it quite often) that `Instant` is UTC and thus assumed that it uses leap seconds. Thanks for pointing that out. The doc also says that if there is a day with a leap second, it will be spread equally over the seconds of the day, keeping the number of seconds per day of 86400.","body":"@matt Oh, I didn&#39;t know that. I assumed (and I think I read it quite often) that <code>Instant</code> is UTC and thus assumed that it uses leap seconds. Thanks for pointing that out. The doc also says that if there is a day with a leap second, it will be spread equally over the seconds of the day, keeping the number of seconds per day of 86400."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":0,"creation_date":1520942279,"post_id":39907925,"comment_id":85514113,"body_markdown":"@matt thats exactly what I said, *As soon as you start supporting days, assuming them to be exactly 86400 seconds, you are giving up the actual meaning of, e.g. seconds, *.","body":"@matt thats exactly what I said, <i>As soon as you start supporting days, assuming them to be exactly 86400 seconds, you are giving up the actual meaning of, e.g. seconds, </i>."},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1520942973,"post_id":39907925,"comment_id":85514565,"body_markdown":"@Holger I was just pointing out the docs explicitly say it. You seemed to say it as though there was some debate to how java was handling it.","body":"@Holger I was just pointing out the docs explicitly say it. You seemed to say it as though there was some debate to how java was handling it."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":0,"creation_date":1520943045,"post_id":39907925,"comment_id":85514620,"body_markdown":"@matt I clearly said, my question would be *why* not how","body":"@matt I clearly said, my question would be <i>why</i> not how"},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1520945921,"post_id":39907925,"comment_id":85516616,"body_markdown":"@Holger You didn&#39;t clearly distinguish this. Further, what is your point? I added some information by pointing out what you are claiming is in the javadoc. Right now you are either arguing for the sake of arguing, or you are trying to prove something relevant. I suspect it is the forming but maybe I am just missing the point.","body":"@Holger You didn&#39;t clearly distinguish this. Further, what is your point? I added some information by pointing out what you are claiming is in the javadoc. Right now you are either arguing for the sake of arguing, or you are trying to prove something relevant. I suspect it is the forming but maybe I am just missing the point."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":0,"creation_date":1520950164,"post_id":39907925,"comment_id":85519707,"body_markdown":"@matt my point has been stated [right in first comment](https://stackoverflow.com/questions/39907925/why-instant-does-not-support-operations-with-chronounit-years?noredirect=1#comment67120832_39907925), more than a year ago. I didnt want to discuss this further, at least not with someone who cant answer that question. Im not arguing for the sake of arguing; it was you who used `@Holger` to tell me nothing new. We know what has been decided, but the question was *why*.","body":"@matt my point has been stated <a href=\"https://stackoverflow.com/questions/39907925/why-instant-does-not-support-operations-with-chronounit-years?noredirect=1#comment67120832_39907925\">right in first comment</a>, more than a year ago. I didnt want to discuss this further, at least not with someone who cant answer that question. Im not arguing for the sake of arguing; it was you who used <code>@Holger</code> to tell me nothing new. We know what has been decided, but the question was <i>why</i>."},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1520950730,"post_id":39907925,"comment_id":85520140,"body_markdown":"@Holger I was adding to your second comment, because the way you had made that comment using &quot;As soon as you...&quot; made it sound as though you were speculating about there choice. It didn&#39;t come across that you were describing what was in the javadoc. Sorry to have disturbed you.","body":"@Holger I was adding to your second comment, because the way you had made that comment using &quot;As soon as you...&quot; made it sound as though you were speculating about there choice. It didn&#39;t come across that you were describing what was in the javadoc. Sorry to have disturbed you."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":0,"creation_date":1520951587,"post_id":39907925,"comment_id":85520761,"body_markdown":"@matt that phrase was used to indicate that this will happen always when making such a design decision, regardless of which way you go. As modelling a day with a fixed number of seconds is not compatible with real seconds. Granted, that could be misinterpreted.","body":"@matt that phrase was used to indicate that this will happen always when making such a design decision, regardless of which way you go. As modelling a day with a fixed number of seconds is not compatible with real seconds. Granted, that could be misinterpreted."},{"owner":{"account_id":60494,"reputation":34013,"user_id":180659,"accept_rate":54,"display_name":"jarnbjo"},"score":0,"creation_date":1521242170,"post_id":39907925,"comment_id":85663529,"body_markdown":"The answer to this question is most likely as already pointed out: `Instant` is according to the documentation an implementation of the &#39;Java time-scale&#39; and in that system. a day is the longest temporal unit defined (always as exactly 86.400 seconds). So the real question is most likely rather: Why was the &#39;Java time-scale&#39; defined in such an arbitrary way with an obviously *very* incorrect definition of a day.","body":"The answer to this question is most likely as already pointed out: <code>Instant</code> is according to the documentation an implementation of the &#39;Java time-scale&#39; and in that system. a day is the longest temporal unit defined (always as exactly 86.400 seconds). So the real question is most likely rather: Why was the &#39;Java time-scale&#39; defined in such an arbitrary way with an obviously <i>very</i> incorrect definition of a day."},{"owner":{"account_id":60494,"reputation":34013,"user_id":180659,"accept_rate":54,"display_name":"jarnbjo"},"score":0,"creation_date":1521242402,"post_id":39907925,"comment_id":85663596,"body_markdown":"The often mentioned leap second is a rather theoretical problem, since it is not supported anyway on any commonly used systems, but in all countries using DST, there are two days each year with 23 and 25 hours. Adding a Java day to 2018-03-24 12:00 in central Europe will result in 2018-03-25 13:00, which is most definitely not what most developers or users would expect.","body":"The often mentioned leap second is a rather theoretical problem, since it is not supported anyway on any commonly used systems, but in all countries using DST, there are two days each year with 23 and 25 hours. Adding a Java day to 2018-03-24 12:00 in central Europe will result in 2018-03-25 13:00, which is most definitely not what most developers or users would expect."},{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":1,"creation_date":1521447115,"post_id":39907925,"comment_id":85716527,"body_markdown":"_&quot;I clearly said, my question would be why&quot;_ - The developers made a choice. Unless you can get an answer from the developers, the question is &quot;opinion-based&quot;, no?","body":"<i>&quot;I clearly said, my question would be why&quot;</i> - The developers made a choice. Unless you can get an answer from the developers, the question is &quot;opinion-based&quot;, no?"}],"answers":[{"tags":[],"owner":{"account_id":6528825,"reputation":21455,"user_id":5050667,"accept_rate":91,"display_name":"Yassin Hajaj"},"down_vote_count":2,"up_vote_count":51,"is_accepted":true,"score":49,"last_activity_date":1634073715,"creation_date":1520933270,"answer_id":49252497,"question_id":39907925,"body_markdown":"I&#39;m taking a stab at it in what looks to me like something very logical.\r\n\r\nHere is the code for the method `plus(long, TemporalUnit)` (which is used in `minus(...)`):\r\n\r\n```\r\n@Override\r\npublic Instant plus(long amountToAdd, TemporalUnit unit) {\r\n    if (unit instanceof ChronoUnit) {\r\n        switch ((ChronoUnit) unit) {\r\n            case NANOS: return plusNanos(amountToAdd);\r\n            case MICROS: return plus(amountToAdd / 1000_000, (amountToAdd % 1000_000) * 1000);\r\n            case MILLIS: return plusMillis(amountToAdd);\r\n            case SECONDS: return plusSeconds(amountToAdd);\r\n            case MINUTES: return plusSeconds(Math.multiplyExact(amountToAdd, SECONDS_PER_MINUTE));\r\n            case HOURS: return plusSeconds(Math.multiplyExact(amountToAdd, SECONDS_PER_HOUR));\r\n            case HALF_DAYS: return plusSeconds(Math.multiplyExact(amountToAdd, SECONDS_PER_DAY / 2));\r\n            case DAYS: return plusSeconds(Math.multiplyExact(amountToAdd, SECONDS_PER_DAY));\r\n        }\r\n        throw new UnsupportedTemporalTypeException(&quot;Unsupported unit: &quot; + unit);\r\n    }\r\n    return unit.addTo(this, amountToAdd);\r\n}\r\n```\r\n\r\nWe can see that the results are calculated by multiplying seconds representation of units, a year cannot be logically and consistently represented by seconds for obvious reasons.\r\n\r\n----------\r\n**Addition**\r\n\r\nI can see another obvious reason why : constants used in the method above come from `java.time.LocalTime`. The constants only define units up to days. No constant above days are defined (in `LocalDate` and `LocalDateTime` neither).","title":"Why Instant does not support operations with ChronoUnit.YEARS?","body":"<p>I'm taking a stab at it in what looks to me like something very logical.</p>\n<p>Here is the code for the method <code>plus(long, TemporalUnit)</code> (which is used in <code>minus(...)</code>):</p>\n<pre><code>@Override\npublic Instant plus(long amountToAdd, TemporalUnit unit) {\n    if (unit instanceof ChronoUnit) {\n        switch ((ChronoUnit) unit) {\n            case NANOS: return plusNanos(amountToAdd);\n            case MICROS: return plus(amountToAdd / 1000_000, (amountToAdd % 1000_000) * 1000);\n            case MILLIS: return plusMillis(amountToAdd);\n            case SECONDS: return plusSeconds(amountToAdd);\n            case MINUTES: return plusSeconds(Math.multiplyExact(amountToAdd, SECONDS_PER_MINUTE));\n            case HOURS: return plusSeconds(Math.multiplyExact(amountToAdd, SECONDS_PER_HOUR));\n            case HALF_DAYS: return plusSeconds(Math.multiplyExact(amountToAdd, SECONDS_PER_DAY / 2));\n            case DAYS: return plusSeconds(Math.multiplyExact(amountToAdd, SECONDS_PER_DAY));\n        }\n        throw new UnsupportedTemporalTypeException(&quot;Unsupported unit: &quot; + unit);\n    }\n    return unit.addTo(this, amountToAdd);\n}\n</code></pre>\n<p>We can see that the results are calculated by multiplying seconds representation of units, a year cannot be logically and consistently represented by seconds for obvious reasons.</p>\n<hr />\n<p><strong>Addition</strong></p>\n<p>I can see another obvious reason why : constants used in the method above come from <code>java.time.LocalTime</code>. The constants only define units up to days. No constant above days are defined (in <code>LocalDate</code> and <code>LocalDateTime</code> neither).</p>\n"},{"tags":[],"owner":{"account_id":5801273,"reputation":545,"user_id":4575369,"display_name":"Andriy Koretskyy"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1562942244,"creation_date":1562942244,"answer_id":57009182,"question_id":39907925,"body_markdown":"I guess it happens because Instant does not contain information about time zone. It means that same Instant can be interpreted as different date-time value in different time zones. Let&#39;s assume we have Instant which is is represented as 2016.01.01 00:30:00 in, let&#39;s say, UTC+2 time zone. The same Instant means 2015.12.31 23:30:00 in UTC+1 time zone. 2016 is a leap year, it&#39;s length is 366 days, so in order to get Instant minus 1 year, we have to subtract 366 days from it. But 2015 is not a leap year, it&#39;s length is 365 days, so we have to subtract 365 days from Instant. This ambiguity causes the fact that Instant does not support ChronoUnit.YEARS. Similar issue causes Instant to not support ChronoUnit.MONTHS. And probably absence of DST information causes Instant to not support ChronoUnit.WEEKS.","title":"Why Instant does not support operations with ChronoUnit.YEARS?","body":"<p>I guess it happens because Instant does not contain information about time zone. It means that same Instant can be interpreted as different date-time value in different time zones. Let's assume we have Instant which is is represented as 2016.01.01 00:30:00 in, let's say, UTC+2 time zone. The same Instant means 2015.12.31 23:30:00 in UTC+1 time zone. 2016 is a leap year, it's length is 366 days, so in order to get Instant minus 1 year, we have to subtract 366 days from it. But 2015 is not a leap year, it's length is 365 days, so we have to subtract 365 days from Instant. This ambiguity causes the fact that Instant does not support ChronoUnit.YEARS. Similar issue causes Instant to not support ChronoUnit.MONTHS. And probably absence of DST information causes Instant to not support ChronoUnit.WEEKS.</p>\n"}],"owner":{"account_id":20681,"reputation":1498,"user_id":49678,"accept_rate":77,"display_name":"alexandroid"},"comment_count":20,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31559,"favorite_count":0,"down_vote_count":0,"up_vote_count":68,"accepted_answer_id":49252497,"answer_count":2,"score":68,"last_activity_date":1634073715,"creation_date":1475802921,"question_id":39907925,"body_markdown":"This was unexpected to me:\r\n\r\n\r\n    &gt; Clock clock = Clock.systemUTC();\r\n\r\n    &gt; Instant.now(clock).minus(3, ChronoUnit.DAYS);\r\n    java.time.Instant res4 = 2016-10-04T00:57:20.840Z\r\n\r\n    &gt; Instant.now(clock).minus(3, ChronoUnit.YEARS);\r\n    java.time.temporal.UnsupportedTemporalTypeException: Unsupported unit: Years\r\n\r\n\r\nAs a workaround I have to do this:\r\n\r\n    &gt; Instant.now(clock).atOffset(ZoneOffset.UTC).minus(3, ChronoUnit.YEARS).toInstant();\r\n    java.time.Instant res11 = 2013-10-07T01:02:56.361Z\r\n\r\nI am curios why Instant does not support YEARS. Did developers just give up on it?\r\n\r\n(In my actual code I tried to subtract a `Period.ofYears(3)` but the quoted Instant methods are the ones being called in the end).","title":"Why Instant does not support operations with ChronoUnit.YEARS?","body":"<p>This was unexpected to me:</p>\n\n<pre><code>&gt; Clock clock = Clock.systemUTC();\n\n&gt; Instant.now(clock).minus(3, ChronoUnit.DAYS);\njava.time.Instant res4 = 2016-10-04T00:57:20.840Z\n\n&gt; Instant.now(clock).minus(3, ChronoUnit.YEARS);\njava.time.temporal.UnsupportedTemporalTypeException: Unsupported unit: Years\n</code></pre>\n\n<p>As a workaround I have to do this:</p>\n\n<pre><code>&gt; Instant.now(clock).atOffset(ZoneOffset.UTC).minus(3, ChronoUnit.YEARS).toInstant();\njava.time.Instant res11 = 2013-10-07T01:02:56.361Z\n</code></pre>\n\n<p>I am curios why Instant does not support YEARS. Did developers just give up on it?</p>\n\n<p>(In my actual code I tried to subtract a <code>Period.ofYears(3)</code> but the quoted Instant methods are the ones being called in the end).</p>\n"},{"tags":["java","spring","path"],"answers":[{"tags":[],"owner":{"account_id":19092422,"reputation":51311,"user_id":13942448,"display_name":"jccampanero"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1633964488,"creation_date":1633964132,"answer_id":69528294,"question_id":69481445,"body_markdown":"I am afraid that if your scripts are not copied to the class path there are not a lot of options.\r\n\r\nPlease, try something like:\r\n\r\n```java\r\n@Sql(&quot;file:/path-to-mainFolder/mainFolder/scripts/postgres/script.sql&quot;)\r\n```\r\n\r\nAs you can see in the [documentation](https://docs.spring.io/spring-framework/docs/current/reference/html/testing.html#testcontext-executing-sql-declaratively-script-resources) you can use any valid resource type.\r\n\r\nHaving said that, I think the best option is to make these resources available in the classpath. If you are using maven, you can use for instance the [`copy-resources`](https://maven.apache.org/plugins/maven-resources-plugin/examples/copy-resources.html) goal of the [maven resources plugin](https://maven.apache.org/plugins/maven-resources-plugin/index.html) to copy your resources when running your tests:\r\n\r\n```xml\r\n&lt;project&gt;\r\n  ...\r\n  &lt;build&gt;\r\n    &lt;plugins&gt;\r\n      &lt;plugin&gt;\r\n        &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.2.0&lt;/version&gt;\r\n        &lt;executions&gt;\r\n          &lt;execution&gt;\r\n            &lt;id&gt;copy-resources&lt;/id&gt;\r\n            &lt;!-- here the phase you need: validate, test-compile... --&gt;\r\n            &lt;phase&gt;validate&lt;/phase&gt;\r\n            &lt;goals&gt;\r\n              &lt;goal&gt;copy-resources&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n            &lt;configuration&gt;\r\n              &lt;outputDirectory&gt;${basedir}/target/scripts&lt;/outputDirectory&gt;\r\n              &lt;resources&gt;          \r\n                &lt;resource&gt;\r\n                  &lt;!-- Depending on your project, try defining the scripts src location as you consider more appropriate  --&gt;\r\n                  &lt;directory&gt;mainFolder/scripts/postgres/script.sql&lt;/directory&gt;\r\n                &lt;/resource&gt;\r\n              &lt;/resources&gt;              \r\n            &lt;/configuration&gt;            \r\n          &lt;/execution&gt;\r\n        &lt;/executions&gt;\r\n      &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n    ...\r\n  &lt;/build&gt;\r\n  ...\r\n&lt;/project&gt;\r\n```\r\n\r\nWith this setup, now you can define your script location as a classpath resource:\r\n\r\n```java\r\n@Sql(&quot;/scripts/postgres/script.sql&quot;)\r\n```\r\n\r\nPerhaps, I am not sure about that, in a similar fashion you can use the plugin [`testResources`](https://maven.apache.org/plugins/maven-resources-plugin/testResources-mojo.html) goal as well.","title":"@Sql annotation by passing a sql script present in another module","body":"<p>I am afraid that if your scripts are not copied to the class path there are not a lot of options.</p>\n<p>Please, try something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Sql(&quot;file:/path-to-mainFolder/mainFolder/scripts/postgres/script.sql&quot;)\n</code></pre>\n<p>As you can see in the <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/testing.html#testcontext-executing-sql-declaratively-script-resources\" rel=\"nofollow noreferrer\">documentation</a> you can use any valid resource type.</p>\n<p>Having said that, I think the best option is to make these resources available in the classpath. If you are using maven, you can use for instance the <a href=\"https://maven.apache.org/plugins/maven-resources-plugin/examples/copy-resources.html\" rel=\"nofollow noreferrer\"><code>copy-resources</code></a> goal of the <a href=\"https://maven.apache.org/plugins/maven-resources-plugin/index.html\" rel=\"nofollow noreferrer\">maven resources plugin</a> to copy your resources when running your tests:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;project&gt;\n  ...\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.2.0&lt;/version&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;id&gt;copy-resources&lt;/id&gt;\n            &lt;!-- here the phase you need: validate, test-compile... --&gt;\n            &lt;phase&gt;validate&lt;/phase&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;copy-resources&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n              &lt;outputDirectory&gt;${basedir}/target/scripts&lt;/outputDirectory&gt;\n              &lt;resources&gt;          \n                &lt;resource&gt;\n                  &lt;!-- Depending on your project, try defining the scripts src location as you consider more appropriate  --&gt;\n                  &lt;directory&gt;mainFolder/scripts/postgres/script.sql&lt;/directory&gt;\n                &lt;/resource&gt;\n              &lt;/resources&gt;              \n            &lt;/configuration&gt;            \n          &lt;/execution&gt;\n        &lt;/executions&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n    ...\n  &lt;/build&gt;\n  ...\n&lt;/project&gt;\n</code></pre>\n<p>With this setup, now you can define your script location as a classpath resource:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Sql(&quot;/scripts/postgres/script.sql&quot;)\n</code></pre>\n<p>Perhaps, I am not sure about that, in a similar fashion you can use the plugin <a href=\"https://maven.apache.org/plugins/maven-resources-plugin/testResources-mojo.html\" rel=\"nofollow noreferrer\"><code>testResources</code></a> goal as well.</p>\n"},{"tags":[],"owner":{"account_id":22961150,"reputation":229,"user_id":17090988,"display_name":"Narcis Postolache"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634073456,"creation_date":1634073456,"answer_id":69547134,"question_id":69481445,"body_markdown":"If you want to use the scripts on your local environment machine you can also add the directory **mainFolder/scripts/postgres** as a dependency. In **Intellij**, you con go to **Project Structure -&gt; Modules -&gt; your module -&gt; dependencies -&gt; + -&gt; Jars or directories -&gt; your script directory -&gt; Classes**.\r\nThen you will be able to use\r\n\r\n    @Sql(&quot;/yourScript.sql&quot;)\r\n\r\nIn DevOps pipeline you would need to add the dedicated directory to your application server classpath.\r\n\r\nKeep in mind that you will have to keep unique names for your sql files, because if you intend to use a structure with multiple directory levels, I think the jvm will load only the first entry. It is not a recommended approach, but it is fast if you only need to generate a report or test something on your local environment.\r\n\r\nAnother approach would be to specify at runtime **-Xbootclasspath/a:**. Then you would be able to use @Sql with relative paths as you initially wanted.\r\nE.g.\r\n\r\n    -Xbootclasspath/a:path-to-mainFolder\r\nthen you would be able to use \r\n\r\n    @Sql(&quot;/scripts/postgres/script.sql&quot;)","title":"@Sql annotation by passing a sql script present in another module","body":"<p>If you want to use the scripts on your local environment machine you can also add the directory <strong>mainFolder/scripts/postgres</strong> as a dependency. In <strong>Intellij</strong>, you con go to <strong>Project Structure -&gt; Modules -&gt; your module -&gt; dependencies -&gt; + -&gt; Jars or directories -&gt; your script directory -&gt; Classes</strong>.\nThen you will be able to use</p>\n<pre><code>@Sql(&quot;/yourScript.sql&quot;)\n</code></pre>\n<p>In DevOps pipeline you would need to add the dedicated directory to your application server classpath.</p>\n<p>Keep in mind that you will have to keep unique names for your sql files, because if you intend to use a structure with multiple directory levels, I think the jvm will load only the first entry. It is not a recommended approach, but it is fast if you only need to generate a report or test something on your local environment.</p>\n<p>Another approach would be to specify at runtime <strong>-Xbootclasspath/a:</strong>. Then you would be able to use @Sql with relative paths as you initially wanted.\nE.g.</p>\n<pre><code>-Xbootclasspath/a:path-to-mainFolder\n</code></pre>\n<p>then you would be able to use</p>\n<pre><code>@Sql(&quot;/scripts/postgres/script.sql&quot;)\n</code></pre>\n"}],"owner":{"account_id":8416879,"reputation":667,"user_id":6317008,"accept_rate":78,"display_name":"SGiux"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":675,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1634073456,"creation_date":1633610762,"question_id":69481445,"body_markdown":"I have a project compose by more than one module, and an integration test (in the test folder) where I want to run this script using the `@sql` annotation. By default the class path resource is used. \r\n\r\nThe test is inside this folder:\r\n\r\n&gt; mainFolder/module1/src/test/java/com/.../.../controllers/TestClass.java\r\n\r\nwhile the script is present in this folder:\r\n\r\n&gt; mainFolder/scripts/postgres/script.sql\r\n\r\nBasically I&#39;m not sure which string (relative path) I should put in the value parameter of the `@Sql` annotation.","title":"@Sql annotation by passing a sql script present in another module","body":"<p>I have a project compose by more than one module, and an integration test (in the test folder) where I want to run this script using the <code>@sql</code> annotation. By default the class path resource is used.</p>\n<p>The test is inside this folder:</p>\n<blockquote>\n<p>mainFolder/module1/src/test/java/com/.../.../controllers/TestClass.java</p>\n</blockquote>\n<p>while the script is present in this folder:</p>\n<blockquote>\n<p>mainFolder/scripts/postgres/script.sql</p>\n</blockquote>\n<p>Basically I'm not sure which string (relative path) I should put in the value parameter of the <code>@Sql</code> annotation.</p>\n"},{"tags":["java","oracle","java-8","jboss","ejb-3.0"],"comments":[{"owner":{"account_id":1635690,"reputation":150067,"user_id":1509264,"accept_rate":58,"display_name":"MT0"},"score":0,"creation_date":1634075064,"post_id":69547023,"comment_id":122927771,"body_markdown":"You do not include the code for the stored procedure. How are we expected to solve the problem if we cannot see it?","body":"You do not include the code for the stored procedure. How are we expected to solve the problem if we cannot see it?"},{"owner":{"account_id":6228,"reputation":228269,"user_id":10397,"display_name":"Justin Cave"},"score":0,"creation_date":1634077412,"post_id":69547023,"comment_id":122928345,"body_markdown":"Is the database session active?  What is it waiting on?  My wild guess is that the database session is active and it is blocked waiting on a lock that is held by some other session.  And the process of retrying/ restarting either happens after the lock holder has released the lock or it somehow causes the lock holder&#39;s transaction to be rolled back.","body":"Is the database session active?  What is it waiting on?  My wild guess is that the database session is active and it is blocked waiting on a lock that is held by some other session.  And the process of retrying/ restarting either happens after the lock holder has released the lock or it somehow causes the lock holder&#39;s transaction to be rolled back."},{"owner":{"account_id":6349576,"reputation":11,"user_id":4929077,"display_name":"Dorian Haxhiaj"},"score":0,"creation_date":1634580079,"post_id":69547023,"comment_id":123058090,"body_markdown":"MT0 The stored procedure is woking fine I test from db side. Also i didn&#39;t upload because is 400 line.\nJustin Cave I think this can be the issue. The session can be active after executing one day before, but i am not sure .THe problem here is that the code is in production and it have many different active session and this part of the code at least it is executed one time a day and it process at least 30 000 record for day and I was wondering what is the best way to handle this part?","body":"MT0 The stored procedure is woking fine I test from db side. Also i didn&#39;t upload because is 400 line. Justin Cave I think this can be the issue. The session can be active after executing one day before, but i am not sure .THe problem here is that the code is in production and it have many different active session and this part of the code at least it is executed one time a day and it process at least 30 000 record for day and I was wondering what is the best way to handle this part?"}],"owner":{"account_id":6349576,"reputation":11,"user_id":4929077,"display_name":"Dorian Haxhiaj"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":222,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1634072746,"creation_date":1634072746,"question_id":69547023,"body_markdown":"I am currently working with ejb3, Java 1.8, jboss and oracle project. I am having a issue with CallableStatement. I have a procedure that is called when a CSV file is processed. When the procedure it called for the first time most of the time it never ends. But when a reuse the procedure again it work perfectly. Could you please give me any advice how to deal with this situation?\r\n\r\n**cStmt = prepareCall(&quot;{call CPRPA_TPT_PRICE_CALC.tpt_data_import(?,?)}&quot;);**\r\n\r\n_________________________________________________\r\n```\r\nimport java.sql.CallableStatement;\r\nimport java.sql.SQLException;\r\nimport java.sql.Connection;\r\nimport java.util.HashMap;\r\n\r\nimport javax.persistence.EntityManager;\r\n\r\nimport org.hibernate.Session;\r\nimport org.hibernate.engine.spi.SessionImplementor;\r\n\r\n\r\npublic abstract class ProcDao extends BaseDao {\r\n  /** Callable statement cache */\r\n  private HashMap&lt;String, CallableStatement&gt; callableStatementCache = null;\r\n  /** Session */\r\n  private Session session = null;\r\n\r\n  /**\r\n   * Constructor\r\n   *\r\n   * @param entityManager Entity manager\r\n   */\r\n  public ProcDao(EntityManager entityManager) {\r\n    super(entityManager);\r\n  }\r\n\r\n  /**\r\n   * Creates a callable statement and stores it in the callable statement cache.\r\n   *\r\n   * @param sqlString SQL statement\r\n   * @return Native query\r\n   * @throws SQLException Database error\r\n   */\r\n  @SuppressWarnings({&quot;deprecation&quot;})\r\n  protected CallableStatement prepareCall(String sqlString) throws SQLException {\r\n    if (callableStatementCache == null) {\r\n      callableStatementCache = new HashMap&lt;String, CallableStatement&gt;();\r\n    }\r\n    CallableStatement callableStatement = callableStatementCache.get(sqlString);\r\n    if (callableStatement == null) {\r\n      if (session == null) {\r\n        session = (Session) entityManager.getDelegate();    \t\r\n      } \r\n      \r\n      SessionImplementor sessionImplementor = (SessionImplementor)session;\r\n      Connection conn = sessionImplementor.connection();\r\n      callableStatement = conn.prepareCall(sqlString);\r\n      callableStatementCache.put(sqlString, callableStatement);\r\n    }\r\n    return callableStatement;\r\n  }\r\n    \r\n\r\n  /** Closes the cached callable statements and connections. */\r\n  public void close() {\r\n    if (callableStatementCache != null &amp;&amp; callableStatementCache.size() &gt; 0) {\r\n      for (CallableStatement callableStatement : callableStatementCache.values()) {\r\n        try {\r\n          Connection connection = callableStatement.getConnection();\r\n          callableStatement.close();\r\n          connection.close();\r\n        } catch (Throwable ex) {\r\n          ex.printStackTrace();\r\n        }\r\n      }\r\n      callableStatementCache.clear();\r\n    }\r\n    if (session != null) {\r\n      if(session.isOpen()){\t\r\n    \t  session.disconnect();\r\n      }\r\n      session = null;\r\n      \r\n    }\r\n  }\r\n}\r\n\r\n```\r\n________________________________________________________________\r\n``` \r\nimport java.sql.CallableStatement;\r\nimport java.sql.SQLException;\r\nimport javax.persistence.EntityManager;\r\n\r\npublic class ImportPriceLevelProcedureManagerDao extends ProcDao {\r\n\t\r\n\t/**\r\n\t * Constructor\r\n\t * \r\n\t * @param entityManager {@link EntityManager}\r\n\t */\r\n\tpublic ImportPriceLevelProcedureManagerDao(EntityManager entityManager) {\r\n\t\tsuper(entityManager);\r\n\t}\r\n\r\n\tpublic void invokeImportPriceFromTempTableProcedure(int sessionId, String userID) throws DataException {\r\n\t\tCallableStatement cStmt = null;\t\t\r\n\t\ttry {\r\n\t\t\tcStmt = prepareCall(&quot;{call CPRPA_TPT_PRICE_CALC.tpt_data_import(?,?)}&quot;);\r\n\t\t\tcStmt.setInt(1, sessionId);\r\n\t\t\tcStmt.setString(2, userID);\r\n\t\t\tcStmt.execute();\r\n\t\t} catch (SQLException e) {\r\n\t\t\tthrow new DatabaseException(&quot;Database exception occured!&quot; + e);\r\n\t\t} catch (RuntimeException e) {\r\n\t\t\tthrowDataException(e);\r\n\t\t} finally {\r\n\t\t      try {\r\n\t\t          cStmt.close();\r\n\t\t        } catch (SQLException e) {\r\n\t\t          throw new DatabaseException(&quot;Unable to release the Callable Statement&quot;);\r\n\t\t        }\r\n\t\t      }\r\n\t\t\r\n\t}\r\n``` \r\n____________________________________________________________________________\r\n```\r\n@Stateful(name = &quot;xxxx/ImportPriceLevelProcedureManager&quot;)\r\npublic class ImportPriceLevelProcedureManagerBean extends ProcManagerBean&lt;ImportPriceLevelProcedureManagerDao&gt;  implements ImportPriceLevelProcedureManager, ImportPriceLevelProcedureManagerLocal {\r\n\r\n\t/** Entity-Manager */\r\n\t@PersistenceContext(type = PersistenceContextType.TRANSACTION, unitName = &quot;xxxx&quot;)\r\n\tprivate EntityManager entityManager;\r\n\r\n\t/**\r\n\t * Set entity manager for testing purpose\r\n\t * \r\n\t * @param entityManager {@link EntityManager}\r\n\t */\r\n\tpublic void setEntityManager(EntityManager entityManager) {\r\n\t\tthis.entityManager = entityManager;\r\n\t}\r\n\t/** {@inheritDoc} */\r\n\t@Override\r\n\tpublic void invokeImportPriceFromTempTableProcedure(int sessionId, String userID) throws DataException {\r\n\t\tgetDao().invokeImportPriceFromTempTableProcedure(sessionId, userID);\r\n\t}\r\n\t\r\n```\r\n\r\n\r\n\r\n","title":"CallableStatement never ends when it is executed for first time","body":"<p>I am currently working with ejb3, Java 1.8, jboss and oracle project. I am having a issue with CallableStatement. I have a procedure that is called when a CSV file is processed. When the procedure it called for the first time most of the time it never ends. But when a reuse the procedure again it work perfectly. Could you please give me any advice how to deal with this situation?</p>\n<p><strong>cStmt = prepareCall(&quot;{call CPRPA_TPT_PRICE_CALC.tpt_data_import(?,?)}&quot;);</strong></p>\n<hr />\n<pre><code>import java.sql.CallableStatement;\nimport java.sql.SQLException;\nimport java.sql.Connection;\nimport java.util.HashMap;\n\nimport javax.persistence.EntityManager;\n\nimport org.hibernate.Session;\nimport org.hibernate.engine.spi.SessionImplementor;\n\n\npublic abstract class ProcDao extends BaseDao {\n  /** Callable statement cache */\n  private HashMap&lt;String, CallableStatement&gt; callableStatementCache = null;\n  /** Session */\n  private Session session = null;\n\n  /**\n   * Constructor\n   *\n   * @param entityManager Entity manager\n   */\n  public ProcDao(EntityManager entityManager) {\n    super(entityManager);\n  }\n\n  /**\n   * Creates a callable statement and stores it in the callable statement cache.\n   *\n   * @param sqlString SQL statement\n   * @return Native query\n   * @throws SQLException Database error\n   */\n  @SuppressWarnings({&quot;deprecation&quot;})\n  protected CallableStatement prepareCall(String sqlString) throws SQLException {\n    if (callableStatementCache == null) {\n      callableStatementCache = new HashMap&lt;String, CallableStatement&gt;();\n    }\n    CallableStatement callableStatement = callableStatementCache.get(sqlString);\n    if (callableStatement == null) {\n      if (session == null) {\n        session = (Session) entityManager.getDelegate();        \n      } \n      \n      SessionImplementor sessionImplementor = (SessionImplementor)session;\n      Connection conn = sessionImplementor.connection();\n      callableStatement = conn.prepareCall(sqlString);\n      callableStatementCache.put(sqlString, callableStatement);\n    }\n    return callableStatement;\n  }\n    \n\n  /** Closes the cached callable statements and connections. */\n  public void close() {\n    if (callableStatementCache != null &amp;&amp; callableStatementCache.size() &gt; 0) {\n      for (CallableStatement callableStatement : callableStatementCache.values()) {\n        try {\n          Connection connection = callableStatement.getConnection();\n          callableStatement.close();\n          connection.close();\n        } catch (Throwable ex) {\n          ex.printStackTrace();\n        }\n      }\n      callableStatementCache.clear();\n    }\n    if (session != null) {\n      if(session.isOpen()){ \n          session.disconnect();\n      }\n      session = null;\n      \n    }\n  }\n}\n\n</code></pre>\n<hr />\n<pre><code>import java.sql.CallableStatement;\nimport java.sql.SQLException;\nimport javax.persistence.EntityManager;\n\npublic class ImportPriceLevelProcedureManagerDao extends ProcDao {\n    \n    /**\n     * Constructor\n     * \n     * @param entityManager {@link EntityManager}\n     */\n    public ImportPriceLevelProcedureManagerDao(EntityManager entityManager) {\n        super(entityManager);\n    }\n\n    public void invokeImportPriceFromTempTableProcedure(int sessionId, String userID) throws DataException {\n        CallableStatement cStmt = null;     \n        try {\n            cStmt = prepareCall(&quot;{call CPRPA_TPT_PRICE_CALC.tpt_data_import(?,?)}&quot;);\n            cStmt.setInt(1, sessionId);\n            cStmt.setString(2, userID);\n            cStmt.execute();\n        } catch (SQLException e) {\n            throw new DatabaseException(&quot;Database exception occured!&quot; + e);\n        } catch (RuntimeException e) {\n            throwDataException(e);\n        } finally {\n              try {\n                  cStmt.close();\n                } catch (SQLException e) {\n                  throw new DatabaseException(&quot;Unable to release the Callable Statement&quot;);\n                }\n              }\n        \n    }\n</code></pre>\n<hr />\n<pre><code>@Stateful(name = &quot;xxxx/ImportPriceLevelProcedureManager&quot;)\npublic class ImportPriceLevelProcedureManagerBean extends ProcManagerBean&lt;ImportPriceLevelProcedureManagerDao&gt;  implements ImportPriceLevelProcedureManager, ImportPriceLevelProcedureManagerLocal {\n\n    /** Entity-Manager */\n    @PersistenceContext(type = PersistenceContextType.TRANSACTION, unitName = &quot;xxxx&quot;)\n    private EntityManager entityManager;\n\n    /**\n     * Set entity manager for testing purpose\n     * \n     * @param entityManager {@link EntityManager}\n     */\n    public void setEntityManager(EntityManager entityManager) {\n        this.entityManager = entityManager;\n    }\n    /** {@inheritDoc} */\n    @Override\n    public void invokeImportPriceFromTempTableProcedure(int sessionId, String userID) throws DataException {\n        getDao().invokeImportPriceFromTempTableProcedure(sessionId, userID);\n    }\n    \n</code></pre>\n"},{"tags":["java","spring","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":6937186,"reputation":1164,"user_id":5324721,"display_name":"Kumar Ashutosh"},"score":0,"creation_date":1634064255,"post_id":69544696,"comment_id":122924645,"body_markdown":"What sort of tasks you need to perform? You may start from the business requirement like user-signup, login, task creation, task allocation etc. In all of this, user-module should not be having any dependency on task-service. Although, task service might connect to user-service for fetching user data. User db would not be having task details . Just create a column for user in task table in task-service","body":"What sort of tasks you need to perform? You may start from the business requirement like user-signup, login, task creation, task allocation etc. In all of this, user-module should not be having any dependency on task-service. Although, task service might connect to user-service for fetching user data. User db would not be having task details . Just create a column for user in task table in task-service"},{"owner":{"account_id":13818443,"reputation":51,"user_id":9974520,"display_name":"mok_1"},"score":0,"creation_date":1634064479,"post_id":69544696,"comment_id":122924712,"body_markdown":"A task can have multiple users so a column on the task table wouldn&#39;t work I&#39;m pretty sure. The call to the task-service would be done through the angular webapp and not the user-service by the way.","body":"A task can have multiple users so a column on the task table wouldn&#39;t work I&#39;m pretty sure. The call to the task-service would be done through the angular webapp and not the user-service by the way."},{"owner":{"account_id":6937186,"reputation":1164,"user_id":5324721,"display_name":"Kumar Ashutosh"},"score":0,"creation_date":1634064636,"post_id":69544696,"comment_id":122924762,"body_markdown":"It&#39;s just how you perceive the approach. You can have an `allocation-table` with alloc-id  and `task-id`as pk(see embeddable ids), then associate multiple users(records) with same `task-id` and new `alloc-id` (auto-generate).","body":"It&#39;s just how you perceive the approach. You can have an <code>allocation-table</code> with alloc-id  and <code>task-id</code>as pk(see embeddable ids), then associate multiple users(records) with same <code>task-id</code> and new <code>alloc-id</code> (auto-generate)."},{"owner":{"account_id":13818443,"reputation":51,"user_id":9974520,"display_name":"mok_1"},"score":0,"creation_date":1634065467,"post_id":69544696,"comment_id":122925058,"body_markdown":"How would this look like in a Spring Boot Hibernate context?","body":"How would this look like in a Spring Boot Hibernate context?"}],"answers":[{"tags":[],"owner":{"account_id":6937186,"reputation":1164,"user_id":5324721,"display_name":"Kumar Ashutosh"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1634072526,"creation_date":1634066604,"answer_id":69545981,"question_id":69544696,"body_markdown":"Use case: assign an already existing task to an already existing user.\r\nYou can assign multiple users at a time to 1 single task.\r\n\r\n##### PostRequest\r\n\r\n`/tasks/allocation/new`\r\n\r\nRequest Body:\r\n\r\n```json\r\n\t{\r\n\t  &quot;task-id&quot;: 12345,\r\n\t  &quot;users&quot;: [\r\n\t\t{\r\n\t\t  &quot;username&quot;: &quot;user-1&quot;,\r\n\t\t  &quot;user-id&quot;: 101\r\n\t\t},\r\n\t\t{\r\n\t\t  &quot;username&quot;: &quot;user-2&quot;,\r\n\t\t  &quot;user-id&quot;: 102\r\n\t\t},\r\n\t\t{\r\n\t\t  &quot;username&quot;: &quot;user-3&quot;,\r\n\t\t  &quot;user-id&quot;: 103\r\n\t\t}\r\n\t  ]\r\n\t}\r\n```\r\n\r\nPost request is having one task and list of user-details to be allocated to that task.\r\n\r\n##### TaskAllocation.java\r\n\r\n```Java\r\n\t@Data\r\n\tpublic class TaskAllocation{\r\n\t @jsonProperty(&quot;task-id&quot;)\r\n\t private long taskId;\r\n\t @JsonProperty(&quot;users&quot;)\r\n\t private List&lt;Users&gt; userList;\r\n}\r\n```\r\n\r\n##### Users.java\r\n\r\n```Java\r\n\t@Data\r\n\tpublic class Users{\r\n\t @jsonProperty(&quot;username&quot;)\r\n\t private String username;\r\n\t @JsonProperty(&quot;user-id&quot;)\r\n\t private Long userId;\r\n}\r\n```\r\n\r\n##### RestController\r\n\r\n```Java\r\n\r\n\t@PostMapping(&quot;/tasks/allocation/new&quot;)\r\n\tpublic CompletableFuture&lt;ResponseEntity&lt;?&gt;&gt; assignTaskToUsers(@ResponseBody @Valid TaskAllocation taskAllocation){\r\n\r\n\t  // service call\r\n\r\n\t}\r\n\r\n```\r\n\r\n##### Inside service:\r\n1. fetch the task from task db(verify if task exist)\r\n2. If needed, fetch details of users from user-service(for each user), need a async or rest call to user-service. Task service is not having details of users.\r\n3. For each user:\r\n  1.Create new Allocation\r\n  2. Set task Id\r\n  3. Set user-id or username\r\n  4. Save\r\n  \r\n\r\n&gt; Task is already existing\r\n\r\n##### Table Task-Allocation\r\n\r\n```\r\n\t--------------------------------------------------------------\r\n\talloc-id(Pk)         task-Id(Fk)        user-id    timetamp     \r\n\t--------------------------------------------------------------\r\n\t1                     12345         101         123123123123\r\n\t2                     12345         102         123123123123\r\n\t3                     12345         103         123123123123\r\n\r\n```\r\n\r\n##### Entities\r\n\r\n`Task` and `TaskAllocation` has 1:n relationship i.e. `task-allocation` table consists of multiple records with same `task-id`.\r\n\r\nTask.java\r\n```Java\r\n\r\n\t@Getter\r\n\t@Setter\r\n\t@AllArgsConstructor\r\n\t@NoArgsConstructor\r\n\t@Entity\r\n\t@Table(name = &quot;sirf_tournament&quot;)\r\n\tpublic class Task extends Auditable&lt;String&gt; implements Serializable {\r\n\t\t@Id\r\n\t\t@GeneratedValue\r\n\t\tprivate Long taskId;\r\n\r\n\t\tprivate String taskName;\r\n\t\t\r\n\t\t// others\r\n\t\t\r\n\t\t  @OneToMany(\r\n\t\t\t  fetch = FetchType.LAZY,\r\n\t\t\t  mappedBy = &quot;task&quot;,\r\n\t\t\t  cascade = CascadeType.ALL,\r\n\t\t\t  orphanRemoval = true)\r\n\t\t  private Collection&lt;TaskAllocation&gt; taskAllocation = new HashSet&lt;&gt;();\r\n\r\n\t}\r\n```\r\n\r\nTaskAllocation.java\r\n```Java\r\n\t@Getter\r\n\t@Setter\r\n\t@AllArgsConstructor\r\n\t@NoArgsConstructor\r\n\t@Entity\r\n\t@Table(name = &quot;sirf_tournament&quot;)\r\n\tpublic class TaskAllocation extends Auditable&lt;String&gt; implements Serializable {\r\n\t\t@Id\r\n\t\t@GeneratedValue\r\n\t\tprivate Long allocId;\r\n\r\n\t\tprivate Long userId;\r\n\t\t\r\n\t\t\r\n\t\t@JsonIgnore\r\n\t\t@ManyToOne(fetch = FetchType.LAZY)\r\n\t\t@JoinColumn(name = &quot;taskId&quot;)\r\n\t\tprivate Task task;\r\n\r\n\t\t// others\r\n\r\n\t}\r\n```\r\n`User` table and other related entities are not mentioned here. Task service has no information of users.\r\n\r\nIt would be good if you verify every users(all ids can be verified in a single call, return invalid ids from user service) and task ids before persisting them into table.","title":"Problems making a many-to-many relationship work across 2 microservices using Spring Boot &amp; Hibernate","body":"<p>Use case: assign an already existing task to an already existing user.\nYou can assign multiple users at a time to 1 single task.</p>\n<h5>PostRequest</h5>\n<p><code>/tasks/allocation/new</code></p>\n<p>Request Body:</p>\n<pre class=\"lang-json prettyprint-override\"><code>    {\n      &quot;task-id&quot;: 12345,\n      &quot;users&quot;: [\n        {\n          &quot;username&quot;: &quot;user-1&quot;,\n          &quot;user-id&quot;: 101\n        },\n        {\n          &quot;username&quot;: &quot;user-2&quot;,\n          &quot;user-id&quot;: 102\n        },\n        {\n          &quot;username&quot;: &quot;user-3&quot;,\n          &quot;user-id&quot;: 103\n        }\n      ]\n    }\n</code></pre>\n<p>Post request is having one task and list of user-details to be allocated to that task.</p>\n<h5>TaskAllocation.java</h5>\n<pre><code>    @Data\n    public class TaskAllocation{\n     @jsonProperty(&quot;task-id&quot;)\n     private long taskId;\n     @JsonProperty(&quot;users&quot;)\n     private List&lt;Users&gt; userList;\n}\n</code></pre>\n<h5>Users.java</h5>\n<pre><code>    @Data\n    public class Users{\n     @jsonProperty(&quot;username&quot;)\n     private String username;\n     @JsonProperty(&quot;user-id&quot;)\n     private Long userId;\n}\n</code></pre>\n<h5>RestController</h5>\n<pre><code>\n    @PostMapping(&quot;/tasks/allocation/new&quot;)\n    public CompletableFuture&lt;ResponseEntity&lt;?&gt;&gt; assignTaskToUsers(@ResponseBody @Valid TaskAllocation taskAllocation){\n\n      // service call\n\n    }\n\n</code></pre>\n<h5>Inside service:</h5>\n<ol>\n<li>fetch the task from task db(verify if task exist)</li>\n<li>If needed, fetch details of users from user-service(for each user), need a async or rest call to user-service. Task service is not having details of users.</li>\n<li>For each user:\n1.Create new Allocation</li>\n<li>Set task Id</li>\n<li>Set user-id or username</li>\n<li>Save</li>\n</ol>\n<blockquote>\n<p>Task is already existing</p>\n</blockquote>\n<h5>Table Task-Allocation</h5>\n<pre><code>    --------------------------------------------------------------\n    alloc-id(Pk)         task-Id(Fk)        user-id    timetamp     \n    --------------------------------------------------------------\n    1                     12345         101         123123123123\n    2                     12345         102         123123123123\n    3                     12345         103         123123123123\n\n</code></pre>\n<h5>Entities</h5>\n<p><code>Task</code> and <code>TaskAllocation</code> has 1:n relationship i.e. <code>task-allocation</code> table consists of multiple records with same <code>task-id</code>.</p>\n<p>Task.java</p>\n<pre><code>\n    @Getter\n    @Setter\n    @AllArgsConstructor\n    @NoArgsConstructor\n    @Entity\n    @Table(name = &quot;sirf_tournament&quot;)\n    public class Task extends Auditable&lt;String&gt; implements Serializable {\n        @Id\n        @GeneratedValue\n        private Long taskId;\n\n        private String taskName;\n        \n        // others\n        \n          @OneToMany(\n              fetch = FetchType.LAZY,\n              mappedBy = &quot;task&quot;,\n              cascade = CascadeType.ALL,\n              orphanRemoval = true)\n          private Collection&lt;TaskAllocation&gt; taskAllocation = new HashSet&lt;&gt;();\n\n    }\n</code></pre>\n<p>TaskAllocation.java</p>\n<pre><code>    @Getter\n    @Setter\n    @AllArgsConstructor\n    @NoArgsConstructor\n    @Entity\n    @Table(name = &quot;sirf_tournament&quot;)\n    public class TaskAllocation extends Auditable&lt;String&gt; implements Serializable {\n        @Id\n        @GeneratedValue\n        private Long allocId;\n\n        private Long userId;\n        \n        \n        @JsonIgnore\n        @ManyToOne(fetch = FetchType.LAZY)\n        @JoinColumn(name = &quot;taskId&quot;)\n        private Task task;\n\n        // others\n\n    }\n</code></pre>\n<p><code>User</code> table and other related entities are not mentioned here. Task service has no information of users.</p>\n<p>It would be good if you verify every users(all ids can be verified in a single call, return invalid ids from user service) and task ids before persisting them into table.</p>\n"},{"tags":[],"owner":{"account_id":4739993,"reputation":1837,"user_id":3833111,"accept_rate":100,"display_name":"Mr_Thorynque"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1634072280,"creation_date":1634072280,"answer_id":69546944,"question_id":69544696,"body_markdown":"Maybe a better hibernate mapping :\r\n\r\nTask.java [task-service]\r\n\r\n    @Entity\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @Getter\r\n    @Setter\r\n    @EqualsAndHashCode(callSuper = true)\r\n    public class Task extends BaseEntity {\r\n    \r\n        private String name, description;\r\n    \r\n        @ManyToOne\r\n        private Lane lane;\r\n    \r\n        @OneToMany(mappedBy=&quot;task&quot;)\r\n        private List&lt;TaskUser&gt; users;\r\n    }\r\n\r\nTaskUser.java [task-service]\r\n\r\n    @Entity\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @Data\r\n    @EqualsAndHashCode\r\n    public class TaskUser {\r\n    \r\n        @Id\r\n        private Long id;\r\n    \r\n        @ManyToOne\r\n        @JoinColumn(name=&quot;task_id&quot;, nullable=false)\r\n        private Task task;\r\n    \r\n        @Column(name = &quot;user_id&quot;)\r\n        private Long userId;\r\n     }","title":"Problems making a many-to-many relationship work across 2 microservices using Spring Boot &amp; Hibernate","body":"<p>Maybe a better hibernate mapping :</p>\n<p>Task.java [task-service]</p>\n<pre><code>@Entity\n@NoArgsConstructor\n@AllArgsConstructor\n@Getter\n@Setter\n@EqualsAndHashCode(callSuper = true)\npublic class Task extends BaseEntity {\n\n    private String name, description;\n\n    @ManyToOne\n    private Lane lane;\n\n    @OneToMany(mappedBy=&quot;task&quot;)\n    private List&lt;TaskUser&gt; users;\n}\n</code></pre>\n<p>TaskUser.java [task-service]</p>\n<pre><code>@Entity\n@NoArgsConstructor\n@AllArgsConstructor\n@Data\n@EqualsAndHashCode\npublic class TaskUser {\n\n    @Id\n    private Long id;\n\n    @ManyToOne\n    @JoinColumn(name=&quot;task_id&quot;, nullable=false)\n    private Task task;\n\n    @Column(name = &quot;user_id&quot;)\n    private Long userId;\n }\n</code></pre>\n"}],"owner":{"account_id":13818443,"reputation":51,"user_id":9974520,"display_name":"mok_1"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":868,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69546944,"answer_count":2,"score":0,"last_activity_date":1634072526,"creation_date":1634059745,"question_id":69544696,"body_markdown":"So for this assignment, I&#39;m supposed to have 2 microservices (task-service &amp; user-service) with each having their own database.\r\nA task can have multiple users assigned it but multiple users can be assigned to multiple tasks so therefore it&#39;s a many-to-many relationship.\r\n\r\nBoth microservices are Spring Boot applications using Hibernate and I&#39;m struggling to make this relationship happen between task and user inside the task-service because I don&#39;t think it&#39;s a good idea to copy the user model that already exists in the user-service, over to the task-service.\r\n\r\nThis assignment assumes that there is consistency in the user-ids across both databases without using foreign keys.\r\n\r\nFor context:\r\n\r\n**Desired entity relationship diagram generated from Hibernate:**[![ERD][1]][1]\r\n\r\n\r\n**Task.java [task-service]**\r\n\r\n    @Entity\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @Getter\r\n    @Setter\r\n    @EqualsAndHashCode(callSuper = true)\r\n    public class Task extends BaseEntity {\r\n\r\n        private String name, description;\r\n\r\n        @ManyToOne\r\n        private Lane lane;\r\n\r\n        @OneToMany\r\n        private List&lt;TaskUser&gt; users;\r\n    }\r\n\r\n**TaskUser.java [task-service]**\r\n\r\n    @Entity\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @Data\r\n    @EqualsAndHashCode\r\n    public class TaskUser {\r\n\r\n        @Id\r\n        private Long id;\r\n\r\n        @Column(name = &quot;task_id&quot;)\r\n        private Long taskId;\r\n\r\n        @Column(name = &quot;user_id&quot;)\r\n        private Long userId;\r\n     }\r\n**User.java [user-service]**\r\n\r\n    @Entity\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @Data\r\n    @EqualsAndHashCode(callSuper = true)\r\n    @ToString(callSuper = true)\r\n    public class User extends BaseEntity {\r\n        @Column(unique = true)\r\n        private String username;\r\n    }\r\n\r\nCurrently, Hibernate is generating both a task_user &amp; task_users table inside the task-service database and I&#39;d like to just have 1 intermediate table instead of two.\r\n\r\n**Question**: How would I make this many-to-many relationship work with Hibernate whilst working with two different microservices?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/RxYCM.png","title":"Problems making a many-to-many relationship work across 2 microservices using Spring Boot &amp; Hibernate","body":"<p>So for this assignment, I'm supposed to have 2 microservices (task-service &amp; user-service) with each having their own database.\nA task can have multiple users assigned it but multiple users can be assigned to multiple tasks so therefore it's a many-to-many relationship.</p>\n<p>Both microservices are Spring Boot applications using Hibernate and I'm struggling to make this relationship happen between task and user inside the task-service because I don't think it's a good idea to copy the user model that already exists in the user-service, over to the task-service.</p>\n<p>This assignment assumes that there is consistency in the user-ids across both databases without using foreign keys.</p>\n<p>For context:</p>\n<p><strong>Desired entity relationship diagram generated from Hibernate:</strong><a href=\"https://i.stack.imgur.com/RxYCM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RxYCM.png\" alt=\"ERD\" /></a></p>\n<p><strong>Task.java [task-service]</strong></p>\n<pre><code>@Entity\n@NoArgsConstructor\n@AllArgsConstructor\n@Getter\n@Setter\n@EqualsAndHashCode(callSuper = true)\npublic class Task extends BaseEntity {\n\n    private String name, description;\n\n    @ManyToOne\n    private Lane lane;\n\n    @OneToMany\n    private List&lt;TaskUser&gt; users;\n}\n</code></pre>\n<p><strong>TaskUser.java [task-service]</strong></p>\n<pre><code>@Entity\n@NoArgsConstructor\n@AllArgsConstructor\n@Data\n@EqualsAndHashCode\npublic class TaskUser {\n\n    @Id\n    private Long id;\n\n    @Column(name = &quot;task_id&quot;)\n    private Long taskId;\n\n    @Column(name = &quot;user_id&quot;)\n    private Long userId;\n }\n</code></pre>\n<p><strong>User.java [user-service]</strong></p>\n<pre><code>@Entity\n@NoArgsConstructor\n@AllArgsConstructor\n@Data\n@EqualsAndHashCode(callSuper = true)\n@ToString(callSuper = true)\npublic class User extends BaseEntity {\n    @Column(unique = true)\n    private String username;\n}\n</code></pre>\n<p>Currently, Hibernate is generating both a task_user &amp; task_users table inside the task-service database and I'd like to just have 1 intermediate table instead of two.</p>\n<p><strong>Question</strong>: How would I make this many-to-many relationship work with Hibernate whilst working with two different microservices?</p>\n"},{"tags":["java","android","kotlin","android-workmanager"],"comments":[{"owner":{"account_id":39846,"reputation":991143,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1634072858,"post_id":69546982,"comment_id":122927218,"body_markdown":"You do not update the UI directly from a `Worker`, if that is what you mean. Instead, your UI [observes the work results](https://developer.android.com/topic/libraries/architecture/workmanager/how-to/managing-work#observing) or [observes progress in that work](https://developer.android.com/topic/libraries/architecture/workmanager/how-to/intermediate-progress).","body":"You do not update the UI directly from a <code>Worker</code>, if that is what you mean. Instead, your UI <a href=\"https://developer.android.com/topic/libraries/architecture/workmanager/how-to/managing-work#observing\" rel=\"nofollow noreferrer\">observes the work results</a> or <a href=\"https://developer.android.com/topic/libraries/architecture/workmanager/how-to/intermediate-progress\" rel=\"nofollow noreferrer\">observes progress in that work</a>."},{"owner":{"account_id":22053337,"reputation":49,"user_id":16317259,"display_name":"Kirion"},"score":0,"creation_date":1634076549,"post_id":69546982,"comment_id":122928151,"body_markdown":"@CommonsWare so then how do they update the UI on the image captures inside the database?","body":"@CommonsWare so then how do they update the UI on the image captures inside the database?"},{"owner":{"account_id":39846,"reputation":991143,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1634076712,"post_id":69546982,"comment_id":122928188,"body_markdown":"I do not know what &quot;image captures inside the database&quot; you are referring to.","body":"I do not know what &quot;image captures inside the database&quot; you are referring to."},{"owner":{"account_id":22053337,"reputation":49,"user_id":16317259,"display_name":"Kirion"},"score":0,"creation_date":1634076793,"post_id":69546982,"comment_id":122928203,"body_markdown":"@CommonsWare I just mentioned it as an example.","body":"@CommonsWare I just mentioned it as an example."}],"owner":{"account_id":22053337,"reputation":49,"user_id":16317259,"display_name":"Kirion"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":148,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1634072501,"creation_date":1634072501,"question_id":69546982,"body_markdown":"I can understand that this library is doing operations in the background, but what kind of operation is meant by these operations, backing up data or data that can update UI data ?\r\n\r\nBecause whenever I send information to update UI data, I encounter errors similar to the following.\r\n\r\nCan&#39;t toast on a thread that has not called Looper.prepare()\r\n\r\nunfortunately I think I couldn&#39;t understand the work manager structure somehow","title":"I guess I didn&#39;t understand the Work manager structure","body":"<p>I can understand that this library is doing operations in the background, but what kind of operation is meant by these operations, backing up data or data that can update UI data ?</p>\n<p>Because whenever I send information to update UI data, I encounter errors similar to the following.</p>\n<p>Can't toast on a thread that has not called Looper.prepare()</p>\n<p>unfortunately I think I couldn't understand the work manager structure somehow</p>\n"},{"tags":["java","key","mozilla","pkcs#11"],"comments":[{"owner":{"account_id":4788700,"reputation":1281,"user_id":3868464,"display_name":"Alexander"},"score":0,"creation_date":1634109863,"post_id":69546882,"comment_id":122934695,"body_markdown":"To extract secret key from provider in most cases you need first to `wrap` it. It is not a single-line command, but it is sequence of several calls to `PKCS#11` module.","body":"To extract secret key from provider in most cases you need first to <code>wrap</code> it. It is not a single-line command, but it is sequence of several calls to <code>PKCS#11</code> module."},{"owner":{"account_id":17816050,"reputation":3,"user_id":12939612,"display_name":"AZ19AGENT Minecraft"},"score":0,"creation_date":1634131063,"post_id":69546882,"comment_id":122943494,"body_markdown":"@Alexander Do you mean wrapping it as a Key?","body":"@Alexander Do you mean wrapping it as a Key?"},{"owner":{"account_id":4788700,"reputation":1281,"user_id":3868464,"display_name":"Alexander"},"score":0,"creation_date":1634149207,"post_id":69546882,"comment_id":122950872,"body_markdown":"Yes. Have a look at [this](https://stackoverflow.com/q/22663457/3868464).","body":"Yes. Have a look at <a href=\"https://stackoverflow.com/q/22663457/3868464\">this</a>."},{"owner":{"account_id":17816050,"reputation":3,"user_id":12939612,"display_name":"AZ19AGENT Minecraft"},"score":0,"creation_date":1634228109,"post_id":69546882,"comment_id":122974737,"body_markdown":"@Alexander this doesn&#39;t really help me because mine is with an NSS db and not a swap.","body":"@Alexander this doesn&#39;t really help me because mine is with an NSS db and not a swap."}],"owner":{"account_id":17816050,"reputation":3,"user_id":12939612,"display_name":"AZ19AGENT Minecraft"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":117,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1634071941,"creation_date":1634071941,"question_id":69546882,"body_markdown":"I have a mozilla NSSDB PKCS11, it includes one of three things. Certificates, keys, and SecretKeyEntry. I would like to know the content of a SecretKeyEntry with the alias &quot;StoreXKey&quot;. Firstly, is extracting the plaintext of a SecretKeyEntry possible? I seem to think so because of links: https://technosock.blogspot.com/2007/12/token-knowledge.html and https://docs.oracle.com/javase/8/docs/api/java/security/KeyStore.SecretKeyEntry.html#getSecretKey\r\n\r\nFirst link gives a way to do it ( which doesn&#39;t work for me ) the second link gives us a few methods, namely .getEncoded() which can supposedly be called on a SecretKeyEntry to get the byte array information.\r\n\r\nHere is my code thus far, all results hit a null pointer exception when using the getEncoded message. I am sure the SecretKeyEntry exists in the NSSDB.\r\n\r\n```\r\nString configFile = &quot;config.cfg&quot;;\r\nProvider provider = Security.getProvider(&quot;SunPKCS11&quot;); // I am confused on how to incorporate the config file as well.\r\n/* provider = provider.configure(configFile); // Does not work */\r\nSecurity.addProvider(provider);\r\n\r\nString defaultPIN = &quot;--.--.--.--.----.-...-.--&quot;;\r\ntry{\r\n   KeyStore ks = KeyStore.getInstance(&quot;PKCS11&quot;);\r\n   ks.load(null, defaultPIN.toCharArray());\r\n   KeyStore.SecretKeyEntry skEntry = (KeyStore.SecretKeyEntry) ks.getEntry(&quot;StoreXKey&quot;,null); // Do I need a password protector here?\r\n   System.out.println(new String(skEntry.getSecretKey().getEncoded())); &lt;-- Error is thrown here. \r\n}catch (Exception e){\r\n   e.printStackTrace();\r\n}\r\n```\r\n\r\nAny help / advice or links are appreciated. ","title":"How to get the plaintext of a Secret Key Entry in Mozilla NSSDB PKCS11?","body":"<p>I have a mozilla NSSDB PKCS11, it includes one of three things. Certificates, keys, and SecretKeyEntry. I would like to know the content of a SecretKeyEntry with the alias &quot;StoreXKey&quot;. Firstly, is extracting the plaintext of a SecretKeyEntry possible? I seem to think so because of links: <a href=\"https://technosock.blogspot.com/2007/12/token-knowledge.html\" rel=\"nofollow noreferrer\">https://technosock.blogspot.com/2007/12/token-knowledge.html</a> and <a href=\"https://docs.oracle.com/javase/8/docs/api/java/security/KeyStore.SecretKeyEntry.html#getSecretKey\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/security/KeyStore.SecretKeyEntry.html#getSecretKey</a></p>\n<p>First link gives a way to do it ( which doesn't work for me ) the second link gives us a few methods, namely .getEncoded() which can supposedly be called on a SecretKeyEntry to get the byte array information.</p>\n<p>Here is my code thus far, all results hit a null pointer exception when using the getEncoded message. I am sure the SecretKeyEntry exists in the NSSDB.</p>\n<pre><code>String configFile = &quot;config.cfg&quot;;\nProvider provider = Security.getProvider(&quot;SunPKCS11&quot;); // I am confused on how to incorporate the config file as well.\n/* provider = provider.configure(configFile); // Does not work */\nSecurity.addProvider(provider);\n\nString defaultPIN = &quot;--.--.--.--.----.-...-.--&quot;;\ntry{\n   KeyStore ks = KeyStore.getInstance(&quot;PKCS11&quot;);\n   ks.load(null, defaultPIN.toCharArray());\n   KeyStore.SecretKeyEntry skEntry = (KeyStore.SecretKeyEntry) ks.getEntry(&quot;StoreXKey&quot;,null); // Do I need a password protector here?\n   System.out.println(new String(skEntry.getSecretKey().getEncoded())); &lt;-- Error is thrown here. \n}catch (Exception e){\n   e.printStackTrace();\n}\n</code></pre>\n<p>Any help / advice or links are appreciated.</p>\n"},{"tags":["java","jdbc"],"comments":[{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1634075786,"post_id":69546876,"comment_id":122927973,"body_markdown":"The `com.sun.rowset` package is part of the standard Java Runtime (JDK/JRE) since Java 1.5. If you&#39;ve downloaded Java you already have this package.","body":"The <code>com.sun.rowset</code> package is part of the standard Java Runtime (JDK/JRE) since Java 1.5. If you&#39;ve downloaded Java you already have this package."},{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1634076990,"post_id":69546876,"comment_id":122928245,"body_markdown":"Which version of Java does the textbook assume you are using? And which version are you actually using? See related: [JAVA ERROR : package com.sun.rowset is not visible : com.sun.rowset is declared in module java.sql.rowset, which does not export it](https://stackoverflow.com/questions/48129475/java-error-package-com-sun-rowset-is-not-visible-com-sun-rowset-is-declared).","body":"Which version of Java does the textbook assume you are using? And which version are you actually using? See related: <a href=\"https://stackoverflow.com/questions/48129475/java-error-package-com-sun-rowset-is-not-visible-com-sun-rowset-is-declared\">JAVA ERROR : package com.sun.rowset is not visible : com.sun.rowset is declared in module java.sql.rowset, which does not export it</a>."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":4,"creation_date":1634079259,"post_id":69546876,"comment_id":122928725,"body_markdown":"Use a factory via [`RowSetProvider`](https://docs.oracle.com/en/java/javase/17/docs/api/java.sql.rowset/javax/sql/rowset/RowSetProvider.html) rather than directly addressing the implementation class. See Answers on [the Question](https://stackoverflow.com/questions/48129475/java-error-package-com-sun-rowset-is-not-visible-com-sun-rowset-is-declared) linked [by andrewJames](https://stackoverflow.com/questions/69546876/where-to-download-the-com-sun-package-in-java-in-order-to-use-com-sun-rowset-jdb?noredirect=1#comment122928245_69546876).","body":"Use a factory via <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.sql.rowset/javax/sql/rowset/RowSetProvider.html\" rel=\"nofollow noreferrer\"><code>RowSetProvider</code></a> rather than directly addressing the implementation class. See Answers on <a href=\"https://stackoverflow.com/questions/48129475/java-error-package-com-sun-rowset-is-not-visible-com-sun-rowset-is-declared\">the Question</a> linked <a href=\"https://stackoverflow.com/questions/69546876/where-to-download-the-com-sun-package-in-java-in-order-to-use-com-sun-rowset-jdb?noredirect=1#comment122928245_69546876\">by andrewJames</a>."},{"owner":{"account_id":17159463,"reputation":93,"user_id":12419467,"display_name":"korpe"},"score":0,"creation_date":1634081749,"post_id":69546876,"comment_id":122929200,"body_markdown":"I&#39;m using the latest jdk 17","body":"I&#39;m using the latest jdk 17"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1634086181,"post_id":69546876,"comment_id":122929944,"body_markdown":"And a very old book.","body":"And a very old book."},{"owner":{"account_id":17159463,"reputation":93,"user_id":12419467,"display_name":"korpe"},"score":0,"creation_date":1634669166,"post_id":69546876,"comment_id":123086194,"body_markdown":"Introduction to Java Programming and Data Structures, Comprehensive Version, 12th edition... I don&#39;t believe this is an old book.","body":"Introduction to Java Programming and Data Structures, Comprehensive Version, 12th edition... I don&#39;t believe this is an old book."},{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":0,"creation_date":1634669855,"post_id":69546876,"comment_id":123086473,"body_markdown":"That book was first published twenty-three years ago, in 1998, back when Java 1.1 (or maybe 1.2) was released. I&#39;m sure the book has been revised many times over the years - but it seems that this outdated information has not been corrected/updated, yet.","body":"That book was first published twenty-three years ago, in 1998, back when Java 1.1 (or maybe 1.2) was released. I&#39;m sure the book has been revised many times over the years - but it seems that this outdated information has not been corrected/updated, yet."}],"owner":{"account_id":17159463,"reputation":93,"user_id":12419467,"display_name":"korpe"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1634079159,"answer_count":0,"score":0,"last_activity_date":1634071895,"creation_date":1634071895,"question_id":69546876,"body_markdown":"In my textbook on a chapter on Advanced Java Databse programming they use \r\n\r\n    Rowset rs = new JdbcRowSetImpl();\r\n\r\nI&#39;ve been struggling to try to find out how to use the com.sun package. They do not mention how to use this package. Anyone knows where I can download the Jar file for this package?","title":"Where to download the com.sun package in Java in order to use com.sun.rowset.JdbcRowSetImpl?","body":"<p>In my textbook on a chapter on Advanced Java Databse programming they use</p>\n<pre><code>Rowset rs = new JdbcRowSetImpl();\n</code></pre>\n<p>I've been struggling to try to find out how to use the com.sun package. They do not mention how to use this package. Anyone knows where I can download the Jar file for this package?</p>\n"},{"tags":["java","spring","spring-boot","java-11","spring-security-ldap"],"comments":[{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":0,"creation_date":1568241904,"post_id":57897538,"comment_id":102216186,"body_markdown":"Which dependency did you expect to include that class? Note that `spring-ldap-core` is not security related, only LDAP related, i.e. it contains classes in package `org.springframework.ldap`, not in `org.springframework.security.ldap`","body":"Which dependency did you expect to include that class? Note that <code>spring-ldap-core</code> is not security related, only LDAP related, i.e. it contains classes in package <code>org.springframework.ldap</code>, not in <code>org.springframework.security.ldap</code>"}],"answers":[{"tags":[],"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1568242092,"creation_date":1568242092,"answer_id":57897709,"question_id":57897538,"body_markdown":"You need:\r\n\r\n&lt;!-- language: xml --&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-security-ldap&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;","title":"NoClassDefFoundError when specifying user filters","body":"<p>You need:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-security-ldap&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":13177851,"reputation":557,"user_id":9518232,"display_name":"Euklios"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2605,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":57897709,"answer_count":1,"score":1,"last_activity_date":1634071806,"creation_date":1568240631,"question_id":57897538,"body_markdown":"We are trying to build a spring application using LDAP for authentication, but once we overwrite the configure method within WebSecurityConfigurerAdapter, we get a NoClassDefFoundError.\r\n\r\nOur application is written in java11, we are using code-based/annotation-based configuration. We had some problems with the spring embedded LDAP server, so we switched to OpenLDAP. We verified the server using JXplorer.\r\n\r\nThis is how our current approach looks like:\r\n\r\n### LdapConfig.java\r\n```java\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.core.env.Environment;\r\nimport org.springframework.ldap.core.support.LdapContextSource;\r\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\r\n\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class LdapTestConfig extends WebSecurityConfigurerAdapter\r\n{\r\n\r\n  @Autowired\r\n  Environment env;\r\n\r\n  public LdapContextSource contextSource()\r\n  {\r\n    LdapContextSource contextSource = new LdapContextSource();\r\n\r\n    contextSource.setUrl(env.getRequiredProperty(&quot;ldap.url&quot;));\r\n    contextSource.setBase(env.getRequiredProperty(&quot;ldap.baseDn&quot;));\r\n    contextSource.setUserDn(env.getRequiredProperty(&quot;ldap.bindDn&quot;));\r\n    contextSource.setPassword(env.getRequiredProperty(&quot;ldap.password&quot;));\r\n    contextSource.afterPropertiesSet();\r\n    return contextSource;\r\n  }\r\n\r\n  // This is the method, causing my issue\r\n  @Override\r\n  protected void configure(AuthenticationManagerBuilder auth) throws Exception\r\n  {\r\n    auth.ldapAuthentication()\r\n        .userSearchFilter(&quot;(cn={0})&quot;)\r\n        .groupSearchBase(&quot;OU=Account Groups,OU=ITS Security&quot;)\r\n        .groupSearchFilter(&quot;(cn=AD-this-is-a-specific-group)&quot;)\r\n        .contextSource(contextSource());\r\n  }\r\n\r\n  @Override\r\n  protected void configure(HttpSecurity http) throws Exception\r\n  {\r\n    http.authorizeRequests().anyRequest().fullyAuthenticated().and().formLogin();\r\n  }\r\n}\r\n```\r\n\r\n### pom.xml\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n  &lt;parent&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    &lt;version&gt;2.1.6.RELEASE&lt;/version&gt;\r\n    &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n  &lt;/parent&gt;\r\n\r\n  ...\r\n\r\n  &lt;properties&gt;\r\n    &lt;java.version&gt;11&lt;/java.version&gt;\r\n  &lt;/properties&gt;\r\n\r\n  &lt;dependencies&gt;\r\n    &lt;!-- ldap related dependencies --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-aop&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.ldap&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-ldap-core&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n      &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n      &lt;optional&gt;true&lt;/optional&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n      &lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n      &lt;version&gt;1.4.193&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n  &lt;/dependencies&gt;\r\n\r\n  &lt;build&gt;\r\n    &lt;resources&gt;\r\n      &lt;resource&gt;\r\n        &lt;directory&gt;src/main/resources&lt;/directory&gt;\r\n      &lt;/resource&gt;\r\n    &lt;/resources&gt;\r\n    &lt;testResources&gt;\r\n      &lt;testResource&gt;\r\n        &lt;directory&gt;src/test/resources&lt;/directory&gt;\r\n      &lt;/testResource&gt;\r\n    &lt;/testResources&gt;\r\n\r\n    &lt;plugins&gt;\r\n      &lt;plugin&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n      &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n  &lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nThis is the full exception, we are getting:\r\n```\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;springSecurityFilterChain&#39; defined in class path resource [org/springframework/security/config/annotation/web/configuration/WebSecurityConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.servlet.Filter]: Factory method &#39;springSecurityFilterChain&#39; threw exception; nested exception is java.lang.NoClassDefFoundError: org/springframework/security/ldap/authentication/BindAuthenticator\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:627) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:456) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1321) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1160) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:555) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:515) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:307) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:845) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:877) ~[spring-context-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:549) ~[spring-context-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:140) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:742) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:389) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:311) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1213) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1202) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]\r\n\tat com.example.Main.main(Main.java:15) ~[classes/:na]\r\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.servlet.Filter]: Factory method &#39;springSecurityFilterChain&#39; threw exception; nested exception is java.lang.NoClassDefFoundError: org/springframework/security/ldap/authentication/BindAuthenticator\r\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.servlet.Filter]: Factory method &#39;springSecurityFilterChain&#39; threw exception; nested exception is java.lang.NoClassDefFoundError: org/springframework/security/ldap/authentication/BindAuthenticator\r\n\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:622) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\t... 21 common frames omitted\r\nCaused by: java.lang.NoClassDefFoundError: org/springframework/security/ldap/authentication/BindAuthenticator\r\n\tat org.springframework.security.config.annotation.authentication.configurers.ldap.LdapAuthenticationProviderConfigurer.createBindAuthenticator(LdapAuthenticationProviderConfigurer.java:217) ~[spring-security-config-5.1.5.RELEASE.jar:5.1.5.RELEASE]\r\n\tat org.springframework.security.config.annotation.authentication.configurers.ldap.LdapAuthenticationProviderConfigurer.createLdapAuthenticator(LdapAuthenticationProviderConfigurer.java:180) ~[spring-security-config-5.1.5.RELEASE.jar:5.1.5.RELEASE]\r\n\tat org.springframework.security.config.annotation.authentication.configurers.ldap.LdapAuthenticationProviderConfigurer.build(LdapAuthenticationProviderConfigurer.java:79) ~[spring-security-config-5.1.5.RELEASE.jar:5.1.5.RELEASE]\r\n\tat org.springframework.security.config.annotation.authentication.configurers.ldap.LdapAuthenticationProviderConfigurer.configure(LdapAuthenticationProviderConfigurer.java:376) ~[spring-security-config-5.1.5.RELEASE.jar:5.1.5.RELEASE]\r\n\tat org.springframework.security.config.annotation.authentication.configurers.ldap.LdapAuthenticationProviderConfigurer.configure(LdapAuthenticationProviderConfigurer.java:60) ~[spring-security-config-5.1.5.RELEASE.jar:5.1.5.RELEASE]\r\n\tat org.springframework.security.config.annotation.AbstractConfiguredSecurityBuilder.configure(AbstractConfiguredSecurityBuilder.java:384) ~[spring-security-config-5.1.5.RELEASE.jar:5.1.5.RELEASE]\r\n\tat org.springframework.security.config.annotation.AbstractConfiguredSecurityBuilder.doBuild(AbstractConfiguredSecurityBuilder.java:330) ~[spring-security-config-5.1.5.RELEASE.jar:5.1.5.RELEASE]\r\n\tat org.springframework.security.config.annotation.AbstractSecurityBuilder.build(AbstractSecurityBuilder.java:41) ~[spring-security-config-5.1.5.RELEASE.jar:5.1.5.RELEASE]\r\n\tat org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter.authenticationManager(WebSecurityConfigurerAdapter.java:272) ~[spring-security-config-5.1.5.RELEASE.jar:5.1.5.RELEASE]\r\n\tat org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter.getHttp(WebSecurityConfigurerAdapter.java:201) ~[spring-security-config-5.1.5.RELEASE.jar:5.1.5.RELEASE]\r\n\tat org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter.init(WebSecurityConfigurerAdapter.java:322) ~[spring-security-config-5.1.5.RELEASE.jar:5.1.5.RELEASE]\r\n\tat org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter.init(WebSecurityConfigurerAdapter.java:92) ~[spring-security-config-5.1.5.RELEASE.jar:5.1.5.RELEASE]\r\n\tat com.example.configuration.LdapTestConfig$$EnhancerBySpringCGLIB$$2d1196fe.init(&lt;generated&gt;) ~[classes/:na]\r\n\tat org.springframework.security.config.annotation.AbstractConfiguredSecurityBuilder.init(AbstractConfiguredSecurityBuilder.java:371) ~[spring-security-config-5.1.5.RELEASE.jar:5.1.5.RELEASE]\r\n\tat org.springframework.security.config.annotation.AbstractConfiguredSecurityBuilder.doBuild(AbstractConfiguredSecurityBuilder.java:325) ~[spring-security-config-5.1.5.RELEASE.jar:5.1.5.RELEASE]\r\n\tat org.springframework.security.config.annotation.AbstractSecurityBuilder.build(AbstractSecurityBuilder.java:41) ~[spring-security-config-5.1.5.RELEASE.jar:5.1.5.RELEASE]\r\n\tat org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration.springSecurityFilterChain(WebSecurityConfiguration.java:104) ~[spring-security-config-5.1.5.RELEASE.jar:5.1.5.RELEASE]\r\n\tat org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$$EnhancerBySpringCGLIB$$7461bda6.CGLIB$springSecurityFilterChain$2(&lt;generated&gt;) ~[spring-security-config-5.1.5.RELEASE.jar:5.1.5.RELEASE]\r\n\tat org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$$EnhancerBySpringCGLIB$$7461bda6$$FastClassBySpringCGLIB$$3dd2b63a.invoke(&lt;generated&gt;) ~[spring-security-config-5.1.5.RELEASE.jar:5.1.5.RELEASE]\r\n\tat org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:244) ~[spring-core-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\tat org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:363) ~[spring-context-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\tat org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$$EnhancerBySpringCGLIB$$7461bda6.springSecurityFilterChain(&lt;generated&gt;) ~[spring-security-config-5.1.5.RELEASE.jar:5.1.5.RELEASE]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\r\n\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\r\n\t... 22 common frames omitted\r\nCaused by: java.lang.ClassNotFoundException: org.springframework.security.ldap.authentication.BindAuthenticator\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:583) ~[na:na]\r\n\tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178) ~[na:na]\r\n\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521) ~[na:na]\r\n\t... 49 common frames omitted\r\n\r\nDisconnected from the target VM, address: &#39;127.0.0.1:51367&#39;, transport: &#39;socket&#39;\r\n\r\nProcess finished with exit code 1\r\n\r\n```","title":"NoClassDefFoundError when specifying user filters","body":"<p>We are trying to build a spring application using LDAP for authentication, but once we overwrite the configure method within WebSecurityConfigurerAdapter, we get a NoClassDefFoundError.</p>\n\n<p>Our application is written in java11, we are using code-based/annotation-based configuration. We had some problems with the spring embedded LDAP server, so we switched to OpenLDAP. We verified the server using JXplorer.</p>\n\n<p>This is how our current approach looks like:</p>\n\n<h3>LdapConfig.java</h3>\n\n<pre class=\"lang-java prettyprint-override\"><code>import org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.core.env.Environment;\nimport org.springframework.ldap.core.support.LdapContextSource;\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\n\n@Configuration\n@EnableWebSecurity\npublic class LdapTestConfig extends WebSecurityConfigurerAdapter\n{\n\n  @Autowired\n  Environment env;\n\n  public LdapContextSource contextSource()\n  {\n    LdapContextSource contextSource = new LdapContextSource();\n\n    contextSource.setUrl(env.getRequiredProperty(\"ldap.url\"));\n    contextSource.setBase(env.getRequiredProperty(\"ldap.baseDn\"));\n    contextSource.setUserDn(env.getRequiredProperty(\"ldap.bindDn\"));\n    contextSource.setPassword(env.getRequiredProperty(\"ldap.password\"));\n    contextSource.afterPropertiesSet();\n    return contextSource;\n  }\n\n  // This is the method, causing my issue\n  @Override\n  protected void configure(AuthenticationManagerBuilder auth) throws Exception\n  {\n    auth.ldapAuthentication()\n        .userSearchFilter(\"(cn={0})\")\n        .groupSearchBase(\"OU=Account Groups,OU=ITS Security\")\n        .groupSearchFilter(\"(cn=AD-this-is-a-specific-group)\")\n        .contextSource(contextSource());\n  }\n\n  @Override\n  protected void configure(HttpSecurity http) throws Exception\n  {\n    http.authorizeRequests().anyRequest().fullyAuthenticated().and().formLogin();\n  }\n}\n</code></pre>\n\n<h3>pom.xml</h3>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.1.6.RELEASE&lt;/version&gt;\n    &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n  &lt;/parent&gt;\n\n  ...\n\n  &lt;properties&gt;\n    &lt;java.version&gt;11&lt;/java.version&gt;\n  &lt;/properties&gt;\n\n  &lt;dependencies&gt;\n    &lt;!-- ldap related dependencies --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-aop&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-tx&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.ldap&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-ldap-core&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n      &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n      &lt;optional&gt;true&lt;/optional&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n      &lt;artifactId&gt;h2&lt;/artifactId&gt;\n      &lt;version&gt;1.4.193&lt;/version&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n\n  &lt;build&gt;\n    &lt;resources&gt;\n      &lt;resource&gt;\n        &lt;directory&gt;src/main/resources&lt;/directory&gt;\n      &lt;/resource&gt;\n    &lt;/resources&gt;\n    &lt;testResources&gt;\n      &lt;testResource&gt;\n        &lt;directory&gt;src/test/resources&lt;/directory&gt;\n      &lt;/testResource&gt;\n    &lt;/testResources&gt;\n\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>This is the full exception, we are getting:</p>\n\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'springSecurityFilterChain' defined in class path resource [org/springframework/security/config/annotation/web/configuration/WebSecurityConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.servlet.Filter]: Factory method 'springSecurityFilterChain' threw exception; nested exception is java.lang.NoClassDefFoundError: org/springframework/security/ldap/authentication/BindAuthenticator\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:627) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:456) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1321) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1160) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:555) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:515) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:307) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:845) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:877) ~[spring-context-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:549) ~[spring-context-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:140) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:742) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:389) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:311) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1213) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1202) ~[spring-boot-2.1.6.RELEASE.jar:2.1.6.RELEASE]\n    at com.example.Main.main(Main.java:15) ~[classes/:na]\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.servlet.Filter]: Factory method 'springSecurityFilterChain' threw exception; nested exception is java.lang.NoClassDefFoundError: org/springframework/security/ldap/authentication/BindAuthenticator\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.servlet.Filter]: Factory method 'springSecurityFilterChain' threw exception; nested exception is java.lang.NoClassDefFoundError: org/springframework/security/ldap/authentication/BindAuthenticator\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:622) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    ... 21 common frames omitted\nCaused by: java.lang.NoClassDefFoundError: org/springframework/security/ldap/authentication/BindAuthenticator\n    at org.springframework.security.config.annotation.authentication.configurers.ldap.LdapAuthenticationProviderConfigurer.createBindAuthenticator(LdapAuthenticationProviderConfigurer.java:217) ~[spring-security-config-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    at org.springframework.security.config.annotation.authentication.configurers.ldap.LdapAuthenticationProviderConfigurer.createLdapAuthenticator(LdapAuthenticationProviderConfigurer.java:180) ~[spring-security-config-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    at org.springframework.security.config.annotation.authentication.configurers.ldap.LdapAuthenticationProviderConfigurer.build(LdapAuthenticationProviderConfigurer.java:79) ~[spring-security-config-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    at org.springframework.security.config.annotation.authentication.configurers.ldap.LdapAuthenticationProviderConfigurer.configure(LdapAuthenticationProviderConfigurer.java:376) ~[spring-security-config-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    at org.springframework.security.config.annotation.authentication.configurers.ldap.LdapAuthenticationProviderConfigurer.configure(LdapAuthenticationProviderConfigurer.java:60) ~[spring-security-config-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    at org.springframework.security.config.annotation.AbstractConfiguredSecurityBuilder.configure(AbstractConfiguredSecurityBuilder.java:384) ~[spring-security-config-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    at org.springframework.security.config.annotation.AbstractConfiguredSecurityBuilder.doBuild(AbstractConfiguredSecurityBuilder.java:330) ~[spring-security-config-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    at org.springframework.security.config.annotation.AbstractSecurityBuilder.build(AbstractSecurityBuilder.java:41) ~[spring-security-config-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    at org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter.authenticationManager(WebSecurityConfigurerAdapter.java:272) ~[spring-security-config-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    at org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter.getHttp(WebSecurityConfigurerAdapter.java:201) ~[spring-security-config-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    at org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter.init(WebSecurityConfigurerAdapter.java:322) ~[spring-security-config-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    at org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter.init(WebSecurityConfigurerAdapter.java:92) ~[spring-security-config-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    at com.example.configuration.LdapTestConfig$$EnhancerBySpringCGLIB$$2d1196fe.init(&lt;generated&gt;) ~[classes/:na]\n    at org.springframework.security.config.annotation.AbstractConfiguredSecurityBuilder.init(AbstractConfiguredSecurityBuilder.java:371) ~[spring-security-config-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    at org.springframework.security.config.annotation.AbstractConfiguredSecurityBuilder.doBuild(AbstractConfiguredSecurityBuilder.java:325) ~[spring-security-config-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    at org.springframework.security.config.annotation.AbstractSecurityBuilder.build(AbstractSecurityBuilder.java:41) ~[spring-security-config-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration.springSecurityFilterChain(WebSecurityConfiguration.java:104) ~[spring-security-config-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$$EnhancerBySpringCGLIB$$7461bda6.CGLIB$springSecurityFilterChain$2(&lt;generated&gt;) ~[spring-security-config-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$$EnhancerBySpringCGLIB$$7461bda6$$FastClassBySpringCGLIB$$3dd2b63a.invoke(&lt;generated&gt;) ~[spring-security-config-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:244) ~[spring-core-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:363) ~[spring-context-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$$EnhancerBySpringCGLIB$$7461bda6.springSecurityFilterChain(&lt;generated&gt;) ~[spring-security-config-5.1.5.RELEASE.jar:5.1.5.RELEASE]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566) ~[na:na]\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:154) ~[spring-beans-5.1.8.RELEASE.jar:5.1.8.RELEASE]\n    ... 22 common frames omitted\nCaused by: java.lang.ClassNotFoundException: org.springframework.security.ldap.authentication.BindAuthenticator\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:583) ~[na:na]\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178) ~[na:na]\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521) ~[na:na]\n    ... 49 common frames omitted\n\nDisconnected from the target VM, address: '127.0.0.1:51367', transport: 'socket'\n\nProcess finished with exit code 1\n\n</code></pre>\n"},{"tags":["java","android","xamarin","xamarin.android"],"comments":[{"owner":{"account_id":14270806,"reputation":10859,"user_id":10308336,"display_name":"Jessie Zhang -MSFT"},"score":0,"creation_date":1633940978,"post_id":69489276,"comment_id":122884567,"body_markdown":"This is because there is some conflict between event types that come from more than one interface type that shares methods having identical names. To avoid this, you can try to use some metadata transformation.For more, check: https://learn.microsoft.com/en-us/xamarin/android/platform/binding-java-library/troubleshooting-bindings#problem-duplicate-custom-eventargs-types .","body":"This is because there is some conflict between event types that come from more than one interface type that shares methods having identical names. To avoid this, you can try to use some metadata transformation.For more, check: <a href=\"https://learn.microsoft.com/en-us/xamarin/android/platform/binding-java-library/troubleshooting-bindings#problem-duplicate-custom-eventargs-types\" rel=\"nofollow noreferrer\">learn.microsoft.com/en-us/xamarin/android/platform/&hellip;</a> ."},{"owner":{"account_id":22941844,"reputation":21,"user_id":17074477,"display_name":"Andr&#233;s Leandro"},"score":0,"creation_date":1633968460,"post_id":69489276,"comment_id":122895399,"body_markdown":"Thanks for the pointer, but, as I said on my question, if I use the Metadata.xml I end up affecting both duplicates, since their signatures are exactly the same. The example you linked doesn&#39;t apply here because the duplicate properties have a different signature (e.g. different class names); in my case, the duplicated events come from the same interface and appear out of nowhere.","body":"Thanks for the pointer, but, as I said on my question, if I use the Metadata.xml I end up affecting both duplicates, since their signatures are exactly the same. The example you linked doesn&#39;t apply here because the duplicate properties have a different signature (e.g. different class names); in my case, the duplicated events come from the same interface and appear out of nowhere."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1633980877,"post_id":69489276,"comment_id":122899629,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."},{"owner":{"account_id":3771579,"reputation":1789,"user_id":3133604,"accept_rate":55,"display_name":"undermind"},"score":0,"creation_date":1652284331,"post_id":69489276,"comment_id":127571021,"body_markdown":"Did you find the solution to this problem?","body":"Did you find the solution to this problem?"},{"owner":{"account_id":22941844,"reputation":21,"user_id":17074477,"display_name":"Andr&#233;s Leandro"},"score":0,"creation_date":1652375378,"post_id":69489276,"comment_id":127596899,"body_markdown":"@undermind I ended up removing the whole class with remove-node. It didn&#39;t reem to create any problems at compile time, but the project was handed off to someone else, so I don&#39;t know if this will fix the problem completely. Hope it helps!","body":"@undermind I ended up removing the whole class with remove-node. It didn&#39;t reem to create any problems at compile time, but the project was handed off to someone else, so I don&#39;t know if this will fix the problem completely. Hope it helps!"},{"owner":{"account_id":3771579,"reputation":1789,"user_id":3133604,"accept_rate":55,"display_name":"undermind"},"score":0,"creation_date":1652557054,"post_id":69489276,"comment_id":127636594,"body_markdown":"I didn&#39;t find a reason why these events are placed into the class that doesn&#39;t implement the corresponding interfaces, but I managed to fix the problem by renaming the events with the following rule &lt;attr path=&quot;/api/package[@name=&#39;package_name&#39;]/interface[@name=&#39;interface_name&#39;]/method[@name=&#39;old_conflicting_name&#39;]&quot; name=&quot;managedName&quot;&gt;new_unique_name&lt;/attr&gt;","body":"I didn&#39;t find a reason why these events are placed into the class that doesn&#39;t implement the corresponding interfaces, but I managed to fix the problem by renaming the events with the following rule &lt;attr path=&quot;/api/package[@name=&#39;package_name&#39;]/interface[@name=&#39;in&zwnj;&#8203;terface_name&#39;]/metho&zwnj;&#8203;d[@name=&#39;old_conflic&zwnj;&#8203;ting_name&#39;]&quot; name=&quot;managedName&quot;&gt;new_unique_name&lt;/attr&gt;"}],"owner":{"account_id":22941844,"reputation":21,"user_id":17074477,"display_name":"Andr&#233;s Leandro"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":140,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1634071552,"creation_date":1633654037,"question_id":69489276,"body_markdown":"I&#39;m attempting to create a Xamarin Binding Library for the [Android UseButton library][1]. I created my binding project, included the .aar and set Build Action = LibraryProjectZip. As was expected, a bunch of errors popped up and I&#39;ve managed to get rid of most using the Metadata.xml file, except for a bunch that follow the same pattern:\r\n\r\n&gt; Error\tCS0102\tThe type &#39;CrossBridgeCommunicator&#39; already contains a definition for &#39;WebViewDismiss&#39;\r\n\r\nI checked the CrossBridgeCommunicator class, and found it has 2 copies of about 12 events. Here&#39;s a snippet of one of these duplicates\r\n```\r\n#region &quot;Event implementation for Com.Usebutton.Sdk.Internal.Bridge.BridgeMessageParser.IListener&quot;\r\n...\r\npublic event EventHandler WebViewDismiss {\r\n\tadd {\r\n\t\tglobal::Java.Interop.EventHelper.AddEventHandler&lt;global::Com.Usebutton.Sdk.Internal.Bridge.BridgeMessageParser.IListener, global::Com.Usebutton.Sdk.Internal.Bridge.BridgeMessageParser.IListenerImplementor&gt;(\r\n\t\tref weak_implementor___SetMainBridge,\r\n\t\t__CreateIListenerImplementor,\r\n\t\t__v =&gt; MainBridge = __v,\r\n\t\t__h =&gt; __h.OnWebViewDismissHandler += value);\r\n\t}\r\n...\r\n}\r\n...\r\npublic event EventHandler WebViewDismiss {\r\n\tadd {\r\n\t\tglobal::Java.Interop.EventHelper.AddEventHandler&lt;global::Com.Usebutton.Sdk.Internal.Bridge.BridgeMessageParser.IListener, global::Com.Usebutton.Sdk.Internal.Bridge.BridgeMessageParser.IListenerImplementor&gt;(\r\n\t\tref weak_implementor___SetWidgetBridge,\r\n\t\t__CreateIListenerImplementor,\r\n\t\t__v =&gt; WidgetBridge = __v,\r\n\t\t__h =&gt; __h.OnWebViewDismissHandler += value);\r\n\t}\r\n...\r\n}\r\n```\r\nThe only difference between them is that they access different attributes in their bodies (the &quot;weak_implementor__&quot;). I checked the original class in a Java decompiler and it doesn&#39;t implement any of these events; in fact, it doesn&#39;t even implement the interface. What it does have are 2 fields of this interface type. I&#39;m guessing Xamarin creates these methods for some reason, but I don&#39;t know why or how. They don&#39;t even appear on the api.xml (nor do the fields).\r\n\r\nI tried to change the name of the events using the Metadata.xml file, but, since these events don&#39;t even exist in the Java class, I don&#39;t know how to find them. I even tried to remove the fields using &quot;remove-node&quot;, but am getting the warning no nodes matched. Does anyone know how can I change these events&#39; names? Again, they come from the same interface, but are created directly on the class that has 2 fields of the interface type.\r\n\r\nThanks in advance.\r\n\r\n\r\n  [1]: https://github.com/button/button-android","title":"Change the name of duplicated events in #region &quot;Event implementation for &lt;interface&gt;&quot; for Xamarin Android Binding library","body":"<p>I'm attempting to create a Xamarin Binding Library for the <a href=\"https://github.com/button/button-android\" rel=\"nofollow noreferrer\">Android UseButton library</a>. I created my binding project, included the .aar and set Build Action = LibraryProjectZip. As was expected, a bunch of errors popped up and I've managed to get rid of most using the Metadata.xml file, except for a bunch that follow the same pattern:</p>\n<blockquote>\n<p>Error CS0102  The type 'CrossBridgeCommunicator' already contains a definition for 'WebViewDismiss'</p>\n</blockquote>\n<p>I checked the CrossBridgeCommunicator class, and found it has 2 copies of about 12 events. Here's a snippet of one of these duplicates</p>\n<pre><code>#region &quot;Event implementation for Com.Usebutton.Sdk.Internal.Bridge.BridgeMessageParser.IListener&quot;\n...\npublic event EventHandler WebViewDismiss {\n    add {\n        global::Java.Interop.EventHelper.AddEventHandler&lt;global::Com.Usebutton.Sdk.Internal.Bridge.BridgeMessageParser.IListener, global::Com.Usebutton.Sdk.Internal.Bridge.BridgeMessageParser.IListenerImplementor&gt;(\n        ref weak_implementor___SetMainBridge,\n        __CreateIListenerImplementor,\n        __v =&gt; MainBridge = __v,\n        __h =&gt; __h.OnWebViewDismissHandler += value);\n    }\n...\n}\n...\npublic event EventHandler WebViewDismiss {\n    add {\n        global::Java.Interop.EventHelper.AddEventHandler&lt;global::Com.Usebutton.Sdk.Internal.Bridge.BridgeMessageParser.IListener, global::Com.Usebutton.Sdk.Internal.Bridge.BridgeMessageParser.IListenerImplementor&gt;(\n        ref weak_implementor___SetWidgetBridge,\n        __CreateIListenerImplementor,\n        __v =&gt; WidgetBridge = __v,\n        __h =&gt; __h.OnWebViewDismissHandler += value);\n    }\n...\n}\n</code></pre>\n<p>The only difference between them is that they access different attributes in their bodies (the &quot;weak_implementor__&quot;). I checked the original class in a Java decompiler and it doesn't implement any of these events; in fact, it doesn't even implement the interface. What it does have are 2 fields of this interface type. I'm guessing Xamarin creates these methods for some reason, but I don't know why or how. They don't even appear on the api.xml (nor do the fields).</p>\n<p>I tried to change the name of the events using the Metadata.xml file, but, since these events don't even exist in the Java class, I don't know how to find them. I even tried to remove the fields using &quot;remove-node&quot;, but am getting the warning no nodes matched. Does anyone know how can I change these events' names? Again, they come from the same interface, but are created directly on the class that has 2 fields of the interface type.</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","loops","infinite-loop"],"answers":[{"tags":[],"owner":{"account_id":982657,"reputation":101769,"user_id":1001985,"accept_rate":90,"display_name":"McGarnagle"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1379456480,"creation_date":1379456480,"answer_id":18860854,"question_id":18860827,"body_markdown":"Your `while` condition will never be false:\r\n\r\n    while (num&gt;=1 || num&lt;=11)\r\n\r\nEvery possible number is &gt;= 1 *or* &lt;= 11.  I guess you meant &quot;and&quot; instead of &quot;or&quot;.\r\n\r\nAlso, you need to put the code that sets `num` inside the while-loop.","title":"Multiplication Table For Loop","body":"<p>Your <code>while</code> condition will never be false:</p>\n\n<pre><code>while (num&gt;=1 || num&lt;=11)\n</code></pre>\n\n<p>Every possible number is >= 1 <em>or</em> &lt;= 11.  I guess you meant \"and\" instead of \"or\".</p>\n\n<p>Also, you need to put the code that sets <code>num</code> inside the while-loop.</p>\n"},{"tags":[],"owner":{"account_id":22836897,"reputation":11,"user_id":16984528,"display_name":"Gaurav Shinde"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634070880,"creation_date":1634059370,"answer_id":69544618,"question_id":18860827,"body_markdown":"\r\n```\r\n//To get a multiplication table for the number get from user \r\n\r\n\r\n#include&lt;stdio.h&gt;\r\nint main() {\r\n        \r\n    int i;\r\n    int num;\r\n    scanf(&quot;%d&quot;,&amp;num);\r\n\r\n    for(i=1; i&lt;=10; i++){\r\n        printf(&quot;%d\\n&quot;,i*num);\r\n    }\r\n    \r\n    \r\n    return 0;\r\n}\r\n```","title":"Multiplication Table For Loop","body":"<pre><code>//To get a multiplication table for the number get from user \n\n\n#include&lt;stdio.h&gt;\nint main() {\n        \n    int i;\n    int num;\n    scanf(&quot;%d&quot;,&amp;num);\n\n    for(i=1; i&lt;=10; i++){\n        printf(&quot;%d\\n&quot;,i*num);\n    }\n    \n    \n    return 0;\n}\n</code></pre>\n"}],"owner":{"account_id":3289964,"reputation":71,"user_id":2768501,"accept_rate":75,"display_name":"user2768501"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4286,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":18860854,"answer_count":2,"score":0,"last_activity_date":1634070880,"creation_date":1379456345,"question_id":18860827,"body_markdown":"This is the code I wrote; it&#39;s going into an infinite loop and I don&#39;t know why..\r\n\r\n    import java.io.*;\r\n\r\n\tpublic class Multi{\r\n\t\tpublic static void main(String args[])throws IOException{\r\n\r\n\t\tint num;\r\n\t\tBufferedReader inpt = new BufferedReader (new InputStreamReader (System.in));\r\n\r\n\t\tSystem.out.print(&quot;Enter a number: &quot;);\r\n\t\tnum=Integer.parseInt(inpt.readLine());\r\n\r\n\t\tint z,x,y;\r\n\r\n\t\twhile (num&gt;=1 || num&lt;=11){\r\n\t\t\tfor(z=1; z&lt;=num; z++){\r\n\t\t\t\tfor(x=1; x&lt;=z; x++){\r\n\r\n\t\t\t\t\ty=z*x;\r\n\r\n\t\t\t\t\tSystem.out.print(y+&quot; &quot;);\r\n\r\n\t\t\t\t}\r\n\t\t\t\tSystem.out.println();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\r\n \t  }\r\n    }\r\n\r\nThe output I want to show in this one is that when a person inputs a number it will display a multiplication table.\r\n\r\ne.g. \r\n\r\n    Enter a number: 5\r\n    \r\n    Result:\r\n    \r\n     - 1 2 3 4 5\r\n     - 2 4 6 8 10\r\n     - 3 6 9 12 15\r\n     - 4 8 12 16 20\r\n     - 5 10 15 20 25\r\n    \r\n    Enter a number: 3\r\n    \r\n     - 1 2 3\r\n     - 2 4 6\r\n     - 3 6 9\r\n\r\n","title":"Multiplication Table For Loop","body":"<p>This is the code I wrote; it's going into an infinite loop and I don't know why..</p>\n\n<pre><code>import java.io.*;\n\npublic class Multi{\n    public static void main(String args[])throws IOException{\n\n    int num;\n    BufferedReader inpt = new BufferedReader (new InputStreamReader (System.in));\n\n    System.out.print(\"Enter a number: \");\n    num=Integer.parseInt(inpt.readLine());\n\n    int z,x,y;\n\n    while (num&gt;=1 || num&lt;=11){\n        for(z=1; z&lt;=num; z++){\n            for(x=1; x&lt;=z; x++){\n\n                y=z*x;\n\n                System.out.print(y+\" \");\n\n            }\n            System.out.println();\n        }\n\n    }\n\n  }\n}\n</code></pre>\n\n<p>The output I want to show in this one is that when a person inputs a number it will display a multiplication table.</p>\n\n<p>e.g. </p>\n\n<pre><code>Enter a number: 5\n\nResult:\n\n - 1 2 3 4 5\n - 2 4 6 8 10\n - 3 6 9 12 15\n - 4 8 12 16 20\n - 5 10 15 20 25\n\nEnter a number: 3\n\n - 1 2 3\n - 2 4 6\n - 3 6 9\n</code></pre>\n"},{"tags":["java","spring-boot","rest","swagger"],"comments":[{"owner":{"account_id":1223835,"reputation":75858,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1634069635,"post_id":69546038,"comment_id":122926321,"body_markdown":"Spring has extensive auto-conversion capabilities for you. Don&#39;t manually handle `JSONArray`, use `List&lt;String&gt;`.","body":"Spring has extensive auto-conversion capabilities for you. Don&#39;t manually handle <code>JSONArray</code>, use <code>List&lt;String&gt;</code>."},{"owner":{"account_id":6371336,"reputation":113,"user_id":4943652,"display_name":"Arnab Ghosh"},"score":0,"creation_date":1634069865,"post_id":69546038,"comment_id":122926381,"body_markdown":"Hi, thanks, but I want to get the kind of API in second picture to enter the array like [&quot;a&quot;,&quot;b&quot;,&quot;c&quot;]. But I get the one with the add button like in the first pic . Any solution for that?","body":"Hi, thanks, but I want to get the kind of API in second picture to enter the array like [&quot;a&quot;,&quot;b&quot;,&quot;c&quot;]. But I get the one with the add button like in the first pic . Any solution for that?"}],"answers":[{"tags":[],"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634070848,"creation_date":1634067396,"answer_id":69546111,"question_id":69546038,"body_markdown":"String Array\r\n\r\nFrontend Pass with HTTP request\r\n\r\n    [a,b,c]\r\n\r\nBackend receive in controller methods\r\n\r\n    @RequestParam String[] ids\r\n    @RequestParam List&lt;String&gt; ids\r\n\r\n\r\nAnd I dont see you defining which request parameter name it should be looking at?\r\n\r\nExample:  \r\n\r\n\r\n    public String inputControllerMethod(@RequestParam(value=&quot;myParam&quot;) List&lt;String&gt; myParam){\r\n    \r\n    }\r\n\r\n=== Edited ===\r\n\r\n**You can&#39;t.**\r\n\r\nUsing the [Add String Item] button you must insert 1 String at a time.\r\n\r\n\r\nHowever if they are not Strings, but rather an Array of Objects, then swagger allows you to write the array:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nUse this https://editor.swagger.io/#/ to see an example.\r\n\r\nDocumentation: https://swagger.io/docs/specification/2-0/describing-parameters/\r\n\r\n\r\nYour other option also if you really dont want the user to enter and you are limited by specific options is an enum:\r\n\r\n    parameters:\r\n      - name: &quot;status&quot;\r\n        in: &quot;query&quot;\r\n        description: &quot;Status values that need to be considered for filter&quot;\r\n        required: true\r\n        type: &quot;array&quot;\r\n        items:\r\n          type: &quot;string&quot;\r\n          enum:\r\n            - &quot;placed&quot;\r\n            - &quot;approved&quot;\r\n\r\nThen the user simply selects multiple/all options:\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1fGLp.png\r\n  [2]: https://i.stack.imgur.com/8w0jk.png","title":"Input a JSONArray into swagger API for a springboot controller","body":"<p>String Array</p>\n<p>Frontend Pass with HTTP request</p>\n<pre><code>[a,b,c]\n</code></pre>\n<p>Backend receive in controller methods</p>\n<pre><code>@RequestParam String[] ids\n@RequestParam List&lt;String&gt; ids\n</code></pre>\n<p>And I dont see you defining which request parameter name it should be looking at?</p>\n<p>Example:</p>\n<pre><code>public String inputControllerMethod(@RequestParam(value=&quot;myParam&quot;) List&lt;String&gt; myParam){\n\n}\n</code></pre>\n<p>=== Edited ===</p>\n<p><strong>You can't.</strong></p>\n<p>Using the [Add String Item] button you must insert 1 String at a time.</p>\n<p>However if they are not Strings, but rather an Array of Objects, then swagger allows you to write the array:</p>\n<p><a href=\"https://i.stack.imgur.com/1fGLp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1fGLp.png\" alt=\"enter image description here\" /></a></p>\n<p>Use this <a href=\"https://editor.swagger.io/#/\" rel=\"nofollow noreferrer\">https://editor.swagger.io/#/</a> to see an example.</p>\n<p>Documentation: <a href=\"https://swagger.io/docs/specification/2-0/describing-parameters/\" rel=\"nofollow noreferrer\">https://swagger.io/docs/specification/2-0/describing-parameters/</a></p>\n<p>Your other option also if you really dont want the user to enter and you are limited by specific options is an enum:</p>\n<pre><code>parameters:\n  - name: &quot;status&quot;\n    in: &quot;query&quot;\n    description: &quot;Status values that need to be considered for filter&quot;\n    required: true\n    type: &quot;array&quot;\n    items:\n      type: &quot;string&quot;\n      enum:\n        - &quot;placed&quot;\n        - &quot;approved&quot;\n</code></pre>\n<p>Then the user simply selects multiple/all options:</p>\n<p><a href=\"https://i.stack.imgur.com/8w0jk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8w0jk.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":6371336,"reputation":113,"user_id":4943652,"display_name":"Arnab Ghosh"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":895,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1634070848,"creation_date":1634066940,"question_id":69546038,"body_markdown":"I am new to using springboot and swagger, so not very familiar with this stuff. But what I want to do is to input a JSONArray into a swagger API and get the input into a controller. So, I have the following controller code:\r\n```\r\n@RestController\r\npublic class NameRegisterController{\r\n  @Autowired\r\n  private NameRegisterService service;\r\n  \r\n  @Postmapping(path=&quot;/control&quot;)\r\n  public void NameRegisterAdd(@RequestParam JSONArray NameList)\r\n  {\r\n    service.addNames(NameList);\r\n  }\r\n}\r\n```\r\nHere, addNames is a function which takes JSONArray as input. When I go to the swagger API, I add the input as:\r\n```\r\n[&quot;name1&quot;,&quot;name2&quot;,&quot;name3&quot;]\r\n```\r\nUnfortunately, when I execute, I get the error \r\n```\r\n&quot;ConversionFailedException: Failed to convert from type[java.lang.String] to type [@org.springframework.web.bind.RequestParam org.json.JSONArray] for value &#39;name1&#39;; nested exception is org.json.JSONException: JSONArray test must start with &#39;[&#39; at 1 [character 2 line 1&quot;\r\n```\r\nI don&#39;t get it because the first character of my input is &quot;[&quot; as put in the swagger API. Would be very grateful if someone can provide some help.\r\nMy swagger is in my work environment, so am inserting similar pictures from the internet.\r\n\r\n\r\n[![This is what I get][1]][1]\r\n[![This is what I want][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/7roCM.png\r\n  [2]: https://i.stack.imgur.com/HKn7x.jpg\r\nThe first pic is what I get. The second pic is what I want","title":"Input a JSONArray into swagger API for a springboot controller","body":"<p>I am new to using springboot and swagger, so not very familiar with this stuff. But what I want to do is to input a JSONArray into a swagger API and get the input into a controller. So, I have the following controller code:</p>\n<pre><code>@RestController\npublic class NameRegisterController{\n  @Autowired\n  private NameRegisterService service;\n  \n  @Postmapping(path=&quot;/control&quot;)\n  public void NameRegisterAdd(@RequestParam JSONArray NameList)\n  {\n    service.addNames(NameList);\n  }\n}\n</code></pre>\n<p>Here, addNames is a function which takes JSONArray as input. When I go to the swagger API, I add the input as:</p>\n<pre><code>[&quot;name1&quot;,&quot;name2&quot;,&quot;name3&quot;]\n</code></pre>\n<p>Unfortunately, when I execute, I get the error</p>\n<pre><code>&quot;ConversionFailedException: Failed to convert from type[java.lang.String] to type [@org.springframework.web.bind.RequestParam org.json.JSONArray] for value 'name1'; nested exception is org.json.JSONException: JSONArray test must start with '[' at 1 [character 2 line 1&quot;\n</code></pre>\n<p>I don't get it because the first character of my input is &quot;[&quot; as put in the swagger API. Would be very grateful if someone can provide some help.\nMy swagger is in my work environment, so am inserting similar pictures from the internet.</p>\n<p><a href=\"https://i.stack.imgur.com/7roCM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7roCM.png\" alt=\"This is what I get\" /></a>\n<a href=\"https://i.stack.imgur.com/HKn7x.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HKn7x.jpg\" alt=\"This is what I want\" /></a></p>\n<p>The first pic is what I get. The second pic is what I want</p>\n"},{"tags":["java","loops","input","while-loop","user-input"],"answers":[{"tags":[],"owner":{"account_id":2179728,"reputation":73047,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1634070104,"creation_date":1634070104,"answer_id":69546583,"question_id":69546488,"body_markdown":"The problem is because of the missing `{...}` for the `while` loop.\r\n\r\nIt should be \r\n\r\n    while (someNumber &lt; 0 || someNumber &gt; 5) {\r\n\t    System.out.print(&quot;Enter a number from 0 to 5: &quot;);\r\n\t\tsomeNumber = scanner.nextInt();\r\n\t\tif (someNumber &lt; 0 || someNumber &gt; 5) {\r\n\t\t\tSystem.out.println(&quot;Invalid data. You must enter a number from 0 to 5. Try again.&quot;);\r\n\t\t}\r\n\t\t// some code that needs someNumber to be a number from 0 to 5... \r\n    }\r\n\r\nBecause of the missing bracket, only the following statement \r\n\r\n    System.out.println(&quot;Enter a number from 0 to 5&quot;);\r\n\r\nis in the scope of the `while` loop.","title":"Java Scanner.nextInt() gets skipped?","body":"<p>The problem is because of the missing <code>{...}</code> for the <code>while</code> loop.</p>\n<p>It should be</p>\n<pre><code>while (someNumber &lt; 0 || someNumber &gt; 5) {\n    System.out.print(&quot;Enter a number from 0 to 5: &quot;);\n    someNumber = scanner.nextInt();\n    if (someNumber &lt; 0 || someNumber &gt; 5) {\n        System.out.println(&quot;Invalid data. You must enter a number from 0 to 5. Try again.&quot;);\n    }\n    // some code that needs someNumber to be a number from 0 to 5... \n}\n</code></pre>\n<p>Because of the missing bracket, only the following statement</p>\n<pre><code>System.out.println(&quot;Enter a number from 0 to 5&quot;);\n</code></pre>\n<p>is in the scope of the <code>while</code> loop.</p>\n"},{"tags":[],"owner":{"account_id":23015420,"reputation":9,"user_id":17137277,"display_name":"deved"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634070303,"creation_date":1634070303,"answer_id":69546615,"question_id":69546488,"body_markdown":"So, basically the condition `while(someNumber &lt; 0 || someNumber &gt; 5)` is always true because you initiated the variable &quot;someNumber&quot; with the value -1. What you wanna do is contain both the `System.out.println(&quot;Enter a number from 0 to 5&quot;);` and the `someNumber=scanner.nextInt();` in the `while` instruction using semicolons in order to let the someNumber variable change its value.\r\n\r\nThe code should look like:\r\n\r\n    import java.util.Scanner;\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            //some code...\r\n            Scanner scanner = new Scanner (System.in);\r\n            int someNumber = -1;\r\n            while(someNumber &lt; 0 || someNumber &gt; 100){\r\n                System.out.println(&quot;Enter a number from 0 to 5&quot;);\r\n                someNumber=scanner.nextInt();\r\n            }\r\n            if(someNumber &lt; 0 || someNumber &gt; 5){\r\n                System.out.println(&quot;Invalid data. You must enter a number from 0 to 5. Try again.&quot;);\r\n            }\r\n            // some code that needs someNumber to be a number from 0 to 5...\r\n        }\r\n    }","title":"Java Scanner.nextInt() gets skipped?","body":"<p>So, basically the condition <code>while(someNumber &lt; 0 || someNumber &gt; 5)</code> is always true because you initiated the variable &quot;someNumber&quot; with the value -1. What you wanna do is contain both the <code>System.out.println(&quot;Enter a number from 0 to 5&quot;);</code> and the <code>someNumber=scanner.nextInt();</code> in the <code>while</code> instruction using semicolons in order to let the someNumber variable change its value.</p>\n<p>The code should look like:</p>\n<pre><code>import java.util.Scanner;\npublic class Main {\n    public static void main(String[] args) {\n        //some code...\n        Scanner scanner = new Scanner (System.in);\n        int someNumber = -1;\n        while(someNumber &lt; 0 || someNumber &gt; 100){\n            System.out.println(&quot;Enter a number from 0 to 5&quot;);\n            someNumber=scanner.nextInt();\n        }\n        if(someNumber &lt; 0 || someNumber &gt; 5){\n            System.out.println(&quot;Invalid data. You must enter a number from 0 to 5. Try again.&quot;);\n        }\n        // some code that needs someNumber to be a number from 0 to 5...\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":22731676,"reputation":45,"user_id":16894486,"display_name":"alex angulo"},"comment_count":0,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":207,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1634086804,"answer_count":2,"score":1,"last_activity_date":1634070542,"creation_date":1634069543,"question_id":69546488,"body_markdown":"I wrote some code that needs an int variable to hold a value between 0 and 5, and I wrote a while loop to validate that the user inputs a valid value (0 to 5), to do so, like this:\r\n\r\n    import java.util.Scanner;\r\n    public class ZeroToFive {\r\n    public static void main(String[] args) {\r\n        //some code...\r\n        Scanner scanner = new Scanner (System.in);\r\n        int someNumber = -1;  \r\n        while(someNumber &lt; 0 || someNumber &gt; 5)\r\n                System.out.println(&quot;Enter a number from 0 to 5&quot;);\r\n                someNumber=scanner.nextInt();\r\n                if(someNumber &lt; 0 || someNumber &gt; 5){\r\n                    System.out.println(&quot;Invalid data. You must enter a number from 0 to 5. Try again.&quot;);\r\n                }\r\n         // some code that needs someNumber to be a number from 0 to 5...       \r\n        } \r\n    }\r\n\r\nThe plan is to update the someNumber variable with the user input, but the loop keeps running without stopping to read the nextInt(). \r\n\r\nOutput:\r\nEnter a number from 0 to 5\r\nEnter a number from 0 to 5\r\nEnter a number from 0 to 5\r\nEnter a number from 0 to 5\r\nEnter a number from 0 to 5\r\n... (forever)\r\n\r\nWhy the loop does not stop to read the nextInt() from the user?","title":"Java Scanner.nextInt() gets skipped?","body":"<p>I wrote some code that needs an int variable to hold a value between 0 and 5, and I wrote a while loop to validate that the user inputs a valid value (0 to 5), to do so, like this:</p>\n<pre><code>import java.util.Scanner;\npublic class ZeroToFive {\npublic static void main(String[] args) {\n    //some code...\n    Scanner scanner = new Scanner (System.in);\n    int someNumber = -1;  \n    while(someNumber &lt; 0 || someNumber &gt; 5)\n            System.out.println(&quot;Enter a number from 0 to 5&quot;);\n            someNumber=scanner.nextInt();\n            if(someNumber &lt; 0 || someNumber &gt; 5){\n                System.out.println(&quot;Invalid data. You must enter a number from 0 to 5. Try again.&quot;);\n            }\n     // some code that needs someNumber to be a number from 0 to 5...       \n    } \n}\n</code></pre>\n<p>The plan is to update the someNumber variable with the user input, but the loop keeps running without stopping to read the nextInt().</p>\n<p>Output:\nEnter a number from 0 to 5\nEnter a number from 0 to 5\nEnter a number from 0 to 5\nEnter a number from 0 to 5\nEnter a number from 0 to 5\n... (forever)</p>\n<p>Why the loop does not stop to read the nextInt() from the user?</p>\n"},{"tags":["java","uml","plantuml"],"answers":[{"tags":[],"owner":{"account_id":5203,"reputation":15153,"user_id":8261,"accept_rate":78,"display_name":"Rich"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1634069787,"creation_date":1634069787,"answer_id":69546540,"question_id":69508989,"body_markdown":"It doesn&#39;t look to me like PlantUML is designed to be used in this way: the API isn&#39;t documented. Having said that, it&#39;s an open source project, so you can download the sources and follow the execution for a given UML string, then recreate that execution with method calls avoiding the UML source, if that&#39;s what you need. If you have a debugger that can step through third party code, like IntelliJ, that will help a lot.\r\n\r\nI had a little go at that. Here&#39;s a class which will generate the &quot;Bob -&gt; Alice : hello&quot; diagram using the Java API without going via UML source string. I included the UML string version for comparison:\r\n\r\n```\r\nimport net.sourceforge.plantuml.FileFormat;\r\nimport net.sourceforge.plantuml.FileFormatOption;\r\nimport net.sourceforge.plantuml.SourceStringReader;\r\nimport net.sourceforge.plantuml.core.ImageData;\r\nimport net.sourceforge.plantuml.cucadiagram.Display;\r\nimport net.sourceforge.plantuml.sequencediagram.Message;\r\nimport net.sourceforge.plantuml.sequencediagram.Participant;\r\nimport net.sourceforge.plantuml.sequencediagram.SequenceDiagram;\r\nimport net.sourceforge.plantuml.sequencediagram.SequenceDiagramFactory;\r\nimport net.sourceforge.plantuml.skin.ArrowConfiguration;\r\n\r\nimport java.io.File;\r\nimport java.io.FileOutputStream;\r\nimport java.io.IOException;\r\nimport java.io.OutputStream;\r\n\r\nimport static com.google.common.base.Preconditions.checkState;\r\n\r\npublic class PlantUMLDemoMain {\r\n    public static void main(String[] args) throws Exception {\r\n        generateFromStringSource(new File(&quot;from-string.png&quot;));\r\n        generateFromApi(new File(&quot;from-api.png&quot;));\r\n    }\r\n\r\n    private static void generateFromApi(File file) throws IOException {\r\n        // 1. setup:\r\n        SequenceDiagramFactory f = new SequenceDiagramFactory();\r\n        SequenceDiagram diagram = f.createEmptyDiagram();\r\n\r\n        // 2. Build the diagram:\r\n        // &quot;Bob -&gt; Alice : hello&quot;\r\n        // See net.sourceforge.plantuml.sequencediagram.command.CommandArrow#executeArg\r\n        Display bobD = Display.getWithNewlines(&quot;Bob&quot;);\r\n        Participant bobP = diagram.getOrCreateParticipant(&quot;Bob&quot;, bobD);\r\n\r\n        Display aliceD = Display.getWithNewlines(&quot;Alice&quot;);\r\n        Participant aliceP = diagram.getOrCreateParticipant(&quot;Alice&quot;, aliceD);\r\n\r\n        Display label = Display.getWithNewlines(&quot;hello&quot;);\r\n        ArrowConfiguration config = ArrowConfiguration.withDirectionNormal();\r\n\r\n        Message msg = new Message(bobP, aliceP, label, config, diagram.getNextMessageNumber());\r\n\r\n        checkState(null == diagram.addMessage(msg));\r\n\r\n        // 3. Output the diagram\r\n        // See net.sourceforge.plantuml.SourceStringReader#generateImage\r\n        diagram.makeDiagramReady();\r\n        checkState(1 == diagram.getNbImages());\r\n        try (OutputStream os = new FileOutputStream(file)) {\r\n            ImageData imageData = diagram.exportDiagram(os, 0, new FileFormatOption(FileFormat.PNG));\r\n            System.out.println(&quot;generateFromApi: &quot; + diagram.getDescription().getDescription());\r\n        }\r\n    }\r\n\r\n    private static void generateFromStringSource(File file) throws IOException {\r\n        String source = &quot;@startuml\\n&quot;;\r\n        source += &quot;Bob -&gt; Alice : hello\\n&quot;;\r\n        source += &quot;@enduml\\n&quot;;\r\n\r\n        SourceStringReader reader = new SourceStringReader(source);\r\n        // Write the first image to &quot;png&quot;\r\n        String desc = reader.generateImage(file);\r\n        // Return a null string if no generation\r\n        System.out.println(&quot;generateFromStringSource: &quot; + desc);\r\n    }\r\n}\r\n```\r\n\r\nThis will build with a `build.sbt` file like this:\r\n\r\n```\r\nlibraryDependencies += &quot;net.sourceforge.plantuml&quot; % &quot;plantuml&quot; % &quot;8059&quot;\r\nlibraryDependencies += &quot;com.google.guava&quot; % &quot;guava&quot; % &quot;31.0.1-jre&quot;\r\n```\r\n\r\nThe output of `generateFromApi` is identical to `generateFromStringSource` and looks like this:\r\n\r\n[![from-api.png][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/yzfue.png","title":"How to create PlantUML diagram using Java API without using PlantUML diagram code?","body":"<p>It doesn't look to me like PlantUML is designed to be used in this way: the API isn't documented. Having said that, it's an open source project, so you can download the sources and follow the execution for a given UML string, then recreate that execution with method calls avoiding the UML source, if that's what you need. If you have a debugger that can step through third party code, like IntelliJ, that will help a lot.</p>\n<p>I had a little go at that. Here's a class which will generate the &quot;Bob -&gt; Alice : hello&quot; diagram using the Java API without going via UML source string. I included the UML string version for comparison:</p>\n<pre><code>import net.sourceforge.plantuml.FileFormat;\nimport net.sourceforge.plantuml.FileFormatOption;\nimport net.sourceforge.plantuml.SourceStringReader;\nimport net.sourceforge.plantuml.core.ImageData;\nimport net.sourceforge.plantuml.cucadiagram.Display;\nimport net.sourceforge.plantuml.sequencediagram.Message;\nimport net.sourceforge.plantuml.sequencediagram.Participant;\nimport net.sourceforge.plantuml.sequencediagram.SequenceDiagram;\nimport net.sourceforge.plantuml.sequencediagram.SequenceDiagramFactory;\nimport net.sourceforge.plantuml.skin.ArrowConfiguration;\n\nimport java.io.File;\nimport java.io.FileOutputStream;\nimport java.io.IOException;\nimport java.io.OutputStream;\n\nimport static com.google.common.base.Preconditions.checkState;\n\npublic class PlantUMLDemoMain {\n    public static void main(String[] args) throws Exception {\n        generateFromStringSource(new File(&quot;from-string.png&quot;));\n        generateFromApi(new File(&quot;from-api.png&quot;));\n    }\n\n    private static void generateFromApi(File file) throws IOException {\n        // 1. setup:\n        SequenceDiagramFactory f = new SequenceDiagramFactory();\n        SequenceDiagram diagram = f.createEmptyDiagram();\n\n        // 2. Build the diagram:\n        // &quot;Bob -&gt; Alice : hello&quot;\n        // See net.sourceforge.plantuml.sequencediagram.command.CommandArrow#executeArg\n        Display bobD = Display.getWithNewlines(&quot;Bob&quot;);\n        Participant bobP = diagram.getOrCreateParticipant(&quot;Bob&quot;, bobD);\n\n        Display aliceD = Display.getWithNewlines(&quot;Alice&quot;);\n        Participant aliceP = diagram.getOrCreateParticipant(&quot;Alice&quot;, aliceD);\n\n        Display label = Display.getWithNewlines(&quot;hello&quot;);\n        ArrowConfiguration config = ArrowConfiguration.withDirectionNormal();\n\n        Message msg = new Message(bobP, aliceP, label, config, diagram.getNextMessageNumber());\n\n        checkState(null == diagram.addMessage(msg));\n\n        // 3. Output the diagram\n        // See net.sourceforge.plantuml.SourceStringReader#generateImage\n        diagram.makeDiagramReady();\n        checkState(1 == diagram.getNbImages());\n        try (OutputStream os = new FileOutputStream(file)) {\n            ImageData imageData = diagram.exportDiagram(os, 0, new FileFormatOption(FileFormat.PNG));\n            System.out.println(&quot;generateFromApi: &quot; + diagram.getDescription().getDescription());\n        }\n    }\n\n    private static void generateFromStringSource(File file) throws IOException {\n        String source = &quot;@startuml\\n&quot;;\n        source += &quot;Bob -&gt; Alice : hello\\n&quot;;\n        source += &quot;@enduml\\n&quot;;\n\n        SourceStringReader reader = new SourceStringReader(source);\n        // Write the first image to &quot;png&quot;\n        String desc = reader.generateImage(file);\n        // Return a null string if no generation\n        System.out.println(&quot;generateFromStringSource: &quot; + desc);\n    }\n}\n</code></pre>\n<p>This will build with a <code>build.sbt</code> file like this:</p>\n<pre><code>libraryDependencies += &quot;net.sourceforge.plantuml&quot; % &quot;plantuml&quot; % &quot;8059&quot;\nlibraryDependencies += &quot;com.google.guava&quot; % &quot;guava&quot; % &quot;31.0.1-jre&quot;\n</code></pre>\n<p>The output of <code>generateFromApi</code> is identical to <code>generateFromStringSource</code> and looks like this:</p>\n<p><a href=\"https://i.stack.imgur.com/yzfue.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yzfue.png\" alt=\"from-api.png\" /></a></p>\n"}],"owner":{"account_id":2005107,"reputation":6449,"user_id":1795220,"accept_rate":41,"display_name":"igo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1409,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":69546540,"answer_count":1,"score":2,"last_activity_date":1634069787,"creation_date":1633799655,"question_id":69508989,"body_markdown":"In my Java application I want to use PlantUML to create diagrams. I want to create diagrams in PlantUML using it&#39;s Java API without using PlantUML diagram code. Unfortunately there is a lack of examples or documentation of this on internet and the only documented API is the one that generates diagram [from diagram code as string][1] and that doesn&#39;t help me.  What API in PlantUML can be used to create diagram in this way? \r\n\r\n  [1]: https://plantuml.com/api","title":"How to create PlantUML diagram using Java API without using PlantUML diagram code?","body":"<p>In my Java application I want to use PlantUML to create diagrams. I want to create diagrams in PlantUML using it's Java API without using PlantUML diagram code. Unfortunately there is a lack of examples or documentation of this on internet and the only documented API is the one that generates diagram <a href=\"https://plantuml.com/api\" rel=\"nofollow noreferrer\">from diagram code as string</a> and that doesn't help me.  What API in PlantUML can be used to create diagram in this way?</p>\n"},{"tags":["java","openapi"],"comments":[{"owner":{"account_id":39252,"reputation":89812,"user_id":113116,"display_name":"Helen"},"score":0,"creation_date":1633772494,"post_id":69502862,"comment_id":122852997,"body_markdown":"Use [Swagger Parser](https://github.com/swagger-api/swagger-parser/) or any other Java parser for OpenAPI/Swagger files.","body":"Use <a href=\"https://github.com/swagger-api/swagger-parser/\" rel=\"nofollow noreferrer\">Swagger Parser</a> or any other Java parser for OpenAPI/Swagger files."}],"answers":[{"tags":[],"owner":{"account_id":16373024,"reputation":25,"user_id":11825874,"display_name":"IgorB"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634069732,"creation_date":1634069732,"answer_id":69546526,"question_id":69502862,"body_markdown":"In case when someone will be looking for a solution to this:\r\n\r\nAfter parsing spec file to *OpenAPI* type, we can get paths like this:\r\n\r\n    Paths paths = openAPI.getPaths();\r\n\r\nAnd after that, each path can be taken like a key from *Map*, because *Paths* extends *LinkedHashMap&lt;String, PathItem&gt;* :\r\n\r\n        for (Map.Entry&lt;String, PathItem&gt; pathEntrySet : paths.entrySet()) {\r\n          String keyPath = pathEntrySet.getKey()\r\n         }","title":"How to get &#39;path&#39; from a Swagger specification file","body":"<p>In case when someone will be looking for a solution to this:</p>\n<p>After parsing spec file to <em>OpenAPI</em> type, we can get paths like this:</p>\n<pre><code>Paths paths = openAPI.getPaths();\n</code></pre>\n<p>And after that, each path can be taken like a key from <em>Map</em>, because <em>Paths</em> extends <em>LinkedHashMap&lt;String, PathItem&gt;</em> :</p>\n<pre><code>    for (Map.Entry&lt;String, PathItem&gt; pathEntrySet : paths.entrySet()) {\n      String keyPath = pathEntrySet.getKey()\n     }\n</code></pre>\n"}],"owner":{"account_id":16373024,"reputation":25,"user_id":11825874,"display_name":"IgorB"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":202,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1634069732,"creation_date":1633739338,"question_id":69502862,"body_markdown":"We creating YAML specification files with such structure: \r\n\r\n    openapi: 3.0.1\r\n    info:\r\n      title: MyService\r\n      version: &quot;1.0&quot;\r\n    paths:\r\n       /servicepath/myservice:\r\n        get:\r\n          tags:\r\n          - MyService\r\n    \t...\r\n\r\nIt looks something like:\r\n\r\n    class OpenAPI {\r\n        openapi: 3.0.1\r\n        info: class Info {\r\n            title: MyService\r\n            ...\r\n            version: 1.0\r\n        }\r\n        externalDocs: null\r\n        servers: [class Server {\r\n            url: /\r\n            ...\r\n        }]\r\n        ...\r\n        paths: class Paths {\r\n            {/servicepath/myservice=class PathItem {\r\n                    ...\r\n                get: class Operation {\r\n                    tags: [MyService]\r\n                    ...\r\n\r\n\r\n\r\nI need to get and made some changes with this path: &#39; ***/servicepath/myservice*** &#39; \r\n\r\nHow can I get this path using Java? ","title":"How to get &#39;path&#39; from a Swagger specification file","body":"<p>We creating YAML specification files with such structure:</p>\n<pre><code>openapi: 3.0.1\ninfo:\n  title: MyService\n  version: &quot;1.0&quot;\npaths:\n   /servicepath/myservice:\n    get:\n      tags:\n      - MyService\n    ...\n</code></pre>\n<p>It looks something like:</p>\n<pre><code>class OpenAPI {\n    openapi: 3.0.1\n    info: class Info {\n        title: MyService\n        ...\n        version: 1.0\n    }\n    externalDocs: null\n    servers: [class Server {\n        url: /\n        ...\n    }]\n    ...\n    paths: class Paths {\n        {/servicepath/myservice=class PathItem {\n                ...\n            get: class Operation {\n                tags: [MyService]\n                ...\n</code></pre>\n<p>I need to get and made some changes with this path: ' <em><strong>/servicepath/myservice</strong></em> '</p>\n<p>How can I get this path using Java?</p>\n"},{"tags":["java","object"],"comments":[{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1634016036,"post_id":69535360,"comment_id":122906086,"body_markdown":"Override the `toString` method of the POJO and print what ever you want","body":"Override the <code>toString</code> method of the POJO and print what ever you want"},{"owner":{"account_id":6017073,"reputation":71,"user_id":4725508,"accept_rate":67,"display_name":"Pravin Kottawar"},"score":0,"creation_date":1634016194,"post_id":69535360,"comment_id":122906113,"body_markdown":"Yes possible using parameterized constructers.","body":"Yes possible using parameterized constructers."},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1634016871,"post_id":69535360,"comment_id":122906253,"body_markdown":"either a parametrized constructor, or a mapper will do","body":"either a parametrized constructor, or a mapper will do"},{"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1634017489,"post_id":69535360,"comment_id":122906417,"body_markdown":"Which version of Java is this? I don&#39;t expect the default `toString` to print any field names or their values.","body":"Which version of Java is this? I don&#39;t expect the default <code>toString</code> to print any field names or their values."},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1634020435,"post_id":69535360,"comment_id":122907270,"body_markdown":"You could create a constructor that takes the same type Object (like a copy-constructor)","body":"You could create a constructor that takes the same type Object (like a copy-constructor)"},{"owner":{"account_id":213468,"reputation":103486,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1634059699,"post_id":69535360,"comment_id":122923144,"body_markdown":"The code as shown will not produce the output you show.","body":"The code as shown will not produce the output you show."}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1634069434,"creation_date":1634016851,"answer_id":69535515,"question_id":69535360,"body_markdown":"Your code:\r\n\r\n    ClassA ca2 = new ClassA();\r\n    ca2 = ca1;\r\n\r\n makes no sense. You instantiate a new object of class `ClassA`. You assign a reference to that object to be stored in a reference variable named `ca2`. Then you immediately assign another reference to a different object to that same reference variable `ca2`. \r\n\r\nSo there was no point to the first of those two lines. Logically, you could replace those two lines with the following, and end up with the same effect. \r\n\r\n    ClassA ca2 = ca1;\r\n\r\nYou asked:\r\n\r\n&gt; is it possible that when I assign ca1 to ca2, ca2 will have only the attribute &quot;a&quot; and not have the other attributes, &quot;b&quot; and &quot;c&quot; as no values are assigned to them.\r\n\r\nIf you are asking if the second `ClassA` object can somehow absorb values from the first, the Answer is No. \r\n\r\nYour two instances of `ClassA` are separate and distinct from one another. Each holds its own state (member field values). That state is not altered by you assigning a reference to either into a reference variable. \r\n\r\nIn your Questions code, you end up with two objects in memory:\r\n\r\n- One has one member field assigned a value, and the other two yields are null. That object has two reference variables pointing to it. \r\n - The other object has all three of its member fields null, with none of the three ever assigned a value. This object has no references left pointing to it. Having no references means this object is effectively forgotten, or lost. This object is now a candidate for the garbage collection. After garbage collection, the memory used by this object is freed up to be used for other purposes. \r\n\r\nThe key concept here is that `ca1` and `ca2` are not themselves objects. They are *reference variables*, also known as pointers. They know where to find a particular object. They can each point to different objects, or they can both point to the same object. \r\n\r\nSee the illustration I made in [another Answer of mine](https://stackoverflow.com/a/69458349/642706) on a similar Question. \r\n\r\nWhen you declare `ClassA ca2`, you are *not* saying that `ca2` *is* a `ClassA`, you are saying `ca2` will *track the location* in memory of an object of that class and only that class (and its subclasses). \r\n\r\nAs for the output of `toString` being called implicitly by `System.out.println`, you should override `toString` yourself to generate whatever output you choose. \r\n    ","title":"Is it possible to assign a java object with only the attributes that are available?","body":"<p>Your code:</p>\n<pre><code>ClassA ca2 = new ClassA();\nca2 = ca1;\n</code></pre>\n<p> makes no sense. You instantiate a new object of class <code>ClassA</code>. You assign a reference to that object to be stored in a reference variable named <code>ca2</code>. Then you immediately assign another reference to a different object to that same reference variable <code>ca2</code>.</p>\n<p>So there was no point to the first of those two lines. Logically, you could replace those two lines with the following, and end up with the same effect.</p>\n<pre><code>ClassA ca2 = ca1;\n</code></pre>\n<p>You asked:</p>\n<blockquote>\n<p>is it possible that when I assign ca1 to ca2, ca2 will have only the attribute &quot;a&quot; and not have the other attributes, &quot;b&quot; and &quot;c&quot; as no values are assigned to them.</p>\n</blockquote>\n<p>If you are asking if the second <code>ClassA</code> object can somehow absorb values from the first, the Answer is No.</p>\n<p>Your two instances of <code>ClassA</code> are separate and distinct from one another. Each holds its own state (member field values). That state is not altered by you assigning a reference to either into a reference variable.</p>\n<p>In your Questions code, you end up with two objects in memory:</p>\n<ul>\n<li>One has one member field assigned a value, and the other two yields are null. That object has two reference variables pointing to it.</li>\n<li>The other object has all three of its member fields null, with none of the three ever assigned a value. This object has no references left pointing to it. Having no references means this object is effectively forgotten, or lost. This object is now a candidate for the garbage collection. After garbage collection, the memory used by this object is freed up to be used for other purposes.</li>\n</ul>\n<p>The key concept here is that <code>ca1</code> and <code>ca2</code> are not themselves objects. They are <em>reference variables</em>, also known as pointers. They know where to find a particular object. They can each point to different objects, or they can both point to the same object.</p>\n<p>See the illustration I made in <a href=\"https://stackoverflow.com/a/69458349/642706\">another Answer of mine</a> on a similar Question.</p>\n<p>When you declare <code>ClassA ca2</code>, you are <em>not</em> saying that <code>ca2</code> <em>is</em> a <code>ClassA</code>, you are saying <code>ca2</code> will <em>track the location</em> in memory of an object of that class and only that class (and its subclasses).</p>\n<p>As for the output of <code>toString</code> being called implicitly by <code>System.out.println</code>, you should override <code>toString</code> yourself to generate whatever output you choose.</p>\n"}],"owner":{"account_id":7774592,"reputation":19,"user_id":5883087,"display_name":"KayWe"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":757,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69535515,"answer_count":1,"score":0,"last_activity_date":1634069434,"creation_date":1634015663,"question_id":69535360,"body_markdown":"I have a java pojo class as below\r\n\r\n    public class ClassA {\r\n    \tprivate String a;\r\n    \tprivate String b;\r\n    \tprivate String c;\r\n    \r\n    \tpublic String getA() {\r\n    \t\treturn a;\r\n    \t}\r\n    \r\n    \tpublic void setA(String a) {\r\n    \t\tthis.a = a;\r\n    \t}\r\n    \r\n    \tpublic String getB() {\r\n    \t\treturn b;\r\n    \t}\r\n    \r\n    \tpublic void setB(String b) {\r\n    \t\tthis.b = b;\r\n    \t}\r\n    \r\n    \tpublic String getC() {\r\n    \t\treturn c;\r\n    \t}\r\n    \r\n    \tpublic void setC(String c) {\r\n    \t\tthis.c = c;\r\n    \t}\r\n    }\r\n\r\nAnd I am using it in another class as below\r\n\r\n    public class Test {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tClassA ca1 = new ClassA();\r\n    \t\tca1.setA(&quot;One&quot;);\r\n    \t\t\r\n    \t\tClassA ca2 = new ClassA();\r\n    \t\tca2 = ca1;\r\n    \t\t\r\n    \t\tSystem.out.println(ca2);\r\n    \t\t\r\n    \t}\r\n    }\r\n\r\nThe output is: `ClassA@53bd815b[a=One,b=&lt;null&gt;,c=&lt;null&gt;]`\r\n\r\n\r\nIs it possible that when I assign ca1 to ca2, ca2 will have only the attribute &quot;a&quot; and not have the other attributes, &quot;b&quot; and &quot;c&quot; as no values are assigned to them?\r\n\r\n","title":"Is it possible to assign a java object with only the attributes that are available?","body":"<p>I have a java pojo class as below</p>\n<pre><code>public class ClassA {\n    private String a;\n    private String b;\n    private String c;\n\n    public String getA() {\n        return a;\n    }\n\n    public void setA(String a) {\n        this.a = a;\n    }\n\n    public String getB() {\n        return b;\n    }\n\n    public void setB(String b) {\n        this.b = b;\n    }\n\n    public String getC() {\n        return c;\n    }\n\n    public void setC(String c) {\n        this.c = c;\n    }\n}\n</code></pre>\n<p>And I am using it in another class as below</p>\n<pre><code>public class Test {\n\n    public static void main(String[] args) {\n        ClassA ca1 = new ClassA();\n        ca1.setA(&quot;One&quot;);\n        \n        ClassA ca2 = new ClassA();\n        ca2 = ca1;\n        \n        System.out.println(ca2);\n        \n    }\n}\n</code></pre>\n<p>The output is: <code>ClassA@53bd815b[a=One,b=&lt;null&gt;,c=&lt;null&gt;]</code></p>\n<p>Is it possible that when I assign ca1 to ca2, ca2 will have only the attribute &quot;a&quot; and not have the other attributes, &quot;b&quot; and &quot;c&quot; as no values are assigned to them?</p>\n"},{"tags":["java","intellij-idea","lombok","intellij-lombok-plugin"],"answers":[{"tags":[],"owner":{"account_id":36734,"reputation":392127,"user_id":104891,"display_name":"CrazyCoder"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1634067576,"creation_date":1634067576,"answer_id":69546149,"question_id":69546028,"body_markdown":"JetBrains hired the original Lombok plug-in developer and bundled the plug-in with the IDE distribution. No additional plug-in installation is needed now.","title":"Why isn&#39;t there a lombok plugin update for newer than 2021 Intellij?","body":"<p>JetBrains hired the original Lombok plug-in developer and bundled the plug-in with the IDE distribution. No additional plug-in installation is needed now.</p>\n"}],"owner":{"account_id":10230140,"reputation":659,"user_id":7551211,"display_name":"user7551211"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":145,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":69546149,"answer_count":1,"score":2,"last_activity_date":1634069407,"creation_date":1634066855,"question_id":69546028,"body_markdown":"I&#39;ve seen that there is no update for a compatible Lombok Intellij plugin for an Intellij newer than 2021. I wonder if the reason for this was some update of Intellij to include this natively or any else reason such as no more maintenance?\r\n\r\nI couldn&#39;t manage to find an announcement of anything on the subject.\r\n\r\nThe version history is in the [following link](https://plugins.jetbrains.com/plugin/6317-lombok/versions).","title":"Why isn&#39;t there a lombok plugin update for newer than 2021 Intellij?","body":"<p>I've seen that there is no update for a compatible Lombok Intellij plugin for an Intellij newer than 2021. I wonder if the reason for this was some update of Intellij to include this natively or any else reason such as no more maintenance?</p>\n<p>I couldn't manage to find an announcement of anything on the subject.</p>\n<p>The version history is in the <a href=\"https://plugins.jetbrains.com/plugin/6317-lombok/versions\" rel=\"nofollow noreferrer\">following link</a>.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1634212356,"post_id":69545352,"comment_id":122967612,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}],"answers":[{"tags":[],"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634069100,"creation_date":1634069100,"answer_id":69546411,"question_id":69545352,"body_markdown":"You&#39;re confusing a few concepts here.\r\n\r\n1)When you click on an icon to start an app, the default behavior is to launch the launcher activity, regardless of if an instance of your app is already running.  You can override this behavior in the manifest by setting the launch mode to singleTop or singleTask instead of standard.\r\n\r\n2)Is it killing the process in the background?  Possibly.  Any app which is not the foreground activity may be killed at any time.  You need to be able to relaunch yourself by writing sufficient info to the bundle in onSaveInstanceState and reading it in on onRestoreInstanceState.  But it also may not be and may just be launching a new instance of the Activity.  These are two distinct cases, as killing the process means that singletons and other data objects will have been lost, whereas if the process was not killed they can still be accessed.","title":"App back from backround, after install from google play","body":"<p>You're confusing a few concepts here.</p>\n<p>1)When you click on an icon to start an app, the default behavior is to launch the launcher activity, regardless of if an instance of your app is already running.  You can override this behavior in the manifest by setting the launch mode to singleTop or singleTask instead of standard.</p>\n<p>2)Is it killing the process in the background?  Possibly.  Any app which is not the foreground activity may be killed at any time.  You need to be able to relaunch yourself by writing sufficient info to the bundle in onSaveInstanceState and reading it in on onRestoreInstanceState.  But it also may not be and may just be launching a new instance of the Activity.  These are two distinct cases, as killing the process means that singletons and other data objects will have been lost, whereas if the process was not killed they can still be accessed.</p>\n"}],"owner":{"account_id":23005696,"reputation":45,"user_id":17129032,"display_name":"tomtript"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1634069100,"creation_date":1634063208,"question_id":69545352,"body_markdown":"What can be the reason for the fact that after installing the app from the play store, after switching to the background mode (home button) when I launch the app (app icon), it restarts from new, it does not enter the foreground (back from background). Once it kills the process and restarts it is ok every time.","title":"App back from backround, after install from google play","body":"<p>What can be the reason for the fact that after installing the app from the play store, after switching to the background mode (home button) when I launch the app (app icon), it restarts from new, it does not enter the foreground (back from background). Once it kills the process and restarts it is ok every time.</p>\n"},{"tags":["java","spring","spring-boot","spring-test"],"comments":[{"owner":{"account_id":1223835,"reputation":75858,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1634058235,"post_id":69544402,"comment_id":122922625,"body_markdown":"Don&#39;t use `File`; it&#39;s not available at runtime. In general, use the Spring `Resource` instead.","body":"Don&#39;t use <code>File</code>; it&#39;s not available at runtime. In general, use the Spring <code>Resource</code> instead."},{"owner":{"account_id":20032867,"reputation":25,"user_id":14685244,"display_name":"Mykhailo Pavliuk"},"score":0,"creation_date":1634058760,"post_id":69544402,"comment_id":122922824,"body_markdown":"@chrylis-cautiouslyoptimistic- can you please then provide the correct code instead of mine or exaplain more precisely how to implement your idea?","body":"@chrylis-cautiouslyoptimistic- can you please then provide the correct code instead of mine or exaplain more precisely how to implement your idea?"},{"owner":{"account_id":1648419,"reputation":5309,"user_id":1519469,"display_name":"HelloWorld123456789"},"score":0,"creation_date":1634059155,"post_id":69544402,"comment_id":122922940,"body_markdown":"Is there any other place you defined the test configurations? Looks like your test is also reading the `UrlAnalyzerConfiguration` file.","body":"Is there any other place you defined the test configurations? Looks like your test is also reading the <code>UrlAnalyzerConfiguration</code> file."},{"owner":{"account_id":20032867,"reputation":25,"user_id":14685244,"display_name":"Mykhailo Pavliuk"},"score":0,"creation_date":1634059481,"post_id":69544402,"comment_id":122923065,"body_markdown":"@RikayanBandyopadhyay no, I also thought about this, but no any other place","body":"@RikayanBandyopadhyay no, I also thought about this, but no any other place"},{"owner":{"account_id":20032867,"reputation":25,"user_id":14685244,"display_name":"Mykhailo Pavliuk"},"score":0,"creation_date":1634060190,"post_id":69544402,"comment_id":122923322,"body_markdown":"@chrylis-cautiouslyoptimistic-I have tried to use `Resource`, but the same error occurred","body":"@chrylis-cautiouslyoptimistic-I have tried to use <code>Resource</code>, but the same error occurred"},{"owner":{"account_id":20032867,"reputation":25,"user_id":14685244,"display_name":"Mykhailo Pavliuk"},"score":0,"creation_date":1634063332,"post_id":69544402,"comment_id":122924306,"body_markdown":"@RikayanBandyopadhyay I have edited the question (I found out why this not work) and you were right: test was also reading UrlAnalyzerConfiguration, but can you then help, how to reimplement my solution?","body":"@RikayanBandyopadhyay I have edited the question (I found out why this not work) and you were right: test was also reading UrlAnalyzerConfiguration, but can you then help, how to reimplement my solution?"}],"answers":[{"tags":[],"owner":{"account_id":1648419,"reputation":5309,"user_id":1519469,"display_name":"HelloWorld123456789"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1634068865,"creation_date":1634068865,"answer_id":69546378,"question_id":69544402,"body_markdown":"You can use a combination of `@Profile` and `@ActiveProfiles` to load only the desired classes for your tests. See prototype below.\r\n\r\n**Configuration**\r\n\r\n```\r\n@Configuration\r\n@Profile(&quot;test&quot;)\r\npublic class TestOnlyConfigs {\r\n    // define beans\r\n}\r\n```\r\n**Test**\r\n\r\n```\r\n@ActiveProfiles(&quot;test&quot;)\r\npublic class Tests {\r\n    // write tests\r\n}\r\n```\r\n\r\n**References**\r\n\r\n1. [@Profile](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/annotation/Profile.html)\r\n1. [@ActiveProfiles](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/context/ActiveProfiles.html)","title":"How can I use two beans (or more) that return String in main program and replace them with another two while testing?","body":"<p>You can use a combination of <code>@Profile</code> and <code>@ActiveProfiles</code> to load only the desired classes for your tests. See prototype below.</p>\n<p><strong>Configuration</strong></p>\n<pre><code>@Configuration\n@Profile(&quot;test&quot;)\npublic class TestOnlyConfigs {\n    // define beans\n}\n</code></pre>\n<p><strong>Test</strong></p>\n<pre><code>@ActiveProfiles(&quot;test&quot;)\npublic class Tests {\n    // write tests\n}\n</code></pre>\n<p><strong>References</strong></p>\n<ol>\n<li><a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/annotation/Profile.html\" rel=\"nofollow noreferrer\">@Profile</a></li>\n<li><a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/context/ActiveProfiles.html\" rel=\"nofollow noreferrer\">@ActiveProfiles</a></li>\n</ol>\n"}],"owner":{"account_id":20032867,"reputation":25,"user_id":14685244,"display_name":"Mykhailo Pavliuk"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":348,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69546378,"answer_count":1,"score":1,"last_activity_date":1634068865,"creation_date":1634058135,"question_id":69544402,"body_markdown":"I have configuration file:\r\n\r\n    @Configuration\r\n    public class UrlAnalyzerConfiguration {\r\n    \r\n        @Bean\r\n        @Qualifier(&quot;usersDatabase&quot;)\r\n        public File getUsersDatabaseFile() {\r\n            return Paths.get(&quot;src/main/resources/database/users.csv&quot;).toFile();\r\n        }\r\n    \r\n        @Bean\r\n        @Qualifier(&quot;urlsDatabase&quot;)\r\n        public File getUrlsDatabaseFile() {\r\n            return Paths.get(&quot;src/main/resources/database/urls.csv&quot;).toFile();\r\n        }\r\n    }\r\nAnd configuration for tests:\r\n\r\n    @TestConfiguration\r\n    public class TestConfig {\r\n    \r\n        @Bean\r\n        @Qualifier(&quot;usersDatabase&quot;)\r\n        public File getUsersDatabaseTestFile() {\r\n            return Paths.get(&quot;src/test/resources/database/users.csv&quot;).toFile();\r\n        }\r\n    \r\n        @Bean\r\n        @Qualifier(&quot;urlsDatabase&quot;)\r\n        public File getUrlsDatabaseTestFile() {\r\n            return Paths.get(&quot;src/test/resources/database/urls.csv&quot;).toFile();\r\n        }\r\n    }\r\n\r\n\r\n----------\r\n\r\n\r\nMy repository uses one of that beans:\r\n\r\n        private final File usersDatabase;\r\n        \r\n        @Autowired\r\n        public UserRepositoryImpl(@Qualifier(&quot;usersDatabase&quot;) File usersDatabase) {\r\n            this.usersDatabase = usersDatabase;\r\n        }\r\n\r\n\r\n----------\r\n\r\n\r\nMy repostitory tests file:\r\n\r\n    @SpringBootTest\r\n    @Import(TestConfig.class)\r\n    public class UserRepositoryTest {\r\n        @Autowired\r\n        private UserRepository userRepository;\r\n        \r\n        // tests here\r\n    }\r\n\r\nAt the result my main program works properly, but tests fail with followi message in the end:    \r\n\r\n*Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.NoUniqueBeanDefinitionException: No qualifying bean of type &#39;java.io.File&#39; available: expected single matching bean but found 2: getUsersDatabaseTestFile,getUsersDatabaseFile*\r\n\r\n\r\n----------\r\nI have found the problem: \r\n\r\n&gt; @TestConfiguration class is used in addition to your applications\r\n&gt; primary configuration.\r\nIt means, that tests use @Configuration and @TestConfiguration together! But anyway, how can I use then my beans properly ?","title":"How can I use two beans (or more) that return String in main program and replace them with another two while testing?","body":"<p>I have configuration file:</p>\n<pre><code>@Configuration\npublic class UrlAnalyzerConfiguration {\n\n    @Bean\n    @Qualifier(&quot;usersDatabase&quot;)\n    public File getUsersDatabaseFile() {\n        return Paths.get(&quot;src/main/resources/database/users.csv&quot;).toFile();\n    }\n\n    @Bean\n    @Qualifier(&quot;urlsDatabase&quot;)\n    public File getUrlsDatabaseFile() {\n        return Paths.get(&quot;src/main/resources/database/urls.csv&quot;).toFile();\n    }\n}\n</code></pre>\n<p>And configuration for tests:</p>\n<pre><code>@TestConfiguration\npublic class TestConfig {\n\n    @Bean\n    @Qualifier(&quot;usersDatabase&quot;)\n    public File getUsersDatabaseTestFile() {\n        return Paths.get(&quot;src/test/resources/database/users.csv&quot;).toFile();\n    }\n\n    @Bean\n    @Qualifier(&quot;urlsDatabase&quot;)\n    public File getUrlsDatabaseTestFile() {\n        return Paths.get(&quot;src/test/resources/database/urls.csv&quot;).toFile();\n    }\n}\n</code></pre>\n<hr />\n<p>My repository uses one of that beans:</p>\n<pre><code>    private final File usersDatabase;\n    \n    @Autowired\n    public UserRepositoryImpl(@Qualifier(&quot;usersDatabase&quot;) File usersDatabase) {\n        this.usersDatabase = usersDatabase;\n    }\n</code></pre>\n<hr />\n<p>My repostitory tests file:</p>\n<pre><code>@SpringBootTest\n@Import(TestConfig.class)\npublic class UserRepositoryTest {\n    @Autowired\n    private UserRepository userRepository;\n    \n    // tests here\n}\n</code></pre>\n<p>At the result my main program works properly, but tests fail with followi message in the end:</p>\n<p><em>Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.NoUniqueBeanDefinitionException: No qualifying bean of type 'java.io.File' available: expected single matching bean but found 2: getUsersDatabaseTestFile,getUsersDatabaseFile</em></p>\n<hr />\n<p>I have found the problem:</p>\n<blockquote>\n<p>@TestConfiguration class is used in addition to your applications\nprimary configuration.\nIt means, that tests use @Configuration and @TestConfiguration together! But anyway, how can I use then my beans properly ?</p>\n</blockquote>\n"},{"tags":["java","containers","hosts","agents-jade","multi-agent"],"answers":[{"tags":[],"owner":{"account_id":15476638,"reputation":86,"user_id":11165127,"display_name":"Hc."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634068839,"creation_date":1634068839,"answer_id":69546371,"question_id":69255459,"body_markdown":"you lack information within your profiles.\r\n1. You need to defined IP,port, hostname on both (main-container and distant-containers). Not doing it on the main-c will create pb for it to run, but you will not be able to join it from the pi.\r\n\r\n2. The IP given on the pi-container should be the one of the main-container. Not sure if its the case in your example.\r\n\r\nYou can give a look at the open-source project [startJade][1] that intends to offer several running examples. The &quot;Platform creation&quot; example covers this case.\r\n\r\n\r\n  [1]: https://startjade.gitlab.io/CreatePlatform/","title":"Jade Framework (two containers)","body":"<p>you lack information within your profiles.</p>\n<ol>\n<li><p>You need to defined IP,port, hostname on both (main-container and distant-containers). Not doing it on the main-c will create pb for it to run, but you will not be able to join it from the pi.</p>\n</li>\n<li><p>The IP given on the pi-container should be the one of the main-container. Not sure if its the case in your example.</p>\n</li>\n</ol>\n<p>You can give a look at the open-source project <a href=\"https://startjade.gitlab.io/CreatePlatform/\" rel=\"nofollow noreferrer\">startJade</a> that intends to offer several running examples. The &quot;Platform creation&quot; example covers this case.</p>\n"}],"owner":{"account_id":22805469,"reputation":1,"user_id":16957568,"display_name":"Hichem"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":225,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1634068839,"creation_date":1632145325,"question_id":69255459,"body_markdown":"I have expertise in using Jade in the same host (my laptop) as I can handle all interactions between agents;\r\nBut I have to run the `MainContainer` in my laptop and the second container in a Raspberry Pi.\r\nI started to try a simple example by creating 2 agents, the first on the main container and the second on the container that will run on Raspberry Pi. But it doesn&#39;t work.\r\n\r\nthe following code is for the main container including agent1 which will send message to agent2\r\n\r\n```\r\nRuntime runtime = Runtime.instance();\r\n\r\nProperties properties = new ExtendedProperties();\r\nproperties.setProperty(Profile.GUI, &quot;true&quot;);\r\nProfile profile = new ProfileImpl(properties);\r\nAgentContainer agentContainer1=runtime.createMainContainer(profile);\r\nContainer.start();\r\nAgentController agent1=agentContainer1.createNewAgent(&quot;Agent1&quot;,&quot;Connexion.Agent1&quot;,new Object[]{});    \r\nagent1.start();\r\n```\r\n\r\nCode of the second container: \r\n\r\n```\r\nRuntime runtime=Runtime.instance();\r\nProfile profile=new ProfileImpl();\r\nprofile.setParameter(profile.MAIN_HOST, &quot;192.168.0.164&quot;); //Raspberry Pi host\r\nAgentContainer agentContainer1=runtime.createAgentContainer(profile);\r\nAgentController agent2=agentContainer1.createNewAgent(&quot;Agent2&quot;,&quot;Connexion.Agent2&quot;,new Object[]{});\r\nagent2.start();\r\nagentContainer1.start();\r\n```\r\n\r\n - agent1 send message to agent2 every 15seconds.\r\n\r\nThere isn&#39;t any problem with the main container code but when I run the raspberry container using `deployAndBrickPun` (`ev3dev-lang-java`), it show me the following error:\r\n\r\n```\r\n&gt; Task :deploy \r\nHost key checking is off. It may be vulnerable to man-in-the-middle attacks. \r\nev3dev#1|Sep 20, 2021 1:27:00 PM jade.core.AgentContainerImpl joinPlatform \r\nev3dev#1|SEVERE: Some problem occurred while joining agent platform.\r\nev3dev#1|jade.core.ProfileException: Can&#39;t get a proxy to the Platform Manager - Caused by: Dispatcher error - Caused by:  DispatcherException in remote site. No skeleton for object-id0\r\nev3dev#1|\tat jade.core.ProfileImpl.createPlatformManager(ProfileImpl.java:529)          \r\nev3dev#1|\tat jade.core.ProfileImpl.getPlatformManager(ProfileImpl.java:442)\r\nev3dev#1|\tat jade.core.ProfileImpl.getServiceManager(ProfileImpl.java:456)          \r\nev3dev#1|\tat jade.core.AgentContainerImpl.init(AgentContainerImpl.java:347)              \r\nev3dev#1|\tat jade.core.AgentContainerImpl.joinPlatform(AgentContainerImpl.java:495) \r\nev3dev#1|\tat jade.core.Runtime.createAgentContainer(Runtime.java:127) \r\nev3dev#1|\tat Connexion.Container1.main(Container1.java:17)\r\n```\r\n\r\n-----------------------------\r\nI need to solve this errors, so I asking for your help please;\r\n\r\nThank you in advance.\r\n\r\n","title":"Jade Framework (two containers)","body":"<p>I have expertise in using Jade in the same host (my laptop) as I can handle all interactions between agents;\nBut I have to run the <code>MainContainer</code> in my laptop and the second container in a Raspberry Pi.\nI started to try a simple example by creating 2 agents, the first on the main container and the second on the container that will run on Raspberry Pi. But it doesn't work.</p>\n<p>the following code is for the main container including agent1 which will send message to agent2</p>\n<pre><code>Runtime runtime = Runtime.instance();\n\nProperties properties = new ExtendedProperties();\nproperties.setProperty(Profile.GUI, &quot;true&quot;);\nProfile profile = new ProfileImpl(properties);\nAgentContainer agentContainer1=runtime.createMainContainer(profile);\nContainer.start();\nAgentController agent1=agentContainer1.createNewAgent(&quot;Agent1&quot;,&quot;Connexion.Agent1&quot;,new Object[]{});    \nagent1.start();\n</code></pre>\n<p>Code of the second container:</p>\n<pre><code>Runtime runtime=Runtime.instance();\nProfile profile=new ProfileImpl();\nprofile.setParameter(profile.MAIN_HOST, &quot;192.168.0.164&quot;); //Raspberry Pi host\nAgentContainer agentContainer1=runtime.createAgentContainer(profile);\nAgentController agent2=agentContainer1.createNewAgent(&quot;Agent2&quot;,&quot;Connexion.Agent2&quot;,new Object[]{});\nagent2.start();\nagentContainer1.start();\n</code></pre>\n<ul>\n<li>agent1 send message to agent2 every 15seconds.</li>\n</ul>\n<p>There isn't any problem with the main container code but when I run the raspberry container using <code>deployAndBrickPun</code> (<code>ev3dev-lang-java</code>), it show me the following error:</p>\n<pre><code>&gt; Task :deploy \nHost key checking is off. It may be vulnerable to man-in-the-middle attacks. \nev3dev#1|Sep 20, 2021 1:27:00 PM jade.core.AgentContainerImpl joinPlatform \nev3dev#1|SEVERE: Some problem occurred while joining agent platform.\nev3dev#1|jade.core.ProfileException: Can't get a proxy to the Platform Manager - Caused by: Dispatcher error - Caused by:  DispatcherException in remote site. No skeleton for object-id0\nev3dev#1|   at jade.core.ProfileImpl.createPlatformManager(ProfileImpl.java:529)          \nev3dev#1|   at jade.core.ProfileImpl.getPlatformManager(ProfileImpl.java:442)\nev3dev#1|   at jade.core.ProfileImpl.getServiceManager(ProfileImpl.java:456)          \nev3dev#1|   at jade.core.AgentContainerImpl.init(AgentContainerImpl.java:347)              \nev3dev#1|   at jade.core.AgentContainerImpl.joinPlatform(AgentContainerImpl.java:495) \nev3dev#1|   at jade.core.Runtime.createAgentContainer(Runtime.java:127) \nev3dev#1|   at Connexion.Container1.main(Container1.java:17)\n</code></pre>\n<hr />\n<p>I need to solve this errors, so I asking for your help please;</p>\n<p>Thank you in advance.</p>\n"},{"tags":["java","design-patterns"],"answers":[{"tags":[],"owner":{"account_id":14847021,"reputation":301,"user_id":10722088,"display_name":"Simone Lungarella"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1634068139,"creation_date":1634067817,"answer_id":69546189,"question_id":69546060,"body_markdown":"The design pattern of Factory should be used like this:\r\n\r\n    public static void main(String[] args) {\r\n        DisneyPlotFactory dPlotFactory = new DisneyPlotFactory();\r\n        APlot plot1 = dPlotFactory.getPlot(&quot;A&quot;, &quot;B&quot;, &quot;C&quot;);\r\n        plot1.execute();\r\n        BPlot plot2 = dPlotFactory.getPlot(&quot;G&quot;, &quot;H&quot;, &quot;I&quot;);\r\n        plot2.execute();\r\n    }\r\nWhat you did with `classicDisneyPlotFactory` should return a Plot and not a PlotFactory, like this:\r\n\r\n    public class DisneyPlotFactory { \r\n        public DisneyPlot getPlot(Character hero, Character another, Character without) {\r\n            if (hero.equals(&quot;A&quot;) &amp;&amp; another.equals(&quot;B&quot;) &amp;&amp; without.equals(&quot;C&quot;)){\r\n               return new APlot();\r\n            } else if (hero.equals(&quot;D&quot;) &amp;&amp; another.equals(&quot;E&quot;)&amp;&amp; without.equals(&quot;F&quot;)) {\r\n                return new BPlot();\r\n            }else if (hero.equals(&quot;G&quot;) &amp;&amp; another.equals(&quot;H&quot;)&amp;&amp; without.equals(&quot;I&quot;)) {\r\n                return new CPlot();\r\n            }\r\n            \r\n        }\r\n    }\r\n\r\nYou can create the factory just every other class, the factory should expose the method to get the `DisneyPlot` generated from your parameters.","title":"Use Factory pattern","body":"<p>The design pattern of Factory should be used like this:</p>\n<pre><code>public static void main(String[] args) {\n    DisneyPlotFactory dPlotFactory = new DisneyPlotFactory();\n    APlot plot1 = dPlotFactory.getPlot(&quot;A&quot;, &quot;B&quot;, &quot;C&quot;);\n    plot1.execute();\n    BPlot plot2 = dPlotFactory.getPlot(&quot;G&quot;, &quot;H&quot;, &quot;I&quot;);\n    plot2.execute();\n}\n</code></pre>\n<p>What you did with <code>classicDisneyPlotFactory</code> should return a Plot and not a PlotFactory, like this:</p>\n<pre><code>public class DisneyPlotFactory { \n    public DisneyPlot getPlot(Character hero, Character another, Character without) {\n        if (hero.equals(&quot;A&quot;) &amp;&amp; another.equals(&quot;B&quot;) &amp;&amp; without.equals(&quot;C&quot;)){\n           return new APlot();\n        } else if (hero.equals(&quot;D&quot;) &amp;&amp; another.equals(&quot;E&quot;)&amp;&amp; without.equals(&quot;F&quot;)) {\n            return new BPlot();\n        }else if (hero.equals(&quot;G&quot;) &amp;&amp; another.equals(&quot;H&quot;)&amp;&amp; without.equals(&quot;I&quot;)) {\n            return new CPlot();\n        }\n        \n    }\n}\n</code></pre>\n<p>You can create the factory just every other class, the factory should expose the method to get the <code>DisneyPlot</code> generated from your parameters.</p>\n"}],"owner":{"account_id":19608232,"reputation":25,"user_id":14351356,"display_name":"Petru Ciorba"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":303,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69546189,"answer_count":1,"score":0,"last_activity_date":1634068139,"creation_date":1634067071,"question_id":69546060,"body_markdown":"I try to use Factory pattern in this code. I have a method that take three arguments as input\r\nand I need to `return` a factory that creates a classic Disney plot. Do I apply the given pattern correctly? And how return a factory that creates a classic Disney plot?\r\n\r\n    public PlotFactory classicDisneyPlotFactory(Character hero, Character another, Character without) {\r\n            if (hero.equals(&quot;A&quot;) &amp;&amp; another.equals(&quot;B&quot;) &amp;&amp; without.equals(&quot;C&quot;)){\r\n               return  .....;\r\n            } else if (hero.equals(&quot;D&quot;) &amp;&amp; another.equals(&quot;E&quot;)&amp;&amp; without.equals(&quot;F&quot;)){\r\n                return ....;\r\n            }else if (hero.equals(&quot;G&quot;) &amp;&amp; another.equals(&quot;H&quot;)&amp;&amp; without.equals(&quot;I&quot;)){\r\n                return ....;\r\n            }\r\n            \r\n        }","title":"Use Factory pattern","body":"<p>I try to use Factory pattern in this code. I have a method that take three arguments as input\nand I need to <code>return</code> a factory that creates a classic Disney plot. Do I apply the given pattern correctly? And how return a factory that creates a classic Disney plot?</p>\n<pre><code>public PlotFactory classicDisneyPlotFactory(Character hero, Character another, Character without) {\n        if (hero.equals(&quot;A&quot;) &amp;&amp; another.equals(&quot;B&quot;) &amp;&amp; without.equals(&quot;C&quot;)){\n           return  .....;\n        } else if (hero.equals(&quot;D&quot;) &amp;&amp; another.equals(&quot;E&quot;)&amp;&amp; without.equals(&quot;F&quot;)){\n            return ....;\n        }else if (hero.equals(&quot;G&quot;) &amp;&amp; another.equals(&quot;H&quot;)&amp;&amp; without.equals(&quot;I&quot;)){\n            return ....;\n        }\n        \n    }\n</code></pre>\n"},{"tags":["java","maven","jersey"],"comments":[{"owner":{"account_id":190623,"reputation":2204,"user_id":430718,"display_name":"Hakan Dilek"},"score":0,"creation_date":1634052805,"post_id":69542923,"comment_id":122920415,"body_markdown":"You&#39;re probably looking for a version of Jersey-common https://mvnrepository.com/artifact/org.glassfish.jersey.core/jersey-common If you give some more details (is it a java or android app), it&#39;d be easier to help.","body":"You&#39;re probably looking for a version of Jersey-common <a href=\"https://mvnrepository.com/artifact/org.glassfish.jersey.core/jersey-common\" rel=\"nofollow noreferrer\">mvnrepository.com/artifact/org.glassfish.jersey.core/&hellip;</a> If you give some more details (is it a java or android app), it&#39;d be easier to help."},{"owner":{"account_id":14992340,"reputation":13,"user_id":10822956,"display_name":"Dikshit Batra"},"score":1,"creation_date":1634053127,"post_id":69542923,"comment_id":122920540,"body_markdown":"Hi Hakan, it&#39;s a java application. It&#39;s just imported for creating a set but since it&#39;s in a jar I cannot change it. I think it&#39;s jersey not guava.","body":"Hi Hakan, it&#39;s a java application. It&#39;s just imported for creating a set but since it&#39;s in a jar I cannot change it. I think it&#39;s jersey not guava."}],"answers":[{"tags":[],"owner":{"account_id":190623,"reputation":2204,"user_id":430718,"display_name":"Hakan Dilek"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1634067516,"creation_date":1634067516,"answer_id":69546134,"question_id":69542923,"body_markdown":"This is the `jersey-common` library. You can try referencing the latest version up to date:\r\n\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.glassfish.jersey.core&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jersey-common&lt;/artifactId&gt;\r\n    &lt;version&gt;3.0.3&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n\r\n```\r\n\r\nIf it fails, you can try decreasing version number from [this list][1].\r\n\r\n\r\n  [1]: https://mvnrepository.com/artifact/org.glassfish.jersey.core/jersey-common","title":"What dependency needs to be added to avoid java.lang.NoClassDefFoundError: org/glassfish/jersey/internal/guava/Sets?","body":"<p>This is the <code>jersey-common</code> library. You can try referencing the latest version up to date:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.glassfish.jersey.core&lt;/groupId&gt;\n    &lt;artifactId&gt;jersey-common&lt;/artifactId&gt;\n    &lt;version&gt;3.0.3&lt;/version&gt;\n&lt;/dependency&gt;\n\n</code></pre>\n<p>If it fails, you can try decreasing version number from <a href=\"https://mvnrepository.com/artifact/org.glassfish.jersey.core/jersey-common\" rel=\"nofollow noreferrer\">this list</a>.</p>\n"}],"owner":{"account_id":14992340,"reputation":13,"user_id":10822956,"display_name":"Dikshit Batra"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":326,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":69546134,"answer_count":1,"score":0,"last_activity_date":1634067516,"creation_date":1634051314,"question_id":69542923,"body_markdown":"Any idea what maven dependency(also the version) to add in pom.xml for this error? I&#39;m using an external jar so not sure what to add exactly for this.\r\n","title":"What dependency needs to be added to avoid java.lang.NoClassDefFoundError: org/glassfish/jersey/internal/guava/Sets?","body":"<p>Any idea what maven dependency(also the version) to add in pom.xml for this error? I'm using an external jar so not sure what to add exactly for this.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":5916600,"reputation":2324,"user_id":4655217,"display_name":"geobreze"},"score":1,"creation_date":1634064637,"post_id":69545516,"comment_id":122924763,"body_markdown":"You can iterate over the string and for every letter check `!isVowel(s[i - 1]) &amp;&amp; isVowel(s[i]) &amp;&amp; !isVowel(s[i])` which means letter is vowel and surrounded by consonants. In such case you insert two letters","body":"You can iterate over the string and for every letter check <code>!isVowel(s[i - 1]) &amp;&amp; isVowel(s[i]) &amp;&amp; !isVowel(s[i])</code> which means letter is vowel and surrounded by consonants. In such case you insert two letters"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1634066592,"post_id":69545516,"comment_id":122925414,"body_markdown":"What about a word that starts with a vowel, like _upstart_? Would that become **uupstaart** ? Similarly if a word ends in a vowel, like _villa_. Would that become **viillaa** ?","body":"What about a word that starts with a vowel, like <i>upstart</i>? Would that become <b>uupstaart</b> ? Similarly if a word ends in a vowel, like <i>villa</i>. Would that become <b>viillaa</b> ?"}],"answers":[{"tags":[],"owner":{"account_id":17000499,"reputation":48397,"user_id":12299000,"display_name":"kaya3"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1634064732,"creation_date":1634064732,"answer_id":69545623,"question_id":69545516,"body_markdown":"Most simple string manipulation tasks like this can be fairly easily done with a [regex][1]. This one&#39;s a one-liner:\r\n\r\n```java\r\npublic static String doubleVowelsMaybe(String s) {\r\n    return s.replaceAll(&quot;(?&lt;![aeiou])([aeiou])(?![aeiou])&quot;, &quot;$1$1&quot;);\r\n}\r\n```\r\n\r\nThe regex works as follows:\r\n\r\n- `(?&lt;![aeiou])` is a negative lookbehind, so it matches only if the character is not preceded by a vowel.\r\n- `([aeiou])` matches a single vowel, and captures it to group number 1.\r\n- `(?![aeiou])` is a negative lookahead, so it matches only if the character is not followed by a vowel.\r\n- The replacement of `$1$1` means two copies of whatever was matched by group number 1, which is the single vowel character.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Regular_expression","title":"Hello I am trying to write a method that duplicates all vowels but only if they are on their own. for example &quot;beautiful&quot; would return &quot;beautiifuul&quot;","body":"<p>Most simple string manipulation tasks like this can be fairly easily done with a <a href=\"https://en.wikipedia.org/wiki/Regular_expression\" rel=\"nofollow noreferrer\">regex</a>. This one's a one-liner:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static String doubleVowelsMaybe(String s) {\n    return s.replaceAll(&quot;(?&lt;![aeiou])([aeiou])(?![aeiou])&quot;, &quot;$1$1&quot;);\n}\n</code></pre>\n<p>The regex works as follows:</p>\n<ul>\n<li><code>(?&lt;![aeiou])</code> is a negative lookbehind, so it matches only if the character is not preceded by a vowel.</li>\n<li><code>([aeiou])</code> matches a single vowel, and captures it to group number 1.</li>\n<li><code>(?![aeiou])</code> is a negative lookahead, so it matches only if the character is not followed by a vowel.</li>\n<li>The replacement of <code>$1$1</code> means two copies of whatever was matched by group number 1, which is the single vowel character.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":9933082,"reputation":169,"user_id":7352289,"display_name":"arp5"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634066113,"creation_date":1634066113,"answer_id":69545888,"question_id":69545516,"body_markdown":"```\r\nimport java.util.*;\r\n\r\nclass Hello {\r\n    public static void main(String[] args) {\r\n        String abc = &quot;beautiful&quot;;\r\n        String n = &quot;&quot;;\r\n        int i = 0;\r\n        char[] abcchar = abc.toCharArray();\r\n        HashSet&lt;Character&gt; hs = new HashSet&lt;&gt;();\r\n        hs.add(&#39;a&#39;);\r\n        hs.add(&#39;e&#39;);\r\n        hs.add(&#39;i&#39;);\r\n        hs.add(&#39;o&#39;);\r\n        hs.add(&#39;u&#39;);\r\n        while (i &lt; abcchar.length) {\r\n            if (i + 1 &lt; abcchar.length &amp;&amp; hs.contains(abcchar[i]) &amp;&amp; !hs.contains(abcchar[i + 1])) {\r\n                n = n + abc.substring(i, i + 1) + abc.substring(i, i + 1);\r\n            } else {\r\n\r\n                while (hs.contains(abcchar[i])) {\r\n                    n = n + abc.substring(i, i + 1);\r\n                    i++;\r\n                }\r\n                n = n + abc.substring(i, i + 1);\r\n            }\r\n            i++;\r\n        }\r\n        System.out.print(n);\r\n    }\r\n}\r\n```","title":"Hello I am trying to write a method that duplicates all vowels but only if they are on their own. for example &quot;beautiful&quot; would return &quot;beautiifuul&quot;","body":"<pre><code>import java.util.*;\n\nclass Hello {\n    public static void main(String[] args) {\n        String abc = &quot;beautiful&quot;;\n        String n = &quot;&quot;;\n        int i = 0;\n        char[] abcchar = abc.toCharArray();\n        HashSet&lt;Character&gt; hs = new HashSet&lt;&gt;();\n        hs.add('a');\n        hs.add('e');\n        hs.add('i');\n        hs.add('o');\n        hs.add('u');\n        while (i &lt; abcchar.length) {\n            if (i + 1 &lt; abcchar.length &amp;&amp; hs.contains(abcchar[i]) &amp;&amp; !hs.contains(abcchar[i + 1])) {\n                n = n + abc.substring(i, i + 1) + abc.substring(i, i + 1);\n            } else {\n\n                while (hs.contains(abcchar[i])) {\n                    n = n + abc.substring(i, i + 1);\n                    i++;\n                }\n                n = n + abc.substring(i, i + 1);\n            }\n            i++;\n        }\n        System.out.print(n);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":22998760,"reputation":1,"user_id":17123064,"display_name":"Konnor Kivimagi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1634066113,"creation_date":1634064143,"question_id":69545516,"body_markdown":"Here&#39;s what I have if someone could give me some idea of what to do that would be great. I think taking the index and counting how many values are together would be helpful but im not sure how to implement that. isVowel is a helper method to determine if the char is a vowel.\r\n\r\n    public static String doubleVowelsMaybe(String s) \r\n\t{  \r\n\t\tint run =0;\r\n\t\tString n = &quot;&quot;;\r\n\t\tfor(int i = 0; i&lt; s.length(); ++i)\r\n\t\t{\r\n\t\t\tchar k = s.charAt(i);\r\n\t\t\tif(isVowel(k))\r\n\t\t\t{\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\tif(run == 1)\r\n\t\t\t{\r\n\t\t\t\tn = n + s.substring(i, i+1) + s.substring(i, i+1);\r\n\t\t\t\trun=0;\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tn = n + s.substring(i, i+1);\r\n\t\t\t\trun= 0;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn n;","title":"Hello I am trying to write a method that duplicates all vowels but only if they are on their own. for example &quot;beautiful&quot; would return &quot;beautiifuul&quot;","body":"<p>Here's what I have if someone could give me some idea of what to do that would be great. I think taking the index and counting how many values are together would be helpful but im not sure how to implement that. isVowel is a helper method to determine if the char is a vowel.</p>\n<pre><code>public static String doubleVowelsMaybe(String s) \n{  \n    int run =0;\n    String n = &quot;&quot;;\n    for(int i = 0; i&lt; s.length(); ++i)\n    {\n        char k = s.charAt(i);\n        if(isVowel(k))\n        {\n            \n        }\n        if(run == 1)\n        {\n            n = n + s.substring(i, i+1) + s.substring(i, i+1);\n            run=0;\n        }\n        else\n        {\n            n = n + s.substring(i, i+1);\n            run= 0;\n        }\n    }\n    \n    return n;\n</code></pre>\n"},{"tags":["java","io","stream","inputstream","bytearrayoutputstream"],"answers":[{"tags":[],"owner":{"account_id":32681,"reputation":138933,"user_id":90848,"accept_rate":90,"display_name":"Laurence Gonsalves"},"down_vote_count":0,"up_vote_count":77,"is_accepted":true,"score":77,"last_activity_date":1634066049,"creation_date":1249369585,"answer_id":1226031,"question_id":1225909,"body_markdown":"If you don&#39;t want to copy all of the data into an in-memory buffer all at once then you&#39;re going to have to have your code that uses the OutputStream (the producer) and the code that uses the InputStream (the consumer) either alternate in the same thread, or operate concurrently in two separate threads. Having them operate in the same thread is probably much more complicated that using two separate threads, is much more error prone (you&#39;ll need to make sure that the consumer *never* blocks waiting for input, or you&#39;ll effectively deadlock) and would necessitate having the producer and consumer running in the same loop which seems way too tightly coupled.\r\n\r\nSo use a second thread. It really isn&#39;t that complicated. The page you linked to had reasonable example. Here&#39;s a somewhat modernized version, which also closes the streams:\r\n\r\n``` java\r\ntry (PipedInputStream in = new PipedInputStream()) {\r\n    new Thread(() -&gt; {\r\n        try (PipedOutputStream out = new PipedOutputStream(in)) {\r\n            writeDataToOutputStream(out);\r\n        } catch (IOException iox) {\r\n            // handle IOExceptions\r\n        }\r\n    }).start();\r\n    processDataFromInputStream(in);\r\n}\r\n```","title":"Most efficient way to create InputStream from OutputStream","body":"<p>If you don't want to copy all of the data into an in-memory buffer all at once then you're going to have to have your code that uses the OutputStream (the producer) and the code that uses the InputStream (the consumer) either alternate in the same thread, or operate concurrently in two separate threads. Having them operate in the same thread is probably much more complicated that using two separate threads, is much more error prone (you'll need to make sure that the consumer <em>never</em> blocks waiting for input, or you'll effectively deadlock) and would necessitate having the producer and consumer running in the same loop which seems way too tightly coupled.</p>\n<p>So use a second thread. It really isn't that complicated. The page you linked to had reasonable example. Here's a somewhat modernized version, which also closes the streams:</p>\n<pre class=\"lang-java prettyprint-override\"><code>try (PipedInputStream in = new PipedInputStream()) {\n    new Thread(() -&gt; {\n        try (PipedOutputStream out = new PipedOutputStream(in)) {\n            writeDataToOutputStream(out);\n        } catch (IOException iox) {\n            // handle IOExceptions\n        }\n    }).start();\n    processDataFromInputStream(in);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":241969,"reputation":757,"user_id":513173,"accept_rate":80,"display_name":"Gab"},"down_vote_count":1,"up_vote_count":16,"is_accepted":false,"score":15,"last_activity_date":1427452919,"creation_date":1307014232,"answer_id":6213940,"question_id":1225909,"body_markdown":"There is another Open Source library called *[EasyStream][1]* that deals with pipes and thread in a transparent way. \r\nThat isn&#39;t really complicated if everything goes well. Problems arise when (looking at Laurence Gonsalves example)\r\n\r\n&gt; class1.putDataOnOutputStream(out);\r\n\r\nThrows an exception. \r\nIn that example the thread simply completes and the exception is lost, while the outer `InputStream` might be truncated.\r\n\r\nEasystream deals with exception propagation and other nasty problems I&#39;ve been debugging for about one year. (I&#39;m the mantainer of the library: obviously my solution is the best one ;) )\r\nHere is an example on how to use it:\r\n\r\n    final InputStreamFromOutputStream&lt;String&gt; isos = new InputStreamFromOutputStream&lt;String&gt;(){\r\n     @Override\r\n     public String produce(final OutputStream dataSink) throws Exception {\r\n       /*\r\n        * call your application function who produces the data here\r\n        * WARNING: we&#39;re in another thread here, so this method shouldn&#39;t \r\n        * write any class field or make assumptions on the state of the outer class. \r\n        */\r\n       return produceMydata(dataSink)\r\n     }\r\n    };\r\n\r\nThere is also a nice [introduction][2] where all other ways to convert an OutputStream into an InputStream are explained. Worth to have a look.\r\n\r\n\r\n  [1]: http://io-tools.sourceforge.net/easystream/index.html\r\n  [2]: http://io-tools.sourceforge.net/easystream/OutputStream_to_InputStream.html","title":"Most efficient way to create InputStream from OutputStream","body":"<p>There is another Open Source library called <em><a href=\"http://io-tools.sourceforge.net/easystream/index.html\" rel=\"noreferrer\">EasyStream</a></em> that deals with pipes and thread in a transparent way. \nThat isn't really complicated if everything goes well. Problems arise when (looking at Laurence Gonsalves example)</p>\n\n<blockquote>\n  <p>class1.putDataOnOutputStream(out);</p>\n</blockquote>\n\n<p>Throws an exception. \nIn that example the thread simply completes and the exception is lost, while the outer <code>InputStream</code> might be truncated.</p>\n\n<p>Easystream deals with exception propagation and other nasty problems I've been debugging for about one year. (I'm the mantainer of the library: obviously my solution is the best one ;) )\nHere is an example on how to use it:</p>\n\n<pre><code>final InputStreamFromOutputStream&lt;String&gt; isos = new InputStreamFromOutputStream&lt;String&gt;(){\n @Override\n public String produce(final OutputStream dataSink) throws Exception {\n   /*\n    * call your application function who produces the data here\n    * WARNING: we're in another thread here, so this method shouldn't \n    * write any class field or make assumptions on the state of the outer class. \n    */\n   return produceMydata(dataSink)\n }\n};\n</code></pre>\n\n<p>There is also a nice <a href=\"http://io-tools.sourceforge.net/easystream/OutputStream_to_InputStream.html\" rel=\"noreferrer\">introduction</a> where all other ways to convert an OutputStream into an InputStream are explained. Worth to have a look.</p>\n"},{"tags":[],"owner":{"account_id":4758701,"reputation":1145,"user_id":3846724,"display_name":"Mostafa Abdellateef"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1422447099,"creation_date":1422447099,"answer_id":28191964,"question_id":1225909,"body_markdown":"I think the best way to connect InputStream to an OutputStream is through **piped streams** - available in java.io package, as follow:\r\n\r\n    // 1- Define stream buffer\r\n    private static final int PIPE_BUFFER = 2048;\r\n\r\n    // 2 -Create PipedInputStream with the buffer\r\n    public PipedInputStream inPipe = new PipedInputStream(PIPE_BUFFER);\r\n\r\n    // 3 -Create PipedOutputStream and bound it to the PipedInputStream object\r\n    public PipedOutputStream outPipe = new PipedOutputStream(inPipe);\r\n\r\n    // 4- PipedOutputStream is an OutputStream, So you can write data to it\r\n    // in any way suitable to your data. for example:\r\n    while (Condition) {\r\n         outPipe.write(mByte);\r\n    }\r\n\r\n    /*Congratulations:D. Step 4 will write data to the PipedOutputStream\r\n    which is bound to the PipedInputStream so after filling the buffer\r\n    this data is available in the inPipe Object. Start reading it to\r\n    clear the buffer to be filled again by the PipedInputStream object.*/\r\n\r\nIn my opinion there are two main advantages for this code:\r\n\r\n1 - There is no additional consumption of memory except for the buffer.\r\n\r\n2 - You don&#39;t need to handle data queuing manually","title":"Most efficient way to create InputStream from OutputStream","body":"<p>I think the best way to connect InputStream to an OutputStream is through <strong>piped streams</strong> - available in java.io package, as follow:</p>\n\n<pre><code>// 1- Define stream buffer\nprivate static final int PIPE_BUFFER = 2048;\n\n// 2 -Create PipedInputStream with the buffer\npublic PipedInputStream inPipe = new PipedInputStream(PIPE_BUFFER);\n\n// 3 -Create PipedOutputStream and bound it to the PipedInputStream object\npublic PipedOutputStream outPipe = new PipedOutputStream(inPipe);\n\n// 4- PipedOutputStream is an OutputStream, So you can write data to it\n// in any way suitable to your data. for example:\nwhile (Condition) {\n     outPipe.write(mByte);\n}\n\n/*Congratulations:D. Step 4 will write data to the PipedOutputStream\nwhich is bound to the PipedInputStream so after filling the buffer\nthis data is available in the inPipe Object. Start reading it to\nclear the buffer to be filled again by the PipedInputStream object.*/\n</code></pre>\n\n<p>In my opinion there are two main advantages for this code:</p>\n\n<p>1 - There is no additional consumption of memory except for the buffer.</p>\n\n<p>2 - You don't need to handle data queuing manually</p>\n"},{"tags":[],"owner":{"account_id":2833025,"reputation":1032,"user_id":3026310,"display_name":"Eron Wright"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1462129118,"creation_date":1462062320,"answer_id":36961688,"question_id":1225909,"body_markdown":"A simple solution that avoids copying the buffer is to create a special-purpose `ByteArrayOutputStream`:\r\n\r\n    public class CopyStream extends ByteArrayOutputStream {\r\n        public CopyStream(int size) { super(size); }\r\n\r\n        /**\r\n         * Get an input stream based on the contents of this output stream.\r\n         * Do not use the output stream after calling this method.\r\n         * @return an {@link InputStream}\r\n         */\r\n        public InputStream toInputStream() {\r\n            return new ByteArrayInputStream(this.buf, 0, this.count);\r\n        }\r\n    }\r\n\r\nWrite to the above output stream as needed, then call `toInputStream` to obtain an input stream over the underlying buffer.  Consider the output stream as closed after that point.","title":"Most efficient way to create InputStream from OutputStream","body":"<p>A simple solution that avoids copying the buffer is to create a special-purpose <code>ByteArrayOutputStream</code>:</p>\n\n<pre><code>public class CopyStream extends ByteArrayOutputStream {\n    public CopyStream(int size) { super(size); }\n\n    /**\n     * Get an input stream based on the contents of this output stream.\n     * Do not use the output stream after calling this method.\n     * @return an {@link InputStream}\n     */\n    public InputStream toInputStream() {\n        return new ByteArrayInputStream(this.buf, 0, this.count);\n    }\n}\n</code></pre>\n\n<p>Write to the above output stream as needed, then call <code>toInputStream</code> to obtain an input stream over the underlying buffer.  Consider the output stream as closed after that point.</p>\n"},{"tags":[],"owner":{"account_id":28530,"reputation":4817,"user_id":76295,"accept_rate":68,"display_name":"Mark"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1480339185,"creation_date":1480339185,"answer_id":40845340,"question_id":1225909,"body_markdown":"I usually try to avoid creating a separate thread because of the increased chance of deadlock, the increased difficulty of understanding the code, and the problems of dealing with exceptions.\r\n\r\nHere&#39;s my proposed solution: a ProducerInputStream that creates content in chunks by repeated calls to produceChunk():\r\n\r\n    public abstract class ProducerInputStream extends InputStream {\r\n    \t\r\n    \tprivate ByteArrayInputStream bin = new ByteArrayInputStream(new byte[0]);\r\n    \tprivate ByteArrayOutputStream bout = new ByteArrayOutputStream();\r\n    \r\n    \t@Override\r\n    \tpublic int read() throws IOException {\r\n    \t\tint result = bin.read();\r\n    \t\twhile ((result == -1) &amp;&amp; newChunk()) {\r\n    \t\t\tresult = bin.read();\r\n    \t\t}\r\n    \t\treturn result;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic int read(byte[] b, int off, int len) throws IOException {\r\n    \t\tint result = bin.read(b, off, len);\r\n    \t\twhile ((result == -1) &amp;&amp; newChunk()) {\r\n    \t\t\tresult = bin.read(b, off, len);\r\n    \t\t}\r\n    \t\treturn result;\r\n    \t}\r\n    \r\n    \tprivate boolean newChunk() {\r\n    \t\tbout.reset();\r\n    \t\tproduceChunk(bout);\r\n    \t\tbin = new ByteArrayInputStream(bout.toByteArray());\r\n    \t\treturn (bout.size() &gt; 0);\r\n    \t}\r\n    \r\n    \tpublic abstract void produceChunk(OutputStream out);\r\n    \r\n    }","title":"Most efficient way to create InputStream from OutputStream","body":"<p>I usually try to avoid creating a separate thread because of the increased chance of deadlock, the increased difficulty of understanding the code, and the problems of dealing with exceptions.</p>\n\n<p>Here's my proposed solution: a ProducerInputStream that creates content in chunks by repeated calls to produceChunk():</p>\n\n<pre><code>public abstract class ProducerInputStream extends InputStream {\n\n    private ByteArrayInputStream bin = new ByteArrayInputStream(new byte[0]);\n    private ByteArrayOutputStream bout = new ByteArrayOutputStream();\n\n    @Override\n    public int read() throws IOException {\n        int result = bin.read();\n        while ((result == -1) &amp;&amp; newChunk()) {\n            result = bin.read();\n        }\n        return result;\n    }\n\n    @Override\n    public int read(byte[] b, int off, int len) throws IOException {\n        int result = bin.read(b, off, len);\n        while ((result == -1) &amp;&amp; newChunk()) {\n            result = bin.read(b, off, len);\n        }\n        return result;\n    }\n\n    private boolean newChunk() {\n        bout.reset();\n        produceChunk(bout);\n        bin = new ByteArrayInputStream(bout.toByteArray());\n        return (bout.size() &gt; 0);\n    }\n\n    public abstract void produceChunk(OutputStream out);\n\n}\n</code></pre>\n"}],"owner":{"account_id":22392,"reputation":4816,"user_id":55150,"accept_rate":86,"display_name":"Vagif Verdi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":113619,"favorite_count":0,"down_vote_count":0,"up_vote_count":93,"accepted_answer_id":1226031,"answer_count":5,"score":93,"last_activity_date":1634066049,"creation_date":1249366391,"question_id":1225909,"body_markdown":"This page: http://blog.ostermiller.org/convert-java-outputstream-inputstream\r\ndescribes how to create an InputStream from OutputStream: \r\n\r\n    new ByteArrayInputStream(out.toByteArray())\r\n\r\nOther alternatives are to use PipedStreams and new threads which is cumbersome.\r\n\r\nI do not like the idea of copying many megabytes to new in memory byte array.\r\nIs there a library that does this more efficiently?\r\n\r\nEDIT:\r\n\r\nBy advice from Laurence Gonsalves, i tried PipedStreams and it turned out they are not that hard to deal with.\r\nHere&#39;s the sample code in clojure:\r\n\r\n    (defn #^PipedInputStream create-pdf-stream [pdf-info]\r\n      (let [in-stream (new PipedInputStream)\r\n            out-stream (PipedOutputStream. in-stream)]\r\n        (.start (Thread. #(;Here you write into out-stream)))\r\n        in-stream))\r\n","title":"Most efficient way to create InputStream from OutputStream","body":"<p>This page: <a href=\"http://blog.ostermiller.org/convert-java-outputstream-inputstream\" rel=\"noreferrer\">http://blog.ostermiller.org/convert-java-outputstream-inputstream</a>\ndescribes how to create an InputStream from OutputStream: </p>\n\n<pre><code>new ByteArrayInputStream(out.toByteArray())\n</code></pre>\n\n<p>Other alternatives are to use PipedStreams and new threads which is cumbersome.</p>\n\n<p>I do not like the idea of copying many megabytes to new in memory byte array.\nIs there a library that does this more efficiently?</p>\n\n<p>EDIT:</p>\n\n<p>By advice from Laurence Gonsalves, i tried PipedStreams and it turned out they are not that hard to deal with.\nHere's the sample code in clojure:</p>\n\n<pre><code>(defn #^PipedInputStream create-pdf-stream [pdf-info]\n  (let [in-stream (new PipedInputStream)\n        out-stream (PipedOutputStream. in-stream)]\n    (.start (Thread. #(;Here you write into out-stream)))\n    in-stream))\n</code></pre>\n"},{"tags":["java","spring","vaadin"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1634066131,"post_id":69545867,"comment_id":122925265,"body_markdown":"Dumb question maybe but is `commons-logging.jar` in your classpath?","body":"Dumb question maybe but is <code>commons-logging.jar</code> in your classpath?"},{"owner":{"account_id":19021181,"reputation":41,"user_id":13885235,"display_name":"Dunmol"},"score":0,"creation_date":1634066447,"post_id":69545867,"comment_id":122925362,"body_markdown":"I don&#39;t know and how can i find out?","body":"I don&#39;t know and how can i find out?"},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1634066453,"post_id":69545867,"comment_id":122925366,"body_markdown":"How did you build the application?","body":"How did you build the application?"},{"owner":{"account_id":19021181,"reputation":41,"user_id":13885235,"display_name":"Dunmol"},"score":0,"creation_date":1634066488,"post_id":69545867,"comment_id":122925373,"body_markdown":"By using the build tool in intelej","body":"By using the build tool in intelej"},{"owner":{"account_id":15426288,"reputation":1199,"user_id":11982497,"display_name":"Tarek Oraby"},"score":2,"creation_date":1634102842,"post_id":69545867,"comment_id":122932721,"body_markdown":"Where in Vaadin website did you download the starter from? start.vaadin.com or elsewhere? Also, did you make any changes to the pom.xml of the downloaded starter?","body":"Where in Vaadin website did you download the starter from? start.vaadin.com or elsewhere? Also, did you make any changes to the pom.xml of the downloaded starter?"},{"owner":{"account_id":18829226,"reputation":223,"user_id":13733426,"display_name":"tstdplt"},"score":0,"creation_date":1634131578,"post_id":69545867,"comment_id":122943739,"body_markdown":"@Dunmol try to delete the build folder / and / or try to go to &quot;File&quot; and then &quot;Invalidate Caches&quot; and then &quot;Invalidate Caches and Restart&quot;.","body":"@Dunmol try to delete the build folder / and / or try to go to &quot;File&quot; and then &quot;Invalidate Caches&quot; and then &quot;Invalidate Caches and Restart&quot;."}],"owner":{"account_id":19021181,"reputation":41,"user_id":13885235,"display_name":"Dunmol"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1634122683,"answer_count":0,"score":1,"last_activity_date":1634066023,"creation_date":1634066023,"question_id":69545867,"body_markdown":"I downloaded a get started the project from the vaadin website but when I try to run it I get this error and don&#39;t know what wrong\r\n\r\nError\r\n\r\n    Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/apache/commons/logging/LogFactory\r\n\tat org.springframework.boot.SpringApplication.&lt;clinit&gt;(SpringApplication.java:206)\r\n\tat com.example.application.Application.main(Application.java:22)\r\n    Caused by: java.lang.ClassNotFoundException: org.apache.commons.logging.LogFactory\r\n    \tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:636)\r\n    \tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:182)\r\n    \tat java.base/jav\r\n\r\n    a.lang.ClassLoader.loadClass(ClassLoader.java:519)\r\n    \t... 2 more\r\n\r\nIt&#39;s telling me that it&#39;s not picking up the class and is happening every time I try to run the code trouigh typing mvnw un the termnal but get greeted by this error\r\n\r\nClass\r\n\r\n        package com.example.application;\r\n    \r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.EnableAutoConfiguration;\r\n    import org.springframework.web.bind.annotation.RestController;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    import org.springframework.boot.web.servlet.support.SpringBootServletInitializer;\r\n    import org.vaadin.artur.helpers.LaunchUtil;\r\n    import com.vaadin.flow.component.dependency.NpmPackage;\r\n    \r\n    \r\n    /**\r\n     * The entry point of the Spring Boot application.\r\n     */\r\n    @RestController\r\n    @SpringBootApplication\r\n    @EnableAutoConfiguration\r\n    @NpmPackage(value = &quot;lumo-css-framework&quot;, version = &quot;^4.0.10&quot;)\r\n    @NpmPackage(value = &quot;line-awesome&quot;, version = &quot;1.3.0&quot;)\r\n    public class Application extends SpringBootServletInitializer {\r\n    \r\n        public static void main(String[] args) {\r\n            LaunchUtil.launchBrowserInDevelopmentMode(SpringApplication.run(Application.class, args));\r\n    \r\n        }\r\n    \r\n    }","title":"NoClassDefFoundError error when trying to start my spring/vaadin application","body":"<p>I downloaded a get started the project from the vaadin website but when I try to run it I get this error and don't know what wrong</p>\n<p>Error</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/apache/commons/logging/LogFactory\nat org.springframework.boot.SpringApplication.&lt;clinit&gt;(SpringApplication.java:206)\nat com.example.application.Application.main(Application.java:22)\nCaused by: java.lang.ClassNotFoundException: org.apache.commons.logging.LogFactory\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:636)\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:182)\n    at java.base/jav\n\na.lang.ClassLoader.loadClass(ClassLoader.java:519)\n    ... 2 more\n</code></pre>\n<p>It's telling me that it's not picking up the class and is happening every time I try to run the code trouigh typing mvnw un the termnal but get greeted by this error</p>\n<p>Class</p>\n<pre><code>    package com.example.application;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.EnableAutoConfiguration;\nimport org.springframework.web.bind.annotation.RestController;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.boot.web.servlet.support.SpringBootServletInitializer;\nimport org.vaadin.artur.helpers.LaunchUtil;\nimport com.vaadin.flow.component.dependency.NpmPackage;\n\n\n/**\n * The entry point of the Spring Boot application.\n */\n@RestController\n@SpringBootApplication\n@EnableAutoConfiguration\n@NpmPackage(value = &quot;lumo-css-framework&quot;, version = &quot;^4.0.10&quot;)\n@NpmPackage(value = &quot;line-awesome&quot;, version = &quot;1.3.0&quot;)\npublic class Application extends SpringBootServletInitializer {\n\n    public static void main(String[] args) {\n        LaunchUtil.launchBrowserInDevelopmentMode(SpringApplication.run(Application.class, args));\n\n    }\n\n}\n</code></pre>\n"},{"tags":["java","netty","nio","chunks"],"answers":[{"tags":[],"owner":{"account_id":3079047,"reputation":136,"user_id":2607715,"display_name":"Nitesh Kant"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1634065901,"creation_date":1634065901,"answer_id":69545838,"question_id":69502517,"body_markdown":"It seems like you have a custom protocol that consists of metadata about the file and then actual file data. Since both metadata handler (ObjectEncoder/Decoder) and file handlers work on buffers, it seems there is no way to distinguish which message is metadata and which is data. If there is no indication as such on the wire and you know that the first message is always metadata then starting the pipeline with the metadata handler and then swapping it later with the file handlers seem like the best option for you.","title":"How to send both commands and files using Netty","body":"<p>It seems like you have a custom protocol that consists of metadata about the file and then actual file data. Since both metadata handler (ObjectEncoder/Decoder) and file handlers work on buffers, it seems there is no way to distinguish which message is metadata and which is data. If there is no indication as such on the wire and you know that the first message is always metadata then starting the pipeline with the metadata handler and then swapping it later with the file handlers seem like the best option for you.</p>\n"}],"owner":{"account_id":22624639,"reputation":55,"user_id":17109929,"display_name":" "},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":258,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69545838,"answer_count":1,"score":0,"last_activity_date":1634065901,"creation_date":1633734665,"question_id":69502517,"body_markdown":"I don&#39;t understand what I&#39;m doing wrong. How to send both commands and files. Below are the server and client pipelines.\r\n\r\nclient pipeline:\r\n\r\n     pipeline.addLast(new ObjectDecoder(ClassResolvers.cacheDisabled(null)));    //in\r\n                pipeline.addLast(new ObjectEncoder());                           //out\r\n                pipeline.addLast(new ChunkedWriteHandler());                     //out\r\n                pipeline.addLast(new FileSenderHandler());                       //in (write in responce)\r\n                pipeline.addLast(new FileInfoSenderHandler());                   //out\r\n\r\nserver pipeline:\r\n\r\n            pipeline.addLast(new ObjectEncoder());                                   //out\r\n            pipeline.addLast(new ObjectDecoder(ClassResolvers.cacheDisabled(null))); //in\r\n            pipeline.addLast(new FileReceiverHandler());                             //in\r\n            pipeline.addLast(new FileInfoReceiverHandler());                         //in (write in responce)\r\n\r\nThe fact is that before I send the file, I send a command (FileInfo) that the file described in this FileInfo will be sent soon. Then the file itself is sent (byte Buf), Like FileInfo, ByteBuf also passes through to ObjectDecoder. At the same time , Java swears on the first chunk:\r\n\r\n    2021-10-09 01:26:02 WARN  DefaultChannelPipeline:1152 - An exceptionCaught() event was fired, and it reached at the tail of the pipeline. It usually means the last handler in the pipeline did not handle the exception.\r\n    io.netty.handler.codec.TooLongFrameException: Adjusted frame length exceeds 1048576: 4292411364 - discarded\r\n    \tat io.netty.handler.codec.LengthFieldBasedFrameDecoder.fail(LengthFieldBasedFrameDecoder.java:503)\r\n    \tat io.netty.handler.codec.LengthFieldBasedFrameDecoder.failIfNecessary(LengthFieldBasedFrameDecoder.java:489)\r\n    \tat io.netty.handler.codec.LengthFieldBasedFrameDecoder.exceededFrameLength(LengthFieldBasedFrameDecoder.java:376)\r\n    \tat io.netty.handler.codec.LengthFieldBasedFrameDecoder.decode(LengthFieldBasedFrameDecoder.java:419)\r\n    \tat io.netty.handler.codec.serialization.ObjectDecoder.decode(ObjectDecoder.java:69)\r\n    \tat io.netty.handler.codec.LengthFieldBasedFrameDecoder.decode(LengthFieldBasedFrameDecoder.java:332)\r\n    \tat io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:508)\r\n    \tat io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:447)\r\n    \tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:276)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)\r\n    \tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)\r\n    \tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\r\n    \tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\r\n    \tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:719)\r\n    \tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:655)\r\n    \tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:581)\r\n    \tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:493)\r\n    \tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)\r\n    \tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n    \tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n    \tat java.base/java.lang.Thread.run(Thread.java:834)\r\n\r\nIf you override decode() and add logs, then you can see that the file transfer does not end after that and each piece passes through the ObjectDecoder and is &quot;decoded to null&quot;. There is no such exception on the remaining chunks.\r\n\r\nWhat have I tried:\r\n\r\n1) In the ObjectDecoder constructor, set the number maxObjectSize =    MAX.INTEGER, but it is still small. \r\n\r\n2) In the decode() set the condition:\r\n\r\n        @Override\r\n        protected Object decode(ChannelHandlerContext ctx, ByteBuf in) throws Exception {\r\n            System.out.println(&quot;decode()&quot;);\r\n            Object o = super.decode(ctx, in);\r\n            System.out.println(o);\r\n    \r\n            if(o == null){\r\n                System.out.println(in);\r\n                return in;\r\n            }\r\n            return o;\r\n        }\r\n\r\nIn this case, as a result, 2048 bytes are missing in the file.\r\n\r\n3)If I dynamically change the pipeline in the code (delete/add an    ObjectDecoder depending on the state), then the files are accepted by    the server. However, I am not sure about the correctness of this    decision.\r\n\r\nMaybe I&#39;m doing something fundamentally wrong? I have read almost all the documentation, and I have been solving this problem for the second week. What to read? Please help me. Thanks!","title":"How to send both commands and files using Netty","body":"<p>I don't understand what I'm doing wrong. How to send both commands and files. Below are the server and client pipelines.</p>\n<p>client pipeline:</p>\n<pre><code> pipeline.addLast(new ObjectDecoder(ClassResolvers.cacheDisabled(null)));    //in\n            pipeline.addLast(new ObjectEncoder());                           //out\n            pipeline.addLast(new ChunkedWriteHandler());                     //out\n            pipeline.addLast(new FileSenderHandler());                       //in (write in responce)\n            pipeline.addLast(new FileInfoSenderHandler());                   //out\n</code></pre>\n<p>server pipeline:</p>\n<pre><code>        pipeline.addLast(new ObjectEncoder());                                   //out\n        pipeline.addLast(new ObjectDecoder(ClassResolvers.cacheDisabled(null))); //in\n        pipeline.addLast(new FileReceiverHandler());                             //in\n        pipeline.addLast(new FileInfoReceiverHandler());                         //in (write in responce)\n</code></pre>\n<p>The fact is that before I send the file, I send a command (FileInfo) that the file described in this FileInfo will be sent soon. Then the file itself is sent (byte Buf), Like FileInfo, ByteBuf also passes through to ObjectDecoder. At the same time , Java swears on the first chunk:</p>\n<pre><code>2021-10-09 01:26:02 WARN  DefaultChannelPipeline:1152 - An exceptionCaught() event was fired, and it reached at the tail of the pipeline. It usually means the last handler in the pipeline did not handle the exception.\nio.netty.handler.codec.TooLongFrameException: Adjusted frame length exceeds 1048576: 4292411364 - discarded\n    at io.netty.handler.codec.LengthFieldBasedFrameDecoder.fail(LengthFieldBasedFrameDecoder.java:503)\n    at io.netty.handler.codec.LengthFieldBasedFrameDecoder.failIfNecessary(LengthFieldBasedFrameDecoder.java:489)\n    at io.netty.handler.codec.LengthFieldBasedFrameDecoder.exceededFrameLength(LengthFieldBasedFrameDecoder.java:376)\n    at io.netty.handler.codec.LengthFieldBasedFrameDecoder.decode(LengthFieldBasedFrameDecoder.java:419)\n    at io.netty.handler.codec.serialization.ObjectDecoder.decode(ObjectDecoder.java:69)\n    at io.netty.handler.codec.LengthFieldBasedFrameDecoder.decode(LengthFieldBasedFrameDecoder.java:332)\n    at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:508)\n    at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:447)\n    at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:276)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:357)\n    at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:379)\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:365)\n    at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919)\n    at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166)\n    at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:719)\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:655)\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:581)\n    at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:493)\n    at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:989)\n    at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\n    at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\n    at java.base/java.lang.Thread.run(Thread.java:834)\n</code></pre>\n<p>If you override decode() and add logs, then you can see that the file transfer does not end after that and each piece passes through the ObjectDecoder and is &quot;decoded to null&quot;. There is no such exception on the remaining chunks.</p>\n<p>What have I tried:</p>\n<ol>\n<li><p>In the ObjectDecoder constructor, set the number maxObjectSize =    MAX.INTEGER, but it is still small.</p>\n</li>\n<li><p>In the decode() set the condition:</p>\n<pre><code> @Override\n protected Object decode(ChannelHandlerContext ctx, ByteBuf in) throws Exception {\n     System.out.println(&quot;decode()&quot;);\n     Object o = super.decode(ctx, in);\n     System.out.println(o);\n\n     if(o == null){\n         System.out.println(in);\n         return in;\n     }\n     return o;\n }\n</code></pre>\n</li>\n</ol>\n<p>In this case, as a result, 2048 bytes are missing in the file.</p>\n<p>3)If I dynamically change the pipeline in the code (delete/add an    ObjectDecoder depending on the state), then the files are accepted by    the server. However, I am not sure about the correctness of this    decision.</p>\n<p>Maybe I'm doing something fundamentally wrong? I have read almost all the documentation, and I have been solving this problem for the second week. What to read? Please help me. Thanks!</p>\n"},{"tags":["java","class","object","import"],"comments":[{"owner":{"account_id":21415032,"reputation":181,"user_id":16720064,"display_name":"0xff"},"score":0,"creation_date":1634060744,"post_id":69544877,"comment_id":122923540,"body_markdown":"If it&#39;s in the same package you are good to go. Otherwise `import package.path.morepaths.Drawing;`","body":"If it&#39;s in the same package you are good to go. Otherwise <code>import package.path.morepaths.Drawing;</code>"}],"answers":[{"tags":[],"owner":{"account_id":5631240,"reputation":1711,"user_id":4700005,"accept_rate":56,"display_name":"skr"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634065782,"creation_date":1634061980,"answer_id":69545107,"question_id":69544877,"body_markdown":"If it&#39;s in the same package, you don&#39;t need to import the class - simply create an object of the class like below:\r\n\r\n    Drawing draw = new Drawing();// this should work for you.\r\n\r\n\r\nIf it&#39;s not in the same package, just **import** the **package name** with class **Drawing**.  \r\n\r\n    package packageName// assuming you have this line already in your code\r\n\r\n    import packageNameWhichContainsTheClassYouWantToImport.Drawing  \r\n    import javax.swing.*;\r\n    \r\n    import java.awt.*;\r\n    \r\n    public class Main {\r\n    \r\n        public static void main(String[] args) {\r\n    \r\n            int w = 640;\r\n    \r\n            int h = 480;\r\n    \r\n            JFrame f = new JFrame();\r\n            Object g = null;\r\n            Drawing dc = new Drawing(Graphics g);\r\n            f.setSize(w, h);\r\n            f.setTitle(&quot;Digits&quot;);\r\n            f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n            f.setVisible(true);\r\n        }\r\n    }\r\n\r\nYou can also create an object without importing the class by using fully qualified name of the class, like\r\n\r\n    myPackage.Drawing draw = new Drawing();","title":"how to import one class to another","body":"<p>If it's in the same package, you don't need to import the class - simply create an object of the class like below:</p>\n<pre><code>Drawing draw = new Drawing();// this should work for you.\n</code></pre>\n<p>If it's not in the same package, just <strong>import</strong> the <strong>package name</strong> with class <strong>Drawing</strong>.</p>\n<pre><code>package packageName// assuming you have this line already in your code\n\nimport packageNameWhichContainsTheClassYouWantToImport.Drawing  \nimport javax.swing.*;\n\nimport java.awt.*;\n\npublic class Main {\n\n    public static void main(String[] args) {\n\n        int w = 640;\n\n        int h = 480;\n\n        JFrame f = new JFrame();\n        Object g = null;\n        Drawing dc = new Drawing(Graphics g);\n        f.setSize(w, h);\n        f.setTitle(&quot;Digits&quot;);\n        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        f.setVisible(true);\n    }\n}\n</code></pre>\n<p>You can also create an object without importing the class by using fully qualified name of the class, like</p>\n<pre><code>myPackage.Drawing draw = new Drawing();\n</code></pre>\n"}],"owner":{"account_id":23014722,"reputation":51,"user_id":17136683,"display_name":"lily"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3118,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1634065782,"creation_date":1634060652,"question_id":69544877,"body_markdown":"I have two classes, one of them is main main. I need to import another class into the maine. I understand that you need to create an object of this class, but how to implement it?\r\n\r\n    // basic main\r\n    \r\n    import javax.swing.*;\r\n    \r\n    import java.awt.*;\r\n    \r\n    public class Main {\r\n    \r\n        public static void main(String[] args) {\r\n    \r\n            int w = 640;\r\n    \r\n            int h = 480;\r\n    \r\n            JFrame f = new JFrame();\r\n            Object g = null;\r\n            Drawing dc = new Drawing(Graphics g);\r\n            f.setSize(w, h);\r\n            f.setTitle(&quot;Digits&quot;);\r\n            f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n            f.setVisible(true);\r\n        }\r\n    }\r\n\r\n&lt;hr&gt;\r\n\r\n    // another class which i need import \r\n    \r\n    import java.awt.*;\r\n    \r\n    import java.awt.geom.*;\r\n    \r\n    import javax.swing.*;\r\n    \r\n    \r\n    class Drawing extends JComponent {\r\n    \r\n        public Drawing() {\r\n    \r\n        }\r\n        @Override\r\n        protected void paintComponent(Graphics g){\r\n            Graphics2D g2d = (Graphics2D) g;\r\n    \r\n            RenderingHints rh = new RenderingHints(\r\n                    RenderingHints.KEY_ANTIALIASING,\r\n                    RenderingHints.VALUE_ANTIALIAS_ON);\r\n            g2d.setRenderingHints(rh);\r\n    \r\n            Path2D.Double curve = new Path2D.Double();\r\n            curve.moveTo(250,400);\r\n            curve.curveTo(350,300,500,300,600,400);\r\n            g2d.draw(curve);\r\n        }\r\n    }","title":"how to import one class to another","body":"<p>I have two classes, one of them is main main. I need to import another class into the maine. I understand that you need to create an object of this class, but how to implement it?</p>\n<pre><code>// basic main\n\nimport javax.swing.*;\n\nimport java.awt.*;\n\npublic class Main {\n\n    public static void main(String[] args) {\n\n        int w = 640;\n\n        int h = 480;\n\n        JFrame f = new JFrame();\n        Object g = null;\n        Drawing dc = new Drawing(Graphics g);\n        f.setSize(w, h);\n        f.setTitle(&quot;Digits&quot;);\n        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        f.setVisible(true);\n    }\n}\n</code></pre>\n<hr>\n<pre><code>// another class which i need import \n\nimport java.awt.*;\n\nimport java.awt.geom.*;\n\nimport javax.swing.*;\n\n\nclass Drawing extends JComponent {\n\n    public Drawing() {\n\n    }\n    @Override\n    protected void paintComponent(Graphics g){\n        Graphics2D g2d = (Graphics2D) g;\n\n        RenderingHints rh = new RenderingHints(\n                RenderingHints.KEY_ANTIALIASING,\n                RenderingHints.VALUE_ANTIALIAS_ON);\n        g2d.setRenderingHints(rh);\n\n        Path2D.Double curve = new Path2D.Double();\n        curve.moveTo(250,400);\n        curve.curveTo(350,300,500,300,600,400);\n        g2d.draw(curve);\n    }\n}\n</code></pre>\n"},{"tags":["java","android","kotlin","annotations"],"comments":[{"owner":{"account_id":5442381,"reputation":16756,"user_id":4409113,"accept_rate":88,"display_name":""},"score":0,"creation_date":1534761820,"post_id":51928954,"comment_id":90807553,"body_markdown":"Problem is in the first line &amp; second : `persianName = R.string.customer_file_id, culomnName = &quot;FileId&quot;` Mostly the suspect: `persianName = R.string.customer_file_id` -  `culomnName = &quot;FileId&quot;` &amp; `name = &quot;FileId&quot;` Take a look: https://stackoverflow.com/a/50679302/4409113","body":"Problem is in the first line &amp; second : <code>persianName = R.string.customer_file_id, culomnName = &quot;FileId&quot;</code> Mostly the suspect: <code>persianName = R.string.customer_file_id</code> -  <code>culomnName = &quot;FileId&quot;</code> &amp; <code>name = &quot;FileId&quot;</code> Take a look: <a href=\"https://stackoverflow.com/a/50679302/4409113\">stackoverflow.com/a/50679302/4409113</a>"}],"answers":[{"tags":[],"owner":{"account_id":297646,"reputation":17903,"user_id":603270,"accept_rate":98,"display_name":"shkschneider"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1534765250,"creation_date":1534765250,"answer_id":51930004,"question_id":51928954,"body_markdown":"Since `R` is compiled during compile-time, I would highly suspect you cannot use such `R.string.customer_file_id` variable in an annotation. Maybe it gets evoluated before Android&#39;s builder actually builds `R`.\r\n\r\nSo I&#39;m afraid you should use a constant instead.","title":"Using java Custom Annotation in kotlin","body":"<p>Since <code>R</code> is compiled during compile-time, I would highly suspect you cannot use such <code>R.string.customer_file_id</code> variable in an annotation. Maybe it gets evoluated before Android's builder actually builds <code>R</code>.</p>\n\n<p>So I'm afraid you should use a constant instead.</p>\n"}],"owner":{"account_id":6685204,"reputation":576,"user_id":5157134,"accept_rate":40,"display_name":"alireza rahmaty"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":789,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":51930004,"answer_count":1,"score":3,"last_activity_date":1634065183,"creation_date":1534761519,"question_id":51928954,"body_markdown":"I&#39;ve created a custom annotation in java and I&#39;m trying to use it in a Kotlin written class but in the compile time, I&#39;m getting an error:\r\n\r\n&gt; Annotation parameter must be a compile-time constant\r\n\r\nHere is the code:\r\n\r\n    @Target(ElementType.FIELD)\r\n    @Retention(RetentionPolicy.CLASS)\r\n    public @interface EdsFieldInfo {\r\n      int persianName();\r\n      String columnName() default &quot;&quot;;\r\n      int domainVals() default -1;\r\n    }\r\n\r\nThis is the place where I&#39;m using the annotation \r\n\r\n    @EdsFieldInfo(persianName = R.string.customer_file_id, columnName = &quot;FileId&quot;)\r\n    @ColumnInfo(name = &quot;FileId&quot;, typeAffinity = ColumnInfo.TEXT)\r\n    var fileId: String?,\r\n\r\nand the error is shown here \r\n\r\n    persianName = R.string.customer_file_id\r\n\r\nI try to find a solution for this but couldn&#39;t please help me to resolve this matter? Thank you. ","title":"Using java Custom Annotation in kotlin","body":"<p>I've created a custom annotation in java and I'm trying to use it in a Kotlin written class but in the compile time, I'm getting an error:</p>\n<blockquote>\n<p>Annotation parameter must be a compile-time constant</p>\n</blockquote>\n<p>Here is the code:</p>\n<pre><code>@Target(ElementType.FIELD)\n@Retention(RetentionPolicy.CLASS)\npublic @interface EdsFieldInfo {\n  int persianName();\n  String columnName() default &quot;&quot;;\n  int domainVals() default -1;\n}\n</code></pre>\n<p>This is the place where I'm using the annotation</p>\n<pre><code>@EdsFieldInfo(persianName = R.string.customer_file_id, columnName = &quot;FileId&quot;)\n@ColumnInfo(name = &quot;FileId&quot;, typeAffinity = ColumnInfo.TEXT)\nvar fileId: String?,\n</code></pre>\n<p>and the error is shown here</p>\n<pre><code>persianName = R.string.customer_file_id\n</code></pre>\n<p>I try to find a solution for this but couldn't please help me to resolve this matter? Thank you.</p>\n"},{"tags":["java","micronaut","micronaut-rest","micronaut-aws"],"comments":[{"owner":{"account_id":401412,"reputation":548,"user_id":767949,"accept_rate":20,"display_name":"null"},"score":0,"creation_date":1633594069,"post_id":69475533,"comment_id":122802436,"body_markdown":"Looks like this can be achieved using configuration per environment. The environment could be 1.listener 2.web. But you may have to enable the controllers based on the condition. More info here https://docs.micronaut.io/latest/guide/#environments","body":"Looks like this can be achieved using configuration per environment. The environment could be 1.listener 2.web. But you may have to enable the controllers based on the condition. More info here <a href=\"https://docs.micronaut.io/latest/guide/#environments\" rel=\"nofollow noreferrer\">docs.micronaut.io/latest/guide/#environments</a>"},{"owner":{"account_id":9148698,"reputation":43,"user_id":6803976,"display_name":"I.M.MK.XLII"},"score":0,"creation_date":1633599416,"post_id":69475533,"comment_id":122804863,"body_markdown":"@null I can do it conditionally as well within properties file, but my question still stands. What property do I have to set/unset to disable the http server?","body":"@null I can do it conditionally as well within properties file, but my question still stands. What property do I have to set/unset to disable the http server?"},{"owner":{"account_id":4327054,"reputation":26992,"user_id":3533584,"display_name":"Jeff Scott Brown"},"score":0,"creation_date":1633628819,"post_id":69475533,"comment_id":122817187,"body_markdown":"Do you have a netty based Micronaut app (as opposed to CLI, gRPC etc) and at startup you want to conditionally startup netty?","body":"Do you have a netty based Micronaut app (as opposed to CLI, gRPC etc) and at startup you want to conditionally startup netty?"},{"owner":{"account_id":9148698,"reputation":43,"user_id":6803976,"display_name":"I.M.MK.XLII"},"score":0,"creation_date":1633666264,"post_id":69475533,"comment_id":122825602,"body_markdown":"@JeffScottBrown yes, that could solve it for me.","body":"@JeffScottBrown yes, that could solve it for me."},{"owner":{"account_id":4327054,"reputation":26992,"user_id":3533584,"display_name":"Jeff Scott Brown"},"score":0,"creation_date":1633698880,"post_id":69475533,"comment_id":122836125,"body_markdown":"You can create a message driven app or a CLI app (see options at https://micronaut.io/launch) and those don&#39;t contain an http server, but that is a separate thing than making a decision at startup time to run an http server or not.","body":"You can create a message driven app or a CLI app (see options at <a href=\"https://micronaut.io/launch\" rel=\"nofollow noreferrer\">micronaut.io/launch</a>) and those don&#39;t contain an http server, but that is a separate thing than making a decision at startup time to run an http server or not."},{"owner":{"account_id":4327054,"reputation":26992,"user_id":3533584,"display_name":"Jeff Scott Brown"},"score":0,"creation_date":1633698964,"post_id":69475533,"comment_id":122836166,"body_markdown":"Do you really need to make the http server decision at startup time, or you just want an app without an http server?","body":"Do you really need to make the http server decision at startup time, or you just want an app without an http server?"},{"owner":{"account_id":9148698,"reputation":43,"user_id":6803976,"display_name":"I.M.MK.XLII"},"score":0,"creation_date":1634013271,"post_id":69475533,"comment_id":122905606,"body_markdown":"@JeffScottBrown what we want to do is run the same app in 2 different modes depending upon some env variable. One that just runs the http server, and another that is just an sqs listener. They are all running on different machines and we don&#39;t know which machines beforehand.","body":"@JeffScottBrown what we want to do is run the same app in 2 different modes depending upon some env variable. One that just runs the http server, and another that is just an sqs listener. They are all running on different machines and we don&#39;t know which machines beforehand."}],"answers":[{"tags":[],"owner":{"account_id":12397658,"reputation":11,"user_id":9036589,"display_name":"Nirav Assar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634065155,"creation_date":1634065155,"answer_id":69545695,"question_id":69475533,"body_markdown":"Another idea to propose is based on the premise that your micronaut fires up both the sqs listener and http server everytime. Then you can configure an environment variable that will be read on startup time. Based on this environment variable you can enable or disable beans across the app that are interfaces to the listener or rest apis to the HTTP app. You can use the `@Requires` on beans, controllers, factories etc. ","title":"How do I disable the http server in a micronaut application","body":"<p>Another idea to propose is based on the premise that your micronaut fires up both the sqs listener and http server everytime. Then you can configure an environment variable that will be read on startup time. Based on this environment variable you can enable or disable beans across the app that are interfaces to the listener or rest apis to the HTTP app. You can use the <code>@Requires</code> on beans, controllers, factories etc.</p>\n"}],"owner":{"account_id":9148698,"reputation":43,"user_id":6803976,"display_name":"I.M.MK.XLII"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1024,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1634065155,"creation_date":1633581386,"question_id":69475533,"body_markdown":"I have a micronaut application that is supposed to run a SQS listener in one container and a regular HTTP server on the other. How do I achieve this via configuration? I can use the following app properties to enable/disable the listener:\r\n```\r\nmicronaut:\r\n  jms:\r\n    sqs:\r\n      enabled: true\r\n```\r\nHow do I enable/disable the web server?\r\n\r\nPS: \r\nI was able to disable the web server in spring boot with `spring.main.web-application-type=NONE`. But I am not able to find the relevant setting in micronaut.","title":"How do I disable the http server in a micronaut application","body":"<p>I have a micronaut application that is supposed to run a SQS listener in one container and a regular HTTP server on the other. How do I achieve this via configuration? I can use the following app properties to enable/disable the listener:</p>\n<pre><code>micronaut:\n  jms:\n    sqs:\n      enabled: true\n</code></pre>\n<p>How do I enable/disable the web server?</p>\n<p>PS:\nI was able to disable the web server in spring boot with <code>spring.main.web-application-type=NONE</code>. But I am not able to find the relevant setting in micronaut.</p>\n"},{"tags":["java","visual-studio","error-handling"],"comments":[{"owner":{"account_id":7216385,"reputation":3691,"user_id":5508719,"accept_rate":85,"display_name":"Julian"},"score":0,"creation_date":1565011450,"post_id":57359396,"comment_id":101205949,"body_markdown":"Hi, can you maybe tell us what error or warning message do you get?","body":"Hi, can you maybe tell us what error or warning message do you get?"}],"answers":[{"tags":[],"owner":{"account_id":16451285,"reputation":761,"user_id":11884637,"display_name":"Pedro Montesinos Navarro"},"down_vote_count":0,"up_vote_count":44,"is_accepted":false,"score":44,"last_activity_date":1583046499,"creation_date":1565014898,"answer_id":57360566,"question_id":57359396,"body_markdown":"I solved it - my mistake.  While executing the program using the terminal I was typing `java Main.java`, whereas the correct execution method was to type `java Main`.","title":"How to fix &quot;error: class found on application class path: Main&quot; in java for visual studio code","body":"<p>I solved it - my mistake.  While executing the program using the terminal I was typing <code>java Main.java</code>, whereas the correct execution method was to type <code>java Main</code>.</p>\n"},{"tags":[],"owner":{"account_id":19246069,"reputation":37,"user_id":14065085,"display_name":"testhaha"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1601905254,"creation_date":1601905254,"answer_id":64209825,"question_id":57359396,"body_markdown":"Step 1:\r\n\r\njavac + Filename.java\r\n\r\nStep 2:\r\n\r\njava + Filename   // execute without add .java\r\n","title":"How to fix &quot;error: class found on application class path: Main&quot; in java for visual studio code","body":"<p>Step 1:</p>\n<p>javac + Filename.java</p>\n<p>Step 2:</p>\n<p>java + Filename   // execute without add .java</p>\n"},{"tags":[],"owner":{"account_id":8751760,"reputation":51,"user_id":6544723,"display_name":"George"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1610503710,"creation_date":1610503197,"answer_id":65694655,"question_id":57359396,"body_markdown":"With Single-file source-code programs which is a new way of executing 1 File Java programs is only available since **Java 11**. You can run the command:\r\njava (Java File Name without .java extension)\r\n\r\n    java Main.java\r\n\r\nThough please take into consideration that this way of executing only works if your Java project is only 1 Java File. \r\n\r\nFYI:\r\nThis *single-file source code* will be executed fully in memory and you can only import code that came with the JDK you are working.\r\nFinally if you want your code to run as fast as possible compile with javac before executing you program.\r\n\r\n    javac Main.java\r\n\r\n    java Main\r\n\r\nJust be careful that there is no Main.class already in the folder, this may cause a confusion to the compiler.","title":"How to fix &quot;error: class found on application class path: Main&quot; in java for visual studio code","body":"<p>With Single-file source-code programs which is a new way of executing 1 File Java programs is only available since <strong>Java 11</strong>. You can run the command:\njava (Java File Name without .java extension)</p>\n<pre><code>java Main.java\n</code></pre>\n<p>Though please take into consideration that this way of executing only works if your Java project is only 1 Java File.</p>\n<p>FYI:\nThis <em>single-file source code</em> will be executed fully in memory and you can only import code that came with the JDK you are working.\nFinally if you want your code to run as fast as possible compile with javac before executing you program.</p>\n<pre><code>javac Main.java\n\njava Main\n</code></pre>\n<p>Just be careful that there is no Main.class already in the folder, this may cause a confusion to the compiler.</p>\n"}],"owner":{"account_id":16451285,"reputation":761,"user_id":11884637,"display_name":"Pedro Montesinos Navarro"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53362,"favorite_count":0,"down_vote_count":0,"up_vote_count":22,"answer_count":3,"score":22,"last_activity_date":1634065005,"creation_date":1565010891,"question_id":57359396,"body_markdown":"this is my first time posting here and would like how to solve this error message. It appears only sometimes and only lets me build on a program called Main.java. I&#39;m a begginer programmer so please bear with me, this is the code im trying to run:\r\n\r\n\r\n    import java.util.Scanner;\r\n    import java.text.NumberFormat;\r\n    \r\n    \r\n    public class Main {\r\n        public static void main(String[] args) {\r\n    \r\n            Scanner priceScanner = new Scanner(System.in);\r\n            System.out.print(&quot;Price: &quot;);\r\n            int price = priceScanner.nextInt();\r\n    \r\n            Scanner interestScanner = new Scanner(System.in);\r\n            System.out.print(&quot;Interest rate: &quot;);\r\n            double interest = interestScanner.nextDouble();\r\n    \r\n            Scanner numberOfPaymentsScanner = new Scanner(System.in);\r\n            System.out.print(&quot;Number of payments: &quot;);\r\n            int numberOfPayments = numberOfPaymentsScanner.nextInt();\r\n    \r\n            Double monthlyInterest = interest / 1200;\r\n    \r\n            Double result = ((double)price * ((interest * Math.pow((1 + \r\n    interest), (double)numberOfPayments))/((Math.pow((1 + interest), \r\n    (double)numberOfPayments)) - 1)));\r\n    \r\n            NumberFormat currency = NumberFormat.getCurrencyInstance();\r\n            String mortgage = currency.format(result);\r\n    \r\n            System.out.println(&quot;Your mortgage is: &quot; + mortgage);\r\n        }\r\n    }\r\n\r\nI haven&#39;t seen any comprehensible ways to solve this problem online, and the only thing i think could solve it is to reinstall java in another drive and change the classpath. \r\n\r\nThanks for your attention.","title":"How to fix &quot;error: class found on application class path: Main&quot; in java for visual studio code","body":"<p>this is my first time posting here and would like how to solve this error message. It appears only sometimes and only lets me build on a program called Main.java. I'm a begginer programmer so please bear with me, this is the code im trying to run:</p>\n\n<pre><code>import java.util.Scanner;\nimport java.text.NumberFormat;\n\n\npublic class Main {\n    public static void main(String[] args) {\n\n        Scanner priceScanner = new Scanner(System.in);\n        System.out.print(\"Price: \");\n        int price = priceScanner.nextInt();\n\n        Scanner interestScanner = new Scanner(System.in);\n        System.out.print(\"Interest rate: \");\n        double interest = interestScanner.nextDouble();\n\n        Scanner numberOfPaymentsScanner = new Scanner(System.in);\n        System.out.print(\"Number of payments: \");\n        int numberOfPayments = numberOfPaymentsScanner.nextInt();\n\n        Double monthlyInterest = interest / 1200;\n\n        Double result = ((double)price * ((interest * Math.pow((1 + \ninterest), (double)numberOfPayments))/((Math.pow((1 + interest), \n(double)numberOfPayments)) - 1)));\n\n        NumberFormat currency = NumberFormat.getCurrencyInstance();\n        String mortgage = currency.format(result);\n\n        System.out.println(\"Your mortgage is: \" + mortgage);\n    }\n}\n</code></pre>\n\n<p>I haven't seen any comprehensible ways to solve this problem online, and the only thing i think could solve it is to reinstall java in another drive and change the classpath. </p>\n\n<p>Thanks for your attention.</p>\n"},{"tags":["java","typescript","generics"],"comments":[{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":4,"creation_date":1634064604,"post_id":69545546,"comment_id":122924752,"body_markdown":"No. Java uses a [nominal](https://en.wikipedia.org/wiki/Nominal_type_system) type system, whereas typescript uses a [structural](https://en.wikipedia.org/wiki/Structural_type_system) one. They are very different.","body":"No. Java uses a <a href=\"https://en.wikipedia.org/wiki/Nominal_type_system\" rel=\"nofollow noreferrer\">nominal</a> type system, whereas typescript uses a <a href=\"https://en.wikipedia.org/wiki/Structural_type_system\" rel=\"nofollow noreferrer\">structural</a> one. They are very different."},{"owner":{"account_id":1223835,"reputation":75858,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":2,"creation_date":1634064871,"post_id":69545546,"comment_id":122924855,"body_markdown":"It&#39;s possible without a base _class_, but not without a base _type_ (e.g., `interface HasId`).","body":"It&#39;s possible without a base <i>class</i>, but not without a base <i>type</i> (e.g., <code>interface HasId</code>)."},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1634066633,"post_id":69545546,"comment_id":122925426,"body_markdown":"In addition to doing it with a base type, it can also be done with reflection.","body":"In addition to doing it with a base type, it can also be done with reflection."}],"owner":{"account_id":6020579,"reputation":2982,"user_id":4727792,"accept_rate":59,"display_name":"Henny Lee"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":119,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1634064300,"creation_date":1634064300,"question_id":69545546,"body_markdown":"In Typescript I can write the following function to check whether an object has an id:\r\n\r\n```\r\nfunction hasId&lt;T extends { id?: number | null }&gt;(something: T): boolean {\r\n  if (!something) {\r\n    return false;\r\n  }\r\n\r\n  return something.id != null;\r\n}\r\n```\r\n\r\nBut is this also possible in Java without using a base class because I have no access to the classes. All the classes implements `Serializable` though.","title":"Creating a generic function in Java with an object containing an id","body":"<p>In Typescript I can write the following function to check whether an object has an id:</p>\n<pre><code>function hasId&lt;T extends { id?: number | null }&gt;(something: T): boolean {\n  if (!something) {\n    return false;\n  }\n\n  return something.id != null;\n}\n</code></pre>\n<p>But is this also possible in Java without using a base class because I have no access to the classes. All the classes implements <code>Serializable</code> though.</p>\n"},{"tags":["java","spring-jms"],"comments":[{"owner":{"account_id":17019087,"reputation":736,"user_id":12312156,"display_name":"Faramarz Afzali"},"score":0,"creation_date":1634061244,"post_id":69544353,"comment_id":122923690,"body_markdown":"The exception can be anything in `validateEventRequest(event)` For example, I save the Event to the DB, so if I receive the message again and again I face with unique constraint (FIELD) violated exception JPA or if some remote APIs are down and etc.","body":"The exception can be anything in <code>validateEventRequest(event)</code> For example, I save the Event to the DB, so if I receive the message again and again I face with unique constraint (FIELD) violated exception JPA or if some remote APIs are down and etc."},{"owner":{"account_id":11434008,"reputation":30690,"user_id":8381946,"display_name":"Justin Bertram"},"score":0,"creation_date":1634061596,"post_id":69544353,"comment_id":122923767,"body_markdown":"Try catching `Exception` instead of `JMSException | IOException`. Throwing the exception out of the listener method is probably triggering the redelivery.","body":"Try catching <code>Exception</code> instead of <code>JMSException | IOException</code>. Throwing the exception out of the listener method is probably triggering the redelivery."},{"owner":{"account_id":17019087,"reputation":736,"user_id":12312156,"display_name":"Faramarz Afzali"},"score":0,"creation_date":1634063274,"post_id":69544353,"comment_id":122924285,"body_markdown":"`Throwing the exception out of the listener method is probably triggering the redelivery.` This is exactly what I want to disable, because I have another exception in the `validateEventRequest(event)` process. Is it possible to shut down the redelivery?","body":"<code>Throwing the exception out of the listener method is probably triggering the redelivery.</code> This is exactly what I want to disable, because I have another exception in the <code>validateEventRequest(event)</code> process. Is it possible to shut down the redelivery?"},{"owner":{"account_id":17019087,"reputation":736,"user_id":12312156,"display_name":"Faramarz Afzali"},"score":0,"creation_date":1634063588,"post_id":69544353,"comment_id":122924411,"body_markdown":"I caught `Exception` instead of JMSException | IOException, Now It just throws the exception one time and it&#39;s good but why this could not be done with JMSException?","body":"I caught <code>Exception</code> instead of JMSException | IOException, Now It just throws the exception one time and it&#39;s good but why this could not be done with JMSException?"},{"owner":{"account_id":11434008,"reputation":30690,"user_id":8381946,"display_name":"Justin Bertram"},"score":1,"creation_date":1634064396,"post_id":69544353,"comment_id":122924687,"body_markdown":"I posted an answer that hopefully clarifies things.","body":"I posted an answer that hopefully clarifies things."}],"answers":[{"tags":[],"owner":{"account_id":11434008,"reputation":30690,"user_id":8381946,"display_name":"Justin Bertram"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1634064260,"creation_date":1634064260,"answer_id":69545539,"question_id":69544353,"body_markdown":"It&#39;s likely that your `validateEventRequest(event)` is throwing something other than `JMSException` or `IOException` (or one of their subclasses) which means the `catch` in your `receive` will *not* actually catch it. I believe that when this exception is thrown out of your `receive` method that will trigger redelivery on the message. I recommend you catch the more generic `Exception` instead, e.g.:\r\n\r\n```java\r\n@Override\r\n@JmsListener(destination = &quot;${mq.receive_queue}&quot;)\r\npublic void receive(Message message) {\r\n    try {\r\n        String jsonEvent = ((TextMessage) message).getText();\r\n        Event event = objectMapper.readValue(jsonEvent, Event.class);\r\n        System.out.println(event.toString());\r\n        message.acknowledge();\r\n        validateEventRequest(event);\r\n    } catch (Exception e) {\r\n        e.printStackTrace();\r\n    }\r\n}\r\n```\r\n\r\nAlso, it&#39;s worth noting that changing how the message is sent has no impact on how the message is received. If you want to change how the message is received then you need to change the receiver application.","title":"Stop receiving again and again messages in consumer of the queue when an exception occurs in Spring JMS","body":"<p>It's likely that your <code>validateEventRequest(event)</code> is throwing something other than <code>JMSException</code> or <code>IOException</code> (or one of their subclasses) which means the <code>catch</code> in your <code>receive</code> will <em>not</em> actually catch it. I believe that when this exception is thrown out of your <code>receive</code> method that will trigger redelivery on the message. I recommend you catch the more generic <code>Exception</code> instead, e.g.:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\n@JmsListener(destination = &quot;${mq.receive_queue}&quot;)\npublic void receive(Message message) {\n    try {\n        String jsonEvent = ((TextMessage) message).getText();\n        Event event = objectMapper.readValue(jsonEvent, Event.class);\n        System.out.println(event.toString());\n        message.acknowledge();\n        validateEventRequest(event);\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n<p>Also, it's worth noting that changing how the message is sent has no impact on how the message is received. If you want to change how the message is received then you need to change the receiver application.</p>\n"}],"owner":{"account_id":17019087,"reputation":736,"user_id":12312156,"display_name":"Faramarz Afzali"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":794,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69545539,"answer_count":1,"score":1,"last_activity_date":1634064260,"creation_date":1634057895,"question_id":69544353,"body_markdown":"I send a message from the sender application as below.\r\n\r\n``` java\r\n    @GetMapping(&quot;send/event&quot;)\r\n    public void sendEvent() {\r\n        try {\r\n            String stringEvent = objectMapper.writeValueAsString(getEvent());\r\n            jmsTemplate.setSessionAcknowledgeMode(Session.CLIENT_ACKNOWLEDGE);\r\n            jmsTemplate.setSessionTransacted(false);\r\n            jmsTemplate.convertAndSend(SEND_QUEUE_NAME, stringEvent);\r\n        } catch (JmsException | JsonProcessingException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n```\r\n\r\nAnd in the receiver application, I receive the message as below.\r\n\r\n\r\n``` java\r\n    @Override\r\n    @JmsListener(destination = &quot;${mq.receive_queue}&quot;)\r\n    public void receive(Message message) {\r\n        try {\r\n            String jsonEvent = ((TextMessage) message).getText();\r\n            Event event = objectMapper.readValue(jsonEvent, Event.class);\r\n            System.out.println(event.toString());\r\n            message.acknowledge();\r\n            validateEventRequest(event);\r\n        } catch (JMSException | IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n```\r\n\r\nThe main problem is when the `validateEventRequest(event);` has called. Because in this method, I have several services and scenarios that might raise an exception. I don&#39;t want if an exception threw, the message rollback to the queue and receive again. I just want to consume the message completely when an exception occurs.\r\nBecause of that, I added these lines to the sender application.\r\n\r\n``` java\r\n  jmsTemplate.setSessionAcknowledgeMode(Session.CLIENT_ACKNOWLEDGE);\r\n  jmsTemplate.setSessionTransacted(false);\r\n```\r\nBut nothing changes. I appreciate if anyone has idea about this.\r\n\r\n\r\n**Additional information**  \r\nI called these in receive method of the receiver application\r\n\r\n``` java\r\nint deliveryMode = jmsTemplate.getDeliveryMode(); --&gt;2\r\nint sessionAcknowledgeMode = jmsTemplate.getSessionAcknowledgeMode(); --&gt;1\r\nint jmsDeliveryMode = message.getJMSDeliveryMode(); --&gt;2\r\nboolean jmsRedelivered = message.getJMSRedelivered(); --&gt;true\r\n```\r\n","title":"Stop receiving again and again messages in consumer of the queue when an exception occurs in Spring JMS","body":"<p>I send a message from the sender application as below.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @GetMapping(&quot;send/event&quot;)\n    public void sendEvent() {\n        try {\n            String stringEvent = objectMapper.writeValueAsString(getEvent());\n            jmsTemplate.setSessionAcknowledgeMode(Session.CLIENT_ACKNOWLEDGE);\n            jmsTemplate.setSessionTransacted(false);\n            jmsTemplate.convertAndSend(SEND_QUEUE_NAME, stringEvent);\n        } catch (JmsException | JsonProcessingException e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre>\n<p>And in the receiver application, I receive the message as below.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Override\n    @JmsListener(destination = &quot;${mq.receive_queue}&quot;)\n    public void receive(Message message) {\n        try {\n            String jsonEvent = ((TextMessage) message).getText();\n            Event event = objectMapper.readValue(jsonEvent, Event.class);\n            System.out.println(event.toString());\n            message.acknowledge();\n            validateEventRequest(event);\n        } catch (JMSException | IOException e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre>\n<p>The main problem is when the <code>validateEventRequest(event);</code> has called. Because in this method, I have several services and scenarios that might raise an exception. I don't want if an exception threw, the message rollback to the queue and receive again. I just want to consume the message completely when an exception occurs.\nBecause of that, I added these lines to the sender application.</p>\n<pre class=\"lang-java prettyprint-override\"><code>  jmsTemplate.setSessionAcknowledgeMode(Session.CLIENT_ACKNOWLEDGE);\n  jmsTemplate.setSessionTransacted(false);\n</code></pre>\n<p>But nothing changes. I appreciate if anyone has idea about this.</p>\n<p><strong>Additional information</strong><br />\nI called these in receive method of the receiver application</p>\n<pre class=\"lang-java prettyprint-override\"><code>int deliveryMode = jmsTemplate.getDeliveryMode(); --&gt;2\nint sessionAcknowledgeMode = jmsTemplate.getSessionAcknowledgeMode(); --&gt;1\nint jmsDeliveryMode = message.getJMSDeliveryMode(); --&gt;2\nboolean jmsRedelivered = message.getJMSRedelivered(); --&gt;true\n</code></pre>\n"},{"tags":["java","encryption","java-8","jce"],"answers":[{"tags":[],"owner":{"account_id":3159259,"reputation":109668,"user_id":2670892,"display_name":"greg-449"},"down_vote_count":1,"up_vote_count":54,"is_accepted":true,"score":53,"last_activity_date":1622133463,"creation_date":1467234875,"answer_id":38110167,"question_id":38108972,"body_markdown":"This is not the `Library` folder in your home directory, this is the `Library` folder in the root file system on your main disk.\r\n\r\nSo in Terminal the command\r\n\r\n&lt;!-- language: none --&gt;\r\n\r\n    cd /Library/Java/JavaVirtualMachines/jdk1.8.0_91.jdk\r\n\r\nshould work.\r\n\r\nFor different releases of Java replace `jdk1.8.0_91.jdk` with the appropriate release.\r\n\r\nTo list what is in the directory use:\r\n```none\r\nls /Library/Java/JavaVirtualMachines\r\n```","title":"No Java folder located in Library despite JDK installation","body":"<p>This is not the <code>Library</code> folder in your home directory, this is the <code>Library</code> folder in the root file system on your main disk.</p>\n<p>So in Terminal the command</p>\n<pre class=\"lang-none prettyprint-override\"><code>cd /Library/Java/JavaVirtualMachines/jdk1.8.0_91.jdk\n</code></pre>\n<p>should work.</p>\n<p>For different releases of Java replace <code>jdk1.8.0_91.jdk</code> with the appropriate release.</p>\n<p>To list what is in the directory use:</p>\n<pre class=\"lang-none prettyprint-override\"><code>ls /Library/Java/JavaVirtualMachines\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6957693,"reputation":21,"user_id":5338235,"display_name":"Chadi Rahme"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1634064255,"creation_date":1634064255,"answer_id":69545537,"question_id":38108972,"body_markdown":"Go to Macintosh HD/Library/Java\r\nnot to username/Library\r\n","title":"No Java folder located in Library despite JDK installation","body":"<p>Go to Macintosh HD/Library/Java\nnot to username/Library</p>\n"}],"owner":{"account_id":8729714,"reputation":310,"user_id":6530218,"display_name":"Tyler"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32053,"favorite_count":0,"down_vote_count":0,"up_vote_count":21,"accepted_answer_id":38110167,"answer_count":2,"score":21,"last_activity_date":1634064255,"creation_date":1467230218,"question_id":38108972,"body_markdown":"Currently running OSX El Capitan on a recently set up computer. I&#39;m trying to set up Java&#39;s unlimited crypto policy which requires me to modify some files within my current jre, but I can&#39;t find the Java folder that is supposed to be located within Library.\r\n\r\nI&#39;ve run `/usr/libexec/java_home` which shows me `/Library/Java/JavaVirtualMachines/jdk1.8.0_91.jdk/Contents/Home` however within my Library folder, there is no Java folder, even when I try and navigate through terminal it says Java folder doesn&#39;t exist. After trying to reinstall JDK 1.8, still no luck and I&#39;m out of ideas. ","title":"No Java folder located in Library despite JDK installation","body":"<p>Currently running OSX El Capitan on a recently set up computer. I'm trying to set up Java's unlimited crypto policy which requires me to modify some files within my current jre, but I can't find the Java folder that is supposed to be located within Library.</p>\n\n<p>I've run <code>/usr/libexec/java_home</code> which shows me <code>/Library/Java/JavaVirtualMachines/jdk1.8.0_91.jdk/Contents/Home</code> however within my Library folder, there is no Java folder, even when I try and navigate through terminal it says Java folder doesn't exist. After trying to reinstall JDK 1.8, still no luck and I'm out of ideas. </p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":11003756,"reputation":735,"user_id":8303430,"display_name":"Rituraj"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1632442499,"creation_date":1632440838,"answer_id":69308024,"question_id":69307977,"body_markdown":"the looping is incorrect, instead of `else if` you should just use `if` right after this comment `// the two loops here work perfectly`\r\n\r\n```\r\npackage org.rj.stackoverflow;\r\n\r\nimport java.text.*;\r\nimport java.util.Scanner;\r\nimport javax.swing.JOptionPane;\r\n\r\n\r\npublic class RandomStuff {\r\n    public static void main(String[] args) {\r\n\r\n        //objects\r\n        Scanner dakeyboard = new Scanner(System.in);\r\n//************************************************************\r\n        String xd = &quot;&quot;;\r\n\r\n//creates popup window for user to enter something\r\n        String x = JOptionPane.showInputDialog(&quot;enter (yes\\\\no)&quot;);\r\n\r\n// this will loop until you enter yes or no then stop looping but nothing prints\r\n//I tried to express the logic statement &quot;if it is not true that x = yes or x = no then loop until it is\r\n\r\n        if (!((&quot;yes&quot;.equals(x)) || (&quot;no&quot;.equals(x)))) {\r\n            do {\r\n                x = JOptionPane.showInputDialog(&quot;please enter (yes\\\\no)&quot;);\r\n            } while (!((&quot;yes&quot;.equals(x)) || (&quot;no&quot;.equals(x))));\r\n        }\r\n\r\n// the two loops here work perfectly\r\n        if (&quot;yes&quot;.equals(x)) {\r\n            xd = &quot;YES&quot;;\r\n        } else if (&quot;no&quot;.equals(x)) {\r\n            xd = &quot;NO&quot;;\r\n        }\r\n\r\n//************************************************************\r\n        System.out.println(xd);\r\n        //************************************************************\r\n\r\n        dakeyboard.close();\r\n    }\r\n\r\n}\r\n```\r\nif you would like to improve code, do below\r\n```\r\nString x;\r\ndo {\r\n   x = JOptionPane.showInputDialog(&quot;please enter (yes\\\\no)&quot;);\r\n} while(!x.equals(&quot;yes&quot;) &amp;&amp; !x.equals(&quot;no&quot;));\r\nSystem.out.println(x.toUpperCase());","title":"Java loop asking for input until user enters something acceptable","body":"<p>the looping is incorrect, instead of <code>else if</code> you should just use <code>if</code> right after this comment <code>// the two loops here work perfectly</code></p>\n<pre><code>package org.rj.stackoverflow;\n\nimport java.text.*;\nimport java.util.Scanner;\nimport javax.swing.JOptionPane;\n\n\npublic class RandomStuff {\n    public static void main(String[] args) {\n\n        //objects\n        Scanner dakeyboard = new Scanner(System.in);\n//************************************************************\n        String xd = &quot;&quot;;\n\n//creates popup window for user to enter something\n        String x = JOptionPane.showInputDialog(&quot;enter (yes\\\\no)&quot;);\n\n// this will loop until you enter yes or no then stop looping but nothing prints\n//I tried to express the logic statement &quot;if it is not true that x = yes or x = no then loop until it is\n\n        if (!((&quot;yes&quot;.equals(x)) || (&quot;no&quot;.equals(x)))) {\n            do {\n                x = JOptionPane.showInputDialog(&quot;please enter (yes\\\\no)&quot;);\n            } while (!((&quot;yes&quot;.equals(x)) || (&quot;no&quot;.equals(x))));\n        }\n\n// the two loops here work perfectly\n        if (&quot;yes&quot;.equals(x)) {\n            xd = &quot;YES&quot;;\n        } else if (&quot;no&quot;.equals(x)) {\n            xd = &quot;NO&quot;;\n        }\n\n//************************************************************\n        System.out.println(xd);\n        //************************************************************\n\n        dakeyboard.close();\n    }\n\n}\n</code></pre>\n<p>if you would like to improve code, do below</p>\n<pre><code>String x;\ndo {\n   x = JOptionPane.showInputDialog(&quot;please enter (yes\\\\no)&quot;);\n} while(!x.equals(&quot;yes&quot;) &amp;&amp; !x.equals(&quot;no&quot;));\nSystem.out.println(x.toUpperCase());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15643746,"reputation":1,"user_id":11286441,"display_name":"Youssef Agagg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1632441612,"creation_date":1632441612,"answer_id":69308096,"question_id":69307977,"body_markdown":"simply you can achieve what you want by that\r\n\r\n    String x =&quot;&quot;;\r\n    while  (!(&quot;yes&quot;.equals(x)||&quot;no&quot;.equals(x))) {\r\n        x = JOptionPane.showInputDialog(&quot;please enter (yes\\\\no)&quot;);\r\n       \r\n    }\r\n    System.out.println(x.toUpperCase());\r\n\r\n\r\n","title":"Java loop asking for input until user enters something acceptable","body":"<p>simply you can achieve what you want by that</p>\n<pre><code>String x =&quot;&quot;;\nwhile  (!(&quot;yes&quot;.equals(x)||&quot;no&quot;.equals(x))) {\n    x = JOptionPane.showInputDialog(&quot;please enter (yes\\\\no)&quot;);\n   \n}\nSystem.out.println(x.toUpperCase());\n</code></pre>\n"}],"owner":{"account_id":22842092,"reputation":79,"user_id":16988911,"display_name":"raxnocafi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":361,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69308024,"answer_count":2,"score":0,"last_activity_date":1634063587,"creation_date":1632440278,"question_id":69307977,"body_markdown":"As an exercise, I want to create a popup window where user enters a string,\r\nwhat I want to achieve:\r\n\r\n1. If they enter yes, print YES\r\n2) If they enter no, print NO\r\n3) If they enter something else, loop until they enter yes or no then print YES or NO\r\n\r\n1 and 2 work, 3 will loop but then print nothing after yes or no is entered\r\n\r\nany ideas?\r\n\r\n \r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n\r\n    package harmony.randomstuff;\r\n    //imports\r\n    import java.text.*;\r\n    import java.util.Scanner;\r\n    import javax.swing.JOptionPane;\r\n\r\n\r\n    public class RandomStuff {\r\n        public static void main (String[]args) {\r\n           \r\n            //objects\r\n    Scanner dakeyboard = new Scanner(System.in);\r\n    //************************************************************\r\n    String xd = &quot;&quot;;\r\n\r\n    //creates popup window for user to enter something\r\n    String x = JOptionPane.showInputDialog(&quot;enter (yes\\\\no)&quot;);\r\n\r\n    // this will loop until you enter yes or no then stop looping but nothing prints\r\n    //I tried to express the logic statement &quot;if it is not true that x = yes or x = no then loop until it is\r\n\r\n    if (!((&quot;yes&quot;.equals(x))||(&quot;no&quot;.equals(x)))) {\r\n        do { x = JOptionPane.showInputDialog(&quot;please enter (yes\\\\no)&quot;);\r\n        } while (!((&quot;yes&quot;.equals(x))||(&quot;no&quot;.equals(x))));\r\n    }\r\n\r\n    // the two loops here work perfectly\r\n    else if (&quot;yes&quot;.equals(x)){\r\n        xd=&quot;YES&quot;;\r\n    }\r\n\r\n    else if (&quot;no&quot;.equals(x)){\r\n        xd=&quot;NO&quot;;\r\n    }\r\n\r\n    //************************************************************\r\n    System.out.println(xd);\r\n     //************************************************************    \r\n\r\n            dakeyboard.close();\r\n        }\r\n        \r\n    }\r\n\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n\r\n","title":"Java loop asking for input until user enters something acceptable","body":"<p>As an exercise, I want to create a popup window where user enters a string,\nwhat I want to achieve:</p>\n<ol>\n<li>If they enter yes, print YES</li>\n</ol>\n<ol start=\"2\">\n<li>If they enter no, print NO</li>\n<li>If they enter something else, loop until they enter yes or no then print YES or NO</li>\n</ol>\n<p>1 and 2 work, 3 will loop but then print nothing after yes or no is entered</p>\n<p>any ideas?</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>package harmony.randomstuff;\n//imports\nimport java.text.*;\nimport java.util.Scanner;\nimport javax.swing.JOptionPane;\n\n\npublic class RandomStuff {\n    public static void main (String[]args) {\n       \n        //objects\nScanner dakeyboard = new Scanner(System.in);\n//************************************************************\nString xd = \"\";\n\n//creates popup window for user to enter something\nString x = JOptionPane.showInputDialog(\"enter (yes\\\\no)\");\n\n// this will loop until you enter yes or no then stop looping but nothing prints\n//I tried to express the logic statement \"if it is not true that x = yes or x = no then loop until it is\n\nif (!((\"yes\".equals(x))||(\"no\".equals(x)))) {\n    do { x = JOptionPane.showInputDialog(\"please enter (yes\\\\no)\");\n    } while (!((\"yes\".equals(x))||(\"no\".equals(x))));\n}\n\n// the two loops here work perfectly\nelse if (\"yes\".equals(x)){\n    xd=\"YES\";\n}\n\nelse if (\"no\".equals(x)){\n    xd=\"NO\";\n}\n\n//************************************************************\nSystem.out.println(xd);\n //************************************************************    \n\n        dakeyboard.close();\n    }\n    \n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":["java","html","swing","ms-word","clipboard"],"answers":[{"tags":[],"owner":{"account_id":7561048,"reputation":467,"user_id":10079274,"display_name":"moi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634063553,"creation_date":1634063553,"answer_id":69545415,"question_id":69545366,"body_markdown":"Microsoft word understands unicode. Your code is using ascii text.\r\n\r\nSee here for the difference - https://www.smashingmagazine.com/2012/06/all-\r\nabout-unicode-utf8-character-sets/ \r\n\r\nAnother issue may be the null termination. In your case, the issue seems to be the `ot.toByteArray` - a byte array will be fine for 8-bit ascii. Unicode uses \r\na 16-bit short for storage. ","title":"Copy styled text from a JTextPane to Microsoft Word","body":"<p>Microsoft word understands unicode. Your code is using ascii text.</p>\n<p>See here for the difference - <a href=\"https://www.smashingmagazine.com/2012/06/all-\" rel=\"nofollow noreferrer\">https://www.smashingmagazine.com/2012/06/all-</a>\nabout-unicode-utf8-character-sets/</p>\n<p>Another issue may be the null termination. In your case, the issue seems to be the <code>ot.toByteArray</code> - a byte array will be fine for 8-bit ascii. Unicode uses\na 16-bit short for storage.</p>\n"}],"owner":{"account_id":18629879,"reputation":3,"user_id":13578078,"display_name":"Sebastian"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1634063553,"creation_date":1634063288,"question_id":69545366,"body_markdown":"I want to copy styled text from a JTextPane to Microsoft Word. I already use this code, and it works, but it gets wrong with the accents:\r\n\r\n        Clipboard clp = Toolkit.getDefaultToolkit().getSystemClipboard();\r\n        ByteArrayOutputStream ot = new ByteArrayOutputStream();\r\n        RTFEditorKit kit = new RTFEditorKit();\r\n        try {\r\n            kit.write(ot, jTextPane1.getDocument(), 0, jTextPane1.getDocument().getLength());\r\n            ot.flush();\r\n            DataHandler dh = new DataHandler(ot.toByteArray(), kit.getContentType());\r\n            clp.setContents(dh, null);\r\n        } catch (IOException | BadLocationException e1) {\r\n\r\n        }\r\n\r\nWhen I paste something like caf&#233; to Microsoft Word, it looks like this: Caf&#200; .  And with the other it would be:  &#225;&#233;&#237;&#243;&#250; &#193;&#201;&#205;&#211;&#218;   -&gt;  &#183;&#200;&#204;&#219; &#161;&#213;\r\n\r\n\r\nThe text in the JTextPane is html. \r\n","title":"Copy styled text from a JTextPane to Microsoft Word","body":"<p>I want to copy styled text from a JTextPane to Microsoft Word. I already use this code, and it works, but it gets wrong with the accents:</p>\n<pre><code>    Clipboard clp = Toolkit.getDefaultToolkit().getSystemClipboard();\n    ByteArrayOutputStream ot = new ByteArrayOutputStream();\n    RTFEditorKit kit = new RTFEditorKit();\n    try {\n        kit.write(ot, jTextPane1.getDocument(), 0, jTextPane1.getDocument().getLength());\n        ot.flush();\n        DataHandler dh = new DataHandler(ot.toByteArray(), kit.getContentType());\n        clp.setContents(dh, null);\n    } catch (IOException | BadLocationException e1) {\n\n    }\n</code></pre>\n<p>When I paste something like caf to Microsoft Word, it looks like this: Caf .  And with the other it would be:      -&gt;   </p>\n<p>The text in the JTextPane is html.</p>\n"},{"tags":["java","decimalformat"],"comments":[{"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"score":0,"creation_date":1634061338,"post_id":69544969,"comment_id":122923703,"body_markdown":"`new DecimalFormat(&quot;#.#&quot;).format(9.95)` gives me `9.9`.","body":"<code>new DecimalFormat(&quot;#.#&quot;).format(9.95)</code> gives me <code>9.9</code>."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1634061660,"post_id":69544969,"comment_id":122923791,"body_markdown":"DecimalFormat [inherits a setRoundingMode method](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/text/NumberFormat.html#setRoundingMode(java.math.RoundingMode)).","body":"DecimalFormat <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/text/NumberFormat.html#setRoundingMode(java.math.RoundingMode)\" rel=\"nofollow noreferrer\">inherits a setRoundingMode method</a>."},{"owner":{"account_id":4887270,"reputation":595,"user_id":3939356,"accept_rate":52,"display_name":"Pranesh Sahu"},"score":0,"creation_date":1634061929,"post_id":69544969,"comment_id":122923880,"body_markdown":"@Unmitigated\nWhich java version are you using. If possible can you post your code.I&#39;m using below code\n  distanceFormatter = new DecimalFormat(&quot;#.#&quot;);\n  distanceFormatter.setMinimumFractionDigits(1);\n  distanceFormatter.format(km)","body":"@Unmitigated Which java version are you using. If possible can you post your code.I&#39;m using below code   distanceFormatter = new DecimalFormat(&quot;#.#&quot;);   distanceFormatter.setMinimumFractionDigits(1);   distanceFormatter.format(km)"},{"owner":{"account_id":5998820,"reputation":12666,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1634062800,"post_id":69544969,"comment_id":122924123,"body_markdown":"What JDK are you using? For me the default rounding mode is HALF_EVEN and Case 3 is 9.9 (on Windows Open JDK17).","body":"What JDK are you using? For me the default rounding mode is HALF_EVEN and Case 3 is 9.9 (on Windows Open JDK17)."},{"owner":{"account_id":4887270,"reputation":595,"user_id":3939356,"accept_rate":52,"display_name":"Pranesh Sahu"},"score":0,"creation_date":1634063175,"post_id":69544969,"comment_id":122924247,"body_markdown":"I&#39;m using java 8","body":"I&#39;m using java 8"}],"answers":[{"tags":[],"owner":{"account_id":1008655,"reputation":8966,"user_id":1021720,"accept_rate":60,"display_name":"obourgain"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1634061860,"creation_date":1634061860,"answer_id":69545080,"question_id":69544969,"body_markdown":"Javadoc of DecimalFormat indicates that the default rounding mode is \r\n[`RoundingMode.HALF_EVEN`][1], which rounds towards the &quot;nearest neighbor&quot; unless both neighbors are equidistant, in which case, round towards the even neighbor.\r\n\r\nYou can select a different rounding mode if needed.\r\n\r\n\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/math/RoundingMode.html#HALF_EVEN","title":"Decimal Format in java not giving appropriate result","body":"<p>Javadoc of DecimalFormat indicates that the default rounding mode is\n<a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/math/RoundingMode.html#HALF_EVEN\" rel=\"nofollow noreferrer\"><code>RoundingMode.HALF_EVEN</code></a>, which rounds towards the &quot;nearest neighbor&quot; unless both neighbors are equidistant, in which case, round towards the even neighbor.</p>\n<p>You can select a different rounding mode if needed.</p>\n"},{"tags":[],"owner":{"account_id":1623166,"reputation":31,"user_id":1560882,"display_name":"Oleksandr Kolodkin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634062524,"creation_date":1634062524,"answer_id":69545208,"question_id":69544969,"body_markdown":"DecimalFormat provides rounding modes defined in RoundingMode for formatting.\r\n\r\nBy default, it uses RoundingMode.HALF_EVEN.\r\n\r\nRounding mode to round towards the &quot;nearest neighbor&quot; unless both neighbors are equidistant, in which case, round towards the even neighbor. \r\n\r\nBehaves as for RoundingMode.HALF_UP if the digit to the left of the discarded fraction is odd; behaves as for RoundingMode.HALF_DOWN if it&#39;s even. \r\n\r\nNote that this is the rounding mode that statistically minimizes cumulative error when applied repeatedly over a sequence of calculations. \r\n\r\nIt is sometimes known as &quot;Banker&#39;s rounding,&quot; and is chiefly used in the USA. \r\n\r\nThis rounding mode is analogous to the rounding policy used for float and double arithmetic in Java.\r\n\r\nYou can set rounding mode by: \r\n\r\n    DecimalFormat decimalFormat = new DecimalFormat(&quot;#.#&quot;);\r\n    decimalFormat.setRoundingMode(RoundingMode.CEILING);\r\n\r\n[RoundingMode][1]\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/math/RoundingMode.html","title":"Decimal Format in java not giving appropriate result","body":"<p>DecimalFormat provides rounding modes defined in RoundingMode for formatting.</p>\n<p>By default, it uses RoundingMode.HALF_EVEN.</p>\n<p>Rounding mode to round towards the &quot;nearest neighbor&quot; unless both neighbors are equidistant, in which case, round towards the even neighbor.</p>\n<p>Behaves as for RoundingMode.HALF_UP if the digit to the left of the discarded fraction is odd; behaves as for RoundingMode.HALF_DOWN if it's even.</p>\n<p>Note that this is the rounding mode that statistically minimizes cumulative error when applied repeatedly over a sequence of calculations.</p>\n<p>It is sometimes known as &quot;Banker's rounding,&quot; and is chiefly used in the USA.</p>\n<p>This rounding mode is analogous to the rounding policy used for float and double arithmetic in Java.</p>\n<p>You can set rounding mode by:</p>\n<pre><code>DecimalFormat decimalFormat = new DecimalFormat(&quot;#.#&quot;);\ndecimalFormat.setRoundingMode(RoundingMode.CEILING);\n</code></pre>\n<p><a href=\"https://docs.oracle.com/javase/7/docs/api/java/math/RoundingMode.html\" rel=\"nofollow noreferrer\">RoundingMode</a></p>\n"}],"owner":{"account_id":4887270,"reputation":595,"user_id":3939356,"accept_rate":52,"display_name":"Pranesh Sahu"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":173,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1634062524,"creation_date":1634061225,"question_id":69544969,"body_markdown":"I&#39;m currently using Decimal Format to obtain a result with 1 decimal data. \r\nThe result that i got is acceptable when value is less than 9.94 (considering range from 1 to 10).\r\n\r\nFor example\r\n \r\nCase 1 ---&gt; \r\nnew DecimalFormat(&quot;#.#&quot;).format(9.85) ---&gt; **9.8** (Okay not rounding)\r\n\r\nCase 2 ---&gt;\r\nnew DecimalFormat(&quot;#.#&quot;).format(9.86) ---&gt; **9.9** (Okay)\r\n\r\nCase 3 ---&gt; \r\nnew DecimalFormat(&quot;#.#&quot;).format(9.95) ---&gt; **10** (Not Okay as rounding)\r\n\r\nCase 4 ---&gt;\r\nnew DecimalFormat(&quot;#.#&quot;).format(9.96) ---&gt; **10** (Okay)\r\n\r\nI have a concern here why case 1 &amp; case 3 not behaving in similar fashion. In case 1 Decimal Format gives data as 9.8 for 9.85 without rounding it but in case 3 the data 9.95 is getting rounded &amp; returns 10.\r\n\r\n\r\n","title":"Decimal Format in java not giving appropriate result","body":"<p>I'm currently using Decimal Format to obtain a result with 1 decimal data.\nThe result that i got is acceptable when value is less than 9.94 (considering range from 1 to 10).</p>\n<p>For example</p>\n<p>Case 1 ---&gt;\nnew DecimalFormat(&quot;#.#&quot;).format(9.85) ---&gt; <strong>9.8</strong> (Okay not rounding)</p>\n<p>Case 2 ---&gt;\nnew DecimalFormat(&quot;#.#&quot;).format(9.86) ---&gt; <strong>9.9</strong> (Okay)</p>\n<p>Case 3 ---&gt;\nnew DecimalFormat(&quot;#.#&quot;).format(9.95) ---&gt; <strong>10</strong> (Not Okay as rounding)</p>\n<p>Case 4 ---&gt;\nnew DecimalFormat(&quot;#.#&quot;).format(9.96) ---&gt; <strong>10</strong> (Okay)</p>\n<p>I have a concern here why case 1 &amp; case 3 not behaving in similar fashion. In case 1 Decimal Format gives data as 9.8 for 9.85 without rounding it but in case 3 the data 9.95 is getting rounded &amp; returns 10.</p>\n"},{"tags":["java","arraylist","syntax"],"comments":[{"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"score":0,"creation_date":1634060847,"post_id":69544901,"comment_id":122923569,"body_markdown":"No, it is not possible.","body":"No, it is not possible."},{"owner":{"account_id":21415032,"reputation":181,"user_id":16720064,"display_name":"0xff"},"score":0,"creation_date":1634060968,"post_id":69544901,"comment_id":122923603,"body_markdown":"@Unmitigated am I missing something? It&#39;s def. possible","body":"@Unmitigated am I missing something? It&#39;s def. possible"},{"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"score":0,"creation_date":1634061008,"post_id":69544901,"comment_id":122923615,"body_markdown":"@Jadefalke What method are you referring to?","body":"@Jadefalke What method are you referring to?"},{"owner":{"account_id":21415032,"reputation":181,"user_id":16720064,"display_name":"0xff"},"score":0,"creation_date":1634061010,"post_id":69544901,"comment_id":122923618,"body_markdown":"Ah no, I see. You have to get rid of the variable name though.\n`arrList.add(new MyClass())`","body":"Ah no, I see. You have to get rid of the variable name though. <code>arrList.add(new MyClass())</code>"},{"owner":{"account_id":8563861,"reputation":13,"user_id":6417021,"display_name":"Phhase"},"score":0,"creation_date":1634061142,"post_id":69544901,"comment_id":122923655,"body_markdown":"Excellent, thanks.","body":"Excellent, thanks."},{"owner":{"account_id":8563861,"reputation":13,"user_id":6417021,"display_name":"Phhase"},"score":0,"creation_date":1634069760,"post_id":69544901,"comment_id":122926355,"body_markdown":"What&#39;s wrong with the question?","body":"What&#39;s wrong with the question?"}],"answers":[{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1634061967,"creation_date":1634061609,"answer_id":69545039,"question_id":69544901,"body_markdown":"You can do the following (using a record as an example).  But you won&#39;t have any other named instances of the created classes. Only the ones in the List.\r\n```\r\nrecord SomeClass(int arg1, int arg2){}\r\nList&lt;SomeClass&gt; myArrayList = \r\n    new ArrayList&lt;&gt;(Arrays.asList(new SomeClass(1,2), new SomeClass(3,4), ...)));\r\n```\r\nSince `Arrays.asList` returns a fixed size list you will need to pass it to an `ArrayList` constructor to add more elements.\r\n","title":"In java, what&#39;s the correct syntax for creating/constructing/defining a named variable on the same line as I add it to an arraylist?","body":"<p>You can do the following (using a record as an example).  But you won't have any other named instances of the created classes. Only the ones in the List.</p>\n<pre><code>record SomeClass(int arg1, int arg2){}\nList&lt;SomeClass&gt; myArrayList = \n    new ArrayList&lt;&gt;(Arrays.asList(new SomeClass(1,2), new SomeClass(3,4), ...)));\n</code></pre>\n<p>Since <code>Arrays.asList</code> returns a fixed size list you will need to pass it to an <code>ArrayList</code> constructor to add more elements.</p>\n"}],"owner":{"account_id":8563861,"reputation":13,"user_id":6417021,"display_name":"Phhase"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":69545039,"answer_count":1,"score":-1,"last_activity_date":1634061967,"creation_date":1634060818,"question_id":69544901,"body_markdown":"I&#39;m populating an arraylist in Java, and I&#39;m wondering if it&#39;s possible to cuts some lines by doing the following (except complete):\r\n\r\nmyArraylist.add(new objectname varname (constructor things));\r\n\r\ninstead of:\r\n\r\nobjectname varname = new objectname(constructor things);\r\nmyArrayList.add(varname);","title":"In java, what&#39;s the correct syntax for creating/constructing/defining a named variable on the same line as I add it to an arraylist?","body":"<p>I'm populating an arraylist in Java, and I'm wondering if it's possible to cuts some lines by doing the following (except complete):</p>\n<p>myArraylist.add(new objectname varname (constructor things));</p>\n<p>instead of:</p>\n<p>objectname varname = new objectname(constructor things);\nmyArrayList.add(varname);</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":1223835,"reputation":75858,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1634062408,"post_id":69544448,"comment_id":122924030,"body_markdown":"Is there a specific reason you&#39;re not using the existing built-in Boot support for Redis?","body":"Is there a specific reason you&#39;re not using the existing built-in Boot support for Redis?"},{"owner":{"account_id":378934,"reputation":317,"user_id":731969,"accept_rate":67,"display_name":"Wonger"},"score":0,"creation_date":1634064490,"post_id":69544448,"comment_id":122924719,"body_markdown":"One of the reasons I&#39;m not using spring data redis is because the RedisTemplate abstraction doesn&#39;t offer async get or put methods, so I&#39;m just using Lettuce&#39;s RedisClient directly (The example classes i gave above were just simplified for this post, but it actually returns CompletableFuture&lt;&gt;).","body":"One of the reasons I&#39;m not using spring data redis is because the RedisTemplate abstraction doesn&#39;t offer async get or put methods, so I&#39;m just using Lettuce&#39;s RedisClient directly (The example classes i gave above were just simplified for this post, but it actually returns CompletableFuture&lt;&gt;)."}],"answers":[{"tags":[],"owner":{"account_id":3508628,"reputation":501,"user_id":2933553,"accept_rate":50,"display_name":"SaleemKhair"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634061892,"creation_date":1634061186,"answer_id":69544961,"question_id":69544448,"body_markdown":"Your code seems that its per application, so what I recommend is have all of your properties in the configuration path, and not in a `RedisClientConfigProperties`.\r\n\r\nkeeping your class but modify it like so:\r\nRedisClientConfig.java\r\n```java\r\n@Data\r\n@ConfigurationProperties(prefix = &quot;dao.redis&quot;)\r\npublic class RedisClientConfigProperties {\r\n  private int database;\r\n  private String host;\r\n  private int port;\r\n  private boolean enabled; \r\n  // public getters and setters\r\n  .\r\n  .\r\n}\r\n````\r\n\r\nAnd in your configuration file:\r\napplication.yml\r\n````yml\r\ndao:\r\n    redis:\r\n        enabled: true\r\n        database: 0\r\n        host: 127.0.0.1\r\n        port: 6379\r\n````\r\nAnd have your dao be only injected in the context based on the property\r\n\r\n&gt;You can have it check if property is defined if you only use prefix to avoid passing boolean\r\n\r\nRedisDao.java\r\n````java\r\n@Component\r\n@Primary\r\n@ConditionalOnProperty(prefix = &quot;dao.redis&quot;, name = &quot;enabled&quot;, havingValue = &quot;true&quot;)\r\npublic class RedisDao implements IDao {\r\n    .\r\n    .\r\n    .\r\n}\r\n````\r\nThis way you will have have your `NoOpDao` be always injected,\r\nUnless the `dao.redis.enabled` is true, then the Redis will override the `NoOpDao` implementation because its annotated with `@Primary`. \r\n\r\n           ","title":"What is best practice for binding dynamic beans at runtime","body":"<p>Your code seems that its per application, so what I recommend is have all of your properties in the configuration path, and not in a <code>RedisClientConfigProperties</code>.</p>\n<p>keeping your class but modify it like so:\nRedisClientConfig.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Data\n@ConfigurationProperties(prefix = &quot;dao.redis&quot;)\npublic class RedisClientConfigProperties {\n  private int database;\n  private String host;\n  private int port;\n  private boolean enabled; \n  // public getters and setters\n  .\n  .\n}\n</code></pre>\n<p>And in your configuration file:\napplication.yml</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>dao:\n    redis:\n        enabled: true\n        database: 0\n        host: 127.0.0.1\n        port: 6379\n</code></pre>\n<p>And have your dao be only injected in the context based on the property</p>\n<blockquote>\n<p>You can have it check if property is defined if you only use prefix to avoid passing boolean</p>\n</blockquote>\n<p>RedisDao.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\n@Primary\n@ConditionalOnProperty(prefix = &quot;dao.redis&quot;, name = &quot;enabled&quot;, havingValue = &quot;true&quot;)\npublic class RedisDao implements IDao {\n    .\n    .\n    .\n}\n</code></pre>\n<p>This way you will have have your <code>NoOpDao</code> be always injected,\nUnless the <code>dao.redis.enabled</code> is true, then the Redis will override the <code>NoOpDao</code> implementation because its annotated with <code>@Primary</code>.</p>\n"}],"owner":{"account_id":378934,"reputation":317,"user_id":731969,"accept_rate":67,"display_name":"Wonger"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":306,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"closed_date":1634086772,"answer_count":1,"score":1,"last_activity_date":1634061892,"creation_date":1634058390,"question_id":69544448,"body_markdown":"I have some configuration property defined as\r\n\r\n    @Data\r\n    @ConfigurationProperties(prefix = RedisClientConfigProperties.CONFIG_PROP_NAME)\r\n    public class RedisClientConfigProperties {\r\n      public static final String CONFIG_PROP_NAME = &quot;dao.redis&quot;;\r\n      private int database = 0;\r\n      private String host = &quot;127.0.0.1&quot;;\r\n      private int port = 6379;\r\n      private boolean enabled = false;\r\n    }\r\n\r\nand the following java classes:\r\n\r\n    public interface IDao {\r\n      Object get(UUID id);\r\n      void put(UUID id, Object item);\r\n    }\r\n    \r\n    public class NoOpDao implements IDao {\r\n      @Override\r\n      public Object get(UUID id) {\r\n        return new Object();\r\n      }\r\n    \r\n      @Override\r\n      public void put(UUID id, Object item) {\r\n        // no-op\r\n      }\r\n    }\r\n    \r\n    public class RedisDao implements IDao {\r\n      @Autowired\r\n      private RedisClient client;\r\n    \r\n    \r\n      @Override\r\n      public Object get(UUID id) {\r\n        return client.get(id);\r\n      }\r\n    \r\n      @Override\r\n      public void put(UUID id, Object item) {\r\n        client.put(id, item);\r\n      }\r\n    }\r\n    \r\nWhat I want is to be able to autowire an IDao object into another bean, and the implementation is decided at run time based on the `RedisClientConfigProperties#enabled` field. In Guice, i can do something like the following in a module:\r\n\r\n    class DaoModule extends PrivateModule {\r\n        private final RedisClientConfigProperties configProps;\r\n    \r\n    \r\n        @Inject\r\n        public DaoModule(RedisClientConfigProperties configProps) {\r\n            this.configProps = configProps;\r\n        }\r\n    \r\n        @Override\r\n        protected void configure() {\r\n            if (configProps.isEnabled()) {\r\n                bind(IDao.class).to(RedisDao.class);\r\n            } else {\r\n                bind(IDao.class).to(NoOpDao.class);\r\n            }\r\n        }\r\n    }\r\n\r\nIn Spring, it is a little unclear of how to go about doing this. I have found a few different ways to do it, but I&#39;m not sure what is the &quot;Spring way&quot; to do it:\r\n\r\n 1. Use a @Configuration class with an @Bean method that returns IDao with conditional logic inside the method\r\n```\r\n@Bean\r\npublic IDao getDao(RedisClientConfigProperties config) {\r\n  if (config.isEnabled()) return new RedisDao();\r\n  else return new NoOpDao;\r\n}\r\n```\r\n 2. Use the [service locator pattern][1] to create a factory which will return the bean you want\r\n 3. annotate the implementations with @ConditionalOnProperty annotations\r\n\r\nI&#39;m curious about which of these ways is recommended as I have some reservations about each of them:\r\n\r\n 1. I would rather not have to manually instantiate the beans and have Springs IOC deal with instantiating the beans as necessary\r\n 2. This still creates al of the interface implementation beans and requires any consumer of the bean to know what bean they are asking for\r\n 3. Potentially error prone given that it doesn&#39;t use the Config properties object, but instead looks directly in your config properties files.\r\n \r\nOut of these three solutions, I think I prefer #1 but would love feedback / recommendations.\r\n\r\n  [1]: https://springframework.guru/service-locator-pattern-in-spring/","title":"What is best practice for binding dynamic beans at runtime","body":"<p>I have some configuration property defined as</p>\n<pre><code>@Data\n@ConfigurationProperties(prefix = RedisClientConfigProperties.CONFIG_PROP_NAME)\npublic class RedisClientConfigProperties {\n  public static final String CONFIG_PROP_NAME = &quot;dao.redis&quot;;\n  private int database = 0;\n  private String host = &quot;127.0.0.1&quot;;\n  private int port = 6379;\n  private boolean enabled = false;\n}\n</code></pre>\n<p>and the following java classes:</p>\n<pre><code>public interface IDao {\n  Object get(UUID id);\n  void put(UUID id, Object item);\n}\n\npublic class NoOpDao implements IDao {\n  @Override\n  public Object get(UUID id) {\n    return new Object();\n  }\n\n  @Override\n  public void put(UUID id, Object item) {\n    // no-op\n  }\n}\n\npublic class RedisDao implements IDao {\n  @Autowired\n  private RedisClient client;\n\n\n  @Override\n  public Object get(UUID id) {\n    return client.get(id);\n  }\n\n  @Override\n  public void put(UUID id, Object item) {\n    client.put(id, item);\n  }\n}\n</code></pre>\n<p>What I want is to be able to autowire an IDao object into another bean, and the implementation is decided at run time based on the <code>RedisClientConfigProperties#enabled</code> field. In Guice, i can do something like the following in a module:</p>\n<pre><code>class DaoModule extends PrivateModule {\n    private final RedisClientConfigProperties configProps;\n\n\n    @Inject\n    public DaoModule(RedisClientConfigProperties configProps) {\n        this.configProps = configProps;\n    }\n\n    @Override\n    protected void configure() {\n        if (configProps.isEnabled()) {\n            bind(IDao.class).to(RedisDao.class);\n        } else {\n            bind(IDao.class).to(NoOpDao.class);\n        }\n    }\n}\n</code></pre>\n<p>In Spring, it is a little unclear of how to go about doing this. I have found a few different ways to do it, but I'm not sure what is the &quot;Spring way&quot; to do it:</p>\n<ol>\n<li>Use a @Configuration class with an @Bean method that returns IDao with conditional logic inside the method</li>\n</ol>\n<pre><code>@Bean\npublic IDao getDao(RedisClientConfigProperties config) {\n  if (config.isEnabled()) return new RedisDao();\n  else return new NoOpDao;\n}\n</code></pre>\n<ol start=\"2\">\n<li>Use the <a href=\"https://springframework.guru/service-locator-pattern-in-spring/\" rel=\"nofollow noreferrer\">service locator pattern</a> to create a factory which will return the bean you want</li>\n<li>annotate the implementations with @ConditionalOnProperty annotations</li>\n</ol>\n<p>I'm curious about which of these ways is recommended as I have some reservations about each of them:</p>\n<ol>\n<li>I would rather not have to manually instantiate the beans and have Springs IOC deal with instantiating the beans as necessary</li>\n<li>This still creates al of the interface implementation beans and requires any consumer of the bean to know what bean they are asking for</li>\n<li>Potentially error prone given that it doesn't use the Config properties object, but instead looks directly in your config properties files.</li>\n</ol>\n<p>Out of these three solutions, I think I prefer #1 but would love feedback / recommendations.</p>\n"},{"tags":["java","spring","postgresql","spring-boot","rabbitmq"],"comments":[{"owner":{"account_id":1674999,"reputation":9423,"user_id":1540749,"accept_rate":90,"display_name":"josejuan"},"score":0,"creation_date":1634061623,"post_id":69544989,"comment_id":122923774,"body_markdown":"`incrementMediaCount` is not transactional (I don&#39;t see any annotation like _&quot;required&quot;_ or so), also, check your transaction manager works and is configured for rabbitmq and postgresql","body":"<code>incrementMediaCount</code> is not transactional (I don&#39;t see any annotation like <i>&quot;required&quot;</i> or so), also, check your transaction manager works and is configured for rabbitmq and postgresql"},{"owner":{"account_id":18564062,"reputation":703,"user_id":13527431,"display_name":"Annon"},"score":0,"creation_date":1634062061,"post_id":69544989,"comment_id":122923926,"body_markdown":"this method is transactional at repository level\n`\n@Transactional\n    @Modifying(clearAutomatically = true)\n    @Query(&quot;UPDATE User u SET u.mediaCount= u.mediaCount + :amount WHERE u.userId= :userId&quot;)\n    fun incrementPostCounter(\n        @Param(&quot;userId&quot;) userId: Long,\n        @Param(&quot;amount&quot;) amount: Int,\n    ): Int\n`","body":"this method is transactional at repository level ` @Transactional     @Modifying(clearAutomatically = true)     @Query(&quot;UPDATE User u SET u.mediaCount= u.mediaCount + :amount WHERE u.userId= :userId&quot;)     fun incrementPostCounter(         @Param(&quot;userId&quot;) userId: Long,         @Param(&quot;amount&quot;) amount: Int,     ): Int `"},{"owner":{"account_id":18564062,"reputation":703,"user_id":13527431,"display_name":"Annon"},"score":0,"creation_date":1634065768,"post_id":69544989,"comment_id":122925144,"body_markdown":"I&#39;m using one queue for multiple operations. Should I use multiple que with fanout exchange to perform each actions individually?","body":"I&#39;m using one queue for multiple operations. Should I use multiple que with fanout exchange to perform each actions individually?"},{"owner":{"account_id":1674999,"reputation":9423,"user_id":1540749,"accept_rate":90,"display_name":"josejuan"},"score":0,"creation_date":1634067205,"post_id":69544989,"comment_id":122925613,"body_markdown":"_&quot;this method is transactional at&quot;_ the transaction is managed by the transaction manager, your repo only said _&quot;I&#39;m transactional&quot;_ but if you does not track the transaction level, you&#39;ll use multiple transaction levels and your behavior (my `inc` is not rollbacked) may occur. Of course, without a minimal reproducible example is difficult to say what&#39;s happend.","body":"<i>&quot;this method is transactional at&quot;</i> the transaction is managed by the transaction manager, your repo only said <i>&quot;I&#39;m transactional&quot;</i> but if you does not track the transaction level, you&#39;ll use multiple transaction levels and your behavior (my <code>inc</code> is not rollbacked) may occur. Of course, without a minimal reproducible example is difficult to say what&#39;s happend."}],"owner":{"account_id":18564062,"reputation":703,"user_id":13527431,"display_name":"Annon"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1634061339,"creation_date":1634061339,"question_id":69544989,"body_markdown":"I&#39;m using spring boot (2.5.5). I&#39;m seeing inconsistent behavior using rabbitmq queue listener. \r\n\r\nIssue is, `accountService.incrementMediaCount` executes, even if `neoPostService.createNeoPost` throws exeception, thus executes multiple times, as retry policy is set to 5, which I guess seems weird as `accountService.incrementMediaCount` should execute only if `neoPostService.createNeoPost` execute successfully (without exception). Also, `loggingRepository.save()` execute lesser times than number of messages coming to queue. What is causing such behavior? Is it relared to distributed nature of RabbitMQ?\r\n\r\n\r\nQueue listener\r\n```\r\n@RabbitListener(queues = [RabbitConfiguration.Companion.Queues.POST_CREATION_QUEUE], concurrency = &quot;3&quot;)\r\nfun postCreationListener(postMessage: PostMessage) {\r\n    neoPostService.createNeoPost(postMessage.postId)\r\n    accountService.incrementMediaCount(postMessage.userId)\r\n    loggingRepository.save(\r\n        Log(\r\n            resourceType = ResourceType.Post,\r\n            entityEventType = EntityEventType.Created,\r\n            message = &quot;Post ${postMessage.postId} created for user ${postMessage.userId}&quot;\r\n        )\r\n    )\r\n}\r\n```\r\n\r\n```\r\nfun createNeoPost(postId: Long): NeoPost {\r\n// Get post by id from postgresql\r\n    val post = postRepository.findByIdOrNull(postId)\r\n        ?: throw ResourceNotFoundException(&quot;Post $postId not found&quot;)\r\n\r\n    val neoUser = neoUserService.getUserById(post.user.userId!!)\r\n// Save post to Neo4j\r\n    return neoPostRepository.save(post.toNeoPost().copy(user = neoUser))\r\n}\r\n```\r\n\r\n```\r\n//Increment counter in postgresql\r\nfun incrementMediaCount(userId: Long, amount: Int = 1) {\r\n    accountRepository.incrementPostCounter(userId, amount)\r\n}\r\n```\r\n\r\nRabbit Config\r\n```\r\n@EnableRabbit\r\n@Configuration\r\nclass RabbitConfiguration {\r\n    // other code\r\n    ....\r\n    @Bean\r\n    fun retryInterceptor(): RetryOperationsInterceptor? {\r\n        return RetryInterceptorBuilder.stateless()\r\n            .backOffOptions(100, 5.0, 10000)\r\n            .maxAttempts(5)\r\n            .recoverer(RejectAndDontRequeueRecoverer())\r\n            .build()\r\n    }\r\n    ....\r\n}\r\n```","title":"Spring Boot RabbitMQ consistency issue","body":"<p>I'm using spring boot (2.5.5). I'm seeing inconsistent behavior using rabbitmq queue listener.</p>\n<p>Issue is, <code>accountService.incrementMediaCount</code> executes, even if <code>neoPostService.createNeoPost</code> throws exeception, thus executes multiple times, as retry policy is set to 5, which I guess seems weird as <code>accountService.incrementMediaCount</code> should execute only if <code>neoPostService.createNeoPost</code> execute successfully (without exception). Also, <code>loggingRepository.save()</code> execute lesser times than number of messages coming to queue. What is causing such behavior? Is it relared to distributed nature of RabbitMQ?</p>\n<p>Queue listener</p>\n<pre><code>@RabbitListener(queues = [RabbitConfiguration.Companion.Queues.POST_CREATION_QUEUE], concurrency = &quot;3&quot;)\nfun postCreationListener(postMessage: PostMessage) {\n    neoPostService.createNeoPost(postMessage.postId)\n    accountService.incrementMediaCount(postMessage.userId)\n    loggingRepository.save(\n        Log(\n            resourceType = ResourceType.Post,\n            entityEventType = EntityEventType.Created,\n            message = &quot;Post ${postMessage.postId} created for user ${postMessage.userId}&quot;\n        )\n    )\n}\n</code></pre>\n<pre><code>fun createNeoPost(postId: Long): NeoPost {\n// Get post by id from postgresql\n    val post = postRepository.findByIdOrNull(postId)\n        ?: throw ResourceNotFoundException(&quot;Post $postId not found&quot;)\n\n    val neoUser = neoUserService.getUserById(post.user.userId!!)\n// Save post to Neo4j\n    return neoPostRepository.save(post.toNeoPost().copy(user = neoUser))\n}\n</code></pre>\n<pre><code>//Increment counter in postgresql\nfun incrementMediaCount(userId: Long, amount: Int = 1) {\n    accountRepository.incrementPostCounter(userId, amount)\n}\n</code></pre>\n<p>Rabbit Config</p>\n<pre><code>@EnableRabbit\n@Configuration\nclass RabbitConfiguration {\n    // other code\n    ....\n    @Bean\n    fun retryInterceptor(): RetryOperationsInterceptor? {\n        return RetryInterceptorBuilder.stateless()\n            .backOffOptions(100, 5.0, 10000)\n            .maxAttempts(5)\n            .recoverer(RejectAndDontRequeueRecoverer())\n            .build()\n    }\n    ....\n}\n</code></pre>\n"},{"tags":["java","java-time","datetime-parsing","datetimeformatter"],"comments":[{"owner":{"account_id":9691730,"reputation":1318,"user_id":7189597,"display_name":"Sobhan"},"score":0,"creation_date":1633938562,"post_id":69522450,"comment_id":122883642,"body_markdown":"which type of Date you want to generate from your Timestamp?\nit can be Date, LocalDateTime, LocalDate...","body":"which type of Date you want to generate from your Timestamp? it can be Date, LocalDateTime, LocalDate..."},{"owner":{"account_id":22967923,"reputation":1,"user_id":17096742,"display_name":"T.M."},"score":0,"creation_date":1633940791,"post_id":69522450,"comment_id":122884504,"body_markdown":"What would it be the difference by Date and LocalDate?","body":"What would it be the difference by Date and LocalDate?"},{"owner":{"account_id":9691730,"reputation":1318,"user_id":7189597,"display_name":"Sobhan"},"score":0,"creation_date":1633942798,"post_id":69522450,"comment_id":122885249,"body_markdown":"you can find your answer about differences between Date and LocalDate here:\nhttps://stackoverflow.com/questions/60144827/difference-between-java-util-date-and-java-time-localdate-in-java","body":"you can find your answer about differences between Date and LocalDate here: <a href=\"https://stackoverflow.com/questions/60144827/difference-between-java-util-date-and-java-time-localdate-in-java\" title=\"difference between java util date and java time localdate in java\">stackoverflow.com/questions/60144827/&hellip;</a>"},{"owner":{"account_id":22967923,"reputation":1,"user_id":17096742,"display_name":"T.M."},"score":0,"creation_date":1633945414,"post_id":69522450,"comment_id":122886335,"body_markdown":"What is your suggestion for a timestampformat in case I want to generate &quot;Date&quot; and in case I want to generate &quot;LocalDate&quot;?","body":"What is your suggestion for a timestampformat in case I want to generate &quot;Date&quot; and in case I want to generate &quot;LocalDate&quot;?"},{"owner":{"account_id":9691730,"reputation":1318,"user_id":7189597,"display_name":"Sobhan"},"score":0,"creation_date":1633959804,"post_id":69522450,"comment_id":122891809,"body_markdown":"take a look at this answer, it is a complete answer and I think you can solve your issue with this, also a bit creativity is needed, update me if you could not solve your issue with this one, i can help you more, GL:\nhttps://stackoverflow.com/a/4216767/7189597","body":"take a look at this answer, it is a complete answer and I think you can solve your issue with this, also a bit creativity is needed, update me if you could not solve your issue with this one, i can help you more, GL: <a href=\"https://stackoverflow.com/a/4216767/7189597\">stackoverflow.com/a/4216767/7189597</a>"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1634046549,"post_id":69522450,"comment_id":122917402,"body_markdown":"The second pattern, `dd-MMM-yy hh.mm.ss.SSSSSS a`, looks right to me. A [mre] will help us find out whats wrong. Remember to specify exactly what goes wrong. Paste any error message that you see into your question.","body":"The second pattern, <code>dd-MMM-yy hh.mm.ss.SSSSSS a</code>, looks right to me. A <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> will help us find out whats wrong. Remember to specify exactly what goes wrong. Paste any error message that you see into your question."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1634046948,"post_id":69522450,"comment_id":122917606,"body_markdown":"I recommend you dont use `Date`. That class is poorly designed and long outdated. Use `LocalDateTime` from [java.time, the modern Java date and time API](https://docs.oracle.com/javase/tutorial/datetime/). A `LocalDate` can hold only the date part. For a timestamp I assume you also need the time-of-day part, therefore `LocalDateTime`.","body":"I recommend you dont use <code>Date</code>. That class is poorly designed and long outdated. Use <code>LocalDateTime</code> from <a href=\"https://docs.oracle.com/javase/tutorial/datetime/\" rel=\"nofollow noreferrer\">java.time, the modern Java date and time API</a>. A <code>LocalDate</code> can hold only the date part. For a timestamp I assume you also need the time-of-day part, therefore <code>LocalDateTime</code>."}],"owner":{"account_id":22967923,"reputation":1,"user_id":17096742,"display_name":"T.M."},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1634051485,"answer_count":0,"score":0,"last_activity_date":1634060430,"creation_date":1633937078,"question_id":69522450,"body_markdown":"I am using `DateTimeFormatter` in my code for parsing the timestamp.\r\nI have timestamp like `01-JAN-21 10.10.10.100000 AM` and looking at this website \r\nhttps://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html\r\nI tried with the pattern: `dd-LLL-yy hh.mm.ss.SSSSSS a` which isn&#39;t working. I get `illegal pattern component &quot;LLL&quot;`. I also tried with `dd-MMM-yy hh.mm.ss.SSSSSS a` but the data isn&#39;t parsed.\r\n\r\nHow should the pattern look like?\r\n\r\n\r\n","title":"Choose proper Timestampformat when using DateTimeFormatter","body":"<p>I am using <code>DateTimeFormatter</code> in my code for parsing the timestamp.\nI have timestamp like <code>01-JAN-21 10.10.10.100000 AM</code> and looking at this website\n<a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html</a>\nI tried with the pattern: <code>dd-LLL-yy hh.mm.ss.SSSSSS a</code> which isn't working. I get <code>illegal pattern component &quot;LLL&quot;</code>. I also tried with <code>dd-MMM-yy hh.mm.ss.SSSSSS a</code> but the data isn't parsed.</p>\n<p>How should the pattern look like?</p>\n"},{"tags":["java","eclipse","content-assist"],"answers":[{"tags":[],"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1634060215,"creation_date":1625554917,"answer_id":68265945,"question_id":68258236,"body_markdown":"Unfortunately, that is indeed an **issue of Eclipse 2021-06 (4.20)** that has **already been fixed in Eclipse 2021-09 (4.21)** (released on September 15, 2021):\r\n\r\n[**Eclipse bug 574338** - \\[content assist\\] \\[regression\\] no content assist for variables in conditional blocks][1]\r\n\r\nPlease note, there is a [similar bug that has not yet been fixed][2]. As workaround you can add a `;` after the location where to use the content assist.\r\n\r\n\r\n  [1]: https://bugs.eclipse.org/bugs/show_bug.cgi?id=574338\r\n  [2]: https://bugs.eclipse.org/bugs/show_bug.cgi?id=575631","title":"Eclipse content assist fails in loops after upgrade to 2021-06 (4.20.0)","body":"<p>Unfortunately, that is indeed an <strong>issue of Eclipse 2021-06 (4.20)</strong> that has <strong>already been fixed in Eclipse 2021-09 (4.21)</strong> (released on September 15, 2021):</p>\n<p><a href=\"https://bugs.eclipse.org/bugs/show_bug.cgi?id=574338\" rel=\"nofollow noreferrer\"><strong>Eclipse bug 574338</strong> - [content assist] [regression] no content assist for variables in conditional blocks</a></p>\n<p>Please note, there is a <a href=\"https://bugs.eclipse.org/bugs/show_bug.cgi?id=575631\" rel=\"nofollow noreferrer\">similar bug that has not yet been fixed</a>. As workaround you can add a <code>;</code> after the location where to use the content assist.</p>\n"}],"owner":{"account_id":8194344,"reputation":73,"user_id":6167720,"display_name":"ramundsen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":724,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":68265945,"answer_count":1,"score":6,"last_activity_date":1634060215,"creation_date":1625497123,"question_id":68258236,"body_markdown":"A similar question was asked [here](https://stackoverflow.com/questions/68199554/content-assist-cannot-find-proposals-in-loop-if-there-is-code-below), with no answer yet and less of a code sample. I found and tried the deletion solution for a [similar problem](https://stackoverflow.com/questions/68147199/eclipse-2021-6-java-content-assist-doesnt-provide-completions-when-there-is-a-c), but to no avail.\r\n\r\nAfter recently upgrading Eclipse to version 2021-06 (4.20.0), I noticed the content assist feature (ctrl-space) not working properly in many instances.\r\n\r\n\r\n    import java.util.HashSet;\r\n    import java.util.Set;\r\n    \r\n    public class ContentAssist {\r\n    \r\n        public static void main(final String[] args) {\r\n            final Set&lt;String&gt; storedSet = new HashSet&lt;String&gt;();\r\n            for (int i = 0; i &lt; 500; i++) {\r\n    \r\n                System.out.println(i);\r\n            }\r\n        }\r\n    }\r\n\r\nIf we now would like to access the `storedSet`, beginning by typing &#39;s&#39; we see that the `out` shows up as a compile error:\r\n\r\n[![compilation error][1]][1]\r\n\r\nContent Assist comes up short:\r\n\r\n[![Content Assist fail 1][2]][2]\r\n\r\nAlso when providing more characters:\r\n\r\n[![Content Assist fail 2][3]][3]\r\n\r\nComment out the `System.out` part and Content Assist once again works:\r\n\r\n[![Content Assist works][4]][4]\r\n\r\nBug in or in front of the PC?\r\n\r\nEdit: I just tested this for a fresh install of Eclipse 2021-06 (4.20.0) Build id 20210612-2011 on Windows x86_64, using Eclipse Installer 2021-06 R. Created a new Java project with the code above and the same behaviour occurred.\r\n\r\n  [1]: https://i.stack.imgur.com/ZBfIa.jpg\r\n  [2]: https://i.stack.imgur.com/nTU3o.jpg\r\n  [3]: https://i.stack.imgur.com/X0Kt6.jpg\r\n  [4]: https://i.stack.imgur.com/qFg33.jpg","title":"Eclipse content assist fails in loops after upgrade to 2021-06 (4.20.0)","body":"<p>A similar question was asked <a href=\"https://stackoverflow.com/questions/68199554/content-assist-cannot-find-proposals-in-loop-if-there-is-code-below\">here</a>, with no answer yet and less of a code sample. I found and tried the deletion solution for a <a href=\"https://stackoverflow.com/questions/68147199/eclipse-2021-6-java-content-assist-doesnt-provide-completions-when-there-is-a-c\">similar problem</a>, but to no avail.</p>\n<p>After recently upgrading Eclipse to version 2021-06 (4.20.0), I noticed the content assist feature (ctrl-space) not working properly in many instances.</p>\n<pre><code>import java.util.HashSet;\nimport java.util.Set;\n\npublic class ContentAssist {\n\n    public static void main(final String[] args) {\n        final Set&lt;String&gt; storedSet = new HashSet&lt;String&gt;();\n        for (int i = 0; i &lt; 500; i++) {\n\n            System.out.println(i);\n        }\n    }\n}\n</code></pre>\n<p>If we now would like to access the <code>storedSet</code>, beginning by typing 's' we see that the <code>out</code> shows up as a compile error:</p>\n<p><a href=\"https://i.stack.imgur.com/ZBfIa.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ZBfIa.jpg\" alt=\"compilation error\" /></a></p>\n<p>Content Assist comes up short:</p>\n<p><a href=\"https://i.stack.imgur.com/nTU3o.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/nTU3o.jpg\" alt=\"Content Assist fail 1\" /></a></p>\n<p>Also when providing more characters:</p>\n<p><a href=\"https://i.stack.imgur.com/X0Kt6.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/X0Kt6.jpg\" alt=\"Content Assist fail 2\" /></a></p>\n<p>Comment out the <code>System.out</code> part and Content Assist once again works:</p>\n<p><a href=\"https://i.stack.imgur.com/qFg33.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/qFg33.jpg\" alt=\"Content Assist works\" /></a></p>\n<p>Bug in or in front of the PC?</p>\n<p>Edit: I just tested this for a fresh install of Eclipse 2021-06 (4.20.0) Build id 20210612-2011 on Windows x86_64, using Eclipse Installer 2021-06 R. Created a new Java project with the code above and the same behaviour occurred.</p>\n"},{"tags":["java","accessor"],"comments":[{"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"score":1,"creation_date":1634060011,"post_id":69544724,"comment_id":122923251,"body_markdown":"You have an empty constructor.","body":"You have an empty constructor."},{"owner":{"account_id":381477,"reputation":2743,"user_id":736151,"accept_rate":83,"display_name":"Jo&#235;l"},"score":1,"creation_date":1634112763,"post_id":69544724,"comment_id":122935765,"body_markdown":"Hi! Welcome to StackOverflow. In order to help others, please include your &quot;current output&quot; as text in your question, instead of linking to an external service. Thanks!","body":"Hi! Welcome to StackOverflow. In order to help others, please include your &quot;current output&quot; as text in your question, instead of linking to an external service. Thanks!"}],"answers":[{"tags":[],"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1634060014,"creation_date":1634060014,"answer_id":69544745,"question_id":69544724,"body_markdown":"You forgot to set the member variables in the constructor, so they are left at their default values.\r\n\r\n```\r\npublic Q4(int wholeNumber, int decimalPart, boolean positive, char currencySymbol){\r\n    this.wholeNumber = wholeNumber;\r\n    this.decimalPart = decimalPart;\r\n    this.positive = positive;\r\n    this.currencySymbol = currencySymbol;\r\n}\r\n```","title":"Accessors not printing out the correct output","body":"<p>You forgot to set the member variables in the constructor, so they are left at their default values.</p>\n<pre><code>public Q4(int wholeNumber, int decimalPart, boolean positive, char currencySymbol){\n    this.wholeNumber = wholeNumber;\n    this.decimalPart = decimalPart;\n    this.positive = positive;\n    this.currencySymbol = currencySymbol;\n}\n</code></pre>\n"}],"owner":{"account_id":23014543,"reputation":43,"user_id":17136543,"display_name":"umba"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69544745,"answer_count":1,"score":0,"last_activity_date":1634060014,"creation_date":1634059902,"question_id":69544724,"body_markdown":"I&#39;m trying to get my program to print each of the 4 variables (*wholeNumber, decimalPart, positive, currencySymbol*) defined in the program below using an accessor for each, however when I go to run the program instead of getting this\r\n\r\n**Expected Output:**\r\n```\r\n1\r\n2\r\ntrue\r\n$\r\n```\r\nI instead get this. Could someone explain what error is causing this? \r\n\r\n[CURRENT OUTPUT][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/geyGX.png\r\n\r\n\r\n**CODE**\r\n```\r\npublic class Q4 {\r\n\r\n    int wholeNumber;\r\n    int decimalPart;\r\n    boolean positive;\r\n    char currencySymbol;\r\n\r\n    public Q4(int wholeNumber, int decimalPart, boolean positive, char currencySymbol){\r\n\r\n    }\r\n    \r\n\r\n    public static void main(String[] args) {\r\n        Q4 m = new Q4(1,2,true,&#39;$&#39;);\r\n        System.out.println(m.getWholeNumber());\r\n        System.out.println(m.getDecimalPart());\r\n        System.out.println(m.isPositive());\r\n        System.out.println(m.getCurrencySymbol());\r\n    }\r\n\r\n    // Accessor\r\n    public int getWholeNumber(){\r\n        return(wholeNumber);\r\n    }\r\n\r\n    // Accessor\r\n    public int getDecimalPart(){\r\n        return(decimalPart);\r\n    }\r\n\r\n    // Accessor\r\n    public boolean isPositive(){\r\n        return(positive);\r\n    }\r\n\r\n    // Accessor\r\n    public char getCurrencySymbol(){\r\n        return(currencySymbol);\r\n    }\r\n\r\n}\r\n```\r\n\r\n","title":"Accessors not printing out the correct output","body":"<p>I'm trying to get my program to print each of the 4 variables (<em>wholeNumber, decimalPart, positive, currencySymbol</em>) defined in the program below using an accessor for each, however when I go to run the program instead of getting this</p>\n<p><strong>Expected Output:</strong></p>\n<pre><code>1\n2\ntrue\n$\n</code></pre>\n<p>I instead get this. Could someone explain what error is causing this?</p>\n<p><a href=\"https://i.stack.imgur.com/geyGX.png\" rel=\"nofollow noreferrer\">CURRENT OUTPUT</a></p>\n<p><strong>CODE</strong></p>\n<pre><code>public class Q4 {\n\n    int wholeNumber;\n    int decimalPart;\n    boolean positive;\n    char currencySymbol;\n\n    public Q4(int wholeNumber, int decimalPart, boolean positive, char currencySymbol){\n\n    }\n    \n\n    public static void main(String[] args) {\n        Q4 m = new Q4(1,2,true,'$');\n        System.out.println(m.getWholeNumber());\n        System.out.println(m.getDecimalPart());\n        System.out.println(m.isPositive());\n        System.out.println(m.getCurrencySymbol());\n    }\n\n    // Accessor\n    public int getWholeNumber(){\n        return(wholeNumber);\n    }\n\n    // Accessor\n    public int getDecimalPart(){\n        return(decimalPart);\n    }\n\n    // Accessor\n    public boolean isPositive(){\n        return(positive);\n    }\n\n    // Accessor\n    public char getCurrencySymbol(){\n        return(currencySymbol);\n    }\n\n}\n</code></pre>\n"},{"tags":["java","android","vibration"],"comments":[{"owner":{"account_id":12953709,"reputation":6501,"user_id":9365212,"display_name":"AgentP"},"score":0,"creation_date":1592820804,"post_id":62511574,"comment_id":110551565,"body_markdown":"Check if the device has some kind of battery saving mode which might be disabled the vibration ...I got this from a comment to an answer here at https://stackoverflow.com/a/51553799/9365212","body":"Check if the device has some kind of battery saving mode which might be disabled the vibration ...I got this from a comment to an answer here at <a href=\"https://stackoverflow.com/a/51553799/9365212\">stackoverflow.com/a/51553799/9365212</a>"},{"owner":{"account_id":18903297,"reputation":21,"user_id":13790908,"display_name":"daniel_tagui"},"score":0,"creation_date":1592821700,"post_id":62511574,"comment_id":110551975,"body_markdown":"I don&#39;t have saving mode battery activated and I have tried activating and deactivating the battery manager.","body":"I don&#39;t have saving mode battery activated and I have tried activating and deactivating the battery manager."}],"answers":[{"tags":[],"owner":{"account_id":11547848,"reputation":1276,"user_id":8461344,"display_name":"Code Demon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1592836686,"creation_date":1592836686,"answer_id":62516954,"question_id":62511574,"body_markdown":"Had the same issue turns out the user has to enable Touch vibration in Settings ","title":"Android don&#39;t vibrate for values less than 5000 milliseconds","body":"<p>Had the same issue turns out the user has to enable Touch vibration in Settings</p>\n"}],"owner":{"account_id":18903297,"reputation":21,"user_id":13790908,"display_name":"daniel_tagui"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":152,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1634059867,"creation_date":1592818994,"question_id":62511574,"body_markdown":"I&#39;m trying to make vibrate in Android, this is my (typical) vibration code:\r\n\r\n```Vibrator vb = (Vibrator) mContext.getSystemService(mContext.VIBRATOR_SERVICE);\r\nif (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\r\n    vb.vibrate(VibrationEffect.createOneShot(300, VibrationEffect.DEFAULT_AMPLITUDE));\r\n} else {\r\n    //deprecated in API 26\r\n    vb.vibrate(300);\r\n}\r\n```\r\nMy problem is that if I use less than 5000 milliseconds as the first parameter (300 in the example), the phone doesn&#39;t vibrate but if I use &gt;= 5000 milliseconds works.\r\n\r\nNote: in Android devices with &lt; SDK26 version works &gt; SDK26 no...\r\n\r\nIdea? Thanks","title":"Android don&#39;t vibrate for values less than 5000 milliseconds","body":"<p>I'm trying to make vibrate in Android, this is my (typical) vibration code:</p>\n<pre><code>if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {\n    vb.vibrate(VibrationEffect.createOneShot(300, VibrationEffect.DEFAULT_AMPLITUDE));\n} else {\n    //deprecated in API 26\n    vb.vibrate(300);\n}\n</code></pre>\n<p>My problem is that if I use less than 5000 milliseconds as the first parameter (300 in the example), the phone doesn't vibrate but if I use &gt;= 5000 milliseconds works.</p>\n<p>Note: in Android devices with &lt; SDK26 version works &gt; SDK26 no...</p>\n<p>Idea? Thanks</p>\n"},{"tags":["java","string"],"comments":[{"owner":{"account_id":4279913,"reputation":3623,"user_id":3499626,"accept_rate":89,"display_name":"jhamon"},"score":2,"creation_date":1634054501,"post_id":69543648,"comment_id":122921134,"body_markdown":"regex with capturing groups","body":"regex with capturing groups"},{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":3,"creation_date":1634054591,"post_id":69543648,"comment_id":122921168,"body_markdown":"Well, you could use the last and the penultimate space to extract the values.","body":"Well, you could use the last and the penultimate space to extract the values."},{"owner":{"account_id":22980,"reputation":1293,"user_id":57217,"accept_rate":100,"display_name":"Kutzi"},"score":2,"creation_date":1634054655,"post_id":69543648,"comment_id":122921213,"body_markdown":"I think your input format is badly defined, if it doesn&#39;t have a clear separator defined.\nRespectively doesn&#39;t have any rules for how to escape the separator in values.","body":"I think your input format is badly defined, if it doesn&#39;t have a clear separator defined. Respectively doesn&#39;t have any rules for how to escape the separator in values."}],"answers":[{"tags":[],"owner":{"account_id":3036979,"reputation":454,"user_id":2576481,"accept_rate":50,"display_name":"akshayc"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1634054654,"creation_date":1634054654,"answer_id":69543707,"question_id":69543648,"body_markdown":"You could define a regex to parse out the string and two doubles, and split each string using the `split` method defined here https://docs.oracle.com/javase/7/docs/api/java/lang/String.html","title":"problems at splitting strings in java","body":"<p>You could define a regex to parse out the string and two doubles, and split each string using the <code>split</code> method defined here <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/String.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/7/docs/api/java/lang/String.html</a></p>\n"},{"tags":[],"owner":{"account_id":1674999,"reputation":9423,"user_id":1540749,"accept_rate":90,"display_name":"josejuan"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1634056948,"creation_date":1634054871,"answer_id":69543749,"question_id":69543648,"body_markdown":"    Pattern regex = Pattern.compile(&quot;^(.*) +([0-9.]+) +([0-9.]+)$&quot;);\r\n    for(String city: CITIES) {\r\n        Matcher mx = regex.matcher(city);\r\n        if(mx.find())\r\n            System.out.printf(&quot;City: %s, Lat: %s, Lon: %s%n&quot;, mx.group(1), mx.group(2), mx.group(3));\r\n    }\r\n\r\nwith output\r\n\r\n    City: Vancouver, Lat: 94.0, Lon: 15.0\r\n    City: Seattle, Lat: 88.0, Lon: 52.0\r\n    City: Portland, Lat: 74.0, Lon: 88.0\r\n    City: San Francisco, Lat: 42.0, Lon: 241.0\r\n    City: Los Angeles, Lat: 89.0, Lon: 338.0\r\n    City: Las Vegas, Lat: 153.0, Lon: 302.0\r\n    City: Calgary, Lat: 259.0, Lon: 15.0\r\n    City: Salt Lake City, Lat: 224.0, Lon: 216.0\r\n    City: Phoenix, Lat: 192.0, Lon: 348.0\r\n    City: Helena, Lat: 247.0, Lon: 90.0\r\n\r\n(note: to convert strings to numbers use e.g. `Double::parseDouble`)","title":"problems at splitting strings in java","body":"<pre><code>Pattern regex = Pattern.compile(&quot;^(.*) +([0-9.]+) +([0-9.]+)$&quot;);\nfor(String city: CITIES) {\n    Matcher mx = regex.matcher(city);\n    if(mx.find())\n        System.out.printf(&quot;City: %s, Lat: %s, Lon: %s%n&quot;, mx.group(1), mx.group(2), mx.group(3));\n}\n</code></pre>\n<p>with output</p>\n<pre><code>City: Vancouver, Lat: 94.0, Lon: 15.0\nCity: Seattle, Lat: 88.0, Lon: 52.0\nCity: Portland, Lat: 74.0, Lon: 88.0\nCity: San Francisco, Lat: 42.0, Lon: 241.0\nCity: Los Angeles, Lat: 89.0, Lon: 338.0\nCity: Las Vegas, Lat: 153.0, Lon: 302.0\nCity: Calgary, Lat: 259.0, Lon: 15.0\nCity: Salt Lake City, Lat: 224.0, Lon: 216.0\nCity: Phoenix, Lat: 192.0, Lon: 348.0\nCity: Helena, Lat: 247.0, Lon: 90.0\n</code></pre>\n<p>(note: to convert strings to numbers use e.g. <code>Double::parseDouble</code>)</p>\n"},{"tags":[],"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1634057069,"creation_date":1634057069,"answer_id":69544208,"question_id":69543648,"body_markdown":"I suspect this assignment was meant for the OP to learn about the `lastIndexOf` and `substring` methods of the `String` class.\r\n\r\nHere are the test results from one of my many tests.\r\n\r\n    City [name=Vancouver, latitude=94.0, longitude=15.0]\r\n    City [name=Seattle, latitude=88.0, longitude=52.0]\r\n    City [name=Portland, latitude=74.0, longitude=88.0]\r\n    City [name=San Francisco, latitude=42.0, longitude=241.0]\r\n    City [name=Los Angeles, latitude=89.0, longitude=338.0]\r\n    City [name=Las Vegas, latitude=153.0, longitude=302.0]\r\n    City [name=Calgary, latitude=259.0, longitude=15.0]\r\n    City [name=Salt Lake City, latitude=224.0, longitude=216.0]\r\n    City [name=Phoenix, latitude=192.0, longitude=348.0]\r\n    City [name=Helena, latitude=247.0, longitude=90.0]\r\n\r\nHere&#39;s the complete runnable code.  The `parseCities` method finds the position of the last two spaces and uses `substring` to &quot;split&quot; the `String` into three pieces.\r\n\r\n    public class SplitCities {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tString[] cities = { \r\n    \t\t        &quot;Vancouver 94.0 15.0&quot;,\r\n    \t\t        &quot;Seattle 88.0 52.0&quot;,\r\n    \t\t        &quot;Portland 74.0 88.0&quot;,\r\n    \t\t        &quot;San Francisco 42.0 241.0&quot;,\r\n    \t\t        &quot;Los Angeles 89.0 338.0&quot;,\r\n    \t\t        &quot;Las Vegas 153.0 302.0&quot;,\r\n    \t\t        &quot;Calgary 259.0 15.0&quot;,\r\n    \t\t        &quot;Salt Lake City 224.0 216.0&quot;,\r\n    \t\t        &quot;Phoenix 192.0 348.0&quot;,\r\n    \t\t        &quot;Helena 247.0 90.0&quot; };\r\n    \t\t\r\n    \t\tSplitCities sc = new SplitCities();\r\n    \t\tCity[] parsedCities = sc.parseCities(cities);\r\n    \t\t\r\n    \t\tfor (int index = 0; index &lt; parsedCities.length; index++) {\r\n    \t\t\tSystem.out.println(parsedCities[index]);\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tpublic City[] parseCities(String[] cities) {\r\n    \t\tCity[] parsedCities = new City[cities.length];\r\n    \t\tfor (int index = 0; index &lt; cities.length; index++) {\r\n    \t\t\tString line = cities[index];\r\n    \t\t\tint longitudePosition = line.lastIndexOf(&#39; &#39;);\r\n    \t\t\tint latitudePosition = line.lastIndexOf(&#39; &#39;, longitudePosition - 1);\r\n    \t\t\tString name = line.substring(0, latitudePosition);\r\n    \t\t\tdouble latitude = Double.valueOf(line.substring(\r\n    \t\t\t\t\tlatitudePosition + 1, longitudePosition));\r\n    \t\t\tdouble longitude = Double.valueOf(line.substring(longitudePosition));\r\n    \t\t\tparsedCities[index] = new City(name, latitude, longitude);\r\n    \t\t}\r\n    \t\t\r\n    \t\treturn parsedCities;\r\n    \t}\r\n    \t\r\n    \tpublic class City {\r\n    \t\t\r\n    \t\tprivate final double latitude, longitude;\r\n    \t\t\r\n    \t\tprivate final String name;\r\n    \r\n    \t\tpublic City(String name, double latitude, double longitude) {\r\n    \t\t\tthis.name = name;\r\n    \t\t\tthis.latitude = latitude;\r\n    \t\t\tthis.longitude = longitude;\r\n    \t\t}\r\n    \r\n    \t\tpublic double getLatitude() {\r\n    \t\t\treturn latitude;\r\n    \t\t}\r\n    \r\n    \t\tpublic double getLongitude() {\r\n    \t\t\treturn longitude;\r\n    \t\t}\r\n    \r\n    \t\tpublic String getName() {\r\n    \t\t\treturn name;\r\n    \t\t}\r\n    \r\n    \t\t@Override\r\n    \t\tpublic String toString() {\r\n    \t\t\tStringBuilder builder = new StringBuilder();\r\n    \t\t\tbuilder.append(&quot;City [name=&quot;);\r\n    \t\t\tbuilder.append(name);\r\n    \t\t\tbuilder.append(&quot;, latitude=&quot;);\r\n    \t\t\tbuilder.append(latitude);\r\n    \t\t\tbuilder.append(&quot;, longitude=&quot;);\r\n    \t\t\tbuilder.append(longitude);\r\n    \t\t\tbuilder.append(&quot;]&quot;);\r\n    \t\t\treturn builder.toString();\r\n    \t\t}\r\n    \t\t\r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"problems at splitting strings in java","body":"<p>I suspect this assignment was meant for the OP to learn about the <code>lastIndexOf</code> and <code>substring</code> methods of the <code>String</code> class.</p>\n<p>Here are the test results from one of my many tests.</p>\n<pre><code>City [name=Vancouver, latitude=94.0, longitude=15.0]\nCity [name=Seattle, latitude=88.0, longitude=52.0]\nCity [name=Portland, latitude=74.0, longitude=88.0]\nCity [name=San Francisco, latitude=42.0, longitude=241.0]\nCity [name=Los Angeles, latitude=89.0, longitude=338.0]\nCity [name=Las Vegas, latitude=153.0, longitude=302.0]\nCity [name=Calgary, latitude=259.0, longitude=15.0]\nCity [name=Salt Lake City, latitude=224.0, longitude=216.0]\nCity [name=Phoenix, latitude=192.0, longitude=348.0]\nCity [name=Helena, latitude=247.0, longitude=90.0]\n</code></pre>\n<p>Here's the complete runnable code.  The <code>parseCities</code> method finds the position of the last two spaces and uses <code>substring</code> to &quot;split&quot; the <code>String</code> into three pieces.</p>\n<pre><code>public class SplitCities {\n\n    public static void main(String[] args) {\n        String[] cities = { \n                &quot;Vancouver 94.0 15.0&quot;,\n                &quot;Seattle 88.0 52.0&quot;,\n                &quot;Portland 74.0 88.0&quot;,\n                &quot;San Francisco 42.0 241.0&quot;,\n                &quot;Los Angeles 89.0 338.0&quot;,\n                &quot;Las Vegas 153.0 302.0&quot;,\n                &quot;Calgary 259.0 15.0&quot;,\n                &quot;Salt Lake City 224.0 216.0&quot;,\n                &quot;Phoenix 192.0 348.0&quot;,\n                &quot;Helena 247.0 90.0&quot; };\n        \n        SplitCities sc = new SplitCities();\n        City[] parsedCities = sc.parseCities(cities);\n        \n        for (int index = 0; index &lt; parsedCities.length; index++) {\n            System.out.println(parsedCities[index]);\n        }\n    }\n    \n    public City[] parseCities(String[] cities) {\n        City[] parsedCities = new City[cities.length];\n        for (int index = 0; index &lt; cities.length; index++) {\n            String line = cities[index];\n            int longitudePosition = line.lastIndexOf(' ');\n            int latitudePosition = line.lastIndexOf(' ', longitudePosition - 1);\n            String name = line.substring(0, latitudePosition);\n            double latitude = Double.valueOf(line.substring(\n                    latitudePosition + 1, longitudePosition));\n            double longitude = Double.valueOf(line.substring(longitudePosition));\n            parsedCities[index] = new City(name, latitude, longitude);\n        }\n        \n        return parsedCities;\n    }\n    \n    public class City {\n        \n        private final double latitude, longitude;\n        \n        private final String name;\n\n        public City(String name, double latitude, double longitude) {\n            this.name = name;\n            this.latitude = latitude;\n            this.longitude = longitude;\n        }\n\n        public double getLatitude() {\n            return latitude;\n        }\n\n        public double getLongitude() {\n            return longitude;\n        }\n\n        public String getName() {\n            return name;\n        }\n\n        @Override\n        public String toString() {\n            StringBuilder builder = new StringBuilder();\n            builder.append(&quot;City [name=&quot;);\n            builder.append(name);\n            builder.append(&quot;, latitude=&quot;);\n            builder.append(latitude);\n            builder.append(&quot;, longitude=&quot;);\n            builder.append(longitude);\n            builder.append(&quot;]&quot;);\n            return builder.toString();\n        }\n        \n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":20462910,"reputation":25,"user_id":15015116,"display_name":"Arthur"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":96,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":69544208,"answer_count":3,"score":-1,"last_activity_date":1634058804,"creation_date":1634054366,"question_id":69543648,"body_markdown":"I&#39;m new to java and I want to know how to splits strings with values.\r\n\r\nI had an array like this :\r\n```\r\nString[] CITIES = { \r\n\t\t&quot;Vancouver 94.0 15.0&quot;,\r\n\t\t&quot;Seattle 88.0 52.0&quot;,\r\n\t\t&quot;Portland 74.0 88.0&quot;,\r\n\t\t&quot;San Francisco 42.0 241.0&quot;,\r\n\t\t&quot;Los Angeles 89.0 338.0&quot;,\r\n\t\t&quot;Las Vegas 153.0 302.0&quot;,\r\n\t\t&quot;Calgary 259.0 15.0&quot;,\r\n\t\t&quot;Salt Lake City 224.0 216.0&quot;,\r\n\t\t&quot;Phoenix 192.0 348.0&quot;,\r\n\t\t&quot;Helena 247.0 90.0&quot;}\r\n\r\n```\r\n\r\nand I want to divide each string into 3 values, the name (String) the `x-value (double)`, and the `y-value (double)` \r\n\r\nfirstly I thought of cutting at every space, but for the cities like San Francisco, it won&#39;t work :(\r\nany ideas?","title":"problems at splitting strings in java","body":"<p>I'm new to java and I want to know how to splits strings with values.</p>\n<p>I had an array like this :</p>\n<pre><code>String[] CITIES = { \n        &quot;Vancouver 94.0 15.0&quot;,\n        &quot;Seattle 88.0 52.0&quot;,\n        &quot;Portland 74.0 88.0&quot;,\n        &quot;San Francisco 42.0 241.0&quot;,\n        &quot;Los Angeles 89.0 338.0&quot;,\n        &quot;Las Vegas 153.0 302.0&quot;,\n        &quot;Calgary 259.0 15.0&quot;,\n        &quot;Salt Lake City 224.0 216.0&quot;,\n        &quot;Phoenix 192.0 348.0&quot;,\n        &quot;Helena 247.0 90.0&quot;}\n\n</code></pre>\n<p>and I want to divide each string into 3 values, the name (String) the <code>x-value (double)</code>, and the <code>y-value (double)</code></p>\n<p>firstly I thought of cutting at every space, but for the cities like San Francisco, it won't work :(\nany ideas?</p>\n"},{"tags":["java","java-stream"],"answers":[{"tags":[],"owner":{"account_id":1268556,"reputation":48088,"user_id":1225328,"accept_rate":93,"display_name":"sp00m"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1634058333,"creation_date":1634058333,"answer_id":69544440,"question_id":69544155,"body_markdown":"Flattening into tuples could help.\r\n\r\nFor example with:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    @Value\r\n    class Tuple&lt;L, R&gt; {\r\n        L left;\r\n        R right;\r\n    }\r\n\r\nYou could have:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    Stream&lt;Member&gt; stream = ...;\r\n    Map&lt;Topic, List&lt;Member&gt;&gt; result = stream\r\n            .flatMap(member -&gt; member.getTopics().stream().map(topic -&gt; new Tuple&lt;&gt;(topic, member)))\r\n            .collect(groupingBy(Tuple::getLeft, mapping(Tuple::getRight, toList())));","title":"Group a list of objects by multiple enum values in a list","body":"<p>Flattening into tuples could help.</p>\n<p>For example with:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Value\nclass Tuple&lt;L, R&gt; {\n    L left;\n    R right;\n}\n</code></pre>\n<p>You could have:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Stream&lt;Member&gt; stream = ...;\nMap&lt;Topic, List&lt;Member&gt;&gt; result = stream\n        .flatMap(member -&gt; member.getTopics().stream().map(topic -&gt; new Tuple&lt;&gt;(topic, member)))\n        .collect(groupingBy(Tuple::getLeft, mapping(Tuple::getRight, toList())));\n</code></pre>\n"}],"owner":{"account_id":16773423,"reputation":576,"user_id":12125351,"display_name":"wannaBeDev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":619,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69544440,"answer_count":1,"score":1,"last_activity_date":1634058333,"creation_date":1634056784,"question_id":69544155,"body_markdown":"**Context:**\r\n\r\nI have a `Topic` enum:\r\n\r\n    public enum Topic {\r\n        RELATIONSHIP, DATING, EDUCATION, FITNESS, NEWS, RENT, EVENTS, GIVEAWAY, SALE\r\n    }\r\n\r\nand a class Member with a topics list as field. A member has at least one and up to 9 topics, to which he/she has subscribed. \r\n\r\n    @AllArgsConstructor\r\n    @Getter\r\n    @ToString\r\n    static class Member {\r\n        String id;\r\n        List&lt;Topic&gt; topics;\r\n        String email;\r\n    }\r\n\r\nOnce a week I get a list of Messages. Each messages belongs to exactly one Topic type. The list of Messages doesn&#39;t contain Messages, which have the same topic (no duplicate topics and never empty, 1 to 9 entries) \r\n\r\n    @AllArgsConstructor\r\n    @Getter\r\n    @ToString\r\n    static class Message {\r\n        String id;\r\n        Topic topic;\r\n        String content;\r\n    }\r\n\r\n**Question:**\r\n\r\nGiven a list of messages and a list of members create a map `Map&lt;Message, List&lt;Member&gt;&gt;` to be used to send each member a notification. Each member should only receive notifications for topics, to which he/she has subscribed. \r\n\r\nMy approach:\r\n\r\n 1. Create a `Map&lt;Topic, Message&gt;` from messages list (done as you can see in the example below)\r\n 2. Create a `Map&lt;Topic, List&lt;Member&gt;&gt;` from members list. (I am stuck here, don&#39;t know how to extract single Topics from members topic list to create my desired map)\r\n 3. after I get the above two maps create a final map `&lt;Message, List&lt;Member&gt;&gt;` mapping the values of first map to corresponding values of second map. Should be easy.\r\n\r\nExample setup:\r\n\r\n    import java.util.List;\r\n    import java.util.Map;\r\n    import java.util.function.Function;\r\n    import java.util.stream.Collectors;\r\n    \r\n    import lombok.AllArgsConstructor;\r\n    import lombok.Getter;\r\n    import lombok.ToString;\r\n    \r\n    public class Example {\r\n        public static void main(String[] args) {\r\n            List&lt;Message&gt; messages = List.of(new Message(&quot;KW41&quot;,Topic.EDUCATION,&quot;Some educational content published&quot;),\r\n                                             new Message(&quot;KW41&quot;,Topic.FITNESS,&quot;Some fitness content published&quot;),\r\n                                             new Message(&quot;KW41&quot;,Topic.DATING,&quot;Some dating content published&quot;),\r\n                                             new Message(&quot;KW41&quot;,Topic.RENT,&quot;Some rent content published&quot;));\r\n    \r\n            List&lt;Member&gt; memberList = List.of(new Member(&quot;1&quot;, List.of(Topic.SALE, Topic.RENT), &quot;john@gmail.com&quot;),\r\n                                              new Member(&quot;2&quot;, List.of(Topic.DATING, Topic.NEWS), &quot;jess@gmail.com&quot;),\r\n                                              new Member(&quot;3&quot;, List.of(Topic.EDUCATION), &quot;jane@gmail.com&quot;),\r\n                                              new Member(&quot;4&quot;, List.of(Topic.FITNESS, Topic.RENT, Topic.EDUCATION), &quot;jojo@gmail.com&quot;),\r\n                                              new Member(&quot;5&quot;, List.of(Topic.RELATIONSHIP), &quot;jina@gmail.com&quot;),\r\n                                              new Member(&quot;6&quot;, List.of(Topic.SALE, Topic.NEWS), &quot;jimi@gmail.com&quot;),\r\n                                              new Member(&quot;7&quot;, List.of(Topic.NEWS, Topic.EVENTS), &quot;jd@gmail.com&quot;));\r\n    \r\n            Map&lt;Topic,Message&gt; messageMap = messages.stream().collect(Collectors.toMap(Message::getTopic, Function.identity()));\r\n            messageMap.entrySet().forEach(System.out::println);\r\n        }\r\n    \r\n        @AllArgsConstructor\r\n        @Getter\r\n        @ToString\r\n        static class Member {\r\n            String id;\r\n            List&lt;Topic&gt; topics;\r\n            String email;\r\n        }\r\n    \r\n        @AllArgsConstructor\r\n        @Getter\r\n        @ToString\r\n        static class Message {\r\n            String id;\r\n            Topic topic;\r\n            String content;\r\n        }\r\n    \r\n        enum Topic {\r\n            RELATIONSHIP, DATING, EDUCATION, FITNESS, NEWS, RENT, EVENTS, GIVEAWAY, SALE\r\n        }\r\n    }\r\n\r\nHow can i get from the members list a `Map&lt;Topic, List&lt;Member&gt;&gt;` grouped by topics. (I cant&#39;t easily do `stream.collect(Collectors.groupingBy(Member::getTopics))` since it is a list. I need to extract them somehow before). Desired map should contain (adding only members ids for readability)\r\n\r\n    Topic.RELATIONSHIP=[5] \r\n    Topic.DATING=[2]  \r\n    Topic.EDUCATION=[3, 4] \r\n    Topic.FITNESS=[4]  \r\n    Topic.NEWS=[2, 6, 7]  \r\n    Topic.RENT=[1, 4]  \r\n    Topic.EVENTS=[7]   \r\n    Topic.SALE=[1, 6] \r\n","title":"Group a list of objects by multiple enum values in a list","body":"<p><strong>Context:</strong></p>\n<p>I have a <code>Topic</code> enum:</p>\n<pre><code>public enum Topic {\n    RELATIONSHIP, DATING, EDUCATION, FITNESS, NEWS, RENT, EVENTS, GIVEAWAY, SALE\n}\n</code></pre>\n<p>and a class Member with a topics list as field. A member has at least one and up to 9 topics, to which he/she has subscribed.</p>\n<pre><code>@AllArgsConstructor\n@Getter\n@ToString\nstatic class Member {\n    String id;\n    List&lt;Topic&gt; topics;\n    String email;\n}\n</code></pre>\n<p>Once a week I get a list of Messages. Each messages belongs to exactly one Topic type. The list of Messages doesn't contain Messages, which have the same topic (no duplicate topics and never empty, 1 to 9 entries)</p>\n<pre><code>@AllArgsConstructor\n@Getter\n@ToString\nstatic class Message {\n    String id;\n    Topic topic;\n    String content;\n}\n</code></pre>\n<p><strong>Question:</strong></p>\n<p>Given a list of messages and a list of members create a map <code>Map&lt;Message, List&lt;Member&gt;&gt;</code> to be used to send each member a notification. Each member should only receive notifications for topics, to which he/she has subscribed.</p>\n<p>My approach:</p>\n<ol>\n<li>Create a <code>Map&lt;Topic, Message&gt;</code> from messages list (done as you can see in the example below)</li>\n<li>Create a <code>Map&lt;Topic, List&lt;Member&gt;&gt;</code> from members list. (I am stuck here, don't know how to extract single Topics from members topic list to create my desired map)</li>\n<li>after I get the above two maps create a final map <code>&lt;Message, List&lt;Member&gt;&gt;</code> mapping the values of first map to corresponding values of second map. Should be easy.</li>\n</ol>\n<p>Example setup:</p>\n<pre><code>import java.util.List;\nimport java.util.Map;\nimport java.util.function.Function;\nimport java.util.stream.Collectors;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Getter;\nimport lombok.ToString;\n\npublic class Example {\n    public static void main(String[] args) {\n        List&lt;Message&gt; messages = List.of(new Message(&quot;KW41&quot;,Topic.EDUCATION,&quot;Some educational content published&quot;),\n                                         new Message(&quot;KW41&quot;,Topic.FITNESS,&quot;Some fitness content published&quot;),\n                                         new Message(&quot;KW41&quot;,Topic.DATING,&quot;Some dating content published&quot;),\n                                         new Message(&quot;KW41&quot;,Topic.RENT,&quot;Some rent content published&quot;));\n\n        List&lt;Member&gt; memberList = List.of(new Member(&quot;1&quot;, List.of(Topic.SALE, Topic.RENT), &quot;john@gmail.com&quot;),\n                                          new Member(&quot;2&quot;, List.of(Topic.DATING, Topic.NEWS), &quot;jess@gmail.com&quot;),\n                                          new Member(&quot;3&quot;, List.of(Topic.EDUCATION), &quot;jane@gmail.com&quot;),\n                                          new Member(&quot;4&quot;, List.of(Topic.FITNESS, Topic.RENT, Topic.EDUCATION), &quot;jojo@gmail.com&quot;),\n                                          new Member(&quot;5&quot;, List.of(Topic.RELATIONSHIP), &quot;jina@gmail.com&quot;),\n                                          new Member(&quot;6&quot;, List.of(Topic.SALE, Topic.NEWS), &quot;jimi@gmail.com&quot;),\n                                          new Member(&quot;7&quot;, List.of(Topic.NEWS, Topic.EVENTS), &quot;jd@gmail.com&quot;));\n\n        Map&lt;Topic,Message&gt; messageMap = messages.stream().collect(Collectors.toMap(Message::getTopic, Function.identity()));\n        messageMap.entrySet().forEach(System.out::println);\n    }\n\n    @AllArgsConstructor\n    @Getter\n    @ToString\n    static class Member {\n        String id;\n        List&lt;Topic&gt; topics;\n        String email;\n    }\n\n    @AllArgsConstructor\n    @Getter\n    @ToString\n    static class Message {\n        String id;\n        Topic topic;\n        String content;\n    }\n\n    enum Topic {\n        RELATIONSHIP, DATING, EDUCATION, FITNESS, NEWS, RENT, EVENTS, GIVEAWAY, SALE\n    }\n}\n</code></pre>\n<p>How can i get from the members list a <code>Map&lt;Topic, List&lt;Member&gt;&gt;</code> grouped by topics. (I cant't easily do <code>stream.collect(Collectors.groupingBy(Member::getTopics))</code> since it is a list. I need to extract them somehow before). Desired map should contain (adding only members ids for readability)</p>\n<pre><code>Topic.RELATIONSHIP=[5] \nTopic.DATING=[2]  \nTopic.EDUCATION=[3, 4] \nTopic.FITNESS=[4]  \nTopic.NEWS=[2, 6, 7]  \nTopic.RENT=[1, 4]  \nTopic.EVENTS=[7]   \nTopic.SALE=[1, 6] \n</code></pre>\n"},{"tags":["java","android","android-activity","onresume"],"comments":[{"owner":{"account_id":115378,"reputation":9176,"user_id":302994,"accept_rate":82,"display_name":"Jack"},"score":0,"creation_date":1313187004,"post_id":7046803,"comment_id":8423153,"body_markdown":"&quot; If I exit the application from Activity1, when I later click on the app icon from the phone, Activity2 is restarted&quot; --&gt; did you mean Activity1 is restarted?","body":"&quot; If I exit the application from Activity1, when I later click on the app icon from the phone, Activity2 is restarted&quot; --&gt; did you mean Activity1 is restarted?"}],"answers":[{"tags":[],"owner":{"account_id":115378,"reputation":9176,"user_id":302994,"accept_rate":82,"display_name":"Jack"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1313186975,"creation_date":1313186975,"answer_id":7046859,"question_id":7046803,"body_markdown":"Generally the way it works (from what I understand) is you use the BACK button to EXIT the activity, and the HOME button will essentially &quot;minimize&quot; the activity - bringing you back to whatever activity was left open. \r\n\r\nWhile you should leave this functionality the same, you can override the home button to completely exit your application.","title":"Android - How to start the exact same activity every time the app is opened up?","body":"<p>Generally the way it works (from what I understand) is you use the BACK button to EXIT the activity, and the HOME button will essentially \"minimize\" the activity - bringing you back to whatever activity was left open. </p>\n\n<p>While you should leave this functionality the same, you can override the home button to completely exit your application.</p>\n"},{"tags":[],"owner":{"account_id":164341,"reputation":2870,"user_id":387028,"accept_rate":83,"display_name":"ming_codes"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1313188507,"creation_date":1313187177,"answer_id":7046880,"question_id":7046803,"body_markdown":"I would think the solution to be destroying Activity1 and Activity2 &lt;code&gt;onStop&lt;/code&gt;. This leaves the stack with only your StartActivity. You can call the &lt;code&gt;finish&lt;/code&gt; method in Activity to terminate it programmatically at anytime.","title":"Android - How to start the exact same activity every time the app is opened up?","body":"<p>I would think the solution to be destroying Activity1 and Activity2 <code>onStop</code>. This leaves the stack with only your StartActivity. You can call the <code>finish</code> method in Activity to terminate it programmatically at anytime.</p>\n"},{"tags":[],"owner":{"account_id":180858,"reputation":4667,"user_id":414458,"display_name":"darma"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1313187236,"creation_date":1313187236,"answer_id":7046885,"question_id":7046803,"body_markdown":"You might look at the android:clearTaskOnLaunch activity attribute from the Manifest file : http://developer.android.com/guide/topics/manifest/activity-element.html\r\n\r\nI think setting this attribute to &quot;true&quot; on your root activity does what you want.","title":"Android - How to start the exact same activity every time the app is opened up?","body":"<p>You might look at the android:clearTaskOnLaunch activity attribute from the Manifest file : <a href=\"http://developer.android.com/guide/topics/manifest/activity-element.html\" rel=\"noreferrer\">http://developer.android.com/guide/topics/manifest/activity-element.html</a></p>\n\n<p>I think setting this attribute to \"true\" on your root activity does what you want.</p>\n"},{"tags":[],"owner":{"account_id":271939,"reputation":8745,"user_id":562743,"accept_rate":74,"display_name":"Balaji.K"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1313213882,"creation_date":1313213882,"answer_id":7048809,"question_id":7046803,"body_markdown":"In your mainfest.xml file write like this.\r\n\r\n    &lt;activity android:name=&quot;.StartActivity&quot; android:label=&quot;@string/app_name&quot;\r\n                    android:clearTaskOnLaunch=&quot;true&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;  \r\n   android:clearTaskOnLaunch=&quot;true&quot; attribute automatically restart the activity.","title":"Android - How to start the exact same activity every time the app is opened up?","body":"<p>In your mainfest.xml file write like this.</p>\n\n<pre><code>&lt;activity android:name=\".StartActivity\" android:label=\"@string/app_name\"\n                android:clearTaskOnLaunch=\"true\"&gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=\"android.intent.action.MAIN\" /&gt;\n            &lt;category android:name=\"android.intent.category.LAUNCHER\" /&gt;\n        &lt;/intent-filter&gt;\n    &lt;/activity&gt;  \n</code></pre>\n\n<p>android:clearTaskOnLaunch=\"true\" attribute automatically restart the activity.</p>\n"},{"tags":[],"owner":{"account_id":12253686,"reputation":21,"user_id":8943259,"display_name":"Digvvijay Ziite"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634057932,"creation_date":1634057932,"answer_id":69544361,"question_id":7046803,"body_markdown":"Just add the below code into your manifest file into the activity whichever you want t open on start.\r\n\r\n    &lt;intent-filter&gt;\r\n      &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n      &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n    &lt;/intent-filter&gt;\r\n\r\n","title":"Android - How to start the exact same activity every time the app is opened up?","body":"<p>Just add the below code into your manifest file into the activity whichever you want t open on start.</p>\n<pre><code>&lt;intent-filter&gt;\n  &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n  &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n&lt;/intent-filter&gt;\n</code></pre>\n"}],"owner":{"account_id":458523,"reputation":37,"user_id":858455,"accept_rate":57,"display_name":"dumbfreak"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5885,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":7046885,"answer_count":5,"score":1,"last_activity_date":1634057932,"creation_date":1313186457,"question_id":7046803,"body_markdown":"In a nutshell, to give you an example, I basically have an app with 3 activities:\r\nActivity1\r\nActivity2\r\nStartActivity\r\n\r\nStartActivity contains two buttons that correspond to the other two activities respectively, starting them up. If I exit the application from Activity1, when I later click on the app icon from the phone, Activity1 is restarted since Android keeps track of this. I need to have the app restart to bring me to the StartActivity, so that I can choose where to go by clicking the buttons, instead of having to click the back button to be able to end up at the StartActivity.\r\nI&#39;m assuming onResume and onRestart are involved, but where should they go? \r\n\r\nAny help is greatly appreciated thank you.","title":"Android - How to start the exact same activity every time the app is opened up?","body":"<p>In a nutshell, to give you an example, I basically have an app with 3 activities:\nActivity1\nActivity2\nStartActivity</p>\n\n<p>StartActivity contains two buttons that correspond to the other two activities respectively, starting them up. If I exit the application from Activity1, when I later click on the app icon from the phone, Activity1 is restarted since Android keeps track of this. I need to have the app restart to bring me to the StartActivity, so that I can choose where to go by clicking the buttons, instead of having to click the back button to be able to end up at the StartActivity.\nI'm assuming onResume and onRestart are involved, but where should they go? </p>\n\n<p>Any help is greatly appreciated thank you.</p>\n"},{"tags":["java","swing","jspinner","flowlayout"],"comments":[{"owner":{"account_id":3887004,"reputation":46525,"user_id":3218114,"accept_rate":84,"display_name":"Braj"},"score":1,"creation_date":1407433705,"post_id":25188926,"comment_id":39223533,"body_markdown":"please share a minimal testable code for fast response.","body":"please share a minimal testable code for fast response."},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1407438358,"post_id":25188926,"comment_id":39226106,"body_markdown":"`FlowLayout` should use the spinner&#39;s preferred size.","body":"<code>FlowLayout</code> should use the spinner&#39;s preferred size."},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":1,"creation_date":1407438865,"post_id":25188926,"comment_id":39226392,"body_markdown":"Possible [duplicate](http://stackoverflow.com/q/7374659/230513).","body":"Possible <a href=\"http://stackoverflow.com/q/7374659/230513\">duplicate</a>."},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1407439241,"post_id":25188926,"comment_id":39226634,"body_markdown":"@user3218114: Thank you for examining this critically; the accepted answer acknowledges the potential problem.","body":"@user3218114: Thank you for examining this critically; the accepted answer acknowledges the potential problem."}],"answers":[{"tags":[],"owner":{"display_name":"user3667171"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1634057267,"creation_date":1407434117,"answer_id":25189032,"question_id":25188926,"body_markdown":"You can do it all in the following three steps:\r\n\r\n```java\r\n// 1. Get the editor component of your spinner:\r\nComponent mySpinnerEditor = mySpinner.getEditor()\r\n// 2. Get the text field of your spinner&#39;s editor:\r\nJFormattedTextField jftf = ((JSpinner.DefaultEditor) mySpinnerEditor).getTextField();\r\n// 3. Set a default size to the text field:\r\njftf.setColumns(your_desired_number_of_columns);\r\n```","title":"Change JSpinner Size (width)","body":"<p>You can do it all in the following three steps:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// 1. Get the editor component of your spinner:\nComponent mySpinnerEditor = mySpinner.getEditor()\n// 2. Get the text field of your spinner's editor:\nJFormattedTextField jftf = ((JSpinner.DefaultEditor) mySpinnerEditor).getTextField();\n// 3. Set a default size to the text field:\njftf.setColumns(your_desired_number_of_columns);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1886487,"reputation":396557,"user_id":1705598,"accept_rate":92,"display_name":"icza"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1407434383,"creation_date":1407434383,"answer_id":25189098,"question_id":25188926,"body_markdown":"Set the preferred and minimum sizes:\r\n\r\n    RandomSpinner = new JSpinner(tempModel);\r\n    int w = RandomSpinner.getWidth();   int h = RandomSpinner.getHeight();\r\n    Dimension d = new Dimension(w * 2, h);\r\n    RandomSpinner.setPreferredSize(d);\r\n    RandomSpinner.setMinimumSize(d);\r\n\r\nSetting preferred size should be enough if you have enough space in your frame.","title":"Change JSpinner Size (width)","body":"<p>Set the preferred and minimum sizes:</p>\n\n<pre><code>RandomSpinner = new JSpinner(tempModel);\nint w = RandomSpinner.getWidth();   int h = RandomSpinner.getHeight();\nDimension d = new Dimension(w * 2, h);\nRandomSpinner.setPreferredSize(d);\nRandomSpinner.setMinimumSize(d);\n</code></pre>\n\n<p>Setting preferred size should be enough if you have enough space in your frame.</p>\n"}],"owner":{"account_id":4138782,"reputation":111,"user_id":3394741,"display_name":"UTSAstudent"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10665,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"closed_date":1407439265,"answer_count":2,"score":9,"last_activity_date":1634057267,"creation_date":1407433668,"question_id":25188926,"body_markdown":"My problem: JSpinner is so skinny that I can only see the chars on the string in the last spot. \r\n\r\nex: &quot;Hello&quot;   I only see &#39;o&#39;.\r\n\r\nI have a JPanel in a JFrame&#39;s BorderLayout.SOUTH\r\n\r\nThe JPanel&#39;s layout manager is the default which is - correct me if I&#39;m misinformed - a FlowLayout manager.\r\n\r\nalso there&#39;s multiple components in the previously mentioned JPanel.\r\n\r\nI&#39;ve tried\r\n\r\n    RandomSpinner = new JSpinner(tempModel);\r\n\tint w = RandomSpinner.getWidth();\tint h = RandomSpinner.getHeight();\r\n\tRandomSpinner.setSize(new Dimension(w * 2, h));\r\n\tadd(RandomSpinner);\r\n\r\nthis had no effect on the width of the JSpinner.\r\n\r\nHow should I change the width of my JSpinner or is this a FlowLayout issue?\r\n\r\nthank you \r\n","title":"Change JSpinner Size (width)","body":"<p>My problem: JSpinner is so skinny that I can only see the chars on the string in the last spot. </p>\n\n<p>ex: \"Hello\"   I only see 'o'.</p>\n\n<p>I have a JPanel in a JFrame's BorderLayout.SOUTH</p>\n\n<p>The JPanel's layout manager is the default which is - correct me if I'm misinformed - a FlowLayout manager.</p>\n\n<p>also there's multiple components in the previously mentioned JPanel.</p>\n\n<p>I've tried</p>\n\n<pre><code>RandomSpinner = new JSpinner(tempModel);\nint w = RandomSpinner.getWidth();   int h = RandomSpinner.getHeight();\nRandomSpinner.setSize(new Dimension(w * 2, h));\nadd(RandomSpinner);\n</code></pre>\n\n<p>this had no effect on the width of the JSpinner.</p>\n\n<p>How should I change the width of my JSpinner or is this a FlowLayout issue?</p>\n\n<p>thank you </p>\n"},{"tags":["java","android","xml","android-layout","android-alertdialog"],"answers":[{"tags":[],"owner":{"account_id":7035837,"reputation":2853,"user_id":5389995,"accept_rate":50,"display_name":"Brandon Zamudio"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1494445201,"creation_date":1494363194,"answer_id":43879669,"question_id":43877641,"body_markdown":"You already have defined the **textColor** `android:textColor=&quot;#33B5E5&quot;` of your **textView** in your **`title.xml`**. **Just change it to the color you want.**\r\n\r\nHere&#39;s an example:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;fill_parent&quot;\r\n        android:layout_height=&quot;fill_parent&quot;\r\n        android:paddingLeft=&quot;24dp&quot;\r\n        android:paddingRight=&quot;24dp&quot;\r\n        android:paddingTop=&quot;9dp&quot;\r\n        android:paddingBottom=&quot;18dp&quot;&gt;\r\n    &lt;TextView\r\n        android:id=&quot;@+id/customTitle&quot;\r\n        android:layout_width=&quot;fill_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_gravity=&quot;center&quot;\r\n        android:text=&quot;Custom title view&quot;\r\n        android:textColor=&quot;#000000&quot;\r\n        android:textSize=&quot;24sp&quot;\r\n        android:layout_centerVertical=&quot;true&quot;/&gt;\r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/anotherText&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_alignParentLeft=&quot;true&quot;\r\n        android:layout_alignParentStart=&quot;true&quot;\r\n        android:layout_below=&quot;@+id/customTitle&quot;\r\n        android:paddingTop=&quot;9dp&quot;\r\n        android:text=&quot;Another TextView&quot;\r\n        android:textColor=&quot;@android:color/holo_purple&quot; /&gt;\r\n    \r\n        &lt;LinearLayout\r\n            android:id=&quot;@+id/lin_layout&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_alignParentEnd=&quot;true&quot;\r\n            android:layout_alignParentRight=&quot;true&quot;\r\n            android:orientation=&quot;vertical&quot;\r\n            android:layout_centerVertical=&quot;true&quot;&gt;\r\n    \r\n            &lt;ProgressBar\r\n                style=&quot;?android:attr/progressBarStyle&quot;\r\n                android:layout_width=&quot;wrap_content&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:id=&quot;@+id/loading_spinner&quot;\r\n                android:visibility=&quot;invisible&quot;/&gt;\r\n    \r\n        &lt;/LinearLayout&gt;\r\n    \r\n    &lt;/RelativeLayout&gt;\r\n\r\n[![enter image description here][1]][1]\r\n\r\nTo update the view dynamically:\r\n-------------------------------\r\n\r\n    LayoutInflater inflater = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);\r\n    \r\n            final View yourTitleView = inflater.inflate(R.layout.title, null);\r\n            TextView yourTitle = (TextView) yourTitleView.findViewById(R.id.customTitle);\r\n            yourTitle.setText(&quot;Your new title text&quot;);//Dynamical text\r\n            yourTitle.setTextColor(Color.parseColor(&quot;#ffa000&quot;)); //Dynamical color\r\n    \r\n            //Your AlertDialog\r\n            new AlertDialog.Builder(this)\r\n                    .setCustomTitle(yourTitleView) //The title&#39;s TextView&#39;s style should be the\r\n                    // same as the the one of the dialog normal AlertDialog&#39;s Title Style (see example above)\r\n                    .setView(inflater.inflate(R.layout.content, null))\r\n                    .setPositiveButton(&quot;Start&quot;, new DialogInterface.OnClickListener() {\r\n                        @Override\r\n                        public void onClick(DialogInterface dialogInterface, int i) {\r\n                            dialogInterface.dismiss();\r\n                        }\r\n                    })\r\n                    .setNegativeButton(&quot;Close&quot;, new DialogInterface.OnClickListener() {\r\n                        @Override\r\n                        public void onClick(DialogInterface dialogInterface, int i) {\r\n                            dialogInterface.dismiss();\r\n                        }\r\n                    })\r\n                    .show();\r\n\r\nDon&#39;t forget to define good ID&#39;s to your views.\r\n\r\nFor another misunderstandings\r\n-------------------\r\n**To format text wihtout custom dialogs just use an Html function**\r\n\r\n    Html.fromHtml(&quot;&lt;font color=&#39;#000000&#39;&gt; Your black text &lt;/font&gt;&quot;)\r\n\r\nExample:\r\n\r\n     new AlertDialog.Builder(YourActivity.this)\r\n             .setTitle(Html.fromHtml(&quot;&lt;font color=&#39;#000000&#39;&gt; Your black title &lt;/font&gt;&quot;))\r\n             .setView(yourView)\r\n             .setPositiveButton(&quot;Ok&quot;, new DialogInterface.OnClickListener() {\r\n                  public void onClick(DialogInterface dialog, int which) {\r\n                          //Stuff to do\r\n                       }\r\n                  })\r\n             .setNegativeButton(&quot;Cancel&quot;, new DialogInterface.OnClickListener() {\r\n                  public void onClick(DialogInterface dialog, int which) {\r\n                          //Stuff to do\r\n                          dialog.dismiss();\r\n                       }\r\n                   })\r\n             .show();\r\n\r\nHope it helps.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/OaYE2.png","title":"Setting and updating custom views for AlertDialogs","body":"<p>You already have defined the <strong>textColor</strong> <code>android:textColor=\"#33B5E5\"</code> of your <strong>textView</strong> in your <strong><code>title.xml</code></strong>. <strong>Just change it to the color you want.</strong></p>\n\n<p>Here's an example:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;RelativeLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"fill_parent\"\n    android:layout_height=\"fill_parent\"\n    android:paddingLeft=\"24dp\"\n    android:paddingRight=\"24dp\"\n    android:paddingTop=\"9dp\"\n    android:paddingBottom=\"18dp\"&gt;\n&lt;TextView\n    android:id=\"@+id/customTitle\"\n    android:layout_width=\"fill_parent\"\n    android:layout_height=\"wrap_content\"\n    android:layout_gravity=\"center\"\n    android:text=\"Custom title view\"\n    android:textColor=\"#000000\"\n    android:textSize=\"24sp\"\n    android:layout_centerVertical=\"true\"/&gt;\n\n&lt;TextView\n    android:id=\"@+id/anotherText\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    android:layout_alignParentLeft=\"true\"\n    android:layout_alignParentStart=\"true\"\n    android:layout_below=\"@+id/customTitle\"\n    android:paddingTop=\"9dp\"\n    android:text=\"Another TextView\"\n    android:textColor=\"@android:color/holo_purple\" /&gt;\n\n    &lt;LinearLayout\n        android:id=\"@+id/lin_layout\"\n        android:layout_width=\"wrap_content\"\n        android:layout_height=\"wrap_content\"\n        android:layout_alignParentEnd=\"true\"\n        android:layout_alignParentRight=\"true\"\n        android:orientation=\"vertical\"\n        android:layout_centerVertical=\"true\"&gt;\n\n        &lt;ProgressBar\n            style=\"?android:attr/progressBarStyle\"\n            android:layout_width=\"wrap_content\"\n            android:layout_height=\"wrap_content\"\n            android:id=\"@+id/loading_spinner\"\n            android:visibility=\"invisible\"/&gt;\n\n    &lt;/LinearLayout&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/OaYE2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OaYE2.png\" alt=\"enter image description here\"></a></p>\n\n<h2>To update the view dynamically:</h2>\n\n<pre><code>LayoutInflater inflater = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);\n\n        final View yourTitleView = inflater.inflate(R.layout.title, null);\n        TextView yourTitle = (TextView) yourTitleView.findViewById(R.id.customTitle);\n        yourTitle.setText(\"Your new title text\");//Dynamical text\n        yourTitle.setTextColor(Color.parseColor(\"#ffa000\")); //Dynamical color\n\n        //Your AlertDialog\n        new AlertDialog.Builder(this)\n                .setCustomTitle(yourTitleView) //The title's TextView's style should be the\n                // same as the the one of the dialog normal AlertDialog's Title Style (see example above)\n                .setView(inflater.inflate(R.layout.content, null))\n                .setPositiveButton(\"Start\", new DialogInterface.OnClickListener() {\n                    @Override\n                    public void onClick(DialogInterface dialogInterface, int i) {\n                        dialogInterface.dismiss();\n                    }\n                })\n                .setNegativeButton(\"Close\", new DialogInterface.OnClickListener() {\n                    @Override\n                    public void onClick(DialogInterface dialogInterface, int i) {\n                        dialogInterface.dismiss();\n                    }\n                })\n                .show();\n</code></pre>\n\n<p>Don't forget to define good ID's to your views.</p>\n\n<h2>For another misunderstandings</h2>\n\n<p><strong>To format text wihtout custom dialogs just use an Html function</strong></p>\n\n<pre><code>Html.fromHtml(\"&lt;font color='#000000'&gt; Your black text &lt;/font&gt;\")\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code> new AlertDialog.Builder(YourActivity.this)\n         .setTitle(Html.fromHtml(\"&lt;font color='#000000'&gt; Your black title &lt;/font&gt;\"))\n         .setView(yourView)\n         .setPositiveButton(\"Ok\", new DialogInterface.OnClickListener() {\n              public void onClick(DialogInterface dialog, int which) {\n                      //Stuff to do\n                   }\n              })\n         .setNegativeButton(\"Cancel\", new DialogInterface.OnClickListener() {\n              public void onClick(DialogInterface dialog, int which) {\n                      //Stuff to do\n                      dialog.dismiss();\n                   }\n               })\n         .show();\n</code></pre>\n\n<p>Hope it helps.</p>\n"}],"owner":{"account_id":5576599,"reputation":330,"user_id":4419810,"display_name":"Henrykvdb"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1228,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":43879669,"answer_count":1,"score":4,"last_activity_date":1634056946,"creation_date":1494355574,"question_id":43877641,"body_markdown":"All the Dialogs in my app are constructed with AlertDialog except for my Bluetooth-picker dialog. My goal is to create an AlertDialog for that as well.\r\n\r\n***Problem:***\r\n\r\nIf I want to add a spinning progress bar to the top right I&#39;d need to use the .setCustomTitle(view) method of AlertDialog&#39;s Builder. This works, but I&#39;d like to use the default AlertDialog title style for this title as well, but I&#39;m unsure how to do that.\r\n\r\nSo basically I want the blue text of the second screenshot to appear exactly like the black one in the first one. I&#39;d prefer to do this dynamically instead of just finding out the exact values AlertDialog uses and hard code those.\r\n\r\n**My attempts:**\r\n\r\nI looked through the AlertDialog&#39;s source and found that &quot;The actual style that an AlertDialog uses is a private implementation&quot;. However I also found out that they use R.attr.alertDialogTheme as attribute and [I can get the resourceId of the theme][1]\r\n\r\nI tried creating a TextView with that resourceId but that didn&#39;t work (TextView apeared like it would unstyled).\r\n\r\nDefault AlertDialog title style:\r\n\r\n[![Default AlertDialog title style][2]][2]\r\n\r\nMy current title:\r\n\r\n[![My current title][3]][3]\r\n\r\nYou can recreate the Dialogs shown above with the following code: https://gist.github.com/anonymous/34edc1afbdb7e9d10d9adbda63d4cd8c\r\n\r\nThe xml&#39;s required are: [content.xml][4] and [title.xml][5] (and [colors.xml][6] and [styles.xml][7] )\r\n\r\n\r\n  [1]: https://gist.github.com/anonymous/5b85084adddd915da2cf738925e4eb6c\r\n  [2]: https://i.stack.imgur.com/NL4M5.png\r\n  [3]: https://i.stack.imgur.com/4du9y.png\r\n  [4]: https://gist.github.com/anonymous/e49e69615fc57a5ca65b31b59b6abc1e\r\n  [5]: https://gist.github.com/anonymous/5ebfda25d8bf412ceb410ef07d263e14\r\n  [6]: https://gist.github.com/anonymous/3e3540adacd81c40ea54972de343f8be\r\n  [7]: https://gist.github.com/anonymous/8268fa6e8ba1824872c2659ab09a92b3","title":"Setting and updating custom views for AlertDialogs","body":"<p>All the Dialogs in my app are constructed with AlertDialog except for my Bluetooth-picker dialog. My goal is to create an AlertDialog for that as well.</p>\n\n<p><strong><em>Problem:</em></strong></p>\n\n<p>If I want to add a spinning progress bar to the top right I'd need to use the .setCustomTitle(view) method of AlertDialog's Builder. This works, but I'd like to use the default AlertDialog title style for this title as well, but I'm unsure how to do that.</p>\n\n<p>So basically I want the blue text of the second screenshot to appear exactly like the black one in the first one. I'd prefer to do this dynamically instead of just finding out the exact values AlertDialog uses and hard code those.</p>\n\n<p><strong>My attempts:</strong></p>\n\n<p>I looked through the AlertDialog's source and found that \"The actual style that an AlertDialog uses is a private implementation\". However I also found out that they use R.attr.alertDialogTheme as attribute and <a href=\"https://gist.github.com/anonymous/5b85084adddd915da2cf738925e4eb6c\" rel=\"nofollow noreferrer\">I can get the resourceId of the theme</a></p>\n\n<p>I tried creating a TextView with that resourceId but that didn't work (TextView apeared like it would unstyled).</p>\n\n<p>Default AlertDialog title style:</p>\n\n<p><a href=\"https://i.stack.imgur.com/NL4M5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NL4M5.png\" alt=\"Default AlertDialog title style\"></a></p>\n\n<p>My current title:</p>\n\n<p><a href=\"https://i.stack.imgur.com/4du9y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4du9y.png\" alt=\"My current title\"></a></p>\n\n<p>You can recreate the Dialogs shown above with the following code: <a href=\"https://gist.github.com/anonymous/34edc1afbdb7e9d10d9adbda63d4cd8c\" rel=\"nofollow noreferrer\">https://gist.github.com/anonymous/34edc1afbdb7e9d10d9adbda63d4cd8c</a></p>\n\n<p>The xml's required are: <a href=\"https://gist.github.com/anonymous/e49e69615fc57a5ca65b31b59b6abc1e\" rel=\"nofollow noreferrer\">content.xml</a> and <a href=\"https://gist.github.com/anonymous/5ebfda25d8bf412ceb410ef07d263e14\" rel=\"nofollow noreferrer\">title.xml</a> (and <a href=\"https://gist.github.com/anonymous/3e3540adacd81c40ea54972de343f8be\" rel=\"nofollow noreferrer\">colors.xml</a> and <a href=\"https://gist.github.com/anonymous/8268fa6e8ba1824872c2659ab09a92b3\" rel=\"nofollow noreferrer\">styles.xml</a> )</p>\n"},{"tags":["java","spring","jpa","spring-data-jpa","spring-data"],"answers":[{"tags":[],"owner":{"account_id":13540458,"reputation":4811,"user_id":9768291,"display_name":"payne"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633709546,"creation_date":1633709546,"answer_id":69498845,"question_id":69484455,"body_markdown":"A temporary fix: don&#39;t use `@IdClass` when you have only a single attribute that is the ID.\r\n\r\n```java\r\n@Entity\r\n@Table(name = &quot;myentity&quot;)\r\n@JsonIgnoreProperties(ignoreUnknown = true)\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n//@IdClass(PrimaryKey.class)\r\npublic class TemporaryReservation {\r\n\r\n    @Id\r\n    @Column(name = &quot;the_id&quot;, updatable = false)\r\n    private String theId;\r\n\r\n    // other fields which aren&#39;t part of the primary key\r\n}\r\n```\r\n\r\n```java\r\npublic interface MyEntityCRUDRepository extends CrudRepository&lt;MyEntity, String&gt; { }\r\n```\r\n\r\nOnce that&#39;s changed, make the appropriate adjustments in the rest of the code.","title":"&quot;incorrect PK&quot; : delete operation on CrudRepository for entity annotated with @IdClass","body":"<p>A temporary fix: don't use <code>@IdClass</code> when you have only a single attribute that is the ID.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;myentity&quot;)\n@JsonIgnoreProperties(ignoreUnknown = true)\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\n//@IdClass(PrimaryKey.class)\npublic class TemporaryReservation {\n\n    @Id\n    @Column(name = &quot;the_id&quot;, updatable = false)\n    private String theId;\n\n    // other fields which aren't part of the primary key\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public interface MyEntityCRUDRepository extends CrudRepository&lt;MyEntity, String&gt; { }\n</code></pre>\n<p>Once that's changed, make the appropriate adjustments in the rest of the code.</p>\n"},{"tags":[],"owner":{"account_id":13540458,"reputation":4811,"user_id":9768291,"display_name":"payne"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1634056638,"creation_date":1634056638,"answer_id":69544117,"question_id":69484455,"body_markdown":"Turns out it was a bug in `Spring Data`. See the related (now solved) issue: https://github.com/spring-projects/spring-data-jpa/issues/2330.\r\n\r\nOne of the maintainers said:\r\n\r\n&gt; Another workaround is to let your entities implement `Persistable`.","title":"&quot;incorrect PK&quot; : delete operation on CrudRepository for entity annotated with @IdClass","body":"<p>Turns out it was a bug in <code>Spring Data</code>. See the related (now solved) issue: <a href=\"https://github.com/spring-projects/spring-data-jpa/issues/2330\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-data-jpa/issues/2330</a>.</p>\n<p>One of the maintainers said:</p>\n<blockquote>\n<p>Another workaround is to let your entities implement <code>Persistable</code>.</p>\n</blockquote>\n"}],"owner":{"account_id":13540458,"reputation":4811,"user_id":9768291,"display_name":"payne"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":202,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69544117,"answer_count":2,"score":1,"last_activity_date":1634056638,"creation_date":1633622959,"question_id":69484455,"body_markdown":"# Context\r\nWhen my service calls `repository.delete(myEntity)`, I get the following error:\r\n\r\n&gt; 105 | You have provided an instance of an incorrect PK class for this find operation.  **Class expected : class com.foo.PrimaryKey, Class received : class java.lang.String**.\r\n\r\nThe repository interface `extends CrudRepository&lt;MyEntity, PrimaryKey&gt;`.\r\n\r\nI use `@IdClass(PrimaryKey.class)` on my `@Entity` class and have labeled the relevant individual fields with `@Id`. **There is a single field in the `PrimaryKey`, and it&#39;s a `String`**. We do this to keep our codebase consistent so that every `@Entity` always declares its primary key as a composite key.\r\n\r\n## My own analysis (could be wrong)\r\nFor some reason, JPA internally calls `em.find(MyEntity.class, primaryKeyString)` instead of building a `PrimaryKey` instance from that String and using it, hence the error.\r\n\r\nThe same error happens when I try to call `repository.deleteById(correspondingPrimaryKeyInstance)` instead.\r\n\r\n### Framework code\r\nThis comes from `org.springframework.data.jpa.repository.support.SimpleJpaRepository`, and I added a comment where things fail:\r\n\r\n```java\r\n\t@Override\r\n\t@Transactional\r\n\t@SuppressWarnings(&quot;unchecked&quot;)\r\n\tpublic void delete(T entity) {\r\n\r\n\t\tAssert.notNull(entity, &quot;Entity must not be null!&quot;);\r\n\r\n\t\tif (entityInformation.isNew(entity)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tClass&lt;?&gt; type = ProxyUtils.getUserClass(entity);\r\n\r\n\t\tT existing = (T) em.find(type, entityInformation.getId(entity)); // IT FAILS HERE... `entityInformation.getId(entity)` returns a String instead of the expected `PrimaryKey`\r\n\r\n\t\t// if the entity to be deleted doesn&#39;t exist, delete is a NOOP\r\n\t\tif (existing == null) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tem.remove(em.contains(entity) ? entity : em.merge(entity));\r\n\t}\r\n```\r\n\r\n# Code\r\n\r\n* Repository:\r\n```java\r\npublic interface MyEntityCRUDRepository extends CrudRepository&lt;MyEntity, PrimaryKey&gt; { }\r\npublic interface MyEntityCustomRepository { /* some custom operations */ }\r\n\r\n@Repository\r\npublic interface MyEntityRepository extends MyEntityCRUDRepository, MyEntityCustomRepository { }\r\n```\r\n\r\n* Service:\r\n```java\r\n@Service\r\n@Transactional(rollbackFor = Exception.class)\r\n@RequiredArgsConstructor\r\npublic class MyEntityService {\r\n    private final MyEntityRepository repository;\r\n\r\n    public void destroy(final PrimaryKey pk) {\r\n//        repository.deleteById(pk); // also returns the error\r\n        MyEntity myEntity = repository.findById(pk)\r\n                .orElseThrow(() -&gt; new IllegalArgumentException(DOES_NOT_EXIST));\r\n        repository.delete(myEntity); // returns the error\r\n    }\r\n}\r\n```\r\n\r\n* JPA entity:\r\n```java\r\n@Entity\r\n@Table(name = &quot;myentity&quot;)\r\n@JsonIgnoreProperties(ignoreUnknown = true)\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@IdClass(PrimaryKey.class)\r\npublic class MyEntity {\r\n\r\n    @Id\r\n    @Column(name = &quot;the_id&quot;, updatable = false)\r\n    private String theId;\r\n\r\n    // other fields which aren&#39;t part of the primary key\r\n}\r\n```\r\n\r\n* Primary key class:\r\n```java\r\n@Data\r\n@Builder\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\npublic class PrimaryKey implements Serializable {\r\n    private String theId;\r\n}\r\n```","title":"&quot;incorrect PK&quot; : delete operation on CrudRepository for entity annotated with @IdClass","body":"<h1>Context</h1>\n<p>When my service calls <code>repository.delete(myEntity)</code>, I get the following error:</p>\n<blockquote>\n<p>105 | You have provided an instance of an incorrect PK class for this find operation.  <strong>Class expected : class com.foo.PrimaryKey, Class received : class java.lang.String</strong>.</p>\n</blockquote>\n<p>The repository interface <code>extends CrudRepository&lt;MyEntity, PrimaryKey&gt;</code>.</p>\n<p>I use <code>@IdClass(PrimaryKey.class)</code> on my <code>@Entity</code> class and have labeled the relevant individual fields with <code>@Id</code>. <strong>There is a single field in the <code>PrimaryKey</code>, and it's a <code>String</code></strong>. We do this to keep our codebase consistent so that every <code>@Entity</code> always declares its primary key as a composite key.</p>\n<h2>My own analysis (could be wrong)</h2>\n<p>For some reason, JPA internally calls <code>em.find(MyEntity.class, primaryKeyString)</code> instead of building a <code>PrimaryKey</code> instance from that String and using it, hence the error.</p>\n<p>The same error happens when I try to call <code>repository.deleteById(correspondingPrimaryKeyInstance)</code> instead.</p>\n<h3>Framework code</h3>\n<p>This comes from <code>org.springframework.data.jpa.repository.support.SimpleJpaRepository</code>, and I added a comment where things fail:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Override\n    @Transactional\n    @SuppressWarnings(&quot;unchecked&quot;)\n    public void delete(T entity) {\n\n        Assert.notNull(entity, &quot;Entity must not be null!&quot;);\n\n        if (entityInformation.isNew(entity)) {\n            return;\n        }\n\n        Class&lt;?&gt; type = ProxyUtils.getUserClass(entity);\n\n        T existing = (T) em.find(type, entityInformation.getId(entity)); // IT FAILS HERE... `entityInformation.getId(entity)` returns a String instead of the expected `PrimaryKey`\n\n        // if the entity to be deleted doesn't exist, delete is a NOOP\n        if (existing == null) {\n            return;\n        }\n\n        em.remove(em.contains(entity) ? entity : em.merge(entity));\n    }\n</code></pre>\n<h1>Code</h1>\n<ul>\n<li>Repository:</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>public interface MyEntityCRUDRepository extends CrudRepository&lt;MyEntity, PrimaryKey&gt; { }\npublic interface MyEntityCustomRepository { /* some custom operations */ }\n\n@Repository\npublic interface MyEntityRepository extends MyEntityCRUDRepository, MyEntityCustomRepository { }\n</code></pre>\n<ul>\n<li>Service:</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\n@Transactional(rollbackFor = Exception.class)\n@RequiredArgsConstructor\npublic class MyEntityService {\n    private final MyEntityRepository repository;\n\n    public void destroy(final PrimaryKey pk) {\n//        repository.deleteById(pk); // also returns the error\n        MyEntity myEntity = repository.findById(pk)\n                .orElseThrow(() -&gt; new IllegalArgumentException(DOES_NOT_EXIST));\n        repository.delete(myEntity); // returns the error\n    }\n}\n</code></pre>\n<ul>\n<li>JPA entity:</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;myentity&quot;)\n@JsonIgnoreProperties(ignoreUnknown = true)\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@IdClass(PrimaryKey.class)\npublic class MyEntity {\n\n    @Id\n    @Column(name = &quot;the_id&quot;, updatable = false)\n    private String theId;\n\n    // other fields which aren't part of the primary key\n}\n</code></pre>\n<ul>\n<li>Primary key class:</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class PrimaryKey implements Serializable {\n    private String theId;\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","soap"],"comments":[{"owner":{"account_id":384402,"reputation":1902,"user_id":740888,"display_name":"httPants"},"score":0,"creation_date":1634082176,"post_id":69544028,"comment_id":122929265,"body_markdown":"how are you generating classes from your wsdl?","body":"how are you generating classes from your wsdl?"},{"owner":{"account_id":6631961,"reputation":464,"user_id":5120388,"accept_rate":57,"display_name":"newcoder"},"score":0,"creation_date":1634102623,"post_id":69544028,"comment_id":122932679,"body_markdown":"this is generated using wsimport available in openjdk, as I cannot find any plugin which can do automatically in gradle","body":"this is generated using wsimport available in openjdk, as I cannot find any plugin which can do automatically in gradle"},{"owner":{"account_id":384402,"reputation":1902,"user_id":740888,"display_name":"httPants"},"score":0,"creation_date":1634192263,"post_id":69544028,"comment_id":122960160,"body_markdown":"There are many maven plugins that can do that.  For example, org.apache.cxf:cxf-codegen-plugin","body":"There are many maven plugins that can do that.  For example, org.apache.cxf:cxf-codegen-plugin"}],"owner":{"account_id":6631961,"reputation":464,"user_id":5120388,"accept_rate":57,"display_name":"newcoder"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2652,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1634056289,"creation_date":1634056289,"question_id":69544028,"body_markdown":"I am using springboot 2.5.4. I am calling a SOAP service from my code using the endpoint class that is generated from the WSDL. \r\n\r\nNow I have a requirement that for each soap call I was to log the request and response. But I am not able to figure it our how to use that.\r\n\r\nI tried a few examples that I got from the internet but it&#39;s not working. So can someone know how to implements this ?\r\n\r\n**My Code**\r\n\r\n**WSDL Class:**\r\n\r\n    @WebClient(targetNamespace=&quot;mynamespace&quot;, wsdlLocation=&quot;xx&quot;)\r\n    public class ServiceClient extends Service{\r\n     // ,,,,\r\n    \r\n     @WebEndpoint(nmae=&quot;producer&quot;)\r\n     public Producer getProducer(){\r\n        return super.getPort(new QName(namespace:&quot;mynamespace&quot;, localpart:&quot;producer&quot;),Producer.class));\r\n     }\r\n    \r\n    }\r\n\r\n**Service Class**\r\n\r\n    class myService{\r\n    \r\n      method(){\r\n    \r\n      Producer p = ServiceClient.getProducer();\r\n    \r\n      // cal the service\r\n      response = p.getData(request);\r\n    \r\n      }\r\n    \r\n    }\r\n\r\n**Interceptor**\r\n\r\n    public class CustomEndpointInterceptor implements EndpointInter{\r\n     // implemented the methods\r\n    }\r\n\r\n    @EnableWs\r\n    @Configuration\r\n    public class SoapServerConfig extends WsConfigurerAdapter {\r\n    \r\n        @Override\r\n        public void addInterceptors(List&lt;EndpointInterceptor&gt; interceptors) {\r\n    \r\n            // register global interceptor\r\n            interceptors.add(new CustomEndpointInterceptor());\r\n    \r\n            // register endpoint specific interceptor\r\n            interceptors.add(new PayloadRootSmartSoapEndpointInterceptor(\r\n                    new CustomEndpointInterceptor(),\r\n                    &quot;mynamespace&quot;,\r\n                    &quot;producer&quot;));\r\n        }\r\n    }","title":"Interceptor for SOAP request/response in Springboot","body":"<p>I am using springboot 2.5.4. I am calling a SOAP service from my code using the endpoint class that is generated from the WSDL.</p>\n<p>Now I have a requirement that for each soap call I was to log the request and response. But I am not able to figure it our how to use that.</p>\n<p>I tried a few examples that I got from the internet but it's not working. So can someone know how to implements this ?</p>\n<p><strong>My Code</strong></p>\n<p><strong>WSDL Class:</strong></p>\n<pre><code>@WebClient(targetNamespace=&quot;mynamespace&quot;, wsdlLocation=&quot;xx&quot;)\npublic class ServiceClient extends Service{\n // ,,,,\n\n @WebEndpoint(nmae=&quot;producer&quot;)\n public Producer getProducer(){\n    return super.getPort(new QName(namespace:&quot;mynamespace&quot;, localpart:&quot;producer&quot;),Producer.class));\n }\n\n}\n</code></pre>\n<p><strong>Service Class</strong></p>\n<pre><code>class myService{\n\n  method(){\n\n  Producer p = ServiceClient.getProducer();\n\n  // cal the service\n  response = p.getData(request);\n\n  }\n\n}\n</code></pre>\n<p><strong>Interceptor</strong></p>\n<pre><code>public class CustomEndpointInterceptor implements EndpointInter{\n // implemented the methods\n}\n\n@EnableWs\n@Configuration\npublic class SoapServerConfig extends WsConfigurerAdapter {\n\n    @Override\n    public void addInterceptors(List&lt;EndpointInterceptor&gt; interceptors) {\n\n        // register global interceptor\n        interceptors.add(new CustomEndpointInterceptor());\n\n        // register endpoint specific interceptor\n        interceptors.add(new PayloadRootSmartSoapEndpointInterceptor(\n                new CustomEndpointInterceptor(),\n                &quot;mynamespace&quot;,\n                &quot;producer&quot;));\n    }\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":195331,"reputation":275408,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1634056880,"post_id":69544002,"comment_id":122922067,"body_markdown":"In your 3rd attempt, the overloaded `fromJson` method you&#39;re using infers the type for its type parameter from the invocation context. Since `invoke` expects an `Object[]` for its second argument, that&#39;s the type that inferred. But that `fromJson` call returns a `String`. There&#39;s an implicit cast introduced that fails. Use `new Gson().&lt;String&gt;fromJson(...)` or call the method and assign it to a `String`, then pass the `String` to `invoke`.","body":"In your 3rd attempt, the overloaded <code>fromJson</code> method you&#39;re using infers the type for its type parameter from the invocation context. Since <code>invoke</code> expects an <code>Object[]</code> for its second argument, that&#39;s the type that inferred. But that <code>fromJson</code> call returns a <code>String</code>. There&#39;s an implicit cast introduced that fails. Use <code>new Gson().&lt;String&gt;fromJson(...)</code> or call the method and assign it to a <code>String</code>, then pass the <code>String</code> to <code>invoke</code>."},{"owner":{"account_id":1167427,"reputation":24341,"user_id":1145388,"accept_rate":75,"display_name":"Stephen Ostermiller"},"score":0,"creation_date":1634201420,"post_id":69544002,"comment_id":122963413,"body_markdown":"@SotiriosDelimanolis That should be posted as an answer rather than as a comment. Comments are temporary and cannot be accepted as an answer. There is no mechanism for converting comments to answers, so I cannot do it for you. You will need to copy your comment into the answer box and then delete your comment.","body":"@SotiriosDelimanolis That should be posted as an answer rather than as a comment. Comments are temporary and cannot be accepted as an answer. There is no mechanism for converting comments to answers, so I cannot do it for you. You will need to copy your comment into the answer box and then delete your comment."}],"owner":{"account_id":20245684,"reputation":21,"user_id":14848218,"display_name":"Levin"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1634056172,"creation_date":1634056172,"question_id":69544002,"body_markdown":"``` \r\n   public static &lt;T&gt; T invokeMethod(String className, String methodName, String jsonParams) throws Exception {\r\n        Class&lt;?&gt; aClass = Class.forName(className);\r\n        Object newInstance = aClass.newInstance();\r\n        Method method = Arrays.stream(newInstance.getClass().getMethods())\r\n                .filter(m -&gt; m.getName().equals(methodName))\r\n                .findFirst().orElseThrow(() -&gt; new RuntimeException(\r\n                        String.format(&quot;can&#39;t find class: %s, method: %s &quot;, className, methodName)));\r\n        Type[] genericParameterTypes = method.getGenericParameterTypes();\r\n        Object result = null;\r\n        Type genericParameterType = genericParameterTypes[0];\r\n\r\n        // 1. work\r\n        Object input = new Gson().fromJson(jsonParams, genericParameterType);\r\n        result = method.invoke(newInstance, input);\r\n\r\n        // 2. work\r\n        result = method.invoke(newInstance, new Gson().fromJson(jsonParams, String.class));\r\n\r\n        // 3. don&#39;t work why ?\r\n        // java.lang.ClassCastException: java.lang.String cannot be cast to [Ljava.lang.Object;\r\n        method.invoke(newInstance, new Gson().fromJson(jsonParams, genericParameterType));\r\n\r\n        return (T) result;\r\n    }\r\n\r\n    public String getName(String name) {\r\n        return name;\r\n    }\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        String result = invokeMethod(&quot;cn.com.demo.Test&quot;, &quot;getName&quot;, &quot;name&quot;);\r\n        System.out.println(new Gson().toJson(result));\r\n    }\r\n```\r\n\r\nthree ways to reflect the method &quot;getName&quot;, \r\nbut the third way throws the exception:\r\njava.lang.ClassCastException: \r\n  java.lang.String cannot be cast to [Ljava.lang.Object;  \r\nwhy ?\r\n\r\n","title":"Java ClassCastException when reflecting method","body":"<pre><code>   public static &lt;T&gt; T invokeMethod(String className, String methodName, String jsonParams) throws Exception {\n        Class&lt;?&gt; aClass = Class.forName(className);\n        Object newInstance = aClass.newInstance();\n        Method method = Arrays.stream(newInstance.getClass().getMethods())\n                .filter(m -&gt; m.getName().equals(methodName))\n                .findFirst().orElseThrow(() -&gt; new RuntimeException(\n                        String.format(&quot;can't find class: %s, method: %s &quot;, className, methodName)));\n        Type[] genericParameterTypes = method.getGenericParameterTypes();\n        Object result = null;\n        Type genericParameterType = genericParameterTypes[0];\n\n        // 1. work\n        Object input = new Gson().fromJson(jsonParams, genericParameterType);\n        result = method.invoke(newInstance, input);\n\n        // 2. work\n        result = method.invoke(newInstance, new Gson().fromJson(jsonParams, String.class));\n\n        // 3. don't work why ?\n        // java.lang.ClassCastException: java.lang.String cannot be cast to [Ljava.lang.Object;\n        method.invoke(newInstance, new Gson().fromJson(jsonParams, genericParameterType));\n\n        return (T) result;\n    }\n\n    public String getName(String name) {\n        return name;\n    }\n\n    public static void main(String[] args) throws Exception {\n        String result = invokeMethod(&quot;cn.com.demo.Test&quot;, &quot;getName&quot;, &quot;name&quot;);\n        System.out.println(new Gson().toJson(result));\n    }\n</code></pre>\n<p>three ways to reflect the method &quot;getName&quot;,\nbut the third way throws the exception:\njava.lang.ClassCastException:\njava.lang.String cannot be cast to [Ljava.lang.Object;<br />\nwhy ?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8042,"page":1950,"page_size":100}
