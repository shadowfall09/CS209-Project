{"items":[{"tags":["java","pagination","paging"],"answers":[{"tags":[],"owner":{"account_id":22158564,"reputation":96,"user_id":16405920,"display_name":"syn"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677059746,"creation_date":1677058935,"answer_id":75530805,"question_id":75529776,"body_markdown":"Usually when using pagination you receive the parameters from the client (e.g. page size, pages to retrieve). Which means you would need to receive and handle those data via the controller. In order to get only the requested data you forward this data to the service layer that translates the data into appropriate queries for your database. So the answer would be you will need to have the information on both layers, but &quot;handle&quot; the data (e.g. if you need formation) in the controller.","title":"Responsibility for pagination, controller layer or service layer?","body":"<p>Usually when using pagination you receive the parameters from the client (e.g. page size, pages to retrieve). Which means you would need to receive and handle those data via the controller. In order to get only the requested data you forward this data to the service layer that translates the data into appropriate queries for your database. So the answer would be you will need to have the information on both layers, but &quot;handle&quot; the data (e.g. if you need formation) in the controller.</p>\n"},{"tags":[],"owner":{"account_id":1901420,"reputation":3763,"user_id":1717210,"display_name":"TacheDeChoco"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677064112,"creation_date":1677064112,"answer_id":75531881,"question_id":75529776,"body_markdown":"IMHO paging should be managed at the service level for the following reasons:\r\n\r\n1. A same data service could potentially be called by N different controllers:\r\nputting the paging logic on every controller would obviously lead to some code repetition (that you should avoid)\r\n\r\n2. There exist some other kinds of service clients than view/controllers:\r\nThink for instance about a background scheduled task needing to browse a potentially large quantity of records.\r\nIt would be very handy for this batch to get the paging info directly from the service layer.\r\n\r\n\r\nIn Spring Data, the data services (eg the &quot;repository&quot; layer) are returning **[page][1]** rather than **list**.\r\nAny client of these data services can so benefit from the meta-information with the paging info.\r\n\r\nNice simple example:\r\n\r\nhttps://mmarcosab.medium.com/a-simple-example-of-pagination-with-spring-data-jpa-605ed4c5b7f4\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/domain/Page.html","title":"Responsibility for pagination, controller layer or service layer?","body":"<p>IMHO paging should be managed at the service level for the following reasons:</p>\n<ol>\n<li><p>A same data service could potentially be called by N different controllers:\nputting the paging logic on every controller would obviously lead to some code repetition (that you should avoid)</p>\n</li>\n<li><p>There exist some other kinds of service clients than view/controllers:\nThink for instance about a background scheduled task needing to browse a potentially large quantity of records.\nIt would be very handy for this batch to get the paging info directly from the service layer.</p>\n</li>\n</ol>\n<p>In Spring Data, the data services (eg the &quot;repository&quot; layer) are returning <strong><a href=\"https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/domain/Page.html\" rel=\"nofollow noreferrer\">page</a></strong> rather than <strong>list</strong>.\nAny client of these data services can so benefit from the meta-information with the paging info.</p>\n<p>Nice simple example:</p>\n<p><a href=\"https://mmarcosab.medium.com/a-simple-example-of-pagination-with-spring-data-jpa-605ed4c5b7f4\" rel=\"nofollow noreferrer\">https://mmarcosab.medium.com/a-simple-example-of-pagination-with-spring-data-jpa-605ed4c5b7f4</a></p>\n"}],"owner":{"account_id":21169347,"reputation":171,"user_id":15566000,"display_name":"changuk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":448,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75530805,"answer_count":2,"score":0,"last_activity_date":1677064112,"creation_date":1677053228,"question_id":75529776,"body_markdown":"What I&#39;m curious about is whether the paging processing logic should be written in the service layer or the controller layer.\r\n\r\nHere, the paging process logic is the task of getting the totalCount from the database and getting the total number of pages through pageSize(offset).\r\n\r\nI think the paging process is related to the view, I thought it could be handled in the controller.","title":"Responsibility for pagination, controller layer or service layer?","body":"<p>What I'm curious about is whether the paging processing logic should be written in the service layer or the controller layer.</p>\n<p>Here, the paging process logic is the task of getting the totalCount from the database and getting the total number of pages through pageSize(offset).</p>\n<p>I think the paging process is related to the view, I thought it could be handled in the controller.</p>\n"},{"tags":["java","maven","jmeter"],"answers":[{"comments":[{"owner":{"account_id":27844008,"reputation":3,"user_id":21259893,"display_name":"user21259893"},"score":0,"creation_date":1677069050,"post_id":75531848,"comment_id":133263672,"body_markdown":"I have sslConnection attribute needed mention in DB URL in DB Connection Configuration in JMX file. Do I still need to change system.properties? If yes, please specify what all fields need to be changed. DB URL looks something like this-\njdbc:db2://xxx:potNumber/DBName:sslConnection=true;sslTrustStoreLocation=path\\\\to\\\\keystore\\\\filename.jks;sslTrustStorePassword=password;sslTrustStoreType=JKS;","body":"I have sslConnection attribute needed mention in DB URL in DB Connection Configuration in JMX file. Do I still need to change system.properties? If yes, please specify what all fields need to be changed. DB URL looks something like this- jdbc:db2://xxx:potNumber/DBName:sslConnection=true;sslTrustS&zwnj;&#8203;toreLocation=path\\\\t&zwnj;&#8203;o\\\\keystore\\\\filenam&zwnj;&#8203;e.jks;sslTrustStoreP&zwnj;&#8203;assword=password;ssl&zwnj;&#8203;TrustStoreType=JKS;"}],"tags":[],"owner":{"account_id":3460456,"reputation":162758,"user_id":2897748,"display_name":"Dmitri T"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677063937,"creation_date":1677063937,"answer_id":75531848,"question_id":75531575,"body_markdown":"It looks like your DB2 instance requires some form of client certificates so you need to create [keystore and truststore][1], put your client certificates there and configure JMeter to use these keystore and truststore via *system.properties* file (lives in &quot;bin&quot; folder of your JMeter installation)\r\n\r\n\r\nMore information:\r\n\r\n - [Java Secure Socket Extension (JSSE) Reference Guide][2] \r\n - [Setting up SSL enabled JCC driver connection from Data Studio to DB2 server][3]\r\n - [Apache JMeter Properties Customization Guide][4]\r\n\r\n\r\n  [1]: https://www.baeldung.com/java-keystore-truststore-difference\r\n  [2]: https://docs.oracle.com/javase/6/docs/technotes/guides/security/jsse/JSSERefGuide.html#Customization\r\n  [3]: https://www.ibm.com/support/pages/setting-ssl-enabled-jcc-driver-connection-data-studio-db2-server\r\n  [4]: https://www.blazemeter.com/blog/jmeter-properties-customization","title":"java.sql.SQLException: Cannot create PoolableConnectionFactory Exception com.ibm.db2.jcc.am.SqlException: Error opening socket to server","body":"<p>It looks like your DB2 instance requires some form of client certificates so you need to create <a href=\"https://www.baeldung.com/java-keystore-truststore-difference\" rel=\"nofollow noreferrer\">keystore and truststore</a>, put your client certificates there and configure JMeter to use these keystore and truststore via <em>system.properties</em> file (lives in &quot;bin&quot; folder of your JMeter installation)</p>\n<p>More information:</p>\n<ul>\n<li><a href=\"https://docs.oracle.com/javase/6/docs/technotes/guides/security/jsse/JSSERefGuide.html#Customization\" rel=\"nofollow noreferrer\">Java Secure Socket Extension (JSSE) Reference Guide</a></li>\n<li><a href=\"https://www.ibm.com/support/pages/setting-ssl-enabled-jcc-driver-connection-data-studio-db2-server\" rel=\"nofollow noreferrer\">Setting up SSL enabled JCC driver connection from Data Studio to DB2 server</a></li>\n<li><a href=\"https://www.blazemeter.com/blog/jmeter-properties-customization\" rel=\"nofollow noreferrer\">Apache JMeter Properties Customization Guide</a></li>\n</ul>\n"}],"owner":{"account_id":27844008,"reputation":3,"user_id":21259893,"display_name":"user21259893"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":200,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677063937,"creation_date":1677062613,"question_id":75531575,"body_markdown":"I am trying to execute JMeter test scripts in JMX file using Java code, I am getting below exception in result file after execution. My JMX file contains some JDC requests and JDBC connection configuration\r\n\r\njava.sql.SQLException: Cannot create PoolableConnectionFactory ([jcc][t4][2043][11550][3.68.61] Exception com.ibm.db2.jcc.am.SqlException: Error opening socket to server xxxxxx/xxxxx on port 50,005 with message: [jcc][t4][20133][12451][3.68.61] Caught NoSuchAlgorithmException while doing SSL Connection.  See attached Throwable for details. ERRORCODE=-4499, SQLSTATE=null. ERRORCODE=-4499, SQLSTATE=08001\r\n\r\nJDBC Connections is SSL based in configuration in JMX. I am just rying to executed it from Java code in Non-GUI mode.\r\n\r\nI checked JDK version everywhere, we are using eclipse so made changes in there too. Its integrated with maven project. I am expecting it to run in non-GUI mode and give results in XML\r\n\r\nJDK version -1.8.0_261\r\nMaven version - 3.6.2\r\nJmeter version - 5.1\t","title":"java.sql.SQLException: Cannot create PoolableConnectionFactory Exception com.ibm.db2.jcc.am.SqlException: Error opening socket to server","body":"<p>I am trying to execute JMeter test scripts in JMX file using Java code, I am getting below exception in result file after execution. My JMX file contains some JDC requests and JDBC connection configuration</p>\n<p>java.sql.SQLException: Cannot create PoolableConnectionFactory ([jcc][t4][2043][11550][3.68.61] Exception com.ibm.db2.jcc.am.SqlException: Error opening socket to server xxxxxx/xxxxx on port 50,005 with message: [jcc][t4][20133][12451][3.68.61] Caught NoSuchAlgorithmException while doing SSL Connection.  See attached Throwable for details. ERRORCODE=-4499, SQLSTATE=null. ERRORCODE=-4499, SQLSTATE=08001</p>\n<p>JDBC Connections is SSL based in configuration in JMX. I am just rying to executed it from Java code in Non-GUI mode.</p>\n<p>I checked JDK version everywhere, we are using eclipse so made changes in there too. Its integrated with maven project. I am expecting it to run in non-GUI mode and give results in XML</p>\n<p>JDK version -1.8.0_261\nMaven version - 3.6.2\nJmeter version - 5.1</p>\n"},{"tags":["java","gradle","grpc","grpc-java"],"comments":[{"owner":{"account_id":17835,"reputation":303915,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1677064037,"post_id":75528279,"comment_id":133262235,"body_markdown":"[Please do not upload images of code/data/errors.](//meta.stackoverflow.com/q/285551)","body":"<a href=\"//meta.stackoverflow.com/q/285551\">Please do not upload images of code/data/errors.</a>"},{"owner":{"account_id":4809151,"reputation":557,"user_id":3883118,"display_name":"Ashutosh Shukla"},"score":0,"creation_date":1685108853,"post_id":75528279,"comment_id":134619691,"body_markdown":"Any answer to this issue is highly appreciated.","body":"Any answer to this issue is highly appreciated."}],"owner":{"account_id":4597208,"reputation":48209,"user_id":3728901,"accept_rate":58,"display_name":"Vy Do"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":265,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1677063890,"creation_date":1677040126,"question_id":75528279,"body_markdown":"\r\n[![enter image description here][1]][1]\r\nLog\r\n\r\n```java\r\nMicrosoft Windows [Version 10.0.19045.2604]\r\n(c) Microsoft Corporation. All rights reserved.\r\n\r\nC:\\Users\\admin\\Downloads\\grpc-java-1.53.0\\examples&gt;gradle installDist\r\n\r\nBUILD SUCCESSFUL in 25s\r\n22 actionable tasks: 22 executed\r\nC:\\Users\\admin\\Downloads\\grpc-java-1.53.0\\examples&gt;dir\r\n Volume in drive C is OS\r\n Volume Serial Number is E2F9-6397\r\n\r\n Directory of C:\\Users\\admin\\Downloads\\grpc-java-1.53.0\\examples\r\n\r\n22/02/2023  11:18 SA    &lt;DIR&gt;          .\r\n22/02/2023  11:18 SA    &lt;DIR&gt;          ..\r\n22/02/2023  11:18 SA    &lt;DIR&gt;          .gradle\r\n09/02/2023  05:49 SA    &lt;DIR&gt;          android\r\n22/02/2023  11:18 SA    &lt;DIR&gt;          build\r\n09/02/2023  05:49 SA             3.911 BUILD.bazel\r\n09/02/2023  05:49 SA             6.619 build.gradle\r\n09/02/2023  05:49 SA    &lt;DIR&gt;          example-alts\r\n09/02/2023  05:49 SA    &lt;DIR&gt;          example-gauth\r\n09/02/2023  05:49 SA    &lt;DIR&gt;          example-hostname\r\n09/02/2023  05:49 SA    &lt;DIR&gt;          example-jwt-auth\r\n09/02/2023  05:49 SA    &lt;DIR&gt;          example-orca\r\n09/02/2023  05:49 SA    &lt;DIR&gt;          example-servlet\r\n09/02/2023  05:49 SA    &lt;DIR&gt;          example-tls\r\n09/02/2023  05:49 SA    &lt;DIR&gt;          example-xds\r\n09/02/2023  05:49 SA    &lt;DIR&gt;          gradle\r\n09/02/2023  05:49 SA             8.070 gradlew\r\n09/02/2023  05:49 SA             2.763 gradlew.bat\r\n09/02/2023  05:49 SA             4.254 pom.xml\r\n09/02/2023  05:49 SA             9.175 README.md\r\n09/02/2023  05:49 SA               267 settings.gradle\r\n09/02/2023  05:49 SA    &lt;DIR&gt;          src\r\n09/02/2023  05:49 SA             1.686 WORKSPACE\r\n               8 File(s)         36.745 bytes\r\n              15 Dir(s)  91.353.567.232 bytes free\r\n\r\nC:\\Users\\admin\\Downloads\\grpc-java-1.53.0\\examples&gt;build\\install\\examples\\bin\\hello-world-client\r\nthg 2 22, 2023 11:24:41 SA io.grpc.examples.helloworld.HelloWorldClient greet\r\nINFO: Will try to greet world ...\r\nthg 2 22, 2023 11:24:41 SA io.grpc.examples.helloworld.HelloWorldClient greet\r\nWARNING: RPC failed: Status{code=UNAVAILABLE, description=io exception, cause=io.grpc.netty.shaded.io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: no further information: localhost/[0:0:0:0:0:0:0:1]:50051\r\nCaused by: java.net.ConnectException: Connection refused: no further information\r\n        at java.base/sun.nio.ch.Net.pollConnect(Native Method)\r\n        at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)\r\n        at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:973)\r\n        at io.grpc.netty.shaded.io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337)\r\n        at io.grpc.netty.shaded.io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:334)\r\n        at io.grpc.netty.shaded.io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:710)\r\n        at io.grpc.netty.shaded.io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:658)\r\n        at io.grpc.netty.shaded.io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:584)\r\n        at io.grpc.netty.shaded.io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:496)\r\n        at io.grpc.netty.shaded.io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n        at io.grpc.netty.shaded.io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n        at io.grpc.netty.shaded.io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n        at java.base/java.lang.Thread.run(Thread.java:1589)\r\n}\r\nC:\\Users\\admin\\Downloads\\grpc-java-1.53.0\\examples&gt;java -version\r\njava version &quot;19.0.2&quot; 2023-01-17\r\nJava(TM) SE Runtime Environment (build 19.0.2+7-44)\r\nJava HotSpot(TM) 64-Bit Server VM (build 19.0.2+7-44, mixed mode, sharing)\r\n\r\nC:\\Users\\admin\\Downloads\\grpc-java-1.53.0\\examples&gt;javac -version\r\njavac 19.0.2\r\n\r\nC:\\Users\\admin\\Downloads\\grpc-java-1.53.0\\examples&gt;gradle -version\r\n\r\n------------------------------------------------------------\r\nGradle 8.0.1\r\n------------------------------------------------------------\r\n\r\nBuild time:   2023-02-17 20:09:48 UTC\r\nRevision:     68959bf76cef4d28c678f2e2085ee84e8647b77a\r\n\r\nKotlin:       1.8.10\r\nGroovy:       3.0.13\r\nAnt:          Apache Ant(TM) version 1.10.11 compiled on July 10 2021\r\nJVM:          19.0.2 (Oracle Corporation 19.0.2+7-44)\r\nOS:           Windows 10 10.0 amd64\r\n\r\nC:\\Users\\admin\\Downloads\\grpc-java-1.53.0\\examples&gt;date\r\nThe current date is: 22/02/2023\r\nEnter the new date: (dd-mm-yy)\r\n\r\nC:\\Users\\admin\\Downloads\\grpc-java-1.53.0\\examples&gt;\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/d4Nrt.png","title":"Run grpc Java example: Connection refused: no further information: localhost/[0:0:0:0:0:0:0:1]:50051","body":"<p><a href=\"https://i.stack.imgur.com/d4Nrt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/d4Nrt.png\" alt=\"enter image description here\" /></a>\nLog</p>\n<pre class=\"lang-java prettyprint-override\"><code>Microsoft Windows [Version 10.0.19045.2604]\n(c) Microsoft Corporation. All rights reserved.\n\nC:\\Users\\admin\\Downloads\\grpc-java-1.53.0\\examples&gt;gradle installDist\n\nBUILD SUCCESSFUL in 25s\n22 actionable tasks: 22 executed\nC:\\Users\\admin\\Downloads\\grpc-java-1.53.0\\examples&gt;dir\n Volume in drive C is OS\n Volume Serial Number is E2F9-6397\n\n Directory of C:\\Users\\admin\\Downloads\\grpc-java-1.53.0\\examples\n\n22/02/2023  11:18 SA    &lt;DIR&gt;          .\n22/02/2023  11:18 SA    &lt;DIR&gt;          ..\n22/02/2023  11:18 SA    &lt;DIR&gt;          .gradle\n09/02/2023  05:49 SA    &lt;DIR&gt;          android\n22/02/2023  11:18 SA    &lt;DIR&gt;          build\n09/02/2023  05:49 SA             3.911 BUILD.bazel\n09/02/2023  05:49 SA             6.619 build.gradle\n09/02/2023  05:49 SA    &lt;DIR&gt;          example-alts\n09/02/2023  05:49 SA    &lt;DIR&gt;          example-gauth\n09/02/2023  05:49 SA    &lt;DIR&gt;          example-hostname\n09/02/2023  05:49 SA    &lt;DIR&gt;          example-jwt-auth\n09/02/2023  05:49 SA    &lt;DIR&gt;          example-orca\n09/02/2023  05:49 SA    &lt;DIR&gt;          example-servlet\n09/02/2023  05:49 SA    &lt;DIR&gt;          example-tls\n09/02/2023  05:49 SA    &lt;DIR&gt;          example-xds\n09/02/2023  05:49 SA    &lt;DIR&gt;          gradle\n09/02/2023  05:49 SA             8.070 gradlew\n09/02/2023  05:49 SA             2.763 gradlew.bat\n09/02/2023  05:49 SA             4.254 pom.xml\n09/02/2023  05:49 SA             9.175 README.md\n09/02/2023  05:49 SA               267 settings.gradle\n09/02/2023  05:49 SA    &lt;DIR&gt;          src\n09/02/2023  05:49 SA             1.686 WORKSPACE\n               8 File(s)         36.745 bytes\n              15 Dir(s)  91.353.567.232 bytes free\n\nC:\\Users\\admin\\Downloads\\grpc-java-1.53.0\\examples&gt;build\\install\\examples\\bin\\hello-world-client\nthg 2 22, 2023 11:24:41 SA io.grpc.examples.helloworld.HelloWorldClient greet\nINFO: Will try to greet world ...\nthg 2 22, 2023 11:24:41 SA io.grpc.examples.helloworld.HelloWorldClient greet\nWARNING: RPC failed: Status{code=UNAVAILABLE, description=io exception, cause=io.grpc.netty.shaded.io.netty.channel.AbstractChannel$AnnotatedConnectException: Connection refused: no further information: localhost/[0:0:0:0:0:0:0:1]:50051\nCaused by: java.net.ConnectException: Connection refused: no further information\n        at java.base/sun.nio.ch.Net.pollConnect(Native Method)\n        at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672)\n        at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:973)\n        at io.grpc.netty.shaded.io.netty.channel.socket.nio.NioSocketChannel.doFinishConnect(NioSocketChannel.java:337)\n        at io.grpc.netty.shaded.io.netty.channel.nio.AbstractNioChannel$AbstractNioUnsafe.finishConnect(AbstractNioChannel.java:334)\n        at io.grpc.netty.shaded.io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:710)\n        at io.grpc.netty.shaded.io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:658)\n        at io.grpc.netty.shaded.io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:584)\n        at io.grpc.netty.shaded.io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:496)\n        at io.grpc.netty.shaded.io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\n        at io.grpc.netty.shaded.io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\n        at io.grpc.netty.shaded.io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\n        at java.base/java.lang.Thread.run(Thread.java:1589)\n}\nC:\\Users\\admin\\Downloads\\grpc-java-1.53.0\\examples&gt;java -version\njava version &quot;19.0.2&quot; 2023-01-17\nJava(TM) SE Runtime Environment (build 19.0.2+7-44)\nJava HotSpot(TM) 64-Bit Server VM (build 19.0.2+7-44, mixed mode, sharing)\n\nC:\\Users\\admin\\Downloads\\grpc-java-1.53.0\\examples&gt;javac -version\njavac 19.0.2\n\nC:\\Users\\admin\\Downloads\\grpc-java-1.53.0\\examples&gt;gradle -version\n\n------------------------------------------------------------\nGradle 8.0.1\n------------------------------------------------------------\n\nBuild time:   2023-02-17 20:09:48 UTC\nRevision:     68959bf76cef4d28c678f2e2085ee84e8647b77a\n\nKotlin:       1.8.10\nGroovy:       3.0.13\nAnt:          Apache Ant(TM) version 1.10.11 compiled on July 10 2021\nJVM:          19.0.2 (Oracle Corporation 19.0.2+7-44)\nOS:           Windows 10 10.0 amd64\n\nC:\\Users\\admin\\Downloads\\grpc-java-1.53.0\\examples&gt;date\nThe current date is: 22/02/2023\nEnter the new date: (dd-mm-yy)\n\nC:\\Users\\admin\\Downloads\\grpc-java-1.53.0\\examples&gt;\n</code></pre>\n"},{"tags":["java","gradle","groovy","jar","gradle-plugin"],"owner":{"account_id":20224439,"reputation":5,"user_id":14832809,"display_name":"NoelUzunbeycan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677063889,"creation_date":1677063889,"question_id":75531840,"body_markdown":"I want to outsource my creation of the Jar into a convention plugin, as I have to do this in a large amount of Projects and I do not want to have this much redundant code.My &quot;old&quot; way of doing it inside of the build.gradle file was like that:\r\n\r\n```\r\n.\r\n.\r\n.\r\njar {\r\n\tString classPath = createCP()\r\n\tmanifest {\r\n\t\tattributes (\r\n\t\t\t&quot;Main-Class&quot;: &quot;${mainClass}&quot;,\r\n\t\t\t&quot;Specification-Title&quot; : &quot;${specTitle}&quot;,\r\n\t\t\t&quot;Specification-Vendor&quot; : &quot;${specVendor}&quot;,\r\n\t\t\t&quot;Specification-Version&quot; : &quot;${specVersion}&quot;,\r\n\t\t\t&quot;Implementation-Title&quot; : &quot;${implTitle}&quot;,\r\n\t\t\t&quot;Implementation-Version&quot; : &quot;${implVersion}&quot;,\r\n\t\t\t&quot;Implementation-Vendor&quot; : &quot;${implVendor}&quot;,\r\n\t\t\t&quot;Implementation-Vendor-Id&quot; : &quot;${implVendorId}&quot;,\r\n\t\t\t&quot;Implementation-Url&quot; : &quot;${implUrl}&quot;,\r\n\t\t\t&quot;Build-By&quot; : &quot;${buildEnvironment}&quot;,\r\n\t\t\t&#39;Class-Path&#39;: classPath\r\n\t\t)\r\n\t}\r\n}\r\n\r\n\r\nString getJarName () {\r\n\t// create the JarName out of a couple given params\r\n}\r\n\r\nString createCP() {\r\n\t//creation of the classPath for the Manifest\r\n}\r\n\r\n.\r\n.\r\n.\r\n```\r\n\r\nWhat I want to achieve is a plugin that exposes tasks, which take input (variable values for the manifest attributes and jar naming). As of now I developed a Plugin, that contains multiple tasks, for this question the only interesting tasks are:\r\n\r\n- CPTask\r\n\r\n- JarNameTask\r\n\r\n- JarCreationTask\r\n\r\nThe CPTask produces a String containing the classpath, the JarNameTask produces the Jar&#39;s Name and the JarCreationTask creates the jar, using the classpath and the jarName, thus depending on the other two tasks.  \r\nPrinting the values the tasks producing the Strings work perfectly fine, but when creating the jar, I still end up with an empty Jar, that is named wrong.\r\n\r\nThis is the implementation of the CreationTask:\r\n\r\n```\r\n@TaskAction\r\nvoid createJar() {\r\n\r\n    CPTask createCPTask = project.tasks.create(&quot;createCP&quot;, CPTask)\r\n    JarNameTask getJarNameTask = project.tasks.create(&quot;getJarName&quot;, JarNameTask)\r\n    \r\n    classPath = project.ext.classPathVar\r\n    jarName = project.ext.jarNameVar\r\n    println &quot;jarName in createJar: ${jarName}&quot;\r\n    println &quot;classPath in createJar: ${classPath}&quot;\r\n    \r\n    println &quot;creating Jar..... ${artifactId}&quot;\r\n\r\n    Jar jar = project.tasks.create(&quot;myJar&quot;, Jar)\r\n\r\n    jar.dependsOn(project.tasks.getByName(&quot;compileJava&quot;))\r\n    jar.from(project.sourceSets.main.output)\r\n    jar.archiveFileName.set(jarName)\r\n\r\n    println &quot;jarName in createJar: ${jarName}&quot;\r\n    println &quot;classPath in createJar: ${classPath}&quot;\r\n\r\n    jar.manifest.attributes (\r\n            &quot;Main-Class&quot;: &quot;${mainClass}&quot;,\r\n            &quot;Specification-Title&quot; : &quot;${specTitle}&quot;,\r\n            &quot;Specification-Vendor&quot; : &quot;${specVendor}&quot;,\r\n            &quot;Specification-Version&quot; : &quot;${specVersion}&quot;,\r\n            &quot;Implementation-Title&quot; : &quot;${implTitle}&quot;,\r\n            &quot;Implementation-Version&quot; : &quot;${implVersion}&quot;,\r\n            &quot;Implementation-Vendor&quot; : &quot;${implVendor}&quot;,\r\n            &quot;Implementation-Vendor-Id&quot; : &quot;${implVendorId}&quot;,\r\n            &quot;Implementation-Url&quot; : &quot;${implUrl}&quot;,\r\n            &quot;Build-By&quot; : &quot;${buildEnvironment}&quot;,\r\n            &#39;Class-Path&#39;: classPath\r\n    )\r\n    println jar.archiveFile.get().asFile.getAbsolutePath() \r\n}\r\n```\r\n\r\nEven though the last println yields the correctly named Jars Path. When I go to that path, the Jar has no &quot;jarName&quot;.jar as its name but &quot;baseName&quot;-&quot;version&quot;.jar. Also it only contains an Manifest, that itself only contains Manifest-Version = 1.0 instead of my customized Manifest.","title":"Create Jar via custom Gradle Task in convention Plugin","body":"<p>I want to outsource my creation of the Jar into a convention plugin, as I have to do this in a large amount of Projects and I do not want to have this much redundant code.My &quot;old&quot; way of doing it inside of the build.gradle file was like that:</p>\n<pre><code>.\n.\n.\njar {\n    String classPath = createCP()\n    manifest {\n        attributes (\n            &quot;Main-Class&quot;: &quot;${mainClass}&quot;,\n            &quot;Specification-Title&quot; : &quot;${specTitle}&quot;,\n            &quot;Specification-Vendor&quot; : &quot;${specVendor}&quot;,\n            &quot;Specification-Version&quot; : &quot;${specVersion}&quot;,\n            &quot;Implementation-Title&quot; : &quot;${implTitle}&quot;,\n            &quot;Implementation-Version&quot; : &quot;${implVersion}&quot;,\n            &quot;Implementation-Vendor&quot; : &quot;${implVendor}&quot;,\n            &quot;Implementation-Vendor-Id&quot; : &quot;${implVendorId}&quot;,\n            &quot;Implementation-Url&quot; : &quot;${implUrl}&quot;,\n            &quot;Build-By&quot; : &quot;${buildEnvironment}&quot;,\n            'Class-Path': classPath\n        )\n    }\n}\n\n\nString getJarName () {\n    // create the JarName out of a couple given params\n}\n\nString createCP() {\n    //creation of the classPath for the Manifest\n}\n\n.\n.\n.\n</code></pre>\n<p>What I want to achieve is a plugin that exposes tasks, which take input (variable values for the manifest attributes and jar naming). As of now I developed a Plugin, that contains multiple tasks, for this question the only interesting tasks are:</p>\n<ul>\n<li><p>CPTask</p>\n</li>\n<li><p>JarNameTask</p>\n</li>\n<li><p>JarCreationTask</p>\n</li>\n</ul>\n<p>The CPTask produces a String containing the classpath, the JarNameTask produces the Jar's Name and the JarCreationTask creates the jar, using the classpath and the jarName, thus depending on the other two tasks.<br />\nPrinting the values the tasks producing the Strings work perfectly fine, but when creating the jar, I still end up with an empty Jar, that is named wrong.</p>\n<p>This is the implementation of the CreationTask:</p>\n<pre><code>@TaskAction\nvoid createJar() {\n\n    CPTask createCPTask = project.tasks.create(&quot;createCP&quot;, CPTask)\n    JarNameTask getJarNameTask = project.tasks.create(&quot;getJarName&quot;, JarNameTask)\n    \n    classPath = project.ext.classPathVar\n    jarName = project.ext.jarNameVar\n    println &quot;jarName in createJar: ${jarName}&quot;\n    println &quot;classPath in createJar: ${classPath}&quot;\n    \n    println &quot;creating Jar..... ${artifactId}&quot;\n\n    Jar jar = project.tasks.create(&quot;myJar&quot;, Jar)\n\n    jar.dependsOn(project.tasks.getByName(&quot;compileJava&quot;))\n    jar.from(project.sourceSets.main.output)\n    jar.archiveFileName.set(jarName)\n\n    println &quot;jarName in createJar: ${jarName}&quot;\n    println &quot;classPath in createJar: ${classPath}&quot;\n\n    jar.manifest.attributes (\n            &quot;Main-Class&quot;: &quot;${mainClass}&quot;,\n            &quot;Specification-Title&quot; : &quot;${specTitle}&quot;,\n            &quot;Specification-Vendor&quot; : &quot;${specVendor}&quot;,\n            &quot;Specification-Version&quot; : &quot;${specVersion}&quot;,\n            &quot;Implementation-Title&quot; : &quot;${implTitle}&quot;,\n            &quot;Implementation-Version&quot; : &quot;${implVersion}&quot;,\n            &quot;Implementation-Vendor&quot; : &quot;${implVendor}&quot;,\n            &quot;Implementation-Vendor-Id&quot; : &quot;${implVendorId}&quot;,\n            &quot;Implementation-Url&quot; : &quot;${implUrl}&quot;,\n            &quot;Build-By&quot; : &quot;${buildEnvironment}&quot;,\n            'Class-Path': classPath\n    )\n    println jar.archiveFile.get().asFile.getAbsolutePath() \n}\n</code></pre>\n<p>Even though the last println yields the correctly named Jars Path. When I go to that path, the Jar has no &quot;jarName&quot;.jar as its name but &quot;baseName&quot;-&quot;version&quot;.jar. Also it only contains an Manifest, that itself only contains Manifest-Version = 1.0 instead of my customized Manifest.</p>\n"},{"tags":["java","spring","spring-boot","rest","jpa"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1677064607,"post_id":75531838,"comment_id":133262410,"body_markdown":"Please don&#39;t ask [the same question](https://stackoverflow.com/questions/75518100/injection-in-custom-validator-return-null) again. Instead modify your original question if you have additional information.","body":"Please don&#39;t ask <a href=\"https://stackoverflow.com/questions/75518100/injection-in-custom-validator-return-null\">the same question</a> again. Instead modify your original question if you have additional information."},{"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"score":0,"creation_date":1677065201,"post_id":75531838,"comment_id":133262551,"body_markdown":"It&#39;s not the final solution but can give some tips... what happens if you add @Primary on top of the bean &quot;LocalValidatorFactoryBean validator()&quot;?","body":"It&#39;s not the final solution but can give some tips... what happens if you add @Primary on top of the bean &quot;LocalValidatorFactoryBean validator()&quot;?"},{"owner":{"account_id":25261654,"reputation":21,"user_id":19092469,"display_name":"R Am"},"score":0,"creation_date":1677066952,"post_id":75531838,"comment_id":133263030,"body_markdown":"If various beans are created, the bean which will &quot;win&quot; and give his value is bean which is annotated &quot;@Primary&quot;. Is it?\n\nThanks to your help, now I think I have to mark &quot;@Primary&quot; some bean but I don&#39;t know which. I tried with LocalValidatorFactoryBean (but nothing), I also tried to put my repository as a parameter in this bean as I saw in internet but nothing.\nAm I in a good way? I like tips, if you want to give me more..\nThank you Matteo","body":"If various beans are created, the bean which will &quot;win&quot; and give his value is bean which is annotated &quot;@Primary&quot;. Is it?  Thanks to your help, now I think I have to mark &quot;@Primary&quot; some bean but I don&#39;t know which. I tried with LocalValidatorFactoryBean (but nothing), I also tried to put my repository as a parameter in this bean as I saw in internet but nothing. Am I in a good way? I like tips, if you want to give me more.. Thank you Matteo"},{"owner":{"account_id":25261654,"reputation":21,"user_id":19092469,"display_name":"R Am"},"score":0,"creation_date":1677068001,"post_id":75531838,"comment_id":133263370,"body_markdown":"following Spring doc, I added in my config\n\n`@Bean\n    public MethodValidationPostProcessor validationPostProcessor() {\n        return new MethodValidationPostProcessor();\n    }`\n\nunfortunately still nothing","body":"following Spring doc, I added in my config  <code>@Bean     public MethodValidationPostProcessor validationPostProcessor() {         return new MethodValidationPostProcessor();     }</code>  unfortunately still nothing"}],"owner":{"account_id":25261654,"reputation":21,"user_id":19092469,"display_name":"R Am"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":325,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1677063877,"creation_date":1677063877,"question_id":75531838,"body_markdown":"I&#39;m using Spring Data Rest dependency which makes endpoints for me, I think something is wrong from there but cannot know how to manage this.\r\n\r\n**ProgrammeNomUnique:**\r\n\r\n```\r\n@Constraint(validatedBy = NomUniqueValidator.class)\r\n@Target({ElementType.METHOD, ElementType.FIELD})\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Component\r\npublic @interface ProgrammeNomUnique {\r\n\r\n        // define default error message\r\n        String message() default &quot;Un programme porte d&#233;j&#224; le m&#234;me nom&quot;;\r\n\r\n        // define default groups\r\n        public Class&lt;?&gt;[] groups() default {};\r\n\r\n        // define default payloads\r\n        public Class&lt;? extends Payload&gt;[] payload() default {};\r\n\r\n}\r\n```\r\n\r\n**NomUniqueValidator:**\r\n\r\n```\r\n@Component\r\n@RequiredArgsConstructor\r\npublic class NomUniqueValidator implements ConstraintValidator&lt;ProgrammeNomUnique, String&gt; {\r\n\r\n\r\n        @Autowired\r\n        private  ProgrammeRepository programmeRepository;\r\n\r\n    @Override\r\n    public void initialize(ProgrammeNomUnique constraintAnnotation) {\r\n    }\r\n\r\n    @Override\r\n    public boolean isValid(String nouveauNom, ConstraintValidatorContext constraintValidatorContext) {\r\n        return !programmeRepository.existsByNom(nouveauNom);\r\n\r\n\r\n    }\r\n}\r\n```\r\n\r\n**ProgrammeRepository**\r\n\r\n```\r\n@CrossOrigin(origins = &quot;http://localhost:4200&quot;)\r\n@RepositoryRestResource(path = &quot;programmes&quot;)\r\npublic interface ProgrammeRepository extends JpaRepository&lt;Programme, Integer&gt; {\r\n\r\n    boolean existsByNom(String nom);\r\n}\r\n```\r\n\r\n**Programme**\r\n\r\n```\r\n@Getter\r\n@Setter\r\n@RequiredArgsConstructor\r\n@Entity\r\n@Table(name = &quot;programme&quot;)\r\npublic class Programme {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;id_programme&quot;)\r\n    private int id;\r\n\r\n    @NotEmpty(message = &quot;Le programme doit avoir un nom&quot;)\r\n    @Column\r\n    @ProgrammeNomUnique //&lt;--- HERE\r\n    private String nom;\r\n\r\n    @NotNull(message = &quot;Le programme doit avoir un prix&quot;)\r\n    @Column\r\n    private double prix;\r\n\r\n    @NotNull(message = &quot;Le programme doit avoir une dur&#233;e&quot;)\r\n    @Column(name = &quot;duree_semaine&quot;)\r\n    private String dureeSemaine;\r\n\r\n    @NotEmpty(message = &quot;Le programme doit avoir une description&quot;)\r\n    @Column\r\n    private String description;\r\n\r\n    @Column(name = &quot;is_a_la_une&quot;)\r\n    private int isALaUne;\r\n\r\n    @Column(name = &quot;services_associes&quot;)\r\n    private String servicesAssocies;\r\n\r\n    @Column(name = &quot;id_image&quot;)\r\n    private int idImage;\r\n\r\n    @OneToMany(cascade = {CascadeType.DETACH, CascadeType.MERGE,\r\n            CascadeType.REFRESH, CascadeType.PERSIST}, fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;id_programme&quot;)\r\n    private List&lt;Section&gt; sections;\r\n\r\n    //////\r\n\r\n}\r\n```\r\n\r\nI tried this but seems to be useless\r\n\r\n```\r\n@Configuration\r\npublic class ValidatorConfig {\r\n\r\n    @Bean\r\n    public LocalValidatorFactoryBean validator() {\r\n        return new LocalValidatorFactoryBean();\r\n    }\r\n}\r\n```\r\n\r\n**pom.xml**\r\n\r\n```\r\n&lt;dependencies&gt;\r\n   &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n   &lt;/dependency&gt;\r\n   &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-data-rest&lt;/artifactId&gt;\r\n   &lt;/dependency&gt;\r\n\r\n   &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n   &lt;/dependency&gt;\r\n\r\n   &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n   &lt;/dependency&gt;\r\n\r\n   &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n      &lt;scope&gt;runtime&lt;/scope&gt;\r\n      &lt;optional&gt;true&lt;/optional&gt;\r\n   &lt;/dependency&gt;\r\n\r\n   &lt;!-- https://stackoverflow.com/a/71416675/19092469 --&gt;\r\n   &lt;dependency&gt;\r\n      &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\r\n      &lt;artifactId&gt;jackson-datatype-hibernate5&lt;/artifactId&gt;\r\n   &lt;/dependency&gt;\r\n\r\n   &lt;!-- R&#233;duire code r&#233;p&#233;titif et source d&#39;erreur (reduce boilerplate) --&gt;\r\n   &lt;dependency&gt;\r\n      &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n      &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n      &lt;optional&gt;true&lt;/optional&gt;\r\n   &lt;/dependency&gt;\r\n   &lt;!-- R&#233;duire code r&#233;p&#233;titif et source d&#39;erreur (reduce boilerplate) --&gt;\r\n\r\n   &lt;dependency&gt;\r\n      &lt;groupId&gt;com.mysql&lt;/groupId&gt;\r\n      &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\r\n      &lt;scope&gt;runtime&lt;/scope&gt;\r\n   &lt;/dependency&gt;\r\n   &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n   &lt;/dependency&gt;\r\n\r\n&lt;/dependencies&gt;\r\n```\r\n\r\nhow to resolve it ?\r\n\r\nUsing Spring boot 3, nothing special in properties.\r\n\r\nThanks","title":"Injection from validator is null with message &quot;Cannot invoke because is null&quot;","body":"<p>I'm using Spring Data Rest dependency which makes endpoints for me, I think something is wrong from there but cannot know how to manage this.</p>\n<p><strong>ProgrammeNomUnique:</strong></p>\n<pre><code>@Constraint(validatedBy = NomUniqueValidator.class)\n@Target({ElementType.METHOD, ElementType.FIELD})\n@Retention(RetentionPolicy.RUNTIME)\n@Component\npublic @interface ProgrammeNomUnique {\n\n        // define default error message\n        String message() default &quot;Un programme porte déjà le même nom&quot;;\n\n        // define default groups\n        public Class&lt;?&gt;[] groups() default {};\n\n        // define default payloads\n        public Class&lt;? extends Payload&gt;[] payload() default {};\n\n}\n</code></pre>\n<p><strong>NomUniqueValidator:</strong></p>\n<pre><code>@Component\n@RequiredArgsConstructor\npublic class NomUniqueValidator implements ConstraintValidator&lt;ProgrammeNomUnique, String&gt; {\n\n\n        @Autowired\n        private  ProgrammeRepository programmeRepository;\n\n    @Override\n    public void initialize(ProgrammeNomUnique constraintAnnotation) {\n    }\n\n    @Override\n    public boolean isValid(String nouveauNom, ConstraintValidatorContext constraintValidatorContext) {\n        return !programmeRepository.existsByNom(nouveauNom);\n\n\n    }\n}\n</code></pre>\n<p><strong>ProgrammeRepository</strong></p>\n<pre><code>@CrossOrigin(origins = &quot;http://localhost:4200&quot;)\n@RepositoryRestResource(path = &quot;programmes&quot;)\npublic interface ProgrammeRepository extends JpaRepository&lt;Programme, Integer&gt; {\n\n    boolean existsByNom(String nom);\n}\n</code></pre>\n<p><strong>Programme</strong></p>\n<pre><code>@Getter\n@Setter\n@RequiredArgsConstructor\n@Entity\n@Table(name = &quot;programme&quot;)\npublic class Programme {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;id_programme&quot;)\n    private int id;\n\n    @NotEmpty(message = &quot;Le programme doit avoir un nom&quot;)\n    @Column\n    @ProgrammeNomUnique //&lt;--- HERE\n    private String nom;\n\n    @NotNull(message = &quot;Le programme doit avoir un prix&quot;)\n    @Column\n    private double prix;\n\n    @NotNull(message = &quot;Le programme doit avoir une durée&quot;)\n    @Column(name = &quot;duree_semaine&quot;)\n    private String dureeSemaine;\n\n    @NotEmpty(message = &quot;Le programme doit avoir une description&quot;)\n    @Column\n    private String description;\n\n    @Column(name = &quot;is_a_la_une&quot;)\n    private int isALaUne;\n\n    @Column(name = &quot;services_associes&quot;)\n    private String servicesAssocies;\n\n    @Column(name = &quot;id_image&quot;)\n    private int idImage;\n\n    @OneToMany(cascade = {CascadeType.DETACH, CascadeType.MERGE,\n            CascadeType.REFRESH, CascadeType.PERSIST}, fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;id_programme&quot;)\n    private List&lt;Section&gt; sections;\n\n    //////\n\n}\n</code></pre>\n<p>I tried this but seems to be useless</p>\n<pre><code>@Configuration\npublic class ValidatorConfig {\n\n    @Bean\n    public LocalValidatorFactoryBean validator() {\n        return new LocalValidatorFactoryBean();\n    }\n}\n</code></pre>\n<p><strong>pom.xml</strong></p>\n<pre><code>&lt;dependencies&gt;\n   &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n   &lt;/dependency&gt;\n   &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-data-rest&lt;/artifactId&gt;\n   &lt;/dependency&gt;\n\n   &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n   &lt;/dependency&gt;\n\n   &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n   &lt;/dependency&gt;\n\n   &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n      &lt;scope&gt;runtime&lt;/scope&gt;\n      &lt;optional&gt;true&lt;/optional&gt;\n   &lt;/dependency&gt;\n\n   &lt;!-- https://stackoverflow.com/a/71416675/19092469 --&gt;\n   &lt;dependency&gt;\n      &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\n      &lt;artifactId&gt;jackson-datatype-hibernate5&lt;/artifactId&gt;\n   &lt;/dependency&gt;\n\n   &lt;!-- Réduire code répétitif et source d'erreur (reduce boilerplate) --&gt;\n   &lt;dependency&gt;\n      &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n      &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n      &lt;optional&gt;true&lt;/optional&gt;\n   &lt;/dependency&gt;\n   &lt;!-- Réduire code répétitif et source d'erreur (reduce boilerplate) --&gt;\n\n   &lt;dependency&gt;\n      &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n      &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n      &lt;scope&gt;runtime&lt;/scope&gt;\n   &lt;/dependency&gt;\n   &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n   &lt;/dependency&gt;\n\n&lt;/dependencies&gt;\n</code></pre>\n<p>how to resolve it ?</p>\n<p>Using Spring boot 3, nothing special in properties.</p>\n<p>Thanks</p>\n"},{"tags":["java","rabbitmq","keycloak"],"owner":{"account_id":22684491,"reputation":3,"user_id":16854381,"display_name":"Артём Смирнов"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":124,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677063748,"creation_date":1677063728,"question_id":75531815,"body_markdown":"So I have to write the code to consume messages from RabbtiMQ&#39;s queue, that contain information about a user which I have to save as a user obviously in &quot;userLocalStorage&quot; in KeyCloak. The problem is that when I&#39;m trying to reach the &quot;userLocalStorage&quot; aka database in callback functional object the IllegalStateException is thrown, which says that the Session/EntityManager is closed. In any other block of code but this one the user is being saved properly. The problem occurs only when this action is in callback object. \r\n\r\n``` \r\nDeliverCallback deliverCallback = (consumerTag, delivery) -&gt; {\r\n                String message = new String(delivery.getBody(), StandardCharsets.UTF_8);\r\n                User user = User.convertFromString(message);\r\n                session.userLocalStorage().addUser(... , ...);\r\n            };\r\n```","title":"Keycloak consuming the RabbitMQ&#39;s queue","body":"<p>So I have to write the code to consume messages from RabbtiMQ's queue, that contain information about a user which I have to save as a user obviously in &quot;userLocalStorage&quot; in KeyCloak. The problem is that when I'm trying to reach the &quot;userLocalStorage&quot; aka database in callback functional object the IllegalStateException is thrown, which says that the Session/EntityManager is closed. In any other block of code but this one the user is being saved properly. The problem occurs only when this action is in callback object.</p>\n<pre><code>DeliverCallback deliverCallback = (consumerTag, delivery) -&gt; {\n                String message = new String(delivery.getBody(), StandardCharsets.UTF_8);\n                User user = User.convertFromString(message);\n                session.userLocalStorage().addUser(... , ...);\n            };\n</code></pre>\n"},{"tags":["java","spring","hibernate","gradle","spring-data-jpa"],"comments":[{"owner":{"account_id":8357383,"reputation":11939,"user_id":6277104,"display_name":"SternK"},"score":0,"creation_date":1620728938,"post_id":67483619,"comment_id":119280449,"body_markdown":"Could you please show DDL of your `single_questions` table.","body":"Could you please show DDL of your <code>single_questions</code> table."}],"answers":[{"tags":[],"owner":{"account_id":10132205,"reputation":413,"user_id":7485135,"display_name":"Tamil.S"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1620726507,"creation_date":1620726507,"answer_id":67484329,"question_id":67483619,"body_markdown":"Try to Annotate your String[] field with simply `@ElementCollection`.\r\n\r\n    @ElementCollection(targetClass=String.class)\r\n    @Column(name = &quot;field_type_values&quot;)\r\n    private String[] fieldTypeValues;\r\n\r\n\r\n","title":"org.springframework.orm.jpa.JpaSystemException: could not deserialize","body":"<p>Try to Annotate your String[] field with simply <code>@ElementCollection</code>.</p>\n<pre><code>@ElementCollection(targetClass=String.class)\n@Column(name = &quot;field_type_values&quot;)\nprivate String[] fieldTypeValues;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3956809,"reputation":51,"user_id":3265006,"display_name":"Mordrekai"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677063670,"creation_date":1677063670,"answer_id":75531803,"question_id":67483619,"body_markdown":"I don&#39;t know if you need to allow repeated values, but if that&#39;s not the case, using java.util.Set type as the collection type, along with the @ElementCollection, worked for me.\r\n```\r\n    @Entity\r\n    @Table(name = &quot;single_questions&quot;)\r\n    public class SingleQuestions {\r\n        @Id\r\n        private Integer id;\r\n\r\n        @ElementCollection(targetClass=String.class)\r\n        @Column(name = &quot;FIELD_TYPE_VALUES&quot;)\r\n        private List&lt;String&gt; fieldtypevalues;\r\n```","title":"org.springframework.orm.jpa.JpaSystemException: could not deserialize","body":"<p>I don't know if you need to allow repeated values, but if that's not the case, using java.util.Set type as the collection type, along with the @ElementCollection, worked for me.</p>\n<pre><code>    @Entity\n    @Table(name = &quot;single_questions&quot;)\n    public class SingleQuestions {\n        @Id\n        private Integer id;\n\n        @ElementCollection(targetClass=String.class)\n        @Column(name = &quot;FIELD_TYPE_VALUES&quot;)\n        private List&lt;String&gt; fieldtypevalues;\n</code></pre>\n"}],"owner":{"account_id":12232531,"reputation":1276,"user_id":8928037,"display_name":"Kaumadie Kariyawasam"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1431,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1677063670,"creation_date":1620723610,"question_id":67483619,"body_markdown":"I want to create mysql string array type data field.\r\nHence I create model class in my spring-boot gradle project as following.\r\n\r\n``` java\r\n    @Entity\r\n    @Table(name = &quot;single_questions&quot;)\r\n    public class SingleQuestions {\r\n        @Id\r\n        private Integer id;\r\n        private String[] fieldtypevalues;\r\n    \r\n        public SingleQuestions() {\r\n        }\r\n    \r\n        public SingleQuestions(Integer id, String category, String field, String field_type, String[] fieldtypevalues) {\r\n            this.id = id;\r\n            this.fieldtypevalues = fieldtypevalues;\r\n        }\r\n    \r\n        public Integer getId() {\r\n            return this.id;\r\n        }\r\n    \r\n        public void setId(Integer id) {\r\n            this.id = id;\r\n        }\r\n    \r\n    \r\n        public String[] getFieldtypevalues() {\r\n            return this.fieldtypevalues;\r\n        }\r\n    \r\n        public void setFieldtypevalues(String[] fieldtypevalues) {\r\n            this.fieldtypevalues = fieldtypevalues;\r\n        }\r\n    \r\n    }\r\n```\r\n\r\nThis is my Repository it extends by `JpaRepository`\r\n\r\n``` java\r\n    public interface SingleQuestionRepository extends JpaRepository&lt;SingleQuestions,Integer&gt;{\r\n        \r\n    }\r\n```\r\nThis is controller class\r\n\r\n``` java\r\n    @RestController\r\n    @RequestMapping(&quot;/singleques&quot;)\r\n    @CrossOrigin(origins = &quot;*&quot;)\r\n    public class SingleQuestionController {\r\n        private SingleQuestionRepository singleQuestionRepository;\r\n    \r\n        public SingleQuestionController(SingleQuestionRepository singleQuestionRepository) {\r\n            this.singleQuestionRepository = singleQuestionRepository;\r\n        }\r\n    \r\n        @GetMapping(&quot;/getall&quot;)\r\n        Collection&lt;SingleQuestions&gt; getquestions() {\r\n            return singleQuestionRepository.findAll();\r\n        }\r\n    }\r\n```\r\n\r\nBut when I run `getquestions()` function in controller class, it gives following error.\r\n\r\n```\r\nnested exception is org.hibernate.type.SerializationException: could not deserialize\r\n    org.springframework.orm.jpa.JpaSystemException: could not deserialize; nested exception is org.hibernate.type.SerializationException: could not deserialize\r\n    \tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:353)\r\n    \tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:255)\r\n```\r\n\r\n","title":"org.springframework.orm.jpa.JpaSystemException: could not deserialize","body":"<p>I want to create mysql string array type data field.\nHence I create model class in my spring-boot gradle project as following.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Entity\n    @Table(name = &quot;single_questions&quot;)\n    public class SingleQuestions {\n        @Id\n        private Integer id;\n        private String[] fieldtypevalues;\n    \n        public SingleQuestions() {\n        }\n    \n        public SingleQuestions(Integer id, String category, String field, String field_type, String[] fieldtypevalues) {\n            this.id = id;\n            this.fieldtypevalues = fieldtypevalues;\n        }\n    \n        public Integer getId() {\n            return this.id;\n        }\n    \n        public void setId(Integer id) {\n            this.id = id;\n        }\n    \n    \n        public String[] getFieldtypevalues() {\n            return this.fieldtypevalues;\n        }\n    \n        public void setFieldtypevalues(String[] fieldtypevalues) {\n            this.fieldtypevalues = fieldtypevalues;\n        }\n    \n    }\n</code></pre>\n<p>This is my Repository it extends by <code>JpaRepository</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>    public interface SingleQuestionRepository extends JpaRepository&lt;SingleQuestions,Integer&gt;{\n        \n    }\n</code></pre>\n<p>This is controller class</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @RestController\n    @RequestMapping(&quot;/singleques&quot;)\n    @CrossOrigin(origins = &quot;*&quot;)\n    public class SingleQuestionController {\n        private SingleQuestionRepository singleQuestionRepository;\n    \n        public SingleQuestionController(SingleQuestionRepository singleQuestionRepository) {\n            this.singleQuestionRepository = singleQuestionRepository;\n        }\n    \n        @GetMapping(&quot;/getall&quot;)\n        Collection&lt;SingleQuestions&gt; getquestions() {\n            return singleQuestionRepository.findAll();\n        }\n    }\n</code></pre>\n<p>But when I run <code>getquestions()</code> function in controller class, it gives following error.</p>\n<pre><code>nested exception is org.hibernate.type.SerializationException: could not deserialize\n    org.springframework.orm.jpa.JpaSystemException: could not deserialize; nested exception is org.hibernate.type.SerializationException: could not deserialize\n        at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:353)\n        at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:255)\n</code></pre>\n"},{"tags":["java","android","x509certificate","keychain"],"answers":[{"comments":[{"owner":{"account_id":4784142,"reputation":2430,"user_id":3865138,"accept_rate":71,"display_name":"Mr Heelis"},"score":0,"creation_date":1677500062,"post_id":75530519,"comment_id":133343417,"body_markdown":"note this example can be used as either part of a `OkHttpClientFactory` implementation (where an alternate `OkHttpClient` is returned in `createNewNetworkModule` - referenced in `MainApplication.java` as `OkHttpClientProvider.setOkHttpClientFactory()`) or do it `JIT` with `NetworkingModule.setCustomClientBuilder()` as an `NetworkingModule.CustomClientBuilder` implementation","body":"note this example can be used as either part of a <code>OkHttpClientFactory</code> implementation (where an alternate <code>OkHttpClient</code> is returned in <code>createNewNetworkModule</code> - referenced in <code>MainApplication.java</code> as <code>OkHttpClientProvider.setOkHttpClientFactory()</code>) or do it <code>JIT</code> with <code>NetworkingModule.setCustomClientBuilder()</code> as an <code>NetworkingModule.CustomClientBuilder</code> implementation"}],"tags":[],"owner":{"account_id":4784142,"reputation":2430,"user_id":3865138,"accept_rate":71,"display_name":"Mr Heelis"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1677059028,"creation_date":1677057569,"answer_id":75530519,"question_id":75482765,"body_markdown":"I figured it out, the code needs to become slightly different, but this wasn&#39;t documented anywhere I could find: I had to literally face roll the keyboard to get it done\r\n\r\nso. the OP example was me using the pfx file in the assets folder.\r\n\r\n[![enter image description here][1]][1] \r\n\r\nIn order to ***not*** use a from an asset file in the build environment (aka `KeyStore`), in order to load the cert direcly from a part of android OS at run time and get at it in code (aka `KeyChain`)(i.e. in order to load the cert you can see in the screen below on the device) ....\r\n\r\n\r\n**THIS IS AN illustration of where it is in android, BUT NOT MY SCREEN SHOT** [![enter image description here][2]][2]\r\n\r\n...use this code\r\n\r\n    final char[] PASSWORD = &quot;***SOMEPASSWORD****&quot;.toCharArray();\r\n    TrustManager[] trustManager;\r\n    SSLSocketFactory sslSocketFactory;\r\n    KeyStore keyStore;\r\n    \r\n    X509Certificate[] keychain;  \r\n    PrivateKey privateKey;   \r\n    keychain = KeyChain.getCertificateChain(context, &quot;xkeyx-xaliasxx&quot;);\r\n    privateKey = KeyChain.getPrivateKey(context, &quot;xkeyx-xaliasxx&quot;); \r\n    keyStore = KeyStore.getInstance(&quot;PKCS12&quot;);\r\n    keyStore.load(null, null);\r\n    keyStore.setKeyEntry(&quot;xkeyx-xaliasxx&quot;, privateKey, PASSWORD, keychain);  \r\n    TrustManagerFactory trustManagerFactory = TrustManagerFactory.getInstance (TrustManagerFactory.getDefaultAlgorithm());\r\n    trustManagerFactory.init(keyStore);\r\n    TrustManager[] trustManagers = trustManagerFactory.getTrustManagers();\r\n    if (trustManagers.length != 1 || !(trustManagers[0] instanceof X509TrustManager))\r\n      {\r\n        throw new IllegalStateException(&quot;Unexpected default trust managers:&quot;\r\n          + Arrays.toString(trustManagers));\r\n      }\r\n    trustManager = trustManagers;\r\n    \r\n    KeyManagerFactory keyManagerFactory = KeyManagerFactory.getInstance(&quot;X509&quot;);\r\n    keyManagerFactory.init(keyStore,PASSWORD);\r\n    SSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);\r\n    sslContext.init(keyManagerFactory.getKeyManagers(),null,null);\r\n    sslSocketFactory = sslContext.getSocketFactory();\r\n    \r\n    \r\n    OkHttpClient.Builder builder = new OkHttpClient.Builder()\r\n        .connectTimeout(15000, TimeUnit.MILLISECONDS).readTimeout(0, TimeUnit.MILLISECONDS)\r\n        .writeTimeout(15000, TimeUnit.MILLISECONDS).cookieJar(new ReactCookieJarContainer());\r\n    builder.sslSocketFactory(sslSocketFactory, (X509TrustManager) trustManager[0]);\r\n    \r\n    OkHttpClient okHttpClient = builder.build();\r\n\r\n**NOTE this will only work AFTER the user in app has confirmed the certificate: so this code needs to have been run at least ONCE**\r\n\r\n[![enter image description here][3]][3]\r\n\r\n    KeyChain.choosePrivateKeyAlias(RN.getReactActivity(), (KeyChainAliasCallback) alias -&gt; {\r\n    Log.d(&quot;cert&quot;, String.format(&quot;User has selected client certificate alias: %s should be xkeyx-xaliasxx&quot;, alias));\r\n     X509Certificate[] truechain;\r\n     try {\r\n        truechain = KeyChain.getCertificateChain(Context, alias);\r\n        if (truechain != null) {\r\n            Log.d(&quot;cert&quot;, &quot;truechain count&quot; + truechain.length);\r\n        }\r\n        else{\r\n            Log.d(&quot;cert&quot;, &quot;truechain count is null&quot;);\r\n        }\r\n     } catch (InterruptedException e) {\r\n         Log.e(&quot;cert&quot;, &quot;InterruptedException&quot;, e);\r\n     } catch (KeyChainException e) {\r\n         Log.e(&quot;cert&quot;, &quot;KeyChainException&quot;, e);\r\n     }\r\n    }, null, null, null, -1, null);\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/GtBfQ.png\r\n  [2]: https://i.stack.imgur.com/nK0nC.png\r\n  [3]: https://i.stack.imgur.com/Ood2y.png","title":"using X509Certificate from KeyChain in OKHttpClient sslSocketFactory","body":"<p>I figured it out, the code needs to become slightly different, but this wasn't documented anywhere I could find: I had to literally face roll the keyboard to get it done</p>\n<p>so. the OP example was me using the pfx file in the assets folder.</p>\n<p><a href=\"https://i.stack.imgur.com/GtBfQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GtBfQ.png\" alt=\"enter image description here\" /></a></p>\n<p>In order to <em><strong>not</strong></em> use a from an asset file in the build environment (aka <code>KeyStore</code>), in order to load the cert direcly from a part of android OS at run time and get at it in code (aka <code>KeyChain</code>)(i.e. in order to load the cert you can see in the screen below on the device) ....</p>\n<p><strong>THIS IS AN illustration of where it is in android, BUT NOT MY SCREEN SHOT</strong> <a href=\"https://i.stack.imgur.com/nK0nC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nK0nC.png\" alt=\"enter image description here\" /></a></p>\n<p>...use this code</p>\n<pre><code>final char[] PASSWORD = &quot;***SOMEPASSWORD****&quot;.toCharArray();\nTrustManager[] trustManager;\nSSLSocketFactory sslSocketFactory;\nKeyStore keyStore;\n\nX509Certificate[] keychain;  \nPrivateKey privateKey;   \nkeychain = KeyChain.getCertificateChain(context, &quot;xkeyx-xaliasxx&quot;);\nprivateKey = KeyChain.getPrivateKey(context, &quot;xkeyx-xaliasxx&quot;); \nkeyStore = KeyStore.getInstance(&quot;PKCS12&quot;);\nkeyStore.load(null, null);\nkeyStore.setKeyEntry(&quot;xkeyx-xaliasxx&quot;, privateKey, PASSWORD, keychain);  \nTrustManagerFactory trustManagerFactory = TrustManagerFactory.getInstance (TrustManagerFactory.getDefaultAlgorithm());\ntrustManagerFactory.init(keyStore);\nTrustManager[] trustManagers = trustManagerFactory.getTrustManagers();\nif (trustManagers.length != 1 || !(trustManagers[0] instanceof X509TrustManager))\n  {\n    throw new IllegalStateException(&quot;Unexpected default trust managers:&quot;\n      + Arrays.toString(trustManagers));\n  }\ntrustManager = trustManagers;\n\nKeyManagerFactory keyManagerFactory = KeyManagerFactory.getInstance(&quot;X509&quot;);\nkeyManagerFactory.init(keyStore,PASSWORD);\nSSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);\nsslContext.init(keyManagerFactory.getKeyManagers(),null,null);\nsslSocketFactory = sslContext.getSocketFactory();\n\n\nOkHttpClient.Builder builder = new OkHttpClient.Builder()\n    .connectTimeout(15000, TimeUnit.MILLISECONDS).readTimeout(0, TimeUnit.MILLISECONDS)\n    .writeTimeout(15000, TimeUnit.MILLISECONDS).cookieJar(new ReactCookieJarContainer());\nbuilder.sslSocketFactory(sslSocketFactory, (X509TrustManager) trustManager[0]);\n\nOkHttpClient okHttpClient = builder.build();\n</code></pre>\n<p><strong>NOTE this will only work AFTER the user in app has confirmed the certificate: so this code needs to have been run at least ONCE</strong></p>\n<p><a href=\"https://i.stack.imgur.com/Ood2y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ood2y.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>KeyChain.choosePrivateKeyAlias(RN.getReactActivity(), (KeyChainAliasCallback) alias -&gt; {\nLog.d(&quot;cert&quot;, String.format(&quot;User has selected client certificate alias: %s should be xkeyx-xaliasxx&quot;, alias));\n X509Certificate[] truechain;\n try {\n    truechain = KeyChain.getCertificateChain(Context, alias);\n    if (truechain != null) {\n        Log.d(&quot;cert&quot;, &quot;truechain count&quot; + truechain.length);\n    }\n    else{\n        Log.d(&quot;cert&quot;, &quot;truechain count is null&quot;);\n    }\n } catch (InterruptedException e) {\n     Log.e(&quot;cert&quot;, &quot;InterruptedException&quot;, e);\n } catch (KeyChainException e) {\n     Log.e(&quot;cert&quot;, &quot;KeyChainException&quot;, e);\n }\n}, null, null, null, -1, null);\n</code></pre>\n"}],"owner":{"account_id":4784142,"reputation":2430,"user_id":3865138,"accept_rate":71,"display_name":"Mr Heelis"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":285,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75530519,"answer_count":1,"score":2,"last_activity_date":1677063546,"creation_date":1676628259,"question_id":75482765,"body_markdown":"I&#39;m an Android Developer who has to use `KeyChain` not `KeyStore`. The KeyStore variant of our code works. I need to add `KeyChain` equivalent.\r\n\r\nthis works\r\n\r\n      final char[] PASSWORD = &quot;***SOMEPASSWORD****&quot;.toCharArray();\r\n      TrustManager[] trustManager;\r\n      SSLSocketFactory sslSocketFactory;\r\n      KeyStore keyStore;\r\n\r\n      InputStream inputStream = context.getResources().getAssets().open(&quot;xxxx-xxxxx-xxxxx-xxxx.pfx&quot;);\r\n      keyStore = KeyStore.getInstance(&quot;PKCS12&quot;);\r\n      keyStore.load(inputStream,PASSWORD);\r\n      TrustManagerFactory trustManagerFactory = TrustManagerFactory.getInstance (TrustManagerFactory.getDefaultAlgorithm());\r\n      trustManagerFactory.init(keyStore);\r\n      TrustManager[] trustManagers = trustManagerFactory.getTrustManagers();\r\n      if (trustManagers.length != 1 || !(trustManagers[0] instanceof X509TrustManager))\r\n      {\r\n        throw new IllegalStateException(&quot;Unexpected default trust managers:&quot;\r\n          + Arrays.toString(trustManagers));\r\n      }\r\n      trustManager = trustManagers;\r\n\r\n      KeyManagerFactory keyManagerFactory = KeyManagerFactory.getInstance(&quot;X509&quot;);\r\n      keyManagerFactory.init(keyStore,PASSWORD);\r\n      SSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);\r\n      sslContext.init(keyManagerFactory.getKeyManagers(),null,null);\r\n      sslSocketFactory = sslContext.getSocketFactory();\r\n\r\n\r\n      OkHttpClient.Builder builder = new OkHttpClient.Builder()\r\n        .connectTimeout(15000, TimeUnit.MILLISECONDS).readTimeout(0, TimeUnit.MILLISECONDS)\r\n        .writeTimeout(15000, TimeUnit.MILLISECONDS).cookieJar(new ReactCookieJarContainer());\r\n      builder.sslSocketFactory(sslSocketFactory, (X509TrustManager) trustManager[0]);\r\n\r\n      OkHttpClient okHttpClient = builder.build();\r\n\r\nThe problem is this line `InputStream inputStream = context.getResources().getAssets().open(&quot;xxxx-xxxxx-xxxxx-xxxx.pfx&quot;);` we&#39;re not allowed to use the assets folder (for reasons outside the scope of this conversation) but we are allowed to put the self same file in the `KeyChain` so I did, and I can retrieve it using the following. `X509Certificate[] chain = KeyChain.getCertificateChain(context, &quot;xxxx-xxxxx-xxxxx-xxxx&quot;); `\r\n\r\nso since \r\n\r\n       X509Certificate[] chain = KeyChain.getCertificateChain(context, &quot;xxxx-xxxxx-xxxxx-xxxx&quot;); //this gets the correct X509Certificate\r\n\r\nGets the certificate via `KeyChain` my instinct was to swap it out with this:\r\n      \r\n      \r\n       X509TrustManager customTm = new X509TrustManager() {\r\n        @Override\r\n        public void checkClientTrusted(java.security.cert.X509Certificate[] chain, String authType) throws CertificateException {\r\n\r\n        }\r\n\r\n        @Override\r\n        public void checkServerTrusted(java.security.cert.X509Certificate[] chain, String authType) throws CertificateException {\r\n\r\n        }\r\n\r\n        @Override\r\n        public java.security.cert.X509Certificate[] getAcceptedIssuers() {\r\n          try {\r\n            return X509Certificate[] chain = KeyChain.getCertificateChain(context, &quot;xxxx-xxxxx-xxxxx-xxxx&quot;);\r\n          } catch (InterruptedException e) {\r\n            e.printStackTrace();\r\n          } catch (KeyChainException e) {\r\n            e.printStackTrace();\r\n          }\r\n          return null;\r\n        }\r\n      };\r\n      TrustManager[] trustManager = new TrustManager[] { customTm };\r\n      sslContext.init(null, trustManager, null);\r\n     \r\nbut it doesn&#39;t work, so my question is: **How do I use the X509Certificate I have from the `KeyChain` as a drop in replacement to the asset I pulled into the `KeyStore`?**            ","title":"using X509Certificate from KeyChain in OKHttpClient sslSocketFactory","body":"<p>I'm an Android Developer who has to use <code>KeyChain</code> not <code>KeyStore</code>. The KeyStore variant of our code works. I need to add <code>KeyChain</code> equivalent.</p>\n<p>this works</p>\n<pre><code>  final char[] PASSWORD = &quot;***SOMEPASSWORD****&quot;.toCharArray();\n  TrustManager[] trustManager;\n  SSLSocketFactory sslSocketFactory;\n  KeyStore keyStore;\n\n  InputStream inputStream = context.getResources().getAssets().open(&quot;xxxx-xxxxx-xxxxx-xxxx.pfx&quot;);\n  keyStore = KeyStore.getInstance(&quot;PKCS12&quot;);\n  keyStore.load(inputStream,PASSWORD);\n  TrustManagerFactory trustManagerFactory = TrustManagerFactory.getInstance (TrustManagerFactory.getDefaultAlgorithm());\n  trustManagerFactory.init(keyStore);\n  TrustManager[] trustManagers = trustManagerFactory.getTrustManagers();\n  if (trustManagers.length != 1 || !(trustManagers[0] instanceof X509TrustManager))\n  {\n    throw new IllegalStateException(&quot;Unexpected default trust managers:&quot;\n      + Arrays.toString(trustManagers));\n  }\n  trustManager = trustManagers;\n\n  KeyManagerFactory keyManagerFactory = KeyManagerFactory.getInstance(&quot;X509&quot;);\n  keyManagerFactory.init(keyStore,PASSWORD);\n  SSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);\n  sslContext.init(keyManagerFactory.getKeyManagers(),null,null);\n  sslSocketFactory = sslContext.getSocketFactory();\n\n\n  OkHttpClient.Builder builder = new OkHttpClient.Builder()\n    .connectTimeout(15000, TimeUnit.MILLISECONDS).readTimeout(0, TimeUnit.MILLISECONDS)\n    .writeTimeout(15000, TimeUnit.MILLISECONDS).cookieJar(new ReactCookieJarContainer());\n  builder.sslSocketFactory(sslSocketFactory, (X509TrustManager) trustManager[0]);\n\n  OkHttpClient okHttpClient = builder.build();\n</code></pre>\n<p>The problem is this line <code>InputStream inputStream = context.getResources().getAssets().open(&quot;xxxx-xxxxx-xxxxx-xxxx.pfx&quot;);</code> we're not allowed to use the assets folder (for reasons outside the scope of this conversation) but we are allowed to put the self same file in the <code>KeyChain</code> so I did, and I can retrieve it using the following. <code>X509Certificate[] chain = KeyChain.getCertificateChain(context, &quot;xxxx-xxxxx-xxxxx-xxxx&quot;); </code></p>\n<p>so since</p>\n<pre><code>   X509Certificate[] chain = KeyChain.getCertificateChain(context, &quot;xxxx-xxxxx-xxxxx-xxxx&quot;); //this gets the correct X509Certificate\n</code></pre>\n<p>Gets the certificate via <code>KeyChain</code> my instinct was to swap it out with this:</p>\n<pre><code>   X509TrustManager customTm = new X509TrustManager() {\n    @Override\n    public void checkClientTrusted(java.security.cert.X509Certificate[] chain, String authType) throws CertificateException {\n\n    }\n\n    @Override\n    public void checkServerTrusted(java.security.cert.X509Certificate[] chain, String authType) throws CertificateException {\n\n    }\n\n    @Override\n    public java.security.cert.X509Certificate[] getAcceptedIssuers() {\n      try {\n        return X509Certificate[] chain = KeyChain.getCertificateChain(context, &quot;xxxx-xxxxx-xxxxx-xxxx&quot;);\n      } catch (InterruptedException e) {\n        e.printStackTrace();\n      } catch (KeyChainException e) {\n        e.printStackTrace();\n      }\n      return null;\n    }\n  };\n  TrustManager[] trustManager = new TrustManager[] { customTm };\n  sslContext.init(null, trustManager, null);\n \n</code></pre>\n<p>but it doesn't work, so my question is: <strong>How do I use the X509Certificate I have from the <code>KeyChain</code> as a drop in replacement to the asset I pulled into the <code>KeyStore</code>?</strong></p>\n"},{"tags":["java","android","notifications","broadcastreceiver","alarmmanager"],"comments":[{"owner":{"account_id":7143350,"reputation":3880,"user_id":5460066,"display_name":"phatnhse"},"score":0,"creation_date":1529659127,"post_id":50983560,"comment_id":88964111,"body_markdown":"1. Log anything in `onReceive()` to make sure the cause isn&#39;t notification.\n2. If it doesn&#39;t show anything, make sure if your app installed on internal storage, not external storage","body":"1. Log anything in <code>onReceive()</code> to make sure the cause isn&#39;t notification. 2. If it doesn&#39;t show anything, make sure if your app installed on internal storage, not external storage"},{"owner":{"account_id":11835407,"reputation":75,"user_id":8660880,"display_name":"D. Joe"},"score":0,"creation_date":1529663519,"post_id":50983560,"comment_id":88966688,"body_markdown":"@Ph&#225;t Ph&#225;t, I&#39;ve already tried to send notification if intent.getAction() != null, but it always null, even if I don&#39;t reboot device..","body":"@Ph&#225;t Ph&#225;t, I&#39;ve already tried to send notification if intent.getAction() != null, but it always null, even if I don&#39;t reboot device.."}],"answers":[{"tags":[],"owner":{"account_id":11835407,"reputation":75,"user_id":8660880,"display_name":"D. Joe"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1529820795,"creation_date":1529820795,"answer_id":51007408,"question_id":50983560,"body_markdown":"I just found the solution! \r\n\r\n**AndroidManifest.xml**\r\n\r\n    &lt;receiver\r\n            android:name=&quot;com.example.a52780.nontifications.AlarmReceiver&quot;\r\n            android:enabled=&quot;true&quot;\r\n            android:exported=&quot;false&quot;\r\n            android:permission=&quot;android.permission.RECEIVE_BOOT_COMPLETED&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.BOOT_COMPLETED&quot; /&gt;\r\n                &lt;action android:name=&quot;android.intent.action.QUICKBOOT_POWERON&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/receiver&gt;\r\n\r\n        &lt;service\r\n            android:name=&quot;com.example.a52780.nontifications.BootService&quot;\r\n            android:enabled=&quot;true&quot;\r\n            android:exported=&quot;false&quot;/&gt;\r\n\r\n\r\nAlso I added **BootService.java**\r\n&lt;!-- language: java --&gt;\r\n\r\n    private void setAlarm(Intent intent) {\r\n        int notificationId = intent.getIntExtra(&quot;notificationId&quot;, 0);\r\n        String text = intent.getStringExtra(&quot;text&quot;);\r\n        Intent mainIntent = new Intent(this, MainActivity.class);\r\n        PendingIntent contentIntent = PendingIntent.getActivity(this, 0, mainIntent, 0);\r\n        NotificationManager myNotificationManager =\r\n                (NotificationManager) this.getSystemService(Context.NOTIFICATION_SERVICE);\r\n        Notification.Builder builder = new Notification.Builder(this);\r\n        builder.setSmallIcon(android.R.drawable.ic_dialog_info)\r\n                .setContentTitle(&quot;Wake up!&quot;)\r\n                .setContentText(text)\r\n                .setWhen(System.currentTimeMillis())\r\n                .setContentIntent(contentIntent);\r\n        myNotificationManager.notify(notificationId, builder.build());\r\n    }\r\n    \r\n    @Override\r\n    protected void onHandleIntent(@Nullable Intent intent) {\r\n        setAlarm(intent);\r\n        Intent service = new Intent(this, BootService.class);\r\n        stopService(service);\r\n    }\r\n\r\n**AlarmReceiver.java**\r\n&lt;!-- language: java --&gt;\r\n\r\n    private static final String BOOT_COMPLETED =\r\n            &quot;android.intent.action.BOOT_COMPLETED&quot;;\r\n    private static final String QUICKBOOT_POWERON =\r\n            &quot;android.intent.action.QUICKBOOT_POWERON&quot;;\r\n\r\n    @Override\r\n    public void onReceive(Context context, Intent intent) {\r\n\r\n        // Get id &amp; message from Intent\r\n        int notificationId = intent.getIntExtra(&quot;notificationId&quot;, 0);\r\n        String message = intent.getStringExtra(&quot;text&quot;);\r\n        \r\n        String action = intent.getAction();\r\n        if (BOOT_COMPLETED.equals(action) ||\r\n                QUICKBOOT_POWERON.equals(action)) {\r\n\r\n            Intent service = new Intent(context, BootService.class);\r\n\r\n            intent.putExtra(&quot;notificationId&quot;, notificationId);\r\n            intent.putExtra(&quot;text&quot;, message);\r\n\r\n            context.startService(service);\r\n        }\r\n        }\r\n\r\nI changed code in **MainActivity** that calls intent as well.\r\nOld:\r\n\r\n    Intent intent = new Intent(MainActivity.this, AlarmReceiver.class);\r\n                intent.putExtra(&quot;notificationId&quot;, notificationId);\r\n                intent.putExtra(&quot;text&quot;, text);\r\n                intent.putExtra(&quot;alarmStartTime&quot;, alarmStartTime);               \r\n                PendingIntent alarmIntent = PendingIntent.getBroadcast(MainActivity.this, notificationId, intent, PendingIntent.FLAG_CANCEL_CURRENT);\r\n                AlarmManager alarm = (AlarmManager) getSystemService(ALARM_SERVICE);\r\n\r\nIdk why, but it works after adding\r\n\r\n    intent.setAction(&quot;android.intent.action.BOOT_COMPLETED&quot;);\r\n    intent.setAction(&quot;android.intent.action.QUICKBOOT_POWERON&quot;);\r\n\r\n","title":"BroadcastReceiver is not working after reboot","body":"<p>I just found the solution! </p>\n\n<p><strong>AndroidManifest.xml</strong></p>\n\n<pre><code>&lt;receiver\n        android:name=\"com.example.a52780.nontifications.AlarmReceiver\"\n        android:enabled=\"true\"\n        android:exported=\"false\"\n        android:permission=\"android.permission.RECEIVE_BOOT_COMPLETED\"&gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=\"android.intent.action.BOOT_COMPLETED\" /&gt;\n            &lt;action android:name=\"android.intent.action.QUICKBOOT_POWERON\" /&gt;\n        &lt;/intent-filter&gt;\n    &lt;/receiver&gt;\n\n    &lt;service\n        android:name=\"com.example.a52780.nontifications.BootService\"\n        android:enabled=\"true\"\n        android:exported=\"false\"/&gt;\n</code></pre>\n\n<p>Also I added <strong>BootService.java</strong>\n</p>\n\n<pre><code>private void setAlarm(Intent intent) {\n    int notificationId = intent.getIntExtra(\"notificationId\", 0);\n    String text = intent.getStringExtra(\"text\");\n    Intent mainIntent = new Intent(this, MainActivity.class);\n    PendingIntent contentIntent = PendingIntent.getActivity(this, 0, mainIntent, 0);\n    NotificationManager myNotificationManager =\n            (NotificationManager) this.getSystemService(Context.NOTIFICATION_SERVICE);\n    Notification.Builder builder = new Notification.Builder(this);\n    builder.setSmallIcon(android.R.drawable.ic_dialog_info)\n            .setContentTitle(\"Wake up!\")\n            .setContentText(text)\n            .setWhen(System.currentTimeMillis())\n            .setContentIntent(contentIntent);\n    myNotificationManager.notify(notificationId, builder.build());\n}\n\n@Override\nprotected void onHandleIntent(@Nullable Intent intent) {\n    setAlarm(intent);\n    Intent service = new Intent(this, BootService.class);\n    stopService(service);\n}\n</code></pre>\n\n<p><strong>AlarmReceiver.java</strong>\n</p>\n\n<pre><code>private static final String BOOT_COMPLETED =\n        \"android.intent.action.BOOT_COMPLETED\";\nprivate static final String QUICKBOOT_POWERON =\n        \"android.intent.action.QUICKBOOT_POWERON\";\n\n@Override\npublic void onReceive(Context context, Intent intent) {\n\n    // Get id &amp; message from Intent\n    int notificationId = intent.getIntExtra(\"notificationId\", 0);\n    String message = intent.getStringExtra(\"text\");\n\n    String action = intent.getAction();\n    if (BOOT_COMPLETED.equals(action) ||\n            QUICKBOOT_POWERON.equals(action)) {\n\n        Intent service = new Intent(context, BootService.class);\n\n        intent.putExtra(\"notificationId\", notificationId);\n        intent.putExtra(\"text\", message);\n\n        context.startService(service);\n    }\n    }\n</code></pre>\n\n<p>I changed code in <strong>MainActivity</strong> that calls intent as well.\nOld:</p>\n\n<pre><code>Intent intent = new Intent(MainActivity.this, AlarmReceiver.class);\n            intent.putExtra(\"notificationId\", notificationId);\n            intent.putExtra(\"text\", text);\n            intent.putExtra(\"alarmStartTime\", alarmStartTime);               \n            PendingIntent alarmIntent = PendingIntent.getBroadcast(MainActivity.this, notificationId, intent, PendingIntent.FLAG_CANCEL_CURRENT);\n            AlarmManager alarm = (AlarmManager) getSystemService(ALARM_SERVICE);\n</code></pre>\n\n<p>Idk why, but it works after adding</p>\n\n<pre><code>intent.setAction(\"android.intent.action.BOOT_COMPLETED\");\nintent.setAction(\"android.intent.action.QUICKBOOT_POWERON\");\n</code></pre>\n"}],"owner":{"account_id":11835407,"reputation":75,"user_id":8660880,"display_name":"D. Joe"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1885,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":51007408,"answer_count":1,"score":4,"last_activity_date":1677063501,"creation_date":1529655215,"question_id":50983560,"body_markdown":"My BroadcastReceiver works fine, but when I reboot my phone, all notifications stop working. \r\n\r\n**AndroidManifest.xml**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        package=&quot;com.example.a52780.nontifications&quot;\r\n        android:installLocation=&quot;internalOnly&quot;&gt;\r\n    \r\n        &lt;uses-permission android:name=&quot;android.permission.SET_ALARM&quot;/&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.RECEIVE_BOOT_COMPLETED &quot;/&gt;\r\n    \r\n        &lt;application\r\n            android:allowBackup=&quot;true&quot;\r\n            android:icon=&quot;@mipmap/ic_launcher&quot;\r\n            android:label=&quot;@string/app_name&quot;\r\n            android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n            android:supportsRtl=&quot;true&quot;\r\n            android:theme=&quot;@style/AppTheme&quot;&gt;\r\n            &lt;activity android:name=&quot;.MainActivity&quot;&gt;\r\n                &lt;intent-filter&gt;\r\n                    &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n                    &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n                &lt;/intent-filter&gt;\r\n            &lt;/activity&gt;\r\n    \r\n            &lt;receiver\r\n                android:name=&quot;.AlarmReceiver&quot;\r\n                android:priority=&quot;999&quot;&gt;\r\n                &lt;intent-filter&gt;\r\n                    &lt;action android:name=&quot;android.intent.action.BOOT_COMPLETED&quot; /&gt;\r\n                    &lt;action android:name=&quot;android.intent.action.QUICKBOOT_POWERON&quot; /&gt;\r\n                &lt;/intent-filter&gt;\r\n            &lt;/receiver&gt;\r\n    \r\n        &lt;/application&gt;\r\n    \r\n    &lt;/manifest&gt;\r\n\r\n\r\n\r\n**AlarmReceiver.java**\r\n\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    public class AlarmReceiver extends BroadcastReceiver {\r\n        @Override\r\n        public void onReceive(Context context, Intent intent) {\r\n    \r\n                // Get id &amp; message from Intent\r\n    \r\n                int notificationId = intent.getIntExtra(&quot;notificationId&quot;, 0);\r\n                String message = intent.getStringExtra(&quot;text&quot;);\r\n    \r\n                // when notif. is tapped, call MainActivity\r\n    \r\n                Intent mainIntent = new Intent(context, MainActivity.class);\r\n                PendingIntent contentIntent = PendingIntent.getActivity(context, 0, mainIntent, 0);\r\n    \r\n                NotificationManager myNotificationManager =\r\n                        (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);\r\n    \r\n                // PREPARE NOTIF\r\n    \r\n                Notification.Builder builder = new Notification.Builder(context);\r\n                builder.setSmallIcon(android.R.drawable.ic_dialog_info)\r\n                        .setContentTitle(&quot;Wake up!&quot;)\r\n                        .setContentText(message)\r\n                        .setWhen(System.currentTimeMillis())\r\n                        .setContentIntent(contentIntent);\r\n    \r\n                myNotificationManager.notify(notificationId, builder.build());\r\n            }\r\n    }\r\n\r\nAlso I tried to put android:enabled=&quot;true&quot; and android:exported=&quot;false&quot; in receiver. But it didn&#39;t work. Application installs in phone memory not on the SD card. BroadcastReceiver should works, anyway it doesn&#39;t work after reboot\r\n\r\n\r\n\r\n\r\n    \r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"BroadcastReceiver is not working after reboot","body":"<p>My BroadcastReceiver works fine, but when I reboot my phone, all notifications stop working. </p>\n\n<p><strong>AndroidManifest.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    package=\"com.example.a52780.nontifications\"\n    android:installLocation=\"internalOnly\"&gt;\n\n    &lt;uses-permission android:name=\"android.permission.SET_ALARM\"/&gt;\n    &lt;uses-permission android:name=\"android.permission.RECEIVE_BOOT_COMPLETED \"/&gt;\n\n    &lt;application\n        android:allowBackup=\"true\"\n        android:icon=\"@mipmap/ic_launcher\"\n        android:label=\"@string/app_name\"\n        android:roundIcon=\"@mipmap/ic_launcher_round\"\n        android:supportsRtl=\"true\"\n        android:theme=\"@style/AppTheme\"&gt;\n        &lt;activity android:name=\".MainActivity\"&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=\"android.intent.action.MAIN\" /&gt;\n                &lt;category android:name=\"android.intent.category.LAUNCHER\" /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n\n        &lt;receiver\n            android:name=\".AlarmReceiver\"\n            android:priority=\"999\"&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=\"android.intent.action.BOOT_COMPLETED\" /&gt;\n                &lt;action android:name=\"android.intent.action.QUICKBOOT_POWERON\" /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/receiver&gt;\n\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n\n<p><strong>AlarmReceiver.java</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class AlarmReceiver extends BroadcastReceiver {\n    @Override\n    public void onReceive(Context context, Intent intent) {\n\n            // Get id &amp; message from Intent\n\n            int notificationId = intent.getIntExtra(\"notificationId\", 0);\n            String message = intent.getStringExtra(\"text\");\n\n            // when notif. is tapped, call MainActivity\n\n            Intent mainIntent = new Intent(context, MainActivity.class);\n            PendingIntent contentIntent = PendingIntent.getActivity(context, 0, mainIntent, 0);\n\n            NotificationManager myNotificationManager =\n                    (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);\n\n            // PREPARE NOTIF\n\n            Notification.Builder builder = new Notification.Builder(context);\n            builder.setSmallIcon(android.R.drawable.ic_dialog_info)\n                    .setContentTitle(\"Wake up!\")\n                    .setContentText(message)\n                    .setWhen(System.currentTimeMillis())\n                    .setContentIntent(contentIntent);\n\n            myNotificationManager.notify(notificationId, builder.build());\n        }\n}\n</code></pre>\n\n<p>Also I tried to put android:enabled=\"true\" and android:exported=\"false\" in receiver. But it didn't work. Application installs in phone memory not on the SD card. BroadcastReceiver should works, anyway it doesn't work after reboot</p>\n"},{"tags":["java","spring-boot","singleton","postconstruct","application-scope"],"answers":[{"tags":[],"owner":{"account_id":10835632,"reputation":541,"user_id":7968718,"display_name":"Daksharaj kamal"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677063458,"creation_date":1677063458,"answer_id":75531758,"question_id":75518586,"body_markdown":"I&#39;ve solved my problem by using `Bean.refresh()`, The solution I was seeking, was I wanted a `/refresh` end-point which will refresh my bean to do that I followed the following steps - \r\n 1. I Autowired the `ConfigurableApplicationContext `  \r\n    `@Autowired`  \r\n\t`private ConfigurableApplicationContext context;`\r\n\r\n 2. In the endpoint I initialized the bean -   \r\n`ReferenceClass bean = context.getBean(ReferenceClass.class);`\r\n\r\n 3. Refreshed is using `.refresh()`  \r\n`bean.refresh();`\r\n\r\nThat&#39;s it, it solved my issue, once the user hits the `/refresh`  endpoint it refreshes my bean. ","title":"How to add Refresh trigger to a class which is annotated with @ApplicationScope","body":"<p>I've solved my problem by using <code>Bean.refresh()</code>, The solution I was seeking, was I wanted a <code>/refresh</code> end-point which will refresh my bean to do that I followed the following steps -</p>\n<ol>\n<li><p>I Autowired the <code>ConfigurableApplicationContext </code><br />\n<code>@Autowired</code><br />\n<code>private ConfigurableApplicationContext context;</code></p>\n</li>\n<li><p>In the endpoint I initialized the bean -<br />\n<code>ReferenceClass bean = context.getBean(ReferenceClass.class);</code></p>\n</li>\n<li><p>Refreshed is using <code>.refresh()</code><br />\n<code>bean.refresh();</code></p>\n</li>\n</ol>\n<p>That's it, it solved my issue, once the user hits the <code>/refresh</code>  endpoint it refreshes my bean.</p>\n"}],"owner":{"account_id":10835632,"reputation":541,"user_id":7968718,"display_name":"Daksharaj kamal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677063458,"creation_date":1676972026,"question_id":75518586,"body_markdown":"Right now I have an `InitialReferenceLoaderImpl` which is annotated by `@ApplicationScope` and the function is annotated by `@PostConstruct`, in this class I&#39;m loading my `Application Properties` from the SQL table, but the problem is, If users change something on `Application Properties` table, it does not get reflected directly, User needs to restart the server, which I don&#39;t want.\r\n\r\nI want the user to hit the `/refresh` URL so that `Application Properties` can be reloaded.\r\n\r\nSorry for the confusing explanation.","title":"How to add Refresh trigger to a class which is annotated with @ApplicationScope","body":"<p>Right now I have an <code>InitialReferenceLoaderImpl</code> which is annotated by <code>@ApplicationScope</code> and the function is annotated by <code>@PostConstruct</code>, in this class I'm loading my <code>Application Properties</code> from the SQL table, but the problem is, If users change something on <code>Application Properties</code> table, it does not get reflected directly, User needs to restart the server, which I don't want.</p>\n<p>I want the user to hit the <code>/refresh</code> URL so that <code>Application Properties</code> can be reloaded.</p>\n<p>Sorry for the confusing explanation.</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":18868507,"reputation":980,"user_id":13763713,"display_name":"oliver_t"},"score":1,"creation_date":1677063396,"post_id":75531657,"comment_id":133262041,"body_markdown":"At which time do you want to define the URL? During build time, during server startup or dynamically (then it&#39;s not static)? Maybe look at Maven variable replacement:\nhttps://stackoverflow.com/questions/68908150/maven-filtering-replacement-of-variables","body":"At which time do you want to define the URL? During build time, during server startup or dynamically (then it&#39;s not static)? Maybe look at Maven variable replacement: <a href=\"https://stackoverflow.com/questions/68908150/maven-filtering-replacement-of-variables\" title=\"maven filtering replacement of variables\">stackoverflow.com/questions/68908150/&hellip;</a>"},{"owner":{"account_id":17976055,"reputation":1,"user_id":13066146,"display_name":"hoiskipoiski"},"score":0,"creation_date":1677150291,"post_id":75531657,"comment_id":133282680,"body_markdown":"I needed it in build time, but i have resolved it myself. I had an OpenAPI.yaml spec file which i wanted to use to generate the swagger ui and i thought i had to insert the server url into the yaml file, but now im using redoc and just serve a static html file which uses redoc to create an openapi documentation.","body":"I needed it in build time, but i have resolved it myself. I had an OpenAPI.yaml spec file which i wanted to use to generate the swagger ui and i thought i had to insert the server url into the yaml file, but now im using redoc and just serve a static html file which uses redoc to create an openapi documentation."}],"owner":{"account_id":17976055,"reputation":1,"user_id":13066146,"display_name":"hoiskipoiski"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677062975,"creation_date":1677062975,"question_id":75531657,"body_markdown":"I would like to know if there is a way I can insert the url of a spring boot server into a static file?\r\n\r\nSo for example i have a file in my resources folder which i would like to write the server url into.","title":"Insert Spring Boot Server URL into static file","body":"<p>I would like to know if there is a way I can insert the url of a spring boot server into a static file?</p>\n<p>So for example i have a file in my resources folder which i would like to write the server url into.</p>\n"},{"tags":["java","reference"],"comments":[{"owner":{"account_id":17835,"reputation":303915,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1677062675,"post_id":75531324,"comment_id":133261821,"body_markdown":"Variables and fields in Java hold references, not objects. `TreeNode curr = nodes.poll()` doesn&#39;t &quot;create a new object&quot;, it&#39;ll just assign a reference to an existing one to `curr`.","body":"Variables and fields in Java hold references, not objects. <code>TreeNode curr = nodes.poll()</code> doesn&#39;t &quot;create a new object&quot;, it&#39;ll just assign a reference to an existing one to <code>curr</code>."}],"owner":{"account_id":27849866,"reputation":19,"user_id":21264583,"display_name":"Cam"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1677062762,"answer_count":0,"score":0,"last_activity_date":1677062693,"creation_date":1677061460,"question_id":75531324,"body_markdown":"I create a new object, curr, and set it equal to root (by polling a Queue). When I change the attributes of curr, root *also* changes. \r\n\r\nHowever, the same does not happen when I create a new object temp and set it to curr.left. When I change the value of curr.left, temp *doesn&#39;t* change. Can someone explain this to me? Why is curr being treated like the same object as root, but temp is being treated like a copy of curr.left?\r\n\r\n```\r\nclass Solution {\r\n    public TreeNode invertTree(TreeNode root) {\r\n        \r\n        if( root == null )\r\n        {\r\n            return root;\r\n        }\r\n\r\n        Queue&lt;TreeNode&gt; nodes = new LinkedList&lt;TreeNode&gt;();\r\n\r\n        nodes.add( root );\r\n\r\n        while( !nodes.isEmpty() )\r\n        {\r\n            TreeNode curr = nodes.poll();\r\n\r\n            TreeNode temp = curr.left;\r\n            curr.left = curr.right;\r\n            curr.right = temp;\r\n\r\n            if( curr.right != null )\r\n            {\r\n                nodes.add( curr.right );\r\n            }\r\n\r\n            if( curr.left != null )\r\n            {\r\n                nodes.add( curr.left );\r\n            }\r\n            \r\n\r\n\r\n        }\r\n\r\n        return root;\r\n\r\n\r\n\r\n    }\r\n}\r\n```\r\n\r\nI tried to make a temporary value, temp to store the value at curr.left so I could swap curr.left with curr.right. This worked fine. However, it confused me because when copying over the object root, I was able to modify the object root with the object curr.","title":"Can someone explain why &quot;root&quot; changes when &quot;curr&quot; changes, but &quot;temp&quot; does not change when &quot;curr.left&quot; changes?","body":"<p>I create a new object, curr, and set it equal to root (by polling a Queue). When I change the attributes of curr, root <em>also</em> changes.</p>\n<p>However, the same does not happen when I create a new object temp and set it to curr.left. When I change the value of curr.left, temp <em>doesn't</em> change. Can someone explain this to me? Why is curr being treated like the same object as root, but temp is being treated like a copy of curr.left?</p>\n<pre><code>class Solution {\n    public TreeNode invertTree(TreeNode root) {\n        \n        if( root == null )\n        {\n            return root;\n        }\n\n        Queue&lt;TreeNode&gt; nodes = new LinkedList&lt;TreeNode&gt;();\n\n        nodes.add( root );\n\n        while( !nodes.isEmpty() )\n        {\n            TreeNode curr = nodes.poll();\n\n            TreeNode temp = curr.left;\n            curr.left = curr.right;\n            curr.right = temp;\n\n            if( curr.right != null )\n            {\n                nodes.add( curr.right );\n            }\n\n            if( curr.left != null )\n            {\n                nodes.add( curr.left );\n            }\n            \n\n\n        }\n\n        return root;\n\n\n\n    }\n}\n</code></pre>\n<p>I tried to make a temporary value, temp to store the value at curr.left so I could swap curr.left with curr.right. This worked fine. However, it confused me because when copying over the object root, I was able to modify the object root with the object curr.</p>\n"},{"tags":["java","android","xml","manifest"],"answers":[{"tags":[],"owner":{"account_id":20801799,"reputation":33,"user_id":15277661,"display_name":"Mohammed Amine"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676653550,"creation_date":1676653550,"answer_id":75487262,"question_id":75487063,"body_markdown":"In API 30 and plus , it uses the java code more than manifest file and xml files \r\nuse onStart and onStop method and add intent inside and use this.register(obj claa of reciever) and unregister on stop method","title":"service and manifest files","body":"<p>In API 30 and plus , it uses the java code more than manifest file and xml files\nuse onStart and onStop method and add intent inside and use this.register(obj claa of reciever) and unregister on stop method</p>\n"},{"tags":[],"owner":{"account_id":7246559,"reputation":529,"user_id":5528269,"display_name":"Sina Rezaei"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677062622,"creation_date":1677062622,"answer_id":75531577,"question_id":75487063,"body_markdown":"From the official android docs :\r\n\r\nhttps://developer.android.com/guide/components/broadcast-exceptions\r\n&gt; As part of the Android 8.0 (API level 26) Background Execution Limits,\r\n&gt; apps that target the API level 26 or higher can no longer register\r\n&gt; broadcast receivers for implicit broadcasts in their manifest.\r\n&gt; However, several broadcasts are currently exempted from these\r\n&gt; limitations. Apps can continue to register listeners for the following\r\n&gt; broadcasts, no matter what API level the apps target.\r\n\r\n\r\nSo **&quot;android.intent.action.AIRPLANE_MODE&quot;** is no longer in the list of exempted broadcasts. You cannot receive the broadcast from a broadcast receiver. So you must register your broadcast receiver in activity rather than in AndroidManifest.","title":"service and manifest files","body":"<p>From the official android docs :</p>\n<p><a href=\"https://developer.android.com/guide/components/broadcast-exceptions\" rel=\"nofollow noreferrer\">https://developer.android.com/guide/components/broadcast-exceptions</a></p>\n<blockquote>\n<p>As part of the Android 8.0 (API level 26) Background Execution Limits,\napps that target the API level 26 or higher can no longer register\nbroadcast receivers for implicit broadcasts in their manifest.\nHowever, several broadcasts are currently exempted from these\nlimitations. Apps can continue to register listeners for the following\nbroadcasts, no matter what API level the apps target.</p>\n</blockquote>\n<p>So <strong>&quot;android.intent.action.AIRPLANE_MODE&quot;</strong> is no longer in the list of exempted broadcasts. You cannot receive the broadcast from a broadcast receiver. So you must register your broadcast receiver in activity rather than in AndroidManifest.</p>\n"}],"owner":{"account_id":20801799,"reputation":33,"user_id":15277661,"display_name":"Mohammed Amine"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1677062622,"creation_date":1676652407,"question_id":75487063,"body_markdown":"i wrote this code in android studio , it wont show me the toast message :\r\nhere is the manifest file :\r\n```\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.READ_PHONE_STATE&quot;/&gt;\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\r\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.MyApplication&quot;\r\n        tools:targetApi=&quot;31&quot;&gt;\r\n\r\n\r\n        &lt;activity\r\n            android:name=&quot;.MainActivity&quot;\r\n            android:exported=&quot;true&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n\r\n        &lt;receiver android:name=&quot;.BoradCastReciever&quot;\r\n            android:exported=&quot;false&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.AIRPLANE_MODE&quot;/&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/receiver&gt;\r\n    &lt;/application&gt;\r\n&lt;/manifest&gt;\r\n```\r\nand here is the java code class reciever :\r\n```\r\npackage com.mohapp.myapplication;\r\nimport android.content.BroadcastReceiver;\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.widget.Toast;\r\npublic class BoradCastReciever extends BroadcastReceiver {\r\n    @Override\r\n    public void onReceive(Context context, Intent intent) {\r\n        boolean is_on = intent.getBooleanExtra(&quot;air&quot;, false);\r\n        if (is_on == true) {\r\n            Toast.makeText(context, &quot;Air Plane mode is on&quot;, Toast.LENGTH_LONG).show();\r\n        }else{\r\n            Toast.makeText(context, &quot;Air Plane mode is false&quot;, Toast.LENGTH_LONG).show();\r\n        }\r\n    }\r\n}\r\n```\r\ni am using API 33 with Gradle version 7.5 and Embedd JDK(jdk 11)","title":"service and manifest files","body":"<p>i wrote this code in android studio , it wont show me the toast message :\nhere is the manifest file :</p>\n<pre><code>    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n    &lt;uses-permission android:name=&quot;android.permission.READ_PHONE_STATE&quot;/&gt;\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.MyApplication&quot;\n        tools:targetApi=&quot;31&quot;&gt;\n\n\n        &lt;activity\n            android:name=&quot;.MainActivity&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n\n        &lt;receiver android:name=&quot;.BoradCastReciever&quot;\n            android:exported=&quot;false&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.AIRPLANE_MODE&quot;/&gt;\n            &lt;/intent-filter&gt;\n        &lt;/receiver&gt;\n    &lt;/application&gt;\n&lt;/manifest&gt;\n</code></pre>\n<p>and here is the java code class reciever :</p>\n<pre><code>package com.mohapp.myapplication;\nimport android.content.BroadcastReceiver;\nimport android.content.Context;\nimport android.content.Intent;\nimport android.widget.Toast;\npublic class BoradCastReciever extends BroadcastReceiver {\n    @Override\n    public void onReceive(Context context, Intent intent) {\n        boolean is_on = intent.getBooleanExtra(&quot;air&quot;, false);\n        if (is_on == true) {\n            Toast.makeText(context, &quot;Air Plane mode is on&quot;, Toast.LENGTH_LONG).show();\n        }else{\n            Toast.makeText(context, &quot;Air Plane mode is false&quot;, Toast.LENGTH_LONG).show();\n        }\n    }\n}\n</code></pre>\n<p>i am using API 33 with Gradle version 7.5 and Embedd JDK(jdk 11)</p>\n"},{"tags":["java","spring","opencv","video-streaming"],"comments":[{"owner":{"account_id":8689433,"reputation":371,"user_id":6502726,"accept_rate":20,"display_name":"Vishnu Moorthy Kanagaraj"},"score":0,"creation_date":1578905706,"post_id":54055728,"comment_id":105577542,"body_markdown":"I also have the same issue. Kindly share if did you get any idea regarding this. Thanks.","body":"I also have the same issue. Kindly share if did you get any idea regarding this. Thanks."}],"owner":{"account_id":3087042,"reputation":131,"user_id":2613986,"accept_rate":64,"display_name":"0xDEADBEEF"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":931,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1677062555,"creation_date":1546718226,"question_id":54055728,"body_markdown":"I have an IP camera with video stream in H.264 via rtsp. I want to frame this video stream and analyze the image using OpenCV in the spring-boot application (which will be launched in the docker container), and then relay this video stream to the browser, for example, through WebRTC.\r\n\r\n                                  +-------------------------------+\r\n                                  |                               |\r\n    +----------------+            | Spring-boot application       |\r\n    |                |            |         (java)                |\r\n    |   IP-CAM       |            |                               |\r\n    |   in H.264     | +-------&gt;  +----------+---------+----------+\r\n    |   on rtsp://   |            |          |         |          |\r\n    |                |            |  H.264   |OpenCV   |  WebRTC  |\r\n    +----------------+            | decoder  |analysis |          |\r\n                                  +--------------------+----------+\r\n\r\n\r\nI ask for hints with the software stack of my application. I do not want to separate the decoding and analysis logic into different software components (for example, decode using ffmpeg) and I want to have maximum freedom from the system environment (ideally, the entire application should be in the same docker container). I&#39;m just starting to work with video streams in java, for this I ask for help in choosing libraries and ready-made solutions.\r\n","title":"Decode &amp; analyze video stream in spring-boot application","body":"<p>I have an IP camera with video stream in H.264 via rtsp. I want to frame this video stream and analyze the image using OpenCV in the spring-boot application (which will be launched in the docker container), and then relay this video stream to the browser, for example, through WebRTC.</p>\n\n<pre><code>                              +-------------------------------+\n                              |                               |\n+----------------+            | Spring-boot application       |\n|                |            |         (java)                |\n|   IP-CAM       |            |                               |\n|   in H.264     | +-------&gt;  +----------+---------+----------+\n|   on rtsp://   |            |          |         |          |\n|                |            |  H.264   |OpenCV   |  WebRTC  |\n+----------------+            | decoder  |analysis |          |\n                              +--------------------+----------+\n</code></pre>\n\n<p>I ask for hints with the software stack of my application. I do not want to separate the decoding and analysis logic into different software components (for example, decode using ffmpeg) and I want to have maximum freedom from the system environment (ideally, the entire application should be in the same docker container). I'm just starting to work with video streams in java, for this I ask for help in choosing libraries and ready-made solutions.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":14423201,"reputation":840,"user_id":10418725,"display_name":"Jorn Rigter"},"score":1,"creation_date":1663605542,"post_id":73774321,"comment_id":130274275,"body_markdown":"I think your bug might have to do with the ``compress`` method you use. From the docs: ``This method may take several seconds to complete, so it should only be called from a worker thread.`` &quot;I can see decoded Image inside debugger&quot; -&gt; What do you see in the debugger?","body":"I think your bug might have to do with the <code>compress</code> method you use. From the docs: <code>This method may take several seconds to complete, so it should only be called from a worker thread.</code> &quot;I can see decoded Image inside debugger&quot; -&gt; What do you see in the debugger?"},{"owner":{"account_id":1906124,"reputation":2368,"user_id":1720972,"accept_rate":98,"display_name":"KernelPanic"},"score":0,"creation_date":1663614461,"post_id":73774321,"comment_id":130277058,"body_markdown":"@JornRigter I&#39;ve updated my question with screenshot of debug situation.","body":"@JornRigter I&#39;ve updated my question with screenshot of debug situation."},{"owner":{"account_id":14584795,"reputation":2961,"user_id":10534012,"display_name":"Darkman"},"score":1,"creation_date":1664955616,"post_id":73774321,"comment_id":130584483,"body_markdown":"Why not do an extra check on the compressed bitmap to check either it&#39;s null or not. Seems like the culprit is somewhere there. What happen if you set a small bitmap without the need to compress?","body":"Why not do an extra check on the compressed bitmap to check either it&#39;s null or not. Seems like the culprit is somewhere there. What happen if you set a small bitmap without the need to compress?"},{"owner":{"account_id":1906124,"reputation":2368,"user_id":1720972,"accept_rate":98,"display_name":"KernelPanic"},"score":0,"creation_date":1665038011,"post_id":73774321,"comment_id":130606208,"body_markdown":"@Darkman I&#39;ve updated my question, have checked the image, it is ok! Honestly, I do not know what to do anymore ...","body":"@Darkman I&#39;ve updated my question, have checked the image, it is ok! Honestly, I do not know what to do anymore ..."},{"owner":{"account_id":14584795,"reputation":2961,"user_id":10534012,"display_name":"Darkman"},"score":0,"creation_date":1665039751,"post_id":73774321,"comment_id":130606697,"body_markdown":"My last suggestions would be 1) Check how many times `updatePlantPhoto()` is called? 2) `onResume()` might be called multiple times. 3) If with a small image let say 32x32 without compression still giving you the problem, rather relies on debugger, relies on your own code instead. 4) If all fails, `imgBtnPhoto` is certainly gets refresh somewhere maybe during a transition between the activity and fragment.","body":"My last suggestions would be 1) Check how many times <code>updatePlantPhoto()</code> is called? 2) <code>onResume()</code> might be called multiple times. 3) If with a small image let say 32x32 without compression still giving you the problem, rather relies on debugger, relies on your own code instead. 4) If all fails, <code>imgBtnPhoto</code> is certainly gets refresh somewhere maybe during a transition between the activity and fragment."},{"owner":{"account_id":14584795,"reputation":2961,"user_id":10534012,"display_name":"Darkman"},"score":0,"creation_date":1665044576,"post_id":73774321,"comment_id":130608213,"body_markdown":"Eurika!. I think I know the problem is. It is `setImageBitmap()`. To use it, you must use `android:src` in the xmls e.g. `android:src=&quot;@drawable/android&quot;` and use `setBackground()` if you&#39;re using `android:background`  e.g. `android:background=&quot;@drawable/android&quot;`. `android:src` for foreground images and `android:background` for background images. So use `setBackground()` if you want to modify `android:backround`.","body":"Eurika!. I think I know the problem is. It is <code>setImageBitmap()</code>. To use it, you must use <code>android:src</code> in the xmls e.g. <code>android:src=&quot;@drawable&#47;android&quot;</code> and use <code>setBackground()</code> if you&#39;re using <code>android:background</code>  e.g. <code>android:background=&quot;@drawable&#47;android&quot;</code>. <code>android:src</code> for foreground images and <code>android:background</code> for background images. So use <code>setBackground()</code> if you want to modify <code>android:backround</code>."},{"owner":{"account_id":1906124,"reputation":2368,"user_id":1720972,"accept_rate":98,"display_name":"KernelPanic"},"score":0,"creation_date":1665127043,"post_id":73774321,"comment_id":130630925,"body_markdown":"@Darkman, I&#39;ve tried you previous ideas, updated question, however for me, nothing works! I am getting desperate ...","body":"@Darkman, I&#39;ve tried you previous ideas, updated question, however for me, nothing works! I am getting desperate ..."}],"answers":[{"tags":[],"owner":{"account_id":1906124,"reputation":2368,"user_id":1720972,"accept_rate":98,"display_name":"KernelPanic"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677062508,"creation_date":1677062508,"answer_id":75531546,"question_id":73774321,"body_markdown":"There was a problem with `Fragment`s transitions, I&#39;ve rewritten transition code using [Navigation Component][1].\r\n\r\n\r\n  [1]: https://developer.android.com/guide/navigation/navigation-getting-started","title":"ImageButton image not shown/updated at runtime after fragment transition","body":"<p>There was a problem with <code>Fragment</code>s transitions, I've rewritten transition code using <a href=\"https://developer.android.com/guide/navigation/navigation-getting-started\" rel=\"nofollow noreferrer\">Navigation Component</a>.</p>\n"}],"owner":{"account_id":1906124,"reputation":2368,"user_id":1720972,"accept_rate":98,"display_name":"KernelPanic"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":147,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75531546,"answer_count":1,"score":1,"last_activity_date":1677062508,"creation_date":1663594804,"question_id":73774321,"body_markdown":"I am working on some [Android app][1] with single [Activity][2], named `MainActivity` and several [Fragments][3]. Now, through application usage at some point the application fetches images from target device local storage and shows them for selection in `PhotoPickerFragment`, like shown in following screenshot:\r\n[![Image selection fragment][4]][4]\r\n  `PhotoPickerFragment` also has its `PhotoPickerAdapter` for showing contents in [GridView][5]. To transfer selected image between `Fragments` I have written following chunk of code inside [`PhotoPickerAdapter`&#39;s ArrayAdapter getView() method][6] :\r\n\r\n    public View getView(int position,\r\n        @Nullable View convertView,\r\n        @NonNull ViewGroup parent)\r\n    {\r\n        PhotoPickerRecord photoPickerRecord=getItem(position);\r\n    \r\n        if(convertView==null)\r\n        {\r\n            LayoutInflater inflater=(LayoutInflater)parent.getContext().\r\n                getSystemService(Context.LAYOUT_INFLATER_SERVICE);\r\n    \r\n            convertView=inflater.inflate(R.layout.layout_photo_picker_delegate,\r\n                parent,\r\n                false);\r\n        }\r\n    \r\n        ImageView ivPhotoPickerDelegate=convertView.findViewById(R.id.ivPhotoPickerDelegate);\r\n    \r\n        ivPhotoPickerDelegate.setImageBitmap(photoPickerRecord.scaledPhoto);\r\n        ivPhotoPickerDelegate.setOnClickListener(v-&gt;\r\n        {\r\n            MainActivity mainActivity=(MainActivity)getContext();\r\n            NewPlantFragment newPlantFragment=(NewPlantFragment)mainActivity.getNewPlantFragment();\r\n            Bundle selectedRecordBundle=new Bundle();\r\n            ByteArrayOutputStream selectedPhotoStream=new ByteArrayOutputStream();\r\n            String encodedSelectedPhoto=new String();\r\n    \r\n            selectedRecordBundle.putString(BundleKeys.SELECTED_PHOTO_URI_KEY,\r\n                photoPickerRecord.uri.toString());\r\n    \r\n            photoPickerRecord.scaledPhoto.compress(Bitmap.CompressFormat.PNG,\r\n                100,\r\n                selectedPhotoStream);\r\n            encodedSelectedPhoto=Base64.encodeToString(selectedPhotoStream.toByteArray(),\r\n                Base64.DEFAULT);\r\n    \r\n            selectedRecordBundle.putString(BundleKeys.SELECTED_PHOTO_THUMBNAIL_KEY,\r\n                encodedSelectedPhoto);\r\n            newPlantFragment.setArguments(selectedRecordBundle);\r\n            mainActivity.switchToScreen(newPlantFragment);\r\n        });\r\n    \r\n        return convertView;\r\n    }\r\n\r\nSelected image is, as you can see, packed into [Bundle][7] and then `Fragment` switch (from `PhotoPickerFragment` to `NewPlantFragment`) occurs. Target `NewPlantFragment` has declared target [ImageButton][8] in it (red background is for test purposes only, will be removed):\r\n\r\n&lt;ImageButton\r\n    android:id=&quot;@+id/ibPhoto&quot;\r\n    android:layout_width=&quot;256dp&quot;\r\n    android:layout_height=&quot;256dp&quot;\r\n    android:background=&quot;@color/red&quot;\r\n    android:contentDescription=&quot;@string/plant_photo&quot;\r\n    android:scaleType=&quot;fitCenter&quot;\r\n    android:visibility=&quot;visible&quot;\r\n    tools:src=&quot;@tools:sample/backgrounds/scenic[11]&quot; /&gt;\r\n\r\nas you can also see from screenshot:\r\n[![Android Studio `ImageButton` declaration screenshot][9]][9]\r\n  Now, after fragment switcing, [NewPlantFragment.OnResume() is called][3]:\r\n\r\n    @Override\r\n    public void onResume()\r\n    {\r\n        super.onResume();\r\n    \r\n        this.updatePlantPhoto(this.getArguments());\r\n    }\r\n\r\nand them we apply transfered image to `ibPhoto` `ImageButton` in `updatePlantPhoto` method:\r\n\r\n    private void updatePlantPhoto(Bundle plantPhotoInfoBundle)\r\n    {\r\n        if((plantPhotoInfoBundle!=null)&amp;&amp;\r\n           (plantPhotoInfoBundle.size()&gt;0))\r\n        {\r\n            if(plantPhotoInfoBundle.containsKey(BundleKeys.SELECTED_PHOTO_URI_KEY)&amp;&amp;\r\n                    (plantPhotoInfoBundle.containsKey(BundleKeys.SELECTED_PHOTO_THUMBNAIL_KEY)))\r\n            {\r\n                byte[] selectedPlantPhotoByteArray=Base64.decode(plantPhotoInfoBundle.getString(BundleKeys.SELECTED_PHOTO_THUMBNAIL_KEY),\r\n                        Base64.DEFAULT);\r\n                Bitmap reconstructedSelectedPlantPhoto=BitmapFactory.decodeByteArray(selectedPlantPhotoByteArray,\r\n                        0,\r\n                        selectedPlantPhotoByteArray.length);\r\n    \r\n                this.imgBtnPhoto.setImageBitmap(reconstructedSelectedPlantPhoto);\r\n    \r\n                plantPhotoInfoBundle.clear();\r\n                this.setArguments(plantPhotoInfoBundle);\r\n            }\r\n        }\r\n    }\r\nHowever, the `ibPhoto` `ImageButton` is not updated, there is still red rectangle with no image visible as you can se from screenshot:\r\n[![Image not updated screenshot][10]][10]\r\nNow, I&#39;ve been trying to debug this problem and in debug process, I can see the selected image is decoded correctly with help of `Android Studio`, I can see decoded Image inside debugger. Why the `ImageButton`&#39;s image is not updated?\r\n\r\n**UPDATE 1**\r\n\r\nOn request on @JornRigter, I am sending screenshot of debug situation with breakpoint:\r\n[![Debug situation][11]][11]\r\nAs you can see, selected image is decoded.\r\n\r\n**UPDATE 2**\r\n\r\nI have moved all image processing and images loading to [AsyncTask][12]&#39;s and therefore introduced `PhotoDecoder` and `PhotoEncoder`:\r\n\r\n    package com.mikroelektronika.guestnotificationsystem.PhotoPicker;\r\n    \r\n    import android.graphics.Bitmap;\r\n    import android.graphics.BitmapFactory;\r\n    import android.os.AsyncTask;\r\n    import android.util.Base64;\r\n    \r\n    public class PhotoDecoder extends AsyncTask&lt;String, Void, Bitmap&gt;\r\n    {\r\n        private static final String TAG=PhotoDecoder.class.getSimpleName();\r\n    \r\n        public PhotoDecoder()\r\n        {\r\n            super();\r\n        }\r\n    \r\n        @Override\r\n        protected Bitmap doInBackground(String... selectedImages)\r\n        {\r\n            byte[] selectedImageByteArray=Base64.decode(selectedImages[0],\r\n                Base64.DEFAULT);\r\n            Bitmap reconstructedImage=BitmapFactory.decodeByteArray(selectedImageByteArray,\r\n                0,\r\n                selectedImageByteArray.length);\r\n    \r\n            return reconstructedImage;\r\n        }\r\n    \r\n        @Override\r\n        protected void onPostExecute(Bitmap reconstructedImage)\r\n        {\r\n            super.onPostExecute(reconstructedImage);\r\n        }\r\n    }\r\n\r\nand\r\n\r\n    package com.mikroelektronika.guestnotificationsystem.PhotoPicker;\r\n    \r\n    import android.graphics.Bitmap;\r\n    import android.os.AsyncTask;\r\n    import android.util.Base64;\r\n    \r\n    import java.io.ByteArrayOutputStream;\r\n    \r\n    public class PhotoEncoder extends AsyncTask&lt;PhotoPickerRecord, Void, String&gt;\r\n    {\r\n        private static final String TAG=PhotoEncoder.class.getSimpleName();\r\n    \r\n        public PhotoEncoder()\r\n        {\r\n            super();\r\n        }\r\n    \r\n        @Override\r\n        protected String doInBackground(PhotoPickerRecord... photoPickerRecords)\r\n        {\r\n            ByteArrayOutputStream selectedPhotoStream=new ByteArrayOutputStream();\r\n    \r\n            photoPickerRecords[0].scaledPhoto.compress(Bitmap.CompressFormat.PNG,\r\n                100,\r\n                selectedPhotoStream);\r\n    \r\n            return Base64.encodeToString(selectedPhotoStream.toByteArray(),\r\n                Base64.DEFAULT);\r\n        }\r\n    \r\n        @Override\r\n        protected void onPostExecute(String finalImage)\r\n        {\r\n            super.onPostExecute(finalImage);\r\n        }\r\n    }\r\nand I&#39;ve triple checked with debugger, they both work fine. I&#39;ve also moved images loading into `PhotoPickerAdapter` into `AsyncTask`, so GUI is not blocked anymore and I can show `ProgressFragment`, but this is not the topic right now:\r\n\r\n    public void populateAdapter()\r\n    {\r\n        PhotosLoadingFragment photosLoadingFragment=PhotosLoadingFragment.newInstance();\r\n    \r\n        class PhotoLoader extends AsyncTask&lt;Void, Void, ArrayList&lt;PhotoPickerRecord&gt;&gt;\r\n        {\r\n            private final String TAG=PhotoLoader.class.getSimpleName();\r\n    \r\n            private final String CAMERA_IMAGE_BUCKET_NAME=Environment.\r\n                getExternalStorageDirectory().\r\n                getPath()+\r\n                &quot;/DCIM/Camera&quot;;\r\n            private final String CAMERA_IMAGE_BUCKET_ID=\r\n                getBucketId(CAMERA_IMAGE_BUCKET_NAME);\r\n    \r\n            @Override\r\n            protected ArrayList&lt;PhotoPickerRecord&gt; doInBackground(Void... voids)\r\n            {\r\n                ArrayList&lt;PhotoPickerRecord&gt; imagesDataSource=new ArrayList&lt;&gt;();\r\n                final String[] projection=\r\n                    {\r\n                        MediaStore.Images.Media.DATA\r\n                    };\r\n                final String selection=MediaStore.Images.Media.BUCKET_ID+&quot;=?&quot;;\r\n                final String[] selectionArgs=\r\n                    {\r\n                        CAMERA_IMAGE_BUCKET_ID\r\n                    };\r\n                final Cursor cursor=getContext().\r\n                    getContentResolver().\r\n                    query(MediaStore.Images.Media.EXTERNAL_CONTENT_URI,\r\n                    projection,\r\n                    selection,\r\n                    selectionArgs,\r\n                    null);\r\n    \r\n                if(cursor.moveToFirst())\r\n                {\r\n                    final int dataColumn=cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);\r\n    \r\n                    do\r\n                    {\r\n                        final String data=cursor.getString(dataColumn);\r\n                        PhotoPickerRecord photoPickerRecord=new PhotoPickerRecord();\r\n    \r\n                        photoPickerRecord.uri=Uri.parse(data);\r\n                        photoPickerRecord.scaledPhoto=ThumbnailUtils.extractThumbnail(BitmapFactory.decodeFile(photoPickerRecord.uri.getPath()),\r\n                            256,\r\n                            256);\r\n    \r\n                        imagesDataSource.add(photoPickerRecord);\r\n                    } while(cursor.moveToNext());\r\n                }\r\n    \r\n                cursor.close();\r\n    \r\n                return imagesDataSource;\r\n            }\r\n    \r\n            @Override\r\n            protected void onPreExecute()\r\n            {\r\n                photosLoadingFragment.show(parentFragmentManager,\r\n                    null);\r\n            }\r\n    \r\n            @Override\r\n            protected void onPostExecute(ArrayList&lt;PhotoPickerRecord&gt; imagesDataSource)\r\n            {\r\n                clear();\r\n                addAll(imagesDataSource);\r\n                photosLoadingFragment.dismiss();\r\n            }\r\n    \r\n            @NonNull\r\n            private String getBucketId(@NonNull final String path)\r\n            {\r\n                return String.valueOf(path.toLowerCase().hashCode());\r\n            }\r\n        }\r\n    \r\n        new PhotoLoader().execute();\r\n    }\r\nNow, after `Fragment` transition in target&#39;s fragment [onResume][13], the target [ImageButton][8]&#39;s image is changed with method `updatePlantPhoto()`:\r\n\r\n    private void updatePlantPhoto(Bundle plantPhotoInfoBundle) throws Exception\r\n    {\r\n        if((plantPhotoInfoBundle!=null)&amp;&amp;\r\n           (plantPhotoInfoBundle.size()&gt;0))\r\n        {\r\n            if(plantPhotoInfoBundle.containsKey(BundleKeys.SELECTED_PHOTO_THUMBNAIL_KEY))\r\n            {\r\n                this.imgBtnPhoto.setImageBitmap(new PhotoDecoder().\r\n                    execute(plantPhotoInfoBundle.getString(BundleKeys.SELECTED_PHOTO_THUMBNAIL_KEY)).\r\n                    get());\r\n    \r\n                plantPhotoInfoBundle.clear();\r\n                this.setArguments(plantPhotoInfoBundle);\r\n            }\r\n        }\r\n    }\r\nI&#39;ve also triple checked `Fragment`&#39;s arguments and the image indeed is contained in [Fragment&#39;s Bundle][7]. Here is also target&#39;s `Fragment` `onResume()` method:\r\n\r\n    @Override\r\n    public void onResume()\r\n    {\r\n        super.onResume();\r\n    \r\n        try\r\n        {\r\n            this.updatePlantPhoto(this.getArguments());\r\n        }\r\n        catch(Exception e)\r\n        {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\nand `ImageButton`&#39;s is still not changed. WHY?!?!?!?!\r\n  \r\n**UPDATE 3**\r\n\r\nAccording to @Darkman hint, I&#39;ve checked the selected image - it is ok. After all background tasks, the selected image arrives into target `Fragment` via [Bundle][7] and is seen and ok in debugger, as you can see from screenshot:\r\n[![Debugger breakpoint of checking the selected image][14]][14]\r\n  \r\n**UPDATE 4**  \r\nI have also checked selecting following image types:\r\n\r\n - [BMP][15]\r\n - [JPG][16]\r\n - [GIF][17]\r\n - [HEIC][18]  \r\n\r\nNone of them works, selected image still not shown.  \r\n\r\n**UPDATE 5**  \r\nAccording to @Darkman hint, here are conclusions:\r\n\r\n - `updatePlantPhoto()` gets called 2 times\r\n - `onResume()` gets called 2 times also  \r\n\r\nwhich is ok. I&#39;ve uploaded some small `32x32` and `64x64` icons to phone and when I select each of them, the selected image is still not shown. How to check refresh?  \r\n**UPDATE 6**  \r\nOnce again according to user @Darkman&#39;s hint, I&#39;ve tried:\r\n\r\n - [SetBackground()][19]\r\n - [SetForeground()][20]  \r\n\r\nwith following code:\r\n\r\n    private void updatePlantPhoto(Bundle plantPhotoInfoBundle) throws Exception\r\n    {\r\n        Bitmap selectedPhoto=null;\r\n        BitmapDrawable selectedPhotoDrawable=null;\r\n    \r\n        if((plantPhotoInfoBundle!=null)&amp;&amp;\r\n           (plantPhotoInfoBundle.size()&gt;0))\r\n        {\r\n            if(plantPhotoInfoBundle.containsKey(BundleKeys.SELECTED_PHOTO_THUMBNAIL_KEY))\r\n            {\r\n                try\r\n                {\r\n                    selectedPhoto=new PhotoDecoder().execute(plantPhotoInfoBundle.getString(BundleKeys.SELECTED_PHOTO_THUMBNAIL_KEY))\r\n                        .get();\r\n                    selectedPhotoDrawable=new BitmapDrawable(getResources(),\r\n                        selectedPhoto);\r\n                }\r\n                catch(Exception e)\r\n                {\r\n                    e.printStackTrace();\r\n                }\r\n    \r\n                this.ibPhotoSelector.setForeground(selectedPhotoDrawable);\r\n    \r\n                plantPhotoInfoBundle.clear();\r\n                this.setArguments(plantPhotoInfoBundle);\r\n            }\r\n        }\r\n    }  \r\nAgain, in the debugger everyhing is ok. Nothing works!\r\n\r\n\r\n  [1]: https://developer.android.com/about\r\n  [2]: https://developer.android.com/reference/android/app/Activity\r\n  [3]: https://developer.android.com/reference/android/app/Fragment\r\n  [4]: https://i.stack.imgur.com/QlSOb.jpg\r\n  [5]: https://developer.android.com/reference/android/widget/GridView\r\n  [6]: https://developer.android.com/reference/android/widget/ArrayAdapter?hl=en#getView(int,%20android.view.View,%20android.view.ViewGroup)\r\n  [7]: https://developer.android.com/reference/android/os/Bundle\r\n  [8]: https://developer.android.com/reference/android/widget/ImageButton\r\n  [9]: https://i.stack.imgur.com/W9qhn.png\r\n  [10]: https://i.stack.imgur.com/clW04.jpg\r\n  [11]: https://i.stack.imgur.com/RkhJU.png\r\n  [12]: https://developer.android.com/reference/android/os/AsyncTask\r\n  [13]: https://developer.android.com/reference/android/app/Fragment#onResume()\r\n  [14]: https://i.stack.imgur.com/Ya6gA.png\r\n  [15]: https://en.wikipedia.org/wiki/BMP_file_format\r\n  [16]: https://en.wikipedia.org/wiki/JPEG\r\n  [17]: https://en.wikipedia.org/wiki/GIF\r\n  [18]: https://en.wikipedia.org/wiki/High_Efficiency_Image_File_Format#HEIC:_HEVC_in_HEIF\r\n  [19]: https://developer.android.com/reference/android/view/View#setBackground(android.graphics.drawable.Drawable)\r\n  [20]: https://developer.android.com/reference/android/view/View#setForeground(android.graphics.drawable.Drawable)","title":"ImageButton image not shown/updated at runtime after fragment transition","body":"<p>I am working on some <a href=\"https://developer.android.com/about\" rel=\"nofollow noreferrer\">Android app</a> with single <a href=\"https://developer.android.com/reference/android/app/Activity\" rel=\"nofollow noreferrer\">Activity</a>, named <code>MainActivity</code> and several <a href=\"https://developer.android.com/reference/android/app/Fragment\" rel=\"nofollow noreferrer\">Fragments</a>. Now, through application usage at some point the application fetches images from target device local storage and shows them for selection in <code>PhotoPickerFragment</code>, like shown in following screenshot:\n<a href=\"https://i.stack.imgur.com/QlSOb.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QlSOb.jpg\" alt=\"Image selection fragment\" /></a>\n<code>PhotoPickerFragment</code> also has its <code>PhotoPickerAdapter</code> for showing contents in <a href=\"https://developer.android.com/reference/android/widget/GridView\" rel=\"nofollow noreferrer\">GridView</a>. To transfer selected image between <code>Fragments</code> I have written following chunk of code inside <a href=\"https://developer.android.com/reference/android/widget/ArrayAdapter?hl=en#getView(int,%20android.view.View,%20android.view.ViewGroup)\" rel=\"nofollow noreferrer\"><code>PhotoPickerAdapter</code>'s ArrayAdapter getView() method</a> :</p>\n<pre><code>public View getView(int position,\n    @Nullable View convertView,\n    @NonNull ViewGroup parent)\n{\n    PhotoPickerRecord photoPickerRecord=getItem(position);\n\n    if(convertView==null)\n    {\n        LayoutInflater inflater=(LayoutInflater)parent.getContext().\n            getSystemService(Context.LAYOUT_INFLATER_SERVICE);\n\n        convertView=inflater.inflate(R.layout.layout_photo_picker_delegate,\n            parent,\n            false);\n    }\n\n    ImageView ivPhotoPickerDelegate=convertView.findViewById(R.id.ivPhotoPickerDelegate);\n\n    ivPhotoPickerDelegate.setImageBitmap(photoPickerRecord.scaledPhoto);\n    ivPhotoPickerDelegate.setOnClickListener(v-&gt;\n    {\n        MainActivity mainActivity=(MainActivity)getContext();\n        NewPlantFragment newPlantFragment=(NewPlantFragment)mainActivity.getNewPlantFragment();\n        Bundle selectedRecordBundle=new Bundle();\n        ByteArrayOutputStream selectedPhotoStream=new ByteArrayOutputStream();\n        String encodedSelectedPhoto=new String();\n\n        selectedRecordBundle.putString(BundleKeys.SELECTED_PHOTO_URI_KEY,\n            photoPickerRecord.uri.toString());\n\n        photoPickerRecord.scaledPhoto.compress(Bitmap.CompressFormat.PNG,\n            100,\n            selectedPhotoStream);\n        encodedSelectedPhoto=Base64.encodeToString(selectedPhotoStream.toByteArray(),\n            Base64.DEFAULT);\n\n        selectedRecordBundle.putString(BundleKeys.SELECTED_PHOTO_THUMBNAIL_KEY,\n            encodedSelectedPhoto);\n        newPlantFragment.setArguments(selectedRecordBundle);\n        mainActivity.switchToScreen(newPlantFragment);\n    });\n\n    return convertView;\n}\n</code></pre>\n<p>Selected image is, as you can see, packed into <a href=\"https://developer.android.com/reference/android/os/Bundle\" rel=\"nofollow noreferrer\">Bundle</a> and then <code>Fragment</code> switch (from <code>PhotoPickerFragment</code> to <code>NewPlantFragment</code>) occurs. Target <code>NewPlantFragment</code> has declared target <a href=\"https://developer.android.com/reference/android/widget/ImageButton\" rel=\"nofollow noreferrer\">ImageButton</a> in it (red background is for test purposes only, will be removed):</p>\n<p></p>\n<p>as you can also see from screenshot:\n<a href=\"https://i.stack.imgur.com/W9qhn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/W9qhn.png\" alt=\"Android Studio ImageButton declaration screenshot\" /></a>\nNow, after fragment switcing, <a href=\"https://developer.android.com/reference/android/app/Fragment\" rel=\"nofollow noreferrer\">NewPlantFragment.OnResume() is called</a>:</p>\n<pre><code>@Override\npublic void onResume()\n{\n    super.onResume();\n\n    this.updatePlantPhoto(this.getArguments());\n}\n</code></pre>\n<p>and them we apply transfered image to <code>ibPhoto</code> <code>ImageButton</code> in <code>updatePlantPhoto</code> method:</p>\n<pre><code>private void updatePlantPhoto(Bundle plantPhotoInfoBundle)\n{\n    if((plantPhotoInfoBundle!=null)&amp;&amp;\n       (plantPhotoInfoBundle.size()&gt;0))\n    {\n        if(plantPhotoInfoBundle.containsKey(BundleKeys.SELECTED_PHOTO_URI_KEY)&amp;&amp;\n                (plantPhotoInfoBundle.containsKey(BundleKeys.SELECTED_PHOTO_THUMBNAIL_KEY)))\n        {\n            byte[] selectedPlantPhotoByteArray=Base64.decode(plantPhotoInfoBundle.getString(BundleKeys.SELECTED_PHOTO_THUMBNAIL_KEY),\n                    Base64.DEFAULT);\n            Bitmap reconstructedSelectedPlantPhoto=BitmapFactory.decodeByteArray(selectedPlantPhotoByteArray,\n                    0,\n                    selectedPlantPhotoByteArray.length);\n\n            this.imgBtnPhoto.setImageBitmap(reconstructedSelectedPlantPhoto);\n\n            plantPhotoInfoBundle.clear();\n            this.setArguments(plantPhotoInfoBundle);\n        }\n    }\n}\n</code></pre>\n<p>However, the <code>ibPhoto</code> <code>ImageButton</code> is not updated, there is still red rectangle with no image visible as you can se from screenshot:\n<a href=\"https://i.stack.imgur.com/clW04.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/clW04.jpg\" alt=\"Image not updated screenshot\" /></a>\nNow, I've been trying to debug this problem and in debug process, I can see the selected image is decoded correctly with help of <code>Android Studio</code>, I can see decoded Image inside debugger. Why the <code>ImageButton</code>'s image is not updated?</p>\n<p><strong>UPDATE 1</strong></p>\n<p>On request on @JornRigter, I am sending screenshot of debug situation with breakpoint:\n<a href=\"https://i.stack.imgur.com/RkhJU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RkhJU.png\" alt=\"Debug situation\" /></a>\nAs you can see, selected image is decoded.</p>\n<p><strong>UPDATE 2</strong></p>\n<p>I have moved all image processing and images loading to <a href=\"https://developer.android.com/reference/android/os/AsyncTask\" rel=\"nofollow noreferrer\">AsyncTask</a>'s and therefore introduced <code>PhotoDecoder</code> and <code>PhotoEncoder</code>:</p>\n<pre><code>package com.mikroelektronika.guestnotificationsystem.PhotoPicker;\n\nimport android.graphics.Bitmap;\nimport android.graphics.BitmapFactory;\nimport android.os.AsyncTask;\nimport android.util.Base64;\n\npublic class PhotoDecoder extends AsyncTask&lt;String, Void, Bitmap&gt;\n{\n    private static final String TAG=PhotoDecoder.class.getSimpleName();\n\n    public PhotoDecoder()\n    {\n        super();\n    }\n\n    @Override\n    protected Bitmap doInBackground(String... selectedImages)\n    {\n        byte[] selectedImageByteArray=Base64.decode(selectedImages[0],\n            Base64.DEFAULT);\n        Bitmap reconstructedImage=BitmapFactory.decodeByteArray(selectedImageByteArray,\n            0,\n            selectedImageByteArray.length);\n\n        return reconstructedImage;\n    }\n\n    @Override\n    protected void onPostExecute(Bitmap reconstructedImage)\n    {\n        super.onPostExecute(reconstructedImage);\n    }\n}\n</code></pre>\n<p>and</p>\n<pre><code>package com.mikroelektronika.guestnotificationsystem.PhotoPicker;\n\nimport android.graphics.Bitmap;\nimport android.os.AsyncTask;\nimport android.util.Base64;\n\nimport java.io.ByteArrayOutputStream;\n\npublic class PhotoEncoder extends AsyncTask&lt;PhotoPickerRecord, Void, String&gt;\n{\n    private static final String TAG=PhotoEncoder.class.getSimpleName();\n\n    public PhotoEncoder()\n    {\n        super();\n    }\n\n    @Override\n    protected String doInBackground(PhotoPickerRecord... photoPickerRecords)\n    {\n        ByteArrayOutputStream selectedPhotoStream=new ByteArrayOutputStream();\n\n        photoPickerRecords[0].scaledPhoto.compress(Bitmap.CompressFormat.PNG,\n            100,\n            selectedPhotoStream);\n\n        return Base64.encodeToString(selectedPhotoStream.toByteArray(),\n            Base64.DEFAULT);\n    }\n\n    @Override\n    protected void onPostExecute(String finalImage)\n    {\n        super.onPostExecute(finalImage);\n    }\n}\n</code></pre>\n<p>and I've triple checked with debugger, they both work fine. I've also moved images loading into <code>PhotoPickerAdapter</code> into <code>AsyncTask</code>, so GUI is not blocked anymore and I can show <code>ProgressFragment</code>, but this is not the topic right now:</p>\n<pre><code>public void populateAdapter()\n{\n    PhotosLoadingFragment photosLoadingFragment=PhotosLoadingFragment.newInstance();\n\n    class PhotoLoader extends AsyncTask&lt;Void, Void, ArrayList&lt;PhotoPickerRecord&gt;&gt;\n    {\n        private final String TAG=PhotoLoader.class.getSimpleName();\n\n        private final String CAMERA_IMAGE_BUCKET_NAME=Environment.\n            getExternalStorageDirectory().\n            getPath()+\n            &quot;/DCIM/Camera&quot;;\n        private final String CAMERA_IMAGE_BUCKET_ID=\n            getBucketId(CAMERA_IMAGE_BUCKET_NAME);\n\n        @Override\n        protected ArrayList&lt;PhotoPickerRecord&gt; doInBackground(Void... voids)\n        {\n            ArrayList&lt;PhotoPickerRecord&gt; imagesDataSource=new ArrayList&lt;&gt;();\n            final String[] projection=\n                {\n                    MediaStore.Images.Media.DATA\n                };\n            final String selection=MediaStore.Images.Media.BUCKET_ID+&quot;=?&quot;;\n            final String[] selectionArgs=\n                {\n                    CAMERA_IMAGE_BUCKET_ID\n                };\n            final Cursor cursor=getContext().\n                getContentResolver().\n                query(MediaStore.Images.Media.EXTERNAL_CONTENT_URI,\n                projection,\n                selection,\n                selectionArgs,\n                null);\n\n            if(cursor.moveToFirst())\n            {\n                final int dataColumn=cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);\n\n                do\n                {\n                    final String data=cursor.getString(dataColumn);\n                    PhotoPickerRecord photoPickerRecord=new PhotoPickerRecord();\n\n                    photoPickerRecord.uri=Uri.parse(data);\n                    photoPickerRecord.scaledPhoto=ThumbnailUtils.extractThumbnail(BitmapFactory.decodeFile(photoPickerRecord.uri.getPath()),\n                        256,\n                        256);\n\n                    imagesDataSource.add(photoPickerRecord);\n                } while(cursor.moveToNext());\n            }\n\n            cursor.close();\n\n            return imagesDataSource;\n        }\n\n        @Override\n        protected void onPreExecute()\n        {\n            photosLoadingFragment.show(parentFragmentManager,\n                null);\n        }\n\n        @Override\n        protected void onPostExecute(ArrayList&lt;PhotoPickerRecord&gt; imagesDataSource)\n        {\n            clear();\n            addAll(imagesDataSource);\n            photosLoadingFragment.dismiss();\n        }\n\n        @NonNull\n        private String getBucketId(@NonNull final String path)\n        {\n            return String.valueOf(path.toLowerCase().hashCode());\n        }\n    }\n\n    new PhotoLoader().execute();\n}\n</code></pre>\n<p>Now, after <code>Fragment</code> transition in target's fragment <a href=\"https://developer.android.com/reference/android/app/Fragment#onResume()\" rel=\"nofollow noreferrer\">onResume</a>, the target <a href=\"https://developer.android.com/reference/android/widget/ImageButton\" rel=\"nofollow noreferrer\">ImageButton</a>'s image is changed with method <code>updatePlantPhoto()</code>:</p>\n<pre><code>private void updatePlantPhoto(Bundle plantPhotoInfoBundle) throws Exception\n{\n    if((plantPhotoInfoBundle!=null)&amp;&amp;\n       (plantPhotoInfoBundle.size()&gt;0))\n    {\n        if(plantPhotoInfoBundle.containsKey(BundleKeys.SELECTED_PHOTO_THUMBNAIL_KEY))\n        {\n            this.imgBtnPhoto.setImageBitmap(new PhotoDecoder().\n                execute(plantPhotoInfoBundle.getString(BundleKeys.SELECTED_PHOTO_THUMBNAIL_KEY)).\n                get());\n\n            plantPhotoInfoBundle.clear();\n            this.setArguments(plantPhotoInfoBundle);\n        }\n    }\n}\n</code></pre>\n<p>I've also triple checked <code>Fragment</code>'s arguments and the image indeed is contained in <a href=\"https://developer.android.com/reference/android/os/Bundle\" rel=\"nofollow noreferrer\">Fragment's Bundle</a>. Here is also target's <code>Fragment</code> <code>onResume()</code> method:</p>\n<pre><code>@Override\npublic void onResume()\n{\n    super.onResume();\n\n    try\n    {\n        this.updatePlantPhoto(this.getArguments());\n    }\n    catch(Exception e)\n    {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n<p>and <code>ImageButton</code>'s is still not changed. WHY?!?!?!?!</p>\n<p><strong>UPDATE 3</strong></p>\n<p>According to @Darkman hint, I've checked the selected image - it is ok. After all background tasks, the selected image arrives into target <code>Fragment</code> via <a href=\"https://developer.android.com/reference/android/os/Bundle\" rel=\"nofollow noreferrer\">Bundle</a> and is seen and ok in debugger, as you can see from screenshot:\n<a href=\"https://i.stack.imgur.com/Ya6gA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ya6gA.png\" alt=\"Debugger breakpoint of checking the selected image\" /></a></p>\n<p><strong>UPDATE 4</strong><br />\nI have also checked selecting following image types:</p>\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/BMP_file_format\" rel=\"nofollow noreferrer\">BMP</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/JPEG\" rel=\"nofollow noreferrer\">JPG</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/GIF\" rel=\"nofollow noreferrer\">GIF</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/High_Efficiency_Image_File_Format#HEIC:_HEVC_in_HEIF\" rel=\"nofollow noreferrer\">HEIC</a></li>\n</ul>\n<p>None of them works, selected image still not shown.</p>\n<p><strong>UPDATE 5</strong><br />\nAccording to @Darkman hint, here are conclusions:</p>\n<ul>\n<li><code>updatePlantPhoto()</code> gets called 2 times</li>\n<li><code>onResume()</code> gets called 2 times also</li>\n</ul>\n<p>which is ok. I've uploaded some small <code>32x32</code> and <code>64x64</code> icons to phone and when I select each of them, the selected image is still not shown. How to check refresh?<br />\n<strong>UPDATE 6</strong><br />\nOnce again according to user @Darkman's hint, I've tried:</p>\n<ul>\n<li><a href=\"https://developer.android.com/reference/android/view/View#setBackground(android.graphics.drawable.Drawable)\" rel=\"nofollow noreferrer\">SetBackground()</a></li>\n<li><a href=\"https://developer.android.com/reference/android/view/View#setForeground(android.graphics.drawable.Drawable)\" rel=\"nofollow noreferrer\">SetForeground()</a></li>\n</ul>\n<p>with following code:</p>\n<pre><code>private void updatePlantPhoto(Bundle plantPhotoInfoBundle) throws Exception\n{\n    Bitmap selectedPhoto=null;\n    BitmapDrawable selectedPhotoDrawable=null;\n\n    if((plantPhotoInfoBundle!=null)&amp;&amp;\n       (plantPhotoInfoBundle.size()&gt;0))\n    {\n        if(plantPhotoInfoBundle.containsKey(BundleKeys.SELECTED_PHOTO_THUMBNAIL_KEY))\n        {\n            try\n            {\n                selectedPhoto=new PhotoDecoder().execute(plantPhotoInfoBundle.getString(BundleKeys.SELECTED_PHOTO_THUMBNAIL_KEY))\n                    .get();\n                selectedPhotoDrawable=new BitmapDrawable(getResources(),\n                    selectedPhoto);\n            }\n            catch(Exception e)\n            {\n                e.printStackTrace();\n            }\n\n            this.ibPhotoSelector.setForeground(selectedPhotoDrawable);\n\n            plantPhotoInfoBundle.clear();\n            this.setArguments(plantPhotoInfoBundle);\n        }\n    }\n}  \n</code></pre>\n<p>Again, in the debugger everyhing is ok. Nothing works!</p>\n"},{"tags":["java","database","postgresql","eclipselink","java-websocket"],"comments":[{"owner":{"account_id":14008771,"reputation":243,"user_id":11947055,"display_name":"Rabban Keyak"},"score":0,"creation_date":1677051048,"post_id":75529152,"comment_id":133258743,"body_markdown":"Since you are decided to use capital letters in your table and/or column names, you should not forget to do quoting such tables/columns in your queries, and to write them in a query exactly like you named it (any letter in the name of table/column must be in same case as it was when you created the table/column).","body":"Since you are decided to use capital letters in your table and/or column names, you should not forget to do quoting such tables/columns in your queries, and to write them in a query exactly like you named it (any letter in the name of table/column must be in same case as it was when you created the table/column)."},{"owner":{"account_id":25889665,"reputation":60,"user_id":19617261,"display_name":"Peter Mulm"},"score":0,"creation_date":1677052699,"post_id":75529152,"comment_id":133259158,"body_markdown":"How should I quote the query?\nLike this: `String queryString = &quot;SELECT t FROM &#39;Translation&#39; t&quot;;`,\nthen this error comes up: **An exception occurred while creating a query in EntityManager: \nException Description: Problem compiling [SELECT t FROM &#39;Translation&#39; t]. \n[14, 27] The abstract schema type &#39;&#39;Translation&#39;&#39; is unknown.**","body":"How should I quote the query? Like this: <code>String queryString = &quot;SELECT t FROM &#39;Translation&#39; t&quot;;</code>, then this error comes up: <b>An exception occurred while creating a query in EntityManager:  Exception Description: Problem compiling [SELECT t FROM &#39;Translation&#39; t].  [14, 27] The abstract schema type &#39;&#39;Translation&#39;&#39; is unknown.</b>"},{"owner":{"account_id":25889665,"reputation":60,"user_id":19617261,"display_name":"Peter Mulm"},"score":0,"creation_date":1677052705,"post_id":75529152,"comment_id":133259160,"body_markdown":"Like this: `String queryString = &quot;SELECT t FROM \\&quot;Translation\\&quot; t&quot;;`,\nthen this error comes up: **An exception occurred while creating a query in EntityManager: \nException Description: Problem compiling [SELECT t FROM &quot;Translation&quot; t]. \n[14, 27] The abstract schema type &#39;&quot;Translation&quot;&#39; is unknown.**","body":"Like this: <code>String queryString = &quot;SELECT t FROM \\&quot;Translation\\&quot; t&quot;;</code>, then this error comes up: <b>An exception occurred while creating a query in EntityManager:  Exception Description: Problem compiling [SELECT t FROM &quot;Translation&quot; t].  [14, 27] The abstract schema type &#39;&quot;Translation&quot;&#39; is unknown.</b>"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1677081616,"post_id":75529152,"comment_id":133267972,"body_markdown":"You seem to be attempting an SQL query that is incomplete using api meant for JPQL (which is based on your entity object definitions, not the database table/columns). It should just be &quot;Select t from Translation t&quot; since you seem to have the query expecting fully formed Translation instances as the result. Use the Translation java entity property names in JPQL.","body":"You seem to be attempting an SQL query that is incomplete using api meant for JPQL (which is based on your entity object definitions, not the database table/columns). It should just be &quot;Select t from Translation t&quot; since you seem to have the query expecting fully formed Translation instances as the result. Use the Translation java entity property names in JPQL."},{"owner":{"account_id":25889665,"reputation":60,"user_id":19617261,"display_name":"Peter Mulm"},"score":1,"creation_date":1677593103,"post_id":75529152,"comment_id":133365656,"body_markdown":"@Chris PostgreSQL has a naming convention. Therefor it couldn&#39;t find the &quot;Translation&quot; table, because it should be &quot;translation&quot;.\n-&gt; https://stackoverflow.com/questions/2878248/postgresql-naming-conventions","body":"@Chris PostgreSQL has a naming convention. Therefor it couldn&#39;t find the &quot;Translation&quot; table, because it should be &quot;translation&quot;. -&gt; <a href=\"https://stackoverflow.com/questions/2878248/postgresql-naming-conventions\" title=\"postgresql naming conventions\">stackoverflow.com/questions/2878248/&hellip;</a>"},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1677597836,"post_id":75529152,"comment_id":133367295,"body_markdown":"Database are usually case insensitive by default, and so if your table is translation in Postgres, you can query using Translation or TRANSLATION without issues. The issue in your question above is that you were using &quot;SELECT ID FROM Translation t&quot; and passing that string to EntityManager.createQuery. CreateQuery accepts JPQL, which if you just wanted an ID value returned, would need to have been &quot;Select t.id from Translation t&quot;. You use table and column names in SQL, Java entity and property names in JPQL. You can use createNativeQuery(&quot;select ID from Translation&quot;) to execute SQL.","body":"Database are usually case insensitive by default, and so if your table is translation in Postgres, you can query using Translation or TRANSLATION without issues. The issue in your question above is that you were using &quot;SELECT ID FROM Translation t&quot; and passing that string to EntityManager.createQuery. CreateQuery accepts JPQL, which if you just wanted an ID value returned, would need to have been &quot;Select t.id from Translation t&quot;. You use table and column names in SQL, Java entity and property names in JPQL. You can use createNativeQuery(&quot;select ID from Translation&quot;) to execute SQL."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1677598051,"post_id":75529152,"comment_id":133367368,"body_markdown":"Otherwise, if you wanted translation instances back, you should be using em.createQuery(&quot;select t from Translation t&quot;).getResultList() as I suggested initially, or sql: em.createNativeQuery(&quot;select * from translation&quot;, Translation.class).getResultList() . JPQL is generally used as it matches the model you are getting back and allows the db to change underneath.","body":"Otherwise, if you wanted translation instances back, you should be using em.createQuery(&quot;select t from Translation t&quot;).getResultList() as I suggested initially, or sql: em.createNativeQuery(&quot;select * from translation&quot;, Translation.class).getResultList() . JPQL is generally used as it matches the model you are getting back and allows the db to change underneath."},{"owner":{"account_id":25889665,"reputation":60,"user_id":19617261,"display_name":"Peter Mulm"},"score":0,"creation_date":1677679492,"post_id":75529152,"comment_id":133385313,"body_markdown":"Yes the &quot;SELECT ID FROM Translation t&quot; query was was one big issue which I fixed immediatly after I realised what I wrote.","body":"Yes the &quot;SELECT ID FROM Translation t&quot; query was was one big issue which I fixed immediatly after I realised what I wrote."}],"answers":[{"comments":[{"owner":{"account_id":25889665,"reputation":60,"user_id":19617261,"display_name":"Peter Mulm"},"score":0,"creation_date":1677063212,"post_id":75531498,"comment_id":133261983,"body_markdown":"Thank you! Now I get the data from my database.","body":"Thank you! Now I get the data from my database."}],"tags":[],"owner":{"account_id":20688051,"reputation":18,"user_id":15190044,"display_name":"Mulmus Maximus"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677062258,"creation_date":1677062258,"answer_id":75531498,"question_id":75529152,"body_markdown":"First you have to map each variable to the specific column it refers to. So that EclipseLink knows where to put the data. The mapping describes your table composition. For example what‘s the ID (PK), what‘s a column, …\r\n\r\nAnd you can try to use the Query object.\r\nWith that you can use native queries.\r\nIn your case it is the jakarta.persitence.Query import.","title":"EclipseLink can&#39;t get the data from PostgreSQL","body":"<p>First you have to map each variable to the specific column it refers to. So that EclipseLink knows where to put the data. The mapping describes your table composition. For example what‘s the ID (PK), what‘s a column, …</p>\n<p>And you can try to use the Query object.\nWith that you can use native queries.\nIn your case it is the jakarta.persitence.Query import.</p>\n"}],"owner":{"account_id":25889665,"reputation":60,"user_id":19617261,"display_name":"Peter Mulm"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":75531498,"answer_count":1,"score":0,"last_activity_date":1677062258,"creation_date":1677048810,"question_id":75529152,"body_markdown":"this is my first stackoverflow question.\r\n\r\nI can&#39;t read out the data from my PostgreSQL table and I have tried different methods, but I couldn&#39;t get it to work. All my services are on the newest version available.\r\n\r\n\r\nMaybe you can find my problem:)\r\n\r\npersistence.xml\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;persistence version=&quot;3.0&quot; xmlns=&quot;http://xmlns.jcp.org/xml/ns/persistence&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/persistence http://xmlns.jcp.org/xml/ns/persistence/persistence_2_1.xsd&quot;&gt;\r\n    &lt;persistence-unit name=&quot;uebersetzungstool_PU&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt;\r\n        \r\n        &lt;provider&gt;org.eclipse.persistence.jpa.PersistenceProvider&lt;/provider&gt;\r\n        &lt;class&gt;com.mycompany.uebersetzungstool.entity.Translation&lt;/class&gt;\r\n        &lt;properties&gt;\r\n            &lt;property name=&quot;jakarta.persistence.jdbc.url&quot; value=&quot;jdbc:postgresql://localhost/mydatabase&quot;/&gt;\r\n            &lt;property name=&quot;jakarta.persistence.jdbc.driver&quot; value=&quot;org.postgresql.Driver&quot;/&gt;\r\n            &lt;property name=&quot;jakarta.persistence.jdbc.user&quot; value=&quot;myuser&quot;/&gt;\r\n            &lt;property name=&quot;jakarta.persistence.jdbc.password&quot; value=&quot;pwd&quot;/&gt;\r\n            &lt;property name=&quot;eclipselink.target-database&quot; value=&quot;PostgreSQL&quot;/&gt;\r\n        &lt;/properties&gt;\r\n    &lt;/persistence-unit&gt;\r\n&lt;/persistence&gt;\r\n```\r\n\r\nTranslation.java file:\r\n\r\n```\r\npackage com.mycompany.uebersetzungstool.entity;\r\n\r\nimport java.io.Serializable;\r\nimport jakarta.persistence.Entity;\r\nimport jakarta.persistence.GeneratedValue;\r\nimport jakarta.persistence.GenerationType;\r\nimport jakarta.persistence.Id;\r\nimport jakarta.persistence.Table;\r\n\r\n@Entity\r\n@Table(name=&quot;Translation&quot;)\r\npublic class Translation implements Serializable {\r\n    \r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private int id;\r\n    private String key;\r\n    private String value;\r\n    private String language;\r\n    private String project;\r\n    private String version;\r\n    private String comment;\r\n    private boolean translated;\r\n    private String create_ts;\r\n    private String create_user;\r\n    private String update_ts;\r\n    private String update_user;\r\n\r\n    \r\n    public Translation() {\r\n    }\r\n\r\n    public Translation(int id, String key, String value, String language, String project, String version, String comment, boolean translated, String create_ts, String create_user, String update_ts, String update_user) {\r\n        this.id = id;\r\n        this.key = key;\r\n        this.value = value;\r\n        this.language = language;\r\n        this.project = project;\r\n        this.version = version;\r\n        this.comment = comment;\r\n        this.translated = translated;\r\n        this.create_ts = create_ts;\r\n        this.create_user = create_user;\r\n        this.update_ts = update_ts;\r\n        this.update_user = update_user;\r\n    }\r\n    \r\n    \r\n    public int getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(int id) {\r\n        this.id = id;\r\n    }\r\n    \r\n    public String getKey() {\r\n        return key;\r\n    }\r\n\r\n    public void setKey(String key) {\r\n        this.key = key;\r\n    }\r\n\r\n    public String getValue() {\r\n        return value;\r\n    }\r\n\r\n    public void setValue(String value) {\r\n        this.value = value;\r\n    }\r\n\r\n    public String getLanguage() {\r\n        return language;\r\n    }\r\n\r\n    public void setLanguage(String language) {\r\n        this.language = language;\r\n    }\r\n\r\n    public String getProject() {\r\n        return project;\r\n    }\r\n\r\n    public void setProject(String project) {\r\n        this.project = project;\r\n    }\r\n\r\n    public String getVersion() {\r\n        return version;\r\n    }\r\n\r\n    public void setVersion(String version) {\r\n        this.version = version;\r\n    }\r\n\r\n    public String getComment() {\r\n        return comment;\r\n    }\r\n\r\n    public void setComment(String comment) {\r\n        this.comment = comment;\r\n    }\r\n\r\n    public boolean isTranslated() {\r\n        return translated;\r\n    }\r\n\r\n    public void setTranslated(boolean translated) {\r\n        this.translated = translated;\r\n    }\r\n\r\n    public String getCreate_ts() {\r\n        return create_ts;\r\n    }\r\n\r\n    public void setCreate_ts(String create_ts) {\r\n        this.create_ts = create_ts;\r\n    }\r\n\r\n    public String getCreate_user() {\r\n        return create_user;\r\n    }\r\n\r\n    public void setCreate_user(String create_user) {\r\n        this.create_user = create_user;\r\n    }\r\n\r\n    public String getUpdate_ts() {\r\n        return update_ts;\r\n    }\r\n\r\n    public void setUpdate_ts(String update_ts) {\r\n        this.update_ts = update_ts;\r\n    }\r\n\r\n    public String getUpdate_user() {\r\n        return update_user;\r\n    }\r\n\r\n    public void setUpdate_user(String update_user) {\r\n        this.update_user = update_user;\r\n    }\r\n            \r\n    \r\n}\r\n```\r\n\r\n&quot;test&quot; file:\r\n\r\n```\r\nimport com.mycompany.uebersetzungstool.entity.Translation;\r\nimport org.junit.jupiter.api.Test;\r\nimport jakarta.persistence.EntityManager;\r\nimport jakarta.persistence.EntityManagerFactory;\r\nimport jakarta.persistence.Persistence;\r\nimport java.util.List;\r\n\r\npublic class DatabaseConnectionTest {\r\n\r\n    @Test\r\n    public void connectionTest() {\r\n        try {\r\n            EntityManagerFactory emf = Persistence.createEntityManagerFactory(&quot;uebersetzungstool_PU&quot;);\r\n            EntityManager em = emf.createEntityManager();\r\n\r\n            List&lt;Translation&gt; translations = em.createQuery(&quot;SELECT ID FROM Translation t&quot;, Translation.class).getResultList();\r\n\r\n            for (Translation translation : translations) {\r\n                System.out.println(translation.getProject() + &quot; &quot; + translation.getVersion());\r\n\r\n            }\r\n        } catch (Exception e) {\r\n            System.out.println(e.getMessage());\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nResult of the JUnit test:\r\n\r\n```\r\nRunning DatabaseConnectionTest\r\n[EL Info]: 2023-02-21 15:16:33.412--ServerSession(1746570062)--EclipseLink, version: Eclipse Persistence Services - 4.0.0.v202210051929\r\nAn exception occurred while creating a query in EntityManager: \r\nException Description: Problem compiling [SELECT ID FROM Translation t]. \r\n[7, 9] The identification variable &#39;ID&#39; is not defined in the FROM clause.\r\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 2.157 s - in DatabaseConnectionTest\r\n\r\nResults:\r\n\r\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0\r\n\r\n------------------------------------------------------------------------\r\nBUILD SUCCESS\r\n------------------------------------------------------------------------\r\nTotal time:  8.294 s\r\nFinished at: 2023-02-21T15:16:34+01:00\r\n------------------------------------------------------------------------\r\n```\r\n\r\n\r\n\r\nI would like to be able to get the data from my database, maybe with a query call. It has the same variabales as in the Translation.java file.","title":"EclipseLink can&#39;t get the data from PostgreSQL","body":"<p>this is my first stackoverflow question.</p>\n<p>I can't read out the data from my PostgreSQL table and I have tried different methods, but I couldn't get it to work. All my services are on the newest version available.</p>\n<p>Maybe you can find my problem:)</p>\n<p>persistence.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;persistence version=&quot;3.0&quot; xmlns=&quot;http://xmlns.jcp.org/xml/ns/persistence&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/persistence http://xmlns.jcp.org/xml/ns/persistence/persistence_2_1.xsd&quot;&gt;\n    &lt;persistence-unit name=&quot;uebersetzungstool_PU&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt;\n        \n        &lt;provider&gt;org.eclipse.persistence.jpa.PersistenceProvider&lt;/provider&gt;\n        &lt;class&gt;com.mycompany.uebersetzungstool.entity.Translation&lt;/class&gt;\n        &lt;properties&gt;\n            &lt;property name=&quot;jakarta.persistence.jdbc.url&quot; value=&quot;jdbc:postgresql://localhost/mydatabase&quot;/&gt;\n            &lt;property name=&quot;jakarta.persistence.jdbc.driver&quot; value=&quot;org.postgresql.Driver&quot;/&gt;\n            &lt;property name=&quot;jakarta.persistence.jdbc.user&quot; value=&quot;myuser&quot;/&gt;\n            &lt;property name=&quot;jakarta.persistence.jdbc.password&quot; value=&quot;pwd&quot;/&gt;\n            &lt;property name=&quot;eclipselink.target-database&quot; value=&quot;PostgreSQL&quot;/&gt;\n        &lt;/properties&gt;\n    &lt;/persistence-unit&gt;\n&lt;/persistence&gt;\n</code></pre>\n<p>Translation.java file:</p>\n<pre><code>package com.mycompany.uebersetzungstool.entity;\n\nimport java.io.Serializable;\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.GenerationType;\nimport jakarta.persistence.Id;\nimport jakarta.persistence.Table;\n\n@Entity\n@Table(name=&quot;Translation&quot;)\npublic class Translation implements Serializable {\n    \n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private int id;\n    private String key;\n    private String value;\n    private String language;\n    private String project;\n    private String version;\n    private String comment;\n    private boolean translated;\n    private String create_ts;\n    private String create_user;\n    private String update_ts;\n    private String update_user;\n\n    \n    public Translation() {\n    }\n\n    public Translation(int id, String key, String value, String language, String project, String version, String comment, boolean translated, String create_ts, String create_user, String update_ts, String update_user) {\n        this.id = id;\n        this.key = key;\n        this.value = value;\n        this.language = language;\n        this.project = project;\n        this.version = version;\n        this.comment = comment;\n        this.translated = translated;\n        this.create_ts = create_ts;\n        this.create_user = create_user;\n        this.update_ts = update_ts;\n        this.update_user = update_user;\n    }\n    \n    \n    public int getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n    \n    public String getKey() {\n        return key;\n    }\n\n    public void setKey(String key) {\n        this.key = key;\n    }\n\n    public String getValue() {\n        return value;\n    }\n\n    public void setValue(String value) {\n        this.value = value;\n    }\n\n    public String getLanguage() {\n        return language;\n    }\n\n    public void setLanguage(String language) {\n        this.language = language;\n    }\n\n    public String getProject() {\n        return project;\n    }\n\n    public void setProject(String project) {\n        this.project = project;\n    }\n\n    public String getVersion() {\n        return version;\n    }\n\n    public void setVersion(String version) {\n        this.version = version;\n    }\n\n    public String getComment() {\n        return comment;\n    }\n\n    public void setComment(String comment) {\n        this.comment = comment;\n    }\n\n    public boolean isTranslated() {\n        return translated;\n    }\n\n    public void setTranslated(boolean translated) {\n        this.translated = translated;\n    }\n\n    public String getCreate_ts() {\n        return create_ts;\n    }\n\n    public void setCreate_ts(String create_ts) {\n        this.create_ts = create_ts;\n    }\n\n    public String getCreate_user() {\n        return create_user;\n    }\n\n    public void setCreate_user(String create_user) {\n        this.create_user = create_user;\n    }\n\n    public String getUpdate_ts() {\n        return update_ts;\n    }\n\n    public void setUpdate_ts(String update_ts) {\n        this.update_ts = update_ts;\n    }\n\n    public String getUpdate_user() {\n        return update_user;\n    }\n\n    public void setUpdate_user(String update_user) {\n        this.update_user = update_user;\n    }\n            \n    \n}\n</code></pre>\n<p>&quot;test&quot; file:</p>\n<pre><code>import com.mycompany.uebersetzungstool.entity.Translation;\nimport org.junit.jupiter.api.Test;\nimport jakarta.persistence.EntityManager;\nimport jakarta.persistence.EntityManagerFactory;\nimport jakarta.persistence.Persistence;\nimport java.util.List;\n\npublic class DatabaseConnectionTest {\n\n    @Test\n    public void connectionTest() {\n        try {\n            EntityManagerFactory emf = Persistence.createEntityManagerFactory(&quot;uebersetzungstool_PU&quot;);\n            EntityManager em = emf.createEntityManager();\n\n            List&lt;Translation&gt; translations = em.createQuery(&quot;SELECT ID FROM Translation t&quot;, Translation.class).getResultList();\n\n            for (Translation translation : translations) {\n                System.out.println(translation.getProject() + &quot; &quot; + translation.getVersion());\n\n            }\n        } catch (Exception e) {\n            System.out.println(e.getMessage());\n        }\n    }\n}\n</code></pre>\n<p>Result of the JUnit test:</p>\n<pre><code>Running DatabaseConnectionTest\n[EL Info]: 2023-02-21 15:16:33.412--ServerSession(1746570062)--EclipseLink, version: Eclipse Persistence Services - 4.0.0.v202210051929\nAn exception occurred while creating a query in EntityManager: \nException Description: Problem compiling [SELECT ID FROM Translation t]. \n[7, 9] The identification variable 'ID' is not defined in the FROM clause.\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 2.157 s - in DatabaseConnectionTest\n\nResults:\n\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0\n\n------------------------------------------------------------------------\nBUILD SUCCESS\n------------------------------------------------------------------------\nTotal time:  8.294 s\nFinished at: 2023-02-21T15:16:34+01:00\n------------------------------------------------------------------------\n</code></pre>\n<p>I would like to be able to get the data from my database, maybe with a query call. It has the same variabales as in the Translation.java file.</p>\n"},{"tags":["python","java"],"answers":[{"tags":[],"owner":{"account_id":17835,"reputation":303915,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677062134,"creation_date":1677062134,"answer_id":75531463,"question_id":75529881,"body_markdown":"There&#39;s two issues with your code.\r\n\r\n**First:** you don&#39;t close the `ZipOutputStream` before taking its result via the `ByteArrayOutputStream`. That means that `ZipOutputStream` can&#39;t write the necessary end-of-file content. To fix this use nested try-with-resource like this:\r\n\r\n    String base64Str;\r\n    byte[] inBytes = &quot;{\\&quot;a\\&quot;:\\&quot;b\\&quot;}&quot;.getBytes(StandardCharsets.UTF_8);\r\n    try (ByteArrayOutputStream out = new ByteArrayOutputStream()) {\r\n      try (ZipOutputStream zipOutputStream = new ZipOutputStream(out)) {\r\n        zipOutputStream.putNextEntry(new ZipEntry(&quot;0&quot;));\r\n        zipOutputStream.write(inBytes);\r\n        zipOutputStream.closeEntry();\r\n      }\r\n      base64Str = Base64.getEncoder().encodeToString(out.toByteArray());\r\n      System.out.println(base64Str);\r\n    } catch (Exception e) {\r\n      return;\r\n    }\r\n\r\nNote that Java can apparently tolerate the lack of the end-of-file header (especially when used like you did), while Python considers it a fatal error.\r\n\r\nGenerally speaking, if your goal is to just compress a single stream of data, then ZIP isn&#39;t quite the right format for that: it&#39;s meant as an archive containing files (with file names, metadata, an index, ...).\r\n\r\nOther formats such as GZIP are simpler and also widely supported. Java has [`GZIPInputStream`][1] and [`GZIPOutputStream`][2] for that.\r\n\r\n**Second:** you use `buffer` for your output at the end, when you should be using `out.toByteArray()`:\r\n\r\n\r\n    System.out.println(new String(out.toByteArray(), StandardCharsets.UTF_8));\r\n\r\nThis will guarantee that the whole file content will be printed and it won&#39;t contain spurious nul-bytes.\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/zip/GZIPInputStream.html\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/zip/GZIPOutputStream.html","title":"How can Python decompress data from Java compress with zip","body":"<p>There's two issues with your code.</p>\n<p><strong>First:</strong> you don't close the <code>ZipOutputStream</code> before taking its result via the <code>ByteArrayOutputStream</code>. That means that <code>ZipOutputStream</code> can't write the necessary end-of-file content. To fix this use nested try-with-resource like this:</p>\n<pre><code>String base64Str;\nbyte[] inBytes = &quot;{\\&quot;a\\&quot;:\\&quot;b\\&quot;}&quot;.getBytes(StandardCharsets.UTF_8);\ntry (ByteArrayOutputStream out = new ByteArrayOutputStream()) {\n  try (ZipOutputStream zipOutputStream = new ZipOutputStream(out)) {\n    zipOutputStream.putNextEntry(new ZipEntry(&quot;0&quot;));\n    zipOutputStream.write(inBytes);\n    zipOutputStream.closeEntry();\n  }\n  base64Str = Base64.getEncoder().encodeToString(out.toByteArray());\n  System.out.println(base64Str);\n} catch (Exception e) {\n  return;\n}\n</code></pre>\n<p>Note that Java can apparently tolerate the lack of the end-of-file header (especially when used like you did), while Python considers it a fatal error.</p>\n<p>Generally speaking, if your goal is to just compress a single stream of data, then ZIP isn't quite the right format for that: it's meant as an archive containing files (with file names, metadata, an index, ...).</p>\n<p>Other formats such as GZIP are simpler and also widely supported. Java has <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/zip/GZIPInputStream.html\" rel=\"nofollow noreferrer\"><code>GZIPInputStream</code></a> and <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/zip/GZIPOutputStream.html\" rel=\"nofollow noreferrer\"><code>GZIPOutputStream</code></a> for that.</p>\n<p><strong>Second:</strong> you use <code>buffer</code> for your output at the end, when you should be using <code>out.toByteArray()</code>:</p>\n<pre><code>System.out.println(new String(out.toByteArray(), StandardCharsets.UTF_8));\n</code></pre>\n<p>This will guarantee that the whole file content will be printed and it won't contain spurious nul-bytes.</p>\n"}],"owner":{"account_id":27847862,"reputation":1,"user_id":21262940,"display_name":"june"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":98,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677062134,"creation_date":1677054010,"question_id":75529881,"body_markdown":"I wrote a demo with Java and Python to show my problem. My situation is Java to compress and Python to decompress. The Java code is\r\n```java\r\nString base64Str;\r\nbyte[] inBytes = &quot;{\\&quot;a\\&quot;:\\&quot;b\\&quot;}&quot;.getBytes(StandardCharsets.UTF_8);\r\ntry (\r\n        ByteArrayOutputStream out = new ByteArrayOutputStream();\r\n        ZipOutputStream zipOutputStream = new ZipOutputStream(out);\r\n){\r\n    zipOutputStream.putNextEntry(new ZipEntry(&quot;0&quot;));\r\n    zipOutputStream.write(inBytes);\r\n    zipOutputStream.closeEntry();\r\n    base64Str = Base64Encoder.encode(out.toByteArray());\r\n    System.out.println(base64Str);\r\n}catch (Exception e){\r\n    return;\r\n}\r\n\r\nbyte[] bytes = Base64Decoder.decode(base64Str);\r\ntry(\r\n        ByteArrayOutputStream out = new ByteArrayOutputStream();\r\n        ByteArrayInputStream in = new ByteArrayInputStream(bytes);\r\n        ZipInputStream zin = new ZipInputStream(in);){\r\n    zin.getNextEntry();\r\n    byte[] buffer =  new byte[1024];\r\n    int offset = -1;\r\n    while ((offset = zin.read(buffer))!=-1){\r\n        out.write(buffer,0,offset);\r\n    }\r\n    System.out.println(new String(buffer,StandardCharsets.UTF_8));\r\n\r\n} catch (IOException e) {\r\n    e.printStackTrace();\r\n}\r\n```\r\nthe python code is\r\n```python\r\ns = &#39;UEsDBBQACAgIAOl9VlYAAAAAAAAAAAAAAAABAAAAMKtWSlSyUkpSqgUAUEsHCJxc9msLAAAACQAAAA==&#39;\r\nbytes = base64.b64decode(s)\r\nzipfile.ZipFile(io.BytesIO(bytes))\r\n```\r\nThe variable `s` in the Python code is Java&#39;s `System.out.println(new String(buffer,StandardCharsets.UTF_8))` output, and Python gives me a wrong information \r\n```none\r\n---------------------------------------------------------------------------\r\nBadZipFile                                Traceback (most recent call last)\r\nCell In[101], line 3\r\n      1 s = &#39;UEsDBBQACAgIAOl9VlYAAAAAAAAAAAAAAAABAAAAMKtWSlSyUkpSqgUAUEsHCJxc9msLAAAACQAAAA==&#39;\r\n      2 bytes = base64.b64decode(s)\r\n----&gt; 3 zipfile.ZipFile(io.BytesIO(bytes))\r\n\r\nFile d:\\python38\\lib\\zipfile.py:1269, in ZipFile.__init__(self, file, mode, compression, allowZip64, compresslevel, strict_timestamps)\r\n   1267 try:\r\n   1268     if mode == &#39;r&#39;:\r\n-&gt; 1269         self._RealGetContents()\r\n   1270     elif mode in (&#39;w&#39;, &#39;x&#39;):\r\n   1271         # set the modified flag so central directory gets written\r\n   1272         # even if no files are added to the archive\r\n   1273         self._didModify = True\r\n\r\nFile d:\\python38\\lib\\zipfile.py:1336, in ZipFile._RealGetContents(self)\r\n   1334     raise BadZipFile(&quot;File is not a zip file&quot;)\r\n   1335 if not endrec:\r\n-&gt; 1336     raise BadZipFile(&quot;File is not a zip file&quot;)\r\n   1337 if self.debug &gt; 1:\r\n   1338     print(endrec)\r\n\r\nBadZipFile: File is not a zip file\r\n```","title":"How can Python decompress data from Java compress with zip","body":"<p>I wrote a demo with Java and Python to show my problem. My situation is Java to compress and Python to decompress. The Java code is</p>\n<pre class=\"lang-java prettyprint-override\"><code>String base64Str;\nbyte[] inBytes = &quot;{\\&quot;a\\&quot;:\\&quot;b\\&quot;}&quot;.getBytes(StandardCharsets.UTF_8);\ntry (\n        ByteArrayOutputStream out = new ByteArrayOutputStream();\n        ZipOutputStream zipOutputStream = new ZipOutputStream(out);\n){\n    zipOutputStream.putNextEntry(new ZipEntry(&quot;0&quot;));\n    zipOutputStream.write(inBytes);\n    zipOutputStream.closeEntry();\n    base64Str = Base64Encoder.encode(out.toByteArray());\n    System.out.println(base64Str);\n}catch (Exception e){\n    return;\n}\n\nbyte[] bytes = Base64Decoder.decode(base64Str);\ntry(\n        ByteArrayOutputStream out = new ByteArrayOutputStream();\n        ByteArrayInputStream in = new ByteArrayInputStream(bytes);\n        ZipInputStream zin = new ZipInputStream(in);){\n    zin.getNextEntry();\n    byte[] buffer =  new byte[1024];\n    int offset = -1;\n    while ((offset = zin.read(buffer))!=-1){\n        out.write(buffer,0,offset);\n    }\n    System.out.println(new String(buffer,StandardCharsets.UTF_8));\n\n} catch (IOException e) {\n    e.printStackTrace();\n}\n</code></pre>\n<p>the python code is</p>\n<pre class=\"lang-py prettyprint-override\"><code>s = 'UEsDBBQACAgIAOl9VlYAAAAAAAAAAAAAAAABAAAAMKtWSlSyUkpSqgUAUEsHCJxc9msLAAAACQAAAA=='\nbytes = base64.b64decode(s)\nzipfile.ZipFile(io.BytesIO(bytes))\n</code></pre>\n<p>The variable <code>s</code> in the Python code is Java's <code>System.out.println(new String(buffer,StandardCharsets.UTF_8))</code> output, and Python gives me a wrong information</p>\n<pre class=\"lang-none prettyprint-override\"><code>---------------------------------------------------------------------------\nBadZipFile                                Traceback (most recent call last)\nCell In[101], line 3\n      1 s = 'UEsDBBQACAgIAOl9VlYAAAAAAAAAAAAAAAABAAAAMKtWSlSyUkpSqgUAUEsHCJxc9msLAAAACQAAAA=='\n      2 bytes = base64.b64decode(s)\n----&gt; 3 zipfile.ZipFile(io.BytesIO(bytes))\n\nFile d:\\python38\\lib\\zipfile.py:1269, in ZipFile.__init__(self, file, mode, compression, allowZip64, compresslevel, strict_timestamps)\n   1267 try:\n   1268     if mode == 'r':\n-&gt; 1269         self._RealGetContents()\n   1270     elif mode in ('w', 'x'):\n   1271         # set the modified flag so central directory gets written\n   1272         # even if no files are added to the archive\n   1273         self._didModify = True\n\nFile d:\\python38\\lib\\zipfile.py:1336, in ZipFile._RealGetContents(self)\n   1334     raise BadZipFile(&quot;File is not a zip file&quot;)\n   1335 if not endrec:\n-&gt; 1336     raise BadZipFile(&quot;File is not a zip file&quot;)\n   1337 if self.debug &gt; 1:\n   1338     print(endrec)\n\nBadZipFile: File is not a zip file\n</code></pre>\n"},{"tags":["java","node.js","encryption","node-crypto"],"comments":[{"owner":{"account_id":12359353,"reputation":42442,"user_id":9014097,"display_name":"Topaco"},"score":0,"creation_date":1677073189,"post_id":75531462,"comment_id":133265026,"body_markdown":"*...Is that correct?...* Have you compared the results of the two codes? Depending on the mode, `final()` takes padding into account or generates/checks an authentication tag. Although both are irrelevant for CFB (and `final()` returns nothing), it&#39;s more robust to concatenate the results of the `update()` and `final()` calls (e.g. with respect to a change of the mode).","body":"<i>...Is that correct?...</i> Have you compared the results of the two codes? Depending on the mode, <code>final()</code> takes padding into account or generates/checks an authentication tag. Although both are irrelevant for CFB (and <code>final()</code> returns nothing), it&#39;s more robust to concatenate the results of the <code>update()</code> and <code>final()</code> calls (e.g. with respect to a change of the mode)."},{"owner":{"account_id":17348142,"reputation":345,"user_id":12567231,"display_name":"Madhav mishra"},"score":0,"creation_date":1677156443,"post_id":75531462,"comment_id":133284396,"body_markdown":"Could you add some resources to go deeper into this? Thanks","body":"Could you add some resources to go deeper into this? Thanks"},{"owner":{"account_id":12359353,"reputation":42442,"user_id":9014097,"display_name":"Topaco"},"score":0,"creation_date":1677170177,"post_id":75531462,"comment_id":133289205,"body_markdown":"See the *crypto* documentation. For more details see the [source code](https://github.com/nodejs/node/blob/main/src/crypto/crypto_cipher.cc#L889). Note that *crypto* is just an OpenSSL wrapper, `final()` essentially calls the OpenSSL functions `EVP_CipherFinal_ex()` and `EVP_CIPHER_CTX_ctrl()`. See their OpenSSL documentation for more details.","body":"See the <i>crypto</i> documentation. For more details see the <a href=\"https://github.com/nodejs/node/blob/main/src/crypto/crypto_cipher.cc#L889\" rel=\"nofollow noreferrer\">source code</a>. Note that <i>crypto</i> is just an OpenSSL wrapper, <code>final()</code> essentially calls the OpenSSL functions <code>EVP_CipherFinal_ex()</code> and <code>EVP_CIPHER_CTX_ctrl()</code>. See their OpenSSL documentation for more details."}],"owner":{"account_id":17348142,"reputation":345,"user_id":12567231,"display_name":"Madhav mishra"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677062131,"creation_date":1677062131,"question_id":75531462,"body_markdown":"I have a encryption/decryption functionality in java code and wanted to write the same logic using the **crypto** node-js library. \r\nWhat&#39;s the equivalent of these Java codes ?\r\n&lt;br&gt;&lt;br&gt;\r\nJava code : \r\n```\r\n\r\n String iv = &quot;Some random string&quot;;\r\n AlgorithmParameterSpec ivSpec = new IvParameterSpec(iv.getBytes());\r\n```\r\nWhat I tried : \r\n```\r\nconst iv = &quot;Some random string&quot;\r\nvar ivSpec = new Buffer.from(iv);\r\n```\r\n&lt;br&gt;\r\nJava code : \r\n\r\n```\r\nString key = &quot;Some random key&quot;;\r\nSecretKeySpec newKey = new SecretKeySpec(key.getBytes(), &quot;AES&quot;);\r\n\r\n```\r\nWhat I tried : \r\n```\r\nconst key = &quot;Some random key&quot;\r\nvar newKey = new Buffer.from(key);\r\n\r\n```\r\nJava code :\r\n```\r\nString message = &quot;Some message&quot;\r\nCipher cipher = Cipher.getInstance(&quot;AES/CFB/NoPadding&quot;);\r\ncipher.init(Cipher.ENCRYPT_MODE, newKey, ivSpec);\r\nbyte[] bytes = cipher.doFinal(textBytes.getBytes());\r\n```\r\nIn java code it is using **&quot;AES/CFB/NoPadding&quot;** and I found equivalent in node js crypto i.e **&quot;aes-256-cfb&quot;** so I used it.\r\n```\r\nvar crypto = require(&#39;crypto&#39;);\r\n\r\nvar cipher = crypto.createCipheriv(&#39;aes-256-cfb&#39;, newKey, ivSpec);\r\ncipher.update(message, &#39;utf8&#39;);\r\ncipher.final();\r\n```\r\nIs that correct ? Where I am doin it wrong cause there is no output of cipher.final().\r\nThanks in advance.","title":"Converting java cipher crypto code to node js crypto","body":"<p>I have a encryption/decryption functionality in java code and wanted to write the same logic using the <strong>crypto</strong> node-js library.\nWhat's the equivalent of these Java codes ?\n<br><br>\nJava code :</p>\n<pre><code>\n String iv = &quot;Some random string&quot;;\n AlgorithmParameterSpec ivSpec = new IvParameterSpec(iv.getBytes());\n</code></pre>\n<p>What I tried :</p>\n<pre><code>const iv = &quot;Some random string&quot;\nvar ivSpec = new Buffer.from(iv);\n</code></pre>\n<br>\nJava code : \n<pre><code>String key = &quot;Some random key&quot;;\nSecretKeySpec newKey = new SecretKeySpec(key.getBytes(), &quot;AES&quot;);\n\n</code></pre>\n<p>What I tried :</p>\n<pre><code>const key = &quot;Some random key&quot;\nvar newKey = new Buffer.from(key);\n\n</code></pre>\n<p>Java code :</p>\n<pre><code>String message = &quot;Some message&quot;\nCipher cipher = Cipher.getInstance(&quot;AES/CFB/NoPadding&quot;);\ncipher.init(Cipher.ENCRYPT_MODE, newKey, ivSpec);\nbyte[] bytes = cipher.doFinal(textBytes.getBytes());\n</code></pre>\n<p>In java code it is using <strong>&quot;AES/CFB/NoPadding&quot;</strong> and I found equivalent in node js crypto i.e <strong>&quot;aes-256-cfb&quot;</strong> so I used it.</p>\n<pre><code>var crypto = require('crypto');\n\nvar cipher = crypto.createCipheriv('aes-256-cfb', newKey, ivSpec);\ncipher.update(message, 'utf8');\ncipher.final();\n</code></pre>\n<p>Is that correct ? Where I am doin it wrong cause there is no output of cipher.final().\nThanks in advance.</p>\n"},{"tags":["java","json","spring","jackson"],"answers":[{"comments":[{"owner":{"account_id":3406005,"reputation":1419,"user_id":2857022,"accept_rate":20,"display_name":"grigori"},"score":6,"creation_date":1381283129,"post_id":19239964,"comment_id":28515909,"body_markdown":"That worked! I removed `@JsonSubTypes.Type(name = &quot;creditCardPayment&quot;, value = CreditCardPayment.class)` from the `Payment` interface and added `objectMapper.registerSubtypes(CreditCardPayment.class);` in the `AppWebConf` class. It&#39;s disappointing that annotations didn&#39;t work as I wanted to keep my configuration generic but at least it gets me past this issue. Thank you.","body":"That worked! I removed <code>@JsonSubTypes.Type(name = &quot;creditCardPayment&quot;, value = CreditCardPayment.class)</code> from the <code>Payment</code> interface and added <code>objectMapper.registerSubtypes(CreditCardPayment.class);</code> in the <code>AppWebConf</code> class. It&#39;s disappointing that annotations didn&#39;t work as I wanted to keep my configuration generic but at least it gets me past this issue. Thank you."},{"owner":{"account_id":2568689,"reputation":45222,"user_id":2761509,"accept_rate":67,"display_name":"VB_"},"score":8,"creation_date":1385726436,"post_id":19239964,"comment_id":30263169,"body_markdown":"I faced the same problem, and the solution above doesn&#39;t help.","body":"I faced the same problem, and the solution above doesn&#39;t help."}],"tags":[],"owner":{"account_id":1416996,"reputation":2508,"user_id":1342427,"display_name":"ragnor"},"comment_count":2,"down_vote_count":0,"up_vote_count":23,"is_accepted":true,"score":23,"last_activity_date":1494602659,"creation_date":1381211089,"answer_id":19239964,"question_id":19239413,"body_markdown":"Try to register subtype using `ObjectMapper.registerSubtypes` instead of using annotations","title":"De-serializing JSON to polymorphic object model using Spring and JsonTypeInfo annotation","body":"<p>Try to register subtype using <code>ObjectMapper.registerSubtypes</code> instead of using annotations</p>\n"},{"comments":[{"owner":{"account_id":3572962,"reputation":3456,"user_id":2982874,"display_name":"Rob Baillie"},"score":0,"creation_date":1418078115,"post_id":27367924,"comment_id":43188397,"body_markdown":"An explanation to go with the code is probably useful","body":"An explanation to go with the code is probably useful"},{"owner":{"account_id":5455641,"reputation":201,"user_id":4339159,"display_name":"Rashmin H Gadhavi"},"score":1,"creation_date":1418246768,"post_id":27367924,"comment_id":43266534,"body_markdown":"Sorry, I missed that. So let me re-do the whole thing again with some more features.","body":"Sorry, I missed that. So let me re-do the whole thing again with some more features."}],"tags":[],"owner":{"account_id":5455641,"reputation":201,"user_id":4339159,"display_name":"Rashmin H Gadhavi"},"comment_count":2,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1488289184,"creation_date":1418076557,"answer_id":27367924,"question_id":19239413,"body_markdown":"The method `registerSubtypes()` works!\r\n    \r\n   \r\n\r\n    @JsonTypeInfo(use=JsonTypeInfo.Id.NAME, include=JsonTypeInfo.As.PROPERTY, property=&quot;type&quot;)\r\n    public interface Geometry {\r\n      //...\r\n    }\r\n       \r\n    public class Point implements Geometry{\r\n      //...\r\n    }\r\n    public class Polygon implements Geometry{\r\n      //...\r\n    }\r\n    public class LineString implements Geometry{\r\n      //...\r\n    }\r\n            \r\n    GeoJson geojson= null;\r\n    ObjectMapper mapper = new ObjectMapper();\r\n    mapper.disable(DeserializationConfig.Feature.FAIL_ON_UNKNOWN_PROPERTIES);\r\n    mapper.registerSubtypes(Polygon.class,LineString.class,Point.class);\r\n    \r\n    try {\r\n        geojson=mapper.readValue(source, GeoJson.class);\t\t\t\r\n    } catch (IOException e) {\r\n        e.printStackTrace();\r\n    }\r\n\r\nNote1: We use the Interface and the implementing classes. I fyou want jackson to de-serialize the classes as per their implementing classes, you have to register all of them using ObjectMapper&#39;s &quot;registerSubtypes&quot; method.\r\n\r\nNote2: In addition you use, &quot;    @JsonTypeInfo(use=JsonTypeInfo.Id.NAME, include=JsonTypeInfo.As.PROPERTY, property=&quot;type&quot;)&quot; as annotation with your Interface.\r\n\r\nYou can also define the order of properties when mapper writes a value of your POJO as a json.\r\n\r\nThis you can do using below annotation.\r\n\r\n    @JsonPropertyOrder({&quot;type&quot;,&quot;crs&quot;,&quot;version&quot;,&quot;features&quot;})\r\n    public class GeoJson {\r\n\t\r\n\t    private String type=&quot;FeatureCollection&quot;;\r\n  \t    private List&lt;Feature&gt; features;\r\n\t    private String version=&quot;1.0.0&quot;;\r\n\t\tprivate CRS crs = new CRS();\r\n        ........\r\n\t}\r\n\r\nHope this helps!\r\n\r\n     ","title":"De-serializing JSON to polymorphic object model using Spring and JsonTypeInfo annotation","body":"<p>The method <code>registerSubtypes()</code> works!</p>\n\n<pre><code>@JsonTypeInfo(use=JsonTypeInfo.Id.NAME, include=JsonTypeInfo.As.PROPERTY, property=\"type\")\npublic interface Geometry {\n  //...\n}\n\npublic class Point implements Geometry{\n  //...\n}\npublic class Polygon implements Geometry{\n  //...\n}\npublic class LineString implements Geometry{\n  //...\n}\n\nGeoJson geojson= null;\nObjectMapper mapper = new ObjectMapper();\nmapper.disable(DeserializationConfig.Feature.FAIL_ON_UNKNOWN_PROPERTIES);\nmapper.registerSubtypes(Polygon.class,LineString.class,Point.class);\n\ntry {\n    geojson=mapper.readValue(source, GeoJson.class);            \n} catch (IOException e) {\n    e.printStackTrace();\n}\n</code></pre>\n\n<p>Note1: We use the Interface and the implementing classes. I fyou want jackson to de-serialize the classes as per their implementing classes, you have to register all of them using ObjectMapper's \"registerSubtypes\" method.</p>\n\n<p>Note2: In addition you use, \"    @JsonTypeInfo(use=JsonTypeInfo.Id.NAME, include=JsonTypeInfo.As.PROPERTY, property=\"type\")\" as annotation with your Interface.</p>\n\n<p>You can also define the order of properties when mapper writes a value of your POJO as a json.</p>\n\n<p>This you can do using below annotation.</p>\n\n<pre><code>@JsonPropertyOrder({\"type\",\"crs\",\"version\",\"features\"})\npublic class GeoJson {\n\n    private String type=\"FeatureCollection\";\n    private List&lt;Feature&gt; features;\n    private String version=\"1.0.0\";\n    private CRS crs = new CRS();\n    ........\n}\n</code></pre>\n\n<p>Hope this helps!</p>\n"},{"comments":[{"owner":{"account_id":15978,"reputation":9755,"user_id":34372,"accept_rate":62,"display_name":"Dean Schulze"},"score":2,"creation_date":1504106916,"post_id":36870868,"comment_id":78887551,"body_markdown":"That gives me this error: `Caused by: com.fasterxml.jackson.databind.JsonMappingException: Unexpected token (END_OBJECT), expected FIELD_NAME: missing property &#39;type&#39; that is to contain type id  (for class com.microstar.tap3.contract.api.ContractObject)\n at [Source: org.glassfish.jersey.message.internal.ReaderInterceptorExecutor$UnCloseableInputStream@5699c6f9; line: 1, column: 1023] (through reference chain: java.util.ArrayList[0])`","body":"That gives me this error: <code>Caused by: com.fasterxml.jackson.databind.JsonMappingException: Unexpected token (END_OBJECT), expected FIELD_NAME: missing property &#39;type&#39; that is to contain type id  (for class com.microstar.tap3.contract.api.ContractObject)  at [Source: org.glassfish.jersey.message.internal.ReaderInterceptorExecu&zwnj;&#8203;tor$UnCloseableInput&zwnj;&#8203;Stream@5699c6f9; line: 1, column: 1023] (through reference chain: java.util.ArrayList[0])</code>"},{"owner":{"account_id":16976069,"reputation":161,"user_id":12279397,"display_name":"Asa"},"score":0,"creation_date":1648619113,"post_id":36870868,"comment_id":126667115,"body_markdown":"This worked for me in Spring Boot 2.6.5.  What was especially helpful is that it worked when the underlying serialization format was Avro as well as when it was JSON.","body":"This worked for me in Spring Boot 2.6.5.  What was especially helpful is that it worked when the underlying serialization format was Avro as well as when it was JSON."}],"tags":[],"owner":{"account_id":1150252,"reputation":2707,"user_id":1625820,"accept_rate":59,"display_name":"herrtim"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1461688782,"creation_date":1461688782,"answer_id":36870868,"question_id":19239413,"body_markdown":"Rashmin&#39;s answer worked, and I found an alternative way to avoid the `com.fasterxml.jackson.databind.JsonMappingException: Could not resolve type id into a subtype of Blah` issue without needing to use `registerSubtypes`. What you can do is add the following annotation to the parent class: \r\n\r\n    @JsonTypeInfo(use = JsonTypeInfo.Id.CLASS, include = JsonTypeInfo.As.PROPERTY, property = &quot;type&quot;)\r\n\r\nNote that the difference is `JsonTypeInfo.Id.CLASS` instead of `JsonTypeInfo.Id.NAME`. The downside is that the created JSON will contain the entire class name including the full namespace. The upside is that you don&#39;t have to worry about registering subtypes.","title":"De-serializing JSON to polymorphic object model using Spring and JsonTypeInfo annotation","body":"<p>Rashmin's answer worked, and I found an alternative way to avoid the <code>com.fasterxml.jackson.databind.JsonMappingException: Could not resolve type id into a subtype of Blah</code> issue without needing to use <code>registerSubtypes</code>. What you can do is add the following annotation to the parent class: </p>\n\n<pre><code>@JsonTypeInfo(use = JsonTypeInfo.Id.CLASS, include = JsonTypeInfo.As.PROPERTY, property = \"type\")\n</code></pre>\n\n<p>Note that the difference is <code>JsonTypeInfo.Id.CLASS</code> instead of <code>JsonTypeInfo.Id.NAME</code>. The downside is that the created JSON will contain the entire class name including the full namespace. The upside is that you don't have to worry about registering subtypes.</p>\n"},{"tags":[],"owner":{"account_id":2456831,"reputation":1967,"user_id":2243516,"display_name":"Aaron Cooley"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1473805335,"creation_date":1473805335,"answer_id":39479844,"question_id":19239413,"body_markdown":"I had a similar issue while working on a dropwizard based service.  I don&#39;t fully understand why things didn&#39;t work for me in the same way that the dropwizard code works, but I know why the code in the original post doesn&#39;t work. `@JsonSubTypes` wants an array of sub types, not a single value.  So if you replace the line...\r\n\r\n    @JsonSubTypes.Type(name = &quot;creditCardPayment&quot;, value = CreditCardPayment.class)\r\n\r\nwith...\r\n\r\n    @JsonSubTypes({ @JsonSubTypes.Type(name = &quot;creditCardPayment&quot;, value = CreditCardPayment.class) })\r\n\r\nI believe your code will work.\r\n\r\nFor those that are having this same error message pop up, you may be having an issue with the subtypes being discovered.  Try adding a line like the one above or looking for issue with the discovery of the classes that have the `@JsonTypeName` tag in them.","title":"De-serializing JSON to polymorphic object model using Spring and JsonTypeInfo annotation","body":"<p>I had a similar issue while working on a dropwizard based service.  I don't fully understand why things didn't work for me in the same way that the dropwizard code works, but I know why the code in the original post doesn't work. <code>@JsonSubTypes</code> wants an array of sub types, not a single value.  So if you replace the line...</p>\n\n<pre><code>@JsonSubTypes.Type(name = \"creditCardPayment\", value = CreditCardPayment.class)\n</code></pre>\n\n<p>with...</p>\n\n<pre><code>@JsonSubTypes({ @JsonSubTypes.Type(name = \"creditCardPayment\", value = CreditCardPayment.class) })\n</code></pre>\n\n<p>I believe your code will work.</p>\n\n<p>For those that are having this same error message pop up, you may be having an issue with the subtypes being discovered.  Try adding a line like the one above or looking for issue with the discovery of the classes that have the <code>@JsonTypeName</code> tag in them.</p>\n"},{"tags":[],"owner":{"account_id":3186371,"reputation":41,"user_id":2691890,"display_name":"dibs"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1528123732,"creation_date":1499983588,"answer_id":45091683,"question_id":19239413,"body_markdown":"Encountered the same error and used the equivalent of the below JSON (instead of `CreditCardPayment` used my class name) as the input for deserializer and it worked:\r\n\r\n    {\r\n\t    &quot;type&quot;: &quot;CreditCardPayment&quot;, \r\n        ...\r\n    }","title":"De-serializing JSON to polymorphic object model using Spring and JsonTypeInfo annotation","body":"<p>Encountered the same error and used the equivalent of the below JSON (instead of <code>CreditCardPayment</code> used my class name) as the input for deserializer and it worked:</p>\n\n<pre><code>{\n    \"type\": \"CreditCardPayment\", \n    ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":83518,"reputation":6215,"user_id":234110,"accept_rate":67,"display_name":"Anand Rockzz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1504275213,"creation_date":1504275213,"answer_id":46002160,"question_id":19239413,"body_markdown":"In my case I had added `defaultImpl = SomeClass.class` to @JsonTypeInfo and was trying to convert it SomeClass2.class","title":"De-serializing JSON to polymorphic object model using Spring and JsonTypeInfo annotation","body":"<p>In my case I had added <code>defaultImpl = SomeClass.class</code> to @JsonTypeInfo and was trying to convert it SomeClass2.class</p>\n"},{"tags":[],"owner":{"account_id":321894,"reputation":2481,"user_id":640994,"accept_rate":78,"display_name":"DeejonZ"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677062072,"creation_date":1677062072,"answer_id":75531446,"question_id":19239413,"body_markdown":"In my case it was an old version of jackson-databind. I solved with version 2.11.0","title":"De-serializing JSON to polymorphic object model using Spring and JsonTypeInfo annotation","body":"<p>In my case it was an old version of jackson-databind. I solved with version 2.11.0</p>\n"}],"owner":{"account_id":3406005,"reputation":1419,"user_id":2857022,"accept_rate":20,"display_name":"grigori"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75327,"favorite_count":0,"down_vote_count":0,"up_vote_count":36,"accepted_answer_id":19239964,"answer_count":7,"score":36,"last_activity_date":1677062072,"creation_date":1381208275,"question_id":19239413,"body_markdown":"I have the following object model in my Spring MVC (v3.2.0.RELEASE) web application:\r\n\r\n\r\n    public class Order {\r\n      private Payment payment;\r\n    }\r\n    \r\n    @JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = As.WRAPPER_OBJECT)\r\n    @JsonSubTypes.Type(name = &quot;creditCardPayment&quot;, value = CreditCardPayment.class)\r\n    public interface Payment {}\r\n\r\n\r\n    @JsonTypeName(&quot;creditCardPayment&quot;)\r\n    public class CreditCardPayment implements Payment {}\r\n\r\nWhen I serialise the Order class to JSON, I get the following result (which is exactly what I want):\r\n\r\n    {\r\n      &quot;payment&quot; : {\r\n        &quot;creditCardPayment&quot;: {\r\n          ...\r\n        } \r\n    }\r\n\r\nUnfortunately, if I take the above JSON and try to de-serialise it back into my object model, I get the following exception:\r\n\r\n    \r\n\r\n&gt; Could not read JSON: Could not resolve type id &#39;creditCardPayment&#39;\r\n&gt; into a subtype of [simple type, class Payment] at [Source:\r\n&gt; org.apache.catalina.connector.CoyoteInputStream@19629355; line: 1,\r\n&gt; column: 58] (through reference chain: Order[&quot;payment&quot;]); nested\r\n&gt; exception is com.fasterxml.jackson.databind.JsonMappingException:\r\n&gt; Could not resolve type id &#39;creditCardPayment&#39; into a subtype of\r\n&gt; [simple type, class Payment] at [Source:\r\n&gt; org.apache.catalina.connector.CoyoteInputStream@19629355; line: 1,\r\n&gt; column: 58] (through reference chain: Order[&quot;payment&quot;])\r\n\r\nMy application is configured via Spring JavaConf, as follows:\r\n\r\n    @Configuration\r\n    @EnableWebMvc\r\n    public class AppWebConf extends WebMvcConfigurerAdapter {\r\n    \r\n        @Bean\r\n        public ObjectMapper objectMapper() {\r\n            ObjectMapper objectMapper = new ObjectMapper();\r\n            objectMapper.setSerializationInclusion(Include.NON_NULL);\r\n            objectMapper.configure(MapperFeature.DEFAULT_VIEW_INCLUSION, false);\r\n            return objectMapper;\r\n        }\r\n    \r\n        @Bean\r\n        public MappingJackson2HttpMessageConverter mappingJacksonMessageConverter() {\r\n            MappingJackson2HttpMessageConverter converter = new MappingJackson2HttpMessageConverter();\r\n            converter.setObjectMapper(objectMapper());\r\n            return converter;\r\n        }\r\n    \r\n        @Bean\r\n        public Jaxb2RootElementHttpMessageConverter jaxbMessageConverter() {\r\n            return new Jaxb2RootElementHttpMessageConverter();\r\n        }\r\n    \r\n        @Override\r\n        public void configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {\r\n            converters.add(jaxbMessageConverter());\r\n            converters.add(mappingJacksonMessageConverter());\r\n        }\r\n    }\r\n\r\nFor testing, I have a controller with 2 methods, one returns an Order for HTTP GET request (this one works) and one that accepts an Order via a HTTP POST (this one fails), e.g.\r\n\r\n    @Controller\r\n    public class TestController {\r\n    \r\n        @ResponseBody\r\n        @RequestMapping(value = &quot;/test&quot;, method = RequestMethod.GET)\r\n        public Order getTest() {}\r\n    \r\n        @RequestMapping(value = &quot;/test&quot;, method = RequestMethod.POST)\r\n        public void postTest(@RequestBody order) {}\r\n\r\n    }\r\n\r\nI have tried all suggestions from the various discussions on SO but so far had no luck. Can anyone spot what I&#39;m doing wrong?","title":"De-serializing JSON to polymorphic object model using Spring and JsonTypeInfo annotation","body":"<p>I have the following object model in my Spring MVC (v3.2.0.RELEASE) web application:</p>\n\n<pre><code>public class Order {\n  private Payment payment;\n}\n\n@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = As.WRAPPER_OBJECT)\n@JsonSubTypes.Type(name = \"creditCardPayment\", value = CreditCardPayment.class)\npublic interface Payment {}\n\n\n@JsonTypeName(\"creditCardPayment\")\npublic class CreditCardPayment implements Payment {}\n</code></pre>\n\n<p>When I serialise the Order class to JSON, I get the following result (which is exactly what I want):</p>\n\n<pre><code>{\n  \"payment\" : {\n    \"creditCardPayment\": {\n      ...\n    } \n}\n</code></pre>\n\n<p>Unfortunately, if I take the above JSON and try to de-serialise it back into my object model, I get the following exception:</p>\n\n<blockquote>\n  <p>Could not read JSON: Could not resolve type id 'creditCardPayment'\n  into a subtype of [simple type, class Payment] at [Source:\n  org.apache.catalina.connector.CoyoteInputStream@19629355; line: 1,\n  column: 58] (through reference chain: Order[\"payment\"]); nested\n  exception is com.fasterxml.jackson.databind.JsonMappingException:\n  Could not resolve type id 'creditCardPayment' into a subtype of\n  [simple type, class Payment] at [Source:\n  org.apache.catalina.connector.CoyoteInputStream@19629355; line: 1,\n  column: 58] (through reference chain: Order[\"payment\"])</p>\n</blockquote>\n\n<p>My application is configured via Spring JavaConf, as follows:</p>\n\n<pre><code>@Configuration\n@EnableWebMvc\npublic class AppWebConf extends WebMvcConfigurerAdapter {\n\n    @Bean\n    public ObjectMapper objectMapper() {\n        ObjectMapper objectMapper = new ObjectMapper();\n        objectMapper.setSerializationInclusion(Include.NON_NULL);\n        objectMapper.configure(MapperFeature.DEFAULT_VIEW_INCLUSION, false);\n        return objectMapper;\n    }\n\n    @Bean\n    public MappingJackson2HttpMessageConverter mappingJacksonMessageConverter() {\n        MappingJackson2HttpMessageConverter converter = new MappingJackson2HttpMessageConverter();\n        converter.setObjectMapper(objectMapper());\n        return converter;\n    }\n\n    @Bean\n    public Jaxb2RootElementHttpMessageConverter jaxbMessageConverter() {\n        return new Jaxb2RootElementHttpMessageConverter();\n    }\n\n    @Override\n    public void configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {\n        converters.add(jaxbMessageConverter());\n        converters.add(mappingJacksonMessageConverter());\n    }\n}\n</code></pre>\n\n<p>For testing, I have a controller with 2 methods, one returns an Order for HTTP GET request (this one works) and one that accepts an Order via a HTTP POST (this one fails), e.g.</p>\n\n<pre><code>@Controller\npublic class TestController {\n\n    @ResponseBody\n    @RequestMapping(value = \"/test\", method = RequestMethod.GET)\n    public Order getTest() {}\n\n    @RequestMapping(value = \"/test\", method = RequestMethod.POST)\n    public void postTest(@RequestBody order) {}\n\n}\n</code></pre>\n\n<p>I have tried all suggestions from the various discussions on SO but so far had no luck. Can anyone spot what I'm doing wrong?</p>\n"},{"tags":["java","scala","jar","scripting","jsr"],"answers":[{"comments":[{"owner":{"account_id":17597753,"reputation":104,"user_id":12768362,"display_name":"evgrot"},"score":0,"creation_date":1676452769,"post_id":75451783,"comment_id":133137675,"body_markdown":"It helps. Thanks you a lot. But i still have had 1 issue. Updated my question with that issue.","body":"It helps. Thanks you a lot. But i still have had 1 issue. Updated my question with that issue."},{"owner":{"account_id":2503348,"reputation":48669,"user_id":5249621,"display_name":"Dmytro Mitin"},"score":0,"creation_date":1676566676,"post_id":75451783,"comment_id":133167211,"body_markdown":"@evgrot See the update regarding: 1) your original JSR232 approach 2) your classloading question.","body":"@evgrot See the update regarding: 1) your original JSR232 approach 2) your classloading question."},{"owner":{"account_id":17597753,"reputation":104,"user_id":12768362,"display_name":"evgrot"},"score":0,"creation_date":1677011336,"post_id":75451783,"comment_id":133252209,"body_markdown":"First option will not work at java11 and later, because system class loader is not URLClassLoader. I have already used second option. As i said i can add url before first eval call. But if i do eval then add new dependency, and do eval again, new dependencies not recognized. My workaroud is to recreate toolbox after each new dependency injected(addUrl call), because it happens were rarely. About &lt;fork&gt; i will try, as soon as i return to this project.","body":"First option will not work at java11 and later, because system class loader is not URLClassLoader. I have already used second option. As i said i can add url before first eval call. But if i do eval then add new dependency, and do eval again, new dependencies not recognized. My workaroud is to recreate toolbox after each new dependency injected(addUrl call), because it happens were rarely. About &lt;fork&gt; i will try, as soon as i return to this project."},{"owner":{"account_id":2503348,"reputation":48669,"user_id":5249621,"display_name":"Dmytro Mitin"},"score":0,"creation_date":1677021610,"post_id":75451783,"comment_id":133254519,"body_markdown":"@evgrot *&quot;system class loader is not URLClassLoader.&quot;* Why do you need system class loader? Why not to create a child class loader, which is URLClassLoader, so you&#39;ll be able to mutate its urls? *&quot;new dependencies not recognized&quot;* Every toolbox has two mirrors (and two class loaders). The first is the one it was created with, i.e. the mirror of toolbox dependencies. The second is its own mirror, where new definitions live. So when you&#39;re adding a JAR, use the 2nd mirror/class loader, not the 1st. See example in update. Also use fully qualified references to previous definitions (or imports).","body":"@evgrot <i>&quot;system class loader is not URLClassLoader.&quot;</i> Why do you need system class loader? Why not to create a child class loader, which is URLClassLoader, so you&#39;ll be able to mutate its urls? <i>&quot;new dependencies not recognized&quot;</i> Every toolbox has two mirrors (and two class loaders). The first is the one it was created with, i.e. the mirror of toolbox dependencies. The second is its own mirror, where new definitions live. So when you&#39;re adding a JAR, use the 2nd mirror/class loader, not the 1st. See example in update. Also use fully qualified references to previous definitions (or imports)."},{"owner":{"account_id":2503348,"reputation":48669,"user_id":5249621,"display_name":"Dmytro Mitin"},"score":0,"creation_date":1677022004,"post_id":75451783,"comment_id":133254586,"body_markdown":"@evgrot When you created a new class/object with `val symbol = toolbox.define(...)` normally in Scala you use it further like `q&quot;new $symbol(...)&quot;`. The problem is that `q&quot;...&quot;` is a macro so to make it work in Java you need to run toolbox once again https://stackoverflow.com/questions/25078538/using-scala-macro-from-java Things could be easier if you could run all script calculations in Scala and then just call the result from Java. If you still can&#39;t access previous definitions please create MCVE (maybe in a new question) and we&#39;ll see how to fix it.","body":"@evgrot When you created a new class/object with <code>val symbol = toolbox.define(...)</code> normally in Scala you use it further like <code>q&quot;new $symbol(...)&quot;</code>. The problem is that <code>q&quot;...&quot;</code> is a macro so to make it work in Java you need to run toolbox once again <a href=\"https://stackoverflow.com/questions/25078538/using-scala-macro-from-java\" title=\"using scala macro from java\">stackoverflow.com/questions/25078538/&hellip;</a> Things could be easier if you could run all script calculations in Scala and then just call the result from Java. If you still can&#39;t access previous definitions please create MCVE (maybe in a new question) and we&#39;ll see how to fix it."},{"owner":{"account_id":2503348,"reputation":48669,"user_id":5249621,"display_name":"Dmytro Mitin"},"score":0,"creation_date":1677728260,"post_id":75451783,"comment_id":133396717,"body_markdown":"@evgrot Do you have any updates?","body":"@evgrot Do you have any updates?"}],"tags":[],"owner":{"account_id":2503348,"reputation":48669,"user_id":5249621,"display_name":"Dmytro Mitin"},"comment_count":6,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677061771,"creation_date":1676398775,"answer_id":75451783,"question_id":75437009,"body_markdown":"Could you try to replace\r\n\r\n```java\r\nScriptEngineManager manager=new ScriptEngineManager();\r\nScripted engine = (Scripted) manager.getEngineByName(&quot;scala&quot;);\r\nengine.compile(sourceCode);\r\n```\r\nwith\r\n```java\r\nimport scala.reflect.api.JavaUniverse;\r\nimport scala.tools.reflect.ToolBox;\r\n\r\n// ...\r\n\r\nscala.reflect.runtime.package$ runtime = scala.reflect.runtime.package$.MODULE$;\r\nJavaUniverse universe = runtime.universe();\r\nJavaUniverse.JavaMirror mirror = universe.runtimeMirror(this.getClass().getClassLoader());\r\nscala.tools.reflect.package$ toolsReflect = scala.tools.reflect.package$.MODULE$;\r\nToolBox&lt;?&gt; toolBox = toolsReflect.ToolBox(mirror).mkToolBox(toolsReflect.mkSilentFrontEnd(), &quot;&quot;);\r\nint res = (int) toolBox.eval(toolBox.parse(&quot;1 + 1&quot;)); // 2\r\n```\r\n?\r\n\r\nDoes this change anything for you?\r\n\r\nhttps://stackoverflow.com/questions/25078538/using-scala-macro-from-java\r\n\r\nhttps://stackoverflow.com/questions/73911801/how-can-i-run-generated-code-during-script-runtime\r\n\r\nhttps://stackoverflow.com/questions/70945320/how-to-compile-and-execute-scala-code-at-run-time-in-scala3\r\n\r\nhttps://stackoverflow.com/questions/1183645/eval-in-scala\r\n\r\n---\r\n\r\nRegarding your original code with JSR232 scripting. Could you check whether anything changes if you add `fork := true` (sbt syntax) to the build file? I guess in Maven this should be `&lt;fork&gt;true&lt;/fork&gt;`. \r\n\r\nRegarding your question with classloading. One option is to use protected method `addURL`\r\n\r\n```java\r\nClassLoader classLoader = this.getClass().getClassLoader();\r\nURLClassLoader urlClassLoader = (URLClassLoader) classLoader;\r\nMethod addUrlMethod = URLClassLoader.class.getDeclaredMethod(&quot;addURL&quot;, URL.class);\r\naddUrlMethod.setAccessible(true);\r\nString url = &quot;file:///home/dmitin/.cache/coursier/v1/https/repo1.maven.org/maven2/com/chuusai/shapeless_2.13/2.3.10/shapeless_2.13-2.3.10.jar&quot;;\r\naddUrlMethod.invoke(urlClassLoader, new URL(url));\r\nObject res = toolBox.eval(toolBox.parse(&quot;import shapeless._; 1 :: \\&quot;a\\&quot; :: HNil&quot;));\r\n// 1 :: a :: HNil\r\n```\r\n\r\nAnother is to create a child class loader, new runtime mirror and toolbox\r\n\r\n```java\r\nClassLoader classLoader1 = new URLClassLoader(new URL[]{new URL(url)}, classLoader);\r\nJavaUniverse.JavaMirror mirror1 = universe.runtimeMirror(classLoader1);\r\nToolBox&lt;?&gt; toolBox1 = toolsReflect.ToolBox(mirror1).mkToolBox(toolsReflect.mkSilentFrontEnd(), &quot;&quot;);\r\nObject res = toolBox1.eval(toolBox1.parse(&quot;import shapeless._; 1 :: \\&quot;a\\&quot; :: HNil&quot;));\r\n// 1 :: a :: HNil\r\n```\r\n\r\n---\r\n\r\nEvery toolbox has two mirrors (and two class loaders). The first is the one it was created with, i.e. the mirror of toolbox dependencies. The second is its own mirror `toolbox.mirror`, where new definitions live (the class loader is `mirror.classloader`).\r\n\r\nSee the following example, where I create a new class, instantiate it, add new JAR, and use previous definition\r\n\r\n```\r\nimport scala.reflect.api.JavaUniverse;\r\nimport scala.reflect.api.Symbols;\r\nimport scala.reflect.api.Trees;\r\nimport scala.tools.reflect.ToolBox;\r\nimport java.net.URL;\r\nimport java.net.URLClassLoader;\r\n\r\npublic class App {\r\n    public static void main(String[] args) throws Exception {\r\n        new App().run();\r\n    }\r\n\r\n    private static scala.reflect.runtime.package$ runtime = scala.reflect.runtime.package$.MODULE$;\r\n    private static JavaUniverse universe = runtime.universe();\r\n    private static ClassLoader classLoader = App.class.getClassLoader();\r\n    private static JavaUniverse.JavaMirror mirror = universe.runtimeMirror(classLoader);\r\n    private static scala.tools.reflect.package$ toolsReflect = scala.tools.reflect.package$.MODULE$;\r\n    private static ToolBox&lt;?&gt; toolBox = toolsReflect.ToolBox(mirror).mkToolBox(toolsReflect.mkSilentFrontEnd(), &quot;&quot;);\r\n    public static Symbols.SymbolApi symbol = toolBox.define((Trees.ClassDefApi) toolBox.parse(&quot;case class A(i: Int, s: String)&quot;));\r\n\r\n    public static Object a = toolBox.eval(toolBox.parse(\r\n            &quot;import scala.reflect.runtime.universe._;&quot; +\r\n            &quot; q\\&quot;\\&quot;\\&quot;new ${App.symbol.asInstanceOf[Symbol]}(1, \\&quot;a\\&quot;)\\&quot;\\&quot;\\&quot; &quot;\r\n    ));\r\n\r\n    public void run() throws Exception {\r\n        JavaUniverse.JavaMirror mirror1 = (JavaUniverse.JavaMirror) toolBox.mirror();\r\n        ClassLoader classLoader1 = mirror1.classLoader();\r\n\r\n        String url = &quot;file:///home/dmitin/.cache/coursier/v1/https/repo1.maven.org/maven2/com/chuusai/shapeless_2.13/2.3.10/shapeless_2.13-2.3.10.jar&quot;;\r\n        ClassLoader classLoader2 = new URLClassLoader(new URL[]{new URL(url)}, classLoader1);\r\n        JavaUniverse.JavaMirror mirror2 = universe.runtimeMirror(classLoader2);\r\n        ToolBox&lt;?&gt; toolBox2 = toolsReflect.ToolBox(mirror2).mkToolBox(toolsReflect.mkSilentFrontEnd(), &quot;&quot;);\r\n        Object res = toolBox2.eval(toolBox2.parse(&quot;import shapeless._; 1 :: \\&quot;a\\&quot; :: App.a :: HNil&quot;));\r\n        System.out.println(res); // 1 :: a :: A(1,a) :: HNil\r\n    }\r\n}\r\n```","title":"Scala script engine not initialized when starting java -jar file. javax.script.ScriptException: Failed to compile ctx","body":"<p>Could you try to replace</p>\n<pre class=\"lang-java prettyprint-override\"><code>ScriptEngineManager manager=new ScriptEngineManager();\nScripted engine = (Scripted) manager.getEngineByName(&quot;scala&quot;);\nengine.compile(sourceCode);\n</code></pre>\n<p>with</p>\n<pre class=\"lang-java prettyprint-override\"><code>import scala.reflect.api.JavaUniverse;\nimport scala.tools.reflect.ToolBox;\n\n// ...\n\nscala.reflect.runtime.package$ runtime = scala.reflect.runtime.package$.MODULE$;\nJavaUniverse universe = runtime.universe();\nJavaUniverse.JavaMirror mirror = universe.runtimeMirror(this.getClass().getClassLoader());\nscala.tools.reflect.package$ toolsReflect = scala.tools.reflect.package$.MODULE$;\nToolBox&lt;?&gt; toolBox = toolsReflect.ToolBox(mirror).mkToolBox(toolsReflect.mkSilentFrontEnd(), &quot;&quot;);\nint res = (int) toolBox.eval(toolBox.parse(&quot;1 + 1&quot;)); // 2\n</code></pre>\n<p>?</p>\n<p>Does this change anything for you?</p>\n<p><a href=\"https://stackoverflow.com/questions/25078538/using-scala-macro-from-java\">Using scala macro from java</a></p>\n<p><a href=\"https://stackoverflow.com/questions/73911801/how-can-i-run-generated-code-during-script-runtime\">How can I run generated code during script runtime?</a></p>\n<p><a href=\"https://stackoverflow.com/questions/70945320/how-to-compile-and-execute-scala-code-at-run-time-in-scala3\">How to compile and execute scala code at run-time in Scala3?</a></p>\n<p><a href=\"https://stackoverflow.com/questions/1183645/eval-in-scala\">&quot;eval&quot; in Scala</a></p>\n<hr />\n<p>Regarding your original code with JSR232 scripting. Could you check whether anything changes if you add <code>fork := true</code> (sbt syntax) to the build file? I guess in Maven this should be <code>&lt;fork&gt;true&lt;/fork&gt;</code>.</p>\n<p>Regarding your question with classloading. One option is to use protected method <code>addURL</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>ClassLoader classLoader = this.getClass().getClassLoader();\nURLClassLoader urlClassLoader = (URLClassLoader) classLoader;\nMethod addUrlMethod = URLClassLoader.class.getDeclaredMethod(&quot;addURL&quot;, URL.class);\naddUrlMethod.setAccessible(true);\nString url = &quot;file:///home/dmitin/.cache/coursier/v1/https/repo1.maven.org/maven2/com/chuusai/shapeless_2.13/2.3.10/shapeless_2.13-2.3.10.jar&quot;;\naddUrlMethod.invoke(urlClassLoader, new URL(url));\nObject res = toolBox.eval(toolBox.parse(&quot;import shapeless._; 1 :: \\&quot;a\\&quot; :: HNil&quot;));\n// 1 :: a :: HNil\n</code></pre>\n<p>Another is to create a child class loader, new runtime mirror and toolbox</p>\n<pre class=\"lang-java prettyprint-override\"><code>ClassLoader classLoader1 = new URLClassLoader(new URL[]{new URL(url)}, classLoader);\nJavaUniverse.JavaMirror mirror1 = universe.runtimeMirror(classLoader1);\nToolBox&lt;?&gt; toolBox1 = toolsReflect.ToolBox(mirror1).mkToolBox(toolsReflect.mkSilentFrontEnd(), &quot;&quot;);\nObject res = toolBox1.eval(toolBox1.parse(&quot;import shapeless._; 1 :: \\&quot;a\\&quot; :: HNil&quot;));\n// 1 :: a :: HNil\n</code></pre>\n<hr />\n<p>Every toolbox has two mirrors (and two class loaders). The first is the one it was created with, i.e. the mirror of toolbox dependencies. The second is its own mirror <code>toolbox.mirror</code>, where new definitions live (the class loader is <code>mirror.classloader</code>).</p>\n<p>See the following example, where I create a new class, instantiate it, add new JAR, and use previous definition</p>\n<pre><code>import scala.reflect.api.JavaUniverse;\nimport scala.reflect.api.Symbols;\nimport scala.reflect.api.Trees;\nimport scala.tools.reflect.ToolBox;\nimport java.net.URL;\nimport java.net.URLClassLoader;\n\npublic class App {\n    public static void main(String[] args) throws Exception {\n        new App().run();\n    }\n\n    private static scala.reflect.runtime.package$ runtime = scala.reflect.runtime.package$.MODULE$;\n    private static JavaUniverse universe = runtime.universe();\n    private static ClassLoader classLoader = App.class.getClassLoader();\n    private static JavaUniverse.JavaMirror mirror = universe.runtimeMirror(classLoader);\n    private static scala.tools.reflect.package$ toolsReflect = scala.tools.reflect.package$.MODULE$;\n    private static ToolBox&lt;?&gt; toolBox = toolsReflect.ToolBox(mirror).mkToolBox(toolsReflect.mkSilentFrontEnd(), &quot;&quot;);\n    public static Symbols.SymbolApi symbol = toolBox.define((Trees.ClassDefApi) toolBox.parse(&quot;case class A(i: Int, s: String)&quot;));\n\n    public static Object a = toolBox.eval(toolBox.parse(\n            &quot;import scala.reflect.runtime.universe._;&quot; +\n            &quot; q\\&quot;\\&quot;\\&quot;new ${App.symbol.asInstanceOf[Symbol]}(1, \\&quot;a\\&quot;)\\&quot;\\&quot;\\&quot; &quot;\n    ));\n\n    public void run() throws Exception {\n        JavaUniverse.JavaMirror mirror1 = (JavaUniverse.JavaMirror) toolBox.mirror();\n        ClassLoader classLoader1 = mirror1.classLoader();\n\n        String url = &quot;file:///home/dmitin/.cache/coursier/v1/https/repo1.maven.org/maven2/com/chuusai/shapeless_2.13/2.3.10/shapeless_2.13-2.3.10.jar&quot;;\n        ClassLoader classLoader2 = new URLClassLoader(new URL[]{new URL(url)}, classLoader1);\n        JavaUniverse.JavaMirror mirror2 = universe.runtimeMirror(classLoader2);\n        ToolBox&lt;?&gt; toolBox2 = toolsReflect.ToolBox(mirror2).mkToolBox(toolsReflect.mkSilentFrontEnd(), &quot;&quot;);\n        Object res = toolBox2.eval(toolBox2.parse(&quot;import shapeless._; 1 :: \\&quot;a\\&quot; :: App.a :: HNil&quot;));\n        System.out.println(res); // 1 :: a :: A(1,a) :: HNil\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":17597753,"reputation":104,"user_id":12768362,"display_name":"evgrot"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":215,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677061771,"creation_date":1676297576,"question_id":75437009,"body_markdown":"i am trying to compile scala code in runtime in java programm.\r\nI am using jsr232 api and my code looks **like**:\r\n\r\n```\r\nScriptEngineManager manager=new ScriptEngineManager();\r\nScripted engine = (Scripted) manager.getEngineByName(&quot;scala&quot;);\r\nengine.compile(sourceCode);\r\n```\r\nMy pom looks **like**:\r\n\r\n```\r\n&lt;properties&gt;\r\n   &lt;scala.version&gt;2.13.10&lt;/scala.version&gt;\r\n&lt;/properties&gt;\r\n\r\n&lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.scala-lang&lt;/groupId&gt;\r\n            &lt;artifactId&gt;scala-compiler&lt;/artifactId&gt;\r\n            &lt;version&gt;${scala.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.scala-lang&lt;/groupId&gt;\r\n            &lt;artifactId&gt;scala-reflect&lt;/artifactId&gt;\r\n            &lt;version&gt;${scala.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.scala-lang&lt;/groupId&gt;\r\n            &lt;artifactId&gt;scala-library&lt;/artifactId&gt;\r\n            &lt;version&gt;${scala.version}&lt;/version&gt;\r\n       &lt;/dependency&gt;\r\n&lt;/dependencies&gt;\r\n```\r\nWhen i am running such code in IDE all is ok and i have no problems (all dependencies jars are in -classpath option)\r\nBut after i try to package to jar with copy dependencies (so i have small jar with fat manifest and put all dependencies to lib folder).\r\n```\r\n&lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.2.0&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;copy-dependencies&lt;/id&gt;\r\n                        &lt;phase&gt;package&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;copy-dependencies&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;outputDirectory&gt;${project.build.directory}/lib&lt;/outputDirectory&gt;\r\n                    &lt;overWriteReleases&gt;false&lt;/overWriteReleases&gt;\r\n                    &lt;overWriteSnapshots&gt;false&lt;/overWriteSnapshots&gt;\r\n                    &lt;overWriteIfNewer&gt;true&lt;/overWriteIfNewer&gt;\r\n                &lt;/configuration&gt;\r\n&lt;/plugin&gt;\r\n&lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.2.2&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;archive&gt;\r\n                        &lt;manifest&gt;\r\n                            &lt;addClasspath&gt;true&lt;/addClasspath&gt;\r\n                            &lt;classpathPrefix&gt;lib/&lt;/classpathPrefix&gt;\r\n                            &lt;mainClass&gt;$$$MYCLASS$$$&lt;/mainClass&gt;\r\n                        &lt;/manifest&gt;\r\n                        &lt;manifestEntries&gt;\r\n                            &lt;Class-Path&gt;.&lt;/Class-Path&gt;\r\n                        &lt;/manifestEntries&gt;\r\n                    &lt;/archive&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n```\r\n and run my application i got null on `(Scripted) manager.getEngineByName(&quot;scala&quot;);`\r\n\r\nAfter some research i found that `javax.script.ScriptEngineManager` contains scala engine factory;\r\nBut &#39;javax.script.ScriptEngineManager#getEngineByName(String)&#39; returns null if something go wrong during method execution(without printstacktrace).\r\nAnd my problem is on `ScriptEngine engine = spi.getScriptEngine();`\r\n\r\nI manually try to create Scala script engine the same way as manager and Scala.Factory(Engine factory) do this with some debug settings:\r\n\r\n```\r\nif(engine==null) {\r\n\tlog.warn(&quot;No scala script engine exists. Try load again&quot;);\r\n\ttry {\r\n\t\tSettings settings = new Settings();\r\n\t\tsettings.usejavacp().value_$eq(true);//same as scala code \r\n\t\tsettings.usemanifestcp().value_$eq(true); //same as scala code\r\n                settings.Yreplclassbased().value_$eq(true); //same as scala code\r\n                settings.verbose().value_$eq(true); //for more logs\r\n                settings.debug().value_$eq(true); //for more logs\r\n\t\tScripted.Factory fact = new Scripted.Factory();\r\n\t\tengine= Scripted.apply(fact,settings, ReplReporterImpl.defaultOut());\r\n\t}catch (Exception e){\r\n\t\tlog.error(&quot;Scala compiler wasn&#39;t initialized&quot;,e);\r\n\t\treturn;\r\n\t}\r\n}\r\n```\r\nI got next errors.\r\nTop level error is:\r\n\r\n```\r\njavax.script.ScriptException: Failed to compile ctx\r\n        at scala.tools.nsc.interpreter.shell.Scripted.&lt;init&gt;(Scripted.scala:89) ~[scala-compiler-2.13.10.jar:?]\r\n        at scala.tools.nsc.interpreter.shell.Scripted$.apply(Scripted.scala:278) ~[scala-compiler-2.13.10.jar:?]\r\n        at scala.tools.nsc.interpreter.shell.Scripted.apply(Scripted.scala) ~[scala-compiler-2.13.10.jar:?]\r\n```\r\nand some other errors from compiler:\r\n\r\n```\r\njava.lang.NullPointerException\r\n        at java.base/java.io.FilterInputStream.close(FilterInputStream.java:180)\r\n        at scala.reflect.io.ManifestResources$$anon$3.close(ZipArchive.scala:434)\r\n        at scala.tools.nsc.symtab.classfile.ReusableDataReader.reset(ReusableDataReader.scala:85)\r\n......\r\njava.io.IOException: class file &#39;file:..../target/lib/scala-library-2.13.10.jar(scala/Predef.class)&#39; is broken\r\n(class java.lang.NullPointerException/null)\r\n        at scala.tools.nsc.symtab.classfile.ClassfileParser.scala$tools$nsc$symtab$classfile$ClassfileParser$$handleError(ClassfileParser.scala:126)\r\n        at scala.tools.nsc.symtab.classfile.ClassfileParser$$anonfun$scala$tools$nsc$symtab$classfile$ClassfileParser$$parseErrorHandler$1.applyOrElse(ClassfileParser.scala:134)\r\n        at scala.tools.nsc.symtab.classfile.ClassfileParser$$anonfun$scala$tools$nsc$symtab$classfile$ClassfileParser$$parseErrorHandler$1.applyOrElse(ClassfileParser.scala:132)\r\n        at scala.runtime.AbstractPartialFunction.apply(AbstractPartialFunction.scala:35)\r\n......\r\njava.lang.NullPointerException\r\n        at java.base/java.io.FilterInputStream.close(FilterInputStream.java:180)\r\n        at scala.reflect.io.ManifestResources$$anon$3.close(ZipArchive.scala:434)\r\n        at scala.tools.nsc.symtab.classfile.ReusableDataReader.reset(ReusableDataReader.scala:85)\r\n        at scala.tools.nsc.symtab.classfile.ClassfileParser.$anonfun$parse$2(ClassfileParser.scala:161)\r\n......\r\njava.io.IOException: class file &#39;file:..../target/lib/scala-library-2.13.10.jar(scala/Unit.class)&#39; is broken\r\n(class java.lang.NullPointerException/null)\r\n        at scala.tools.nsc.symtab.classfile.ClassfileParser.scala$tools$nsc$symtab$classfile$ClassfileParser$$handleError(ClassfileParser.scala:126)\r\n        at scala.tools.nsc.symtab.classfile.ClassfileParser$$anonfun$scala$tools$nsc$symtab$classfile$ClassfileParser$$parseErrorHandler$1.applyOrElse(ClassfileParser.scala:134)\r\n        at scala.tools.nsc.symtab.classfile.ClassfileParser$$anonfun$scala$tools$nsc$symtab$classfile$ClassfileParser$$parseErrorHandler$1.applyOrElse(ClassfileParser.scala:132)\r\n        at scala.runtime.AbstractPartialFunction.apply(AbstractPartialFunction.scala:35)\r\n        at scala.tools.nsc.symtab.classfile.ClassfileParser.parse(ClassfileParser.scala:144)\r\n```\r\n\r\nIt looks like scala compiler for some reason can not read jar source files.\r\n\r\nJava version: \r\nopenjdk version &quot;11&quot; 2018-09-25\r\nOpenJDK Runtime Environment 18.9 (build 11+28)\r\nOpenJDK 64-Bit Server VM 18.9 (build 11+28, mixed mode)\r\n\r\n&gt; Updated after [Dmytro answer][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/75451783?noredirect=1\r\n\r\nIt helps. Thanks alot.\r\n\r\nBut still got 1 issue with runtime classloading. I want user be able to add new dependency jar runtime.\r\n\r\nOn first version i do it like: `engine.intp().addUrlsToClassPath(new ArraySeq.ofRef&lt;&gt;(url))`. And it works well(i mean well when run inside IDEA)\r\n\r\nNow i try do it like:\r\n```\r\nprivate final ScalaCompilerClassLoader urlClassLoader = new ScalaCompilerClassLoader(new URL[]{},ClassLoader.getSystemClassLoader());\r\n\r\nprivate static class ScalaCompilerClassLoader extends URLClassLoader {\r\n\tpublic ScalaCompilerClassLoader(URL[] urls, ClassLoader parent) {\r\n           super(urls, parent);\r\n\t}\r\n\r\n    public void add(URL url){\r\n        super.addURL(url);\r\n    }\r\n}\r\n```\r\nand i use your code with my classLoader.\r\n```\r\nJavaUniverse.JavaMirror mirror = universe.runtimeMirror(urlClassLoader);\r\n```\r\n\r\nThe issue is that i can add new jar to my urlClassLoader before first call to `toolBox.eval(toolBox.parse(sourceCode))`.\r\nAfter first `toolBox.eval` call newly injected dependencies are not recognized by compiler.\r\n\r\nAnd now i have to create new toolBox after each new jar dependency injecting.","title":"Scala script engine not initialized when starting java -jar file. javax.script.ScriptException: Failed to compile ctx","body":"<p>i am trying to compile scala code in runtime in java programm.\nI am using jsr232 api and my code looks <strong>like</strong>:</p>\n<pre><code>ScriptEngineManager manager=new ScriptEngineManager();\nScripted engine = (Scripted) manager.getEngineByName(&quot;scala&quot;);\nengine.compile(sourceCode);\n</code></pre>\n<p>My pom looks <strong>like</strong>:</p>\n<pre><code>&lt;properties&gt;\n   &lt;scala.version&gt;2.13.10&lt;/scala.version&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.scala-lang&lt;/groupId&gt;\n            &lt;artifactId&gt;scala-compiler&lt;/artifactId&gt;\n            &lt;version&gt;${scala.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.scala-lang&lt;/groupId&gt;\n            &lt;artifactId&gt;scala-reflect&lt;/artifactId&gt;\n            &lt;version&gt;${scala.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.scala-lang&lt;/groupId&gt;\n            &lt;artifactId&gt;scala-library&lt;/artifactId&gt;\n            &lt;version&gt;${scala.version}&lt;/version&gt;\n       &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<p>When i am running such code in IDE all is ok and i have no problems (all dependencies jars are in -classpath option)\nBut after i try to package to jar with copy dependencies (so i have small jar with fat manifest and put all dependencies to lib folder).</p>\n<pre><code>&lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.2.0&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;copy-dependencies&lt;/id&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;copy-dependencies&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n                &lt;configuration&gt;\n                    &lt;outputDirectory&gt;${project.build.directory}/lib&lt;/outputDirectory&gt;\n                    &lt;overWriteReleases&gt;false&lt;/overWriteReleases&gt;\n                    &lt;overWriteSnapshots&gt;false&lt;/overWriteSnapshots&gt;\n                    &lt;overWriteIfNewer&gt;true&lt;/overWriteIfNewer&gt;\n                &lt;/configuration&gt;\n&lt;/plugin&gt;\n&lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.2.2&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;archive&gt;\n                        &lt;manifest&gt;\n                            &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n                            &lt;classpathPrefix&gt;lib/&lt;/classpathPrefix&gt;\n                            &lt;mainClass&gt;$$$MYCLASS$$$&lt;/mainClass&gt;\n                        &lt;/manifest&gt;\n                        &lt;manifestEntries&gt;\n                            &lt;Class-Path&gt;.&lt;/Class-Path&gt;\n                        &lt;/manifestEntries&gt;\n                    &lt;/archive&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n</code></pre>\n<p>and run my application i got null on <code>(Scripted) manager.getEngineByName(&quot;scala&quot;);</code></p>\n<p>After some research i found that <code>javax.script.ScriptEngineManager</code> contains scala engine factory;\nBut 'javax.script.ScriptEngineManager#getEngineByName(String)' returns null if something go wrong during method execution(without printstacktrace).\nAnd my problem is on <code>ScriptEngine engine = spi.getScriptEngine();</code></p>\n<p>I manually try to create Scala script engine the same way as manager and Scala.Factory(Engine factory) do this with some debug settings:</p>\n<pre><code>if(engine==null) {\n    log.warn(&quot;No scala script engine exists. Try load again&quot;);\n    try {\n        Settings settings = new Settings();\n        settings.usejavacp().value_$eq(true);//same as scala code \n        settings.usemanifestcp().value_$eq(true); //same as scala code\n                settings.Yreplclassbased().value_$eq(true); //same as scala code\n                settings.verbose().value_$eq(true); //for more logs\n                settings.debug().value_$eq(true); //for more logs\n        Scripted.Factory fact = new Scripted.Factory();\n        engine= Scripted.apply(fact,settings, ReplReporterImpl.defaultOut());\n    }catch (Exception e){\n        log.error(&quot;Scala compiler wasn't initialized&quot;,e);\n        return;\n    }\n}\n</code></pre>\n<p>I got next errors.\nTop level error is:</p>\n<pre><code>javax.script.ScriptException: Failed to compile ctx\n        at scala.tools.nsc.interpreter.shell.Scripted.&lt;init&gt;(Scripted.scala:89) ~[scala-compiler-2.13.10.jar:?]\n        at scala.tools.nsc.interpreter.shell.Scripted$.apply(Scripted.scala:278) ~[scala-compiler-2.13.10.jar:?]\n        at scala.tools.nsc.interpreter.shell.Scripted.apply(Scripted.scala) ~[scala-compiler-2.13.10.jar:?]\n</code></pre>\n<p>and some other errors from compiler:</p>\n<pre><code>java.lang.NullPointerException\n        at java.base/java.io.FilterInputStream.close(FilterInputStream.java:180)\n        at scala.reflect.io.ManifestResources$$anon$3.close(ZipArchive.scala:434)\n        at scala.tools.nsc.symtab.classfile.ReusableDataReader.reset(ReusableDataReader.scala:85)\n......\njava.io.IOException: class file 'file:..../target/lib/scala-library-2.13.10.jar(scala/Predef.class)' is broken\n(class java.lang.NullPointerException/null)\n        at scala.tools.nsc.symtab.classfile.ClassfileParser.scala$tools$nsc$symtab$classfile$ClassfileParser$$handleError(ClassfileParser.scala:126)\n        at scala.tools.nsc.symtab.classfile.ClassfileParser$$anonfun$scala$tools$nsc$symtab$classfile$ClassfileParser$$parseErrorHandler$1.applyOrElse(ClassfileParser.scala:134)\n        at scala.tools.nsc.symtab.classfile.ClassfileParser$$anonfun$scala$tools$nsc$symtab$classfile$ClassfileParser$$parseErrorHandler$1.applyOrElse(ClassfileParser.scala:132)\n        at scala.runtime.AbstractPartialFunction.apply(AbstractPartialFunction.scala:35)\n......\njava.lang.NullPointerException\n        at java.base/java.io.FilterInputStream.close(FilterInputStream.java:180)\n        at scala.reflect.io.ManifestResources$$anon$3.close(ZipArchive.scala:434)\n        at scala.tools.nsc.symtab.classfile.ReusableDataReader.reset(ReusableDataReader.scala:85)\n        at scala.tools.nsc.symtab.classfile.ClassfileParser.$anonfun$parse$2(ClassfileParser.scala:161)\n......\njava.io.IOException: class file 'file:..../target/lib/scala-library-2.13.10.jar(scala/Unit.class)' is broken\n(class java.lang.NullPointerException/null)\n        at scala.tools.nsc.symtab.classfile.ClassfileParser.scala$tools$nsc$symtab$classfile$ClassfileParser$$handleError(ClassfileParser.scala:126)\n        at scala.tools.nsc.symtab.classfile.ClassfileParser$$anonfun$scala$tools$nsc$symtab$classfile$ClassfileParser$$parseErrorHandler$1.applyOrElse(ClassfileParser.scala:134)\n        at scala.tools.nsc.symtab.classfile.ClassfileParser$$anonfun$scala$tools$nsc$symtab$classfile$ClassfileParser$$parseErrorHandler$1.applyOrElse(ClassfileParser.scala:132)\n        at scala.runtime.AbstractPartialFunction.apply(AbstractPartialFunction.scala:35)\n        at scala.tools.nsc.symtab.classfile.ClassfileParser.parse(ClassfileParser.scala:144)\n</code></pre>\n<p>It looks like scala compiler for some reason can not read jar source files.</p>\n<p>Java version:\nopenjdk version &quot;11&quot; 2018-09-25\nOpenJDK Runtime Environment 18.9 (build 11+28)\nOpenJDK 64-Bit Server VM 18.9 (build 11+28, mixed mode)</p>\n<blockquote>\n<p>Updated after <a href=\"https://stackoverflow.com/a/75451783?noredirect=1\">Dmytro answer</a></p>\n</blockquote>\n<p>It helps. Thanks alot.</p>\n<p>But still got 1 issue with runtime classloading. I want user be able to add new dependency jar runtime.</p>\n<p>On first version i do it like: <code>engine.intp().addUrlsToClassPath(new ArraySeq.ofRef&lt;&gt;(url))</code>. And it works well(i mean well when run inside IDEA)</p>\n<p>Now i try do it like:</p>\n<pre><code>private final ScalaCompilerClassLoader urlClassLoader = new ScalaCompilerClassLoader(new URL[]{},ClassLoader.getSystemClassLoader());\n\nprivate static class ScalaCompilerClassLoader extends URLClassLoader {\n    public ScalaCompilerClassLoader(URL[] urls, ClassLoader parent) {\n           super(urls, parent);\n    }\n\n    public void add(URL url){\n        super.addURL(url);\n    }\n}\n</code></pre>\n<p>and i use your code with my classLoader.</p>\n<pre><code>JavaUniverse.JavaMirror mirror = universe.runtimeMirror(urlClassLoader);\n</code></pre>\n<p>The issue is that i can add new jar to my urlClassLoader before first call to <code>toolBox.eval(toolBox.parse(sourceCode))</code>.\nAfter first <code>toolBox.eval</code> call newly injected dependencies are not recognized by compiler.</p>\n<p>And now i have to create new toolBox after each new jar dependency injecting.</p>\n"},{"tags":["java","amazon-web-services","redis","elastic-cache"],"comments":[{"owner":{"account_id":7027398,"reputation":21375,"user_id":5384363,"accept_rate":64,"display_name":"for_stack"},"score":0,"creation_date":1677118351,"post_id":75531341,"comment_id":133276590,"body_markdown":"[This](https://stackoverflow.com/questions/75515917) is a similar question. Check its answer. Instead of getting the range of an input range, you can get the first item larger than the input (i.e. `zrangebyscore ranges input inf limit 0 1`), and check if your input is in the returned range.","body":"<a href=\"https://stackoverflow.com/questions/75515917\">This</a> is a similar question. Check its answer. Instead of getting the range of an input range, you can get the first item larger than the input (i.e. <code>zrangebyscore ranges input inf limit 0 1</code>), and check if your input is in the returned range."}],"owner":{"account_id":1410257,"reputation":2118,"user_id":1337007,"accept_rate":72,"display_name":"ghostrider"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677061522,"creation_date":1677061522,"question_id":75531341,"body_markdown":"I have a requirement to check if the `input` number is between 2 ranges `lowrange` and `highrange`. These range values can be defined as 2 separate columns like below(similar to RDBMS) or maybe any other `datastructure` that redis or any in memory cache supports. I know `redis` or any other cache for that matter stores key value pair but is there any datastructure that redis has, that can support below use case? I thought of having a string key that can store &quot;lowrange-highrange&quot;, but that means I have to iteratively read all the keys of cache, store them locally and then check if my int input is between them. \r\n\r\n**Input** = 12345\r\n\r\n**Entry in redis**\r\n\r\n**lowrange &amp;nbsp;&amp;nbsp; highrange   &amp;nbsp; value**\r\n\r\n12340 &amp;nbsp;  &amp;nbsp; &amp;nbsp;  &amp;nbsp;        12349&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;     &quot;I am inside this range&quot;","title":"Is it possible to check for betweenness in the key in redis cache","body":"<p>I have a requirement to check if the <code>input</code> number is between 2 ranges <code>lowrange</code> and <code>highrange</code>. These range values can be defined as 2 separate columns like below(similar to RDBMS) or maybe any other <code>datastructure</code> that redis or any in memory cache supports. I know <code>redis</code> or any other cache for that matter stores key value pair but is there any datastructure that redis has, that can support below use case? I thought of having a string key that can store &quot;lowrange-highrange&quot;, but that means I have to iteratively read all the keys of cache, store them locally and then check if my int input is between them.</p>\n<p><strong>Input</strong> = 12345</p>\n<p><strong>Entry in redis</strong></p>\n<p><strong>lowrange    highrange     value</strong></p>\n<p>12340                  12349            &quot;I am inside this range&quot;</p>\n"},{"tags":["java","sql","hibernate","jpa"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1677082952,"post_id":75530334,"comment_id":133268414,"body_markdown":"I don&#39;t follow you, but maybe it is because of your naming. What is StoreBond and why does it exist? Store-&gt;User is a ManyToMany or a OneToMany (where user then has a ManyToOne-&gt;Store)? JPA does not force you to do anything, your use case is the one forcing you to have some container that can hold Store references. Why would there be a problem with a Store entity having references? It is a common practice, and while there are pitfalls with references, they have well documented solutions.","body":"I don&#39;t follow you, but maybe it is because of your naming. What is StoreBond and why does it exist? Store-&gt;User is a ManyToMany or a OneToMany (where user then has a ManyToOne-&gt;Store)? JPA does not force you to do anything, your use case is the one forcing you to have some container that can hold Store references. Why would there be a problem with a Store entity having references? It is a common practice, and while there are pitfalls with references, they have well documented solutions."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1677083076,"post_id":75530334,"comment_id":133268459,"body_markdown":"Otherwise, you can easily have a StoreLight (for basic mappings) and Store entity with references (Both just need the Table annotation that tells JPA that they use the same table), or just use view objects or fetch graphs to only return the basic mappings on the Store entity. As for querying, if User has a reference to Store, you don&#39;t need a reference from Store to user to be able to query over that relationship.","body":"Otherwise, you can easily have a StoreLight (for basic mappings) and Store entity with references (Both just need the Table annotation that tells JPA that they use the same table), or just use view objects or fetch graphs to only return the basic mappings on the Store entity. As for querying, if User has a reference to Store, you don&#39;t need a reference from Store to user to be able to query over that relationship."},{"owner":{"account_id":931121,"reputation":21661,"user_id":961018,"accept_rate":56,"display_name":"mjs"},"score":0,"creation_date":1677242574,"post_id":75530334,"comment_id":133304045,"body_markdown":"Hmm... what I want and have are Store things, defined as own entities, because I have not found it historically stable or maintainable enough to have one big store entity containing all the stuff related to it. \n\nRather, if I need to add something to Store, such as StoreCustomer, I create a new entity and thus a new table with that relationship alone. \n\nHowever, doing it this way, you no longer have a central Store entity, from which you can a) search, b) collect related data easily.","body":"Hmm... what I want and have are Store things, defined as own entities, because I have not found it historically stable or maintainable enough to have one big store entity containing all the stuff related to it.   Rather, if I need to add something to Store, such as StoreCustomer, I create a new entity and thus a new table with that relationship alone.   However, doing it this way, you no longer have a central Store entity, from which you can a) search, b) collect related data easily."},{"owner":{"account_id":931121,"reputation":21661,"user_id":961018,"accept_rate":56,"display_name":"mjs"},"score":0,"creation_date":1677242773,"post_id":75530334,"comment_id":133304096,"body_markdown":"Now, there should be a way to create a Store entity that only exists in theory,  or as a mapper object which will allow you this, which we could call StoreBond. \n\nIt would be only a read entity, and for the purpose of querying and building say hibernate criteria queries. \n\nThe other relationships already exists, so it would be a question of how to map existing tables onto this readonly lesser &quot;entity&quot;. I do not need a table for it but that I can manage do myself.","body":"Now, there should be a way to create a Store entity that only exists in theory,  or as a mapper object which will allow you this, which we could call StoreBond.   It would be only a read entity, and for the purpose of querying and building say hibernate criteria queries.   The other relationships already exists, so it would be a question of how to map existing tables onto this readonly lesser &quot;entity&quot;. I do not need a table for it but that I can manage do myself."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1677253255,"post_id":75530334,"comment_id":133307170,"body_markdown":"Not sure what you mean at all - Other than the need for a customers table (and possibly ManyToMany join table) what new or other table is involved? If you have a Store entity, adding a reference to a list of customers seems trivial. You can clear up what you mean by showing it in your question, but yes, you can map an entity to a table, any table, just to read from them. Caching that data becomes a pain - if you&#39;ve already loaded that same partial data as &#39;storeX&#39; querying and fetching &#39;StoreY&#39; can&#39;t use any of it and will have to fetch it again.","body":"Not sure what you mean at all - Other than the need for a customers table (and possibly ManyToMany join table) what new or other table is involved? If you have a Store entity, adding a reference to a list of customers seems trivial. You can clear up what you mean by showing it in your question, but yes, you can map an entity to a table, any table, just to read from them. Caching that data becomes a pain - if you&#39;ve already loaded that same partial data as &#39;storeX&#39; querying and fetching &#39;StoreY&#39; can&#39;t use any of it and will have to fetch it again."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":0,"creation_date":1677253367,"post_id":75530334,"comment_id":133307208,"body_markdown":"Why not just create the uber Store entity that models the database as it really is. If your issues are with passing around that instance, that is what DTOs and mappers are for - use your trimmed down view objects to convert Store instances into StoreCustomerDTO with only the data needed. Leave everything as lazily fetched and you won&#39;t see much difference (though fetch joins might help on some relationships if you know they&#39;ll be needed for some DTOs but not others). Projections (answered above) is common in Spring for the same thing, as is JPA constructor queries to build non-entities","body":"Why not just create the uber Store entity that models the database as it really is. If your issues are with passing around that instance, that is what DTOs and mappers are for - use your trimmed down view objects to convert Store instances into StoreCustomerDTO with only the data needed. Leave everything as lazily fetched and you won&#39;t see much difference (though fetch joins might help on some relationships if you know they&#39;ll be needed for some DTOs but not others). Projections (answered above) is common in Spring for the same thing, as is JPA constructor queries to build non-entities"},{"owner":{"account_id":931121,"reputation":21661,"user_id":961018,"accept_rate":56,"display_name":"mjs"},"score":0,"creation_date":1677257937,"post_id":75530334,"comment_id":133308582,"body_markdown":"The uber entity is exactly what I am trying to avoid. JoinTable seems to have done the trick for now.","body":"The uber entity is exactly what I am trying to avoid. JoinTable seems to have done the trick for now."}],"answers":[{"tags":[],"owner":{"account_id":7673258,"reputation":1688,"user_id":6200354,"display_name":"atish.s"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677061488,"creation_date":1677061488,"answer_id":75531336,"question_id":75530334,"body_markdown":"To query without the need of an entity can be solved using `projections`. A very good answer provided by Vlad Mihalcea on [stackoverflow - 23719237][1].\r\n\r\nInstead of an entity to aggregate `store` data, you can a DTO to store the data fetched.\r\n\r\nIn your case, you would still have a class like `StoreBond`, but as a simple DTO instead of an entity.\r\n\r\nHowever your question is quite challenging in itself because I do no think it is possible to all the data at once or even with the help of a &quot;third&quot; table. \r\n\r\nThe &quot;third&quot; table would be looking like;\r\n\r\n    store id       user id      address id\r\n    1               1           null\r\n    1               2           null\r\n    1               null        1\r\n    1               null        2\r\n\r\nIf there is a native query to fetch all the data at once, it can easily be translated to JPQL and used with the JPA&#39;s `EntityManager`.\r\n\r\n  [1]: https://stackoverflow.com/a/45934668/6200354","title":"How to create a mapping entity to its association without creating a new table","body":"<p>To query without the need of an entity can be solved using <code>projections</code>. A very good answer provided by Vlad Mihalcea on <a href=\"https://stackoverflow.com/a/45934668/6200354\">stackoverflow - 23719237</a>.</p>\n<p>Instead of an entity to aggregate <code>store</code> data, you can a DTO to store the data fetched.</p>\n<p>In your case, you would still have a class like <code>StoreBond</code>, but as a simple DTO instead of an entity.</p>\n<p>However your question is quite challenging in itself because I do no think it is possible to all the data at once or even with the help of a &quot;third&quot; table.</p>\n<p>The &quot;third&quot; table would be looking like;</p>\n<pre><code>store id       user id      address id\n1               1           null\n1               2           null\n1               null        1\n1               null        2\n</code></pre>\n<p>If there is a native query to fetch all the data at once, it can easily be translated to JPQL and used with the JPA's <code>EntityManager</code>.</p>\n"}],"owner":{"account_id":931121,"reputation":21661,"user_id":961018,"accept_rate":56,"display_name":"mjs"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":98,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677061488,"creation_date":1677056670,"question_id":75530334,"body_markdown":"This has always been an annoyance with Hibernate / JPA and now trying to see if there is a way around this limitation. \r\n\r\nBasically given a **Store** and **User** ... say a **Store** has **many** **users**. \r\n\r\nI prefer **Store** declared **manually** in a **Store** table, and users in a **User** table. The connection is in a **StoreUser** table. \r\n\r\nYou repeat this for a number of this, **StoreAddress**, **StoreEmployee** and so on and you have a bunch of things. \r\n\r\nHowever, for the common case of getting everything related to a **Store**, and getting the users, addresses and what not, JPA forces you to create a Store Entity that contains all these things.\r\n\r\n    StoreBond {\r\n           List&lt;Address&gt; address\r\n           List&lt;User&gt; users\r\n           ....\r\n    }\r\n\r\nMy intention is just to user this for query, never to insert so **I don&#39;t need a table for it**.  \r\n\r\nMy intention is to be able to build **Hibernate** **criteria** queries and map the associations to do so. Criteria queries can be quite powerful to filter on things. \r\n\r\nBut I do not want an empty table in my sql schema since it won&#39;t do anything anyway, I also don&#39;t want this class to have anything to do with the model other than mapping to it results from the database. \r\n\r\nIs there a way around this limitation. \r\n\r\nTo have a **connection/bond entity** merely for getting to the associations to be able to query them and binding the result to this object. \r\n\r\nThe alternative is that I have declared **StoreBond** { .. } class as the center of everything, which I find problematic over time. \r\n\r\nEmbeddable is problematic syntactically so I please do not entertain it for this purpose. \r\n\r\nNot, sure what happens if you map such a StoreBond entity currently and then immediately after schema generation drop it from the database. I think that might still work on the JPA level, but not sure. It might be required to have certain ids populated which would be the basis for reaching out to the other associations? \r\n\r\n\r\n","title":"How to create a mapping entity to its association without creating a new table","body":"<p>This has always been an annoyance with Hibernate / JPA and now trying to see if there is a way around this limitation.</p>\n<p>Basically given a <strong>Store</strong> and <strong>User</strong> ... say a <strong>Store</strong> has <strong>many</strong> <strong>users</strong>.</p>\n<p>I prefer <strong>Store</strong> declared <strong>manually</strong> in a <strong>Store</strong> table, and users in a <strong>User</strong> table. The connection is in a <strong>StoreUser</strong> table.</p>\n<p>You repeat this for a number of this, <strong>StoreAddress</strong>, <strong>StoreEmployee</strong> and so on and you have a bunch of things.</p>\n<p>However, for the common case of getting everything related to a <strong>Store</strong>, and getting the users, addresses and what not, JPA forces you to create a Store Entity that contains all these things.</p>\n<pre><code>StoreBond {\n       List&lt;Address&gt; address\n       List&lt;User&gt; users\n       ....\n}\n</code></pre>\n<p>My intention is just to user this for query, never to insert so <strong>I don't need a table for it</strong>.</p>\n<p>My intention is to be able to build <strong>Hibernate</strong> <strong>criteria</strong> queries and map the associations to do so. Criteria queries can be quite powerful to filter on things.</p>\n<p>But I do not want an empty table in my sql schema since it won't do anything anyway, I also don't want this class to have anything to do with the model other than mapping to it results from the database.</p>\n<p>Is there a way around this limitation.</p>\n<p>To have a <strong>connection/bond entity</strong> merely for getting to the associations to be able to query them and binding the result to this object.</p>\n<p>The alternative is that I have declared <strong>StoreBond</strong> { .. } class as the center of everything, which I find problematic over time.</p>\n<p>Embeddable is problematic syntactically so I please do not entertain it for this purpose.</p>\n<p>Not, sure what happens if you map such a StoreBond entity currently and then immediately after schema generation drop it from the database. I think that might still work on the JPA level, but not sure. It might be required to have certain ids populated which would be the basis for reaching out to the other associations?</p>\n"},{"tags":["java","selenium","webdriver","selenium-webdriver"],"comments":[{"owner":{"account_id":362538,"reputation":22412,"user_id":705773,"accept_rate":98,"display_name":"Ajinkya"},"score":8,"creation_date":1413953548,"post_id":5868439,"comment_id":41633160,"body_markdown":"To me only [Paul&#39;s](http://stackoverflow.com/a/5876462/705773) answer look correct, most of the highly voted answer talks about waiting for a particular element.","body":"To me only <a href=\"http://stackoverflow.com/a/5876462/705773\">Paul&#39;s</a> answer look correct, most of the highly voted answer talks about waiting for a particular element."},{"owner":{"account_id":6781763,"reputation":3428,"user_id":5267751,"display_name":"user202729"},"score":0,"creation_date":1639039251,"post_id":5868439,"comment_id":124247874,"body_markdown":"See also: [load - Selenium wait until document is ready - Stack Overflow](https://stackoverflow.com/questions/15122864/selenium-wait-until-document-is-ready/15124562#15124562) and  [Python Selenium - Wait until next page has loaded after form submit - Stack Overflow](https://stackoverflow.com/questions/42069503/python-selenium-wait-until-next-page-has-loaded-after-form-submit)","body":"See also: <a href=\"https://stackoverflow.com/questions/15122864/selenium-wait-until-document-is-ready/15124562#15124562\">load - Selenium wait until document is ready - Stack Overflow</a> and  <a href=\"https://stackoverflow.com/questions/42069503/python-selenium-wait-until-next-page-has-loaded-after-form-submit\">Python Selenium - Wait until next page has loaded after form submit - Stack Overflow</a>"}],"answers":[{"comments":[{"owner":{"account_id":261723,"reputation":1177,"user_id":546095,"accept_rate":75,"display_name":"9ikhan"},"score":2,"creation_date":1304481369,"post_id":5876462,"comment_id":6760059,"body_markdown":"Adding to Paul&#39;s answer. Please check this also http://stackoverflow.com/questions/5858743/driver-wait-throws-illegalmonitorstateexception/5865445#5865445.","body":"Adding to Paul&#39;s answer. Please check this also <a href=\"http://stackoverflow.com/questions/5858743/driver-wait-throws-illegalmonitorstateexception/5865445#5865445\" title=\"driver wait throws illegalmonitorstateexception\">stackoverflow.com/questions/5858743/&hellip;</a>."},{"owner":{"account_id":127407,"reputation":8383,"user_id":324531,"accept_rate":85,"display_name":"Sebi"},"score":32,"creation_date":1317201618,"post_id":5876462,"comment_id":9193333,"body_markdown":"Unfortunately, Selenium 2 doesn&#39;t wait in all cases for a page to load. For example WebElement:click() doesn&#39;t wait and this is explicitly said in the belonging Javadoc. However, they don&#39;t tell how I can check for a new page to be loaded. \n\n`If click() causes a new page to be loaded via an event or is done by sending a native event (which is a common case on Firefox, IE on Windows) then the method will not wait for it to be loaded and the caller should verify that a new page has been loaded.`","body":"Unfortunately, Selenium 2 doesn&#39;t wait in all cases for a page to load. For example WebElement:click() doesn&#39;t wait and this is explicitly said in the belonging Javadoc. However, they don&#39;t tell how I can check for a new page to be loaded.   <code>If click() causes a new page to be loaded via an event or is done by sending a native event (which is a common case on Firefox, IE on Windows) then the method will not wait for it to be loaded and the caller should verify that a new page has been loaded.</code>"},{"owner":{"account_id":362538,"reputation":22412,"user_id":705773,"accept_rate":98,"display_name":"Ajinkya"},"score":0,"creation_date":1413953697,"post_id":5876462,"comment_id":41633200,"body_markdown":"From [doc](http://selenium.googlecode.com/git/docs/api/java/org/openqa/selenium/WebDriver.html#get%28java.lang.String%29) _..and the method will block until the load is complete..._","body":"From <a href=\"http://selenium.googlecode.com/git/docs/api/java/org/openqa/selenium/WebDriver.html#get%28java.lang.String%29\" rel=\"nofollow noreferrer\">doc</a> <i>..and the method will block until the load is complete...</i>"},{"owner":{"account_id":163414,"reputation":6088,"user_id":385544,"accept_rate":97,"display_name":"Paul Hadfield"},"score":2,"creation_date":1413973243,"post_id":5876462,"comment_id":41641417,"body_markdown":"@Karna: Yes, in theory it should always and in practise it did most of the time.  Using Selenium at the time highlighted that there were times when it thought the page had finished loading but it hadn&#39;t.  I&#39;ve not used selenium much recently so this may or may not still be the case.","body":"@Karna: Yes, in theory it should always and in practise it did most of the time.  Using Selenium at the time highlighted that there were times when it thought the page had finished loading but it hadn&#39;t.  I&#39;ve not used selenium much recently so this may or may not still be the case."},{"owner":{"account_id":362538,"reputation":22412,"user_id":705773,"accept_rate":98,"display_name":"Ajinkya"},"score":0,"creation_date":1413976823,"post_id":5876462,"comment_id":41643153,"body_markdown":"It is still same. Commented to support your answer. See my comment on question","body":"It is still same. Commented to support your answer. See my comment on question"},{"owner":{"account_id":1016880,"reputation":1118,"user_id":1028259,"accept_rate":50,"display_name":"dmansfield"},"score":3,"creation_date":1431092431,"post_id":5876462,"comment_id":48360191,"body_markdown":"I agree : especially internet explorer driver is buggy and returns control immediately in some cases even though a page is still loading. It my case, I added a wait using `JavascriptExecutor` , waiting for document.readyState to be &quot;complete&quot;.  Because of the round trip from selenium to the browser, the race condition is mitigated I guess, and this &quot;always&quot; works for me.  After &quot;click()&quot; when I expect a page to load, I explicitly wait (using WebDriverWait)  for the readystate.  ]","body":"I agree : especially internet explorer driver is buggy and returns control immediately in some cases even though a page is still loading. It my case, I added a wait using <code>JavascriptExecutor</code> , waiting for document.readyState to be &quot;complete&quot;.  Because of the round trip from selenium to the browser, the race condition is mitigated I guess, and this &quot;always&quot; works for me.  After &quot;click()&quot; when I expect a page to load, I explicitly wait (using WebDriverWait)  for the readystate.  ]"}],"tags":[],"owner":{"account_id":163414,"reputation":6088,"user_id":385544,"accept_rate":97,"display_name":"Paul Hadfield"},"comment_count":6,"down_vote_count":1,"up_vote_count":37,"is_accepted":false,"score":36,"last_activity_date":1444473830,"creation_date":1304461627,"answer_id":5876462,"question_id":5868439,"body_markdown":"In general, with Selenium 2.0 the web driver should only return control to the calling code once it has determined that the page has loaded. If it does not, you can call `waitforelemement`, which cycles round calling `findelement` until it is found or times out (time out can be set).\r\n","title":"Wait for page load in Selenium","body":"<p>In general, with Selenium 2.0 the web driver should only return control to the calling code once it has determined that the page has loaded. If it does not, you can call <code>waitforelemement</code>, which cycles round calling <code>findelement</code> until it is found or times out (time out can be set).</p>\n"},{"comments":[{"owner":{"account_id":1328773,"reputation":37883,"user_id":1273080,"accept_rate":100,"display_name":"Petr Janeček"},"score":4,"creation_date":1339332973,"post_id":6107997,"comment_id":14322538,"body_markdown":"A year later (current Selenium version 2.23.1), there&#39;s no `RenderedWebElement` in the API. However, `isDisplayed()` method is now available directly on `WebElement`.","body":"A year later (current Selenium version 2.23.1), there&#39;s no <code>RenderedWebElement</code> in the API. However, <code>isDisplayed()</code> method is now available directly on <code>WebElement</code>."},{"owner":{"account_id":9662,"reputation":8462,"user_id":17945,"accept_rate":36,"display_name":"reinierpost"},"score":2,"creation_date":1344948418,"post_id":6107997,"comment_id":15925734,"body_markdown":"Polling is terrible when it can be avoided.","body":"Polling is terrible when it can be avoided."}],"tags":[],"owner":{"account_id":339155,"reputation":8863,"user_id":668455,"accept_rate":80,"display_name":"Tristan"},"comment_count":2,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1413953435,"creation_date":1306227438,"answer_id":6107997,"question_id":5868439,"body_markdown":"If you want to wait for a specific element to load, you can use the `isDisplayed()` method on a `RenderedWebElement` :\r\n\r\n    // Sleep until the div we want is visible or 5 seconds is over\r\n    long end = System.currentTimeMillis() + 5000;\r\n    while (System.currentTimeMillis() &lt; end) {\r\n        // Browsers which render content (such as Firefox and IE) return &quot;RenderedWebElements&quot;\r\n        RenderedWebElement resultsDiv = (RenderedWebElement) driver.findElement(By.className(&quot;gac_m&quot;));\r\n\r\n        // If results have been returned, the results are displayed in a drop down.\r\n        if (resultsDiv.isDisplayed()) {\r\n          break;\r\n        }\r\n    }\r\n\r\n(Example from [The 5 Minute Getting Started Guide][1])\r\n\r\n[1]:http://code.google.com/p/selenium/wiki/GettingStarted","title":"Wait for page load in Selenium","body":"<p>If you want to wait for a specific element to load, you can use the <code>isDisplayed()</code> method on a <code>RenderedWebElement</code> :</p>\n\n<pre><code>// Sleep until the div we want is visible or 5 seconds is over\nlong end = System.currentTimeMillis() + 5000;\nwhile (System.currentTimeMillis() &lt; end) {\n    // Browsers which render content (such as Firefox and IE) return \"RenderedWebElements\"\n    RenderedWebElement resultsDiv = (RenderedWebElement) driver.findElement(By.className(\"gac_m\"));\n\n    // If results have been returned, the results are displayed in a drop down.\n    if (resultsDiv.isDisplayed()) {\n      break;\n    }\n}\n</code></pre>\n\n<p>(Example from <a href=\"http://code.google.com/p/selenium/wiki/GettingStarted\" rel=\"nofollow\">The 5 Minute Getting Started Guide</a>)</p>\n"},{"comments":[{"owner":{"account_id":171963,"reputation":3803,"user_id":399698,"accept_rate":100,"display_name":"CrazyDart"},"score":0,"creation_date":1321511002,"post_id":7811812,"comment_id":10022444,"body_markdown":"This worked great.  Its a very nice modern way to solve the problem.","body":"This worked great.  Its a very nice modern way to solve the problem."},{"owner":{"account_id":2572861,"reputation":1555,"user_id":2231163,"accept_rate":100,"display_name":"Emmanuel Angelo.R"},"score":0,"creation_date":1397452353,"post_id":7811812,"comment_id":35223294,"body_markdown":"what is that TimeSpan mean, as we should create a method like timespan or its an inbuilt method?","body":"what is that TimeSpan mean, as we should create a method like timespan or its an inbuilt method?"},{"owner":{"account_id":904,"reputation":14305,"user_id":1185,"accept_rate":92,"display_name":"rjzii"},"score":3,"creation_date":1398263658,"post_id":7811812,"comment_id":35571345,"body_markdown":"@EmmanuelAngelo.R [TimeSpan](http://msdn.microsoft.com/en-us/library/system.timespan.aspx) is a .Net data structure.","body":"@EmmanuelAngelo.R <a href=\"http://msdn.microsoft.com/en-us/library/system.timespan.aspx\" rel=\"nofollow noreferrer\">TimeSpan</a> is a .Net data structure."},{"owner":{"account_id":429968,"reputation":24115,"user_id":813142,"accept_rate":92,"display_name":"justGoscha"},"score":27,"creation_date":1404293997,"post_id":7811812,"comment_id":37978862,"body_markdown":"what if I don&#39;t know which element will be on the page?","body":"what if I don&#39;t know which element will be on the page?"},{"owner":{"account_id":362538,"reputation":22412,"user_id":705773,"accept_rate":98,"display_name":"Ajinkya"},"score":4,"creation_date":1413953374,"post_id":7811812,"comment_id":41633114,"body_markdown":"This will work to wait for loading of a particular element and not for whole page.","body":"This will work to wait for loading of a particular element and not for whole page."},{"owner":{"account_id":3052370,"reputation":94,"user_id":2991566,"accept_rate":25,"display_name":"Mario Galea"},"score":0,"creation_date":1453215152,"post_id":7811812,"comment_id":57497543,"body_markdown":"@xyz ... you are mistaken.  If you evolve your code and use the ExpectedConditions class, you can do this in: \n\n\n`JavaWebDriverWait wait = new WebDriverWait(driver, 10);`\n`wait.until(ExpectedConditions.visibilityOfAllElements(list));`\n\nwhere list is an arraylist of elements","body":"@xyz ... you are mistaken.  If you evolve your code and use the ExpectedConditions class, you can do this in:    <code>JavaWebDriverWait wait = new WebDriverWait(driver, 10);</code> <code>wait.until(ExpectedConditions.visibilityOfAllElements(list))&zwnj;&#8203;;</code>  where list is an arraylist of elements"},{"owner":{"account_id":1098054,"reputation":2329,"user_id":1091212,"accept_rate":94,"display_name":"Boris D. Teoharov"},"score":2,"creation_date":1511459732,"post_id":7811812,"comment_id":81876950,"body_markdown":"This does not guarantee at all that an element will be fully loaded neither answers the question. How can anyone upvote to this ?","body":"This does not guarantee at all that an element will be fully loaded neither answers the question. How can anyone upvote to this ?"}],"tags":[],"owner":{"account_id":369852,"reputation":2411,"user_id":2212886,"display_name":"Artem"},"comment_count":7,"down_vote_count":5,"up_vote_count":106,"is_accepted":false,"score":101,"last_activity_date":1641244522,"creation_date":1318961805,"answer_id":7811812,"question_id":5868439,"body_markdown":"Use class [WebDriverWait][1]\r\n\r\nAlso see [here][2]\r\n\r\n\r\n  [1]: https://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/support/ui/WebDriverWait.html\r\n  [2]: http://seleniumhq.org/docs/04_webdriver_advanced.html#explicit-and-implicit-waits\r\n\r\nYou can expect to show some element. something like in C#:\r\n\r\n    WebDriver _driver = new WebDriver();\r\n    WebDriverWait _wait = new WebDriverWait(_driver, new TimeSpan(0, 1, 0));\r\n    \r\n    _wait.Until(d =&gt; d.FindElement(By.Id(&quot;Id_Your_UIElement&quot;)));","title":"Wait for page load in Selenium","body":"<p>Use class <a href=\"https://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/support/ui/WebDriverWait.html\" rel=\"nofollow noreferrer\">WebDriverWait</a></p>\n<p>Also see <a href=\"http://seleniumhq.org/docs/04_webdriver_advanced.html#explicit-and-implicit-waits\" rel=\"nofollow noreferrer\">here</a></p>\n<p>You can expect to show some element. something like in C#:</p>\n<pre><code>WebDriver _driver = new WebDriver();\nWebDriverWait _wait = new WebDriverWait(_driver, new TimeSpan(0, 1, 0));\n\n_wait.Until(d =&gt; d.FindElement(By.Id(&quot;Id_Your_UIElement&quot;)));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":362538,"reputation":22412,"user_id":705773,"accept_rate":98,"display_name":"Ajinkya"},"score":7,"creation_date":1413955248,"post_id":8313663,"comment_id":41633590,"body_markdown":"It wont help in waiting for page load.","body":"It wont help in waiting for page load."},{"owner":{"account_id":94747,"reputation":1094,"user_id":258508,"accept_rate":75,"display_name":"skysign"},"score":0,"creation_date":1469264778,"post_id":8313663,"comment_id":64472757,"body_markdown":"It mean that it will try something during 10 seconds, before it raise exception. so it can&#39;t make sure that it will take 10 seconds delay.","body":"It mean that it will try something during 10 seconds, before it raise exception. so it can&#39;t make sure that it will take 10 seconds delay."},{"owner":{"account_id":8906759,"reputation":2159,"user_id":6648326,"accept_rate":71,"display_name":"MasterJoe"},"score":1,"creation_date":1478848365,"post_id":8313663,"comment_id":68324466,"body_markdown":"@xyz - why won&#39;t it help ?","body":"@xyz - why won&#39;t it help ?"},{"owner":{"account_id":362538,"reputation":22412,"user_id":705773,"accept_rate":98,"display_name":"Ajinkya"},"score":0,"creation_date":1478855253,"post_id":8313663,"comment_id":68327676,"body_markdown":"@testerjoe2 it waits till particular element is found, question is about how to wait for page load.","body":"@testerjoe2 it waits till particular element is found, question is about how to wait for page load."}],"tags":[],"owner":{"account_id":82308,"reputation":2437,"user_id":231513,"accept_rate":71,"display_name":"Sam"},"comment_count":4,"down_vote_count":5,"up_vote_count":48,"is_accepted":false,"score":43,"last_activity_date":1413955230,"creation_date":1322581830,"answer_id":8313663,"question_id":5868439,"body_markdown":"If you set the implicit wait of the driver, then call the `findElement` method on an element you expect to be on the loaded page, the WebDriver will poll for that element until it finds the element or reaches the time out value.\r\n\r\n    driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);\r\n\r\n\r\nsource: [implicit-waits][1]\r\n\r\n[1]:http://seleniumhq.org/docs/04_webdriver_advanced.html#implicit-waits","title":"Wait for page load in Selenium","body":"<p>If you set the implicit wait of the driver, then call the <code>findElement</code> method on an element you expect to be on the loaded page, the WebDriver will poll for that element until it finds the element or reaches the time out value.</p>\n\n<pre><code>driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);\n</code></pre>\n\n<p>source: <a href=\"http://seleniumhq.org/docs/04_webdriver_advanced.html#implicit-waits\" rel=\"noreferrer\">implicit-waits</a></p>\n"},{"comments":[{"owner":{"account_id":146658,"reputation":28201,"user_id":357236,"accept_rate":67,"display_name":"goh"},"score":0,"creation_date":1334897043,"post_id":9013241,"comment_id":13160088,"body_markdown":"i think driver.get waits for the onload function to finish before return control to the code, unless the page has alot of ajax","body":"i think driver.get waits for the onload function to finish before return control to the code, unless the page has alot of ajax"}],"tags":[],"owner":{"account_id":324759,"reputation":1607,"user_id":645536,"accept_rate":50,"display_name":"anirus"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1620720605,"creation_date":1327544240,"answer_id":9013241,"question_id":5868439,"body_markdown":"You can explicitly wait for an element to show up on the webpage before you can take any action (like `element.click()`):\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    driver.get(&quot;http://somedomain/url_that_delays_loading&quot;);\r\n    WebElement myDynamicElement = (new WebDriverWait(driver, 10))\r\n        .until(new ExpectedCondition&lt;WebElement&gt;() {\r\n        \t@Override\r\n        \tpublic WebElement apply(WebDriver d) {\r\n      \t\t    return d.findElement(By.id(&quot;myDynamicElement&quot;));\r\n\t        }\r\n        }\r\n    );\r\n\r\nThis is what I used for a similar scenario and it works fine.","title":"Wait for page load in Selenium","body":"<p>You can explicitly wait for an element to show up on the webpage before you can take any action (like <code>element.click()</code>):</p>\n<pre class=\"lang-java prettyprint-override\"><code>driver.get(&quot;http://somedomain/url_that_delays_loading&quot;);\nWebElement myDynamicElement = (new WebDriverWait(driver, 10))\n    .until(new ExpectedCondition&lt;WebElement&gt;() {\n        @Override\n        public WebElement apply(WebDriver d) {\n            return d.findElement(By.id(&quot;myDynamicElement&quot;));\n        }\n    }\n);\n</code></pre>\n<p>This is what I used for a similar scenario and it works fine.</p>\n"},{"tags":[],"owner":{"account_id":1275305,"reputation":621,"user_id":1230702,"display_name":"TedEd"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1330103187,"creation_date":1330084732,"answer_id":9430377,"question_id":5868439,"body_markdown":"You can also use the class: *`ExpectedConditions`* to explicitly wait for an element to show up on the webpage before you can take any action further actions\r\n\r\nYou can use the `ExpectedConditions` class to determine if an element is visible:\r\n\r\n    WebElement element = (new WebDriverWait(getDriver(), 10)).until(ExpectedConditions.visibilityOfElementLocated(By.cssSelector(&quot;input#houseName&quot;)));\r\n    \r\nSee `ExpectedConditions class Javadoc` for list of all conditions you are able to check.","title":"Wait for page load in Selenium","body":"<p>You can also use the class: <em><code>ExpectedConditions</code></em> to explicitly wait for an element to show up on the webpage before you can take any action further actions</p>\n\n<p>You can use the <code>ExpectedConditions</code> class to determine if an element is visible:</p>\n\n<pre><code>WebElement element = (new WebDriverWait(getDriver(), 10)).until(ExpectedConditions.visibilityOfElementLocated(By.cssSelector(\"input#houseName\")));\n</code></pre>\n\n<p>See <code>ExpectedConditions class Javadoc</code> for list of all conditions you are able to check.</p>\n"},{"comments":[{"owner":{"account_id":9662,"reputation":8462,"user_id":17945,"accept_rate":36,"display_name":"reinierpost"},"score":1,"creation_date":1344948117,"post_id":10554400,"comment_id":15925599,"body_markdown":"It&#39;s simple if the site is yours to modify!","body":"It&#39;s simple if the site is yours to modify!"},{"owner":{"account_id":40774,"reputation":28739,"user_id":118228,"accept_rate":85,"display_name":"djangofan"},"score":0,"creation_date":1396627619,"post_id":10554400,"comment_id":34889256,"body_markdown":"Yep, just use a JavascriptExecutor to execute jQuery.js and then you have access to jQuery load events.   It is a rare case when this is necessary though.  The standard Webdriver has enough power to do 98% of proper waits.","body":"Yep, just use a JavascriptExecutor to execute jQuery.js and then you have access to jQuery load events.   It is a rare case when this is necessary though.  The standard Webdriver has enough power to do 98% of proper waits."},{"owner":{"account_id":450415,"reputation":1367,"user_id":845717,"accept_rate":67,"display_name":"BradGreens"},"score":0,"creation_date":1398785057,"post_id":10554400,"comment_id":35794372,"body_markdown":"@djangofan would be awesome to see an example of that... I&#39;m a front-end guy so not sure where or how JavascriptExecutor is used.","body":"@djangofan would be awesome to see an example of that... I&#39;m a front-end guy so not sure where or how JavascriptExecutor is used."},{"owner":{"account_id":40774,"reputation":28739,"user_id":118228,"accept_rate":85,"display_name":"djangofan"},"score":0,"creation_date":1398788500,"post_id":10554400,"comment_id":35796889,"body_markdown":"@BradGreens - Ok, look at my project here: https://github.com/djangofan/jquery-growl-selenium-example  .  If you have the bandwidth to finish that example , I couldn&#39;t quite get the jGrowl to work in that test project, although the jQuery works fine.","body":"@BradGreens - Ok, look at my project here: <a href=\"https://github.com/djangofan/jquery-growl-selenium-example\" rel=\"nofollow noreferrer\">github.com/djangofan/jquery-growl-selenium-example</a>  .  If you have the bandwidth to finish that example , I couldn&#39;t quite get the jGrowl to work in that test project, although the jQuery works fine."},{"owner":{"account_id":377910,"reputation":1520,"user_id":730326,"accept_rate":86,"display_name":"jmathew"},"score":1,"creation_date":1404843319,"post_id":10554400,"comment_id":38189032,"body_markdown":"@BradGreens In addition to djangofan&#39;s comment see my answer here: http://stackoverflow.com/a/24638792/730326","body":"@BradGreens In addition to djangofan&#39;s comment see my answer here: <a href=\"http://stackoverflow.com/a/24638792/730326\">stackoverflow.com/a/24638792/730326</a>"}],"tags":[],"owner":{"account_id":82797,"reputation":6290,"user_id":232542,"accept_rate":77,"display_name":"sibidiba"},"comment_count":5,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1336750345,"creation_date":1336750345,"answer_id":10554400,"question_id":5868439,"body_markdown":"This seems to be a serious limitation of WebDriver. Obviously waiting for an element will not imply the page being loaded, in particular the DOM can be fully build (onready state) whereby JS is still executing and CSS and images are still loading.\r\n\r\nI believe the simplest solution is to set a JS variable upon the onload event after everything is initialized and check and wait for this JS variable in Selenium.","title":"Wait for page load in Selenium","body":"<p>This seems to be a serious limitation of WebDriver. Obviously waiting for an element will not imply the page being loaded, in particular the DOM can be fully build (onready state) whereby JS is still executing and CSS and images are still loading.</p>\n\n<p>I believe the simplest solution is to set a JS variable upon the onload event after everything is initialized and check and wait for this JS variable in Selenium.</p>\n"},{"comments":[{"owner":{"account_id":31620,"reputation":565,"user_id":86973,"display_name":"PRMan"},"score":41,"creation_date":1420049011,"post_id":11356234,"comment_id":43861408,"body_markdown":"You would think something like this would be built in.  Waiting for page loads is a pretty common thing on the web.","body":"You would think something like this would be built in.  Waiting for page loads is a pretty common thing on the web."},{"owner":{"account_id":1811030,"reputation":1073,"user_id":1647105,"accept_rate":59,"display_name":"George"},"score":24,"creation_date":1423244323,"post_id":11356234,"comment_id":45083596,"body_markdown":"does this really work all the time? Maybe Im missing something from your code but you are waiting for the dom to be in ready state. But consider that if your code executes too fast the previous page might not be unloaded yet and it will return true even though you are still on the old page. What you need to do is wait for the current page to unload and then call your above code. A way to detect page unload is to get a webelement on the current page and wait till it becomes stale. http://www.obeythetestinggoat.com/how-to-get-selenium-to-wait-for-page-load-after-a-click.html","body":"does this really work all the time? Maybe Im missing something from your code but you are waiting for the dom to be in ready state. But consider that if your code executes too fast the previous page might not be unloaded yet and it will return true even though you are still on the old page. What you need to do is wait for the current page to unload and then call your above code. A way to detect page unload is to get a webelement on the current page and wait till it becomes stale. <a href=\"http://www.obeythetestinggoat.com/how-to-get-selenium-to-wait-for-page-load-after-a-click.html\" rel=\"nofollow noreferrer\">obeythetestinggoat.com/&hellip;</a>"},{"owner":{"account_id":1811030,"reputation":1073,"user_id":1647105,"accept_rate":59,"display_name":"George"},"score":8,"creation_date":1423244365,"post_id":11356234,"comment_id":45083615,"body_markdown":"FYI - Even still the above does not guarentee that the page is complete - just that the dom is ready. Any dojo/jquery might still be dynamically building elements on the page so you might need first wait for dynamic elements before interacting with them.","body":"FYI - Even still the above does not guarentee that the page is complete - just that the dom is ready. Any dojo/jquery might still be dynamically building elements on the page so you might need first wait for dynamic elements before interacting with them."},{"owner":{"account_id":4657005,"reputation":1790,"user_id":3772347,"accept_rate":81,"display_name":"AdjunctProfessorFalcon"},"score":1,"creation_date":1436578507,"post_id":11356234,"comment_id":50687762,"body_markdown":"@Imran have you seen a similar approach but for Python?","body":"@Imran have you seen a similar approach but for Python?"},{"owner":{"account_id":531328,"reputation":1086,"user_id":2122950,"accept_rate":100,"display_name":"Homewrecker"},"score":3,"creation_date":1440748014,"post_id":11356234,"comment_id":52410724,"body_markdown":"Be aware that this method only checks the DOM. If you use Ajax or AngularJS, this will not work because there will be some asynchronous calls that cannot be detected by the document.readyState.","body":"Be aware that this method only checks the DOM. If you use Ajax or AngularJS, this will not work because there will be some asynchronous calls that cannot be detected by the document.readyState."},{"owner":{"account_id":3458139,"reputation":396,"user_id":3312628,"accept_rate":77,"display_name":"Leder"},"score":0,"creation_date":1540809956,"post_id":11356234,"comment_id":92986857,"body_markdown":"I cannot get it compiling, though I think I have imported all dependencies, I get compiler error `[ERROR] /C:/Source/Website_auticon_mvn/all_links/src/test/java/de/auticon/website/AppTest.java:[127,47] illegal start of\n expression`.","body":"I cannot get it compiling, though I think I have imported all dependencies, I get compiler error <code>[ERROR] &#47;C:&#47;Source&#47;Website_auticon_mvn&#47;all_links&#47;src&#47;test&#47;java&#47;de&#47;au&zwnj;&#8203;ticon&#47;website&#47;AppTes&zwnj;&#8203;t.java:[127,47] illegal start of  expression</code>."},{"owner":{"account_id":6602409,"reputation":9636,"user_id":5100278,"accept_rate":78,"display_name":"Kingamere"},"score":0,"creation_date":1550445234,"post_id":11356234,"comment_id":96259590,"body_markdown":"Where do you get `OpenQA.Selenium.Support.UI.WebDriverWait` and `IWait` from?","body":"Where do you get <code>OpenQA.Selenium.Support.UI.WebDriverWait</code> and <code>IWait</code> from?"},{"owner":{"account_id":6602409,"reputation":9636,"user_id":5100278,"accept_rate":78,"display_name":"Kingamere"},"score":13,"creation_date":1550504864,"post_id":11356234,"comment_id":96283860,"body_markdown":"This is C# code. This does not work with Java, and the question asked about *Java*.","body":"This is C# code. This does not work with Java, and the question asked about <i>Java</i>."},{"owner":{"account_id":2649991,"reputation":1050,"user_id":2291928,"accept_rate":100,"display_name":"George Pantazes"},"score":2,"creation_date":1551731350,"post_id":11356234,"comment_id":96739579,"body_markdown":"For anybody curious, [here is a permalink (`WaitForPageToLoad.java` L93)](https://github.com/SeleniumHQ/selenium/blob/0e493305c2c7064f2b9517c4c1de91fb1fdb0f64/java/client/src/com/thoughtworks/selenium/webdriven/commands/WaitForPageToLoad.java#L93) to the location in the Selenium Java client which automatically waits for the page to load as part of its existing implementation (which does indeed check for `document.readyState`).","body":"For anybody curious, <a href=\"https://github.com/SeleniumHQ/selenium/blob/0e493305c2c7064f2b9517c4c1de91fb1fdb0f64/java/client/src/com/thoughtworks/selenium/webdriven/commands/WaitForPageToLoad.java#L93\" rel=\"nofollow noreferrer\">here is a permalink (<code>WaitForPageToLoad.java</code> L93)</a> to the location in the Selenium Java client which automatically waits for the page to load as part of its existing implementation (which does indeed check for <code>document.readyState</code>)."},{"owner":{"account_id":387465,"reputation":4697,"user_id":745827,"accept_rate":88,"display_name":"Cengiz"},"score":0,"creation_date":1569331219,"post_id":11356234,"comment_id":102556817,"body_markdown":"Does not work for &#39;TextPage&#39;: Error: &#39;Cannot execute JS against a plain text page&#39;","body":"Does not work for &#39;TextPage&#39;: Error: &#39;Cannot execute JS against a plain text page&#39;"},{"owner":{"account_id":8104679,"reputation":1650,"user_id":6106641,"accept_rate":80,"display_name":"Archmede"},"score":0,"creation_date":1574806849,"post_id":11356234,"comment_id":104359849,"body_markdown":"I posted an answer https://stackoverflow.com/questions/18486511/selenium-webdriver-how-to-wait-for-iframes-to-load-completely/59060172#59060172  Generally you want an element to go stale and then wait for a new element to load","body":"I posted an answer <a href=\"https://stackoverflow.com/questions/18486511/selenium-webdriver-how-to-wait-for-iframes-to-load-completely/59060172#59060172\" title=\"selenium webdriver how to wait for iframes to load completely\">stackoverflow.com/questions/18486511/&hellip;</a>  Generally you want an element to go stale and then wait for a new element to load"}],"tags":[],"owner":{"account_id":1631349,"reputation":1565,"user_id":1505801,"display_name":"Imran"},"comment_count":11,"down_vote_count":3,"up_vote_count":157,"is_accepted":false,"score":154,"last_activity_date":1341577401,"creation_date":1341551933,"answer_id":11356234,"question_id":5868439,"body_markdown":"You can also check pageloaded using following code\r\n\r\n    IWait&lt;IWebDriver&gt; wait = new OpenQA.Selenium.Support.UI.WebDriverWait(driver, TimeSpan.FromSeconds(30.00));\r\n    \r\n     wait.Until(driver1 =&gt; ((IJavaScriptExecutor)driver).ExecuteScript(&quot;return document.readyState&quot;).Equals(&quot;complete&quot;));","title":"Wait for page load in Selenium","body":"<p>You can also check pageloaded using following code</p>\n\n<pre><code>IWait&lt;IWebDriver&gt; wait = new OpenQA.Selenium.Support.UI.WebDriverWait(driver, TimeSpan.FromSeconds(30.00));\n\n wait.Until(driver1 =&gt; ((IJavaScriptExecutor)driver).ExecuteScript(\"return document.readyState\").Equals(\"complete\"));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1974593,"reputation":215,"user_id":1772675,"display_name":"tux23"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1444474081,"creation_date":1351124782,"answer_id":13059889,"question_id":5868439,"body_markdown":"**SeleniumWaiter**:\r\n\r\n    import com.google.common.base.Function;\r\n    import org.openqa.selenium.By;\r\n    import org.openqa.selenium.WebDriver;\r\n    import org.openqa.selenium.WebElement;\r\n    import org.openqa.selenium.support.ui.WebDriverWait;\r\n\r\n    public class SeleniumWaiter {\r\n\r\n          private WebDriver driver;\r\n\r\n          public SeleniumWaiter(WebDriver driver) {\r\n               this.driver = driver;\r\n          }\r\n\r\n          public WebElement waitForMe(By locatorname, int timeout){\r\n               WebDriverWait wait = new WebDriverWait(driver, timeout);\r\n               return wait.until(SeleniumWaiter.presenceOfElementLocated(locatorname));\r\n          }\r\n\r\n          public static Function&lt;WebDriver, WebElement&gt; presenceOfElementLocated(final By locator) {\r\n                // TODO Auto-generated method stub\r\n                return new Function&lt;WebDriver, WebElement&gt;() {\r\n                     @Override\r\n                     public WebElement apply(WebDriver driver) {\r\n                          return driver.findElement(locator);\r\n                     }\r\n                };\r\n          }\r\n     }\r\n\r\nAnd to you **use it**:\r\n\r\n    _waiter = new SeleniumWaiter(_driver);\r\n\r\n    try {\r\n       _waiter.waitForMe(By.xpath(&quot;//...&quot;), 10);\r\n    } \r\n    catch (Exception e) {\r\n       // Error\r\n    }\r\n","title":"Wait for page load in Selenium","body":"<p><strong>SeleniumWaiter</strong>:</p>\n\n<pre><code>import com.google.common.base.Function;\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.WebElement;\nimport org.openqa.selenium.support.ui.WebDriverWait;\n\npublic class SeleniumWaiter {\n\n      private WebDriver driver;\n\n      public SeleniumWaiter(WebDriver driver) {\n           this.driver = driver;\n      }\n\n      public WebElement waitForMe(By locatorname, int timeout){\n           WebDriverWait wait = new WebDriverWait(driver, timeout);\n           return wait.until(SeleniumWaiter.presenceOfElementLocated(locatorname));\n      }\n\n      public static Function&lt;WebDriver, WebElement&gt; presenceOfElementLocated(final By locator) {\n            // TODO Auto-generated method stub\n            return new Function&lt;WebDriver, WebElement&gt;() {\n                 @Override\n                 public WebElement apply(WebDriver driver) {\n                      return driver.findElement(locator);\n                 }\n            };\n      }\n }\n</code></pre>\n\n<p>And to you <strong>use it</strong>:</p>\n\n<pre><code>_waiter = new SeleniumWaiter(_driver);\n\ntry {\n   _waiter.waitForMe(By.xpath(\"//...\"), 10);\n} \ncatch (Exception e) {\n   // Error\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":365713,"reputation":2598,"user_id":710805,"accept_rate":93,"display_name":"blaze"},"score":20,"creation_date":1389817989,"post_id":14901494,"comment_id":31828981,"body_markdown":"Python equivalent:    WebDriverWait(driver, 10).until(lambda d: d.execute_script(&#39;return document.readyState&#39;) == &#39;complete&#39;)","body":"Python equivalent:    WebDriverWait(driver, 10).until(lambda d: d.execute_script(&#39;return document.readyState&#39;) == &#39;complete&#39;)"},{"owner":{"account_id":2500239,"reputation":3969,"user_id":2175572,"accept_rate":93,"display_name":"t3dodson"},"score":5,"creation_date":1406404087,"post_id":14901494,"comment_id":38823073,"body_markdown":"Python use the above code but don&#39;t forget to this line..| from selenium.webdriver.support.ui import WebDriverWait","body":"Python use the above code but don&#39;t forget to this line..| from selenium.webdriver.support.ui import WebDriverWait"},{"owner":{"account_id":147334,"reputation":3964,"user_id":358378,"accept_rate":86,"display_name":"Riaz Ladhani"},"score":0,"creation_date":1431350233,"post_id":14901494,"comment_id":48443524,"body_markdown":"I had a problem clicking on an element when the page was not fully loaded.  In Python i tried time.sleep(30).  It worked.  It will always wait for the max 30 secs though.  I then tried the following code and it is more efficient now, quicker.  WebDriverWait(driver, 10).until(lambda d: driver.find_element_by_xpath(&quot;//div[. = &#39;Administration&#39;]&quot;).click())","body":"I had a problem clicking on an element when the page was not fully loaded.  In Python i tried time.sleep(30).  It worked.  It will always wait for the max 30 secs though.  I then tried the following code and it is more efficient now, quicker.  WebDriverWait(driver, 10).until(lambda d: driver.find_element_by_xpath(&quot;//div[. = &#39;Administration&#39;]&quot;).click())"}],"tags":[],"owner":{"account_id":205475,"reputation":27350,"user_id":454252,"accept_rate":56,"display_name":"allenhwkim"},"comment_count":3,"down_vote_count":2,"up_vote_count":27,"is_accepted":false,"score":25,"last_activity_date":1444474136,"creation_date":1360954580,"answer_id":14901494,"question_id":5868439,"body_markdown":"Ruby implementation:\r\n\r\n    wait = Selenium::WebDriver::Wait.new(:timeout =&gt; 10)\r\n    wait.until {\r\n        @driver.execute_script(&quot;return document.readyState;&quot;) == &quot;complete&quot; \r\n    }\r\n","title":"Wait for page load in Selenium","body":"<p>Ruby implementation:</p>\n\n<pre><code>wait = Selenium::WebDriver::Wait.new(:timeout =&gt; 10)\nwait.until {\n    @driver.execute_script(\"return document.readyState;\") == \"complete\" \n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":123059,"reputation":2103,"user_id":317275,"accept_rate":91,"display_name":"Len"},"score":0,"creation_date":1435763974,"post_id":17214138,"comment_id":50338983,"body_markdown":"The java WebDriver interface doesnt have an asserts method","body":"The java WebDriver interface doesnt have an asserts method"}],"tags":[],"owner":{"account_id":2850233,"reputation":3615,"user_id":2447599,"display_name":"Ran Adler"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1371732742,"creation_date":1371732742,"answer_id":17214138,"question_id":5868439,"body_markdown":"    driver.asserts().assertElementFound(&quot;Page was not loaded&quot;,\r\n    By.xpath(&quot;//div[@id=&#39;actionsContainer&#39;]&quot;),Constants.LOOKUP_TIMEOUT);","title":"Wait for page load in Selenium","body":"<pre><code>driver.asserts().assertElementFound(\"Page was not loaded\",\nBy.xpath(\"//div[@id='actionsContainer']\"),Constants.LOOKUP_TIMEOUT);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":385160,"reputation":439,"user_id":742137,"display_name":"Marc"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1380311154,"creation_date":1380311154,"answer_id":19058894,"question_id":5868439,"body_markdown":"\r\n\t/**\r\n\t * Call this method before an event that will change the page.\r\n\t */\r\n\tprivate void beforePageLoad() {\r\n\t\tJavascriptExecutor js = (JavascriptExecutor) driver;\r\n\t\tjs.executeScript(&quot;document.mpPageReloaded=&#39;notYet&#39;;&quot;);\r\n\t}\r\n\r\n\t/**\r\n\t * Call this method after an event that will change the page.\r\n\t * \r\n\t * @see #beforePageLoad\r\n\t * \r\n\t *      Waits for the previous page to disappear.\r\n\t */\r\n\tprivate void afterPageLoad() throws Exception {\r\n\t\t(new WebDriverWait(driver, 10)).until(new Predicate&lt;WebDriver&gt;() {\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic boolean apply(WebDriver driver) {\r\n\t\t\t\tJavascriptExecutor js = (JavascriptExecutor) driver;\r\n\t\t\t\tObject obj = js.executeScript(&quot;return document.mpPageReloaded;&quot;);\r\n\t\t\t\tif (obj == null) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\tString str = (String) obj;\r\n\t\t\t\tif (!str.equals(&quot;notYet&quot;)) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\r\nYou can change from the document to an element, in the case of where only part of a document is being changed.\r\n\r\nThis technique was inspired by the answer from sincebasic.","title":"Wait for page load in Selenium","body":"<pre><code>/**\n * Call this method before an event that will change the page.\n */\nprivate void beforePageLoad() {\n    JavascriptExecutor js = (JavascriptExecutor) driver;\n    js.executeScript(\"document.mpPageReloaded='notYet';\");\n}\n\n/**\n * Call this method after an event that will change the page.\n * \n * @see #beforePageLoad\n * \n *      Waits for the previous page to disappear.\n */\nprivate void afterPageLoad() throws Exception {\n    (new WebDriverWait(driver, 10)).until(new Predicate&lt;WebDriver&gt;() {\n\n        @Override\n        public boolean apply(WebDriver driver) {\n            JavascriptExecutor js = (JavascriptExecutor) driver;\n            Object obj = js.executeScript(\"return document.mpPageReloaded;\");\n            if (obj == null) {\n                return true;\n            }\n            String str = (String) obj;\n            if (!str.equals(\"notYet\")) {\n                return true;\n            }\n            return false;\n        }\n    });\n}\n</code></pre>\n\n<p>You can change from the document to an element, in the case of where only part of a document is being changed.</p>\n\n<p>This technique was inspired by the answer from sincebasic.</p>\n"},{"comments":[{"owner":{"account_id":2047499,"reputation":1845,"user_id":1827276,"accept_rate":56,"display_name":"boly38"},"score":0,"creation_date":1403257782,"post_id":20960528,"comment_id":37598705,"body_markdown":"This helps me! Thanks for this excellent sample. I add it in my SeleniumHelper; cf. [javabox](https://github.com/boly38/javabox)","body":"This helps me! Thanks for this excellent sample. I add it in my SeleniumHelper; cf. <a href=\"https://github.com/boly38/javabox\" rel=\"nofollow noreferrer\">javabox</a>"}],"tags":[],"owner":{"account_id":3818343,"reputation":141,"user_id":3167096,"display_name":"Jack Mason"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1444474654,"creation_date":1389047398,"answer_id":20960528,"question_id":5868439,"body_markdown":"I&#39;m surprised that predicates weren&#39;t the first choice as you typically know what element(s) you will next interact with on the page you&#39;re waiting to load. My approach has always been to build out predicates/functions like `waitForElementByID(String id)` and `waitForElemetVisibleByClass(String className)`, etc. and then use and reuse these wherever I need them, be it for a page load or page content change I&#39;m waiting on.\r\n\r\nFor example,\r\n\r\nIn my test class:\r\n\r\n    driverWait.until(textIsPresent(&quot;expectedText&quot;);\r\n\r\nIn my test class parent:\r\n\r\n    protected Predicate&lt;WebDriver&gt; textIsPresent(String text){\r\n        final String t = text;\r\n        return new Predicate&lt;WebDriver&gt;(){\r\n            public boolean apply(WebDriver driver){\r\n                return isTextPresent(t);\r\n            }\r\n        };\r\n    }\r\n\r\n    protected boolean isTextPresent(String text){\r\n        return driver.getPageSource().contains(text);\r\n    }\r\n\r\nThough this seems like a lot, it takes care of checking repeatedly for you\r\nand the interval for how often to check can be set along with the ultimate\r\nwait time before timing out. Also, you will reuse such methods.\r\n\r\nIn this example, the parent class defined and initiated the `WebDriver driver` and the `WebDriverWait driverWait`.\r\n\r\nI hope this helps.\r\n","title":"Wait for page load in Selenium","body":"<p>I'm surprised that predicates weren't the first choice as you typically know what element(s) you will next interact with on the page you're waiting to load. My approach has always been to build out predicates/functions like <code>waitForElementByID(String id)</code> and <code>waitForElemetVisibleByClass(String className)</code>, etc. and then use and reuse these wherever I need them, be it for a page load or page content change I'm waiting on.</p>\n\n<p>For example,</p>\n\n<p>In my test class:</p>\n\n<pre><code>driverWait.until(textIsPresent(\"expectedText\");\n</code></pre>\n\n<p>In my test class parent:</p>\n\n<pre><code>protected Predicate&lt;WebDriver&gt; textIsPresent(String text){\n    final String t = text;\n    return new Predicate&lt;WebDriver&gt;(){\n        public boolean apply(WebDriver driver){\n            return isTextPresent(t);\n        }\n    };\n}\n\nprotected boolean isTextPresent(String text){\n    return driver.getPageSource().contains(text);\n}\n</code></pre>\n\n<p>Though this seems like a lot, it takes care of checking repeatedly for you\nand the interval for how often to check can be set along with the ultimate\nwait time before timing out. Also, you will reuse such methods.</p>\n\n<p>In this example, the parent class defined and initiated the <code>WebDriver driver</code> and the <code>WebDriverWait driverWait</code>.</p>\n\n<p>I hope this helps.</p>\n"},{"comments":[{"owner":{"account_id":2047499,"reputation":1845,"user_id":1827276,"accept_rate":56,"display_name":"boly38"},"score":0,"creation_date":1403257864,"post_id":22814618,"comment_id":37598745,"body_markdown":"Thanks for this tips. I add it in my SeleniumHelper; cf. [javabox](https://github.com/boly38/javabox)","body":"Thanks for this tips. I add it in my SeleniumHelper; cf. <a href=\"https://github.com/boly38/javabox\" rel=\"nofollow noreferrer\">javabox</a>"},{"owner":{"account_id":13060408,"reputation":707,"user_id":9437799,"display_name":"Sam Ginrich"},"score":0,"creation_date":1694586274,"post_id":22814618,"comment_id":135908917,"body_markdown":"What is the time the timeout behavior?","body":"What is the time the timeout behavior?"}],"tags":[],"owner":{"account_id":4093658,"reputation":274,"user_id":3361047,"display_name":"QIKHAN"},"comment_count":2,"down_vote_count":1,"up_vote_count":22,"is_accepted":false,"score":21,"last_activity_date":1444474743,"creation_date":1396448881,"answer_id":22814618,"question_id":5868439,"body_markdown":"You may remove the `System.out` line. It is added for debug purposes.\r\n\r\n    WebDriver driver_;\r\n\r\n    public void waitForPageLoad() {\r\n\r\n        Wait&lt;WebDriver&gt; wait = new WebDriverWait(driver_, 30);\r\n        wait.until(new Function&lt;WebDriver, Boolean&gt;() {\r\n            public Boolean apply(WebDriver driver) {\r\n                System.out.println(&quot;Current Window State       : &quot;\r\n                    + String.valueOf(((JavascriptExecutor) driver).executeScript(&quot;return document.readyState&quot;)));\r\n                return String\r\n                    .valueOf(((JavascriptExecutor) driver).executeScript(&quot;return document.readyState&quot;))\r\n                    .equals(&quot;complete&quot;);\r\n            }\r\n        });\r\n    }\r\n","title":"Wait for page load in Selenium","body":"<p>You may remove the <code>System.out</code> line. It is added for debug purposes.</p>\n\n<pre><code>WebDriver driver_;\n\npublic void waitForPageLoad() {\n\n    Wait&lt;WebDriver&gt; wait = new WebDriverWait(driver_, 30);\n    wait.until(new Function&lt;WebDriver, Boolean&gt;() {\n        public Boolean apply(WebDriver driver) {\n            System.out.println(\"Current Window State       : \"\n                + String.valueOf(((JavascriptExecutor) driver).executeScript(\"return document.readyState\")));\n            return String\n                .valueOf(((JavascriptExecutor) driver).executeScript(\"return document.readyState\"))\n                .equals(\"complete\");\n        }\n    });\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2604958,"reputation":2410,"user_id":4920725,"display_name":"andrew lorien"},"score":0,"creation_date":1470728846,"post_id":25651197,"comment_id":65054707,"body_markdown":"I read your web page before searching again more specifically for java code which implements your solution.  Nothing so far...","body":"I read your web page before searching again more specifically for java code which implements your solution.  Nothing so far..."}],"tags":[],"owner":{"account_id":152008,"reputation":15429,"user_id":366221,"accept_rate":46,"display_name":"hwjp"},"comment_count":1,"down_vote_count":1,"up_vote_count":22,"is_accepted":false,"score":21,"last_activity_date":1409768784,"creation_date":1409768784,"answer_id":25651197,"question_id":5868439,"body_markdown":"All of these solutions are OK for specific cases, but they suffer from at least one of a couple of possible problems:\r\n\r\n1. They are not generic enough -- they want you to know, ahead of time, that some specific condition will be true of the page you are going to (eg some element will be displayed)\r\n\r\n2. They are open to a race condition where you use an element that is actually present on the old page as well as the new page.\r\n\r\nHere&#39;s my attempt at a generic solution that avoids this problem (in Python):\r\n\r\nFirst, a generic &quot;wait&quot; function (use a WebDriverWait if you like, I find them ugly):\r\n\r\n\r\n    def wait_for(condition_function):\r\n        start_time = time.time()\r\n        while time.time() &lt; start_time + 3:\r\n            if condition_function():\r\n                return True\r\n            else:\r\n                time.sleep(0.1)\r\n        raise Exception(&#39;Timeout waiting for {}&#39;.format(condition_function.__name__))\r\n\r\n\r\nNext, the solution relies on the fact that selenium records an (internal) id-number for all elements on a page, including the top-level `&lt;html&gt;` element.  When a page refreshes or loads, it gets a new html element with a new ID.\r\n\r\nSo, assuming you want to click on a link with text &quot;my link&quot; for example:\r\n\r\n\r\n    old_page = browser.find_element_by_tag_name(&#39;html&#39;)\r\n\r\n    browser.find_element_by_link_text(&#39;my link&#39;).click()\r\n\r\n    def page_has_loaded():\r\n        new_page = browser.find_element_by_tag_name(&#39;html&#39;)\r\n        return new_page.id != old_page.id\r\n\r\n    wait_for(page_has_loaded)\r\n\r\nFor more Pythonic, reusable, generic helper, you can make a context manager:\r\n\r\n    from contextlib import contextmanager\r\n    \r\n    @contextmanager\r\n    def wait_for_page_load(browser):\r\n        old_page = browser.find_element_by_tag_name(&#39;html&#39;)\r\n    \r\n        yield\r\n    \r\n        def page_has_loaded():\r\n            new_page = browser.find_element_by_tag_name(&#39;html&#39;)\r\n            return new_page.id != old_page.id\r\n    \r\n        wait_for(page_has_loaded)\r\n\r\nAnd then you can use it on pretty much any selenium interaction:\r\n\r\n    with wait_for_page_load(browser):\r\n        browser.find_element_by_link_text(&#39;my link&#39;).click()\r\n\r\nI reckon that&#39;s bulletproof!  What do you think?  \r\n\r\nMore info in a [blog post about it here](http://www.obeythetestinggoat.com/how-to-get-selenium-to-wait-for-page-load-after-a-click.html)","title":"Wait for page load in Selenium","body":"<p>All of these solutions are OK for specific cases, but they suffer from at least one of a couple of possible problems:</p>\n\n<ol>\n<li><p>They are not generic enough -- they want you to know, ahead of time, that some specific condition will be true of the page you are going to (eg some element will be displayed)</p></li>\n<li><p>They are open to a race condition where you use an element that is actually present on the old page as well as the new page.</p></li>\n</ol>\n\n<p>Here's my attempt at a generic solution that avoids this problem (in Python):</p>\n\n<p>First, a generic \"wait\" function (use a WebDriverWait if you like, I find them ugly):</p>\n\n<pre><code>def wait_for(condition_function):\n    start_time = time.time()\n    while time.time() &lt; start_time + 3:\n        if condition_function():\n            return True\n        else:\n            time.sleep(0.1)\n    raise Exception('Timeout waiting for {}'.format(condition_function.__name__))\n</code></pre>\n\n<p>Next, the solution relies on the fact that selenium records an (internal) id-number for all elements on a page, including the top-level <code>&lt;html&gt;</code> element.  When a page refreshes or loads, it gets a new html element with a new ID.</p>\n\n<p>So, assuming you want to click on a link with text \"my link\" for example:</p>\n\n<pre><code>old_page = browser.find_element_by_tag_name('html')\n\nbrowser.find_element_by_link_text('my link').click()\n\ndef page_has_loaded():\n    new_page = browser.find_element_by_tag_name('html')\n    return new_page.id != old_page.id\n\nwait_for(page_has_loaded)\n</code></pre>\n\n<p>For more Pythonic, reusable, generic helper, you can make a context manager:</p>\n\n<pre><code>from contextlib import contextmanager\n\n@contextmanager\ndef wait_for_page_load(browser):\n    old_page = browser.find_element_by_tag_name('html')\n\n    yield\n\n    def page_has_loaded():\n        new_page = browser.find_element_by_tag_name('html')\n        return new_page.id != old_page.id\n\n    wait_for(page_has_loaded)\n</code></pre>\n\n<p>And then you can use it on pretty much any selenium interaction:</p>\n\n<pre><code>with wait_for_page_load(browser):\n    browser.find_element_by_link_text('my link').click()\n</code></pre>\n\n<p>I reckon that's bulletproof!  What do you think?  </p>\n\n<p>More info in a <a href=\"http://www.obeythetestinggoat.com/how-to-get-selenium-to-wait-for-page-load-after-a-click.html\" rel=\"noreferrer\">blog post about it here</a></p>\n"},{"comments":[{"owner":{"account_id":2803405,"reputation":183,"user_id":2411178,"display_name":"Joseph Orlando"},"score":0,"creation_date":1435772140,"post_id":27085357,"comment_id":50343902,"body_markdown":"Good idea! I never thought to tackle this situation by checking the opposite of a successful page load, a successful page unloading (for lack of a better term). Though whether this is the best option is based on whether StaleElementReferenceException takes less time, etc than waiting for a successful load. Nonetheless, another good way to do it.","body":"Good idea! I never thought to tackle this situation by checking the opposite of a successful page load, a successful page unloading (for lack of a better term). Though whether this is the best option is based on whether StaleElementReferenceException takes less time, etc than waiting for a successful load. Nonetheless, another good way to do it."},{"owner":{"account_id":2772450,"reputation":22416,"user_id":2386774,"display_name":"JeffC"},"score":4,"creation_date":1471638747,"post_id":27085357,"comment_id":65444350,"body_markdown":"This is not going to tell you whether the current page is loaded, it&#39;s going to tell you whether the last page (specifically one element) is *unloaded*. You will still need to wait for the current page to load. BTW, you can replace your code above with `new WebDriverWait(driver, 10).until(ExpectedConditions.stalenessOf(element))`.","body":"This is not going to tell you whether the current page is loaded, it&#39;s going to tell you whether the last page (specifically one element) is <i>unloaded</i>. You will still need to wait for the current page to load. BTW, you can replace your code above with <code>new WebDriverWait(driver, 10).until(ExpectedConditions.stalenessOf(element))</code>."}],"tags":[],"owner":{"account_id":8235,"reputation":87020,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"comment_count":2,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1444474817,"creation_date":1416714108,"answer_id":27085357,"question_id":5868439,"body_markdown":"*[How to get Selenium to wait for page load after a click][1]* provides the following interesting approach:\r\n\r\n1. Store a reference to a `WebElement` from the old page.\r\n2. Click the link.\r\n3. Keep on invoking operations on the `WebElement` until `StaleElementReferenceException` is thrown.\r\n\r\nSample code:\r\n\r\n    WebElement link = ...;\r\n    link.click();\r\n    new WebDriverWait(webDriver, timeout).until((org.openqa.selenium.WebDriver input) -&gt;\r\n    {\r\n        try\r\n        {\r\n            link.isDisplayed();\r\n            return false;\r\n        }\r\n        catch (StaleElementReferenceException unused)\r\n        {\r\n            return true;\r\n        }\r\n    });\r\n\r\n  [1]: http://www.obeythetestinggoat.com/how-to-get-selenium-to-wait-for-page-load-after-a-click.html\r\n","title":"Wait for page load in Selenium","body":"<p><em><a href=\"http://www.obeythetestinggoat.com/how-to-get-selenium-to-wait-for-page-load-after-a-click.html\" rel=\"nofollow\">How to get Selenium to wait for page load after a click</a></em> provides the following interesting approach:</p>\n\n<ol>\n<li>Store a reference to a <code>WebElement</code> from the old page.</li>\n<li>Click the link.</li>\n<li>Keep on invoking operations on the <code>WebElement</code> until <code>StaleElementReferenceException</code> is thrown.</li>\n</ol>\n\n<p>Sample code:</p>\n\n<pre><code>WebElement link = ...;\nlink.click();\nnew WebDriverWait(webDriver, timeout).until((org.openqa.selenium.WebDriver input) -&gt;\n{\n    try\n    {\n        link.isDisplayed();\n        return false;\n    }\n    catch (StaleElementReferenceException unused)\n    {\n        return true;\n    }\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3365850,"reputation":1,"user_id":4395325,"display_name":"vageeshwar"},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1444474898,"creation_date":1419617019,"answer_id":27660368,"question_id":5868439,"body_markdown":"Use:\r\n\r\n    driver.manage().timeOuts().implicitlyWait(10, TimeUnit.SECONDS);\r\n\r\nWhich means any search for the elements on the web page could take time to load. The `implicitlyWait` is set before throwing an exception.\r\nThe `TimeUnit` displays whichever way you want to wait in (seconds, minutes, hours and days).\r\n","title":"Wait for page load in Selenium","body":"<p>Use:</p>\n\n<pre><code>driver.manage().timeOuts().implicitlyWait(10, TimeUnit.SECONDS);\n</code></pre>\n\n<p>Which means any search for the elements on the web page could take time to load. The <code>implicitlyWait</code> is set before throwing an exception.\nThe <code>TimeUnit</code> displays whichever way you want to wait in (seconds, minutes, hours and days).</p>\n"},{"tags":[],"owner":{"account_id":3551933,"reputation":3290,"user_id":2966603,"accept_rate":36,"display_name":"RichardK"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1429710213,"creation_date":1429710213,"answer_id":29799488,"question_id":5868439,"body_markdown":"My simple way:\r\n\r\n    long timeOut = 5000;\r\n    \tlong end = System.currentTimeMillis() + timeOut;\r\n    \t\t\r\n    \t\twhile (System.currentTimeMillis() &lt; end) {\r\n    \t\t\t\r\n    \t\t\tif (String.valueOf(\r\n    \t\t\t\t\t((JavascriptExecutor) driver)\r\n    \t\t\t\t\t\t\t.executeScript(&quot;return document.readyState&quot;))\r\n    \t\t\t\t\t.equals(&quot;complete&quot;)) {\r\n    \t\t\t\tbreak;\r\n    \t\t\t}\r\n    \t\t}","title":"Wait for page load in Selenium","body":"<p>My simple way:</p>\n\n<pre><code>long timeOut = 5000;\n    long end = System.currentTimeMillis() + timeOut;\n\n        while (System.currentTimeMillis() &lt; end) {\n\n            if (String.valueOf(\n                    ((JavascriptExecutor) driver)\n                            .executeScript(\"return document.readyState\"))\n                    .equals(\"complete\")) {\n                break;\n            }\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2813820,"reputation":33,"user_id":2419458,"display_name":"anthonyjruffa"},"comment_count":0,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1439248750,"creation_date":1439248750,"answer_id":31930713,"question_id":5868439,"body_markdown":"I don&#39;t think an implicit wait is what you want.  Try this:\r\n\r\n`driver.manage().timeouts().pageLoadTimeout(10, TimeUnit.SECONDS);`\r\n\r\nMore information in the [documentation][1]\r\n\r\n\r\n  [1]: http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebDriver.Timeouts.html","title":"Wait for page load in Selenium","body":"<p>I don't think an implicit wait is what you want.  Try this:</p>\n\n<p><code>driver.manage().timeouts().pageLoadTimeout(10, TimeUnit.SECONDS);</code></p>\n\n<p>More information in the <a href=\"http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebDriver.Timeouts.html\" rel=\"nofollow\">documentation</a></p>\n"},{"tags":[],"owner":{"account_id":6585346,"reputation":59,"user_id":5088233,"accept_rate":64,"display_name":"Michau"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1442324261,"creation_date":1441049555,"answer_id":32318619,"question_id":5868439,"body_markdown":"&lt;!-- language-all: java --&gt;\r\nThe easiest way is just wait for some element which will appear on loaded page.\r\n\r\nIf you would like to click on some button already after page is loaded you could use await and click:\r\n\r\n    await().until().at.most(20, TimeUnit.Seconds).some_element.isDisplayed(); // or another condition\r\n    getDriver().find(some_element).click;","title":"Wait for page load in Selenium","body":"<p>\nThe easiest way is just wait for some element which will appear on loaded page.</p>\n\n<p>If you would like to click on some button already after page is loaded you could use await and click:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>await().until().at.most(20, TimeUnit.Seconds).some_element.isDisplayed(); // or another condition\ngetDriver().find(some_element).click;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6835289,"reputation":183,"user_id":5257542,"display_name":"Fin"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1444474971,"creation_date":1441718761,"answer_id":32459075,"question_id":5868439,"body_markdown":"Imran&#39;s answer rehashed for Java 7:\r\n\r\n    \tWebDriverWait wait = new WebDriverWait(driver, 30);\r\n\t\t\r\n\t\twait.until(new ExpectedCondition&lt;Boolean&gt;() {\r\n\t\t\tpublic Boolean apply(WebDriver wdriver) {\r\n\t\t\t\treturn ((JavascriptExecutor) driver).executeScript(\r\n\t\t\t\t\t&quot;return document.readyState&quot;\r\n\t\t\t\t).equals(&quot;complete&quot;);\r\n\t\t\t}\r\n\t\t});\r\n","title":"Wait for page load in Selenium","body":"<p>Imran's answer rehashed for Java 7:</p>\n\n<pre><code>    WebDriverWait wait = new WebDriverWait(driver, 30);\n\n    wait.until(new ExpectedCondition&lt;Boolean&gt;() {\n        public Boolean apply(WebDriver wdriver) {\n            return ((JavascriptExecutor) driver).executeScript(\n                \"return document.readyState\"\n            ).equals(\"complete\");\n        }\n    });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4951908,"reputation":2516,"user_id":3985556,"display_name":"Vaibhav"},"comment_count":0,"down_vote_count":7,"up_vote_count":1,"is_accepted":false,"score":-6,"last_activity_date":1444475019,"creation_date":1443102608,"answer_id":32763129,"question_id":5868439,"body_markdown":"Implicit and explicit wait is better.\r\n\r\nBut if you are handling an exception in Java, then you can use this for waiting for a page to reload:\r\n\r\n    Thead.sleep(1000);\r\n","title":"Wait for page load in Selenium","body":"<p>Implicit and explicit wait is better.</p>\n\n<p>But if you are handling an exception in Java, then you can use this for waiting for a page to reload:</p>\n\n<pre><code>Thead.sleep(1000);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":8866,"reputation":59368,"user_id":16148,"accept_rate":73,"display_name":"Corey Goldberg"},"score":0,"creation_date":1485453173,"post_id":33560680,"comment_id":70941638,"body_markdown":"webdriver already does essentially the same thing internally.  this function is just redundant.","body":"webdriver already does essentially the same thing internally.  this function is just redundant."}],"tags":[],"owner":{"account_id":2626657,"reputation":385,"user_id":2273520,"display_name":"Manavendher"},"comment_count":1,"down_vote_count":3,"up_vote_count":2,"is_accepted":false,"score":-1,"last_activity_date":1446791555,"creation_date":1446790943,"answer_id":33560680,"question_id":5868439,"body_markdown":"Use this function\r\n\r\n    public void waitForPageLoad(ChromeDriver d){\r\n\t    \tString s=&quot;&quot;;\r\n\t    \twhile(!s.equals(&quot;complete&quot;)){\r\n\t    \ts=(String) d.executeScript(&quot;return document.readyState&quot;);\r\n\t    \ttry {\r\n\t    \t\tThread.sleep(1000);\r\n\t    \t} catch (InterruptedException e) {\r\n\t    \t\t// TODO Auto-generated catch block\r\n\t    \t\te.printStackTrace();\r\n\t    \t}\r\n\t    \t}\r\n\t    \t\r\n\t    }","title":"Wait for page load in Selenium","body":"<p>Use this function</p>\n\n<pre><code>public void waitForPageLoad(ChromeDriver d){\n        String s=\"\";\n        while(!s.equals(\"complete\")){\n        s=(String) d.executeScript(\"return document.readyState\");\n        try {\n            Thread.sleep(1000);\n        } catch (InterruptedException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n        }\n\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3731190,"reputation":961,"user_id":3103515,"display_name":"sonhu"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1452026669,"creation_date":1452026669,"answer_id":34620895,"question_id":5868439,"body_markdown":"The best way to wait for page loads when using the Java bindings for WebDriver is to use the Page Object design pattern with PageFactory. This allows you to utilize the `AjaxElementLocatorFactory` which to put it simply acts as a global wait for all of your elements. It has limitations on elements such as drop-boxes or complex javascript transitions but it will drastically reduce the amount of code needed and speed up test times. A good example can be found in this blogpost. Basic understanding of Core Java is assumed.\r\n\r\nhttp://startingwithseleniumwebdriver.blogspot.ro/2015/02/wait-in-page-factory.html","title":"Wait for page load in Selenium","body":"<p>The best way to wait for page loads when using the Java bindings for WebDriver is to use the Page Object design pattern with PageFactory. This allows you to utilize the <code>AjaxElementLocatorFactory</code> which to put it simply acts as a global wait for all of your elements. It has limitations on elements such as drop-boxes or complex javascript transitions but it will drastically reduce the amount of code needed and speed up test times. A good example can be found in this blogpost. Basic understanding of Core Java is assumed.</p>\n\n<p><a href=\"http://startingwithseleniumwebdriver.blogspot.ro/2015/02/wait-in-page-factory.html\" rel=\"nofollow\">http://startingwithseleniumwebdriver.blogspot.ro/2015/02/wait-in-page-factory.html</a></p>\n"},{"tags":[],"owner":{"account_id":7319434,"reputation":107,"user_id":5575897,"display_name":"Kuldeep Yadav"},"comment_count":0,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1456293286,"creation_date":1456293286,"answer_id":35594329,"question_id":5868439,"body_markdown":"Use implicitly wait for wait of every element on page till given time.\r\n\r\n    driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);\r\n\r\nthis wait for every element on page for 30 sec.\r\n\r\nAnother wait is Explicitly wait or conditional wait in this wait until given condition.\r\n\r\n    WebDriverWait wait = new WebDriverWait(driver, 40);\r\n    WebElement element = wait.until(ExpectedConditions.elementToBeClickable(By.id(&quot;someid&quot;)));\r\n\r\n\r\nIn id give static element id which is diffidently display on the page, as soon as page is load.","title":"Wait for page load in Selenium","body":"<p>Use implicitly wait for wait of every element on page till given time.</p>\n\n<pre><code>driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);\n</code></pre>\n\n<p>this wait for every element on page for 30 sec.</p>\n\n<p>Another wait is Explicitly wait or conditional wait in this wait until given condition.</p>\n\n<pre><code>WebDriverWait wait = new WebDriverWait(driver, 40);\nWebElement element = wait.until(ExpectedConditions.elementToBeClickable(By.id(\"someid\")));\n</code></pre>\n\n<p>In id give static element id which is diffidently display on the page, as soon as page is load.</p>\n"},{"tags":[],"owner":{"account_id":7398529,"reputation":121,"user_id":5629666,"display_name":"Vinod Kumar K V"},"comment_count":0,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1463756370,"creation_date":1463755092,"answer_id":37349558,"question_id":5868439,"body_markdown":" 1. `WebDriver driver = new ff / chrome / anyDriverYouWish();\r\n    driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);`\r\n    Waits maximum of 10 Seconds.\r\n\r\n 2. `WebDriverWait wait = new WebDriverWait(driver, 10);\r\n\twait.until(ExpectedConditions.visibilityOf(WebElement element));`\r\n    \r\n 3. `FluentWait&lt;Driver&gt; fluentWait;\r\n     fluentWait = new FluentWait&lt;&gt;(driver).withTimeout(30, TimeUnit.SECONDS)\r\n\t\t\t\t.pollingEvery(200, TimeUnit.MILLISECONDS)\r\n\t\t\t\t.ignoring(NoSuchElementException.class);`\r\n\r\nThe advantage of the last option is that you can include exception to be expected, so that your execution continues.","title":"Wait for page load in Selenium","body":"<ol>\n<li><p><code>WebDriver driver = new ff / chrome / anyDriverYouWish();\ndriver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);</code>\nWaits maximum of 10 Seconds.</p></li>\n<li><p><code>WebDriverWait wait = new WebDriverWait(driver, 10);\nwait.until(ExpectedConditions.visibilityOf(WebElement element));</code></p></li>\n<li><p><code>FluentWait&lt;Driver&gt; fluentWait;\n fluentWait = new FluentWait&lt;&gt;(driver).withTimeout(30, TimeUnit.SECONDS)\n            .pollingEvery(200, TimeUnit.MILLISECONDS)\n            .ignoring(NoSuchElementException.class);</code></p></li>\n</ol>\n\n<p>The advantage of the last option is that you can include exception to be expected, so that your execution continues.</p>\n"},{"comments":[{"owner":{"account_id":8866,"reputation":59368,"user_id":16148,"accept_rate":73,"display_name":"Corey Goldberg"},"score":3,"creation_date":1481756410,"post_id":37777902,"comment_id":69509324,"body_markdown":"how does this answer the question?","body":"how does this answer the question?"}],"tags":[],"owner":{"account_id":2898844,"reputation":39,"user_id":2486054,"display_name":"iam_muqshid"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1465758309,"creation_date":1465757402,"answer_id":37777902,"question_id":5868439,"body_markdown":"use a if condition and for any of the element present \r\n\r\n    try {\r\n        Thread.sleep(1000);\r\n    } catch (InterruptedException e) {\r\n        // TODO Auto-generated catch block\r\n        e.printStackTrace();\r\n    }","title":"Wait for page load in Selenium","body":"<p>use a if condition and for any of the element present </p>\n\n<pre><code>try {\n    Thread.sleep(1000);\n} catch (InterruptedException e) {\n    // TODO Auto-generated catch block\n    e.printStackTrace();\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":8866,"reputation":59368,"user_id":16148,"accept_rate":73,"display_name":"Corey Goldberg"},"score":0,"creation_date":1481756343,"post_id":37820699,"comment_id":69509302,"body_markdown":"don&#39;t use static sleeps.  its an antipattern.","body":"don&#39;t use static sleeps.  its an antipattern."}],"tags":[],"owner":{"account_id":8071829,"reputation":59,"user_id":6084348,"accept_rate":20,"display_name":"Salman Arshad"},"comment_count":1,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1540817227,"creation_date":1465933086,"answer_id":37820699,"question_id":5868439,"body_markdown":"For implicit wait you can use something like following:\r\n\r\n    driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS)\r\n\r\nIn order for webpage to wait for a specific object to be visible or cerntain condition to be true. You can use wait feather of web driver.\r\n\r\n    //120 is maximum number of seconds to wait.\r\n    WebDriverWait wait = new WebDriverWait(driver,120);\t \r\n    wait.until(ExpectedConditions.elementToBeClickable(&quot;CONDITITON&quot;));\r\n\r\nIn **Java**, another option is to sleep the thread for specific time. \r\n\r\n    Thread.sleep(numberOfSeconds*1000); \r\n    //This line will cause thread to sleep for seconds as variable\r\n\r\nI created a method to simplify thread.sleep method\r\n\r\n    public static void wait_time(int seconds){\r\n        try {\r\n    \t    Thread.sleep(seconds*1000);\r\n    \t    }catch (InterruptedException e) {\r\n    \t    // TODO Auto-generated catch block\r\n    \t\t    e.printStackTrace();\r\n    \t    }\r\n    }\r\n\r\nUse the method as wait_time(10);  The thread will sleep for 10 seconds.\r\n","title":"Wait for page load in Selenium","body":"<p>For implicit wait you can use something like following:</p>\n\n<pre><code>driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS)\n</code></pre>\n\n<p>In order for webpage to wait for a specific object to be visible or cerntain condition to be true. You can use wait feather of web driver.</p>\n\n<pre><code>//120 is maximum number of seconds to wait.\nWebDriverWait wait = new WebDriverWait(driver,120);  \nwait.until(ExpectedConditions.elementToBeClickable(\"CONDITITON\"));\n</code></pre>\n\n<p>In <strong>Java</strong>, another option is to sleep the thread for specific time. </p>\n\n<pre><code>Thread.sleep(numberOfSeconds*1000); \n//This line will cause thread to sleep for seconds as variable\n</code></pre>\n\n<p>I created a method to simplify thread.sleep method</p>\n\n<pre><code>public static void wait_time(int seconds){\n    try {\n        Thread.sleep(seconds*1000);\n        }catch (InterruptedException e) {\n        // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n}\n</code></pre>\n\n<p>Use the method as wait_time(10);  The thread will sleep for 10 seconds.</p>\n"},{"tags":[],"owner":{"account_id":3849207,"reputation":1,"user_id":3189769,"display_name":"Gulraiz Aslam"},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1468269691,"creation_date":1468269154,"answer_id":38315729,"question_id":5868439,"body_markdown":"There are 2 types of waits available in Webdriver/Selenium 2 software testing tool. One of them is Implicit wait and another one is explicit wait. Both (Implicit wait and explicit wait) are useful for waiting in WebDriver. Using waits, we are telling WebDriver to wait for a certain amount of time before going to next step.You can use implicit wait for page load waiting.\r\n\r\n    driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);","title":"Wait for page load in Selenium","body":"<p>There are 2 types of waits available in Webdriver/Selenium 2 software testing tool. One of them is Implicit wait and another one is explicit wait. Both (Implicit wait and explicit wait) are useful for waiting in WebDriver. Using waits, we are telling WebDriver to wait for a certain amount of time before going to next step.You can use implicit wait for page load waiting.</p>\n\n<pre><code>driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9431015,"reputation":11,"user_id":7014573,"display_name":"ANarula"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1476974423,"creation_date":1476974423,"answer_id":40157553,"question_id":5868439,"body_markdown":"You can try this code to let the page load completely until element is found.\r\n  \r\n\r\n\r\n\r\n\r\n\r\n    public void waitForBrowserToLoadCompletely() {\r\n\t\tString state = null;\r\n\t\tString oldstate = null;\r\n\t\ttry {\r\n\t\t\tSystem.out.print(&quot;Waiting for browser loading to complete&quot;);\r\n\t\t\t\r\n\t\t\tint i = 0;\r\n\t\t\twhile (i &lt; 5) {\r\n\t\t\t\tThread.sleep(1000);\r\n\t\t\t\tstate = ((JavascriptExecutor) driver).executeScript(&quot;return document.readyState;&quot;).toString();\r\n\t\t\t\tSystem.out.print(&quot;.&quot; + Character.toUpperCase(state.charAt(0)) + &quot;.&quot;);\r\n\t\t\t\tif (state.equals(&quot;interactive&quot;) || state.equals(&quot;loading&quot;))\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t/*\r\n\t\t\t\t * If browser in &#39;complete&#39; state since last X seconds. Return.\r\n\t\t\t\t */\r\n\r\n\t\t\t\tif (i == 1 &amp;&amp; state.equals(&quot;complete&quot;)) {\r\n\t\t\t\t\tSystem.out.println();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\t\t\ti = 0;\r\n\t\t\toldstate = null;\r\n\t\t\tThread.sleep(2000);\r\n\r\n\t\t\t/*\r\n\t\t\t * Now wait for state to become complete\r\n\t\t\t */\r\n\t\t\twhile (true) {\r\n\t\t\t\tstate = ((JavascriptExecutor) driver).executeScript(&quot;return document.readyState;&quot;).toString();\r\n\t\t\t\tSystem.out.print(&quot;.&quot; + state.charAt(0) + &quot;.&quot;);\r\n\t\t\t\tif (state.equals(&quot;complete&quot;))\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tif (state.equals(oldstate))\r\n\t\t\t\t\ti++;\r\n\t\t\t\telse\r\n\t\t\t\t\ti = 0;\r\n\t\t\t\t/*\r\n\t\t\t\t * If browser state is same (loading/interactive) since last 60\r\n\t\t\t\t * secs. Refresh the page.\r\n\t\t\t\t */\r\n\t\t\t\tif (i == 15 &amp;&amp; state.equals(&quot;loading&quot;)) {\r\n\t\t\t\t\tSystem.out.println(&quot;\\nBrowser in &quot; + state + &quot; state since last 60 secs. So refreshing browser.&quot;);\r\n\t\t\t\t\tdriver.navigate().refresh();\r\n\t\t\t\t\tSystem.out.print(&quot;Waiting for browser loading to complete&quot;);\r\n\t\t\t\t\ti = 0;\r\n\t\t\t\t} else if (i == 6 &amp;&amp; state.equals(&quot;interactive&quot;)) {\r\n\t\t\t\t\tSystem.out.println(\r\n\t\t\t\t\t\t\t&quot;\\nBrowser in &quot; + state + &quot; state since last 30 secs. So starting with execution.&quot;);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tThread.sleep(4000);\r\n\t\t\t\toldstate = state;\r\n\r\n\t\t\t}\r\n\t\t\tSystem.out.println();\r\n\r\n\t\t} catch (InterruptedException ie) {\r\n\t\t\tie.printStackTrace();\r\n\t\t}\r\n\t}","title":"Wait for page load in Selenium","body":"<p>You can try this code to let the page load completely until element is found.</p>\n\n<pre><code>public void waitForBrowserToLoadCompletely() {\n    String state = null;\n    String oldstate = null;\n    try {\n        System.out.print(\"Waiting for browser loading to complete\");\n\n        int i = 0;\n        while (i &lt; 5) {\n            Thread.sleep(1000);\n            state = ((JavascriptExecutor) driver).executeScript(\"return document.readyState;\").toString();\n            System.out.print(\".\" + Character.toUpperCase(state.charAt(0)) + \".\");\n            if (state.equals(\"interactive\") || state.equals(\"loading\"))\n                break;\n            /*\n             * If browser in 'complete' state since last X seconds. Return.\n             */\n\n            if (i == 1 &amp;&amp; state.equals(\"complete\")) {\n                System.out.println();\n                return;\n            }\n            i++;\n        }\n        i = 0;\n        oldstate = null;\n        Thread.sleep(2000);\n\n        /*\n         * Now wait for state to become complete\n         */\n        while (true) {\n            state = ((JavascriptExecutor) driver).executeScript(\"return document.readyState;\").toString();\n            System.out.print(\".\" + state.charAt(0) + \".\");\n            if (state.equals(\"complete\"))\n                break;\n\n            if (state.equals(oldstate))\n                i++;\n            else\n                i = 0;\n            /*\n             * If browser state is same (loading/interactive) since last 60\n             * secs. Refresh the page.\n             */\n            if (i == 15 &amp;&amp; state.equals(\"loading\")) {\n                System.out.println(\"\\nBrowser in \" + state + \" state since last 60 secs. So refreshing browser.\");\n                driver.navigate().refresh();\n                System.out.print(\"Waiting for browser loading to complete\");\n                i = 0;\n            } else if (i == 6 &amp;&amp; state.equals(\"interactive\")) {\n                System.out.println(\n                        \"\\nBrowser in \" + state + \" state since last 30 secs. So starting with execution.\");\n                return;\n            }\n\n            Thread.sleep(4000);\n            oldstate = state;\n\n        }\n        System.out.println();\n\n    } catch (InterruptedException ie) {\n        ie.printStackTrace();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1028612,"reputation":1675,"user_id":1037363,"accept_rate":20,"display_name":"Prasobh.Kollattu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1540816863,"creation_date":1477196472,"answer_id":40199484,"question_id":5868439,"body_markdown":"    private static void checkPageIsReady(WebDriver driver) {\r\n\t\tJavascriptExecutor js = (JavascriptExecutor) driver;\r\n\r\n\t\t// Initially bellow given if condition will check ready state of page.\r\n\t\tif (js.executeScript(&quot;return document.readyState&quot;).toString().equals(&quot;complete&quot;)) {\r\n\t\t\tSystem.out.println(&quot;Page Is loaded.&quot;);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// This loop will rotate for 25 times to check If page Is ready after\r\n\t\t// every 1 second.\r\n\t\t// You can replace your value with 25 If you wants to Increase or\r\n\t\t// decrease wait time.\r\n\t\tfor (int i = 0; i &lt; 25; i++) {\r\n\t\t\ttry {\r\n\t\t\t\tThread.sleep(1000);\r\n\t\t\t} catch (InterruptedException e) {\r\n\t\t\t}\r\n\t\t\t// To check page ready state.\r\n\t\t\tif (js.executeScript(&quot;return document.readyState&quot;).toString().equals(&quot;complete&quot;)) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}","title":"Wait for page load in Selenium","body":"<pre><code>private static void checkPageIsReady(WebDriver driver) {\n    JavascriptExecutor js = (JavascriptExecutor) driver;\n\n    // Initially bellow given if condition will check ready state of page.\n    if (js.executeScript(\"return document.readyState\").toString().equals(\"complete\")) {\n        System.out.println(\"Page Is loaded.\");\n        return;\n    }\n\n    // This loop will rotate for 25 times to check If page Is ready after\n    // every 1 second.\n    // You can replace your value with 25 If you wants to Increase or\n    // decrease wait time.\n    for (int i = 0; i &lt; 25; i++) {\n        try {\n            Thread.sleep(1000);\n        } catch (InterruptedException e) {\n        }\n        // To check page ready state.\n        if (js.executeScript(\"return document.readyState\").toString().equals(\"complete\")) {\n            break;\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9223908,"reputation":1174,"user_id":6852301,"accept_rate":50,"display_name":"Mohsin Awan"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1478516606,"creation_date":1478515018,"answer_id":40463112,"question_id":5868439,"body_markdown":"You can use this snippet of code for the page to load:\r\n\r\n&lt;pre&gt;\r\n&lt;code&gt;    IWait&lt;IWebDriver&gt; wait = new OpenQA.Selenium.Support.UI.WebDriverWait(driver,TimeSpan.FromSeconds(30.00));\r\n    wait.Until(driver1 =&gt; ((IJavaScriptExecutor)driver).ExecuteScript(&quot;return document.readyState&quot;).Equals(&quot;complete&quot;));&lt;/code&gt;\r\n&lt;/pre&gt;\r\n\r\nOr you can use waiter for any element to be loaded and become visible/clickable on that page, most probably which is going to be load at the end of loading like:\r\n\r\n&lt;pre&gt;\r\n&lt;code&gt;    Wait.Until(ExpectedConditions.ElementToBeClickable(By.XPath(xpathOfElement));\r\n    var element = GlobalDriver.FindElement(By.XPath(xpathOfElement));\r\n    var isSucceededed = element != null;&lt;/code&gt;\r\n&lt;/pre&gt;\r\n","title":"Wait for page load in Selenium","body":"<p>You can use this snippet of code for the page to load:</p>\n\n<pre>\n<code>    IWait wait = new OpenQA.Selenium.Support.UI.WebDriverWait(driver,TimeSpan.FromSeconds(30.00));\n    wait.Until(driver1 => ((IJavaScriptExecutor)driver).ExecuteScript(\"return document.readyState\").Equals(\"complete\"));</code>\n</pre>\n\n<p>Or you can use waiter for any element to be loaded and become visible/clickable on that page, most probably which is going to be load at the end of loading like:</p>\n\n<pre>\n<code>    Wait.Until(ExpectedConditions.ElementToBeClickable(By.XPath(xpathOfElement));\n    var element = GlobalDriver.FindElement(By.XPath(xpathOfElement));\n    var isSucceededed = element != null;</code>\n</pre>\n"},{"comments":[{"owner":{"account_id":8866,"reputation":59368,"user_id":16148,"accept_rate":73,"display_name":"Corey Goldberg"},"score":1,"creation_date":1485453034,"post_id":40768832,"comment_id":70941557,"body_markdown":"a WebElement going stale does not imply a new page is done loading.","body":"a WebElement going stale does not imply a new page is done loading."},{"owner":{"account_id":2256125,"reputation":1387,"user_id":2172566,"display_name":"forresthopkinsa"},"score":0,"creation_date":1485537888,"post_id":40768832,"comment_id":70981532,"body_markdown":"Sure, but it means that the old page is finished unloading. In my experience, it&#39;s just as important to know when the old page has unloaded, or if it has halted for some reason.","body":"Sure, but it means that the old page is finished unloading. In my experience, it&#39;s just as important to know when the old page has unloaded, or if it has halted for some reason."},{"owner":{"account_id":2256125,"reputation":1387,"user_id":2172566,"display_name":"forresthopkinsa"},"score":0,"creation_date":1485537930,"post_id":40768832,"comment_id":70981554,"body_markdown":"Of course, I typically use stalenessOf in conjunction with other tests to get the full unload/load process.","body":"Of course, I typically use stalenessOf in conjunction with other tests to get the full unload/load process."}],"tags":[],"owner":{"account_id":2256125,"reputation":1387,"user_id":2172566,"display_name":"forresthopkinsa"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1479916338,"creation_date":1479916338,"answer_id":40768832,"question_id":5868439,"body_markdown":"The best way I&#39;ve seen is to utilize the `stalenessOf` ExpectedCondition, to wait for the old page to become stale.\r\n\r\nExample:\r\n\r\n    WebDriver driver = new FirefoxDriver();\r\n    WebDriverWait wait = new WebDriverWait(driver, 10);\r\n    \r\n    WebElement oldHtml = driver.findElement(By.tagName(&quot;html&quot;));\r\n    wait.until(ExpectedConditions.stalenessOf(oldHtml));\r\n\r\nIt&#39;ll wait for ten seconds for the old HTML tag to become stale, and then throw an exception if it doesn&#39;t happen.","title":"Wait for page load in Selenium","body":"<p>The best way I've seen is to utilize the <code>stalenessOf</code> ExpectedCondition, to wait for the old page to become stale.</p>\n\n<p>Example:</p>\n\n<pre><code>WebDriver driver = new FirefoxDriver();\nWebDriverWait wait = new WebDriverWait(driver, 10);\n\nWebElement oldHtml = driver.findElement(By.tagName(\"html\"));\nwait.until(ExpectedConditions.stalenessOf(oldHtml));\n</code></pre>\n\n<p>It'll wait for ten seconds for the old HTML tag to become stale, and then throw an exception if it doesn't happen.</p>\n"},{"tags":[],"owner":{"account_id":1132494,"reputation":5119,"user_id":1118252,"accept_rate":86,"display_name":"sidanmor"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1620669624,"creation_date":1482614899,"answer_id":41316949,"question_id":5868439,"body_markdown":"**NodeJS Solution:**\r\n\r\nIn **Nodejs** you can get it via promises...\r\n\r\nIf you write this code, you can be sure that the page is fully loaded when you get to the then...\r\n\r\n&lt;!-- language-all: js --&gt;\r\n\r\n    driver.get(&#39;www.sidanmor.com&#39;).then(()=&gt; {\r\n        // here the page is fully loaded!!!\r\n        // do your stuff...\r\n    }).catch(console.log.bind(console));\r\n\r\nIf you write this code, you will navigate, and selenium will wait 3 seconds...\r\n\r\n    driver.get(&#39;www.sidanmor.com&#39;);\r\n    driver.sleep(3000);\r\n    // you can&#39;t be sure that the page is fully loaded!!!\r\n    // do your stuff... hope it will be OK...\r\n\r\nFrom [Selenium Documentation (Nodejs)][1]:\r\n\r\n&gt; ```\r\n&gt; this.get( url ) → Thenable&lt;undefined&gt;\r\n&gt; ```\r\n&gt; Schedules a command to navigate to the given URL.\r\n&gt;\r\n&gt; Returns a promise that will be resolved when the document has **finished loading**.\r\n\r\n\r\n  [1]: http://seleniumhq.github.io/selenium/docs/api/javascript/module/selenium-webdriver/chrome_exports_Driver.html#get","title":"Wait for page load in Selenium","body":"<p><strong>NodeJS Solution:</strong></p>\n<p>In <strong>Nodejs</strong> you can get it via promises...</p>\n<p>If you write this code, you can be sure that the page is fully loaded when you get to the then...</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>driver.get('www.sidanmor.com').then(()=&gt; {\n    // here the page is fully loaded!!!\n    // do your stuff...\n}).catch(console.log.bind(console));\n</code></pre>\n<p>If you write this code, you will navigate, and selenium will wait 3 seconds...</p>\n<pre class=\"lang-js prettyprint-override\"><code>driver.get('www.sidanmor.com');\ndriver.sleep(3000);\n// you can't be sure that the page is fully loaded!!!\n// do your stuff... hope it will be OK...\n</code></pre>\n<p>From <a href=\"http://seleniumhq.github.io/selenium/docs/api/javascript/module/selenium-webdriver/chrome_exports_Driver.html#get\" rel=\"nofollow noreferrer\">Selenium Documentation (Nodejs)</a>:</p>\n<blockquote>\n<pre class=\"lang-js prettyprint-override\"><code>this.get( url ) → Thenable&lt;undefined&gt;\n</code></pre>\n<p>Schedules a command to navigate to the given URL.</p>\n<p>Returns a promise that will be resolved when the document has <strong>finished loading</strong>.</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":2609061,"reputation":13,"user_id":4893606,"accept_rate":40,"display_name":"Neel Gurbani"},"score":1,"creation_date":1482903427,"post_id":41355948,"comment_id":69913642,"body_markdown":"By will be your xpath which is mostly unique in application.","body":"By will be your xpath which is mostly unique in application."}],"tags":[],"owner":{"account_id":2609061,"reputation":13,"user_id":4893606,"accept_rate":40,"display_name":"Neel Gurbani"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1540816549,"creation_date":1482903344,"answer_id":41355948,"question_id":5868439,"body_markdown":"use following code it&#39;s very easy and simple for page load. \r\n\r\n    public void PageLoad(IWebDriver driver, By by)\r\n    {\r\n        try\r\n        {\r\n            Console.WriteLine(&quot;PageLoad&quot; + by);\r\n            WebDriverWait wait = new WebDriverWait(driver, TimeSpan.FromSeconds(30));\r\n            wait.Until(ExpectedConditions.ElementIsVisible(by));\r\n            wait = new WebDriverWait(driver, TimeSpan.FromSeconds(30)); // 30 seconds wait until element not found. \r\n            wait.Until(ExpectedConditions.ElementToBeClickable(by));\r\n            \r\n\r\n        }\r\n        catch (Exception ex)\r\n        {\r\n  \r\n            Console.WriteLine(ex.Message);\r\n            Assert.Fail(&quot;Element not found!&quot;)\r\n        }\r\n    }\r\n\r\ni hope this helps you. ","title":"Wait for page load in Selenium","body":"<p>use following code it's very easy and simple for page load. </p>\n\n<pre><code>public void PageLoad(IWebDriver driver, By by)\n{\n    try\n    {\n        Console.WriteLine(\"PageLoad\" + by);\n        WebDriverWait wait = new WebDriverWait(driver, TimeSpan.FromSeconds(30));\n        wait.Until(ExpectedConditions.ElementIsVisible(by));\n        wait = new WebDriverWait(driver, TimeSpan.FromSeconds(30)); // 30 seconds wait until element not found. \n        wait.Until(ExpectedConditions.ElementToBeClickable(by));\n\n\n    }\n    catch (Exception ex)\n    {\n\n        Console.WriteLine(ex.Message);\n        Assert.Fail(\"Element not found!\")\n    }\n}\n</code></pre>\n\n<p>i hope this helps you. </p>\n"},{"tags":[],"owner":{"account_id":9934922,"reputation":4769,"user_id":7353562,"accept_rate":75,"display_name":"Arpan Saini"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1620670978,"creation_date":1484176414,"answer_id":41602488,"question_id":5868439,"body_markdown":"You can use the below existing method to set the `pageLoadTimeout`. In below example if the page is taking more than 20 seconds to load, then it will throw an exception of page reload:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    WebDriver driver = new FirefoxDriver();\r\n    driver.manage().timeouts().pageLoadTimeout(20, TimeUnit.SECONDS);\r\n","title":"Wait for page load in Selenium","body":"<p>You can use the below existing method to set the <code>pageLoadTimeout</code>. In below example if the page is taking more than 20 seconds to load, then it will throw an exception of page reload:</p>\n<pre class=\"lang-java prettyprint-override\"><code>WebDriver driver = new FirefoxDriver();\ndriver.manage().timeouts().pageLoadTimeout(20, TimeUnit.SECONDS);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2518914,"reputation":21,"user_id":2189655,"display_name":"Firas Al-Barghouthi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1488811114,"creation_date":1488809982,"answer_id":42627937,"question_id":5868439,"body_markdown":"    public static int counter = 0;\r\n    \r\n    public void stepGeneralWait() {\r\n\r\n        boolean breakIt = true;\r\n\r\n        while (true) {\r\n            breakIt = true;\r\n            try {\r\n\r\n                do{\r\n                    // here put e.g. your spinner ID\r\n                    Controller.driver.findElement(By.xpath(&quot;//*[@id=&#39;static&#39;]/div[8]/img&quot;)).click();\r\n                    Thread.sleep(10000);\r\n\r\n                    counter++;\r\n\r\n                    if (counter &gt; 3){\r\n                        breakIt = false;\r\n\r\n                    }\r\n                }\r\n                while (breakIt);\r\n\r\n\r\n\r\n            } catch (Exception e) {\r\n                if (e.getMessage().contains(&quot;element is not attached&quot;)) {\r\n                    breakIt = false;\r\n                }\r\n            }\r\n            if (breakIt) {\r\n                break;\r\n            }\r\n\r\n        }\r\n\r\n        try {\r\n            Thread.sleep(12000);\r\n        } catch (InterruptedException e) {\r\n            // TODO Auto-generated catch block\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }","title":"Wait for page load in Selenium","body":"<pre><code>public static int counter = 0;\n\npublic void stepGeneralWait() {\n\n    boolean breakIt = true;\n\n    while (true) {\n        breakIt = true;\n        try {\n\n            do{\n                // here put e.g. your spinner ID\n                Controller.driver.findElement(By.xpath(\"//*[@id='static']/div[8]/img\")).click();\n                Thread.sleep(10000);\n\n                counter++;\n\n                if (counter &gt; 3){\n                    breakIt = false;\n\n                }\n            }\n            while (breakIt);\n\n\n\n        } catch (Exception e) {\n            if (e.getMessage().contains(\"element is not attached\")) {\n                breakIt = false;\n            }\n        }\n        if (breakIt) {\n            break;\n        }\n\n    }\n\n    try {\n        Thread.sleep(12000);\n    } catch (InterruptedException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10502709,"reputation":1303,"user_id":7740956,"display_name":"Anuj Teotia"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1540817179,"creation_date":1490271779,"answer_id":42975937,"question_id":5868439,"body_markdown":" Explicitly wait or conditional wait in this wait until given this condition.  \r\n\r\n    WebDriverWait wait = new WebDriverWait(wb, 60);\r\n    wait.until(ExpectedConditions.elementToBeClickable(By.name(&quot;value&quot;)));\r\nThis will wait for every web element for 60 seconds.\r\n\r\nUse implicitly wait for wait of every element on page till that given time.\r\n\r\n    driver.manage().timeouts().implicitlyWait(60, TimeUnit.SECONDS);\r\nThis will wait for every web element for 60 seconds.\r\n","title":"Wait for page load in Selenium","body":"<p>Explicitly wait or conditional wait in this wait until given this condition.  </p>\n\n<pre><code>WebDriverWait wait = new WebDriverWait(wb, 60);\nwait.until(ExpectedConditions.elementToBeClickable(By.name(\"value\")));\n</code></pre>\n\n<p>This will wait for every web element for 60 seconds.</p>\n\n<p>Use implicitly wait for wait of every element on page till that given time.</p>\n\n<pre><code>driver.manage().timeouts().implicitlyWait(60, TimeUnit.SECONDS);\n</code></pre>\n\n<p>This will wait for every web element for 60 seconds.</p>\n"},{"comments":[{"owner":{"account_id":2772450,"reputation":22416,"user_id":2386774,"display_name":"JeffC"},"score":0,"creation_date":1526669597,"post_id":43063322,"comment_id":87850877,"body_markdown":"Many elements on pages will never be visible which means this will time out every time.","body":"Many elements on pages will never be visible which means this will time out every time."}],"tags":[],"owner":{"account_id":2285997,"reputation":1,"user_id":2009929,"display_name":"rahul yadav"},"comment_count":1,"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1490688305,"creation_date":1490686543,"answer_id":43063322,"question_id":5868439,"body_markdown":"This code will wait until all the elements on the page are loaded in the DOM.\r\n\r\n    WebDriver driver = new WebDriver();\r\n    WebDriverWait wait = new WebDriverWait(driver, timeout);\r\n    \r\n    wait.until(ExpectedConditions.visibilityOfElementLocated(By.xpath(&quot;//*&quot;)));\r\n\r\n","title":"Wait for page load in Selenium","body":"<p>This code will wait until all the elements on the page are loaded in the DOM.</p>\n\n<pre><code>WebDriver driver = new WebDriver();\nWebDriverWait wait = new WebDriverWait(driver, timeout);\n\nwait.until(ExpectedConditions.visibilityOfElementLocated(By.xpath(\"//*\")));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":8866,"reputation":59368,"user_id":16148,"accept_rate":73,"display_name":"Corey Goldberg"},"score":1,"creation_date":1543177054,"post_id":43323104,"comment_id":93813657,"body_markdown":"bad advice and no explanation","body":"bad advice and no explanation"}],"tags":[],"owner":{"account_id":10428575,"reputation":1,"user_id":7689080,"display_name":"Ak8511"},"comment_count":1,"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1491828281,"creation_date":1491827113,"answer_id":43323104,"question_id":5868439,"body_markdown":"In python, you can simply use:\r\n\r\n    driver.implicitly_wait(30)","title":"Wait for page load in Selenium","body":"<p>In python, you can simply use:</p>\n\n<pre><code>driver.implicitly_wait(30)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9184546,"reputation":65,"user_id":6827290,"display_name":"yuwanlin"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1502762639,"creation_date":1502762639,"answer_id":45685515,"question_id":5868439,"body_markdown":"I use node + selenium-webdriver(which version is 3.5.0 now). what I do for this is:\r\n\r\n    var webdriver = require(&#39;selenium-webdriver&#39;),\r\n        driver = new webdriver.Builder().forBrowser(&#39;chrome&#39;).build();\r\n    ;\r\n    driver.wait(driver.executeScript(&quot;return document.readyState&quot;).then(state =&gt; {\r\n      return state === &#39;complete&#39;;\r\n    }))\r\n\r\n","title":"Wait for page load in Selenium","body":"<p>I use node + selenium-webdriver(which version is 3.5.0 now). what I do for this is:</p>\n\n<pre><code>var webdriver = require('selenium-webdriver'),\n    driver = new webdriver.Builder().forBrowser('chrome').build();\n;\ndriver.wait(driver.executeScript(\"return document.readyState\").then(state =&gt; {\n  return state === 'complete';\n}))\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11121655,"reputation":4630,"user_id":8164333,"display_name":"iamsankalp89"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1506415954,"creation_date":1506415954,"answer_id":46421876,"question_id":5868439,"body_markdown":"You can use wait. there are basically 2 types of wait in selenium\r\n\r\n- Implicit wait\r\n- Explicit wait\r\n\r\n**- Implicit wait**\r\n\r\nThis is very simple please see syntax below:\r\n\r\n    driver.manage().timeouts().implicitlyWait(20, TimeUnit.SECONDS);\r\n\r\n\r\n**- Explicit wait**\r\n\r\nExplicitly wait or conditional wait in this wait until given condition is occurred.\r\n\r\n    WebDriverWait wait = new WebDriverWait(driver, 40);\r\n    WebElement element = wait.until(ExpectedConditions.elementToBeClickable(By.id(&quot;someid&quot;)));\r\n\r\nYou can use other properties like `visblityOf()`, `visblityOfElement()`\r\n","title":"Wait for page load in Selenium","body":"<p>You can use wait. there are basically 2 types of wait in selenium</p>\n\n<ul>\n<li>Implicit wait</li>\n<li>Explicit wait</li>\n</ul>\n\n<p><strong>- Implicit wait</strong></p>\n\n<p>This is very simple please see syntax below:</p>\n\n<pre><code>driver.manage().timeouts().implicitlyWait(20, TimeUnit.SECONDS);\n</code></pre>\n\n<p><strong>- Explicit wait</strong></p>\n\n<p>Explicitly wait or conditional wait in this wait until given condition is occurred.</p>\n\n<pre><code>WebDriverWait wait = new WebDriverWait(driver, 40);\nWebElement element = wait.until(ExpectedConditions.elementToBeClickable(By.id(\"someid\")));\n</code></pre>\n\n<p>You can use other properties like <code>visblityOf()</code>, <code>visblityOfElement()</code></p>\n"},{"comments":[{"owner":{"account_id":11307943,"reputation":527,"user_id":8291902,"display_name":"nosequeweaponer"},"score":0,"creation_date":1571148996,"post_id":48580155,"comment_id":103139064,"body_markdown":"I changed the boolean for void, but is not working in Chrome","body":"I changed the boolean for void, but is not working in Chrome"}],"tags":[],"owner":{"account_id":3849926,"reputation":16804,"user_id":3190347,"accept_rate":68,"display_name":"Shubham Jain"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1566809647,"creation_date":1517565601,"answer_id":48580155,"question_id":5868439,"body_markdown":"Call below Function in your script , this will wait till page is not loaded using javascript\r\n\r\n    public static boolean isloadComplete(WebDriver driver)\r\n    {\r\n        return ((JavascriptExecutor) driver).executeScript(&quot;return document.readyState&quot;).equals(&quot;loaded&quot;)\r\n                || ((JavascriptExecutor) driver).executeScript(&quot;return document.readyState&quot;).equals(&quot;complete&quot;);\r\n    }","title":"Wait for page load in Selenium","body":"<p>Call below Function in your script , this will wait till page is not loaded using javascript</p>\n\n<pre><code>public static boolean isloadComplete(WebDriver driver)\n{\n    return ((JavascriptExecutor) driver).executeScript(\"return document.readyState\").equals(\"loaded\")\n            || ((JavascriptExecutor) driver).executeScript(\"return document.readyState\").equals(\"complete\");\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5788395,"reputation":5166,"user_id":4566794,"accept_rate":86,"display_name":"IKo"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1526684750,"creation_date":1526684750,"answer_id":50420275,"question_id":5868439,"body_markdown":"If someone uses selenide:\r\n\r\n    public static final Long SHORT_WAIT = 5000L; // 5 seconds\r\n    $(&quot;some_css_selector&quot;).waitUntil(Condition.appear, SHORT_WAIT);\r\n\r\nMore Conditions can be found here:\r\nhttp://selenide.org/javadoc/3.0/com/codeborne/selenide/Condition.html","title":"Wait for page load in Selenium","body":"<p>If someone uses selenide:</p>\n\n<pre><code>public static final Long SHORT_WAIT = 5000L; // 5 seconds\n$(\"some_css_selector\").waitUntil(Condition.appear, SHORT_WAIT);\n</code></pre>\n\n<p>More Conditions can be found here:\n<a href=\"http://selenide.org/javadoc/3.0/com/codeborne/selenide/Condition.html\" rel=\"nofollow noreferrer\">http://selenide.org/javadoc/3.0/com/codeborne/selenide/Condition.html</a></p>\n"},{"tags":[],"owner":{"account_id":9978992,"reputation":41,"user_id":7382533,"display_name":"Praveen"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1540817307,"creation_date":1528367884,"answer_id":50739143,"question_id":5868439,"body_markdown":"In my case , I used the following to know the page load status. In our application loading gif(s) are present and, I listen to them as follows to eliminate unwanted wait time in the script.\r\n\r\n    public static void processing(){ \r\n        WebDriverWait wait = new WebDriverWait(driver, 30);\r\n\t\twait.until(ExpectedConditions.visibilityOfElementLocated(By.xpath(&quot;//div[@id=&#39;Msgpanel&#39;]/div/div/img&quot;)));\r\n\t\twait.until(ExpectedConditions.invisibilityOfElementLocated(By.xpath(&quot;//div[@id=&#39;Msgpanel&#39;]/div/div/img&quot;)));\r\n    }\r\n\r\nWhere the xpath locates the gif in the HTML DOM. \r\nAfter this, You may also implement your action methods Click.\r\n\r\n    public static void click(WebElement elementToBeClicked){\r\n        WebDriverWait wait = new WebDriverWait(driver, 45);\r\n        wait.until(ExpectedConditions.visibilityOf(element));\r\n\t\twait.until(ExpectedConditions.elementToBeClickable(element)); \r\n        wait.ignoring(NoSuchElementException.class).ignoring(StaleElementReferenceException.class); elementToBeClicked.click(); \r\n     }","title":"Wait for page load in Selenium","body":"<p>In my case , I used the following to know the page load status. In our application loading gif(s) are present and, I listen to them as follows to eliminate unwanted wait time in the script.</p>\n\n<pre><code>public static void processing(){ \n    WebDriverWait wait = new WebDriverWait(driver, 30);\n    wait.until(ExpectedConditions.visibilityOfElementLocated(By.xpath(\"//div[@id='Msgpanel']/div/div/img\")));\n    wait.until(ExpectedConditions.invisibilityOfElementLocated(By.xpath(\"//div[@id='Msgpanel']/div/div/img\")));\n}\n</code></pre>\n\n<p>Where the xpath locates the gif in the HTML DOM. \nAfter this, You may also implement your action methods Click.</p>\n\n<pre><code>public static void click(WebElement elementToBeClicked){\n    WebDriverWait wait = new WebDriverWait(driver, 45);\n    wait.until(ExpectedConditions.visibilityOf(element));\n    wait.until(ExpectedConditions.elementToBeClickable(element)); \n    wait.ignoring(NoSuchElementException.class).ignoring(StaleElementReferenceException.class); elementToBeClicked.click(); \n }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":10702145,"reputation":739,"user_id":7877099,"display_name":"Isuru Dilshan"},"score":2,"creation_date":1610728583,"post_id":55375398,"comment_id":116232401,"body_markdown":"`WebDriverWait(drive, long)` is deprecated so use `WebDriverWait(drive, duration)`\nex:- \n`import java.time.Duration;\nWebDriverWait(driver, Duration.ofSeconds(5));`","body":"<code>WebDriverWait(drive, long)</code> is deprecated so use <code>WebDriverWait(drive, duration)</code> ex:-  <code>import java.time.Duration; WebDriverWait(driver, Duration.ofSeconds(5));</code>"}],"tags":[],"owner":{"account_id":14124693,"reputation":445,"user_id":10512595,"display_name":"BelovedFool"},"comment_count":1,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1639055187,"creation_date":1553683796,"answer_id":55375398,"question_id":5868439,"body_markdown":"Here is a Java 8 version of the currently [most upvoted answer][1]:\r\n\r\n    WebDriverWait wait = new WebDriverWait(myDriver, Duration.ofSeconds(15));\r\n\twait.until(webDriver -&gt; &quot;complete&quot;.equals(((JavascriptExecutor) webDriver)\r\n        .executeScript(&quot;return document.readyState&quot;)));\r\n\t\t\r\nWhere `myDriver` is a `WebDriver` object (declared earlier).\r\n\r\n**Note**: Be aware that this method (`document.readyState`) only checks the DOM.\r\n\r\n   [1]: https://stackoverflow.com/a/11356234/10512595","title":"Wait for page load in Selenium","body":"<p>Here is a Java 8 version of the currently <a href=\"https://stackoverflow.com/a/11356234/10512595\">most upvoted answer</a>:</p>\n<pre><code>WebDriverWait wait = new WebDriverWait(myDriver, Duration.ofSeconds(15));\nwait.until(webDriver -&gt; &quot;complete&quot;.equals(((JavascriptExecutor) webDriver)\n    .executeScript(&quot;return document.readyState&quot;)));\n    \n</code></pre>\n<p>Where <code>myDriver</code> is a <code>WebDriver</code> object (declared earlier).</p>\n<p><strong>Note</strong>: Be aware that this method (<code>document.readyState</code>) only checks the DOM.</p>\n"},{"tags":[],"owner":{"account_id":13288325,"reputation":334,"user_id":9593658,"display_name":"pAulseperformance"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1667588556,"creation_date":1573664596,"answer_id":58842113,"question_id":5868439,"body_markdown":"Man all these answers require too much code. This should be a simple thing as its pretty common.\r\n\r\nWhy not just inject some simple Javascript with the webdriver and check.\r\nThis is the method I use in my webscraper class. The Javascript is pretty basic even if you don&#39;t know it.\r\n\r\n&lt;!-- language: python --&gt;\r\n\r\n    def js_get_page_state(self):\r\n    &quot;&quot;&quot;\r\n    Javascript for getting document.readyState\r\n    :return: Pages state. See doc link below.\r\n    &quot;&quot;&quot;\r\n    ready_state = self.driver.execute_script(&#39;return document.readyState&#39;)\r\n    if ready_state == &#39;loading&#39;:\r\n        self.logger.info(&quot;Loading Page...&quot;)\r\n    elif ready_state == &#39;interactive&#39;:\r\n        self.logger.info(&quot;Page is interactive&quot;)\r\n    elif ready_state == &#39;complete&#39;:\r\n        self.logger.info(&quot;The page is fully loaded!&quot;)\r\n    return ready_state\r\n\r\n\r\nMore Info in &quot;Document.readyState&quot; of MDN Web Docs: &lt;https://developer.mozilla.org/en-US/docs/Web/API/Document/readyState&gt;\r\n\r\n","title":"Wait for page load in Selenium","body":"<p>Man all these answers require too much code. This should be a simple thing as its pretty common.</p>\n<p>Why not just inject some simple Javascript with the webdriver and check.\nThis is the method I use in my webscraper class. The Javascript is pretty basic even if you don't know it.</p>\n<pre class=\"lang-py prettyprint-override\"><code>def js_get_page_state(self):\n&quot;&quot;&quot;\nJavascript for getting document.readyState\n:return: Pages state. See doc link below.\n&quot;&quot;&quot;\nready_state = self.driver.execute_script('return document.readyState')\nif ready_state == 'loading':\n    self.logger.info(&quot;Loading Page...&quot;)\nelif ready_state == 'interactive':\n    self.logger.info(&quot;Page is interactive&quot;)\nelif ready_state == 'complete':\n    self.logger.info(&quot;The page is fully loaded!&quot;)\nreturn ready_state\n</code></pre>\n<p>More Info in &quot;Document.readyState&quot; of MDN Web Docs: <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Document/readyState\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/en-US/docs/Web/API/Document/readyState</a></p>\n"},{"tags":[],"owner":{"account_id":9924728,"reputation":61,"user_id":7346746,"display_name":"MTK"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1614673369,"creation_date":1614669945,"answer_id":66434979,"question_id":5868439,"body_markdown":"**For Programmers using java 8 onward can use below code to wait for page load using explicit wait.**\r\n\r\n    JavascriptExecutor js = (JavascriptExecutor) driver;  \r\n    new WebDriverWait(driver, 10).until(webDriver -&gt;\r\n    (js).executeScript(&quot;return document.readyState;&quot;).equals(&quot;complete&quot;));\r\n\r\n**Note: In my above code Lambda Expression is used, which is only available in java 8 onward version.**\r\n\r\n**For Programmers using lower version of Java i.e. below Java 8 can use:**\r\n\r\n    ExpectedCondition&lt;Boolean&gt; cond = new ExpectedCondition&lt;Boolean&gt;() {\r\n\t\t@Override\r\n\t\tpublic Boolean apply(WebDriver input) {\r\n\t\t\tJavascriptExecutor js = (JavascriptExecutor) driver; \r\n\t\t\treturn js.executeScript(&quot;return document.readyState;&quot;).equals(&quot;complete&quot;);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\t \r\n\t\tnew WebDriverWait(driver, 100).until(cond);","title":"Wait for page load in Selenium","body":"<p><strong>For Programmers using java 8 onward can use below code to wait for page load using explicit wait.</strong></p>\n<pre><code>JavascriptExecutor js = (JavascriptExecutor) driver;  \nnew WebDriverWait(driver, 10).until(webDriver -&gt;\n(js).executeScript(&quot;return document.readyState;&quot;).equals(&quot;complete&quot;));\n</code></pre>\n<p><strong>Note: In my above code Lambda Expression is used, which is only available in java 8 onward version.</strong></p>\n<p><strong>For Programmers using lower version of Java i.e. below Java 8 can use:</strong></p>\n<pre><code>ExpectedCondition&lt;Boolean&gt; cond = new ExpectedCondition&lt;Boolean&gt;() {\n    @Override\n    public Boolean apply(WebDriver input) {\n        JavascriptExecutor js = (JavascriptExecutor) driver; \n        return js.executeScript(&quot;return document.readyState;&quot;).equals(&quot;complete&quot;);\n            }\n        };\n         \n    new WebDriverWait(driver, 100).until(cond);\n</code></pre>\n"}],"owner":{"account_id":381376,"reputation":3021,"user_id":735987,"display_name":"karthick kumar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":617897,"favorite_count":0,"down_vote_count":0,"up_vote_count":301,"answer_count":48,"score":301,"last_activity_date":1677061256,"creation_date":1304420355,"question_id":5868439,"body_markdown":"How do you make [Selenium][1] 2.0 wait for the page to load?\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Selenium_%28software%29\r\n","title":"Wait for page load in Selenium","body":"<p>How do you make <a href=\"http://en.wikipedia.org/wiki/Selenium_%28software%29\" rel=\"noreferrer\">Selenium</a> 2.0 wait for the page to load?</p>\n"},{"tags":["java","spring-boot","jar","gitlab-ci-runner"],"owner":{"account_id":6535898,"reputation":141,"user_id":5055388,"display_name":"max mazurkevych"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":93,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677060480,"creation_date":1677060480,"question_id":75531142,"body_markdown":"I have TAF created on behalf of Spring Boot. With the following runner:\r\n\r\n    @SpringBootApplication(proxyBeanMethods = false)\r\n    public class SpringBootApplicationTests implements CommandLineRunner {\r\n\r\n    public static final String STEP_DEFS = &quot;com.project.package.stepdefs&quot;;\r\n\r\n    private static final String[] DEFAUL_CUCUMBER_OPTIONS = new String[] {\r\n            &quot;-p&quot;, &quot;io.qameta.allure.cucumber7jvm.AllureCucumber7Jvm&quot;,\r\n            &quot;-g&quot;, STEP_DEFS\r\n    };\r\n\r\n    public static void main(String[] args) {\r\n        System.setProperty(&quot;allure.results.directory&quot;, &quot;target/reports/allure-results&quot;);\r\n        SpringApplication.run(SpringBootApplicationTests.class, args);\r\n    }\r\n    @Override\r\n    public void run(String... args) {\r\n        Main.run(ArrayUtils.addAll(DEFAUL_CUCUMBER_OPTIONS, args));\r\n    }\r\n\r\n}\r\n\r\nin gitlab-ci there is code to run TAF. It creates jar file and runs tests via jar.\r\n\r\n    script:\r\n    - mvn clean package spring-boot: repackage -Dspring.profile.active=test1\r\n    - java -Dspring.profile.active=test1 -Dspring.cloud.vault.app-role.secret-id=${SPRING_CLOUD_VAULT_APP_ROLE_SECRET_ID} -Dcucumber.filter.tags=&quot;${TAG} and not @issue&quot; -jar target/vcms-at-1.0-SNAPSHOT.jar classpath:features --threads 1\r\n\r\nAs a result, after running script I am having the following output:\r\n\r\n        Failed scenarios:\r\n    classpath:features/ContractBasic.feature:30 # Add a label in Draft contract\r\n    classpath:features/GenerateCoverLetterAndPdf.feature:29 # Check generated Cover letter\r\n    24 Scenarios (2 failed, 22 passed)\r\n    1023 Steps (2 failed, 41 skipped, 980 passed)\r\n    24m8.422s\r\n\r\nFrom the perspective of build:\r\n\r\n    2023-02-22 07:39:49.205 DEBUG 22 --- [           main] \r\n    o.s.b.a.ApplicationAvailabilityBean      : Application availability state ReadinessState \r\n    changed to ACCEPTING_TRAFFIC\r\n    2023-02-22 07:39:49.206 DEBUG 22 --- [extShutdownHook] \r\n    s.c.a.AnnotationConfigApplicationContext : Closing \r\n    org.springframework.context.annotation.AnnotationConfigApplicationContext@7a67e3c6, \r\n    started on Wed Feb 22 07:15:37 UTC 2023\r\n    2023-02-22 07:39:49.207 DEBUG 22 --- [extShutdownHook] \r\n    o.s.c.support.DefaultLifecycleProcessor  : Stopping beans in phase -2147483647\r\n    2023-02-22 07:39:49.207 DEBUG 22 --- [extShutdownHook] \r\n    o.s.c.support.DefaultLifecycleProcessor  : Bean &#39;springBootLoggingLifecycle&#39; completed \r\n    its stop procedure\r\n    2023-02-22 07:39:49.208 DEBUG 22 --- [extShutdownHook] o.s.web.client.RestTemplate              \r\n    : HTTP POST https://vault.service.consul.epm- \r\n    sec.projects.epam.com:8200/v1/auth/token/revoke-self\r\n    2023-02-22 07:39:49.208 DEBUG 22 --- [extShutdownHook] o.s.web.client.RestTemplate              \r\n    : Accept=[application/json, application/*+json]\r\n    2023-02-22 07:39:49.477 DEBUG 22 --- [extShutdownHook] o.s.web.client.RestTemplate              \r\n    : Response 204 NO_CONTENT\r\n    2023-02-22 07:39:49.478 DEBUG 22 --- [extShutdownHook] o.s.s.c.ThreadPoolTaskScheduler          \r\n    : Shutting down ExecutorService\r\n    Saving cache for successful job\r\n    00:00\r\n    Creating cache test-main-protected...\r\n    WARNING: .m2/repository/: no matching files. Ensure that the artifact path is relative \r\n    to the working directory \r\n    Archive is up to date!                             \r\n    Created cache\r\n    Uploading artifacts for successful job\r\n    00:03\r\n    Uploading artifacts...\r\n     responseStatus=201 Created token=mBqCQdBr\r\n    Cleaning up project directory and file based variables\r\n    00:00\r\n    Job succeeded\r\n\r\nAs you see tests have failed, but the build is green.\r\nWhat might be the issue? Please help\r\n\r\n","title":"Spring boot application build pass on gitlab-ci, even if there are test failures","body":"<p>I have TAF created on behalf of Spring Boot. With the following runner:</p>\n<pre><code>@SpringBootApplication(proxyBeanMethods = false)\npublic class SpringBootApplicationTests implements CommandLineRunner {\n\npublic static final String STEP_DEFS = &quot;com.project.package.stepdefs&quot;;\n\nprivate static final String[] DEFAUL_CUCUMBER_OPTIONS = new String[] {\n        &quot;-p&quot;, &quot;io.qameta.allure.cucumber7jvm.AllureCucumber7Jvm&quot;,\n        &quot;-g&quot;, STEP_DEFS\n};\n\npublic static void main(String[] args) {\n    System.setProperty(&quot;allure.results.directory&quot;, &quot;target/reports/allure-results&quot;);\n    SpringApplication.run(SpringBootApplicationTests.class, args);\n}\n@Override\npublic void run(String... args) {\n    Main.run(ArrayUtils.addAll(DEFAUL_CUCUMBER_OPTIONS, args));\n}\n</code></pre>\n<p>}</p>\n<p>in gitlab-ci there is code to run TAF. It creates jar file and runs tests via jar.</p>\n<pre><code>script:\n- mvn clean package spring-boot: repackage -Dspring.profile.active=test1\n- java -Dspring.profile.active=test1 -Dspring.cloud.vault.app-role.secret-id=${SPRING_CLOUD_VAULT_APP_ROLE_SECRET_ID} -Dcucumber.filter.tags=&quot;${TAG} and not @issue&quot; -jar target/vcms-at-1.0-SNAPSHOT.jar classpath:features --threads 1\n</code></pre>\n<p>As a result, after running script I am having the following output:</p>\n<pre><code>    Failed scenarios:\nclasspath:features/ContractBasic.feature:30 # Add a label in Draft contract\nclasspath:features/GenerateCoverLetterAndPdf.feature:29 # Check generated Cover letter\n24 Scenarios (2 failed, 22 passed)\n1023 Steps (2 failed, 41 skipped, 980 passed)\n24m8.422s\n</code></pre>\n<p>From the perspective of build:</p>\n<pre><code>2023-02-22 07:39:49.205 DEBUG 22 --- [           main] \no.s.b.a.ApplicationAvailabilityBean      : Application availability state ReadinessState \nchanged to ACCEPTING_TRAFFIC\n2023-02-22 07:39:49.206 DEBUG 22 --- [extShutdownHook] \ns.c.a.AnnotationConfigApplicationContext : Closing \norg.springframework.context.annotation.AnnotationConfigApplicationContext@7a67e3c6, \nstarted on Wed Feb 22 07:15:37 UTC 2023\n2023-02-22 07:39:49.207 DEBUG 22 --- [extShutdownHook] \no.s.c.support.DefaultLifecycleProcessor  : Stopping beans in phase -2147483647\n2023-02-22 07:39:49.207 DEBUG 22 --- [extShutdownHook] \no.s.c.support.DefaultLifecycleProcessor  : Bean 'springBootLoggingLifecycle' completed \nits stop procedure\n2023-02-22 07:39:49.208 DEBUG 22 --- [extShutdownHook] o.s.web.client.RestTemplate              \n: HTTP POST https://vault.service.consul.epm- \nsec.projects.epam.com:8200/v1/auth/token/revoke-self\n2023-02-22 07:39:49.208 DEBUG 22 --- [extShutdownHook] o.s.web.client.RestTemplate              \n: Accept=[application/json, application/*+json]\n2023-02-22 07:39:49.477 DEBUG 22 --- [extShutdownHook] o.s.web.client.RestTemplate              \n: Response 204 NO_CONTENT\n2023-02-22 07:39:49.478 DEBUG 22 --- [extShutdownHook] o.s.s.c.ThreadPoolTaskScheduler          \n: Shutting down ExecutorService\nSaving cache for successful job\n00:00\nCreating cache test-main-protected...\nWARNING: .m2/repository/: no matching files. Ensure that the artifact path is relative \nto the working directory \nArchive is up to date!                             \nCreated cache\nUploading artifacts for successful job\n00:03\nUploading artifacts...\n responseStatus=201 Created token=mBqCQdBr\nCleaning up project directory and file based variables\n00:00\nJob succeeded\n</code></pre>\n<p>As you see tests have failed, but the build is green.\nWhat might be the issue? Please help</p>\n"},{"tags":["java","android","android-widget","android-glide"],"comments":[{"owner":{"account_id":3524972,"reputation":828,"user_id":2946353,"display_name":"Prilaga"},"score":0,"creation_date":1686482819,"post_id":75531141,"comment_id":134801763,"body_markdown":"Did you find the answer? It looks like we need logic that can count the size for all bitmaps or images on the widget. Perhaps LruCache","body":"Did you find the answer? It looks like we need logic that can count the size for all bitmaps or images on the widget. Perhaps LruCache"}],"owner":{"account_id":10088645,"reputation":617,"user_id":7456314,"display_name":"DAVID _"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":169,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1677060478,"creation_date":1677060478,"question_id":75531141,"body_markdown":"I see a lot of errors in firebase:\r\n\r\nusually happen on low memory devices  \r\n\r\n```\r\nRemoteViews for widget update exceeds maximum bitmap memory usage (used: 31961088, max: 9216000)\r\n\r\ncom.bumptech.glide.request.target.AppWidgetTarget.update (AppWidgetTarget.java:124)\r\ncom.bumptech.glide.request.target.AppWidgetTarget.setBitmap (AppWidgetTarget.java:141)\r\ncom.bumptech.glide.request.target.AppWidgetTarget.onResourceReady (AppWidgetTarget.java:131)\r\ncom.bumptech.glide.request.target.AppWidgetTarget.onResourceReady (AppWidgetTarget.java:22)\r\ncom.bumptech.glide.request.SingleRequest.onResourceReady (SingleRequest.java:657)\r\ncom.bumptech.glide.request.SingleRequest.onResourceReady (SingleRequest.java:596)\r\ncom.bumptech.glide.load.engine.EngineJob.callCallbackOnResourceReady (EngineJob.java:159)\r\ncom.bumptech.glide.load.engine.EngineJob$CallResourceReady.run (EngineJob.java:428)\r\n```\r\n\r\n\r\n\r\nWidget code, I used a Glide to load and set image:\r\n\r\n```java\r\n        AppWidgetTarget awt = new AppWidgetTarget(context, R.id.imageView, views, appWidgetId);\r\n        RequestOptions options = new RequestOptions()\r\n                .placeholder(R.drawable.appwidget_bg)\r\n                .error(R.drawable.appwidget_bg);\r\n        Glide.with(context.getApplicationContext())\r\n                .asBitmap()\r\n                .load(&quot;https://test.com/big_image.png&quot;)\r\n                .apply(options)\r\n                .into(awt);\r\n```\r\n\r\nOne important thing that widget can be unlimited resizable (really big)\r\n\r\n\r\nI saw what developer.google.com said about it, it not enough for me:\r\n\r\n\r\n&gt; The total Bitmap memory used by the RemoteViews object cannot exceed that required to fill the screen 1.5 times, ie. (screen width x screen height x 4 x 1.5) bytes.\r\n\r\n\r\n### I don&#39;t understand how calculate bitmap size to fit memory limitation :(","title":"How to establish the maximum bitmap size for a widget&#39;s RemoveViews when using a Glide to fit a memory restriction","body":"<p>I see a lot of errors in firebase:</p>\n<p>usually happen on low memory devices</p>\n<pre><code>RemoteViews for widget update exceeds maximum bitmap memory usage (used: 31961088, max: 9216000)\n\ncom.bumptech.glide.request.target.AppWidgetTarget.update (AppWidgetTarget.java:124)\ncom.bumptech.glide.request.target.AppWidgetTarget.setBitmap (AppWidgetTarget.java:141)\ncom.bumptech.glide.request.target.AppWidgetTarget.onResourceReady (AppWidgetTarget.java:131)\ncom.bumptech.glide.request.target.AppWidgetTarget.onResourceReady (AppWidgetTarget.java:22)\ncom.bumptech.glide.request.SingleRequest.onResourceReady (SingleRequest.java:657)\ncom.bumptech.glide.request.SingleRequest.onResourceReady (SingleRequest.java:596)\ncom.bumptech.glide.load.engine.EngineJob.callCallbackOnResourceReady (EngineJob.java:159)\ncom.bumptech.glide.load.engine.EngineJob$CallResourceReady.run (EngineJob.java:428)\n</code></pre>\n<p>Widget code, I used a Glide to load and set image:</p>\n<pre class=\"lang-java prettyprint-override\"><code>        AppWidgetTarget awt = new AppWidgetTarget(context, R.id.imageView, views, appWidgetId);\n        RequestOptions options = new RequestOptions()\n                .placeholder(R.drawable.appwidget_bg)\n                .error(R.drawable.appwidget_bg);\n        Glide.with(context.getApplicationContext())\n                .asBitmap()\n                .load(&quot;https://test.com/big_image.png&quot;)\n                .apply(options)\n                .into(awt);\n</code></pre>\n<p>One important thing that widget can be unlimited resizable (really big)</p>\n<p>I saw what developer.google.com said about it, it not enough for me:</p>\n<blockquote>\n<p>The total Bitmap memory used by the RemoteViews object cannot exceed that required to fill the screen 1.5 times, ie. (screen width x screen height x 4 x 1.5) bytes.</p>\n</blockquote>\n<h3>I don't understand how calculate bitmap size to fit memory limitation :(</h3>\n"},{"tags":["java","spring-boot","spring-boot-actuator"],"answers":[{"comments":[{"owner":{"account_id":16839155,"reputation":555,"user_id":12174949,"display_name":"Otabek Butcher"},"score":0,"creation_date":1677494207,"post_id":75531111,"comment_id":133341909,"body_markdown":"He is asking general solution for the common problem, I think the answer needs to be updated for more precise answer. The problem is to implement health check for each API:\n1. Which problem he wants to resolve?\n2. How to give general solution that could be applied for other languages?\n3. Which resource is more appropriate and informative that you can prove your statement?","body":"He is asking general solution for the common problem, I think the answer needs to be updated for more precise answer. The problem is to implement health check for each API: 1. Which problem he wants to resolve? 2. How to give general solution that could be applied for other languages? 3. Which resource is more appropriate and informative that you can prove your statement?"}],"tags":[],"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677060319,"creation_date":1677060319,"answer_id":75531111,"question_id":75528831,"body_markdown":"I think it&#39;s better to create a separate custom indicator class for each API.","title":"check Health for all APIs in the application and provide HTTP status code in the response","body":"<p>I think it's better to create a separate custom indicator class for each API.</p>\n"}],"owner":{"account_id":4937658,"reputation":37,"user_id":3975345,"display_name":"avanish rai"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":155,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75531111,"answer_count":1,"score":0,"last_activity_date":1677060319,"creation_date":1677046123,"question_id":75528831,"body_markdown":"In my application there are 10 API&#39;s( rest controllers). I want to create a health check using spring boot actuator in order to have a detailed check for all the API&#39;s( including all rest controller). Currently, I am easily able to show the single API(Rest Controller) health by writing the customHealthIndicator class and override the health() method.\r\nSo is there any way to create a single customeHealthIndicator class and test all API&#39;s are UP or Down or for each API&#39;s(RestContorller) create the separate customeHealthIndicator class.\r\n\r\n    @Component\r\n    public class AlarmLogHealthIndicator\r\n        implements HealthIndicator {\r\n    \r\n     @Autowired\r\n      private AlarmLogService alarmLogService;\r\n    \r\n    \r\n    \r\n      private final String message_key = &quot;v2/alarms/cumulativeDetails&quot;;\r\n    \r\n    \r\n      @Override\r\n      public Health health() {\r\n        if (!isRunningServiceA()) {\r\n          return Health.down().withDetail(message_key, &quot;DOWN&quot;).build();\r\n        }\r\n        return Health.up().withDetail(message_key, &quot;UP&quot;).build();\r\n      }\r\n      private Boolean isRunningServiceA() {\r\n        Boolean isRunning = true;\r\n       \r\n        // Logic to check API is UP or DOWN\r\n    \r\n          RestTemplate restTemplate = new RestTemplate();\r\n         \r\n          HttpHeaders headers = new HttpHeaders();\r\n          HttpEntity&lt;ToolModuleRequestDTO&gt; entity = new HttpEntity&lt;&gt;(getRqstData(), headers);\r\n    \r\n          ResponseEntity&lt;List&lt;CumulativeDetailsDTO&gt;&gt; responseEntity = restTemplate.exchange(\r\n                 (&quot;http://localhost:7072/v2/alarms/cumulativeDetails&quot;),\r\n                  HttpMethod.POST, entity, new ParameterizedTypeReference&lt;List&lt;CumulativeDetailsDTO&gt;&gt;() {} );\r\n    \r\n    \r\n          if (responseEntity.getStatusCodeValue() ==500) {\r\n              isRunning = false;\r\n          } \r\n    //           \r\n        return isRunning;\r\n      }\r\n        private ToolModuleRequestDTO getRqstData(){\r\n           ToolModuleRequestDTO toolModuleRequestDTO = new ToolModuleRequestDTO();\r\n            \r\n            LocalDate  startTime = LocalDate.now();\r\n            LocalDate  endTime = LocalDate.now();\r\n            LocalDateTime now = LocalDateTime.now();\r\n            List   severity = new ArrayList&lt;&gt;();\r\n            severity.add(&quot;Error&quot;);\r\n            severity.add(&quot;Fatal&quot;);\r\n            severity.add(&quot;Critical&quot;);\r\n            String  exclude1 = &quot;WAC&quot;;\r\n            Map&lt;String, String&gt;  mapValue = new HashMap&lt;&gt;();\r\n            mapValue.put(toolId, &quot;9c9b8482-3ad6-4c2d-99e1-de2cda68a2d7&quot;);\r\n          \r\n                   \r\n            DateTimeFormatter formatterStart = DateTimeFormatter.ofPattern(Constants.SqlConstants.DATE_FORMAT_START);\r\n            DateTimeFormatter formatterEnd = DateTimeFormatter.ofPattern(Constants.SqlConstants.DATE_FORMAT_END);\r\n            String startTimeStr = formatterStart.format(startTime);\r\n            String endTimeStr = formatterEnd.format(endTime);\r\n    //      startTimeStamp = Timestamp.valueOf(startTimeStr);\r\n    //      endTimeStamp = Timestamp.valueOf(endTimeStr);\r\n            toolModuleRequestDTO.setStartDate(LocalDate.parse(&quot;2022-04-01&quot;));\r\n            toolModuleRequestDTO.setEndDate(LocalDate.parse(&quot;2022-04-30&quot;));\r\n            toolModuleRequestDTO.setSeverity(&quot;Critical,Error,Fatal&quot;);\r\n            return toolModuleRequestDTO;\r\n        }\r\n    }","title":"check Health for all APIs in the application and provide HTTP status code in the response","body":"<p>In my application there are 10 API's( rest controllers). I want to create a health check using spring boot actuator in order to have a detailed check for all the API's( including all rest controller). Currently, I am easily able to show the single API(Rest Controller) health by writing the customHealthIndicator class and override the health() method.\nSo is there any way to create a single customeHealthIndicator class and test all API's are UP or Down or for each API's(RestContorller) create the separate customeHealthIndicator class.</p>\n<pre><code>@Component\npublic class AlarmLogHealthIndicator\n    implements HealthIndicator {\n\n @Autowired\n  private AlarmLogService alarmLogService;\n\n\n\n  private final String message_key = &quot;v2/alarms/cumulativeDetails&quot;;\n\n\n  @Override\n  public Health health() {\n    if (!isRunningServiceA()) {\n      return Health.down().withDetail(message_key, &quot;DOWN&quot;).build();\n    }\n    return Health.up().withDetail(message_key, &quot;UP&quot;).build();\n  }\n  private Boolean isRunningServiceA() {\n    Boolean isRunning = true;\n   \n    // Logic to check API is UP or DOWN\n\n      RestTemplate restTemplate = new RestTemplate();\n     \n      HttpHeaders headers = new HttpHeaders();\n      HttpEntity&lt;ToolModuleRequestDTO&gt; entity = new HttpEntity&lt;&gt;(getRqstData(), headers);\n\n      ResponseEntity&lt;List&lt;CumulativeDetailsDTO&gt;&gt; responseEntity = restTemplate.exchange(\n             (&quot;http://localhost:7072/v2/alarms/cumulativeDetails&quot;),\n              HttpMethod.POST, entity, new ParameterizedTypeReference&lt;List&lt;CumulativeDetailsDTO&gt;&gt;() {} );\n\n\n      if (responseEntity.getStatusCodeValue() ==500) {\n          isRunning = false;\n      } \n//           \n    return isRunning;\n  }\n    private ToolModuleRequestDTO getRqstData(){\n       ToolModuleRequestDTO toolModuleRequestDTO = new ToolModuleRequestDTO();\n        \n        LocalDate  startTime = LocalDate.now();\n        LocalDate  endTime = LocalDate.now();\n        LocalDateTime now = LocalDateTime.now();\n        List   severity = new ArrayList&lt;&gt;();\n        severity.add(&quot;Error&quot;);\n        severity.add(&quot;Fatal&quot;);\n        severity.add(&quot;Critical&quot;);\n        String  exclude1 = &quot;WAC&quot;;\n        Map&lt;String, String&gt;  mapValue = new HashMap&lt;&gt;();\n        mapValue.put(toolId, &quot;9c9b8482-3ad6-4c2d-99e1-de2cda68a2d7&quot;);\n      \n               \n        DateTimeFormatter formatterStart = DateTimeFormatter.ofPattern(Constants.SqlConstants.DATE_FORMAT_START);\n        DateTimeFormatter formatterEnd = DateTimeFormatter.ofPattern(Constants.SqlConstants.DATE_FORMAT_END);\n        String startTimeStr = formatterStart.format(startTime);\n        String endTimeStr = formatterEnd.format(endTime);\n//      startTimeStamp = Timestamp.valueOf(startTimeStr);\n//      endTimeStamp = Timestamp.valueOf(endTimeStr);\n        toolModuleRequestDTO.setStartDate(LocalDate.parse(&quot;2022-04-01&quot;));\n        toolModuleRequestDTO.setEndDate(LocalDate.parse(&quot;2022-04-30&quot;));\n        toolModuleRequestDTO.setSeverity(&quot;Critical,Error,Fatal&quot;);\n        return toolModuleRequestDTO;\n    }\n}\n</code></pre>\n"},{"tags":["java","testing","junit","mockito"],"comments":[{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1676994199,"post_id":75448480,"comment_id":133247007,"body_markdown":"you left out the most important part of your example method: what exactly happens in `// retrieve information based on objectWithInformation` ?? In the test you do not put anything that is related to your mocked object into that `objectWithInformation` so how would your method `addNotification` ever get that mock? Does it create the `newObject` with a `new` operator?","body":"you left out the most important part of your example method: what exactly happens in <code>&#47;&#47; retrieve information based on objectWithInformation</code> ?? In the test you do not put anything that is related to your mocked object into that <code>objectWithInformation</code> so how would your method <code>addNotification</code> ever get that mock? Does it create the <code>newObject</code> with a <code>new</code> operator?"}],"answers":[{"tags":[],"owner":{"account_id":20679093,"reputation":316,"user_id":15183075,"display_name":"Yannick Mussche"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677060118,"creation_date":1677060118,"answer_id":75531070,"question_id":75448480,"body_markdown":"You cannot perform tests on an object generated inside a function, nor can you mock it in advance. This can only be achieved with functions that accept object as parameters and return those objects. \r\n\r\nYou&#39;re mock is correct, but junit cannot train the newobject inside the function to return an id. So you have to train your repository to return a mock object with the id (this is what you did correct). Your function has a between step, you pass the trained method and return a null value cause the newObject holds no id value. You will have to return the id immediatly in your function.\r\n\r\nAlso use saveAndFlush instead of save() and flush(). Both will work but the first is cleaner and works better for the test.\r\n\r\nthis will make it work:\r\n\r\n``` \r\n\r\nwhen(repository.saveAndFlush(Mockito.any(NewObject.class))).thenReturn(newObjectmock);\r\n\r\npublic long addNotification(ObjectWithInformation objectWithInformation){\r\n       NewObject newObject = // retrieve information based on objectWithInformation\r\n       return repository.saveAndFlush(newObject).getId();\r\n}\r\n\r\n ```\r\n","title":"Create test for service method that saves an object and returns long value","body":"<p>You cannot perform tests on an object generated inside a function, nor can you mock it in advance. This can only be achieved with functions that accept object as parameters and return those objects.</p>\n<p>You're mock is correct, but junit cannot train the newobject inside the function to return an id. So you have to train your repository to return a mock object with the id (this is what you did correct). Your function has a between step, you pass the trained method and return a null value cause the newObject holds no id value. You will have to return the id immediatly in your function.</p>\n<p>Also use saveAndFlush instead of save() and flush(). Both will work but the first is cleaner and works better for the test.</p>\n<p>this will make it work:</p>\n<pre><code>\nwhen(repository.saveAndFlush(Mockito.any(NewObject.class))).thenReturn(newObjectmock);\n\npublic long addNotification(ObjectWithInformation objectWithInformation){\n       NewObject newObject = // retrieve information based on objectWithInformation\n       return repository.saveAndFlush(newObject).getId();\n}\n\n</code></pre>\n"}],"owner":{"account_id":27723956,"reputation":39,"user_id":21163933,"display_name":"User69"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":86,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":75531070,"answer_count":1,"score":-1,"last_activity_date":1677060118,"creation_date":1676381035,"question_id":75448480,"body_markdown":"I am trying to test a service method. The method takes in information, uses this information to create an object. Than it saves this object. Than it returns the id of that object. \r\n\r\nWhen I am trying to test this, my test keeps failing, stating that the returned object is null. I am wondering how I can test this. At this \r\npoint I am trying to mock the generated object with an getId() that returns 1L. Than I let the save method return the mocked object. Also this doesn&#39;t seem to work. \r\n\r\nI could really use some help how I should properly make a test for this method.\r\n\r\nExample method:\r\n```\r\npublic long addNotification(ObjectWithInformation objectWithInformation){\r\n       NewObject newObject = // retrieve information based on objectWithInformation\r\n       repository.save(newObject);\r\n       repository.flush();\r\n       return newObject.getId();\r\n\r\n}\r\n```\r\n\r\nHow I am currently trying to test (test compiles, getId() still returns nullvalue):\r\n\r\n```\r\n@Test\r\nvoid addNotification(){\r\n     NewObject newObjectmock = mock(NewObject.class);\r\n     Mockito.when(newObjectmock.getId()).thenReturn(1L);\r\n     when(repository.save(Mockito.any(NewObject.class))).thenReturn(newObjectmock);\r\n\r\n     service.addNotification(ObjectWithInformation objectWithInformation);\r\n\r\n     //verify methods, which I cannot reach due to getId() returning null in the service method.\r\n\r\n}\r\n```","title":"Create test for service method that saves an object and returns long value","body":"<p>I am trying to test a service method. The method takes in information, uses this information to create an object. Than it saves this object. Than it returns the id of that object.</p>\n<p>When I am trying to test this, my test keeps failing, stating that the returned object is null. I am wondering how I can test this. At this\npoint I am trying to mock the generated object with an getId() that returns 1L. Than I let the save method return the mocked object. Also this doesn't seem to work.</p>\n<p>I could really use some help how I should properly make a test for this method.</p>\n<p>Example method:</p>\n<pre><code>public long addNotification(ObjectWithInformation objectWithInformation){\n       NewObject newObject = // retrieve information based on objectWithInformation\n       repository.save(newObject);\n       repository.flush();\n       return newObject.getId();\n\n}\n</code></pre>\n<p>How I am currently trying to test (test compiles, getId() still returns nullvalue):</p>\n<pre><code>@Test\nvoid addNotification(){\n     NewObject newObjectmock = mock(NewObject.class);\n     Mockito.when(newObjectmock.getId()).thenReturn(1L);\n     when(repository.save(Mockito.any(NewObject.class))).thenReturn(newObjectmock);\n\n     service.addNotification(ObjectWithInformation objectWithInformation);\n\n     //verify methods, which I cannot reach due to getId() returning null in the service method.\n\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":17835,"reputation":303915,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1677058300,"post_id":75530309,"comment_id":133260642,"body_markdown":"Btw: I&#39;m reasonably sure that the `?` in the output for Java 9 &amp; 10 is an artifact of how you output the result (i.e. the encoding you use on the console). As the anser by @kutschkem suggests, that&#39;s probably meant to be a U+2009 character and your console uses an encoding that doesn&#39;t support that.","body":"Btw: I&#39;m reasonably sure that the <code>?</code> in the output for Java 9 &amp; 10 is an artifact of how you output the result (i.e. the encoding you use on the console). As the anser by @kutschkem suggests, that&#39;s probably meant to be a U+2009 character and your console uses an encoding that doesn&#39;t support that."}],"answers":[{"tags":[],"owner":{"account_id":1851415,"reputation":517,"user_id":1677905,"accept_rate":100,"display_name":"Michi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677057237,"creation_date":1677057237,"answer_id":75530446,"question_id":75530309,"body_markdown":"According to Wikipedia (https://de.wikipedia.org/wiki/Schreibweise_von_Zahlen#Tausendertrennzeichen, German language) Austria (&#214;NORM A 1080) allows using a &quot;.&quot; or a &quot;Blank&quot; for grouping numbers, as long as this is done without line breaks. A non-breaking-space (since Java 11) seems to be a better solution in the context.","title":"Inconsistent Number Format with Locale de_AT on different Java versions","body":"<p>According to Wikipedia (<a href=\"https://de.wikipedia.org/wiki/Schreibweise_von_Zahlen#Tausendertrennzeichen\" rel=\"nofollow noreferrer\">https://de.wikipedia.org/wiki/Schreibweise_von_Zahlen#Tausendertrennzeichen</a>, German language) Austria (ÖNORM A 1080) allows using a &quot;.&quot; or a &quot;Blank&quot; for grouping numbers, as long as this is done without line breaks. A non-breaking-space (since Java 11) seems to be a better solution in the context.</p>\n"},{"tags":[],"owner":{"account_id":1387645,"reputation":7926,"user_id":1319284,"accept_rate":69,"display_name":"kutschkem"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1677060080,"creation_date":1677057341,"answer_id":75530469,"question_id":75530309,"body_markdown":"In Java 9, the [source for the localization data][1] changed from &quot;JRE&quot; to &quot;CLDR&quot;, which is Unicode Consortium&#39;s Common Locale Data Repository.\r\n\r\nAs far as I understand, in this data set, the separator for de_AT is a thin space (U+2009). The ? you see is probably due to whatever encoding you use in your console not being able to show that unicode character.\r\n\r\nIn Java 11, the data source was changed yet again, [to CLDR-33][2]. I can&#39;t tell what version it was before. This changes again some locales.\r\n\r\n\r\n  [1]: https://openjdk.org/jeps/252\r\n  [2]: https://blog.netcetera.com/unexpected-incompatibilities-with-java-11-81ed929cc091","title":"Inconsistent Number Format with Locale de_AT on different Java versions","body":"<p>In Java 9, the <a href=\"https://openjdk.org/jeps/252\" rel=\"nofollow noreferrer\">source for the localization data</a> changed from &quot;JRE&quot; to &quot;CLDR&quot;, which is Unicode Consortium's Common Locale Data Repository.</p>\n<p>As far as I understand, in this data set, the separator for de_AT is a thin space (U+2009). The ? you see is probably due to whatever encoding you use in your console not being able to show that unicode character.</p>\n<p>In Java 11, the data source was changed yet again, <a href=\"https://blog.netcetera.com/unexpected-incompatibilities-with-java-11-81ed929cc091\" rel=\"nofollow noreferrer\">to CLDR-33</a>. I can't tell what version it was before. This changes again some locales.</p>\n"}],"owner":{"account_id":1851415,"reputation":517,"user_id":1677905,"accept_rate":100,"display_name":"Michi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":122,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75530469,"answer_count":2,"score":1,"last_activity_date":1677060080,"creation_date":1677056554,"question_id":75530309,"body_markdown":"When I run the following code on different Java versions, I get inconsistent results:\r\n```\r\nimport java.util.Locale;\r\nimport java.text.DecimalFormat;\r\nimport java.text.NumberFormat;\r\n\r\npublic class MyClass {\r\n    public static void main(String args[]) {\r\n        Locale locale =  new Locale(&quot;de&quot;, &quot;AT&quot;);\r\n        DecimalFormat decimalFormat = (DecimalFormat) NumberFormat.getNumberInstance(locale);\r\n        decimalFormat.applyPattern(&quot;###,##0.00&quot;);\r\n        System.out.println(decimalFormat.format(1000));\r\n    }\r\n}\r\n```\r\nI&#39;d expect the result to be `1.000,00`\r\n\r\n- Result with Java 1.8.0_66: `1.000,00`\r\n- Result with Java 9.0.1: `1?000,00`\r\n- Result with Java 10.0.1: `1?000,00`\r\n- Result with Java 11.0.4: `1&#160;000,00`\r\n- Result with Java 11.0.4: `1&#160;000,00`\r\n\r\nChanging the Locale to\r\n```Locale locale = new Locale(&quot;de&quot;);```\r\n\r\n- Result with Java 1.8.0_66: `1.000,00`\r\n- Result with Java 9.0.1: `1.000,00`\r\n- Result with Java 10.0.1: `1.000,00`\r\n- Result with Java 11.0.4: `1.000,00`\r\n- Result with Java 11.0.4: `1.000,00`\r\n\r\nIs this a bug or what is the reason for the inconsistent results?","title":"Inconsistent Number Format with Locale de_AT on different Java versions","body":"<p>When I run the following code on different Java versions, I get inconsistent results:</p>\n<pre><code>import java.util.Locale;\nimport java.text.DecimalFormat;\nimport java.text.NumberFormat;\n\npublic class MyClass {\n    public static void main(String args[]) {\n        Locale locale =  new Locale(&quot;de&quot;, &quot;AT&quot;);\n        DecimalFormat decimalFormat = (DecimalFormat) NumberFormat.getNumberInstance(locale);\n        decimalFormat.applyPattern(&quot;###,##0.00&quot;);\n        System.out.println(decimalFormat.format(1000));\n    }\n}\n</code></pre>\n<p>I'd expect the result to be <code>1.000,00</code></p>\n<ul>\n<li>Result with Java 1.8.0_66: <code>1.000,00</code></li>\n<li>Result with Java 9.0.1: <code>1?000,00</code></li>\n<li>Result with Java 10.0.1: <code>1?000,00</code></li>\n<li>Result with Java 11.0.4: <code>1 000,00</code></li>\n<li>Result with Java 11.0.4: <code>1 000,00</code></li>\n</ul>\n<p>Changing the Locale to\n<code>Locale locale = new Locale(&quot;de&quot;);</code></p>\n<ul>\n<li>Result with Java 1.8.0_66: <code>1.000,00</code></li>\n<li>Result with Java 9.0.1: <code>1.000,00</code></li>\n<li>Result with Java 10.0.1: <code>1.000,00</code></li>\n<li>Result with Java 11.0.4: <code>1.000,00</code></li>\n<li>Result with Java 11.0.4: <code>1.000,00</code></li>\n</ul>\n<p>Is this a bug or what is the reason for the inconsistent results?</p>\n"},{"tags":["java","spring","adaptive-cards"],"owner":{"account_id":27849427,"reputation":1,"user_id":21264227,"display_name":"Lucas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":113,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677059876,"creation_date":1677058657,"question_id":75530747,"body_markdown":"I&#180;m looking for creating adaptive cards for Teams using Java and Spring. I know adaptive cards are just JSON and I can just create the JSON Object in Java, but my problem is that I want to create some elements like a progress bar (there is not such element on the designer), plus I couldn&#180;t find any libraries for Java. All libraries are for C#, javascript, and using other frameworks like Android, iOS, or others.\r\n\r\nIs there any way to have libraries to help me create my own elements for adaptive cards? or, Can I create in some way my own design on HTML and CSS and the render as an adaptive card?\r\n\r\nHere is what I&#180;m looking to achieve:\r\n[looking to achieve](https://i.stack.imgur.com/36BTe.png)\r\n\r\nI tried to create the Progress bar with this JSON but didn&#180;t work, the designer says that element doesn&#180;t exist:\r\n\r\n    `&quot;type&quot;: &quot;AdaptiveCard&quot;,\r\n        &quot;$schema&quot;: &quot;http://adaptivecards.io/schemas/adaptive-card.json&quot;,\r\n        &quot;body&quot;: [\r\n            {\r\n                &quot;type&quot;: &quot;TextBlock&quot;,\r\n                &quot;text&quot;: &quot;Progress:&quot;\r\n            },\r\n            {\r\n                &quot;type&quot;: &quot;Progress&quot;,\r\n                &quot;title&quot;: &quot;task completed at 50%&quot;,\r\n                &quot;value&quot;: 50\r\n            }\r\n        ]`","title":"Create Adaptive Cards with Java and Spring","body":"<p>I´m looking for creating adaptive cards for Teams using Java and Spring. I know adaptive cards are just JSON and I can just create the JSON Object in Java, but my problem is that I want to create some elements like a progress bar (there is not such element on the designer), plus I couldn´t find any libraries for Java. All libraries are for C#, javascript, and using other frameworks like Android, iOS, or others.</p>\n<p>Is there any way to have libraries to help me create my own elements for adaptive cards? or, Can I create in some way my own design on HTML and CSS and the render as an adaptive card?</p>\n<p>Here is what I´m looking to achieve:\n<a href=\"https://i.stack.imgur.com/36BTe.png\" rel=\"nofollow noreferrer\">looking to achieve</a></p>\n<p>I tried to create the Progress bar with this JSON but didn´t work, the designer says that element doesn´t exist:</p>\n<pre><code>`&quot;type&quot;: &quot;AdaptiveCard&quot;,\n    &quot;$schema&quot;: &quot;http://adaptivecards.io/schemas/adaptive-card.json&quot;,\n    &quot;body&quot;: [\n        {\n            &quot;type&quot;: &quot;TextBlock&quot;,\n            &quot;text&quot;: &quot;Progress:&quot;\n        },\n        {\n            &quot;type&quot;: &quot;Progress&quot;,\n            &quot;title&quot;: &quot;task completed at 50%&quot;,\n            &quot;value&quot;: 50\n        }\n    ]`\n</code></pre>\n"},{"tags":["java","jquery","spring","spring-boot","thymeleaf"],"answers":[{"comments":[{"owner":{"account_id":23392463,"reputation":183,"user_id":17456952,"display_name":"anonymous"},"score":0,"creation_date":1677049881,"post_id":75529051,"comment_id":133258470,"body_markdown":"Thanks, Ankur, I have created the script tag and added the code but it is redirecting me to the new page,. I have updated email template in the question at the end. Please suggest on it","body":"Thanks, Ankur, I have created the script tag and added the code but it is redirecting me to the new page,. I have updated email template in the question at the end. Please suggest on it"},{"owner":{"account_id":13870433,"reputation":86,"user_id":10013726,"display_name":"Ankur Sharma"},"score":0,"creation_date":1677059336,"post_id":75529051,"comment_id":133260911,"body_markdown":"@anonymous You are running jquery. I dont see any any jquery resource attached in your HTML file. Add `&lt;script src=&quot;https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js&quot;&gt;&lt;/script&gt;`  under &lt;head&gt;. Also empty the action attribute, although it doesn&#39;t matter","body":"@anonymous You are running jquery. I dont see any any jquery resource attached in your HTML file. Add <code>&lt;script src=&quot;https:&#47;&#47;ajax.googleapis.com&#47;ajax&#47;libs&#47;jquery&#47;3.6.3&#47;jque&zwnj;&#8203;ry.min.js&quot;&gt;&lt;&#47;script&gt;</code>  under &lt;head&gt;. Also empty the action attribute, although it doesn&#39;t matter"}],"tags":[],"owner":{"account_id":13870433,"reputation":86,"user_id":10013726,"display_name":"Ankur Sharma"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677059557,"creation_date":1677047985,"answer_id":75529051,"question_id":75528919,"body_markdown":"When you submit a form in HTML, by default, it will redirect to the URL mentioned in action attribute. To prevent it, use AJAX to send decline request.\r\n\r\n    $(&quot;#decline-form&quot;).submit(function (event) {\r\n\t\t$.ajax({\r\n           url: http://localhost:8082/decline,\r\n           data: form.serialize(),\r\n           type: get,\r\n           success: function(result) {\r\n              // Do something with the response.\r\n              // Might want to check for errors here.\r\n           }, error: function(error) {\r\n               // Here you can handle exceptions thrown by the server or your controller.\r\n           }\r\n       });\r\n\t   event.preventDefault();\r\n\t});\r\n\r\n`event.preventDefault()` will prevent the default redirection on submit.","title":"Prevent redirect on form submissions in thymleaf email template","body":"<p>When you submit a form in HTML, by default, it will redirect to the URL mentioned in action attribute. To prevent it, use AJAX to send decline request.</p>\n<pre><code>$(&quot;#decline-form&quot;).submit(function (event) {\n    $.ajax({\n       url: http://localhost:8082/decline,\n       data: form.serialize(),\n       type: get,\n       success: function(result) {\n          // Do something with the response.\n          // Might want to check for errors here.\n       }, error: function(error) {\n           // Here you can handle exceptions thrown by the server or your controller.\n       }\n   });\n   event.preventDefault();\n});\n</code></pre>\n<p><code>event.preventDefault()</code> will prevent the default redirection on submit.</p>\n"},{"tags":[],"owner":{"account_id":9323072,"reputation":1,"user_id":6921276,"display_name":"NikolaP"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677050904,"creation_date":1677050904,"answer_id":75529417,"question_id":75528919,"body_markdown":"Thymeleaf behaves the same as a regular HTML page. Every form automatically redirects to the &quot;action&quot; attribute. The only way to prevent it is to use AJAX.","title":"Prevent redirect on form submissions in thymleaf email template","body":"<p>Thymeleaf behaves the same as a regular HTML page. Every form automatically redirects to the &quot;action&quot; attribute. The only way to prevent it is to use AJAX.</p>\n"}],"owner":{"account_id":23392463,"reputation":183,"user_id":17456952,"display_name":"anonymous"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":183,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1677059557,"creation_date":1677046858,"question_id":75528919,"body_markdown":"I have a spring boot application with REST APIs which are working fine. In the same project I have one API to send the email notifications to customers which uses the thymleaf for creating the HTML email template and I need to provide the option of Yes and No button and the customer will click on one of them and I need to hit the REST API based on that. \r\n\r\nFor that I have created the form and on click of button it redirects me to the new page with blank URL and when I refresh the page it hits the REST API. I want to prevent the redirection to the new page and hit the REST API on button click. I have gone through many StackOverflow examples and tried that but it is not working. \r\n\r\n\r\n    &lt;!DOCTYPE html&gt;\r\n    &lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot; th:lang=&quot;${#locale.language}&quot; lang=&quot;en&quot;&gt;\r\n    &lt;head&gt;\r\n        &lt;title th:text=&quot;#{email.notification.title}&quot;&gt;Notification Alert&lt;/title&gt;\r\n        &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;\r\n    &lt;/head&gt;\r\n    \r\n    &lt;script&gt;\r\n    $(&#39;#submit-decline&#39;).on(&#39;click&#39;, function() {\r\n        var form = $(&#39;#decline-form&#39;);\r\n        $.ajax({\r\n            url: http://localhost:8082/decline,\r\n            data: form.serialize(),\r\n            type: get,\r\n            success: function(result) {\r\n                // Do something with the response.\r\n                // Might want to check for errors here.\r\n            }, error: function(error) {\r\n                // Here you can handle exceptions thrown by the server or your controller.\r\n            }\r\n        })\r\n    }\r\n    &lt;/script&gt;\r\n    \r\n    &lt;body&gt;\r\n        &lt;p&gt;\r\n            Hi Team,&lt;br&gt;\r\n            Below are the changes found in the table\r\n        &lt;/p&gt;\r\n    \r\n        &lt;table border=&quot;1&quot; style=&quot;width:750px&quot;&gt;\r\n            &lt;tr&gt;\r\n                &lt;td&gt;&lt;b&gt;File&lt;/b&gt;&lt;/td&gt;\r\n                &lt;td&gt;&lt;b&gt;Entity&lt;/b&gt;&lt;/td&gt;\r\n                &lt;td&gt;&lt;b&gt;Client&lt;/b&gt;&lt;/td&gt;\r\n                &lt;td&gt;&lt;b&gt;Timestamp&lt;/b&gt;&lt;/td&gt;\r\n                &lt;td&gt;&lt;b&gt;Changes&lt;/b&gt;&lt;/td&gt;\r\n            &lt;/tr&gt;\r\n            &lt;tr&gt;\r\n                &lt;td th:text=&quot;${notification.fileName}&quot;&gt;&lt;/td&gt;\r\n                &lt;td th:text=&quot;${notification.entity}&quot;&gt;&lt;/td&gt;\r\n                &lt;td th:text=&quot;${notification.client}&quot;&gt;&lt;/td&gt;\r\n                &lt;td th:text=&quot;${notification.timestamp}&quot;&gt;&lt;/td&gt;\r\n                &lt;td th:text=&quot;${notification.changes}&quot;&gt;&lt;/td&gt;\r\n            &lt;/tr&gt;\r\n        &lt;/table&gt;\r\n    \r\n        &lt;p&gt;\r\n            Would you like to approve the changes -\r\n        &lt;/p&gt;\r\n    \r\n        &lt;form id=&quot;decline-form&quot; th:action=&quot;@{http://localhost:8082/decline}&quot; th:method=&quot;get&quot; &gt;\r\n            &lt;input id=&quot;submit-decline&quot; type=&quot;submit&quot; value=&quot;No&quot;/&gt;\r\n        &lt;/form&gt;\r\n    \r\n        &lt;p&gt;\r\n            &lt;span&gt;Regards, &lt;/span&gt;\r\n            &lt;br/&gt;\r\n            &lt;em&gt;Team.&lt;/em&gt;\r\n        &lt;/p&gt;\r\n    \r\n    &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\n\r\n----------\r\n\r\n    @Override\r\n        public void sendNotificationEmail(NotificationDTO notificationDTO) throws MessagingException {\r\n            NotificationDTO notificationDTOWithDetail= fileUtil.getFieldsFromFileName(notificationDTO);\r\n            System.out.println(&quot;65 &quot; + notificationDTOWithDetail);\r\n            String lang = defaultThymeleafLang;\r\n            Locale locale = Locale.forLanguageTag(lang);\r\n            Context context = new Context(locale);\r\n            context.setVariable(ThymeleafEvaluationContext.THYMELEAF_EVALUATION_CONTEXT_CONTEXT_VARIABLE_NAME,\r\n                new ThymeleafEvaluationContext(applicationContext, null));\r\n            context.setVariable(NOTIFICATION, notificationDTOWithDetail);\r\n            context.setVariable(&quot;emailApproveService&quot;,emailApproveService);\r\n            context.setVariable(&quot;emailDeclineService&quot;,emailDeclineService);\r\n            String content = templateEngine.process(&quot;notificationEmail&quot;, context);\r\n            String subject =\r\n                    messageSource.getMessage(\r\n                            &quot;email.notification.subject&quot;,\r\n                            new Object[] {\r\n                                    notificationUtil.getNotificationSubject(\r\n                                            notificationDTOWithDetail.getApplicationName())\r\n                            },\r\n                            locale);\r\n            String primaryNotifiers = notificationUtil.getPrimaryNotifiers(notificationDTOWithDetail.getApplicationName());\r\n            String ccNotifiers =  notificationUtil.getCcNotifiers(notificationDTOWithDetail.getApplicationName());\r\n    \r\n            sendEmail(primaryNotifiers, ccNotifiers, subject, content, false, true);\r\n        }\r\n\r\n\r\n----------\r\n\r\n    package com.rwg.web;\r\n    \r\n    import com.rwg.service.EmailDeclineService;\r\n    import lombok.extern.slf4j.Slf4j;\r\n    import org.springframework.stereotype.Controller;\r\n    import org.springframework.web.bind.annotation.GetMapping;\r\n    import org.springframework.web.bind.annotation.PostMapping;\r\n    import org.springframework.web.bind.annotation.RestController;\r\n    import java.time.Instant;\r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    \r\n    @RestController\r\n    @Slf4j\r\n    public class EmailDeclineResource {\r\n    \r\n        private final EmailDeclineService emailDeclineService;\r\n        EmailDeclineResource(\r\n                EmailDeclineService emailDeclineService){\r\n            this.emailDeclineService=emailDeclineService;\r\n        }\r\n    \r\n        @GetMapping(&quot;/decline&quot;)\r\n        public String decline() {\r\n            ...\r\n            return &quot;success message&quot;;\r\n        }\r\n    \r\n    }\r\n\r\n\r\n----------\r\n\r\nEDIT:\r\n\r\n    &lt;!DOCTYPE html&gt;\r\n    &lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot; th:lang=&quot;${#locale.language}&quot; lang=&quot;en&quot;&gt;\r\n    &lt;head&gt;\r\n        &lt;title th:text=&quot;#{email.notification.title}&quot;&gt;Notification Alert&lt;/title&gt;\r\n        &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;\r\n    &lt;/head&gt;\r\n    \r\n    &lt;script&gt;\r\n    $(&quot;#decline-form&quot;).submit(function (event) {\r\n        .get(&quot;http://localhost:8082/decline&quot;).done(function (data) {\r\n            console.log(&#39;success&#39;)\r\n        });\r\n        event.preventDefault();\r\n    });\r\n    &lt;/script&gt;\r\n    \r\n    &lt;body&gt;\r\n        &lt;p&gt;\r\n            Hi Team,&lt;br&gt;\r\n            Below are the changes found in the table\r\n        &lt;/p&gt;\r\n    \r\n        &lt;table border=&quot;1&quot; style=&quot;width:750px&quot;&gt;\r\n            &lt;tr&gt;\r\n                &lt;td&gt;&lt;b&gt;File&lt;/b&gt;&lt;/td&gt;\r\n                &lt;td&gt;&lt;b&gt;Entity&lt;/b&gt;&lt;/td&gt;\r\n                &lt;td&gt;&lt;b&gt;Client&lt;/b&gt;&lt;/td&gt;\r\n                &lt;td&gt;&lt;b&gt;Timestamp&lt;/b&gt;&lt;/td&gt;\r\n                &lt;td&gt;&lt;b&gt;Changes&lt;/b&gt;&lt;/td&gt;\r\n            &lt;/tr&gt;\r\n            &lt;tr&gt;\r\n                &lt;td th:text=&quot;${notification.fileName}&quot;&gt;&lt;/td&gt;\r\n                &lt;td th:text=&quot;${notification.entity}&quot;&gt;&lt;/td&gt;\r\n                &lt;td th:text=&quot;${notification.client}&quot;&gt;&lt;/td&gt;\r\n                &lt;td th:text=&quot;${notification.timestamp}&quot;&gt;&lt;/td&gt;\r\n                &lt;td th:text=&quot;${notification.changes}&quot;&gt;&lt;/td&gt;\r\n            &lt;/tr&gt;\r\n        &lt;/table&gt;\r\n    \r\n        &lt;p&gt;\r\n            Would you like to approve the changes -\r\n        &lt;/p&gt;\r\n    \r\n        &lt;form id=&quot;decline-form&quot; th:action=&quot;@{http://localhost:8082/decline}&quot; th:method=&quot;get&quot; &gt;\r\n            &lt;input id=&quot;submit-decline&quot; type=&quot;submit&quot; value=&quot;No&quot;/&gt;\r\n        &lt;/form&gt;\r\n    \r\n        &lt;p&gt;\r\n            &lt;span&gt;Regards, &lt;/span&gt;\r\n            &lt;br/&gt;\r\n            &lt;em&gt;Team.&lt;/em&gt;\r\n        &lt;/p&gt;\r\n    \r\n    &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\n   ","title":"Prevent redirect on form submissions in thymleaf email template","body":"<p>I have a spring boot application with REST APIs which are working fine. In the same project I have one API to send the email notifications to customers which uses the thymleaf for creating the HTML email template and I need to provide the option of Yes and No button and the customer will click on one of them and I need to hit the REST API based on that.</p>\n<p>For that I have created the form and on click of button it redirects me to the new page with blank URL and when I refresh the page it hits the REST API. I want to prevent the redirection to the new page and hit the REST API on button click. I have gone through many StackOverflow examples and tried that but it is not working.</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot; th:lang=&quot;${#locale.language}&quot; lang=&quot;en&quot;&gt;\n&lt;head&gt;\n    &lt;title th:text=&quot;#{email.notification.title}&quot;&gt;Notification Alert&lt;/title&gt;\n    &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;\n&lt;/head&gt;\n\n&lt;script&gt;\n$('#submit-decline').on('click', function() {\n    var form = $('#decline-form');\n    $.ajax({\n        url: http://localhost:8082/decline,\n        data: form.serialize(),\n        type: get,\n        success: function(result) {\n            // Do something with the response.\n            // Might want to check for errors here.\n        }, error: function(error) {\n            // Here you can handle exceptions thrown by the server or your controller.\n        }\n    })\n}\n&lt;/script&gt;\n\n&lt;body&gt;\n    &lt;p&gt;\n        Hi Team,&lt;br&gt;\n        Below are the changes found in the table\n    &lt;/p&gt;\n\n    &lt;table border=&quot;1&quot; style=&quot;width:750px&quot;&gt;\n        &lt;tr&gt;\n            &lt;td&gt;&lt;b&gt;File&lt;/b&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;b&gt;Entity&lt;/b&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;b&gt;Client&lt;/b&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;b&gt;Timestamp&lt;/b&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;b&gt;Changes&lt;/b&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n            &lt;td th:text=&quot;${notification.fileName}&quot;&gt;&lt;/td&gt;\n            &lt;td th:text=&quot;${notification.entity}&quot;&gt;&lt;/td&gt;\n            &lt;td th:text=&quot;${notification.client}&quot;&gt;&lt;/td&gt;\n            &lt;td th:text=&quot;${notification.timestamp}&quot;&gt;&lt;/td&gt;\n            &lt;td th:text=&quot;${notification.changes}&quot;&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n    &lt;/table&gt;\n\n    &lt;p&gt;\n        Would you like to approve the changes -\n    &lt;/p&gt;\n\n    &lt;form id=&quot;decline-form&quot; th:action=&quot;@{http://localhost:8082/decline}&quot; th:method=&quot;get&quot; &gt;\n        &lt;input id=&quot;submit-decline&quot; type=&quot;submit&quot; value=&quot;No&quot;/&gt;\n    &lt;/form&gt;\n\n    &lt;p&gt;\n        &lt;span&gt;Regards, &lt;/span&gt;\n        &lt;br/&gt;\n        &lt;em&gt;Team.&lt;/em&gt;\n    &lt;/p&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<hr />\n<pre><code>@Override\n    public void sendNotificationEmail(NotificationDTO notificationDTO) throws MessagingException {\n        NotificationDTO notificationDTOWithDetail= fileUtil.getFieldsFromFileName(notificationDTO);\n        System.out.println(&quot;65 &quot; + notificationDTOWithDetail);\n        String lang = defaultThymeleafLang;\n        Locale locale = Locale.forLanguageTag(lang);\n        Context context = new Context(locale);\n        context.setVariable(ThymeleafEvaluationContext.THYMELEAF_EVALUATION_CONTEXT_CONTEXT_VARIABLE_NAME,\n            new ThymeleafEvaluationContext(applicationContext, null));\n        context.setVariable(NOTIFICATION, notificationDTOWithDetail);\n        context.setVariable(&quot;emailApproveService&quot;,emailApproveService);\n        context.setVariable(&quot;emailDeclineService&quot;,emailDeclineService);\n        String content = templateEngine.process(&quot;notificationEmail&quot;, context);\n        String subject =\n                messageSource.getMessage(\n                        &quot;email.notification.subject&quot;,\n                        new Object[] {\n                                notificationUtil.getNotificationSubject(\n                                        notificationDTOWithDetail.getApplicationName())\n                        },\n                        locale);\n        String primaryNotifiers = notificationUtil.getPrimaryNotifiers(notificationDTOWithDetail.getApplicationName());\n        String ccNotifiers =  notificationUtil.getCcNotifiers(notificationDTOWithDetail.getApplicationName());\n\n        sendEmail(primaryNotifiers, ccNotifiers, subject, content, false, true);\n    }\n</code></pre>\n<hr />\n<pre><code>package com.rwg.web;\n\nimport com.rwg.service.EmailDeclineService;\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RestController;\nimport java.time.Instant;\nimport java.util.HashMap;\nimport java.util.Map;\n\n@RestController\n@Slf4j\npublic class EmailDeclineResource {\n\n    private final EmailDeclineService emailDeclineService;\n    EmailDeclineResource(\n            EmailDeclineService emailDeclineService){\n        this.emailDeclineService=emailDeclineService;\n    }\n\n    @GetMapping(&quot;/decline&quot;)\n    public String decline() {\n        ...\n        return &quot;success message&quot;;\n    }\n\n}\n</code></pre>\n<hr />\n<p>EDIT:</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot; th:lang=&quot;${#locale.language}&quot; lang=&quot;en&quot;&gt;\n&lt;head&gt;\n    &lt;title th:text=&quot;#{email.notification.title}&quot;&gt;Notification Alert&lt;/title&gt;\n    &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;\n&lt;/head&gt;\n\n&lt;script&gt;\n$(&quot;#decline-form&quot;).submit(function (event) {\n    .get(&quot;http://localhost:8082/decline&quot;).done(function (data) {\n        console.log('success')\n    });\n    event.preventDefault();\n});\n&lt;/script&gt;\n\n&lt;body&gt;\n    &lt;p&gt;\n        Hi Team,&lt;br&gt;\n        Below are the changes found in the table\n    &lt;/p&gt;\n\n    &lt;table border=&quot;1&quot; style=&quot;width:750px&quot;&gt;\n        &lt;tr&gt;\n            &lt;td&gt;&lt;b&gt;File&lt;/b&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;b&gt;Entity&lt;/b&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;b&gt;Client&lt;/b&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;b&gt;Timestamp&lt;/b&gt;&lt;/td&gt;\n            &lt;td&gt;&lt;b&gt;Changes&lt;/b&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr&gt;\n            &lt;td th:text=&quot;${notification.fileName}&quot;&gt;&lt;/td&gt;\n            &lt;td th:text=&quot;${notification.entity}&quot;&gt;&lt;/td&gt;\n            &lt;td th:text=&quot;${notification.client}&quot;&gt;&lt;/td&gt;\n            &lt;td th:text=&quot;${notification.timestamp}&quot;&gt;&lt;/td&gt;\n            &lt;td th:text=&quot;${notification.changes}&quot;&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n    &lt;/table&gt;\n\n    &lt;p&gt;\n        Would you like to approve the changes -\n    &lt;/p&gt;\n\n    &lt;form id=&quot;decline-form&quot; th:action=&quot;@{http://localhost:8082/decline}&quot; th:method=&quot;get&quot; &gt;\n        &lt;input id=&quot;submit-decline&quot; type=&quot;submit&quot; value=&quot;No&quot;/&gt;\n    &lt;/form&gt;\n\n    &lt;p&gt;\n        &lt;span&gt;Regards, &lt;/span&gt;\n        &lt;br/&gt;\n        &lt;em&gt;Team.&lt;/em&gt;\n    &lt;/p&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"},{"tags":["java","spring","postgresql","gradle"],"comments":[{"owner":{"display_name":"user330315"},"score":0,"creation_date":1676102056,"post_id":75418764,"comment_id":133073519,"body_markdown":"Did you try a more current driver?","body":"Did you try a more current driver?"},{"owner":{"account_id":15736034,"reputation":189,"user_id":11354959,"display_name":"El Pandario"},"score":0,"creation_date":1676102397,"post_id":75418764,"comment_id":133073549,"body_markdown":"I tried with the version org.postgresql:postgresql:42.5.1 i have the same issue","body":"I tried with the version org.postgresql:postgresql:42.5.1 i have the same issue"},{"owner":{"account_id":14725244,"reputation":482,"user_id":10634487,"display_name":"Bill Naylor"},"score":0,"creation_date":1676114848,"post_id":75418764,"comment_id":133075230,"body_markdown":"Don&#39;t know about gradle (though you would presume they were the same) But I had a look on the maven repositories, and indeed the method `org.postgresql.util.PGInterval.getWholeSeconds` does not exist for version `42.1.4`, however I also looked in versions `42.5.*` and the method does exist. Also seems like some vulnerabilities have been fixed.","body":"Don&#39;t know about gradle (though you would presume they were the same) But I had a look on the maven repositories, and indeed the method <code>org.postgresql.util.PGInterval.getWholeSeconds</code> does not exist for version <code>42.1.4</code>, however I also looked in versions <code>42.5.*</code> and the method does exist. Also seems like some vulnerabilities have been fixed."},{"owner":{"account_id":15736034,"reputation":189,"user_id":11354959,"display_name":"El Pandario"},"score":0,"creation_date":1676121265,"post_id":75418764,"comment_id":133076251,"body_markdown":"I deleted my project, recreated a new one and it worked. Not sure why it was not downloading the version even though I changed it my gradle file","body":"I deleted my project, recreated a new one and it worked. Not sure why it was not downloading the version even though I changed it my gradle file"}],"owner":{"account_id":15736034,"reputation":189,"user_id":11354959,"display_name":"El Pandario"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":414,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1677059192,"creation_date":1676101271,"question_id":75418764,"body_markdown":"Hello i tried to initialize a &quot;simple project&quot; with spring boot using jpa but when starting the app I get the following error (error creating bean with name &quot;entityManagerFactory&quot;: \r\n```\r\nCaused by: java.lang.RuntimeException: Could not initialize PostgreSQLPGObjectJdbcType\r\n\tat org.hibernate.dialect.PostgreSQLIntervalSecondJdbcType.&lt;clinit&gt;(PostgreSQLIntervalSecondJdbcType.java:78) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\r\n\t... 33 common frames omitted\r\nCaused by: java.lang.NoSuchMethodException: org.postgresql.util.PGInterval.getWholeSeconds()\r\n\tat java.base/java.lang.Class.getDeclaredMethod(Class.java:2675) ~[na:na]\r\n\tat org.hibernate.dialect.PostgreSQLIntervalSecondJdbcType.&lt;clinit&gt;(PostgreSQLIntervalSecondJdbcType.java:74) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\r\n\t... 33 common frames omitted\r\n```\r\n\r\nI have java 17 and I am using a gradle project in my gradle file i have the following dependencies\r\n\r\n```\r\ndependencies {\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-security&#39;\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-data-jpa:3.0.2&#39;\r\n\timplementation &#39;org.postgresql:postgresql:42.1.4&#39;\r\n\tcompileOnly &#39;org.projectlombok:lombok&#39;\r\n\tdevelopmentOnly &#39;org.springframework.boot:spring-boot-devtools&#39;\r\n\tannotationProcessor &#39;org.projectlombok:lombok&#39;\r\n\ttestImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n\ttestImplementation &#39;org.springframework.security:spring-security-test&#39;\r\n}\r\n```\r\nI am not sure what is going on. \r\n\r\nThanks in advance\r\n\r\nEDIT: It worked after deleting and recreating a project. I was able to do this because I didn&#39;t start any development on this but probably not the way to go if you have already worked on the project. ","title":"Java NoSuchMethodException working with gradle and postgresql","body":"<p>Hello i tried to initialize a &quot;simple project&quot; with spring boot using jpa but when starting the app I get the following error (error creating bean with name &quot;entityManagerFactory&quot;:</p>\n<pre><code>Caused by: java.lang.RuntimeException: Could not initialize PostgreSQLPGObjectJdbcType\n    at org.hibernate.dialect.PostgreSQLIntervalSecondJdbcType.&lt;clinit&gt;(PostgreSQLIntervalSecondJdbcType.java:78) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    ... 33 common frames omitted\nCaused by: java.lang.NoSuchMethodException: org.postgresql.util.PGInterval.getWholeSeconds()\n    at java.base/java.lang.Class.getDeclaredMethod(Class.java:2675) ~[na:na]\n    at org.hibernate.dialect.PostgreSQLIntervalSecondJdbcType.&lt;clinit&gt;(PostgreSQLIntervalSecondJdbcType.java:74) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    ... 33 common frames omitted\n</code></pre>\n<p>I have java 17 and I am using a gradle project in my gradle file i have the following dependencies</p>\n<pre><code>dependencies {\n    implementation 'org.springframework.boot:spring-boot-starter-security'\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n    implementation 'org.springframework.boot:spring-boot-starter-data-jpa:3.0.2'\n    implementation 'org.postgresql:postgresql:42.1.4'\n    compileOnly 'org.projectlombok:lombok'\n    developmentOnly 'org.springframework.boot:spring-boot-devtools'\n    annotationProcessor 'org.projectlombok:lombok'\n    testImplementation 'org.springframework.boot:spring-boot-starter-test'\n    testImplementation 'org.springframework.security:spring-security-test'\n}\n</code></pre>\n<p>I am not sure what is going on.</p>\n<p>Thanks in advance</p>\n<p>EDIT: It worked after deleting and recreating a project. I was able to do this because I didn't start any development on this but probably not the way to go if you have already worked on the project.</p>\n"},{"tags":["java","postgresql","jdbctemplate"],"comments":[{"owner":{"account_id":8633322,"reputation":218443,"user_id":6464308,"display_name":"Laurenz Albe"},"score":0,"creation_date":1677056488,"post_id":75530051,"comment_id":133260112,"body_markdown":"Crucial question: what is your PostgreSQL version?","body":"Crucial question: what is your PostgreSQL version?"},{"owner":{"account_id":1736824,"reputation":5410,"user_id":1589188,"accept_rate":66,"display_name":"user1589188"},"score":0,"creation_date":1677057061,"post_id":75530051,"comment_id":133260258,"body_markdown":"@LaurenzAlbe PostgreSQL 10.1","body":"@LaurenzAlbe PostgreSQL 10.1"},{"owner":{"account_id":1736824,"reputation":5410,"user_id":1589188,"accept_rate":66,"display_name":"user1589188"},"score":0,"creation_date":1677057135,"post_id":75530051,"comment_id":133260287,"body_markdown":"@LaurenzAlbe Also spring-jdbc-5.3.22","body":"@LaurenzAlbe Also spring-jdbc-5.3.22"},{"owner":{"account_id":8633322,"reputation":218443,"user_id":6464308,"display_name":"Laurenz Albe"},"score":1,"creation_date":1677060606,"post_id":75530051,"comment_id":133261252,"body_markdown":"I just tested on my v10 instance, and it worked for me (without using Java). The syntax was introduced with PostgreSQL 8.4. Don&#39;t use 10.1 for any serious task.","body":"I just tested on my v10 instance, and it worked for me (without using Java). The syntax was introduced with PostgreSQL 8.4. Don&#39;t use 10.1 for any serious task."},{"owner":{"account_id":1906465,"reputation":39489,"user_id":1721239,"display_name":"jjanes"},"score":0,"creation_date":1677083241,"post_id":75530051,"comment_id":133268514,"body_markdown":"What is the complete message, as reported in the PostgreSQL server&#39;s log file?","body":"What is the complete message, as reported in the PostgreSQL server&#39;s log file?"},{"owner":{"account_id":1736824,"reputation":5410,"user_id":1589188,"accept_rate":66,"display_name":"user1589188"},"score":0,"creation_date":1677126161,"post_id":75530051,"comment_id":133277465,"body_markdown":"Resolved after upgrading to PostgreSQL 14.5","body":"Resolved after upgrading to PostgreSQL 14.5"}],"owner":{"account_id":1736824,"reputation":5410,"user_id":1589188,"accept_rate":66,"display_name":"user1589188"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":199,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677059151,"creation_date":1677055135,"question_id":75530051,"body_markdown":"I have a native query:\r\n\r\n```sql\r\nSELECT * FROM mytable ORDER BY column_a OFFSET ? FETCH NEXT ? ROWS ONLY\r\n```\r\n\r\nwhich is translated to\r\n\r\n```sql\r\nSELECT * FROM mytable ORDER BY column_a OFFSET $1 FETCH NEXT $2 ROWS ONLY\r\n```\r\n\r\nBut PostgreSQL is returning an error:\r\n\r\n&gt; org.postgresql.util.PSQLException: ERROR: syntax error at or near \\&quot;$2\\&quot;\r\n\r\nIf I change the query to:\r\n\r\n```sql\r\nSELECT * FROM mytable ORDER BY column_a OFFSET ? LIMIT ?\r\n```\r\n\r\nThen there is no error. However, the LIMIT version is not standard SQL, which I want to avoid. Also, both versions run OK in pgAdmin, so it seems it is something related to JDBC?\r\n\r\nAny idea why the standard version is not working in JDBC?\r\n\r\nSample code:\r\n\r\n```java\r\npublic ResultSet testQuery() {\r\n    String query = &quot;SELECT * FROM mytable ORDER BY column_a OFFSET ? FETCH NEXT ? ROWS ONLY&quot;;\r\n    return jdbcTemplate.execute(query, (PreparedStatement ps) -&gt; {\r\n        ps.setInt(1, 0);\r\n        ps.setInt(2, 10000);\r\n        try (ResultSet rs = ps.executeQuery()) {\r\n            return rs;\r\n        }\r\n    });\r\n}\r\n```\r\n\r\n","title":"Postgresql giving syntax error for standard SQL OFFSET AND FETCH NEXT in jdbcTemplate","body":"<p>I have a native query:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT * FROM mytable ORDER BY column_a OFFSET ? FETCH NEXT ? ROWS ONLY\n</code></pre>\n<p>which is translated to</p>\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT * FROM mytable ORDER BY column_a OFFSET $1 FETCH NEXT $2 ROWS ONLY\n</code></pre>\n<p>But PostgreSQL is returning an error:</p>\n<blockquote>\n<p>org.postgresql.util.PSQLException: ERROR: syntax error at or near &quot;$2&quot;</p>\n</blockquote>\n<p>If I change the query to:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT * FROM mytable ORDER BY column_a OFFSET ? LIMIT ?\n</code></pre>\n<p>Then there is no error. However, the LIMIT version is not standard SQL, which I want to avoid. Also, both versions run OK in pgAdmin, so it seems it is something related to JDBC?</p>\n<p>Any idea why the standard version is not working in JDBC?</p>\n<p>Sample code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public ResultSet testQuery() {\n    String query = &quot;SELECT * FROM mytable ORDER BY column_a OFFSET ? FETCH NEXT ? ROWS ONLY&quot;;\n    return jdbcTemplate.execute(query, (PreparedStatement ps) -&gt; {\n        ps.setInt(1, 0);\n        ps.setInt(2, 10000);\n        try (ResultSet rs = ps.executeQuery()) {\n            return rs;\n        }\n    });\n}\n</code></pre>\n"},{"tags":["java","tomcat","jdbc","server"],"comments":[{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":0,"creation_date":1677061644,"post_id":75528537,"comment_id":133261540,"body_markdown":"`oviyam2.war` , `java.lang.NoClassDefFoundError: Lorg/apache/log4j/Logger` , Check if you have any log4j-xxxx.jar in the WEB-INF/lib directory after unzipping your `oviyam2.war` ?","body":"<code>oviyam2.war</code> , <code>java.lang.NoClassDefFoundError: Lorg&#47;apache&#47;log4j&#47;Logger</code> , Check if you have any log4j-xxxx.jar in the WEB-INF/lib directory after unzipping your <code>oviyam2.war</code> ?"}],"owner":{"account_id":20865501,"reputation":1,"user_id":15326635,"display_name":"Sudeep Akula"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":90,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677058849,"creation_date":1677043082,"question_id":75528537,"body_markdown":"After tomcat crashing, we get a message that an object has not been returned to the pool. But in my code we have closed all the connections what we used. How it is coming in logs don&#39;t know how to identify. Below is the logs.\r\n\r\n\r\n    Pooled object created 2023-02-20 10:46:16 +0530 by the following code has not been returned to the pool:\r\n    org.apache.tomcat.dbcp.pool2.impl.ThrowableCallStack$Snapshot\r\n    \tat org.apache.tomcat.dbcp.pool2.impl.ThrowableCallStack.fillInStackTrace(ThrowableCallStack.java:66)\r\n    \tat org.apache.tomcat.dbcp.pool2.impl.DefaultPooledObject.allocate(DefaultPooledObject.java:78)\r\n    \tat org.apache.tomcat.dbcp.pool2.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:318)\r\n    \tat org.apache.tomcat.dbcp.pool2.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:223)\r\n    \tat org.apache.tomcat.dbcp.dbcp2.PoolingDataSource.getConnection(PoolingDataSource.java:141)\r\n    \tat org.apache.tomcat.dbcp.dbcp2.BasicDataSource.getConnection(BasicDataSource.java:731)\r\n    \tat com.shivam.dao.util.getConnectionAdmin(util.java:43)\r\n    \tat com.shivam.admin.formViewDIS.doGet(formViewDIS.java:2077)\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:655)\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:764)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n    \tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n    \tat com.shivam.admin.SecurityFilter.doFilter(SecurityFilter.java:76)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n    \tat com.shivam.admin.SecurityFilter.doFilter(SecurityFilter.java:76)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n    \tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n    \tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n    \tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)\r\n    \tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\r\n    \tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n    \tat org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:687)\r\n    \tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n    \tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n    \tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)\r\n    \tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n    \tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895)\r\n    \tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1722)\r\n    \tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n    \tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n    \tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n    \tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n    \tat java.lang.Thread.run(Thread.java:750)\r\n    20-Feb-2023 11:19:09.678 WARNING [main] org.apache.tomcat.util.digester.SetPropertiesRule.begin Match [Server/Service/Connector] failed to set property [compressableMimeType] to [text/css,text/javascript,application/javascript]\r\n    20-Feb-2023 11:19:09.701 WARNING [main] org.apache.tomcat.util.digester.SetPropertiesRule.begin Match [Server/Service/Connector] failed to set property [KeepAlive] to [On]\r\n    20-Feb-2023 11:19:09.753 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Server version name:   Apache Tomcat/9.0.55\r\n    20-Feb-2023 11:19:09.754 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Server built:          Nov 10 2021 08:26:45 UTC\r\n    20-Feb-2023 11:19:09.754 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Server version number: 9.0.55.0\r\n    20-Feb-2023 11:19:09.754 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log OS Name:               Linux\r\n    20-Feb-2023 11:19:09.754 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log OS Version:            5.4.17-2136.314.6.3.el7uek.x86_64\r\n    20-Feb-2023 11:19:09.754 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Architecture:          amd64\r\n    20-Feb-2023 11:19:09.761 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Java Home:             /usr/lib/jvm/java-1.8.0-amazon-corretto/jre\r\n    20-Feb-2023 11:19:09.761 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log JVM Version:           1.8.0_342-b07\r\n    20-Feb-2023 11:19:09.761 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log JVM Vendor:            Amazon.com Inc.\r\n    20-Feb-2023 11:19:09.761 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log CATALINA_BASE:         /home/oracle/tomcat9devb\r\n    20-Feb-2023 11:19:09.762 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log CATALINA_HOME:         /home/oracle/tomcat9devb\r\n    20-Feb-2023 11:19:09.762 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Djava.util.logging.config.file=/home/oracle/tomcat9devb/conf/logging.properties\r\n    20-Feb-2023 11:19:09.762 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager\r\n    20-Feb-2023 11:19:09.763 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dfile.encoding=UTF-8\r\n    20-Feb-2023 11:19:09.763 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Xms1024m\r\n    20-Feb-2023 11:19:09.763 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Xmx20672m\r\n    20-Feb-2023 11:19:09.763 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -XX:-UseGCOverheadLimit\r\n    20-Feb-2023 11:19:09.763 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -XX:+HeapDumpOnOutOfMemoryError\r\n    20-Feb-2023 11:19:09.763 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -XX:HeapDumpPath=/home/oracle/tomcat9devb/logs\r\n    20-Feb-2023 11:19:09.764 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dcom.sun.management.jmxremote\r\n    20-Feb-2023 11:19:09.764 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dcom.sun.management.jmxremote.port=9444\r\n    20-Feb-2023 11:19:09.764 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dcom.sun.management.jmxremote.ssl=false\r\n    20-Feb-2023 11:19:09.764 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dcom.sun.management.jmxremote.authenticate=false\r\n    20-Feb-2023 11:19:09.764 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Djava.rmi.server.hostname=127.0.0.1\r\n    20-Feb-2023 11:19:09.764 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -XX:ErrorFile=/home/oraclee/tomcat9devb/logs/java_error_%p.log\r\n    20-Feb-2023 11:19:09.765 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Djdk.tls.ephemeralDHKeySize=2048\r\n    20-Feb-2023 11:19:09.765 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Djava.protocol.handler.pkgs=org.apache.catalina.webresources\r\n    20-Feb-2023 11:19:09.765 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dorg.apache.catalina.security.SecurityListener.UMASK=0027\r\n    20-Feb-2023 11:19:09.765 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dignore.endorsed.dirs=\r\n    20-Feb-2023 11:19:09.765 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dcatalina.base=/home/oracle/tomcat9devb\r\n    20-Feb-2023 11:19:09.765 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dcatalina.home=/home/oracle/tomcat9devb\r\n    20-Feb-2023 11:19:09.765 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Djava.io.tmpdir=/home/oracle/tomcat9devb/temp\r\n    20-Feb-2023 11:19:09.767 INFO [main] org.apache.catalina.core.AprLifecycleListener.lifecycleEvent The Apache Tomcat Native library which allows using OpenSSL was not found on the java.library.path: [/home/u01/app/oracle/product/12.1.0.2/db_1/lib:/lib:/usr/lib:/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib]\r\n    20-Feb-2023 11:19:10.025 INFO [main] org.apache.coyote.AbstractProtocol.init Initializing ProtocolHandler [&quot;http-nio-9876&quot;]\r\n    20-Feb-2023 11:19:10.059 INFO [main] org.apache.catalina.startup.Catalina.load Server initialization in [573] milliseconds\r\n    20-Feb-2023 11:19:10.100 INFO [main] org.apache.catalina.core.StandardService.startInternal Starting service [Catalina]\r\n    20-Feb-2023 11:19:10.101 INFO [main] org.apache.catalina.core.StandardEngine.startInternal Starting Servlet engine: [Apache Tomcat/9.0.55]\r\n    20-Feb-2023 11:19:10.187 INFO [main] org.apache.catalina.startup.HostConfig.deployWAR Deploying web application archive [/home/oracle/tomcat9devb/webapps/shivamqa.war]\r\n    20-Feb-2023 11:19:35.709 INFO [main] org.apache.jasper.servlet.TldScanner.scanJars At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\r\n    20-Feb-2023 11:19:41.243 INFO [main] org.apache.catalina.startup.HostConfig.deployWAR Deployment of web application archive [/home/oracle/tomcat9devb/webapps/shivamqa.war] has finished in [31,055] ms\r\n    20-Feb-2023 11:19:41.259 INFO [main] org.apache.catalina.startup.HostConfig.deployWAR Deploying web application archive [/home/oracle/tomcat9devb/webapps/oviyam2.war]\r\n    20-Feb-2023 11:19:41.456 SEVERE [main] org.apache.catalina.startup.HostConfig.deployWAR Error deploying web application archive [/home/oracle/tomcat9devb/webapps/oviyam2.war]\r\n    \tjava.lang.IllegalStateException: Error starting child\r\n    \t\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:729)\r\n    \t\tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:698)\r\n    \t\tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:696)\r\n    \t\tat org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:1024)\r\n    \t\tat org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1911)\r\n    \t\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n    \t\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n    \t\tat org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n    \t\tat java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:112)\r\n    \t\tat org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:825)\r\n    \t\tat org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:475)\r\n    \t\tat org.apache.catalina.startup.HostConfig.start(HostConfig.java:1618)\r\n    \t\tat org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:319)\r\n    \t\tat org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)\r\n    \t\tat org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:423)\r\n    \t\tat org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:366)\r\n    \t\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:946)\r\n    \t\tat org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:835)\r\n    \t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \t\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\r\n    \t\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\r\n    \t\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n    \t\tat org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n    \t\tat java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134)\r\n    \t\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\r\n    \t\tat org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:263)\r\n    \t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \t\tat org.apache.catalina.core.StandardService.startInternal(StandardService.java:432)\r\n    \t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \t\tat org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:927)\r\n    \t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \t\tat org.apache.catalina.startup.Catalina.start(Catalina.java:772)\r\n    \t\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \t\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \t\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \t\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n    \t\tat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:345)\r\n    \t\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:476)\r\n    \tCaused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/oviyam2]]\r\n    \t\tat org.apache.catalina.util.LifecycleBase.handleSubClassException(LifecycleBase.java:440)\r\n    \t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:198)\r\n    \t\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:726)\r\n    \t\t... 37 more\r\n    \tCaused by: java.lang.NoClassDefFoundError: Lorg/apache/log4j/Logger;\r\n    \t\tat java.lang.Class.getDeclaredFields0(Native Method)\r\n    \t\tat java.lang.Class.privateGetDeclaredFields(Class.java:2611)\r\n    \t\tat java.lang.Class.getDeclaredFields(Class.java:1944)\r\n    \t\tat org.apache.catalina.util.Introspection.getDeclaredFields(Introspection.java:104)\r\n    \t\tat org.apache.catalina.startup.WebAnnotationSet.loadFieldsAnnotation(WebAnnotationSet.java:269)\r\n    \t\tat org.apache.catalina.startup.WebAnnotationSet.loadApplicationServletAnnotations(WebAnnotationSet.java:137)\r\n    \t\tat org.apache.catalina.startup.WebAnnotationSet.loadApplicationAnnotations(WebAnnotationSet.java:69)\r\n    \t\tat org.apache.catalina.startup.ContextConfig.applicationAnnotationsConfig(ContextConfig.java:332)\r\n    \t\tat org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:989)\r\n    \t\tat org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:303)\r\n    \t\tat org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)\r\n    \t\tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5135)\r\n    \t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \t\t... 38 more\r\n    \tCaused by: java.lang.ClassNotFoundException: org.apache.log4j.Logger\r\n    \t\tat org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1407)\r\n    \t\tat org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1215)\r\n    \t\t... 51 more\r\n\r\n\r\nAdded finally block, in finally we are closing connections. If we are checking with localhost, we are not able to find the connection leaks. If it is running in server we are facing this problem.","title":"after tomcat crashing, in logs it is showing following code not returned to the pool","body":"<p>After tomcat crashing, we get a message that an object has not been returned to the pool. But in my code we have closed all the connections what we used. How it is coming in logs don't know how to identify. Below is the logs.</p>\n<pre><code>Pooled object created 2023-02-20 10:46:16 +0530 by the following code has not been returned to the pool:\norg.apache.tomcat.dbcp.pool2.impl.ThrowableCallStack$Snapshot\n    at org.apache.tomcat.dbcp.pool2.impl.ThrowableCallStack.fillInStackTrace(ThrowableCallStack.java:66)\n    at org.apache.tomcat.dbcp.pool2.impl.DefaultPooledObject.allocate(DefaultPooledObject.java:78)\n    at org.apache.tomcat.dbcp.pool2.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:318)\n    at org.apache.tomcat.dbcp.pool2.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:223)\n    at org.apache.tomcat.dbcp.dbcp2.PoolingDataSource.getConnection(PoolingDataSource.java:141)\n    at org.apache.tomcat.dbcp.dbcp2.BasicDataSource.getConnection(BasicDataSource.java:731)\n    at com.shivam.dao.util.getConnectionAdmin(util.java:43)\n    at com.shivam.admin.formViewDIS.doGet(formViewDIS.java:2077)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:655)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at com.shivam.admin.SecurityFilter.doFilter(SecurityFilter.java:76)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at com.shivam.admin.SecurityFilter.doFilter(SecurityFilter.java:76)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\n    at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:687)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:895)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1722)\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    at java.lang.Thread.run(Thread.java:750)\n20-Feb-2023 11:19:09.678 WARNING [main] org.apache.tomcat.util.digester.SetPropertiesRule.begin Match [Server/Service/Connector] failed to set property [compressableMimeType] to [text/css,text/javascript,application/javascript]\n20-Feb-2023 11:19:09.701 WARNING [main] org.apache.tomcat.util.digester.SetPropertiesRule.begin Match [Server/Service/Connector] failed to set property [KeepAlive] to [On]\n20-Feb-2023 11:19:09.753 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Server version name:   Apache Tomcat/9.0.55\n20-Feb-2023 11:19:09.754 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Server built:          Nov 10 2021 08:26:45 UTC\n20-Feb-2023 11:19:09.754 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Server version number: 9.0.55.0\n20-Feb-2023 11:19:09.754 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log OS Name:               Linux\n20-Feb-2023 11:19:09.754 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log OS Version:            5.4.17-2136.314.6.3.el7uek.x86_64\n20-Feb-2023 11:19:09.754 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Architecture:          amd64\n20-Feb-2023 11:19:09.761 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Java Home:             /usr/lib/jvm/java-1.8.0-amazon-corretto/jre\n20-Feb-2023 11:19:09.761 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log JVM Version:           1.8.0_342-b07\n20-Feb-2023 11:19:09.761 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log JVM Vendor:            Amazon.com Inc.\n20-Feb-2023 11:19:09.761 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log CATALINA_BASE:         /home/oracle/tomcat9devb\n20-Feb-2023 11:19:09.762 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log CATALINA_HOME:         /home/oracle/tomcat9devb\n20-Feb-2023 11:19:09.762 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Djava.util.logging.config.file=/home/oracle/tomcat9devb/conf/logging.properties\n20-Feb-2023 11:19:09.762 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager\n20-Feb-2023 11:19:09.763 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dfile.encoding=UTF-8\n20-Feb-2023 11:19:09.763 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Xms1024m\n20-Feb-2023 11:19:09.763 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Xmx20672m\n20-Feb-2023 11:19:09.763 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -XX:-UseGCOverheadLimit\n20-Feb-2023 11:19:09.763 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -XX:+HeapDumpOnOutOfMemoryError\n20-Feb-2023 11:19:09.763 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -XX:HeapDumpPath=/home/oracle/tomcat9devb/logs\n20-Feb-2023 11:19:09.764 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dcom.sun.management.jmxremote\n20-Feb-2023 11:19:09.764 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dcom.sun.management.jmxremote.port=9444\n20-Feb-2023 11:19:09.764 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dcom.sun.management.jmxremote.ssl=false\n20-Feb-2023 11:19:09.764 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dcom.sun.management.jmxremote.authenticate=false\n20-Feb-2023 11:19:09.764 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Djava.rmi.server.hostname=127.0.0.1\n20-Feb-2023 11:19:09.764 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -XX:ErrorFile=/home/oraclee/tomcat9devb/logs/java_error_%p.log\n20-Feb-2023 11:19:09.765 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Djdk.tls.ephemeralDHKeySize=2048\n20-Feb-2023 11:19:09.765 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Djava.protocol.handler.pkgs=org.apache.catalina.webresources\n20-Feb-2023 11:19:09.765 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dorg.apache.catalina.security.SecurityListener.UMASK=0027\n20-Feb-2023 11:19:09.765 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dignore.endorsed.dirs=\n20-Feb-2023 11:19:09.765 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dcatalina.base=/home/oracle/tomcat9devb\n20-Feb-2023 11:19:09.765 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Dcatalina.home=/home/oracle/tomcat9devb\n20-Feb-2023 11:19:09.765 INFO [main] org.apache.catalina.startup.VersionLoggerListener.log Command line argument: -Djava.io.tmpdir=/home/oracle/tomcat9devb/temp\n20-Feb-2023 11:19:09.767 INFO [main] org.apache.catalina.core.AprLifecycleListener.lifecycleEvent The Apache Tomcat Native library which allows using OpenSSL was not found on the java.library.path: [/home/u01/app/oracle/product/12.1.0.2/db_1/lib:/lib:/usr/lib:/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib]\n20-Feb-2023 11:19:10.025 INFO [main] org.apache.coyote.AbstractProtocol.init Initializing ProtocolHandler [&quot;http-nio-9876&quot;]\n20-Feb-2023 11:19:10.059 INFO [main] org.apache.catalina.startup.Catalina.load Server initialization in [573] milliseconds\n20-Feb-2023 11:19:10.100 INFO [main] org.apache.catalina.core.StandardService.startInternal Starting service [Catalina]\n20-Feb-2023 11:19:10.101 INFO [main] org.apache.catalina.core.StandardEngine.startInternal Starting Servlet engine: [Apache Tomcat/9.0.55]\n20-Feb-2023 11:19:10.187 INFO [main] org.apache.catalina.startup.HostConfig.deployWAR Deploying web application archive [/home/oracle/tomcat9devb/webapps/shivamqa.war]\n20-Feb-2023 11:19:35.709 INFO [main] org.apache.jasper.servlet.TldScanner.scanJars At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\n20-Feb-2023 11:19:41.243 INFO [main] org.apache.catalina.startup.HostConfig.deployWAR Deployment of web application archive [/home/oracle/tomcat9devb/webapps/shivamqa.war] has finished in [31,055] ms\n20-Feb-2023 11:19:41.259 INFO [main] org.apache.catalina.startup.HostConfig.deployWAR Deploying web application archive [/home/oracle/tomcat9devb/webapps/oviyam2.war]\n20-Feb-2023 11:19:41.456 SEVERE [main] org.apache.catalina.startup.HostConfig.deployWAR Error deploying web application archive [/home/oracle/tomcat9devb/webapps/oviyam2.war]\n    java.lang.IllegalStateException: Error starting child\n        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:729)\n        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:698)\n        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:696)\n        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:1024)\n        at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1911)\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n        at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n        at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:112)\n        at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:825)\n        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:475)\n        at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1618)\n        at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:319)\n        at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)\n        at org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:423)\n        at org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:366)\n        at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:946)\n        at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:835)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\n        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n        at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n        at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134)\n        at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\n        at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:263)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        at org.apache.catalina.core.StandardService.startInternal(StandardService.java:432)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:927)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        at org.apache.catalina.startup.Catalina.start(Catalina.java:772)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:345)\n        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:476)\n    Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/oviyam2]]\n        at org.apache.catalina.util.LifecycleBase.handleSubClassException(LifecycleBase.java:440)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:198)\n        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:726)\n        ... 37 more\n    Caused by: java.lang.NoClassDefFoundError: Lorg/apache/log4j/Logger;\n        at java.lang.Class.getDeclaredFields0(Native Method)\n        at java.lang.Class.privateGetDeclaredFields(Class.java:2611)\n        at java.lang.Class.getDeclaredFields(Class.java:1944)\n        at org.apache.catalina.util.Introspection.getDeclaredFields(Introspection.java:104)\n        at org.apache.catalina.startup.WebAnnotationSet.loadFieldsAnnotation(WebAnnotationSet.java:269)\n        at org.apache.catalina.startup.WebAnnotationSet.loadApplicationServletAnnotations(WebAnnotationSet.java:137)\n        at org.apache.catalina.startup.WebAnnotationSet.loadApplicationAnnotations(WebAnnotationSet.java:69)\n        at org.apache.catalina.startup.ContextConfig.applicationAnnotationsConfig(ContextConfig.java:332)\n        at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:989)\n        at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:303)\n        at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)\n        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5135)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        ... 38 more\n    Caused by: java.lang.ClassNotFoundException: org.apache.log4j.Logger\n        at org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1407)\n        at org.apache.catalina.loader.WebappClassLoaderBase.loadClass(WebappClassLoaderBase.java:1215)\n        ... 51 more\n</code></pre>\n<p>Added finally block, in finally we are closing connections. If we are checking with localhost, we are not able to find the connection leaks. If it is running in server we are facing this problem.</p>\n"},{"tags":["java","git","spring-boot","rest","bitbucket"],"comments":[{"owner":{"account_id":2837108,"reputation":27359,"user_id":2437508,"accept_rate":25,"display_name":"eftshift0"},"score":0,"creation_date":1677058958,"post_id":75530572,"comment_id":133260802,"body_markdown":"If  branch `X` should be merged in 2 different branches, you could check if each of the target branches already has it merged with `git branch --contains=X` or something along those lines.","body":"If  branch <code>X</code> should be merged in 2 different branches, you could check if each of the target branches already has it merged with <code>git branch --contains=X</code> or something along those lines."},{"owner":{"account_id":25125122,"reputation":468,"user_id":18973005,"display_name":"Randommm"},"score":0,"creation_date":1677059462,"post_id":75530572,"comment_id":133260940,"body_markdown":"Just ignore the commits with the default merge message? This should leave you with the actual commits from which you can exclude changes that are in develop","body":"Just ignore the commits with the default merge message? This should leave you with the actual commits from which you can exclude changes that are in develop"},{"owner":{"account_id":22595527,"reputation":19,"user_id":17976980,"display_name":"vicky"},"score":0,"creation_date":1677822861,"post_id":75530572,"comment_id":133416942,"body_markdown":"Even if using the git contains command I find that a certain changes have not been merged, how do I find that who in particular made which changes? Only if I have that clear idea I can send an notification right?","body":"Even if using the git contains command I find that a certain changes have not been merged, how do I find that who in particular made which changes? Only if I have that clear idea I can send an notification right?"}],"answers":[{"tags":[],"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677058822,"creation_date":1677058822,"answer_id":75530788,"question_id":75530572,"body_markdown":"To get a list of author emails who contributed to a branch, you can use the following command:\r\n\r\n```\r\ngit log --pretty=&#39;format:%ae&#39; upstream..feature\r\n```\r\n\r\nApply the usual `sort -u` or `sort | uniq` pattern to get only unique emails (`awk &#39;!seen[$0]++&#39;` works too).","title":"How to compare commits and send notification about the commit","body":"<p>To get a list of author emails who contributed to a branch, you can use the following command:</p>\n<pre><code>git log --pretty='format:%ae' upstream..feature\n</code></pre>\n<p>Apply the usual <code>sort -u</code> or <code>sort | uniq</code> pattern to get only unique emails (<code>awk '!seen[$0]++'</code> works too).</p>\n"}],"owner":{"account_id":22595527,"reputation":19,"user_id":17976980,"display_name":"vicky"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1677058822,"creation_date":1677057880,"question_id":75530572,"body_markdown":"Suppose there are three branches namely feature, release and develop. There&#39;s a merge from feature to develop and feature to release. Since the commit Id is different it is considered as a difference between develop and release but in reality both have the changes. So my task is here is to send mail to all those people who had made changes in release but not in develop for several repositories. How do I get the difference and the detail of author who made the difference.\r\n\r\nI have written a Java spring boot code using which the compare option of stash is called using rest API but that option yields incorrect data as I mentioned earlier. So how do I compare it and get exact correct results.","title":"How to compare commits and send notification about the commit","body":"<p>Suppose there are three branches namely feature, release and develop. There's a merge from feature to develop and feature to release. Since the commit Id is different it is considered as a difference between develop and release but in reality both have the changes. So my task is here is to send mail to all those people who had made changes in release but not in develop for several repositories. How do I get the difference and the detail of author who made the difference.</p>\n<p>I have written a Java spring boot code using which the compare option of stash is called using rest API but that option yields incorrect data as I mentioned earlier. So how do I compare it and get exact correct results.</p>\n"},{"tags":["java","spring","spring-boot","spring-mvc","spring-security"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1654753687,"post_id":72549997,"comment_id":128167837,"body_markdown":"The wrong one isn&#39;t chosen, you used the wrong configuration. The name of the bean for the `LocaleResolver` **must be** `localeResolver` yours is `defaultLocaleResolver` and as such doesn&#39;t match and thus the Spring Boot default is used.  To fix rename your method.","body":"The wrong one isn&#39;t chosen, you used the wrong configuration. The name of the bean for the <code>LocaleResolver</code> <b>must be</b> <code>localeResolver</code> yours is <code>defaultLocaleResolver</code> and as such doesn&#39;t match and thus the Spring Boot default is used.  To fix rename your method."}],"owner":{"account_id":8428136,"reputation":434,"user_id":6324746,"display_name":"rizesky"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":601,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1677058707,"creation_date":1654709747,"question_id":72549997,"body_markdown":"I am developing a spring boot based application that supports internationalisation\r\n\r\nMy env:\r\n - Jdk11\r\n - Spring boot 2.7.0\r\n - Spring Security\r\n \r\nHere is my web mvc conf\r\n\r\nWebMvcConf.java\r\n```java\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.web.servlet.LocaleResolver;\r\n    import org.springframework.web.servlet.config.annotation.InterceptorRegistry;\r\n    import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\r\n    import org.springframework.web.servlet.i18n.LocaleChangeInterceptor;\r\n    import org.springframework.web.servlet.i18n.SessionLocaleResolver;\r\n    \r\n    import java.util.Locale;\r\n    \r\n    @Configuration\r\n    public class WebMvcConf  implements WebMvcConfigurer {\r\n        public static final Locale idnLocale = Locale.forLanguageTag(&quot;id-ID&quot;);\r\n    \r\n        @Bean\r\n        public LocaleResolver defaultLocaleResolver(){\r\n            var resolver = new SessionLocaleResolver();\r\n            resolver.setDefaultLocale(idnLocale);\r\n            return resolver;\r\n        }\r\n    \r\n        @Bean\r\n        public LocaleChangeInterceptor localeChangeInterceptor(){\r\n            var interceptor = new LocaleChangeInterceptor();\r\n            interceptor.setIgnoreInvalidLocale(false);\r\n            interceptor.setParamName(&quot;lang&quot;);\r\n    \r\n            return interceptor;\r\n        }\r\n    \r\n        @Override\r\n        public void addInterceptors(InterceptorRegistry registry) {\r\n            registry.addInterceptor(localeChangeInterceptor());\r\n        }\r\n    }\r\n```\r\n\r\nAnd here is my security config:\r\n```java\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.http.HttpMethod;\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\nimport org.springframework.security.config.http.SessionCreationPolicy;\r\nimport org.springframework.security.web.SecurityFilterChain;\r\nimport org.springframework.security.web.header.HeaderWriterFilter;\r\nimport org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestWrapper;\r\n\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class SecurityConf{\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity httpSecurity) throws Exception {\r\n        httpSecurity\r\n                .cors()//enable cors\r\n                .and()\r\n                .csrf().disable()//disable csrf\r\n                .sessionManagement(session-&gt;session.sessionCreationPolicy(SessionCreationPolicy.STATELESS))//stateless session (Rest)\r\n                .authorizeHttpRequests(authz-&gt;authz\r\n                        .antMatchers(HttpMethod.GET,&quot;/&quot;).permitAll()\r\n                        .antMatchers(HttpMethod.POST,&quot;/users/login&quot;,&quot;users/register&quot;,&quot;users/forgot-password&quot;).permitAll()\r\n                        .antMatchers(HttpMethod.PATCH,&quot;/users/password&quot;).permitAll()\r\n                        .anyRequest().authenticated());//authorize any request except ignored endpoint above\r\n        return httpSecurity.build();\r\n    }\r\n\r\n}\r\n```\r\n\r\nHere is the structure of the message properties:\r\n[![enter image description here][1]][1]\r\n\r\nHere is my application.yml content:\r\n[![enter image description here][2]][2]\r\n\r\nHere is the content of messages_en.properties:\r\n```\r\nrest.welcome.ok=Welcome to ABC Backend Service, have fun!!!\r\nrest.users.login.ok=Successfully Logged in\r\n\r\n#Error Message\r\nrest.500.err=Internal Server Error\r\nrest.422.err=Constraint Violation Error\r\nrest.400.err=Invalid request body\r\nrest.required-req-body-missing.err=Required request body is missing\r\n```\r\n\r\n\r\nHere is content of messages.properties:\r\n```\r\nrest.welcome.ok=Selamat Datang di Service ABC, selamat bersenang-senang!!!\r\nrest.users.login.ok=Login sukses\r\n\r\n\r\n#Error message\r\nrest.500.err=Kesalahan Internal di sistem\r\nrest.422.err=Error pelanggaran constraint\r\nrest.400.err=Kesalahan pada request body\r\nrest.required-req-body-missing.err=Request body (payload) yang dibutuhkan tidak ditemukan\r\n```\r\n\r\nHere is my test to test the message source:\r\n```java\r\nimport org.junit.jupiter.api.Assertions;\r\nimport org.junit.jupiter.api.BeforeEach;\r\nimport org.junit.jupiter.api.Test;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.boot.test.context.SpringBootTest;\r\nimport org.springframework.context.MessageSource;\r\n\r\nimport java.util.Locale;\r\n\r\n@SpringBootTest\r\npublic class MessageSourceTest {\r\n\r\n\r\n\r\n    @Autowired\r\n    private MessageSource messageSource;\r\n\r\n\r\n    @BeforeEach\r\n    void init(){\r\n    }\r\n    @Test\r\n    public void message_provided_should_correctly_localized(){\r\n        String msgEnglish = messageSource.getMessage(&quot;rest.500.err&quot;,null, new Locale(&quot;en&quot;));\r\n        String msgIndo = messageSource.getMessage(&quot;rest.500.err&quot;,null,Locale.forLanguageTag(&quot;id-ID&quot;));\r\n        Assertions.assertEquals(&quot;Internal Server Error&quot;,msgEnglish);\r\n        Assertions.assertEquals(&quot;Kesalahan Internal di sistem&quot;,msgIndo);\r\n    }\r\n}\r\n```\r\nAnd the test is pass:\r\n[![enter image description here][3]][3]\r\n\r\n\r\nBut when I try to hit a mvc rest controller and add query parameter ```lang=en``` , I always got an error response saying `Cannot change HTTP accept header - use a different locale resolution strategy`\r\n\r\nSo I debug the `LocaleChangeInterceptor` and found that spring boot provide a wrong implementation of the `LocaleResolver`, they provide `AcceptHeaderResolver`, which what I want is the `SessionLocaleResolver` as I state it in my `WebMvcConf` class. See following picture:\r\n[![enter image description here][4]][4]\r\n\r\n\r\nAnyone knows what is wrong and how to fix it?any response will be appreciated\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/RsyBi.png\r\n  [2]: https://i.stack.imgur.com/FR19d.png\r\n  [3]: https://i.stack.imgur.com/qerYb.png\r\n  [4]: https://i.stack.imgur.com/KRsTP.png","title":"Spring boot , i18n error, wrong implementation of LocaleResolver is choosen","body":"<p>I am developing a spring boot based application that supports internationalisation</p>\n<p>My env:</p>\n<ul>\n<li>Jdk11</li>\n<li>Spring boot 2.7.0</li>\n<li>Spring Security</li>\n</ul>\n<p>Here is my web mvc conf</p>\n<p>WebMvcConf.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>    import org.springframework.context.annotation.Bean;\n    import org.springframework.context.annotation.Configuration;\n    import org.springframework.web.servlet.LocaleResolver;\n    import org.springframework.web.servlet.config.annotation.InterceptorRegistry;\n    import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\n    import org.springframework.web.servlet.i18n.LocaleChangeInterceptor;\n    import org.springframework.web.servlet.i18n.SessionLocaleResolver;\n    \n    import java.util.Locale;\n    \n    @Configuration\n    public class WebMvcConf  implements WebMvcConfigurer {\n        public static final Locale idnLocale = Locale.forLanguageTag(&quot;id-ID&quot;);\n    \n        @Bean\n        public LocaleResolver defaultLocaleResolver(){\n            var resolver = new SessionLocaleResolver();\n            resolver.setDefaultLocale(idnLocale);\n            return resolver;\n        }\n    \n        @Bean\n        public LocaleChangeInterceptor localeChangeInterceptor(){\n            var interceptor = new LocaleChangeInterceptor();\n            interceptor.setIgnoreInvalidLocale(false);\n            interceptor.setParamName(&quot;lang&quot;);\n    \n            return interceptor;\n        }\n    \n        @Override\n        public void addInterceptors(InterceptorRegistry registry) {\n            registry.addInterceptor(localeChangeInterceptor());\n        }\n    }\n</code></pre>\n<p>And here is my security config:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.http.HttpMethod;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.config.http.SessionCreationPolicy;\nimport org.springframework.security.web.SecurityFilterChain;\nimport org.springframework.security.web.header.HeaderWriterFilter;\nimport org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestWrapper;\n\n@Configuration\n@EnableWebSecurity\npublic class SecurityConf{\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity httpSecurity) throws Exception {\n        httpSecurity\n                .cors()//enable cors\n                .and()\n                .csrf().disable()//disable csrf\n                .sessionManagement(session-&gt;session.sessionCreationPolicy(SessionCreationPolicy.STATELESS))//stateless session (Rest)\n                .authorizeHttpRequests(authz-&gt;authz\n                        .antMatchers(HttpMethod.GET,&quot;/&quot;).permitAll()\n                        .antMatchers(HttpMethod.POST,&quot;/users/login&quot;,&quot;users/register&quot;,&quot;users/forgot-password&quot;).permitAll()\n                        .antMatchers(HttpMethod.PATCH,&quot;/users/password&quot;).permitAll()\n                        .anyRequest().authenticated());//authorize any request except ignored endpoint above\n        return httpSecurity.build();\n    }\n\n}\n</code></pre>\n<p>Here is the structure of the message properties:\n<a href=\"https://i.stack.imgur.com/RsyBi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RsyBi.png\" alt=\"enter image description here\" /></a></p>\n<p>Here is my application.yml content:\n<a href=\"https://i.stack.imgur.com/FR19d.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FR19d.png\" alt=\"enter image description here\" /></a></p>\n<p>Here is the content of messages_en.properties:</p>\n<pre><code>rest.welcome.ok=Welcome to ABC Backend Service, have fun!!!\nrest.users.login.ok=Successfully Logged in\n\n#Error Message\nrest.500.err=Internal Server Error\nrest.422.err=Constraint Violation Error\nrest.400.err=Invalid request body\nrest.required-req-body-missing.err=Required request body is missing\n</code></pre>\n<p>Here is content of messages.properties:</p>\n<pre><code>rest.welcome.ok=Selamat Datang di Service ABC, selamat bersenang-senang!!!\nrest.users.login.ok=Login sukses\n\n\n#Error message\nrest.500.err=Kesalahan Internal di sistem\nrest.422.err=Error pelanggaran constraint\nrest.400.err=Kesalahan pada request body\nrest.required-req-body-missing.err=Request body (payload) yang dibutuhkan tidak ditemukan\n</code></pre>\n<p>Here is my test to test the message source:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.junit.jupiter.api.Assertions;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.context.MessageSource;\n\nimport java.util.Locale;\n\n@SpringBootTest\npublic class MessageSourceTest {\n\n\n\n    @Autowired\n    private MessageSource messageSource;\n\n\n    @BeforeEach\n    void init(){\n    }\n    @Test\n    public void message_provided_should_correctly_localized(){\n        String msgEnglish = messageSource.getMessage(&quot;rest.500.err&quot;,null, new Locale(&quot;en&quot;));\n        String msgIndo = messageSource.getMessage(&quot;rest.500.err&quot;,null,Locale.forLanguageTag(&quot;id-ID&quot;));\n        Assertions.assertEquals(&quot;Internal Server Error&quot;,msgEnglish);\n        Assertions.assertEquals(&quot;Kesalahan Internal di sistem&quot;,msgIndo);\n    }\n}\n</code></pre>\n<p>And the test is pass:\n<a href=\"https://i.stack.imgur.com/qerYb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qerYb.png\" alt=\"enter image description here\" /></a></p>\n<p>But when I try to hit a mvc rest controller and add query parameter <code>lang=en</code> , I always got an error response saying <code>Cannot change HTTP accept header - use a different locale resolution strategy</code></p>\n<p>So I debug the <code>LocaleChangeInterceptor</code> and found that spring boot provide a wrong implementation of the <code>LocaleResolver</code>, they provide <code>AcceptHeaderResolver</code>, which what I want is the <code>SessionLocaleResolver</code> as I state it in my <code>WebMvcConf</code> class. See following picture:\n<a href=\"https://i.stack.imgur.com/KRsTP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KRsTP.png\" alt=\"enter image description here\" /></a></p>\n<p>Anyone knows what is wrong and how to fix it?any response will be appreciated</p>\n"},{"tags":["java","android","kotlin"],"answers":[{"comments":[{"owner":{"account_id":3140769,"reputation":14861,"user_id":2656275,"accept_rate":87,"display_name":"Hussain Shabbir"},"score":1,"creation_date":1677079895,"post_id":75530742,"comment_id":133267345,"body_markdown":"Yeah thats what I thought old calendar view does not support Outside month dates in Api level 24 and above , but thank you for sharing links though","body":"Yeah thats what I thought old calendar view does not support Outside month dates in Api level 24 and above , but thank you for sharing links though"}],"tags":[],"owner":{"account_id":1951,"reputation":26904,"user_id":2684,"accept_rate":87,"display_name":"Martin Marconcini"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677058636,"creation_date":1677058636,"answer_id":75530742,"question_id":75527783,"body_markdown":"If I correctly recall, the _old_ CalendarView (you&#39;re using) used to support this as well, but it&#39;s been a few years since I used that one, as I have been relying on Material Design 1, 2, and now 3, for a while.\r\n\r\nThe days that do not belong on the currently displayed month are called &quot;Outside month dates&quot; [source](https://m3.material.io/components/date-pickers/specs) according to Material Design 3.\r\n\r\nWhile the calendar defaults to show you only the current month, it&#39;s my understanding (but I didn&#39;t actually test this) that by supplying a `CalendarConstraints` instance that includes other days, the date picker will display them (and, at least in Material 3, they can be styled differently as they have their own attributes).\r\n\r\n**All that being said**, the [current documentation for the DatePicker in GitHub](https://github.com/material-components/material-components-android/blob/master/docs/components/DatePicker.md), does **not** mention `Outside of month` at all in the specs or APIs of the DatePicker component, and it is **my guess** that if you supply a constraint with dates in the past that those dates will be displayed.\r\n\r\nIf you need help with that [Here is the CalendarConstraints](https://developer.android.com/reference/com/google/android/material/datepicker/CalendarConstraints) API.","title":"Is it possible to show previous month and next month dates in the current Month of android.widget.CalendarView in Android?","body":"<p>If I correctly recall, the <em>old</em> CalendarView (you're using) used to support this as well, but it's been a few years since I used that one, as I have been relying on Material Design 1, 2, and now 3, for a while.</p>\n<p>The days that do not belong on the currently displayed month are called &quot;Outside month dates&quot; <a href=\"https://m3.material.io/components/date-pickers/specs\" rel=\"nofollow noreferrer\">source</a> according to Material Design 3.</p>\n<p>While the calendar defaults to show you only the current month, it's my understanding (but I didn't actually test this) that by supplying a <code>CalendarConstraints</code> instance that includes other days, the date picker will display them (and, at least in Material 3, they can be styled differently as they have their own attributes).</p>\n<p><strong>All that being said</strong>, the <a href=\"https://github.com/material-components/material-components-android/blob/master/docs/components/DatePicker.md\" rel=\"nofollow noreferrer\">current documentation for the DatePicker in GitHub</a>, does <strong>not</strong> mention <code>Outside of month</code> at all in the specs or APIs of the DatePicker component, and it is <strong>my guess</strong> that if you supply a constraint with dates in the past that those dates will be displayed.</p>\n<p>If you need help with that <a href=\"https://developer.android.com/reference/com/google/android/material/datepicker/CalendarConstraints\" rel=\"nofollow noreferrer\">Here is the CalendarConstraints</a> API.</p>\n"}],"owner":{"account_id":3140769,"reputation":14861,"user_id":2656275,"accept_rate":87,"display_name":"Hussain Shabbir"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75530742,"answer_count":1,"score":0,"last_activity_date":1677058636,"creation_date":1677033904,"question_id":75527783,"body_markdown":"I am using `android.widget.CalendarView` and it only shows current month dates and display empty spaces. Example attached screenshot below. So is there any way to display previous and next month dates in the empty spaces?[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/aB28O.png\r\n\r\nAt the beginning I want to fill the empty spaces with previous month dates S, M , T and at the end W, T, F, S with next month dates","title":"Is it possible to show previous month and next month dates in the current Month of android.widget.CalendarView in Android?","body":"<p>I am using <code>android.widget.CalendarView</code> and it only shows current month dates and display empty spaces. Example attached screenshot below. So is there any way to display previous and next month dates in the empty spaces?<a href=\"https://i.stack.imgur.com/aB28O.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aB28O.png\" alt=\"enter image description here\" /></a></p>\n<p>At the beginning I want to fill the empty spaces with previous month dates S, M , T and at the end W, T, F, S with next month dates</p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1677057227,"post_id":75530391,"comment_id":133260315,"body_markdown":"When Spring Boot detects a filter it will be automatically added to the filter chain, you are adding it again to the security filter chain. You need an additional `FilterRegistationBean` to prevent the registration in the regular filter chain.","body":"When Spring Boot detects a filter it will be automatically added to the filter chain, you are adding it again to the security filter chain. You need an additional <code>FilterRegistationBean</code> to prevent the registration in the regular filter chain."},{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":3,"creation_date":1677069896,"post_id":75530391,"comment_id":133263927,"body_markdown":"is there any specific reason you are not using the built in JWT handling that already comes with spring security? https://github.com/Tandolf/spring-security-jwt-demo","body":"is there any specific reason you are not using the built in JWT handling that already comes with spring security? <a href=\"https://github.com/Tandolf/spring-security-jwt-demo\" rel=\"nofollow noreferrer\">github.com/Tandolf/spring-security-jwt-demo</a>"},{"owner":{"account_id":11639624,"reputation":1651,"user_id":8524584,"display_name":"bezbos."},"score":0,"creation_date":1677070023,"post_id":75530391,"comment_id":133263980,"body_markdown":"I wasn&#39;t aware they had a built-in mechanism for it. Can you link it to me?","body":"I wasn&#39;t aware they had a built-in mechanism for it. Can you link it to me?"}],"answers":[{"comments":[{"owner":{"account_id":11639624,"reputation":1651,"user_id":8524584,"display_name":"bezbos."},"score":1,"creation_date":1677063279,"post_id":75530714,"comment_id":133262007,"body_markdown":"Thanks for the tip. I would like to solve this &quot;properly&quot;, but if it comes down to it I will make use of this.","body":"Thanks for the tip. I would like to solve this &quot;properly&quot;, but if it comes down to it I will make use of this."},{"owner":{"account_id":18241120,"reputation":557,"user_id":13278127,"display_name":"Taiyr Begeyev"},"score":0,"creation_date":1678578170,"post_id":75530714,"comment_id":133561424,"body_markdown":"worked for me as well! I was wondering if there&#39;s less hacky way of solving this. @bezbos, did you manage to figure it out?","body":"worked for me as well! I was wondering if there&#39;s less hacky way of solving this. @bezbos, did you manage to figure it out?"},{"owner":{"account_id":11639624,"reputation":1651,"user_id":8524584,"display_name":"bezbos."},"score":0,"creation_date":1678693836,"post_id":75530714,"comment_id":133576045,"body_markdown":"@TaiyrBegeyev sadly no... instead we decided to use Spring Resource Server and Keycloak, which is complete overkill for this project, but we have no other choice. Idk what Spring Security team messed up, but it&#39;s not even funny at this point.","body":"@TaiyrBegeyev sadly no... instead we decided to use Spring Resource Server and Keycloak, which is complete overkill for this project, but we have no other choice. Idk what Spring Security team messed up, but it&#39;s not even funny at this point."}],"tags":[],"owner":{"account_id":19726215,"reputation":538,"user_id":14442758,"display_name":"Z-100"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1677058544,"creation_date":1677058544,"answer_id":75530714,"question_id":75530391,"body_markdown":"In my case I solved it by overriding the [shouldNotFilter method](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/filter/OncePerRequestFilter.html#shouldNotFilter(jakarta.servlet.http.HttpServletRequest)) of the `OncePerRequestFilter`.\r\n\r\nI have a configuration with some not-to-be-filtered URIs, which I then match to the `HttpServletRequest`&#39;s request URI.\r\n\r\nI&#39;m sure there are better solutions and this is more of a &#39;cheap&#39; hack, but it may be what you&#39;re looking for in case you want an easy solution.\r\n\r\nCheers","title":"Spring Security 6.x is securing all endpoints despite configuration telling it not to","body":"<p>In my case I solved it by overriding the <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/filter/OncePerRequestFilter.html#shouldNotFilter(jakarta.servlet.http.HttpServletRequest)\" rel=\"nofollow noreferrer\">shouldNotFilter method</a> of the <code>OncePerRequestFilter</code>.</p>\n<p>I have a configuration with some not-to-be-filtered URIs, which I then match to the <code>HttpServletRequest</code>'s request URI.</p>\n<p>I'm sure there are better solutions and this is more of a 'cheap' hack, but it may be what you're looking for in case you want an easy solution.</p>\n<p>Cheers</p>\n"}],"owner":{"account_id":11639624,"reputation":1651,"user_id":8524584,"display_name":"bezbos."},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":894,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"closed_date":1677200934,"answer_count":1,"score":2,"last_activity_date":1677058544,"creation_date":1677056960,"question_id":75530391,"body_markdown":"I have an issue in my Spring Boot 3.0.2 project that uses Spring Security 6.0.2. I have created the following `JwtAuthenticationFilter` class for authorizing JWTs:\r\n```\r\n@Log4j2\r\n@Component\r\n@RequiredArgsConstructor\r\npublic class JwtAuthenticationFilter extends OncePerRequestFilter {\r\n\r\n    private final JwtService jwtService;\r\n    private final UserDetailsService userDetailsService;\r\n    private final ObjectMapper objectMapper;\r\n\r\n    @Override\r\n    protected void doFilterInternal(\r\n            @NonNull HttpServletRequest request,\r\n            @NonNull HttpServletResponse response,\r\n            @NonNull FilterChain filterChain\r\n    ) throws IOException {\r\n        try {\r\n            final String authHeader = request.getHeader(&quot;Authorization&quot;);\r\n            if (authHeader == null || !authHeader.startsWith(&quot;Bearer &quot;)) {\r\n                String errorPayload = objectMapper.writeValueAsString(Map.of(\r\n                        &quot;type&quot;, &quot;about:blank&quot;,\r\n                        &quot;title&quot;, &quot;Bad Authorization&quot;,\r\n                        &quot;status&quot;, HttpServletResponse.SC_UNAUTHORIZED,\r\n                        &quot;detail&quot;, &quot;The Authorization header should contain a Bearer token value.&quot;\r\n                ));\r\n                response.setStatus(HttpServletResponse.SC_UNAUTHORIZED);\r\n                response.setContentType(&quot;application/problem+json&quot;);\r\n                response.getWriter().write(errorPayload);\r\n                return;\r\n            }\r\n\r\n            final String jwt = authHeader.substring(7);\r\n            final String userEmail = jwtService.extractUsername(jwt);\r\n            if (userEmail != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {\r\n                UserDetails userDetails = userDetailsService.loadUserByUsername(userEmail);\r\n                if (jwtService.isTokenValid(jwt, userDetails)) {\r\n                    var authToken = new UsernamePasswordAuthenticationToken(\r\n                            userDetails,\r\n                            null,\r\n                            userDetails.getAuthorities()\r\n                    );\r\n                    authToken.setDetails(\r\n                            new WebAuthenticationDetailsSource().buildDetails(request)\r\n                    );\r\n                    SecurityContextHolder.getContext().setAuthentication(authToken);\r\n                }\r\n            }\r\n\r\n            filterChain.doFilter(request, response);\r\n        } catch (Exception ex) {\r\n            log.error(ex.getMessage(), ex);\r\n            String errorPayload = objectMapper.writeValueAsString(Map.of(\r\n                    &quot;type&quot;, &quot;about:blank&quot;,\r\n                    &quot;title&quot;, &quot;SF1&quot;,\r\n                    &quot;status&quot;, HttpServletResponse.SC_INTERNAL_SERVER_ERROR,\r\n                    &quot;detail&quot;, &quot;An error occurred while processing the request.&quot;\r\n            ));\r\n            response.setStatus(HttpServletResponse.SC_INTERNAL_SERVER_ERROR);\r\n            response.setContentType(&quot;application/problem+json&quot;);\r\n            response.getWriter().write(errorPayload);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThis is my Spring Security configuration class:\r\n```\r\n@Configuration\r\n@EnableWebSecurity(debug = true)\r\n@RequiredArgsConstructor\r\npublic class SecurityConfig {\r\n\r\n    private final JwtAuthenticationFilter jwtAuthenticationFilter;\r\n\r\n    @Bean\r\n    public AuthenticationManager authenticationManager(AuthenticationConfiguration config) throws Exception {\r\n        return config.getAuthenticationManager();\r\n    }\r\n\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder() {\r\n        return new BCryptPasswordEncoder(11);\r\n    }\r\n\r\n    @Bean\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n        http\r\n                .cors(Customizer.withDefaults())\r\n                .csrf(CsrfConfigurer::disable)\r\n                .authorizeHttpRequests(authorize -&gt; authorize\r\n                        .requestMatchers(&quot;/api/auth/**&quot;)\r\n                            .permitAll()\r\n                        .requestMatchers(HttpMethod.OPTIONS, &quot;/**&quot;)\r\n                            .permitAll()\r\n                        .anyRequest()\r\n                            .authenticated()\r\n                )\r\n                .sessionManagement(sessionManagement -&gt; sessionManagement.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\r\n                .addFilterAfter(jwtAuthenticationFilter, UsernamePasswordAuthenticationFilter.class);\r\n\r\n        return http.build();\r\n    }\r\n\r\n    @Bean\r\n    public CorsFilter corsFilter() {\r\n        var source = new UrlBasedCorsConfigurationSource();\r\n        var config = new CorsConfiguration();\r\n        config.applyPermitDefaultValues();\r\n        config.setAllowedMethods(List.of(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;, &quot;PATCH&quot;, &quot;OPTIONS&quot;));\r\n        config.setAllowedOrigins(List.of(&quot;http://localhost:4200&quot;));\r\n        config.setAllowCredentials(true);\r\n        config.addAllowedHeader(&quot;*&quot;);\r\n        source.registerCorsConfiguration(&quot;/**&quot;, config);\r\n        return new CorsFilter(source);\r\n    }\r\n}\r\n\r\n```\r\n\r\nWhen I comment out the line `.addFilterAfter(jwtAuthenticationFilter, UsernamePasswordAuthenticationFilter.class)`, the authorization rules work correctly and I can obtain the JWT. However when I add this filter, it gets triggered for every request and I can no longer call the endpoint for obtaining the JWT, because its protected. ","title":"Spring Security 6.x is securing all endpoints despite configuration telling it not to","body":"<p>I have an issue in my Spring Boot 3.0.2 project that uses Spring Security 6.0.2. I have created the following <code>JwtAuthenticationFilter</code> class for authorizing JWTs:</p>\n<pre><code>@Log4j2\n@Component\n@RequiredArgsConstructor\npublic class JwtAuthenticationFilter extends OncePerRequestFilter {\n\n    private final JwtService jwtService;\n    private final UserDetailsService userDetailsService;\n    private final ObjectMapper objectMapper;\n\n    @Override\n    protected void doFilterInternal(\n            @NonNull HttpServletRequest request,\n            @NonNull HttpServletResponse response,\n            @NonNull FilterChain filterChain\n    ) throws IOException {\n        try {\n            final String authHeader = request.getHeader(&quot;Authorization&quot;);\n            if (authHeader == null || !authHeader.startsWith(&quot;Bearer &quot;)) {\n                String errorPayload = objectMapper.writeValueAsString(Map.of(\n                        &quot;type&quot;, &quot;about:blank&quot;,\n                        &quot;title&quot;, &quot;Bad Authorization&quot;,\n                        &quot;status&quot;, HttpServletResponse.SC_UNAUTHORIZED,\n                        &quot;detail&quot;, &quot;The Authorization header should contain a Bearer token value.&quot;\n                ));\n                response.setStatus(HttpServletResponse.SC_UNAUTHORIZED);\n                response.setContentType(&quot;application/problem+json&quot;);\n                response.getWriter().write(errorPayload);\n                return;\n            }\n\n            final String jwt = authHeader.substring(7);\n            final String userEmail = jwtService.extractUsername(jwt);\n            if (userEmail != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {\n                UserDetails userDetails = userDetailsService.loadUserByUsername(userEmail);\n                if (jwtService.isTokenValid(jwt, userDetails)) {\n                    var authToken = new UsernamePasswordAuthenticationToken(\n                            userDetails,\n                            null,\n                            userDetails.getAuthorities()\n                    );\n                    authToken.setDetails(\n                            new WebAuthenticationDetailsSource().buildDetails(request)\n                    );\n                    SecurityContextHolder.getContext().setAuthentication(authToken);\n                }\n            }\n\n            filterChain.doFilter(request, response);\n        } catch (Exception ex) {\n            log.error(ex.getMessage(), ex);\n            String errorPayload = objectMapper.writeValueAsString(Map.of(\n                    &quot;type&quot;, &quot;about:blank&quot;,\n                    &quot;title&quot;, &quot;SF1&quot;,\n                    &quot;status&quot;, HttpServletResponse.SC_INTERNAL_SERVER_ERROR,\n                    &quot;detail&quot;, &quot;An error occurred while processing the request.&quot;\n            ));\n            response.setStatus(HttpServletResponse.SC_INTERNAL_SERVER_ERROR);\n            response.setContentType(&quot;application/problem+json&quot;);\n            response.getWriter().write(errorPayload);\n        }\n    }\n}\n</code></pre>\n<p>This is my Spring Security configuration class:</p>\n<pre><code>@Configuration\n@EnableWebSecurity(debug = true)\n@RequiredArgsConstructor\npublic class SecurityConfig {\n\n    private final JwtAuthenticationFilter jwtAuthenticationFilter;\n\n    @Bean\n    public AuthenticationManager authenticationManager(AuthenticationConfiguration config) throws Exception {\n        return config.getAuthenticationManager();\n    }\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder(11);\n    }\n\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        http\n                .cors(Customizer.withDefaults())\n                .csrf(CsrfConfigurer::disable)\n                .authorizeHttpRequests(authorize -&gt; authorize\n                        .requestMatchers(&quot;/api/auth/**&quot;)\n                            .permitAll()\n                        .requestMatchers(HttpMethod.OPTIONS, &quot;/**&quot;)\n                            .permitAll()\n                        .anyRequest()\n                            .authenticated()\n                )\n                .sessionManagement(sessionManagement -&gt; sessionManagement.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\n                .addFilterAfter(jwtAuthenticationFilter, UsernamePasswordAuthenticationFilter.class);\n\n        return http.build();\n    }\n\n    @Bean\n    public CorsFilter corsFilter() {\n        var source = new UrlBasedCorsConfigurationSource();\n        var config = new CorsConfiguration();\n        config.applyPermitDefaultValues();\n        config.setAllowedMethods(List.of(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;, &quot;PATCH&quot;, &quot;OPTIONS&quot;));\n        config.setAllowedOrigins(List.of(&quot;http://localhost:4200&quot;));\n        config.setAllowCredentials(true);\n        config.addAllowedHeader(&quot;*&quot;);\n        source.registerCorsConfiguration(&quot;/**&quot;, config);\n        return new CorsFilter(source);\n    }\n}\n\n</code></pre>\n<p>When I comment out the line <code>.addFilterAfter(jwtAuthenticationFilter, UsernamePasswordAuthenticationFilter.class)</code>, the authorization rules work correctly and I can obtain the JWT. However when I add this filter, it gets triggered for every request and I can no longer call the endpoint for obtaining the JWT, because its protected.</p>\n"},{"tags":["java","spring","spring-boot","spring-webclient"],"answers":[{"tags":[],"owner":{"account_id":943758,"reputation":5238,"user_id":971423,"accept_rate":44,"display_name":"Welsh"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1677024210,"creation_date":1677024210,"answer_id":75527082,"question_id":75313793,"body_markdown":"I went through the same, and used `CONNECT_TIMEOUT_MILLIS` and `ReadTimeoutHandler` but still faced time outs after 5 seconds outside of my tests.\r\n\r\nI just discovered that on the [`HttpServiceProxyFactory.builder()`][1] there is a [`blockTimeout`][2] that you can configure that defaults to 5 seconds that should resolve your issue.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/6.0.0/javadoc-api/org/springframework/web/service/invoker/HttpServiceProxyFactory.Builder.html\r\n  [2]: https://docs.spring.io/spring-framework/docs/6.0.0/javadoc-api/org/springframework/web/service/invoker/HttpServiceProxyFactory.Builder.html#blockTimeout(java.time.Duration)","title":"&quot;Timeout on blocking read&quot; when using new Spring 6 HTTP Interface","body":"<p>I went through the same, and used <code>CONNECT_TIMEOUT_MILLIS</code> and <code>ReadTimeoutHandler</code> but still faced time outs after 5 seconds outside of my tests.</p>\n<p>I just discovered that on the <a href=\"https://docs.spring.io/spring-framework/docs/6.0.0/javadoc-api/org/springframework/web/service/invoker/HttpServiceProxyFactory.Builder.html\" rel=\"noreferrer\"><code>HttpServiceProxyFactory.builder()</code></a> there is a <a href=\"https://docs.spring.io/spring-framework/docs/6.0.0/javadoc-api/org/springframework/web/service/invoker/HttpServiceProxyFactory.Builder.html#blockTimeout(java.time.Duration)\" rel=\"noreferrer\"><code>blockTimeout</code></a> that you can configure that defaults to 5 seconds that should resolve your issue.</p>\n"}],"owner":{"account_id":290399,"reputation":2210,"user_id":591935,"accept_rate":76,"display_name":"Daniel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1942,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":75527082,"answer_count":1,"score":6,"last_activity_date":1677058066,"creation_date":1675271499,"question_id":75313793,"body_markdown":"We recently started testing [the new HTTP Interface that came with Spring 6.](https://docs.spring.io/spring-framework/docs/current/reference/html/integration.html#rest-http-interface)\r\n\r\nWe defined a client like this:\r\n\r\n        HttpClient client = (HttpClient)((HttpClient)HttpClient.create().option(ChannelOption.CONNECT_TIMEOUT_MILLIS, 5000)).doOnConnected((conn) -&gt; {\r\n            conn.addHandlerLast(new ReadTimeoutHandler(10000L, TimeUnit.MILLISECONDS));\r\n        });\r\n        WebClient webClient = WebClient.builder().clientConnector(new ReactorClientHttpConnector(client)).baseUrl(locationUrl.toExternalForm()).build();\r\n        HttpServiceProxyFactory factory = HttpServiceProxyFactory.builder(WebClientAdapter.forClient(webClient)).build();\r\n\r\nAn interface can look something like this:\r\n```\r\n@GetExchange(&quot;/availability&quot;)\r\n    AvailabilityResponse getAvailability(@RequestParam(&quot;products&quot;) List&lt;String&gt; itemIds);\r\n```\r\n\r\nWhen using the client, we are occasionally getting exceptions like below. We initially thought that this was related to the connect timeout that we defined as 5 seconds, but this seems to be related to the reactor blockingGet rather than the actual HTTP call. \r\n\r\nWhen searching for similar issues, everything I found seem to be related to unit testing of WebClient, with solutions like setting `@AutoConfigureWebTestClient(timeout = &quot;30000&quot;)`, so this does not help us.\r\nHow can we increase the blocking get timeout to match our ReadTimeoutHandler of 10 seconds?\r\n\r\n\r\n```\r\njava.lang.IllegalStateException: Timeout on blocking read for 5000000000 NANOSECONDS\r\n\tat reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:123)\r\n\tat reactor.core.publisher.Mono.block(Mono.java:1734)\r\n\tat org.springframework.web.service.invoker.HttpServiceMethod$ResponseFunction.execute(HttpServiceMethod.java:296)\r\n\tat org.springframework.web.service.invoker.HttpServiceMethod.invoke(HttpServiceMethod.java:105)\r\n\tat org.springframework.web.service.invoker.HttpServiceProxyFactory$HttpServiceMethodInterceptor.invoke(HttpServiceProxyFactory.java:271)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:218)\r\n\tat jdk.proxy3/jdk.proxy3.$Proxy135.searchPharmacies(Unknown Source)\r\n\tat &lt;redacted&gt;\r\n\tat jdk.internal.reflect.GeneratedMethodAccessor128.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:705)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:177)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.valves.RemoteIpValve.invoke(RemoteIpValve.java:741)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:859)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1734)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:833)\r\n```\r\n\r\n\r\n","title":"&quot;Timeout on blocking read&quot; when using new Spring 6 HTTP Interface","body":"<p>We recently started testing <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/integration.html#rest-http-interface\" rel=\"noreferrer\">the new HTTP Interface that came with Spring 6.</a></p>\n<p>We defined a client like this:</p>\n<pre><code>    HttpClient client = (HttpClient)((HttpClient)HttpClient.create().option(ChannelOption.CONNECT_TIMEOUT_MILLIS, 5000)).doOnConnected((conn) -&gt; {\n        conn.addHandlerLast(new ReadTimeoutHandler(10000L, TimeUnit.MILLISECONDS));\n    });\n    WebClient webClient = WebClient.builder().clientConnector(new ReactorClientHttpConnector(client)).baseUrl(locationUrl.toExternalForm()).build();\n    HttpServiceProxyFactory factory = HttpServiceProxyFactory.builder(WebClientAdapter.forClient(webClient)).build();\n</code></pre>\n<p>An interface can look something like this:</p>\n<pre><code>@GetExchange(&quot;/availability&quot;)\n    AvailabilityResponse getAvailability(@RequestParam(&quot;products&quot;) List&lt;String&gt; itemIds);\n</code></pre>\n<p>When using the client, we are occasionally getting exceptions like below. We initially thought that this was related to the connect timeout that we defined as 5 seconds, but this seems to be related to the reactor blockingGet rather than the actual HTTP call.</p>\n<p>When searching for similar issues, everything I found seem to be related to unit testing of WebClient, with solutions like setting <code>@AutoConfigureWebTestClient(timeout = &quot;30000&quot;)</code>, so this does not help us.\nHow can we increase the blocking get timeout to match our ReadTimeoutHandler of 10 seconds?</p>\n<pre><code>java.lang.IllegalStateException: Timeout on blocking read for 5000000000 NANOSECONDS\n    at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:123)\n    at reactor.core.publisher.Mono.block(Mono.java:1734)\n    at org.springframework.web.service.invoker.HttpServiceMethod$ResponseFunction.execute(HttpServiceMethod.java:296)\n    at org.springframework.web.service.invoker.HttpServiceMethod.invoke(HttpServiceMethod.java:105)\n    at org.springframework.web.service.invoker.HttpServiceProxyFactory$HttpServiceMethodInterceptor.invoke(HttpServiceProxyFactory.java:271)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:218)\n    at jdk.proxy3/jdk.proxy3.$Proxy135.searchPharmacies(Unknown Source)\n    at &lt;redacted&gt;\n    at jdk.internal.reflect.GeneratedMethodAccessor128.invoke(Unknown Source)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011)\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)\n    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:705)\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\n    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\n    at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:177)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\n    at org.apache.catalina.valves.RemoteIpValve.invoke(RemoteIpValve.java:741)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:859)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1734)\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    at java.base/java.lang.Thread.run(Thread.java:833)\n</code></pre>\n"},{"tags":["java","sonarqube","sonarqube-scan","sonarlint"],"comments":[{"owner":{"account_id":14583345,"reputation":4337,"user_id":10533011,"display_name":"Donat"},"score":0,"creation_date":1677411465,"post_id":75530595,"comment_id":133328829,"body_markdown":"I cannot see a real problem in the code. Maybe the implementation of the rule has a bug? What happens when you remove the annotations?","body":"I cannot see a real problem in the code. Maybe the implementation of the rule has a bug? What happens when you remove the annotations?"},{"owner":{"account_id":11996741,"reputation":95,"user_id":8778025,"display_name":"Prasad"},"score":0,"creation_date":1677417501,"post_id":75530595,"comment_id":133329799,"body_markdown":"I tried removing annotations but nothing changed, also as I mentioned, there are another couple of classes which has the same annotations and inheritance and there is no error in there. I&#39;m also thinking about whether this is a sonar rule implementation bug or not.","body":"I tried removing annotations but nothing changed, also as I mentioned, there are another couple of classes which has the same annotations and inheritance and there is no error in there. I&#39;m also thinking about whether this is a sonar rule implementation bug or not."},{"owner":{"account_id":11996741,"reputation":95,"user_id":8778025,"display_name":"Prasad"},"score":0,"creation_date":1677417594,"post_id":75530595,"comment_id":133329817,"body_markdown":"Started a discussion in the Sonar community, let&#39;s see.\nhttps://community.sonarsource.com/t/make-a-property-serializable-when-serializable-implemented-through-inheritance/84699","body":"Started a discussion in the Sonar community, let&#39;s see. <a href=\"https://community.sonarsource.com/t/make-a-property-serializable-when-serializable-implemented-through-inheritance/84699\" rel=\"nofollow noreferrer\">community.sonarsource.com/t/&hellip;</a>"}],"owner":{"account_id":11996741,"reputation":95,"user_id":8778025,"display_name":"Prasad"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":117,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1677057973,"creation_date":1677057973,"question_id":75530595,"body_markdown":"I have the following class structure,\r\n\r\n    public interface EnterpriseData extends Serializable {\r\n    }\r\n    \r\n    public interface ExtraData extends Serializable {\r\n    }\r\n    \r\n    @Getter\r\n    @ToString\r\n    @JsonIgnoreProperties(ignoreUnknown = true)\r\n    public class UserAccount implements EnterpriseData {\r\n    \r\n        @JsonProperty(&quot;account&quot;)\r\n        private AccountData account;\r\n    \r\n        //No handwritten methods in this class\r\n    }\r\n    \r\n    \r\n    @Getter\r\n    @ToString\r\n    @JsonIgnoreProperties(ignoreUnknown = true)\r\n    public class AccountData implements ExtraData {\r\n    \r\n        //Some String fields and setter methods for those fields.\r\n    \r\n    }\r\n\r\nWhen I run the SonarQube for the above classes, I get the `Make &quot;account&quot; transient or serializable` error in SonarQube as a Critical issue.\r\n\r\nUserAccount and AccountData are two simple classes, and there are another couple of classes that implement the `EnterpriseData` and `ExtraData` interfaces similar to the above ones. Also, those classes have similar implementation similar to the above classes.\r\nAnd I&#39;m not getting that Sonar issue for those classes. \r\n&lt;br&gt;\r\nAnd when I implement the `Serializable` directly in the `AccountData` class definition, the Sonar is no longer showing that error.\r\n\r\nI&#39;m using IntelliJ by adding the SonarLint plugin, and it is configured with the SonarQube server but the SonarLint is not showing that error from the beginning.&lt;br&gt;I would like to get some insight/fixes about this weird issue.\r\n&lt;br&gt;&lt;br&gt;\r\nI&#39;m using Jackson and Lombok in these classes. SonarQube version is 9.8.0.","title":"SonarQube - Make &quot;account&quot; transient or serializable","body":"<p>I have the following class structure,</p>\n<pre><code>public interface EnterpriseData extends Serializable {\n}\n\npublic interface ExtraData extends Serializable {\n}\n\n@Getter\n@ToString\n@JsonIgnoreProperties(ignoreUnknown = true)\npublic class UserAccount implements EnterpriseData {\n\n    @JsonProperty(&quot;account&quot;)\n    private AccountData account;\n\n    //No handwritten methods in this class\n}\n\n\n@Getter\n@ToString\n@JsonIgnoreProperties(ignoreUnknown = true)\npublic class AccountData implements ExtraData {\n\n    //Some String fields and setter methods for those fields.\n\n}\n</code></pre>\n<p>When I run the SonarQube for the above classes, I get the <code>Make &quot;account&quot; transient or serializable</code> error in SonarQube as a Critical issue.</p>\n<p>UserAccount and AccountData are two simple classes, and there are another couple of classes that implement the <code>EnterpriseData</code> and <code>ExtraData</code> interfaces similar to the above ones. Also, those classes have similar implementation similar to the above classes.\nAnd I'm not getting that Sonar issue for those classes.\n<br>\nAnd when I implement the <code>Serializable</code> directly in the <code>AccountData</code> class definition, the Sonar is no longer showing that error.</p>\n<p>I'm using IntelliJ by adding the SonarLint plugin, and it is configured with the SonarQube server but the SonarLint is not showing that error from the beginning.<br>I would like to get some insight/fixes about this weird issue.\n<br><br>\nI'm using Jackson and Lombok in these classes. SonarQube version is 9.8.0.</p>\n"},{"tags":["java","encryption","base64","hmac"],"comments":[{"owner":{"account_id":8737108,"reputation":30927,"user_id":6535399,"display_name":"bartonjs"},"score":0,"creation_date":1532980571,"post_id":51600957,"comment_id":90168896,"body_markdown":"Possible duplicate of [Is it possible to decrypt md5 hashes?](https://stackoverflow.com/questions/1240852/is-it-possible-to-decrypt-md5-hashes)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/1240852/is-it-possible-to-decrypt-md5-hashes\">Is it possible to decrypt md5 hashes?</a>"}],"answers":[{"tags":[],"owner":{"account_id":295869,"reputation":73614,"user_id":600500,"accept_rate":54,"display_name":"Paŭlo Ebermann"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1664877752,"creation_date":1532983876,"answer_id":51602104,"question_id":51600957,"body_markdown":"TL;DR: No.\r\n\r\nA [MAC](https://en.wikipedia.org/wiki/Message_authentication_code &quot;Message Authentication Code&quot;) function is also called a &quot;keyed hash function&quot;. It is not an &quot;encryption&quot; in any meaning of the word.\r\nIt transforms a key and a plain text into an authentication tag. The same key + plain text result in the same tag, this property is used to check that the plain text was not modified.\r\n\r\nHMAC is a MAC built on a hash function, in your case SHA-256. As long as the hash function is not broken, you can&#39;t get the plain text back, even if you know the key.\r\n\r\nIf there is only a small set of possible plain texts, you can of course do a brute-force attack, just trying each plain text with the key to see if the tag is matching. (If the key is also unknown but from a small set, you can also try to try all possible keys.)","title":"HMAC Decryption","body":"<p>TL;DR: No.</p>\n<p>A <a href=\"https://en.wikipedia.org/wiki/Message_authentication_code\" rel=\"nofollow noreferrer\" title=\"Message Authentication Code\">MAC</a> function is also called a &quot;keyed hash function&quot;. It is not an &quot;encryption&quot; in any meaning of the word.\nIt transforms a key and a plain text into an authentication tag. The same key + plain text result in the same tag, this property is used to check that the plain text was not modified.</p>\n<p>HMAC is a MAC built on a hash function, in your case SHA-256. As long as the hash function is not broken, you can't get the plain text back, even if you know the key.</p>\n<p>If there is only a small set of possible plain texts, you can of course do a brute-force attack, just trying each plain text with the key to see if the tag is matching. (If the key is also unknown but from a small set, you can also try to try all possible keys.)</p>\n"},{"tags":[],"owner":{"account_id":3973740,"reputation":43,"user_id":3277542,"display_name":"Simon Towler"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677057676,"creation_date":1677057676,"answer_id":75530534,"question_id":51600957,"body_markdown":"The HMAC is not supposed to be &#39;decrypted&#39;, it is supposed to be checked. \r\n\r\nTo check it, you use the same secret key the original HMAC was derived with, to get your own HMAC of the message. If you check your HMAC matches the HMAC that was sent to you with the message, then you know the sender used the same secret key you did, so you have an assurance they are probably the party they claim to be, and you have an assurance the message has not been altered since it was sent.\r\n\r\nThe crypto involved in HMAC is not used to encrypt the message. Instead it is used to make it computationally infeasible with today&#39;s computers to fake the HMAC without knowing the secret key (and infeasible with classical computers to find an arbitrary plain text and key combination that would result in the same given HMAC, a type of collision attack theoretically possible in cryptanalysis).","title":"HMAC Decryption","body":"<p>The HMAC is not supposed to be 'decrypted', it is supposed to be checked.</p>\n<p>To check it, you use the same secret key the original HMAC was derived with, to get your own HMAC of the message. If you check your HMAC matches the HMAC that was sent to you with the message, then you know the sender used the same secret key you did, so you have an assurance they are probably the party they claim to be, and you have an assurance the message has not been altered since it was sent.</p>\n<p>The crypto involved in HMAC is not used to encrypt the message. Instead it is used to make it computationally infeasible with today's computers to fake the HMAC without knowing the secret key (and infeasible with classical computers to find an arbitrary plain text and key combination that would result in the same given HMAC, a type of collision attack theoretically possible in cryptanalysis).</p>\n"}],"owner":{"account_id":12654525,"reputation":31,"user_id":9197455,"display_name":"hex"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9215,"favorite_count":0,"down_vote_count":2,"up_vote_count":3,"answer_count":2,"score":1,"last_activity_date":1677057676,"creation_date":1532978652,"question_id":51600957,"body_markdown":"I coded HMAC decryption. I try many time to decrypt the output.\r\n\r\nThis is my code \r\n\r\n    package javaapplication_HMAC;\r\n\r\n    import java.io.UnsupportedEncodingException;\r\n    import java.security.InvalidKeyException;\r\n    import java.security.NoSuchAlgorithmException;\r\n    import javax.crypto.Mac;\r\n    import javax.crypto.spec.SecretKeySpec;\r\n    import com.sun.org.apache.xml.internal.security.utils.Base64;\r\n    import java.util.Formatter;\r\n    \r\n    public class Encryption {\r\n    \r\n        public void Encryption_Base64(String x,String y){\r\n         String message = x;\r\n            String key = y;\r\n            String algorithm = &quot;HmacSHA1&quot;;  \r\n            try {\r\n                Mac sha256_hmac = Mac.getInstance(algorithm);\r\n                SecretKeySpec secret_key = new SecretKeySpec(key.getBytes(&quot;UTF-8&quot;), algorithm);\r\n                 sha256_hmac.init(secret_key);\r\n                String hash = Base64.encode(sha256_hmac.doFinal(message.getBytes(&quot;UTF-8&quot;)));\r\n                System.out.println(hash);\r\n            } catch (NoSuchAlgorithmException | UnsupportedEncodingException | InvalidKeyException e) {\r\n                e.printStackTrace();\r\n            }    \r\n        }\r\n        \r\n        public static void main(String args[]) {\r\n            Encryption encryption_base64 = new Encryption();\r\n            encryption_base64.Encryption_Base64(&quot;test&quot;, &quot;123456&quot;);\r\n        }\r\n\r\n    }\r\n\r\nThe output is : QFemksWe6HuyDAJIepZd+ldchzc=\r\n\r\nIs it possible to decrypt it?  \r\n\r\n","title":"HMAC Decryption","body":"<p>I coded HMAC decryption. I try many time to decrypt the output.</p>\n\n<p>This is my code </p>\n\n<pre><code>package javaapplication_HMAC;\n\nimport java.io.UnsupportedEncodingException;\nimport java.security.InvalidKeyException;\nimport java.security.NoSuchAlgorithmException;\nimport javax.crypto.Mac;\nimport javax.crypto.spec.SecretKeySpec;\nimport com.sun.org.apache.xml.internal.security.utils.Base64;\nimport java.util.Formatter;\n\npublic class Encryption {\n\n    public void Encryption_Base64(String x,String y){\n     String message = x;\n        String key = y;\n        String algorithm = \"HmacSHA1\";  \n        try {\n            Mac sha256_hmac = Mac.getInstance(algorithm);\n            SecretKeySpec secret_key = new SecretKeySpec(key.getBytes(\"UTF-8\"), algorithm);\n             sha256_hmac.init(secret_key);\n            String hash = Base64.encode(sha256_hmac.doFinal(message.getBytes(\"UTF-8\")));\n            System.out.println(hash);\n        } catch (NoSuchAlgorithmException | UnsupportedEncodingException | InvalidKeyException e) {\n            e.printStackTrace();\n        }    \n    }\n\n    public static void main(String args[]) {\n        Encryption encryption_base64 = new Encryption();\n        encryption_base64.Encryption_Base64(\"test\", \"123456\");\n    }\n\n}\n</code></pre>\n\n<p>The output is : QFemksWe6HuyDAJIepZd+ldchzc=</p>\n\n<p>Is it possible to decrypt it?  </p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":17531877,"reputation":1654,"user_id":12715723,"display_name":"Jordy"},"score":0,"creation_date":1676978828,"post_id":75519800,"comment_id":133241764,"body_markdown":"Can you provide the `PowerToken` class?","body":"Can you provide the <code>PowerToken</code> class?"},{"owner":{"account_id":27841046,"reputation":13,"user_id":21257529,"display_name":"Roman"},"score":0,"creation_date":1676978907,"post_id":75519800,"comment_id":133241785,"body_markdown":"Yeah, I will modify my post to add it. I have added it","body":"Yeah, I will modify my post to add it. I have added it"},{"owner":{"account_id":27841046,"reputation":13,"user_id":21257529,"display_name":"Roman"},"score":0,"creation_date":1676979512,"post_id":75519800,"comment_id":133241984,"body_markdown":"Yeah I will add a diagram to the question as well","body":"Yeah I will add a diagram to the question as well"},{"owner":{"account_id":27841046,"reputation":13,"user_id":21257529,"display_name":"Roman"},"score":0,"creation_date":1676979834,"post_id":75519800,"comment_id":133242089,"body_markdown":"Yeah a 2x2 square is 4 adjacent squares/tiles","body":"Yeah a 2x2 square is 4 adjacent squares/tiles"},{"owner":{"account_id":27841046,"reputation":13,"user_id":21257529,"display_name":"Roman"},"score":0,"creation_date":1676980198,"post_id":75519800,"comment_id":133242195,"body_markdown":"How would I go about doing that? I haven&#39;t come across either of those before","body":"How would I go about doing that? I haven&#39;t come across either of those before"},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1676981990,"post_id":75519800,"comment_id":133242740,"body_markdown":"Here is the theory behind it. I can write it out, though it takes a bit. https://en.wikipedia.org/wiki/Connected-component_labeling#Graphical_example_of_two-pass_algorithm","body":"Here is the theory behind it. I can write it out, though it takes a bit. <a href=\"https://en.wikipedia.org/wiki/Connected-component_labeling#Graphical_example_of_two-pass_algorithm\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/&hellip;</a>"},{"owner":{"account_id":27841046,"reputation":13,"user_id":21257529,"display_name":"Roman"},"score":0,"creation_date":1676982844,"post_id":75519800,"comment_id":133243048,"body_markdown":"I&#39;ve not yet worked with algorithms before so I am quite unsure where to begin even with the pseudo-code","body":"I&#39;ve not yet worked with algorithms before so I am quite unsure where to begin even with the pseudo-code"},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1677057690,"post_id":75519800,"comment_id":133260475,"body_markdown":"I have updated my answer, it is complete and I believe working.","body":"I have updated my answer, it is complete and I believe working."}],"answers":[{"comments":[{"owner":{"account_id":27841046,"reputation":13,"user_id":21257529,"display_name":"Roman"},"score":0,"creation_date":1676984036,"post_id":75520626,"comment_id":133243415,"body_markdown":"I&#39;m not sure if this is the right way to finish it?\n```for(int i = 1; i&lt;n; i++) {\n            for (int j = 1; j &lt; n; j++) {\n                if (occupiedRed[i][j]) {\n                    label[i][j] = touching.get(i)[j];\n                }\n            }\n        }```\nIt doesn&#39;t seem to be as I am not getting any good results when I print out label","body":"I&#39;m not sure if this is the right way to finish it? <code>for(int i = 1; i&lt;n; i++) {             for (int j = 1; j &lt; n; j++) {                 if (occupiedRed[i][j]) {                     label[i][j] = touching.get(i)[j];                 }             }         }</code> It doesn&#39;t seem to be as I am not getting any good results when I print out label"},{"owner":{"account_id":27841046,"reputation":13,"user_id":21257529,"display_name":"Roman"},"score":0,"creation_date":1676985938,"post_id":75520626,"comment_id":133244029,"body_markdown":"How would you recommend I properly convert it?","body":"How would you recommend I properly convert it?"},{"owner":{"account_id":27841046,"reputation":13,"user_id":21257529,"display_name":"Roman"},"score":0,"creation_date":1676986316,"post_id":75520626,"comment_id":133244165,"body_markdown":"`Map&lt;Integer, Integer&gt; map = touching.stream()\n                .collect(Collectors.toMap(\n                        arr -&gt; arr[0],  // key mapping function\n                        arr -&gt; arr[1]   // value mapping function\n                ));`\nThat seems to be giving me no good values, it&#39;s giving me an empty map","body":"<code>Map&lt;Integer, Integer&gt; map = touching.stream()                 .collect(Collectors.toMap(                         arr -&gt; arr[0],  &#47;&#47; key mapping function                         arr -&gt; arr[1]   &#47;&#47; value mapping function                 ));</code> That seems to be giving me no good values, it&#39;s giving me an empty map"},{"owner":{"account_id":27841046,"reputation":13,"user_id":21257529,"display_name":"Roman"},"score":0,"creation_date":1676986726,"post_id":75520626,"comment_id":133244287,"body_markdown":"I have updated the original post with the code I have right now that doesn&#39;t seem to be generating anything","body":"I have updated the original post with the code I have right now that doesn&#39;t seem to be generating anything"}],"tags":[],"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677057623,"creation_date":1676982987,"answer_id":75520626,"question_id":75519800,"body_markdown":"You&#39;re essentially going to do a connected components algorithm. The input will be with you 9x9 truth table for **one of the colors**.\r\n\r\n    static Map&lt;Integer, List&lt;int[]&gt;&gt; cluster( boolean[][] occupied )\r\n\r\nThis is a [2-pass connect component algorithm](https://en.wikipedia.org/wiki/Connected-component_labeling#Graphical_example_of_two-pass_algorithm). The first pass we go through and make preliminary labels, we also create a &quot;touching&quot; list that keeps track of regions adjacent to each other.\r\n    \r\n        int n = occupied.length;\r\n        int[][] label = new int[n][n];\r\n        int last = 1;\r\n        List&lt;int[]&gt; touching = new ArrayList&lt;&gt;();\r\n\r\n        //first pass\r\n        for(int i = 0; i&lt;n; i++){\r\n            for(int j = 0; j&lt;n; j++){\r\n                if(occupied[i][j]){\r\n                    //4 way connectivity.\r\n                    int north = 0;\r\n                    int west = 0;\r\n                    int next = 0;\r\n                    if( i &gt; 0 &amp;&amp; occupied[i-1][j]){\r\n                        west = label[i-1][j];\r\n                    }\r\n                    if( j &gt; 0 &amp;&amp; occupied[i][j-1]){\r\n                        north = label[i][j-1];\r\n                    }\r\n                    if(west != 0){\r\n                        if(north != 0){\r\n                            //two labelled regions.\r\n                            if(north == west){\r\n                                //they&#39;re the same, it&#39;s ok.\r\n                                next = north;\r\n                            } else if(north &lt; west){\r\n                                //label it with the minimum one\r\n                                next = north;\r\n                                touching.add( new int[]{west, north} );\r\n                            } else{\r\n                                next = west;\r\n                                touching.add( new int[]{north, west} );\r\n                            }\r\n                        } else{\r\n                            next = west;\r\n                        }\r\n                    } else if( north != 0 ){\r\n                        next = north;\r\n                    } else{\r\n                        next = last++;\r\n                    }\r\n                    label[i][j] = next; //assign the label.\r\n                } else{\r\n                    //not occupied.\r\n                    continue;\r\n                }\r\n            }\r\n        }\r\n    \r\nThat is the first pass, at the end of the first pass the regions are labelled, but there are touching regions that need to be merged. That can be done with the `touching` list, but it needs to be refined a bit. \r\n\r\nThis first step merges all of the touching labels in to associated clusters.\r\n\r\n        List&lt;TreeSet&lt;Integer&gt;&gt; clusters = new ArrayList&lt;&gt;();\r\n        \r\n        for(int[] pair: touching){\r\n            TreeSet&lt;Integer&gt; pair0 = null;\r\n            TreeSet&lt;Integer&gt; pair1 = null;\r\n            for(TreeSet&lt;Integer&gt; cluster: clusters){\r\n                if(cluster.contains(pair[0])){\r\n                    pair0 = cluster;\r\n                }\r\n                if(cluster.contains(pair[1])){\r\n                    pair1 = cluster;\r\n                }\r\n            }\r\n            if( pair0 == null &amp;&amp; pair1 == null){\r\n                //new cluster\r\n                TreeSet&lt;Integer&gt; newCluster = new TreeSet&lt;&gt;();\r\n                newCluster.add(pair[0]);\r\n                newCluster.add(pair[1]);\r\n                clusters.add(newCluster);\r\n            } else if( pair0 == null ){\r\n                pair1.add(pair[0]);\r\n            } else if( pair1 == null ){\r\n                pair0.add(pair[1]);\r\n            } else{\r\n                if(pair0 == pair1) continue;\r\n                //both labels are already in clusters but different clusters.\r\n                pair0.addAll(pair1);\r\n                clusters.remove(pair1);\r\n            }\r\n        }\r\n\r\nThis goes through and creates a mapping, so that all of the values in a cluster will map to the lowest value.\r\n\r\n        Map&lt;Integer, Integer&gt; fin = new HashMap&lt;&gt;();\r\n        for( TreeSet&lt;Integer&gt; cluster: clusters){\r\n            Integer low = cluster.first();\r\n            for(Integer i: cluster){\r\n                fin.put(i, low);\r\n            }\r\n        }\r\n\r\nSecond pass is just a matter of associating the labels to their keys.\r\n\r\n        Map&lt;Integer, List&lt;int[]&gt;&gt; result = new HashMap&lt;&gt;();\r\n        //second pass\r\n        for(int i = 0; i&lt;n; i++){\r\n            for(int j = 0; j&lt;n; j++){\r\n                if( occupied[i][j] ){\r\n                    Integer f = fin.computeIfAbsent( label[i][j], k -&gt; k );\r\n                    result.computeIfAbsent( f, k -&gt; new ArrayList&lt;&gt;() ).add( new int[]{i, j} );\r\n                    label[i][j] = f;\r\n                }\r\n            }\r\n        }\r\n\r\nResult will contain the label and a collection of int[] that represent all of the points. To use this.\r\n\r\n    Map&lt;Integer, List&lt;int[]&gt;&gt; whiteClusters = cluster(occupiedWhite);\r\n    Map&lt;Integer, List&lt;int[]&gt;&gt; redClusters = cluster(occupiedRed);\r\n\r\nFor completeness, here is a compilable working version.\r\n\r\n```\r\nimport java.util.*;\r\n\r\npublic class ConnComp{\r\n    static void printArray(int[][] arr){\r\n        for(int[] row: arr){\r\n            for(int i: row){\r\n                System.out.printf(&quot;%3d&quot;,i);\r\n            }\r\n            System.out.println();\r\n        }\r\n    }\r\n    \r\n    static void printArray(boolean[][] arr){\r\n        for(boolean[] row: arr){\r\n            for(boolean i: row){\r\n                System.out.print(i ? &quot;  t&quot; : &quot;  f&quot;);\r\n            }\r\n            System.out.println();\r\n        }\r\n    }\r\n    \r\n    static Map&lt;Integer, List&lt;int[]&gt;&gt; cluster( boolean[][] occupied ){\r\n        int n = occupied.length;\r\n        int[][] label = new int[n][n];\r\n        int last = 1;\r\n        List&lt;int[]&gt; touching = new ArrayList&lt;&gt;();\r\n\r\n        //first pass\r\n        for(int i = 0; i&lt;n; i++){\r\n            for(int j = 0; j&lt;n; j++){\r\n                if(occupied[i][j]){\r\n                    //4 way connectivity.\r\n                    int north = 0;\r\n                    int west = 0;\r\n                    int next = 0;\r\n                    if( i &gt; 0 &amp;&amp; occupied[i-1][j]){\r\n                        west = label[i-1][j];\r\n                    }\r\n                    if( j &gt; 0 &amp;&amp; occupied[i][j-1]){\r\n                        north = label[i][j-1];\r\n                    }\r\n                    if(west != 0){\r\n                        if(north != 0){\r\n                            //two labelled regions.\r\n                            if(north == west){\r\n                                //they&#39;re the same, it&#39;s ok.\r\n                                next = north;\r\n                            } else if(north &lt; west){\r\n                                //label it with the minimum one\r\n                                next = north;\r\n                                touching.add( new int[]{west, north} );\r\n                            } else{\r\n                                next = west;\r\n                                touching.add( new int[]{north, west} );\r\n                            }\r\n                        } else{\r\n                            next = west;\r\n                        }\r\n                    } else if( north != 0 ){\r\n                        next = north;\r\n                    } else{\r\n                        next = last++;\r\n                    }\r\n                    label[i][j] = next; //assign the label.\r\n                } else{\r\n                    //not occupied.\r\n                    continue;\r\n                }\r\n            }\r\n        }\r\n        \r\n        //map reduce\r\n        Comparator&lt;int[]&gt; c = Comparator.comparingInt( arr -&gt; arr[0] );\r\n        Comparator&lt;int[]&gt; c2 = Comparator.comparingInt( arr -&gt; arr[1] );\r\n        c = c.thenComparing(c2);\r\n        \r\n        touching.sort( c );\r\n        List&lt;TreeSet&lt;Integer&gt;&gt; clusters = new ArrayList&lt;&gt;();\r\n        \r\n        for(int[] pair: touching){\r\n            TreeSet&lt;Integer&gt; pair0 = null;\r\n            TreeSet&lt;Integer&gt; pair1 = null;\r\n            for(TreeSet&lt;Integer&gt; cluster: clusters){\r\n                if(cluster.contains(pair[0])){\r\n                    pair0 = cluster;\r\n                }\r\n                if(cluster.contains(pair[1])){\r\n                    pair1 = cluster;\r\n                }\r\n            }\r\n            if( pair0 == null &amp;&amp; pair1 == null){\r\n                //new cluster\r\n                TreeSet&lt;Integer&gt; newCluster = new TreeSet&lt;&gt;();\r\n                newCluster.add(pair[0]);\r\n                newCluster.add(pair[1]);\r\n                clusters.add(newCluster);\r\n            } else if( pair0 == null ){\r\n                pair1.add(pair[0]);\r\n            } else if( pair1 == null ){\r\n                pair0.add(pair[1]);\r\n            } else{\r\n                if(pair0 == pair1) continue;\r\n                //both labels are already in clusters but different clusters.\r\n                pair0.addAll(pair1);\r\n                clusters.remove(pair1);\r\n            }\r\n        }\r\n        \r\n        Map&lt;Integer, Integer&gt; fin = new HashMap&lt;&gt;();\r\n        for( TreeSet&lt;Integer&gt; cluster: clusters){\r\n            Integer low = cluster.first();\r\n            for(Integer i: cluster){\r\n                fin.put(i, low);\r\n            }\r\n        }\r\n        \r\n        \r\n        \r\n        System.out.println(&quot;occupied&quot;);\r\n        printArray(occupied);\r\n        System.out.println(&quot;labelled&quot;);\r\n        printArray(label);\r\n        \r\n        Map&lt;Integer, List&lt;int[]&gt;&gt; result = new HashMap&lt;&gt;();\r\n        //second pass\r\n        for(int i = 0; i&lt;n; i++){\r\n            for(int j = 0; j&lt;n; j++){\r\n                if( occupied[i][j] ){\r\n                    Integer f = fin.computeIfAbsent( label[i][j], k -&gt; k );\r\n                    result.computeIfAbsent( f, k -&gt; new ArrayList&lt;&gt;() ).add( new int[]{i, j} );\r\n                    label[i][j] = f;\r\n                }\r\n            }\r\n        }\r\n        System.out.println(&quot;after labelling&quot;);\r\n        \r\n        printArray(label);        \r\n        \r\n        return result;\r\n    }\r\n    \r\n    static Random r = new Random(42);\r\n    static boolean[][] getBoard(){\r\n        int n = 9;\r\n        boolean[][] board = new boolean[n][n];\r\n        for(int i = 0; i&lt;50; i++){\r\n            int x = r.nextInt(n);\r\n            int y = r.nextInt(n);\r\n            board[x][y] = true;\r\n        }\r\n        return board;\r\n    }\r\n    \r\n    public static void main(String[] args){\r\n        \r\n        cluster(getBoard());\r\n        cluster(getBoard());\r\n        \r\n    }\r\n}\r\n```","title":"Checking number of adjacent tiles belonging to a player and calculating the score","body":"<p>You're essentially going to do a connected components algorithm. The input will be with you 9x9 truth table for <strong>one of the colors</strong>.</p>\n<pre><code>static Map&lt;Integer, List&lt;int[]&gt;&gt; cluster( boolean[][] occupied )\n</code></pre>\n<p>This is a <a href=\"https://en.wikipedia.org/wiki/Connected-component_labeling#Graphical_example_of_two-pass_algorithm\" rel=\"nofollow noreferrer\">2-pass connect component algorithm</a>. The first pass we go through and make preliminary labels, we also create a &quot;touching&quot; list that keeps track of regions adjacent to each other.</p>\n<pre><code>    int n = occupied.length;\n    int[][] label = new int[n][n];\n    int last = 1;\n    List&lt;int[]&gt; touching = new ArrayList&lt;&gt;();\n\n    //first pass\n    for(int i = 0; i&lt;n; i++){\n        for(int j = 0; j&lt;n; j++){\n            if(occupied[i][j]){\n                //4 way connectivity.\n                int north = 0;\n                int west = 0;\n                int next = 0;\n                if( i &gt; 0 &amp;&amp; occupied[i-1][j]){\n                    west = label[i-1][j];\n                }\n                if( j &gt; 0 &amp;&amp; occupied[i][j-1]){\n                    north = label[i][j-1];\n                }\n                if(west != 0){\n                    if(north != 0){\n                        //two labelled regions.\n                        if(north == west){\n                            //they're the same, it's ok.\n                            next = north;\n                        } else if(north &lt; west){\n                            //label it with the minimum one\n                            next = north;\n                            touching.add( new int[]{west, north} );\n                        } else{\n                            next = west;\n                            touching.add( new int[]{north, west} );\n                        }\n                    } else{\n                        next = west;\n                    }\n                } else if( north != 0 ){\n                    next = north;\n                } else{\n                    next = last++;\n                }\n                label[i][j] = next; //assign the label.\n            } else{\n                //not occupied.\n                continue;\n            }\n        }\n    }\n</code></pre>\n<p>That is the first pass, at the end of the first pass the regions are labelled, but there are touching regions that need to be merged. That can be done with the <code>touching</code> list, but it needs to be refined a bit.</p>\n<p>This first step merges all of the touching labels in to associated clusters.</p>\n<pre><code>    List&lt;TreeSet&lt;Integer&gt;&gt; clusters = new ArrayList&lt;&gt;();\n    \n    for(int[] pair: touching){\n        TreeSet&lt;Integer&gt; pair0 = null;\n        TreeSet&lt;Integer&gt; pair1 = null;\n        for(TreeSet&lt;Integer&gt; cluster: clusters){\n            if(cluster.contains(pair[0])){\n                pair0 = cluster;\n            }\n            if(cluster.contains(pair[1])){\n                pair1 = cluster;\n            }\n        }\n        if( pair0 == null &amp;&amp; pair1 == null){\n            //new cluster\n            TreeSet&lt;Integer&gt; newCluster = new TreeSet&lt;&gt;();\n            newCluster.add(pair[0]);\n            newCluster.add(pair[1]);\n            clusters.add(newCluster);\n        } else if( pair0 == null ){\n            pair1.add(pair[0]);\n        } else if( pair1 == null ){\n            pair0.add(pair[1]);\n        } else{\n            if(pair0 == pair1) continue;\n            //both labels are already in clusters but different clusters.\n            pair0.addAll(pair1);\n            clusters.remove(pair1);\n        }\n    }\n</code></pre>\n<p>This goes through and creates a mapping, so that all of the values in a cluster will map to the lowest value.</p>\n<pre><code>    Map&lt;Integer, Integer&gt; fin = new HashMap&lt;&gt;();\n    for( TreeSet&lt;Integer&gt; cluster: clusters){\n        Integer low = cluster.first();\n        for(Integer i: cluster){\n            fin.put(i, low);\n        }\n    }\n</code></pre>\n<p>Second pass is just a matter of associating the labels to their keys.</p>\n<pre><code>    Map&lt;Integer, List&lt;int[]&gt;&gt; result = new HashMap&lt;&gt;();\n    //second pass\n    for(int i = 0; i&lt;n; i++){\n        for(int j = 0; j&lt;n; j++){\n            if( occupied[i][j] ){\n                Integer f = fin.computeIfAbsent( label[i][j], k -&gt; k );\n                result.computeIfAbsent( f, k -&gt; new ArrayList&lt;&gt;() ).add( new int[]{i, j} );\n                label[i][j] = f;\n            }\n        }\n    }\n</code></pre>\n<p>Result will contain the label and a collection of int[] that represent all of the points. To use this.</p>\n<pre><code>Map&lt;Integer, List&lt;int[]&gt;&gt; whiteClusters = cluster(occupiedWhite);\nMap&lt;Integer, List&lt;int[]&gt;&gt; redClusters = cluster(occupiedRed);\n</code></pre>\n<p>For completeness, here is a compilable working version.</p>\n<pre><code>import java.util.*;\n\npublic class ConnComp{\n    static void printArray(int[][] arr){\n        for(int[] row: arr){\n            for(int i: row){\n                System.out.printf(&quot;%3d&quot;,i);\n            }\n            System.out.println();\n        }\n    }\n    \n    static void printArray(boolean[][] arr){\n        for(boolean[] row: arr){\n            for(boolean i: row){\n                System.out.print(i ? &quot;  t&quot; : &quot;  f&quot;);\n            }\n            System.out.println();\n        }\n    }\n    \n    static Map&lt;Integer, List&lt;int[]&gt;&gt; cluster( boolean[][] occupied ){\n        int n = occupied.length;\n        int[][] label = new int[n][n];\n        int last = 1;\n        List&lt;int[]&gt; touching = new ArrayList&lt;&gt;();\n\n        //first pass\n        for(int i = 0; i&lt;n; i++){\n            for(int j = 0; j&lt;n; j++){\n                if(occupied[i][j]){\n                    //4 way connectivity.\n                    int north = 0;\n                    int west = 0;\n                    int next = 0;\n                    if( i &gt; 0 &amp;&amp; occupied[i-1][j]){\n                        west = label[i-1][j];\n                    }\n                    if( j &gt; 0 &amp;&amp; occupied[i][j-1]){\n                        north = label[i][j-1];\n                    }\n                    if(west != 0){\n                        if(north != 0){\n                            //two labelled regions.\n                            if(north == west){\n                                //they're the same, it's ok.\n                                next = north;\n                            } else if(north &lt; west){\n                                //label it with the minimum one\n                                next = north;\n                                touching.add( new int[]{west, north} );\n                            } else{\n                                next = west;\n                                touching.add( new int[]{north, west} );\n                            }\n                        } else{\n                            next = west;\n                        }\n                    } else if( north != 0 ){\n                        next = north;\n                    } else{\n                        next = last++;\n                    }\n                    label[i][j] = next; //assign the label.\n                } else{\n                    //not occupied.\n                    continue;\n                }\n            }\n        }\n        \n        //map reduce\n        Comparator&lt;int[]&gt; c = Comparator.comparingInt( arr -&gt; arr[0] );\n        Comparator&lt;int[]&gt; c2 = Comparator.comparingInt( arr -&gt; arr[1] );\n        c = c.thenComparing(c2);\n        \n        touching.sort( c );\n        List&lt;TreeSet&lt;Integer&gt;&gt; clusters = new ArrayList&lt;&gt;();\n        \n        for(int[] pair: touching){\n            TreeSet&lt;Integer&gt; pair0 = null;\n            TreeSet&lt;Integer&gt; pair1 = null;\n            for(TreeSet&lt;Integer&gt; cluster: clusters){\n                if(cluster.contains(pair[0])){\n                    pair0 = cluster;\n                }\n                if(cluster.contains(pair[1])){\n                    pair1 = cluster;\n                }\n            }\n            if( pair0 == null &amp;&amp; pair1 == null){\n                //new cluster\n                TreeSet&lt;Integer&gt; newCluster = new TreeSet&lt;&gt;();\n                newCluster.add(pair[0]);\n                newCluster.add(pair[1]);\n                clusters.add(newCluster);\n            } else if( pair0 == null ){\n                pair1.add(pair[0]);\n            } else if( pair1 == null ){\n                pair0.add(pair[1]);\n            } else{\n                if(pair0 == pair1) continue;\n                //both labels are already in clusters but different clusters.\n                pair0.addAll(pair1);\n                clusters.remove(pair1);\n            }\n        }\n        \n        Map&lt;Integer, Integer&gt; fin = new HashMap&lt;&gt;();\n        for( TreeSet&lt;Integer&gt; cluster: clusters){\n            Integer low = cluster.first();\n            for(Integer i: cluster){\n                fin.put(i, low);\n            }\n        }\n        \n        \n        \n        System.out.println(&quot;occupied&quot;);\n        printArray(occupied);\n        System.out.println(&quot;labelled&quot;);\n        printArray(label);\n        \n        Map&lt;Integer, List&lt;int[]&gt;&gt; result = new HashMap&lt;&gt;();\n        //second pass\n        for(int i = 0; i&lt;n; i++){\n            for(int j = 0; j&lt;n; j++){\n                if( occupied[i][j] ){\n                    Integer f = fin.computeIfAbsent( label[i][j], k -&gt; k );\n                    result.computeIfAbsent( f, k -&gt; new ArrayList&lt;&gt;() ).add( new int[]{i, j} );\n                    label[i][j] = f;\n                }\n            }\n        }\n        System.out.println(&quot;after labelling&quot;);\n        \n        printArray(label);        \n        \n        return result;\n    }\n    \n    static Random r = new Random(42);\n    static boolean[][] getBoard(){\n        int n = 9;\n        boolean[][] board = new boolean[n][n];\n        for(int i = 0; i&lt;50; i++){\n            int x = r.nextInt(n);\n            int y = r.nextInt(n);\n            board[x][y] = true;\n        }\n        return board;\n    }\n    \n    public static void main(String[] args){\n        \n        cluster(getBoard());\n        cluster(getBoard());\n        \n    }\n}\n</code></pre>\n"}],"owner":{"account_id":27841046,"reputation":13,"user_id":21257529,"display_name":"Roman"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75520626,"answer_count":1,"score":0,"last_activity_date":1677057623,"creation_date":1676978502,"question_id":75519800,"body_markdown":"So, I am trying to work out how many adjacent tiles there are for each player and calculate a total score. Calculating the score works by counting how many adjacent tiles (adjacent means sharing an edge not diagonally) there are per territory, multiplying that number by itself and adding the values of all the territories together.\r\n\r\n\r\nSo far I have the code below, which splits all the spaces out per player and can print whether or not a space is occupied by the player but I am stuck on calculating how many tiles are adjacent to each other.\r\n\r\n\r\n        public void calculate(PowerToken[][] allTokens){\r\n                boolean[][] occupiedRed = new boolean[9][9];\r\n                boolean[][] occupiedWhite = new boolean[9][9];\r\n        \r\n                boolean[][] countedRed = new boolean[9][9];\r\n                boolean[][] countedWhite = new boolean[9][9];\r\n        \r\n                for (int i = 0; i &lt; 9; i++){\r\n                    for (int j = 0; j &lt; 9; j++){\r\n                        if (allTokens[i][j].isOnBoard()) {\r\n                            if (allTokens[i][j].getPlayerColor() == Color.RED){\r\n                                occupiedRed[i][j] = true;\r\n                            } else {\r\n                                occupiedWhite[i][j] = true;\r\n                            }\r\n                        }\r\n                    }\r\n            }\r\n    \r\n    \r\n    \r\n            // Test printing\r\n            for (int i = 0; i &lt; 9; i++){\r\n                for (int j = 0; j &lt; 9; j++){\r\n                    System.out.print(occupiedWhite[i][j] + &quot; &quot;);\r\n                }\r\n                System.out.println();\r\n            }\r\n            System.out.println();\r\n    \r\n            for (int i = 0; i &lt; 9; i++){\r\n                for (int j = 0; j &lt; 9; j++){\r\n                    System.out.print(occupiedRed[i][j] + &quot; &quot;);\r\n                }\r\n                System.out.println();\r\n            }\r\n        }\r\n    \r\n\r\n\r\n**Power Token Class**\r\n\r\n    public class PowerToken {\r\n        private int positionX;\r\n        private int positionY;\r\n    \r\n        private boolean onBoard;\r\n    \r\n        private Color playerColor;\r\n    \r\n        public PowerToken(int positionX, int positionY) {\r\n            setPositionX(positionX);\r\n            setPositionY(positionY);\r\n        }\r\n    \r\n        public PowerToken(int positionX, int positionY, boolean onBoard, Color playerColor) {\r\n            setPositionX(positionX);\r\n            setPositionY(positionY);\r\n            setOnBoard(onBoard);\r\n            setPlayerColor(playerColor);\r\n        }\r\n    \r\n        public int getPositionX() {\r\n            return positionX;\r\n        }\r\n    \r\n        public void setPositionX(int positionX) {\r\n            this.positionX = positionX;\r\n        }\r\n    \r\n        public int getPositionY() {\r\n            return positionY;\r\n        }\r\n    \r\n        public void setPositionY(int positionY) {\r\n            this.positionY = positionY;\r\n        }\r\n    \r\n        public boolean isOnBoard() {\r\n            return onBoard;\r\n        }\r\n    \r\n        public void setOnBoard(boolean onBoard) {\r\n            this.onBoard = onBoard;\r\n        }\r\n    \r\n        public Color getPlayerColor() {\r\n            return playerColor;\r\n        }\r\n    \r\n        public void setPlayerColor(Color playerColor) {\r\n            this.playerColor = playerColor;\r\n        }\r\n    \r\n        @Override\r\n        public String toString() {\r\n            return &quot;PowerToken{&quot; +\r\n                    &quot;positionX=&quot; + positionX +\r\n                    &quot;, positionY=&quot; + positionY +\r\n                    &quot;, onBoard=&quot; + onBoard +\r\n                    &quot;, playerColor=&quot; + playerColor +\r\n                    &#39;}&#39;;\r\n        }\r\n    }\r\n\r\nSo for example in this image ![image][1] there are 2 sets of 3 adjacent tiles each and 1 set of 4 adjacent tiles\r\n\r\n\r\n**Update 2**\r\nThis is the code I have now, however i am getting an empty map as a result\r\n\r\n    public void calculate(PowerToken[][] allTokens){\r\n            boolean[][] occupiedRed = new boolean[9][9];\r\n            boolean[][] occupiedWhite = new boolean[9][9];\r\n    \r\n            boolean[][] countedRed = new boolean[9][9];\r\n            boolean[][] countedWhite = new boolean[9][9];\r\n    \r\n            int scoreRed;\r\n            int scoreWhite;\r\n    \r\n            for (int i = 0; i &lt; 9; i++){\r\n                for (int j = 0; j &lt; 9; j++){\r\n                    if (allTokens[i][j].isOnBoard()) {\r\n                        if (allTokens[i][j].getPlayerColor() == Color.RED){\r\n                            occupiedRed[i][j] = true;\r\n                        } else {\r\n                            occupiedWhite[i][j] = true;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n    \r\n            List&lt;List&lt;Point&gt;&gt; clusters = new ArrayList&lt;&gt;();\r\n    \r\n            int n = occupiedRed.length;\r\n            int[][] label = new int[n][n];\r\n            int last = 1;\r\n            List&lt;int[]&gt; touching = new ArrayList&lt;&gt;();\r\n    \r\n            //first pass\r\n            for(int i = 1; i&lt;n; i++){\r\n                for(int j = 1; j&lt;n; j++){\r\n                    if(occupiedRed[i][j]){\r\n                        //4 way connectivity.\r\n                        int north = 0;\r\n                        int west = 0;\r\n                        int next = 0;\r\n                        if( i-1 &gt; 0 &amp;&amp; occupiedRed[i-1][j]){\r\n                            west = label[i-1][j];\r\n                        }\r\n                        if( j-1 &lt; 0 &amp;&amp; occupiedRed[i][j-1]){\r\n                            north = label[i][j-1];\r\n                        }\r\n                        if(west != 0){\r\n                            if(north != 0){\r\n                                if(north == west){\r\n                                    next = north;\r\n                                } else if(north &lt; west){\r\n                                    next = north;\r\n                                    touching.add( new int[]{north, west} );\r\n                                } else{\r\n                                    next = west;\r\n                                    touching.add( new int[]{west, north} );\r\n                                }\r\n                            } else{\r\n                                next = west;\r\n                            }\r\n                        } else if( north != 0 ){\r\n                            next = north;\r\n                        } else{\r\n                            next = last++;\r\n                        }\r\n                    } else{\r\n                        continue;\r\n                    }\r\n                }\r\n            }\r\n    \r\n    \r\n            Map&lt;Integer, Integer&gt; map = touching.stream()\r\n                    .collect(Collectors.toMap(\r\n                            arr -&gt; arr[0],  // key mapping function\r\n                            arr -&gt; arr[1]   // value mapping function\r\n                    ));\r\n    \r\n            System.out.println(map);\r\n        }\r\n\r\n  [1]: https://i.stack.imgur.com/USkv6.png","title":"Checking number of adjacent tiles belonging to a player and calculating the score","body":"<p>So, I am trying to work out how many adjacent tiles there are for each player and calculate a total score. Calculating the score works by counting how many adjacent tiles (adjacent means sharing an edge not diagonally) there are per territory, multiplying that number by itself and adding the values of all the territories together.</p>\n<p>So far I have the code below, which splits all the spaces out per player and can print whether or not a space is occupied by the player but I am stuck on calculating how many tiles are adjacent to each other.</p>\n<pre><code>    public void calculate(PowerToken[][] allTokens){\n            boolean[][] occupiedRed = new boolean[9][9];\n            boolean[][] occupiedWhite = new boolean[9][9];\n    \n            boolean[][] countedRed = new boolean[9][9];\n            boolean[][] countedWhite = new boolean[9][9];\n    \n            for (int i = 0; i &lt; 9; i++){\n                for (int j = 0; j &lt; 9; j++){\n                    if (allTokens[i][j].isOnBoard()) {\n                        if (allTokens[i][j].getPlayerColor() == Color.RED){\n                            occupiedRed[i][j] = true;\n                        } else {\n                            occupiedWhite[i][j] = true;\n                        }\n                    }\n                }\n        }\n\n\n\n        // Test printing\n        for (int i = 0; i &lt; 9; i++){\n            for (int j = 0; j &lt; 9; j++){\n                System.out.print(occupiedWhite[i][j] + &quot; &quot;);\n            }\n            System.out.println();\n        }\n        System.out.println();\n\n        for (int i = 0; i &lt; 9; i++){\n            for (int j = 0; j &lt; 9; j++){\n                System.out.print(occupiedRed[i][j] + &quot; &quot;);\n            }\n            System.out.println();\n        }\n    }\n</code></pre>\n<p><strong>Power Token Class</strong></p>\n<pre><code>public class PowerToken {\n    private int positionX;\n    private int positionY;\n\n    private boolean onBoard;\n\n    private Color playerColor;\n\n    public PowerToken(int positionX, int positionY) {\n        setPositionX(positionX);\n        setPositionY(positionY);\n    }\n\n    public PowerToken(int positionX, int positionY, boolean onBoard, Color playerColor) {\n        setPositionX(positionX);\n        setPositionY(positionY);\n        setOnBoard(onBoard);\n        setPlayerColor(playerColor);\n    }\n\n    public int getPositionX() {\n        return positionX;\n    }\n\n    public void setPositionX(int positionX) {\n        this.positionX = positionX;\n    }\n\n    public int getPositionY() {\n        return positionY;\n    }\n\n    public void setPositionY(int positionY) {\n        this.positionY = positionY;\n    }\n\n    public boolean isOnBoard() {\n        return onBoard;\n    }\n\n    public void setOnBoard(boolean onBoard) {\n        this.onBoard = onBoard;\n    }\n\n    public Color getPlayerColor() {\n        return playerColor;\n    }\n\n    public void setPlayerColor(Color playerColor) {\n        this.playerColor = playerColor;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;PowerToken{&quot; +\n                &quot;positionX=&quot; + positionX +\n                &quot;, positionY=&quot; + positionY +\n                &quot;, onBoard=&quot; + onBoard +\n                &quot;, playerColor=&quot; + playerColor +\n                '}';\n    }\n}\n</code></pre>\n<p>So for example in this image <img src=\"https://i.stack.imgur.com/USkv6.png\" alt=\"image\" /> there are 2 sets of 3 adjacent tiles each and 1 set of 4 adjacent tiles</p>\n<p><strong>Update 2</strong>\nThis is the code I have now, however i am getting an empty map as a result</p>\n<pre><code>public void calculate(PowerToken[][] allTokens){\n        boolean[][] occupiedRed = new boolean[9][9];\n        boolean[][] occupiedWhite = new boolean[9][9];\n\n        boolean[][] countedRed = new boolean[9][9];\n        boolean[][] countedWhite = new boolean[9][9];\n\n        int scoreRed;\n        int scoreWhite;\n\n        for (int i = 0; i &lt; 9; i++){\n            for (int j = 0; j &lt; 9; j++){\n                if (allTokens[i][j].isOnBoard()) {\n                    if (allTokens[i][j].getPlayerColor() == Color.RED){\n                        occupiedRed[i][j] = true;\n                    } else {\n                        occupiedWhite[i][j] = true;\n                    }\n                }\n            }\n        }\n\n        List&lt;List&lt;Point&gt;&gt; clusters = new ArrayList&lt;&gt;();\n\n        int n = occupiedRed.length;\n        int[][] label = new int[n][n];\n        int last = 1;\n        List&lt;int[]&gt; touching = new ArrayList&lt;&gt;();\n\n        //first pass\n        for(int i = 1; i&lt;n; i++){\n            for(int j = 1; j&lt;n; j++){\n                if(occupiedRed[i][j]){\n                    //4 way connectivity.\n                    int north = 0;\n                    int west = 0;\n                    int next = 0;\n                    if( i-1 &gt; 0 &amp;&amp; occupiedRed[i-1][j]){\n                        west = label[i-1][j];\n                    }\n                    if( j-1 &lt; 0 &amp;&amp; occupiedRed[i][j-1]){\n                        north = label[i][j-1];\n                    }\n                    if(west != 0){\n                        if(north != 0){\n                            if(north == west){\n                                next = north;\n                            } else if(north &lt; west){\n                                next = north;\n                                touching.add( new int[]{north, west} );\n                            } else{\n                                next = west;\n                                touching.add( new int[]{west, north} );\n                            }\n                        } else{\n                            next = west;\n                        }\n                    } else if( north != 0 ){\n                        next = north;\n                    } else{\n                        next = last++;\n                    }\n                } else{\n                    continue;\n                }\n            }\n        }\n\n\n        Map&lt;Integer, Integer&gt; map = touching.stream()\n                .collect(Collectors.toMap(\n                        arr -&gt; arr[0],  // key mapping function\n                        arr -&gt; arr[1]   // value mapping function\n                ));\n\n        System.out.println(map);\n    }\n</code></pre>\n"},{"tags":["java","gradle","tomcat","gradle-dependencies"],"comments":[{"owner":{"account_id":8999454,"reputation":354,"user_id":6708591,"display_name":"user6708591"},"score":0,"creation_date":1677003910,"post_id":75518174,"comment_id":133250000,"body_markdown":"Just to clarify, you wrote you want tomcatLib in the tomcat lib folder, but in the tree listing (second one), it is contained in webapp/lib. I suppose that tree listing is not correct?","body":"Just to clarify, you wrote you want tomcatLib in the tomcat lib folder, but in the tree listing (second one), it is contained in webapp/lib. I suppose that tree listing is not correct?"},{"owner":{"account_id":3474721,"reputation":21,"user_id":3512508,"display_name":"Ricardo Almeida"},"score":0,"creation_date":1677054238,"post_id":75518174,"comment_id":133259552,"body_markdown":"sorry, I forgot to remove that one as well, will adjust it","body":"sorry, I forgot to remove that one as well, will adjust it"}],"answers":[{"comments":[{"owner":{"account_id":3474721,"reputation":21,"user_id":3512508,"display_name":"Ricardo Almeida"},"score":0,"creation_date":1677056549,"post_id":75525122,"comment_id":133260130,"body_markdown":"Is it not possible to have gradle calculate it? In this simple case it already means I have to check all dependencies of tomcatLib, for it&#39;s dependencies (regularLibA) check the dependencies of the dependency (commons-text) to know what should go into the lib folder. If it was a more complex project, with more project dependencies, it could be a bit complex and error prone. I was thinking in marking somehow the tomcatLib and then have gradle do all the work...","body":"Is it not possible to have gradle calculate it? In this simple case it already means I have to check all dependencies of tomcatLib, for it&#39;s dependencies (regularLibA) check the dependencies of the dependency (commons-text) to know what should go into the lib folder. If it was a more complex project, with more project dependencies, it could be a bit complex and error prone. I was thinking in marking somehow the tomcatLib and then have gradle do all the work..."},{"owner":{"account_id":3474721,"reputation":21,"user_id":3512508,"display_name":"Ricardo Almeida"},"score":0,"creation_date":1677063447,"post_id":75525122,"comment_id":133262062,"body_markdown":"Also, if regularLibA later gets removed, would have to again edit the build file so that commons-text no longer would go to the tomcat lib folder.\n\nIt would be much better if there was a way to do all this dependency evaluation dynamically/programatically in gradle instead of manually specifying the providedCompile...","body":"Also, if regularLibA later gets removed, would have to again edit the build file so that commons-text no longer would go to the tomcat lib folder.  It would be much better if there was a way to do all this dependency evaluation dynamically/programatically in gradle instead of manually specifying the providedCompile..."},{"owner":{"account_id":3474721,"reputation":21,"user_id":3512508,"display_name":"Ricardo Almeida"},"score":0,"creation_date":1677165959,"post_id":75525122,"comment_id":133287742,"body_markdown":"In terms of steps, what I was thinking was something like:\n\nAfter gradle calculates dependencies, loop through all the java projects and if it&#39;s a tomcat lib (marked with a plugin? some ext.prop?), mark recursevly all dependencies as tomcat libs as well (so that the dependency tree also become tomcat libs) and store it in a list somehow.\n\nWhen building the war file, exclude from the lib folder all those files in the previous list.\n\nHave another task that copies all those files in the previous list to some dist directory (to be copied to tomcat/lib)","body":"In terms of steps, what I was thinking was something like:  After gradle calculates dependencies, loop through all the java projects and if it&#39;s a tomcat lib (marked with a plugin? some ext.prop?), mark recursevly all dependencies as tomcat libs as well (so that the dependency tree also become tomcat libs) and store it in a list somehow.  When building the war file, exclude from the lib folder all those files in the previous list.  Have another task that copies all those files in the previous list to some dist directory (to be copied to tomcat/lib)"}],"tags":[],"owner":{"account_id":8999454,"reputation":354,"user_id":6708591,"display_name":"user6708591"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677008299,"creation_date":1677008299,"answer_id":75525122,"question_id":75518174,"body_markdown":"Use the Gradle War Plugin.\r\n\r\n    plugins {\r\n        id &#39;war&#39;\r\n    }\r\n\r\nIt adds two dependency configurations, `providedCompile` and `providedRuntime`, which cause the dependency not to be included in the war file. Configure your dependencies as necessary, for example:\r\n\r\n    dependencies {\r\n\t    providedRuntime &#39;tomcatLib&#39;\r\n        providedCompile &#39;org.apache.commons:commons-text:1.10.0&#39;\r\n        ...\r\n    }\r\n\r\nAs far as copying jars to the Tomcat lib directory is concerned, you can use the Copy task. See [Working With Files][1] in the Gradle docs for a good introduction how to do that. \r\n\r\n\r\n  [1]: https://docs.gradle.org/current/userguide/working_with_files.html","title":"How to configure gradle dependency for tomcat lib folder?","body":"<p>Use the Gradle War Plugin.</p>\n<pre><code>plugins {\n    id 'war'\n}\n</code></pre>\n<p>It adds two dependency configurations, <code>providedCompile</code> and <code>providedRuntime</code>, which cause the dependency not to be included in the war file. Configure your dependencies as necessary, for example:</p>\n<pre><code>dependencies {\n    providedRuntime 'tomcatLib'\n    providedCompile 'org.apache.commons:commons-text:1.10.0'\n    ...\n}\n</code></pre>\n<p>As far as copying jars to the Tomcat lib directory is concerned, you can use the Copy task. See <a href=\"https://docs.gradle.org/current/userguide/working_with_files.html\" rel=\"nofollow noreferrer\">Working With Files</a> in the Gradle docs for a good introduction how to do that.</p>\n"}],"owner":{"account_id":3474721,"reputation":21,"user_id":3512508,"display_name":"Ricardo Almeida"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677057621,"creation_date":1676969715,"question_id":75518174,"body_markdown":"Hi have a multiproject where I want one of the libs to be in the tomcat lib folder (usually would be log4j or some other common lib). Code is available at [github](https://github.com/i23098/gradle8experiment) and dependencies are:\r\n\r\n- regularLibA depends on commons-text\r\n- regularLibB depends on commons-text and commons-lang3\r\n- tomcatLib depends on regularLibA\r\n- webApp depends on regularLibA, regularLibB and tomcatLib\r\n\r\nWith the simple build files/dependencies, the generated war file is:\r\n\r\n```\r\nwebApp\r\n├── index.jsp\r\n└── WEB-INF\r\n    ├── classes\r\n    │&#160;&#160; └── com\r\n    │&#160;&#160;     └── github\r\n    │&#160;&#160;         └── i23098\r\n    │&#160;&#160;             └── web\r\n    │&#160;&#160;                 └── W.class\r\n    └── lib\r\n        ├── commons-lang3-3.12.0.jar\r\n        ├── commons-text-1.10.0.jar\r\n        ├── regularLibA.jar\r\n        ├── regularLibB.jar\r\n        └── tomcatLib.jar\r\n```\r\n\r\nHow to configure gradle so that tomcatLib project is to be in the tomcat lib folder, so, the jar and it&#39;s dependencies should not be added to the war file? i.e. the generated war file should be:\r\n\r\n```\r\nwebApp\r\n├── index.jsp\r\n└── WEB-INF\r\n    ├── classes\r\n    │&#160;&#160; └── com\r\n    │&#160;&#160;     └── github\r\n    │&#160;&#160;         └── i23098\r\n    │&#160;&#160;             └── web\r\n    │&#160;&#160;                 └── W.class\r\n    └── lib\r\n        ├── commons-lang3-3.12.0.jar\r\n        └── regularLibB.jar\r\n```\r\n\r\nAlso, how to create copy task of those files (tomcatLib.jar, regularLibA.jar and commons-text-1.10.0.jar) to the tomcat lib folder (i.e. how to get the list of excluded files from the war)?","title":"How to configure gradle dependency for tomcat lib folder?","body":"<p>Hi have a multiproject where I want one of the libs to be in the tomcat lib folder (usually would be log4j or some other common lib). Code is available at <a href=\"https://github.com/i23098/gradle8experiment\" rel=\"nofollow noreferrer\">github</a> and dependencies are:</p>\n<ul>\n<li>regularLibA depends on commons-text</li>\n<li>regularLibB depends on commons-text and commons-lang3</li>\n<li>tomcatLib depends on regularLibA</li>\n<li>webApp depends on regularLibA, regularLibB and tomcatLib</li>\n</ul>\n<p>With the simple build files/dependencies, the generated war file is:</p>\n<pre><code>webApp\n├── index.jsp\n└── WEB-INF\n    ├── classes\n    │   └── com\n    │       └── github\n    │           └── i23098\n    │               └── web\n    │                   └── W.class\n    └── lib\n        ├── commons-lang3-3.12.0.jar\n        ├── commons-text-1.10.0.jar\n        ├── regularLibA.jar\n        ├── regularLibB.jar\n        └── tomcatLib.jar\n</code></pre>\n<p>How to configure gradle so that tomcatLib project is to be in the tomcat lib folder, so, the jar and it's dependencies should not be added to the war file? i.e. the generated war file should be:</p>\n<pre><code>webApp\n├── index.jsp\n└── WEB-INF\n    ├── classes\n    │   └── com\n    │       └── github\n    │           └── i23098\n    │               └── web\n    │                   └── W.class\n    └── lib\n        ├── commons-lang3-3.12.0.jar\n        └── regularLibB.jar\n</code></pre>\n<p>Also, how to create copy task of those files (tomcatLib.jar, regularLibA.jar and commons-text-1.10.0.jar) to the tomcat lib folder (i.e. how to get the list of excluded files from the war)?</p>\n"},{"tags":["java","android","camera"],"owner":{"account_id":21686239,"reputation":19,"user_id":16001648,"display_name":"Kacper Bielak"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677057511,"creation_date":1677057511,"question_id":75530508,"body_markdown":"I have a problem with the built-in camera for which CameraView is used, and more precisely when starting the recording. When I start recording for the first time, I get the following error. The second and subsequent times it&#39;s ok. I&#39;m also sending some code below.\r\n\r\n\r\n```\r\nD/Camera: app passed NULL surface\r\nW/CameraViewEngin: type=1400 audit(0.0:1457): avc: denied { read } for name=&quot;u:object_r:persist_camera_prop:s0&quot; dev=&quot;tmpfs&quot; ino=12032 scontext=u:r:untrusted_app:s0:c59,c257,c512,c768 tcontext=u:object_r:persist_camera_prop:s0 tclass=file permissive=0\r\nE/libc: Access denied finding property &quot;vendor.camera.aux.packagelist&quot;\r\n```\r\n\r\n\r\n\r\n```\r\n    private CameraView cameraView;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n...\r\n        cameraView = findViewById(R.id.camera);\r\n        cameraView.setLifecycleOwner(this);\r\n...\r\ncameraView.takeVideo(file, time);\r\n```\r\n\r\n\r\n\r\nI already have all the necessary permissions set.","title":"Error with CameraView in android app, app passed null surface, avc: denied {read} 1400","body":"<p>I have a problem with the built-in camera for which CameraView is used, and more precisely when starting the recording. When I start recording for the first time, I get the following error. The second and subsequent times it's ok. I'm also sending some code below.</p>\n<pre><code>D/Camera: app passed NULL surface\nW/CameraViewEngin: type=1400 audit(0.0:1457): avc: denied { read } for name=&quot;u:object_r:persist_camera_prop:s0&quot; dev=&quot;tmpfs&quot; ino=12032 scontext=u:r:untrusted_app:s0:c59,c257,c512,c768 tcontext=u:object_r:persist_camera_prop:s0 tclass=file permissive=0\nE/libc: Access denied finding property &quot;vendor.camera.aux.packagelist&quot;\n</code></pre>\n<pre><code>    private CameraView cameraView;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n...\n        cameraView = findViewById(R.id.camera);\n        cameraView.setLifecycleOwner(this);\n...\ncameraView.takeVideo(file, time);\n</code></pre>\n<p>I already have all the necessary permissions set.</p>\n"},{"tags":["java","multithreading","guava"],"comments":[{"owner":{"account_id":10326,"reputation":9293,"user_id":19450,"display_name":"Ben Manes"},"score":1,"creation_date":1552979650,"post_id":55234771,"comment_id":97204087,"body_markdown":"It&#39;s unclear, but sounds like you&#39;re saying that the `RemovalHander` races with the `CacheLoader` to see some shared state. If you need to have the removal handler synchronously called prior to the load, you could use Caffeine&#39;s `CacheWriter`. In regards to `cleanUp`, it is mostly for testing or should be called periodically but wouldn&#39;t fix a race if that&#39;s the underlying problem.","body":"It&#39;s unclear, but sounds like you&#39;re saying that the <code>RemovalHander</code> races with the <code>CacheLoader</code> to see some shared state. If you need to have the removal handler synchronously called prior to the load, you could use Caffeine&#39;s <code>CacheWriter</code>. In regards to <code>cleanUp</code>, it is mostly for testing or should be called periodically but wouldn&#39;t fix a race if that&#39;s the underlying problem."},{"owner":{"account_id":3334422,"reputation":612,"user_id":2802446,"display_name":"G.G."},"score":0,"creation_date":1552981076,"post_id":55234771,"comment_id":97204677,"body_markdown":"Thanks  updated post to make  it more clear.","body":"Thanks  updated post to make  it more clear."},{"owner":{"account_id":10326,"reputation":9293,"user_id":19450,"display_name":"Ben Manes"},"score":0,"creation_date":1552981251,"post_id":55234771,"comment_id":97204763,"body_markdown":"Usually the race is okay, but if not then you’d have to handle the race somehow or consider switching to Caffeine.","body":"Usually the race is okay, but if not then you’d have to handle the race somehow or consider switching to Caffeine."},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1552981400,"post_id":55234771,"comment_id":97204823,"body_markdown":"Are you saying the cache is returning expired data? That doesn&#39;t sound right...","body":"Are you saying the cache is returning expired data? That doesn&#39;t sound right..."},{"owner":{"account_id":10326,"reputation":9293,"user_id":19450,"display_name":"Ben Manes"},"score":0,"creation_date":1552981704,"post_id":55234771,"comment_id":97204948,"body_markdown":"@shmosel I think he needs the removal listener to complete before the loader starts, which isn’t supported by Guava","body":"@shmosel I think he needs the removal listener to complete before the loader starts, which isn’t supported by Guava"},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1552981763,"post_id":55234771,"comment_id":97204978,"body_markdown":"What does `RemovalHandler` do?","body":"What does <code>RemovalHandler</code> do?"},{"owner":{"account_id":3334422,"reputation":612,"user_id":2802446,"display_name":"G.G."},"score":0,"creation_date":1552982773,"post_id":55234771,"comment_id":97205429,"body_markdown":"@Ben Manes You understood my question correctly. You are suggesting to use  caffeine but I read its  documentation and  cleanup policy looks  completely similar to Guava cache: https://github.com/ben-manes/caffeine/wiki/Cleanup\n\nOn a side note, I just noticed you are the same Ben who worked on caffeine development. :)","body":"@Ben Manes You understood my question correctly. You are suggesting to use  caffeine but I read its  documentation and  cleanup policy looks  completely similar to Guava cache: <a href=\"https://github.com/ben-manes/caffeine/wiki/Cleanup\" rel=\"nofollow noreferrer\">github.com/ben-manes/caffeine/wiki/Cleanup</a>  On a side note, I just noticed you are the same Ben who worked on caffeine development. :)"},{"owner":{"account_id":3334422,"reputation":612,"user_id":2802446,"display_name":"G.G."},"score":0,"creation_date":1552982826,"post_id":55234771,"comment_id":97205456,"body_markdown":"@shmosel: RemovalHandler do some clean-up work e.g. closing open subscription from where I am getting data to populate cache.","body":"@shmosel: RemovalHandler do some clean-up work e.g. closing open subscription from where I am getting data to populate cache."},{"owner":{"account_id":10326,"reputation":9293,"user_id":19450,"display_name":"Ben Manes"},"score":1,"creation_date":1552982877,"post_id":55234771,"comment_id":97205483,"body_markdown":"I also worked on Guava’s so I know its limitations &#128512;. You should look at https://github.com/ben-manes/caffeine/wiki/Writer","body":"I also worked on Guava’s so I know its limitations 😀. You should look at <a href=\"https://github.com/ben-manes/caffeine/wiki/Writer\" rel=\"nofollow noreferrer\">github.com/ben-manes/caffeine/wiki/Writer</a>"},{"owner":{"account_id":3334422,"reputation":612,"user_id":2802446,"display_name":"G.G."},"score":0,"creation_date":1552984528,"post_id":55234771,"comment_id":97206320,"body_markdown":"@Ben Manes: Cool, thanks. I will take  a look  at Caffeine :)","body":"@Ben Manes: Cool, thanks. I will take  a look  at Caffeine :)"}],"answers":[{"tags":[],"owner":{"account_id":6764653,"reputation":96,"user_id":5296986,"display_name":"Aniket Nandan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677057482,"creation_date":1677057482,"answer_id":75530504,"question_id":55234771,"body_markdown":"I know its being so late to give reply to this thread, but I have some findings which may help others. Recently I am doing work with CacheBuilder and I am using Guava library (25.1) for my implementaion.\r\n\r\nAs mentioned by @G.G. that the removal operation and loading operations are being done in two separate thread due to which race condition is appearing, I have seen that Guava cache actually runs these two methods synchronously. i.e on query with expired key, cache will first call this removal listener and then only it comes to the main thread. Here is the sample code -\r\n\r\n  \r\n\t\r\n\tprivate LoadingCache&lt;String, String&gt; cache;\r\n\t\r\n\tpublic static void main(String[] args) {\r\n\t\tCacheBuilderDemo2 cbd = new CacheBuilderDemo2();\r\n\t\t\r\n\t\tRemovalListener&lt;String, String&gt; listener = new RemovalListener&lt;String, String&gt;() {\r\n\t        @Override\r\n\t        public void onRemoval(RemovalNotification&lt;String, String&gt; n){\r\n\t        \tSystem.out.println(&quot;Came to remove for &quot; + n.getKey());\r\n\t            if (n.wasEvicted()) {\r\n\t                String cause = n.getCause().name();\r\n\t                System.out.println(&quot;[&quot; + Thread.currentThread().getName() +&quot;]&quot; + &quot;Removal &quot; + cause);\r\n\t                cbd.cache.invalidate(n.getKey());\r\n\t                System.out.println(&quot;[&quot; + Thread.currentThread().getName() +&quot;]&quot; + &quot;Invalidate happened...&quot;);\r\n\t            }\r\n\t        }\r\n\t    };\r\n\t\t\r\n\t\t\r\n\t\tCustomCacheLoader cL = cbd.new CustomCacheLoader();\r\n\t\tcbd.cache = CacheBuilder\r\n\t\t\t\t.newBuilder()\r\n\t\t\t\t.expireAfterAccess(50, TimeUnit.MILLISECONDS)\r\n\t\t\t\t.removalListener(listener)\r\n\t\t\t\t.build(cL);\r\n\t\t\r\n\t\tcbd.cache.put(&quot;a&quot;, &quot;Old value for a&quot;);\r\n\t\ttry {\r\n\t\t\tSystem.out.println(cbd.cache.get(&quot;a&quot;));\r\n\t\t\tThread.sleep(100);\r\n\r\n\t\t\tSystem.out.println(cbd.cache.get(&quot;a&quot;));\r\n\t\t} catch (ExecutionException | InterruptedException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n\t\r\n\tprivate class CustomCacheLoader extends CacheLoader&lt;String, String&gt; {\r\n\r\n\t\t@Override\r\n\t\tpublic String load(String key) throws Exception {\r\n\t\t\tSystem.out.println(&quot;[&quot; + Thread.currentThread().getName() +&quot;]&quot; + &quot;Came to fetch... &quot; + key);\r\n\t\t\treturn &quot;New value for &quot; + key;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\nAnd following is the response  - \r\n\r\n    Old value for a\r\n    Came to remove for a\r\n    [main]Removal EXPIRED\r\n    [main]Invalidate happened...\r\n    [main]Came to fetch... a\r\n    New value for a\r\n\r\nThis behavioral difference could be due to the version mismatch. Thanks for the read .\r\n\r\n","title":"Google guava LoadingCache: when should cache.cleanup() be called","body":"<p>I know its being so late to give reply to this thread, but I have some findings which may help others. Recently I am doing work with CacheBuilder and I am using Guava library (25.1) for my implementaion.</p>\n<p>As mentioned by @G.G. that the removal operation and loading operations are being done in two separate thread due to which race condition is appearing, I have seen that Guava cache actually runs these two methods synchronously. i.e on query with expired key, cache will first call this removal listener and then only it comes to the main thread. Here is the sample code -</p>\n<pre><code>private LoadingCache&lt;String, String&gt; cache;\n\npublic static void main(String[] args) {\n    CacheBuilderDemo2 cbd = new CacheBuilderDemo2();\n    \n    RemovalListener&lt;String, String&gt; listener = new RemovalListener&lt;String, String&gt;() {\n        @Override\n        public void onRemoval(RemovalNotification&lt;String, String&gt; n){\n            System.out.println(&quot;Came to remove for &quot; + n.getKey());\n            if (n.wasEvicted()) {\n                String cause = n.getCause().name();\n                System.out.println(&quot;[&quot; + Thread.currentThread().getName() +&quot;]&quot; + &quot;Removal &quot; + cause);\n                cbd.cache.invalidate(n.getKey());\n                System.out.println(&quot;[&quot; + Thread.currentThread().getName() +&quot;]&quot; + &quot;Invalidate happened...&quot;);\n            }\n        }\n    };\n    \n    \n    CustomCacheLoader cL = cbd.new CustomCacheLoader();\n    cbd.cache = CacheBuilder\n            .newBuilder()\n            .expireAfterAccess(50, TimeUnit.MILLISECONDS)\n            .removalListener(listener)\n            .build(cL);\n    \n    cbd.cache.put(&quot;a&quot;, &quot;Old value for a&quot;);\n    try {\n        System.out.println(cbd.cache.get(&quot;a&quot;));\n        Thread.sleep(100);\n\n        System.out.println(cbd.cache.get(&quot;a&quot;));\n    } catch (ExecutionException | InterruptedException e) {\n        e.printStackTrace();\n    }\n}\n\nprivate class CustomCacheLoader extends CacheLoader&lt;String, String&gt; {\n\n    @Override\n    public String load(String key) throws Exception {\n        System.out.println(&quot;[&quot; + Thread.currentThread().getName() +&quot;]&quot; + &quot;Came to fetch... &quot; + key);\n        return &quot;New value for &quot; + key;\n    }\n\n}\n</code></pre>\n<p>And following is the response  -</p>\n<pre><code>Old value for a\nCame to remove for a\n[main]Removal EXPIRED\n[main]Invalidate happened...\n[main]Came to fetch... a\nNew value for a\n</code></pre>\n<p>This behavioral difference could be due to the version mismatch. Thanks for the read .</p>\n"}],"owner":{"account_id":3334422,"reputation":612,"user_id":2802446,"display_name":"G.G."},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":960,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1677057482,"creation_date":1552976428,"question_id":55234771,"body_markdown":"I am using LoadingCache in my project.I have  configured a RemovalListener  and CahceLoader  for the cache.\r\n\r\n\t\tLoadingCache&lt;Key, value&gt; cache = cache = (LoadingCache&lt;Key, value&gt;) CacheBuilder\r\n\t\t\t\t.newBuilder().initialCapacity(50).maximumSize(500).expireAfterAccess(4, HOURS)\r\n\t\t\t\t.removalListener(new RemovalHander())\r\n\t\t\t\t.build(new CacheLoader&lt;Key, value&gt;() {\r\n\t\t\t\t\t@Override\r\n\t\t\t\t\tpublic Value load(Key request) {\r\n\t\t\t\t\t\treturn loadCache(request);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t});\r\n\r\nI am facing concurrency issue with this cache in below scenario:\r\n\r\n - On request for Key1, cache is populated with Value1\r\n - Cache is not accessed for Key1 for next 4 hours \r\n - When 4 hours are passed, Key1 is marked  as expired \r\n - After  4  hours, request comes  to access Key1 \r\n - On request for Key1(received  in **request-thread**) after 4 \r\n   hours,LoadingCache finds Key1 as  expired so it initiates a new thread(call \r\n   it **cleanup-thread)** to  do cleanup of cache for Key1  and in **request- \r\n   thread** it tries load the fresh data for Key1\r\n - As both operations remove/fetch are performed for same key i.e. Key1, \r\n   **request-thread** finds there is already an entry while **cleanup-thread** \r\n   is  removing the data.\r\n\r\nSo, in short,  RemovalHander races with the CacheLoader for Key1. \r\nI want to avoid  above case and thinking to call `cleanup()`  method of `LoadingCache`.\r\n\r\nCan you please suggest on following points :\r\n\r\n1. When should the cleanup() method be called? Periodically using some **SchedulerService** or on every request for an entry in cache?\r\n2. Is there any better way to solve  above problem?\r\n3. Is their any better replacement of GuavaCache?\r\n\r\n\r\n  ","title":"Google guava LoadingCache: when should cache.cleanup() be called","body":"<p>I am using LoadingCache in my project.I have  configured a RemovalListener  and CahceLoader  for the cache.</p>\n\n<pre><code>    LoadingCache&lt;Key, value&gt; cache = cache = (LoadingCache&lt;Key, value&gt;) CacheBuilder\n            .newBuilder().initialCapacity(50).maximumSize(500).expireAfterAccess(4, HOURS)\n            .removalListener(new RemovalHander())\n            .build(new CacheLoader&lt;Key, value&gt;() {\n                @Override\n                public Value load(Key request) {\n                    return loadCache(request);\n                }\n\n            });\n</code></pre>\n\n<p>I am facing concurrency issue with this cache in below scenario:</p>\n\n<ul>\n<li>On request for Key1, cache is populated with Value1</li>\n<li>Cache is not accessed for Key1 for next 4 hours </li>\n<li>When 4 hours are passed, Key1 is marked  as expired </li>\n<li>After  4  hours, request comes  to access Key1 </li>\n<li>On request for Key1(received  in <strong>request-thread</strong>) after 4 \nhours,LoadingCache finds Key1 as  expired so it initiates a new thread(call \nit <strong>cleanup-thread)</strong> to  do cleanup of cache for Key1  and in <strong>request- \nthread</strong> it tries load the fresh data for Key1</li>\n<li>As both operations remove/fetch are performed for same key i.e. Key1, \n<strong>request-thread</strong> finds there is already an entry while <strong>cleanup-thread</strong> \nis  removing the data.</li>\n</ul>\n\n<p>So, in short,  RemovalHander races with the CacheLoader for Key1. \nI want to avoid  above case and thinking to call <code>cleanup()</code>  method of <code>LoadingCache</code>.</p>\n\n<p>Can you please suggest on following points :</p>\n\n<ol>\n<li>When should the cleanup() method be called? Periodically using some <strong>SchedulerService</strong> or on every request for an entry in cache?</li>\n<li>Is there any better way to solve  above problem?</li>\n<li>Is their any better replacement of GuavaCache?</li>\n</ol>\n"},{"tags":["java","spring","spring-boot","jaeger","opentracing"],"owner":{"account_id":2990507,"reputation":4955,"user_id":2538180,"accept_rate":53,"display_name":"emoleumassi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":280,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1677057432,"creation_date":1677057432,"question_id":75530490,"body_markdown":"I have a Spring boot application and i want to trace the webClient request with jaeger:\r\n\r\n```\r\nimplementation &quot;io.micrometer:micrometer-registry-prometheus:1.10.3&quot;\r\nimplementation &quot;org.springframework.boot:spring-boot-starter-web:2.6.6&quot;\r\nimplementation &quot;org.springframework.boot:spring-boot-starter-webflux:2.6.6&quot;\r\nimplementation &#39;io.opentracing.contrib:opentracing-spring-jaeger-web-starter:3.3.1&#39;\r\nimplementation &quot;io.opentracing.contrib:opentracing-jdbc:0.2.15&quot;\r\n```\r\n\r\nMy application.yml:\r\n```\r\nserver:\r\n  port: 4502\r\nspring:\r\n   application:\r\n    name: myServiceName\r\n  datasource:\r\n    url: jdbc:tracing:sqlserver:xxxx\r\n    username: sssr\r\n    password: blabla\r\n    driver-class-name: io.opentracing.contrib.jdbc.TracingDriver \r\n\r\nopentracing:\r\n  jaeger:\r\n    enabled: true\r\n    service-name: myServiceName\r\n    log-spans: true\r\n    udp-sender:\r\n      port: 31683\r\n      host: a.b.asd.wq\r\n    http-sender:\r\n      url: http://a.b.asd.wq:31268/api/traces\r\n```\r\n\r\nmy webClient request:\r\n```\r\nString response = webClient.get()\r\n                                    .uri(url)\r\n                                    .retrieve()\r\n                                    .bodyToMono(String.class)\r\n                                    .block();\r\n```\r\n\r\ni send a request to `http://127.0.0.1:4502/` and i got some spans reported \r\n```\r\n2023.02.22 10:02:54.350 [http-nio-4502-exec-1] INFO  i.j.i.reporters.LoggingReporter:43 - Span reported: 7d0aef60d1f97f02:7d0aef60d1f97f02:0:1 - GET\r\n```\r\n\r\nThe Jaeger UI on the host can the webClient request not reported. \r\n","title":"spring boot jaeger won&#39;t trace webClient request","body":"<p>I have a Spring boot application and i want to trace the webClient request with jaeger:</p>\n<pre><code>implementation &quot;io.micrometer:micrometer-registry-prometheus:1.10.3&quot;\nimplementation &quot;org.springframework.boot:spring-boot-starter-web:2.6.6&quot;\nimplementation &quot;org.springframework.boot:spring-boot-starter-webflux:2.6.6&quot;\nimplementation 'io.opentracing.contrib:opentracing-spring-jaeger-web-starter:3.3.1'\nimplementation &quot;io.opentracing.contrib:opentracing-jdbc:0.2.15&quot;\n</code></pre>\n<p>My application.yml:</p>\n<pre><code>server:\n  port: 4502\nspring:\n   application:\n    name: myServiceName\n  datasource:\n    url: jdbc:tracing:sqlserver:xxxx\n    username: sssr\n    password: blabla\n    driver-class-name: io.opentracing.contrib.jdbc.TracingDriver \n\nopentracing:\n  jaeger:\n    enabled: true\n    service-name: myServiceName\n    log-spans: true\n    udp-sender:\n      port: 31683\n      host: a.b.asd.wq\n    http-sender:\n      url: http://a.b.asd.wq:31268/api/traces\n</code></pre>\n<p>my webClient request:</p>\n<pre><code>String response = webClient.get()\n                                    .uri(url)\n                                    .retrieve()\n                                    .bodyToMono(String.class)\n                                    .block();\n</code></pre>\n<p>i send a request to <code>http://127.0.0.1:4502/</code> and i got some spans reported</p>\n<pre><code>2023.02.22 10:02:54.350 [http-nio-4502-exec-1] INFO  i.j.i.reporters.LoggingReporter:43 - Span reported: 7d0aef60d1f97f02:7d0aef60d1f97f02:0:1 - GET\n</code></pre>\n<p>The Jaeger UI on the host can the webClient request not reported.</p>\n"},{"tags":["java","docker","pkcs#11"],"comments":[{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1677057569,"post_id":75530420,"comment_id":133260420,"body_markdown":"You’ll need to compile the library for Linux.","body":"You’ll need to compile the library for Linux."},{"owner":{"account_id":13863020,"reputation":137043,"user_id":10008173,"display_name":"David Maze"},"score":0,"creation_date":1677063591,"post_id":75530420,"comment_id":133262099,"body_markdown":"...a `.dll` file sounds like a Windows dynamically-linked library, but in a Linux container you&#39;d need a Linux `.so` shared object file.","body":"...a <code>.dll</code> file sounds like a Windows dynamically-linked library, but in a Linux container you&#39;d need a Linux <code>.so</code> shared object file."},{"owner":{"account_id":9013374,"reputation":11,"user_id":6717131,"display_name":"WinLord"},"score":0,"creation_date":1677117736,"post_id":75530420,"comment_id":133276534,"body_markdown":"Thanks for help. I change .so shared object file and program run ok.","body":"Thanks for help. I change .so shared object file and program run ok."}],"owner":{"account_id":9013374,"reputation":11,"user_id":6717131,"display_name":"WinLord"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":126,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677057381,"creation_date":1677057110,"question_id":75530420,"body_markdown":"My code java has a config to call dll file.\r\nAfter deploy used Docker, I also push this file to container.\r\nBut when run, Docker has error without everything ok in local.\r\n\r\n```\r\nCaused by: java.io.IOException: /cs_pkcs11_R2.dll: invalid ELF header/cs_pkcs11_R2.dll\r\nat sun.security.pkcs11.wrapper.PKCS11.connect(Native Method)\r\nat sun.security.pkcs11.wrapper.PKCS11.&lt;init&gt;(PKCS11.java:144)\r\nat sun.security.pkcs11.wrapper.PKCS11.getInstance(PKCS11.java:157)\r\nat sun.security.pkcs11.SunPKCS11.&lt;init&gt;(SunPKCS11.java:313)\r\n```\r\n\r\nMy code call this file\r\n\r\n```\r\nStringBuilder builder = new StringBuilder();\r\nbuilder.append(&quot;name=&quot; + nameLib);\r\nbuilder.append(System.getProperty(&quot;line.separator&quot;));\r\nbuilder.append(&quot;library=\\&quot;&quot; + library + &quot;\\&quot;&quot;);&lt;- path to dll file\r\nbuilder.append(System.getProperty(&quot;line.separator&quot;));\r\nbuilder.append(&quot;slot=&quot; + slot);\t \t   \r\nByteArrayInputStream bais = new ByteArrayInputStream(builder.toString().getBytes());\r\nprovider = new SunPKCS11(bais); &lt;- Exception here\r\nSecurity.addProvider(provider);\r\n```","title":"Deploy java springboot to Docker has error invalid ELF header","body":"<p>My code java has a config to call dll file.\nAfter deploy used Docker, I also push this file to container.\nBut when run, Docker has error without everything ok in local.</p>\n<pre><code>Caused by: java.io.IOException: /cs_pkcs11_R2.dll: invalid ELF header/cs_pkcs11_R2.dll\nat sun.security.pkcs11.wrapper.PKCS11.connect(Native Method)\nat sun.security.pkcs11.wrapper.PKCS11.&lt;init&gt;(PKCS11.java:144)\nat sun.security.pkcs11.wrapper.PKCS11.getInstance(PKCS11.java:157)\nat sun.security.pkcs11.SunPKCS11.&lt;init&gt;(SunPKCS11.java:313)\n</code></pre>\n<p>My code call this file</p>\n<pre><code>StringBuilder builder = new StringBuilder();\nbuilder.append(&quot;name=&quot; + nameLib);\nbuilder.append(System.getProperty(&quot;line.separator&quot;));\nbuilder.append(&quot;library=\\&quot;&quot; + library + &quot;\\&quot;&quot;);&lt;- path to dll file\nbuilder.append(System.getProperty(&quot;line.separator&quot;));\nbuilder.append(&quot;slot=&quot; + slot);        \nByteArrayInputStream bais = new ByteArrayInputStream(builder.toString().getBytes());\nprovider = new SunPKCS11(bais); &lt;- Exception here\nSecurity.addProvider(provider);\n</code></pre>\n"},{"tags":["java","android","kotlin","swing","sockets"],"comments":[{"owner":{"account_id":202054,"reputation":23899,"user_id":448875,"display_name":"broot"},"score":1,"creation_date":1677050994,"post_id":75529033,"comment_id":133258735,"body_markdown":"Do you run the Java server on PC and the Kotlin client in the Android device? If so, why do you connect to `localhost`?","body":"Do you run the Java server on PC and the Kotlin client in the Android device? If so, why do you connect to <code>localhost</code>?"},{"owner":{"account_id":25062339,"reputation":3,"user_id":18917065,"display_name":"Ale"},"score":0,"creation_date":1677051576,"post_id":75529033,"comment_id":133258866,"body_markdown":"no. I run both the java server and the android studio on my pc","body":"no. I run both the java server and the android studio on my pc"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1677054397,"post_id":75529033,"comment_id":133259597,"body_markdown":"??? And where is your Android client app running?","body":"??? And where is your Android client app running?"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1677054479,"post_id":75529033,"comment_id":133259613,"body_markdown":"`how to do a java swing server` AND `java server:`. We conclude that you have two servers. Why two? And where are they running?","body":"<code>how to do a java swing server</code> AND <code>java server:</code>. We conclude that you have two servers. Why two? And where are they running?"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1677054532,"post_id":75529033,"comment_id":133259625,"body_markdown":"`the client (kotlin) it&#39;s not sending the text. ` Before beeing able to send anything there should be a connection. You are not telling is a connection is established.","body":"<code>the client (kotlin) it&#39;s not sending the text. </code> Before beeing able to send anything there should be a connection. You are not telling is a connection is established."}],"answers":[{"tags":[],"owner":{"account_id":27793354,"reputation":65,"user_id":21219394,"display_name":"ProgramExpert"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677057322,"creation_date":1677056363,"answer_id":75530273,"question_id":75529033,"body_markdown":"I guess you&#39;re executing the Kotlin code on an android emulator. The Problem is that the localhost from your emulator is not the localhost from your PC.\r\n\r\nYou should try 10.0.2.2 according to the official android studio documentation:\r\nhttps://developer.android.com/studio/run/emulator-networking .","title":"how to do a java swing server using sockets with a kotlin client?","body":"<p>I guess you're executing the Kotlin code on an android emulator. The Problem is that the localhost from your emulator is not the localhost from your PC.</p>\n<p>You should try 10.0.2.2 according to the official android studio documentation:\n<a href=\"https://developer.android.com/studio/run/emulator-networking\" rel=\"nofollow noreferrer\">https://developer.android.com/studio/run/emulator-networking</a> .</p>\n"}],"owner":{"account_id":25062339,"reputation":3,"user_id":18917065,"display_name":"Ale"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":80,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1677159266,"accepted_answer_id":75530273,"answer_count":1,"score":-1,"last_activity_date":1677057322,"creation_date":1677047897,"question_id":75529033,"body_markdown":"first, it&#39;s even possible?\r\nI&#39;m trying to do an android app using kotlin that sends info, text, etc. to a java swing application using sockets. it&#39;s a class assignment so I can&#39;t change the technologies. Here&#39;s what I got so far but doesn&#39;t work, the client (kotlin) it&#39;s not sending the text. please help.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\njava server:\r\n\r\n```\r\nimport java.io.BufferedReader;\r\nimport java.io.IOException;\r\nimport java.io.InputStreamReader;\r\nimport java.net.ServerSocket;\r\nimport java.net.Socket;\r\n\r\npublic class SocketServer {\r\n    private static final int PORT = 8080;\r\n\r\n    public static void main(String[] args) {\r\n        try {\r\n            ServerSocket serverSocket = new ServerSocket(PORT);\r\n            System.out.println(&quot;Server started on port &quot; + PORT);\r\n\r\n            while (true) {\r\n                Socket socket = serverSocket.accept();\r\n                BufferedReader input = new BufferedReader(new InputStreamReader(socket.getInputStream()));\r\n                String message = input.readLine();\r\n                System.out.println(&quot;Message received: &quot; + message);\r\n            }\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nkotlin client:\r\n\r\n```\r\nimport android.support.v7.app.AppCompatActivity\r\nimport android.os.Bundle\r\nimport java.io.PrintWriter\r\nimport java.net.Socket\r\n\r\n\r\n\r\n\r\nclass MainActivity : AppCompatActivity() {\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        setContentView(R.layout.activity_main)\r\n        main()\r\n    }\r\n\r\n    fun main() {\r\n        val message = &quot;Hola desde Kotlin!&quot;\r\n        val socket = Socket(&quot;localhost&quot;, 8080)\r\n        val output = PrintWriter(socket.getOutputStream(), true)\r\n        output.println(message)\r\n        socket.close()\r\n    }\r\n\r\n\r\n}```","title":"how to do a java swing server using sockets with a kotlin client?","body":"<p>first, it's even possible?\nI'm trying to do an android app using kotlin that sends info, text, etc. to a java swing application using sockets. it's a class assignment so I can't change the technologies. Here's what I got so far but doesn't work, the client (kotlin) it's not sending the text. please help.</p>\n<p>java server:</p>\n<pre><code>import java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.net.ServerSocket;\nimport java.net.Socket;\n\npublic class SocketServer {\n    private static final int PORT = 8080;\n\n    public static void main(String[] args) {\n        try {\n            ServerSocket serverSocket = new ServerSocket(PORT);\n            System.out.println(&quot;Server started on port &quot; + PORT);\n\n            while (true) {\n                Socket socket = serverSocket.accept();\n                BufferedReader input = new BufferedReader(new InputStreamReader(socket.getInputStream()));\n                String message = input.readLine();\n                System.out.println(&quot;Message received: &quot; + message);\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>kotlin client:</p>\n<pre><code>import android.support.v7.app.AppCompatActivity\nimport android.os.Bundle\nimport java.io.PrintWriter\nimport java.net.Socket\n\n\n\n\nclass MainActivity : AppCompatActivity() {\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        main()\n    }\n\n    fun main() {\n        val message = &quot;Hola desde Kotlin!&quot;\n        val socket = Socket(&quot;localhost&quot;, 8080)\n        val output = PrintWriter(socket.getOutputStream(), true)\n        output.println(message)\n        socket.close()\n    }\n\n\n}```\n</code></pre>\n"},{"tags":["java","rest","jersey","jax-rs"],"comments":[{"owner":{"account_id":281082,"reputation":11615,"user_id":577181,"accept_rate":20,"display_name":"John Ament"},"score":0,"creation_date":1412591665,"post_id":26207252,"comment_id":41110714,"body_markdown":"How are you building?","body":"How are you building?"},{"owner":{"account_id":1573092,"reputation":1342,"user_id":1460321,"accept_rate":21,"display_name":"Fahad Mullaji"},"score":0,"creation_date":1412601785,"post_id":26207252,"comment_id":41115901,"body_markdown":"I followed http://www.vogella.com/tutorials/REST/article.html . He has not mentioned anything about building service by MAVEN or ANT. Should i be using anything for building. Thanks for replying.","body":"I followed <a href=\"http://www.vogella.com/tutorials/REST/article.html\" rel=\"nofollow noreferrer\">vogella.com/tutorials/REST/article.html</a> . He has not mentioned anything about building service by MAVEN or ANT. Should i be using anything for building. Thanks for replying."}],"answers":[{"comments":[{"owner":{"account_id":105902,"reputation":3968,"user_id":282345,"accept_rate":88,"display_name":"asgs"},"score":9,"creation_date":1466868102,"post_id":29137657,"comment_id":63500076,"body_markdown":"Thank you! Others, don&#39;t forget to add the `version`.","body":"Thank you! Others, don&#39;t forget to add the <code>version</code>."},{"owner":{"account_id":1227737,"reputation":853,"user_id":1192987,"display_name":"Nikita Bosik"},"score":7,"creation_date":1467551666,"post_id":29137657,"comment_id":63767523,"body_markdown":"Pick the latest `version`: https://mvnrepository.com/artifact/org.glassfish.jersey.media/jersey-media-json-jackson","body":"Pick the latest <code>version</code>: <a href=\"https://mvnrepository.com/artifact/org.glassfish.jersey.media/jersey-media-json-jackson\" rel=\"nofollow noreferrer\">mvnrepository.com/artifact/org.glassfish.jersey.media/&hellip;</a>"},{"owner":{"account_id":4833750,"reputation":381,"user_id":3901172,"accept_rate":83,"display_name":"orange14"},"score":19,"creation_date":1500040492,"post_id":29137657,"comment_id":77180608,"body_markdown":"Why did this solution work. Why should I just put this into my pom blindly.","body":"Why did this solution work. Why should I just put this into my pom blindly."},{"owner":{"account_id":2467050,"reputation":1176,"user_id":2855798,"accept_rate":88,"display_name":"Jakob"},"score":1,"creation_date":1504788527,"post_id":29137657,"comment_id":79155275,"body_markdown":"Note that Glassfish/Payara uses MOXy as JSON serializer by default and this overwrites the default behavior","body":"Note that Glassfish/Payara uses MOXy as JSON serializer by default and this overwrites the default behavior"},{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":2,"creation_date":1552851641,"post_id":29137657,"comment_id":97158189,"body_markdown":"The OP specifically said they are not using Maven. The _correct_ answer to the question would show all the _jars_ that are needed. And then add as an extra point for Maven users, they could use this dependency. Then also explain why these are needed, i.e. explaining about entity providers.","body":"The OP specifically said they are not using Maven. The <i>correct</i> answer to the question would show all the <i>jars</i> that are needed. And then add as an extra point for Maven users, they could use this dependency. Then also explain why these are needed, i.e. explaining about entity providers."}],"tags":[],"owner":{"account_id":422244,"reputation":1337,"user_id":800903,"display_name":"Alicia Tang"},"comment_count":5,"down_vote_count":2,"up_vote_count":134,"is_accepted":false,"score":132,"last_activity_date":1426742240,"creation_date":1426742240,"answer_id":29137657,"question_id":26207252,"body_markdown":"I was able to fix it by install jersey-media-json-jackson\r\n\r\nAdd the dependency to pom.xml\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.glassfish.jersey.media&lt;/groupId&gt;\r\n      &lt;artifactId&gt;jersey-media-json-jackson&lt;/artifactId&gt;\r\n      &lt;scope&gt;runtime&lt;/scope&gt;\r\n    &lt;/dependency&gt;","title":"MessageBodyWriter not found for media type=application/json","body":"<p>I was able to fix it by install jersey-media-json-jackson</p>\n\n<p>Add the dependency to pom.xml</p>\n\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.glassfish.jersey.media&lt;/groupId&gt;\n  &lt;artifactId&gt;jersey-media-json-jackson&lt;/artifactId&gt;\n  &lt;scope&gt;runtime&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3510364,"reputation":2030,"user_id":2934827,"accept_rate":85,"display_name":"jsh6303"},"score":0,"creation_date":1438714893,"post_id":31035861,"comment_id":51559787,"body_markdown":"I think I am having the same problem I need to fix but I am not sure &quot;your.other.package.here,&quot; refers to?","body":"I think I am having the same problem I need to fix but I am not sure &quot;your.other.package.here,&quot; refers to?"},{"owner":{"display_name":"user3063836"},"score":0,"creation_date":1438715189,"post_id":31035861,"comment_id":51559938,"body_markdown":"The name of the package or packages where your Java service controllers and end points are defined. For example, I could have a &quot;login&quot; package with a class inside that routes for logins. So &quot;your.other.package.here&quot; would be &quot;login&quot;","body":"The name of the package or packages where your Java service controllers and end points are defined. For example, I could have a &quot;login&quot; package with a class inside that routes for logins. So &quot;your.other.package.here&quot; would be &quot;login&quot;"},{"owner":{"account_id":359446,"reputation":1056,"user_id":700858,"accept_rate":84,"display_name":"Mouhammed Soueidane"},"score":1,"creation_date":1454800441,"post_id":31035861,"comment_id":58209050,"body_markdown":"You sir deserve a trophy. Thank you for mentioning the part: your.other.package.here,com.fasterxml.jackson.jaxrs.json\nIt was exactly what I was missing.","body":"You sir deserve a trophy. Thank you for mentioning the part: your.other.package.here,com.fasterxml.jackson.jaxrs.json It was exactly what I was missing."},{"owner":{"account_id":2255135,"reputation":2670,"user_id":1986477,"accept_rate":82,"display_name":"Ismail Sahin"},"score":1,"creation_date":1466678026,"post_id":31035861,"comment_id":63422050,"body_markdown":"thank you so much. you saved next week( I spend two days to upgrade jersey from 1 to 2 with weblogic)","body":"thank you so much. you saved next week( I spend two days to upgrade jersey from 1 to 2 with weblogic)"},{"owner":{"account_id":43031,"reputation":10689,"user_id":125601,"accept_rate":90,"display_name":"Robert Fraser"},"score":1,"creation_date":1496183378,"post_id":31035861,"comment_id":75553626,"body_markdown":"This is what worked for me. The code version of it is something like: `ResourceConfig jerseyConfig = new ResourceConfig(); jerseyConfig.packages(&quot;com.dataminr.eawatcher&quot;, &quot;com.fasterxml.jackson.jaxrs.json&quot;);\n ServletContainer servletContainer = new ServletContainer(jerseyConfig);`","body":"This is what worked for me. The code version of it is something like: <code>ResourceConfig jerseyConfig = new ResourceConfig(); jerseyConfig.packages(&quot;com.dataminr.eawatcher&quot;, &quot;com.fasterxml.jackson.jaxrs.json&quot;);  ServletContainer servletContainer = new ServletContainer(jerseyConfig);</code>"},{"owner":{"account_id":1679442,"reputation":1721,"user_id":1544097,"display_name":"J Steven Perry"},"score":0,"creation_date":1605030085,"post_id":31035861,"comment_id":114526058,"body_markdown":"Still struggling with a Weblogic 12.1 to 12.2 upgrade, this is exactly what I needed!","body":"Still struggling with a Weblogic 12.1 to 12.2 upgrade, this is exactly what I needed!"}],"tags":[],"owner":{"display_name":"user3063836"},"comment_count":6,"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1435259264,"creation_date":1435175972,"answer_id":31035861,"question_id":26207252,"body_markdown":"I was in the same situation where  \r\n- I was **not** using Maven or Ant,  \r\n- I finished [this Vogella tutorial on Jersey](http://www.vogella.com/tutorials/REST/article.html),  \r\n- and I was getting the `MessageBodyWriter` error when trying to use `@Produces(MediaType.APPLICATION_JSON)`.\r\n\r\n[This answer](https://stackoverflow.com/a/29136934/3063836) by @peeskillet solves the problem - **you have to use the Jackson *.jar files that are available from [the FasterXML Jackson Download page](http://wiki.fasterxml.com/JacksonDownload).** You&#39;ll need the `core` files as well as the `jaxrs` files.\r\n\r\nI added them to my `WebContent/WEB-INF/lib` folder where I have my Jersey *.jar files per the above tutorial, and made the small change to the web.xml file below (again, as originally shared by @peeskillet):\r\n\r\n    &lt;param-name&gt;jersey.config.server.provider.packages&lt;/param-name&gt;\r\n    &lt;param-value&gt;\r\n        your.other.package.here, com.fasterxml.jackson.jaxrs.json \r\n    &lt;/param-value&gt;\r\n\r\nThe important part being `com.fasterxml.jackson.jaxrs.json`.","title":"MessageBodyWriter not found for media type=application/json","body":"<p>I was in the same situation where<br>\n- I was <strong>not</strong> using Maven or Ant,<br>\n- I finished <a href=\"http://www.vogella.com/tutorials/REST/article.html\" rel=\"noreferrer\">this Vogella tutorial on Jersey</a>,<br>\n- and I was getting the <code>MessageBodyWriter</code> error when trying to use <code>@Produces(MediaType.APPLICATION_JSON)</code>.</p>\n\n<p><a href=\"https://stackoverflow.com/a/29136934/3063836\">This answer</a> by @peeskillet solves the problem - <strong>you have to use the Jackson *.jar files that are available from <a href=\"http://wiki.fasterxml.com/JacksonDownload\" rel=\"noreferrer\">the FasterXML Jackson Download page</a>.</strong> You'll need the <code>core</code> files as well as the <code>jaxrs</code> files.</p>\n\n<p>I added them to my <code>WebContent/WEB-INF/lib</code> folder where I have my Jersey *.jar files per the above tutorial, and made the small change to the web.xml file below (again, as originally shared by @peeskillet):</p>\n\n<pre><code>&lt;param-name&gt;jersey.config.server.provider.packages&lt;/param-name&gt;\n&lt;param-value&gt;\n    your.other.package.here, com.fasterxml.jackson.jaxrs.json \n&lt;/param-value&gt;\n</code></pre>\n\n<p>The important part being <code>com.fasterxml.jackson.jaxrs.json</code>.</p>\n"},{"comments":[{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1552851868,"post_id":32858160,"comment_id":97158246,"body_markdown":"Minus 1 as the OP specifically says they are not using Maven.","body":"Minus 1 as the OP specifically says they are not using Maven."}],"tags":[],"owner":{"account_id":7038286,"reputation":179,"user_id":5391519,"display_name":"Saurabh Thakur"},"comment_count":1,"down_vote_count":1,"up_vote_count":17,"is_accepted":false,"score":16,"last_activity_date":1443589441,"creation_date":1443589441,"answer_id":32858160,"question_id":26207252,"body_markdown":"Uncommenting the below code helped \r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.glassfish.jersey.media&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jersey-media-moxy&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\nwhich was present in pom.xml in my maven based project resolved this error for me.","title":"MessageBodyWriter not found for media type=application/json","body":"<p>Uncommenting the below code helped </p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.glassfish.jersey.media&lt;/groupId&gt;\n    &lt;artifactId&gt;jersey-media-moxy&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>which was present in pom.xml in my maven based project resolved this error for me.</p>\n"},{"comments":[{"owner":{"account_id":4100399,"reputation":2449,"user_id":3366100,"accept_rate":50,"display_name":"asad.qazi"},"score":5,"creation_date":1447762297,"post_id":33756603,"comment_id":55280781,"body_markdown":"I&#39;ve the same issue with my code and is resolved by adding an empty constructor","body":"I&#39;ve the same issue with my code and is resolved by adding an empty constructor"},{"owner":{"account_id":1908641,"reputation":517,"user_id":1723006,"accept_rate":60,"display_name":"Matthew Oakley"},"score":2,"creation_date":1480332000,"post_id":33756603,"comment_id":68903071,"body_markdown":"Brilliant! Why this is not the accepted answer is beyond me.","body":"Brilliant! Why this is not the accepted answer is beyond me."},{"owner":{"account_id":1482852,"reputation":742,"user_id":1391777,"accept_rate":80,"display_name":"dkonayuki"},"score":1,"creation_date":1489415424,"post_id":33756603,"comment_id":72647411,"body_markdown":"this should be the correct answer. Anyway, do you mind explaining why we need an empty constructor here?","body":"this should be the correct answer. Anyway, do you mind explaining why we need an empty constructor here?"},{"owner":{"account_id":1125582,"reputation":2543,"user_id":1112940,"accept_rate":82,"display_name":"tomidelucca"},"score":0,"creation_date":1489782576,"post_id":33756603,"comment_id":72839468,"body_markdown":"@dkonayuki I&#39;m not 100% sure, but the way in which I think the writer prints the object is constructing it with the empty constructor and via reflection finding all method properties and calling &quot;getX&quot; upon them. That&#39;s why if you don&#39;t have the empty constructor it doesn&#39;t work, and if you don&#39;t have getters the property in question would not be printed.","body":"@dkonayuki I&#39;m not 100% sure, but the way in which I think the writer prints the object is constructing it with the empty constructor and via reflection finding all method properties and calling &quot;getX&quot; upon them. That&#39;s why if you don&#39;t have the empty constructor it doesn&#39;t work, and if you don&#39;t have getters the property in question would not be printed."},{"owner":{"account_id":15275,"reputation":9775,"user_id":32096,"accept_rate":74,"display_name":"BlueDolphin"},"score":0,"creation_date":1496551297,"post_id":33756603,"comment_id":75703883,"body_markdown":"do we need xmlroot for json response?","body":"do we need xmlroot for json response?"},{"owner":{"account_id":4100399,"reputation":2449,"user_id":3366100,"accept_rate":50,"display_name":"asad.qazi"},"score":0,"creation_date":1496577590,"post_id":33756603,"comment_id":75709555,"body_markdown":"Yeah @xmlRootElement is for json","body":"Yeah @xmlRootElement is for json"},{"owner":{"account_id":2982780,"reputation":4981,"user_id":2532403,"accept_rate":74,"display_name":"Maximus Decimus"},"score":0,"creation_date":1499741826,"post_id":33756603,"comment_id":77023412,"body_markdown":"In my case was not necessary the @XmlRootElement. Just an empty constructor on the main class and nested classes (properties)","body":"In my case was not necessary the @XmlRootElement. Just an empty constructor on the main class and nested classes (properties)"},{"owner":{"account_id":473203,"reputation":2233,"user_id":882168,"accept_rate":0,"display_name":"D2TheC"},"score":0,"creation_date":1500041813,"post_id":33756603,"comment_id":77181518,"body_markdown":"This works for me without adding jersey-media-json-jackson","body":"This works for me without adding jersey-media-json-jackson"},{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1552851455,"post_id":33756603,"comment_id":97158135,"body_markdown":"Doesn&#39;t make any sense -1. The OP already had a no-arg constructor. It&#39;s right above the one you added.","body":"Doesn&#39;t make any sense -1. The OP already had a no-arg constructor. It&#39;s right above the one you added."}],"tags":[],"owner":{"account_id":4100399,"reputation":2449,"user_id":3366100,"accept_rate":50,"display_name":"asad.qazi"},"comment_count":9,"down_vote_count":2,"up_vote_count":65,"is_accepted":false,"score":63,"last_activity_date":1481648420,"creation_date":1447762268,"answer_id":33756603,"question_id":26207252,"body_markdown":"You&#39;ve to create empty constructor because JAX-RS initializes the classes...\r\nYour constructor must have no arguments:\r\n\r\n    @XmlRootElement\r\n    public class Student implements Serializable {\r\n    \r\n        public String first_name;\r\n        public String last_name;\r\n    \r\n        public String getFirst_name() {\r\n            return first_name;\r\n        }\r\n    \r\n        public void setFirst_name(String first_name) {\r\n            this.first_name = first_name;\r\n        }\r\n    \r\n        public String getLast_name() {\r\n            return last_name;\r\n        }\r\n    \r\n        public void setLast_name(String last_name) {\r\n            this.last_name = last_name;\r\n        }\r\n    \r\n        public Student()\r\n        {\r\n            first_name = &quot;Fahad&quot;;\r\n            last_name = &quot;Mullaji&quot;;\r\n        }\r\n   \r\n\r\n     public Student()\r\n        {\r\n        }\r\n    }","title":"MessageBodyWriter not found for media type=application/json","body":"<p>You've to create empty constructor because JAX-RS initializes the classes...\nYour constructor must have no arguments:</p>\n\n<pre><code>@XmlRootElement\npublic class Student implements Serializable {\n\n    public String first_name;\n    public String last_name;\n\n    public String getFirst_name() {\n        return first_name;\n    }\n\n    public void setFirst_name(String first_name) {\n        this.first_name = first_name;\n    }\n\n    public String getLast_name() {\n        return last_name;\n    }\n\n    public void setLast_name(String last_name) {\n        this.last_name = last_name;\n    }\n\n    public Student()\n    {\n        first_name = \"Fahad\";\n        last_name = \"Mullaji\";\n    }\n\n\n public Student()\n    {\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":18868,"reputation":82004,"user_id":43681,"accept_rate":70,"display_name":"sleske"},"score":1,"creation_date":1478272957,"post_id":34925756,"comment_id":68100814,"body_markdown":"While this probably works, it&#39;s not a very elegant solution. The work of converting the Java objects to JSON can be done by Jersey (that&#39;s the whole point of using such a framework), so don&#39;t do it yourself.","body":"While this probably works, it&#39;s not a very elegant solution. The work of converting the Java objects to JSON can be done by Jersey (that&#39;s the whole point of using such a framework), so don&#39;t do it yourself."}],"tags":[],"owner":{"account_id":3974323,"reputation":1355,"user_id":3277913,"accept_rate":0,"display_name":"sajan"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1465364990,"creation_date":1453384604,"answer_id":34925756,"question_id":26207252,"body_markdown":"I think may be you should try to convert the data to json format. It can be done by using gson lib. Try something like below. \r\n\r\nI don&#39;t know it is a best solutions or not but you could do it this way.It worked for me\r\n\r\nexample : `\r\n\r\n\t@GET\r\n\t@Produces({ MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON })\r\n\tpublic Response info(@HeaderParam(&quot;Accept&quot;) String accept) {\r\n\t\tInfo information = new Info();\r\n\t\tinformation.setInfo(&quot;Calc Application Info&quot;);\r\n\t\tSystem.out.println(accept);\r\n\t\tif (!accept.equals(MediaType.APPLICATION_JSON)) {\r\n\t\t\treturn Response.status(Status.ACCEPTED).entity(information).build();\r\n\t\t} else {\r\n\t\t\tGson jsonConverter = new GsonBuilder().create();\r\n\t\t\treturn Response.status(Status.ACCEPTED).entity(jsonConverter.toJson(information)).build();\r\n\t\t}\r\n\t}\r\n","title":"MessageBodyWriter not found for media type=application/json","body":"<p>I think may be you should try to convert the data to json format. It can be done by using gson lib. Try something like below. </p>\n\n<p>I don't know it is a best solutions or not but you could do it this way.It worked for me</p>\n\n<p>example : `</p>\n\n<pre><code>@GET\n@Produces({ MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON })\npublic Response info(@HeaderParam(\"Accept\") String accept) {\n    Info information = new Info();\n    information.setInfo(\"Calc Application Info\");\n    System.out.println(accept);\n    if (!accept.equals(MediaType.APPLICATION_JSON)) {\n        return Response.status(Status.ACCEPTED).entity(information).build();\n    } else {\n        Gson jsonConverter = new GsonBuilder().create();\n        return Response.status(Status.ACCEPTED).entity(jsonConverter.toJson(information)).build();\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5805883,"reputation":12821,"user_id":4578513,"accept_rate":15,"display_name":"AIM Digital Technologies"},"score":2,"creation_date":1490692131,"post_id":42759691,"comment_id":73214200,"body_markdown":"thanks, this worked for me. after that go to project settings and select all jar files and select add to web-inf/lib folder and rebuild. (using intellij) :)","body":"thanks, this worked for me. after that go to project settings and select all jar files and select add to web-inf/lib folder and rebuild. (using intellij) :)"},{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1552851891,"post_id":42759691,"comment_id":97158252,"body_markdown":"Minus 1 as the OP specifically says they are not using Maven.","body":"Minus 1 as the OP specifically says they are not using Maven."},{"owner":{"account_id":328375,"reputation":1972,"user_id":651288,"accept_rate":20,"display_name":"Pierluigi Vernetto"},"score":2,"creation_date":1557985223,"post_id":42759691,"comment_id":98950664,"body_markdown":"plus 1 since I had the same problem using Maven and the omilus solution solved my problem","body":"plus 1 since I had the same problem using Maven and the omilus solution solved my problem"},{"owner":{"account_id":1705110,"reputation":3119,"user_id":1564319,"display_name":"Wade H"},"score":1,"creation_date":1622331949,"post_id":42759691,"comment_id":119762961,"body_markdown":"plus 1 because only this works for me..  I can re-produce the issue with  jettyVersion:   &#39;9.4.30.v20200611&#39;/&#39;9.4.6.v20170531&#39; and jerseyVersion = &#39;2.28&#39;.","body":"plus 1 because only this works for me..  I can re-produce the issue with  jettyVersion:   &#39;9.4.30.v20200611&#39;/&#39;9.4.6.v20170531&#39; and jerseyVersion = &#39;2.28&#39;."}],"tags":[],"owner":{"account_id":7867087,"reputation":1216,"user_id":5945599,"display_name":"omilus"},"comment_count":4,"down_vote_count":1,"up_vote_count":14,"is_accepted":false,"score":13,"last_activity_date":1489395485,"creation_date":1489395485,"answer_id":42759691,"question_id":26207252,"body_markdown":"Below should be in your pom.xml above other jersy/jackson dependencies. In my case it as below jersy-client dep-cy and i got MessageBodyWriter not found for media type=application/json.\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.glassfish.jersey.media&lt;/groupId&gt;\r\n      &lt;artifactId&gt;jersey-media-json-jackson&lt;/artifactId&gt;\r\n      &lt;version&gt;2.25&lt;/version&gt;\r\n    &lt;/dependency&gt;","title":"MessageBodyWriter not found for media type=application/json","body":"<p>Below should be in your pom.xml above other jersy/jackson dependencies. In my case it as below jersy-client dep-cy and i got MessageBodyWriter not found for media type=application/json.</p>\n\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.glassfish.jersey.media&lt;/groupId&gt;\n  &lt;artifactId&gt;jersey-media-json-jackson&lt;/artifactId&gt;\n  &lt;version&gt;2.25&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1552851919,"post_id":48979904,"comment_id":97158260,"body_markdown":"Minus 1 as the OP specifically says they are not using Maven and the OP already has a no-arg constructor.","body":"Minus 1 as the OP specifically says they are not using Maven and the OP already has a no-arg constructor."},{"owner":{"account_id":9724170,"reputation":1075,"user_id":7211815,"display_name":"codrelphi"},"score":0,"creation_date":1643581877,"post_id":48979904,"comment_id":125372505,"body_markdown":"This dependency solves my issue. I am using Maven.","body":"This dependency solves my issue. I am using Maven."},{"owner":{"account_id":4382488,"reputation":343,"user_id":6666688,"display_name":"java dev"},"score":0,"creation_date":1659809038,"post_id":48979904,"comment_id":129385137,"body_markdown":"Paul Samsotha you are wrong it has ```no-arg constructor``` if there is no other parameter constructor. you should say plus one.","body":"Paul Samsotha you are wrong it has <code>no-arg constructor</code> if there is no other parameter constructor. you should say plus one."}],"tags":[],"owner":{"account_id":3723758,"reputation":11894,"user_id":3600553,"accept_rate":71,"display_name":"Du-Lacoste"},"comment_count":3,"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1519604614,"creation_date":1519604614,"answer_id":48979904,"question_id":26207252,"body_markdown":"To overcome this issue try the following. Worked for me. \r\n\r\nAdd following dependency in the **pom.xml**\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.glassfish.jersey.media&lt;/groupId&gt;\r\n      &lt;artifactId&gt;jersey-media-json-jackson&lt;/artifactId&gt;\r\n      &lt;version&gt;2.25&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nAnd make sure **Model class** contains **no arg constructor**\r\n\r\n     public Student()\r\n        {\r\n        }","title":"MessageBodyWriter not found for media type=application/json","body":"<p>To overcome this issue try the following. Worked for me. </p>\n\n<p>Add following dependency in the <strong>pom.xml</strong></p>\n\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.glassfish.jersey.media&lt;/groupId&gt;\n  &lt;artifactId&gt;jersey-media-json-jackson&lt;/artifactId&gt;\n  &lt;version&gt;2.25&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>And make sure <strong>Model class</strong> contains <strong>no arg constructor</strong></p>\n\n<pre><code> public Student()\n    {\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4382488,"reputation":343,"user_id":6666688,"display_name":"java dev"},"score":0,"creation_date":1659808925,"post_id":60656763,"comment_id":129385115,"body_markdown":"Yeah this it ```you have an empty constructor in the data type you are trying to de-/serialize```","body":"Yeah this it <code>you have an empty constructor in the data type you are trying to de-&#47;serialize</code>"}],"tags":[],"owner":{"account_id":7792408,"reputation":412,"user_id":5894853,"display_name":"JediCate"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1584025341,"creation_date":1584025341,"answer_id":60656763,"question_id":26207252,"body_markdown":"In my experience this error is pretty common, for some reason jersey sometimes has problems parsing custom java types. Usually all you have to do is make sure that you respect the following 3 conditions:\r\n\r\n1. you have jersey-media-json-jackson in you pom.xml if using maven or added to your build path;\r\n2. you have an empty constructor in the data type you are trying to de-/serialize;\r\n3. you have the relevant annotation at the class and field level for your custom data type (xmlelement and/or jsonproperty);\r\n\r\nHowever, I have ran into cases where this just was not enough. Then you can always wrap you custom data type in a GenericEntity and pass it as such to your ResponseBuilder:\r\n\r\n    GenericEntity&lt;CustomDataType&gt; entity = new GenericEntity&lt;CustomDataType&gt;(myObj) {};\r\n\treturn Response.status(httpCode).entity(entity).build();\r\n\r\nThis way you are trying to help jersey to find the proper/relevant serialization provider for you object.\r\nWell, sometimes this also is not enough. In my case I was trying to produce a text/plain from a custom data type. Theoretically jersey should have used the StringMessageProvider, but for some reason that I did not manage to discover it was giving me this error:\r\n\r\n    org.glassfish.jersey.message.internal.MessageBodyProviderNotFoundException: MessageBodyWriter not found for media type=text/plain\r\n\r\nSo what solved the problem for me was to do my own serialization with jackson&#39;s writeValueAsString(). I&#39;m not proud of it but at the end of the day I can deliver an acceptable solution.","title":"MessageBodyWriter not found for media type=application/json","body":"<p>In my experience this error is pretty common, for some reason jersey sometimes has problems parsing custom java types. Usually all you have to do is make sure that you respect the following 3 conditions:</p>\n\n<ol>\n<li>you have jersey-media-json-jackson in you pom.xml if using maven or added to your build path;</li>\n<li>you have an empty constructor in the data type you are trying to de-/serialize;</li>\n<li>you have the relevant annotation at the class and field level for your custom data type (xmlelement and/or jsonproperty);</li>\n</ol>\n\n<p>However, I have ran into cases where this just was not enough. Then you can always wrap you custom data type in a GenericEntity and pass it as such to your ResponseBuilder:</p>\n\n<pre><code>GenericEntity&lt;CustomDataType&gt; entity = new GenericEntity&lt;CustomDataType&gt;(myObj) {};\nreturn Response.status(httpCode).entity(entity).build();\n</code></pre>\n\n<p>This way you are trying to help jersey to find the proper/relevant serialization provider for you object.\nWell, sometimes this also is not enough. In my case I was trying to produce a text/plain from a custom data type. Theoretically jersey should have used the StringMessageProvider, but for some reason that I did not manage to discover it was giving me this error:</p>\n\n<pre><code>org.glassfish.jersey.message.internal.MessageBodyProviderNotFoundException: MessageBodyWriter not found for media type=text/plain\n</code></pre>\n\n<p>So what solved the problem for me was to do my own serialization with jackson's writeValueAsString(). I'm not proud of it but at the end of the day I can deliver an acceptable solution.</p>\n"},{"tags":[],"owner":{"account_id":17928204,"reputation":769,"user_id":13026255,"display_name":"Jainender Chauhan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1587721911,"creation_date":1587721911,"answer_id":61405614,"question_id":26207252,"body_markdown":"Ensure that you have following JARS in place:\r\n1) jackson-core-asl-1.9.13\r\n2) jackson-jaxrs-1.9.13\r\n3) jackson-mapper-asl-1.9.13\r\n4) jackson-xc-1.9.13","title":"MessageBodyWriter not found for media type=application/json","body":"<p>Ensure that you have following JARS in place:\n1) jackson-core-asl-1.9.13\n2) jackson-jaxrs-1.9.13\n3) jackson-mapper-asl-1.9.13\n4) jackson-xc-1.9.13</p>\n"},{"tags":[],"owner":{"account_id":10115618,"reputation":13,"user_id":7474393,"display_name":"Badr Kenzallah"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1604477458,"creation_date":1604477268,"answer_id":64676199,"question_id":26207252,"body_markdown":"You have to convert the response to JSON using `Gson.toJson(object)`.\r\n\r\nFor example:\r\n\r\n    return Response.status(Status.OK).entity(new Gson().toJson(Student)).build();","title":"MessageBodyWriter not found for media type=application/json","body":"<p>You have to convert the response to JSON using <code>Gson.toJson(object)</code>.</p>\n<p>For example:</p>\n<pre><code>return Response.status(Status.OK).entity(new Gson().toJson(Student)).build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7008925,"reputation":319,"user_id":5372500,"display_name":"Alexander Terp"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1652079274,"creation_date":1652079274,"answer_id":72167983,"question_id":26207252,"body_markdown":"My preferred alternative to pulling in the `jersey-media-json-jackson` dependency other answers are mentioning is to instead register `JacksonJsonProvider` with your Jersey `ResourceConfig`:\r\n\r\n```java\r\nimport com.fasterxml.jackson.jaxrs.json.JacksonJsonProvider;\r\nimport org.glassfish.jersey.server.ResourceConfig;\r\n\r\n...\r\n\r\nResourceConfig myResourceConfig = new ResourceConfig();\r\nmyResourceConfig.register(JacksonJsonProvider.class);\r\n```\r\n\r\nThe Javadoc on `JacksonJsonProvider` explains:\r\n\r\n```\r\nBasic implementation of JAX-RS abstractions (MessageBodyReader,\r\nMessageBodyWriter) needed for binding JSON (&quot;application/json&quot;) \r\ncontent to and from Java Objects (&quot;POJO&quot;s).\r\n\r\nActual data binding functionality is implemented by ObjectMapper:\r\nmapper to use can be configured in multiple ways:\r\n\r\n By explicitly passing mapper to use in constructor\r\n By explictly setting mapper to use by setMapper\r\n By defining JAX-RS Provider that returns ObjectMappers.\r\n By doing none of above, in which case a default mapper instance is\r\n    constructed (and configured if configuration methods are called)\r\n\r\nThe last method (&quot;do nothing specific&quot;) is often good enough; explicit passing\r\nof Mapper is simple and explicit; and Provider-based method may make sense\r\nwith Depedency Injection frameworks, or if Mapper has to be configured differently\r\nfor different media types.\r\n\r\nNote that the default mapper instance will be automatically created if\r\none of explicit configuration methods (like configure)\r\nis called: if so, Provider-based introspection is NOT used, but the\r\nresulting Mapper is used as configured.\r\n\r\nNote: version 1.3 added a sub-class (JacksonJaxbJsonProvider) which\r\nis configured by default to use both Jackson and JAXB annotations for configuration\r\n(base class when used as-is defaults to using just Jackson annotations)\r\n```\r\n\r\n(as it suggests, you can alternatively use `JacksonJaxbJsonProvider`).","title":"MessageBodyWriter not found for media type=application/json","body":"<p>My preferred alternative to pulling in the <code>jersey-media-json-jackson</code> dependency other answers are mentioning is to instead register <code>JacksonJsonProvider</code> with your Jersey <code>ResourceConfig</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import com.fasterxml.jackson.jaxrs.json.JacksonJsonProvider;\nimport org.glassfish.jersey.server.ResourceConfig;\n\n...\n\nResourceConfig myResourceConfig = new ResourceConfig();\nmyResourceConfig.register(JacksonJsonProvider.class);\n</code></pre>\n<p>The Javadoc on <code>JacksonJsonProvider</code> explains:</p>\n<pre><code>Basic implementation of JAX-RS abstractions (MessageBodyReader,\nMessageBodyWriter) needed for binding JSON (&quot;application/json&quot;) \ncontent to and from Java Objects (&quot;POJO&quot;s).\n\nActual data binding functionality is implemented by ObjectMapper:\nmapper to use can be configured in multiple ways:\n\n By explicitly passing mapper to use in constructor\n By explictly setting mapper to use by setMapper\n By defining JAX-RS Provider that returns ObjectMappers.\n By doing none of above, in which case a default mapper instance is\n    constructed (and configured if configuration methods are called)\n\nThe last method (&quot;do nothing specific&quot;) is often good enough; explicit passing\nof Mapper is simple and explicit; and Provider-based method may make sense\nwith Depedency Injection frameworks, or if Mapper has to be configured differently\nfor different media types.\n\nNote that the default mapper instance will be automatically created if\none of explicit configuration methods (like configure)\nis called: if so, Provider-based introspection is NOT used, but the\nresulting Mapper is used as configured.\n\nNote: version 1.3 added a sub-class (JacksonJaxbJsonProvider) which\nis configured by default to use both Jackson and JAXB annotations for configuration\n(base class when used as-is defaults to using just Jackson annotations)\n</code></pre>\n<p>(as it suggests, you can alternatively use <code>JacksonJaxbJsonProvider</code>).</p>\n"},{"tags":[],"owner":{"account_id":22580489,"reputation":47,"user_id":16765209,"display_name":"jaConfu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656530243,"creation_date":1656530243,"answer_id":72806730,"question_id":26207252,"body_markdown":"Can confirm, that I had this exact error for about a week-long, I added the dependency listed above and lombok, @Data. What this does is insert all getters, setters, empty constructor, and complete constructors. More-or-less, if you are working with a big JSON response it can cause a massive problem. Also, this ensures that the other classes that you built if objects are coming or dates are parsed correctly. LET THE COMPUTER DO THE WORK.","title":"MessageBodyWriter not found for media type=application/json","body":"<p>Can confirm, that I had this exact error for about a week-long, I added the dependency listed above and lombok, @Data. What this does is insert all getters, setters, empty constructor, and complete constructors. More-or-less, if you are working with a big JSON response it can cause a massive problem. Also, this ensures that the other classes that you built if objects are coming or dates are parsed correctly. LET THE COMPUTER DO THE WORK.</p>\n"},{"tags":[],"owner":{"account_id":10987912,"reputation":469,"user_id":8072948,"display_name":"Debayan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665557250,"creation_date":1665557250,"answer_id":74037529,"question_id":26207252,"body_markdown":"\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.glassfish.jersey.media&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jersey-media-json-jackson&lt;/artifactId&gt;\r\n    &lt;version&gt;3.1.0-M8&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nThis worked for me.","title":"MessageBodyWriter not found for media type=application/json","body":"<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.glassfish.jersey.media&lt;/groupId&gt;\n    &lt;artifactId&gt;jersey-media-json-jackson&lt;/artifactId&gt;\n    &lt;version&gt;3.1.0-M8&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>This worked for me.</p>\n"},{"tags":[],"owner":{"account_id":1893719,"reputation":1,"user_id":1974190,"display_name":"styled4u"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677057315,"creation_date":1676982609,"answer_id":75520566,"question_id":26207252,"body_markdown":"Had the same issue, but nothing of the above helped.\r\n\r\nIn my case, to get rid of this error, I had to make sure that the return type of a getter method matches the declaration.\r\n\r\nDoes not work:\r\n\r\n```\r\npublic class Example{\r\n    private int id;\r\n\r\n    public Example(){\r\n    }\r\n\r\n    public Integer getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(int id) {\r\n        this.id = id;\r\n    }\r\n\r\n}\r\n```\r\n\r\nDoes work:\r\n\r\n```\r\npublic class Example{\r\n    private int id;\r\n\r\n    public Example(){\r\n    }\r\n\r\n    public int getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(int id) {\r\n        this.id = id;\r\n    }\r\n\r\n}\r\n```\r\n","title":"MessageBodyWriter not found for media type=application/json","body":"<p>Had the same issue, but nothing of the above helped.</p>\n<p>In my case, to get rid of this error, I had to make sure that the return type of a getter method matches the declaration.</p>\n<p>Does not work:</p>\n<pre><code>public class Example{\n    private int id;\n\n    public Example(){\n    }\n\n    public Integer getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n}\n</code></pre>\n<p>Does work:</p>\n<pre><code>public class Example{\n    private int id;\n\n    public Example(){\n    }\n\n    public int getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":1573092,"reputation":1342,"user_id":1460321,"accept_rate":21,"display_name":"Fahad Mullaji"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":159031,"favorite_count":0,"down_vote_count":0,"up_vote_count":81,"answer_count":14,"score":81,"last_activity_date":1677057315,"creation_date":1412543357,"question_id":26207252,"body_markdown":"I am facing issues while consuming JAX-RS services as JSON.\r\n\r\nBelow I have added my code.\r\n\r\nThis is my service class:\r\n\r\n    //Sets the path to base URL + /hello\r\n    @Path(&quot;/hello&quot;) \r\n    @Consumes(MediaType.APPLICATION_JSON)\r\n    @Produces(MediaType.APPLICATION_JSON)\r\n    public class Hello {\r\n\r\n\t    @GET\r\n    \t@Produces(&quot;application/json&quot;)\r\n    \tpublic Student getStudent() {\r\n\t\t\r\n\t    \tStudent s = new Student();\r\n\t\t    s.first_name = &quot;Test First Name !!!&quot;;\r\n    \t\ts.last_name = &quot;Test Last Name!!!&quot;;\r\n\t\t\r\n\t    \treturn s;\r\n\t    }\r\n\r\n`Student` class which I am trying to get from service:\r\n  \r\n    @XmlRootElement\r\n    public class Student implements Serializable {\r\n    \t\r\n    \tpublic String first_name;\r\n    \tpublic String last_name;\r\n    \t\r\n    \tpublic String getFirst_name() {\r\n    \t\treturn first_name;\r\n    \t}\r\n    \r\n    \tpublic void setFirst_name(String first_name) {\r\n    \t\tthis.first_name = first_name;\r\n    \t}\r\n    \r\n    \tpublic String getLast_name() {\r\n    \t\treturn last_name;\r\n    \t}\r\n    \r\n    \tpublic void setLast_name(String last_name) {\r\n    \t\tthis.last_name = last_name;\r\n    \t}\r\n    \r\n    \tpublic Student()\r\n    \t{\r\n    \t\tfirst_name = &quot;Fahad&quot;;\r\n    \t\tlast_name = &quot;Mullaji&quot;;\r\n    \t}\r\n    }\r\n\r\nWeb XML on service side.\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;\r\n    \txsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot;\r\n    \tid=&quot;WebApp_ID&quot; version=&quot;3.0&quot;&gt;\r\n    \t&lt;display-name&gt;com.vogella.jersey.first&lt;/display-name&gt;\r\n    \t&lt;servlet&gt;\r\n    \t\t&lt;servlet-name&gt;Jersey REST Service&lt;/servlet-name&gt;\r\n    \t\t&lt;servlet-class&gt;org.glassfish.jersey.servlet.ServletContainer&lt;/servlet-class&gt;\r\n    \t\t&lt;!-- Register resources and providers under com.vogella.jersey.first package. --&gt;\r\n    \t\t&lt;init-param&gt;\r\n    \t\t\t&lt;param-name&gt;jersey.config.server.provider.packages&lt;/param-name&gt;\r\n    \t\t\t&lt;param-value&gt;com.vogella.jersey.first&lt;/param-value&gt;\r\n    \t\t&lt;/init-param&gt;\r\n    \t\t&lt;init-param&gt;\r\n    \t\t\t&lt;param-name&gt;com.sun.jersey.api.json.POJOMappingFeature&lt;/param-name&gt;\r\n    \t\t\t&lt;param-value&gt;true&lt;/param-value&gt;\r\n    \t\t&lt;/init-param&gt;\r\n    \r\n    \t\t&lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\r\n    \t&lt;/servlet&gt;\r\n    \t&lt;servlet-mapping&gt;\r\n    \t\t&lt;servlet-name&gt;Jersey REST Service&lt;/servlet-name&gt;\r\n    \t\t&lt;url-pattern&gt;/rest/*&lt;/url-pattern&gt;\r\n    \t&lt;/servlet-mapping&gt;\r\n    &lt;/web-app&gt; \r\n\r\nI don&#39;t know how to fix this issue.\r\nI am using SOAP UI for testing JSON response but I guess that it should not matter.\r\n\r\nMany places I read that I need to add the code below. But I don&#39;t know where. I am not using Maven for building.\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.glassfish.jersey.media&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jersey-media-moxy&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\nServer is looking for function to parse `Student` object to JSON but it is not able to find function or jar file for it. \r\nI have added jar of Genson, Moxy, RESTEasy and Jackson but I think that&#39;s the problem.\r\nI think I am missing mapping somewhere.","title":"MessageBodyWriter not found for media type=application/json","body":"<p>I am facing issues while consuming JAX-RS services as JSON.</p>\n\n<p>Below I have added my code.</p>\n\n<p>This is my service class:</p>\n\n<pre><code>//Sets the path to base URL + /hello\n@Path(\"/hello\") \n@Consumes(MediaType.APPLICATION_JSON)\n@Produces(MediaType.APPLICATION_JSON)\npublic class Hello {\n\n    @GET\n    @Produces(\"application/json\")\n    public Student getStudent() {\n\n        Student s = new Student();\n        s.first_name = \"Test First Name !!!\";\n        s.last_name = \"Test Last Name!!!\";\n\n        return s;\n    }\n</code></pre>\n\n<p><code>Student</code> class which I am trying to get from service:</p>\n\n<pre><code>@XmlRootElement\npublic class Student implements Serializable {\n\n    public String first_name;\n    public String last_name;\n\n    public String getFirst_name() {\n        return first_name;\n    }\n\n    public void setFirst_name(String first_name) {\n        this.first_name = first_name;\n    }\n\n    public String getLast_name() {\n        return last_name;\n    }\n\n    public void setLast_name(String last_name) {\n        this.last_name = last_name;\n    }\n\n    public Student()\n    {\n        first_name = \"Fahad\";\n        last_name = \"Mullaji\";\n    }\n}\n</code></pre>\n\n<p>Web XML on service side.</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;web-app xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns=\"http://java.sun.com/xml/ns/javaee\"\n    xsi:schemaLocation=\"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd\"\n    id=\"WebApp_ID\" version=\"3.0\"&gt;\n    &lt;display-name&gt;com.vogella.jersey.first&lt;/display-name&gt;\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;Jersey REST Service&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;org.glassfish.jersey.servlet.ServletContainer&lt;/servlet-class&gt;\n        &lt;!-- Register resources and providers under com.vogella.jersey.first package. --&gt;\n        &lt;init-param&gt;\n            &lt;param-name&gt;jersey.config.server.provider.packages&lt;/param-name&gt;\n            &lt;param-value&gt;com.vogella.jersey.first&lt;/param-value&gt;\n        &lt;/init-param&gt;\n        &lt;init-param&gt;\n            &lt;param-name&gt;com.sun.jersey.api.json.POJOMappingFeature&lt;/param-name&gt;\n            &lt;param-value&gt;true&lt;/param-value&gt;\n        &lt;/init-param&gt;\n\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n    &lt;/servlet&gt;\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;Jersey REST Service&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/rest/*&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n&lt;/web-app&gt; \n</code></pre>\n\n<p>I don't know how to fix this issue.\nI am using SOAP UI for testing JSON response but I guess that it should not matter.</p>\n\n<p>Many places I read that I need to add the code below. But I don't know where. I am not using Maven for building.</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.glassfish.jersey.media&lt;/groupId&gt;\n    &lt;artifactId&gt;jersey-media-moxy&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Server is looking for function to parse <code>Student</code> object to JSON but it is not able to find function or jar file for it. \nI have added jar of Genson, Moxy, RESTEasy and Jackson but I think that's the problem.\nI think I am missing mapping somewhere.</p>\n"},{"tags":["java","exception","reflection","invoke"],"comments":[{"owner":{"account_id":4535825,"reputation":1025,"user_id":9104070,"display_name":"Alonso del Arte"},"score":2,"creation_date":1634611104,"post_id":6020719,"comment_id":123065183,"body_markdown":"I was having the same exact problem, only I didn&#39;t realize it was an invocation target exception for quite a while...","body":"I was having the same exact problem, only I didn&#39;t realize it was an invocation target exception for quite a while..."}],"answers":[{"comments":[{"owner":{"account_id":873159,"reputation":26684,"user_id":923560,"accept_rate":47,"display_name":"Abdull"},"score":0,"creation_date":1361804850,"post_id":6020754,"comment_id":21191844,"body_markdown":"So imagine I have a cascade of `java.lang.reflect.Proxy` instances augmenting a wrapped object. Each `Proxy` gracefully handles a specific exception (possibly thrown by the wrapped object) by using its own `InvocationHandler`. For an exception to ripple through this cascade until reaching the correct invocation handler/proxy, in each `InvocationHandler`, I would catch `InvocationTargetException`, unwrap it, check if the wrapped exception is an `instanceof` the exception to be handled by this `InvocationHandler`. If it&#39;s not an `instanceof`, I would throw the **unwrapped** exception... right?","body":"So imagine I have a cascade of <code>java.lang.reflect.Proxy</code> instances augmenting a wrapped object. Each <code>Proxy</code> gracefully handles a specific exception (possibly thrown by the wrapped object) by using its own <code>InvocationHandler</code>. For an exception to ripple through this cascade until reaching the correct invocation handler/proxy, in each <code>InvocationHandler</code>, I would catch <code>InvocationTargetException</code>, unwrap it, check if the wrapped exception is an <code>instanceof</code> the exception to be handled by this <code>InvocationHandler</code>. If it&#39;s not an <code>instanceof</code>, I would throw the <b>unwrapped</b> exception... right?"},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1362524579,"post_id":6020754,"comment_id":21481397,"body_markdown":"I would always throw the unwrapped exception.","body":"I would always throw the unwrapped exception."}],"tags":[],"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"comment_count":2,"down_vote_count":1,"up_vote_count":25,"is_accepted":false,"score":24,"last_activity_date":1492079589,"creation_date":1305565212,"answer_id":6020754,"question_id":6020719,"body_markdown":"From the Javadoc of Method.invoke()\r\n\r\n&gt; Throws: InvocationTargetException - if the underlying method throws an exception. \r\n\r\nThis exception is thrown if the method called threw an exception.","title":"What could cause java.lang.reflect.InvocationTargetException?","body":"<p>From the Javadoc of Method.invoke()</p>\n\n<blockquote>\n  <p>Throws: InvocationTargetException - if the underlying method throws an exception. </p>\n</blockquote>\n\n<p>This exception is thrown if the method called threw an exception.</p>\n"},{"comments":[{"owner":{"account_id":264268,"reputation":4639,"user_id":550413,"accept_rate":88,"display_name":"user550413"},"score":0,"creation_date":1305567171,"post_id":6020758,"comment_id":6960137,"body_markdown":"Thanks, but that how will I differ between (AssertionError e) and (Exception e) for example? If I always get InvocationTargetException first before unwrapping the cause where will I differ between each exception?","body":"Thanks, but that how will I differ between (AssertionError e) and (Exception e) for example? If I always get InvocationTargetException first before unwrapping the cause where will I differ between each exception?"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":5,"creation_date":1305568401,"post_id":6020758,"comment_id":6960442,"body_markdown":"@user550413: By unwrapping the exception and examining that, of course. You can always throw it yourself, and catch it that way if you must.","body":"@user550413: By unwrapping the exception and examining that, of course. You can always throw it yourself, and catch it that way if you must."},{"owner":{"account_id":252585,"reputation":868,"user_id":530728,"accept_rate":100,"display_name":"Jan"},"score":180,"creation_date":1328902959,"post_id":6020758,"comment_id":11629767,"body_markdown":"For anyone wondering about what it means to &quot;unwrap the cause within the `InvocationTargetException`&quot;, I just discovered that if you&#39;ve got it printed using `exception.printStackTrace()`, you just look at the &quot;Caused By:&quot; section instead of the top half/normal section.","body":"For anyone wondering about what it means to &quot;unwrap the cause within the <code>InvocationTargetException</code>&quot;, I just discovered that if you&#39;ve got it printed using <code>exception.printStackTrace()</code>, you just look at the &quot;Caused By:&quot; section instead of the top half/normal section."},{"owner":{"account_id":898371,"reputation":801,"user_id":935154,"accept_rate":100,"display_name":"jcadcell"},"score":41,"creation_date":1347562700,"post_id":6020758,"comment_id":16683708,"body_markdown":"To add the the explanation about &quot;unwrapping&quot; you can also catch the exception and use the getCause() method on it, which can also be rethrown, if desired.  Something like `try {...} catch (InvocationTargetException ex) { log.error(&quot;oops!&quot;, ex.getCause()) }` or `...catch... { throw ex.getCause() }`","body":"To add the the explanation about &quot;unwrapping&quot; you can also catch the exception and use the getCause() method on it, which can also be rethrown, if desired.  Something like <code>try {...} catch (InvocationTargetException ex) { log.error(&quot;oops!&quot;, ex.getCause()) }</code> or <code>...catch... { throw ex.getCause() }</code>"},{"owner":{"account_id":431710,"reputation":3063,"user_id":815961,"accept_rate":51,"display_name":"Pavan Dittakavi"},"score":0,"creation_date":1374574257,"post_id":6020758,"comment_id":25981998,"body_markdown":"@JonSkeet\n\nI am looking at the same exception at my colleagues code. I have tried to trap the exception by enclosing the call to the culprit class in a try-catch block. But to our surprise, its not getting into the catch block at all!. Could someone tell me what I might be missing here.","body":"@JonSkeet  I am looking at the same exception at my colleagues code. I have tried to trap the exception by enclosing the call to the culprit class in a try-catch block. But to our surprise, its not getting into the catch block at all!. Could someone tell me what I might be missing here."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1374598266,"post_id":6020758,"comment_id":25998397,"body_markdown":"@Pavan: Can&#39;t really say with that much description; I suggest you try to put it in a short but complete program which reproduces the problem, then post a new question.","body":"@Pavan: Can&#39;t really say with that much description; I suggest you try to put it in a short but complete program which reproduces the problem, then post a new question."},{"owner":{"account_id":204470,"reputation":8571,"user_id":452708,"accept_rate":0,"display_name":"Abhijeet"},"score":0,"creation_date":1420697691,"post_id":6020758,"comment_id":44073357,"body_markdown":"Adding more details to what @jcadcell has mentioned earlier, please refer to this link http://examples.javacodegeeks.com/java-basics/exceptions/java-lang-reflect-invocationtargetexception-how-to-handle-invocation-target-exception/","body":"Adding more details to what @jcadcell has mentioned earlier, please refer to this link <a href=\"http://examples.javacodegeeks.com/java-basics/exceptions/java-lang-reflect-invocationtargetexception-how-to-handle-invocation-target-exception/\" rel=\"nofollow noreferrer\">examples.javacodegeeks.com/java-basics/exceptions/&hellip;</a>"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1428660932,"post_id":6020758,"comment_id":47267739,"body_markdown":"@DheraajBhaskar Don&#39;t edit other people&#39;s answers as though they were your own, and don&#39;t use quote formatting for text that isn&#39;t quoted. That edit should have been posted as a comment.","body":"@DheraajBhaskar Don&#39;t edit other people&#39;s answers as though they were your own, and don&#39;t use quote formatting for text that isn&#39;t quoted. That edit should have been posted as a comment."},{"owner":{"account_id":3175071,"reputation":20715,"user_id":2683146,"accept_rate":85,"display_name":"Jean-Fran&#231;ois Savard"},"score":1,"creation_date":1440079336,"post_id":6020758,"comment_id":52133135,"body_markdown":"@EJP Actually the edit is already posted as a comment (68 upvotes) by Jan... The edit description specify &quot;took suggestions from comments&quot;.","body":"@EJP Actually the edit is already posted as a comment (68 upvotes) by Jan... The edit description specify &quot;took suggestions from comments&quot;."},{"owner":{"account_id":4240929,"reputation":6500,"user_id":3470841,"accept_rate":62,"display_name":"Jack"},"score":0,"creation_date":1442903154,"post_id":6020758,"comment_id":53262346,"body_markdown":"I have similar issue but cannot resolve it, my question is here. Please have a look at that http://stackoverflow.com/questions/32709784/cannot-test-a-class-that-return-a-customexception","body":"I have similar issue but cannot resolve it, my question is here. Please have a look at that <a href=\"http://stackoverflow.com/questions/32709784/cannot-test-a-class-that-return-a-customexception\" title=\"cannot test a class that return a customexception\">stackoverflow.com/questions/32709784/&hellip;</a>"},{"owner":{"account_id":87775,"reputation":17894,"user_id":243233,"accept_rate":75,"display_name":"Jus12"},"score":1,"creation_date":1451965758,"post_id":6020758,"comment_id":56953326,"body_markdown":"Does an `InvocationTargetException` always have a cause?","body":"Does an <code>InvocationTargetException</code> always have a cause?"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1451976937,"post_id":6020758,"comment_id":56956990,"body_markdown":"@Jus12: You can construct one without a cause, but I believe one that is thrown by `invoke` will always have one.","body":"@Jus12: You can construct one without a cause, but I believe one that is thrown by <code>invoke</code> will always have one."},{"owner":{"account_id":189981,"reputation":1342,"user_id":429647,"accept_rate":93,"display_name":"a113nw"},"score":0,"creation_date":1496776467,"post_id":6020758,"comment_id":75795933,"body_markdown":"@Jan&#39;s comment above (look at &quot;Caused By:&quot; section of stacktrace) should be the answer.","body":"@Jan&#39;s comment above (look at &quot;Caused By:&quot; section of stacktrace) should be the answer."},{"owner":{"account_id":9288944,"reputation":1498,"user_id":6897913,"display_name":"linjiejun"},"score":0,"creation_date":1650449421,"post_id":6020758,"comment_id":127116927,"body_markdown":"@jcadcell yes catch the exception and use the getCause() method on it work for me.Below is my code :   } catch (IllegalAccessException | java.lang.InstantiationException | NoSuchMethodException | InvocationTargetException e) {\n                            System.out.println(e.getCause());\n                            e.printStackTrace();\n                        }","body":"@jcadcell yes catch the exception and use the getCause() method on it work for me.Below is my code :   } catch (IllegalAccessException | java.lang.InstantiationException | NoSuchMethodException | InvocationTargetException e) {                             System.out.println(e.getCause());                             e.printStackTrace();                         }"}],"tags":[],"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"comment_count":14,"down_vote_count":3,"up_vote_count":383,"is_accepted":true,"score":380,"last_activity_date":1677057306,"creation_date":1305565237,"answer_id":6020758,"question_id":6020719,"body_markdown":"You&#39;ve added an extra level of abstraction by calling the method with reflection. The reflection layer wraps any exception in an `InvocationTargetException`, which lets you tell the difference between an exception *actually* caused by a failure in the reflection call (maybe your argument list wasn&#39;t valid, for example) and a failure within the method called.\r\n\r\nJust unwrap the cause within the `InvocationTargetException` and you&#39;ll get to the original one.\r\n\r\nTo do that, you can do `exception.printStackTrace()` and look at the &quot;Caused By:&quot; section instead of the top half/normal section.\r\n\r\nYou can also catch the exception and use the getCause() method on it, which can also be re-thrown, if desired. Something like `try {...} catch (InvocationTargetException ex) { log.error(&quot;oops!&quot;, ex.getCause()) }` or `...catch... { throw ex.getCause() }`","title":"What could cause java.lang.reflect.InvocationTargetException?","body":"<p>You've added an extra level of abstraction by calling the method with reflection. The reflection layer wraps any exception in an <code>InvocationTargetException</code>, which lets you tell the difference between an exception <em>actually</em> caused by a failure in the reflection call (maybe your argument list wasn't valid, for example) and a failure within the method called.</p>\n<p>Just unwrap the cause within the <code>InvocationTargetException</code> and you'll get to the original one.</p>\n<p>To do that, you can do <code>exception.printStackTrace()</code> and look at the &quot;Caused By:&quot; section instead of the top half/normal section.</p>\n<p>You can also catch the exception and use the getCause() method on it, which can also be re-thrown, if desired. Something like <code>try {...} catch (InvocationTargetException ex) { log.error(&quot;oops!&quot;, ex.getCause()) }</code> or <code>...catch... { throw ex.getCause() }</code></p>\n"},{"comments":[{"owner":{"account_id":10062835,"reputation":1541,"user_id":7438853,"accept_rate":68,"display_name":"wheeleruniverse"},"score":1,"creation_date":1576080948,"post_id":6020766,"comment_id":104784818,"body_markdown":"What if I expect the underlying method to throw an exception? Should I catch this exception and simply rethrow?","body":"What if I expect the underlying method to throw an exception? Should I catch this exception and simply rethrow?"}],"tags":[],"owner":{"account_id":36858,"reputation":113744,"user_id":105224,"accept_rate":73,"display_name":"Andreas Dolk"},"comment_count":1,"down_vote_count":0,"up_vote_count":60,"is_accepted":false,"score":60,"last_activity_date":1305565284,"creation_date":1305565284,"answer_id":6020766,"question_id":6020719,"body_markdown":"The exception is thrown if\r\n\r\n&gt; InvocationTargetException - if the underlying method throws an exception.\r\n\r\nSo if the method, that has been invoked with reflection API, throws an exception (runtime exception for example), the reflection API will wrap the exception into an `InvocationTargetException`.","title":"What could cause java.lang.reflect.InvocationTargetException?","body":"<p>The exception is thrown if</p>\n\n<blockquote>\n  <p>InvocationTargetException - if the underlying method throws an exception.</p>\n</blockquote>\n\n<p>So if the method, that has been invoked with reflection API, throws an exception (runtime exception for example), the reflection API will wrap the exception into an <code>InvocationTargetException</code>.</p>\n"},{"comments":[{"owner":{"account_id":264268,"reputation":4639,"user_id":550413,"accept_rate":88,"display_name":"user550413"},"score":0,"creation_date":1305567495,"post_id":6020772,"comment_id":6960217,"body_markdown":"Thanks, but that how will I differ between (AssertionError e) and (Exception e) for example? If I always get InvocationTargetException first before unwrapping the cause where will I differ between each exception?","body":"Thanks, but that how will I differ between (AssertionError e) and (Exception e) for example? If I always get InvocationTargetException first before unwrapping the cause where will I differ between each exception?"}],"tags":[],"owner":{"account_id":369568,"reputation":6016,"user_id":717027,"accept_rate":75,"display_name":"Liv"},"comment_count":1,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1305565315,"creation_date":1305565315,"answer_id":6020772,"question_id":6020719,"body_markdown":"That `InvocationTargetException` is probably wrapping up your `ArrayIndexOutOfBoundsException`. There is no telling upfront when using reflection what that method can throw -- so rather than using a `throws Exception` approach, all the exceptions are being caught and wrapped up in `InvocationTargetException`.","title":"What could cause java.lang.reflect.InvocationTargetException?","body":"<p>That <code>InvocationTargetException</code> is probably wrapping up your <code>ArrayIndexOutOfBoundsException</code>. There is no telling upfront when using reflection what that method can throw -- so rather than using a <code>throws Exception</code> approach, all the exceptions are being caught and wrapped up in <code>InvocationTargetException</code>.</p>\n"},{"tags":[],"owner":{"account_id":1615614,"reputation":501,"user_id":1493408,"display_name":"Daniel Ward"},"comment_count":0,"down_vote_count":0,"up_vote_count":50,"is_accepted":false,"score":50,"last_activity_date":1352099756,"creation_date":1341081169,"answer_id":11276622,"question_id":6020719,"body_markdown":"Use the `getCause()` method on the `InvocationTargetException` to retrieve the original exception.","title":"What could cause java.lang.reflect.InvocationTargetException?","body":"<p>Use the <code>getCause()</code> method on the <code>InvocationTargetException</code> to retrieve the original exception.</p>\n"},{"comments":[{"owner":{"account_id":309382,"reputation":1517,"user_id":621800,"accept_rate":76,"display_name":"William"},"score":5,"creation_date":1359060517,"post_id":13304434,"comment_id":20227813,"body_markdown":"How exactly do you verify jar files are in binary mode by viewing them in the Navigator?","body":"How exactly do you verify jar files are in binary mode by viewing them in the Navigator?"},{"owner":{"account_id":8320201,"reputation":1197,"user_id":6531241,"accept_rate":75,"display_name":"Karim Manaouil"},"score":0,"creation_date":1525135445,"post_id":13304434,"comment_id":87237353,"body_markdown":"@William you made me laugh hahaha. This guy&#39;s answer should be downvoted.","body":"@William you made me laugh hahaha. This guy&#39;s answer should be downvoted."}],"tags":[],"owner":{"account_id":2026861,"reputation":9,"user_id":1811598,"display_name":"Manik"},"comment_count":2,"down_vote_count":6,"up_vote_count":2,"is_accepted":false,"score":-4,"last_activity_date":1352450232,"creation_date":1352449037,"answer_id":13304434,"question_id":6020719,"body_markdown":"1. List all jar files from the Eclipse Navigator mode\r\n2. Verify that all the jar files are in binary mode\r\n","title":"What could cause java.lang.reflect.InvocationTargetException?","body":"<ol>\n<li>List all jar files from the Eclipse Navigator mode</li>\n<li>Verify that all the jar files are in binary mode</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":1089130,"reputation":38502,"user_id":1084174,"accept_rate":89,"display_name":"Sazzad Hissain Khan"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1410963178,"creation_date":1386781015,"answer_id":20525219,"question_id":6020719,"body_markdown":"[This][1] describes something like,\r\n\r\n&gt; InvocationTargetException is a checked exception that wraps an\r\n&gt; exception thrown by an invoked method or constructor. As of release\r\n&gt; 1.4, this exception has been retrofitted to conform to the general purpose exception-chaining mechanism. The &quot;target exception&quot; that is\r\n&gt; provided at construction time and accessed via the\r\n&gt; getTargetException() method is now known as the cause, and may be\r\n&gt; accessed via the Throwable.getCause() method, as well as the\r\n&gt; aforementioned &quot;legacy method.&quot;\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/InvocationTargetException.html","title":"What could cause java.lang.reflect.InvocationTargetException?","body":"<p><a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/InvocationTargetException.html\" rel=\"nofollow\">This</a> describes something like,</p>\n\n<blockquote>\n  <p>InvocationTargetException is a checked exception that wraps an\n  exception thrown by an invoked method or constructor. As of release\n  1.4, this exception has been retrofitted to conform to the general purpose exception-chaining mechanism. The \"target exception\" that is\n  provided at construction time and accessed via the\n  getTargetException() method is now known as the cause, and may be\n  accessed via the Throwable.getCause() method, as well as the\n  aforementioned \"legacy method.\"</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":3390327,"reputation":2668,"user_id":2845282,"accept_rate":68,"display_name":"Nikhil Kumar"},"comment_count":0,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1415178980,"creation_date":1415178980,"answer_id":26753333,"question_id":6020719,"body_markdown":"This exception is thrown if the underlying method(method called using Reflection) throws an exception.\r\n\r\nSo if the method, that has been invoked by reflection API, throws an exception (as for example runtime exception), the reflection API will wrap the exception into an InvocationTargetException.","title":"What could cause java.lang.reflect.InvocationTargetException?","body":"<p>This exception is thrown if the underlying method(method called using Reflection) throws an exception.</p>\n\n<p>So if the method, that has been invoked by reflection API, throws an exception (as for example runtime exception), the reflection API will wrap the exception into an InvocationTargetException.</p>\n"},{"tags":[],"owner":{"account_id":2647347,"reputation":1521,"user_id":2289765,"accept_rate":72,"display_name":"Rocky Inde"},"comment_count":0,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1432640667,"creation_date":1419288977,"answer_id":27611686,"question_id":6020719,"body_markdown":"This will print the exact line of code in the specific method, which when invoked, raised the exception:\r\n\r\n    try {\r\n\r\n        // try code\r\n        ..\r\n        m.invoke(testObject);\r\n        ..\r\n\r\n    } catch (InvocationTargetException e) {\r\n\r\n        // Answer:\r\n        e.getCause().printStackTrace();\r\n    } catch (Exception e) {\r\n  \r\n        // generic exception handling\r\n        e.printStackTrace();\r\n    }","title":"What could cause java.lang.reflect.InvocationTargetException?","body":"<p>This will print the exact line of code in the specific method, which when invoked, raised the exception:</p>\n\n<pre><code>try {\n\n    // try code\n    ..\n    m.invoke(testObject);\n    ..\n\n} catch (InvocationTargetException e) {\n\n    // Answer:\n    e.getCause().printStackTrace();\n} catch (Exception e) {\n\n    // generic exception handling\n    e.printStackTrace();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2181886,"reputation":169,"user_id":1931161,"accept_rate":55,"display_name":"Ashutosh Anand"},"comment_count":0,"down_vote_count":9,"up_vote_count":0,"is_accepted":false,"score":-9,"last_activity_date":1462195953,"creation_date":1462195953,"answer_id":36983723,"question_id":6020719,"body_markdown":"The error vanished after I did \r\nClean-&gt;Run xDoclet-&gt;Run xPackaging.\r\n\r\nIn my workspace, in ecllipse.","title":"What could cause java.lang.reflect.InvocationTargetException?","body":"<p>The error vanished after I did \nClean->Run xDoclet->Run xPackaging.</p>\n\n<p>In my workspace, in ecllipse.</p>\n"},{"tags":[],"owner":{"account_id":1782478,"reputation":1380,"user_id":1624839,"display_name":"Mehdi"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1514677762,"creation_date":1478704363,"answer_id":40510236,"question_id":6020719,"body_markdown":"You can compare with the original exception Class using getCause() method like this :\r\n\r\n    try{\r\n      ...\r\n    } catch(Exception e){\r\n       if(e.getCause().getClass().equals(AssertionError.class)){\r\n          // handle your exception  1\r\n       } else {\r\n          // handle the rest of the world exception \r\n       }\r\n    } \r\n\r\n ","title":"What could cause java.lang.reflect.InvocationTargetException?","body":"<p>You can compare with the original exception Class using getCause() method like this :</p>\n\n<pre><code>try{\n  ...\n} catch(Exception e){\n   if(e.getCause().getClass().equals(AssertionError.class)){\n      // handle your exception  1\n   } else {\n      // handle the rest of the world exception \n   }\n} \n</code></pre>\n"},{"tags":[],"owner":{"account_id":6976419,"reputation":348,"user_id":5351034,"accept_rate":0,"display_name":"Deepak Vajpayee"},"comment_count":0,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1497723019,"creation_date":1497723019,"answer_id":44607820,"question_id":6020719,"body_markdown":"I was facing the same problem. I used e.getCause().getCause() then I found that it was because of wrong parameters I was passing. There was nullPointerException in fetching the value of one of the parameters.\r\nHope this will help you.","title":"What could cause java.lang.reflect.InvocationTargetException?","body":"<p>I was facing the same problem. I used e.getCause().getCause() then I found that it was because of wrong parameters I was passing. There was nullPointerException in fetching the value of one of the parameters.\nHope this will help you.</p>\n"},{"tags":[],"owner":{"account_id":267334,"reputation":2179,"user_id":555451,"display_name":"Stuart Cardall"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1513243726,"creation_date":1513243726,"answer_id":47809934,"question_id":6020719,"body_markdown":"I had a `java.lang.reflect.InvocationTargetException` error from a statement calling a logger object in an external `class` inside a `try` / `catch` block in my `class`.\r\n\r\nStepping through the code in the Eclipse debugger &amp; hovering the mouse over the logger statement I saw the logger `object` was `null` (some external constants needed to be instantiated at the very top of my `class`).","title":"What could cause java.lang.reflect.InvocationTargetException?","body":"<p>I had a <code>java.lang.reflect.InvocationTargetException</code> error from a statement calling a logger object in an external <code>class</code> inside a <code>try</code> / <code>catch</code> block in my <code>class</code>.</p>\n\n<p>Stepping through the code in the Eclipse debugger &amp; hovering the mouse over the logger statement I saw the logger <code>object</code> was <code>null</code> (some external constants needed to be instantiated at the very top of my <code>class</code>).</p>\n"},{"tags":[],"owner":{"account_id":3486878,"reputation":3337,"user_id":2917564,"accept_rate":77,"display_name":"jobbert"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1639403271,"creation_date":1639403271,"answer_id":70335708,"question_id":6020719,"body_markdown":"A problem can also be that the targetSdkVersion is upped and that you use deprecated Gradle manifest features. Try lowering the targetSdkVersion again and see if it works. In my case it was targetSdkVersion 31 -&gt; 30","title":"What could cause java.lang.reflect.InvocationTargetException?","body":"<p>A problem can also be that the targetSdkVersion is upped and that you use deprecated Gradle manifest features. Try lowering the targetSdkVersion again and see if it works. In my case it was targetSdkVersion 31 -&gt; 30</p>\n"},{"tags":[],"owner":{"account_id":13366317,"reputation":113,"user_id":9646463,"display_name":"Abhay Nagaraj"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1653663372,"creation_date":1653663372,"answer_id":72407303,"question_id":6020719,"body_markdown":"*Invocation Target Exception*: \r\n\r\n&gt; I strongly believe that any naming convention has diligent thoughts invested\r\n&gt; in it. And, it is more than likely that our questions have their\r\n&gt; answers in the names, if we tried finding a rationale behind the name.\r\n\r\n \r\nLet&#39;s break the name up into 3 parts.\r\n&quot;**Exception**&quot; has occurred when &quot;**Invoking**&quot; a &quot;**Target**&quot; method.\r\nAnd, the exception is thrown with this wrapper when, a method is invoked via ***reflection*** in Java. While executing the method, there could be any type of exception raised. It is by design, that the actual cause of the exception is abstracted away, to let the end user know that the exception was one that occurred during a reflection based method access. In order to get the actual cause, it is recommended that the exception is caught and `ex.getCause()` is called. Best practice is to, in fact throw the cause from the catch block that caught the `InvocationTargetException`\r\n```\r\ntry{\r\n    method.invoke();\r\n} catch(InvocationTargetException ite) {\r\n    throw ite.getCause();\r\n} catch(Exception e) {\r\n    // handle non-reflection originated exceptions\r\n    throw e;\r\n}\r\n\r\n```\r\nI know it is similar to the other answers, but I wanted to make it more clear about &quot;when&quot; this exception type is generated by Java, so that it is a mystery to none.","title":"What could cause java.lang.reflect.InvocationTargetException?","body":"<p><em>Invocation Target Exception</em>:</p>\n<blockquote>\n<p>I strongly believe that any naming convention has diligent thoughts invested\nin it. And, it is more than likely that our questions have their\nanswers in the names, if we tried finding a rationale behind the name.</p>\n</blockquote>\n<p>Let's break the name up into 3 parts.\n&quot;<strong>Exception</strong>&quot; has occurred when &quot;<strong>Invoking</strong>&quot; a &quot;<strong>Target</strong>&quot; method.\nAnd, the exception is thrown with this wrapper when, a method is invoked via <em><strong>reflection</strong></em> in Java. While executing the method, there could be any type of exception raised. It is by design, that the actual cause of the exception is abstracted away, to let the end user know that the exception was one that occurred during a reflection based method access. In order to get the actual cause, it is recommended that the exception is caught and <code>ex.getCause()</code> is called. Best practice is to, in fact throw the cause from the catch block that caught the <code>InvocationTargetException</code></p>\n<pre><code>try{\n    method.invoke();\n} catch(InvocationTargetException ite) {\n    throw ite.getCause();\n} catch(Exception e) {\n    // handle non-reflection originated exceptions\n    throw e;\n}\n\n</code></pre>\n<p>I know it is similar to the other answers, but I wanted to make it more clear about &quot;when&quot; this exception type is generated by Java, so that it is a mystery to none.</p>\n"}],"owner":{"account_id":264268,"reputation":4639,"user_id":550413,"accept_rate":88,"display_name":"user550413"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1353878,"favorite_count":0,"down_vote_count":1,"up_vote_count":374,"accepted_answer_id":6020758,"answer_count":15,"score":373,"last_activity_date":1677057306,"creation_date":1305565024,"question_id":6020719,"body_markdown":"Well, I&#39;ve tried to understand and read what could cause it but I just can&#39;t get it:\r\n\r\nI have this somewhere in my code:\r\n\r\n     try{\r\n     ..\r\n     m.invoke(testObject);\r\n     ..\r\n     } catch(AssertionError e){\r\n     ...\r\n     } catch(Exception e){\r\n     ..\r\n     }\r\n\r\n Thing is that, when it tries to invoke some method it throws\r\n `InvocationTargetException` instead of some other expected exception (specifically `ArrayIndexOutOfBoundsException`).\r\n As I actually know what method is invoked I went straight to this method code and added a try-catch block for the line that suppose to throw  `ArrayIndexOutOfBoundsException` and it really threw `ArrayIndexOutOfBoundsException` as expected. Yet when going up it\r\n somehow changes to `InvocationTargetException` and in the code above `catch(Exception e)` \r\n e is `InvocationTargetException` and not `ArrayIndexOutOfBoundsException`\r\n as expected.\r\n\r\n\r\n What could cause such a behavior or how can I check such a thing?","title":"What could cause java.lang.reflect.InvocationTargetException?","body":"<p>Well, I've tried to understand and read what could cause it but I just can't get it:</p>\n\n<p>I have this somewhere in my code:</p>\n\n<pre><code> try{\n ..\n m.invoke(testObject);\n ..\n } catch(AssertionError e){\n ...\n } catch(Exception e){\n ..\n }\n</code></pre>\n\n<p>Thing is that, when it tries to invoke some method it throws\n <code>InvocationTargetException</code> instead of some other expected exception (specifically <code>ArrayIndexOutOfBoundsException</code>).\n As I actually know what method is invoked I went straight to this method code and added a try-catch block for the line that suppose to throw  <code>ArrayIndexOutOfBoundsException</code> and it really threw <code>ArrayIndexOutOfBoundsException</code> as expected. Yet when going up it\n somehow changes to <code>InvocationTargetException</code> and in the code above <code>catch(Exception e)</code> \n e is <code>InvocationTargetException</code> and not <code>ArrayIndexOutOfBoundsException</code>\n as expected.</p>\n\n<p>What could cause such a behavior or how can I check such a thing?</p>\n"},{"tags":["java","spring-boot","azure","spring-cloud","azure-eventhub"],"answers":[{"tags":[],"owner":{"account_id":21872598,"reputation":195,"user_id":16161919,"display_name":"ShaikMaheer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677056847,"creation_date":1677056847,"answer_id":75530365,"question_id":75519545,"body_markdown":"From error it seems, service principle doesn&#39;t have necessary permissions. But you mention already given roles and permissions. Still could you please kindly recheck if `Azure Event Hubs Data sender` and `Azure Event Hubs Data receiver` roles added?\r\nBelow Microsoft Documentation has steps to follow. Kindly cross verify with it if all good with setup.\r\nhttps://github.com/MicrosoftDocs/azure-docs/blob/main/articles/azure-web-pubsub/howto-develop-event-listener.md","title":"Event Hub connection issue with spring boot with service principal","body":"<p>From error it seems, service principle doesn't have necessary permissions. But you mention already given roles and permissions. Still could you please kindly recheck if <code>Azure Event Hubs Data sender</code> and <code>Azure Event Hubs Data receiver</code> roles added?\nBelow Microsoft Documentation has steps to follow. Kindly cross verify with it if all good with setup.\n<a href=\"https://github.com/MicrosoftDocs/azure-docs/blob/main/articles/azure-web-pubsub/howto-develop-event-listener.md\" rel=\"nofollow noreferrer\">https://github.com/MicrosoftDocs/azure-docs/blob/main/articles/azure-web-pubsub/howto-develop-event-listener.md</a></p>\n"}],"owner":{"account_id":27840854,"reputation":1,"user_id":21257361,"display_name":"Mouli"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":344,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677056847,"creation_date":1676977108,"question_id":75519545,"body_markdown":"When I’m using Service principal in Spring Boot Reactive way of sending events to event hub application is getting error as\r\n```\r\n&quot;amqp:unauthorized-access&quot; error Description &quot;Unauthorized access. &#39;Send&#39; claim(s) are required to perform this operation. Resource: &#39;xxx&#39; Sender link was never active. Closing endpoint states.\r\n```\r\n\r\nThis issue is occurring when we use the service principal, but when ConnectionString is used, it works fine.\r\n\r\nCode is using the reactive way Flux sinks and many suppliers are used for sending events, for example:\r\n\r\n```\r\npublic class EventProducer {\r\n\r\n    private static final Logger log = LoggerFactory.getLogger(EventProducer.class);\r\n    ExecutorService executor = Executors.newFixedThreadPool(5);\r\n    @Autowired\r\n    private Sinks.Many&lt;Message&lt;String&gt;&gt; many;\r\n\r\n    @Override\r\n    public void send(AppMessage message) {\r\n        log.info(&quot; In  EventProducer Send &quot;);\r\n\r\n        Runnable eventTask = () -&gt; {\r\n\r\n            try {\r\n\r\n                log.info(&quot;Going to add message {} to event hub.&quot;, message.getMessage().toRawString());\r\n                many.emitNext(MessageBuilder.withPayload(message.getMessage().toRawString()).build(),\r\n                        Sinks.EmitFailureHandler.FAIL_FAST);\r\n\r\n            }catch (Exception e) {\r\n                e.printStackTrace();\r\n               \r\n            }\r\n        };\r\n            executor.execute(eventTask);\r\n    }\r\n}\r\n```\r\n\r\n```\r\n@Configuration\r\npublic class EventProducerConfiguration {\r\n\r\n    private static final Logger log = LoggerFactory.getLogger(EventProducerConfiguration.class);\r\n    @Bean\r\n    public Sinks.Many&lt;Message&lt;String&gt;&gt; many() {\r\n        return Sinks.many().unicast().onBackpressureBuffer();\r\n    }\r\n\r\n    @Bean\r\n    public Supplier&lt;Flux&lt;Message&lt;String&gt;&gt;&gt; supply(Sinks.Many&lt;Message&lt;String&gt;&gt; many) {\r\n        return () -&gt; many.asFlux()\r\n                .doOnNext(m -&gt; log.info(&quot;Manually sending message {}&quot;, m))\r\n                .doOnError(t -&gt; log.error(&quot;Error encountered&quot;, t));\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\nAnd below are the properties:\r\n```\r\n\r\n  cloud:\r\n    azure:\r\n      credential:\r\n        client-id: xxx\r\n        client-secret: xxx\r\n        profile:\r\n          tenant-id: xxx\r\n      eventhubs:\r\n        namespace: xxx\r\n\r\n    stream:\r\n      bindings:\r\n        supply-out-0:\r\n          destination: xxx\r\n\r\n      function:\r\n        definition: supply\r\n\r\n      poller:\r\n        initial-delay: 0\r\n        fixed-delay: 1000\r\n```\r\n\r\nNote : roles `AzureEventHub Sender`, `AzureEventHub Owner`, `AzureEventHub Receiver` are working with Connection String. This problem is only with role `service principal`. \r\n","title":"Event Hub connection issue with spring boot with service principal","body":"<p>When I’m using Service principal in Spring Boot Reactive way of sending events to event hub application is getting error as</p>\n<pre><code>&quot;amqp:unauthorized-access&quot; error Description &quot;Unauthorized access. 'Send' claim(s) are required to perform this operation. Resource: 'xxx' Sender link was never active. Closing endpoint states.\n</code></pre>\n<p>This issue is occurring when we use the service principal, but when ConnectionString is used, it works fine.</p>\n<p>Code is using the reactive way Flux sinks and many suppliers are used for sending events, for example:</p>\n<pre><code>public class EventProducer {\n\n    private static final Logger log = LoggerFactory.getLogger(EventProducer.class);\n    ExecutorService executor = Executors.newFixedThreadPool(5);\n    @Autowired\n    private Sinks.Many&lt;Message&lt;String&gt;&gt; many;\n\n    @Override\n    public void send(AppMessage message) {\n        log.info(&quot; In  EventProducer Send &quot;);\n\n        Runnable eventTask = () -&gt; {\n\n            try {\n\n                log.info(&quot;Going to add message {} to event hub.&quot;, message.getMessage().toRawString());\n                many.emitNext(MessageBuilder.withPayload(message.getMessage().toRawString()).build(),\n                        Sinks.EmitFailureHandler.FAIL_FAST);\n\n            }catch (Exception e) {\n                e.printStackTrace();\n               \n            }\n        };\n            executor.execute(eventTask);\n    }\n}\n</code></pre>\n<pre><code>@Configuration\npublic class EventProducerConfiguration {\n\n    private static final Logger log = LoggerFactory.getLogger(EventProducerConfiguration.class);\n    @Bean\n    public Sinks.Many&lt;Message&lt;String&gt;&gt; many() {\n        return Sinks.many().unicast().onBackpressureBuffer();\n    }\n\n    @Bean\n    public Supplier&lt;Flux&lt;Message&lt;String&gt;&gt;&gt; supply(Sinks.Many&lt;Message&lt;String&gt;&gt; many) {\n        return () -&gt; many.asFlux()\n                .doOnNext(m -&gt; log.info(&quot;Manually sending message {}&quot;, m))\n                .doOnError(t -&gt; log.error(&quot;Error encountered&quot;, t));\n    }\n\n}\n</code></pre>\n<p>And below are the properties:</p>\n<pre><code>\n  cloud:\n    azure:\n      credential:\n        client-id: xxx\n        client-secret: xxx\n        profile:\n          tenant-id: xxx\n      eventhubs:\n        namespace: xxx\n\n    stream:\n      bindings:\n        supply-out-0:\n          destination: xxx\n\n      function:\n        definition: supply\n\n      poller:\n        initial-delay: 0\n        fixed-delay: 1000\n</code></pre>\n<p>Note : roles <code>AzureEventHub Sender</code>, <code>AzureEventHub Owner</code>, <code>AzureEventHub Receiver</code> are working with Connection String. This problem is only with role <code>service principal</code>.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":3,"creation_date":1677046997,"post_id":75528685,"comment_id":133257934,"body_markdown":"Just wondering, but is the relative convolution of the code necessary to reproduce the problem? Or can it be reproduced with e.g., only one class and a functional interface implemented via a method reference?","body":"Just wondering, but is the relative convolution of the code necessary to reproduce the problem? Or can it be reproduced with e.g., only one class and a functional interface implemented via a method reference?"},{"owner":{"account_id":17835,"reputation":303915,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":1,"creation_date":1677057050,"post_id":75528685,"comment_id":133260253,"body_markdown":"@Slaw: I could reproduce the result by simply doing `Runnable r = () -&gt; {}; System.out.println(r.getClass().getCanonicalName());`. That prints some internal class name in Java 11 and null in Java 17.","body":"@Slaw: I could reproduce the result by simply doing <code>Runnable r = () -&gt; {}; System.out.println(r.getClass().getCanonicalName());</code>. That prints some internal class name in Java 11 and null in Java 17."}],"answers":[{"tags":[],"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1677052977,"creation_date":1677051579,"answer_id":75529510,"question_id":75528685,"body_markdown":"After a bit of investigation, it is apparently because since Java 15, method references and lambdas (or rather, `invokedynamic`) are now implemented using [hidden classes][1], at least in the OpenJDK. In short, hidden classes are classes that are defined dynamically at runtime, using [`Lookup.defineHiddenClass`][2], has no binary name, and does not need a class loader to be loaded.\r\n\r\nTry also printing `getClass().isHidden()` in `printClassName`. It should print `true`.\r\n\r\nYou can also compare the [Java 15 implementation][3] of `InnerClassLambdaMetafactory` vs the [Java 8 implementation][4]. The latter uses the deprecated `sun.misc.Unsafe.defineAnonymousClass`.\r\n\r\nAccording to the JEP that introduced hidden classes, which was also implemented in Java 15, `getCanonicalName` returning null is the expected behaviour:\r\n\r\n&gt; Via the `Class` object, the hidden class can be instantiated and its members accessed as if it was a normal class, except for four restrictions:\r\n&gt;\r\n&gt; 1. `Class::getName` returns a string that is not a binary name, as described earlier.\r\n&gt; 2. `Class::getCanonicalName` returns null, indicating the hidden class has no canonical name. (Note that the `Class `object for an anonymous class in the Java language has the same behavior.)\r\n&gt;\r\n&gt; 3. [...]\r\n\r\nAt the end of the day, the objects produced by a method reference expression only has the guarantees stated in [this section of the JLS][5]. The implementation could change at any moment, and this case is exactly an example of that.\r\n\r\n\r\n  [1]: https://openjdk.org/jeps/371\r\n  [2]: https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/invoke/MethodHandles.Lookup.html#defineHiddenClass(byte%5B%5D,boolean,java.lang.invoke.MethodHandles.Lookup.ClassOption...)\r\n  [3]: https://github.com/openjdk/jdk15/blob/master/src/java.base/share/classes/java/lang/invoke/InnerClassLambdaMetafactory.java#L382\r\n  [4]: https://hg.openjdk.org/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/lang/invoke/InnerClassLambdaMetafactory.java#l324\r\n  [5]: https://docs.oracle.com/javase/specs/jls/se17/html/jls-15.html#jls-15.13.3","title":"getCanonicalName() returns null when running in a different Java version","body":"<p>After a bit of investigation, it is apparently because since Java 15, method references and lambdas (or rather, <code>invokedynamic</code>) are now implemented using <a href=\"https://openjdk.org/jeps/371\" rel=\"nofollow noreferrer\">hidden classes</a>, at least in the OpenJDK. In short, hidden classes are classes that are defined dynamically at runtime, using <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/lang/invoke/MethodHandles.Lookup.html#defineHiddenClass(byte%5B%5D,boolean,java.lang.invoke.MethodHandles.Lookup.ClassOption...)\" rel=\"nofollow noreferrer\"><code>Lookup.defineHiddenClass</code></a>, has no binary name, and does not need a class loader to be loaded.</p>\n<p>Try also printing <code>getClass().isHidden()</code> in <code>printClassName</code>. It should print <code>true</code>.</p>\n<p>You can also compare the <a href=\"https://github.com/openjdk/jdk15/blob/master/src/java.base/share/classes/java/lang/invoke/InnerClassLambdaMetafactory.java#L382\" rel=\"nofollow noreferrer\">Java 15 implementation</a> of <code>InnerClassLambdaMetafactory</code> vs the <a href=\"https://hg.openjdk.org/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/lang/invoke/InnerClassLambdaMetafactory.java#l324\" rel=\"nofollow noreferrer\">Java 8 implementation</a>. The latter uses the deprecated <code>sun.misc.Unsafe.defineAnonymousClass</code>.</p>\n<p>According to the JEP that introduced hidden classes, which was also implemented in Java 15, <code>getCanonicalName</code> returning null is the expected behaviour:</p>\n<blockquote>\n<p>Via the <code>Class</code> object, the hidden class can be instantiated and its members accessed as if it was a normal class, except for four restrictions:</p>\n<ol>\n<li><p><code>Class::getName</code> returns a string that is not a binary name, as described earlier.</p>\n</li>\n<li><p><code>Class::getCanonicalName</code> returns null, indicating the hidden class has no canonical name. (Note that the <code>Class </code>object for an anonymous class in the Java language has the same behavior.)</p>\n</li>\n<li><p>[...]</p>\n</li>\n</ol>\n</blockquote>\n<p>At the end of the day, the objects produced by a method reference expression only has the guarantees stated in <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-15.html#jls-15.13.3\" rel=\"nofollow noreferrer\">this section of the JLS</a>. The implementation could change at any moment, and this case is exactly an example of that.</p>\n"}],"owner":{"account_id":897406,"reputation":897,"user_id":934373,"accept_rate":80,"display_name":"Hawk"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":244,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":1,"score":5,"last_activity_date":1677056685,"creation_date":1677044673,"question_id":75528685,"body_markdown":"\r\n\r\n    public class MyClass{\r\n        public void action() {\r\n        }\r\n        public void test(){\r\n            MyClassNameTest.takeAction(this::action);\r\n        }\r\n    }\r\n\r\n    public interface MyInterface {\r\n        public void action();\r\n        default void printClassName(){\r\n            System.out.println(&quot;java version: &quot; + System.getProperty(&quot;java.version&quot;));\r\n            System.out.println(&quot;getCanonicalName: &quot; + getClass().getCanonicalName());\r\n            System.out.println(&quot;getName: &quot; + getClass().getName());\r\n            System.out.println(&quot;isAnonymousClass: &quot; + getClass().isAnonymousClass());\r\n        }\r\n    }\r\n\r\nRun this class:\r\n\r\n    public class MyClassNameTest {\r\n        public static void main(String[] args) {\r\n            new MyClass().test();\r\n        }\r\n        static void takeAction(MyInterface myInterface) {\r\n            myInterface.printClassName();\r\n            myInterface.action();\r\n        }\r\n    }\r\n\r\n# Steps to Reproduce\r\n1. compile above classes in java 1.8 or 11\r\n2. run MyClassNameTest in java 15 or above\r\n\r\n# Current result\r\n`getClass().getCanonicalName()` returns null\r\n\r\nIf you run them in the same Java version as you compiled, `getCanonicalName()` returns a non-null string.\r\n\r\nI found the interesting result, but I don&#39;t know the reason. Does anyone know?\r\n","title":"getCanonicalName() returns null when running in a different Java version","body":"<pre><code>public class MyClass{\n    public void action() {\n    }\n    public void test(){\n        MyClassNameTest.takeAction(this::action);\n    }\n}\n\npublic interface MyInterface {\n    public void action();\n    default void printClassName(){\n        System.out.println(&quot;java version: &quot; + System.getProperty(&quot;java.version&quot;));\n        System.out.println(&quot;getCanonicalName: &quot; + getClass().getCanonicalName());\n        System.out.println(&quot;getName: &quot; + getClass().getName());\n        System.out.println(&quot;isAnonymousClass: &quot; + getClass().isAnonymousClass());\n    }\n}\n</code></pre>\n<p>Run this class:</p>\n<pre><code>public class MyClassNameTest {\n    public static void main(String[] args) {\n        new MyClass().test();\n    }\n    static void takeAction(MyInterface myInterface) {\n        myInterface.printClassName();\n        myInterface.action();\n    }\n}\n</code></pre>\n<h1>Steps to Reproduce</h1>\n<ol>\n<li>compile above classes in java 1.8 or 11</li>\n<li>run MyClassNameTest in java 15 or above</li>\n</ol>\n<h1>Current result</h1>\n<p><code>getClass().getCanonicalName()</code> returns null</p>\n<p>If you run them in the same Java version as you compiled, <code>getCanonicalName()</code> returns a non-null string.</p>\n<p>I found the interesting result, but I don't know the reason. Does anyone know?</p>\n"},{"tags":["java","h2"],"comments":[{"owner":{"account_id":402878,"reputation":7719,"user_id":770303,"display_name":"anttix"},"score":1,"creation_date":1480493842,"post_id":40729216,"comment_id":68980717,"body_markdown":"What&#39;s the version currently in use? I would try adding the upgrade JAR to classpath\n\nhttp://www.h2database.com/html/advanced.html#database_upgrade","body":"What&#39;s the version currently in use? I would try adding the upgrade JAR to classpath  <a href=\"http://www.h2database.com/html/advanced.html#database_upgrade\" rel=\"nofollow noreferrer\">h2database.com/html/advanced.html#database_upgrade</a>"},{"owner":{"account_id":402878,"reputation":7719,"user_id":770303,"display_name":"anttix"},"score":0,"creation_date":1480494392,"post_id":40729216,"comment_id":68981015,"body_markdown":"Another idea to try would be to force disable MVCC by explicitly connecting with ;MVCC=FALSE http://www.h2database.com/html/advanced.html#mvcc","body":"Another idea to try would be to force disable MVCC by explicitly connecting with ;MVCC=FALSE <a href=\"http://www.h2database.com/html/advanced.html#mvcc\" rel=\"nofollow noreferrer\">h2database.com/html/advanced.html#mvcc</a>"}],"answers":[{"comments":[{"owner":{"account_id":2928776,"reputation":672,"user_id":2509574,"accept_rate":100,"display_name":"actc"},"score":0,"creation_date":1481019845,"post_id":40992684,"comment_id":69194603,"body_markdown":"So maybe it&#39;s not a false version but a corrupted header?","body":"So maybe it&#39;s not a false version but a corrupted header?"}],"tags":[],"owner":{"account_id":2928776,"reputation":672,"user_id":2509574,"accept_rate":100,"display_name":"actc"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1481020292,"creation_date":1481018895,"answer_id":40992684,"question_id":40729216,"body_markdown":"Try to connect with a database tool like SQuirreL to your database and execute ```SELECT H2VERSION() FROM DUAL``` or ```select value from information_schema.settings where name = \r\n&#39;info.VERSION&#39;; ``` to get the actual version.\r\n\r\nMaybe this link on how to upgrade a h2 database can also be helpful: https://stackoverflow.com/questions/15094815/how-to-check-if-a-h2-database-needs-to-be-upgraded\r\n\r\nOne more thing: your database could be corrupted. You could try to recover the data by using the recovery tool http://www.h2database.com/html/advanced.html#using_recover_tool or to check the database on corruption https://stackoverflow.com/questions/32727588/how-to-check-h2-database-health-and-corruption","title":"h2 database: Unsupported database file version or invalid file header in file","body":"<p>Try to connect with a database tool like SQuirreL to your database and execute <code>SELECT H2VERSION() FROM DUAL</code> or <code>select value from information_schema.settings where name = \n'info.VERSION';</code> to get the actual version.</p>\n\n<p>Maybe this link on how to upgrade a h2 database can also be helpful: <a href=\"https://stackoverflow.com/questions/15094815/how-to-check-if-a-h2-database-needs-to-be-upgraded\">How to check if a h2 database needs to be upgraded?</a></p>\n\n<p>One more thing: your database could be corrupted. You could try to recover the data by using the recovery tool <a href=\"http://www.h2database.com/html/advanced.html#using_recover_tool\" rel=\"nofollow noreferrer\">http://www.h2database.com/html/advanced.html#using_recover_tool</a> or to check the database on corruption <a href=\"https://stackoverflow.com/questions/32727588/how-to-check-h2-database-health-and-corruption\">How to check h2 database health and corruption</a></p>\n"},{"tags":[],"owner":{"account_id":13822754,"reputation":392,"user_id":9977815,"display_name":"mnagdev"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1660547057,"creation_date":1660547057,"answer_id":73357787,"question_id":40729216,"body_markdown":"For me, the problem was with the `JDBC URL` in the h2 login screen.\r\nIt was a random URL and after I changed it to the `spring.datasource.url` value I had set in my application.properties, it started working. \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/3K9we.png","title":"h2 database: Unsupported database file version or invalid file header in file","body":"<p>For me, the problem was with the <code>JDBC URL</code> in the h2 login screen.\nIt was a random URL and after I changed it to the <code>spring.datasource.url</code> value I had set in my application.properties, it started working.</p>\n<p><a href=\"https://i.stack.imgur.com/3K9we.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3K9we.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":11212114,"reputation":3987,"user_id":8225898,"display_name":"Sven D&#246;ring"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677056606,"creation_date":1677014203,"answer_id":75525986,"question_id":40729216,"body_markdown":"I had this error with a persistent TCP H2 database.\r\n\r\nAfter updating the H2 version, the old persisted database file still existed.\r\n\r\nI had to delete the old database file to get rid of the error.\r\n\r\nMy Error Code was ``[90048-214]``.","title":"h2 database: Unsupported database file version or invalid file header in file","body":"<p>I had this error with a persistent TCP H2 database.</p>\n<p>After updating the H2 version, the old persisted database file still existed.</p>\n<p>I had to delete the old database file to get rid of the error.</p>\n<p>My Error Code was <code>[90048-214]</code>.</p>\n"}],"owner":{"account_id":1103657,"reputation":42407,"user_id":1231450,"accept_rate":87,"display_name":"Jan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10200,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":3,"score":8,"last_activity_date":1677056606,"creation_date":1479761785,"question_id":40729216,"body_markdown":"As the title reads, I am trying to open a `.h2.db` file using `DataGrip` on `MacOS`. However, I keep getting the error\r\n\r\n    Unsupported database file version or invalid file header in file\r\n\r\nWith the error code\r\n\r\n    [90048-192]\r\n\r\nHow do I check the actual database file version and how to get the correct driver files(?) ? ","title":"h2 database: Unsupported database file version or invalid file header in file","body":"<p>As the title reads, I am trying to open a <code>.h2.db</code> file using <code>DataGrip</code> on <code>MacOS</code>. However, I keep getting the error</p>\n\n<pre><code>Unsupported database file version or invalid file header in file\n</code></pre>\n\n<p>With the error code</p>\n\n<pre><code>[90048-192]\n</code></pre>\n\n<p>How do I check the actual database file version and how to get the correct driver files(?) ? </p>\n"},{"tags":["java","pdfbox","digital-signature","x509certificate","pades"],"comments":[{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1676930753,"post_id":75505900,"comment_id":133232896,"body_markdown":"In your code you completely ignore that the _signed attributes_ shall be _**signed** attributes_. Your code simply signs the plain document hash.\n\nTo fix this, you first need to make sure that the `attrGen` creates a message-digest attribute with the value of `hashBytes` and that you replace your `ContentSigner nonSigner` by a `ContentSigner` that actually does sign the bytes it retrieves to sign. Reading [RFC 5652](https://www.rfc-editor.org/rfc/rfc5652) may help you understand what needs to be done...","body":"In your code you completely ignore that the <i>signed attributes</i> shall be <i><b>signed</b> attributes</i>. Your code simply signs the plain document hash.  To fix this, you first need to make sure that the <code>attrGen</code> creates a message-digest attribute with the value of <code>hashBytes</code> and that you replace your <code>ContentSigner nonSigner</code> by a <code>ContentSigner</code> that actually does sign the bytes it retrieves to sign. Reading <a href=\"https://www.rfc-editor.org/rfc/rfc5652\" rel=\"nofollow noreferrer\">RFC 5652</a> may help you understand what needs to be done..."},{"owner":{"account_id":24771967,"reputation":33,"user_id":18655652,"display_name":"Tanmay Sharma"},"score":0,"creation_date":1676980286,"post_id":75505900,"comment_id":133242227,"body_markdown":"@mkl, I have updated the code, added message-digest attribute with the value of hashBytes and also made some changes while initialising contentSigner. But as told in description we fetch certificates and signedHash from some external provide (CSC). We don&#39;t have privateKey. So, after fetching signedHash from CSC, we are directly overriding the method getSignature of ContentSignature and returning that signedHash. ContentSigner cannot actually sign the bytes. \n\nCan you please provide way how I can resolve this?","body":"@mkl, I have updated the code, added message-digest attribute with the value of hashBytes and also made some changes while initialising contentSigner. But as told in description we fetch certificates and signedHash from some external provide (CSC). We don&#39;t have privateKey. So, after fetching signedHash from CSC, we are directly overriding the method getSignature of ContentSignature and returning that signedHash. ContentSigner cannot actually sign the bytes.   Can you please provide way how I can resolve this?"},{"owner":{"account_id":10780050,"reputation":113,"user_id":7930831,"display_name":"Himanshu Jindal"},"score":0,"creation_date":1677502614,"post_id":75505900,"comment_id":133344146,"body_markdown":"@mkl Is there any source/documentation for PDFBox which can help in better in-depth understanding of the library?","body":"@mkl Is there any source/documentation for PDFBox which can help in better in-depth understanding of the library?"},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1677504451,"post_id":75505900,"comment_id":133344715,"body_markdown":"@HimanshuJindal *&quot;Is there any source/documentation for PDFBox which can help in better in-depth understanding of the library?&quot;* - Well, in my opinion looking at the source code gives the best understanding, and PDFBox is open source. So simply look there. Furthermore, The PDFBox API often expects you to know the format PDF internally. Thus, have a look at ISO 32000. A part 1 equivalent can be downloaded at https://Adobe.com/go/pdfreference","body":"@HimanshuJindal <i>&quot;Is there any source/documentation for PDFBox which can help in better in-depth understanding of the library?&quot;</i> - Well, in my opinion looking at the source code gives the best understanding, and PDFBox is open source. So simply look there. Furthermore, The PDFBox API often expects you to know the format PDF internally. Thus, have a look at ISO 32000. A part 1 equivalent can be downloaded at <a href=\"https://Adobe.com/go/pdfreference\" rel=\"nofollow noreferrer\">Adobe.com/go/pdfreference</a>"}],"answers":[{"comments":[{"owner":{"account_id":24771967,"reputation":33,"user_id":18655652,"display_name":"Tanmay Sharma"},"score":0,"creation_date":1698810721,"post_id":75530257,"comment_id":136451467,"body_markdown":"When I am changing algorithmIdentifier from 1.2.840.113549.1.1.11 to 1.2.840.113549.1.1.1 then I am getting error &quot;digest oid is null&quot;. Can you please tell me whats wrong in that?","body":"When I am changing algorithmIdentifier from 1.2.840.113549.1.1.11 to 1.2.840.113549.1.1.1 then I am getting error &quot;digest oid is null&quot;. Can you please tell me whats wrong in that?"},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1698819810,"post_id":75530257,"comment_id":136452232,"body_markdown":"@Tanmay *&#39;When I am changing algorithmIdentifier from 1.2.840.113549.1.1.11 to 1.2.840.113549.1.1.1 then I am getting error &quot;digest oid is null&quot;.&#39;* - that change means saying **RSA** instead of **SHA256withRSA**, the signing algorithm without an explicit digest algorithm. So apparently the code that gives you that error requires the digest algorithm to be explicitly included in the signing algorithm.","body":"@Tanmay <i>&#39;When I am changing algorithmIdentifier from 1.2.840.113549.1.1.11 to 1.2.840.113549.1.1.1 then I am getting error &quot;digest oid is null&quot;.&#39;</i> - that change means saying <b>RSA</b> instead of <b>SHA256withRSA</b>, the signing algorithm without an explicit digest algorithm. So apparently the code that gives you that error requires the digest algorithm to be explicitly included in the signing algorithm."},{"owner":{"account_id":24771967,"reputation":33,"user_id":18655652,"display_name":"Tanmay Sharma"},"score":0,"creation_date":1698823338,"post_id":75530257,"comment_id":136452620,"body_markdown":"the OID algorithm used for signing is 1.2.840.113549.1.1.1 and The OID of the algorithm used to calculate the hash value should be 2.16.840.1.101.3.4.2.1. What update shall I made in my code for the same? \nCurrently I am getting document corrupted error in acrobat.","body":"the OID algorithm used for signing is 1.2.840.113549.1.1.1 and The OID of the algorithm used to calculate the hash value should be 2.16.840.1.101.3.4.2.1. What update shall I made in my code for the same?  Currently I am getting document corrupted error in acrobat."},{"owner":{"account_id":24771967,"reputation":33,"user_id":18655652,"display_name":"Tanmay Sharma"},"score":0,"creation_date":1698823559,"post_id":75530257,"comment_id":136452650,"body_markdown":"This is the request sent to external TSP for calculating signed hash\n`{\n&quot;credentialID&quot;: &quot;{{cscKeyID}}&quot;,\n&quot;SAD&quot;: &quot;{{sad}}&quot;,\n&quot;hash&quot;:\n[\n&quot;ODEyYjk2OTA5YTdiOTgwZDYxMjMwOWJlMWVhNWMzNTcwMmZjNTJhOTg5MDg3YzcyODc3MTY3NzhhMDY3NGY2ZA==&quot;\n],\n&quot;hashAlgo&quot;: &quot;2.16.840.1.101.3.4.2.1&quot;,\n&quot;signAlgo&quot;: &quot;1.2.840.113549.1.1.1&quot;,\n&quot;signAlgoParams&quot;: &quot;SHA256withRSA&quot;\n}`\nI am getting document corrputed error for this request in acrobat","body":"This is the request sent to external TSP for calculating signed hash <code>{ &quot;credentialID&quot;: &quot;{{cscKeyID}}&quot;, &quot;SAD&quot;: &quot;{{sad}}&quot;, &quot;hash&quot;: [ &quot;ODEyYjk2OTA5YTdiOTgwZDYxMjMwOWJlMWVhNWMzNTcwMmZjNTJhOTg5MDg&zwnj;&#8203;3YzcyODc3MTY3NzhhMDY&zwnj;&#8203;3NGY2ZA==&quot; ], &quot;hashAlgo&quot;: &quot;2.16.840.1.101.3.4.2.1&quot;, &quot;signAlgo&quot;: &quot;1.2.840.113549.1.1.1&quot;, &quot;signAlgoParams&quot;: &quot;SHA256withRSA&quot; }</code> I am getting document corrputed error for this request in acrobat"},{"owner":{"account_id":24771967,"reputation":33,"user_id":18655652,"display_name":"Tanmay Sharma"},"score":0,"creation_date":1698823648,"post_id":75530257,"comment_id":136452666,"body_markdown":"above code is working fine only with following request sent to external TSP for calculating signed hash\n`{\n&quot;credentialID&quot;: &quot;{{cscKeyID}}&quot;,\n&quot;SAD&quot;: &quot;{{sad}}&quot;,\n&quot;hash&quot;:\n[\n&quot;ODEyYjk2OTA5YTdiOTgwZDYxMjMwOWJlMWVhNWMzNTcwMmZjNTJhOTg5MDg3YzcyODc3MTY3NzhhMDY3NGY2ZA==&quot;\n],\n&quot;signAlgo&quot;: &quot;1.2.840.113549.1.1.11&quot;\n}`","body":"above code is working fine only with following request sent to external TSP for calculating signed hash <code>{ &quot;credentialID&quot;: &quot;{{cscKeyID}}&quot;, &quot;SAD&quot;: &quot;{{sad}}&quot;, &quot;hash&quot;: [ &quot;ODEyYjk2OTA5YTdiOTgwZDYxMjMwOWJlMWVhNWMzNTcwMmZjNTJhOTg5MDg&zwnj;&#8203;3YzcyODc3MTY3NzhhMDY&zwnj;&#8203;3NGY2ZA==&quot; ], &quot;signAlgo&quot;: &quot;1.2.840.113549.1.1.11&quot; }</code>"},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1698825462,"post_id":75530257,"comment_id":136452899,"body_markdown":"@Tanmay This starts to have the dimension of a new stack overflow question. This, please create a genuine question with all the information you have (this also allows better formatting). You can link this question&amp;answer from there.","body":"@Tanmay This starts to have the dimension of a new stack overflow question. This, please create a genuine question with all the information you have (this also allows better formatting). You can link this question&amp;answer from there."},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1698825792,"post_id":75530257,"comment_id":136452944,"body_markdown":"That being said, if the latter variant with `..1.11` works, why do you insist on using `..1.1`? Also, why do you insist on using the same oid in the BouncyCastle content signer method `getAlgorithmIdentifier()` and in the csc call? Depending on the API details the same signing algorithm may be specified by different oid sets.","body":"That being said, if the latter variant with <code>..1.11</code> works, why do you insist on using <code>..1.1</code>? Also, why do you insist on using the same oid in the BouncyCastle content signer method <code>getAlgorithmIdentifier()</code> and in the csc call? Depending on the API details the same signing algorithm may be specified by different oid sets."}],"tags":[],"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"comment_count":7,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1677056293,"creation_date":1677056293,"answer_id":75530257,"question_id":75505900,"body_markdown":"In a comment you explained\r\n\r\n&gt;  we fetch certificates and signedHash from some external provide (CSC). We don&#39;t have privateKey. So, after fetching signedHash from CSC, we are directly overriding the method getSignature of ContentSignature and returning that signedHash. ContentSigner cannot actually sign the bytes. \r\n\r\nContentSigner **can** actually sign the bytes. You merely have to call CSC signing from within it.\r\n\r\nSimplifying your code a bit you can do that as follows:\r\n\r\n```lang-java\r\ntry (\r\n    OutputStream output = new FileOutputStream(outFile);\r\n    PDDocument document = PDDocument.load(resource)   \r\n) {\r\n    PDSignature signature = new PDSignature();\r\n\r\n    signature.setFilter(PDSignature.FILTER_ADOBE_PPKLITE);\r\n    signature.setSubFilter(PDSignature.SUBFILTER_ETSI_CADES_DETACHED);\r\n    signature.setName(&quot;Test Name&quot;);\r\n    signature.setSignDate(Calendar.getInstance());\r\n\r\n    SignatureOptions signatureOptions = new SignatureOptions();\r\n    signatureOptions.setPage(0);\r\n\r\n    document.addSignature(signature, signatureOptions);\r\n    ExternalSigningSupport externalSigning = document.saveIncrementalForExternalSigning(output);\r\n\r\n    // retrieve signer certificate and its chain\r\n    Certificate[] certificateChain = retrieveCertificates(requestId, providerId, credentialId, accessToken);\r\n    X509Certificate cert = (X509Certificate) certificateChain[0];\r\n\r\n    // build signed attribute table generator and SignerInfo generator builder\r\n    ESSCertIDv2 certid = new ESSCertIDv2(\r\n            new AlgorithmIdentifier(NISTObjectIdentifiers.id_sha256),\r\n            MessageDigest.getInstance(&quot;SHA-256&quot;).digest(cert.getEncoded())\r\n    );\r\n    SigningCertificateV2 sigcert = new SigningCertificateV2(certid);\r\n    Attribute attr = new Attribute(PKCSObjectIdentifiers.id_aa_signingCertificateV2, new DERSet(sigcert));\r\n\r\n    ASN1EncodableVector v = new ASN1EncodableVector();\r\n    v.add(attr);\r\n    AttributeTable atttributeTable = new AttributeTable(v);\r\n    CMSAttributeTableGenerator attrGen = new DefaultSignedAttributeTableGenerator(atttributeTable);\r\n\r\n    org.bouncycastle.asn1.x509.Certificate cert2 = org.bouncycastle.asn1.x509.Certificate.getInstance(ASN1Primitive.fromByteArray(cert.getEncoded()));\r\n    JcaSignerInfoGeneratorBuilder sigb = new JcaSignerInfoGeneratorBuilder(new JcaDigestCalculatorProviderBuilder().build());\r\n    sigb.setSignedAttributeGenerator(attrGen);\r\n\r\n    // create ContentSigner that signs by calling the CSC endpoint\r\n    ContentSigner contentSigner = new ContentSigner() {\r\n        private MessageDigest digest = MessageDigest.getInstance(&quot;SHA-256&quot;);\r\n        private OutputStream stream = OutputStreamFactory.createStream(digest);\r\n\r\n        @Override\r\n        public byte[] getSignature() {\r\n            try {\r\n                byte[] hash = digest.digest();\r\n                byte[] signedHash = signHash(requestId, providerId, accessToken, hash);\r\n                return signedHash;\r\n            } catch (Exception e) {\r\n                throw new RuntimeException(&quot;Exception while signing&quot;, e);\r\n            }\r\n        }\r\n\r\n        @Override\r\n        public OutputStream getOutputStream() {\r\n            return stream;\r\n        }\r\n\r\n        @Override\r\n        public AlgorithmIdentifier getAlgorithmIdentifier() {\r\n            return new AlgorithmIdentifier(new ASN1ObjectIdentifier(&quot;1.2.840.113549.1.1.11&quot;));\r\n        }\r\n    };\r\n\r\n    // create the SignedData generator and execute\r\n    CMSSignedDataGenerator gen = new CMSSignedDataGenerator();\r\n    gen.addCertificates(new JcaCertStore(Arrays.asList(certificateChain)));\r\n    gen.addSignerInfoGenerator(sigb.build(contentSigner, new X509CertificateHolder(cert2)));\r\n\r\n    CMSTypedData msg = new CMSTypedDataInputStream(externalSigning.getContent());\r\n    CMSSignedData signedData = gen.generate(msg, false);\r\n\r\n    byte[] cmsSignature = signedData.getEncoded();\r\n    externalSigning.setSignature(cmsSignature);\r\n}\r\n```\r\n*([RemoteSigning][1] test method `testSignLikeSkdjksDfkslImproved`)*\r\n\r\n\r\n  [1]: https://github.com/mkl-public/testarea-pdfbox2/blob/master/src/test/java/mkl/testarea/pdfbox2/sign/RemoteSigning.java#L224","title":"pdfbox - document getting corrupted after adding signed attributes","body":"<p>In a comment you explained</p>\n<blockquote>\n<p>we fetch certificates and signedHash from some external provide (CSC). We don't have privateKey. So, after fetching signedHash from CSC, we are directly overriding the method getSignature of ContentSignature and returning that signedHash. ContentSigner cannot actually sign the bytes.</p>\n</blockquote>\n<p>ContentSigner <strong>can</strong> actually sign the bytes. You merely have to call CSC signing from within it.</p>\n<p>Simplifying your code a bit you can do that as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>try (\n    OutputStream output = new FileOutputStream(outFile);\n    PDDocument document = PDDocument.load(resource)   \n) {\n    PDSignature signature = new PDSignature();\n\n    signature.setFilter(PDSignature.FILTER_ADOBE_PPKLITE);\n    signature.setSubFilter(PDSignature.SUBFILTER_ETSI_CADES_DETACHED);\n    signature.setName(&quot;Test Name&quot;);\n    signature.setSignDate(Calendar.getInstance());\n\n    SignatureOptions signatureOptions = new SignatureOptions();\n    signatureOptions.setPage(0);\n\n    document.addSignature(signature, signatureOptions);\n    ExternalSigningSupport externalSigning = document.saveIncrementalForExternalSigning(output);\n\n    // retrieve signer certificate and its chain\n    Certificate[] certificateChain = retrieveCertificates(requestId, providerId, credentialId, accessToken);\n    X509Certificate cert = (X509Certificate) certificateChain[0];\n\n    // build signed attribute table generator and SignerInfo generator builder\n    ESSCertIDv2 certid = new ESSCertIDv2(\n            new AlgorithmIdentifier(NISTObjectIdentifiers.id_sha256),\n            MessageDigest.getInstance(&quot;SHA-256&quot;).digest(cert.getEncoded())\n    );\n    SigningCertificateV2 sigcert = new SigningCertificateV2(certid);\n    Attribute attr = new Attribute(PKCSObjectIdentifiers.id_aa_signingCertificateV2, new DERSet(sigcert));\n\n    ASN1EncodableVector v = new ASN1EncodableVector();\n    v.add(attr);\n    AttributeTable atttributeTable = new AttributeTable(v);\n    CMSAttributeTableGenerator attrGen = new DefaultSignedAttributeTableGenerator(atttributeTable);\n\n    org.bouncycastle.asn1.x509.Certificate cert2 = org.bouncycastle.asn1.x509.Certificate.getInstance(ASN1Primitive.fromByteArray(cert.getEncoded()));\n    JcaSignerInfoGeneratorBuilder sigb = new JcaSignerInfoGeneratorBuilder(new JcaDigestCalculatorProviderBuilder().build());\n    sigb.setSignedAttributeGenerator(attrGen);\n\n    // create ContentSigner that signs by calling the CSC endpoint\n    ContentSigner contentSigner = new ContentSigner() {\n        private MessageDigest digest = MessageDigest.getInstance(&quot;SHA-256&quot;);\n        private OutputStream stream = OutputStreamFactory.createStream(digest);\n\n        @Override\n        public byte[] getSignature() {\n            try {\n                byte[] hash = digest.digest();\n                byte[] signedHash = signHash(requestId, providerId, accessToken, hash);\n                return signedHash;\n            } catch (Exception e) {\n                throw new RuntimeException(&quot;Exception while signing&quot;, e);\n            }\n        }\n\n        @Override\n        public OutputStream getOutputStream() {\n            return stream;\n        }\n\n        @Override\n        public AlgorithmIdentifier getAlgorithmIdentifier() {\n            return new AlgorithmIdentifier(new ASN1ObjectIdentifier(&quot;1.2.840.113549.1.1.11&quot;));\n        }\n    };\n\n    // create the SignedData generator and execute\n    CMSSignedDataGenerator gen = new CMSSignedDataGenerator();\n    gen.addCertificates(new JcaCertStore(Arrays.asList(certificateChain)));\n    gen.addSignerInfoGenerator(sigb.build(contentSigner, new X509CertificateHolder(cert2)));\n\n    CMSTypedData msg = new CMSTypedDataInputStream(externalSigning.getContent());\n    CMSSignedData signedData = gen.generate(msg, false);\n\n    byte[] cmsSignature = signedData.getEncoded();\n    externalSigning.setSignature(cmsSignature);\n}\n</code></pre>\n<p><em>(<a href=\"https://github.com/mkl-public/testarea-pdfbox2/blob/master/src/test/java/mkl/testarea/pdfbox2/sign/RemoteSigning.java#L224\" rel=\"nofollow noreferrer\">RemoteSigning</a> test method <code>testSignLikeSkdjksDfkslImproved</code>)</em></p>\n"}],"owner":{"account_id":24771967,"reputation":33,"user_id":18655652,"display_name":"Tanmay Sharma"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":307,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75530257,"answer_count":1,"score":1,"last_activity_date":1677056293,"creation_date":1676874412,"question_id":75505900,"body_markdown":"I am trying to digitally sign document using pdfbox. I am using filter as *FILTER_ADOBE_PPKLITE* and subfilter as *SUBFILTER_ETSI_CADES_DETACHED*. For ETSI_CADES_Detached, a signing attribute is needs to be added. I am fetching signed hash and  certificates from CSC&gt; But after adding signing attribute, it is making the document corrupted. Sharing the screenshot for the reference \r\n\r\nerror image\r\n\r\n![1](https://i.stack.imgur.com/KKgRh.png)\r\n\r\nSeems like hash is getting chagned. Sharing code for the reference.\r\n\r\n```\r\nPDDocument document = PDDocument.load(inputStream);\r\n\r\n            outFile = File.createTempFile(&quot;signedFIle&quot;, &quot;.pdf&quot;);\r\n\r\n            Certificate[] certificateChain = retrieveCertificates(requestId, providerId, credentialId, accessToken);//Retrieve certificates from CSC.\r\n\r\n\r\n            setCertificateChain(certificateChain);\r\n\r\n            // sign\r\n            FileOutputStream output = new FileOutputStream(outFile);\r\n            IOUtils.copy(inputStream, output);\r\n\r\n            // create signature dictionary\r\n            PDSignature signature = new PDSignature();\r\n//            signature.setType(COSName.SIG);\r\n\r\n\r\n//        PDAcroForm acroForm = document.getDocumentCatalog().getAcroForm(null);\r\n\r\n            int accessPermissions = SigUtils.getMDPPermission(document);\r\n            if (accessPermissions == 1)\r\n            {\r\n                throw new IllegalStateException(&quot;No changes to the document are permitted due to DocMDP transform parameters dictionary&quot;);\r\n            }\r\n\r\n            \r\n\r\n            signature.setFilter(PDSignature.FILTER_ADOBE_PPKLITE);\r\n            signature.setSubFilter(PDSignature.SUBFILTER_ETSI_CADES_DETACHED);\r\n            signature.setName(&quot;Test Name&quot;);\r\n//            signature.setLocation(&quot;Bucharest, RO&quot;);\r\n//            signature.setReason(&quot;PDFBox Signing&quot;);\r\n            signature.setSignDate(Calendar.getInstance());\r\n            Rectangle2D humanRect = new Rectangle2D.Float(location.getLeft(), location.getBottom(), location.getRight(), location.getTop());\r\n\r\n            PDRectangle rect = createSignatureRectangle(document, humanRect);\r\n\r\n            SignatureOptions signatureOptions = new SignatureOptions();\r\n            signatureOptions.setVisualSignature(createVisualSignatureTemplate(document, 0, rect, signature));\r\n            signatureOptions.setPage(0);\r\n            document.addSignature(signature, signatureOptions);\r\n\r\n\r\n            ExternalSigningSupport externalSigning =\r\n                    document.saveIncrementalForExternalSigning(output);\r\n\r\n            InputStream content = externalSigning.getContent();\r\n\r\n\r\n\r\n            CMSSignedDataGenerator gen = new CMSSignedDataGenerator();\r\n            X509Certificate cert = (X509Certificate) certificateChain[0];\r\n            gen.addCertificates(new JcaCertStore(Arrays.asList(certificateChain)));\r\n\r\n            MessageDigest digest = MessageDigest.getInstance(&quot;SHA-256&quot;);\r\n\r\n            // Use a buffer to read the input stream in chunks\r\n            byte[] buffer = new byte[4096];\r\n            int bytesRead;\r\n            while ((bytesRead = content.read(buffer)) != -1) {\r\n                digest.update(buffer, 0, bytesRead);\r\n            }\r\n\r\n            byte[] hashBytes = digest.digest();\r\n\r\n            ESSCertIDv2 certid = new ESSCertIDv2(\r\n                    new AlgorithmIdentifier(new ASN1ObjectIdentifier(&quot;*****&quot;)),\r\n                    MessageDigest.getInstance(&quot;SHA-256&quot;).digest(cert.getEncoded())\r\n            );\r\n\r\n            SigningCertificateV2 sigcert = new SigningCertificateV2(certid);\r\n\r\n            final DERSet attrValues = new DERSet(sigcert);\r\n            Attribute attr = new Attribute(PKCSObjectIdentifiers.id_aa_signingCertificateV2, attrValues);\r\n            ASN1EncodableVector v = new ASN1EncodableVector();\r\n            v.add(attr);\r\n            v.add(new Attribute(CMSAttributes.messageDigest, new DERSet(new DEROctetString(hashBytes))));\r\n\r\n            AttributeTable atttributeTable = new AttributeTable(v);\r\n            //Create a standard attribute table from the passed in parameters - certhash\r\n            CMSAttributeTableGenerator attrGen = new DefaultSignedAttributeTableGenerator(atttributeTable);\r\n\r\n\r\n            final byte[] signedHash = signHash(requestId, providerId, accessToken, hashBytes); //Retrieve signed hash from CSC.\r\n\r\n            ContentSigner contentSigner = new ContentSigner() {\r\n\r\n                @Override\r\n                public byte[] getSignature() {\r\n                    return signedHash;\r\n                }\r\n\r\n                @Override\r\n                public OutputStream getOutputStream() {\r\n                    ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();\r\n                    byteArrayOutputStream.writeBytes(hashBytes);\r\n                    return byteArrayOutputStream;\r\n                }\r\n\r\n                @Override\r\n                public AlgorithmIdentifier getAlgorithmIdentifier() {\r\n                    return new AlgorithmIdentifier(new ASN1ObjectIdentifier(&quot;1.2.840.113549.1.1.11&quot;));\r\n                }\r\n            };\r\n\r\n\r\n\r\n            org.bouncycastle.asn1.x509.Certificate cert2 = org.bouncycastle.asn1.x509.Certificate.getInstance(ASN1Primitive.fromByteArray(cert.getEncoded()));\r\n            JcaSignerInfoGeneratorBuilder sigb = new JcaSignerInfoGeneratorBuilder(new JcaDigestCalculatorProviderBuilder().build());\r\n\r\n//            RevocationInfoResponse revocationInfoResponse = sealingService.getRevocationInfo(requestId, accessToken, revocationInfoRequest);\r\n\r\n\r\n\r\n            sigb.setSignedAttributeGenerator(attrGen);\r\n\r\n\r\n//            sigb.setDirectSignature( true );\r\n            gen.addSignerInfoGenerator(sigb.build(contentSigner, new X509CertificateHolder(cert2)));\r\n            CMSTypedData msg = new CMSProcessableInputStream( inputStream);\r\n\r\n            CMSSignedData signedData = gen.generate((CMSTypedData)msg, false);\r\n            byte[] cmsSignature = signedData.getEncoded();\r\n\r\n            inputStream.close();\r\n\r\n            externalSigning.setSignature(cmsSignature);\r\n            IOUtils.closeQuietly(signatureOptions);\r\n\r\n            return new FileInputStream(outFile);\r\n```\r\n\r\n\r\n\r\nIf I use subfilter as SUBFILTER_ADBE_PKCS7_DETACHED and don&#39;t add addtibutesTable, then it works fine. But for SUBFILTER_ETSI_CADES_DETACHED, attributes needs to be added.","title":"pdfbox - document getting corrupted after adding signed attributes","body":"<p>I am trying to digitally sign document using pdfbox. I am using filter as <em>FILTER_ADOBE_PPKLITE</em> and subfilter as <em>SUBFILTER_ETSI_CADES_DETACHED</em>. For ETSI_CADES_Detached, a signing attribute is needs to be added. I am fetching signed hash and  certificates from CSC&gt; But after adding signing attribute, it is making the document corrupted. Sharing the screenshot for the reference</p>\n<p>error image</p>\n<p><img src=\"https://i.stack.imgur.com/KKgRh.png\" alt=\"1\" /></p>\n<p>Seems like hash is getting chagned. Sharing code for the reference.</p>\n<pre><code>PDDocument document = PDDocument.load(inputStream);\n\n            outFile = File.createTempFile(&quot;signedFIle&quot;, &quot;.pdf&quot;);\n\n            Certificate[] certificateChain = retrieveCertificates(requestId, providerId, credentialId, accessToken);//Retrieve certificates from CSC.\n\n\n            setCertificateChain(certificateChain);\n\n            // sign\n            FileOutputStream output = new FileOutputStream(outFile);\n            IOUtils.copy(inputStream, output);\n\n            // create signature dictionary\n            PDSignature signature = new PDSignature();\n//            signature.setType(COSName.SIG);\n\n\n//        PDAcroForm acroForm = document.getDocumentCatalog().getAcroForm(null);\n\n            int accessPermissions = SigUtils.getMDPPermission(document);\n            if (accessPermissions == 1)\n            {\n                throw new IllegalStateException(&quot;No changes to the document are permitted due to DocMDP transform parameters dictionary&quot;);\n            }\n\n            \n\n            signature.setFilter(PDSignature.FILTER_ADOBE_PPKLITE);\n            signature.setSubFilter(PDSignature.SUBFILTER_ETSI_CADES_DETACHED);\n            signature.setName(&quot;Test Name&quot;);\n//            signature.setLocation(&quot;Bucharest, RO&quot;);\n//            signature.setReason(&quot;PDFBox Signing&quot;);\n            signature.setSignDate(Calendar.getInstance());\n            Rectangle2D humanRect = new Rectangle2D.Float(location.getLeft(), location.getBottom(), location.getRight(), location.getTop());\n\n            PDRectangle rect = createSignatureRectangle(document, humanRect);\n\n            SignatureOptions signatureOptions = new SignatureOptions();\n            signatureOptions.setVisualSignature(createVisualSignatureTemplate(document, 0, rect, signature));\n            signatureOptions.setPage(0);\n            document.addSignature(signature, signatureOptions);\n\n\n            ExternalSigningSupport externalSigning =\n                    document.saveIncrementalForExternalSigning(output);\n\n            InputStream content = externalSigning.getContent();\n\n\n\n            CMSSignedDataGenerator gen = new CMSSignedDataGenerator();\n            X509Certificate cert = (X509Certificate) certificateChain[0];\n            gen.addCertificates(new JcaCertStore(Arrays.asList(certificateChain)));\n\n            MessageDigest digest = MessageDigest.getInstance(&quot;SHA-256&quot;);\n\n            // Use a buffer to read the input stream in chunks\n            byte[] buffer = new byte[4096];\n            int bytesRead;\n            while ((bytesRead = content.read(buffer)) != -1) {\n                digest.update(buffer, 0, bytesRead);\n            }\n\n            byte[] hashBytes = digest.digest();\n\n            ESSCertIDv2 certid = new ESSCertIDv2(\n                    new AlgorithmIdentifier(new ASN1ObjectIdentifier(&quot;*****&quot;)),\n                    MessageDigest.getInstance(&quot;SHA-256&quot;).digest(cert.getEncoded())\n            );\n\n            SigningCertificateV2 sigcert = new SigningCertificateV2(certid);\n\n            final DERSet attrValues = new DERSet(sigcert);\n            Attribute attr = new Attribute(PKCSObjectIdentifiers.id_aa_signingCertificateV2, attrValues);\n            ASN1EncodableVector v = new ASN1EncodableVector();\n            v.add(attr);\n            v.add(new Attribute(CMSAttributes.messageDigest, new DERSet(new DEROctetString(hashBytes))));\n\n            AttributeTable atttributeTable = new AttributeTable(v);\n            //Create a standard attribute table from the passed in parameters - certhash\n            CMSAttributeTableGenerator attrGen = new DefaultSignedAttributeTableGenerator(atttributeTable);\n\n\n            final byte[] signedHash = signHash(requestId, providerId, accessToken, hashBytes); //Retrieve signed hash from CSC.\n\n            ContentSigner contentSigner = new ContentSigner() {\n\n                @Override\n                public byte[] getSignature() {\n                    return signedHash;\n                }\n\n                @Override\n                public OutputStream getOutputStream() {\n                    ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();\n                    byteArrayOutputStream.writeBytes(hashBytes);\n                    return byteArrayOutputStream;\n                }\n\n                @Override\n                public AlgorithmIdentifier getAlgorithmIdentifier() {\n                    return new AlgorithmIdentifier(new ASN1ObjectIdentifier(&quot;1.2.840.113549.1.1.11&quot;));\n                }\n            };\n\n\n\n            org.bouncycastle.asn1.x509.Certificate cert2 = org.bouncycastle.asn1.x509.Certificate.getInstance(ASN1Primitive.fromByteArray(cert.getEncoded()));\n            JcaSignerInfoGeneratorBuilder sigb = new JcaSignerInfoGeneratorBuilder(new JcaDigestCalculatorProviderBuilder().build());\n\n//            RevocationInfoResponse revocationInfoResponse = sealingService.getRevocationInfo(requestId, accessToken, revocationInfoRequest);\n\n\n\n            sigb.setSignedAttributeGenerator(attrGen);\n\n\n//            sigb.setDirectSignature( true );\n            gen.addSignerInfoGenerator(sigb.build(contentSigner, new X509CertificateHolder(cert2)));\n            CMSTypedData msg = new CMSProcessableInputStream( inputStream);\n\n            CMSSignedData signedData = gen.generate((CMSTypedData)msg, false);\n            byte[] cmsSignature = signedData.getEncoded();\n\n            inputStream.close();\n\n            externalSigning.setSignature(cmsSignature);\n            IOUtils.closeQuietly(signatureOptions);\n\n            return new FileInputStream(outFile);\n</code></pre>\n<p>If I use subfilter as SUBFILTER_ADBE_PKCS7_DETACHED and don't add addtibutesTable, then it works fine. But for SUBFILTER_ETSI_CADES_DETACHED, attributes needs to be added.</p>\n"},{"tags":["java","jboss7.x","jboss-eap-7"],"comments":[{"owner":{"account_id":15607679,"reputation":827,"user_id":11259999,"display_name":"soumitra goswami"},"score":0,"creation_date":1677056877,"post_id":75530253,"comment_id":133260208,"body_markdown":"Also noticed this exception - ``` 14:24:49,859 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0051: Admin console listening on http://127.0.0.1:9080\n14:31:09,062 ERROR [io.undertow.request] (External Management Request Threads -- 1) UT005071: Undertow request failed HttpServerExchange{ GET /management}: java.io.IOError: java.io.FileNotFoundException: Invalid file path\n        at org.xnio.channels.Channels$4.run(Channels.java:1103)```","body":"Also noticed this exception - ``` 14:24:49,859 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0051: Admin console listening on <a href=\"http://127.0.0.1:9080\" rel=\"nofollow noreferrer\">127.0.0.1:9080</a> 14:31:09,062 ERROR [io.undertow.request] (External Management Request Threads -- 1) UT005071: Undertow request failed HttpServerExchange{ GET /management}: java.io.IOError: java.io.FileNotFoundException: Invalid file path         at org.xnio.channels.Channels$4.run(Channels.java:1103)```"}],"owner":{"account_id":15607679,"reputation":827,"user_id":11259999,"display_name":"soumitra goswami"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":127,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677056276,"creation_date":1677056276,"question_id":75530253,"body_markdown":"I installed JBoss 7.4 eap on my windows 10 laptop using the installer and configured the ports for the undertow http listener to 9090 and 9080 for the admin console.\r\nThis is the jdk version - \r\n```\r\nCalling &quot;C:\\JBoss\\jboss-eap-7.4\\bin\\standalone.conf.bat&quot;\r\nSetting JAVA property to &quot;C:\\Program Files\\Amazon Corretto\\jdk1.8.0_332\\bin\\java&quot;\r\n===============================================================================\r\n\r\n  JBoss Bootstrap Environment\r\n\r\n  JBOSS_HOME: &quot;C:\\JBoss\\jboss-eap-7.4&quot;\r\n\r\n  JAVA: &quot;C:\\Program Files\\Amazon Corretto\\jdk1.8.0_332\\bin\\java&quot;\r\n\r\n  JAVA_OPTS: &quot;-Dprogram.name=standalone.bat -Xms1G -Xmx1G -XX:MetaspaceSize=96M -XX:MaxMetaspaceSize=256m -Djava.net.preferIPv4Stack=true -Djboss.modules.system.pkgs=org.jboss.byteman -verbose:gc -Xloggc:&quot;C:\\JBoss\\jboss-eap-7.4\\standalone\\log\\gc.log&quot; -XX:+PrintGCDetails -XX:+PrintGCDateStamps -XX:+UseGCLogFileRotation -XX:NumberOfGCLogFiles=5 -XX:GCLogFileSize=3M -XX:-TraceClassUnloading &quot;\r\n\r\n===============================================================================\r\n``` \r\nAlso configured the user root/root under ManagementRealm user grp, when I load the    http://127.0.0.1:9080/console/index.html and provide the set credentials, the console output for standalone.bat script keeps showing the following exceptions - \r\n\r\n``` \r\n14:23:22,590 ERROR [io.undertow.request] (External Management Request Threads -- 1) UT005071: Undertow request failed HttpServerExchange{ GET /management}: java.lang.NoClassDefFoundError: Could not initialize class org.xnio.channels.Channels\r\n        at io.undertow.io.UndertowOutputStream.write(UndertowOutputStream.java:231)\r\n        at io.undertow.io.BlockingSenderImpl.writeBuffer(BlockingSenderImpl.java:245)\r\n        at io.undertow.io.BlockingSenderImpl.writeBuffer(BlockingSenderImpl.java:238)\r\n        at io.undertow.io.BlockingSenderImpl.send(BlockingSenderImpl.java:75)\r\n        at io.undertow.io.BlockingSenderImpl.send(BlockingSenderImpl.java:107)\r\n        at org.jboss.as.domain.http.server.DomainUtil.writeResponse(DomainUtil.java:89)\r\n        at org.jboss.as.domain.http.server.DomainApiHandler$1.doSendResponse(DomainApiHandler.java:177)\r\n        at org.jboss.as.domain.http.server.ResponseCallback.sendResponse(ResponseCallback.java:32)\r\n        at org.jboss.as.domain.http.server.DomainApiHandler.handleRequest(DomainApiHandler.java:232)\r\n        at io.undertow.server.handlers.encoding.EncodingHandler.handleRequest(EncodingHandler.java:72)\r\n        at org.jboss.as.domain.http.server.DomainApiCheckHandler.handleRequest(DomainApiCheckHandler.java:91)\r\n        at org.jboss.as.domain.http.server.security.ElytronIdentityHandler.lambda$handleRequest$0(ElytronIdentityHandler.java:62)\r\n        at org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:328)\r\n        at org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:285)\r\n        at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:254)\r\n        at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:225)\r\n        at org.jboss.as.domain.http.server.security.ElytronIdentityHandler.handleRequest(ElytronIdentityHandler.java:61)\r\n        at io.undertow.server.handlers.BlockingHandler.handleRequest(BlockingHandler.java:56)\r\n        at io.undertow.server.Connectors.executeRootHandler(Connectors.java:387)\r\n        at io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:841)\r\n        at org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\r\n        at org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)\r\n        at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)\r\n        at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)\r\n        at java.lang.Thread.run(Thread.java:750)\r\n        at org.jboss.threads.JBossThread.run(JBossThread.java:513)\r\n\r\n14:23:22,590 ERROR [io.undertow.request.io] (External Management Request Threads -- 1) UT005090: Unexpected failure: java.lang.NoClassDefFoundError: Could not initialize class org.xnio.channels.Channels\r\n        at io.undertow.io.UndertowOutputStream.close(UndertowOutputStream.java:348)\r\n        at io.undertow.server.HttpServerExchange$DefaultBlockingHttpExchange.close(HttpServerExchange.java:2008)\r\n        at io.undertow.server.HttpServerExchange.endExchange(HttpServerExchange.java:1689)\r\n        at io.undertow.server.Connectors.executeRootHandler(Connectors.java:427)\r\n        at io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:841)\r\n        at org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\r\n        at org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)\r\n        at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)\r\n        at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)\r\n        at java.lang.Thread.run(Thread.java:750)\r\n        at org.jboss.threads.JBossThread.run(JBossThread.java:513)\r\n```","title":"JBoss 7 Standalone Mode, loading Management console keeps throwing NoClassDefFoundError: Could not initialize class org.xnio.channels.Channels","body":"<p>I installed JBoss 7.4 eap on my windows 10 laptop using the installer and configured the ports for the undertow http listener to 9090 and 9080 for the admin console.\nThis is the jdk version -</p>\n<pre><code>Calling &quot;C:\\JBoss\\jboss-eap-7.4\\bin\\standalone.conf.bat&quot;\nSetting JAVA property to &quot;C:\\Program Files\\Amazon Corretto\\jdk1.8.0_332\\bin\\java&quot;\n===============================================================================\n\n  JBoss Bootstrap Environment\n\n  JBOSS_HOME: &quot;C:\\JBoss\\jboss-eap-7.4&quot;\n\n  JAVA: &quot;C:\\Program Files\\Amazon Corretto\\jdk1.8.0_332\\bin\\java&quot;\n\n  JAVA_OPTS: &quot;-Dprogram.name=standalone.bat -Xms1G -Xmx1G -XX:MetaspaceSize=96M -XX:MaxMetaspaceSize=256m -Djava.net.preferIPv4Stack=true -Djboss.modules.system.pkgs=org.jboss.byteman -verbose:gc -Xloggc:&quot;C:\\JBoss\\jboss-eap-7.4\\standalone\\log\\gc.log&quot; -XX:+PrintGCDetails -XX:+PrintGCDateStamps -XX:+UseGCLogFileRotation -XX:NumberOfGCLogFiles=5 -XX:GCLogFileSize=3M -XX:-TraceClassUnloading &quot;\n\n===============================================================================\n</code></pre>\n<p>Also configured the user root/root under ManagementRealm user grp, when I load the    <a href=\"http://127.0.0.1:9080/console/index.html\" rel=\"nofollow noreferrer\">http://127.0.0.1:9080/console/index.html</a> and provide the set credentials, the console output for standalone.bat script keeps showing the following exceptions -</p>\n<pre><code>14:23:22,590 ERROR [io.undertow.request] (External Management Request Threads -- 1) UT005071: Undertow request failed HttpServerExchange{ GET /management}: java.lang.NoClassDefFoundError: Could not initialize class org.xnio.channels.Channels\n        at io.undertow.io.UndertowOutputStream.write(UndertowOutputStream.java:231)\n        at io.undertow.io.BlockingSenderImpl.writeBuffer(BlockingSenderImpl.java:245)\n        at io.undertow.io.BlockingSenderImpl.writeBuffer(BlockingSenderImpl.java:238)\n        at io.undertow.io.BlockingSenderImpl.send(BlockingSenderImpl.java:75)\n        at io.undertow.io.BlockingSenderImpl.send(BlockingSenderImpl.java:107)\n        at org.jboss.as.domain.http.server.DomainUtil.writeResponse(DomainUtil.java:89)\n        at org.jboss.as.domain.http.server.DomainApiHandler$1.doSendResponse(DomainApiHandler.java:177)\n        at org.jboss.as.domain.http.server.ResponseCallback.sendResponse(ResponseCallback.java:32)\n        at org.jboss.as.domain.http.server.DomainApiHandler.handleRequest(DomainApiHandler.java:232)\n        at io.undertow.server.handlers.encoding.EncodingHandler.handleRequest(EncodingHandler.java:72)\n        at org.jboss.as.domain.http.server.DomainApiCheckHandler.handleRequest(DomainApiCheckHandler.java:91)\n        at org.jboss.as.domain.http.server.security.ElytronIdentityHandler.lambda$handleRequest$0(ElytronIdentityHandler.java:62)\n        at org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:328)\n        at org.wildfly.security.auth.server.SecurityIdentity.runAs(SecurityIdentity.java:285)\n        at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:254)\n        at org.jboss.as.controller.AccessAuditContext.doAs(AccessAuditContext.java:225)\n        at org.jboss.as.domain.http.server.security.ElytronIdentityHandler.handleRequest(ElytronIdentityHandler.java:61)\n        at io.undertow.server.handlers.BlockingHandler.handleRequest(BlockingHandler.java:56)\n        at io.undertow.server.Connectors.executeRootHandler(Connectors.java:387)\n        at io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:841)\n        at org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\n        at org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)\n        at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)\n        at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)\n        at java.lang.Thread.run(Thread.java:750)\n        at org.jboss.threads.JBossThread.run(JBossThread.java:513)\n\n14:23:22,590 ERROR [io.undertow.request.io] (External Management Request Threads -- 1) UT005090: Unexpected failure: java.lang.NoClassDefFoundError: Could not initialize class org.xnio.channels.Channels\n        at io.undertow.io.UndertowOutputStream.close(UndertowOutputStream.java:348)\n        at io.undertow.server.HttpServerExchange$DefaultBlockingHttpExchange.close(HttpServerExchange.java:2008)\n        at io.undertow.server.HttpServerExchange.endExchange(HttpServerExchange.java:1689)\n        at io.undertow.server.Connectors.executeRootHandler(Connectors.java:427)\n        at io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:841)\n        at org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\n        at org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)\n        at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)\n        at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)\n        at java.lang.Thread.run(Thread.java:750)\n        at org.jboss.threads.JBossThread.run(JBossThread.java:513)\n</code></pre>\n"},{"tags":["java","java-8","java-stream"],"answers":[{"comments":[{"owner":{"account_id":6706541,"reputation":439,"user_id":5171274,"accept_rate":75,"display_name":"Lenar"},"score":0,"creation_date":1488325079,"post_id":42491359,"comment_id":72178394,"body_markdown":"unfortunately it&#39;s not going to work.\nyou forgot it&#39;s a list of maps,\nIt causes java.lang.NullPointerException\n\nTried to use your exact code","body":"unfortunately it&#39;s not going to work. you forgot it&#39;s a list of maps, It causes java.lang.NullPointerException  Tried to use your exact code"},{"owner":{"account_id":227916,"reputation":2970,"user_id":489872,"accept_rate":86,"display_name":"ave4496"},"score":0,"creation_date":1488962001,"post_id":42491359,"comment_id":72457925,"body_markdown":"The cast of s.get(&quot;key&quot;) is not necessary","body":"The cast of s.get(&quot;key&quot;) is not necessary"},{"owner":{"account_id":1691733,"reputation":3139,"user_id":1553934,"accept_rate":100,"display_name":"esin88"},"score":1,"creation_date":1488966642,"post_id":42491359,"comment_id":72460718,"body_markdown":"@user489872, no, it is necessary. Because your initial map is `Map&lt;String, Object&gt;`, so everything you `get()` from that map is `Object`. And if you want to create a `Map&lt;String, String&gt;` you need to provide 2 functions in `toMap` function that produces Strings. What I mean is, for your `keyMapper` function `map.get(&quot;key&quot;)` gives you an `Object`. And if you want your key of type `String` you need a cast. And this example won&#39;t compile if you remove this cast, just checked.","body":"@user489872, no, it is necessary. Because your initial map is <code>Map&lt;String, Object&gt;</code>, so everything you <code>get()</code> from that map is <code>Object</code>. And if you want to create a <code>Map&lt;String, String&gt;</code> you need to provide 2 functions in <code>toMap</code> function that produces Strings. What I mean is, for your <code>keyMapper</code> function <code>map.get(&quot;key&quot;)</code> gives you an <code>Object</code>. And if you want your key of type <code>String</code> you need a cast. And this example won&#39;t compile if you remove this cast, just checked."},{"owner":{"account_id":5045389,"reputation":843,"user_id":4051559,"accept_rate":36,"display_name":"Deepak Kumar"},"score":0,"creation_date":1502624906,"post_id":42491359,"comment_id":78277880,"body_markdown":"This does not work.. Because when you get it from database, it is not just a direct key value pair.. Each map has two keys and two values which is strange.. So if for example tou get it as:   Select emp_ID, max(salary) from Employee group by emp_ID.. in return u get it as... &quot;emp_ID&quot;-&gt;123 and &quot;salary&quot;-&gt;1000.. So the size of the each of the map in the list is 2.. And the above trik does not work..","body":"This does not work.. Because when you get it from database, it is not just a direct key value pair.. Each map has two keys and two values which is strange.. So if for example tou get it as:   Select emp_ID, max(salary) from Employee group by emp_ID.. in return u get it as... &quot;emp_ID&quot;-&gt;123 and &quot;salary&quot;-&gt;1000.. So the size of the each of the map in the list is 2.. And the above trik does not work.."},{"owner":{"account_id":1691733,"reputation":3139,"user_id":1553934,"accept_rate":100,"display_name":"esin88"},"score":0,"creation_date":1502650545,"post_id":42491359,"comment_id":78285327,"body_markdown":"@DeepakKumar what exactly doesn&#39;t work in my answer? If you look at my `queryForList` method, you can see that i populate each map with exactly 2 key-value pairs","body":"@DeepakKumar what exactly doesn&#39;t work in my answer? If you look at my <code>queryForList</code> method, you can see that i populate each map with exactly 2 key-value pairs"},{"owner":{"account_id":9711280,"reputation":838,"user_id":7203065,"accept_rate":83,"display_name":"Sachin Kumar"},"score":0,"creation_date":1543644361,"post_id":42491359,"comment_id":94001821,"body_markdown":"@esin88 Does this solution not fail if the key is duplicated in the list of maps that we get from database ?","body":"@esin88 Does this solution not fail if the key is duplicated in the list of maps that we get from database ?"},{"owner":{"account_id":1691733,"reputation":3139,"user_id":1553934,"accept_rate":100,"display_name":"esin88"},"score":0,"creation_date":1543928941,"post_id":42491359,"comment_id":94088082,"body_markdown":"@SachinKumar, yes, it will fail if there are duplicated keys","body":"@SachinKumar, yes, it will fail if there are duplicated keys"}],"tags":[],"owner":{"account_id":1691733,"reputation":3139,"user_id":1553934,"accept_rate":100,"display_name":"esin88"},"comment_count":7,"down_vote_count":1,"up_vote_count":30,"is_accepted":true,"score":29,"last_activity_date":1616042855,"creation_date":1488214510,"answer_id":42491359,"question_id":42490314,"body_markdown":"You forgot to convert your key and value mappings to produce `String`:\r\n\r\n    final Map&lt;String, String&gt; result = steps\r\n                    .stream()\r\n                    .collect(Collectors.toMap(s -&gt; (String) s.get(&quot;key&quot;),\r\n                                              s -&gt; (String) s.get(&quot;value&quot;)));\r\n\r\nFull example\r\n\r\n    public static void main(String[] args) {\r\n        final List&lt;Map&lt;String, Object&gt;&gt; steps = queryForList(&quot;SELECT key, value FROM table&quot;);\r\n        final Map&lt;String, String&gt; result = steps\r\n                .stream()\r\n                .collect(Collectors.toMap(s -&gt; (String) s.get(&quot;key&quot;), s -&gt; (String) s.get(&quot;value&quot;)));\r\n        result.entrySet().forEach(e -&gt; System.out.println(e.getKey() + &quot; -&gt; &quot; + e.getValue()));\r\n    }\r\n    \r\n    private static List&lt;Map&lt;String, Object&gt;&gt; queryForList(String s) {\r\n        final List&lt;Map&lt;String, Object&gt;&gt; result = new ArrayList&lt;&gt;();\r\n    \r\n        for (int i = 0; i &lt; 10; i++) {\r\n            final Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();\r\n            map.put(&quot;key&quot;, &quot;key&quot; + i);\r\n            map.put(&quot;value&quot;, &quot;value&quot; + i);\r\n            result.add(map);\r\n        }\r\n    \r\n        return result;\r\n    }\r\n\r\nWhich prints\r\n\r\n    key1 -&gt; value1\r\n    key2 -&gt; value2\r\n    key0 -&gt; value0\r\n    key5 -&gt; value5\r\n    key6 -&gt; value6\r\n    key3 -&gt; value3\r\n    key4 -&gt; value4\r\n    key9 -&gt; value9\r\n    key7 -&gt; value7\r\n    key8 -&gt; value8","title":"Convert List of Maps to single Map via streams","body":"<p>You forgot to convert your key and value mappings to produce <code>String</code>:</p>\n<pre><code>final Map&lt;String, String&gt; result = steps\n                .stream()\n                .collect(Collectors.toMap(s -&gt; (String) s.get(&quot;key&quot;),\n                                          s -&gt; (String) s.get(&quot;value&quot;)));\n</code></pre>\n<p>Full example</p>\n<pre><code>public static void main(String[] args) {\n    final List&lt;Map&lt;String, Object&gt;&gt; steps = queryForList(&quot;SELECT key, value FROM table&quot;);\n    final Map&lt;String, String&gt; result = steps\n            .stream()\n            .collect(Collectors.toMap(s -&gt; (String) s.get(&quot;key&quot;), s -&gt; (String) s.get(&quot;value&quot;)));\n    result.entrySet().forEach(e -&gt; System.out.println(e.getKey() + &quot; -&gt; &quot; + e.getValue()));\n}\n\nprivate static List&lt;Map&lt;String, Object&gt;&gt; queryForList(String s) {\n    final List&lt;Map&lt;String, Object&gt;&gt; result = new ArrayList&lt;&gt;();\n\n    for (int i = 0; i &lt; 10; i++) {\n        final Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();\n        map.put(&quot;key&quot;, &quot;key&quot; + i);\n        map.put(&quot;value&quot;, &quot;value&quot; + i);\n        result.add(map);\n    }\n\n    return result;\n}\n</code></pre>\n<p>Which prints</p>\n<pre><code>key1 -&gt; value1\nkey2 -&gt; value2\nkey0 -&gt; value0\nkey5 -&gt; value5\nkey6 -&gt; value6\nkey3 -&gt; value3\nkey4 -&gt; value4\nkey9 -&gt; value9\nkey7 -&gt; value7\nkey8 -&gt; value8\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1691733,"reputation":3139,"user_id":1553934,"accept_rate":100,"display_name":"esin88"},"score":0,"creation_date":1488359643,"post_id":42520687,"comment_id":72190945,"body_markdown":"That&#39;s not exactly the case OP was asking about. He has a list of maps that represents data from the DB. There are 2 columns: `key` and `value`, so every map in that list will have only one 2 entries (one for `&quot;key&quot;` key, and one for `&quot;value&quot;` key). And, btw, in your result map there are no values, only keys mapped to keys, which makes no sense.","body":"That&#39;s not exactly the case OP was asking about. He has a list of maps that represents data from the DB. There are 2 columns: <code>key</code> and <code>value</code>, so every map in that list will have only one 2 entries (one for <code>&quot;key&quot;</code> key, and one for <code>&quot;value&quot;</code> key). And, btw, in your result map there are no values, only keys mapped to keys, which makes no sense."},{"owner":{"account_id":6706541,"reputation":439,"user_id":5171274,"accept_rate":75,"display_name":"Lenar"},"score":0,"creation_date":1488394610,"post_id":42520687,"comment_id":72215258,"body_markdown":"you&#39;re right but only in the part about keys\n... fixing","body":"you&#39;re right but only in the part about keys ... fixing"},{"owner":{"account_id":6706541,"reputation":439,"user_id":5171274,"accept_rate":75,"display_name":"Lenar"},"score":0,"creation_date":1488395521,"post_id":42520687,"comment_id":72215827,"body_markdown":"double checked your &quot;full example&quot;. yes it can work but I didn&#39;t try.\nit can work only for this exact case, so my apologies\n\nThe approach I suggested will work for any list of maps.","body":"double checked your &quot;full example&quot;. yes it can work but I didn&#39;t try. it can work only for this exact case, so my apologies  The approach I suggested will work for any list of maps."}],"tags":[],"owner":{"account_id":6706541,"reputation":439,"user_id":5171274,"accept_rate":75,"display_name":"Lenar"},"comment_count":3,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1488394681,"creation_date":1488324921,"answer_id":42520687,"question_id":42490314,"body_markdown":"The problem is you have a list of maps. The code below should work:    \r\n\r\n    Map&lt;String, String&gt; result = new HashMap&lt;&gt;();\r\n    steps.stream().forEach(map -&gt; {\r\n        result.putAll(map.entrySet().stream()\r\n            .collect(Collectors.toMap(entry -&gt; entry.getKey(), entry -&gt; (String) entry.getValue())));\r\n    });\r\n\r\nIf we try to run this example\r\n\r\n    Map&lt;String, Object&gt; steps1 = new HashMap&lt;&gt;();\r\n    steps1.put(&quot;key11&quot;, &quot;value11&quot;);\r\n    steps1.put(&quot;key12&quot;, &quot;value12&quot;);\r\n\r\n    Map&lt;String, Object&gt; steps2 = new HashMap&lt;&gt;();\r\n    steps2.put(&quot;key21&quot;, &quot;value21&quot;);\r\n    steps2.put(&quot;key22&quot;, &quot;value22&quot;);\r\n\r\n    List&lt;Map&lt;String, Object&gt;&gt; steps = new ArrayList&lt;&gt;();\r\n    steps.add(steps1);\r\n    steps.add(steps2);\r\n\r\n    Map&lt;String, String&gt; result = new HashMap&lt;&gt;();\r\n    steps.stream().forEach(map -&gt; {\r\n        result.putAll(map.entrySet().stream()\r\n            .collect(Collectors.toMap(entry -&gt; entry.getKey(), entry -&gt; (String) entry.getValue())));\r\n    });\r\n    System.out.println(result);\r\n\r\nIt happily gives us the output like that:\r\n\r\n    {key12=value12, key11=value11, key22=value22, key21=value21}","title":"Convert List of Maps to single Map via streams","body":"<p>The problem is you have a list of maps. The code below should work:    </p>\n\n<pre><code>Map&lt;String, String&gt; result = new HashMap&lt;&gt;();\nsteps.stream().forEach(map -&gt; {\n    result.putAll(map.entrySet().stream()\n        .collect(Collectors.toMap(entry -&gt; entry.getKey(), entry -&gt; (String) entry.getValue())));\n});\n</code></pre>\n\n<p>If we try to run this example</p>\n\n<pre><code>Map&lt;String, Object&gt; steps1 = new HashMap&lt;&gt;();\nsteps1.put(\"key11\", \"value11\");\nsteps1.put(\"key12\", \"value12\");\n\nMap&lt;String, Object&gt; steps2 = new HashMap&lt;&gt;();\nsteps2.put(\"key21\", \"value21\");\nsteps2.put(\"key22\", \"value22\");\n\nList&lt;Map&lt;String, Object&gt;&gt; steps = new ArrayList&lt;&gt;();\nsteps.add(steps1);\nsteps.add(steps2);\n\nMap&lt;String, String&gt; result = new HashMap&lt;&gt;();\nsteps.stream().forEach(map -&gt; {\n    result.putAll(map.entrySet().stream()\n        .collect(Collectors.toMap(entry -&gt; entry.getKey(), entry -&gt; (String) entry.getValue())));\n});\nSystem.out.println(result);\n</code></pre>\n\n<p>It happily gives us the output like that:</p>\n\n<pre><code>{key12=value12, key11=value11, key22=value22, key21=value21}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9711280,"reputation":838,"user_id":7203065,"accept_rate":83,"display_name":"Sachin Kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1543645132,"creation_date":1543645132,"answer_id":53568288,"question_id":42490314,"body_markdown":"Adding on to what esin88 said above, if there is a possibility that we get duplicate keys in the list of maps, we would like to get a map with key and list of values rather than key value pair which can be done like below.\r\n\r\n    \tpublic static void main(String[] args) {\r\n\t\tfinal List&lt;Map&lt;String, Object&gt;&gt; steps = queryForList(&quot;SELECT key, value FROM table&quot;);\r\n\t\t/*final Map&lt;String, String&gt; result = steps.stream()\r\n\t\t\t\t.collect(Collectors.toMap(s -&gt; (String) s.get(&quot;key&quot;), s -&gt; (String) s.get(&quot;value&quot;)));*/\r\n\t\tfinal Map&lt;String, List&lt;String&gt;&gt; result1 = steps.stream()\r\n\t\t\t\t.collect(Collectors.groupingBy(k -&gt; String.valueOf(k.get(&quot;key&quot;)),\r\n\t\t\t\t\t\tCollectors.mapping(l -&gt; String.valueOf(l.get(&quot;value&quot;)), Collectors.toList())));\r\n\t\tresult1.entrySet().forEach(e -&gt; System.out.println(e.getKey() + &quot; -&gt; &quot; + e.getValue()));\r\n\t}\r\n\r\n\tprivate static List&lt;Map&lt;String, Object&gt;&gt; queryForList(String s) {\r\n\t\tfinal List&lt;Map&lt;String, Object&gt;&gt; result = new ArrayList&lt;&gt;();\r\n\t\tMap&lt;String, Object&gt; map = new HashMap&lt;&gt;();\r\n\t\tfor (int i = 0; i &lt; 10; i++) {\r\n\t\t\tmap = new HashMap&lt;&gt;();\r\n\t\t\tmap.put(&quot;key&quot;, &quot;key&quot; + i);\r\n\t\t\tmap.put(&quot;value&quot;, &quot;value&quot; + i);\r\n\t\t\tresult.add(map);\r\n\t\t}\r\n\t\tmap = new HashMap&lt;&gt;();\r\n\t\tmap.put(&quot;key&quot;, &quot;key1&quot;);\r\n\t\tmap.put(&quot;value&quot;, &quot;value20&quot;);\r\n\t\tresult.add(map);\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\nThe result would look like\r\n\r\n    key1 -&gt; [value1, value20]\r\n    key2 -&gt; [value2]\r\n    key0 -&gt; [value0]\r\n    key5 -&gt; [value5]\r\n    key6 -&gt; [value6]\r\n    key3 -&gt; [value3]\r\n    key4 -&gt; [value4]\r\n    key9 -&gt; [value9]\r\n    key7 -&gt; [value7]\r\n    key8 -&gt; [value8]","title":"Convert List of Maps to single Map via streams","body":"<p>Adding on to what esin88 said above, if there is a possibility that we get duplicate keys in the list of maps, we would like to get a map with key and list of values rather than key value pair which can be done like below.</p>\n\n<pre><code>    public static void main(String[] args) {\n    final List&lt;Map&lt;String, Object&gt;&gt; steps = queryForList(\"SELECT key, value FROM table\");\n    /*final Map&lt;String, String&gt; result = steps.stream()\n            .collect(Collectors.toMap(s -&gt; (String) s.get(\"key\"), s -&gt; (String) s.get(\"value\")));*/\n    final Map&lt;String, List&lt;String&gt;&gt; result1 = steps.stream()\n            .collect(Collectors.groupingBy(k -&gt; String.valueOf(k.get(\"key\")),\n                    Collectors.mapping(l -&gt; String.valueOf(l.get(\"value\")), Collectors.toList())));\n    result1.entrySet().forEach(e -&gt; System.out.println(e.getKey() + \" -&gt; \" + e.getValue()));\n}\n\nprivate static List&lt;Map&lt;String, Object&gt;&gt; queryForList(String s) {\n    final List&lt;Map&lt;String, Object&gt;&gt; result = new ArrayList&lt;&gt;();\n    Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();\n    for (int i = 0; i &lt; 10; i++) {\n        map = new HashMap&lt;&gt;();\n        map.put(\"key\", \"key\" + i);\n        map.put(\"value\", \"value\" + i);\n        result.add(map);\n    }\n    map = new HashMap&lt;&gt;();\n    map.put(\"key\", \"key1\");\n    map.put(\"value\", \"value20\");\n    result.add(map);\n\n    return result;\n}\n</code></pre>\n\n<p>The result would look like</p>\n\n<pre><code>key1 -&gt; [value1, value20]\nkey2 -&gt; [value2]\nkey0 -&gt; [value0]\nkey5 -&gt; [value5]\nkey6 -&gt; [value6]\nkey3 -&gt; [value3]\nkey4 -&gt; [value4]\nkey9 -&gt; [value9]\nkey7 -&gt; [value7]\nkey8 -&gt; [value8]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13563468,"reputation":101,"user_id":9784349,"display_name":"venkatesh RM"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1601540951,"creation_date":1601540951,"answer_id":64151640,"question_id":42490314,"body_markdown":"We can use the reduce() of java streams to convert a list of maps to a single map in java.\r\n\r\nPlease check the following code on how it is used.\r\n\r\nFor example:\r\n\r\n\t@Data\r\n\t@AllArgsConstructor\r\n\tpublic class Employee {\r\n\r\n\t\tprivate String employeeId;\r\n\t\tprivate String employeeName;\r\n\t\tprivate Map&lt;String,Object&gt; employeeMap;\r\n\t}\r\n\r\n\r\n\tpublic class Test{\r\n\t public static void main(String[] args) {\r\n\t \r\n\t\t\tMap&lt;String, Object&gt; map1 = new HashMap&lt;&gt;();\r\n\t\t\tMap&lt;String, Object&gt; map2 = new HashMap&lt;&gt;();\r\n\t\t\tMap&lt;String, Object&gt; map3 = new HashMap&lt;&gt;();\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tmap1.put(&quot;salary&quot;, 1000);\r\n\t\t\tEmployee e1 = new Employee(&quot;e1&quot;, &quot;employee1&quot;, map1);\r\n\r\n\t\t\tmap2.put(&quot;department&quot;, &quot;HR&quot;);\r\n\t\t\tEmployee e2 = new Employee(&quot;e2&quot;, &quot;employee2&quot;, map2);\r\n\r\n\t\t\tmap3.put(&quot;leave balance&quot;, 14);\r\n\t\t\tEmployee e3 = new Employee(&quot;e3&quot;, &quot;employee3&quot;, map3);\r\n\t\t\t\r\n\t\t\t//now we create a employees list and add the employees e1,e2 and e3.\r\n\t\t\tList&lt;Employee&gt; employeeList = Arrays.asList(e1,e2,e3);\r\n\t\t\t \r\n\t\t\t//now we retreive employeeMap from all employee objects and therefore have a List of employee maps.\r\n\t\t\tList&lt;Map&lt;String, Object&gt;&gt; employeeMaps = employeeList\r\n\t\t\t.stream()\r\n\t\t\t.map(Employee::getEmployeeMap)\r\n\t\t\t.collect(Collectors.toList());\r\n\r\n\t\t\tSystem.out.println(&quot;List of employee maps: &quot; + employeeMaps);\r\n\t\t\t\r\n\t\t\t// to reduce a list of maps to a single map, we use the reduce function of stream.\r\n\t\t\t\r\n\t\t\tMap&lt;String, Object&gt; finalMap = employeeMaps\r\n\t\t\t.stream()\r\n\t\t\t.reduce((firstMap, secondMap) -&gt; {\r\n\t\t\t\t\tfirstMap.putAll(secondMap);\r\n\t\t\t\t\t return firstMap;\r\n\t\t\t\t  }).orElse(null);\r\n\t\t\t\t   \r\n\t\t\tSystem.out.println(&quot;final Map: &quot;+ finalMap);\t   \t\t \r\n\t\t\t\r\n\t}\r\n\t}\r\n\r\nOutput:\r\nList of employee maps: [{salary=1000}, {department=HR}, {leave balance=14}].\r\n\r\nfinal Map: {salary=1000, department=HR, leave balance=14}\r\n\r\nPS: Apologies for the extended answer, this is my first time in stackoverflow.\r\n    Thank you :-)\r\n \r\n\r\n","title":"Convert List of Maps to single Map via streams","body":"<p>We can use the reduce() of java streams to convert a list of maps to a single map in java.</p>\n<p>Please check the following code on how it is used.</p>\n<p>For example:</p>\n<pre><code>@Data\n@AllArgsConstructor\npublic class Employee {\n\n    private String employeeId;\n    private String employeeName;\n    private Map&lt;String,Object&gt; employeeMap;\n}\n\n\npublic class Test{\n public static void main(String[] args) {\n \n        Map&lt;String, Object&gt; map1 = new HashMap&lt;&gt;();\n        Map&lt;String, Object&gt; map2 = new HashMap&lt;&gt;();\n        Map&lt;String, Object&gt; map3 = new HashMap&lt;&gt;();\n        \n        \n        map1.put(&quot;salary&quot;, 1000);\n        Employee e1 = new Employee(&quot;e1&quot;, &quot;employee1&quot;, map1);\n\n        map2.put(&quot;department&quot;, &quot;HR&quot;);\n        Employee e2 = new Employee(&quot;e2&quot;, &quot;employee2&quot;, map2);\n\n        map3.put(&quot;leave balance&quot;, 14);\n        Employee e3 = new Employee(&quot;e3&quot;, &quot;employee3&quot;, map3);\n        \n        //now we create a employees list and add the employees e1,e2 and e3.\n        List&lt;Employee&gt; employeeList = Arrays.asList(e1,e2,e3);\n         \n        //now we retreive employeeMap from all employee objects and therefore have a List of employee maps.\n        List&lt;Map&lt;String, Object&gt;&gt; employeeMaps = employeeList\n        .stream()\n        .map(Employee::getEmployeeMap)\n        .collect(Collectors.toList());\n\n        System.out.println(&quot;List of employee maps: &quot; + employeeMaps);\n        \n        // to reduce a list of maps to a single map, we use the reduce function of stream.\n        \n        Map&lt;String, Object&gt; finalMap = employeeMaps\n        .stream()\n        .reduce((firstMap, secondMap) -&gt; {\n                firstMap.putAll(secondMap);\n                 return firstMap;\n              }).orElse(null);\n               \n        System.out.println(&quot;final Map: &quot;+ finalMap);             \n        \n}\n}\n</code></pre>\n<p>Output:\nList of employee maps: [{salary=1000}, {department=HR}, {leave balance=14}].</p>\n<p>final Map: {salary=1000, department=HR, leave balance=14}</p>\n<p>PS: Apologies for the extended answer, this is my first time in stackoverflow.\nThank you :-)</p>\n"}],"owner":{"account_id":227916,"reputation":2970,"user_id":489872,"accept_rate":86,"display_name":"ave4496"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66509,"favorite_count":0,"down_vote_count":1,"up_vote_count":22,"accepted_answer_id":42491359,"answer_count":4,"score":21,"last_activity_date":1677055723,"creation_date":1488211421,"question_id":42490314,"body_markdown":"I query the DB for two columns where the first one is the key to the second one.\r\nHow can I convert the resulting list to a single map?\r\nIs it even possible? I have just seen examples with beans.\r\n\r\n    List&lt;Map&lt;String, Object&gt;&gt; steps = jdbcTemplate.queryForList(\r\n            &quot;SELECT key, value FROM table&quot;);\r\n    \r\n    // well this doesn&#39;t work\r\n    Map&lt;String, String&gt; result = steps.stream()\r\n            .collect(Collectors.toMap(s -&gt; s.get(&quot;key&quot;), s -&gt; s.get(&quot;value&quot;)));\r\n\r\n","title":"Convert List of Maps to single Map via streams","body":"<p>I query the DB for two columns where the first one is the key to the second one.\nHow can I convert the resulting list to a single map?\nIs it even possible? I have just seen examples with beans.</p>\n<pre><code>List&lt;Map&lt;String, Object&gt;&gt; steps = jdbcTemplate.queryForList(\n        &quot;SELECT key, value FROM table&quot;);\n\n// well this doesn't work\nMap&lt;String, String&gt; result = steps.stream()\n        .collect(Collectors.toMap(s -&gt; s.get(&quot;key&quot;), s -&gt; s.get(&quot;value&quot;)));\n</code></pre>\n"},{"tags":["java","hibernate","jpa","hibernate-mapping"],"comments":[{"owner":{"account_id":2310347,"reputation":199,"user_id":2028611,"accept_rate":75,"display_name":"tomerz"},"score":0,"creation_date":1511097235,"post_id":11669722,"comment_id":81706543,"body_markdown":"see my answer here:\nhttps://stackoverflow.com/questions/6212144/how-to-disable-schema-validation-in-hibernate-for-certain-entities/47377231#47377231","body":"see my answer here: <a href=\"https://stackoverflow.com/questions/6212144/how-to-disable-schema-validation-in-hibernate-for-certain-entities/47377231#47377231\" title=\"how to disable schema validation in hibernate for certain entities\">stackoverflow.com/questions/6212144/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":18834,"reputation":6918,"user_id":43575,"accept_rate":77,"display_name":"Thilo-Alexander Ginkel"},"score":2,"creation_date":1343307608,"post_id":11669789,"comment_id":15467458,"body_markdown":"Hibernate won&#39;t recognize my @NamedNativeQuery if I don&#39;t register the entity it is attached to...","body":"Hibernate won&#39;t recognize my @NamedNativeQuery if I don&#39;t register the entity it is attached to..."}],"tags":[],"owner":{"account_id":174031,"reputation":7580,"user_id":403132,"display_name":"Kurt Du Bois"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1343307333,"creation_date":1343307333,"answer_id":11669789,"question_id":11669722,"body_markdown":"I&#39;m not sure as to why you would register that class as being an entity: it&#39;s a custom class and as such it does not have to be attached nor detached from the hibernate/jpa session.","title":"Disabling JPA Hibernate schema validation for a single entity","body":"<p>I'm not sure as to why you would register that class as being an entity: it's a custom class and as such it does not have to be attached nor detached from the hibernate/jpa session.</p>\n"},{"tags":[],"owner":{"account_id":3487048,"reputation":11,"user_id":2917696,"display_name":"Radu Cosma"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1468240281,"creation_date":1468240281,"answer_id":38306992,"question_id":11669722,"body_markdown":"The solution that worked for me was to remove the `hibernate.hbm2ddl.auto` property from `persistence.xml`. Of course, this disables schema validation for all the other entities, but I couldn&#39;t find something else in JPA 2.0.","title":"Disabling JPA Hibernate schema validation for a single entity","body":"<p>The solution that worked for me was to remove the <code>hibernate.hbm2ddl.auto</code> property from <code>persistence.xml</code>. Of course, this disables schema validation for all the other entities, but I couldn't find something else in JPA 2.0.</p>\n"},{"tags":[],"owner":{"account_id":931121,"reputation":21661,"user_id":961018,"accept_rate":56,"display_name":"mjs"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677055528,"creation_date":1677055528,"answer_id":75530117,"question_id":11669722,"body_markdown":"What you can do is take control of the entire Schema generation to give you a string of the sql to be executed, and then remove the lines referencing your table. \r\n\r\nIts a big answer, but that is the way I have it now. \r\n\r\nIt involves adjusting how Hibernate executes the generated DDL, serving it to you in a file for you to execute. This file is opened, lines iterated and some removed. \r\n\r\n","title":"Disabling JPA Hibernate schema validation for a single entity","body":"<p>What you can do is take control of the entire Schema generation to give you a string of the sql to be executed, and then remove the lines referencing your table.</p>\n<p>Its a big answer, but that is the way I have it now.</p>\n<p>It involves adjusting how Hibernate executes the generated DDL, serving it to you in a file for you to execute. This file is opened, lines iterated and some removed.</p>\n"}],"owner":{"account_id":18834,"reputation":6918,"user_id":43575,"accept_rate":77,"display_name":"Thilo-Alexander Ginkel"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":5102,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":3,"score":8,"last_activity_date":1677055528,"creation_date":1343307110,"question_id":11669722,"body_markdown":"I have a JPA entity that I use as the result class of a native query. As such, the entity is not valid per se (as it does not have a table). I use Hibernate 4.1.x as my JPA provider, which performs a schema validation during startup and consequently fails (I did not specify an explicit table):\r\n\r\n    org.hibernate.HibernateException: Missing table: MyEntity\r\n    \tat org.hibernate.cfg.Configuration.validateSchema(Configuration.java:1272)\r\n        [...]\r\n\r\nIs there a way to turn off schema validation for just a single entity (using JPA or hibernate annotations or a change of persistence.xml)? \r\n\r\n**Edit:** I can completely avoid using any entity as a result, but then  Hibernate will return a `List&lt;Object[]&gt;` as query result, which technically works, but is a little ugly to use:\r\n\r\n    Query query = entityManager.get().createNativeQuery(&quot;SELECT node, last_update FROM mm_repl_monitoring.my_mm_nodes&quot;);\r\n    List&lt;Object[]&gt; statuses = query.getResultList();\r\n\r\nIn other words: It would be nice if there was some mapping support that can be used even for native queries that map to non-Entity classes.","title":"Disabling JPA Hibernate schema validation for a single entity","body":"<p>I have a JPA entity that I use as the result class of a native query. As such, the entity is not valid per se (as it does not have a table). I use Hibernate 4.1.x as my JPA provider, which performs a schema validation during startup and consequently fails (I did not specify an explicit table):</p>\n\n<pre><code>org.hibernate.HibernateException: Missing table: MyEntity\n    at org.hibernate.cfg.Configuration.validateSchema(Configuration.java:1272)\n    [...]\n</code></pre>\n\n<p>Is there a way to turn off schema validation for just a single entity (using JPA or hibernate annotations or a change of persistence.xml)? </p>\n\n<p><strong>Edit:</strong> I can completely avoid using any entity as a result, but then  Hibernate will return a <code>List&lt;Object[]&gt;</code> as query result, which technically works, but is a little ugly to use:</p>\n\n<pre><code>Query query = entityManager.get().createNativeQuery(\"SELECT node, last_update FROM mm_repl_monitoring.my_mm_nodes\");\nList&lt;Object[]&gt; statuses = query.getResultList();\n</code></pre>\n\n<p>In other words: It would be nice if there was some mapping support that can be used even for native queries that map to non-Entity classes.</p>\n"},{"tags":["java","netbeans","jframe"],"comments":[{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1677013466,"post_id":75525285,"comment_id":133252755,"body_markdown":"[`ImageIcon`](https://docs.oracle.com/en/java/javase/16/docs/api/java.desktop/javax/swing/ImageIcon.html) does not have a constructor which supports `InputStream`.  Use `Class#getResource` instead.  I would also strongly advice using [`ImageIO.read`](https://docs.oracle.com/javase/tutorial/2d/images/loadimage.html) instead of `ImageIcon`","body":"<a href=\"https://docs.oracle.com/en/java/javase/16/docs/api/java.desktop/javax/swing/ImageIcon.html\" rel=\"nofollow noreferrer\"><code>ImageIcon</code></a> does not have a constructor which supports <code>InputStream</code>.  Use <code>Class#getResource</code> instead.  I would also strongly advice using <a href=\"https://docs.oracle.com/javase/tutorial/2d/images/loadimage.html\" rel=\"nofollow noreferrer\"><code>ImageIO.read</code></a> instead of <code>ImageIcon</code>"}],"owner":{"account_id":27845057,"reputation":1,"user_id":21260720,"display_name":"Arthur Silva Berdusco de Souza"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677055312,"creation_date":1677009300,"question_id":75525285,"body_markdown":"    iconPrincipal.setIcon(new javax.swing.ImageIcon(getClass().getResourceAsStream(&quot;/com/senac/img/casa.png&quot;)));\r\n\r\nI edited the code generated by netbeans to use the getResourceAsStream method to get the icon directly from the image project directory, but it gives an error and asks to create a field called javax\r\n\r\nI looked for some alternatives on the internet but I didn&#39;t find anything to solve this error.\r\n\r\n![enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/aWBFJ.png","title":"Error inserting icon in my jframe project netbeans","body":"<pre><code>iconPrincipal.setIcon(new javax.swing.ImageIcon(getClass().getResourceAsStream(&quot;/com/senac/img/casa.png&quot;)));\n</code></pre>\n<p>I edited the code generated by netbeans to use the getResourceAsStream method to get the icon directly from the image project directory, but it gives an error and asks to create a field called javax</p>\n<p>I looked for some alternatives on the internet but I didn't find anything to solve this error.</p>\n<p><img src=\"https://i.stack.imgur.com/aWBFJ.png\" alt=\"enter image description here\" /></p>\n"},{"tags":["java","json","csv"],"comments":[{"owner":{"account_id":20457051,"reputation":76,"user_id":15010460,"display_name":"donvogel"},"score":0,"creation_date":1676963934,"post_id":75517242,"comment_id":133237539,"body_markdown":"possible duplicate to:\nhttps://stackoverflow.com/questions/7172158/converting-json-to-xls-csv-in-java","body":"possible duplicate to: <a href=\"https://stackoverflow.com/questions/7172158/converting-json-to-xls-csv-in-java\" title=\"converting json to xls csv in java\">stackoverflow.com/questions/7172158/&hellip;</a>"},{"owner":{"account_id":23099829,"reputation":368,"user_id":17209391,"display_name":"Ruby"},"score":0,"creation_date":1676964988,"post_id":75517242,"comment_id":133237779,"body_markdown":"But if the data values in json consist &quot;,&quot; then even that will be replaced with tab. It will lead to incorrect data.","body":"But if the data values in json consist &quot;,&quot; then even that will be replaced with tab. It will lead to incorrect data."},{"owner":{"account_id":2933712,"reputation":6419,"user_id":2513200,"accept_rate":83,"display_name":"Hulk"},"score":0,"creation_date":1676965592,"post_id":75517242,"comment_id":133237919,"body_markdown":"@Ruby you are right - you need some JSON-parser to parse the input data, and a csv library for writing. There are lots of libraries for both topics, one example for a combination is in the linked question.","body":"@Ruby you are right - you need some JSON-parser to parse the input data, and a csv library for writing. There are lots of libraries for both topics, one example for a combination is in the linked question."},{"owner":{"account_id":2933712,"reputation":6419,"user_id":2513200,"accept_rate":83,"display_name":"Hulk"},"score":0,"creation_date":1676966574,"post_id":75517242,"comment_id":133238156,"body_markdown":"@Ruby I assume you are currently using https://stleary.github.io/JSON-java/org/json/CDL.html?","body":"@Ruby I assume you are currently using <a href=\"https://stleary.github.io/JSON-java/org/json/CDL.html\" rel=\"nofollow noreferrer\">stleary.github.io/JSON-java/org/json/CDL.html</a>?"},{"owner":{"account_id":2933712,"reputation":6419,"user_id":2513200,"accept_rate":83,"display_name":"Hulk"},"score":0,"creation_date":1676966957,"post_id":75517242,"comment_id":133238258,"body_markdown":"I&#39;m afraid that library does not provide an option to choose a different delimiter.","body":"I&#39;m afraid that library does not provide an option to choose a different delimiter."},{"owner":{"account_id":23099829,"reputation":368,"user_id":17209391,"display_name":"Ruby"},"score":0,"creation_date":1676973687,"post_id":75517242,"comment_id":133240272,"body_markdown":"@Hulk CDL is specifically for comma, it doen&#39;t  give us an option to change the delimiter. I&#39;m not sure what other methods I can try","body":"@Hulk CDL is specifically for comma, it doen&#39;t  give us an option to change the delimiter. I&#39;m not sure what other methods I can try"},{"owner":{"account_id":2933712,"reputation":6419,"user_id":2513200,"accept_rate":83,"display_name":"Hulk"},"score":0,"creation_date":1676974181,"post_id":75517242,"comment_id":133240418,"body_markdown":"@Ruby [this related question](https://stackoverflow.com/questions/13879967/good-and-effective-csv-tsv-reader-for-java) contains a few links to libraries that might be useful.","body":"@Ruby <a href=\"https://stackoverflow.com/questions/13879967/good-and-effective-csv-tsv-reader-for-java\">this related question</a> contains a few links to libraries that might be useful."}],"answers":[{"tags":[],"owner":{"account_id":1096470,"reputation":26066,"user_id":1089967,"accept_rate":59,"display_name":"lance-java"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677054930,"creation_date":1676981440,"answer_id":75520343,"question_id":75517242,"body_markdown":"You&#39;d probably want to pick a third party JSON parser library. \r\nYou could use the [jackson object mapper](https://www.baeldung.com/jackson-object-mapper-tutorial)\r\n\r\n```java\r\nObjectMapper objectMapper = new ObjectMapper();\r\nString json = &quot;[{ \\&quot;Qty\\&quot;:\\&quot;12\\&quot;, ... }]&quot;;\r\nArrayNode array = objectMapper.readValue(json, ArrayNode.class);\r\nSet&lt;String&gt; fieldNames = new LinkedHashSet&lt;&gt;();\r\nfor (JsonNode node : array) {\r\n   // loop all nodes to get the unique set of fieldNames\r\n   node.fieldNames().forEachRemaining(fieldNames::add);\r\n}\r\nStringWriter sw = new StringWriter();\r\nPrintWriter pw = new PrintWriter(sw);\r\npw.println(fieldNames.stream().collect(Collectors.joining(&quot;\\t&quot;));\r\nfor (JsonNode node : array) {\r\n   String csvRow = fieldNames.stream()\r\n      .map(fieldName -&gt; node.has(fieldName) ? node.get(fieldName).asText() : &quot;&quot;)\r\n      .collect(Collectors.joining(&quot;\\t&quot;))\r\n   pw.println(csvRow);\r\n}\r\nString csv = sw.toString();\r\n```","title":"Converting JSON array to tab delimited csv in java","body":"<p>You'd probably want to pick a third party JSON parser library.\nYou could use the <a href=\"https://www.baeldung.com/jackson-object-mapper-tutorial\" rel=\"nofollow noreferrer\">jackson object mapper</a></p>\n<pre class=\"lang-java prettyprint-override\"><code>ObjectMapper objectMapper = new ObjectMapper();\nString json = &quot;[{ \\&quot;Qty\\&quot;:\\&quot;12\\&quot;, ... }]&quot;;\nArrayNode array = objectMapper.readValue(json, ArrayNode.class);\nSet&lt;String&gt; fieldNames = new LinkedHashSet&lt;&gt;();\nfor (JsonNode node : array) {\n   // loop all nodes to get the unique set of fieldNames\n   node.fieldNames().forEachRemaining(fieldNames::add);\n}\nStringWriter sw = new StringWriter();\nPrintWriter pw = new PrintWriter(sw);\npw.println(fieldNames.stream().collect(Collectors.joining(&quot;\\t&quot;));\nfor (JsonNode node : array) {\n   String csvRow = fieldNames.stream()\n      .map(fieldName -&gt; node.has(fieldName) ? node.get(fieldName).asText() : &quot;&quot;)\n      .collect(Collectors.joining(&quot;\\t&quot;))\n   pw.println(csvRow);\n}\nString csv = sw.toString();\n</code></pre>\n"}],"owner":{"account_id":23099829,"reputation":368,"user_id":17209391,"display_name":"Ruby"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":257,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75520343,"answer_count":1,"score":0,"last_activity_date":1677054930,"creation_date":1676963396,"question_id":75517242,"body_markdown":"I have a JSON Array that looks like this:\r\n```[\r\n\t{\r\n        &quot;Qty&quot;: &quot;12&quot;,\r\n\t\t&quot;Size&quot;: &quot;XL&quot;,\r\n\t\t&quot;Colour&quot;: &quot;Blue&quot;,\r\n\t\t&quot;InSale&quot;: &quot;True&quot;\r\n\t},\r\n\t{   &quot;Qty&quot;: &quot;13&quot;,\r\n\t\t&quot;Size&quot;: &quot;M&quot;,\r\n\t\t&quot;Colour&quot;: &quot;Green&quot;,\r\n\t\t&quot;InSale&quot;: &quot;False&quot;}]\r\n```\r\nI want to convert this into a tab separated String. I am able to convert into comma separated string like this and able to write to a file:\r\n```\r\nString csvString = CDL.toString(ProductsJSONArray);\r\nFileUtils.writeStringToFile(file, csvString);\r\n```\r\nHow can I achieve it for tab separated String?\r\nThis is the output I am expecting:\r\n```\r\nQty\tSize\tColor\tInSale\r\n12\tXL\tBlue\tTrue\r\n13\tM\tGreen\tFalse\r\n```\r\n\r\n","title":"Converting JSON array to tab delimited csv in java","body":"<p>I have a JSON Array that looks like this:</p>\n<pre><code>    {\n        &quot;Qty&quot;: &quot;12&quot;,\n        &quot;Size&quot;: &quot;XL&quot;,\n        &quot;Colour&quot;: &quot;Blue&quot;,\n        &quot;InSale&quot;: &quot;True&quot;\n    },\n    {   &quot;Qty&quot;: &quot;13&quot;,\n        &quot;Size&quot;: &quot;M&quot;,\n        &quot;Colour&quot;: &quot;Green&quot;,\n        &quot;InSale&quot;: &quot;False&quot;}]\n</code></pre>\n<p>I want to convert this into a tab separated String. I am able to convert into comma separated string like this and able to write to a file:</p>\n<pre><code>String csvString = CDL.toString(ProductsJSONArray);\nFileUtils.writeStringToFile(file, csvString);\n</code></pre>\n<p>How can I achieve it for tab separated String?\nThis is the output I am expecting:</p>\n<pre><code>Qty Size    Color   InSale\n12  XL  Blue    True\n13  M   Green   False\n</code></pre>\n"},{"tags":["java","spring","hibernate","spring-mvc","jpa"],"answers":[{"comments":[{"owner":{"account_id":25393711,"reputation":29,"user_id":19204271,"display_name":"user1712"},"score":1,"creation_date":1657097809,"post_id":72879923,"comment_id":128726103,"body_markdown":"Thankyou, after changing optional = true it works fine","body":"Thankyou, after changing optional = true it works fine"}],"tags":[],"owner":{"account_id":19395247,"reputation":3208,"user_id":14183092,"display_name":"kerbermeister"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677054703,"creation_date":1657094904,"answer_id":72879923,"question_id":72879766,"body_markdown":"I think it is because you have option `optional = false` in your mapping settings. This option is meant to prevent the null value in **runtime**\r\n\r\n    @ManyToOne(fetch = FetchType.LAZY, optional = false)\r\n    private CustomerDetails cd;\r\n\r\nThe semantics of optional=false are the following:\r\n\r\n&gt; Whether the association is optional. If set to false then a non-null\r\n&gt; relationship must always exist.\r\n\r\nSo you should check whether you have a null value of the corresponding entity\r\n","title":"Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException:","body":"<p>I think it is because you have option <code>optional = false</code> in your mapping settings. This option is meant to prevent the null value in <strong>runtime</strong></p>\n<pre><code>@ManyToOne(fetch = FetchType.LAZY, optional = false)\nprivate CustomerDetails cd;\n</code></pre>\n<p>The semantics of optional=false are the following:</p>\n<blockquote>\n<p>Whether the association is optional. If set to false then a non-null\nrelationship must always exist.</p>\n</blockquote>\n<p>So you should check whether you have a null value of the corresponding entity</p>\n"}],"owner":{"account_id":25393711,"reputation":29,"user_id":19204271,"display_name":"user1712"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1341,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1677054703,"creation_date":1657094027,"question_id":72879766,"body_markdown":"\r\n\r\n&gt; **Exception SEVERE: Servlet.service() for servlet [dispatcher] in\r\n&gt; context with path [/z2] threw exception [Request processing failed;\r\n&gt; nested exception is\r\n&gt; org.springframework.dao.DataIntegrityViolationException: not-null\r\n&gt; property references a null or transient value :**\r\n&gt; com.spring.entity.Product.cd; nested exception is\r\n&gt; org.hibernate.PropertyValueException: not-null property references a\r\n&gt; null or transient value : com.spring.entity.Product.cd]\r\n&gt; with root cause org.hibernate.PropertyValueException: not-null\r\n&gt; property references a null or transient value :\r\n&gt; com.spring.entity.Product.cd \tat\r\n&gt; org.hibernate.engine.internal.Nullability.checkNullability(Nullability.java:106)\r\n&gt; \tat\r\n&gt; org.hibernate.action.internal.AbstractEntityInsertAction.nullifyTransientReferencesIfNotAlready(AbstractEntityInsertAction.java:132)\r\n&gt; \tat\r\n&gt; org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:86)\r\n&gt; \tat org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:490)\r\n&gt; \tat\r\n&gt; org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:195)\r\n&gt; \tat\r\n&gt; org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:179)\r\n&gt; \tat\r\n&gt; org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:214)\r\n&gt; \tat\r\n&gt; org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:324)\r\n&gt; \tat\r\n&gt; org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:288)\r\n&gt; \tat\r\n&gt; org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:194)\r\n&gt; \tat\r\n&gt; org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:125)\r\n&gt; \tat\r\n&gt; org.hibernate.jpa.event.internal.core.JpaPersistEventListener.saveWithGeneratedId(JpaPersistEventListener.java:84)\r\n&gt; \tat\r\n&gt; org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:206)\r\n&gt; \tat\r\n&gt; org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:149)\r\n&gt; \tat\r\n&gt; org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:75)\r\n&gt; \tat\r\n&gt; org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:811)\r\n&gt; \tat org.hibernate.internal.SessionImpl.persist(SessionImpl.java:784)\r\n&gt; \tat org.hibernate.internal.SessionImpl.persist(SessionImpl.java:789)\r\n&gt; \tat\r\n&gt; org.hibernate.jpa.spi.AbstractEntityManagerImpl.persist(AbstractEntityManagerImpl.java:1181)\r\n&gt; \tat\r\n&gt; java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native\r\n&gt; Method) \tat\r\n&gt; java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n&gt; \tat\r\n&gt; java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n&gt; \tat java.base/java.lang.reflect.Method.invoke(Method.java:566) \tat\r\n&gt; org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:257)\r\n&gt; \tat com.sun.proxy.$Proxy39.persist(Unknown Source) \tat\r\n&gt; org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:431)\r\n&gt; \tat\r\n&gt; java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native\r\n&gt; Method) \tat\r\n&gt; java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n&gt; \tat\r\n&gt; java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n&gt; \tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\r\nEntity classes\r\n\r\n        @Entity\r\n        @Table(name = &quot;tbl_Customer&quot;)\r\n        public class CustomerDetails {\r\n        \r\n        \t@Id\r\n            @GeneratedValue\r\n            @Column(name=&quot;Customer_Id&quot;)\r\n            private Long custid;\r\n        \r\n        \t@Column(name=&quot;Customer_Name&quot;)\r\n            private String customerName;\r\n        \t\r\n        \t@Column(name=&quot;Email&quot;)\r\n            private String email;\r\n        \t\r\n        \t@Column(name=&quot;Address&quot;)\r\n            private String address;\r\n        \t\r\n        \t@Column(name=&quot;Phone&quot;)\r\n            private String phoneno;\r\n           \t\r\n            public CustomerDetails() {\r\n            }\r\n        \r\n        \t@Override\r\n        \tpublic String toString() {\r\n        \t\treturn &quot;CustomerDetails [custid=&quot; + custid + &quot;, customername=&quot; + customerName + &quot;, email=&quot; + email\r\n        \t\t\t\t+ &quot;, address=&quot; + address + &quot;, phoneno=&quot; + phoneno + &quot;]&quot;;\r\n        \t}\r\n        \r\n        \tpublic CustomerDetails(String customername, String email, String address, String phoneno) {\r\n        \t\tsuper();\r\n        \t\tthis.customerName = customername;\r\n        \t\tthis.email = email;\r\n        \t\tthis.address = address;\r\n        \t\tthis.phoneno = phoneno;\r\n        \t}\r\n        \r\n        \t@OneToMany(mappedBy = &quot;cd&quot;, fetch = FetchType.LAZY,cascade = CascadeType.ALL)\r\n            private Set&lt;Product&gt; product;\r\n        \t\r\n        //getters and setters\r\n        }\r\n    --------------------------------------------------------------------------------------------------\r\n    \r\n    @Entity\r\n    @Table(name=&quot;tbl_Product&quot;)\r\n    public class Product {\r\n     \r\n    \t\r\n    \t@Id\r\n    \t@GeneratedValue\r\n    \t@Column(name=&quot;Product_Id&quot;)\r\n    \tprivate Long productId;\r\n    \t\r\n    \t@Column(name=&quot;Product_Name&quot;)\r\n    \tprivate String productName;\r\n    \t\r\n    \t@Column(name=&quot;Product_Brand&quot;)\r\n    \tprivate String productBrand;\r\n    \t\r\n    \t@Column(name=&quot;Product_Price&quot;)\r\n    \tprivate double productPrice;\r\n    \t\r\n    \t@ManyToOne(fetch = FetchType.LAZY, optional = false)\r\n    \tprivate CustomerDetails cd;\r\n       \r\n    \t\r\n    \t\r\n    \tpublic Product(Long productId, String productName, String productBrand, double productPrice) {\r\n    \t\tsuper();\r\n    \t\tthis.productId = productId;\r\n    \t\tthis.productName = productName;\r\n    \t\tthis.productBrand = productBrand;\r\n    \t\tthis.productPrice = productPrice;\r\n    \t}\r\n    \t\r\n    \t\r\n    \t\r\n    \tpublic Product(String productName, String productBrand, double productPrice) {\r\n    \t\tsuper();\r\n    \t\tthis.productName = productName;\r\n    \t\tthis.productBrand = productBrand;\r\n    \t\tthis.productPrice = productPrice;\r\n    \t}\r\n    \r\n    //getters and setters\r\n    }\r\n\r\n","title":"Request processing failed; nested exception is org.springframework.dao.DataIntegrityViolationException:","body":"<blockquote>\n<p><strong>Exception SEVERE: Servlet.service() for servlet [dispatcher] in\ncontext with path [/z2] threw exception [Request processing failed;\nnested exception is\norg.springframework.dao.DataIntegrityViolationException: not-null\nproperty references a null or transient value :</strong>\ncom.spring.entity.Product.cd; nested exception is\norg.hibernate.PropertyValueException: not-null property references a\nnull or transient value : com.spring.entity.Product.cd]\nwith root cause org.hibernate.PropertyValueException: not-null\nproperty references a null or transient value :\ncom.spring.entity.Product.cd  at\norg.hibernate.engine.internal.Nullability.checkNullability(Nullability.java:106)\nat\norg.hibernate.action.internal.AbstractEntityInsertAction.nullifyTransientReferencesIfNotAlready(AbstractEntityInsertAction.java:132)\nat\norg.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:86)\nat org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:490)\nat\norg.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:195)\nat\norg.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:179)\nat\norg.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:214)\nat\norg.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:324)\nat\norg.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:288)\nat\norg.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:194)\nat\norg.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:125)\nat\norg.hibernate.jpa.event.internal.core.JpaPersistEventListener.saveWithGeneratedId(JpaPersistEventListener.java:84)\nat\norg.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:206)\nat\norg.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:149)\nat\norg.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:75)\nat\norg.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:811)\nat org.hibernate.internal.SessionImpl.persist(SessionImpl.java:784)\nat org.hibernate.internal.SessionImpl.persist(SessionImpl.java:789)\nat\norg.hibernate.jpa.spi.AbstractEntityManagerImpl.persist(AbstractEntityManagerImpl.java:1181)\nat\njava.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native\nMethod)   at\njava.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nat\njava.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.base/java.lang.reflect.Method.invoke(Method.java:566)   at\norg.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:257)\nat com.sun.proxy.$Proxy39.persist(Unknown Source)   at\norg.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:431)\nat\njava.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native\nMethod)   at\njava.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nat\njava.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.base/java.lang.reflect.Method.invoke(Method.java:566)</p>\n</blockquote>\n<p>Entity classes</p>\n<pre><code>    @Entity\n    @Table(name = &quot;tbl_Customer&quot;)\n    public class CustomerDetails {\n    \n        @Id\n        @GeneratedValue\n        @Column(name=&quot;Customer_Id&quot;)\n        private Long custid;\n    \n        @Column(name=&quot;Customer_Name&quot;)\n        private String customerName;\n        \n        @Column(name=&quot;Email&quot;)\n        private String email;\n        \n        @Column(name=&quot;Address&quot;)\n        private String address;\n        \n        @Column(name=&quot;Phone&quot;)\n        private String phoneno;\n        \n        public CustomerDetails() {\n        }\n    \n        @Override\n        public String toString() {\n            return &quot;CustomerDetails [custid=&quot; + custid + &quot;, customername=&quot; + customerName + &quot;, email=&quot; + email\n                    + &quot;, address=&quot; + address + &quot;, phoneno=&quot; + phoneno + &quot;]&quot;;\n        }\n    \n        public CustomerDetails(String customername, String email, String address, String phoneno) {\n            super();\n            this.customerName = customername;\n            this.email = email;\n            this.address = address;\n            this.phoneno = phoneno;\n        }\n    \n        @OneToMany(mappedBy = &quot;cd&quot;, fetch = FetchType.LAZY,cascade = CascadeType.ALL)\n        private Set&lt;Product&gt; product;\n        \n    //getters and setters\n    }\n--------------------------------------------------------------------------------------------------\n\n@Entity\n@Table(name=&quot;tbl_Product&quot;)\npublic class Product {\n \n    \n    @Id\n    @GeneratedValue\n    @Column(name=&quot;Product_Id&quot;)\n    private Long productId;\n    \n    @Column(name=&quot;Product_Name&quot;)\n    private String productName;\n    \n    @Column(name=&quot;Product_Brand&quot;)\n    private String productBrand;\n    \n    @Column(name=&quot;Product_Price&quot;)\n    private double productPrice;\n    \n    @ManyToOne(fetch = FetchType.LAZY, optional = false)\n    private CustomerDetails cd;\n   \n    \n    \n    public Product(Long productId, String productName, String productBrand, double productPrice) {\n        super();\n        this.productId = productId;\n        this.productName = productName;\n        this.productBrand = productBrand;\n        this.productPrice = productPrice;\n    }\n    \n    \n    \n    public Product(String productName, String productBrand, double productPrice) {\n        super();\n        this.productName = productName;\n        this.productBrand = productBrand;\n        this.productPrice = productPrice;\n    }\n\n//getters and setters\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":2161358,"reputation":42669,"user_id":1915448,"accept_rate":96,"display_name":"g00glen00b"},"score":0,"creation_date":1677015524,"post_id":75525940,"comment_id":133253272,"body_markdown":"Are you sure you want to have the double role in `hasRole(&quot;ROLE_USER&quot;)`? If you use the `hasRole(..)` method it already checks for authorities starting with `ROLE_`, so `hasRole(&quot;USER&quot;)` might be enough.","body":"Are you sure you want to have the double role in <code>hasRole(&quot;ROLE_USER&quot;)</code>? If you use the <code>hasRole(..)</code> method it already checks for authorities starting with <code>ROLE_</code>, so <code>hasRole(&quot;USER&quot;)</code> might be enough."},{"owner":{"account_id":27845259,"reputation":23,"user_id":21260876,"display_name":"Expert_Introvert"},"score":0,"creation_date":1677042961,"post_id":75525940,"comment_id":133257357,"body_markdown":"@g00glen00b Thanks for replying, for some reason even `hasRole(&quot;USER&quot;)` is giving me a 403. The JWT token I am receiving on the client seems fine and I am unsure how to debug it.  Any tips on how to debug this?","body":"@g00glen00b Thanks for replying, for some reason even <code>hasRole(&quot;USER&quot;)</code> is giving me a 403. The JWT token I am receiving on the client seems fine and I am unsure how to debug it.  Any tips on how to debug this?"}],"answers":[{"comments":[{"owner":{"account_id":27845259,"reputation":23,"user_id":21260876,"display_name":"Expert_Introvert"},"score":0,"creation_date":1677058643,"post_id":75529945,"comment_id":133260726,"body_markdown":"Perfect! Problem solved, thanks for coming up with a clear &amp; concise answer and this question needs no other answer now.","body":"Perfect! Problem solved, thanks for coming up with a clear &amp; concise answer and this question needs no other answer now."}],"tags":[],"owner":{"account_id":2161358,"reputation":42669,"user_id":1915448,"accept_rate":96,"display_name":"g00glen00b"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1677054477,"creation_date":1677054477,"answer_id":75529945,"question_id":75525940,"body_markdown":"The default `JwtGrantedAuthoritiesConverter` implementation reads the authorities from the `scope` claim (which you provided) and prefixes them with `SCOPE_`. This means that your authorities will become `SCOPE_ROLE_USER` and `SCOPE_ROLE_ADMIN`.\r\n\r\nYou can either adapt to it and change the `SecurityFilterChain` to this:\r\n\r\n```java\r\na.requestMatchers(&quot;/student/&quot;).hasAnyAuthority(&quot;SCOPE_ROLE_USER&quot;);\r\n```\r\n\r\nOr you can create a custom `JwtGrantedAuthoritiesConverter`:\r\n\r\n```java\r\n@Bean\r\npublic JwtGrantedAuthoritiesConverter authoritiesConverter() {\r\n    JwtGrantedAuthoritiesConverter converter = new JwtGrantedAuthoritiesConverter();\r\n    converter.setAuthorityPrefix(&quot;&quot;); // Cannot be null\r\n}\r\n    \r\n@Bean\r\npublic JwtAuthenticationConverter authenticationConverter(JwtGrantedAuthoritiesConverter authoritiesConverter) {\r\n    JwtAuthenticationConverter converter = new JwtAuthenticationConverter();\r\n    converter.setJwtGrantedAuthoritiesConverter(authoritiesConverter);\r\n    return converter;\r\n}\r\n```\r\n\r\nAlso be aware that the difference between authorities and roles is that roles are just authorities that follow a specific naming convention (= being prefixed with `ROLE_`).\r\nThis means that you should either use `hasAnyAuthority(&quot;ROLE_USER&quot;)` or `hasAnyRole(&quot;USER&quot;)`. \r\nSo if you disable the scope prefix, you should change your `SecurityFilterChain` to this:\r\n\r\n```java\r\na.requestMatchers(&quot;/student/&quot;).hasAnyRole(&quot;USER&quot;);\r\n\r\n// or\r\n\r\na.requestMatchers(&quot;/student/&quot;).hasAnyAuthority(&quot;ROLE_USER&quot;);\r\n```\r\n\r\n---\r\n\r\nIn the comments you also asked how to debug this. To debug whether it&#39;s behaving correctly you can:\r\n\r\n- Decode your JWT token to verify that you have a `scope` claim containing your original authorities.\r\n- Put a breakpoint in the `JwtGrantedAuthoritiesConverter.getAuthorities()` method to verify whether the token is properly read.","title":"Spring security config requestMatchers.hasRole() is always giving 403 forbidden status","body":"<p>The default <code>JwtGrantedAuthoritiesConverter</code> implementation reads the authorities from the <code>scope</code> claim (which you provided) and prefixes them with <code>SCOPE_</code>. This means that your authorities will become <code>SCOPE_ROLE_USER</code> and <code>SCOPE_ROLE_ADMIN</code>.</p>\n<p>You can either adapt to it and change the <code>SecurityFilterChain</code> to this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>a.requestMatchers(&quot;/student/&quot;).hasAnyAuthority(&quot;SCOPE_ROLE_USER&quot;);\n</code></pre>\n<p>Or you can create a custom <code>JwtGrantedAuthoritiesConverter</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic JwtGrantedAuthoritiesConverter authoritiesConverter() {\n    JwtGrantedAuthoritiesConverter converter = new JwtGrantedAuthoritiesConverter();\n    converter.setAuthorityPrefix(&quot;&quot;); // Cannot be null\n}\n    \n@Bean\npublic JwtAuthenticationConverter authenticationConverter(JwtGrantedAuthoritiesConverter authoritiesConverter) {\n    JwtAuthenticationConverter converter = new JwtAuthenticationConverter();\n    converter.setJwtGrantedAuthoritiesConverter(authoritiesConverter);\n    return converter;\n}\n</code></pre>\n<p>Also be aware that the difference between authorities and roles is that roles are just authorities that follow a specific naming convention (= being prefixed with <code>ROLE_</code>).\nThis means that you should either use <code>hasAnyAuthority(&quot;ROLE_USER&quot;)</code> or <code>hasAnyRole(&quot;USER&quot;)</code>.\nSo if you disable the scope prefix, you should change your <code>SecurityFilterChain</code> to this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>a.requestMatchers(&quot;/student/&quot;).hasAnyRole(&quot;USER&quot;);\n\n// or\n\na.requestMatchers(&quot;/student/&quot;).hasAnyAuthority(&quot;ROLE_USER&quot;);\n</code></pre>\n<hr />\n<p>In the comments you also asked how to debug this. To debug whether it's behaving correctly you can:</p>\n<ul>\n<li>Decode your JWT token to verify that you have a <code>scope</code> claim containing your original authorities.</li>\n<li>Put a breakpoint in the <code>JwtGrantedAuthoritiesConverter.getAuthorities()</code> method to verify whether the token is properly read.</li>\n</ul>\n"}],"owner":{"account_id":27845259,"reputation":23,"user_id":21260876,"display_name":"Expert_Introvert"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":985,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75529945,"answer_count":1,"score":2,"last_activity_date":1677054477,"creation_date":1677013849,"question_id":75525940,"body_markdown":"I&#39;m using Oauth2 resource server JWT for authentication.\r\nI&#39;m trying to add authentication for two routes , route  &quot;/student/&quot; to give acess to role ROLE_USER and route &quot;/students/&quot; to role ROLE_ADMIN.\r\n\r\n# Security config\r\n\r\n```\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity httpSecurity) throws Exception{\r\n        return httpSecurity\r\n                .csrf(AbstractHttpConfigurer::disable)\r\n                .authorizeHttpRequests(a -&gt;\r\n                {\r\n                    a.requestMatchers(&quot;/student/&quot;).hasAnyRole(&quot;ROLE_USER&quot;);\r\n                    a.requestMatchers(&quot;/student/**&quot;).hasAnyRole(&quot;ROLE_USER&quot;);\r\n                    a.requestMatchers(&quot;/students/&quot;).hasAnyRole(&quot;ROLE_ADMIN&quot;);\r\n                    a.requestMatchers(&quot;/students/**&quot;).hasAnyRole(&quot;ROLE_ADMIN&quot;);\r\n                    a.requestMatchers(&quot;/&quot;).permitAll();\r\n                    a.requestMatchers(&quot;/token/&quot;).permitAll();\r\n                    a.requestMatchers(&quot;/token/**&quot;).permitAll();\r\n                    a.anyRequest().authenticated();\r\n                })\r\n                .oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt)\r\n                .userDetailsService(userDetailsService)\r\n                .headers(headers -&gt; headers.frameOptions().sameOrigin())\r\n                .httpBasic(Customizer.withDefaults())\r\n                .sessionManagement(session -&gt; session.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\r\n                .build();\r\n    }\r\n\r\n```\r\nI tried to change `hasRole()` to `hasAnyRole()` , `hasAuthority()` , treid `@PreAuthorize()` on controller and  checked with using roles without &quot;`ROLE_`&quot; prefix but nothing has worked.\r\n\r\n# UserDetailsService\r\n\r\n```\r\npublic class jpaUserDetailsService implements UserDetailsService {\r\n    UserRepository userRepository;\r\n\r\n    public jpaUserDetailsService(UserRepository userRepository) {\r\n        this.userRepository = userRepository;\r\n    }\r\n\r\n    @Override\r\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\r\n        return userRepository.findUserByUsername(username)\r\n                .map(SecurityUser::new)\r\n                .orElseThrow(() -&gt; new UsernameNotFoundException(&quot;Username not found &quot; + username));\r\n    }\r\n}\r\n\r\n```\r\n# UserDetails \r\n\r\n```\r\npublic class SecurityUser implements UserDetails {\r\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\r\n        return user.getRoles().stream()\r\n                .map(Role::getRole)\r\n                .map(UserRoles::toString)\r\n                .map(SimpleGrantedAuthority::new).toList();\r\n    }\r\n}\r\n```\r\n# I am using an enum for all my Roles\r\n\r\n```\r\npublic enum UserRoles {\r\n    ROLE_ADMIN,\r\n    ROLE_USER\r\n}\r\n```\r\n\r\n# Service to generate jwt Token\r\n```\r\npublic class TokenService  {\r\n    private final JwtEncoder jwtEncoder;\r\n\r\n    public TokenService(JwtEncoder jwtEncoder) {\r\n        this.jwtEncoder = jwtEncoder;\r\n    }\r\n\r\n    public String generateToken(Authentication authentication){\r\n        Instant now = Instant.now();\r\n\r\n        String scope = authentication.getAuthorities().stream()\r\n                .map(GrantedAuthority::getAuthority)\r\n                .collect(Collectors.joining(&quot; &quot;));\r\n\r\n        JwtClaimsSet claims =  JwtClaimsSet.builder()\r\n                .issuer(&quot;self&quot;)\r\n                .issuedAt(now.plus(1 , ChronoUnit.HOURS))\r\n                .subject(authentication.getName())\r\n                .claim(&quot;scope&quot; , scope)\r\n                .build();\r\n\r\n        return this.jwtEncoder.encode(JwtEncoderParameters.from(claims)).getTokenValue();\r\n    }\r\n\r\n```\r\n# User Entity\r\n\r\n```\r\npublic class User {\r\n    @Id\r\n    @GeneratedValue\r\n    private long userId;\r\n    @Column(unique = true , nullable = false)\r\n    private String username;\r\n    @Column(nullable = false)\r\n    private String password;\r\n    @ManyToMany(fetch = FetchType.EAGER)\r\n    @JoinTable(\r\n            joinColumns = @JoinColumn(name = &quot;userId&quot;),\r\n            inverseJoinColumns = @JoinColumn(name = &quot;roleId&quot;)\r\n    )\r\n    @ToString.Exclude\r\n    private List&lt;Role&gt; roles;\r\n\r\n}\r\n```\r\n# Role Entity\r\n\r\n```\r\npublic class Role {\r\n    @Id\r\n    @GeneratedValue\r\n    private Long roleId;\r\n    @Column(unique = true , nullable = false)\r\n    @Enumerated(EnumType.STRING)\r\n    private UserRoles role;\r\n}\r\n```\r\nfinally my Contoroller\r\n\r\n\r\n```\r\n    @GetMapping(&quot;/student/&quot;) // route i want to allow with role user;\r\n    public Student getStudent(Principal principal){\r\n     \r\n    }\r\n\r\n    @GetMapping(&quot;/students/&quot;) // route i want to allow only role admin\r\n    public List&lt;Student&gt; getStudents(Principal principal){\r\n       \r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\n\r\n\r\n[enter image description here](https://i.stack.imgur.com/ZJaB7.png)\r\n","title":"Spring security config requestMatchers.hasRole() is always giving 403 forbidden status","body":"<p>I'm using Oauth2 resource server JWT for authentication.\nI'm trying to add authentication for two routes , route  &quot;/student/&quot; to give acess to role ROLE_USER and route &quot;/students/&quot; to role ROLE_ADMIN.</p>\n<h1>Security config</h1>\n<pre><code>    public SecurityFilterChain securityFilterChain(HttpSecurity httpSecurity) throws Exception{\n        return httpSecurity\n                .csrf(AbstractHttpConfigurer::disable)\n                .authorizeHttpRequests(a -&gt;\n                {\n                    a.requestMatchers(&quot;/student/&quot;).hasAnyRole(&quot;ROLE_USER&quot;);\n                    a.requestMatchers(&quot;/student/**&quot;).hasAnyRole(&quot;ROLE_USER&quot;);\n                    a.requestMatchers(&quot;/students/&quot;).hasAnyRole(&quot;ROLE_ADMIN&quot;);\n                    a.requestMatchers(&quot;/students/**&quot;).hasAnyRole(&quot;ROLE_ADMIN&quot;);\n                    a.requestMatchers(&quot;/&quot;).permitAll();\n                    a.requestMatchers(&quot;/token/&quot;).permitAll();\n                    a.requestMatchers(&quot;/token/**&quot;).permitAll();\n                    a.anyRequest().authenticated();\n                })\n                .oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt)\n                .userDetailsService(userDetailsService)\n                .headers(headers -&gt; headers.frameOptions().sameOrigin())\n                .httpBasic(Customizer.withDefaults())\n                .sessionManagement(session -&gt; session.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\n                .build();\n    }\n\n</code></pre>\n<p>I tried to change <code>hasRole()</code> to <code>hasAnyRole()</code> , <code>hasAuthority()</code> , treid <code>@PreAuthorize()</code> on controller and  checked with using roles without &quot;<code>ROLE_</code>&quot; prefix but nothing has worked.</p>\n<h1>UserDetailsService</h1>\n<pre><code>public class jpaUserDetailsService implements UserDetailsService {\n    UserRepository userRepository;\n\n    public jpaUserDetailsService(UserRepository userRepository) {\n        this.userRepository = userRepository;\n    }\n\n    @Override\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n        return userRepository.findUserByUsername(username)\n                .map(SecurityUser::new)\n                .orElseThrow(() -&gt; new UsernameNotFoundException(&quot;Username not found &quot; + username));\n    }\n}\n\n</code></pre>\n<h1>UserDetails</h1>\n<pre><code>public class SecurityUser implements UserDetails {\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\n        return user.getRoles().stream()\n                .map(Role::getRole)\n                .map(UserRoles::toString)\n                .map(SimpleGrantedAuthority::new).toList();\n    }\n}\n</code></pre>\n<h1>I am using an enum for all my Roles</h1>\n<pre><code>public enum UserRoles {\n    ROLE_ADMIN,\n    ROLE_USER\n}\n</code></pre>\n<h1>Service to generate jwt Token</h1>\n<pre><code>public class TokenService  {\n    private final JwtEncoder jwtEncoder;\n\n    public TokenService(JwtEncoder jwtEncoder) {\n        this.jwtEncoder = jwtEncoder;\n    }\n\n    public String generateToken(Authentication authentication){\n        Instant now = Instant.now();\n\n        String scope = authentication.getAuthorities().stream()\n                .map(GrantedAuthority::getAuthority)\n                .collect(Collectors.joining(&quot; &quot;));\n\n        JwtClaimsSet claims =  JwtClaimsSet.builder()\n                .issuer(&quot;self&quot;)\n                .issuedAt(now.plus(1 , ChronoUnit.HOURS))\n                .subject(authentication.getName())\n                .claim(&quot;scope&quot; , scope)\n                .build();\n\n        return this.jwtEncoder.encode(JwtEncoderParameters.from(claims)).getTokenValue();\n    }\n\n</code></pre>\n<h1>User Entity</h1>\n<pre><code>public class User {\n    @Id\n    @GeneratedValue\n    private long userId;\n    @Column(unique = true , nullable = false)\n    private String username;\n    @Column(nullable = false)\n    private String password;\n    @ManyToMany(fetch = FetchType.EAGER)\n    @JoinTable(\n            joinColumns = @JoinColumn(name = &quot;userId&quot;),\n            inverseJoinColumns = @JoinColumn(name = &quot;roleId&quot;)\n    )\n    @ToString.Exclude\n    private List&lt;Role&gt; roles;\n\n}\n</code></pre>\n<h1>Role Entity</h1>\n<pre><code>public class Role {\n    @Id\n    @GeneratedValue\n    private Long roleId;\n    @Column(unique = true , nullable = false)\n    @Enumerated(EnumType.STRING)\n    private UserRoles role;\n}\n</code></pre>\n<p>finally my Contoroller</p>\n<pre><code>    @GetMapping(&quot;/student/&quot;) // route i want to allow with role user;\n    public Student getStudent(Principal principal){\n     \n    }\n\n    @GetMapping(&quot;/students/&quot;) // route i want to allow only role admin\n    public List&lt;Student&gt; getStudents(Principal principal){\n       \n    }\n}\n\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/ZJaB7.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":1,"creation_date":1677054243,"post_id":75529902,"comment_id":133259553,"body_markdown":"don&#39;t add links to images with code. Post your code formatted in your question","body":"don&#39;t add links to images with code. Post your code formatted in your question"},{"owner":{"account_id":26147295,"reputation":168,"user_id":19835740,"display_name":"Daxelarne"},"score":0,"creation_date":1677054370,"post_id":75529902,"comment_id":133259591,"body_markdown":"Hy, welcome to Stack Overflow, please [don&#39;t upload text, table or error message as image](https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors/285557#285557). \nEdit your question to contain all the information in text form - consider to use the editor&#39;s formatting options. \nAlso see [How to Ask](https://stackoverflow.com/help/how-to-ask)","body":"Hy, welcome to Stack Overflow, please <a href=\"https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors/285557#285557\">don&#39;t upload text, table or error message as image</a>.  Edit your question to contain all the information in text form - consider to use the editor&#39;s formatting options.  Also see <a href=\"https://stackoverflow.com/help/how-to-ask\">How to Ask</a>"}],"answers":[{"tags":[],"owner":{"account_id":24546611,"reputation":174,"user_id":18456370,"display_name":"Yanni2"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677054404,"creation_date":1677054404,"answer_id":75529931,"question_id":75529902,"body_markdown":"The solution is quite Easy. You are creating a Array which contains 3 Arrays.\r\nThis will result in a total of 4 Arrays 1 big Array and 3 Arrays in the big Array.\r\n\r\n`int` is a primitive Datatype and doesnt need to be collected by the Garbage Cleaner. Which means that it has to remove 4 Elements. ","title":"I don&#39;t understand why the number of object that was garbage collected is 4","body":"<p>The solution is quite Easy. You are creating a Array which contains 3 Arrays.\nThis will result in a total of 4 Arrays 1 big Array and 3 Arrays in the big Array.</p>\n<p><code>int</code> is a primitive Datatype and doesnt need to be collected by the Garbage Cleaner. Which means that it has to remove 4 Elements.</p>\n"}],"owner":{"account_id":21246631,"reputation":1,"user_id":15629278,"display_name":"CrowdStrife"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1677054404,"creation_date":1677054122,"question_id":75529902,"body_markdown":"There was a problem in our practice test that I did not quite understand. The problem is, &quot;How many object/s will be garbage collected if we put arr2d = null in line 36.\r\n[enter image description here](https://i.stack.imgur.com/JFz4D.png)\r\nThe answer was 4, and I am confuse on how that became the answer to the question.\r\n\r\nI was unable to answer the question so I have no clue where to start.","title":"I don&#39;t understand why the number of object that was garbage collected is 4","body":"<p>There was a problem in our practice test that I did not quite understand. The problem is, &quot;How many object/s will be garbage collected if we put arr2d = null in line 36.\n<a href=\"https://i.stack.imgur.com/JFz4D.png\" rel=\"nofollow noreferrer\">enter image description here</a>\nThe answer was 4, and I am confuse on how that became the answer to the question.</p>\n<p>I was unable to answer the question so I have no clue where to start.</p>\n"},{"tags":["java","testing","apache-flink","flink-sql"],"comments":[{"owner":{"account_id":12191873,"reputation":3799,"user_id":8899044,"display_name":"Dominik Wosiński"},"score":0,"creation_date":1677191464,"post_id":75529913,"comment_id":133294872,"body_markdown":"Is there any reason why You don&#39;t want to create `DataStream` and then convert it to table ?","body":"Is there any reason why You don&#39;t want to create <code>DataStream</code> and then convert it to table ?"},{"owner":{"account_id":3280214,"reputation":603,"user_id":2760995,"accept_rate":88,"display_name":"tilman151"},"score":0,"creation_date":1677502812,"post_id":75529913,"comment_id":133344201,"body_markdown":"We are not using DataStream at all, which is why we do not maintain POJOs for our sources or intermediate results. Therefore, I have to rely on tuples to feed to the data stream. Our source has 14 columns and dragging the type definition of a `Tuple14` around is really bothersome. I was just wondering if there is a better  way.","body":"We are not using DataStream at all, which is why we do not maintain POJOs for our sources or intermediate results. Therefore, I have to rely on tuples to feed to the data stream. Our source has 14 columns and dragging the type definition of a <code>Tuple14</code> around is really bothersome. I was just wondering if there is a better  way."}],"owner":{"account_id":3280214,"reputation":603,"user_id":2760995,"accept_rate":88,"display_name":"tilman151"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677054168,"creation_date":1677054168,"question_id":75529913,"body_markdown":"I want to create an dummy table in Flink Table API for testing purposes. For this I use the `StreamingTableEnvironment.fromValues` function. My program windows the table on event time, which is assigned to the column `time_ltz`. Here is my progress so far:\r\n\r\n```java\r\n@Test\r\npublic void build() throws Exception {\r\n    StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\r\n    env.setParallelism(2);\r\n    env.getConfig().setGlobalJobParameters(params);\r\n    StreamTableEnvironment tEnv = StreamTableEnvironment.create(env);\r\n\r\n    Table inputTable = tEnv.fromValues(\r\n        DataTypes.ROW(\r\n            DataTypes.FIELD(&quot;time_ltz&quot;, DataTypes.TIMESTAMP_LTZ()),\r\n            DataTypes.FIELD(&quot;id&quot;, DataTypes.STRING()),\r\n            DataTypes.FIELD(&quot;measurement&quot;, DataTypes.DOUBLE())),\r\n        row(new Timestamp(10000L, &quot;abc&quot;, 1.0));\r\n\r\n    Table outputTable = inputTable\r\n        .window(aggregationWindow.on($(&quot;time_ltz&quot;)).as(&quot;w&quot;))\r\n        .groupBy($(&quot;id&quot;), $(&quot;w&quot;))\r\n        .select(\r\n            $(&quot;id&quot;),\r\n            $(&quot;w&quot;).start().as(&quot;window_start&quot;),\r\n            $(&quot;w&quot;).end().as(&quot;window_end&quot;),\r\n            $(&quot;measurement&quot;).sum());\r\n\r\n    tEnv.toDataStream(outputTable).print();\r\n    env.execute();\r\n}\r\n``` \r\n\r\nRunning this test results in the following error:\r\n\r\n```\r\norg.apache.flink.table.api.ValidationException: A group window expects a time attribute for grouping in a stream environment.\r\n```\r\n\r\nThis makes sense, as `time_ltz` is not set as the event time. Unfortunately, I cannot find a way to mark it as the event time. For the real input table I do it in DDL. Previously, I tried to construct a data stream, watermark it and then convert it into a table, but that seems more like a hack to me.","title":"Assign event time for Flink table created fromValues","body":"<p>I want to create an dummy table in Flink Table API for testing purposes. For this I use the <code>StreamingTableEnvironment.fromValues</code> function. My program windows the table on event time, which is assigned to the column <code>time_ltz</code>. Here is my progress so far:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\npublic void build() throws Exception {\n    StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\n    env.setParallelism(2);\n    env.getConfig().setGlobalJobParameters(params);\n    StreamTableEnvironment tEnv = StreamTableEnvironment.create(env);\n\n    Table inputTable = tEnv.fromValues(\n        DataTypes.ROW(\n            DataTypes.FIELD(&quot;time_ltz&quot;, DataTypes.TIMESTAMP_LTZ()),\n            DataTypes.FIELD(&quot;id&quot;, DataTypes.STRING()),\n            DataTypes.FIELD(&quot;measurement&quot;, DataTypes.DOUBLE())),\n        row(new Timestamp(10000L, &quot;abc&quot;, 1.0));\n\n    Table outputTable = inputTable\n        .window(aggregationWindow.on($(&quot;time_ltz&quot;)).as(&quot;w&quot;))\n        .groupBy($(&quot;id&quot;), $(&quot;w&quot;))\n        .select(\n            $(&quot;id&quot;),\n            $(&quot;w&quot;).start().as(&quot;window_start&quot;),\n            $(&quot;w&quot;).end().as(&quot;window_end&quot;),\n            $(&quot;measurement&quot;).sum());\n\n    tEnv.toDataStream(outputTable).print();\n    env.execute();\n}\n</code></pre>\n<p>Running this test results in the following error:</p>\n<pre><code>org.apache.flink.table.api.ValidationException: A group window expects a time attribute for grouping in a stream environment.\n</code></pre>\n<p>This makes sense, as <code>time_ltz</code> is not set as the event time. Unfortunately, I cannot find a way to mark it as the event time. For the real input table I do it in DDL. Previously, I tried to construct a data stream, watermark it and then convert it into a table, but that seems more like a hack to me.</p>\n"},{"tags":["javascript","java","testing","karate"],"answers":[{"tags":[],"owner":{"account_id":48302,"reputation":55363,"user_id":143475,"display_name":"Peter Thomas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677053978,"creation_date":1677053978,"answer_id":75529878,"question_id":75529341,"body_markdown":"First let me say that looks like a very badly designed API. Anyway you can do this:\r\n\r\n    * url &#39;https://httpbin.org/anything/compliance?=id10101016/accept&#39;\r\n    * method get\r\n\r\nAnd refer this for more details: https://stackoverflow.com/a/59977660/143475\r\n\r\nAnd if you are worried about dynamic data, that&#39;s not a problem:\r\n\r\n    * def id = &#39;10101016&#39;\r\n    * url `https://httpbin.org/anything/compliance?=id${id}/accept`\r\n    * method get\r\n\r\nI would think this is the right way:\r\n\r\n    * url &#39;https://httpbin.org/anything&#39;\r\n    * path &#39;compliance?=id10101016&#39;, &#39;accept&#39;\r\n    * method get\r\n\r\nAnd yes, the `?=` will get encoded, but that&#39;s how HTTP is supposed to work.\r\n\r\n\r\n","title":"Param between url in Karate Testing","body":"<p>First let me say that looks like a very badly designed API. Anyway you can do this:</p>\n<pre><code>* url 'https://httpbin.org/anything/compliance?=id10101016/accept'\n* method get\n</code></pre>\n<p>And refer this for more details: <a href=\"https://stackoverflow.com/a/59977660/143475\">https://stackoverflow.com/a/59977660/143475</a></p>\n<p>And if you are worried about dynamic data, that's not a problem:</p>\n<pre><code>* def id = '10101016'\n* url `https://httpbin.org/anything/compliance?=id${id}/accept`\n* method get\n</code></pre>\n<p>I would think this is the right way:</p>\n<pre><code>* url 'https://httpbin.org/anything'\n* path 'compliance?=id10101016', 'accept'\n* method get\n</code></pre>\n<p>And yes, the <code>?=</code> will get encoded, but that's how HTTP is supposed to work.</p>\n"}],"owner":{"account_id":23528255,"reputation":33,"user_id":17574383,"display_name":"MrMag1990"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75529878,"answer_count":1,"score":1,"last_activity_date":1677053978,"creation_date":1677050464,"question_id":75529341,"body_markdown":"I have situation like this:\r\n\r\n    \r\n```\r\n* url address\r\n    * header Authorization = &#39;Bearer &#39; + accessToken\r\n    * configure ssl = true\r\n    * path &#39;compliance&#39; + &#39;/accept&#39;\r\n    * param id = 10101016\r\n    * def req = {&quot;decision&quot;: &lt;decision&gt;, &quot;reasonId&quot;: &lt;reasonId&gt;, &quot;comment&quot;: &lt;comment&gt;}\r\n\r\n    Given request req\r\n    When method PUT\r\n    Then status 200\r\n```\r\n\r\nresault:\r\n.../compliance/accept?id=10101016\r\n\r\nAnd always my param go to end in url but I want this param between url like this:\r\n.../compliance?=id10101016/accept\r\n\r\nHow can I do this ? I am trying everythink but not working :/ \r\n\r\nI am looking answer on the internet but everywhere param go to the end of url.","title":"Param between url in Karate Testing","body":"<p>I have situation like this:</p>\n<pre><code>* url address\n    * header Authorization = 'Bearer ' + accessToken\n    * configure ssl = true\n    * path 'compliance' + '/accept'\n    * param id = 10101016\n    * def req = {&quot;decision&quot;: &lt;decision&gt;, &quot;reasonId&quot;: &lt;reasonId&gt;, &quot;comment&quot;: &lt;comment&gt;}\n\n    Given request req\n    When method PUT\n    Then status 200\n</code></pre>\n<p>resault:\n.../compliance/accept?id=10101016</p>\n<p>And always my param go to end in url but I want this param between url like this:\n.../compliance?=id10101016/accept</p>\n<p>How can I do this ? I am trying everythink but not working :/</p>\n<p>I am looking answer on the internet but everywhere param go to the end of url.</p>\n"},{"tags":["java","unit-testing","debugging","intellij-idea"],"comments":[{"owner":{"account_id":3430916,"reputation":3799,"user_id":3059385,"accept_rate":40,"display_name":"Christopher Schneider"},"score":0,"creation_date":1492545927,"post_id":43481209,"comment_id":74018279,"body_markdown":"You&#39;ll need to elaborate. How does one manually change a variable without a breakpoint?","body":"You&#39;ll need to elaborate. How does one manually change a variable without a breakpoint?"},{"owner":{"account_id":2264130,"reputation":38917,"user_id":1993366,"accept_rate":86,"display_name":"vikingsteve"},"score":0,"creation_date":1492605091,"post_id":43481209,"comment_id":74045855,"body_markdown":"if you have a setter you can add it as an evaluate expression","body":"if you have a setter you can add it as an evaluate expression"}],"answers":[{"comments":[{"owner":{"account_id":283448,"reputation":20787,"user_id":580951,"accept_rate":100,"display_name":"Dustin Kingen"},"score":2,"creation_date":1492546603,"post_id":43481377,"comment_id":74018673,"body_markdown":"Maybe something like [change value during debug](https://intellij-support.jetbrains.com/hc/en-us/community/posts/206942275-change-value-during-debug).","body":"Maybe something like <a href=\"https://intellij-support.jetbrains.com/hc/en-us/community/posts/206942275-change-value-during-debug\" rel=\"nofollow noreferrer\">change value during debug</a>."},{"owner":{"display_name":"user6058447"},"score":0,"creation_date":1492546624,"post_id":43481377,"comment_id":74018686,"body_markdown":"This replicates the behaviour in eclipse that I was looking for. Seems like eclipse automatically reloads changed classes after saving.","body":"This replicates the behaviour in eclipse that I was looking for. Seems like eclipse automatically reloads changed classes after saving."}],"tags":[],"owner":{"account_id":9363170,"reputation":1307,"user_id":6948900,"display_name":"Mikhail Antonov"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1492546372,"creation_date":1492546372,"answer_id":43481377,"question_id":43481209,"body_markdown":"You can [reload classes](https://www.jetbrains.com/help/idea/2017.1/reloading-classes.html) while running your program in Debug mode and changes in code will apply if possible (there are limitations) without restarting the program.\r\n\r\n&gt; To reload changed classes\r\n&gt; \r\n&gt; Do one of the following:\r\n&gt; \r\n&gt; * On the main menu, choose Run -&gt; Reload Changed Classes.\r\n&gt; * On the main menu, choose Build -&gt; Compile &quot;class_name&quot; to recompile an altered class during debug.\r\n\r\nNot aware about any other method to change the value of a variable &quot;in real-time&quot;.","title":"Changing variables in realtime when debugging in intellij?","body":"<p>You can <a href=\"https://www.jetbrains.com/help/idea/2017.1/reloading-classes.html\" rel=\"nofollow noreferrer\">reload classes</a> while running your program in Debug mode and changes in code will apply if possible (there are limitations) without restarting the program.</p>\n\n<blockquote>\n  <p>To reload changed classes</p>\n  \n  <p>Do one of the following:</p>\n  \n  <ul>\n  <li>On the main menu, choose Run -> Reload Changed Classes.</li>\n  <li>On the main menu, choose Build -> Compile \"class_name\" to recompile an altered class during debug.</li>\n  </ul>\n</blockquote>\n\n<p>Not aware about any other method to change the value of a variable \"in real-time\".</p>\n"},{"tags":[],"owner":{"account_id":11470688,"reputation":51,"user_id":8407617,"display_name":"Jagrat"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677053685,"creation_date":1677053685,"answer_id":75529827,"question_id":43481209,"body_markdown":"Yes, IntelliJ IDEA allows you to see real-time changes while debugging Java code. This feature is called HotSwap, and it allows you to modify your code while the program is running, without the need to stop and restart the debugger.\r\n\r\nTo use HotSwap in IntelliJ IDEA, you first need to enable it by going to the Run/Debug Configuration dialog and selecting the configuration for your application. Then, in the &quot;Debug&quot; tab, make sure the &quot;Enable HotSwap&quot; option is checked.\r\n\r\nTo use HotSwap, simply make your code changes in the editor and then press Ctrl+F9 (Windows/Linux) or Command+F9 (macOS) to compile and reload the code in the running program.\r\n\r\nNote that not all changes can be applied using HotSwap. Some changes, such as changes to class hierarchies or changes to method signatures, will require a full restart of the debugger. Additionally, HotSwap is not supported in all Java virtual machines, so make sure to check the compatibility of your JVM if you encounter any issues","title":"Changing variables in realtime when debugging in intellij?","body":"<p>Yes, IntelliJ IDEA allows you to see real-time changes while debugging Java code. This feature is called HotSwap, and it allows you to modify your code while the program is running, without the need to stop and restart the debugger.</p>\n<p>To use HotSwap in IntelliJ IDEA, you first need to enable it by going to the Run/Debug Configuration dialog and selecting the configuration for your application. Then, in the &quot;Debug&quot; tab, make sure the &quot;Enable HotSwap&quot; option is checked.</p>\n<p>To use HotSwap, simply make your code changes in the editor and then press Ctrl+F9 (Windows/Linux) or Command+F9 (macOS) to compile and reload the code in the running program.</p>\n<p>Note that not all changes can be applied using HotSwap. Some changes, such as changes to class hierarchies or changes to method signatures, will require a full restart of the debugger. Additionally, HotSwap is not supported in all Java virtual machines, so make sure to check the compatibility of your JVM if you encounter any issues</p>\n"}],"owner":{"display_name":"user6058447"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2112,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":43481377,"answer_count":2,"score":0,"last_activity_date":1677053685,"creation_date":1492545816,"question_id":43481209,"body_markdown":"When debugging in eclipse, I believe you are able to change the value of a variable in the source and have it update in realtime without setting breakpoints or anything. I was wondering if the same was possible in intellij?\r\n\r\n[Same question but for eclipse.][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/3778217/changing-variables-in-realtime-when-debugging-in-eclipse","title":"Changing variables in realtime when debugging in intellij?","body":"<p>When debugging in eclipse, I believe you are able to change the value of a variable in the source and have it update in realtime without setting breakpoints or anything. I was wondering if the same was possible in intellij?</p>\n\n<p><a href=\"https://stackoverflow.com/questions/3778217/changing-variables-in-realtime-when-debugging-in-eclipse\">Same question but for eclipse.</a></p>\n"},{"tags":["java","spring","spring-boot","microservices","spring-cloud-gateway"],"owner":{"account_id":13736251,"reputation":3,"user_id":9912445,"display_name":"Pramod Koppula"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677053089,"creation_date":1677053089,"question_id":75529748,"body_markdown":"As Spring Cloud Gateway not supports external server deployment, how can we deploy it in Production environment?\r\n\r\n\r\nWe are trying to use Spring cloud Gateway service in our applications, actually we can&#39;t deploy our Micro Services on Embedded Tomcat server, we should deploy it in External servers, As Spring cloud Gateway not supports external server deployments, Is their any way to implement Spring Cloud Gateway without Embedded server?","title":"As Spring Cloud Gateway not supports external server deployment (War file deployment), how can we deploy it in Production environment?","body":"<p>As Spring Cloud Gateway not supports external server deployment, how can we deploy it in Production environment?</p>\n<p>We are trying to use Spring cloud Gateway service in our applications, actually we can't deploy our Micro Services on Embedded Tomcat server, we should deploy it in External servers, As Spring cloud Gateway not supports external server deployments, Is their any way to implement Spring Cloud Gateway without Embedded server?</p>\n"},{"tags":["java","spring-boot","zip"],"comments":[{"owner":{"account_id":19395247,"reputation":3208,"user_id":14183092,"display_name":"kerbermeister"},"score":1,"creation_date":1677051029,"post_id":75529393,"comment_id":133258738,"body_markdown":"share your code.","body":"share your code."},{"owner":{"display_name":"user19785671"},"score":0,"creation_date":1677051735,"post_id":75529393,"comment_id":133258910,"body_markdown":"@kerbermeister zip code is every where i want solution that do not need physical storagee","body":"@kerbermeister zip code is every where i want solution that do not need physical storagee"}],"answers":[{"comments":[{"owner":{"display_name":"user19785671"},"score":0,"creation_date":1677053688,"post_id":75529662,"comment_id":133259428,"body_markdown":"in java 1.8 we do not have readAllBytes","body":"in java 1.8 we do not have readAllBytes"},{"owner":{"account_id":17228781,"reputation":3548,"user_id":12473843,"display_name":"Sergey Tsypanov"},"score":0,"creation_date":1677054128,"post_id":75529662,"comment_id":133259524,"body_markdown":"@Tara in Java 8 you can use Apache&#39;s IOUtils","body":"@Tara in Java 8 you can use Apache&#39;s IOUtils"},{"owner":{"display_name":"user19785671"},"score":0,"creation_date":1677055340,"post_id":75529662,"comment_id":133259818,"body_markdown":"thanks a lot.just How can i use Apache&#39;s IOUtils method and classes instead of this methods","body":"thanks a lot.just How can i use Apache&#39;s IOUtils method and classes instead of this methods"},{"owner":{"account_id":17228781,"reputation":3548,"user_id":12473843,"display_name":"Sergey Tsypanov"},"score":0,"creation_date":1677056196,"post_id":75529662,"comment_id":133260023,"body_markdown":"Use IOUtils.readFully() or Guava&#39;s ByteStreams.toByteArray(inputStream);","body":"Use IOUtils.readFully() or Guava&#39;s ByteStreams.toByteArray(inputStream);"},{"owner":{"account_id":17228781,"reputation":3548,"user_id":12473843,"display_name":"Sergey Tsypanov"},"score":0,"creation_date":1677059718,"post_id":75529662,"comment_id":133261014,"body_markdown":"You are welcome! Please vote my answer up if it&#39;s helpful","body":"You are welcome! Please vote my answer up if it&#39;s helpful"},{"owner":{"display_name":"user19785671"},"score":1,"creation_date":1677063681,"post_id":75529662,"comment_id":133262133,"body_markdown":"&quot;Thanks for the feedback! You need at least 15 reputation to cast a vote, but your feedback has been recorded.&quot;  \n@Sergey Tsypanov i can not vote but i mark as true answer thanks and sorry","body":"&quot;Thanks for the feedback! You need at least 15 reputation to cast a vote, but your feedback has been recorded.&quot;   @Sergey Tsypanov i can not vote but i mark as true answer thanks and sorry"}],"tags":[],"owner":{"account_id":17228781,"reputation":3548,"user_id":12473843,"display_name":"Sergey Tsypanov"},"comment_count":6,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677052515,"creation_date":1677052515,"answer_id":75529662,"question_id":75529393,"body_markdown":"You can use `java.util.zip.ZipInpuStream` to unzip and read contents of compressed file without saving it to file but having `byte[]` instead:\r\n```java\r\npublic class UnzipFile {\r\n\r\n    public static void main(String[] args) throws IOException {\r\n        String fileZip = &quot;src/main/resources/unzipTest/compressed.zip&quot;;\r\n\r\n        FileInputStream in = new FileInputStream(fileZip);\r\n        unzipAndUse(in);// here you can pass any InputStream, e.g. ByteArrayInputStream wrapping POST request body\r\n    }\r\n\r\n    private static void unzipAndUse(InputStream in) throws IOException {\r\n        try (ZipInputStream zis = new ZipInputStream(in)) {\r\n            ZipEntry zipEntry = zis.getNextEntry();\r\n            while (zipEntry != null) {\r\n                byte[] bytes = zis.readAllBytes(); // your data\r\n                zipEntry = zis.getNextEntry();\r\n            }\r\n\r\n            zis.closeEntry();\r\n        }\r\n    }\r\n}\r\n```","title":"Unzip file without physical save in spring boot","body":"<p>You can use <code>java.util.zip.ZipInpuStream</code> to unzip and read contents of compressed file without saving it to file but having <code>byte[]</code> instead:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class UnzipFile {\n\n    public static void main(String[] args) throws IOException {\n        String fileZip = &quot;src/main/resources/unzipTest/compressed.zip&quot;;\n\n        FileInputStream in = new FileInputStream(fileZip);\n        unzipAndUse(in);// here you can pass any InputStream, e.g. ByteArrayInputStream wrapping POST request body\n    }\n\n    private static void unzipAndUse(InputStream in) throws IOException {\n        try (ZipInputStream zis = new ZipInputStream(in)) {\n            ZipEntry zipEntry = zis.getNextEntry();\n            while (zipEntry != null) {\n                byte[] bytes = zis.readAllBytes(); // your data\n                zipEntry = zis.getNextEntry();\n            }\n\n            zis.closeEntry();\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"display_name":"user19785671"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":166,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1677415366,"accepted_answer_id":75529662,"answer_count":1,"score":0,"last_activity_date":1677052515,"creation_date":1677050758,"question_id":75529393,"body_markdown":"unzip file without physical save when we post local direction of zip file\r\n\r\nI want to Unzip file without physical save in spring boot when i post the file in local directory","title":"Unzip file without physical save in spring boot","body":"<p>unzip file without physical save when we post local direction of zip file</p>\n<p>I want to Unzip file without physical save in spring boot when i post the file in local directory</p>\n"},{"tags":["java","selenium-webdriver"],"answers":[{"comments":[{"owner":{"account_id":27305979,"reputation":1,"user_id":20821963,"display_name":"Akshay Kachare"},"score":0,"creation_date":1677219419,"post_id":75529647,"comment_id":133298312,"body_markdown":"both the methods i used but for parallel running clipboard method not work.","body":"both the methods i used but for parallel running clipboard method not work."}],"tags":[],"owner":{"account_id":12265172,"reputation":557,"user_id":8951897,"display_name":"G. Victor"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677052429,"creation_date":1677052429,"answer_id":75529647,"question_id":75528724,"body_markdown":"There are 2 approaches that you can try:\r\n\r\nUse innerHTML attribute:\r\n\r\n    String output=element.getAttribute(&quot;innerHTML&quot;);\r\n\r\nSelect the value and copy to clipboard:\r\n\r\n    element.Click();\r\n    element.sendKeys(Keys.chord(Keys.CONTROL,&quot;a&quot;));\r\n    element.sendKeys(Keys.chord(Keys.CONTROL,&quot;c&quot;));\r\n    Toolkit toolkit = Toolkit.getDefaultToolkit();\r\n    Clipboard clipboard = toolkit.getSystemClipboard();\r\n    String output = (String) clipboard.getData(DataFlavor.stringFlavor);\r\n\r\n","title":"getAttribute() and javascript executor not return actual display value","body":"<p>There are 2 approaches that you can try:</p>\n<p>Use innerHTML attribute:</p>\n<pre><code>String output=element.getAttribute(&quot;innerHTML&quot;);\n</code></pre>\n<p>Select the value and copy to clipboard:</p>\n<pre><code>element.Click();\nelement.sendKeys(Keys.chord(Keys.CONTROL,&quot;a&quot;));\nelement.sendKeys(Keys.chord(Keys.CONTROL,&quot;c&quot;));\nToolkit toolkit = Toolkit.getDefaultToolkit();\nClipboard clipboard = toolkit.getSystemClipboard();\nString output = (String) clipboard.getData(DataFlavor.stringFlavor);\n</code></pre>\n"}],"owner":{"account_id":27305979,"reputation":1,"user_id":20821963,"display_name":"Akshay Kachare"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677052429,"creation_date":1677045039,"question_id":75528724,"body_markdown":"I am trying to return my passed data from the text box but when i try to return value from the text box it does not return actual value. There is on condition text box automatically converts the first later into capital. Suppose when i passed value &quot;abc&quot; then text box shows &quot;Abc&quot; but when get that value by using getAttribute() or javascript executor it returns me &quot;abc&quot; instead of &quot;Abc&quot;.\r\n\r\n    String input= &quot;abc&quot;;\r\n    \r\n    element.sendKeys(input);\r\n    \r\n    //text box shows &quot;Abc&quot;\r\n    \r\n    Thread.sleep(2000);\r\n    \r\n    String output=element.getAttribute(&quot;value&quot;);\r\n    \r\n    System.out.println(&quot;output&quot;);\r\n\r\noutput is &quot;abc&quot; insted of &quot;Abc&quot;\r\n\r\n\r\n","title":"getAttribute() and javascript executor not return actual display value","body":"<p>I am trying to return my passed data from the text box but when i try to return value from the text box it does not return actual value. There is on condition text box automatically converts the first later into capital. Suppose when i passed value &quot;abc&quot; then text box shows &quot;Abc&quot; but when get that value by using getAttribute() or javascript executor it returns me &quot;abc&quot; instead of &quot;Abc&quot;.</p>\n<pre><code>String input= &quot;abc&quot;;\n\nelement.sendKeys(input);\n\n//text box shows &quot;Abc&quot;\n\nThread.sleep(2000);\n\nString output=element.getAttribute(&quot;value&quot;);\n\nSystem.out.println(&quot;output&quot;);\n</code></pre>\n<p>output is &quot;abc&quot; insted of &quot;Abc&quot;</p>\n"},{"tags":["java","spring","spring-boot","exception","annotations"],"answers":[{"tags":[],"owner":{"account_id":26492725,"reputation":95,"user_id":20130938,"display_name":"Matt"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677052289,"creation_date":1677052289,"answer_id":75529617,"question_id":75511209,"body_markdown":"Solved! Using a bean in a config file and calling it back from the excHandlr.\r\n\r\nIn the ```@Annotation``` ```@interface``` were in need of the placeholder of ```@Value``` \r\ni.e.\r\n```java\r\npublic String message() default &quot;description&quot;;\r\n```\r\nin the given example but&#39;ll probably be something like ```&quot;error.description&quot;``` or whatever ","title":"Using @Value for a @CustomAnnotation in SpringBoot","body":"<p>Solved! Using a bean in a config file and calling it back from the excHandlr.</p>\n<p>In the <code>@Annotation</code> <code>@interface</code> were in need of the placeholder of <code>@Value</code>\ni.e.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public String message() default &quot;description&quot;;\n</code></pre>\n<p>in the given example but'll probably be something like <code>&quot;error.description&quot;</code> or whatever</p>\n"}],"owner":{"account_id":26492725,"reputation":95,"user_id":20130938,"display_name":"Matt"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75529617,"answer_count":1,"score":1,"last_activity_date":1677052289,"creation_date":1676906997,"question_id":75511209,"body_markdown":"I&#39;ve read similar questions and relative answers but didn&#39;t find one whose fit.\r\n\r\nIn the given sample:\r\n\r\n```java\r\n@Target({ElementType.FIELD, ElementType.PARAMETER})\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Documented\r\n@Constraint(validatedBy = DescriptionValidationImpl.class)\r\npublic @interface DescriptionValidation {\r\n\r\n    public String message() default &quot;default&quot;; \r\n\r\n    Class&lt;?&gt;[] groups() default {};\r\n\r\n    Class&lt;? extends Payload&gt;[] payload() default {};\r\n}\r\n```\r\nHow can i read a value from the ```.properties``` file and assign it to the message,\r\nknowing that ```@Value``` isn&#39;t a compile-time constant?\r\n\r\nHeard someone doing with the ExceptionHandlrController, is it possible? How?  \r\nAnd if i were in need of different messages for the same catched exc?\r\n\r\nI&#39;ve tried the following too even if it didn&#39;t make no sense for me:\r\n```java\r\n@Component\r\n@PropertySource(value = &quot;classpath:message.properties&quot;)\r\npublic class DescriptionProcessing {\r\n\r\n    @Value(&quot;${description}&quot;)\r\n    private String descriptionErrorMsg;\r\n\r\n    public void processAnnotation(DescriptionValidation annotation) {\r\n\r\n        String defaultDescriptionErrorMsg = annotation.message();\r\n\r\n        if (defaultDescriptionErrorMsg.equals(&quot;default&quot;))\r\n            defaultDescriptionErrorMsg = descriptionErrorMsg;\r\n    }\r\n}\r\n```\r\nBut kept printing the default one.","title":"Using @Value for a @CustomAnnotation in SpringBoot","body":"<p>I've read similar questions and relative answers but didn't find one whose fit.</p>\n<p>In the given sample:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Target({ElementType.FIELD, ElementType.PARAMETER})\n@Retention(RetentionPolicy.RUNTIME)\n@Documented\n@Constraint(validatedBy = DescriptionValidationImpl.class)\npublic @interface DescriptionValidation {\n\n    public String message() default &quot;default&quot;; \n\n    Class&lt;?&gt;[] groups() default {};\n\n    Class&lt;? extends Payload&gt;[] payload() default {};\n}\n</code></pre>\n<p>How can i read a value from the <code>.properties</code> file and assign it to the message,\nknowing that <code>@Value</code> isn't a compile-time constant?</p>\n<p>Heard someone doing with the ExceptionHandlrController, is it possible? How?<br />\nAnd if i were in need of different messages for the same catched exc?</p>\n<p>I've tried the following too even if it didn't make no sense for me:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\n@PropertySource(value = &quot;classpath:message.properties&quot;)\npublic class DescriptionProcessing {\n\n    @Value(&quot;${description}&quot;)\n    private String descriptionErrorMsg;\n\n    public void processAnnotation(DescriptionValidation annotation) {\n\n        String defaultDescriptionErrorMsg = annotation.message();\n\n        if (defaultDescriptionErrorMsg.equals(&quot;default&quot;))\n            defaultDescriptionErrorMsg = descriptionErrorMsg;\n    }\n}\n</code></pre>\n<p>But kept printing the default one.</p>\n"},{"tags":["java","caching","hashmap","guava"],"owner":{"account_id":12924013,"reputation":95,"user_id":9345418,"display_name":"Abhishek P"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":104,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677052263,"creation_date":1677052263,"question_id":75529611,"body_markdown":"I&#39;m using LoadinCache to cache the data I get from database. For my use case I needed to use getAll() and loadAll() since I was making bulk calls to database with list of ids and store it in cache.\r\n\r\nMy LoadingCache implementation\r\n\r\n     private final LoadingCache&lt;Double, Double&gt; cache =\r\n      CacheBuilder.newBuilder()\r\n          .expireAfterAccess(3600, TimeUnit.SECONDS)\r\n          .maximumSize(1000)\r\n          .build(\r\n              new CacheLoader&lt;Double, Double&gt;() {\r\n                @Override\r\n                public Double load(final Double id) throws Exception {\r\n                  return null; // I never use this, as in, I never do cache.get()\r\n                }\r\n\r\n                @Override\r\n                public Map&lt;Double, Double&gt; loadAll(Iterable&lt;? extends Double&gt; ids) {\r\n                  return getFromDatabase(ids); // this method just makes a call to DB and returns a map\r\n                }\r\n              });\r\n\r\nAnd I&#39;m invoking it like this\r\n\r\n     private Map&lt;Double, Double&gt; getIdCodes(final Iterable&lt;? extends Double&gt; ids) {\r\n    Map&lt;Double, Double&gt; idCode = new HashMap&lt;&gt;();\r\n    try {\r\n      cache.getAll(ids);\r\n      idCode.putAll(cache.asMap());\r\n    } catch (final Exception e) {\r\n      // My logger here. \r\n      return idCode;\r\n    }\r\n    return ids; }\r\n  Now every time getAll(ids) is called, there is an &quot;InvalidCacheLoadException: loadAll failed to return a value for&quot; exception caught and logged through my logger for every key in the list that is passed.\r\n\r\nHowever, cache does return the correct value to idCode map and is returned. What is making cache to through this exception? Am I doing something wrong?\r\n\r\n   ","title":"LoadingCache: &quot;InvalidCacheLoadException: loadAll failed to return a value for&quot; thrown for every key passed to cache.getAll(ids)","body":"<p>I'm using LoadinCache to cache the data I get from database. For my use case I needed to use getAll() and loadAll() since I was making bulk calls to database with list of ids and store it in cache.</p>\n<p>My LoadingCache implementation</p>\n<pre><code> private final LoadingCache&lt;Double, Double&gt; cache =\n  CacheBuilder.newBuilder()\n      .expireAfterAccess(3600, TimeUnit.SECONDS)\n      .maximumSize(1000)\n      .build(\n          new CacheLoader&lt;Double, Double&gt;() {\n            @Override\n            public Double load(final Double id) throws Exception {\n              return null; // I never use this, as in, I never do cache.get()\n            }\n\n            @Override\n            public Map&lt;Double, Double&gt; loadAll(Iterable&lt;? extends Double&gt; ids) {\n              return getFromDatabase(ids); // this method just makes a call to DB and returns a map\n            }\n          });\n</code></pre>\n<p>And I'm invoking it like this</p>\n<pre><code> private Map&lt;Double, Double&gt; getIdCodes(final Iterable&lt;? extends Double&gt; ids) {\nMap&lt;Double, Double&gt; idCode = new HashMap&lt;&gt;();\ntry {\n  cache.getAll(ids);\n  idCode.putAll(cache.asMap());\n} catch (final Exception e) {\n  // My logger here. \n  return idCode;\n}\nreturn ids; }\n</code></pre>\n<p>Now every time getAll(ids) is called, there is an &quot;InvalidCacheLoadException: loadAll failed to return a value for&quot; exception caught and logged through my logger for every key in the list that is passed.</p>\n<p>However, cache does return the correct value to idCode map and is returned. What is making cache to through this exception? Am I doing something wrong?</p>\n"},{"tags":["java","spring","spring-boot","opencv"],"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1593112764,"post_id":62582676,"comment_id":110674242,"body_markdown":"FYI, some of the more powerful databases have a feature to directly load files into a table. For example, [`COPY`](https://www.postgresql.org/docs/current/sql-copy.html) in Postgres.","body":"FYI, some of the more powerful databases have a feature to directly load files into a table. For example, <a href=\"https://www.postgresql.org/docs/current/sql-copy.html\" rel=\"nofollow noreferrer\"><code>COPY</code></a> in Postgres."},{"owner":{"account_id":16669662,"reputation":478,"user_id":12047466,"display_name":"TechGeek"},"score":0,"creation_date":1593123813,"post_id":62582676,"comment_id":110678513,"body_markdown":"@Ali Ouda You can make use of liquibase to load that CSV data into data base tables: Please refer to this document: https://docs.liquibase.com/change-types/community/load-data.html","body":"@Ali Ouda You can make use of liquibase to load that CSV data into data base tables: Please refer to this document: <a href=\"https://docs.liquibase.com/change-types/community/load-data.html\" rel=\"nofollow noreferrer\">docs.liquibase.com/change-types/community/load-data.html</a>"}],"answers":[{"tags":[],"owner":{"account_id":18864219,"reputation":311,"user_id":13760307,"display_name":"Nayan"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1593400840,"creation_date":1593400840,"answer_id":62630714,"question_id":62582676,"body_markdown":"You can make use of spring batch to store the .csv data into the database, which has a job Launcher, job, and step(it consist of ItemReader, ItemProcessor, Itemwritter).\r\nfor reference visit this link \r\nhttps://spring.io/guides/gs/batch-processing/","title":"uploading .csv file into data base in spring boot","body":"<p>You can make use of spring batch to store the .csv data into the database, which has a job Launcher, job, and step(it consist of ItemReader, ItemProcessor, Itemwritter).\nfor reference visit this link\n<a href=\"https://spring.io/guides/gs/batch-processing/\" rel=\"nofollow noreferrer\">https://spring.io/guides/gs/batch-processing/</a></p>\n"}],"owner":{"account_id":14247063,"reputation":69,"user_id":10291780,"display_name":"Ali Ouda"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1273,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677052210,"creation_date":1593112296,"question_id":62582676,"body_markdown":"This is my way of reading and saving into table which is working but it&#39;s very slow, I had a file consists of 360K records, this way took more than a day to parse them and save into database.\r\nI&#39;m looking for a better way\r\n\r\n`    public void parseEntitiesListFile() throws CsvValidationException, IOException {\r\n\r\n\t\t    List&lt;List&lt;String&gt;&gt; records = new ArrayList&lt;List&lt;String&gt;&gt;();\r\n\t\t    CSVReader csvReader = new CSVReader(new FileReader(fileDirctory));\r\n\t\t    csvReader.skip(1);\r\n\t\t \r\n\t\t  String[] values = null;\r\n\t\t  \r\n\t\t  while(true) {\r\n\t\t\t  values = csvReader.readNext();\r\n\t\t\t  FFIList fFIListObject = new FFIList(); \r\n\t\t\t  fFIListObject.setGIIN(values[0]);\r\n\t\t\t  fFIListObject.setFINm(values[1]);\r\n\t\t\t  fFIListObject.setCountryNm(values[2]);\r\n\t\t\t  fFIListService.saveFFIListEntity(fFIListObject);\t\t\t  \r\n\t\t  }\r\n\t\t  \r\n\t\t  \r\n\t}\r\n     \r\n` ","title":"uploading .csv file into data base in spring boot","body":"<p>This is my way of reading and saving into table which is working but it's very slow, I had a file consists of 360K records, this way took more than a day to parse them and save into database.\nI'm looking for a better way</p>\n<p>`    public void parseEntitiesListFile() throws CsvValidationException, IOException {</p>\n<pre><code>        List&lt;List&lt;String&gt;&gt; records = new ArrayList&lt;List&lt;String&gt;&gt;();\n        CSVReader csvReader = new CSVReader(new FileReader(fileDirctory));\n        csvReader.skip(1);\n     \n      String[] values = null;\n      \n      while(true) {\n          values = csvReader.readNext();\n          FFIList fFIListObject = new FFIList(); \n          fFIListObject.setGIIN(values[0]);\n          fFIListObject.setFINm(values[1]);\n          fFIListObject.setCountryNm(values[2]);\n          fFIListService.saveFFIListEntity(fFIListObject);            \n      }\n      \n      \n}\n \n</code></pre>\n<p>`</p>\n"},{"tags":["java","android","javafx","gluon-mobile"],"comments":[{"owner":{"account_id":4910667,"reputation":44671,"user_id":3956070,"display_name":"Jos&#233; Pereda"},"score":1,"creation_date":1676908786,"post_id":75511309,"comment_id":133227462,"body_markdown":"You can use Attach&#39;s [BrowserService](https://github.com/gluonhq/attach/tree/master/modules/browser) for this.","body":"You can use Attach&#39;s <a href=\"https://github.com/gluonhq/attach/tree/master/modules/browser\" rel=\"nofollow noreferrer\">BrowserService</a> for this."},{"owner":{"account_id":22881218,"reputation":67,"user_id":17022777,"display_name":"Chris Powell"},"score":0,"creation_date":1676916311,"post_id":75511309,"comment_id":133229551,"body_markdown":"Thanks, I tried that.  I&#39;ve been using 4.0.17-SNAPSHOT to be able to load to current Google Play and BrowserService is only in 4.0.16 I believe.  With 4.0.16 BrowserService, it does not create the BrowserService on my Android phone (12).","body":"Thanks, I tried that.  I&#39;ve been using 4.0.17-SNAPSHOT to be able to load to current Google Play and BrowserService is only in 4.0.16 I believe.  With 4.0.16 BrowserService, it does not create the BrowserService on my Android phone (12)."},{"owner":{"account_id":4910667,"reputation":44671,"user_id":3956070,"display_name":"Jos&#233; Pereda"},"score":0,"creation_date":1676918003,"post_id":75511309,"comment_id":133229965,"body_markdown":"the snapshot should work too, if you add the Sonatype repo. But 4.0.16 should work (there are no recent changes on the service)?","body":"the snapshot should work too, if you add the Sonatype repo. But 4.0.16 should work (there are no recent changes on the service)?"},{"owner":{"account_id":22881218,"reputation":67,"user_id":17022777,"display_name":"Chris Powell"},"score":0,"creation_date":1676919048,"post_id":75511309,"comment_id":133230242,"body_markdown":"Ok, tried sonatype repository, same problem.  I added an edit above to illustrate.","body":"Ok, tried sonatype repository, same problem.  I added an edit above to illustrate."},{"owner":{"account_id":4910667,"reputation":44671,"user_id":3956070,"display_name":"Jos&#233; Pereda"},"score":0,"creation_date":1676919569,"post_id":75511309,"comment_id":133230385,"body_markdown":"I take that you have the Browser dependency added to your pom, _and_ browser is added to the AttachList configuration of the GluonFX plugin?","body":"I take that you have the Browser dependency added to your pom, <i>and</i> browser is added to the AttachList configuration of the GluonFX plugin?"},{"owner":{"account_id":22881218,"reputation":67,"user_id":17022777,"display_name":"Chris Powell"},"score":0,"creation_date":1676920305,"post_id":75511309,"comment_id":133230558,"body_markdown":"Argh... yes apologies.  Too many open projects problem!  All good now, thanks!","body":"Argh... yes apologies.  Too many open projects problem!  All good now, thanks!"},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1676947858,"post_id":75511309,"comment_id":133235280,"body_markdown":"I’m confused, is there an answer here?  In which case, please write an answer as an answer.","body":"I’m confused, is there an answer here?  In which case, please write an answer as an answer."}],"answers":[{"tags":[],"owner":{"account_id":22881218,"reputation":67,"user_id":17022777,"display_name":"Chris Powell"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677052152,"creation_date":1677052152,"answer_id":75529592,"question_id":75511309,"body_markdown":"The answer is to use BrowserService in place of HostServices making sure you add browser to the attachList of the POM.","title":"How to get javafx HostServices showDocument() to work on Android","body":"<p>The answer is to use BrowserService in place of HostServices making sure you add browser to the attachList of the POM.</p>\n"}],"owner":{"account_id":22881218,"reputation":67,"user_id":17022777,"display_name":"Chris Powell"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":116,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677052152,"creation_date":1676907539,"question_id":75511309,"body_markdown":"I wish to fire up the default browser on an Android phone from my app. I am using javafx and gluon. The following code outlines a recommended method using HostServices, passing HostServices to the View:\r\n\r\n```\r\npublic class HSTest extends Application {\r\n    private final AppManager appManager = AppManager.initialize();\r\n\r\n    @Override\r\n    public void init() {\r\n        // Set up host services for (main) view\r\n        Supplier&lt;View&gt; mv = () -&gt; new MainView(getHostServices());\r\n\r\n        // And add the view\r\n        appManager.addViewFactory(HOME_VIEW, mv);\r\n    }\r\n\r\n    @Override\r\n    public void start(Stage primaryStage) throws Exception {\r\n        appManager.start(primaryStage);\r\n    }\r\n}\r\n```\r\nand\r\n```\r\npublic class MainView extends View {\r\n    public MainView(HostServices hostServices) {\r\n        Label label = new Label(&quot;Show site page: stackoverflow&quot;);\r\n        Button button = new Button(&quot;Fire up the site&quot;);\r\n\r\n        // Fire up the default browser\r\n        button.setOnAction(p -&gt; {\r\n            hostServices.showDocument(&quot;https://stackoverflow.com/&quot;);\r\n        });\r\n        \r\n        VBox controls = new VBox(15.0, label, button);\r\n        controls.setAlignment(Pos.CENTER);\r\n        setCenter(controls);\r\n    }\r\n}\r\n```\r\nOn running the code (*gluonfx **run*** on Linux), this works as expected.  On installing to my Android phone and running *gluonfx **nativerun***, it fails with\r\n```\r\njava.lang.Exception: No web browser found\r\n      at com.sun.javafx.application.HostServicesDelegate$StandaloneHostService.showDocument(HostServicesDelegate.java:152)\r\n      at javafx.application.HostServices.showDocument(HostServices.java:115)\r\n      :\r\n```\r\n*adb*, however, finds the default browser with\r\n```\r\n~$ adb shell am start -a android.intent.action.VIEW -d https://www.stackoverflow.com\r\n```\r\nI wish to avoid using Android specific code as this is a cross-platform app and would also like to avoid using WebView because of the overhead and size where the web pages being addressed from within the app may be read only once or twice (being Ts &amp; Cs, privacy etc.).\r\n\r\nHow then, can I get HostServices to &quot;find&quot; the default browser on Android?\r\n\r\nEDIT:\r\nFollowing Jose&#39;s mention of BrowserService, I create the following code:\r\n```\r\n    public void init() {\r\n        // Set up services for view\r\n        Optional&lt;BrowserService&gt; bs = BrowserService.create();\r\n        if( bs.isPresent() )\r\n        {\r\n            Supplier&lt;View&gt; mv = () -&gt; new MainView(bs.get());\r\n            appManager.addViewFactory(HOME_VIEW, mv);\r\n        }\r\n        else\r\n            System.out.println(&quot;Eh??&quot;);\r\n    }\r\n```\r\nI get the following error with **nativerun**:\r\n```\r\n[Mon Feb 20 20:43:34 EET 2023][INFO] [SUB] D/GraalCompiled(11049): WARNING: No new instance for interface com.gluonhq.attach.browser.BrowserService and class com.gluonhq.attach.browser.impl.AndroidBrowserService\r\n[Mon Feb 20 20:43:34 EET 2023][INFO] [SUB] D/GraalCompiled(11049): Eh??\r\n```\r\n\r\nSOLN:  Make sure you add the class to the attachList in the POM!","title":"How to get javafx HostServices showDocument() to work on Android","body":"<p>I wish to fire up the default browser on an Android phone from my app. I am using javafx and gluon. The following code outlines a recommended method using HostServices, passing HostServices to the View:</p>\n<pre><code>public class HSTest extends Application {\n    private final AppManager appManager = AppManager.initialize();\n\n    @Override\n    public void init() {\n        // Set up host services for (main) view\n        Supplier&lt;View&gt; mv = () -&gt; new MainView(getHostServices());\n\n        // And add the view\n        appManager.addViewFactory(HOME_VIEW, mv);\n    }\n\n    @Override\n    public void start(Stage primaryStage) throws Exception {\n        appManager.start(primaryStage);\n    }\n}\n</code></pre>\n<p>and</p>\n<pre><code>public class MainView extends View {\n    public MainView(HostServices hostServices) {\n        Label label = new Label(&quot;Show site page: stackoverflow&quot;);\n        Button button = new Button(&quot;Fire up the site&quot;);\n\n        // Fire up the default browser\n        button.setOnAction(p -&gt; {\n            hostServices.showDocument(&quot;https://stackoverflow.com/&quot;);\n        });\n        \n        VBox controls = new VBox(15.0, label, button);\n        controls.setAlignment(Pos.CENTER);\n        setCenter(controls);\n    }\n}\n</code></pre>\n<p>On running the code (<em>gluonfx <strong>run</strong></em> on Linux), this works as expected.  On installing to my Android phone and running <em>gluonfx <strong>nativerun</strong></em>, it fails with</p>\n<pre><code>java.lang.Exception: No web browser found\n      at com.sun.javafx.application.HostServicesDelegate$StandaloneHostService.showDocument(HostServicesDelegate.java:152)\n      at javafx.application.HostServices.showDocument(HostServices.java:115)\n      :\n</code></pre>\n<p><em>adb</em>, however, finds the default browser with</p>\n<pre><code>~$ adb shell am start -a android.intent.action.VIEW -d https://www.stackoverflow.com\n</code></pre>\n<p>I wish to avoid using Android specific code as this is a cross-platform app and would also like to avoid using WebView because of the overhead and size where the web pages being addressed from within the app may be read only once or twice (being Ts &amp; Cs, privacy etc.).</p>\n<p>How then, can I get HostServices to &quot;find&quot; the default browser on Android?</p>\n<p>EDIT:\nFollowing Jose's mention of BrowserService, I create the following code:</p>\n<pre><code>    public void init() {\n        // Set up services for view\n        Optional&lt;BrowserService&gt; bs = BrowserService.create();\n        if( bs.isPresent() )\n        {\n            Supplier&lt;View&gt; mv = () -&gt; new MainView(bs.get());\n            appManager.addViewFactory(HOME_VIEW, mv);\n        }\n        else\n            System.out.println(&quot;Eh??&quot;);\n    }\n</code></pre>\n<p>I get the following error with <strong>nativerun</strong>:</p>\n<pre><code>[Mon Feb 20 20:43:34 EET 2023][INFO] [SUB] D/GraalCompiled(11049): WARNING: No new instance for interface com.gluonhq.attach.browser.BrowserService and class com.gluonhq.attach.browser.impl.AndroidBrowserService\n[Mon Feb 20 20:43:34 EET 2023][INFO] [SUB] D/GraalCompiled(11049): Eh??\n</code></pre>\n<p>SOLN:  Make sure you add the class to the attachList in the POM!</p>\n"},{"tags":["java","hibernate","caching","distributed-caching"],"answers":[{"tags":[],"owner":{"account_id":8271,"reputation":2534,"user_id":14811,"accept_rate":33,"display_name":"Jonathan Barbero"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1677051937,"creation_date":1275080743,"answer_id":2932519,"question_id":2928013,"body_markdown":"I&#39;m working with EhCache for Hibernate and for application level cache since 3 years ago.\r\nWe use it with RMI for cache invalidation and it works really good. If you use the cache for replication you should take care about the object graph, it could turn very heavy with high cardinality relations.\r\n\r\nIf you use EhCache for Hibernate you could use it for Query cache (it&#39;s a good improvement for read-only tables) and it the table is modified it cleans the cache automatically.\r\nUsing EhCache to cache collections is a good idea too, to avoid joins a sub-selects.\r\n\r\n To clean the caches at time intervals you could implement a cache extension of EhCache that cleans the caches. We did it, it works well.","title":"hibernate distributed 2nd level cache options","body":"<p>I'm working with EhCache for Hibernate and for application level cache since 3 years ago.\nWe use it with RMI for cache invalidation and it works really good. If you use the cache for replication you should take care about the object graph, it could turn very heavy with high cardinality relations.</p>\n<p>If you use EhCache for Hibernate you could use it for Query cache (it's a good improvement for read-only tables) and it the table is modified it cleans the cache automatically.\nUsing EhCache to cache collections is a good idea too, to avoid joins a sub-selects.</p>\n<p>To clean the caches at time intervals you could implement a cache extension of EhCache that cleans the caches. We did it, it works well.</p>\n"},{"comments":[{"owner":{"account_id":93850,"reputation":599,"user_id":256578,"display_name":"ishmeister"},"score":0,"creation_date":1277296266,"post_id":2961494,"comment_id":3180672,"body_markdown":"thanks. I had a look at Hazelcast and it looks very interesting.","body":"thanks. I had a look at Hazelcast and it looks very interesting."}],"tags":[],"owner":{"account_id":24585,"reputation":1709,"user_id":62638,"display_name":"Talip Ozturk"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1275511850,"creation_date":1275511850,"answer_id":2961494,"question_id":2928013,"body_markdown":"Also check out [Hazelcast][1],  [Coherence][2] and [GemStone][3]. These are distributed caching solutions with Query support. They also have ready-to-go second level cache plug-in for Hibernate. Hazelcast is open source.\r\n\r\n\r\n  [1]: http://www.hazelcast.com/documentation.jsp#HibernateSecondLevelCache\r\n  [2]: http://www.oracle.com/technology/products/coherence/index.html\r\n  [3]: http://gemstone.com/products/gemfire","title":"hibernate distributed 2nd level cache options","body":"<p>Also check out <a href=\"http://www.hazelcast.com/documentation.jsp#HibernateSecondLevelCache\" rel=\"nofollow noreferrer\">Hazelcast</a>,  <a href=\"http://www.oracle.com/technology/products/coherence/index.html\" rel=\"nofollow noreferrer\">Coherence</a> and <a href=\"http://gemstone.com/products/gemfire\" rel=\"nofollow noreferrer\">GemStone</a>. These are distributed caching solutions with Query support. They also have ready-to-go second level cache plug-in for Hibernate. Hazelcast is open source.</p>\n"}],"owner":{"account_id":93850,"reputation":599,"user_id":256578,"display_name":"ishmeister"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4315,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":2932519,"answer_count":2,"score":4,"last_activity_date":1677051937,"creation_date":1275040298,"question_id":2928013,"body_markdown":"Not really a question but I&#39;m looking for comments/suggestions from anyone who has experiences using one or more of the following:\r\n\r\n - EhCache with RMI \r\n - EhCache with JGroups\r\n - EhCache with Terracotta\r\n - Gigaspaces Data Grid\r\n\r\nA bit of background: our applications is read only for the most part but there is some user data that is read-write and some that is only written (and can also be reasonably inaccurate). In addition, it would be nice to have tools that enable us to flush and fill the cache at intervals or by admin intervention.\r\n\r\nRegarding the first option - are there any concerns about the overhead of RMI and performance of Java serialization?\r\n\r\n","title":"hibernate distributed 2nd level cache options","body":"<p>Not really a question but I'm looking for comments/suggestions from anyone who has experiences using one or more of the following:</p>\n\n<ul>\n<li>EhCache with RMI </li>\n<li>EhCache with JGroups</li>\n<li>EhCache with Terracotta</li>\n<li>Gigaspaces Data Grid</li>\n</ul>\n\n<p>A bit of background: our applications is read only for the most part but there is some user data that is read-write and some that is only written (and can also be reasonably inaccurate). In addition, it would be nice to have tools that enable us to flush and fill the cache at intervals or by admin intervention.</p>\n\n<p>Regarding the first option - are there any concerns about the overhead of RMI and performance of Java serialization?</p>\n"},{"tags":["java","runtime-error"],"comments":[{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1677050176,"post_id":75528927,"comment_id":133258547,"body_markdown":"*first* part (`NoSuchElementException`): `&quot; &quot;` is not a blank line (or blank string) - it contains a whitespace character, probably this is never being input by user || *second* part (`StringIndexOutOfBoundsException`): the posted stack trace seems to come from calling `substring()` (line 65 of SplitString.java,) but but that method is not being called in posted code - it is not the code where this Exception is being thrown","body":"<i>first</i> part (<code>NoSuchElementException</code>): <code>&quot; &quot;</code> is not a blank line (or blank string) - it contains a whitespace character, probably this is never being input by user || <i>second</i> part (<code>StringIndexOutOfBoundsException</code>): the posted stack trace seems to come from calling <code>substring()</code> (line 65 of SplitString.java,) but but that method is not being called in posted code - it is not the code where this Exception is being thrown"},{"owner":{"account_id":25712903,"reputation":41,"user_id":19471125,"display_name":"Salome"},"score":0,"creation_date":1677122084,"post_id":75528927,"comment_id":133277037,"body_markdown":"Strange. For clarity, are you saying that the second code is having an error for a function that doesn&#39;t exist in the code - or that perhaps the test is looking  for a function that doesn&#39;t exist? Sorry, I&#39;m so new to this. And thank you for your clarity on the first part.","body":"Strange. For clarity, are you saying that the second code is having an error for a function that doesn&#39;t exist in the code - or that perhaps the test is looking  for a function that doesn&#39;t exist? Sorry, I&#39;m so new to this. And thank you for your clarity on the first part."}],"answers":[{"comments":[{"owner":{"account_id":25712903,"reputation":41,"user_id":19471125,"display_name":"Salome"},"score":0,"creation_date":1677123143,"post_id":75529558,"comment_id":133277133,"body_markdown":"That sends me: &quot;defaultPackage/SplitString.java:7: error: cannot find symbol\ntry ( Scanner scanner = new Scanner( System.in ); ){&quot; But I will try trim in the other code. Thank you for explaining about the blank line.","body":"That sends me: &quot;defaultPackage/SplitString.java:7: error: cannot find symbol try ( Scanner scanner = new Scanner( System.in ); ){&quot; But I will try trim in the other code. Thank you for explaining about the blank line."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1677136359,"post_id":75529558,"comment_id":133279016,"body_markdown":"BTW no need to have the first `try` - code did not open `System.in`, better not close it (as posted, it will be closed when the `Scanner` is closed, Same true for code posted in question)","body":"BTW no need to have the first <code>try</code> - code did not open <code>System.in</code>, better not close it (as posted, it will be closed when the <code>Scanner</code> is closed, Same true for code posted in question)"},{"owner":{"account_id":25712903,"reputation":41,"user_id":19471125,"display_name":"Salome"},"score":0,"creation_date":1677222858,"post_id":75529558,"comment_id":133298903,"body_markdown":"Thank you so much for your insight. Sadly, I&#39;m so new that I&#39;m not familiar with the lingo enough to really understand what you&#39;re saying (or most others for that matter.) It&#39;s the hardest barrier for me in all of this to become familiar to even understand instructions, errors, or solutions. Any clarity would really help.\n\nIs what you mean that I can omit the try code &quot;around&quot; the solution? If yes, I did try that. The system is timing out so I can&#39;t get any feedback from it as of yet. But I will post as soon as its working. As for closing the scanner, do you mean I don&#39;t have to close it?","body":"Thank you so much for your insight. Sadly, I&#39;m so new that I&#39;m not familiar with the lingo enough to really understand what you&#39;re saying (or most others for that matter.) It&#39;s the hardest barrier for me in all of this to become familiar to even understand instructions, errors, or solutions. Any clarity would really help.  Is what you mean that I can omit the try code &quot;around&quot; the solution? If yes, I did try that. The system is timing out so I can&#39;t get any feedback from it as of yet. But I will post as soon as its working. As for closing the scanner, do you mean I don&#39;t have to close it?"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1677429899,"post_id":75529558,"comment_id":133331969,"body_markdown":"`try ( Scanner scanner = ... ) { ... }` is creating a statement that will close the `scanner` instance after the block terminates execution - when closed the `Scanner`, on the other side, will also close the argument used top create it (`System.in` - the standard input- in this case). Usually only code that opened a resource (like `System.in`) should close it (unless otherwise documented, in special cases). Standard input is even worse, it cannot be re-opened if eventually needed somewhere else in the program.","body":"<code>try ( Scanner scanner = ... ) { ... }</code> is creating a statement that will close the <code>scanner</code> instance after the block terminates execution - when closed the <code>Scanner</code>, on the other side, will also close the argument used top create it (<code>System.in</code> - the standard input- in this case). Usually only code that opened a resource (like <code>System.in</code>) should close it (unless otherwise documented, in special cases). Standard input is even worse, it cannot be re-opened if eventually needed somewhere else in the program."}],"tags":[],"owner":{"account_id":8578289,"reputation":608,"user_id":6426900,"display_name":"Igor"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677051936,"creation_date":1677051936,"answer_id":75529558,"question_id":75528927,"body_markdown":"It seems blank line means empty line.\r\nBecause it is not clear from requirements what the terminator should be, use trim() to remove all whitespaces, and if after trim the line is empty, then stop.\r\nHere is the corrected code:\r\n\r\n    import java.util.Scanner;\r\n\r\n    public class SplitString{\r\n\r\n        public static void main( String[] args ){\r\n            String output = &quot;&quot;;\r\n            try (  Scanner scanner = new Scanner( System.in ); ){\r\n                do{\r\n                    String inputString = scanner.nextLine();\r\n                    if( inputString.trim().isEmpty() ){\r\n                        break;\r\n                    }\r\n                    output += inputString;\r\n                } while( true );\r\n            }\r\n            System.out.println( output );\r\n        }\r\n    }","title":"Java Concatenating Ever Growing String java.lang.RuntimeException","body":"<p>It seems blank line means empty line.\nBecause it is not clear from requirements what the terminator should be, use trim() to remove all whitespaces, and if after trim the line is empty, then stop.\nHere is the corrected code:</p>\n<pre><code>import java.util.Scanner;\n\npublic class SplitString{\n\n    public static void main( String[] args ){\n        String output = &quot;&quot;;\n        try (  Scanner scanner = new Scanner( System.in ); ){\n            do{\n                String inputString = scanner.nextLine();\n                if( inputString.trim().isEmpty() ){\n                    break;\n                }\n                output += inputString;\n            } while( true );\n        }\n        System.out.println( output );\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":25712903,"reputation":41,"user_id":19471125,"display_name":"Salome"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":83,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":75529558,"answer_count":1,"score":-1,"last_activity_date":1677051936,"creation_date":1677046940,"question_id":75528927,"body_markdown":"*I get an error from automated JUnit 4 unit testing software that my course instructor uses to automatically check assignments. We upload our draft code to a cloud program tester which automatically checks and grades the assignments.*\r\n\r\n**Note: I am allowed to ask questions on StackOverflow per instructor.**\r\n\r\nThis is week ~3 of first semester. I&#39;ve never coded in Java before. We have only discussed up to functions (including  if/else, while, loops, switch) so I can&#39;t use features from future modules. \r\n\r\nWe were not given a class tutorial on this specific assignment. The unit was on flow control.\r\n\r\nMy code (below) runs okay in the VSCODE IDE cloud the school provided.\r\n\r\n```\r\nimport java.util.Scanner;\r\n\r\npublic class SplitString {\r\n\r\n  public static void main(String[] args) {\r\n    Scanner scanner = new Scanner(System.in);\r\n    String output = &quot;&quot;;\r\n\r\n    do {\r\n  \r\n      String inputString = scanner.nextLine();\r\n\r\n      if (!inputString.equals(&quot; &quot;)) {\r\n        output += inputString;\r\n      } else {\r\n        break;\r\n      }\r\n    } while (true);\r\n    System.out.println(output);\r\n    scanner.close();\r\n  }\r\n}\r\n```\r\n\r\nI get this back\r\n\r\n```\r\njava.lang.RuntimeException \r\njava.lang.RuntimeException: Your application is expecting user input when no user input suppose to be given. Please take a look at the &#39;Caused by...&#39; section of this stack trace for details of where the problem occurred in your code.\r\nI get this feedback (which I don&#39;t understand)\r\njava.lang.RuntimeException: Your application is expecting user input when no user input suppose to be given. Please take a look at the &#39;Caused by...&#39; section of this stack trace for details of where the problem occurred in your code.\r\nat tests.HomeworkTests.lambda$test_splitString$5(HomeworkTests.java:248)\r\nat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)\r\nat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\nat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\nat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\nat java.base/java.lang.Thread.run(Thread.java:833)\r\nCaused by: java.util.NoSuchElementException: No line found\r\nat java.base/java.util.Scanner.nextLine(Scanner.java:1651)\r\nat defaultPackage.SplitString.main(SplitString.java:13)\r\nat tests.HomeworkTests.lambda$test_splitString$5(HomeworkTests.java:245)\r\n```\r\n\r\nThe program **test** enters strings such as hello hello hello and supposed to stop at a blank line. Per the assignment *&quot;When this application receives a blank input, this application should stop receiving input and print the growing string to the console. The last string that this program should print is the result of the growing string.&quot;*\r\n\r\nAt first I tried another method that just stopped at ENTER but then I got a different error (other code below.) That showed me the test was ending with a &quot; &quot; blank space not ENTER. Although the instructor said in discussion it presses enter. So I&#39;m basically lost.\r\n\r\nHere is the old code\r\n\r\n```\r\nimport java.util.Scanner;\r\n\r\npublic class SplitString {\r\n\r\n  public static void main(String[] args) {\r\n    Scanner sx = new Scanner(System.in);\r\n    String stringInput;\r\n    String output = &quot;&quot;;\r\n\r\n    do {\r\n      stringInput = sx.nextLine();\r\n     \r\n      output += stringInput;\r\n      \r\n    } while (!stringInput.isEmpty());\r\n\r\n    System.out.println(output);\r\n    sx.close();\r\n  }\r\n}\r\n```\r\n\r\nGives this error\r\n\r\n```\r\njava.lang.StringIndexOutOfBoundsException: begin 0, end 12, length 3\r\nat java.base/java.lang.String.checkBoundsBeginEnd(String.java:3319)\r\nat java.base/java.lang.String.substring(String.java:1874)\r\nat homework.SplitString.main(SplitString.java:65)\r\nat tests.HomeworkTests.lambda$test_splitString$5(HomeworkTests.java:288)\r\nat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\r\nat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\nat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\nat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\nat java.base/java.lang.Thread.run(Thread.java:829)\r\n```\r\n\r\nAny help would be appreciated to:\r\n- Explain where I&#39;m going wrong or what I need to fix or something I could try\r\n- Explain what the errors mean that I&#39;m getting (or where I can learn more about understanding the errors and how to read what to fix from them\r\n\r\nThank you for your time and support and patience &lt;3. \r\n\r\nI expected for the program to concatenate the user provided string until a blank is entered then print the resulting string to the console. ","title":"Java Concatenating Ever Growing String java.lang.RuntimeException","body":"<p><em>I get an error from automated JUnit 4 unit testing software that my course instructor uses to automatically check assignments. We upload our draft code to a cloud program tester which automatically checks and grades the assignments.</em></p>\n<p><strong>Note: I am allowed to ask questions on StackOverflow per instructor.</strong></p>\n<p>This is week ~3 of first semester. I've never coded in Java before. We have only discussed up to functions (including  if/else, while, loops, switch) so I can't use features from future modules.</p>\n<p>We were not given a class tutorial on this specific assignment. The unit was on flow control.</p>\n<p>My code (below) runs okay in the VSCODE IDE cloud the school provided.</p>\n<pre><code>import java.util.Scanner;\n\npublic class SplitString {\n\n  public static void main(String[] args) {\n    Scanner scanner = new Scanner(System.in);\n    String output = &quot;&quot;;\n\n    do {\n  \n      String inputString = scanner.nextLine();\n\n      if (!inputString.equals(&quot; &quot;)) {\n        output += inputString;\n      } else {\n        break;\n      }\n    } while (true);\n    System.out.println(output);\n    scanner.close();\n  }\n}\n</code></pre>\n<p>I get this back</p>\n<pre><code>java.lang.RuntimeException \njava.lang.RuntimeException: Your application is expecting user input when no user input suppose to be given. Please take a look at the 'Caused by...' section of this stack trace for details of where the problem occurred in your code.\nI get this feedback (which I don't understand)\njava.lang.RuntimeException: Your application is expecting user input when no user input suppose to be given. Please take a look at the 'Caused by...' section of this stack trace for details of where the problem occurred in your code.\nat tests.HomeworkTests.lambda$test_splitString$5(HomeworkTests.java:248)\nat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)\nat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\nat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\nat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\nat java.base/java.lang.Thread.run(Thread.java:833)\nCaused by: java.util.NoSuchElementException: No line found\nat java.base/java.util.Scanner.nextLine(Scanner.java:1651)\nat defaultPackage.SplitString.main(SplitString.java:13)\nat tests.HomeworkTests.lambda$test_splitString$5(HomeworkTests.java:245)\n</code></pre>\n<p>The program <strong>test</strong> enters strings such as hello hello hello and supposed to stop at a blank line. Per the assignment <em>&quot;When this application receives a blank input, this application should stop receiving input and print the growing string to the console. The last string that this program should print is the result of the growing string.&quot;</em></p>\n<p>At first I tried another method that just stopped at ENTER but then I got a different error (other code below.) That showed me the test was ending with a &quot; &quot; blank space not ENTER. Although the instructor said in discussion it presses enter. So I'm basically lost.</p>\n<p>Here is the old code</p>\n<pre><code>import java.util.Scanner;\n\npublic class SplitString {\n\n  public static void main(String[] args) {\n    Scanner sx = new Scanner(System.in);\n    String stringInput;\n    String output = &quot;&quot;;\n\n    do {\n      stringInput = sx.nextLine();\n     \n      output += stringInput;\n      \n    } while (!stringInput.isEmpty());\n\n    System.out.println(output);\n    sx.close();\n  }\n}\n</code></pre>\n<p>Gives this error</p>\n<pre><code>java.lang.StringIndexOutOfBoundsException: begin 0, end 12, length 3\nat java.base/java.lang.String.checkBoundsBeginEnd(String.java:3319)\nat java.base/java.lang.String.substring(String.java:1874)\nat homework.SplitString.main(SplitString.java:65)\nat tests.HomeworkTests.lambda$test_splitString$5(HomeworkTests.java:288)\nat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\nat java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\nat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\nat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\nat java.base/java.lang.Thread.run(Thread.java:829)\n</code></pre>\n<p>Any help would be appreciated to:</p>\n<ul>\n<li>Explain where I'm going wrong or what I need to fix or something I could try</li>\n<li>Explain what the errors mean that I'm getting (or where I can learn more about understanding the errors and how to read what to fix from them</li>\n</ul>\n<p>Thank you for your time and support and patience &lt;3.</p>\n<p>I expected for the program to concatenate the user provided string until a blank is entered then print the resulting string to the console.</p>\n"},{"tags":["java","excel","apache-poi","openxml"],"answers":[{"comments":[{"owner":{"account_id":4804733,"reputation":2215,"user_id":3880225,"accept_rate":21,"display_name":"cilap"},"score":0,"creation_date":1686034485,"post_id":75529485,"comment_id":134739909,"body_markdown":"added a similar question, but more about grouping/resulting https://stackoverflow.com/questions/76411982/pivot-unclear-grouping","body":"added a similar question, but more about grouping/resulting <a href=\"https://stackoverflow.com/questions/76411982/pivot-unclear-grouping\" title=\"pivot unclear grouping\">stackoverflow.com/questions/76411982/pivot-unclear-grouping</a>"}],"tags":[],"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1677051427,"creation_date":1677051427,"answer_id":75529485,"question_id":75528597,"body_markdown":"The &quot;Classic PivotTable Layout&quot; consists of following settings:\r\n\r\nIn Pivot Table Definition:\r\n\r\n - Set Grid Drop Zones true to show the drop zones for pivot fields.\r\n - Set Compact and Compact Data to false so the whole layout is not a\r\n   compact layout.\r\n - Microsoft Excel itself also sets Multiple Field Filters to false and\r\n   Item Print Titles to true. But this seems not really necessary.\r\n\r\nIn Pivot Fields:\r\n\r\nFor each pivot field set Compact false and set Outline false.\r\nEach pivot field layout neither needs to be compact nor outline.\r\n\r\nFollowing complete example shows this. It results in a privot table using the &quot;Classic PivotTable Layout&quot;:\r\n\r\n    import java.io.FileOutputStream;\r\n    \r\n    import org.apache.poi.ss.*;\r\n    import org.apache.poi.ss.usermodel.*;\r\n    import org.apache.poi.ss.util.*;\r\n    import org.apache.poi.xssf.usermodel.*;\r\n    \r\n    class CreatePivotTable {\r\n    \r\n     public static void main(String[] args) throws Exception {\r\n    \r\n      try (Workbook workbook = new XSSFWorkbook(); \r\n           FileOutputStream fileout = new FileOutputStream(&quot;Excel.xlsx&quot;) ) {\r\n    \r\n       Sheet pivotSheet = workbook.createSheet(&quot;Pivot&quot;);\r\n       Sheet dataSheet = workbook.createSheet(&quot;Data&quot;);\r\n    \r\n       Row row;\r\n       Cell cell;\r\n       Object[][] data = new Object[][]{\r\n        new Object[]{&quot;Name&quot;, &quot;Country&quot;, &quot;Count&quot;, &quot;Value&quot;},\r\n        new Object[]{&quot;A&quot;, &quot;C1&quot;, 2d, 123.56},\r\n        new Object[]{&quot;B&quot;, &quot;C1&quot;, 4d, 34.56},\r\n        new Object[]{&quot;A&quot;, &quot;C2&quot;, 1d, 56.78},\r\n        new Object[]{&quot;B&quot;, &quot;C2&quot;, 7d, 23.45},\r\n        new Object[]{&quot;A&quot;, &quot;C1&quot;, 3d, 234.56},\r\n        new Object[]{&quot;B&quot;, &quot;C1&quot;, 5d, 78.90}\r\n       };\r\n       for (int r = 0; r &lt; data.length; r++) {\r\n        row = dataSheet.createRow(r);\r\n        Object[] rowData = data[r];\r\n        for (int c = 0; c &lt; rowData.length; c++) {\r\n         cell = row.createCell(c);\r\n         if (rowData[c] instanceof String) {\r\n          cell.setCellValue((String)rowData[c]);\r\n         } else if (rowData[c] instanceof Double) {\r\n          cell.setCellValue((Double)rowData[c]);\r\n         }\r\n        }\r\n       }\r\n    \r\n       AreaReference areaReference = new AreaReference(\r\n        new CellReference(0,0),\r\n        new CellReference(data.length-1, data[0].length-1),\r\n        SpreadsheetVersion.EXCEL2007);\r\n    \r\n       XSSFPivotTable pivotTable = ((XSSFSheet)pivotSheet).createPivotTable(areaReference, new CellReference(&quot;A4&quot;), dataSheet);\r\n    \r\n       pivotTable.addRowLabel(0);\r\n       pivotTable.addRowLabel(1);\r\n       pivotTable.addColumnLabel(DataConsolidateFunction.SUM, 2, &quot;Sum of count&quot;);\r\n       pivotTable.addColumnLabel(DataConsolidateFunction.SUM, 3, &quot;Sum of value&quot;);\r\n    \r\n       pivotTable.getCTPivotTableDefinition().getPivotTableStyleInfo().setName(&quot;PivotStyleDark7&quot;);\r\n       \r\n       pivotTable.getCTPivotTableDefinition().setCompact(false);\r\n       pivotTable.getCTPivotTableDefinition().setCompactData(false);\r\n       pivotTable.getCTPivotTableDefinition().setGridDropZones(true);\r\n       //pivotTable.getCTPivotTableDefinition().setMultipleFieldFilters(false);\r\n       //pivotTable.getCTPivotTableDefinition().setItemPrintTitles(true);\r\n       for (org.openxmlformats.schemas.spreadsheetml.x2006.main.CTPivotField pivotField : pivotTable.getCTPivotTableDefinition().getPivotFields().getPivotFieldList()) {\r\n    \tpivotField.setCompact(false);  \r\n    \tpivotField.setOutline(false);  \r\n       }\r\n    \r\n       workbook.write(fileout);\r\n    \r\n      }\r\n    \r\n     }\r\n    }","title":"Need to enable &#39;Classic Pivot Table Layout&#39; option in excel using Apache POI JAVA","body":"<p>The &quot;Classic PivotTable Layout&quot; consists of following settings:</p>\n<p>In Pivot Table Definition:</p>\n<ul>\n<li>Set Grid Drop Zones true to show the drop zones for pivot fields.</li>\n<li>Set Compact and Compact Data to false so the whole layout is not a\ncompact layout.</li>\n<li>Microsoft Excel itself also sets Multiple Field Filters to false and\nItem Print Titles to true. But this seems not really necessary.</li>\n</ul>\n<p>In Pivot Fields:</p>\n<p>For each pivot field set Compact false and set Outline false.\nEach pivot field layout neither needs to be compact nor outline.</p>\n<p>Following complete example shows this. It results in a privot table using the &quot;Classic PivotTable Layout&quot;:</p>\n<pre><code>import java.io.FileOutputStream;\n\nimport org.apache.poi.ss.*;\nimport org.apache.poi.ss.usermodel.*;\nimport org.apache.poi.ss.util.*;\nimport org.apache.poi.xssf.usermodel.*;\n\nclass CreatePivotTable {\n\n public static void main(String[] args) throws Exception {\n\n  try (Workbook workbook = new XSSFWorkbook(); \n       FileOutputStream fileout = new FileOutputStream(&quot;Excel.xlsx&quot;) ) {\n\n   Sheet pivotSheet = workbook.createSheet(&quot;Pivot&quot;);\n   Sheet dataSheet = workbook.createSheet(&quot;Data&quot;);\n\n   Row row;\n   Cell cell;\n   Object[][] data = new Object[][]{\n    new Object[]{&quot;Name&quot;, &quot;Country&quot;, &quot;Count&quot;, &quot;Value&quot;},\n    new Object[]{&quot;A&quot;, &quot;C1&quot;, 2d, 123.56},\n    new Object[]{&quot;B&quot;, &quot;C1&quot;, 4d, 34.56},\n    new Object[]{&quot;A&quot;, &quot;C2&quot;, 1d, 56.78},\n    new Object[]{&quot;B&quot;, &quot;C2&quot;, 7d, 23.45},\n    new Object[]{&quot;A&quot;, &quot;C1&quot;, 3d, 234.56},\n    new Object[]{&quot;B&quot;, &quot;C1&quot;, 5d, 78.90}\n   };\n   for (int r = 0; r &lt; data.length; r++) {\n    row = dataSheet.createRow(r);\n    Object[] rowData = data[r];\n    for (int c = 0; c &lt; rowData.length; c++) {\n     cell = row.createCell(c);\n     if (rowData[c] instanceof String) {\n      cell.setCellValue((String)rowData[c]);\n     } else if (rowData[c] instanceof Double) {\n      cell.setCellValue((Double)rowData[c]);\n     }\n    }\n   }\n\n   AreaReference areaReference = new AreaReference(\n    new CellReference(0,0),\n    new CellReference(data.length-1, data[0].length-1),\n    SpreadsheetVersion.EXCEL2007);\n\n   XSSFPivotTable pivotTable = ((XSSFSheet)pivotSheet).createPivotTable(areaReference, new CellReference(&quot;A4&quot;), dataSheet);\n\n   pivotTable.addRowLabel(0);\n   pivotTable.addRowLabel(1);\n   pivotTable.addColumnLabel(DataConsolidateFunction.SUM, 2, &quot;Sum of count&quot;);\n   pivotTable.addColumnLabel(DataConsolidateFunction.SUM, 3, &quot;Sum of value&quot;);\n\n   pivotTable.getCTPivotTableDefinition().getPivotTableStyleInfo().setName(&quot;PivotStyleDark7&quot;);\n   \n   pivotTable.getCTPivotTableDefinition().setCompact(false);\n   pivotTable.getCTPivotTableDefinition().setCompactData(false);\n   pivotTable.getCTPivotTableDefinition().setGridDropZones(true);\n   //pivotTable.getCTPivotTableDefinition().setMultipleFieldFilters(false);\n   //pivotTable.getCTPivotTableDefinition().setItemPrintTitles(true);\n   for (org.openxmlformats.schemas.spreadsheetml.x2006.main.CTPivotField pivotField : pivotTable.getCTPivotTableDefinition().getPivotFields().getPivotFieldList()) {\n    pivotField.setCompact(false);  \n    pivotField.setOutline(false);  \n   }\n\n   workbook.write(fileout);\n\n  }\n\n }\n}\n</code></pre>\n"}],"owner":{"account_id":16562127,"reputation":73,"user_id":11967792,"display_name":"abhijit.bhatta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":106,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75529485,"answer_count":1,"score":1,"last_activity_date":1677051427,"creation_date":1677043715,"question_id":75528597,"body_markdown":"I have some data in an ExcelSheet, and I am trying to create a pivot table with multiple column labels and row labels. \r\nI need to generate the pivot with Classic Pivot Table Layout option enabled. \r\nI tried doing it using the below code , but this does not seem to work.\r\n\r\n     org.openxmlformats.schemas.spreadsheetml.x2006.main.CTExtensionList extList = pivotTable.getCTPivotTableDefinition().addNewExtLst();\r\n    \t\t   org.openxmlformats.schemas.spreadsheetml.x2006.main.CTExtension ext = extList.addNewExt();\r\n    \t\t   String extXML = &quot;&lt;x14:pivotTableDefinition&quot;\r\n    \t\t\t\t    + &quot; xmlns:x14=\\&quot;http://schemas.microsoft.com/office/spreadsheetml/2009/9/main\\&quot;&gt;&quot;\r\n    \t\t\t\t    + &quot;&lt;x14:pivotTableStyleInfo showColStripes=\\&quot;0\\&quot; showRowStripes=\\&quot;0\\&quot; showLastColumn=\\&quot;0\\&quot; showRowHeaders=\\&quot;1\\&quot; showColumnHeaders=\\&quot;1\\&quot;/&gt;&lt;/x14:pivotTableDefinition&gt;&quot;;\r\n    \t\t  System.out.println(extXML);\r\n    \t\t   org.apache.xmlbeans.XmlObject xmlObject = org.apache.xmlbeans.XmlObject.Factory.parse(extXML);\t\t   \r\n    \t\t\t\text.set(xmlObject);\r\n    \t\t\t\text.setUri(&quot;{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}&quot;);\r\n\r\nIs there a way to enable Classic Pivot Table Layout in excel using APACHE POI/ooxml .","title":"Need to enable &#39;Classic Pivot Table Layout&#39; option in excel using Apache POI JAVA","body":"<p>I have some data in an ExcelSheet, and I am trying to create a pivot table with multiple column labels and row labels.\nI need to generate the pivot with Classic Pivot Table Layout option enabled.\nI tried doing it using the below code , but this does not seem to work.</p>\n<pre><code> org.openxmlformats.schemas.spreadsheetml.x2006.main.CTExtensionList extList = pivotTable.getCTPivotTableDefinition().addNewExtLst();\n           org.openxmlformats.schemas.spreadsheetml.x2006.main.CTExtension ext = extList.addNewExt();\n           String extXML = &quot;&lt;x14:pivotTableDefinition&quot;\n                    + &quot; xmlns:x14=\\&quot;http://schemas.microsoft.com/office/spreadsheetml/2009/9/main\\&quot;&gt;&quot;\n                    + &quot;&lt;x14:pivotTableStyleInfo showColStripes=\\&quot;0\\&quot; showRowStripes=\\&quot;0\\&quot; showLastColumn=\\&quot;0\\&quot; showRowHeaders=\\&quot;1\\&quot; showColumnHeaders=\\&quot;1\\&quot;/&gt;&lt;/x14:pivotTableDefinition&gt;&quot;;\n          System.out.println(extXML);\n           org.apache.xmlbeans.XmlObject xmlObject = org.apache.xmlbeans.XmlObject.Factory.parse(extXML);          \n                ext.set(xmlObject);\n                ext.setUri(&quot;{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}&quot;);\n</code></pre>\n<p>Is there a way to enable Classic Pivot Table Layout in excel using APACHE POI/ooxml .</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":5795637,"reputation":7297,"user_id":4571544,"display_name":"dekkard"},"score":0,"creation_date":1676744849,"post_id":75342509,"comment_id":133200723,"body_markdown":"Sharing a minimum reproducible example of you problem might get you the solution faster. Also, post your logs as text, not as an image, even if it&#39;s long. An image is not searchable and is much harder to analyze.","body":"Sharing a minimum reproducible example of you problem might get you the solution faster. Also, post your logs as text, not as an image, even if it&#39;s long. An image is not searchable and is much harder to analyze."},{"owner":{"account_id":15187657,"reputation":122,"user_id":10959131,"display_name":"NickNgn"},"score":0,"creation_date":1677030633,"post_id":75342509,"comment_id":133255797,"body_markdown":"@S. Cannon, could you provide some context about package structure and how you&#39;re using @ComponentScan?","body":"@S. Cannon, could you provide some context about package structure and how you&#39;re using @ComponentScan?"}],"answers":[{"comments":[{"owner":{"account_id":6841559,"reputation":59,"user_id":5261779,"accept_rate":67,"display_name":"S. Cannon"},"score":0,"creation_date":1676582910,"post_id":75468641,"comment_id":133171706,"body_markdown":"I added both of those annotations, though neither seemed to have an impact on the console output nor on the default login page credentials that are accepted. Also, while I&#39;m still a novice at the security configurations, I haven&#39;t seen anywhere that mentions to use Bean with UserDetails loadUserByUsername. From what I&#39;ve seen, since we are implementing the UserDetailsService, we need to overwrite it&#39;s method with our own. I have no idea about the SecurityConfig class still though.","body":"I added both of those annotations, though neither seemed to have an impact on the console output nor on the default login page credentials that are accepted. Also, while I&#39;m still a novice at the security configurations, I haven&#39;t seen anywhere that mentions to use Bean with UserDetails loadUserByUsername. From what I&#39;ve seen, since we are implementing the UserDetailsService, we need to overwrite it&#39;s method with our own. I have no idea about the SecurityConfig class still though."},{"owner":{"account_id":26816655,"reputation":77,"user_id":20406553,"display_name":"jetbrain_icin icin"},"score":0,"creation_date":1676610578,"post_id":75468641,"comment_id":133175868,"body_markdown":"Be sure that your SecurityConfig class is being scanned and registered by the Spring context.\nAlso, check that the UserDto object returned by your UserService has the correct values, and that the clean() method in ArchlandsInputSanitizer is not altering the username in an unexpected way.\nYou can make the SecurityConfig class a priority by using @Order(Ordered.HIGHEST_PRECEDENCE).","body":"Be sure that your SecurityConfig class is being scanned and registered by the Spring context. Also, check that the UserDto object returned by your UserService has the correct values, and that the clean() method in ArchlandsInputSanitizer is not altering the username in an unexpected way. You can make the SecurityConfig class a priority by using @Order(Ordered.HIGHEST_PRECEDENCE)."}],"tags":[],"owner":{"account_id":26816655,"reputation":77,"user_id":20406553,"display_name":"jetbrain_icin icin"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676895262,"creation_date":1676529482,"answer_id":75468641,"question_id":75342509,"body_markdown":"You can add `@Order(SecurityProperties.BASIC_AUTH_ORDER)` annotation to **SecurityConfig** class above `@Configuration` annotation. So, your security configuration becomes higher precedence than the default configuration. Also, you may think add `@Bean` annotation to  **ArchlandsUserDetailsService**, in case to be sure it is properly registered.\r\n","title":"Spring Boot Not Invoking SecurityFilterChain","body":"<p>You can add <code>@Order(SecurityProperties.BASIC_AUTH_ORDER)</code> annotation to <strong>SecurityConfig</strong> class above <code>@Configuration</code> annotation. So, your security configuration becomes higher precedence than the default configuration. Also, you may think add <code>@Bean</code> annotation to  <strong>ArchlandsUserDetailsService</strong>, in case to be sure it is properly registered.</p>\n"},{"tags":[],"owner":{"account_id":6666037,"reputation":1880,"user_id":5143658,"display_name":"gybandi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676883934,"creation_date":1676883934,"answer_id":75507200,"question_id":75342509,"body_markdown":"If I see it correctly, the `System.out.println(&quot;In securityFilterChain&quot;)` in SecurityConfig doesn&#39;t get printed. If that&#39;s the case, the problem is that the SecurityConfig Configuration doesn&#39;t get picked up by Spring.\r\n\r\nIf you don&#39;t use custom *@ComponentScan*-s, check your main Spring class&#39; (the one that is annotated with *@SpringBootApplication*) package - it should be at least the same package level, as your SecurityConfig. Eg.\r\n\r\nIf your @SpringBootApplication is in package:\r\n\r\n    org.dummy.app.SpringBootApp\r\n\r\nThen the Security config should be under the org.dummy.app package, like:\r\n\r\n    org.dummy.app.SecurityConfig\r\n\r\nor like:\r\n\r\n    org.dummy.app.config.SecurityConfig\r\n\r\n","title":"Spring Boot Not Invoking SecurityFilterChain","body":"<p>If I see it correctly, the <code>System.out.println(&quot;In securityFilterChain&quot;)</code> in SecurityConfig doesn't get printed. If that's the case, the problem is that the SecurityConfig Configuration doesn't get picked up by Spring.</p>\n<p>If you don't use custom <em>@ComponentScan</em>-s, check your main Spring class' (the one that is annotated with <em>@SpringBootApplication</em>) package - it should be at least the same package level, as your SecurityConfig. Eg.</p>\n<p>If your @SpringBootApplication is in package:</p>\n<pre><code>org.dummy.app.SpringBootApp\n</code></pre>\n<p>Then the Security config should be under the org.dummy.app package, like:</p>\n<pre><code>org.dummy.app.SecurityConfig\n</code></pre>\n<p>or like:</p>\n<pre><code>org.dummy.app.config.SecurityConfig\n</code></pre>\n"}],"owner":{"account_id":6841559,"reputation":59,"user_id":5261779,"accept_rate":67,"display_name":"S. Cannon"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":918,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1677051272,"creation_date":1675476279,"question_id":75342509,"body_markdown":"I setup a springboot application and am trying to get basic user logins setup. From everything I have researched, having the @Configuration and @EnableWebSecurity tags are enough to alert Spring about your class which overrides its configurations (With a @Bean method returning a SecurityFilterChain). However, when running the application, it still uses the DefaultSecurityFilterChain and wants me to login with &quot;user&quot; and autogenerated password that is dumped in the console. I&#39;m not sure what I&#39;m missing to get Spring to recognize my SecurityConfig. However I don&#39;t get any System.out/log.info messages when running (other than the main method&#39;s Hello World), and it doesn&#39;t recognize users from the UserDetailsService.  \r\n\r\nSecurityConfig:\r\n\r\n\t@Configuration\r\n\t@EnableWebSecurity\r\n\tpublic class SecurityConfig {\r\n\t\t@Autowired\r\n\t\tprivate ArchlandsUserDetailsService userDetailsService;\r\n\t\t\r\n\t\t@Bean\r\n\t\tpublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n\t\t\tSystem.out.println(&quot;In securityFilterChain&quot;);\t\r\n\t\t\t\r\n\t\t\thttp\r\n\t\t\t\t.csrf().disable()\r\n\t\t\t\t.authorizeHttpRequests((requests) -&gt; requests\r\n\t\t\t\t\t.requestMatchers(&quot;archlands/api/**&quot;).hasRole(&quot;USER&quot;)\r\n\t\t\t\t\t.anyRequest().authenticated()\r\n\t\t\t\t)\r\n\t\t\t\t.formLogin((form) -&gt; form\r\n\t\t\t\t\t.loginPage(&quot;/login&quot;).permitAll()\r\n\t\t\t\t)\r\n\t\t\t\t.logout((logout) -&gt; logout.permitAll())\r\n\t\t\t\t.authenticationProvider(authenticationProvider());\r\n\t\t\t\r\n\t\t\treturn http.build();\r\n\t\t}\r\n\t\t\r\n\t\t@Bean\r\n\t\tpublic AuthenticationProvider authenticationProvider() {\r\n\t\t\tDaoAuthenticationProvider authenticationProvider = new DaoAuthenticationProvider();\r\n\t\t\tauthenticationProvider.setUserDetailsService(userDetailsService);\r\n\t\t\treturn authenticationProvider;\r\n\t\t}\r\n\t}\r\n\r\nUserDetailsService\r\n\r\n    @RequiredArgsConstructor\r\n\t@Service\r\n\t@Slf4j\r\n\tpublic class ArchlandsUserDetailsService implements UserDetailsService {\r\n\t\t@Autowired\r\n\t\tprivate UserService userService;\r\n\t\t\r\n\t\t@Override\r\n\t\tpublic UserDetails loadUserByUsername(String username) {\r\n\t\t\tString cleanedUsername = ArchlandsInputSanitizer.clean(username);\r\n\t\t\tlog.info(&quot;User &quot; + cleanedUsername + &quot; is attempting to access the Archlands.&quot;);\r\n\t\t\tSystem.out.println(&quot;User &quot; + cleanedUsername + &quot; is attempting to access the Archlands.&quot;);\r\n\t\t\t\r\n\t\t\tSet&lt;GrantedAuthority&gt; grantedAuthorities = new HashSet&lt;&gt;();\r\n\t\t\tUserDto user = userService.findById(cleanedUsername);\r\n\t\t\t\r\n\t\t\tif (user == null) {\r\n\t\t\t\tlog.error(&quot;No user exists with user id: &quot; + cleanedUsername);\r\n\t\t\t\tthrow new UsernameNotFoundException(&quot;No user exists with user id: &quot; + cleanedUsername);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (user.getStatus().equals(&quot;Active&quot;)) {\r\n\t\t\t\tgrantedAuthorities.add(new SimpleGrantedAuthority(&quot;ROLE_USER&quot;));\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfor (int i = 0; i &lt; user.getRoles().length; i++) {\r\n\t\t\t\tif (user.getRoles()[i].equals(Role.DM_ROLE)) {\r\n\t\t\t\t\tgrantedAuthorities.add(new SimpleGrantedAuthority(&quot;ROLE_DM&quot;));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tlog.info(&quot;User: &quot; + cleanedUsername + &quot; has authorities: &quot; + grantedAuthorities.toString());\r\n\t\t\t\r\n\t\t\treturn new User(user.getId(), user.getPassword(), grantedAuthorities);\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\nConsole Output\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/2ZW4M.png","title":"Spring Boot Not Invoking SecurityFilterChain","body":"<p>I setup a springboot application and am trying to get basic user logins setup. From everything I have researched, having the @Configuration and @EnableWebSecurity tags are enough to alert Spring about your class which overrides its configurations (With a @Bean method returning a SecurityFilterChain). However, when running the application, it still uses the DefaultSecurityFilterChain and wants me to login with &quot;user&quot; and autogenerated password that is dumped in the console. I'm not sure what I'm missing to get Spring to recognize my SecurityConfig. However I don't get any System.out/log.info messages when running (other than the main method's Hello World), and it doesn't recognize users from the UserDetailsService.</p>\n<p>SecurityConfig:</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfig {\n    @Autowired\n    private ArchlandsUserDetailsService userDetailsService;\n    \n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        System.out.println(&quot;In securityFilterChain&quot;);   \n        \n        http\n            .csrf().disable()\n            .authorizeHttpRequests((requests) -&gt; requests\n                .requestMatchers(&quot;archlands/api/**&quot;).hasRole(&quot;USER&quot;)\n                .anyRequest().authenticated()\n            )\n            .formLogin((form) -&gt; form\n                .loginPage(&quot;/login&quot;).permitAll()\n            )\n            .logout((logout) -&gt; logout.permitAll())\n            .authenticationProvider(authenticationProvider());\n        \n        return http.build();\n    }\n    \n    @Bean\n    public AuthenticationProvider authenticationProvider() {\n        DaoAuthenticationProvider authenticationProvider = new DaoAuthenticationProvider();\n        authenticationProvider.setUserDetailsService(userDetailsService);\n        return authenticationProvider;\n    }\n}\n</code></pre>\n<p>UserDetailsService</p>\n<pre><code>@RequiredArgsConstructor\n@Service\n@Slf4j\npublic class ArchlandsUserDetailsService implements UserDetailsService {\n    @Autowired\n    private UserService userService;\n    \n    @Override\n    public UserDetails loadUserByUsername(String username) {\n        String cleanedUsername = ArchlandsInputSanitizer.clean(username);\n        log.info(&quot;User &quot; + cleanedUsername + &quot; is attempting to access the Archlands.&quot;);\n        System.out.println(&quot;User &quot; + cleanedUsername + &quot; is attempting to access the Archlands.&quot;);\n        \n        Set&lt;GrantedAuthority&gt; grantedAuthorities = new HashSet&lt;&gt;();\n        UserDto user = userService.findById(cleanedUsername);\n        \n        if (user == null) {\n            log.error(&quot;No user exists with user id: &quot; + cleanedUsername);\n            throw new UsernameNotFoundException(&quot;No user exists with user id: &quot; + cleanedUsername);\n        }\n        \n        if (user.getStatus().equals(&quot;Active&quot;)) {\n            grantedAuthorities.add(new SimpleGrantedAuthority(&quot;ROLE_USER&quot;));\n        }\n        \n        for (int i = 0; i &lt; user.getRoles().length; i++) {\n            if (user.getRoles()[i].equals(Role.DM_ROLE)) {\n                grantedAuthorities.add(new SimpleGrantedAuthority(&quot;ROLE_DM&quot;));\n            }\n        }\n        \n        log.info(&quot;User: &quot; + cleanedUsername + &quot; has authorities: &quot; + grantedAuthorities.toString());\n        \n        return new User(user.getId(), user.getPassword(), grantedAuthorities);\n    }\n    \n}\n</code></pre>\n<p>Console Output\n<a href=\"https://i.stack.imgur.com/2ZW4M.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2ZW4M.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","android","firebase","google-cloud-platform","google-cloud-firestore"],"comments":[{"owner":{"account_id":426109,"reputation":302042,"user_id":807126,"display_name":"Doug Stevenson"},"score":0,"creation_date":1676912714,"post_id":75511652,"comment_id":133228584,"body_markdown":"This is failing: `(List&lt;SelectableImageModel&gt;) documentSnapshot.get(&quot;IMAGES&quot;);` You can&#39;t cast document data directly to a custom java class.  You have to manually populate the class by pulling each field out of the document snapshot and putting it into the class.  Document fields are only ever going to be String, Long, Double, Timestamp, Boolean, DocumentReference, Map&lt;Object&gt;, List&lt;Object&gt;.","body":"This is failing: <code>(List&lt;SelectableImageModel&gt;) documentSnapshot.get(&quot;IMAGES&quot;);</code> You can&#39;t cast document data directly to a custom java class.  You have to manually populate the class by pulling each field out of the document snapshot and putting it into the class.  Document fields are only ever going to be String, Long, Double, Timestamp, Boolean, DocumentReference, Map&lt;Object&gt;, List&lt;Object&gt;."},{"owner":{"account_id":10115449,"reputation":1615,"user_id":7474282,"accept_rate":75,"display_name":"Taha Sami"},"score":0,"creation_date":1676914699,"post_id":75511652,"comment_id":133229118,"body_markdown":"@DougStevenson I hope you can provide a solution in the form of code to precisely demonstrate what you mean.","body":"@DougStevenson I hope you can provide a solution in the form of code to precisely demonstrate what you mean."},{"owner":{"account_id":426109,"reputation":302042,"user_id":807126,"display_name":"Doug Stevenson"},"score":1,"creation_date":1676915949,"post_id":75511652,"comment_id":133229464,"body_markdown":"I suggest reviewing the [documentation](https://firebase.google.com/docs/firestore/query-data/get-data) on how to deal with data coming from document snapshots. It&#39;s pretty straightforward.  I also recommend updating your question to be more clear about where you are stuck with this.","body":"I suggest reviewing the <a href=\"https://firebase.google.com/docs/firestore/query-data/get-data\" rel=\"nofollow noreferrer\">documentation</a> on how to deal with data coming from document snapshots. It&#39;s pretty straightforward.  I also recommend updating your question to be more clear about where you are stuck with this."}],"answers":[{"tags":[],"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1677051125,"creation_date":1676968018,"answer_id":75517905,"question_id":75511652,"body_markdown":"The [DocumentSnapshot#get(String field)][1] method, returns an object of type [Object][2]. So the following line of code will definitely fail:\r\n\r\n    (List&lt;SelectableImageModel&gt;) documentSnapshot.get(&quot;IMAGES&quot;);\r\n\r\nBecause in Java, there is no way you can perform such a cast. If you however try to perform such a cast, you&#39;ll most likely get a [ClassCastException][3]. To get the `IMAGES` array as a `List&lt;SelectableImageModel&gt;`, I recommend you create another class that looks like this:\r\n\r\n    public class Document {\r\n        public List&lt;SelectableImageModel&gt; imagesList;\r\n    }\r\n\r\nAnd to read the document, you have to use [DocumentSnapshot#toObject(Class&lt;T&gt; valueType)][4] method instead. So in code, it should look like this:\r\n\r\n    List&lt;SelectableImageModel&gt; imagesList = documentSnapshot.toObject(Document.class).imagesList;\r\n\r\nSo first you have to convert the `DocumentSnapshot` object into an object of type `Document`, and then read the public `imagesList` field from within the object. For more information, I also recommend you read this [resource][5].\r\n\r\n\r\n  [1]: https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/DocumentSnapshot#get(java.lang.String)\r\n  [2]: https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html\r\n  [3]: https://docs.oracle.com/javase/7/docs/api/java/lang/ClassCastException.html\r\n  [4]: https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/DocumentSnapshot#toObject(java.lang.Class%3CT%3E)\r\n  [5]: https://medium.com/firebase-tips-tricks/how-to-map-an-array-of-objects-from-cloud-firestore-to-a-list-of-objects-122e579eae10","title":"How to convert an array of maps to a list?","body":"<p>The <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/DocumentSnapshot#get(java.lang.String)\" rel=\"nofollow noreferrer\">DocumentSnapshot#get(String field)</a> method, returns an object of type <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html\" rel=\"nofollow noreferrer\">Object</a>. So the following line of code will definitely fail:</p>\n<pre><code>(List&lt;SelectableImageModel&gt;) documentSnapshot.get(&quot;IMAGES&quot;);\n</code></pre>\n<p>Because in Java, there is no way you can perform such a cast. If you however try to perform such a cast, you'll most likely get a <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/ClassCastException.html\" rel=\"nofollow noreferrer\">ClassCastException</a>. To get the <code>IMAGES</code> array as a <code>List&lt;SelectableImageModel&gt;</code>, I recommend you create another class that looks like this:</p>\n<pre><code>public class Document {\n    public List&lt;SelectableImageModel&gt; imagesList;\n}\n</code></pre>\n<p>And to read the document, you have to use <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/DocumentSnapshot#toObject(java.lang.Class%3CT%3E)\" rel=\"nofollow noreferrer\">DocumentSnapshot#toObject(Class valueType)</a> method instead. So in code, it should look like this:</p>\n<pre><code>List&lt;SelectableImageModel&gt; imagesList = documentSnapshot.toObject(Document.class).imagesList;\n</code></pre>\n<p>So first you have to convert the <code>DocumentSnapshot</code> object into an object of type <code>Document</code>, and then read the public <code>imagesList</code> field from within the object. For more information, I also recommend you read this <a href=\"https://medium.com/firebase-tips-tricks/how-to-map-an-array-of-objects-from-cloud-firestore-to-a-list-of-objects-122e579eae10\" rel=\"nofollow noreferrer\">resource</a>.</p>\n"}],"owner":{"account_id":10115449,"reputation":1615,"user_id":7474282,"accept_rate":75,"display_name":"Taha Sami"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75517905,"answer_count":1,"score":0,"last_activity_date":1677051125,"creation_date":1676909340,"question_id":75511652,"body_markdown":"SelectableImageModel:\r\n\r\n    public class SelectableImageModel {\r\n    \r\n        @PropertyName(&quot;FILE_NAME&quot;)\r\n        public String fileName;\r\n        @PropertyName(&quot;DURATION&quot;)\r\n        public int duration;\r\n        @PropertyName(&quot;EXPIRATION_DATE&quot;)\r\n        public String expirationDate;\r\n    \r\n        @PropertyName(&quot;FILE_NAME&quot;)\r\n        public String getFileName() {\r\n            return fileName;\r\n        }\r\n    \r\n        @PropertyName(&quot;FILE_NAME&quot;)\r\n        public void setFileName(String fileName) {\r\n            this.fileName = fileName;\r\n        }\r\n    \r\n        @PropertyName(&quot;DURATION&quot;)\r\n        public int getDuration() {\r\n            return duration;\r\n        }\r\n    \r\n        @PropertyName(&quot;DURATION&quot;)\r\n        public void setDuration(int duration) {\r\n            this.duration = duration;\r\n        }\r\n    \r\n        @PropertyName(&quot;EXPIRATION_DATE&quot;)\r\n        public String getExpirationDate() {\r\n            return expirationDate;\r\n        }\r\n    \r\n        @PropertyName(&quot;EXPIRATION_DATE&quot;)\r\n        public void setExpirationDate(String expirationDate) {\r\n            this.expirationDate = expirationDate;\r\n        }\r\n    \r\n    }\r\n\r\n**Code**\r\n\r\n    if (documentSnapshot.get(&quot;IMAGES&quot;) != null) {\r\n        List&lt;SelectableImageModel&gt; imagesList = (List&lt;SelectableImageModel&gt;) documentSnapshot.get(&quot;IMAGES&quot;);\r\n        Log.w(&quot;ABC&quot;, &quot;... &quot; + documentSnapshot.get(&quot;IMAGES&quot;));\r\n        Log.w(&quot;ABC&quot;, &quot;... &quot; + documentSnapshot.get(&quot;IMAGES&quot;).getClass());\r\n        Log.w(&quot;ABC&quot;, &quot;... &quot; + documentSnapshot.get(&quot;IMAGES&quot;).getClass().getName());\r\n        Log.w(&quot;ABC&quot;, imagesList == null ? &quot;null&quot; : &quot;notnull&quot;);\r\n        Log.w(&quot;ABC&quot;, &quot;. &quot; + imagesList.size()); //Output is 3\r\n        Log.w(&quot;ABC&quot;, &quot;. &quot; + imagesList.get(0));\r\n        try {\r\n            Log.w(&quot;ABC&quot;, imagesList.get(0).getFileName().getClass().getName());\r\n        } catch (Exception e) {\r\n            Log.w(&quot;ABC&quot;, &quot;... &quot; + e); // Always print this exception -&gt; java.lang.ClassCastException: java.util.HashMap cannot be cast to com.xxx.adminpanel.app.models.SelectableImageModel\r\n        }\r\n    }\r\n\r\n[![enter image description here][1]][1]\r\n\r\nThe `IMAGES` field is an array where each item inside it is a map. As you can see in the code above, I&#39;m attempting to convert this array to a list. However, I&#39;m encountering an exception. What am I missing?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/TcePr.png","title":"How to convert an array of maps to a list?","body":"<p>SelectableImageModel:</p>\n<pre><code>public class SelectableImageModel {\n\n    @PropertyName(&quot;FILE_NAME&quot;)\n    public String fileName;\n    @PropertyName(&quot;DURATION&quot;)\n    public int duration;\n    @PropertyName(&quot;EXPIRATION_DATE&quot;)\n    public String expirationDate;\n\n    @PropertyName(&quot;FILE_NAME&quot;)\n    public String getFileName() {\n        return fileName;\n    }\n\n    @PropertyName(&quot;FILE_NAME&quot;)\n    public void setFileName(String fileName) {\n        this.fileName = fileName;\n    }\n\n    @PropertyName(&quot;DURATION&quot;)\n    public int getDuration() {\n        return duration;\n    }\n\n    @PropertyName(&quot;DURATION&quot;)\n    public void setDuration(int duration) {\n        this.duration = duration;\n    }\n\n    @PropertyName(&quot;EXPIRATION_DATE&quot;)\n    public String getExpirationDate() {\n        return expirationDate;\n    }\n\n    @PropertyName(&quot;EXPIRATION_DATE&quot;)\n    public void setExpirationDate(String expirationDate) {\n        this.expirationDate = expirationDate;\n    }\n\n}\n</code></pre>\n<p><strong>Code</strong></p>\n<pre><code>if (documentSnapshot.get(&quot;IMAGES&quot;) != null) {\n    List&lt;SelectableImageModel&gt; imagesList = (List&lt;SelectableImageModel&gt;) documentSnapshot.get(&quot;IMAGES&quot;);\n    Log.w(&quot;ABC&quot;, &quot;... &quot; + documentSnapshot.get(&quot;IMAGES&quot;));\n    Log.w(&quot;ABC&quot;, &quot;... &quot; + documentSnapshot.get(&quot;IMAGES&quot;).getClass());\n    Log.w(&quot;ABC&quot;, &quot;... &quot; + documentSnapshot.get(&quot;IMAGES&quot;).getClass().getName());\n    Log.w(&quot;ABC&quot;, imagesList == null ? &quot;null&quot; : &quot;notnull&quot;);\n    Log.w(&quot;ABC&quot;, &quot;. &quot; + imagesList.size()); //Output is 3\n    Log.w(&quot;ABC&quot;, &quot;. &quot; + imagesList.get(0));\n    try {\n        Log.w(&quot;ABC&quot;, imagesList.get(0).getFileName().getClass().getName());\n    } catch (Exception e) {\n        Log.w(&quot;ABC&quot;, &quot;... &quot; + e); // Always print this exception -&gt; java.lang.ClassCastException: java.util.HashMap cannot be cast to com.xxx.adminpanel.app.models.SelectableImageModel\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/TcePr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TcePr.png\" alt=\"enter image description here\" /></a></p>\n<p>The <code>IMAGES</code> field is an array where each item inside it is a map. As you can see in the code above, I'm attempting to convert this array to a list. However, I'm encountering an exception. What am I missing?</p>\n"},{"tags":["java","exception","selenium-webdriver","selenium-chromedriver"],"comments":[{"owner":{"account_id":19395247,"reputation":3208,"user_id":14183092,"display_name":"kerbermeister"},"score":2,"creation_date":1677050751,"post_id":75528949,"comment_id":133258678,"body_markdown":"don&#39;t post images, post the actual code","body":"don&#39;t post images, post the actual code"}],"answers":[{"tags":[],"owner":{"account_id":16422586,"reputation":1841,"user_id":11863448,"display_name":"Akzy"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677047748,"creation_date":1677047748,"answer_id":75529018,"question_id":75528949,"body_markdown":"Driver path should be set before browser launch as given below.\r\n\r\n\r\n    System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;/path/to/chromedriver&quot;);\r\n\r\n","title":"I&#39;m trying to start selenium but it is showing this error i am thinking this is related to chrome driver exe or version mismatch plzz clarify","body":"<p>Driver path should be set before browser launch as given below.</p>\n<pre><code>System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;/path/to/chromedriver&quot;);\n</code></pre>\n"}],"owner":{"account_id":27459631,"reputation":1,"user_id":20950441,"display_name":"Manichandra"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1677050770,"creation_date":1677047155,"question_id":75528949,"body_markdown":"[enter image description here](https://i.stack.imgur.com/5foo0.png)\r\n\r\ni wrote code like this\r\n\r\n&gt; Exception in thread &quot;main&quot; java.lang.IllegalStateException: The path\r\n&gt; to the driver executable must be set by the webdriver.chrome.driver\r\n&gt; system property; for more information, see\r\n&gt; https://github.com/SeleniumHQ/selenium/wiki/ChromeDriver. The latest\r\n&gt; version can be downloaded from\r\n&gt; http://chromedriver.storage.googleapis.com/index.html \tat\r\n&gt; com.google.common.base.Preconditions.checkState(Preconditions.java:847)\r\n&gt; \tat\r\n&gt; org.openqa.selenium.remote.service.DriverService.findExecutable(DriverService.java:134)\r\n&gt; \tat\r\n&gt; org.openqa.selenium.chrome.ChromeDriverService.access$000(ChromeDriverService.java:35)\r\n&gt; \tat\r\n&gt; org.openqa.selenium.chrome.ChromeDriverService$Builder.findDefaultExecutable(ChromeDriverService.java:159)\r\n&gt; \tat\r\n&gt; org.openqa.selenium.remote.service.DriverService$Builder.build(DriverService.java:355)\r\n&gt; \tat\r\n&gt; org.openqa.selenium.chrome.ChromeDriverService.createDefaultService(ChromeDriverService.java:94)\r\n&gt; \tat\r\n&gt; org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:123)\r\n&gt; \tat Selenium.Open_browser.main(Open_browser.java:14)\r\n\r\n","title":"I&#39;m trying to start selenium but it is showing this error i am thinking this is related to chrome driver exe or version mismatch plzz clarify","body":"<p><a href=\"https://i.stack.imgur.com/5foo0.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>i wrote code like this</p>\n<blockquote>\n<p>Exception in thread &quot;main&quot; java.lang.IllegalStateException: The path\nto the driver executable must be set by the webdriver.chrome.driver\nsystem property; for more information, see\n<a href=\"https://github.com/SeleniumHQ/selenium/wiki/ChromeDriver\" rel=\"nofollow noreferrer\">https://github.com/SeleniumHQ/selenium/wiki/ChromeDriver</a>. The latest\nversion can be downloaded from\n<a href=\"http://chromedriver.storage.googleapis.com/index.html\" rel=\"nofollow noreferrer\">http://chromedriver.storage.googleapis.com/index.html</a>     at\ncom.google.common.base.Preconditions.checkState(Preconditions.java:847)\nat\norg.openqa.selenium.remote.service.DriverService.findExecutable(DriverService.java:134)\nat\norg.openqa.selenium.chrome.ChromeDriverService.access$000(ChromeDriverService.java:35)\nat\norg.openqa.selenium.chrome.ChromeDriverService$Builder.findDefaultExecutable(ChromeDriverService.java:159)\nat\norg.openqa.selenium.remote.service.DriverService$Builder.build(DriverService.java:355)\nat\norg.openqa.selenium.chrome.ChromeDriverService.createDefaultService(ChromeDriverService.java:94)\nat\norg.openqa.selenium.chrome.ChromeDriver.(ChromeDriver.java:123)\nat Selenium.Open_browser.main(Open_browser.java:14)</p>\n</blockquote>\n"},{"tags":["java","android","navigation","fragment","fragment-backstack"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1677018331,"post_id":75526467,"comment_id":133253939,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":17516324,"reputation":119,"user_id":12703274,"display_name":"Ajay Chandran"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677050498,"creation_date":1677050498,"answer_id":75529348,"question_id":75526467,"body_markdown":"Try using Shared Preference or Data Store.","title":"How to return to the last fragment after pressing home button or exit the android app?","body":"<p>Try using Shared Preference or Data Store.</p>\n"}],"owner":{"account_id":25609089,"reputation":1,"user_id":19382785,"display_name":"Alaa Hosnii"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677050498,"creation_date":1677018161,"question_id":75526467,"body_markdown":"when returning to the app after pressing home button or exit the app it returns to the first fragment of the app (splash screen) I need it to return to the last fragment before pressing home button, if I were on the home fragment and pressed the home button when returning I need to open on the home fragment not the splash screen fragment.\r\n\r\nI am using navigation component, but I cannot handle this issue.","title":"How to return to the last fragment after pressing home button or exit the android app?","body":"<p>when returning to the app after pressing home button or exit the app it returns to the first fragment of the app (splash screen) I need it to return to the last fragment before pressing home button, if I were on the home fragment and pressed the home button when returning I need to open on the home fragment not the splash screen fragment.</p>\n<p>I am using navigation component, but I cannot handle this issue.</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":9760,"reputation":85860,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1675299536,"post_id":75317567,"comment_id":132901408,"body_markdown":"@g00se Not really, that would grab ALL of the second input.  It needs to end on space or end-of-string.","body":"@g00se Not really, that would grab ALL of the second input.  It needs to end on space or end-of-string."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1675299891,"post_id":75317567,"comment_id":132901468,"body_markdown":"Matcher matcher = Pattern.compile(&quot;(Mywebsite[^ ]*)&quot;).matcher(mydata2);","body":"Matcher matcher = Pattern.compile(&quot;(Mywebsite[^ ]*)&quot;).matcher(mydata2);"},{"owner":{"account_id":9463219,"reputation":9357,"user_id":7036419,"display_name":"Maurice Perry"},"score":0,"creation_date":1675319487,"post_id":75317567,"comment_id":132904189,"body_markdown":"&quot;(?:^|.*\\\\s)(Mywebsite\\\\S*)(?:\\\\s.*|$)&quot;","body":"&quot;(?:^|.*\\\\s)(Mywebsite\\\\S*)(?:\\\\s.*|$)&quot;"}],"answers":[{"tags":[],"owner":{"account_id":15591403,"reputation":5743,"user_id":12894468,"display_name":"Sivaram Rasathurai"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675306569,"creation_date":1675306569,"answer_id":75318224,"question_id":75317567,"body_markdown":"You can use the `Mywebsite\\.([a-z]+\\.[a-z]+)`\r\n\r\n```Java\r\npublic static void extractDomain(String domain){\r\n  Pattern domainPattern = Pattern.compile(&quot;Mywebsite\\.([a-z]+\\.[a-z]+)&quot;);\r\n  Matcher match = domainPattern.matcher(domain);\r\n System.out.println(&quot;Mywebsite&quot;+ match.group(1));\r\n\r\n}\r\n```","title":"How to extract string using regex with space before or after","body":"<p>You can use the <code>Mywebsite\\.([a-z]+\\.[a-z]+)</code></p>\n<pre><code>public static void extractDomain(String domain){\n  Pattern domainPattern = Pattern.compile(&quot;Mywebsite\\.([a-z]+\\.[a-z]+)&quot;);\n  Matcher match = domainPattern.matcher(domain);\n System.out.println(&quot;Mywebsite&quot;+ match.group(1));\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5951494,"reputation":12969,"user_id":4679320,"accept_rate":67,"display_name":"prasad_"},"score":0,"creation_date":1675318373,"post_id":75318935,"comment_id":132903981,"body_markdown":"The pattern also matches the following strings: `&quot;Mywebsite.de&quot;`, `&quot;abc Mywebsite.de&quot;`, `&quot;Mywebsite.de xyz&quot;` and `&quot;abc Mywebsite.de xyz&quot;`.","body":"The pattern also matches the following strings: <code>&quot;Mywebsite.de&quot;</code>, <code>&quot;abc Mywebsite.de&quot;</code>, <code>&quot;Mywebsite.de xyz&quot;</code> and <code>&quot;abc Mywebsite.de xyz&quot;</code>."},{"owner":{"account_id":5951494,"reputation":12969,"user_id":4679320,"accept_rate":67,"display_name":"prasad_"},"score":0,"creation_date":1675321750,"post_id":75318935,"comment_id":132904664,"body_markdown":"The `substring` also captures a leading and/or trailing space. So, apply the String class&#39;s `trim` method on the extracted string: `str.substring(matcher.start(), matcher.end()),trim()`","body":"The <code>substring</code> also captures a leading and/or trailing space. So, apply the String class&#39;s <code>trim</code> method on the extracted string: <code>str.substring(matcher.start(), matcher.end()),trim()</code>"}],"tags":[],"owner":{"account_id":5951494,"reputation":12969,"user_id":4679320,"accept_rate":67,"display_name":"prasad_"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675315018,"creation_date":1675315018,"answer_id":75318935,"question_id":75317567,"body_markdown":"You can try this pattern match for the input array of possible strings. The first four strings will match.\r\n\r\n    String patternStr = &quot;(\\\\s|^)mywebsite([.][a-z][a-z]){1,2}(\\\\s|$)&quot;;\r\n    Pattern pattern = Pattern.compile(patternStr, Pattern.CASE_INSENSITIVE);\r\n    String [] stringsToMatch = {\r\n    \t&quot;Mywebsite.co.uk xyz&quot;,\r\n    \t&quot;abc Mywebsite.co.uk&quot;,\r\n    \t&quot;abc Mywebsite.co.uk xyz&quot;,\r\n    \t&quot;Mywebsite.co.uk&quot;,\r\n    \t&quot;Mywebsite.co.uk.us&quot;,\r\n    \t&quot;Mywebsite&quot;\r\n    };\r\n    \r\n    for (String str : stringsToMatch) {\r\n    \tMatcher matcher = pattern.matcher(str);\r\n    \tSystem.out.println(str);\r\n    \tif (matcher.find()) {\r\n    \t\tSystem.out.println(&quot;    &quot; + str.substring(matcher.start(), matcher.end()));\r\n    \t}\r\n    \telse {\r\n    \t\tSystem.out.println(&quot;    No match&quot;);\r\n    \t}\r\n    }\r\n\r\n","title":"How to extract string using regex with space before or after","body":"<p>You can try this pattern match for the input array of possible strings. The first four strings will match.</p>\n<pre><code>String patternStr = &quot;(\\\\s|^)mywebsite([.][a-z][a-z]){1,2}(\\\\s|$)&quot;;\nPattern pattern = Pattern.compile(patternStr, Pattern.CASE_INSENSITIVE);\nString [] stringsToMatch = {\n    &quot;Mywebsite.co.uk xyz&quot;,\n    &quot;abc Mywebsite.co.uk&quot;,\n    &quot;abc Mywebsite.co.uk xyz&quot;,\n    &quot;Mywebsite.co.uk&quot;,\n    &quot;Mywebsite.co.uk.us&quot;,\n    &quot;Mywebsite&quot;\n};\n\nfor (String str : stringsToMatch) {\n    Matcher matcher = pattern.matcher(str);\n    System.out.println(str);\n    if (matcher.find()) {\n        System.out.println(&quot;    &quot; + str.substring(matcher.start(), matcher.end()));\n    }\n    else {\n        System.out.println(&quot;    No match&quot;);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10621254,"reputation":2629,"user_id":7822301,"accept_rate":56,"display_name":"Zakaria Shahed"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675315409,"creation_date":1675315409,"answer_id":75318986,"question_id":75317567,"body_markdown":"To find the domain name from a string you can use regex like \r\n\r\n`(?:http[s]?:\\/\\/)?(?:[a-zA-Z]|[0-9]|[$-_@.&amp;+]|[!*\\(\\),]|(?:%[0-9a-fA-F][0-9a-fA-F]))+`\r\n\r\nThis  program will capture list of domain from your string\r\n\r\n    public static List&lt;String&gt; extractDomainNames(String input) {\r\n            List&lt;String&gt; domainNames = new ArrayList&lt;&gt;();\r\n            String domainNamePattern = &quot;(?:http[s]?://)?(?:[a-zA-Z]|[0-9]|[$-_@.&amp;+]|[!*\\\\(\\\\),]|(?:%[0-9a-fA-F][0-9a-fA-F]))+&quot;;\r\n            Pattern pattern = Pattern.compile(domainNamePattern);\r\n            Matcher matcher = pattern.matcher(input);\r\n            while (matcher.find()) {\r\n                domainNames.add(matcher.group());\r\n            }\r\n            return domainNames;\r\n        }","title":"How to extract string using regex with space before or after","body":"<p>To find the domain name from a string you can use regex like</p>\n<p><code>(?:http[s]?:\\/\\/)?(?:[a-zA-Z]|[0-9]|[$-_@.&amp;+]|[!*\\(\\),]|(?:%[0-9a-fA-F][0-9a-fA-F]))+</code></p>\n<p>This  program will capture list of domain from your string</p>\n<pre><code>public static List&lt;String&gt; extractDomainNames(String input) {\n        List&lt;String&gt; domainNames = new ArrayList&lt;&gt;();\n        String domainNamePattern = &quot;(?:http[s]?://)?(?:[a-zA-Z]|[0-9]|[$-_@.&amp;+]|[!*\\\\(\\\\),]|(?:%[0-9a-fA-F][0-9a-fA-F]))+&quot;;\n        Pattern pattern = Pattern.compile(domainNamePattern);\n        Matcher matcher = pattern.matcher(input);\n        while (matcher.find()) {\n            domainNames.add(matcher.group());\n        }\n        return domainNames;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10051056,"reputation":3485,"user_id":7430869,"display_name":"Trung Duong"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675318075,"creation_date":1675318075,"answer_id":75319264,"question_id":75317567,"body_markdown":"You could try this regex: `Mywebsite\\.[^\\s]+`\r\n\r\n    String input = &quot;Mywebsite.de durchsuchen&quot;;\r\n    Pattern regexPattern = Pattern.compile(&quot;Mywebsite\\.[^\\s]+&quot;);\r\n    Matcher regexMatcher = regexPattern.matcher(input);\r\n    while (regexMatcher.find()) {\r\n        System.out.println(regexMatcher.group());\r\n    }\r\n\r\nSee regex demo [here][1]\r\n\r\n\r\n  [1]: https://regex101.com/r/xRriE9/1","title":"How to extract string using regex with space before or after","body":"<p>You could try this regex: <code>Mywebsite\\.[^\\s]+</code></p>\n<pre><code>String input = &quot;Mywebsite.de durchsuchen&quot;;\nPattern regexPattern = Pattern.compile(&quot;Mywebsite\\.[^\\s]+&quot;);\nMatcher regexMatcher = regexPattern.matcher(input);\nwhile (regexMatcher.find()) {\n    System.out.println(regexMatcher.group());\n}\n</code></pre>\n<p>See regex demo <a href=\"https://regex101.com/r/xRriE9/1\" rel=\"nofollow noreferrer\">here</a></p>\n"},{"tags":[],"owner":{"account_id":8571883,"reputation":821,"user_id":6422459,"display_name":"DigitShifter"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677049930,"creation_date":1677049930,"answer_id":75529294,"question_id":75317567,"body_markdown":"Alternative:\r\n\r\nUsed regex:\r\n\r\n    &quot;\\\\bMywebsite\\\\S+&quot;\r\n\r\nSee regex in context and testbench, below:\r\n\r\n    public static void main(String[] args) {\r\n        List&lt;String&gt; inputs = Arrays.asList(\r\n                &quot;Search Mywebsite.de&quot;,\r\n                &quot;Mywebsite.de durchsuchen&quot;,\r\n                &quot;Search Mywebsite.co.uk&quot;,\r\n                &quot;Mywebsite.co.uk something&quot;\r\n        );\r\n    \r\n        Pattern pattern = Pattern.compile(&quot;\\\\bMywebsite\\\\S+&quot;);\r\n        for (String input : inputs) {\r\n            Matcher matcher = pattern.matcher(input);\r\n            if(matcher.find()) {\r\n                System.out.println(matcher.group());\r\n            }\r\n        }\r\n    }\r\n\r\nOutput:\r\n\r\n    Mywebsite.de\r\n    Mywebsite.de\r\n    Mywebsite.co.uk\r\n    Mywebsite.co.uk\r\n\r\nComment:\r\n\r\n    Used Pattern:\r\n    \\b\tA word boundary\r\n    \\S\tA non-whitespace character: [^\\s]\r\n\r\nRead more about Pattern here:\r\nhttps://docs.oracle.com/javase/10/docs/api/java/util/regex/Pattern.html\r\n\r\nOther tools for testing regex:\r\nhttps://regex101.com/\r\n\r\n    \r\n","title":"How to extract string using regex with space before or after","body":"<p>Alternative:</p>\n<p>Used regex:</p>\n<pre><code>&quot;\\\\bMywebsite\\\\S+&quot;\n</code></pre>\n<p>See regex in context and testbench, below:</p>\n<pre><code>public static void main(String[] args) {\n    List&lt;String&gt; inputs = Arrays.asList(\n            &quot;Search Mywebsite.de&quot;,\n            &quot;Mywebsite.de durchsuchen&quot;,\n            &quot;Search Mywebsite.co.uk&quot;,\n            &quot;Mywebsite.co.uk something&quot;\n    );\n\n    Pattern pattern = Pattern.compile(&quot;\\\\bMywebsite\\\\S+&quot;);\n    for (String input : inputs) {\n        Matcher matcher = pattern.matcher(input);\n        if(matcher.find()) {\n            System.out.println(matcher.group());\n        }\n    }\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>Mywebsite.de\nMywebsite.de\nMywebsite.co.uk\nMywebsite.co.uk\n</code></pre>\n<p>Comment:</p>\n<pre><code>Used Pattern:\n\\b  A word boundary\n\\S  A non-whitespace character: [^\\s]\n</code></pre>\n<p>Read more about Pattern here:\n<a href=\"https://docs.oracle.com/javase/10/docs/api/java/util/regex/Pattern.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/10/docs/api/java/util/regex/Pattern.html</a></p>\n<p>Other tools for testing regex:\n<a href=\"https://regex101.com/\" rel=\"nofollow noreferrer\">https://regex101.com/</a></p>\n"}],"owner":{"account_id":5955699,"reputation":659,"user_id":4682461,"accept_rate":25,"display_name":"golu"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":108,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":5,"score":1,"last_activity_date":1677049930,"creation_date":1675297686,"question_id":75317567,"body_markdown":"in the following examples, I want to extract &quot;Mywebsite.xx&quot;. How do I do it?\r\n\r\n```\r\nSearch Mywebsite.de  ----&gt; Mywebsite.de\r\nMywebsite.de durchsuchen ----&gt; Mywebsite.de\r\nSearch Mywebsite.co.uk ----&gt; Mywebsite.co.uk\r\nMywebsite.co.uk something ----&gt; Mywebsite.co.uk\r\n```\r\n\r\nI tried this but it&#39;s not working:\r\n```\r\nString mydata2 = &quot;Mywebsite.de durchsuchen&quot;;\r\nMatcher matcher = Pattern.compile(&quot;Mywebsite(.*?)&quot;).matcher(mydata2);\r\nif (matcher.find())\r\n{\r\n    System.out.println(matcher.group(1));\r\n}\r\n```","title":"How to extract string using regex with space before or after","body":"<p>in the following examples, I want to extract &quot;Mywebsite.xx&quot;. How do I do it?</p>\n<pre><code>Search Mywebsite.de  ----&gt; Mywebsite.de\nMywebsite.de durchsuchen ----&gt; Mywebsite.de\nSearch Mywebsite.co.uk ----&gt; Mywebsite.co.uk\nMywebsite.co.uk something ----&gt; Mywebsite.co.uk\n</code></pre>\n<p>I tried this but it's not working:</p>\n<pre><code>String mydata2 = &quot;Mywebsite.de durchsuchen&quot;;\nMatcher matcher = Pattern.compile(&quot;Mywebsite(.*?)&quot;).matcher(mydata2);\nif (matcher.find())\n{\n    System.out.println(matcher.group(1));\n}\n</code></pre>\n"},{"tags":["java","ftp","sftp","apache-commons-net"],"answers":[{"tags":[],"owner":{"account_id":453710,"reputation":192103,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677049747,"creation_date":1368434678,"answer_id":16517972,"question_id":16517191,"body_markdown":"From the fact you need to enter a port in FileZilla (which defaults to the FTP port `21`), I assume, you are not providing some information to the `FTPClient`:\r\n\r\n1) Port number (assuming it&#39;s different from the default `21`). To connect to a non-default port, use the `Connect` overload with two arguments:\r\n\r\n       public void connect(String hostname, int port)\r\n\r\n2) You may be using an implicit SSL/TLS encryption, what FileZilla (but not the `FTPClient`) could assume from a port number `990`\r\n\r\n3) You actually want to use the SFTP (based on the `sftp` tag with your question). The `FTPClient` does not support the SFTP protocol, it&#39;s totally distinct from the FTP. See https://stackoverflow.com/q/14617/850848","title":"Upload file FTP server","body":"<p>From the fact you need to enter a port in FileZilla (which defaults to the FTP port <code>21</code>), I assume, you are not providing some information to the <code>FTPClient</code>:</p>\n<ol>\n<li><p>Port number (assuming it's different from the default <code>21</code>). To connect to a non-default port, use the <code>Connect</code> overload with two arguments:</p>\n<pre><code>public void connect(String hostname, int port)\n</code></pre>\n</li>\n<li><p>You may be using an implicit SSL/TLS encryption, what FileZilla (but not the <code>FTPClient</code>) could assume from a port number <code>990</code></p>\n</li>\n<li><p>You actually want to use the SFTP (based on the <code>sftp</code> tag with your question). The <code>FTPClient</code> does not support the SFTP protocol, it's totally distinct from the FTP. See <a href=\"https://stackoverflow.com/q/14617/850848\">How to retrieve a file from a server via SFTP?</a></p>\n</li>\n</ol>\n"}],"owner":{"account_id":1240801,"reputation":1229,"user_id":1203446,"accept_rate":55,"display_name":"Souvik"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2163,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":16517972,"answer_count":1,"score":2,"last_activity_date":1677049747,"creation_date":1368431603,"question_id":16517191,"body_markdown":"I am stuck during connecting to my FTP server through apache FTP client. I found lots of program out there but I am not able to connect to my FTP server through the below code.\r\n\r\n    FTPClient ftpClient = new FTPClient();\r\n    ftpClient.connect(&quot;169.144.76.33&quot;);\r\n    ftpClient.login(&quot;root&quot;, &quot;re123set&quot;);\r\n    \r\nException:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n    \r\n    java.net.ConnectException: Connection refused\r\n        at java.net.PlainSocketImpl.socketConnect(Native Method)\r\n    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:327)\r\n        at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:193)\r\n        at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:180)\r\n        at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:384)\r\n        at java.net.Socket.connect(Socket.java:546)\r\n        at org.apache.commons.net.SocketClient.connect(SocketClient.java:176)\r\n        at org.apache.commons.net.SocketClient.connect(SocketClient.java:268)\r\n\r\nBut whenever I am trying to connect through FileZilla with IP, user name, password, port (without port can&#39;t connect). I am getting able to connect to the FTP server.\r\n\r\nSo please help me to resolve the issue..\r\n\r\n","title":"Upload file FTP server","body":"<p>I am stuck during connecting to my FTP server through apache FTP client. I found lots of program out there but I am not able to connect to my FTP server through the below code.</p>\n<pre><code>FTPClient ftpClient = new FTPClient();\nftpClient.connect(&quot;169.144.76.33&quot;);\nftpClient.login(&quot;root&quot;, &quot;re123set&quot;);\n</code></pre>\n<p>Exception:</p>\n<pre class=\"lang-none prettyprint-override\"><code>java.net.ConnectException: Connection refused\n    at java.net.PlainSocketImpl.socketConnect(Native Method)\nat java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:327)\n    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:193)\n    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:180)\n    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:384)\n    at java.net.Socket.connect(Socket.java:546)\n    at org.apache.commons.net.SocketClient.connect(SocketClient.java:176)\n    at org.apache.commons.net.SocketClient.connect(SocketClient.java:268)\n</code></pre>\n<p>But whenever I am trying to connect through FileZilla with IP, user name, password, port (without port can't connect). I am getting able to connect to the FTP server.</p>\n<p>So please help me to resolve the issue..</p>\n"},{"tags":["java","oracle","jdbc","compression"],"answers":[{"comments":[{"owner":{"account_id":45798,"reputation":327472,"user_id":135152,"accept_rate":100,"display_name":"OMG Ponies"},"score":0,"creation_date":1261591080,"post_id":1954318,"comment_id":1866258,"body_markdown":"No, a VPN connection will certainly **not** work.  There&#39;s a limited amount of bandwidth - adding VPN overhead is going to ensure that *less* actual data is stored per packet.","body":"No, a VPN connection will certainly <b>not</b> work.  There&#39;s a limited amount of bandwidth - adding VPN overhead is going to ensure that <i>less</i> actual data is stored per packet."},{"owner":{"account_id":2478,"reputation":1384,"user_id":3449,"display_name":"joev"},"score":0,"creation_date":1261591145,"post_id":1954318,"comment_id":1866269,"body_markdown":"While that is a possibility, I&#39;m hoping to see if the Oracle driver has this built-in, to keep it simple.","body":"While that is a possibility, I&#39;m hoping to see if the Oracle driver has this built-in, to keep it simple."},{"owner":{"account_id":26091,"reputation":178014,"user_id":67606,"accept_rate":78,"display_name":"Pablo Santa Cruz"},"score":2,"creation_date":1261591436,"post_id":1954318,"comment_id":1866300,"body_markdown":"This is not a VPN. It&#39;s just a tunnel. And it **will** work. If you use a compressed tunnel and what you are trying to transmit can be compressed (like huge amounts of text or XML) it will be compressed.","body":"This is not a VPN. It&#39;s just a tunnel. And it <b>will</b> work. If you use a compressed tunnel and what you are trying to transmit can be compressed (like huge amounts of text or XML) it will be compressed."},{"owner":{"account_id":26091,"reputation":178014,"user_id":67606,"accept_rate":78,"display_name":"Pablo Santa Cruz"},"score":0,"creation_date":1261591526,"post_id":1954318,"comment_id":1866314,"body_markdown":"@joev I know that it will be easier to just have a flag in the driver or a parameter in the URL, but this is all I know. :-) \nMaybe there&#39;s something on URL connection parameters documentation...","body":"@joev I know that it will be easier to just have a flag in the driver or a parameter in the URL, but this is all I know. :-)  Maybe there&#39;s something on URL connection parameters documentation..."},{"owner":{"account_id":5396,"reputation":42810,"user_id":8670,"accept_rate":100,"display_name":"DCookie"},"score":2,"creation_date":1261598015,"post_id":1954318,"comment_id":1866979,"body_markdown":"SSH is an encrypted tunnel (http://en.wikipedia.org/wiki/Tunneling_protocol) making it a defacto VPN. That said, it could well work, if the compression ratio is good enough to overcome the VPN/tunnel overhead.","body":"SSH is an encrypted tunnel (<a href=\"http://en.wikipedia.org/wiki/Tunneling_protocol\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Tunneling_protocol</a>) making it a defacto VPN. That said, it could well work, if the compression ratio is good enough to overcome the VPN/tunnel overhead."},{"owner":{"account_id":12795121,"reputation":348,"user_id":9258377,"display_name":"D. Lohrstr&#228;ter"},"score":0,"creation_date":1622110543,"post_id":1954318,"comment_id":119698649,"body_markdown":"Without any remote account allowing ssh port-forwarding, tunneling via ssh will not be possible. So in case you have just the Oracle-Connection, it&#39;s not an option.","body":"Without any remote account allowing ssh port-forwarding, tunneling via ssh will not be possible. So in case you have just the Oracle-Connection, it&#39;s not an option."}],"tags":[],"owner":{"account_id":26091,"reputation":178014,"user_id":67606,"accept_rate":78,"display_name":"Pablo Santa Cruz"},"comment_count":6,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1412700200,"creation_date":1261590688,"answer_id":1954318,"question_id":1954279,"body_markdown":"I don&#39;t know specifics about Oracle&#39;s thin and OCI drivers. But you could use [SSH][1] tunnels to achieve [compression][2].\r\n\r\n 1. So, in your Oracle machine, you setup a SSH daemon. If your Oracle server is running under RedHat Linux, you&#39;re done\r\n 2. On your client machine (the one that hosts your application that connects through JDBC) setup a SSH connection, enabling a compressed tunnel. You can use command line SSH or [Putty][3] (if you are under windows) to do that.\r\n\r\nSetup the connection to something like this:\r\n\r\n    $ ssh -L1521:localhost:1521 username@oracleserver_ip\r\n\r\nThen, in your application, use localhost:1521 as Oracle&#39;s address.\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Secure_Shell\r\n  [2]: http://unixhelp.ed.ac.uk/CGI/man-cgi?ssh+1\r\n  [3]: http://www.chiark.greenend.org.uk/~sgtatham/putty/","title":"Oracle connection compression?","body":"<p>I don't know specifics about Oracle's thin and OCI drivers. But you could use <a href=\"http://en.wikipedia.org/wiki/Secure_Shell\" rel=\"nofollow noreferrer\">SSH</a> tunnels to achieve <a href=\"http://unixhelp.ed.ac.uk/CGI/man-cgi?ssh+1\" rel=\"nofollow noreferrer\">compression</a>.</p>\n\n<ol>\n<li>So, in your Oracle machine, you setup a SSH daemon. If your Oracle server is running under RedHat Linux, you're done</li>\n<li>On your client machine (the one that hosts your application that connects through JDBC) setup a SSH connection, enabling a compressed tunnel. You can use command line SSH or <a href=\"http://www.chiark.greenend.org.uk/~sgtatham/putty/\" rel=\"nofollow noreferrer\">Putty</a> (if you are under windows) to do that.</li>\n</ol>\n\n<p>Setup the connection to something like this:</p>\n\n<pre><code>$ ssh -L1521:localhost:1521 username@oracleserver_ip\n</code></pre>\n\n<p>Then, in your application, use localhost:1521 as Oracle's address.</p>\n"},{"comments":[{"owner":{"account_id":2478,"reputation":1384,"user_id":3449,"display_name":"joev"},"score":0,"creation_date":1261593393,"post_id":1954436,"comment_id":1866531,"body_markdown":"64 bytes pings are only taking 4ms to be ack-ed, so that&#39;s not so bad.  No BLOBs, but a lot of INSERT activity.  No connection pooling, it&#39;s a single connection.  Staffing is a little light for the holidays, so I can&#39;t get into deep WAN diagnostics for the moment.  That seemed like the next obvious thing to look at.  But thanks for the pointer to WANem, I&#39;ll look into that!","body":"64 bytes pings are only taking 4ms to be ack-ed, so that&#39;s not so bad.  No BLOBs, but a lot of INSERT activity.  No connection pooling, it&#39;s a single connection.  Staffing is a little light for the holidays, so I can&#39;t get into deep WAN diagnostics for the moment.  That seemed like the next obvious thing to look at.  But thanks for the pointer to WANem, I&#39;ll look into that!"},{"owner":{"account_id":191,"reputation":24539,"user_id":235,"display_name":"Joshua McKinnon"},"score":1,"creation_date":1261594142,"post_id":1954436,"comment_id":1866585,"body_markdown":"If it&#39;s only 4ms, I&#39;m going to say you&#39;re right in that latency should play a very minimal role.","body":"If it&#39;s only 4ms, I&#39;m going to say you&#39;re right in that latency should play a very minimal role."}],"tags":[],"owner":{"account_id":191,"reputation":24539,"user_id":235,"display_name":"Joshua McKinnon"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1261591984,"creation_date":1261591984,"answer_id":1954436,"question_id":1954279,"body_markdown":"In my experience, high latency harms performance using the Oracle JDBC drivers far more than low bandwidth. (at least in the application I work on). You say you aren&#39;t worried about latency, but could you give an estimate on the latency of your low-bandwidth environment?\r\n\r\nHow big is the data you&#39;re sending? Are there BLOB columns? Are there other technologies involved, like a connection pool, or Hibernate? There are a lot of potential factors, not just if your data is being compressed.\r\n\r\nHave you done any WAN emulation to try to isolate what is degrading your performance most? \r\n[WANem][1] is pretty easy to setup.\r\n\r\nI&#39;ve spent weeks on this problem, and 100-200ms latency hurt us much more than a 1Mbit bandwidth limitation. Hopefully you are in a different boat - compression an easier problem to solve.\r\n\r\n\r\n  [1]: http://wanem.sourceforge.net/","title":"Oracle connection compression?","body":"<p>In my experience, high latency harms performance using the Oracle JDBC drivers far more than low bandwidth. (at least in the application I work on). You say you aren't worried about latency, but could you give an estimate on the latency of your low-bandwidth environment?</p>\n\n<p>How big is the data you're sending? Are there BLOB columns? Are there other technologies involved, like a connection pool, or Hibernate? There are a lot of potential factors, not just if your data is being compressed.</p>\n\n<p>Have you done any WAN emulation to try to isolate what is degrading your performance most? \n<a href=\"http://wanem.sourceforge.net/\" rel=\"noreferrer\">WANem</a> is pretty easy to setup.</p>\n\n<p>I've spent weeks on this problem, and 100-200ms latency hurt us much more than a 1Mbit bandwidth limitation. Hopefully you are in a different boat - compression an easier problem to solve.</p>\n"},{"comments":[{"owner":{"account_id":108117,"reputation":9982,"user_id":287138,"accept_rate":82,"display_name":"Stefan Haberl"},"score":0,"creation_date":1413392801,"post_id":1958652,"comment_id":41429957,"body_markdown":"Using compression with SSH tunnels with JDBC can reduce latency","body":"Using compression with SSH tunnels with JDBC can reduce latency"}],"tags":[],"owner":{"account_id":4454,"reputation":7238,"user_id":6703,"accept_rate":100,"display_name":"Adam Hawkes"},"comment_count":1,"down_vote_count":1,"up_vote_count":6,"is_accepted":true,"score":5,"last_activity_date":1261667383,"creation_date":1261667383,"answer_id":1958652,"question_id":1954279,"body_markdown":"To directly answer the question, the drivers (thin or OCI) have no such mechanism for compression. And since the data sent is likely in some funky binary format I&#39;m not sure that it will compress well over SSL. Some other mechanism for improving network performance will need to be employed.","title":"Oracle connection compression?","body":"<p>To directly answer the question, the drivers (thin or OCI) have no such mechanism for compression. And since the data sent is likely in some funky binary format I'm not sure that it will compress well over SSL. Some other mechanism for improving network performance will need to be employed.</p>\n"},{"tags":[],"owner":{"account_id":5785479,"reputation":154,"user_id":5941222,"display_name":"Itagyba Abondanza Kuhlmann"},"comment_count":0,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1520870254,"creation_date":1520870254,"answer_id":49239521,"question_id":1954279,"body_markdown":"Just an Update.\r\n\r\nOracle JDBC connections in 12.2 now have compression feature as disclaimed in this post: http://www.oracle.com/technetwork/topics/jdbc-faq-090281.html#0000_00","title":"Oracle connection compression?","body":"<p>Just an Update.</p>\n\n<p>Oracle JDBC connections in 12.2 now have compression feature as disclaimed in this post: <a href=\"http://www.oracle.com/technetwork/topics/jdbc-faq-090281.html#0000_00\" rel=\"nofollow noreferrer\">http://www.oracle.com/technetwork/topics/jdbc-faq-090281.html#0000_00</a></p>\n"},{"tags":[],"owner":{"account_id":5534918,"reputation":1308,"user_id":4393594,"display_name":"Nirmala"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1531428274,"creation_date":1522155211,"answer_id":49513418,"question_id":1954279,"body_markdown":"Refer to [Oracle JDBC Developer&#39;s guide][1] for enabling the network compression. Note that this is an Oracle12c Release 2 feature. \r\n\r\n\r\n  [1]: https://docs.oracle.com/en/database/oracle/oracle-database/12.2/jjdbc/data-sources-and-URLs.html#GUID-6D8EFA50-AB0F-4A2B-88A0-45B4A67C361E","title":"Oracle connection compression?","body":"<p>Refer to <a href=\"https://docs.oracle.com/en/database/oracle/oracle-database/12.2/jjdbc/data-sources-and-URLs.html#GUID-6D8EFA50-AB0F-4A2B-88A0-45B4A67C361E\" rel=\"nofollow noreferrer\">Oracle JDBC Developer's guide</a> for enabling the network compression. Note that this is an Oracle12c Release 2 feature. </p>\n"},{"tags":[],"owner":{"account_id":400023,"reputation":1753,"user_id":765762,"display_name":"Rajeev Sreedharan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1616652652,"creation_date":1616652652,"answer_id":66793996,"question_id":1954279,"body_markdown":"Since the question and answers are out of date or links broken, adding method to enable connection compression.\r\n\r\n**Database server side:**\r\n\r\nCheck with your DBA to configure file : $DB_HOME\\NETWORK\\ADMIN\\sqlnet.ora\r\n\r\nAdd below lines : \r\n\r\n    SQLNET.COMPRESSION=on\r\n    SQLNET.COMPRESSION_THRESHOLD=1024\r\n    SQLNET.COMPRESSION_LEVELS=(high)\r\n\r\nThe default value of `SQLNET.COMPRESSION_LEVELS` at server is `(low)`. This can work fine if using OCI driver, but if using the generally recommended *thin* driver, it needs to be specifically configured to `(high)`.\r\n\r\n**Client side Java code:**\r\n \r\n\r\n    DriverManager.registerDriver(new oracle.jdbc.OracleDriver());\r\n    OracleDataSource ds = new OracleDataSource();\r\n    \r\n    Properties prop = new Properties();\r\n    prop.setProperty(&quot;user&quot;, &quot;myuser&quot;);\r\n    prop.setProperty(&quot;password&quot;, &quot;mypassword&quot;);\r\n    prop.setProperty(&quot;oracle.net.networkCompression&quot;, &quot;on&quot;); \r\n    prop.setProperty(&quot;oracle.net.networkCompressionThreshold&quot;, &quot;1024&quot;);\r\n    \r\n    ds.setConnectionProperties(prop);\r\n    ds.setURL(&quot;jdbc:oracle:thin:@&lt;HOSTNAME&gt;:&lt;PORT&gt;/&lt;SERVICENAME&gt;&quot;);\r\n    \r\n    Connection conn = ds.getConnection();\r\n    \r\nNote that, if you enable compression high, the CPU usage can increase on both client and particularly on database server. Unless the network latency is really an issue, this is a choice you need to make.","title":"Oracle connection compression?","body":"<p>Since the question and answers are out of date or links broken, adding method to enable connection compression.</p>\n<p><strong>Database server side:</strong></p>\n<p>Check with your DBA to configure file : $DB_HOME\\NETWORK\\ADMIN\\sqlnet.ora</p>\n<p>Add below lines :</p>\n<pre><code>SQLNET.COMPRESSION=on\nSQLNET.COMPRESSION_THRESHOLD=1024\nSQLNET.COMPRESSION_LEVELS=(high)\n</code></pre>\n<p>The default value of <code>SQLNET.COMPRESSION_LEVELS</code> at server is <code>(low)</code>. This can work fine if using OCI driver, but if using the generally recommended <em>thin</em> driver, it needs to be specifically configured to <code>(high)</code>.</p>\n<p><strong>Client side Java code:</strong></p>\n<pre><code>DriverManager.registerDriver(new oracle.jdbc.OracleDriver());\nOracleDataSource ds = new OracleDataSource();\n\nProperties prop = new Properties();\nprop.setProperty(&quot;user&quot;, &quot;myuser&quot;);\nprop.setProperty(&quot;password&quot;, &quot;mypassword&quot;);\nprop.setProperty(&quot;oracle.net.networkCompression&quot;, &quot;on&quot;); \nprop.setProperty(&quot;oracle.net.networkCompressionThreshold&quot;, &quot;1024&quot;);\n\nds.setConnectionProperties(prop);\nds.setURL(&quot;jdbc:oracle:thin:@&lt;HOSTNAME&gt;:&lt;PORT&gt;/&lt;SERVICENAME&gt;&quot;);\n\nConnection conn = ds.getConnection();\n</code></pre>\n<p>Note that, if you enable compression high, the CPU usage can increase on both client and particularly on database server. Unless the network latency is really an issue, this is a choice you need to make.</p>\n"},{"tags":[],"owner":{"account_id":27817506,"reputation":1,"user_id":21238585,"display_name":"Denis"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677049526,"creation_date":1676707051,"answer_id":75491960,"question_id":1954279,"body_markdown":"This JDBC connect string syntax is acceptable and seems to work:\r\n\r\n    jdbc:oracle:thin:@(description=(COMPRESSION=on)(COMPRESSION_LEVELS=(LEVEL=high))(address=(host=host1)(protocol=tcp)(port=1521)) (connect_data=(SERVICE_NAME=SERV1)(SERVER = DEDICATED)))","title":"Oracle connection compression?","body":"<p>This JDBC connect string syntax is acceptable and seems to work:</p>\n<pre><code>jdbc:oracle:thin:@(description=(COMPRESSION=on)(COMPRESSION_LEVELS=(LEVEL=high))(address=(host=host1)(protocol=tcp)(port=1521)) (connect_data=(SERVICE_NAME=SERV1)(SERVER = DEDICATED)))\n</code></pre>\n"}],"owner":{"account_id":2478,"reputation":1384,"user_id":3449,"display_name":"joev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9186,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":1958652,"answer_count":7,"score":10,"last_activity_date":1677049526,"creation_date":1261590256,"question_id":1954279,"body_markdown":"I have an application that uses JDBC to connect to Oracle 11g.  Unfortunately, the machine my app is running on and the Oracle machine are connected via a somewhat low bandwidth connection.  I haven&#39;t sniffed the connection, but I am pretty sure the data streaming across the connection is not compressed.  For my application, I&#39;m more concerned about bandwidth than latency.\r\n\r\nIs there any way to tell the JDBC driver and Oracle to compress the data going through the connection?  Google comes up with a lot of answers for data file compression, but I couldn&#39;t find anything about network protocol compression.\r\n\r\nI&#39;m using Oracle&#39;s thin driver, but if this is only supported by the OCI driver, I could switch to that.  Thanks for any suggestions!","title":"Oracle connection compression?","body":"<p>I have an application that uses JDBC to connect to Oracle 11g.  Unfortunately, the machine my app is running on and the Oracle machine are connected via a somewhat low bandwidth connection.  I haven't sniffed the connection, but I am pretty sure the data streaming across the connection is not compressed.  For my application, I'm more concerned about bandwidth than latency.</p>\n\n<p>Is there any way to tell the JDBC driver and Oracle to compress the data going through the connection?  Google comes up with a lot of answers for data file compression, but I couldn't find anything about network protocol compression.</p>\n\n<p>I'm using Oracle's thin driver, but if this is only supported by the OCI driver, I could switch to that.  Thanks for any suggestions!</p>\n"},{"tags":["java","debugging","ide","remote-debugging","sublimetext"],"answers":[{"comments":[{"owner":{"account_id":7754452,"reputation":1204,"user_id":5869325,"display_name":"aydinugur"},"score":0,"creation_date":1629277174,"post_id":12092999,"comment_id":121641623,"body_markdown":"The link is broken now.","body":"The link is broken now."}],"tags":[],"owner":{"account_id":1479560,"reputation":181,"user_id":1389242,"display_name":"allotria"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1345729310,"creation_date":1345729310,"answer_id":12092999,"question_id":10227530,"body_markdown":"You could look for a standalone Java Debugger like [JDebugTool][1].\r\n\r\nOr you could simply create an additional Eclipse workspace with only the bare minimal you need for remote debugging your application (just one project with all the source jars linked in).\r\nThis workspace will start considerably faster than the full blown.\r\n\r\nI have never worked with a standalone debugger for Java and personally I tend to keep the number of tools I have to learn as low as possible and Eclipse&#39;s debugger is pretty good.\r\n\r\n\r\n  [1]: http://www.debugtools.com/","title":"How to debug Java application from Sublime Text editor","body":"<p>You could look for a standalone Java Debugger like <a href=\"http://www.debugtools.com/\" rel=\"nofollow\">JDebugTool</a>.</p>\n\n<p>Or you could simply create an additional Eclipse workspace with only the bare minimal you need for remote debugging your application (just one project with all the source jars linked in).\nThis workspace will start considerably faster than the full blown.</p>\n\n<p>I have never worked with a standalone debugger for Java and personally I tend to keep the number of tools I have to learn as low as possible and Eclipse's debugger is pretty good.</p>\n"},{"tags":[],"owner":{"account_id":27037029,"reputation":1,"user_id":20592479,"display_name":"asim_ar007"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677049451,"creation_date":1676657240,"answer_id":75487851,"question_id":10227530,"body_markdown":"JDebug - A Java Debugging plugin for Sublime Text\r\nDebugging is a painful art. The programmers(coders) know about it. Even perfectly written code may misbehave sometimes and it is difficult to identify the piece of code causing the issue just by log statements. So the only possible way to identify the issue is to do step by step debugging of the code dynamically. There are so many debugging tools available for Java, some are standalone and few are integrated within the IDE like Eclipse. In this article, I will show you how to debug java codes remotely using JDebug in Sublime Text.\r\n\r\nSetting up Sublime Text JDebug plugin can be installed using Package Control or manually. I will show you how to install JDebug plugin using Package Control. If you haven’t install the Package Control, you can install packages by installing package control.\r\nOnce you have the package control installed, you should start Sublime Text. Open up the command palette from the Preferences --&gt; Package Control menu and search for “Install Package”.\r\n\r\n\r\n\r\nNow you can search for any package you like. In our case, we are going to search for the package “JDebug”.\r\n\r\n\r\n\r\nSetting up App Server (Weblogic/Tomcat/any other) in debug mode\r\nPass -Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=8000 as JVM argument to server startup command. You can change the debug port from 8000 to anything you prefer.\r\nTomcat\r\nAdd/update the JAVA_OPTS env variable in catalina.bat or catalina.sh set `JAVA_OPTS=%JAVA_OPTS% -Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=8000`\r\nWeblogic\r\nAdd/update the SAVE_JAVA_OPTIONS env variable in catalina.bat or catalina.sh set `SAVE_JAVA_OPTIONS=%JAVA_OPTIONS% -Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=8000`\r\n\r\nSetting up JDebug Setting up JDebug is very simple as it has only few settings to start with. You can copy and paste the default settings into user settings and update the following settings based on your environment.\r\n\r\n\r\nworkingdir -     You need to set your current project directory like c:/worksapce/TestService (Windows) or /home/user/abc/workspace/TestService (Linux or Ubuntu)\r\ncommandline -     Set the jdb command with arguments. If JDK/bin is not in your environment PATH then you need to specify full path to the jdb command. Also change the hostname and port in which the java application service is running and listening.\r\nsourcepath -     The path to the source file with in the project. For ant project it usually /src/ and for maven usually /src/main/java.\r\n\r\n\r\n\r\nBreakpoints Ready to set the breakpoint?. Breakpoints are the way to inform the jvm to halt the execution at a particular point (line number or method in a class). When the execution halts, the application variables can be inspected.\r\nAdd a breakpoint using &#39;Toggle Breakpoint&#39; menu option from context menu. Context menu can be accessible using right click. A circle icon will be placed on the line number gutter when a breakpoint is added\r\n\r\n\r\n\r\nWhen the jvm hits the breakpoint during the execution, the gutter icon will be changed to &#39;pointer&#39; to indicate that the breakpoint is hit.\r\n\r\n\r\nInspect Variables\r\nVariables &amp; expressions can be inspected using inline popup. Click on the variable or highlight the expression to evaluate/inspect inline.\r\n\r\n\r\n\r\n\r\nWatch Expressions Expressions can be evaluated using the &#39;Add Expression&#39; context menu. You can enter any valid expression to evaluate.\r\n\r\n\r\nEnter the Expression\r\n\r\n\r\nJDebug Variables It is interesting to watch the variables in the &#39;JDebug Variables&#39; window. If a variable is complex object it will be displayed with &#39;+&#39; icon on gutter. These variables can be expanded further to get the additional details using &#39;Expand&#39; context menu. The &#39;Expand&#39; context menu will be enabled only in &#39;JDebug&#39; variables window.\r\n\r\n\r\n\r\nHow to Continue?\r\nThe application execution can be continued using one of the following menu options\r\nStep Over Continue execution to next line\r\nStep Into Continue the execution into a method call\r\nStep Out Step out of the current method and continue\r\nContinue Continue to next breakpoint or till completion\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/HS0x6.png","title":"How to debug Java application from Sublime Text editor","body":"<p>JDebug - A Java Debugging plugin for Sublime Text\nDebugging is a painful art. The programmers(coders) know about it. Even perfectly written code may misbehave sometimes and it is difficult to identify the piece of code causing the issue just by log statements. So the only possible way to identify the issue is to do step by step debugging of the code dynamically. There are so many debugging tools available for Java, some are standalone and few are integrated within the IDE like Eclipse. In this article, I will show you how to debug java codes remotely using JDebug in Sublime Text.</p>\n<p>Setting up Sublime Text JDebug plugin can be installed using Package Control or manually. I will show you how to install JDebug plugin using Package Control. If you haven’t install the Package Control, you can install packages by installing package control.\nOnce you have the package control installed, you should start Sublime Text. Open up the command palette from the Preferences --&gt; Package Control menu and search for “Install Package”.</p>\n<p>Now you can search for any package you like. In our case, we are going to search for the package “JDebug”.</p>\n<p>Setting up App Server (Weblogic/Tomcat/any other) in debug mode\nPass -Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=8000 as JVM argument to server startup command. You can change the debug port from 8000 to anything you prefer.\nTomcat\nAdd/update the JAVA_OPTS env variable in catalina.bat or catalina.sh set <code>JAVA_OPTS=%JAVA_OPTS% -Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=8000</code>\nWeblogic\nAdd/update the SAVE_JAVA_OPTIONS env variable in catalina.bat or catalina.sh set <code>SAVE_JAVA_OPTIONS=%JAVA_OPTIONS% -Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=8000</code></p>\n<p>Setting up JDebug Setting up JDebug is very simple as it has only few settings to start with. You can copy and paste the default settings into user settings and update the following settings based on your environment.</p>\n<p>workingdir -     You need to set your current project directory like c:/worksapce/TestService (Windows) or /home/user/abc/workspace/TestService (Linux or Ubuntu)\ncommandline -     Set the jdb command with arguments. If JDK/bin is not in your environment PATH then you need to specify full path to the jdb command. Also change the hostname and port in which the java application service is running and listening.\nsourcepath -     The path to the source file with in the project. For ant project it usually /src/ and for maven usually /src/main/java.</p>\n<p>Breakpoints Ready to set the breakpoint?. Breakpoints are the way to inform the jvm to halt the execution at a particular point (line number or method in a class). When the execution halts, the application variables can be inspected.\nAdd a breakpoint using 'Toggle Breakpoint' menu option from context menu. Context menu can be accessible using right click. A circle icon will be placed on the line number gutter when a breakpoint is added</p>\n<p>When the jvm hits the breakpoint during the execution, the gutter icon will be changed to 'pointer' to indicate that the breakpoint is hit.</p>\n<p>Inspect Variables\nVariables &amp; expressions can be inspected using inline popup. Click on the variable or highlight the expression to evaluate/inspect inline.</p>\n<p>Watch Expressions Expressions can be evaluated using the 'Add Expression' context menu. You can enter any valid expression to evaluate.</p>\n<p>Enter the Expression</p>\n<p>JDebug Variables It is interesting to watch the variables in the 'JDebug Variables' window. If a variable is complex object it will be displayed with '+' icon on gutter. These variables can be expanded further to get the additional details using 'Expand' context menu. The 'Expand' context menu will be enabled only in 'JDebug' variables window.</p>\n<p>How to Continue?\nThe application execution can be continued using one of the following menu options\nStep Over Continue execution to next line\nStep Into Continue the execution into a method call\nStep Out Step out of the current method and continue\nContinue Continue to next breakpoint or till completion\n<a href=\"https://i.stack.imgur.com/HS0x6.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"}],"owner":{"account_id":15908,"reputation":22122,"user_id":34102,"accept_rate":86,"display_name":"Piotr Kochański"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10771,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":12092999,"answer_count":2,"score":8,"last_activity_date":1677049451,"creation_date":1334836643,"question_id":10227530,"body_markdown":"Sometimes I am doing simple fixes for rather huge Java application and I don&#39;t want to open Eclipse for this task. Eclipse starts long and since the project is build out of large number of subprojects, which are build anyway by Maven, it takes ages before Eclipse is usable (at least ages in impatient Java developer scale).\r\n\r\nAlmost everything I need can be done in Sublime Text editor, however one place where Eclipse shines is debugger. My workflow is: make a fix, then test it running application (on server) using debugger, to check if everything is ok.\r\n\r\nSo is there any Sublime plugin, or other non-IDE solution for easy debugging of Java application.\r\n\r\nNote: I have seen [this post](https://stackoverflow.com/questions/545056/how-to-debug-java-application-using-vim-gvim) - its pretty old, maybe there is something better.","title":"How to debug Java application from Sublime Text editor","body":"<p>Sometimes I am doing simple fixes for rather huge Java application and I don't want to open Eclipse for this task. Eclipse starts long and since the project is build out of large number of subprojects, which are build anyway by Maven, it takes ages before Eclipse is usable (at least ages in impatient Java developer scale).</p>\n\n<p>Almost everything I need can be done in Sublime Text editor, however one place where Eclipse shines is debugger. My workflow is: make a fix, then test it running application (on server) using debugger, to check if everything is ok.</p>\n\n<p>So is there any Sublime plugin, or other non-IDE solution for easy debugging of Java application.</p>\n\n<p>Note: I have seen <a href=\"https://stackoverflow.com/questions/545056/how-to-debug-java-application-using-vim-gvim\">this post</a> - its pretty old, maybe there is something better.</p>\n"},{"tags":["java","arraylist","design-patterns","iterator","concurrentmodificationexception"],"comments":[{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1677038778,"post_id":75528137,"comment_id":133256849,"body_markdown":"You only want to add the product to the list after checking _all_ of the items for duplicates, not after checking _each_ item.","body":"You only want to add the product to the list after checking <i>all</i> of the items for duplicates, not after checking <i>each</i> item."},{"owner":{"account_id":2277794,"reputation":1044,"user_id":2003642,"accept_rate":75,"display_name":"Bhavik Patel"},"score":0,"creation_date":1677042030,"post_id":75528137,"comment_id":133257239,"body_markdown":"the `exception` says it all. Try to understand the error. You should get your answer, if not, read previous comment from @TimMoore , that implementation will solve it.","body":"the <code>exception</code> says it all. Try to understand the error. You should get your answer, if not, read previous comment from @TimMoore , that implementation will solve it."}],"answers":[{"tags":[],"owner":{"account_id":2277794,"reputation":1044,"user_id":2003642,"accept_rate":75,"display_name":"Bhavik Patel"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677042496,"creation_date":1677042496,"answer_id":75528490,"question_id":75528137,"body_markdown":"&quot;Add the product after checking all of the items, not after checking each item&quot;.\r\n\r\nThe ConcurrentModificationException occurs when an object is tried to be modified concurrently when it is not permissible. This exception usually comes when one is working with Java Collection classes.\r\n\r\nJust modifying part of the code.\r\n\r\n```\r\n /**\r\n * 0 = does not\r\n * 1 = is in the list\r\n * 2 = same name\r\n * */\r\nint productExistsStatus = 0;\r\nfor (Product product1: productListArray) {\r\n    if (product1.getProductId() == product.getProductId()) {\r\n        System.out.println(&quot; the product is already in the list&quot;);\r\n        productExistsStatus = 1;\r\n        break;\r\n    } else if (product1.getProductName().equals(product.getProductName())) {\r\n        System.out.println(&quot;choose another name for product&quot;);\r\n        productExistsStatus = 2;\r\n        break;\r\n    }\r\n}\r\nif (productExistsStatus == 0) {\r\n    productListArray.add(product);\r\n}\r\n```","title":"I have productListArray and I would like to add product into it but each product has unique ID and unique name and I am getting some errors","body":"<p>&quot;Add the product after checking all of the items, not after checking each item&quot;.</p>\n<p>The ConcurrentModificationException occurs when an object is tried to be modified concurrently when it is not permissible. This exception usually comes when one is working with Java Collection classes.</p>\n<p>Just modifying part of the code.</p>\n<pre><code> /**\n * 0 = does not\n * 1 = is in the list\n * 2 = same name\n * */\nint productExistsStatus = 0;\nfor (Product product1: productListArray) {\n    if (product1.getProductId() == product.getProductId()) {\n        System.out.println(&quot; the product is already in the list&quot;);\n        productExistsStatus = 1;\n        break;\n    } else if (product1.getProductName().equals(product.getProductName())) {\n        System.out.println(&quot;choose another name for product&quot;);\n        productExistsStatus = 2;\n        break;\n    }\n}\nif (productExistsStatus == 0) {\n    productListArray.add(product);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677048503,"creation_date":1677048503,"answer_id":75529117,"question_id":75528137,"body_markdown":"From the code in your question:\r\n```java\r\nprivate ArrayList&lt;Product&gt; productListArray = new ArrayList&lt;&gt;();\r\n```\r\nIt is recommended to [code to the interface](https://stackoverflow.com/questions/2697783/what-does-program-to-interfaces-not-implementations-mean) and not to the implementation. Hence that line should be:\r\n```java\r\nprivate java.util.List&lt;Product&gt; productListArray = new ArrayList&lt;&gt;();\r\n```\r\nYou didn&#39;t post the code for class `Product`. In the below code, I added it as a [record](https://docs.oracle.com/en/java/javase/14/language/records.html).\r\n\r\nI don&#39;t understand the need to make class `ProductList` a singleton but since it is, note the different ways to write a [thread-safe singleton](https://stackoverflow.com/questions/11165852/java-singleton-and-synchronization) class.\r\n\r\nI also don&#39;t understand why class `ProductList` implements interface [Iterator](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Iterator.html). The implementation is wrong and you don&#39;t use it anyway, so I just removed it in the below code.\r\n\r\nWhen you ask for help in finding out why your code is throwing an [exception](https://docs.oracle.com/javase/tutorial/essential/exceptions/index.html) it is usually a good idea to post the stack trace of that exception.\r\n\r\nYour actual problem is that you are trying to [modify `productListArray` while you are iterating over it](https://stackoverflow.com/questions/20639098/in-java-can-you-modify-a-list-while-iterating-through-it). Note that the same problem exists in method `remove`.\r\n\r\nIn the below code I also added a `main` method so that you can copy the code and run it.\r\n```java\r\nimport java.util.ArrayList;\r\nimport java.util.Iterator;\r\nimport java.util.List;\r\nimport java.util.ListIterator;\r\n\r\npublic class ProductList {\r\n\r\n    private List&lt;Product&gt; productListArray = new ArrayList&lt;&gt;();\r\n\r\n    /* Singleton Design begin */\r\n    private static ProductList productListSingleton = new ProductList();\r\n\r\n    private ProductList() {\r\n\r\n    }// end of private constructor\r\n\r\n    public static ProductList instance() {\r\n        return productListSingleton;\r\n    }\r\n\r\n    /* Singleton Design Phase end */\r\n    /*\r\n     * method add product into list\r\n     * \r\n     * @param Product Type\r\n     */\r\n    public void addProduct(Product product) {\r\n// if the list is  empty just add the product into the list\r\n        if (productListArray.isEmpty()) {\r\n            productListArray.add(product);\r\n        }\r\n        /*\r\n         * add product only if the id and name not existed in the productList\r\n         */\r\n        else {\r\n            boolean canAdd = true;\r\n            for (Product product1 : productListArray) {\r\n                if (product1.productId() == product.productId()) {\r\n                    System.out.println(&quot; the product is already in the list&quot;);\r\n                    canAdd = false;\r\n                    break;\r\n                }\r\n                if (product1.productName().equals(product.productName())) {\r\n                    System.out.println(&quot;choose another name for product&quot;);\r\n                    canAdd = false;\r\n                    break;\r\n                }\r\n            }\r\n            if (canAdd) {\r\n                productListArray.add(product);\r\n            }\r\n        }\r\n    } // end of addProductMethod\r\n\r\n    /*\r\n     * remove the product from the ProductList Parameter product id\r\n     */\r\n    public void remove(int productId) {\r\n        ListIterator&lt;Product&gt; iteratorList = productListArray.listIterator();\r\n        while (iteratorList.hasNext()) {\r\n            Product product = iteratorList.next();\r\n            if (product.productId() == productId)\r\n                iteratorList.remove();\r\n        } // end of while\r\n    } // end of remove method\r\n\r\n    /* retrieve the productlist */\r\n    public void retrieve() {\r\n        Iterator&lt;Product&gt; iteratorList = productListArray.iterator();\r\n        while (iteratorList.hasNext()) {\r\n            System.out.println(iteratorList.next());\r\n        }\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        ProductList pl = ProductList.instance();\r\n        pl.addProduct(new Product(1, &quot;First&quot;));\r\n        pl.retrieve();\r\n        System.out.println(&quot;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~&quot;);\r\n        pl.addProduct(new Product(1, &quot;Second&quot;));\r\n        pl.retrieve();\r\n        System.out.println(&quot;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~&quot;);\r\n        pl.addProduct(new Product(2, &quot;First&quot;));\r\n        pl.retrieve();\r\n        System.out.println(&quot;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~&quot;);\r\n        pl.addProduct(new Product(2, &quot;Second&quot;));\r\n        pl.retrieve();\r\n        System.out.println(&quot;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~&quot;);\r\n        pl.remove(1);\r\n        pl.retrieve();\r\n    }\r\n}\r\n```\r\nHere is the output I get when I run the above code.\r\n```none\r\nProduct[productId=1, productName=First]\r\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n the product is already in the list\r\nProduct[productId=1, productName=First]\r\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\nchoose another name for product\r\nProduct[productId=1, productName=First]\r\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\nProduct[productId=1, productName=First]\r\nProduct[productId=2, productName=Second]\r\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\nProduct[productId=2, productName=Second]\r\n```\r\n","title":"I have productListArray and I would like to add product into it but each product has unique ID and unique name and I am getting some errors","body":"<p>From the code in your question:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private ArrayList&lt;Product&gt; productListArray = new ArrayList&lt;&gt;();\n</code></pre>\n<p>It is recommended to <a href=\"https://stackoverflow.com/questions/2697783/what-does-program-to-interfaces-not-implementations-mean\">code to the interface</a> and not to the implementation. Hence that line should be:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private java.util.List&lt;Product&gt; productListArray = new ArrayList&lt;&gt;();\n</code></pre>\n<p>You didn't post the code for class <code>Product</code>. In the below code, I added it as a <a href=\"https://docs.oracle.com/en/java/javase/14/language/records.html\" rel=\"nofollow noreferrer\">record</a>.</p>\n<p>I don't understand the need to make class <code>ProductList</code> a singleton but since it is, note the different ways to write a <a href=\"https://stackoverflow.com/questions/11165852/java-singleton-and-synchronization\">thread-safe singleton</a> class.</p>\n<p>I also don't understand why class <code>ProductList</code> implements interface <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Iterator.html\" rel=\"nofollow noreferrer\">Iterator</a>. The implementation is wrong and you don't use it anyway, so I just removed it in the below code.</p>\n<p>When you ask for help in finding out why your code is throwing an <a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/index.html\" rel=\"nofollow noreferrer\">exception</a> it is usually a good idea to post the stack trace of that exception.</p>\n<p>Your actual problem is that you are trying to <a href=\"https://stackoverflow.com/questions/20639098/in-java-can-you-modify-a-list-while-iterating-through-it\">modify <code>productListArray</code> while you are iterating over it</a>. Note that the same problem exists in method <code>remove</code>.</p>\n<p>In the below code I also added a <code>main</code> method so that you can copy the code and run it.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.ArrayList;\nimport java.util.Iterator;\nimport java.util.List;\nimport java.util.ListIterator;\n\npublic class ProductList {\n\n    private List&lt;Product&gt; productListArray = new ArrayList&lt;&gt;();\n\n    /* Singleton Design begin */\n    private static ProductList productListSingleton = new ProductList();\n\n    private ProductList() {\n\n    }// end of private constructor\n\n    public static ProductList instance() {\n        return productListSingleton;\n    }\n\n    /* Singleton Design Phase end */\n    /*\n     * method add product into list\n     * \n     * @param Product Type\n     */\n    public void addProduct(Product product) {\n// if the list is  empty just add the product into the list\n        if (productListArray.isEmpty()) {\n            productListArray.add(product);\n        }\n        /*\n         * add product only if the id and name not existed in the productList\n         */\n        else {\n            boolean canAdd = true;\n            for (Product product1 : productListArray) {\n                if (product1.productId() == product.productId()) {\n                    System.out.println(&quot; the product is already in the list&quot;);\n                    canAdd = false;\n                    break;\n                }\n                if (product1.productName().equals(product.productName())) {\n                    System.out.println(&quot;choose another name for product&quot;);\n                    canAdd = false;\n                    break;\n                }\n            }\n            if (canAdd) {\n                productListArray.add(product);\n            }\n        }\n    } // end of addProductMethod\n\n    /*\n     * remove the product from the ProductList Parameter product id\n     */\n    public void remove(int productId) {\n        ListIterator&lt;Product&gt; iteratorList = productListArray.listIterator();\n        while (iteratorList.hasNext()) {\n            Product product = iteratorList.next();\n            if (product.productId() == productId)\n                iteratorList.remove();\n        } // end of while\n    } // end of remove method\n\n    /* retrieve the productlist */\n    public void retrieve() {\n        Iterator&lt;Product&gt; iteratorList = productListArray.iterator();\n        while (iteratorList.hasNext()) {\n            System.out.println(iteratorList.next());\n        }\n    }\n\n    public static void main(String[] args) {\n        ProductList pl = ProductList.instance();\n        pl.addProduct(new Product(1, &quot;First&quot;));\n        pl.retrieve();\n        System.out.println(&quot;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~&quot;);\n        pl.addProduct(new Product(1, &quot;Second&quot;));\n        pl.retrieve();\n        System.out.println(&quot;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~&quot;);\n        pl.addProduct(new Product(2, &quot;First&quot;));\n        pl.retrieve();\n        System.out.println(&quot;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~&quot;);\n        pl.addProduct(new Product(2, &quot;Second&quot;));\n        pl.retrieve();\n        System.out.println(&quot;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~&quot;);\n        pl.remove(1);\n        pl.retrieve();\n    }\n}\n</code></pre>\n<p>Here is the output I get when I run the above code.</p>\n<pre class=\"lang-none prettyprint-override\"><code>Product[productId=1, productName=First]\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n the product is already in the list\nProduct[productId=1, productName=First]\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nchoose another name for product\nProduct[productId=1, productName=First]\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nProduct[productId=1, productName=First]\nProduct[productId=2, productName=Second]\n~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\nProduct[productId=2, productName=Second]\n</code></pre>\n"}],"owner":{"account_id":18423286,"reputation":41,"user_id":13420334,"display_name":"Abshir M"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75529117,"answer_count":2,"score":0,"last_activity_date":1677048503,"creation_date":1677038308,"question_id":75528137,"body_markdown":"before I added the product to the non-empty list, I tried to validate  if the product id and name of the product already existed in the list by going through the list and if there is no such id and name in the list then added the product to the list, but, I got this  error #ConcurrentModificationException\r\n\r\n-thanks for advance\r\n\r\n```java\r\nimport java.util.ArrayList;\r\nimport java.util.Iterator;\r\n\r\npublic class ProductList implements Iterator&lt;Product&gt; {\r\n\r\n    private ArrayList&lt;Product&gt; productListArray = new ArrayList&lt;&gt;();\r\n\r\n    /* Singleton Design begin */\r\n    private static ProductList productListSingleton;\r\n\r\n    private ProductList() {\r\n\r\n    }// end of private constructor\r\n\r\n    public static ProductList instance() {\r\n        if (productListSingleton == null) {\r\n            productListSingleton = new ProductList();\r\n        }\r\n        return productListSingleton;\r\n    }\r\n\r\n    /* Singleton Design Phase end */\r\n    /*\r\n     * method add product into list\r\n     * \r\n     * @param Product Type\r\n     */\r\n    public void addProduct(Product product) {\r\n// if the list is  empty just add the product into the list\r\n        if (productListArray.isEmpty()) {\r\n            productListArray.add(product);\r\n        }\r\n        /*\r\n         * add product only if the id and name not existed in the productList\r\n         */\r\n        else {\r\n            for (Product product1 : productListArray) {\r\n                if (product1.getProductId() == product.getProductId()) {\r\n                    System.out.println(&quot; the product is already in the list&quot;);\r\n                }\r\n                else if (product1.getProductName().equals(product.getProductName())) {\r\n                    System.out.println(&quot;choose another name for product&quot;);\r\n                }\r\n                else {\r\n                    productListArray.add(product);\r\n                }\r\n            }\r\n        }\r\n    } // end of addProductMethod\r\n\r\n    /*\r\n     * remove the product from the ProductList Parameter product id\r\n     */\r\n    public void remove(int productId) {\r\n        Iterator&lt;Product&gt; iteratorList = productListArray.iterator();\r\n        while (iteratorList.hasNext()) {\r\n            Product product = iteratorList.next();\r\n            if (product.getProductId() == productId)\r\n                iteratorList.remove();\r\n        } // end of while\r\n    } // end of remove method\r\n\r\n    /* retrieve the productlist */\r\n    public void retrieve() {\r\n        Iterator&lt;Product&gt; iteratorList = productListArray.iterator();\r\n        while (iteratorList.hasNext()) {\r\n            System.out.println(iteratorList.next());\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public boolean hasNext() {\r\n        // TODO Auto-generated method stub\r\n        if (next() == null) {\r\n            return false;\r\n        }\r\n        else {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public Product next() {\r\n        // TODO Auto-generated method stub\r\n        return next();\r\n    }\r\n}\r\n```","title":"I have productListArray and I would like to add product into it but each product has unique ID and unique name and I am getting some errors","body":"<p>before I added the product to the non-empty list, I tried to validate  if the product id and name of the product already existed in the list by going through the list and if there is no such id and name in the list then added the product to the list, but, I got this  error #ConcurrentModificationException</p>\n<p>-thanks for advance</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.ArrayList;\nimport java.util.Iterator;\n\npublic class ProductList implements Iterator&lt;Product&gt; {\n\n    private ArrayList&lt;Product&gt; productListArray = new ArrayList&lt;&gt;();\n\n    /* Singleton Design begin */\n    private static ProductList productListSingleton;\n\n    private ProductList() {\n\n    }// end of private constructor\n\n    public static ProductList instance() {\n        if (productListSingleton == null) {\n            productListSingleton = new ProductList();\n        }\n        return productListSingleton;\n    }\n\n    /* Singleton Design Phase end */\n    /*\n     * method add product into list\n     * \n     * @param Product Type\n     */\n    public void addProduct(Product product) {\n// if the list is  empty just add the product into the list\n        if (productListArray.isEmpty()) {\n            productListArray.add(product);\n        }\n        /*\n         * add product only if the id and name not existed in the productList\n         */\n        else {\n            for (Product product1 : productListArray) {\n                if (product1.getProductId() == product.getProductId()) {\n                    System.out.println(&quot; the product is already in the list&quot;);\n                }\n                else if (product1.getProductName().equals(product.getProductName())) {\n                    System.out.println(&quot;choose another name for product&quot;);\n                }\n                else {\n                    productListArray.add(product);\n                }\n            }\n        }\n    } // end of addProductMethod\n\n    /*\n     * remove the product from the ProductList Parameter product id\n     */\n    public void remove(int productId) {\n        Iterator&lt;Product&gt; iteratorList = productListArray.iterator();\n        while (iteratorList.hasNext()) {\n            Product product = iteratorList.next();\n            if (product.getProductId() == productId)\n                iteratorList.remove();\n        } // end of while\n    } // end of remove method\n\n    /* retrieve the productlist */\n    public void retrieve() {\n        Iterator&lt;Product&gt; iteratorList = productListArray.iterator();\n        while (iteratorList.hasNext()) {\n            System.out.println(iteratorList.next());\n        }\n    }\n\n    @Override\n    public boolean hasNext() {\n        // TODO Auto-generated method stub\n        if (next() == null) {\n            return false;\n        }\n        else {\n            return true;\n        }\n    }\n\n    @Override\n    public Product next() {\n        // TODO Auto-generated method stub\n        return next();\n    }\n}\n</code></pre>\n"},{"tags":["java","performance","garbage-collection"],"comments":[{"owner":{"account_id":4458247,"reputation":423,"user_id":3627863,"accept_rate":100,"display_name":"Arunkumar Muthuvel"},"score":0,"creation_date":1677047628,"post_id":75529005,"comment_id":133258037,"body_markdown":"An exert from my garbage collection logs can be found https://pastebin.com/raw/Mhhb4Dj0","body":"An exert from my garbage collection logs can be found <a href=\"https://pastebin.com/raw/Mhhb4Dj0\" rel=\"nofollow noreferrer\">pastebin.com/raw/Mhhb4Dj0</a>"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":3,"creation_date":1677078189,"post_id":75529005,"comment_id":133266739,"body_markdown":"Start with removing all options you don’t understand.","body":"Start with removing all options you don’t understand."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1677095051,"post_id":75529005,"comment_id":133271972,"body_markdown":"@AnatolyG the string deduplication is only applied to strings which survive long enough to get to the old generation. That’s normally not a problem—unless someone messes around with the survivor rates or the size of the New generation, of course. That doesn’t preclude that some applications might run better without…","body":"@AnatolyG the string deduplication is only applied to strings which survive long enough to get to the old generation. That’s normally not a problem—unless someone messes around with the survivor rates or the size of the New generation, of course. That doesn’t preclude that some applications might run better without…"}],"owner":{"account_id":4458247,"reputation":423,"user_id":3627863,"accept_rate":100,"display_name":"Arunkumar Muthuvel"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677047606,"creation_date":1677047606,"question_id":75529005,"body_markdown":"I am currently running an application which requires a maximum heap size of 4GB in 8GB RAM.\r\n\r\nCurrently I use the following flags to handle garbage collection.\r\n\r\n&gt; NS_PARAMS=&quot;-Xms4096M -Xmx4096M -XX:+UseG1GC -XX:MaxGCPauseMillis=200 -XX:+DisableExplicitGC -verbose:gc  -Xloggc:../logs/gc.txt -XX:SurvivorRatio=12 -XX:+ScavengeBeforeFullGC -XX:+UseStringDeduplication -XX:+ParallelRefProcEnabled\t-XX:ConcGCThreads=4 -XX:ParallelGCThreads=16  -XX:+PrintGCDetails -XX:MetaspaceSize=700M -XX:MaxMetaspaceSize=700M -XX:+UseCompressedClassPointers -XX:+UseCompressedOops -XX:CompressedClassSpaceSize=128M -XX:NewSize=512M -XX:MaxNewSize=512M -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=$HEAP_DUMP_PATH -XX:InitiatingHeapOccupancyPercent=65&quot;\r\n\r\n\r\nG1 Old Generation Garbage Collection time is 55 sec in 1 minute.\r\n\r\n\r\n\r\nAny advice on what I should change in order to reduce these long pauses would be greatly appreciated.\r\n\r\n","title":"Long running GC in Application","body":"<p>I am currently running an application which requires a maximum heap size of 4GB in 8GB RAM.</p>\n<p>Currently I use the following flags to handle garbage collection.</p>\n<blockquote>\n<p>NS_PARAMS=&quot;-Xms4096M -Xmx4096M -XX:+UseG1GC -XX:MaxGCPauseMillis=200 -XX:+DisableExplicitGC -verbose:gc  -Xloggc:../logs/gc.txt -XX:SurvivorRatio=12 -XX:+ScavengeBeforeFullGC -XX:+UseStringDeduplication -XX:+ParallelRefProcEnabled    -XX:ConcGCThreads=4 -XX:ParallelGCThreads=16  -XX:+PrintGCDetails -XX:MetaspaceSize=700M -XX:MaxMetaspaceSize=700M -XX:+UseCompressedClassPointers -XX:+UseCompressedOops -XX:CompressedClassSpaceSize=128M -XX:NewSize=512M -XX:MaxNewSize=512M -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=$HEAP_DUMP_PATH -XX:InitiatingHeapOccupancyPercent=65&quot;</p>\n</blockquote>\n<p>G1 Old Generation Garbage Collection time is 55 sec in 1 minute.</p>\n<p>Any advice on what I should change in order to reduce these long pauses would be greatly appreciated.</p>\n"},{"tags":["java","jvm","corretto"],"comments":[{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1677047924,"post_id":75528883,"comment_id":133258088,"body_markdown":"Based on reading the duplicates, the class found &quot;first&quot; on the class-path is the one used. But in general, it seems to completely depend on the `ClassLoader` implementation being used. Some frameworks (e.g., Java EE/Jakarta EE containers) can do some pretty, let&#39;s say &quot;unorthodox&quot;, stuff with class loading.","body":"Based on reading the duplicates, the class found &quot;first&quot; on the class-path is the one used. But in general, it seems to completely depend on the <code>ClassLoader</code> implementation being used. Some frameworks (e.g., Java EE/Jakarta EE containers) can do some pretty, let&#39;s say &quot;unorthodox&quot;, stuff with class loading."}],"owner":{"account_id":9874390,"reputation":41,"user_id":10333309,"display_name":"Charan2628"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1677047409,"answer_count":0,"score":0,"last_activity_date":1677047536,"creation_date":1677046632,"question_id":75528883,"body_markdown":"We have one URLUtils class which is coming from one internal maven dependency jar (Jar A), and this URLUtils class is also coming from another third-party maven dependency jar (Jar B). These both classes have same package name in these two jars.\r\n\r\nNow there is another 3rd part dependency which has Jar B as dependency, and it is using URLUtils class from it.\r\nEven though the class and package names of URLUtils class in Jar A and Jar B is same but method signature is different.\r\n\r\nInitially we don&#39;t know we have to URLUtils classes coming from two different jars and deployed it and it worked fine but after 12 days it started picking URLUtils class from Jar A and failing with ClassCastException.\r\n\r\nWe found the issue and removed the Jar A dependency from the project. But I am curious to know why JVM initially choosed URLUtils class from Jar B and suddenly switched to Jar A URLUtils class.\r\n\r\nJVM: Corretto JDK 8\r\n","title":"How JVM resolves same class coming from two Jars","body":"<p>We have one URLUtils class which is coming from one internal maven dependency jar (Jar A), and this URLUtils class is also coming from another third-party maven dependency jar (Jar B). These both classes have same package name in these two jars.</p>\n<p>Now there is another 3rd part dependency which has Jar B as dependency, and it is using URLUtils class from it.\nEven though the class and package names of URLUtils class in Jar A and Jar B is same but method signature is different.</p>\n<p>Initially we don't know we have to URLUtils classes coming from two different jars and deployed it and it worked fine but after 12 days it started picking URLUtils class from Jar A and failing with ClassCastException.</p>\n<p>We found the issue and removed the Jar A dependency from the project. But I am curious to know why JVM initially choosed URLUtils class from Jar B and suddenly switched to Jar A URLUtils class.</p>\n<p>JVM: Corretto JDK 8</p>\n"},{"tags":["java","javac","jdeps"],"owner":{"account_id":17983057,"reputation":1072,"user_id":13068918,"display_name":"Sheng Chen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1677047224,"creation_date":1677047224,"question_id":75528958,"body_markdown":"Though `jdeps` can be used to get the class level dependencies, considering follow case:\r\n\r\n**A.java:**\r\n\r\n```java\r\npublic class A {\r\n    public static final int AA = 1;\r\n}\r\n```\r\n\r\n**B.java**\r\n\r\n```java\r\npublic class B {\r\n    public static void main(String[] args) {\r\n        System.out.println(A.AA);\r\n    }\r\n}\r\n```\r\n\r\nIn this case, when using `javac` to do the complilation. The `A.AA` in `B.java` will be directly replaced by constant `1`.\r\n\r\nIn this case, jdeps can not find that B actually depends on A. How to find the dependency information when it comes to this kind of public static final field accessing?","title":"How to get the dependency information about public static final fields","body":"<p>Though <code>jdeps</code> can be used to get the class level dependencies, considering follow case:</p>\n<p><strong>A.java:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public class A {\n    public static final int AA = 1;\n}\n</code></pre>\n<p><strong>B.java</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public class B {\n    public static void main(String[] args) {\n        System.out.println(A.AA);\n    }\n}\n</code></pre>\n<p>In this case, when using <code>javac</code> to do the complilation. The <code>A.AA</code> in <code>B.java</code> will be directly replaced by constant <code>1</code>.</p>\n<p>In this case, jdeps can not find that B actually depends on A. How to find the dependency information when it comes to this kind of public static final field accessing?</p>\n"},{"tags":["java","json","jsonpath","json-path-expression"],"answers":[{"tags":[],"owner":{"account_id":13009011,"reputation":1105,"user_id":9402689,"display_name":"Raymond Choi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677046186,"creation_date":1677046186,"answer_id":75528843,"question_id":75527525,"body_markdown":"You may consider another library _Josson_ to do the transformation.\r\n\r\nhttps://github.com/octomix/josson\r\n\r\n    Josson josson = Josson.fromJsonString(yourJsonString);\r\n\r\n    JsonNode node = josson.getNode(\r\n        &quot;flatten(&#39;.&#39;,&#39;[%d]&#39;)&quot; +\r\n        &quot;.entries()&quot; +\r\n        &quot;.[value=~&#39;.*\\\\{.*}.*&#39;]*&quot; +\r\n        &quot;.concat(&#39;$.&#39;,key)&quot;);\r\n    node.forEach(elem -&gt; System.out.println(elem.asText()));\r\n\r\n__Output__\r\n\r\n    $.description\r\n    $.filter\r\n    $.contextData.docType\r\n    $.contextData.docNumber\r\n    $.contextData.organizationName\r\n    $.contextData.contractedServices\r\n    $.children[0].description\r\n    $.children[1].description\r\n","title":"JAVA JsonPath get selected paths using regex","body":"<p>You may consider another library <em>Josson</em> to do the transformation.</p>\n<p><a href=\"https://github.com/octomix/josson\" rel=\"nofollow noreferrer\">https://github.com/octomix/josson</a></p>\n<pre><code>Josson josson = Josson.fromJsonString(yourJsonString);\n\nJsonNode node = josson.getNode(\n    &quot;flatten('.','[%d]')&quot; +\n    &quot;.entries()&quot; +\n    &quot;.[value=~'.*\\\\{.*}.*']*&quot; +\n    &quot;.concat('$.',key)&quot;);\nnode.forEach(elem -&gt; System.out.println(elem.asText()));\n</code></pre>\n<p><strong>Output</strong></p>\n<pre><code>$.description\n$.filter\n$.contextData.docType\n$.contextData.docNumber\n$.contextData.organizationName\n$.contextData.contractedServices\n$.children[0].description\n$.children[1].description\n</code></pre>\n"}],"owner":{"account_id":8974840,"reputation":359,"user_id":6692088,"display_name":"Kevin Valdez"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":128,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677046186,"creation_date":1677029978,"question_id":75527525,"body_markdown":"Given the following Json\r\n\r\n    {\r\n       &quot;id&quot;:&quot;MENU_FULL_V2&quot;,\r\n       &quot;version&quot;:&quot;MENU_FULL_V2&quot;,\r\n       &quot;type&quot;:&quot;MAIN&quot;,\r\n       &quot;icon&quot;:&quot;shopping-bag-r&quot;,\r\n       &quot;description&quot;:&quot;This is the description {$.description}&quot;,\r\n       &quot;order&quot;:15000,\r\n       &quot;code&quot;:&quot;code&quot;,\r\n       &quot;filter&quot;:&quot;{$.contractedServices[*].contractId}&quot;,\r\n       &quot;status&quot;:&quot;ENABLED&quot;,\r\n       &quot;contextData&quot;:{\r\n          &quot;docType&quot;:&quot;{$.documentType}&quot;,\r\n          &quot;docNumber&quot;:&quot;{$.documentNumber}&quot;,\r\n          &quot;organizationName&quot;:&quot;{$.name}&quot;,\r\n          &quot;contractedServices&quot;:&quot;{$.contractedServices[*]}&quot;\r\n       },\r\n       &quot;children&quot;:[\r\n          {\r\n             &quot;id&quot;:&quot;MENU_CHILD_1&quot;,\r\n             &quot;version&quot;:&quot;MENU_FULL_V2&quot;,\r\n             &quot;type&quot;:&quot;CHILD&quot;,\r\n             &quot;description&quot;:&quot;This is the description {$.description}&quot;\r\n          },\r\n          {\r\n             &quot;id&quot;:&quot;MENU_CHILD_2&quot;,\r\n             &quot;version&quot;:&quot;MENU_FULL_V2&quot;,\r\n             &quot;type&quot;:&quot;CHILD&quot;,\r\n             &quot;description&quot;:&quot;This is the description {$.description}&quot;\r\n          }\r\n       ]\r\n    }\r\n\r\nHow can I return a List of string which contains all the paths to the values that has `{ }` in their value.\r\n\r\nIs there a way to get all the values that match this regular expresion [see][1]\r\n\r\n\r\n  [1]: https://regex101.com/r/2GhsKu/1\r\n\r\nSo far I have this.\r\n\r\n    Configuration conf = Configuration.builder()\r\n       .options(Option.AS_PATH_LIST).build();\r\n    \r\n    List&lt;String&gt; pathList = JsonPath.using(conf).parse(json).read(&quot;//GET ALL PATHS THAT MATCH REGEX&quot;);\r\n\r\nThe expected output for `pathList` should contain all paths that have values that have `{ }`\r\n\r\nie:\r\n\r\n    &quot;$[&#39;description&#39;]&quot;,\r\n    &quot;$[&#39;filter&#39;]&quot;,\r\n    &quot;$[&#39;contextData&#39;][&#39;docType&#39;]&quot;,\r\n    &quot;$[&#39;contextData&#39;][&#39;docNumber&#39;]&quot;\r\n\r\nNote that the list is not complete, but it should contain all the paths that have values with `{ }`","title":"JAVA JsonPath get selected paths using regex","body":"<p>Given the following Json</p>\n<pre><code>{\n   &quot;id&quot;:&quot;MENU_FULL_V2&quot;,\n   &quot;version&quot;:&quot;MENU_FULL_V2&quot;,\n   &quot;type&quot;:&quot;MAIN&quot;,\n   &quot;icon&quot;:&quot;shopping-bag-r&quot;,\n   &quot;description&quot;:&quot;This is the description {$.description}&quot;,\n   &quot;order&quot;:15000,\n   &quot;code&quot;:&quot;code&quot;,\n   &quot;filter&quot;:&quot;{$.contractedServices[*].contractId}&quot;,\n   &quot;status&quot;:&quot;ENABLED&quot;,\n   &quot;contextData&quot;:{\n      &quot;docType&quot;:&quot;{$.documentType}&quot;,\n      &quot;docNumber&quot;:&quot;{$.documentNumber}&quot;,\n      &quot;organizationName&quot;:&quot;{$.name}&quot;,\n      &quot;contractedServices&quot;:&quot;{$.contractedServices[*]}&quot;\n   },\n   &quot;children&quot;:[\n      {\n         &quot;id&quot;:&quot;MENU_CHILD_1&quot;,\n         &quot;version&quot;:&quot;MENU_FULL_V2&quot;,\n         &quot;type&quot;:&quot;CHILD&quot;,\n         &quot;description&quot;:&quot;This is the description {$.description}&quot;\n      },\n      {\n         &quot;id&quot;:&quot;MENU_CHILD_2&quot;,\n         &quot;version&quot;:&quot;MENU_FULL_V2&quot;,\n         &quot;type&quot;:&quot;CHILD&quot;,\n         &quot;description&quot;:&quot;This is the description {$.description}&quot;\n      }\n   ]\n}\n</code></pre>\n<p>How can I return a List of string which contains all the paths to the values that has <code>{ }</code> in their value.</p>\n<p>Is there a way to get all the values that match this regular expresion <a href=\"https://regex101.com/r/2GhsKu/1\" rel=\"nofollow noreferrer\">see</a></p>\n<p>So far I have this.</p>\n<pre><code>Configuration conf = Configuration.builder()\n   .options(Option.AS_PATH_LIST).build();\n\nList&lt;String&gt; pathList = JsonPath.using(conf).parse(json).read(&quot;//GET ALL PATHS THAT MATCH REGEX&quot;);\n</code></pre>\n<p>The expected output for <code>pathList</code> should contain all paths that have values that have <code>{ }</code></p>\n<p>ie:</p>\n<pre><code>&quot;$['description']&quot;,\n&quot;$['filter']&quot;,\n&quot;$['contextData']['docType']&quot;,\n&quot;$['contextData']['docNumber']&quot;\n</code></pre>\n<p>Note that the list is not complete, but it should contain all the paths that have values with <code>{ }</code></p>\n"},{"tags":["java","maven","intellij-idea"],"comments":[{"owner":{"account_id":229162,"reputation":749,"user_id":491924,"accept_rate":45,"display_name":"emiles"},"score":0,"creation_date":1676532438,"post_id":75468995,"comment_id":133156449,"body_markdown":"I noticed IntelliJ was updated late January, 2023. Done automatically through JetBrains Toolbox. Full paid subscription.","body":"I noticed IntelliJ was updated late January, 2023. Done automatically through JetBrains Toolbox. Full paid subscription."},{"owner":{"account_id":27560193,"reputation":491,"user_id":21033369,"display_name":"LJ replica"},"score":0,"creation_date":1676535780,"post_id":75468995,"comment_id":133157335,"body_markdown":"If you have already added the A library or jar in the B project&#39;s `pom.xml`, can the project compile successfully from the command line via `mvn compile`? Please also open `File | Project Structure | Modules | your_current_module` and check if that library/jar is in `Dependencies` tab.","body":"If you have already added the A library or jar in the B project&#39;s <code>pom.xml</code>, can the project compile successfully from the command line via <code>mvn compile</code>? Please also open <code>File | Project Structure | Modules | your_current_module</code> and check if that library/jar is in <code>Dependencies</code> tab."},{"owner":{"account_id":229162,"reputation":749,"user_id":491924,"accept_rate":45,"display_name":"emiles"},"score":0,"creation_date":1676571044,"post_id":75468995,"comment_id":133168506,"body_markdown":"LJ, &#39;mvn compile&#39; shows the same problem. The jar is in the dependencies tab.","body":"LJ, &#39;mvn compile&#39; shows the same problem. The jar is in the dependencies tab."},{"owner":{"account_id":27560193,"reputation":491,"user_id":21033369,"display_name":"LJ replica"},"score":0,"creation_date":1676606353,"post_id":75468995,"comment_id":133175312,"body_markdown":"You haven&#39;t added this jar/project B library correctly in this `pom.xml`. The IDEA uses the Maven configuration `pom.xml` as the single source of truth. Please recheck `pom.xml` and make sure that that library is added correctly there. Once you could use the `mvn compile` to build this project successfully, after reloading the Maven in IDEA, the IDEA should resolve it too.","body":"You haven&#39;t added this jar/project B library correctly in this <code>pom.xml</code>. The IDEA uses the Maven configuration <code>pom.xml</code> as the single source of truth. Please recheck <code>pom.xml</code> and make sure that that library is added correctly there. Once you could use the <code>mvn compile</code> to build this project successfully, after reloading the Maven in IDEA, the IDEA should resolve it too."},{"owner":{"account_id":2375368,"reputation":4423,"user_id":2078908,"display_name":"ursa"},"score":0,"creation_date":1676850307,"post_id":75468995,"comment_id":133215272,"body_markdown":"are these projects a part of multi-module project? are they independent projects? could you please show pom.xml (without unnecessary details) for these projects?","body":"are these projects a part of multi-module project? are they independent projects? could you please show pom.xml (without unnecessary details) for these projects?"},{"owner":{"account_id":229162,"reputation":749,"user_id":491924,"accept_rate":45,"display_name":"emiles"},"score":0,"creation_date":1677043195,"post_id":75468995,"comment_id":133257383,"body_markdown":"@ursa pom.xml snippets added above. Separate projects at the same dir level. Again, proj-a is installed in local repo in the proper dir structure and the jar file contains the correct .class file, with the proper namespaces.","body":"@ursa pom.xml snippets added above. Separate projects at the same dir level. Again, proj-a is installed in local repo in the proper dir structure and the jar file contains the correct .class file, with the proper namespaces."},{"owner":{"account_id":229162,"reputation":749,"user_id":491924,"accept_rate":45,"display_name":"emiles"},"score":0,"creation_date":1677043230,"post_id":75468995,"comment_id":133257387,"body_markdown":"it is a maven issue, not IntelliJ.","body":"it is a maven issue, not IntelliJ."}],"answers":[{"tags":[],"owner":{"account_id":229162,"reputation":749,"user_id":491924,"accept_rate":45,"display_name":"emiles"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677044603,"creation_date":1677044603,"answer_id":75528679,"question_id":75468995,"body_markdown":"Figured it out. There was a misconfigured plugin I overlooked. All good now. Thanks all for looking at this.","title":"Intellij package does not exist","body":"<p>Figured it out. There was a misconfigured plugin I overlooked. All good now. Thanks all for looking at this.</p>\n"}],"owner":{"account_id":229162,"reputation":749,"user_id":491924,"accept_rate":45,"display_name":"emiles"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":416,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1677044603,"creation_date":1676532246,"question_id":75468995,"body_markdown":"IntelliJ 2022.3.2 Ultimate\r\nMacOS (latest)\r\n\r\nStumped ...\r\n\r\nProject A builds fine, installs jar file in local repo, ~/.m2/repository/...\r\nProject B has a dependency on Project A. Looks like it&#39;s there in Maven -&gt; Dependencies.\r\nProject B does not compile, &quot;package ? does not exist&quot;.\r\nI manually copy the jar to ./lib and add it in the module dependencies for Project B. Again, Maven -&gt; dependencies lists the jar file.\r\nInside the jar file in BOOT-INF/classes/... the class files are there.\r\n\r\nIntelliJ does not recognize the jar file, no matter what I do. Basic stuff here. I&#39;ve tried all tricks except the one that fixes the problem. I&#39;ve changed the java version to 11 from 17. Used maven compiler plugin with source and target set to 11. Disabled additional IntelliJ plugins I had installed. Nothing in idea.log that stands out. Project B simply can&#39;t find the jar for Project A.\r\n\r\nProject A and Project B are spring boot projects. I&#39;ve done local dependencies before and everything has worked fine, except in this case.\r\n\r\nTIA,\r\nEric\r\n\r\n\r\nProject A pom.xml:\r\n\r\n    ...\r\n    &lt;name&gt;proj-a&lt;/name&gt;\r\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n    &lt;artifactId&gt;proj-a&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0.0&lt;/version&gt;\r\n    &lt;packaging&gt;jar&lt;/packaging&gt;\r\n    ...\r\n\r\nProject B pom.xml:\r\n\r\n    ...\r\n    &lt;name&gt;proj-b&lt;/name&gt;\r\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n    &lt;artifactId&gt;proj-b&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0.0&lt;/version&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n            &lt;artifactId&gt;proj-a&lt;/artifactId&gt;\r\n            &lt;version&gt;1.0.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    ...\r\n","title":"Intellij package does not exist","body":"<p>IntelliJ 2022.3.2 Ultimate\nMacOS (latest)</p>\n<p>Stumped ...</p>\n<p>Project A builds fine, installs jar file in local repo, ~/.m2/repository/...\nProject B has a dependency on Project A. Looks like it's there in Maven -&gt; Dependencies.\nProject B does not compile, &quot;package ? does not exist&quot;.\nI manually copy the jar to ./lib and add it in the module dependencies for Project B. Again, Maven -&gt; dependencies lists the jar file.\nInside the jar file in BOOT-INF/classes/... the class files are there.</p>\n<p>IntelliJ does not recognize the jar file, no matter what I do. Basic stuff here. I've tried all tricks except the one that fixes the problem. I've changed the java version to 11 from 17. Used maven compiler plugin with source and target set to 11. Disabled additional IntelliJ plugins I had installed. Nothing in idea.log that stands out. Project B simply can't find the jar for Project A.</p>\n<p>Project A and Project B are spring boot projects. I've done local dependencies before and everything has worked fine, except in this case.</p>\n<p>TIA,\nEric</p>\n<p>Project A pom.xml:</p>\n<pre><code>...\n&lt;name&gt;proj-a&lt;/name&gt;\n&lt;groupId&gt;com.example&lt;/groupId&gt;\n&lt;artifactId&gt;proj-a&lt;/artifactId&gt;\n&lt;version&gt;1.0.0&lt;/version&gt;\n&lt;packaging&gt;jar&lt;/packaging&gt;\n...\n</code></pre>\n<p>Project B pom.xml:</p>\n<pre><code>...\n&lt;name&gt;proj-b&lt;/name&gt;\n&lt;groupId&gt;com.example&lt;/groupId&gt;\n&lt;artifactId&gt;proj-b&lt;/artifactId&gt;\n&lt;version&gt;1.0.0&lt;/version&gt;\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.example&lt;/groupId&gt;\n        &lt;artifactId&gt;proj-a&lt;/artifactId&gt;\n        &lt;version&gt;1.0.0&lt;/version&gt;\n    &lt;/dependency&gt;\n...\n</code></pre>\n"},{"tags":["java","logging","objectmapper"],"comments":[{"owner":{"account_id":123802,"reputation":37785,"user_id":318493,"accept_rate":67,"display_name":"RoToRa"},"score":0,"creation_date":1677061652,"post_id":75528550,"comment_id":133261546,"body_markdown":"Jackson&#39;s &quot;Pretty print&quot; is for writing JSON. The format you want isn&#39;t valid JSON so it can&#39;t be done with Jackson. You already are printing `field2` how you want it, so you&#39;ll have to print the rest yourself, too.","body":"Jackson&#39;s &quot;Pretty print&quot; is for writing JSON. The format you want isn&#39;t valid JSON so it can&#39;t be done with Jackson. You already are printing <code>field2</code> how you want it, so you&#39;ll have to print the rest yourself, too."},{"owner":{"account_id":3232747,"reputation":229,"user_id":2727610,"display_name":"Vivek Adhikari"},"score":0,"creation_date":1677121107,"post_id":75528550,"comment_id":133276917,"body_markdown":"Its a valid JSON but printed differently. It just that, its not linear. \nMy question is not on values rather on printing. I know jackson doesn&#39;t support this now, is there any lib or anything - that we can achieve this.\n\nI could be achieving this after customizing Pretty Writer to be human readable   if prettyPrint() to be void - just to make sure it would not modify state of data. \n\n\n```\nobjectMapper.writeValueAsString(new TestClass()).prettyPrint();","body":"Its a valid JSON but printed differently. It just that, its not linear.  My question is not on values rather on printing. I know jackson doesn&#39;t support this now, is there any lib or anything - that we can achieve this.  I could be achieving this after customizing Pretty Writer to be human readable   if prettyPrint() to be void - just to make sure it would not modify state of data.    ``` objectMapper.writeValueAsString(new TestClass()).prettyPrint();"},{"owner":{"account_id":123802,"reputation":37785,"user_id":318493,"accept_rate":67,"display_name":"RoToRa"},"score":0,"creation_date":1677591114,"post_id":75528550,"comment_id":133364920,"body_markdown":"No, it&#39;s not valid JSON. In JSON it&#39;s illegal to have a literal line break character in strings.","body":"No, it&#39;s not valid JSON. In JSON it&#39;s illegal to have a literal line break character in strings."},{"owner":{"account_id":3232747,"reputation":229,"user_id":2727610,"display_name":"Vivek Adhikari"},"score":0,"creation_date":1677645849,"post_id":75528550,"comment_id":133377226,"body_markdown":"Its a data that represent, so its valid. I know there is limitation on computation now for this. That&#39;s why I was more interested to have void method on objectmapper to print data that is human readable. As long as, if that doesn&#39;t updates the state of data - its a pretty print anyway. So i am asking if there is lib or existing code that someone is already done. Thanks","body":"Its a data that represent, so its valid. I know there is limitation on computation now for this. That&#39;s why I was more interested to have void method on objectmapper to print data that is human readable. As long as, if that doesn&#39;t updates the state of data - its a pretty print anyway. So i am asking if there is lib or existing code that someone is already done. Thanks"}],"owner":{"account_id":3232747,"reputation":229,"user_id":2727610,"display_name":"Vivek Adhikari"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":125,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":0,"score":3,"last_activity_date":1677043241,"creation_date":1677043241,"question_id":75528550,"body_markdown":"This is the sample code what I am doing to log the JSON object to the console and including error stack trace as part of field2. While I log to the console, that is not readable.\r\n\r\nSample Code to understand issue.  \r\n```\r\npackage goal.test;\r\n\r\nimport com.fasterxml.jackson.core.JsonProcessingException;\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\n\r\npublic class TestClass {\r\n\r\n    String field1 = &quot;hello&quot;;\r\n    String field2 = &quot;hi\\r\\ntest&quot;;\r\n\r\n    public String getField1() {\r\n        return field1;\r\n    }\r\n\r\n    public void setField1(String field1) {\r\n        this.field1 = field1;\r\n    }\r\n\r\n    public String getField2() {\r\n        return field2;\r\n    }\r\n\r\n    public void setField2(String field2) {\r\n        this.field2 = field2;\r\n    }\r\n\r\n    public static void main(String[] args) throws JsonProcessingException {\r\n        whatIsPossibleNow();\r\n        whatINeed();\r\n    }\r\n\r\n    static void whatIsPossibleNow() throws JsonProcessingException {\r\n        ObjectMapper objectMapper = new ObjectMapper();\r\n        String result = objectMapper.writerWithDefaultPrettyPrinter().writeValueAsString(new TestClass());\r\n        System.out.println(result);\r\n        /**\r\n         * output\r\n         * {\r\n         *   &quot;field1&quot; : &quot;hello&quot;,\r\n         *   &quot;field2&quot; : &quot;hi\\r\\ntest&quot;\r\n         * }\r\n         */\r\n    }\r\n\r\n    static void whatINeed() throws JsonProcessingException {\r\n        TestClass obj = new TestClass();\r\n        /**\r\n         *\r\n         *  field2 also need to formatted while printing\r\n         *         expected output\r\n         *         {\r\n         *             &quot;field1&quot; : &quot;hello&quot;,\r\n         *             &quot;field2&quot; : &quot;hi\r\n         *                         test&quot;\r\n         *         }\r\n         *  output of the field2 should be something this what this prints\r\n         */\r\n        System.out.println(obj.getField2());\r\n    }\r\n\r\n    static void howCouldBe() throws JsonProcessingException {\r\n        /**\r\n         *  how to achieve this now ??\r\n         */\r\n        ObjectMapper objectMapper = new ObjectMapper();\r\n        objectMapper.writeValueAsString(new TestClass()).prettyPrint();\r\n    }\r\n}\r\n```\r\n\r\nI am confused if there is any other way achieving as I need to pretty print object while deserializing.","title":"How to pretty format values on deserialize using jackson mapper","body":"<p>This is the sample code what I am doing to log the JSON object to the console and including error stack trace as part of field2. While I log to the console, that is not readable.</p>\n<p>Sample Code to understand issue.</p>\n<pre><code>package goal.test;\n\nimport com.fasterxml.jackson.core.JsonProcessingException;\nimport com.fasterxml.jackson.databind.ObjectMapper;\n\npublic class TestClass {\n\n    String field1 = &quot;hello&quot;;\n    String field2 = &quot;hi\\r\\ntest&quot;;\n\n    public String getField1() {\n        return field1;\n    }\n\n    public void setField1(String field1) {\n        this.field1 = field1;\n    }\n\n    public String getField2() {\n        return field2;\n    }\n\n    public void setField2(String field2) {\n        this.field2 = field2;\n    }\n\n    public static void main(String[] args) throws JsonProcessingException {\n        whatIsPossibleNow();\n        whatINeed();\n    }\n\n    static void whatIsPossibleNow() throws JsonProcessingException {\n        ObjectMapper objectMapper = new ObjectMapper();\n        String result = objectMapper.writerWithDefaultPrettyPrinter().writeValueAsString(new TestClass());\n        System.out.println(result);\n        /**\n         * output\n         * {\n         *   &quot;field1&quot; : &quot;hello&quot;,\n         *   &quot;field2&quot; : &quot;hi\\r\\ntest&quot;\n         * }\n         */\n    }\n\n    static void whatINeed() throws JsonProcessingException {\n        TestClass obj = new TestClass();\n        /**\n         *\n         *  field2 also need to formatted while printing\n         *         expected output\n         *         {\n         *             &quot;field1&quot; : &quot;hello&quot;,\n         *             &quot;field2&quot; : &quot;hi\n         *                         test&quot;\n         *         }\n         *  output of the field2 should be something this what this prints\n         */\n        System.out.println(obj.getField2());\n    }\n\n    static void howCouldBe() throws JsonProcessingException {\n        /**\n         *  how to achieve this now ??\n         */\n        ObjectMapper objectMapper = new ObjectMapper();\n        objectMapper.writeValueAsString(new TestClass()).prettyPrint();\n    }\n}\n</code></pre>\n<p>I am confused if there is any other way achieving as I need to pretty print object while deserializing.</p>\n"},{"tags":["java"],"owner":{"account_id":21194056,"reputation":740,"user_id":15585965,"display_name":"genshuwoodswind"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677042889,"creation_date":1677042889,"question_id":75528521,"body_markdown":"I was curious to see if someone knew a good way or a library in java 8 I should use to compare a string variable, and confirm if it is a unary operator, or binary operator. The string variable would hold NOT, AND, NAND, OR, NOR, XOR, COND, BICOND.  I am trying to avoid comparing multiple strings in multiple if statements. But if that&#39;s the only way I will do it. Just curious if someone knows. \r\n\r\nI will be doing the operations based on binary operators and unary operators.\r\n\r\nExample 1: \r\n\r\nif x is a unary operator\r\n do something\r\n\r\nelse if x is a binary operator\r\n do something\r\n\r\n","title":"UranyOperator and BinaryOperator comparing a String variable in Java 8","body":"<p>I was curious to see if someone knew a good way or a library in java 8 I should use to compare a string variable, and confirm if it is a unary operator, or binary operator. The string variable would hold NOT, AND, NAND, OR, NOR, XOR, COND, BICOND.  I am trying to avoid comparing multiple strings in multiple if statements. But if that's the only way I will do it. Just curious if someone knows.</p>\n<p>I will be doing the operations based on binary operators and unary operators.</p>\n<p>Example 1:</p>\n<p>if x is a unary operator\ndo something</p>\n<p>else if x is a binary operator\ndo something</p>\n"},{"tags":["java","jpa","eclipselink","jpql","sql-like"],"comments":[{"owner":{"account_id":757313,"reputation":6028,"user_id":758831,"accept_rate":75,"display_name":"wmorrison365"},"score":2,"creation_date":1357751966,"post_id":1341104,"comment_id":19761326,"body_markdown":"@Manuele Piastra: Is the answer below not what you were looking for?","body":"@Manuele Piastra: Is the answer below not what you were looking for?"}],"answers":[{"comments":[{"owner":{"account_id":49616,"reputation":4025,"user_id":147806,"display_name":"L&#225;szl&#243; van den Hoek"},"score":10,"creation_date":1381823094,"post_id":1344198,"comment_id":28713158,"body_markdown":"For the record, this does not leave you open to JPQL injection attacks because this.value is automatically properly escaped for you.","body":"For the record, this does not leave you open to JPQL injection attacks because this.value is automatically properly escaped for you."},{"owner":{"account_id":3280746,"reputation":1354,"user_id":2761418,"accept_rate":67,"display_name":"Gustavo"},"score":4,"creation_date":1474387134,"post_id":1344198,"comment_id":66505862,"body_markdown":"This `&quot;%&quot; + this.value + &quot;%&quot;` is what is escaped.","body":"This <code>&quot;%&quot; + this.value + &quot;%&quot;</code> is what is escaped."},{"owner":{"account_id":1873786,"reputation":4203,"user_id":1695458,"accept_rate":86,"display_name":"EM-Creations"},"score":2,"creation_date":1489071633,"post_id":1344198,"comment_id":72519069,"body_markdown":"How do I make this case-insensitive?","body":"How do I make this case-insensitive?"},{"owner":{"account_id":5116062,"reputation":642,"user_id":4101144,"accept_rate":47,"display_name":"Maksim Gumerov"},"score":0,"creation_date":1698774292,"post_id":1344198,"comment_id":136447309,"body_markdown":"Like Gustavo noticed before, &quot;%...%&quot; is what is getting escaped. Therefore, in a LIKE clause, the pattern will be not %...%, but \\%...\\% which is wrong. So, this is not a correct answer. What am I missing?","body":"Like Gustavo noticed before, &quot;%...%&quot; is what is getting escaped. Therefore, in a LIKE clause, the pattern will be not %...%, but \\%...\\% which is wrong. So, this is not a correct answer. What am I missing?"}],"tags":[],"owner":{"account_id":51776,"reputation":3994,"user_id":154722,"accept_rate":82,"display_name":"shipmaster"},"comment_count":4,"down_vote_count":1,"up_vote_count":178,"is_accepted":false,"score":177,"last_activity_date":1251413850,"creation_date":1251413850,"answer_id":1344198,"question_id":1341104,"body_markdown":"If you do \r\n\r\n    LIKE :code\r\n\r\nand then do \r\n\r\n    namedQuery.setParameter(&quot;code&quot;, &quot;%&quot; + this.value + &quot;%&quot;);\r\n\r\nThen value remains free from the &#39;%&#39; sign. If you need to use it somewhere else in the same query simply use another parameter name other than &#39;code&#39; .\r\n\r\n","title":"Parameter in like clause JPQL","body":"<p>If you do </p>\n\n<pre><code>LIKE :code\n</code></pre>\n\n<p>and then do </p>\n\n<pre><code>namedQuery.setParameter(\"code\", \"%\" + this.value + \"%\");\n</code></pre>\n\n<p>Then value remains free from the '%' sign. If you need to use it somewhere else in the same query simply use another parameter name other than 'code' .</p>\n"},{"comments":[{"owner":{"account_id":10075506,"reputation":798,"user_id":7447765,"accept_rate":80,"display_name":"Muizz Mahdy"},"score":3,"creation_date":1548186341,"post_id":15838944,"comment_id":95450718,"body_markdown":"Note: CONCAT(?2, &#39;%&#39;) will add &#39;%&#39; to the end of the parameter, use CONCAT(&#39;%&#39;, ?2, &#39;%&#39;) to add it to the beginning and end of parameter.","body":"Note: CONCAT(?2, &#39;%&#39;) will add &#39;%&#39; to the end of the parameter, use CONCAT(&#39;%&#39;, ?2, &#39;%&#39;) to add it to the beginning and end of parameter."},{"owner":{"account_id":413052,"reputation":1243,"user_id":786467,"accept_rate":100,"display_name":"Jeff Baranski"},"score":1,"creation_date":1611079057,"post_id":15838944,"comment_id":116333137,"body_markdown":"Adding to the comment above, in Oracle the syntax is: `CONCAT(CONCAT(&#39;%&#39;, ?2), &#39;%&#39;)` to add % to the beginning and end of a string.","body":"Adding to the comment above, in Oracle the syntax is: <code>CONCAT(CONCAT(&#39;%&#39;, ?2), &#39;%&#39;)</code> to add % to the beginning and end of a string."},{"owner":{"account_id":5116062,"reputation":642,"user_id":4101144,"accept_rate":47,"display_name":"Maksim Gumerov"},"score":0,"creation_date":1698774364,"post_id":15838944,"comment_id":136447324,"body_markdown":"Oracle? This is not a native query is it?","body":"Oracle? This is not a native query is it?"},{"owner":{"account_id":57788,"reputation":46120,"user_id":173149,"accept_rate":62,"display_name":"gavenkoa"},"score":0,"creation_date":1698836142,"post_id":15838944,"comment_id":136454576,"body_markdown":"JPQL supports lots of functions. They are translated to native capabilities of RDBMS. Fetch the spec PDF for JPA 2.2: **JSR 338**, section *4.6.17.2 Built-in String, Arithmetic, and Datetime Functional Expressions*","body":"JPQL supports lots of functions. They are translated to native capabilities of RDBMS. Fetch the spec PDF for JPA 2.2: <b>JSR 338</b>, section <i>4.6.17.2 Built-in String, Arithmetic, and Datetime Functional Expressions</i>"}],"tags":[],"owner":{"account_id":57788,"reputation":46120,"user_id":173149,"accept_rate":62,"display_name":"gavenkoa"},"comment_count":4,"down_vote_count":0,"up_vote_count":63,"is_accepted":false,"score":63,"last_activity_date":1365179306,"creation_date":1365179306,"answer_id":15838944,"question_id":1341104,"body_markdown":"I don&#39;t use named parameters for all queries. For example it is unusual to use named parameters in [JpaRepository][1].\r\n\r\nTo workaround I use JPQL **CONCAT** function (this code emulate *start with*):\r\n\r\n    @Repository\r\n    public interface BranchRepository extends JpaRepository&lt;Branch, String&gt; {\r\n        private static final String QUERY = &quot;select b from Branch b&quot;\r\n           + &quot; left join b.filial f&quot;\r\n           + &quot; where f.id = ?1 and b.id like CONCAT(?2, &#39;%&#39;)&quot;;\r\n        @Query(QUERY)\r\n        List&lt;Branch&gt; findByFilialAndBranchLike(String filialId, String branchCode);\r\n    }\r\n\r\nI found this technique in excellent docs: http://openjpa.apache.org/builds/1.0.1/apache-openjpa-1.0.1/docs/manual/jpa_overview_query.html\r\n\r\n  [1]: http://static.springsource.org/spring-data/data-jpa/docs/current/api/org/springframework/data/jpa/repository/JpaRepository.html","title":"Parameter in like clause JPQL","body":"<p>I don't use named parameters for all queries. For example it is unusual to use named parameters in <a href=\"http://static.springsource.org/spring-data/data-jpa/docs/current/api/org/springframework/data/jpa/repository/JpaRepository.html\">JpaRepository</a>.</p>\n\n<p>To workaround I use JPQL <strong>CONCAT</strong> function (this code emulate <em>start with</em>):</p>\n\n<pre><code>@Repository\npublic interface BranchRepository extends JpaRepository&lt;Branch, String&gt; {\n    private static final String QUERY = \"select b from Branch b\"\n       + \" left join b.filial f\"\n       + \" where f.id = ?1 and b.id like CONCAT(?2, '%')\";\n    @Query(QUERY)\n    List&lt;Branch&gt; findByFilialAndBranchLike(String filialId, String branchCode);\n}\n</code></pre>\n\n<p>I found this technique in excellent docs: <a href=\"http://openjpa.apache.org/builds/1.0.1/apache-openjpa-1.0.1/docs/manual/jpa_overview_query.html\">http://openjpa.apache.org/builds/1.0.1/apache-openjpa-1.0.1/docs/manual/jpa_overview_query.html</a></p>\n"},{"comments":[{"owner":{"account_id":2502149,"reputation":12737,"user_id":2176962,"accept_rate":67,"display_name":"hgoebl"},"score":1,"creation_date":1512410061,"post_id":37401244,"comment_id":82236619,"body_markdown":"for me the best solution - no concatenation, no SQL injection.","body":"for me the best solution - no concatenation, no SQL injection."},{"owner":{"account_id":12704081,"reputation":888,"user_id":9229931,"display_name":"Danilo K&#246;rber"},"score":0,"creation_date":1662379400,"post_id":37401244,"comment_id":129985618,"body_markdown":"What if :searchStr is actually a List? Is there a way use LOCATE with lists?","body":"What if :searchStr is actually a List? Is there a way use LOCATE with lists?"},{"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"score":0,"creation_date":1685994883,"post_id":37401244,"comment_id":134736060,"body_markdown":"MySQL text queries are case-insensitive (based on collation of the field), so this actually performs case-insensitive querying without the performance and readability impact of things like `LOWER()`","body":"MySQL text queries are case-insensitive (based on collation of the field), so this actually performs case-insensitive querying without the performance and readability impact of things like <code>LOWER()</code>"}],"tags":[],"owner":{"account_id":3397,"reputation":1461,"user_id":4901,"display_name":"David Carlson"},"comment_count":3,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1464105250,"creation_date":1464040732,"answer_id":37401244,"question_id":1341104,"body_markdown":"You could use the [JPA LOCATE function][1]. \r\n\r\n&gt; **LOCATE(searchString, candidateString [, startIndex])**: Returns the\r\n&gt; first index of searchString in candidateString. Positions are 1-based.\r\n&gt; If the string is not found, returns 0.\r\n\r\nFYI: The documentation on [my top google hit][2] had the parameters reversed.\r\n\r\n    SELECT \r\n      e\r\n    FROM \r\n      entity e\r\n    WHERE\r\n      (0 &lt; LOCATE(:searchStr, e.property))\r\n\r\n  [1]: http://openjpa.apache.org/builds/2.4.1/apache-openjpa/docs/manual.html#d5e3202\r\n  [2]: http://www.objectdb.com/java/jpa/query/jpql/string#LOCATE_-_Locating_Substrings_","title":"Parameter in like clause JPQL","body":"<p>You could use the <a href=\"http://openjpa.apache.org/builds/2.4.1/apache-openjpa/docs/manual.html#d5e3202\" rel=\"noreferrer\">JPA LOCATE function</a>. </p>\n\n<blockquote>\n  <p><strong>LOCATE(searchString, candidateString [, startIndex])</strong>: Returns the\n  first index of searchString in candidateString. Positions are 1-based.\n  If the string is not found, returns 0.</p>\n</blockquote>\n\n<p>FYI: The documentation on <a href=\"http://www.objectdb.com/java/jpa/query/jpql/string#LOCATE_-_Locating_Substrings_\" rel=\"noreferrer\">my top google hit</a> had the parameters reversed.</p>\n\n<pre><code>SELECT \n  e\nFROM \n  entity e\nWHERE\n  (0 &lt; LOCATE(:searchStr, e.property))\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4426660,"reputation":960,"user_id":3604955,"accept_rate":67,"display_name":"kaiser"},"score":0,"creation_date":1568286018,"post_id":44313229,"comment_id":102230433,"body_markdown":"Downvote: not working, this changes the parameter name to code%","body":"Downvote: not working, this changes the parameter name to code%"},{"owner":{"account_id":8648032,"reputation":788,"user_id":6474664,"display_name":"Remy"},"score":0,"creation_date":1626116293,"post_id":44313229,"comment_id":120802353,"body_markdown":"This answer  is very wrong and misleading, you are not allowed to do that in JPA Queries","body":"This answer  is very wrong and misleading, you are not allowed to do that in JPA Queries"},{"owner":{"account_id":11001518,"reputation":101,"user_id":8081996,"display_name":"TXN"},"score":1,"creation_date":1641491908,"post_id":44313229,"comment_id":124823643,"body_markdown":"Spring Data seems to accept this syntax (in @Query annotations), whereas JPQL does not.","body":"Spring Data seems to accept this syntax (in @Query annotations), whereas JPQL does not."},{"owner":{"account_id":2384381,"reputation":357,"user_id":2085658,"accept_rate":33,"display_name":"snakedog"},"score":0,"creation_date":1674585278,"post_id":44313229,"comment_id":132744058,"body_markdown":"Wow, this worked for me, NO idea why, seems awful but it works with Spring data when the single quotes made the query return null.","body":"Wow, this worked for me, NO idea why, seems awful but it works with Spring data when the single quotes made the query return null."}],"tags":[],"owner":{"account_id":5674477,"reputation":53,"user_id":4729730,"display_name":"Sehtim"},"comment_count":4,"down_vote_count":4,"up_vote_count":5,"is_accepted":false,"score":1,"last_activity_date":1496336217,"creation_date":1496336217,"answer_id":44313229,"question_id":1341104,"body_markdown":"Just leave out the &#39;&#39;\r\n\r\n    LIKE %:code%","title":"Parameter in like clause JPQL","body":"<p>Just leave out the ''</p>\n\n<pre><code>LIKE %:code%\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8137710,"reputation":1037,"user_id":6128863,"display_name":"Ishimwe Aubain Consolateur"},"comment_count":0,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1518164386,"creation_date":1513764820,"answer_id":47903572,"question_id":1341104,"body_markdown":"I don&#39;t know if I am late or out of scope but in my opinion I could do it like:\r\n\r\n    String orgName = &quot;anyParamValue&quot;;\r\n    \r\n    Query q = em.createQuery(&quot;Select O from Organization O where O.orgName LIKE &#39;%:orgName%&#39;&quot;);\r\n    \r\n    q.setParameter(&quot;orgName&quot;, orgName);","title":"Parameter in like clause JPQL","body":"<p>I don't know if I am late or out of scope but in my opinion I could do it like:</p>\n\n<pre><code>String orgName = \"anyParamValue\";\n\nQuery q = em.createQuery(\"Select O from Organization O where O.orgName LIKE '%:orgName%'\");\n\nq.setParameter(\"orgName\", orgName);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8721383,"reputation":111,"user_id":6524433,"display_name":"Haroon"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1534453265,"creation_date":1534453265,"answer_id":51885278,"question_id":1341104,"body_markdown":"There is nice like() method in JPA criteria API. Try to use that, hope it will help.\r\n\r\n    CriteriaBuilder cb = em.getCriteriaBuilder();\r\n    CriteriaQuery criteriaQuery = cb.createQuery(Employees.class);\r\n    Root&lt;Employees&gt; rootOfQuery = criteriaQuery.from(Employees.class);\r\n    criteriaQuery.select(rootOfQuery).where(cb.like(rootOfQuery.get(&quot;firstName&quot;), &quot;H%&quot;));","title":"Parameter in like clause JPQL","body":"<p>There is nice like() method in JPA criteria API. Try to use that, hope it will help.</p>\n\n<pre><code>CriteriaBuilder cb = em.getCriteriaBuilder();\nCriteriaQuery criteriaQuery = cb.createQuery(Employees.class);\nRoot&lt;Employees&gt; rootOfQuery = criteriaQuery.from(Employees.class);\ncriteriaQuery.select(rootOfQuery).where(cb.like(rootOfQuery.get(\"firstName\"), \"H%\"));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5660675,"reputation":575,"user_id":4478439,"display_name":"Vaneet Kataria"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1598437035,"creation_date":1548712009,"answer_id":54410750,"question_id":1341104,"body_markdown":"1. Use below JPQL query.\r\n\r\n```\r\nselect i from Instructor i where i.address LIKE CONCAT(&#39;%&#39;,:address ,&#39;%&#39;)&quot;);\r\n```\r\n\r\n2. Use below Criteria code for the same:\r\n\r\n```java\r\n@Test\r\npublic void findAllHavingAddressLike() {\r\n    CriteriaBuilder cb = criteriaUtils.criteriaBuilder();\r\n    CriteriaQuery&lt;Instructor&gt; cq = cb.createQuery(Instructor.class);\r\n    Root&lt;Instructor&gt; root = cq.from(Instructor.class);\r\n    printResultList(cq.select(root).where(\r\n        cb.like(root.get(Instructor_.address), &quot;%#1074%&quot;)));\r\n}\r\n```","title":"Parameter in like clause JPQL","body":"<ol>\n<li>Use below JPQL query.</li>\n</ol>\n<pre><code>select i from Instructor i where i.address LIKE CONCAT('%',:address ,'%')&quot;);\n</code></pre>\n<ol start=\"2\">\n<li>Use below Criteria code for the same:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\npublic void findAllHavingAddressLike() {\n    CriteriaBuilder cb = criteriaUtils.criteriaBuilder();\n    CriteriaQuery&lt;Instructor&gt; cq = cb.createQuery(Instructor.class);\n    Root&lt;Instructor&gt; root = cq.from(Instructor.class);\n    printResultList(cq.select(root).where(\n        cb.like(root.get(Instructor_.address), &quot;%#1074%&quot;)));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19303060,"reputation":31,"user_id":14110519,"display_name":"KarishmaP"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1598439897,"creation_date":1597502664,"answer_id":63427267,"question_id":1341104,"body_markdown":"Use `JpaRepository` or `CrudRepository` as repository interface:\r\n\r\n\r\n```java\r\n@Repository\r\npublic interface CustomerRepository extends JpaRepository&lt;Customer, Integer&gt; {\r\n\r\n    @Query(&quot;SELECT t from Customer t where LOWER(t.name) LIKE %:name%&quot;)\r\n    public List&lt;Customer&gt; findByName(@Param(&quot;name&quot;) String name);\r\n\r\n}\r\n\r\n\r\n@Service(value=&quot;customerService&quot;)\r\npublic class CustomerServiceImpl implements CustomerService {\r\n\r\n    private CustomerRepository customerRepository;\r\n    \r\n    //...\r\n\r\n    @Override\r\n    public List&lt;Customer&gt; pattern(String text) throws Exception {\r\n        return customerRepository.findByName(text.toLowerCase());\r\n    }\r\n}\r\n```","title":"Parameter in like clause JPQL","body":"<p>Use <code>JpaRepository</code> or <code>CrudRepository</code> as repository interface:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Repository\npublic interface CustomerRepository extends JpaRepository&lt;Customer, Integer&gt; {\n\n    @Query(&quot;SELECT t from Customer t where LOWER(t.name) LIKE %:name%&quot;)\n    public List&lt;Customer&gt; findByName(@Param(&quot;name&quot;) String name);\n\n}\n\n\n@Service(value=&quot;customerService&quot;)\npublic class CustomerServiceImpl implements CustomerService {\n\n    private CustomerRepository customerRepository;\n    \n    //...\n\n    @Override\n    public List&lt;Customer&gt; pattern(String text) throws Exception {\n        return customerRepository.findByName(text.toLowerCase());\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26327338,"reputation":1,"user_id":19988450,"display_name":"pervez"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677041681,"creation_date":1677041391,"answer_id":75528387,"question_id":1341104,"body_markdown":"**Use JPQL query.**\r\n\r\n    @Query(&quot;select e from Entity e where e.id = ?1 and e.code like CONCAT(&#39;%&#39;, CONCAT(?2, &#39;%&#39;))&quot;)\r\n    List&lt;Entity&gt; findByIdAndCodeLike(Long id, String code);\r\n\r\n\r\n","title":"Parameter in like clause JPQL","body":"<p><strong>Use JPQL query.</strong></p>\n<pre><code>@Query(&quot;select e from Entity e where e.id = ?1 and e.code like CONCAT('%', CONCAT(?2, '%'))&quot;)\nList&lt;Entity&gt; findByIdAndCodeLike(Long id, String code);\n</code></pre>\n"}],"owner":{"display_name":"Manuele Piastra"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":147511,"favorite_count":0,"down_vote_count":0,"up_vote_count":106,"answer_count":9,"score":106,"last_activity_date":1677041681,"creation_date":1251379763,"question_id":1341104,"body_markdown":"I am trying to write a JPQL query with a like clause:\r\n\r\n    LIKE &#39;%:code%&#39;\r\n\r\nI would like to have code=4 and find\r\n\r\n&lt;pre&gt;\r\n455\r\n554\r\n646\r\n...\r\n&lt;/pre&gt;\r\n\r\nI cannot pass `:code = &#39;%value%&#39;`\r\n\r\n    namedQuery.setParameter(&quot;%&quot; + this.value + &quot;%&quot;);\r\n\r\nbecause in another place I need `:value` not wrapped by the `%` chars. Any help?","title":"Parameter in like clause JPQL","body":"<p>I am trying to write a JPQL query with a like clause:</p>\n\n<pre><code>LIKE '%:code%'\n</code></pre>\n\n<p>I would like to have code=4 and find</p>\n\n<pre>\n455\n554\n646\n...\n</pre>\n\n<p>I cannot pass <code>:code = '%value%'</code></p>\n\n<pre><code>namedQuery.setParameter(\"%\" + this.value + \"%\");\n</code></pre>\n\n<p>because in another place I need <code>:value</code> not wrapped by the <code>%</code> chars. Any help?</p>\n"},{"tags":["java","algorithm","lexical-analysis","lexical"],"comments":[{"owner":{"account_id":4127333,"reputation":34381,"user_id":3386109,"display_name":"user3386109"},"score":0,"creation_date":1677032297,"post_id":75527419,"comment_id":133256015,"body_markdown":"I&#39;d print out the `tokens` array after the `token.split` line.","body":"I&#39;d print out the <code>tokens</code> array after the <code>token.split</code> line."},{"owner":{"account_id":4127333,"reputation":34381,"user_id":3386109,"display_name":"user3386109"},"score":0,"creation_date":1677032445,"post_id":75527419,"comment_id":133256039,"body_markdown":"I also see that `token.matches(&quot;[++]&quot;)` is oddly different than `t.matches(&quot;[+]&quot;)`. That may be the problem.","body":"I also see that <code>token.matches(&quot;[++]&quot;)</code> is oddly different than <code>t.matches(&quot;[+]&quot;)</code>. That may be the problem."},{"owner":{"account_id":8627288,"reputation":97,"user_id":6460115,"display_name":"hamsoace"},"score":0,"creation_date":1677039065,"post_id":75527419,"comment_id":133256882,"body_markdown":"@user3386109 yea i&#39;ve corrected it but now my issue is with &#39;&gt;= &#39; and INC is printing twice","body":"@user3386109 yea i&#39;ve corrected it but now my issue is with &#39;&gt;= &#39; and INC is printing twice"},{"owner":{"account_id":4127333,"reputation":34381,"user_id":3386109,"display_name":"user3386109"},"score":0,"creation_date":1677039837,"post_id":75527419,"comment_id":133256985,"body_markdown":"What did you see when you printed the `tokens` array?","body":"What did you see when you printed the <code>tokens</code> array?"}],"answers":[{"comments":[{"owner":{"account_id":4127333,"reputation":34381,"user_id":3386109,"display_name":"user3386109"},"score":0,"creation_date":1677044887,"post_id":75528343,"comment_id":133257617,"body_markdown":"A regex should always be enclosed in backticks. Otherwise expressions like `A*B*C` will end up being rendered as italics, like this A*B*C","body":"A regex should always be enclosed in backticks. Otherwise expressions like <code>A*B*C</code> will end up being rendered as italics, like this A<i>B</i>C"}],"tags":[],"owner":{"account_id":27542061,"reputation":316,"user_id":21018639,"display_name":"josephjacobmorris"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1677041618,"creation_date":1677040879,"answer_id":75528343,"question_id":75527419,"body_markdown":"You are having issues with your regexes.\r\n1. In the one you are using for split &lt;br&gt;\r\ni)it splits if there is a +&gt;=&lt; behind or before (lookahead &amp; look behind) so ++ will be split  as +,+. &lt;br&gt;\r\nii) +-/  &quot;-&quot; has a special meaning inside [] in regex it means match any character from the Unicode value of + till the Unicode value of /\r\n2. In the if-else section inside the matches you have used the unnecessary &quot;[]&quot; which means any one of the characters inside so &quot;[++]&quot; means match + character or + character \r\n\r\nSplit regex can be modified like this : &quot;([^+&gt;&lt;]+?=[-\\[\\](){}&lt;&gt;=,;+/*%|&amp;!])|((?&lt;=[-\\[\\](){}&lt;&gt;=,;/+*%|&amp;!])(?![+=]))&quot;\r\n\r\nand in the if-else section can be modified as shown in the working example\r\n\r\nA minimal working example is as below\r\n```java\r\nimport java.io.BufferedReader;\r\nimport java.io.FileReader;\r\nimport java.io.IOException;\r\n\r\npublic class Lexer {\r\n\r\n    public static void Tokenize(String fileName) {\r\n        BufferedReader reader = null;\r\n        try {\r\n            reader = new BufferedReader(new FileReader(fileName));\r\n            int r;\r\n            String token = &quot;&quot;;\r\n            while ((r = reader.read()) != -1) {\r\n                char ch = (char) r;\r\n                if (Character.isWhitespace(ch)) {\r\n                    if (!token.isBlank()) {\r\n                        String[] tokens = tokenizeToken(token);\r\n                        for (String t : tokens) {\r\n                            if (!t.isBlank()) {\r\n                                System.out.println(t);\r\n                            }\r\n                        }\r\n                    }\r\n                    token = &quot;&quot;;\r\n                } else {\r\n                    token += ch;\r\n                }\r\n            }\r\n            if (!token.isBlank()) {\r\n                String[] tokens = tokenizeToken(token);\r\n                for (String t : tokens) {\r\n                    if (!t.isBlank()) {\r\n                        System.out.println(t);\r\n                    }\r\n                }\r\n            }\r\n        } catch (IOException e) {\r\n            System.err.println(&quot;Error reading file: &quot; + e.getMessage());\r\n        } finally {\r\n            try {\r\n                if (reader != null) {\r\n                    reader.close();\r\n                }\r\n            } catch (IOException e) {\r\n                System.err.println(&quot;Error closing file: &quot; + e.getMessage());\r\n            }\r\n        }\r\n    }\r\n\r\n    private static String[] tokenizeToken(String token) {\r\n        String[] tokens = token.split(&quot;([^+&gt;&lt;]+?=[-\\\\[\\\\](){}&lt;&gt;=,;+/*%|&amp;!])|((?&lt;=[-\\\\[\\\\](){}&lt;&gt;=,;/+*%|&amp;!])(?![+=]))&quot;);\r\n        for (int i = 0; i &lt; tokens.length; i++) {\r\n            String t = tokens[i].trim();\r\n\r\n            if (t.matches(&quot;=&quot;)) {\r\n                tokens[i] = &quot;ASSIGN&quot;;\r\n            } else if (t.matches(&quot;[&lt;]&quot;)) {\r\n                tokens[i] = &quot;LT&quot;;\r\n            } else if (t.matches(&quot;[&gt;]&quot;)) {\r\n                tokens[i] = &quot;RT&quot;;\r\n            } else if (token.matches(&quot;[+]{2}&quot;)) {\r\n                tokens[i] = &quot;INC&quot;;\r\n            } else if (t.matches(&quot;[+]&quot;)) {\r\n                tokens[i] = &quot;ADD_OP&quot;;\r\n            } else if (token.matches(&quot;&gt;=&quot;)) {\r\n                tokens[i] = &quot;GE&quot;;\r\n            } else {\r\n                System.out.println(&quot;SYSTEM ERROR: INVALID IDENTIFIER NAME&quot;);\r\n            }\r\n        }\r\n\r\n        return tokens;\r\n    }\r\n}\r\n```","title":"Lexical Analyzer in Java. Operators Shouldn&#39;t be Tokenized as individuals like &#39;++&#39; or &#39;&gt;=&#39; and any unlisted tokens shouldnt print out anything","body":"<p>You are having issues with your regexes.</p>\n<ol>\n<li>In the one you are using for split <br>\ni)it splits if there is a +&gt;=&lt; behind or before (lookahead &amp; look behind) so ++ will be split  as +,+. <br>\nii) +-/  &quot;-&quot; has a special meaning inside [] in regex it means match any character from the Unicode value of + till the Unicode value of /</li>\n<li>In the if-else section inside the matches you have used the unnecessary &quot;[]&quot; which means any one of the characters inside so &quot;[++]&quot; means match + character or + character</li>\n</ol>\n<p>Split regex can be modified like this : &quot;([^+&gt;&lt;]+?=[-[](){}&lt;&gt;=,;+/<em>%|&amp;!])|((?&lt;=[-[](){}&lt;&gt;=,;/+</em>%|&amp;!])(?![+=]))&quot;</p>\n<p>and in the if-else section can be modified as shown in the working example</p>\n<p>A minimal working example is as below</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.BufferedReader;\nimport java.io.FileReader;\nimport java.io.IOException;\n\npublic class Lexer {\n\n    public static void Tokenize(String fileName) {\n        BufferedReader reader = null;\n        try {\n            reader = new BufferedReader(new FileReader(fileName));\n            int r;\n            String token = &quot;&quot;;\n            while ((r = reader.read()) != -1) {\n                char ch = (char) r;\n                if (Character.isWhitespace(ch)) {\n                    if (!token.isBlank()) {\n                        String[] tokens = tokenizeToken(token);\n                        for (String t : tokens) {\n                            if (!t.isBlank()) {\n                                System.out.println(t);\n                            }\n                        }\n                    }\n                    token = &quot;&quot;;\n                } else {\n                    token += ch;\n                }\n            }\n            if (!token.isBlank()) {\n                String[] tokens = tokenizeToken(token);\n                for (String t : tokens) {\n                    if (!t.isBlank()) {\n                        System.out.println(t);\n                    }\n                }\n            }\n        } catch (IOException e) {\n            System.err.println(&quot;Error reading file: &quot; + e.getMessage());\n        } finally {\n            try {\n                if (reader != null) {\n                    reader.close();\n                }\n            } catch (IOException e) {\n                System.err.println(&quot;Error closing file: &quot; + e.getMessage());\n            }\n        }\n    }\n\n    private static String[] tokenizeToken(String token) {\n        String[] tokens = token.split(&quot;([^+&gt;&lt;]+?=[-\\\\[\\\\](){}&lt;&gt;=,;+/*%|&amp;!])|((?&lt;=[-\\\\[\\\\](){}&lt;&gt;=,;/+*%|&amp;!])(?![+=]))&quot;);\n        for (int i = 0; i &lt; tokens.length; i++) {\n            String t = tokens[i].trim();\n\n            if (t.matches(&quot;=&quot;)) {\n                tokens[i] = &quot;ASSIGN&quot;;\n            } else if (t.matches(&quot;[&lt;]&quot;)) {\n                tokens[i] = &quot;LT&quot;;\n            } else if (t.matches(&quot;[&gt;]&quot;)) {\n                tokens[i] = &quot;RT&quot;;\n            } else if (token.matches(&quot;[+]{2}&quot;)) {\n                tokens[i] = &quot;INC&quot;;\n            } else if (t.matches(&quot;[+]&quot;)) {\n                tokens[i] = &quot;ADD_OP&quot;;\n            } else if (token.matches(&quot;&gt;=&quot;)) {\n                tokens[i] = &quot;GE&quot;;\n            } else {\n                System.out.println(&quot;SYSTEM ERROR: INVALID IDENTIFIER NAME&quot;);\n            }\n        }\n\n        return tokens;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":8627288,"reputation":97,"user_id":6460115,"display_name":"hamsoace"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":141,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":75528343,"answer_count":1,"score":-2,"last_activity_date":1677041618,"creation_date":1677028517,"question_id":75527419,"body_markdown":"I am using a Lexical analyzer to tokenize some operators, conditions, and syntaxes. My approach is checking each and every character and when it finds a space between characters, it tokenizes the combined characters. eg. when it finds &#39;String&#39; it tokenizes it as STR or &#39;;&#39; and tokenizes it as SEMI. so whenever it finds an operator like &#39;++&#39; it just tokenizes it as ADD_OP ADD_OP but I want it to tokenize it as one token i.e &#39;++&#39; should be INC or &#39;&gt;=&#39; it prints out GT ASSIGN rather than GE. here is my code:\r\n\r\n    import java.io.BufferedReader;\r\n    import java.io.FileReader;\r\n    import java.io.IOException;\r\n\r\n    public class Lexer {\r\n\r\n    public static void Tokenize(String fileName) {\r\n        BufferedReader reader = null;\r\n        try {\r\n            reader = new BufferedReader(new FileReader(fileName));\r\n            int r;\r\n            String token = &quot;&quot;;\r\n            while ((r = reader.read()) != -1) {\r\n                char ch = (char) r;\r\n                if (Character.isWhitespace(ch)) {\r\n                    if (!token.isBlank()) {\r\n                        String[] tokens = tokenizeToken(token);\r\n                        for (String t : tokens) {\r\n                            if (!t.isBlank()) {\r\n                                System.out.println(t);\r\n                            }\r\n                        }\r\n                    }\r\n                    token = &quot;&quot;;\r\n                } else {\r\n                    token += ch;\r\n                }\r\n            }\r\n            if (!token.isBlank()) {\r\n                String[] tokens = tokenizeToken(token);\r\n                for (String t : tokens) {\r\n                    if (!t.isBlank()) {\r\n                        System.out.println(t);\r\n                    }\r\n                }\r\n            }\r\n        } catch (IOException e) {\r\n            System.err.println(&quot;Error reading file: &quot; + e.getMessage());\r\n        } finally {\r\n            try {\r\n                if (reader != null) {\r\n                    reader.close();\r\n                }\r\n            } catch (IOException e) {\r\n                System.err.println(&quot;Error closing file: &quot; + e.getMessage());\r\n            }\r\n        }\r\n    }\r\n\r\n    private static String[] tokenizeToken(String token) {\r\n        String[] tokens = token.split(&quot;(?=[\\\\[\\\\](){}&lt;&gt;=,;+-/*%|&amp;!])|(?&lt;=[\\\\[\\\\](){}&lt;&gt;=,;+-/*%|&amp;!])&quot;);\r\n        for (int i = 0; i &lt; tokens.length; i++) {\r\n            String t = tokens[i].trim();\r\n            if (t.matches(&quot;procedure&quot;)) {\r\n                tokens[i] = &quot;PROC&quot;;\r\n            } else if (t.matches(&quot;int&quot;)) {\r\n                tokens[i] = &quot;INT&quot;;\r\n            } else if (t.matches(&quot;[0-9]+&quot;)) {\r\n                tokens[i] = &quot;INT_CONST&quot;;\r\n            } else if (t.matches(&quot;end&quot;)) {\r\n                tokens[i] = &quot;END&quot;;\r\n            } else if (t.matches(&quot;String&quot;) || t.matches(&quot;string&quot;)) {\r\n                tokens[i] = &quot;STR&quot;;\r\n            } else if (t.matches(&quot;[(]&quot;)) {\r\n                tokens[i] = &quot;LP&quot;;\r\n            } else if (t.matches(&quot;[)]&quot;)) {\r\n                tokens[i] = &quot;RP&quot;;\r\n            } else if (t.matches(&quot;\\&quot;.*\\&quot;&quot;)) {\r\n                tokens[i] = &quot;STR_CONST&quot;;\r\n            } else if (t.matches(&quot;if&quot;)) {\r\n                tokens[i] = &quot;IF&quot;;\r\n            } else if (t.matches(&quot;for&quot;)) {\r\n                tokens[i] = &quot;FOR&quot;;\r\n            } else if (t.matches(&quot;while&quot;)) {\r\n                tokens[i] = &quot;WHILE&quot;;\r\n            } else if (t.matches(&quot;return&quot;)) {\r\n                tokens[i] = &quot;RETURN&quot;;\r\n            } else if (t.matches(&quot;[;]&quot;)) {\r\n                tokens[i] = &quot;SEMI&quot;;\r\n            } else if (t.matches(&quot;do&quot;)) {\r\n                tokens[i] = &quot;DO&quot;;\r\n            } else if (t.matches(&quot;break&quot;)) {\r\n                tokens[i] = &quot;BREAK&quot;;\r\n            } else if (t.matches(&quot;[a-zA-Z][a-zA-Z0-9]*&quot;)) {\r\n                tokens[i] = &quot;IDENT&quot;;\r\n            } else if (t.matches(&quot;[=]&quot;)) {\r\n                tokens[i] = &quot;ASSIGN&quot;;\r\n            } else if (t.matches(&quot;[&lt;]&quot;)) {\r\n                tokens[i] = &quot;LT&quot;;\r\n            } else if (t.matches(&quot;[&gt;]&quot;)) {\r\n                tokens[i] = &quot;RT&quot;;\r\n            } else if (token.matches(&quot;[++]&quot;)) {\r\n                tokens[i] = &quot;INC&quot;;\r\n            } else if (t.matches(&quot;[+]&quot;)) {\r\n                tokens[i] = &quot;ADD_OP&quot;;\r\n            } else if (token.matches(&quot;[{]&quot;)) {\r\n                tokens[i] = &quot;RB&quot;;\r\n            } else if (token.matches(&quot;[}]&quot;)) {\r\n                tokens[i] = &quot;LB&quot;;\r\n            } else if (token.matches(&quot;[*]&quot;)) {\r\n                tokens[i] = &quot;MUL_OP&quot;;\r\n            } else if (token.matches(&quot;[/]&quot;)) {\r\n                tokens[i] = &quot;DIV_OP&quot;;\r\n            } else if (token.matches(&quot;[&gt;=]&quot;)) {\r\n                tokens[i] = &quot;GE&quot;;\r\n            } else {\r\n                System.out.println(&quot;SYSTEM ERROR: INVALID IDENTIFIER NAME&quot;);\r\n            }\r\n        }\r\n\r\n        return tokens;\r\n    }\r\n    }\r\nand here is the output:\r\n\r\n    PROC\r\n    IDENT\r\n    LP\r\n    INT\r\n    IDENT\r\n    RP\r\n    FOR\r\n    LP\r\n    INT\r\n    IDENT\r\n    ASSIGN\r\n    INT_CONST\r\n    SEMI\r\n    IDENT\r\n    LT\r\n    IDENT\r\n    SEMI\r\n    IDENT\r\n    ASSIGN\r\n    IDENT\r\n    ADD_OP\r\n    ADD_OP\r\n    RP\r\n    RB\r\n    IDENT\r\n    ASSIGN\r\n    IDENT\r\n    MUL_OP\r\n    LP\r\n    IDENT\r\n    DIV_OP\r\n    INT_CONST\r\n    RP\r\n    SEMI\r\n    IF\r\n    LP\r\n    IDENT\r\n    RT\r\n    ASSIGN\r\n    INT_CONST\r\n    RP\r\n    BREAK\r\n    SEMI\r\n    LB\r\n    RETURN\r\n    IDENT\r\n    SEMI\r\n    END\r\n    IDENT\r\n    INT\r\n    SYSTEM ERROR: INVALID IDENTIFIER NAME\r\n    9user\r\n    ASSIGN\r\n    INT_CONST\r\n    SEMI\r\nAlso if any syntax or operator isn&#39;t listed should not print out in the output. e.g. the 9user shouldn&#39;t be printed out.","title":"Lexical Analyzer in Java. Operators Shouldn&#39;t be Tokenized as individuals like &#39;++&#39; or &#39;&gt;=&#39; and any unlisted tokens shouldnt print out anything","body":"<p>I am using a Lexical analyzer to tokenize some operators, conditions, and syntaxes. My approach is checking each and every character and when it finds a space between characters, it tokenizes the combined characters. eg. when it finds 'String' it tokenizes it as STR or ';' and tokenizes it as SEMI. so whenever it finds an operator like '++' it just tokenizes it as ADD_OP ADD_OP but I want it to tokenize it as one token i.e '++' should be INC or '&gt;=' it prints out GT ASSIGN rather than GE. here is my code:</p>\n<pre><code>import java.io.BufferedReader;\nimport java.io.FileReader;\nimport java.io.IOException;\n\npublic class Lexer {\n\npublic static void Tokenize(String fileName) {\n    BufferedReader reader = null;\n    try {\n        reader = new BufferedReader(new FileReader(fileName));\n        int r;\n        String token = &quot;&quot;;\n        while ((r = reader.read()) != -1) {\n            char ch = (char) r;\n            if (Character.isWhitespace(ch)) {\n                if (!token.isBlank()) {\n                    String[] tokens = tokenizeToken(token);\n                    for (String t : tokens) {\n                        if (!t.isBlank()) {\n                            System.out.println(t);\n                        }\n                    }\n                }\n                token = &quot;&quot;;\n            } else {\n                token += ch;\n            }\n        }\n        if (!token.isBlank()) {\n            String[] tokens = tokenizeToken(token);\n            for (String t : tokens) {\n                if (!t.isBlank()) {\n                    System.out.println(t);\n                }\n            }\n        }\n    } catch (IOException e) {\n        System.err.println(&quot;Error reading file: &quot; + e.getMessage());\n    } finally {\n        try {\n            if (reader != null) {\n                reader.close();\n            }\n        } catch (IOException e) {\n            System.err.println(&quot;Error closing file: &quot; + e.getMessage());\n        }\n    }\n}\n\nprivate static String[] tokenizeToken(String token) {\n    String[] tokens = token.split(&quot;(?=[\\\\[\\\\](){}&lt;&gt;=,;+-/*%|&amp;!])|(?&lt;=[\\\\[\\\\](){}&lt;&gt;=,;+-/*%|&amp;!])&quot;);\n    for (int i = 0; i &lt; tokens.length; i++) {\n        String t = tokens[i].trim();\n        if (t.matches(&quot;procedure&quot;)) {\n            tokens[i] = &quot;PROC&quot;;\n        } else if (t.matches(&quot;int&quot;)) {\n            tokens[i] = &quot;INT&quot;;\n        } else if (t.matches(&quot;[0-9]+&quot;)) {\n            tokens[i] = &quot;INT_CONST&quot;;\n        } else if (t.matches(&quot;end&quot;)) {\n            tokens[i] = &quot;END&quot;;\n        } else if (t.matches(&quot;String&quot;) || t.matches(&quot;string&quot;)) {\n            tokens[i] = &quot;STR&quot;;\n        } else if (t.matches(&quot;[(]&quot;)) {\n            tokens[i] = &quot;LP&quot;;\n        } else if (t.matches(&quot;[)]&quot;)) {\n            tokens[i] = &quot;RP&quot;;\n        } else if (t.matches(&quot;\\&quot;.*\\&quot;&quot;)) {\n            tokens[i] = &quot;STR_CONST&quot;;\n        } else if (t.matches(&quot;if&quot;)) {\n            tokens[i] = &quot;IF&quot;;\n        } else if (t.matches(&quot;for&quot;)) {\n            tokens[i] = &quot;FOR&quot;;\n        } else if (t.matches(&quot;while&quot;)) {\n            tokens[i] = &quot;WHILE&quot;;\n        } else if (t.matches(&quot;return&quot;)) {\n            tokens[i] = &quot;RETURN&quot;;\n        } else if (t.matches(&quot;[;]&quot;)) {\n            tokens[i] = &quot;SEMI&quot;;\n        } else if (t.matches(&quot;do&quot;)) {\n            tokens[i] = &quot;DO&quot;;\n        } else if (t.matches(&quot;break&quot;)) {\n            tokens[i] = &quot;BREAK&quot;;\n        } else if (t.matches(&quot;[a-zA-Z][a-zA-Z0-9]*&quot;)) {\n            tokens[i] = &quot;IDENT&quot;;\n        } else if (t.matches(&quot;[=]&quot;)) {\n            tokens[i] = &quot;ASSIGN&quot;;\n        } else if (t.matches(&quot;[&lt;]&quot;)) {\n            tokens[i] = &quot;LT&quot;;\n        } else if (t.matches(&quot;[&gt;]&quot;)) {\n            tokens[i] = &quot;RT&quot;;\n        } else if (token.matches(&quot;[++]&quot;)) {\n            tokens[i] = &quot;INC&quot;;\n        } else if (t.matches(&quot;[+]&quot;)) {\n            tokens[i] = &quot;ADD_OP&quot;;\n        } else if (token.matches(&quot;[{]&quot;)) {\n            tokens[i] = &quot;RB&quot;;\n        } else if (token.matches(&quot;[}]&quot;)) {\n            tokens[i] = &quot;LB&quot;;\n        } else if (token.matches(&quot;[*]&quot;)) {\n            tokens[i] = &quot;MUL_OP&quot;;\n        } else if (token.matches(&quot;[/]&quot;)) {\n            tokens[i] = &quot;DIV_OP&quot;;\n        } else if (token.matches(&quot;[&gt;=]&quot;)) {\n            tokens[i] = &quot;GE&quot;;\n        } else {\n            System.out.println(&quot;SYSTEM ERROR: INVALID IDENTIFIER NAME&quot;);\n        }\n    }\n\n    return tokens;\n}\n}\n</code></pre>\n<p>and here is the output:</p>\n<pre><code>PROC\nIDENT\nLP\nINT\nIDENT\nRP\nFOR\nLP\nINT\nIDENT\nASSIGN\nINT_CONST\nSEMI\nIDENT\nLT\nIDENT\nSEMI\nIDENT\nASSIGN\nIDENT\nADD_OP\nADD_OP\nRP\nRB\nIDENT\nASSIGN\nIDENT\nMUL_OP\nLP\nIDENT\nDIV_OP\nINT_CONST\nRP\nSEMI\nIF\nLP\nIDENT\nRT\nASSIGN\nINT_CONST\nRP\nBREAK\nSEMI\nLB\nRETURN\nIDENT\nSEMI\nEND\nIDENT\nINT\nSYSTEM ERROR: INVALID IDENTIFIER NAME\n9user\nASSIGN\nINT_CONST\nSEMI\n</code></pre>\n<p>Also if any syntax or operator isn't listed should not print out in the output. e.g. the 9user shouldn't be printed out.</p>\n"},{"tags":["java","spring-boot","date","time","simpledateformat"],"comments":[{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1676971057,"post_id":75518330,"comment_id":133239406,"body_markdown":"I strongly recommend that you don’t use `Timestamp`, `Date`, `DatFormat` and `SimpleDateFormat`. Those classes are poorly designed, the last two in particular notoriously troublesome, and all are long outdated. Use `LocalDateTime` and `DateTimeFormatter` from [java.time, the modern Java date and time API](https://docs.oracle.com/javase/tutorial/datetime/index.html).","body":"I strongly recommend that you don’t use <code>Timestamp</code>, <code>Date</code>, <code>DatFormat</code> and <code>SimpleDateFormat</code>. Those classes are poorly designed, the last two in particular notoriously troublesome, and all are long outdated. Use <code>LocalDateTime</code> and <code>DateTimeFormatter</code> from <a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">java.time, the modern Java date and time API</a>."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1676971112,"post_id":75518330,"comment_id":133239427,"body_markdown":"It’s no doubt a time zone issue. (UTF-8 is a character encoding, not a time zone. Perhaps you mean that it is at UTC+8 or UTC-8.)","body":"It’s no doubt a time zone issue. (UTF-8 is a character encoding, not a time zone. Perhaps you mean that it is at UTC+8 or UTC-8.)"},{"owner":{"account_id":23998094,"reputation":1,"user_id":17983389,"display_name":"黃奕翔"},"score":0,"creation_date":1676971264,"post_id":75518330,"comment_id":133239496,"body_markdown":"8 hours ahead of my time zone, but the return is a string, will this also cause problems","body":"8 hours ahead of my time zone, but the return is a string, will this also cause problems"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1676971348,"post_id":75518330,"comment_id":133239523,"body_markdown":"Is the data type in the database `timestamp with time zone` or perhaps without time zone? For a timestamp prefer with time zone so that it truly defines a point in time. And what are the database time zone and the database session time zone?","body":"Is the data type in the database <code>timestamp with time zone</code> or perhaps without time zone? For a timestamp prefer with time zone so that it truly defines a point in time. And what are the database time zone and the database session time zone?"}],"answers":[{"tags":[],"owner":{"account_id":24323550,"reputation":1,"user_id":18263470,"display_name":"user18263470"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676971597,"creation_date":1676971597,"answer_id":75518502,"question_id":75518330,"body_markdown":"Set the time zone of the database to be consistent with your region.\r\nI guess you are in Dongba District. If you are a MySQL database, you can set it this way \r\n\r\n    set global time_zone = ‘+8:00’;","title":"The date obtained by sprigboot console is inconsistent with the date obtained by the browser","body":"<p>Set the time zone of the database to be consistent with your region.\nI guess you are in Dongba District. If you are a MySQL database, you can set it this way</p>\n<pre><code>set global time_zone = ‘+8:00’;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23998094,"reputation":1,"user_id":17983389,"display_name":"黃奕翔"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677034860,"creation_date":1677034860,"answer_id":75527861,"question_id":75518330,"body_markdown":"Everyone, I found the answer. The reason is that the time zone of my computer system is UTC+8, and the time zone of my subordinates in JENKINS is UTC+0, so there will be a difference of 8 hours. The following is my approach. Set the entire springboot before initialization. Time zone\r\n\r\n```\r\n@Configuration\r\npublic class GlobalZoneConfig {\r\n\r\n    @PostConstruct\r\n    void started() {\r\n        TimeZone timeZone = TimeZone.getTimeZone(&quot;Asia/Taipei&quot;);\r\n        TimeZone.setDefault(timeZone);\r\n    }\r\n}\r\n```","title":"The date obtained by sprigboot console is inconsistent with the date obtained by the browser","body":"<p>Everyone, I found the answer. The reason is that the time zone of my computer system is UTC+8, and the time zone of my subordinates in JENKINS is UTC+0, so there will be a difference of 8 hours. The following is my approach. Set the entire springboot before initialization. Time zone</p>\n<pre><code>@Configuration\npublic class GlobalZoneConfig {\n\n    @PostConstruct\n    void started() {\n        TimeZone timeZone = TimeZone.getTimeZone(&quot;Asia/Taipei&quot;);\n        TimeZone.setDefault(timeZone);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":23998094,"reputation":1,"user_id":17983389,"display_name":"黃奕翔"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1677041535,"creation_date":1676970614,"question_id":75518330,"body_markdown":"When I get a timestamp date data from the database, I convert it to the format I want through simpledateformat, and everything is normal here, and the date and time are correct when I test it with postman, but when I deploy it, when the program is in The date output after simpledateformat will be 8 hours less than now\r\nMy country timezone is in UTC-8\r\n\r\n```\r\nprivate String timestampToDateFormat(Timestamp timestamp) {\r\n        Date date = new Date(timestamp.getTime());\r\n        DateFormat df = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm&quot;, Locale.TAIWAN);\r\n        return df.format(date);\r\n    }\r\n```\r\n[CONSOLE TIME OUTPUT][1]\r\n\r\n\r\nThe time displayed on the browser after deploying\r\n\r\n[browser time][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/S1LKK.jpg\r\n  [2]: https://i.stack.imgur.com/0HVEq.jpg","title":"The date obtained by sprigboot console is inconsistent with the date obtained by the browser","body":"<p>When I get a timestamp date data from the database, I convert it to the format I want through simpledateformat, and everything is normal here, and the date and time are correct when I test it with postman, but when I deploy it, when the program is in The date output after simpledateformat will be 8 hours less than now\nMy country timezone is in UTC-8</p>\n<pre><code>private String timestampToDateFormat(Timestamp timestamp) {\n        Date date = new Date(timestamp.getTime());\n        DateFormat df = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm&quot;, Locale.TAIWAN);\n        return df.format(date);\n    }\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/S1LKK.jpg\" rel=\"nofollow noreferrer\">CONSOLE TIME OUTPUT</a></p>\n<p>The time displayed on the browser after deploying</p>\n<p><a href=\"https://i.stack.imgur.com/0HVEq.jpg\" rel=\"nofollow noreferrer\">browser time</a></p>\n"},{"tags":["java","spring","hibernate"],"answers":[{"tags":[],"owner":{"account_id":22019476,"reputation":41,"user_id":16288509,"display_name":"Pirooz Azar Abad"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677041245,"creation_date":1677041245,"answer_id":75528375,"question_id":75525791,"body_markdown":"The java.lang.ClassNotFoundException: jakarta.persistence.spi.PersistenceProvider error occurs because the jakarta.persistence.spi.PersistenceProvider class is not found on the classpath at runtime.\r\n\r\nIn Hibernate 6, there have been some changes to the way JPA APIs are packaged and organized, which may cause issues when upgrading from previous versions. One possible cause of this issue is that you are missing a required dependency for the jakarta.persistence.spi.PersistenceProvider class.\r\n\r\nTo resolve this issue, you can try adding the following dependency to your project&#39;s build file (e.g. pom.xml for Maven or build.gradle for Gradle):\r\n&lt;br&gt;\r\nFor Maven :\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;jakarta.persistence&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jakarta.persistence-api&lt;/artifactId&gt;\r\n        &lt;version&gt;3.0.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\nFor Gradle : \r\n\r\n    implementation &#39;jakarta.persistence:jakarta.persistence-api:3.0.0&#39;\r\n\r\n\r\n This should provide the necessary JPA API classes and resolve the ClassNotFoundException.\r\n\r\nIf this doesn&#39;t resolve the issue, you may also need to check if any other dependencies are conflicting with the Hibernate 6 version you are using.\r\n\r\nI hope this helps!","title":"nested exception is java.lang.NoClassDefFoundError: jakarta/persistence/spi/PersistenceProvider","body":"<p>The java.lang.ClassNotFoundException: jakarta.persistence.spi.PersistenceProvider error occurs because the jakarta.persistence.spi.PersistenceProvider class is not found on the classpath at runtime.</p>\n<p>In Hibernate 6, there have been some changes to the way JPA APIs are packaged and organized, which may cause issues when upgrading from previous versions. One possible cause of this issue is that you are missing a required dependency for the jakarta.persistence.spi.PersistenceProvider class.</p>\n<p>To resolve this issue, you can try adding the following dependency to your project's build file (e.g. pom.xml for Maven or build.gradle for Gradle):\n<br>\nFor Maven :</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;jakarta.persistence&lt;/groupId&gt;\n    &lt;artifactId&gt;jakarta.persistence-api&lt;/artifactId&gt;\n    &lt;version&gt;3.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>For Gradle :</p>\n<pre><code>implementation 'jakarta.persistence:jakarta.persistence-api:3.0.0'\n</code></pre>\n<p>This should provide the necessary JPA API classes and resolve the ClassNotFoundException.</p>\n<p>If this doesn't resolve the issue, you may also need to check if any other dependencies are conflicting with the Hibernate 6 version you are using.</p>\n<p>I hope this helps!</p>\n"}],"owner":{"account_id":26802194,"reputation":11,"user_id":20393990,"display_name":"vaishali jain"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1375,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1677041245,"creation_date":1677012718,"question_id":75525791,"body_markdown":"java.lang.ClassNotFoundException: jakarta.persistence.spi.PersistenceProvider when upgrading org.hibernate:hibernate-core from version 5.6.14.Final to 6.2.0.CR2\r\nI am running my application on java11","title":"nested exception is java.lang.NoClassDefFoundError: jakarta/persistence/spi/PersistenceProvider","body":"<p>java.lang.ClassNotFoundException: jakarta.persistence.spi.PersistenceProvider when upgrading org.hibernate:hibernate-core from version 5.6.14.Final to 6.2.0.CR2\nI am running my application on java11</p>\n"},{"tags":["java","api","keycloak","user-management"],"answers":[{"comments":[{"owner":{"account_id":17099901,"reputation":1129,"user_id":12374077,"display_name":"Sifat Amin"},"score":0,"creation_date":1654678421,"post_id":55673148,"comment_id":128145677,"body_markdown":"can u exaplain why the url is localhost:8080, from my understanding keyclock has a different ip address something like http://43.224.110.84:8080","body":"can u exaplain why the url is localhost:8080, from my understanding keyclock has a different ip address something like <a href=\"http://43.224.110.84:8080\" rel=\"nofollow noreferrer\">43.224.110.84:8080</a>"}],"tags":[],"owner":{"account_id":246295,"reputation":11636,"user_id":520359,"accept_rate":87,"display_name":"Lachezar Balev"},"comment_count":1,"down_vote_count":1,"up_vote_count":27,"is_accepted":true,"score":26,"last_activity_date":1618413598,"creation_date":1555228626,"answer_id":55673148,"question_id":55643277,"body_markdown":"You can use the Admin REST API. The detailed description of the relevant API is available [here][1]. Also you can use the JAVA wrapper API. Please find couple of examples below.\r\n\r\n**Example 1, REST:**\r\n\r\nGet an access token:\r\n\r\n    curl \\\r\n      -d &quot;client_id=admin-cli&quot; \\\r\n      -d &quot;username=admin&quot; \\\r\n      -d &quot;password=secret&quot; \\\r\n      -d &quot;grant_type=password&quot; \\\r\n      &quot;http://localhost:8080/auth/realms/master/protocol/openid-connect/token&quot;\r\n\r\nGet all users:\r\n\r\n    curl \\\r\n      -H &quot;Authorization: bearer eyJhbGciOiJSUzI....&quot; \\\r\n      &quot;http://localhost:8080/auth/admin/realms/master/users&quot;\r\n\r\nSample output:\r\n\r\n    [\r\n         {\r\n            &quot;id&quot;:&quot;349f67de-36e6-4552-ac54-e52085109616&quot;,\r\n            &quot;username&quot;:&quot;admin&quot;,\r\n            &quot;enabled&quot;:true,\r\n            ...\r\n         },\r\n         {\r\n            &quot;id&quot;:&quot;08afb701-fae5-40b4-8895-e387ba1902fb&quot;,\r\n            &quot;username&quot;:&quot;lbalev&quot;,\r\n            &quot;enabled&quot;:true,\r\n            ....\r\n         }\r\n      ]\r\n\r\nGet a user based by user id:\r\n\r\n    curl \\\r\n      -H &quot;Authorization: bearer eyJhbGciOiJSU....&quot; \\\r\n      &quot;http://localhost:8080/auth/admin/realms/master/users/349f67de-36e6-4552-ac54-e52085109616&quot;\r\n\r\n**Example 2, JAVA API:**\r\n\r\nGet a user based on user ID:\r\n\r\n    public class TestUserAccess {\r\n    \r\n      private static final String SERVER_URL = &quot;http://localhost:8080/auth&quot;;\r\n      private static final String REALM = &quot;master&quot;;\r\n      private static final String USERNAME = &quot;admin&quot;;\r\n      private static final String PASSWORD = &quot;secret&quot;;\r\n      private static final String CLIENT_ID = &quot;admin-cli&quot;;\r\n    \r\n      public static void main(String[] args) {\r\n    \r\n        Keycloak keycloak = KeycloakBuilder\r\n            .builder()\r\n            .serverUrl(SERVER_URL)\r\n            .realm(REALM)\r\n            .username(USERNAME)\r\n            .password(PASSWORD)\r\n            .clientId(CLIENT_ID)\r\n            .resteasyClient(new ResteasyClientBuilder().connectionPoolSize(10).build())\r\n            .build();\r\n    \r\n        UsersResource usersResource = keycloak.realm(REALM).users();\r\n        UserResource userResource = usersResource.get(&quot;08afb701-fae5-40b4-8895-e387ba1902fb&quot;);\r\n        System.out.println(userResource.toRepresentation().getEmail());\r\n      }\r\n    }\r\n\r\nThe relevant dependencies for the example above are (please note that the versions might not be up-to-date):\r\n\r\n    dependencies {\r\n        compile group: &#39;org.keycloak&#39;, name: &#39;keycloak-admin-client&#39;, version: &#39;3.3.0.CR2&#39;\r\n        compile group: &#39;org.jboss.resteasy&#39;, name: &#39;resteasy-jaxrs&#39;, version: &#39;3.1.4.Final&#39;\r\n        compile group: &#39;org.jboss.resteasy&#39;, name: &#39;resteasy-client&#39;, version: &#39;3.1.4.Final&#39;\r\n        compile group: &#39;org.jboss.resteasy&#39;, name: &#39;resteasy-jackson2-provider&#39;, version: &#39;3.1.4.Final&#39;\r\n    }\r\n\r\n\r\n  [1]: https://www.keycloak.org/docs-api/5.0/rest-api/index.html#_users_resource\r\n","title":"How can I get other users info(username, firstname) by id? [Keycloak]","body":"<p>You can use the Admin REST API. The detailed description of the relevant API is available <a href=\"https://www.keycloak.org/docs-api/5.0/rest-api/index.html#_users_resource\" rel=\"noreferrer\">here</a>. Also you can use the JAVA wrapper API. Please find couple of examples below.</p>\n<p><strong>Example 1, REST:</strong></p>\n<p>Get an access token:</p>\n<pre><code>curl \\\n  -d &quot;client_id=admin-cli&quot; \\\n  -d &quot;username=admin&quot; \\\n  -d &quot;password=secret&quot; \\\n  -d &quot;grant_type=password&quot; \\\n  &quot;http://localhost:8080/auth/realms/master/protocol/openid-connect/token&quot;\n</code></pre>\n<p>Get all users:</p>\n<pre><code>curl \\\n  -H &quot;Authorization: bearer eyJhbGciOiJSUzI....&quot; \\\n  &quot;http://localhost:8080/auth/admin/realms/master/users&quot;\n</code></pre>\n<p>Sample output:</p>\n<pre><code>[\n     {\n        &quot;id&quot;:&quot;349f67de-36e6-4552-ac54-e52085109616&quot;,\n        &quot;username&quot;:&quot;admin&quot;,\n        &quot;enabled&quot;:true,\n        ...\n     },\n     {\n        &quot;id&quot;:&quot;08afb701-fae5-40b4-8895-e387ba1902fb&quot;,\n        &quot;username&quot;:&quot;lbalev&quot;,\n        &quot;enabled&quot;:true,\n        ....\n     }\n  ]\n</code></pre>\n<p>Get a user based by user id:</p>\n<pre><code>curl \\\n  -H &quot;Authorization: bearer eyJhbGciOiJSU....&quot; \\\n  &quot;http://localhost:8080/auth/admin/realms/master/users/349f67de-36e6-4552-ac54-e52085109616&quot;\n</code></pre>\n<p><strong>Example 2, JAVA API:</strong></p>\n<p>Get a user based on user ID:</p>\n<pre><code>public class TestUserAccess {\n\n  private static final String SERVER_URL = &quot;http://localhost:8080/auth&quot;;\n  private static final String REALM = &quot;master&quot;;\n  private static final String USERNAME = &quot;admin&quot;;\n  private static final String PASSWORD = &quot;secret&quot;;\n  private static final String CLIENT_ID = &quot;admin-cli&quot;;\n\n  public static void main(String[] args) {\n\n    Keycloak keycloak = KeycloakBuilder\n        .builder()\n        .serverUrl(SERVER_URL)\n        .realm(REALM)\n        .username(USERNAME)\n        .password(PASSWORD)\n        .clientId(CLIENT_ID)\n        .resteasyClient(new ResteasyClientBuilder().connectionPoolSize(10).build())\n        .build();\n\n    UsersResource usersResource = keycloak.realm(REALM).users();\n    UserResource userResource = usersResource.get(&quot;08afb701-fae5-40b4-8895-e387ba1902fb&quot;);\n    System.out.println(userResource.toRepresentation().getEmail());\n  }\n}\n</code></pre>\n<p>The relevant dependencies for the example above are (please note that the versions might not be up-to-date):</p>\n<pre><code>dependencies {\n    compile group: 'org.keycloak', name: 'keycloak-admin-client', version: '3.3.0.CR2'\n    compile group: 'org.jboss.resteasy', name: 'resteasy-jaxrs', version: '3.1.4.Final'\n    compile group: 'org.jboss.resteasy', name: 'resteasy-client', version: '3.1.4.Final'\n    compile group: 'org.jboss.resteasy', name: 'resteasy-jackson2-provider', version: '3.1.4.Final'\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":9911207,"reputation":202,"user_id":7742794,"display_name":"Shmuser"},"score":0,"creation_date":1606212017,"post_id":63972351,"comment_id":114887765,"body_markdown":"Best solution for searching by username, thanks! Unfortunately its not working with id param.","body":"Best solution for searching by username, thanks! Unfortunately its not working with id param."},{"owner":{"account_id":7374510,"reputation":124,"user_id":5613658,"display_name":"sjakovac"},"score":1,"creation_date":1626552622,"post_id":63972351,"comment_id":120925528,"body_markdown":"For retrieving user representation by user id use `/auth/admin/realms/{realm-name}/users/{id}` endpoint. [Source](https://www.keycloak.org/docs-api/12.0/rest-api/#_user_resources)","body":"For retrieving user representation by user id use <code>&#47;auth&#47;admin&#47;realms&#47;{realm-name}&#47;users&#47;{id}</code> endpoint. <a href=\"https://www.keycloak.org/docs-api/12.0/rest-api/#_user_resources\" rel=\"nofollow noreferrer\">Source</a>"},{"owner":{"account_id":7673543,"reputation":3490,"user_id":5815054,"accept_rate":50,"display_name":"hb0"},"score":0,"creation_date":1693808275,"post_id":63972351,"comment_id":135804129,"body_markdown":"@Shmuser in case u can&#39;t find a specific, existing user, you might not have the permissions to see this user or you are in the wrong realm, e.g. u use master in the url instead of the realm the user is actually in.","body":"@Shmuser in case u can&#39;t find a specific, existing user, you might not have the permissions to see this user or you are in the wrong realm, e.g. u use master in the url instead of the realm the user is actually in."}],"tags":[],"owner":{"account_id":11698628,"reputation":107,"user_id":8564538,"display_name":"Nikhil Shinde"},"comment_count":3,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1646030933,"creation_date":1600541809,"answer_id":63972351,"question_id":55643277,"body_markdown":"The is simple method as well, because in above answer all the user info is getting fetched which is not the proper way because in case thousands of users it will be heavy call.\r\n\r\nso just pass username as query parameter\r\n\r\n    GET: http://localhost:8080/auth/admin/realms/{real-name}/users?username=testUser\r\n\r\nmake sure you user admin access token for the call ","title":"How can I get other users info(username, firstname) by id? [Keycloak]","body":"<p>The is simple method as well, because in above answer all the user info is getting fetched which is not the proper way because in case thousands of users it will be heavy call.</p>\n<p>so just pass username as query parameter</p>\n<pre><code>GET: http://localhost:8080/auth/admin/realms/{real-name}/users?username=testUser\n</code></pre>\n<p>make sure you user admin access token for the call</p>\n"},{"comments":[{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1635538576,"post_id":69771054,"comment_id":123334543,"body_markdown":"You answer seems very similar with the which one that you mentionned. What did you add to it ?","body":"You answer seems very similar with the which one that you mentionned. What did you add to it ?"},{"owner":{"account_id":23183713,"reputation":41,"user_id":17281180,"display_name":"Sathish Kumar"},"score":2,"creation_date":1636900217,"post_id":69771054,"comment_id":123675536,"body_markdown":"The second url gives the exact user rather than a list of look a like user.","body":"The second url gives the exact user rather than a list of look a like user."},{"owner":{"account_id":1669453,"reputation":2017,"user_id":1536197,"accept_rate":21,"display_name":"Hernaldo Gonzalez"},"score":1,"creation_date":1651153863,"post_id":69771054,"comment_id":127299985,"body_markdown":"thanks, this works for me: http://IP:8080/admin/realms/master/users?exact=true&amp;username=myuser  in my v17.01 put /auth in path give me error.","body":"thanks, this works for me: <a href=\"http://IP:8080/admin/realms/master/users?exact=true&amp;username=myuser\" rel=\"nofollow noreferrer\">IP:8080/admin/realms/master/&hellip;</a>  in my v17.01 put /auth in path give me error."}],"tags":[],"owner":{"account_id":23183713,"reputation":41,"user_id":17281180,"display_name":"Sathish Kumar"},"comment_count":3,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1635614772,"creation_date":1635519840,"answer_id":69771054,"question_id":55643277,"body_markdown":"Thanks @Nikhil Shinde for sharing the restapi endpoint. \r\n\r\nLike he said the below will give look a like users. \r\n\r\n```\r\nGET: http://localhost:8080/auth/admin/realms/{real-name}/users?username=testUser\r\n````\r\n\r\nIf you want exact username match, then try with exact=true \r\n```\r\nGET: http://localhost:8080/auth/admin/realms/{real-name}/users?username=testUser&amp;exact=true\r\n```\r\nSource : https://www.keycloak.org/docs-api/15.0/rest-api/index.html#_users_resource","title":"How can I get other users info(username, firstname) by id? [Keycloak]","body":"<p>Thanks @Nikhil Shinde for sharing the restapi endpoint.</p>\n<p>Like he said the below will give look a like users.</p>\n<pre><code>GET: http://localhost:8080/auth/admin/realms/{real-name}/users?username=testUser\n</code></pre>\n<p>If you want exact username match, then try with exact=true</p>\n<pre><code>GET: http://localhost:8080/auth/admin/realms/{real-name}/users?username=testUser&amp;exact=true\n</code></pre>\n<p>Source : <a href=\"https://www.keycloak.org/docs-api/15.0/rest-api/index.html#_users_resource\" rel=\"nofollow noreferrer\">https://www.keycloak.org/docs-api/15.0/rest-api/index.html#_users_resource</a></p>\n"},{"tags":[],"owner":{"account_id":14285405,"reputation":140,"user_id":10318865,"display_name":"Muhammad Haseeb"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675257083,"creation_date":1675257083,"answer_id":75310679,"question_id":55643277,"body_markdown":"Keycloak Rest API\r\n\r\n \r\n\r\nVersion &gt; 17 Quarkus base\r\n\r\n    // Below will return&#39;s look a like users\r\n    GET: http://localhost:8080/admin/realms/{real-name}/users?username=testUser\r\n    \r\n    // Below Will return&#39;s exact same user\r\n    GET: http://localhost:8080/admin/realms/{real-name}/users?username=testUser&amp;exact=true\r\n\r\nFor Legacy Version use /auth/ in url\r\n\r\n    // Below will return&#39;s look a like users\r\n    GET: http://localhost:8080/auth/admin/realms/{real-name}/users?username=testUser\r\n    \r\n    // Below Will return&#39;s exact same user\r\n    GET: http://localhost:8080/auth/admin/realms/{real-name}/users?username=testUser&amp;exact=true\r\n\r\n","title":"How can I get other users info(username, firstname) by id? [Keycloak]","body":"<p>Keycloak Rest API</p>\n<p>Version &gt; 17 Quarkus base</p>\n<pre><code>// Below will return's look a like users\nGET: http://localhost:8080/admin/realms/{real-name}/users?username=testUser\n\n// Below Will return's exact same user\nGET: http://localhost:8080/admin/realms/{real-name}/users?username=testUser&amp;exact=true\n</code></pre>\n<p>For Legacy Version use /auth/ in url</p>\n<pre><code>// Below will return's look a like users\nGET: http://localhost:8080/auth/admin/realms/{real-name}/users?username=testUser\n\n// Below Will return's exact same user\nGET: http://localhost:8080/auth/admin/realms/{real-name}/users?username=testUser&amp;exact=true\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3551586,"reputation":2743,"user_id":2966331,"display_name":"Mario Eis"},"score":0,"creation_date":1696927410,"post_id":75528219,"comment_id":136211901,"body_markdown":"Nice! Works flawless! I would like to know more about this. Does anybody know if this is somewhere in the docs? Cant find it there.","body":"Nice! Works flawless! I would like to know more about this. Does anybody know if this is somewhere in the docs? Cant find it there."}],"tags":[],"owner":{"account_id":14710490,"reputation":108,"user_id":10623971,"display_name":"Gayan Kodithuwakku"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1677040438,"creation_date":1677039377,"answer_id":75528219,"question_id":55643277,"body_markdown":"You can just simply search by id in search bar of the keycloak admin console,\r\nlike this,\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/urPXP.png\r\n\r\n    id:ac796f21-c4ef-4182-a70a-970bac598bd6\r\n\r\nUse `id:` before enter the user id.\r\n\r\nif user id is 12345\r\n\r\n**Search by id,**\r\n\r\n    id:12345&#160;\r\n\r\n**Assume you have this user**&lt;br&gt;\r\nuser01 - gayankod@gmail.com\r\n\r\n**Search by email or username with wildcard**\r\n\r\n    user%\r\n    %gmail.com\r\n    %kod%","title":"How can I get other users info(username, firstname) by id? [Keycloak]","body":"<p>You can just simply search by id in search bar of the keycloak admin console,\nlike this,\n<a href=\"https://i.stack.imgur.com/urPXP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/urPXP.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>id:ac796f21-c4ef-4182-a70a-970bac598bd6\n</code></pre>\n<p>Use <code>id:</code> before enter the user id.</p>\n<p>if user id is 12345</p>\n<p><strong>Search by id,</strong></p>\n<pre><code>id:12345 \n</code></pre>\n<p><strong>Assume you have this user</strong><br>\nuser01 - gayankod@gmail.com</p>\n<p><strong>Search by email or username with wildcard</strong></p>\n<pre><code>user%\n%gmail.com\n%kod%\n</code></pre>\n"}],"owner":{"account_id":10087273,"reputation":335,"user_id":7455400,"display_name":"User6300"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49972,"favorite_count":0,"down_vote_count":0,"up_vote_count":21,"accepted_answer_id":55673148,"answer_count":5,"score":21,"last_activity_date":1677040438,"creation_date":1555032974,"question_id":55643277,"body_markdown":"How can I get user keycloak attributes (username, firstname, email...) based on user id? \r\nThe user I&#39;m using in the Keycloak session has already the role &lt;i&gt;view-users&lt;/i&gt; assigned so I should be able to list at least all users, is there any Keycloak class that I can use?\r\n\r\nWhat I&#39;m trying to achieve here is to avoid to replicate the keycloak users database to another local database, but doesn&#39;t seem possible to access any other user info, besides the one in the current session...","title":"How can I get other users info(username, firstname) by id? [Keycloak]","body":"<p>How can I get user keycloak attributes (username, firstname, email...) based on user id? \nThe user I'm using in the Keycloak session has already the role <i>view-users</i> assigned so I should be able to list at least all users, is there any Keycloak class that I can use?</p>\n\n<p>What I'm trying to achieve here is to avoid to replicate the keycloak users database to another local database, but doesn't seem possible to access any other user info, besides the one in the current session...</p>\n"},{"tags":["java","api","sqlite","android-studio","okhttp"],"answers":[{"tags":[],"owner":{"account_id":19040401,"reputation":98,"user_id":13900631,"display_name":"Nandala Abhinav"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1653650960,"creation_date":1653650960,"answer_id":72404741,"question_id":72388842,"body_markdown":"You have no way to spy on the remote DB &quot;unless you make API calls on a regular basis you need to sample it every few minutes to truly know if it has changed&quot; **OR** &quot;you assume that every time you use the app your remote DB changed and sync it&quot; if even this is not a viable solution for you and you need it as it updates. You need to use a Realtime DB","title":"Update local DB only when there is a change in remote DB (Android Studio)","body":"<p>You have no way to spy on the remote DB &quot;unless you make API calls on a regular basis you need to sample it every few minutes to truly know if it has changed&quot; <strong>OR</strong> &quot;you assume that every time you use the app your remote DB changed and sync it&quot; if even this is not a viable solution for you and you need it as it updates. You need to use a Realtime DB</p>\n"},{"comments":[{"owner":{"account_id":24267715,"reputation":11,"user_id":18216328,"display_name":"Nataly Ayyad"},"score":1,"creation_date":1677169607,"post_id":75528298,"comment_id":133289006,"body_markdown":"looks very useful for chatting but not in my case where the data is not used for chatting.","body":"looks very useful for chatting but not in my case where the data is not used for chatting."}],"tags":[],"owner":{"account_id":21829211,"reputation":1,"user_id":16124323,"display_name":"James Godson"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677040349,"creation_date":1677040349,"answer_id":75528298,"question_id":72388842,"body_markdown":"Use socket.io.When something changes in remote db, it sends the data to the app automatically.\r\nTake a look at the following link: https://socket.io/blog/native-socket-io-and-android/","title":"Update local DB only when there is a change in remote DB (Android Studio)","body":"<p>Use socket.io.When something changes in remote db, it sends the data to the app automatically.\nTake a look at the following link: <a href=\"https://socket.io/blog/native-socket-io-and-android/\" rel=\"nofollow noreferrer\">https://socket.io/blog/native-socket-io-and-android/</a></p>\n"}],"owner":{"account_id":24267715,"reputation":11,"user_id":18216328,"display_name":"Nataly Ayyad"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":260,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1677040349,"creation_date":1653553281,"question_id":72388842,"body_markdown":"I&#39;m using OkHttpClient to fetch data from remote DB and display the response to the user. \r\nThe user will never make changes to the remote DB. I&#39;m now implementing SQL lite local DB, since I don&#39;t think it&#39;s good to use APIs to fetch the same data all the time (since the user will send requests frequently and the data change in remote DB will be minimal). My question is how can I update my local DB when remote DB updates/changes. \r\n\r\nI have read that updating local DB periodically is bad practice. so, what&#39;s the best way to do this? ","title":"Update local DB only when there is a change in remote DB (Android Studio)","body":"<p>I'm using OkHttpClient to fetch data from remote DB and display the response to the user.\nThe user will never make changes to the remote DB. I'm now implementing SQL lite local DB, since I don't think it's good to use APIs to fetch the same data all the time (since the user will send requests frequently and the data change in remote DB will be minimal). My question is how can I update my local DB when remote DB updates/changes.</p>\n<p>I have read that updating local DB periodically is bad practice. so, what's the best way to do this?</p>\n"},{"tags":["java","android","android-studio","gradle","keystore"],"owner":{"account_id":4539491,"reputation":1258,"user_id":3687784,"display_name":"Suhaib Raadan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1677039405,"creation_date":1677039405,"question_id":75528220,"body_markdown":"I can not generate signed apk.\r\nThis is the first time happen with me, after upgrading IDE **Android Studio Electric Eel | 2022.1.1 Patch 1**\r\n\r\nEvery thing is Ok as every time but what happened now? I don&#39;t know.\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/IRYTu.jpg","title":"Android Studio: Given final block not properly padded. Such issues can arise if a bad key is used during decryption","body":"<p>I can not generate signed apk.\nThis is the first time happen with me, after upgrading IDE <strong>Android Studio Electric Eel | 2022.1.1 Patch 1</strong></p>\n<p>Every thing is Ok as every time but what happened now? I don't know.</p>\n<p><a href=\"https://i.stack.imgur.com/IRYTu.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IRYTu.jpg\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","json","parsing","gson"],"comments":[{"owner":{"account_id":95910,"reputation":238649,"user_id":260990,"accept_rate":81,"display_name":"jmj"},"score":3,"creation_date":1374518272,"post_id":17794916,"comment_id":25960234,"body_markdown":"[Use this tool](http://www.jsonschema2pojo.org/) to generate schema for your JSON","body":"<a href=\"http://www.jsonschema2pojo.org/\" rel=\"nofollow noreferrer\">Use this tool</a> to generate schema for your JSON"},{"owner":{"account_id":377027,"reputation":5873,"user_id":728863,"accept_rate":92,"display_name":"footy"},"score":0,"creation_date":1374518704,"post_id":17794916,"comment_id":25960491,"body_markdown":"@JigarJoshi When I press preview with my JSON nothing shows up","body":"@JigarJoshi When I press preview with my JSON nothing shows up"},{"owner":{"account_id":95910,"reputation":238649,"user_id":260990,"accept_rate":81,"display_name":"jmj"},"score":2,"creation_date":1374518836,"post_id":17794916,"comment_id":25960557,"body_markdown":"It does for me,paste your JSON in that field, select source type = JSON, Annotation style= None","body":"It does for me,paste your JSON in that field, select source type = JSON, Annotation style= None"},{"owner":{"account_id":187570,"reputation":4917,"user_id":425722,"accept_rate":83,"display_name":"Andrew Rueckert"},"score":0,"creation_date":1677039780,"post_id":17794916,"comment_id":133256974,"body_markdown":"JsonCollection&#39;s ErrorMessage should be named `errorMessage`, not `error`.","body":"JsonCollection&#39;s ErrorMessage should be named <code>errorMessage</code>, not <code>error</code>."}],"answers":[{"tags":[],"owner":{"account_id":377027,"reputation":5873,"user_id":728863,"accept_rate":92,"display_name":"footy"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1374520062,"creation_date":1374520062,"answer_id":17795470,"question_id":17794916,"body_markdown":"I used [this tool][1] shown by @JigarJoshi to generate my schema.\r\n\r\nThe only difference I found is I had to change the class name from `ErrorValues` to `Error`\r\n\r\n  [1]: http://www.jsonschema2pojo.org/","title":"What should be my class structure to parse JSON in GSON","body":"<p>I used <a href=\"http://www.jsonschema2pojo.org/\" rel=\"nofollow\">this tool</a> shown by @JigarJoshi to generate my schema.</p>\n\n<p>The only difference I found is I had to change the class name from <code>ErrorValues</code> to <code>Error</code></p>\n"}],"owner":{"account_id":377027,"reputation":5873,"user_id":728863,"accept_rate":92,"display_name":"footy"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":393,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":17795470,"answer_count":1,"score":0,"last_activity_date":1677039306,"creation_date":1374518231,"question_id":17794916,"body_markdown":"I have the following JSON data:\r\n\r\n    {\r\n        &quot;response&quot;: {},\r\n        &quot;errorMessage&quot;: {\r\n            &quot;error&quot;: [\r\n                {\r\n                    &quot;errorId&quot;: 260003,\r\n                    &quot;domain&quot;: &quot;ads&quot;,\r\n                    &quot;subdomain&quot;: &quot;asd&quot;,\r\n                    &quot;severity&quot;: &quot;asd&quot;,\r\n                    &quot;category&quot;: &quot;asd&quot;,\r\n                    &quot;message&quot;: &quot;asdsa  asd ad&quot;,\r\n                    &quot;errorName&quot;: &quot;UnAuthorized&quot;\r\n                }\r\n            ]\r\n        }\r\n    }\r\n\r\nCurrently I have the following class structure:\r\n\r\n    public class JSONCollection\r\n    \tprivate Response response;\r\n    \tprivate ErrorMessage error;\r\n    \r\n    public class Response \r\n    \tprivate String collectionId;\r\n    \tprivate String url;\r\n    \r\n    public class ErrorMessage \r\n    \tprivate List&lt;ErrorValues&gt; error;\r\n    \r\n    public class ErrorValues \r\n    \tprivate String errorId;\r\n    \tprivate String domain;\r\n    \tprivate String subdomain;\r\n    \tprivate String severity;\r\n    \tprivate String category;\r\n    \tprivate String message;\r\n    \tprivate String errorName;\r\n\r\nI have setters/get set for all private variables\r\n\r\nBut when I do a `JSONCollection cJson = gson.fromJson(JSONValue,JSONCollection.class);` I get cJson as a `null`.\r\n\r\nHow to get it right?","title":"What should be my class structure to parse JSON in GSON","body":"<p>I have the following JSON data:</p>\n\n<pre><code>{\n    \"response\": {},\n    \"errorMessage\": {\n        \"error\": [\n            {\n                \"errorId\": 260003,\n                \"domain\": \"ads\",\n                \"subdomain\": \"asd\",\n                \"severity\": \"asd\",\n                \"category\": \"asd\",\n                \"message\": \"asdsa  asd ad\",\n                \"errorName\": \"UnAuthorized\"\n            }\n        ]\n    }\n}\n</code></pre>\n\n<p>Currently I have the following class structure:</p>\n\n<pre><code>public class JSONCollection\n    private Response response;\n    private ErrorMessage error;\n\npublic class Response \n    private String collectionId;\n    private String url;\n\npublic class ErrorMessage \n    private List&lt;ErrorValues&gt; error;\n\npublic class ErrorValues \n    private String errorId;\n    private String domain;\n    private String subdomain;\n    private String severity;\n    private String category;\n    private String message;\n    private String errorName;\n</code></pre>\n\n<p>I have setters/get set for all private variables</p>\n\n<p>But when I do a <code>JSONCollection cJson = gson.fromJson(JSONValue,JSONCollection.class);</code> I get cJson as a <code>null</code>.</p>\n\n<p>How to get it right?</p>\n"},{"tags":["java","android","webview","imageview"],"answers":[{"comments":[{"owner":{"account_id":23533539,"reputation":55,"user_id":17917893,"display_name":"Mikael David"},"score":0,"creation_date":1677003916,"post_id":75524180,"comment_id":133250005,"body_markdown":"ok that worked for me, also i tried to change the color but it says for me that cannot resolve the symbol &quot;intentBuillder&quot;. code -&gt; int colorInt = Color.parseColor(&quot;#66bb6a&quot;);\n        CustomTabColorSchemeParams defaultColors = new CustomTabColorSchemeParams.Builder()\n                .setToolbarColor(colorInt)\n                .build();\n        intentBuilder.setDefaultColorSchemeParams(defaultColors);","body":"ok that worked for me, also i tried to change the color but it says for me that cannot resolve the symbol &quot;intentBuillder&quot;. code -&gt; int colorInt = Color.parseColor(&quot;#66bb6a&quot;);         CustomTabColorSchemeParams defaultColors = new CustomTabColorSchemeParams.Builder()                 .setToolbarColor(colorInt)                 .build();         intentBuilder.setDefaultColorSchemeParams(defaultColors);"},{"owner":{"account_id":14555492,"reputation":64,"user_id":10513148,"display_name":"Isuru"},"score":0,"creation_date":1677004282,"post_id":75524180,"comment_id":133250137,"body_markdown":"If the previous answer helped can you please approve it? Your question in the comment is not very clear. Please post it as a separate question.","body":"If the previous answer helped can you please approve it? Your question in the comment is not very clear. Please post it as a separate question."},{"owner":{"account_id":23533539,"reputation":55,"user_id":17917893,"display_name":"Mikael David"},"score":0,"creation_date":1677004384,"post_id":75524180,"comment_id":133250165,"body_markdown":"ok, it worked i&#39;ll approve thanks","body":"ok, it worked i&#39;ll approve thanks"}],"tags":[],"owner":{"account_id":14555492,"reputation":64,"user_id":10513148,"display_name":"Isuru"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1677002085,"creation_date":1677002085,"answer_id":75524180,"question_id":75524012,"body_markdown":"According to the guide here [custom-tabs][1] \r\n\r\nfirst add the dependencies to your app/build.gradle file\r\n\r\n    dependencies {\r\n       ...\r\n        implementation &quot;androidx.browser:browser:1.4.0&quot;\r\n    }\r\n\r\nyour solution should look something like this.\r\n\r\n    import android.support.customtabs.CustomTabsIntent;\r\n    \r\n    ImageView playtowin;\r\n    \r\n    playtowin = findViewById(R.id.ptw);\r\n    \r\n    playtowin.setOnClickListener(new View.OnClickListener() {\r\n        @Override\r\n        public void onClick(View v) {\r\n            openCustomTab(&quot;https://www.xbox.com/pt-BR/play&quot;);\r\n        }\r\n    });\r\n    \r\n    private void openCustomTab(String url) {\r\n        CustomTabsIntent.Builder builder = new CustomTabsIntent.Builder();\r\n        CustomTabsIntent customTabsIntent = builder.build();\r\n        customTabsIntent.launchUrl(this, Uri.parse(url));\r\n    }\r\n\r\n\r\n  [1]: https://developer.chrome.com/docs/android/custom-tabs/integration-guide/","title":"How can I rewrite the code to open link on Chrome custom tab?","body":"<p>According to the guide here <a href=\"https://developer.chrome.com/docs/android/custom-tabs/integration-guide/\" rel=\"nofollow noreferrer\">custom-tabs</a></p>\n<p>first add the dependencies to your app/build.gradle file</p>\n<pre><code>dependencies {\n   ...\n    implementation &quot;androidx.browser:browser:1.4.0&quot;\n}\n</code></pre>\n<p>your solution should look something like this.</p>\n<pre><code>import android.support.customtabs.CustomTabsIntent;\n\nImageView playtowin;\n\nplaytowin = findViewById(R.id.ptw);\n\nplaytowin.setOnClickListener(new View.OnClickListener() {\n    @Override\n    public void onClick(View v) {\n        openCustomTab(&quot;https://www.xbox.com/pt-BR/play&quot;);\n    }\n});\n\nprivate void openCustomTab(String url) {\n    CustomTabsIntent.Builder builder = new CustomTabsIntent.Builder();\n    CustomTabsIntent customTabsIntent = builder.build();\n    customTabsIntent.launchUrl(this, Uri.parse(url));\n}\n</code></pre>\n"}],"owner":{"account_id":23533539,"reputation":55,"user_id":17917893,"display_name":"Mikael David"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":237,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75524180,"answer_count":1,"score":0,"last_activity_date":1677038539,"creation_date":1677000948,"question_id":75524012,"body_markdown":"So I have this code in my mainActivity that I use to open the link, but it opens in chrome app and I want it to open in custom-chrome-tabs webView option.\r\n\r\n    ImageView playtowin;\r\n\r\n    playtowin = findViewById(R.id.ptw);\r\n\r\n        playtowin.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                gotoUrl(&quot;https://www.xbox.com/pt-BR/play&quot;);\r\n            }\r\n        });\r\n\r\n          private void gotoUrl(String s) {\r\n            Uri uri = Uri.parse(s);\r\n            startActivity(new Intent(Intent.ACTION_VIEW,uri));\r\n          }","title":"How can I rewrite the code to open link on Chrome custom tab?","body":"<p>So I have this code in my mainActivity that I use to open the link, but it opens in chrome app and I want it to open in custom-chrome-tabs webView option.</p>\n<pre><code>ImageView playtowin;\n\nplaytowin = findViewById(R.id.ptw);\n\n    playtowin.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n            gotoUrl(&quot;https://www.xbox.com/pt-BR/play&quot;);\n        }\n    });\n\n      private void gotoUrl(String s) {\n        Uri uri = Uri.parse(s);\n        startActivity(new Intent(Intent.ACTION_VIEW,uri));\n      }\n</code></pre>\n"},{"tags":["java","android","unit-testing","out-of-memory","robolectric"],"comments":[{"owner":{"account_id":261539,"reputation":19938,"user_id":981715,"accept_rate":74,"display_name":"Eugen Martynov"},"score":0,"creation_date":1485726101,"post_id":41919744,"comment_id":71033043,"body_markdown":"Hard to say what can be the issue: https://github.com/robolectric/robolectric/issues/1700, https://github.com/robolectric/robolectric/issues/2068","body":"Hard to say what can be the issue: <a href=\"https://github.com/robolectric/robolectric/issues/1700\" rel=\"nofollow noreferrer\">github.com/robolectric/robolectric/issues/1700</a>, <a href=\"https://github.com/robolectric/robolectric/issues/2068\" rel=\"nofollow noreferrer\">github.com/robolectric/robolectric/issues/2068</a>"},{"owner":{"account_id":261539,"reputation":19938,"user_id":981715,"accept_rate":74,"display_name":"Eugen Martynov"},"score":0,"creation_date":1485726130,"post_id":41919744,"comment_id":71033063,"body_markdown":"Also usage of jdk8 instead of jdk7 might help, unless you&#39;re already on it","body":"Also usage of jdk8 instead of jdk7 might help, unless you&#39;re already on it"},{"owner":{"account_id":9560534,"reputation":12492,"user_id":7101554,"accept_rate":68,"display_name":"Leandro Borges Ferreira"},"score":0,"creation_date":1485776082,"post_id":41919744,"comment_id":71049946,"body_markdown":"I am using jdk8. The test is really small and the class is also very small... It is really wierd... I&#39;ll show you in a little time.","body":"I am using jdk8. The test is really small and the class is also very small... It is really wierd... I&#39;ll show you in a little time."}],"answers":[{"comments":[{"owner":{"account_id":9560534,"reputation":12492,"user_id":7101554,"accept_rate":68,"display_name":"Leandro Borges Ferreira"},"score":0,"creation_date":1485685822,"post_id":41919840,"comment_id":71020710,"body_markdown":"No images. The problem doesnt happens in my device, only when running the robolectric tests","body":"No images. The problem doesnt happens in my device, only when running the robolectric tests"},{"owner":{"account_id":7742408,"reputation":11085,"user_id":5861618,"accept_rate":80,"display_name":"Ros&#225;rio Pereira Fernandes"},"score":0,"creation_date":1485685876,"post_id":41919840,"comment_id":71020726,"body_markdown":"Can you tell us which views you&#39;re removing to see the problem stoping?","body":"Can you tell us which views you&#39;re removing to see the problem stoping?"},{"owner":{"account_id":9560534,"reputation":12492,"user_id":7101554,"accept_rate":68,"display_name":"Leandro Borges Ferreira"},"score":0,"creation_date":1485775612,"post_id":41919840,"comment_id":71049653,"body_markdown":"Sorry It is taking ages for me to reply... I was a little busy. I will put the project in github and publish the code in my question in some hours.","body":"Sorry It is taking ages for me to reply... I was a little busy. I will put the project in github and publish the code in my question in some hours."}],"tags":[],"owner":{"account_id":7742408,"reputation":11085,"user_id":5861618,"accept_rate":80,"display_name":"Ros&#225;rio Pereira Fernandes"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1485685541,"creation_date":1485685541,"answer_id":41919840,"question_id":41919744,"body_markdown":"This kind of problem usually happens when you&#39;re displaying too many images on your activities. Probably using some ViewPager? If that&#39;s the case, you can read [this][1], which explains how to use cache to store images and reduce memory consumption. \r\n\r\nAnother solution is increasing the heap size, by setting this on the AndroidManifest.xml: `android:largeHeap=”true”` .. But keep in mind that this is used mostly on apps that require a lot of memory like games, video processors, etc\r\n\r\n\r\n  [1]: https://developer.android.com/training/displaying-bitmaps/display-bitmap.html#viewpager","title":"Robolectric java heap size error","body":"<p>This kind of problem usually happens when you're displaying too many images on your activities. Probably using some ViewPager? If that's the case, you can read <a href=\"https://developer.android.com/training/displaying-bitmaps/display-bitmap.html#viewpager\" rel=\"nofollow noreferrer\">this</a>, which explains how to use cache to store images and reduce memory consumption. </p>\n\n<p>Another solution is increasing the heap size, by setting this on the AndroidManifest.xml: <code>android:largeHeap=”true”</code> .. But keep in mind that this is used mostly on apps that require a lot of memory like games, video processors, etc</p>\n"},{"tags":[],"owner":{"account_id":27847137,"reputation":1,"user_id":21262365,"display_name":"user21262365"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677038316,"creation_date":1677038316,"answer_id":75528138,"question_id":41919744,"body_markdown":"the answer should be(at least for me):\r\n\r\nin build.gradle(Project:xxx), add as below:\r\n\r\n    subprojects {\r\n      tasks.withType(Test) {\r\n        maxParallelForks = 2\r\n        forkEvery = 80\r\n        maxHeapSize = &quot;2048m&quot;\r\n        minHeapSize = &quot;1024m&quot;\r\n      }\r\n    }\r\n\r\nrefer from:https://github.com/robolectric/robolectric/issues/5131","title":"Robolectric java heap size error","body":"<p>the answer should be(at least for me):</p>\n<p>in build.gradle(Project:xxx), add as below:</p>\n<pre><code>subprojects {\n  tasks.withType(Test) {\n    maxParallelForks = 2\n    forkEvery = 80\n    maxHeapSize = &quot;2048m&quot;\n    minHeapSize = &quot;1024m&quot;\n  }\n}\n</code></pre>\n<p>refer from:<a href=\"https://github.com/robolectric/robolectric/issues/5131\" rel=\"nofollow noreferrer\">https://github.com/robolectric/robolectric/issues/5131</a></p>\n"}],"owner":{"account_id":9560534,"reputation":12492,"user_id":7101554,"accept_rate":68,"display_name":"Leandro Borges Ferreira"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":765,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1677038316,"creation_date":1485684895,"question_id":41919744,"body_markdown":"So I am running my tests using Robolectric 3.1.4. In another project I had no problems running all my test with robolectric, but right now I always get this error:\r\n\r\njava.lang.OutOfMemoryError: Java heap space\r\n\r\nWhen I remove some views of the activity, the problem stops... \r\n\r\nWell, my question is: How can I increase the heap size in the project or how can I make robolectric consume less memory?\r\n\r\nAny help is appreciated! \r\n","title":"Robolectric java heap size error","body":"<p>So I am running my tests using Robolectric 3.1.4. In another project I had no problems running all my test with robolectric, but right now I always get this error:</p>\n\n<p>java.lang.OutOfMemoryError: Java heap space</p>\n\n<p>When I remove some views of the activity, the problem stops... </p>\n\n<p>Well, my question is: How can I increase the heap size in the project or how can I make robolectric consume less memory?</p>\n\n<p>Any help is appreciated! </p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9594,"page":629,"page_size":100}
