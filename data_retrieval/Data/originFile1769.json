{"items":[{"tags":["java","heap-memory"],"comments":[{"owner":{"account_id":2043977,"reputation":3670,"user_id":1824510,"display_name":"ogres"},"score":5,"creation_date":1451074770,"post_id":34466091,"comment_id":56674206,"body_markdown":"Can you check the memory usage of that Process ? It will be growing, but not that fast to be out of memory instantly","body":"Can you check the memory usage of that Process ? It will be growing, but not that fast to be out of memory instantly"},{"owner":{"account_id":4943069,"reputation":1642,"user_id":5191731,"accept_rate":92,"display_name":"HopefullyHelpful"},"score":0,"creation_date":1451074978,"post_id":34466091,"comment_id":56674272,"body_markdown":"Todays machines have a lot of memory and you don&#39;t know the speed of your while loop. If you try to allocate a few million ints in an array at once you will quickly run out of memory, but allocating 1 object reference at a time would take a few million times longer.","body":"Todays machines have a lot of memory and you don&#39;t know the speed of your while loop. If you try to allocate a few million ints in an array at once you will quickly run out of memory, but allocating 1 object reference at a time would take a few million times longer."},{"owner":{"account_id":220160,"reputation":99410,"user_id":477420,"display_name":"Alexei Levenkov"},"score":0,"creation_date":1451075155,"post_id":34466091,"comment_id":56674306,"body_markdown":"x64 program would take some time to throw OOM :) Also even 32 bit one would take some time to fill 2-4GB with ~30 byte items. You likely just need to wait long enough - so no repro.","body":"x64 program would take some time to throw OOM :) Also even 32 bit one would take some time to fill 2-4GB with ~30 byte items. You likely just need to wait long enough - so no repro."},{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1451075316,"post_id":34466091,"comment_id":56674345,"body_markdown":"The array has only one place to keep the reference.","body":"The array has only one place to keep the reference."}],"answers":[{"tags":[],"owner":{"account_id":6388289,"reputation":35625,"user_id":4955425,"display_name":"sstan"},"down_vote_count":1,"up_vote_count":8,"is_accepted":true,"score":7,"last_activity_date":1451078127,"creation_date":1451075443,"answer_id":34466190,"question_id":34466091,"body_markdown":"There is no memory leak here.\r\n\r\nConsider the steps:\r\n\r\n1. `Object[] ref = new Object[1];`  \r\nMemory: `ref --&gt; array 1`\r\n2. `ref[0] = new Object[]{ref};`  \r\nMemory: `ref --&gt; array 1 --&gt; array 2 --&gt; array 1`\r\n3. `ref = (Object[]) ref[0];`  \r\nMemory: `ref --&gt; array 2 --&gt; array 1 --&gt; array 2 --&gt; ...`  \r\n4. `ref[0] = new Object[]{ref};`  \r\nMemory: `ref --&gt; array 2 --&gt; array 3 --&gt; array 2 --&gt; ...`  \r\n***At this point, `array 1` is no longer referenced, so it can be GC collected.***  \r\n5. `ref = (Object[]) ref[0];`  \r\nMemory: `ref --&gt; array 3 --&gt; array 2 --&gt; array 3 --&gt; ...`  \r\n6. `ref[0] = new Object[]{ref};`  \r\nMemory: `ref --&gt; array 3 --&gt; array 4 --&gt; array 3 --&gt; ...`  \r\n***At this point, `array 2` is no longer referenced, so it can be GC collected.***  \r\n\r\n... and the cycle continues.  After each loop, there is an array that is no longer referenced and that becomes eligible for garbage collection.  As long as the GC does its job, you will never run out of memory.\r\n\r\n**EDIT:** Corrected the details of how the arrays are linked in memory. Thanks to Javier for pointing that out.","title":"Why there is no OutOfMemoryError","body":"<p>There is no memory leak here.</p>\n\n<p>Consider the steps:</p>\n\n<ol>\n<li><code>Object[] ref = new Object[1];</code><br>\nMemory: <code>ref --&gt; array 1</code></li>\n<li><code>ref[0] = new Object[]{ref};</code><br>\nMemory: <code>ref --&gt; array 1 --&gt; array 2 --&gt; array 1</code></li>\n<li><code>ref = (Object[]) ref[0];</code><br>\nMemory: <code>ref --&gt; array 2 --&gt; array 1 --&gt; array 2 --&gt; ...</code>  </li>\n<li><code>ref[0] = new Object[]{ref};</code><br>\nMemory: <code>ref --&gt; array 2 --&gt; array 3 --&gt; array 2 --&gt; ...</code><br>\n<strong><em>At this point, <code>array 1</code> is no longer referenced, so it can be GC collected.</em></strong>  </li>\n<li><code>ref = (Object[]) ref[0];</code><br>\nMemory: <code>ref --&gt; array 3 --&gt; array 2 --&gt; array 3 --&gt; ...</code>  </li>\n<li><code>ref[0] = new Object[]{ref};</code><br>\nMemory: <code>ref --&gt; array 3 --&gt; array 4 --&gt; array 3 --&gt; ...</code><br>\n<strong><em>At this point, <code>array 2</code> is no longer referenced, so it can be GC collected.</em></strong>  </li>\n</ol>\n\n<p>... and the cycle continues.  After each loop, there is an array that is no longer referenced and that becomes eligible for garbage collection.  As long as the GC does its job, you will never run out of memory.</p>\n\n<p><strong>EDIT:</strong> Corrected the details of how the arrays are linked in memory. Thanks to Javier for pointing that out.</p>\n"},{"tags":[],"owner":{"account_id":1089130,"reputation":38492,"user_id":1084174,"accept_rate":89,"display_name":"Sazzad Hissain Khan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1451076210,"creation_date":1451076210,"answer_id":34466265,"question_id":34466091,"body_markdown":"### Explaining with your own assumption, ###\n\n    Start:\n       ref = new Object[1];\n    Loop:\n       ref[0] = new Object []{ new Object[1] }\n       ref = new Object []{ new Object[1] }\n       // at this point ref is re-allocated\n       ref[0] = new Object []{ new Object []{ new Object[1] } }\n       ref = new Object []{ new Object []{ new Object[1] } }\n       // at this point ref is re-allocated\n\nAt both above mentioned points `ref` is being re-allocated hence previous reference of `ref` is lost. As the `ref` is lost that means java garbage collector is ready to de-reference the memory pointed by the previous `ref`.\n\n### Thus there is no memory leak in your code ##","title":"Why there is no OutOfMemoryError","body":"<h3>Explaining with your own assumption,</h3>\n<pre><code>Start:\n   ref = new Object[1];\nLoop:\n   ref[0] = new Object []{ new Object[1] }\n   ref = new Object []{ new Object[1] }\n   // at this point ref is re-allocated\n   ref[0] = new Object []{ new Object []{ new Object[1] } }\n   ref = new Object []{ new Object []{ new Object[1] } }\n   // at this point ref is re-allocated\n</code></pre>\n<p>At both above mentioned points <code>ref</code> is being re-allocated hence previous reference of <code>ref</code> is lost. As the <code>ref</code> is lost that means java garbage collector is ready to de-reference the memory pointed by the previous <code>ref</code>.</p>\n<h3>Thus there is no memory leak in your code</h3>\n"}],"owner":{"account_id":3940837,"reputation":2674,"user_id":4443351,"accept_rate":71,"display_name":"Bizon4ik"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":115,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":34466190,"answer_count":2,"score":2,"last_activity_date":1639312312,"creation_date":1451074582,"question_id":34466091,"body_markdown":"I can not understand why there is NO OutOfMemoryError in this code\r\n\r\n    public static void main(String[] args) {\r\n        Object[] ref = new Object[1];\r\n        while (true) {\r\n            ref[0] = new Object[]{ref};\r\n            ref = (Object[]) ref[0];\r\n        }\r\n    }\r\n\r\nAs for me the above mentioned code has to be work on the following way:\r\n\r\n\r\n\r\n    Start:\r\n       ref = new Object[1];\r\n    Loop:\r\n       ref[0] = new Object []{ new Object[1] }\r\n       ref = new Object []{ new Object[1] }\r\n       ref[0] = new Object []{ new Object []{ new Object[1] } }\r\n       ref = new Object []{ new Object []{ new Object[1] } }\r\n\r\nI mean that links for each new Object are saved and garbage collector cannot delete not used object and consequently there must be OutOfMemoryError. But if code be run, it will work ages...\r\n\r\nWhat I do not understand or where I am wrong? Please explain me.","title":"Why there is no OutOfMemoryError","body":"<p>I can not understand why there is NO OutOfMemoryError in this code</p>\n\n<pre><code>public static void main(String[] args) {\n    Object[] ref = new Object[1];\n    while (true) {\n        ref[0] = new Object[]{ref};\n        ref = (Object[]) ref[0];\n    }\n}\n</code></pre>\n\n<p>As for me the above mentioned code has to be work on the following way:</p>\n\n<pre><code>Start:\n   ref = new Object[1];\nLoop:\n   ref[0] = new Object []{ new Object[1] }\n   ref = new Object []{ new Object[1] }\n   ref[0] = new Object []{ new Object []{ new Object[1] } }\n   ref = new Object []{ new Object []{ new Object[1] } }\n</code></pre>\n\n<p>I mean that links for each new Object are saved and garbage collector cannot delete not used object and consequently there must be OutOfMemoryError. But if code be run, it will work ages...</p>\n\n<p>What I do not understand or where I am wrong? Please explain me.</p>\n"},{"tags":["java","operating-system","heap-memory"],"comments":[{"owner":{"account_id":4688412,"reputation":8118,"user_id":3795219,"accept_rate":70,"display_name":"Austin"},"score":0,"creation_date":1453131025,"post_id":34858289,"comment_id":57456029,"body_markdown":"Out of curiosity, what was your swap size before you increased it?","body":"Out of curiosity, what was your swap size before you increased it?"},{"owner":{"account_id":4070844,"reputation":20798,"user_id":3344003,"accept_rate":52,"display_name":"user3344003"},"score":0,"creation_date":1453158846,"post_id":34858289,"comment_id":57470891,"body_markdown":"If you have a process with 8 GB of heap and only 11 GB of swap space, you are living life on the edge (unless this web server is the only thing that will run on the system. The entire virtual address space of a process has to be backed to disk (even if there is memory available).","body":"If you have a process with 8 GB of heap and only 11 GB of swap space, you are living life on the edge (unless this web server is the only thing that will run on the system. The entire virtual address space of a process has to be backed to disk (even if there is memory available)."}],"answers":[{"tags":[],"owner":{"account_id":7795,"reputation":116405,"user_id":13663,"accept_rate":75,"display_name":"Will Hartung"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1453133371,"creation_date":1453131085,"answer_id":34858395,"question_id":34858289,"body_markdown":"Do. Not. Do this.\r\n\r\nGet more memory.\r\n\r\nJava and Swap Do. Not. Mix. Java and Swap are like &quot;Crossing the Streams&quot; Bad.\r\n\r\nPart of the Java heap will be swapped out, then Java will GC, which will thrash the box terribly, and still part of the heap will be swapped out, and Java will GC again.\r\n\r\nRinse and repeat until you finally kill -9 Weblogic.\r\n\r\nGet more memory, or do without. Swap is not an option.\r\n\r\nAddenda:\r\n\r\nYou machine has &quot;Virtual Memory&quot; (VM). By adding swap, you extend that VM. When you have more VM than actual memory, then the machine will &quot;swap out&quot; inactive memory pages to the swap space, and then &quot;swap in&quot; pages that want to be active from swap space in to RAM. If you have a bunch of idle processes that rarely need time, this isn&#39;t super terrible.\r\n\r\nBut Java magnifies the problem. When you run out of physical RAM, some of that RAM is swapped out to disk. When some of that RAM is Java heap, then you have a big problem when the garbage collector kicks in. Because, in general, the GC touches every page of the heap. That means that all of the heaps pages need to be &quot;active&quot;, and thus, &quot;swapped in&quot;.\r\n\r\nBut if they don&#39;t fit, then you have a problem like the 8 puzzle. Where you&#39;re shifting memory in and out from disk. This is called thrashing.\r\n\r\nA swapped JVM heap that is GC is the text book case of worst case thrashing.\r\n\r\nThe machine is letting you allocate the extra memory because it thinks you have more, since your Virtual Memory (physical RAM + swap) is greater.\r\n","title":"How increasing swap size allow me to increase the heap size?","body":"<p>Do. Not. Do this.</p>\n\n<p>Get more memory.</p>\n\n<p>Java and Swap Do. Not. Mix. Java and Swap are like \"Crossing the Streams\" Bad.</p>\n\n<p>Part of the Java heap will be swapped out, then Java will GC, which will thrash the box terribly, and still part of the heap will be swapped out, and Java will GC again.</p>\n\n<p>Rinse and repeat until you finally kill -9 Weblogic.</p>\n\n<p>Get more memory, or do without. Swap is not an option.</p>\n\n<p>Addenda:</p>\n\n<p>You machine has \"Virtual Memory\" (VM). By adding swap, you extend that VM. When you have more VM than actual memory, then the machine will \"swap out\" inactive memory pages to the swap space, and then \"swap in\" pages that want to be active from swap space in to RAM. If you have a bunch of idle processes that rarely need time, this isn't super terrible.</p>\n\n<p>But Java magnifies the problem. When you run out of physical RAM, some of that RAM is swapped out to disk. When some of that RAM is Java heap, then you have a big problem when the garbage collector kicks in. Because, in general, the GC touches every page of the heap. That means that all of the heaps pages need to be \"active\", and thus, \"swapped in\".</p>\n\n<p>But if they don't fit, then you have a problem like the 8 puzzle. Where you're shifting memory in and out from disk. This is called thrashing.</p>\n\n<p>A swapped JVM heap that is GC is the text book case of worst case thrashing.</p>\n\n<p>The machine is letting you allocate the extra memory because it thinks you have more, since your Virtual Memory (physical RAM + swap) is greater.</p>\n"}],"owner":{"account_id":2042921,"reputation":10170,"user_id":3222249,"accept_rate":73,"display_name":"emilly"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2228,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":34858395,"answer_count":1,"score":1,"last_activity_date":1639312282,"creation_date":1453130800,"question_id":34858289,"body_markdown":"I have ubuntu server where i have 8 GB of RAM. When i try to give the heap size as 8GB, my web server(weblogic) does not start. But if i increase the swap size\r\nto Size to 11 GB, webserver got started.\r\n\r\nSo my question is how i can allocate 8GB heap size to my web server (when ihave 8 GB RAM out of which 1 to 2 GB is required for OS) after increaing\r\nthe swap size ?","title":"How increasing swap size allow me to increase the heap size?","body":"<p>I have ubuntu server where i have 8 GB of RAM. When i try to give the heap size as 8GB, my web server(weblogic) does not start. But if i increase the swap size\nto Size to 11 GB, webserver got started.</p>\n\n<p>So my question is how i can allocate 8GB heap size to my web server (when ihave 8 GB RAM out of which 1 to 2 GB is required for OS) after increaing\nthe swap size ?</p>\n"},{"tags":["java","class","heap-memory"],"comments":[{"owner":{"account_id":9943,"reputation":28522,"user_id":18573,"accept_rate":56,"display_name":"Miserable Variable"},"score":1,"creation_date":1453222050,"post_id":34882241,"comment_id":57502607,"body_markdown":"I could well be wrong, but I do not think there are any tools that let you retrieve class definitions. It might be possible to do this by writing out the class bits from the program itself, using an agent or custom class loader.","body":"I could well be wrong, but I do not think there are any tools that let you retrieve class definitions. It might be possible to do this by writing out the class bits from the program itself, using an agent or custom class loader."}],"answers":[{"tags":[],"owner":{"account_id":9943,"reputation":28522,"user_id":18573,"accept_rate":56,"display_name":"Miserable Variable"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1453228355,"creation_date":1453228355,"answer_id":34884405,"question_id":34882241,"body_markdown":"There do not seem to be any tools that readily allow you to retrieve the class bits from a VM, let alone from a heap dump. Nor is it clear that the class definition is even available in the exact same format as the contents of the .class in the VM.\r\n\r\nBut there are multiple options for saving the class definition before it is loaded in the VM. You could have an agent which can store the class definition, either in heap or external storage. This should also be possible with a custom classloader, but it is possible that it is bypassed by some other customer classloader. \r\n\r\nThe popular AOP tool AspectJ has an option to save the definition of instrumented class; it can probably be used for your use-case. ","title":"How to extract java class definitions from a heap dump of a running application?","body":"<p>There do not seem to be any tools that readily allow you to retrieve the class bits from a VM, let alone from a heap dump. Nor is it clear that the class definition is even available in the exact same format as the contents of the .class in the VM.</p>\n\n<p>But there are multiple options for saving the class definition before it is loaded in the VM. You could have an agent which can store the class definition, either in heap or external storage. This should also be possible with a custom classloader, but it is possible that it is bypassed by some other customer classloader. </p>\n\n<p>The popular AOP tool AspectJ has an option to save the definition of instrumented class; it can probably be used for your use-case. </p>\n"}],"owner":{"account_id":7668496,"reputation":41,"user_id":5811551,"display_name":"Kenny Yu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":630,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1639312271,"creation_date":1453221723,"question_id":34882241,"body_markdown":"The need for extracting class definitions from a heap dump comes from the way some classes are loaded dynamically, not from static lib jars, but compiled dynamically or loaded over the network. The heap dump has the same size as the actually heap so I assume all the classes are there, possibly in the permgen. The objective is to extract the definitions in the form of .class files for further examination.","title":"How to extract java class definitions from a heap dump of a running application?","body":"<p>The need for extracting class definitions from a heap dump comes from the way some classes are loaded dynamically, not from static lib jars, but compiled dynamically or loaded over the network. The heap dump has the same size as the actually heap so I assume all the classes are there, possibly in the permgen. The objective is to extract the definitions in the form of .class files for further examination.</p>\n"},{"tags":["java","heap-memory"],"comments":[{"owner":{"account_id":325434,"reputation":25037,"user_id":646619,"accept_rate":90,"display_name":"Colonel Thirty Two"},"score":5,"creation_date":1455244517,"post_id":35353778,"comment_id":58414602,"body_markdown":"_&quot;faster than other Heaps&#39; implementation, such that of C.&quot;_ Gonna need some benchmarks. Also, the heap implementation depends on the particular JVM you are using, and for any of the popular ones, an in-depth analysis would be too long for an SO answer.","body":"<i>&quot;faster than other Heaps&#39; implementation, such that of C.&quot;</i> Gonna need some benchmarks. Also, the heap implementation depends on the particular JVM you are using, and for any of the popular ones, an in-depth analysis would be too long for an SO answer."},{"owner":{"account_id":7778124,"reputation":411,"user_id":5885523,"accept_rate":60,"display_name":"Judismar Arpini Junior"},"score":0,"creation_date":1455244923,"post_id":35353778,"comment_id":58414706,"body_markdown":"I learned years ago in a Programming Language&#39;s Concepts class that it simulates a stack structure for the objects, using garbage collector for reallocation (although I don&#39;t understand how it works). I wonder if this is default in JVMs. If not, I suppose asking how it works is useless... thanks anyway, @Colonel Thirty Two. I&#39;ll wait for more feedback and possible answers. I&#39;ll also see if I can again write a small algorithm in both Java and C that requires a lot of memory allocation in their Heap structure to have something to compare.","body":"I learned years ago in a Programming Language&#39;s Concepts class that it simulates a stack structure for the objects, using garbage collector for reallocation (although I don&#39;t understand how it works). I wonder if this is default in JVMs. If not, I suppose asking how it works is useless... thanks anyway, @Colonel Thirty Two. I&#39;ll wait for more feedback and possible answers. I&#39;ll also see if I can again write a small algorithm in both Java and C that requires a lot of memory allocation in their Heap structure to have something to compare."},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":2,"creation_date":1455245351,"post_id":35353778,"comment_id":58414832,"body_markdown":"The ability to move objects around freely is _extremely_ valuable in making memory allocation easy.  Most of the time a heap allocation just allocates the next chunk of memory and increments a pointer somewhere, and then the GC moves all retained objects out of the way so you continue to have just a giant chunk of free memory.","body":"The ability to move objects around freely is <i>extremely</i> valuable in making memory allocation easy.  Most of the time a heap allocation just allocates the next chunk of memory and increments a pointer somewhere, and then the GC moves all retained objects out of the way so you continue to have just a giant chunk of free memory."},{"owner":{"account_id":7778124,"reputation":411,"user_id":5885523,"accept_rate":60,"display_name":"Judismar Arpini Junior"},"score":0,"creation_date":1455246590,"post_id":35353778,"comment_id":58415167,"body_markdown":"I ran some small and simple experiments of memory allocation in loops, and got too the conclusion that not necessarily Java&#39;s Heap is faster than C&#39;s, in therms of allocation. I&#39;m editing the question.\n\nThanks for the feedback, @Louis Wasserman.","body":"I ran some small and simple experiments of memory allocation in loops, and got too the conclusion that not necessarily Java&#39;s Heap is faster than C&#39;s, in therms of allocation. I&#39;m editing the question.  Thanks for the feedback, @Louis Wasserman."}],"answers":[{"tags":[],"owner":{"account_id":235018,"reputation":364834,"user_id":501557,"accept_rate":90,"display_name":"templatetypedef"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1455248490,"creation_date":1455248490,"answer_id":35354439,"question_id":35353778,"body_markdown":"The HotSpot JVM uses a collection of different garbage collectors in tandem with one another to increase efficiency. Since most objects have extremely short lifetimes, it uses a stop-and-copy garbage collector with a small size for most allocations. Since stop-and-copy allows for almost instantaneous allocations (usually one or two assembly instructions), this makes most allocations fast. The cost of doing a &quot;copy&quot; step is low because most objects are reclaimed and the small size reserved for the copy collector gives a good upper-bound on the maximum time spent copying.\r\n\r\nFor objects that survive a long time in the first layer of the stop-and-copy collector, the HotSpot has a second level of stop-and-copied memory where it relocates those objects. This frees up more space in the top-level copy collector. Objects that survive long enough there are then moved to an area that uses mark-and-sweep collection. The idea is that anything that ends up there is likely to be around a long time because it&#39;s survived so long.\r\n\r\nThis hybrid approach - plus a bunch of other optimizations - explains why allocations and deallocations are so fast. Notice that the key tricks used here - namely, relocating objects - are hard to implement in low-level languages because of exposed pointers.","title":"Java&#39;s Heap Structure Implementation","body":"<p>The HotSpot JVM uses a collection of different garbage collectors in tandem with one another to increase efficiency. Since most objects have extremely short lifetimes, it uses a stop-and-copy garbage collector with a small size for most allocations. Since stop-and-copy allows for almost instantaneous allocations (usually one or two assembly instructions), this makes most allocations fast. The cost of doing a \"copy\" step is low because most objects are reclaimed and the small size reserved for the copy collector gives a good upper-bound on the maximum time spent copying.</p>\n\n<p>For objects that survive a long time in the first layer of the stop-and-copy collector, the HotSpot has a second level of stop-and-copied memory where it relocates those objects. This frees up more space in the top-level copy collector. Objects that survive long enough there are then moved to an area that uses mark-and-sweep collection. The idea is that anything that ends up there is likely to be around a long time because it's survived so long.</p>\n\n<p>This hybrid approach - plus a bunch of other optimizations - explains why allocations and deallocations are so fast. Notice that the key tricks used here - namely, relocating objects - are hard to implement in low-level languages because of exposed pointers.</p>\n"}],"owner":{"account_id":7778124,"reputation":411,"user_id":5885523,"accept_rate":60,"display_name":"Judismar Arpini Junior"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":152,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"closed_date":1455249340,"accepted_answer_id":35354439,"answer_count":1,"score":2,"last_activity_date":1639312251,"creation_date":1455243947,"question_id":35353778,"body_markdown":"I understand that Java allocates objects in the Heap and why. I understand that primitive data types and references variables are allocated on the Stack structure.\r\n\r\nWhat I don&#39;t understand is it&#39;s efficiency. It seems to work pretty fast, in comparison to others&#39;.\r\n\r\nMy questions are related to each other: What makes Java&#39;s Heap structure efficient? How is it implemented?","title":"Java&#39;s Heap Structure Implementation","body":"<p>I understand that Java allocates objects in the Heap and why. I understand that primitive data types and references variables are allocated on the Stack structure.</p>\n\n<p>What I don't understand is it's efficiency. It seems to work pretty fast, in comparison to others'.</p>\n\n<p>My questions are related to each other: What makes Java's Heap structure efficient? How is it implemented?</p>\n"},{"tags":["java","arrays"],"answers":[{"tags":[],"owner":{"account_id":9725613,"reputation":53334,"user_id":7212686,"accept_rate":100,"display_name":"azro"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639311822,"creation_date":1639311822,"answer_id":70323495,"question_id":70323428,"body_markdown":"Use a `while` loop, to add numbers in a `Set` (no duplicate) until you reach the good size \r\n\r\n    private static Integer[] readArray(int arraySize) {\r\n        Set&lt;Integer&gt; unique = new LinkedHashSet&lt;&gt;();\r\n        Random r = new Random();\r\n        while (unique.size() != arraySize)\r\n            unique.add(r.nextInt(arraySize));\r\n        return unique.toArray(new Integer[0]);\r\n    }\r\n","title":"How to create an array of random elements without duplicates?","body":"<p>Use a <code>while</code> loop, to add numbers in a <code>Set</code> (no duplicate) until you reach the good size</p>\n<pre><code>private static Integer[] readArray(int arraySize) {\n    Set&lt;Integer&gt; unique = new LinkedHashSet&lt;&gt;();\n    Random r = new Random();\n    while (unique.size() != arraySize)\n        unique.add(r.nextInt(arraySize));\n    return unique.toArray(new Integer[0]);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12822707,"reputation":677,"user_id":9276996,"display_name":"Turtle"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1639311903,"creation_date":1639311903,"answer_id":70323511,"question_id":70323428,"body_markdown":"Use `Set` to keep track of elements present in the `array` till now and make use of it to avoid duplicates\r\n\r\n    private static int[] readArray(int arraySize) {\r\n        Set&lt;Integer&gt; set = new HashSet&lt;&gt;();\r\n        Random r = new Random();\r\n        int[] arr = new int[arraySize];\r\n        int random;\r\n        for (int i=0; i&lt;arr.length; i++) {\r\n            while (set.contains(random = r.nextInt(arraySize)));\r\n            arr[i] = random;\r\n            set.add(random);\r\n        }\r\n        return arr;\r\n    }","title":"How to create an array of random elements without duplicates?","body":"<p>Use <code>Set</code> to keep track of elements present in the <code>array</code> till now and make use of it to avoid duplicates</p>\n<pre><code>private static int[] readArray(int arraySize) {\n    Set&lt;Integer&gt; set = new HashSet&lt;&gt;();\n    Random r = new Random();\n    int[] arr = new int[arraySize];\n    int random;\n    for (int i=0; i&lt;arr.length; i++) {\n        while (set.contains(random = r.nextInt(arraySize)));\n        arr[i] = random;\n        set.add(random);\n    }\n    return arr;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11092824,"reputation":484,"user_id":8144061,"accept_rate":100,"display_name":"Wing Kui Tsoi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639312245,"creation_date":1639312245,"answer_id":70323543,"question_id":70323428,"body_markdown":"Question is duplicated: https://stackoverflow.com/questions/4040001/creating-random-numbers-with-no-duplicates\r\n\r\nChange this:\r\n\r\n    for (int i=0; i&lt;arr.length; i++) {\r\n        arr[i] = r.nextInt(arraySize);\r\n    }\r\n\r\nto this:\r\n    \r\n    arr = r.ints(0, arraySize).distinct().limit(arraySize).toArray();\r\n\r\nor \r\n\r\n    arr = r.ints(0, 10000).distinct().limit(arraySize).toArray();\r\n\r\n10000 is upper limit.\r\n","title":"How to create an array of random elements without duplicates?","body":"<p>Question is duplicated: <a href=\"https://stackoverflow.com/questions/4040001/creating-random-numbers-with-no-duplicates\">Creating random numbers with no duplicates</a></p>\n<p>Change this:</p>\n<pre><code>for (int i=0; i&lt;arr.length; i++) {\n    arr[i] = r.nextInt(arraySize);\n}\n</code></pre>\n<p>to this:</p>\n<pre><code>arr = r.ints(0, arraySize).distinct().limit(arraySize).toArray();\n</code></pre>\n<p>or</p>\n<pre><code>arr = r.ints(0, 10000).distinct().limit(arraySize).toArray();\n</code></pre>\n<p>10000 is upper limit.</p>\n"}],"owner":{"account_id":23295836,"reputation":37,"user_id":17377261,"display_name":"Proximo_224"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":168,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1639312627,"accepted_answer_id":70323511,"answer_count":3,"score":-1,"last_activity_date":1639312245,"creation_date":1639311305,"question_id":70323428,"body_markdown":"```\r\nimport java.util.Arrays;\r\nimport java.util.Random;\r\nimport java.util.Scanner;\r\n\r\npublic class Test {\r\n\r\n        private static int[] readArray(int arraySize) {\r\n            Random r = new Random();\r\n            int[] arr = new int[arraySize];\r\n\r\n            for (int i=0; i&lt;arr.length; i++) {\r\n                arr[i] = r.nextInt(arraySize);\r\n            }\r\n            return arr;\r\n        }\r\n\r\n        public static void main(String[] args) {\r\n            Scanner sc = new Scanner(System.in);\r\n            System.out.println(&quot;Enter array size: &quot;);\r\n            int size = sc.nextInt();\r\n            int[] arr = readArray(size);\r\n            System.out.println(Arrays.toString(arr));\r\n        }\r\n}\r\n```\r\nHow to modify above code, so that if I input 100, I have an array of 100 numbers without duplicates ?\r\n\r\nThank you.\r\n","title":"How to create an array of random elements without duplicates?","body":"<pre><code>import java.util.Arrays;\nimport java.util.Random;\nimport java.util.Scanner;\n\npublic class Test {\n\n        private static int[] readArray(int arraySize) {\n            Random r = new Random();\n            int[] arr = new int[arraySize];\n\n            for (int i=0; i&lt;arr.length; i++) {\n                arr[i] = r.nextInt(arraySize);\n            }\n            return arr;\n        }\n\n        public static void main(String[] args) {\n            Scanner sc = new Scanner(System.in);\n            System.out.println(&quot;Enter array size: &quot;);\n            int size = sc.nextInt();\n            int[] arr = readArray(size);\n            System.out.println(Arrays.toString(arr));\n        }\n}\n</code></pre>\n<p>How to modify above code, so that if I input 100, I have an array of 100 numbers without duplicates ?</p>\n<p>Thank you.</p>\n"},{"tags":["java","inheritance","constructor","heap-memory"],"comments":[{"owner":{"account_id":279365,"reputation":49126,"user_id":574479,"accept_rate":87,"display_name":"biziclop"},"score":1,"creation_date":1455540781,"post_id":35409829,"comment_id":58520482,"body_markdown":"The short answer is yes. New object instances are created with the `dup` opcode, constructors are only called after that. You can create your own objects without invoking a constructor too, using deserialization for example.","body":"The short answer is yes. New object instances are created with the <code>dup</code> opcode, constructors are only called after that. You can create your own objects without invoking a constructor too, using deserialization for example."},{"owner":{"account_id":6453072,"reputation":37996,"user_id":4999394,"accept_rate":98,"display_name":"Ravindra babu"},"score":1,"creation_date":1455543514,"post_id":35409829,"comment_id":58522296,"body_markdown":"@nits.kk, have a look at this article: https://www.artima.com/designtechniques/initializationP.html","body":"@nits.kk, have a look at this article: <a href=\"https://www.artima.com/designtechniques/initializationP.html\" rel=\"nofollow noreferrer\">artima.com/designtechniques/initializationP.html</a>"}],"answers":[{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1455540783,"creation_date":1455540783,"answer_id":35409890,"question_id":35409829,"body_markdown":"&gt; Does object in java created before Constructor is invoked ?\r\n\r\nYes, otherwise you would not have an object to initialise.\r\n\r\nAt the byte code level, the object is created first, and then the constructor is called, passing in the object to initialise. The internal name for a constructor is `&lt;init&gt;` and it&#39;s return type is always `void` meaning it doesn&#39;t return the object, only initialise it.\r\n\r\nNote: `Unsafe.allocateInstance` will create an object without calling a constructor and is useful for de-serialization.","title":"Does object in java created on heap before Constructor is invoked?","body":"<blockquote>\n  <p>Does object in java created before Constructor is invoked ?</p>\n</blockquote>\n\n<p>Yes, otherwise you would not have an object to initialise.</p>\n\n<p>At the byte code level, the object is created first, and then the constructor is called, passing in the object to initialise. The internal name for a constructor is <code>&lt;init&gt;</code> and it's return type is always <code>void</code> meaning it doesn't return the object, only initialise it.</p>\n\n<p>Note: <code>Unsafe.allocateInstance</code> will create an object without calling a constructor and is useful for de-serialization.</p>\n"}],"owner":{"account_id":236561,"reputation":5234,"user_id":504133,"accept_rate":76,"display_name":"nits.kk"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":158,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":35409890,"answer_count":1,"score":5,"last_activity_date":1639312217,"creation_date":1455540536,"question_id":35409829,"body_markdown":"When overridden methods are called from the Constructor of the base class then also as per the run time polymorphism concept the method defined in the sub class gets invoked. I wonder as how this is taken care of in the JVM, when control is in the base class constructor the constructor of the sub class is yet to be called and hence Object is not yet completely constructed. \r\n\r\nI understand the ill effects of calling overriden methods from base class constructor but just wish to understand as how this is made possible. \r\n\r\nI feel object in the heap is created before constructor is invoked and as constructor is invoked the properties are initialized.  Please provide your valuable inputs for the above.\r\n\r\nBelow is the code demonstrating the same. \r\n\r\n**Base.java**\r\n\r\n    public class Base {\r\n        public Base() {\r\n                System.out.println(&quot;Base constructor is executing...&quot;);\r\n                someMethod();\r\n        }\r\n\r\n        public void someMethod() {\r\n                System.out.println(&quot;someMethod defined in Base class executing...&quot;);\r\n        }\r\n    }\r\n\r\n**Sub.java**\r\n\r\n    public class Sub extends Base{\r\n        public Sub() {\r\n                System.out.println(&quot;Sub constructor is executing...&quot;);\r\n        }\r\n        @Override\r\n        public void someMethod() {\r\n                System.out.println(&quot;someMethod defined in Sub class executing...&quot;);\r\n        }\r\n    }\r\n\r\n**Client.java**\r\n\r\n    public class Client {\r\n        public static void main(String[] args) {\r\n                Sub obj = new Sub();\r\n        }\r\n    }\r\n\r\n**Output on console is** \r\n\r\nBase constructor is executing...\r\n\r\nsomeMethod defined in Sub class executing...\r\n\r\nSub constructor is executing...\r\n\r\n","title":"Does object in java created on heap before Constructor is invoked?","body":"<p>When overridden methods are called from the Constructor of the base class then also as per the run time polymorphism concept the method defined in the sub class gets invoked. I wonder as how this is taken care of in the JVM, when control is in the base class constructor the constructor of the sub class is yet to be called and hence Object is not yet completely constructed. </p>\n\n<p>I understand the ill effects of calling overriden methods from base class constructor but just wish to understand as how this is made possible. </p>\n\n<p>I feel object in the heap is created before constructor is invoked and as constructor is invoked the properties are initialized.  Please provide your valuable inputs for the above.</p>\n\n<p>Below is the code demonstrating the same. </p>\n\n<p><strong>Base.java</strong></p>\n\n<pre><code>public class Base {\n    public Base() {\n            System.out.println(\"Base constructor is executing...\");\n            someMethod();\n    }\n\n    public void someMethod() {\n            System.out.println(\"someMethod defined in Base class executing...\");\n    }\n}\n</code></pre>\n\n<p><strong>Sub.java</strong></p>\n\n<pre><code>public class Sub extends Base{\n    public Sub() {\n            System.out.println(\"Sub constructor is executing...\");\n    }\n    @Override\n    public void someMethod() {\n            System.out.println(\"someMethod defined in Sub class executing...\");\n    }\n}\n</code></pre>\n\n<p><strong>Client.java</strong></p>\n\n<pre><code>public class Client {\n    public static void main(String[] args) {\n            Sub obj = new Sub();\n    }\n}\n</code></pre>\n\n<p><strong>Output on console is</strong> </p>\n\n<p>Base constructor is executing...</p>\n\n<p>someMethod defined in Sub class executing...</p>\n\n<p>Sub constructor is executing...</p>\n"},{"tags":["java","eclipse","spring","maven","pom.xml"],"answers":[{"tags":[],"owner":{"account_id":208605,"reputation":5894,"user_id":459185,"accept_rate":100,"display_name":"Amit Sharma"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1403168924,"creation_date":1387570052,"answer_id":20711177,"question_id":20711056,"body_markdown":"You need not create folder structure yourself. Maven archtype &#39;maven-archetype-webapp&#39; does it for you. Here is a good tutorial to guide you through for basic setting up a MVC project in eclipse (and the right approach): \r\n\r\n - [Create Spring MVC dynamic web project with Maven and make it support Eclipse IDE ](http://www.beingjavaguys.com/2013/08/spring-maven-web-application-in-eclipse.html)\r\n\r\n\r\n        &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n        xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n        &lt;groupId&gt;com.beingjavaguys.sample&lt;/groupId&gt;\r\n        &lt;artifactId&gt;SampleSpringMaven&lt;/artifactId&gt;\r\n        &lt;packaging&gt;war&lt;/packaging&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;name&gt;SampleSpringMaven Maven Webapp&lt;/name&gt;\r\n        &lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n\r\n        &lt;properties&gt;\r\n            &lt;spring.version&gt;3.0.5.RELEASE&lt;/spring.version&gt;\r\n            &lt;jdk.version&gt;1.6&lt;/jdk.version&gt;\r\n        &lt;/properties&gt;\r\n\r\n        &lt;dependencies&gt;\r\n\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;junit&lt;/groupId&gt;\r\n                &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n                &lt;version&gt;3.8.1&lt;/version&gt;\r\n                &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n\r\n        &lt;build&gt;\r\n            &lt;finalName&gt;SampleSpringMaven&lt;/finalName&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;tomcat7-maven-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;2.1&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;url&gt;http://localhost:8080/manager/text&lt;/url&gt;\r\n                        &lt;server&gt;my-tomcat&lt;/server&gt;\r\n                        &lt;path&gt;/SampleSpringMaven&lt;/path&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.0&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;source&gt;${jdk.version}&lt;/source&gt;\r\n                        &lt;target&gt;${jdk.version}&lt;/target&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n\r\n    &lt;/project&gt;\r\n","title":"Minimum pom.xml file for new Maven / Spring MVC project","body":"<p>You need not create folder structure yourself. Maven archtype 'maven-archetype-webapp' does it for you. Here is a good tutorial to guide you through for basic setting up a MVC project in eclipse (and the right approach): </p>\n\n<ul>\n<li><p><a href=\"http://www.beingjavaguys.com/2013/08/spring-maven-web-application-in-eclipse.html\" rel=\"noreferrer\">Create Spring MVC dynamic web project with Maven and make it support Eclipse IDE </a></p>\n\n<pre><code>&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\"&gt;\n&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n&lt;groupId&gt;com.beingjavaguys.sample&lt;/groupId&gt;\n&lt;artifactId&gt;SampleSpringMaven&lt;/artifactId&gt;\n&lt;packaging&gt;war&lt;/packaging&gt;\n&lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n&lt;name&gt;SampleSpringMaven Maven Webapp&lt;/name&gt;\n&lt;url&gt;http://maven.apache.org&lt;/url&gt;\n\n&lt;properties&gt;\n    &lt;spring.version&gt;3.0.5.RELEASE&lt;/spring.version&gt;\n    &lt;jdk.version&gt;1.6&lt;/jdk.version&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n        &lt;version&gt;${spring.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\n        &lt;version&gt;${spring.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n        &lt;version&gt;${spring.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;junit&lt;/groupId&gt;\n        &lt;artifactId&gt;junit&lt;/artifactId&gt;\n        &lt;version&gt;3.8.1&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n\n&lt;build&gt;\n    &lt;finalName&gt;SampleSpringMaven&lt;/finalName&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt;\n            &lt;artifactId&gt;tomcat7-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.1&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;url&gt;http://localhost:8080/manager/text&lt;/url&gt;\n                &lt;server&gt;my-tomcat&lt;/server&gt;\n                &lt;path&gt;/SampleSpringMaven&lt;/path&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.0&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;${jdk.version}&lt;/source&gt;\n                &lt;target&gt;${jdk.version}&lt;/target&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p></p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":6720924,"reputation":5542,"user_id":5180989,"display_name":"Helder Pereira"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1483621333,"creation_date":1483621333,"answer_id":41485827,"question_id":20711056,"body_markdown":"The minimal `pom.xml` file for Spring MVC with Tomcat could be:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n        &lt;groupId&gt;com.spring.maven&lt;/groupId&gt;\r\n        &lt;artifactId&gt;minimal-spring&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;packaging&gt;war&lt;/packaging&gt;\r\n    \r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\r\n                &lt;version&gt;4.3.5.RELEASE&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    \r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;tomcat7-maven-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;2.2&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;path&gt;/&lt;/path&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\nAnd then:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    $ mvn -Dmaven.tomcat.port=8888 tomcat7:run","title":"Minimum pom.xml file for new Maven / Spring MVC project","body":"<p>The minimal <code>pom.xml</code> file for Spring MVC with Tomcat could be:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.spring.maven&lt;/groupId&gt;\n    &lt;artifactId&gt;minimal-spring&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n            &lt;version&gt;4.3.5.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt;\n                &lt;artifactId&gt;tomcat7-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.2&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;path&gt;/&lt;/path&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>And then:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>$ mvn -Dmaven.tomcat.port=8888 tomcat7:run\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17980360,"reputation":53,"user_id":13066866,"display_name":"shrexster42"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639311763,"creation_date":1639311763,"answer_id":70323488,"question_id":20711056,"body_markdown":"Here is the mininum pom.xml for a non spring boot application which will generate a Spring 5, Java 11 war file which you can deploy on tomcat. I&#39;m using the spring bom here in dependency management which locks the version of the spring framework jars\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n        &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n    \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;groupId&gt;com.yourco&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;spring-mvc-demo&lt;/artifactId&gt;\r\n    \t&lt;packaging&gt;war&lt;/packaging&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;name&gt;spring-security Maven Webapp&lt;/name&gt;\r\n    \t&lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n    \r\n    \t&lt;properties&gt;\r\n    \t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    \t\t&lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n    \t\t&lt;java.version&gt;11&lt;/java.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \r\n    \t&lt;dependencyManagement&gt;\r\n    \t\t&lt;dependencies&gt;\r\n    \t\t\t&lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-framework-bom --&gt;\r\n    \t\t\t&lt;dependency&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-framework-bom&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;5.3.9&lt;/version&gt;\r\n    \t\t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n    \t\t\t\t&lt;scope&gt;import&lt;/scope&gt;\r\n    \t\t\t&lt;/dependency&gt;\r\n    \t\t&lt;/dependencies&gt;\r\n    \t&lt;/dependencyManagement&gt;\r\n    \r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;junit&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;3.8.1&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;4.0.1&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \t&lt;build&gt;\r\n    \t\t&lt;finalName&gt;spring-mvc-demo&lt;/finalName&gt;\r\n            &lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;3.8.1&lt;/version&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;source&gt;${java-version}&lt;/source&gt;\r\n    \t\t\t\t\t&lt;target&gt;${java-version}&lt;/target&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;3.3.2&lt;/version&gt;\r\n                &lt;/plugin&gt;\r\n    \t&lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\n","title":"Minimum pom.xml file for new Maven / Spring MVC project","body":"<p>Here is the mininum pom.xml for a non spring boot application which will generate a Spring 5, Java 11 war file which you can deploy on tomcat. I'm using the spring bom here in dependency management which locks the version of the spring framework jars</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;com.yourco&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-mvc-demo&lt;/artifactId&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;spring-security Maven Webapp&lt;/name&gt;\n    &lt;url&gt;http://maven.apache.org&lt;/url&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n        &lt;java.version&gt;11&lt;/java.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-framework-bom --&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-framework-bom&lt;/artifactId&gt;\n                &lt;version&gt;5.3.9&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;3.8.1&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n            &lt;version&gt;4.0.1&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;finalName&gt;spring-mvc-demo&lt;/finalName&gt;\n        &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.8.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;${java-version}&lt;/source&gt;\n                    &lt;target&gt;${java-version}&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.3.2&lt;/version&gt;\n            &lt;/plugin&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n"}],"owner":{"account_id":1210678,"reputation":569,"user_id":1179275,"accept_rate":73,"display_name":"Myna"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47547,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1639311763,"creation_date":1387569488,"question_id":20711056,"body_markdown":"I am completely new to Maven and Spring MVC. What I am looking to do is to set up a new Spring MVC project, using Maven (hopefully this sentence makes sense), and run my web app on Tomcat using Eclipse. \r\n\r\nI am following the tutorial at this link and I have a problem with the `pom.xml` file:\r\n\r\n - [Getting Started with Maven and Spring](http://spring.io/blog/2011/01/17/green-beans-getting-started-with-maven-and-spring/)\r\n\r\nThe tutorial asks to create the folder structure, and to create a pom.xml file. For starters they ask to put this line in pom.xml:\r\n\r\n&lt;!-- language-all: lang-none --&gt;\r\n\r\n    xml 4.0.0org.springsource.greenbeans.mavenexample11.0-SNAPSHOTOur Simple Project\r\n\r\nBut when I do that, my Eclipse throws an error:\r\n\r\n    [INFO] Scanning for projects...\r\n    [ERROR] The build could not read 1 project -&gt; [Help 1]\r\n    [ERROR]\r\n    [ERROR]   The project  (D:\\projectName\\pom.xml) has 1 error\r\n    [ERROR]     Non-parseable POM D:\\projectName\\pom.xml: only whitespace content allowed before start tag and not ` (position: START_DOCUMENT seen `... @1:1)  @ line 1, column 1 -&gt; [Help 2]\r\n    [ERROR]\r\n    [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n    [ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n    [ERROR]\r\n    [ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n    [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/ProjectBuildingException\r\n    [ERROR] [Help 2] http://cwiki.apache.org/confluence/display/MAVEN/ModelParseException\r\n\r\nAny idea on what the right minimum pom.xml could be? I tried many things but it didn&#39;t work for me...\r\n\r\n\r\n","title":"Minimum pom.xml file for new Maven / Spring MVC project","body":"<p>I am completely new to Maven and Spring MVC. What I am looking to do is to set up a new Spring MVC project, using Maven (hopefully this sentence makes sense), and run my web app on Tomcat using Eclipse. </p>\n\n<p>I am following the tutorial at this link and I have a problem with the <code>pom.xml</code> file:</p>\n\n<ul>\n<li><a href=\"http://spring.io/blog/2011/01/17/green-beans-getting-started-with-maven-and-spring/\" rel=\"nofollow noreferrer\">Getting Started with Maven and Spring</a></li>\n</ul>\n\n<p>The tutorial asks to create the folder structure, and to create a pom.xml file. For starters they ask to put this line in pom.xml:</p>\n\n\n\n<pre class=\"lang-none prettyprint-override\"><code>xml 4.0.0org.springsource.greenbeans.mavenexample11.0-SNAPSHOTOur Simple Project\n</code></pre>\n\n<p>But when I do that, my Eclipse throws an error:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>[INFO] Scanning for projects...\n[ERROR] The build could not read 1 project -&gt; [Help 1]\n[ERROR]\n[ERROR]   The project  (D:\\projectName\\pom.xml) has 1 error\n[ERROR]     Non-parseable POM D:\\projectName\\pom.xml: only whitespace content allowed before start tag and not ` (position: START_DOCUMENT seen `... @1:1)  @ line 1, column 1 -&gt; [Help 2]\n[ERROR]\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR]\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/ProjectBuildingException\n[ERROR] [Help 2] http://cwiki.apache.org/confluence/display/MAVEN/ModelParseException\n</code></pre>\n\n<p>Any idea on what the right minimum pom.xml could be? I tried many things but it didn't work for me...</p>\n"},{"tags":["java","arrays","heap-memory"],"comments":[{"owner":{"account_id":1507181,"reputation":13906,"user_id":1410303,"accept_rate":40,"display_name":"SomeDude"},"score":0,"creation_date":1455743712,"post_id":35467852,"comment_id":58631321,"body_markdown":"what is max value that xlArray length can have? which IDE ? java 7 or java 8?","body":"what is max value that xlArray length can have? which IDE ? java 7 or java 8?"},{"owner":{"account_id":6418119,"reputation":3102,"user_id":4975646,"display_name":"callyalater"},"score":0,"creation_date":1455743915,"post_id":35467852,"comment_id":58631430,"body_markdown":"This has to do with the JVM. Because all memory is managed for you in Java, it ensures that you can only use so much memory. When running the program you can specify how large you want your heap to be, but the limits are actually platform dependent (like [this person](https://developer.ibm.com/answers/questions/175172/why-can-i-not-set-a-maximum-heap-setting-xmx-over.html) asked).","body":"This has to do with the JVM. Because all memory is managed for you in Java, it ensures that you can only use so much memory. When running the program you can specify how large you want your heap to be, but the limits are actually platform dependent (like <a href=\"https://developer.ibm.com/answers/questions/175172/why-can-i-not-set-a-maximum-heap-setting-xmx-over.html\" rel=\"nofollow noreferrer\">this person</a> asked)."},{"owner":{"account_id":2792262,"reputation":163847,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":0,"creation_date":1455743939,"post_id":35467852,"comment_id":58631442,"body_markdown":"I see no reason to think that the problem is anything other than the exception indicates: there is not enough free space in your heap to allocate all the requested objects.  If you&#39;re running this in an IDE then the appropriate solution depends on the IDE details.  You may be able to specify that the program should run with a larger heap; you may need to increase the IDE&#39;s own heap; or perhaps you need a better IDE.","body":"I see no reason to think that the problem is anything other than the exception indicates: there is not enough free space in your heap to allocate all the requested objects.  If you&#39;re running this in an IDE then the appropriate solution depends on the IDE details.  You may be able to specify that the program should run with a larger heap; you may need to increase the IDE&#39;s own heap; or perhaps you need a better IDE."},{"owner":{"account_id":6418119,"reputation":3102,"user_id":4975646,"display_name":"callyalater"},"score":0,"creation_date":1455744030,"post_id":35467852,"comment_id":58631491,"body_markdown":"[This post](http://stackoverflow.com/questions/3030263/increasing-the-jvm-maximum-heap-size-for-memory-intensive-applications) addresses this question as well.  The default heap size in oracle is 64M (see [official documentation](http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html)).","body":"<a href=\"http://stackoverflow.com/questions/3030263/increasing-the-jvm-maximum-heap-size-for-memory-intensive-applications\">This post</a> addresses this question as well.  The default heap size in oracle is 64M (see <a href=\"http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html\" rel=\"nofollow noreferrer\">official documentation</a>)."},{"owner":{"account_id":3487016,"reputation":1107,"user_id":2917666,"accept_rate":67,"display_name":"Rakim"},"score":0,"creation_date":1455745157,"post_id":35467852,"comment_id":58632171,"body_markdown":"I am using java8 on IDEA IntelliJ. Trying to find the settings for the heap and update you","body":"I am using java8 on IDEA IntelliJ. Trying to find the settings for the heap and update you"},{"owner":{"account_id":3487016,"reputation":1107,"user_id":2917666,"accept_rate":67,"display_name":"Rakim"},"score":0,"creation_date":1455748160,"post_id":35467852,"comment_id":58633683,"body_markdown":"following this link I tried to change the max heap size but cannot tell if it worked. It didn&#39;t make any difference for the execution for sure. I set it to 2g\nhttps://www.jetbrains.com/idea/help/increasing-memory-heap.html#d1366197e113","body":"following this link I tried to change the max heap size but cannot tell if it worked. It didn&#39;t make any difference for the execution for sure. I set it to 2g <a href=\"https://www.jetbrains.com/idea/help/increasing-memory-heap.html#d1366197e113\" rel=\"nofollow noreferrer\">jetbrains.com/idea/help/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":6006707,"reputation":882,"user_id":4718420,"display_name":"Brian"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1455744346,"creation_date":1455744346,"answer_id":35468080,"question_id":35467852,"body_markdown":"An IDE (any IDE) usually spawns a child process which has its own memory settings. You can usually configure those in some kind of profile.\r\n\r\nIn Eclipse for example select the menu &quot;Run&quot; -&gt; &quot;Run Configurations&quot;. Inside a &quot;Java Application&quot; configuration go to the &quot;Arguments&quot; tab.\r\n\r\nInside you can set VM arguments. Take a look at the Java [Non-Standard Options][1] for information about memory management.\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/technotes/tools/windows/java.html#BABHDABI","title":"Not enough heap space when creating array","body":"<p>An IDE (any IDE) usually spawns a child process which has its own memory settings. You can usually configure those in some kind of profile.</p>\n\n<p>In Eclipse for example select the menu \"Run\" -> \"Run Configurations\". Inside a \"Java Application\" configuration go to the \"Arguments\" tab.</p>\n\n<p>Inside you can set VM arguments. Take a look at the Java <a href=\"https://docs.oracle.com/javase/8/docs/technotes/tools/windows/java.html#BABHDABI\" rel=\"nofollow\">Non-Standard Options</a> for information about memory management.</p>\n"},{"tags":[],"owner":{"account_id":3599116,"reputation":328,"user_id":3002853,"display_name":"a.s.p."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1455744602,"creation_date":1455744602,"answer_id":35468158,"question_id":35467852,"body_markdown":"When calling java use:\r\n\r\n - -Xms&lt;size&gt; specifies the initial Java heap size.\r\n - -Xmx&lt;size&gt; the maximum Java heap size.(The default size is 128mb).\r\n\r\n----------\r\nTake a look here: https://docs.oracle.com/javase/8/docs/technotes/tools/windows/java.html\r\n\r\nIf you are using an ide like netbeans, eclipse etc you can find Run Configurations options -&gt; Arguments -&gt; VM Arguments and set Xmx and (or) Xms.\r\n\r\n----------\r\nhttps://stackoverflow.com/questions/2294268/how-can-i-increase-the-jvm-memory","title":"Not enough heap space when creating array","body":"<p>When calling java use:</p>\n\n<ul>\n<li>-Xms specifies the initial Java heap size.</li>\n<li>-Xmx the maximum Java heap size.(The default size is 128mb).</li>\n</ul>\n\n<hr>\n\n<p>Take a look here: <a href=\"https://docs.oracle.com/javase/8/docs/technotes/tools/windows/java.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/technotes/tools/windows/java.html</a></p>\n\n<p>If you are using an ide like netbeans, eclipse etc you can find Run Configurations options -> Arguments -> VM Arguments and set Xmx and (or) Xms.</p>\n\n<hr>\n\n<p><a href=\"https://stackoverflow.com/questions/2294268/how-can-i-increase-the-jvm-memory\">How can I increase the JVM memory?</a></p>\n"}],"owner":{"account_id":3487016,"reputation":1107,"user_id":2917666,"accept_rate":67,"display_name":"Rakim"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":410,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1639311044,"answer_count":2,"score":0,"last_activity_date":1639310383,"creation_date":1455743529,"question_id":35467852,"body_markdown":"I wrote the following code to turn a one dimensional array to a 2D array. Whenever I use it for small size arrays it works fine, whenever the array gets too big the code throws a `java.lang.OutOfMemoryError: Java heap space` exception.\r\n\r\n    byte[][] twoD = new byte[(int)Math.ceil(xlArray.length / (double)4096)][4096];\r\n\r\nIs it just a problem caused in the IDE as it doesn&#39;t have access to enough heap space on the machine or more than that?","title":"Not enough heap space when creating array","body":"<p>I wrote the following code to turn a one dimensional array to a 2D array. Whenever I use it for small size arrays it works fine, whenever the array gets too big the code throws a <code>java.lang.OutOfMemoryError: Java heap space</code> exception.</p>\n\n<pre><code>byte[][] twoD = new byte[(int)Math.ceil(xlArray.length / (double)4096)][4096];\n</code></pre>\n\n<p>Is it just a problem caused in the IDE as it doesn't have access to enough heap space on the machine or more than that?</p>\n"},{"tags":["java","neo4j","heap-memory"],"comments":[{"owner":{"account_id":194909,"reputation":4585,"user_id":437506,"accept_rate":47,"display_name":"Kedar Mhaswade"},"score":0,"creation_date":1459452249,"post_id":36341296,"comment_id":60305843,"body_markdown":"Wow! You have access to that kind of servers! Why are you limiting the max heap that way to 4G only? Why don&#39;t you start your app like: `java -server -Xmx64G -jar myapp.jar`?","body":"Wow! You have access to that kind of servers! Why are you limiting the max heap that way to 4G only? Why don&#39;t you start your app like: <code>java -server -Xmx64G -jar myapp.jar</code>?"},{"owner":{"account_id":6408819,"reputation":21,"user_id":4969190,"accept_rate":25,"display_name":"Siavash Sheikhizadeh"},"score":0,"creation_date":1459457939,"post_id":36341296,"comment_id":60309064,"body_markdown":"Hi, because I want to show my program is memory-efficient compared to the other similar tools. So I set these parameters: java -server -XX:+UseConcMarkSweepGC  -Xmx4g  -jar ... Actually the first run even works with -Xmx2g!","body":"Hi, because I want to show my program is memory-efficient compared to the other similar tools. So I set these parameters: java -server -XX:+UseConcMarkSweepGC  -Xmx4g  -jar ... Actually the first run even works with -Xmx2g!"},{"owner":{"account_id":376992,"reputation":41434,"user_id":728812,"display_name":"Michael Hunger"},"score":0,"creation_date":1459474399,"post_id":36341296,"comment_id":60314514,"body_markdown":"Which version are you using?","body":"Which version are you using?"}],"answers":[{"tags":[],"owner":{"account_id":376992,"reputation":41434,"user_id":728812,"display_name":"Michael Hunger"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1459474402,"creation_date":1459474402,"answer_id":36346593,"question_id":36341296,"body_markdown":"Just configure the page-cache size explicitly:\r\n\r\n    dbms.pagecache.memory=5G\r\n\r\ndepending on you storage size on disk.","title":"Neo4j heap size","body":"<p>Just configure the page-cache size explicitly:</p>\n\n<pre><code>dbms.pagecache.memory=5G\n</code></pre>\n\n<p>depending on you storage size on disk.</p>\n"}],"owner":{"account_id":6408819,"reputation":21,"user_id":4969190,"accept_rate":25,"display_name":"Siavash Sheikhizadeh"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":340,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1639310340,"creation_date":1459450047,"question_id":36341296,"body_markdown":"When I run my java embedded Neo4j program with the same JVM parameters on two different linux servers, one with 24 cores and 64G RAM successfully does the job but the other gives me a heap size error although it has 768G RAM and 32 cores. Error happens at this line of the code:\r\ngraphDb = new GraphDatabaseFactory().newEmbeddedDatabaseBuilder(PATH+GRAPH_DATABASE_PATH)\r\n                    .setConfig( &quot;keep_logical_logs&quot;,&quot;100M size&quot;).newGraphDatabase();\r\n\r\nI set -Xmx4g in both runs. Could the error be somehow related to the number of users and the load on the second server, as many users share this machine? Here is the Error I receive:\r\nException in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space\r\n        at org.neo4j.io.pagecache.impl.muninn.MuninnPageCache.&lt;init&gt;(MuninnPageCache.java:246)\r\n        at org.neo4j.kernel.impl.pagecache.ConfiguringPageCacheFactory.createPageCache(ConfiguringPageCacheFactory.java:94)\r\n        at org.neo4j.kernel.impl.pagecache.ConfiguringPageCacheFactory.getOrCreatePageCache(ConfiguringPageCacheFactory.java:85)\r\n        at org.neo4j.kernel.impl.factory.PlatformModule.createPageCache(PlatformModule.java:279)\r\n        at org.neo4j.kernel.impl.factory.PlatformModule.&lt;init&gt;(PlatformModule.java:156)\r\n        at org.neo4j.kernel.impl.factory.GraphDatabaseFacadeFactory.createPlatform(GraphDatabaseFacadeFactory.java:181)\r\n        at org.neo4j.kernel.impl.factory.GraphDatabaseFacadeFactory.newFacade(GraphDatabaseFacadeFactory.java:124)\r\n        at org.neo4j.kernel.impl.factory.CommunityFacadeFactory.newFacade(CommunityFacadeFactory.java:43)\r\n        at org.neo4j.kernel.impl.factory.GraphDatabaseFacadeFactory.newFacade(GraphDatabaseFacadeFactory.java:108)\r\n        at org.neo4j.graphdb.factory.GraphDatabaseFactory.newDatabase(GraphDatabaseFactory.java:129)\r\n        at org.neo4j.graphdb.factory.GraphDatabaseFactory$1.newDatabase(GraphDatabaseFactory.java:117)\r\n        at org.neo4j.graphdb.factory.GraphDatabaseBuilder.newGraphDatabase(GraphDatabaseBuilder.java:185)","title":"Neo4j heap size","body":"<p>When I run my java embedded Neo4j program with the same JVM parameters on two different linux servers, one with 24 cores and 64G RAM successfully does the job but the other gives me a heap size error although it has 768G RAM and 32 cores. Error happens at this line of the code:\ngraphDb = new GraphDatabaseFactory().newEmbeddedDatabaseBuilder(PATH+GRAPH_DATABASE_PATH)\n                    .setConfig( \"keep_logical_logs\",\"100M size\").newGraphDatabase();</p>\n\n<p>I set -Xmx4g in both runs. Could the error be somehow related to the number of users and the load on the second server, as many users share this machine? Here is the Error I receive:\nException in thread \"main\" java.lang.OutOfMemoryError: Java heap space\n        at org.neo4j.io.pagecache.impl.muninn.MuninnPageCache.(MuninnPageCache.java:246)\n        at org.neo4j.kernel.impl.pagecache.ConfiguringPageCacheFactory.createPageCache(ConfiguringPageCacheFactory.java:94)\n        at org.neo4j.kernel.impl.pagecache.ConfiguringPageCacheFactory.getOrCreatePageCache(ConfiguringPageCacheFactory.java:85)\n        at org.neo4j.kernel.impl.factory.PlatformModule.createPageCache(PlatformModule.java:279)\n        at org.neo4j.kernel.impl.factory.PlatformModule.(PlatformModule.java:156)\n        at org.neo4j.kernel.impl.factory.GraphDatabaseFacadeFactory.createPlatform(GraphDatabaseFacadeFactory.java:181)\n        at org.neo4j.kernel.impl.factory.GraphDatabaseFacadeFactory.newFacade(GraphDatabaseFacadeFactory.java:124)\n        at org.neo4j.kernel.impl.factory.CommunityFacadeFactory.newFacade(CommunityFacadeFactory.java:43)\n        at org.neo4j.kernel.impl.factory.GraphDatabaseFacadeFactory.newFacade(GraphDatabaseFacadeFactory.java:108)\n        at org.neo4j.graphdb.factory.GraphDatabaseFactory.newDatabase(GraphDatabaseFactory.java:129)\n        at org.neo4j.graphdb.factory.GraphDatabaseFactory$1.newDatabase(GraphDatabaseFactory.java:117)\n        at org.neo4j.graphdb.factory.GraphDatabaseBuilder.newGraphDatabase(GraphDatabaseBuilder.java:185)</p>\n"},{"tags":["java","hbase","heap-memory","cloudera-manager"],"owner":{"account_id":256642,"reputation":6092,"user_id":537503,"accept_rate":42,"display_name":"Andy Dufresne"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":808,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1639310313,"creation_date":1460097063,"question_id":36493017,"body_markdown":"I am using cloudera version 5.5.2. I have been trying to set the region server max heap size in [cloudera manager][1] but irrespective of what value I set it to I always see it as 1.7 GB on the [hbase region server UI][2] and jconsole.\r\n\r\nI have even tried setting it through hbase region server opts as shown [here][3] but that fails to start the jvm. The error stats &quot;Invalid max heap size&quot;.\r\n\r\nWhat could be going wrong?\r\n\r\n**Update 1** : \r\n\r\nUpdating HBASE_HEAPSIZE to the desired heap size works but that updates the heap size for both the hbase master and the region server. What could be the setting to update just the region server heap size?\r\nThanks!\r\n\r\n  [1]: https://i.stack.imgur.com/Kmynz.png\r\n  [2]: https://i.stack.imgur.com/ZHjnJ.png\r\n  [3]: https://i.stack.imgur.com/oHg8T.png","title":"Setting HBase Region Server Heap Size Through Cloudera Manager","body":"<p>I am using cloudera version 5.5.2. I have been trying to set the region server max heap size in <a href=\"https://i.stack.imgur.com/Kmynz.png\" rel=\"nofollow\">cloudera manager</a> but irrespective of what value I set it to I always see it as 1.7 GB on the <a href=\"https://i.stack.imgur.com/ZHjnJ.png\" rel=\"nofollow\">hbase region server UI</a> and jconsole.</p>\n\n<p>I have even tried setting it through hbase region server opts as shown <a href=\"https://i.stack.imgur.com/oHg8T.png\" rel=\"nofollow\">here</a> but that fails to start the jvm. The error stats \"Invalid max heap size\".</p>\n\n<p>What could be going wrong?</p>\n\n<p><strong>Update 1</strong> : </p>\n\n<p>Updating HBASE_HEAPSIZE to the desired heap size works but that updates the heap size for both the hbase master and the region server. What could be the setting to update just the region server heap size?\nThanks!</p>\n"},{"tags":["java","heap-memory"],"comments":[{"owner":{"account_id":205049,"reputation":73345,"user_id":453596,"accept_rate":76,"display_name":"kamaci"},"score":1,"creation_date":1460390817,"post_id":36553739,"comment_id":60708017,"body_markdown":"Did you try to increase Swap for Linux or Virtual Memory for Windows?","body":"Did you try to increase Swap for Linux or Virtual Memory for Windows?"},{"owner":{"account_id":7902935,"reputation":6346,"user_id":5969411,"accept_rate":80,"display_name":"ManoDestra"},"score":1,"creation_date":1460391135,"post_id":36553739,"comment_id":60708220,"body_markdown":"Possible duplicate of [Increase heap size in Java](http://stackoverflow.com/questions/1565388/increase-heap-size-in-java)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/1565388/increase-heap-size-in-java\">Increase heap size in Java</a>"},{"owner":{"account_id":6661882,"reputation":355,"user_id":5140713,"display_name":"Konrad"},"score":0,"creation_date":1460391315,"post_id":36553739,"comment_id":60708360,"body_markdown":"Did you increase the max memory setting of the VM? How do you start the programm (command line)?","body":"Did you increase the max memory setting of the VM? How do you start the programm (command line)?"},{"owner":{"account_id":1136549,"reputation":18926,"user_id":1197249,"accept_rate":39,"display_name":"Jim"},"score":0,"creation_date":1460394891,"post_id":36553739,"comment_id":60710536,"body_markdown":"What OS? 32 bit or 64 bit? How much RAM?","body":"What OS? 32 bit or 64 bit? How much RAM?"}],"answers":[{"tags":[],"owner":{"account_id":2085113,"reputation":105,"user_id":1856272,"accept_rate":25,"display_name":"Jaspreet Singh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1460391488,"creation_date":1460391488,"answer_id":36554069,"question_id":36553739,"body_markdown":"You can&#39;t use harddisk space for running the java program, \r\n\r\nYou can do two things :\r\n\r\n 1. Increase heap memory using the following command\r\n\r\n      java -Xmx1024m  -jar Test.jar\r\n    \r\n\r\n 2. Use Java8 which uses the metaspace which uses the native memory \r\n    https://dzone.com/articles/java-8-permgen-metaspace\r\n\r\n ","title":"Using Hard Disk Space as Java heap?","body":"<p>You can't use harddisk space for running the java program, </p>\n\n<p>You can do two things :</p>\n\n<ol>\n<li><p>Increase heap memory using the following command</p>\n\n<p>java -Xmx1024m  -jar Test.jar</p></li>\n<li><p>Use Java8 which uses the metaspace which uses the native memory \n<a href=\"https://dzone.com/articles/java-8-permgen-metaspace\" rel=\"nofollow\">https://dzone.com/articles/java-8-permgen-metaspace</a></p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":194909,"reputation":4585,"user_id":437506,"accept_rate":47,"display_name":"Kedar Mhaswade"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1460394208,"creation_date":1460393127,"answer_id":36554580,"question_id":36553739,"body_markdown":"I am assuming that you have a JAR file of Java classes without accompanying source code. This is of course problematic, but it&#39;s important for you to know what those classes are doing because if there is some insurmountable memory leak that those classes cause (Yes, Java does have memory leaks in the form of the so-called Unintended Object Retentions) then following efforts may still fall short. \r\n\r\nHaving said that, it should be noted that the JVM (In particular, the Oracle JVM) provides some configurability in terms of how much _heap_ memory you want it to use to run your Java app. The single most important configuration parameter is `-Xmx`, the so-called &quot;Maximum Heap Memory&quot;. When you specify this parameter, like e.g. -Xmx6g, the JVM, _at the startup_, will ask the Operating System (on which the JVM runs) for that much of memory. The exact details are a bit complicated, but if that amount of memory is not available at the startup, the JVM startup fails. There is complicated algorithm to determine the _default_ value for this heap memory but if you have requirements, you should override the default like above. In the above case, your JVM (`java -Xmx6g -jar test.jar`) is asking for 6 GB of heap to start with.\r\n\r\nDetermining the correct value of the heap memory that the JVM would need over its lifetime is somewhat of an art, although there are several things you can consider. The most important thing is understanding the runtime characteristics of your app. You should know how and when the objects are allocated and deallocated (so that the Garbage Collector _kicks in_) so that you do not run out of the heap space when the next allocation request is made by the JVM to the OS. And it seems to me that this is what is happening in your case -- somewhere, a bunch of objects are being constructed, requiring memory that the OS does not have.\r\n\r\nObviously, the OS will try to see if that much of physical RAM is available and if it does, the JVM&#39;s request will be granted. This is the happy path. \r\n\r\nThis happy path, however, is not always possible in that enough RAM is not available. Even then, the OS can grant the request because of this OS concept called the _Virtual Memory_. Without going into too many details (you can read up on virtual memory), it would suffice to say that OS has a mechanism where it can use the hard disk space as RAM via the mechanism of _page swapping_. In other words, it can swap the data into physical RAM or swap data out to hard disk in a way that is transparent to all the processes running on it (including the JVM, which is nothing but a process named `java`).\r\n\r\nThis is where your sysadmin skills help you. There are ways to increase the swap space on your OS. For instance, on Linux, you can use the [swapon](https://www.digitalocean.com/community/tutorials/how-to-add-swap-on-ubuntu-14-04) command to do that. This will invariably result in a phenomenon called _thrashing_, but that&#39;s the best you can do (you can also get rid of other programs to save memory).\r\n\r\nAgain, this might get you only _this far_. If there&#39;s a memory leak in your program, no amount of GC (reclaiming the unused memory, a great trait of the JVM) or swap space may help you and sooner or later you&#39;ll get the dreaded `OutOfMemoryError`.\r\n\r\nYou should consider specifying [-XX:HeapDumpOnOutOfMemoryError](https://stackoverflow.com/questions/5554341/set-a-jvm-to-dump-heap-when-outofmemoryerror-is-thrown) to see what the JVM was doing at the time of this error.","title":"Using Hard Disk Space as Java heap?","body":"<p>I am assuming that you have a JAR file of Java classes without accompanying source code. This is of course problematic, but it's important for you to know what those classes are doing because if there is some insurmountable memory leak that those classes cause (Yes, Java does have memory leaks in the form of the so-called Unintended Object Retentions) then following efforts may still fall short. </p>\n\n<p>Having said that, it should be noted that the JVM (In particular, the Oracle JVM) provides some configurability in terms of how much <em>heap</em> memory you want it to use to run your Java app. The single most important configuration parameter is <code>-Xmx</code>, the so-called \"Maximum Heap Memory\". When you specify this parameter, like e.g. -Xmx6g, the JVM, <em>at the startup</em>, will ask the Operating System (on which the JVM runs) for that much of memory. The exact details are a bit complicated, but if that amount of memory is not available at the startup, the JVM startup fails. There is complicated algorithm to determine the <em>default</em> value for this heap memory but if you have requirements, you should override the default like above. In the above case, your JVM (<code>java -Xmx6g -jar test.jar</code>) is asking for 6 GB of heap to start with.</p>\n\n<p>Determining the correct value of the heap memory that the JVM would need over its lifetime is somewhat of an art, although there are several things you can consider. The most important thing is understanding the runtime characteristics of your app. You should know how and when the objects are allocated and deallocated (so that the Garbage Collector <em>kicks in</em>) so that you do not run out of the heap space when the next allocation request is made by the JVM to the OS. And it seems to me that this is what is happening in your case -- somewhere, a bunch of objects are being constructed, requiring memory that the OS does not have.</p>\n\n<p>Obviously, the OS will try to see if that much of physical RAM is available and if it does, the JVM's request will be granted. This is the happy path. </p>\n\n<p>This happy path, however, is not always possible in that enough RAM is not available. Even then, the OS can grant the request because of this OS concept called the <em>Virtual Memory</em>. Without going into too many details (you can read up on virtual memory), it would suffice to say that OS has a mechanism where it can use the hard disk space as RAM via the mechanism of <em>page swapping</em>. In other words, it can swap the data into physical RAM or swap data out to hard disk in a way that is transparent to all the processes running on it (including the JVM, which is nothing but a process named <code>java</code>).</p>\n\n<p>This is where your sysadmin skills help you. There are ways to increase the swap space on your OS. For instance, on Linux, you can use the <a href=\"https://www.digitalocean.com/community/tutorials/how-to-add-swap-on-ubuntu-14-04\" rel=\"nofollow noreferrer\">swapon</a> command to do that. This will invariably result in a phenomenon called <em>thrashing</em>, but that's the best you can do (you can also get rid of other programs to save memory).</p>\n\n<p>Again, this might get you only <em>this far</em>. If there's a memory leak in your program, no amount of GC (reclaiming the unused memory, a great trait of the JVM) or swap space may help you and sooner or later you'll get the dreaded <code>OutOfMemoryError</code>.</p>\n\n<p>You should consider specifying <a href=\"https://stackoverflow.com/questions/5554341/set-a-jvm-to-dump-heap-when-outofmemoryerror-is-thrown\">-XX:HeapDumpOnOutOfMemoryError</a> to see what the JVM was doing at the time of this error.</p>\n"}],"owner":{"account_id":5637492,"reputation":247,"user_id":5984358,"display_name":"S R Maiti"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3851,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"closed_date":1460401618,"accepted_answer_id":36554580,"answer_count":2,"score":3,"last_activity_date":1639310293,"creation_date":1460390607,"question_id":36553739,"body_markdown":"I am trying to run a jar file which gives &#39;out of memory error&#39; after running some time. I have searched sometimes about using Hard Disk space as java heap, but most of the solutions suggest optimizing code or using something like &#39;Ehcache&#39;. But the problem is, I have only the jar file and I did not write its code. So, my question is **Can I use some mechanism, or software, by which I can make java use the hard disk space as heap, without modifying the code of the jar file in any way?**","title":"Using Hard Disk Space as Java heap?","body":"<p>I am trying to run a jar file which gives 'out of memory error' after running some time. I have searched sometimes about using Hard Disk space as java heap, but most of the solutions suggest optimizing code or using something like 'Ehcache'. But the problem is, I have only the jar file and I did not write its code. So, my question is <strong>Can I use some mechanism, or software, by which I can make java use the hard disk space as heap, without modifying the code of the jar file in any way?</strong></p>\n"},{"tags":["java","neo4j","cypher","heap-memory"],"answers":[{"tags":[],"owner":{"account_id":3180712,"reputation":8436,"user_id":2954199,"display_name":"William Lyon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1460941947,"creation_date":1460941947,"answer_id":36684009,"question_id":36676748,"body_markdown":"You may need to configure the amount of memory available to Neo4j. You can configure Neo4j server heap size by editing `conf/neo4j-wrapper.conf`:\r\n\r\n    wrapper.java.maxmemory=NUMBER_OF_MB_HERE\r\n\r\nSee [this page](http://neo4j.com/docs/stable/performance-guide.html#_configuring_heap_size_and_garbage_collection) for more info.\r\n\r\nHowever, looking at your queries (which are doing graph global all-pairs operations) you might want to consider doing them in batches. For example:\r\n\r\n    // Find users with overlapping movie ratings\r\n    MATCH (u1:User)-[:RATED]-&gt;(:Movie)&lt;-[:RATED]-(u2:User)\r\n    // only for users whose similarity has not yet been calculated\r\n    WHERE NOT exists((u1)-[:SIMILARITY]-(u2))\r\n    // consider only up to 50 pairs of users\r\n    WITH u1, u2 LIMIT 50\r\n    // compute similarity metric and set SIMILARITY relationship with coef\r\n    ...\r\n\r\nThen execute this query repeatedly until you have computed the similarity metric for all users with overlapping movie ratings.","title":"Neo4j: Java heap space error after query exectuion with create unique statement","body":"<p>You may need to configure the amount of memory available to Neo4j. You can configure Neo4j server heap size by editing <code>conf/neo4j-wrapper.conf</code>:</p>\n\n<pre><code>wrapper.java.maxmemory=NUMBER_OF_MB_HERE\n</code></pre>\n\n<p>See <a href=\"http://neo4j.com/docs/stable/performance-guide.html#_configuring_heap_size_and_garbage_collection\" rel=\"nofollow\">this page</a> for more info.</p>\n\n<p>However, looking at your queries (which are doing graph global all-pairs operations) you might want to consider doing them in batches. For example:</p>\n\n<pre><code>// Find users with overlapping movie ratings\nMATCH (u1:User)-[:RATED]-&gt;(:Movie)&lt;-[:RATED]-(u2:User)\n// only for users whose similarity has not yet been calculated\nWHERE NOT exists((u1)-[:SIMILARITY]-(u2))\n// consider only up to 50 pairs of users\nWITH u1, u2 LIMIT 50\n// compute similarity metric and set SIMILARITY relationship with coef\n...\n</code></pre>\n\n<p>Then execute this query repeatedly until you have computed the similarity metric for all users with overlapping movie ratings.</p>\n"},{"tags":[],"owner":{"account_id":14889041,"reputation":425,"user_id":10751343,"display_name":"S. Florin"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1596985151,"creation_date":1596985151,"answer_id":63327821,"question_id":36676748,"body_markdown":"I had a similar problem (in version 4.1) and the properties could be found in `conf/neo4j.conf` or select active database -&gt; Manage -&gt; Settings and increase:\r\n\r\n    dbms.memory.heap.initial_size\r\n    dbms.memory.heap.max_size\r\n\r\nMore details about performance could be found in [documentation][1]\r\n\r\n\r\n  [1]: https://neo4j.com/developer/guide-performance-tuning/","title":"Neo4j: Java heap space error after query exectuion with create unique statement","body":"<p>I had a similar problem (in version 4.1) and the properties could be found in <code>conf/neo4j.conf</code> or select active database -&gt; Manage -&gt; Settings and increase:</p>\n<pre><code>dbms.memory.heap.initial_size\ndbms.memory.heap.max_size\n</code></pre>\n<p>More details about performance could be found in <a href=\"https://neo4j.com/developer/guide-performance-tuning/\" rel=\"nofollow noreferrer\">documentation</a></p>\n"}],"owner":{"account_id":4838951,"reputation":49,"user_id":3904604,"display_name":"user3904604"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2479,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":36684009,"answer_count":2,"score":1,"last_activity_date":1639310244,"creation_date":1460897521,"question_id":36676748,"body_markdown":"I am trying to test some queries on some neo4j databases, different in the amount of data. If I test that queries on small amount of data, everything goes right and execution time is small, but when I start execute queries on database with 2794 nodes and 94863 relations, It will take a long time to get following error in Neo4j API: \r\n**Java heap space  Neo.DatabaseError.General.UnknownFailure**\r\n[enter image description here][1]\r\nFirst query:\r\n\r\n    \tMATCH (u1:User)-[r1:Rated]-&gt;(m:Movie)&lt;-[r2:Rated]-(u2:User)\r\n\tWITH 1.0*SUM(r1.Rate)/count(r1) as pX, \r\n\t1.0*SUM(r2.Rate)/count(r2) as pY, u1, u2\r\n\tMATCH (u1:User)-[r1:Rated]-&gt;(m:Movie)&lt;-[r2:Rated]-(u2:User)\r\n\tWITH SUM((r1.Rate-pX)*(r2.Rate-pY)) as pomProm,\r\n\tSQRT(SUM((r1.Rate-pX)^2)) as sumX, \r\n\tSQRT(SUM((r2.Rate-pY)^2)) as sumY, pX,pY,u1,u2\r\n\tCREATE UNIQUE (u1)-[s:SIMILARITY1]-(u2)\r\n\tSET s.value = pomProm / (sumX * sumY)\r\n\r\nAnd second query\r\n\r\n    \tMATCH (u1:User)-[r1:Rated]-&gt;(m:Movie)&lt;-[r2:Rated]-(u2:User)\r\n\tWITH SUM(r1.Rate * r2.Rate) AS pomProm,\r\n    SQRT(REDUCE(r1Pom = 0, i IN COLLECT(r1.Rate) | r1Pom + toInt(i^2))) AS r1V,\r\n    SQRT(REDUCE(r2Pom = 0, j IN COLLECT(r2.Rate) | r2Pom + toInt(j^2))) AS r2V,\r\n    u1, u2\r\n\tCREATE UNIQUE (u1)-[s:SIMILARITY2]-(u2)\r\n\tSET s.value = pomProm / (r1V * r2V)\r\n\r\nData in database are generated from following Java code:\r\n\r\n    public enum Labels implements Label {\r\n        Movie, User\r\n    }\r\n\r\n    public enum RelationshipLabels implements RelationshipType {\r\n        Rated\r\n    }\r\n\r\n    public static void main(String[] args) throws IOException, BiffException {\r\n        Workbook workbook = Workbook.getWorkbook(new File(&quot;C:/Users/User/Desktop/DP/dvdlist.xls&quot;));\r\n        Workbook names = Workbook.getWorkbook(new File(&quot;C:/Users/User/Desktop/DP/names.xls&quot;));\r\n        String path = new String(&quot;C:/Users/User/Documents/Neo4j/test7.graphDatabase&quot;);\r\n        GraphDatabaseFactory dbFactory = new GraphDatabaseFactory();\r\n        GraphDatabaseService db = dbFactory.newEmbeddedDatabase(path);\r\n        int countMovies = 0;\r\n        int numberOfSheets = workbook.getNumberOfSheets();\r\n        IndexDefinition indexDefinition;\r\n        try (Transaction tx = db.beginTx()) {\r\n            Schema schema = db.schema();\r\n            indexDefinition = schema.indexFor(DynamicLabel.label(Labels.Movie.toString()))\r\n                    .on(&quot;Name&quot;)\r\n                    .create();\r\n            tx.success();\r\n        }\r\n        try (Transaction tx = db.beginTx()) {\r\n            Schema schema = db.schema();\r\n            indexDefinition = schema.indexFor(DynamicLabel.label(Labels.Movie.toString()))\r\n                    .on(&quot;Genre&quot;)\r\n                    .create();\r\n            tx.success();\r\n        }\r\n        try (Transaction tx = db.beginTx()) {\r\n            Schema schema = db.schema();\r\n            indexDefinition = schema.indexFor(DynamicLabel.label(Labels.User.toString()))\r\n                    .on(&quot;Name&quot;)\r\n                    .create();\r\n            tx.success();\r\n        }\r\n        try (Transaction tx = db.beginTx()) {\r\n\r\n            for (int i = 0; i &lt; numberOfSheets; i++) {\r\n                Sheet sheet = workbook.getSheet(i);\r\n                int numberOfRows = 6000;//sheet.getRows();\r\n                for (int j = 1; j &lt; numberOfRows; j++) {\r\n                    Cell cell1 = sheet.getCell(0, j);\r\n                    Cell cell2 = sheet.getCell(9, j);\r\n                    Node movie = db.createNode(Labels.Movie);\r\n                    movie.setProperty(&quot;Name&quot;, cell1.getContents());\r\n                    movie.setProperty(&quot;Genre&quot;, cell2.getContents());\r\n\r\n                    countMovies++;\r\n                    \r\n                }\r\n\r\n            }\r\n            tx.success();\r\n        } catch (Exception e) {\r\n            System.out.println(&quot;Something goes wrong!&quot;);\r\n        }\r\n\r\n        Random random = new Random();\r\n        int countUsers = 0;\r\n        Sheet sheetNames = names.getSheet(0);\r\n        Cell cell;\r\n        Node user;\r\n        \r\n        int numberOfUsers = 1500;//sheetNames.getRows();\r\n        for (int i = 0; i &lt; numberOfUsers; i++) {\r\n            cell = sheetNames.getCell(0, i);\r\n            try (Transaction tx = db.beginTx()) {\r\n                user = db.createNode(Labels.User);\r\n                user.setProperty(&quot;Name&quot;, cell.getContents());\r\n                List&lt;Integer&gt; listForUser = new ArrayList&lt;&gt;();\r\n\r\n                for (int x = 0; x &lt; 1000; x++) {\r\n                    int j = random.nextInt(countMovies);\r\n                    if (!listForUser.isEmpty()) {\r\n                        if (!listForUser.contains(j)) {\r\n                            listForUser.add(j);\r\n                        }\r\n                    } else {\r\n                        listForUser.add(j);\r\n                    }\r\n                }\r\n                for (int j = 0; j &lt; listForUser.size(); j++) {\r\n                    Node movies = db.getNodeById(listForUser.get(j));\r\n                    int rate = 0;\r\n\r\n                    rate = random.nextInt(10) + 1;\r\n\r\n                    Relationship relationship = user.createRelationshipTo(movies, RelationshipLabels.Rated);\r\n                    relationship.setProperty(&quot;Rate&quot;, rate);\r\n                    \r\n                }\r\n                System.out.println(&quot;Number of user: &quot; + countUsers);\r\n                tx.success();\r\n            } catch (Exception e) {\r\n                System.out.println(&quot;Something goes wrong!&quot;);\r\n            }\r\n            countUsers++;\r\n        }\r\n\r\n        workbook.close();\r\n    }\r\n\r\n}\r\n\r\nDoes anyone know, how to solve this issue? Or there is some walkaround, how to get results from that queries on a database with a large amount of data? Or some query or settings improvement? I will really appreciate it. \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xSFOG.png","title":"Neo4j: Java heap space error after query exectuion with create unique statement","body":"<p>I am trying to test some queries on some neo4j databases, different in the amount of data. If I test that queries on small amount of data, everything goes right and execution time is small, but when I start execute queries on database with 2794 nodes and 94863 relations, It will take a long time to get following error in Neo4j API: \n<strong>Java heap space  Neo.DatabaseError.General.UnknownFailure</strong>\n<a href=\"https://i.stack.imgur.com/xSFOG.png\" rel=\"nofollow\">enter image description here</a>\nFirst query:</p>\n\n<pre><code>    MATCH (u1:User)-[r1:Rated]-&gt;(m:Movie)&lt;-[r2:Rated]-(u2:User)\nWITH 1.0*SUM(r1.Rate)/count(r1) as pX, \n1.0*SUM(r2.Rate)/count(r2) as pY, u1, u2\nMATCH (u1:User)-[r1:Rated]-&gt;(m:Movie)&lt;-[r2:Rated]-(u2:User)\nWITH SUM((r1.Rate-pX)*(r2.Rate-pY)) as pomProm,\nSQRT(SUM((r1.Rate-pX)^2)) as sumX, \nSQRT(SUM((r2.Rate-pY)^2)) as sumY, pX,pY,u1,u2\nCREATE UNIQUE (u1)-[s:SIMILARITY1]-(u2)\nSET s.value = pomProm / (sumX * sumY)\n</code></pre>\n\n<p>And second query</p>\n\n<pre><code>    MATCH (u1:User)-[r1:Rated]-&gt;(m:Movie)&lt;-[r2:Rated]-(u2:User)\nWITH SUM(r1.Rate * r2.Rate) AS pomProm,\nSQRT(REDUCE(r1Pom = 0, i IN COLLECT(r1.Rate) | r1Pom + toInt(i^2))) AS r1V,\nSQRT(REDUCE(r2Pom = 0, j IN COLLECT(r2.Rate) | r2Pom + toInt(j^2))) AS r2V,\nu1, u2\nCREATE UNIQUE (u1)-[s:SIMILARITY2]-(u2)\nSET s.value = pomProm / (r1V * r2V)\n</code></pre>\n\n<p>Data in database are generated from following Java code:</p>\n\n<pre><code>public enum Labels implements Label {\n    Movie, User\n}\n\npublic enum RelationshipLabels implements RelationshipType {\n    Rated\n}\n\npublic static void main(String[] args) throws IOException, BiffException {\n    Workbook workbook = Workbook.getWorkbook(new File(\"C:/Users/User/Desktop/DP/dvdlist.xls\"));\n    Workbook names = Workbook.getWorkbook(new File(\"C:/Users/User/Desktop/DP/names.xls\"));\n    String path = new String(\"C:/Users/User/Documents/Neo4j/test7.graphDatabase\");\n    GraphDatabaseFactory dbFactory = new GraphDatabaseFactory();\n    GraphDatabaseService db = dbFactory.newEmbeddedDatabase(path);\n    int countMovies = 0;\n    int numberOfSheets = workbook.getNumberOfSheets();\n    IndexDefinition indexDefinition;\n    try (Transaction tx = db.beginTx()) {\n        Schema schema = db.schema();\n        indexDefinition = schema.indexFor(DynamicLabel.label(Labels.Movie.toString()))\n                .on(\"Name\")\n                .create();\n        tx.success();\n    }\n    try (Transaction tx = db.beginTx()) {\n        Schema schema = db.schema();\n        indexDefinition = schema.indexFor(DynamicLabel.label(Labels.Movie.toString()))\n                .on(\"Genre\")\n                .create();\n        tx.success();\n    }\n    try (Transaction tx = db.beginTx()) {\n        Schema schema = db.schema();\n        indexDefinition = schema.indexFor(DynamicLabel.label(Labels.User.toString()))\n                .on(\"Name\")\n                .create();\n        tx.success();\n    }\n    try (Transaction tx = db.beginTx()) {\n\n        for (int i = 0; i &lt; numberOfSheets; i++) {\n            Sheet sheet = workbook.getSheet(i);\n            int numberOfRows = 6000;//sheet.getRows();\n            for (int j = 1; j &lt; numberOfRows; j++) {\n                Cell cell1 = sheet.getCell(0, j);\n                Cell cell2 = sheet.getCell(9, j);\n                Node movie = db.createNode(Labels.Movie);\n                movie.setProperty(\"Name\", cell1.getContents());\n                movie.setProperty(\"Genre\", cell2.getContents());\n\n                countMovies++;\n\n            }\n\n        }\n        tx.success();\n    } catch (Exception e) {\n        System.out.println(\"Something goes wrong!\");\n    }\n\n    Random random = new Random();\n    int countUsers = 0;\n    Sheet sheetNames = names.getSheet(0);\n    Cell cell;\n    Node user;\n\n    int numberOfUsers = 1500;//sheetNames.getRows();\n    for (int i = 0; i &lt; numberOfUsers; i++) {\n        cell = sheetNames.getCell(0, i);\n        try (Transaction tx = db.beginTx()) {\n            user = db.createNode(Labels.User);\n            user.setProperty(\"Name\", cell.getContents());\n            List&lt;Integer&gt; listForUser = new ArrayList&lt;&gt;();\n\n            for (int x = 0; x &lt; 1000; x++) {\n                int j = random.nextInt(countMovies);\n                if (!listForUser.isEmpty()) {\n                    if (!listForUser.contains(j)) {\n                        listForUser.add(j);\n                    }\n                } else {\n                    listForUser.add(j);\n                }\n            }\n            for (int j = 0; j &lt; listForUser.size(); j++) {\n                Node movies = db.getNodeById(listForUser.get(j));\n                int rate = 0;\n\n                rate = random.nextInt(10) + 1;\n\n                Relationship relationship = user.createRelationshipTo(movies, RelationshipLabels.Rated);\n                relationship.setProperty(\"Rate\", rate);\n\n            }\n            System.out.println(\"Number of user: \" + countUsers);\n            tx.success();\n        } catch (Exception e) {\n            System.out.println(\"Something goes wrong!\");\n        }\n        countUsers++;\n    }\n\n    workbook.close();\n}\n</code></pre>\n\n<p>}</p>\n\n<p>Does anyone know, how to solve this issue? Or there is some walkaround, how to get results from that queries on a database with a large amount of data? Or some query or settings improvement? I will really appreciate it. </p>\n"},{"tags":["java","scala","csv","io","heap-memory"],"comments":[{"owner":{"account_id":5654054,"reputation":1169,"user_id":4473762,"display_name":"airudah"},"score":0,"creation_date":1461011067,"post_id":36703349,"comment_id":60995028,"body_markdown":"Why aren&#39;t you using a List or Seq? Also, it might be worthwhile making your result an iterable to improve performance.","body":"Why aren&#39;t you using a List or Seq? Also, it might be worthwhile making your result an iterable to improve performance."},{"owner":{"account_id":3711864,"reputation":2032,"user_id":3088980,"accept_rate":70,"display_name":"echen"},"score":0,"creation_date":1461011192,"post_id":36703349,"comment_id":60995099,"body_markdown":"Replacing array with list does not seem to make a difference. I cannot leave it an iterator because the resulting object from this method must be of the form Seq[Foo] where Foo.y: Array[Array[String]]","body":"Replacing array with list does not seem to make a difference. I cannot leave it an iterator because the resulting object from this method must be of the form Seq[Foo] where Foo.y: Array[Array[String]]"},{"owner":{"account_id":23827,"reputation":16963,"user_id":60020,"accept_rate":85,"display_name":"Samuel"},"score":0,"creation_date":1461011423,"post_id":36703349,"comment_id":60995251,"body_markdown":"How are you checking on the heap? Java doesn&#39;t shrink its heap size, it only grows until it reachs Xmx VM setting. GC only changes the amount of available memory in the heap, not the size of the heap.","body":"How are you checking on the heap? Java doesn&#39;t shrink its heap size, it only grows until it reachs Xmx VM setting. GC only changes the amount of available memory in the heap, not the size of the heap."},{"owner":{"account_id":3711864,"reputation":2032,"user_id":3088980,"accept_rate":70,"display_name":"echen"},"score":0,"creation_date":1461011746,"post_id":36703349,"comment_id":60995461,"body_markdown":"I am using Runtime.getRuntime","body":"I am using Runtime.getRuntime"},{"owner":{"account_id":1425811,"reputation":10732,"user_id":1349366,"display_name":"Aivean"},"score":0,"creation_date":1461013353,"post_id":36703349,"comment_id":60996383,"body_markdown":"Create a heap dump, install [MAT](http://www.eclipse.org/mat/)  then check the actual amount of occupied memory and what is occupying it.","body":"Create a heap dump, install <a href=\"http://www.eclipse.org/mat/\" rel=\"nofollow noreferrer\">MAT</a>  then check the actual amount of occupied memory and what is occupying it."},{"owner":{"account_id":3711864,"reputation":2032,"user_id":3088980,"accept_rate":70,"display_name":"echen"},"score":0,"creation_date":1461016794,"post_id":36703349,"comment_id":60997990,"body_markdown":"Thanks I&#39;ll give that a try","body":"Thanks I&#39;ll give that a try"},{"owner":{"account_id":1454293,"reputation":6078,"user_id":1370349,"accept_rate":70,"display_name":"Nicolas Rinaudo"},"score":0,"creation_date":1461087144,"post_id":36703349,"comment_id":61035018,"body_markdown":"You could use quite a bit less memory, at the possible cost of some runtime performance, by creating your Array[Foo] on the fly. Not in front of a device in which I can code, but if you&#39;re not sure where to begin, let me know and I&#39;ll write something up. Also, are the two columns really strings, or should they be mapped to more meaningful types - int for the account id, say?","body":"You could use quite a bit less memory, at the possible cost of some runtime performance, by creating your Array[Foo] on the fly. Not in front of a device in which I can code, but if you&#39;re not sure where to begin, let me know and I&#39;ll write something up. Also, are the two columns really strings, or should they be mapped to more meaningful types - int for the account id, say?"},{"owner":{"account_id":3711864,"reputation":2032,"user_id":3088980,"accept_rate":70,"display_name":"echen"},"score":0,"creation_date":1461089187,"post_id":36703349,"comment_id":61036200,"body_markdown":"@NicolasRinaudo thank you, if you could provide a skeleton for how to do this that would be great. You also correctly observed that I used `String` for the datatype as a simplification. However, for the most immediate problem I am trying to solve, they are in fact just strings.","body":"@NicolasRinaudo thank you, if you could provide a skeleton for how to do this that would be great. You also correctly observed that I used <code>String</code> for the datatype as a simplification. However, for the most immediate problem I am trying to solve, they are in fact just strings."}],"answers":[{"tags":[],"owner":{"account_id":3214321,"reputation":346,"user_id":2713525,"display_name":"Dennis Sosnoski"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1461052380,"creation_date":1461052380,"answer_id":36711966,"question_id":36703349,"body_markdown":"You get an automatic doubling of the size when you read a typical file into memory, since this converts single-byte character representation into two-byte JVM characters. Then thanks to a change Oracle made in a point release of Java 7, you more than double again when you split the input into substrings (prior to said change substrings referenced the backing array of the original string, but this caused a problem in the - **not** - widely-used Glassfish, so Oracle changed the behavior of the JVM to copy the substring chars to a new array; because you still have the reference to the original strings as well as the substrings you more than double memory usage).\r\n\r\nDepending on the length of the split strings, you may be much more than doubling the memory usage - each String takes roughly 40 bytes of memory beyond the actual number of bytes in the character representation, due to the String object itself and the Array object used for the characters.\r\n\r\nSo I&#39;d guess that this takes you about half the way to your 1.7GB usage. The rest is probably due to temporary structures created during the raw.groupBy statement, though I&#39;d expect most of these to be released afterward.\r\n\r\nAre you doing some delays before you check the memory usage? That would generally be needed in order to allow garbage collection to take place. After the garbage collection is done you should be able to get a reasonable estimate of actual memory usage as runtime.totalMemory() - runtime.freeMemory().","title":"Scala Source.fromFile memory consumption","body":"<p>You get an automatic doubling of the size when you read a typical file into memory, since this converts single-byte character representation into two-byte JVM characters. Then thanks to a change Oracle made in a point release of Java 7, you more than double again when you split the input into substrings (prior to said change substrings referenced the backing array of the original string, but this caused a problem in the - <strong>not</strong> - widely-used Glassfish, so Oracle changed the behavior of the JVM to copy the substring chars to a new array; because you still have the reference to the original strings as well as the substrings you more than double memory usage).</p>\n\n<p>Depending on the length of the split strings, you may be much more than doubling the memory usage - each String takes roughly 40 bytes of memory beyond the actual number of bytes in the character representation, due to the String object itself and the Array object used for the characters.</p>\n\n<p>So I'd guess that this takes you about half the way to your 1.7GB usage. The rest is probably due to temporary structures created during the raw.groupBy statement, though I'd expect most of these to be released afterward.</p>\n\n<p>Are you doing some delays before you check the memory usage? That would generally be needed in order to allow garbage collection to take place. After the garbage collection is done you should be able to get a reasonable estimate of actual memory usage as runtime.totalMemory() - runtime.freeMemory().</p>\n"},{"tags":[],"owner":{"account_id":1454293,"reputation":6078,"user_id":1370349,"accept_rate":70,"display_name":"Nicolas Rinaudo"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1461094793,"creation_date":1461094793,"answer_id":36727915,"question_id":36703349,"body_markdown":"First, I&#39;m going to recommend using a dedicated CSV parsing library - manually parsing CSV is much more complex than it looks, there are a lot of edge cases (what if one of your value contains a line break, say?). We&#39;ll go with [kantan.csv](https://github.com/nrinaudo/kantan.csv) because I&#39;m the author, but there are plenty of quality libraries out there.\r\n\r\nWhat we&#39;re going to do is:\r\n\r\n* open the file as an `Iterator[(String, String)]`.\r\n* fold on that iterator, building a `Map[String, List[String]]` as we go - where keys are account ids and values benchmark data.\r\n* if you&#39;re really keen on that `Foo` case class, turn the map into a list of that.\r\n\r\nWithout further ado:\r\n\r\n    import kantan.csv._     // kantan.csv core types.\r\n    import kantan.csv.ops._ // syntax.\r\n\r\n    case class Foo(id: String, data: List[String])\r\n\r\n    // Open the CSV file for reading, assuming ; as column separator\r\n    // and no header row.\r\n    input.asUnsafeCsvReader[(String, String)](&#39;;&#39;, false)\r\n    \r\n    // Fold on the file, aggregating data in a map\r\n      .foldLeft(Map.empty[String, List[String]]) { case (acc, (key, value)) =&gt;\r\n        acc + (key -&gt; (value :: acc.getOrElse(key, List.empty)))\r\n\r\n    // Now that we have the whole data as a Map, turn that into a List[Foo].\r\n      }.map(r =&gt; Foo(r._1, r._2))\r\n\r\n\r\nThis never loads the input data more than once, discarding each row once it&#39;s put in the aggregation map - as opposed to your implementation which, if I&#39;m counting right, has it 4 times in memory by the end (once as lines, once as split lines, once as a `List[Foo]` and once as an `Array[Foo]`).\r\n\r\nAlso, strings are good when you don&#39;t have a choice, but if you have better types - ints, say, or dates - use these instead. An int uses a lot less memory than its string representation.\r\n\r\nLet me know how it turns out!","title":"Scala Source.fromFile memory consumption","body":"<p>First, I'm going to recommend using a dedicated CSV parsing library - manually parsing CSV is much more complex than it looks, there are a lot of edge cases (what if one of your value contains a line break, say?). We'll go with <a href=\"https://github.com/nrinaudo/kantan.csv\" rel=\"nofollow\">kantan.csv</a> because I'm the author, but there are plenty of quality libraries out there.</p>\n\n<p>What we're going to do is:</p>\n\n<ul>\n<li>open the file as an <code>Iterator[(String, String)]</code>.</li>\n<li>fold on that iterator, building a <code>Map[String, List[String]]</code> as we go - where keys are account ids and values benchmark data.</li>\n<li>if you're really keen on that <code>Foo</code> case class, turn the map into a list of that.</li>\n</ul>\n\n<p>Without further ado:</p>\n\n<pre><code>import kantan.csv._     // kantan.csv core types.\nimport kantan.csv.ops._ // syntax.\n\ncase class Foo(id: String, data: List[String])\n\n// Open the CSV file for reading, assuming ; as column separator\n// and no header row.\ninput.asUnsafeCsvReader[(String, String)](';', false)\n\n// Fold on the file, aggregating data in a map\n  .foldLeft(Map.empty[String, List[String]]) { case (acc, (key, value)) =&gt;\n    acc + (key -&gt; (value :: acc.getOrElse(key, List.empty)))\n\n// Now that we have the whole data as a Map, turn that into a List[Foo].\n  }.map(r =&gt; Foo(r._1, r._2))\n</code></pre>\n\n<p>This never loads the input data more than once, discarding each row once it's put in the aggregation map - as opposed to your implementation which, if I'm counting right, has it 4 times in memory by the end (once as lines, once as split lines, once as a <code>List[Foo]</code> and once as an <code>Array[Foo]</code>).</p>\n\n<p>Also, strings are good when you don't have a choice, but if you have better types - ints, say, or dates - use these instead. An int uses a lot less memory than its string representation.</p>\n\n<p>Let me know how it turns out!</p>\n"}],"owner":{"account_id":3711864,"reputation":2032,"user_id":3088980,"accept_rate":70,"display_name":"echen"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":598,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1639310220,"creation_date":1461010017,"question_id":36703349,"body_markdown":"All,\r\n\r\nI have a CSV file that is only ~120MB (call it `demo.csv`)\r\n\r\nThe following code results in the Heap blowing up from a normal size of `100MB` to `1.7GB` despite the fact the underlying data being loaded is ONLY `120MB`\r\n\r\nWhat can I do better here?\r\n\r\n    case class Foo(x:String, y: Array[String])\r\n    ....\r\n    val src = Source.fromFile(file)\r\n    val lines = src.getLines()\r\n    val raw = lines.map(_.split(&quot;,&quot;)).toArray\r\n    src.close()\r\n\r\n    /**\r\n      * a map from accountId to their benchmark components\r\n      */\r\n    val result = raw.groupBy(_.(0)).map {\r\n      case (x, y) =&gt; Foo(x,y)\r\n    }.toArray\r\n\r\nI know the `toArray` might be the issue here, however I do need the `groupBy` ... and can&#39;t get to it unless I pull everything into memory. What is an alternative?\r\n\r\nI understand that the heap might temporarily swell up during the `groupBy` and `toArray` phases. But since the underlying data is only 120MB, how can my heap possibly go up by `&gt;1G` permanently? (in other words, whatever is being retained does not seem to be GC-ed)","title":"Scala Source.fromFile memory consumption","body":"<p>All,</p>\n\n<p>I have a CSV file that is only ~120MB (call it <code>demo.csv</code>)</p>\n\n<p>The following code results in the Heap blowing up from a normal size of <code>100MB</code> to <code>1.7GB</code> despite the fact the underlying data being loaded is ONLY <code>120MB</code></p>\n\n<p>What can I do better here?</p>\n\n<pre><code>case class Foo(x:String, y: Array[String])\n....\nval src = Source.fromFile(file)\nval lines = src.getLines()\nval raw = lines.map(_.split(\",\")).toArray\nsrc.close()\n\n/**\n  * a map from accountId to their benchmark components\n  */\nval result = raw.groupBy(_.(0)).map {\n  case (x, y) =&gt; Foo(x,y)\n}.toArray\n</code></pre>\n\n<p>I know the <code>toArray</code> might be the issue here, however I do need the <code>groupBy</code> ... and can't get to it unless I pull everything into memory. What is an alternative?</p>\n\n<p>I understand that the heap might temporarily swell up during the <code>groupBy</code> and <code>toArray</code> phases. But since the underlying data is only 120MB, how can my heap possibly go up by <code>&gt;1G</code> permanently? (in other words, whatever is being retained does not seem to be GC-ed)</p>\n"},{"tags":["java","heap-memory","jqassistant"],"answers":[{"tags":[],"owner":{"account_id":3479819,"reputation":1186,"user_id":2912200,"display_name":"Dirk Mahler"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1461332298,"creation_date":1461332298,"answer_id":36795420,"question_id":36793387,"body_markdown":"Just run\r\n\r\n    &gt; set PATH\r\n\r\non the command line prompt. You&#39;ll see output like the following containing the path to the Java installation that is used when running jqassistant.cmd:\r\n\r\n    `Path=C:\\ProgramData\\Oracle\\Java\\javapath;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Program Files\\Git\\cmd;C:\\Program Files (x86)\\GNU\\GnuPG\\pub;C:\\Program Files (x86)\\PuTTY;C:\\Development\\apache-maven-3.3.9\\bin;C:\\Program Files\\Java\\jdk1.8.0_77\\bin;C:\\Program Files (x86)\\Skype\\Phone\\;C:\\Program Files\\TortoiseGit\\bin;C:\\Development\\jruby-9.0.4.0\\bin`\r\n\r\n(the relevant part in this case is &quot;C:\\Program Files\\Java\\jdk1.8.0_77\\bin&quot;).\r\n\r\nYou can verify this by running:\r\n\r\n    &gt; java -version\r\n    java version &quot;1.8.0_77&quot;\r\n    Java(TM) SE Runtime Environment (build 1.8.0_77-b03)\r\n    Java HotSpot(TM) 64-Bit Server VM (build 25.77-b03, mixed mode)\r\n\r\n\r\nUsually the given parameters should work on all Oracle JVMs even if 1.8 releases will issue a warning about the no longer supported MaxPermSize parameter.\r\n\r\nCan you provide an information what is running on your machine?","title":"jQAssistant heap problems - set java version explicitly","body":"<p>Just run</p>\n\n<pre><code>&gt; set PATH\n</code></pre>\n\n<p>on the command line prompt. You'll see output like the following containing the path to the Java installation that is used when running jqassistant.cmd:</p>\n\n<pre><code>`Path=C:\\ProgramData\\Oracle\\Java\\javapath;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Program Files\\Git\\cmd;C:\\Program Files (x86)\\GNU\\GnuPG\\pub;C:\\Program Files (x86)\\PuTTY;C:\\Development\\apache-maven-3.3.9\\bin;C:\\Program Files\\Java\\jdk1.8.0_77\\bin;C:\\Program Files (x86)\\Skype\\Phone\\;C:\\Program Files\\TortoiseGit\\bin;C:\\Development\\jruby-9.0.4.0\\bin`\n</code></pre>\n\n<p>(the relevant part in this case is \"C:\\Program Files\\Java\\jdk1.8.0_77\\bin\").</p>\n\n<p>You can verify this by running:</p>\n\n<pre><code>&gt; java -version\njava version \"1.8.0_77\"\nJava(TM) SE Runtime Environment (build 1.8.0_77-b03)\nJava HotSpot(TM) 64-Bit Server VM (build 25.77-b03, mixed mode)\n</code></pre>\n\n<p>Usually the given parameters should work on all Oracle JVMs even if 1.8 releases will issue a warning about the no longer supported MaxPermSize parameter.</p>\n\n<p>Can you provide an information what is running on your machine?</p>\n"}],"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":36795420,"answer_count":1,"score":0,"last_activity_date":1639310198,"creation_date":1461326673,"question_id":36793387,"body_markdown":"I installed jQAssistant, set the JQASSISTANT_OPTS variable to -Xmx1024M -XX:MaxPermSize=512m as recommended and then get (when starting jqassistant.cmd):\r\n\r\n    Error occurred during initialization of VM\r\n    Could not reserve enough space for object heap\r\n    Error: Could not create the Java Virtual Machine.\r\n    Error: A fatal exception has occurred. Program will exit.\r\n\r\nI guess that jQAssistant is running on the wrong version of Java. Does anyone no how to determine or change the Java version? Or is there any other reason behind this?","title":"jQAssistant heap problems - set java version explicitly","body":"<p>I installed jQAssistant, set the JQASSISTANT_OPTS variable to -Xmx1024M -XX:MaxPermSize=512m as recommended and then get (when starting jqassistant.cmd):</p>\n\n<pre><code>Error occurred during initialization of VM\nCould not reserve enough space for object heap\nError: Could not create the Java Virtual Machine.\nError: A fatal exception has occurred. Program will exit.\n</code></pre>\n\n<p>I guess that jQAssistant is running on the wrong version of Java. Does anyone no how to determine or change the Java version? Or is there any other reason behind this?</p>\n"},{"tags":["java","heap-memory"],"comments":[{"owner":{"account_id":5682705,"reputation":1201,"user_id":4493265,"accept_rate":75,"display_name":"waltersu"},"score":0,"creation_date":1465890174,"post_id":37805689,"comment_id":63076305,"body_markdown":"possible duplicated by http://stackoverflow.com/questions/561245/virtual-memory-usage-from-java-under-linux-too-much-memory-used","body":"possible duplicated by <a href=\"http://stackoverflow.com/questions/561245/virtual-memory-usage-from-java-under-linux-too-much-memory-used\" title=\"virtual memory usage from java under linux too much memory used\">stackoverflow.com/questions/561245/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":1206886,"reputation":1349,"user_id":1176303,"display_name":"NewBee"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1465959842,"creation_date":1465892140,"answer_id":37806530,"question_id":37805689,"body_markdown":" 1. -Xms option is used for JVM min-heap size definition\r\n 2. top shows the real memory(VIRT/RES/SHR) process used\r\n\r\nuse your example `-Xms10g -Xmx10g`, when jvm start, it will ask op-system allocation  10g memory which will be used for heap. **And op-system will try to allocate the memory for the JVM (show as VIRT), but system did not promise u it will allocate physical memory, it maybe swap ;)** \r\n\r\nBut u will find the VIRT is still not 10g, that reason is 10g is for **heap** size, a JVM include much more the heap, for example, stack, permgen(hotspot JDK8, openJDK seems has no permgen, fix me if i am wrong), native stack, code, files etc.\r\n\r\nAnd RES is for real physical memory **used**, it includes new objects, method etc, still not only the heap too.","title":"java heap memory is larger than TOP","body":"<ol>\n<li>-Xms option is used for JVM min-heap size definition</li>\n<li>top shows the real memory(VIRT/RES/SHR) process used</li>\n</ol>\n\n<p>use your example <code>-Xms10g -Xmx10g</code>, when jvm start, it will ask op-system allocation  10g memory which will be used for heap. <strong>And op-system will try to allocate the memory for the JVM (show as VIRT), but system did not promise u it will allocate physical memory, it maybe swap ;)</strong> </p>\n\n<p>But u will find the VIRT is still not 10g, that reason is 10g is for <strong>heap</strong> size, a JVM include much more the heap, for example, stack, permgen(hotspot JDK8, openJDK seems has no permgen, fix me if i am wrong), native stack, code, files etc.</p>\n\n<p>And RES is for real physical memory <strong>used</strong>, it includes new objects, method etc, still not only the heap too.</p>\n"}],"owner":{"account_id":5069480,"reputation":33,"user_id":4068634,"display_name":"Roger Zhang"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1002,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":37806530,"answer_count":1,"score":0,"last_activity_date":1639310181,"creation_date":1465889569,"question_id":37805689,"body_markdown":"My program run with -Xms10240m -Xmx10240m. I use top to check the memory, the size is 3.5g, it is smaller than the xms valuse.\r\n[use top][1]\r\n\r\n\r\nHowever, when I use jmap -heap, I can see the heap size is about 10g.\r\n[use jmap][2]\r\n\r\nWhat&#39;s the reason?\r\n\r\nThanks.\r\n  [1]: https://i.stack.imgur.com/Y2llF.png\r\n  [2]: https://i.stack.imgur.com/gOOr7.png","title":"java heap memory is larger than TOP","body":"<p>My program run with -Xms10240m -Xmx10240m. I use top to check the memory, the size is 3.5g, it is smaller than the xms valuse.\n<a href=\"https://i.stack.imgur.com/Y2llF.png\" rel=\"nofollow\">use top</a></p>\n\n<p>However, when I use jmap -heap, I can see the heap size is about 10g.\n<a href=\"https://i.stack.imgur.com/gOOr7.png\" rel=\"nofollow\">use jmap</a></p>\n\n<p>What's the reason?</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","object","linked-list","heap-memory","pointer-aliasing"],"comments":[{"owner":{"account_id":2590771,"reputation":8658,"user_id":2245528,"accept_rate":95,"display_name":"cf-"},"score":0,"creation_date":1466094846,"post_id":37864500,"comment_id":63186576,"body_markdown":"`_head = node;` but then what happens to the old head? Think of chaining paperclips together. You can&#39;t just drop the existing chain every time you get a new clip. You have to attach the existing chain to the new paperclip. It works the same way here: you have to attach your existing node chain to the new head.","body":"<code>_head = node;</code> but then what happens to the old head? Think of chaining paperclips together. You can&#39;t just drop the existing chain every time you get a new clip. You have to attach the existing chain to the new paperclip. It works the same way here: you have to attach your existing node chain to the new head."},{"owner":{"account_id":8616554,"reputation":1,"user_id":6453175,"display_name":"Arik Shalito"},"score":0,"creation_date":1466095022,"post_id":37864500,"comment_id":63186679,"body_markdown":"I understand that, but whats going on with the heap, and adresses.?\ntemp stays there? every time I use this method another temp stays there? When it wipes out? how it works...","body":"I understand that, but whats going on with the heap, and adresses.? temp stays there? every time I use this method another temp stays there? When it wipes out? how it works..."}],"answers":[{"tags":[],"owner":{"account_id":4959882,"reputation":5497,"user_id":3991400,"accept_rate":50,"display_name":"midor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1466095535,"creation_date":1466095535,"answer_id":37864970,"question_id":37864500,"body_markdown":"This works as follows: \r\n\r\n1. `node` is on the stack and references the heap-object (A), which you want to insert\r\n2. `_head` is presumably a member of a heap-object (the list) and references the heap-object (B) that is currently at the head of the list.\r\n3. You create the reference `temp` on the stack, which then also references that object (B)\r\n4. You change the reference `_head` to the heap-object referenced by `node`, so `_head` now references (A)\r\n5. You now modify (A), which is referenced by both `_head` and `node`, to have its `next`-member reference (B)\r\n6. Both (A) and (B) are have a reference count of at least one all the time, so GC does not run on either one.\r\n7. After exiting the function the stack-memory for the references is reclaimed, and the heap object persist as long as they are referenced. \r\n8. After retuning from the function, as long as your list still exists, (A) is referenced by the list-head, (B) is referenced by (A)&#39;s `next`-member, and so on and so on, so nothing gets claimed by the garbage collection.\r\n","title":"What happens behind the scenes(heap,stack,etc..) when adding a Node to the a LinkedList?","body":"<p>This works as follows: </p>\n\n<ol>\n<li><code>node</code> is on the stack and references the heap-object (A), which you want to insert</li>\n<li><code>_head</code> is presumably a member of a heap-object (the list) and references the heap-object (B) that is currently at the head of the list.</li>\n<li>You create the reference <code>temp</code> on the stack, which then also references that object (B)</li>\n<li>You change the reference <code>_head</code> to the heap-object referenced by <code>node</code>, so <code>_head</code> now references (A)</li>\n<li>You now modify (A), which is referenced by both <code>_head</code> and <code>node</code>, to have its <code>next</code>-member reference (B)</li>\n<li>Both (A) and (B) are have a reference count of at least one all the time, so GC does not run on either one.</li>\n<li>After exiting the function the stack-memory for the references is reclaimed, and the heap object persist as long as they are referenced. </li>\n<li>After retuning from the function, as long as your list still exists, (A) is referenced by the list-head, (B) is referenced by (A)'s <code>next</code>-member, and so on and so on, so nothing gets claimed by the garbage collection.</li>\n</ol>\n"}],"owner":{"account_id":8616554,"reputation":1,"user_id":6453175,"display_name":"Arik Shalito"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":1,"score":-3,"last_activity_date":1639310171,"creation_date":1466093978,"question_id":37864500,"body_markdown":"    public void addToHead(IntNode node) {\r\n        IntNode temp = _head;\r\n        _head = node;\r\n        node.setNext(temp);\r\n    }\r\nedit:I searched youtube, Nothig there about linkedlist and the heap\r\nWhen does the garbage collector wipe `temp`? I know it should, but can&#39;t see where.\r\n\r\nI&#39;m having a hard time understanding it. Intuitively I&#39;d just write \r\n\r\n    _head = node;\r\n\r\nI know it&#39;s not right, but I feel I need to understand what&#39;s going on there with the objects and addresses to get the point...\r\n\r\nfirst line: I create a temp, and point it to the same adress the _head points  \r\nseconds line:Now head points to the adress node points, (node.next equals head.next)  \r\nthird line: now node.next becomes temp..  \r\nam i right\r\n","title":"What happens behind the scenes(heap,stack,etc..) when adding a Node to the a LinkedList?","body":"<pre><code>public void addToHead(IntNode node) {\n    IntNode temp = _head;\n    _head = node;\n    node.setNext(temp);\n}\n</code></pre>\n\n<p>edit:I searched youtube, Nothig there about linkedlist and the heap\nWhen does the garbage collector wipe <code>temp</code>? I know it should, but can't see where.</p>\n\n<p>I'm having a hard time understanding it. Intuitively I'd just write </p>\n\n<pre><code>_head = node;\n</code></pre>\n\n<p>I know it's not right, but I feel I need to understand what's going on there with the objects and addresses to get the point...</p>\n\n<p>first line: I create a temp, and point it to the same adress the _head points<br>\nseconds line:Now head points to the adress node points, (node.next equals head.next)<br>\nthird line: now node.next becomes temp..<br>\nam i right</p>\n"},{"tags":["java","heap-memory"],"comments":[{"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":10,"creation_date":1466530812,"post_id":37951055,"comment_id":63350774,"body_markdown":"The JVM will create around 10,000 objects just getting to the main() method, one more isn&#39;t going to make much difference.  Note: loading a class for the first time creates lots of objects.","body":"The JVM will create around 10,000 objects just getting to the main() method, one more isn&#39;t going to make much difference.  Note: loading a class for the first time creates lots of objects."},{"owner":{"account_id":2065536,"reputation":1663,"user_id":1841095,"accept_rate":77,"display_name":"sauumum"},"score":1,"creation_date":1466531582,"post_id":37951055,"comment_id":63351231,"body_markdown":"Possible duplicate of [Object Creation Logic in Java](http://stackoverflow.com/questions/26115207/object-creation-logic-in-java)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/26115207/object-creation-logic-in-java\">Object Creation Logic in Java</a>"},{"owner":{"account_id":279365,"reputation":49126,"user_id":574479,"accept_rate":87,"display_name":"biziclop"},"score":2,"creation_date":1466531618,"post_id":37951055,"comment_id":63351252,"body_markdown":"This is a homework question, right? You should forget about the heap, that&#39;s a complete red herring. Just think about how inheritance works.","body":"This is a homework question, right? You should forget about the heap, that&#39;s a complete red herring. Just think about how inheritance works."}],"answers":[{"tags":[],"owner":{"account_id":4023304,"reputation":1329,"user_id":3312691,"accept_rate":64,"display_name":"pbajpai"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1466531052,"creation_date":1466531052,"answer_id":37951163,"question_id":37951055,"body_markdown":"If we talk about only your code, then there is only `one Manager object`, and there will be constructor-chaining till Object class. Apart from this object there will be other objects also which are needed by JVM to run your program, these will be `class objects, method objects` which are currently loaded in to run your program.\r\n\r\nFor more details about the execution order of any program, to get more understanding, please read once below link, \r\n\r\nhttps://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.1.1","title":"Object creation on Heap","body":"<p>If we talk about only your code, then there is only <code>one Manager object</code>, and there will be constructor-chaining till Object class. Apart from this object there will be other objects also which are needed by JVM to run your program, these will be <code>class objects, method objects</code> which are currently loaded in to run your program.</p>\n\n<p>For more details about the execution order of any program, to get more understanding, please read once below link, </p>\n\n<p><a href=\"https://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.1.1\" rel=\"nofollow\">https://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.1.1</a></p>\n"},{"tags":[],"owner":{"account_id":139194,"reputation":12003,"user_id":344638,"accept_rate":100,"display_name":"antiduh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1466531064,"creation_date":1466531064,"answer_id":37951169,"question_id":37951055,"body_markdown":"Invoking this line of code:\r\n\r\n    Manager manager = new Manager();\r\n\r\nWill create one **object**, an instance of the `Manager` **class**. The implementation of the `Manager` class borrows from the implementation of the `Employee` and `Person` classes - however, just because you inherit from those classes, doesn&#39;t mean that they get treated as separate objects.","title":"Object creation on Heap","body":"<p>Invoking this line of code:</p>\n\n<pre><code>Manager manager = new Manager();\n</code></pre>\n\n<p>Will create one <strong>object</strong>, an instance of the <code>Manager</code> <strong>class</strong>. The implementation of the <code>Manager</code> class borrows from the implementation of the <code>Employee</code> and <code>Person</code> classes - however, just because you inherit from those classes, doesn't mean that they get treated as separate objects.</p>\n"},{"tags":[],"owner":{"account_id":7500730,"reputation":36,"user_id":5699213,"display_name":"Ravinder G"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1466531451,"creation_date":1466531451,"answer_id":37951274,"question_id":37951055,"body_markdown":"Your program will create only one Object for Manager class. Manager class extends the properties/behavior of Employee and Person but it will create object for only Manager and not for others. \r\n\r\nAs per basic definition of Object- it is an instance of the class and class is just a blue print on how the object should be created. Hope this helps.","title":"Object creation on Heap","body":"<p>Your program will create only one Object for Manager class. Manager class extends the properties/behavior of Employee and Person but it will create object for only Manager and not for others. </p>\n\n<p>As per basic definition of Object- it is an instance of the class and class is just a blue print on how the object should be created. Hope this helps.</p>\n"}],"owner":{"account_id":7774376,"reputation":425,"user_id":5882929,"display_name":"Panky031"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":186,"favorite_count":0,"down_vote_count":5,"up_vote_count":0,"accepted_answer_id":37951163,"answer_count":3,"score":-5,"last_activity_date":1639310158,"creation_date":1466530732,"question_id":37951055,"body_markdown":"    class Person {\r\n    \tpublic Person(){}\r\n    }\r\n    class Employee extends Person{\r\n    \tpublic Employee() {}\r\n    }\r\n    class Manager extends Employee{\r\n    \tpublic Manager() {}\r\n    }\r\n    public class HeapObjectTest {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tManager manager = new Manager();}\r\n    }\r\nHow many object will create on the Heap for Above code?","title":"Object creation on Heap","body":"<pre><code>class Person {\n    public Person(){}\n}\nclass Employee extends Person{\n    public Employee() {}\n}\nclass Manager extends Employee{\n    public Manager() {}\n}\npublic class HeapObjectTest {\n    public static void main(String[] args) {\n        Manager manager = new Manager();}\n}\n</code></pre>\n\n<p>How many object will create on the Heap for Above code?</p>\n"},{"tags":["java","heap-memory"],"comments":[{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1468250848,"post_id":38310704,"comment_id":64038131,"body_markdown":"You have to add `export _JAVA_OPTIONS=&quot;-Xmx4g&quot;` to the script or shell in which the server is started, e.g. to the running user&#39;s `.bashrc`. Calling `export` is no different to defining a local variable in a program: you have to set it again when you re-run that program","body":"You have to add <code>export _JAVA_OPTIONS=&quot;-Xmx4g&quot;</code> to the script or shell in which the server is started, e.g. to the running user&#39;s <code>.bashrc</code>. Calling <code>export</code> is no different to defining a local variable in a program: you have to set it again when you re-run that program"},{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":1,"creation_date":1468250994,"post_id":38310704,"comment_id":64038231,"body_markdown":"*&quot;I have a bash script that executes a jar file&quot;* So add the option to that script! In that script you execute `java -jar myjar.jar`, so just change that to `java -Xmx4g -jar myjar.jar`, and that script will *always* (permanently) use 4G for that Java program.","body":"<i>&quot;I have a bash script that executes a jar file&quot;</i> So add the option to that script! In that script you execute <code>java -jar myjar.jar</code>, so just change that to <code>java -Xmx4g -jar myjar.jar</code>, and that script will <i>always</i> (permanently) use 4G for that Java program."},{"owner":{"account_id":3491719,"reputation":163,"user_id":2921237,"accept_rate":100,"display_name":"H-man"},"score":0,"creation_date":1468251974,"post_id":38310704,"comment_id":64038848,"body_markdown":"Added my script details to the question. So based on both of the responses, there is no way to change the default value for the heap sizes other than exporting the _JAVA_OPTIONS= ? Also, as I mention in my revised portion of my question, I added the mentioned export to the script and it didn&#39;t work. Values are still the same after the script is executed. So its either working and I can not witness it, or its not working.","body":"Added my script details to the question. So based on both of the responses, there is no way to change the default value for the heap sizes other than exporting the _JAVA_OPTIONS= ? Also, as I mention in my revised portion of my question, I added the mentioned export to the script and it didn&#39;t work. Values are still the same after the script is executed. So its either working and I can not witness it, or its not working."}],"answers":[{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1468252122,"creation_date":1468251521,"answer_id":38310969,"question_id":38310704,"body_markdown":"&gt;  Which works, but not after rebooting the server.\r\n\r\nIt needs to be set every time you start a new environment if you want to happen when you restart.  This is not a feature of Java but rather how environment variables work in the shell.\r\n\r\n&gt;  I have a bash script that executes a jar file to handle images, and this is all run by the Apache user.\r\n\r\nI would add it to bash script so it is set each time.  This is what the script is for.\r\n\r\n&gt; How can one set/change the default settings of the Java min and max heap sizes to permanently retain after reboot and not dependent on a exported environment variable.\r\n\r\nThe default maximum is 1/4 of main memory which is why it changes based on the memory size.\r\n\r\nYou can compile your own version of the OpenJDK (as that is what you are using) and in there you can change the default.","title":"increase the java heap size permanently after reboot?","body":"<blockquote>\n  <p>Which works, but not after rebooting the server.</p>\n</blockquote>\n\n<p>It needs to be set every time you start a new environment if you want to happen when you restart.  This is not a feature of Java but rather how environment variables work in the shell.</p>\n\n<blockquote>\n  <p>I have a bash script that executes a jar file to handle images, and this is all run by the Apache user.</p>\n</blockquote>\n\n<p>I would add it to bash script so it is set each time.  This is what the script is for.</p>\n\n<blockquote>\n  <p>How can one set/change the default settings of the Java min and max heap sizes to permanently retain after reboot and not dependent on a exported environment variable.</p>\n</blockquote>\n\n<p>The default maximum is 1/4 of main memory which is why it changes based on the memory size.</p>\n\n<p>You can compile your own version of the OpenJDK (as that is what you are using) and in there you can change the default.</p>\n"}],"owner":{"account_id":3491719,"reputation":163,"user_id":2921237,"accept_rate":100,"display_name":"H-man"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1647,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":38310969,"answer_count":1,"score":1,"last_activity_date":1639310122,"creation_date":1468250718,"question_id":38310704,"body_markdown":"The answer provided to &quot;[increase the java heap size permanently?][1]&quot; doesn&#39;t actual answer the question. At least in the sense I was expecting. I would have added this detail in a comment on the same page, but I have not earn that privilege, but I digress. The answer in that question states to export the following like so: `export _JAVA_OPTIONS=&quot;-Xmx4g&quot;`. Which works, but not after rebooting the server.\r\n\r\nThis is an exported variable, and as the another member states further below, an alias can be added to the .bashrc file for that user. This means that setting is invoked only when that user&#39;s environment is invoked. Right? What I would like to know is how to get this MaxHeapSize setting noted here:\r\n\r\n    $ java -XX:+PrintFlagsFinal -version | grep -iE &#39;MaxHeapSize&#39;\r\n    Picked up _JAVA_OPTIONS: -Xmx2g\r\n        uintx MaxHeapSize                              := 2147483648      {product}\r\n    java version &quot;1.6.0_37&quot;\r\n    OpenJDK Runtime Environment (IcedTea6 1.13.9) (rhel-1.13.9.4.el6_7-x86_64)\r\n    OpenJDK 64-Bit Server VM (build 23.25-b01, mixed mode)\r\n\r\nPermanently set even after the server is rebooted. I have a bash script that executes a jar file to handle images, and this is all run by the Apache user. Which doesn&#39;t have a shell environment. Adding the mentioned export string to the script environment doesn&#39;t render the desired  uintx MaxHeapSize value. If I simply export the desired MaxHeapSize, I see the value change, but there has to be a way to set this &quot;permanently&quot; so that I am not depending on a environment variable. That is the answer I am looking for, where the answer provided in the other post seems to be a work around. How can one set/change the default settings of the Java min and max heap sizes to permanently retain after reboot and not dependent on a exported environment variable. I have servers with different default values so it appears to be possible.                            \r\n\r\n**REVISED**\r\nAfter reading the first two comments, this is the script that executes the jar:\r\n\r\n    PATH=$PATH:$HOME/bin:/usr/java/jdk1.5.0_05/bin\r\n    CLASSPATH=.:/home/hg/bin/imageutils.jar:\r\n    export CLASSPATH\r\n    export PATH\r\n    java com.hg.image.Thumbnail $1 $2 $3 $4 $5\r\n\r\nI tried adding the following to the top of the script:\r\n`export _JAVA_OPTIONS=&quot;-Xmx4g&quot;`\r\n\r\nBut that didn&#39;t change the vaue of the MaxHeap size when I ran:\r\n\r\n`$ java -XX:+PrintFlagsFinal -version | grep -iE &#39;MaxHeapSize&#39;`\r\n\r\n  [1]: https://stackoverflow.com/questions/880855/increase-the-java-heap-size-permanently?answertab=active#tab-top","title":"increase the java heap size permanently after reboot?","body":"<p>The answer provided to \"<a href=\"https://stackoverflow.com/questions/880855/increase-the-java-heap-size-permanently?answertab=active#tab-top\">increase the java heap size permanently?</a>\" doesn't actual answer the question. At least in the sense I was expecting. I would have added this detail in a comment on the same page, but I have not earn that privilege, but I digress. The answer in that question states to export the following like so: <code>export _JAVA_OPTIONS=\"-Xmx4g\"</code>. Which works, but not after rebooting the server.</p>\n\n<p>This is an exported variable, and as the another member states further below, an alias can be added to the .bashrc file for that user. This means that setting is invoked only when that user's environment is invoked. Right? What I would like to know is how to get this MaxHeapSize setting noted here:</p>\n\n<pre><code>$ java -XX:+PrintFlagsFinal -version | grep -iE 'MaxHeapSize'\nPicked up _JAVA_OPTIONS: -Xmx2g\n    uintx MaxHeapSize                              := 2147483648      {product}\njava version \"1.6.0_37\"\nOpenJDK Runtime Environment (IcedTea6 1.13.9) (rhel-1.13.9.4.el6_7-x86_64)\nOpenJDK 64-Bit Server VM (build 23.25-b01, mixed mode)\n</code></pre>\n\n<p>Permanently set even after the server is rebooted. I have a bash script that executes a jar file to handle images, and this is all run by the Apache user. Which doesn't have a shell environment. Adding the mentioned export string to the script environment doesn't render the desired  uintx MaxHeapSize value. If I simply export the desired MaxHeapSize, I see the value change, but there has to be a way to set this \"permanently\" so that I am not depending on a environment variable. That is the answer I am looking for, where the answer provided in the other post seems to be a work around. How can one set/change the default settings of the Java min and max heap sizes to permanently retain after reboot and not dependent on a exported environment variable. I have servers with different default values so it appears to be possible.                            </p>\n\n<p><strong>REVISED</strong>\nAfter reading the first two comments, this is the script that executes the jar:</p>\n\n<pre><code>PATH=$PATH:$HOME/bin:/usr/java/jdk1.5.0_05/bin\nCLASSPATH=.:/home/hg/bin/imageutils.jar:\nexport CLASSPATH\nexport PATH\njava com.hg.image.Thumbnail $1 $2 $3 $4 $5\n</code></pre>\n\n<p>I tried adding the following to the top of the script:\n<code>export _JAVA_OPTIONS=\"-Xmx4g\"</code></p>\n\n<p>But that didn't change the vaue of the MaxHeap size when I ran:</p>\n\n<p><code>$ java -XX:+PrintFlagsFinal -version | grep -iE 'MaxHeapSize'</code></p>\n"},{"tags":["java","heap-memory","profiler","mat"],"comments":[{"owner":{"account_id":5939517,"reputation":5041,"user_id":4673475,"display_name":"kucing_terbang"},"score":1,"creation_date":1427880276,"post_id":29385157,"comment_id":46952376,"body_markdown":"I have checked out the eclipse mat source code and it does heavily depends on eclipse platform. and the reason of your NPE is because the eclipse mat is trying to get the extension registry for which exists on eclipse platform. I did something similar to this. but, it&#39;s not straight forward as i did it with jhat and then parse the result.","body":"I have checked out the eclipse mat source code and it does heavily depends on eclipse platform. and the reason of your NPE is because the eclipse mat is trying to get the extension registry for which exists on eclipse platform. I did something similar to this. but, it&#39;s not straight forward as i did it with jhat and then parse the result."},{"owner":{"account_id":4776457,"reputation":43,"user_id":3859408,"accept_rate":40,"display_name":"user3859408"},"score":1,"creation_date":1427886707,"post_id":29385157,"comment_id":46955858,"body_markdown":"So how we can use this eclipse mat api in our program for getting information from java heap dump.Is there any other java api for parsing java heap dumps and getting all the information in the heap dump.","body":"So how we can use this eclipse mat api in our program for getting information from java heap dump.Is there any other java api for parsing java heap dumps and getting all the information in the heap dump."},{"owner":{"account_id":4996148,"reputation":462,"user_id":4016683,"display_name":"Pavan Kumar"},"score":0,"creation_date":1696593995,"post_id":29385157,"comment_id":136176559,"body_markdown":"@user3859408 You can try : org-netbeans-lib-profiler (available in maven central)\nhttps://cuprak.info/2018/11/12/exploring-java-heap-dumps/","body":"@user3859408 You can try : org-netbeans-lib-profiler (available in maven central) <a href=\"https://cuprak.info/2018/11/12/exploring-java-heap-dumps/\" rel=\"nofollow noreferrer\">cuprak.info/2018/11/12/exploring-java-heap-dumps</a>"}],"owner":{"account_id":4776457,"reputation":43,"user_id":3859408,"accept_rate":40,"display_name":"user3859408"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":623,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1639310050,"creation_date":1427873360,"question_id":29385157,"body_markdown":"I am tying to read information about Java class , no of instance, it&#39;s size etc\r\nfrom java heap dump.I was using Eclipse MAT jar files in my program to read the heap dump file.While running the program I am getting a NullPointerException.\r\n\r\n**Below given is the code for accessing heap dump file**\r\n\r\n    public static void main(String[] args) throws SnapshotException {\r\n    \t\tISnapshot iSnapshot = SnapshotFactory.openSnapshot(new File(&quot;path to\\\\heap_dmp.hprof&quot;), new VoidProgressListener());\r\n    \t\tCollection&lt;IClass&gt; classes = iSnapshot.getClasses();\r\n    \t\tSystem.out.println(&quot; size = &quot;+classes.size());\r\n    \t}\r\n\r\nWhile running the above program I am getting Exception\r\n\r\n    Exception in thread &quot;main&quot; java.lang.ExceptionInInitializerError\r\n    \tat heapanalyser.HeapAnalyser.main(HeapAnalyser.java:16)\r\n    Caused by: java.lang.NullPointerException\r\n    \tat org.eclipse.mat.snapshot.SnapshotFactory.&lt;clinit&gt;(SnapshotFactory.java:84)\r\n    \t... 1 more\r\n\r\nCan anyone explain how to programatically analyse Heap Dumps","title":"Read Java Heap Dump (.hprof file) using eclipse MAT api","body":"<p>I am tying to read information about Java class , no of instance, it's size etc\nfrom java heap dump.I was using Eclipse MAT jar files in my program to read the heap dump file.While running the program I am getting a NullPointerException.</p>\n\n<p><strong>Below given is the code for accessing heap dump file</strong></p>\n\n<pre><code>public static void main(String[] args) throws SnapshotException {\n        ISnapshot iSnapshot = SnapshotFactory.openSnapshot(new File(\"path to\\\\heap_dmp.hprof\"), new VoidProgressListener());\n        Collection&lt;IClass&gt; classes = iSnapshot.getClasses();\n        System.out.println(\" size = \"+classes.size());\n    }\n</code></pre>\n\n<p>While running the above program I am getting Exception</p>\n\n<pre><code>Exception in thread \"main\" java.lang.ExceptionInInitializerError\n    at heapanalyser.HeapAnalyser.main(HeapAnalyser.java:16)\nCaused by: java.lang.NullPointerException\n    at org.eclipse.mat.snapshot.SnapshotFactory.&lt;clinit&gt;(SnapshotFactory.java:84)\n    ... 1 more\n</code></pre>\n\n<p>Can anyone explain how to programatically analyse Heap Dumps</p>\n"},{"tags":["java","casting","polymorphism","downcast"],"answers":[{"tags":[],"owner":{"account_id":732315,"reputation":4996,"user_id":681444,"display_name":"racraman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1639303412,"creation_date":1639303412,"answer_id":70322547,"question_id":70322384,"body_markdown":"Is there any possibility of casting o1 or o2 to A ?\r\nThat depends on when you try to do the cast.\r\n\r\n          A a4 = new A();\r\n          Object o1 = new Object();\r\n          Object o2 = new A(o1);\r\n    \r\n           // o2 CAN be cast to A here\r\n\r\n          o2 = o1;\r\n\r\n          // o2 now CANNOT be cast to A here, since it is now referencing an object of type Object, not of type A\r\n\r\nThe last statement is an error, because the cast :\r\n\r\n        (A)o2\r\n\r\nIs a runtime error, since o2 at this point is referencing an Object, not an A.  \r\nNote that this cannot be a compilation error, since the syntax of the language means a variable of type Object MIGHT possibly be referencing an object of type A (so the cast MIGHT be valid)","title":"Polymorphism and casting object in Java","body":"<p>Is there any possibility of casting o1 or o2 to A ?\nThat depends on when you try to do the cast.</p>\n<pre><code>      A a4 = new A();\n      Object o1 = new Object();\n      Object o2 = new A(o1);\n\n       // o2 CAN be cast to A here\n\n      o2 = o1;\n\n      // o2 now CANNOT be cast to A here, since it is now referencing an object of type Object, not of type A\n</code></pre>\n<p>The last statement is an error, because the cast :</p>\n<pre><code>    (A)o2\n</code></pre>\n<p>Is a runtime error, since o2 at this point is referencing an Object, not an A.<br />\nNote that this cannot be a compilation error, since the syntax of the language means a variable of type Object MIGHT possibly be referencing an object of type A (so the cast MIGHT be valid)</p>\n"}],"owner":{"account_id":23219815,"reputation":1,"user_id":17312242,"display_name":"kryon16"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":70322547,"answer_count":1,"score":-2,"last_activity_date":1639310048,"creation_date":1639301734,"question_id":70322384,"body_markdown":"is there any possibility that o1 or o2 can be casted to A and the program will run? Why is the last statement a runtime error?\r\n\r\n    public class A{\r\n        public A(Object object)\r\n        {\r\n        \r\n        }\r\n        public A(){\r\n        \r\n        }\r\n        public String toString(){\r\n            return &quot;A&quot;;\r\n        }\r\n    }\r\n\r\n      public class Main{\r\n          public static void main(String []args){\r\n\r\n              A a4 = new A();\r\n              Object o1 = new Object();\r\n              Object o2 = new A(o1);\r\n        \r\n              a4 = o1; //Compilation error\r\n              o2 = o1;\r\n              ((A)o1).toString();//Runtime error\r\n              a4.toString();\r\n              ((A)o2).toString();//Runtime error\r\n    }\r\n}","title":"Polymorphism and casting object in Java","body":"<p>is there any possibility that o1 or o2 can be casted to A and the program will run? Why is the last statement a runtime error?</p>\n<pre><code>public class A{\n    public A(Object object)\n    {\n    \n    }\n    public A(){\n    \n    }\n    public String toString(){\n        return &quot;A&quot;;\n    }\n}\n\n  public class Main{\n      public static void main(String []args){\n\n          A a4 = new A();\n          Object o1 = new Object();\n          Object o2 = new A(o1);\n    \n          a4 = o1; //Compilation error\n          o2 = o1;\n          ((A)o1).toString();//Runtime error\n          a4.toString();\n          ((A)o2).toString();//Runtime error\n}\n</code></pre>\n<p>}</p>\n"},{"tags":["java","jdbc","heap-memory","dropwizard","broken-pipe"],"answers":[{"tags":[],"owner":{"account_id":133720,"reputation":116,"user_id":335310,"display_name":"Ralf"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1429008618,"creation_date":1429008618,"answer_id":29625456,"question_id":29474198,"body_markdown":"Depending on whether you are using [JDBi](http://www.dropwizard.io/manual/jdbi.html), [Hibernate](http://www.dropwizard.io/manual/hibernate.html) or something else, I recommend using the bundles provided to set up connectivity. Those bundles come with a built-in pool that&#39;s easily configurable as the examples on the links should show. \r\n\r\nIf you use plain JDBC or another OR mapper, you can always write a [Managed Object](http://www.dropwizard.io/manual/core.html#man-core-managed) or a proper bundle yourself, or try to leverage a [ManagedPooledDatasource](https://github.com/dropwizard/dropwizard/blob/master/dropwizard-db/src/main/java/io/dropwizard/db/ManagedPooledDataSource.java) directly during startup.","title":"Broken Pipe exception in Dropwizard application","body":"<p>Depending on whether you are using <a href=\"http://www.dropwizard.io/manual/jdbi.html\" rel=\"nofollow\">JDBi</a>, <a href=\"http://www.dropwizard.io/manual/hibernate.html\" rel=\"nofollow\">Hibernate</a> or something else, I recommend using the bundles provided to set up connectivity. Those bundles come with a built-in pool that's easily configurable as the examples on the links should show. </p>\n\n<p>If you use plain JDBC or another OR mapper, you can always write a <a href=\"http://www.dropwizard.io/manual/core.html#man-core-managed\" rel=\"nofollow\">Managed Object</a> or a proper bundle yourself, or try to leverage a <a href=\"https://github.com/dropwizard/dropwizard/blob/master/dropwizard-db/src/main/java/io/dropwizard/db/ManagedPooledDataSource.java\" rel=\"nofollow\">ManagedPooledDatasource</a> directly during startup.</p>\n"},{"tags":[],"owner":{"account_id":4954025,"reputation":18448,"user_id":3987161,"accept_rate":57,"display_name":"user_mda"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1471001557,"creation_date":1429015772,"answer_id":29627783,"question_id":29474198,"body_markdown":"Thanks for the help , I fixed this issue by adding the following to the `yaml` file\r\n\r\n 1. `checkConnectionWhileIdle`: `true`\r\n 2. `checkConnectionOnReturn`: `true`\r\n 3. `checkConnectionOnBorrow`: `true`\r\n\r\nAnd making sure all transactions are committed, rolled back in case of exceptions and sessions are closed after use.","title":"Broken Pipe exception in Dropwizard application","body":"<p>Thanks for the help , I fixed this issue by adding the following to the <code>yaml</code> file</p>\n\n<ol>\n<li><code>checkConnectionWhileIdle</code>: <code>true</code></li>\n<li><code>checkConnectionOnReturn</code>: <code>true</code></li>\n<li><code>checkConnectionOnBorrow</code>: <code>true</code></li>\n</ol>\n\n<p>And making sure all transactions are committed, rolled back in case of exceptions and sessions are closed after use.</p>\n"}],"owner":{"account_id":4954025,"reputation":18448,"user_id":3987161,"accept_rate":57,"display_name":"user_mda"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1122,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":29627783,"answer_count":2,"score":1,"last_activity_date":1639310031,"creation_date":1428333796,"question_id":29474198,"body_markdown":"I am getting a &#39;broken pipe&#39; exception when the server is left running for a long time without any http requests. Upon some investigation I found that this exception occures because the server closes its database connection and occurs when a client requests resources when the connection is close. To fix this I added the following to the jdbc conenction url\r\n\r\n    ?autoReconnect=true\r\n\r\nI also upped the heap memory on the machine just in case. Also there are not many http clients requesting resources from this dropwizard server. Is there anything else that might be going on?\r\n\r\nThe error message for reference \r\n\r\n    You should consider either expiring and/or testing connection validity before use in your application, increasing the server configured values for client timeouts, or using the Connector/J connection property &#39;autoReconnect=true&#39; to avoid this problem.\r\n\r\nI there a way to configure connection pool in dropwizard application?\r\nOr is it a good practice to change the &#39;interactive-timeout&#39; and &#39;wait_timeout&#39;property of mysqld to be more than 8 hours ?","title":"Broken Pipe exception in Dropwizard application","body":"<p>I am getting a 'broken pipe' exception when the server is left running for a long time without any http requests. Upon some investigation I found that this exception occures because the server closes its database connection and occurs when a client requests resources when the connection is close. To fix this I added the following to the jdbc conenction url</p>\n\n<pre><code>?autoReconnect=true\n</code></pre>\n\n<p>I also upped the heap memory on the machine just in case. Also there are not many http clients requesting resources from this dropwizard server. Is there anything else that might be going on?</p>\n\n<p>The error message for reference </p>\n\n<pre><code>You should consider either expiring and/or testing connection validity before use in your application, increasing the server configured values for client timeouts, or using the Connector/J connection property 'autoReconnect=true' to avoid this problem.\n</code></pre>\n\n<p>I there a way to configure connection pool in dropwizard application?\nOr is it a good practice to change the 'interactive-timeout' and 'wait_timeout'property of mysqld to be more than 8 hours ?</p>\n"},{"tags":["java","arrays","heap-memory"],"comments":[{"owner":{"account_id":20059,"reputation":80086,"user_id":47550,"accept_rate":89,"display_name":"Paul Sasik"},"score":0,"creation_date":1428776231,"post_id":29581336,"comment_id":47311058,"body_markdown":"Java is not a good programming language to use and know exactly what&#39;s happening on the heap. It actually does its best to take that responsibility away from the programmer. Java manages memory on your behalf, e.g. garbage collections, heap allocation etc. If you want to understand what happens &quot;closer to the metal&quot; I suggest you go with C or C++.","body":"Java is not a good programming language to use and know exactly what&#39;s happening on the heap. It actually does its best to take that responsibility away from the programmer. Java manages memory on your behalf, e.g. garbage collections, heap allocation etc. If you want to understand what happens &quot;closer to the metal&quot; I suggest you go with C or C++."}],"answers":[{"tags":[],"owner":{"account_id":45934,"reputation":203669,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1428776124,"creation_date":1428776124,"answer_id":29581387,"question_id":29581336,"body_markdown":"1. An array of `int`: there will be a block of memory which is 10 times the size of an `int`, in which the values are stored.\r\n\r\n2. An array of `Employee`: there will be a block of memory which is 10 times the size of an object reference, and each element will refer to an `Employee` object that is somewhere else in memory (or it will be `null`).","title":"Array of objects in Memory","body":"<ol>\n<li><p>An array of <code>int</code>: there will be a block of memory which is 10 times the size of an <code>int</code>, in which the values are stored.</p></li>\n<li><p>An array of <code>Employee</code>: there will be a block of memory which is 10 times the size of an object reference, and each element will refer to an <code>Employee</code> object that is somewhere else in memory (or it will be <code>null</code>).</p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":5601774,"reputation":4444,"user_id":4437780,"accept_rate":80,"display_name":"alainlompo"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1428785530,"creation_date":1428785530,"answer_id":29582896,"question_id":29581336,"body_markdown":"Consider the following images. The first image shows how an array of primitive types (byte, short, int, long, float, double, char, boolean) is stored in memory.\r\n\r\n**The array itself being an object is instanciated using the new keyword** and is allocated some memory in the heap. But s**ince it is a primitve types arrays it directly stores as much primitives values as its size**. These values are set to 0 (in the case of int primitive type array) unless we explicitely change them using an instruction such as `intArray[0] = 10;`\r\n\r\n![primitive types arrays][1]\r\n\r\nIn the case of a refence type array however, there is an interesting difference. **The array itself is allocated some memory space on the heap after being instanciated using the new keyword. But it does not directly store the objects but it store the reference to the objects it is holding**. These reference would be null or the reference (or adress) to the corresponding object somewhere in memory. The reference to each object has the default value of null unless it is changed with an instruction similar to `empArray[0] = new Employee(10, 20);`\r\n\r\nRegarding your follow up question, in a linked list, suppose I am trying to find an object located at, let&#39;s say the 11th position starting from the head of the list, I will have to iterate 10 times to find it. thus the size and the position of an element in a linkedlist will impact the time it takes to retrieve an element. In an array however I simply need to know the index and it finds the element in a constant time. \r\n\r\n![reference types array][2]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/5uaEv.png\r\n  [2]: http://i.stack.imgur.com/fKdG8.png","title":"Array of objects in Memory","body":"<p>Consider the following images. The first image shows how an array of primitive types (byte, short, int, long, float, double, char, boolean) is stored in memory.</p>\n\n<p><strong>The array itself being an object is instanciated using the new keyword</strong> and is allocated some memory in the heap. But s<strong>ince it is a primitve types arrays it directly stores as much primitives values as its size</strong>. These values are set to 0 (in the case of int primitive type array) unless we explicitely change them using an instruction such as <code>intArray[0] = 10;</code></p>\n\n<p><img src=\"https://i.stack.imgur.com/5uaEv.png\" alt=\"primitive types arrays\"></p>\n\n<p>In the case of a refence type array however, there is an interesting difference. <strong>The array itself is allocated some memory space on the heap after being instanciated using the new keyword. But it does not directly store the objects but it store the reference to the objects it is holding</strong>. These reference would be null or the reference (or adress) to the corresponding object somewhere in memory. The reference to each object has the default value of null unless it is changed with an instruction similar to <code>empArray[0] = new Employee(10, 20);</code></p>\n\n<p>Regarding your follow up question, in a linked list, suppose I am trying to find an object located at, let's say the 11th position starting from the head of the list, I will have to iterate 10 times to find it. thus the size and the position of an element in a linkedlist will impact the time it takes to retrieve an element. In an array however I simply need to know the index and it finds the element in a constant time. </p>\n\n<p><img src=\"https://i.stack.imgur.com/fKdG8.png\" alt=\"reference types array\"></p>\n"}],"owner":{"account_id":374510,"reputation":97,"user_id":724747,"accept_rate":0,"display_name":"user724747"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1787,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":2,"score":1,"last_activity_date":1639310009,"creation_date":1428775913,"question_id":29581336,"body_markdown":"I have few basic questions on arrays.\r\n\r\n1. Consider I declare an array of integers\r\n\r\n        int intArray[] = new intArray[10];\r\n        intArray[0] = 10;\r\n        intArray[1] = 20;\r\n        // and so on...\r\n\r\nHow is `intArray` stored in memory (I mean the elements of the array)?\r\n\r\n2. Consider I declare an array of objects  of some type, say `Employee`\r\n\r\n        class Employee {\r\n            int x = 10; \r\n            int y = 20; \r\n\r\n            Employee(int x, int y) {\r\n                this.x = x;\r\n                this.y = y;\r\n            }\r\n        }\r\n    \r\n        class TestEmployee {\r\n            public void main(String args[]) {\r\n                Employee empArray = new Employee[10];\r\n                empArray[0] = new Employee(10, 20);\r\n                empArray[1] = new Employee(30, 40);\r\n                ...\r\n            }\r\n        }\r\n\r\nWhat does `empArray` look like in memory?","title":"Array of objects in Memory","body":"<p>I have few basic questions on arrays.</p>\n\n<ol>\n<li><p>Consider I declare an array of integers</p>\n\n<pre><code>int intArray[] = new intArray[10];\nintArray[0] = 10;\nintArray[1] = 20;\n// and so on...\n</code></pre></li>\n</ol>\n\n<p>How is <code>intArray</code> stored in memory (I mean the elements of the array)?</p>\n\n<ol start=\"2\">\n<li><p>Consider I declare an array of objects  of some type, say <code>Employee</code></p>\n\n<pre><code>class Employee {\n    int x = 10; \n    int y = 20; \n\n    Employee(int x, int y) {\n        this.x = x;\n        this.y = y;\n    }\n}\n\nclass TestEmployee {\n    public void main(String args[]) {\n        Employee empArray = new Employee[10];\n        empArray[0] = new Employee(10, 20);\n        empArray[1] = new Employee(30, 40);\n        ...\n    }\n}\n</code></pre></li>\n</ol>\n\n<p>What does <code>empArray</code> look like in memory?</p>\n"},{"tags":["java","heap-memory","tomcat6","confluence","catalina"],"comments":[{"owner":{"account_id":4888255,"reputation":4312,"user_id":3940047,"accept_rate":80,"display_name":"Pavan Kumar"},"score":0,"creation_date":1429636014,"post_id":29771598,"comment_id":47687637,"body_markdown":"May be this helps: http://serverfault.com/questions/139435/where-to-set-java-heap-options-e-g-xmx-for-tomcat-6-under-ubuntu-9-04","body":"May be this helps: <a href=\"http://serverfault.com/questions/139435/where-to-set-java-heap-options-e-g-xmx-for-tomcat-6-under-ubuntu-9-04\" title=\"where to set java heap options e g xmx for tomcat 6 under ubuntu 9 04\">serverfault.com/questions/139435/&hellip;</a>"},{"owner":{"account_id":951604,"reputation":3220,"user_id":977649,"display_name":"schtever"},"score":0,"creation_date":1429637836,"post_id":29771598,"comment_id":47688751,"body_markdown":"Are you sure that CATALINA_BASE=../target/container/tomcat6x/apache-tomcat-6.0.20?  Also, are you sure that setenv.sh is readable by whatever user is running tomcat?","body":"Are you sure that CATALINA_BASE=../target/container/tomcat6x/apache-tomcat-6.0&zwnj;&#8203;.20?  Also, are you sure that setenv.sh is readable by whatever user is running tomcat?"},{"owner":{"account_id":933847,"reputation":1154,"user_id":963159,"accept_rate":75,"display_name":"sash"},"score":0,"creation_date":1429648543,"post_id":29771598,"comment_id":47695076,"body_markdown":"@schtever I executed the startup.sh script file and logged the CATALINA_HOME variable its point to the same path where I added the setenv.sh file \n\n../target/container/tomcat6x/apache-tomcat-6.0.20\n\nand I also changed the permission of setenv.sh to read and write for all the user groups, but I still don&#39;t have any luck with increasing the heap size.","body":"@schtever I executed the startup.sh script file and logged the CATALINA_HOME variable its point to the same path where I added the setenv.sh file   ../target/container/tomcat6x/apache-tomcat-6.0.20  and I also changed the permission of setenv.sh to read and write for all the user groups, but I still don&#39;t have any luck with increasing the heap size."}],"owner":{"account_id":933847,"reputation":1154,"user_id":963159,"accept_rate":75,"display_name":"sash"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":716,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1639309992,"creation_date":1429617462,"question_id":29771598,"body_markdown":"In my Confluence plugin development, my local confluence instance uses tomcat6. (Confluence Version 5.6.5 , OS : Mac OS X)\r\n\r\nI need to increase the heap size from the default 512m to 1024m. \r\n\r\nI added a new setenv.sh file inside the bin directory of the location below.\r\n\r\n../target/container/tomcat6x/apache-tomcat-6.0.20/bin\r\n\r\nAnd also added the below contents to the file \r\n\r\n    export CATALINA_OPTS=&quot;$CATALINA_OPTS -server -Xms1024m -Xmx1024m -XX:MaxPermSize=512m&quot;\r\n\r\nbut when i restarted the confluence instance I didnt find the change of heap size being reflected. \r\n\r\nFollowing are the JVM statistics generated during the atlas-run command after the changes are made.\r\n\r\n could some one clarify me if I am doing something wrong ??\r\n\r\nthanks in advance!\r\n\r\n![enter image description here][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/REN9t.png","title":"Changing setenv.sh in tomcat6 didn&#39;t increase Heap size","body":"<p>In my Confluence plugin development, my local confluence instance uses tomcat6. (Confluence Version 5.6.5 , OS : Mac OS X)</p>\n\n<p>I need to increase the heap size from the default 512m to 1024m. </p>\n\n<p>I added a new setenv.sh file inside the bin directory of the location below.</p>\n\n<p>../target/container/tomcat6x/apache-tomcat-6.0.20/bin</p>\n\n<p>And also added the below contents to the file </p>\n\n<pre><code>export CATALINA_OPTS=\"$CATALINA_OPTS -server -Xms1024m -Xmx1024m -XX:MaxPermSize=512m\"\n</code></pre>\n\n<p>but when i restarted the confluence instance I didnt find the change of heap size being reflected. </p>\n\n<p>Following are the JVM statistics generated during the atlas-run command after the changes are made.</p>\n\n<p>could some one clarify me if I am doing something wrong ??</p>\n\n<p>thanks in advance!</p>\n\n<p><img src=\"https://i.stack.imgur.com/REN9t.png\" alt=\"enter image description here\"></p>\n"},{"tags":["java","xml","encoding","heap-memory","fileutils"],"comments":[{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1431530103,"post_id":30218510,"comment_id":48541744,"body_markdown":"How big are the files? Kilobytes? Megabytes? Gigabytes? Why do you need to read them fully, that seems very wasteful, can you try to process them as a stream (i.e. read a little, write a little, ...). And last but not least: if you simply &quot;recode&quot; an XML file without fixing the header, then it can easily end up malformed: if the header mentions a different encoding than what is actually used a confirming XML parser *must* report that as an error (if it can detect that).","body":"How big are the files? Kilobytes? Megabytes? Gigabytes? Why do you need to read them fully, that seems very wasteful, can you try to process them as a stream (i.e. read a little, write a little, ...). And last but not least: if you simply &quot;recode&quot; an XML file without fixing the header, then it can easily end up malformed: if the header mentions a different encoding than what is actually used a confirming XML parser <i>must</i> report that as an error (if it can detect that)."},{"owner":{"account_id":6140199,"reputation":11,"user_id":4787826,"display_name":"Igor L."},"score":0,"creation_date":1431531673,"post_id":30218510,"comment_id":48542876,"body_markdown":"the majority is in Kb, some in a few Mb, but for some reason, there was a pom.xml with 300Mb, very strange. I&#39;m reading the whole file at once only for convenience, haven&#39;t found yet a File Stream where I could play with encodings, any suggestions? I&#39;m currently replacing the encoding from XML files on eclipse, but I plan to put it in the code very soon. Thanks!","body":"the majority is in Kb, some in a few Mb, but for some reason, there was a pom.xml with 300Mb, very strange. I&#39;m reading the whole file at once only for convenience, haven&#39;t found yet a File Stream where I could play with encodings, any suggestions? I&#39;m currently replacing the encoding from XML files on eclipse, but I plan to put it in the code very soon. Thanks!"}],"answers":[{"tags":[],"owner":{"account_id":6106038,"reputation":1680,"user_id":4763733,"accept_rate":25,"display_name":"Fran Montero"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1431529763,"creation_date":1431529763,"answer_id":30218841,"question_id":30218510,"body_markdown":"Your memory is being leaked so in order to check the problem you can \r\nconfigure your JVM with these parameters `-XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/path/to/dump`. When `OutOfMemoryError` get thrown a dump will be created in `/path/to/dump`. Then you can analyse it with [Eclipse Memory Analyzer][1] and look for the objects that are leeaking your memory.\r\nNice tutorial [here][2]\r\n\r\n\r\n  [1]: http://eclipse.org/mat/\r\n  [2]: http://www.vogella.com/tutorials/EclipseMemoryAnalyzer/article.html","title":"&quot;java.lang.OutOfMemoryError: Java heap space&quot; When calling FileUtils.readFileToString on xml files","body":"<p>Your memory is being leaked so in order to check the problem you can \nconfigure your JVM with these parameters <code>-XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/path/to/dump</code>. When <code>OutOfMemoryError</code> get thrown a dump will be created in <code>/path/to/dump</code>. Then you can analyse it with <a href=\"http://eclipse.org/mat/\" rel=\"nofollow\">Eclipse Memory Analyzer</a> and look for the objects that are leeaking your memory.\nNice tutorial <a href=\"http://www.vogella.com/tutorials/EclipseMemoryAnalyzer/article.html\" rel=\"nofollow\">here</a></p>\n"}],"owner":{"account_id":6140199,"reputation":11,"user_id":4787826,"display_name":"Igor L."},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1185,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1639309964,"creation_date":1431528876,"question_id":30218510,"body_markdown":"My program iterates over a directory and uses the following function, from my Recoder class, to read a file using `FileUtils.readFileToString` on a encoding and overwrites it using `FileUtils.write` on another encoding.\r\n\r\n    \r\n\r\nHowever, when it tries to do this with an xml file, I get the exception at the title, otherwise, it works fine (i have tested on a dir with .java, .js, .css, .html, .jsp...).\r\n\r\n    public class Recoder {\r\n    \tprivate static Charset fromCharset;\r\n    \tprivate static Charset toCharset;\r\n    \r\n    \tpublic static void recodeToUTF(File f, boolean verbose){\r\n    \t\ttry{\r\n    \t\t\tif(verbose){\r\n    \t\t\t\tSystem.out.println(&quot;Convertendo &quot;+f.getAbsolutePath()+&quot; para UTF-8&quot;);\r\n    \t\t\t}\r\n    \t\t\ttoCharset = Charset.forName(&quot;UTF-8&quot;);\r\n    \t\t\tString content = FileUtils.readFileToString(f);\r\n    \t\t\tFileUtils.write(f,content, toCharset);\r\n    \t\t}catch(Exception e){\t\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tpublic static void recodeFile(File f, String de, String para, boolean verbose){\r\n    \t\ttry{\r\n    \t\t\tif(verbose){\r\n    \t\t\t\tSystem.out.println(&quot;Convertendo &quot;+f.getAbsolutePath()+&quot; de &quot;+ de + &quot; para &quot;+ para);\r\n    \t\t\t}\r\n    //\t\t\tCharsetDetector cd= new CharsetDetector();\r\n    //\t\t\tFileInputStream fis = new FileInputStream(f);\r\n    //\t\t\tcd.setText(fis);\r\n    //\t\t\tfis.close();\r\n    //\t\t\tCharsetMatch cm = cd.detect();\r\n    \t\t\t\r\n    //\t\t\tif(cm!=null){\r\n    //\t\t\t\tfromCharset = Charset.forName(cm.getName());\r\n    //\t\t\t}else{ fromCharset = Charset.forName(de);}\r\n    \t\t\tfromCharset = Charset.forName(de);\r\n    \t\t\ttoCharset = Charset.forName(para);\r\n    \t\t\tString content = FileUtils.readFileToString(f,fromCharset);\r\n    \t\t\tFileUtils.write(f,content,toCharset);\r\n    \t\t\tcontent=null;\r\n    \t\t}catch(Exception e){\t\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tpublic static String removeAcentos(String str) {\r\n    \t\tstr = Normalizer.normalize(str, Normalizer.Form.NFD);\r\n    \t\tstr = str.replaceAll(&quot;[^\\\\p{ASCII}]&quot;, &quot;&quot;);\r\n    \t\treturn str;  \r\n    \t}\r\n    \r\n    }\r\n\r\nThe CharsetDetector stuff is from ICU4J, and for some reason it hangs when calling cd.detect() so, for now, I just left it in comments.\r\n\r\nThis is the main that calls it:\r\n\r\n    public static void main( String[] args ){\r\n    \t\tDecoderArguments decArgs = new DecoderArguments();\r\n    \t\tJCommander jc = new JCommander(decArgs, args);\r\n    \t\ttry {\r\n    \t\t\tif(args.length&gt;0){\r\n    \t\t\t\tfor(String s : decArgs.files){\r\n    \t\t\t\t\tFile file;\r\n    \t\t\t\t\tif (decArgs.recursive){\r\n    \t\t\t\t\t\tSystem.out.println(&quot;Executando Recursivamente em: &quot;+ s);\r\n    \t\t\t\t\t\tfile = new File(s);\r\n    \t\t\t\t\t\tif(file.isDirectory()){\r\n    \t\t\t\t\t\t\tCollection&lt;File&gt; files = FileUtils.listFiles(file,FileFileFilter.FILE, DirectoryFileFilter.DIRECTORY);\r\n    \t\t\t\t\t\t\tfor (File f : files){\r\n    \t\t\t\t\t\t\t\tboolean exec=true;\r\n    \t\t\t\t\t\t\t\tfor(String excl : decArgs.excludes){\r\n    \t\t\t\t\t\t\t\t\tif (f.getAbsolutePath().contains(excl)) exec=false;\r\n    \t\t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t\t\tif (file.exists() &amp;&amp; exec){\r\n    \t\t\t\t\t\t\t\t\tif(&quot;&quot;.equals(decArgs.fromEncoding)){\r\n    \t\t\t\t\t\t\t\t\t\tRecoder.recodeToUTF(f, decArgs.verbose);\r\n    \t\t\t\t\t\t\t\t\t}else {\r\n    \t\t\t\t\t\t\t\t\t\tRecoder.recodeFile(f, decArgs.fromEncoding, decArgs.toEncoding, decArgs.verbose);\r\n    \t\t\t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t\t\t\tSystem.gc();\r\n    \t\t\t\t\t\t\t\t}\t\t\t\t\t\t\t\r\n    \t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t}else{\r\n    \t\t\t\t\t\t\tSystem.out.println(&quot;Por favor, informe um diretorio para ler recursivamente.\\n&quot;\r\n    \t\t\t\t\t\t\t\t\t+ &quot;Uso: java -jar decoder.jar &lt;-r&gt; Caminho|Arquivo&quot;);\r\n    \t\t\t\t\t\t}\t\t\r\n    \t\t\t\t\t}else{\r\n    \t\t\t\t\t\tSystem.out.println(&quot;Convertendo arquivo: &quot;+ s);\r\n    \t\t\t\t\t\tfile = new File(s);\r\n    \t\t\t\t\t\tboolean exec=true;\r\n    \t\t\t\t\t\tfor(String excl : decArgs.excludes){\r\n    \t\t\t\t\t\t\tif (file.getAbsolutePath().contains(excl)) exec=false;\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t\tif (file.exists() &amp;&amp; exec){\r\n    \t\t\t\t\t\t\tif(&quot;&quot;.equals(decArgs.fromEncoding)){\r\n    \t\t\t\t\t\t\t\tRecoder.recodeToUTF(file, decArgs.verbose);\r\n    \t\t\t\t\t\t\t}else {\r\n    \t\t\t\t\t\t\t\tRecoder.recodeFile(file, decArgs.fromEncoding, decArgs.toEncoding, decArgs.verbose);\r\n    \t\t\t\t\t\t\t}\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t}else if (args.length==0){\r\n    \t\t\t\tSystem.out.println(&quot;Sintaxe incorreta.\\n&quot;);\r\n    \t\t\t\tjc.usage();\r\n    \t\t\t}\r\n    \t\t} catch (Exception e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t}\r\n\r\nThings to note:\r\n\r\n - I&#39;m using the following VM arguments on Eclipse -Xms1024m -Xmx2048m\r\n - JDK version 1.7.0_75\r\n - I&#39;ve experimented with some System.gc() but no avail\r\n - It only happens when the main is running recursively(`decArgs.recursive=true`), the same file that throws the exception is recoded smoothly when\r\n - Already checked the file encoding on bash and hardcoded it for a test, no luck there also.\r\n\r\n\r\nAny ideas on why this is happening?\r\n\r\nThanks in advance!\r\n\r\n**EDIT:**\r\nUsing `Recoder.recodeToUTF` method instead of `Recoder.recodeFile` causes no OutOfMemory to be thrown. Maybe trying to open with an wrong encoding causes the memory leak.\r\n\r\nAnalysing the .hprof generated, the (messed up) 300Mb xml file was using around 500Mb of the heap. However, the heap is set to an maximum size of 2Gb","title":"&quot;java.lang.OutOfMemoryError: Java heap space&quot; When calling FileUtils.readFileToString on xml files","body":"<p>My program iterates over a directory and uses the following function, from my Recoder class, to read a file using <code>FileUtils.readFileToString</code> on a encoding and overwrites it using <code>FileUtils.write</code> on another encoding.</p>\n\n<p>However, when it tries to do this with an xml file, I get the exception at the title, otherwise, it works fine (i have tested on a dir with .java, .js, .css, .html, .jsp...).</p>\n\n<pre><code>public class Recoder {\n    private static Charset fromCharset;\n    private static Charset toCharset;\n\n    public static void recodeToUTF(File f, boolean verbose){\n        try{\n            if(verbose){\n                System.out.println(\"Convertendo \"+f.getAbsolutePath()+\" para UTF-8\");\n            }\n            toCharset = Charset.forName(\"UTF-8\");\n            String content = FileUtils.readFileToString(f);\n            FileUtils.write(f,content, toCharset);\n        }catch(Exception e){    \n        }\n    }\n\n    public static void recodeFile(File f, String de, String para, boolean verbose){\n        try{\n            if(verbose){\n                System.out.println(\"Convertendo \"+f.getAbsolutePath()+\" de \"+ de + \" para \"+ para);\n            }\n//          CharsetDetector cd= new CharsetDetector();\n//          FileInputStream fis = new FileInputStream(f);\n//          cd.setText(fis);\n//          fis.close();\n//          CharsetMatch cm = cd.detect();\n\n//          if(cm!=null){\n//              fromCharset = Charset.forName(cm.getName());\n//          }else{ fromCharset = Charset.forName(de);}\n            fromCharset = Charset.forName(de);\n            toCharset = Charset.forName(para);\n            String content = FileUtils.readFileToString(f,fromCharset);\n            FileUtils.write(f,content,toCharset);\n            content=null;\n        }catch(Exception e){    \n        }\n    }\n\n    public static String removeAcentos(String str) {\n        str = Normalizer.normalize(str, Normalizer.Form.NFD);\n        str = str.replaceAll(\"[^\\\\p{ASCII}]\", \"\");\n        return str;  \n    }\n\n}\n</code></pre>\n\n<p>The CharsetDetector stuff is from ICU4J, and for some reason it hangs when calling cd.detect() so, for now, I just left it in comments.</p>\n\n<p>This is the main that calls it:</p>\n\n<pre><code>public static void main( String[] args ){\n        DecoderArguments decArgs = new DecoderArguments();\n        JCommander jc = new JCommander(decArgs, args);\n        try {\n            if(args.length&gt;0){\n                for(String s : decArgs.files){\n                    File file;\n                    if (decArgs.recursive){\n                        System.out.println(\"Executando Recursivamente em: \"+ s);\n                        file = new File(s);\n                        if(file.isDirectory()){\n                            Collection&lt;File&gt; files = FileUtils.listFiles(file,FileFileFilter.FILE, DirectoryFileFilter.DIRECTORY);\n                            for (File f : files){\n                                boolean exec=true;\n                                for(String excl : decArgs.excludes){\n                                    if (f.getAbsolutePath().contains(excl)) exec=false;\n                                }\n                                if (file.exists() &amp;&amp; exec){\n                                    if(\"\".equals(decArgs.fromEncoding)){\n                                        Recoder.recodeToUTF(f, decArgs.verbose);\n                                    }else {\n                                        Recoder.recodeFile(f, decArgs.fromEncoding, decArgs.toEncoding, decArgs.verbose);\n                                    }\n                                    System.gc();\n                                }                           \n                            }\n                        }else{\n                            System.out.println(\"Por favor, informe um diretorio para ler recursivamente.\\n\"\n                                    + \"Uso: java -jar decoder.jar &lt;-r&gt; Caminho|Arquivo\");\n                        }       \n                    }else{\n                        System.out.println(\"Convertendo arquivo: \"+ s);\n                        file = new File(s);\n                        boolean exec=true;\n                        for(String excl : decArgs.excludes){\n                            if (file.getAbsolutePath().contains(excl)) exec=false;\n                        }\n                        if (file.exists() &amp;&amp; exec){\n                            if(\"\".equals(decArgs.fromEncoding)){\n                                Recoder.recodeToUTF(file, decArgs.verbose);\n                            }else {\n                                Recoder.recodeFile(file, decArgs.fromEncoding, decArgs.toEncoding, decArgs.verbose);\n                            }\n                        }\n                    }\n                }\n            }else if (args.length==0){\n                System.out.println(\"Sintaxe incorreta.\\n\");\n                jc.usage();\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n</code></pre>\n\n<p>Things to note:</p>\n\n<ul>\n<li>I'm using the following VM arguments on Eclipse -Xms1024m -Xmx2048m</li>\n<li>JDK version 1.7.0_75</li>\n<li>I've experimented with some System.gc() but no avail</li>\n<li>It only happens when the main is running recursively(<code>decArgs.recursive=true</code>), the same file that throws the exception is recoded smoothly when</li>\n<li>Already checked the file encoding on bash and hardcoded it for a test, no luck there also.</li>\n</ul>\n\n<p>Any ideas on why this is happening?</p>\n\n<p>Thanks in advance!</p>\n\n<p><strong>EDIT:</strong>\nUsing <code>Recoder.recodeToUTF</code> method instead of <code>Recoder.recodeFile</code> causes no OutOfMemory to be thrown. Maybe trying to open with an wrong encoding causes the memory leak.</p>\n\n<p>Analysing the .hprof generated, the (messed up) 300Mb xml file was using around 500Mb of the heap. However, the heap is set to an maximum size of 2Gb</p>\n"},{"tags":["java","arrays","heap-memory"],"comments":[{"owner":{"account_id":80348,"reputation":63958,"user_id":227267,"accept_rate":80,"display_name":"Matti Virkkunen"},"score":4,"creation_date":1431658595,"post_id":30250788,"comment_id":48602025,"body_markdown":"Do you really need to have all the numbers in memory at once? That&#39;s 4 GB right there...","body":"Do you really need to have all the numbers in memory at once? That&#39;s 4 GB right there..."},{"owner":{"account_id":6169672,"reputation":556,"user_id":4808327,"display_name":"kaykay"},"score":1,"creation_date":1431658655,"post_id":30250788,"comment_id":48602039,"body_markdown":"Your heap is less than 4GB (your array size)","body":"Your heap is less than 4GB (your array size)"},{"owner":{"account_id":3434141,"reputation":9,"user_id":2877634,"display_name":"mojtaba omid"},"score":0,"creation_date":1431658903,"post_id":30250788,"comment_id":48602105,"body_markdown":"yes i need test my algorithm with big input to compare it with else . how can i increase heap?","body":"yes i need test my algorithm with big input to compare it with else . how can i increase heap?"},{"owner":{"account_id":8291,"reputation":860447,"user_id":14860,"accept_rate":100,"display_name":"paxdiablo"},"score":2,"creation_date":1431659432,"post_id":30250788,"comment_id":48602253,"body_markdown":"Specify your algorithm, that will greatly assist in providing more targeted solutions beyond the &quot;if this, do A, otherwise if that, do B, ...&quot;.","body":"Specify your algorithm, that will greatly assist in providing more targeted solutions beyond the &quot;if this, do A, otherwise if that, do B, ...&quot;."}],"answers":[{"tags":[],"owner":{"account_id":8291,"reputation":860447,"user_id":14860,"accept_rate":100,"display_name":"paxdiablo"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1431659167,"creation_date":1431658762,"answer_id":30250817,"question_id":30250788,"body_markdown":"You&#39;re trying to create a (roughly) 4G array and it&#39;s too big to fit in the heap (one billion 4-byte integers).\r\n\r\nMost likely, if you want to do it that way, you&#39;re going to need a 64-bit Java running on a 64-bit operating system (and possibly a large amount of physical memory for performance), and increasing the heap size to something much larger than the default (such as with `java -Xmx6g` or something similar).\r\n\r\nOr, if your algorithm is able to operate on the data in sections, that may be a better option.\r\n\r\nSo, if you&#39;re summing the items in the file, you can bring them in a thousand at a time to add them to a running total. Now that&#39;s not going to be easy if there&#39;s a lot of random access of all sorts of different integers but, in that case, you could possibly create the array on disk and use a caching/LRU interface to ensure you only load in what&#39;s needed at any given point.\r\n","title":"1000000000 array input in java","body":"<p>You're trying to create a (roughly) 4G array and it's too big to fit in the heap (one billion 4-byte integers).</p>\n\n<p>Most likely, if you want to do it that way, you're going to need a 64-bit Java running on a 64-bit operating system (and possibly a large amount of physical memory for performance), and increasing the heap size to something much larger than the default (such as with <code>java -Xmx6g</code> or something similar).</p>\n\n<p>Or, if your algorithm is able to operate on the data in sections, that may be a better option.</p>\n\n<p>So, if you're summing the items in the file, you can bring them in a thousand at a time to add them to a running total. Now that's not going to be easy if there's a lot of random access of all sorts of different integers but, in that case, you could possibly create the array on disk and use a caching/LRU interface to ensure you only load in what's needed at any given point.</p>\n"},{"tags":[],"owner":{"account_id":2910119,"reputation":1050,"user_id":2494555,"display_name":"blazetopher"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1431662257,"creation_date":1431658777,"answer_id":30250822,"question_id":30250788,"body_markdown":"Firstly, I agree with all the comments and answers suggesting that you try to hold on to as little data as possible.\n\r\nPresuming you **really** do need all that data, you need to start your java container with more memory using the -Xmx flag:\r\n\r\n    java -Xmx6g &lt;your launch args here&gt;\r\n\r\nAnd if you _can&#39;t_ launch Java using the above args, then it means you either are running 32 bit Java _or_ you don&#39;t have 6GB of memory available (which means in both cases that you cannot allocate an array of this size).","title":"1000000000 array input in java","body":"<p>Firstly, I agree with all the comments and answers suggesting that you try to hold on to as little data as possible.</p>\n\n<p>Presuming you <strong>really</strong> do need all that data, you need to start your java container with more memory using the -Xmx flag:</p>\n\n<pre><code>java -Xmx6g &lt;your launch args here&gt;\n</code></pre>\n\n<p>And if you <em>can't</em> launch Java using the above args, then it means you either are running 32 bit Java <em>or</em> you don't have 6GB of memory available (which means in both cases that you cannot allocate an array of this size).</p>\n"},{"tags":[],"owner":{"account_id":4114162,"reputation":1470,"user_id":3376221,"accept_rate":100,"display_name":"Luke Melaia"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1431660364,"creation_date":1431660364,"answer_id":30251038,"question_id":30250788,"body_markdown":"I would recommend against an almost 4GB array for many reasons, first you will eat most, if not all your ram resources and second its probably easier, and overall better to break it down.\r\n\r\nTry to break up the data into different files or simply read the data from the file into the array piece by piece and handle it like that.\r\n\r\nIf you want handle the data like this regardless do the following:\r\n\r\n1). Make sure you a 64bit operating system and a 64bit java version or this will be impossible.\r\n\r\n2). Increase your java memory heap size to over 4GB maybe 5 or 6. Use the command `java -Xmx6g programName` where xmx is the command, 6g is is heap size and programName is the name of your program. When running your program from windows command prompt. Or just set in your IDE.\r\n\r\nHope this helps.","title":"1000000000 array input in java","body":"<p>I would recommend against an almost 4GB array for many reasons, first you will eat most, if not all your ram resources and second its probably easier, and overall better to break it down.</p>\n\n<p>Try to break up the data into different files or simply read the data from the file into the array piece by piece and handle it like that.</p>\n\n<p>If you want handle the data like this regardless do the following:</p>\n\n<p>1). Make sure you a 64bit operating system and a 64bit java version or this will be impossible.</p>\n\n<p>2). Increase your java memory heap size to over 4GB maybe 5 or 6. Use the command <code>java -Xmx6g programName</code> where xmx is the command, 6g is is heap size and programName is the name of your program. When running your program from windows command prompt. Or just set in your IDE.</p>\n\n<p>Hope this helps.</p>\n"}],"owner":{"account_id":3434141,"reputation":9,"user_id":2877634,"display_name":"mojtaba omid"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1350,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":3,"score":0,"last_activity_date":1639309947,"creation_date":1431658491,"question_id":30250788,"body_markdown":"I am trying to test an algorithm that needs 1,000,000,000 array input.\r\n\r\n    Scanner scanner = new Scanner(new File(&quot;999999998.txt&quot;));\r\n    int[] tall = new int[1000000000];\r\n    int i = 0;\r\n    while (scanner.hasNextInt()) {\r\n        tall[i++] = scanner.nextInt();\r\n    }\r\n\r\n\r\nThis exception is thrown:\r\n\r\n    Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space\r\n\r\n","title":"1000000000 array input in java","body":"<p>I am trying to test an algorithm that needs 1,000,000,000 array input.</p>\n\n<pre><code>Scanner scanner = new Scanner(new File(\"999999998.txt\"));\nint[] tall = new int[1000000000];\nint i = 0;\nwhile (scanner.hasNextInt()) {\n    tall[i++] = scanner.nextInt();\n}\n</code></pre>\n\n<p>This exception is thrown:</p>\n\n<pre><code>Exception in thread \"main\" java.lang.OutOfMemoryError: Java heap space\n</code></pre>\n"},{"tags":["java","exception","heap-memory"],"comments":[{"owner":{"account_id":1441481,"reputation":10825,"user_id":1361506,"display_name":"azurefrog"},"score":2,"creation_date":1432310298,"post_id":30401124,"comment_id":48889854,"body_markdown":"Make your heap bigger, or use less of it.","body":"Make your heap bigger, or use less of it."},{"owner":{"account_id":4217241,"reputation":3325,"user_id":3453041,"accept_rate":93,"display_name":"Water"},"score":0,"creation_date":1432310384,"post_id":30401124,"comment_id":48889920,"body_markdown":"Are you sure doing `byte[] buffer = new byte[32];` is a good idea? I recall that when I changed my buffer from 2048 to something less than 128, I was getting serious performance issues.","body":"Are you sure doing <code>byte[] buffer = new byte[32];</code> is a good idea? I recall that when I changed my buffer from 2048 to something less than 128, I was getting serious performance issues."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":1,"creation_date":1432310465,"post_id":30401124,"comment_id":48889969,"body_markdown":"Use a profiler to look at your app&#39;s memory usage.  Objects that are never garbage collected possibly are being held when they could be released.  If that fails, buy more memory chips and plug them into your mainboard.","body":"Use a profiler to look at your app&#39;s memory usage.  Objects that are never garbage collected possibly are being held when they could be released.  If that fails, buy more memory chips and plug them into your mainboard."},{"owner":{"account_id":3284727,"reputation":1563,"user_id":2764487,"accept_rate":70,"display_name":"Akash Rajbanshi"},"score":0,"creation_date":1432310506,"post_id":30401124,"comment_id":48889992,"body_markdown":"Read this article: http://javarevisited.blogspot.com/2011/09/javalangoutofmemoryerror-permgen-space.html","body":"Read this article: <a href=\"http://javarevisited.blogspot.com/2011/09/javalangoutofmemoryerror-permgen-space.html\" rel=\"nofollow noreferrer\">javarevisited.blogspot.com/2011/09/&hellip;</a>"},{"owner":{"account_id":4959899,"reputation":187,"user_id":3991412,"accept_rate":78,"display_name":"Stacker1234"},"score":0,"creation_date":1432310687,"post_id":30401124,"comment_id":48890108,"body_markdown":"Thanks for the link @Akash , For others , I am working on laptop with 16GB of RAM , it cant be better than that.","body":"Thanks for the link @Akash , For others , I am working on laptop with 16GB of RAM , it cant be better than that."}],"answers":[{"tags":[],"owner":{"account_id":194909,"reputation":4585,"user_id":437506,"accept_rate":47,"display_name":"Kedar Mhaswade"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1432315089,"creation_date":1432314030,"answer_id":30402174,"question_id":30401124,"body_markdown":"One Oracle java command line flag named [-XshowSettings](https://docs.oracle.com/javase/8/docs/technotes/tools/windows/java.html) may help you understand what is going on.\r\n\r\nOn my machine (Ubuntu 12.04) with Oracle JVM 1.7.0_75, this program runs fine, producing no output as desired, for a 100MB file:\r\n\r\n    $ java -XshowSettings:vm -cp target/classes/:/data/home/kmhaswade/.m2/repository/commons-io/commons-io/2.4/commons-io-2.4.jar foo.TestClass\r\n    VM settings:\r\n        Max. Heap Size (Estimated): 1.73G\r\n        Ergonomics Machine Class: server\r\n        Using VM: OpenJDK 64-Bit Server VM\r\n\r\n To demonstrate what others have said with respect to JVM&#39;s handling of the heap space, I ran it with -Xmx10m and here&#39;s what I get (__as expected__):\r\n\r\n    $ java -XshowSettings:vm -Xmx10m -cp target/classes/:/data/home/kmhaswade/.m2/repository/commons-io/commons-io/2.4/commons-io-2.4.jar foo.TestClass\r\n    VM settings:\r\n        Max. Heap Size: 10.00M\r\n        Ergonomics Machine Class: server\r\n        Using VM: OpenJDK 64-Bit Server VM\r\n    \r\n    Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space\r\n            at org.apache.commons.io.output.ByteArrayOutputStream.needNewBuffer(ByteArrayOutputStream.java:122)\r\n            at org.apache.commons.io.output.ByteArrayOutputStream.write(ByteArrayOutputStream.java:153)\r\n            at org.apache.commons.io.IOUtils.copyLarge(IOUtils.java:1793)\r\n            at org.apache.commons.io.IOUtils.copyLarge(IOUtils.java:1769)\r\n            at org.apache.commons.io.IOUtils.copy(IOUtils.java:1744)\r\n            at org.apache.commons.io.IOUtils.toByteArray(IOUtils.java:462)\r\n            at foo.TestClass.main(TestClass.java:12)\r\n\r\nThus, basically, at the line 12 of TestClass, where we are asking for the entire bytearray to be returned, we are running OOM because we started the JVM with maximum 10MB as the heap allocation.\r\n\r\nThe default max heap in my case is 1.73G because JVM ergonomics determine it based on the class of the machine. Maybe it&#39;s different in your case and hence by default it fails for you with a 100MB file.","title":"Is there any way to handle Java heap space exception","body":"<p>One Oracle java command line flag named <a href=\"https://docs.oracle.com/javase/8/docs/technotes/tools/windows/java.html\" rel=\"noreferrer\">-XshowSettings</a> may help you understand what is going on.</p>\n\n<p>On my machine (Ubuntu 12.04) with Oracle JVM 1.7.0_75, this program runs fine, producing no output as desired, for a 100MB file:</p>\n\n<pre><code>$ java -XshowSettings:vm -cp target/classes/:/data/home/kmhaswade/.m2/repository/commons-io/commons-io/2.4/commons-io-2.4.jar foo.TestClass\nVM settings:\n    Max. Heap Size (Estimated): 1.73G\n    Ergonomics Machine Class: server\n    Using VM: OpenJDK 64-Bit Server VM\n</code></pre>\n\n<p>To demonstrate what others have said with respect to JVM's handling of the heap space, I ran it with -Xmx10m and here's what I get (<strong>as expected</strong>):</p>\n\n<pre><code>$ java -XshowSettings:vm -Xmx10m -cp target/classes/:/data/home/kmhaswade/.m2/repository/commons-io/commons-io/2.4/commons-io-2.4.jar foo.TestClass\nVM settings:\n    Max. Heap Size: 10.00M\n    Ergonomics Machine Class: server\n    Using VM: OpenJDK 64-Bit Server VM\n\nException in thread \"main\" java.lang.OutOfMemoryError: Java heap space\n        at org.apache.commons.io.output.ByteArrayOutputStream.needNewBuffer(ByteArrayOutputStream.java:122)\n        at org.apache.commons.io.output.ByteArrayOutputStream.write(ByteArrayOutputStream.java:153)\n        at org.apache.commons.io.IOUtils.copyLarge(IOUtils.java:1793)\n        at org.apache.commons.io.IOUtils.copyLarge(IOUtils.java:1769)\n        at org.apache.commons.io.IOUtils.copy(IOUtils.java:1744)\n        at org.apache.commons.io.IOUtils.toByteArray(IOUtils.java:462)\n        at foo.TestClass.main(TestClass.java:12)\n</code></pre>\n\n<p>Thus, basically, at the line 12 of TestClass, where we are asking for the entire bytearray to be returned, we are running OOM because we started the JVM with maximum 10MB as the heap allocation.</p>\n\n<p>The default max heap in my case is 1.73G because JVM ergonomics determine it based on the class of the machine. Maybe it's different in your case and hence by default it fails for you with a 100MB file.</p>\n"}],"owner":{"account_id":4959899,"reputation":187,"user_id":3991412,"accept_rate":78,"display_name":"Stacker1234"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6614,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"closed_date":1432383004,"accepted_answer_id":30402174,"answer_count":1,"score":5,"last_activity_date":1639309911,"creation_date":1432310226,"question_id":30401124,"body_markdown":"I am looking to convert file input stream for big file (The file is of 100MB) and it is throwing and java.lang.OutOfMemoryError : Java Heap space\r\n\r\n    import java.io.FileInputStream; import java.io.IOException;\r\n    \r\n    import org.apache.commons.io.IOUtils;\r\n    \r\n    public class TestClass {\r\n        public static void main(String args[]) throws IOException\r\n        {\r\n            //Open the input and out files for the streams\r\n            FileInputStream fileInputStream = new FileInputStream(&quot;file.pdf&quot;);\r\n            IOUtils.toByteArray(fileInputStream);\r\n        } \r\n    }\r\n\r\nThe actual stack trace is\r\n\r\n    Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space\r\n    \tat org.apache.commons.io.output.ByteArrayOutputStream.toByteArray(ByteArrayOutputStream.java:322)\r\n    \tat org.apache.commons.io.IOUtils.toByteArray(IOUtils.java:463)\r\n    \tat TestClass.main(TestClass.java:12)\r\n\r\n\r\nI did tried to handle it using the below method \r\n\r\n    public static byte[] toByteArray(InputStream is) {\r\n            if (is == null) {\r\n                throw new NullPointerException(&quot;The InputStream parameter is null.&quot;);\r\n            }\r\n    \r\n            ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n            try {\r\n                byte[] buffer = new byte[32];\r\n                int read;\r\n                while ((read = is.read(buffer)) != -1) {\r\n                    baos.write(buffer, 0, read);\r\n                }\r\n                return baos.toByteArray();\r\n            } catch (IOException e) {\r\n                \r\n            }\r\n\r\nWhich then fails with \r\n\r\n    Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space\r\n    \tat java.util.Arrays.copyOf(Arrays.java:2786)\r\n    \tat java.io.ByteArrayOutputStream.write(ByteArrayOutputStream.java:94)\r\n    \tat TestClass.toByteArray(TestClass.java:25)\r\n    \tat TestClass.main(TestClass.java:14)\r\n\r\nIs there any way we could handle this !!! Any inputs will be appreciated.\r\n\r\nThanks !!!","title":"Is there any way to handle Java heap space exception","body":"<p>I am looking to convert file input stream for big file (The file is of 100MB) and it is throwing and java.lang.OutOfMemoryError : Java Heap space</p>\n\n<pre><code>import java.io.FileInputStream; import java.io.IOException;\n\nimport org.apache.commons.io.IOUtils;\n\npublic class TestClass {\n    public static void main(String args[]) throws IOException\n    {\n        //Open the input and out files for the streams\n        FileInputStream fileInputStream = new FileInputStream(\"file.pdf\");\n        IOUtils.toByteArray(fileInputStream);\n    } \n}\n</code></pre>\n\n<p>The actual stack trace is</p>\n\n<pre><code>Exception in thread \"main\" java.lang.OutOfMemoryError: Java heap space\n    at org.apache.commons.io.output.ByteArrayOutputStream.toByteArray(ByteArrayOutputStream.java:322)\n    at org.apache.commons.io.IOUtils.toByteArray(IOUtils.java:463)\n    at TestClass.main(TestClass.java:12)\n</code></pre>\n\n<p>I did tried to handle it using the below method </p>\n\n<pre><code>public static byte[] toByteArray(InputStream is) {\n        if (is == null) {\n            throw new NullPointerException(\"The InputStream parameter is null.\");\n        }\n\n        ByteArrayOutputStream baos = new ByteArrayOutputStream();\n        try {\n            byte[] buffer = new byte[32];\n            int read;\n            while ((read = is.read(buffer)) != -1) {\n                baos.write(buffer, 0, read);\n            }\n            return baos.toByteArray();\n        } catch (IOException e) {\n\n        }\n</code></pre>\n\n<p>Which then fails with </p>\n\n<pre><code>Exception in thread \"main\" java.lang.OutOfMemoryError: Java heap space\n    at java.util.Arrays.copyOf(Arrays.java:2786)\n    at java.io.ByteArrayOutputStream.write(ByteArrayOutputStream.java:94)\n    at TestClass.toByteArray(TestClass.java:25)\n    at TestClass.main(TestClass.java:14)\n</code></pre>\n\n<p>Is there any way we could handle this !!! Any inputs will be appreciated.</p>\n\n<p>Thanks !!!</p>\n"},{"tags":["java","neo4j","heap-memory"],"answers":[{"tags":[],"owner":{"account_id":2056278,"reputation":23340,"user_id":1833961,"accept_rate":54,"display_name":"bvdb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1433339186,"creation_date":1433330094,"answer_id":30618520,"question_id":30618076,"body_markdown":"**For the `neo4j-import` tool:** \r\n\r\nIt is actually just a bash file, so you can open it with `vi` or `nano`. You will see something like this:\r\n\r\n    exec &quot;$JAVACMD&quot; $JAVA_OPTS $EXTRA_JVM_ARGUMENTS -classpath &quot;$CLASSPATH&quot; -Dapp.name=&quot;neo4j-import&quot; -Dapp.pid=&quot;$$&quot; -Dapp.repo=&quot;$REPO&quot;\r\n\r\nSo, you can just modify it here or add a little piece of code just above it to set the `$JAVA_OPTS` variable if it&#39;s not set yet. For example:\r\n\r\n    # /bin/sh\r\n    if [ -z &quot;$JAVA_OPTS&quot; ] ; then\r\n      echo &quot;No JAVA_OPTS set, will use defaults.&quot;\r\n      JAVA_OPTS=&quot;-Xms128M -Xmx512M&quot;\r\n    fi\r\n\r\n**For the server:**\r\n\r\n&gt;JVM configuration goes into the **`conf/neo4j-wrapper.conf`** file\r\n\r\nYou can read more details [here][1].\r\n\r\n  [1]: http://neo4j.com/docs/stable/configuration-jvm.html","title":"Neo4j batch import","body":"<p><strong>For the <code>neo4j-import</code> tool:</strong> </p>\n\n<p>It is actually just a bash file, so you can open it with <code>vi</code> or <code>nano</code>. You will see something like this:</p>\n\n<pre><code>exec \"$JAVACMD\" $JAVA_OPTS $EXTRA_JVM_ARGUMENTS -classpath \"$CLASSPATH\" -Dapp.name=\"neo4j-import\" -Dapp.pid=\"$$\" -Dapp.repo=\"$REPO\"\n</code></pre>\n\n<p>So, you can just modify it here or add a little piece of code just above it to set the <code>$JAVA_OPTS</code> variable if it's not set yet. For example:</p>\n\n<pre><code># /bin/sh\nif [ -z \"$JAVA_OPTS\" ] ; then\n  echo \"No JAVA_OPTS set, will use defaults.\"\n  JAVA_OPTS=\"-Xms128M -Xmx512M\"\nfi\n</code></pre>\n\n<p><strong>For the server:</strong></p>\n\n<blockquote>\n  <p>JVM configuration goes into the <strong><code>conf/neo4j-wrapper.conf</code></strong> file</p>\n</blockquote>\n\n<p>You can read more details <a href=\"http://neo4j.com/docs/stable/configuration-jvm.html\" rel=\"nofollow\">here</a>.</p>\n"}],"owner":{"account_id":6408819,"reputation":21,"user_id":4969190,"accept_rate":25,"display_name":"Siavash Sheikhizadeh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":155,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1639309881,"creation_date":1433328912,"question_id":30618076,"body_markdown":"The neo4j-import tool is very efficient for small graphs, but when I&#39;m trying to import a graph with around 9M nodes and 11M edges, it exceeds the heap size and fails. As far as I know we use *-Xmx* when we run a java class not a java executable like neo4j-import. I appreciate your solution.","title":"Neo4j batch import","body":"<p>The neo4j-import tool is very efficient for small graphs, but when I'm trying to import a graph with around 9M nodes and 11M edges, it exceeds the heap size and fails. As far as I know we use <em>-Xmx</em> when we run a java class not a java executable like neo4j-import. I appreciate your solution.</p>\n"},{"tags":["java","heap-memory","hprof"],"answers":[{"tags":[],"owner":{"account_id":3617484,"reputation":13834,"user_id":3017003,"accept_rate":81,"display_name":"Jakub Kubrynski"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1433795939,"creation_date":1433795939,"answer_id":30718651,"question_id":30718603,"body_markdown":"It depends. If you&#39;re generating dump with &quot;live&quot; (for example `jmap -histo:live PID`) option it&#39;s number of reachable objects. In other case it&#39;s number of objects currently allocated on heap.","title":"Interpretation of java hprof histogram","body":"<p>It depends. If you're generating dump with \"live\" (for example <code>jmap -histo:live PID</code>) option it's number of reachable objects. In other case it's number of objects currently allocated on heap.</p>\n"}],"owner":{"account_id":3601785,"reputation":401,"user_id":3004954,"accept_rate":50,"display_name":"dmc"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":416,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1639309869,"creation_date":1433795753,"question_id":30718603,"body_markdown":"The hprof, histogram shows the number of object by class.\r\n\r\nis this the total number of object that have ever been allocated during  the life of the jvm ?\r\n\r\nor is this the number of object where are currently on the heap ?\r\n\r\nor is this the number of currently reachable object on the heap ?","title":"Interpretation of java hprof histogram","body":"<p>The hprof, histogram shows the number of object by class.</p>\n\n<p>is this the total number of object that have ever been allocated during  the life of the jvm ?</p>\n\n<p>or is this the number of object where are currently on the heap ?</p>\n\n<p>or is this the number of currently reachable object on the heap ?</p>\n"},{"tags":["java","image","buffer","heap-memory","rgb"],"comments":[{"owner":{"account_id":1098379,"reputation":14720,"user_id":1091466,"accept_rate":78,"display_name":"Marco Acierno"},"score":2,"creation_date":1435147792,"post_id":31026114,"comment_id":50076897,"body_markdown":"&quot;Thrown when the Java Virtual Machine cannot allocate an object because it is out of memory, and no more memory could be made available by the garbage collector. OutOfMemoryError objects may be constructed by the virtual machine as if suppression were disabled and/or the stack trace was not writable.&quot; -- http://docs.oracle.com/javase/7/docs/api/java/lang/OutOfMemoryError.html","body":"&quot;Thrown when the Java Virtual Machine cannot allocate an object because it is out of memory, and no more memory could be made available by the garbage collector. OutOfMemoryError objects may be constructed by the virtual machine as if suppression were disabled and/or the stack trace was not writable.&quot; -- <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/OutOfMemoryError.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/api/java/lang/&hellip;</a>"},{"owner":{"account_id":1098379,"reputation":14720,"user_id":1091466,"accept_rate":78,"display_name":"Marco Acierno"},"score":0,"creation_date":1435147877,"post_id":31026114,"comment_id":50076937,"body_markdown":"Maybe it&#39;s throw because you are trying to allocate memory for an 7232x7204 image and it doesn&#39;t have memory?","body":"Maybe it&#39;s throw because you are trying to allocate memory for an 7232x7204 image and it doesn&#39;t have memory?"},{"owner":{"account_id":2615976,"reputation":8971,"user_id":2265011,"accept_rate":99,"display_name":"Lamloumi Afif"},"score":0,"creation_date":1435147882,"post_id":31026114,"comment_id":50076940,"body_markdown":"@MarcoAcierno : thanks, but How can I resolve this issue?","body":"@MarcoAcierno : thanks, but How can I resolve this issue?"}],"answers":[{"tags":[],"owner":{"account_id":353405,"reputation":1924,"user_id":691074,"display_name":"Buurman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1435226089,"creation_date":1435148649,"answer_id":31026487,"question_id":31026114,"body_markdown":"You need to make sure you start the JVM which runs this program with enough heap space. The command line option -Xmx sets the max amount of heap available to the jvm. For example:\r\n`java -Xmx 2048m` \r\n\r\nThere are different ways of settings this parameter, dependent upon how you start the program. The above way works if you&#39;re starting it directly from the commandline but if you are using an IDE such as Eclipse you might want to look into the &#39;run&#39; or &#39;launch&#39; configuration.\r\n\r\nHowever, there is a limit upon the amount of heap space you can make available to the jvm, defined by your machine&#39;s system properties (hardware constraints). \r\n\r\nSee also https://stackoverflow.com/questions/37335/how-to-deal-with-java-lang-outofmemoryerror-java-heap-space-error-64mb-heap for an in-depth discussion.\r\n\r\nEDIT:\r\nBufferedImage seems to load the bitmap in memory which can make your application really memory intensive real quick. This is great if you want to manipulate the image before rendering but might be a bit overkill if you just want to display the image. \r\nI have very limited experience working with images in Java and I don&#39;t know of any class that allows for lower memory consumption when handling images but https://stackoverflow.com/questions/3294388/make-a-bufferedimage-use-less-ram proposes a solution where the image is downsized upon reading so your BufferedImages use less memory. I don&#39;t know if it works but it might point you in the right direction.\r\n\r\nP.S. Google is your friend in most if not all questions ;-)","title":"Buffered image issue within java application","body":"<p>You need to make sure you start the JVM which runs this program with enough heap space. The command line option -Xmx sets the max amount of heap available to the jvm. For example:\n<code>java -Xmx 2048m</code> </p>\n\n<p>There are different ways of settings this parameter, dependent upon how you start the program. The above way works if you're starting it directly from the commandline but if you are using an IDE such as Eclipse you might want to look into the 'run' or 'launch' configuration.</p>\n\n<p>However, there is a limit upon the amount of heap space you can make available to the jvm, defined by your machine's system properties (hardware constraints). </p>\n\n<p>See also <a href=\"https://stackoverflow.com/questions/37335/how-to-deal-with-java-lang-outofmemoryerror-java-heap-space-error-64mb-heap\">How to deal with &quot;java.lang.OutOfMemoryError: Java heap space&quot; error (64MB heap size)</a> for an in-depth discussion.</p>\n\n<p>EDIT:\nBufferedImage seems to load the bitmap in memory which can make your application really memory intensive real quick. This is great if you want to manipulate the image before rendering but might be a bit overkill if you just want to display the image. \nI have very limited experience working with images in Java and I don't know of any class that allows for lower memory consumption when handling images but <a href=\"https://stackoverflow.com/questions/3294388/make-a-bufferedimage-use-less-ram\">Make a BufferedImage use less RAM?</a> proposes a solution where the image is downsized upon reading so your BufferedImages use less memory. I don't know if it works but it might point you in the right direction.</p>\n\n<p>P.S. Google is your friend in most if not all questions ;-)</p>\n"}],"owner":{"account_id":2615976,"reputation":8971,"user_id":2265011,"accept_rate":99,"display_name":"Lamloumi Afif"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":100,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":31026487,"answer_count":1,"score":0,"last_activity_date":1639309852,"creation_date":1435147673,"question_id":31026114,"body_markdown":"I&#39;d like to instanciate a `BufferedImage` class , So I added this snippet \r\n\r\n    BufferedImage bufferedImage = new BufferedImage(7232, 7204, BufferedImage.TYPE_INT_RGB);\r\n\r\nbut I get a weird Exception \r\n\r\n&gt; java.lang.OutOfMemoryError: Java heap space\r\n\r\nSo I need to know :\r\n\r\n\r\n How can I fix it?","title":"Buffered image issue within java application","body":"<p>I'd like to instanciate a <code>BufferedImage</code> class , So I added this snippet </p>\n\n<pre><code>BufferedImage bufferedImage = new BufferedImage(7232, 7204, BufferedImage.TYPE_INT_RGB);\n</code></pre>\n\n<p>but I get a weird Exception </p>\n\n<blockquote>\n  <p>java.lang.OutOfMemoryError: Java heap space</p>\n</blockquote>\n\n<p>So I need to know :</p>\n\n<p>How can I fix it?</p>\n"},{"tags":["java","c#","bouncycastle"],"comments":[{"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"score":0,"creation_date":1639311886,"post_id":70323262,"comment_id":124311743,"body_markdown":"First of all, the C# code doesn&#39;t compile, so no repro is possible. Apart from that, there seems to be a similar issue as with your other [question](https://stackoverflow.com/q/70313057/9014097): In the Java code, key and IV are UTF-8 encoded, in the C# code (probably) hex decoded. Btw, does the PHP to C# port work? You didn&#39;t give any final feedback.","body":"First of all, the C# code doesn&#39;t compile, so no repro is possible. Apart from that, there seems to be a similar issue as with your other <a href=\"https://stackoverflow.com/q/70313057/9014097\">question</a>: In the Java code, key and IV are UTF-8 encoded, in the C# code (probably) hex decoded. Btw, does the PHP to C# port work? You didn&#39;t give any final feedback."},{"owner":{"account_id":1450937,"reputation":868,"user_id":1367902,"accept_rate":71,"display_name":"derodevil"},"score":0,"creation_date":1639312228,"post_id":70323262,"comment_id":124311816,"body_markdown":"The PHP to C# doesnt work. I try another way where it is written in java android.","body":"The PHP to C# doesnt work. I try another way where it is written in java android."},{"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"score":1,"creation_date":1639314417,"post_id":70323262,"comment_id":124312247,"body_markdown":"You should UTF-8 encode key and IV with `Encoding.UTF8.GetBytes(...)` in the C# code (instead of `HexToByteArray()`). ASCII encoding as for the plaintext also works.","body":"You should UTF-8 encode key and IV with <code>Encoding.UTF8.GetBytes(...)</code> in the C# code (instead of <code>HexToByteArray()</code>). ASCII encoding as for the plaintext also works."},{"owner":{"account_id":1450937,"reputation":868,"user_id":1367902,"accept_rate":71,"display_name":"derodevil"},"score":0,"creation_date":1639315532,"post_id":70323262,"comment_id":124312475,"body_markdown":"Violaaa.... it works. Thank you so much @Topaco","body":"Violaaa.... it works. Thank you so much @Topaco"}],"owner":{"account_id":1450937,"reputation":868,"user_id":1367902,"accept_rate":71,"display_name":"derodevil"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1401,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1639309828,"creation_date":1639309828,"question_id":70323262,"body_markdown":"I have a java version to do an encryption using AES GCM. When converting to C# I found the result is not the same. The C# code generates no error but resulted different value from Java version. I really have no idea about how to correct it.\r\n\r\n        public static void main(String args[]) {\r\n          String iv = &quot;349ED607B1BDF85B&quot;;\r\n          String str = &quot;secret&quot;;\r\n          String encrypted = encrypt(str,iv);\r\n          String decrypted = decrypt(encrypted,iv);\r\n          System.out.println(&quot;Encrypted = &quot; + encrypted);\r\n          System.out.println(&quot;Decrypted = &quot; + decrypted);\r\n        }\r\n            \r\n        public static String encrypt(String plaintext, String iv) {\r\n            try {\r\n                Cipher instance = Cipher.getInstance(&quot;AES/GCM/NoPadding&quot;);\r\n                instance.init(1, key(), new GCMParameterSpec(128, iv.getBytes(StandardCharsets.UTF_8)));\r\n                byte[] doFinal = instance.doFinal(plaintext.getBytes(StandardCharsets.UTF_8));\r\n                return Base64.getEncoder().encodeToString(doFinal);\r\n            } catch (Exception e) {\r\n                return &quot;&quot;;\r\n            }\r\n        }\r\n    \t\r\n        public static String decrypt(String cipherText, String iv) {\r\n    \t\tbyte[] decodedBytes = Base64.getDecoder().decode(cipherText);\r\n            try {\r\n                Cipher instance = Cipher.getInstance(&quot;AES/GCM/NoPadding&quot;);\r\n                instance.init(2, key(), new GCMParameterSpec(128, iv.getBytes(StandardCharsets.UTF_8)));\r\n                byte[] doFinal = instance.doFinal(decodedBytes);\r\n    \t\t\treturn new String(doFinal);\r\n            } catch (Exception e) {\r\n                return &quot;&quot;;\r\n            }\r\n        }\r\n        \r\n        private static SecretKeySpec key() {\r\n            String key = &quot;8645eb9e5e59a7e021cf50c5b44346fa&quot;;\r\n            byte[] bytes = key.getBytes(StandardCharsets.UTF_8);\r\n            return new SecretKeySpec(bytes, 0, bytes.length, &quot;AES&quot;);\r\n        }\r\n\r\nC# version \r\n\r\n        public static string Encrypt(string plainText, string iv)\r\n        {\r\n            byte[] key = HexToByteArray(&quot;8645eb9e5e59a7e021cf50c5b44346fa&quot;);\r\n            byte[] ivBytes = AesGcm.HexToByteArray(iv); ;\r\n\r\n            var instance = CipherUtilities.GetCipher(&quot;AES/GCM/NoPadding&quot;);\r\n            instance.Init(true, new AeadParameters(new KeyParameter(key), 128, ivBytes));\r\n\r\n            var plainTextData = Encoding.ASCII.GetBytes(plainText);\r\n            var cipherText = instance.DoFinal(plainTextData);\r\n\r\n            return Convert.ToBase64String(cipherText);\r\n        }","title":"C# BouncyCastle AES GCM to Java resulted different value","body":"<p>I have a java version to do an encryption using AES GCM. When converting to C# I found the result is not the same. The C# code generates no error but resulted different value from Java version. I really have no idea about how to correct it.</p>\n<pre><code>    public static void main(String args[]) {\n      String iv = &quot;349ED607B1BDF85B&quot;;\n      String str = &quot;secret&quot;;\n      String encrypted = encrypt(str,iv);\n      String decrypted = decrypt(encrypted,iv);\n      System.out.println(&quot;Encrypted = &quot; + encrypted);\n      System.out.println(&quot;Decrypted = &quot; + decrypted);\n    }\n        \n    public static String encrypt(String plaintext, String iv) {\n        try {\n            Cipher instance = Cipher.getInstance(&quot;AES/GCM/NoPadding&quot;);\n            instance.init(1, key(), new GCMParameterSpec(128, iv.getBytes(StandardCharsets.UTF_8)));\n            byte[] doFinal = instance.doFinal(plaintext.getBytes(StandardCharsets.UTF_8));\n            return Base64.getEncoder().encodeToString(doFinal);\n        } catch (Exception e) {\n            return &quot;&quot;;\n        }\n    }\n    \n    public static String decrypt(String cipherText, String iv) {\n        byte[] decodedBytes = Base64.getDecoder().decode(cipherText);\n        try {\n            Cipher instance = Cipher.getInstance(&quot;AES/GCM/NoPadding&quot;);\n            instance.init(2, key(), new GCMParameterSpec(128, iv.getBytes(StandardCharsets.UTF_8)));\n            byte[] doFinal = instance.doFinal(decodedBytes);\n            return new String(doFinal);\n        } catch (Exception e) {\n            return &quot;&quot;;\n        }\n    }\n    \n    private static SecretKeySpec key() {\n        String key = &quot;8645eb9e5e59a7e021cf50c5b44346fa&quot;;\n        byte[] bytes = key.getBytes(StandardCharsets.UTF_8);\n        return new SecretKeySpec(bytes, 0, bytes.length, &quot;AES&quot;);\n    }\n</code></pre>\n<p>C# version</p>\n<pre><code>    public static string Encrypt(string plainText, string iv)\n    {\n        byte[] key = HexToByteArray(&quot;8645eb9e5e59a7e021cf50c5b44346fa&quot;);\n        byte[] ivBytes = AesGcm.HexToByteArray(iv); ;\n\n        var instance = CipherUtilities.GetCipher(&quot;AES/GCM/NoPadding&quot;);\n        instance.Init(true, new AeadParameters(new KeyParameter(key), 128, ivBytes));\n\n        var plainTextData = Encoding.ASCII.GetBytes(plainText);\n        var cipherText = instance.DoFinal(plainTextData);\n\n        return Convert.ToBase64String(cipherText);\n    }\n</code></pre>\n"},{"tags":["java","heap-memory"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1437626595,"post_id":31577404,"comment_id":51110720,"body_markdown":"Enough to contain your piece of string.","body":"Enough to contain your piece of string."},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1437658181,"post_id":31577404,"comment_id":51129432,"body_markdown":"There is no easy answer. It depends of the size and complexity of your PDFs.","body":"There is no easy answer. It depends of the size and complexity of your PDFs."}],"answers":[{"tags":[],"owner":{"account_id":23121,"reputation":527346,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1437625506,"creation_date":1437625506,"answer_id":31578134,"question_id":31577404,"body_markdown":"The maximum heap size is the point at which you would rather the program fail instead of continue to use more memory.  This is usually determined by the size of machine you have i.e. you might set the maximum to be 80% of the memory of the machine.  ","title":"Appropriate Java Heap Size","body":"<p>The maximum heap size is the point at which you would rather the program fail instead of continue to use more memory.  This is usually determined by the size of machine you have i.e. you might set the maximum to be 80% of the memory of the machine.  </p>\n"}],"owner":{"account_id":4439766,"reputation":1481,"user_id":3614570,"accept_rate":47,"display_name":"Skinner"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":735,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1639309828,"creation_date":1437620015,"question_id":31577404,"body_markdown":"In an attempt to merge multiple PDF documents, I am experiencing the following error....\r\n\r\n        PDFMerger failed with the following exception:\r\n    org.apache.pdfbox.exceptions.WrappedIOException\r\n    \tat org.apache.pdfbox.pdfparser.PDFParser.parse(PDFParser.java:278)\r\n    \tat org.apache.pdfbox.pdmodel.PDDocument.load(PDDocument.java:1220)\r\n    \tat org.apache.pdfbox.pdmodel.PDDocument.load(PDDocument.java:1187)\r\n    \tat org.apache.pdfbox.util.PDFMergerUtility.mergeDocuments(PDFMergerUtility.java:237)\r\n    \tat org.apache.pdfbox.util.PDFMergerUtility.mergeDocuments(PDFMergerUtility.java:194)\r\n    \tat org.apache.pdfbox.PDFMerger.merge(PDFMerger.java:82)\r\n    \tat org.apache.pdfbox.PDFMerger.main(PDFMerger.java:44)\r\n    \tat org.apache.pdfbox.PDFBox.main(PDFBox.java:83)\r\n    \r\n    Caused by: java.lang.OutOfMemoryError: Java heap space\r\n    \tat org.apache.pdfbox.io.RandomAccessBuffer.clone(RandomAccessBuffer.java:69)\r\n    \tat org.apache.pdfbox.cos.COSStream.clone(COSStream.java:78)\r\n    \tat org.apache.pdfbox.cos.COSStream.&lt;init&gt;(COSStream.java:102)\r\n    \tat org.apache.pdfbox.pdfparser.BaseParser.parseCOSStream(BaseParser.java:409)\r\n    \tat org.apache.pdfbox.pdfparser.PDFParser.parseObject(PDFParser.java:650)\r\n    \tat org.apache.pdfbox.pdfparser.PDFParser.parse(PDFParser.java:203)\r\n    \t... 7 more\r\n\r\nI think the obvious solution is to increase the heap space (but I am not sure). The Routine works on 20-30 files, but with close to 100 it throws the exception.\r\n\r\nThe environment is an apache2 web server with Java 1.8.0 and I&#39;m calling the command through PHP exec()...\r\n\t\r\n        // Build a string for PDF box...\r\n        $mergepdf = &quot;java -jar pdfbox-app-1.8.9.jar PDFMerger &quot;;\r\n        \t\r\n        foreach ($drawings as $key =&gt; $id){\r\n        \t$mergepdf .= $path.$userid.&quot;-&quot;.$key.&quot;.pdf &quot;;\r\n        }\r\n    \r\n        $mergepdf .= $path.$pdffilename;\r\n        \r\n        // Make the compiled pdf\r\n        exec($mergepdf);\r\n\r\n A user can request how many pdfs he wants to download. The intent is to merge them and offer a compiled PDF.  Because the number and sizes of the PDFs are unkown at the time of programming (in a worse case scenerio, the count could be over 1,000 with each sized between 2M and 30M).\r\n\r\nWhat is a safe limit to set the heap size to, or, how do I determine what an appropriate heap size is to run my routine - And what imapacts can I expect this to have on the web server while executing? Is there an issue with cranking it to the max? \r\n\r\nI am using a T2.micro instance on Ec2.","title":"Appropriate Java Heap Size","body":"<p>In an attempt to merge multiple PDF documents, I am experiencing the following error....</p>\n\n<pre><code>    PDFMerger failed with the following exception:\norg.apache.pdfbox.exceptions.WrappedIOException\n    at org.apache.pdfbox.pdfparser.PDFParser.parse(PDFParser.java:278)\n    at org.apache.pdfbox.pdmodel.PDDocument.load(PDDocument.java:1220)\n    at org.apache.pdfbox.pdmodel.PDDocument.load(PDDocument.java:1187)\n    at org.apache.pdfbox.util.PDFMergerUtility.mergeDocuments(PDFMergerUtility.java:237)\n    at org.apache.pdfbox.util.PDFMergerUtility.mergeDocuments(PDFMergerUtility.java:194)\n    at org.apache.pdfbox.PDFMerger.merge(PDFMerger.java:82)\n    at org.apache.pdfbox.PDFMerger.main(PDFMerger.java:44)\n    at org.apache.pdfbox.PDFBox.main(PDFBox.java:83)\n\nCaused by: java.lang.OutOfMemoryError: Java heap space\n    at org.apache.pdfbox.io.RandomAccessBuffer.clone(RandomAccessBuffer.java:69)\n    at org.apache.pdfbox.cos.COSStream.clone(COSStream.java:78)\n    at org.apache.pdfbox.cos.COSStream.&lt;init&gt;(COSStream.java:102)\n    at org.apache.pdfbox.pdfparser.BaseParser.parseCOSStream(BaseParser.java:409)\n    at org.apache.pdfbox.pdfparser.PDFParser.parseObject(PDFParser.java:650)\n    at org.apache.pdfbox.pdfparser.PDFParser.parse(PDFParser.java:203)\n    ... 7 more\n</code></pre>\n\n<p>I think the obvious solution is to increase the heap space (but I am not sure). The Routine works on 20-30 files, but with close to 100 it throws the exception.</p>\n\n<p>The environment is an apache2 web server with Java 1.8.0 and I'm calling the command through PHP exec()...</p>\n\n<pre><code>    // Build a string for PDF box...\n    $mergepdf = \"java -jar pdfbox-app-1.8.9.jar PDFMerger \";\n\n    foreach ($drawings as $key =&gt; $id){\n        $mergepdf .= $path.$userid.\"-\".$key.\".pdf \";\n    }\n\n    $mergepdf .= $path.$pdffilename;\n\n    // Make the compiled pdf\n    exec($mergepdf);\n</code></pre>\n\n<p>A user can request how many pdfs he wants to download. The intent is to merge them and offer a compiled PDF.  Because the number and sizes of the PDFs are unkown at the time of programming (in a worse case scenerio, the count could be over 1,000 with each sized between 2M and 30M).</p>\n\n<p>What is a safe limit to set the heap size to, or, how do I determine what an appropriate heap size is to run my routine - And what imapacts can I expect this to have on the web server while executing? Is there an issue with cranking it to the max? </p>\n\n<p>I am using a T2.micro instance on Ec2.</p>\n"},{"tags":["java","heap-memory","jvm-arguments"],"comments":[{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":0,"creation_date":1438237408,"post_id":31716041,"comment_id":51370305,"body_markdown":"Your problem is your system design which uses Java for &quot;lightweight&quot; processes. JVM process is heavyweight and the usual design is to have many tasks within the same process.","body":"Your problem is your system design which uses Java for &quot;lightweight&quot; processes. JVM process is heavyweight and the usual design is to have many tasks within the same process."},{"owner":{"account_id":4732900,"reputation":11,"user_id":3827999,"display_name":"Dominic Valencia"},"score":0,"creation_date":1438269589,"post_id":31716041,"comment_id":51391382,"body_markdown":"so do you suggest that I really need to upgrade our RAM?","body":"so do you suggest that I really need to upgrade our RAM?"}],"answers":[{"tags":[],"owner":{"account_id":53912,"reputation":6568,"user_id":161222,"accept_rate":72,"display_name":"Radi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1438237205,"creation_date":1438237205,"answer_id":31716437,"question_id":31716041,"body_markdown":"Since you have 50 process and as per your assumption your processes need about 2.5 Gb to run .\r\nTo prevent your server from being slow you can follow some [best practices][1] to set java memory parameters e.g. set -Xmin and -Xmx the same values and determine a proper values based on your process usage, Also you can [profile your process][2] on runtime to ensure that everything is ok.\r\n\r\n\r\n  [1]: http://www.javaworld.com/article/2078731/java-platform/jvm-performance-optimization--part-5--is-java-scalability-an-oxymoron-.html\r\n  [2]: https://visualvm.java.net/gettingstarted.html","title":"Java - issue with memory","body":"<p>Since you have 50 process and as per your assumption your processes need about 2.5 Gb to run .\nTo prevent your server from being slow you can follow some <a href=\"http://www.javaworld.com/article/2078731/java-platform/jvm-performance-optimization--part-5--is-java-scalability-an-oxymoron-.html\" rel=\"nofollow\">best practices</a> to set java memory parameters e.g. set -Xmin and -Xmx the same values and determine a proper values based on your process usage, Also you can <a href=\"https://visualvm.java.net/gettingstarted.html\" rel=\"nofollow\">profile your process</a> on runtime to ensure that everything is ok.</p>\n"}],"owner":{"account_id":4732900,"reputation":11,"user_id":3827999,"display_name":"Dominic Valencia"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1639309815,"creation_date":1438235429,"question_id":31716041,"body_markdown":"Need some help from the experts!\r\n\r\nWe have a project here (still on dev) that needs to run 50 java processes (for now and it will probably doubled or tripled in the future) at the same time every 5 minutes. I set Xmx50m for every process and our server has only 4gb of RAM, I know that would really slow our server. What I have in mind is to upgrade our RAM. My question is that do I have other options to prevent our server from being slow when running that amount of java processes? \r\n","title":"Java - issue with memory","body":"<p>Need some help from the experts!</p>\n\n<p>We have a project here (still on dev) that needs to run 50 java processes (for now and it will probably doubled or tripled in the future) at the same time every 5 minutes. I set Xmx50m for every process and our server has only 4gb of RAM, I know that would really slow our server. What I have in mind is to upgrade our RAM. My question is that do I have other options to prevent our server from being slow when running that amount of java processes? </p>\n"},{"tags":["java","arrays","heap-memory"],"comments":[{"owner":{"account_id":240984,"reputation":114798,"user_id":511529,"accept_rate":100,"display_name":"GolezTrol"},"score":0,"creation_date":1441667163,"post_id":32447007,"comment_id":52757305,"body_markdown":"Are you using a 32 or 64 bit JVM? On 32 bit, the limit is 4GB, which is reached already when you make an array of that size. 64 bit allows you to allocate a multitude of that amount.","body":"Are you using a 32 or 64 bit JVM? On 32 bit, the limit is 4GB, which is reached already when you make an array of that size. 64 bit allows you to allocate a multitude of that amount."},{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":5,"creation_date":1441667794,"post_id":32447007,"comment_id":52757440,"body_markdown":"In order for us to help suggest viable alternatives, you&#39;ll have to explain a bit more of why you need all those numbers in memory at the same time.","body":"In order for us to help suggest viable alternatives, you&#39;ll have to explain a bit more of why you need all those numbers in memory at the same time."},{"owner":{"account_id":6179231,"reputation":2698,"user_id":4815264,"accept_rate":87,"display_name":"James McDowell"},"score":0,"creation_date":1441668002,"post_id":32447007,"comment_id":52757481,"body_markdown":"I&#39;m pretty sure I&#39;m using 64 bit. I have a 64 bit computer and Java&#39;s in Program Files(x86). I probably could come up with a way around using the array, but I&#39;ve already written the code to work with it and it increases calculation speed. I used lower indexed elements in the array to calculate the higher indexed ones. I then loop through the array and add up certain values.","body":"I&#39;m pretty sure I&#39;m using 64 bit. I have a 64 bit computer and Java&#39;s in Program Files(x86). I probably could come up with a way around using the array, but I&#39;ve already written the code to work with it and it increases calculation speed. I used lower indexed elements in the array to calculate the higher indexed ones. I then loop through the array and add up certain values."},{"owner":{"account_id":284109,"reputation":47153,"user_id":581994,"accept_rate":57,"display_name":"Hot Licks"},"score":0,"creation_date":1441668408,"post_id":32447007,"comment_id":52757567,"body_markdown":"There is probably a size limit for an individual object that is on the order of 2-4GB, even on a 64-bit JVM","body":"There is probably a size limit for an individual object that is on the order of 2-4GB, even on a 64-bit JVM"},{"owner":{"account_id":295,"reputation":101679,"user_id":369,"accept_rate":93,"display_name":"Blorgbeard"},"score":0,"creation_date":1441668868,"post_id":32447007,"comment_id":52757680,"body_markdown":"Program Files(x86) is for 32-bit programs.","body":"Program Files(x86) is for 32-bit programs."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1441669579,"post_id":32447007,"comment_id":52757833,"body_markdown":"Please post the output of `java -version`.","body":"Please post the output of <code>java -version</code>."},{"owner":{"account_id":6179231,"reputation":2698,"user_id":4815264,"accept_rate":87,"display_name":"James McDowell"},"score":0,"creation_date":1441672478,"post_id":32447007,"comment_id":52758415,"body_markdown":"java -version gives me : java version &quot;1.8.0_51&quot; Java(TM) SE Runtime Enviroment (build 1.8.0_51-b16) Java Hotspot(TM) Client VM (build 25.52-b03, mixed mode, sharing)","body":"java -version gives me : java version &quot;1.8.0_51&quot; Java(TM) SE Runtime Enviroment (build 1.8.0_51-b16) Java Hotspot(TM) Client VM (build 25.52-b03, mixed mode, sharing)"},{"owner":{"account_id":6179231,"reputation":2698,"user_id":4815264,"accept_rate":87,"display_name":"James McDowell"},"score":0,"creation_date":1441713318,"post_id":32447007,"comment_id":52776248,"body_markdown":"I&#39;m using the array for a sieve","body":"I&#39;m using the array for a sieve"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1441745558,"post_id":32447007,"comment_id":52796078,"body_markdown":"That indicates a 32-bit JVM.","body":"That indicates a 32-bit JVM."}],"answers":[{"tags":[],"owner":{"account_id":8546,"reputation":17688,"user_id":15472,"accept_rate":87,"display_name":"tucuxi"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1441669775,"creation_date":1441669387,"answer_id":32447295,"question_id":32447007,"body_markdown":"I have just tested something similar on 1.7.0_79 64-bit Linux, using the following test program:\r\n\r\n    class T {\r\n        public static void main(String args[]) {\r\n            int array[] = new int[Integer.parseInt(args[0])];\r\n            for (int i=1; i&lt;array.length; i++) {\r\n                array[i] = array[i-1] + 1;\r\n            }\r\n            System.err.println(&quot;last value: &quot; + array[array.length-1]);\r\n        }\r\n    }\r\n\r\nIt takes as an argument the size of the int array to reserve. By my back-of-the-envelope math, 500M ints is around 1.86GB (using 4-byte ints), not accounting for VM overhead. So to test this:\r\n\r\n    javac T.java &amp;&amp; java -Xmx2G T 500000000\r\n      \r\n    -&gt; Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space\r\n\t           at T.main(T.java:3)\r\n\r\nSo too small; Increasing the heap size further:\r\n\r\n    javac T.java &amp;&amp; java -Xmx3G T 500000000\r\n \r\n    -&gt; last value: 499999999\r\n\r\nSo either you are not using a 64-bit VM, or you are not requesting enough space to be reserved.\r\n\r\nEdit: for what it&#39;s worth, on my machine, I need to set -Xmx2870M or more to avoid the OOME. With -Xmx2860M it still fails.","title":"I need a larger array than max heap space","body":"<p>I have just tested something similar on 1.7.0_79 64-bit Linux, using the following test program:</p>\n\n<pre><code>class T {\n    public static void main(String args[]) {\n        int array[] = new int[Integer.parseInt(args[0])];\n        for (int i=1; i&lt;array.length; i++) {\n            array[i] = array[i-1] + 1;\n        }\n        System.err.println(\"last value: \" + array[array.length-1]);\n    }\n}\n</code></pre>\n\n<p>It takes as an argument the size of the int array to reserve. By my back-of-the-envelope math, 500M ints is around 1.86GB (using 4-byte ints), not accounting for VM overhead. So to test this:</p>\n\n<pre><code>javac T.java &amp;&amp; java -Xmx2G T 500000000\n\n-&gt; Exception in thread \"main\" java.lang.OutOfMemoryError: Java heap space\n           at T.main(T.java:3)\n</code></pre>\n\n<p>So too small; Increasing the heap size further:</p>\n\n<pre><code>javac T.java &amp;&amp; java -Xmx3G T 500000000\n\n-&gt; last value: 499999999\n</code></pre>\n\n<p>So either you are not using a 64-bit VM, or you are not requesting enough space to be reserved.</p>\n\n<p>Edit: for what it's worth, on my machine, I need to set -Xmx2870M or more to avoid the OOME. With -Xmx2860M it still fails.</p>\n"}],"owner":{"account_id":6179231,"reputation":2698,"user_id":4815264,"accept_rate":87,"display_name":"James McDowell"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":189,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1639309797,"creation_date":1441666916,"question_id":32447007,"body_markdown":"I am writing a program that requires an array of integers with 500 million elements. However, my maximum heap space is too small. I cannot split it in to many smaller arrays and use one at a time or increase my heap size. What can I do?","title":"I need a larger array than max heap space","body":"<p>I am writing a program that requires an array of integers with 500 million elements. However, my maximum heap space is too small. I cannot split it in to many smaller arrays and use one at a time or increase my heap size. What can I do?</p>\n"},{"tags":["java","static","heap-memory"],"comments":[{"owner":{"account_id":219754,"reputation":12930,"user_id":476828,"accept_rate":51,"display_name":"Subodh Joshi"},"score":1,"creation_date":1441869249,"post_id":32495407,"comment_id":52850523,"body_markdown":"What exactly you want to achieve ? Everything have its own Pros-Cons in every field. Better You can make it as a `final`  `Util` class  and make method `static`.","body":"What exactly you want to achieve ? Everything have its own Pros-Cons in every field. Better You can make it as a <code>final</code>  <code>Util</code> class  and make method <code>static</code>."},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1441869271,"post_id":32495407,"comment_id":52850535,"body_markdown":"are the methods related in any way? why would this be better than a constructor? (or a singleton, if you want them all on the same instance)","body":"are the methods related in any way? why would this be better than a constructor? (or a singleton, if you want them all on the same instance)"},{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1441869278,"post_id":32495407,"comment_id":52850541,"body_markdown":"I&#39;m not sure about `static` methods, but from a testability point of view, singletons are frowned upon","body":"I&#39;m not sure about <code>static</code> methods, but from a testability point of view, singletons are frowned upon"},{"owner":{"account_id":3534091,"reputation":866,"user_id":2952837,"accept_rate":100,"display_name":"M. Reif"},"score":0,"creation_date":1441869638,"post_id":32495407,"comment_id":52850767,"body_markdown":"If you don&#39;t have to share state between that methods, you should be fine with static methods.","body":"If you don&#39;t have to share state between that methods, you should be fine with static methods."},{"owner":{"account_id":1737682,"reputation":576,"user_id":2412007,"accept_rate":50,"display_name":"AbnSrn"},"score":0,"creation_date":1441953178,"post_id":32495407,"comment_id":52892117,"body_markdown":"@subodh joshi: What exactly you want to achieve ? &gt;&gt;&gt; Application Performance and memory management. So why I asked.","body":"@subodh joshi: What exactly you want to achieve ? &gt;&gt;&gt; Application Performance and memory management. So why I asked."}],"answers":[{"tags":[],"owner":{"account_id":6602159,"reputation":148,"user_id":5100156,"display_name":"Chlorek"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1441870517,"creation_date":1441869476,"answer_id":32495482,"question_id":32495407,"body_markdown":"&quot;Common functions&quot; is not quite accurate. It really depends on what you want to do, for example when I make some string utils I make StringUtils class and it has what I need. Whether to make it static or not depends on data to be processed, if one information might be used more than once for a call then answer is simple - use instances.","title":"Which is the best way to do the following task in java","body":"<p>\"Common functions\" is not quite accurate. It really depends on what you want to do, for example when I make some string utils I make StringUtils class and it has what I need. Whether to make it static or not depends on data to be processed, if one information might be used more than once for a call then answer is simple - use instances.</p>\n"},{"tags":[],"owner":{"account_id":1924671,"reputation":94541,"user_id":1735406,"accept_rate":95,"display_name":"Maroun"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1441869495,"creation_date":1441869495,"answer_id":32495491,"question_id":32495407,"body_markdown":"You should think about the &quot;best&quot; way in terms of design. \r\n\r\nIf the methods are used for general purposes, making them `static` is preferable, as you won&#39;t have any state to store and you&#39;ll *save memory* this way.\r\n\r\nYou should consider other things before deciding if you want to use `static` methods in your utility class or not. On one hand the utility class will be very easy to test, and it&#39;s highly accessible. On the other hand, it&#39;s very hard to mock `static` methods in your test.\r\n\r\nIf I have a utility class, I would write it as follows:\r\n\r\n    public final class Common {\r\n\r\n        private Common() { }\r\n\r\n        public static int method1() { }\r\n        public static int method2() { }\r\n        // ...\r\n\r\n    }\r\n","title":"Which is the best way to do the following task in java","body":"<p>You should think about the \"best\" way in terms of design. </p>\n\n<p>If the methods are used for general purposes, making them <code>static</code> is preferable, as you won't have any state to store and you'll <em>save memory</em> this way.</p>\n\n<p>You should consider other things before deciding if you want to use <code>static</code> methods in your utility class or not. On one hand the utility class will be very easy to test, and it's highly accessible. On the other hand, it's very hard to mock <code>static</code> methods in your test.</p>\n\n<p>If I have a utility class, I would write it as follows:</p>\n\n<pre><code>public final class Common {\n\n    private Common() { }\n\n    public static int method1() { }\n    public static int method2() { }\n    // ...\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6532372,"reputation":1369,"user_id":5053124,"accept_rate":60,"display_name":"Nicholas Robinson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1441869591,"creation_date":1441869591,"answer_id":32495527,"question_id":32495407,"body_markdown":"That depends on what the methods do.\r\n\r\nIf those methods are just helper methods, that do not alter state then `static` is probably better because that way you do not have to create an object every time you want to use one of the methods. You can just call `Common.method()`\r\n\r\nHowever, if the object has state then you should rater use object methods and create a new object when you want to use the methods.\r\n\r\nHope this helps.","title":"Which is the best way to do the following task in java","body":"<p>That depends on what the methods do.</p>\n\n<p>If those methods are just helper methods, that do not alter state then <code>static</code> is probably better because that way you do not have to create an object every time you want to use one of the methods. You can just call <code>Common.method()</code></p>\n\n<p>However, if the object has state then you should rater use object methods and create a new object when you want to use the methods.</p>\n\n<p>Hope this helps.</p>\n"},{"tags":[],"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1441869744,"creation_date":1441869744,"answer_id":32495574,"question_id":32495407,"body_markdown":"&gt; If we create all the methods using static means, all 20 methods are stored in PermGen section of the heap.\r\n\r\nMethods are not data, but code. Where code is stored does not depend on whether a method accepts an implicit `this` parameter or not.  If you use the singleton approach, method code will still occupy storage and additionally there will be an instance on the heap.\r\n\r\nHowever, all of the above is irrelevant and you are focusing on a completely wrong aspect of your design. What matters is how the decision will affect the code which uses these methods:\r\n\r\n- static methods are simple and a great choice for pure functions (which don&#39;t depend on any external state);\r\n- singletons allow polymorphism, therefore make the methods easier to mock for testing.","title":"Which is the best way to do the following task in java","body":"<blockquote>\n  <p>If we create all the methods using static means, all 20 methods are stored in PermGen section of the heap.</p>\n</blockquote>\n\n<p>Methods are not data, but code. Where code is stored does not depend on whether a method accepts an implicit <code>this</code> parameter or not.  If you use the singleton approach, method code will still occupy storage and additionally there will be an instance on the heap.</p>\n\n<p>However, all of the above is irrelevant and you are focusing on a completely wrong aspect of your design. What matters is how the decision will affect the code which uses these methods:</p>\n\n<ul>\n<li>static methods are simple and a great choice for pure functions (which don't depend on any external state);</li>\n<li>singletons allow polymorphism, therefore make the methods easier to mock for testing.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":418189,"reputation":1882,"user_id":794606,"accept_rate":80,"display_name":"Jacek Cz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1441870122,"creation_date":1441870122,"answer_id":32495707,"question_id":32495407,"body_markdown":"If sense of this method is &quot;execute pure function&quot; like mathematical sin(x), cos(x) etc static method is the best. \r\n\r\nThey belongs to one domain? (range of themats) or to different? (then create more &quot;utility classes&quot; with correct name)\r\n\r\nIf have state (like many people say) maybe better is singleton.\r\n\r\nShape of the question &quot;i have 20 method in application&quot; and name Common suggest previous (older) design problem, I say &quot;procedural thinking&quot;, poor vision of OOP.\r\n\r\nHard to say without code.","title":"Which is the best way to do the following task in java","body":"<p>If sense of this method is \"execute pure function\" like mathematical sin(x), cos(x) etc static method is the best. </p>\n\n<p>They belongs to one domain? (range of themats) or to different? (then create more \"utility classes\" with correct name)</p>\n\n<p>If have state (like many people say) maybe better is singleton.</p>\n\n<p>Shape of the question \"i have 20 method in application\" and name Common suggest previous (older) design problem, I say \"procedural thinking\", poor vision of OOP.</p>\n\n<p>Hard to say without code.</p>\n"}],"owner":{"account_id":1737682,"reputation":576,"user_id":2412007,"accept_rate":50,"display_name":"AbnSrn"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":151,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":32495574,"answer_count":5,"score":2,"last_activity_date":1639309787,"creation_date":1441869169,"question_id":32495407,"body_markdown":"I have more than 20 commonly used methods in my application. I would like to move that 20 methods into a common class.\r\n\r\nHere my doubt is, define all the methods are static or normal method and create a global object to access that normal methods.\r\n\r\n    class Common {\r\n    \r\n    public String method1() {........}\r\n    public String method2() {........}\r\n    public String method3() {........}\r\n    public String method4() {........}\r\n    public String method5() {........}\r\n    ...\r\n    \r\n    }\r\n\r\nCreating object.\r\n\r\n    class CommonService {\r\n        private static Common common;\r\n        \r\n        public static Common getCommon() {\r\n        if(null == common) {\r\n        common = new common();\r\n        }\r\n        return common;\r\n        }\r\n    }\r\n\r\nIf we create all the methods using static means, all 20 methods are stored in PermGen section of the heap.\r\n\r\nBut if we follow above method means, only one object can be created and stored in java heap.\r\n\r\nPlease clarify which one is the best way.","title":"Which is the best way to do the following task in java","body":"<p>I have more than 20 commonly used methods in my application. I would like to move that 20 methods into a common class.</p>\n\n<p>Here my doubt is, define all the methods are static or normal method and create a global object to access that normal methods.</p>\n\n<pre><code>class Common {\n\npublic String method1() {........}\npublic String method2() {........}\npublic String method3() {........}\npublic String method4() {........}\npublic String method5() {........}\n...\n\n}\n</code></pre>\n\n<p>Creating object.</p>\n\n<pre><code>class CommonService {\n    private static Common common;\n\n    public static Common getCommon() {\n    if(null == common) {\n    common = new common();\n    }\n    return common;\n    }\n}\n</code></pre>\n\n<p>If we create all the methods using static means, all 20 methods are stored in PermGen section of the heap.</p>\n\n<p>But if we follow above method means, only one object can be created and stored in java heap.</p>\n\n<p>Please clarify which one is the best way.</p>\n"},{"tags":["java","heap-memory"],"comments":[{"owner":{"account_id":418189,"reputation":1882,"user_id":794606,"accept_rate":80,"display_name":"Jacek Cz"},"score":0,"creation_date":1442470756,"post_id":32623675,"comment_id":53097392,"body_markdown":"Limit of RAM doesn&#39;t depend of java code, but options at runtime.","body":"Limit of RAM doesn&#39;t depend of java code, but options at runtime."},{"owner":{"account_id":2539078,"reputation":4317,"user_id":2422013,"accept_rate":97,"display_name":"AStopher"},"score":4,"creation_date":1442470774,"post_id":32623675,"comment_id":53097403,"body_markdown":"What I don&#39;t understand is why a low-quality question like this is coming from an established user, ***especially since you claim to be working at Oracle*** (from your profile). Possible profile hijack?","body":"What I don&#39;t understand is why a low-quality question like this is coming from an established user, <b><i>especially since you claim to be working at Oracle</i></b> (from your profile). Possible profile hijack?"},{"owner":{"account_id":88112,"reputation":51921,"user_id":243943,"accept_rate":89,"display_name":"npinti"},"score":2,"creation_date":1442470777,"post_id":32623675,"comment_id":53097406,"body_markdown":"This is not how SO works. You first *try* something, then *compare* it to what you need get, and if they do not fit, you then ask a question, showing what you did, where it failed and how and what you would like to get.","body":"This is not how SO works. You first <i>try</i> something, then <i>compare</i> it to what you need get, and if they do not fit, you then ask a question, showing what you did, where it failed and how and what you would like to get."},{"owner":{"account_id":4283273,"reputation":12073,"user_id":3501958,"accept_rate":89,"display_name":"hata"},"score":1,"creation_date":1442470803,"post_id":32623675,"comment_id":53097422,"body_markdown":"Just make a 1GB text file or something and open it with your Java program.","body":"Just make a 1GB text file or something and open it with your Java program."},{"owner":{"account_id":6018851,"reputation":3101,"user_id":4726707,"accept_rate":70,"display_name":"Blip"},"score":0,"creation_date":1442470885,"post_id":32623675,"comment_id":53097459,"body_markdown":"What are you trying to achieve here?","body":"What are you trying to achieve here?"},{"owner":{"account_id":418189,"reputation":1882,"user_id":794606,"accept_rate":80,"display_name":"Jacek Cz"},"score":1,"creation_date":1442470948,"post_id":32623675,"comment_id":53097480,"body_markdown":"@cybermonkey on SO is very easy to get many points on beginners questions &quot;why I have NullPointerException&quot; and hard get high reputation on niche, low range specialistic framework. Hard times ;)","body":"@cybermonkey on SO is very easy to get many points on beginners questions &quot;why I have NullPointerException&quot; and hard get high reputation on niche, low range specialistic framework. Hard times ;)"},{"owner":{"account_id":2539078,"reputation":4317,"user_id":2422013,"accept_rate":97,"display_name":"AStopher"},"score":0,"creation_date":1442471045,"post_id":32623675,"comment_id":53097525,"body_markdown":"@JacekCz I know that, I&#39;ve been here longer than you have &amp; have 4x your rep.","body":"@JacekCz I know that, I&#39;ve been here longer than you have &amp; have 4x your rep."},{"owner":{"account_id":408170,"reputation":1289,"user_id":778659,"accept_rate":82,"display_name":"Ben Xu"},"score":0,"creation_date":1442471224,"post_id":32623675,"comment_id":53097611,"body_markdown":"@cybermonkey It is NOT that easy to write a simple program to use 1G memory, i am writing now, you need to calculate things, you need to avoid JVM doing unexpected  reduce memory for you.  it is NOT as easy like you thought to use exact 1G memory use an easiest program .    about Oracle, Oracle doen&#39;t only has java...","body":"@cybermonkey It is NOT that easy to write a simple program to use 1G memory, i am writing now, you need to calculate things, you need to avoid JVM doing unexpected  reduce memory for you.  it is NOT as easy like you thought to use exact 1G memory use an easiest program .    about Oracle, Oracle doen&#39;t only has java..."},{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":0,"creation_date":1442471281,"post_id":32623675,"comment_id":53097637,"body_markdown":"`private static final byte[] MemoryWaster = new byte[1_073_741_824];`, or maybe `new byte[1024][1_048_576]` to not require it all to be consecutive.","body":"<code>private static final byte[] MemoryWaster = new byte[1_073_741_824];</code>, or maybe <code>new byte[1024][1_048_576]</code> to not require it all to be consecutive."},{"owner":{"account_id":2539078,"reputation":4317,"user_id":2422013,"accept_rate":97,"display_name":"AStopher"},"score":0,"creation_date":1442471289,"post_id":32623675,"comment_id":53097638,"body_markdown":"@BenXu I&#39;m not saying that it&#39;s easy, I&#39;m saying that *you*, who has experience with Java at *Oracle*, should be able to do this.","body":"@BenXu I&#39;m not saying that it&#39;s easy, I&#39;m saying that <i>you</i>, who has experience with Java at <i>Oracle</i>, should be able to do this."},{"owner":{"account_id":408170,"reputation":1289,"user_id":778659,"accept_rate":82,"display_name":"Ben Xu"},"score":0,"creation_date":1442471502,"post_id":32623675,"comment_id":53097705,"body_markdown":"@cybermonkey yes,  i am able to do it using dozens of ways.  but  get  a perfect solution quickly is good, i don&#39;t think stackoverflow is only for things you can&#39;t do , but find  a good things that better than you can think is also good.","body":"@cybermonkey yes,  i am able to do it using dozens of ways.  but  get  a perfect solution quickly is good, i don&#39;t think stackoverflow is only for things you can&#39;t do , but find  a good things that better than you can think is also good."},{"owner":{"account_id":408170,"reputation":1289,"user_id":778659,"accept_rate":82,"display_name":"Ben Xu"},"score":0,"creation_date":1442471547,"post_id":32623675,"comment_id":53097721,"body_markdown":"@ hata read file is too slow","body":"@ hata read file is too slow"},{"owner":{"account_id":408170,"reputation":1289,"user_id":778659,"accept_rate":82,"display_name":"Ben Xu"},"score":0,"creation_date":1442471572,"post_id":32623675,"comment_id":53097738,"body_markdown":"@Andreas thanks , this seem quite good. checking now","body":"@Andreas thanks , this seem quite good. checking now"},{"owner":{"account_id":408170,"reputation":1289,"user_id":778659,"accept_rate":82,"display_name":"Ben Xu"},"score":0,"creation_date":1442471652,"post_id":32623675,"comment_id":53097780,"body_markdown":"@Blip try to use 4G+ memory to see if 64bit things works at special things..","body":"@Blip try to use 4G+ memory to see if 64bit things works at special things.."},{"owner":{"account_id":408170,"reputation":1289,"user_id":778659,"accept_rate":82,"display_name":"Ben Xu"},"score":0,"creation_date":1442471746,"post_id":32623675,"comment_id":53097824,"body_markdown":"may be , i am not expressed well in title, should be a &quot;best&quot; program to use 1G memory","body":"may be , i am not expressed well in title, should be a &quot;best&quot; program to use 1G memory"},{"owner":{"account_id":408170,"reputation":1289,"user_id":778659,"accept_rate":82,"display_name":"Ben Xu"},"score":0,"creation_date":1442472235,"post_id":32623675,"comment_id":53098047,"body_markdown":"; @Andreas  thanks,   tried , 2 diamond byte array is quite good for such needs, and can use exactly memory needed  (use another for loop to create as much 2 diamond byte array as possible.)","body":"; @Andreas  thanks,   tried , 2 diamond byte array is quite good for such needs, and can use exactly memory needed  (use another for loop to create as much 2 diamond byte array as possible.)"},{"owner":{"account_id":37175,"reputation":706108,"user_id":106224,"accept_rate":96,"display_name":"BoltClock"},"score":1,"creation_date":1442472288,"post_id":32623675,"comment_id":53098067,"body_markdown":"&quot;i am able to do it using dozens of ways&quot; It&#39;s on you to prove it. Right now your question just looks like begging, with such phrases as &quot;ASAP&quot; and &quot;pls help&quot;, which is especially unbecoming of someone at a big company like Oracle (as disliked as it is). That&#39;s not going to go over well at all. You may want to go back and read [ask] for help formulating a good question - this is not your first question and you should be fairly familiar with the asking process by now.","body":"&quot;i am able to do it using dozens of ways&quot; It&#39;s on you to prove it. Right now your question just looks like begging, with such phrases as &quot;ASAP&quot; and &quot;pls help&quot;, which is especially unbecoming of someone at a big company like Oracle (as disliked as it is). That&#39;s not going to go over well at all. You may want to go back and read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> for help formulating a good question - this is not your first question and you should be fairly familiar with the asking process by now."},{"owner":{"account_id":408170,"reputation":1289,"user_id":778659,"accept_rate":82,"display_name":"Ben Xu"},"score":0,"creation_date":1442473850,"post_id":32623675,"comment_id":53098811,"body_markdown":"@all, i have removed my introduction with Oracle inside it .  I don&#39;t know why people care such things. Oracle is good, Oracle is bad.....","body":"@all, i have removed my introduction with Oracle inside it .  I don&#39;t know why people care such things. Oracle is good, Oracle is bad....."},{"owner":{"account_id":37175,"reputation":706108,"user_id":106224,"accept_rate":96,"display_name":"BoltClock"},"score":0,"creation_date":1442474526,"post_id":32623675,"comment_id":53099177,"body_markdown":"We expect questions from everyone to meet a certain quality standard regardless of their employment or social status. It&#39;s just incredibly unprofessional to say things like &quot;pls help&quot;. You can choose whether or not to disclose your affiliation, but what matters most is that you try to improve your questions. If you don&#39;t do that, you risk losing the ability to ask questions in the future.","body":"We expect questions from everyone to meet a certain quality standard regardless of their employment or social status. It&#39;s just incredibly unprofessional to say things like &quot;pls help&quot;. You can choose whether or not to disclose your affiliation, but what matters most is that you try to improve your questions. If you don&#39;t do that, you risk losing the ability to ask questions in the future."},{"owner":{"account_id":408170,"reputation":1289,"user_id":778659,"accept_rate":82,"display_name":"Ben Xu"},"score":0,"creation_date":1442475295,"post_id":32623675,"comment_id":53099573,"body_markdown":"@ BoltClock already changed the question,and i think both question and answer has value.    It&#39;s common need such test to just use big heap meomory.   I use stackoverfow a lot, I search it first, when there is no answer, ask a question and i think i will help others in future","body":"@ BoltClock already changed the question,and i think both question and answer has value.    It&#39;s common need such test to just use big heap meomory.   I use stackoverfow a lot, I search it first, when there is no answer, ask a question and i think i will help others in future"},{"owner":{"account_id":2539078,"reputation":4317,"user_id":2422013,"accept_rate":97,"display_name":"AStopher"},"score":0,"creation_date":1442498633,"post_id":32623675,"comment_id":53113565,"body_markdown":"@BenXu You should know that &#39;best practice&#39; questions are *also* off-topic here...","body":"@BenXu You should know that &#39;best practice&#39; questions are <i>also</i> off-topic here..."}],"answers":[{"tags":[],"owner":{"account_id":1163778,"reputation":138,"user_id":1142787,"display_name":"Sandeep Mandori"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1442472698,"creation_date":1442472538,"answer_id":32624116,"question_id":32623675,"body_markdown":"Creating such program is very simple, just create more object and do not let them garbage collect. One example is below. \r\n\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n\r\n    public class UseHugeRAM {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tList&lt;String&gt; list = new ArrayList&lt;&gt;();\r\n\t\tint counter = 0;\r\n\t\tfor (;;) {\r\n\t\t\tlist.add(&quot;&quot; + counter++);\r\n\t\t}\r\n\t  }\r\n    }\r\n\r\n You can very well bound for loop to some value so that it exits after creating these many string objects. For now this will simply exhaust the memory as not terminating. I hope it helps.\r\n\r\n&gt; In nutshell you are storing all the objects and not letting them garbage collect. That&#39;s something you should protect while building your application.","title":"best Java code to control big heap memeory used (like 1G)","body":"<p>Creating such program is very simple, just create more object and do not let them garbage collect. One example is below. </p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\n\npublic class UseHugeRAM {\n\npublic static void main(String[] args) {\n    List&lt;String&gt; list = new ArrayList&lt;&gt;();\n    int counter = 0;\n    for (;;) {\n        list.add(\"\" + counter++);\n    }\n  }\n}\n</code></pre>\n\n<p>You can very well bound for loop to some value so that it exits after creating these many string objects. For now this will simply exhaust the memory as not terminating. I hope it helps.</p>\n\n<blockquote>\n  <p>In nutshell you are storing all the objects and not letting them garbage collect. That's something you should protect while building your application.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1442473168,"creation_date":1442472571,"answer_id":32624124,"question_id":32623675,"body_markdown":"Quickly allocate 1 GB of memory:\r\n\r\n    byte[][] memoryWaster = new byte[1024][1_048_576];\r\n\r\nSee last test run below for successful allocation of **16 GB** of memory.\r\n\r\n*Test program*\r\n\r\n\tRuntime runtime = Runtime.getRuntime();\r\n\tSystem.out.printf(&quot;total: %11d   max: %d%n&quot;, runtime.totalMemory(), runtime.maxMemory());\r\n\tSystem.out.printf(&quot;used:  %11d%n&quot;, runtime.totalMemory() - runtime.freeMemory());\r\n\tSystem.gc();\r\n\tSystem.out.printf(&quot;gc:    %11d%n&quot;, runtime.totalMemory() - runtime.freeMemory());\r\n\tbyte[][] memoryWaster = new byte[1024][1_048_576];\r\n\tmemoryWaster[0][0] = 2; // prevent unused warning\r\n\tSystem.out.printf(&quot;new[]: %11d%n&quot;, runtime.totalMemory() - runtime.freeMemory());\r\n\tSystem.gc();\r\n\tSystem.out.printf(&quot;gc:    %11d%n&quot;, runtime.totalMemory() - runtime.freeMemory());\r\n\tmemoryWaster = null;\r\n\tSystem.out.printf(&quot;null:  %11d%n&quot;, runtime.totalMemory() - runtime.freeMemory());\r\n\tSystem.gc();\r\n\tSystem.out.printf(&quot;gc:    %11d%n&quot;, runtime.totalMemory() - runtime.freeMemory());\r\n\r\n*Output* (Java 8, 32-bit):\r\n\r\n\t// Java 1.8.0_51, 32-bit, no -Xmx given\r\n\ttotal:    16252928   max: 259522560\r\n\tused:       543288\r\n\tgc:         349296\r\n\tException in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space\r\n\t\t\tat test.Test.main(Test.java:11)\r\n\r\n\t// Java 1.8.0_51, 32-bit, -Xmx1200m\r\n\ttotal:    16252928   max: 1216348160\r\n\tused:       543288\r\n\tgc:         349296\r\n\tnew[]:  1078435312\r\n\tgc:     1078382592\r\n\tnull:   1078382592\r\n\tgc:       15711288\r\n\r\n\t// Java 1.8.0_51, 64-bit, no -Xmx given, 32 GB machine\r\n\ttotal:   514850816   max: 7618953216\r\n\tused:      5389872\r\n\tgc:        2981048\r\n\tnew[]:  1074961632\r\n\tgc:     1081175720\r\n\tnull:   1081175720\r\n\tgc:       13027424\r\n\r\n\t// Java 1.8.0_51, 64-bit, -Xmx1200m\r\n\ttotal:   514850816   max: 1118830592\r\n\tused:      5389872\r\n\tgc:        2981048\r\n\tnew[]:  1077948560\r\n\tgc:     1078944096\r\n\tnull:   1078944096\r\n\tgc:        3501136\r\n\r\n\t// Java 1.8.0_51, 64-bit, -Xmx20g, new byte[16384][1_048_576]\r\n\ttotal:   514850816   max: 19088801792\r\n\tused:      5389872\r\n\tgc:        2981048\r\n\tnew[]: 17205604928\r\n\tgc:    17205604928\r\n\tnull:  17205604928\r\n\tgc:       26186032","title":"best Java code to control big heap memeory used (like 1G)","body":"<p>Quickly allocate 1 GB of memory:</p>\n\n<pre><code>byte[][] memoryWaster = new byte[1024][1_048_576];\n</code></pre>\n\n<p>See last test run below for successful allocation of <strong>16 GB</strong> of memory.</p>\n\n<p><em>Test program</em></p>\n\n<pre><code>Runtime runtime = Runtime.getRuntime();\nSystem.out.printf(\"total: %11d   max: %d%n\", runtime.totalMemory(), runtime.maxMemory());\nSystem.out.printf(\"used:  %11d%n\", runtime.totalMemory() - runtime.freeMemory());\nSystem.gc();\nSystem.out.printf(\"gc:    %11d%n\", runtime.totalMemory() - runtime.freeMemory());\nbyte[][] memoryWaster = new byte[1024][1_048_576];\nmemoryWaster[0][0] = 2; // prevent unused warning\nSystem.out.printf(\"new[]: %11d%n\", runtime.totalMemory() - runtime.freeMemory());\nSystem.gc();\nSystem.out.printf(\"gc:    %11d%n\", runtime.totalMemory() - runtime.freeMemory());\nmemoryWaster = null;\nSystem.out.printf(\"null:  %11d%n\", runtime.totalMemory() - runtime.freeMemory());\nSystem.gc();\nSystem.out.printf(\"gc:    %11d%n\", runtime.totalMemory() - runtime.freeMemory());\n</code></pre>\n\n<p><em>Output</em> (Java 8, 32-bit):</p>\n\n<pre><code>// Java 1.8.0_51, 32-bit, no -Xmx given\ntotal:    16252928   max: 259522560\nused:       543288\ngc:         349296\nException in thread \"main\" java.lang.OutOfMemoryError: Java heap space\n        at test.Test.main(Test.java:11)\n\n// Java 1.8.0_51, 32-bit, -Xmx1200m\ntotal:    16252928   max: 1216348160\nused:       543288\ngc:         349296\nnew[]:  1078435312\ngc:     1078382592\nnull:   1078382592\ngc:       15711288\n\n// Java 1.8.0_51, 64-bit, no -Xmx given, 32 GB machine\ntotal:   514850816   max: 7618953216\nused:      5389872\ngc:        2981048\nnew[]:  1074961632\ngc:     1081175720\nnull:   1081175720\ngc:       13027424\n\n// Java 1.8.0_51, 64-bit, -Xmx1200m\ntotal:   514850816   max: 1118830592\nused:      5389872\ngc:        2981048\nnew[]:  1077948560\ngc:     1078944096\nnull:   1078944096\ngc:        3501136\n\n// Java 1.8.0_51, 64-bit, -Xmx20g, new byte[16384][1_048_576]\ntotal:   514850816   max: 19088801792\nused:      5389872\ngc:        2981048\nnew[]: 17205604928\ngc:    17205604928\nnull:  17205604928\ngc:       26186032\n</code></pre>\n"}],"owner":{"account_id":408170,"reputation":1289,"user_id":778659,"accept_rate":82,"display_name":"Ben Xu"},"comment_count":21,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":110,"favorite_count":0,"down_vote_count":6,"up_vote_count":0,"closed_date":1442472671,"accepted_answer_id":32624124,"answer_count":2,"score":-6,"last_activity_date":1639309736,"creation_date":1442470587,"question_id":32623675,"body_markdown":" \r\nCurrently, I need to write a Java program (don&#39;t care it function) just to use huge heap memory for testing. \r\n\r\nwriting a short java code which can exact control how much heap to be used will be quite useful . \r\n","title":"best Java code to control big heap memeory used (like 1G)","body":"<p>Currently, I need to write a Java program (don't care it function) just to use huge heap memory for testing. </p>\n\n<p>writing a short java code which can exact control how much heap to be used will be quite useful . </p>\n"},{"tags":["java","integer","heap-memory","immutability","wrapper"],"comments":[{"owner":{"account_id":1936546,"reputation":133675,"user_id":1743880,"accept_rate":100,"display_name":"Tunaki"},"score":0,"creation_date":1444201722,"post_id":32985845,"comment_id":53796571,"body_markdown":"Take a look at `IntegerCache`.","body":"Take a look at <code>IntegerCache</code>."},{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":2,"creation_date":1444201738,"post_id":32985845,"comment_id":53796581,"body_markdown":"You seem to be comparing object references and not the object content","body":"You seem to be comparing object references and not the object content"},{"owner":{"account_id":4728704,"reputation":17022,"user_id":3824919,"display_name":"Tom"},"score":3,"creation_date":1444201915,"post_id":32985845,"comment_id":53796684,"body_markdown":"Please lookup what &quot;immutable&quot; _really_ means.","body":"Please lookup what &quot;immutable&quot; <i>really</i> means."},{"owner":{"account_id":956558,"reputation":30924,"user_id":981744,"display_name":"Erwin Bolwidt"},"score":1,"creation_date":1444201961,"post_id":32985845,"comment_id":53796713,"body_markdown":"Integer objects are completely immutable, not &quot;up to a point&quot;. How many instances of the objects are created is something different - and in any case, Strings can also have multiple instances with the same content.","body":"Integer objects are completely immutable, not &quot;up to a point&quot;. How many instances of the objects are created is something different - and in any case, Strings can also have multiple instances with the same content."},{"owner":{"account_id":6528825,"reputation":21455,"user_id":5050667,"accept_rate":91,"display_name":"Yassin Hajaj"},"score":0,"creation_date":1444202202,"post_id":32985845,"comment_id":53796853,"body_markdown":"Why the downvotes? I edited it but the question still has no answer...","body":"Why the downvotes? I edited it but the question still has no answer..."},{"owner":{"account_id":2011141,"reputation":7317,"user_id":1799530,"accept_rate":47,"display_name":"SomeJavaGuy"},"score":1,"creation_date":1444202522,"post_id":32985845,"comment_id":53797069,"body_markdown":"Your original question did sound like you didn&#180;t knew what immutable actually means. For an answer you could check [this](http://stackoverflow.com/questions/3451145/when-are-java-strings-interned) for String interning. The reason why the integer class doesn&#180;t do it that way is simply because it just stores the values for optimazition on a micro level. also [this](http://stackoverflow.com/questions/10149959/using-operator-in-java-to-compare-wrapper-objects) for Integer interning","body":"Your original question did sound like you didn&#180;t knew what immutable actually means. For an answer you could check <a href=\"http://stackoverflow.com/questions/3451145/when-are-java-strings-interned\">this</a> for String interning. The reason why the integer class doesn&#180;t do it that way is simply because it just stores the values for optimazition on a micro level. also <a href=\"http://stackoverflow.com/questions/10149959/using-operator-in-java-to-compare-wrapper-objects\">this</a> for Integer interning"},{"owner":{"account_id":4728704,"reputation":17022,"user_id":3824919,"display_name":"Tom"},"score":0,"creation_date":1444203493,"post_id":32985845,"comment_id":53797601,"body_markdown":"To be honest, this question is a much better duplicate candidate: [Why does 128==128 return false but 127==127 return true in this code?](http://stackoverflow.com/questions/1700081/why-does-128-128-return-false-but-127-127-return-true-in-this-code)","body":"To be honest, this question is a much better duplicate candidate: <a href=\"http://stackoverflow.com/questions/1700081/why-does-128-128-return-false-but-127-127-return-true-in-this-code\">Why does 128==128 return false but 127==127 return true in this code?</a>"},{"owner":{"account_id":4728704,"reputation":17022,"user_id":3824919,"display_name":"Tom"},"score":0,"creation_date":1444203869,"post_id":32985845,"comment_id":53797837,"body_markdown":"*&quot;Why the downvotes?&quot;* First, maybe because the misuse of &quot;immutable&quot;? Or maybe because you already knew the range for Integers where the cache is applied (even if you didn&#39;t knew it was a question about caching), so a simple search for [&quot;127 128&quot;](http://stackoverflow.com/search?q=127+128) would have told you what you wanted to know.","body":"<i>&quot;Why the downvotes?&quot;</i> First, maybe because the misuse of &quot;immutable&quot;? Or maybe because you already knew the range for Integers where the cache is applied (even if you didn&#39;t knew it was a question about caching), so a simple search for <a href=\"http://stackoverflow.com/search?q=127+128\">&quot;127 128&quot;</a> would have told you what you wanted to know."}],"answers":[{"tags":[],"owner":{"account_id":2016713,"reputation":26480,"user_id":1803853,"accept_rate":71,"display_name":"Davide Lorenzo MARINO"},"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1444202602,"creation_date":1444202046,"answer_id":32985962,"question_id":32985845,"body_markdown":"Generally is a good idea to mantain an object as immutable as possible because an immutable object can be shared without problems in a multithreading enviroment.\r\n\r\nCreating n copies of the same `Integer` is possible, ma that copies are immutable. Note that also for String is possible to create n different copies of the same String. To do that you need to explicitly use the `new` keyword.\r\n\r\nTwo objects are the same if compared with the operator == returns true. Two objects have the same content if compared with the method equals returns true.\r\n\r\n    obj1 == obj2       // if true obj1 and obj2 are the same\r\n    obj1.equals(obj2)  // if true obj1 and obj2 have the same content \r\n                       // (can be the same or not)\r\n\r\nIn your example you have two Integer with the same content (so equals returns true) but different memory locations (so == returns false)\r\n","title":"Why are two references of Integer equal to a certain point?","body":"<p>Generally is a good idea to mantain an object as immutable as possible because an immutable object can be shared without problems in a multithreading enviroment.</p>\n\n<p>Creating n copies of the same <code>Integer</code> is possible, ma that copies are immutable. Note that also for String is possible to create n different copies of the same String. To do that you need to explicitly use the <code>new</code> keyword.</p>\n\n<p>Two objects are the same if compared with the operator == returns true. Two objects have the same content if compared with the method equals returns true.</p>\n\n<pre><code>obj1 == obj2       // if true obj1 and obj2 are the same\nobj1.equals(obj2)  // if true obj1 and obj2 have the same content \n                   // (can be the same or not)\n</code></pre>\n\n<p>In your example you have two Integer with the same content (so equals returns true) but different memory locations (so == returns false)</p>\n"}],"owner":{"account_id":6528825,"reputation":21455,"user_id":5050667,"accept_rate":91,"display_name":"Yassin Hajaj"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":90,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1444202911,"accepted_answer_id":32985962,"answer_count":1,"score":-3,"last_activity_date":1639309716,"creation_date":1444201674,"question_id":32985845,"body_markdown":"Why the Integer objects do not behave the way String objects behave?\r\n\r\nI read that the reason was performance but can not understand how it would perform better?\r\n\r\nLook at the code below for example :\r\n\r\n    \r\n    public class MyClass{\r\n    \tpublic static void main(String[] args){\r\n    \t\tString one = &quot;myString&quot;;\r\n    \t\tString two = &quot;myString&quot;;\r\n    \t\tSystem.out.println(one == two); // true\r\n    \t\t\r\n    \t\tString oneLong = &quot;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus in leo at massa vehicula rhoncus quis eu mauris. Pellentesque non nulla convallis, tempus augue sed, sollicitudin risus. Aenean posuere nulla ipsum, at faucibus massa dignissim non. Duis felis felis, iaculis eu posuere id, elementum id nulla. Fusce tristique arcu vitae consectetur vehicula. Mauris tincidunt nunc placerat tortor rhoncus, eget venenatis felis dapibus. Sed scelerisque ligula congue ligula elementum hendrerit. Proin et mauris vestibulum, rutrum ante ut, sollicitudin massa. Fusce tempus mattis eleifend. Phasellus ut ante turpis. Suspendisse eu leo nec elit ornare rhoncus sed nec ex. In at tellus mi.&quot;;\r\n    \t\tString twoLong = &quot;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus in leo at massa vehicula rhoncus quis eu mauris. Pellentesque non nulla convallis, tempus augue sed, sollicitudin risus. Aenean posuere nulla ipsum, at faucibus massa dignissim non. Duis felis felis, iaculis eu posuere id, elementum id nulla. Fusce tristique arcu vitae consectetur vehicula. Mauris tincidunt nunc placerat tortor rhoncus, eget venenatis felis dapibus. Sed scelerisque ligula congue ligula elementum hendrerit. Proin et mauris vestibulum, rutrum ante ut, sollicitudin massa. Fusce tempus mattis eleifend. Phasellus ut ante turpis. Suspendisse eu leo nec elit ornare rhoncus sed nec ex. In at tellus mi.&quot;;\r\n    \t\tSystem.out.println(oneLong == twoLong); // true\r\n    \t\t\r\n    \t\tInteger first = 1;\r\n    \t\tInteger second = 1;\r\n    \t\tSystem.out.println(first == second); // true\r\n    \t\t\r\n    \t\tInteger third = 500;\r\n    \t\tInteger fourth = 500;\r\n    \t\tSystem.out.println(third == fourth); // false\r\n    \t}\r\n    }\r\n\r\n\r\nHere are the questions I found but no response was given there :\r\n\r\n[Why Integer In Java is Immutable][1]\r\n\r\n[Is Integer Immutable?][2]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/22793616/why-integer-in-java-is-immutable\r\n  [2]: https://stackoverflow.com/questions/5560176/is-integer-immutable","title":"Why are two references of Integer equal to a certain point?","body":"<p>Why the Integer objects do not behave the way String objects behave?</p>\n\n<p>I read that the reason was performance but can not understand how it would perform better?</p>\n\n<p>Look at the code below for example :</p>\n\n<pre><code>public class MyClass{\n    public static void main(String[] args){\n        String one = \"myString\";\n        String two = \"myString\";\n        System.out.println(one == two); // true\n\n        String oneLong = \"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus in leo at massa vehicula rhoncus quis eu mauris. Pellentesque non nulla convallis, tempus augue sed, sollicitudin risus. Aenean posuere nulla ipsum, at faucibus massa dignissim non. Duis felis felis, iaculis eu posuere id, elementum id nulla. Fusce tristique arcu vitae consectetur vehicula. Mauris tincidunt nunc placerat tortor rhoncus, eget venenatis felis dapibus. Sed scelerisque ligula congue ligula elementum hendrerit. Proin et mauris vestibulum, rutrum ante ut, sollicitudin massa. Fusce tempus mattis eleifend. Phasellus ut ante turpis. Suspendisse eu leo nec elit ornare rhoncus sed nec ex. In at tellus mi.\";\n        String twoLong = \"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus in leo at massa vehicula rhoncus quis eu mauris. Pellentesque non nulla convallis, tempus augue sed, sollicitudin risus. Aenean posuere nulla ipsum, at faucibus massa dignissim non. Duis felis felis, iaculis eu posuere id, elementum id nulla. Fusce tristique arcu vitae consectetur vehicula. Mauris tincidunt nunc placerat tortor rhoncus, eget venenatis felis dapibus. Sed scelerisque ligula congue ligula elementum hendrerit. Proin et mauris vestibulum, rutrum ante ut, sollicitudin massa. Fusce tempus mattis eleifend. Phasellus ut ante turpis. Suspendisse eu leo nec elit ornare rhoncus sed nec ex. In at tellus mi.\";\n        System.out.println(oneLong == twoLong); // true\n\n        Integer first = 1;\n        Integer second = 1;\n        System.out.println(first == second); // true\n\n        Integer third = 500;\n        Integer fourth = 500;\n        System.out.println(third == fourth); // false\n    }\n}\n</code></pre>\n\n<p>Here are the questions I found but no response was given there :</p>\n\n<p><a href=\"https://stackoverflow.com/questions/22793616/why-integer-in-java-is-immutable\">Why Integer In Java is Immutable</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/5560176/is-integer-immutable\">Is Integer Immutable?</a></p>\n"},{"tags":["java","heap-memory"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1445783893,"post_id":33330871,"comment_id":54458495,"body_markdown":"Is there something you don&#39;t understand about the error message?","body":"Is there something you don&#39;t understand about the error message?"},{"owner":{"account_id":3036175,"reputation":25,"user_id":2574211,"accept_rate":60,"display_name":"user2574211"},"score":0,"creation_date":1445784541,"post_id":33330871,"comment_id":54458717,"body_markdown":"@kayaman no what I don&#39;t understand is the fixing it issue","body":"@kayaman no what I don&#39;t understand is the fixing it issue"},{"owner":{"account_id":3395647,"reputation":8918,"user_id":2849346,"accept_rate":50,"display_name":"MWiesner"},"score":0,"creation_date":1445785450,"post_id":33330871,"comment_id":54459055,"body_markdown":"please provide information on how you launched the above code, i.e., which JVM parameters can be assumed here!?","body":"please provide information on how you launched the above code, i.e., which JVM parameters can be assumed here!?"},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1445785519,"post_id":33330871,"comment_id":54459080,"body_markdown":"Have you tried anything before asking this question on SO?","body":"Have you tried anything before asking this question on SO?"},{"owner":{"account_id":3036175,"reputation":25,"user_id":2574211,"accept_rate":60,"display_name":"user2574211"},"score":0,"creation_date":1445785934,"post_id":33330871,"comment_id":54459240,"body_markdown":"@MWiesner im just jarring it and running with no JVM Prams and im using 1.8 jdk to compile","body":"@MWiesner im just jarring it and running with no JVM Prams and im using 1.8 jdk to compile"},{"owner":{"account_id":80219,"reputation":34027,"user_id":226975,"accept_rate":80,"display_name":"Wyzard"},"score":0,"creation_date":1445787585,"post_id":33330871,"comment_id":54459892,"body_markdown":"You&#39;re loading an entire file into memory, in a byte array.  The exception indicates that you don&#39;t have enough memory.  How big is the file?","body":"You&#39;re loading an entire file into memory, in a byte array.  The exception indicates that you don&#39;t have enough memory.  How big is the file?"},{"owner":{"account_id":6453072,"reputation":37996,"user_id":4999394,"accept_rate":98,"display_name":"Ravindra babu"},"score":0,"creation_date":1445791352,"post_id":33330871,"comment_id":54461262,"body_markdown":"Have a look at this one: http://stackoverflow.com/questions/31390793/cannot-download-file-from-url-in-java/33252453#33252453","body":"Have a look at this one: <a href=\"http://stackoverflow.com/questions/31390793/cannot-download-file-from-url-in-java/33252453#33252453\" title=\"cannot download file from url in java\">stackoverflow.com/questions/31390793/&hellip;</a>"},{"owner":{"account_id":6453072,"reputation":37996,"user_id":4999394,"accept_rate":98,"display_name":"Ravindra babu"},"score":0,"creation_date":1445791668,"post_id":33330871,"comment_id":54461380,"body_markdown":"What are you doing after reading data? If you are writing to a file, read file in chunks of byte array and write data in same chunks. You don&#39;t get OutOfMemory in that case. http://stackoverflow.com/questions/31390793/cannot-download-file-from-url-in-java/33252453#33252453 and one more  question: http://stackoverflow.com/questions/18508836/java-outofmemoryerror-in-reading-a-large-text-file/31724120#31724120","body":"What are you doing after reading data? If you are writing to a file, read file in chunks of byte array and write data in same chunks. You don&#39;t get OutOfMemory in that case. <a href=\"http://stackoverflow.com/questions/31390793/cannot-download-file-from-url-in-java/33252453#33252453\" title=\"cannot download file from url in java\">stackoverflow.com/questions/31390793/&hellip;</a> and one more  question: <a href=\"http://stackoverflow.com/questions/18508836/java-outofmemoryerror-in-reading-a-large-text-file/31724120#31724120\" title=\"java outofmemoryerror in reading a large text file\">stackoverflow.com/questions/18508836/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":428569,"reputation":351,"user_id":810982,"display_name":"AdeelMufti"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1445788283,"creation_date":1445788283,"answer_id":33331686,"question_id":33330871,"body_markdown":"Either increase the memory allocated to your JVM (https://stackoverflow.com/questions/2294268/how-can-i-increase-the-jvm-memory), or make sure that the file being loaded in memory isn&#39;t gigantic (if it is, you&#39;ll need to find an alternate solution, or just read chunks of it at a time instead of loading the entire thing in memory).","title":"Exception in thread &quot;Thread-9&quot; java.lang.OutOfMemoryError: Java heap space","body":"<p>Either increase the memory allocated to your JVM (<a href=\"https://stackoverflow.com/questions/2294268/how-can-i-increase-the-jvm-memory\">How can I increase the JVM memory?</a>), or make sure that the file being loaded in memory isn't gigantic (if it is, you'll need to find an alternate solution, or just read chunks of it at a time instead of loading the entire thing in memory).</p>\n"},{"tags":[],"owner":{"account_id":60521,"reputation":34336,"user_id":180719,"accept_rate":88,"display_name":"Olivier Gr&#233;goire"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1445790044,"creation_date":1445789376,"answer_id":33331843,"question_id":33330871,"body_markdown":"Do your update in several steps. Here&#39;s some pseudo-code with Java 8. It&#39;s way shorter than what you wrote because Java has a lot of built-in tools that you re-write much less efficiently.\r\n\r\n    // Download\r\n    Path zipDestination = Paths.get(...);\r\n    try (InputStream  in = source.openStream()) {\r\n      Files.copy(in, zipDestination);\r\n    }\r\n\r\n    // Unzip\r\n    try (ZipFile zipFile = new ZipFile(zipDestination.toFile())) {\r\n      for (ZipEntry e: Collections.list(zipFile.entries())) {\r\n        Path entryDestination = Paths.get(...);\r\n        Files.copy(zipFile.getInputStream(e), entryDestination);\r\n      }\r\n    }\r\n\r\n    // Done.","title":"Exception in thread &quot;Thread-9&quot; java.lang.OutOfMemoryError: Java heap space","body":"<p>Do your update in several steps. Here's some pseudo-code with Java 8. It's way shorter than what you wrote because Java has a lot of built-in tools that you re-write much less efficiently.</p>\n\n<pre><code>// Download\nPath zipDestination = Paths.get(...);\ntry (InputStream  in = source.openStream()) {\n  Files.copy(in, zipDestination);\n}\n\n// Unzip\ntry (ZipFile zipFile = new ZipFile(zipDestination.toFile())) {\n  for (ZipEntry e: Collections.list(zipFile.entries())) {\n    Path entryDestination = Paths.get(...);\n    Files.copy(zipFile.getInputStream(e), entryDestination);\n  }\n}\n\n// Done.\n</code></pre>\n"}],"owner":{"account_id":3036175,"reputation":25,"user_id":2574211,"accept_rate":60,"display_name":"user2574211"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2481,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1639309653,"creation_date":1445783753,"question_id":33330871,"body_markdown":"I have been writing an updater for my game.\r\n\r\n1. It checks a .version file on drop box and compares it to the local .version file.\r\n\r\n2. If there is any link missing from the local version of the file, it downloads the required link one by one.\r\n \r\nThis is the error that it shows \r\n\r\n\r\n    Exception in thread &quot;Thread-9&quot; java.lang.OutOfMemoryError: Java heap space\r\n\tat com.fox.listeners.ButtonListener.readFile(ButtonListener.java:209)\r\n\tat com.fox.listeners.ButtonListener.readFile(ButtonListener.java:204)\r\n\tat com.fox.listeners.ButtonListener.UpdateStart(ButtonListener.java:132)\r\n\tat com.fox.listeners.ButtonListener$1.run(ButtonListener.java:58)\r\n\r\nIt only shows for some computers though and not all of them this is the readFile method \r\n\r\n\r\n    private byte[] readFile(URL u) throws IOException {\r\n    \treturn readFile(u, getFileSize(u));\r\n    }\r\n\r\n    private static byte[] readFile(URL u, int size) throws IOException {\r\n    \tbyte[] data = new byte[size];\r\n    \tint index = 0, read = 0;\r\n    \ttry {\r\n    \t\tHttpURLConnection conn = null;\r\n    \t\tconn = (HttpURLConnection) u.openConnection();\r\n    \t\tconn.addRequestProperty(&quot;User-Agent&quot;, &quot;Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)&quot;);\r\n    \t\tInputStream is = conn.getInputStream();\r\n    \t\tprogress_a = 0;\r\n    \t\tprogress_b = data.length;\r\n    \t\twhile(index &lt; data.length) {\r\n    \t\t\tread = is.read(data, index, size-index);\r\n    \t\t\tindex += read;\r\n    \t\t\tprogress_a = index;\r\n    \t\t}\r\n    \t} catch(Exception e) {\r\n    \t\te.printStackTrace();\r\n    \t}\r\n    \t\r\n    \treturn data;\r\n    }\r\n    \r\n    private byte[] readFile(File f) {\r\n    \tbyte[] data = null;\r\n    \ttry {\r\n    \t\tdata = new byte[(int)f.length()];\r\n    \r\n    \t\t@SuppressWarnings(&quot;resource&quot;)\r\n    \t\tDataInputStream dis = new DataInputStream(new FileInputStream(f));\r\n    \t\tdis.readFully(data);\r\n    \t} catch (IOException e) {\r\n    \t\te.printStackTrace();\r\n    \t}\r\n    \treturn data;\r\n    }\r\n\r\nThis is the main method that is ran \r\n\r\n    public void UpdateStart() {\r\n    \tSystem.out.println(&quot;Starting Updater..&quot;);\r\n    \t\r\n    \tif(new File(cache_dir).exists() == false) {\r\n    \t\tSystem.out.print(&quot;Creating cache dir.. &quot;);\r\n    \t\twhile(new File(cache_dir).mkdir() == false);\r\n    \t\tSystem.out.println(&quot;Done&quot;);\r\n    \t}\r\n    \t\r\n    \t\r\n    \ttry {\r\n    \t\tversion_live = new Version(new URL(version_file_live));\r\n    \t} catch(MalformedURLException e) {\r\n    \t\te.printStackTrace();\r\n    \t}\r\n    \t\r\n    \tversion_local = new Version(new File(version_file_local));\r\n    \r\n    \tVersion updates = version_live.differences(version_local);\r\n    \t\r\n    \tSystem.out.println(&quot;Updated&quot;);\r\n    \t\r\n    \tint i = 1;\r\n    \ttry {\r\n    \t\tbyte[] b = null, data = null;\r\n    \t\tFileOutputStream fos = null;\r\n    \t\tBufferedWriter bw = null;\r\n    \t\t\r\n    \t\t\r\n    \t\tfor(String s : updates.files) {\r\n    \t\t\tif(s.equals(&quot;&quot;))\r\n    \t\t\t\tcontinue;\r\n    \t\t\t\r\n    \t\t\t\r\n    \t\t\tSystem.out.println(&quot;Reading file &quot;+s);\r\n    \t\t\tAppFrame.pbar.setString(&quot;Downloading file &quot;+ i + &quot; of &quot;+updates.files.size());\r\n    \t\t\tif(progress_b &gt; 0) {\r\n    \t\t\t\ts = s + &quot; &quot; +(progress_a * 1000L / progress_b / 10.0)+&quot;%&quot;;\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t\tb = readFile(new URL(s));\r\n    \t\t\t\r\n    \t\t\t\r\n    \t\t\t\r\n    \t\t\tprogress_a = 0;\r\n    \t\t\tprogress_b = b.length;\r\n    \t\t\t\r\n    \t\t\tAppFrame.pbar.setString(&quot;Unzipping file &quot;+ i++ +&quot; of &quot;+updates.files.size());\r\n    \r\n    \t\t\tZipInputStream zipStream = new ZipInputStream(new ByteArrayInputStream(b));\r\n    \t\t\tFile f = null, parent = null;\r\n    \t\t\tZipEntry entry = null;\r\n    \t\t\tint read = 0, entry_read = 0;\r\n    \t\t\tlong entry_size = 0;\r\n    \t\t\tprogress_b = 0;\r\n    \r\n    \t\t\twhile((entry = zipStream.getNextEntry()) != null)\r\n    \t\t\t\tprogress_b += entry.getSize();\r\n    \t\t\t\r\n    \t\t\tzipStream = new ZipInputStream(new ByteArrayInputStream(b));\r\n    \t\t\t\r\n    \t\t\twhile((entry = zipStream.getNextEntry()) != null) {\r\n    \t\t\t\tf = new File(cache_dir+entry.getName());\r\n    \t\t\t\tif(entry.isDirectory())\r\n    \t\t\t\t\tcontinue;\r\n    \r\n    \t\t\t\tSystem.out.println(&quot;Making file &quot;+f.toString());\r\n    \r\n    \t\t\t\tparent = f.getParentFile();\r\n    \t\t\t\tif(parent != null &amp;&amp; !parent.exists()) {\r\n    \t\t\t\t\tSystem.out.println(&quot;Trying to create directory &quot;+parent.getAbsolutePath());\r\n    \t\t\t\t\twhile(parent.mkdirs() == false);\r\n    \t\t\t\t}\r\n    \t\t\t\t\r\n    \t\t\t\tentry_read = 0;\r\n    \t\t\t\tentry_size = entry.getSize();\r\n    \t\t\t\tdata = new byte[1024];\r\n    \t\t\t\tfos = new FileOutputStream(f);\r\n    \r\n    \t\t\t\twhile(entry_read &lt; entry_size) {\r\n    \t\t\t\t\tread = zipStream.read(data, 0, (int)Math.min(1024, entry_size-entry_read));\r\n    \t\t\t\t\tentry_read += read;\r\n    \t\t\t\t\tprogress_a += read;\r\n    \t\t\t\t\tfos.write(data, 0, read);\r\n    \t\t\t\t}\r\n    \t\t\t\tfos.close();\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t\tbw = new BufferedWriter(new FileWriter(new File(version_file_local), true));\r\n    \t\t\tbw.write(s);\r\n    \t\t\tbw.newLine();\r\n    \t\t\tbw.close();\r\n    \t\t}\r\n    \t} catch(Exception e) {\r\n    \t\te.printStackTrace();\r\n    \t\treturn;\r\n    \t}\r\n    \r\n    \tSystem.out.println(version_live);\r\n    \tSystem.out.println(version_local);\r\n    \tSystem.out.println(updates);\r\n    \tCacheUpdated = true;\r\n    \tif(CacheUpdated) {\r\n    \t\tAppFrame.pbar.setString(&quot;All Files are downloaded click Launch to play!&quot;);\r\n    \t}\r\n    \t \r\n    }\r\n\r\nI don&#39;t get why it is working for some of my players and then some of my other players it does not i have been trying to fix this all day and i am just so stumped at this point but this seems like its the only big issue left for me to fix.\r\n","title":"Exception in thread &quot;Thread-9&quot; java.lang.OutOfMemoryError: Java heap space","body":"<p>I have been writing an updater for my game.</p>\n\n<ol>\n<li><p>It checks a .version file on drop box and compares it to the local .version file.</p></li>\n<li><p>If there is any link missing from the local version of the file, it downloads the required link one by one.</p></li>\n</ol>\n\n<p>This is the error that it shows </p>\n\n<pre><code>Exception in thread \"Thread-9\" java.lang.OutOfMemoryError: Java heap space\nat com.fox.listeners.ButtonListener.readFile(ButtonListener.java:209)\nat com.fox.listeners.ButtonListener.readFile(ButtonListener.java:204)\nat com.fox.listeners.ButtonListener.UpdateStart(ButtonListener.java:132)\nat com.fox.listeners.ButtonListener$1.run(ButtonListener.java:58)\n</code></pre>\n\n<p>It only shows for some computers though and not all of them this is the readFile method </p>\n\n<pre><code>private byte[] readFile(URL u) throws IOException {\n    return readFile(u, getFileSize(u));\n}\n\nprivate static byte[] readFile(URL u, int size) throws IOException {\n    byte[] data = new byte[size];\n    int index = 0, read = 0;\n    try {\n        HttpURLConnection conn = null;\n        conn = (HttpURLConnection) u.openConnection();\n        conn.addRequestProperty(\"User-Agent\", \"Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)\");\n        InputStream is = conn.getInputStream();\n        progress_a = 0;\n        progress_b = data.length;\n        while(index &lt; data.length) {\n            read = is.read(data, index, size-index);\n            index += read;\n            progress_a = index;\n        }\n    } catch(Exception e) {\n        e.printStackTrace();\n    }\n\n    return data;\n}\n\nprivate byte[] readFile(File f) {\n    byte[] data = null;\n    try {\n        data = new byte[(int)f.length()];\n\n        @SuppressWarnings(\"resource\")\n        DataInputStream dis = new DataInputStream(new FileInputStream(f));\n        dis.readFully(data);\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n    return data;\n}\n</code></pre>\n\n<p>This is the main method that is ran </p>\n\n<pre><code>public void UpdateStart() {\n    System.out.println(\"Starting Updater..\");\n\n    if(new File(cache_dir).exists() == false) {\n        System.out.print(\"Creating cache dir.. \");\n        while(new File(cache_dir).mkdir() == false);\n        System.out.println(\"Done\");\n    }\n\n\n    try {\n        version_live = new Version(new URL(version_file_live));\n    } catch(MalformedURLException e) {\n        e.printStackTrace();\n    }\n\n    version_local = new Version(new File(version_file_local));\n\n    Version updates = version_live.differences(version_local);\n\n    System.out.println(\"Updated\");\n\n    int i = 1;\n    try {\n        byte[] b = null, data = null;\n        FileOutputStream fos = null;\n        BufferedWriter bw = null;\n\n\n        for(String s : updates.files) {\n            if(s.equals(\"\"))\n                continue;\n\n\n            System.out.println(\"Reading file \"+s);\n            AppFrame.pbar.setString(\"Downloading file \"+ i + \" of \"+updates.files.size());\n            if(progress_b &gt; 0) {\n                s = s + \" \" +(progress_a * 1000L / progress_b / 10.0)+\"%\";\n            }\n\n            b = readFile(new URL(s));\n\n\n\n            progress_a = 0;\n            progress_b = b.length;\n\n            AppFrame.pbar.setString(\"Unzipping file \"+ i++ +\" of \"+updates.files.size());\n\n            ZipInputStream zipStream = new ZipInputStream(new ByteArrayInputStream(b));\n            File f = null, parent = null;\n            ZipEntry entry = null;\n            int read = 0, entry_read = 0;\n            long entry_size = 0;\n            progress_b = 0;\n\n            while((entry = zipStream.getNextEntry()) != null)\n                progress_b += entry.getSize();\n\n            zipStream = new ZipInputStream(new ByteArrayInputStream(b));\n\n            while((entry = zipStream.getNextEntry()) != null) {\n                f = new File(cache_dir+entry.getName());\n                if(entry.isDirectory())\n                    continue;\n\n                System.out.println(\"Making file \"+f.toString());\n\n                parent = f.getParentFile();\n                if(parent != null &amp;&amp; !parent.exists()) {\n                    System.out.println(\"Trying to create directory \"+parent.getAbsolutePath());\n                    while(parent.mkdirs() == false);\n                }\n\n                entry_read = 0;\n                entry_size = entry.getSize();\n                data = new byte[1024];\n                fos = new FileOutputStream(f);\n\n                while(entry_read &lt; entry_size) {\n                    read = zipStream.read(data, 0, (int)Math.min(1024, entry_size-entry_read));\n                    entry_read += read;\n                    progress_a += read;\n                    fos.write(data, 0, read);\n                }\n                fos.close();\n            }\n\n            bw = new BufferedWriter(new FileWriter(new File(version_file_local), true));\n            bw.write(s);\n            bw.newLine();\n            bw.close();\n        }\n    } catch(Exception e) {\n        e.printStackTrace();\n        return;\n    }\n\n    System.out.println(version_live);\n    System.out.println(version_local);\n    System.out.println(updates);\n    CacheUpdated = true;\n    if(CacheUpdated) {\n        AppFrame.pbar.setString(\"All Files are downloaded click Launch to play!\");\n    }\n\n}\n</code></pre>\n\n<p>I don't get why it is working for some of my players and then some of my other players it does not i have been trying to fix this all day and i am just so stumped at this point but this seems like its the only big issue left for me to fix.</p>\n"},{"tags":["java","object","reference","instance"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":3,"creation_date":1639308645,"post_id":70323137,"comment_id":124311123,"body_markdown":"Because `movie4` does not point to `movie1` anymore. You&#39;re not modifying the object `movie4` points to, just *what* `movie4` points to.","body":"Because <code>movie4</code> does not point to <code>movie1</code> anymore. You&#39;re not modifying the object <code>movie4</code> points to, just <i>what</i> <code>movie4</code> points to."},{"owner":{"account_id":19226040,"reputation":17,"user_id":15851717,"display_name":"User1997"},"score":0,"creation_date":1639308914,"post_id":70323137,"comment_id":124311167,"body_markdown":"can you explain a bit further?","body":"can you explain a bit further?"},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":1,"creation_date":1639309161,"post_id":70323137,"comment_id":124311220,"body_markdown":"Think of `movie1` and `movie4` as labels. You&#39;ve just moved the `movie4` label to another object. That shouldn&#39;t change what `movie1` is still stuck to.","body":"Think of <code>movie1</code> and <code>movie4</code> as labels. You&#39;ve just moved the <code>movie4</code> label to another object. That shouldn&#39;t change what <code>movie1</code> is still stuck to."},{"owner":{"account_id":22425724,"reputation":1060,"user_id":16632363,"display_name":"user16632363"},"score":1,"creation_date":1639313485,"post_id":70323137,"comment_id":124312070,"body_markdown":"It is crucial for Java programming to understand that a variable is not an object, it is a thing that can refer to no more than one object at a time (or hold a primitive value, but that&#39;s beside the point here).","body":"It is crucial for Java programming to understand that a variable is not an object, it is a thing that can refer to no more than one object at a time (or hold a primitive value, but that&#39;s beside the point here)."}],"answers":[{"tags":[],"owner":{"account_id":52616,"reputation":1042915,"user_id":157247,"accept_rate":91,"display_name":"T.J. Crowder"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1639309541,"creation_date":1639308957,"answer_id":70323172,"question_id":70323137,"body_markdown":"This made `movie4` point to `movie1`:\r\n\r\n```\r\nMovie movie4 = movie1;\r\n```\r\n\r\n**but**, then you immediately updated `movie4` to point to a *different* object:\r\n\r\n```\r\nmovie4 = new Movie(&quot;The Return of the King&quot;, 2003, 8.9);\r\n```\r\n\r\nSo at that point, `movie1` and `movie4` are no longer pointing to the same `Movie`, so changes you make via `movie4` don&#39;t affect the object `movie1` points to.\r\n\r\nIf you had **changed** the object without replacing `movie4`:\r\n\r\n```\r\nMovie movie4 = movie1;\r\nmovie4.name = &quot;The Return of the King&quot;;\r\n```\r\n\r\n...then you would have seen that change to the object whether you looked at `movie1.name` or `movie4.name`.\r\n\r\nA bit more detail:\r\n\r\nAfter you did this:\r\n\r\n```\r\nMovie movie1 = new Movie(&quot;The Shawshank Redemption&quot;, 1994, 9.3);\r\nMovie movie2 = new Movie(&quot;The Godfather&quot;, 1972, 9.2);\r\nMovie movie3 = new Movie(&quot;The Dark Knight&quot;, 2008, 9.0);\r\n```\r\n\r\n...you had something like this in memory (omitting a lot of details):\r\n\r\n&lt;pre&gt;\r\n                      ++\r\nmovie1:Ref4516&gt;|         (Movie)          |\r\n                      ++\r\n                      | name: &quot;The Shawshank...&quot; |\r\n                      | ...                      |\r\n                      ++\r\n\r\n                      ++\r\nmovie2:Ref8469&gt;|         (Movie)          |\r\n                      ++\r\n                      | name: &quot;The Godfather&quot;    |\r\n                      | ...                      |\r\n                      ++\r\n\r\n                      ++\r\nmovie3:Ref4789&gt;|         (Movie)          |\r\n                      ++\r\n                      | name: &quot;The Dark Knight&quot;  |\r\n                      | ...                      |\r\n                      ++\r\n&lt;/pre&gt;\r\n\r\nThen you did this:\r\n\r\n```\r\nMovie movie4 = movie1;\r\n```\r\n\r\n...making `movie4` and `movie1` point to the same movie:\r\n\r\n&lt;pre&gt;\r\n                  \r\nmovie1:Ref4516+\r\n                 |    ++\r\n                 +&gt;|         (Movie)          |\r\n                 |    ++\r\nmovie4:Ref4516+    | name: &quot;The Shawshank...&quot; |\r\n                      | ...                      |                               \r\n                      ++\r\n\r\n                      ++\r\nmovie2:Ref8469&gt;|         (Movie)          |\r\n                      ++\r\n                      | name: &quot;The Godfather&quot;    |\r\n                      | ...                      |\r\n                      ++\r\n\r\n                      ++\r\nmovie3:Ref4789&gt;|         (Movie)          |\r\n                      ++\r\n                      | name: &quot;The Dark Knight&quot;  |\r\n                      | ...                      |\r\n                      ++\r\n&lt;/pre&gt;\r\n\r\nSo far, so good, but then you did:\r\n\r\n```\r\nmovie4 = new Movie(&quot;The Return of the King&quot;, /*...*/);\r\n```\r\n\r\n...which made `movie4` point to a new object:\r\n\r\n&lt;pre&gt;\r\n                      ++\r\nmovie1:Ref4516&gt;|         (Movie)          |\r\n                      ++\r\n                      | name: &quot;The Shawshank...&quot; |\r\n                      | ...                      |\r\n                      ++\r\n                                                 \r\n                      ++\r\nmovie2:Ref8469&gt;|         (Movie)          |\r\n                      ++\r\n                      | name: &quot;The Godfather&quot;    |\r\n                      | ...                      |\r\n                      ++\r\n\r\n                      ++\r\nmovie3:Ref4789&gt;|         (Movie)          |\r\n                      ++\r\n                      | name: &quot;The Dark Knight&quot;  |\r\n                      | ...                      |\r\n                      ++\r\n\r\n                      ++\r\nmovie4:Ref9546&gt;|         (Movie)          |\r\n                      ++\r\n                      | name: &quot;The Return of...&quot; |\r\n                      | ...                      |\r\n                      ++\r\n&lt;/pre&gt;\r\n\r\nSo assigning to `movie4.name` just changes that new object, not the one that `movie1` points to.\r\n\r\nIf you **didn&#39;t** do that `movie4 = new Movie(/*...*/)` bit, so `movie1` and `movie4` still pointed at the same object\r\n\r\n&lt;pre&gt;\r\n                  \r\nmovie1:Ref4516+\r\n                 |    ++\r\n                 +&gt;|         (Movie)          |\r\n                 |    ++\r\nmovie4:Ref4516+    | name: &quot;The Shawshank...&quot; |\r\n                      | ...                      |                               \r\n                      ++\r\n\r\n                      ++\r\nmovie2:Ref8469&gt;|         (Movie)          |\r\n                      ++\r\n                      | name: &quot;The Godfather&quot;    |\r\n                      | ...                      |\r\n                      ++\r\n\r\n                      ++\r\nmovie3:Ref4789&gt;|         (Movie)          |\r\n                      ++\r\n                      | name: &quot;The Dark Knight&quot;  |\r\n                      | ...                      |\r\n                      ++\r\n&lt;/pre&gt;\r\n\r\n...then assigning to `movie4.name` would change the object that both `movie4` and `movie1` are pointing at:\r\n\r\n```\r\nmovie4.name = &quot;The Return of the King&quot;;\r\n```\r\n\r\n&lt;pre&gt;\r\n                  \r\nmovie1:Ref4516+\r\n                 |    ++\r\n                 +&gt;|         (Movie)          |\r\n                 |    ++\r\nmovie4:Ref4516+    | name: &quot;The Return of...&quot; |\r\n                      | ...                      |                               \r\n                      ++\r\n\r\n                      ++\r\nmovie2:Ref8469&gt;|         (Movie)          |\r\n                      ++\r\n                      | name: &quot;The Godfather&quot;    |\r\n                      | ...                      |\r\n                      ++\r\n\r\n                      ++\r\nmovie3:Ref4789&gt;|         (Movie)          |\r\n                      ++\r\n                      | name: &quot;The Dark Knight&quot;  |\r\n                      | ...                      |\r\n                      ++\r\n&lt;/pre&gt;\r\n","title":"why a second reference to an object does not alter the content in java?","body":"<p>This made <code>movie4</code> point to <code>movie1</code>:</p>\n<pre><code>Movie movie4 = movie1;\n</code></pre>\n<p><strong>but</strong>, then you immediately updated <code>movie4</code> to point to a <em>different</em> object:</p>\n<pre><code>movie4 = new Movie(&quot;The Return of the King&quot;, 2003, 8.9);\n</code></pre>\n<p>So at that point, <code>movie1</code> and <code>movie4</code> are no longer pointing to the same <code>Movie</code>, so changes you make via <code>movie4</code> don't affect the object <code>movie1</code> points to.</p>\n<p>If you had <strong>changed</strong> the object without replacing <code>movie4</code>:</p>\n<pre><code>Movie movie4 = movie1;\nmovie4.name = &quot;The Return of the King&quot;;\n</code></pre>\n<p>...then you would have seen that change to the object whether you looked at <code>movie1.name</code> or <code>movie4.name</code>.</p>\n<p>A bit more detail:</p>\n<p>After you did this:</p>\n<pre><code>Movie movie1 = new Movie(&quot;The Shawshank Redemption&quot;, 1994, 9.3);\nMovie movie2 = new Movie(&quot;The Godfather&quot;, 1972, 9.2);\nMovie movie3 = new Movie(&quot;The Dark Knight&quot;, 2008, 9.0);\n</code></pre>\n<p>...you had something like this in memory (omitting a lot of details):</p>\n<pre>\n                      ++\nmovie1:Ref4516>|         (Movie)          |\n                      ++\n                      | name: \"The Shawshank...\" |\n                      | ...                      |\n                      ++\n\n                      ++\nmovie2:Ref8469>|         (Movie)          |\n                      ++\n                      | name: \"The Godfather\"    |\n                      | ...                      |\n                      ++\n\n                      ++\nmovie3:Ref4789>|         (Movie)          |\n                      ++\n                      | name: \"The Dark Knight\"  |\n                      | ...                      |\n                      ++\n</pre>\n<p>Then you did this:</p>\n<pre><code>Movie movie4 = movie1;\n</code></pre>\n<p>...making <code>movie4</code> and <code>movie1</code> point to the same movie:</p>\n<pre>\n                  \nmovie1:Ref4516+\n                 |    ++\n                 +>|         (Movie)          |\n                 |    ++\nmovie4:Ref4516+    | name: \"The Shawshank...\" |\n                      | ...                      |                               \n                      ++\n\n                      ++\nmovie2:Ref8469>|         (Movie)          |\n                      ++\n                      | name: \"The Godfather\"    |\n                      | ...                      |\n                      ++\n\n                      ++\nmovie3:Ref4789>|         (Movie)          |\n                      ++\n                      | name: \"The Dark Knight\"  |\n                      | ...                      |\n                      ++\n</pre>\n<p>So far, so good, but then you did:</p>\n<pre><code>movie4 = new Movie(&quot;The Return of the King&quot;, /*...*/);\n</code></pre>\n<p>...which made <code>movie4</code> point to a new object:</p>\n<pre>\n                      ++\nmovie1:Ref4516>|         (Movie)          |\n                      ++\n                      | name: \"The Shawshank...\" |\n                      | ...                      |\n                      ++\n                                                 \n                      ++\nmovie2:Ref8469>|         (Movie)          |\n                      ++\n                      | name: \"The Godfather\"    |\n                      | ...                      |\n                      ++\n\n                      ++\nmovie3:Ref4789>|         (Movie)          |\n                      ++\n                      | name: \"The Dark Knight\"  |\n                      | ...                      |\n                      ++\n\n                      ++\nmovie4:Ref9546>|         (Movie)          |\n                      ++\n                      | name: \"The Return of...\" |\n                      | ...                      |\n                      ++\n</pre>\n<p>So assigning to <code>movie4.name</code> just changes that new object, not the one that <code>movie1</code> points to.</p>\n<p>If you <strong>didn't</strong> do that <code>movie4 = new Movie(/*...*/)</code> bit, so <code>movie1</code> and <code>movie4</code> still pointed at the same object</p>\n<pre>\n                  \nmovie1:Ref4516+\n                 |    ++\n                 +>|         (Movie)          |\n                 |    ++\nmovie4:Ref4516+    | name: \"The Shawshank...\" |\n                      | ...                      |                               \n                      ++\n\n                      ++\nmovie2:Ref8469>|         (Movie)          |\n                      ++\n                      | name: \"The Godfather\"    |\n                      | ...                      |\n                      ++\n\n                      ++\nmovie3:Ref4789>|         (Movie)          |\n                      ++\n                      | name: \"The Dark Knight\"  |\n                      | ...                      |\n                      ++\n</pre>\n<p>...then assigning to <code>movie4.name</code> would change the object that both <code>movie4</code> and <code>movie1</code> are pointing at:</p>\n<pre><code>movie4.name = &quot;The Return of the King&quot;;\n</code></pre>\n<pre>\n                  \nmovie1:Ref4516+\n                 |    ++\n                 +>|         (Movie)          |\n                 |    ++\nmovie4:Ref4516+    | name: \"The Return of...\" |\n                      | ...                      |                               \n                      ++\n\n                      ++\nmovie2:Ref8469>|         (Movie)          |\n                      ++\n                      | name: \"The Godfather\"    |\n                      | ...                      |\n                      ++\n\n                      ++\nmovie3:Ref4789>|         (Movie)          |\n                      ++\n                      | name: \"The Dark Knight\"  |\n                      | ...                      |\n                      ++\n</pre>\n"},{"tags":[],"owner":{"account_id":12822707,"reputation":677,"user_id":9276996,"display_name":"Turtle"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639309200,"creation_date":1639309200,"answer_id":70323195,"question_id":70323137,"body_markdown":"After the execution of this command\r\n\r\n    Movie movie4 = movie1;\r\n\r\nThe value of `movie4` is the reference to `movie1`, So the changes made on `movie4` would be reflected in `movie1` at this point.\r\n\r\n    movie4 = new Movie(&quot;The Return of the King&quot;, 2003, 8.9);\r\n\r\nBut after this command, `movie4` no longer holds the reference to `movie1`, its value is an entirely new reference. So any changes made are only made on the new object that `movie4` is pointing to not on the `movie1`","title":"why a second reference to an object does not alter the content in java?","body":"<p>After the execution of this command</p>\n<pre><code>Movie movie4 = movie1;\n</code></pre>\n<p>The value of <code>movie4</code> is the reference to <code>movie1</code>, So the changes made on <code>movie4</code> would be reflected in <code>movie1</code> at this point.</p>\n<pre><code>movie4 = new Movie(&quot;The Return of the King&quot;, 2003, 8.9);\n</code></pre>\n<p>But after this command, <code>movie4</code> no longer holds the reference to <code>movie1</code>, its value is an entirely new reference. So any changes made are only made on the new object that <code>movie4</code> is pointing to not on the <code>movie1</code></p>\n"}],"owner":{"account_id":19226040,"reputation":17,"user_id":15851717,"display_name":"User1997"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":70323172,"answer_count":2,"score":-2,"last_activity_date":1639309541,"creation_date":1639308551,"question_id":70323137,"body_markdown":"  In the below code, I have created 3 instances of the Movie class. I have assigned some data to the three objects. Secondly, I have created a second reference to the object movie1(movie4). I have also assigned values to attributes of movie4.\r\nI printed the new attributes of movie 1 **but the contents have not been altered**. Why does this happen? What is the exact reason? I know other ways of updating content but I want to know why the second referencing does&#39;nt work.   \r\nThe content is movie1 is still the same. Why ? \r\n \r\n\r\n    class Driver{\r\n    \r\n    \tpublic static void main(String[] args){\r\n    \t\t\r\n    \t\tMovie movie1 = new Movie(&quot;The Shawshank Redemption&quot;, 1994, 9.3);\r\n    \t\tMovie movie2 = new Movie(&quot;The Godfather&quot;, 1972, 9.2);\r\n    \t\tMovie movie3 = new Movie(&quot;The Dark Knight&quot;, 2008, 9.0);\r\n    \r\n            **Movie movie4 = movie1;\r\n    \t\tmovie4 = new Movie(&quot;The Return of the King&quot;, 2003, 8.9);**\r\n    \r\n    \t\tmovie4.name = &quot;The Return of the King&quot;;\r\n    \t\tmovie4.year_of_release = 2003;\r\n    \t\tmovie4.rating = 8.9;\r\n    \t\tSystem.out.println(&quot;\\n*********New Movie 1 Details*************\\n&quot;);\r\n    \t\tmovie1.printDetails();\r\n    \r\n    \t}\r\n    }\r\n","title":"why a second reference to an object does not alter the content in java?","body":"<p>In the below code, I have created 3 instances of the Movie class. I have assigned some data to the three objects. Secondly, I have created a second reference to the object movie1(movie4). I have also assigned values to attributes of movie4.\nI printed the new attributes of movie 1 <strong>but the contents have not been altered</strong>. Why does this happen? What is the exact reason? I know other ways of updating content but I want to know why the second referencing does'nt work.<br />\nThe content is movie1 is still the same. Why ?</p>\n<pre><code>class Driver{\n\n    public static void main(String[] args){\n        \n        Movie movie1 = new Movie(&quot;The Shawshank Redemption&quot;, 1994, 9.3);\n        Movie movie2 = new Movie(&quot;The Godfather&quot;, 1972, 9.2);\n        Movie movie3 = new Movie(&quot;The Dark Knight&quot;, 2008, 9.0);\n\n        **Movie movie4 = movie1;\n        movie4 = new Movie(&quot;The Return of the King&quot;, 2003, 8.9);**\n\n        movie4.name = &quot;The Return of the King&quot;;\n        movie4.year_of_release = 2003;\n        movie4.rating = 8.9;\n        System.out.println(&quot;\\n*********New Movie 1 Details*************\\n&quot;);\n        movie1.printDetails();\n\n    }\n}\n</code></pre>\n"},{"tags":["java","hashmap","heap-memory"],"comments":[{"owner":{"account_id":3874110,"reputation":7800,"user_id":3208640,"display_name":"void"},"score":0,"creation_date":1424055290,"post_id":28533792,"comment_id":45382428,"body_markdown":"take a look at [this](http://stackoverflow.com/questions/6157363/how-to-calculate-hashmap-memory-usage-in-java) and [this](http://stackoverflow.com/questions/11565554/calculating-hashmap-overhead-in-java) is useful also","body":"take a look at <a href=\"http://stackoverflow.com/questions/6157363/how-to-calculate-hashmap-memory-usage-in-java\">this</a> and <a href=\"http://stackoverflow.com/questions/11565554/calculating-hashmap-overhead-in-java\">this</a> is useful also"}],"owner":{"account_id":5574866,"reputation":367,"user_id":4418598,"accept_rate":57,"display_name":"Pratik"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":557,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1639309417,"answer_count":0,"score":1,"last_activity_date":1639309437,"creation_date":1424054401,"question_id":28533792,"body_markdown":"If I have HashMap like below having 1000 entries inside, how much memory my HashMap will occupy on JAVA, 64 bit machine? \r\n\r\n    HashMap&lt;String, HashMap&lt;String,int&gt;&gt; map = new HashMap&lt;String, HashMap&lt;String,int&gt;&gt;();\r\n \r\nPlease describe considering me novice programmer.","title":"How much Heap memory my HashMap would occupy?","body":"<p>If I have HashMap like below having 1000 entries inside, how much memory my HashMap will occupy on JAVA, 64 bit machine? </p>\n\n<pre><code>HashMap&lt;String, HashMap&lt;String,int&gt;&gt; map = new HashMap&lt;String, HashMap&lt;String,int&gt;&gt;();\n</code></pre>\n\n<p>Please describe considering me novice programmer.</p>\n"},{"tags":["java","ionic-framework","heap-memory"],"answers":[{"tags":[],"owner":{"account_id":8620195,"reputation":122,"user_id":6455404,"display_name":"athanzhang"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1480863007,"creation_date":1480861670,"answer_id":40959624,"question_id":25743734,"body_markdown":"go to your `C:\\Users\\&lt;username&gt;\\.gradle` directory; find the `gradle.properties` file, if there is no such file, just create one. Finally, edit the `gradle.properties` file, add `org.gradle.jvmargs=-Xmx512m` to it. ","title":"Running Ionic framework results in error Could not reserve enough space for object heap","body":"<p>go to your <code>C:\\Users\\&lt;username&gt;\\.gradle</code> directory; find the <code>gradle.properties</code> file, if there is no such file, just create one. Finally, edit the <code>gradle.properties</code> file, add <code>org.gradle.jvmargs=-Xmx512m</code> to it. </p>\n"},{"tags":[],"owner":{"account_id":49641,"reputation":497,"user_id":147934,"accept_rate":66,"display_name":"Adam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1488989172,"creation_date":1488989172,"answer_id":42676229,"question_id":25743734,"body_markdown":"Anyway, here is how to fix it:\r\nGo to Start-&gt;Control Panel-&gt;System-&gt;Advanced(tab)-&gt;Environment Variables-&gt;System Variables-&gt;New:\r\nVariable name: _JAVA_OPTIONS\r\nVariable value: -Xmx512M","title":"Running Ionic framework results in error Could not reserve enough space for object heap","body":"<p>Anyway, here is how to fix it:\nGo to Start->Control Panel->System->Advanced(tab)->Environment Variables->System Variables->New:\nVariable name: _JAVA_OPTIONS\nVariable value: -Xmx512M</p>\n"}],"owner":{"account_id":2098325,"reputation":1359,"user_id":1866608,"accept_rate":65,"display_name":"Sysrq147"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":694,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1639309244,"creation_date":1410262873,"question_id":25743734,"body_markdown":"I am trying to build simple application with Ionic Framework. When I run:\r\n\r\n`ionic build android`\r\n\r\nI get this error:\r\n    \r\n    [dx] Error occurred during initialization of VM\r\n    [dx] Could not reserve enough space for 2097152KB object heap\r\n    \r\n    BUILD FAILED\r\n    C:\\Users\\Admin\\android-sdks\\tools\\ant\\build.xml:892: The following error occurre\r\n    d while executing this line:\r\n    C:\\Users\\Admin\\android-sdks\\tools\\ant\\build.xml:894: The following error occurre\r\n    d while executing this line:\r\n    C:\\Users\\Admin\\android-sdks\\tools\\ant\\build.xml:906: The following error occurre\r\n    d while executing this line:\r\n    C:\\Users\\Admin\\android-sdks\\tools\\ant\\build.xml:283: null returned: 1\r\n    \r\n    Total time: 4 seconds\r\n\r\nHow can I fix this. (I am using Ionic 1.2.3, this happened after ionic update)\r\n\r\n\r\n","title":"Running Ionic framework results in error Could not reserve enough space for object heap","body":"<p>I am trying to build simple application with Ionic Framework. When I run:</p>\n<p><code>ionic build android</code></p>\n<p>I get this error:</p>\n<pre><code>[dx] Error occurred during initialization of VM\n[dx] Could not reserve enough space for 2097152KB object heap\n\nBUILD FAILED\nC:\\Users\\Admin\\android-sdks\\tools\\ant\\build.xml:892: The following error occurre\nd while executing this line:\nC:\\Users\\Admin\\android-sdks\\tools\\ant\\build.xml:894: The following error occurre\nd while executing this line:\nC:\\Users\\Admin\\android-sdks\\tools\\ant\\build.xml:906: The following error occurre\nd while executing this line:\nC:\\Users\\Admin\\android-sdks\\tools\\ant\\build.xml:283: null returned: 1\n\nTotal time: 4 seconds\n</code></pre>\n<p>How can I fix this. (I am using Ionic 1.2.3, this happened after ionic update)</p>\n"},{"tags":["java","linked-list","heap-memory","nodes"],"comments":[{"owner":{"account_id":936797,"reputation":2054,"user_id":965593,"accept_rate":67,"display_name":"pamphlet"},"score":0,"creation_date":1398137859,"post_id":23209866,"comment_id":35504549,"body_markdown":"I don&#39;t see anything obviously wrong, but I did notice that your `linkRoomXXX()` methods never get called.","body":"I don&#39;t see anything obviously wrong, but I did notice that your <code>linkRoomXXX()</code> methods never get called."},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1398139566,"post_id":23209866,"comment_id":35504994,"body_markdown":"This is incremental development.  Fun occurs in phase 2.","body":"This is incremental development.  Fun occurs in phase 2."}],"answers":[{"tags":[],"owner":{"account_id":1722376,"reputation":2249,"user_id":1577850,"accept_rate":89,"display_name":"SimonT"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1398138301,"creation_date":1398138301,"answer_id":23210003,"question_id":23209866,"body_markdown":"I&#39;m not getting any issues with heap space, but after reaching `&#39;?&#39;` all the new rooms still have `&#39;?&#39;`, most likely because `(char) (&#39;?&#39; + 1)` will keep returning `&#39;?&#39;`.  Perhaps this is a bug with your version of Java.  What is your OS and JDK version?","title":"I&#39;ve made a class for fun, but it runs out of heap space really quickly?","body":"<p>I'm not getting any issues with heap space, but after reaching <code>'?'</code> all the new rooms still have <code>'?'</code>, most likely because <code>(char) ('?' + 1)</code> will keep returning <code>'?'</code>.  Perhaps this is a bug with your version of Java.  What is your OS and JDK version?</p>\n"}],"owner":{"account_id":4361985,"reputation":11,"user_id":3558746,"display_name":"jburtson"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1639309235,"creation_date":1398137527,"question_id":23209866,"body_markdown":"This is my second semester at college and we&#39;ve learned about linkedLists (Nodes). I had an idea to do something like that for fun in java which is a Room class with 4 pointers to other Room objects: north, south, west, east, and every Room object also contains a char object, so I can keep track of it.\r\n\r\nMy main function asks for w/a/s/d input from scanner and then creates/points to the corresponding room, and fills each room with a char.\r\n\r\nHowever, for some reason, it runs out of heap space really quickly (like around when the chars reach &#39;?&#39;).\r\n\r\nHere&#39;s my code:\r\n\r\n    import java.util.*;\r\n    \r\n    public class Room {\r\n    \t// instance variables\r\n    \tprivate Room north, west, east, south;\r\n    \tprivate char object;\r\n    \tprivate static char counter = &#39; &#39;;\r\n    \r\n    \t// constructors\r\n    \tpublic Room() {\r\n    \t}\r\n    \r\n    \tpublic Room(char object) {\r\n    \t\tthis.object = object;\r\n    \t}\r\n    \r\n    \t// methods\r\n    \tpublic Room newRoomNorth() {\r\n    \t\tnorth = new Room();\r\n    \t\tnorth.south = this;\r\n    \t\treturn north;\r\n    \t}\r\n    \r\n    \tpublic Room newRoomWest() {\r\n    \t\twest = new Room();\r\n    \t\twest.east = this;\r\n    \t\treturn west;\r\n    \t}\r\n    \r\n    \tpublic Room newRoomEast() {\r\n    \t\teast = new Room();\r\n    \t\teast.west = this;\r\n    \t\treturn east;\r\n    \t}\r\n    \r\n    \tpublic Room newRoomSouth() {\r\n    \t\tsouth = new Room();\r\n    \t\tsouth.north = this;\r\n    \t\treturn south;\r\n    \t}\r\n    \r\n    \tpublic Room linkRoomNorth(Room linkedRoom) { // link a given room to given direction of this room, returns what room was overwritten (if any)\r\n    \t\tRoom overwritten = north;\r\n    \t\tnorth = linkedRoom;\r\n    \t\tnorth.south = this;\r\n    \t\treturn overwritten;\r\n    \t}\r\n    \r\n    \tpublic Room linkRoomWest(Room linkedRoom) {\r\n    \t\tRoom overwritten = west;\r\n    \t\twest = linkedRoom;\r\n    \t\twest.east = this;\r\n    \t\treturn overwritten;\r\n    \t}\r\n    \r\n    \tpublic Room linkRoomEast(Room linkedRoom) {\r\n    \t\tRoom overwritten = east;\r\n    \t\teast = linkedRoom;\r\n    \t\teast.west = this;\r\n    \t\treturn overwritten;\r\n    \t}\r\n    \r\n    \tpublic Room linkRoomSouth(Room linkedRoom) {\r\n    \t\tRoom overwritten = south;\r\n    \t\tsouth = linkedRoom;\r\n    \t\tsouth.north = this;\r\n    \t\treturn overwritten;\r\n    \t}\r\n    \r\n    \tpublic Room getRoomNorth() {\r\n    \t\treturn this.north;\r\n    \t}\r\n    \r\n    \tpublic Room getRoomWest() {\r\n    \t\treturn this.west;\r\n    \t}\r\n    \r\n    \tpublic Room getRoomEast() {\r\n    \t\treturn this.east;\r\n    \t}\r\n    \r\n    \tpublic Room getRoomSouth() {\r\n    \t\treturn this.south;\r\n    \t}\r\n    \r\n    \tpublic char getObject() {\r\n    \t\treturn this.object;\r\n    \t}\r\n    \r\n    \tpublic void setObject(char object) {\r\n    \t\tthis.object = object;\r\n    \t}\r\n    \r\n    \tpublic void fill() { // puts a character as object\r\n    \t\tthis.setObject(counter);\r\n    \t\tcounter = (char) (counter + 1);\r\n    \t}\r\n    \r\n    \t// main\r\n    \tpublic static void main(String[] args) {\r\n    \t\tScanner scan = new Scanner(System.in);\r\n    \t\tString input = &quot;&quot;;\r\n    \t\tRoom currentRoom = new Room(&#39;&#39;);\r\n    \t\twhile (!input.equalsIgnoreCase(&quot;exit&quot;)) {\r\n    \t\t\tSystem.out.println(&quot;This room&#39;s treasure is: &quot; + currentRoom.getObject());\r\n    \t\t\tSystem.out.println(&quot;Which way? (w/a/s/d)&quot;);\r\n    \t\t\tinput = scan.next();\r\n    \t\t\tswitch (input.charAt(0)) {\r\n    \t\t\t\tcase &#39;w&#39;:\r\n    \t\t\t\t\tif (currentRoom.getRoomNorth() == null) {\r\n    \t\t\t\t\t\tcurrentRoom = currentRoom.newRoomNorth();\r\n    \t\t\t\t\t\tcurrentRoom.fill();\r\n    \t\t\t\t\t} else {\r\n    \t\t\t\t\t\tcurrentRoom = currentRoom.getRoomNorth();\r\n    \t\t\t\t\t}\r\n    \t\t\t\t\tbreak;\r\n    \t\t\t\tcase &#39;a&#39;:\r\n    \t\t\t\t\tif (currentRoom.getRoomWest() == null) {\r\n    \t\t\t\t\t\tcurrentRoom = currentRoom.newRoomWest();\r\n    \t\t\t\t\t\tcurrentRoom.fill();\r\n    \t\t\t\t\t} else {\r\n    \t\t\t\t\t\tcurrentRoom = currentRoom.getRoomWest();\r\n    \t\t\t\t\t}\r\n    \t\t\t\t\tbreak;\r\n    \t\t\t\tcase &#39;d&#39;:\r\n    \t\t\t\t\tif (currentRoom.getRoomEast() == null) {\r\n    \t\t\t\t\t\tcurrentRoom = currentRoom.newRoomEast();\r\n    \t\t\t\t\t\tcurrentRoom.fill();\r\n    \t\t\t\t\t} else {\r\n    \t\t\t\t\t\tcurrentRoom = currentRoom.getRoomEast();\r\n    \t\t\t\t\t}\r\n    \t\t\t\t\tbreak;\r\n    \t\t\t\tcase &#39;s&#39;:\r\n    \t\t\t\t\tif (currentRoom.getRoomSouth() == null) {\r\n    \t\t\t\t\t\tcurrentRoom = currentRoom.newRoomSouth();\r\n    \t\t\t\t\t\tcurrentRoom.fill();\r\n    \t\t\t\t\t} else {\r\n    \t\t\t\t\t\tcurrentRoom = currentRoom.getRoomSouth();\r\n    \t\t\t\t\t}\r\n    \t\t\t\t\tbreak;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    } \r\n\r\n  ","title":"I&#39;ve made a class for fun, but it runs out of heap space really quickly?","body":"<p>This is my second semester at college and we've learned about linkedLists (Nodes). I had an idea to do something like that for fun in java which is a Room class with 4 pointers to other Room objects: north, south, west, east, and every Room object also contains a char object, so I can keep track of it.</p>\n\n<p>My main function asks for w/a/s/d input from scanner and then creates/points to the corresponding room, and fills each room with a char.</p>\n\n<p>However, for some reason, it runs out of heap space really quickly (like around when the chars reach '?').</p>\n\n<p>Here's my code:</p>\n\n<pre><code>import java.util.*;\n\npublic class Room {\n    // instance variables\n    private Room north, west, east, south;\n    private char object;\n    private static char counter = ' ';\n\n    // constructors\n    public Room() {\n    }\n\n    public Room(char object) {\n        this.object = object;\n    }\n\n    // methods\n    public Room newRoomNorth() {\n        north = new Room();\n        north.south = this;\n        return north;\n    }\n\n    public Room newRoomWest() {\n        west = new Room();\n        west.east = this;\n        return west;\n    }\n\n    public Room newRoomEast() {\n        east = new Room();\n        east.west = this;\n        return east;\n    }\n\n    public Room newRoomSouth() {\n        south = new Room();\n        south.north = this;\n        return south;\n    }\n\n    public Room linkRoomNorth(Room linkedRoom) { // link a given room to given direction of this room, returns what room was overwritten (if any)\n        Room overwritten = north;\n        north = linkedRoom;\n        north.south = this;\n        return overwritten;\n    }\n\n    public Room linkRoomWest(Room linkedRoom) {\n        Room overwritten = west;\n        west = linkedRoom;\n        west.east = this;\n        return overwritten;\n    }\n\n    public Room linkRoomEast(Room linkedRoom) {\n        Room overwritten = east;\n        east = linkedRoom;\n        east.west = this;\n        return overwritten;\n    }\n\n    public Room linkRoomSouth(Room linkedRoom) {\n        Room overwritten = south;\n        south = linkedRoom;\n        south.north = this;\n        return overwritten;\n    }\n\n    public Room getRoomNorth() {\n        return this.north;\n    }\n\n    public Room getRoomWest() {\n        return this.west;\n    }\n\n    public Room getRoomEast() {\n        return this.east;\n    }\n\n    public Room getRoomSouth() {\n        return this.south;\n    }\n\n    public char getObject() {\n        return this.object;\n    }\n\n    public void setObject(char object) {\n        this.object = object;\n    }\n\n    public void fill() { // puts a character as object\n        this.setObject(counter);\n        counter = (char) (counter + 1);\n    }\n\n    // main\n    public static void main(String[] args) {\n        Scanner scan = new Scanner(System.in);\n        String input = \"\";\n        Room currentRoom = new Room('');\n        while (!input.equalsIgnoreCase(\"exit\")) {\n            System.out.println(\"This room's treasure is: \" + currentRoom.getObject());\n            System.out.println(\"Which way? (w/a/s/d)\");\n            input = scan.next();\n            switch (input.charAt(0)) {\n                case 'w':\n                    if (currentRoom.getRoomNorth() == null) {\n                        currentRoom = currentRoom.newRoomNorth();\n                        currentRoom.fill();\n                    } else {\n                        currentRoom = currentRoom.getRoomNorth();\n                    }\n                    break;\n                case 'a':\n                    if (currentRoom.getRoomWest() == null) {\n                        currentRoom = currentRoom.newRoomWest();\n                        currentRoom.fill();\n                    } else {\n                        currentRoom = currentRoom.getRoomWest();\n                    }\n                    break;\n                case 'd':\n                    if (currentRoom.getRoomEast() == null) {\n                        currentRoom = currentRoom.newRoomEast();\n                        currentRoom.fill();\n                    } else {\n                        currentRoom = currentRoom.getRoomEast();\n                    }\n                    break;\n                case 's':\n                    if (currentRoom.getRoomSouth() == null) {\n                        currentRoom = currentRoom.newRoomSouth();\n                        currentRoom.fill();\n                    } else {\n                        currentRoom = currentRoom.getRoomSouth();\n                    }\n                    break;\n            }\n        }\n    }\n} \n</code></pre>\n"},{"tags":["java","regex","nested-lists"],"comments":[{"owner":{"account_id":2094057,"reputation":506072,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"score":1,"creation_date":1639299475,"post_id":70322102,"comment_id":124309504,"body_markdown":"Please include the definition for the list of lists.","body":"Please include the definition for the list of lists."}],"answers":[{"tags":[],"owner":{"account_id":2075909,"reputation":2169,"user_id":1849261,"accept_rate":78,"display_name":"4EACH"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1639299915,"creation_date":1639299915,"answer_id":70322228,"question_id":70322102,"body_markdown":"If you need to flat your lists\r\n\r\n    private static String flatLists(List&lt;List&lt;String&gt;&gt; asList) {\r\n            return asList.stream()\r\n                    .flatMap(List::stream)\r\n                    .filter(s -&gt; !s.equals(&quot; &quot;))\r\n                    .collect(Collectors.joining());\r\n        }\r\n\r\n**OUTPUT:**\r\n\r\n    PAHNAPLSIIGYIR","title":"How to only remove one character if there are two consecutive characters in the string (using regex)","body":"<p>If you need to flat your lists</p>\n<pre><code>private static String flatLists(List&lt;List&lt;String&gt;&gt; asList) {\n        return asList.stream()\n                .flatMap(List::stream)\n                .filter(s -&gt; !s.equals(&quot; &quot;))\n                .collect(Collectors.joining());\n    }\n</code></pre>\n<p><strong>OUTPUT:</strong></p>\n<pre><code>PAHNAPLSIIGYIR\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23526140,"reputation":348,"user_id":17572646,"display_name":"Fabio Scagliola"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639304943,"creation_date":1639304943,"answer_id":70322717,"question_id":70322102,"body_markdown":"I am not sure I fully understood your question \r\n\r\nHowever, if your goal is to remove all the commas, spaces, and square brackets, then the following regular expression should work \r\n\r\n```regex\r\n[\\[\\],\\s]\r\n```\r\n\r\nYou can test it here \r\n\r\nhttps://regex101.com/r/j0OIOH/1\r\n\r\n","title":"How to only remove one character if there are two consecutive characters in the string (using regex)","body":"<p>I am not sure I fully understood your question</p>\n<p>However, if your goal is to remove all the commas, spaces, and square brackets, then the following regular expression should work</p>\n<pre class=\"lang-regex prettyprint-override\"><code>[\\[\\],\\s]\n</code></pre>\n<p>You can test it here</p>\n<p><a href=\"https://regex101.com/r/j0OIOH/1\" rel=\"nofollow noreferrer\">https://regex101.com/r/j0OIOH/1</a></p>\n"}],"owner":{"account_id":9446866,"reputation":79,"user_id":7025262,"display_name":"Devendra Kumar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":124,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1639309211,"creation_date":1639298466,"question_id":70322102,"body_markdown":"\r\n\r\nI have a list of list of Characters like this : [[P, A, H, N, ,], [A, P, L, S, I, I, G, ,], [Y, I, R]].\r\n\r\nOutput *expected* as a *String* of every character in the list of list of Characters\r\n\r\n&gt;Output expected: &quot;**PAHN,APLSIIG,YIR&quot;.**\r\n\r\n\r\n&gt;**My code**\r\n```\r\nString str = &quot;&quot;;\r\n```\r\n\r\n```\r\n//code#1\r\nfor(int j=0; j&lt;list.size(); j++){\r\n   str += Arrays.toString(list.get(j).toArray(new Character[0])).replaceAll(&quot;[\\\\]\\\\[,]&quot;, \r\n   &quot;&quot;).replaceAll(&quot; &quot;, &quot;&quot;);\r\n}\r\n\r\n```\r\n**str in code#1** :  &quot;PAHNAPLSIIGYIR&quot;\r\n\r\n&gt; *List to a String*\r\n\r\n`String str = &quot;&quot;;`\r\n```\r\n//code#2, converts a list into String\r\nfor(int j=0; j&lt;list.size(); j++){\r\n   str += Arrays.toString(list.get(j).toArray(new Character[0])).replaceAll(&quot; &quot;, &quot;&quot;);\r\n}\r\n```\r\n\r\n**str in code#2** : [P,A,H,N,,][A,P,L,S,I,I,G,,][Y,I,R]\r\n\r\nCheck this code to understand better:\r\n[https://onecompiler.com/java/3xm55ywr6][1]\r\n\r\n&gt;*My Problem*\r\n\r\nString in code#2 have two consecutive &#39;,&#39; characters, as can be seen after characters &#39;N&#39; and &#39;G&#39;, how to just replace only one &#39;,&#39; character if there are two &#39;,&#39; coming together???\r\n","title":"How to only remove one character if there are two consecutive characters in the string (using regex)","body":"<p>I have a list of list of Characters like this : [[P, A, H, N, ,], [A, P, L, S, I, I, G, ,], [Y, I, R]].</p>\n<p>Output <em>expected</em> as a <em>String</em> of every character in the list of list of Characters</p>\n<blockquote>\n<p>Output expected: &quot;<strong>PAHN,APLSIIG,YIR&quot;.</strong></p>\n</blockquote>\n<blockquote>\n<p><strong>My code</strong></p>\n</blockquote>\n<pre><code>String str = &quot;&quot;;\n</code></pre>\n<pre><code>//code#1\nfor(int j=0; j&lt;list.size(); j++){\n   str += Arrays.toString(list.get(j).toArray(new Character[0])).replaceAll(&quot;[\\\\]\\\\[,]&quot;, \n   &quot;&quot;).replaceAll(&quot; &quot;, &quot;&quot;);\n}\n\n</code></pre>\n<p><strong>str in code#1</strong> :  &quot;PAHNAPLSIIGYIR&quot;</p>\n<blockquote>\n<p><em>List to a String</em></p>\n</blockquote>\n<p><code>String str = &quot;&quot;;</code></p>\n<pre><code>//code#2, converts a list into String\nfor(int j=0; j&lt;list.size(); j++){\n   str += Arrays.toString(list.get(j).toArray(new Character[0])).replaceAll(&quot; &quot;, &quot;&quot;);\n}\n</code></pre>\n<p><strong>str in code#2</strong> : [P,A,H,N,,][A,P,L,S,I,I,G,,][Y,I,R]</p>\n<p>Check this code to understand better:\n[https://onecompiler.com/java/3xm55ywr6][1]</p>\n<blockquote>\n<p><em>My Problem</em></p>\n</blockquote>\n<p>String in code#2 have two consecutive ',' characters, as can be seen after characters 'N' and 'G', how to just replace only one ',' character if there are two ',' coming together???</p>\n"},{"tags":["java","heap-memory","gzip","hornetq","corrupt"],"answers":[{"tags":[],"owner":{"account_id":1145201,"reputation":327,"user_id":1128145,"accept_rate":62,"display_name":"pan40"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1402647204,"creation_date":1402647204,"answer_id":24200664,"question_id":24200663,"body_markdown":"The Problem is in the org.hornetq.utils.DeflaterReader, where byte[] readBuffer = new byte[2 * len]; So you have to be careful with setting the size of the property minLargeMessageSize, because you can get a Java heap space!","title":"HornetQ Corrupt GZIP trailer","body":"<p>The Problem is in the org.hornetq.utils.DeflaterReader, where byte[] readBuffer = new byte[2 * len]; So you have to be careful with setting the size of the property minLargeMessageSize, because you can get a Java heap space!</p>\n"}],"owner":{"account_id":1145201,"reputation":327,"user_id":1128145,"accept_rate":62,"display_name":"pan40"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":409,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1639309197,"creation_date":1402647204,"question_id":24200663,"body_markdown":"I have a problem with Hornetq 2.3.15 \r\njava.util.zip.ZipException: Corrupt GZIP trailer\r\nwith org.apache.cxf.interceptor.Fault: Java heap space\r\n\r\nAny Idea?\r\n","title":"HornetQ Corrupt GZIP trailer","body":"<p>I have a problem with Hornetq 2.3.15 \njava.util.zip.ZipException: Corrupt GZIP trailer\nwith org.apache.cxf.interceptor.Fault: Java heap space</p>\n\n<p>Any Idea?</p>\n"},{"tags":["java","oop","inheritance","heap-memory"],"comments":[{"owner":{"account_id":2640441,"reputation":10364,"user_id":2284221,"accept_rate":81,"display_name":"Patrick Collins"},"score":0,"creation_date":1407799614,"post_id":25253961,"comment_id":39346809,"body_markdown":"Are the classes in question actually this simple?","body":"Are the classes in question actually this simple?"},{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":6,"creation_date":1407799666,"post_id":25253961,"comment_id":39346822,"body_markdown":"Maybe. As a java developer you aren&#39;t responsible for memory management.","body":"Maybe. As a java developer you aren&#39;t responsible for memory management."},{"owner":{"account_id":1075641,"reputation":10362,"user_id":1073868,"accept_rate":88,"display_name":"Dan"},"score":2,"creation_date":1407799772,"post_id":25253961,"comment_id":39346859,"body_markdown":"I don&#39;t think there would be any discernible difference, or, at least not one you should be wary of. Methods (as far as I know?) are referenced, by, well, reference, so they would be shared across all instances of the same class (not so sure about inheritance). Fields might be a cause for concern but really if this is something you worry about in terms of performance perhaps java isn&#39;t the language for you :^)","body":"I don&#39;t think there would be any discernible difference, or, at least not one you should be wary of. Methods (as far as I know?) are referenced, by, well, reference, so they would be shared across all instances of the same class (not so sure about inheritance). Fields might be a cause for concern but really if this is something you worry about in terms of performance perhaps java isn&#39;t the language for you :^)"}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1407801960,"creation_date":1407801640,"answer_id":25254262,"question_id":25253961,"body_markdown":"Looking at your examples:\r\n\r\n - Scenario #1: there should be no difference in size between an instance of `A` and an instance of `B`\r\n\r\n - Scenario #2: an instance of `B` *may* occupy more space than an instance of `A`, but it depends on word alignment, and on whether you are running a 32 or 64 bit JVM and/or have &quot;compressed oops&quot; enabled.  In short, the answer is JVM specific.\r\n\r\nIn general subclassing *per se* does not entail extra memory per instance, but extra fields *may* do, depending on how the JVM lays out the instance fields in a heap node.\r\n\r\nBut I concur with the comments.  A Java application programmer shouldn&#39;t need to concern him / herself with this kind of thing.  The difference in size is likely to be so small as to be irrelevant ... unless you have to create *millions* of these objects.  And even then, there are probably more important things to worry about.","title":"Does a subclass take more memory than a superclass","body":"<p>Looking at your examples:</p>\n\n<ul>\n<li><p>Scenario #1: there should be no difference in size between an instance of <code>A</code> and an instance of <code>B</code></p></li>\n<li><p>Scenario #2: an instance of <code>B</code> <em>may</em> occupy more space than an instance of <code>A</code>, but it depends on word alignment, and on whether you are running a 32 or 64 bit JVM and/or have \"compressed oops\" enabled.  In short, the answer is JVM specific.</p></li>\n</ul>\n\n<p>In general subclassing <em>per se</em> does not entail extra memory per instance, but extra fields <em>may</em> do, depending on how the JVM lays out the instance fields in a heap node.</p>\n\n<p>But I concur with the comments.  A Java application programmer shouldn't need to concern him / herself with this kind of thing.  The difference in size is likely to be so small as to be irrelevant ... unless you have to create <em>millions</em> of these objects.  And even then, there are probably more important things to worry about.</p>\n"}],"owner":{"account_id":2808346,"reputation":1325,"user_id":2415118,"accept_rate":59,"display_name":"abden003"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":794,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":25254262,"answer_count":1,"score":4,"last_activity_date":1639309019,"creation_date":1407799511,"question_id":25253961,"body_markdown":"Does an object initiated with class B which inherits class A take up more memory in the heap than an object initiated with class A.  Below are two scenarios I was considering:\r\n\r\nScenario 1:\r\n\r\n    class A {\r\n      String name;\r\n    }\r\n    \r\n    class B extends A {\r\n    \r\n    }\r\n\r\nScenario 2:\r\n\r\n    class A {\r\n      String name;\r\n    }\r\n    \r\n    class B extends A {\r\n      int age;\r\n    }","title":"Does a subclass take more memory than a superclass","body":"<p>Does an object initiated with class B which inherits class A take up more memory in the heap than an object initiated with class A.  Below are two scenarios I was considering:</p>\n\n<p>Scenario 1:</p>\n\n<pre><code>class A {\n  String name;\n}\n\nclass B extends A {\n\n}\n</code></pre>\n\n<p>Scenario 2:</p>\n\n<pre><code>class A {\n  String name;\n}\n\nclass B extends A {\n  int age;\n}\n</code></pre>\n"},{"tags":["java","object","neo4j","graph-databases"],"answers":[{"tags":[],"owner":{"account_id":29255,"reputation":1583,"user_id":78921,"display_name":"thobe"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1409669189,"creation_date":1409669189,"answer_id":25626224,"question_id":25612552,"body_markdown":"The `Node` object is not what Neo4j stores in the &quot;object cache&quot;, so you are not going to gain much insight into the caching of Neo4j by looking at those instances. The implementations of `Node` that Neo4j gives you are instances of a class called [`NodeProxy`](https://github.com/neo4j/neo4j/blob/1.9-maint/community/kernel/src/main/java/org/neo4j/kernel/impl/core/NodeProxy.java), and are as small as they can possibly be (two fields: internal id and reference to the database). These just serve as your handle of the node for performing operations around that node in the database. The objects stored in the &quot;object cache&quot; are instances of a class called [`NodeImpl`](https://github.com/neo4j/neo4j/blob/1.9-maint/community/kernel/src/main/java/org/neo4j/kernel/impl/core/NodeImpl.java) (and despite the name they do not implement the `Node` interface). The `NodeImpl` objects have the shape that&#39;s outlined on the 15th slide (with page number 9 within the slide) in that presentation. Well, it roughly has that shape, Neo4j has evolved since I made those slides.\r\n\r\nNeo4j evolving has also changed the number of bytes that node records occupy on disk. Neo4j 2.0 and later have slightly larger node records than what those slides present. If you are interested in looking at the layout of those records, you should look at the [`NodeRecord`](https://github.com/neo4j/neo4j/blob/1.9-maint/community/kernel/src/main/java/org/neo4j/kernel/impl/nioneo/store/NodeRecord.java) class, then start from [`NodeStore`](https://github.com/neo4j/neo4j/blob/1.9-maint/community/kernel/src/main/java/org/neo4j/kernel/impl/nioneo/store/NodeStore.java) class and &quot;downwards&quot; into its dependencies to find the memory mapping.\r\n\r\nBesides looking at the wrong object for seeing the difference between different cache approaches in Neo4j your approach of measuring is flawed. Comparing the addresses of objects does not tell you anything about the size of those objects. The JVM makes no guarantees that two objects allocated one after the other (in time) will reside adjacently in memory, and even if the JVM did utilise such an allocation policy, Neo4j might have allocated multiple objects in between the allocations of the two objects you are comparing. Then there is the garbage collector, which might have moved the objects around in between you getting the address of one object and you getting the address of the next object. Thus looking at the addresses of objects in Java is pretty much never useful for anything. For a better approach at measuring the size of an object in Java, take a look at the [Java Object Layout utility](https://github.com/shipilev/java-object-layout), or use the [`Instrumentation.getObjectSize(...)` method](http://docs.oracle.com/javase/7/docs/api/java/lang/instrument/Instrumentation.html#getObjectSize(java.lang.Object)) from a Java agent.\r\n\r\nTo answer you questions as stated:\r\n\r\n1. The sizes of the node objects are not changing, their addresses are not guaranteed to be the same in between runs. As per my description above you cannot rely on object address to compute object size.\r\n\r\n2. Since you are looking at `NodeProxy` objects they will look the same regardless of what caching strategy Neo4j uses. In order to look at the `NodeImpl` objects you have to dig quite deep into the internals of Neo4j. Since it looks like you are using Neo4j 1.9 you would cast the `GraphDatabaseService` instance that you have to `GraphDatabaseAPI` (an interface that is internal to the implementation) then invoke the `getNodeManager()` method on that object. from the `NodeManager` you can call `getNodeIfCached( node.getId() )` to get a `NodeImpl` object. Please note that this API will not be compatible between versions of Neo4j, and using it is one of those &quot;warranty void if seal broken&quot; kind of situations...\r\n\r\n3. Look at the source code for `NodeImpl` instead. As to when and how data is brought into cache, Neo4j tries to be lazy about that, only loading the data you use. If you are getting the relationships of a node, those will be loaded into the cache, and if you are getting properties, those will be loaded into the cache. If you only get relationships, the properties will never be loaded and vice versa.","title":"Understanding of Neo4j object cache","body":"<p>The <code>Node</code> object is not what Neo4j stores in the \"object cache\", so you are not going to gain much insight into the caching of Neo4j by looking at those instances. The implementations of <code>Node</code> that Neo4j gives you are instances of a class called <a href=\"https://github.com/neo4j/neo4j/blob/1.9-maint/community/kernel/src/main/java/org/neo4j/kernel/impl/core/NodeProxy.java\" rel=\"nofollow\"><code>NodeProxy</code></a>, and are as small as they can possibly be (two fields: internal id and reference to the database). These just serve as your handle of the node for performing operations around that node in the database. The objects stored in the \"object cache\" are instances of a class called <a href=\"https://github.com/neo4j/neo4j/blob/1.9-maint/community/kernel/src/main/java/org/neo4j/kernel/impl/core/NodeImpl.java\" rel=\"nofollow\"><code>NodeImpl</code></a> (and despite the name they do not implement the <code>Node</code> interface). The <code>NodeImpl</code> objects have the shape that's outlined on the 15th slide (with page number 9 within the slide) in that presentation. Well, it roughly has that shape, Neo4j has evolved since I made those slides.</p>\n\n<p>Neo4j evolving has also changed the number of bytes that node records occupy on disk. Neo4j 2.0 and later have slightly larger node records than what those slides present. If you are interested in looking at the layout of those records, you should look at the <a href=\"https://github.com/neo4j/neo4j/blob/1.9-maint/community/kernel/src/main/java/org/neo4j/kernel/impl/nioneo/store/NodeRecord.java\" rel=\"nofollow\"><code>NodeRecord</code></a> class, then start from <a href=\"https://github.com/neo4j/neo4j/blob/1.9-maint/community/kernel/src/main/java/org/neo4j/kernel/impl/nioneo/store/NodeStore.java\" rel=\"nofollow\"><code>NodeStore</code></a> class and \"downwards\" into its dependencies to find the memory mapping.</p>\n\n<p>Besides looking at the wrong object for seeing the difference between different cache approaches in Neo4j your approach of measuring is flawed. Comparing the addresses of objects does not tell you anything about the size of those objects. The JVM makes no guarantees that two objects allocated one after the other (in time) will reside adjacently in memory, and even if the JVM did utilise such an allocation policy, Neo4j might have allocated multiple objects in between the allocations of the two objects you are comparing. Then there is the garbage collector, which might have moved the objects around in between you getting the address of one object and you getting the address of the next object. Thus looking at the addresses of objects in Java is pretty much never useful for anything. For a better approach at measuring the size of an object in Java, take a look at the <a href=\"https://github.com/shipilev/java-object-layout\" rel=\"nofollow\">Java Object Layout utility</a>, or use the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/instrument/Instrumentation.html#getObjectSize(java.lang.Object)\" rel=\"nofollow\"><code>Instrumentation.getObjectSize(...)</code> method</a> from a Java agent.</p>\n\n<p>To answer you questions as stated:</p>\n\n<ol>\n<li><p>The sizes of the node objects are not changing, their addresses are not guaranteed to be the same in between runs. As per my description above you cannot rely on object address to compute object size.</p></li>\n<li><p>Since you are looking at <code>NodeProxy</code> objects they will look the same regardless of what caching strategy Neo4j uses. In order to look at the <code>NodeImpl</code> objects you have to dig quite deep into the internals of Neo4j. Since it looks like you are using Neo4j 1.9 you would cast the <code>GraphDatabaseService</code> instance that you have to <code>GraphDatabaseAPI</code> (an interface that is internal to the implementation) then invoke the <code>getNodeManager()</code> method on that object. from the <code>NodeManager</code> you can call <code>getNodeIfCached( node.getId() )</code> to get a <code>NodeImpl</code> object. Please note that this API will not be compatible between versions of Neo4j, and using it is one of those \"warranty void if seal broken\" kind of situations...</p></li>\n<li><p>Look at the source code for <code>NodeImpl</code> instead. As to when and how data is brought into cache, Neo4j tries to be lazy about that, only loading the data you use. If you are getting the relationships of a node, those will be loaded into the cache, and if you are getting properties, those will be loaded into the cache. If you only get relationships, the properties will never be loaded and vice versa.</p></li>\n</ol>\n"}],"owner":{"account_id":3598929,"reputation":378,"user_id":3002734,"accept_rate":100,"display_name":"jer_yin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1259,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":25626224,"answer_count":1,"score":3,"last_activity_date":1639309003,"creation_date":1409603407,"question_id":25612552,"body_markdown":"I&#39;m trying to understand Neo4j object cache by some investigation into it. My first impression of Object cache come from the slides in this link:\r\nhttp://www.slideshare.net/thobe/an-overview-of-neo4j-internals\r\n\r\nSpecifically the Node/Relationship object in cache should look like slide 9 or 15/42. To verify this, I wrote a simple server script using existing graph database contents. The way I do it is trying to look into the starting virtual address of the node/relationship object using sun.misc.Unsafe. The program for obtaining virtual address is from the following link:\r\nhttps://stackoverflow.com/questions/7060215/how-can-i-get-the-memory-location-of-a-object-in-java\r\n\r\n    public static long addressOf(Object o) throws Exception {\r\n\t\tObject[] array = new Object[] { o };\r\n\r\n\t\tlong baseOffset = unsafe.arrayBaseOffset(Object[].class);\r\n\t\tint addressSize = unsafe.addressSize();\r\n\t\tlong objectAddress;\r\n\t\tswitch (addressSize) {\r\n\t\tcase 4:\r\n\t\t\tobjectAddress = unsafe.getInt(array, baseOffset);\r\n\t\t\tbreak;\r\n\t\tcase 8:\r\n\t\t    objectAddress = unsafe.getLong(array, baseOffset);\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tthrow new Error(&quot;unsupported address size: &quot; + addressSize);\r\n\t\t}\r\n\t\treturn (objectAddress);\r\n\t}\r\n\r\nAnd in the neo4j server script (My main() class), I get node address by id and print out the address in the following way:\r\n\r\n    void checkAddr(){\r\n    \tnodeAddr(0);\r\n    \tnodeAddr(1);\r\n    \tnodeAddr(2);\r\n    }\r\n\r\n    void nodeAddr(int n){\r\n        Node oneNode = graphDb.getNodeById(n);\r\n\t\tNode[] array1 = {oneNode};\r\n\r\n\t\ttry {\r\n\t\t\tlong address = UnsafeUtil.addressOf(array1);\r\n\t        System.out.println(&quot;Addess: &quot; + address);\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n    }\r\n\r\nTo begin with, I tried with Soft cache provider, which is the default case. The addresses get printed out for node object 0, 1 and 2 is:\r\n\r\n&gt; Addess: 4168500044\r\n&gt; Addess: 4168502383\r\n&gt; Addess: 4168502753\r\n\r\nTherefore, Using second address - first address and third address - second address, I can know exactly how much space a node is taking. In this case, first node object takes 2339B and second take 370B.\r\n\r\nThen, to see the impact of disabling object cache, I does the setting with NoCacheProvider:\r\n\r\n&gt; setConfig(GraphDatabaseSettings.cache_type,NoCacheProvider.NAME)\r\n\r\nThe addresses get printed out is:\r\n\r\n&gt; Addess: 4168488391\r\n&gt; Addess: 4168490708\r\n&gt; Addess: 4168491056\r\n\r\nThe offset, calculated similarly as in first case is: first node object takes 2317B and second takes 348B.\r\n\r\n\r\nHere comes my problem: \r\n\r\n1. Since I&#39;m using the same graph and doing read only queries, why is the size of the same node object changing?\r\n\r\n2. When I disabled the object cache, why is the address offset look the same as if there is object cache exists? For example, in the node store file, a single node takes 9 bytes, which is not the case in my experiment. If the way I&#39;m getting node object is problematic, how can I obtain virtual address in a correct way? And is there any way I can know specifically where does the mmap node file resides in memory?\r\n\r\n3. How could I know exactly what is stored in a node object. When I looked at Node.class at this link:\r\nhttps://github.com/neo4j/neo4j/blob/1.9.8/community/kernel/src/main/java/org/neo4j/graphdb/Node.java\r\nIt doesn&#39;t seem that a node object should look the same way as it is in the presentation slides. Rather just a group of functions used by node object. Further is a node object brought into memory as a whole at once in both no-object-cache and with-object-cache occasion? ","title":"Understanding of Neo4j object cache","body":"<p>I'm trying to understand Neo4j object cache by some investigation into it. My first impression of Object cache come from the slides in this link:\n<a href=\"http://www.slideshare.net/thobe/an-overview-of-neo4j-internals\" rel=\"nofollow\">http://www.slideshare.net/thobe/an-overview-of-neo4j-internals</a></p>\n\n<p>Specifically the Node/Relationship object in cache should look like slide 9 or 15/42. To verify this, I wrote a simple server script using existing graph database contents. The way I do it is trying to look into the starting virtual address of the node/relationship object using sun.misc.Unsafe. The program for obtaining virtual address is from the following link:\n<a href=\"https://stackoverflow.com/questions/7060215/how-can-i-get-the-memory-location-of-a-object-in-java\">How can I get the memory location of a object in java?</a></p>\n\n<pre><code>public static long addressOf(Object o) throws Exception {\n    Object[] array = new Object[] { o };\n\n    long baseOffset = unsafe.arrayBaseOffset(Object[].class);\n    int addressSize = unsafe.addressSize();\n    long objectAddress;\n    switch (addressSize) {\n    case 4:\n        objectAddress = unsafe.getInt(array, baseOffset);\n        break;\n    case 8:\n        objectAddress = unsafe.getLong(array, baseOffset);\n        break;\n    default:\n        throw new Error(\"unsupported address size: \" + addressSize);\n    }\n    return (objectAddress);\n}\n</code></pre>\n\n<p>And in the neo4j server script (My main() class), I get node address by id and print out the address in the following way:</p>\n\n<pre><code>void checkAddr(){\n    nodeAddr(0);\n    nodeAddr(1);\n    nodeAddr(2);\n}\n\nvoid nodeAddr(int n){\n    Node oneNode = graphDb.getNodeById(n);\n    Node[] array1 = {oneNode};\n\n    try {\n        long address = UnsafeUtil.addressOf(array1);\n        System.out.println(\"Addess: \" + address);\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n\n<p>To begin with, I tried with Soft cache provider, which is the default case. The addresses get printed out for node object 0, 1 and 2 is:</p>\n\n<blockquote>\n  <p>Addess: 4168500044\n  Addess: 4168502383\n  Addess: 4168502753</p>\n</blockquote>\n\n<p>Therefore, Using second address - first address and third address - second address, I can know exactly how much space a node is taking. In this case, first node object takes 2339B and second take 370B.</p>\n\n<p>Then, to see the impact of disabling object cache, I does the setting with NoCacheProvider:</p>\n\n<blockquote>\n  <p>setConfig(GraphDatabaseSettings.cache_type,NoCacheProvider.NAME)</p>\n</blockquote>\n\n<p>The addresses get printed out is:</p>\n\n<blockquote>\n  <p>Addess: 4168488391\n  Addess: 4168490708\n  Addess: 4168491056</p>\n</blockquote>\n\n<p>The offset, calculated similarly as in first case is: first node object takes 2317B and second takes 348B.</p>\n\n<p>Here comes my problem: </p>\n\n<ol>\n<li><p>Since I'm using the same graph and doing read only queries, why is the size of the same node object changing?</p></li>\n<li><p>When I disabled the object cache, why is the address offset look the same as if there is object cache exists? For example, in the node store file, a single node takes 9 bytes, which is not the case in my experiment. If the way I'm getting node object is problematic, how can I obtain virtual address in a correct way? And is there any way I can know specifically where does the mmap node file resides in memory?</p></li>\n<li><p>How could I know exactly what is stored in a node object. When I looked at Node.class at this link:\n<a href=\"https://github.com/neo4j/neo4j/blob/1.9.8/community/kernel/src/main/java/org/neo4j/graphdb/Node.java\" rel=\"nofollow\">https://github.com/neo4j/neo4j/blob/1.9.8/community/kernel/src/main/java/org/neo4j/graphdb/Node.java</a>\nIt doesn't seem that a node object should look the same way as it is in the presentation slides. Rather just a group of functions used by node object. Further is a node object brought into memory as a whole at once in both no-object-cache and with-object-cache occasion? </p></li>\n</ol>\n"},{"tags":["java","optimization","google-bigquery","heap-memory"],"comments":[{"owner":{"account_id":275035,"reputation":10886,"user_id":567650,"accept_rate":86,"display_name":"jwd"},"score":0,"creation_date":1409850870,"post_id":25671326,"comment_id":40118052,"body_markdown":"What makes you think that the old entries should be collected just because they&#39;re not referenced anymore? The Java GC doesn&#39;t make very many guarantees in this area.","body":"What makes you think that the old entries should be collected just because they&#39;re not referenced anymore? The Java GC doesn&#39;t make very many guarantees in this area."},{"owner":{"account_id":3968276,"reputation":657,"user_id":3273514,"accept_rate":42,"display_name":"East2West"},"score":0,"creation_date":1409851205,"post_id":25671326,"comment_id":40118206,"body_markdown":"The same piece of code for connection pooling is used for several other jdbc connections, mysql and vertica. We incorporated bigquery, we started having heap issue. What you suggest to ensure that the entries are collected?","body":"The same piece of code for connection pooling is used for several other jdbc connections, mysql and vertica. We incorporated bigquery, we started having heap issue. What you suggest to ensure that the entries are collected?"},{"owner":{"account_id":275035,"reputation":10886,"user_id":567650,"accept_rate":86,"display_name":"jwd"},"score":0,"creation_date":1409857827,"post_id":25671326,"comment_id":40121551,"body_markdown":"I don&#39;t know exactly what is eating your memory, but in general, if you want to ensure something is released, you should explicitly call some `close()` or `release()` method  whatever is appropriate for your object. Perhaps these things support AutoCloseable?","body":"I don&#39;t know exactly what is eating your memory, but in general, if you want to ensure something is released, you should explicitly call some <code>close()</code> or <code>release()</code> method  whatever is appropriate for your object. Perhaps these things support AutoCloseable?"},{"owner":{"account_id":3968276,"reputation":657,"user_id":3273514,"accept_rate":42,"display_name":"East2West"},"score":0,"creation_date":1409859440,"post_id":25671326,"comment_id":40122409,"body_markdown":"That&#39;s the problem, unfortunately bigquery api does not expose such method to destruct the object explicitly same as vertica, mysql, SQL server jdbc driver. Once you release the reference for those connections, they are being reclaimed.","body":"That&#39;s the problem, unfortunately bigquery api does not expose such method to destruct the object explicitly same as vertica, mysql, SQL server jdbc driver. Once you release the reference for those connections, they are being reclaimed."},{"owner":{"account_id":275035,"reputation":10886,"user_id":567650,"accept_rate":86,"display_name":"jwd"},"score":0,"creation_date":1409860360,"post_id":25671326,"comment_id":40122834,"body_markdown":"What exact class are you dealing with? I&#39;m looking at [BigQueryConnection](https://code.google.com/p/jaspersoft-bigquery-datasource/source/browse/trunk/js-bigquery-datasource/src/main/java/com/jaspersoft/bigquery/connection/BigQueryConnection.java?r=5#102), which has a `close()` method. (I don&#39;t really know anything about BigQuery though, FYI)","body":"What exact class are you dealing with? I&#39;m looking at <a href=\"https://code.google.com/p/jaspersoft-bigquery-datasource/source/browse/trunk/js-bigquery-datasource/src/main/java/com/jaspersoft/bigquery/connection/BigQueryConnection.java?r=5#102\" rel=\"nofollow noreferrer\">BigQueryConnection</a>, which has a <code>close()</code> method. (I don&#39;t really know anything about BigQuery though, FYI)"},{"owner":{"account_id":3968276,"reputation":657,"user_id":3273514,"accept_rate":42,"display_name":"East2West"},"score":0,"creation_date":1409867196,"post_id":25671326,"comment_id":40125821,"body_markdown":"Thank you jwd for the support and the link. They used the shutdown method of HttpTransport class and it does nothing :) \n  /**\n   * Default implementation does nothing, but subclasses may override to possibly release allocated\n   * system resources or close connections.\n\n  public void shutdown() throws IOException {\n  }","body":"Thank you jwd for the support and the link. They used the shutdown method of HttpTransport class and it does nothing :)    /**    * Default implementation does nothing, but subclasses may override to possibly release allocated    * system resources or close connections.    public void shutdown() throws IOException {   }"},{"owner":{"account_id":275035,"reputation":10886,"user_id":567650,"accept_rate":86,"display_name":"jwd"},"score":0,"creation_date":1409867902,"post_id":25671326,"comment_id":40126079,"body_markdown":"Interesting. I guess the next step would be to profile the app to see where the memory is going.","body":"Interesting. I guess the next step would be to profile the app to see where the memory is going."},{"owner":{"account_id":3968276,"reputation":657,"user_id":3273514,"accept_rate":42,"display_name":"East2West"},"score":0,"creation_date":1410201172,"post_id":25671326,"comment_id":40228141,"body_markdown":"Created a mock big query connection and pointed data streaming to that mock bigquery which does nothing. Heam usage stays below 200M however google big query connection is used, it goes up to 16gb in few days. This is just data streaming so expection is that big query should maintain much data in memory anyway. Any help is highly appreciated!","body":"Created a mock big query connection and pointed data streaming to that mock bigquery which does nothing. Heam usage stays below 200M however google big query connection is used, it goes up to 16gb in few days. This is just data streaming so expection is that big query should maintain much data in memory anyway. Any help is highly appreciated!"},{"owner":{"account_id":1810587,"reputation":1264,"user_id":1646741,"accept_rate":75,"display_name":"Sami Korhonen"},"score":0,"creation_date":1410214221,"post_id":25671326,"comment_id":40234380,"body_markdown":"What are you trying to accomplish with pooling bigquery connections? Most web containers actually do pooling for keep alive http connections without holding a reference to httpurlconnection","body":"What are you trying to accomplish with pooling bigquery connections? Most web containers actually do pooling for keep alive http connections without holding a reference to httpurlconnection"},{"owner":{"account_id":3968276,"reputation":657,"user_id":3273514,"accept_rate":42,"display_name":"East2West"},"score":0,"creation_date":1410297903,"post_id":25671326,"comment_id":40271339,"body_markdown":"With the connection pool, we maintain warm connections meaning that once some data is pushed, consecutive ones will be pushed and will be available for read without requiring any additional warm up period","body":"With the connection pool, we maintain warm connections meaning that once some data is pushed, consecutive ones will be pushed and will be available for read without requiring any additional warm up period"}],"owner":{"account_id":3968276,"reputation":657,"user_id":3273514,"accept_rate":42,"display_name":"East2West"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":394,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1639308939,"creation_date":1409850699,"question_id":25671326,"body_markdown":"We maintain array of bigquery connections. That can scale up and down depending on the volume of the data and number of threads. What we see is that even though we shrink that array list by simply building a new arraylist and copy the subset of the existing one to the new one however the resources not claimed by garbaga collector thus heap size goes thru roof!\r\n\r\nAny known issue with bigquery libraries?\r\n\r\n    BufferElement&lt;ObjectType&gt;[] newBuffer = createArray(newSize);\r\n    ...\r\n    ...\r\n    ...\r\n    System.arraycopy(buffer, srcIdx, newBuffer, length1 + dstLength2, dstLength3);\r\n    buffer = newBuffer;\r\n\r\n","title":"Bigquery memory leak","body":"<p>We maintain array of bigquery connections. That can scale up and down depending on the volume of the data and number of threads. What we see is that even though we shrink that array list by simply building a new arraylist and copy the subset of the existing one to the new one however the resources not claimed by garbaga collector thus heap size goes thru roof!</p>\n\n<p>Any known issue with bigquery libraries?</p>\n\n<pre><code>BufferElement&lt;ObjectType&gt;[] newBuffer = createArray(newSize);\n...\n...\n...\nSystem.arraycopy(buffer, srcIdx, newBuffer, length1 + dstLength2, dstLength3);\nbuffer = newBuffer;\n</code></pre>\n"},{"tags":["java","arrays","heap-memory"],"comments":[{"owner":{"account_id":195331,"reputation":275408,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":2,"creation_date":1412955526,"post_id":26303062,"comment_id":41274579,"body_markdown":"Have you tried _debugging_ your app?","body":"Have you tried <i>debugging</i> your app?"},{"owner":{"account_id":40721,"reputation":357288,"user_id":118068,"display_name":"Marc B"},"score":1,"creation_date":1412955669,"post_id":26303062,"comment_id":41274668,"body_markdown":"`2*i+2` is eventually going to be bigger than the size of your array. e.g. `11` element array, `i` will loop `0-&gt;5`, and `2*i+2` will eval out to `12`","body":"<code>2*i+2</code> is eventually going to be bigger than the size of your array. e.g. <code>11</code> element array, <code>i</code> will loop <code>0-&gt;5</code>, and <code>2*i+2</code> will eval out to <code>12</code>"},{"owner":{"account_id":4985577,"reputation":406,"user_id":4009310,"accept_rate":0,"display_name":"Benji Weiss"},"score":0,"creation_date":1412955727,"post_id":26303062,"comment_id":41274694,"body_markdown":"Array index out of bounds exception : 10, and @MarcB thats why i specify if Arr[r]!= null or if it null,","body":"Array index out of bounds exception : 10, and @MarcB thats why i specify if Arr[r]!= null or if it null,"},{"owner":{"account_id":40721,"reputation":357288,"user_id":118068,"display_name":"Marc B"},"score":1,"creation_date":1412955813,"post_id":26303062,"comment_id":41274750,"body_markdown":"which is pointless. Arr[12] != null will fail because you&#39;ve gone past the end of the array. java won&#39;t even bother TRYING to test for nullity, because you&#39;ve obviously exceeded the size of the array. You&#39;re basically acting like wiley coyote, wondering why you&#39;re falling after running off the end of the sidewalk.","body":"which is pointless. Arr[12] != null will fail because you&#39;ve gone past the end of the array. java won&#39;t even bother TRYING to test for nullity, because you&#39;ve obviously exceeded the size of the array. You&#39;re basically acting like wiley coyote, wondering why you&#39;re falling after running off the end of the sidewalk."},{"owner":{"account_id":2915411,"reputation":13804,"user_id":2498729,"accept_rate":69,"display_name":"But I&#39;m Not A Wrapper Class"},"score":0,"creation_date":1412956218,"post_id":26303062,"comment_id":41274977,"body_markdown":"This is a lot of code for us to look through.  @SotiriosDelimanolis suggestion of debugging the code is the best first step IMO","body":"This is a lot of code for us to look through.  @SotiriosDelimanolis suggestion of debugging the code is the best first step IMO"}],"answers":[{"tags":[],"owner":{"account_id":26369,"reputation":3754,"user_id":68556,"accept_rate":100,"display_name":"Edd"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1412956057,"creation_date":1412956057,"answer_id":26303252,"question_id":26303062,"body_markdown":"You may check for null in your `while` loop, (`Arr[r]!=null`) but the problem is that you can&#39;t even get a value from the array to determine if it&#39;s `null` or not. You should check the index is within the range before trying to access the value from the array, using `r &lt; Arr.length` or similar.","title":"Array index out of bounds java heap","body":"<p>You may check for null in your <code>while</code> loop, (<code>Arr[r]!=null</code>) but the problem is that you can't even get a value from the array to determine if it's <code>null</code> or not. You should check the index is within the range before trying to access the value from the array, using <code>r &lt; Arr.length</code> or similar.</p>\n"},{"tags":[],"owner":{"account_id":4984660,"reputation":118,"user_id":4008646,"display_name":"kyle england"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1412959150,"creation_date":1412959150,"answer_id":26304124,"question_id":26303062,"body_markdown":"(If null) isnt the problem, arrayIndexOutofBounds means you are geting a value of an array that isnt there\r\nEg. Array.length =5; and you search Array[6]; - out of bounds....\r\n\r\nThe problem i think is your method right(i); \r\nwhich is. i*2+2 and the array\r\n\r\nSo change the  for loop  to this\r\n\r\n     for(int i=startsize-2;i&gt;0;i--)\r\n\r\ncomment if this helps.","title":"Array index out of bounds java heap","body":"<p>(If null) isnt the problem, arrayIndexOutofBounds means you are geting a value of an array that isnt there\nEg. Array.length =5; and you search Array[6]; - out of bounds....</p>\n\n<p>The problem i think is your method right(i); \nwhich is. i*2+2 and the array</p>\n\n<p>So change the  for loop  to this</p>\n\n<pre><code> for(int i=startsize-2;i&gt;0;i--)\n</code></pre>\n\n<p>comment if this helps.</p>\n"}],"owner":{"account_id":4985577,"reputation":406,"user_id":4009310,"accept_rate":0,"display_name":"Benji Weiss"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":867,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1639309263,"answer_count":2,"score":-1,"last_activity_date":1639308872,"creation_date":1412955484,"question_id":26303062,"body_markdown":"I know this is an amaetuer error, i understand what it means but i dont understand why i cant fix it. Ive been trying everything. Im trying to take an array of type T and switch its values around so it correctly corresponds to the rules of a heap, where the parent is always greater than the 2 children. The error is in my while loop\r\n\r\nplease dont be harsh if its something easily fixable. ive been struggling heavily and cant seem to find an answer.\r\n\r\n    public class myheap&lt;T extends Comparable&lt;T&gt;&gt; extends heap&lt;T&gt;\r\n    { \r\n        // constructors of the subclass should be written this way:\r\n        public myheap(int max) { super(max); }\r\n        public myheap(T[] A) {super(A);}  \r\n    \t\r\n    \t\r\n        public void buildheap(T[] Arr){ \r\n    \t\tint size = Arr.length;\r\n    \t\tint startsize = (size-1)/2;\r\n    \t\tfor(int i=startsize;i&gt;0;i--){\r\n    \t\t\tint l = left(i);\r\n    \t\t\tint r = right(i);\r\n    \t\t\tT temp = null;\r\n    \t\t\twhile((Arr[r]!=null) &amp;&amp; Arr[i].compareTo(Arr[r])&lt;0){\r\n    \t\t\t\tif (Arr[l].compareTo(Arr[r])&gt;0){\r\n    \t\t\t\t\ttemp = Arr[l];\r\n    \t\t\t\t\tArr[l] = Arr[i];\r\n    \t\t\t\t\tArr[i] = temp;\r\n    \t\t\t\t}//if left is greater than right\r\n    \t\t\t\telse \t\t//then right must be greater than parent\t\t\t\r\n    \t\t\t\t\ttemp = Arr[r];\r\n    \t\t\t\t\tArr[r] = Arr[i];\r\n    \t\t\t\t\tArr[i] = temp;\r\n    \t\t\t}//whileloop\r\n    \t\t\tif((Arr[r]==null) &amp;&amp; Arr[i].compareTo(Arr[l])&lt;0)\r\n    \t\t\t\ttemp = Arr[l];\r\n    \t\t\t\tArr[l] = Arr[i];\r\n    \t\t\t\tArr[i] = temp;\r\n    \t\t}//for\r\n    \t\t\r\n        }//buildheap\r\n    \t\r\n    \t   \r\n    \tpublic static void main(String[] args){\r\n            String[] array = {&quot;SH&quot;,&quot;AH&quot;,&quot;AB&quot;,&quot;YA&quot;,&quot;AY&quot;,&quot;AA&quot;,&quot;AB&quot;,&quot;LM&quot;,&quot;LL&quot;,&quot;LO&quot;};\r\n    \t\tmyheap&lt;String&gt; New = new myheap&lt;String&gt;(array.length);\r\n    \t\tfor(int i=0;i&lt;array.length;i++){\r\n    \t\t\tNew.insert(array[i]);\r\n    \t\t}//insert\r\n    \t\tNew.buildheap(array);\r\n    \t\tNew.drawheap();\r\n    \t\tfor(int i=0;i&lt;array.length;i++){\r\n    \t\t\tSystem.out.println(New.deletemax() + &quot;  &quot;);\r\n    \t\t}//for\r\n    \t\tSystem.out.println();\r\n    \t\t\r\n        } //main\r\n    \r\n    }\r\n\r\n##Heap superclass that myheap is extending##\r\n\r\n    /*\r\n      Polymorphic priority heaps, largest value on top.\r\n      Heap axiom.  The value at every node cannot be smaller than the values\r\n      at each of its children nodes.\r\n      Use internal array to implement heap &quot;tree&quot;, with index 0 representing\r\n      the root.  Given node index i, left(i)= 2*i+1 and right(i)=2*i+2, while\r\n      parent(i) = (i-1)/2.\r\n    */\r\n    \r\n    class heap&lt;T extends Comparable&lt;T&gt;&gt;\r\n    {\r\n      protected T[] H; // internal array representing heap.\r\n      protected int size; // size of current heap, not same as H.length!\r\n      public int size() { return size; } // size is read-only externally.\r\n      public int maxsize() { return H.length; }\r\n      public heap(T[] A) { H = A; size=0; } // preferred constructor\r\n      public heap(int m) // will cause compiler warning (ok to ignore)\r\n      {\r\n         H = (T[]) new Comparable[m]; // downcast from Object is OK.\r\n         size = 0;\r\n      }\r\n    \r\n      protected int left(int i) { return 2*i+1; }\r\n      protected int right(int i) { return 2*i+2; }\r\n      protected int parent(int i) { return (i-1)/2; }\r\n    \r\n      // protected is important!\r\n      \r\n      // lookup heap, without delete\r\n      public T getmax()\r\n      { \r\n        if (size&lt;1) return null; \r\n        return H[0];\r\n      }\r\n    \r\n      // insert x into heap: place at end, then propagate upwards\r\n      // returns false on failure.\r\n      public boolean insert(T x)\r\n      {\r\n         if (size &gt; H.length-1) return false;\r\n         H[size++] = x; // place at end, inc size\r\n         // propagate upwards\r\n         int cur = size-1; // current position\r\n         int p = parent(cur);\r\n         while (cur&gt;0 &amp;&amp; H[cur].compareTo(H[p])&gt;0)\r\n         { // propagate upwards\r\n    \t   T temp = H[cur];\r\n           H[cur] = H[p];  H[p] = temp;\r\n           cur = p;  // switch current to parent\r\n           p = parent(cur); // recalc parent\r\n         }//while\r\n         return true;\r\n      }//insert\r\n    \r\n    // deletetop: take last element, move to top, propagate downwards:\r\n      public T deletemax()\r\n      {\r\n         if (size&lt;0) return null;\r\n         T answer = H[0];\r\n         H[0] = H[--size]; // place at top:\r\n         // now propagate downwards.\r\n         boolean done = false;\r\n         int i = 0; // current position\r\n         int c = 0; // swap candidate\r\n         while (c != -1)\r\n         {\r\n    \t int l = left(i);\r\n    \t int r = right(i);\r\n    \t c = -1; // swap candidate\r\n    \t if (l&lt;size &amp;&amp; H[l].compareTo(H[i])&gt;0) c = l; // set candidate to left\r\n    \t if (r&lt;size &amp;&amp; H[r].compareTo(H[i])&gt;0 &amp;&amp; H[r].compareTo(H[l])&gt;0) c=r;\r\n    \t if (c!= -1) \r\n    \t     {\r\n    \t\t T temp = H[i];  H[i] = H[c]; H[c] = temp;\r\n    \t\t i = c; \r\n    \t     }\r\n         }//while\r\n         return answer;\r\n      }//deletemax\r\n    \r\n    \r\n        // but search is not log(n). Why?\r\n      public boolean search(T x)\r\n        {\r\n    \tfor(int i=0;i&lt;size;i++) {if (x.compareTo(H[i])==0) return true;}\r\n    \treturn false;\r\n        }\r\n    \r\n      public void drawheap() // use only with heapdisplay.java program\r\n      {\r\n          heapdisplay W = new heapdisplay(1024,768);\r\n          W.drawtree(H,size);\r\n      }\r\n    \r\n    }//heap\r\n    \r\n    \r\n    public class heaps14\r\n    {\r\n        /**public static void main(String[] args){\r\n    \theap&lt;Integer&gt; HI = new heap&lt;Integer&gt;(200);\r\n    \tfor(int i=0;i&lt;100;i++) HI.insert((int)(Math.random()*1000));\r\n    \tHI.drawheap();\r\n    \tfor(int i=0;i&lt;100;i++) System.out.print(HI.deletemax() + &quot;  &quot;);\r\n    \tSystem.out.println();\r\n        }//main**/\r\n    }\r\n\r\n\r\n","title":"Array index out of bounds java heap","body":"<p>I know this is an amaetuer error, i understand what it means but i dont understand why i cant fix it. Ive been trying everything. Im trying to take an array of type T and switch its values around so it correctly corresponds to the rules of a heap, where the parent is always greater than the 2 children. The error is in my while loop</p>\n\n<p>please dont be harsh if its something easily fixable. ive been struggling heavily and cant seem to find an answer.</p>\n\n<pre><code>public class myheap&lt;T extends Comparable&lt;T&gt;&gt; extends heap&lt;T&gt;\n{ \n    // constructors of the subclass should be written this way:\n    public myheap(int max) { super(max); }\n    public myheap(T[] A) {super(A);}  \n\n\n    public void buildheap(T[] Arr){ \n        int size = Arr.length;\n        int startsize = (size-1)/2;\n        for(int i=startsize;i&gt;0;i--){\n            int l = left(i);\n            int r = right(i);\n            T temp = null;\n            while((Arr[r]!=null) &amp;&amp; Arr[i].compareTo(Arr[r])&lt;0){\n                if (Arr[l].compareTo(Arr[r])&gt;0){\n                    temp = Arr[l];\n                    Arr[l] = Arr[i];\n                    Arr[i] = temp;\n                }//if left is greater than right\n                else        //then right must be greater than parent            \n                    temp = Arr[r];\n                    Arr[r] = Arr[i];\n                    Arr[i] = temp;\n            }//whileloop\n            if((Arr[r]==null) &amp;&amp; Arr[i].compareTo(Arr[l])&lt;0)\n                temp = Arr[l];\n                Arr[l] = Arr[i];\n                Arr[i] = temp;\n        }//for\n\n    }//buildheap\n\n\n    public static void main(String[] args){\n        String[] array = {\"SH\",\"AH\",\"AB\",\"YA\",\"AY\",\"AA\",\"AB\",\"LM\",\"LL\",\"LO\"};\n        myheap&lt;String&gt; New = new myheap&lt;String&gt;(array.length);\n        for(int i=0;i&lt;array.length;i++){\n            New.insert(array[i]);\n        }//insert\n        New.buildheap(array);\n        New.drawheap();\n        for(int i=0;i&lt;array.length;i++){\n            System.out.println(New.deletemax() + \"  \");\n        }//for\n        System.out.println();\n\n    } //main\n\n}\n</code></pre>\n\n<h2>Heap superclass that myheap is extending</h2>\n\n<pre><code>/*\n  Polymorphic priority heaps, largest value on top.\n  Heap axiom.  The value at every node cannot be smaller than the values\n  at each of its children nodes.\n  Use internal array to implement heap \"tree\", with index 0 representing\n  the root.  Given node index i, left(i)= 2*i+1 and right(i)=2*i+2, while\n  parent(i) = (i-1)/2.\n*/\n\nclass heap&lt;T extends Comparable&lt;T&gt;&gt;\n{\n  protected T[] H; // internal array representing heap.\n  protected int size; // size of current heap, not same as H.length!\n  public int size() { return size; } // size is read-only externally.\n  public int maxsize() { return H.length; }\n  public heap(T[] A) { H = A; size=0; } // preferred constructor\n  public heap(int m) // will cause compiler warning (ok to ignore)\n  {\n     H = (T[]) new Comparable[m]; // downcast from Object is OK.\n     size = 0;\n  }\n\n  protected int left(int i) { return 2*i+1; }\n  protected int right(int i) { return 2*i+2; }\n  protected int parent(int i) { return (i-1)/2; }\n\n  // protected is important!\n\n  // lookup heap, without delete\n  public T getmax()\n  { \n    if (size&lt;1) return null; \n    return H[0];\n  }\n\n  // insert x into heap: place at end, then propagate upwards\n  // returns false on failure.\n  public boolean insert(T x)\n  {\n     if (size &gt; H.length-1) return false;\n     H[size++] = x; // place at end, inc size\n     // propagate upwards\n     int cur = size-1; // current position\n     int p = parent(cur);\n     while (cur&gt;0 &amp;&amp; H[cur].compareTo(H[p])&gt;0)\n     { // propagate upwards\n       T temp = H[cur];\n       H[cur] = H[p];  H[p] = temp;\n       cur = p;  // switch current to parent\n       p = parent(cur); // recalc parent\n     }//while\n     return true;\n  }//insert\n\n// deletetop: take last element, move to top, propagate downwards:\n  public T deletemax()\n  {\n     if (size&lt;0) return null;\n     T answer = H[0];\n     H[0] = H[--size]; // place at top:\n     // now propagate downwards.\n     boolean done = false;\n     int i = 0; // current position\n     int c = 0; // swap candidate\n     while (c != -1)\n     {\n     int l = left(i);\n     int r = right(i);\n     c = -1; // swap candidate\n     if (l&lt;size &amp;&amp; H[l].compareTo(H[i])&gt;0) c = l; // set candidate to left\n     if (r&lt;size &amp;&amp; H[r].compareTo(H[i])&gt;0 &amp;&amp; H[r].compareTo(H[l])&gt;0) c=r;\n     if (c!= -1) \n         {\n         T temp = H[i];  H[i] = H[c]; H[c] = temp;\n         i = c; \n         }\n     }//while\n     return answer;\n  }//deletemax\n\n\n    // but search is not log(n). Why?\n  public boolean search(T x)\n    {\n    for(int i=0;i&lt;size;i++) {if (x.compareTo(H[i])==0) return true;}\n    return false;\n    }\n\n  public void drawheap() // use only with heapdisplay.java program\n  {\n      heapdisplay W = new heapdisplay(1024,768);\n      W.drawtree(H,size);\n  }\n\n}//heap\n\n\npublic class heaps14\n{\n    /**public static void main(String[] args){\n    heap&lt;Integer&gt; HI = new heap&lt;Integer&gt;(200);\n    for(int i=0;i&lt;100;i++) HI.insert((int)(Math.random()*1000));\n    HI.drawheap();\n    for(int i=0;i&lt;100;i++) System.out.print(HI.deletemax() + \"  \");\n    System.out.println();\n    }//main**/\n}\n</code></pre>\n"},{"tags":["java","matrix","heap-memory"],"comments":[{"owner":{"display_name":"user177800"},"score":0,"creation_date":1414970305,"post_id":26705578,"comment_id":42004102,"body_markdown":"`for (int row = 0; row &lt; 2; row++)` explain what you think that line of code does?","body":"<code>for (int row = 0; row &lt; 2; row++)</code> explain what you think that line of code does?"},{"owner":{"account_id":2883526,"reputation":2320,"user_id":3439993,"accept_rate":33,"display_name":"Deltharis"},"score":1,"creation_date":1414970410,"post_id":26705578,"comment_id":42004123,"body_markdown":"No built-in pretty printer for matrix, loop through values and print them.","body":"No built-in pretty printer for matrix, loop through values and print them."},{"owner":{"display_name":"user177800"},"score":0,"creation_date":1414970451,"post_id":26705578,"comment_id":42004136,"body_markdown":"You already asked how to do this in another question for Arrays the same answer applies here.","body":"You already asked how to do this in another question for Arrays the same answer applies here."},{"owner":{"account_id":4318976,"reputation":11,"user_id":3527876,"accept_rate":75,"display_name":"user3527876"},"score":0,"creation_date":1414970609,"post_id":26705578,"comment_id":42004175,"body_markdown":"If I asked that question before it was so long ago I cannot find it. I did look before asking. I thought the &quot;for&quot; line put the input numbers into rows. I am still pretty new at this. If you can&#39;t post the link to the original answer I will look for it later.","body":"If I asked that question before it was so long ago I cannot find it. I did look before asking. I thought the &quot;for&quot; line put the input numbers into rows. I am still pretty new at this. If you can&#39;t post the link to the original answer I will look for it later."}],"answers":[{"tags":[],"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1414970869,"creation_date":1414970869,"answer_id":26705683,"question_id":26705578,"body_markdown":"Java arrays do not override `toString()` so you are getting the default implementation from `Object`. Instead, you can use [`Arrays.deepToString(Object[])`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#deepToString%28java.lang.Object[]%29) like\r\n\r\n    System.out.println(&quot;The row-sort matrix is...&quot; + Arrays.deepToString(m));\r\n","title":"Trying to get my matrix printed not the heap address","body":"<p>Java arrays do not override <code>toString()</code> so you are getting the default implementation from <code>Object</code>. Instead, you can use <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#deepToString%28java.lang.Object[]%29\" rel=\"nofollow\"><code>Arrays.deepToString(Object[])</code></a> like</p>\n\n<pre><code>System.out.println(\"The row-sort matrix is...\" + Arrays.deepToString(m));\n</code></pre>\n"}],"owner":{"account_id":4318976,"reputation":11,"user_id":3527876,"accept_rate":75,"display_name":"user3527876"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":26705683,"answer_count":1,"score":-1,"last_activity_date":1639308851,"creation_date":1414970015,"question_id":26705578,"body_markdown":"The code seems to run except what I am getting is not a matrix of a specified (by the user) size but what I think is a heap address\r\nHere&#39;s what it returns when the user inputs 2 for the size and then 4 numbers:\r\n\r\nEnter matrix size: \r\n2\r\nEnter a 2 by  2 matrix row by row: 2 3 4 5\r\nThe row-sort matrix is...[[D@3c954549BUILD SUCCESSFUL (total time: 8 seconds)\r\n\r\nhere is the code....thank you in advance.\r\n\r\n    import java.util.Scanner;\r\n    public class Exercise7_26M {\r\n    \r\n       public static void main (String[]args)\r\n             \r\n               \r\n       {\r\n               //Prompt user for input of matrix size\r\n      \r\n           \r\n           System.out.println(&quot;Enter matrix size: &quot;);\r\n        Scanner input = new Scanner(System.in);  \r\n        int size = input.nextInt();\r\n        double[][] m = new double [size][size];\r\n\r\n        //prompt user for input of array\r\n         System.out.print(&quot;Enter a &quot; + size + &quot; by  &quot; + size + &quot; matrix row by row: &quot;);\r\n         for (int row = 0; row &lt; 2; row++)\r\n               for (int column = 0; column &lt; 2; column++)\r\n                   m[row][column] = input.nextDouble();\r\n     \r\n                   System.out.print(&quot;The row-sort matrix is...&quot; + m);\r\n\r\n    \r\n       }\r\n    \r\n\r\n  ","title":"Trying to get my matrix printed not the heap address","body":"<p>The code seems to run except what I am getting is not a matrix of a specified (by the user) size but what I think is a heap address\nHere's what it returns when the user inputs 2 for the size and then 4 numbers:</p>\n\n<p>Enter matrix size: \n2\nEnter a 2 by  2 matrix row by row: 2 3 4 5\nThe row-sort matrix is...[[D@3c954549BUILD SUCCESSFUL (total time: 8 seconds)</p>\n\n<p>here is the code....thank you in advance.</p>\n\n<pre><code>import java.util.Scanner;\npublic class Exercise7_26M {\n\n   public static void main (String[]args)\n\n\n   {\n           //Prompt user for input of matrix size\n\n\n       System.out.println(\"Enter matrix size: \");\n    Scanner input = new Scanner(System.in);  \n    int size = input.nextInt();\n    double[][] m = new double [size][size];\n\n    //prompt user for input of array\n     System.out.print(\"Enter a \" + size + \" by  \" + size + \" matrix row by row: \");\n     for (int row = 0; row &lt; 2; row++)\n           for (int column = 0; column &lt; 2; column++)\n               m[row][column] = input.nextDouble();\n\n               System.out.print(\"The row-sort matrix is...\" + m);\n\n\n   }\n</code></pre>\n"},{"tags":["java","heap-memory","comparator","extend"],"comments":[{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1417715668,"post_id":27300679,"comment_id":43065085,"body_markdown":"Well every time you call `insertAndSort` you&#39;re potentially *doubling* the size of the list. I suspect you didn&#39;t mean to do that. Have you debugged through it?","body":"Well every time you call <code>insertAndSort</code> you&#39;re potentially <i>doubling</i> the size of the list. I suspect you didn&#39;t mean to do that. Have you debugged through it?"}],"answers":[{"tags":[],"owner":{"account_id":1853502,"reputation":16211,"user_id":1679537,"accept_rate":82,"display_name":"xlecoustillier"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1417715692,"creation_date":1417715692,"answer_id":27300727,"question_id":27300679,"body_markdown":"Your loop will go on until i reaches its size. That will never happen, as you keep adding elements to it, making the size grow accordingly.\r\n\r\n","title":"Out of heap space error though my code is not complex","body":"<p>Your loop will go on until i reaches its size. That will never happen, as you keep adding elements to it, making the size grow accordingly.</p>\n"},{"tags":[],"owner":{"account_id":1869831,"reputation":4089,"user_id":1692341,"accept_rate":90,"display_name":"Steffen"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1417716082,"creation_date":1417715696,"answer_id":27300729,"question_id":27300679,"body_markdown":"In your loop, you are using `i &lt; size()` as a condition. Each time you add a new item, the size will grow, too. \r\n\r\nA [`PriorityQueue`](https://docs.oracle.com/javase/8/docs/api/java/util/PriorityQueue.html) is always sorted, by the way. But if you are bound to use an array list, you will need to remember the size before the loop.  ","title":"Out of heap space error though my code is not complex","body":"<p>In your loop, you are using <code>i &lt; size()</code> as a condition. Each time you add a new item, the size will grow, too. </p>\n\n<p>A <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/PriorityQueue.html\" rel=\"nofollow\"><code>PriorityQueue</code></a> is always sorted, by the way. But if you are bound to use an array list, you will need to remember the size before the loop.  </p>\n"},{"tags":[],"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1417715969,"creation_date":1417715969,"answer_id":27300824,"question_id":27300679,"body_markdown":"Your `insert` method is off. You need to find the correct position and add the element, not add the element for every element in the current `List`.\r\n\r\n\tpublic void insertAndSort(E element) {\r\n\t\tif (isEmpty()) {\r\n\t\t\tadd(element);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tint len = size();\r\n\t\tint pos = 0;\r\n\t\twhile (pos &lt; len &amp;&amp; element.compareTo(get(pos)) &gt; 0) {\r\n\t\t\tpos++;\r\n\t\t}\r\n\t\tadd(pos, element);\r\n\t}\r\n\r\nand the generic should be applied to `Comparable`. So this\r\n\r\n    SortedArrayList&lt;E extends Comparable&gt;\r\n\r\nshould be\r\n\r\n    SortedArrayList&lt;E extends Comparable&lt;E&gt;&gt;\r\n\r\n","title":"Out of heap space error though my code is not complex","body":"<p>Your <code>insert</code> method is off. You need to find the correct position and add the element, not add the element for every element in the current <code>List</code>.</p>\n\n<pre><code>public void insertAndSort(E element) {\n    if (isEmpty()) {\n        add(element);\n        return;\n    }\n    int len = size();\n    int pos = 0;\n    while (pos &lt; len &amp;&amp; element.compareTo(get(pos)) &gt; 0) {\n        pos++;\n    }\n    add(pos, element);\n}\n</code></pre>\n\n<p>and the generic should be applied to <code>Comparable</code>. So this</p>\n\n<pre><code>SortedArrayList&lt;E extends Comparable&gt;\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>SortedArrayList&lt;E extends Comparable&lt;E&gt;&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":881926,"reputation":1184,"user_id":2725666,"accept_rate":50,"display_name":"Ouney"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1417722667,"creation_date":1417722667,"answer_id":27302800,"question_id":27300679,"body_markdown":"In `for ( int i = 0; i &lt; size(); i++)` , when you add an element then size also increases - so same element keeps adding over and again.\r\nSuppose, if you add 1 first and then try adding 2 then it will keep on adding 2 and list will become .........2,2,2,2,2,2,2.................,1 and causing the error.\r\n\r\nGrab the size in a variable before using in loop.\r\n\r\n     int length= size();\r\n    for ( int i = 0; i &lt; length; i++){\r\n      E otherElement = get(i);\r\n      if(element.compareTo(otherElement) &gt; 0){\r\n          add(i, element);\r\n        }\r\n      if(element.compareTo(otherElement) &lt; 0) {\r\n          add(i+1, element);\r\n        }\r\n    } `","title":"Out of heap space error though my code is not complex","body":"<p>In <code>for ( int i = 0; i &lt; size(); i++)</code> , when you add an element then size also increases - so same element keeps adding over and again.\nSuppose, if you add 1 first and then try adding 2 then it will keep on adding 2 and list will become .........2,2,2,2,2,2,2.................,1 and causing the error.</p>\n\n<p>Grab the size in a variable before using in loop.</p>\n\n<pre><code> int length= size();\nfor ( int i = 0; i &lt; length; i++){\n  E otherElement = get(i);\n  if(element.compareTo(otherElement) &gt; 0){\n      add(i, element);\n    }\n  if(element.compareTo(otherElement) &lt; 0) {\n      add(i+1, element);\n    }\n} `\n</code></pre>\n"}],"owner":{"account_id":5255206,"reputation":41,"user_id":4198306,"accept_rate":70,"display_name":"Finlay"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":27300824,"answer_count":4,"score":-2,"last_activity_date":1639308802,"creation_date":1417715497,"question_id":27300679,"body_markdown":"I&#39;ve written this generic class as an extension of Arraylist(I know I&#39;m not supposed to do this but I have to). The idea is to add generic objects and sort them. It compiles fine, and when I test it and add an object (from another class) it works fine. However when I add a second object, the program waits for about 30 seconds then returns &quot;java.lang.outofmemory error out of heap space&quot;.\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.*;\r\n\r\n    /**\r\n     * extending to ArrayList\r\n     */\r\n    public class SortedArrayList&lt;E extends Comparable&gt; extends ArrayList&lt;E&gt; \r\n    {\r\n \r\n    /**\r\n     * Constructing the super\r\n     */\r\n    public SortedArrayList()    \r\n    {\r\n       super();\r\n       \r\n      }\r\n  \r\n      public  void insertAndSort (E element){\r\n      if (isEmpty()){\r\n          add(element);\r\n        }\r\n      \r\n      for ( int i = 0; i &lt; size(); i++){\r\n          E otherElement = get(i);\r\n          if(element.compareTo(otherElement) &gt; 0){\r\n              add(i, element);\r\n            }\r\n          if(element.compareTo(otherElement) &lt; 0) {\r\n              add(i+1, element);\r\n            }\r\n        } \r\n      \r\n    }\r\n    \r\n    }\r\n\r\nCan anyone see why this is happening? Is there something wrong with my for loop?\r\nThanks","title":"Out of heap space error though my code is not complex","body":"<p>I've written this generic class as an extension of Arraylist(I know I'm not supposed to do this but I have to). The idea is to add generic objects and sort them. It compiles fine, and when I test it and add an object (from another class) it works fine. However when I add a second object, the program waits for about 30 seconds then returns \"java.lang.outofmemory error out of heap space\".</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.*;\n\n/**\n * extending to ArrayList\n */\npublic class SortedArrayList&lt;E extends Comparable&gt; extends ArrayList&lt;E&gt; \n{\n\n/**\n * Constructing the super\n */\npublic SortedArrayList()    \n{\n   super();\n\n  }\n\n  public  void insertAndSort (E element){\n  if (isEmpty()){\n      add(element);\n    }\n\n  for ( int i = 0; i &lt; size(); i++){\n      E otherElement = get(i);\n      if(element.compareTo(otherElement) &gt; 0){\n          add(i, element);\n        }\n      if(element.compareTo(otherElement) &lt; 0) {\n          add(i+1, element);\n        }\n    } \n\n}\n\n}\n</code></pre>\n\n<p>Can anyone see why this is happening? Is there something wrong with my for loop?\nThanks</p>\n"},{"tags":["java","heap-memory"],"comments":[{"owner":{"account_id":1706986,"reputation":4611,"user_id":1565862,"display_name":"fejese"},"score":0,"creation_date":1419426738,"post_id":27637375,"comment_id":43693789,"body_markdown":"Just a thought: if you plan to collect primes, you only need an array as big as the number of primes you&#39;re going for. So unless you want the 1000000000th prime, probably you can decrease the size of that array anyway.","body":"Just a thought: if you plan to collect primes, you only need an array as big as the number of primes you&#39;re going for. So unless you want the 1000000000th prime, probably you can decrease the size of that array anyway."},{"owner":{"account_id":1361084,"reputation":1310,"user_id":1298454,"accept_rate":50,"display_name":"Sachin Janani"},"score":0,"creation_date":1419426964,"post_id":27637375,"comment_id":43693880,"body_markdown":"yes i think @fejese is right","body":"yes i think @fejese is right"}],"owner":{"account_id":5531911,"reputation":1,"user_id":4391655,"display_name":"Arjun"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":289,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1639308730,"creation_date":1419426117,"question_id":27637375,"body_markdown":"I know this question has been answered before for Eclipse but can someone tell me how to increase heap space of my **JCreator** for a program in a bit more detailed manner (I am a beginner to Java programming).\r\n\r\nNote: using `-Xms248m -Xmx3072m` in *cmd.exe* did not work\r\n\r\nI had written \r\n\r\n    java -Xms256m -Xmx3072m MyClassName\r\n\r\nThe error occurred when i was making a large array to make a prime number seive up to a billion numbers.\r\n\r\nI have 4GB of ram.\r\n\r\n    public class MyClassName {\r\n    \tpublic static void main(String[] args) {\r\n    \t    int a[] = new int[1000000000];\r\n        }\r\n    }","title":"How to increase heap space in JCreator","body":"<p>I know this question has been answered before for Eclipse but can someone tell me how to increase heap space of my <strong>JCreator</strong> for a program in a bit more detailed manner (I am a beginner to Java programming).</p>\n\n<p>Note: using <code>-Xms248m -Xmx3072m</code> in <em>cmd.exe</em> did not work</p>\n\n<p>I had written </p>\n\n<pre><code>java -Xms256m -Xmx3072m MyClassName\n</code></pre>\n\n<p>The error occurred when i was making a large array to make a prime number seive up to a billion numbers.</p>\n\n<p>I have 4GB of ram.</p>\n\n<pre><code>public class MyClassName {\n    public static void main(String[] args) {\n        int a[] = new int[1000000000];\n    }\n}\n</code></pre>\n"},{"tags":["java","data-structures","collections","io","heap-memory"],"answers":[{"tags":[],"owner":{"account_id":1983091,"reputation":190,"user_id":1779174,"accept_rate":88,"display_name":"Jani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1419452292,"creation_date":1419452292,"answer_id":27641813,"question_id":27641762,"body_markdown":"How big are the files you are trying to read? \r\n\r\nYou can try and increase heap size.\r\nLook here: https://stackoverflow.com/questions/1565388/increase-heap-size-in-java","title":"File Reading getting out of Heap space in java?","body":"<p>How big are the files you are trying to read? </p>\n\n<p>You can try and increase heap size.\nLook here: <a href=\"https://stackoverflow.com/questions/1565388/increase-heap-size-in-java\">Increase heap size in Java</a></p>\n"}],"owner":{"account_id":5533178,"reputation":99,"user_id":4392495,"accept_rate":80,"display_name":"SHinny"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":588,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":27641813,"answer_count":1,"score":0,"last_activity_date":1639308716,"creation_date":1419451832,"question_id":27641762,"body_markdown":"I am using java.io  To read Log Files and grep for ERROR/WARN  etc... using\r\n\r\n    //FileManipulator class\r\n       public static List&lt;String&gt; execute(String command) throws IOException{\r\n        \t\tList&lt;String&gt; output = new ArrayList&lt;String&gt;();\r\n        \t\t\r\n        \t\tProcess process = Runtime.getRuntime().exec(new String[] { &quot;bash&quot;, &quot;-c&quot;, command });\r\n        \t\t\r\n        \t\tInputStream input = process.getInputStream();\r\n        \t\tInputStreamReader isr = new InputStreamReader(input);\r\n        \t\tBufferedReader br = new BufferedReader(isr);\r\n        \t\t\r\n        \t\tString line = null;\r\n        \t\twhile ((line = br.readLine()) != null){\r\n        \t\t\toutput.add(line);\r\n        \t\t}\t\r\n        \t\tinput.close();\r\n        \t\t\r\n        \t\treturn output;\r\n        \t}\r\n\r\nAnd I am getting this excption while running the same\r\n\r\n    Exception in thread &quot;pool-1-thread-1&quot; java.lang.OutOfMemoryError: Java heap space\r\n            at java.util.Arrays.copyOfRange(Arrays.java:2694)\r\n            at java.lang.String.&lt;init&gt;(String.java:203)\r\n            at java.io.BufferedReader.readLine(BufferedReader.java:349)\r\n            at java.io.BufferedReader.readLine(BufferedReader.java:382)\r\n            at com.citi.muni.msdc.sanity.util.FileManipulator.execute(FileManipulator.java:220)\r\n            at com.citi.muni.msdc.sanity.util.FileManipulator.grepWarnings(FileManipulator.java:300)\r\n\r\n\r\n\r\nSo it seems some of the files may be too large in size to process, Can some one suggest how I can edit my current approach to stop getting the heap issue.\r\n\r\nThanks\r\nSK\r\n","title":"File Reading getting out of Heap space in java?","body":"<p>I am using java.io  To read Log Files and grep for ERROR/WARN  etc... using</p>\n\n<pre><code>//FileManipulator class\n   public static List&lt;String&gt; execute(String command) throws IOException{\n            List&lt;String&gt; output = new ArrayList&lt;String&gt;();\n\n            Process process = Runtime.getRuntime().exec(new String[] { \"bash\", \"-c\", command });\n\n            InputStream input = process.getInputStream();\n            InputStreamReader isr = new InputStreamReader(input);\n            BufferedReader br = new BufferedReader(isr);\n\n            String line = null;\n            while ((line = br.readLine()) != null){\n                output.add(line);\n            }   \n            input.close();\n\n            return output;\n        }\n</code></pre>\n\n<p>And I am getting this excption while running the same</p>\n\n<pre><code>Exception in thread \"pool-1-thread-1\" java.lang.OutOfMemoryError: Java heap space\n        at java.util.Arrays.copyOfRange(Arrays.java:2694)\n        at java.lang.String.&lt;init&gt;(String.java:203)\n        at java.io.BufferedReader.readLine(BufferedReader.java:349)\n        at java.io.BufferedReader.readLine(BufferedReader.java:382)\n        at com.citi.muni.msdc.sanity.util.FileManipulator.execute(FileManipulator.java:220)\n        at com.citi.muni.msdc.sanity.util.FileManipulator.grepWarnings(FileManipulator.java:300)\n</code></pre>\n\n<p>So it seems some of the files may be too large in size to process, Can some one suggest how I can edit my current approach to stop getting the heap issue.</p>\n\n<p>Thanks\nSK</p>\n"},{"tags":["java","heap-memory"],"owner":{"account_id":317365,"reputation":325,"user_id":634014,"accept_rate":64,"display_name":"Francesco"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":210,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1639308674,"creation_date":1423236518,"question_id":28369138,"body_markdown":"In my java code I can get the Heap free memory amount with:\r\n\r\n    Runtime.getRuntime().freeMemory()\r\n\r\nI would like to get instead the amount of &quot;PS Old Gen&quot; memory usage, like shown for example by jConsole in Memory tab, chart: Memory Pool &quot;PS Old Gen&quot;.\r\n\r\nHow can I do, using java code? \r\n\r\nThank you.\r\n\r\n","title":"getting PS old gen size at runtime","body":"<p>In my java code I can get the Heap free memory amount with:</p>\n\n<pre><code>Runtime.getRuntime().freeMemory()\n</code></pre>\n\n<p>I would like to get instead the amount of \"PS Old Gen\" memory usage, like shown for example by jConsole in Memory tab, chart: Memory Pool \"PS Old Gen\".</p>\n\n<p>How can I do, using java code? </p>\n\n<p>Thank you.</p>\n"},{"tags":["java","heap-memory"],"comments":[{"owner":{"account_id":2929950,"reputation":2729,"user_id":2601060,"accept_rate":95,"display_name":"mnd"},"score":1,"creation_date":1423751428,"post_id":28480038,"comment_id":45282437,"body_markdown":"Can you provide the code for class `Test`?","body":"Can you provide the code for class <code>Test</code>?"},{"owner":{"account_id":1393384,"reputation":6371,"user_id":1770601,"accept_rate":59,"display_name":"ha9u63a7"},"score":0,"creation_date":1423751465,"post_id":28480038,"comment_id":45282474,"body_markdown":"Java primitives are passed by copy of values. Custom types such as your own class objects are not the same.","body":"Java primitives are passed by copy of values. Custom types such as your own class objects are not the same."},{"owner":{"account_id":1068638,"reputation":3078,"user_id":1068470,"accept_rate":82,"display_name":"ThePerson"},"score":1,"creation_date":1423751571,"post_id":28480038,"comment_id":45282549,"body_markdown":"What is passed in when you &quot;pass in an object &quot; is the value of the reference, not the object itself. When you pass in a primitive, you pass in the value of the primitive.","body":"What is passed in when you &quot;pass in an object &quot; is the value of the reference, not the object itself. When you pass in a primitive, you pass in the value of the primitive."},{"owner":{"account_id":1068638,"reputation":3078,"user_id":1068470,"accept_rate":82,"display_name":"ThePerson"},"score":1,"creation_date":1423752421,"post_id":28480038,"comment_id":45283168,"body_markdown":"To add to the above, this is why java is &quot;pass by value&quot;.","body":"To add to the above, this is why java is &quot;pass by value&quot;."}],"answers":[{"tags":[],"owner":{"account_id":46972,"reputation":356179,"user_id":139010,"accept_rate":81,"display_name":"Matt Ball"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1423751516,"creation_date":1423751516,"answer_id":28480116,"question_id":28480038,"body_markdown":"This has nothing to do with heap vs stack, and everything to do with assignment semantics of primitives vs reference types.\r\n\r\nObject assignment in Java does not copy, so `Test test1=test;` just creates another &quot;name&quot; (another variable) which refers to the same object in memory.\r\n\r\nPrimitive assignment does copy, so `int b=a` creates a second int with the same value, which is independent from the first afterward.","title":"How does java reference objects vs variables","body":"<p>This has nothing to do with heap vs stack, and everything to do with assignment semantics of primitives vs reference types.</p>\n\n<p>Object assignment in Java does not copy, so <code>Test test1=test;</code> just creates another \"name\" (another variable) which refers to the same object in memory.</p>\n\n<p>Primitive assignment does copy, so <code>int b=a</code> creates a second int with the same value, which is independent from the first afterward.</p>\n"},{"tags":[],"owner":{"account_id":2966509,"reputation":298,"user_id":2519548,"accept_rate":40,"display_name":"Zycho"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1423751657,"creation_date":1423751657,"answer_id":28480162,"question_id":28480038,"body_markdown":"Java only stores primitives (what you call variables) on the stack.\r\nObjects are created on the heap, and only references (which in turn are primitives) are passed around on the stack.\r\n\r\nThe main difference between stack and heap is the life cycle of the values.\r\nStack values only exist within the scope of the function they are created in. Once it returns, they are discarded.\r\nHeap values however exist on the heap. They are created at some point in time, and destructed at another (either by GC or manually, depending on the language/runtime).","title":"How does java reference objects vs variables","body":"<p>Java only stores primitives (what you call variables) on the stack.\nObjects are created on the heap, and only references (which in turn are primitives) are passed around on the stack.</p>\n\n<p>The main difference between stack and heap is the life cycle of the values.\nStack values only exist within the scope of the function they are created in. Once it returns, they are discarded.\nHeap values however exist on the heap. They are created at some point in time, and destructed at another (either by GC or manually, depending on the language/runtime).</p>\n"}],"owner":{"account_id":1854605,"reputation":1095,"user_id":1680473,"accept_rate":82,"display_name":"Maclean Pinto"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"accepted_answer_id":28480116,"answer_count":2,"score":-3,"last_activity_date":1639308659,"creation_date":1423751313,"question_id":28480038,"body_markdown":"    /*\r\n     * To change this template, choose Tools | Templates\r\n     * and open the template in the editor.\r\n     */\r\n    package corejava;\r\n    \r\n    /**\r\n     *\r\n     * @author Administrator\r\n     */\r\n    public class CoreJava {\r\n    \r\n        /**\r\n         * @param args the command line arguments\r\n         */\r\n        public static void main(String[] args) {\r\n            Test test=new Test();\r\n            test.setx(20);\r\n            test.printx();\r\n            \r\n            Test test1=test;\r\n            test1.setx(40);\r\n            test1.printx();\r\n            test.printx();\r\n            \r\n            \r\n            int a=20;\r\n            int b=a;\r\n            a=40;\r\n            System.out.println(a);\r\n            System.out.println(b);\r\n            \r\n        }\r\n    }\r\n\r\n\r\nOutput:\r\n\r\n    run:\r\n    X is 20\r\n    X is 40\r\n    X is 40\r\n    40\r\n    20\r\n\r\n\r\nNow here when i set the value of &#39;x&#39; in &#39;a&#39; and assigned the object &#39;a&#39; to &#39;b&#39;, &#39;b&#39; will point to the same value of object &#39;a&#39;. so any changes to &#39;a&#39; will also change the value of &#39;b&#39;;\r\n\r\nBut when i used simple variables why didn&#39;t it do the same as for objects. Why the objects stored in heap and variables in stack area.","title":"How does java reference objects vs variables","body":"<pre><code>/*\n * To change this template, choose Tools | Templates\n * and open the template in the editor.\n */\npackage corejava;\n\n/**\n *\n * @author Administrator\n */\npublic class CoreJava {\n\n    /**\n     * @param args the command line arguments\n     */\n    public static void main(String[] args) {\n        Test test=new Test();\n        test.setx(20);\n        test.printx();\n\n        Test test1=test;\n        test1.setx(40);\n        test1.printx();\n        test.printx();\n\n\n        int a=20;\n        int b=a;\n        a=40;\n        System.out.println(a);\n        System.out.println(b);\n\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>run:\nX is 20\nX is 40\nX is 40\n40\n20\n</code></pre>\n\n<p>Now here when i set the value of 'x' in 'a' and assigned the object 'a' to 'b', 'b' will point to the same value of object 'a'. so any changes to 'a' will also change the value of 'b';</p>\n\n<p>But when i used simple variables why didn't it do the same as for objects. Why the objects stored in heap and variables in stack area.</p>\n"},{"tags":["java","heap-memory","textpad"],"comments":[{"owner":{"account_id":1924489,"reputation":5462,"user_id":1735262,"display_name":"Reinstate Monica -- notmaynard"},"score":0,"creation_date":1380925106,"post_id":19191633,"comment_id":28396818,"body_markdown":"What command do you enter to run the program?","body":"What command do you enter to run the program?"},{"owner":{"account_id":3394074,"reputation":11,"user_id":2848210,"display_name":"user2848210"},"score":0,"creation_date":1380926172,"post_id":19191633,"comment_id":28397070,"body_markdown":"I run it from textpad, so ctrl+1 to compile, ctrl+2 to run","body":"I run it from textpad, so ctrl+1 to compile, ctrl+2 to run"}],"answers":[{"tags":[],"owner":{"display_name":"user529543"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1380925104,"creation_date":1380925104,"answer_id":19191665,"question_id":19191633,"body_markdown":"At launch time need to allow more like: java -Xmx2048m PositioningFix will give you 2GB memory  , heap.","title":"How to increase heap size using TextPad","body":"<p>At launch time need to allow more like: java -Xmx2048m PositioningFix will give you 2GB memory  , heap.</p>\n"},{"tags":[],"owner":{"account_id":3394074,"reputation":11,"user_id":2848210,"display_name":"user2848210"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1380997523,"creation_date":1380997523,"answer_id":19201202,"question_id":19191633,"body_markdown":"Thanks for the help guys, for anyone who stumbles across this, I needed to go into Configure &gt; Preferences &gt; Tools &gt; Run Java Application, and enter &quot;-Xmx1024m $BaseName&quot; in the field labelled &quot;Parameters&quot;. That gives a heap size of 1024mb, if I&#39;d wanted 512mb, I would have had to type &quot;-Xmx512m $BaseName&quot;","title":"How to increase heap size using TextPad","body":"<p>Thanks for the help guys, for anyone who stumbles across this, I needed to go into Configure > Preferences > Tools > Run Java Application, and enter \"-Xmx1024m $BaseName\" in the field labelled \"Parameters\". That gives a heap size of 1024mb, if I'd wanted 512mb, I would have had to type \"-Xmx512m $BaseName\"</p>\n"}],"owner":{"account_id":3394074,"reputation":11,"user_id":2848210,"display_name":"user2848210"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1069,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1639308578,"creation_date":1380924965,"question_id":19191633,"body_markdown":"I&#39;m using TextPad to run a simple Java program, and I keep getting an out of memory error.\r\n\r\nSome digging on the internet tells me that I need to increase the heap size, and that the best way to do this seems to be with a flag. However, I can&#39;t find anything on how to implement flags in TextPad, or at least, any that seem to work for my program.\r\n\r\nHere&#39;s the code I&#39;m using:\r\n\r\n\r\n    import java.io.File;\r\n    \r\n    import core.SaveData;\r\n    import core.obj.Player;\r\n    import core.files.PlayerFile;\r\n    import core.files.PlayerAttribute;\r\n    \r\n    \r\n    \r\n    public class PositioningFix {\r\n\r\n    **Rest of the program**\r\n\r\nAny help would be very much appreciated, even if it&#39;s just telling me to ditch TextPad and go with a different editor!\r\n","title":"How to increase heap size using TextPad","body":"<p>I'm using TextPad to run a simple Java program, and I keep getting an out of memory error.</p>\n<p>Some digging on the internet tells me that I need to increase the heap size, and that the best way to do this seems to be with a flag. However, I can't find anything on how to implement flags in TextPad, or at least, any that seem to work for my program.</p>\n<p>Here's the code I'm using:</p>\n<pre><code>import java.io.File;\n\nimport core.SaveData;\nimport core.obj.Player;\nimport core.files.PlayerFile;\nimport core.files.PlayerAttribute;\n\n\n\npublic class PositioningFix {\n\n**Rest of the program**\n</code></pre>\n<p>Any help would be very much appreciated, even if it's just telling me to ditch TextPad and go with a different editor!</p>\n"},{"tags":["java","size","heap-memory","monitoring"],"comments":[{"owner":{"account_id":4686595,"reputation":5802,"user_id":3793867,"accept_rate":29,"display_name":"Darshan Lila"},"score":1,"creation_date":1409129638,"post_id":25522797,"comment_id":39845285,"body_markdown":"You can try JProfiler a tool for heap analysis. Or JVisualVm shipped along with jdk for that purpose.","body":"You can try JProfiler a tool for heap analysis. Or JVisualVm shipped along with jdk for that purpose."},{"owner":{"account_id":1121241,"reputation":4697,"user_id":1109519,"accept_rate":66,"display_name":"nablex"},"score":1,"creation_date":1409130038,"post_id":25522797,"comment_id":39845525,"body_markdown":"It takes about 15 lines of code to poll the JMX yourself.","body":"It takes about 15 lines of code to poll the JMX yourself."},{"owner":{"account_id":4166559,"reputation":91,"user_id":3415413,"accept_rate":0,"display_name":"bortek"},"score":0,"creation_date":1409135403,"post_id":25522797,"comment_id":39848746,"body_markdown":"nablex where can I find those 15 lines of code. JMX is a non http protocol and one cannot easily talk to it. Do you mean 15 lines of Java code? I already have a Java client but It&#39;s slow and takes CPU if I run it on tenths of servers almost at the same time. Can you elaborate a little more?","body":"nablex where can I find those 15 lines of code. JMX is a non http protocol and one cannot easily talk to it. Do you mean 15 lines of Java code? I already have a Java client but It&#39;s slow and takes CPU if I run it on tenths of servers almost at the same time. Can you elaborate a little more?"}],"answers":[{"tags":[],"owner":{"account_id":5279398,"reputation":11,"user_id":4215270,"display_name":"dmacbride"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1415119529,"creation_date":1415119529,"answer_id":26740511,"question_id":25522797,"body_markdown":"Your need has probably been taken care of by now but one option, for others who might stumble on this thread, is a tool called &#39;jvmtop&#39; (link: https://code.google.com/p/jvmtop/).  It works with the IBM J9 JVM (among others).","title":"JAVA heap size monitoring on Linux","body":"<p>Your need has probably been taken care of by now but one option, for others who might stumble on this thread, is a tool called 'jvmtop' (link: <a href=\"https://code.google.com/p/jvmtop/\" rel=\"nofollow\">https://code.google.com/p/jvmtop/</a>).  It works with the IBM J9 JVM (among others).</p>\n"}],"owner":{"account_id":4166559,"reputation":91,"user_id":3415413,"accept_rate":0,"display_name":"bortek"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2359,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1639308510,"creation_date":1409129481,"question_id":25522797,"body_markdown":"I am looking for a way to pull heap sizes (min, max, used) from a Java process on Linux. I need a lightwaight tool/command to use to do the job. Big monitoring packages are not an option. \r\n\r\nI done some googleing and more but could not find a viable alternatives. The only possible option that I found so far is to use JMX protocol. I enabled JMX on Java appication and was succesfully poll it using various java tools that use JMX protocol/library implementation. But these Java tools are slow, taking much cpu during startup when allocating memory. What I want is a simple tool command line that would talk for example JMX protocol and poll the process for heap sizes.\r\n\r\nI am using IBM&#39;s J9 version of Java and jstat tool is not available there.\r\n\r\n\r\nAny ideas anyone?","title":"JAVA heap size monitoring on Linux","body":"<p>I am looking for a way to pull heap sizes (min, max, used) from a Java process on Linux. I need a lightwaight tool/command to use to do the job. Big monitoring packages are not an option. </p>\n\n<p>I done some googleing and more but could not find a viable alternatives. The only possible option that I found so far is to use JMX protocol. I enabled JMX on Java appication and was succesfully poll it using various java tools that use JMX protocol/library implementation. But these Java tools are slow, taking much cpu during startup when allocating memory. What I want is a simple tool command line that would talk for example JMX protocol and poll the process for heap sizes.</p>\n\n<p>I am using IBM's J9 version of Java and jstat tool is not available there.</p>\n\n<p>Any ideas anyone?</p>\n"},{"tags":["java","size","heap-memory","monitoring"],"comments":[{"owner":{"account_id":13054189,"reputation":43,"user_id":9433560,"display_name":"C&#233;drick Rauzy"},"score":0,"creation_date":1548081201,"post_id":54292051,"comment_id":95404770,"body_markdown":"I try to use the psexec or to change the service user in order to get jcmd or jstat working, I didn&#39;t succeed.","body":"I try to use the psexec or to change the service user in order to get jcmd or jstat working, I didn&#39;t succeed."}],"answers":[{"tags":[],"owner":{"account_id":2324956,"reputation":967,"user_id":2039693,"accept_rate":50,"display_name":"Ramesh Subramanian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1548134596,"creation_date":1548134596,"answer_id":54301729,"question_id":54292051,"body_markdown":"Using Jconsole, you can view and capture the Heap/Non-Heap Memory usage (also CPU, Threads, etc). In the Jconsole a small popup windows appears when **Right Click Heap Memory Usage Graph** as shown in the screenshot. You can save the data in the .csv format for the selected time range.\r\n\r\n[![Jconsole Window][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Rfsd7.png","title":"Java Heap Size monitor solution","body":"<p>Using Jconsole, you can view and capture the Heap/Non-Heap Memory usage (also CPU, Threads, etc). In the Jconsole a small popup windows appears when <strong>Right Click Heap Memory Usage Graph</strong> as shown in the screenshot. You can save the data in the .csv format for the selected time range.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Rfsd7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Rfsd7.png\" alt=\"Jconsole Window\"></a></p>\n"},{"tags":[],"owner":{"account_id":2324956,"reputation":967,"user_id":2039693,"accept_rate":50,"display_name":"Ramesh Subramanian"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1548229926,"creation_date":1548229926,"answer_id":54322338,"question_id":54292051,"body_markdown":"Below java code records the Java Heap usage (2 mins once by default) to a text file. You can change the code as per your needs. Change the `private String jmxUrl = ...` as per your environment.\r\n\r\n    package com.heap.monitor;\r\n\r\n    import java.io.BufferedWriter;\r\n    import java.io.FileWriter;\r\n    import java.io.IOException;\r\n    import java.lang.management.*;\r\n    import java.util.Date;\r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n\r\n    import javax.management.*;\r\n    import javax.management.remote.*;\r\n\r\n    public class HeapMonitor extends Thread {\r\n\t\r\n\tprivate JMXServiceURL jmxService = null;\r\n\tprivate\tJMXConnector jmxConnector = null;\r\n\tprotected MBeanServerConnection beanServerConn = null;\r\n\tprivate long frequency = 2 * 60 * 1000L; // 2 mins only collects Heap metrics\r\n\tprivate String jmxUrl = &quot;service:jmx:rmi:///jndi/rmi://192.168.8.252:12222/jmxrmi&quot;;\r\n\tprivate String userName = &quot;none&quot;;\r\n\tprivate String passWord = &quot;none&quot;;\r\n\r\n\tpublic static void main(String[] args) throws InterruptedException {\r\n\t\tHeapMonitor heapMonitor = new HeapMonitor();\r\n\t\theapMonitor.join();\r\n\t}\r\n\t\r\n\tpublic HeapMonitor() {\r\n\t\tthis.start();\r\n\t}\r\n\t\r\n\tpublic void run() {\r\n\t\tboolean flag = true;\r\n\t\twhile(flag) {\r\n\t\t\ttry {\r\n\t\t\t\tbeanServerConn = connectToJVM(jmxUrl, userName, passWord);\r\n\t\t\t\tif(beanServerConn!=null) {\r\n\t\t\t\t\tMemoryMXBean mxbean = (MemoryMXBean) ManagementFactory.newPlatformMXBeanProxy(beanServerConn, ManagementFactory.MEMORY_MXBEAN_NAME, MemoryMXBean.class);\r\n\t\t\t\t\ttry\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tMemoryUsage heapUsage = mxbean.getHeapMemoryUsage();\r\n\t\t\t\t\t\tlong used = heapUsage.getUsed();\r\n\t\t\t\t\t\tlong max = heapUsage.getMax();\r\n\t\t\t\t\t\tlong commited = heapUsage.getCommitted();\r\n\t\t\t\t\t\tlong init = heapUsage.getInit();\r\n\t\t\t\t\t\tStringBuffer buffer = new StringBuffer();\r\n\t\t\t\t\t\tDate date = new Date();\r\n\t\t\t\t\t\tbuffer.append(date).append(&quot; - &quot;);\r\n\t\t\t\t\t\tbuffer.append(init).append(&quot;   &quot;).append(commited).append(&quot;   &quot;).append(max).append(&quot;   &quot;).append(used);\r\n\t\t\t\t\t\t//System.out.println(buffer.toString());\r\n\t\t\t\t\t\tappendStrToFile(&quot;heap.txt&quot; , buffer.toString());\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcatch(Exception ee) {\r\n\t\t\t\t\t\tee.printStackTrace();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcatch(Exception e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\ttry {\r\n\t\t\t\tThread.sleep(frequency);\r\n\t\t\t}\r\n\t\t\tcatch(Exception e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tprotected MBeanServerConnection connectToJVM(String jvmURL, String user, String pass)\r\n\t{\r\n\t\tbeanServerConn = null ;  \r\n\t\ttry\r\n\t\t{\r\n\t\t\tjmxService = new JMXServiceURL(jvmURL);\r\n\t\t\tMap environment = new HashMap();\r\n\t\t\tint jmxconnect_timeout = 30000;\r\n\t\t\tenvironment.put(&quot;jmx.remote.x.request.waiting.timeout&quot;, Long.toString(jmxconnect_timeout));\r\n\r\n\t\t\t\r\n\t\t\tif(user.equalsIgnoreCase(&quot;none&quot;)|| (pass.equalsIgnoreCase(&quot;none&quot;))){\r\n\t\t\t\ttry{\r\n\t\t\t\t\tjmxConnector = JMXConnectorFactory.connect(jmxService,environment);\r\n\t\t\t\t\tbeanServerConn = jmxConnector.getMBeanServerConnection();\r\n\t\t\t\t}\r\n\t\t\t\tcatch(IOException ioe){\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tString [] credentials={user,pass};\r\n\t\t\t\tenvironment.put(JMXConnector.CREDENTIALS, credentials);\r\n\t\t\t\ttry{\r\n\t\t\t\t\tjmxConnector = JMXConnectorFactory.connect(jmxService,environment);\r\n\t\t\t\t\tbeanServerConn = jmxConnector.getMBeanServerConnection();\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\tcatch(IOException ioe){\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tbeanServerConn = jmxConnector.getMBeanServerConnection();\r\n\t\t\t\r\n\t\t\tif(beanServerConn == null)\r\n\t\t\t{\r\n\t\t\t\tSystem.out.println(&quot;Connection to JVM is not established for jvmURL : &quot; + jvmURL);\r\n\t\t\t\tcloseJVMConn();\r\n\t\t\t}\r\n\t\t}\r\n\t\tcatch(Exception ex)\r\n\t\t{\r\n\t\t\tSystem.out.println(&quot;Connection to JVM is not established for jvmURL : &quot; + jvmURL);\r\n\t\t\tcloseJVMConn();\r\n\t\t}\r\n\t\treturn beanServerConn;\r\n\t}\r\n\t\r\n\tpublic void closeJVMConn(){\r\n\t\ttry{\r\n\t\t\tbeanServerConn = null;\r\n\t\t\tif(jmxConnector != null)\r\n\t\t\t\tjmxConnector.close();\r\n\t\t}\r\n\t\tcatch(Exception ex){\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\t\r\n\t public void appendStrToFile(String fileName, String str) { \r\n\t\ttry { \r\n\t\t\t// Open given file in append mode. \r\n\t\t\tBufferedWriter out = new BufferedWriter(new FileWriter(fileName, true)); \r\n\t\t\tout.write(str); \r\n\t\t\tout.newLine();\r\n\t\t\tout.close(); \r\n\t\t} \r\n\t\tcatch (IOException e) { \r\n\t\t\tSystem.out.println(&quot;exception occoured&quot; + e); \r\n\t\t} \r\n\t } \r\n    }\r\n","title":"Java Heap Size monitor solution","body":"<p>Below java code records the Java Heap usage (2 mins once by default) to a text file. You can change the code as per your needs. Change the <code>private String jmxUrl = ...</code> as per your environment.</p>\n\n<pre><code>package com.heap.monitor;\n\nimport java.io.BufferedWriter;\nimport java.io.FileWriter;\nimport java.io.IOException;\nimport java.lang.management.*;\nimport java.util.Date;\nimport java.util.HashMap;\nimport java.util.Map;\n\nimport javax.management.*;\nimport javax.management.remote.*;\n\npublic class HeapMonitor extends Thread {\n\nprivate JMXServiceURL jmxService = null;\nprivate JMXConnector jmxConnector = null;\nprotected MBeanServerConnection beanServerConn = null;\nprivate long frequency = 2 * 60 * 1000L; // 2 mins only collects Heap metrics\nprivate String jmxUrl = \"service:jmx:rmi:///jndi/rmi://192.168.8.252:12222/jmxrmi\";\nprivate String userName = \"none\";\nprivate String passWord = \"none\";\n\npublic static void main(String[] args) throws InterruptedException {\n    HeapMonitor heapMonitor = new HeapMonitor();\n    heapMonitor.join();\n}\n\npublic HeapMonitor() {\n    this.start();\n}\n\npublic void run() {\n    boolean flag = true;\n    while(flag) {\n        try {\n            beanServerConn = connectToJVM(jmxUrl, userName, passWord);\n            if(beanServerConn!=null) {\n                MemoryMXBean mxbean = (MemoryMXBean) ManagementFactory.newPlatformMXBeanProxy(beanServerConn, ManagementFactory.MEMORY_MXBEAN_NAME, MemoryMXBean.class);\n                try\n                {\n                    MemoryUsage heapUsage = mxbean.getHeapMemoryUsage();\n                    long used = heapUsage.getUsed();\n                    long max = heapUsage.getMax();\n                    long commited = heapUsage.getCommitted();\n                    long init = heapUsage.getInit();\n                    StringBuffer buffer = new StringBuffer();\n                    Date date = new Date();\n                    buffer.append(date).append(\" - \");\n                    buffer.append(init).append(\"   \").append(commited).append(\"   \").append(max).append(\"   \").append(used);\n                    //System.out.println(buffer.toString());\n                    appendStrToFile(\"heap.txt\" , buffer.toString());\n                }\n                catch(Exception ee) {\n                    ee.printStackTrace();\n                }\n            }\n        }\n        catch(Exception e) {\n            e.printStackTrace();\n        }\n\n        try {\n            Thread.sleep(frequency);\n        }\n        catch(Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n\nprotected MBeanServerConnection connectToJVM(String jvmURL, String user, String pass)\n{\n    beanServerConn = null ;  \n    try\n    {\n        jmxService = new JMXServiceURL(jvmURL);\n        Map environment = new HashMap();\n        int jmxconnect_timeout = 30000;\n        environment.put(\"jmx.remote.x.request.waiting.timeout\", Long.toString(jmxconnect_timeout));\n\n\n        if(user.equalsIgnoreCase(\"none\")|| (pass.equalsIgnoreCase(\"none\"))){\n            try{\n                jmxConnector = JMXConnectorFactory.connect(jmxService,environment);\n                beanServerConn = jmxConnector.getMBeanServerConnection();\n            }\n            catch(IOException ioe){\n            }\n        }\n        else\n        {\n            String [] credentials={user,pass};\n            environment.put(JMXConnector.CREDENTIALS, credentials);\n            try{\n                jmxConnector = JMXConnectorFactory.connect(jmxService,environment);\n                beanServerConn = jmxConnector.getMBeanServerConnection();\n\n            }\n            catch(IOException ioe){\n            }\n        }\n\n        beanServerConn = jmxConnector.getMBeanServerConnection();\n\n        if(beanServerConn == null)\n        {\n            System.out.println(\"Connection to JVM is not established for jvmURL : \" + jvmURL);\n            closeJVMConn();\n        }\n    }\n    catch(Exception ex)\n    {\n        System.out.println(\"Connection to JVM is not established for jvmURL : \" + jvmURL);\n        closeJVMConn();\n    }\n    return beanServerConn;\n}\n\npublic void closeJVMConn(){\n    try{\n        beanServerConn = null;\n        if(jmxConnector != null)\n            jmxConnector.close();\n    }\n    catch(Exception ex){\n        return;\n    }\n}\n\n public void appendStrToFile(String fileName, String str) { \n    try { \n        // Open given file in append mode. \n        BufferedWriter out = new BufferedWriter(new FileWriter(fileName, true)); \n        out.write(str); \n        out.newLine();\n        out.close(); \n    } \n    catch (IOException e) { \n        System.out.println(\"exception occoured\" + e); \n    } \n } \n}\n</code></pre>\n"}],"owner":{"account_id":13054189,"reputation":43,"user_id":9433560,"display_name":"C&#233;drick Rauzy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2046,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":54322338,"answer_count":2,"score":0,"last_activity_date":1639308468,"creation_date":1548080883,"question_id":54292051,"body_markdown":"I would like to monitor the used java heap size of a jboss service running on windows during serveral days. I first try to use perfmon from windows but I didn&#39;t get the value I expected. I can hook jvisualvm to this this service using jmx (server:port), I can also use jconsole or jmc (java mission control). Indeed I cannot use flight recording due to the jvm version.\r\nWith jcmd or jstat, I cannot see the process I&#39;m interested in. As I&#39;m new in Java, could someone suggest an application or script which would allow me to catpure those value and push them to a text file for example. I could code something in .Net as well if a library would exist.\r\n\r\nThanks\r\n\r\n","title":"Java Heap Size monitor solution","body":"<p>I would like to monitor the used java heap size of a jboss service running on windows during serveral days. I first try to use perfmon from windows but I didn't get the value I expected. I can hook jvisualvm to this this service using jmx (server:port), I can also use jconsole or jmc (java mission control). Indeed I cannot use flight recording due to the jvm version.\nWith jcmd or jstat, I cannot see the process I'm interested in. As I'm new in Java, could someone suggest an application or script which would allow me to catpure those value and push them to a text file for example. I could code something in .Net as well if a library would exist.</p>\n\n<p>Thanks</p>\n"},{"tags":["java","class","heap-memory"],"answers":[{"tags":[],"owner":{"account_id":395357,"reputation":44547,"user_id":758280,"accept_rate":100,"display_name":"Jeffrey"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1372955681,"creation_date":1372955681,"answer_id":17474940,"question_id":17474246,"body_markdown":"The information associated with a loaded class (methods, fields, etc.) reside in the [method area](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-2.html#jvms-2.5.4).\r\n\r\n&gt; Although the method area is logically part of the heap, simple\r\n&gt; implementations may choose not to either garbage collect or compact\r\n&gt; it. This version of the Java Virtual Machine specification does not\r\n&gt; mandate the location of the method area or the policies used to manage\r\n&gt; compiled code.\r\n\r\nThe method area may or may not be a part of the heap, it is entirely up to the JVM implementation to decide where to store it.\r\n\r\n`Class` objects themselves will be stored on the heap.","title":"Do java classes metadata go on the heap?","body":"<p>The information associated with a loaded class (methods, fields, etc.) reside in the <a href=\"http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-2.html#jvms-2.5.4\" rel=\"nofollow\">method area</a>.</p>\n\n<blockquote>\n  <p>Although the method area is logically part of the heap, simple\n  implementations may choose not to either garbage collect or compact\n  it. This version of the Java Virtual Machine specification does not\n  mandate the location of the method area or the policies used to manage\n  compiled code.</p>\n</blockquote>\n\n<p>The method area may or may not be a part of the heap, it is entirely up to the JVM implementation to decide where to store it.</p>\n\n<p><code>Class</code> objects themselves will be stored on the heap.</p>\n"},{"tags":[],"owner":{"account_id":7552748,"reputation":31,"user_id":5733579,"display_name":"Priyal"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1598842630,"creation_date":1592455431,"answer_id":62442535,"question_id":17474246,"body_markdown":"From the Java 8 release, &#39;class metadata&#39; is stored in the metaspace region. The beauty of the MetaSpace region is it grows automatically when in need and we can set its upper bound as well by setting maxMetaSpaceSize.  \r\n\r\nBefore Java 8 release, it used to be a part of the PermGen region. And PermGen was a part of the heap so in that sense yes, to your question.\r\n\r\n[PermGen vs Metaspace][1]\r\n\r\n\r\n  [1]: https://www.baeldung.com/java-permgen-metaspace","title":"Do java classes metadata go on the heap?","body":"<p>From the Java 8 release, 'class metadata' is stored in the metaspace region. The beauty of the MetaSpace region is it grows automatically when in need and we can set its upper bound as well by setting maxMetaSpaceSize.</p>\n<p>Before Java 8 release, it used to be a part of the PermGen region. And PermGen was a part of the heap so in that sense yes, to your question.</p>\n<p><a href=\"https://www.baeldung.com/java-permgen-metaspace\" rel=\"nofollow noreferrer\">PermGen vs Metaspace</a></p>\n"}],"owner":{"account_id":205758,"reputation":16759,"user_id":454671,"accept_rate":83,"display_name":"Victor"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2373,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"accepted_answer_id":17474940,"answer_count":2,"score":4,"last_activity_date":1639308410,"creation_date":1372952999,"question_id":17474246,"body_markdown":"In Java when classloader loads class files, where do the loaded clases reside? In the heap? I understand that objects lie in the heap but what about the class itself? In Java even Class is an Object, so my guess is that it goes on the heap?","title":"Do java classes metadata go on the heap?","body":"<p>In Java when classloader loads class files, where do the loaded clases reside? In the heap? I understand that objects lie in the heap but what about the class itself? In Java even Class is an Object, so my guess is that it goes on the heap?</p>\n"},{"tags":["java","heap-memory"],"answers":[{"tags":[],"owner":{"account_id":1058083,"reputation":76416,"user_id":1060350,"accept_rate":76,"display_name":"Has QUIT--Anony-Mousse"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1383205625,"creation_date":1383205625,"answer_id":19700858,"question_id":17619441,"body_markdown":"`int` values are not objects. They cannot be memory-managed on their own; there exist no garbage collection that could scrape leftover `int` values. Part of the overhead of using `Integer` objects is that they need the type and memory management information needed to allow for garbage collection.\r\n\r\nIn this scenario, the `int` lives on the stack. (And is managed via the stack pointer; not on its own)","title":"Does return value of function occupy memory when it&#39;s not stored in any variable?","body":"<p><code>int</code> values are not objects. They cannot be memory-managed on their own; there exist no garbage collection that could scrape leftover <code>int</code> values. Part of the overhead of using <code>Integer</code> objects is that they need the type and memory management information needed to allow for garbage collection.</p>\n\n<p>In this scenario, the <code>int</code> lives on the stack. (And is managed via the stack pointer; not on its own)</p>\n"}],"owner":{"account_id":3039819,"reputation":307,"user_id":2577122,"display_name":"Swap"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":388,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1639308400,"creation_date":1373645958,"question_id":17619441,"body_markdown":"    public class testClass{\r\n\r\n    public static void main(String[] args){\r\n    \tSystem.out.println(&quot;Output is: &quot;+retInt());\r\n    }\r\n    \r\n    public static int retInt(){\r\n    \treturn 1;\r\n    }\r\n\r\n    }\r\n\r\nDoes the value of `+retInt()` in the print statement occupies space in memory? If yes then where -- in stack or in java heap?","title":"Does return value of function occupy memory when it&#39;s not stored in any variable?","body":"<pre><code>public class testClass{\n\npublic static void main(String[] args){\n    System.out.println(\"Output is: \"+retInt());\n}\n\npublic static int retInt(){\n    return 1;\n}\n\n}\n</code></pre>\n\n<p>Does the value of <code>+retInt()</code> in the print statement occupies space in memory? If yes then where -- in stack or in java heap?</p>\n"},{"tags":["java","heap-memory","bufferedimage","javax.imageio","loadimage"],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1373880133,"creation_date":1373819108,"answer_id":17641252,"question_id":17641166,"body_markdown":"&gt; The overall size of all files is only around 40mb ...\r\n\r\nBut when you load the image files into memory, the images will decompressed and turned into arrays of pixels.  Depending on the original image file format (and compression parameters) this could require an *order of magnitude* or more heap space.\r\n\r\nIt is not entirely clear what you are trying to achieve, but maybe you should consider only caching these images in memory when they are actually going to be used.","title":"Why do I get a java heap space exception when I load around 11k images with a size of around 40mb","body":"<blockquote>\n  <p>The overall size of all files is only around 40mb ...</p>\n</blockquote>\n\n<p>But when you load the image files into memory, the images will decompressed and turned into arrays of pixels.  Depending on the original image file format (and compression parameters) this could require an <em>order of magnitude</em> or more heap space.</p>\n\n<p>It is not entirely clear what you are trying to achieve, but maybe you should consider only caching these images in memory when they are actually going to be used.</p>\n"}],"owner":{"account_id":1355216,"reputation":825,"user_id":1293755,"accept_rate":90,"display_name":"Waylander"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":477,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":17641252,"answer_count":1,"score":0,"last_activity_date":1639308325,"creation_date":1373818579,"question_id":17641166,"body_markdown":"I have a situation in my program where I need to access a certain number of images saved on my hard drive. I could either only load them once I really need them or load them all already at start up. \r\n\r\nOut of curiousity I tried to read all (around 11k) images from several folders and save them in several Lists. I was wondering whether this takes too long but received an OutOfMemoryError after reading in around ~ 9k images. \r\n\r\nMy JRE has a heap size of 1g (-Xmx1g).\r\n\r\nWhy does this happen for my code? Am I producing a memory leak? Do you have any suggestions what to change for not experiencing this anymore or is the solution just to read only the files, once I need them? The overall size of all files is only around 40mb, so I thought that it would be okay to keep it in my memory (40mb seems not to be too much from my 1g heap size). Or does java perform some crazy magic stuff multiplying the file size by high numbers once loaded? \r\n\r\nI have done some research on stackoverflow but couldn&#39;t really convert the given answers (like from [here][1] or [here][2])for my case. So if anyone of you has an idea, I would be really happy :)\r\n\r\nMy code is here, sorry if it&#39;s a bit ugly - I was just messing around: \r\n\r\n    import java.awt.image.BufferedImage;\r\n    import java.io.File;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    import javax.imageio.ImageIO;\r\n    \r\n    public class FatfontsManager {\r\n    \r\n    \tprivate List&lt;BufferedImage&gt; until9;\r\n    \tprivate List&lt;BufferedImage&gt; until99;\r\n    \tprivate List&lt;BufferedImage&gt; until999;\r\n    \tprivate List&lt;BufferedImage&gt; until9999;\r\n    \r\n    \t// loads and keeps all images \r\n    \r\n    \tpublic FatfontsManager() {\r\n    \t\t\r\n    \t\tuntil9 = new ArrayList&lt;&gt;();\r\n    \t\tuntil99 = new ArrayList&lt;&gt;();\r\n    \t\tuntil999 = new ArrayList&lt;&gt;();\r\n    \t\tuntil9999 = new ArrayList&lt;&gt;();\r\n    \r\n    \t\tString absolutPathToThisProject = new java.io.File(&quot;&quot;)\r\n    \t\t\t\t.getAbsolutePath();\r\n    \r\n    \t\t// load Images\r\n    \t\tfor (int i = 1; i &lt; 10; i++) {\r\n    \t\t\tuntil9.add(loadImage(absolutPathToThisProject\r\n    \t\t\t\t\t+ &quot;\\\\latexDir\\\\0..9\\\\&quot; + i + &quot;.png&quot;));\r\n    \t\t}\r\n    \t\tSystem.out.println(&quot;1 - 9 loaded&quot;);\r\n    \t\tfor (int i = 1; i &lt; 100; i++) {\r\n    \t\t\tuntil99.add(loadImage(absolutPathToThisProject\r\n    \t\t\t\t\t+ &quot;\\\\latexDir\\\\0..99\\\\&quot; + i + &quot;.png&quot;));\r\n    \t\t}\r\n    \t\tSystem.out.println(&quot;1 - 99 loaded&quot;);\r\n    \t\tfor (int i = 1; i &lt; 1000; i++) {\r\n    \t\t\tuntil999.add(loadImage(absolutPathToThisProject\r\n    \t\t\t\t\t+ &quot;\\\\latexDir\\\\0..999\\\\&quot; + i + &quot;.png&quot;));\r\n    \t\t}\r\n    \t\tSystem.out.println(&quot;1 - 999 loaded&quot;);\r\n    \t\tfor (int i = 1; i &lt; 10000; i++) {\r\n    \t\t\tuntil9999.add(loadImage(absolutPathToThisProject\r\n    \t\t\t\t\t+ &quot;\\\\latexDir\\\\0..9999\\\\&quot; + i + &quot;.png&quot;));\r\n    \t\t}\r\n    \t\tSystem.out.println(&quot;1 - 9999 loaded&quot;);\r\n    \t}\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tnew FatfontsManager();\r\n    \t}\r\n    \r\n    \tpublic static BufferedImage loadImage(String ref) {\r\n    \t\tBufferedImage bimg = null;\r\n    \t\ttry {\r\n    \r\n    \t\t\tbimg = ImageIO.read(new File(ref));\r\n    \t\t} catch (Exception e) {\r\n    \t\t\tSystem.err.println(&quot;Error loading image file &quot; + ref);\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t\treturn bimg;\r\n    \t}\r\n    \r\n    }\r\n\r\nThanks a lot for every answer. \r\n\r\n  [1]: https://stackoverflow.com/questions/16574789/java-lang-outofmemoryerror-java-heap-space-when-stitching-13k-png-images-toget?rq=1\r\n  [2]: https://stackoverflow.com/questions/8222224/reading-images-using-imageio-readfile-causes-java-lang-outofmemoryerror-java","title":"Why do I get a java heap space exception when I load around 11k images with a size of around 40mb","body":"<p>I have a situation in my program where I need to access a certain number of images saved on my hard drive. I could either only load them once I really need them or load them all already at start up. </p>\n\n<p>Out of curiousity I tried to read all (around 11k) images from several folders and save them in several Lists. I was wondering whether this takes too long but received an OutOfMemoryError after reading in around ~ 9k images. </p>\n\n<p>My JRE has a heap size of 1g (-Xmx1g).</p>\n\n<p>Why does this happen for my code? Am I producing a memory leak? Do you have any suggestions what to change for not experiencing this anymore or is the solution just to read only the files, once I need them? The overall size of all files is only around 40mb, so I thought that it would be okay to keep it in my memory (40mb seems not to be too much from my 1g heap size). Or does java perform some crazy magic stuff multiplying the file size by high numbers once loaded? </p>\n\n<p>I have done some research on stackoverflow but couldn't really convert the given answers (like from <a href=\"https://stackoverflow.com/questions/16574789/java-lang-outofmemoryerror-java-heap-space-when-stitching-13k-png-images-toget?rq=1\">here</a> or <a href=\"https://stackoverflow.com/questions/8222224/reading-images-using-imageio-readfile-causes-java-lang-outofmemoryerror-java\">here</a>)for my case. So if anyone of you has an idea, I would be really happy :)</p>\n\n<p>My code is here, sorry if it's a bit ugly - I was just messing around: </p>\n\n<pre><code>import java.awt.image.BufferedImage;\nimport java.io.File;\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport javax.imageio.ImageIO;\n\npublic class FatfontsManager {\n\n    private List&lt;BufferedImage&gt; until9;\n    private List&lt;BufferedImage&gt; until99;\n    private List&lt;BufferedImage&gt; until999;\n    private List&lt;BufferedImage&gt; until9999;\n\n    // loads and keeps all images \n\n    public FatfontsManager() {\n\n        until9 = new ArrayList&lt;&gt;();\n        until99 = new ArrayList&lt;&gt;();\n        until999 = new ArrayList&lt;&gt;();\n        until9999 = new ArrayList&lt;&gt;();\n\n        String absolutPathToThisProject = new java.io.File(\"\")\n                .getAbsolutePath();\n\n        // load Images\n        for (int i = 1; i &lt; 10; i++) {\n            until9.add(loadImage(absolutPathToThisProject\n                    + \"\\\\latexDir\\\\0..9\\\\\" + i + \".png\"));\n        }\n        System.out.println(\"1 - 9 loaded\");\n        for (int i = 1; i &lt; 100; i++) {\n            until99.add(loadImage(absolutPathToThisProject\n                    + \"\\\\latexDir\\\\0..99\\\\\" + i + \".png\"));\n        }\n        System.out.println(\"1 - 99 loaded\");\n        for (int i = 1; i &lt; 1000; i++) {\n            until999.add(loadImage(absolutPathToThisProject\n                    + \"\\\\latexDir\\\\0..999\\\\\" + i + \".png\"));\n        }\n        System.out.println(\"1 - 999 loaded\");\n        for (int i = 1; i &lt; 10000; i++) {\n            until9999.add(loadImage(absolutPathToThisProject\n                    + \"\\\\latexDir\\\\0..9999\\\\\" + i + \".png\"));\n        }\n        System.out.println(\"1 - 9999 loaded\");\n    }\n\n    public static void main(String[] args) {\n        new FatfontsManager();\n    }\n\n    public static BufferedImage loadImage(String ref) {\n        BufferedImage bimg = null;\n        try {\n\n            bimg = ImageIO.read(new File(ref));\n        } catch (Exception e) {\n            System.err.println(\"Error loading image file \" + ref);\n            e.printStackTrace();\n        }\n        return bimg;\n    }\n\n}\n</code></pre>\n\n<p>Thanks a lot for every answer. </p>\n"},{"tags":["java","alignment","pdfbox","boxable"],"comments":[{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":1,"creation_date":1635804693,"post_id":69801508,"comment_id":123386634,"body_markdown":"Pdfbox does not include an explicit table generation feature. You probably mean some library you use on top of pdfbox. Please name it.","body":"Pdfbox does not include an explicit table generation feature. You probably mean some library you use on top of pdfbox. Please name it."},{"owner":{"account_id":18355178,"reputation":167,"user_id":13368385,"display_name":"Dahlin"},"score":0,"creation_date":1635834792,"post_id":69801508,"comment_id":123391603,"body_markdown":"ah yes I forgot, im Using https://github.com/dhorions/boxable","body":"ah yes I forgot, im Using <a href=\"https://github.com/dhorions/boxable\" rel=\"nofollow noreferrer\">github.com/dhorions/boxable</a>"}],"answers":[{"tags":[],"owner":{"account_id":22189504,"reputation":1,"user_id":16431926,"display_name":"SANTHOSH WEB DEVELOPER"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639260705,"creation_date":1639254481,"answer_id":70318765,"question_id":69801508,"body_markdown":"\r\n\r\n      public void Test() throws IOException     {  \r\n\r\n        //Set margins\r\n       \r\n        float margin = 10;\r\n\r\n        //Initialize Document\r\n        PDDocument doc = new PDDocument();\r\n        PDPage page = addNewPage(doc);\r\n\r\n        //Initialize table\r\n        float tableWidth = page.getMediaBox().getWidth() - (2 * margin);\r\n        float yStartNewPage = page.getMediaBox().getHeight() - (2 * margin);\r\n        boolean drawContent = true;\r\n        boolean drawLines = true;\r\n        float yStart = yStartNewPage;\r\n        float bottomMargin = 70;\r\n        BaseTable table = new BaseTable(yStart, yStartNewPage, bottomMargin, tableWidth, margin, doc, page, drawLines,\r\n                drawContent);\r\n\r\n        // set default line spacing for entire table\r\n        table.setLineSpacing(1.5f);\r\n\r\n        Row&lt;PDPage&gt; row = table.createRow(10);\r\n\r\n        // set single spacing for entire row\r\n        row.setLineSpacing(1f);\r\n\r\n        // my first 3x wider cell\r\n        Cell&lt;PDPage&gt; cell = row.createCell((3*100/15f), &quot;1&quot;,\r\n                HorizontalAlignment.get(&quot;center&quot;), VerticalAlignment.get(&quot;top&quot;));\r\n        cell.setFontSize(6);\r\n\r\n                // my other 12 equal cells\r\n        for(int i=2; i&lt;14; i++){\r\n            Cell&lt;PDPage&gt; cell2 = row.createCell((100/15f), String.valueOf(i),\r\n                    HorizontalAlignment.get(&quot;center&quot;), VerticalAlignment.get(&quot;top&quot;));\r\n            cell2.setFontSize(6);\r\n        }\r\n\r\n        table.draw();\r\n\r\n        //Save the document\r\n        File file = new File(&quot;target/test.pdf&quot;);\r\n        System.out.println(&quot;Sample file saved at : &quot; + file.getAbsolutePath());\r\n        Files.createParentDirs(file);\r\n        doc.save(file);\r\n        doc.close();\r\n    }\r\n\r\n\r\nAdjust set position and table width....","title":"Apache PDFBox Table/Row Alignment with Boxable","body":"<pre><code>  public void Test() throws IOException     {  \n\n    //Set margins\n   \n    float margin = 10;\n\n    //Initialize Document\n    PDDocument doc = new PDDocument();\n    PDPage page = addNewPage(doc);\n\n    //Initialize table\n    float tableWidth = page.getMediaBox().getWidth() - (2 * margin);\n    float yStartNewPage = page.getMediaBox().getHeight() - (2 * margin);\n    boolean drawContent = true;\n    boolean drawLines = true;\n    float yStart = yStartNewPage;\n    float bottomMargin = 70;\n    BaseTable table = new BaseTable(yStart, yStartNewPage, bottomMargin, tableWidth, margin, doc, page, drawLines,\n            drawContent);\n\n    // set default line spacing for entire table\n    table.setLineSpacing(1.5f);\n\n    Row&lt;PDPage&gt; row = table.createRow(10);\n\n    // set single spacing for entire row\n    row.setLineSpacing(1f);\n\n    // my first 3x wider cell\n    Cell&lt;PDPage&gt; cell = row.createCell((3*100/15f), &quot;1&quot;,\n            HorizontalAlignment.get(&quot;center&quot;), VerticalAlignment.get(&quot;top&quot;));\n    cell.setFontSize(6);\n\n            // my other 12 equal cells\n    for(int i=2; i&lt;14; i++){\n        Cell&lt;PDPage&gt; cell2 = row.createCell((100/15f), String.valueOf(i),\n                HorizontalAlignment.get(&quot;center&quot;), VerticalAlignment.get(&quot;top&quot;));\n        cell2.setFontSize(6);\n    }\n\n    table.draw();\n\n    //Save the document\n    File file = new File(&quot;target/test.pdf&quot;);\n    System.out.println(&quot;Sample file saved at : &quot; + file.getAbsolutePath());\n    Files.createParentDirs(file);\n    doc.save(file);\n    doc.close();\n}\n</code></pre>\n<p>Adjust set position and table width....</p>\n"},{"tags":[],"owner":{"account_id":22189504,"reputation":1,"user_id":16431926,"display_name":"SANTHOSH WEB DEVELOPER"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639308308,"creation_date":1639255025,"answer_id":70318841,"question_id":69801508,"body_markdown":"Adjust set position and table width:\r\n\r\n```\r\npublic void Test() throws IOException {\r\n    //Set margins\r\n    float margin = 10;\r\n\r\n    //Initialize Document\r\n    PDDocument doc = new PDDocument();\r\n    PDPage page = addNewPage(doc);\r\n\r\n    //Initialize table\r\n    float tableWidth = page.getMediaBox().getWidth() - (2 * margin);\r\n    float yStartNewPage = page.getMediaBox().getHeight() - (2 * margin);\r\n    boolean drawContent = true;\r\n    boolean drawLines = true;\r\n    float yStart = yStartNewPage;\r\n    float bottomMargin = 70;\r\n    BaseTable table = new BaseTable(yStart, yStartNewPage, bottomMargin, tableWidth, margin, doc, page, drawLines, drawContent);\r\n\r\n    // set default line spacing for entire table\r\n    table.setLineSpacing(1.5f);\r\n\r\n    Row&lt;PDPage&gt; row = table.createRow(10);\r\n\r\n    // set single spacing for entire row\r\n    row.setLineSpacing(1f);\r\n\r\n    // my first 3x wider cell\r\n    Cell&lt;PDPage&gt; cell = row.createCell((3*100/15f), &quot;1&quot;,\r\n    HorizontalAlignment.get(&quot;center&quot;), VerticalAlignment.get(&quot;top&quot;));\r\n    cell.setFontSize(6);\r\n\r\n    // my other 12 equal cells\r\n    for(int i=2; i&lt;14; i++){\r\n        Cell&lt;PDPage&gt; cell2 = row.createCell((100/15f), String.valueOf(i),                    \r\n        HorizontalAlignment.get(&quot;center&quot;), VerticalAlignment.get(&quot;top&quot;));\r\n        cell2.setFontSize(6);\r\n    }\r\n\r\n    table.draw();\r\n\r\n    //Save the document\r\n    File file = new File(&quot;target/test.pdf&quot;);\r\n    System.out.println(&quot;Sample file saved at : &quot; + file.getAbsolutePath());\r\n    Files.createParentDirs(file);\r\n    doc.save(file);\r\n    doc.close();\r\n}\r\n```","title":"Apache PDFBox Table/Row Alignment with Boxable","body":"<p>Adjust set position and table width:</p>\n<pre><code>public void Test() throws IOException {\n    //Set margins\n    float margin = 10;\n\n    //Initialize Document\n    PDDocument doc = new PDDocument();\n    PDPage page = addNewPage(doc);\n\n    //Initialize table\n    float tableWidth = page.getMediaBox().getWidth() - (2 * margin);\n    float yStartNewPage = page.getMediaBox().getHeight() - (2 * margin);\n    boolean drawContent = true;\n    boolean drawLines = true;\n    float yStart = yStartNewPage;\n    float bottomMargin = 70;\n    BaseTable table = new BaseTable(yStart, yStartNewPage, bottomMargin, tableWidth, margin, doc, page, drawLines, drawContent);\n\n    // set default line spacing for entire table\n    table.setLineSpacing(1.5f);\n\n    Row&lt;PDPage&gt; row = table.createRow(10);\n\n    // set single spacing for entire row\n    row.setLineSpacing(1f);\n\n    // my first 3x wider cell\n    Cell&lt;PDPage&gt; cell = row.createCell((3*100/15f), &quot;1&quot;,\n    HorizontalAlignment.get(&quot;center&quot;), VerticalAlignment.get(&quot;top&quot;));\n    cell.setFontSize(6);\n\n    // my other 12 equal cells\n    for(int i=2; i&lt;14; i++){\n        Cell&lt;PDPage&gt; cell2 = row.createCell((100/15f), String.valueOf(i),                    \n        HorizontalAlignment.get(&quot;center&quot;), VerticalAlignment.get(&quot;top&quot;));\n        cell2.setFontSize(6);\n    }\n\n    table.draw();\n\n    //Save the document\n    File file = new File(&quot;target/test.pdf&quot;);\n    System.out.println(&quot;Sample file saved at : &quot; + file.getAbsolutePath());\n    Files.createParentDirs(file);\n    doc.save(file);\n    doc.close();\n}\n</code></pre>\n"}],"owner":{"account_id":18355178,"reputation":167,"user_id":13368385,"display_name":"Dahlin"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1380,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1639308308,"creation_date":1635792927,"question_id":69801508,"body_markdown":"I am exporting a PDF in my program, and I wanted to create a table with ApachePDF Box which should be about 50-60% of the Page width.\r\n\r\nHowever, I didnt manage to find anything about centering the rows/the table itself.\r\n\r\nI found how to align text in the row/cell itself, but if I create a Row that does not use the full width of the page, its always left aligned, and I dont know how to center align the row, since the row or table does not have a `setAlign` method.\n\nIm using Boxable on top of it (https://github.com/dhorions/boxable)","title":"Apache PDFBox Table/Row Alignment with Boxable","body":"<p>I am exporting a PDF in my program, and I wanted to create a table with ApachePDF Box which should be about 50-60% of the Page width.</p>\n<p>However, I didnt manage to find anything about centering the rows/the table itself.</p>\n<p>I found how to align text in the row/cell itself, but if I create a Row that does not use the full width of the page, its always left aligned, and I dont know how to center align the row, since the row or table does not have a <code>setAlign</code> method.</p>\n<p>Im using Boxable on top of it (<a href=\"https://github.com/dhorions/boxable\" rel=\"nofollow noreferrer\">https://github.com/dhorions/boxable</a>)</p>\n"},{"tags":["java","heap-memory"],"comments":[{"owner":{"account_id":2107346,"reputation":75,"user_id":1873379,"accept_rate":50,"display_name":"user1873379"},"score":0,"creation_date":1374862153,"post_id":17888030,"comment_id":26123850,"body_markdown":"thanks for answer, any good reference?","body":"thanks for answer, any good reference?"},{"owner":{"account_id":1903805,"reputation":41397,"user_id":1719067,"accept_rate":73,"display_name":"Narendra Pathai"},"score":0,"creation_date":1374862167,"post_id":17888030,"comment_id":26123857,"body_markdown":"http://middlewaremagic.com/weblogic/?tag=young-generation","body":"<a href=\"http://middlewaremagic.com/weblogic/?tag=young-generation\" rel=\"nofollow noreferrer\">middlewaremagic.com/weblogic/?tag=young-generation</a>"},{"owner":{"account_id":39037,"reputation":12517,"user_id":112500,"accept_rate":94,"display_name":"Batakj"},"score":0,"creation_date":1374865777,"post_id":17888030,"comment_id":26125592,"body_markdown":"which version of Java??? 5 GB, 10 GB... till Java 7.. Never heard...","body":"which version of Java??? 5 GB, 10 GB... till Java 7.. Never heard..."},{"owner":{"account_id":2107346,"reputation":75,"user_id":1873379,"accept_rate":50,"display_name":"user1873379"},"score":0,"creation_date":1375199073,"post_id":17888030,"comment_id":26234833,"body_markdown":"Omile, I din&#39;t get your question. can you detail it?","body":"Omile, I din&#39;t get your question. can you detail it?"}],"answers":[{"tags":[],"owner":{"account_id":2401660,"reputation":7686,"user_id":2099208,"display_name":"Ankur Lathi"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1374925628,"creation_date":1374862903,"answer_id":17888362,"question_id":17888030,"body_markdown":"The JVM has a heap that is the runtime data area from which memory for all class instances and arrays are allocated. It is created at the JVM start-up.\r\n\r\n**Java heap allocation starts with min size -Xms and increases upto Xmx.**\r\n\r\n - -Xms&lt;size&gt; - Set the minimum available memory for the JVM\r\n\r\n - -Xmx&lt;size&gt; - Set the maximum available memory for the JVM. The Java application cannot use more heap memory then defined via this\r\n   parameter.\r\n\r\nBy default, the maximum heap size is 64 Mb.\r\n\r\n&gt; Heap memory for objects is reclaimed by an automatic memory management\r\n&gt; system which is known as a garbage collector. The heap may be of a\r\n&gt; fixed size or may be expanded and shrunk, depending on the garbage\r\n&gt; collector&#39;s strategy.\r\n\r\nSo, I think latter one is correct statement.\r\n&gt; only 5 GB (**XMS**) is allocated and increases to max of 10 GB (**XMX**) (meanwhile other\r\n&gt; process are authorized to use 25 GB)","title":"Java heap memory flow","body":"<p>The JVM has a heap that is the runtime data area from which memory for all class instances and arrays are allocated. It is created at the JVM start-up.</p>\n\n<p><strong>Java heap allocation starts with min size -Xms and increases upto Xmx.</strong></p>\n\n<ul>\n<li><p>-Xms - Set the minimum available memory for the JVM</p></li>\n<li><p>-Xmx - Set the maximum available memory for the JVM. The Java application cannot use more heap memory then defined via this\nparameter.</p></li>\n</ul>\n\n<p>By default, the maximum heap size is 64 Mb.</p>\n\n<blockquote>\n  <p>Heap memory for objects is reclaimed by an automatic memory management\n  system which is known as a garbage collector. The heap may be of a\n  fixed size or may be expanded and shrunk, depending on the garbage\n  collector's strategy.</p>\n</blockquote>\n\n<p>So, I think latter one is correct statement.</p>\n\n<blockquote>\n  <p>only 5 GB (<strong>XMS</strong>) is allocated and increases to max of 10 GB (<strong>XMX</strong>) (meanwhile other\n  process are authorized to use 25 GB)</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":224312,"reputation":703,"user_id":484052,"display_name":"Chetan Gole"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1374866485,"creation_date":1374864163,"answer_id":17888732,"question_id":17888030,"body_markdown":"\r\n\r\n - -Xms&lt;size&gt;        This sets initial Java heap size\r\n - -Xmx&lt;size&gt;        This sets maximum Java heap size\r\n\r\n&gt; At initialization of the virtual machine, the entire space for the\r\n&gt; heap is reserved. The size of the space reserved can be specified with\r\n&gt; the -Xmx option. If the value of the -Xms parameter is smaller than\r\n&gt; the value of the -Xmx parameter, not all of the space that is reserved\r\n&gt; is immediately committed to the virtual machine. The uncommitted space\r\n&gt; is labeled &quot;virtual&quot; in this figure. The different parts of the heap (\r\n&gt; permanent generation, tenured generation, and young generation) can\r\n&gt; grow to the limit of the virtual space as needed..... source - &lt;a href=&quot;http://www.oracle.com/technetwork/java/gc-tuning-5-138395.html&quot;&gt;OTN -Tuning Garbage Collection&lt;/a&gt;\r\n","title":"Java heap memory flow","body":"<ul>\n<li>-Xms        This sets initial Java heap size</li>\n<li>-Xmx        This sets maximum Java heap size</li>\n</ul>\n\n<blockquote>\n  <p>At initialization of the virtual machine, the entire space for the\n  heap is reserved. The size of the space reserved can be specified with\n  the -Xmx option. If the value of the -Xms parameter is smaller than\n  the value of the -Xmx parameter, not all of the space that is reserved\n  is immediately committed to the virtual machine. The uncommitted space\n  is labeled \"virtual\" in this figure. The different parts of the heap (\n  permanent generation, tenured generation, and young generation) can\n  grow to the limit of the virtual space as needed..... source - <a href=\"http://www.oracle.com/technetwork/java/gc-tuning-5-138395.html\" rel=\"nofollow\">OTN -Tuning Garbage Collection</a></p>\n</blockquote>\n"}],"owner":{"account_id":2107346,"reputation":75,"user_id":1873379,"accept_rate":50,"display_name":"user1873379"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":877,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1639308301,"creation_date":1374861769,"question_id":17888030,"body_markdown":"Lets say, My RAM is 30 GB and I have given jmx as 10 GB and jms as 5 GB and started the java process. How actually heap is sized/resized with those values? Is it like 5GB is taken as initial heap space and 10 GB is kept aside for jvm (and the remaining 15 GB is available for other processes on RAM) or only 5 GB is allocated and increases to max of 10 GB (meanwhile other process are authorized to use 25 GB)? How does this happen?","title":"Java heap memory flow","body":"<p>Lets say, My RAM is 30 GB and I have given jmx as 10 GB and jms as 5 GB and started the java process. How actually heap is sized/resized with those values? Is it like 5GB is taken as initial heap space and 10 GB is kept aside for jvm (and the remaining 15 GB is available for other processes on RAM) or only 5 GB is allocated and increases to max of 10 GB (meanwhile other process are authorized to use 25 GB)? How does this happen?</p>\n"},{"tags":["java","heap-memory","jdeveloper"],"comments":[{"owner":{"account_id":1292084,"reputation":1678,"user_id":1243985,"accept_rate":78,"display_name":"bas"},"score":0,"creation_date":1375912145,"post_id":18114393,"comment_id":26522206,"body_markdown":"`j.lang.AbstractStringBuilder.expandCapacity` seems like the stringbuilder is taking up too much memory, are you sure you tested it on your coworkers pc with the exact same settings?","body":"<code>j.lang.AbstractStringBuilder.expandCapacity</code> seems like the stringbuilder is taking up too much memory, are you sure you tested it on your coworkers pc with the exact same settings?"},{"owner":{"account_id":2183914,"reputation":1063,"user_id":1932781,"accept_rate":90,"display_name":"Travis"},"score":0,"creation_date":1375967711,"post_id":18114393,"comment_id":26543049,"body_markdown":"Well, I thought I did - I&#39;ll have to look again. Thanks for the guidance.","body":"Well, I thought I did - I&#39;ll have to look again. Thanks for the guidance."}],"answers":[{"tags":[],"owner":{"account_id":2183914,"reputation":1063,"user_id":1932781,"accept_rate":90,"display_name":"Travis"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1375981676,"creation_date":1375981676,"answer_id":18131938,"question_id":18114393,"body_markdown":"Egh. Simple, REALLY obvious solution that we just somehow overlooked. He is running an older version of JDeveloper. Installed that version, everything works.","title":"JDeveloper Heap Out of Memory","body":"<p>Egh. Simple, REALLY obvious solution that we just somehow overlooked. He is running an older version of JDeveloper. Installed that version, everything works.</p>\n"},{"tags":[],"owner":{"account_id":3653292,"reputation":1236,"user_id":3044904,"accept_rate":61,"display_name":"Salman"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1436341654,"creation_date":1436341654,"answer_id":31286539,"question_id":18114393,"body_markdown":"I faced the same issue and it get resolved with the help of below link :\r\n\r\n[Fixing java.lang.OutOfMemory Java Heap Space error in JDeveloper][1]\r\n\r\nBeside changing the configration fieles (jdev.conf and ide.conf) to have the commands\r\n\r\n**JDEV.CONF**\r\n\r\nAddVMOption -XX:MaxPermSize=256M\r\n\r\n**IDE.CONF**\r\n\r\nAddVMOption -Xmx768M\r\nAddVMOption -Xms256M\r\n\r\nSee also this link:\r\n[Jdeveloper throwing Out of Heap Space error with SVN][2]\r\n\r\nBeside, stop versioning option for Jdeverlper as follow:\r\nIn JDeveloper -&gt; Choose Versioning menu -&gt; Choose Configure -&gt; Uncheck Versioning support for Subversion\r\n\r\n\r\n&gt; You can use some standalone SVN clients such as TortoiseSVN for\r\n&gt; versioning\r\n\r\n\r\n  [1]: https://vikkiandtheweb.wordpress.com/2012/08/27/fixing-java-lang-outofmemory-java-heap-space-error-in-jdeveloper/\r\n  [2]: https://community.oracle.com/thread/2349486?tstart=0","title":"JDeveloper Heap Out of Memory","body":"<p>I faced the same issue and it get resolved with the help of below link :</p>\n\n<p><a href=\"https://vikkiandtheweb.wordpress.com/2012/08/27/fixing-java-lang-outofmemory-java-heap-space-error-in-jdeveloper/\" rel=\"nofollow\">Fixing java.lang.OutOfMemory Java Heap Space error in JDeveloper</a></p>\n\n<p>Beside changing the configration fieles (jdev.conf and ide.conf) to have the commands</p>\n\n<p><strong>JDEV.CONF</strong></p>\n\n<p>AddVMOption -XX:MaxPermSize=256M</p>\n\n<p><strong>IDE.CONF</strong></p>\n\n<p>AddVMOption -Xmx768M\nAddVMOption -Xms256M</p>\n\n<p>See also this link:\n<a href=\"https://community.oracle.com/thread/2349486?tstart=0\" rel=\"nofollow\">Jdeveloper throwing Out of Heap Space error with SVN</a></p>\n\n<p>Beside, stop versioning option for Jdeverlper as follow:\nIn JDeveloper -> Choose Versioning menu -> Choose Configure -> Uncheck Versioning support for Subversion</p>\n\n<blockquote>\n  <p>You can use some standalone SVN clients such as TortoiseSVN for\n  versioning</p>\n</blockquote>\n"}],"owner":{"account_id":2183914,"reputation":1063,"user_id":1932781,"accept_rate":90,"display_name":"Travis"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5527,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":18131938,"answer_count":2,"score":1,"last_activity_date":1639308146,"creation_date":1375912024,"question_id":18114393,"body_markdown":"I am getting the following error when I open a particular project in JDeveloper\r\n\r\n    Uncaught exception\r\n    java.lang.OutOfMemoryError: Java heap space\r\n      j.util.Arrays.copyOf(Arrays.java:2882)\r\n      j.lang.AbstractStringBuilder.expandCapacity(AbstractStringBuilder.java:100)\r\n      j.lang.AbstractStringBuilder.append(AbstractStringBuilder.java:390)\r\n      j.lang.StringBuffer.append(StringBuffer.java:224)\r\n      org.tmatesoft.svn.core.SVNErrorMessage.getFullMessage(SVNErrorMessage.java:257)\r\n      org.tmatesoft.svn.core.internal.wc.SVNErrorManager.error(SVNErrorManager.java:58)\r\n      org.tmatesoft.svn.core.internal.wc.admin.SVNAdminAreaFactory.open(SVNAdminAreaFactory.java:163)\r\n      org.tmatesoft.svn.core.internal.wc.admin.SVNWCAccess.doOpen(SVNWCAccess.java:364)\r\n      org.tmatesoft.svn.core.internal.wc.admin.SVNWCAccess.open(SVNWCAccess.java:272)\r\n      org.tmatesoft.svn.core.internal.wc.admin.SVNWCAccess.open(SVNWCAccess.java:265)\r\n      org.tmatesoft.svn.core.internal.wc.admin.SVNWCAccess.openAnchor(SVNWCAccess.java:145)\r\n      org.tmatesoft.svn.core.wc.SVNStatusClient.doStatus(SVNStatusClient.java:320)\r\n      org.tmatesoft.svn.core.javahl.SVNClientImpl.status(SVNClientImpl.java:296)\r\n      org.tmatesoft.svn.core.javahl.SVNClientImpl.status(SVNClientImpl.java:278)\r\n      org.tigris.subversion.svnclientadapter.javahl.AbstractJhlClientAdapter.getStatus(AbstractJhlClientAdapter.java:480)\r\n      org.tigris.subversion.svnclientadapter.svnkit.SvnKitClientAdapter.getStatus(SvnKitClientAdapter.java:141)\r\n      org.tigris.subversion.svnclientadapter.javahl.AbstractJhlClientAdapter.getStatus(AbstractJhlClientAdapter.java:466)\r\n      o.ji.vcs.svn.SVNURLInfoCacheSimpleStrategy.getURLInfo(SVNURLInfoCacheSimpleStrategy.java:79)\r\n      o.ji.vcs.svn.SVNURLInfoCache.getLastChangedRevision(SVNURLInfoCache.java:69)\r\n      o.ji.vcs.svn.SVNOverlayProducer.createTooltip(SVNOverlayProducer.java:240)\r\n      o.ji.vcs.svn.SVNOverlayProducer.getDecoratedOverlay(SVNOverlayProducer.java:144)\r\n      o.ji.vcs.svn.SVNOverlayProducer.produceOverlay(SVNOverlayProducer.java:113)\r\n      o.j.vcs.spi.VCSOverlayItemProducer.produceOverlays(VCSOverlayItemProducer.java:83)\r\n      o.j.vcs.spi.VCSOverlayItemProducer.getOverlayItems(VCSOverlayItemProducer.java:65)\r\n      o.j.vcs.spi.VCSNodeOverlayTracker.getOverlays(VCSNodeOverlayTracker.java:288)\r\n      o.i.explorer.IconOverlayTracker.processPendingNodes(IconOverlayTracker.java:574)\r\n      o.i.explorer.IconOverlayTracker.access$1400(IconOverlayTracker.java:69)\r\n      o.i.explorer.IconOverlayTracker$7.run(IconOverlayTracker.java:487)\r\n      j.util.TimerThread.mainLoop(Timer.java:512)\r\n      j.util.TimerThread.run(Timer.java:462)\r\n\r\nI have updated the jdev.conf file to include the following, but still receive the error:\r\n\r\n    AddVMOption  -XX:MaxPermSize=512M\r\n    AddVMOption -Xmx512M\r\n    AddVMOption -Xms512M\r\n\r\nFurthermore, this project opens just fine without issue on a colleague&#39;s computer, where the jdev.conf file **-XX:MaxPermSize=512M** switch is set to 256M and the other 2 switches are not present.\r\n\r\nI&#39;ve spent the afternoon playing with different settings, trying to discover the difference, and I am left stumped. Is there something I&#39;m missing? When I try to bump the setting to higher memory limits, JDeveloper fails to start the Java machine (I suspect that is related to memory allocated to Java itself), though it shouldn&#39;t be necessary, as the app works fine on my coworker&#39;s computer with half the memory allocated to JDeveloper.","title":"JDeveloper Heap Out of Memory","body":"<p>I am getting the following error when I open a particular project in JDeveloper</p>\n\n<pre><code>Uncaught exception\njava.lang.OutOfMemoryError: Java heap space\n  j.util.Arrays.copyOf(Arrays.java:2882)\n  j.lang.AbstractStringBuilder.expandCapacity(AbstractStringBuilder.java:100)\n  j.lang.AbstractStringBuilder.append(AbstractStringBuilder.java:390)\n  j.lang.StringBuffer.append(StringBuffer.java:224)\n  org.tmatesoft.svn.core.SVNErrorMessage.getFullMessage(SVNErrorMessage.java:257)\n  org.tmatesoft.svn.core.internal.wc.SVNErrorManager.error(SVNErrorManager.java:58)\n  org.tmatesoft.svn.core.internal.wc.admin.SVNAdminAreaFactory.open(SVNAdminAreaFactory.java:163)\n  org.tmatesoft.svn.core.internal.wc.admin.SVNWCAccess.doOpen(SVNWCAccess.java:364)\n  org.tmatesoft.svn.core.internal.wc.admin.SVNWCAccess.open(SVNWCAccess.java:272)\n  org.tmatesoft.svn.core.internal.wc.admin.SVNWCAccess.open(SVNWCAccess.java:265)\n  org.tmatesoft.svn.core.internal.wc.admin.SVNWCAccess.openAnchor(SVNWCAccess.java:145)\n  org.tmatesoft.svn.core.wc.SVNStatusClient.doStatus(SVNStatusClient.java:320)\n  org.tmatesoft.svn.core.javahl.SVNClientImpl.status(SVNClientImpl.java:296)\n  org.tmatesoft.svn.core.javahl.SVNClientImpl.status(SVNClientImpl.java:278)\n  org.tigris.subversion.svnclientadapter.javahl.AbstractJhlClientAdapter.getStatus(AbstractJhlClientAdapter.java:480)\n  org.tigris.subversion.svnclientadapter.svnkit.SvnKitClientAdapter.getStatus(SvnKitClientAdapter.java:141)\n  org.tigris.subversion.svnclientadapter.javahl.AbstractJhlClientAdapter.getStatus(AbstractJhlClientAdapter.java:466)\n  o.ji.vcs.svn.SVNURLInfoCacheSimpleStrategy.getURLInfo(SVNURLInfoCacheSimpleStrategy.java:79)\n  o.ji.vcs.svn.SVNURLInfoCache.getLastChangedRevision(SVNURLInfoCache.java:69)\n  o.ji.vcs.svn.SVNOverlayProducer.createTooltip(SVNOverlayProducer.java:240)\n  o.ji.vcs.svn.SVNOverlayProducer.getDecoratedOverlay(SVNOverlayProducer.java:144)\n  o.ji.vcs.svn.SVNOverlayProducer.produceOverlay(SVNOverlayProducer.java:113)\n  o.j.vcs.spi.VCSOverlayItemProducer.produceOverlays(VCSOverlayItemProducer.java:83)\n  o.j.vcs.spi.VCSOverlayItemProducer.getOverlayItems(VCSOverlayItemProducer.java:65)\n  o.j.vcs.spi.VCSNodeOverlayTracker.getOverlays(VCSNodeOverlayTracker.java:288)\n  o.i.explorer.IconOverlayTracker.processPendingNodes(IconOverlayTracker.java:574)\n  o.i.explorer.IconOverlayTracker.access$1400(IconOverlayTracker.java:69)\n  o.i.explorer.IconOverlayTracker$7.run(IconOverlayTracker.java:487)\n  j.util.TimerThread.mainLoop(Timer.java:512)\n  j.util.TimerThread.run(Timer.java:462)\n</code></pre>\n\n<p>I have updated the jdev.conf file to include the following, but still receive the error:</p>\n\n<pre><code>AddVMOption  -XX:MaxPermSize=512M\nAddVMOption -Xmx512M\nAddVMOption -Xms512M\n</code></pre>\n\n<p>Furthermore, this project opens just fine without issue on a colleague's computer, where the jdev.conf file <strong>-XX:MaxPermSize=512M</strong> switch is set to 256M and the other 2 switches are not present.</p>\n\n<p>I've spent the afternoon playing with different settings, trying to discover the difference, and I am left stumped. Is there something I'm missing? When I try to bump the setting to higher memory limits, JDeveloper fails to start the Java machine (I suspect that is related to memory allocated to Java itself), though it shouldn't be necessary, as the app works fine on my coworker's computer with half the memory allocated to JDeveloper.</p>\n"},{"tags":["java","heap-memory","heap","b-tree"],"comments":[{"owner":{"account_id":44195,"reputation":269043,"user_id":129570,"accept_rate":79,"display_name":"Oliver Charlesworth"},"score":4,"creation_date":1377477788,"post_id":18435150,"comment_id":27086363,"body_markdown":"You&#39;re thinking of [*a* heap](http://en.wikipedia.org/wiki/Heap_(data_structure)), not [*the* heap](http://en.wikipedia.org/wiki/Heap_(programming))...","body":"You&#39;re thinking of <a href=\"http://en.wikipedia.org/wiki/Heap_(data_structure)\" rel=\"nofollow noreferrer\"><i>a</i> heap</a>, not <a href=\"http://en.wikipedia.org/wiki/Heap_(programming)\" rel=\"nofollow noreferrer\"><i>the</i> heap</a>..."},{"owner":{"account_id":545260,"reputation":7301,"user_id":914967,"accept_rate":75,"display_name":"shawnzhu"},"score":1,"creation_date":1377478470,"post_id":18435150,"comment_id":27086465,"body_markdown":"The simple answer is no, it&#39;s a more complex answer which is related to the idea of garbage collection. Generally the Java heap space is managed by dividing into different regions where each region will be assigned its own memory pool. Take this blog [Understanding Java Heap Space and Memory Tuning](http://www.ashishsharma.me/2011/08/java-heap-space.html) for reference. You can also read the [Oracle Java memory management whitepaper](http://www.oracle.com/technetwork/java/javase/memorymanagement-whitepaper-150215.pdf) for details.","body":"The simple answer is no, it&#39;s a more complex answer which is related to the idea of garbage collection. Generally the Java heap space is managed by dividing into different regions where each region will be assigned its own memory pool. Take this blog <a href=\"http://www.ashishsharma.me/2011/08/java-heap-space.html\" rel=\"nofollow noreferrer\">Understanding Java Heap Space and Memory Tuning</a> for reference. You can also read the <a href=\"http://www.oracle.com/technetwork/java/javase/memorymanagement-whitepaper-150215.pdf\" rel=\"nofollow noreferrer\">Oracle Java memory management whitepaper</a> for details."}],"answers":[{"tags":[],"owner":{"account_id":2678195,"reputation":68091,"user_id":2314073,"accept_rate":56,"display_name":"Juned Ahsan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1377478059,"creation_date":1377478059,"answer_id":18435183,"question_id":18435150,"body_markdown":"A binary heap is a heap data structure created using a binary tree while java heap is the memory used by JVM to manage the objects. You seems to be confused between these two concepts.\r\n\r\nDatastructure such as [PriorityQueue][1] uses the binary heap tree concepts.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html","title":"Is Java&#39;s heap space organised as a binary tree","body":"<p>A binary heap is a heap data structure created using a binary tree while java heap is the memory used by JVM to manage the objects. You seems to be confused between these two concepts.</p>\n\n<p>Datastructure such as <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html\" rel=\"nofollow\">PriorityQueue</a> uses the binary heap tree concepts.</p>\n"}],"owner":{"account_id":205758,"reputation":16759,"user_id":454671,"accept_rate":83,"display_name":"Victor"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":509,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":18435183,"answer_count":1,"score":4,"last_activity_date":1639308065,"creation_date":1377477713,"question_id":18435150,"body_markdown":"I read that the &#39;heap&#39; is basically a binary tree. But this definition of Heap got me thinking about Java&#39;s Heap Space. Java&#39;s heap is a place where all the objects are created. But these objects surely are not sorted as per a binary tree?\r\nBecause what would be the purpose of that?","title":"Is Java&#39;s heap space organised as a binary tree","body":"<p>I read that the 'heap' is basically a binary tree. But this definition of Heap got me thinking about Java's Heap Space. Java's heap is a place where all the objects are created. But these objects surely are not sorted as per a binary tree?\nBecause what would be the purpose of that?</p>\n"},{"tags":["java","exception","lucene","heap-memory"],"comments":[{"owner":{"account_id":234634,"reputation":11522,"user_id":500916,"accept_rate":57,"display_name":"Simone Gianni"},"score":0,"creation_date":1377878579,"post_id":18536510,"comment_id":27263928,"body_markdown":"IIUC you are indexing a single 20MB file in a single Lucene doc creating one StringField for each line, right?","body":"IIUC you are indexing a single 20MB file in a single Lucene doc creating one StringField for each line, right?"},{"owner":{"account_id":291949,"reputation":4846,"user_id":594406,"accept_rate":29,"display_name":"Katona"},"score":0,"creation_date":1377879465,"post_id":18536510,"comment_id":27264410,"body_markdown":"I think it would good if you shared how you initialize your `IndexWriter`.","body":"I think it would good if you shared how you initialize your <code>IndexWriter</code>."},{"owner":{"account_id":544194,"reputation":2833,"user_id":913559,"accept_rate":47,"display_name":"AngelsandDemons"},"score":0,"creation_date":1377936713,"post_id":18536510,"comment_id":27280309,"body_markdown":"@SimoneGianni Yes.2 ways. One indexing complete file as a single document. Second indexing each line as a single document... If I do the same thing with 8-9 MB file, it happens in a blink of an eye... Approx lines in 7-8 MB file is 80K. Approx lines in 18 MB file is 8 Lakhs..","body":"@SimoneGianni Yes.2 ways. One indexing complete file as a single document. Second indexing each line as a single document... If I do the same thing with 8-9 MB file, it happens in a blink of an eye... Approx lines in 7-8 MB file is 80K. Approx lines in 18 MB file is 8 Lakhs.."},{"owner":{"account_id":544194,"reputation":2833,"user_id":913559,"accept_rate":47,"display_name":"AngelsandDemons"},"score":0,"creation_date":1377936882,"post_id":18536510,"comment_id":27280335,"body_markdown":"@Katona Added the IndexWriter initializing code for your reference.. Kindly guide..","body":"@Katona Added the IndexWriter initializing code for your reference.. Kindly guide.."},{"owner":{"account_id":544194,"reputation":2833,"user_id":913559,"accept_rate":47,"display_name":"AngelsandDemons"},"score":0,"creation_date":1377938179,"post_id":18536510,"comment_id":27280588,"body_markdown":"@Katona The lines in an 17.53 MB document is approx 3.8Lakh and is being indexed properly without any issue... However If i Provide 18MB document containing 8 lakh lines INDEXING NOT happening..","body":"@Katona The lines in an 17.53 MB document is approx 3.8Lakh and is being indexed properly without any issue... However If i Provide 18MB document containing 8 lakh lines INDEXING NOT happening.."},{"owner":{"account_id":544194,"reputation":2833,"user_id":913559,"accept_rate":47,"display_name":"AngelsandDemons"},"score":0,"creation_date":1377938227,"post_id":18536510,"comment_id":27280599,"body_markdown":"@SimoneGianni Since I cannot add more than 1 person in Comment, please see my comment above to Katona related to 17.53 3.8Lakh lines and 8Lakh lines.. Kindly suggest..","body":"@SimoneGianni Since I cannot add more than 1 person in Comment, please see my comment above to Katona related to 17.53 3.8Lakh lines and 8Lakh lines.. Kindly suggest.."},{"owner":{"account_id":291949,"reputation":4846,"user_id":594406,"accept_rate":29,"display_name":"Katona"},"score":0,"creation_date":1378069741,"post_id":18536510,"comment_id":27310656,"body_markdown":"I managed to index a 60MB file (lorem ipsum, may not be similar to yours;) ) with 2GB heap using a `StandardAnalyzer`. Can this be a problem with `CustomAnalyzerForCaseSensitive`? Have you tried indexing with another analyzer?","body":"I managed to index a 60MB file (lorem ipsum, may not be similar to yours;) ) with 2GB heap using a <code>StandardAnalyzer</code>. Can this be a problem with <code>CustomAnalyzerForCaseSensitive</code>? Have you tried indexing with another analyzer?"},{"owner":{"account_id":544194,"reputation":2833,"user_id":913559,"accept_rate":47,"display_name":"AngelsandDemons"},"score":0,"creation_date":1380782718,"post_id":18536510,"comment_id":28329779,"body_markdown":"@Katona No.It cannot be.The custom analyzer is the same as that of standard analyzer except the lowercasefilter..Problem with indexing I suppose is that I am adding more than 8 lakh objects to the document (8 lakh lines.Each line is being added to the document). So, this is where the code breaks and OOM occurs. NO matter how much heap I give it does not seem to help...FOr the time being I have put a cap on number of lines inside the file. But this is rather pretty ugly way to do.","body":"@Katona No.It cannot be.The custom analyzer is the same as that of standard analyzer except the lowercasefilter..Problem with indexing I suppose is that I am adding more than 8 lakh objects to the document (8 lakh lines.Each line is being added to the document). So, this is where the code breaks and OOM occurs. NO matter how much heap I give it does not seem to help...FOr the time being I have put a cap on number of lines inside the file. But this is rather pretty ugly way to do."}],"owner":{"account_id":544194,"reputation":2833,"user_id":913559,"accept_rate":47,"display_name":"AngelsandDemons"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1293,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1639308046,"creation_date":1377876447,"question_id":18536510,"body_markdown":"I am trying to index a file of size close to 20 MB using Lucene 4.4.0. Now based on the lucene website, the indexing process consumes close to 1 MB of heap.\r\n\r\nHowever I deployed the indexing code on my app server and javaopts is \r\n\r\n**-Xms8192m -Xmx16384m -XX:MaxPermSize=512m** \r\n\r\nNow, there is just **1 file which has to be indexed as of now, the size of which is 20 MB**\r\n\r\nDuring the indexing all I get is a lock file with no indexes being generated. The following error occurs and the indexing is stopped...\r\n\r\n    java.lang.OutOfMemoryError: Java heap space\r\n        at org.apache.lucene.util.AttributeSource.&lt;init&gt;(AttributeSource.java:148)\r\n        at org.apache.lucene.util.AttributeSource.&lt;init&gt;(AttributeSource.java:128)\r\n    18:42:21,764 INFO     at org.apache.lucene.analysis.TokenStream.&lt;init&gt;(TokenStream.java:91)\r\n    18:42:21,765 INFO      at org.apache.lucene.document.Field$StringTokenStream.&lt;init&gt;(Field.java:568)\r\n    18:42:21,765 INFO      at org.apache.lucene.document.Field.tokenStream(Field.java:541)\r\n    18:42:21,765 INFO      at org.apache.lucene.index.DocInverterPerField.processFields(DocInverterPerField.java:95)\r\n    18:42:21,766 INFO      at org.apache.lucene.index.DocFieldProcessor.processDocument(DocFieldProcessor.java:245)\r\n    18:42:21,766 INFO      at org.apache.lucene.index.DocumentsWriterPerThread.updateDocument(DocumentsWriterPerThread.java:265)\r\n    18:42:21,766 INFO      at org.apache.lucene.index.DocumentsWriter.updateDocument(DocumentsWriter.java:432)\r\n    18:42:21,767 INFO      at org.apache.lucene.index.IndexWriter.updateDocument(IndexWriter.java:1513)\r\n    18:42:21,767 INFO      at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:1188)\r\n    18:42:21,767 INFO      at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:1169)\r\n    18:42:21,768 INFO      at com.rancore.MainClass1.indexDocs(MainClass1.java:197)\r\n    18:42:21,768 INFO      at com.rancore.MainClass1.indexDocs(MainClass1.java:153)\r\n    18:42:21,768 INFO      at com.rancore.MainClass1.main(MainClass1.java:95)\r\n    18:42:21,771 INFO  java.lang.IllegalStateException: this writer hit an OutOfMemoryError; cannot commit\r\n    18:42:21,772 INFO      at org.apache.lucene.index.IndexWriter.prepareCommitInternal(IndexWriter.java:2726)\r\n    18:42:21,911 INFO      at org.apache.lucene.index.IndexWriter.commitInternal(IndexWriter.java:2897)\r\n    18:42:21,911 INFO    at org.apache.lucene.index.IndexWriter.commit(IndexWriter.java:2872)\r\n    18:42:21,912 INFO     at com.rancore.MainClass1.main(MainClass1.java:122)\r\n    18:42:22,008 INFO  Indexing to directory \r\n\r\nCan someone please guide me where the issue seems to be...\r\n\r\nIndexing code snippet:\r\n\r\n    static void indexDocs(IndexWriter writer, File file,boolean flag)\r\n        throws IOException {\r\n    \r\n            FileInputStream fis = null;\r\n       if (file.canRead()) {\r\n    \r\n          if (file.isDirectory()) {\r\n           String[] files = file.list();\r\n            // an IO error could occur\r\n            if (files != null) {\r\n              for (int i = 0; i&lt;   files.length; i++) {\r\n                indexDocs(writer, new File(file, files[i]),flag);\r\n              }\r\n            }\r\n         } else {\r\n            try {\r\n              fis = new FileInputStream(file);\r\n           } catch (FileNotFoundException fnfe) {\r\n    \r\n             fnfe.printStackTrace();\r\n           }\r\n    \r\n            try {\r\n    \r\n                Document doc = new Document();\r\n    \r\n                Field pathField = new StringField(&quot;path&quot;, file.getPath(),\r\n    Field.Store.YES);\r\n                doc.add(pathField);\r\n    \r\n                doc.add(new LongField(&quot;modified&quot;, file.lastModified(),\r\n    Field.Store.NO));\r\n    \r\n                doc.add(new\r\n    StringField(&quot;name&quot;,file.getName(),Field.Store.YES));\r\n    \r\n               doc.add(new TextField(&quot;contents&quot;, new BufferedReader(new\r\n    InputStreamReader(fis, &quot;UTF-8&quot;))));\r\n    \r\n                LineNumberReader lnr=new LineNumberReader(new\r\n    FileReader(file));\r\n    \r\n    \r\n               String line=null;\r\n                while( null != (line = lnr.readLine()) ){\r\n                    doc.add(new StringField(&quot;SC&quot;,line.trim(),Field.Store.YES));\r\n                   // doc.add(new Field(&quot;contents&quot;,line,Field.Store.YES,Field.Index.ANALYZED));\r\n                }\r\n    \r\n                if (writer.getConfig().getOpenMode() ==\r\n    OpenMode.CREATE_OR_APPEND)\r\n    {\r\n    \r\n                  writer.addDocument(doc);\r\n                  writer.commit();\r\n                  fis.close();\r\n                } else {\r\n                    try\r\n                    {\r\n                  writer.updateDocument(new Term(&quot;path&quot;, file.getPath()),\r\n    doc);\r\n    \r\n                  fis.close();\r\n    \r\n                    }catch(Exception e)\r\n                    {\r\n                        writer.close();\r\n                         fis.close();\r\n    \r\n                        e.printStackTrace();\r\n    \r\n                    }\r\n                }\r\n    \r\n            }catch (Exception e) {\r\n                 writer.close();\r\n                  fis.close();\r\n    \r\n               e.printStackTrace();\r\n            }finally {\r\n                // writer.close();\r\n    \r\n              fis.close();\r\n            }\r\n          }\r\n        }\r\n    }\r\n    } \r\n\r\nthe issue occurs when document is being added to the writer.\r\n\r\nPlease guide..\r\n\r\nAdded the IndexWriter code also:\r\n\r\n    public static void main(String[] args) {\r\n    \r\n    \t    String indexPath = args[0];  //Place where indexes will be created\r\n    \t    String docsPath=args[1];    //Place where the files are kept.\r\n    \t    boolean create=true;\r\n    \t   \r\n    \t   \r\n    \t   final File docDir = new File(docsPath);\r\n    \t   if (!docDir.exists() || !docDir.canRead()) {\r\n    \t      System.out.println(&quot;Document directory &#39;&quot; +docDir.getAbsolutePath()+ &quot;&#39; does not exist or is not readable, please check the path&quot;);\r\n    \t      System.exit(1);\r\n    \t    }\r\n    \r\n    \t    Date start = new Date();\r\n    \t   try {\r\n    \t      System.out.println(&quot;Indexing to directory FTP CODE ONLY &#39;&quot; + indexPath + &quot;&#39;...&quot;+docsPath);\r\n    \r\n    \t     Directory dir = FSDirectory.open(new File(indexPath));\r\n    \r\n    \t     Analyzer analyzer=new CustomAnalyzerForCaseSensitive(Version.LUCENE_44);\r\n    \t     \r\n    \t     IndexWriterConfig iwc = new IndexWriterConfig(Version.LUCENE_44, analyzer);\r\n    \t     \r\n    \t     iwc.setOpenMode(OpenMode.CREATE_OR_APPEND);\r\n    \r\n    \t      IndexWriter writer = new IndexWriter(dir, iwc);\r\n    \t      \r\n    \t      if(args[2].trim().equalsIgnoreCase(&quot;OverAll&quot;)){\r\n    \t    \t  System.out.println(&quot;inside Over All&quot;);\r\n    \t    \t  indexDocs(writer, docDir,true);\r\n    \t      }else{\r\n    \t    \t  filenames=args[2].split(&quot;,&quot;);\r\n    \t    \t  //indexDocs(writer, docDir);\r\n    \t    \t    \r\n    \t   }\r\n    \t      writer.commit();\r\n    \t      writer.close();\r\n    \r\n    \t      Date end = new Date();\r\n    \t     System.out.println(end.getTime() - start.getTime() + &quot; total milliseconds&quot;);\r\n    \r\n    \t    } catch (IOException e) {\r\n    \t      System.out.println(&quot; caught a &quot; + e.getClass() +\r\n    \t       &quot;\\n with message: &quot; + e.getMessage());\r\n    \t    }\r\n    \t    catch(Exception e)\r\n    \t    {\r\n    \t    \te.printStackTrace();\r\n    \t    }\r\n    \t }","title":"Java heap space error while Indexing Document","body":"<p>I am trying to index a file of size close to 20 MB using Lucene 4.4.0. Now based on the lucene website, the indexing process consumes close to 1 MB of heap.</p>\n\n<p>However I deployed the indexing code on my app server and javaopts is </p>\n\n<p><strong>-Xms8192m -Xmx16384m -XX:MaxPermSize=512m</strong> </p>\n\n<p>Now, there is just <strong>1 file which has to be indexed as of now, the size of which is 20 MB</strong></p>\n\n<p>During the indexing all I get is a lock file with no indexes being generated. The following error occurs and the indexing is stopped...</p>\n\n<pre><code>java.lang.OutOfMemoryError: Java heap space\n    at org.apache.lucene.util.AttributeSource.&lt;init&gt;(AttributeSource.java:148)\n    at org.apache.lucene.util.AttributeSource.&lt;init&gt;(AttributeSource.java:128)\n18:42:21,764 INFO     at org.apache.lucene.analysis.TokenStream.&lt;init&gt;(TokenStream.java:91)\n18:42:21,765 INFO      at org.apache.lucene.document.Field$StringTokenStream.&lt;init&gt;(Field.java:568)\n18:42:21,765 INFO      at org.apache.lucene.document.Field.tokenStream(Field.java:541)\n18:42:21,765 INFO      at org.apache.lucene.index.DocInverterPerField.processFields(DocInverterPerField.java:95)\n18:42:21,766 INFO      at org.apache.lucene.index.DocFieldProcessor.processDocument(DocFieldProcessor.java:245)\n18:42:21,766 INFO      at org.apache.lucene.index.DocumentsWriterPerThread.updateDocument(DocumentsWriterPerThread.java:265)\n18:42:21,766 INFO      at org.apache.lucene.index.DocumentsWriter.updateDocument(DocumentsWriter.java:432)\n18:42:21,767 INFO      at org.apache.lucene.index.IndexWriter.updateDocument(IndexWriter.java:1513)\n18:42:21,767 INFO      at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:1188)\n18:42:21,767 INFO      at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:1169)\n18:42:21,768 INFO      at com.rancore.MainClass1.indexDocs(MainClass1.java:197)\n18:42:21,768 INFO      at com.rancore.MainClass1.indexDocs(MainClass1.java:153)\n18:42:21,768 INFO      at com.rancore.MainClass1.main(MainClass1.java:95)\n18:42:21,771 INFO  java.lang.IllegalStateException: this writer hit an OutOfMemoryError; cannot commit\n18:42:21,772 INFO      at org.apache.lucene.index.IndexWriter.prepareCommitInternal(IndexWriter.java:2726)\n18:42:21,911 INFO      at org.apache.lucene.index.IndexWriter.commitInternal(IndexWriter.java:2897)\n18:42:21,911 INFO    at org.apache.lucene.index.IndexWriter.commit(IndexWriter.java:2872)\n18:42:21,912 INFO     at com.rancore.MainClass1.main(MainClass1.java:122)\n18:42:22,008 INFO  Indexing to directory \n</code></pre>\n\n<p>Can someone please guide me where the issue seems to be...</p>\n\n<p>Indexing code snippet:</p>\n\n<pre><code>static void indexDocs(IndexWriter writer, File file,boolean flag)\n    throws IOException {\n\n        FileInputStream fis = null;\n   if (file.canRead()) {\n\n      if (file.isDirectory()) {\n       String[] files = file.list();\n        // an IO error could occur\n        if (files != null) {\n          for (int i = 0; i&lt;   files.length; i++) {\n            indexDocs(writer, new File(file, files[i]),flag);\n          }\n        }\n     } else {\n        try {\n          fis = new FileInputStream(file);\n       } catch (FileNotFoundException fnfe) {\n\n         fnfe.printStackTrace();\n       }\n\n        try {\n\n            Document doc = new Document();\n\n            Field pathField = new StringField(\"path\", file.getPath(),\nField.Store.YES);\n            doc.add(pathField);\n\n            doc.add(new LongField(\"modified\", file.lastModified(),\nField.Store.NO));\n\n            doc.add(new\nStringField(\"name\",file.getName(),Field.Store.YES));\n\n           doc.add(new TextField(\"contents\", new BufferedReader(new\nInputStreamReader(fis, \"UTF-8\"))));\n\n            LineNumberReader lnr=new LineNumberReader(new\nFileReader(file));\n\n\n           String line=null;\n            while( null != (line = lnr.readLine()) ){\n                doc.add(new StringField(\"SC\",line.trim(),Field.Store.YES));\n               // doc.add(new Field(\"contents\",line,Field.Store.YES,Field.Index.ANALYZED));\n            }\n\n            if (writer.getConfig().getOpenMode() ==\nOpenMode.CREATE_OR_APPEND)\n{\n\n              writer.addDocument(doc);\n              writer.commit();\n              fis.close();\n            } else {\n                try\n                {\n              writer.updateDocument(new Term(\"path\", file.getPath()),\ndoc);\n\n              fis.close();\n\n                }catch(Exception e)\n                {\n                    writer.close();\n                     fis.close();\n\n                    e.printStackTrace();\n\n                }\n            }\n\n        }catch (Exception e) {\n             writer.close();\n              fis.close();\n\n           e.printStackTrace();\n        }finally {\n            // writer.close();\n\n          fis.close();\n        }\n      }\n    }\n}\n} \n</code></pre>\n\n<p>the issue occurs when document is being added to the writer.</p>\n\n<p>Please guide..</p>\n\n<p>Added the IndexWriter code also:</p>\n\n<pre><code>public static void main(String[] args) {\n\n        String indexPath = args[0];  //Place where indexes will be created\n        String docsPath=args[1];    //Place where the files are kept.\n        boolean create=true;\n\n\n       final File docDir = new File(docsPath);\n       if (!docDir.exists() || !docDir.canRead()) {\n          System.out.println(\"Document directory '\" +docDir.getAbsolutePath()+ \"' does not exist or is not readable, please check the path\");\n          System.exit(1);\n        }\n\n        Date start = new Date();\n       try {\n          System.out.println(\"Indexing to directory FTP CODE ONLY '\" + indexPath + \"'...\"+docsPath);\n\n         Directory dir = FSDirectory.open(new File(indexPath));\n\n         Analyzer analyzer=new CustomAnalyzerForCaseSensitive(Version.LUCENE_44);\n\n         IndexWriterConfig iwc = new IndexWriterConfig(Version.LUCENE_44, analyzer);\n\n         iwc.setOpenMode(OpenMode.CREATE_OR_APPEND);\n\n          IndexWriter writer = new IndexWriter(dir, iwc);\n\n          if(args[2].trim().equalsIgnoreCase(\"OverAll\")){\n              System.out.println(\"inside Over All\");\n              indexDocs(writer, docDir,true);\n          }else{\n              filenames=args[2].split(\",\");\n              //indexDocs(writer, docDir);\n\n       }\n          writer.commit();\n          writer.close();\n\n          Date end = new Date();\n         System.out.println(end.getTime() - start.getTime() + \" total milliseconds\");\n\n        } catch (IOException e) {\n          System.out.println(\" caught a \" + e.getClass() +\n           \"\\n with message: \" + e.getMessage());\n        }\n        catch(Exception e)\n        {\n            e.printStackTrace();\n        }\n     }\n</code></pre>\n"},{"tags":["java","arraylist","java.util.scanner","heap-memory"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1378683402,"post_id":18689264,"comment_id":27531977,"body_markdown":"The problem here isn&#39;t the `Scanner,` it is reading the large file into memory. Can&#39;t you process it a line at a time?","body":"The problem here isn&#39;t the <code>Scanner,</code> it is reading the large file into memory. Can&#39;t you process it a line at a time?"}],"answers":[{"tags":[],"owner":{"account_id":1322392,"reputation":7439,"user_id":1690078,"accept_rate":67,"display_name":"Clyde"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1378679546,"creation_date":1378679546,"answer_id":18689283,"question_id":18689264,"body_markdown":"Increase the java heap size, e.g.\r\n\r\n    java -Xmx6g myprogram\r\n\r\nwill set the heap size to 6 gigabytes. Of course there will always be a limit....","title":"Out of memory using Scanner to read large file into memory","body":"<p>Increase the java heap size, e.g.</p>\n\n<pre><code>java -Xmx6g myprogram\n</code></pre>\n\n<p>will set the heap size to 6 gigabytes. Of course there will always be a limit....</p>\n"},{"tags":[],"owner":{"account_id":195331,"reputation":275408,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1378680027,"creation_date":1378679599,"answer_id":18689296,"question_id":18689264,"body_markdown":"The default separator for a `Scanner` is whitespace.\r\n\r\n    public Scanner(ReadableByteChannel source) { // Your File is converted to a ReadableByteChannel from another constructor \r\n        this(makeReadable(Objects.requireNonNull(source, &quot;source&quot;)),\r\n             WHITESPACE_PATTERN);\r\n    }\r\n\r\nSo if your file contains many whitespace characters, you will loop so many times at\r\n\r\n    while (scan.hasNext()) {\r\n        String next = scan.next();\r\n        rawData.add(next);\r\n    }\r\n\r\nputting in many objects in your `ArrayList` but not garbage collecting anything (ie. not freeing memory).\r\n\r\nEach call to `next()` returns the next token until a whitespace is found. Either change the separator, increase your memory size, or change your design.\r\n\r\nWhat is your file format?","title":"Out of memory using Scanner to read large file into memory","body":"<p>The default separator for a <code>Scanner</code> is whitespace.</p>\n\n<pre><code>public Scanner(ReadableByteChannel source) { // Your File is converted to a ReadableByteChannel from another constructor \n    this(makeReadable(Objects.requireNonNull(source, \"source\")),\n         WHITESPACE_PATTERN);\n}\n</code></pre>\n\n<p>So if your file contains many whitespace characters, you will loop so many times at</p>\n\n<pre><code>while (scan.hasNext()) {\n    String next = scan.next();\n    rawData.add(next);\n}\n</code></pre>\n\n<p>putting in many objects in your <code>ArrayList</code> but not garbage collecting anything (ie. not freeing memory).</p>\n\n<p>Each call to <code>next()</code> returns the next token until a whitespace is found. Either change the separator, increase your memory size, or change your design.</p>\n\n<p>What is your file format?</p>\n"},{"tags":[],"owner":{"account_id":155915,"reputation":6798,"user_id":372887,"accept_rate":80,"display_name":"RandomQuestion"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1378679789,"creation_date":1378679789,"answer_id":18689319,"question_id":18689264,"body_markdown":"Instead of loading all the rows from file into `ArrayList`, do the operation you want to on each record as soon as you read it. Loading whole file into memory would cause an OOM issue if heapsize is not large enough.\r\n\r\n    Scanner scan = new Scanner(file);\r\n    while (scan.hasNext()) {\r\n        String next = scan.next();\r\n        //do what you want to do on next\r\n    }\r\n\r\n","title":"Out of memory using Scanner to read large file into memory","body":"<p>Instead of loading all the rows from file into <code>ArrayList</code>, do the operation you want to on each record as soon as you read it. Loading whole file into memory would cause an OOM issue if heapsize is not large enough.</p>\n\n<pre><code>Scanner scan = new Scanner(file);\nwhile (scan.hasNext()) {\n    String next = scan.next();\n    //do what you want to do on next\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":369969,"reputation":21500,"user_id":717630,"display_name":"grepit"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1378680358,"creation_date":1378680358,"answer_id":18689397,"question_id":18689264,"body_markdown":"The main problem is storing on the array list. Also, try to use the bufferReader and just do the processing inside the while statement instead of trying to add it to the arraylist. Here is a simple example.\r\n\r\n\t\t\tFile file = new File(&quot;C:\\\\custom_programs\\\\reminder_list.txt&quot;);\r\n\t\t\tBufferedReader br = new BufferedReader(new FileReader(file));\r\n\t\t\tString line;\r\n\t\t\twhile ((line = br.readLine()) != null) {\r\n\t\t\t\t// do something with line.\r\n\t\t\t\tSystem.out.println(line);\r\n\t\t\t}\r\n\t\t\tbr.close();","title":"Out of memory using Scanner to read large file into memory","body":"<p>The main problem is storing on the array list. Also, try to use the bufferReader and just do the processing inside the while statement instead of trying to add it to the arraylist. Here is a simple example.</p>\n\n<pre><code>        File file = new File(\"C:\\\\custom_programs\\\\reminder_list.txt\");\n        BufferedReader br = new BufferedReader(new FileReader(file));\n        String line;\n        while ((line = br.readLine()) != null) {\n            // do something with line.\n            System.out.println(line);\n        }\n        br.close();\n</code></pre>\n"}],"owner":{"account_id":2571748,"reputation":541,"user_id":2230300,"accept_rate":57,"display_name":"trentjones21"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3883,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":18689283,"answer_count":4,"score":0,"last_activity_date":1639308014,"creation_date":1378679371,"question_id":18689264,"body_markdown":"The following block of code is throwing a java.lang.OutOfMemoryError exception when I pass a large file into the scanner.  What is the best way to fix this?  Is the problem in the arraylist or the scanner?\r\n\r\n    ArrayList rawData = new ArrayList();\r\n    Scanner scan = new Scanner(file);\r\n            \r\n    while (scan.hasNext()) {\r\n        String next = scan.next();\r\n            rawData.add(next);\r\n    }","title":"Out of memory using Scanner to read large file into memory","body":"<p>The following block of code is throwing a java.lang.OutOfMemoryError exception when I pass a large file into the scanner.  What is the best way to fix this?  Is the problem in the arraylist or the scanner?</p>\n\n<pre><code>ArrayList rawData = new ArrayList();\nScanner scan = new Scanner(file);\n\nwhile (scan.hasNext()) {\n    String next = scan.next();\n        rawData.add(next);\n}\n</code></pre>\n"},{"tags":["java","heap-memory"],"comments":[{"owner":{"account_id":2809874,"reputation":4581,"user_id":2416313,"accept_rate":92,"display_name":"Thirumalai Parthasarathi"},"score":5,"creation_date":1379078400,"post_id":18787343,"comment_id":27701396,"body_markdown":"Please add your code so the problem can be examined\nthis may happen because of a memory leak.. [this](http://blogs.opcodesolutions.com/roller/java/entry/solve_java_lang_outofmemoryerror_java) may help you","body":"Please add your code so the problem can be examined this may happen because of a memory leak.. <a href=\"http://blogs.opcodesolutions.com/roller/java/entry/solve_java_lang_outofmemoryerror_java\" rel=\"nofollow noreferrer\">this</a> may help you"},{"owner":{"account_id":203953,"reputation":5113,"user_id":451894,"accept_rate":53,"display_name":"upog"},"score":0,"creation_date":1379078463,"post_id":18787343,"comment_id":27701438,"body_markdown":"Current heap size is not sufficient. try increasing the heap space for the program using -Xms and  -Xmx","body":"Current heap size is not sufficient. try increasing the heap space for the program using -Xms and  -Xmx"}],"answers":[{"tags":[],"owner":{"account_id":1842261,"reputation":11057,"user_id":1671448,"accept_rate":88,"display_name":"TheEwook"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1379078514,"creation_date":1379078514,"answer_id":18787432,"question_id":18787343,"body_markdown":"If you want to store more information in memory you must increase the heap space\r\n\r\n    -Xms&lt;size&gt;        set initial Java heap size\r\n    -Xmx&lt;size&gt;        set maximum Java heap size\r\n    -Xss&lt;size&gt;        set java thread stack size\r\n\r\nFor example if you want to give your Java program needs a 64Mb initial and 256Mb maximum heap size you could launch it as follows:\r\n\r\n    java -Xms64m -Xmx256m ","title":"Arraylist.add method showing java heap space exception","body":"<p>If you want to store more information in memory you must increase the heap space</p>\n\n<pre><code>-Xms&lt;size&gt;        set initial Java heap size\n-Xmx&lt;size&gt;        set maximum Java heap size\n-Xss&lt;size&gt;        set java thread stack size\n</code></pre>\n\n<p>For example if you want to give your Java program needs a 64Mb initial and 256Mb maximum heap size you could launch it as follows:</p>\n\n<pre><code>java -Xms64m -Xmx256m \n</code></pre>\n"}],"owner":{"account_id":3294315,"reputation":1,"user_id":2771910,"display_name":"Neha Bais"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":243,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1639308001,"creation_date":1379078300,"question_id":18787343,"body_markdown":"I m reading the content from file and then adding some word from readed string into my arraylist.it is working for small size of text file but not for large file having 20kb size.what is the problem??","title":"Arraylist.add method showing java heap space exception","body":"<p>I m reading the content from file and then adding some word from readed string into my arraylist.it is working for small size of text file but not for large file having 20kb size.what is the problem??</p>\n"},{"tags":["java","error-handling","runtime-error","heap-memory"],"comments":[{"owner":{"account_id":3132675,"reputation":1916,"user_id":2649963,"accept_rate":75,"display_name":"Prateek"},"score":0,"creation_date":1380229858,"post_id":19038660,"comment_id":28135051,"body_markdown":"Just a though. Based on `RAM` you have you can partition the file and load it into memory in chunks and populate the `model` class.","body":"Just a though. Based on <code>RAM</code> you have you can partition the file and load it into memory in chunks and populate the <code>model</code> class."},{"owner":{"account_id":2494175,"reputation":495,"user_id":2171033,"display_name":"BobbyD17"},"score":0,"creation_date":1380229887,"post_id":19038660,"comment_id":28135065,"body_markdown":"Try looking at this question:\r\n[Using java to get os level system information][1]\r\n\r\n\r\n  [1]: http://stackoverflow.com/questions/25552/using-java-to-get-os-level-system-information","body":"Try looking at this question:  [Using java to get os level system information][1]        [1]: <a href=\"http://stackoverflow.com/questions/25552/using-java-to-get-os-level-system-information\" title=\"using java to get os level system information\">stackoverflow.com/questions/25552/&hellip;</a>"},{"owner":{"account_id":809675,"reputation":24177,"user_id":904316,"accept_rate":100,"display_name":"sdasdadas"},"score":0,"creation_date":1380229997,"post_id":19038660,"comment_id":28135116,"body_markdown":"@Prateek As much as I love the idea of that, I don&#39;t think it&#39;s the file that&#39;s overloading the heap. I think the `Model` is growing too big - so splitting it up wouldn&#39;t make too much a difference.","body":"@Prateek As much as I love the idea of that, I don&#39;t think it&#39;s the file that&#39;s overloading the heap. I think the <code>Model</code> is growing too big - so splitting it up wouldn&#39;t make too much a difference."}],"answers":[{"tags":[],"owner":{"account_id":75156,"reputation":12077,"user_id":215651,"accept_rate":50,"display_name":"lreeder"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1380230039,"creation_date":1380229646,"answer_id":19038713,"question_id":19038660,"body_markdown":"Use [File.length()][1] to determine the size of the file, and reject if it&#39;s too big.  \r\n\r\nHow do you know if it&#39;s too big?  Use [Runtime.freeMemory()][2] to see how much heap you have left.   Of course loading the file and populating it into your `Model` class will take additional memory, and you may not actually keep the entire content of the file.  You should leave adequate room to load all the data in the classes based on what you know about how you will use the data.\r\n\r\nNote that a JVM is not typically allocated all the memory in a users computer, but probably defaults to some smaller number.  It can be modified with the Xmx option if the user is not happy with the default.\r\n\r\n \r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/io/File.html#length%28%29\r\n  [2]: http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#freeMemory%28%29","title":"How do I prevent Java&#39;s OutOfMemoryError from occurring on file load?","body":"<p>Use <a href=\"http://docs.oracle.com/javase/6/docs/api/java/io/File.html#length%28%29\" rel=\"nofollow\">File.length()</a> to determine the size of the file, and reject if it's too big.  </p>\n\n<p>How do you know if it's too big?  Use <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#freeMemory%28%29\" rel=\"nofollow\">Runtime.freeMemory()</a> to see how much heap you have left.   Of course loading the file and populating it into your <code>Model</code> class will take additional memory, and you may not actually keep the entire content of the file.  You should leave adequate room to load all the data in the classes based on what you know about how you will use the data.</p>\n\n<p>Note that a JVM is not typically allocated all the memory in a users computer, but probably defaults to some smaller number.  It can be modified with the Xmx option if the user is not happy with the default.</p>\n"},{"tags":[],"owner":{"account_id":3089665,"reputation":31308,"user_id":2616073,"display_name":"dkatzel"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1380229846,"creation_date":1380229846,"answer_id":19038772,"question_id":19038660,"body_markdown":"    You can query the JVM to see how much free and used memory there is :\r\n\r\n    /* Total amount of free memory available to the JVM */\r\n    System.out.println(&quot;Free memory (bytes): &quot; + \r\n    Runtime.getRuntime().freeMemory());\r\n\r\n    /* This will return Long.MAX_VALUE if there is no preset limit */\r\n    long maxMemory = Runtime.getRuntime().maxMemory();\r\n     /* Maximum amount of memory the JVM will attempt to use */\r\n    System.out.println(&quot;Maximum memory (bytes): &quot; + \r\n    (maxMemory == Long.MAX_VALUE ? &quot;no limit&quot; : maxMemory));\r\n\r\n    /* Total memory currently in use by the JVM */\r\n    System.out.println(&quot;Total memory (bytes): &quot; + \r\n    Runtime.getRuntime().totalMemory());","title":"How do I prevent Java&#39;s OutOfMemoryError from occurring on file load?","body":"<pre><code>You can query the JVM to see how much free and used memory there is :\n\n/* Total amount of free memory available to the JVM */\nSystem.out.println(\"Free memory (bytes): \" + \nRuntime.getRuntime().freeMemory());\n\n/* This will return Long.MAX_VALUE if there is no preset limit */\nlong maxMemory = Runtime.getRuntime().maxMemory();\n /* Maximum amount of memory the JVM will attempt to use */\nSystem.out.println(\"Maximum memory (bytes): \" + \n(maxMemory == Long.MAX_VALUE ? \"no limit\" : maxMemory));\n\n/* Total memory currently in use by the JVM */\nSystem.out.println(\"Total memory (bytes): \" + \nRuntime.getRuntime().totalMemory());\n</code></pre>\n"}],"owner":{"account_id":809675,"reputation":24177,"user_id":904316,"accept_rate":100,"display_name":"sdasdadas"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":165,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":19038772,"answer_count":2,"score":0,"last_activity_date":1639307989,"creation_date":1380229462,"question_id":19038660,"body_markdown":"I am working on a program that loads files and uses their information to populate a `Model` class. These files can range in size from a few KB to almost a GB. When their sizes fluctuate, so too does the memory used by the `Model` class.\r\n\r\nWhen I load a file that is large enough, I receive the `OutOfMemoryError`.\r\n\r\nI am able to reject a users request to load a file (based on the file size). How do I examine a file, determine its size, and then determine if the application can handle it?\r\n\r\nIs there a way to make this adapt to the amount of RAM on a users&#39; computer?","title":"How do I prevent Java&#39;s OutOfMemoryError from occurring on file load?","body":"<p>I am working on a program that loads files and uses their information to populate a <code>Model</code> class. These files can range in size from a few KB to almost a GB. When their sizes fluctuate, so too does the memory used by the <code>Model</code> class.</p>\n\n<p>When I load a file that is large enough, I receive the <code>OutOfMemoryError</code>.</p>\n\n<p>I am able to reject a users request to load a file (based on the file size). How do I examine a file, determine its size, and then determine if the application can handle it?</p>\n\n<p>Is there a way to make this adapt to the amount of RAM on a users' computer?</p>\n"},{"tags":["java","heap-memory"],"comments":[{"owner":{"account_id":123958,"reputation":109285,"user_id":318758,"accept_rate":100,"display_name":"Joni"},"score":0,"creation_date":1380279808,"post_id":19049058,"comment_id":28151549,"body_markdown":"Do you want to monitor memory usage programmatically or are you looking for a tool that lets you connect to a running program and investigate how it uses memory?","body":"Do you want to monitor memory usage programmatically or are you looking for a tool that lets you connect to a running program and investigate how it uses memory?"},{"owner":{"account_id":2334059,"reputation":248,"user_id":2046792,"accept_rate":17,"display_name":"Saurav"},"score":0,"creation_date":1380280007,"post_id":19049058,"comment_id":28151624,"body_markdown":"No I don&#39;t want to moniter total process (like JMX) but i want to moniter particular method.","body":"No I don&#39;t want to moniter total process (like JMX) but i want to moniter particular method."},{"owner":{"account_id":1041463,"reputation":3845,"user_id":1047418,"display_name":"Torben"},"score":0,"creation_date":1380280806,"post_id":19049058,"comment_id":28152027,"body_markdown":"Have you hooked your app to a debugger and checked if it keeps track of object allocations? I vaguely remember doing something like that several years ago when hunting for a memory leak.","body":"Have you hooked your app to a debugger and checked if it keeps track of object allocations? I vaguely remember doing something like that several years ago when hunting for a memory leak."},{"owner":{"account_id":123958,"reputation":109285,"user_id":318758,"accept_rate":100,"display_name":"Joni"},"score":0,"creation_date":1380287785,"post_id":19049058,"comment_id":28156017,"body_markdown":"Then no, this cannot be done. The method or class that creates an object is not saved anywhere. You can only get global and thread-level statistics.","body":"Then no, this cannot be done. The method or class that creates an object is not saved anywhere. You can only get global and thread-level statistics."}],"answers":[{"tags":[],"owner":{"account_id":998903,"reputation":767,"user_id":1014184,"accept_rate":78,"display_name":"miwoe"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1380282149,"creation_date":1380280411,"answer_id":19049319,"question_id":19049058,"body_markdown":"For external monitoring, you can use VisualVM or JConsole (part of JDK), for internal you can use the Runtime class:\r\n\r\n    Runtime rt = Runtime.getRuntime();\r\n        long totalMem = rt.totalMemory();\r\n        long maxMem = rt.maxMemory();\r\n        long freeMem = rt.freeMemory();\r\n\r\nVia the Thread class, you can check the status of all threads. Never used it directly, because application servers or batch processing APIs doing their job... So, I don&#39;t need to reinvent the wheel. And I suggest to use tools like VisualVM...\r\n\r\nEDIT: Watch also this thread: https://stackoverflow.com/questions/3318750/why-do-threads-share-the-heap-space\r\n\r\nYou cannot analyze the heap usage of a single thread. If you have problems with the execution of foreign code, you should sepearate it as good as you can from other threads and analyze the thread or heap dumps. This could be done as mentioned with VisualVM or JConsole which was also added by Oracle (or SUN).","title":"How to moniter memory allocated by some java method at runtime","body":"<p>For external monitoring, you can use VisualVM or JConsole (part of JDK), for internal you can use the Runtime class:</p>\n\n<pre><code>Runtime rt = Runtime.getRuntime();\n    long totalMem = rt.totalMemory();\n    long maxMem = rt.maxMemory();\n    long freeMem = rt.freeMemory();\n</code></pre>\n\n<p>Via the Thread class, you can check the status of all threads. Never used it directly, because application servers or batch processing APIs doing their job... So, I don't need to reinvent the wheel. And I suggest to use tools like VisualVM...</p>\n\n<p>EDIT: Watch also this thread: <a href=\"https://stackoverflow.com/questions/3318750/why-do-threads-share-the-heap-space\">Why do threads share the heap space?</a></p>\n\n<p>You cannot analyze the heap usage of a single thread. If you have problems with the execution of foreign code, you should sepearate it as good as you can from other threads and analyze the thread or heap dumps. This could be done as mentioned with VisualVM or JConsole which was also added by Oracle (or SUN).</p>\n"},{"tags":[],"owner":{"account_id":1041463,"reputation":3845,"user_id":1047418,"display_name":"Torben"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1380281424,"creation_date":1380281067,"answer_id":19049531,"question_id":19049058,"body_markdown":"Oracle has quite a good document about solving memory leaks. It suggests that one should use NetBeans Profiler as a tool.\r\n\r\nhttp://www.oracle.com/technetwork/java/javase/memleaks-137499.html\r\n\r\nI believe you can use the same debugging API for checking against misbehaving code while it is running, but that will come with a performance penalty and is probably akin to killing a fly with a sledgehammer. I personally would not let anything like that to run in production. Instead I would rely on rigorous testing and peer review.\r\n\r\n","title":"How to moniter memory allocated by some java method at runtime","body":"<p>Oracle has quite a good document about solving memory leaks. It suggests that one should use NetBeans Profiler as a tool.</p>\n\n<p><a href=\"http://www.oracle.com/technetwork/java/javase/memleaks-137499.html\" rel=\"nofollow\">http://www.oracle.com/technetwork/java/javase/memleaks-137499.html</a></p>\n\n<p>I believe you can use the same debugging API for checking against misbehaving code while it is running, but that will come with a performance penalty and is probably akin to killing a fly with a sledgehammer. I personally would not let anything like that to run in production. Instead I would rely on rigorous testing and peer review.</p>\n"},{"tags":[],"owner":{"account_id":258240,"reputation":6015,"user_id":540286,"display_name":"Ortwin Angermeier"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1380282204,"creation_date":1380282204,"answer_id":19049912,"question_id":19049058,"body_markdown":"&gt; but what if he has written some blocking code or memory leek in his\r\n&gt; code\r\n\r\nFirst of all i suggest you document your class well. Describe what the user is allowed to do and what not. Give use cases what to do(if possible).\r\n\r\nFor the blocking code part, if you have some timing issues, you could wrap the execution of the method in say a `Future` and let a `ExecutorService` execute the code. That way you will be able to cancel the execution if the execution takes too much time.\r\n\r\nFor the memory leak issue, well i guess you are not talking about memory leaks but increased memory consumption caused by calling the overridden method. Memory leaks in java are rare after all. \r\n\r\nYou will not be able to detect the memory consumption of a method, that&#39;s not how java works. Memory is global. What will you do if for example an external library is loaded(JNI), or some library in the classpath is called that will use more memory now? You just can not tell.\r\n\r\nOther then monitoring the overall memory consumption, there is no other way(someone please tell me if i am wrong).","title":"How to moniter memory allocated by some java method at runtime","body":"<blockquote>\n  <p>but what if he has written some blocking code or memory leek in his\n  code</p>\n</blockquote>\n\n<p>First of all i suggest you document your class well. Describe what the user is allowed to do and what not. Give use cases what to do(if possible).</p>\n\n<p>For the blocking code part, if you have some timing issues, you could wrap the execution of the method in say a <code>Future</code> and let a <code>ExecutorService</code> execute the code. That way you will be able to cancel the execution if the execution takes too much time.</p>\n\n<p>For the memory leak issue, well i guess you are not talking about memory leaks but increased memory consumption caused by calling the overridden method. Memory leaks in java are rare after all. </p>\n\n<p>You will not be able to detect the memory consumption of a method, that's not how java works. Memory is global. What will you do if for example an external library is loaded(JNI), or some library in the classpath is called that will use more memory now? You just can not tell.</p>\n\n<p>Other then monitoring the overall memory consumption, there is no other way(someone please tell me if i am wrong).</p>\n"},{"tags":[],"owner":{"account_id":2481825,"reputation":1381,"user_id":2231632,"display_name":"Praba"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1380287899,"creation_date":1380287899,"answer_id":19051806,"question_id":19049058,"body_markdown":"Depending on what sort of behavior that the subclass can do, then we might think of options. For example, if it&#39;s a database related operation, we can force them to do connection clean ups, if it&#39;s file based, we can force them to read the file through your class and check for how big the file is, if it&#39;s any http call or some other streaming functionality, we can look at enforcing constraints accordingly.\r\n\r\nIf you&#39;re just worried about the heap size utilization and memory leaks there, you might want to look at http://java.dzone.com/tips/getting-jvm-heap-size-used which explains how to get runtime memory programatically. But then you&#39;ll have to do periodic checks and you can never be sure of whether a memory usage is caused by the subclass behavior.","title":"How to moniter memory allocated by some java method at runtime","body":"<p>Depending on what sort of behavior that the subclass can do, then we might think of options. For example, if it's a database related operation, we can force them to do connection clean ups, if it's file based, we can force them to read the file through your class and check for how big the file is, if it's any http call or some other streaming functionality, we can look at enforcing constraints accordingly.</p>\n\n<p>If you're just worried about the heap size utilization and memory leaks there, you might want to look at <a href=\"http://java.dzone.com/tips/getting-jvm-heap-size-used\" rel=\"nofollow\">http://java.dzone.com/tips/getting-jvm-heap-size-used</a> which explains how to get runtime memory programatically. But then you'll have to do periodic checks and you can never be sure of whether a memory usage is caused by the subclass behavior.</p>\n"},{"tags":[],"owner":{"account_id":3264978,"reputation":1469,"user_id":2749648,"display_name":"Claudiu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1380401080,"creation_date":1380401080,"answer_id":19071483,"question_id":19049058,"body_markdown":"I just found [this][2] while i was trying to build up an agent that records memory allocations:\r\n\r\nIn the post [https://stackoverflow.com/questions/9810212/how-to-track-any-object-creation-in-java-since-freememory-only-reports-long-li] [1] it is specified that there is an open source project [Java Allocation Instrumenter][2] that you could use to register your own callback (it has examples too) and using that you are able to obtain what you need. \r\n\r\nI started few days ago to work on a similar project and while researching i found your question and the below post.\r\n\r\nI personally needed this kind of code in some unit tests to check if one allocates too many objects inside critical methods and found that using `Runtime` class was not appropiate because `Garbage collector` may interfere and the test recorded negative numbers for allocated memory.\r\n\r\n[1]: https://stackoverflow.com/questions/9810212/how-to-track-any-object-creation-in-java-since-freememory-only-reports-long-li\r\n[2]: https://code.google.com/p/java-allocation-instrumenter/","title":"How to moniter memory allocated by some java method at runtime","body":"<p>I just found <a href=\"https://code.google.com/p/java-allocation-instrumenter/\" rel=\"nofollow noreferrer\">this</a> while i was trying to build up an agent that records memory allocations:</p>\n\n<p>In the post <a href=\"https://stackoverflow.com/questions/9810212/how-to-track-any-object-creation-in-java-since-freememory-only-reports-long-li\">How to track any object creation in Java since freeMemory() only reports long-lived objects?</a> it is specified that there is an open source project <a href=\"https://code.google.com/p/java-allocation-instrumenter/\" rel=\"nofollow noreferrer\">Java Allocation Instrumenter</a> that you could use to register your own callback (it has examples too) and using that you are able to obtain what you need. </p>\n\n<p>I started few days ago to work on a similar project and while researching i found your question and the below post.</p>\n\n<p>I personally needed this kind of code in some unit tests to check if one allocates too many objects inside critical methods and found that using <code>Runtime</code> class was not appropiate because <code>Garbage collector</code> may interfere and the test recorded negative numbers for allocated memory.</p>\n"}],"owner":{"account_id":2334059,"reputation":248,"user_id":2046792,"accept_rate":17,"display_name":"Saurav"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2070,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":5,"score":3,"last_activity_date":1639307977,"creation_date":1380279487,"question_id":19049058,"body_markdown":"I am creating a java program in which my class suppose A has it&#39;s some predefined behavior. But user can over-ride my class to change its behavior. So my script will check if there is some subclass than I will call it&#39;s behavior but what if he has written some blocking code or memory leak in his code.\r\n\r\nThis may harm my process. Is there is any way in java to monitor memory allocated by some method.\r\n\r\nPlease suggest.","title":"How to moniter memory allocated by some java method at runtime","body":"<p>I am creating a java program in which my class suppose A has it's some predefined behavior. But user can over-ride my class to change its behavior. So my script will check if there is some subclass than I will call it's behavior but what if he has written some blocking code or memory leak in his code.</p>\n\n<p>This may harm my process. Is there is any way in java to monitor memory allocated by some method.</p>\n\n<p>Please suggest.</p>\n"},{"tags":["java","object","oop","inheritance","heap-memory"],"comments":[{"owner":{"account_id":2215206,"reputation":2164,"user_id":1956013,"accept_rate":56,"display_name":"Ahmed Adel Ismail"},"score":0,"creation_date":1380918971,"post_id":19190316,"comment_id":28394568,"body_markdown":"i have an answer to the first question, but i need an answer to the second one","body":"i have an answer to the first question, but i need an answer to the second one"},{"owner":{"account_id":2329845,"reputation":11269,"user_id":2043536,"accept_rate":92,"display_name":"sircodesalot"},"score":0,"creation_date":1380919138,"post_id":19190316,"comment_id":28394644,"body_markdown":"Uh... did you just create a question specifically to answer yourself?","body":"Uh... did you just create a question specifically to answer yourself?"},{"owner":{"account_id":2215206,"reputation":2164,"user_id":1956013,"accept_rate":56,"display_name":"Ahmed Adel Ismail"},"score":0,"creation_date":1380919395,"post_id":19190316,"comment_id":28394765,"body_markdown":"i have a partial answer, the second question i dont have it&#39;s answer","body":"i have a partial answer, the second question i dont have it&#39;s answer"},{"owner":{"account_id":297024,"reputation":25001,"user_id":602323,"accept_rate":80,"display_name":"Kevin"},"score":0,"creation_date":1380919465,"post_id":19190316,"comment_id":28394800,"body_markdown":"what do you mean by &quot;calculate&quot;?","body":"what do you mean by &quot;calculate&quot;?"},{"owner":{"account_id":2215206,"reputation":2164,"user_id":1956013,"accept_rate":56,"display_name":"Ahmed Adel Ismail"},"score":0,"creation_date":1380919676,"post_id":19190316,"comment_id":28394903,"body_markdown":"@Kevin know how many Objects are there on the heap at Runtime","body":"@Kevin know how many Objects are there on the heap at Runtime"},{"owner":{"account_id":284109,"reputation":47153,"user_id":581994,"accept_rate":57,"display_name":"Hot Licks"},"score":0,"creation_date":1380920581,"post_id":19190316,"comment_id":28395357,"body_markdown":"What does that have to do with inheritance?","body":"What does that have to do with inheritance?"},{"owner":{"account_id":2215206,"reputation":2164,"user_id":1956013,"accept_rate":56,"display_name":"Ahmed Adel Ismail"},"score":0,"creation_date":1380922252,"post_id":19190316,"comment_id":28395997,"body_markdown":"@HotLicks inheritence causes the inheritence hirarchy to be initialized at runtime, which means more objects on the heap !!","body":"@HotLicks inheritence causes the inheritence hirarchy to be initialized at runtime, which means more objects on the heap !!"},{"owner":{"account_id":284109,"reputation":47153,"user_id":581994,"accept_rate":57,"display_name":"Hot Licks"},"score":0,"creation_date":1380923699,"post_id":19190316,"comment_id":28396438,"body_markdown":"Only the additional class objects, which in most cases is trivial.  It doesn&#39;t cause any additional regular object instances to be created.","body":"Only the additional class objects, which in most cases is trivial.  It doesn&#39;t cause any additional regular object instances to be created."}],"answers":[{"tags":[],"owner":{"account_id":2215206,"reputation":2164,"user_id":1956013,"accept_rate":56,"display_name":"Ahmed Adel Ismail"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1380919431,"creation_date":1380918941,"answer_id":19190320,"question_id":19190316,"body_markdown":"\r\nFrom my studies for the OCP Java 6 Programmer, credit goes to Kathy Sierra and Bert Bates, and the Study Guide &quot;SCJP 6&quot;\r\n\r\nInheritence, Stack &amp; Heap section (in Chapter 2) :\r\n\r\nCONSTRUCTOR :   \r\n-------------                \r\n                1-  IT MUST NOT HAVE A RETURN\r\n                2-  IT MUST MATCH THE CLASS NAME EXACTLY\r\n                3-  THE DEFAULT CONSTRUCTOR HAS THE SAME ACCESS MODIFIER AS THE CLASS \r\n                \r\nconstructor life chain :\r\n------------------------\r\n\r\n            1-  when calling a constructor throw the &quot;new&quot; keyword, the constructor calls\r\n                (invokes) all the super classes constructors throw the IMPLICIT &quot;super()&quot; till\r\n                the Object class (it&#39;s at the top of the inheritence hirarchy of any class in\r\n                Java), unless you have an overloaded constructor in one of the superclasses,\r\n                containing arguements, which should be called from it&#39;s sub with the \r\n                super(arg1, arg2, ...) alike the constructor\r\n                \r\n            2-  the first constructor up the inheritence tree starts to run in the JVM, \r\n                at this point you are at the top of the STACK...\r\n                initializing all it&#39;s initial variables by giving them there explicit values\r\n                (initialized previosly by the classes creator), then the next constructor,\r\n                till the one calles\r\n                \r\n            3-  the constructors are all called, given there explicit values (if mentioned in\r\n                there constructors called), then every object finishes it&#39;s job, it&#39;s caller \r\n                is removed from the stack, untill all objects created, given values, and\r\n                reachable throw the &quot;main()&quot; stack frame, so all destroyed except the method\r\n                running now which is the &quot;main()&quot; in this case\r\n            \r\nEXAMPLE FOR CONSTRUCTOR CHAINS IN MEMORY :\r\n------------------------------------------\r\nsuppose we have this Inheritence tree :\r\n---------------------------------------\r\n\r\n    public class Object {/*implicitly inherited by any class in Java*/}\r\n\r\n-------------------------------------------------------------------\r\n\r\n    public class Zoo {\r\n        private static int animalsInTheZoo;\r\n        \r\n        public Zoo(){\r\n            super();                                //implicit by the compiler\r\n            getInstancesCreated();\r\n            System.out.println(&quot;animals in the zoo now : &quot; + animalsInTheZoo);}\r\n        \r\n        private int getInstancesCreated(){\r\n            return ++animalsInTheZoo;}\r\n        \r\n        public int getAnimalsInTheZoo(){\r\n            return this.animalsInTheZoo;}\r\n    }      \r\n\r\n-------------------------------------------------------------------\r\n\r\n    public class AddAnimal extends Zoo{\r\n    \r\n        private String animalName;\r\n    \r\n        public AddAnimal(String name){\r\n            super();                                //implicit by the compiler\r\n            this.animalName = name;\r\n            System.out.println(&quot;the new Animal name is : &quot;+ this.animalName);}\r\n        \r\n        public static void main (String [] arg){\r\n            AddAnimal tom = new AddAnimal(&quot;Tom&quot;);           //  step 1\r\n            //AddAnimal jerry = new AddAnimal(&quot;Jerry&quot;);}      //  step 2\r\n    \r\n    }\r\n\r\n-------------------------------------------------------------------\r\n\r\n    result :\r\n    --------\r\n\r\n            animals in the zoo now : 1\r\n            the new Animal name is : Tom\r\n            \r\n-------------------------------------------------------------------\r\n\r\nSTACK DIAGRAM :\r\n---------------\r\n    \r\n1)  the main method loads at the bottom of the thread&#39;s stack frame, with it&#39;s local variable \r\n    (tom)           \r\n\r\n                            THE STACK\r\n                |---------------------------------|\r\n                |                                 |  ------&gt; this is called &quot;Stack Frame&quot;\r\n                |---------------------------------|\r\n                |                                 |\r\n                |---------------------------------|\r\n                |                                 |\r\n                |---------------------------------|\r\n                |   1-main()calls {AddName tom}   |\r\n                |---------------------------------|\r\n\r\n2)  the variable &quot;tom&quot; refers to the constructor of the Object &quot;AddName&quot; causes 2 things :\r\n        1-  creating an instance of the object &quot;AddName&quot; on the heap throw the overloaded\r\n            constructor &quot;AddName(String name);&quot;\r\n        2-  adding to it&#39;s arguments a reference to String object throw litrals holding   \r\n            the value &quot;tom&quot; (this means a &quot;String&quot; Object is reachable on the heap&#39;s \r\n            permenant Gen by now)\r\n\r\n                |---------------------------------|\r\n                |                                 |\r\n                |---------------------------------|\r\n                |                                 |\r\n                |---------------------------------|\r\n                |   2-AddName(&quot;Tom&quot;) {super()}    |\r\n                |---------------------------------|\r\n                |   1-main()calls {AddName tom}   |\r\n                |---------------------------------|\r\n                \r\n3)  the constructor of &quot;AddName&quot; with it&#39;s &quot;super()&quot; calls the Super Class no-arg&#39;s constructor\r\n    which is &quot;Zoo();&quot;, which creates a new instance of the object &quot;Zoo&quot; on the Heap\r\n  \r\n                |---------------------------------|\r\n                |                                 |\r\n                |---------------------------------|\r\n                |   3-Zoo(){super();}             |\r\n                |---------------------------------|\r\n                |   2-AddName(&quot;Tom&quot;) {super();}   |\r\n                |---------------------------------|\r\n                |   1-main()calls {String tom;}   |\r\n                |---------------------------------|\r\n\r\n4)  the constructor of &quot;Zoo&quot; with it&#39;s &quot;super()&quot; calls the Super Class no-arg&#39;s constructor\r\n    which is &quot;Object();&quot;, which is implicit by any class inheriting no other classes, so \r\n    it implicitly inherits the &quot;Object&quot; class, creating an instance of the &quot;Object&quot; class on the\r\n    heap\r\n  \r\n                |---------------------------------|\r\n                |   4-Object(){}                  |\r\n                |---------------------------------|\r\n                |   3-Zoo(){super();}             |\r\n                |---------------------------------|\r\n                |   2-AddName(&quot;Tom&quot;) {super();}   |\r\n                |---------------------------------|\r\n                |   1-main()calls {String tom;}   |\r\n                |---------------------------------|\r\n                \r\n5)  Object() completes it&#39;s work and removed from the stack\r\n\r\n                |---------------------------------|\r\n                |                                 |\r\n                |---------------------------------|\r\n                |   3-Zoo(){super();}             |\r\n                |---------------------------------|\r\n                |   2-AddName(&quot;Tom&quot;) {super();}   |\r\n                |---------------------------------|\r\n                |   1-main()calls {String tom;}   |\r\n                |---------------------------------|\r\n\r\n6)  Zoo completes it&#39;s work and now the static int &quot;animalsInTheZoo&quot; increased by &quot;1&quot;(*),and the\r\n    console printed &quot;animals in the zoo now : 1&quot;, and as the Zoo constructor reached it&#39;s\r\n    curly brace &quot;}&quot;, it is removed from the stack;\r\n    \r\n                |---------------------------------|\r\n                |                                 |\r\n                |---------------------------------|\r\n                |                                 |\r\n                |---------------------------------|\r\n                |   2-AddName(&quot;Tom&quot;) {super();}   |\r\n                |---------------------------------|\r\n                |   1-main()calls {String tom;}   |\r\n                |---------------------------------|\r\n\r\n7)  now as the super classes completed there work, back to our called constructor with it&#39;s new\r\n    and ACTUALLY REQUIRED values, it starts doing it&#39;s work, giving the variable &quot;animalName&quot;\r\n    the value &quot;Tom&quot;, and printing out &quot;the new Animal name is : Tom&quot;, then stack finds no \r\n    methods or constructors to invoke, so the programme flow stops\r\n\r\n**HINT :    important to know that any method is invoked, a new stack frame is created for this\r\n            method until it finishes then the stack frame is destroyed, this happened in step\r\n            (6), when we called the constructor of &quot;Zoo()&quot;, a method inside it is called for\r\n            invokation, so the stack created a stack frame with this method, and completed\r\n            it, then destroyed the method&#39;s stack frame, then destroyed the Zoo() stack frame,\r\n            remember that &quot;super();&quot; call is alike a &quot;method();&quot; call but with slight \r\n            differences, and the stack creates a new stack frame for both\r\n            \r\n----------------------------------------------------------\r\n\r\nHEAP DIAGRAM :\r\n--------------\r\n\r\n-   for the JVM, when you create an instance of an object (AddAnimal for example), it makes \r\n    space for this object and all it&#39;s super classes till you reach the MEGA-SUPER class \r\n    which is &quot;Object&quot;, for our example, think about it on the heap like this :\r\n    \r\n\r\n         ___________________________       ______________________________________\r\n        |      THREAD / STACK      |      | GARBAGE COLLECTABLE AREA ON THE HEAP |\r\n        |_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\|      |_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\__|\r\n        |                          |      |        ______________________        |\r\n        |--------------------------|      |       |      AddAnimal       |       |\r\n        |                          |      |       |   ________________   |       |\r\n        |--------------------------|      |       |  |      Zoo       |  |       |    \r\n        | Object(){}               |      |       |  |     ______     |  |       |\r\n        |--------------------------|      |       |  |    |      |    |  |       |\r\n        | Zoo(){super();}          |      |       |  |    |Object|    |  |       |  \r\n        |--------------------------|      |       |  |    |______|    |  |       |    \r\n        | AddAnimal(){super();}    |      |       |  |                |  |       |    \r\n        |--------------------------|      |       |  |________________|  |       |    \r\n        | main(){new AddAnimal();} |      |       |______________________|       |\r\n        |__________________________|      |______________________________________|\r\n    \r\n\r\n    for the stack, each stack fram finishes it&#39;s call, it is emptied\r\n    but for the heap, any &quot;reachable object&quot; throw the stack or throw created objects on it,\r\n    it stays alive, and that&#39;s why the stack will destroy the stack frames calling the\r\n    &quot;super()&quot; or the super class constructor, while the objects will stay alive on the heap\r\n    similar to what&#39;s shown on the diagram, and the reason is\r\n    \r\n    the &quot;AddAnimal&quot; class can access any method of it&#39;s super classes any time it wants, so \r\n    they are reachable, even if the current method call (on the stack) is not using them\r\n     \r\nRULES FOR CONSTRUCTOR (STUDY BY HEART) :\r\n----------------------------------------\r\n\r\n1-  uses any access modifier\r\n\r\n2-  match the class name\r\n\r\n3-  must not have a return type\r\n\r\n4-  legal but STUPID to make a method with the same name of the class...but must have a\r\n        return type.\r\n\r\n5-  default NO-ARG constructor is made automatically even if you dont see it\r\n\r\n6-  typing a NO-ARG constructor by your self will cancel the default un-seen one\r\n\r\n7-  the first statement of the constructor MUST be either \r\n        a call to an overloaded constructor &quot;this()&quot; \r\n        OR a call for a super class constructor &quot;super()&quot;, and this one can be inserted\r\n        implicitly by the compiler\r\n            -if a constructor started with the statment &quot;this()&quot; pointing to another\r\n             constructor, the compiler will know that this is not the final constructor\r\n             in this class and the next (if the final constructor) must hold a &quot;super()&quot;\r\n             keyword, if not, the compiler will implicitly put a NO-ARG &quot;super()&quot;\r\n\r\n8-  the &quot;super()&quot; can be a NO-ARG call, or can pass arguements to it according to the\r\n    super class constructors holding parameters\r\n\r\n9-  you cannot make a call to an instance of ANY THING before the super constructor runs\r\n\r\n10- only static variables or methods can be passed as arguments to this(x) or super(x)..like:\r\n        super(superClassStaticVariable) or this(subClassStaticVariable)\r\n\r\n11- ABSTRACT classes constructors are called when there concrete subclasses are instantiated\r\n\r\n12- INTERFACES DONT HAVE constructors since they are not in the Object inheritence tree\r\n\r\n13- the only way to invoke a constructor is within another constructor (alike this() and\r\n    super())\r\n\r\n14- you can create several overloaded constructors, and each constructor can be the final\r\n    one if instantiated, in other words, you can have 7 overloaded constructors, all of them\r\n    has there first line code is &quot;super();&quot;, you dont have to make constructors call each other\r\n    before going to the super class constructor, you can make the constructors final (throw\r\n    &quot;super();&quot; call), or you can make them call each other (throw &quot;this();&quot; call) before\r\n    reaching the final constructor which holds the &quot;super();&quot; call .. it&#39;s up to your design\r\n    \r\n\r\nNOTE :  if 2 constructors in the same class are calling each other (starting with &quot;this()&quot;), \r\n        the compiler wont find a problem, but when it passes it to the JVM, a STACK OVERFLOW\r\n        exception will happen\r\n\r\n\r\n\r\n","title":"How does the Inheritence work in Java? And how to count live objects on the heap at Runtime?","body":"<p>From my studies for the OCP Java 6 Programmer, credit goes to Kathy Sierra and Bert Bates, and the Study Guide \"SCJP 6\"</p>\n\n<p>Inheritence, Stack &amp; Heap section (in Chapter 2) :</p>\n\n<h2>CONSTRUCTOR :</h2>\n\n<pre><code>            1-  IT MUST NOT HAVE A RETURN\n            2-  IT MUST MATCH THE CLASS NAME EXACTLY\n            3-  THE DEFAULT CONSTRUCTOR HAS THE SAME ACCESS MODIFIER AS THE CLASS \n</code></pre>\n\n<h2>constructor life chain :</h2>\n\n<pre><code>        1-  when calling a constructor throw the \"new\" keyword, the constructor calls\n            (invokes) all the super classes constructors throw the IMPLICIT \"super()\" till\n            the Object class (it's at the top of the inheritence hirarchy of any class in\n            Java), unless you have an overloaded constructor in one of the superclasses,\n            containing arguements, which should be called from it's sub with the \n            super(arg1, arg2, ...) alike the constructor\n\n        2-  the first constructor up the inheritence tree starts to run in the JVM, \n            at this point you are at the top of the STACK...\n            initializing all it's initial variables by giving them there explicit values\n            (initialized previosly by the classes creator), then the next constructor,\n            till the one calles\n\n        3-  the constructors are all called, given there explicit values (if mentioned in\n            there constructors called), then every object finishes it's job, it's caller \n            is removed from the stack, untill all objects created, given values, and\n            reachable throw the \"main()\" stack frame, so all destroyed except the method\n            running now which is the \"main()\" in this case\n</code></pre>\n\n<h2>EXAMPLE FOR CONSTRUCTOR CHAINS IN MEMORY :</h2>\n\n<h2>suppose we have this Inheritence tree :</h2>\n\n<pre><code>public class Object {/*implicitly inherited by any class in Java*/}\n</code></pre>\n\n<hr>\n\n<pre><code>public class Zoo {\n    private static int animalsInTheZoo;\n\n    public Zoo(){\n        super();                                //implicit by the compiler\n        getInstancesCreated();\n        System.out.println(\"animals in the zoo now : \" + animalsInTheZoo);}\n\n    private int getInstancesCreated(){\n        return ++animalsInTheZoo;}\n\n    public int getAnimalsInTheZoo(){\n        return this.animalsInTheZoo;}\n}      \n</code></pre>\n\n<hr>\n\n<pre><code>public class AddAnimal extends Zoo{\n\n    private String animalName;\n\n    public AddAnimal(String name){\n        super();                                //implicit by the compiler\n        this.animalName = name;\n        System.out.println(\"the new Animal name is : \"+ this.animalName);}\n\n    public static void main (String [] arg){\n        AddAnimal tom = new AddAnimal(\"Tom\");           //  step 1\n        //AddAnimal jerry = new AddAnimal(\"Jerry\");}      //  step 2\n\n}\n</code></pre>\n\n<hr>\n\n<pre><code>result :\n--------\n\n        animals in the zoo now : 1\n        the new Animal name is : Tom\n</code></pre>\n\n<hr>\n\n<h2>STACK DIAGRAM :</h2>\n\n<p>1)  the main method loads at the bottom of the thread's stack frame, with it's local variable \n    (tom)           </p>\n\n<pre><code>                        THE STACK\n            |---------------------------------|\n            |                                 |  ------&gt; this is called \"Stack Frame\"\n            |---------------------------------|\n            |                                 |\n            |---------------------------------|\n            |                                 |\n            |---------------------------------|\n            |   1-main()calls {AddName tom}   |\n            |---------------------------------|\n</code></pre>\n\n<p>2)  the variable \"tom\" refers to the constructor of the Object \"AddName\" causes 2 things :\n        1-  creating an instance of the object \"AddName\" on the heap throw the overloaded\n            constructor \"AddName(String name);\"\n        2-  adding to it's arguments a reference to String object throw litrals holding<br>\n            the value \"tom\" (this means a \"String\" Object is reachable on the heap's \n            permenant Gen by now)</p>\n\n<pre><code>            |---------------------------------|\n            |                                 |\n            |---------------------------------|\n            |                                 |\n            |---------------------------------|\n            |   2-AddName(\"Tom\") {super()}    |\n            |---------------------------------|\n            |   1-main()calls {AddName tom}   |\n            |---------------------------------|\n</code></pre>\n\n<p>3)  the constructor of \"AddName\" with it's \"super()\" calls the Super Class no-arg's constructor\n    which is \"Zoo();\", which creates a new instance of the object \"Zoo\" on the Heap</p>\n\n<pre><code>            |---------------------------------|\n            |                                 |\n            |---------------------------------|\n            |   3-Zoo(){super();}             |\n            |---------------------------------|\n            |   2-AddName(\"Tom\") {super();}   |\n            |---------------------------------|\n            |   1-main()calls {String tom;}   |\n            |---------------------------------|\n</code></pre>\n\n<p>4)  the constructor of \"Zoo\" with it's \"super()\" calls the Super Class no-arg's constructor\n    which is \"Object();\", which is implicit by any class inheriting no other classes, so \n    it implicitly inherits the \"Object\" class, creating an instance of the \"Object\" class on the\n    heap</p>\n\n<pre><code>            |---------------------------------|\n            |   4-Object(){}                  |\n            |---------------------------------|\n            |   3-Zoo(){super();}             |\n            |---------------------------------|\n            |   2-AddName(\"Tom\") {super();}   |\n            |---------------------------------|\n            |   1-main()calls {String tom;}   |\n            |---------------------------------|\n</code></pre>\n\n<p>5)  Object() completes it's work and removed from the stack</p>\n\n<pre><code>            |---------------------------------|\n            |                                 |\n            |---------------------------------|\n            |   3-Zoo(){super();}             |\n            |---------------------------------|\n            |   2-AddName(\"Tom\") {super();}   |\n            |---------------------------------|\n            |   1-main()calls {String tom;}   |\n            |---------------------------------|\n</code></pre>\n\n<p>6)  Zoo completes it's work and now the static int \"animalsInTheZoo\" increased by \"1\"(*),and the\n    console printed \"animals in the zoo now : 1\", and as the Zoo constructor reached it's\n    curly brace \"}\", it is removed from the stack;</p>\n\n<pre><code>            |---------------------------------|\n            |                                 |\n            |---------------------------------|\n            |                                 |\n            |---------------------------------|\n            |   2-AddName(\"Tom\") {super();}   |\n            |---------------------------------|\n            |   1-main()calls {String tom;}   |\n            |---------------------------------|\n</code></pre>\n\n<p>7)  now as the super classes completed there work, back to our called constructor with it's new\n    and ACTUALLY REQUIRED values, it starts doing it's work, giving the variable \"animalName\"\n    the value \"Tom\", and printing out \"the new Animal name is : Tom\", then stack finds no \n    methods or constructors to invoke, so the programme flow stops</p>\n\n<p>**HINT :    important to know that any method is invoked, a new stack frame is created for this\n            method until it finishes then the stack frame is destroyed, this happened in step\n            (6), when we called the constructor of \"Zoo()\", a method inside it is called for\n            invokation, so the stack created a stack frame with this method, and completed\n            it, then destroyed the method's stack frame, then destroyed the Zoo() stack frame,\n            remember that \"super();\" call is alike a \"method();\" call but with slight \n            differences, and the stack creates a new stack frame for both</p>\n\n<hr>\n\n<h2>HEAP DIAGRAM :</h2>\n\n<ul>\n<li><p>for the JVM, when you create an instance of an object (AddAnimal for example), it makes \nspace for this object and all it's super classes till you reach the MEGA-SUPER class \nwhich is \"Object\", for our example, think about it on the heap like this :</p>\n\n<pre><code> ___________________________       ______________________________________\n|      THREAD / STACK      |      | GARBAGE COLLECTABLE AREA ON THE HEAP |\n|_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\|      |_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\__|\n|                          |      |        ______________________        |\n|--------------------------|      |       |      AddAnimal       |       |\n|                          |      |       |   ________________   |       |\n|--------------------------|      |       |  |      Zoo       |  |       |    \n| Object(){}               |      |       |  |     ______     |  |       |\n|--------------------------|      |       |  |    |      |    |  |       |\n| Zoo(){super();}          |      |       |  |    |Object|    |  |       |  \n|--------------------------|      |       |  |    |______|    |  |       |    \n| AddAnimal(){super();}    |      |       |  |                |  |       |    \n|--------------------------|      |       |  |________________|  |       |    \n| main(){new AddAnimal();} |      |       |______________________|       |\n|__________________________|      |______________________________________|\n</code></pre>\n\n<p>for the stack, each stack fram finishes it's call, it is emptied\nbut for the heap, any \"reachable object\" throw the stack or throw created objects on it,\nit stays alive, and that's why the stack will destroy the stack frames calling the\n\"super()\" or the super class constructor, while the objects will stay alive on the heap\nsimilar to what's shown on the diagram, and the reason is</p>\n\n<p>the \"AddAnimal\" class can access any method of it's super classes any time it wants, so \nthey are reachable, even if the current method call (on the stack) is not using them</p></li>\n</ul>\n\n<h2>RULES FOR CONSTRUCTOR (STUDY BY HEART) :</h2>\n\n<p>1-  uses any access modifier</p>\n\n<p>2-  match the class name</p>\n\n<p>3-  must not have a return type</p>\n\n<p>4-  legal but STUPID to make a method with the same name of the class...but must have a\n        return type.</p>\n\n<p>5-  default NO-ARG constructor is made automatically even if you dont see it</p>\n\n<p>6-  typing a NO-ARG constructor by your self will cancel the default un-seen one</p>\n\n<p>7-  the first statement of the constructor MUST be either \n        a call to an overloaded constructor \"this()\" \n        OR a call for a super class constructor \"super()\", and this one can be inserted\n        implicitly by the compiler\n            -if a constructor started with the statment \"this()\" pointing to another\n             constructor, the compiler will know that this is not the final constructor\n             in this class and the next (if the final constructor) must hold a \"super()\"\n             keyword, if not, the compiler will implicitly put a NO-ARG \"super()\"</p>\n\n<p>8-  the \"super()\" can be a NO-ARG call, or can pass arguements to it according to the\n    super class constructors holding parameters</p>\n\n<p>9-  you cannot make a call to an instance of ANY THING before the super constructor runs</p>\n\n<p>10- only static variables or methods can be passed as arguments to this(x) or super(x)..like:\n        super(superClassStaticVariable) or this(subClassStaticVariable)</p>\n\n<p>11- ABSTRACT classes constructors are called when there concrete subclasses are instantiated</p>\n\n<p>12- INTERFACES DONT HAVE constructors since they are not in the Object inheritence tree</p>\n\n<p>13- the only way to invoke a constructor is within another constructor (alike this() and\n    super())</p>\n\n<p>14- you can create several overloaded constructors, and each constructor can be the final\n    one if instantiated, in other words, you can have 7 overloaded constructors, all of them\n    has there first line code is \"super();\", you dont have to make constructors call each other\n    before going to the super class constructor, you can make the constructors final (throw\n    \"super();\" call), or you can make them call each other (throw \"this();\" call) before\n    reaching the final constructor which holds the \"super();\" call .. it's up to your design</p>\n\n<p>NOTE :  if 2 constructors in the same class are calling each other (starting with \"this()\"), \n        the compiler wont find a problem, but when it passes it to the JVM, a STACK OVERFLOW\n        exception will happen</p>\n"},{"tags":[],"owner":{"account_id":1848560,"reputation":1408,"user_id":1675670,"accept_rate":75,"display_name":"istovatis"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1380920833,"creation_date":1380919152,"answer_id":19190379,"question_id":19190316,"body_markdown":"As an initial statement about this extensive subject can be:\r\n\r\n 1. Java objects reside  the heap. The heap is created when the JVM starts up and may increase or decrease in size while the application runs\r\n 2. When the heap becomes full, garbage is collected. During the garbage collection objects that are no longer used are cleared, thus making space for new objects.\r\n 3. JVM uses more memory than just the heap. For example Java methods, thread stacks and native handles are allocated in memory separate from the heap, as well as JVM internal data structures.\r\n 4. The heap is sometimes divided into two areas (or generations) called the nursery (or young space) and the old space. The nursery is a part of the heap reserved for allocation of new objects. When the nursery becomes full, garbage is collected by running a special young collection, where all objects that have lived long enough in the nursery are promoted (moved) to the old space, thus freeing up the nursery for more object allocation. When the old space becomes full garbage is collected there, a process called an old collection.\r\n\r\nsource:[http://docs.oracle.com/cd/E13150_01/jrockit_jvm/jrockit/geninfo/diagnos/garbage_collect.html](http://docs.oracle.com/cd/E13150_01/jrockit_jvm/jrockit/geninfo/diagnos/garbage_collect.html)\r\n\r\nRegarding your second question\r\n\r\n - The follow link, [http://www.vogella.com/articles/JavaPerformance/article.html](http://www.vogella.com/articles/JavaPerformance/article.html) is a great tutorial on how to calculate memory consumption during runtime.\r\n - If you also use eclipse, Eclipse Memory Analyzer (MAT) can help provide details of an applications memory use. \r\n\r\n\r\n","title":"How does the Inheritence work in Java? And how to count live objects on the heap at Runtime?","body":"<p>As an initial statement about this extensive subject can be:</p>\n\n<ol>\n<li>Java objects reside  the heap. The heap is created when the JVM starts up and may increase or decrease in size while the application runs</li>\n<li>When the heap becomes full, garbage is collected. During the garbage collection objects that are no longer used are cleared, thus making space for new objects.</li>\n<li>JVM uses more memory than just the heap. For example Java methods, thread stacks and native handles are allocated in memory separate from the heap, as well as JVM internal data structures.</li>\n<li>The heap is sometimes divided into two areas (or generations) called the nursery (or young space) and the old space. The nursery is a part of the heap reserved for allocation of new objects. When the nursery becomes full, garbage is collected by running a special young collection, where all objects that have lived long enough in the nursery are promoted (moved) to the old space, thus freeing up the nursery for more object allocation. When the old space becomes full garbage is collected there, a process called an old collection.</li>\n</ol>\n\n<p>source:<a href=\"http://docs.oracle.com/cd/E13150_01/jrockit_jvm/jrockit/geninfo/diagnos/garbage_collect.html\" rel=\"nofollow\">http://docs.oracle.com/cd/E13150_01/jrockit_jvm/jrockit/geninfo/diagnos/garbage_collect.html</a></p>\n\n<p>Regarding your second question</p>\n\n<ul>\n<li>The follow link, <a href=\"http://www.vogella.com/articles/JavaPerformance/article.html\" rel=\"nofollow\">http://www.vogella.com/articles/JavaPerformance/article.html</a> is a great tutorial on how to calculate memory consumption during runtime.</li>\n<li>If you also use eclipse, Eclipse Memory Analyzer (MAT) can help provide details of an applications memory use. </li>\n</ul>\n"}],"owner":{"account_id":2215206,"reputation":2164,"user_id":1956013,"accept_rate":56,"display_name":"Ahmed Adel Ismail"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":181,"favorite_count":0,"down_vote_count":4,"up_vote_count":0,"closed_date":1380963178,"accepted_answer_id":19190379,"answer_count":2,"score":-4,"last_activity_date":1639307952,"creation_date":1380918914,"question_id":19190316,"body_markdown":"Is there any way to explain how Objects are created and live on the Heap ?\r\nand how to calculate how many Objects are there on the heap at Runtime ?\r\n\r\nFor more clarification ... I have an answer to the first question now, but i need to know a way to calculate the live objects in heap at run time ... Weather a tool or a pattern or an algorithm ... How can i know the count of live objects on the heap at runtime","title":"How does the Inheritence work in Java? And how to count live objects on the heap at Runtime?","body":"<p>Is there any way to explain how Objects are created and live on the Heap ?\nand how to calculate how many Objects are there on the heap at Runtime ?</p>\n\n<p>For more clarification ... I have an answer to the first question now, but i need to know a way to calculate the live objects in heap at run time ... Weather a tool or a pattern or an algorithm ... How can i know the count of live objects on the heap at runtime</p>\n"},{"tags":["java","heap-memory","command-line-arguments","launch4j"],"answers":[{"tags":[],"owner":{"account_id":389997,"reputation":8148,"user_id":749782,"display_name":"Ari Maniatis"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1385714434,"creation_date":1385714434,"answer_id":20281453,"question_id":19345517,"body_markdown":"You can specify memory settings in an .ini file next to the executable, however this will only work if you don&#39;t already specify memory inside the launch4j configuration.\r\n\r\nhttp://launch4j.sourceforge.net/docs.html#Runtime_options","title":"launch4j: Override Default JVM Heap Size via Command Line","body":"<p>You can specify memory settings in an .ini file next to the executable, however this will only work if you don't already specify memory inside the launch4j configuration.</p>\n\n<p><a href=\"http://launch4j.sourceforge.net/docs.html#Runtime_options\" rel=\"nofollow\">http://launch4j.sourceforge.net/docs.html#Runtime_options</a></p>\n"}],"owner":{"account_id":242560,"reputation":9907,"user_id":514149,"accept_rate":80,"display_name":"Matthias"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2627,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":20281453,"answer_count":1,"score":0,"last_activity_date":1639307903,"creation_date":1381669079,"question_id":19345517,"body_markdown":"In the *launch4j* configuration for my Java application I have set values for the min. and max. heap size. This works fine, however, for some users it makes sense to override these parameters with other values. Is it possible with *launch4j* to have &quot;default&quot; settings for the min. and max. heap size, but still allow the user to override these settings via command line parameters?","title":"launch4j: Override Default JVM Heap Size via Command Line","body":"<p>In the <em>launch4j</em> configuration for my Java application I have set values for the min. and max. heap size. This works fine, however, for some users it makes sense to override these parameters with other values. Is it possible with <em>launch4j</em> to have \"default\" settings for the min. and max. heap size, but still allow the user to override these settings via command line parameters?</p>\n"},{"tags":["java","heap-memory","jmap"],"comments":[{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":0,"creation_date":1383239027,"post_id":19712367,"comment_id":29283891,"body_markdown":"Since you are talking about an over ten year old *API* version but asking for a *product* feature you should name the exact product as there were more than one vendor and several updates of compatible JVMs.","body":"Since you are talking about an over ten year old <i>API</i> version but asking for a <i>product</i> feature you should name the exact product as there were more than one vendor and several updates of compatible JVMs."},{"owner":{"account_id":1147349,"reputation":303,"user_id":1129813,"accept_rate":12,"display_name":"jamel"},"score":0,"creation_date":1383240210,"post_id":19712367,"comment_id":29284591,"body_markdown":"@Holger it is statndard SUN JDK","body":"@Holger it is statndard SUN JDK"}],"owner":{"account_id":1147349,"reputation":303,"user_id":1129813,"accept_rate":12,"display_name":"jamel"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":143,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1639307859,"creation_date":1383238410,"question_id":19712367,"body_markdown":"Can we use the jmap tool (version Java 1.4) to generate a heap dump file for an older jvm version? For example Java 1.3?\r\nIf it is not possible, is there a way to get a heap dump from the Java 1.3 JVM?\r\n","title":"jmap tool work for JVM 1.3 and older?","body":"<p>Can we use the jmap tool (version Java 1.4) to generate a heap dump file for an older jvm version? For example Java 1.3?\nIf it is not possible, is there a way to get a heap dump from the Java 1.3 JVM?</p>\n"},{"tags":["java","heap-memory"],"comments":[{"owner":{"account_id":2305374,"reputation":44549,"user_id":2024761,"display_name":"Rahul"},"score":0,"creation_date":1383889960,"post_id":19852484,"comment_id":29525069,"body_markdown":"So what&#39;s the question then?!","body":"So what&#39;s the question then?!"},{"owner":{"account_id":45934,"reputation":203669,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":0,"creation_date":1383890181,"post_id":19852484,"comment_id":29525138,"body_markdown":"What is `mb`? Maybe you&#39;re doing integer division and you&#39;re using less than 1 MB?","body":"What is <code>mb</code>? Maybe you&#39;re doing integer division and you&#39;re using less than 1 MB?"},{"owner":{"account_id":2972510,"reputation":17,"user_id":2524285,"display_name":"Be Positive"},"score":0,"creation_date":1383890537,"post_id":19852484,"comment_id":29525253,"body_markdown":"Thanks Jesper I got it thats the problem","body":"Thanks Jesper I got it thats the problem"}],"owner":{"account_id":2972510,"reputation":17,"user_id":2524285,"display_name":"Be Positive"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1639307807,"creation_date":1383889882,"question_id":19852484,"body_markdown":"Runtime runtime = Runtime.getRuntime();  \r\nSystem.out.println(&quot;Used Memory:&quot; + (runtime.totalMemory() - runtime.freeMemory()) / mb); \r\n                                                                                                   \r\nOutputi i am getting is zero every time,but i have two process running on.\r\n","title":"Runtime class is returnig java used haep space as zero(0)","body":"<p>Runtime runtime = Runtime.getRuntime();<br>\nSystem.out.println(\"Used Memory:\" + (runtime.totalMemory() - runtime.freeMemory()) / mb); </p>\n\n<p>Outputi i am getting is zero every time,but i have two process running on.</p>\n"},{"tags":["java","applet","heap-memory","loadrunner","recording"],"comments":[{"owner":{"account_id":353426,"reputation":5631,"user_id":691105,"display_name":"James Pulley"},"score":0,"creation_date":1384527761,"post_id":19998043,"comment_id":31315111,"body_markdown":"This is a cross post from SQAForums for the same question: http://www.sqaforums.com/forums/hp-mercury-loadrunner/150337-recording-java-applet-loadrunner.html Please choose which thread should be authoritative for answers, here or SQAForums. Shotgun posts across forums are counterproductive for finding solutions to questions. I would recommend you pick one forum, exhaust your answers there and then move onto another forum with the increased information from the first location.","body":"This is a cross post from SQAForums for the same question: <a href=\"http://www.sqaforums.com/forums/hp-mercury-loadrunner/150337-recording-java-applet-loadrunner.html\" rel=\"nofollow noreferrer\">sqaforums.com/forums/hp-mercury-loadrunner/&hellip;</a> Please choose which thread should be authoritative for answers, here or SQAForums. Shotgun posts across forums are counterproductive for finding solutions to questions. I would recommend you pick one forum, exhaust your answers there and then move onto another forum with the increased information from the first location."}],"owner":{"account_id":3295676,"reputation":11,"user_id":2772997,"display_name":"user2772997"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1605,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1639307793,"creation_date":1384508783,"question_id":19998043,"body_markdown":"I am trying to record a java applet in loadrunner . I have tried all the java  and web protocols , its giving me the error &quot;Could not create Java Virtual machine &quot; while recording although the script is working fine manually .Increasing the heap size also doesn&#39;t help.\r\n\r\nWhen i tried with proxy recording nothing is getting captured .\r\n\r\nUsing winsock I am able to get a script ,but i am unable to parametrize it as i have no idea about socket scripting .\r\n\r\n \r\n\r\nIs winsock my only chance to record  the applet ?\r\n\r\n \r\n\r\nThe applet is in java7 and i have loadruner 11.52 and the os is widows 7\r\n","title":"Recording java applet in loadrunner","body":"<p>I am trying to record a java applet in loadrunner . I have tried all the java  and web protocols , its giving me the error \"Could not create Java Virtual machine \" while recording although the script is working fine manually .Increasing the heap size also doesn't help.</p>\n\n<p>When i tried with proxy recording nothing is getting captured .</p>\n\n<p>Using winsock I am able to get a script ,but i am unable to parametrize it as i have no idea about socket scripting .</p>\n\n<p>Is winsock my only chance to record  the applet ?</p>\n\n<p>The applet is in java7 and i have loadruner 11.52 and the os is widows 7</p>\n"},{"tags":["python","java","subprocess","heap-memory"],"comments":[{"owner":{"account_id":1076053,"reputation":85188,"user_id":1281433,"accept_rate":43,"display_name":"Joshua Taylor"},"score":0,"creation_date":1384827301,"post_id":20061633,"comment_id":29883354,"body_markdown":"When you try to run that code, , _what_?  You started a sentence, but didn&#39;t finish it.","body":"When you try to run that code, , <i>what</i>?  You started a sentence, but didn&#39;t finish it."}],"answers":[{"tags":[],"owner":{"account_id":808621,"reputation":357054,"user_id":908494,"accept_rate":25,"display_name":"abarnert"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1384825921,"creation_date":1384825921,"answer_id":20061650,"question_id":20061633,"body_markdown":"You&#39;re passing `&quot;-Xmx1536M -Xms1536M&quot;` as a single argument.\r\n\r\nThat&#39;s not equivalent to this shell command:\r\n\r\n    java -Xmx1536M -Xms1536M -jar /home/bekk/MServer/ForgeBukkit/MCPC.jar\r\n\r\n but to this one:\r\n\r\n    java &#39;-Xmx1536M -Xms1536M&#39; -jar /home/bekk/MServer/ForgeBukkit/MCPC.jar\r\n\r\nSo, Java will get that `&#39;-Xmx1536M -Xms1536M&#39;` as its `argv[1]`, instead of getting one flag in `argv[1]` and the next in `argv[2]`. And it will interpret that one giant flag arg as you trying to set `mx` to `&#39;1536M -Xms1536M&#39;`, which is not a valid maximum heap size.\r\n\r\nTo fix it, put each argument in its own string in the list:\r\n\r\n    [&quot;java&quot;, &quot;-Xmx1536M&quot;, &quot;-Xms1536M&quot;, &quot;-jar&quot;, &quot;/home/bekk/MServer/ForgeBukkit/MCPC.jar&quot;]\r\n","title":"Python Starting Java application with subprocess:Invalid maximum heap size","body":"<p>You're passing <code>\"-Xmx1536M -Xms1536M\"</code> as a single argument.</p>\n\n<p>That's not equivalent to this shell command:</p>\n\n<pre><code>java -Xmx1536M -Xms1536M -jar /home/bekk/MServer/ForgeBukkit/MCPC.jar\n</code></pre>\n\n<p> but to this one:</p>\n\n<pre><code>java '-Xmx1536M -Xms1536M' -jar /home/bekk/MServer/ForgeBukkit/MCPC.jar\n</code></pre>\n\n<p>So, Java will get that <code>'-Xmx1536M -Xms1536M'</code> as its <code>argv[1]</code>, instead of getting one flag in <code>argv[1]</code> and the next in <code>argv[2]</code>. And it will interpret that one giant flag arg as you trying to set <code>mx</code> to <code>'1536M -Xms1536M'</code>, which is not a valid maximum heap size.</p>\n\n<p>To fix it, put each argument in its own string in the list:</p>\n\n<pre><code>[\"java\", \"-Xmx1536M\", \"-Xms1536M\", \"-jar\", \"/home/bekk/MServer/ForgeBukkit/MCPC.jar\"]\n</code></pre>\n"}],"owner":{"account_id":3604484,"reputation":49,"user_id":3006991,"accept_rate":100,"display_name":"Bekk"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":716,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":20061650,"answer_count":1,"score":2,"last_activity_date":1639307775,"creation_date":1384825806,"question_id":20061633,"body_markdown":"I am trying to start a Java application with Python using the subprocess module. I am not new to Python but I am new to the subprocess module.  When I try to run this code:\r\n\r\n    import subprocess as sp\r\n    proc = sp.Popen([&quot;java&quot;, &quot;-Xmx1536M -Xms1536M&quot;, &quot;-jar /home/bekk/MServer/ForgeBukkit/MCPC.jar&quot;],stdin=sp.PIPE,stdout=sp.PIPE,)\r\n\r\nThe command: \r\n\r\n    java -Xmx1536M -Xms1536M -jar /home/bekk/MServer/ForgeBukkit/MCPC.jar\r\n\r\nruns correctly when typed into a terminal, so I know that it can work.\r\nIt seems to be a problem with running it from Python. Any thoughts on what my problem might be?\r\n","title":"Python Starting Java application with subprocess:Invalid maximum heap size","body":"<p>I am trying to start a Java application with Python using the subprocess module. I am not new to Python but I am new to the subprocess module.  When I try to run this code:</p>\n\n<pre><code>import subprocess as sp\nproc = sp.Popen([\"java\", \"-Xmx1536M -Xms1536M\", \"-jar /home/bekk/MServer/ForgeBukkit/MCPC.jar\"],stdin=sp.PIPE,stdout=sp.PIPE,)\n</code></pre>\n\n<p>The command: </p>\n\n<pre><code>java -Xmx1536M -Xms1536M -jar /home/bekk/MServer/ForgeBukkit/MCPC.jar\n</code></pre>\n\n<p>runs correctly when typed into a terminal, so I know that it can work.\nIt seems to be a problem with running it from Python. Any thoughts on what my problem might be?</p>\n"},{"tags":["java","size","heap-memory"],"comments":[{"owner":{"account_id":971196,"reputation":24175,"user_id":993742,"display_name":"isnot2bad"},"score":0,"creation_date":1384957375,"post_id":20098272,"comment_id":29945339,"body_markdown":"So you want to change the default value for the maximum heap size on your machine?","body":"So you want to change the default value for the maximum heap size on your machine?"},{"owner":{"account_id":460193,"reputation":3319,"user_id":861127,"display_name":"abronan"},"score":0,"creation_date":1384959948,"post_id":20098272,"comment_id":29947181,"body_markdown":"Related : [Maximum Java Heap Size of a 32 bit JVM on a 64 bit OS](http://stackoverflow.com/questions/1434779/maximum-java-heap-size-of-a-32-bit-jvm-on-a-64-bit-os)","body":"Related : <a href=\"http://stackoverflow.com/questions/1434779/maximum-java-heap-size-of-a-32-bit-jvm-on-a-64-bit-os\">Maximum Java Heap Size of a 32 bit JVM on a 64 bit OS</a>"}],"answers":[{"tags":[],"owner":{"account_id":2052678,"reputation":134073,"user_id":1831293,"accept_rate":91,"display_name":"Evgeniy Dorofeev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1384958075,"creation_date":1384958075,"answer_id":20098745,"question_id":20098272,"body_markdown":"It&#39;s only possible on 64-bit JVM and 64-bit Windows, on 32-bit JVM / PC max heap size is about 1.2M","title":"Increasing java heap size general","body":"<p>It's only possible on 64-bit JVM and 64-bit Windows, on 32-bit JVM / PC max heap size is about 1.2M</p>\n"}],"owner":{"account_id":3612795,"reputation":11,"user_id":3013419,"display_name":"user3013419"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1407,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1639307754,"creation_date":1384956888,"question_id":20098272,"body_markdown":"I&#39;m using a Windows 7 PC and i want to increase my java heap size but not for an application\r\nSo the command java -xmx4g e.g. is not possible.\r\nI want to increase the java heap size in generel.\r\nIs this somehow possible?\r\nI appreciate every answer.\r\n\r\nSorry for my bad english\r\n\r\nPS:  I&#39;m using 64-bit JVM on a 64-bit Win 7 PC\r\n     commands -java Xmx6G and set JAVA_OPTS=-Xms1024M -Xmx6144M does not work even when writing it in the startup.bat\r\nI get the error in a program that consists of 10 same steps the first 4 are no problem but after the 4th i get the error.\r\nError: javax.xml.ws.soap.SOAPFaultException: Java heap space\r\n\r\nBest regards,\r\nEros Kilinc ","title":"Increasing java heap size general","body":"<p>I'm using a Windows 7 PC and i want to increase my java heap size but not for an application\nSo the command java -xmx4g e.g. is not possible.\nI want to increase the java heap size in generel.\nIs this somehow possible?\nI appreciate every answer.</p>\n\n<p>Sorry for my bad english</p>\n\n<p>PS:  I'm using 64-bit JVM on a 64-bit Win 7 PC\n     commands -java Xmx6G and set JAVA_OPTS=-Xms1024M -Xmx6144M does not work even when writing it in the startup.bat\nI get the error in a program that consists of 10 same steps the first 4 are no problem but after the 4th i get the error.\nError: javax.xml.ws.soap.SOAPFaultException: Java heap space</p>\n\n<p>Best regards,\nEros Kilinc </p>\n"},{"tags":["java","opengl","lwjgl","java-2d"],"answers":[{"tags":[],"owner":{"account_id":7322082,"reputation":205321,"user_id":5577765,"display_name":"Rabbid76"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1639307753,"creation_date":1639307753,"answer_id":70323052,"question_id":70322976,"body_markdown":"&gt; Already tried using GL_POLYGON, but it just fills the entire O and I have a filled circle, &quot; \r\n\r\nYes of course. `GL_POLYGON` is for [Convex](https://en.wikipedia.org/wiki/Convex_polygon) shapes and fills the entire area enclosed by the polygon.\r\n\r\nYou have 2 options:\r\n\r\n1. Use `GL_POLYGON` twice to draw a white shape and then a red shape inside the white shape.\r\n\r\n2. Use [`GL_TRIANGLE_STRIP`](https://www.khronos.org/opengl/wiki/Primitive#Triangle_primitives) and form a shape that just draws the outline. The primitive can be formed by alternately specifying a point on the outer outline and on the inner outline. ","title":"How can I fill a java Shape in OpenGL","body":"<blockquote>\n<p>Already tried using GL_POLYGON, but it just fills the entire O and I have a filled circle, &quot;</p>\n</blockquote>\n<p>Yes of course. <code>GL_POLYGON</code> is for <a href=\"https://en.wikipedia.org/wiki/Convex_polygon\" rel=\"nofollow noreferrer\">Convex</a> shapes and fills the entire area enclosed by the polygon.</p>\n<p>You have 2 options:</p>\n<ol>\n<li><p>Use <code>GL_POLYGON</code> twice to draw a white shape and then a red shape inside the white shape.</p>\n</li>\n<li><p>Use <a href=\"https://www.khronos.org/opengl/wiki/Primitive#Triangle_primitives\" rel=\"nofollow noreferrer\"><code>GL_TRIANGLE_STRIP</code></a> and form a shape that just draws the outline. The primitive can be formed by alternately specifying a point on the outer outline and on the inner outline.</p>\n</li>\n</ol>\n"}],"owner":{"account_id":22163582,"reputation":37,"user_id":16410173,"display_name":"DasBabyPixel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":143,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70323052,"answer_count":1,"score":1,"last_activity_date":1639307753,"creation_date":1639307120,"question_id":70322976,"body_markdown":"Well, lets say I have the Shape of an O and I want to render it.\r\n[![enter image description here][1]][1]\r\n\r\n  [1]: https://i.stack.imgur.com/Jaihd.png\r\n\r\nNow my current rendering code is this: \r\n\r\n```\r\npublic void fill(Shape shape, float xOffset, float yOffset) {\r\n\t\tAffineTransform transform = new AffineTransform();\r\n\t\ttransform.translate(xOffset, yOffset);\r\n\t\tPathIterator pi = shape.getPathIterator(transform, 1);\r\n\t\tint winding = pi.getWindingRule();\r\n\t\tShapeRenderer r = getInstance();\r\n\t\tfloat[] coords = new float[6];\r\n\t\tboolean drawing = false;\r\n\t\twhile (!pi.isDone()) {\r\n\t\t\tint segment = pi.currentSegment(coords);\r\n\t\t\tswitch (segment) {\r\n\t\t\tcase PathIterator.SEG_CLOSE:\r\n\t\t\t\tif (drawing) {\r\n\t\t\t\t\tr.endPoly();\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase PathIterator.SEG_LINETO:\r\n\t\t\t\tr.lineTo(coords);\r\n\t\t\t\tbreak;\r\n\t\t\tcase PathIterator.SEG_MOVETO:\r\n\t\t\t\tif (drawing) {\r\n\t\t\t\t\tr.endPoly();\r\n\t\t\t\t}\r\n\t\t\t\tdrawing = true;\r\n\t\t\t\tr.beginPoly(winding);\r\n\t\t\t\tr.moveTo(coords);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new IllegalArgumentException(&quot;Unexpected value: &quot; + segment);\r\n\t\t\t}\r\n\t\t\tpi.next();\r\n\t\t}\r\n\t}\r\n```\r\n\r\nShapeRenderer: \r\n```\r\nprivate final Deque&lt;Queue&lt;Float&gt;&gt; vertices = new ConcurrentLinkedDeque&lt;&gt;();\r\n\r\n\t@Override\r\n\tpublic void beginPoly(int windingRule) {\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void endPoly() {\r\n\t\tQueue&lt;Float&gt; q;\r\n\t\tGL11.glBegin(GL11.GL_LINE_LOOP);\r\n\t\twhile ((q = vertices.poll()) != null) {\r\n\t\t\tFloat x, y;\r\n\t\t\twhile ((x = q.poll()) != null &amp;&amp; (y = q.poll()) != null) {\r\n\t\t\t\tGL11.glVertex2f(x, y);\r\n\t\t\t}\r\n\t\t}\r\n\t\tGL11.glEnd();\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void moveTo(float[] vertex) {\r\n\t\tQueue&lt;Float&gt; q = new ConcurrentLinkedQueue&lt;&gt;();\r\n\t\tvertices.offer(q);\r\n\t\tlineTo(vertex);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void lineTo(float[] vertex) {\r\n\t\tQueue&lt;Float&gt; q = vertices.peekLast();\r\n\t\tq.offer(vertex[0]);\r\n\t\tq.offer(vertex[1]);\r\n\t}\r\n```\r\nSo lets say I want to fill that Shape, just like java awt does, successfully... How would I do that?\r\n(Already tried using GL_POLYGON, but it just fills the entire O and I have a filled circle, not an O. Also tried using parts of jogamp glu but it just rendered nothing, no clue why)","title":"How can I fill a java Shape in OpenGL","body":"<p>Well, lets say I have the Shape of an O and I want to render it.\n<a href=\"https://i.stack.imgur.com/Jaihd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Jaihd.png\" alt=\"enter image description here\" /></a></p>\n<p>Now my current rendering code is this:</p>\n<pre><code>public void fill(Shape shape, float xOffset, float yOffset) {\n        AffineTransform transform = new AffineTransform();\n        transform.translate(xOffset, yOffset);\n        PathIterator pi = shape.getPathIterator(transform, 1);\n        int winding = pi.getWindingRule();\n        ShapeRenderer r = getInstance();\n        float[] coords = new float[6];\n        boolean drawing = false;\n        while (!pi.isDone()) {\n            int segment = pi.currentSegment(coords);\n            switch (segment) {\n            case PathIterator.SEG_CLOSE:\n                if (drawing) {\n                    r.endPoly();\n                }\n                break;\n            case PathIterator.SEG_LINETO:\n                r.lineTo(coords);\n                break;\n            case PathIterator.SEG_MOVETO:\n                if (drawing) {\n                    r.endPoly();\n                }\n                drawing = true;\n                r.beginPoly(winding);\n                r.moveTo(coords);\n                break;\n            default:\n                throw new IllegalArgumentException(&quot;Unexpected value: &quot; + segment);\n            }\n            pi.next();\n        }\n    }\n</code></pre>\n<p>ShapeRenderer:</p>\n<pre><code>private final Deque&lt;Queue&lt;Float&gt;&gt; vertices = new ConcurrentLinkedDeque&lt;&gt;();\n\n    @Override\n    public void beginPoly(int windingRule) {\n    }\n\n    @Override\n    public void endPoly() {\n        Queue&lt;Float&gt; q;\n        GL11.glBegin(GL11.GL_LINE_LOOP);\n        while ((q = vertices.poll()) != null) {\n            Float x, y;\n            while ((x = q.poll()) != null &amp;&amp; (y = q.poll()) != null) {\n                GL11.glVertex2f(x, y);\n            }\n        }\n        GL11.glEnd();\n    }\n\n    @Override\n    public void moveTo(float[] vertex) {\n        Queue&lt;Float&gt; q = new ConcurrentLinkedQueue&lt;&gt;();\n        vertices.offer(q);\n        lineTo(vertex);\n    }\n\n    @Override\n    public void lineTo(float[] vertex) {\n        Queue&lt;Float&gt; q = vertices.peekLast();\n        q.offer(vertex[0]);\n        q.offer(vertex[1]);\n    }\n</code></pre>\n<p>So lets say I want to fill that Shape, just like java awt does, successfully... How would I do that?\n(Already tried using GL_POLYGON, but it just fills the entire O and I have a filled circle, not an O. Also tried using parts of jogamp glu but it just rendered nothing, no clue why)</p>\n"},{"tags":["java","size","heap-memory"],"answers":[{"tags":[],"owner":{"account_id":1417953,"reputation":45783,"user_id":1343161,"accept_rate":100,"display_name":"Keppil"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1387796892,"creation_date":1387796381,"answer_id":20742140,"question_id":20742001,"body_markdown":"It looks like you have `-Xmx512M` set in the environment variable `_JAVA_OPTIONS`. Clear that and try again.  \r\n\r\nIn Windows 7, this is done like this:\r\n\r\n 1. Right-click Computer from the Start menu and choose Properties\r\n 2. Click Advanced system settings &gt; Advanced tab\r\n 3. Click on Environment Variables, find _JAVA_OPTIONS, and select it.\r\n 4. Click Delete\r\n 5. Click OK, and you&#39;re done!","title":"Error when trying to increase java heap size","body":"<p>It looks like you have <code>-Xmx512M</code> set in the environment variable <code>_JAVA_OPTIONS</code>. Clear that and try again.  </p>\n\n<p>In Windows 7, this is done like this:</p>\n\n<ol>\n<li>Right-click Computer from the Start menu and choose Properties</li>\n<li>Click Advanced system settings > Advanced tab</li>\n<li>Click on Environment Variables, find _JAVA_OPTIONS, and select it.</li>\n<li>Click Delete</li>\n<li>Click OK, and you're done!</li>\n</ol>\n"}],"owner":{"account_id":3765705,"reputation":3,"user_id":3129307,"display_name":"Remco_vb"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":399,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":20742140,"answer_count":1,"score":0,"last_activity_date":1639307726,"creation_date":1387795981,"question_id":20742001,"body_markdown":"For a minecraft server I&#39;m trying to run the server with more than the standard 512MB RAM. This used to work for me but when I recently installed the server again it stopped working. I use the following command line to run the server:\r\n\r\n    java -Xms1024M -Xmx2048M -jar TekkitLite.jar \r\n    pause\r\n\r\nBut when I run this script I get the following error:\r\n\r\n    C:\\Users\\...\\server&gt;java -Xms1024M -Xmx2048M -jar TekkitLite.jar\r\n\r\nPicked `up_JAVA_OPTIONS: -Xmx512M`\r\nError occured during initialization of VM\r\nIncompatible minimum and maximum heap sizes specified\r\n\r\nIt seems to me it just doesn&#39;t pick up the Xmx argument or something, and I haven&#39;t found a solution to fix it anywhere.\r\n\r\nMy system: \r\n\r\n- OS: Windows 7 64bit\r\n- Java: java7u45(64bit)\r\n- RAM: 8G\r\n\r\nIf anyone has a solution, that would be awesome :)\r\n","title":"Error when trying to increase java heap size","body":"<p>For a minecraft server I'm trying to run the server with more than the standard 512MB RAM. This used to work for me but when I recently installed the server again it stopped working. I use the following command line to run the server:</p>\n\n<pre><code>java -Xms1024M -Xmx2048M -jar TekkitLite.jar \npause\n</code></pre>\n\n<p>But when I run this script I get the following error:</p>\n\n<pre><code>C:\\Users\\...\\server&gt;java -Xms1024M -Xmx2048M -jar TekkitLite.jar\n</code></pre>\n\n<p>Picked <code>up_JAVA_OPTIONS: -Xmx512M</code>\nError occured during initialization of VM\nIncompatible minimum and maximum heap sizes specified</p>\n\n<p>It seems to me it just doesn't pick up the Xmx argument or something, and I haven't found a solution to fix it anywhere.</p>\n\n<p>My system: </p>\n\n<ul>\n<li>OS: Windows 7 64bit</li>\n<li>Java: java7u45(64bit)</li>\n<li>RAM: 8G</li>\n</ul>\n\n<p>If anyone has a solution, that would be awesome :)</p>\n"},{"tags":["java","algorithm","a-star"],"comments":[{"owner":{"account_id":1138001,"reputation":22629,"user_id":1122645,"accept_rate":89,"display_name":"UmNyobe"},"score":0,"creation_date":1367830732,"post_id":16395072,"comment_id":23501216,"body_markdown":"What is your heuristic function? is it `n.fSum()`?","body":"What is your heuristic function? is it <code>n.fSum()</code>?"},{"owner":{"account_id":2598478,"reputation":711,"user_id":2251551,"accept_rate":92,"display_name":"smushi"},"score":0,"creation_date":1367831091,"post_id":16395072,"comment_id":23501363,"body_markdown":"public int fSum () {\n        \n        return travDist + straightDist;\n}","body":"public int fSum () {                  return travDist + straightDist; }"}],"answers":[{"tags":[],"owner":{"account_id":1119361,"reputation":46385,"user_id":1108032,"accept_rate":79,"display_name":"Boris Strandjev"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1639307723,"creation_date":1367830301,"answer_id":16395165,"question_id":16395072,"body_markdown":"What you are doing is not a proper A star algorithm.\r\n\r\n    Collections.sort(successors);\r\n\r\nYou shouldn&#39;t do that. In A star you always consider all the successors. You needn&#39;t worry about the order- the priority queue will take care of that. However, adding this line increases the complexity of the algorithm.\r\n\r\n    for (Node n1 : successors) {\r\n      if (n.fSum() &gt; n1.fSum()) {\r\n        exploreList.remove(n);\r\n        exploreList.add(n1);\r\n      }      \r\n    }\r\n\r\nThis is entirely wrong. What you are doing here is: you only add the closest of all the successors. This will be a [beam search][1] with a beam of size 1, not A star - just keep them all in.\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Beam_search","title":"A* Algorithm Java","body":"<p>What you are doing is not a proper A star algorithm.</p>\n<pre><code>Collections.sort(successors);\n</code></pre>\n<p>You shouldn't do that. In A star you always consider all the successors. You needn't worry about the order- the priority queue will take care of that. However, adding this line increases the complexity of the algorithm.</p>\n<pre><code>for (Node n1 : successors) {\n  if (n.fSum() &gt; n1.fSum()) {\n    exploreList.remove(n);\n    exploreList.add(n1);\n  }      \n}\n</code></pre>\n<p>This is entirely wrong. What you are doing here is: you only add the closest of all the successors. This will be a <a href=\"http://en.wikipedia.org/wiki/Beam_search\" rel=\"nofollow noreferrer\">beam search</a> with a beam of size 1, not A star - just keep them all in.</p>\n"}],"owner":{"account_id":2598478,"reputation":711,"user_id":2251551,"accept_rate":92,"display_name":"smushi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4394,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":16395165,"answer_count":1,"score":1,"last_activity_date":1639307723,"creation_date":1367829962,"question_id":16395072,"body_markdown":"I have spent entire weekend playing around with this. I am trying to store the nodes in PriorityQueue data structure. My astar function doesnt seem to be doing what it should. Anyone mind having a look?\r\n\r\n    public void aStar(Node from, Node to) {\r\n        \r\n        PriorityQueue&lt;Node&gt; exploreList = new PriorityQueue&lt;Node&gt;();\r\n        ArrayList&lt;Node&gt; visited = new ArrayList&lt;Node&gt;();\r\n        ArrayList&lt;Node&gt; successors = new ArrayList&lt;Node&gt;();\r\n       \r\n        Node current = from;\r\n        System.out.println(current.getName());\r\n        while (current != to) {\r\n                successors = current.getConnected();\r\n                Collections.sort(successors);\r\n                for (Node n : successors) {\r\n                        if (!visited.contains(n)) {\r\n                                exploreList.add(n);\r\n                        }\r\n                        for (Node n1 : successors) {\r\n                                if (n.fSum() &gt; n1.fSum()) {\r\n                                exploreList.remove(n);\r\n                                exploreList.add(n1);\r\n                                }      \r\n                        }\r\n                }\r\n                visited.add(current);\r\n                current = exploreList.remove();\r\n                System.out.println(current.getName());\r\n        }\r\n\r\n\r\n\r\nNode Class here\r\n\r\n       public class Node implements Comparable {\r\n\t   private String name;\r\n       private int travDist;\r\n\t   private int straightDist;\r\n       private ArrayList&lt;Arc&gt; arcs;\r\n\r\n\t/**\r\n\t * Constructor for a new node\r\n\t * \r\n\t * @param n\r\n\t */\r\n       public Node(String n, int aTravDist, int aStraightDist) {\r\n           name = n;\r\n           travDist = aTravDist;\r\n           straightDist = aStraightDist;\r\n       \r\n           arcs = new ArrayList&lt;Arc&gt;();\r\n      }\r\n\r\n\t/**\r\n\t * Adds a new arc\r\n\t * \r\n\t * @param to\r\n\t * @param c\r\n\t */\r\n\tpublic void addArc(Node to, int c) {\r\n\t\tarcs.add(new Arc(to, c));\r\n\t}\r\n\r\n\t/**\r\n\t * Gets the list of connected nodes to this node\r\n\t * \r\n\t * @return\r\n\t */\r\n\tpublic ArrayList&lt;Node&gt; getConnected() {\r\n\t\tArrayList&lt;Node&gt; returnData = new ArrayList&lt;Node&gt;();\r\n\t\tfor (Arc a : arcs) {\r\n\t\t\treturnData.add(a.getNode());\r\n\t\t}\r\n\t\treturn returnData;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic int compareTo(Object o) {\r\n\t\t//return name.compareTo(((Node) o).getName());\r\n\t\tInteger sum = ((Node)o).fSum();\r\n        return sum.compareTo(fSum());\r\n\t}\r\n\t\r\n\tpublic int fSum () {\r\n        \r\n        return travDist + straightDist;\r\n    }\r\n\r\n\t/**\r\n\t * Gets the name of the Node\r\n\t * \r\n\t * @return\r\n\t */\r\n\tpublic String getName() {\r\n\t\treturn name;\r\n\t}\r\n\r\n\r\n    }","title":"A* Algorithm Java","body":"<p>I have spent entire weekend playing around with this. I am trying to store the nodes in PriorityQueue data structure. My astar function doesnt seem to be doing what it should. Anyone mind having a look?</p>\n\n<pre><code>public void aStar(Node from, Node to) {\n\n    PriorityQueue&lt;Node&gt; exploreList = new PriorityQueue&lt;Node&gt;();\n    ArrayList&lt;Node&gt; visited = new ArrayList&lt;Node&gt;();\n    ArrayList&lt;Node&gt; successors = new ArrayList&lt;Node&gt;();\n\n    Node current = from;\n    System.out.println(current.getName());\n    while (current != to) {\n            successors = current.getConnected();\n            Collections.sort(successors);\n            for (Node n : successors) {\n                    if (!visited.contains(n)) {\n                            exploreList.add(n);\n                    }\n                    for (Node n1 : successors) {\n                            if (n.fSum() &gt; n1.fSum()) {\n                            exploreList.remove(n);\n                            exploreList.add(n1);\n                            }      \n                    }\n            }\n            visited.add(current);\n            current = exploreList.remove();\n            System.out.println(current.getName());\n    }\n</code></pre>\n\n<p>Node Class here</p>\n\n<pre><code>   public class Node implements Comparable {\n   private String name;\n   private int travDist;\n   private int straightDist;\n   private ArrayList&lt;Arc&gt; arcs;\n\n/**\n * Constructor for a new node\n * \n * @param n\n */\n   public Node(String n, int aTravDist, int aStraightDist) {\n       name = n;\n       travDist = aTravDist;\n       straightDist = aStraightDist;\n\n       arcs = new ArrayList&lt;Arc&gt;();\n  }\n\n/**\n * Adds a new arc\n * \n * @param to\n * @param c\n */\npublic void addArc(Node to, int c) {\n    arcs.add(new Arc(to, c));\n}\n\n/**\n * Gets the list of connected nodes to this node\n * \n * @return\n */\npublic ArrayList&lt;Node&gt; getConnected() {\n    ArrayList&lt;Node&gt; returnData = new ArrayList&lt;Node&gt;();\n    for (Arc a : arcs) {\n        returnData.add(a.getNode());\n    }\n    return returnData;\n}\n\n@Override\npublic int compareTo(Object o) {\n    //return name.compareTo(((Node) o).getName());\n    Integer sum = ((Node)o).fSum();\n    return sum.compareTo(fSum());\n}\n\npublic int fSum () {\n\n    return travDist + straightDist;\n}\n\n/**\n * Gets the name of the Node\n * \n * @return\n */\npublic String getName() {\n    return name;\n}\n\n\n}\n</code></pre>\n"},{"tags":["java","error-handling","heap-memory"],"comments":[{"owner":{"account_id":3659411,"reputation":40844,"user_id":3049628,"accept_rate":78,"display_name":"Tim B"},"score":2,"creation_date":1389273008,"post_id":21021191,"comment_id":31596939,"body_markdown":"Have you tried attaching an appropriate tool and looking at how much memory is actually used and what is using it?","body":"Have you tried attaching an appropriate tool and looking at how much memory is actually used and what is using it?"},{"owner":{"account_id":1214421,"reputation":235,"user_id":1182302,"accept_rate":41,"display_name":"c2programming"},"score":0,"creation_date":1389273111,"post_id":21021191,"comment_id":31597006,"body_markdown":"Not yet, I just increase my Heap and then it works. I just found it pretty weird that the same program uses apparently a different about of Memory on two different machines...\nI thought maybe it is a common thing or something.\n\nI will try later to use a tool to determine the memory usage. Thanks for the hint","body":"Not yet, I just increase my Heap and then it works. I just found it pretty weird that the same program uses apparently a different about of Memory on two different machines... I thought maybe it is a common thing or something.  I will try later to use a tool to determine the memory usage. Thanks for the hint"},{"owner":{"account_id":1336108,"reputation":8046,"user_id":1278839,"accept_rate":69,"display_name":"CodeChimp"},"score":4,"creation_date":1389273218,"post_id":21021191,"comment_id":31597070,"body_markdown":"Are they running the same JVM (brand/flavor/version/etc)?  The JVM is responsible for performing GC, so the implementation of the JVM has a lot to do with how well the GC is implemented.  Also, could matter if one is configured to run as 32-bit vs. 64-bit.  Or if one was executed using the `-server` flag vs. `-client` flag, the former of which skips loading the AWT and Spring classes at start-up.  There are plenty of tools out there to analyze GC logs and such.  These may be of some use here.","body":"Are they running the same JVM (brand/flavor/version/etc)?  The JVM is responsible for performing GC, so the implementation of the JVM has a lot to do with how well the GC is implemented.  Also, could matter if one is configured to run as 32-bit vs. 64-bit.  Or if one was executed using the <code>-server</code> flag vs. <code>-client</code> flag, the former of which skips loading the AWT and Spring classes at start-up.  There are plenty of tools out there to analyze GC logs and such.  These may be of some use here."},{"owner":{"account_id":3659411,"reputation":40844,"user_id":3049628,"accept_rate":78,"display_name":"Tim B"},"score":0,"creation_date":1389273288,"post_id":21021191,"comment_id":31597113,"body_markdown":"@CodeChimp I was in the middle of writing essentially that and you got there first :).  64 bit JVMs will in general use more memory than 32 bit ones (all the pointers are twice as big for a start). I think you mean Swing not Spring though.","body":"@CodeChimp I was in the middle of writing essentially that and you got there first :).  64 bit JVMs will in general use more memory than 32 bit ones (all the pointers are twice as big for a start). I think you mean Swing not Spring though."},{"owner":{"account_id":1214421,"reputation":235,"user_id":1182302,"accept_rate":41,"display_name":"c2programming"},"score":0,"creation_date":1389273332,"post_id":21021191,"comment_id":31597142,"body_markdown":"I will try it out. Thanks already for all these hints.","body":"I will try it out. Thanks already for all these hints."},{"owner":{"account_id":1336108,"reputation":8046,"user_id":1278839,"accept_rate":69,"display_name":"CodeChimp"},"score":0,"creation_date":1389273574,"post_id":21021191,"comment_id":31597282,"body_markdown":"There are entire books written on the subject of JVM tuning.  It&#39;s a complicated and slippery topic, and usually depends highly on the application and the environment it runs in.  I once worked one an app that was getting OutOfMemoryErrors, but when we increased the heap they got worse, not better.  Ultimately, we solved it my making the total heap about 256mb smaller, but increasing Perm Gen by like 64mb.  What it came down to is this app, in particular, was exhausting the GC before it could free the memory, and adding more just meant the GC had more work when it actually did run.","body":"There are entire books written on the subject of JVM tuning.  It&#39;s a complicated and slippery topic, and usually depends highly on the application and the environment it runs in.  I once worked one an app that was getting OutOfMemoryErrors, but when we increased the heap they got worse, not better.  Ultimately, we solved it my making the total heap about 256mb smaller, but increasing Perm Gen by like 64mb.  What it came down to is this app, in particular, was exhausting the GC before it could free the memory, and adding more just meant the GC had more work when it actually did run."}],"owner":{"account_id":1214421,"reputation":235,"user_id":1182302,"accept_rate":41,"display_name":"c2programming"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":167,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1639307692,"creation_date":1389272932,"question_id":21021191,"body_markdown":"I ran into the following problem:\r\n\r\nThe same Java program in Eclipse. On my computer (Macbook Air, 8GB Ram) I get the HeapSpaceError Java Heap Space.\r\nThe same Java program on a MacBook Pro, 8GB Ram I don&#39;t get the Error. \r\n\r\nThe initial Heap Space and the Max Heap Space is the same.\r\n\r\nAny ideas why this error occurs?","title":"Java Heap Space on two different computers","body":"<p>I ran into the following problem:</p>\n\n<p>The same Java program in Eclipse. On my computer (Macbook Air, 8GB Ram) I get the HeapSpaceError Java Heap Space.\nThe same Java program on a MacBook Pro, 8GB Ram I don't get the Error. </p>\n\n<p>The initial Heap Space and the Max Heap Space is the same.</p>\n\n<p>Any ideas why this error occurs?</p>\n"},{"tags":["java","heap-memory"],"comments":[{"owner":{"account_id":1435980,"reputation":127999,"user_id":1357341,"accept_rate":100,"display_name":"arshajii"},"score":0,"creation_date":1390579494,"post_id":21337121,"comment_id":32166492,"body_markdown":"Do you need to read the entire files into memory?","body":"Do you need to read the entire files into memory?"},{"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1390579602,"post_id":21337121,"comment_id":32166572,"body_markdown":"@CHowdappaM huge files in memory will take huge space","body":"@CHowdappaM huge files in memory will take huge space"},{"owner":{"account_id":2936102,"reputation":1232,"user_id":2514942,"accept_rate":45,"display_name":"Aman Arora"},"score":0,"creation_date":1390579722,"post_id":21337121,"comment_id":32166671,"body_markdown":"How are you reading the file ? Can you show some code?","body":"How are you reading the file ? Can you show some code?"},{"owner":{"account_id":1257553,"reputation":1302,"user_id":1216702,"accept_rate":100,"display_name":"Teg"},"score":1,"creation_date":1390579918,"post_id":21337121,"comment_id":32166802,"body_markdown":"Do you parse the Excel file with some API?","body":"Do you parse the Excel file with some API?"},{"owner":{"account_id":3601683,"reputation":8824,"user_id":3004881,"accept_rate":100,"display_name":"Dan Getz"},"score":0,"creation_date":1390580342,"post_id":21337121,"comment_id":32167061,"body_markdown":"What version of Java?","body":"What version of Java?"}],"answers":[{"tags":[],"owner":{"account_id":15903,"reputation":323443,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1390579625,"creation_date":1390579625,"answer_id":21337211,"question_id":21337121,"body_markdown":"An object of type `InputStream` needs just a few bytes, no matter how big the underlying stream is. For a file, it just remembers the OS&#39;s file descriptor which in turn tracks the current position in the file.\r\n\r\nFor large files, I suggest to use `BufferedInputStream` which needs more memory but it&#39;s also faster. You can define the buffer size when you create an instance, the default is 8KB which is good for most purposes.\r\n\r\nThat said, PermGen errors are unrelated to object sizes. Objects are allocated on the heap. PermGen means that you&#39;re loading too many classes. See https://stackoverflow.com/questions/88235/dealing-with-java-lang-outofmemoryerror-permgen-space-error for details how to fix it.","title":"Size of the objects depends on the contents it read","body":"<p>An object of type <code>InputStream</code> needs just a few bytes, no matter how big the underlying stream is. For a file, it just remembers the OS's file descriptor which in turn tracks the current position in the file.</p>\n\n<p>For large files, I suggest to use <code>BufferedInputStream</code> which needs more memory but it's also faster. You can define the buffer size when you create an instance, the default is 8KB which is good for most purposes.</p>\n\n<p>That said, PermGen errors are unrelated to object sizes. Objects are allocated on the heap. PermGen means that you're loading too many classes. See <a href=\"https://stackoverflow.com/questions/88235/dealing-with-java-lang-outofmemoryerror-permgen-space-error\">Dealing with &quot;java.lang.OutOfMemoryError: PermGen space&quot; error</a> for details how to fix it.</p>\n"}],"owner":{"account_id":1543184,"reputation":1580,"user_id":1437347,"accept_rate":52,"display_name":"Chowdappa"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":21337211,"answer_count":1,"score":1,"last_activity_date":1639307678,"creation_date":1390579372,"question_id":21337121,"body_markdown":"If I have 2 `inputStream` objects that read/holds a 4gb and 4mb of file respectively. what will be the size of the objects? will the size of object depends of the content?\r\n\r\nI am facing the per gem error while processing huge size of Excel files.","title":"Size of the objects depends on the contents it read","body":"<p>If I have 2 <code>inputStream</code> objects that read/holds a 4gb and 4mb of file respectively. what will be the size of the objects? will the size of object depends of the content?</p>\n\n<p>I am facing the per gem error while processing huge size of Excel files.</p>\n"},{"tags":["java","windows-7","64-bit","heap-memory"],"comments":[{"owner":{"account_id":39327,"reputation":1213,"user_id":113359,"display_name":"mikemil"},"score":1,"creation_date":1392351846,"post_id":21770790,"comment_id":32935274,"body_markdown":"Check out this posting http://stackoverflow.com/questions/10889081/cannot-run-a-64-bit-jvm-in-64-bit-windows-7-with-a-large-heap-size","body":"Check out this posting <a href=\"http://stackoverflow.com/questions/10889081/cannot-run-a-64-bit-jvm-in-64-bit-windows-7-with-a-large-heap-size\" title=\"cannot run a 64 bit jvm in 64 bit windows 7 with a large heap size\">stackoverflow.com/questions/10889081/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":1624175,"reputation":2160,"user_id":1500111,"accept_rate":100,"display_name":"Alexandros"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1392353186,"creation_date":1392352592,"answer_id":21770944,"question_id":21770790,"body_markdown":"What parameters are you using? \r\n\r\nhttp://docs.oracle.com/javase/7/docs/technotes/tools/windows/java.html\r\n\r\nFor example related to your case:\r\n\r\n - -Xms : sets initial Java heap size\r\n   \r\n - -Xmx : sets maximum Java heap size\r\n\r\nIf you are using the -Xmx parameter then you will see 4G in your task manager, ONLY IF your application really needs it. On the other hand if your are using the -Xms parameter (in that case you also need to need to set -Xmx parameter at an equal or larger value) then you should expect to see that value on the task manager. So, only if you set -Xms4096M and -Xmx4096M and the JVM fails to start then you have an issue. If it starts normally then you do not have a problem.\r\n\r\nAlso regardless of the RAM you are having (not in your case since we are only talking 4G) even Windows 7 (64bit) have different limits according to their edition.\r\n\r\nhttp://msdn.microsoft.com/en-us/library/windows/desktop/aa366778%28v=vs.85%29.aspx#physical_memory_limits_windows_7\r\n\r\n","title":"setting up 64bit windows 7 for large JRE7 heap size","body":"<p>What parameters are you using? </p>\n\n<p><a href=\"http://docs.oracle.com/javase/7/docs/technotes/tools/windows/java.html\" rel=\"nofollow\">http://docs.oracle.com/javase/7/docs/technotes/tools/windows/java.html</a></p>\n\n<p>For example related to your case:</p>\n\n<ul>\n<li><p>-Xms : sets initial Java heap size</p></li>\n<li><p>-Xmx : sets maximum Java heap size</p></li>\n</ul>\n\n<p>If you are using the -Xmx parameter then you will see 4G in your task manager, ONLY IF your application really needs it. On the other hand if your are using the -Xms parameter (in that case you also need to need to set -Xmx parameter at an equal or larger value) then you should expect to see that value on the task manager. So, only if you set -Xms4096M and -Xmx4096M and the JVM fails to start then you have an issue. If it starts normally then you do not have a problem.</p>\n\n<p>Also regardless of the RAM you are having (not in your case since we are only talking 4G) even Windows 7 (64bit) have different limits according to their edition.</p>\n\n<p><a href=\"http://msdn.microsoft.com/en-us/library/windows/desktop/aa366778%28v=vs.85%29.aspx#physical_memory_limits_windows_7\" rel=\"nofollow\">http://msdn.microsoft.com/en-us/library/windows/desktop/aa366778%28v=vs.85%29.aspx#physical_memory_limits_windows_7</a></p>\n"},{"tags":[],"owner":{"account_id":2212639,"reputation":817,"user_id":1954034,"accept_rate":50,"display_name":"Nikhil Joshi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1392353292,"creation_date":1392353292,"answer_id":21771063,"question_id":21770790,"body_markdown":"Couple of times in my past experience, I observed that 64-bit OS can also have 32-bit JVM and it leads to the confusion.\r\n \r\nApart from this, I don&#39;t think you will be able to allocate full 4 GB space to JVM, there are other programs which consumes the memory also.\r\n\r\nYou can think of allocating 4 GB only if you are running on &gt;6 GB machine.","title":"setting up 64bit windows 7 for large JRE7 heap size","body":"<p>Couple of times in my past experience, I observed that 64-bit OS can also have 32-bit JVM and it leads to the confusion.</p>\n\n<p>Apart from this, I don't think you will be able to allocate full 4 GB space to JVM, there are other programs which consumes the memory also.</p>\n\n<p>You can think of allocating 4 GB only if you are running on >6 GB machine.</p>\n"}],"owner":{"account_id":3623772,"reputation":61,"user_id":3021924,"display_name":"vjktm"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1285,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":21770944,"answer_count":2,"score":0,"last_activity_date":1639307649,"creation_date":1392351602,"question_id":21770790,"body_markdown":"I have been trying to run java with 4G max and min heap size on a 64bit win 7 machine but when I check task manager I only see about 2G for java.exe.  I read there are windows restrictions as well.  How do I set up windows 7 and jre7 x64 so that I can run jave with 4G heap size?\r\nThanks.\r\n","title":"setting up 64bit windows 7 for large JRE7 heap size","body":"<p>I have been trying to run java with 4G max and min heap size on a 64bit win 7 machine but when I check task manager I only see about 2G for java.exe.  I read there are windows restrictions as well.  How do I set up windows 7 and jre7 x64 so that I can run jave with 4G heap size?\nThanks.</p>\n"},{"tags":["java","heap-memory"],"answers":[{"tags":[],"owner":{"account_id":2744625,"reputation":8577,"user_id":2365297,"accept_rate":36,"display_name":"Salah"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1394645152,"creation_date":1394645152,"answer_id":22359283,"question_id":22359194,"body_markdown":"This error caused by the `PermGen` space, it got filled during the execution time, You can do two thing regarding to this problem:\r\n\r\n**First:** increase you `PermGen` size by adding the following parameter:\r\n\r\n    -XX:MaxPermSize=256m\r\n\r\n**Second:** enable the `GC` on the `PermGen` space to be garbage collected\r\n\r\n    -XX:+UseConcMarkSweepGC -XX:+CMSPermGenSweepingEnabled -XX:+CMSClassUnloadingEnabled","title":"java.lang.OutOfMemoryError: PermGen space + java","body":"<p>This error caused by the <code>PermGen</code> space, it got filled during the execution time, You can do two thing regarding to this problem:</p>\n\n<p><strong>First:</strong> increase you <code>PermGen</code> size by adding the following parameter:</p>\n\n<pre><code>-XX:MaxPermSize=256m\n</code></pre>\n\n<p><strong>Second:</strong> enable the <code>GC</code> on the <code>PermGen</code> space to be garbage collected</p>\n\n<pre><code>-XX:+UseConcMarkSweepGC -XX:+CMSPermGenSweepingEnabled -XX:+CMSClassUnloadingEnabled\n</code></pre>\n"}],"owner":{"account_id":1632315,"reputation":59,"user_id":1506628,"accept_rate":9,"display_name":"user1506628"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":970,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1394652060,"answer_count":1,"score":-1,"last_activity_date":1639307614,"creation_date":1394644945,"question_id":22359194,"body_markdown":"I am getting following exception when I am going to send the mail with FTL teampate &amp; attaching image with it. Please advice what needs to be done \r\n\r\n\t\t\t\tjava.lang.OutOfMemoryError: PermGen space\r\n\t\t\t\t at sun.security.provider.certpath.UntrustedChecker.check(UntrustedChecker.java:58)\r\n\t\t\t\t at sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:117)\r\n\t\t\t\t at sun.security.provider.certpath.PKIXCertPathValidator.doValidate(PKIXCertPathValidator.java:330)\r\n\t\t\t\t at sun.security.provider.certpath.PKIXCertPathValidator.engineValidate(PKIXCertPathValidator.java:178)\r\n\t\t\t\t at java.security.cert.CertPathValidator.validate(CertPathValidator.java:250)\r\n\t\t\t\t at sun.security.validator.PKIXValidator.doValidate(PKIXValidator.java:275)\r\n\t\t\t\t at sun.security.validator.PKIXValidator.doValidate(PKIXValidator.java:263)\r\n\t\t\t\t at sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:173)\r\n\t\t\t\t at sun.security.validator.Validator.validate(Validator.java:218)\r\n\t\t\t\t at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:126)\r\n\t\t\t\t at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:209)\r\n\t\t\t\t at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:249)\r\n\t\t\t\t at com.sun.net.ssl.internal.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1185)\r\n\t\t\t\t at com.sun.net.ssl.internal.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:136)\r\n\t\t\t\t at com.sun.net.ssl.internal.ssl.Handshaker.processLoop(Handshaker.java:593)\r\n\t\t\t\t at com.sun.net.ssl.internal.ssl.Handshaker.process_record(Handshaker.java:529)\r\n\t\t\t\t at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:958)\r\n\t\t\t\t at com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1203)\r\n\t\t\t\t at com.sun.net.ssl.internal.ssl.SSLSocketImpl.writeRecord(SSLSocketImpl.java:654)\r\n\t\t\t\t at com.sun.net.ssl.internal.ssl.AppOutputStream.write(AppOutputStream.java:100)\r\n\t\t\t\t at com.sun.mail.util.TraceOutputStream.write(TraceOutputStream.java:101)\r\n\t\t\t\t at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)\r\n\t\t\t\t at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)\r\n\t\t\t\t at com.sun.mail.smtp.SMTPTransport.sendCommand(SMTPTransport.java:1418)\r\n\t\t\t\t at com.sun.mail.smtp.SMTPTransport.sendCommand(SMTPTransport.java:1408)\r\n\t\t\t\t at com.sun.mail.smtp.SMTPTransport.ehlo(SMTPTransport.java:847)\r\n\t\t\t\t at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:384)\r\n\t\t\t\t at javax.mail.Service.connect(Service.java:297)\r\n\t\t\t\t at javax.mail.Service.connect(Service.java:156)\r\n\t\t\t\t at javax.mail.Service.connect(Service.java:105)\r\n\t\t\t\t at javax.mail.Transport.send0(Transport.java:168)\r\n\t\t\t\t at javax.mail.Transport.send(Transport.java:98)\r\n\t\t\t\tjava.lang.OutOfMemoryError: PermGen space\r\n\t\t\t\tException in thread &quot;http-bio-8080-exec-17&quot; java.lang.OutOfMemoryError: PermGen space\r\n\t\t\t\tException in thread &quot;bitronix-scheduler&quot; java.lang.OutOfMemoryError: PermGen space","title":"java.lang.OutOfMemoryError: PermGen space + java","body":"<p>I am getting following exception when I am going to send the mail with FTL teampate &amp; attaching image with it. Please advice what needs to be done </p>\n\n<pre><code>            java.lang.OutOfMemoryError: PermGen space\n             at sun.security.provider.certpath.UntrustedChecker.check(UntrustedChecker.java:58)\n             at sun.security.provider.certpath.PKIXMasterCertPathValidator.validate(PKIXMasterCertPathValidator.java:117)\n             at sun.security.provider.certpath.PKIXCertPathValidator.doValidate(PKIXCertPathValidator.java:330)\n             at sun.security.provider.certpath.PKIXCertPathValidator.engineValidate(PKIXCertPathValidator.java:178)\n             at java.security.cert.CertPathValidator.validate(CertPathValidator.java:250)\n             at sun.security.validator.PKIXValidator.doValidate(PKIXValidator.java:275)\n             at sun.security.validator.PKIXValidator.doValidate(PKIXValidator.java:263)\n             at sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:173)\n             at sun.security.validator.Validator.validate(Validator.java:218)\n             at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.validate(X509TrustManagerImpl.java:126)\n             at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:209)\n             at com.sun.net.ssl.internal.ssl.X509TrustManagerImpl.checkServerTrusted(X509TrustManagerImpl.java:249)\n             at com.sun.net.ssl.internal.ssl.ClientHandshaker.serverCertificate(ClientHandshaker.java:1185)\n             at com.sun.net.ssl.internal.ssl.ClientHandshaker.processMessage(ClientHandshaker.java:136)\n             at com.sun.net.ssl.internal.ssl.Handshaker.processLoop(Handshaker.java:593)\n             at com.sun.net.ssl.internal.ssl.Handshaker.process_record(Handshaker.java:529)\n             at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:958)\n             at com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1203)\n             at com.sun.net.ssl.internal.ssl.SSLSocketImpl.writeRecord(SSLSocketImpl.java:654)\n             at com.sun.net.ssl.internal.ssl.AppOutputStream.write(AppOutputStream.java:100)\n             at com.sun.mail.util.TraceOutputStream.write(TraceOutputStream.java:101)\n             at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)\n             at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)\n             at com.sun.mail.smtp.SMTPTransport.sendCommand(SMTPTransport.java:1418)\n             at com.sun.mail.smtp.SMTPTransport.sendCommand(SMTPTransport.java:1408)\n             at com.sun.mail.smtp.SMTPTransport.ehlo(SMTPTransport.java:847)\n             at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:384)\n             at javax.mail.Service.connect(Service.java:297)\n             at javax.mail.Service.connect(Service.java:156)\n             at javax.mail.Service.connect(Service.java:105)\n             at javax.mail.Transport.send0(Transport.java:168)\n             at javax.mail.Transport.send(Transport.java:98)\n            java.lang.OutOfMemoryError: PermGen space\n            Exception in thread \"http-bio-8080-exec-17\" java.lang.OutOfMemoryError: PermGen space\n            Exception in thread \"bitronix-scheduler\" java.lang.OutOfMemoryError: PermGen space\n</code></pre>\n"},{"tags":["java","binary-search-tree"],"comments":[{"owner":{"account_id":7142980,"reputation":323253,"user_id":5459839,"display_name":"trincot"},"score":0,"creation_date":1639301240,"post_id":70320662,"comment_id":124309787,"body_markdown":"Maybe first give feed-back on the answer(s) you got on your [previous question](https://stackoverflow.com/questions/70319261/recursively-adding-an-item-to-the-bst)? -- it seems you have used that answer but did not mark it as accepted?","body":"Maybe first give feed-back on the answer(s) you got on your <a href=\"https://stackoverflow.com/questions/70319261/recursively-adding-an-item-to-the-bst\">previous question</a>? -- it seems you have used that answer but did not mark it as accepted?"},{"owner":{"account_id":7142980,"reputation":323253,"user_id":5459839,"display_name":"trincot"},"score":0,"creation_date":1639301472,"post_id":70320662,"comment_id":124309823,"body_markdown":"Your new function is using different property names. They seem to use Polish names, while the rest of your code is using English property names. Can you harmonise this and preferably using English terms?","body":"Your new function is using different property names. They seem to use Polish names, while the rest of your code is using English property names. Can you harmonise this and preferably using English terms?"}],"owner":{"account_id":22372862,"reputation":109,"user_id":16736654,"display_name":"np."},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1639307535,"creation_date":1639278611,"question_id":70320662,"body_markdown":"Okay, I&#39;ve already written several methods related to my problem. Right now I have two methods that are written using recursion (`addBSTRecursion (int element)` and `searchBSTRecursion (int element)`). And now I need implement (iteratively) the BST search method (`Pair&lt;BinaryTreeNode, BinaryTreeNode&gt; searchBST(int element)`) returning the node containing the searched value and its predecessor.\r\n- if the searched element is not in the tree, the first element of the pair is `null`.\r\n- if the first element of the pair is a root (it has no predecessor), then the second element of the pair is `null`.  \r\nHere is my class Pair:\r\n```\r\npublic class Pair&lt;T1, T2&gt; {\r\n    public T1 first;\r\n    public T2 second;\r\n\r\n    public Pair(T1 a, T2 b) {\r\n        first = a;\r\n        second = b;\r\n    }\r\n}\r\n```\r\nThis is how I managed to implement method (`Pair&lt;BinaryTreeNode, BinaryTreeNode&gt; searchBST(int element)`), but unfortunately it does not work as expected.\r\n```\r\n@Override\r\npublic Pair&lt;BinaryTreeNode, BinaryTreeNode&gt; searchBST(int element) {\r\n    int current = 0;\r\n    while (element != data) {\r\n        if (element &lt; data) {\r\n            current = left.data;\r\n        } else {\r\n            current = right.data;\r\n        }\r\n    }\r\n    Pair pair = new Pair(element, current);\r\n    return pair;\r\n}\r\n\r\n```\r\nTo be honest, I dont know yet how to correctly implement this method, I will be glad to any hints. And also at the bottom I add all my previous classes.\r\n```\r\npublic abstract class BinaryTreeNode {\r\n    protected int data; // value stored in the node\r\n    protected BinaryTreeNode left, right; // left and right sub-trees\r\n\r\n    // constructor\r\n    public BinaryTreeNode(int data) {\r\n        this.data = data;\r\n    }\r\n\r\n    // recursively adds an item to the BST\r\n    // @param new data to be stored in the new node\r\n    public abstract void addBSTRecursion(int element);\r\n\r\n    // prints the tree\r\n    // for example, for a tree:\r\n    //        7\r\n    //    6        8\r\n    // 2     7  4     9\r\n    //\r\n    // write:\r\n    //\r\n    //      2\r\n    //   6\r\n    //      7\r\n    // 7\r\n    //      4\r\n    //   8\r\n    //      9\r\n\r\n    // method pseudocode\r\n    // if there is a left subtree then print the left one (recursive call)\r\n    // write out gaps (depending on level), write out data, go to new line\r\n    // if it is right, print the right one (recursive call)\r\n    // @param level the distance of the node from the root. We start from 0.\r\n    public abstract void print(int level);\r\n\r\n    // recursive searches the BST.\r\n    // returns true if it finds an element with the given value\r\n    // @param searched value searched\r\n    // @return true if the given value is in the tree, false otherwise\r\n    public abstract boolean searchBSTRecursion(int element);\r\n\r\n    // iterative lookup of values in the BST\r\n    // returns a pair: node containing the searched element and its predecessor.\r\n    // if the searched element is not in the tree, the first element of the pair is null.\r\n    // if the first element of the pair is a root (it has no predecessor), then the second element of the pair is null.\r\n    // @param searched value searched\r\n    // @return pair of nodes: the first is the node containing the value searched for, or null if not found;\r\n    // the second element of the pair is the parent of the node (or null if the value is at the root of the tree)\r\n    public abstract Pair &lt; BinaryTreeNode, BinaryTreeNode &gt; searchBST(int element);\r\n}\r\n```\r\n```\r\npublic class Node extends BinaryTreeNode {\r\n    public Node(int data) {\r\n        super(data);\r\n    }\r\n\r\n    @Override\r\n    public void addBSTRecursion(int element) {\r\n        Node node = new Node(element);\r\n        if (element &lt; data) {\r\n            if (left != null) {\r\n                left.addBSTRecursion(element);\r\n            } else {\r\n                left = node;\r\n            }\r\n        } else {\r\n            if (right != null) {\r\n                right.addBSTRecursion(element);\r\n            } else {\r\n                right = node;\r\n            }\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void print(int level) {\r\n        if (left != null) {\r\n            left.print(level + 4);\r\n        }\r\n        for (int i = 0; i &lt; level; i++) {\r\n            System.out.print(&quot; &quot;);\r\n        }\r\n\r\n        System.out.print(data + &quot;\\n&quot;);\r\n\r\n        if (right != null) {\r\n            right.print(level + 4);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public boolean searchBSTRecursion(int element) {\r\n        if (element == data) {\r\n            return true;\r\n        } else if (element &lt; data) {\r\n            if (left != null &amp;&amp; left.searchBSTRecursion(element)) {\r\n                return true;\r\n            } else {\r\n                return false;\r\n            }\r\n        } else {\r\n            if (right != null &amp;&amp; right.searchBSTRecursion(element)) {\r\n                return true;\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public Pair&lt;BinaryTreeNode, BinaryTreeNode&gt; searchBST(int element) {\r\n        int current = 0;\r\n        while (element != data) {\r\n            if (element &lt; data) {\r\n                current = left.data;\r\n            } else {\r\n                current = right.data;\r\n            }\r\n        }\r\n        Pair pair = new Pair(element, current);\r\n        return pair;\r\n    }\r\n\r\n}\r\n```\r\n```\r\npublic class Main {\r\n\r\n    public static void main(String[] args) {\r\n        Node node = new Node(8);\r\n\r\n        node.addBSTRecursion(3);\r\n        node.addBSTRecursion(10);\r\n\r\n        node.addBSTRecursion(1);\r\n        node.addBSTRecursion(6);\r\n\r\n        node.addBSTRecursion(14);\r\n\r\n        node.addBSTRecursion(4);\r\n        node.addBSTRecursion(7);\r\n\r\n        node.addBSTRecursion(13);\r\n\r\n\r\n        node.print(0);\r\n\r\n        System.out.print(node.searchBSTRecursion(15));\r\n    }\r\n}\r\n```\r\n","title":"the BST search method ((iteratively)) returning the node containing the searched value and its predecessor","body":"<p>Okay, I've already written several methods related to my problem. Right now I have two methods that are written using recursion (<code>addBSTRecursion (int element)</code> and <code>searchBSTRecursion (int element)</code>). And now I need implement (iteratively) the BST search method (<code>Pair&lt;BinaryTreeNode, BinaryTreeNode&gt; searchBST(int element)</code>) returning the node containing the searched value and its predecessor.</p>\n<ul>\n<li>if the searched element is not in the tree, the first element of the pair is <code>null</code>.</li>\n<li>if the first element of the pair is a root (it has no predecessor), then the second element of the pair is <code>null</code>.<br />\nHere is my class Pair:</li>\n</ul>\n<pre><code>public class Pair&lt;T1, T2&gt; {\n    public T1 first;\n    public T2 second;\n\n    public Pair(T1 a, T2 b) {\n        first = a;\n        second = b;\n    }\n}\n</code></pre>\n<p>This is how I managed to implement method (<code>Pair&lt;BinaryTreeNode, BinaryTreeNode&gt; searchBST(int element)</code>), but unfortunately it does not work as expected.</p>\n<pre><code>@Override\npublic Pair&lt;BinaryTreeNode, BinaryTreeNode&gt; searchBST(int element) {\n    int current = 0;\n    while (element != data) {\n        if (element &lt; data) {\n            current = left.data;\n        } else {\n            current = right.data;\n        }\n    }\n    Pair pair = new Pair(element, current);\n    return pair;\n}\n\n</code></pre>\n<p>To be honest, I dont know yet how to correctly implement this method, I will be glad to any hints. And also at the bottom I add all my previous classes.</p>\n<pre><code>public abstract class BinaryTreeNode {\n    protected int data; // value stored in the node\n    protected BinaryTreeNode left, right; // left and right sub-trees\n\n    // constructor\n    public BinaryTreeNode(int data) {\n        this.data = data;\n    }\n\n    // recursively adds an item to the BST\n    // @param new data to be stored in the new node\n    public abstract void addBSTRecursion(int element);\n\n    // prints the tree\n    // for example, for a tree:\n    //        7\n    //    6        8\n    // 2     7  4     9\n    //\n    // write:\n    //\n    //      2\n    //   6\n    //      7\n    // 7\n    //      4\n    //   8\n    //      9\n\n    // method pseudocode\n    // if there is a left subtree then print the left one (recursive call)\n    // write out gaps (depending on level), write out data, go to new line\n    // if it is right, print the right one (recursive call)\n    // @param level the distance of the node from the root. We start from 0.\n    public abstract void print(int level);\n\n    // recursive searches the BST.\n    // returns true if it finds an element with the given value\n    // @param searched value searched\n    // @return true if the given value is in the tree, false otherwise\n    public abstract boolean searchBSTRecursion(int element);\n\n    // iterative lookup of values in the BST\n    // returns a pair: node containing the searched element and its predecessor.\n    // if the searched element is not in the tree, the first element of the pair is null.\n    // if the first element of the pair is a root (it has no predecessor), then the second element of the pair is null.\n    // @param searched value searched\n    // @return pair of nodes: the first is the node containing the value searched for, or null if not found;\n    // the second element of the pair is the parent of the node (or null if the value is at the root of the tree)\n    public abstract Pair &lt; BinaryTreeNode, BinaryTreeNode &gt; searchBST(int element);\n}\n</code></pre>\n<pre><code>public class Node extends BinaryTreeNode {\n    public Node(int data) {\n        super(data);\n    }\n\n    @Override\n    public void addBSTRecursion(int element) {\n        Node node = new Node(element);\n        if (element &lt; data) {\n            if (left != null) {\n                left.addBSTRecursion(element);\n            } else {\n                left = node;\n            }\n        } else {\n            if (right != null) {\n                right.addBSTRecursion(element);\n            } else {\n                right = node;\n            }\n        }\n    }\n\n    @Override\n    public void print(int level) {\n        if (left != null) {\n            left.print(level + 4);\n        }\n        for (int i = 0; i &lt; level; i++) {\n            System.out.print(&quot; &quot;);\n        }\n\n        System.out.print(data + &quot;\\n&quot;);\n\n        if (right != null) {\n            right.print(level + 4);\n        }\n    }\n\n    @Override\n    public boolean searchBSTRecursion(int element) {\n        if (element == data) {\n            return true;\n        } else if (element &lt; data) {\n            if (left != null &amp;&amp; left.searchBSTRecursion(element)) {\n                return true;\n            } else {\n                return false;\n            }\n        } else {\n            if (right != null &amp;&amp; right.searchBSTRecursion(element)) {\n                return true;\n            } else {\n                return false;\n            }\n        }\n    }\n\n    @Override\n    public Pair&lt;BinaryTreeNode, BinaryTreeNode&gt; searchBST(int element) {\n        int current = 0;\n        while (element != data) {\n            if (element &lt; data) {\n                current = left.data;\n            } else {\n                current = right.data;\n            }\n        }\n        Pair pair = new Pair(element, current);\n        return pair;\n    }\n\n}\n</code></pre>\n<pre><code>public class Main {\n\n    public static void main(String[] args) {\n        Node node = new Node(8);\n\n        node.addBSTRecursion(3);\n        node.addBSTRecursion(10);\n\n        node.addBSTRecursion(1);\n        node.addBSTRecursion(6);\n\n        node.addBSTRecursion(14);\n\n        node.addBSTRecursion(4);\n        node.addBSTRecursion(7);\n\n        node.addBSTRecursion(13);\n\n\n        node.print(0);\n\n        System.out.print(node.searchBSTRecursion(15));\n    }\n}\n</code></pre>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":3505150,"reputation":1321,"user_id":2930834,"display_name":"Nakul"},"score":0,"creation_date":1638949661,"post_id":70271495,"comment_id":124220830,"body_markdown":"this might help\nhttps://stackoverflow.com/q/46290668/2930834","body":"this might help <a href=\"https://stackoverflow.com/q/46290668/2930834\">stackoverflow.com/q/46290668/2930834</a>"},{"owner":{"account_id":22974839,"reputation":11,"user_id":17102635,"display_name":"Adler"},"score":2,"creation_date":1639184649,"post_id":70271495,"comment_id":124291816,"body_markdown":"@Nisa Efendioglu, thanks","body":"@Nisa Efendioglu, thanks"}],"answers":[{"tags":[],"owner":{"account_id":16474455,"reputation":1051,"user_id":11902787,"display_name":"Nisa Efendioglu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638955146,"creation_date":1638955146,"answer_id":70272550,"question_id":70271495,"body_markdown":"[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/lhd2h.png\r\n\r\nHave you tried turning off notifications?","title":"Disable notification that Android Studio is unable to automatically detect ADB binary","body":"<p><a href=\"https://i.stack.imgur.com/lhd2h.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lhd2h.png\" alt=\"enter image description here\" /></a></p>\n<p>Have you tried turning off notifications?</p>\n"}],"owner":{"account_id":22974839,"reputation":11,"user_id":17102635,"display_name":"Adler"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":181,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1639917436,"answer_count":1,"score":0,"last_activity_date":1639307151,"creation_date":1638949452,"question_id":70271495,"body_markdown":"I run my virtual device in Android Studio and I get this message.\r\n\r\n&quot;Could not automatically detect an ADB binary. Some emulator functionality will not work until a custom path to ADB is added. This can be done in Extended Controls (...) &gt; Settings &gt; General tab &gt; &#39;Use Detected ADB location&#39;&quot;.\r\n\r\nI really want to stop this from appearing so someone please help.","title":"Disable notification that Android Studio is unable to automatically detect ADB binary","body":"<p>I run my virtual device in Android Studio and I get this message.</p>\n<p>&quot;Could not automatically detect an ADB binary. Some emulator functionality will not work until a custom path to ADB is added. This can be done in Extended Controls (...) &gt; Settings &gt; General tab &gt; 'Use Detected ADB location'&quot;.</p>\n<p>I really want to stop this from appearing so someone please help.</p>\n"},{"tags":["java","api","mobile","velo"],"answers":[{"tags":[],"owner":{"account_id":7691110,"reputation":117,"user_id":5827392,"display_name":"Abhishek K"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639307013,"creation_date":1639307013,"answer_id":70322964,"question_id":70275614,"body_markdown":"External scripts can be loaded using the iFrame Component or Wix Custom Element (Web Component)\r\n\r\nHTML Component: https://www.wix.com/velo/reference/$w/htmlcomponent\r\nCustom Element: https://www.wix.com/velo/reference/$w/customelement","title":"Trouble with Wix developer tools","body":"<p>External scripts can be loaded using the iFrame Component or Wix Custom Element (Web Component)</p>\n<p>HTML Component: <a href=\"https://www.wix.com/velo/reference/$w/htmlcomponent\" rel=\"nofollow noreferrer\">https://www.wix.com/velo/reference/$w/htmlcomponent</a>\nCustom Element: <a href=\"https://www.wix.com/velo/reference/$w/customelement\" rel=\"nofollow noreferrer\">https://www.wix.com/velo/reference/$w/customelement</a></p>\n"}],"owner":{"account_id":10086322,"reputation":1,"user_id":7454795,"display_name":"Justin Herb"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1639307013,"creation_date":1638969255,"question_id":70275614,"body_markdown":"I am using a wix page as a place to send my users to complete an ID verification through Veriff. However, if my users open the website on their phone, when prompted to allow camera access, they grant access but the Veriff form never starts. When I add the code Veriff tells me to add, I get an error on Wix stating &quot;cannot use JSX unless the jsx flag is provided. I&#39;ve included a screenshot of what I see when I&#39;m working. \r\n\r\n[Screenshot of Wix editor][1]\r\n\r\n\r\n    $w.onReady(function () {\r\n\t&lt;&gt;\r\n      &lt;script src=&#39;https://cdn.veriff.me/sdk/js/1.1/veriff.min.js&#39;&lt;/script&gt;\r\n     &lt;script src=&#39;https://cdn.veriff.me/incontext/js/v1/veriff.js&#39;&lt;/script&gt;\r\n\r\n    &lt;div id=&#39;veriff-root&#39;&gt;&lt;/div&gt;\r\n    &lt;script&gt;\r\n    const veriff = Veriff({\r\n    host: &#39;*************&#39;,\r\n    apiKey: &#39;************&#39;,\r\n    parentId: &#39;veriff-root&#39;,\r\n    onSession: function(err, response) {\r\n      window.veriffSDK.createVeriffFrame({ url: response.verification.url });\r\n    }\r\n    });\r\n    veriff.setParams({\r\n    person: {\r\n      givenName: &#39; &#39;,\r\n      lastName: &#39; &#39;\r\n    }\r\n    });\r\n    veriff.mount({\r\n    formLabel: {\r\n      vendorData: &#39;Email&#39;\r\n    }\r\n    });\r\n    &lt;/script&gt; &lt;/&gt;\r\n\r\n    });\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/VVLMy.jpg","title":"Trouble with Wix developer tools","body":"<p>I am using a wix page as a place to send my users to complete an ID verification through Veriff. However, if my users open the website on their phone, when prompted to allow camera access, they grant access but the Veriff form never starts. When I add the code Veriff tells me to add, I get an error on Wix stating &quot;cannot use JSX unless the jsx flag is provided. I've included a screenshot of what I see when I'm working.</p>\n<p><a href=\"https://i.stack.imgur.com/VVLMy.jpg\" rel=\"nofollow noreferrer\">Screenshot of Wix editor</a></p>\n<pre><code>$w.onReady(function () {\n&lt;&gt;\n  &lt;script src='https://cdn.veriff.me/sdk/js/1.1/veriff.min.js'&lt;/script&gt;\n &lt;script src='https://cdn.veriff.me/incontext/js/v1/veriff.js'&lt;/script&gt;\n\n&lt;div id='veriff-root'&gt;&lt;/div&gt;\n&lt;script&gt;\nconst veriff = Veriff({\nhost: '*************',\napiKey: '************',\nparentId: 'veriff-root',\nonSession: function(err, response) {\n  window.veriffSDK.createVeriffFrame({ url: response.verification.url });\n}\n});\nveriff.setParams({\nperson: {\n  givenName: ' ',\n  lastName: ' '\n}\n});\nveriff.mount({\nformLabel: {\n  vendorData: 'Email'\n}\n});\n&lt;/script&gt; &lt;/&gt;\n\n});\n</code></pre>\n"},{"tags":["java","linked-list"],"answers":[{"tags":[],"owner":{"account_id":15777655,"reputation":1762,"user_id":11385052,"display_name":"Ryan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1616524170,"creation_date":1616522759,"answer_id":66768833,"question_id":66768690,"body_markdown":"    public class ReverseList&lt;T&gt; extends LinkedList&lt;T&gt;{\r\n    \tpublic void reverseFrom(int idx) {\r\n    \t\tif (idx &lt; 0 || idx &gt; size()) {\r\n    \t\t\treturn;\r\n    \t\t}\r\n    \t\t\r\n    \t\tStack&lt;T&gt; stack = new Stack&lt;T&gt;();\r\n    \t\twhile (idx &lt; size()) {\r\n    \t\t\tstack.push(remove(idx));\r\n    \t\t}\r\n    \t\t\r\n    \t\twhile (!stack.isEmpty()) {\r\n    \t\t\tadd(stack.pop());\r\n    \t\t}\r\n    \t}\r\n    \t/******* Alternative slution ***************/\r\n     public void reverseFrom(int idx) {\r\n\t\tif (idx &lt; 0 || idx &gt; size()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\treverseFromInternal(idx, size()-1);\r\n\t}\r\n\t\r\n\tprivate void reverseFromInternal(int a, int b) {\r\n\t\tif (a &gt;= b) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tT far = remove(b);\r\n\t\tT near = remove(a);\r\n\t\t\r\n\t\tadd(a, far);\r\n\t\tadd(b, near);\r\n\t\t\r\n\t\treverseFromInternal(a + 1, b - 1);\r\n\t}\r\n     /****************************************/\r\n    \tpublic static void main(String [] args) {\r\n    \t\tReverseList&lt;String&gt; list = new ReverseList&lt;&gt;();\r\n    \t\t\r\n    \t\tfor (int i = 0; i &lt; 10; i++) {\r\n    \t\t\tlist.add(Integer.toString(i));\r\n    \t\t}\r\n    \t\tlist.reverseFrom(5);\r\n    \t\tSystem.out.println(list);\r\n    \t}\r\n    }","title":"How to reverse a LinkedList from a certain index, given the code fragments below","body":"<pre><code>public class ReverseList&lt;T&gt; extends LinkedList&lt;T&gt;{\n    public void reverseFrom(int idx) {\n        if (idx &lt; 0 || idx &gt; size()) {\n            return;\n        }\n        \n        Stack&lt;T&gt; stack = new Stack&lt;T&gt;();\n        while (idx &lt; size()) {\n            stack.push(remove(idx));\n        }\n        \n        while (!stack.isEmpty()) {\n            add(stack.pop());\n        }\n    }\n    /******* Alternative slution ***************/\n public void reverseFrom(int idx) {\n    if (idx &lt; 0 || idx &gt; size()) {\n        return;\n    }\n    \n    reverseFromInternal(idx, size()-1);\n}\n\nprivate void reverseFromInternal(int a, int b) {\n    if (a &gt;= b) {\n        return;\n    }\n    T far = remove(b);\n    T near = remove(a);\n    \n    add(a, far);\n    add(b, near);\n    \n    reverseFromInternal(a + 1, b - 1);\n}\n /****************************************/\n    public static void main(String [] args) {\n        ReverseList&lt;String&gt; list = new ReverseList&lt;&gt;();\n        \n        for (int i = 0; i &lt; 10; i++) {\n            list.add(Integer.toString(i));\n        }\n        list.reverseFrom(5);\n        System.out.println(list);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6414405,"reputation":70,"user_id":5313070,"display_name":"gaydara27"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1639306798,"creation_date":1616523342,"answer_id":66768959,"question_id":66768690,"body_markdown":"        public void reverseFrom(int index) {\r\n            if (index == 0) {\r\n                reverse();\r\n\r\n                return;\r\n            }\r\n\r\n            Node tmp = head;\r\n            Node previous = null;\r\n            for (int i = 0; i &lt; index; i++) {\r\n                previous = tmp;\r\n                tmp = tmp.next;\r\n            }\r\n            Node newHead = tmp;\r\n\r\n            LinkedList subLinkedList = new LinkedList();\r\n            subLinkedList.head = newHead;\r\n            subLinkedList.reverse();\r\n\r\n            previous.next = subLinkedList.head;\r\n        }","title":"How to reverse a LinkedList from a certain index, given the code fragments below","body":"<pre><code>    public void reverseFrom(int index) {\n        if (index == 0) {\n            reverse();\n\n            return;\n        }\n\n        Node tmp = head;\n        Node previous = null;\n        for (int i = 0; i &lt; index; i++) {\n            previous = tmp;\n            tmp = tmp.next;\n        }\n        Node newHead = tmp;\n\n        LinkedList subLinkedList = new LinkedList();\n        subLinkedList.head = newHead;\n        subLinkedList.reverse();\n\n        previous.next = subLinkedList.head;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7142980,"reputation":323253,"user_id":5459839,"display_name":"trincot"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1616525322,"creation_date":1616525322,"answer_id":66769474,"question_id":66768690,"body_markdown":"You could base the logic on the `reverse` method, but use an extra reference to the node that is at `index - 1`. During the loop decrement `index`. As long as it is positive, don&#39;t change the `next` reference of the current node. When it hits zero, take note of where we start the reversal, and as the current node will become the very last one, set its `next` reference to `null`. When `index` is negative, perform the usual reversal logic.\r\n\r\nAfter the loop, check whether we need to change the `head` or whether we need to attach the reversed part to the node at `index-1`:\r\n\r\n    public void reverseFrom(int index) {\r\n        Node tmp = head;\r\n        Node prev = null;\r\n        Node nextNode = null;\r\n        Node tail = null; // node at index - 1\r\n\r\n        while (tmp != null) {\r\n            nextNode = tmp.next;\r\n            if (index == 0) {\r\n                // We arrived at the part that needs reversal\r\n                tmp.next = null;\r\n                tail = prev;\r\n            } else if (index &lt; 0) {\r\n                // Perform normal reversal logic\r\n                tmp.next = prev;\r\n            }\r\n            index--;\r\n            prev = tmp;\r\n            tmp = nextNode;\r\n        }\r\n        if (tail == null) {\r\n            head = prev;\r\n        } else {\r\n            tail.next = prev;\r\n        }\r\n    }\r\n ","title":"How to reverse a LinkedList from a certain index, given the code fragments below","body":"<p>You could base the logic on the <code>reverse</code> method, but use an extra reference to the node that is at <code>index - 1</code>. During the loop decrement <code>index</code>. As long as it is positive, don't change the <code>next</code> reference of the current node. When it hits zero, take note of where we start the reversal, and as the current node will become the very last one, set its <code>next</code> reference to <code>null</code>. When <code>index</code> is negative, perform the usual reversal logic.</p>\n<p>After the loop, check whether we need to change the <code>head</code> or whether we need to attach the reversed part to the node at <code>index-1</code>:</p>\n<pre><code>public void reverseFrom(int index) {\n    Node tmp = head;\n    Node prev = null;\n    Node nextNode = null;\n    Node tail = null; // node at index - 1\n\n    while (tmp != null) {\n        nextNode = tmp.next;\n        if (index == 0) {\n            // We arrived at the part that needs reversal\n            tmp.next = null;\n            tail = prev;\n        } else if (index &lt; 0) {\n            // Perform normal reversal logic\n            tmp.next = prev;\n        }\n        index--;\n        prev = tmp;\n        tmp = nextNode;\n    }\n    if (tail == null) {\n        head = prev;\n    } else {\n        tail.next = prev;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":12442887,"reputation":93,"user_id":9060189,"display_name":"h4ckerlinguist"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":251,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":66769474,"answer_count":3,"score":0,"last_activity_date":1639306798,"creation_date":1616522250,"question_id":66768690,"body_markdown":"I would like to write a method ```public void reverseFrom(int index)``` which reverses a list *from* the given index.\r\n\r\nI would like to ***only*** use the  ```LinkedList``` class below. \r\n```\r\npublic class LinkedList {\r\n\r\n    public Node head = null;\r\n\r\n    public class Node {\r\n        public int value;\r\n        public Node next;\r\n\r\n        Node(int value, Node next) {\r\n            this.value = value\r\n            this.next = next;\r\n        }\r\n    }\r\n}\r\n```\r\nI have a method to reverse a LinkedList:\r\n```\r\npublic void reverse() {\r\n    Node tmp = head;\r\n    Node prev = null;\r\n    Node nextNode = null;\r\n\r\n    while(tmp != null) {\r\n        nextNode = tmp.next;\r\n        tmp.next = prev;\r\n        prev = tmp;\r\n        tmp = nextNode;\r\n    }\r\n    head = prev;\r\n}\r\n```\r\nSo far, for the ```reverseFrom``` method, I have:\r\n```\r\npublic void reverseFrom(int index) {\r\n    if(index == 0) {\r\n        reverse();\r\n    } else if (index == 1) {\r\n        return;\r\n    } else {\r\n        Node tmp = head;\r\n        for(int i = 0; i &lt; index; i++) {\r\n            tmp = tmp.next;\r\n        }\r\n        Node newHead = tmp;\r\n        /*** Node prev = null;\r\n        Node nextNode = null;\r\n        while(newHead != null) {\r\n            nextNode = newHead.next;\r\n            newHead.next = prev;\r\n            prev = newHead;\r\n            newHead = nextNode;\r\n        }\r\n        newHead = prev; ***/\r\n    }\r\n}\r\n```\r\nI have tried using the code from ```reverse()``` but it does not work (that which is commented out).\r\nHow can I then reverse the list from ```newHead```?\r\n","title":"How to reverse a LinkedList from a certain index, given the code fragments below","body":"<p>I would like to write a method <code>public void reverseFrom(int index)</code> which reverses a list <em>from</em> the given index.</p>\n<p>I would like to <em><strong>only</strong></em> use the  <code>LinkedList</code> class below.</p>\n<pre><code>public class LinkedList {\n\n    public Node head = null;\n\n    public class Node {\n        public int value;\n        public Node next;\n\n        Node(int value, Node next) {\n            this.value = value\n            this.next = next;\n        }\n    }\n}\n</code></pre>\n<p>I have a method to reverse a LinkedList:</p>\n<pre><code>public void reverse() {\n    Node tmp = head;\n    Node prev = null;\n    Node nextNode = null;\n\n    while(tmp != null) {\n        nextNode = tmp.next;\n        tmp.next = prev;\n        prev = tmp;\n        tmp = nextNode;\n    }\n    head = prev;\n}\n</code></pre>\n<p>So far, for the <code>reverseFrom</code> method, I have:</p>\n<pre><code>public void reverseFrom(int index) {\n    if(index == 0) {\n        reverse();\n    } else if (index == 1) {\n        return;\n    } else {\n        Node tmp = head;\n        for(int i = 0; i &lt; index; i++) {\n            tmp = tmp.next;\n        }\n        Node newHead = tmp;\n        /*** Node prev = null;\n        Node nextNode = null;\n        while(newHead != null) {\n            nextNode = newHead.next;\n            newHead.next = prev;\n            prev = newHead;\n            newHead = nextNode;\n        }\n        newHead = prev; ***/\n    }\n}\n</code></pre>\n<p>I have tried using the code from <code>reverse()</code> but it does not work (that which is commented out).\nHow can I then reverse the list from <code>newHead</code>?</p>\n"},{"tags":["java","swing","layout-manager","jprogressbar"],"answers":[{"tags":[],"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1639287683,"creation_date":1639287683,"answer_id":70321220,"question_id":70321145,"body_markdown":"An easy way is to set the parent container to have a `BorderLayout`, then `panel.add(progressBar, BorderLayout.PAGE_END);` will make the progress bar appear at the bottom.","title":"JProgressBar positioning to bottom of the window","body":"<p>An easy way is to set the parent container to have a <code>BorderLayout</code>, then <code>panel.add(progressBar, BorderLayout.PAGE_END);</code> will make the progress bar appear at the bottom.</p>\n"}],"owner":{"account_id":22003054,"reputation":63,"user_id":16274499,"display_name":"CactiProgrammer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":70321220,"answer_count":1,"score":2,"last_activity_date":1639306539,"creation_date":1639286552,"question_id":70321145,"body_markdown":"I was trying to position a `JProgressBar` to the bottom of the window&#39;s screen. I have tried using `setVerticalAlignment` and `setHorizontalAlignment`. When doing so a syntax error appears. \r\n\r\nTo make it clear my goal is to put a progress bar at the bottom of the window. \r\n\r\n![image of frame][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/hUbKe.png\r\n\r\n\r\n","title":"JProgressBar positioning to bottom of the window","body":"<p>I was trying to position a <code>JProgressBar</code> to the bottom of the window's screen. I have tried using <code>setVerticalAlignment</code> and <code>setHorizontalAlignment</code>. When doing so a syntax error appears.</p>\n<p>To make it clear my goal is to put a progress bar at the bottom of the window.</p>\n<p><img src=\"https://i.stack.imgur.com/hUbKe.png\" alt=\"image of frame\" /></p>\n"},{"tags":["java","rest"],"answers":[{"tags":[],"owner":{"account_id":16509210,"reputation":564,"user_id":11928455,"display_name":"Amimul Ehsan Rahi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1639305786,"creation_date":1614709590,"answer_id":66445072,"question_id":66444926,"body_markdown":"Ok first open a gradle project and add these dependencies:\r\n\r\n```\r\n    implementation &#39;com.google.code.gson:gson:2.8.5&#39;\r\n    implementation &#39;com.squareup.retrofit2:retrofit:2.4.0&#39;\r\n    implementation &#39;com.squareup.retrofit2:converter-gson:2.4.0&#39;\r\n```\r\n\r\nThen make an interface for api calls:\r\n\r\nI have created a dummy for you:\r\n\r\n```\r\nimport retrofit2.Call;\r\nimport retrofit2.http.GET;\r\nimport retrofit2.http.Query;\r\n\r\nimport java.util.List;\r\n\r\npublic interface Api {\r\n    @GET(&quot;/state&quot;)\r\n    Call&lt;List&lt;String&gt;&gt; groupList(@Query(&quot;id&quot;) int groupId);\r\n}\r\n```\r\n\r\nThen add another class for retrofitclient:\r\n\r\n```\r\nimport java.util.concurrent.TimeUnit;\r\nimport okhttp3.OkHttpClient;\r\nimport retrofit2.Retrofit;\r\nimport retrofit2.converter.gson.GsonConverterFactory;\r\n\r\npublic class RetrofitClient {\r\n\r\n    private static RetrofitClient mInstance;\r\n    private final Retrofit retrofit;\r\n\r\n    private RetrofitClient()\r\n    {\r\n        final OkHttpClient okHttpClient = new OkHttpClient.Builder()\r\n                .readTimeout(90, TimeUnit.SECONDS)\r\n                .writeTimeout(90, TimeUnit.SECONDS)\r\n                .connectTimeout(90, TimeUnit.SECONDS)\r\n                .build();\r\n\r\n\r\n        //your base url with port number goes here\r\n        String baseUrl = &quot;http://192.168.0.2/&quot;;\r\n\r\n        retrofit = new Retrofit.Builder()\r\n                .baseUrl(baseUrl)\r\n                .addConverterFactory(GsonConverterFactory.create())\r\n                .client(okHttpClient)\r\n                .build();\r\n    }\r\n\r\n    public static synchronized RetrofitClient getInstance()\r\n    {\r\n        if(mInstance == null)\r\n        {\r\n            mInstance = new RetrofitClient();\r\n        }\r\n        return mInstance;\r\n    }\r\n\r\n    public Api getApi()\r\n    {\r\n        return retrofit.create(Api.class);\r\n    }\r\n}\r\n```\r\n\r\nNow final step checking the outcomes. A dummy class is added by me for you:\r\n```\r\nimport retrofit2.Call;\r\nimport retrofit2.Callback;\r\nimport retrofit2.Response;\r\nimport java.util.List;\r\n\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        RetrofitClient.getInstance().getApi()\r\n                .groupList(50)\r\n                .enqueue(new Callback&lt;List&lt;String&gt;&gt;() {\r\n                    @Override\r\n                    public void onResponse(Call&lt;List&lt;String&gt;&gt; call, Response&lt;List&lt;String&gt;&gt; response) {\r\n                        if(response.isSuccessful())\r\n                        {\r\n                            //do what ever you want to do\r\n                        }\r\n                        else\r\n                        {\r\n                            //failed\r\n                        }\r\n                    }\r\n\r\n                    @Override\r\n                    public void onFailure(Call&lt;List&lt;String&gt;&gt; call, Throwable t) {\r\n                        //Failed to fetch data\r\n                    }\r\n                });\r\n    }\r\n}\r\n```\r\n\r\nI am also adding some screenshots for your help:\r\n\r\nGradle dependencies:\r\n\r\n[![Gradle Dependencies][1]][1]\r\n\r\nApi interface:\r\n\r\n[![Api Interface][2]][2]\r\n\r\nRetrofitClient class:\r\n\r\n[![RetrofitClient][3]][3]\r\n\r\nMain class for demonstration:\r\n\r\n[![Main class][4]][4]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Eo7XF.png\r\n  [2]: https://i.stack.imgur.com/IlUBA.png\r\n  [3]: https://i.stack.imgur.com/wVmCJ.png\r\n  [4]: https://i.stack.imgur.com/dHvqj.png","title":"Creating Requests to an API in Java","body":"<p>Ok first open a gradle project and add these dependencies:</p>\n<pre><code>    implementation 'com.google.code.gson:gson:2.8.5'\n    implementation 'com.squareup.retrofit2:retrofit:2.4.0'\n    implementation 'com.squareup.retrofit2:converter-gson:2.4.0'\n</code></pre>\n<p>Then make an interface for api calls:</p>\n<p>I have created a dummy for you:</p>\n<pre><code>import retrofit2.Call;\nimport retrofit2.http.GET;\nimport retrofit2.http.Query;\n\nimport java.util.List;\n\npublic interface Api {\n    @GET(&quot;/state&quot;)\n    Call&lt;List&lt;String&gt;&gt; groupList(@Query(&quot;id&quot;) int groupId);\n}\n</code></pre>\n<p>Then add another class for retrofitclient:</p>\n<pre><code>import java.util.concurrent.TimeUnit;\nimport okhttp3.OkHttpClient;\nimport retrofit2.Retrofit;\nimport retrofit2.converter.gson.GsonConverterFactory;\n\npublic class RetrofitClient {\n\n    private static RetrofitClient mInstance;\n    private final Retrofit retrofit;\n\n    private RetrofitClient()\n    {\n        final OkHttpClient okHttpClient = new OkHttpClient.Builder()\n                .readTimeout(90, TimeUnit.SECONDS)\n                .writeTimeout(90, TimeUnit.SECONDS)\n                .connectTimeout(90, TimeUnit.SECONDS)\n                .build();\n\n\n        //your base url with port number goes here\n        String baseUrl = &quot;http://192.168.0.2/&quot;;\n\n        retrofit = new Retrofit.Builder()\n                .baseUrl(baseUrl)\n                .addConverterFactory(GsonConverterFactory.create())\n                .client(okHttpClient)\n                .build();\n    }\n\n    public static synchronized RetrofitClient getInstance()\n    {\n        if(mInstance == null)\n        {\n            mInstance = new RetrofitClient();\n        }\n        return mInstance;\n    }\n\n    public Api getApi()\n    {\n        return retrofit.create(Api.class);\n    }\n}\n</code></pre>\n<p>Now final step checking the outcomes. A dummy class is added by me for you:</p>\n<pre><code>import retrofit2.Call;\nimport retrofit2.Callback;\nimport retrofit2.Response;\nimport java.util.List;\n\npublic class Main {\n    public static void main(String[] args) {\n        RetrofitClient.getInstance().getApi()\n                .groupList(50)\n                .enqueue(new Callback&lt;List&lt;String&gt;&gt;() {\n                    @Override\n                    public void onResponse(Call&lt;List&lt;String&gt;&gt; call, Response&lt;List&lt;String&gt;&gt; response) {\n                        if(response.isSuccessful())\n                        {\n                            //do what ever you want to do\n                        }\n                        else\n                        {\n                            //failed\n                        }\n                    }\n\n                    @Override\n                    public void onFailure(Call&lt;List&lt;String&gt;&gt; call, Throwable t) {\n                        //Failed to fetch data\n                    }\n                });\n    }\n}\n</code></pre>\n<p>I am also adding some screenshots for your help:</p>\n<p>Gradle dependencies:</p>\n<p><a href=\"https://i.stack.imgur.com/Eo7XF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Eo7XF.png\" alt=\"Gradle Dependencies\" /></a></p>\n<p>Api interface:</p>\n<p><a href=\"https://i.stack.imgur.com/IlUBA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IlUBA.png\" alt=\"Api Interface\" /></a></p>\n<p>RetrofitClient class:</p>\n<p><a href=\"https://i.stack.imgur.com/wVmCJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wVmCJ.png\" alt=\"RetrofitClient\" /></a></p>\n<p>Main class for demonstration:</p>\n<p><a href=\"https://i.stack.imgur.com/dHvqj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dHvqj.png\" alt=\"Main class\" /></a></p>\n"}],"owner":{"account_id":20852673,"reputation":315,"user_id":15316832,"display_name":"Rabbitminers"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":224,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"accepted_answer_id":66445072,"answer_count":1,"score":-2,"last_activity_date":1639305786,"creation_date":1614709001,"question_id":66444926,"body_markdown":"In the past I have used the python package requests to access and make communication with a REST API. For Example:\r\n\r\n``` response = requests.put(BASE = &quot;on&quot;)```\r\n\r\nIs there any way to replicate this with similar functionality in java. Any libraries or direct pieces of code would be much appreciated.\r\n\r\nThank you.\r\n\r\n\r\nThe API runs of a webserver so it is only accessible from a local network using Flask python and apache. Part of my code:\r\n\r\n    class turnLightsOn(Resource):\r\n          def put(self):\r\n                  return {&quot;data&quot;: &quot; turnOff&quot;}\r\n\r\n    api.add_resource(turnLightsOn, &quot;/on&quot;)\r\n\r\nThis is  a part of my code excluding some of the details but hopefully gives an example of what it does. How could I control this via a java request similar to my prior code in python.","title":"Creating Requests to an API in Java","body":"<p>In the past I have used the python package requests to access and make communication with a REST API. For Example:</p>\n<p><code> response = requests.put(BASE = &quot;on&quot;)</code></p>\n<p>Is there any way to replicate this with similar functionality in java. Any libraries or direct pieces of code would be much appreciated.</p>\n<p>Thank you.</p>\n<p>The API runs of a webserver so it is only accessible from a local network using Flask python and apache. Part of my code:</p>\n<pre><code>class turnLightsOn(Resource):\n      def put(self):\n              return {&quot;data&quot;: &quot; turnOff&quot;}\n\napi.add_resource(turnLightsOn, &quot;/on&quot;)\n</code></pre>\n<p>This is  a part of my code excluding some of the details but hopefully gives an example of what it does. How could I control this via a java request similar to my prior code in python.</p>\n"},{"tags":["java","hibernate","intellij-idea","mapping"],"comments":[{"owner":{"account_id":26938,"reputation":4932,"user_id":70551,"accept_rate":68,"display_name":"Surya"},"score":0,"creation_date":1244560164,"post_id":970573,"comment_id":778915,"body_markdown":"ide ? jboss tools? do you need to configure the connection information in jboss tools preferences ?","body":"ide ? jboss tools? do you need to configure the connection information in jboss tools preferences ?"},{"owner":{"account_id":35487,"reputation":64776,"user_id":100516,"accept_rate":69,"display_name":"Roman"},"score":0,"creation_date":1244560719,"post_id":970573,"comment_id":778971,"body_markdown":"IntelliJ IDEA 7, Hibernate 3.2, jdk 1.6. Wait, I&#39;ll add code","body":"IntelliJ IDEA 7, Hibernate 3.2, jdk 1.6. Wait, I&#39;ll add code"}],"answers":[{"tags":[],"owner":{"account_id":39142,"reputation":2646,"user_id":112789,"display_name":"DarkSquid"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1244560012,"creation_date":1244560012,"answer_id":970641,"question_id":970573,"body_markdown":"We need substantially more information to help you out.  \r\n\r\nIs this a command line application?  What runtime error is given?  What IDE are you using?  What is the output from enabling hibernate&#39;s debug logging?","title":"Hibernate error: cannot resolve table","body":"<p>We need substantially more information to help you out.  </p>\n\n<p>Is this a command line application?  What runtime error is given?  What IDE are you using?  What is the output from enabling hibernate's debug logging?</p>\n"},{"tags":[],"owner":{"account_id":8977,"reputation":18862,"user_id":16404,"accept_rate":95,"display_name":"Mike Pone"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1244565783,"creation_date":1244565783,"answer_id":971209,"question_id":970573,"body_markdown":"Your IDE is telling you it can&#39;t find the table.  You can change it to just a warning in IDEA so that your project will atleast compile.","title":"Hibernate error: cannot resolve table","body":"<p>Your IDE is telling you it can't find the table.  You can change it to just a warning in IDEA so that your project will atleast compile.</p>\n"},{"tags":[],"owner":{"account_id":26957,"reputation":564361,"user_id":70604,"display_name":"Pascal Thivent"},"down_vote_count":0,"up_vote_count":22,"is_accepted":true,"score":22,"last_activity_date":1273551734,"creation_date":1273551734,"answer_id":2808052,"question_id":970573,"body_markdown":"This has nothing to do with Hibernate, this is an IDEA &quot;issue&quot; and you need to configure it properly for tables names validation in hbm.xml. From [this old thread][1]:\r\n\r\n&gt; In order for IntelliJ to provide\r\n&gt; proper code completion and validation\r\n&gt; for database tables/columns, it needs\r\n&gt; to know about the database\r\n&gt; structure of your application as well.\r\n&gt; So, I&#39;m referring to the\r\n&gt; IntelliJ datasource. Think of it as a\r\n&gt; &quot;development-time datasource&quot;, \r\n&gt; or something like that.\r\n&gt;\r\n&gt; To create one:   \r\n&gt; Window -&gt; Tool Windows -&gt; Data sources  \r\n&gt; Add (&quot;plus&quot; icon) -&gt; JDBC data source\r\n&gt; \r\n&gt; As an alternative, you could try the\r\n&gt; &quot;Import&quot; button in the &quot;Date\r\n&gt; sources&quot; tool window. This makes\r\n&gt; IntelliJ search your project for some\r\n&gt; specific configuration files (like\r\n&gt; &quot;hibernate.cfg.xml&quot;), from which it\r\n&gt; can directly import a datasource\r\n&gt; definition.\r\n&gt; \r\n&gt; However, if that fails, you can always\r\n&gt; define a JDBC data source\r\n&gt; manually (jdbc url, driver jar, driver\r\n&gt; class, etc).\r\n&gt; \r\n&gt; Once you have a datasource configured,\r\n&gt; test it by opening an SQL console\r\n&gt; on it (&quot;console&quot; button in datasource\r\n&gt; tool window), and type some\r\n&gt; queries. IDEA should provide SQL code\r\n&gt; completion here, for table and\r\n&gt; column names.\r\n&gt;  \r\n&gt; If this step works, go to the\r\n&gt; definition of the datasource, and\r\n&gt; invoke\r\n&gt; \r\n&gt; &quot;Refresh Tables&quot;. This makes IntelliJ\r\n&gt; retrieve the database structure.\r\n&gt;  \r\n&gt; Next, open &quot;Project Structure&quot;\r\n&gt; (Ctrl-Shift-Alt-S).\r\n&gt; Select your Hibernate facet (though\r\n&gt; either &quot;Facets&quot; or &quot;Modules&quot;).\r\n&gt; \r\n&gt; The options screen for the Hibernate\r\n&gt; facet has a pane named &quot;DataSources\r\n&gt; Mapping&quot;. Here you can associate your\r\n&gt; Hiberante session factory with a\r\n&gt; specific IntelliJ datasource.\r\n&gt; \r\n&gt; After this step, SQL table/column code\r\n&gt; completion and validation should\r\n&gt; work in .hbm files as well.\r\n\r\nApplies to IDEA 7 also, read the whole thread if necessary.\r\n\r\n  [1]: http://www.jetbrains.net/devnet/thread/280137","title":"Hibernate error: cannot resolve table","body":"<p>This has nothing to do with Hibernate, this is an IDEA \"issue\" and you need to configure it properly for tables names validation in hbm.xml. From <a href=\"http://www.jetbrains.net/devnet/thread/280137\" rel=\"noreferrer\">this old thread</a>:</p>\n\n<blockquote>\n  <p>In order for IntelliJ to provide\n  proper code completion and validation\n  for database tables/columns, it needs\n  to know about the database\n  structure of your application as well.\n  So, I'm referring to the\n  IntelliJ datasource. Think of it as a\n  \"development-time datasource\", \n  or something like that.</p>\n  \n  <p>To create one:<br>\n  Window -> Tool Windows -> Data sources<br>\n  Add (\"plus\" icon) -> JDBC data source</p>\n  \n  <p>As an alternative, you could try the\n  \"Import\" button in the \"Date\n  sources\" tool window. This makes\n  IntelliJ search your project for some\n  specific configuration files (like\n  \"hibernate.cfg.xml\"), from which it\n  can directly import a datasource\n  definition.</p>\n  \n  <p>However, if that fails, you can always\n  define a JDBC data source\n  manually (jdbc url, driver jar, driver\n  class, etc).</p>\n  \n  <p>Once you have a datasource configured,\n  test it by opening an SQL console\n  on it (\"console\" button in datasource\n  tool window), and type some\n  queries. IDEA should provide SQL code\n  completion here, for table and\n  column names.</p>\n  \n  <p>If this step works, go to the\n  definition of the datasource, and\n  invoke</p>\n  \n  <p>\"Refresh Tables\". This makes IntelliJ\n  retrieve the database structure.</p>\n  \n  <p>Next, open \"Project Structure\"\n  (Ctrl-Shift-Alt-S).\n  Select your Hibernate facet (though\n  either \"Facets\" or \"Modules\").</p>\n  \n  <p>The options screen for the Hibernate\n  facet has a pane named \"DataSources\n  Mapping\". Here you can associate your\n  Hiberante session factory with a\n  specific IntelliJ datasource.</p>\n  \n  <p>After this step, SQL table/column code\n  completion and validation should\n  work in .hbm files as well.</p>\n</blockquote>\n\n<p>Applies to IDEA 7 also, read the whole thread if necessary.</p>\n"},{"tags":[],"owner":{"account_id":333285,"reputation":2127,"user_id":659077,"accept_rate":0,"display_name":"Mohsen Abasi"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1499806307,"creation_date":1498710498,"answer_id":44816353,"question_id":970573,"body_markdown":"To validate a hbm.xml file mappings, just do the following (Intellij Ultimate 2017.1):\r\n\r\n    View -&gt; Tool Windows -&gt; Database -&gt; click (+) sign -&gt; Data Source -&gt; MySQL\r\n\r\nYou&#39;ve added a datasource for your database&#39;s server. Now you should create the datasource. The next step is adding this datasource to hibernate mappings. Just follow me:\r\n\r\n    View -&gt; Tool Windows -&gt; Persistence\r\n\r\nThe Persistence window will be opened. You must see the project listed. \r\n\r\n    Right click on the project -&gt; Assign Data Sources...\r\n\r\nIn the opened window, there should be 2 columns: &quot;Session Factory&quot; and &quot;Data Source&quot;. Just add defined datasource above in the second column.\r\n","title":"Hibernate error: cannot resolve table","body":"<p>To validate a hbm.xml file mappings, just do the following (Intellij Ultimate 2017.1):</p>\n\n<pre><code>View -&gt; Tool Windows -&gt; Database -&gt; click (+) sign -&gt; Data Source -&gt; MySQL\n</code></pre>\n\n<p>You've added a datasource for your database's server. Now you should create the datasource. The next step is adding this datasource to hibernate mappings. Just follow me:</p>\n\n<pre><code>View -&gt; Tool Windows -&gt; Persistence\n</code></pre>\n\n<p>The Persistence window will be opened. You must see the project listed. </p>\n\n<pre><code>Right click on the project -&gt; Assign Data Sources...\n</code></pre>\n\n<p>In the opened window, there should be 2 columns: \"Session Factory\" and \"Data Source\". Just add defined datasource above in the second column.</p>\n"},{"tags":[],"owner":{"account_id":4165152,"reputation":257,"user_id":3414260,"display_name":"user3414260"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1592359409,"creation_date":1592359409,"answer_id":62420325,"question_id":970573,"body_markdown":"File&gt;Settings&gt;Editor&gt;Inspections&gt; unchek Unresolved database references in annotations\r\n","title":"Hibernate error: cannot resolve table","body":"<p>File>Settings>Editor>Inspections> unchek Unresolved database references in annotations</p>\n"},{"tags":[],"owner":{"account_id":17763021,"reputation":3757,"user_id":12898581,"display_name":"Dhanusha_Perera07"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639305511,"creation_date":1639305511,"answer_id":70322784,"question_id":970573,"body_markdown":"This is not a hibernate issue I guess.\r\n\r\nBy any chance, if you use IntelliJ IDEA IDE and if IntelliJ IDEA shows a warning that says `Cannot resolve table &#39;some-table-name&#39;`.\r\n\r\n 1. Check whether you have created a `Data Source` correctly. [Click here to read how to setup MySQL Data Source][1]\r\n\r\n 2. Check whether you have configured the `Persistence` settings correctly on IntelliJ IDEA.\r\n - Assign `Data Source` correctly in the `View &gt; Tool Windows &gt; Persistence` window. [Here is how to do that][2]. \r\n\r\nYou can find more details about this warning from [here][3] too. Hope you find something useful. Cheers!\r\n\r\n\r\n  [1]: https://www.jetbrains.com/help/idea/mysql.html\r\n  [2]: https://www.jetbrains.com/help/idea/persistence-tool-window.html#assign_data_source\r\n  [3]: https://intellij-support.jetbrains.com/hc/en-us/community/posts/360006677740-Hibernate-Cannot-resolve-table-and-column","title":"Hibernate error: cannot resolve table","body":"<p>This is not a hibernate issue I guess.</p>\n<p>By any chance, if you use IntelliJ IDEA IDE and if IntelliJ IDEA shows a warning that says <code>Cannot resolve table 'some-table-name'</code>.</p>\n<ol>\n<li><p>Check whether you have created a <code>Data Source</code> correctly. <a href=\"https://www.jetbrains.com/help/idea/mysql.html\" rel=\"nofollow noreferrer\">Click here to read how to setup MySQL Data Source</a></p>\n</li>\n<li><p>Check whether you have configured the <code>Persistence</code> settings correctly on IntelliJ IDEA.</p>\n</li>\n</ol>\n<ul>\n<li>Assign <code>Data Source</code> correctly in the <code>View &gt; Tool Windows &gt; Persistence</code> window. <a href=\"https://www.jetbrains.com/help/idea/persistence-tool-window.html#assign_data_source\" rel=\"nofollow noreferrer\">Here is how to do that</a>.</li>\n</ul>\n<p>You can find more details about this warning from <a href=\"https://intellij-support.jetbrains.com/hc/en-us/community/posts/360006677740-Hibernate-Cannot-resolve-table-and-column\" rel=\"nofollow noreferrer\">here</a> too. Hope you find something useful. Cheers!</p>\n"}],"owner":{"account_id":35487,"reputation":64776,"user_id":100516,"accept_rate":69,"display_name":"Roman"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43397,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"accepted_answer_id":2808052,"answer_count":6,"score":15,"last_activity_date":1639305511,"creation_date":1244559539,"question_id":970573,"body_markdown":"I&#39;m trying to make work the example from hibernate reference. \r\n\r\nI&#39;ve got simple table Pupil with id, name and age fields. I&#39;ve created correct (as I think) java-class for it according to all java-beans rules.\r\n\r\nI&#39;ve created configuration file - hibernate.cfg.xml, just like in the example from reference.\r\n\r\nI&#39;ve created hibernate mapping for one class Pupil, and here is the error occured.\r\n\r\n    &lt;hibernate-mapping&gt;\r\n       &lt;class name=&quot;Pupil&quot; table=&quot;pupils&quot;&gt;\r\n           ...\r\n       &lt;/class&gt;\r\n    &lt;/hibernate-mapping&gt;\r\n\r\ntable=&quot;pupils&quot; is red in my IDE and I see message &quot;cannot resolve table pupils&quot;. I&#39;ve also founded very strange note in reference which says that most users fail with the same problem trying to run the example.\r\n\r\nAh.. I&#39;m very angry with this example.. IMHO if authors know that there is such problem they should add some information about it.\r\n\r\nBut, how should I fix it? I don&#39;t want to deal with Ant here and with other instruments used in example. I&#39;m using MySql 5.0, but I think it doesn&#39;t matter.\r\n\r\nUPD: source code\r\n\r\nPupil.java - my persistent class\r\n\r\n    package domain;\r\n    \r\n    public class Pupil {\r\n        private Integer id;\r\n        private String name;\r\n        private Integer age;\r\n    \r\n        protected Pupil () { }\r\n    \r\n        public Pupil (String name, int age) {\r\n            this.age = age;\r\n            this.name = name;\r\n        }\r\n    \r\n        public Integer getId () {\r\n            return id;\r\n        }\r\n    \r\n        public void setId (Integer id) {\r\n            this.id = id;\r\n        }\r\n    \r\n        public String getName () {\r\n            return name;\r\n        }\r\n    \r\n        public void setName (String name) {\r\n            this.name = name;\r\n        }\r\n    \r\n        public Integer getAge () {\r\n            return age;\r\n        }\r\n    \r\n        public void setAge (Integer age) {\r\n            this.age = age;\r\n        }\r\n    \r\n        public String toString () {\r\n            return &quot;Pupil [ name = &quot; + name + &quot;, age = &quot; + age + &quot; ]&quot;;\r\n        }\r\n    }\r\n\r\nPupil.hbm.xml is mapping for this class\r\n\r\n    &lt;?xml version=&quot;1.0&quot;?&gt;\r\n    &lt;!DOCTYPE hibernate-mapping PUBLIC \r\n    &quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot; \r\n    &quot;http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd&quot;&gt;\r\n    \r\n    &lt;hibernate-mapping package=&quot;domain&quot; &gt;\r\n    \r\n        &lt;class name=&quot;Pupil&quot; table=&quot;pupils&quot;&gt;\r\n            &lt;id name=&quot;id&quot;&gt;\r\n                &lt;generator class=&quot;native&quot; /&gt;\r\n            &lt;/id&gt;\r\n            &lt;property name=&quot;name&quot; not-null=&quot;true&quot;/&gt;\r\n            &lt;property name=&quot;age&quot;/&gt;\r\n        &lt;/class&gt;\r\n    &lt;/hibernate-mapping&gt;\r\n\r\nhibernate.cfg.xml - configuration for hibernate\r\n\r\n&lt;?xml version=&#39;1.0&#39; encoding=&#39;utf-8&#39;?&gt;\r\n&lt;!DOCTYPE hibernate-configuration PUBLIC\r\n&quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot;\r\n&quot;http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd&quot;&gt;\r\n\r\n    &lt;hibernate-configuration&gt;\r\n        &lt;session-factory&gt;\r\n            &lt;!-- Database connection settings --&gt;\r\n            &lt;property name=&quot;connection.driver_class&quot;&gt;com.mysql.jdbc.Driver&lt;/property&gt;\r\n            &lt;property name=&quot;connection.url&quot;&gt;jdbc:mysql://localhost/hbm_test&lt;/property&gt;\r\n            &lt;property name=&quot;connection.username&quot;&gt;root&lt;/property&gt;\r\n            &lt;property name=&quot;connection.password&quot;&gt;root&lt;/property&gt;\r\n    \r\n            &lt;property name=&quot;connection.pool_size&quot;&gt;1&lt;/property&gt;\r\n            &lt;property name=&quot;dialect&quot;&gt;org.hibernate.dialect.MySQL5Dialect&lt;/property&gt;\r\n            &lt;property name=&quot;current_session_context_class&quot;&gt;thread&lt;/property&gt;\r\n            &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\r\n    \r\n            &lt;mapping resource=&quot;domain/Pupil.hbm.xml&quot;/&gt;\r\n        &lt;/session-factory&gt;\r\n    &lt;/hibernate-configuration&gt;\r\n\r\nHibernateUtils.java\r\n\r\n    package utils;\r\n    \r\n    import org.hibernate.SessionFactory;\r\n    import org.hibernate.HibernateException;\r\n    import org.hibernate.cfg.Configuration;\r\n    \r\n    public class HibernateUtils {\r\n        private static final SessionFactory sessionFactory;\r\n    \r\n        static {\r\n            try {\r\n                sessionFactory = new Configuration ().configure ().buildSessionFactory ();\r\n            } catch (HibernateException he) {\r\n                System.err.println (he);\r\n                throw new ExceptionInInitializerError (he);\r\n            }\r\n        }\r\n    \r\n        public static SessionFactory getSessionFactory () {\r\n            return sessionFactory;\r\n        }\r\n    }\r\n\r\nRunner.java - class for testing hibernate\r\n\r\n    import org.hibernate.Session;\r\n    \r\n    import java.util.*;\r\n    \r\n    import utils.HibernateUtils;\r\n    import domain.Pupil;\r\n    \r\n    public class Runner {\r\n        public static void main (String[] args) {\r\n            Session s = HibernateUtils.getSessionFactory ().getCurrentSession ();\r\n    \r\n            s.beginTransaction ();\r\n            List pups = s.createQuery (&quot;from Pupil&quot;).list ();\r\n            for (Object obj : pups) {\r\n                System.out.println (obj);\r\n            }\r\n            s.getTransaction ().commit ();\r\n    \r\n            HibernateUtils.getSessionFactory ().close ();\r\n        }\r\n    }\r\n\r\nMy libs: antlr-2.7.6.jar, asm.jar, asm-attrs.jar, cglib-2.1.3.jar, commons-collections-2.1.1.jar, commons-logging-1.0.4.jar, dom4j-1.6.1.jar, hibernate3.jar, jta.jar, log4j-1.2.11.jar, mysql-connector-java-5.1.7-bin.jar\r\n\r\n&gt; Compile error: cannot resolve table pupils ","title":"Hibernate error: cannot resolve table","body":"<p>I'm trying to make work the example from hibernate reference. </p>\n\n<p>I've got simple table Pupil with id, name and age fields. I've created correct (as I think) java-class for it according to all java-beans rules.</p>\n\n<p>I've created configuration file - hibernate.cfg.xml, just like in the example from reference.</p>\n\n<p>I've created hibernate mapping for one class Pupil, and here is the error occured.</p>\n\n<pre><code>&lt;hibernate-mapping&gt;\n   &lt;class name=\"Pupil\" table=\"pupils\"&gt;\n       ...\n   &lt;/class&gt;\n&lt;/hibernate-mapping&gt;\n</code></pre>\n\n<p>table=\"pupils\" is red in my IDE and I see message \"cannot resolve table pupils\". I've also founded very strange note in reference which says that most users fail with the same problem trying to run the example.</p>\n\n<p>Ah.. I'm very angry with this example.. IMHO if authors know that there is such problem they should add some information about it.</p>\n\n<p>But, how should I fix it? I don't want to deal with Ant here and with other instruments used in example. I'm using MySql 5.0, but I think it doesn't matter.</p>\n\n<p>UPD: source code</p>\n\n<p>Pupil.java - my persistent class</p>\n\n<pre><code>package domain;\n\npublic class Pupil {\n    private Integer id;\n    private String name;\n    private Integer age;\n\n    protected Pupil () { }\n\n    public Pupil (String name, int age) {\n        this.age = age;\n        this.name = name;\n    }\n\n    public Integer getId () {\n        return id;\n    }\n\n    public void setId (Integer id) {\n        this.id = id;\n    }\n\n    public String getName () {\n        return name;\n    }\n\n    public void setName (String name) {\n        this.name = name;\n    }\n\n    public Integer getAge () {\n        return age;\n    }\n\n    public void setAge (Integer age) {\n        this.age = age;\n    }\n\n    public String toString () {\n        return \"Pupil [ name = \" + name + \", age = \" + age + \" ]\";\n    }\n}\n</code></pre>\n\n<p>Pupil.hbm.xml is mapping for this class</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;!DOCTYPE hibernate-mapping PUBLIC \n\"-//Hibernate/Hibernate Mapping DTD 3.0//EN\" \n\"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd\"&gt;\n\n&lt;hibernate-mapping package=\"domain\" &gt;\n\n    &lt;class name=\"Pupil\" table=\"pupils\"&gt;\n        &lt;id name=\"id\"&gt;\n            &lt;generator class=\"native\" /&gt;\n        &lt;/id&gt;\n        &lt;property name=\"name\" not-null=\"true\"/&gt;\n        &lt;property name=\"age\"/&gt;\n    &lt;/class&gt;\n&lt;/hibernate-mapping&gt;\n</code></pre>\n\n<p>hibernate.cfg.xml - configuration for hibernate</p>\n\n<p>\n</p>\n\n<pre><code>&lt;hibernate-configuration&gt;\n    &lt;session-factory&gt;\n        &lt;!-- Database connection settings --&gt;\n        &lt;property name=\"connection.driver_class\"&gt;com.mysql.jdbc.Driver&lt;/property&gt;\n        &lt;property name=\"connection.url\"&gt;jdbc:mysql://localhost/hbm_test&lt;/property&gt;\n        &lt;property name=\"connection.username\"&gt;root&lt;/property&gt;\n        &lt;property name=\"connection.password\"&gt;root&lt;/property&gt;\n\n        &lt;property name=\"connection.pool_size\"&gt;1&lt;/property&gt;\n        &lt;property name=\"dialect\"&gt;org.hibernate.dialect.MySQL5Dialect&lt;/property&gt;\n        &lt;property name=\"current_session_context_class\"&gt;thread&lt;/property&gt;\n        &lt;property name=\"show_sql\"&gt;true&lt;/property&gt;\n\n        &lt;mapping resource=\"domain/Pupil.hbm.xml\"/&gt;\n    &lt;/session-factory&gt;\n&lt;/hibernate-configuration&gt;\n</code></pre>\n\n<p>HibernateUtils.java</p>\n\n<pre><code>package utils;\n\nimport org.hibernate.SessionFactory;\nimport org.hibernate.HibernateException;\nimport org.hibernate.cfg.Configuration;\n\npublic class HibernateUtils {\n    private static final SessionFactory sessionFactory;\n\n    static {\n        try {\n            sessionFactory = new Configuration ().configure ().buildSessionFactory ();\n        } catch (HibernateException he) {\n            System.err.println (he);\n            throw new ExceptionInInitializerError (he);\n        }\n    }\n\n    public static SessionFactory getSessionFactory () {\n        return sessionFactory;\n    }\n}\n</code></pre>\n\n<p>Runner.java - class for testing hibernate</p>\n\n<pre><code>import org.hibernate.Session;\n\nimport java.util.*;\n\nimport utils.HibernateUtils;\nimport domain.Pupil;\n\npublic class Runner {\n    public static void main (String[] args) {\n        Session s = HibernateUtils.getSessionFactory ().getCurrentSession ();\n\n        s.beginTransaction ();\n        List pups = s.createQuery (\"from Pupil\").list ();\n        for (Object obj : pups) {\n            System.out.println (obj);\n        }\n        s.getTransaction ().commit ();\n\n        HibernateUtils.getSessionFactory ().close ();\n    }\n}\n</code></pre>\n\n<p>My libs: antlr-2.7.6.jar, asm.jar, asm-attrs.jar, cglib-2.1.3.jar, commons-collections-2.1.1.jar, commons-logging-1.0.4.jar, dom4j-1.6.1.jar, hibernate3.jar, jta.jar, log4j-1.2.11.jar, mysql-connector-java-5.1.7-bin.jar</p>\n\n<blockquote>\n  <p>Compile error: cannot resolve table pupils </p>\n</blockquote>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":5998820,"reputation":12666,"user_id":4712734,"display_name":"DuncG"},"score":1,"creation_date":1639307436,"post_id":70322674,"comment_id":124310894,"body_markdown":"Search SO again with formatMsgNoLookups such as [this](https://stackoverflow.com/questions/70315727/where-to-put-formatmsgnolookups-in-log4j-xml-config-file) and [Apache Logging](https://logging.apache.org/log4j/2.x/security.html)","body":"Search SO again with formatMsgNoLookups such as <a href=\"https://stackoverflow.com/questions/70315727/where-to-put-formatmsgnolookups-in-log4j-xml-config-file\">this</a> and <a href=\"https://logging.apache.org/log4j/2.x/security.html\" rel=\"nofollow noreferrer\">Apache Logging</a>"},{"owner":{"account_id":1782478,"reputation":1380,"user_id":1624839,"display_name":"Mehdi"},"score":0,"creation_date":1639457190,"post_id":70322674,"comment_id":124347238,"body_markdown":"It&#39;s normal you get nothing because formatMsgNoLookups is a system property. log4j picks it up. this article explains well the vulnerability and when you are affected :  https://tutoref.com/cve-2021-44228-zero-day-vulnerability/","body":"It&#39;s normal you get nothing because formatMsgNoLookups is a system property. log4j picks it up. this article explains well the vulnerability and when you are affected :  <a href=\"https://tutoref.com/cve-2021-44228-zero-day-vulnerability/\" rel=\"nofollow noreferrer\">tutoref.com/cve-2021-44228-zero-day-vulnerability</a>"}],"answers":[{"tags":[],"owner":{"account_id":39208,"reputation":251240,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1639305353,"creation_date":1639305353,"answer_id":70322764,"question_id":70322674,"body_markdown":"You are conflating things. `log4j2.formatMsgNoLookups` is a system property which is picked up by the log4j2 logging library. It is _not a JVM flag_ and won&#39;t be printed by `-XX:+PrintFlagsFinal`. If it is enabled, then log4j2 doesn&#39;t perform lookups from the format message, which mitigates the vulnerability by disabling this attack vector.\r\n\r\nYou can only be vulnerable to CVE-2021-44228 if you are actually using log4j2 in your Java application. Let me repeat that: your _application_ is what&#39;s vulnerable, not the Java or the JVM itself. On the same JVM, one application can be vulnerable, while another isn&#39;t.\r\n\r\n(And if it were, the absence of it would rather indicate the opposite: you are vulnerable)","title":"JAVA formatMsgNoLookups option (CVE-2021-44228)","body":"<p>You are conflating things. <code>log4j2.formatMsgNoLookups</code> is a system property which is picked up by the log4j2 logging library. It is <em>not a JVM flag</em> and won't be printed by <code>-XX:+PrintFlagsFinal</code>. If it is enabled, then log4j2 doesn't perform lookups from the format message, which mitigates the vulnerability by disabling this attack vector.</p>\n<p>You can only be vulnerable to CVE-2021-44228 if you are actually using log4j2 in your Java application. Let me repeat that: your <em>application</em> is what's vulnerable, not the Java or the JVM itself. On the same JVM, one application can be vulnerable, while another isn't.</p>\n<p>(And if it were, the absence of it would rather indicate the opposite: you are vulnerable)</p>\n"}],"owner":{"account_id":23120968,"reputation":21,"user_id":17227508,"display_name":"george"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1394,"favorite_count":0,"down_vote_count":6,"up_vote_count":2,"accepted_answer_id":70322764,"answer_count":1,"score":-4,"last_activity_date":1639305353,"creation_date":1639304633,"question_id":70322674,"body_markdown":"When I run \r\n```\r\n$ java -XX:+UnlockDiagnosticVMOptions -XX:+PrintFlagsFinal -version | grep -i formatMsgNoLookups\r\n\r\n```\r\nI get no formatMsgNoLookups option in output. Does it mean I am not vulnerable to CVE-2021-44228?","title":"JAVA formatMsgNoLookups option (CVE-2021-44228)","body":"<p>When I run</p>\n<pre><code>$ java -XX:+UnlockDiagnosticVMOptions -XX:+PrintFlagsFinal -version | grep -i formatMsgNoLookups\n\n</code></pre>\n<p>I get no formatMsgNoLookups option in output. Does it mean I am not vulnerable to CVE-2021-44228?</p>\n"},{"tags":["java","constructor","encapsulation","naming"],"answers":[{"tags":[],"owner":{"account_id":9725613,"reputation":53334,"user_id":7212686,"accept_rate":100,"display_name":"azro"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1639301325,"creation_date":1639301325,"answer_id":70322345,"question_id":70322327,"body_markdown":"Use a `static int` in the class to hold the number of instanciation\r\n\r\n```java\r\n\r\nclass Point {\r\n    static int creationCount = 1;\r\n    String name;\r\n\r\n    public Point() {\r\n        this(&quot;AutoName&quot; + (creationCount++));\r\n    }\r\n\r\n    public Point(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;Point{name=&#39;&quot; + name + &quot;&#39;}&quot;;\r\n    }\r\n}\r\n```\r\n\r\n\r\n    System.out.println(new Point());       // Point{name=&#39;AutoName1&#39;}\r\n    System.out.println(new Point(&quot;abc&quot;));  // Point{name=&#39;abc&#39;}\r\n    System.out.println(new Point());       // Point{name=&#39;AutoName2&#39;}\r\n    System.out.println(new Point(&quot;bcd&quot;));  // Point{name=&#39;bcd&#39;}\r\n\r\n","title":"Creating class name generator in java","body":"<p>Use a <code>static int</code> in the class to hold the number of instanciation</p>\n<pre class=\"lang-java prettyprint-override\"><code>\nclass Point {\n    static int creationCount = 1;\n    String name;\n\n    public Point() {\n        this(&quot;AutoName&quot; + (creationCount++));\n    }\n\n    public Point(String name) {\n        this.name = name;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;Point{name='&quot; + name + &quot;'}&quot;;\n    }\n}\n</code></pre>\n<pre><code>System.out.println(new Point());       // Point{name='AutoName1'}\nSystem.out.println(new Point(&quot;abc&quot;));  // Point{name='abc'}\nSystem.out.println(new Point());       // Point{name='AutoName2'}\nSystem.out.println(new Point(&quot;bcd&quot;));  // Point{name='bcd'}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23193897,"reputation":1,"user_id":17289823,"display_name":"Kapporing"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639301606,"creation_date":1639301606,"answer_id":70322373,"question_id":70322327,"body_markdown":"You can use a static variable to do that:\r\n```\r\nclass Point {\r\n  static int counter = 1;\r\n  String name;\r\n  \r\n  public Point() {\r\n    this(&quot;AutoName&quot; + counter);\r\n    counter++;\r\n  }\r\n\r\n  public Point(String name) {\r\n    this.name = name\r\n  }\r\n}\r\n```","title":"Creating class name generator in java","body":"<p>You can use a static variable to do that:</p>\n<pre><code>class Point {\n  static int counter = 1;\n  String name;\n  \n  public Point() {\n    this(&quot;AutoName&quot; + counter);\n    counter++;\n  }\n\n  public Point(String name) {\n    this.name = name\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18243171,"reputation":19300,"user_id":13279831,"display_name":"Nowhere Man"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1639304952,"creation_date":1639304952,"answer_id":70322719,"question_id":70322327,"body_markdown":"The [accepted solution](https://stackoverflow.com/a/70322345/13279831) is fine for a single-thread application, e.g. when there is a single loop creating the points.  \r\n\r\nHowever, in case there are several threads creating the instances of `Point` class, the values of `creationCount` may repeat for different points, and defining the counter variable as `static volatile` does not guarantee the uniqieness of its values because pre- and post-increments are not atomic operations.\r\n\r\nSo, in general case it may be better to use more thread-safe `AtomicInteger` for the mentioned purpose:\r\n```java\r\nimport java.util.concurrent.atomic.AtomicInteger;\r\n\r\nclass Point {\r\n    static AtomicInteger creationCount = new AtomicInteger(1);\r\n    String name;\r\n\r\n    public Point() {\r\n        this(&quot;AutoName&quot; + creationCount.getAndIncrement());\r\n    }\r\n\r\n    public Point(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;Point{name=&#39;&quot; + name + &quot;&#39;}&quot;;\r\n    }\r\n}\r\n```","title":"Creating class name generator in java","body":"<p>The <a href=\"https://stackoverflow.com/a/70322345/13279831\">accepted solution</a> is fine for a single-thread application, e.g. when there is a single loop creating the points.</p>\n<p>However, in case there are several threads creating the instances of <code>Point</code> class, the values of <code>creationCount</code> may repeat for different points, and defining the counter variable as <code>static volatile</code> does not guarantee the uniqieness of its values because pre- and post-increments are not atomic operations.</p>\n<p>So, in general case it may be better to use more thread-safe <code>AtomicInteger</code> for the mentioned purpose:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.concurrent.atomic.AtomicInteger;\n\nclass Point {\n    static AtomicInteger creationCount = new AtomicInteger(1);\n    String name;\n\n    public Point() {\n        this(&quot;AutoName&quot; + creationCount.getAndIncrement());\n    }\n\n    public Point(String name) {\n        this.name = name;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;Point{name='&quot; + name + &quot;'}&quot;;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":23198033,"reputation":17,"user_id":17293361,"display_name":"wil123"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":835,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70322345,"answer_count":3,"score":0,"last_activity_date":1639304952,"creation_date":1639300999,"question_id":70322327,"body_markdown":"I am having quite a bit of problems naming variable automatically in java. \r\n\r\n**The problem in question :** \r\n\r\nI am making a class Point (different from ```java.awt.Point```). It has an attribute ```this.name```. From a ```testPoint.java``` I just create a ```Point``` and print its name. \r\n\r\nTo create a Point I have two linked constructor :\r\n```\r\npublic Point() {\r\n        this(&quot;AutoName&quot;);\r\n    }\r\n\r\npublic Point(String name) {\r\n        this.name = name;\r\n    }\r\n``` \r\n\r\nIf a name is given in the ```testPoint.java```, the point will be named according to that name. If no name is given the Point will be named ```AutoName```.\r\n\r\nWhat i want is that if no name is given the first no named Point gets ```AutoName1``` as a name, the second ```AutoName2``` etc.\r\n\r\nIs there a way to do that without introducing new classes ? It would be easy if I can create a global variable in java like in C and Python but I think that does not respect the encapsulation principle...","title":"Creating class name generator in java","body":"<p>I am having quite a bit of problems naming variable automatically in java.</p>\n<p><strong>The problem in question :</strong></p>\n<p>I am making a class Point (different from <code>java.awt.Point</code>). It has an attribute <code>this.name</code>. From a <code>testPoint.java</code> I just create a <code>Point</code> and print its name.</p>\n<p>To create a Point I have two linked constructor :</p>\n<pre><code>public Point() {\n        this(&quot;AutoName&quot;);\n    }\n\npublic Point(String name) {\n        this.name = name;\n    }\n</code></pre>\n<p>If a name is given in the <code>testPoint.java</code>, the point will be named according to that name. If no name is given the Point will be named <code>AutoName</code>.</p>\n<p>What i want is that if no name is given the first no named Point gets <code>AutoName1</code> as a name, the second <code>AutoName2</code> etc.</p>\n<p>Is there a way to do that without introducing new classes ? It would be easy if I can create a global variable in java like in C and Python but I think that does not respect the encapsulation principle...</p>\n"},{"tags":["java","windows","batch-file","cmd"],"owner":{"account_id":13628625,"reputation":39,"user_id":9831236,"display_name":"Gaming World"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1639304872,"creation_date":1639278109,"question_id":70320618,"body_markdown":"I&#39;m trying to replicate the behavior of Linux where we create an application launcher using `Alacarte` providing it the command and file name and Icon using batch\r\n\r\nHowever I have never used batch.\r\n\r\nThe batch file is in the same directory as the java application.\r\n\r\nThe Batch contains the command as:\r\n\r\n`java -javaagent:app1.jar -jar app2.jar`\r\n\r\nWhich does the job but It keeps CMD running in the background which during work I always accidentally close it which turns out closing the java app.\r\n\r\nHow can I can make it so it will disappear after launching the app and keep the app running\r\n","title":"Execute java application with one icon","body":"<p>I'm trying to replicate the behavior of Linux where we create an application launcher using <code>Alacarte</code> providing it the command and file name and Icon using batch</p>\n<p>However I have never used batch.</p>\n<p>The batch file is in the same directory as the java application.</p>\n<p>The Batch contains the command as:</p>\n<p><code>java -javaagent:app1.jar -jar app2.jar</code></p>\n<p>Which does the job but It keeps CMD running in the background which during work I always accidentally close it which turns out closing the java app.</p>\n<p>How can I can make it so it will disappear after launching the app and keep the app running</p>\n"},{"tags":["java","android","android-studio"],"answers":[{"tags":[],"owner":{"account_id":18716710,"reputation":1336,"user_id":14291243,"display_name":"Abhishek Dutt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639304777,"creation_date":1639300490,"answer_id":70322281,"question_id":70322138,"body_markdown":"Try adding this inside the `textMessage` text-view:\r\n```xml\r\napp:autoSizeTextType=&quot;uniform&quot;\r\napp:layout_constraintBottom_toTopof=&quot;@id/seenIndicator&quot;\r\n```\r\n","title":"How i can make an message &quot;seen&quot; indicator responsive?","body":"<p>Try adding this inside the <code>textMessage</code> text-view:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>app:autoSizeTextType=&quot;uniform&quot;\napp:layout_constraintBottom_toTopof=&quot;@id/seenIndicator&quot;\n</code></pre>\n"}],"owner":{"account_id":19869214,"reputation":1,"user_id":14555779,"display_name":"BeginnerProgrammer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1639304777,"creation_date":1639298765,"question_id":70322138,"body_markdown":"I am making a chat application in android studio and i am trying to make a &quot;seen&quot; indicator below the message, but when the message is short (example: &quot;Hello, what&#39;s up&quot;) the seen indicator stays below message box. When the message is longer, the message box gets bigger and &quot;seen&quot; indicator goes into the message box. How i can make it responsible? Here is the code for the sent_message.xml\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;wrap_content&quot;\r\n    android:layout_marginTop=&quot;@dimen/_8sdp&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    android:padding=&quot;@dimen/_4sdp&quot;&gt;\r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/textMessage&quot;\r\n        android:layout_width=&quot;0dp&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:background=&quot;@drawable/background_sent_message&quot;\r\n        android:paddingStart=&quot;@dimen/_12sdp&quot;\r\n        android:paddingTop=&quot;@dimen/_8sdp&quot;\r\n        android:paddingEnd=&quot;@dimen/_60sdp&quot;\r\n        android:paddingBottom=&quot;@dimen/_8sdp&quot;\r\n        android:layout_marginRight=&quot;@dimen/_4sdp&quot;\r\n        app:layout_constraintWidth_max=&quot;wrap&quot;\r\n        android:textColor=&quot;@color/white&quot;\r\n        android:textSize=&quot;@dimen/_13ssp&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n        android:layout_gravity=&quot;bottom&quot;\r\n        app:layout_constraintWidth_percent=&quot;0.8&quot; /&gt;\r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/textDateTime&quot;\r\n        android:layout_width=&quot;0dp&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_marginTop=&quot;-30dp&quot;\r\n        android:layout_marginRight=&quot;@dimen/_10sdp&quot;\r\n        android:paddingLeft=&quot;@dimen/_15sdp&quot;\r\n        android:textColor=&quot;@color/white&quot;\r\n        android:textSize=&quot;@dimen/_10ssp&quot;\r\n        android:text=&quot;17:32 PM&quot;\r\n        android:textStyle=&quot;italic&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toBottomOf=&quot;@id/textMessage&quot; /&gt;\r\n\r\n    &lt;TextView\r\n        android:id=&quot;@+id/seenIndicator&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;0dp&quot;\r\n        android:textAlignment=&quot;center&quot;\r\n        app:layout_constraintWidth_max=&quot;wrap&quot;\r\n        android:textColor=&quot;@color/secondary_text&quot;\r\n        android:textSize=&quot;@dimen/_10ssp&quot;\r\n        android:text=&quot;Seen&quot;\r\n        android:layout_marginTop=&quot;@dimen/_35sdp&quot;\r\n        android:layout_marginRight=&quot;@dimen/_5sdp&quot;\r\n        android:visibility=&quot;visible&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toBottomOf=&quot;@id/textMessage&quot;\r\n        app:layout_constraintWidth_percent=&quot;0.8&quot; /&gt;\r\n\r\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n```","title":"How i can make an message &quot;seen&quot; indicator responsive?","body":"<p>I am making a chat application in android studio and i am trying to make a &quot;seen&quot; indicator below the message, but when the message is short (example: &quot;Hello, what's up&quot;) the seen indicator stays below message box. When the message is longer, the message box gets bigger and &quot;seen&quot; indicator goes into the message box. How i can make it responsible? Here is the code for the sent_message.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:layout_marginTop=&quot;@dimen/_8sdp&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    android:padding=&quot;@dimen/_4sdp&quot;&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/textMessage&quot;\n        android:layout_width=&quot;0dp&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:background=&quot;@drawable/background_sent_message&quot;\n        android:paddingStart=&quot;@dimen/_12sdp&quot;\n        android:paddingTop=&quot;@dimen/_8sdp&quot;\n        android:paddingEnd=&quot;@dimen/_60sdp&quot;\n        android:paddingBottom=&quot;@dimen/_8sdp&quot;\n        android:layout_marginRight=&quot;@dimen/_4sdp&quot;\n        app:layout_constraintWidth_max=&quot;wrap&quot;\n        android:textColor=&quot;@color/white&quot;\n        android:textSize=&quot;@dimen/_13ssp&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        android:layout_gravity=&quot;bottom&quot;\n        app:layout_constraintWidth_percent=&quot;0.8&quot; /&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/textDateTime&quot;\n        android:layout_width=&quot;0dp&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_marginTop=&quot;-30dp&quot;\n        android:layout_marginRight=&quot;@dimen/_10sdp&quot;\n        android:paddingLeft=&quot;@dimen/_15sdp&quot;\n        android:textColor=&quot;@color/white&quot;\n        android:textSize=&quot;@dimen/_10ssp&quot;\n        android:text=&quot;17:32 PM&quot;\n        android:textStyle=&quot;italic&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@id/textMessage&quot; /&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/seenIndicator&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;0dp&quot;\n        android:textAlignment=&quot;center&quot;\n        app:layout_constraintWidth_max=&quot;wrap&quot;\n        android:textColor=&quot;@color/secondary_text&quot;\n        android:textSize=&quot;@dimen/_10ssp&quot;\n        android:text=&quot;Seen&quot;\n        android:layout_marginTop=&quot;@dimen/_35sdp&quot;\n        android:layout_marginRight=&quot;@dimen/_5sdp&quot;\n        android:visibility=&quot;visible&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        app:layout_constraintTop_toBottomOf=&quot;@id/textMessage&quot;\n        app:layout_constraintWidth_percent=&quot;0.8&quot; /&gt;\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n"},{"tags":["java","annotations"],"comments":[{"owner":{"account_id":2345668,"reputation":13002,"user_id":2055998,"accept_rate":68,"display_name":"PM 77-1"},"score":1,"creation_date":1435516466,"post_id":31103302,"comment_id":50221724,"body_markdown":"Do you understand what annotations in general are for?","body":"Do you understand what annotations in general are for?"},{"owner":{"account_id":3917167,"reputation":1785,"user_id":3240722,"accept_rate":87,"display_name":"kevin gomes"},"score":1,"creation_date":1435516531,"post_id":31103302,"comment_id":50221745,"body_markdown":"@PM77-1 : To add supplement information in a source file","body":"@PM77-1 : To add supplement information in a source file"},{"owner":{"account_id":2345668,"reputation":13002,"user_id":2055998,"accept_rate":68,"display_name":"PM 77-1"},"score":0,"creation_date":1435516700,"post_id":31103302,"comment_id":50221802,"body_markdown":"Do you know what [annotation processor](http://hannesdorfmann.com/annotation-processing/annotationprocessing101/) is?","body":"Do you know what <a href=\"http://hannesdorfmann.com/annotation-processing/annotationprocessing101/\" rel=\"nofollow noreferrer\">annotation processor</a> is?"},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":0,"creation_date":1435516771,"post_id":31103302,"comment_id":50221836,"body_markdown":"The annotation is not really being used in your example - you can probably find better examples online.","body":"The annotation is not really being used in your example - you can probably find better examples online."},{"owner":{"account_id":3917167,"reputation":1785,"user_id":3240722,"accept_rate":87,"display_name":"kevin gomes"},"score":0,"creation_date":1435517009,"post_id":31103302,"comment_id":50221909,"body_markdown":"@assylias : I am searching for an example which is having an effect like override is having ( causes compile time error I the method is not overridden)","body":"@assylias : I am searching for an example which is having an effect like override is having ( causes compile time error I the method is not overridden)"},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":0,"creation_date":1435517450,"post_id":31103302,"comment_id":50222052,"body_markdown":"@kevingomes That won&#39;t be possible - the behaviour of override is implemented by the compiler itself - you wouldn&#39;t be able to implement it yourself. See also: http://stackoverflow.com/questions/31097555/how-to-implement-something-similar-to-the-override-java-annotation","body":"@kevingomes That won&#39;t be possible - the behaviour of override is implemented by the compiler itself - you wouldn&#39;t be able to implement it yourself. See also: <a href=\"http://stackoverflow.com/questions/31097555/how-to-implement-something-similar-to-the-override-java-annotation\" title=\"how to implement something similar to the override java annotation\">stackoverflow.com/questions/31097555/&hellip;</a>"},{"owner":{"account_id":4035343,"reputation":1229,"user_id":3320018,"accept_rate":82,"display_name":"Nirmal"},"score":0,"creation_date":1435519857,"post_id":31103302,"comment_id":50222913,"body_markdown":"@kevingomes I have modified your code a bit - check it out in the answer below in the new edit.","body":"@kevingomes I have modified your code a bit - check it out in the answer below in the new edit."}],"answers":[{"tags":[],"owner":{"account_id":1682334,"reputation":5268,"user_id":1829930,"display_name":"Robin Krahl"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1435517251,"creation_date":1435516578,"answer_id":31103357,"question_id":31103302,"body_markdown":"The abstract methods of the annotation define the values you can pass to it (in your case `str = &quot;Annotation example&quot;, val = 100`). You can access them using reflection ([`Method.&lt;T&gt;getAnnotation(Class&lt;T&gt;)`](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Method.html#getAnnotation%28java.lang.Class%29)). Custom annotations dont have direct impact. They are only useful if you evaluate them.\r\n\r\nNote that you have to annotate your custom annotation with [`@Retention(value=RUNTIME)`](http://docs.oracle.com/javase/7/docs/api/java/lang/annotation/Retention.html) to be able to read it via reflection.","title":"use of custom annotations","body":"<p>The abstract methods of the annotation define the values you can pass to it (in your case <code>str = \"Annotation example\", val = 100</code>). You can access them using reflection (<a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Method.html#getAnnotation%28java.lang.Class%29\" rel=\"nofollow\"><code>Method.&lt;T&gt;getAnnotation(Class&lt;T&gt;)</code></a>). Custom annotations dont have direct impact. They are only useful if you evaluate them.</p>\n\n<p>Note that you have to annotate your custom annotation with <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/annotation/Retention.html\" rel=\"nofollow\"><code>@Retention(value=RUNTIME)</code></a> to be able to read it via reflection.</p>\n"},{"tags":[],"owner":{"account_id":4035343,"reputation":1229,"user_id":3320018,"accept_rate":82,"display_name":"Nirmal"},"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1435519351,"creation_date":1435517104,"answer_id":31103450,"question_id":31103302,"body_markdown":"Here is a minimal example. The following code demonstrates use of custom annotation. \r\n\r\nIt is about Employees and Benefits. If we have a requirement such that BasicBenefits has to be applied to all types of employess then we can come up with custom annotation such as BasicBenefits, and annotate all types of Employee implementations (e.g. CorporateEmployee, ContractEmployee, ManagerEmployee etc. etc.) with the BasicBenefits.\r\n\r\n&gt; Custom Annotation Class(interface)\r\n\r\n    import java.lang.annotation.*;\r\n    @Inherited\r\n    @Documented\r\n    @Target(ElementType.TYPE)\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    \r\n    @interface BasicBenefits {\r\n        String bId() default &quot;B-101&quot;;\r\n        String bName() default &quot;General Class A Employee&quot;;\r\n    }\r\n\r\n&gt; Class using the custom annotation(no need of any imports):\r\n\r\n    @BasicBenefits(bId=&quot;B-400&quot;, bName=&quot;General Plus Class A Employee&quot;)\r\n    public class Employee {\r\n        String eId;\r\n        String eName;\r\n        public Employee(String eId, String eName){\r\n            this.eId = eId;\r\n            this.eName = eName;\r\n        }\r\n    \r\n        public void getEmployeeDetails(){\r\n            System.out.println(&quot;Employee ID: &quot;+eId);\r\n            System.out.println(&quot;Employee Name: &quot;+eName);\r\n        }\r\n    }\r\n\r\n&gt; Driver class to test out the above.\r\n\r\n    import java.lang.annotation.Annotation;\r\n    public class TestCustomAnnotationBasicBenefits {\r\n        public static void main(String[] args) throws Exception{\r\n            Employee emp = new Employee(&quot;E-100&quot;, &quot;user3320018&quot;);\r\n            emp.getEmployeeDetails();\r\n            Class reflectedClass = emp.getClass();\r\n            Annotation hopeBenefitAnn = reflectedClass.getAnnotation(BasicBenefits.class);\r\n            BasicBenefits bBenefits = (BasicBenefits)hopeBenefitAnn;\r\n            System.out.println(&quot;Benefit ID: &quot;+bBenefits.bId());\r\n            System.out.println(&quot;Benefit Name: &quot;+bBenefits.bName());\r\n        }\r\n    }\r\n\r\n\r\n*Your code look almost there, just two things need to be included in the main method.*\r\n\r\n&gt; 1.) Need reference to MyClass\r\n&gt; 2.) Need to get the annotation using reflection from MyClass.\r\n\r\nHere is a bit modified code from what you have:\r\n\r\n    @Inherited\r\n    @Documented\r\n    @Target(ElementType.TYPE)\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @interface MyAnno\r\n    {\r\n        String str();\r\n        int val();\r\n    }\r\n    \r\n    //using above custom annotation on class level\r\n    //can also use method level\r\n    //just need to change t @Target(ElementType.METHOD)\r\n    @MyAnno(str = &quot;Annotation example&quot;, val = 100)\r\n    class MyClass\r\n    {\r\n       \r\n        public static void myMeth()\r\n        {\r\n            System.out.println(&quot;Inside myMeth()&quot;);\r\n        }\r\n    }\r\n    \r\n    import java.lang.annotation.Annotation;\r\n    class CustomAnno\r\n    {\r\n        public static void main(String args[])\r\n        {\r\n        \t//1. getting reference to the class where the custom annotation is applied.\r\n        \t//2. then getting the annotation to get the values \r\n            MyClass myClass = new MyClass();\r\n            Class cls = myClass.getClass();\r\n            Annotation getMyAnno = cls.getAnnotation(MyAnno.class);\r\n            MyAnno myAnno = (MyAnno)getMyAnno;\r\n        \tMyClass.myMeth(); //left this as is.\r\n        \tSystem.out.println(&quot;myAnno.str(): &quot;+ myAnno.str());\r\n        \tSystem.out.println(&quot;myAnno.str(): &quot;+ myAnno.val());   \t\r\n        }\r\n    }","title":"use of custom annotations","body":"<p>Here is a minimal example. The following code demonstrates use of custom annotation. </p>\n\n<p>It is about Employees and Benefits. If we have a requirement such that BasicBenefits has to be applied to all types of employess then we can come up with custom annotation such as BasicBenefits, and annotate all types of Employee implementations (e.g. CorporateEmployee, ContractEmployee, ManagerEmployee etc. etc.) with the BasicBenefits.</p>\n\n<blockquote>\n  <p>Custom Annotation Class(interface)</p>\n</blockquote>\n\n<pre><code>import java.lang.annotation.*;\n@Inherited\n@Documented\n@Target(ElementType.TYPE)\n@Retention(RetentionPolicy.RUNTIME)\n\n@interface BasicBenefits {\n    String bId() default \"B-101\";\n    String bName() default \"General Class A Employee\";\n}\n</code></pre>\n\n<blockquote>\n  <p>Class using the custom annotation(no need of any imports):</p>\n</blockquote>\n\n<pre><code>@BasicBenefits(bId=\"B-400\", bName=\"General Plus Class A Employee\")\npublic class Employee {\n    String eId;\n    String eName;\n    public Employee(String eId, String eName){\n        this.eId = eId;\n        this.eName = eName;\n    }\n\n    public void getEmployeeDetails(){\n        System.out.println(\"Employee ID: \"+eId);\n        System.out.println(\"Employee Name: \"+eName);\n    }\n}\n</code></pre>\n\n<blockquote>\n  <p>Driver class to test out the above.</p>\n</blockquote>\n\n<pre><code>import java.lang.annotation.Annotation;\npublic class TestCustomAnnotationBasicBenefits {\n    public static void main(String[] args) throws Exception{\n        Employee emp = new Employee(\"E-100\", \"user3320018\");\n        emp.getEmployeeDetails();\n        Class reflectedClass = emp.getClass();\n        Annotation hopeBenefitAnn = reflectedClass.getAnnotation(BasicBenefits.class);\n        BasicBenefits bBenefits = (BasicBenefits)hopeBenefitAnn;\n        System.out.println(\"Benefit ID: \"+bBenefits.bId());\n        System.out.println(\"Benefit Name: \"+bBenefits.bName());\n    }\n}\n</code></pre>\n\n<p><em>Your code look almost there, just two things need to be included in the main method.</em></p>\n\n<blockquote>\n  <p>1.) Need reference to MyClass\n  2.) Need to get the annotation using reflection from MyClass.</p>\n</blockquote>\n\n<p>Here is a bit modified code from what you have:</p>\n\n<pre><code>@Inherited\n@Documented\n@Target(ElementType.TYPE)\n@Retention(RetentionPolicy.RUNTIME)\n@interface MyAnno\n{\n    String str();\n    int val();\n}\n\n//using above custom annotation on class level\n//can also use method level\n//just need to change t @Target(ElementType.METHOD)\n@MyAnno(str = \"Annotation example\", val = 100)\nclass MyClass\n{\n\n    public static void myMeth()\n    {\n        System.out.println(\"Inside myMeth()\");\n    }\n}\n\nimport java.lang.annotation.Annotation;\nclass CustomAnno\n{\n    public static void main(String args[])\n    {\n        //1. getting reference to the class where the custom annotation is applied.\n        //2. then getting the annotation to get the values \n        MyClass myClass = new MyClass();\n        Class cls = myClass.getClass();\n        Annotation getMyAnno = cls.getAnnotation(MyAnno.class);\n        MyAnno myAnno = (MyAnno)getMyAnno;\n        MyClass.myMeth(); //left this as is.\n        System.out.println(\"myAnno.str(): \"+ myAnno.str());\n        System.out.println(\"myAnno.str(): \"+ myAnno.val());     \n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":58050,"reputation":7570,"user_id":173852,"display_name":"mernst"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1435540830,"creation_date":1435540830,"answer_id":31106508,"question_id":31103302,"body_markdown":"Three main reasons to use custom annotations are:\r\n\r\n * To reduce the effort of writing code (a compile-time annotation processor generates code for you). Here is a tutorial: [part 1](https://deors.wordpress.com/2011/09/26/annotation-types/), [part 2](https://deors.wordpress.com/2011/10/08/annotation-processors/).\r\n * To provide additional correctness guarantees (a compile-time annotation processor warns you about errors). One nice tool for this is the [Checker Framework](http://checkerframework.org), which prevents null pointer dereferences, concurrency errors, and more.\r\n * To customize behavior (at run time, your code checks for the annotation using reflection and behaves differently depending on whether the annotation is present). Frameworks such as [Hibernate](http://www.tutorialspoint.com/hibernate/hibernate_annotations.htm) use annotations this way; also see an [Oracle article](http://www.oracle.com/technetwork/articles/hunter-meta-3-092019.html).\r\n\r\nIn each case, use of annotations reduces the likelihood of errors in your code, compared to other non-annotation approaches.\r\n","title":"use of custom annotations","body":"<p>Three main reasons to use custom annotations are:</p>\n\n<ul>\n<li>To reduce the effort of writing code (a compile-time annotation processor generates code for you). Here is a tutorial: <a href=\"https://deors.wordpress.com/2011/09/26/annotation-types/\" rel=\"noreferrer\">part 1</a>, <a href=\"https://deors.wordpress.com/2011/10/08/annotation-processors/\" rel=\"noreferrer\">part 2</a>.</li>\n<li>To provide additional correctness guarantees (a compile-time annotation processor warns you about errors). One nice tool for this is the <a href=\"http://checkerframework.org\" rel=\"noreferrer\">Checker Framework</a>, which prevents null pointer dereferences, concurrency errors, and more.</li>\n<li>To customize behavior (at run time, your code checks for the annotation using reflection and behaves differently depending on whether the annotation is present). Frameworks such as <a href=\"http://www.tutorialspoint.com/hibernate/hibernate_annotations.htm\" rel=\"noreferrer\">Hibernate</a> use annotations this way; also see an <a href=\"http://www.oracle.com/technetwork/articles/hunter-meta-3-092019.html\" rel=\"noreferrer\">Oracle article</a>.</li>\n</ul>\n\n<p>In each case, use of annotations reduces the likelihood of errors in your code, compared to other non-annotation approaches.</p>\n"},{"tags":[],"owner":{"account_id":5883828,"reputation":671,"user_id":4632437,"accept_rate":80,"display_name":"Igor Soudakevitch"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1522489600,"creation_date":1522489600,"answer_id":49586397,"question_id":31103302,"body_markdown":"To be of any use, annotations must be parsed first. The built-in annotations (such as `@Override` or `@FunctionalInterface`, to name the most obvious ones) are parsed by the compiler itself. As for custom annotations, these guys are commonly parsed by third-party frameworks, although we can also use the reflection mechanism to demonstrate this technique in standalone code.\r\n\r\nBy way of an example, the code below changes its behaviour at run time depending on the value of the field declared in the custom annotation named `@SwitchingAnnotation`:\r\n\r\n    import java.lang.annotation.Target;\r\n    import java.lang.annotation.ElementType;\r\n    import java.lang.annotation.Retention;\r\n    import java.lang.annotation.RetentionPolicy;\r\n    \r\n    @Target(ElementType.METHOD)\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @interface SwitchingAnnotation{\r\n        boolean flag();\r\n    }\r\n    \r\n    public class Worker{\r\n        void doThis(){ System.out.println(&quot;Doing this&quot;); }\r\n        void doThat(){ System.out.println(&quot;Doing that&quot;); }\r\n        @SwitchingAnnotation(\r\n            flag = false\r\n        )\r\n        public void work(boolean flag) {\r\n            if (flag) doThis();\r\n            else doThat();\r\n        }\r\n    }\r\n    \r\n    class Test{\r\n        public static void main(String[] args) {\r\n            try{\r\n                SwitchingAnnotation sw = Worker.class.getMethod(&quot;work&quot;, boolean.class)\r\n                                                     .getAnnotation(SwitchingAnnotation.class);\r\n\r\n                new Worker().work(sw.flag());    // prints Doing that\r\n            }\r\n            catch(NoSuchMethodException nsme){\r\n                System.out.println(nsme);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\n","title":"use of custom annotations","body":"<p>To be of any use, annotations must be parsed first. The built-in annotations (such as <code>@Override</code> or <code>@FunctionalInterface</code>, to name the most obvious ones) are parsed by the compiler itself. As for custom annotations, these guys are commonly parsed by third-party frameworks, although we can also use the reflection mechanism to demonstrate this technique in standalone code.</p>\n\n<p>By way of an example, the code below changes its behaviour at run time depending on the value of the field declared in the custom annotation named <code>@SwitchingAnnotation</code>:</p>\n\n<pre><code>import java.lang.annotation.Target;\nimport java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\n\n@Target(ElementType.METHOD)\n@Retention(RetentionPolicy.RUNTIME)\n@interface SwitchingAnnotation{\n    boolean flag();\n}\n\npublic class Worker{\n    void doThis(){ System.out.println(\"Doing this\"); }\n    void doThat(){ System.out.println(\"Doing that\"); }\n    @SwitchingAnnotation(\n        flag = false\n    )\n    public void work(boolean flag) {\n        if (flag) doThis();\n        else doThat();\n    }\n}\n\nclass Test{\n    public static void main(String[] args) {\n        try{\n            SwitchingAnnotation sw = Worker.class.getMethod(\"work\", boolean.class)\n                                                 .getAnnotation(SwitchingAnnotation.class);\n\n            new Worker().work(sw.flag());    // prints Doing that\n        }\n        catch(NoSuchMethodException nsme){\n            System.out.println(nsme);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":3917167,"reputation":1785,"user_id":3240722,"accept_rate":87,"display_name":"kevin gomes"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14075,"favorite_count":0,"down_vote_count":2,"up_vote_count":28,"answer_count":4,"score":26,"last_activity_date":1639304775,"creation_date":1435516277,"question_id":31103302,"body_markdown":"I found several related (not duplicate) question to this, but they didn&#39;t satisfy me.\r\n\r\nI am unable to understand where and why to use `custom annotations`?\r\n\r\nI read an example of custom annotation in a book, but it was not explained thoroughly.\r\n\r\n    @interface MyAnno\r\n    {\r\n        String str();\r\n        int val();\r\n    }\r\n\r\n    class MyClass\r\n    {\r\n        @MyAnno(str = &quot;Annotation example&quot;, val = 100)\r\n        public static void myMeth()\r\n        {\r\n            System.out.println(&quot;Inside myMeth()&quot;);\r\n        }\r\n    }\r\n\r\n    class CustomAnno\r\n    {\r\n        public static void main(String args[])\r\n        {\r\n            MyClass.myMeth();\r\n        }\r\n    }\r\n\r\nThe output is as expected `Inside myMeth()`.\r\n\r\nI am having few questions regarding this example.\r\n\r\n&gt;1- How can I use `String str()` and `int val()` in this program? OR\r\n \r\n&gt;What is the use of any abstract method of an `custom annotation`?\r\n\r\n&gt;2- Why `custom annotations`. I mean that what effect they are having on any code.\r\n\r\n&gt;3- How can I create an annotation which is having effects like @override is having?(I mean any kind of effect which can be noticed)\r\n\r\nIf this example is useless for you, then please give me a suitable small example in which a `custom annotation` is used.","title":"use of custom annotations","body":"<p>I found several related (not duplicate) question to this, but they didn't satisfy me.</p>\n\n<p>I am unable to understand where and why to use <code>custom annotations</code>?</p>\n\n<p>I read an example of custom annotation in a book, but it was not explained thoroughly.</p>\n\n<pre><code>@interface MyAnno\n{\n    String str();\n    int val();\n}\n\nclass MyClass\n{\n    @MyAnno(str = \"Annotation example\", val = 100)\n    public static void myMeth()\n    {\n        System.out.println(\"Inside myMeth()\");\n    }\n}\n\nclass CustomAnno\n{\n    public static void main(String args[])\n    {\n        MyClass.myMeth();\n    }\n}\n</code></pre>\n\n<p>The output is as expected <code>Inside myMeth()</code>.</p>\n\n<p>I am having few questions regarding this example.</p>\n\n<blockquote>\n  <p>1- How can I use <code>String str()</code> and <code>int val()</code> in this program? OR</p>\n  \n  <p>What is the use of any abstract method of an <code>custom annotation</code>?</p>\n  \n  <p>2- Why <code>custom annotations</code>. I mean that what effect they are having on any code.</p>\n  \n  <p>3- How can I create an annotation which is having effects like @override is having?(I mean any kind of effect which can be noticed)</p>\n</blockquote>\n\n<p>If this example is useless for you, then please give me a suitable small example in which a <code>custom annotation</code> is used.</p>\n"},{"tags":["java","json","list","hashmap"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1639298521,"post_id":70321952,"comment_id":124309355,"body_markdown":"What&#39;s the problem?","body":"What&#39;s the problem?"},{"owner":{"account_id":23623812,"reputation":1,"user_id":17656634,"display_name":"sagarsahil"},"score":0,"creation_date":1639298886,"post_id":70321952,"comment_id":124309406,"body_markdown":"@shmosel I am trying to get List&lt;Map&lt;String, Object&gt; but not able to get tableName and Keys added to that map.","body":"@shmosel I am trying to get List&lt;Map&lt;String, Object&gt; but not able to get tableName and Keys added to that map."},{"owner":{"account_id":13459822,"reputation":1807,"user_id":9712270,"display_name":"magicmn"},"score":0,"creation_date":1639301223,"post_id":70321952,"comment_id":124309785,"body_markdown":"You want to have a map with all the keys and tableNames that exist in the json file or what?","body":"You want to have a map with all the keys and tableNames that exist in the json file or what?"}],"answers":[{"tags":[],"owner":{"account_id":11092824,"reputation":484,"user_id":8144061,"accept_rate":100,"display_name":"Wing Kui Tsoi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639304614,"creation_date":1639304614,"answer_id":70322673,"question_id":70321952,"body_markdown":"Let&#39;s try this out by using Simple Json (org.json.simple). \r\n\r\n        public static void main(String[] args) throws Exception {\r\n            // Read from json file. \r\n    \t\tObject obj = new JSONParser().parse(new FileReader(&quot;test.json&quot;));\r\n\r\n            // You may remove the [] first from data, then prase json object.\r\n    \t\tJSONObject jo = (JSONObject) obj;\r\n    \t\t//System.out.println(jo);\r\n    \t\t//System.out.println(jo.get(&quot;database&quot;));\r\n\r\n            // Get database object.\r\n    \t\tJSONObject jodb = (JSONObject) jo.get(&quot;database&quot;);\r\n    \t\t//System.out.println(jodb.get(&quot;dbConnectionId&quot;));\r\n    \t\t//System.out.println(jodb.get(&quot;tableNames&quot;));\r\n\r\n            // Get tableNames array from database object.\r\n    \t\tJSONArray ja = (JSONArray) jodb.get(&quot;tableNames&quot;);\r\n    \t\t//System.out.println(ja);\r\n    \t\tIterator itrJa = ja.iterator();\r\n    \t\twhile (itrJa.hasNext()) {\r\n    \t\t\t//System.out.println(itrJa.next());\r\n\r\n                // Prase nested database object inside tableNames array.\r\n    \t\t\tJSONObject dbObj = (JSONObject) itrJa.next();\r\n    \t\t\tSystem.out.println(dbObj);\r\n\r\n                // Get tableName from database object\r\n    \t\t\tSystem.out.println(dbObj.get(&quot;tableName&quot;));\r\n\r\n                // Get keys array from database object\r\n    \t\t\tJSONArray keys = (JSONArray) dbObj.get(&quot;keys&quot;);\r\n    \t\t\t//System.out.println(keys);\r\n    \t\t\tIterator itrKeys = keys.iterator();\r\n    \t\t\twhile (itrKeys.hasNext()) {\r\n                    // Get key strings.\r\n    \t\t\t\tString keyStr = itrKeys.next().toString();\r\n    \t\t\t\tString[] keyArr = keyStr.split(&quot;,&quot;);\r\n    \t\t\t\tSystem.out.println(keyArr[0].trim());\r\n    \t\t\t\tSystem.out.println(keyArr[1].trim());\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n\r\nLibrary:\r\n\r\n        &lt;!-- https://mvnrepository.com/artifact/com.googlecode.json-simple/json-simple --&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.googlecode.json-simple&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;json-simple&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.1.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;","title":"How to convert nested Json to Map in java","body":"<p>Let's try this out by using Simple Json (org.json.simple).</p>\n<pre><code>    public static void main(String[] args) throws Exception {\n        // Read from json file. \n        Object obj = new JSONParser().parse(new FileReader(&quot;test.json&quot;));\n\n        // You may remove the [] first from data, then prase json object.\n        JSONObject jo = (JSONObject) obj;\n        //System.out.println(jo);\n        //System.out.println(jo.get(&quot;database&quot;));\n\n        // Get database object.\n        JSONObject jodb = (JSONObject) jo.get(&quot;database&quot;);\n        //System.out.println(jodb.get(&quot;dbConnectionId&quot;));\n        //System.out.println(jodb.get(&quot;tableNames&quot;));\n\n        // Get tableNames array from database object.\n        JSONArray ja = (JSONArray) jodb.get(&quot;tableNames&quot;);\n        //System.out.println(ja);\n        Iterator itrJa = ja.iterator();\n        while (itrJa.hasNext()) {\n            //System.out.println(itrJa.next());\n\n            // Prase nested database object inside tableNames array.\n            JSONObject dbObj = (JSONObject) itrJa.next();\n            System.out.println(dbObj);\n\n            // Get tableName from database object\n            System.out.println(dbObj.get(&quot;tableName&quot;));\n\n            // Get keys array from database object\n            JSONArray keys = (JSONArray) dbObj.get(&quot;keys&quot;);\n            //System.out.println(keys);\n            Iterator itrKeys = keys.iterator();\n            while (itrKeys.hasNext()) {\n                // Get key strings.\n                String keyStr = itrKeys.next().toString();\n                String[] keyArr = keyStr.split(&quot;,&quot;);\n                System.out.println(keyArr[0].trim());\n                System.out.println(keyArr[1].trim());\n            }\n        }\n    }\n</code></pre>\n<p>Library:</p>\n<pre><code>    &lt;!-- https://mvnrepository.com/artifact/com.googlecode.json-simple/json-simple --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.googlecode.json-simple&lt;/groupId&gt;\n        &lt;artifactId&gt;json-simple&lt;/artifactId&gt;\n        &lt;version&gt;1.1.1&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":23623812,"reputation":1,"user_id":17656634,"display_name":"sagarsahil"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":767,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1639304614,"creation_date":1639296824,"question_id":70321952,"body_markdown":"I am trying to read nested json and convert that into a Map. I am able to parse json to java objects but not able to convert to map from those java objects.\r\n\r\nFollowing is the json\r\n\r\n    &quot;sources&quot;: [\r\n        {\r\n          &quot;database&quot;: {\r\n            &quot;dbConnectionId&quot;: &quot;TestDBConnectionId&quot;,\r\n            &quot;tableNames&quot;: [\r\n              {\r\n                &quot;tableName&quot;: &quot;TestTableName011&quot;,\r\n                &quot;keys&quot;: [&quot;column010, column011&quot;]\r\n              },\r\n              {\r\n                &quot;tableName&quot;: &quot;TestTableName012&quot;,\r\n                &quot;keys&quot;: [&quot;column020, column021&quot;]\r\n              }\r\n            ]\r\n          }\r\n        }\r\n      ]\r\n    \r\n    Created Java object as follows:- \r\n    \r\n    public class Sources {\r\n        private Database database;\r\n    //Getters and Setters\r\n    }\r\n    \r\n    public class Database {\r\n    \r\n        private String dbConnectionId;\r\n        private List&lt;TableNames&gt; tableNames;\r\n    //Getters and Setters\r\n    }\r\n    \r\n    public class TableNames {\r\n    \r\n        private String tableName;\r\n        private List&lt;String&gt; keys;\r\n    //Getters and Setters\r\n    }","title":"How to convert nested Json to Map in java","body":"<p>I am trying to read nested json and convert that into a Map. I am able to parse json to java objects but not able to convert to map from those java objects.</p>\n<p>Following is the json</p>\n<pre><code>&quot;sources&quot;: [\n    {\n      &quot;database&quot;: {\n        &quot;dbConnectionId&quot;: &quot;TestDBConnectionId&quot;,\n        &quot;tableNames&quot;: [\n          {\n            &quot;tableName&quot;: &quot;TestTableName011&quot;,\n            &quot;keys&quot;: [&quot;column010, column011&quot;]\n          },\n          {\n            &quot;tableName&quot;: &quot;TestTableName012&quot;,\n            &quot;keys&quot;: [&quot;column020, column021&quot;]\n          }\n        ]\n      }\n    }\n  ]\n\nCreated Java object as follows:- \n\npublic class Sources {\n    private Database database;\n//Getters and Setters\n}\n\npublic class Database {\n\n    private String dbConnectionId;\n    private List&lt;TableNames&gt; tableNames;\n//Getters and Setters\n}\n\npublic class TableNames {\n\n    private String tableName;\n    private List&lt;String&gt; keys;\n//Getters and Setters\n}\n</code></pre>\n"},{"tags":["java","arrays","multidimensional-array"],"comments":[{"owner":{"account_id":255665,"reputation":232816,"user_id":535871,"accept_rate":84,"display_name":"Ted Hopp"},"score":3,"creation_date":1481859742,"post_id":41176921,"comment_id":69554242,"body_markdown":"What needs fixing? Please describe the desired and actual results of your code. _&quot;Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself.&quot;_","body":"What needs fixing? Please describe the desired and actual results of your code. <i>&quot;Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself.&quot;</i>"},{"owner":{"account_id":4146553,"reputation":32805,"user_id":5743988,"accept_rate":67,"display_name":"4castle"},"score":1,"creation_date":1481859880,"post_id":41176921,"comment_id":69554273,"body_markdown":"`Math.abs(n % 2)` should be `n.nextInt(2)`","body":"<code>Math.abs(n % 2)</code> should be <code>n.nextInt(2)</code>"},{"owner":{"account_id":3557625,"reputation":198996,"user_id":2970947,"display_name":"Elliott Frisch"},"score":1,"creation_date":1481860040,"post_id":41176921,"comment_id":69554321,"body_markdown":"You could use `arry[i][j] = n.nextBoolean() ? 1 : 0;`. But your instructions say takes &quot;an int 2D array that is randomly filled with 0s and 1s&quot;; I believe you should be filling the array before calling the method.","body":"You could use <code>arry[i][j] = n.nextBoolean() ? 1 : 0;</code>. But your instructions say takes &quot;an int 2D array that is randomly filled with 0s and 1s&quot;; I believe you should be filling the array before calling the method."}],"answers":[{"tags":[],"owner":{"account_id":9365912,"reputation":119,"user_id":6950834,"display_name":"Yusuf Ko&#231;ak"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1481864414,"creation_date":1481864414,"answer_id":41177538,"question_id":41176921,"body_markdown":"Array data insertion error!\r\n\r\n\r\n          for (int i = 0; i &lt; arry.length; i++) {\r\n            for (int j = 0; j &lt; arry[0].length; j++) {\r\n                arry[i][j] = n.nextInt(2);//Change\r\n\r\n                if (arry[i][j] == 0) {\r\n                    z++;\r\n                }\r\n                if (arry[i][j] == 1) {\r\n                    x++;\r\n                }\r\n            \r\n            }","title":"Filling 2D array results in Bad operand types for binary operator &#39;%&#39; error","body":"<p>Array data insertion error!</p>\n\n<pre><code>      for (int i = 0; i &lt; arry.length; i++) {\n        for (int j = 0; j &lt; arry[0].length; j++) {\n            arry[i][j] = n.nextInt(2);//Change\n\n            if (arry[i][j] == 0) {\n                z++;\n            }\n            if (arry[i][j] == 1) {\n                x++;\n            }\n\n        }\n</code></pre>\n"}],"owner":{"account_id":9646581,"reputation":65,"user_id":7159134,"display_name":"Rebecca L"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":340,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1639304337,"creation_date":1481859566,"question_id":41176921,"body_markdown":"I have to write a method that takes in an int 2D array \r\n that is randomly filled with 0s and 1s\r\n and prints out how many 0s and 1s there are. But the code below results in the error saying &quot;Bad operand types for binary operator &#39;%&#39; error&quot;. Please help me fix this.\r\n\r\n\r\n&lt;my code&gt;\r\n\r\n    import java.util.Random;\r\n    \r\n    \r\n    public class Randomfilled {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tint[][] arry = new int[3][4];\r\n    \t\tarrays(arry);\r\n    \t}\r\n    \r\n    \tpublic static void arrays(int[][] arry) {\r\n    \r\n    \t\tRandom n = new Random();\r\n    \t\tint z = 0;\r\n    \t\tint x = 0;\r\n    \t\tfor (int i = 0; i &lt; arry.length; i++) {\r\n    \t\t\tfor (int j = 0; j &lt; arry[0].length; j++) {\r\n    \t\t\t\tarry[i][j] = Math.abs(n % 2);\r\n    \r\n    \t\t\t\tif (arry[i][j] == 0) {\r\n    \t\t\t\t\tz++;\r\n    \t\t\t\t}\r\n    \t\t\t\tif (arry[i][j] == 1) {\r\n    \t\t\t\t\tx++;\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \r\n    \t\t}\r\n    \t}\r\n    }","title":"Filling 2D array results in Bad operand types for binary operator &#39;%&#39; error","body":"<p>I have to write a method that takes in an int 2D array\nthat is randomly filled with 0s and 1s\nand prints out how many 0s and 1s there are. But the code below results in the error saying &quot;Bad operand types for binary operator '%' error&quot;. Please help me fix this.</p>\n\n<pre><code>import java.util.Random;\n\n\npublic class Randomfilled {\n\n    public static void main(String[] args) {\n        int[][] arry = new int[3][4];\n        arrays(arry);\n    }\n\n    public static void arrays(int[][] arry) {\n\n        Random n = new Random();\n        int z = 0;\n        int x = 0;\n        for (int i = 0; i &lt; arry.length; i++) {\n            for (int j = 0; j &lt; arry[0].length; j++) {\n                arry[i][j] = Math.abs(n % 2);\n\n                if (arry[i][j] == 0) {\n                    z++;\n                }\n                if (arry[i][j] == 1) {\n                    x++;\n                }\n            }\n\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","sonarqube"],"comments":[{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1639061695,"post_id":70291775,"comment_id":124256636,"body_markdown":"maybe put it next to one of the attributes? Aside from this, you can disable duplicate code warnings altogether if you want this.","body":"maybe put it next to one of the attributes? Aside from this, you can disable duplicate code warnings altogether if you want this."},{"owner":{"account_id":3992180,"reputation":1524,"user_id":3290745,"display_name":"Tristate"},"score":0,"creation_date":1639068668,"post_id":70291775,"comment_id":124259795,"body_markdown":"Also not worked.","body":"Also not worked."}],"answers":[{"tags":[],"owner":{"account_id":11977399,"reputation":637,"user_id":8764150,"display_name":"Djordje Nedovic"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1639303285,"creation_date":1639303285,"answer_id":70322528,"question_id":70291775,"body_markdown":"On official documentation, there is a page about [Narrowing the Focus][1]\r\n\r\n&gt; SonarQube gives you several options for configuring exactly what will\r\n&gt; be analyzed. You can\r\n&gt; \r\n&gt;  - completely ignore some files or directories\r\n&gt;  - exclude files/directories    from Coverage calculations but analyze all other aspects\r\n&gt;  - ***exclude files/directories from Duplications detection but analyze all other    aspects***\r\n&gt;  - exclude files/directories from Issues detection (specific rules or all of them) but analyze all other aspects\r\n\r\nThere you can find **Ignore Duplications** section:\r\n\r\n&gt; **Ignore Duplications**\r\n&gt;\r\n&gt; You can prevent some files from being checked for duplications.\r\n&gt; \r\n&gt; To do so, go to Project Settings &gt; General Settings &gt; Analysis Scope &gt;\r\n&gt; Duplications and set the Duplication Exclusions property. See the\r\n&gt; Patterns section for more details on the syntax.\r\n\r\n\r\n  [1]: https://docs.sonarqube.org/latest/project-administration/narrowing-the-focus/","title":"How to ignore Sonars Duplicate Code Block Warning","body":"<p>On official documentation, there is a page about <a href=\"https://docs.sonarqube.org/latest/project-administration/narrowing-the-focus/\" rel=\"nofollow noreferrer\">Narrowing the Focus</a></p>\n<blockquote>\n<p>SonarQube gives you several options for configuring exactly what will\nbe analyzed. You can</p>\n<ul>\n<li>completely ignore some files or directories</li>\n<li>exclude files/directories    from Coverage calculations but analyze all other aspects</li>\n<li><em><strong>exclude files/directories from Duplications detection but analyze all other    aspects</strong></em></li>\n<li>exclude files/directories from Issues detection (specific rules or all of them) but analyze all other aspects</li>\n</ul>\n</blockquote>\n<p>There you can find <strong>Ignore Duplications</strong> section:</p>\n<blockquote>\n<p><strong>Ignore Duplications</strong></p>\n<p>You can prevent some files from being checked for duplications.</p>\n<p>To do so, go to Project Settings &gt; General Settings &gt; Analysis Scope &gt;\nDuplications and set the Duplication Exclusions property. See the\nPatterns section for more details on the syntax.</p>\n</blockquote>\n"}],"owner":{"account_id":3992180,"reputation":1524,"user_id":3290745,"display_name":"Tristate"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2399,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1639303285,"creation_date":1639060738,"question_id":70291775,"body_markdown":"Let say I have a class like this.\r\n\r\n    public class ApplicationInfoDTO implements IdInc {\r\n\r\n    private String applicationName;\r\n    private String description;\r\n    private String version;\r\n    private String releaseDate;\r\n    private List&lt;String&gt; registeredServicesList;\r\n    ... and soome other fields\r\n\r\nAll the fields are marked by Sonar as duplicated Code Block, actually it make no sense to rename fields or solve this with inheritance.\r\n\r\nAt this point I want to ignore this warning. I put a // NOSONAR like this.\r\n\r\n    public class ApplicationInfoDTO implements IdInc { // NOSONAR\r\n\r\nalso I try it with // NOSONAR after a package declaration. Both not worked.\r\n\r\nHow I can add an ignore flag?","title":"How to ignore Sonars Duplicate Code Block Warning","body":"<p>Let say I have a class like this.</p>\n<pre><code>public class ApplicationInfoDTO implements IdInc {\n\nprivate String applicationName;\nprivate String description;\nprivate String version;\nprivate String releaseDate;\nprivate List&lt;String&gt; registeredServicesList;\n... and soome other fields\n</code></pre>\n<p>All the fields are marked by Sonar as duplicated Code Block, actually it make no sense to rename fields or solve this with inheritance.</p>\n<p>At this point I want to ignore this warning. I put a // NOSONAR like this.</p>\n<pre><code>public class ApplicationInfoDTO implements IdInc { // NOSONAR\n</code></pre>\n<p>also I try it with // NOSONAR after a package declaration. Both not worked.</p>\n<p>How I can add an ignore flag?</p>\n"},{"tags":["java","jpa","java-8","hibernate-jpa"],"comments":[{"owner":{"account_id":5877498,"reputation":2130,"user_id":4627942,"accept_rate":25,"display_name":"Hasnain Ali Bohra"},"score":0,"creation_date":1639287329,"post_id":70321110,"comment_id":124307886,"body_markdown":"entity.getId will work.https://stackoverflow.com/questions/9732453/jpa-returning-an-auto-generated-id-after-persist","body":"entity.getId will work.<a href=\"https://stackoverflow.com/questions/9732453/jpa-returning-an-auto-generated-id-after-persist\" title=\"jpa returning an auto generated id after persist\">stackoverflow.com/questions/9732453/&hellip;</a>"},{"owner":{"account_id":17763021,"reputation":3757,"user_id":12898581,"display_name":"Dhanusha_Perera07"},"score":0,"creation_date":1639287747,"post_id":70321110,"comment_id":124307926,"body_markdown":"@HasnainAliBohra, \n\nPlease notice that since `T extends SuperEntity` I cannot use `entity.getId()` in `save(T entity)` method in `CrudDAOImpl.java`. If I type `entity.` InteliJ IDE also does not suggest a `getId()` method.","body":"@HasnainAliBohra,   Please notice that since <code>T extends SuperEntity</code> I cannot use <code>entity.getId()</code> in <code>save(T entity)</code> method in <code>CrudDAOImpl.java</code>. If I type <code>entity.</code> InteliJ IDE also does not suggest a <code>getId()</code> method."},{"owner":{"account_id":5877498,"reputation":2130,"user_id":4627942,"accept_rate":25,"display_name":"Hasnain Ali Bohra"},"score":1,"creation_date":1639287932,"post_id":70321110,"comment_id":124307947,"body_markdown":"you can add method in the SuperEntity. There is no way around. You can extend the SuperEntity and add method.","body":"you can add method in the SuperEntity. There is no way around. You can extend the SuperEntity and add method."},{"owner":{"account_id":18485634,"reputation":2328,"user_id":13466689,"display_name":"Faheem azaz Bhanej"},"score":0,"creation_date":1639289049,"post_id":70321110,"comment_id":124308064,"body_markdown":"@Dhanusha_Perera07 Are you sure your data pass into database perfectly and can you please show me your entity","body":"@Dhanusha_Perera07 Are you sure your data pass into database perfectly and can you please show me your entity"},{"owner":{"account_id":17763021,"reputation":3757,"user_id":12898581,"display_name":"Dhanusha_Perera07"},"score":0,"creation_date":1639299854,"post_id":70321110,"comment_id":124309570,"body_markdown":"@FaeemazazBhanej, Of course, I have edited my post and I have added the `Employee.java` class. Please check that out let me know If I have missed something but as @HasnainAliBohra suggested, I have tried to use the `SuperEntity.java` interface. I could persist an Employee object successfully. I will post what I did as an answer ASAP.","body":"@FaeemazazBhanej, Of course, I have edited my post and I have added the <code>Employee.java</code> class. Please check that out let me know If I have missed something but as @HasnainAliBohra suggested, I have tried to use the <code>SuperEntity.java</code> interface. I could persist an Employee object successfully. I will post what I did as an answer ASAP."}],"answers":[{"tags":[],"owner":{"account_id":17763021,"reputation":3757,"user_id":12898581,"display_name":"Dhanusha_Perera07"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1639303102,"creation_date":1639302400,"answer_id":70322428,"question_id":70321110,"body_markdown":"If you are interested here&#39;s what I have done. I have used `SuperEntity.java` as @HasnainAliBohra suggested.\r\n\r\n1. Add a `getId()` method to `SuperEntity.java`.\r\n\r\n```java\r\npackage com.elephasvacation.tms.web.entity;\r\n\r\nimport java.io.Serializable;\r\n\r\npublic interface SuperEntity extends Serializable {\r\n\r\n    &lt;T extends Serializable&gt; T getId();\r\n}\r\n```\r\n\r\n - Mostly, generated ID will be a `java.lang.Integer`, So it is `Serializable`.\r\n\r\n2. Create a getter for the `id` attribute in `Employee.java`. Please note that I have used `Project Lombok`. So, the `@Data` annotation generates the getter for the `id` attribute.\r\n\r\nAnyhow, getter method looks like this:\r\n\r\n```java\r\n// Employee.java class\r\npublic Integer getId() {\r\n  return id;\r\n}\r\n```\r\n\r\n3. Change the `save()` method in `CrudDAOImpl.java` as follows:\r\n\r\n```java\r\n    @Override\r\n    public Integer save(T entity) throws Exception {\r\n        this.entityManager.persist(entity);\r\n        this.entityManager.flush();\r\n        return entity.getId(); // Let&#39;s return the generated ID here.\r\n    }\r\n```\r\n\r\n 4. Testing what I have done (with `JUnit4`).\r\n\r\n```java\r\npackage com.elephasvacation.tms.web.dal.custom.impl;\r\n\r\nimport com.elephasvacation.tms.web.dal.DAOFactory;\r\nimport com.elephasvacation.tms.web.dal.DAOTypes;\r\nimport com.elephasvacation.tms.web.dal.custom.EmployeeDAO;\r\nimport com.elephasvacation.tms.web.entity.Employee;\r\nimport com.elephasvacation.tms.web.entity.enumeration.GenderTypes;\r\nimport com.elephasvacation.tms.web.util.HibernateUtil;\r\nimport org.junit.After;\r\nimport org.junit.Before;\r\nimport org.junit.Test;\r\n\r\nimport javax.persistence.EntityManager;\r\nimport javax.persistence.EntityManagerFactory;\r\nimport java.time.LocalDate;\r\n\r\nimport static org.junit.Assert.assertNotNull;\r\n\r\npublic class EmployeeDAOImplTest {\r\n\r\n    private final EmployeeDAO employeeDAO = DAOFactory.getInstance().getDAO(DAOTypes.EMPLOYEE);\r\n    private EntityManagerFactory emf;\r\n    private EntityManager em;\r\n\r\n    @Before\r\n    public void setUp() {\r\n        try {\r\n            /* get EntityManagerFactory. */\r\n            this.emf = HibernateUtil.getEntityManagerFactory();\r\n            /* creates EntityManager. */\r\n            this.em = emf.createEntityManager();\r\n\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    @After\r\n    public void tearDown() {\r\n        /* close the EntityManagerFactory and EntityManager. */\r\n        if (em != null) {\r\n            em.close();\r\n            emf.close();\r\n        }\r\n    }\r\n\r\n    @Test\r\n    public void save() {\r\n        try {\r\n            /* begins the transaction. */\r\n            this.em.getTransaction().begin();\r\n\r\n            /* set EntityManager. */\r\n            this.employeeDAO.setEntityManager(this.em);\r\n\r\n            /* creates a new Employee object. */\r\n            Employee john = new Employee(&quot;John Doe&quot;,\r\n                    &quot;New York&quot;,\r\n                    LocalDate.of(1991, 01, 01),\r\n                    &quot;112233445566&quot;,\r\n                    &quot;03321234567&quot;,\r\n                    &quot;john.test@gmail.com&quot;,\r\n                    GenderTypes.MALE,\r\n                    &quot;Trainee&quot;,\r\n                    &quot;Active&quot;);\r\n\r\n            /* saving the Employee. */\r\n            Integer generatedEmployeeId = this.employeeDAO.save(john);\r\n\r\n            /* assert */\r\n            assertNotNull(generatedEmployeeId);\r\n\r\n            /* print the generated ID on the terminal. */\r\n            System.out.println(&quot;Generated Employee ID: &quot; + generatedEmployeeId);\r\n\r\n            /* committing the transaction. */\r\n            this.em.getTransaction().commit();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\n 5. Test case did run successfully and the database record persisted in the `employee` table.\r\n\r\n 5.1 Terminal output\r\n[![Saving-An-Employee-Object-Terminal screenshot][1]][1]\r\n\r\n 5.2 Database record screenshot.\r\n[![Database-record-screenshot][2]][2]\r\n\r\n\r\nHope you find something useful, thank you.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/jEee7.png\r\n  [2]: https://i.stack.imgur.com/ehzFj.png","title":"How to return the genarated ID in CrudDAOImpl.java when using Hibernate-JPA","body":"<p>If you are interested here's what I have done. I have used <code>SuperEntity.java</code> as @HasnainAliBohra suggested.</p>\n<ol>\n<li>Add a <code>getId()</code> method to <code>SuperEntity.java</code>.</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>package com.elephasvacation.tms.web.entity;\n\nimport java.io.Serializable;\n\npublic interface SuperEntity extends Serializable {\n\n    &lt;T extends Serializable&gt; T getId();\n}\n</code></pre>\n<ul>\n<li>Mostly, generated ID will be a <code>java.lang.Integer</code>, So it is <code>Serializable</code>.</li>\n</ul>\n<ol start=\"2\">\n<li>Create a getter for the <code>id</code> attribute in <code>Employee.java</code>. Please note that I have used <code>Project Lombok</code>. So, the <code>@Data</code> annotation generates the getter for the <code>id</code> attribute.</li>\n</ol>\n<p>Anyhow, getter method looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Employee.java class\npublic Integer getId() {\n  return id;\n}\n</code></pre>\n<ol start=\"3\">\n<li>Change the <code>save()</code> method in <code>CrudDAOImpl.java</code> as follows:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>    @Override\n    public Integer save(T entity) throws Exception {\n        this.entityManager.persist(entity);\n        this.entityManager.flush();\n        return entity.getId(); // Let's return the generated ID here.\n    }\n</code></pre>\n<ol start=\"4\">\n<li>Testing what I have done (with <code>JUnit4</code>).</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>package com.elephasvacation.tms.web.dal.custom.impl;\n\nimport com.elephasvacation.tms.web.dal.DAOFactory;\nimport com.elephasvacation.tms.web.dal.DAOTypes;\nimport com.elephasvacation.tms.web.dal.custom.EmployeeDAO;\nimport com.elephasvacation.tms.web.entity.Employee;\nimport com.elephasvacation.tms.web.entity.enumeration.GenderTypes;\nimport com.elephasvacation.tms.web.util.HibernateUtil;\nimport org.junit.After;\nimport org.junit.Before;\nimport org.junit.Test;\n\nimport javax.persistence.EntityManager;\nimport javax.persistence.EntityManagerFactory;\nimport java.time.LocalDate;\n\nimport static org.junit.Assert.assertNotNull;\n\npublic class EmployeeDAOImplTest {\n\n    private final EmployeeDAO employeeDAO = DAOFactory.getInstance().getDAO(DAOTypes.EMPLOYEE);\n    private EntityManagerFactory emf;\n    private EntityManager em;\n\n    @Before\n    public void setUp() {\n        try {\n            /* get EntityManagerFactory. */\n            this.emf = HibernateUtil.getEntityManagerFactory();\n            /* creates EntityManager. */\n            this.em = emf.createEntityManager();\n\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    @After\n    public void tearDown() {\n        /* close the EntityManagerFactory and EntityManager. */\n        if (em != null) {\n            em.close();\n            emf.close();\n        }\n    }\n\n    @Test\n    public void save() {\n        try {\n            /* begins the transaction. */\n            this.em.getTransaction().begin();\n\n            /* set EntityManager. */\n            this.employeeDAO.setEntityManager(this.em);\n\n            /* creates a new Employee object. */\n            Employee john = new Employee(&quot;John Doe&quot;,\n                    &quot;New York&quot;,\n                    LocalDate.of(1991, 01, 01),\n                    &quot;112233445566&quot;,\n                    &quot;03321234567&quot;,\n                    &quot;john.test@gmail.com&quot;,\n                    GenderTypes.MALE,\n                    &quot;Trainee&quot;,\n                    &quot;Active&quot;);\n\n            /* saving the Employee. */\n            Integer generatedEmployeeId = this.employeeDAO.save(john);\n\n            /* assert */\n            assertNotNull(generatedEmployeeId);\n\n            /* print the generated ID on the terminal. */\n            System.out.println(&quot;Generated Employee ID: &quot; + generatedEmployeeId);\n\n            /* committing the transaction. */\n            this.em.getTransaction().commit();\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n\n    }\n\n}\n\n</code></pre>\n<ol start=\"5\">\n<li>Test case did run successfully and the database record persisted in the <code>employee</code> table.</li>\n</ol>\n<p>5.1 Terminal output\n<a href=\"https://i.stack.imgur.com/jEee7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jEee7.png\" alt=\"Saving-An-Employee-Object-Terminal screenshot\" /></a></p>\n<p>5.2 Database record screenshot.\n<a href=\"https://i.stack.imgur.com/ehzFj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ehzFj.png\" alt=\"Database-record-screenshot\" /></a></p>\n<p>Hope you find something useful, thank you.</p>\n"}],"owner":{"account_id":17763021,"reputation":3757,"user_id":12898581,"display_name":"Dhanusha_Perera07"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1639303102,"creation_date":1639286045,"question_id":70321110,"body_markdown":"I use the hibernate-JPA implementation (v5.6.1.Final) in my project.\r\n\r\nI have implemented the data access layer as follows:\r\n\r\n1. Class Visualization Diagram.\r\n\r\n[![Class Visualization Diagram before using CrudDAOImpl][1]][1]\r\n\r\n1.1 `Employee.java` Entity\r\n\r\n```java\r\npackage com.elephasvacation.tms.web.entity;\r\n\r\nimport com.elephasvacation.tms.web.entity.enumeration.GenderTypes;\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Data;\r\nimport lombok.NoArgsConstructor;\r\n\r\nimport javax.persistence.*;\r\nimport java.time.LocalDate;\r\nimport java.time.LocalDateTime;\r\n\r\n@Entity\r\n@Table(name = &quot;employee&quot;)\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\npublic class Employee implements SuperEntity {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;id&quot;, nullable = false)\r\n    private Integer id;\r\n\r\n    @Column(name = &quot;name&quot;, nullable = false, length = 200)\r\n    private String name;\r\n\r\n    @Lob\r\n    @Column(name = &quot;address&quot;)\r\n    private String address;\r\n\r\n    @Column(name = &quot;date_of_birth&quot;)\r\n    private LocalDate dateOfBirth;\r\n\r\n    @Column(name = &quot;nic&quot;, length = 45)\r\n    private String nic;\r\n\r\n    @Column(name = &quot;contact&quot;, length = 45)\r\n    private String contact;\r\n\r\n    @Column(name = &quot;email&quot;, length = 200)\r\n    private String email;\r\n\r\n    @Column(name = &quot;gender&quot;, length = 20)\r\n    private GenderTypes gender;\r\n\r\n    @Column(name = &quot;position&quot;, length = 45)\r\n    private String position;\r\n\r\n    @Column(name = &quot;status&quot;, length = 45)\r\n    private String status;\r\n\r\n    @Column(name = &quot;created&quot;)\r\n    private LocalDateTime created;\r\n\r\n    @Column(name = &quot;updated&quot;)\r\n    private LocalDateTime updated;\r\n\r\n    /* Constructor with ID attribute. */\r\n    public Employee(Integer id,\r\n                    String name,\r\n                    String address,\r\n                    LocalDate dateOfBirth,\r\n                    String nic,\r\n                    String contact,\r\n                    String email,\r\n                    GenderTypes gender,\r\n                    String position,\r\n                    String status) {\r\n        this.id = id;\r\n        this.name = name;\r\n        this.address = address;\r\n        this.dateOfBirth = dateOfBirth;\r\n        this.nic = nic;\r\n        this.contact = contact;\r\n        this.email = email;\r\n        this.gender = gender;\r\n        this.position = position;\r\n        this.status = status;\r\n    }\r\n\r\n    /* Constructor without ID attribute. */\r\n    public Employee(String name,\r\n                    String address,\r\n                    LocalDate dateOfBirth,\r\n                    String nic,\r\n                    String contact,\r\n                    String email,\r\n                    GenderTypes gender,\r\n                    String position,\r\n                    String status) {\r\n        this.name = name;\r\n        this.address = address;\r\n        this.dateOfBirth = dateOfBirth;\r\n        this.nic = nic;\r\n        this.contact = contact;\r\n        this.email = email;\r\n        this.gender = gender;\r\n        this.position = position;\r\n        this.status = status;\r\n    }\r\n\r\n    @PrePersist\r\n    public void creationTimeStamps() {\r\n        created = LocalDateTime.now();\r\n    }\r\n\r\n\r\n    @PreUpdate\r\n    public void updateTimeStamps() {\r\n        updated = LocalDateTime.now();\r\n    }\r\n\r\n}\r\n```\r\n\r\nI want to return the Generated ID when an object is persisted successfully. So, I Implemented `EmployeeDAOImpl.java` as follows:\r\n\r\n1.2 `EmployeeDAOImpl.java`\r\n\r\n```java\r\npackage com.elephasvacation.tms.web.dal.custom.impl;\r\n\r\nimport com.elephasvacation.tms.web.dal.custom.EmployeeDAO;\r\nimport com.elephasvacation.tms.web.entity.Employee;\r\n\r\nimport javax.persistence.EntityManager;\r\nimport javax.persistence.Query;\r\nimport java.util.List;\r\n\r\npublic class EmployeeDAOImpl implements EmployeeDAO {\r\n\r\n    private EntityManager entityManager;\r\n\r\n    @Override\r\n    public void setEntityManager(EntityManager entityManager) {\r\n        this.entityManager = entityManager;\r\n    }\r\n\r\n    @Override\r\n    public Integer save(Employee employee) throws Exception {\r\n        this.entityManager.persist(employee);\r\n        //  call the flush method on EntityManager manually, because we need to get the Generated ID\r\n        this.entityManager.flush();\r\n        return employee.getId(); // here, generated ID will be returned.\r\n    }\r\n\r\n    @Override\r\n    public void update(Employee employee) throws Exception {\r\n        this.entityManager.merge(employee);\r\n    }\r\n\r\n    @Override\r\n    public void delete(Integer key) throws Exception {\r\n        this.entityManager.remove(this.entityManager.find(Employee.class, key));\r\n    }\r\n\r\n    @Override\r\n    public Employee get(Integer key) throws Exception {\r\n        return this.entityManager.find(Employee.class, key);\r\n    }\r\n\r\n\r\n    @Override\r\n    public List&lt;Employee&gt; getAll() throws Exception {\r\n        Query allEmployeesQuery = this.entityManager.createQuery(&quot;SELECT e FROM Employee e&quot;);\r\n        return (List&lt;Employee&gt;) allEmployeesQuery.getResultList();\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\n\r\n\r\nI am refactoring the code as follows:\r\n- by creating `CrudDAOImpl.java`\r\n\r\n2. Class Visualization Diagram After Using `CrudDAOImpl.java`\r\n[![Class Visualization Diagram After Using `CrudDAOImpl.java`][2]][2]\r\n\r\n2.1 `CrudDAOImpl.java`\r\n\r\n```java\r\npackage com.elephasvacation.tms.web.dal;\r\n\r\nimport com.elephasvacation.tms.web.entity.SuperEntity;\r\n\r\nimport javax.persistence.EntityManager;\r\nimport javax.persistence.TypedQuery;\r\nimport java.io.Serializable;\r\nimport java.lang.reflect.ParameterizedType;\r\nimport java.util.List;\r\n\r\npublic class CrudDAOImpl&lt;T extends SuperEntity, K extends Serializable&gt; implements CrudDAO&lt;T, K&gt; {\r\n\r\n    private EntityManager entityManager;\r\n    private Class&lt;T&gt; entityClass;\r\n\r\n    public CrudDAOImpl() {\r\n        this.entityClass =\r\n                (Class&lt;T&gt;) (((ParameterizedType) (this.getClass().getGenericSuperclass())).getActualTypeArguments()[0]);\r\n    }\r\n\r\n  /** This method is used to pass the EntityManager to the lower level classes that extend the CrudDAOImpl class.\r\n    *  */\r\n    protected EntityManager getEntityManager(){\r\n        return this.entityManager;\r\n    }\r\n\r\n    @Override\r\n    public void setEntityManager(EntityManager entityManager) {\r\n        this.entityManager = entityManager;\r\n    }\r\n\r\n    @Override\r\n    public Integer save(T entity) throws Exception {\r\n\r\n        /* If native hibernate is used in my project. I can do something like this;\r\n        this will return the generated ID:\r\n        * this.session.save(entity);\r\n        *\r\n        * Since I go with hibernate-JPA implementation I want to do the same thing in this method. */\r\n\r\n        this.entityManager.persist(entity);\r\n        this.entityManager.flush();\r\n\r\n        return null; // I want to return the generated ID here.\r\n    }\r\n\r\n    @Override\r\n    public void update(T entity) throws Exception {\r\n        this.entityManager.merge(entity);\r\n    }\r\n\r\n    @Override\r\n    public void delete(K key) throws Exception {\r\n        this.entityManager.remove(key);\r\n    }\r\n\r\n    @Override\r\n    public T get(K key) throws Exception {\r\n        return this.entityManager.find(this.entityClass, key);\r\n    }\r\n\r\n    @Override\r\n    public List&lt;T&gt; getAll() throws Exception {\r\n        TypedQuery&lt;T&gt; query =\r\n                this.entityManager.createQuery(&quot;SELECT &quot; + (this.entityClass.getName()), this.entityClass);\r\n        return query.getResultList();\r\n    }\r\n}\r\n```\r\n\r\nI would appreciate it if you could please suggest to me a way to return the generated ID when an object persists in the database. Thanks in advance.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/eHRRR.png\r\n  [2]: https://i.stack.imgur.com/geSO5.png","title":"How to return the genarated ID in CrudDAOImpl.java when using Hibernate-JPA","body":"<p>I use the hibernate-JPA implementation (v5.6.1.Final) in my project.</p>\n<p>I have implemented the data access layer as follows:</p>\n<ol>\n<li>Class Visualization Diagram.</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/eHRRR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eHRRR.png\" alt=\"Class Visualization Diagram before using CrudDAOImpl\" /></a></p>\n<p>1.1 <code>Employee.java</code> Entity</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.elephasvacation.tms.web.entity;\n\nimport com.elephasvacation.tms.web.entity.enumeration.GenderTypes;\nimport lombok.AllArgsConstructor;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport javax.persistence.*;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\n\n@Entity\n@Table(name = &quot;employee&quot;)\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\npublic class Employee implements SuperEntity {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;id&quot;, nullable = false)\n    private Integer id;\n\n    @Column(name = &quot;name&quot;, nullable = false, length = 200)\n    private String name;\n\n    @Lob\n    @Column(name = &quot;address&quot;)\n    private String address;\n\n    @Column(name = &quot;date_of_birth&quot;)\n    private LocalDate dateOfBirth;\n\n    @Column(name = &quot;nic&quot;, length = 45)\n    private String nic;\n\n    @Column(name = &quot;contact&quot;, length = 45)\n    private String contact;\n\n    @Column(name = &quot;email&quot;, length = 200)\n    private String email;\n\n    @Column(name = &quot;gender&quot;, length = 20)\n    private GenderTypes gender;\n\n    @Column(name = &quot;position&quot;, length = 45)\n    private String position;\n\n    @Column(name = &quot;status&quot;, length = 45)\n    private String status;\n\n    @Column(name = &quot;created&quot;)\n    private LocalDateTime created;\n\n    @Column(name = &quot;updated&quot;)\n    private LocalDateTime updated;\n\n    /* Constructor with ID attribute. */\n    public Employee(Integer id,\n                    String name,\n                    String address,\n                    LocalDate dateOfBirth,\n                    String nic,\n                    String contact,\n                    String email,\n                    GenderTypes gender,\n                    String position,\n                    String status) {\n        this.id = id;\n        this.name = name;\n        this.address = address;\n        this.dateOfBirth = dateOfBirth;\n        this.nic = nic;\n        this.contact = contact;\n        this.email = email;\n        this.gender = gender;\n        this.position = position;\n        this.status = status;\n    }\n\n    /* Constructor without ID attribute. */\n    public Employee(String name,\n                    String address,\n                    LocalDate dateOfBirth,\n                    String nic,\n                    String contact,\n                    String email,\n                    GenderTypes gender,\n                    String position,\n                    String status) {\n        this.name = name;\n        this.address = address;\n        this.dateOfBirth = dateOfBirth;\n        this.nic = nic;\n        this.contact = contact;\n        this.email = email;\n        this.gender = gender;\n        this.position = position;\n        this.status = status;\n    }\n\n    @PrePersist\n    public void creationTimeStamps() {\n        created = LocalDateTime.now();\n    }\n\n\n    @PreUpdate\n    public void updateTimeStamps() {\n        updated = LocalDateTime.now();\n    }\n\n}\n</code></pre>\n<p>I want to return the Generated ID when an object is persisted successfully. So, I Implemented <code>EmployeeDAOImpl.java</code> as follows:</p>\n<p>1.2 <code>EmployeeDAOImpl.java</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.elephasvacation.tms.web.dal.custom.impl;\n\nimport com.elephasvacation.tms.web.dal.custom.EmployeeDAO;\nimport com.elephasvacation.tms.web.entity.Employee;\n\nimport javax.persistence.EntityManager;\nimport javax.persistence.Query;\nimport java.util.List;\n\npublic class EmployeeDAOImpl implements EmployeeDAO {\n\n    private EntityManager entityManager;\n\n    @Override\n    public void setEntityManager(EntityManager entityManager) {\n        this.entityManager = entityManager;\n    }\n\n    @Override\n    public Integer save(Employee employee) throws Exception {\n        this.entityManager.persist(employee);\n        //  call the flush method on EntityManager manually, because we need to get the Generated ID\n        this.entityManager.flush();\n        return employee.getId(); // here, generated ID will be returned.\n    }\n\n    @Override\n    public void update(Employee employee) throws Exception {\n        this.entityManager.merge(employee);\n    }\n\n    @Override\n    public void delete(Integer key) throws Exception {\n        this.entityManager.remove(this.entityManager.find(Employee.class, key));\n    }\n\n    @Override\n    public Employee get(Integer key) throws Exception {\n        return this.entityManager.find(Employee.class, key);\n    }\n\n\n    @Override\n    public List&lt;Employee&gt; getAll() throws Exception {\n        Query allEmployeesQuery = this.entityManager.createQuery(&quot;SELECT e FROM Employee e&quot;);\n        return (List&lt;Employee&gt;) allEmployeesQuery.getResultList();\n    }\n\n}\n\n</code></pre>\n<p>I am refactoring the code as follows:</p>\n<ul>\n<li>by creating <code>CrudDAOImpl.java</code></li>\n</ul>\n<ol start=\"2\">\n<li>Class Visualization Diagram After Using <code>CrudDAOImpl.java</code>\n<a href=\"https://i.stack.imgur.com/geSO5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/geSO5.png\" alt=\"Class Visualization Diagram After Using CrudDAOImpl.java\" /></a></li>\n</ol>\n<p>2.1 <code>CrudDAOImpl.java</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.elephasvacation.tms.web.dal;\n\nimport com.elephasvacation.tms.web.entity.SuperEntity;\n\nimport javax.persistence.EntityManager;\nimport javax.persistence.TypedQuery;\nimport java.io.Serializable;\nimport java.lang.reflect.ParameterizedType;\nimport java.util.List;\n\npublic class CrudDAOImpl&lt;T extends SuperEntity, K extends Serializable&gt; implements CrudDAO&lt;T, K&gt; {\n\n    private EntityManager entityManager;\n    private Class&lt;T&gt; entityClass;\n\n    public CrudDAOImpl() {\n        this.entityClass =\n                (Class&lt;T&gt;) (((ParameterizedType) (this.getClass().getGenericSuperclass())).getActualTypeArguments()[0]);\n    }\n\n  /** This method is used to pass the EntityManager to the lower level classes that extend the CrudDAOImpl class.\n    *  */\n    protected EntityManager getEntityManager(){\n        return this.entityManager;\n    }\n\n    @Override\n    public void setEntityManager(EntityManager entityManager) {\n        this.entityManager = entityManager;\n    }\n\n    @Override\n    public Integer save(T entity) throws Exception {\n\n        /* If native hibernate is used in my project. I can do something like this;\n        this will return the generated ID:\n        * this.session.save(entity);\n        *\n        * Since I go with hibernate-JPA implementation I want to do the same thing in this method. */\n\n        this.entityManager.persist(entity);\n        this.entityManager.flush();\n\n        return null; // I want to return the generated ID here.\n    }\n\n    @Override\n    public void update(T entity) throws Exception {\n        this.entityManager.merge(entity);\n    }\n\n    @Override\n    public void delete(K key) throws Exception {\n        this.entityManager.remove(key);\n    }\n\n    @Override\n    public T get(K key) throws Exception {\n        return this.entityManager.find(this.entityClass, key);\n    }\n\n    @Override\n    public List&lt;T&gt; getAll() throws Exception {\n        TypedQuery&lt;T&gt; query =\n                this.entityManager.createQuery(&quot;SELECT &quot; + (this.entityClass.getName()), this.entityClass);\n        return query.getResultList();\n    }\n}\n</code></pre>\n<p>I would appreciate it if you could please suggest to me a way to return the generated ID when an object persists in the database. Thanks in advance.</p>\n"},{"tags":["java","proxy","htmlunit","nhtmlunit"],"comments":[{"owner":{"account_id":61892,"reputation":5204,"user_id":184201,"accept_rate":78,"display_name":"Ahmed Ashour"},"score":0,"creation_date":1493187061,"post_id":43620238,"comment_id":74301172,"body_markdown":"Since the used proxy is not public, you need to provide comparison between the HTTP headers using HtmlUnit and the HTTP headers of a real browser.","body":"Since the used proxy is not public, you need to provide comparison between the HTTP headers using HtmlUnit and the HTTP headers of a real browser."},{"owner":{"account_id":61892,"reputation":5204,"user_id":184201,"accept_rate":78,"display_name":"Ahmed Ashour"},"score":0,"creation_date":1493194092,"post_id":43620238,"comment_id":74305291,"body_markdown":"You should also use `new NTCredentials(&quot;username&quot;, &quot;password&quot;, null, null)`","body":"You should also use <code>new NTCredentials(&quot;username&quot;, &quot;password&quot;, null, null)</code>"}],"owner":{"account_id":2419077,"reputation":589,"user_id":2112513,"accept_rate":40,"display_name":"haim"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":312,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1639302931,"creation_date":1493151599,"question_id":43620238,"body_markdown":"i am trying to scrape websites with proxy but i get blocked/access denied.\r\n\r\nthis is my code:\r\n\r\n    this.webClient = new WebClient(BrowserVersion.FIREFOX_52, &quot;190.132.233.13&quot;, 1212);\r\n    this.webClient.getCredentialsProvider().setCredentials(AuthScope.ANY, new NTCredentials(&quot;username&quot;, &quot;password&quot;, &quot;&quot;, &quot;&quot;));\r\n    HtmlPage page = this.webClient.getPage(&quot;http://htmlunit.sourceforge.net&quot;);\r\n\r\n\r\ni am also tried:\r\n\r\n    this.webClient = new WebClient(BrowserVersion.FIREFOX_52, &quot;190.132.233.13&quot;, 1212);\r\n    System.setProperty(&quot;http.proxyHost&quot;, &quot;190.132.233.13&quot;);\r\n    System.setProperty(&quot;http.proxyPort&quot;, &quot;1212&quot;);\r\n    System.setProperty(&quot;java.net.useSystemProxies&quot;, &quot;true&quot;);\r\n    this.webClient.getPage(&quot;http://htmlunit.sourceforge.net&quot;);\r\n\r\n every site i am trying to scrape i am getting:\r\n\r\n    INFO: statusCode=[403] contentType=[text/html]\r\n    INFO: &lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;\r\n        &lt;html&gt;\r\n        \r\n        &lt;head&gt;\r\n            &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot;&gt;\r\n            &lt;title&gt;ERROR: WebSite Blocked / Access to Site Restricted&lt;/title&gt;\r\n            &lt;style type=&quot;text/css&quot;&gt;\r\n                body { background-color: #000000; color: #FFFFFF; font-family: Verdana; }\r\n            &lt;/style&gt;\r\n        &lt;/head&gt;\r\n        \r\n        &lt;body&gt;\r\n        &lt;div id=&quot;titles&quot;&gt;\r\n            &lt;h1&gt;ERROR&lt;/h1&gt;\r\n            &lt;h2&gt;WebSite Blocked / Access to Site Restricted&lt;/h2&gt;\r\n        &lt;/div&gt;\r\n        &lt;hr&gt;&lt;br&gt;&lt;br&gt;\r\n        &lt;div id=&quot;content&quot;&gt;\r\n            &lt;p&gt;Sorry, the access to &#39;http://htmlunit.sourceforge.net/&#39; is restricted.&lt;/p&gt;\r\n            &lt;p&gt;To avoid abuse/spam, we only allow access to generic sites such as www.google.com&lt;/a&gt;.&lt;/p&gt;\r\n            &lt;p&gt;You&#39;ll be able to access http://htmlunit.sourceforge.net/ instantly by adding the domain to your whitelist in the control panel.&lt;/p&gt;\r\n            &lt;p&gt;To add this domain to the whitelist, please read the getting started info on the control panel.&lt;/p&gt;\r\n            &lt;br&gt;\r\n            &lt;p&gt;You may also request to remove this restriction and have full web access by contacting support.&lt;/p&gt;\r\n        &lt;/div&gt;\r\n        &lt;hr&gt;\r\n        &lt;div id=&quot;footer&quot;&gt;\r\n        &lt;/div&gt;\r\n        &lt;/body&gt;\r\n        &lt;!-- squid ERR_ACCESS_DENIED --&gt;\r\n        &lt;/html&gt;\r\n\r\n\r\nI didn&#39;t understand what is the use of getCredentialsProvider function.\r\nthanks for the help. the proxy i use is private proxy.\r\n","title":"htmlunit proxy getting WebSite Blocked / Access to Site Restricted statuscode 403","body":"<p>i am trying to scrape websites with proxy but i get blocked/access denied.</p>\n<p>this is my code:</p>\n<pre><code>this.webClient = new WebClient(BrowserVersion.FIREFOX_52, &quot;190.132.233.13&quot;, 1212);\nthis.webClient.getCredentialsProvider().setCredentials(AuthScope.ANY, new NTCredentials(&quot;username&quot;, &quot;password&quot;, &quot;&quot;, &quot;&quot;));\nHtmlPage page = this.webClient.getPage(&quot;http://htmlunit.sourceforge.net&quot;);\n</code></pre>\n<p>i am also tried:</p>\n<pre><code>this.webClient = new WebClient(BrowserVersion.FIREFOX_52, &quot;190.132.233.13&quot;, 1212);\nSystem.setProperty(&quot;http.proxyHost&quot;, &quot;190.132.233.13&quot;);\nSystem.setProperty(&quot;http.proxyPort&quot;, &quot;1212&quot;);\nSystem.setProperty(&quot;java.net.useSystemProxies&quot;, &quot;true&quot;);\nthis.webClient.getPage(&quot;http://htmlunit.sourceforge.net&quot;);\n</code></pre>\n<p>every site i am trying to scrape i am getting:</p>\n<pre><code>INFO: statusCode=[403] contentType=[text/html]\nINFO: &lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;\n    &lt;html&gt;\n    \n    &lt;head&gt;\n        &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot;&gt;\n        &lt;title&gt;ERROR: WebSite Blocked / Access to Site Restricted&lt;/title&gt;\n        &lt;style type=&quot;text/css&quot;&gt;\n            body { background-color: #000000; color: #FFFFFF; font-family: Verdana; }\n        &lt;/style&gt;\n    &lt;/head&gt;\n    \n    &lt;body&gt;\n    &lt;div id=&quot;titles&quot;&gt;\n        &lt;h1&gt;ERROR&lt;/h1&gt;\n        &lt;h2&gt;WebSite Blocked / Access to Site Restricted&lt;/h2&gt;\n    &lt;/div&gt;\n    &lt;hr&gt;&lt;br&gt;&lt;br&gt;\n    &lt;div id=&quot;content&quot;&gt;\n        &lt;p&gt;Sorry, the access to 'http://htmlunit.sourceforge.net/' is restricted.&lt;/p&gt;\n        &lt;p&gt;To avoid abuse/spam, we only allow access to generic sites such as www.google.com&lt;/a&gt;.&lt;/p&gt;\n        &lt;p&gt;You'll be able to access http://htmlunit.sourceforge.net/ instantly by adding the domain to your whitelist in the control panel.&lt;/p&gt;\n        &lt;p&gt;To add this domain to the whitelist, please read the getting started info on the control panel.&lt;/p&gt;\n        &lt;br&gt;\n        &lt;p&gt;You may also request to remove this restriction and have full web access by contacting support.&lt;/p&gt;\n    &lt;/div&gt;\n    &lt;hr&gt;\n    &lt;div id=&quot;footer&quot;&gt;\n    &lt;/div&gt;\n    &lt;/body&gt;\n    &lt;!-- squid ERR_ACCESS_DENIED --&gt;\n    &lt;/html&gt;\n</code></pre>\n<p>I didn't understand what is the use of getCredentialsProvider function.\nthanks for the help. the proxy i use is private proxy.</p>\n"},{"tags":["java","jdbc","snowflake-cloud-data-platform","private-key"],"comments":[{"owner":{"account_id":10586318,"reputation":4177,"user_id":7798548,"display_name":"Sergiu"},"score":0,"creation_date":1639125325,"post_id":70288494,"comment_id":124273605,"body_markdown":"Are you referring to using a key with passphrase and using a key without? Both are possible and they are documented [here](https://docs.snowflake.com/en/user-guide/key-pair-auth.html#step-1-generate-the-private-key)","body":"Are you referring to using a key with passphrase and using a key without? Both are possible and they are documented <a href=\"https://docs.snowflake.com/en/user-guide/key-pair-auth.html#step-1-generate-the-private-key\" rel=\"nofollow noreferrer\">here</a>"}],"answers":[{"tags":[],"owner":{"account_id":1551684,"reputation":1024,"user_id":1443928,"accept_rate":93,"display_name":"Hard Worker"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1639302471,"creation_date":1639302471,"answer_id":70322437,"question_id":70288494,"body_markdown":"Its possible to create 2 types of users with encrypted private key and decrypted private key, this snippet build the private key object and needs to be added to properties\r\n\r\nthere are 2 instances of - pemObject one for encrypted which requires passPharase and one who dont\r\n\r\n//    **pemObject instanceof PKCS8EncryptedPrivateKeyInfo (encrypted private key)**\r\n// **pemObject instanceof PrivateKeyInfo decypted private key**\r\n\r\n\r\n\r\n    public class PrivateKeyReader {\r\n    \r\n    \r\n    \tpublic static PrivateKey get(File file, String passPhrase)\r\n    \t{\r\n    \t\ttry {\r\n    \t\t\tPrivateKeyInfo privateKeyInfo = null;\r\n    \t\t\tSecurity.addProvider(new BouncyCastleProvider());\r\n    \t\t\t// Read an object from the private key file.\r\n    \t\t\tfinal PEMParser pemParser = new PEMParser(new FileReader(file));\r\n    \t\t\tfinal Object pemObject = pemParser.readObject();\r\n    \t\t\tif (pemObject instanceof PKCS8EncryptedPrivateKeyInfo) {\r\n    \t\t\t\t// Handle the case where the private key is encrypted.\r\n    \t\t\t\tfinal PKCS8EncryptedPrivateKeyInfo encryptedPrivateKeyInfo = (PKCS8EncryptedPrivateKeyInfo) pemObject;\r\n    \t\t\t\tfinal InputDecryptorProvider pkcs8Prov = new JceOpenSSLPKCS8DecryptorProviderBuilder().build(passPhrase.toCharArray());\r\n    \t\t\t\tprivateKeyInfo = encryptedPrivateKeyInfo.decryptPrivateKeyInfo(pkcs8Prov);\r\n    \t\t\t} else if (pemObject instanceof PrivateKeyInfo) {\r\n    \t\t\t\t// Handle the case where the private key is unencrypted.\r\n    \t\t\t\tprivateKeyInfo = (PrivateKeyInfo) pemObject;\r\n    \t\t\t}\r\n    \t\t\tpemParser.close();\r\n    \t\t\tfinal JcaPEMKeyConverter converter = new JcaPEMKeyConverter().setProvider(BouncyCastleProvider.PROVIDER_NAME);\r\n    \t\t\treturn converter.getPrivateKey(privateKeyInfo);\r\n    \t\t} catch (Exception ex){\r\n    \t\t\tthrow new RuntimeException(ex.getMessage(), ex);\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n\r\n\r\n\t\r\nin order to load it to the connection i used:\r\n\r\n    PrivateKey privateKey = PrivateKeyReader.get(tempPublicKeyFile, jdbcDetails.getDecryptedPassPhrase());\r\n    \tp.put(&quot;privateKey&quot;, privateKey);\r\n\r\n","title":"JDBC Connection to Snowflake with Private key - without passphrase","body":"<p>Its possible to create 2 types of users with encrypted private key and decrypted private key, this snippet build the private key object and needs to be added to properties</p>\n<p>there are 2 instances of - pemObject one for encrypted which requires passPharase and one who dont</p>\n<p>//    <strong>pemObject instanceof PKCS8EncryptedPrivateKeyInfo (encrypted private key)</strong>\n// <strong>pemObject instanceof PrivateKeyInfo decypted private key</strong></p>\n<pre><code>public class PrivateKeyReader {\n\n\n    public static PrivateKey get(File file, String passPhrase)\n    {\n        try {\n            PrivateKeyInfo privateKeyInfo = null;\n            Security.addProvider(new BouncyCastleProvider());\n            // Read an object from the private key file.\n            final PEMParser pemParser = new PEMParser(new FileReader(file));\n            final Object pemObject = pemParser.readObject();\n            if (pemObject instanceof PKCS8EncryptedPrivateKeyInfo) {\n                // Handle the case where the private key is encrypted.\n                final PKCS8EncryptedPrivateKeyInfo encryptedPrivateKeyInfo = (PKCS8EncryptedPrivateKeyInfo) pemObject;\n                final InputDecryptorProvider pkcs8Prov = new JceOpenSSLPKCS8DecryptorProviderBuilder().build(passPhrase.toCharArray());\n                privateKeyInfo = encryptedPrivateKeyInfo.decryptPrivateKeyInfo(pkcs8Prov);\n            } else if (pemObject instanceof PrivateKeyInfo) {\n                // Handle the case where the private key is unencrypted.\n                privateKeyInfo = (PrivateKeyInfo) pemObject;\n            }\n            pemParser.close();\n            final JcaPEMKeyConverter converter = new JcaPEMKeyConverter().setProvider(BouncyCastleProvider.PROVIDER_NAME);\n            return converter.getPrivateKey(privateKeyInfo);\n        } catch (Exception ex){\n            throw new RuntimeException(ex.getMessage(), ex);\n        }\n    }\n}\n</code></pre>\n<p>in order to load it to the connection i used:</p>\n<pre><code>PrivateKey privateKey = PrivateKeyReader.get(tempPublicKeyFile, jdbcDetails.getDecryptedPassPhrase());\n    p.put(&quot;privateKey&quot;, privateKey);\n</code></pre>\n"}],"owner":{"account_id":1551684,"reputation":1024,"user_id":1443928,"accept_rate":93,"display_name":"Hard Worker"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1286,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":70322437,"answer_count":1,"score":1,"last_activity_date":1639302471,"creation_date":1639046665,"question_id":70288494,"body_markdown":"I&#39;m working on a Java client based code that is tryint to connect to snowflake JDBC with a private key\r\nI have searched online and found this links:\r\n\r\nhttps://domohelp.domo.com/hc/en-us/articles/360042931854-Snowflake-Using-Key-Pair-Authentication-Connector\r\n\r\nhttps://docs.snowflake.com/en/user-guide/jdbc-configure.html\r\nand other links, all required to use passphrase\r\n\r\nand my code \r\n\r\n\r\n    \t\tProperties p = new Properties();\r\n\t\tp.setProperty(USER, jdbcDetails.username);\r\n\t\tString privateKey = jdbcDetails.getPrivateKey().replace(&quot;-----BEGIN ENCRYPTED PRIVATE KEY-----\\n&quot;, &quot;&quot;);\r\n\t\tprivateKey = privateKey.replace(&quot;\\n-----END ENCRYPTED PRIVATE KEY-----&quot;, &quot;&quot;);\r\n\t\tString passphrase = &quot;abcdefg&quot;;\r\n\t\tEncryptedPrivateKeyInfo pkInfo = new EncryptedPrivateKeyInfo(Base64.getMimeDecoder().decode(privateKey));\r\n\t\tPBEKeySpec keySpec = new PBEKeySpec(passphrase.toCharArray());\r\n\t\tSecretKeyFactory pbeKeyFactory = SecretKeyFactory.getInstance(pkInfo.getAlgName());\r\n\t\tPKCS8EncodedKeySpec encodedKeySpec = pkInfo.getKeySpec(pbeKeyFactory.generateSecret(keySpec));\r\n\t\tKeyFactory keyFactory = KeyFactory.getInstance(&quot;RSA&quot;);\r\n\t\tPrivateKey encryptedPrivateKey = keyFactory.generatePrivate(encodedKeySpec);\r\n\t\tp.put(&quot;privateKey&quot;, encryptedPrivateKey);\r\n\t\treturn p;\r\n\r\nIt seems this code is valid for connection but after talking with our DBA\r\nhe told me that he is able to connect without spesify the passphrase \r\n\r\nwith this command:\r\n\r\n    snowsql -h a-b-c-d.snowflakecomputing.com -a abcd.AWS_US_EAST-1 -u username  -d  INTEGRATION_ENGINE    --private-key-path ~postgres/ADHOC/12345/rsa_key.p8 -q &quot;select 1&quot;\r\n\r\nhow can i connect using jdbc with a private key - and without passspharse ?\r\n\r\n\r\n\r\n","title":"JDBC Connection to Snowflake with Private key - without passphrase","body":"<p>I'm working on a Java client based code that is tryint to connect to snowflake JDBC with a private key\nI have searched online and found this links:</p>\n<p><a href=\"https://domohelp.domo.com/hc/en-us/articles/360042931854-Snowflake-Using-Key-Pair-Authentication-Connector\" rel=\"nofollow noreferrer\">https://domohelp.domo.com/hc/en-us/articles/360042931854-Snowflake-Using-Key-Pair-Authentication-Connector</a></p>\n<p><a href=\"https://docs.snowflake.com/en/user-guide/jdbc-configure.html\" rel=\"nofollow noreferrer\">https://docs.snowflake.com/en/user-guide/jdbc-configure.html</a>\nand other links, all required to use passphrase</p>\n<p>and my code</p>\n<pre><code>        Properties p = new Properties();\n    p.setProperty(USER, jdbcDetails.username);\n    String privateKey = jdbcDetails.getPrivateKey().replace(&quot;-----BEGIN ENCRYPTED PRIVATE KEY-----\\n&quot;, &quot;&quot;);\n    privateKey = privateKey.replace(&quot;\\n-----END ENCRYPTED PRIVATE KEY-----&quot;, &quot;&quot;);\n    String passphrase = &quot;abcdefg&quot;;\n    EncryptedPrivateKeyInfo pkInfo = new EncryptedPrivateKeyInfo(Base64.getMimeDecoder().decode(privateKey));\n    PBEKeySpec keySpec = new PBEKeySpec(passphrase.toCharArray());\n    SecretKeyFactory pbeKeyFactory = SecretKeyFactory.getInstance(pkInfo.getAlgName());\n    PKCS8EncodedKeySpec encodedKeySpec = pkInfo.getKeySpec(pbeKeyFactory.generateSecret(keySpec));\n    KeyFactory keyFactory = KeyFactory.getInstance(&quot;RSA&quot;);\n    PrivateKey encryptedPrivateKey = keyFactory.generatePrivate(encodedKeySpec);\n    p.put(&quot;privateKey&quot;, encryptedPrivateKey);\n    return p;\n</code></pre>\n<p>It seems this code is valid for connection but after talking with our DBA\nhe told me that he is able to connect without spesify the passphrase</p>\n<p>with this command:</p>\n<pre><code>snowsql -h a-b-c-d.snowflakecomputing.com -a abcd.AWS_US_EAST-1 -u username  -d  INTEGRATION_ENGINE    --private-key-path ~postgres/ADHOC/12345/rsa_key.p8 -q &quot;select 1&quot;\n</code></pre>\n<p>how can i connect using jdbc with a private key - and without passspharse ?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":8223,"page":1769,"page_size":100}
