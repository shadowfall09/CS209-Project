{"items":[{"tags":["java","hibernate","spring-mvc","spring-boot","dependency-injection"],"answers":[{"comments":[{"owner":{"account_id":8890266,"reputation":234,"user_id":6637122,"accept_rate":0,"display_name":"Nesquik27"},"score":0,"creation_date":1582067523,"post_id":42476374,"comment_id":106647342,"body_markdown":"I&#39;ve faced with the same problem. Solution also works for me too. I also cannot understand It. Thanks.","body":"I&#39;ve faced with the same problem. Solution also works for me too. I also cannot understand It. Thanks."},{"owner":{"account_id":10057869,"reputation":744,"user_id":7435524,"display_name":"KareemJ"},"score":0,"creation_date":1590033514,"post_id":42476374,"comment_id":109529485,"body_markdown":"Thanks! This worked but don&#39;t quite understand the reason for this error.","body":"Thanks! This worked but don&#39;t quite understand the reason for this error."},{"owner":{"account_id":8463393,"reputation":153,"user_id":6923588,"display_name":"Cyriac George"},"score":1,"creation_date":1601089720,"post_id":42476374,"comment_id":113303806,"body_markdown":"Thanks! This solution worked for me too. My inference is, this has to do with some conflict happening due to the presence of auto configuration done bye HibernateJpaAutoConfiguration and Hibernate configuration done by the rest of the settings (for e.x. XML or Java configurations). So, once we ask Spring to ignore HibernateJpaAutoConfiguration everything&#39;s hunky-dory since there&#39;s no conflict anymore.","body":"Thanks! This solution worked for me too. My inference is, this has to do with some conflict happening due to the presence of auto configuration done bye HibernateJpaAutoConfiguration and Hibernate configuration done by the rest of the settings (for e.x. XML or Java configurations). So, once we ask Spring to ignore HibernateJpaAutoConfiguration everything&#39;s hunky-dory since there&#39;s no conflict anymore."},{"owner":{"account_id":1149936,"reputation":14493,"user_id":1131857,"accept_rate":76,"display_name":"wutzebaer"},"score":0,"creation_date":1604049169,"post_id":42476374,"comment_id":114234110,"body_markdown":"however setting spring.jpa.open-in-view=false solved the problem for me too","body":"however setting spring.jpa.open-in-view=false solved the problem for me too"}],"tags":[],"owner":{"account_id":3238160,"reputation":744,"user_id":2731794,"accept_rate":89,"display_name":"Ulphat"},"comment_count":4,"down_vote_count":0,"up_vote_count":38,"is_accepted":true,"score":38,"last_activity_date":1488158455,"creation_date":1488158455,"answer_id":42476374,"question_id":42476261,"body_markdown":"I added `exclude = HibernateJpaAutoConfiguration.class` property to `@SpringBootApplication` annotation as recomended at https://stackoverflow.com/a/38637273 and all worked normally. But I cannot relatrion problem and solution. And I don&#39;t not know why `registerNewUserAccount(UserDto userDto)` method works at one place and doesn&#39;t work at different place.","title":"ClassCastException: org.springframework.orm.jpa.EntityManagerHolder cannot be cast to org.springframework.orm.hibernate5.SessionHolder","body":"<p>I added <code>exclude = HibernateJpaAutoConfiguration.class</code> property to <code>@SpringBootApplication</code> annotation as recomended at <a href=\"https://stackoverflow.com/a/38637273\">https://stackoverflow.com/a/38637273</a> and all worked normally. But I cannot relatrion problem and solution. And I don't not know why <code>registerNewUserAccount(UserDto userDto)</code> method works at one place and doesn't work at different place.</p>\n"},{"tags":[],"owner":{"account_id":13065194,"reputation":73,"user_id":9440826,"display_name":"Gaur 97"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692262763,"creation_date":1692262763,"answer_id":76919960,"question_id":42476261,"body_markdown":"In my case I used Spring&#39;s @Transaction annotation, though in the method hibernate session was already used. That&#39;s why the compiler got confused which transaction should it use, this was the cause to get the error.\r\n\r\nSo use only one transaction whether creating multiple transaction at a time.","title":"ClassCastException: org.springframework.orm.jpa.EntityManagerHolder cannot be cast to org.springframework.orm.hibernate5.SessionHolder","body":"<p>In my case I used Spring's @Transaction annotation, though in the method hibernate session was already used. That's why the compiler got confused which transaction should it use, this was the cause to get the error.</p>\n<p>So use only one transaction whether creating multiple transaction at a time.</p>\n"}],"owner":{"account_id":3238160,"reputation":744,"user_id":2731794,"accept_rate":89,"display_name":"Ulphat"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23581,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"accepted_answer_id":42476374,"answer_count":2,"score":15,"last_activity_date":1692262763,"creation_date":1488157523,"question_id":42476261,"body_markdown":"I try to create simple user login and registration page. But I cannot create user using services method.\r\nI have a service for creating new user.\r\n\r\n    @Service\r\n    public class LocalUserDetailsService implements UserService {\r\n\r\n    //...\r\n\r\n    @Transactional\r\n    @Override\r\n    public User registerNewUserAccount(UserDto userDto) throws EmailExistsException {\r\n        System.out.println(&quot;registerNewUserAccount called&quot;);\r\n        if (emailExist(userDto.getEmail())) {\r\n            throw new EmailExistsException(\r\n                    &quot;There is an account with that email adress: &quot;\r\n                    + userDto.getEmail());\r\n        }\r\n\r\n        return createUser(userDto);\r\n    }\r\n\r\n    private User createUser(UserDto userDto) {\r\n        User user = new User();\r\n        user.setEmail(userDto.getEmail());\r\n        user.setPassword(passwordEncoder.encode(userDto.getPassword()));\r\n        user.setEnabled(userDto.isEnabled());\r\n        Set&lt;Role&gt; roles = new LinkedHashSet&lt;&gt;();\r\n\r\n        userDto.getRoles().forEach((roleDto) -&gt; {\r\n            roles.add(roleDao.getOrInsert(roleDto.getName()));\r\n        });\r\n\r\n        user.setRoles(roles);\r\n\r\n        return userDao.insert(user);\r\n    }\r\n    }\r\nI call `registerNewUserAccount(UserDto userDto)` method at 2 places.\r\n1) At startup, I call this method for creating initial users. \r\n\r\n```\r\n@Component\r\npublic class DatabaseFillerOnStartup implements ApplicationListener&lt;ContextRefreshedEvent&gt; {\r\n\r\n    @Autowired\r\n    private UserService userService;\r\n\r\n    @Override\r\n    public void onApplicationEvent(ContextRefreshedEvent event) {\r\n        System.out.println(&quot;DatabaseFillerOnStartup ###################&quot;);\r\n        createInitialUsers();\r\n    }\r\n\r\n    private void createInitialUsers() {\r\n        try {\r\n            UserDto user = new UserDto();\r\n            user.setEmail(&quot;aa@bb.cc&quot;);\r\n            user.setPassword(&quot;123456&quot;);\r\n            user.setEnabled(true);\r\n            List&lt;RoleDto&gt; roles = new ArrayList&lt;&gt;();\r\n            roles.add(new RoleDto(Roles.ADMIN));\r\n            roles.add(new RoleDto(Roles.USER));\r\n            user.setRoles(roles);\r\n            userService.registerNewUserAccount(user);\r\n        } catch (EmailExistsException ex) {\r\n            Logger.getLogger(DatabaseFillerOnStartup.class.getName())\r\n                    .log(Level.SEVERE, null, ex);\r\n        }\r\n    }\r\n}\r\n```\r\nThen all works normally. But when I call this method from controller for creating new user using registration form, `registerNewUserAccount(UserDto userDto)` method does not work. I call it from controller like following:\r\n\r\n    @Controller\r\n    public class UserController {\r\n    \r\n    @Autowired\r\n    private UserService userService;\r\n    \r\n    @RequestMapping(value = &quot;/user/registration&quot;, method = RequestMethod.POST)\r\n    public ModelAndView registerUserAccount(\r\n            @ModelAttribute(&quot;userDto&quot;) @Valid UserDto userDto,\r\n            BindingResult result, WebRequest request, Errors errors) {\r\n        User registered = new User();\r\n        if (!result.hasErrors()) {\r\n            registered = createUserAccount(userDto, result);\r\n        }\r\n        if (registered == null) {\r\n            result.rejectValue(&quot;email&quot;, &quot;message.regError&quot;);\r\n        }\r\n        if (result.hasErrors()) {\r\n            return new ModelAndView(&quot;registration&quot;, &quot;user&quot;, userDto);\r\n        } else {\r\n            return new ModelAndView(&quot;successRegister&quot;, &quot;user&quot;, userDto);\r\n        }\r\n    }\r\n    \r\n    private User createUserAccount(UserDto userDto, BindingResult result) {\r\n        User registered;\r\n        try {\r\n            userService.test();//Just for testing if service class Autowired correctly.\r\n            registered = userService.registerNewUserAccount(userDto);\r\n        } catch (EmailExistsException e) {\r\n            return null;\r\n        }\r\n        return registered;\r\n    }\r\n    }\r\nI debugged it. The command `userService.test();` passed, but at `registerNewUserAccount(UserDto userDto)` command thrown the following exception\r\n\r\n    java.lang.ClassCastException: org.springframework.orm.jpa.EntityManagerHolder cannot be cast to org.springframework.orm.hibernate5.SessionHolder\r\n\tat org.springframework.orm.hibernate5.HibernateTransactionManager.doGetTransaction(HibernateTransactionManager.java:377) ~[spring-orm-4.3.5.RELEASE.jar:4.3.5.RELEASE]\r\n\tat org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:337) ~[spring-tx-4.3.5.RELEASE.jar:4.3.5.RELEASE]\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:447) ~[spring-tx-4.3.5.RELEASE.jar:4.3.5.RELEASE]\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:277) ~[spring-tx-4.3.5.RELEASE.jar:4.3.5.RELEASE]\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96) ~[spring-tx-4.3.5.RELEASE.jar:4.3.5.RELEASE]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-4.3.5.RELEASE.jar:4.3.5.RELEASE]\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:213) ~[spring-aop-4.3.5.RELEASE.jar:4.3.5.RELEASE]\r\n\tat com.sun.proxy.$Proxy79.registerNewUserAccount(Unknown Source) ~[na:na]\r\n\tat org.ub.spring.app.controller.UserController.createUserAccount(UserController.java:55) ~[classes/:na]\r\n\tat org.ub.spring.app.controller.UserController.registerUserAccount(UserController.java:39) ~[classes/:na]\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_101]\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_101]\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_101]\r\n\tat java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_101]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:220) ~[spring-web-4.3.5.RELEASE.jar:4.3.5.RELEASE]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:134) ~[spring-web-4.3.5.RELEASE.jar:4.3.5.RELEASE]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:116) ~[spring-webmvc-4.3.5.RELEASE.jar:4.3.5.RELEASE]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:827) ~[spring-webmvc-4.3.5.RELEASE.jar:4.3.5.RELEASE]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:738) ~[spring-webmvc-4.3.5.RELEASE.jar:4.3.5.RELEASE]\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85) ~[spring-webmvc-4.3.5.RELEASE.jar:4.3.5.RELEASE]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963) ~[spring-webmvc-4.3.5.RELEASE.jar:4.3.5.RELEASE]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:897) ~[spring-webmvc-4.3.5.RELEASE.jar:4.3.5.RELEASE]\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:970) ~[spring-webmvc-4.3.5.RELEASE.jar:4.3.5.RELEASE]\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:872) ~[spring-webmvc-4.3.5.RELEASE.jar:4.3.5.RELEASE]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:648) ~[tomcat-embed-core-8.5.11.jar:8.5.11]\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:846) ~[spring-webmvc-4.3.5.RELEASE.jar:4.3.5.RELEASE]\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:729) ~[tomcat-embed-core-8.5.11.jar:8.5.11]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:230) [tomcat-embed-core-8.5.11.jar:8.5.11]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165) [tomcat-embed-core-8.5.11.jar:8.5.11]\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52) ~[tomcat-embed-websocket-8.5.11.jar:8.5.11]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192) [tomcat-embed-core-8.5.11.jar:8.5.11]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165) [tomcat-embed-core-8.5.11.jar:8.5.11]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:317) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\r\n\tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\r\n\tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:114) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\r\n\tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\r\n\tat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\r\n\tat org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:150) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\r\n\tat org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\r\n\tat org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\r\n\tat org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:200) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\r\n\tat org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:124) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.3.5.RELEASE.jar:4.3.5.RELEASE]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:64) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.3.5.RELEASE.jar:4.3.5.RELEASE]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\r\n\tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\r\n\tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.3.5.RELEASE.jar:4.3.5.RELEASE]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\r\n\tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:214) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\r\n\tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:177) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346) ~[spring-web-4.3.5.RELEASE.jar:4.3.5.RELEASE]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:262) ~[spring-web-4.3.5.RELEASE.jar:4.3.5.RELEASE]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192) [tomcat-embed-core-8.5.11.jar:8.5.11]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165) [tomcat-embed-core-8.5.11.jar:8.5.11]\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:197) ~[spring-web-4.3.5.RELEASE.jar:4.3.5.RELEASE]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.3.5.RELEASE.jar:4.3.5.RELEASE]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192) [tomcat-embed-core-8.5.11.jar:8.5.11]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165) [tomcat-embed-core-8.5.11.jar:8.5.11]\r\n\tat org.springframework.boot.web.support.ErrorPageFilter.doFilter(ErrorPageFilter.java:115) [spring-boot-1.5.1.RELEASE.jar:1.5.1.RELEASE]\r\n\tat org.springframework.boot.web.support.ErrorPageFilter.access$000(ErrorPageFilter.java:59) [spring-boot-1.5.1.RELEASE.jar:1.5.1.RELEASE]\r\n\tat org.springframework.boot.web.support.ErrorPageFilter$1.doFilterInternal(ErrorPageFilter.java:90) [spring-boot-1.5.1.RELEASE.jar:1.5.1.RELEASE]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.3.5.RELEASE.jar:4.3.5.RELEASE]\r\n\tat org.springframework.boot.web.support.ErrorPageFilter.doFilter(ErrorPageFilter.java:108) [spring-boot-1.5.1.RELEASE.jar:1.5.1.RELEASE]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192) [tomcat-embed-core-8.5.11.jar:8.5.11]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165) [tomcat-embed-core-8.5.11.jar:8.5.11]\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198) [tomcat-embed-core-8.5.11.jar:8.5.11]\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) [tomcat-embed-core-8.5.11.jar:8.5.11]\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:474) [tomcat-embed-core-8.5.11.jar:8.5.11]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140) [tomcat-embed-core-8.5.11.jar:8.5.11]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79) [tomcat-embed-core-8.5.11.jar:8.5.11]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87) [tomcat-embed-core-8.5.11.jar:8.5.11]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:349) [tomcat-embed-core-8.5.11.jar:8.5.11]\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:783) [tomcat-embed-core-8.5.11.jar:8.5.11]\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) [tomcat-embed-core-8.5.11.jar:8.5.11]\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:798) [tomcat-embed-core-8.5.11.jar:8.5.11]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1434) [tomcat-embed-core-8.5.11.jar:8.5.11]\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat-embed-core-8.5.11.jar:8.5.11]\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [na:1.8.0_101]\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [na:1.8.0_101]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-8.5.11.jar:8.5.11]\r\n\tat java.lang.Thread.run(Thread.java:745) [na:1.8.0_101]","title":"ClassCastException: org.springframework.orm.jpa.EntityManagerHolder cannot be cast to org.springframework.orm.hibernate5.SessionHolder","body":"<p>I try to create simple user login and registration page. But I cannot create user using services method.\nI have a service for creating new user.</p>\n<pre><code>@Service\npublic class LocalUserDetailsService implements UserService {\n\n//...\n\n@Transactional\n@Override\npublic User registerNewUserAccount(UserDto userDto) throws EmailExistsException {\n    System.out.println(&quot;registerNewUserAccount called&quot;);\n    if (emailExist(userDto.getEmail())) {\n        throw new EmailExistsException(\n                &quot;There is an account with that email adress: &quot;\n                + userDto.getEmail());\n    }\n\n    return createUser(userDto);\n}\n\nprivate User createUser(UserDto userDto) {\n    User user = new User();\n    user.setEmail(userDto.getEmail());\n    user.setPassword(passwordEncoder.encode(userDto.getPassword()));\n    user.setEnabled(userDto.isEnabled());\n    Set&lt;Role&gt; roles = new LinkedHashSet&lt;&gt;();\n\n    userDto.getRoles().forEach((roleDto) -&gt; {\n        roles.add(roleDao.getOrInsert(roleDto.getName()));\n    });\n\n    user.setRoles(roles);\n\n    return userDao.insert(user);\n}\n}\n</code></pre>\n<p>I call <code>registerNewUserAccount(UserDto userDto)</code> method at 2 places.</p>\n<ol>\n<li>At startup, I call this method for creating initial users.</li>\n</ol>\n<pre><code>@Component\npublic class DatabaseFillerOnStartup implements ApplicationListener&lt;ContextRefreshedEvent&gt; {\n\n    @Autowired\n    private UserService userService;\n\n    @Override\n    public void onApplicationEvent(ContextRefreshedEvent event) {\n        System.out.println(&quot;DatabaseFillerOnStartup ###################&quot;);\n        createInitialUsers();\n    }\n\n    private void createInitialUsers() {\n        try {\n            UserDto user = new UserDto();\n            user.setEmail(&quot;aa@bb.cc&quot;);\n            user.setPassword(&quot;123456&quot;);\n            user.setEnabled(true);\n            List&lt;RoleDto&gt; roles = new ArrayList&lt;&gt;();\n            roles.add(new RoleDto(Roles.ADMIN));\n            roles.add(new RoleDto(Roles.USER));\n            user.setRoles(roles);\n            userService.registerNewUserAccount(user);\n        } catch (EmailExistsException ex) {\n            Logger.getLogger(DatabaseFillerOnStartup.class.getName())\n                    .log(Level.SEVERE, null, ex);\n        }\n    }\n}\n</code></pre>\n<p>Then all works normally. But when I call this method from controller for creating new user using registration form, <code>registerNewUserAccount(UserDto userDto)</code> method does not work. I call it from controller like following:</p>\n<pre><code>@Controller\npublic class UserController {\n\n@Autowired\nprivate UserService userService;\n\n@RequestMapping(value = &quot;/user/registration&quot;, method = RequestMethod.POST)\npublic ModelAndView registerUserAccount(\n        @ModelAttribute(&quot;userDto&quot;) @Valid UserDto userDto,\n        BindingResult result, WebRequest request, Errors errors) {\n    User registered = new User();\n    if (!result.hasErrors()) {\n        registered = createUserAccount(userDto, result);\n    }\n    if (registered == null) {\n        result.rejectValue(&quot;email&quot;, &quot;message.regError&quot;);\n    }\n    if (result.hasErrors()) {\n        return new ModelAndView(&quot;registration&quot;, &quot;user&quot;, userDto);\n    } else {\n        return new ModelAndView(&quot;successRegister&quot;, &quot;user&quot;, userDto);\n    }\n}\n\nprivate User createUserAccount(UserDto userDto, BindingResult result) {\n    User registered;\n    try {\n        userService.test();//Just for testing if service class Autowired correctly.\n        registered = userService.registerNewUserAccount(userDto);\n    } catch (EmailExistsException e) {\n        return null;\n    }\n    return registered;\n}\n}\n</code></pre>\n<p>I debugged it. The command <code>userService.test();</code> passed, but at <code>registerNewUserAccount(UserDto userDto)</code> command thrown the following exception</p>\n<pre><code>java.lang.ClassCastException: org.springframework.orm.jpa.EntityManagerHolder cannot be cast to org.springframework.orm.hibernate5.SessionHolder\nat org.springframework.orm.hibernate5.HibernateTransactionManager.doGetTransaction(HibernateTransactionManager.java:377) ~[spring-orm-4.3.5.RELEASE.jar:4.3.5.RELEASE]\nat org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:337) ~[spring-tx-4.3.5.RELEASE.jar:4.3.5.RELEASE]\nat org.springframework.transaction.interceptor.TransactionAspectSupport.createTransactionIfNecessary(TransactionAspectSupport.java:447) ~[spring-tx-4.3.5.RELEASE.jar:4.3.5.RELEASE]\nat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:277) ~[spring-tx-4.3.5.RELEASE.jar:4.3.5.RELEASE]\nat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:96) ~[spring-tx-4.3.5.RELEASE.jar:4.3.5.RELEASE]\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:179) ~[spring-aop-4.3.5.RELEASE.jar:4.3.5.RELEASE]\nat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:213) ~[spring-aop-4.3.5.RELEASE.jar:4.3.5.RELEASE]\nat com.sun.proxy.$Proxy79.registerNewUserAccount(Unknown Source) ~[na:na]\nat org.ub.spring.app.controller.UserController.createUserAccount(UserController.java:55) ~[classes/:na]\nat org.ub.spring.app.controller.UserController.registerUserAccount(UserController.java:39) ~[classes/:na]\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_101]\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_101]\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_101]\nat java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_101]\nat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:220) ~[spring-web-4.3.5.RELEASE.jar:4.3.5.RELEASE]\nat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:134) ~[spring-web-4.3.5.RELEASE.jar:4.3.5.RELEASE]\nat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:116) ~[spring-webmvc-4.3.5.RELEASE.jar:4.3.5.RELEASE]\nat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:827) ~[spring-webmvc-4.3.5.RELEASE.jar:4.3.5.RELEASE]\nat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:738) ~[spring-webmvc-4.3.5.RELEASE.jar:4.3.5.RELEASE]\nat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85) ~[spring-webmvc-4.3.5.RELEASE.jar:4.3.5.RELEASE]\nat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963) ~[spring-webmvc-4.3.5.RELEASE.jar:4.3.5.RELEASE]\nat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:897) ~[spring-webmvc-4.3.5.RELEASE.jar:4.3.5.RELEASE]\nat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:970) ~[spring-webmvc-4.3.5.RELEASE.jar:4.3.5.RELEASE]\nat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:872) ~[spring-webmvc-4.3.5.RELEASE.jar:4.3.5.RELEASE]\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:648) ~[tomcat-embed-core-8.5.11.jar:8.5.11]\nat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:846) ~[spring-webmvc-4.3.5.RELEASE.jar:4.3.5.RELEASE]\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:729) ~[tomcat-embed-core-8.5.11.jar:8.5.11]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:230) [tomcat-embed-core-8.5.11.jar:8.5.11]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165) [tomcat-embed-core-8.5.11.jar:8.5.11]\nat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52) ~[tomcat-embed-websocket-8.5.11.jar:8.5.11]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192) [tomcat-embed-core-8.5.11.jar:8.5.11]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165) [tomcat-embed-core-8.5.11.jar:8.5.11]\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:317) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\nat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\nat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\nat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:114) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\nat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\nat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\nat org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:150) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\nat org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\nat org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\nat org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:200) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\nat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\nat org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:124) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.3.5.RELEASE.jar:4.3.5.RELEASE]\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\nat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:64) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.3.5.RELEASE.jar:4.3.5.RELEASE]\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\nat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\nat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.3.5.RELEASE.jar:4.3.5.RELEASE]\nat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:331) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\nat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:214) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\nat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:177) ~[spring-security-web-4.2.1.RELEASE.jar:4.2.1.RELEASE]\nat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346) ~[spring-web-4.3.5.RELEASE.jar:4.3.5.RELEASE]\nat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:262) ~[spring-web-4.3.5.RELEASE.jar:4.3.5.RELEASE]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192) [tomcat-embed-core-8.5.11.jar:8.5.11]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165) [tomcat-embed-core-8.5.11.jar:8.5.11]\nat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:197) ~[spring-web-4.3.5.RELEASE.jar:4.3.5.RELEASE]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.3.5.RELEASE.jar:4.3.5.RELEASE]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192) [tomcat-embed-core-8.5.11.jar:8.5.11]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165) [tomcat-embed-core-8.5.11.jar:8.5.11]\nat org.springframework.boot.web.support.ErrorPageFilter.doFilter(ErrorPageFilter.java:115) [spring-boot-1.5.1.RELEASE.jar:1.5.1.RELEASE]\nat org.springframework.boot.web.support.ErrorPageFilter.access$000(ErrorPageFilter.java:59) [spring-boot-1.5.1.RELEASE.jar:1.5.1.RELEASE]\nat org.springframework.boot.web.support.ErrorPageFilter$1.doFilterInternal(ErrorPageFilter.java:90) [spring-boot-1.5.1.RELEASE.jar:1.5.1.RELEASE]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) [spring-web-4.3.5.RELEASE.jar:4.3.5.RELEASE]\nat org.springframework.boot.web.support.ErrorPageFilter.doFilter(ErrorPageFilter.java:108) [spring-boot-1.5.1.RELEASE.jar:1.5.1.RELEASE]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:192) [tomcat-embed-core-8.5.11.jar:8.5.11]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:165) [tomcat-embed-core-8.5.11.jar:8.5.11]\nat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198) [tomcat-embed-core-8.5.11.jar:8.5.11]\nat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) [tomcat-embed-core-8.5.11.jar:8.5.11]\nat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:474) [tomcat-embed-core-8.5.11.jar:8.5.11]\nat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140) [tomcat-embed-core-8.5.11.jar:8.5.11]\nat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79) [tomcat-embed-core-8.5.11.jar:8.5.11]\nat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87) [tomcat-embed-core-8.5.11.jar:8.5.11]\nat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:349) [tomcat-embed-core-8.5.11.jar:8.5.11]\nat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:783) [tomcat-embed-core-8.5.11.jar:8.5.11]\nat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) [tomcat-embed-core-8.5.11.jar:8.5.11]\nat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:798) [tomcat-embed-core-8.5.11.jar:8.5.11]\nat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1434) [tomcat-embed-core-8.5.11.jar:8.5.11]\nat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat-embed-core-8.5.11.jar:8.5.11]\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [na:1.8.0_101]\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [na:1.8.0_101]\nat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-8.5.11.jar:8.5.11]\nat java.lang.Thread.run(Thread.java:745) [na:1.8.0_101]\n</code></pre>\n"},{"tags":["java","junit5","weld-junit5"],"answers":[{"tags":[],"owner":{"account_id":19670358,"reputation":1,"user_id":14399733,"display_name":"userAcgJllhSe"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692261708,"creation_date":1692192843,"answer_id":76914099,"question_id":76309427,"body_markdown":"Due to technical and time constraints I&#39;m unable to test this with the versions of the libraries you posted, but I ran into the same problem using `weld-junit5 2.0.0.Final` and could solve it by ommiting the `getPackage()` call.\r\n\r\nI.e. you could try\r\n\r\n            .addPackages(false, Example.class)\r\n\r\ninstead of\r\n\r\n            .addPackages(false, Example.class.getPackage())","title":"Weld-Junit5: addPackages doesn&#39;t add all contained beans to the test container","body":"<p>Due to technical and time constraints I'm unable to test this with the versions of the libraries you posted, but I ran into the same problem using <code>weld-junit5 2.0.0.Final</code> and could solve it by ommiting the <code>getPackage()</code> call.</p>\n<p>I.e. you could try</p>\n<pre><code>        .addPackages(false, Example.class)\n</code></pre>\n<p>instead of</p>\n<pre><code>        .addPackages(false, Example.class.getPackage())\n</code></pre>\n"}],"owner":{"account_id":28657233,"reputation":11,"user_id":21942943,"display_name":"Iceplanet"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":166,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1692261708,"creation_date":1684784642,"question_id":76309427,"body_markdown":"I&#39;m trying to migrate from Java EE 8 to Jakarta EE 10 and was running a JUnit 5 test with Weld. I created a simple example with JUnit5 and Weld (cdi) could not resolve the (inner) injected classes.\r\n\r\nThe test failed with: **WELD-001408: Unsatisfied dependencies** ...\r\n\r\nExample class (which injects the ExampleHelper class):\r\n\r\n```\r\npublic class Example {\r\n    @Inject\r\n    ExampleHelper exampleHelper;\r\n\r\n    public void getHelloText() {\r\n        exampleHelper.greet();\r\n    }\r\n}\r\n```\r\n\r\nExampleHelper class:\r\n\r\n```\r\npublic class ExampleHelper {\r\n    public void greet() {\r\n        System.out.println(&quot;Hello&quot;);\r\n    }\r\n}\r\n```\r\n\r\nJUnit5 Test:\r\n\r\n```\r\n@ExtendWith(WeldJunit5Extension.class)\r\nclass ExampleTest {\r\n\r\n    @WeldSetup\r\n    public WeldInitiator weld = WeldInitiator.of(WeldInitiator.createWeld()\r\n            .addBeanClass(Example.class)\r\n            .addPackages(false, Example.class.getPackage())\r\n    );\r\n\r\n    @Inject\r\n    Example example;\r\n\r\n    @Test\r\n    public void test() {\r\n        example.getHelloText();\r\n    }\r\n}\r\n```\r\n\r\nI would have expected that by adding the package, all classes within that package could be found and injected. (This is how I did it before with JEE8).\r\n\r\nI get the error:\r\n\r\n```\r\norg.jboss.weld.exceptions.DeploymentException: WELD-001408: Unsatisfied dependencies for type ExampleHelper with qualifiers @Default\r\n  at injection point [BackedAnnotatedField] @Inject com.company.wf28test.Example.exampleHelper\r\n  at com.company.wf28test.Example.exampleHelper(Example.java:0)\r\n```\r\n\r\n\r\nOnly if I explicitly add all injected classes individually Weld can find them.\r\n```\r\n.addBeanClass(Example.class)\r\n.addBeanClass(ExampleHelper.class)\r\n```\r\nthen the test runs through\r\n\r\nDependencies:\r\n\r\n```\r\njakarta.jakartaee-api 10.0.0\r\njunit-jupiter-api 5.9.3\r\njunit-jupiter-engine 5.9.3\r\nweld-junit5 4.0.0.Final\r\n```\r\n\r\n\r\nWhat is my mistake or misunderstanding?\r\n","title":"Weld-Junit5: addPackages doesn&#39;t add all contained beans to the test container","body":"<p>I'm trying to migrate from Java EE 8 to Jakarta EE 10 and was running a JUnit 5 test with Weld. I created a simple example with JUnit5 and Weld (cdi) could not resolve the (inner) injected classes.</p>\n<p>The test failed with: <strong>WELD-001408: Unsatisfied dependencies</strong> ...</p>\n<p>Example class (which injects the ExampleHelper class):</p>\n<pre><code>public class Example {\n    @Inject\n    ExampleHelper exampleHelper;\n\n    public void getHelloText() {\n        exampleHelper.greet();\n    }\n}\n</code></pre>\n<p>ExampleHelper class:</p>\n<pre><code>public class ExampleHelper {\n    public void greet() {\n        System.out.println(&quot;Hello&quot;);\n    }\n}\n</code></pre>\n<p>JUnit5 Test:</p>\n<pre><code>@ExtendWith(WeldJunit5Extension.class)\nclass ExampleTest {\n\n    @WeldSetup\n    public WeldInitiator weld = WeldInitiator.of(WeldInitiator.createWeld()\n            .addBeanClass(Example.class)\n            .addPackages(false, Example.class.getPackage())\n    );\n\n    @Inject\n    Example example;\n\n    @Test\n    public void test() {\n        example.getHelloText();\n    }\n}\n</code></pre>\n<p>I would have expected that by adding the package, all classes within that package could be found and injected. (This is how I did it before with JEE8).</p>\n<p>I get the error:</p>\n<pre><code>org.jboss.weld.exceptions.DeploymentException: WELD-001408: Unsatisfied dependencies for type ExampleHelper with qualifiers @Default\n  at injection point [BackedAnnotatedField] @Inject com.company.wf28test.Example.exampleHelper\n  at com.company.wf28test.Example.exampleHelper(Example.java:0)\n</code></pre>\n<p>Only if I explicitly add all injected classes individually Weld can find them.</p>\n<pre><code>.addBeanClass(Example.class)\n.addBeanClass(ExampleHelper.class)\n</code></pre>\n<p>then the test runs through</p>\n<p>Dependencies:</p>\n<pre><code>jakarta.jakartaee-api 10.0.0\njunit-jupiter-api 5.9.3\njunit-jupiter-engine 5.9.3\nweld-junit5 4.0.0.Final\n</code></pre>\n<p>What is my mistake or misunderstanding?</p>\n"},{"tags":["java","tomcat"],"comments":[{"owner":{"account_id":13361850,"reputation":158,"user_id":9643606,"display_name":"Lennart Deters"},"score":0,"creation_date":1580855953,"post_id":60066333,"comment_id":106233806,"body_markdown":"Please add the important parts of your question not only as Image but in an code block as formatted Text. This way it can be found via the Search engines and is much more readable","body":"Please add the important parts of your question not only as Image but in an code block as formatted Text. This way it can be found via the Search engines and is much more readable"}],"answers":[{"tags":[],"owner":{"account_id":2725644,"reputation":4730,"user_id":2350799,"accept_rate":83,"display_name":"xcesco"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1580855149,"creation_date":1580855149,"answer_id":60066440,"question_id":60066333,"body_markdown":"Try to fix the context path. As you can notice in the log, there is a line that says: `context path must start with /`. The URL of your application is `http://localhost:8080SampleProject`. It has to be `http://localhost:8080/SampleProject` or `http://localhost:8080/`.\r\n\r\nTo do this, in the `tomcat7-maven-plugin` in the `pom.xml`, change the parameter `path` value into &#39;/SampleProject&#39; instead of &#39;SampleProject&#39;\r\n\r\nHope this helps.","title":"Tomcat in Intellij Idea Community Edition (port not recognized)","body":"<p>Try to fix the context path. As you can notice in the log, there is a line that says: <code>context path must start with /</code>. The URL of your application is <code>http://localhost:8080SampleProject</code>. It has to be <code>http://localhost:8080/SampleProject</code> or <code>http://localhost:8080/</code>.</p>\n\n<p>To do this, in the <code>tomcat7-maven-plugin</code> in the <code>pom.xml</code>, change the parameter <code>path</code> value into '/SampleProject' instead of 'SampleProject'</p>\n\n<p>Hope this helps.</p>\n"},{"tags":[],"owner":{"account_id":13361850,"reputation":158,"user_id":9643606,"display_name":"Lennart Deters"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1580855794,"creation_date":1580855794,"answer_id":60066553,"question_id":60066333,"body_markdown":"In your pom.xml your tomcat path has to start with an `/`. \r\n\r\nChange `&lt;path&gt;SampleProject&lt;/path&gt;` to `&lt;path&gt;/SampleProject&lt;/path&gt;` and it will start under `http://localhost:8080/SampleProject`","title":"Tomcat in Intellij Idea Community Edition (port not recognized)","body":"<p>In your pom.xml your tomcat path has to start with an <code>/</code>. </p>\n\n<p>Change <code>&lt;path&gt;SampleProject&lt;/path&gt;</code> to <code>&lt;path&gt;/SampleProject&lt;/path&gt;</code> and it will start under <code>http://localhost:8080/SampleProject</code></p>\n"}],"owner":{"account_id":16801775,"reputation":1,"user_id":12841839,"display_name":"Timm"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":498,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1692261564,"creation_date":1580854577,"question_id":60066333,"body_markdown":"The program starts to work, but an error is issued, and at the moment the process is looping when the protocol starts. Help finish the installation of tomcat.\r\n\r\n[pom.xml file][1]\r\n\r\n[continuation][2]\r\n\r\n[continuation][3]\r\n\r\n[error and result message][4]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/OAzvV.jpg\r\n  [2]: https://i.stack.imgur.com/nt8fy.jpg\r\n  [3]: https://i.stack.imgur.com/tjDjG.jpg\r\n  [4]: https://i.stack.imgur.com/836R6.jpg","title":"Tomcat in Intellij Idea Community Edition (port not recognized)","body":"<p>The program starts to work, but an error is issued, and at the moment the process is looping when the protocol starts. Help finish the installation of tomcat.</p>\n\n<p><a href=\"https://i.stack.imgur.com/OAzvV.jpg\" rel=\"nofollow noreferrer\">pom.xml file</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/nt8fy.jpg\" rel=\"nofollow noreferrer\">continuation</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/tjDjG.jpg\" rel=\"nofollow noreferrer\">continuation</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/836R6.jpg\" rel=\"nofollow noreferrer\">error and result message</a></p>\n"},{"tags":["java","swing","security"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":2,"creation_date":1692261300,"post_id":76919738,"comment_id":135600090,"body_markdown":"I&#39;m assuming `getPassword` returns a `char[]` instead of a `String` so that you can clear it later? In most cases, that&#39;s quite useless anyway. It only works if *every single place* that password goes is memory you have control over and can overwrite later. So if, like you&#39;re saying, the password needs to go into something that wants a `String`, there&#39;s no point in doing that any more. And it&#39;s not super-important anyway: You can only leak the password this way if another process gets access to your memory. If that happens, you have bigger problems.","body":"I&#39;m assuming <code>getPassword</code> returns a <code>char[]</code> instead of a <code>String</code> so that you can clear it later? In most cases, that&#39;s quite useless anyway. It only works if <i>every single place</i> that password goes is memory you have control over and can overwrite later. So if, like you&#39;re saying, the password needs to go into something that wants a <code>String</code>, there&#39;s no point in doing that any more. And it&#39;s not super-important anyway: You can only leak the password this way if another process gets access to your memory. If that happens, you have bigger problems."}],"owner":{"account_id":29242543,"reputation":1,"user_id":22403736,"display_name":"endlessdeep"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1692261492,"answer_count":0,"score":0,"last_activity_date":1692261187,"creation_date":1692261079,"question_id":76919738,"body_markdown":"I wrote an application with Java Swing that requires the user to log in with their username and password before continuing. The application then sends an HTTP request to generate an access token.\r\n\r\nI know that you shouldn&#39;t use the .getText method for a password field and instead the .getPassword method, still I need the password as a string, in order to make a HTTP request (okhttp3) with the password value in the request body (which is a string). How can I manage the security then?","title":"Can you securely store a password as a string?","body":"<p>I wrote an application with Java Swing that requires the user to log in with their username and password before continuing. The application then sends an HTTP request to generate an access token.</p>\n<p>I know that you shouldn't use the .getText method for a password field and instead the .getPassword method, still I need the password as a string, in order to make a HTTP request (okhttp3) with the password value in the request body (which is a string). How can I manage the security then?</p>\n"},{"tags":["java","spring-boot","csrf","csrf-token"],"answers":[{"comments":[{"owner":{"account_id":13923325,"reputation":55,"user_id":10053232,"display_name":"Thomas"},"score":0,"creation_date":1587463421,"post_id":61335139,"comment_id":108514896,"body_markdown":"Hi, thanks for your answer.\n\nBefore to ask help, i tried with  the built in `CookieCsrfTokenRepository`, but it was the same.\n\nNow, to do it the right way,  I tried to do like you said, and it&#39;s more simple than adding a csrf token repository. I also deleted my custom csrf filter from the security config.\n\nNow, i&#39;m on the same problem. Post request on endpoints who are not in the `.ignoringAntMatchers` gives me a 403 error.\n\nDo you have any idea ?","body":"Hi, thanks for your answer.  Before to ask help, i tried with  the built in <code>CookieCsrfTokenRepository</code>, but it was the same.  Now, to do it the right way,  I tried to do like you said, and it&#39;s more simple than adding a csrf token repository. I also deleted my custom csrf filter from the security config.  Now, i&#39;m on the same problem. Post request on endpoints who are not in the <code>.ignoringAntMatchers</code> gives me a 403 error.  Do you have any idea ?"},{"owner":{"account_id":13923325,"reputation":55,"user_id":10053232,"display_name":"Thomas"},"score":3,"creation_date":1587465532,"post_id":61335139,"comment_id":108516019,"body_markdown":"Nevermind, it&#39;s working now, i just had to add in headers (in postman) the X-XSRF-TOKEN.\n\nNow, if i have understand, i need send in my front, in headers, the token wich is in the cookie.","body":"Nevermind, it&#39;s working now, i just had to add in headers (in postman) the X-XSRF-TOKEN.  Now, if i have understand, i need send in my front, in headers, the token wich is in the cookie."},{"owner":{"account_id":9169597,"reputation":83,"user_id":6817701,"display_name":"Biafra"},"score":0,"creation_date":1602583833,"post_id":61335139,"comment_id":113760158,"body_markdown":"Thanks @Thomas this helped me a lot, adding that header in postman request :)","body":"Thanks @Thomas this helped me a lot, adding that header in postman request :)"},{"owner":{"account_id":6338394,"reputation":402,"user_id":4921141,"accept_rate":100,"display_name":"Brent Thoenen"},"score":0,"creation_date":1607633654,"post_id":61335139,"comment_id":115341743,"body_markdown":"@drumonii, This is unrelated to your answer, but do you happen to remember how to get your security config format like that? you doing it manually or do you have a formatting config you use to set that? I&#39;ve never been able to find it.","body":"@drumonii, This is unrelated to your answer, but do you happen to remember how to get your security config format like that? you doing it manually or do you have a formatting config you use to set that? I&#39;ve never been able to find it."},{"owner":{"account_id":355197,"reputation":353,"user_id":693993,"accept_rate":100,"display_name":"drumonii"},"score":1,"creation_date":1607888403,"post_id":61335139,"comment_id":115407743,"body_markdown":"@BrentThoenen, I formatted it manually. You may want to use `// @formatter:off` and `// @formatter:on` so that your IDE ignores those config lines when you format the entire security config class.","body":"@BrentThoenen, I formatted it manually. You may want to use <code>&#47;&#47; @formatter:off</code> and <code>&#47;&#47; @formatter:on</code> so that your IDE ignores those config lines when you format the entire security config class."},{"owner":{"account_id":12797740,"reputation":73,"user_id":9260065,"display_name":"Iqbal"},"score":0,"creation_date":1657161844,"post_id":61335139,"comment_id":128746362,"body_markdown":"@drumonii, I have tried implementing the csrftokenrepository along with sending the header X-XSRF-TOKEN in the request header while sending the POST request in POSTMAN but I am still getting 403 Forbidden error. Please find below the code snippet in my configuration file:\n\nhttp.csrf().csrfTokenRepository(CookieCsrfTokenRepository.withHttpOnlyFalse()).and().authorizeHttpRequests().antMatchers(HttpMethod.POST, &quot;/secure/register&quot;).permitAll();","body":"@drumonii, I have tried implementing the csrftokenrepository along with sending the header X-XSRF-TOKEN in the request header while sending the POST request in POSTMAN but I am still getting 403 Forbidden error. Please find below the code snippet in my configuration file:  http.csrf().csrfTokenRepository(CookieCsrfTokenRepository.wi&zwnj;&#8203;thHttpOnlyFalse()).a&zwnj;&#8203;nd().authorizeHttpRe&zwnj;&#8203;quests().antMatchers&zwnj;&#8203;(HttpMethod.POST, &quot;/secure/register&quot;).permitAll();"},{"owner":{"account_id":355197,"reputation":353,"user_id":693993,"accept_rate":100,"display_name":"drumonii"},"score":0,"creation_date":1659148767,"post_id":61335139,"comment_id":129230838,"body_markdown":"@Iqbal it&#39;s hard to tell without seeing your full code and your request. might suggest posting your own question and linking here","body":"@Iqbal it&#39;s hard to tell without seeing your full code and your request. might suggest posting your own question and linking here"}],"tags":[],"owner":{"account_id":355197,"reputation":353,"user_id":693993,"accept_rate":100,"display_name":"drumonii"},"comment_count":7,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1587436985,"creation_date":1587436985,"answer_id":61335139,"question_id":61334171,"body_markdown":"If you want to use CSRF with a http only false cookie, why not use Spring Security&#39;s built in `CookieCsrfTokenRepository`? Should simplify your config that way. `CustomCsrfFilter` seems to be adding a `XSRF-TOKEN` cookie to the `HttpServletResponse`, which `CookieCsrfTokenRepository` [does for you](https://github.com/spring-projects/spring-security/blob/master/web/src/main/java/org/springframework/security/web/csrf/CookieCsrfTokenRepository.java#L66).\r\n\r\nThe default CSRF cookie name when using `CookieCsrfTokenRepository` is `X-CSRF-TOKEN`, which is conveniently the default name Angular&#39;s `HttpClientXsrfModule` uses. Of course you can customize that if you need.\r\n\r\nSo your security config becomes:\r\n\r\n```\r\n    @Override\r\n\tprotected void configure(HttpSecurity http) throws Exception {\r\n\t\thttp\r\n\t\t\t\t.csrf()\r\n\t\t\t\t\t.csrfTokenRepository(CookieCsrfTokenRepository.withHttpOnlyFalse())\r\n\t\t\t\t.and()\r\n\t\t\t\t.exceptionHandling()\r\n\t\t\t\t\t.authenticationEntryPoint(new Http403ForbiddenEntryPoint())\r\n\t\t\t\t.and()\r\n\t\t\t\t\t.authenticationProvider(getProvider())\r\n\t\t\t\t.formLogin()\r\n\t\t\t\t\t.loginProcessingUrl(&quot;/api/login&quot;)\r\n\t\t\t\t\t.successHandler(new AuthentificationLoginSuccessHandler())\r\n\t\t\t\t\t.failureHandler(new SimpleUrlAuthenticationFailureHandler())\r\n\t\t\t\t.and()\r\n\t\t\t\t.logout()\r\n\t\t\t\t\t.logoutUrl(&quot;/api/logout&quot;)\r\n\t\t\t\t\t.logoutSuccessHandler(new AuthentificationLogoutSuccessHandler())\r\n\t\t\t\t\t.invalidateHttpSession(true)\r\n\t\t\t\t.and()\r\n\t\t\t\t.authorizeRequests()\r\n\t\t\t\t\t.anyRequest().authenticated();\r\n    }\r\n```\r\n\r\nAnd with Angular, your app module has `HttpClientXsrfModule` as \r\n\r\n```\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    HttpClientModule,\r\n    HttpClientXsrfModule\r\n  ],\r\n  providers: [],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule { }\r\n```","title":"Spring Boot -- Post request with CSRF token produce 403 error","body":"<p>If you want to use CSRF with a http only false cookie, why not use Spring Security's built in <code>CookieCsrfTokenRepository</code>? Should simplify your config that way. <code>CustomCsrfFilter</code> seems to be adding a <code>XSRF-TOKEN</code> cookie to the <code>HttpServletResponse</code>, which <code>CookieCsrfTokenRepository</code> <a href=\"https://github.com/spring-projects/spring-security/blob/master/web/src/main/java/org/springframework/security/web/csrf/CookieCsrfTokenRepository.java#L66\" rel=\"nofollow noreferrer\">does for you</a>.</p>\n\n<p>The default CSRF cookie name when using <code>CookieCsrfTokenRepository</code> is <code>X-CSRF-TOKEN</code>, which is conveniently the default name Angular's <code>HttpClientXsrfModule</code> uses. Of course you can customize that if you need.</p>\n\n<p>So your security config becomes:</p>\n\n<pre><code>    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http\n                .csrf()\n                    .csrfTokenRepository(CookieCsrfTokenRepository.withHttpOnlyFalse())\n                .and()\n                .exceptionHandling()\n                    .authenticationEntryPoint(new Http403ForbiddenEntryPoint())\n                .and()\n                    .authenticationProvider(getProvider())\n                .formLogin()\n                    .loginProcessingUrl(\"/api/login\")\n                    .successHandler(new AuthentificationLoginSuccessHandler())\n                    .failureHandler(new SimpleUrlAuthenticationFailureHandler())\n                .and()\n                .logout()\n                    .logoutUrl(\"/api/logout\")\n                    .logoutSuccessHandler(new AuthentificationLogoutSuccessHandler())\n                    .invalidateHttpSession(true)\n                .and()\n                .authorizeRequests()\n                    .anyRequest().authenticated();\n    }\n</code></pre>\n\n<p>And with Angular, your app module has <code>HttpClientXsrfModule</code> as </p>\n\n<pre><code>@NgModule({\n  declarations: [\n    AppComponent\n  ],\n  imports: [\n    BrowserModule,\n    HttpClientModule,\n    HttpClientXsrfModule\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8707975,"reputation":13,"user_id":6515240,"display_name":"softMachina"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692260568,"creation_date":1692260568,"answer_id":76919674,"question_id":61334171,"body_markdown":"Even though this question is kind of old, I&#39;ve been struggling with the same issue for the last couple of days. A lot of people suggest to add:\r\n```html\r\n       &lt;th:input type=&quot;hidden&quot; name=&quot;${_csrf.parameterName}&quot;\r\n                        value=&quot;${_csrf.token}&quot; /&gt;\r\n```\r\ninto your form. Despite of that, the csrf-token isn&#39;t send.\r\nFor me the problem was solved by moving the html-file, containing the form into the template folder of my Spring Boot project. It seems as if thymeleaf is only then able to add the csrf-token automatically.","title":"Spring Boot -- Post request with CSRF token produce 403 error","body":"<p>Even though this question is kind of old, I've been struggling with the same issue for the last couple of days. A lot of people suggest to add:</p>\n<pre class=\"lang-html prettyprint-override\"><code>       &lt;th:input type=&quot;hidden&quot; name=&quot;${_csrf.parameterName}&quot;\n                        value=&quot;${_csrf.token}&quot; /&gt;\n</code></pre>\n<p>into your form. Despite of that, the csrf-token isn't send.\nFor me the problem was solved by moving the html-file, containing the form into the template folder of my Spring Boot project. It seems as if thymeleaf is only then able to add the csrf-token automatically.</p>\n"}],"owner":{"account_id":13923325,"reputation":55,"user_id":10053232,"display_name":"Thomas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7034,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":61335139,"answer_count":2,"score":4,"last_activity_date":1692260568,"creation_date":1587428716,"question_id":61334171,"body_markdown":"I&#39;m trying to implement CSRF token security in my Spring Boot API to learn how to deal with that.\r\n\r\nI&#39;ve followed [this tutorial (server side part)][1] and this is my security config:\r\n```\r\nprivate static final String[] CSRF_IGNORE = {&quot;/api/login&quot;};\r\n    \r\n\r\nprotected void configure(HttpSecurity http) throws Exception {\r\n        http\r\n                .csrf()\r\n                .ignoringAntMatchers(CSRF_IGNORE)\r\n                .csrfTokenRepository(csrfTokenRepository())\r\n                .and()\r\n                .addFilterAfter(new CustomCsrfFilter(), CsrfFilter.class)\r\n                .exceptionHandling()\r\n                .authenticationEntryPoint(new Http403ForbiddenEntryPoint() {\r\n                })\r\n                .and()\r\n                .authenticationProvider(getProvider())\r\n                .formLogin()\r\n                .loginProcessingUrl(&quot;/api/login&quot;)\r\n                .successHandler(new AuthentificationLoginSuccessHandler())\r\n                .failureHandler(new SimpleUrlAuthenticationFailureHandler())\r\n                .and()\r\n                .logout()\r\n                .logoutUrl(&quot;/api/logout&quot;)\r\n                .logoutSuccessHandler(new AuthentificationLogoutSuccessHandler())\r\n                .invalidateHttpSession(true)\r\n                .and()\r\n                .authorizeRequests()\r\n                .anyRequest().authenticated();\r\n    }\r\n``` \r\n\r\nOthers things are the same as in the tutorial.\r\n\r\nI&#39;m testing with Postman.\r\n\r\nWhen i add the endpoint i want in **CSRF_IGNORE**, i can see with logger/debug that token stocked, and token from cookie are the same, because the security config&#39;s part **CustomCsrfFilter.java** in **.addFilterAfter()** is used, but when i remove the endpoint from this CSRF_IGNORE, what i get is a 403, and, logger/debug in the **CustomCsrfFilter.java** isn&#39;t used, so i&#39;m thinking that tokens aren&#39;t compared.\r\n\r\nI think I missed something and I would like to understand.\r\n\r\n\r\n  [1]: http://roufid.com/angular-spring-security-csrf-configuration/#server_side_configuration","title":"Spring Boot -- Post request with CSRF token produce 403 error","body":"<p>I'm trying to implement CSRF token security in my Spring Boot API to learn how to deal with that.</p>\n\n<p>I've followed <a href=\"http://roufid.com/angular-spring-security-csrf-configuration/#server_side_configuration\" rel=\"nofollow noreferrer\">this tutorial (server side part)</a> and this is my security config:</p>\n\n<pre><code>private static final String[] CSRF_IGNORE = {\"/api/login\"};\n\n\nprotected void configure(HttpSecurity http) throws Exception {\n        http\n                .csrf()\n                .ignoringAntMatchers(CSRF_IGNORE)\n                .csrfTokenRepository(csrfTokenRepository())\n                .and()\n                .addFilterAfter(new CustomCsrfFilter(), CsrfFilter.class)\n                .exceptionHandling()\n                .authenticationEntryPoint(new Http403ForbiddenEntryPoint() {\n                })\n                .and()\n                .authenticationProvider(getProvider())\n                .formLogin()\n                .loginProcessingUrl(\"/api/login\")\n                .successHandler(new AuthentificationLoginSuccessHandler())\n                .failureHandler(new SimpleUrlAuthenticationFailureHandler())\n                .and()\n                .logout()\n                .logoutUrl(\"/api/logout\")\n                .logoutSuccessHandler(new AuthentificationLogoutSuccessHandler())\n                .invalidateHttpSession(true)\n                .and()\n                .authorizeRequests()\n                .anyRequest().authenticated();\n    }\n</code></pre>\n\n<p>Others things are the same as in the tutorial.</p>\n\n<p>I'm testing with Postman.</p>\n\n<p>When i add the endpoint i want in <strong>CSRF_IGNORE</strong>, i can see with logger/debug that token stocked, and token from cookie are the same, because the security config's part <strong>CustomCsrfFilter.java</strong> in <strong>.addFilterAfter()</strong> is used, but when i remove the endpoint from this CSRF_IGNORE, what i get is a 403, and, logger/debug in the <strong>CustomCsrfFilter.java</strong> isn't used, so i'm thinking that tokens aren't compared.</p>\n\n<p>I think I missed something and I would like to understand.</p>\n"},{"tags":["java","css","parsing","javafx"],"answers":[{"comments":[{"owner":{"account_id":8664592,"reputation":9965,"user_id":6485651,"accept_rate":65,"display_name":"Zephyr"},"score":0,"creation_date":1488737655,"post_id":42611487,"comment_id":72353182,"body_markdown":"Using the built-in CSSParser looks promising, thank you!  However, I&#39;m getting a `NullPointerException` on \n`Stylesheet css = parser.parse(Utility.class.getResource(cssFile).toURI().toURL());&#39; My `cssFile` is being passed as a String to the `.css` file in question.","body":"Using the built-in CSSParser looks promising, thank you!  However, I&#39;m getting a <code>NullPointerException</code> on  <code>Stylesheet css = parser.parse(Utility.class.getResource(cssFile).toURI().toUR&zwnj;&#8203;L());&#39; My </code>cssFile` is being passed as a String to the <code>.css</code> file in question."},{"owner":{"account_id":4910667,"reputation":44671,"user_id":3956070,"display_name":"Jos&#233; Pereda"},"score":0,"creation_date":1488737850,"post_id":42611487,"comment_id":72353240,"body_markdown":"Make sure you have a valid `cssFile` under the same path as the `Utility` class. Also place an `ex.printStackTrace()` in the catch, so you can find out the reason of that exception.","body":"Make sure you have a valid <code>cssFile</code> under the same path as the <code>Utility</code> class. Also place an <code>ex.printStackTrace()</code> in the catch, so you can find out the reason of that exception."},{"owner":{"account_id":8664592,"reputation":9965,"user_id":6485651,"accept_rate":65,"display_name":"Zephyr"},"score":0,"creation_date":1488737851,"post_id":42611487,"comment_id":72353243,"body_markdown":"I&#39;m assuming it has something to do with `Utility.class` being null (the String checks out fine). I am putting the parser in a `Static` method so I can&#39;t use `getClass()`.","body":"I&#39;m assuming it has something to do with <code>Utility.class</code> being null (the String checks out fine). I am putting the parser in a <code>Static</code> method so I can&#39;t use <code>getClass()</code>."},{"owner":{"account_id":8664592,"reputation":9965,"user_id":6485651,"accept_rate":65,"display_name":"Zephyr"},"score":0,"creation_date":1488738113,"post_id":42611487,"comment_id":72353328,"body_markdown":"The `cssFile` string contains the full relative path to the file; will that not work? And the `e.printStackTrace()` only leads me to that line. Is there a way to find out which part of the line is causing the exception?","body":"The <code>cssFile</code> string contains the full relative path to the file; will that not work? And the <code>e.printStackTrace()</code> only leads me to that line. Is there a way to find out which part of the line is causing the exception?"},{"owner":{"account_id":4910667,"reputation":44671,"user_id":3956070,"display_name":"Jos&#233; Pereda"},"score":0,"creation_date":1488738246,"post_id":42611487,"comment_id":72353370,"body_markdown":"I suggest you use just the name of the css file, and place it under the same package path as `Utility` class. Or use an absolute path, and use `&quot;/&quot; + cssFile` as path to get the resource.","body":"I suggest you use just the name of the css file, and place it under the same package path as <code>Utility</code> class. Or use an absolute path, and use <code>&quot;&#47;&quot; + cssFile</code> as path to get the resource."},{"owner":{"account_id":8664592,"reputation":9965,"user_id":6485651,"accept_rate":65,"display_name":"Zephyr"},"score":0,"creation_date":1488738453,"post_id":42611487,"comment_id":72353454,"body_markdown":"I can&#39;t actually place the `.css` into the package with `Utility` as the StyleSheets are distributed as external files.","body":"I can&#39;t actually place the <code>.css</code> into the package with <code>Utility</code> as the StyleSheets are distributed as external files."},{"owner":{"account_id":4910667,"reputation":44671,"user_id":3956070,"display_name":"Jos&#233; Pereda"},"score":0,"creation_date":1488738656,"post_id":42611487,"comment_id":72353525,"body_markdown":"Why don&#39;t you use the same approach you already have? Use your `css` file and then call `parser.parse(css.toURI().toURL())`.","body":"Why don&#39;t you use the same approach you already have? Use your <code>css</code> file and then call <code>parser.parse(css.toURI().toURL())</code>."},{"owner":{"account_id":8664592,"reputation":9965,"user_id":6485651,"accept_rate":65,"display_name":"Zephyr"},"score":0,"creation_date":1488738697,"post_id":42611487,"comment_id":72353542,"body_markdown":"I actually just caught that too :) Will give it a shot, thank you!","body":"I actually just caught that too :) Will give it a shot, thank you!"},{"owner":{"account_id":8664592,"reputation":9965,"user_id":6485651,"accept_rate":65,"display_name":"Zephyr"},"score":0,"creation_date":1488739044,"post_id":42611487,"comment_id":72353660,"body_markdown":"That did it. Thanks again, Jose!","body":"That did it. Thanks again, Jose!"}],"tags":[],"owner":{"account_id":4910667,"reputation":44671,"user_id":3956070,"display_name":"Jos&#233; Pereda"},"comment_count":9,"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1692260012,"creation_date":1488734385,"answer_id":42611487,"question_id":42609756,"body_markdown":"There are several ways you can tackle the conversion of a CSS declaration into a Color.\r\n\r\n**Style an auxiliar node**\r\n\r\nThis is quite simple, but effective: The idea is that you could just style the background color of a node with the same css, and then set the colorPicker value with that color.\r\n\r\nThe only thing you need to take into account in this case is that the node is styled _only_ when is added to a scene.\r\n\r\nSo you have to add the node to the scene. Adding a node with 0x0 size won&#39;t cause any issue, but maybe you don&#39;t want it to be there, so you can use an auxiliar scene.\r\n\r\n    public class CSSParsingApp extends Application {\r\n\r\n        @Override\r\n        public void start(Stage primaryStage) {\r\n            ColorPicker cpBackground = new ColorPicker(retrieveColor(&quot;value1&quot;));\r\n            ColorPicker cpBase = new ColorPicker(retrieveColor(&quot;value2&quot;));\r\n            ColorPicker cpDefaultButton = new ColorPicker(retrieveColor(&quot;value3&quot;));\r\n\r\n            VBox root = new VBox(10, cpBackground, cpDefaultButton, cpBase);\r\n            root.setAlignment(Pos.CENTER);\r\n\r\n            Scene scene = new Scene(root, 300, 250);\r\n            scene.getStylesheets().add(getClass().getResource(&quot;style.css&quot;).toExternalForm());\r\n\r\n            primaryStage.setScene(scene);\r\n            primaryStage.show();\r\n        }\r\n\r\n        private Color retrieveColor(String value) {\r\n            Pane pane = new Pane();\r\n            pane.getStyleClass().add(value);\r\n\r\n            Scene sceneAux = new Scene(pane);\r\n            sceneAux.getStylesheets().add(getClass().getResource(&quot;style.css&quot;).toExternalForm());\r\n            pane.applyCss();\r\n            return (Color) pane.getBackground().getFills().get(0).getFill();\r\n        }\r\n\r\n        public static void main(String[] args) {\r\n            launch(args);\r\n        }\r\n\r\n    }\r\n\r\nwhere `style.css` is:\r\n\r\n    .root {\r\n        -fx-background: #325c81;\r\n        -fx-default-button: #77a3ca;\r\n        -fx-base: #a7c4dd;\r\n    }\r\n\r\n    .value1 {\r\n        -fx-background-color: -fx-background;\r\n    }\r\n    .value2 {\r\n        -fx-background-color: -fx-default-button;\r\n    }\r\n    .value3 {\r\n        -fx-background-color: -fx-base;\r\n    }\r\n\r\n**Use StylableProperties**\r\n\r\nA similar, more elegant solution is found [here][1]. It uses `StylableProperties` to create a node, that you can style with a custom `-named-color` property, and then adds this `helper` node to the main scene.\r\n\r\nBasically it is the same idea as the one above, maybe more clean, as you don&#39;t need to modify your css file.\r\n\r\nUsing `CssToColorHelper`, your code will be like this:\r\n\r\n    public class CSSParsingApp extends Application {\r\n\r\n        private CssToColorHelper helper = new CssToColorHelper();\r\n\r\n        @Override\r\n        public void start(Stage primaryStage) {\r\n            ColorPicker cpBackground = new ColorPicker();\r\n            ColorPicker cpBase = new ColorPicker();\r\n            ColorPicker cpDefaultButton = new ColorPicker();  \r\n\r\n            VBox root = new VBox(10, cpBackground, cpDefaultButton, cpBase, helper);\r\n            root.setAlignment(Pos.CENTER);\r\n\r\n            Scene scene = new Scene(root, 300, 250);\r\n            scene.getStylesheets().add(getClass().getResource(&quot;style.css&quot;).toExternalForm());\r\n\r\n            cpBackground.setValue(getNamedColor(&quot;-fx-background&quot;));\r\n            cpDefaultButton.setValue(getNamedColor(&quot;-fx-default-button&quot;));\r\n            cpBase.setValue(getNamedColor(&quot;-fx-base&quot;));\r\n\r\n            primaryStage.setScene(scene);\r\n            primaryStage.show();\r\n        }\r\n\r\n        private Color getNamedColor(String name) {\r\n            helper.setStyle(&quot;-named-color: &quot; + name + &quot;;&quot;);\r\n            helper.applyCss();\r\n\r\n            return helper.getNamedColor();      \r\n        }\r\n        /**\r\n         * @param args the command line arguments\r\n         */\r\n        public static void main(String[] args) {\r\n            launch(args);\r\n        }\r\n    }\r\n\r\nwhere `style.css` is your css file:\r\n\r\n    .root {\r\n        -fx-background: #325c81;\r\n        -fx-default-button: #77a3ca;\r\n        -fx-base: #a7c4dd;\r\n    }\r\n\r\n**Use JavaFX CssParser**\r\n\r\nIf you are looking for a CSS parser, why don&#39;t you just use the one included in JavaFX, the one you actually use to apply styling to your app?\r\n\r\nIt is under `javafx.css.CssParser`, and it has been a part of the public API since [JavaFX 9][2]. \r\n\r\nWith it you can parse the CSS file and retrieve any parsed value easily.\r\n\r\n     public class CSSParsingApp extends Application {\r\n\r\n        @Override\r\n        public void start(Stage primaryStage) {\r\n            ColorPicker cpBackground = new ColorPicker();\r\n            ColorPicker cpBase = new ColorPicker();\r\n            ColorPicker cpDefaultButton = new ColorPicker();  \r\n\r\n            VBox root = new VBox(10, cpBackground, cpDefaultButton, cpBase);\r\n            root.setAlignment(Pos.CENTER);\r\n\r\n            Scene scene = new Scene(root, 300, 250);\r\n            scene.getStylesheets().add(getClass().getResource(&quot;style.css&quot;).toExternalForm());\r\n\r\n            cpBackground.setValue(parseColor(&quot;-fx-background&quot;));\r\n            cpDefaultButton.setValue(parseColor(&quot;-fx-default-button&quot;));\r\n            cpBase.setValue(parseColor(&quot;-fx-base&quot;));\r\n\r\n            primaryStage.setScene(scene);\r\n            primaryStage.show();\r\n        }\r\n\r\n        private Color parseColor(String property) {\r\n            CssParser parser = new CssParser();\r\n            try {\r\n                Stylesheet css = parser.parse(getClass().getResource(&quot;style.css&quot;).toURI().toURL());\r\n                final Rule rootRule = css.getRules().get(0); // .root\r\n                return (Color) rootRule.getDeclarations().stream()\r\n                    .filter(d -&gt; d.getProperty().equals(property))\r\n                    .findFirst()\r\n                    .map(d -&gt; ColorConverter.getInstance().convert(d.getParsedValue(), null))\r\n                    .get();\r\n            } catch (URISyntaxException | IOException ex) { }\r\n            return Color.WHITE;\r\n        }\r\n\r\n        /**\r\n         * @param args the command line arguments\r\n         */\r\n        public static void main(String[] args) {\r\n            launch(args);\r\n        }\r\n    }\r\n\r\nwhere `style.css` is your css file:\r\n\r\n    .root {\r\n        -fx-background: #325c81;\r\n        -fx-default-button: #77a3ca;\r\n        -fx-base: #a7c4dd;\r\n    }\r\n\r\n  [1]: https://stackoverflow.com/questions/32625212/convert-color-from-css-to-javafx-color-object\r\n  [2]: https://openjfx.io/javadoc/20/javafx.graphics/javafx/css/CssParser.html","title":"How to parse/map JavaFX CSS file to retrieve its properties and values?","body":"<p>There are several ways you can tackle the conversion of a CSS declaration into a Color.</p>\n<p><strong>Style an auxiliar node</strong></p>\n<p>This is quite simple, but effective: The idea is that you could just style the background color of a node with the same css, and then set the colorPicker value with that color.</p>\n<p>The only thing you need to take into account in this case is that the node is styled <em>only</em> when is added to a scene.</p>\n<p>So you have to add the node to the scene. Adding a node with 0x0 size won't cause any issue, but maybe you don't want it to be there, so you can use an auxiliar scene.</p>\n<pre><code>public class CSSParsingApp extends Application {\n\n    @Override\n    public void start(Stage primaryStage) {\n        ColorPicker cpBackground = new ColorPicker(retrieveColor(&quot;value1&quot;));\n        ColorPicker cpBase = new ColorPicker(retrieveColor(&quot;value2&quot;));\n        ColorPicker cpDefaultButton = new ColorPicker(retrieveColor(&quot;value3&quot;));\n\n        VBox root = new VBox(10, cpBackground, cpDefaultButton, cpBase);\n        root.setAlignment(Pos.CENTER);\n\n        Scene scene = new Scene(root, 300, 250);\n        scene.getStylesheets().add(getClass().getResource(&quot;style.css&quot;).toExternalForm());\n\n        primaryStage.setScene(scene);\n        primaryStage.show();\n    }\n\n    private Color retrieveColor(String value) {\n        Pane pane = new Pane();\n        pane.getStyleClass().add(value);\n\n        Scene sceneAux = new Scene(pane);\n        sceneAux.getStylesheets().add(getClass().getResource(&quot;style.css&quot;).toExternalForm());\n        pane.applyCss();\n        return (Color) pane.getBackground().getFills().get(0).getFill();\n    }\n\n    public static void main(String[] args) {\n        launch(args);\n    }\n\n}\n</code></pre>\n<p>where <code>style.css</code> is:</p>\n<pre><code>.root {\n    -fx-background: #325c81;\n    -fx-default-button: #77a3ca;\n    -fx-base: #a7c4dd;\n}\n\n.value1 {\n    -fx-background-color: -fx-background;\n}\n.value2 {\n    -fx-background-color: -fx-default-button;\n}\n.value3 {\n    -fx-background-color: -fx-base;\n}\n</code></pre>\n<p><strong>Use StylableProperties</strong></p>\n<p>A similar, more elegant solution is found <a href=\"https://stackoverflow.com/questions/32625212/convert-color-from-css-to-javafx-color-object\">here</a>. It uses <code>StylableProperties</code> to create a node, that you can style with a custom <code>-named-color</code> property, and then adds this <code>helper</code> node to the main scene.</p>\n<p>Basically it is the same idea as the one above, maybe more clean, as you don't need to modify your css file.</p>\n<p>Using <code>CssToColorHelper</code>, your code will be like this:</p>\n<pre><code>public class CSSParsingApp extends Application {\n\n    private CssToColorHelper helper = new CssToColorHelper();\n\n    @Override\n    public void start(Stage primaryStage) {\n        ColorPicker cpBackground = new ColorPicker();\n        ColorPicker cpBase = new ColorPicker();\n        ColorPicker cpDefaultButton = new ColorPicker();  \n\n        VBox root = new VBox(10, cpBackground, cpDefaultButton, cpBase, helper);\n        root.setAlignment(Pos.CENTER);\n\n        Scene scene = new Scene(root, 300, 250);\n        scene.getStylesheets().add(getClass().getResource(&quot;style.css&quot;).toExternalForm());\n\n        cpBackground.setValue(getNamedColor(&quot;-fx-background&quot;));\n        cpDefaultButton.setValue(getNamedColor(&quot;-fx-default-button&quot;));\n        cpBase.setValue(getNamedColor(&quot;-fx-base&quot;));\n\n        primaryStage.setScene(scene);\n        primaryStage.show();\n    }\n\n    private Color getNamedColor(String name) {\n        helper.setStyle(&quot;-named-color: &quot; + name + &quot;;&quot;);\n        helper.applyCss();\n\n        return helper.getNamedColor();      \n    }\n    /**\n     * @param args the command line arguments\n     */\n    public static void main(String[] args) {\n        launch(args);\n    }\n}\n</code></pre>\n<p>where <code>style.css</code> is your css file:</p>\n<pre><code>.root {\n    -fx-background: #325c81;\n    -fx-default-button: #77a3ca;\n    -fx-base: #a7c4dd;\n}\n</code></pre>\n<p><strong>Use JavaFX CssParser</strong></p>\n<p>If you are looking for a CSS parser, why don't you just use the one included in JavaFX, the one you actually use to apply styling to your app?</p>\n<p>It is under <code>javafx.css.CssParser</code>, and it has been a part of the public API since <a href=\"https://openjfx.io/javadoc/20/javafx.graphics/javafx/css/CssParser.html\" rel=\"nofollow noreferrer\">JavaFX 9</a>.</p>\n<p>With it you can parse the CSS file and retrieve any parsed value easily.</p>\n<pre><code> public class CSSParsingApp extends Application {\n\n    @Override\n    public void start(Stage primaryStage) {\n        ColorPicker cpBackground = new ColorPicker();\n        ColorPicker cpBase = new ColorPicker();\n        ColorPicker cpDefaultButton = new ColorPicker();  \n\n        VBox root = new VBox(10, cpBackground, cpDefaultButton, cpBase);\n        root.setAlignment(Pos.CENTER);\n\n        Scene scene = new Scene(root, 300, 250);\n        scene.getStylesheets().add(getClass().getResource(&quot;style.css&quot;).toExternalForm());\n\n        cpBackground.setValue(parseColor(&quot;-fx-background&quot;));\n        cpDefaultButton.setValue(parseColor(&quot;-fx-default-button&quot;));\n        cpBase.setValue(parseColor(&quot;-fx-base&quot;));\n\n        primaryStage.setScene(scene);\n        primaryStage.show();\n    }\n\n    private Color parseColor(String property) {\n        CssParser parser = new CssParser();\n        try {\n            Stylesheet css = parser.parse(getClass().getResource(&quot;style.css&quot;).toURI().toURL());\n            final Rule rootRule = css.getRules().get(0); // .root\n            return (Color) rootRule.getDeclarations().stream()\n                .filter(d -&gt; d.getProperty().equals(property))\n                .findFirst()\n                .map(d -&gt; ColorConverter.getInstance().convert(d.getParsedValue(), null))\n                .get();\n        } catch (URISyntaxException | IOException ex) { }\n        return Color.WHITE;\n    }\n\n    /**\n     * @param args the command line arguments\n     */\n    public static void main(String[] args) {\n        launch(args);\n    }\n}\n</code></pre>\n<p>where <code>style.css</code> is your css file:</p>\n<pre><code>.root {\n    -fx-background: #325c81;\n    -fx-default-button: #77a3ca;\n    -fx-base: #a7c4dd;\n}\n</code></pre>\n"}],"owner":{"account_id":8664592,"reputation":9965,"user_id":6485651,"accept_rate":65,"display_name":"Zephyr"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2977,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":42611487,"answer_count":1,"score":4,"last_activity_date":1692260012,"creation_date":1488725061,"question_id":42609756,"body_markdown":"My application allows users to use custom CSS themes to style the interface.  I have several pre-built &quot;themes&quot; available to choose from that are very simple, with only 3 properties.\r\n\r\n**Sample CSS:**\r\n\r\n    .root{\r\n        -fx-background: #325c81;\r\n        -fx-default-button: #77a3ca;\r\n        -fx-base: #a7c4dd;\r\n    }\r\n\r\nThe application has 3 `ColorPicker` controls that need to allow users to select a color for each of those properties and save back to the CSS file.\r\n\r\nI have no problem with actually writing the CSS file, but I cannot find a way to parse the `.css` file in order to set the values of the `ColorPicker` controls with the values from the `.css` file.\r\n\r\n**Basic Program Flow**\r\n\r\n1) User selects a premade theme from `ComboBox`:\r\n\r\n    cboPresetTheme.valueProperty().addListener((observable, priorTheme, newTheme) -&gt; {\r\n                    Utility.applyTheme(cboPresetTheme.getScene(), newTheme);\r\n                });\r\n\r\n2) The associated `.css` file is loaded and applied to the current `Scene`:   \r\n\r\n    public static void applyTheme(Scene scene, Theme theme) {\r\n        scene.getStylesheets().clear();\r\n\r\n        File css = new File(&quot;themes/&quot; + theme.getFileName());\r\n        File fontFile = new File(&quot;themes/Font.css&quot;);\r\n\r\n        scene.getStylesheets().addAll(\r\n                css.toURI().toString(),\r\n                fontFile.toURI().toString());\r\n    }\r\n\r\n3) The 3 `ColorPicker` controls are updated with the values from the applied `StyleSheet`:\r\n\r\n    cpBackground.setValue(Color.valueOf(cssFileBackground));\r\n    cpBase.setValue(Color.valueOf(cssFileBase));\r\n    cpDefaultButton.setValue(Color.valueOf(cssFileDefaultButton));\r\n\r\nWhile I have no problem with steps 1 &amp; 2, I do not know how to process step 3.\r\n\r\nI have looked at other CSS Parser libraries (thank you, Google) but they seem more geared toward stand CSS and don&#39;t support FX properties. The StackExchange question [edit or parse FX-CSS file programmatically][1] appears to be asking the same question but it was never successfully answered.\r\n\r\nOne answer suggests using [CSS Parser][2] to accomplish this, but as there is little to know documentation (and what is there is beyond my current comprehension level), I don&#39;t know where to begin.\r\n\r\nI understand there may not be a standard API currently available to accomplish this, but I was hoping there may be a simple library or solution out there that I have been unable to find.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/33776022/javafx-edit-or-parse-fx-css-file-programmatically &quot;edit or parse FX-CSS file programmatically&quot;\r\n  [2]: http://sourceforge.net/projects/cssparser/","title":"How to parse/map JavaFX CSS file to retrieve its properties and values?","body":"<p>My application allows users to use custom CSS themes to style the interface.  I have several pre-built \"themes\" available to choose from that are very simple, with only 3 properties.</p>\n\n<p><strong>Sample CSS:</strong></p>\n\n<pre><code>.root{\n    -fx-background: #325c81;\n    -fx-default-button: #77a3ca;\n    -fx-base: #a7c4dd;\n}\n</code></pre>\n\n<p>The application has 3 <code>ColorPicker</code> controls that need to allow users to select a color for each of those properties and save back to the CSS file.</p>\n\n<p>I have no problem with actually writing the CSS file, but I cannot find a way to parse the <code>.css</code> file in order to set the values of the <code>ColorPicker</code> controls with the values from the <code>.css</code> file.</p>\n\n<p><strong>Basic Program Flow</strong></p>\n\n<p>1) User selects a premade theme from <code>ComboBox</code>:</p>\n\n<pre><code>cboPresetTheme.valueProperty().addListener((observable, priorTheme, newTheme) -&gt; {\n                Utility.applyTheme(cboPresetTheme.getScene(), newTheme);\n            });\n</code></pre>\n\n<p>2) The associated <code>.css</code> file is loaded and applied to the current <code>Scene</code>:   </p>\n\n<pre><code>public static void applyTheme(Scene scene, Theme theme) {\n    scene.getStylesheets().clear();\n\n    File css = new File(\"themes/\" + theme.getFileName());\n    File fontFile = new File(\"themes/Font.css\");\n\n    scene.getStylesheets().addAll(\n            css.toURI().toString(),\n            fontFile.toURI().toString());\n}\n</code></pre>\n\n<p>3) The 3 <code>ColorPicker</code> controls are updated with the values from the applied <code>StyleSheet</code>:</p>\n\n<pre><code>cpBackground.setValue(Color.valueOf(cssFileBackground));\ncpBase.setValue(Color.valueOf(cssFileBase));\ncpDefaultButton.setValue(Color.valueOf(cssFileDefaultButton));\n</code></pre>\n\n<p>While I have no problem with steps 1 &amp; 2, I do not know how to process step 3.</p>\n\n<p>I have looked at other CSS Parser libraries (thank you, Google) but they seem more geared toward stand CSS and don't support FX properties. The StackExchange question <a href=\"https://stackoverflow.com/questions/33776022/javafx-edit-or-parse-fx-css-file-programmatically\" title=\"edit or parse FX-CSS file programmatically\">edit or parse FX-CSS file programmatically</a> appears to be asking the same question but it was never successfully answered.</p>\n\n<p>One answer suggests using <a href=\"http://sourceforge.net/projects/cssparser/\" rel=\"nofollow noreferrer\">CSS Parser</a> to accomplish this, but as there is little to know documentation (and what is there is beyond my current comprehension level), I don't know where to begin.</p>\n\n<p>I understand there may not be a standard API currently available to accomplish this, but I was hoping there may be a simple library or solution out there that I have been unable to find.</p>\n"},{"tags":["java","concurrency","java-8","future","completable-future"],"comments":[{"owner":{"account_id":2611247,"reputation":1756,"user_id":2261315,"accept_rate":60,"display_name":"Andrei Epure"},"score":0,"creation_date":1491383618,"post_id":43226405,"comment_id":73523515,"body_markdown":"Did you look into using a CompletionService rather than mapping the results to an array? http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CompletionService.html","body":"Did you look into using a CompletionService rather than mapping the results to an array? <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CompletionService.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/api/java/util/concurrent/&hellip;</a>"},{"owner":{"account_id":9119853,"reputation":585,"user_id":6785649,"display_name":"Samuel Kok"},"score":0,"creation_date":1491383679,"post_id":43226405,"comment_id":73523563,"body_markdown":"Perhaps try [CompletionService](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CompletionService.html)? Here is an [explanation](http://stackoverflow.com/a/19348417/6785649).","body":"Perhaps try <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CompletionService.html\" rel=\"nofollow noreferrer\">CompletionService</a>? Here is an <a href=\"http://stackoverflow.com/a/19348417/6785649\">explanation</a>."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":4,"creation_date":1491383994,"post_id":43226405,"comment_id":73523773,"body_markdown":"The `CompletionService` is quite useless if you don’t have control over the code that produces the `Future`/submits the job to an `Executor`.","body":"The <code>CompletionService</code> is quite useless if you don’t have control over the code that produces the <code>Future</code>/submits the job to an <code>Executor</code>."}],"answers":[{"tags":[],"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1491384684,"creation_date":1491384111,"answer_id":43226982,"question_id":43226405,"body_markdown":"Having this list of `List&lt;Future&lt;Object&gt;&gt;`, I would submit it to a custom pool, instead of using the default stream parallel processing.\r\n\r\nThat is because the stream api uses a common pool for parallel processing and you will call `get` on those Futures(if it takes significant time for processing) - you will block all other stream operations that use parallel operations within your application until this one is done.\r\n\r\nThis would a bit like this:\r\n\r\n\r\n    forJoinPool.submit( () -&gt; list.stream().parallel().map(future -&gt; future.get()).collect(Collectors.toList())).get();\r\n\r\n\r\nI would go with a custom pool like shown [here][1]\r\n\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/21163108/custom-thread-pool-in-java-8-parallel-stream","title":"Most efficient way to stream on list of Futures","body":"<p>Having this list of <code>List&lt;Future&lt;Object&gt;&gt;</code>, I would submit it to a custom pool, instead of using the default stream parallel processing.</p>\n\n<p>That is because the stream api uses a common pool for parallel processing and you will call <code>get</code> on those Futures(if it takes significant time for processing) - you will block all other stream operations that use parallel operations within your application until this one is done.</p>\n\n<p>This would a bit like this:</p>\n\n<pre><code>forJoinPool.submit( () -&gt; list.stream().parallel().map(future -&gt; future.get()).collect(Collectors.toList())).get();\n</code></pre>\n\n<p>I would go with a custom pool like shown <a href=\"https://stackoverflow.com/questions/21163108/custom-thread-pool-in-java-8-parallel-stream\">here</a></p>\n"},{"tags":[],"owner":{"account_id":5786048,"reputation":1847,"user_id":4565235,"display_name":"David Lilljegren"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692259645,"creation_date":1692259645,"answer_id":76919568,"question_id":43226405,"body_markdown":"I found the stream().parallel() tricky to control, depending on the data structure of origin it may not always run in parallel.\r\nHere&#39;s a way to fork join a stream of parallel tasks using *CompletableFuture.join*.\r\n\r\n        var pool = new ForkJoinPool(4);\r\n        IntFunction&lt;CompletableFuture&lt;IntStream&gt;&gt; makePair = i -&gt; CompletableFuture.supplyAsync(() -&gt; IntStream.of(i, i), pool);\r\n        var res = IntStream.of(1, 2, 3, 4, 5).mapToObj(makePair).flatMapToInt(CompletableFuture::join).sum();\r\n        System.out.println(res);\r\n\r\n","title":"Most efficient way to stream on list of Futures","body":"<p>I found the stream().parallel() tricky to control, depending on the data structure of origin it may not always run in parallel.\nHere's a way to fork join a stream of parallel tasks using <em>CompletableFuture.join</em>.</p>\n<pre><code>    var pool = new ForkJoinPool(4);\n    IntFunction&lt;CompletableFuture&lt;IntStream&gt;&gt; makePair = i -&gt; CompletableFuture.supplyAsync(() -&gt; IntStream.of(i, i), pool);\n    var res = IntStream.of(1, 2, 3, 4, 5).mapToObj(makePair).flatMapToInt(CompletableFuture::join).sum();\n    System.out.println(res);\n</code></pre>\n"}],"owner":{"account_id":7751906,"reputation":121,"user_id":5867551,"display_name":"syfro"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10178,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":43226982,"answer_count":2,"score":8,"last_activity_date":1692259645,"creation_date":1491382520,"question_id":43226405,"body_markdown":"I&#39;m calling an async client method by streaming over a list of objects. The method returns Future&lt;Object&gt;.\r\n\r\nWhat&#39;s the best way to iterate over the list of Futures returned after the call (so as to process those Future which comes first)?\r\n\r\nNote: The async client only returns Future not CompletableFuture.\r\n\r\nFollowing is the code:\r\n\r\n    List&lt;Future&lt;Object&gt;&gt; listOfFuture = objectsToProcess.parallelStream()\r\n        .map((object) -&gt; {\r\n            /* calling an async client returning a Future&lt;Object&gt; */ })\r\n        .collect(Collectors.toList());\r\n\r\n","title":"Most efficient way to stream on list of Futures","body":"<p>I'm calling an async client method by streaming over a list of objects. The method returns Future.</p>\n\n<p>What's the best way to iterate over the list of Futures returned after the call (so as to process those Future which comes first)?</p>\n\n<p>Note: The async client only returns Future not CompletableFuture.</p>\n\n<p>Following is the code:</p>\n\n<pre><code>List&lt;Future&lt;Object&gt;&gt; listOfFuture = objectsToProcess.parallelStream()\n    .map((object) -&gt; {\n        /* calling an async client returning a Future&lt;Object&gt; */ })\n    .collect(Collectors.toList());\n</code></pre>\n"},{"tags":["java","android","rest","android-recyclerview","pagination"],"comments":[{"owner":{"account_id":4523707,"reputation":6025,"user_id":3676184,"accept_rate":17,"display_name":"Pavya"},"score":0,"creation_date":1511337126,"post_id":47429347,"comment_id":81813095,"body_markdown":"add your code..","body":"add your code.."},{"owner":{"account_id":2111946,"reputation":1211,"user_id":7801361,"accept_rate":80,"display_name":"Alaa AbuZarifa"},"score":0,"creation_date":1511337168,"post_id":47429347,"comment_id":81813116,"body_markdown":"I&#39;ve tried a bunch of ways... I&#39;ll post some.","body":"I&#39;ve tried a bunch of ways... I&#39;ll post some."},{"owner":{"account_id":7255837,"reputation":744,"user_id":5534518,"accept_rate":43,"display_name":"Ionut J. Bejan"},"score":0,"creation_date":1511337316,"post_id":47429347,"comment_id":81813188,"body_markdown":"Question: the list of data from next paginated answer from the server, you want to add it to the existing one or replace it ?","body":"Question: the list of data from next paginated answer from the server, you want to add it to the existing one or replace it ?"},{"owner":{"account_id":3277843,"reputation":1754,"user_id":2759296,"accept_rate":83,"display_name":"hifromantal"},"score":0,"creation_date":1511337431,"post_id":47429347,"comment_id":81813258,"body_markdown":"Could you add an example of the API response? Do you have any ownership above this API so that in case you want to, you could change the response model?","body":"Could you add an example of the API response? Do you have any ownership above this API so that in case you want to, you could change the response model?"},{"owner":{"account_id":2111946,"reputation":1211,"user_id":7801361,"accept_rate":80,"display_name":"Alaa AbuZarifa"},"score":0,"creation_date":1511337538,"post_id":47429347,"comment_id":81813335,"body_markdown":"@IonutJ.Bejan well, I think adding it better ux. since all items won&#39;t be too big anyway.","body":"@IonutJ.Bejan well, I think adding it better ux. since all items won&#39;t be too big anyway."},{"owner":{"account_id":2111946,"reputation":1211,"user_id":7801361,"accept_rate":80,"display_name":"Alaa AbuZarifa"},"score":0,"creation_date":1511337571,"post_id":47429347,"comment_id":81813354,"body_markdown":"see code added guys.","body":"see code added guys."},{"owner":{"account_id":2111946,"reputation":1211,"user_id":7801361,"accept_rate":80,"display_name":"Alaa AbuZarifa"},"score":0,"creation_date":1511337702,"post_id":47429347,"comment_id":81813445,"body_markdown":"@anthonymonori I don&#39;t think I can, since the same api is already implemented in the ios version of the app. so I can change the model. but I will post the response for u to see it.","body":"@anthonymonori I don&#39;t think I can, since the same api is already implemented in the ios version of the app. so I can change the model. but I will post the response for u to see it."},{"owner":{"account_id":2111946,"reputation":1211,"user_id":7801361,"accept_rate":80,"display_name":"Alaa AbuZarifa"},"score":0,"creation_date":1511337816,"post_id":47429347,"comment_id":81813515,"body_markdown":"@pskink any example for api request, the site gives a db example.","body":"@pskink any example for api request, the site gives a db example."},{"owner":{"display_name":"user6490462"},"score":0,"creation_date":1511340785,"post_id":47429347,"comment_id":81815120,"body_markdown":"1-on recycle scroll add new response to `data` list.  2-notifyDataChange to recycleView adapter. 3-have fun.","body":"1-on recycle scroll add new response to <code>data</code> list.  2-notifyDataChange to recycleView adapter. 3-have fun."},{"owner":{"account_id":2111946,"reputation":1211,"user_id":7801361,"accept_rate":80,"display_name":"Alaa AbuZarifa"},"score":0,"creation_date":1511348932,"post_id":47429347,"comment_id":81820480,"body_markdown":"@Ibrahim can you post an answer with an example?","body":"@Ibrahim can you post an answer with an example?"},{"owner":{"display_name":"user6490462"},"score":0,"creation_date":1511377609,"post_id":47429347,"comment_id":81839418,"body_markdown":"It&#39;s not much different comparing with @lonut answer.","body":"It&#39;s not much different comparing with @lonut answer."}],"answers":[{"comments":[{"owner":{"account_id":7255837,"reputation":744,"user_id":5534518,"accept_rate":43,"display_name":"Ionut J. Bejan"},"score":0,"creation_date":1511426565,"post_id":47429538,"comment_id":81856775,"body_markdown":"I have a question: Why do you call `getData(maxLastVisiblePosition);` ? I suppose `maxLastVisiblePosition` is 10 or something... Also, `onSuccess()` method you do `data.clear();  data.addAll(list);` of course you will have only 10 elements(but they are changing?)","body":"I have a question: Why do you call <code>getData(maxLastVisiblePosition);</code> ? I suppose <code>maxLastVisiblePosition</code> is 10 or something... Also, <code>onSuccess()</code> method you do <code>data.clear();  data.addAll(list);</code> of course you will have only 10 elements(but they are changing?)"},{"owner":{"account_id":2111946,"reputation":1211,"user_id":7801361,"accept_rate":80,"display_name":"Alaa AbuZarifa"},"score":1,"creation_date":1511431612,"post_id":47429538,"comment_id":81860203,"body_markdown":"I thought it was responsible for the pages count.! but you are right about `data.clear()`I shouldn&#39;t clear the data if I want to add the next 10 items to the original ones. But I solved my problem after a lot of search with `Paginate` Library. I post the solution in a new answer in a moment, so thanks anyway man for the help.","body":"I thought it was responsible for the pages count.! but you are right about <code>data.clear()</code>I shouldn&#39;t clear the data if I want to add the next 10 items to the original ones. But I solved my problem after a lot of search with <code>Paginate</code> Library. I post the solution in a new answer in a moment, so thanks anyway man for the help."}],"tags":[],"owner":{"account_id":7255837,"reputation":744,"user_id":5534518,"accept_rate":43,"display_name":"Ionut J. Bejan"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1511337701,"creation_date":1511337701,"answer_id":47429538,"question_id":47429347,"body_markdown":"Here is how I did it in a project... In this case I add more elements when bottom of the list is reached\r\n\r\n    rv_flohtainer_events.addOnScrollListener(new RecyclerView.OnScrollListener() {\r\n            @Override\r\n            public void onScrolled(RecyclerView recyclerView, int dx, int dy) {\r\n                super.onScrolled(recyclerView, dx, dy);\r\n                if (!rv_flohtainer_events.canScrollVertically(1)){\r\n                    if (!(eventsResponse.getCurrent_page() == eventsResponse.getLast_page())) {\r\n                        pageEventsRequest++;\r\n                        makeVendorEventsRequest();\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\nThe request I do is with retrofit, and it looks like this \r\n\r\n    @GET(RestClient.API_EVENTS_URL)\r\n    Call&lt;EventsResponse&gt; getEvents(@Query(&quot;page&quot;) int page)","title":"How to implement pagination with recyclerview via api url indexing","body":"<p>Here is how I did it in a project... In this case I add more elements when bottom of the list is reached</p>\n\n<pre><code>rv_flohtainer_events.addOnScrollListener(new RecyclerView.OnScrollListener() {\n        @Override\n        public void onScrolled(RecyclerView recyclerView, int dx, int dy) {\n            super.onScrolled(recyclerView, dx, dy);\n            if (!rv_flohtainer_events.canScrollVertically(1)){\n                if (!(eventsResponse.getCurrent_page() == eventsResponse.getLast_page())) {\n                    pageEventsRequest++;\n                    makeVendorEventsRequest();\n                }\n            }\n        }\n    });\n</code></pre>\n\n<p>The request I do is with retrofit, and it looks like this </p>\n\n<pre><code>@GET(RestClient.API_EVENTS_URL)\nCall&lt;EventsResponse&gt; getEvents(@Query(\"page\") int page)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2111946,"reputation":1211,"user_id":7801361,"accept_rate":80,"display_name":"Alaa AbuZarifa"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1511432002,"creation_date":1511432002,"answer_id":47452903,"question_id":47429347,"body_markdown":" After some time, I did it using **[Paginate Library][1]**\r\n\r\n-----\r\n\r\n**The Code**\r\n\r\n \r\n    public class ChallengesListFragment extends BaseFragment implements OnRefreshListener, Paginate.Callbacks { \r\n    \r\n    // other variables..\r\n      private int currentPage = 1;\r\n      private boolean hasMore;\r\n      private boolean loadingInProgress;\r\n    \r\n    \r\n      @RequiresApi(api = VERSION_CODES.LOLLIPOP)\r\n      @Override\r\n      public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n          Bundle savedInstanceState) {\r\n        View rootView = inflater.inflate(R.layout.fragment_challenges_list, container, false);\r\n        initView(rootView);\r\n        initToolbar();\r\n        initRecycler();\r\n        getData();\r\n    \r\n        return rootView;\r\n      }\r\n      \r\n      private void initRecycler() {\r\n        data = new ArrayList&lt;&gt;();\r\n        mLayoutManager = new LinearLayoutManager(getActivity());\r\n        recyclerview.setLayoutManager(mLayoutManager);\r\n        adapter = new ChallengesAdapter(data, getActivity(), this);\r\n        recyclerview.setAdapter(adapter);\r\n    \r\n        Paginate.with(recyclerview, this)\r\n            .setLoadingTriggerThreshold(3)\r\n            .addLoadingListItem(false)\r\n            .build();\r\n      }\r\n    \r\n      private void getData() {\r\n    \r\n         swipeRefresh.setRefreshing(true);\r\n        WebRequests.GetActiveChallenges(currentPage, new onResult() {\r\n          @Override\r\n          public void onSuccess(Object object) {\r\n    \r\n            ArrayList&lt;Challenge&gt; list = (ArrayList&lt;Challenge&gt;) object;\r\n            data.addAll(list);\r\n            adapter.notifyDataSetChanged();\r\n    \r\n            if (list.size() == 10) {\r\n              currentPage++;\r\n              hasMore = true;\r\n            } else {\r\n              hasMore = false;\r\n            }\r\n            loadingInProgress = false;\r\n            swipeRefresh.setRefreshing(false);\r\n    \r\n    \r\n          }\r\n    \r\n          @Override\r\n          public void onFail(Object object) {\r\n            Toast.makeText(getActivity(), &quot;Something went wrong, try again later&quot;,\r\n                Toast.LENGTH_SHORT).show(); \r\n            swipeRefresh.setRefreshing(false);\r\n    \r\n          }\r\n        });\r\n    \r\n      } \r\n    \r\n      public ChallengesListFragment() {\r\n       } \r\n    \r\n      @Override\r\n      public void onRefresh() {\r\n        currentPage = 1;\r\n        loadingInProgress = true;\r\n        getData();\r\n       }\r\n    \r\n      @Override\r\n      public void onLoadMore() {\r\n        loadingInProgress = true;\r\n         Handler mHandler = new Handler();\r\n        final Runnable hintRunnable = new Runnable() {\r\n          @Override\r\n          public void run() {\r\n            getData();\r\n          }\r\n        };\r\n        mHandler.postDelayed(hintRunnable, 1500);\r\n    \r\n      }\r\n    \r\n      @Override\r\n      public boolean isLoading() {\r\n        return loadingInProgress;\r\n      }\r\n    \r\n      @Override\r\n      public boolean hasLoadedAllItems() {\r\n        return !hasMore;\r\n      } \r\n\r\n    }\r\n\r\n  [1]: https://github.com/MarkoMilos/Paginate\r\n","title":"How to implement pagination with recyclerview via api url indexing","body":"<p>After some time, I did it using <strong><a href=\"https://github.com/MarkoMilos/Paginate\" rel=\"nofollow noreferrer\">Paginate Library</a></strong></p>\n\n<hr>\n\n<p><strong>The Code</strong></p>\n\n<pre><code>public class ChallengesListFragment extends BaseFragment implements OnRefreshListener, Paginate.Callbacks { \n\n// other variables..\n  private int currentPage = 1;\n  private boolean hasMore;\n  private boolean loadingInProgress;\n\n\n  @RequiresApi(api = VERSION_CODES.LOLLIPOP)\n  @Override\n  public View onCreateView(LayoutInflater inflater, ViewGroup container,\n      Bundle savedInstanceState) {\n    View rootView = inflater.inflate(R.layout.fragment_challenges_list, container, false);\n    initView(rootView);\n    initToolbar();\n    initRecycler();\n    getData();\n\n    return rootView;\n  }\n\n  private void initRecycler() {\n    data = new ArrayList&lt;&gt;();\n    mLayoutManager = new LinearLayoutManager(getActivity());\n    recyclerview.setLayoutManager(mLayoutManager);\n    adapter = new ChallengesAdapter(data, getActivity(), this);\n    recyclerview.setAdapter(adapter);\n\n    Paginate.with(recyclerview, this)\n        .setLoadingTriggerThreshold(3)\n        .addLoadingListItem(false)\n        .build();\n  }\n\n  private void getData() {\n\n     swipeRefresh.setRefreshing(true);\n    WebRequests.GetActiveChallenges(currentPage, new onResult() {\n      @Override\n      public void onSuccess(Object object) {\n\n        ArrayList&lt;Challenge&gt; list = (ArrayList&lt;Challenge&gt;) object;\n        data.addAll(list);\n        adapter.notifyDataSetChanged();\n\n        if (list.size() == 10) {\n          currentPage++;\n          hasMore = true;\n        } else {\n          hasMore = false;\n        }\n        loadingInProgress = false;\n        swipeRefresh.setRefreshing(false);\n\n\n      }\n\n      @Override\n      public void onFail(Object object) {\n        Toast.makeText(getActivity(), \"Something went wrong, try again later\",\n            Toast.LENGTH_SHORT).show(); \n        swipeRefresh.setRefreshing(false);\n\n      }\n    });\n\n  } \n\n  public ChallengesListFragment() {\n   } \n\n  @Override\n  public void onRefresh() {\n    currentPage = 1;\n    loadingInProgress = true;\n    getData();\n   }\n\n  @Override\n  public void onLoadMore() {\n    loadingInProgress = true;\n     Handler mHandler = new Handler();\n    final Runnable hintRunnable = new Runnable() {\n      @Override\n      public void run() {\n        getData();\n      }\n    };\n    mHandler.postDelayed(hintRunnable, 1500);\n\n  }\n\n  @Override\n  public boolean isLoading() {\n    return loadingInProgress;\n  }\n\n  @Override\n  public boolean hasLoadedAllItems() {\n    return !hasMore;\n  } \n\n}\n</code></pre>\n"}],"owner":{"account_id":2111946,"reputation":1211,"user_id":7801361,"accept_rate":80,"display_name":"Alaa AbuZarifa"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4564,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":47452903,"answer_count":2,"score":0,"last_activity_date":1692259303,"creation_date":1511337032,"question_id":47429347,"body_markdown":"I know the title seems weird, but basically what I want is to apply pagination to my list and control it using the url api endpoint as a parameter.!\r\n\r\nso the endpoint looks like this for example &gt; `www.someapi.com/josn/list?pageIndex=1`\r\n\r\nand it will give a response with array of 10 items, and if I want more I have to change the index of the parameter to 2 and so on.!\r\n\r\nresponse\r\n\r\n    {\r\n        &quot;Succeeded&quot;: true,\r\n        &quot;AvailableChallenge&quot;: true,\r\n        &quot;DebugError&quot;: &quot;&quot;,\r\n        &quot;NextPage&quot;: 2,\r\n        &quot;AllPages&quot;: 2,\r\n        &quot;Challenges&quot;: [\r\n            {\r\n                &quot;ID&quot;: 114,\r\n                &quot;Title&quot;: &quot;Amet sit id ratione dolorem numquam&quot;\r\n            },\r\n            {\r\n                &quot;ID&quot;: 114,\r\n                &quot;Title&quot;: &quot;Amet sit id ratione dolorem numquam&quot;\r\n            }\r\n            ...\r\n            ..\r\n            .\r\n            ]\r\n     }\r\n\r\nI tied everything, but couldn&#39;t get it done correctly, I have tried most of the solutions in **[here][1]** and no luck. \r\nI&#39;ve also tried to use these two library **[Paginate][2]** &amp; **[recyclerview-paginated][3]** and even this **[SuperRecyclerView][4]**. but it didn&#39;t work.!\r\n\r\nAny help with the best logic for controlling this will help a lot.\r\n\r\n----\r\n\r\n**Code for [SuperRecyclerView][4]** \r\n\r\n    public class ChallengesListFragment extends BaseFragment {\r\n    \r\n      private int pageNumber = 1; \r\n      private SuperRecyclerView recyclerview;\r\n      private ArrayList&lt;ChallengeActive&gt; data;\r\n      private ChallengesAdapter adapter;\r\n    \r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n          Bundle savedInstanceState) {\r\n        View rootView = inflater.inflate(R.layout.fragment_challenges_list, container, false);\r\n        initView(rootView);\r\n        initRecycler();\r\n        getData(1);\r\n        return rootView;\r\n      }\r\n    \r\n     private void initRecycler() {\r\n        data = new ArrayList&lt;&gt;();\r\n      \r\n        final RecyclerView.LayoutManager mLayoutManager = new LinearLayoutManager(getActivity());\r\n        recyclerview.setLayoutManager(mLayoutManager);\r\n        adapter = new ChallengesAdapter(data, getActivity(), this); \r\n        recyclerview.setAdapter(adapter);\r\n    \r\n        recyclerview.setupMoreListener(new OnMoreListener() {\r\n          @Override\r\n          public void onMoreAsked(int overallItemsCount, int itemsBeforeMore, int maxLastVisiblePosition) {\r\n     \r\n            pageNumber++;\r\n            getData(maxLastVisiblePosition);\r\n          }\r\n        }, 10);\r\n    \r\n        recyclerview.setRefreshListener(new OnRefreshListener() {\r\n          @Override\r\n          public void onRefresh() {\r\n            pageNumber = 1;\r\n            getData(pageNumber);\r\n          }\r\n        });\r\n       \r\n      }\r\n     \r\n      private void getData(final int pageNumber) {\r\n    \r\n          WebRequests.GetActiveChallenges(pageNumber, new onResult() {\r\n          @Override\r\n          public void onSuccess(Object object) {\r\n            ArrayList&lt;ChallengeActive&gt; list = (ArrayList&lt;ChallengeActive&gt;) object;\r\n            data.clear();\r\n            data.addAll(list);\r\n            adapter.notifyDataSetChanged();  \r\n          }\r\n    \r\n          @Override\r\n          public void onFail(Object object) {\r\n            Toast.makeText(getActivity(), &quot;Something went wrong, try again later&quot;,\r\n                Toast.LENGTH_SHORT).show(); \r\n          }\r\n        }); \r\n      } \r\n    }  \r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/26543131/how-to-implement-endless-list-with-recyclerview\r\n  [2]: https://github.com/MarkoMilos/Paginate\r\n  [3]: https://github.com/hendraanggrian/recyclerview-paginated\r\n  [4]: https://github.com/Malinskiy/SuperRecyclerView","title":"How to implement pagination with recyclerview via api url indexing","body":"<p>I know the title seems weird, but basically what I want is to apply pagination to my list and control it using the url api endpoint as a parameter.!</p>\n<p>so the endpoint looks like this for example &gt; <code>www.someapi.com/josn/list?pageIndex=1</code></p>\n<p>and it will give a response with array of 10 items, and if I want more I have to change the index of the parameter to 2 and so on.!</p>\n<p>response</p>\n<pre><code>{\n    &quot;Succeeded&quot;: true,\n    &quot;AvailableChallenge&quot;: true,\n    &quot;DebugError&quot;: &quot;&quot;,\n    &quot;NextPage&quot;: 2,\n    &quot;AllPages&quot;: 2,\n    &quot;Challenges&quot;: [\n        {\n            &quot;ID&quot;: 114,\n            &quot;Title&quot;: &quot;Amet sit id ratione dolorem numquam&quot;\n        },\n        {\n            &quot;ID&quot;: 114,\n            &quot;Title&quot;: &quot;Amet sit id ratione dolorem numquam&quot;\n        }\n        ...\n        ..\n        .\n        ]\n }\n</code></pre>\n<p>I tied everything, but couldn't get it done correctly, I have tried most of the solutions in <strong><a href=\"https://stackoverflow.com/questions/26543131/how-to-implement-endless-list-with-recyclerview\">here</a></strong> and no luck.\nI've also tried to use these two library <strong><a href=\"https://github.com/MarkoMilos/Paginate\" rel=\"nofollow noreferrer\">Paginate</a></strong> &amp; <strong><a href=\"https://github.com/hendraanggrian/recyclerview-paginated\" rel=\"nofollow noreferrer\">recyclerview-paginated</a></strong> and even this <strong><a href=\"https://github.com/Malinskiy/SuperRecyclerView\" rel=\"nofollow noreferrer\">SuperRecyclerView</a></strong>. but it didn't work.!</p>\n<p>Any help with the best logic for controlling this will help a lot.</p>\n<hr />\n<p><strong>Code for <a href=\"https://github.com/Malinskiy/SuperRecyclerView\" rel=\"nofollow noreferrer\">SuperRecyclerView</a></strong></p>\n<pre><code>public class ChallengesListFragment extends BaseFragment {\n\n  private int pageNumber = 1; \n  private SuperRecyclerView recyclerview;\n  private ArrayList&lt;ChallengeActive&gt; data;\n  private ChallengesAdapter adapter;\n\npublic View onCreateView(LayoutInflater inflater, ViewGroup container,\n      Bundle savedInstanceState) {\n    View rootView = inflater.inflate(R.layout.fragment_challenges_list, container, false);\n    initView(rootView);\n    initRecycler();\n    getData(1);\n    return rootView;\n  }\n\n private void initRecycler() {\n    data = new ArrayList&lt;&gt;();\n  \n    final RecyclerView.LayoutManager mLayoutManager = new LinearLayoutManager(getActivity());\n    recyclerview.setLayoutManager(mLayoutManager);\n    adapter = new ChallengesAdapter(data, getActivity(), this); \n    recyclerview.setAdapter(adapter);\n\n    recyclerview.setupMoreListener(new OnMoreListener() {\n      @Override\n      public void onMoreAsked(int overallItemsCount, int itemsBeforeMore, int maxLastVisiblePosition) {\n \n        pageNumber++;\n        getData(maxLastVisiblePosition);\n      }\n    }, 10);\n\n    recyclerview.setRefreshListener(new OnRefreshListener() {\n      @Override\n      public void onRefresh() {\n        pageNumber = 1;\n        getData(pageNumber);\n      }\n    });\n   \n  }\n \n  private void getData(final int pageNumber) {\n\n      WebRequests.GetActiveChallenges(pageNumber, new onResult() {\n      @Override\n      public void onSuccess(Object object) {\n        ArrayList&lt;ChallengeActive&gt; list = (ArrayList&lt;ChallengeActive&gt;) object;\n        data.clear();\n        data.addAll(list);\n        adapter.notifyDataSetChanged();  \n      }\n\n      @Override\n      public void onFail(Object object) {\n        Toast.makeText(getActivity(), &quot;Something went wrong, try again later&quot;,\n            Toast.LENGTH_SHORT).show(); \n      }\n    }); \n  } \n}  \n</code></pre>\n"},{"tags":["java","eclipse","autocomplete","eclipse-plugin","lombok"],"comments":[{"owner":{"account_id":2019266,"reputation":77,"user_id":2912558,"display_name":"Jacobo Geada"},"score":0,"creation_date":1692010219,"post_id":76898113,"comment_id":135563316,"body_markdown":"@howlger I&#39;m using STS 4.19 and 2023-06 with same results with var and val","body":"@howlger I&#39;m using STS 4.19 and 2023-06 with same results with var and val"},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1692016648,"post_id":76898113,"comment_id":135564529,"body_markdown":"@howlger Lombok makes `val` valid as a local variable type","body":"@howlger Lombok makes <code>val</code> valid as a local variable type"},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1692016922,"post_id":76898113,"comment_id":135564582,"body_markdown":"@JacoboGeada Do other Lombok features such as `@Getter` and `@Data` work with Eclipse autocompletion? If not, you probably just need to install the Lombok plugin.","body":"@JacoboGeada Do other Lombok features such as <code>@Getter</code> and <code>@Data</code> work with Eclipse autocompletion? If not, you probably just need to install the Lombok plugin."},{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":1,"creation_date":1692028243,"post_id":76898113,"comment_id":135567175,"body_markdown":"You have yet to mention which version of *Lombok* this is, and Java, which would seem important. Then again, maybe you could use the standard `var` identifier instead of relying on Lombok for this at development and runtime.","body":"You have yet to mention which version of <i>Lombok</i> this is, and Java, which would seem important. Then again, maybe you could use the standard <code>var</code> identifier instead of relying on Lombok for this at development and runtime."},{"owner":{"account_id":2019266,"reputation":77,"user_id":2912558,"display_name":"Jacobo Geada"},"score":0,"creation_date":1692254542,"post_id":76898113,"comment_id":135598946,"body_markdown":"@nitind i have used several versions of lombok with same results","body":"@nitind i have used several versions of lombok with same results"},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1692258634,"post_id":76898113,"comment_id":135599566,"body_markdown":"Several versions sounds like trial and error and is not what you were asked for. It seems the following known Lombok issue (which also provide a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example) which is lacking in this question): https://github.com/projectlombok/lombok/issues/3440","body":"Several versions sounds like trial and error and is not what you were asked for. It seems the following known Lombok issue (which also provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> which is lacking in this question): <a href=\"https://github.com/projectlombok/lombok/issues/3440\" rel=\"nofollow noreferrer\">github.com/projectlombok/lombok/issues/3440</a>"}],"answers":[{"tags":[],"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692258842,"creation_date":1692258842,"answer_id":76919484,"question_id":76898113,"body_markdown":"This is a **known issue** of Lombok that is [being worked on][1]:\r\n\r\n[**Lombok issue #3440**: \\[BUG\\] Autocomplete for `val` variables stops working &quot;randomly&quot; in Eclipse][2]\r\n\r\n\r\n  [1]: https://github.com/projectlombok/lombok/issues/3440#issuecomment-1680052861\r\n  [2]: https://github.com/projectlombok/lombok/issues/3440","title":"Autocomplete lombok with eclipse","body":"<p>This is a <strong>known issue</strong> of Lombok that is <a href=\"https://github.com/projectlombok/lombok/issues/3440#issuecomment-1680052861\" rel=\"nofollow noreferrer\">being worked on</a>:</p>\n<p><a href=\"https://github.com/projectlombok/lombok/issues/3440\" rel=\"nofollow noreferrer\"><strong>Lombok issue #3440</strong>: [BUG] Autocomplete for <code>val</code> variables stops working &quot;randomly&quot; in Eclipse</a></p>\n"}],"owner":{"account_id":2019266,"reputation":77,"user_id":2912558,"display_name":"Jacobo Geada"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1692258842,"creation_date":1692008653,"question_id":76898113,"body_markdown":"I don&#39;t know if this is a bug or misconfiguration in eclipse with lombok. Eclipse recognizes all annotations but when I try to use:\r\n\r\n    val list = new ArrayList&lt;MyObject&gt;();\r\n\r\nlist only hace Object methods eclipse can&#39;t infer ArrayList methods as size() isEmpty() etc etc\r\n\r\nHow could I configure lombok for autocomplete?\r\n\r\nI&#39;m using eclipse STS 4.19 and eclipse 2023-06 with same result with val and var\r\n","title":"Autocomplete lombok with eclipse","body":"<p>I don't know if this is a bug or misconfiguration in eclipse with lombok. Eclipse recognizes all annotations but when I try to use:</p>\n<pre><code>val list = new ArrayList&lt;MyObject&gt;();\n</code></pre>\n<p>list only hace Object methods eclipse can't infer ArrayList methods as size() isEmpty() etc etc</p>\n<p>How could I configure lombok for autocomplete?</p>\n<p>I'm using eclipse STS 4.19 and eclipse 2023-06 with same result with val and var</p>\n"},{"tags":["java","azul-zulu","project-panama"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1692253686,"post_id":76918565,"comment_id":135598808,"body_markdown":"&quot;error: release version 20 not supported&quot;. If this were my problem, I&#39;d definitely concentrate on that first.","body":"&quot;error: release version 20 not supported&quot;. If this were my problem, I&#39;d definitely concentrate on that first."},{"owner":{"account_id":298566,"reputation":537,"user_id":604656,"accept_rate":47,"display_name":"ashish.g"},"score":0,"creation_date":1692256381,"post_id":76918565,"comment_id":135599212,"body_markdown":"Try using the earlier versions of jextract, if it suffices, which are compatible with earlier versions of java. It seems like gradle (or your version of it) does not support java 20 yet.","body":"Try using the earlier versions of jextract, if it suffices, which are compatible with earlier versions of java. It seems like gradle (or your version of it) does not support java 20 yet."}],"answers":[{"comments":[{"owner":{"account_id":280629,"reputation":5238,"user_id":576448,"accept_rate":40,"display_name":"peterk"},"score":0,"creation_date":1692283168,"post_id":76919477,"comment_id":135604726,"body_markdown":"Well works with jdk 17 present and the JAVA_HOME setting to jdk 17. and lieaving the gradle argument at jdk 20\n\nIt would be nice to have that info in the readme :)\nThanks !","body":"Well works with jdk 17 present and the JAVA_HOME setting to jdk 17. and lieaving the gradle argument at jdk 20  It would be nice to have that info in the readme :) Thanks !"}],"tags":[],"owner":{"account_id":180181,"reputation":76390,"user_id":413337,"accept_rate":64,"display_name":"Codo"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1692258781,"creation_date":1692258781,"answer_id":76919477,"question_id":76918565,"body_markdown":"To run the *jextract* build, you must have both Java 17 and the target Java version (Java 20 in your case). The actual build is done with Java 17.\r\n\r\nSet `JAVA_HOME` to point to Java 17:\r\n\r\n```\r\nexport JAVA_HOME=`/usr/libexec/java_home -v 17`\r\njava -version\r\n```\r\n\r\nThen run the build command:\r\n\r\n```\r\nsh ./gradlew -Pjdk20_home=/Users/user/Documents/zulu20.32.11_1-ca-jdk20.0.2-macosx_aarch64 -Pllvm_home=/Library/Developer/CommandLineTools/usr/ clean verify\r\n```\r\n","title":"How do I get jextract to build on a Macbook air M2 with latest OS","body":"<p>To run the <em>jextract</em> build, you must have both Java 17 and the target Java version (Java 20 in your case). The actual build is done with Java 17.</p>\n<p>Set <code>JAVA_HOME</code> to point to Java 17:</p>\n<pre><code>export JAVA_HOME=`/usr/libexec/java_home -v 17`\njava -version\n</code></pre>\n<p>Then run the build command:</p>\n<pre><code>sh ./gradlew -Pjdk20_home=/Users/user/Documents/zulu20.32.11_1-ca-jdk20.0.2-macosx_aarch64 -Pllvm_home=/Library/Developer/CommandLineTools/usr/ clean verify\n</code></pre>\n"}],"owner":{"account_id":280629,"reputation":5238,"user_id":576448,"accept_rate":40,"display_name":"peterk"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76919477,"answer_count":1,"score":0,"last_activity_date":1692258781,"creation_date":1692247971,"question_id":76918565,"body_markdown":"I want to. test the Panama project added APIs and the jextract generator for such on a macbook air M2. There don&#39;t seem to be any arm64 prebuilt binaries for jextract.\r\n\r\n\r\nI have zulu jdk 20 installed, cmake, python3, xCode, xCode command line tools, and the latest gradle ( should be enough to run a gradlew which caches the version it wants )  \r\n\r\nI cloned jextract from \r\n\r\nhttps://github.com/openjdk/jextract.git\r\n\r\nJAVA_HOME is set to /Library/Java/JavaVirtualMachines/zulu-20.jdk/Contents/Home\r\n\r\nfollowed the instructions in the README.md\r\nIt specifies I should do:\r\n```\r\nsh ./gradlew -Pjdk20_home=&lt;jdk20_home_dir&gt; -Pllvm_home=&lt;libclang_dir&gt; clean verify\r\n```\r\nWhich led to issuing this command to build it.\r\n\r\n```\r\n./gradlew -Pjdk20_home=/Library/Java/JavaVirtualMachines/zulu-20.jdk/Contents/Home -Pllvm_home=/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/ clean verify\r\n```\r\nBuilding results in this error from javac from gradle:\r\n\r\n```\r\n&gt; Task :compileJava FAILED\r\nerror: release version 20 not supported\r\nUsage: javac &lt;options&gt; &lt;source files&gt;\r\nuse --help for a list of possible options\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nExecution failed for task &#39;:compileJava&#39;.\r\n&gt; Compilation failed with exit code 2; see the compiler error output for details.\r\n```\r\nI have also tried the other llvm paths they suggest.\r\nAnd have also tried older zulu-17 JDK \r\nand each time deleted gradle caches, the build folder and re-extracted the source (git reset --hard) from git.\r\n\r\nI have searched for a solution for this.\r\nI also have searched for a forum on Panama and.or jextract to help me find a solution or any information on building for an apple M1/M2 and have not found anything.\r\n\r\nThanks !\r\n\r\n","title":"How do I get jextract to build on a Macbook air M2 with latest OS","body":"<p>I want to. test the Panama project added APIs and the jextract generator for such on a macbook air M2. There don't seem to be any arm64 prebuilt binaries for jextract.</p>\n<p>I have zulu jdk 20 installed, cmake, python3, xCode, xCode command line tools, and the latest gradle ( should be enough to run a gradlew which caches the version it wants )</p>\n<p>I cloned jextract from</p>\n<p><a href=\"https://github.com/openjdk/jextract.git\" rel=\"nofollow noreferrer\">https://github.com/openjdk/jextract.git</a></p>\n<p>JAVA_HOME is set to /Library/Java/JavaVirtualMachines/zulu-20.jdk/Contents/Home</p>\n<p>followed the instructions in the README.md\nIt specifies I should do:</p>\n<pre><code>sh ./gradlew -Pjdk20_home=&lt;jdk20_home_dir&gt; -Pllvm_home=&lt;libclang_dir&gt; clean verify\n</code></pre>\n<p>Which led to issuing this command to build it.</p>\n<pre><code>./gradlew -Pjdk20_home=/Library/Java/JavaVirtualMachines/zulu-20.jdk/Contents/Home -Pllvm_home=/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/ clean verify\n</code></pre>\n<p>Building results in this error from javac from gradle:</p>\n<pre><code>&gt; Task :compileJava FAILED\nerror: release version 20 not supported\nUsage: javac &lt;options&gt; &lt;source files&gt;\nuse --help for a list of possible options\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':compileJava'.\n&gt; Compilation failed with exit code 2; see the compiler error output for details.\n</code></pre>\n<p>I have also tried the other llvm paths they suggest.\nAnd have also tried older zulu-17 JDK\nand each time deleted gradle caches, the build folder and re-extracted the source (git reset --hard) from git.</p>\n<p>I have searched for a solution for this.\nI also have searched for a forum on Panama and.or jextract to help me find a solution or any information on building for an apple M1/M2 and have not found anything.</p>\n<p>Thanks !</p>\n"},{"tags":["java","swing"],"comments":[{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1692258448,"post_id":76919365,"comment_id":135599534,"body_markdown":"So, you execute the query, if it has a row, you set the labels text, you then dispose/close the frame so I’m at a lose to figure out how you expect to see the result","body":"So, you execute the query, if it has a row, you set the labels text, you then dispose/close the frame so I’m at a lose to figure out how you expect to see the result"},{"owner":{"account_id":29242221,"reputation":11,"user_id":22403468,"display_name":"CuriousZoi"},"score":0,"creation_date":1692258609,"post_id":76919365,"comment_id":135599561,"body_markdown":"ah yes! I get my mistake. never occured to me. thank you very much @MadProgrammer","body":"ah yes! I get my mistake. never occured to me. thank you very much @MadProgrammer"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1692258681,"post_id":76919365,"comment_id":135599580,"body_markdown":"Ok, so you have a layout issue because a label with no text has zero size - so, maybe set the initial text to something like “0”. Alternatively, you can call pack on the frame to force it to change size to fit the new text","body":"Ok, so you have a layout issue because a label with no text has zero size - so, maybe set the initial text to something like “0”. Alternatively, you can call pack on the frame to force it to change size to fit the new text"},{"owner":{"account_id":29242221,"reputation":11,"user_id":22403468,"display_name":"CuriousZoi"},"score":0,"creation_date":1692258984,"post_id":76919365,"comment_id":135599648,"body_markdown":"I changed it and added the sql statement to the previous JFrame so when they click on the view balance button to find the balance and then when I initialize the jlabel it has the correct amount. thank you again @MadProgrammer. you were very helpful!!","body":"I changed it and added the sql statement to the previous JFrame so when they click on the view balance button to find the balance and then when I initialize the jlabel it has the correct amount. thank you again @MadProgrammer. you were very helpful!!"}],"owner":{"account_id":29242221,"reputation":11,"user_id":22403468,"display_name":"CuriousZoi"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1692257967,"creation_date":1692257775,"question_id":76919365,"body_markdown":"I am trying to create a banking application where the user creates an account and can deposit, withdraw, transfer and view their balance. My problem is with the view balance part because I want it to display the balance and it doesn&#39;t. I have a database connected and after the user clicks the &quot;Show balance&quot; button it should display their amount. Below is my code and an image of what is shows. Can someone help me to fix it please? \r\n\r\n\r\n```\r\npackage app;\r\n\r\nimport java.awt.*;\r\nimport java.awt.event.ActionEvent;\r\nimport java.awt.event.ActionListener;\r\n\r\nimport javax.swing.*;\r\nimport java.sql.*;\r\n\r\npublic class ViewBalance extends JFrame {\r\n\r\n    private JLabel mainl, balance;\r\n    private JButton ok;\r\n    ResultSet result = null;\r\n\r\n    public ViewBalance(Statement statement, int accnum) { //accnum is the account number that was just created\r\n        super(&quot;Banking Application&quot;);\r\n\r\n        mainl = new JLabel(&quot;Balance&quot;, SwingConstants.CENTER);\r\n        balance = new JLabel(&quot;&quot;, SwingConstants.CENTER);\r\n        ok = new JButton(&quot;Ok&quot;);\r\n        ok.addActionListener(new ActionListener() {\r\n            @Override\r\n            public void actionPerformed(ActionEvent e) {\r\n                try {\r\n                    result = statement.executeQuery(&quot;SELECT balance FROM CardInfo WHERE accnum = &quot; + accnum + &quot;;&quot;);\r\n                    if (result.next()) {\r\n                        System.out.println(result.getInt(1));\r\n                        balance.setText(&quot;Your balance is &quot; + result.getInt(1));\r\n                        balance.setVisible(true); \r\n                    }\r\n                } catch (SQLException e1) {\r\n                    // TODO Auto-generated catch block\r\n                    e1.printStackTrace();\r\n                }\r\n                dispose();\r\n                new MainFrame(statement, accnum).setVisible(true);\r\n            }\r\n        });\r\n\r\n        add(mainl, BorderLayout.NORTH);\r\n        add(balance, BorderLayout.CENTER);\r\n        add(ok, BorderLayout.SOUTH);\r\n\r\n        pack();\r\n        setDefaultCloseOperation(EXIT_ON_CLOSE);\r\n        setLocationRelativeTo(null);\r\n    }\r\n}\r\n\r\n```\r\n\r\nhere is also my sql code \r\n\r\n\r\n```\r\nDROP DATABASE IF EXISTS BankingApplication;\r\nDROP TABLE IF EXISTS CardInfo CASCADE;\r\nDROP TABLE IF EXISTS AccountInfo CASCADE;\r\n\r\nCREATE DATABASE BankingApplication\r\n    WITH\r\n    OWNER = postgres\r\n    ENCODING = &#39;UTF8&#39;\r\n    LC_COLLATE = &#39;English_United States.1253&#39;\r\n    LC_CTYPE = &#39;English_United States.1253&#39;\r\n    TABLESPACE = pg_default\r\n    CONNECTION LIMIT = -1\r\n    IS_TEMPLATE = False;\r\n\t\r\nCREATE TABLE AccountInfo(\r\n\taccnum INT,\r\n\tfname varchar(100),\r\n\tlname varchar(100),\r\n\tmobile varchar(10),\r\n\tid varchar(20),\r\n\tssn varchar(9),\r\n\taddress varchar(100),\r\n\temail varchar(100),\r\n\tpassword varchar(100),\r\n\tprimary key(accnum)\r\n);\r\n\r\nCREATE TABLE CardInfo(\r\n\taccnum int,\r\n\tcardnum varchar(16),\r\n\texpmonth int,\r\n\texpyear int,\r\n\tcvv int,\r\n\tpin int,\r\n\tbalance float,\r\n\tprimary key(cardnum),\r\n\tFOREIGN KEY (accnum) REFERENCES AccountInfo (accnum)\r\n);\r\n\r\n\r\n\r\nSELECT * FROM AccountInfo;\r\nSELECT * FROM CardInfo;\r\n```\r\n\r\n\r\n[this is the image I want to display](https://i.stack.imgur.com/KQ51V.png)\r\n[this is the image it displays](https://i.stack.imgur.com/FyvTG.png)\r\n\r\n\r\nI have tried to change the balance jlabel on what to display\r\nI have tried changing the sql statement but non of these work. It is like the balance.setText() in the ActionListener is not working \r\n","title":"Set text to jlabel doesn&#39;t change the text","body":"<p>I am trying to create a banking application where the user creates an account and can deposit, withdraw, transfer and view their balance. My problem is with the view balance part because I want it to display the balance and it doesn't. I have a database connected and after the user clicks the &quot;Show balance&quot; button it should display their amount. Below is my code and an image of what is shows. Can someone help me to fix it please?</p>\n<pre><code>package app;\n\nimport java.awt.*;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\n\nimport javax.swing.*;\nimport java.sql.*;\n\npublic class ViewBalance extends JFrame {\n\n    private JLabel mainl, balance;\n    private JButton ok;\n    ResultSet result = null;\n\n    public ViewBalance(Statement statement, int accnum) { //accnum is the account number that was just created\n        super(&quot;Banking Application&quot;);\n\n        mainl = new JLabel(&quot;Balance&quot;, SwingConstants.CENTER);\n        balance = new JLabel(&quot;&quot;, SwingConstants.CENTER);\n        ok = new JButton(&quot;Ok&quot;);\n        ok.addActionListener(new ActionListener() {\n            @Override\n            public void actionPerformed(ActionEvent e) {\n                try {\n                    result = statement.executeQuery(&quot;SELECT balance FROM CardInfo WHERE accnum = &quot; + accnum + &quot;;&quot;);\n                    if (result.next()) {\n                        System.out.println(result.getInt(1));\n                        balance.setText(&quot;Your balance is &quot; + result.getInt(1));\n                        balance.setVisible(true); \n                    }\n                } catch (SQLException e1) {\n                    // TODO Auto-generated catch block\n                    e1.printStackTrace();\n                }\n                dispose();\n                new MainFrame(statement, accnum).setVisible(true);\n            }\n        });\n\n        add(mainl, BorderLayout.NORTH);\n        add(balance, BorderLayout.CENTER);\n        add(ok, BorderLayout.SOUTH);\n\n        pack();\n        setDefaultCloseOperation(EXIT_ON_CLOSE);\n        setLocationRelativeTo(null);\n    }\n}\n\n</code></pre>\n<p>here is also my sql code</p>\n<pre><code>DROP DATABASE IF EXISTS BankingApplication;\nDROP TABLE IF EXISTS CardInfo CASCADE;\nDROP TABLE IF EXISTS AccountInfo CASCADE;\n\nCREATE DATABASE BankingApplication\n    WITH\n    OWNER = postgres\n    ENCODING = 'UTF8'\n    LC_COLLATE = 'English_United States.1253'\n    LC_CTYPE = 'English_United States.1253'\n    TABLESPACE = pg_default\n    CONNECTION LIMIT = -1\n    IS_TEMPLATE = False;\n    \nCREATE TABLE AccountInfo(\n    accnum INT,\n    fname varchar(100),\n    lname varchar(100),\n    mobile varchar(10),\n    id varchar(20),\n    ssn varchar(9),\n    address varchar(100),\n    email varchar(100),\n    password varchar(100),\n    primary key(accnum)\n);\n\nCREATE TABLE CardInfo(\n    accnum int,\n    cardnum varchar(16),\n    expmonth int,\n    expyear int,\n    cvv int,\n    pin int,\n    balance float,\n    primary key(cardnum),\n    FOREIGN KEY (accnum) REFERENCES AccountInfo (accnum)\n);\n\n\n\nSELECT * FROM AccountInfo;\nSELECT * FROM CardInfo;\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/KQ51V.png\" rel=\"nofollow noreferrer\">this is the image I want to display</a>\n<a href=\"https://i.stack.imgur.com/FyvTG.png\" rel=\"nofollow noreferrer\">this is the image it displays</a></p>\n<p>I have tried to change the balance jlabel on what to display\nI have tried changing the sql statement but non of these work. It is like the balance.setText() in the ActionListener is not working</p>\n"},{"tags":["java","spring-boot","hibernate","sqlite","flyway"],"answers":[{"tags":[],"owner":{"account_id":58650,"reputation":3399,"user_id":175554,"accept_rate":40,"display_name":"ozkanpakdil"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1692257062,"creation_date":1692225393,"answer_id":76917474,"question_id":76894127,"body_markdown":"You are giving too much parameter, below is my application yaml file\r\n```yaml\r\nspring:\r\n  jpa:\r\n    hibernate.hbm2ddl.auto: create-drop\r\n    hibernate.show_sql: true\r\n  datasource:\r\n    url: jdbc:sqlite:file:myDb.db?cache=shared\r\n    username: root\r\n    password: root\r\n  h2:\r\n    console.enabled: true\r\n  flyway:\r\n    baseline-on-migrate: true\r\n#    schemas: myDb\r\n    enabled: true\r\n    url: jdbc:sqlite:file:myDb.db?cache=shared\r\n    user: root\r\n    password: root\r\n    validate-on-migrate: true\r\n    locations: &quot;classpath:db/migration&quot;\r\n```\r\nbasically I just commented schema and things started working. I also added h2 console and start checking mydb and this is how it looks\r\n[![h2 console with sqlie][1]][1]\r\nbelow are the parameters for h2 console login\r\n[![h2 console login for sqlite][2]][2]\r\n[here](https://github.com/ozkanpakdil/spring-examples/tree/master/flyway-sqlite) you can find the full working example.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/YufEJ.png\r\n  [2]: https://i.stack.imgur.com/TZ8f3.png","title":"Using Flyway with SQLite database in spring boot","body":"<p>You are giving too much parameter, below is my application yaml file</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>spring:\n  jpa:\n    hibernate.hbm2ddl.auto: create-drop\n    hibernate.show_sql: true\n  datasource:\n    url: jdbc:sqlite:file:myDb.db?cache=shared\n    username: root\n    password: root\n  h2:\n    console.enabled: true\n  flyway:\n    baseline-on-migrate: true\n#    schemas: myDb\n    enabled: true\n    url: jdbc:sqlite:file:myDb.db?cache=shared\n    user: root\n    password: root\n    validate-on-migrate: true\n    locations: &quot;classpath:db/migration&quot;\n</code></pre>\n<p>basically I just commented schema and things started working. I also added h2 console and start checking mydb and this is how it looks\n<a href=\"https://i.stack.imgur.com/YufEJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YufEJ.png\" alt=\"h2 console with sqlie\" /></a>\nbelow are the parameters for h2 console login\n<a href=\"https://i.stack.imgur.com/TZ8f3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TZ8f3.png\" alt=\"h2 console login for sqlite\" /></a>\n<a href=\"https://github.com/ozkanpakdil/spring-examples/tree/master/flyway-sqlite\" rel=\"nofollow noreferrer\">here</a> you can find the full working example.</p>\n"},{"tags":[],"owner":{"account_id":2641928,"reputation":3186,"user_id":2285394,"display_name":"Amit Mohanty"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692257896,"creation_date":1692257896,"answer_id":76919376,"question_id":76894127,"body_markdown":"In SQLite, there&#39;s no separation of schemas like in some other databases. So, in your Flyway configuration, you shouldn&#39;t specify a separate schema.\r\n\r\n    spring:\r\n      ...\r\n      flyway:\r\n        baseline-on-migrate: true\r\n        enabled: true\r\n        url: jdbc:sqlite:file:myDb.db?cache=shared\r\n        user: root\r\n        password: root\r\n        validate-on-migrate: true\r\n        locations: &quot;classpath:db/migration&quot;","title":"Using Flyway with SQLite database in spring boot","body":"<p>In SQLite, there's no separation of schemas like in some other databases. So, in your Flyway configuration, you shouldn't specify a separate schema.</p>\n<pre><code>spring:\n  ...\n  flyway:\n    baseline-on-migrate: true\n    enabled: true\n    url: jdbc:sqlite:file:myDb.db?cache=shared\n    user: root\n    password: root\n    validate-on-migrate: true\n    locations: &quot;classpath:db/migration&quot;\n</code></pre>\n"}],"owner":{"account_id":448169,"reputation":5643,"user_id":842225,"accept_rate":49,"display_name":"user842225"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":428,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":76917474,"answer_count":2,"score":3,"last_activity_date":1692257896,"creation_date":1691941728,"question_id":76894127,"body_markdown":"In my Spring Boot project, I need to use SQLite database. I have setup the SQLite database successfully like below:\r\n\r\nThe dependencies:\r\n```\r\nimplementation(&quot;org.xerial:sqlite-jdbc:3.42.0.0&quot;)\r\nimplementation(&quot;org.hibernate.orm:hibernate-community-dialects&quot;)\r\nimplementation(&quot;org.springframework.boot:spring-boot-starter-data-jpa&quot;)\r\n```\r\n\r\napplication.yml\r\n```\r\nspring:\r\n  datasource:\r\n    url: jdbc:sqlite:file:myDb.db?cache=shared\r\n    username: root\r\n    password: root\r\n```\r\n\r\nAs you can see above, I am using **on disk** SQLite database, the database file is `myDb.db`.\r\n\r\nI also created the datasource bean:\r\n```\r\n    @Bean\r\n    public DataSource dataSource() {\r\n        final DriverManagerDataSource dataSource = new DriverManagerDataSource();\r\n        dataSource.setDriverClassName(props.getDriverClassName());\r\n        dataSource.setUrl(props.getUrl());\r\n        dataSource.setUsername(props.getUsername());\r\n        dataSource.setPassword(props.getPassword());\r\n        return dataSource;\r\n    }\r\n```\r\n\r\nI verified this SQLite database setup works, because when I start running my project the entity classes&#39; associated db tables are created successfully in database.\r\n\r\n\r\n**Next, I try to setup Flyway as below:**   \r\n\r\nI included dependency:\r\n```\r\nimplementation(&quot;org.flywaydb:flyway-core:8.5.11&quot;)\r\n```\r\n\r\nIn `application.yml`, I added:\r\n```\r\nspring:\r\n  ...\r\n  flyway:\r\n    baseline-on-migrate: true\r\n    schemas: myDb\r\n    enabled: true\r\n    url: jdbc:sqlite:file:myDb.db?cache=shared\r\n    user: root\r\n    password: root\r\n    validate-on-migrate: true\r\n    locations: &quot;classpath:db/migration&quot;\r\n```\r\n\r\nI also created directory ` /db/migration` directory under `src/main/resources/`\r\n\r\nBut when start running the project, **I end up with error:** \r\n```\r\nCaused by: org.flywaydb.core.internal.exception.FlywaySqlException: Unable to check whether table &quot;myDb&quot;.&quot;flyway_schema_history&quot; exists`\r\n```\r\n\r\nI do understand in SQLite there is no concept of &quot;database schema&quot;, so I also tried manually create the table `flyway_schema_history` after which then start running the project, but I still get the same error.  \r\n\r\nHow can I make Flyway + SQLite work in spring boot? What am I missing?\r\n\r\n(I doubt it is a database connection issue since before I setup Flyway the project can successfully make a connection &amp; create tables based on JPA Entities. Or Could it be I miss some SQLite specific configurations of Flyway to establish DB connection for Flyway??? I&#39;m not sure...)","title":"Using Flyway with SQLite database in spring boot","body":"<p>In my Spring Boot project, I need to use SQLite database. I have setup the SQLite database successfully like below:</p>\n<p>The dependencies:</p>\n<pre><code>implementation(&quot;org.xerial:sqlite-jdbc:3.42.0.0&quot;)\nimplementation(&quot;org.hibernate.orm:hibernate-community-dialects&quot;)\nimplementation(&quot;org.springframework.boot:spring-boot-starter-data-jpa&quot;)\n</code></pre>\n<p>application.yml</p>\n<pre><code>spring:\n  datasource:\n    url: jdbc:sqlite:file:myDb.db?cache=shared\n    username: root\n    password: root\n</code></pre>\n<p>As you can see above, I am using <strong>on disk</strong> SQLite database, the database file is <code>myDb.db</code>.</p>\n<p>I also created the datasource bean:</p>\n<pre><code>    @Bean\n    public DataSource dataSource() {\n        final DriverManagerDataSource dataSource = new DriverManagerDataSource();\n        dataSource.setDriverClassName(props.getDriverClassName());\n        dataSource.setUrl(props.getUrl());\n        dataSource.setUsername(props.getUsername());\n        dataSource.setPassword(props.getPassword());\n        return dataSource;\n    }\n</code></pre>\n<p>I verified this SQLite database setup works, because when I start running my project the entity classes' associated db tables are created successfully in database.</p>\n<p><strong>Next, I try to setup Flyway as below:</strong></p>\n<p>I included dependency:</p>\n<pre><code>implementation(&quot;org.flywaydb:flyway-core:8.5.11&quot;)\n</code></pre>\n<p>In <code>application.yml</code>, I added:</p>\n<pre><code>spring:\n  ...\n  flyway:\n    baseline-on-migrate: true\n    schemas: myDb\n    enabled: true\n    url: jdbc:sqlite:file:myDb.db?cache=shared\n    user: root\n    password: root\n    validate-on-migrate: true\n    locations: &quot;classpath:db/migration&quot;\n</code></pre>\n<p>I also created directory <code> /db/migration</code> directory under <code>src/main/resources/</code></p>\n<p>But when start running the project, <strong>I end up with error:</strong></p>\n<pre><code>Caused by: org.flywaydb.core.internal.exception.FlywaySqlException: Unable to check whether table &quot;myDb&quot;.&quot;flyway_schema_history&quot; exists`\n</code></pre>\n<p>I do understand in SQLite there is no concept of &quot;database schema&quot;, so I also tried manually create the table <code>flyway_schema_history</code> after which then start running the project, but I still get the same error.</p>\n<p>How can I make Flyway + SQLite work in spring boot? What am I missing?</p>\n<p>(I doubt it is a database connection issue since before I setup Flyway the project can successfully make a connection &amp; create tables based on JPA Entities. Or Could it be I miss some SQLite specific configurations of Flyway to establish DB connection for Flyway??? I'm not sure...)</p>\n"},{"tags":["java","intellij-idea","plugins","kotlin"],"answers":[{"comments":[{"owner":{"account_id":17425383,"reputation":121,"user_id":12630320,"display_name":"Kentaro T. Vadney"},"score":0,"creation_date":1692728156,"post_id":53267327,"comment_id":135663233,"body_markdown":"what&#39;s the full absolute path? you wrote only a partial path","body":"what&#39;s the full absolute path? you wrote only a partial path"},{"owner":{"account_id":17425383,"reputation":121,"user_id":12630320,"display_name":"Kentaro T. Vadney"},"score":0,"creation_date":1692728985,"post_id":53267327,"comment_id":135663423,"body_markdown":"I&#39;m trying to configure my java version for smart tomcat too so this clarification would help.","body":"I&#39;m trying to configure my java version for smart tomcat too so this clarification would help."}],"tags":[],"owner":{"account_id":13971634,"reputation":11,"user_id":10090085,"display_name":"Aliaksei Hlazkou"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1542044157,"creation_date":1542044157,"answer_id":53267327,"question_id":53238971,"body_markdown":"The issue was fixed by copying &quot;java.exe&quot; to the folder where it&#39;s required &quot;idea-path\\plugins\\Kotlin\\kotlinc/bin/java&quot;","title":"Can&#39;t choose tomcat for &#39;smart tomcat&#39; plugin in Intellij Idea","body":"<p>The issue was fixed by copying \"java.exe\" to the folder where it's required \"idea-path\\plugins\\Kotlin\\kotlinc/bin/java\"</p>\n"}],"owner":{"account_id":13971634,"reputation":11,"user_id":10090085,"display_name":"Aliaksei Hlazkou"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2673,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":53267327,"answer_count":1,"score":1,"last_activity_date":1692257889,"creation_date":1541853071,"question_id":53238971,"body_markdown":"I&quot;m trying to add tomcat to Smart tomcat plugin\r\nUsing these &quot;3 dots&quot; button in [Run/Debug Configuration][1] but nothing happens except the fact that idea fails with exception\r\n\r\n\r\n    java.io.IOException: Cannot run program &quot;idea-path\\plugins\\Kotlin\\kotlinc/bin/java&quot;: CreateProcess error=2, The system cannot find the file specified\r\n    java.lang.RuntimeException: java.io.IOException: Cannot run program &quot;idea-path\\plugins\\Kotlin\\kotlinc/bin/java&quot;: CreateProcess error=2, The system cannot find the file specified\r\n    \tat com.poratu.idea.plugins.tomcat.utils.PluginUtils.getTomcatInfo(PluginUtils.java:58)\r\n    \tat com.poratu.idea.plugins.tomcat.utils.PluginUtils.getTomcatInfo(PluginUtils.java:30)\r\n    \tat com.poratu.idea.plugins.tomcat.setting.TomcatSetting$1.run(TomcatSetting.java:58)\r\n    \tat com.poratu.idea.plugins.tomcat.setting.TomcatSetting$1.run(TomcatSetting.java:45)\r\n    \tat com.intellij.ui.ToolbarDecorator$2.doAdd(ToolbarDecorator.java:440)\r\n    \tat com.intellij.ui.CommonActionsPanel$Buttons.performAction(CommonActionsPanel.java:60)\r\n    \tat com.intellij.ui.CommonActionsPanel$MyActionButton.actionPerformed(CommonActionsPanel.java:272)\r\n    \tat com.intellij.openapi.actionSystem.ex.ActionUtil$1.run(ActionUtil.java:220)\r\n    \tat com.intellij.openapi.actionSystem.ex.ActionUtil.performActionDumbAware(ActionUtil.java:237)\r\n    \tat com.intellij.openapi.actionSystem.impl.ActionButton.actionPerformed(ActionButton.java:193)\r\n    \tat com.intellij.openapi.actionSystem.impl.ActionButton.performAction(ActionButton.java:153)\r\n    \tat com.intellij.openapi.actionSystem.impl.ActionButton.processMouseEvent(ActionButton.java:357)\r\n    \tat java.awt.Component.processEvent(Component.java:6306)\r\n    \tat java.awt.Container.processEvent(Container.java:2237)\r\n    \tat java.awt.Component.dispatchEventImpl(Component.java:4897)\r\n    \tat java.awt.Container.dispatchEventImpl(Container.java:2295)\r\n    \tat java.awt.Component.dispatchEvent(Component.java:4719)\r\n    \tat java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4889)\r\n    \tat java.awt.LightweightDispatcher.processMouseEvent(Container.java:4526)\r\n    \tat java.awt.LightweightDispatcher.dispatchEvent(Container.java:4467)\r\n    \tat java.awt.Container.dispatchEventImpl(Container.java:2281)\r\n    \tat java.awt.Window.dispatchEventImpl(Window.java:2746)\r\n    \tat java.awt.Component.dispatchEvent(Component.java:4719)\r\n    \tat java.awt.EventQueue.dispatchEventImpl(EventQueue.java:764)\r\n    \tat java.awt.EventQueue.access$500(EventQueue.java:98)\r\n    \tat java.awt.EventQueue$3.run(EventQueue.java:715)\r\n    \tat java.awt.EventQueue$3.run(EventQueue.java:709)\r\n    \tat java.security.AccessController.doPrivileged(Native Method)\r\n    \tat java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)\r\n    \tat java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:90)\r\n    \tat java.awt.EventQueue$4.run(EventQueue.java:737)\r\n    \tat java.awt.EventQueue$4.run(EventQueue.java:735)\r\n    \tat java.security.AccessController.doPrivileged(Native Method)\r\n    \tat java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)\r\n    \tat java.awt.EventQueue.dispatchEvent(EventQueue.java:734)\r\n    \tat com.intellij.ide.IdeEventQueue.defaultDispatchEvent(IdeEventQueue.java:837)\r\n    \tat com.intellij.ide.IdeEventQueue._dispatchEvent(IdeEventQueue.java:762)\r\n    \tat com.intellij.ide.IdeEventQueue.dispatchEvent(IdeEventQueue.java:434)\r\n    \tat java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:201)\r\n    \tat java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)\r\n    \tat java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:109)\r\n    \tat java.awt.WaitDispatchSupport$2.run(WaitDispatchSupport.java:190)\r\n    \tat java.awt.WaitDispatchSupport$4.run(WaitDispatchSupport.java:235)\r\n    \tat java.awt.WaitDispatchSupport$4.run(WaitDispatchSupport.java:233)\r\n    \tat java.security.AccessController.doPrivileged(Native Method)\r\n    \tat java.awt.WaitDispatchSupport.enter(WaitDispatchSupport.java:233)\r\n    \tat java.awt.Dialog.show(Dialog.java:1077)\r\n    \tat com.intellij.openapi.ui.impl.DialogWrapperPeerImpl$MyDialog.show(DialogWrapperPeerImpl.java:694)\r\n    \tat com.intellij.openapi.ui.impl.DialogWrapperPeerImpl.show(DialogWrapperPeerImpl.java:427)\r\n    \tat com.intellij.openapi.ui.DialogWrapper.invokeShow(DialogWrapper.java:1678)\r\n    \tat com.intellij.openapi.ui.DialogWrapper.show(DialogWrapper.java:1627)\r\n    \tat com.intellij.openapi.options.newEditor.SettingsDialog.lambda$show$0(SettingsDialog.java:69)\r\n    \tat com.intellij.openapi.application.TransactionGuardImpl.runSyncTransaction(TransactionGuardImpl.java:88)\r\n    \tat com.intellij.openapi.application.TransactionGuardImpl.submitTransactionAndWait(TransactionGuardImpl.java:153)\r\n    \tat com.intellij.openapi.options.newEditor.SettingsDialog.show(SettingsDialog.java:69)\r\n    \tat com.intellij.ide.actions.ShowSettingsUtilImpl.showSettingsDialog(ShowSettingsUtilImpl.java:97)\r\n    \tat com.intellij.ide.actions.ShowSettingsAction.perform(ShowSettingsAction.java:63)\r\n    \tat com.intellij.ide.actions.ShowSettingsAction.actionPerformed(ShowSettingsAction.java:52)\r\n    \tat com.intellij.openapi.actionSystem.ex.ActionUtil$1.run(ActionUtil.java:220)\r\n    \tat com.intellij.openapi.actionSystem.ex.ActionUtil.performActionDumbAware(ActionUtil.java:237)\r\n    \tat com.intellij.openapi.actionSystem.impl.ActionMenuItem$ActionTransmitter.lambda$actionPerformed$0(ActionMenuItem.java:301)\r\n    \tat com.intellij.openapi.wm.impl.FocusManagerImpl.runOnOwnContext(FocusManagerImpl.java:307)\r\n    \tat com.intellij.openapi.wm.impl.IdeFocusManagerImpl.runOnOwnContext(IdeFocusManagerImpl.java:104)\r\n    \tat com.intellij.openapi.actionSystem.impl.ActionMenuItem$ActionTransmitter.actionPerformed(ActionMenuItem.java:291)\r\n    \tat javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2022)\r\n    \tat com.intellij.openapi.actionSystem.impl.ActionMenuItem.lambda$fireActionPerformed$0(ActionMenuItem.java:111)\r\n    \tat com.intellij.openapi.application.TransactionGuardImpl.runSyncTransaction(TransactionGuardImpl.java:88)\r\n    \tat com.intellij.openapi.application.TransactionGuardImpl.lambda$submitTransaction$1(TransactionGuardImpl.java:111)\r\n    \tat com.intellij.openapi.application.TransactionGuardImpl.submitTransaction(TransactionGuardImpl.java:120)\r\n    \tat com.intellij.openapi.application.TransactionGuard.submitTransaction(TransactionGuard.java:122)\r\n    \tat com.intellij.openapi.actionSystem.impl.ActionMenuItem.fireActionPerformed(ActionMenuItem.java:111)\r\n    \tat com.intellij.ui.plaf.beg.BegMenuItemUI.doClick(BegMenuItemUI.java:528)\r\n    \tat com.intellij.ui.plaf.beg.BegMenuItemUI.access$300(BegMenuItemUI.java:48)\r\n    \tat com.intellij.ui.plaf.beg.BegMenuItemUI$MyMouseInputHandler.mouseReleased(BegMenuItemUI.java:548)\r\n    \tat java.awt.Component.processMouseEvent(Component.java:6541)\r\n    \tat javax.swing.JComponent.processMouseEvent(JComponent.java:3325)\r\n    \tat java.awt.Component.processEvent(Component.java:6306)\r\n    \tat java.awt.Container.processEvent(Container.java:2237)\r\n    \tat java.awt.Component.dispatchEventImpl(Component.java:4897)\r\n    \tat java.awt.Container.dispatchEventImpl(Container.java:2295)\r\n    \tat java.awt.Component.dispatchEvent(Component.java:4719)\r\n    \tat java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4889)\r\n    \tat java.awt.LightweightDispatcher.processMouseEvent(Container.java:4526)\r\n    \tat java.awt.LightweightDispatcher.dispatchEvent(Container.java:4467)\r\n    \tat java.awt.Container.dispatchEventImpl(Container.java:2281)\r\n    \tat java.awt.Window.dispatchEventImpl(Window.java:2746)\r\n    \tat java.awt.Component.dispatchEvent(Component.java:4719)\r\n    \tat java.awt.EventQueue.dispatchEventImpl(EventQueue.java:764)\r\n    \tat java.awt.EventQueue.access$500(EventQueue.java:98)\r\n    \tat java.awt.EventQueue$3.run(EventQueue.java:715)\r\n    \tat java.awt.EventQueue$3.run(EventQueue.java:709)\r\n    \tat java.security.AccessController.doPrivileged(Native Method)\r\n    \tat java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)\r\n    \tat java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:90)\r\n    \tat java.awt.EventQueue$4.run(EventQueue.java:737)\r\n    \tat java.awt.EventQueue$4.run(EventQueue.java:735)\r\n    \tat java.security.AccessController.doPrivileged(Native Method)\r\n    \tat java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)\r\n    \tat java.awt.EventQueue.dispatchEvent(EventQueue.java:734)\r\n    \tat com.intellij.ide.IdeEventQueue.defaultDispatchEvent(IdeEventQueue.java:837)\r\n    \tat com.intellij.ide.IdeEventQueue._dispatchEvent(IdeEventQueue.java:762)\r\n    \tat com.intellij.ide.IdeEventQueue.dispatchEvent(IdeEventQueue.java:434)\r\n    \tat java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:201)\r\n    \tat java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)\r\n    \tat java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105)\r\n    \tat java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\r\n    \tat java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93)\r\n    \tat java.awt.EventDispatchThread.run(EventDispatchThread.java:82)\r\n    Caused by: java.io.IOException: Cannot run program &quot;idea-path\\plugins\\Kotlin\\kotlinc/bin/java&quot;: CreateProcess error=2, The system cannot find the file specified\r\n    \tat java.lang.ProcessBuilder.start(ProcessBuilder.java:1048)\r\n    \tat java.lang.Runtime.exec(Runtime.java:620)\r\n    \tat java.lang.Runtime.exec(Runtime.java:450)\r\n    \tat java.lang.Runtime.exec(Runtime.java:347)\r\n    \tat com.poratu.idea.plugins.tomcat.utils.PluginUtils.getTomcatInfo(PluginUtils.java:40)\r\n    \t... 107 more\r\n    Caused by: java.io.IOException: CreateProcess error=2, The system cannot find the file specified\r\n    \tat java.lang.ProcessImpl.create(Native Method)\r\n    \tat java.lang.ProcessImpl.&lt;init&gt;(ProcessImpl.java:386)\r\n    \tat java.lang.ProcessImpl.start(ProcessImpl.java:137)\r\n    \tat java.lang.ProcessBuilder.start(ProcessBuilder.java:1029)\r\n    \t... 111 more\r\n\r\nNo spaces in the path to tomcat,\r\nas well as no space in my path to idea.\r\n\r\nSmart Tomcat version 2.6\r\n\r\nTomcat 8.0.30\r\n\r\nJava 1.8.0_161\r\n\r\nKotlin plugin 1.3.0-release-IJ.2018.1-1\r\n\r\nIntelliJ IDEA 2018.1 EAP (Community Edition)\r\nBuild #IC-181.3986.9, built on February 28, 2018\r\nJRE: 1.8.0_152-release-1136-b16 amd64`enter code here`\r\nJVM: OpenJDK 64-Bit Server VM by JetBrains s.r.o\r\nWindows 10 10.0\r\n\r\nWhy this happens?\r\nWhy does &#39;smart tomcat&#39; requires this &#39;java&#39; under kotlin plugin?\r\nAny ideas?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xY1S2.png","title":"Can&#39;t choose tomcat for &#39;smart tomcat&#39; plugin in Intellij Idea","body":"<p>I\"m trying to add tomcat to Smart tomcat plugin\nUsing these \"3 dots\" button in <a href=\"https://i.stack.imgur.com/xY1S2.png\" rel=\"nofollow noreferrer\">Run/Debug Configuration</a> but nothing happens except the fact that idea fails with exception</p>\n\n<pre><code>java.io.IOException: Cannot run program \"idea-path\\plugins\\Kotlin\\kotlinc/bin/java\": CreateProcess error=2, The system cannot find the file specified\njava.lang.RuntimeException: java.io.IOException: Cannot run program \"idea-path\\plugins\\Kotlin\\kotlinc/bin/java\": CreateProcess error=2, The system cannot find the file specified\n    at com.poratu.idea.plugins.tomcat.utils.PluginUtils.getTomcatInfo(PluginUtils.java:58)\n    at com.poratu.idea.plugins.tomcat.utils.PluginUtils.getTomcatInfo(PluginUtils.java:30)\n    at com.poratu.idea.plugins.tomcat.setting.TomcatSetting$1.run(TomcatSetting.java:58)\n    at com.poratu.idea.plugins.tomcat.setting.TomcatSetting$1.run(TomcatSetting.java:45)\n    at com.intellij.ui.ToolbarDecorator$2.doAdd(ToolbarDecorator.java:440)\n    at com.intellij.ui.CommonActionsPanel$Buttons.performAction(CommonActionsPanel.java:60)\n    at com.intellij.ui.CommonActionsPanel$MyActionButton.actionPerformed(CommonActionsPanel.java:272)\n    at com.intellij.openapi.actionSystem.ex.ActionUtil$1.run(ActionUtil.java:220)\n    at com.intellij.openapi.actionSystem.ex.ActionUtil.performActionDumbAware(ActionUtil.java:237)\n    at com.intellij.openapi.actionSystem.impl.ActionButton.actionPerformed(ActionButton.java:193)\n    at com.intellij.openapi.actionSystem.impl.ActionButton.performAction(ActionButton.java:153)\n    at com.intellij.openapi.actionSystem.impl.ActionButton.processMouseEvent(ActionButton.java:357)\n    at java.awt.Component.processEvent(Component.java:6306)\n    at java.awt.Container.processEvent(Container.java:2237)\n    at java.awt.Component.dispatchEventImpl(Component.java:4897)\n    at java.awt.Container.dispatchEventImpl(Container.java:2295)\n    at java.awt.Component.dispatchEvent(Component.java:4719)\n    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4889)\n    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4526)\n    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4467)\n    at java.awt.Container.dispatchEventImpl(Container.java:2281)\n    at java.awt.Window.dispatchEventImpl(Window.java:2746)\n    at java.awt.Component.dispatchEvent(Component.java:4719)\n    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:764)\n    at java.awt.EventQueue.access$500(EventQueue.java:98)\n    at java.awt.EventQueue$3.run(EventQueue.java:715)\n    at java.awt.EventQueue$3.run(EventQueue.java:709)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)\n    at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:90)\n    at java.awt.EventQueue$4.run(EventQueue.java:737)\n    at java.awt.EventQueue$4.run(EventQueue.java:735)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)\n    at java.awt.EventQueue.dispatchEvent(EventQueue.java:734)\n    at com.intellij.ide.IdeEventQueue.defaultDispatchEvent(IdeEventQueue.java:837)\n    at com.intellij.ide.IdeEventQueue._dispatchEvent(IdeEventQueue.java:762)\n    at com.intellij.ide.IdeEventQueue.dispatchEvent(IdeEventQueue.java:434)\n    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:201)\n    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)\n    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:109)\n    at java.awt.WaitDispatchSupport$2.run(WaitDispatchSupport.java:190)\n    at java.awt.WaitDispatchSupport$4.run(WaitDispatchSupport.java:235)\n    at java.awt.WaitDispatchSupport$4.run(WaitDispatchSupport.java:233)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.awt.WaitDispatchSupport.enter(WaitDispatchSupport.java:233)\n    at java.awt.Dialog.show(Dialog.java:1077)\n    at com.intellij.openapi.ui.impl.DialogWrapperPeerImpl$MyDialog.show(DialogWrapperPeerImpl.java:694)\n    at com.intellij.openapi.ui.impl.DialogWrapperPeerImpl.show(DialogWrapperPeerImpl.java:427)\n    at com.intellij.openapi.ui.DialogWrapper.invokeShow(DialogWrapper.java:1678)\n    at com.intellij.openapi.ui.DialogWrapper.show(DialogWrapper.java:1627)\n    at com.intellij.openapi.options.newEditor.SettingsDialog.lambda$show$0(SettingsDialog.java:69)\n    at com.intellij.openapi.application.TransactionGuardImpl.runSyncTransaction(TransactionGuardImpl.java:88)\n    at com.intellij.openapi.application.TransactionGuardImpl.submitTransactionAndWait(TransactionGuardImpl.java:153)\n    at com.intellij.openapi.options.newEditor.SettingsDialog.show(SettingsDialog.java:69)\n    at com.intellij.ide.actions.ShowSettingsUtilImpl.showSettingsDialog(ShowSettingsUtilImpl.java:97)\n    at com.intellij.ide.actions.ShowSettingsAction.perform(ShowSettingsAction.java:63)\n    at com.intellij.ide.actions.ShowSettingsAction.actionPerformed(ShowSettingsAction.java:52)\n    at com.intellij.openapi.actionSystem.ex.ActionUtil$1.run(ActionUtil.java:220)\n    at com.intellij.openapi.actionSystem.ex.ActionUtil.performActionDumbAware(ActionUtil.java:237)\n    at com.intellij.openapi.actionSystem.impl.ActionMenuItem$ActionTransmitter.lambda$actionPerformed$0(ActionMenuItem.java:301)\n    at com.intellij.openapi.wm.impl.FocusManagerImpl.runOnOwnContext(FocusManagerImpl.java:307)\n    at com.intellij.openapi.wm.impl.IdeFocusManagerImpl.runOnOwnContext(IdeFocusManagerImpl.java:104)\n    at com.intellij.openapi.actionSystem.impl.ActionMenuItem$ActionTransmitter.actionPerformed(ActionMenuItem.java:291)\n    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2022)\n    at com.intellij.openapi.actionSystem.impl.ActionMenuItem.lambda$fireActionPerformed$0(ActionMenuItem.java:111)\n    at com.intellij.openapi.application.TransactionGuardImpl.runSyncTransaction(TransactionGuardImpl.java:88)\n    at com.intellij.openapi.application.TransactionGuardImpl.lambda$submitTransaction$1(TransactionGuardImpl.java:111)\n    at com.intellij.openapi.application.TransactionGuardImpl.submitTransaction(TransactionGuardImpl.java:120)\n    at com.intellij.openapi.application.TransactionGuard.submitTransaction(TransactionGuard.java:122)\n    at com.intellij.openapi.actionSystem.impl.ActionMenuItem.fireActionPerformed(ActionMenuItem.java:111)\n    at com.intellij.ui.plaf.beg.BegMenuItemUI.doClick(BegMenuItemUI.java:528)\n    at com.intellij.ui.plaf.beg.BegMenuItemUI.access$300(BegMenuItemUI.java:48)\n    at com.intellij.ui.plaf.beg.BegMenuItemUI$MyMouseInputHandler.mouseReleased(BegMenuItemUI.java:548)\n    at java.awt.Component.processMouseEvent(Component.java:6541)\n    at javax.swing.JComponent.processMouseEvent(JComponent.java:3325)\n    at java.awt.Component.processEvent(Component.java:6306)\n    at java.awt.Container.processEvent(Container.java:2237)\n    at java.awt.Component.dispatchEventImpl(Component.java:4897)\n    at java.awt.Container.dispatchEventImpl(Container.java:2295)\n    at java.awt.Component.dispatchEvent(Component.java:4719)\n    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4889)\n    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4526)\n    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4467)\n    at java.awt.Container.dispatchEventImpl(Container.java:2281)\n    at java.awt.Window.dispatchEventImpl(Window.java:2746)\n    at java.awt.Component.dispatchEvent(Component.java:4719)\n    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:764)\n    at java.awt.EventQueue.access$500(EventQueue.java:98)\n    at java.awt.EventQueue$3.run(EventQueue.java:715)\n    at java.awt.EventQueue$3.run(EventQueue.java:709)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)\n    at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:90)\n    at java.awt.EventQueue$4.run(EventQueue.java:737)\n    at java.awt.EventQueue$4.run(EventQueue.java:735)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)\n    at java.awt.EventQueue.dispatchEvent(EventQueue.java:734)\n    at com.intellij.ide.IdeEventQueue.defaultDispatchEvent(IdeEventQueue.java:837)\n    at com.intellij.ide.IdeEventQueue._dispatchEvent(IdeEventQueue.java:762)\n    at com.intellij.ide.IdeEventQueue.dispatchEvent(IdeEventQueue.java:434)\n    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:201)\n    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)\n    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105)\n    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\n    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93)\n    at java.awt.EventDispatchThread.run(EventDispatchThread.java:82)\nCaused by: java.io.IOException: Cannot run program \"idea-path\\plugins\\Kotlin\\kotlinc/bin/java\": CreateProcess error=2, The system cannot find the file specified\n    at java.lang.ProcessBuilder.start(ProcessBuilder.java:1048)\n    at java.lang.Runtime.exec(Runtime.java:620)\n    at java.lang.Runtime.exec(Runtime.java:450)\n    at java.lang.Runtime.exec(Runtime.java:347)\n    at com.poratu.idea.plugins.tomcat.utils.PluginUtils.getTomcatInfo(PluginUtils.java:40)\n    ... 107 more\nCaused by: java.io.IOException: CreateProcess error=2, The system cannot find the file specified\n    at java.lang.ProcessImpl.create(Native Method)\n    at java.lang.ProcessImpl.&lt;init&gt;(ProcessImpl.java:386)\n    at java.lang.ProcessImpl.start(ProcessImpl.java:137)\n    at java.lang.ProcessBuilder.start(ProcessBuilder.java:1029)\n    ... 111 more\n</code></pre>\n\n<p>No spaces in the path to tomcat,\nas well as no space in my path to idea.</p>\n\n<p>Smart Tomcat version 2.6</p>\n\n<p>Tomcat 8.0.30</p>\n\n<p>Java 1.8.0_161</p>\n\n<p>Kotlin plugin 1.3.0-release-IJ.2018.1-1</p>\n\n<p>IntelliJ IDEA 2018.1 EAP (Community Edition)\nBuild #IC-181.3986.9, built on February 28, 2018\nJRE: 1.8.0_152-release-1136-b16 amd64<code>enter code here</code>\nJVM: OpenJDK 64-Bit Server VM by JetBrains s.r.o\nWindows 10 10.0</p>\n\n<p>Why this happens?\nWhy does 'smart tomcat' requires this 'java' under kotlin plugin?\nAny ideas?</p>\n"},{"tags":["java","maven","tomcat","intellij-idea"],"comments":[{"owner":{"account_id":7363499,"reputation":27102,"user_id":5606016,"accept_rate":88,"display_name":"A_Di-Matteo"},"score":0,"creation_date":1453502506,"post_id":34956328,"comment_id":57645924,"body_markdown":"did you try to run the example as explained in the official [doc](http://www.oracle.com/webfolder/technetwork/tutorials/obe/java/basic_app_embedded_tomcat/basic_app-tomcat-embedded.html#section9)? from command line (after mvn clean package), from the target folder run: java -jar employees-app-1.0-SNAPSHOT-jar-with-dependencies.jar and then check on localhost:8080","body":"did you try to run the example as explained in the official <a href=\"http://www.oracle.com/webfolder/technetwork/tutorials/obe/java/basic_app_embedded_tomcat/basic_app-tomcat-embedded.html#section9\" rel=\"nofollow noreferrer\">doc</a>? from command line (after mvn clean package), from the target folder run: java -jar employees-app-1.0-SNAPSHOT-jar-with-dependencies.jar and then check on localhost:8080"},{"owner":{"account_id":901438,"reputation":2103,"user_id":937494,"accept_rate":73,"display_name":"Alex G."},"score":0,"creation_date":1453503240,"post_id":34956328,"comment_id":57646195,"body_markdown":"No, I didn&#39;t. The objective is to be able to do Tomcat dev using IntelliJ.","body":"No, I didn&#39;t. The objective is to be able to do Tomcat dev using IntelliJ."}],"answers":[{"tags":[],"owner":{"account_id":901438,"reputation":2103,"user_id":937494,"accept_rate":73,"display_name":"Alex G."},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1453583583,"creation_date":1453583583,"answer_id":34968932,"question_id":34956328,"body_markdown":"I figured it out. \r\n\r\nAs the linked post indicates, it&#39;s best to use Heroku&#39;s launcher and pom.xml file.\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n      xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n      &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n      &lt;groupId&gt;com.heroku.sample&lt;/groupId&gt;\r\n      &lt;artifactId&gt;embeddedTomcatSample&lt;/artifactId&gt;\r\n      &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n      &lt;packaging&gt;jar&lt;/packaging&gt;\r\n      &lt;name&gt;embeddedTomcatSample Maven Webapp&lt;/name&gt;\r\n      &lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n      &lt;properties&gt;\r\n        &lt;tomcat.version&gt;8.0.28&lt;/tomcat.version&gt;\r\n      &lt;/properties&gt;\r\n      &lt;dependencies&gt;\r\n        ...tomcat &amp; other deps...\r\n      &lt;/dependencies&gt;\r\n      &lt;build&gt;\r\n        &lt;finalName&gt;embeddedTomcatSample&lt;/finalName&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n                &lt;artifactId&gt;appassembler-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;1.1.1&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;assembleDirectory&gt;target&lt;/assembleDirectory&gt;\r\n                    &lt;programs&gt;\r\n                        &lt;program&gt;\r\n                            &lt;mainClass&gt;launch.Main&lt;/mainClass&gt;\r\n                            &lt;name&gt;webapp&lt;/name&gt;\r\n                        &lt;/program&gt;\r\n                    &lt;/programs&gt;\r\n                &lt;/configuration&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;phase&gt;package&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;assemble&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n      &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\nThis launcher function does most of the magic by programatically configuring Tomcat to run inside the project&#39;s directory.\r\n\r\n    public static void main(String[] args) throws Exception {\r\n    \r\n            String webappDirLocation = &quot;src/main/webapp/&quot;;\r\n            Tomcat tomcat = new Tomcat();\r\n    \r\n            //The port that we should run on can be set into an environment variable\r\n            //Look for that variable and default to 8080 if it isn&#39;t there.\r\n            String webPort = System.getenv(&quot;PORT&quot;);\r\n            if(webPort == null || webPort.isEmpty()) {\r\n                webPort = &quot;8080&quot;;\r\n            }\r\n    \r\n            tomcat.setPort(Integer.valueOf(webPort));\r\n    \r\n            StandardContext ctx = (StandardContext) tomcat.addWebapp(&quot;/&quot;, new File(webappDirLocation).getAbsolutePath());\r\n            System.out.println(&quot;configuring app with basedir: &quot; + new File(&quot;./&quot; + webappDirLocation).getAbsolutePath());\r\n    \r\n            // Declare an alternative location for your &quot;WEB-INF/classes&quot; dir\r\n            // Servlet 3.0 annotation will work\r\n            File additionWebInfClasses = new File(&quot;target/classes&quot;);\r\n            WebResourceRoot resources = new StandardRoot(ctx);\r\n            resources.addPreResources(new DirResourceSet(resources, &quot;/WEB-INF/classes&quot;,\r\n                    additionWebInfClasses.getAbsolutePath(), &quot;/&quot;));\r\n            ctx.setResources(resources);\r\n    \r\n            tomcat.start();\r\n            tomcat.getServer().await();\r\n        }\r\n\r\nI couldn&#39;t figure out how to programatically set the path to Tomcat&#39;s *conf* folder but I was able to overcome this thanks to [this answer][1]. Under normal circumstances, Tomcat takes care of setting up the initial context. As a result, the environment variables in a webapp&#39;s context.xml file end up in the initial context. Fortunately, it is possible to replicate this via a custom InitialContextFactory.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/20359483/initialcontext-in-a-standalone-java-program/21733896#comment57663464_21733896","title":"Trouble running embedded Tomcat from IntelliJ Idea Community","body":"<p>I figured it out. </p>\n\n<p>As the linked post indicates, it's best to use Heroku's launcher and pom.xml file.</p>\n\n<pre><code>&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n  xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\"&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;com.heroku.sample&lt;/groupId&gt;\n  &lt;artifactId&gt;embeddedTomcatSample&lt;/artifactId&gt;\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n  &lt;packaging&gt;jar&lt;/packaging&gt;\n  &lt;name&gt;embeddedTomcatSample Maven Webapp&lt;/name&gt;\n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\n  &lt;properties&gt;\n    &lt;tomcat.version&gt;8.0.28&lt;/tomcat.version&gt;\n  &lt;/properties&gt;\n  &lt;dependencies&gt;\n    ...tomcat &amp; other deps...\n  &lt;/dependencies&gt;\n  &lt;build&gt;\n    &lt;finalName&gt;embeddedTomcatSample&lt;/finalName&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n            &lt;artifactId&gt;appassembler-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;1.1.1&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;assembleDirectory&gt;target&lt;/assembleDirectory&gt;\n                &lt;programs&gt;\n                    &lt;program&gt;\n                        &lt;mainClass&gt;launch.Main&lt;/mainClass&gt;\n                        &lt;name&gt;webapp&lt;/name&gt;\n                    &lt;/program&gt;\n                &lt;/programs&gt;\n            &lt;/configuration&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;phase&gt;package&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;assemble&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>This launcher function does most of the magic by programatically configuring Tomcat to run inside the project's directory.</p>\n\n<pre><code>public static void main(String[] args) throws Exception {\n\n        String webappDirLocation = \"src/main/webapp/\";\n        Tomcat tomcat = new Tomcat();\n\n        //The port that we should run on can be set into an environment variable\n        //Look for that variable and default to 8080 if it isn't there.\n        String webPort = System.getenv(\"PORT\");\n        if(webPort == null || webPort.isEmpty()) {\n            webPort = \"8080\";\n        }\n\n        tomcat.setPort(Integer.valueOf(webPort));\n\n        StandardContext ctx = (StandardContext) tomcat.addWebapp(\"/\", new File(webappDirLocation).getAbsolutePath());\n        System.out.println(\"configuring app with basedir: \" + new File(\"./\" + webappDirLocation).getAbsolutePath());\n\n        // Declare an alternative location for your \"WEB-INF/classes\" dir\n        // Servlet 3.0 annotation will work\n        File additionWebInfClasses = new File(\"target/classes\");\n        WebResourceRoot resources = new StandardRoot(ctx);\n        resources.addPreResources(new DirResourceSet(resources, \"/WEB-INF/classes\",\n                additionWebInfClasses.getAbsolutePath(), \"/\"));\n        ctx.setResources(resources);\n\n        tomcat.start();\n        tomcat.getServer().await();\n    }\n</code></pre>\n\n<p>I couldn't figure out how to programatically set the path to Tomcat's <em>conf</em> folder but I was able to overcome this thanks to <a href=\"https://stackoverflow.com/questions/20359483/initialcontext-in-a-standalone-java-program/21733896#comment57663464_21733896\">this answer</a>. Under normal circumstances, Tomcat takes care of setting up the initial context. As a result, the environment variables in a webapp's context.xml file end up in the initial context. Fortunately, it is possible to replicate this via a custom InitialContextFactory.</p>\n"}],"owner":{"account_id":901438,"reputation":2103,"user_id":937494,"accept_rate":73,"display_name":"Alex G."},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3629,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":34968932,"answer_count":1,"score":0,"last_activity_date":1692257733,"creation_date":1453498463,"question_id":34956328,"body_markdown":"I&#39;m trying to use the answers [here][1] in order to run [this example][2] from Oracle in  IntelliJ Idea Community Edition. I&#39;ve created a new project, copied the source code from the example and enabled Maven support in Idea. I&#39;m able to make and run the project but I can&#39;t access the service in the browser. Tomcat keeps throwing 404s. Note that the source code and pom.xml file are untouched.\r\n\r\npom.xml:\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n        &lt;groupId&gt;com.example.employees&lt;/groupId&gt;\r\n        &lt;artifactId&gt;employees-app&lt;/artifactId&gt;\r\n        &lt;packaging&gt;war&lt;/packaging&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n        &lt;name&gt;employees-app Maven Webapp&lt;/name&gt;\r\n        &lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n        &lt;properties&gt;\r\n            &lt;tomcat.version&gt;7.0.57&lt;/tomcat.version&gt;\r\n        &lt;/properties&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\r\n                &lt;artifactId&gt;tomcat-embed-core&lt;/artifactId&gt;\r\n                &lt;version&gt;${tomcat.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\r\n                &lt;artifactId&gt;tomcat-embed-logging-juli&lt;/artifactId&gt;\r\n                &lt;version&gt;${tomcat.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\r\n                &lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;\r\n                &lt;version&gt;${tomcat.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\r\n                &lt;artifactId&gt;tomcat-jasper&lt;/artifactId&gt;\r\n                &lt;version&gt;${tomcat.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\r\n                &lt;artifactId&gt;tomcat-jasper-el&lt;/artifactId&gt;\r\n                &lt;version&gt;${tomcat.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\r\n                &lt;artifactId&gt;tomcat-jsp-api&lt;/artifactId&gt;\r\n                &lt;version&gt;${tomcat.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;jstl&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jstl&lt;/artifactId&gt;\r\n                &lt;version&gt;1.2&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n         &lt;build&gt;\r\n            &lt;finalName&gt;employees-app&lt;/finalName&gt;\r\n            &lt;resources&gt;\r\n                &lt;resource&gt;\r\n                    &lt;directory&gt;src/main/webapp&lt;/directory&gt;\r\n                    &lt;targetPath&gt;META-INF/resources&lt;/targetPath&gt;\r\n                &lt;/resource&gt;\r\n            &lt;/resources&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;2.3.2&lt;/version&gt;\r\n                    &lt;inherited&gt;true&lt;/inherited&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;source&gt;1.8&lt;/source&gt;\r\n                        &lt;target&gt;1.8&lt;/target&gt;\r\n                    &lt;/configuration&gt;\r\n                    \r\n                &lt;/plugin&gt;           \r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;descriptorRefs&gt;\r\n                            &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\r\n                        &lt;/descriptorRefs&gt;\r\n                        &lt;finalName&gt;employees-app-${project.version}&lt;/finalName&gt;\r\n                        &lt;archive&gt;\r\n                            &lt;manifest&gt;\r\n                                &lt;mainClass&gt;com.example.employees.Main&lt;/mainClass&gt;\r\n                            &lt;/manifest&gt;\r\n                        &lt;/archive&gt;\r\n                    &lt;/configuration&gt;\r\n                    &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;phase&gt;package&lt;/phase&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;single&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\nUsing Process Monitor I&#39;ve been able to determine that Tomcat associated the root of the website (localhost:8080) with MyProject\\target\\classes. If I place a dummy txt file in there I can access it via the browser (e.g. localhost:8080/test.txt). \r\n\r\nThe &#39;classes&#39; directory is not empty. It contains two sub-directories:\r\n\r\n 1. com/example/employees/*.class - all the class files\r\n 2. META-INF/resources/[everything in /main/src/webapp in the [Oracle\r\n    example \\]][3]\r\n\r\nMy hunch is that there&#39;s something wrong with the folder hierarchy of the output. I&#39;m not sure what or how to fix it. Any ideas?\r\n\r\n  [1]: https://stackoverflow.com/questions/22047860/tomcat-in-intellij-idea-community-edition\r\n  [2]: http://www.oracle.com/webfolder/technetwork/tutorials/obe/java/basic_app_embedded_tomcat/basic_app-tomcat-embedded.html#section2s1\r\n  [3]: http://www.oracle.com/webfolder/technetwork/tutorials/obe/java/basic_app_embedded_tomcat/files/employees-app.zip","title":"Trouble running embedded Tomcat from IntelliJ Idea Community","body":"<p>I'm trying to use the answers <a href=\"https://stackoverflow.com/questions/22047860/tomcat-in-intellij-idea-community-edition\">here</a> in order to run <a href=\"http://www.oracle.com/webfolder/technetwork/tutorials/obe/java/basic_app_embedded_tomcat/basic_app-tomcat-embedded.html#section2s1\" rel=\"nofollow noreferrer\">this example</a> from Oracle in  IntelliJ Idea Community Edition. I've created a new project, copied the source code from the example and enabled Maven support in Idea. I'm able to make and run the project but I can't access the service in the browser. Tomcat keeps throwing 404s. Note that the source code and pom.xml file are untouched.</p>\n\n<p>pom.xml:</p>\n\n<pre><code>&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;com.example.employees&lt;/groupId&gt;\n    &lt;artifactId&gt;employees-app&lt;/artifactId&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;employees-app Maven Webapp&lt;/name&gt;\n    &lt;url&gt;http://maven.apache.org&lt;/url&gt;\n    &lt;properties&gt;\n        &lt;tomcat.version&gt;7.0.57&lt;/tomcat.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\n            &lt;artifactId&gt;tomcat-embed-core&lt;/artifactId&gt;\n            &lt;version&gt;${tomcat.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\n            &lt;artifactId&gt;tomcat-embed-logging-juli&lt;/artifactId&gt;\n            &lt;version&gt;${tomcat.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\n            &lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;\n            &lt;version&gt;${tomcat.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\n            &lt;artifactId&gt;tomcat-jasper&lt;/artifactId&gt;\n            &lt;version&gt;${tomcat.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\n            &lt;artifactId&gt;tomcat-jasper-el&lt;/artifactId&gt;\n            &lt;version&gt;${tomcat.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\n            &lt;artifactId&gt;tomcat-jsp-api&lt;/artifactId&gt;\n            &lt;version&gt;${tomcat.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;jstl&lt;/groupId&gt;\n            &lt;artifactId&gt;jstl&lt;/artifactId&gt;\n            &lt;version&gt;1.2&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n     &lt;build&gt;\n        &lt;finalName&gt;employees-app&lt;/finalName&gt;\n        &lt;resources&gt;\n            &lt;resource&gt;\n                &lt;directory&gt;src/main/webapp&lt;/directory&gt;\n                &lt;targetPath&gt;META-INF/resources&lt;/targetPath&gt;\n            &lt;/resource&gt;\n        &lt;/resources&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.3.2&lt;/version&gt;\n                &lt;inherited&gt;true&lt;/inherited&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;1.8&lt;/source&gt;\n                    &lt;target&gt;1.8&lt;/target&gt;\n                &lt;/configuration&gt;\n\n            &lt;/plugin&gt;           \n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;descriptorRefs&gt;\n                        &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n                    &lt;/descriptorRefs&gt;\n                    &lt;finalName&gt;employees-app-${project.version}&lt;/finalName&gt;\n                    &lt;archive&gt;\n                        &lt;manifest&gt;\n                            &lt;mainClass&gt;com.example.employees.Main&lt;/mainClass&gt;\n                        &lt;/manifest&gt;\n                    &lt;/archive&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;single&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>Using Process Monitor I've been able to determine that Tomcat associated the root of the website (localhost:8080) with MyProject\\target\\classes. If I place a dummy txt file in there I can access it via the browser (e.g. localhost:8080/test.txt). </p>\n\n<p>The 'classes' directory is not empty. It contains two sub-directories:</p>\n\n<ol>\n<li>com/example/employees/*.class - all the class files</li>\n<li>META-INF/resources/[everything in /main/src/webapp in the <a href=\"http://www.oracle.com/webfolder/technetwork/tutorials/obe/java/basic_app_embedded_tomcat/files/employees-app.zip\" rel=\"nofollow noreferrer\">Oracle\nexample ]</a></li>\n</ol>\n\n<p>My hunch is that there's something wrong with the folder hierarchy of the output. I'm not sure what or how to fix it. Any ideas?</p>\n"},{"tags":["java","libphonenumber"],"answers":[{"tags":[],"owner":{"account_id":4625774,"reputation":304,"user_id":3749639,"display_name":"Pablo AM"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1554910643,"creation_date":1554910643,"answer_id":55616466,"question_id":55614160,"body_markdown":"This library does not provide you with random numbers, no matter how many times you run your code you will always get:\r\n\r\n```\r\nCountry Code: 44 National Number: 1212345678\r\n````\r\n\r\nYou can take a look to their github project:\r\n\r\nhttps://github.com/googlei18n/libphonenumber/\r\n\r\nAnd you will see a lot of proto files inside this folder:\r\n\r\nhttps://github.com/googlei18n/libphonenumber/tree/master/java/libphonenumber/src/com/google/i18n/phonenumbers/data\r\n\r\nFrom those files is where they get that number, so it is hardcoded in there. No way to get it randomly.","title":"Random phone number generator for any country","body":"<p>This library does not provide you with random numbers, no matter how many times you run your code you will always get:</p>\n\n<pre><code>Country Code: 44 National Number: 1212345678\n</code></pre>\n\n<p>You can take a look to their github project:</p>\n\n<p><a href=\"https://github.com/googlei18n/libphonenumber/\" rel=\"nofollow noreferrer\">https://github.com/googlei18n/libphonenumber/</a></p>\n\n<p>And you will see a lot of proto files inside this folder:</p>\n\n<p><a href=\"https://github.com/googlei18n/libphonenumber/tree/master/java/libphonenumber/src/com/google/i18n/phonenumbers/data\" rel=\"nofollow noreferrer\">https://github.com/googlei18n/libphonenumber/tree/master/java/libphonenumber/src/com/google/i18n/phonenumbers/data</a></p>\n\n<p>From those files is where they get that number, so it is hardcoded in there. No way to get it randomly.</p>\n"},{"tags":[],"owner":{"account_id":796053,"reputation":115361,"user_id":878126,"accept_rate":51,"display_name":"android developer"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1606469450,"creation_date":1606469450,"answer_id":65034923,"question_id":55614160,"body_markdown":"The best way would be to use the REGEX that the library has, somehow, but it&#39;s a lot of work.\r\n\r\nAs the function of getExampleNumber will return you the exact same value, always, you can still use it, to randomize (or iterate) numbers in it. \r\n\r\nHere&#39;s an example (sample [**here**][1]) of how to do it, getting 10 random mobile phone numbers of each supported region :\r\n\r\n```kt\r\nclass MainActivity : AppCompatActivity() {\r\n    @WorkerThread\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        setContentView(R.layout.activity_main)\r\n        val phoneNumbersToRandomize = 10\r\n        var regionsThatFoundMobilePhonesFor = 0\r\n        if (savedInstanceState == null)\r\n            thread {\r\n                val phoneNumberUtil = PhoneNumberUtil.getInstance()\r\n                val startTime = System.currentTimeMillis()\r\n                val supportedRegions = phoneNumberUtil.supportedRegions\r\n                for (region in supportedRegions) {\r\n                    val validPhoneNumbers = HashSet&lt;String&gt;()\r\n                    val exampleNumber = phoneNumberUtil.getExampleNumberForType(region, PhoneNumberUtil.PhoneNumberType.MOBILE)\r\n                    if (exampleNumber == null) {\r\n                        Log.w(&quot;AppLog&quot;, &quot;region:$region no exampleNumber&quot;)\r\n                        continue\r\n                    }\r\n                    Log.d(&quot;AppLog&quot;, &quot;region:$region exampleNumber:${phoneNumberUtil.format(exampleNumber, PhoneNumberUtil.PhoneNumberFormat.E164)}&quot;)\r\n                    val countryCode = phoneNumberUtil.getCountryCodeForRegion(region)\r\n                    val nationalSignificantNumber = phoneNumberUtil.getNationalSignificantNumber(exampleNumber)\r\n                    //                    Log.d(&quot;AppLog&quot;, &quot;finding $phoneNumbersToRandomize random mobile phone numbers for $region example phone number:&quot; +\r\n                    //                            phoneNumberUtil.format(exampleNumber, PhoneNumberUtil.PhoneNumberFormat.E164) + &quot; countryCode:$countryCode nationalSignificantNumber:$nationalSignificantNumber &quot;)\r\n                    val randomDigitsLength = nationalSignificantNumber.length\r\n                    while (validPhoneNumbers.size &lt; phoneNumbersToRandomize) {\r\n                        val inputPhone = &quot;+$countryCode${getRandomStringOfDigits(randomDigitsLength)}&quot;\r\n                        if (validPhoneNumbers.contains(inputPhone))\r\n                            continue\r\n                        val phoneNumber = phoneNumberUtil.parse(inputPhone, region)\r\n                        val nationalSignificantNumberFromGeneratedNumber = phoneNumberUtil.getNationalSignificantNumber(phoneNumber)\r\n                        if (nationalSignificantNumberFromGeneratedNumber.length != randomDigitsLength)\r\n                            continue\r\n                        val isValidMobilePhoneNumber = phoneNumberUtil.isValidNumberForRegion(phoneNumber, region)\r\n                                &amp;&amp; phoneNumberUtil.isPossibleNumberForType(phoneNumber, PhoneNumberUtil.PhoneNumberType.MOBILE)\r\n                        if (isValidMobilePhoneNumber) {\r\n                            validPhoneNumbers.add(inputPhone)\r\n                        }\r\n                    }\r\n                    ++regionsThatFoundMobilePhonesFor\r\n                }\r\n                Log.d(&quot;AppLog&quot;, &quot;done regionsThatFoundMobilePhonesFor:$regionsThatFoundMobilePhonesFor out of ${supportedRegions.size}&quot; +\r\n                        &quot;timeTaken:${System.currentTimeMillis() - startTime}ms&quot;)\r\n            }\r\n\r\n    }\r\n\r\n    companion object {\r\n        private fun getRandomStringOfDigits(numberOfDigitsToGenerate: Int): String {\r\n            val sb = StringBuilder(numberOfDigitsToGenerate)\r\n            for (i in 0 until numberOfDigitsToGenerate)\r\n                sb.append(Random.nextInt(10).toString())\r\n            return sb.toString()\r\n        }\r\n    }\r\n}\r\n```\r\n\r\ngradle dependencies:\r\n\r\n```\r\n    implementation fileTree(dir: &#39;libs&#39;, include: [&#39;*.jar&#39;])\r\n    implementation &quot;org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version&quot;\r\n    implementation &#39;androidx.appcompat:appcompat:1.2.0&#39;\r\n    implementation &#39;androidx.core:core-ktx:1.3.2&#39;\r\n    implementation &#39;androidx.constraintlayout:constraintlayout:2.0.4&#39;\r\n    api &#39;com.googlecode.libphonenumber:libphonenumber:8.12.13&#39;\r\n```\r\n\r\n\r\n  [1]: https://issuetracker.google.com/issues/174302345#comment3","title":"Random phone number generator for any country","body":"<p>The best way would be to use the REGEX that the library has, somehow, but it's a lot of work.</p>\n<p>As the function of getExampleNumber will return you the exact same value, always, you can still use it, to randomize (or iterate) numbers in it.</p>\n<p>Here's an example (sample <a href=\"https://issuetracker.google.com/issues/174302345#comment3\" rel=\"nofollow noreferrer\"><strong>here</strong></a>) of how to do it, getting 10 random mobile phone numbers of each supported region :</p>\n<pre><code>class MainActivity : AppCompatActivity() {\n    @WorkerThread\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        val phoneNumbersToRandomize = 10\n        var regionsThatFoundMobilePhonesFor = 0\n        if (savedInstanceState == null)\n            thread {\n                val phoneNumberUtil = PhoneNumberUtil.getInstance()\n                val startTime = System.currentTimeMillis()\n                val supportedRegions = phoneNumberUtil.supportedRegions\n                for (region in supportedRegions) {\n                    val validPhoneNumbers = HashSet&lt;String&gt;()\n                    val exampleNumber = phoneNumberUtil.getExampleNumberForType(region, PhoneNumberUtil.PhoneNumberType.MOBILE)\n                    if (exampleNumber == null) {\n                        Log.w(&quot;AppLog&quot;, &quot;region:$region no exampleNumber&quot;)\n                        continue\n                    }\n                    Log.d(&quot;AppLog&quot;, &quot;region:$region exampleNumber:${phoneNumberUtil.format(exampleNumber, PhoneNumberUtil.PhoneNumberFormat.E164)}&quot;)\n                    val countryCode = phoneNumberUtil.getCountryCodeForRegion(region)\n                    val nationalSignificantNumber = phoneNumberUtil.getNationalSignificantNumber(exampleNumber)\n                    //                    Log.d(&quot;AppLog&quot;, &quot;finding $phoneNumbersToRandomize random mobile phone numbers for $region example phone number:&quot; +\n                    //                            phoneNumberUtil.format(exampleNumber, PhoneNumberUtil.PhoneNumberFormat.E164) + &quot; countryCode:$countryCode nationalSignificantNumber:$nationalSignificantNumber &quot;)\n                    val randomDigitsLength = nationalSignificantNumber.length\n                    while (validPhoneNumbers.size &lt; phoneNumbersToRandomize) {\n                        val inputPhone = &quot;+$countryCode${getRandomStringOfDigits(randomDigitsLength)}&quot;\n                        if (validPhoneNumbers.contains(inputPhone))\n                            continue\n                        val phoneNumber = phoneNumberUtil.parse(inputPhone, region)\n                        val nationalSignificantNumberFromGeneratedNumber = phoneNumberUtil.getNationalSignificantNumber(phoneNumber)\n                        if (nationalSignificantNumberFromGeneratedNumber.length != randomDigitsLength)\n                            continue\n                        val isValidMobilePhoneNumber = phoneNumberUtil.isValidNumberForRegion(phoneNumber, region)\n                                &amp;&amp; phoneNumberUtil.isPossibleNumberForType(phoneNumber, PhoneNumberUtil.PhoneNumberType.MOBILE)\n                        if (isValidMobilePhoneNumber) {\n                            validPhoneNumbers.add(inputPhone)\n                        }\n                    }\n                    ++regionsThatFoundMobilePhonesFor\n                }\n                Log.d(&quot;AppLog&quot;, &quot;done regionsThatFoundMobilePhonesFor:$regionsThatFoundMobilePhonesFor out of ${supportedRegions.size}&quot; +\n                        &quot;timeTaken:${System.currentTimeMillis() - startTime}ms&quot;)\n            }\n\n    }\n\n    companion object {\n        private fun getRandomStringOfDigits(numberOfDigitsToGenerate: Int): String {\n            val sb = StringBuilder(numberOfDigitsToGenerate)\n            for (i in 0 until numberOfDigitsToGenerate)\n                sb.append(Random.nextInt(10).toString())\n            return sb.toString()\n        }\n    }\n}\n</code></pre>\n<p>gradle dependencies:</p>\n<pre><code>    implementation fileTree(dir: 'libs', include: ['*.jar'])\n    implementation &quot;org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version&quot;\n    implementation 'androidx.appcompat:appcompat:1.2.0'\n    implementation 'androidx.core:core-ktx:1.3.2'\n    implementation 'androidx.constraintlayout:constraintlayout:2.0.4'\n    api 'com.googlecode.libphonenumber:libphonenumber:8.12.13'\n</code></pre>\n"},{"comments":[{"owner":{"account_id":194308,"reputation":66745,"user_id":436560,"accept_rate":87,"display_name":"Lajos Arpad"},"score":0,"creation_date":1692473321,"post_id":76919336,"comment_id":135629102,"body_markdown":"While this link may answer the question, it is better to include the essential parts of the answer here and provide the link for reference.  Link-only answers can become invalid if the linked page changes. - [From Review](/review/late-answers/34855311)","body":"While this link may answer the question, it is better to include the essential parts of the answer here and provide the link for reference.  Link-only answers can become invalid if the linked page changes. - <a href=\"/review/late-answers/34855311\">From Review</a>"}],"tags":[],"owner":{"account_id":9924137,"reputation":29,"user_id":7346347,"display_name":"Thinh Trinh"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692257536,"creation_date":1692257536,"answer_id":76919336,"question_id":55614160,"body_markdown":"You can use the minimal regex version from [libphonenumber-js][1] library&#39;s metadata and this [tool][2] to generate valid random phone number for any country.\r\n\r\nIf this is too complicated, you can take a look at this [Random phone number generator][3] to simplify all of these stuffs.\r\n\r\n\r\n  [1]: https://www.npmjs.com/package/libphonenumber-js\r\n  [2]: https://onlinetools.com/random/generate-random-data-from-regexp\r\n  [3]: https://dotrand.com/phone-numbers/single","title":"Random phone number generator for any country","body":"<p>You can use the minimal regex version from <a href=\"https://www.npmjs.com/package/libphonenumber-js\" rel=\"nofollow noreferrer\">libphonenumber-js</a> library's metadata and this <a href=\"https://onlinetools.com/random/generate-random-data-from-regexp\" rel=\"nofollow noreferrer\">tool</a> to generate valid random phone number for any country.</p>\n<p>If this is too complicated, you can take a look at this <a href=\"https://dotrand.com/phone-numbers/single\" rel=\"nofollow noreferrer\">Random phone number generator</a> to simplify all of these stuffs.</p>\n"}],"owner":{"account_id":1242860,"reputation":4445,"user_id":1205019,"accept_rate":86,"display_name":"dr_rk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8110,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":65034923,"answer_count":3,"score":0,"last_activity_date":1692257536,"creation_date":1554903874,"question_id":55614160,"body_markdown":"I am trying to create synthetic data around phone numbers, from a list of countries. \r\n\r\nI found Google&#39;s [libphonenumber][1] Java library with ports in Python, C++, etc. a good resource. \r\n\r\nIs it possible to generate *valid* random phone numbers from a list of countries, with this library? \r\n\r\nWith this code I&#39;ve written, I am using their `getExampleNumber` function but it is generating the same number each time: \r\n\r\n    \r\n    import com.google.i18n.phonenumbers.PhoneNumberUtil;\r\n    import com.google.i18n.phonenumbers.PhoneNumberUtil.PhoneNumberType;\r\n    import com.google.i18n.phonenumbers.Phonenumber.PhoneNumber;\r\n    import com.google.i18n.phonenumbers.Phonemetadata.PhoneNumberDesc;\r\n    import com.google.i18n.phonenumbers.NumberParseException;\r\n\r\n    public class Driver {\r\n        public static void main(String[] args) {\r\n           // Prints &quot;Hello, World&quot; in the terminal window.\r\n           for (int i=0;i&lt;10;i++)\r\n           {\r\n    \t      System.out.println(Generator());\r\n           }\r\n        }\r\n\r\n\r\n        public static PhoneNumber  Generator() \r\n        {\r\n           String regionCode = new String(&quot;GB&quot;);\r\n           PhoneNumberUtil phoneNumberUtil = PhoneNumberUtil.getInstance();\r\n           PhoneNumber exampleNumber =phoneNumberUtil.getExampleNumber(regionCode);\r\n           return exampleNumber;\r\n        }\r\n\r\n    }\r\n\r\n\r\n  [1]: https://github.com/googlei18n/libphonenumber","title":"Random phone number generator for any country","body":"<p>I am trying to create synthetic data around phone numbers, from a list of countries. </p>\n\n<p>I found Google's <a href=\"https://github.com/googlei18n/libphonenumber\" rel=\"nofollow noreferrer\">libphonenumber</a> Java library with ports in Python, C++, etc. a good resource. </p>\n\n<p>Is it possible to generate <em>valid</em> random phone numbers from a list of countries, with this library? </p>\n\n<p>With this code I've written, I am using their <code>getExampleNumber</code> function but it is generating the same number each time: </p>\n\n<pre><code>import com.google.i18n.phonenumbers.PhoneNumberUtil;\nimport com.google.i18n.phonenumbers.PhoneNumberUtil.PhoneNumberType;\nimport com.google.i18n.phonenumbers.Phonenumber.PhoneNumber;\nimport com.google.i18n.phonenumbers.Phonemetadata.PhoneNumberDesc;\nimport com.google.i18n.phonenumbers.NumberParseException;\n\npublic class Driver {\n    public static void main(String[] args) {\n       // Prints \"Hello, World\" in the terminal window.\n       for (int i=0;i&lt;10;i++)\n       {\n          System.out.println(Generator());\n       }\n    }\n\n\n    public static PhoneNumber  Generator() \n    {\n       String regionCode = new String(\"GB\");\n       PhoneNumberUtil phoneNumberUtil = PhoneNumberUtil.getInstance();\n       PhoneNumber exampleNumber =phoneNumberUtil.getExampleNumber(regionCode);\n       return exampleNumber;\n    }\n\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":5368896,"reputation":698,"user_id":4277964,"accept_rate":100,"display_name":"Preshan Pradeepa"},"score":0,"creation_date":1446780077,"post_id":33558844,"comment_id":54897032,"body_markdown":"check this [link](http://codereview.stackexchange.com/questions/63283/password-validation-in-java)\nYou will find some validation methods.","body":"check this <a href=\"http://codereview.stackexchange.com/questions/63283/password-validation-in-java\">link</a> You will find some validation methods."},{"owner":{"account_id":7203757,"reputation":5,"user_id":5500126,"accept_rate":38,"display_name":"Nicole"},"score":0,"creation_date":1446780727,"post_id":33558844,"comment_id":54897189,"body_markdown":"thank you, but i&#39;m looking for an actual explanation, not just a code because i&#39;m a beginner programmer and i do not fully understand what all of that stuff means.","body":"thank you, but i&#39;m looking for an actual explanation, not just a code because i&#39;m a beginner programmer and i do not fully understand what all of that stuff means."}],"answers":[{"comments":[{"owner":{"account_id":974021,"reputation":63348,"user_id":995891,"accept_rate":83,"display_name":"zapl"},"score":0,"creation_date":1446781532,"post_id":33559029,"comment_id":54897380,"body_markdown":"works but gets super ugly: http://stackoverflow.com/questions/5142103/regex-for-password-strength - would simply check criteria with a for loop.","body":"works but gets super ugly: <a href=\"http://stackoverflow.com/questions/5142103/regex-for-password-strength\" title=\"regex for password strength\">stackoverflow.com/questions/5142103/regex-for-password-stren&zwnj;&#8203;gth</a> - would simply check criteria with a for loop."},{"owner":{"account_id":7229606,"reputation":314,"user_id":5516972,"display_name":"bakki"},"score":0,"creation_date":1446781789,"post_id":33559029,"comment_id":54897444,"body_markdown":"@zapl  Did my answer is incorrect or inappropriate. please help me understand if so","body":"@zapl  Did my answer is incorrect or inappropriate. please help me understand if so"},{"owner":{"account_id":974021,"reputation":63348,"user_id":995891,"accept_rate":83,"display_name":"zapl"},"score":0,"creation_date":1446782052,"post_id":33559029,"comment_id":54897513,"body_markdown":"No, your answer is ok :) It&#39;s just complicated to create the correct regular expression.","body":"No, your answer is ok :) It&#39;s just complicated to create the correct regular expression."},{"owner":{"account_id":7229606,"reputation":314,"user_id":5516972,"display_name":"bakki"},"score":0,"creation_date":1446782423,"post_id":33559029,"comment_id":54897613,"body_markdown":"ok.Thanks for the clarification. zapl intended to learn concept","body":"ok.Thanks for the clarification. zapl intended to learn concept"}],"tags":[],"owner":{"account_id":7229606,"reputation":314,"user_id":5516972,"display_name":"bakki"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1446780958,"creation_date":1446780958,"answer_id":33559029,"question_id":33558844,"body_markdown":"Start reading and using pattern, regex in java. Below link has good explanation, you can find lots of examples.I hope this is what you are looking for to solve your problem. \r\nhttp://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html","title":"JAVA password check program - check that the password has 2+ digits + only letters and numbers","body":"<p>Start reading and using pattern, regex in java. Below link has good explanation, you can find lots of examples.I hope this is what you are looking for to solve your problem. \n<a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html\" rel=\"nofollow\">http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html</a></p>\n"},{"tags":[],"owner":{"account_id":1031708,"reputation":1301,"user_id":1039920,"accept_rate":100,"display_name":"Mark Sholund"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1446781226,"creation_date":1446781226,"answer_id":33559074,"question_id":33558844,"body_markdown":"I was going to suggest regular expressions too but as a new programmer they may be difficult to understand. A good starting approach would be to convert the password into an array of characters and then make use of ``Character.isLetterOrDigit(c)`` and count the number of digits. ","title":"JAVA password check program - check that the password has 2+ digits + only letters and numbers","body":"<p>I was going to suggest regular expressions too but as a new programmer they may be difficult to understand. A good starting approach would be to convert the password into an array of characters and then make use of <code>Character.isLetterOrDigit(c)</code> and count the number of digits. </p>\n"},{"tags":[],"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1446783481,"creation_date":1446783481,"answer_id":33559415,"question_id":33558844,"body_markdown":"Regex is the weapon of choice, with which the solution reduces to a single method call:\r\n\r\n    boolean correct = password.matches(&quot;(?=(.*\\\\d){2})[a-zA-Z0-9]{8,}&quot;);","title":"JAVA password check program - check that the password has 2+ digits + only letters and numbers","body":"<p>Regex is the weapon of choice, with which the solution reduces to a single method call:</p>\n\n<pre><code>boolean correct = password.matches(\"(?=(.*\\\\d){2})[a-zA-Z0-9]{8,}\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6846571,"reputation":71,"user_id":5265193,"display_name":"Aeros"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1446784721,"creation_date":1446784721,"answer_id":33559598,"question_id":33558844,"body_markdown":"Here is a solution.  It is not efficient, however it should be helpful for beginners.  It breaks the problem into steps.  Each requirement for the password is tested one step at a time.  If at any point, one of the requirements are violated the method returns false; there is no point in making more checks once we know for sure the password is invalid.\r\n\r\nThe method first checks for the length (as above).  Then it uses a for loop to count the number of digits in the String.  Next it uses a regular expression to ensure that only alphanumeric characters are in the password.  Notice the logical negation (!) operator when testing if the String is alphanumeric.  It enables a return of false if the String does *not* contain exclusively letters and digits.\r\n\r\nComments are included to illustrate and clarify the logic.  Good luck.\r\n\r\n    public static boolean passwordLength(String password) {\r\n        /* Declare a boolean variable to hold the result of the method */\r\n        boolean correct = true;\r\n        \r\n        /* Declare an int variable to hold the count of each digit */\r\n        int digit = 0; \r\n\r\n        if (password.length() &lt; 8) {\r\n            /* The password is less than 8 characters, return false */\r\n            return false;\r\n        }\r\n        \r\n        /* Declare a char variable to hold each element of the String */\r\n        char element;\r\n        \r\n        /* Check if the password has 2 or more digits */\r\n        for(int index = 0; index &lt; password.length(); index++ ){\r\n            \r\n            /* Check each char in the String */\r\n            element = password.charAt( index );\r\n            \r\n            /* Check if it is a digit or not */\r\n            if( Character.isDigit(element) ){\r\n                /* It is a digit, so increment digit */\r\n                digit++;\r\n            } // End if block\r\n           \r\n        } // End for loop \r\n        \r\n        /* Now check for the count of digits in the password */\r\n        if( digit &lt; 2 ){\r\n            /* There are fewer than 2 digits in the password, return false */\r\n            return false;\r\n        }\r\n        \r\n        /* Use a regular expression (regex) to check for only letters and numbers */\r\n        /* The regex will check for upper and lower case letters and digits */\r\n        if( !password.matches(&quot;[a-zA-Z0-9]+&quot;) ){\r\n            /* A non-alphanumeric character was found, return false */\r\n            return false;\r\n        }\r\n            \r\n        /* All checks at this point have passed, the password is valid */\r\n        return correct;\r\n        \r\n    }","title":"JAVA password check program - check that the password has 2+ digits + only letters and numbers","body":"<p>Here is a solution.  It is not efficient, however it should be helpful for beginners.  It breaks the problem into steps.  Each requirement for the password is tested one step at a time.  If at any point, one of the requirements are violated the method returns false; there is no point in making more checks once we know for sure the password is invalid.</p>\n\n<p>The method first checks for the length (as above).  Then it uses a for loop to count the number of digits in the String.  Next it uses a regular expression to ensure that only alphanumeric characters are in the password.  Notice the logical negation (!) operator when testing if the String is alphanumeric.  It enables a return of false if the String does <em>not</em> contain exclusively letters and digits.</p>\n\n<p>Comments are included to illustrate and clarify the logic.  Good luck.</p>\n\n<pre><code>public static boolean passwordLength(String password) {\n    /* Declare a boolean variable to hold the result of the method */\n    boolean correct = true;\n\n    /* Declare an int variable to hold the count of each digit */\n    int digit = 0; \n\n    if (password.length() &lt; 8) {\n        /* The password is less than 8 characters, return false */\n        return false;\n    }\n\n    /* Declare a char variable to hold each element of the String */\n    char element;\n\n    /* Check if the password has 2 or more digits */\n    for(int index = 0; index &lt; password.length(); index++ ){\n\n        /* Check each char in the String */\n        element = password.charAt( index );\n\n        /* Check if it is a digit or not */\n        if( Character.isDigit(element) ){\n            /* It is a digit, so increment digit */\n            digit++;\n        } // End if block\n\n    } // End for loop \n\n    /* Now check for the count of digits in the password */\n    if( digit &lt; 2 ){\n        /* There are fewer than 2 digits in the password, return false */\n        return false;\n    }\n\n    /* Use a regular expression (regex) to check for only letters and numbers */\n    /* The regex will check for upper and lower case letters and digits */\n    if( !password.matches(\"[a-zA-Z0-9]+\") ){\n        /* A non-alphanumeric character was found, return false */\n        return false;\n    }\n\n    /* All checks at this point have passed, the password is valid */\n    return correct;\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18936468,"reputation":107,"user_id":13817418,"display_name":"Blazej Kita"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692257468,"creation_date":1692257468,"answer_id":76919325,"question_id":33558844,"body_markdown":"       public boolean isPassOk(String val)\r\n    {\r\n       boolean isUp       = false;\r\n       boolean isDown     = false;\r\n       boolean isNum      = false;\r\n       boolean isSPecial  = false;\r\n\r\n       char c[] = val.toCharArray();\r\n\r\n       for(int k = 0; k&lt;c.length; k++)\r\n       {\r\n           int cc = (int)c[k];\r\n\r\n           if(cc &gt;= 48 &amp;&amp; cc &lt;= 57 )  {isNum = true;} else\r\n           if(cc &gt;= 65 &amp;&amp; cc &lt;= 90 )  {isUp = true;} else\r\n           if(cc &gt;= 97 &amp;&amp; cc &lt;= 122 ) {isDown = true;} else\r\n               isSPecial = true;\r\n\r\n\r\n       }\r\n\r\n       if(isDown &amp;&amp; isUp &amp;&amp; isNum &amp;&amp; isSPecial) return true;\r\n\r\n       return false;\r\n    }\r\n","title":"JAVA password check program - check that the password has 2+ digits + only letters and numbers","body":"<pre><code>   public boolean isPassOk(String val)\n{\n   boolean isUp       = false;\n   boolean isDown     = false;\n   boolean isNum      = false;\n   boolean isSPecial  = false;\n\n   char c[] = val.toCharArray();\n\n   for(int k = 0; k&lt;c.length; k++)\n   {\n       int cc = (int)c[k];\n\n       if(cc &gt;= 48 &amp;&amp; cc &lt;= 57 )  {isNum = true;} else\n       if(cc &gt;= 65 &amp;&amp; cc &lt;= 90 )  {isUp = true;} else\n       if(cc &gt;= 97 &amp;&amp; cc &lt;= 122 ) {isDown = true;} else\n           isSPecial = true;\n\n\n   }\n\n   if(isDown &amp;&amp; isUp &amp;&amp; isNum &amp;&amp; isSPecial) return true;\n\n   return false;\n}\n</code></pre>\n"}],"owner":{"account_id":7203757,"reputation":5,"user_id":5500126,"accept_rate":38,"display_name":"Nicole"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4696,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":33559598,"answer_count":5,"score":1,"last_activity_date":1692257468,"creation_date":1446779738,"question_id":33558844,"body_markdown":"okay so i&#39;m making a password checker program and there&#39;s a few rules.\r\nthe password must be 8 or more characters\r\nthe password must contain 2 or more digits\r\nthe password can only be letters and numbers\r\nhere is what i have so far\r\n**how do i check for 2 digits and for only letters and numbers? thanks**\r\n\r\n    import java.util.Scanner;\r\n    \r\n    public class checkPassword {\r\n    \r\n    \tpublic static boolean passwordLength(String password) {\r\n    \t\tboolean correct = true;\r\n    \t\tint digit = 0; \r\n    \r\n    \t\tif (password.length() &lt; 8) {\r\n    \t\t\tcorrect = false;\r\n    \t\t}\r\n    \t\treturn correct;\r\n    \t}\r\n    \t\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\t// Nikki Kulyk\r\n    \r\n    \r\n    \t\t//Declare the variables\r\n    \t\tString password;\r\n    \r\n    \t\tScanner input = new Scanner(System.in);\r\n    \r\n    \t\t//Welcome the user\r\n    \t\tSystem.out.println(&quot;Welcome to the password checker!&quot;);\r\n    \r\n    \t\t//Ask the user for input\r\n    \t\tSystem.out.println(&quot;Here are some rules for the password because we like to be complicated:\\n&quot;);\r\n    \t\tSystem.out.println(&quot;A password must contain at least eight characters.\\n&quot; +\r\n    \t\t\t\t&quot;A password consists of only letters and digits.\\n&quot; +\r\n    \t\t\t\t&quot;A password must contain at least two digits.\\n&quot;);\r\n    \t\tSystem.out.println(&quot;Enter the password: &quot;);\r\n    \t\tpassword = input.nextLine();\r\n    \r\n    \t\tboolean correct = passwordLength(password);\r\n    \t\t\r\n    \r\n    \t\tif (correct) {\r\n    \t\t\tSystem.out.println(&quot;Your password is valid.&quot;);\r\n    \t\t}\r\n    \t\telse {\r\n    \t\t\tSystem.out.println(&quot;Your password is invalid.&quot;);\r\n    \t\t}\r\n    \r\n    \t}\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"JAVA password check program - check that the password has 2+ digits + only letters and numbers","body":"<p>okay so i'm making a password checker program and there's a few rules.\nthe password must be 8 or more characters\nthe password must contain 2 or more digits\nthe password can only be letters and numbers\nhere is what i have so far\n<strong>how do i check for 2 digits and for only letters and numbers? thanks</strong></p>\n\n<pre><code>import java.util.Scanner;\n\npublic class checkPassword {\n\n    public static boolean passwordLength(String password) {\n        boolean correct = true;\n        int digit = 0; \n\n        if (password.length() &lt; 8) {\n            correct = false;\n        }\n        return correct;\n    }\n\n\n    public static void main(String[] args) {\n        // Nikki Kulyk\n\n\n        //Declare the variables\n        String password;\n\n        Scanner input = new Scanner(System.in);\n\n        //Welcome the user\n        System.out.println(\"Welcome to the password checker!\");\n\n        //Ask the user for input\n        System.out.println(\"Here are some rules for the password because we like to be complicated:\\n\");\n        System.out.println(\"A password must contain at least eight characters.\\n\" +\n                \"A password consists of only letters and digits.\\n\" +\n                \"A password must contain at least two digits.\\n\");\n        System.out.println(\"Enter the password: \");\n        password = input.nextLine();\n\n        boolean correct = passwordLength(password);\n\n\n        if (correct) {\n            System.out.println(\"Your password is valid.\");\n        }\n        else {\n            System.out.println(\"Your password is invalid.\");\n        }\n\n    }\n}\n</code></pre>\n"},{"tags":["java","oop","constructor","package"],"comments":[{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":2,"creation_date":1692243951,"post_id":76918339,"comment_id":135597904,"body_markdown":"Are `public class Car` and `public class Module10Assignment` in the same source code file? If so, that is a mistake. They need to be in separate source files, one named `Car.java` and the other named `Module10Assignment.java`.  (If they are not in the same source code file, please edit the question to show that.)","body":"Are <code>public class Car</code> and <code>public class Module10Assignment</code> in the same source code file? If so, that is a mistake. They need to be in separate source files, one named <code>Car.java</code> and the other named <code>Module10Assignment.java</code>.  (If they are not in the same source code file, please edit the question to show that.)"}],"answers":[{"tags":[],"owner":{"account_id":24009548,"reputation":49,"user_id":17993307,"display_name":"Mamta"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1692256739,"creation_date":1692244489,"answer_id":76918380,"question_id":76918339,"body_markdown":"In your model class code you made a mistake in constructor, Because constructor do not have any return type, and you assign the void to constructor.\r\n```\r\npublic void Car(String make, String model){\r\n   \r\n    this.make = make;\r\n    this.model = model;\r\n}\r\n```\r\nPlease remove the void from this constructor,\r\nYour Code should be like this: \r\n```\r\npublic Car(String make, String model){\r\n\r\n    this.make = make;\r\n    this.model = model;\r\n}\r\n```","title":"&quot;Class, interface, record, or enum expected&quot; in front of package?","body":"<p>In your model class code you made a mistake in constructor, Because constructor do not have any return type, and you assign the void to constructor.</p>\n<pre><code>public void Car(String make, String model){\n   \n    this.make = make;\n    this.model = model;\n}\n</code></pre>\n<p>Please remove the void from this constructor,\nYour Code should be like this:</p>\n<pre><code>public Car(String make, String model){\n\n    this.make = make;\n    this.model = model;\n}\n</code></pre>\n"}],"owner":{"account_id":29241089,"reputation":1,"user_id":22402598,"display_name":"jay"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692256739,"creation_date":1692243604,"question_id":76918339,"body_markdown":"This is a program answer provided by a professor, but it has an error in it that i&#39;m currently unable to ask them about. Forgive me if the answer is obvious, i&#39;m still a beginner! Thank you in advance to anyone who can help. I don&#39;t believe the error is cause by a missing bracket by the way, but maybe i&#39;m wrong.\r\n\r\n    //This problem creates a car of a specified make and model.  The car\r\n    //accelerates 25 miles an hour and decelerates to 0 miles per hour\r\n    package module10assignment;\r\n\r\n    import java.io.*;\r\n    import java.util.Scanner;\r\n\r\n    public class Module10Assignment {\r\n\r\n    public static void main(String[] args) {\r\n\r\n        //Local variables\r\n        String inputModel;\r\n        String inputMake;\r\n        Integer index;\r\n\r\n        //Create a Car object\r\n        Car Auto = new Car();\r\n\r\n        Scanner keyboard = new Scanner(System.in);\r\n\r\n        //Get variables for a car\r\n        System.out.println(&quot;Enter a model year:&quot;);\r\n        inputModel = keyboard.nextLine();\r\n        Auto.setModel(inputModel);\r\n      `\r\n        System.out.println(&quot;Enter make:&quot;);\r\n        inputMake = keyboard.nextLine();\r\n        Auto.setMake(inputMake);\r\n\r\n        //Show variables for a car\r\n        System.out.println(&quot;\\nThe car year is &quot; + Auto.getModel());\r\n        System.out.println(&quot;\\nThe car model is &quot; + Auto.getMake() + &quot;\\n&quot;);\r\n\r\n        System.out.println(&quot;I&#39;m starting my car...&quot;);\r\n\r\n        index = 1;\r\n\r\n        //Show speed for each of 5 accelerations\r\n        while (index &lt;= 5){\r\n\r\n            Auto.setAccelerate();\r\n            index += 1;\r\n        }\r\n\r\n        System.out.println(&quot;The car speed after 5 accelerations is &quot; +\r\n                Auto.getSpeed()+ &quot;\\n&quot;);\r\n\r\n        index = 1;\r\n\r\n        //Show speed for each of 5 decelerations\r\n        while (index &lt;= 5){\r\n\r\n            Auto.setBrake();\r\n            index += 1;\r\n        }\r\n\r\n        System.out.println(&quot;The car speed after 5 breaks is &quot; +\r\n                Auto.getSpeed()+ &quot;\\n&quot;);\r\n\r\n\r\n\r\n\r\n     }\r\n\r\n    }\r\n\r\n    ***// THIS IS WHERE THE ERROR SHOWS UP!!!!!!*** \r\n    package module10assignment;\r\n\r\n    public class Car {\r\n\r\n    private String make;\r\n    private String model;\r\n    private Integer speed = 0;\r\n\r\n    public void Car(String make, String model){\r\n\r\n        this.make = make;\r\n        this.model = model;\r\n\r\n    }\r\n\r\n    public void setMake(String make) {\r\n        this.make = make;\r\n    }\r\n\r\n    public void setModel(String model) {\r\n        this.model = model;\r\n    }\r\n\r\n    public String getMake() {\r\n        return make;\r\n    }\r\n\r\n    public String getModel() {\r\n        return model;\r\n    }\r\n\r\n    public void setAccelerate(){\r\n\r\n        //Increase speed by 5 mph\r\n        this.speed += 5;\r\n        System.out.println(&quot;Accelerating to &quot; + this.speed + &quot; miles per hour.&quot;);\r\n     }\r\n\r\n    public void setBrake(){\r\n\r\n        //Decrease speed by 5 mph\r\n        this.speed -= 5;\r\n        System.out.println(&quot;Slowing to &quot; + this.speed + &quot; miles per hour.&quot;);\r\n        }\r\n\r\n       public Integer getSpeed(){\r\n         return speed;\r\n        }\r\n      }\r\n","title":"&quot;Class, interface, record, or enum expected&quot; in front of package?","body":"<p>This is a program answer provided by a professor, but it has an error in it that i'm currently unable to ask them about. Forgive me if the answer is obvious, i'm still a beginner! Thank you in advance to anyone who can help. I don't believe the error is cause by a missing bracket by the way, but maybe i'm wrong.</p>\n<pre><code>//This problem creates a car of a specified make and model.  The car\n//accelerates 25 miles an hour and decelerates to 0 miles per hour\npackage module10assignment;\n\nimport java.io.*;\nimport java.util.Scanner;\n\npublic class Module10Assignment {\n\npublic static void main(String[] args) {\n\n    //Local variables\n    String inputModel;\n    String inputMake;\n    Integer index;\n\n    //Create a Car object\n    Car Auto = new Car();\n\n    Scanner keyboard = new Scanner(System.in);\n\n    //Get variables for a car\n    System.out.println(&quot;Enter a model year:&quot;);\n    inputModel = keyboard.nextLine();\n    Auto.setModel(inputModel);\n  `\n    System.out.println(&quot;Enter make:&quot;);\n    inputMake = keyboard.nextLine();\n    Auto.setMake(inputMake);\n\n    //Show variables for a car\n    System.out.println(&quot;\\nThe car year is &quot; + Auto.getModel());\n    System.out.println(&quot;\\nThe car model is &quot; + Auto.getMake() + &quot;\\n&quot;);\n\n    System.out.println(&quot;I'm starting my car...&quot;);\n\n    index = 1;\n\n    //Show speed for each of 5 accelerations\n    while (index &lt;= 5){\n\n        Auto.setAccelerate();\n        index += 1;\n    }\n\n    System.out.println(&quot;The car speed after 5 accelerations is &quot; +\n            Auto.getSpeed()+ &quot;\\n&quot;);\n\n    index = 1;\n\n    //Show speed for each of 5 decelerations\n    while (index &lt;= 5){\n\n        Auto.setBrake();\n        index += 1;\n    }\n\n    System.out.println(&quot;The car speed after 5 breaks is &quot; +\n            Auto.getSpeed()+ &quot;\\n&quot;);\n\n\n\n\n }\n\n}\n\n***// THIS IS WHERE THE ERROR SHOWS UP!!!!!!*** \npackage module10assignment;\n\npublic class Car {\n\nprivate String make;\nprivate String model;\nprivate Integer speed = 0;\n\npublic void Car(String make, String model){\n\n    this.make = make;\n    this.model = model;\n\n}\n\npublic void setMake(String make) {\n    this.make = make;\n}\n\npublic void setModel(String model) {\n    this.model = model;\n}\n\npublic String getMake() {\n    return make;\n}\n\npublic String getModel() {\n    return model;\n}\n\npublic void setAccelerate(){\n\n    //Increase speed by 5 mph\n    this.speed += 5;\n    System.out.println(&quot;Accelerating to &quot; + this.speed + &quot; miles per hour.&quot;);\n }\n\npublic void setBrake(){\n\n    //Decrease speed by 5 mph\n    this.speed -= 5;\n    System.out.println(&quot;Slowing to &quot; + this.speed + &quot; miles per hour.&quot;);\n    }\n\n   public Integer getSpeed(){\n     return speed;\n    }\n  }\n</code></pre>\n"},{"tags":["java","log4j","log4j2"],"comments":[{"owner":{"account_id":7034556,"reputation":12335,"user_id":5389127,"display_name":"Ga&#235;l J"},"score":0,"creation_date":1692210342,"post_id":76915934,"comment_id":135594004,"body_markdown":"Did you try anything that didn&#39;t work?","body":"Did you try anything that didn&#39;t work?"}],"answers":[{"tags":[],"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692208396,"creation_date":1692208396,"answer_id":76915967,"question_id":76915934,"body_markdown":"Package the log4j2.xml configuration file in a jar file library and use that library in both projects.\r\n","title":"how to use one shared log4j configure file in multiple java projects","body":"<p>Package the log4j2.xml configuration file in a jar file library and use that library in both projects.</p>\n"}],"owner":{"account_id":4560076,"reputation":518,"user_id":3702685,"display_name":"Ali Zareshahi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1692492449,"answer_count":1,"score":-2,"last_activity_date":1692256480,"creation_date":1692208071,"question_id":76915934,"body_markdown":"I used one log4j2.xml file configuration in a Java project named &quot;common&quot; \\\r\nnow I want to use this configuration file directly (without copy) in the other two Java projects named &quot;a&quot; and &quot;b&quot;. \r\n\r\nhow can I do this? ","title":"how to use one shared log4j configure file in multiple java projects","body":"<p>I used one log4j2.xml file configuration in a Java project named &quot;common&quot; <br />\nnow I want to use this configuration file directly (without copy) in the other two Java projects named &quot;a&quot; and &quot;b&quot;.</p>\n<p>how can I do this?</p>\n"},{"tags":["java","jsp","visual-studio-code","tomcat"],"comments":[{"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"score":0,"creation_date":1668130747,"post_id":74388409,"comment_id":131337511,"body_markdown":"I think it would be more helpful if you could provide the tomcat you are using and the steps you did and the link you referenced.","body":"I think it would be more helpful if you could provide the tomcat you are using and the steps you did and the link you referenced."}],"answers":[{"comments":[{"owner":{"account_id":6646660,"reputation":346,"user_id":6040276,"display_name":"trysetyoutomo"},"score":2,"creation_date":1673792941,"post_id":74397713,"comment_id":132572375,"body_markdown":"how to implement hot reload for jsp file, css, js?","body":"how to implement hot reload for jsp file, css, js?"},{"owner":{"account_id":25845637,"reputation":534,"user_id":19580540,"display_name":"ayush"},"score":0,"creation_date":1674406192,"post_id":74397713,"comment_id":132703088,"body_markdown":"I performed the same steps but getting an error when trying to start the server-  Error: Could not find or load main class Files\\Apache\nCaused by: java.lang.ClassNotFoundException: Files\\Apache\nCan you please suggest any fix?","body":"I performed the same steps but getting an error when trying to start the server-  Error: Could not find or load main class Files\\Apache Caused by: java.lang.ClassNotFoundException: Files\\Apache Can you please suggest any fix?"}],"tags":[],"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668137108,"creation_date":1668137108,"answer_id":74397713,"question_id":74388409,"body_markdown":"First you need to install the [**Community Server Connectors**][1] extension.\r\n\r\n[![enter image description here][2]][2]\r\n\r\nThen &lt;kbd&gt;Ctrl&lt;/kbd&gt;+&lt;kbd&gt;Shift&lt;/kbd&gt;+&lt;kbd&gt;P&lt;/kbd&gt; --&gt; `Servers: Add Local Servers...`.\r\n\r\n[![enter image description here][3]][3]\r\n\r\nIn the pop-up explorer window, select the decompressed tomcat root directory (that is, the value of the system environment variable **CATALINA_HOME**).\r\n\r\n[![enter image description here][4]][4]\r\n\r\nConfirm that the information is correct and click `Finish`.\r\n\r\n[![enter image description here][5]][5]\r\n\r\nSelect the generated `war` package, right-click and select `Run on Server`.\r\n\r\n[![enter image description here][6]][6]\r\n\r\nIn the **SERVERS** view, right-click on the *tomcat* service and select `Server Actions...` --&gt; `Show in browser...` --&gt; `http://localhost:8080/demo/`.\r\n\r\n[![enter image description here][7]][7]\r\n\r\nThe browser will open and display the project page.\r\n\r\n[![enter image description here][8]][8]\r\n\r\n\r\n  [1]: https://marketplace.visualstudio.com/items?itemName=redhat.vscode-community-server-connector\r\n  [2]: https://i.stack.imgur.com/RgcUv.png\r\n  [3]: https://i.stack.imgur.com/8cH64.png\r\n  [4]: https://i.stack.imgur.com/Ys1pM.png\r\n  [5]: https://i.stack.imgur.com/Lt8Kz.png\r\n  [6]: https://i.stack.imgur.com/iHXKw.png\r\n  [7]: https://i.stack.imgur.com/myU6M.png\r\n  [8]: https://i.stack.imgur.com/Gk5hq.png","title":"How to start a Tomcat 8.5 server on VSC using Community Server Connector extension","body":"<p>First you need to install the <a href=\"https://marketplace.visualstudio.com/items?itemName=redhat.vscode-community-server-connector\" rel=\"nofollow noreferrer\"><strong>Community Server Connectors</strong></a> extension.</p>\n<p><a href=\"https://i.stack.imgur.com/RgcUv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RgcUv.png\" alt=\"enter image description here\" /></a></p>\n<p>Then <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>P</kbd> --&gt; <code>Servers: Add Local Servers...</code>.</p>\n<p><a href=\"https://i.stack.imgur.com/8cH64.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8cH64.png\" alt=\"enter image description here\" /></a></p>\n<p>In the pop-up explorer window, select the decompressed tomcat root directory (that is, the value of the system environment variable <strong>CATALINA_HOME</strong>).</p>\n<p><a href=\"https://i.stack.imgur.com/Ys1pM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ys1pM.png\" alt=\"enter image description here\" /></a></p>\n<p>Confirm that the information is correct and click <code>Finish</code>.</p>\n<p><a href=\"https://i.stack.imgur.com/Lt8Kz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Lt8Kz.png\" alt=\"enter image description here\" /></a></p>\n<p>Select the generated <code>war</code> package, right-click and select <code>Run on Server</code>.</p>\n<p><a href=\"https://i.stack.imgur.com/iHXKw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iHXKw.png\" alt=\"enter image description here\" /></a></p>\n<p>In the <strong>SERVERS</strong> view, right-click on the <em>tomcat</em> service and select <code>Server Actions...</code> --&gt; <code>Show in browser...</code> --&gt; <code>http://localhost:8080/demo/</code>.</p>\n<p><a href=\"https://i.stack.imgur.com/myU6M.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/myU6M.png\" alt=\"enter image description here\" /></a></p>\n<p>The browser will open and display the project page.</p>\n<p><a href=\"https://i.stack.imgur.com/Gk5hq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Gk5hq.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":12013227,"reputation":1,"user_id":8789183,"display_name":"bheedu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675992007,"creation_date":1675991970,"answer_id":75406090,"question_id":74388409,"body_markdown":"in tomcat-users.xml (in your tomcat config folder) make sure you have the roles setup. adding this should solve your problem\r\n\r\n\r\n    &lt;tomcat-users&gt;\r\n      &lt;role rolename=&quot;manager-gui&quot; /&gt;\r\n      &lt;role rolename=&quot;admin&quot; /&gt;\r\n      &lt;user username=&quot;admin&quot; password=&quot;admin&quot; roles=&quot;admin,manager-gui&quot; /&gt;\r\n    &lt;/tomcat-users&gt;","title":"How to start a Tomcat 8.5 server on VSC using Community Server Connector extension","body":"<p>in tomcat-users.xml (in your tomcat config folder) make sure you have the roles setup. adding this should solve your problem</p>\n<pre><code>&lt;tomcat-users&gt;\n  &lt;role rolename=&quot;manager-gui&quot; /&gt;\n  &lt;role rolename=&quot;admin&quot; /&gt;\n  &lt;user username=&quot;admin&quot; password=&quot;admin&quot; roles=&quot;admin,manager-gui&quot; /&gt;\n&lt;/tomcat-users&gt;\n</code></pre>\n"}],"owner":{"account_id":26888876,"reputation":1,"user_id":20467974,"display_name":"ambznuke"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3229,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1692256428,"creation_date":1668080401,"question_id":74388409,"body_markdown":"I&#39;m trying to set up a Tomcat Server on VSC (since it couldn&#39;t work on IntelliJ because I don&#39;t have the ultimate edition) but I have no experience (and neither do my colleagues) with Community Server Connector. All our documentation is written for Tomcat For Java extension, but since it&#39;s deprecated we have to use Community Server Connector. I&#39;ve done all the necessary steps (like LDAP certificates, changes to server.xml etc) so it should be working...right?\r\n\r\nOnce I try to start the server I get  \r\nError: Could not find or load main class Files\\Apache\r\n\r\nWe don&#39;t really have a clue where we could solve this, we looked a lot online but nothing really seems to work. If someone has an idea where to look and/or what settings to change please help! \r\n\r\nIf you need more information, just leave a message\r\n\r\nLooked over the documentation steps to see if I missed something\r\nTried out all (I think) of the options within the extension\r\nSearched online for solutions\r\nAsked colleagues but they couldn&#39;t find it either\r\n\r\n","title":"How to start a Tomcat 8.5 server on VSC using Community Server Connector extension","body":"<p>I'm trying to set up a Tomcat Server on VSC (since it couldn't work on IntelliJ because I don't have the ultimate edition) but I have no experience (and neither do my colleagues) with Community Server Connector. All our documentation is written for Tomcat For Java extension, but since it's deprecated we have to use Community Server Connector. I've done all the necessary steps (like LDAP certificates, changes to server.xml etc) so it should be working...right?</p>\n<p>Once I try to start the server I get<br />\nError: Could not find or load main class Files\\Apache</p>\n<p>We don't really have a clue where we could solve this, we looked a lot online but nothing really seems to work. If someone has an idea where to look and/or what settings to change please help!</p>\n<p>If you need more information, just leave a message</p>\n<p>Looked over the documentation steps to see if I missed something\nTried out all (I think) of the options within the extension\nSearched online for solutions\nAsked colleagues but they couldn't find it either</p>\n"},{"tags":["java","apache-kafka","kafka-producer-api","kafka-transactions-api"],"owner":{"account_id":25554154,"reputation":181,"user_id":19338016,"display_name":"hololensen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692255938,"creation_date":1692220097,"question_id":76917081,"body_markdown":"If I got `ProducerFencedException` in my transactional producer, should I try to recreate it?\r\nIf I got this exception, it means that there is another producer with the same `transaction.id`, but if a new producer is closed (replica is down), my old producer will not be recreated (but replica is still alive). So, I got in situation where I have no producer at all. \r\nHow is this usually decided? Creating sort of container for lifecycle? Can you provide some example?","title":"Should I recreate producer after ProducerFencedException?","body":"<p>If I got <code>ProducerFencedException</code> in my transactional producer, should I try to recreate it?\nIf I got this exception, it means that there is another producer with the same <code>transaction.id</code>, but if a new producer is closed (replica is down), my old producer will not be recreated (but replica is still alive). So, I got in situation where I have no producer at all.\nHow is this usually decided? Creating sort of container for lifecycle? Can you provide some example?</p>\n"},{"tags":["java","orientdb","tinkerpop3"],"owner":{"account_id":17154481,"reputation":25,"user_id":12415697,"display_name":"liyang"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692255850,"creation_date":1692255850,"question_id":76919159,"body_markdown":"In tinkerpop 2.6, I am able to do `setAutoStartTx(false)` for the OrientGraphFactory. How can I do the same in tinkerpop 3.0 using orientdb-gremlin? I am using OrientDB v3.2.21. This is because I want to disable the auto transaction for the OrientGraph. ","title":"OrientDB v3 set auto transaction to false with tinkerpop 3.0","body":"<p>In tinkerpop 2.6, I am able to do <code>setAutoStartTx(false)</code> for the OrientGraphFactory. How can I do the same in tinkerpop 3.0 using orientdb-gremlin? I am using OrientDB v3.2.21. This is because I want to disable the auto transaction for the OrientGraph.</p>\n"},{"tags":["java","windows","awt","display","jna"],"comments":[{"owner":{"account_id":1187908,"reputation":8615,"user_id":1161484,"accept_rate":93,"display_name":"Daniel Widdis"},"score":0,"creation_date":1599438673,"post_id":63770033,"comment_id":112766380,"body_markdown":"I don&#39;t understand what your question is.  Where is the cursor? It&#39;s on both screens simultaneously.","body":"I don&#39;t understand what your question is.  Where is the cursor? It&#39;s on both screens simultaneously."},{"owner":{"account_id":18595817,"reputation":373,"user_id":13551878,"display_name":"Vicne"},"score":0,"creation_date":1599439089,"post_id":63770033,"comment_id":112766448,"body_markdown":"Well if I move my cursor from the left edge of the primary display to the right edge of the secondary display (placed to the right and scaled 150%), of course Windows moves the cursor as expected in a continuous way. However, the call to `MouseInfo.getPointerInfo().getLocation()` returns an increasing x-value from 0 to 1920 while the cursor is on the first display, but as soon as the cursor enters the second display, the x-value jumps back to 1280 and then increases to 2560. I see it as a bug... Please don&#39;t hesitate to test the code, maybe disabling the &quot;if (useJna) {&quot; sections first. Thx.","body":"Well if I move my cursor from the left edge of the primary display to the right edge of the secondary display (placed to the right and scaled 150%), of course Windows moves the cursor as expected in a continuous way. However, the call to <code>MouseInfo.getPointerInfo().getLocation()</code> returns an increasing x-value from 0 to 1920 while the cursor is on the first display, but as soon as the cursor enters the second display, the x-value jumps back to 1280 and then increases to 2560. I see it as a bug... Please don&#39;t hesitate to test the code, maybe disabling the &quot;if (useJna) {&quot; sections first. Thx."},{"owner":{"account_id":1187908,"reputation":8615,"user_id":1161484,"accept_rate":93,"display_name":"Daniel Widdis"},"score":0,"creation_date":1599439423,"post_id":63770033,"comment_id":112766493,"body_markdown":"It would be much more clear if you put that paragraph at the top of your post to give context. I didn&#39;t understand your question without that.","body":"It would be much more clear if you put that paragraph at the top of your post to give context. I didn&#39;t understand your question without that."},{"owner":{"account_id":2127644,"reputation":48143,"user_id":1889329,"accept_rate":71,"display_name":"IInspectable"},"score":0,"creation_date":1599461833,"post_id":63770033,"comment_id":112771144,"body_markdown":"Does [GetCorsorPos](https://learn.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-getcursorpos) return the same values?","body":"Does <a href=\"https://learn.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-getcursorpos\" rel=\"nofollow noreferrer\">GetCorsorPos</a> return the same values?"},{"owner":{"account_id":18595817,"reputation":373,"user_id":13551878,"display_name":"Vicne"},"score":0,"creation_date":1599475877,"post_id":63770033,"comment_id":112777141,"body_markdown":"@Daniel Widdis: well, giving context was my goal :-), that’s why I put the question at the end. I’ll try to rework the beginning.","body":"@Daniel Widdis: well, giving context was my goal :-), that’s why I put the question at the end. I’ll try to rework the beginning."},{"owner":{"account_id":18595817,"reputation":373,"user_id":13551878,"display_name":"Vicne"},"score":0,"creation_date":1599475979,"post_id":63770033,"comment_id":112777186,"body_markdown":"@IInspectable: I’ll try that tonight. Thanks for the suggestion.","body":"@IInspectable: I’ll try that tonight. Thanks for the suggestion."},{"owner":{"account_id":18595817,"reputation":373,"user_id":13551878,"display_name":"Vicne"},"score":0,"creation_date":1599522053,"post_id":63770033,"comment_id":112793263,"body_markdown":"@Daniel Widdis: OK, reworked the question and also checked that it affects not only position &quot;reading&quot; (get mouse location) but also &quot;writing&quot; (set dialog location). Code is updated accordingly (with JNA commented-out by default), don&#39;t hesitate to try it.","body":"@Daniel Widdis: OK, reworked the question and also checked that it affects not only position &quot;reading&quot; (get mouse location) but also &quot;writing&quot; (set dialog location). Code is updated accordingly (with JNA commented-out by default), don&#39;t hesitate to try it."},{"owner":{"account_id":18595817,"reputation":373,"user_id":13551878,"display_name":"Vicne"},"score":0,"creation_date":1599522256,"post_id":63770033,"comment_id":112793292,"body_markdown":"@IInspectable: Sorry I cannot find any GetCursorPos in the Java API. Or maybe you meant the native call ? In that case, it was already included in the JNA code, yes, and JNA (both for screen querying and for mouse location) return consistent values based on the physical screens resolutions (no scaling applied).","body":"@IInspectable: Sorry I cannot find any GetCursorPos in the Java API. Or maybe you meant the native call ? In that case, it was already included in the JNA code, yes, and JNA (both for screen querying and for mouse location) return consistent values based on the physical screens resolutions (no scaling applied)."},{"owner":{"account_id":18595817,"reputation":373,"user_id":13551878,"display_name":"Vicne"},"score":0,"creation_date":1599522574,"post_id":63770033,"comment_id":112793348,"body_markdown":"Here is a video showing the issue, using the app above: https://photos.app.goo.gl/yoFXS8A2ctze6qNH8","body":"Here is a video showing the issue, using the app above: <a href=\"https://photos.app.goo.gl/yoFXS8A2ctze6qNH8\" rel=\"nofollow noreferrer\">photos.app.goo.gl/yoFXS8A2ctze6qNH8</a>"}],"answers":[{"comments":[{"owner":{"account_id":18595817,"reputation":373,"user_id":13551878,"display_name":"Vicne"},"score":0,"creation_date":1600029981,"post_id":63804052,"comment_id":112952500,"body_markdown":"Thanks Daniel, nice find. That&#39;s clearly the issue I&#39;m facing. I&#39;ll switch to JNA for the time being. KR. Vicne","body":"Thanks Daniel, nice find. That&#39;s clearly the issue I&#39;m facing. I&#39;ll switch to JNA for the time being. KR. Vicne"},{"owner":{"account_id":1680944,"reputation":959,"user_id":1545188,"display_name":"Patter"},"score":2,"creation_date":1651657030,"post_id":63804052,"comment_id":127413204,"body_markdown":"I came across this searching for a similar problem in JavaFX (17) Mouse/DragEvents returning wrong values for getScreenX()/getScreenY() if multiple displays with different scaling factors are used (Windows 10). Just wanted to leave a note that this works for me: screenX = event.getSceneX() + scene.getX() + scene.getWindow().getX() (in my case I want to open a dialog next to the mouse position at the end of a drag&amp;drop)","body":"I came across this searching for a similar problem in JavaFX (17) Mouse/DragEvents returning wrong values for getScreenX()/getScreenY() if multiple displays with different scaling factors are used (Windows 10). Just wanted to leave a note that this works for me: screenX = event.getSceneX() + scene.getX() + scene.getWindow().getX() (in my case I want to open a dialog next to the mouse position at the end of a drag&amp;drop)"},{"owner":{"account_id":18855916,"reputation":68,"user_id":13753864,"display_name":"meiMing"},"score":1,"creation_date":1692254931,"post_id":63804052,"comment_id":135599020,"body_markdown":"After testing until the JDK17 problem still exists. So don&#39;t expect to rely on Java itself to solve this problem in a short time","body":"After testing until the JDK17 problem still exists. So don&#39;t expect to rely on Java itself to solve this problem in a short time"}],"tags":[],"owner":{"account_id":1187908,"reputation":8615,"user_id":1161484,"accept_rate":93,"display_name":"Daniel Widdis"},"comment_count":3,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1692255690,"creation_date":1599619510,"answer_id":63804052,"question_id":63770033,"body_markdown":"This looks like you&#39;ve run into a manifestation of bug [JDK-8211999](https://bugs.openjdk.java.net/browse/JDK-8211999):\r\n\r\n&gt; In a multi-monitor setting involving one HiDPI screen placed to the right of one regular monitor, on Windows 10, the bounds returned by `GraphicsEnvironment.getLocalGraphicsEnvironment().getScreenDevices()[x].getDefaultConfiguration().getBounds()` are overlapping. This causes various secondary bugs...\r\n\r\nComments note that:\r\n\r\n&gt; The same bug exists on Linux as well, macOS is not affected.\r\n\r\nThere does not seem to be a simple pure Java workaround. \r\n\r\nA [fix has been proposed](https://mail.openjdk.java.net/pipermail/awt-dev/2020-July/015991.html) which works for Windows, by not even trying to do the coordinate math in Java, and delegating the solution to native code.\r\n\r\nSince it appears that using the JNA (native) implementation appears to work, this seems the best approach for JDK versions 9 to 15.  The bug was allegedly fixed in JDK16 but comments indicates it still exists in JDK 17. There&#39;s a related bug [JDK-8249164](https://bugs.openjdk.org/browse/JDK-8249164) which may or may not be the cause of these additional problems.\r\n\r\nAccording to the bug report, it affects JDK 9+, so it is possible that reverting to JDK 8 may fix the issue, although I saw conflicting accounts on that.  Comments also indicate other workaround available in JavaFX, that I hope will find their way into another answer.","title":"Java Multi-Display Handling under Windows - Bug with scaled displays?","body":"<p>This looks like you've run into a manifestation of bug <a href=\"https://bugs.openjdk.java.net/browse/JDK-8211999\" rel=\"nofollow noreferrer\">JDK-8211999</a>:</p>\n<blockquote>\n<p>In a multi-monitor setting involving one HiDPI screen placed to the right of one regular monitor, on Windows 10, the bounds returned by <code>GraphicsEnvironment.getLocalGraphicsEnvironment().getScreenDevices()[x].getDefaultConfiguration().getBounds()</code> are overlapping. This causes various secondary bugs...</p>\n</blockquote>\n<p>Comments note that:</p>\n<blockquote>\n<p>The same bug exists on Linux as well, macOS is not affected.</p>\n</blockquote>\n<p>There does not seem to be a simple pure Java workaround.</p>\n<p>A <a href=\"https://mail.openjdk.java.net/pipermail/awt-dev/2020-July/015991.html\" rel=\"nofollow noreferrer\">fix has been proposed</a> which works for Windows, by not even trying to do the coordinate math in Java, and delegating the solution to native code.</p>\n<p>Since it appears that using the JNA (native) implementation appears to work, this seems the best approach for JDK versions 9 to 15.  The bug was allegedly fixed in JDK16 but comments indicates it still exists in JDK 17. There's a related bug <a href=\"https://bugs.openjdk.org/browse/JDK-8249164\" rel=\"nofollow noreferrer\">JDK-8249164</a> which may or may not be the cause of these additional problems.</p>\n<p>According to the bug report, it affects JDK 9+, so it is possible that reverting to JDK 8 may fix the issue, although I saw conflicting accounts on that.  Comments also indicate other workaround available in JavaFX, that I hope will find their way into another answer.</p>\n"}],"owner":{"account_id":18595817,"reputation":373,"user_id":13551878,"display_name":"Vicne"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1158,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":63804052,"answer_count":1,"score":6,"last_activity_date":1692255690,"creation_date":1599438253,"question_id":63770033,"body_markdown":"**tl;dr**\r\n\r\nUnder Windows 10, if I put my secondary display to the right of the primary one, and apply a scaling (e.g. 150%) to the secondary, then the display coordinates (as returned by the Java API) overlap instead of letting the display bounds sit side by side. In other words, if I slowly move my mouse from the left edge of the primary to the right edge of the secondary, Java&#39;s API `MouseInfo.getPointerInfo().getLocation()` returns an increasing X-position from 0 to 1920, then once the cursor enters the second screen, the value jumps back down to 1280 and then increases again to 2560. So the 1280-1920 range is returned twice, for different areas.\r\n\r\nAt the end of the post, I have included an (updated) demo that makes the issue obvious. Don&#39;t hesitate to try it and report back.\r\n\r\n**The long version:**\r\n\r\nThis text gives (too) much context but is also meant to share the things I learned while searching on the topic.\r\n\r\nFirst, why bother ? Because I am building a screen capture application in Java that requires a correct handling of multi-display configurations, including displays where Windows&#39; scaling feature is applied.\r\n\r\nUsing the Java API (`GraphicsEnvironment.getLocalGraphicsEnvironment().getScreenDevices()`), as long as the scaling is 100%, one can observe that the primary display has its top left corner at the origin (0,0), with the other displays having coordinates &quot;next&quot; to the main one. \r\n\r\nThe following pictures were made using the code at the end of the post.\r\n\r\nE.g. if we have 2 full-hd displays, the main one has its top left corner is at (0,0), while...\r\n- if the secondary is positioned at its right, at the same level, its top left corner is (1920,0):\r\n\r\n[![enter image description here][1]][1]\r\n\r\n- if the secondary is positioned at its left, at the same level, its top left corner is (-1920,0):\r\n\r\n[![enter image description here][2]][2]\r\n\r\n- if the secondary is positioned below, aligned horizontally, its top left corner is (0,1080):\r\n\r\n[![enter image description here][3]][3]\r\n\r\n- if the secondary is positioned above, aligned horizontally, its top left corner is (0,-1080):\r\n\r\n[![enter image description here][4]][4]\r\n\r\n- and so on if the displays are not aligned:\r\n\r\n[![enter image description here][5]][5]\r\n\r\n- or with different resolutions:\r\n\r\n[![enter image description here][6]][6]\r\n\r\nHowever, if the secondary display is scaled, things go awry: it seems the scaling factor is applied not only to its dimensions, but also its **origin**, which gets closer to (0,0).\r\n\r\nIf the secondary is on the left, it makes sense. For example, when the secondary 1920x1080 is scaled at 150%, it makes a logical 1280x720 positioned at (-1280,0):\r\n\r\n[![enter image description here][7]][7]\r\n\r\nBut if the secondary is on the right, the origin is also **scaled** to (1280,0), getting closer to the origin and causing it to &quot;overlap&quot; the primary one:\r\n\r\n[![enter image description here][8]][8]\r\n\r\nIn other words, if the mouse is at (1800,0) - see red dot above - I see no way of knowing if it actually is positioned on the right of the first display (at 120px from the right edge) or on the left of the secondary one (at 520px of the left edge). When moving the mouse from the primary to the secondary display in this case, the X position of the mouse &quot;jumps back&quot; when it reaches the border of the primary display.\r\n\r\nThe same is true for positioning a window on the screens. If I set the X-position of a dialog to 1800, I have no way to know where it will open.\r\n\r\nAfter much browsing, some answers [like this one][9] indicate that the only way to query Windows scaling is by using native calls. Indeed, using JNA, one can get the physical size of the displays (although the answer seems to indicate that call should return the logical size). I.e the JNA calls ignore the scaling factor, and behaves exactly like the Java API when scaling is at 100%:\r\n\r\n[![enter image description here][10]][10]\r\n\r\n\r\nSo am I missing something ? \r\n\r\nNot knowing the scaling factor is a small issue, but not being able to tell which display the mouse is over, or not being able to position a window on the display I want looks like a real problem to me. Is it a Java Bug ?\r\n\r\n\r\nNote: Here is the code for the app used above, run on with OpenJDK14 on Windows 10 64b. It shows a scaled down version of your display setup and mouse position as perceived by Java. It can also place and move a small dialog across the real screens if you click and drag inside the small rectangles. Credit: The UI is inspired by the WheresMyMouse code posted [here][11].\r\n\r\nAs is, the code uses only the Java API. \r\nIf you want to compare with JNA, search for the 4 blocks marked &quot;JNA_ONLY&quot;, uncomment them, and add the jna libs. The demo will then toggle between JNA and Java API for displaying screen bounds and mouse cursor at each right-click. The dialog positioning never uses JNA in this version.\r\n\r\n```\r\n// JNA_ONLY\r\n//import com.sun.jna.platform.win32.User32;\r\n//import com.sun.jna.platform.win32.WinDef;\r\n//import com.sun.jna.platform.win32.WinUser;\r\n\r\nimport javax.swing.*;\r\nimport java.awt.*;\r\nimport java.awt.event.MouseAdapter;\r\nimport java.awt.event.MouseEvent;\r\nimport java.awt.font.FontRenderContext;\r\nimport java.awt.font.TextLayout;\r\nimport java.awt.geom.Rectangle2D;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\n/**\r\n * Java multi-display detection and analysis.\r\n * UI idea based on WheresMyMouse - https://stackoverflow.com/a/21592711/13551878\r\n */\r\npublic class ShowDisplays {\r\n\r\n    private static boolean useJna = false;\r\n\r\n    public static void main(String[] args) {\r\n        EventQueue.invokeLater(() -&gt; {\r\n            JFrame frame = new JFrame(&quot;Display Configuration&quot;);\r\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n            frame.setLayout(new BorderLayout());\r\n            frame.add(new TestPane());\r\n            frame.pack();\r\n            frame.setLocationRelativeTo(null);\r\n            frame.setVisible(true);\r\n        });\r\n    }\r\n\r\n    public static class TestPane extends JPanel {\r\n        private List&lt;Rectangle&gt; screenBounds;\r\n        JDialog dlg;\r\n\r\n        public TestPane() {\r\n            screenBounds = getScreenBounds();\r\n            // refresh screen details every second to reflect changes in Windows Preferences in &quot;real time&quot;\r\n            new Timer(1000, e -&gt; screenBounds = getScreenBounds()).start();\r\n\r\n            // Refresh mouse position at 25fps\r\n            new Timer(40, e -&gt; repaint()).start();\r\n\r\n            MouseAdapter mouseAdapter = new MouseAdapter() {\r\n\r\n                public void mouseClicked(MouseEvent e) {\r\n                    if (e.getButton() != MouseEvent.BUTTON1) {\r\n                        useJna = !useJna;\r\n                        repaint();\r\n                    }\r\n                }\r\n\r\n                @Override\r\n                public void mousePressed(MouseEvent e) {\r\n                    System.out.println(e.getButton());\r\n                    if (e.getButton() == MouseEvent.BUTTON1) {\r\n                        if (!dlg.isVisible()) {\r\n                            dlg.setVisible(true);\r\n                        }\r\n                        moveDialogTo(e.getPoint());\r\n                    }\r\n                }\r\n\r\n\r\n                @Override\r\n                public void mouseDragged(MouseEvent e) {\r\n                    moveDialogTo(e.getPoint());\r\n                }\r\n\r\n\r\n                private void moveDialogTo(Point mouseLocation) {\r\n                    final Rectangle surroundingRectangle = getSurroundingRectangle(screenBounds);\r\n                    double scaleFactor = Math.min((double) getWidth() / surroundingRectangle.width, (double) getHeight() / surroundingRectangle.height);\r\n\r\n                    int xOffset = (getWidth() - (int) (surroundingRectangle.width * scaleFactor)) / 2;\r\n                    int yOffset = (getHeight() - (int) (surroundingRectangle.height * scaleFactor)) / 2;\r\n\r\n                    int screenX = surroundingRectangle.x + (int) ((mouseLocation.x - xOffset) / scaleFactor);\r\n                    int screenY = surroundingRectangle.y + (int) ((mouseLocation.y - yOffset) / scaleFactor);\r\n\r\n                    dlg.setLocation(screenX - dlg.getWidth() / 2, screenY - dlg.getHeight() / 2);\r\n                }\r\n\r\n\r\n            };\r\n\r\n            addMouseListener(mouseAdapter);\r\n            addMouseMotionListener(mouseAdapter);\r\n\r\n            // Prepare the test dialog\r\n            dlg = new JDialog();\r\n            dlg.setTitle(&quot;Here&quot;);\r\n            dlg.setSize(50, 50);\r\n            dlg.setDefaultCloseOperation(JFrame.HIDE_ON_CLOSE);\r\n\r\n        }\r\n\r\n        @Override\r\n        public Dimension getPreferredSize() {\r\n            return new Dimension(400, 400);\r\n        }\r\n\r\n        @Override\r\n        protected void paintComponent(Graphics g) {\r\n            super.paintComponent(g);\r\n            Graphics2D g2d = (Graphics2D) g.create();\r\n\r\n            // Mouse position\r\n            Point mousePoint = getMouseLocation();\r\n\r\n            g2d.setColor(Color.BLACK);\r\n            g2d.fillRect(0, 0, getWidth(), getHeight());\r\n\r\n            final Rectangle surroundingRectangle = getSurroundingRectangle(screenBounds);\r\n            double scaleFactor = Math.min((double) getWidth() / surroundingRectangle.width, (double) getHeight() / surroundingRectangle.height);\r\n\r\n            int xOffset = (getWidth() - (int) (surroundingRectangle.width * scaleFactor)) / 2;\r\n            int yOffset = (getHeight() - (int) (surroundingRectangle.height * scaleFactor)) / 2;\r\n\r\n            g2d.setColor(Color.BLUE);\r\n            g2d.fillRect(xOffset, yOffset, (int) (surroundingRectangle.width * scaleFactor), (int) (surroundingRectangle.height * scaleFactor));\r\n\r\n            Font defaultFont = g2d.getFont();\r\n            for (int screenIndex = 0; screenIndex &lt; screenBounds.size(); screenIndex++) {\r\n                Rectangle screen = screenBounds.get(screenIndex);\r\n                Rectangle scaledRectangle = new Rectangle(\r\n                        xOffset + (int) ((screen.x - surroundingRectangle.x) * scaleFactor),\r\n                        yOffset + (int) ((screen.y - surroundingRectangle.y) * scaleFactor),\r\n                        (int) (screen.width * scaleFactor),\r\n                        (int) (screen.height * scaleFactor));\r\n\r\n                // System.out.println(screen + &quot; x &quot; + scaleFactor + &quot; -&gt; &quot; + scaledRectangle);\r\n                g2d.setColor(Color.DARK_GRAY);\r\n                g2d.fill(scaledRectangle);\r\n                g2d.setColor(Color.GRAY);\r\n                g2d.draw(scaledRectangle);\r\n\r\n                // Screen text details\r\n                g2d.setColor(Color.WHITE);\r\n\r\n                // Display number\r\n                final Font largeFont = new Font(defaultFont.getName(), defaultFont.getStyle(), (int) (screen.height * scaleFactor) / 2);\r\n                g2d.setFont(largeFont);\r\n                String label = String.valueOf(screenIndex + 1);\r\n                FontRenderContext frc = g2d.getFontRenderContext();\r\n                TextLayout layout = new TextLayout(label, largeFont, frc);\r\n                Rectangle2D bounds = layout.getBounds();\r\n                g2d.setColor(Color.WHITE);\r\n                g2d.drawString(\r\n                        label,\r\n                        (int) (scaledRectangle.x + (scaledRectangle.width - bounds.getWidth()) / 2),\r\n                        (int) (scaledRectangle.y + (scaledRectangle.height + bounds.getHeight()) / 2)\r\n                );\r\n\r\n                // Resolution + corner\r\n                final Font smallFont = new Font(defaultFont.getName(), defaultFont.getStyle(), (int) (screen.height * scaleFactor) / 10);\r\n                g2d.setFont(smallFont);\r\n\r\n                // Resolution\r\n                String resolution = screen.width + &quot;x&quot; + screen.height;\r\n                layout = new TextLayout(resolution, smallFont, frc);\r\n                bounds = layout.getBounds();\r\n                g2d.drawString(\r\n                        resolution,\r\n                        (int) (scaledRectangle.x + (scaledRectangle.width - bounds.getWidth()) / 2),\r\n                        (int) (scaledRectangle.y + scaledRectangle.height - bounds.getHeight())\r\n                );\r\n\r\n                // Corner\r\n                String corner = &quot;(&quot; + screen.x + &quot;,&quot; + screen.y + &quot;)&quot;;\r\n                g2d.drawString(\r\n                        corner,\r\n                        scaledRectangle.x,\r\n                        (int) (scaledRectangle.y + bounds.getHeight() * 1.5)\r\n                );\r\n\r\n            }\r\n\r\n            g2d.setFont(defaultFont);\r\n            FontMetrics fm = g2d.getFontMetrics();\r\n\r\n            if (mousePoint != null) {\r\n                g2d.fillOval(xOffset + (int) ((mousePoint.x - surroundingRectangle.x) * scaleFactor) - 2,\r\n                        yOffset + (int) ((mousePoint.y - surroundingRectangle.y) * scaleFactor) - 2,\r\n                        4,\r\n                        4\r\n                );\r\n                g2d.drawString(&quot;Mouse pointer is at (&quot; + mousePoint.x + &quot;,&quot; + mousePoint.y + &quot;)&quot;, 4, fm.getHeight());\r\n            }\r\n\r\n            g2d.drawString(&quot;Click and drag in this area to move a dialog on the actual screens&quot;, 4, fm.getHeight() * 2);\r\n\r\n            // JNA_ONLY\r\n            // g2d.drawString(&quot;Now using &quot; + (useJna ? &quot;JNA&quot; : &quot;Java API&quot;) + &quot;. Right-click to toggle&quot;, 4, fm.getHeight() * 3);\r\n\r\n            g2d.dispose();\r\n        }\r\n    }\r\n\r\n    public static Rectangle getSurroundingRectangle(List&lt;Rectangle&gt; screenRectangles) {\r\n        Rectangle surroundingBounds = null;\r\n        for (Rectangle screenBound : screenRectangles) {\r\n            if (surroundingBounds == null) {\r\n                surroundingBounds = new Rectangle(screenRectangles.get(0));\r\n            }\r\n            else {\r\n                surroundingBounds.add(screenBound);\r\n            }\r\n        }\r\n        return surroundingBounds;\r\n    }\r\n\r\n    private static Point getMouseLocation() {\r\n        // JNA_ONLY\r\n//        if (useJna) {\r\n//            final WinDef.POINT point = new WinDef.POINT();\r\n//            if (User32.INSTANCE.GetCursorPos(point)) {\r\n//                return new Point(point.x, point.y);\r\n//            }\r\n//            else {\r\n//                return null;\r\n//            }\r\n//        }\r\n        return MouseInfo.getPointerInfo().getLocation();\r\n    }\r\n\r\n    public static List&lt;Rectangle&gt; getScreenBounds() {\r\n        List&lt;Rectangle&gt; screenBounds;\r\n\r\n        // JNA_ONLY\r\n//        if (useJna) {\r\n//            screenBounds = new ArrayList&lt;&gt;();\r\n//            // Enumerate all monitors, and call a code block for each of them\r\n//            // See https://learn.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-enumdisplaymonitors\r\n//            // See http://www.pinvoke.net/default.aspx/user32/EnumDisplayMonitors.html\r\n//            User32.INSTANCE.EnumDisplayMonitors(\r\n//                    null, // =&gt; the virtual screen that encompasses all the displays on the desktop.\r\n//                    null, // =&gt; don&#39;t clip the region\r\n//                    (hmonitor, hdc, rect, lparam) -&gt; {\r\n//                        // For each found monitor, get more information\r\n//                        // See https://learn.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-getmonitorinfoa\r\n//                        // See http://www.pinvoke.net/default.aspx/user32/GetMonitorInfo.html\r\n//                        WinUser.MONITORINFOEX monitorInfoEx = new WinUser.MONITORINFOEX();\r\n//                        User32.INSTANCE.GetMonitorInfo(hmonitor, monitorInfoEx);\r\n//                        // Retrieve its coordinates\r\n//                        final WinDef.RECT rcMonitor = monitorInfoEx.rcMonitor;\r\n//                        // And convert them to a Java rectangle, to be added to the list of monitors\r\n//                        screenBounds.add(new Rectangle(rcMonitor.left, rcMonitor.top, rcMonitor.right - rcMonitor.left, rcMonitor.bottom - rcMonitor.top));\r\n//                        // Then return &quot;true&quot; to continue enumeration\r\n//                        return 1;\r\n//                    },\r\n//                    null // =&gt; No additional info to pass as lparam to the callback\r\n//            );\r\n//            return screenBounds;\r\n//        }\r\n\r\n        GraphicsEnvironment graphicsEnvironment = GraphicsEnvironment.getLocalGraphicsEnvironment();\r\n        GraphicsDevice[] screenDevices = graphicsEnvironment.getScreenDevices();\r\n        screenBounds = new ArrayList&lt;&gt;(screenDevices.length);\r\n        for (GraphicsDevice screenDevice : screenDevices) {\r\n            GraphicsConfiguration configuration = screenDevice.getDefaultConfiguration();\r\n            screenBounds.add(configuration.getBounds());\r\n        }\r\n        return screenBounds;\r\n    }\r\n\r\n}\r\n```\r\n\r\n  [1]: https://i.stack.imgur.com/mERfo.png\r\n  [2]: https://i.stack.imgur.com/EBYaA.png\r\n  [3]: https://i.stack.imgur.com/RIr23.png\r\n  [4]: https://i.stack.imgur.com/jcGyE.png\r\n  [5]: https://i.stack.imgur.com/XjIxW.png\r\n  [6]: https://i.stack.imgur.com/E3E8M.png\r\n  [7]: https://i.stack.imgur.com/Cceso.png\r\n  [8]: https://i.stack.imgur.com/p5Z2J.png\r\n  [9]: https://stackoverflow.com/questions/54912038/querying-windows-display-scaling\r\n  [10]: https://i.stack.imgur.com/cNqc6.png\r\n  [11]: https://stackoverflow.com/a/21592711/13551878\r\n\r\n\r\n","title":"Java Multi-Display Handling under Windows - Bug with scaled displays?","body":"<p><strong>tl;dr</strong></p>\n<p>Under Windows 10, if I put my secondary display to the right of the primary one, and apply a scaling (e.g. 150%) to the secondary, then the display coordinates (as returned by the Java API) overlap instead of letting the display bounds sit side by side. In other words, if I slowly move my mouse from the left edge of the primary to the right edge of the secondary, Java's API <code>MouseInfo.getPointerInfo().getLocation()</code> returns an increasing X-position from 0 to 1920, then once the cursor enters the second screen, the value jumps back down to 1280 and then increases again to 2560. So the 1280-1920 range is returned twice, for different areas.</p>\n<p>At the end of the post, I have included an (updated) demo that makes the issue obvious. Don't hesitate to try it and report back.</p>\n<p><strong>The long version:</strong></p>\n<p>This text gives (too) much context but is also meant to share the things I learned while searching on the topic.</p>\n<p>First, why bother ? Because I am building a screen capture application in Java that requires a correct handling of multi-display configurations, including displays where Windows' scaling feature is applied.</p>\n<p>Using the Java API (<code>GraphicsEnvironment.getLocalGraphicsEnvironment().getScreenDevices()</code>), as long as the scaling is 100%, one can observe that the primary display has its top left corner at the origin (0,0), with the other displays having coordinates &quot;next&quot; to the main one.</p>\n<p>The following pictures were made using the code at the end of the post.</p>\n<p>E.g. if we have 2 full-hd displays, the main one has its top left corner is at (0,0), while...</p>\n<ul>\n<li>if the secondary is positioned at its right, at the same level, its top left corner is (1920,0):</li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/mERfo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mERfo.png\" alt=\"enter image description here\" /></a></p>\n<ul>\n<li>if the secondary is positioned at its left, at the same level, its top left corner is (-1920,0):</li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/EBYaA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EBYaA.png\" alt=\"enter image description here\" /></a></p>\n<ul>\n<li>if the secondary is positioned below, aligned horizontally, its top left corner is (0,1080):</li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/RIr23.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RIr23.png\" alt=\"enter image description here\" /></a></p>\n<ul>\n<li>if the secondary is positioned above, aligned horizontally, its top left corner is (0,-1080):</li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/jcGyE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jcGyE.png\" alt=\"enter image description here\" /></a></p>\n<ul>\n<li>and so on if the displays are not aligned:</li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/XjIxW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XjIxW.png\" alt=\"enter image description here\" /></a></p>\n<ul>\n<li>or with different resolutions:</li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/E3E8M.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/E3E8M.png\" alt=\"enter image description here\" /></a></p>\n<p>However, if the secondary display is scaled, things go awry: it seems the scaling factor is applied not only to its dimensions, but also its <strong>origin</strong>, which gets closer to (0,0).</p>\n<p>If the secondary is on the left, it makes sense. For example, when the secondary 1920x1080 is scaled at 150%, it makes a logical 1280x720 positioned at (-1280,0):</p>\n<p><a href=\"https://i.stack.imgur.com/Cceso.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Cceso.png\" alt=\"enter image description here\" /></a></p>\n<p>But if the secondary is on the right, the origin is also <strong>scaled</strong> to (1280,0), getting closer to the origin and causing it to &quot;overlap&quot; the primary one:</p>\n<p><a href=\"https://i.stack.imgur.com/p5Z2J.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/p5Z2J.png\" alt=\"enter image description here\" /></a></p>\n<p>In other words, if the mouse is at (1800,0) - see red dot above - I see no way of knowing if it actually is positioned on the right of the first display (at 120px from the right edge) or on the left of the secondary one (at 520px of the left edge). When moving the mouse from the primary to the secondary display in this case, the X position of the mouse &quot;jumps back&quot; when it reaches the border of the primary display.</p>\n<p>The same is true for positioning a window on the screens. If I set the X-position of a dialog to 1800, I have no way to know where it will open.</p>\n<p>After much browsing, some answers <a href=\"https://stackoverflow.com/questions/54912038/querying-windows-display-scaling\">like this one</a> indicate that the only way to query Windows scaling is by using native calls. Indeed, using JNA, one can get the physical size of the displays (although the answer seems to indicate that call should return the logical size). I.e the JNA calls ignore the scaling factor, and behaves exactly like the Java API when scaling is at 100%:</p>\n<p><a href=\"https://i.stack.imgur.com/cNqc6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cNqc6.png\" alt=\"enter image description here\" /></a></p>\n<p>So am I missing something ?</p>\n<p>Not knowing the scaling factor is a small issue, but not being able to tell which display the mouse is over, or not being able to position a window on the display I want looks like a real problem to me. Is it a Java Bug ?</p>\n<p>Note: Here is the code for the app used above, run on with OpenJDK14 on Windows 10 64b. It shows a scaled down version of your display setup and mouse position as perceived by Java. It can also place and move a small dialog across the real screens if you click and drag inside the small rectangles. Credit: The UI is inspired by the WheresMyMouse code posted <a href=\"https://stackoverflow.com/a/21592711/13551878\">here</a>.</p>\n<p>As is, the code uses only the Java API.\nIf you want to compare with JNA, search for the 4 blocks marked &quot;JNA_ONLY&quot;, uncomment them, and add the jna libs. The demo will then toggle between JNA and Java API for displaying screen bounds and mouse cursor at each right-click. The dialog positioning never uses JNA in this version.</p>\n<pre><code>// JNA_ONLY\n//import com.sun.jna.platform.win32.User32;\n//import com.sun.jna.platform.win32.WinDef;\n//import com.sun.jna.platform.win32.WinUser;\n\nimport javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.MouseAdapter;\nimport java.awt.event.MouseEvent;\nimport java.awt.font.FontRenderContext;\nimport java.awt.font.TextLayout;\nimport java.awt.geom.Rectangle2D;\nimport java.util.ArrayList;\nimport java.util.List;\n\n/**\n * Java multi-display detection and analysis.\n * UI idea based on WheresMyMouse - https://stackoverflow.com/a/21592711/13551878\n */\npublic class ShowDisplays {\n\n    private static boolean useJna = false;\n\n    public static void main(String[] args) {\n        EventQueue.invokeLater(() -&gt; {\n            JFrame frame = new JFrame(&quot;Display Configuration&quot;);\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n            frame.setLayout(new BorderLayout());\n            frame.add(new TestPane());\n            frame.pack();\n            frame.setLocationRelativeTo(null);\n            frame.setVisible(true);\n        });\n    }\n\n    public static class TestPane extends JPanel {\n        private List&lt;Rectangle&gt; screenBounds;\n        JDialog dlg;\n\n        public TestPane() {\n            screenBounds = getScreenBounds();\n            // refresh screen details every second to reflect changes in Windows Preferences in &quot;real time&quot;\n            new Timer(1000, e -&gt; screenBounds = getScreenBounds()).start();\n\n            // Refresh mouse position at 25fps\n            new Timer(40, e -&gt; repaint()).start();\n\n            MouseAdapter mouseAdapter = new MouseAdapter() {\n\n                public void mouseClicked(MouseEvent e) {\n                    if (e.getButton() != MouseEvent.BUTTON1) {\n                        useJna = !useJna;\n                        repaint();\n                    }\n                }\n\n                @Override\n                public void mousePressed(MouseEvent e) {\n                    System.out.println(e.getButton());\n                    if (e.getButton() == MouseEvent.BUTTON1) {\n                        if (!dlg.isVisible()) {\n                            dlg.setVisible(true);\n                        }\n                        moveDialogTo(e.getPoint());\n                    }\n                }\n\n\n                @Override\n                public void mouseDragged(MouseEvent e) {\n                    moveDialogTo(e.getPoint());\n                }\n\n\n                private void moveDialogTo(Point mouseLocation) {\n                    final Rectangle surroundingRectangle = getSurroundingRectangle(screenBounds);\n                    double scaleFactor = Math.min((double) getWidth() / surroundingRectangle.width, (double) getHeight() / surroundingRectangle.height);\n\n                    int xOffset = (getWidth() - (int) (surroundingRectangle.width * scaleFactor)) / 2;\n                    int yOffset = (getHeight() - (int) (surroundingRectangle.height * scaleFactor)) / 2;\n\n                    int screenX = surroundingRectangle.x + (int) ((mouseLocation.x - xOffset) / scaleFactor);\n                    int screenY = surroundingRectangle.y + (int) ((mouseLocation.y - yOffset) / scaleFactor);\n\n                    dlg.setLocation(screenX - dlg.getWidth() / 2, screenY - dlg.getHeight() / 2);\n                }\n\n\n            };\n\n            addMouseListener(mouseAdapter);\n            addMouseMotionListener(mouseAdapter);\n\n            // Prepare the test dialog\n            dlg = new JDialog();\n            dlg.setTitle(&quot;Here&quot;);\n            dlg.setSize(50, 50);\n            dlg.setDefaultCloseOperation(JFrame.HIDE_ON_CLOSE);\n\n        }\n\n        @Override\n        public Dimension getPreferredSize() {\n            return new Dimension(400, 400);\n        }\n\n        @Override\n        protected void paintComponent(Graphics g) {\n            super.paintComponent(g);\n            Graphics2D g2d = (Graphics2D) g.create();\n\n            // Mouse position\n            Point mousePoint = getMouseLocation();\n\n            g2d.setColor(Color.BLACK);\n            g2d.fillRect(0, 0, getWidth(), getHeight());\n\n            final Rectangle surroundingRectangle = getSurroundingRectangle(screenBounds);\n            double scaleFactor = Math.min((double) getWidth() / surroundingRectangle.width, (double) getHeight() / surroundingRectangle.height);\n\n            int xOffset = (getWidth() - (int) (surroundingRectangle.width * scaleFactor)) / 2;\n            int yOffset = (getHeight() - (int) (surroundingRectangle.height * scaleFactor)) / 2;\n\n            g2d.setColor(Color.BLUE);\n            g2d.fillRect(xOffset, yOffset, (int) (surroundingRectangle.width * scaleFactor), (int) (surroundingRectangle.height * scaleFactor));\n\n            Font defaultFont = g2d.getFont();\n            for (int screenIndex = 0; screenIndex &lt; screenBounds.size(); screenIndex++) {\n                Rectangle screen = screenBounds.get(screenIndex);\n                Rectangle scaledRectangle = new Rectangle(\n                        xOffset + (int) ((screen.x - surroundingRectangle.x) * scaleFactor),\n                        yOffset + (int) ((screen.y - surroundingRectangle.y) * scaleFactor),\n                        (int) (screen.width * scaleFactor),\n                        (int) (screen.height * scaleFactor));\n\n                // System.out.println(screen + &quot; x &quot; + scaleFactor + &quot; -&gt; &quot; + scaledRectangle);\n                g2d.setColor(Color.DARK_GRAY);\n                g2d.fill(scaledRectangle);\n                g2d.setColor(Color.GRAY);\n                g2d.draw(scaledRectangle);\n\n                // Screen text details\n                g2d.setColor(Color.WHITE);\n\n                // Display number\n                final Font largeFont = new Font(defaultFont.getName(), defaultFont.getStyle(), (int) (screen.height * scaleFactor) / 2);\n                g2d.setFont(largeFont);\n                String label = String.valueOf(screenIndex + 1);\n                FontRenderContext frc = g2d.getFontRenderContext();\n                TextLayout layout = new TextLayout(label, largeFont, frc);\n                Rectangle2D bounds = layout.getBounds();\n                g2d.setColor(Color.WHITE);\n                g2d.drawString(\n                        label,\n                        (int) (scaledRectangle.x + (scaledRectangle.width - bounds.getWidth()) / 2),\n                        (int) (scaledRectangle.y + (scaledRectangle.height + bounds.getHeight()) / 2)\n                );\n\n                // Resolution + corner\n                final Font smallFont = new Font(defaultFont.getName(), defaultFont.getStyle(), (int) (screen.height * scaleFactor) / 10);\n                g2d.setFont(smallFont);\n\n                // Resolution\n                String resolution = screen.width + &quot;x&quot; + screen.height;\n                layout = new TextLayout(resolution, smallFont, frc);\n                bounds = layout.getBounds();\n                g2d.drawString(\n                        resolution,\n                        (int) (scaledRectangle.x + (scaledRectangle.width - bounds.getWidth()) / 2),\n                        (int) (scaledRectangle.y + scaledRectangle.height - bounds.getHeight())\n                );\n\n                // Corner\n                String corner = &quot;(&quot; + screen.x + &quot;,&quot; + screen.y + &quot;)&quot;;\n                g2d.drawString(\n                        corner,\n                        scaledRectangle.x,\n                        (int) (scaledRectangle.y + bounds.getHeight() * 1.5)\n                );\n\n            }\n\n            g2d.setFont(defaultFont);\n            FontMetrics fm = g2d.getFontMetrics();\n\n            if (mousePoint != null) {\n                g2d.fillOval(xOffset + (int) ((mousePoint.x - surroundingRectangle.x) * scaleFactor) - 2,\n                        yOffset + (int) ((mousePoint.y - surroundingRectangle.y) * scaleFactor) - 2,\n                        4,\n                        4\n                );\n                g2d.drawString(&quot;Mouse pointer is at (&quot; + mousePoint.x + &quot;,&quot; + mousePoint.y + &quot;)&quot;, 4, fm.getHeight());\n            }\n\n            g2d.drawString(&quot;Click and drag in this area to move a dialog on the actual screens&quot;, 4, fm.getHeight() * 2);\n\n            // JNA_ONLY\n            // g2d.drawString(&quot;Now using &quot; + (useJna ? &quot;JNA&quot; : &quot;Java API&quot;) + &quot;. Right-click to toggle&quot;, 4, fm.getHeight() * 3);\n\n            g2d.dispose();\n        }\n    }\n\n    public static Rectangle getSurroundingRectangle(List&lt;Rectangle&gt; screenRectangles) {\n        Rectangle surroundingBounds = null;\n        for (Rectangle screenBound : screenRectangles) {\n            if (surroundingBounds == null) {\n                surroundingBounds = new Rectangle(screenRectangles.get(0));\n            }\n            else {\n                surroundingBounds.add(screenBound);\n            }\n        }\n        return surroundingBounds;\n    }\n\n    private static Point getMouseLocation() {\n        // JNA_ONLY\n//        if (useJna) {\n//            final WinDef.POINT point = new WinDef.POINT();\n//            if (User32.INSTANCE.GetCursorPos(point)) {\n//                return new Point(point.x, point.y);\n//            }\n//            else {\n//                return null;\n//            }\n//        }\n        return MouseInfo.getPointerInfo().getLocation();\n    }\n\n    public static List&lt;Rectangle&gt; getScreenBounds() {\n        List&lt;Rectangle&gt; screenBounds;\n\n        // JNA_ONLY\n//        if (useJna) {\n//            screenBounds = new ArrayList&lt;&gt;();\n//            // Enumerate all monitors, and call a code block for each of them\n//            // See https://learn.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-enumdisplaymonitors\n//            // See http://www.pinvoke.net/default.aspx/user32/EnumDisplayMonitors.html\n//            User32.INSTANCE.EnumDisplayMonitors(\n//                    null, // =&gt; the virtual screen that encompasses all the displays on the desktop.\n//                    null, // =&gt; don't clip the region\n//                    (hmonitor, hdc, rect, lparam) -&gt; {\n//                        // For each found monitor, get more information\n//                        // See https://learn.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-getmonitorinfoa\n//                        // See http://www.pinvoke.net/default.aspx/user32/GetMonitorInfo.html\n//                        WinUser.MONITORINFOEX monitorInfoEx = new WinUser.MONITORINFOEX();\n//                        User32.INSTANCE.GetMonitorInfo(hmonitor, monitorInfoEx);\n//                        // Retrieve its coordinates\n//                        final WinDef.RECT rcMonitor = monitorInfoEx.rcMonitor;\n//                        // And convert them to a Java rectangle, to be added to the list of monitors\n//                        screenBounds.add(new Rectangle(rcMonitor.left, rcMonitor.top, rcMonitor.right - rcMonitor.left, rcMonitor.bottom - rcMonitor.top));\n//                        // Then return &quot;true&quot; to continue enumeration\n//                        return 1;\n//                    },\n//                    null // =&gt; No additional info to pass as lparam to the callback\n//            );\n//            return screenBounds;\n//        }\n\n        GraphicsEnvironment graphicsEnvironment = GraphicsEnvironment.getLocalGraphicsEnvironment();\n        GraphicsDevice[] screenDevices = graphicsEnvironment.getScreenDevices();\n        screenBounds = new ArrayList&lt;&gt;(screenDevices.length);\n        for (GraphicsDevice screenDevice : screenDevices) {\n            GraphicsConfiguration configuration = screenDevice.getDefaultConfiguration();\n            screenBounds.add(configuration.getBounds());\n        }\n        return screenBounds;\n    }\n\n}\n</code></pre>\n"},{"tags":["java","android-gridlayout"],"owner":{"account_id":29242023,"reputation":1,"user_id":22403308,"display_name":"KANAK LOHIYA"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692255411,"creation_date":1692255411,"question_id":76919124,"body_markdown":"I am trying to create tic-tac-toe for the same i have tried using a grid layout for placing coins/X/O. It is taking three coins in a single column as opposed to single coin in a single column\r\nPlease find below the code of my layout and the picture of its output.\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    android:layout_alignParentBottom=&quot;true&quot;&gt;\r\n\r\n    &lt;androidx.gridlayout.widget.GridLayout\r\n        android:layout_width=&quot;400dp&quot;\r\n        android:layout_height=&quot;400dp&quot;\r\n        android:layout_marginStart=&quot;8dp&quot;\r\n        android:layout_marginTop=&quot;8dp&quot;\r\n        android:layout_marginEnd=&quot;8dp&quot;\r\n        android:layout_marginBottom=&quot;8dp&quot;\r\n        app:columnCount=&quot;3&quot;\r\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\r\n        app:layout_constraintHorizontal_bias=&quot;0.5&quot;\r\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\r\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\r\n        app:rowCount=&quot;3&quot;&gt;\r\n\r\n        &lt;ImageView\r\n            android:id=&quot;@+id/imageView20&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:src=&quot;@drawable/red&quot;\r\n            app:layout_column=&quot;0&quot;\r\n            app:layout_row=&quot;0&quot; /&gt;\r\n\r\n        &lt;ImageView\r\n            android:id=&quot;@+id/imageView21&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:src=&quot;@drawable/red&quot;\r\n            app:layout_column=&quot;1&quot;\r\n            app:layout_row=&quot;0&quot; /&gt;\r\n\r\n        &lt;ImageView\r\n            android:id=&quot;@+id/imageView22&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:src=&quot;@drawable/red&quot;\r\n            app:layout_column=&quot;2&quot;\r\n            app:layout_row=&quot;0&quot; /&gt;\r\n\r\n        &lt;ImageView\r\n            android:id=&quot;@+id/imageView23&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_marginStart=&quot;16dp&quot;\r\n            android:layout_marginLeft=&quot;16dp&quot;\r\n            android:src=&quot;@drawable/red&quot;\r\n            app:layout_column=&quot;0&quot;\r\n            app:layout_row=&quot;1&quot; /&gt;\r\n\r\n        &lt;ImageView\r\n            android:id=&quot;@+id/imageView24&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_marginStart=&quot;16dp&quot;\r\n            android:layout_marginLeft=&quot;16dp&quot;\r\n            android:src=&quot;@drawable/red&quot;\r\n            app:layout_column=&quot;1&quot;\r\n            app:layout_row=&quot;1&quot; /&gt;\r\n\r\n        &lt;ImageView\r\n            android:id=&quot;@+id/imageView25&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:src=&quot;@drawable/red&quot;\r\n            app:layout_column=&quot;2&quot;\r\n            app:layout_row=&quot;1&quot; /&gt;\r\n\r\n        &lt;ImageView\r\n            android:id=&quot;@+id/imageView26&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:src=&quot;@drawable/red&quot;\r\n            app:layout_column=&quot;0&quot;\r\n            app:layout_row=&quot;2&quot; /&gt;\r\n\r\n        &lt;ImageView\r\n            android:id=&quot;@+id/imageView27&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:src=&quot;@drawable/red&quot;\r\n            app:layout_column=&quot;1&quot;\r\n            app:layout_row=&quot;2&quot; /&gt;\r\n\r\n        &lt;ImageView\r\n            android:id=&quot;@+id/imageView28&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:src=&quot;@drawable/red&quot;\r\n            app:layout_column=&quot;2&quot;\r\n            app:layout_row=&quot;2&quot; /&gt;\r\n\r\n    &lt;/androidx.gridlayout.widget.GridLayout&gt;\r\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\r\n```\r\n\r\n\r\nI tried adding all the coins one by one as soon as i added 4th coin it started in fourth column in 2nd row. while the expectation was to have it in 1st column of 2nd row.","title":"Grid Layout in android studio giraffe making 9 columns even though column count given is 3","body":"<p>I am trying to create tic-tac-toe for the same i have tried using a grid layout for placing coins/X/O. It is taking three coins in a single column as opposed to single coin in a single column\nPlease find below the code of my layout and the picture of its output.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:layout_alignParentBottom=&quot;true&quot;&gt;\n\n    &lt;androidx.gridlayout.widget.GridLayout\n        android:layout_width=&quot;400dp&quot;\n        android:layout_height=&quot;400dp&quot;\n        android:layout_marginStart=&quot;8dp&quot;\n        android:layout_marginTop=&quot;8dp&quot;\n        android:layout_marginEnd=&quot;8dp&quot;\n        android:layout_marginBottom=&quot;8dp&quot;\n        app:columnCount=&quot;3&quot;\n        app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\n        app:layout_constraintEnd_toEndOf=&quot;parent&quot;\n        app:layout_constraintHorizontal_bias=&quot;0.5&quot;\n        app:layout_constraintStart_toStartOf=&quot;parent&quot;\n        app:layout_constraintTop_toTopOf=&quot;parent&quot;\n        app:rowCount=&quot;3&quot;&gt;\n\n        &lt;ImageView\n            android:id=&quot;@+id/imageView20&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:src=&quot;@drawable/red&quot;\n            app:layout_column=&quot;0&quot;\n            app:layout_row=&quot;0&quot; /&gt;\n\n        &lt;ImageView\n            android:id=&quot;@+id/imageView21&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:src=&quot;@drawable/red&quot;\n            app:layout_column=&quot;1&quot;\n            app:layout_row=&quot;0&quot; /&gt;\n\n        &lt;ImageView\n            android:id=&quot;@+id/imageView22&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:src=&quot;@drawable/red&quot;\n            app:layout_column=&quot;2&quot;\n            app:layout_row=&quot;0&quot; /&gt;\n\n        &lt;ImageView\n            android:id=&quot;@+id/imageView23&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_marginStart=&quot;16dp&quot;\n            android:layout_marginLeft=&quot;16dp&quot;\n            android:src=&quot;@drawable/red&quot;\n            app:layout_column=&quot;0&quot;\n            app:layout_row=&quot;1&quot; /&gt;\n\n        &lt;ImageView\n            android:id=&quot;@+id/imageView24&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_marginStart=&quot;16dp&quot;\n            android:layout_marginLeft=&quot;16dp&quot;\n            android:src=&quot;@drawable/red&quot;\n            app:layout_column=&quot;1&quot;\n            app:layout_row=&quot;1&quot; /&gt;\n\n        &lt;ImageView\n            android:id=&quot;@+id/imageView25&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:src=&quot;@drawable/red&quot;\n            app:layout_column=&quot;2&quot;\n            app:layout_row=&quot;1&quot; /&gt;\n\n        &lt;ImageView\n            android:id=&quot;@+id/imageView26&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:src=&quot;@drawable/red&quot;\n            app:layout_column=&quot;0&quot;\n            app:layout_row=&quot;2&quot; /&gt;\n\n        &lt;ImageView\n            android:id=&quot;@+id/imageView27&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:src=&quot;@drawable/red&quot;\n            app:layout_column=&quot;1&quot;\n            app:layout_row=&quot;2&quot; /&gt;\n\n        &lt;ImageView\n            android:id=&quot;@+id/imageView28&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:src=&quot;@drawable/red&quot;\n            app:layout_column=&quot;2&quot;\n            app:layout_row=&quot;2&quot; /&gt;\n\n    &lt;/androidx.gridlayout.widget.GridLayout&gt;\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p>I tried adding all the coins one by one as soon as i added 4th coin it started in fourth column in 2nd row. while the expectation was to have it in 1st column of 2nd row.</p>\n"},{"tags":["java","mongodb","sorting","mongodb-java"],"answers":[{"comments":[{"owner":{"account_id":4153466,"reputation":1035,"user_id":3405288,"accept_rate":50,"display_name":"Varun Kumar"},"score":0,"creation_date":1396955229,"post_id":22931211,"comment_id":35011256,"body_markdown":"So there is no option for sorting the results with insensitive unless creating a new field with lower or upper cased values only. ryt??","body":"So there is no option for sorting the results with insensitive unless creating a new field with lower or upper cased values only. ryt??"},{"owner":{"account_id":162175,"reputation":43412,"user_id":383478,"accept_rate":98,"display_name":"Sammaye"},"score":1,"creation_date":1396955761,"post_id":22931211,"comment_id":35011568,"body_markdown":"@VarunKumar yep it is one of the bad points of MongoDB, I personally wouldn&#39;t use the below answer, MongoDB will be limited to 32meg of sort without the index resulting in very small result sets being allowed.","body":"@VarunKumar yep it is one of the bad points of MongoDB, I personally wouldn&#39;t use the below answer, MongoDB will be limited to 32meg of sort without the index resulting in very small result sets being allowed."},{"owner":{"account_id":162175,"reputation":43412,"user_id":383478,"accept_rate":98,"display_name":"Sammaye"},"score":1,"creation_date":1396955830,"post_id":22931211,"comment_id":35011603,"body_markdown":"@VarunKumar to be more precise you will be limited to between sorting 2 to 32,000 records depending on the size of the documents, not only that but the sort will be completely in memory, which will be a killer","body":"@VarunKumar to be more precise you will be limited to between sorting 2 to 32,000 records depending on the size of the documents, not only that but the sort will be completely in memory, which will be a killer"},{"owner":{"account_id":162175,"reputation":43412,"user_id":383478,"accept_rate":98,"display_name":"Sammaye"},"score":0,"creation_date":1474049811,"post_id":22931211,"comment_id":66389529,"body_markdown":"Holy *** it finally has!","body":"Holy *** it finally has!"},{"owner":{"account_id":2300570,"reputation":1161,"user_id":2020940,"accept_rate":81,"display_name":"Rahul Matte"},"score":0,"creation_date":1474964889,"post_id":22931211,"comment_id":66736964,"body_markdown":"@SSHThis can you please share the link where it is resolved?","body":"@SSHThis can you please share the link where it is resolved?"},{"owner":{"account_id":162175,"reputation":43412,"user_id":383478,"accept_rate":98,"display_name":"Sammaye"},"score":0,"creation_date":1474965820,"post_id":22931211,"comment_id":66737604,"body_markdown":"@RahulMatte click on the JIRA link, it is resolved in the latest unstable, as are collations","body":"@RahulMatte click on the JIRA link, it is resolved in the latest unstable, as are collations"},{"owner":{"account_id":1407056,"reputation":2566,"user_id":1334475,"display_name":"Teerakiat Chitawattanarat"},"score":0,"creation_date":1477186413,"post_id":22931211,"comment_id":67663163,"body_markdown":"Having said in the JIRA link, case insensitive index will come out with MongoDB v. 3.3.11 which basically you need to upgrade the mongodb for this feature. you can find new version here but as of today it is 3.2.10, the new version could be release in the future- https://www.mongodb.com/download-center#community","body":"Having said in the JIRA link, case insensitive index will come out with MongoDB v. 3.3.11 which basically you need to upgrade the mongodb for this feature. you can find new version here but as of today it is 3.2.10, the new version could be release in the future- <a href=\"https://www.mongodb.com/download-center#community\" rel=\"nofollow noreferrer\">mongodb.com/download-center#community</a>"},{"owner":{"account_id":1097012,"reputation":14034,"user_id":1090395,"accept_rate":71,"display_name":"Mladen Janjetovic"},"score":0,"creation_date":1488291597,"post_id":22931211,"comment_id":72159475,"body_markdown":"This is resolved by MongoDB. Take a look at my answer bellow","body":"This is resolved by MongoDB. Take a look at my answer bellow"},{"owner":{"account_id":7503566,"reputation":6078,"user_id":5700967,"accept_rate":42,"display_name":"oblivion"},"score":0,"creation_date":1501495111,"post_id":22931211,"comment_id":77785894,"body_markdown":"@Sammaye is there some way I can use `case insensitive index` with `reactive-mongo` driver ? I am using `scala` with `mongo`.","body":"@Sammaye is there some way I can use <code>case insensitive index</code> with <code>reactive-mongo</code> driver ? I am using <code>scala</code> with <code>mongo</code>."},{"owner":{"account_id":162175,"reputation":43412,"user_id":383478,"accept_rate":98,"display_name":"Sammaye"},"score":0,"creation_date":1501495664,"post_id":22931211,"comment_id":77786262,"body_markdown":"@oblivion unfortunately I do not program in Scala","body":"@oblivion unfortunately I do not program in Scala"},{"owner":{"account_id":162175,"reputation":43412,"user_id":383478,"accept_rate":98,"display_name":"Sammaye"},"score":0,"creation_date":1513243113,"post_id":22931211,"comment_id":82580543,"body_markdown":"Collations are supported by aggregate so I would say yes","body":"Collations are supported by aggregate so I would say yes"},{"owner":{"account_id":162175,"reputation":43412,"user_id":383478,"accept_rate":98,"display_name":"Sammaye"},"score":1,"creation_date":1563197975,"post_id":22931211,"comment_id":100609703,"body_markdown":"@F.H. are you using collations?","body":"@F.H. are you using collations?"},{"owner":{"account_id":162175,"reputation":43412,"user_id":383478,"accept_rate":98,"display_name":"Sammaye"},"score":1,"creation_date":1563198037,"post_id":22931211,"comment_id":100609735,"body_markdown":"@F.H. to be clear the reason why sort is case sensitive without collations ios because it uses lexical sorting without collations","body":"@F.H. to be clear the reason why sort is case sensitive without collations ios because it uses lexical sorting without collations"},{"owner":{"account_id":3472591,"reputation":1474,"user_id":2906568,"accept_rate":71,"display_name":"F.H."},"score":0,"creation_date":1563198210,"post_id":22931211,"comment_id":100609846,"body_markdown":"**update** sorry, had wrong collation object passed - *confirmed it works with aggregation*","body":"<b>update</b> sorry, had wrong collation object passed - <i>confirmed it works with aggregation</i>"},{"owner":{"account_id":16176312,"reputation":574,"user_id":11678869,"display_name":"code đờ"},"score":0,"creation_date":1624348662,"post_id":22931211,"comment_id":120327452,"body_markdown":"Good answer. I just wanna add some documentation: https://docs.mongodb.com/manual/reference/collation","body":"Good answer. I just wanna add some documentation: <a href=\"https://docs.mongodb.com/manual/reference/collation\" rel=\"nofollow noreferrer\">docs.mongodb.com/manual/reference/collation</a>"}],"tags":[],"owner":{"account_id":162175,"reputation":43412,"user_id":383478,"accept_rate":98,"display_name":"Sammaye"},"comment_count":15,"down_vote_count":0,"up_vote_count":84,"is_accepted":true,"score":84,"last_activity_date":1547651323,"creation_date":1396944632,"answer_id":22931211,"question_id":22931177,"body_markdown":"**Update:**\r\nAs of now mongodb have case insensitive indexes:\r\n\r\n    Users.find({})\r\n      .collation({locale: &quot;en&quot; })\r\n      .sort({name: 1})\r\n      .exec()\r\n      .then(...)\r\n\r\nshell:\r\n\r\n    db.getCollection(&#39;users&#39;)\r\n      .find({})\r\n      .collation({&#39;locale&#39;:&#39;en&#39;})\r\n      .sort({&#39;firstName&#39;:1})\r\n\r\n---\r\n\r\n**Update:** This answer is out of date, 3.4 will have case insensitive indexes. Look to the JIRA for more information https://jira.mongodb.org/browse/SERVER-90\r\n\r\n---\r\n\r\nUnfortunately MongoDB does not yet have case insensitive indexes: https://jira.mongodb.org/browse/SERVER-90 and the task has been pushed back.\r\n\r\nThis means the only way to sort case insensitive currently is to actually create a specific &quot;lower cased&quot; field, copying the value (lower cased of course) of the sort field in question and sorting on that instead.","title":"Case insensitive sorting in MongoDB","body":"<p><strong>Update:</strong>\nAs of now mongodb have case insensitive indexes:</p>\n\n<pre><code>Users.find({})\n  .collation({locale: \"en\" })\n  .sort({name: 1})\n  .exec()\n  .then(...)\n</code></pre>\n\n<p>shell:</p>\n\n<pre><code>db.getCollection('users')\n  .find({})\n  .collation({'locale':'en'})\n  .sort({'firstName':1})\n</code></pre>\n\n<hr>\n\n<p><strong>Update:</strong> This answer is out of date, 3.4 will have case insensitive indexes. Look to the JIRA for more information <a href=\"https://jira.mongodb.org/browse/SERVER-90\" rel=\"noreferrer\">https://jira.mongodb.org/browse/SERVER-90</a></p>\n\n<hr>\n\n<p>Unfortunately MongoDB does not yet have case insensitive indexes: <a href=\"https://jira.mongodb.org/browse/SERVER-90\" rel=\"noreferrer\">https://jira.mongodb.org/browse/SERVER-90</a> and the task has been pushed back.</p>\n\n<p>This means the only way to sort case insensitive currently is to actually create a specific \"lower cased\" field, copying the value (lower cased of course) of the sort field in question and sorting on that instead.</p>\n"},{"comments":[{"owner":{"account_id":4153466,"reputation":1035,"user_id":3405288,"accept_rate":50,"display_name":"Varun Kumar"},"score":0,"creation_date":1396955454,"post_id":22931481,"comment_id":35011388,"body_markdown":"Yup.. this looks gud.. but I want to implement the same from a java code.. So it&#39;ll more helpful if you share me that how this can be achieved from Java class with handling mongodb and query object.","body":"Yup.. this looks gud.. but I want to implement the same from a java code.. So it&#39;ll more helpful if you share me that how this can be achieved from Java class with handling mongodb and query object."},{"owner":{"account_id":2677968,"reputation":148907,"user_id":2313887,"accept_rate":82,"display_name":"Neil Lunn"},"score":0,"creation_date":1396956651,"post_id":22931481,"comment_id":35012142,"body_markdown":"@VarunKumar You basically need to construct DBObject entries that you pass to the aggregate method. There is [this example](http://docs.mongodb.org/ecosystem/tutorial/use-aggregation-framework-with-java-driver/) in the documentation resources. So it should not be hard to translate. And considering that it is an actual answer to show how it can be done that should not be too hard.","body":"@VarunKumar You basically need to construct DBObject entries that you pass to the aggregate method. There is <a href=\"http://docs.mongodb.org/ecosystem/tutorial/use-aggregation-framework-with-java-driver/\" rel=\"nofollow noreferrer\">this example</a> in the documentation resources. So it should not be hard to translate. And considering that it is an actual answer to show how it can be done that should not be too hard."},{"owner":{"account_id":87230,"reputation":36826,"user_id":242042,"accept_rate":57,"display_name":"Archimedes Trajano"},"score":0,"creation_date":1458346426,"post_id":22931481,"comment_id":59836810,"body_markdown":"Would this be slow (i.e. does the aggregate get evaluated every time?)","body":"Would this be slow (i.e. does the aggregate get evaluated every time?)"},{"owner":{"account_id":4224377,"reputation":88,"user_id":3458245,"accept_rate":25,"display_name":"freak007"},"score":0,"creation_date":1514920036,"post_id":22931481,"comment_id":83106141,"body_markdown":"Did anyone solve the issue using spring-data-mongo or Java?","body":"Did anyone solve the issue using spring-data-mongo or Java?"},{"owner":{"account_id":13618734,"reputation":470,"user_id":9823939,"display_name":"FernandoG"},"score":0,"creation_date":1691072185,"post_id":22931481,"comment_id":135444586,"body_markdown":"This is good if you can&#39;t use collation.","body":"This is good if you can&#39;t use collation."}],"tags":[],"owner":{"account_id":2677968,"reputation":148907,"user_id":2313887,"accept_rate":82,"display_name":"Neil Lunn"},"comment_count":5,"down_vote_count":0,"up_vote_count":64,"is_accepted":false,"score":64,"last_activity_date":1684756189,"creation_date":1396945410,"answer_id":22931481,"question_id":22931177,"body_markdown":"Sorting does work like that in MongoDB but you can do this on the fly with aggregate:\r\n\r\nTake the following data:\r\n\r\n\r\n```json\r\n{ &quot;field&quot; : &quot;BBB&quot; }\r\n{ &quot;field&quot; : &quot;aaa&quot; }\r\n{ &quot;field&quot; : &quot;AAA&quot; }\r\n```\r\n\r\nSo with the following statement:\r\n\r\n```javascript\r\ndb.collection.aggregate([\r\n    { \r\n        &quot;$project&quot;: {\r\n            &quot;field&quot;: 1,\r\n            &quot;insensitive&quot;: { &quot;$toLower&quot;: &quot;$field&quot; }\r\n        }\r\n    },\r\n    { &quot;$sort&quot;: { &quot;insensitive&quot;: 1 } }\r\n])\r\n```\r\n\r\nWould produce results like:\r\n```json\r\n{\r\n    &quot;field&quot; : &quot;aaa&quot;,\r\n    &quot;insensitive&quot; : &quot;aaa&quot;\r\n},\r\n{\r\n    &quot;field&quot; : &quot;AAA&quot;,\r\n    &quot;insensitive&quot; : &quot;aaa&quot;\r\n},\r\n{\r\n    &quot;field&quot; : &quot;BBB&quot;,\r\n    &quot;insensitive&quot; : &quot;bbb&quot;\r\n}\r\n```\r\nThe actual order of insertion would be maintained for any values resulting in the same key when converted.","title":"Case insensitive sorting in MongoDB","body":"<p>Sorting does work like that in MongoDB but you can do this on the fly with aggregate:</p>\n<p>Take the following data:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{ &quot;field&quot; : &quot;BBB&quot; }\n{ &quot;field&quot; : &quot;aaa&quot; }\n{ &quot;field&quot; : &quot;AAA&quot; }\n</code></pre>\n<p>So with the following statement:</p>\n<pre class=\"lang-js prettyprint-override\"><code>db.collection.aggregate([\n    { \n        &quot;$project&quot;: {\n            &quot;field&quot;: 1,\n            &quot;insensitive&quot;: { &quot;$toLower&quot;: &quot;$field&quot; }\n        }\n    },\n    { &quot;$sort&quot;: { &quot;insensitive&quot;: 1 } }\n])\n</code></pre>\n<p>Would produce results like:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;field&quot; : &quot;aaa&quot;,\n    &quot;insensitive&quot; : &quot;aaa&quot;\n},\n{\n    &quot;field&quot; : &quot;AAA&quot;,\n    &quot;insensitive&quot; : &quot;aaa&quot;\n},\n{\n    &quot;field&quot; : &quot;BBB&quot;,\n    &quot;insensitive&quot; : &quot;bbb&quot;\n}\n</code></pre>\n<p>The actual order of insertion would be maintained for any values resulting in the same key when converted.</p>\n"},{"tags":[],"owner":{"account_id":2919557,"reputation":7353,"user_id":2502126,"accept_rate":20,"display_name":"Buzz Moschetti"},"comment_count":0,"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1434300440,"creation_date":1434300305,"answer_id":30831958,"question_id":22931177,"body_markdown":"Here it is in Java.  I mixed no-args and first key-val variants of `BasicDBObject` just for variety\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n            DBCollection coll = db.getCollection(&quot;foo&quot;);\r\n\r\n            List&lt;DBObject&gt; pipe = new ArrayList&lt;DBObject&gt;();\r\n\r\n            DBObject prjflds = new BasicDBObject();\r\n            prjflds.put(&quot;field&quot;, 1);\r\n            prjflds.put(&quot;insensitive&quot;, new BasicDBObject(&quot;$toLower&quot;, &quot;$field&quot;));\r\n\r\n            DBObject project = new BasicDBObject();\r\n            project.put(&quot;$project&quot;, prjflds);\r\n            pipe.add(project);\r\n\r\n            DBObject sort = new BasicDBObject();\r\n            sort.put(&quot;$sort&quot;, new BasicDBObject(&quot;insensitive&quot;, 1));\r\n            pipe.add(sort);\r\n\r\n            AggregationOutput agg = coll.aggregate(pipe);\r\n\r\n            for (DBObject result : agg.results()) {\r\n\t\t        System.out.println(result);\r\n            }\r\n\r\n","title":"Case insensitive sorting in MongoDB","body":"<p>Here it is in Java.  I mixed no-args and first key-val variants of <code>BasicDBObject</code> just for variety</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>        DBCollection coll = db.getCollection(\"foo\");\n\n        List&lt;DBObject&gt; pipe = new ArrayList&lt;DBObject&gt;();\n\n        DBObject prjflds = new BasicDBObject();\n        prjflds.put(\"field\", 1);\n        prjflds.put(\"insensitive\", new BasicDBObject(\"$toLower\", \"$field\"));\n\n        DBObject project = new BasicDBObject();\n        project.put(\"$project\", prjflds);\n        pipe.add(project);\n\n        DBObject sort = new BasicDBObject();\n        sort.put(\"$sort\", new BasicDBObject(\"insensitive\", 1));\n        pipe.add(sort);\n\n        AggregationOutput agg = coll.aggregate(pipe);\n\n        for (DBObject result : agg.results()) {\n            System.out.println(result);\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1097012,"reputation":14034,"user_id":1090395,"accept_rate":71,"display_name":"Mladen Janjetovic"},"comment_count":0,"down_vote_count":1,"up_vote_count":33,"is_accepted":false,"score":32,"last_activity_date":1571940510,"creation_date":1488291432,"answer_id":42511116,"question_id":22931177,"body_markdown":"This has been an [issue][1] for quite a long time on MongoDB JIRA, but it is solved now. Take a look at [this release notes for detailed documentation][2]. You should use `collation`.\r\n\r\n    User.find()\r\n        .collation({locale: &quot;en&quot; }) //or whatever collation you want\r\n        .sort({name:1})\r\n        .exec(function(err, users) {\r\n            // use your case insensitive sorted results\r\n        });\r\n\r\n\r\n  [1]: https://jira.mongodb.org/browse/SERVER-90\r\n  [2]: https://docs.mongodb.com/manual/reference/collation/","title":"Case insensitive sorting in MongoDB","body":"<p>This has been an <a href=\"https://jira.mongodb.org/browse/SERVER-90\" rel=\"noreferrer\">issue</a> for quite a long time on MongoDB JIRA, but it is solved now. Take a look at <a href=\"https://docs.mongodb.com/manual/reference/collation/\" rel=\"noreferrer\">this release notes for detailed documentation</a>. You should use <code>collation</code>.</p>\n\n<pre><code>User.find()\n    .collation({locale: \"en\" }) //or whatever collation you want\n    .sort({name:1})\n    .exec(function(err, users) {\n        // use your case insensitive sorted results\n    });\n</code></pre>\n"},{"comments":[{"owner":{"account_id":268146,"reputation":4923,"user_id":556730,"accept_rate":74,"display_name":"arg20"},"score":0,"creation_date":1538013557,"post_id":43269750,"comment_id":91996203,"body_markdown":"Sorting in your app is a bad idea","body":"Sorting in your app is a bad idea"}],"tags":[],"owner":{"account_id":7538054,"reputation":1,"user_id":5723726,"display_name":"Kevin Alviola"},"comment_count":1,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1491539890,"creation_date":1491539890,"answer_id":43269750,"question_id":22931177,"body_markdown":"&lt;p&gt;We solve this problem with the help of .sort function in JavaScript array&lt;/p&gt;\r\n&lt;p&gt;Here is the code&lt;/p&gt;\r\n\r\n&lt;pre&gt;\r\n\r\n    function foo() {\r\n      let results = collections.find({\r\n        _id: _id\r\n      }, {\r\n        fields: {\r\n          &#39;username&#39;: 1,\r\n        }\r\n      }).fetch();\r\n    \r\n      results.sort((a, b)=&gt;{\r\n        var nameA = a.username.toUpperCase();\r\n        var nameB = b.username.toUpperCase();\r\n    \r\n        if (nameA &lt; nameB) {\r\n          return -1;\r\n        }\r\n        if (nameA &gt; nameB) {\r\n          return 1;\r\n        }\r\n        return 0;\r\n      });\r\n    \r\n      return results;\r\n    }\r\n\r\n&lt;/pre&gt;","title":"Case insensitive sorting in MongoDB","body":"<p>We solve this problem with the help of .sort function in JavaScript array</p>\n\n<p>Here is the code</p>\n\n<pre>\n\n    function foo() {\n      let results = collections.find({\n        _id: _id\n      }, {\n        fields: {\n          'username': 1,\n        }\n      }).fetch();\n\n      results.sort((a, b)=>{\n        var nameA = a.username.toUpperCase();\n        var nameB = b.username.toUpperCase();\n\n        if (nameA  nameB) {\n          return 1;\n        }\n        return 0;\n      });\n\n      return results;\n    }\n\n</pre>\n"},{"tags":[],"owner":{"account_id":4008101,"reputation":3126,"user_id":3370568,"accept_rate":100,"display_name":"Wajahath"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1547640943,"creation_date":1547640943,"answer_id":54216892,"question_id":22931177,"body_markdown":"As of now (mongodb 4), you can do the following:\r\n\r\nmongo shell:\r\n\r\n    db.getCollection(&#39;users&#39;)\r\n      .find({})\r\n      .collation({&#39;locale&#39;:&#39;en&#39;})\r\n      .sort({&#39;firstName&#39;:1});\r\n\r\n\r\nmongoose:\r\n\r\n    Users.find({})\r\n      .collation({locale: &quot;en&quot; })\r\n      .sort({name: 1})\r\n      .exec()\r\n      .then(...)\r\n\r\n\r\nHere are [supported languages and locales][1] by mongodb.\r\n\r\n\r\n  [1]: https://docs.mongodb.com/manual/reference/collation-locales-defaults/#collation-languages-locales","title":"Case insensitive sorting in MongoDB","body":"<p>As of now (mongodb 4), you can do the following:</p>\n\n<p>mongo shell:</p>\n\n<pre><code>db.getCollection('users')\n  .find({})\n  .collation({'locale':'en'})\n  .sort({'firstName':1});\n</code></pre>\n\n<p>mongoose:</p>\n\n<pre><code>Users.find({})\n  .collation({locale: \"en\" })\n  .sort({name: 1})\n  .exec()\n  .then(...)\n</code></pre>\n\n<p>Here are <a href=\"https://docs.mongodb.com/manual/reference/collation-locales-defaults/#collation-languages-locales\" rel=\"nofollow noreferrer\">supported languages and locales</a> by mongodb.</p>\n"},{"comments":[{"owner":{"account_id":14500314,"reputation":370,"user_id":10473693,"display_name":"Monu Chaudhary"},"score":0,"creation_date":1554194422,"post_id":55324842,"comment_id":97651593,"body_markdown":"But when I use collation in Mongoose with aggregation, I get an error  MongooseError: Callback must be a function, got [object Object]","body":"But when I use collation in Mongoose with aggregation, I get an error  MongooseError: Callback must be a function, got [object Object]"}],"tags":[],"owner":{"account_id":14500314,"reputation":370,"user_id":10473693,"display_name":"Monu Chaudhary"},"comment_count":1,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1553441467,"creation_date":1553437836,"answer_id":55324842,"question_id":22931177,"body_markdown":"Adding the code `.collation({&#39;locale&#39;:&#39;en&#39;})` helped to solve my issue. ","title":"Case insensitive sorting in MongoDB","body":"<p>Adding the code <code>.collation({'locale':'en'})</code> helped to solve my issue. </p>\n"},{"tags":[],"owner":{"account_id":15196364,"reputation":71,"user_id":10965564,"display_name":"G Boje Gowda"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1576489787,"creation_date":1576489787,"answer_id":59354090,"question_id":22931177,"body_markdown":"In  Mongoose:-\r\n\r\n    Customer.find()\r\n      .collation({locale: &quot;en&quot; })\r\n      .sort({comapany: 1})","title":"Case insensitive sorting in MongoDB","body":"<p>In  Mongoose:-</p>\n\n<pre><code>Customer.find()\n  .collation({locale: \"en\" })\n  .sort({comapany: 1})\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14354118,"reputation":169,"user_id":10368610,"display_name":"SANJEEV RAVI"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1583749313,"creation_date":1583745077,"answer_id":60597470,"question_id":22931177,"body_markdown":"Tried all the above and answers\r\n**Consolidating the result**\r\n       \r\nAnswer-1:\r\n\r\n    db.collection.aggregate([\r\n        { &quot;$project&quot;: {\r\n           &quot;field&quot;: 1,\r\n           &quot;insensitive&quot;: { &quot;$toLower&quot;: &quot;$field&quot; }\r\n        }},\r\n        { &quot;$sort&quot;: { &quot;insensitive&quot;: 1 } } ])\r\n\r\nAggregate query converts the field into lower, So performance is low for large data.\r\n\r\nAnswer-2:\r\n \r\n\r\n    db.collection.find({}).collation({locale: &quot;en&quot;}).sort({&quot;name&quot;:1})\r\nBy default mongo follows uft-8 encoding(Z has high piriority then a) rules ,So overriding with  language-specific rules. \r\nIts fast compare to above query\r\n Look into an official document to customize rules\r\n\r\nhttps://docs.mongodb.com/manual/reference/collation/\r\n \r\n","title":"Case insensitive sorting in MongoDB","body":"<p>Tried all the above and answers\n<strong>Consolidating the result</strong></p>\n\n<p>Answer-1:</p>\n\n<pre><code>db.collection.aggregate([\n    { \"$project\": {\n       \"field\": 1,\n       \"insensitive\": { \"$toLower\": \"$field\" }\n    }},\n    { \"$sort\": { \"insensitive\": 1 } } ])\n</code></pre>\n\n<p>Aggregate query converts the field into lower, So performance is low for large data.</p>\n\n<p>Answer-2:</p>\n\n<pre><code>db.collection.find({}).collation({locale: \"en\"}).sort({\"name\":1})\n</code></pre>\n\n<p>By default mongo follows uft-8 encoding(Z has high piriority then a) rules ,So overriding with  language-specific rules. \nIts fast compare to above query\n Look into an official document to customize rules</p>\n\n<p><a href=\"https://docs.mongodb.com/manual/reference/collation/\" rel=\"nofollow noreferrer\">https://docs.mongodb.com/manual/reference/collation/</a></p>\n"},{"comments":[{"owner":{"account_id":7227361,"reputation":886,"user_id":5515472,"display_name":"am.rez"},"score":0,"creation_date":1632318985,"post_id":66155990,"comment_id":122460191,"body_markdown":"with `$addFields` you no longer need to add `$$ROOT`.","body":"with <code>$addFields</code> you no longer need to add <code>$$ROOT</code>."}],"tags":[],"owner":{"account_id":20688841,"reputation":33,"user_id":15190678,"display_name":"Renato Augusto"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1613051284,"creation_date":1613051284,"answer_id":66155990,"question_id":22931177,"body_markdown":"If you want to sort and return all data in a document, you can add `document: &quot;$$ROOT&quot;`\r\n\r\n```js\r\ndb.collection.aggregate([\r\n  { \r\n    $project: {\r\n      field: 1,\r\n      insensitive: { $toLower: &quot;$field&quot; },\r\n      document: &quot;$$ROOT&quot;\r\n    }\r\n  },\r\n  { $sort: { insensitive: 1 } }\r\n]).toArray()\r\n```","title":"Case insensitive sorting in MongoDB","body":"<p>If you want to sort and return all data in a document, you can add <code>document: &quot;$$ROOT&quot;</code></p>\n<pre class=\"lang-js prettyprint-override\"><code>db.collection.aggregate([\n  { \n    $project: {\n      field: 1,\n      insensitive: { $toLower: &quot;$field&quot; },\n      document: &quot;$$ROOT&quot;\n    }\n  },\n  { $sort: { insensitive: 1 } }\n]).toArray()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9610722,"reputation":56,"user_id":7135157,"display_name":"Pankaj Patil"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692254967,"creation_date":1692254967,"answer_id":76919087,"question_id":22931177,"body_markdown":"MongoDB with Panache provided\r\n```\r\npublic &lt;T extends Entity&gt; ReactivePanacheQuery&lt;T&gt; withCollation(Collation collation); \r\n```\r\nmethod in `ReactivePanacheQuery` class.\r\nUsing this sorting the data with case-insensitive support can be achieved as follows. \r\n\r\n```\r\nrepo.find(query, sort).withCollation(Collation.builder().locale(&quot;en&quot;).build())\r\n```","title":"Case insensitive sorting in MongoDB","body":"<p>MongoDB with Panache provided</p>\n<pre><code>public &lt;T extends Entity&gt; ReactivePanacheQuery&lt;T&gt; withCollation(Collation collation); \n</code></pre>\n<p>method in <code>ReactivePanacheQuery</code> class.\nUsing this sorting the data with case-insensitive support can be achieved as follows.</p>\n<pre><code>repo.find(query, sort).withCollation(Collation.builder().locale(&quot;en&quot;).build())\n</code></pre>\n"}],"owner":{"account_id":4153466,"reputation":1035,"user_id":3405288,"accept_rate":50,"display_name":"Varun Kumar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66415,"favorite_count":0,"down_vote_count":0,"up_vote_count":86,"accepted_answer_id":22931211,"answer_count":11,"score":86,"last_activity_date":1692254967,"creation_date":1396944504,"question_id":22931177,"body_markdown":"How can I sort a MongoDB collection by a given field, case-insensitively? By default, I get A-Z before a-z.\r\n\r\n\r\n","title":"Case insensitive sorting in MongoDB","body":"<p>How can I sort a MongoDB collection by a given field, case-insensitively? By default, I get A-Z before a-z.</p>\n"},{"tags":["java","list","function","arguments"],"answers":[{"comments":[{"owner":{"account_id":59056,"reputation":50006,"user_id":176741,"accept_rate":90,"display_name":"Dolph"},"score":2,"creation_date":1265851068,"post_id":2241523,"comment_id":2198313,"body_markdown":"Java did not always have generics; when they were added, the resulting bytecode was not changed.","body":"Java did not always have generics; when they were added, the resulting bytecode was not changed."},{"owner":{"account_id":75807,"reputation":81445,"user_id":217332,"accept_rate":100,"display_name":"danben"},"score":3,"creation_date":1265851628,"post_id":2241523,"comment_id":2198357,"body_markdown":"Yes, that&#39;s the reason for using type erasure - to avoid breaking backward compatibility with pre-generics code.","body":"Yes, that&#39;s the reason for using type erasure - to avoid breaking backward compatibility with pre-generics code."},{"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":1,"creation_date":1265931051,"post_id":2241523,"comment_id":2206720,"body_markdown":"The type are erased at runtime. Method overload selection is done at compile time. Therefore, there is enough information for the compiler to decide, even with erasure. However, there are binary representation and compatibility issues if this language change was to happen.","body":"The type are erased at runtime. Method overload selection is done at compile time. Therefore, there is enough information for the compiler to decide, even with erasure. However, there are binary representation and compatibility issues if this language change was to happen."}],"tags":[],"owner":{"account_id":75807,"reputation":81445,"user_id":217332,"accept_rate":100,"display_name":"danben"},"comment_count":3,"down_vote_count":1,"up_vote_count":16,"is_accepted":false,"score":15,"last_activity_date":1265849803,"creation_date":1265849803,"answer_id":2241523,"question_id":2241514,"body_markdown":"The thing about generics in Java is that generic types are erased at runtime, so both of these methods compile to the same signature.  You will need to have separate method names, or check the type of the list elements at runtime.\r\n\r\n","title":"Overloading Java function with List&lt;&gt; parameter","body":"<p>The thing about generics in Java is that generic types are erased at runtime, so both of these methods compile to the same signature.  You will need to have separate method names, or check the type of the list elements at runtime.</p>\n"},{"comments":[{"owner":{"account_id":19749,"reputation":2247,"user_id":46527,"accept_rate":85,"display_name":"MadMurf"},"score":0,"creation_date":1265850039,"post_id":2241529,"comment_id":2198238,"body_markdown":"Yeah, that was something I started looking at, checking the class and altering behaviour. Came to SO hoping there was an more elegant solution, if nothing comes up I&#39;ll continue down this route.","body":"Yeah, that was something I started looking at, checking the class and altering behaviour. Came to SO hoping there was an more elegant solution, if nothing comes up I&#39;ll continue down this route."},{"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":0,"creation_date":1265931091,"post_id":2241529,"comment_id":2206726,"body_markdown":"As other question, override selection is done at compile time so erasure does not rule it out.","body":"As other question, override selection is done at compile time so erasure does not rule it out."},{"owner":{"account_id":5184275,"reputation":483,"user_id":4149078,"accept_rate":60,"display_name":"carmelolg"},"score":0,"creation_date":1529417771,"post_id":2241529,"comment_id":88860119,"body_markdown":"In my opinion this kind of code could be classified as &quot;spaghetti code&quot;.\nI prefer https://stackoverflow.com/a/2241584/4149078 because force you to implement object oriented code.","body":"In my opinion this kind of code could be classified as &quot;spaghetti code&quot;. I prefer <a href=\"https://stackoverflow.com/a/2241584/4149078\">stackoverflow.com/a/2241584/4149078</a> because force you to implement object oriented code."}],"tags":[],"owner":{"account_id":78982,"reputation":59009,"user_id":224346,"display_name":"Anon."},"comment_count":3,"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1265849887,"creation_date":1265849887,"answer_id":2241529,"question_id":2241514,"body_markdown":"Generics have what is known as *type erasure* - `List&lt;Customer&gt;` and `List&lt;Applicant&gt;` are the same type, the compiler just places compile-time restrictions on what you can do with them.\r\n\r\nYou could check the type of the first object in the list and call a (differently-named) internal method based on that.","title":"Overloading Java function with List&lt;&gt; parameter","body":"<p>Generics have what is known as <em>type erasure</em> - <code>List&lt;Customer&gt;</code> and <code>List&lt;Applicant&gt;</code> are the same type, the compiler just places compile-time restrictions on what you can do with them.</p>\n\n<p>You could check the type of the first object in the list and call a (differently-named) internal method based on that.</p>\n"},{"tags":[],"owner":{"account_id":7052,"reputation":48090,"user_id":12048,"accept_rate":94,"display_name":"finnw"},"comment_count":0,"down_vote_count":0,"up_vote_count":20,"is_accepted":true,"score":20,"last_activity_date":1265850974,"creation_date":1265850974,"answer_id":2241584,"question_id":2241514,"body_markdown":"If you make both classes implement a common interface,\r\n\r\n    interface CustomerNumber {\r\n        String getCustomerNumber();\r\n    }\r\n    \r\n    public class Customer implements CustomerNumber {\r\n      ...\r\n      public String getCustomerNumber();\r\n      ...\r\n    }\r\n    \r\n    public class Applicant implements CustomerNumber {\r\n       ....\r\n       private Customer c;\r\n       public Customer getCustomer() { return c; }\r\n       public String getCustomerNumber() { return getCustomer().getCustomerNumber(); }\r\n       ...\r\n    }\r\n\r\nthen you might be able to do what you want with just a single method:\r\n\r\n    public void processCustomerNumbers(List&lt;? extends CustomerNumber&gt; appList) {\r\n        for (Customer c: appList) {\r\n            processCustomerNumber(c.getCustomerNumber());\r\n        }\r\n    }\r\n\r\n","title":"Overloading Java function with List&lt;&gt; parameter","body":"<p>If you make both classes implement a common interface,</p>\n\n<pre><code>interface CustomerNumber {\n    String getCustomerNumber();\n}\n\npublic class Customer implements CustomerNumber {\n  ...\n  public String getCustomerNumber();\n  ...\n}\n\npublic class Applicant implements CustomerNumber {\n   ....\n   private Customer c;\n   public Customer getCustomer() { return c; }\n   public String getCustomerNumber() { return getCustomer().getCustomerNumber(); }\n   ...\n}\n</code></pre>\n\n<p>then you might be able to do what you want with just a single method:</p>\n\n<pre><code>public void processCustomerNumbers(List&lt;? extends CustomerNumber&gt; appList) {\n    for (Customer c: appList) {\n        processCustomerNumber(c.getCustomerNumber());\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":100446,"reputation":766,"user_id":270780,"accept_rate":75,"display_name":"PassionatedDeveloper"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1265857267,"creation_date":1265857267,"answer_id":2241965,"question_id":2241514,"body_markdown":"Before coming into the method names , the class hierarchy is little bit confusing...\r\n\r\n    public class Customer{          \r\n      ...          \r\n      public String getCustomerNumber();          \r\n      ...          \r\n    }          \r\n              \r\n    public class Applicant{          \r\n       ....          \r\n       private Customer c;          \r\n       public Customer getCustomer(){ return c; }          \r\n       ...          \r\n    }    \r\n\r\n&gt; Why should applicant and Customer be\r\n&gt; different objects ? Can you tell the\r\n&gt; relation between these objects ?\r\n\r\n\r\n\r\n      \r\n","title":"Overloading Java function with List&lt;&gt; parameter","body":"<p>Before coming into the method names , the class hierarchy is little bit confusing...</p>\n\n<pre><code>public class Customer{          \n  ...          \n  public String getCustomerNumber();          \n  ...          \n}          \n\npublic class Applicant{          \n   ....          \n   private Customer c;          \n   public Customer getCustomer(){ return c; }          \n   ...          \n}    \n</code></pre>\n\n<blockquote>\n  <p>Why should applicant and Customer be\n  different objects ? Can you tell the\n  relation between these objects ?</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1265863834,"creation_date":1265863834,"answer_id":2242346,"question_id":2241514,"body_markdown":"One way to workaround this issue would be to define custom list types like this:\r\n\r\n    class CustomerList extends ArrayList&lt;Customer&gt; {\r\n        ...\r\n    }\r\n\r\n    class ApplicantList extends ArrayList&lt;Applicant&gt; {\r\n        ...\r\n    }\r\n\r\nThen the following overloading would be legal:\r\n\r\n    public void processCustomerNumbers(CustomerList custList)\r\n\r\n    public void processCustomerNumbers(ApplicantList appList)\r\n\r\nHowever, I don&#39;t think that this would be a good idea.  For a start, it hardwires particular implementation classes into your application&#39;s APIs.\r\n\r\nA better approach is to define a common interface for Customer and Applicant that allows you to process them with one `processCustomerNumbers` method.  (As described at length in other answers.)","title":"Overloading Java function with List&lt;&gt; parameter","body":"<p>One way to workaround this issue would be to define custom list types like this:</p>\n\n<pre><code>class CustomerList extends ArrayList&lt;Customer&gt; {\n    ...\n}\n\nclass ApplicantList extends ArrayList&lt;Applicant&gt; {\n    ...\n}\n</code></pre>\n\n<p>Then the following overloading would be legal:</p>\n\n<pre><code>public void processCustomerNumbers(CustomerList custList)\n\npublic void processCustomerNumbers(ApplicantList appList)\n</code></pre>\n\n<p>However, I don't think that this would be a good idea.  For a start, it hardwires particular implementation classes into your application's APIs.</p>\n\n<p>A better approach is to define a common interface for Customer and Applicant that allows you to process them with one <code>processCustomerNumbers</code> method.  (As described at length in other answers.)</p>\n"},{"tags":[],"owner":{"account_id":11452778,"reputation":11,"user_id":8394747,"display_name":"Jacob"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1501512622,"creation_date":1501512622,"answer_id":45419082,"question_id":2241514,"body_markdown":"Use array instead.\r\n\r\n    public void processCustomerNumbers(Customer[] custList)\r\n    ...\r\n    \r\n    public void processCustomerNumbers(Applicant[] appList)\r\n    ...\r\n\r\nWhen you try to call these methods with a list, convert the list to array:\r\n\r\n    List&lt;Customer&gt; customers;\r\n    List&lt;Applicant&gt; applicants;\r\n    ...\r\n    processCustomerNumbers(customers.toArray(new Customer[]{});\r\n    processCustomerNumbers(applicants.toArray(new Applicant[]{});","title":"Overloading Java function with List&lt;&gt; parameter","body":"<p>Use array instead.</p>\n\n<pre><code>public void processCustomerNumbers(Customer[] custList)\n...\n\npublic void processCustomerNumbers(Applicant[] appList)\n...\n</code></pre>\n\n<p>When you try to call these methods with a list, convert the list to array:</p>\n\n<pre><code>List&lt;Customer&gt; customers;\nList&lt;Applicant&gt; applicants;\n...\nprocessCustomerNumbers(customers.toArray(new Customer[]{});\nprocessCustomerNumbers(applicants.toArray(new Applicant[]{});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2440244,"reputation":645,"user_id":2128979,"accept_rate":70,"display_name":"Ashish Tanna"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692254842,"creation_date":1692254842,"answer_id":76919079,"question_id":2241514,"body_markdown":"I have found one easiest workaround for this problem with least modifications in code. You can use `List` and `Collection` in the parameter like this:\r\n\r\n    public void processCustomerNumbers(List&lt;Customer&gt; custList)\r\n    ...\r\n\r\n    public void processCustomerNumbers(Collection&lt;Applicant&gt; appList)\r\n    ...","title":"Overloading Java function with List&lt;&gt; parameter","body":"<p>I have found one easiest workaround for this problem with least modifications in code. You can use <code>List</code> and <code>Collection</code> in the parameter like this:</p>\n<pre><code>public void processCustomerNumbers(List&lt;Customer&gt; custList)\n...\n\npublic void processCustomerNumbers(Collection&lt;Applicant&gt; appList)\n...\n</code></pre>\n"}],"owner":{"account_id":19749,"reputation":2247,"user_id":46527,"accept_rate":85,"display_name":"MadMurf"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21427,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"accepted_answer_id":2241584,"answer_count":7,"score":18,"last_activity_date":1692254842,"creation_date":1265849702,"question_id":2241514,"body_markdown":"I have 2 classes\r\n\r\n    public class Customer{\r\n      ...\r\n      public String getCustomerNumber();\r\n      ...\r\n    }\r\n    \r\n    public class Applicant{\r\n       ....\r\n       private Customer c;\r\n       public Customer getCustomer(){ return c; }\r\n       ...\r\n    }\r\n\r\nWhen presented with a list of customers or applicants I want a function which iterates the list and does something with the CustomerNumber.\r\n\r\nI&#39;ve tried overloading the function \r\n\r\n    public void processCustomerNumbers(List&lt;Customer&gt; custList)\r\n    ...\r\n    \r\n    public void processCustomerNumbers(List&lt;Applicant&gt; appList)\r\n    ...\r\n\r\nbut these are seen as duplicate methods... is there a nice way of doing this rather than just having 2 differently named functions?","title":"Overloading Java function with List&lt;&gt; parameter","body":"<p>I have 2 classes</p>\n\n<pre><code>public class Customer{\n  ...\n  public String getCustomerNumber();\n  ...\n}\n\npublic class Applicant{\n   ....\n   private Customer c;\n   public Customer getCustomer(){ return c; }\n   ...\n}\n</code></pre>\n\n<p>When presented with a list of customers or applicants I want a function which iterates the list and does something with the CustomerNumber.</p>\n\n<p>I've tried overloading the function </p>\n\n<pre><code>public void processCustomerNumbers(List&lt;Customer&gt; custList)\n...\n\npublic void processCustomerNumbers(List&lt;Applicant&gt; appList)\n...\n</code></pre>\n\n<p>but these are seen as duplicate methods... is there a nice way of doing this rather than just having 2 differently named functions?</p>\n"},{"tags":["java","android","android-recyclerview","android-room"],"owner":{"account_id":8936013,"reputation":27,"user_id":6666826,"display_name":"AMDIvailo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692254436,"creation_date":1692254436,"question_id":76919024,"body_markdown":"I&#39;m getting a mysterious crash, related to RecyclerView. It appeared in production and I can&#39;t reproduce it. It seems to occur very rarely and for some reason mostly on Samsung devices.\r\n\r\nHere is part of the stack trace:\r\n\r\n```\r\nFatal Exception: java.lang.IndexOutOfBoundsException\r\nInconsistency detected. Invalid item position 0(offset:0).state:4 androidx.recyclerview.widget.RecyclerView{39df388 VFED.V... ......ID 0,85-720,986 #7f0900c5 app:id/daily_tasks_recycler_view}, adapter:com.goaldriven.ui.dailytasks.DailyTaskAdapter@da45121, layout:androidx.recyclerview.widget.LinearLayoutManager@34c946, context:com.goaldriven.MainActivity@c4df606\r\n\r\nandroidx.recyclerview.widget.RecyclerView$Recycler.tryGetViewHolderForPositionByDeadline (RecyclerView.java:6183)\r\n```\r\n\r\nThis is the code where I&#39;m updating the ArrayList that&#39;s used by the adapter and then calling notifyDataSetChanged():\r\n\r\n```\r\npublic void loadDailyTasksFrom(LocalDate date, OnDailyTasksLoadedListener onDailyTasksLoadedListener) {\r\n    new Thread(() -&gt; {\r\n        if (backupHelper.isBackingUp()) {\r\n            return;\r\n        }\r\n        AppDatabase db = Room.databaseBuilder(getContext(), AppDatabase.class, &quot;app-database&quot;).build();\r\n        DailyTaskDao dailyTaskDao = db.dailyTaskDao();\r\n        dailyTasks.clear();\r\n        String dateSqlFormatted = String.format(&quot;%04d-%02d-%02d&quot;, date.getYear(), date.getMonthValue(), date.getDayOfMonth());\r\n        for (DailyTaskEntity dailyTaskEntity : dailyTaskDao.getDailyTasksFrom(dateSqlFormatted)) {\r\n            dailyTasks.add(DailyTask.fromEntity(dailyTaskEntity));\r\n        }\r\n        Handler handler = new Handler(getContext().getMainLooper());\r\n        handler.post(() -&gt; {\r\n            selectedDate = date;\r\n            updateHintState();\r\n            dailyTaskAdapter.notifyDataSetChanged();\r\n            if (onDailyTasksLoadedListener != null)\r\n                onDailyTasksLoadedListener.loaded();\r\n        });\r\n        db.close();\r\n    }).start();\r\n}\r\n```\r\n\r\nI&#39;m pretty new to android development and I don&#39;t even know if this is the right way of updating RecyclerView data. Can you guys spot something obvious that may be causing this crash?\r\n\r\nI can also provide the adapter code itself but I think it&#39;s irrelevant since it&#39;s a pretty standard adapter, populating a few text views.\r\n\r\nThank you in advance!\r\n","title":"Getting a RecyclerView crash in production - java.lang.IndexOutOfBoundsException Inconsistency detected","body":"<p>I'm getting a mysterious crash, related to RecyclerView. It appeared in production and I can't reproduce it. It seems to occur very rarely and for some reason mostly on Samsung devices.</p>\n<p>Here is part of the stack trace:</p>\n<pre><code>Fatal Exception: java.lang.IndexOutOfBoundsException\nInconsistency detected. Invalid item position 0(offset:0).state:4 androidx.recyclerview.widget.RecyclerView{39df388 VFED.V... ......ID 0,85-720,986 #7f0900c5 app:id/daily_tasks_recycler_view}, adapter:com.goaldriven.ui.dailytasks.DailyTaskAdapter@da45121, layout:androidx.recyclerview.widget.LinearLayoutManager@34c946, context:com.goaldriven.MainActivity@c4df606\n\nandroidx.recyclerview.widget.RecyclerView$Recycler.tryGetViewHolderForPositionByDeadline (RecyclerView.java:6183)\n</code></pre>\n<p>This is the code where I'm updating the ArrayList that's used by the adapter and then calling notifyDataSetChanged():</p>\n<pre><code>public void loadDailyTasksFrom(LocalDate date, OnDailyTasksLoadedListener onDailyTasksLoadedListener) {\n    new Thread(() -&gt; {\n        if (backupHelper.isBackingUp()) {\n            return;\n        }\n        AppDatabase db = Room.databaseBuilder(getContext(), AppDatabase.class, &quot;app-database&quot;).build();\n        DailyTaskDao dailyTaskDao = db.dailyTaskDao();\n        dailyTasks.clear();\n        String dateSqlFormatted = String.format(&quot;%04d-%02d-%02d&quot;, date.getYear(), date.getMonthValue(), date.getDayOfMonth());\n        for (DailyTaskEntity dailyTaskEntity : dailyTaskDao.getDailyTasksFrom(dateSqlFormatted)) {\n            dailyTasks.add(DailyTask.fromEntity(dailyTaskEntity));\n        }\n        Handler handler = new Handler(getContext().getMainLooper());\n        handler.post(() -&gt; {\n            selectedDate = date;\n            updateHintState();\n            dailyTaskAdapter.notifyDataSetChanged();\n            if (onDailyTasksLoadedListener != null)\n                onDailyTasksLoadedListener.loaded();\n        });\n        db.close();\n    }).start();\n}\n</code></pre>\n<p>I'm pretty new to android development and I don't even know if this is the right way of updating RecyclerView data. Can you guys spot something obvious that may be causing this crash?</p>\n<p>I can also provide the adapter code itself but I think it's irrelevant since it's a pretty standard adapter, populating a few text views.</p>\n<p>Thank you in advance!</p>\n"},{"tags":["java","audio","vlc","volume"],"owner":{"account_id":29236078,"reputation":1,"user_id":22398683,"display_name":"Kenemtef"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692254188,"creation_date":1692254188,"question_id":76918998,"body_markdown":"I&#39;m maintaining a java legacy project involving vlc.\r\n\r\nFor compatibility reasons, we have to do the following:\r\n\r\nWe place the VLC (almost) entire player in a subdirectory of our project, like this:\r\n[The VLC files](https://i.stack.imgur.com/MScBl.jpg)\r\n\r\nAnd from our java class constructor, we create a ProcessBuilder with the vlc.exe as command, and we create a Process by doing a ProcessBuilder.start().\r\n\r\nThen we create a printStream to send commands to vlc, and a BufferedReader to receive whatever vlc logs or prints on console. We also create and start a thread with that process.\r\n\r\nWhile running, we send commands to vlc with in.print() + in.flush(). Examples: &#171;in.print(&quot;video.mov\\n&quot;); in.flush();&#187; or &#171;in.print(&quot;play\\n&quot;); in.flush();&#187;\r\n\r\nAlmost all commands work fine. But the videos we are playing are playing sound at  0 volume. They are not muted, the volume value is zero. You can see in the following capture that the Windows Sound Control of the VLC player does not have the volume icon crossed out, it&#39;s just that the volume slider is at the zero step, at the bottom. But the sound, as represented by the little grey bar on the left of the slider, is being played:\r\n[Windows Sound Control](https://i.stack.imgur.com/w0RBq.jpg)\r\n\r\nThe one command that doesn&#39;t seem to work is setVolume. We try &#171;in.print(&quot;setVolume 100\\n&quot;); in.flush();&#187;. In the logs we always see an &quot;OK setVolume&quot;, but it&#39;s always followed by one or two &quot;simple volume changed: 0.000000, muting disabled&quot;, maybe not inmediately but less than 100 milliseconds and a few other instructions after the OK.\r\n\r\nIf we manually move the Windows Sound Slider, the audio volume adjusts accordingly, and in the logs we see one of this messages showing the volume on a per unit basis (example: We put the slider at the top, at the 100 step, we see at the log a &quot;simple volume changed: 1.000000, muting disabled&quot; line; if we put the slider at the 67 step, we see a &quot;simple volume changed: 0.670000, muting disabled&quot; line.\r\n\r\nWe have tried to send the setVolume command with a non-integer number also, for example &#171;in.print(&quot;setVolume 0.5&quot;); in.flush();&#187;, but it goes the same way: OK setVolume followed by simple volume changed: 0.000000\r\n\r\nIt&#39;s as if vlc reacted to a setVolume command by resetting the volume to zero again.\r\n\r\nHas anybody some clue about this behaviour of vlc?\r\n\r\nWe need to play the videos with sound. It&#39;s no use for us having to move the sound slider manually, we need to set the volume value from our application.\r\n\r\nThanks in advance.","title":"Can&#39;t set volume for vlc player","body":"<p>I'm maintaining a java legacy project involving vlc.</p>\n<p>For compatibility reasons, we have to do the following:</p>\n<p>We place the VLC (almost) entire player in a subdirectory of our project, like this:\n<a href=\"https://i.stack.imgur.com/MScBl.jpg\" rel=\"nofollow noreferrer\">The VLC files</a></p>\n<p>And from our java class constructor, we create a ProcessBuilder with the vlc.exe as command, and we create a Process by doing a ProcessBuilder.start().</p>\n<p>Then we create a printStream to send commands to vlc, and a BufferedReader to receive whatever vlc logs or prints on console. We also create and start a thread with that process.</p>\n<p>While running, we send commands to vlc with in.print() + in.flush(). Examples: «in.print(&quot;video.mov\\n&quot;); in.flush();» or «in.print(&quot;play\\n&quot;); in.flush();»</p>\n<p>Almost all commands work fine. But the videos we are playing are playing sound at  0 volume. They are not muted, the volume value is zero. You can see in the following capture that the Windows Sound Control of the VLC player does not have the volume icon crossed out, it's just that the volume slider is at the zero step, at the bottom. But the sound, as represented by the little grey bar on the left of the slider, is being played:\n<a href=\"https://i.stack.imgur.com/w0RBq.jpg\" rel=\"nofollow noreferrer\">Windows Sound Control</a></p>\n<p>The one command that doesn't seem to work is setVolume. We try «in.print(&quot;setVolume 100\\n&quot;); in.flush();». In the logs we always see an &quot;OK setVolume&quot;, but it's always followed by one or two &quot;simple volume changed: 0.000000, muting disabled&quot;, maybe not inmediately but less than 100 milliseconds and a few other instructions after the OK.</p>\n<p>If we manually move the Windows Sound Slider, the audio volume adjusts accordingly, and in the logs we see one of this messages showing the volume on a per unit basis (example: We put the slider at the top, at the 100 step, we see at the log a &quot;simple volume changed: 1.000000, muting disabled&quot; line; if we put the slider at the 67 step, we see a &quot;simple volume changed: 0.670000, muting disabled&quot; line.</p>\n<p>We have tried to send the setVolume command with a non-integer number also, for example «in.print(&quot;setVolume 0.5&quot;); in.flush();», but it goes the same way: OK setVolume followed by simple volume changed: 0.000000</p>\n<p>It's as if vlc reacted to a setVolume command by resetting the volume to zero again.</p>\n<p>Has anybody some clue about this behaviour of vlc?</p>\n<p>We need to play the videos with sound. It's no use for us having to move the sound slider manually, we need to set the volume value from our application.</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","spring","spring-boot","tomcat","websecurity"],"answers":[{"tags":[],"owner":{"account_id":2669677,"reputation":384,"user_id":2307340,"display_name":"Sherif Mo Shalaby"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692253980,"creation_date":1692253980,"answer_id":76918980,"question_id":76913955,"body_markdown":"- So after deeper investigation and changing the log level to trace\r\nWe found out that spring.security.oauth2.resourceserver.jwt.issuer-uri &amp; spring.security.oauth2.resourceserver.jwt.jwk-set-uri starting from spring-boot 2.1.8 is no longer supporting http protocol ( on prod deployments )\r\n\r\n- So on prod environment u must use https instead, other wise you will get this 401 error instantly","title":"Upgrading springboot version from 2.1.7 to 2.1.8 websecurity issue - 401","body":"<ul>\n<li><p>So after deeper investigation and changing the log level to trace\nWe found out that spring.security.oauth2.resourceserver.jwt.issuer-uri &amp; spring.security.oauth2.resourceserver.jwt.jwk-set-uri starting from spring-boot 2.1.8 is no longer supporting http protocol ( on prod deployments )</p>\n</li>\n<li><p>So on prod environment u must use https instead, other wise you will get this 401 error instantly</p>\n</li>\n</ul>\n"}],"owner":{"account_id":2669677,"reputation":384,"user_id":2307340,"display_name":"Sherif Mo Shalaby"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692253980,"creation_date":1692191730,"question_id":76913955,"body_markdown":"Upgrading from springboot v2.1.7 to v2.1.8, we hit an issue that all endpoints are giving now 401 without logging any errors.\r\n\r\n- To put in mind no other changes has been done, it`s only a version bump.\r\n\r\n- also to mention that locally when running the springboot app locally all run fine.\r\n and when deploying on the pre-production environment it just gives 401 for all endpoints \r\n\r\n      my machine is having ubuntu 22.04\r\n\r\n      pre-prod machine is having centos ~7.9\r\n\r\n      we are using java 8 and tomcat\r\n\r\nhere is how is our websecurity looks like ( this file hasn&#39;t been touched )\r\n```\r\n\r\nimport java.util.List;\r\n\r\nimport org.apache.log4j.Logger;\r\nimport org.springframework.beans.factory.annotation.Value;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\nimport org.springframework.security.config.annotation.web.builders.WebSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\r\n\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n\tprivate static final Logger logger = Logger.getLogger(WebSecurityConfig.class);\r\n\r\n\t@Value(&quot;${roles}&quot;)\r\n\tpublic String roles;\r\n\r\n\t@Value(&quot;${security.allowed.ip}&quot;)\r\n\tprivate String allowedIp;\r\n\r\n\t@Value(&quot;${web.security.config.web.ignore.matchers}&quot;)\r\n\tprivate List&lt;String&gt; webIgnoreMatchers;\r\n\r\n\t@Value(&quot;${web.security.config.http.cors.matchers}&quot;)\r\n\tprivate List&lt;String&gt; httpCorsMatchers;\r\n\r\n\t@Override\r\n\tpublic void configure(WebSecurity web) {\r\n\t\ttry {\r\n\t\t\tweb.ignoring()\r\n\t\t\t\t\t.antMatchers(webIgnoreMatchers.stream().toArray(String[]::new));\r\n\t\t} catch (Exception e) {\r\n\t\t\tlogger.error(e.getMessage(), e);\r\n\t\t}\r\n\t}\r\n\r\n\t@Override\r\n\tprotected void configure(HttpSecurity http) {\r\n\t\ttry {\r\n\t\t\thttp.csrf().disable().cors().and().authorizeRequests()\r\n\t\t\t\t\t.antMatchers(&quot;/someendpoint&quot;).hasIpAddress(allowedIp)\r\n\t\t\t\t\t.antMatchers(httpCorsMatchers.stream().toArray(String[]::new))\r\n\t\t\t\t\t.permitAll()\r\n\t\t\t\t\t.mvcMatchers(&quot;/**&quot;)\r\n\t\t\t\t\t.hasAnyAuthority(roles).anyRequest().authenticated().and()\r\n\t\t\t\t\t.oauth2ResourceServer().jwt().jwtAuthenticationConverter(new CustomJwtAuthenticationConverter());\r\n\t\t} catch (Exception e) {\r\n\t\t\tlogger.error(e.getMessage(), e);\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\r\n```","title":"Upgrading springboot version from 2.1.7 to 2.1.8 websecurity issue - 401","body":"<p>Upgrading from springboot v2.1.7 to v2.1.8, we hit an issue that all endpoints are giving now 401 without logging any errors.</p>\n<ul>\n<li><p>To put in mind no other changes has been done, it`s only a version bump.</p>\n</li>\n<li><p>also to mention that locally when running the springboot app locally all run fine.\nand when deploying on the pre-production environment it just gives 401 for all endpoints</p>\n<pre><code>my machine is having ubuntu 22.04\n\npre-prod machine is having centos ~7.9\n\nwe are using java 8 and tomcat\n</code></pre>\n</li>\n</ul>\n<p>here is how is our websecurity looks like ( this file hasn't been touched )</p>\n<pre><code>\nimport java.util.List;\n\nimport org.apache.log4j.Logger;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.builders.WebSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\n\n@Configuration\n@EnableWebSecurity\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\n\n    private static final Logger logger = Logger.getLogger(WebSecurityConfig.class);\n\n    @Value(&quot;${roles}&quot;)\n    public String roles;\n\n    @Value(&quot;${security.allowed.ip}&quot;)\n    private String allowedIp;\n\n    @Value(&quot;${web.security.config.web.ignore.matchers}&quot;)\n    private List&lt;String&gt; webIgnoreMatchers;\n\n    @Value(&quot;${web.security.config.http.cors.matchers}&quot;)\n    private List&lt;String&gt; httpCorsMatchers;\n\n    @Override\n    public void configure(WebSecurity web) {\n        try {\n            web.ignoring()\n                    .antMatchers(webIgnoreMatchers.stream().toArray(String[]::new));\n        } catch (Exception e) {\n            logger.error(e.getMessage(), e);\n        }\n    }\n\n    @Override\n    protected void configure(HttpSecurity http) {\n        try {\n            http.csrf().disable().cors().and().authorizeRequests()\n                    .antMatchers(&quot;/someendpoint&quot;).hasIpAddress(allowedIp)\n                    .antMatchers(httpCorsMatchers.stream().toArray(String[]::new))\n                    .permitAll()\n                    .mvcMatchers(&quot;/**&quot;)\n                    .hasAnyAuthority(roles).anyRequest().authenticated().and()\n                    .oauth2ResourceServer().jwt().jwtAuthenticationConverter(new CustomJwtAuthenticationConverter());\n        } catch (Exception e) {\n            logger.error(e.getMessage(), e);\n        }\n    }\n\n}\n\n</code></pre>\n"},{"tags":["java","amazon-dynamodb"],"owner":{"account_id":4873288,"reputation":293,"user_id":3929110,"accept_rate":67,"display_name":"explorer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692253039,"creation_date":1692253039,"question_id":76918896,"body_markdown":"This is my table stucture. \r\n\r\n    @DynamoDBTable(tableName=&quot;my_table&quot;)\r\n    public class MyTable {\r\n        private Integer account_id;\r\n\r\n        // account_info is a list of kind [1234, &quot;account_name&quot;, 0.55]\r\n        private List&lt;Object&gt; account_info; \r\n\r\n    @DynamoDBHashKey()\r\n    public Integer getAccount_id() { \r\n        return account_id; \r\n    }\r\n    @DynamoDBAttribute\r\n    public List&lt;Object&gt; getAccount_info() {\r\n        return account_info;\r\n    } \r\n\r\nI am quite new to java and not able to understand how to write a mapper class for this. All the examples I have seem map it to a list of hashmap like [this][1] \r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/54992305/dynamodb-mapper-annotation-for-object-which-has-list-of-another-object","title":"Java - Retrive a list of heterogeneous data types from dynamodb","body":"<p>This is my table stucture.</p>\n<pre><code>@DynamoDBTable(tableName=&quot;my_table&quot;)\npublic class MyTable {\n    private Integer account_id;\n\n    // account_info is a list of kind [1234, &quot;account_name&quot;, 0.55]\n    private List&lt;Object&gt; account_info; \n\n@DynamoDBHashKey()\npublic Integer getAccount_id() { \n    return account_id; \n}\n@DynamoDBAttribute\npublic List&lt;Object&gt; getAccount_info() {\n    return account_info;\n} \n</code></pre>\n<p>I am quite new to java and not able to understand how to write a mapper class for this. All the examples I have seem map it to a list of hashmap like <a href=\"https://stackoverflow.com/questions/54992305/dynamodb-mapper-annotation-for-object-which-has-list-of-another-object\">this</a></p>\n"},{"tags":["java","android","firebase","google-cloud-firestore"],"answers":[{"tags":[],"owner":{"account_id":426109,"reputation":302042,"user_id":807126,"display_name":"Doug Stevenson"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692252307,"creation_date":1692191435,"answer_id":76913909,"question_id":76913809,"body_markdown":"Your screenshot shows a collection called &quot;messages&quot; with three documents that don&#39;t actually exist.  You can tell they don&#39;t exist because they are in italics.  However, the console still shows them because they have nested subcollections (&quot;shivang&quot;) that still exist - the display of the missing document is required so that you can still see and navigate into that data.\r\n\r\nDeleting a document does not delete any nested subcollections.  You have to delete each nested document individually.\r\n\r\n[Read the documentation about this][1].\r\n\r\nSee also:\r\n\r\n- https://stackoverflow.com/questions/48137582/firestore-db-documents-shown-in-italics\r\n- https://stackoverflow.com/questions/52826365/parent-document-is-being-marked-as-deleted-italics-by-default\r\n- https://stackoverflow.com/questions/66954596/firestore-cant-delete-document\r\n\r\n  [1]: https://firebase.google.com/docs/firestore/using-console#non-existent_ancestor_documents","title":"document not deleting from Firebase Firestore in android Studio java","body":"<p>Your screenshot shows a collection called &quot;messages&quot; with three documents that don't actually exist.  You can tell they don't exist because they are in italics.  However, the console still shows them because they have nested subcollections (&quot;shivang&quot;) that still exist - the display of the missing document is required so that you can still see and navigate into that data.</p>\n<p>Deleting a document does not delete any nested subcollections.  You have to delete each nested document individually.</p>\n<p><a href=\"https://firebase.google.com/docs/firestore/using-console#non-existent_ancestor_documents\" rel=\"nofollow noreferrer\">Read the documentation about this</a>.</p>\n<p>See also:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/48137582/firestore-db-documents-shown-in-italics\">Firestore DB - documents shown in italics</a></li>\n<li><a href=\"https://stackoverflow.com/questions/52826365/parent-document-is-being-marked-as-deleted-italics-by-default\">Parent document is being marked as &quot;deleted&quot; (italics) by default</a></li>\n<li><a href=\"https://stackoverflow.com/questions/66954596/firestore-cant-delete-document\">Firestore: cant delete document</a></li>\n</ul>\n"}],"owner":{"account_id":29237004,"reputation":1,"user_id":22399444,"display_name":"Achal Jaiswal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692252307,"creation_date":1692190823,"question_id":76913809,"body_markdown":"I am trying to delete user document from the firebase firestore , but neither deleting nor giving error, Although  task.isSuccessfull is working deleted toast is showing but data is not deleted in firestore.\r\n\r\nBelow is my database and code.\r\n\r\n    void clearAll() {\r\n    \r\n        FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n    \r\n    \r\n    \r\n     db.collection(&quot;messeges&quot;).document(firebaseuser.getUid).delete().addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\r\n            @Override\r\n            public void onComplete(@NonNull Task&lt;Void&gt; task) {\r\n                if(task.isSuccessful()){\r\n                    Toast.makeText(MainActivity.this, &quot;Deleted&quot;, Toast.LENGTH_SHORT).show();\r\n                }\r\n                else{\r\n                    Toast.makeText(MainActivity.this, &quot;Not Deleted&quot;, Toast.LENGTH_SHORT).show();\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/JLH3z.png","title":"document not deleting from Firebase Firestore in android Studio java","body":"<p>I am trying to delete user document from the firebase firestore , but neither deleting nor giving error, Although  task.isSuccessfull is working deleted toast is showing but data is not deleted in firestore.</p>\n<p>Below is my database and code.</p>\n<pre><code>void clearAll() {\n\n    FirebaseFirestore db = FirebaseFirestore.getInstance();\n\n\n\n db.collection(&quot;messeges&quot;).document(firebaseuser.getUid).delete().addOnCompleteListener(new OnCompleteListener&lt;Void&gt;() {\n        @Override\n        public void onComplete(@NonNull Task&lt;Void&gt; task) {\n            if(task.isSuccessful()){\n                Toast.makeText(MainActivity.this, &quot;Deleted&quot;, Toast.LENGTH_SHORT).show();\n            }\n            else{\n                Toast.makeText(MainActivity.this, &quot;Not Deleted&quot;, Toast.LENGTH_SHORT).show();\n            }\n        }\n    });\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/JLH3z.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JLH3z.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","sftp","ftp-client","ftp4j"],"answers":[{"tags":[],"owner":{"account_id":453710,"reputation":192103,"user_id":850848,"accept_rate":80,"display_name":"Martin Prikryl"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690983239,"creation_date":1690983239,"answer_id":76820440,"question_id":76819884,"body_markdown":"FTPES is not SFTP. You cannot use FTP(E(S)) library to connect to an SFTP server. FTP and SFTP are two completely different protocols.\r\n\r\nYou have to use an SFTP library. See https://stackoverflow.com/q/2346764/850848","title":"Problems with connecting with it.sauronsoftware.ftp4j.FTPClient to SFTP","body":"<p>FTPES is not SFTP. You cannot use FTP(E(S)) library to connect to an SFTP server. FTP and SFTP are two completely different protocols.</p>\n<p>You have to use an SFTP library. See <a href=\"https://stackoverflow.com/q/2346764/850848\">Java SFTP Transfer Library</a></p>\n"}],"owner":{"account_id":22540680,"reputation":1,"user_id":16731272,"display_name":"SAFSAF SAFSAF"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692252303,"creation_date":1690979209,"question_id":76819884,"body_markdown":"I am having problems connecting with `it.sauronsoftware.ftp4j.FTPClient`.\r\n\r\nI want to use SFTP but always get errors.\r\n\r\n* If I use:\r\n    ```\r\n    sftpClient.setSecurity(FTPClient.SECURITY_FTPES)\r\n    ```\r\n\r\n    I get:\r\n    `ERROR c.l.datamanager.Ftp4jFTPTask - it.sauronsoftware.ftp4j.FTPIllegalReplyException\r\n    ERROR c.l.datamanager.Ftp4jFTPTask - java.lang.IllegalStateException: Client not connected`\r\n\r\n* If I use\r\n    ```\r\n    sftpClient.setSecurity(FTPClient.SECURITY_FTPS);\r\n    ```\r\n\r\n    I get:\r\n    `ERROR c.l.datamanager.Ftp4jFTPTask - javax.net.ssl.SSLException: Unsupported or unrecognized SSL message\r\nc.l.datamanager.Ftp4jFTPTask - java.lang.IllegalStateException: Client not connected`\r\n\r\nPlease let me know how I can use SFTP in `it.sauronsoftware.ftp4j.FTPClient`.\r\n","title":"Problems with connecting with it.sauronsoftware.ftp4j.FTPClient to SFTP","body":"<p>I am having problems connecting with <code>it.sauronsoftware.ftp4j.FTPClient</code>.</p>\n<p>I want to use SFTP but always get errors.</p>\n<ul>\n<li><p>If I use:</p>\n<pre><code>sftpClient.setSecurity(FTPClient.SECURITY_FTPES)\n</code></pre>\n<p>I get:\n<code>ERROR c.l.datamanager.Ftp4jFTPTask - it.sauronsoftware.ftp4j.FTPIllegalReplyException ERROR c.l.datamanager.Ftp4jFTPTask - java.lang.IllegalStateException: Client not connected</code></p>\n</li>\n<li><p>If I use</p>\n<pre><code>sftpClient.setSecurity(FTPClient.SECURITY_FTPS);\n</code></pre>\n<p>I get:\n<code>ERROR c.l.datamanager.Ftp4jFTPTask - javax.net.ssl.SSLException: Unsupported or unrecognized SSL message c.l.datamanager.Ftp4jFTPTask - java.lang.IllegalStateException: Client not connected</code></p>\n</li>\n</ul>\n<p>Please let me know how I can use SFTP in <code>it.sauronsoftware.ftp4j.FTPClient</code>.</p>\n"},{"tags":["java","eclipse-plugin","osgi-bundle","eclipse-jdt"],"answers":[{"comments":[{"owner":{"account_id":214240,"reputation":687,"user_id":468101,"accept_rate":67,"display_name":"Dreiven"},"score":0,"creation_date":1422982098,"post_id":28238437,"comment_id":44959724,"body_markdown":"org.w3c.dom.events (3.0.0.draft...) is available and checked both in the target plattforms content tab and in the run configuration Plug-Ins tab, when I manually select the plugins. So I don&#39;t understand why it can&#39;t be resolved?","body":"org.w3c.dom.events (3.0.0.draft...) is available and checked both in the target plattforms content tab and in the run configuration Plug-Ins tab, when I manually select the plugins. So I don&#39;t understand why it can&#39;t be resolved?"}],"tags":[],"owner":{"account_id":3159259,"reputation":109678,"user_id":2670892,"display_name":"greg-449"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1422629505,"creation_date":1422629505,"answer_id":28238437,"question_id":28238134,"body_markdown":"It is just `org.w3c.dom.events` that can&#39;t be resolved. \r\n\r\nYou should have a `org.w3c.dom.events` plugin.\r\n\r\nIf you are setting up a target platform for plugin development the easiest thing to use is everything in the &#39;Eclipse SDK&#39; download form http://download.eclipse.org/eclipse/downloads/","title":"org.osgi.framework.BundleException: Could not resolve module","body":"<p>It is just <code>org.w3c.dom.events</code> that can't be resolved. </p>\n\n<p>You should have a <code>org.w3c.dom.events</code> plugin.</p>\n\n<p>If you are setting up a target platform for plugin development the easiest thing to use is everything in the 'Eclipse SDK' download form <a href=\"http://download.eclipse.org/eclipse/downloads/\" rel=\"nofollow\">http://download.eclipse.org/eclipse/downloads/</a></p>\n"},{"tags":[],"owner":{"account_id":933685,"reputation":230,"user_id":963029,"display_name":"Alexander Baier"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1439889020,"creation_date":1439889020,"answer_id":32068157,"question_id":28238134,"body_markdown":"I faced the same problem. It turned out, I was missing the org.w3c.dom.events plugin in my dependencies in my product file or launch configuration.","title":"org.osgi.framework.BundleException: Could not resolve module","body":"<p>I faced the same problem. It turned out, I was missing the org.w3c.dom.events plugin in my dependencies in my product file or launch configuration.</p>\n"},{"tags":[],"owner":{"account_id":2374153,"reputation":884,"user_id":2078000,"display_name":"mnutsch"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1614013296,"creation_date":1614013296,"answer_id":66320098,"question_id":28238134,"body_markdown":"I had this issue despite the module being present. I found that it was a caching problem in Windows. \r\n\r\nI deleted the contents of: C:/users/UserName/.eclipse\r\n\r\nAfterwards, Eclipse started fine.","title":"org.osgi.framework.BundleException: Could not resolve module","body":"<p>I had this issue despite the module being present. I found that it was a caching problem in Windows.</p>\n<p>I deleted the contents of: C:/users/UserName/.eclipse</p>\n<p>Afterwards, Eclipse started fine.</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":3,"creation_date":1648632214,"post_id":71672072,"comment_id":126671390,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/71672072/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":16493874,"reputation":51,"user_id":11916929,"display_name":"deepak yadav"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1648736006,"creation_date":1648619071,"answer_id":71672072,"question_id":28238134,"body_markdown":"for JMC 8 The minimum JDK requirement is version=8, for JMC 8.1 The minimum JDK requirement is version=11\r\n\r\nyou are facing this issue because you are trying to open JMC 8.1 with JDK 8. Install JMC version 8 then your issue will resolve.","title":"org.osgi.framework.BundleException: Could not resolve module","body":"<p>for JMC 8 The minimum JDK requirement is version=8, for JMC 8.1 The minimum JDK requirement is version=11</p>\n<p>you are facing this issue because you are trying to open JMC 8.1 with JDK 8. Install JMC version 8 then your issue will resolve.</p>\n"},{"tags":[],"owner":{"account_id":28662957,"reputation":14,"user_id":21947535,"display_name":"jnrdvlpr"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1692252294,"creation_date":1692186283,"answer_id":76913236,"question_id":28238134,"body_markdown":"Had a similar problem for a different plugin. \r\n\r\nHere is my error:\r\n\r\n**eclipse org.osgi.framework.BundleException: Could not resolve module: oracle.eclipse.tools.jaxrs.v11**\r\n\r\nI use java 8 and 17 together in my system. So when I add the below field to my eclipse.ini file, it solved the problem for me:\r\n```none\r\n-vm\r\n\r\nC:/Program Files/Java/jdk1.8.0_341/bin/javaw.exe (That should be your own jdk path)\r\n```\r\nI hope it helps people who are currently dealing with similar issues.","title":"org.osgi.framework.BundleException: Could not resolve module","body":"<p>Had a similar problem for a different plugin.</p>\n<p>Here is my error:</p>\n<p><strong>eclipse org.osgi.framework.BundleException: Could not resolve module: oracle.eclipse.tools.jaxrs.v11</strong></p>\n<p>I use java 8 and 17 together in my system. So when I add the below field to my eclipse.ini file, it solved the problem for me:</p>\n<pre class=\"lang-none prettyprint-override\"><code>-vm\n\nC:/Program Files/Java/jdk1.8.0_341/bin/javaw.exe (That should be your own jdk path)\n</code></pre>\n<p>I hope it helps people who are currently dealing with similar issues.</p>\n"}],"owner":{"account_id":214240,"reputation":687,"user_id":468101,"accept_rate":67,"display_name":"Dreiven"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54664,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":5,"score":8,"last_activity_date":1692252294,"creation_date":1422628474,"question_id":28238134,"body_markdown":"I&#39;m trying to setup my eclipse plugin development target and receive the following error multiple times:\r\n\r\n    !ENTRY org.eclipse.e4.ui.css.swt 4 0 2015-01-30 15:15:06.879\r\n    !MESSAGE FrameworkEvent ERROR\r\n    !STACK 0\r\n    org.osgi.framework.BundleException: Could not resolve module: org.eclipse.e4.ui.css.swt [955]\r\n    Unresolved requirement: Require-Bundle: org.eclipse.e4.ui.css.core; bundle-version=&quot;0.9.0&quot;\r\n    -&gt; Bundle-SymbolicName: org.eclipse.e4.ui.css.core; bundle-version=&quot;0.10.100.v20140424-2042&quot;; singleton:=&quot;true&quot;\r\n       org.eclipse.e4.ui.css.core [1134]\r\n         Unresolved requirement: Require-Bundle: org.apache.batik.css; bundle-version=&quot;1.7.0&quot;\r\n           -&gt; Bundle-SymbolicName: org.apache.batik.css; bundle-version=&quot;1.7.0.v201011041433&quot;\r\n              org.apache.batik.css [1177]\r\n                Unresolved requirement: Import-Package: org.w3c.dom.events; version=&quot;[3.0.0,4.0.0)&quot;\r\n\r\nDoes this mean that none of these plugins can be resolved, or just not the last one `org.w3c.dom.events` or is this a result from the mismatch of the bundle versions of `org.eclipse.e4.ui.css.core`?","title":"org.osgi.framework.BundleException: Could not resolve module","body":"<p>I'm trying to setup my eclipse plugin development target and receive the following error multiple times:</p>\n\n<pre><code>!ENTRY org.eclipse.e4.ui.css.swt 4 0 2015-01-30 15:15:06.879\n!MESSAGE FrameworkEvent ERROR\n!STACK 0\norg.osgi.framework.BundleException: Could not resolve module: org.eclipse.e4.ui.css.swt [955]\nUnresolved requirement: Require-Bundle: org.eclipse.e4.ui.css.core; bundle-version=\"0.9.0\"\n-&gt; Bundle-SymbolicName: org.eclipse.e4.ui.css.core; bundle-version=\"0.10.100.v20140424-2042\"; singleton:=\"true\"\n   org.eclipse.e4.ui.css.core [1134]\n     Unresolved requirement: Require-Bundle: org.apache.batik.css; bundle-version=\"1.7.0\"\n       -&gt; Bundle-SymbolicName: org.apache.batik.css; bundle-version=\"1.7.0.v201011041433\"\n          org.apache.batik.css [1177]\n            Unresolved requirement: Import-Package: org.w3c.dom.events; version=\"[3.0.0,4.0.0)\"\n</code></pre>\n\n<p>Does this mean that none of these plugins can be resolved, or just not the last one <code>org.w3c.dom.events</code> or is this a result from the mismatch of the bundle versions of <code>org.eclipse.e4.ui.css.core</code>?</p>\n"},{"tags":["java","apache-kafka","kafka-consumer-api"],"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1540051559,"post_id":52888094,"comment_id":92725881,"body_markdown":"Why is the needed output tabbed differently?","body":"Why is the needed output tabbed differently?"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1540051654,"post_id":52888094,"comment_id":92725907,"body_markdown":"The Kafka offset command also runs Java (actually Scala), and the source code for it is on Github, if you just want to reproduce it","body":"The Kafka offset command also runs Java (actually Scala), and the source code for it is on Github, if you just want to reproduce it"},{"owner":{"account_id":2296191,"reputation":2082,"user_id":2017567,"display_name":"Christophe Quintard"},"score":0,"creation_date":1668504888,"post_id":52888094,"comment_id":131415469,"body_markdown":"Does this answer your question? [How to get kafka consume lag in java program](https://stackoverflow.com/questions/42201616/how-to-get-kafka-consume-lag-in-java-program)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/42201616/how-to-get-kafka-consume-lag-in-java-program\">How to get kafka consume lag in java program</a>"}],"answers":[{"comments":[{"owner":{"account_id":3175948,"reputation":74316,"user_id":2683814,"accept_rate":100,"display_name":"s7vr"},"score":0,"creation_date":1540260034,"post_id":52909914,"comment_id":92789057,"body_markdown":"Does consumer.endOffsets competes with the other consumers from different group when it request end offsets ? Is asking for latest offset is same as consuming messages behind the scenes ? Does it cause rebalancing ?Also see if you would be interested in answering question [here](https://stackoverflow.com/q/52864617/2683814). Appreciate the reply. Thanks!","body":"Does consumer.endOffsets competes with the other consumers from different group when it request end offsets ? Is asking for latest offset is same as consuming messages behind the scenes ? Does it cause rebalancing ?Also see if you would be interested in answering question <a href=\"https://stackoverflow.com/q/52864617/2683814\">here</a>. Appreciate the reply. Thanks!"},{"owner":{"account_id":1964595,"reputation":25422,"user_id":1765189,"display_name":"Mickael Maison"},"score":1,"creation_date":1540284958,"post_id":52909914,"comment_id":92797994,"body_markdown":"`endOffsets()` does not require a consumer group so no rebalancing. Also it does not involve consuming any messages. That&#39;s why it&#39;s way more efficient than the logic you posted.","body":"<code>endOffsets()</code> does not require a consumer group so no rebalancing. Also it does not involve consuming any messages. That&#39;s why it&#39;s way more efficient than the logic you posted."},{"owner":{"account_id":3175948,"reputation":74316,"user_id":2683814,"accept_rate":100,"display_name":"s7vr"},"score":0,"creation_date":1540289998,"post_id":52909914,"comment_id":92801316,"body_markdown":"Thanks Mickael. What about `listConsumerGroupOffsets` ? I&#39;ve very busy performance sensitive topic with 10 partition with 10+ consumers each consuming messages from application A. Will be affecting their processing anyways when I made `listConsumerGroupOffsets` request from application  B ? What other things if any I should be mindful when collecting offset metrics ? Thanks!","body":"Thanks Mickael. What about <code>listConsumerGroupOffsets</code> ? I&#39;ve very busy performance sensitive topic with 10 partition with 10+ consumers each consuming messages from application A. Will be affecting their processing anyways when I made <code>listConsumerGroupOffsets</code> request from application  B ? What other things if any I should be mindful when collecting offset metrics ? Thanks!"},{"owner":{"account_id":1964595,"reputation":25422,"user_id":1765189,"display_name":"Mickael Maison"},"score":0,"creation_date":1540295594,"post_id":52909914,"comment_id":92804726,"body_markdown":"`listConsumerGroupOffsets()` simply sends an `OffsetFetch` request. It won&#39;t affect existing groups and its performance cost is insignificant.","body":"<code>listConsumerGroupOffsets()</code> simply sends an <code>OffsetFetch</code> request. It won&#39;t affect existing groups and its performance cost is insignificant."}],"tags":[],"owner":{"account_id":1964595,"reputation":25422,"user_id":1765189,"display_name":"Mickael Maison"},"comment_count":4,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1540067909,"creation_date":1540067909,"answer_id":52909914,"question_id":52888094,"body_markdown":"To reproduce the `kafka-consumer-groups` functionality, you need both a Consumer and an AdminClient instance.\r\n\r\nFirst, use the AdminClient, you can call [`listConsumerGroupOffsets()`][2] to retrieve the list of topic-partitions and the committed offsets for a specific group.\r\n\r\nThen use a Consumer to get the End offsets for these partitions. The method you used is inefficient, there&#39;s no need to assign and seek to the end offset. You can simply call [`endOffsets()`][1].\r\n\r\nThat is enough for reproducing the data contained in your screenshot.\r\n\r\n`kafka-consumer-groups` also uses [`AdminClient.describeConsumerGroups()`][3] to print the group member assigned (if any) to each partition.\r\n\r\n\r\n  [1]: http://kafka.apache.org/20/javadoc/org/apache/kafka/clients/consumer/KafkaConsumer.html#endOffsets-java.util.Collection-\r\n  [2]: http://kafka.apache.org/20/javadoc/org/apache/kafka/clients/admin/AdminClient.html#listConsumerGroupOffsets-java.lang.String-\r\n  [3]: http://kafka.apache.org/20/javadoc/org/apache/kafka/clients/admin/AdminClient.html#describeConsumerGroups-java.util.Collection-","title":"how to get kafka lag using java","body":"<p>To reproduce the <code>kafka-consumer-groups</code> functionality, you need both a Consumer and an AdminClient instance.</p>\n\n<p>First, use the AdminClient, you can call <a href=\"http://kafka.apache.org/20/javadoc/org/apache/kafka/clients/admin/AdminClient.html#listConsumerGroupOffsets-java.lang.String-\" rel=\"noreferrer\"><code>listConsumerGroupOffsets()</code></a> to retrieve the list of topic-partitions and the committed offsets for a specific group.</p>\n\n<p>Then use a Consumer to get the End offsets for these partitions. The method you used is inefficient, there's no need to assign and seek to the end offset. You can simply call <a href=\"http://kafka.apache.org/20/javadoc/org/apache/kafka/clients/consumer/KafkaConsumer.html#endOffsets-java.util.Collection-\" rel=\"noreferrer\"><code>endOffsets()</code></a>.</p>\n\n<p>That is enough for reproducing the data contained in your screenshot.</p>\n\n<p><code>kafka-consumer-groups</code> also uses <a href=\"http://kafka.apache.org/20/javadoc/org/apache/kafka/clients/admin/AdminClient.html#describeConsumerGroups-java.util.Collection-\" rel=\"noreferrer\"><code>AdminClient.describeConsumerGroups()</code></a> to print the group member assigned (if any) to each partition.</p>\n"},{"tags":[],"owner":{"account_id":4496522,"reputation":563,"user_id":3656203,"display_name":"GSK"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1575441580,"creation_date":1575441580,"answer_id":59170238,"question_id":52888094,"body_markdown":"You can have LAG by getting EndOffset from consumer\r\n\r\n    Set&lt;TopicPartition&gt; partitionSet = consumer.assignment();\r\n    Map&lt;TopicPartition, Long&gt; endOffsets =consumer.endOffsets(consumer.assignment());\r\n\r\nthen iterate where over set\r\n\r\n    for(TopicPartition tp : partitionSet) { LOG.info(&quot;Topic :: {} ,EndOffset :: {}, currentOffset {}&quot;,tp.topic(),beginningOffsets.get(tp),endOffsets.get(tp), consumer.position(tp)); }\r\n\r\nconsumer.position(tp) -- will get you current offset, subtract this from endoffset , you get LAG\r\n","title":"how to get kafka lag using java","body":"<p>You can have LAG by getting EndOffset from consumer</p>\n\n<pre><code>Set&lt;TopicPartition&gt; partitionSet = consumer.assignment();\nMap&lt;TopicPartition, Long&gt; endOffsets =consumer.endOffsets(consumer.assignment());\n</code></pre>\n\n<p>then iterate where over set</p>\n\n<pre><code>for(TopicPartition tp : partitionSet) { LOG.info(\"Topic :: {} ,EndOffset :: {}, currentOffset {}\",tp.topic(),beginningOffsets.get(tp),endOffsets.get(tp), consumer.position(tp)); }\n</code></pre>\n\n<p>consumer.position(tp) -- will get you current offset, subtract this from endoffset , you get LAG</p>\n"},{"comments":[{"owner":{"account_id":16657935,"reputation":834,"user_id":13927534,"display_name":"Miss Skooter"},"score":0,"creation_date":1692364841,"post_id":76914350,"comment_id":135616866,"body_markdown":"Hello! It would be great if you could add more details to explain how this code helps answer the question. - [from review](https://stackoverflow.com/review/late-answers/34851743)","body":"Hello! It would be great if you could add more details to explain how this code helps answer the question. - <a href=\"https://stackoverflow.com/review/late-answers/34851743\">from review</a>"}],"tags":[],"owner":{"account_id":29237514,"reputation":1,"user_id":22399844,"display_name":"user22399844"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692252239,"creation_date":1692194569,"answer_id":76914350,"question_id":52888094,"body_markdown":"```java\r\nprivate static long calculateTopicLag(Properties properties, String topic, String consumerGroup) {\r\n        try (AdminClient adminClient = AdminClient.create(properties)) {\r\n            ListConsumerGroupOffsetsResult groupOffsetsResult = adminClient.listConsumerGroupOffsets(consumerGroup);\r\n            Map&lt;TopicPartition, OffsetAndMetadata&gt; offsets = groupOffsetsResult.partitionsToOffsetAndMetadata().get();\r\n\r\n            long topicLag = 0;\r\n            for (Map.Entry&lt;TopicPartition, OffsetAndMetadata&gt; entry : offsets.entrySet()) {\r\n                TopicPartition topicPartition = entry.getKey();\r\n                long consumerOffset = entry.getValue().offset();\r\n\r\n                KafkaConsumer&lt;?, ?&gt; consumer = new KafkaConsumer&lt;&gt;(properties);\r\n                consumer.assign(Collections.singletonList(topicPartition));\r\n                long endOffset = consumer.endOffsets(Collections.singletonList(topicPartition)).get(topicPartition);\r\n                consumer.close();\r\n\r\n                long partitionLag = endOffset - consumerOffset;\r\n                topicLag += partitionLag;\r\n            }\r\n\r\n            return topicLag;\r\n        } catch (InterruptedException | ExecutionException e) {\r\n            e.printStackTrace();\r\n            return -1;\r\n        }\r\n    }\r\n```","title":"how to get kafka lag using java","body":"<pre class=\"lang-java prettyprint-override\"><code>private static long calculateTopicLag(Properties properties, String topic, String consumerGroup) {\n        try (AdminClient adminClient = AdminClient.create(properties)) {\n            ListConsumerGroupOffsetsResult groupOffsetsResult = adminClient.listConsumerGroupOffsets(consumerGroup);\n            Map&lt;TopicPartition, OffsetAndMetadata&gt; offsets = groupOffsetsResult.partitionsToOffsetAndMetadata().get();\n\n            long topicLag = 0;\n            for (Map.Entry&lt;TopicPartition, OffsetAndMetadata&gt; entry : offsets.entrySet()) {\n                TopicPartition topicPartition = entry.getKey();\n                long consumerOffset = entry.getValue().offset();\n\n                KafkaConsumer&lt;?, ?&gt; consumer = new KafkaConsumer&lt;&gt;(properties);\n                consumer.assign(Collections.singletonList(topicPartition));\n                long endOffset = consumer.endOffsets(Collections.singletonList(topicPartition)).get(topicPartition);\n                consumer.close();\n\n                long partitionLag = endOffset - consumerOffset;\n                topicLag += partitionLag;\n            }\n\n            return topicLag;\n        } catch (InterruptedException | ExecutionException e) {\n            e.printStackTrace();\n            return -1;\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":14567699,"reputation":31,"user_id":10521876,"display_name":"Ardiel"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4525,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1692252239,"creation_date":1539935857,"question_id":52888094,"body_markdown":"I have currently developed a code that would display the topic, partition, and log offset. But I am currently stuck on how to get the Lag of a partition. I know that there is a kafka offset command that does this function but what I need is a java code. \r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        System.out.println(&quot;START CONSUMER&quot;);final Properties props = new Properties();\r\n        props.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class.getName());\r\n        props.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class.getName());\r\n        props.put(CommonClientConfigs.SECURITY_PROTOCOL_CONFIG, &quot;SASL_PLAINTEXT&quot;);\r\n        props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, BOOTSTRAP_SERVERS);\r\n        props.put(ConsumerConfig.GROUP_ID_CONFIG, GROUPID);\r\n        props.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, &quot;latest&quot;);\r\n        props.put(ConsumerConfig.ENABLE_AUTO_COMMIT_CONFIG, &quot;false&quot;);\r\n\r\n        // Create the consumer using props.\r\n        final Consumer&lt;Long, String&gt; consumer =  new KafkaConsumer&lt;&gt;(props);\r\n       \r\n        // Subscribe to the topic.\r\n        int i = 0;\r\n        ArrayList&lt;TopicPartition&gt; partitions = new ArrayList&lt;TopicPartition&gt;();\r\n        for (i=0;i&lt;consumer.partitionsFor(TOPIC).size();i++)\r\n        {\r\n            TopicPartition partitiontemp = new TopicPartition(TOPIC, i);\r\n            partitions.add(partitiontemp);\r\n        }\r\n        consumer.assign(partitions);\r\n        consumer.seekToEnd(partitions);\r\n\r\n        for (i=0;i&lt;consumer.partitionsFor(TOPIC).size();i++)\r\n        {\r\n            System.out.printf(&quot;Topic: %s partitionID: %d log offset: %d \\n&quot;, TOPIC, i, consumer.position(partitions.get(i)));\r\n        }\r\n\r\n        System.out.printf(&quot;CREATE CONSUMER DONE&quot;);\r\n        consumer.close();\r\n\r\n\r\n![This is the output of my code][1]\r\n\r\nWhat I need to do is to output the topic, partition, current offset, log offset, and lag. How can I get the lag for my code or how can I get the current offset for my code. (see image for needed output).\r\n\r\n![Needed output][2]\r\n\r\nNOTE: I cannot use the (foreach record) functionality because I must not read each record in the input file.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/yo5UZ.png\r\n  [2]: https://i.stack.imgur.com/oRsH4.png","title":"how to get kafka lag using java","body":"<p>I have currently developed a code that would display the topic, partition, and log offset. But I am currently stuck on how to get the Lag of a partition. I know that there is a kafka offset command that does this function but what I need is a java code. </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) throws Exception {\n    System.out.println(\"START CONSUMER\");final Properties props = new Properties();\n    props.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class.getName());\n    props.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class.getName());\n    props.put(CommonClientConfigs.SECURITY_PROTOCOL_CONFIG, \"SASL_PLAINTEXT\");\n    props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, BOOTSTRAP_SERVERS);\n    props.put(ConsumerConfig.GROUP_ID_CONFIG, GROUPID);\n    props.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, \"latest\");\n    props.put(ConsumerConfig.ENABLE_AUTO_COMMIT_CONFIG, \"false\");\n\n    // Create the consumer using props.\n    final Consumer&lt;Long, String&gt; consumer =  new KafkaConsumer&lt;&gt;(props);\n\n    // Subscribe to the topic.\n    int i = 0;\n    ArrayList&lt;TopicPartition&gt; partitions = new ArrayList&lt;TopicPartition&gt;();\n    for (i=0;i&lt;consumer.partitionsFor(TOPIC).size();i++)\n    {\n        TopicPartition partitiontemp = new TopicPartition(TOPIC, i);\n        partitions.add(partitiontemp);\n    }\n    consumer.assign(partitions);\n    consumer.seekToEnd(partitions);\n\n    for (i=0;i&lt;consumer.partitionsFor(TOPIC).size();i++)\n    {\n        System.out.printf(\"Topic: %s partitionID: %d log offset: %d \\n\", TOPIC, i, consumer.position(partitions.get(i)));\n    }\n\n    System.out.printf(\"CREATE CONSUMER DONE\");\n    consumer.close();\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/yo5UZ.png\" alt=\"This is the output of my code\"></p>\n\n<p>What I need to do is to output the topic, partition, current offset, log offset, and lag. How can I get the lag for my code or how can I get the current offset for my code. (see image for needed output).</p>\n\n<p><img src=\"https://i.stack.imgur.com/oRsH4.png\" alt=\"Needed output\"></p>\n\n<p>NOTE: I cannot use the (foreach record) functionality because I must not read each record in the input file.</p>\n"},{"tags":["java","amazon-web-services","amazon-s3"],"comments":[{"owner":{"account_id":5964120,"reputation":4275,"user_id":4688321,"display_name":"kiner_shah"},"score":0,"creation_date":1640158052,"post_id":70445528,"comment_id":124526364,"body_markdown":"I don&#39;t think you can do this. S3 is just a storage service - either you can upload, download or remove objects from S3 - but not sure if there is any way which I don&#39;t know.","body":"I don&#39;t think you can do this. S3 is just a storage service - either you can upload, download or remove objects from S3 - but not sure if there is any way which I don&#39;t know."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1640183701,"post_id":70445528,"comment_id":124535642,"body_markdown":"What do you mean with &quot;downloading&quot;? You will need to download the file content to process it locally, but if you also mean &quot;save it in a (temporary) file before processing&quot;, that shouldn&#39;t be necessary as long as whatever you&#39;re doing accepts an input stream (or a reader).","body":"What do you mean with &quot;downloading&quot;? You will need to download the file content to process it locally, but if you also mean &quot;save it in a (temporary) file before processing&quot;, that shouldn&#39;t be necessary as long as whatever you&#39;re doing accepts an input stream (or a reader)."}],"answers":[{"tags":[],"owner":{"account_id":17503,"reputation":18878,"user_id":39242,"accept_rate":71,"display_name":"Joshua Fox"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640158086,"creation_date":1640158086,"answer_id":70445559,"question_id":70445528,"body_markdown":"For your code to read the file, it needs the contents -- and that means copying it to the local system.\r\n\r\nHowever, you can use [&quot;range&quot;][1] ([Java][2]) to read just a part.\r\n\r\n\r\n  [1]: https://docs.aws.amazon.com/AmazonS3/latest/API/API_GetObject.html#ExampleGetRangeRequestHeaders\r\n  [2]: https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/s3/model/GetObjectRequest.html#setRange-long-","title":"Is there a way to read csv file from S3 using Java without downloading it","body":"<p>For your code to read the file, it needs the contents -- and that means copying it to the local system.</p>\n<p>However, you can use <a href=\"https://docs.aws.amazon.com/AmazonS3/latest/API/API_GetObject.html#ExampleGetRangeRequestHeaders\" rel=\"nofollow noreferrer\">&quot;range&quot;</a> (<a href=\"https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/s3/model/GetObjectRequest.html#setRange-long-\" rel=\"nofollow noreferrer\">Java</a>) to read just a part.</p>\n"},{"comments":[{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1640170887,"post_id":70447056,"comment_id":124530736,"body_markdown":"Can you [edit] your answer to explain what and why your answer can fix the question ?","body":"Can you <a href=\"https://stackoverflow.com/posts/70447056/edit\">edit</a> your answer to explain what and why your answer can fix the question ?"},{"owner":{"account_id":23643692,"reputation":73,"user_id":17673617,"display_name":"jay"},"score":0,"creation_date":1640176872,"post_id":70447056,"comment_id":124532864,"body_markdown":"@Elikill58 just did that if you have any issues you can ask i will be happy to explain","body":"@Elikill58 just did that if you have any issues you can ask i will be happy to explain"},{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1640183746,"post_id":70447056,"comment_id":124535657,"body_markdown":"That&#39;s clearly better ! I just fix the code indentation :)","body":"That&#39;s clearly better ! I just fix the code indentation :)"}],"tags":[],"owner":{"account_id":23643692,"reputation":73,"user_id":17673617,"display_name":"jay"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1640183716,"creation_date":1640166238,"answer_id":70447056,"question_id":70445528,"body_markdown":"There is a way with a code like this. In my code I am trying to get the file which we want to read in my S3Object obj , then I am passing that file to `InputStreamReader()`  :\r\n```\r\nS3Object Obj = s3client.getObject(&quot;&lt;Bucket Name&gt;&quot;, &quot;File Name&quot;);\r\nBufferedReader reader = new BufferedReader(new InputStreamReader(Obj.getObjectContent()));\r\n\r\n// this will store characters of first row in array    \r\nString row[] = line.split(&quot;,&quot;); \r\n                                   \r\n// this will fetch number of columns\r\nint length = row.length;\r\n\r\nwhile((line=reader.readLine()) != null) {\r\n\r\n     // storing characters of corresponding line in an array\r\n     String value[] = line.split(&quot;,&quot;); \r\n                                          \r\n     for(int i=0;i&lt;length;i++) {\r\n         System.out.print(value[i]+&quot;   &quot;);\r\n     }\r\n     System.out.println();\r\n}\r\n```","title":"Is there a way to read csv file from S3 using Java without downloading it","body":"<p>There is a way with a code like this. In my code I am trying to get the file which we want to read in my S3Object obj , then I am passing that file to <code>InputStreamReader()</code>  :</p>\n<pre><code>S3Object Obj = s3client.getObject(&quot;&lt;Bucket Name&gt;&quot;, &quot;File Name&quot;);\nBufferedReader reader = new BufferedReader(new InputStreamReader(Obj.getObjectContent()));\n\n// this will store characters of first row in array    \nString row[] = line.split(&quot;,&quot;); \n                                   \n// this will fetch number of columns\nint length = row.length;\n\nwhile((line=reader.readLine()) != null) {\n\n     // storing characters of corresponding line in an array\n     String value[] = line.split(&quot;,&quot;); \n                                          \n     for(int i=0;i&lt;length;i++) {\n         System.out.print(value[i]+&quot;   &quot;);\n     }\n     System.out.println();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25818378,"reputation":31,"user_id":19557956,"display_name":"Khtarnas"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1659047064,"creation_date":1659047064,"answer_id":73159816,"question_id":70445528,"body_markdown":"The answer by @jay and @Elikill58 is super helpful! This just adds a bit of clarity and accessibility to it.\r\n\r\nTo get an object from and S3 bucket after you have done all the [authentication work](https://docs.aws.amazon.com/AmazonS3/latest/userguide/MakingAuthenticatedRequests.html) is with the [.getObject(String bucketName, String fileName)](https://docs.aws.amazon.com/sdkfornet/v3/apidocs/items/S3/MS3GetObjectStringString.html) function. Note what it says about file names in the documentation:\r\n\r\n&gt;  An Amazon S3 bucket has no directory hierarchy such as you would find in a typical computer file system. You can, however, create a logical hierarchy by using object key names that imply a folder structure. For example, instead of naming an object sample.jpg, you can name it photos/2006/February/sample.jpg. \r\n&gt;\r\n&gt; To get an object from such a logical hierarchy, specify the full key\r\n&gt; name for the object in the GET operation. For a virtual hosted-style\r\n&gt; request example, if you have the object\r\n&gt; photos/2006/February/sample.jpg, specify the resource as\r\n&gt; /photos/2006/February/sample.jpg. For a path-style request example, if\r\n&gt; you have the object photos/2006/February/sample.jpg in the bucket\r\n&gt; named examplebucket, specify the resource as\r\n&gt; /examplebucket/photos/2006/February/sample.jpg.\r\n\r\nOnce you have an the S3Object that&#39;ll be returned, just pass it into this function below (which is just a modified version of @jay&#39;s that fixes a few errors)!\r\n\r\n\r\n    private static void parseCSVS3Object(S3Object data) {\r\n        BufferedReader reader = new BufferedReader(new InputStreamReader(data.getObjectContent()));\r\n\r\n        try {\r\n            // Get all the csv headers\r\n            String line = reader.readLine();\r\n            String[] headers = line.split(&quot;,&quot;);\r\n\r\n            // Get number of columns and print headers\r\n            int length = headers.length;\r\n            for (String header : headers) {\r\n                System.out.print(header + &quot;   &quot;);\r\n            }\r\n\r\n            while((line = reader.readLine()) != null) {\r\n                System.out.println();\r\n\r\n                // get and print the next line (row)\r\n                String[] row = line.split(&quot;,&quot;);\r\n                for (String value : row) {\r\n                    System.out.print(value + &quot;   &quot;);\r\n                }\r\n            }\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }","title":"Is there a way to read csv file from S3 using Java without downloading it","body":"<p>The answer by @jay and @Elikill58 is super helpful! This just adds a bit of clarity and accessibility to it.</p>\n<p>To get an object from and S3 bucket after you have done all the <a href=\"https://docs.aws.amazon.com/AmazonS3/latest/userguide/MakingAuthenticatedRequests.html\" rel=\"nofollow noreferrer\">authentication work</a> is with the <a href=\"https://docs.aws.amazon.com/sdkfornet/v3/apidocs/items/S3/MS3GetObjectStringString.html\" rel=\"nofollow noreferrer\">.getObject(String bucketName, String fileName)</a> function. Note what it says about file names in the documentation:</p>\n<blockquote>\n<p>An Amazon S3 bucket has no directory hierarchy such as you would find in a typical computer file system. You can, however, create a logical hierarchy by using object key names that imply a folder structure. For example, instead of naming an object sample.jpg, you can name it photos/2006/February/sample.jpg.</p>\n<p>To get an object from such a logical hierarchy, specify the full key\nname for the object in the GET operation. For a virtual hosted-style\nrequest example, if you have the object\nphotos/2006/February/sample.jpg, specify the resource as\n/photos/2006/February/sample.jpg. For a path-style request example, if\nyou have the object photos/2006/February/sample.jpg in the bucket\nnamed examplebucket, specify the resource as\n/examplebucket/photos/2006/February/sample.jpg.</p>\n</blockquote>\n<p>Once you have an the S3Object that'll be returned, just pass it into this function below (which is just a modified version of @jay's that fixes a few errors)!</p>\n<pre><code>private static void parseCSVS3Object(S3Object data) {\n    BufferedReader reader = new BufferedReader(new InputStreamReader(data.getObjectContent()));\n\n    try {\n        // Get all the csv headers\n        String line = reader.readLine();\n        String[] headers = line.split(&quot;,&quot;);\n\n        // Get number of columns and print headers\n        int length = headers.length;\n        for (String header : headers) {\n            System.out.print(header + &quot;   &quot;);\n        }\n\n        while((line = reader.readLine()) != null) {\n            System.out.println();\n\n            // get and print the next line (row)\n            String[] row = line.split(&quot;,&quot;);\n            for (String value : row) {\n                System.out.print(value + &quot;   &quot;);\n            }\n        }\n    } catch (IOException e) {\n        throw new RuntimeException(e);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4382227,"reputation":2318,"user_id":3573553,"display_name":"Mark"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685725644,"creation_date":1685725644,"answer_id":76392188,"question_id":70445528,"body_markdown":"If you can use Java NIO `Path`s and `Channel`s which are available in Java 1.8 and later then you can use the `aws-java-nio-spi-for-s3` package. With that package on your classpath Java calls to open a `Channel` or `Path` for an s3 URI will be delegated to the package allowing the application to access these files directly without needing to stage the file locally.\r\n\r\nhttps://github.com/awslabs/aws-java-nio-spi-for-s3\r\n","title":"Is there a way to read csv file from S3 using Java without downloading it","body":"<p>If you can use Java NIO <code>Path</code>s and <code>Channel</code>s which are available in Java 1.8 and later then you can use the <code>aws-java-nio-spi-for-s3</code> package. With that package on your classpath Java calls to open a <code>Channel</code> or <code>Path</code> for an s3 URI will be delegated to the package allowing the application to access these files directly without needing to stage the file locally.</p>\n<p><a href=\"https://github.com/awslabs/aws-java-nio-spi-for-s3\" rel=\"nofollow noreferrer\">https://github.com/awslabs/aws-java-nio-spi-for-s3</a></p>\n"},{"tags":[],"owner":{"account_id":3533020,"reputation":3091,"user_id":2952011,"accept_rate":80,"display_name":"Mukit09"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692252090,"creation_date":1692252090,"answer_id":76918831,"question_id":70445528,"body_markdown":"I know I am late to answer it, but I think it may help future seekers. \r\n\r\nWe can take the help of AWS SDK. [Here][1] is an example on aws docs. See the Java section.\r\n\r\n\r\nIf anyone follows the doc, a file will be downloaded as **FileOutputStream** is used there to save the file. But you can store the output of your query in String as well like this:\r\n\r\n    String string = IOUtils.toString(resultInputStream);\r\n\r\nIf you follow the blog, you already know, **resultInputStream** is the output of your query.\r\n\r\n  [1]: https://docs.aws.amazon.com/AmazonS3/latest/userguide/using-select.html","title":"Is there a way to read csv file from S3 using Java without downloading it","body":"<p>I know I am late to answer it, but I think it may help future seekers.</p>\n<p>We can take the help of AWS SDK. <a href=\"https://docs.aws.amazon.com/AmazonS3/latest/userguide/using-select.html\" rel=\"nofollow noreferrer\">Here</a> is an example on aws docs. See the Java section.</p>\n<p>If anyone follows the doc, a file will be downloaded as <strong>FileOutputStream</strong> is used there to save the file. But you can store the output of your query in String as well like this:</p>\n<pre><code>String string = IOUtils.toString(resultInputStream);\n</code></pre>\n<p>If you follow the blog, you already know, <strong>resultInputStream</strong> is the output of your query.</p>\n"}],"owner":{"account_id":23643692,"reputation":73,"user_id":17673617,"display_name":"jay"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8914,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":5,"score":3,"last_activity_date":1692252090,"creation_date":1640157893,"question_id":70445528,"body_markdown":"I was able to connect Java to AWS S3, and I was able to perform basic operations like listing buckets. I need a way to read a CSV file without downloading it. I am attaching my current code here.\r\n\r\n    import com.amazonaws.auth.AWSCredentials;\r\n    import com.amazonaws.auth.AWSStaticCredentialsProvider;\r\n    import com.amazonaws.auth.BasicAWSCredentials;\r\n    import com.amazonaws.regions.Regions;\r\n    import com.amazonaws.services.s3.AmazonS3;\r\n    import com.amazonaws.services.s3.AmazonS3Client;\r\n    import com.amazonaws.services.s3.AmazonS3ClientBuilder;\r\n    import com.amazonaws.services.s3.model.Bucket;\r\n    import com.amazonaws.services.s3.model.CannedAccessControlList;\r\n    import com.amazonaws.services.s3.model.ObjectMetadata;\r\n    import com.amazonaws.services.s3.model.PutObjectRequest;\r\n    import com.amazonaws.services.s3.model.S3ObjectSummary;\r\n    \r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.util.List;\r\n    import java.util.Properties;\r\n    \r\n    public class test {\r\n    \r\n        public static void main(String args[])throws IOException\r\n        {\r\n    \r\n            AWSCredentials credentials =new BasicAWSCredentials(&quot;----&quot;,&quot;----&quot;);\r\n    \r\n            AmazonS3 s3client = AmazonS3ClientBuilder\r\n                    .standard()\r\n                    .withCredentials(new AWSStaticCredentialsProvider(credentials))\r\n                    .withRegion(Regions.US_EAST_2)\r\n                    .build();\r\n    \r\n            List&lt;Bucket&gt; buckets = s3client.listBuckets();\r\n            for(Bucket bucket : buckets) {\r\n                System.out.println(bucket.getName());\r\n            }\r\n        }\r\n    \r\n    }\r\n\r\n","title":"Is there a way to read csv file from S3 using Java without downloading it","body":"<p>I was able to connect Java to AWS S3, and I was able to perform basic operations like listing buckets. I need a way to read a CSV file without downloading it. I am attaching my current code here.</p>\n<pre><code>import com.amazonaws.auth.AWSCredentials;\nimport com.amazonaws.auth.AWSStaticCredentialsProvider;\nimport com.amazonaws.auth.BasicAWSCredentials;\nimport com.amazonaws.regions.Regions;\nimport com.amazonaws.services.s3.AmazonS3;\nimport com.amazonaws.services.s3.AmazonS3Client;\nimport com.amazonaws.services.s3.AmazonS3ClientBuilder;\nimport com.amazonaws.services.s3.model.Bucket;\nimport com.amazonaws.services.s3.model.CannedAccessControlList;\nimport com.amazonaws.services.s3.model.ObjectMetadata;\nimport com.amazonaws.services.s3.model.PutObjectRequest;\nimport com.amazonaws.services.s3.model.S3ObjectSummary;\n\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.util.List;\nimport java.util.Properties;\n\npublic class test {\n\n    public static void main(String args[])throws IOException\n    {\n\n        AWSCredentials credentials =new BasicAWSCredentials(&quot;----&quot;,&quot;----&quot;);\n\n        AmazonS3 s3client = AmazonS3ClientBuilder\n                .standard()\n                .withCredentials(new AWSStaticCredentialsProvider(credentials))\n                .withRegion(Regions.US_EAST_2)\n                .build();\n\n        List&lt;Bucket&gt; buckets = s3client.listBuckets();\n        for(Bucket bucket : buckets) {\n            System.out.println(bucket.getName());\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":["java","spring-boot","swagger","swagger-ui","openapi"],"answers":[{"comments":[{"owner":{"account_id":23090602,"reputation":59,"user_id":18073200,"display_name":"denstran"},"score":0,"creation_date":1692103492,"post_id":76903610,"comment_id":135576826,"body_markdown":"Nope, still not working... Maybe something with my Spring Boot version? I am using Spring Boot 3.0.2","body":"Nope, still not working... Maybe something with my Spring Boot version? I am using Spring Boot 3.0.2"},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1692103687,"post_id":76903610,"comment_id":135576857,"body_markdown":"Did you declare an `OpenAPI` Bean ?","body":"Did you declare an <code>OpenAPI</code> Bean ?"},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1692103944,"post_id":76903610,"comment_id":135576916,"body_markdown":"i am sure you didnt declare this Bean, i`m going to update my answer with an example","body":"i am sure you didnt declare this Bean, i`m going to update my answer with an example"},{"owner":{"account_id":23090602,"reputation":59,"user_id":18073200,"display_name":"denstran"},"score":0,"creation_date":1692103986,"post_id":76903610,"comment_id":135576922,"body_markdown":"No, i did not, but i changed version of dependency from 2.2.0 to 2.0.4 and it is working now, i dont know why","body":"No, i did not, but i changed version of dependency from 2.2.0 to 2.0.4 and it is working now, i dont know why"},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1692104410,"post_id":76903610,"comment_id":135576994,"body_markdown":"i updated my answer, with an example","body":"i updated my answer, with an example"},{"owner":{"account_id":23090602,"reputation":59,"user_id":18073200,"display_name":"denstran"},"score":0,"creation_date":1692105139,"post_id":76903610,"comment_id":135577132,"body_markdown":"Okay, the problem was not in OpenApi bean, but in wrong dependency... I just took a dependency for swagger ui from my older project and everything is working now, still thank you for showing an example of OpenApi bean configuration","body":"Okay, the problem was not in OpenApi bean, but in wrong dependency... I just took a dependency for swagger ui from my older project and everything is working now, still thank you for showing an example of OpenApi bean configuration"}],"tags":[],"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"comment_count":6,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692104391,"creation_date":1692077297,"answer_id":76903610,"question_id":76902347,"body_markdown":"Usually if you access to`/swagger-ui.html` you will have an redirect to `/swagger-ui/index.html`, just change the path to:\r\n\r\n    .requestMatchers(&quot;/swagger-ui/**&quot;).permitAll()\r\n\r\nAnd try to open swagger url:\r\n\r\n `http://localhost:8080/swagger-ui/index.html`\r\n\r\n**UPDATE**\r\n\r\nDeclare a custom configuration for OpenApi\r\n\r\n\r\n    @Configuration\r\n    public class ApiConfig {\r\n    \r\n      @Bean\r\n      public OpenAPI customOpenApi() {\r\n        return new OpenAPI().info(new Info().title(&quot;Application API&quot;)\r\n                .version(&quot;version&quot;)\r\n                .description(&quot;description&quot;)\r\n                .license(new License().name(&quot;Apache 2.0&quot;)\r\n                    .url(&quot;http://springdoc.org&quot;))\r\n                .contact(new Contact().name(&quot;username&quot;)\r\n                    .email(&quot;test@gmail.com&quot;)));\r\n      }\r\n    }\r\n\r\n","title":"Can not find swagger-ui page","body":"<p>Usually if you access to<code>/swagger-ui.html</code> you will have an redirect to <code>/swagger-ui/index.html</code>, just change the path to:</p>\n<pre><code>.requestMatchers(&quot;/swagger-ui/**&quot;).permitAll()\n</code></pre>\n<p>And try to open swagger url:</p>\n<p><code>http://localhost:8080/swagger-ui/index.html</code></p>\n<p><strong>UPDATE</strong></p>\n<p>Declare a custom configuration for OpenApi</p>\n<pre><code>@Configuration\npublic class ApiConfig {\n\n  @Bean\n  public OpenAPI customOpenApi() {\n    return new OpenAPI().info(new Info().title(&quot;Application API&quot;)\n            .version(&quot;version&quot;)\n            .description(&quot;description&quot;)\n            .license(new License().name(&quot;Apache 2.0&quot;)\n                .url(&quot;http://springdoc.org&quot;))\n            .contact(new Contact().name(&quot;username&quot;)\n                .email(&quot;test@gmail.com&quot;)));\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23090602,"reputation":59,"user_id":18073200,"display_name":"denstran"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1692251848,"creation_date":1692105305,"answer_id":76906251,"question_id":76902347,"body_markdown":"The problem was in wrong dependency. I was using this\r\n\r\n    &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n            &lt;artifactId&gt;springdoc-openapi-starter-webmvc-api&lt;/artifactId&gt;\r\n            &lt;version&gt;2.2.0&lt;/version&gt;\r\n     &lt;/dependency&gt;\r\nBut looks like this dependency used only for /api-docs path, without ui, so I checked my older project and copied dependency from there\r\n\r\n    &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n            &lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;\r\n            &lt;version&gt;2.2.0&lt;/version&gt;\r\n     &lt;/dependency&gt;\r\nAnd now everything works fine. Always need to check if you are using correct dependencies.","title":"Can not find swagger-ui page","body":"<p>The problem was in wrong dependency. I was using this</p>\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n        &lt;artifactId&gt;springdoc-openapi-starter-webmvc-api&lt;/artifactId&gt;\n        &lt;version&gt;2.2.0&lt;/version&gt;\n &lt;/dependency&gt;\n</code></pre>\n<p>But looks like this dependency used only for /api-docs path, without ui, so I checked my older project and copied dependency from there</p>\n<pre><code>&lt;dependency&gt;\n        &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n        &lt;artifactId&gt;springdoc-openapi-starter-webmvc-ui&lt;/artifactId&gt;\n        &lt;version&gt;2.2.0&lt;/version&gt;\n &lt;/dependency&gt;\n</code></pre>\n<p>And now everything works fine. Always need to check if you are using correct dependencies.</p>\n"}],"owner":{"account_id":23090602,"reputation":59,"user_id":18073200,"display_name":"denstran"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":114,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76906251,"answer_count":2,"score":0,"last_activity_date":1692251848,"creation_date":1692049899,"question_id":76902347,"body_markdown":"I&#39;ve got a problem with swagger ui. I am using these dependencies:\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jjwt&lt;/artifactId&gt;\r\n            &lt;version&gt;0.9.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n            &lt;artifactId&gt;springdoc-openapi-starter-webmvc-api&lt;/artifactId&gt;\r\n            &lt;version&gt;2.2.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n            &lt;optional&gt;true&lt;/optional&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-security-config&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n    &lt;/dependencies&gt;\r\nSo, as you can see, for swagger I am using this dependency:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n        &lt;artifactId&gt;springdoc-openapi-starter-webmvc-api&lt;/artifactId&gt;\r\n        &lt;version&gt;2.2.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nThese are my swagger settings in application.properties\r\n\r\n    # Swagger settings\r\n    springdoc.swagger-ui.enabled=true\r\n    springdoc.api-docs.path=/api-docs\r\n    springdoc.swagger-ui.path=/swagger-ui.html\r\n\r\nHere is my SecurityFilterChain. I thought that Spring Security might be blocking my requests, but it looks like it is not\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n        http.cors().and().csrf().disable()\r\n                .exceptionHandling().authenticationEntryPoint(unauthorizedHandler).and()\r\n                .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\r\n                .authorizeHttpRequests((requests) -&gt; requests\r\n                        .requestMatchers(&quot;/api/auth/**&quot;).permitAll()\r\n                        .requestMatchers(&quot;/swagger-ui.html&quot;).permitAll()\r\n                        .requestMatchers(&quot;/api-docs/**&quot;).permitAll()\r\n                        .requestMatchers(&quot;/api/users/**&quot;).hasRole(&quot;USER&quot;)\r\n                        .requestMatchers(&quot;/api/admin/**&quot;).hasRole(&quot;ADMIN&quot;)\r\n                        .anyRequest().permitAll()\r\n                );\r\n\r\n        http.authenticationProvider(authenticationProvider());\r\n\r\n        http.addFilterBefore(authenticationJwtTokenFilter(), UsernamePasswordAuthenticationFilter.class);\r\n\r\n        return http.build();\r\n    }\r\n\r\nI am trying to find swagger ui at this url \r\n\r\n    http://localhost:8080/swagger-ui.html\r\n\r\nand I am getting **Whitelabel Error Page**. Api-docs page \r\n\r\n    http://localhost:8080/api-docs\r\n\r\nworks perfectly, so where is the problem?","title":"Can not find swagger-ui page","body":"<p>I've got a problem with swagger ui. I am using these dependencies:</p>\n<pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\n        &lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n        &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\n        &lt;artifactId&gt;jjwt&lt;/artifactId&gt;\n        &lt;version&gt;0.9.1&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n        &lt;artifactId&gt;springdoc-openapi-starter-webmvc-api&lt;/artifactId&gt;\n        &lt;version&gt;2.2.0&lt;/version&gt;\n    &lt;/dependency&gt;\n\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n        &lt;optional&gt;true&lt;/optional&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-security-config&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n&lt;/dependencies&gt;\n</code></pre>\n<p>So, as you can see, for swagger I am using this dependency:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n    &lt;artifactId&gt;springdoc-openapi-starter-webmvc-api&lt;/artifactId&gt;\n    &lt;version&gt;2.2.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>These are my swagger settings in application.properties</p>\n<pre><code># Swagger settings\nspringdoc.swagger-ui.enabled=true\nspringdoc.api-docs.path=/api-docs\nspringdoc.swagger-ui.path=/swagger-ui.html\n</code></pre>\n<p>Here is my SecurityFilterChain. I thought that Spring Security might be blocking my requests, but it looks like it is not</p>\n<pre><code>@Bean\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n    http.cors().and().csrf().disable()\n            .exceptionHandling().authenticationEntryPoint(unauthorizedHandler).and()\n            .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and()\n            .authorizeHttpRequests((requests) -&gt; requests\n                    .requestMatchers(&quot;/api/auth/**&quot;).permitAll()\n                    .requestMatchers(&quot;/swagger-ui.html&quot;).permitAll()\n                    .requestMatchers(&quot;/api-docs/**&quot;).permitAll()\n                    .requestMatchers(&quot;/api/users/**&quot;).hasRole(&quot;USER&quot;)\n                    .requestMatchers(&quot;/api/admin/**&quot;).hasRole(&quot;ADMIN&quot;)\n                    .anyRequest().permitAll()\n            );\n\n    http.authenticationProvider(authenticationProvider());\n\n    http.addFilterBefore(authenticationJwtTokenFilter(), UsernamePasswordAuthenticationFilter.class);\n\n    return http.build();\n}\n</code></pre>\n<p>I am trying to find swagger ui at this url</p>\n<pre><code>http://localhost:8080/swagger-ui.html\n</code></pre>\n<p>and I am getting <strong>Whitelabel Error Page</strong>. Api-docs page</p>\n<pre><code>http://localhost:8080/api-docs\n</code></pre>\n<p>works perfectly, so where is the problem?</p>\n"},{"tags":["java","memory","memory-management","jar","manifest"],"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1692245637,"post_id":76917827,"comment_id":135598021,"body_markdown":"What “instrumentation interface” did you mean? JMX?","body":"What “instrumentation interface” did you mean? JMX?"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1694612535,"post_id":76917827,"comment_id":135914223,"body_markdown":"According to your screenshot, the entry to add to the jar would be `org/example/InstrumentationAgent.class`, not `Sizeof.class`. The current directory must be the folder to which IntelliJ stores the compiled class files.","body":"According to your screenshot, the entry to add to the jar would be <code>org&#47;example&#47;InstrumentationAgent.class</code>, not <code>Sizeof.class</code>. The current directory must be the folder to which IntelliJ stores the compiled class files."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692237144,"creation_date":1692237144,"answer_id":76918006,"question_id":76917827,"body_markdown":"The short answer:  You don&#39;t want instrumentation, even if you do, you can&#39;t implement it, messing with the manifest won&#39;t accomplish what you want (but if it does - that&#39;s not how you use `jar`).\r\n\r\nIn some more detail:\r\n\r\n\r\nYour title and your question have nothing to do with each other. It sounds like perhaps this is what happened:\r\n\r\n* You are attempting to write an agent so that you get an impl of `Instrumentation` so you can do instrumentation things.\r\n* You failed at the job.\r\n* You decided to just abort what you were doing entirely and are now thinking: Eh, maybe I&#39;ll just implement `Instrumentation` on my own! ... how do I do that? Better ask SO.\r\n\r\nYou don&#39;t implement `Instrumentation`. You can&#39;t. The JVM implements it and hands you an implementation. That answers the question in your title.\r\n\r\n&gt; jar -cfm Sizeof.jar META-INF/MANIFEST.MF Sizeof.class\r\n\r\nThat&#39;s not how jar works. This command says:\r\n\r\n* Please make a new jar (`-c`).\r\n* Please name this jar `Sizeof.jar (`-f Sizeof.jar`)\r\n* Please put a manifest in it by copying a text file. This text file can be found, relative to the current dir, at this place (`-m META-INF/MANIFEST.MF`).\r\n* Please put file `Sizeof.class` in the jar.\r\n\r\nYou&#39;re confused about what `-m` does. The argument (you passed `META-INF/MANIFEST.MF`) has to be to __an actual text file already existing on disk__. It&#39;s not &#39;where the manifest goes&#39; - that goes at META-INF/MANIFEST.MF, __period__ - it can&#39;t be anywhere else, hence, there is no need to tell `jar` where to put it - it already knows. You __do__ need to tell `jar` what to put __in__ the manifest. `-m` is one way to do that, and you pass a text file.\r\n\r\nSo, you need to MAKE a manifest file. Get an editor out, make a text file, stick this in it:\r\n\r\n```\r\nAgent-Main: com.foo.packagename.of.YourAgentMainClass\r\n```\r\n\r\ncall it &#39;agent-manifest.txt&#39;.\r\n\r\nThen run:\r\n\r\n```\r\njar -cfm Sizeof.jar agent-manifest.txt com/foo/packagename/of/YourAgentMainClass.class\r\n```\r\n\r\nThen run a java app, pass the jar the above command produces as agent, and now your `agentmain` method (that has to be in the class `YourAgentMainClass` which is in package `com.foo.packagename.of`) will be executed, and handed an instance of `Instrumentation`.\r\n\r\nNote that agents aren&#39;t java apps - they are JVM plugins: You run __another__ java app, and the agent can for example replace bytecode.\r\n\r\nIf you just want to check how large some object is in a java app, `Instrumentation` just isn&#39;t the answer. I don&#39;t know what is, but that isn&#39;t it. More generally &quot;I want to know how large this is&quot; isn&#39;t a question the JVM is good at answering - the usual solution is not to ask it. Why do you need to know? There may be an entirely different way to fulfill whatever requirement needs to know.\r\n\r\nNB: Putting `main` classes in the default package is a bad idea. Don&#39;t do that - make an actual package.\r\n","title":"How to correctly implement Java Instrumentation interface?","body":"<p>The short answer:  You don't want instrumentation, even if you do, you can't implement it, messing with the manifest won't accomplish what you want (but if it does - that's not how you use <code>jar</code>).</p>\n<p>In some more detail:</p>\n<p>Your title and your question have nothing to do with each other. It sounds like perhaps this is what happened:</p>\n<ul>\n<li>You are attempting to write an agent so that you get an impl of <code>Instrumentation</code> so you can do instrumentation things.</li>\n<li>You failed at the job.</li>\n<li>You decided to just abort what you were doing entirely and are now thinking: Eh, maybe I'll just implement <code>Instrumentation</code> on my own! ... how do I do that? Better ask SO.</li>\n</ul>\n<p>You don't implement <code>Instrumentation</code>. You can't. The JVM implements it and hands you an implementation. That answers the question in your title.</p>\n<blockquote>\n<p>jar -cfm Sizeof.jar META-INF/MANIFEST.MF Sizeof.class</p>\n</blockquote>\n<p>That's not how jar works. This command says:</p>\n<ul>\n<li>Please make a new jar (<code>-c</code>).</li>\n<li>Please name this jar <code>Sizeof.jar (</code>-f Sizeof.jar`)</li>\n<li>Please put a manifest in it by copying a text file. This text file can be found, relative to the current dir, at this place (<code>-m META-INF/MANIFEST.MF</code>).</li>\n<li>Please put file <code>Sizeof.class</code> in the jar.</li>\n</ul>\n<p>You're confused about what <code>-m</code> does. The argument (you passed <code>META-INF/MANIFEST.MF</code>) has to be to <strong>an actual text file already existing on disk</strong>. It's not 'where the manifest goes' - that goes at META-INF/MANIFEST.MF, <strong>period</strong> - it can't be anywhere else, hence, there is no need to tell <code>jar</code> where to put it - it already knows. You <strong>do</strong> need to tell <code>jar</code> what to put <strong>in</strong> the manifest. <code>-m</code> is one way to do that, and you pass a text file.</p>\n<p>So, you need to MAKE a manifest file. Get an editor out, make a text file, stick this in it:</p>\n<pre><code>Agent-Main: com.foo.packagename.of.YourAgentMainClass\n</code></pre>\n<p>call it 'agent-manifest.txt'.</p>\n<p>Then run:</p>\n<pre><code>jar -cfm Sizeof.jar agent-manifest.txt com/foo/packagename/of/YourAgentMainClass.class\n</code></pre>\n<p>Then run a java app, pass the jar the above command produces as agent, and now your <code>agentmain</code> method (that has to be in the class <code>YourAgentMainClass</code> which is in package <code>com.foo.packagename.of</code>) will be executed, and handed an instance of <code>Instrumentation</code>.</p>\n<p>Note that agents aren't java apps - they are JVM plugins: You run <strong>another</strong> java app, and the agent can for example replace bytecode.</p>\n<p>If you just want to check how large some object is in a java app, <code>Instrumentation</code> just isn't the answer. I don't know what is, but that isn't it. More generally &quot;I want to know how large this is&quot; isn't a question the JVM is good at answering - the usual solution is not to ask it. Why do you need to know? There may be an entirely different way to fulfill whatever requirement needs to know.</p>\n<p>NB: Putting <code>main</code> classes in the default package is a bad idea. Don't do that - make an actual package.</p>\n"},{"tags":[],"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1692251477,"creation_date":1692251477,"answer_id":76918779,"question_id":76917827,"body_markdown":"If you&#39;re interested in actual memory / CPU consumption of a program, use a profiler like [VisualVM](https://visualvm.github.io/) to see how it behaves and look for any performance hotspots.\r\n\r\nIf you&#39;re actually interested in object/class size for micro-optimization purposes, then [JOL](https://github.com/openjdk/jol) can size your objects without running an agent and comes even with an Idea plugin.","title":"How to correctly implement Java Instrumentation interface?","body":"<p>If you're interested in actual memory / CPU consumption of a program, use a profiler like <a href=\"https://visualvm.github.io/\" rel=\"nofollow noreferrer\">VisualVM</a> to see how it behaves and look for any performance hotspots.</p>\n<p>If you're actually interested in object/class size for micro-optimization purposes, then <a href=\"https://github.com/openjdk/jol\" rel=\"nofollow noreferrer\">JOL</a> can size your objects without running an agent and comes even with an Idea plugin.</p>\n"}],"owner":{"account_id":29155915,"reputation":3,"user_id":22335700,"display_name":"wdk23"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":93,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76918779,"answer_count":2,"score":0,"last_activity_date":1692251477,"creation_date":1692233059,"question_id":76917827,"body_markdown":"I am trying to estimate the memory of some objects for a project and I want to use the getObjectSize() method from the instrumentation interface. I&#39;ve been following the steps on how to create an Instrumentation agent from these two websites ([https://iq.opengenus.org/find-size-of-an-object-in-java/](https://stackoverflow.com) and [https://www.baeldung.com/java-size-of-object](https://stackoverflow.com)). However, when I try to make an agent JAR with a custom manifest File, it returns this error: `java.io.FileNotFoundException: META-INF/MANIFEST.MF (No such file or directory)`.\r\n\r\nThis is the full command and error: I&#39;ve also taken a screenshot of where the files and difrectories are in the project. I made a separate project folder to try to get the Instrumentation interface to work.  [Screenshot of Project layout on IntelliJ](https://i.stack.imgur.com/DedKt.png)\r\n\r\n\r\n```\r\nuser@users-MacBook-Pro objectTesting % jar -cfm Sizeof.jar META-INF/MANIFEST.MF Sizeof.class                \r\njava.io.FileNotFoundException: META-INF/MANIFEST.MF (No such file or directory)\r\n        at java.base/java.io.FileInputStream.open0(Native Method)\r\n        at java.base/java.io.FileInputStream.open(FileInputStream.java:219)\r\n        at java.base/java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:158)\r\n        at java.base/java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:112)\r\n        at jdk.jartool/sun.tools.jar.Main.run(Main.java:278)\r\n        at jdk.jartool/sun.tools.jar.Main.main(Main.j\r\n```\r\n\r\nI thought initially that it was because I put the manifest file and META_INF folder in the wrong place, but it still returned the error after I moved it around a few times. How do I fix this? Also, how would I implement the Instrumentation interface into my other projects once I get it to work?\r\n\r\nAlternatively, are there any other ways to estimate the memory consumption of an object in Java?","title":"How to correctly implement Java Instrumentation interface?","body":"<p>I am trying to estimate the memory of some objects for a project and I want to use the getObjectSize() method from the instrumentation interface. I've been following the steps on how to create an Instrumentation agent from these two websites (<a href=\"https://stackoverflow.com\">https://iq.opengenus.org/find-size-of-an-object-in-java/</a> and <a href=\"https://stackoverflow.com\">https://www.baeldung.com/java-size-of-object</a>). However, when I try to make an agent JAR with a custom manifest File, it returns this error: <code>java.io.FileNotFoundException: META-INF/MANIFEST.MF (No such file or directory)</code>.</p>\n<p>This is the full command and error: I've also taken a screenshot of where the files and difrectories are in the project. I made a separate project folder to try to get the Instrumentation interface to work.  <a href=\"https://i.stack.imgur.com/DedKt.png\" rel=\"nofollow noreferrer\">Screenshot of Project layout on IntelliJ</a></p>\n<pre><code>user@users-MacBook-Pro objectTesting % jar -cfm Sizeof.jar META-INF/MANIFEST.MF Sizeof.class                \njava.io.FileNotFoundException: META-INF/MANIFEST.MF (No such file or directory)\n        at java.base/java.io.FileInputStream.open0(Native Method)\n        at java.base/java.io.FileInputStream.open(FileInputStream.java:219)\n        at java.base/java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:158)\n        at java.base/java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:112)\n        at jdk.jartool/sun.tools.jar.Main.run(Main.java:278)\n        at jdk.jartool/sun.tools.jar.Main.main(Main.j\n</code></pre>\n<p>I thought initially that it was because I put the manifest file and META_INF folder in the wrong place, but it still returned the error after I moved it around a few times. How do I fix this? Also, how would I implement the Instrumentation interface into my other projects once I get it to work?</p>\n<p>Alternatively, are there any other ways to estimate the memory consumption of an object in Java?</p>\n"},{"tags":["java","tomcat","intellij-idea"],"answers":[{"tags":[],"owner":{"account_id":36734,"reputation":392137,"user_id":104891,"display_name":"CrazyCoder"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1576203316,"creation_date":1576203316,"answer_id":59315244,"question_id":59314911,"body_markdown":"It looks like you are using IntelliJ IDEA Community edition, while Tomcat support [is the feature of IntelliJ IDEA Ultimate](https://www.jetbrains.com/idea/features/editions_comparison_matrix.html).","title":"adding tomcat to templates in intellij","body":"<p>It looks like you are using IntelliJ IDEA Community edition, while Tomcat support <a href=\"https://www.jetbrains.com/idea/features/editions_comparison_matrix.html\" rel=\"nofollow noreferrer\">is the feature of IntelliJ IDEA Ultimate</a>.</p>\n"},{"tags":[],"owner":{"account_id":1614042,"reputation":7468,"user_id":1492229,"accept_rate":100,"display_name":"asmgx"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1576208441,"creation_date":1576208441,"answer_id":59315830,"question_id":59314911,"body_markdown":"I found a way to do that \r\n\r\n1- Click on Maven Setting\r\n\r\n[![enter image description here][1]][1]\r\n\r\n2- click on Plugins\r\n\r\n[![enter image description here][2]][2]\r\n\r\n3- type tomcat and choose Smart Tomcat\r\n\r\n[![enter image description here][3]][3]\r\n\r\n4- it is there\r\n\r\n[![enter image description here][4]][4]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/syICz.png\r\n  [2]: https://i.stack.imgur.com/pGJ5A.png\r\n  [3]: https://i.stack.imgur.com/g7Wfi.png\r\n  [4]: https://i.stack.imgur.com/cZ7pU.png","title":"adding tomcat to templates in intellij","body":"<p>I found a way to do that </p>\n\n<p>1- Click on Maven Setting</p>\n\n<p><a href=\"https://i.stack.imgur.com/syICz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/syICz.png\" alt=\"enter image description here\"></a></p>\n\n<p>2- click on Plugins</p>\n\n<p><a href=\"https://i.stack.imgur.com/pGJ5A.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pGJ5A.png\" alt=\"enter image description here\"></a></p>\n\n<p>3- type tomcat and choose Smart Tomcat</p>\n\n<p><a href=\"https://i.stack.imgur.com/g7Wfi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/g7Wfi.png\" alt=\"enter image description here\"></a></p>\n\n<p>4- it is there</p>\n\n<p><a href=\"https://i.stack.imgur.com/cZ7pU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cZ7pU.png\" alt=\"enter image description here\"></a></p>\n"}],"owner":{"account_id":1614042,"reputation":7468,"user_id":1492229,"accept_rate":100,"display_name":"asmgx"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1166,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":59315830,"answer_count":2,"score":0,"last_activity_date":1692251472,"creation_date":1576200082,"question_id":59314911,"body_markdown":"as part of instructions to run an open source code they said to use tomcat\r\n\r\nI installed tomcat but it is still does not show.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/fAcIA.png\r\n\r\n\r\nhow can I add it there?\r\n\r\n\r\n","title":"adding tomcat to templates in intellij","body":"<p>as part of instructions to run an open source code they said to use tomcat</p>\n\n<p>I installed tomcat but it is still does not show.</p>\n\n<p><a href=\"https://i.stack.imgur.com/fAcIA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fAcIA.png\" alt=\"enter image description here\"></a></p>\n\n<p>how can I add it there?</p>\n"},{"tags":["java","android","kotlin","unit-testing","mockk"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1692107501,"post_id":76906477,"comment_id":135577634,"body_markdown":"Kotlin methods and classes (and objects) are `final` by default. Most mocking can&#39;t deal with that. You&#39;ll need something like `kotlin-allopen`.","body":"Kotlin methods and classes (and objects) are <code>final</code> by default. Most mocking can&#39;t deal with that. You&#39;ll need something like <code>kotlin-allopen</code>."},{"owner":{"account_id":20928711,"reputation":3225,"user_id":15375588,"display_name":"Karsten Gabriel"},"score":0,"creation_date":1692204612,"post_id":76906477,"comment_id":135593065,"body_markdown":"In the `BusinessRepository` and your test class, it looks like `ObjBeingMocked.getFeatures` is called with only one argument (context), but in the definition of `ObjBeingMocked`, the function `getFeatures` takes 3 arguments (a, b, context). Can you please adapt your question to be consistent?","body":"In the <code>BusinessRepository</code> and your test class, it looks like <code>ObjBeingMocked.getFeatures</code> is called with only one argument (context), but in the definition of <code>ObjBeingMocked</code>, the function <code>getFeatures</code> takes 3 arguments (a, b, context). Can you please adapt your question to be consistent?"},{"owner":{"account_id":13487324,"reputation":11,"user_id":9730741,"display_name":"raj abimanyu"},"score":0,"creation_date":1692250132,"post_id":76906477,"comment_id":135598388,"body_markdown":"@KarstenGabriel edited. Thanks!","body":"@KarstenGabriel edited. Thanks!"},{"owner":{"account_id":20928711,"reputation":3225,"user_id":15375588,"display_name":"Karsten Gabriel"},"score":0,"creation_date":1692277449,"post_id":76906477,"comment_id":135603332,"body_markdown":"Did you try to mock `ObjBeingMocked.getFeatures(any())` instead of `ObjBeingMocked.getFeatures(instrumentationContext)`?","body":"Did you try to mock <code>ObjBeingMocked.getFeatures(any())</code> instead of <code>ObjBeingMocked.getFeatures(instrumentationContext)</code>?"},{"owner":{"account_id":13487324,"reputation":11,"user_id":9730741,"display_name":"raj abimanyu"},"score":0,"creation_date":1692542611,"post_id":76906477,"comment_id":135634749,"body_markdown":"@KarstenGabriel Tried. But that also working.","body":"@KarstenGabriel Tried. But that also working."}],"owner":{"account_id":13487324,"reputation":11,"user_id":9730741,"display_name":"raj abimanyu"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":413,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692250098,"creation_date":1692107323,"question_id":76906477,"body_markdown":"I am using mockk for unit testing my Android project.\r\nI am having an object class and that object class is used inside the repository which I am testing.\r\nThe mockk library I am using : &quot;io.mockk:mockk-android:1.13.7&quot;\r\n\r\nRepository : \r\n\r\n\r\n```\r\nclass BusinessRepository() {\r\n\r\n    companion object {\r\n        private var businessRepository:BusinessRepository? = null\r\n        val instance: BusinessRepository?\r\n            get() {\r\n                if (businessRepository == null) {\r\n                    businessRepository = BusinessRepository()\r\n                }\r\n                return businessRepository\r\n            }\r\n    }\r\n\r\n    suspend fun fetchBusinessData(context:Context,businessData:MutableLiveData&lt;Feature&gt;?, ioDispatcher: CoroutineDispatcher = Dispatchers.IO) = withContext(ioDispatcher) \r\n    {\r\n        val feature = ObjBeingMocked.getFeatures(context)\r\n        businessData?.postValue(feature)\r\n        return@withContext\r\n    }\r\n}\r\n```\r\n\r\nTest Code : \r\n\r\n\r\n```\r\n@RunWith(AndroidJUnit4::class)\r\nclass BusinessRepositoryTest {\r\n    lateinit var businessRepository: BusinessRepository\r\n    var businessDataObservable: MutableLiveData&lt;Feature&gt; = MutableLiveData()\r\n\r\n    lateinit var instrumentationContext: Context\r\n    lateinit var testDispatcher: CoroutineDispatcher\r\n    private val mainThreadSurrogate = Executors\r\n        .newSingleThreadExecutor { Thread(it, &quot;UI-thread&quot;) }\r\n        .asCoroutineDispatcher()\r\n\r\n    @Before\r\n    fun setUp() {\r\n        Dispatchers.setMain(mainThreadSurrogate)\r\n        testDispatcher = TestCoroutineDispatcher()\r\n\r\n        businessRepository = BusinessRepository.instance!!\r\n        instrumentationContext = ApplicationProvider.getApplicationContext()\r\n    }\r\n\r\n    @Test\r\n    fun `fetchBusinessDataTest`() = runBlocking {\r\n\r\n        mockkObject(ObjBeingMocked) {\r\n            val featureMock = mockk&lt;Feature&gt;()\r\n\r\n            every {\r\n                ObjBeingMocked.getFeatures(instrumentationContext)\r\n            } returns featureMock\r\n\r\n            businessRepository.fetchBusinessDataExtra(\r\n                instrumentationContext,\r\n                businessDataObservable,\r\n                testDispatcher\r\n            )\r\n\r\n            delay(500)\r\n\r\n            val responseValue = businessDataObservable.value\r\n            assert(responseValue != null)\r\n        }\r\n\r\n    }\r\n\r\n    @After\r\n    fun tearDown() {\r\n        Dispatchers.resetMain()\r\n        unmockkAll()\r\n    }\r\n}\r\n```\r\n\r\nObjBeingMocked.getFeatures :\r\n\r\n\r\n```\r\nobject ObjBeingMocked {\r\n         fun getFeatures(context: Context): Feature {\r\n            val featureJson = JSONObject(getFeaturesString(context)!!)\r\n            val features = Feature(featureJson)\r\n            return features\r\n        }\r\n\r\n        fun getSharedPref(context: Context): String? {\r\n            // for testing the scenario I am returning null here\r\n            return null\r\n        }\r\n}\r\n```\r\n\r\nNow when I run the test it is throwing the null pointer exception which is happening inside the `ObjBeingMocked.getFeatures` -&gt; `JSONObject(getFeaturesString(context)!!)` -&gt; `getFeaturesString(context)` returns null in real method.\r\n\r\nBut it should not happens if ObjBeingMocked being mocked. \r\n\r\n\r\nI have tried Matt&#39;s blog on this https://matthew-b-groves.medium.com/matts-tidbits-29-how-to-mock-kotlin-singletons-without-using-powermock-938da069fa88\r\n\r\nMaking ObjBeingMocked to implement a interface `IObjBeingMocked`.  \r\nMock that interface and injecting the mocked into `fetchBusinessData` method.\r\n\r\nNow everything working fine. But ObjBeingMocked is being used at so many places in the project.\r\nInjecting IObjBeingMocked to all methods inside all repositories was a heavy task.\r\n\r\nAlso not sure why `ObjBeingMocked.getFeatures(instrumentationContext)` is calling real method eventhough stub method is there in the test.\r\n\r\n```\r\nmockkObject(ObjBeingMocked) {\r\n            val featureMock = mockk&lt;Feature&gt;()\r\n\r\n            every {\r\n                ObjBeingMocked.getFeatures(instrumentationContext)\r\n            } returns featureMock\r\n```\r\n","title":"mockkObject calling real method instead of mocked object class | Android | Kotlin | Unit test","body":"<p>I am using mockk for unit testing my Android project.\nI am having an object class and that object class is used inside the repository which I am testing.\nThe mockk library I am using : &quot;io.mockk:mockk-android:1.13.7&quot;</p>\n<p>Repository :</p>\n<pre><code>class BusinessRepository() {\n\n    companion object {\n        private var businessRepository:BusinessRepository? = null\n        val instance: BusinessRepository?\n            get() {\n                if (businessRepository == null) {\n                    businessRepository = BusinessRepository()\n                }\n                return businessRepository\n            }\n    }\n\n    suspend fun fetchBusinessData(context:Context,businessData:MutableLiveData&lt;Feature&gt;?, ioDispatcher: CoroutineDispatcher = Dispatchers.IO) = withContext(ioDispatcher) \n    {\n        val feature = ObjBeingMocked.getFeatures(context)\n        businessData?.postValue(feature)\n        return@withContext\n    }\n}\n</code></pre>\n<p>Test Code :</p>\n<pre><code>@RunWith(AndroidJUnit4::class)\nclass BusinessRepositoryTest {\n    lateinit var businessRepository: BusinessRepository\n    var businessDataObservable: MutableLiveData&lt;Feature&gt; = MutableLiveData()\n\n    lateinit var instrumentationContext: Context\n    lateinit var testDispatcher: CoroutineDispatcher\n    private val mainThreadSurrogate = Executors\n        .newSingleThreadExecutor { Thread(it, &quot;UI-thread&quot;) }\n        .asCoroutineDispatcher()\n\n    @Before\n    fun setUp() {\n        Dispatchers.setMain(mainThreadSurrogate)\n        testDispatcher = TestCoroutineDispatcher()\n\n        businessRepository = BusinessRepository.instance!!\n        instrumentationContext = ApplicationProvider.getApplicationContext()\n    }\n\n    @Test\n    fun `fetchBusinessDataTest`() = runBlocking {\n\n        mockkObject(ObjBeingMocked) {\n            val featureMock = mockk&lt;Feature&gt;()\n\n            every {\n                ObjBeingMocked.getFeatures(instrumentationContext)\n            } returns featureMock\n\n            businessRepository.fetchBusinessDataExtra(\n                instrumentationContext,\n                businessDataObservable,\n                testDispatcher\n            )\n\n            delay(500)\n\n            val responseValue = businessDataObservable.value\n            assert(responseValue != null)\n        }\n\n    }\n\n    @After\n    fun tearDown() {\n        Dispatchers.resetMain()\n        unmockkAll()\n    }\n}\n</code></pre>\n<p>ObjBeingMocked.getFeatures :</p>\n<pre><code>object ObjBeingMocked {\n         fun getFeatures(context: Context): Feature {\n            val featureJson = JSONObject(getFeaturesString(context)!!)\n            val features = Feature(featureJson)\n            return features\n        }\n\n        fun getSharedPref(context: Context): String? {\n            // for testing the scenario I am returning null here\n            return null\n        }\n}\n</code></pre>\n<p>Now when I run the test it is throwing the null pointer exception which is happening inside the <code>ObjBeingMocked.getFeatures</code> -&gt; <code>JSONObject(getFeaturesString(context)!!)</code> -&gt; <code>getFeaturesString(context)</code> returns null in real method.</p>\n<p>But it should not happens if ObjBeingMocked being mocked.</p>\n<p>I have tried Matt's blog on this <a href=\"https://matthew-b-groves.medium.com/matts-tidbits-29-how-to-mock-kotlin-singletons-without-using-powermock-938da069fa88\" rel=\"nofollow noreferrer\">https://matthew-b-groves.medium.com/matts-tidbits-29-how-to-mock-kotlin-singletons-without-using-powermock-938da069fa88</a></p>\n<p>Making ObjBeingMocked to implement a interface <code>IObjBeingMocked</code>.<br />\nMock that interface and injecting the mocked into <code>fetchBusinessData</code> method.</p>\n<p>Now everything working fine. But ObjBeingMocked is being used at so many places in the project.\nInjecting IObjBeingMocked to all methods inside all repositories was a heavy task.</p>\n<p>Also not sure why <code>ObjBeingMocked.getFeatures(instrumentationContext)</code> is calling real method eventhough stub method is there in the test.</p>\n<pre><code>mockkObject(ObjBeingMocked) {\n            val featureMock = mockk&lt;Feature&gt;()\n\n            every {\n                ObjBeingMocked.getFeatures(instrumentationContext)\n            } returns featureMock\n</code></pre>\n"},{"tags":["java","postgresql","hibernate","spring-data-jpa","enumerated"],"comments":[{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1674726791,"post_id":75243732,"comment_id":132776922,"body_markdown":"As your `roles` table does not hold any additional information, why not replace it with a table that holds the userId and the enum string? No need for the join table as well as making the mapping easier","body":"As your <code>roles</code> table does not hold any additional information, why not replace it with a table that holds the userId and the enum string? No need for the join table as well as making the mapping easier"},{"owner":{"account_id":25470485,"reputation":21,"user_id":19268761,"display_name":"Nara Omur"},"score":0,"creation_date":1674730470,"post_id":75243732,"comment_id":132778002,"body_markdown":"Do you mean to change the whole logic now, user can have several roles as well as the role has several users whereas with one table having user-id and the roles would be not good in terms of readability of the logic, I think","body":"Do you mean to change the whole logic now, user can have several roles as well as the role has several users whereas with one table having user-id and the roles would be not good in terms of readability of the logic, I think"},{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1674741838,"post_id":75243732,"comment_id":132781490,"body_markdown":"Does this answer your question? [Hibernate mapping between PostgreSQL enum and Java enum](https://stackoverflow.com/questions/27804069/hibernate-mapping-between-postgresql-enum-and-java-enum)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/27804069/hibernate-mapping-between-postgresql-enum-and-java-enum\">Hibernate mapping between PostgreSQL enum and Java enum</a>"},{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1674741978,"post_id":75243732,"comment_id":132781543,"body_markdown":"Just saw that you are mapping it to an ENUM column in postgres. Hibernate doesn&#39;t natively support a mapping to this AFAIK. Link above shows how to handle that. `@Enumerated(EnumType.STRING)` tells hibernate how you want to persist the java enum in the database. `EnumType.STRING` persists it as a string, mapping to a `varchar` column. `EnumType.ORDINAL` persists as a number, usually mapping to a `numeric` column","body":"Just saw that you are mapping it to an ENUM column in postgres. Hibernate doesn&#39;t natively support a mapping to this AFAIK. Link above shows how to handle that. <code>@Enumerated(EnumType.STRING)</code> tells hibernate how you want to persist the java enum in the database. <code>EnumType.STRING</code> persists it as a string, mapping to a <code>varchar</code> column. <code>EnumType.ORDINAL</code> persists as a number, usually mapping to a <code>numeric</code> column"},{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":1,"creation_date":1674742217,"post_id":75243732,"comment_id":132781631,"body_markdown":"You can either change the column type in your database to `varchar` to get the enum value persisted. Or you implement the [custom-type](https://vladmihalcea.com/the-best-way-to-map-an-enum-type-with-jpa-and-hibernate/)","body":"You can either change the column type in your database to <code>varchar</code> to get the enum value persisted. Or you implement the <a href=\"https://vladmihalcea.com/the-best-way-to-map-an-enum-type-with-jpa-and-hibernate/\" rel=\"nofollow noreferrer\">custom-type</a>"}],"answers":[{"tags":[],"owner":{"account_id":25470485,"reputation":21,"user_id":19268761,"display_name":"Nara Omur"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1692249022,"creation_date":1692249022,"answer_id":76918630,"question_id":75243732,"body_markdown":"I know it&#39;s been a while but recently saw this question in my profile without closure and flashed back on how I solved this and moved on. \r\n\r\nSo as @XtremeBaumer mentioned about varchar I got an idea just to make table roles as a dictionary that will hold static data or rarely modify. So I just inserted the three levels of roles as VARCHAR values and the hibernate many-to-many mapping did the rest of the magic on joining table user_roles. \r\n\r\n","title":"Enum values are not saved in the database(PostgreSql)","body":"<p>I know it's been a while but recently saw this question in my profile without closure and flashed back on how I solved this and moved on.</p>\n<p>So as @XtremeBaumer mentioned about varchar I got an idea just to make table roles as a dictionary that will hold static data or rarely modify. So I just inserted the three levels of roles as VARCHAR values and the hibernate many-to-many mapping did the rest of the magic on joining table user_roles.</p>\n"}],"owner":{"account_id":25470485,"reputation":21,"user_id":19268761,"display_name":"Nara Omur"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":163,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76918630,"answer_count":1,"score":0,"last_activity_date":1692249022,"creation_date":1674722051,"question_id":75243732,"body_markdown":"The issue is that the enum values are not being saved in the database, so whenever I register new user it returns user with 0 role size even though I have all the right configurations, so came to the root cause which is enum values of ERole not being saved in the database and the Role table is empty. \r\n\r\nERole enum:\r\n\r\n```\r\npublic enum ERole {\r\n    ROLE_USER,\r\n    ROLE_MODERATOR,\r\n    ROLE_ADMIN\r\n}\r\n```\r\n\r\n\r\nRole entity:\r\n\r\n\r\n```\r\n@EqualsAndHashCode\r\n@NoArgsConstructor\r\n@Getter\r\n@Setter\r\n@Entity\r\n@Table(name = &quot;roles&quot;)\r\npublic class Role implements Serializable {\r\n\r\n    private static final long serialVersionUID = 1L;\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private Long id;\r\n    @Enumerated(EnumType.STRING)\r\n    @Column(length = 20)\r\n    private ERole role;\r\n    @ManyToMany(mappedBy=&quot;roles&quot;)\r\n    private List&lt;User&gt; users = new ArrayList&lt;&gt;();\r\n    public Role(ERole role) {\r\n        this.role = role;\r\n    }\r\n}\r\n```\r\n\r\nUser entity:\r\n\r\n\r\n```\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@EqualsAndHashCode\r\n@Entity\r\n@Table(name = &quot;users&quot;,\r\n        uniqueConstraints = {\r\n                @UniqueConstraint(columnNames = &quot;name&quot;),\r\n        })\r\npublic class User implements Serializable {\r\n    private static final long serialVersionUID = 1L;\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private Long id;\r\n    private String name;\r\n    private String pass;\r\n\r\n    @JsonIgnoreProperties(&quot;users&quot;)\r\n    @ManyToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER)\r\n    @JoinTable(name = &quot;user_roles&quot;,\r\n            joinColumns = { @JoinColumn(name = &quot;user_id&quot;) },\r\n            inverseJoinColumns = { @JoinColumn(name = &quot;role_id&quot;) })\r\n    private List&lt;Role&gt; roles = new ArrayList&lt;&gt;();\r\n    public User(String name, String pass) {\r\n        this.name = name;\r\n        this.pass = pass;\r\n    }\r\n}\r\n```\r\nAs you see below in the diagram Role entity has the role column with ERole type\r\n[![enter image description here][1]][1]\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nI have seen the oter similar threads where it is suggested to use the @Enumerated(EnumType.STRING) which I&#39;ve been using in the first place. \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/LXSlJ.jpg","title":"Enum values are not saved in the database(PostgreSql)","body":"<p>The issue is that the enum values are not being saved in the database, so whenever I register new user it returns user with 0 role size even though I have all the right configurations, so came to the root cause which is enum values of ERole not being saved in the database and the Role table is empty.</p>\n<p>ERole enum:</p>\n<pre><code>public enum ERole {\n    ROLE_USER,\n    ROLE_MODERATOR,\n    ROLE_ADMIN\n}\n</code></pre>\n<p>Role entity:</p>\n<pre><code>@EqualsAndHashCode\n@NoArgsConstructor\n@Getter\n@Setter\n@Entity\n@Table(name = &quot;roles&quot;)\npublic class Role implements Serializable {\n\n    private static final long serialVersionUID = 1L;\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Long id;\n    @Enumerated(EnumType.STRING)\n    @Column(length = 20)\n    private ERole role;\n    @ManyToMany(mappedBy=&quot;roles&quot;)\n    private List&lt;User&gt; users = new ArrayList&lt;&gt;();\n    public Role(ERole role) {\n        this.role = role;\n    }\n}\n</code></pre>\n<p>User entity:</p>\n<pre><code>@Getter\n@Setter\n@NoArgsConstructor\n@EqualsAndHashCode\n@Entity\n@Table(name = &quot;users&quot;,\n        uniqueConstraints = {\n                @UniqueConstraint(columnNames = &quot;name&quot;),\n        })\npublic class User implements Serializable {\n    private static final long serialVersionUID = 1L;\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Long id;\n    private String name;\n    private String pass;\n\n    @JsonIgnoreProperties(&quot;users&quot;)\n    @ManyToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER)\n    @JoinTable(name = &quot;user_roles&quot;,\n            joinColumns = { @JoinColumn(name = &quot;user_id&quot;) },\n            inverseJoinColumns = { @JoinColumn(name = &quot;role_id&quot;) })\n    private List&lt;Role&gt; roles = new ArrayList&lt;&gt;();\n    public User(String name, String pass) {\n        this.name = name;\n        this.pass = pass;\n    }\n}\n</code></pre>\n<p>As you see below in the diagram Role entity has the role column with ERole type\n<a href=\"https://i.stack.imgur.com/LXSlJ.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LXSlJ.jpg\" alt=\"enter image description here\" /></a></p>\n<p>I have seen the oter similar threads where it is suggested to use the @Enumerated(EnumType.STRING) which I've been using in the first place.</p>\n"},{"tags":["java","android","localdate","localtime"],"comments":[{"owner":{"account_id":1710326,"reputation":10640,"user_id":1568530,"accept_rate":60,"display_name":"Vladyslav Matviienko"},"score":0,"creation_date":1561098331,"post_id":56695997,"comment_id":99960112,"body_markdown":"It is quite obvious that you can&#39;t use newer features on older devices. You have to either implement this feature by yourself, or find a library that provides similar functionality","body":"It is quite obvious that you can&#39;t use newer features on older devices. You have to either implement this feature by yourself, or find a library that provides similar functionality"},{"owner":{"account_id":18506166,"reputation":147,"user_id":13482411,"display_name":"joakie"},"score":0,"creation_date":1692218140,"post_id":56695997,"comment_id":135595435,"body_markdown":"Many years have past but I just wanted to point out that the comment by @VladyslavMatviienko is not valid anymore.","body":"Many years have past but I just wanted to point out that the comment by @VladyslavMatviienko is not valid anymore."}],"answers":[{"comments":[{"owner":{"account_id":15993409,"reputation":423,"user_id":11541955,"display_name":"Anna"},"score":0,"creation_date":1561084269,"post_id":56696061,"comment_id":99957143,"body_markdown":"I just followed the link you gave me but the error is always there :(","body":"I just followed the link you gave me but the error is always there :("}],"tags":[],"owner":{"account_id":12401582,"reputation":2466,"user_id":9038584,"accept_rate":75,"display_name":"Tenten Ponce"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1561083527,"creation_date":1561083527,"answer_id":56696061,"question_id":56695997,"body_markdown":"You can use [ThreeTenBP](https://www.threeten.org/threetenbp/). But for android it is recommended to use Jake Wharton&#39;s [ThreeTenABP](https://github.com/JakeWharton/ThreeTenABP). \n\n**Why not use ThreeTenBP?**\n\n&gt; Similar to the problems with using Joda-Time on Android, the threetenbp uses a JAR resource for loading timezone information. This is an extremely inefficient mechanism on Android.\n&gt;\n&gt; This library places the timezone information as a standard Android asset and provides a custom loader for parsing it efficiently.\n\n**Why not use Joda-Time?**\n\n&gt; Joda-Time has a very large API which brings with it a very large binary size and large method count. The creator of both JSR-310 and Joda-Time has also said that while Joda-Time isn&#39;t broken, it does have design flaws.\n&gt;\n&gt; If you are using Joda-Time already, there&#39;s little reason to switch unless its size or method count is relevant to you. For new projects, however, this library offers the standard APIs in Java 8 as a much smaller package in not only binary size and method count, but also in API size.\n\nThese explanations came from Jake Wharton&#39;s ThreeTenABP.","title":"How to fix &quot;Call requires API level 26 (current min is 25) &quot; error in Android","body":"<p>You can use <a href=\"https://www.threeten.org/threetenbp/\" rel=\"nofollow noreferrer\">ThreeTenBP</a>. But for android it is recommended to use Jake Wharton's <a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"nofollow noreferrer\">ThreeTenABP</a>.</p>\n<p><strong>Why not use ThreeTenBP?</strong></p>\n<blockquote>\n<p>Similar to the problems with using Joda-Time on Android, the threetenbp uses a JAR resource for loading timezone information. This is an extremely inefficient mechanism on Android.</p>\n<p>This library places the timezone information as a standard Android asset and provides a custom loader for parsing it efficiently.</p>\n</blockquote>\n<p><strong>Why not use Joda-Time?</strong></p>\n<blockquote>\n<p>Joda-Time has a very large API which brings with it a very large binary size and large method count. The creator of both JSR-310 and Joda-Time has also said that while Joda-Time isn't broken, it does have design flaws.</p>\n<p>If you are using Joda-Time already, there's little reason to switch unless its size or method count is relevant to you. For new projects, however, this library offers the standard APIs in Java 8 as a much smaller package in not only binary size and method count, but also in API size.</p>\n</blockquote>\n<p>These explanations came from Jake Wharton's ThreeTenABP.</p>\n"},{"comments":[{"owner":{"account_id":5805882,"reputation":329,"user_id":4578512,"accept_rate":75,"display_name":"Hiro"},"score":1,"creation_date":1606329631,"post_id":56696502,"comment_id":114934706,"body_markdown":"It is recommended now in the ThreeTenABP repo that you use code desugaring(https://developer.android.com/studio/write/java8-support#library-desugaring)","body":"It is recommended now in the ThreeTenABP repo that you use code desugaring(<a href=\"https://developer.android.com/studio/write/java8-support#library-desugaring\" rel=\"nofollow noreferrer\">developer.android.com/studio/write/&hellip;</a>)"}],"tags":[],"owner":{"account_id":6098078,"reputation":28937,"user_id":4758255,"display_name":"ישו אוהב אותך"},"comment_count":1,"down_vote_count":2,"up_vote_count":44,"is_accepted":true,"score":42,"last_activity_date":1692248622,"creation_date":1561087958,"answer_id":56696502,"question_id":56695997,"body_markdown":"You need to use https://github.com/JakeWharton/ThreeTenABP to be able using LocalDateTime with Android API &lt; 26.\r\n\r\nAdd the dependencies to your project (please follow the project README):\r\n\r\n    implementation &#39;com.jakewharton.threetenabp:threetenabp:1.2.1&#39;\r\n\r\n\r\nThen change your `LocalDateTime` import from:\r\n\r\n\r\n    import java.time.LocalDateTime;\r\n\r\nto:\r\n\r\n\r\n    import org.threeten.bp.LocalDateTime;\r\n\r\nand please do not forget to call `AndroidThreeTen.init(this)` in your Application class `onCreate` method like;\r\n\r\n    class MyApplication : Application() {\r\n    \r\n        override fun onCreate() {\r\n            super.onCreate()\r\n            AndroidThreeTen.init(this);\r\n        }\r\n    \r\n    }\r\n\r\n----------\r\n\r\n## Update: ##\r\n\r\nThe library mentioned above is no longer the best way as mentioned in [JakeWharton/ThreeTenABP][1] README:\r\n&gt; Attention: Development on this library is winding down. Please consider switching to Android Gradle plugin 4.0, java.time.*, and its core library desugaring feature in the coming months.\r\n\r\nTo use `LocalDateTime` in older API levels, use the desugaring feature from Gradle plugin 4.0:\r\nhttps://developer.android.com/studio/write/java8-support#library-desugaring\r\n\r\n  [1]: https://github.com/JakeWharton/ThreeTenABP","title":"How to fix &quot;Call requires API level 26 (current min is 25) &quot; error in Android","body":"<p>You need to use <a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"nofollow noreferrer\">https://github.com/JakeWharton/ThreeTenABP</a> to be able using LocalDateTime with Android API &lt; 26.</p>\n<p>Add the dependencies to your project (please follow the project README):</p>\n<pre><code>implementation 'com.jakewharton.threetenabp:threetenabp:1.2.1'\n</code></pre>\n<p>Then change your <code>LocalDateTime</code> import from:</p>\n<pre><code>import java.time.LocalDateTime;\n</code></pre>\n<p>to:</p>\n<pre><code>import org.threeten.bp.LocalDateTime;\n</code></pre>\n<p>and please do not forget to call <code>AndroidThreeTen.init(this)</code> in your Application class <code>onCreate</code> method like;</p>\n<pre><code>class MyApplication : Application() {\n\n    override fun onCreate() {\n        super.onCreate()\n        AndroidThreeTen.init(this);\n    }\n\n}\n</code></pre>\n<hr />\n<h2>Update:</h2>\n<p>The library mentioned above is no longer the best way as mentioned in <a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"nofollow noreferrer\">JakeWharton/ThreeTenABP</a> README:</p>\n<blockquote>\n<p>Attention: Development on this library is winding down. Please consider switching to Android Gradle plugin 4.0, java.time.*, and its core library desugaring feature in the coming months.</p>\n</blockquote>\n<p>To use <code>LocalDateTime</code> in older API levels, use the desugaring feature from Gradle plugin 4.0:\n<a href=\"https://developer.android.com/studio/write/java8-support#library-desugaring\" rel=\"nofollow noreferrer\">https://developer.android.com/studio/write/java8-support#library-desugaring</a></p>\n"},{"comments":[{"owner":{"account_id":1687510,"reputation":5234,"user_id":1550476,"accept_rate":59,"display_name":"Thanh Nguyen"},"score":3,"creation_date":1629772411,"post_id":63489950,"comment_id":121769162,"body_markdown":"This is recommended way by Google. Reference: https://developer.android.com/studio/write/java8-support#library-desugaring","body":"This is recommended way by Google. Reference: <a href=\"https://developer.android.com/studio/write/java8-support#library-desugaring\" rel=\"nofollow noreferrer\">developer.android.com/studio/write/&hellip;</a>"},{"owner":{"account_id":18506166,"reputation":147,"user_id":13482411,"display_name":"joakie"},"score":0,"creation_date":1692219413,"post_id":63489950,"comment_id":135595661,"body_markdown":"Also, from the Android site: &quot;With Android Gradle plugin 7.4.0 or higher, a number of Java 11 language APIs are also available with desugared library 2.0.0 or higher.&quot; These libraries come in three different flavors: minimal, default and nio (this one being the catch-all flavor since it also includes the packages from  the other two).","body":"Also, from the Android site: &quot;With Android Gradle plugin 7.4.0 or higher, a number of Java 11 language APIs are also available with desugared library 2.0.0 or higher.&quot; These libraries come in three different flavors: minimal, default and nio (this one being the catch-all flavor since it also includes the packages from  the other two)."}],"tags":[],"owner":{"account_id":3892541,"reputation":1057,"user_id":3222339,"accept_rate":43,"display_name":"Jim"},"comment_count":2,"down_vote_count":0,"up_vote_count":52,"is_accepted":false,"score":52,"last_activity_date":1601359076,"creation_date":1597849601,"answer_id":63489950,"question_id":56695997,"body_markdown":"The best way to use `LocalDateTime` on a lower versions of Android is by desugaring (you must have Android Gradle plugin version 4.0 or higher). Just add the below lines to your `app` module gradle file:\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/BZdTu.png\r\n\r\n\r\nFinally, add the ff. dependency to your dependencies block:\r\n\r\n`coreLibraryDesugaring &#39;com.android.tools:desugar_jdk_libs:1.0.10&#39;`","title":"How to fix &quot;Call requires API level 26 (current min is 25) &quot; error in Android","body":"<p>The best way to use <code>LocalDateTime</code> on a lower versions of Android is by desugaring (you must have Android Gradle plugin version 4.0 or higher). Just add the below lines to your <code>app</code> module gradle file:</p>\n<p><a href=\"https://i.stack.imgur.com/BZdTu.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/BZdTu.png\" alt=\"enter image description here\" /></a></p>\n<p>Finally, add the ff. dependency to your dependencies block:</p>\n<p><code>coreLibraryDesugaring 'com.android.tools:desugar_jdk_libs:1.0.10'</code></p>\n"},{"comments":[{"owner":{"account_id":6205573,"reputation":18140,"user_id":4833705,"accept_rate":86,"display_name":"Lance Samaria"},"score":0,"creation_date":1683068211,"post_id":70418040,"comment_id":134309205,"body_markdown":"this answer worked for me because with just adding the dependency `coreLibraryDesugaring(&quot;com.android.tools:desugar_jdk_libs:1.1.5&quot;)`, I had to put `@RequiresApi(Build.VERSION_CODES.O)` above the function that used the code that required API26. Once I added `coreLibraryDesugaringEnabled = true` to the `compileOptions`, I no longer had to do that.","body":"this answer worked for me because with just adding the dependency <code>coreLibraryDesugaring(&quot;com.android.tools:desugar_jdk_libs:1.&zwnj;&#8203;1.5&quot;)</code>, I had to put <code>@RequiresApi(Build.VERSION_CODES.O)</code> above the function that used the code that required API26. Once I added <code>coreLibraryDesugaringEnabled = true</code> to the <code>compileOptions</code>, I no longer had to do that."}],"tags":[],"owner":{"account_id":10805772,"reputation":1669,"user_id":7948109,"display_name":"Rahul Gaur"},"comment_count":1,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1639981266,"creation_date":1639981266,"answer_id":70418040,"question_id":56695997,"body_markdown":"To use `LocalDateTime` on lower versions of Android is by desugaring (you must have Android Gradle plugin version 4.0 or higher) enable java8 and use the code below in your `app.gradle`\r\n\r\n```\r\nandroid {\r\n    defaultConfig {\r\n        // Required when setting minSdkVersion to 20 or lower\r\n        multiDexEnabled = true\r\n    }\r\n\r\n    compileOptions {\r\n        // Flag to enable support for the new language APIs\r\n        coreLibraryDesugaringEnabled = true // &lt;- this flag is required\r\n\r\n        // Sets Java compatibility to Java 8\r\n        sourceCompatibility = JavaVersion.VERSION_1_8\r\n        targetCompatibility = JavaVersion.VERSION_1_8\r\n    }\r\n\r\n    // For Kotlin projects\r\n    kotlinOptions {\r\n        jvmTarget = &quot;1.8&quot;\r\n    }\r\n}\r\n\r\ndependencies {\r\n    coreLibraryDesugaring(&quot;com.android.tools:desugar_jdk_libs:1.1.5&quot;) // &lt;- this dependency is required\r\n}\r\n```\r\n\r\n\r\n[Supporting docs](https://developer.android.com/studio/write/java8-support#library-desugaring)","title":"How to fix &quot;Call requires API level 26 (current min is 25) &quot; error in Android","body":"<p>To use <code>LocalDateTime</code> on lower versions of Android is by desugaring (you must have Android Gradle plugin version 4.0 or higher) enable java8 and use the code below in your <code>app.gradle</code></p>\n<pre><code>android {\n    defaultConfig {\n        // Required when setting minSdkVersion to 20 or lower\n        multiDexEnabled = true\n    }\n\n    compileOptions {\n        // Flag to enable support for the new language APIs\n        coreLibraryDesugaringEnabled = true // &lt;- this flag is required\n\n        // Sets Java compatibility to Java 8\n        sourceCompatibility = JavaVersion.VERSION_1_8\n        targetCompatibility = JavaVersion.VERSION_1_8\n    }\n\n    // For Kotlin projects\n    kotlinOptions {\n        jvmTarget = &quot;1.8&quot;\n    }\n}\n\ndependencies {\n    coreLibraryDesugaring(&quot;com.android.tools:desugar_jdk_libs:1.1.5&quot;) // &lt;- this dependency is required\n}\n</code></pre>\n<p><a href=\"https://developer.android.com/studio/write/java8-support#library-desugaring\" rel=\"noreferrer\">Supporting docs</a></p>\n"},{"tags":[],"owner":{"account_id":7626501,"reputation":1346,"user_id":5782795,"display_name":"Amir"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646280686,"creation_date":1646280686,"answer_id":71332061,"question_id":56695997,"body_markdown":"If you have `coreLibraryDesugaringEnabled = true ` as mentioned above but still see the issue is not resolved, check that you have the latest coreLibraryDesugaring version as in my case it was `1.1.1` which upgrading to `1.1.5` fixed the issue.\r\n","title":"How to fix &quot;Call requires API level 26 (current min is 25) &quot; error in Android","body":"<p>If you have <code>coreLibraryDesugaringEnabled = true </code> as mentioned above but still see the issue is not resolved, check that you have the latest coreLibraryDesugaring version as in my case it was <code>1.1.1</code> which upgrading to <code>1.1.5</code> fixed the issue.</p>\n"},{"comments":[{"owner":{"account_id":16632079,"reputation":2166,"user_id":16547945,"display_name":"Vojin Purić"},"score":0,"creation_date":1670256157,"post_id":74636292,"comment_id":131828486,"body_markdown":"This does not provide an answer to the question. Once you have sufficient [reputation](https://stackoverflow.com/help/whats-reputation) you will be able to [comment on any post](https://stackoverflow.com/help/privileges/comment); instead, [provide answers that don&#39;t require clarification from the asker](https://meta.stackexchange.com/questions/214173/why-do-i-need-50-reputation-to-comment-what-can-i-do-instead). - [From Review](/review/late-answers/33310432)","body":"This does not provide an answer to the question. Once you have sufficient <a href=\"https://stackoverflow.com/help/whats-reputation\">reputation</a> you will be able to <a href=\"https://stackoverflow.com/help/privileges/comment\">comment on any post</a>; instead, <a href=\"https://meta.stackexchange.com/questions/214173/why-do-i-need-50-reputation-to-comment-what-can-i-do-instead\">provide answers that don&#39;t require clarification from the asker</a>. - <a href=\"/review/late-answers/33310432\">From Review</a>"}],"tags":[],"owner":{"account_id":26719252,"reputation":1,"user_id":20323388,"display_name":"Kenneth Tiet"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669861276,"creation_date":1669861276,"answer_id":74636292,"question_id":56695997,"body_markdown":"Don&#39;t forget to click &#39;Sync Project With Gradle Files&#39; for the configurations to take into effect.\r\n\r\nThis resolves the warning messages that remain.","title":"How to fix &quot;Call requires API level 26 (current min is 25) &quot; error in Android","body":"<p>Don't forget to click 'Sync Project With Gradle Files' for the configurations to take into effect.</p>\n<p>This resolves the warning messages that remain.</p>\n"}],"owner":{"account_id":15993409,"reputation":423,"user_id":11541955,"display_name":"Anna"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27263,"favorite_count":0,"down_vote_count":1,"up_vote_count":42,"accepted_answer_id":56696502,"answer_count":6,"score":41,"last_activity_date":1692248622,"creation_date":1561082797,"question_id":56695997,"body_markdown":"I know this question may be duplicated but I didn&#39;t find any answer for my problem, I&#39;m using `LocalDateTime` in my Android app that requires API 26 and my device&#39;s API is 25. \r\n\r\nWhat can I do? Your help will be very appreciated.","title":"How to fix &quot;Call requires API level 26 (current min is 25) &quot; error in Android","body":"<p>I know this question may be duplicated but I didn't find any answer for my problem, I'm using <code>LocalDateTime</code> in my Android app that requires API 26 and my device's API is 25. </p>\n\n<p>What can I do? Your help will be very appreciated.</p>\n"},{"tags":["java","spring-boot","hibernate","spring-data-jpa"],"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1692208803,"post_id":76912941,"comment_id":135593721,"body_markdown":"Do you mean Spring *Boot* version 3.1.0?","body":"Do you mean Spring <i>Boot</i> version 3.1.0?"},{"owner":{"account_id":456840,"reputation":2947,"user_id":855809,"accept_rate":59,"display_name":"Knight71"},"score":0,"creation_date":1692234489,"post_id":76912941,"comment_id":135597199,"body_markdown":"yes spring boot version","body":"yes spring boot version"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1692244456,"post_id":76912941,"comment_id":135597931,"body_markdown":"So fix your Question with that important detail.","body":"So fix your Question with that important detail."}],"answers":[{"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":1,"creation_date":1692189693,"post_id":76913477,"comment_id":135589699,"body_markdown":"Was this written by ChatGPT, or am I just high?","body":"Was this written by ChatGPT, or am I just high?"},{"owner":{"account_id":456840,"reputation":2947,"user_id":855809,"accept_rate":59,"display_name":"Knight71"},"score":1,"creation_date":1692248092,"post_id":76913477,"comment_id":135598226,"body_markdown":"spring 3.x uses jakarta","body":"spring 3.x uses jakarta"},{"owner":{"account_id":5221534,"reputation":314,"user_id":4174849,"display_name":"Omid"},"score":0,"creation_date":1692256053,"post_id":76913477,"comment_id":135599169,"body_markdown":"Yes, you are right. So just change the package namespace from javax.* to jakarta.*.","body":"Yes, you are right. So just change the package namespace from javax.* to jakarta.*."},{"owner":{"account_id":15396644,"reputation":25775,"user_id":11107541,"display_name":"starball"},"score":0,"creation_date":1692575673,"post_id":76913477,"comment_id":135638049,"body_markdown":"did you use chatgpt or any similar AI at all to write any part of this answer?","body":"did you use chatgpt or any similar AI at all to write any part of this answer?"}],"tags":[],"owner":{"account_id":5221534,"reputation":314,"user_id":4174849,"display_name":"Omid"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692188250,"creation_date":1692188250,"answer_id":76913477,"question_id":76912941,"body_markdown":"It seems like you&#39;re trying to use the Duration type. The problem is that the Duration type isn&#39;t natively supported by PostgreSQL. While you&#39;re using the @Type(PostgreSQLIntervalType.class) annotation, it appears that Hibernate might not be able to properly map the Duration type to a PostgreSQL interval type.\r\n\r\nTo work around this issue, you might need to handle the mapping of the Duration type yourself, potentially by converting it to an appropriate format that PostgreSQL can understand.\r\n\r\nHere&#39;s a general approach you can consider:\r\n\r\n1- Create a custom attribute converter to convert between Duration and String representations that PostgreSQL can handle.\r\n\r\n    import javax.persistence.AttributeConverter;\r\n    import javax.persistence.Converter;\r\n    import java.time.Duration;\r\n\r\n    @Converter\r\n    public class DurationToStringConverter implements AttributeConverter&lt;Duration, String&gt; {\r\n\r\n    @Override\r\n    public String convertToDatabaseColumn(Duration attribute) {\r\n        return attribute.toString(); // Convert Duration to a format PostgreSQL understands\r\n    }\r\n\r\n    @Override\r\n    public Duration convertToEntityAttribute(String dbData) {\r\n        return Duration.parse(dbData); // Convert back from the PostgreSQL format to Duration\r\n     }\r\n    }\r\n\r\n2 - Apply the custom attribute converter to your intervalValue field in your entity class.\r\n\r\n\r\n    @Entity\r\n    public class YourEntity {\r\n    // ...\r\n\r\n    @NonNull\r\n    @Column(name = &quot;interval_value&quot;, nullable = false)\r\n    @Convert(converter = DurationToStringConverter.class)\r\n    private Duration intervalValue;\r\n\r\n    // ... \r\n    }\r\n\r\nBy using this custom attribute converter, you&#39;re effectively converting the Duration type to a String representation that PostgreSQL can handle, and then converting it back to a Duration when retrieving from the database.\r\n\r\n","title":"Unable to build Hibernate SessionFactory when using interval data type","body":"<p>It seems like you're trying to use the Duration type. The problem is that the Duration type isn't natively supported by PostgreSQL. While you're using the @Type(PostgreSQLIntervalType.class) annotation, it appears that Hibernate might not be able to properly map the Duration type to a PostgreSQL interval type.</p>\n<p>To work around this issue, you might need to handle the mapping of the Duration type yourself, potentially by converting it to an appropriate format that PostgreSQL can understand.</p>\n<p>Here's a general approach you can consider:</p>\n<p>1- Create a custom attribute converter to convert between Duration and String representations that PostgreSQL can handle.</p>\n<pre><code>import javax.persistence.AttributeConverter;\nimport javax.persistence.Converter;\nimport java.time.Duration;\n\n@Converter\npublic class DurationToStringConverter implements AttributeConverter&lt;Duration, String&gt; {\n\n@Override\npublic String convertToDatabaseColumn(Duration attribute) {\n    return attribute.toString(); // Convert Duration to a format PostgreSQL understands\n}\n\n@Override\npublic Duration convertToEntityAttribute(String dbData) {\n    return Duration.parse(dbData); // Convert back from the PostgreSQL format to Duration\n }\n}\n</code></pre>\n<p>2 - Apply the custom attribute converter to your intervalValue field in your entity class.</p>\n<pre><code>@Entity\npublic class YourEntity {\n// ...\n\n@NonNull\n@Column(name = &quot;interval_value&quot;, nullable = false)\n@Convert(converter = DurationToStringConverter.class)\nprivate Duration intervalValue;\n\n// ... \n}\n</code></pre>\n<p>By using this custom attribute converter, you're effectively converting the Duration type to a String representation that PostgreSQL can handle, and then converting it back to a Duration when retrieving from the database.</p>\n"}],"owner":{"account_id":456840,"reputation":2947,"user_id":855809,"accept_rate":59,"display_name":"Knight71"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":111,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1692248060,"creation_date":1692183793,"question_id":76912941,"body_markdown":"I am adding the below column in my entity class\r\n\r\n    @NonNull\r\n    @Column(name = &quot;interval_value&quot;, nullable = false)\r\n    @Type(PostgreSQLIntervalType.class)\r\n    private Duration intervalValue;\r\n\r\n\r\nWhen I use the \r\n      \r\n      spring.jpa.hibernate.ddl-auto: create\r\n      database-platform: org.hibernate.dialect.PostgreSQLDialect\r\n\r\nI am getting error in the sql\r\n\r\nUnable to build Hibernate SessionFactory; nested exception is org.hibernate.MappingException: Error creating SQL create commands for table : \r\n\r\nmodule pom.xml\r\n \r\n\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.hypersistence&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hypersistence-utils-hibernate-62&lt;/artifactId&gt;\r\n            &lt;version&gt;3.5.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n       &lt;dependency&gt;\r\n            &lt;groupId&gt;jakarta.validation&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jakarta.validation-api&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n       &lt;dependency&gt;\r\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n            &lt;version&gt;42.6.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\nRoot pom.xml\r\n      \r\n\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;3.1.1&lt;/version&gt;\r\n        &lt;relativePath /&gt; \r\n     &lt;/parent&gt;\r\n\r\nHow to add interval column using spring jpa entity ?","title":"Unable to build Hibernate SessionFactory when using interval data type","body":"<p>I am adding the below column in my entity class</p>\n<pre><code>@NonNull\n@Column(name = &quot;interval_value&quot;, nullable = false)\n@Type(PostgreSQLIntervalType.class)\nprivate Duration intervalValue;\n</code></pre>\n<p>When I use the</p>\n<pre><code>  spring.jpa.hibernate.ddl-auto: create\n  database-platform: org.hibernate.dialect.PostgreSQLDialect\n</code></pre>\n<p>I am getting error in the sql</p>\n<p>Unable to build Hibernate SessionFactory; nested exception is org.hibernate.MappingException: Error creating SQL create commands for table :</p>\n<p>module pom.xml</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;io.hypersistence&lt;/groupId&gt;\n        &lt;artifactId&gt;hypersistence-utils-hibernate-62&lt;/artifactId&gt;\n        &lt;version&gt;3.5.0&lt;/version&gt;\n    &lt;/dependency&gt;\n   &lt;dependency&gt;\n        &lt;groupId&gt;jakarta.validation&lt;/groupId&gt;\n        &lt;artifactId&gt;jakarta.validation-api&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n   &lt;dependency&gt;\n        &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n        &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n        &lt;version&gt;42.6.0&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>Root pom.xml</p>\n<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;3.1.1&lt;/version&gt;\n    &lt;relativePath /&gt; \n &lt;/parent&gt;\n</code></pre>\n<p>How to add interval column using spring jpa entity ?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":3,"creation_date":1471653706,"post_id":39049298,"comment_id":65448433,"body_markdown":"Er, get the users to tell you? In the file name? You don&#39;t actually need the class name, only the filename.","body":"Er, get the users to tell you? In the file name? You don&#39;t actually need the class name, only the filename."},{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":0,"creation_date":1471654397,"post_id":39049298,"comment_id":65448540,"body_markdown":"Now that I read your question text again, I&#39;m confused. If *&quot;users [...] send [you] a .java file&quot;*, then you already know the name of the file, so why renamed it. And since the file is supposed to contain a `public` class, it&#39;s up to the user to ensure it does. Knowing the name of the file means you also know the name of the class, so you know how to both compile and run it.","body":"Now that I read your question text again, I&#39;m confused. If <i>&quot;users [...] send [you] a .java file&quot;</i>, then you already know the name of the file, so why renamed it. And since the file is supposed to contain a <code>public</code> class, it&#39;s up to the user to ensure it does. Knowing the name of the file means you also know the name of the class, so you know how to both compile and run it."},{"owner":{"account_id":6354503,"reputation":1344,"user_id":4932340,"accept_rate":48,"display_name":"Trevor"},"score":0,"creation_date":1471655915,"post_id":39049298,"comment_id":65448748,"body_markdown":"@Andreas to clarify, they are only sending a string of text, not a named file.","body":"@Andreas to clarify, they are only sending a string of text, not a named file."},{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":0,"creation_date":1471658263,"post_id":39049298,"comment_id":65449058,"body_markdown":"So instruct them to call the class something specific, e.g. `Challenge`, `Assignment`, `Exercise`, etc. If you name the file `Challenge.java` and it won&#39;t compile, or if it compiles but doesn&#39;t create a class of the right name, or the class doesn&#39;t have a `main()` method, then they failed the challenge/assignment/exercise.","body":"So instruct them to call the class something specific, e.g. <code>Challenge</code>, <code>Assignment</code>, <code>Exercise</code>, etc. If you name the file <code>Challenge.java</code> and it won&#39;t compile, or if it compiles but doesn&#39;t create a class of the right name, or the class doesn&#39;t have a <code>main()</code> method, then they failed the challenge/assignment/exercise."}],"answers":[{"comments":[{"owner":{"account_id":5957114,"reputation":281,"user_id":4683365,"display_name":"crystalfrost"},"score":0,"creation_date":1471654328,"post_id":39049374,"comment_id":65448527,"body_markdown":"It&#39;s about compiling the file, not running it, sure. But this answer targets directly that... since OP asked how to Compile the file w/o knowing the name of the class.","body":"It&#39;s about compiling the file, not running it, sure. But this answer targets directly that... since OP asked how to Compile the file w/o knowing the name of the class."},{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":1,"creation_date":1471654473,"post_id":39049374,"comment_id":65448548,"body_markdown":"Question says *&quot;which I compile, **evaluate the resulting class** and reply the output&quot;*. Evaluate means run, and for that you need class name.","body":"Question says <i>&quot;which I compile, <b>evaluate the resulting class</b> and reply the output&quot;</i>. Evaluate means run, and for that you need class name."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1471657492,"post_id":39049374,"comment_id":65448975,"body_markdown":"@Andreas ... not necessarily.  If you know the name of an interface that it implements ....","body":"@Andreas ... not necessarily.  If you know the name of an interface that it implements ...."},{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":0,"creation_date":1471658427,"post_id":39049374,"comment_id":65449075,"body_markdown":"@StephenC The question specifically shows a class with a `main()` method, which means that you need to run it. Even if you were right, you&#39;d still need to know the name of the class in order to instantiate it, before being able to use the interface to invoke a method.","body":"@StephenC The question specifically shows a class with a <code>main()</code> method, which means that you need to run it. Even if you were right, you&#39;d still need to know the name of the class in order to instantiate it, before being able to use the interface to invoke a method."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1471659861,"post_id":39049374,"comment_id":65449273,"body_markdown":"Again no.  You can use reflection to load a class and invoke its `main` method WITHOUT knowing its name.  And you do not need to instantiate a class to invoke its `main` entry point method because it is a `static` method.","body":"Again no.  You can use reflection to load a class and invoke its <code>main</code> method WITHOUT knowing its name.  And you do not need to instantiate a class to invoke its <code>main</code> entry point method because it is a <code>static</code> method."},{"owner":{"account_id":5957114,"reputation":281,"user_id":4683365,"display_name":"crystalfrost"},"score":1,"creation_date":1471660679,"post_id":39049374,"comment_id":65449408,"body_markdown":"So I wonder, would it be a valid solution to actually run a command based on the returned error? example, use the return value from the javac .java --&gt; error ---&gt; grep -o -P &#39;(?&lt;=class).*(?={)&#39; which should be the name of the class, store it in a variable and then run it as java &quot;storedClassName&quot;.","body":"So I wonder, would it be a valid solution to actually run a command based on the returned error? example, use the return value from the javac .java --&gt; error ---&gt; grep -o -P &#39;(?&lt;=class).*(?={)&#39; which should be the name of the class, store it in a variable and then run it as java &quot;storedClassName&quot;."},{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":0,"creation_date":1471723868,"post_id":39049374,"comment_id":65466026,"body_markdown":"@StephenC How can you load a class without knowing it&#39;s name? `Class.forName()` requires a name. The second point of my previous comment was that if you were going the interface route (which your prior comment was about), you&#39;d still need to know the name of the class to instantiate it. Either way, you need to know the class name to either 1) call the static `main()` method, or 2) instantiate the class so you can call interface methods. To &quot;evaluate&quot; a class you just compiled, you need to set up a classloader to find the class, then load it by name.","body":"@StephenC How can you load a class without knowing it&#39;s name? <code>Class.forName()</code> requires a name. The second point of my previous comment was that if you were going the interface route (which your prior comment was about), you&#39;d still need to know the name of the class to instantiate it. Either way, you need to know the class name to either 1) call the static <code>main()</code> method, or 2) instantiate the class so you can call interface methods. To &quot;evaluate&quot; a class you just compiled, you need to set up a classloader to find the class, then load it by name."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1471737150,"post_id":39049374,"comment_id":65468834,"body_markdown":"*&quot;How can you load a class without knowing it&#39;s name?&quot;* - Easy.  Use `javap` and scrape the output ... or write your own code to extract the name from the &quot;.class&quot; file.  Probably other ways too.","body":"<i>&quot;How can you load a class without knowing it&#39;s name?&quot;</i> - Easy.  Use <code>javap</code> and scrape the output ... or write your own code to extract the name from the &quot;.class&quot; file.  Probably other ways too."}],"tags":[],"owner":{"account_id":5957114,"reputation":281,"user_id":4683365,"display_name":"crystalfrost"},"comment_count":8,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1471653193,"creation_date":1471653193,"answer_id":39049374,"question_id":39049298,"body_markdown":"You can actually compile the class if you do not declare it as public.\r\n\r\nexample: \r\n\r\n    class Test {\r\n       public static void main(String[] args) {\r\n           System.out.println(&quot;Hello world&quot;);\r\n       }\r\n    }\r\n\r\nSave the file as .java, and compile as such on the cmd \r\n\r\n    javac .java\r\n\r\nYou can run afterwards by using the class name\r\n\r\n    java Test","title":"Compile .java file without knowing public class name","body":"<p>You can actually compile the class if you do not declare it as public.</p>\n\n<p>example: </p>\n\n<pre><code>class Test {\n   public static void main(String[] args) {\n       System.out.println(\"Hello world\");\n   }\n}\n</code></pre>\n\n<p>Save the file as .java, and compile as such on the cmd </p>\n\n<pre><code>javac .java\n</code></pre>\n\n<p>You can run afterwards by using the class name</p>\n\n<pre><code>java Test\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8794835,"reputation":75,"user_id":6573035,"display_name":"Suny"},"comment_count":0,"down_vote_count":4,"up_vote_count":1,"is_accepted":false,"score":-3,"last_activity_date":1471653999,"creation_date":1471653732,"answer_id":39049424,"question_id":39049298,"body_markdown":"The name of the class to keep the same name compiled，In &quot;public class HelloWorld &quot;,&#39;HelloWorld&#39; is the class name,At the same time,it is name of \r\ncompiled.&lt;br/&gt;\r\n\r\n    public class Hello{\r\n            public static void main(String[] args) {\r\n               System.out.println(&quot;Hello, World&quot;);\r\n        }\r\n    }\r\n\r\n&lt;br/&gt;\r\nThat you can compiled as such on the cmd `javac Hello.java`.&lt;br/&gt;\r\nRun `java Hello`&lt;br/&gt;\r\n&lt;hr/&gt;\r\n\r\n    public class Hello2{\r\n            public static void main(String[] args) {\r\n               System.out.println(&quot;Hello, Man&quot;);\r\n        }\r\n    }\r\n\r\nYou can complied as such on the cmd `javac Hello2.java`\r\n&lt;br/&gt;\r\nRun `java Hello2`","title":"Compile .java file without knowing public class name","body":"<p>The name of the class to keep the same name compiled，In \"public class HelloWorld \",'HelloWorld' is the class name,At the same time,it is name of \ncompiled.<br/></p>\n\n<pre><code>public class Hello{\n        public static void main(String[] args) {\n           System.out.println(\"Hello, World\");\n    }\n}\n</code></pre>\n\n<p><br/>\nThat you can compiled as such on the cmd <code>javac Hello.java</code>.<br/>\nRun <code>java Hello</code><br/></p>\n\n<hr/>\n\n<pre><code>public class Hello2{\n        public static void main(String[] args) {\n           System.out.println(\"Hello, Man\");\n    }\n}\n</code></pre>\n\n<p>You can complied as such on the cmd <code>javac Hello2.java</code>\n<br/>\nRun <code>java Hello2</code></p>\n"},{"comments":[{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":0,"creation_date":1471654577,"post_id":39049461,"comment_id":65448565,"body_markdown":"OP already saw that error message. It&#39;s in the question text.","body":"OP already saw that error message. It&#39;s in the question text."},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":0,"creation_date":1471655641,"post_id":39049461,"comment_id":65448706,"body_markdown":"@Andreas, OK, I missed seeing that in the OP&#39;s message, but my point is still the same.  The OP has the text of a Java file, and doesn&#39;t know what it&#39;s name should be.  If he makes up a name, and tries to compile it, the compiler helpfully _tells him_ what the name should be.  Obvious solution then, is to extract the file name from the error message and try again.","body":"@Andreas, OK, I missed seeing that in the OP&#39;s message, but my point is still the same.  The OP has the text of a Java file, and doesn&#39;t know what it&#39;s name should be.  If he makes up a name, and tries to compile it, the compiler helpfully <i>tells him</i> what the name should be.  Obvious solution then, is to extract the file name from the error message and try again."},{"owner":{"account_id":6354503,"reputation":1344,"user_id":4932340,"accept_rate":48,"display_name":"Trevor"},"score":0,"creation_date":1471655986,"post_id":39049461,"comment_id":65448757,"body_markdown":"I actually find this really clever, thanks @jameslarge","body":"I actually find this really clever, thanks @jameslarge"},{"owner":{"account_id":45531,"reputation":25386,"user_id":134252,"accept_rate":66,"display_name":"Dolda2000"},"score":0,"creation_date":1471656457,"post_id":39049461,"comment_id":65448830,"body_markdown":"Just look out so that you don&#39;t loop infinitely on files containing more than one public class. ;)","body":"Just look out so that you don&#39;t loop infinitely on files containing more than one public class. ;)"}],"tags":[],"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"comment_count":4,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1471655801,"creation_date":1471654123,"answer_id":39049461,"question_id":39049298,"body_markdown":"&gt; If I were to randomly assign ?????.java a name such as test.java and ran the command javac test.java then it would fail\n&gt;\n&gt; error: class HelloWorld is public, should be declared in a file named HelloWorld.java\n\nOK, so look at the error message!  The compiler is helpfully telling you what the name of the file should be.  Don&#39;t throw that information away.  Parse the error message to find the correct file name, re-name the file, and try again.\n","title":"Compile .java file without knowing public class name","body":"<blockquote>\n<p>If I were to randomly assign ?????.java a name such as test.java and ran the command javac test.java then it would fail</p>\n<p>error: class HelloWorld is public, should be declared in a file named HelloWorld.java</p>\n</blockquote>\n<p>OK, so look at the error message!  The compiler is helpfully telling you what the name of the file should be.  Don't throw that information away.  Parse the error message to find the correct file name, re-name the file, and try again.</p>\n"},{"tags":[],"owner":{"account_id":2693974,"reputation":113,"user_id":2326545,"display_name":"Catenation"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1471656491,"creation_date":1471656491,"answer_id":39049637,"question_id":39049298,"body_markdown":"I have a suggestion. When somebody send you xxxx.jar file, you must save it to somewhere, so you know the folder path. Then you could use below code to get name. After you get the file name and path, use java reflection technology to get the methods and invoke the methods.\r\n\r\n    final static void showAllFiles(File dir) throws Exception\r\n    {\r\n       File[] fs = dir.listFiles();\r\n       for(int i=0; i&lt;fs.length; i++)\r\n       {\r\n          // here you can get file name and path, then use reflection to get the instance and methods.\r\n       }\r\n    }","title":"Compile .java file without knowing public class name","body":"<p>I have a suggestion. When somebody send you xxxx.jar file, you must save it to somewhere, so you know the folder path. Then you could use below code to get name. After you get the file name and path, use java reflection technology to get the methods and invoke the methods.</p>\n\n<pre><code>final static void showAllFiles(File dir) throws Exception\n{\n   File[] fs = dir.listFiles();\n   for(int i=0; i&lt;fs.length; i++)\n   {\n      // here you can get file name and path, then use reflection to get the instance and methods.\n   }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3915513,"reputation":10992,"user_id":3239417,"display_name":"vsminkov"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1471656971,"creation_date":1471656553,"answer_id":39049642,"question_id":39049298,"body_markdown":"Well... To be able to evaluate custom code you also have to know a class name with `main` method.\r\n\r\nI think the cheapest way is to force users to stick to some sort of code convention i.e _&quot;package name should be foo.bar.baz, class name is Qux, main class is mandatory&quot;_. In that case you can just pass through an error message from compiler to user _as is_ and show a code convention.\r\n\r\nLess quick way is to do some dirty tricks like wrapping received code properly with another class with known name, messing with package names and then try to make reflective call to inner classes `main` method, but in that case you&#39;ll have a problems with proper error reports and easy to do it wrong.\r\n\r\nThe proper and potentially long way is to take java source code parser _(like [this][1])_, build AST, find out top-level class, rename file according package/class name and execute javac (or even produce bytecode from AST).\r\n\r\n**EDIT**\r\n\r\nAlso you can take a took at [java-repl][1] project. This can allow you to eval script-like programs.\r\n\r\nHope that helps!\r\n\r\n  [1]: https://github.com/javaparser/javaparser/wiki/Manual\r\n  [2]: https://github.com/albertlatacz/java-repl\r\n","title":"Compile .java file without knowing public class name","body":"<p>Well... To be able to evaluate custom code you also have to know a class name with <code>main</code> method.</p>\n\n<p>I think the cheapest way is to force users to stick to some sort of code convention i.e <em>\"package name should be foo.bar.baz, class name is Qux, main class is mandatory\"</em>. In that case you can just pass through an error message from compiler to user <em>as is</em> and show a code convention.</p>\n\n<p>Less quick way is to do some dirty tricks like wrapping received code properly with another class with known name, messing with package names and then try to make reflective call to inner classes <code>main</code> method, but in that case you'll have a problems with proper error reports and easy to do it wrong.</p>\n\n<p>The proper and potentially long way is to take java source code parser <em>(like <a href=\"https://github.com/javaparser/javaparser/wiki/Manual\" rel=\"nofollow\">this</a>)</em>, build AST, find out top-level class, rename file according package/class name and execute javac (or even produce bytecode from AST).</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Also you can take a took at <a href=\"https://github.com/javaparser/javaparser/wiki/Manual\" rel=\"nofollow\">java-repl</a> project. This can allow you to eval script-like programs.</p>\n\n<p>Hope that helps!</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1471660436,"creation_date":1471658618,"answer_id":39049779,"question_id":39049298,"body_markdown":"There is no easy way to compile a &quot;.java&quot; file if the basename of the source file does not match the class name *in* the source code.  If you don&#39;t know what the filename should be, then your only option is to (partially) parse the source code to find it.\r\n\r\n--------------------\r\n\r\nBut to be honest, this is problem that you should be addressing in a different way:\r\n\r\n  - If you generated the source code yourself, then you *should* know when the class name is, and therefore you *should* be able to deduce the correct name for the &quot;.java&quot; file.\r\n\r\n  - If you are compiling a file that was &quot;provided for you&quot;, then you could (and IMO should) insist that it is provided in a &quot;.java&quot; file with an appropriate filename.  If the filename doesn&#39;t match the classname, that is a mistake ... and you don&#39;t know whether the mistake is the filename or the classname!\r\n\r\n-------\r\n\r\nHere&#39;s a thought experiment for you.  Suppose someone provided you with source code files:\r\n\r\n   - A.java ... contains class `A`.\r\n   - B.java ... also contains class `A`.\r\n\r\nWhat should you do with that?  If you tried to figure out the &quot;correct&quot; filename from class name in the file, you could miss that the user made a mistake in B.java and put the wrong class name into the source code!\r\n\r\nIn short, you have two pieces of contradictory information.  Either of them could be incorrect.  If you let one automatically take precedence over the other, you miss mistakes. \r\n","title":"Compile .java file without knowing public class name","body":"<p>There is no easy way to compile a \".java\" file if the basename of the source file does not match the class name <em>in</em> the source code.  If you don't know what the filename should be, then your only option is to (partially) parse the source code to find it.</p>\n\n<hr>\n\n<p>But to be honest, this is problem that you should be addressing in a different way:</p>\n\n<ul>\n<li><p>If you generated the source code yourself, then you <em>should</em> know when the class name is, and therefore you <em>should</em> be able to deduce the correct name for the \".java\" file.</p></li>\n<li><p>If you are compiling a file that was \"provided for you\", then you could (and IMO should) insist that it is provided in a \".java\" file with an appropriate filename.  If the filename doesn't match the classname, that is a mistake ... and you don't know whether the mistake is the filename or the classname!</p></li>\n</ul>\n\n<hr>\n\n<p>Here's a thought experiment for you.  Suppose someone provided you with source code files:</p>\n\n<ul>\n<li>A.java ... contains class <code>A</code>.</li>\n<li>B.java ... also contains class <code>A</code>.</li>\n</ul>\n\n<p>What should you do with that?  If you tried to figure out the \"correct\" filename from class name in the file, you could miss that the user made a mistake in B.java and put the wrong class name into the source code!</p>\n\n<p>In short, you have two pieces of contradictory information.  Either of them could be incorrect.  If you let one automatically take precedence over the other, you miss mistakes. </p>\n"},{"tags":[],"owner":{"account_id":24234606,"reputation":1,"user_id":18187916,"display_name":"Manoj Neupane"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692246162,"creation_date":1692094057,"answer_id":76905040,"question_id":39049298,"body_markdown":"By now you might have already implemented it.\r\nBut this is for those trying to implement such system now after 2018,\r\nJava 11 supports directly running the java files.\r\n\r\nIf you have xxxx.java file, you can directly execute it with\r\n```\r\njava xxxx.java\r\n```\r\n\r\nThis works with different filename and classname.  \r\nRefer to the [documentation](https://docs.oracle.com/en/java/javase/11/tools/java.html#GUID-3B1CE181-CD30-4178-9602-230B800D4FAE) for the `java` command.\r\n","title":"Compile .java file without knowing public class name","body":"<p>By now you might have already implemented it.\nBut this is for those trying to implement such system now after 2018,\nJava 11 supports directly running the java files.</p>\n<p>If you have xxxx.java file, you can directly execute it with</p>\n<pre><code>java xxxx.java\n</code></pre>\n<p>This works with different filename and classname.<br />\nRefer to the <a href=\"https://docs.oracle.com/en/java/javase/11/tools/java.html#GUID-3B1CE181-CD30-4178-9602-230B800D4FAE\" rel=\"nofollow noreferrer\">documentation</a> for the <code>java</code> command.</p>\n"}],"owner":{"account_id":6354503,"reputation":1344,"user_id":4932340,"accept_rate":48,"display_name":"Trevor"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2061,"favorite_count":0,"down_vote_count":1,"up_vote_count":7,"answer_count":7,"score":6,"last_activity_date":1692246162,"creation_date":1471652388,"question_id":39049298,"body_markdown":"I&#39;d like to know how to compile .java files without knowing the public class name.\r\n\r\nTo provide an example use case: I am operating a sandbox, and users are allowed to send me a string. I write that string to a .java file, which I compile, evaluate the resulting class and reply the output.\r\n\r\n**?????.java**\r\n\r\n    public class HelloWorld {\r\n        public static void main(String[] args) {\r\n            System.out.println(&quot;Hello, World&quot;);\r\n        }\r\n    }\r\n\r\nIf I were to randomly assign `?????.java` a name such as **test.java** and ran the command `javac test.java` then it would fail \r\n\r\n*error: class HelloWorld is public, should be declared in a file named HelloWorld.java* like so:\r\n\r\n**HelloWorld.java**\r\n\r\n    public class HelloWorld {\r\n        public static void main(String[] args) {\r\n            System.out.println(&quot;Hello, World&quot;);\r\n        }\r\n    }\r\n\r\n\r\nIs this possible? Should I forego the ability to compile Java, or is there an alternative solution?","title":"Compile .java file without knowing public class name","body":"<p>I'd like to know how to compile .java files without knowing the public class name.</p>\n\n<p>To provide an example use case: I am operating a sandbox, and users are allowed to send me a string. I write that string to a .java file, which I compile, evaluate the resulting class and reply the output.</p>\n\n<p><strong>?????.java</strong></p>\n\n<pre><code>public class HelloWorld {\n    public static void main(String[] args) {\n        System.out.println(\"Hello, World\");\n    }\n}\n</code></pre>\n\n<p>If I were to randomly assign <code>?????.java</code> a name such as <strong>test.java</strong> and ran the command <code>javac test.java</code> then it would fail </p>\n\n<p><em>error: class HelloWorld is public, should be declared in a file named HelloWorld.java</em> like so:</p>\n\n<p><strong>HelloWorld.java</strong></p>\n\n<pre><code>public class HelloWorld {\n    public static void main(String[] args) {\n        System.out.println(\"Hello, World\");\n    }\n}\n</code></pre>\n\n<p>Is this possible? Should I forego the ability to compile Java, or is there an alternative solution?</p>\n"},{"tags":["java","exception","crash","minecraft","minecraft-fabric"],"answers":[{"comments":[{"owner":{"account_id":24972358,"reputation":113,"user_id":18835408,"display_name":"Email User"},"score":0,"creation_date":1687833761,"post_id":76555796,"comment_id":134988434,"body_markdown":"I tried swapping to the &quot;Mincraft Client&quot; configuration and when it told me `no module specified` I deleted .idea to fix it but the game still crashed when I used the item. However the error did change to say that `Cannot invoke &quot;net.minecraft.server.MinecraftServer.getCommandManager()&quot; because the return value of &quot;net.minecraft.world.World.getServer()&quot; is null`. I guess there was a error I wasn&#39;t even aware of in my configuration.","body":"I tried swapping to the &quot;Mincraft Client&quot; configuration and when it told me <code>no module specified</code> I deleted .idea to fix it but the game still crashed when I used the item. However the error did change to say that <code>Cannot invoke &quot;net.minecraft.server.MinecraftServer.getCommandManager()&quot; because the return value of &quot;net.minecraft.world.World.getServer()&quot; is null</code>. I guess there was a error I wasn&#39;t even aware of in my configuration."}],"tags":[],"owner":{"account_id":24872383,"reputation":68,"user_id":18746743,"display_name":"mineblock11"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1687930580,"creation_date":1687775141,"answer_id":76555796,"question_id":76548583,"body_markdown":"&gt; Caused by: com.mojang.authlib.exceptions.MinecraftClientHttpException: Status: 401\r\n\r\nThis error is harmless, it&#39;s just telling you that you&#39;re not logged into the game because you&#39;re in a development environment - you can just ignore it.\r\n\r\n----------\r\n\r\n&gt; Execution failed for task &#39;:runClient&#39;. Process &#39;command &#39;C:\\Program Files\\Zulu\\zulu-17\\bin\\java.exe&#39;&#39; finished with non-zero exit value -1\r\n\r\nYou should use your IDE&#39;s run configuration. In IntelliJ IDEA and Eclipse, you should run the &quot;Minecraft Client&quot; configuration.\r\n\r\nYour code has nothing to do with this error.\r\n\r\n\r\n----------\r\n\r\nYou need to check if the world is a client world or server world.\r\n\r\nYou should be returning if it is a client world:\r\n\r\n```java\r\nif(world.isClient) {\r\n    return;\r\n}\r\n```\r\n\r\nThis needs to be done as all logic should be done on the server.\r\n\r\n","title":"Minecraft Crashes when Using Command Item","body":"<blockquote>\n<p>Caused by: com.mojang.authlib.exceptions.MinecraftClientHttpException: Status: 401</p>\n</blockquote>\n<p>This error is harmless, it's just telling you that you're not logged into the game because you're in a development environment - you can just ignore it.</p>\n<hr />\n<blockquote>\n<p>Execution failed for task ':runClient'. Process 'command 'C:\\Program Files\\Zulu\\zulu-17\\bin\\java.exe'' finished with non-zero exit value -1</p>\n</blockquote>\n<p>You should use your IDE's run configuration. In IntelliJ IDEA and Eclipse, you should run the &quot;Minecraft Client&quot; configuration.</p>\n<p>Your code has nothing to do with this error.</p>\n<hr />\n<p>You need to check if the world is a client world or server world.</p>\n<p>You should be returning if it is a client world:</p>\n<pre class=\"lang-java prettyprint-override\"><code>if(world.isClient) {\n    return;\n}\n</code></pre>\n<p>This needs to be done as all logic should be done on the server.</p>\n"}],"owner":{"account_id":24972358,"reputation":113,"user_id":18835408,"display_name":"Email User"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":211,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692245384,"creation_date":1687657059,"question_id":76548583,"body_markdown":"I&#39;m including a simple item in my mod that, when used on an entity, should cause the game to run a command dictated by its name, here is the code: \r\n\r\n            public ActionResult useOnEntity(ItemStack stack, PlayerEntity user, LivingEntity entity, Hand hand) {\r\n            if(user.getItemCooldownManager().getCooldownProgress(this, 0) == 0){\r\n                //user.getWorld().getServer().getCommandManager().executeWithPrefix(user.getServer().getCommandSource(), stack.getName().toString());\r\n                user.getWorld().getServer().getCommandManager().execute(user.getWorld().getServer().getCommandManager().getDispatcher().parse(stack.getName().toString(), user.getServer().getCommandSource()), stack.getName().toString());\r\n                //user.sendMessage(stack.getName());\r\n\r\n                user.getItemCooldownManager().set(this, 40);\r\n            }\r\n\r\n            return super.useOnEntity(stack, user, entity, hand);\r\n        }\r\n\r\nI have tried both of the commented and uncommented code and both lead to the same result when I used the item on a mob, the game crashing with the error: \r\n\r\n&gt; Execution failed for task &#39;:runClient&#39;.\r\n&gt; Process &#39;command &#39;C:\\Program Files\\Zulu\\zulu-17\\bin\\java.exe&#39;&#39; finished with non-zero exit value -1\r\n\r\nI don&#39;t really understand this, it seems to say that it couldn&#39;t run the client, but the client did run and only crashed when I used the item. \r\n\r\n\r\n&lt;br/&gt;\r\n\r\n**UPDATE:** \r\n\r\nAfter following mineblock&#39;s advice, using the &quot;Minecraft Client&quot; configuration the error has changed to say `Cannot invoke &quot;net.minecraft.server.MinecraftServer.getCommandManager()&quot; because the return value of &quot;net.minecraft.world.World.getServer()&quot; is null`. This was caused by my code calling `user.getWorld().getServer()`. \r\n\r\nWhen I changed it to `user.getServer()` it said `...&quot;net.minecraft.entity.player.PlayerEntity.getServer()&quot; is null`\r\n\r\nIn short, if I can&#39;t use `user.getServer()` and I can&#39;t use `world.getServer()` what can I use?","title":"Minecraft Crashes when Using Command Item","body":"<p>I'm including a simple item in my mod that, when used on an entity, should cause the game to run a command dictated by its name, here is the code:</p>\n<pre><code>        public ActionResult useOnEntity(ItemStack stack, PlayerEntity user, LivingEntity entity, Hand hand) {\n        if(user.getItemCooldownManager().getCooldownProgress(this, 0) == 0){\n            //user.getWorld().getServer().getCommandManager().executeWithPrefix(user.getServer().getCommandSource(), stack.getName().toString());\n            user.getWorld().getServer().getCommandManager().execute(user.getWorld().getServer().getCommandManager().getDispatcher().parse(stack.getName().toString(), user.getServer().getCommandSource()), stack.getName().toString());\n            //user.sendMessage(stack.getName());\n\n            user.getItemCooldownManager().set(this, 40);\n        }\n\n        return super.useOnEntity(stack, user, entity, hand);\n    }\n</code></pre>\n<p>I have tried both of the commented and uncommented code and both lead to the same result when I used the item on a mob, the game crashing with the error:</p>\n<blockquote>\n<p>Execution failed for task ':runClient'.\nProcess 'command 'C:\\Program Files\\Zulu\\zulu-17\\bin\\java.exe'' finished with non-zero exit value -1</p>\n</blockquote>\n<p>I don't really understand this, it seems to say that it couldn't run the client, but the client did run and only crashed when I used the item.</p>\n<br/>\n<p><strong>UPDATE:</strong></p>\n<p>After following mineblock's advice, using the &quot;Minecraft Client&quot; configuration the error has changed to say <code>Cannot invoke &quot;net.minecraft.server.MinecraftServer.getCommandManager()&quot; because the return value of &quot;net.minecraft.world.World.getServer()&quot; is null</code>. This was caused by my code calling <code>user.getWorld().getServer()</code>.</p>\n<p>When I changed it to <code>user.getServer()</code> it said <code>...&quot;net.minecraft.entity.player.PlayerEntity.getServer()&quot; is null</code></p>\n<p>In short, if I can't use <code>user.getServer()</code> and I can't use <code>world.getServer()</code> what can I use?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":5907283,"reputation":1489,"user_id":4648586,"accept_rate":60,"display_name":"Bagus Tesa"},"score":0,"creation_date":1692067409,"post_id":76903147,"comment_id":135571960,"body_markdown":"*&quot;and the method reports an error*&quot; - whats the error? also, have you checked [tag:jena]?","body":"<i>&quot;and the method reports an error</i>&quot; - whats the error? also, have you checked <a href=\"https://stackoverflow.com/questions/tagged/jena\">jena</a>?"},{"owner":{"account_id":26934505,"reputation":1,"user_id":20506338,"display_name":"yongliang chen"},"score":0,"creation_date":1692077783,"post_id":76903147,"comment_id":135572624,"body_markdown":"Open source projects found from github","body":"Open source projects found from github"},{"owner":{"account_id":5907283,"reputation":1489,"user_id":4648586,"accept_rate":60,"display_name":"Bagus Tesa"},"score":0,"creation_date":1692082454,"post_id":76903147,"comment_id":135573174,"body_markdown":"hi yongliang, it would be nice if you could provide a [mcve] to work with. its kind of hard to give concrete suggestion given the state of your question. i do curious whether you have checked [ask] and took a [tour] yet. those material can help you formulate the question better. we can&#39;t help you unless you help us to understand the problem better..","body":"hi yongliang, it would be nice if you could provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> to work with. its kind of hard to give concrete suggestion given the state of your question. i do curious whether you have checked <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and took a <a href=\"https://stackoverflow.com/tour\">tour</a> yet. those material can help you formulate the question better. we can&#39;t help you unless you help us to understand the problem better.."}],"answers":[{"tags":[],"owner":{"account_id":26934505,"reputation":1,"user_id":20506338,"display_name":"yongliang chen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692245304,"creation_date":1692101452,"answer_id":76905872,"question_id":76903147,"body_markdown":"Here is the example\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;rdf:RDF xmlns:rdf=&quot;http://www.w3.org/1999/02/22-rdf-syntax-ns#&quot; xmlns:cim=&quot;http://iec.ch/TC57/2017/CIM-Schema-cim17#&quot; xmlns:md=&quot;http://iec.ch/TC57/61970-552/ModelDescription/1#&quot; xmlns:sgsei=&quot;http://epri.sgcc.com.cn/sgsei&quot;&gt;\r\n&lt;cim:RemoteUnit rdf:ID=&quot;08000000301-00000000003802726935595852084&quot;&gt;\r\n&lt;cim:IdentifiedObject.name/&gt;\r\n&lt;cim:PowerSystemResource.PSRType rdf:resource=&quot;0408003&quot;/&gt;\r\n&lt;cim:RemoteUnit.remoteUnitType rdf:resource=&quot;http://iec.ch/TC57/2017CIM-Schema-cim17#RemoteUnitType.X&quot;/&gt;\r\n&lt;sgsei:RemoteUnit.Equipment rdf:resource=&quot;#2tTcY3W0eYW0fKNvlny1tU&quot;/&gt;\r\n&lt;sgsei:RemoteUnit.Equipment rdf:resource=&quot;#rPvX1ee3to6MW2M2uE7sNU&quot;/&gt;\r\n&lt;sgsei:RemoteUnit.Equipment rdf:resource=&quot;#qxB2S9mcOIun9JbjczHdEU&quot;/&gt;\r\n&lt;sgsei:RemoteUnit.Equipment rdf:resource=&quot;#ArzBZyFrvoWf2ck2Hluuqk&quot;/&gt;\r\n&lt;cim:RemoteUnit.RemotePoints rdf:resource=&quot;#00075-2tTcY3W0eYW0fKNvlny1tU&quot;/&gt;\r\n&lt;cim:RemoteUnit.RemotePoints rdf:resource=&quot;#00075-ArzBZyFrvoWf2ck2Hluuqk&quot;/&gt;\r\n&lt;cim:RemoteUnit.RemotePoints rdf:resource=&quot;#00075-qxB2S9mcOIun9JbjczHdEU&quot;/&gt;\r\n&lt;cim:RemoteUnit.RemotePoints rdf:resource=&quot;#00075-rPvX1ee3to6MW2M2uE7sNU&quot;/&gt;\r\n&lt;/cim:RemoteUnit&gt;\r\n&lt;cim:RemoteSource rdf:ID=&quot;00075-2tTcY3W0eYW0fKNvlny1tU&quot;&gt;\r\n&lt;cim:IdentifiedObject.name/&gt;\r\n&lt;cim:RemoteSource.deadband&gt;0&lt;/cim:RemoteSource.deadband&gt;\r\n&lt;cim:RemoteSource.scanInterval&gt;0&lt;/cim:RemoteSource.scanInterval&gt;\r\n&lt;cim:RemoteSource.sensorMaximum&gt;0&lt;/cim:RemoteSource.sensorMaximum&gt;\r\n&lt;cim:RemoteSource.sensorMinimum&gt;0&lt;/cim:RemoteSource.sensorMinimum&gt;\r\n&lt;/cim:RemoteSource&gt;\r\n&lt;cim:RemoteUnit rdf:ID=&quot;08000000301-00000000003802726935595851640&quot;&gt;\r\n&lt;cim:IdentifiedObject.name/&gt;\r\n&lt;cim:PowerSystemResource.PSRType rdf:resource=&quot;0408003&quot;/&gt;\r\n&lt;cim:RemoteUnit.remoteUnitType rdf:resource=&quot;http://iec.ch/TC57/2017CIM-Schema-cim17#RemoteUnitType.X&quot;/&gt;\r\n&lt;cim:RemoteUnit.CommunicationLinks rdf:resource=&quot;0&quot;/&gt;\r\n&lt;sgsei:RemoteUnit.Equipment rdf:resource=&quot;#30500000-39837314&quot;/&gt;\r\n&lt;sgsei:RemoteUnit.Equipment rdf:resource=&quot;#30500000-39837340&quot;/&gt;\r\n&lt;sgsei:RemoteUnit.Equipment rdf:resource=&quot;#30500000-39837339&quot;/&gt;\r\n&lt;sgsei:RemoteUnit.Equipment rdf:resource=&quot;#30500000-39837329&quot;/&gt;\r\n&lt;cim:RemoteUnit.RemotePoints rdf:resource=&quot;#00075-30500000-39837314&quot;/&gt;\r\n&lt;cim:RemoteUnit.RemotePoints rdf:resource=&quot;#00075-30500000-39837329&quot;/&gt;\r\n&lt;cim:RemoteUnit.RemotePoints rdf:resource=&quot;#00075-30500000-39837339&quot;/&gt;\r\n&lt;cim:RemoteUnit.RemotePoints rdf:resource=&quot;#00075-30500000-39837340&quot;/&gt;\r\n&lt;/cim:RemoteUnit&gt;\r\n&lt;cim:RemoteSource rdf:ID=&quot;00075-30500000-39837314&quot;&gt;\r\n&lt;cim:IdentifiedObject.name/&gt;\r\n&lt;cim:RemoteSource.deadband&gt;0&lt;/cim:RemoteSource.deadband&gt;\r\n&lt;cim:RemoteSource.scanInterval&gt;0&lt;/cim:RemoteSource.scanInterval&gt;\r\n&lt;cim:RemoteSource.sensorMaximum&gt;0&lt;/cim:RemoteSource.sensorMaximum&gt;\r\n&lt;cim:RemoteSource.sensorMinimum&gt;0&lt;/cim:RemoteSource.sensorMinimum&gt;\r\n&lt;/cim:RemoteSource&gt;\r\n&lt;cim:RemoteSource rdf:ID=&quot;00075-30500000-39837329&quot;&gt;\r\n&lt;cim:IdentifiedObject.name/&gt;\r\n&lt;cim:RemoteSource.deadband&gt;0&lt;/cim:RemoteSource.deadband&gt;\r\n&lt;cim:RemoteSource.scanInterval&gt;0&lt;/cim:RemoteSource.scanInterval&gt;\r\n&lt;cim:RemoteSource.sensorMaximum&gt;0&lt;/cim:RemoteSource.sensorMaximum&gt;\r\n&lt;cim:RemoteSource.sensorMinimum&gt;0&lt;/cim:RemoteSource.sensorMinimum&gt;\r\n&lt;/cim:RemoteSource&gt;\r\n&lt;cim:RemoteSource rdf:ID=&quot;00075-30500000-39837339&quot;&gt;\r\n&lt;cim:IdentifiedObject.name/&gt;\r\n&lt;cim:RemoteSource.deadband&gt;0&lt;/cim:RemoteSource.deadband&gt;\r\n&lt;cim:RemoteSource.scanInterval&gt;0&lt;/cim:RemoteSource.scanInterval&gt;\r\n&lt;cim:RemoteSource.sensorMaximum&gt;0&lt;/cim:RemoteSource.sensorMaximum&gt;\r\n&lt;cim:RemoteSource.sensorMinimum&gt;0&lt;/cim:RemoteSource.sensorMinimum&gt;\r\n&lt;/cim:RemoteSource&gt;\r\n&lt;cim:RemoteSource rdf:ID=&quot;00075-30500000-39837340&quot;&gt;\r\n&lt;cim:IdentifiedObject.name/&gt;\r\n&lt;cim:RemoteSource.deadband&gt;0&lt;/cim:RemoteSource.deadband&gt;\r\n&lt;cim:RemoteSource.scanInterval&gt;0&lt;/cim:RemoteSource.scanInterval&gt;\r\n&lt;cim:RemoteSource.sensorMaximum&gt;0&lt;/cim:RemoteSource.sensorMaximum&gt;\r\n&lt;cim:RemoteSource.sensorMinimum&gt;0&lt;/cim:RemoteSource.sensorMinimum&gt;\r\n&lt;/cim:RemoteSource&gt;\r\n&lt;cim:RemoteSource rdf:ID=&quot;00075-ArzBZyFrvoWf2ck2Hluuqk&quot;&gt;\r\n&lt;cim:IdentifiedObject.name/&gt;\r\n&lt;cim:RemoteSource.deadband&gt;0&lt;/cim:RemoteSource.deadband&gt;\r\n&lt;cim:RemoteSource.scanInterval&gt;0&lt;/cim:RemoteSource.scanInterval&gt;\r\n&lt;cim:RemoteSource.sensorMaximum&gt;0&lt;/cim:RemoteSource.sensorMaximum&gt;\r\n&lt;cim:RemoteSource.sensorMinimum&gt;0&lt;/cim:RemoteSource.sensorMinimum&gt;\r\n&lt;/cim:RemoteSource&gt;\r\n&lt;cim:RemoteSource rdf:ID=&quot;00075-qxB2S9mcOIun9JbjczHdEU&quot;&gt;\r\n&lt;cim:IdentifiedObject.name/&gt;\r\n&lt;cim:RemoteSource.deadband&gt;0&lt;/cim:RemoteSource.deadband&gt;\r\n&lt;cim:RemoteSource.scanInterval&gt;0&lt;/cim:RemoteSource.scanInterval&gt;\r\n&lt;cim:RemoteSource.sensorMaximum&gt;0&lt;/cim:RemoteSource.sensorMaximum&gt;\r\n&lt;cim:RemoteSource.sensorMinimum&gt;0&lt;/cim:RemoteSource.sensorMinimum&gt;\r\n&lt;/cim:RemoteSource&gt;&lt;cim:RemoteSource rdf:ID=&quot;00075-rPvX1ee3to6MW2M2uE7sNU&quot;&gt;\r\n&lt;cim:IdentifiedObject.name/&gt;\r\n&lt;cim:RemoteSource.deadband&gt;0&lt;/cim:RemoteSource.deadband&gt;\r\n&lt;cim:RemoteSource.scanInterval&gt;0&lt;/cim:RemoteSource.scanInterval&gt;\r\n&lt;cim:RemoteSource.sensorMaximum&gt;0&lt;/cim:RemoteSource.sensorMaximum&gt;\r\n&lt;cim:RemoteSource.sensorMinimum&gt;0&lt;/cim:RemoteSource.sensorMinimum&gt;\r\n&lt;/cim:RemoteSource&gt;\r\n&lt;/rdf:RDF&gt;\r\n```\r\n","title":"Use Java to convert JSON to rdf documents with .xml suffix","body":"<p>Here is the example</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;rdf:RDF xmlns:rdf=&quot;http://www.w3.org/1999/02/22-rdf-syntax-ns#&quot; xmlns:cim=&quot;http://iec.ch/TC57/2017/CIM-Schema-cim17#&quot; xmlns:md=&quot;http://iec.ch/TC57/61970-552/ModelDescription/1#&quot; xmlns:sgsei=&quot;http://epri.sgcc.com.cn/sgsei&quot;&gt;\n&lt;cim:RemoteUnit rdf:ID=&quot;08000000301-00000000003802726935595852084&quot;&gt;\n&lt;cim:IdentifiedObject.name/&gt;\n&lt;cim:PowerSystemResource.PSRType rdf:resource=&quot;0408003&quot;/&gt;\n&lt;cim:RemoteUnit.remoteUnitType rdf:resource=&quot;http://iec.ch/TC57/2017CIM-Schema-cim17#RemoteUnitType.X&quot;/&gt;\n&lt;sgsei:RemoteUnit.Equipment rdf:resource=&quot;#2tTcY3W0eYW0fKNvlny1tU&quot;/&gt;\n&lt;sgsei:RemoteUnit.Equipment rdf:resource=&quot;#rPvX1ee3to6MW2M2uE7sNU&quot;/&gt;\n&lt;sgsei:RemoteUnit.Equipment rdf:resource=&quot;#qxB2S9mcOIun9JbjczHdEU&quot;/&gt;\n&lt;sgsei:RemoteUnit.Equipment rdf:resource=&quot;#ArzBZyFrvoWf2ck2Hluuqk&quot;/&gt;\n&lt;cim:RemoteUnit.RemotePoints rdf:resource=&quot;#00075-2tTcY3W0eYW0fKNvlny1tU&quot;/&gt;\n&lt;cim:RemoteUnit.RemotePoints rdf:resource=&quot;#00075-ArzBZyFrvoWf2ck2Hluuqk&quot;/&gt;\n&lt;cim:RemoteUnit.RemotePoints rdf:resource=&quot;#00075-qxB2S9mcOIun9JbjczHdEU&quot;/&gt;\n&lt;cim:RemoteUnit.RemotePoints rdf:resource=&quot;#00075-rPvX1ee3to6MW2M2uE7sNU&quot;/&gt;\n&lt;/cim:RemoteUnit&gt;\n&lt;cim:RemoteSource rdf:ID=&quot;00075-2tTcY3W0eYW0fKNvlny1tU&quot;&gt;\n&lt;cim:IdentifiedObject.name/&gt;\n&lt;cim:RemoteSource.deadband&gt;0&lt;/cim:RemoteSource.deadband&gt;\n&lt;cim:RemoteSource.scanInterval&gt;0&lt;/cim:RemoteSource.scanInterval&gt;\n&lt;cim:RemoteSource.sensorMaximum&gt;0&lt;/cim:RemoteSource.sensorMaximum&gt;\n&lt;cim:RemoteSource.sensorMinimum&gt;0&lt;/cim:RemoteSource.sensorMinimum&gt;\n&lt;/cim:RemoteSource&gt;\n&lt;cim:RemoteUnit rdf:ID=&quot;08000000301-00000000003802726935595851640&quot;&gt;\n&lt;cim:IdentifiedObject.name/&gt;\n&lt;cim:PowerSystemResource.PSRType rdf:resource=&quot;0408003&quot;/&gt;\n&lt;cim:RemoteUnit.remoteUnitType rdf:resource=&quot;http://iec.ch/TC57/2017CIM-Schema-cim17#RemoteUnitType.X&quot;/&gt;\n&lt;cim:RemoteUnit.CommunicationLinks rdf:resource=&quot;0&quot;/&gt;\n&lt;sgsei:RemoteUnit.Equipment rdf:resource=&quot;#30500000-39837314&quot;/&gt;\n&lt;sgsei:RemoteUnit.Equipment rdf:resource=&quot;#30500000-39837340&quot;/&gt;\n&lt;sgsei:RemoteUnit.Equipment rdf:resource=&quot;#30500000-39837339&quot;/&gt;\n&lt;sgsei:RemoteUnit.Equipment rdf:resource=&quot;#30500000-39837329&quot;/&gt;\n&lt;cim:RemoteUnit.RemotePoints rdf:resource=&quot;#00075-30500000-39837314&quot;/&gt;\n&lt;cim:RemoteUnit.RemotePoints rdf:resource=&quot;#00075-30500000-39837329&quot;/&gt;\n&lt;cim:RemoteUnit.RemotePoints rdf:resource=&quot;#00075-30500000-39837339&quot;/&gt;\n&lt;cim:RemoteUnit.RemotePoints rdf:resource=&quot;#00075-30500000-39837340&quot;/&gt;\n&lt;/cim:RemoteUnit&gt;\n&lt;cim:RemoteSource rdf:ID=&quot;00075-30500000-39837314&quot;&gt;\n&lt;cim:IdentifiedObject.name/&gt;\n&lt;cim:RemoteSource.deadband&gt;0&lt;/cim:RemoteSource.deadband&gt;\n&lt;cim:RemoteSource.scanInterval&gt;0&lt;/cim:RemoteSource.scanInterval&gt;\n&lt;cim:RemoteSource.sensorMaximum&gt;0&lt;/cim:RemoteSource.sensorMaximum&gt;\n&lt;cim:RemoteSource.sensorMinimum&gt;0&lt;/cim:RemoteSource.sensorMinimum&gt;\n&lt;/cim:RemoteSource&gt;\n&lt;cim:RemoteSource rdf:ID=&quot;00075-30500000-39837329&quot;&gt;\n&lt;cim:IdentifiedObject.name/&gt;\n&lt;cim:RemoteSource.deadband&gt;0&lt;/cim:RemoteSource.deadband&gt;\n&lt;cim:RemoteSource.scanInterval&gt;0&lt;/cim:RemoteSource.scanInterval&gt;\n&lt;cim:RemoteSource.sensorMaximum&gt;0&lt;/cim:RemoteSource.sensorMaximum&gt;\n&lt;cim:RemoteSource.sensorMinimum&gt;0&lt;/cim:RemoteSource.sensorMinimum&gt;\n&lt;/cim:RemoteSource&gt;\n&lt;cim:RemoteSource rdf:ID=&quot;00075-30500000-39837339&quot;&gt;\n&lt;cim:IdentifiedObject.name/&gt;\n&lt;cim:RemoteSource.deadband&gt;0&lt;/cim:RemoteSource.deadband&gt;\n&lt;cim:RemoteSource.scanInterval&gt;0&lt;/cim:RemoteSource.scanInterval&gt;\n&lt;cim:RemoteSource.sensorMaximum&gt;0&lt;/cim:RemoteSource.sensorMaximum&gt;\n&lt;cim:RemoteSource.sensorMinimum&gt;0&lt;/cim:RemoteSource.sensorMinimum&gt;\n&lt;/cim:RemoteSource&gt;\n&lt;cim:RemoteSource rdf:ID=&quot;00075-30500000-39837340&quot;&gt;\n&lt;cim:IdentifiedObject.name/&gt;\n&lt;cim:RemoteSource.deadband&gt;0&lt;/cim:RemoteSource.deadband&gt;\n&lt;cim:RemoteSource.scanInterval&gt;0&lt;/cim:RemoteSource.scanInterval&gt;\n&lt;cim:RemoteSource.sensorMaximum&gt;0&lt;/cim:RemoteSource.sensorMaximum&gt;\n&lt;cim:RemoteSource.sensorMinimum&gt;0&lt;/cim:RemoteSource.sensorMinimum&gt;\n&lt;/cim:RemoteSource&gt;\n&lt;cim:RemoteSource rdf:ID=&quot;00075-ArzBZyFrvoWf2ck2Hluuqk&quot;&gt;\n&lt;cim:IdentifiedObject.name/&gt;\n&lt;cim:RemoteSource.deadband&gt;0&lt;/cim:RemoteSource.deadband&gt;\n&lt;cim:RemoteSource.scanInterval&gt;0&lt;/cim:RemoteSource.scanInterval&gt;\n&lt;cim:RemoteSource.sensorMaximum&gt;0&lt;/cim:RemoteSource.sensorMaximum&gt;\n&lt;cim:RemoteSource.sensorMinimum&gt;0&lt;/cim:RemoteSource.sensorMinimum&gt;\n&lt;/cim:RemoteSource&gt;\n&lt;cim:RemoteSource rdf:ID=&quot;00075-qxB2S9mcOIun9JbjczHdEU&quot;&gt;\n&lt;cim:IdentifiedObject.name/&gt;\n&lt;cim:RemoteSource.deadband&gt;0&lt;/cim:RemoteSource.deadband&gt;\n&lt;cim:RemoteSource.scanInterval&gt;0&lt;/cim:RemoteSource.scanInterval&gt;\n&lt;cim:RemoteSource.sensorMaximum&gt;0&lt;/cim:RemoteSource.sensorMaximum&gt;\n&lt;cim:RemoteSource.sensorMinimum&gt;0&lt;/cim:RemoteSource.sensorMinimum&gt;\n&lt;/cim:RemoteSource&gt;&lt;cim:RemoteSource rdf:ID=&quot;00075-rPvX1ee3to6MW2M2uE7sNU&quot;&gt;\n&lt;cim:IdentifiedObject.name/&gt;\n&lt;cim:RemoteSource.deadband&gt;0&lt;/cim:RemoteSource.deadband&gt;\n&lt;cim:RemoteSource.scanInterval&gt;0&lt;/cim:RemoteSource.scanInterval&gt;\n&lt;cim:RemoteSource.sensorMaximum&gt;0&lt;/cim:RemoteSource.sensorMaximum&gt;\n&lt;cim:RemoteSource.sensorMinimum&gt;0&lt;/cim:RemoteSource.sensorMinimum&gt;\n&lt;/cim:RemoteSource&gt;\n&lt;/rdf:RDF&gt;\n</code></pre>\n"}],"owner":{"account_id":26934505,"reputation":1,"user_id":20506338,"display_name":"yongliang chen"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1692245304,"creation_date":1692067228,"question_id":76903147,"body_markdown":"There are very few examples on the Internet, or the versions are incompatible, and the method reports an error. I have java8, java11, java17, and I don’t know how to use rdf4j\n\nI want a simple example that is compatible with various versions of Java, without the need for huge and complicated jar packages","title":"Use Java to convert JSON to rdf documents with .xml suffix","body":"<p>There are very few examples on the Internet, or the versions are incompatible, and the method reports an error. I have java8, java11, java17, and I don’t know how to use rdf4j</p>\n<p>I want a simple example that is compatible with various versions of Java, without the need for huge and complicated jar packages</p>\n"},{"tags":["java","karate"],"answers":[{"comments":[{"owner":{"account_id":16676287,"reputation":57,"user_id":12052625,"display_name":"Vinod"},"score":1,"creation_date":1692248227,"post_id":76918421,"comment_id":135598237,"body_markdown":"I am able to resolve the issue now, thank you a lot, I used &quot; read(&#39;classpath:response.json&#39;)&quot; as you suggested because it will search under resources directory\nalso my resources folder was not marked as resources, it was a normal directory earlier","body":"I am able to resolve the issue now, thank you a lot, I used &quot; read(&#39;classpath:response.json&#39;)&quot; as you suggested because it will search under resources directory also my resources folder was not marked as resources, it was a normal directory earlier"}],"tags":[],"owner":{"account_id":48302,"reputation":55363,"user_id":143475,"display_name":"Peter Thomas"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1692245151,"creation_date":1692245151,"answer_id":76918421,"question_id":76918397,"body_markdown":"A lot depends on how your Maven (or Gradle) build file is set up. So read this first: https://github.com/karatelabs/karate#folder-structure\r\n\r\nOnce that is ok, you should be able to use `classpath:response.json`. Refer to the [docs](https://github.com/karatelabs/karate#reading-files) also.\r\n\r\nIf you have trouble, use the [quickstart or template](https://github.com/karatelabs/karate/wiki/Get-Started:-Maven-and-Gradle) projects as a reference.\r\n","title":"Karate API - How to read Json file from /src/test/resources folder using Junit runner?","body":"<p>A lot depends on how your Maven (or Gradle) build file is set up. So read this first: <a href=\"https://github.com/karatelabs/karate#folder-structure\" rel=\"nofollow noreferrer\">https://github.com/karatelabs/karate#folder-structure</a></p>\n<p>Once that is ok, you should be able to use <code>classpath:response.json</code>. Refer to the <a href=\"https://github.com/karatelabs/karate#reading-files\" rel=\"nofollow noreferrer\">docs</a> also.</p>\n<p>If you have trouble, use the <a href=\"https://github.com/karatelabs/karate/wiki/Get-Started:-Maven-and-Gradle\" rel=\"nofollow noreferrer\">quickstart or template</a> projects as a reference.</p>\n"}],"owner":{"account_id":16676287,"reputation":57,"user_id":12052625,"display_name":"Vinod"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":328,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76918421,"answer_count":1,"score":1,"last_activity_date":1692245151,"creation_date":1692244762,"question_id":76918397,"body_markdown":"In Karate API, I can read a JSON file from &quot;/src/test/resources&quot; folder from a feature file location at &quot;/src/test/java/karate/features/mytest.feature&quot; by using below code:\r\n\r\n    * def content = read(&#39;../../../resources/response.json&#39;)\r\n\r\nthe above code runs fine when I run the feature file, but fails when I run Junit runner with Karate.run(). from the error I came to know that it is looking for the file in target folder and could not find.\r\n\r\nThen I used below code as classpath = /src/test/java \r\n\r\n     * def content = read(&#39;classpath:../resources/response.json&#39;)\r\n\r\nbut this too is not working, \r\nhowever if I place my resources folder under Java and use below code then it works\r\n\r\n     * def content = read(&#39;classpath:resources/response.json&#39;)\r\n\r\nI need help in reading json file from below location\r\n &quot;/src/test/resources&quot;\r\n\r\nso far using classpath keyword, I am not able to move to  &quot;/src/test/resources&quot; folder","title":"Karate API - How to read Json file from /src/test/resources folder using Junit runner?","body":"<p>In Karate API, I can read a JSON file from &quot;/src/test/resources&quot; folder from a feature file location at &quot;/src/test/java/karate/features/mytest.feature&quot; by using below code:</p>\n<pre><code>* def content = read('../../../resources/response.json')\n</code></pre>\n<p>the above code runs fine when I run the feature file, but fails when I run Junit runner with Karate.run(). from the error I came to know that it is looking for the file in target folder and could not find.</p>\n<p>Then I used below code as classpath = /src/test/java</p>\n<pre><code> * def content = read('classpath:../resources/response.json')\n</code></pre>\n<p>but this too is not working,\nhowever if I place my resources folder under Java and use below code then it works</p>\n<pre><code> * def content = read('classpath:resources/response.json')\n</code></pre>\n<p>I need help in reading json file from below location\n&quot;/src/test/resources&quot;</p>\n<p>so far using classpath keyword, I am not able to move to  &quot;/src/test/resources&quot; folder</p>\n"},{"tags":["java","properties","spring-boot"],"answers":[{"comments":[{"owner":{"account_id":405484,"reputation":34324,"user_id":774398,"accept_rate":83,"display_name":"Patrick"},"score":0,"creation_date":1542115410,"post_id":34210762,"comment_id":93445498,"body_markdown":"Where do you use the `@Value` annotation?","body":"Where do you use the <code>@Value</code> annotation?"},{"owner":{"account_id":2166955,"reputation":24093,"user_id":1919879,"accept_rate":92,"display_name":"luboskrnac"},"score":0,"creation_date":1542182842,"post_id":34210762,"comment_id":93471906,"body_markdown":"@Value annotation is in case you have simple values. That is not explained in example, as it is notoriously known construct. If you need example anyway, let me know and I will add it here","body":"@Value annotation is in case you have simple values. That is not explained in example, as it is notoriously known construct. If you need example anyway, let me know and I will add it here"},{"owner":{"account_id":405484,"reputation":34324,"user_id":774398,"accept_rate":83,"display_name":"Patrick"},"score":0,"creation_date":1542198914,"post_id":34210762,"comment_id":93481282,"body_markdown":"Sorry I over read that you explain 2 different approaches, I thought this was a single solution.","body":"Sorry I over read that you explain 2 different approaches, I thought this was a single solution."}],"tags":[],"owner":{"account_id":2166955,"reputation":24093,"user_id":1919879,"accept_rate":92,"display_name":"luboskrnac"},"comment_count":3,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1542182762,"creation_date":1449777894,"answer_id":34210762,"question_id":34207920,"body_markdown":"1. If you want to map single property, just use `@Value` annotation.\r\n\r\n2. If you have groups, e.g. like these:\r\n\r\n    test1.property1=...\r\n    test1.test2.property2=...\r\n    test1.test2.property3=...\r\n\r\nYou can use\r\n\r\n    import javax.validation.constraints.NotNull;\r\n    \r\n    import lombok.Getter;\r\n    import lombok.Setter;\r\n    \r\n    import org.springframework.boot.context.properties.ConfigurationProperties;\r\n    import org.springframework.boot.context.properties.EnableConfigurationProperties;\r\n    import org.springframework.context.annotation.Configuration;\r\n    \r\n    @Getter\r\n    @Setter\r\n    @Configuration\r\n    @EnableConfigurationProperties\r\n    @ConfigurationProperties(locations = &quot;classpath:myapp.properties&quot;)\r\n    public class ApplicationProperties {\r\n    \r\n        private String property1;\r\n        private Test2 test2;\r\n    \r\n        @Getter\r\n        @Setter\r\n        @ConfigurationProperties(prefix = &quot;test2&quot;)\r\n        public static class Test2 {\r\n            @NotNull\r\n            private String property2;\r\n            @NotNull\r\n            private String property3;\r\n        }\r\n    }\r\n\r\n","title":"@ConfigurationProperties on fields","body":"<ol>\n<li><p>If you want to map single property, just use <code>@Value</code> annotation.</p></li>\n<li><p>If you have groups, e.g. like these:</p>\n\n<p>test1.property1=...\ntest1.test2.property2=...\ntest1.test2.property3=...</p></li>\n</ol>\n\n<p>You can use</p>\n\n<pre><code>import javax.validation.constraints.NotNull;\n\nimport lombok.Getter;\nimport lombok.Setter;\n\nimport org.springframework.boot.context.properties.ConfigurationProperties;\nimport org.springframework.boot.context.properties.EnableConfigurationProperties;\nimport org.springframework.context.annotation.Configuration;\n\n@Getter\n@Setter\n@Configuration\n@EnableConfigurationProperties\n@ConfigurationProperties(locations = \"classpath:myapp.properties\")\npublic class ApplicationProperties {\n\n    private String property1;\n    private Test2 test2;\n\n    @Getter\n    @Setter\n    @ConfigurationProperties(prefix = \"test2\")\n    public static class Test2 {\n        @NotNull\n        private String property2;\n        @NotNull\n        private String property3;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1234227,"reputation":1025,"user_id":1198176,"accept_rate":57,"display_name":"Amer A."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9699,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":1,"score":5,"last_activity_date":1692245040,"creation_date":1449767830,"question_id":34207920,"body_markdown":"When defining properties with `@ConfigurationProperties`, can I define the prefix of a specific field instead of the whole class?\r\n\r\nFor example, let&#39;s say we have a Properties class\r\n\r\n    @ConfigurationProperties(prefix = &quot;com.example&quot;)\r\n    public class MyProperties {\r\n        private String host;\r\n        private String port;\r\n        // Geters and setters...\r\n    }\r\nThis will bind the fields `host` and `port` to `com.example.host` and `com.example.port`. Let&#39;s say I want to bind `port` to `com.example.something.port`. The way to do this is to define an Inner class `Something` and add the property `port` there. But if I need more prefixes it will become too cumbersome. I tried to add `@ConfigurationProperties` on the setter because the target of the annotation is `ElementType.TYPE` and `ElementType.METHOD`: \r\n  \r\n\r\n    @ConfigurationProperties(prefix = &quot;com.example.something.port&quot;)\r\n    public void setPort(int port) {...}\r\n\r\nBut it did not work in the end. Is there another way to customise the prefix except via Inner classes?","title":"@ConfigurationProperties on fields","body":"<p>When defining properties with <code>@ConfigurationProperties</code>, can I define the prefix of a specific field instead of the whole class?</p>\n\n<p>For example, let's say we have a Properties class</p>\n\n<pre><code>@ConfigurationProperties(prefix = \"com.example\")\npublic class MyProperties {\n    private String host;\n    private String port;\n    // Geters and setters...\n}\n</code></pre>\n\n<p>This will bind the fields <code>host</code> and <code>port</code> to <code>com.example.host</code> and <code>com.example.port</code>. Let's say I want to bind <code>port</code> to <code>com.example.something.port</code>. The way to do this is to define an Inner class <code>Something</code> and add the property <code>port</code> there. But if I need more prefixes it will become too cumbersome. I tried to add <code>@ConfigurationProperties</code> on the setter because the target of the annotation is <code>ElementType.TYPE</code> and <code>ElementType.METHOD</code>: </p>\n\n<pre><code>@ConfigurationProperties(prefix = \"com.example.something.port\")\npublic void setPort(int port) {...}\n</code></pre>\n\n<p>But it did not work in the end. Is there another way to customise the prefix except via Inner classes?</p>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":5953401,"reputation":5248,"user_id":4680812,"accept_rate":77,"display_name":"S. Pauk"},"score":0,"creation_date":1445239526,"post_id":33208765,"comment_id":54221956,"body_markdown":"why don&#39;t you just add a maven artifact of project 2 as a dependency to the project 1?","body":"why don&#39;t you just add a maven artifact of project 2 as a dependency to the project 1?"},{"owner":{"account_id":2481945,"reputation":318,"user_id":2161250,"accept_rate":0,"display_name":"Lavish Karankar"},"score":0,"creation_date":1445239721,"post_id":33208765,"comment_id":54222070,"body_markdown":"could you please tell me how to do this? both the project are on my local. please write sample POM.xml for me, it would be very helpful for me","body":"could you please tell me how to do this? both the project are on my local. please write sample POM.xml for me, it would be very helpful for me"},{"owner":{"account_id":5806757,"reputation":3715,"user_id":4579155,"accept_rate":73,"display_name":"abarisone"},"score":0,"creation_date":1445239751,"post_id":33208765,"comment_id":54222089,"body_markdown":"Possible duplicate of [Maven 2 Projects](http://stackoverflow.com/questions/30934027/maven-2-projects/30935138#30935138).","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/30934027/maven-2-projects/30935138#30935138\">Maven 2 Projects</a>."},{"owner":{"account_id":2481945,"reputation":318,"user_id":2161250,"accept_rate":0,"display_name":"Lavish Karankar"},"score":0,"creation_date":1445240750,"post_id":33208765,"comment_id":54222656,"body_markdown":"I am looking for different project not for different module therefore it cant be considered as Duplicate.","body":"I am looking for different project not for different module therefore it cant be considered as Duplicate."},{"owner":{"account_id":4271284,"reputation":12416,"user_id":3493036,"accept_rate":81,"display_name":"Patrick"},"score":0,"creation_date":1445246542,"post_id":33208765,"comment_id":54225908,"body_markdown":"does any of the answers helps you?","body":"does any of the answers helps you?"},{"owner":{"account_id":2481945,"reputation":318,"user_id":2161250,"accept_rate":0,"display_name":"Lavish Karankar"},"score":0,"creation_date":1445246656,"post_id":33208765,"comment_id":54225985,"body_markdown":"I have been trying all, but I got to know that I have to create jar file of maven project 2 and then in pom.xml of project 1 I have to add dependency of project 2. But when I am creating jar file of project 2 then it doesnt have all the classes in the jar file, that I am figuring it out","body":"I have been trying all, but I got to know that I have to create jar file of maven project 2 and then in pom.xml of project 1 I have to add dependency of project 2. But when I am creating jar file of project 2 then it doesnt have all the classes in the jar file, that I am figuring it out"}],"answers":[{"comments":[{"owner":{"account_id":2481945,"reputation":318,"user_id":2161250,"accept_rate":0,"display_name":"Lavish Karankar"},"score":0,"creation_date":1445246764,"post_id":33209224,"comment_id":54226055,"body_markdown":"how to create jar file of project 2 using maven?","body":"how to create jar file of project 2 using maven?"},{"owner":{"account_id":2481945,"reputation":318,"user_id":2161250,"accept_rate":0,"display_name":"Lavish Karankar"},"score":0,"creation_date":1445246819,"post_id":33209224,"comment_id":54226086,"body_markdown":"I am using TestNG therefore I dont have Main class","body":"I am using TestNG therefore I dont have Main class"},{"owner":{"account_id":4271284,"reputation":12416,"user_id":3493036,"accept_rate":81,"display_name":"Patrick"},"score":0,"creation_date":1445247060,"post_id":33209224,"comment_id":54226242,"body_markdown":"you just have to build your project. This command will build your project `mvn install` . Go to your Project1 folder where your pom.xml is located. With the command line type then `mvn clean install` and you jar should be build. You can do it also with eclipse. Right click on your project1 -&gt; run as -&gt; maven install. The jar is then in your `target`folder","body":"you just have to build your project. This command will build your project <code>mvn install</code> . Go to your Project1 folder where your pom.xml is located. With the command line type then <code>mvn clean install</code> and you jar should be build. You can do it also with eclipse. Right click on your project1 -&gt; run as -&gt; maven install. The jar is then in your <code>target</code>folder"},{"owner":{"account_id":2481945,"reputation":318,"user_id":2161250,"accept_rate":0,"display_name":"Lavish Karankar"},"score":0,"creation_date":1445247366,"post_id":33209224,"comment_id":54226412,"body_markdown":"I tried the same but it has only manifest file, pom file and properties file only but it doesnt have the dependencies and class files","body":"I tried the same but it has only manifest file, pom file and properties file only but it doesnt have the dependencies and class files"},{"owner":{"account_id":4271284,"reputation":12416,"user_id":3493036,"accept_rate":81,"display_name":"Patrick"},"score":0,"creation_date":1445247650,"post_id":33209224,"comment_id":54226595,"body_markdown":"can you explain what is happened after you build the project? Any logs. And can you provide the pom.xml of both of the projects.","body":"can you explain what is happened after you build the project? Any logs. And can you provide the pom.xml of both of the projects."},{"owner":{"account_id":2481945,"reputation":318,"user_id":2161250,"accept_rate":0,"display_name":"Lavish Karankar"},"score":0,"creation_date":1445251386,"post_id":33209224,"comment_id":54228709,"body_markdown":"Project 1 pom.xml\n&#39;&lt;plugin&gt;\n      &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n      &lt;configuration&gt;\n        &lt;archive&gt;\n          &lt;manifest&gt;\n            &lt;mainClass&gt;testPack.NewTest.java&lt;/mainClass&gt;\n          &lt;/manifest&gt;\n        &lt;/archive&gt;\n        &lt;descriptorRefs&gt;\n          &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n        &lt;/descriptorRefs&gt;\n      &lt;/configuration&gt;\n    &lt;/plugin&gt;&#39;","body":"Project 1 pom.xml &#39;&lt;plugin&gt;       &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;       &lt;configuration&gt;         &lt;archive&gt;           &lt;manifest&gt;             &lt;mainClass&gt;testPack.NewTest.java&lt;/mainClass&gt;           &lt;/manifest&gt;         &lt;/archive&gt;         &lt;descriptorRefs&gt;           &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;         &lt;/descriptorRefs&gt;       &lt;/configuration&gt;     &lt;/plugin&gt;&#39;"},{"owner":{"account_id":2481945,"reputation":318,"user_id":2161250,"accept_rate":0,"display_name":"Lavish Karankar"},"score":0,"creation_date":1445251393,"post_id":33209224,"comment_id":54228710,"body_markdown":"project 2 pom.xml\n&#39;&lt;dependency&gt;\n\t\t\t&lt;groupId&gt;com.org.mav&lt;/groupId&gt;\n\t\t\t&lt;artifactId&gt;org.mav&lt;/artifactId&gt;\n\t\t\t&lt;scope&gt;system&lt;/scope&gt;\n\t\t\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n\t\t\t&lt;systemPath&gt;C:\\workspaceMaven1\\org.mav\\target\\org.mav-0.0.1-SNAPSHOT-jar-with-dependencies.jar&lt;/systemPath&gt;\n\t\t&lt;/dependency&gt;&#39;","body":"project 2 pom.xml &#39;&lt;dependency&gt; \t\t\t&lt;groupId&gt;com.org.mav&lt;/groupId&gt; \t\t\t&lt;artifactId&gt;org.mav&lt;/artifactId&gt; \t\t\t&lt;scope&gt;system&lt;/scope&gt; \t\t\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt; \t\t\t&lt;systemPath&gt;C:\\workspaceMaven1\\org.mav\\target\\org.mav-0.0&zwnj;&#8203;.1-SNAPSHOT-jar-with&zwnj;&#8203;-dependencies.jar&lt;/s&zwnj;&#8203;ystemPath&gt; \t\t&lt;/dependency&gt;&#39;"},{"owner":{"account_id":4271284,"reputation":12416,"user_id":3493036,"accept_rate":81,"display_name":"Patrick"},"score":0,"creation_date":1445254524,"post_id":33209224,"comment_id":54230703,"body_markdown":"please share your full pom&#39;s in your question","body":"please share your full pom&#39;s in your question"},{"owner":{"account_id":2481945,"reputation":318,"user_id":2161250,"accept_rate":0,"display_name":"Lavish Karankar"},"score":0,"creation_date":1445255275,"post_id":33209224,"comment_id":54231163,"body_markdown":"Thanks @Patrick, I have solved this actually I was keeping files in Test folder not in Main folder therefore they didnt come up. \nThanks a lot again","body":"Thanks @Patrick, I have solved this actually I was keeping files in Test folder not in Main folder therefore they didnt come up.  Thanks a lot again"}],"tags":[],"owner":{"account_id":4271284,"reputation":12416,"user_id":3493036,"accept_rate":81,"display_name":"Patrick"},"comment_count":9,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1445241112,"creation_date":1445241112,"answer_id":33209224,"question_id":33208765,"body_markdown":"You can add your local project 1 what is in yor eclipse workspace to your local maven repository.  \r\n\r\nWith this command (command line) yor are able to build this project to a pom.\r\n\r\n    mvn install:install-file -Dfile=c:\\whereYoureFileIs-{version}.jar -DgroupId=com.companyName.projectName \r\n    -DartifactId=projectName -Dversion={Your version} -Dpackaging=jar\r\n\r\nand after you build your jar of Project 1 to your local maven repository you are able to use this jar in your second project as a dependency. After including this jar you can extend the class you need.\r\n\r\nIf you need more explanation, please let me know.","title":"how to add dependency of other maven project to my current maven project in java eclipse?","body":"<p>You can add your local project 1 what is in yor eclipse workspace to your local maven repository.  </p>\n\n<p>With this command (command line) yor are able to build this project to a pom.</p>\n\n<pre><code>mvn install:install-file -Dfile=c:\\whereYoureFileIs-{version}.jar -DgroupId=com.companyName.projectName \n-DartifactId=projectName -Dversion={Your version} -Dpackaging=jar\n</code></pre>\n\n<p>and after you build your jar of Project 1 to your local maven repository you are able to use this jar in your second project as a dependency. After including this jar you can extend the class you need.</p>\n\n<p>If you need more explanation, please let me know.</p>\n"},{"comments":[{"owner":{"account_id":2481945,"reputation":318,"user_id":2161250,"accept_rate":0,"display_name":"Lavish Karankar"},"score":0,"creation_date":1445246772,"post_id":33209255,"comment_id":54226061,"body_markdown":"how to create jar file of project 2 using maven?","body":"how to create jar file of project 2 using maven?"},{"owner":{"account_id":2481945,"reputation":318,"user_id":2161250,"accept_rate":0,"display_name":"Lavish Karankar"},"score":0,"creation_date":1445246822,"post_id":33209255,"comment_id":54226089,"body_markdown":"I am using TestNG therefore I dont have Main class","body":"I am using TestNG therefore I dont have Main class"}],"tags":[],"owner":{"account_id":7132008,"reputation":39,"user_id":5452922,"display_name":"nohup"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1445241214,"creation_date":1445241214,"answer_id":33209255,"question_id":33208765,"body_markdown":"add a maven dependency like this :\r\n\r\n        &lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;groupId of project2&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;artifactId of project2&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;version  of project2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;","title":"how to add dependency of other maven project to my current maven project in java eclipse?","body":"<p>add a maven dependency like this :</p>\n\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;groupId of project2&lt;/groupId&gt;\n        &lt;artifactId&gt;artifactId of project2&lt;/artifactId&gt;\n        &lt;version&gt;version  of project2&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2481945,"reputation":318,"user_id":2161250,"accept_rate":0,"display_name":"Lavish Karankar"},"score":0,"creation_date":1445246719,"post_id":33209283,"comment_id":54226031,"body_markdown":"can we do the same for different project?","body":"can we do the same for different project?"},{"owner":{"account_id":2481945,"reputation":318,"user_id":2161250,"accept_rate":0,"display_name":"Lavish Karankar"},"score":0,"creation_date":1445246815,"post_id":33209283,"comment_id":54226082,"body_markdown":"I am using TestNG therefore I dont have Main class","body":"I am using TestNG therefore I dont have Main class"},{"owner":{"account_id":4236092,"reputation":43,"user_id":4365990,"display_name":"Ahmed Al-Battashi"},"score":0,"creation_date":1445250636,"post_id":33209283,"comment_id":54228283,"body_markdown":"Yes I think nothing prevent you doing that.","body":"Yes I think nothing prevent you doing that."}],"tags":[],"owner":{"account_id":4236092,"reputation":43,"user_id":4365990,"display_name":"Ahmed Al-Battashi"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1445241689,"creation_date":1445241319,"answer_id":33209283,"question_id":33208765,"body_markdown":"First Create parent java project\r\n[Simple java project][1]\r\n\r\n 1. Click on project (right-click) -&gt; Configure -&gt; Convert to maven project\r\n\r\n 2. Convert to Maven\r\n[Convert Java to Maven][2]\r\n\r\n 3. Right click on parent project -&gt; new -&gt; Porject...\r\nselect maven module \r\n\r\n\r\n 4. Create another Maven Module child project depend on base project \r\nex : called (webapp)\r\n\r\n 5. Open webapp/pom.xml -&gt; dependencies tap\r\n\r\n 6. Click add -&gt; search about your base group id and select -&gt; save\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/8QzrG.png\r\n  [2]: https://i.stack.imgur.com/evqpE.png","title":"how to add dependency of other maven project to my current maven project in java eclipse?","body":"<p>First Create parent java project\n<a href=\"https://i.stack.imgur.com/8QzrG.png\" rel=\"nofollow\">Simple java project</a></p>\n\n<ol>\n<li><p>Click on project (right-click) -> Configure -> Convert to maven project</p></li>\n<li><p>Convert to Maven\n<a href=\"https://i.stack.imgur.com/evqpE.png\" rel=\"nofollow\">Convert Java to Maven</a></p></li>\n<li><p>Right click on parent project -> new -> Porject...\nselect maven module </p></li>\n<li><p>Create another Maven Module child project depend on base project \nex : called (webapp)</p></li>\n<li><p>Open webapp/pom.xml -> dependencies tap</p></li>\n<li><p>Click add -> search about your base group id and select -> save</p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":6329856,"reputation":189,"user_id":4915060,"display_name":"sohal"},"comment_count":0,"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1546264182,"creation_date":1519112091,"answer_id":48879979,"question_id":33208765,"body_markdown":"I know its too late But this could help others who are searching for same problem.\r\n\r\nsuppose you have 2 projects p1 and p2 and you want to use p2 project&#39;s classes in p1 project then,\r\n\r\nA) Right Click on your p2 maven project(If not maven project then convert it to maven) then  \r\n --&gt;Choose Run As--&gt;Click on Maven Install.\r\n(It will make p2 to avaliable for other projects in your local maven repository)\r\n\r\nB) Now you can simply add p2 project as dependency in p1 project&#39;s pom.xml file like this \r\n\r\n      &lt;dependency&gt;\r\n\t    &lt;groupId&gt;com.project.p2&lt;/groupId&gt;\r\n\t    &lt;artifactId&gt;p2&lt;/artifactId&gt;\r\n\t    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n\t    &lt;scope&gt;compile&lt;/scope&gt;\r\n      &lt;/dependency&gt;\r\n\r\nFor more details see [this][1]\r\n\r\n\r\n  [1]: http://www.avajava.com/tutorials/lessons/how-do-i-add-a-project-as-a-dependency-of-another-project.html &quot;this&quot;","title":"how to add dependency of other maven project to my current maven project in java eclipse?","body":"<p>I know its too late But this could help others who are searching for same problem.</p>\n\n<p>suppose you have 2 projects p1 and p2 and you want to use p2 project's classes in p1 project then,</p>\n\n<p>A) Right Click on your p2 maven project(If not maven project then convert it to maven) then<br>\n -->Choose Run As-->Click on Maven Install.\n(It will make p2 to avaliable for other projects in your local maven repository)</p>\n\n<p>B) Now you can simply add p2 project as dependency in p1 project's pom.xml file like this </p>\n\n<pre><code>  &lt;dependency&gt;\n    &lt;groupId&gt;com.project.p2&lt;/groupId&gt;\n    &lt;artifactId&gt;p2&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;scope&gt;compile&lt;/scope&gt;\n  &lt;/dependency&gt;\n</code></pre>\n\n<p>For more details see <a href=\"http://www.avajava.com/tutorials/lessons/how-do-i-add-a-project-as-a-dependency-of-another-project.html\" rel=\"noreferrer\" title=\"this\">this</a></p>\n"},{"tags":[],"owner":{"account_id":2061447,"reputation":526,"user_id":1837878,"display_name":"Jason"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1692244902,"creation_date":1595493898,"answer_id":63050322,"question_id":33208765,"body_markdown":"maven install is a hack. \r\nthe correct thing to do is create an aggregator pom that includes both project directories something like this:\r\n\r\n```\r\n   &lt;packaging&gt;pom&lt;/packaging&gt;\r\n   &lt;modules&gt;\r\n         &lt;module&gt;pathTo/P1&lt;/module&gt;\r\n         &lt;module&gt;pathTo/P2&lt;/module&gt;\r\n   &lt;/modules&gt;\r\n```\r\n\r\nand then from this new pom directory run \r\n```\r\nmvn -am compile \r\n```\r\nthe &quot;-am&quot; here is what is important. It will ensure both projects are added to the reactor and are discoverable.\r\n\r\nImport this new project into eclipse and everything will work as expected.","title":"how to add dependency of other maven project to my current maven project in java eclipse?","body":"<p>maven install is a hack.\nthe correct thing to do is create an aggregator pom that includes both project directories something like this:</p>\n<pre><code>   &lt;packaging&gt;pom&lt;/packaging&gt;\n   &lt;modules&gt;\n         &lt;module&gt;pathTo/P1&lt;/module&gt;\n         &lt;module&gt;pathTo/P2&lt;/module&gt;\n   &lt;/modules&gt;\n</code></pre>\n<p>and then from this new pom directory run</p>\n<pre><code>mvn -am compile \n</code></pre>\n<p>the &quot;-am&quot; here is what is important. It will ensure both projects are added to the reactor and are discoverable.</p>\n<p>Import this new project into eclipse and everything will work as expected.</p>\n"}],"owner":{"account_id":2481945,"reputation":318,"user_id":2161250,"accept_rate":0,"display_name":"Lavish Karankar"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18269,"favorite_count":0,"down_vote_count":1,"up_vote_count":12,"answer_count":5,"score":11,"last_activity_date":1692244902,"creation_date":1445239413,"question_id":33208765,"body_markdown":"I want to use maven project 2 classes in my maven project 1 so that I can use it as a parent class. Can you please tell me how to do this using eclipse and JAVA.\r\nPlease write in step by step navigation as I am new in maven.\r\n\r\nThanks in advance","title":"how to add dependency of other maven project to my current maven project in java eclipse?","body":"<p>I want to use maven project 2 classes in my maven project 1 so that I can use it as a parent class. Can you please tell me how to do this using eclipse and JAVA.\nPlease write in step by step navigation as I am new in maven.</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["java","algorithm","data-structures","linked-list"],"comments":[{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":1,"creation_date":1692241098,"post_id":76918184,"comment_id":135597697,"body_markdown":"You are changing the list while iterating over it; this is usually a bad idea. Collect the positions of the elements you want to remove, and when you found all, remove them in a separate loop. Or adjust the loop index variables when you remove. Also, `.equals` may be better for string comparison than `==`.","body":"You are changing the list while iterating over it; this is usually a bad idea. Collect the positions of the elements you want to remove, and when you found all, remove them in a separate loop. Or adjust the loop index variables when you remove. Also, <code>.equals</code> may be better for string comparison than <code>==</code>."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1692242085,"post_id":76918184,"comment_id":135597752,"body_markdown":"You could learn more by running this code in a debugger.  Set a breakpoint where `removeDuplicates` is called. Then, use &quot;step into&quot;. Run the code one-step-at-a-time. (You may &quot;step over&quot; `ll.remove(j);`). Monitor the values of `i`, `j`, and the contents of `ll` at each step.","body":"You could learn more by running this code in a debugger.  Set a breakpoint where <code>removeDuplicates</code> is called. Then, use &quot;step into&quot;. Run the code one-step-at-a-time. (You may &quot;step over&quot; <code>ll.remove(j);</code>). Monitor the values of <code>i</code>, <code>j</code>, and the contents of <code>ll</code> at each step."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1692242778,"post_id":76918184,"comment_id":135597803,"body_markdown":"The O/P is correct that part of the problem results from the changed indices of the elements following the element removed. But, if you follow the suggestion from @Robert, a similar problem could occur.  I&#39;d like to give the O/P a chance to run the code in a debugger before remarking on possible solutions.","body":"The O/P is correct that part of the problem results from the changed indices of the elements following the element removed. But, if you follow the suggestion from @Robert, a similar problem could occur.  I&#39;d like to give the O/P a chance to run the code in a debugger before remarking on possible solutions."}],"answers":[{"comments":[{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1692248977,"post_id":76918229,"comment_id":135598295,"body_markdown":"There is no need to use separate contains/add for the HashSet: adding an already-present element to the set doesn&#39;t change the set, and the method returns false: `if (!uniqueElements.add(s)) { iterator.remove(); }`","body":"There is no need to use separate contains/add for the HashSet: adding an already-present element to the set doesn&#39;t change the set, and the method returns false: <code>if (!uniqueElements.add(s)) { iterator.remove(); }</code>"}],"tags":[],"owner":{"account_id":24792239,"reputation":413,"user_id":18675173,"display_name":"lant"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692241655,"creation_date":1692241655,"answer_id":76918229,"question_id":76918184,"body_markdown":" There are several issues with your code:\r\n\r\n1. When comparing strings for equality, the`.equals ()` method should be used instead of the`==`operator. Therefore, the following conditional judgment is incorrect.\r\n\r\n2. In your second loop, you are traversing the linked list and modifying it at the same time. This may lead to unexpected behavior and even program crashes. After each element deletion, the size of the linked list decreases, but your loop variable j does not adjust accordingly. This may cause you to skip certain elements or access invalid indexes. To safely delete elements, you should use iterators or reverse traversal.\r\n\r\nTry this\r\n\r\n        int size = ll.size();\r\n        for (int i = 0; i &lt; size; i++) {\r\n            String x = ll.get(i);\r\n\r\n            for (int j = i + 1; j &lt; size; j++) {\r\n                String s = ll.get(j);\r\n                if (s.equals(x)) {\r\n                    ll.remove(j);\r\n                    size--; // Update the size after removal\r\n                    j--;    // Decrement j to recheck the current index\r\n                }\r\n            }\r\n        }\r\n\r\n Or other implementation methods \r\n\r\n\r\n        Set&lt;String&gt; uniqueElements = new HashSet&lt;&gt;();\r\n        Iterator&lt;String&gt; iterator = ll.iterator();\r\n\r\n        while (iterator.hasNext()) {\r\n            String s = iterator.next();\r\n            if (!uniqueElements.contains(s)) {\r\n                uniqueElements.add(s);\r\n            } else {\r\n                iterator.remove();  \r\n            }\r\n        }\r\n\r\n        System.out.println(ll);","title":"Wrong output on method to remove duplicates from linkedlist java","body":"<p>There are several issues with your code:</p>\n<ol>\n<li><p>When comparing strings for equality, the<code>.equals ()</code> method should be used instead of the<code>==</code>operator. Therefore, the following conditional judgment is incorrect.</p>\n</li>\n<li><p>In your second loop, you are traversing the linked list and modifying it at the same time. This may lead to unexpected behavior and even program crashes. After each element deletion, the size of the linked list decreases, but your loop variable j does not adjust accordingly. This may cause you to skip certain elements or access invalid indexes. To safely delete elements, you should use iterators or reverse traversal.</p>\n</li>\n</ol>\n<p>Try this</p>\n<pre><code>    int size = ll.size();\n    for (int i = 0; i &lt; size; i++) {\n        String x = ll.get(i);\n\n        for (int j = i + 1; j &lt; size; j++) {\n            String s = ll.get(j);\n            if (s.equals(x)) {\n                ll.remove(j);\n                size--; // Update the size after removal\n                j--;    // Decrement j to recheck the current index\n            }\n        }\n    }\n</code></pre>\n<p>Or other implementation methods</p>\n<pre><code>    Set&lt;String&gt; uniqueElements = new HashSet&lt;&gt;();\n    Iterator&lt;String&gt; iterator = ll.iterator();\n\n    while (iterator.hasNext()) {\n        String s = iterator.next();\n        if (!uniqueElements.contains(s)) {\n            uniqueElements.add(s);\n        } else {\n            iterator.remove();  \n        }\n    }\n\n    System.out.println(ll);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692241864,"creation_date":1692241864,"answer_id":76918240,"question_id":76918184,"body_markdown":"You&#39;ve got at least 3 bugs.\r\n\r\n1. You can&#39;t compare strings with `==`. `==` checks if 2 object references are referring to the same object. Not if the values are equal. You want `a.equals(b)`, not `a == b`\r\n2. Your inner loop goes from &#39;1&#39;. It should be going from &#39;i + 1&#39; - right now you are deleting its own element (if you find an &#39;x&#39; at index 4, then you loop from 1 up to max and delete any &#39;x&#39; you find. Including the one at 4.\r\n3. By deleting, all elements shift down by one, so this skips elements. This algorithm is pretty bad, but if you must employ it, you have to go backwards - start at the end and move to the start. Or, adjust the index variable down by 1 every time you delete.\r\n4. LinkedList is `O(n)` to visit. This algorithm will literally take years to apply to a list of a few million elements. There are algorithms that can do it in milliseconds. But &#39;rewrite the whole thing for me&#39; is perhaps going a bit far.\r\n\r\n\r\nA simple way to very quickly do the job correctly:\r\n\r\n1. make a new `HashSet&lt;String&gt;` - these have the property that checking if a string is in them is fast regardless of how large they are.\r\n2. Make an iterator and use _that_ to loop through the list, using an iterator (`.get(index)` on a linked list is disastrous).\r\n3. Per element, add it to the set. If that doesn&#39;t work (returns `false`) because it was already in there, call `.remove()` on the iterator.\r\n\r\nDitch the hashset. Which java does for you automatically, so there is no step 4.\r\n","title":"Wrong output on method to remove duplicates from linkedlist java","body":"<p>You've got at least 3 bugs.</p>\n<ol>\n<li>You can't compare strings with <code>==</code>. <code>==</code> checks if 2 object references are referring to the same object. Not if the values are equal. You want <code>a.equals(b)</code>, not <code>a == b</code></li>\n<li>Your inner loop goes from '1'. It should be going from 'i + 1' - right now you are deleting its own element (if you find an 'x' at index 4, then you loop from 1 up to max and delete any 'x' you find. Including the one at 4.</li>\n<li>By deleting, all elements shift down by one, so this skips elements. This algorithm is pretty bad, but if you must employ it, you have to go backwards - start at the end and move to the start. Or, adjust the index variable down by 1 every time you delete.</li>\n<li>LinkedList is <code>O(n)</code> to visit. This algorithm will literally take years to apply to a list of a few million elements. There are algorithms that can do it in milliseconds. But 'rewrite the whole thing for me' is perhaps going a bit far.</li>\n</ol>\n<p>A simple way to very quickly do the job correctly:</p>\n<ol>\n<li>make a new <code>HashSet&lt;String&gt;</code> - these have the property that checking if a string is in them is fast regardless of how large they are.</li>\n<li>Make an iterator and use <em>that</em> to loop through the list, using an iterator (<code>.get(index)</code> on a linked list is disastrous).</li>\n<li>Per element, add it to the set. If that doesn't work (returns <code>false</code>) because it was already in there, call <code>.remove()</code> on the iterator.</li>\n</ol>\n<p>Ditch the hashset. Which java does for you automatically, so there is no step 4.</p>\n"},{"tags":[],"owner":{"account_id":29141905,"reputation":1,"user_id":22324681,"display_name":"ziming zeng"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692243245,"creation_date":1692243245,"answer_id":76918324,"question_id":76918184,"body_markdown":"Your first for starts with 0, your second for starts with 1, and when the A in the list goes through A round of de-redo, what&#39;s left is {A,B,C,A,X,Y,C,B}, why don&#39;t you remove two A&#39;s, because after removing the first A, the following A moves forward one position, which skips the second A\r\n\r\nWhen we start to redo B, since the second for starts with 1, B has already been deleted when i=1,j=1, and the following B will also be deleted, and the following data will be {A,C,A,X,Y,C}.\r\n\r\nThen i=2, in which case the weight is A, and the following data is {A,C,X,Y,C}\r\n\r\nThen i=3, then Y is removed, and the data after that is {A,C,X,C}\r\n\r\nAnd then i=4, and then the list length is 4, and that&#39;s the end of it.","title":"Wrong output on method to remove duplicates from linkedlist java","body":"<p>Your first for starts with 0, your second for starts with 1, and when the A in the list goes through A round of de-redo, what's left is {A,B,C,A,X,Y,C,B}, why don't you remove two A's, because after removing the first A, the following A moves forward one position, which skips the second A</p>\n<p>When we start to redo B, since the second for starts with 1, B has already been deleted when i=1,j=1, and the following B will also be deleted, and the following data will be {A,C,A,X,Y,C}.</p>\n<p>Then i=2, in which case the weight is A, and the following data is {A,C,X,Y,C}</p>\n<p>Then i=3, then Y is removed, and the data after that is {A,C,X,C}</p>\n<p>And then i=4, and then the list length is 4, and that's the end of it.</p>\n"}],"owner":{"account_id":29240864,"reputation":1,"user_id":22402422,"display_name":"snbmt21"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1692243245,"creation_date":1692240833,"question_id":76918184,"body_markdown":"```\r\npublic void removeDuplicates(LinkedList&lt;String&gt; ll)\r\n{\r\n    for(int i =0; i &lt; ll.size(); i++)\r\n    {\r\n        String x = ll.get(i);\r\n\r\n        for(int j = 1; j &lt; ll.size(); j++)\r\n        {\r\n            if(ll.get(j) == x)\r\n            {\r\n                ll.remove(j);\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nI&#39;m trying to remove duplicates from a linkedlist\r\n\r\nThe original LinkedList elements are\r\n\\[a, b, c, a, a, x, y, c, b\\]\r\n\r\nWhen I put it through the method, this is the resulting LinkedList\r\n\\[a, c, x, c\\]\r\n\r\nI&#39;m trying to understand why both of the b&#39;s and the y were removed.\r\n\r\nI initially though it might have to do with the fact that ll.remove changes the indices of the elements but I don&#39;t see why that would affect the other letters and not &quot;a&quot;\r\n\r\nI know this isn&#39;t the most efficient way to do this but I want to understand what is wrong with it","title":"Wrong output on method to remove duplicates from linkedlist java","body":"<pre><code>public void removeDuplicates(LinkedList&lt;String&gt; ll)\n{\n    for(int i =0; i &lt; ll.size(); i++)\n    {\n        String x = ll.get(i);\n\n        for(int j = 1; j &lt; ll.size(); j++)\n        {\n            if(ll.get(j) == x)\n            {\n                ll.remove(j);\n            }\n        }\n    }\n}\n</code></pre>\n<p>I'm trying to remove duplicates from a linkedlist</p>\n<p>The original LinkedList elements are\n[a, b, c, a, a, x, y, c, b]</p>\n<p>When I put it through the method, this is the resulting LinkedList\n[a, c, x, c]</p>\n<p>I'm trying to understand why both of the b's and the y were removed.</p>\n<p>I initially though it might have to do with the fact that ll.remove changes the indices of the elements but I don't see why that would affect the other letters and not &quot;a&quot;</p>\n<p>I know this isn't the most efficient way to do this but I want to understand what is wrong with it</p>\n"},{"tags":["java","selenium-webdriver"],"comments":[{"owner":{"account_id":3597514,"reputation":117173,"user_id":3001761,"display_name":"jonrsharpe"},"score":1,"creation_date":1564222612,"post_id":57231138,"comment_id":100965459,"body_markdown":"Either `prop.getProperty(&quot;emailId&quot;)` or `prop.getProperty(&quot;password&quot;)` is null, by the looks of it.","body":"Either <code>prop.getProperty(&quot;emailId&quot;)</code> or <code>prop.getProperty(&quot;password&quot;)</code> is null, by the looks of it."},{"owner":{"account_id":3023214,"reputation":20361,"user_id":2563754,"display_name":"Seelenvirtuose"},"score":1,"creation_date":1564222644,"post_id":57231138,"comment_id":100965466,"body_markdown":"&quot;Keys to send should be a not null CharSequence&quot;! Very self-explanatory, isn&#39;t it?","body":"&quot;Keys to send should be a not null CharSequence&quot;! Very self-explanatory, isn&#39;t it?"},{"owner":{"account_id":9347487,"reputation":11,"user_id":6938316,"display_name":"abhinash gatta"},"score":0,"creation_date":1564228419,"post_id":57231138,"comment_id":100966598,"body_markdown":"But I cross checked again everything seems good. Is there any other possible mistake","body":"But I cross checked again everything seems good. Is there any other possible mistake"}],"answers":[{"tags":[],"owner":{"account_id":15141533,"reputation":1,"user_id":13274720,"display_name":"Art"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1586485107,"creation_date":1586482631,"answer_id":61132794,"question_id":57231138,"body_markdown":"Hardcode the un and password.  \r\nIf that works, means that whoever calls `login()` method, puts empty strings.\r\n```\r\nusername.sendKeys(&quot;user1&quot;);\r\npassword.sendKeys(&quot;pass1&quot;);\r\n```","title":"java.lang.IllegalArgumentException: Keys to send should be a not null CharSequence","body":"<p>Hardcode the un and password.<br>\nIf that works, means that whoever calls <code>login()</code> method, puts empty strings.</p>\n\n<pre><code>username.sendKeys(\"user1\");\npassword.sendKeys(\"pass1\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22678804,"reputation":1,"user_id":16849415,"display_name":"pankaj kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1631019134,"creation_date":1631000849,"answer_id":69084258,"question_id":57231138,"body_markdown":"Check your `config.properties` file. It seems that the variable in the properties file is not correct.","title":"java.lang.IllegalArgumentException: Keys to send should be a not null CharSequence","body":"<p>Check your <code>config.properties</code> file. It seems that the variable in the properties file is not correct.</p>\n"},{"tags":[],"owner":{"account_id":25279334,"reputation":1,"user_id":19107424,"display_name":"Ajit gujjalwar - B203"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1652672425,"creation_date":1652422866,"answer_id":72225222,"question_id":57231138,"body_markdown":"Check that the parameter is defined in the config file and cross verify that the same parameter is define &amp; used.","title":"java.lang.IllegalArgumentException: Keys to send should be a not null CharSequence","body":"<p>Check that the parameter is defined in the config file and cross verify that the same parameter is define &amp; used.</p>\n"}],"owner":{"account_id":9347487,"reputation":11,"user_id":6938316,"display_name":"abhinash gatta"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8715,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1692241350,"creation_date":1564222423,"question_id":57231138,"body_markdown":"Getting this  Error : `java.lang.IllegalArgumentException: Keys to send should be a not null CharSequence.` How to resolve this issue?\r\n  \r\nPOM design model used using TestNG Framework\r\n\r\nPlease find out the below code snippets for both the java classes I have added \r\n\t   \r\nThe below code snippet is LoginPageTest Java Class\r\n    \r\n    package com.crm.qa.testcases; \r\n    \r\n    import org.testng.Assert;\r\n    import org.testng.annotations.AfterMethod;\r\n    import org.testng.annotations.BeforeMethod;\r\n    import org.testng.annotations.Test;\r\n    \r\n    import com.crm.qa.base.TestBase;\r\n    import com.crm.qa.pages.HomePage;\r\n    import com.crm.qa.pages.LoginPage;\r\n    \r\n    public class LoginPageTest extends TestBase{\r\n    \r\n    \tLoginPage loginpage;\r\n    \tHomePage homepage;\r\n    \t\r\n    \tpublic LoginPageTest() {\r\n    \t\tsuper();\r\n    \t}\r\n    \t\r\n    \t@BeforeMethod\r\n    \tpublic void setup() {\r\n    \t\tinitialization();\r\n    \t\tloginpage = new LoginPage();\r\n    \t}\r\n    \t\r\n    \t @Test(priority=1)\r\n    \t public void loginpagetitletest() {\r\n    \t String title = loginpage.ValidatePageTitle();\r\n    \tAssert.assertEquals(title, &quot;Login&quot;);\r\n    \t} \r\n    \t\r\n    \t@Test(priority=2)\r\n    \tpublic void loginTest()\r\n    \t{\r\n    \t\thomepage = loginpage.login(prop.getProperty(&quot;emailId&quot;),prop.getProperty(&quot;password&quot;));\r\n    \t}\r\n    \t\r\n    \t@AfterMethod\r\n    \tpublic void Teardown() {\r\n    \t\tdriver.quit();\r\n    \t}\r\n    \t\r\n    }\r\n    \r\n  And the below snippet is LoginPage Java Class\r\n    \r\n    package com.crm.qa.pages;\r\n    \r\n    import org.openqa.selenium.By;\r\n    import org.openqa.selenium.WebElement;\r\n    import org.openqa.selenium.interactions.Actions;\r\n    import org.openqa.selenium.support.FindBy;\r\n    import org.openqa.selenium.support.PageFactory;\r\n    \r\n    import com.crm.qa.base.TestBase;\r\n    \r\n    public class LoginPage extends TestBase {\r\n    \t\r\n    \t//Page Factory - object repository:\r\n    \t\r\n    \t\t@FindBy(id = &quot;li_myaccount&quot;)\r\n    \t\tWebElement myaccountbtn;\r\n    \t\t\r\n    \t\t//*[@id=&quot;li_myaccount&quot;]/ul/li[1]/a\r\n    \t\t\r\n    \t\t@FindBy(xpath = &quot;//a[contains(text(), &#39;login&#39;)]&quot;)\r\n    \t\tWebElement loginbtn;\r\n    \t\t\r\n    \t\t@FindBy(name = &quot;username&quot;)\r\n    \t\tWebElement username;\r\n    \t\t\r\n    \t\t@FindBy(name = &quot;password&quot;)\r\n    \t\tWebElement password;\r\n    \r\n    \t\t@FindBy(xpath = &quot;//*[@id=&#39;loginfrm&#39;]/button&quot;)\r\n    \t\tWebElement lgnbtn;\r\n    \t\t\r\n    \t\t@FindBy(xpath = &quot;//a[contains(text(), &#39;Sign Up&#39;)]&quot;)\r\n    \t\tWebElement Signupbtn;\r\n    \t\t\r\n    \t\t//Initialize the Page Objects\r\n    \tpublic LoginPage() {\r\n    \t\tPageFactory.initElements(driver, this);\r\n    \t}\r\n    \t\r\n    \t//Actions\r\n    \tpublic String ValidatePageTitle() {\r\n    \t\treturn driver.getTitle();\r\n    \t}\r\n    \t\r\n    \t\r\n    \tpublic HomePage login(String un, String pwd) {\r\n    \t\t\r\n    \t\tusername.sendKeys(un);\r\n    \t\tpassword.sendKeys(pwd);\r\n    \t\tmyaccountbtn.click();\r\n    \t\tloginbtn.click();\r\n    \t\t\r\n    \t\treturn new HomePage();\r\n    \t\t}\r\n    \t\t\r\n    \t} package com.crm.qa.pages;\r\n    \r\n    import org.openqa.selenium.By;\r\n    import org.openqa.selenium.WebElement;\r\n    import org.openqa.selenium.interactions.Actions;\r\n    import org.openqa.selenium.support.FindBy;\r\n    import org.openqa.selenium.support.PageFactory;\r\n    \r\n    import com.crm.qa.base.TestBase;\r\n    \r\n    public class LoginPage extends TestBase {\r\n    \t\r\n    \t//Page Factory - object repository:\r\n    \t\r\n    \t\t@FindBy(id = &quot;li_myaccount&quot;)\r\n    \t\tWebElement myaccountbtn;\r\n    \t\t\r\n    \t\t//*[@id=&quot;li_myaccount&quot;]/ul/li[1]/a\r\n    \t\t\r\n    \t\t@FindBy(xpath = &quot;//a[contains(text(), &#39;login&#39;)]&quot;)\r\n    \t\tWebElement loginbtn;\r\n    \t\t\r\n    \t\t@FindBy(name = &quot;username&quot;)\r\n    \t\tWebElement username;\r\n    \t\t\r\n    \t\t@FindBy(name = &quot;password&quot;)\r\n    \t\tWebElement password;\r\n    \r\n    \t\t@FindBy(xpath = &quot;//*[@id=&#39;loginfrm&#39;]/button&quot;)\r\n    \t\tWebElement lgnbtn;\r\n    \t\t\r\n    \t\t@FindBy(xpath = &quot;//a[contains(text(), &#39;Sign Up&#39;)]&quot;)\r\n    \t\tWebElement Signupbtn;\r\n    \t\t\r\n    \t\t//Initialize the Page Objects\r\n    \tpublic LoginPage() {\r\n    \t\tPageFactory.initElements(driver, this);\r\n    \t}\r\n    \t\r\n    \t//Actions\r\n    \tpublic String ValidatePageTitle() {\r\n    \t\treturn driver.getTitle();\r\n    \t}\r\n    \t\r\n    \t\r\n    \tpublic HomePage login(String un, String pwd) {\r\n    \t\t\r\n    \t\tusername.sendKeys(un);\r\n    \t\tpassword.sendKeys(pwd);\r\n    \t\tmyaccountbtn.click();\r\n    \t\tloginbtn.click();\r\n    \t\r\n    \treturn new HomePage();\r\n    \t\t}\r\n    \t\t\r\n    \t}`","title":"java.lang.IllegalArgumentException: Keys to send should be a not null CharSequence","body":"<p>Getting this  Error : <code>java.lang.IllegalArgumentException: Keys to send should be a not null CharSequence.</code> How to resolve this issue?</p>\n\n<p>POM design model used using TestNG Framework</p>\n\n<p>Please find out the below code snippets for both the java classes I have added </p>\n\n<p>The below code snippet is LoginPageTest Java Class</p>\n\n<pre><code>package com.crm.qa.testcases; \n\nimport org.testng.Assert;\nimport org.testng.annotations.AfterMethod;\nimport org.testng.annotations.BeforeMethod;\nimport org.testng.annotations.Test;\n\nimport com.crm.qa.base.TestBase;\nimport com.crm.qa.pages.HomePage;\nimport com.crm.qa.pages.LoginPage;\n\npublic class LoginPageTest extends TestBase{\n\n    LoginPage loginpage;\n    HomePage homepage;\n\n    public LoginPageTest() {\n        super();\n    }\n\n    @BeforeMethod\n    public void setup() {\n        initialization();\n        loginpage = new LoginPage();\n    }\n\n     @Test(priority=1)\n     public void loginpagetitletest() {\n     String title = loginpage.ValidatePageTitle();\n    Assert.assertEquals(title, \"Login\");\n    } \n\n    @Test(priority=2)\n    public void loginTest()\n    {\n        homepage = loginpage.login(prop.getProperty(\"emailId\"),prop.getProperty(\"password\"));\n    }\n\n    @AfterMethod\n    public void Teardown() {\n        driver.quit();\n    }\n\n}\n</code></pre>\n\n<p>And the below snippet is LoginPage Java Class</p>\n\n<pre><code>package com.crm.qa.pages;\n\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.WebElement;\nimport org.openqa.selenium.interactions.Actions;\nimport org.openqa.selenium.support.FindBy;\nimport org.openqa.selenium.support.PageFactory;\n\nimport com.crm.qa.base.TestBase;\n\npublic class LoginPage extends TestBase {\n\n    //Page Factory - object repository:\n\n        @FindBy(id = \"li_myaccount\")\n        WebElement myaccountbtn;\n\n        //*[@id=\"li_myaccount\"]/ul/li[1]/a\n\n        @FindBy(xpath = \"//a[contains(text(), 'login')]\")\n        WebElement loginbtn;\n\n        @FindBy(name = \"username\")\n        WebElement username;\n\n        @FindBy(name = \"password\")\n        WebElement password;\n\n        @FindBy(xpath = \"//*[@id='loginfrm']/button\")\n        WebElement lgnbtn;\n\n        @FindBy(xpath = \"//a[contains(text(), 'Sign Up')]\")\n        WebElement Signupbtn;\n\n        //Initialize the Page Objects\n    public LoginPage() {\n        PageFactory.initElements(driver, this);\n    }\n\n    //Actions\n    public String ValidatePageTitle() {\n        return driver.getTitle();\n    }\n\n\n    public HomePage login(String un, String pwd) {\n\n        username.sendKeys(un);\n        password.sendKeys(pwd);\n        myaccountbtn.click();\n        loginbtn.click();\n\n        return new HomePage();\n        }\n\n    } package com.crm.qa.pages;\n\nimport org.openqa.selenium.By;\nimport org.openqa.selenium.WebElement;\nimport org.openqa.selenium.interactions.Actions;\nimport org.openqa.selenium.support.FindBy;\nimport org.openqa.selenium.support.PageFactory;\n\nimport com.crm.qa.base.TestBase;\n\npublic class LoginPage extends TestBase {\n\n    //Page Factory - object repository:\n\n        @FindBy(id = \"li_myaccount\")\n        WebElement myaccountbtn;\n\n        //*[@id=\"li_myaccount\"]/ul/li[1]/a\n\n        @FindBy(xpath = \"//a[contains(text(), 'login')]\")\n        WebElement loginbtn;\n\n        @FindBy(name = \"username\")\n        WebElement username;\n\n        @FindBy(name = \"password\")\n        WebElement password;\n\n        @FindBy(xpath = \"//*[@id='loginfrm']/button\")\n        WebElement lgnbtn;\n\n        @FindBy(xpath = \"//a[contains(text(), 'Sign Up')]\")\n        WebElement Signupbtn;\n\n        //Initialize the Page Objects\n    public LoginPage() {\n        PageFactory.initElements(driver, this);\n    }\n\n    //Actions\n    public String ValidatePageTitle() {\n        return driver.getTitle();\n    }\n\n\n    public HomePage login(String un, String pwd) {\n\n        username.sendKeys(un);\n        password.sendKeys(pwd);\n        myaccountbtn.click();\n        loginbtn.click();\n\n    return new HomePage();\n        }\n\n    }`\n</code></pre>\n"},{"tags":["java","generics","reflection"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":1,"creation_date":1692232981,"post_id":76917796,"comment_id":135597099,"body_markdown":"Java generics are not reifiable, they&#39;re erased at runtime.  You might not be able to do this.","body":"Java generics are not reifiable, they&#39;re erased at runtime.  You might not be able to do this."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1692233048,"post_id":76917796,"comment_id":135597103,"body_markdown":"https://docs.oracle.com/javase/tutorial/java/generics/nonReifiableVarargsType.html","body":"<a href=\"https://docs.oracle.com/javase/tutorial/java/generics/nonReifiableVarargsType.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/java/generics/&hellip;</a>"},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":1,"creation_date":1692233273,"post_id":76917796,"comment_id":135597119,"body_markdown":"What Scary Wombat means is, if the list only contains `Dog`, then could you say the type is `List&lt;Dog&gt;`?  Remember that the type `List&lt;Animal&gt;` could still contain only `Dog`s, so that&#39;s the case he&#39;s asking about.","body":"What Scary Wombat means is, if the list only contains <code>Dog</code>, then could you say the type is <code>List&lt;Dog&gt;</code>?  Remember that the type <code>List&lt;Animal&gt;</code> could still contain only <code>Dog</code>s, so that&#39;s the case he&#39;s asking about."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1692241329,"post_id":76917796,"comment_id":135597706,"body_markdown":"There is no way to do it.  However… an alternative that *does* work is using `Object[]` instead of `List&lt;?&gt;` as your argument type.","body":"There is no way to do it.  However… an alternative that <i>does</i> work is using <code>Object[]</code> instead of <code>List&lt;?&gt;</code> as your argument type."},{"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"score":0,"creation_date":1692281000,"post_id":76917796,"comment_id":135604210,"body_markdown":"Where&#39;s Scary Wombat&#39;s comment? Where did it go? What he suggested was, perhaps, the best way to do it. Just look at the type of the first element. If it&#39;s empty, my logic doesn&#39;t have to take place anyway","body":"Where&#39;s Scary Wombat&#39;s comment? Where did it go? What he suggested was, perhaps, the best way to do it. Just look at the type of the first element. If it&#39;s empty, my logic doesn&#39;t have to take place anyway"}],"answers":[{"comments":[{"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"score":0,"creation_date":1692280842,"post_id":76918186,"comment_id":135604168,"body_markdown":"Thank you! It&#39;s just that sometimes you can retrieve that information about &quot;actual types&quot; at runtime, sometimes you can&#39;t. I don&#39;t fully understand where it retains and where it doesn&#39;t","body":"Thank you! It&#39;s just that sometimes you can retrieve that information about &quot;actual types&quot; at runtime, sometimes you can&#39;t. I don&#39;t fully understand where it retains and where it doesn&#39;t"},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1692284697,"post_id":76918186,"comment_id":135605135,"body_markdown":"I said it. The stuff that is in your source files _and_ in a signature, is recoverable. Everything else is not.","body":"I said it. The stuff that is in your source files <i>and</i> in a signature, is recoverable. Everything else is not."}],"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1692240852,"creation_date":1692240852,"answer_id":76918186,"question_id":76917796,"body_markdown":"&gt; How can I get the element type in runtime? Is it possible?\r\n\r\nNo.\r\n\r\nGenerics are a figment of the compiler&#39;s imagination. They are a tool to link places where types are used, to tell the compiler: These types need to be the same - inject casts to make it work. If you can prove types don&#39;t line up, generate compilation errors. __Then get rid of it all__.\r\n\r\nThe only thing that remains are generics __in signatures__, but what remains is the _exact_ thing you wrote in the source code. Not the actual type. In other words, given:\r\n\r\n```\r\npublic class MyExample&lt;E&gt; {\r\n  public void addAll(Collection&lt;E&gt; element) {\r\n    List&lt;String&gt; x = new ArrayList&lt;String&gt;();\r\n    check(x);\r\n  }\r\n\r\n  public void check(Object o) {\r\n    // ...\r\n  }\r\n}\r\n```\r\n\r\nThe generics of the `x` variable are __completely gone__. There is __nothing__ `check` can do to recover that it&#39;s a `String`. The memory footprint of a `new ArrayList&lt;String&gt;()` and a `new ArrayList&lt;Integer&gt;()` is __100% identical__ - it&#39;s not just &#39;there is no API to get this info&#39;, it&#39;s a more stringent: It is _impossible_.\r\n\r\nYou _can_ get generics out for the type decl itself as well as with the `element` parameter of the `addAll` method - but you get literally the letter `E`. Which is useless.\r\n\r\nSo, to repeat: __No. Not possible__.\r\n\r\nWhat TypeTools does, is abuse how signatures survive and combine that with the realization that where:\r\n\r\n```\r\nList&lt;String&gt; list = new ArrayList&lt;String&gt;();\r\n```\r\n\r\nThe generics part is just completely eliminated, with:\r\n\r\n```\r\nList&lt;String&gt; list = new ArrayList&lt;String&gt;() {};\r\n```\r\n\r\nIt&#39;s not. This is because of a whole lot of hackery:\r\n\r\n* ArrayList is not final. had it been, the above wouldn&#39;t have compiled.\r\n* The above is almost the same as the first snippet, but in meaning, completely different: That is declaring an entirely new class with an anonymous name, defined as `extends ArrayList&lt;String&gt;`, and with class body `{}` (as in, it does not add anything). What a class extends is &#39;signature&#39; and thus __not erased__, and thus, at runtime you can recover this stuff.\r\n\r\nHowever, because it introduces a whole heap of caveats, and generics is literal, this isn&#39;t a good idea. For example, if I write:\r\n\r\n```\r\npublic &lt;E&gt; createList() {\r\n  return new ArrayList&lt;E&gt;() {}\r\n}\r\n```\r\n\r\nThat works completely fine and can be called with e.g.: `List&lt;String&gt; myList = ClassThatIsIn.&lt;String&gt;createList();` - and nevertheless, the only thing SuperTypeTokens / typetools / other libraries of that sort can ever get back out at runtime is `E` - literally. The letter E. Not `String` - that is impossible, as that&#39;s completely erased.\r\n\r\nHence, your super type tokens come with a manual and a long list of caveats. More generally then it&#39;s not a good idea to do this to any type other than one designed to carry this sort of info and nothing else - a super type token. A type that does nothing, all that it is meant for is for you to write `SuperTypeToken&lt;List&lt;String&gt;&gt; myTokenRepresentingListOfStrings = new SuperTypeToken&lt;List&lt;String&gt;&gt;() {}`.\r\n\r\nThis weird hackery can be useful if you have a need to convey things that generics can capture (i.e. not _just_ a type, but any generics on that, as well. a `Map&lt;String, List&lt;? extends Number&gt;&gt;` for example - not just `Map`, no, that whole thing - `java.lang.Class` cannot represent that). Not to write a method that can ascertain what the generics are.\r\n\r\nThere are no workarounds. Going back to your initial question, given:\r\n\r\n```\r\npublic void method(List&lt;?&gt; list) {\r\n    // some logic\r\n}\r\n```\r\n\r\nThe answer is __no__. A whole heap of blogposts and articles beat around the bush and suggests ways to get to yes, but they&#39;re all incorrect. There is no way to do it. Period. super type tokens / typetools is something quite different. There is no way to use such tools to make that a &#39;yes&#39;.\r\n","title":"How do I get the element type of a collection passed in a method?","body":"<blockquote>\n<p>How can I get the element type in runtime? Is it possible?</p>\n</blockquote>\n<p>No.</p>\n<p>Generics are a figment of the compiler's imagination. They are a tool to link places where types are used, to tell the compiler: These types need to be the same - inject casts to make it work. If you can prove types don't line up, generate compilation errors. <strong>Then get rid of it all</strong>.</p>\n<p>The only thing that remains are generics <strong>in signatures</strong>, but what remains is the <em>exact</em> thing you wrote in the source code. Not the actual type. In other words, given:</p>\n<pre><code>public class MyExample&lt;E&gt; {\n  public void addAll(Collection&lt;E&gt; element) {\n    List&lt;String&gt; x = new ArrayList&lt;String&gt;();\n    check(x);\n  }\n\n  public void check(Object o) {\n    // ...\n  }\n}\n</code></pre>\n<p>The generics of the <code>x</code> variable are <strong>completely gone</strong>. There is <strong>nothing</strong> <code>check</code> can do to recover that it's a <code>String</code>. The memory footprint of a <code>new ArrayList&lt;String&gt;()</code> and a <code>new ArrayList&lt;Integer&gt;()</code> is <strong>100% identical</strong> - it's not just 'there is no API to get this info', it's a more stringent: It is <em>impossible</em>.</p>\n<p>You <em>can</em> get generics out for the type decl itself as well as with the <code>element</code> parameter of the <code>addAll</code> method - but you get literally the letter <code>E</code>. Which is useless.</p>\n<p>So, to repeat: <strong>No. Not possible</strong>.</p>\n<p>What TypeTools does, is abuse how signatures survive and combine that with the realization that where:</p>\n<pre><code>List&lt;String&gt; list = new ArrayList&lt;String&gt;();\n</code></pre>\n<p>The generics part is just completely eliminated, with:</p>\n<pre><code>List&lt;String&gt; list = new ArrayList&lt;String&gt;() {};\n</code></pre>\n<p>It's not. This is because of a whole lot of hackery:</p>\n<ul>\n<li>ArrayList is not final. had it been, the above wouldn't have compiled.</li>\n<li>The above is almost the same as the first snippet, but in meaning, completely different: That is declaring an entirely new class with an anonymous name, defined as <code>extends ArrayList&lt;String&gt;</code>, and with class body <code>{}</code> (as in, it does not add anything). What a class extends is 'signature' and thus <strong>not erased</strong>, and thus, at runtime you can recover this stuff.</li>\n</ul>\n<p>However, because it introduces a whole heap of caveats, and generics is literal, this isn't a good idea. For example, if I write:</p>\n<pre><code>public &lt;E&gt; createList() {\n  return new ArrayList&lt;E&gt;() {}\n}\n</code></pre>\n<p>That works completely fine and can be called with e.g.: <code>List&lt;String&gt; myList = ClassThatIsIn.&lt;String&gt;createList();</code> - and nevertheless, the only thing SuperTypeTokens / typetools / other libraries of that sort can ever get back out at runtime is <code>E</code> - literally. The letter E. Not <code>String</code> - that is impossible, as that's completely erased.</p>\n<p>Hence, your super type tokens come with a manual and a long list of caveats. More generally then it's not a good idea to do this to any type other than one designed to carry this sort of info and nothing else - a super type token. A type that does nothing, all that it is meant for is for you to write <code>SuperTypeToken&lt;List&lt;String&gt;&gt; myTokenRepresentingListOfStrings = new SuperTypeToken&lt;List&lt;String&gt;&gt;() {}</code>.</p>\n<p>This weird hackery can be useful if you have a need to convey things that generics can capture (i.e. not <em>just</em> a type, but any generics on that, as well. a <code>Map&lt;String, List&lt;? extends Number&gt;&gt;</code> for example - not just <code>Map</code>, no, that whole thing - <code>java.lang.Class</code> cannot represent that). Not to write a method that can ascertain what the generics are.</p>\n<p>There are no workarounds. Going back to your initial question, given:</p>\n<pre><code>public void method(List&lt;?&gt; list) {\n    // some logic\n}\n</code></pre>\n<p>The answer is <strong>no</strong>. A whole heap of blogposts and articles beat around the bush and suggests ways to get to yes, but they're all incorrect. There is no way to do it. Period. super type tokens / typetools is something quite different. There is no way to use such tools to make that a 'yes'.</p>\n"}],"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76918186,"answer_count":1,"score":2,"last_activity_date":1692240852,"creation_date":1692232534,"question_id":76917796,"body_markdown":"Suppose I have some method that accepts a `List&lt;?&gt;`\r\n```java\r\npublic void method(List&lt;?&gt; list) {\r\n    // some logic\r\n}\r\n```\r\nHow can I get the element type in runtime? Is it possible?\r\n\r\nI found these suggestions (here on SO):\r\n\r\n1. `((ParameterizedType) getClass().getGenericSuperclass()).getActualTypeArguments()[0]` (doesn&#39;t work, `List` is an interface and doesn&#39;t have a superclass)\r\n```java\r\n// ChatGPT&#39;s work\r\n\r\npublic class App {\r\n    public static void main(String[] args) {\r\n        List&lt;String&gt; stringList = new ArrayList&lt;&gt;();\r\n        List&lt;Integer&gt; integerList = new ArrayList&lt;&gt;();\r\n\r\n        Type stringType = getListElementType(stringList);\r\n        Type integerType = getListElementType(integerList);\r\n\r\n        System.out.println(&quot;String List Element Type: &quot; + stringType.getTypeName());\r\n        System.out.println(&quot;Integer List Element Type: &quot; + integerType.getTypeName());\r\n    }\r\n\r\n    private static Type getListElementType(List&lt;?&gt; list) {\r\n        Type genericType = list.getClass().getGenericSuperclass();\r\n\r\n        if (genericType instanceof ParameterizedType) {\r\n            ParameterizedType parameterizedType = (ParameterizedType) genericType;\r\n            return parameterizedType.getActualTypeArguments()[0];\r\n        }\r\n\r\n        throw new IllegalArgumentException(&quot;Unable to determine list element type.&quot;);\r\n    }\r\n}\r\n```\r\nConsole output:\r\n```\r\nString List Element Type: E\r\nInteger List Element Type: E\r\n```\r\n2. Storing a corresponding class as a field during creation of a generic class instance (doesn&#39;t work, `List` is read-only, and it can&#39;t have any instance fields anyway since it&#39;s an interface)\r\n```java\r\n/*\r\n from jqno&#39;s answer to &quot;How can I learn actual type argument of an generic class?&quot;\r\n Henning in his answer to &quot;Get generic type of class at runtime&quot; suggested a similar trick\r\n*/\r\n\r\nclass ParameterizedClass&lt;T&gt; {\r\n    private Class&lt;T&gt; type;\r\n\r\n    /** Factory method */\r\n    public static &lt;T&gt; ParameterizedClass&lt;T&gt; of(Class&lt;T&gt; type) {\r\n        return new ParameterizedClass&lt;T&gt;(type);\r\n    }\r\n\r\n    /** Private constructor; use the factory method instead */\r\n    private ParameterizedClass(Class&lt;T&gt; type) {\r\n        this.type = type;\r\n    }\r\n\r\n    // Do something useful with type\r\n}\r\n```\r\n3. The [TypeTools library][1]. I still need some supertype\r\n\r\n&gt; The TypeResolver class provides some of the following methods:\r\n&gt;\r\n&gt; `Type reify(Type type, Class&lt;S&gt; context)`\r\n&gt;\r\n&gt; Returns a fully reified type using type variable information from the context.\r\n&gt;\r\n&gt; `Type reify(Type genericType)`\r\n&gt;\r\n&gt; Returns a fully reified genericType using information from the generic declaration.\r\n&gt;\r\n&gt; `Class&lt;?&gt;[] resolveRawArguments(Class&lt;T&gt; type, Class&lt;S&gt; subType)`\r\n&gt;\r\n&gt; Resolves the raw arguments for a type using type variable information from a subType.\r\n&gt;\r\n&gt; `Class&lt;?&gt; resolveRawArgument(Class&lt;T&gt; type, Class&lt;S&gt; subType)`\r\n&gt;\r\n&gt; Resolves the raw argument for a type using type variable information from a subType.\r\n&gt;\r\n&gt; `Type resolveGenericType(Class&lt;?&gt; type, Type subType)`\r\n&gt;\r\n&gt; Resolves the generic type using type variable information from a subType.\r\n&gt;\r\n&gt; `Class&lt;?&gt; resolveRawClass(Type genericType, Class&lt;?&gt; subType)`\r\n&gt;\r\n&gt; Resolves the raw class for a genericType using type variable information from a subType.\r\n\r\n\r\n  [1]: https://github.com/jhalterman/typetools","title":"How do I get the element type of a collection passed in a method?","body":"<p>Suppose I have some method that accepts a <code>List&lt;?&gt;</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>public void method(List&lt;?&gt; list) {\n    // some logic\n}\n</code></pre>\n<p>How can I get the element type in runtime? Is it possible?</p>\n<p>I found these suggestions (here on SO):</p>\n<ol>\n<li><code>((ParameterizedType) getClass().getGenericSuperclass()).getActualTypeArguments()[0]</code> (doesn't work, <code>List</code> is an interface and doesn't have a superclass)</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>// ChatGPT's work\n\npublic class App {\n    public static void main(String[] args) {\n        List&lt;String&gt; stringList = new ArrayList&lt;&gt;();\n        List&lt;Integer&gt; integerList = new ArrayList&lt;&gt;();\n\n        Type stringType = getListElementType(stringList);\n        Type integerType = getListElementType(integerList);\n\n        System.out.println(&quot;String List Element Type: &quot; + stringType.getTypeName());\n        System.out.println(&quot;Integer List Element Type: &quot; + integerType.getTypeName());\n    }\n\n    private static Type getListElementType(List&lt;?&gt; list) {\n        Type genericType = list.getClass().getGenericSuperclass();\n\n        if (genericType instanceof ParameterizedType) {\n            ParameterizedType parameterizedType = (ParameterizedType) genericType;\n            return parameterizedType.getActualTypeArguments()[0];\n        }\n\n        throw new IllegalArgumentException(&quot;Unable to determine list element type.&quot;);\n    }\n}\n</code></pre>\n<p>Console output:</p>\n<pre><code>String List Element Type: E\nInteger List Element Type: E\n</code></pre>\n<ol start=\"2\">\n<li>Storing a corresponding class as a field during creation of a generic class instance (doesn't work, <code>List</code> is read-only, and it can't have any instance fields anyway since it's an interface)</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>/*\n from jqno's answer to &quot;How can I learn actual type argument of an generic class?&quot;\n Henning in his answer to &quot;Get generic type of class at runtime&quot; suggested a similar trick\n*/\n\nclass ParameterizedClass&lt;T&gt; {\n    private Class&lt;T&gt; type;\n\n    /** Factory method */\n    public static &lt;T&gt; ParameterizedClass&lt;T&gt; of(Class&lt;T&gt; type) {\n        return new ParameterizedClass&lt;T&gt;(type);\n    }\n\n    /** Private constructor; use the factory method instead */\n    private ParameterizedClass(Class&lt;T&gt; type) {\n        this.type = type;\n    }\n\n    // Do something useful with type\n}\n</code></pre>\n<ol start=\"3\">\n<li>The <a href=\"https://github.com/jhalterman/typetools\" rel=\"nofollow noreferrer\">TypeTools library</a>. I still need some supertype</li>\n</ol>\n<blockquote>\n<p>The TypeResolver class provides some of the following methods:</p>\n<p><code>Type reify(Type type, Class&lt;S&gt; context)</code></p>\n<p>Returns a fully reified type using type variable information from the context.</p>\n<p><code>Type reify(Type genericType)</code></p>\n<p>Returns a fully reified genericType using information from the generic declaration.</p>\n<p><code>Class&lt;?&gt;[] resolveRawArguments(Class&lt;T&gt; type, Class&lt;S&gt; subType)</code></p>\n<p>Resolves the raw arguments for a type using type variable information from a subType.</p>\n<p><code>Class&lt;?&gt; resolveRawArgument(Class&lt;T&gt; type, Class&lt;S&gt; subType)</code></p>\n<p>Resolves the raw argument for a type using type variable information from a subType.</p>\n<p><code>Type resolveGenericType(Class&lt;?&gt; type, Type subType)</code></p>\n<p>Resolves the generic type using type variable information from a subType.</p>\n<p><code>Class&lt;?&gt; resolveRawClass(Type genericType, Class&lt;?&gt; subType)</code></p>\n<p>Resolves the raw class for a genericType using type variable information from a subType.</p>\n</blockquote>\n"},{"tags":["java","spring","hibernate"],"answers":[{"comments":[{"owner":{"account_id":4153318,"reputation":19445,"user_id":3405171,"display_name":"v.ladynev"},"score":2,"creation_date":1464168161,"post_id":37420690,"comment_id":62369114,"body_markdown":"Funny, I can reproduce the problem with Hibernate 5.1. The transformer `Transformers.aliasToBean(CatDTO.class)` doesn&#39;t work. I just tested with my own transformer before :) Try to figure out why so.","body":"Funny, I can reproduce the problem with Hibernate 5.1. The transformer <code>Transformers.aliasToBean(CatDTO.class)</code> doesn&#39;t work. I just tested with my own transformer before :) Try to figure out why so."},{"owner":{"account_id":4153318,"reputation":19445,"user_id":3405171,"display_name":"v.ladynev"},"score":1,"creation_date":1464174339,"post_id":37420690,"comment_id":62373432,"body_markdown":"It is much more funny, I was right with the aliases. See my answer: http://stackoverflow.com/a/37423885/3405171","body":"It is much more funny, I was right with the aliases. See my answer: <a href=\"http://stackoverflow.com/a/37423885/3405171\">stackoverflow.com/a/37423885/3405171</a>"}],"tags":[],"owner":{"account_id":6463892,"reputation":15974,"user_id":5277820,"accept_rate":68,"display_name":"dur"},"comment_count":2,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1464165451,"creation_date":1464112674,"answer_id":37420690,"question_id":37420401,"body_markdown":"See [AliasToBeanResultTransformer](https://docs.jboss.org/hibernate/orm/4.3/javadocs/org/hibernate/transform/AliasToBeanResultTransformer.html):\r\n\r\n&gt; Result transformer that allows to transform a result to a user specified class which will be populated via setter methods or fields matching the alias names.\r\n&gt;\r\n&gt;     List resultWithAliasedBean = s.createCriteria(Enrolment.class)\r\n                .createAlias(&quot;student&quot;, &quot;st&quot;)\r\n                .createAlias(&quot;course&quot;, &quot;co&quot;)\r\n                .setProjection( Projections.projectionList()\r\n                        .add( Projections.property(&quot;co.description&quot;), &quot;courseDescription&quot; )\r\n                )\r\n                .setResultTransformer( new AliasToBeanResultTransformer(StudentDTO.class) )\r\n                .list();\r\n&gt; \r\n&gt;     StudentDTO dto = (StudentDTO)resultWithAliasedBean.get(0);\r\n\r\nYour modified code:\r\n\r\n\r\n    List resultWithAliasedBean = s.createCriteria(Employee.class, &quot;e&quot;)\r\n        .setProjection(Projections.projectionList()\r\n            .add(Projections.property(&quot;e.firstName&quot;), &quot;firstName&quot;)\r\n            .add(Projections.property(&quot;e.lastName&quot;), &quot;lastName&quot;)\r\n        )\r\n        .setResultTransformer(new AliasToBeanResultTransformer(Results.class))\r\n        .list();\r\n\r\n    Results dto = (Results) resultWithAliasedBean.get(0);\r\n\r\nFor native SQL queries see [Hibernate documentation](https://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html/ch13.html#d5e3663):\r\n\r\n&gt; **13.1.5. Returning non-managed entities**\r\n&gt;\r\n&gt; It is possible to apply a ResultTransformer to native SQL queries, allowing it to return non-managed entities.\r\n&gt;\r\n&gt;     sess.createSQLQuery(&quot;SELECT NAME, BIRTHDATE FROM CATS&quot;)\r\n        .setResultTransformer(Transformers.aliasToBean(CatDTO.class))\r\n&gt; This query specified:\r\n&gt; \r\n&gt; - the SQL query string\r\n&gt; - a result transformer\r\n&gt; The above query will return a list of `CatDTO` which has been instantiated and injected the values of NAME and BIRTHNAME into its corresponding properties or fields.","title":"mapping Hibernate query results to custom class?","body":"<p>See <a href=\"https://docs.jboss.org/hibernate/orm/4.3/javadocs/org/hibernate/transform/AliasToBeanResultTransformer.html\" rel=\"noreferrer\">AliasToBeanResultTransformer</a>:</p>\n\n<blockquote>\n  <p>Result transformer that allows to transform a result to a user specified class which will be populated via setter methods or fields matching the alias names.</p>\n\n<pre><code>List resultWithAliasedBean = s.createCriteria(Enrolment.class)\n            .createAlias(\"student\", \"st\")\n            .createAlias(\"course\", \"co\")\n            .setProjection( Projections.projectionList()\n                    .add( Projections.property(\"co.description\"), \"courseDescription\" )\n            )\n            .setResultTransformer( new AliasToBeanResultTransformer(StudentDTO.class) )\n            .list();\n\nStudentDTO dto = (StudentDTO)resultWithAliasedBean.get(0);\n</code></pre>\n</blockquote>\n\n<p>Your modified code:</p>\n\n<pre><code>List resultWithAliasedBean = s.createCriteria(Employee.class, \"e\")\n    .setProjection(Projections.projectionList()\n        .add(Projections.property(\"e.firstName\"), \"firstName\")\n        .add(Projections.property(\"e.lastName\"), \"lastName\")\n    )\n    .setResultTransformer(new AliasToBeanResultTransformer(Results.class))\n    .list();\n\nResults dto = (Results) resultWithAliasedBean.get(0);\n</code></pre>\n\n<p>For native SQL queries see <a href=\"https://docs.jboss.org/hibernate/orm/4.1/devguide/en-US/html/ch13.html#d5e3663\" rel=\"noreferrer\">Hibernate documentation</a>:</p>\n\n<blockquote>\n  <p><strong>13.1.5. Returning non-managed entities</strong></p>\n  \n  <p>It is possible to apply a ResultTransformer to native SQL queries, allowing it to return non-managed entities.</p>\n\n<pre><code>sess.createSQLQuery(\"SELECT NAME, BIRTHDATE FROM CATS\")\n    .setResultTransformer(Transformers.aliasToBean(CatDTO.class))\n</code></pre>\n  \n  <p>This query specified:</p>\n  \n  <ul>\n  <li>the SQL query string</li>\n  <li>a result transformer\n  The above query will return a list of <code>CatDTO</code> which has been instantiated and injected the values of NAME and BIRTHNAME into its corresponding properties or fields.</li>\n  </ul>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":1494973,"reputation":408,"user_id":1401147,"display_name":"Alejandra"},"comment_count":0,"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1464129364,"creation_date":1464112890,"answer_id":37420750,"question_id":37420401,"body_markdown":"You need to use a constructor and in the hql use new. I let you the code example taken from this question:  https://stackoverflow.com/questions/15339504/hibernate-hql-createquery-list-type-cast-to-model-directly\r\n\r\n    class Result {\r\n        private firstName;\r\n        private lastName;\r\n        public Result (String firstName, String lastName){\r\n          this.firstName = firstName;\r\n          this.lastName = lastName;\r\n       }\r\n    }\r\n\r\nthen your hql\r\n   \r\n    select new com.yourpackage.Result(employee.firstName,employee.lastName) \r\n    from Employee  \r\n\r\nand your java (using Hibernate)\r\n\r\n    List&lt;Result&gt; results = session.createQuery(&quot;select new com.yourpackage.Result(employee.firstName,employee.lastName) from Employee&quot;).list();\r\n\r\n","title":"mapping Hibernate query results to custom class?","body":"<p>You need to use a constructor and in the hql use new. I let you the code example taken from this question:  <a href=\"https://stackoverflow.com/questions/15339504/hibernate-hql-createquery-list-type-cast-to-model-directly\">hibernate HQL createQuery() list() type cast to model directly</a></p>\n\n<pre><code>class Result {\n    private firstName;\n    private lastName;\n    public Result (String firstName, String lastName){\n      this.firstName = firstName;\n      this.lastName = lastName;\n   }\n}\n</code></pre>\n\n<p>then your hql</p>\n\n<pre><code>select new com.yourpackage.Result(employee.firstName,employee.lastName) \nfrom Employee  \n</code></pre>\n\n<p>and your java (using Hibernate)</p>\n\n<pre><code>List&lt;Result&gt; results = session.createQuery(\"select new com.yourpackage.Result(employee.firstName,employee.lastName) from Employee\").list();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3435981,"reputation":304,"user_id":2879109,"accept_rate":57,"display_name":"C.B."},"score":1,"creation_date":1619593308,"post_id":37423885,"comment_id":118948498,"body_markdown":"Nice one! By putting quotes on aliases I can use my class with ResultTransformer! Thanks!","body":"Nice one! By putting quotes on aliases I can use my class with ResultTransformer! Thanks!"}],"tags":[],"owner":{"account_id":4153318,"reputation":19445,"user_id":3405171,"display_name":"v.ladynev"},"comment_count":1,"down_vote_count":0,"up_vote_count":25,"is_accepted":false,"score":25,"last_activity_date":1692240780,"creation_date":1464123949,"answer_id":37423885,"question_id":37420401,"body_markdown":"    select firstName, lastName from Employee\r\n    \r\n    query.setResultTransformer(Transformers.aliasToBean(MyResults.class));\r\n\r\nYou can&#39;t use above code with Hibernate 5 and Hibernate 4 (at least Hibernate 4.3.6.Final), because of an exception\r\n\r\n    java.lang.ClassCastException: com.github.fluent.hibernate.request.persistent.UserDto cannot be cast to java.util.Map\r\n    \tat org.hibernate.property.access.internal.PropertyAccessMapImpl$SetterImpl.set(PropertyAccessMapImpl.java:102)\r\n\r\nThe problem is that Hibernate converts aliases for column names to upper case — `firstName` becomes `FIRSTNAME`. And it tries to find a getter with name `getFIRSTNAME()`, and setter `setFIRSTNAME()` in the `DTO` using such strategies\r\n\r\n\t\tPropertyAccessStrategyChainedImpl propertyAccessStrategy = new PropertyAccessStrategyChainedImpl(\r\n\t\t\t\tPropertyAccessStrategyBasicImpl.INSTANCE,\r\n\t\t\t\tPropertyAccessStrategyFieldImpl.INSTANCE,\r\n\t\t\t\tPropertyAccessStrategyMapImpl.INSTANCE\r\n\t\t);\r\n\r\nOnly `PropertyAccessStrategyMapImpl.INSTANCE` suits, in opinion of Hibernate, well. So after that, it tries to do conversion `(Map)MyResults`.\r\n\r\n    public void set(Object target, Object value, SessionFactoryImplementor factory) {\r\n    \t( (Map) target ).put( propertyName, value );\r\n    }\r\n\r\nDon&#39;t know, it is a bug or feature.\r\n\r\n**How to solve**\r\n\r\n**Using aliases with quotes**\r\n\r\n    public class Results {\r\n        \r\n        private String firstName;\r\n    \r\n        private String lastName;\r\n    \r\n        public String getFirstName() {\r\n            return firstName;\r\n        }\r\n    \r\n        public String getLastName() {\r\n            return lastName;\r\n        }\r\n    \r\n        public void setFirstName(String firstName) {\r\n            this.firstName = firstName;\r\n        }\r\n    \r\n        public void setLastName(String lastName) {\r\n            this.lastName = lastName;\r\n        }\r\n    \r\n    }\r\n\r\n    String sql = &quot;select firstName as \\&quot;firstName\\&quot;, \r\n        lastName as \\&quot;lastName\\&quot; from Employee&quot;;\r\n    \r\n    List&lt;Results&gt; employees = session.createSQLQuery(sql).setResultTransformer(\r\n        Transformers.aliasToBean(Results.class)).list(); \r\n\r\n**Using a custom result transformer**\r\n\r\nAnother way to solve the problem — using a result transformer that ignores method names case (treat `getFirstName()` as `getFIRSTNAME()`). You can write your own or use [FluentHibernateResultTransformer](https://github.com/v-ladynev/fluent-hibernate/blob/master/fluent-hibernate-core/src/main/java/com/github/fluent/hibernate/transformer/FluentHibernateResultTransformer.java). You will not need to use quotes and aliases (if you have column names equal to DTO names).  \r\n\r\nJust download the library from the project page (it doesn&#39;t need additional jars): [fluent-hibernate](https://github.com/v-ladynev/fluent-hibernate).\r\n\r\n    String sql = &quot;select firstName, lastName from Employee&quot;;\r\n    List&lt;Results&gt; employees = session.createSQLQuery(sql)\r\n            .setResultTransformer(new FluentHibernateResultTransformer(Results.class))\r\n            .list();\r\n\r\nThis transformer can be used for nested projections too: [How to transform a flat result set using Hibernate](https://stackoverflow.com/a/36361630/3405171)\r\n \r\n\r\n","title":"mapping Hibernate query results to custom class?","body":"<pre><code>select firstName, lastName from Employee\n\nquery.setResultTransformer(Transformers.aliasToBean(MyResults.class));\n</code></pre>\n<p>You can't use above code with Hibernate 5 and Hibernate 4 (at least Hibernate 4.3.6.Final), because of an exception</p>\n<pre><code>java.lang.ClassCastException: com.github.fluent.hibernate.request.persistent.UserDto cannot be cast to java.util.Map\n    at org.hibernate.property.access.internal.PropertyAccessMapImpl$SetterImpl.set(PropertyAccessMapImpl.java:102)\n</code></pre>\n<p>The problem is that Hibernate converts aliases for column names to upper case — <code>firstName</code> becomes <code>FIRSTNAME</code>. And it tries to find a getter with name <code>getFIRSTNAME()</code>, and setter <code>setFIRSTNAME()</code> in the <code>DTO</code> using such strategies</p>\n<pre><code>    PropertyAccessStrategyChainedImpl propertyAccessStrategy = new PropertyAccessStrategyChainedImpl(\n            PropertyAccessStrategyBasicImpl.INSTANCE,\n            PropertyAccessStrategyFieldImpl.INSTANCE,\n            PropertyAccessStrategyMapImpl.INSTANCE\n    );\n</code></pre>\n<p>Only <code>PropertyAccessStrategyMapImpl.INSTANCE</code> suits, in opinion of Hibernate, well. So after that, it tries to do conversion <code>(Map)MyResults</code>.</p>\n<pre><code>public void set(Object target, Object value, SessionFactoryImplementor factory) {\n    ( (Map) target ).put( propertyName, value );\n}\n</code></pre>\n<p>Don't know, it is a bug or feature.</p>\n<p><strong>How to solve</strong></p>\n<p><strong>Using aliases with quotes</strong></p>\n<pre><code>public class Results {\n    \n    private String firstName;\n\n    private String lastName;\n\n    public String getFirstName() {\n        return firstName;\n    }\n\n    public String getLastName() {\n        return lastName;\n    }\n\n    public void setFirstName(String firstName) {\n        this.firstName = firstName;\n    }\n\n    public void setLastName(String lastName) {\n        this.lastName = lastName;\n    }\n\n}\n\nString sql = &quot;select firstName as \\&quot;firstName\\&quot;, \n    lastName as \\&quot;lastName\\&quot; from Employee&quot;;\n\nList&lt;Results&gt; employees = session.createSQLQuery(sql).setResultTransformer(\n    Transformers.aliasToBean(Results.class)).list(); \n</code></pre>\n<p><strong>Using a custom result transformer</strong></p>\n<p>Another way to solve the problem — using a result transformer that ignores method names case (treat <code>getFirstName()</code> as <code>getFIRSTNAME()</code>). You can write your own or use <a href=\"https://github.com/v-ladynev/fluent-hibernate/blob/master/fluent-hibernate-core/src/main/java/com/github/fluent/hibernate/transformer/FluentHibernateResultTransformer.java\" rel=\"nofollow noreferrer\">FluentHibernateResultTransformer</a>. You will not need to use quotes and aliases (if you have column names equal to DTO names).</p>\n<p>Just download the library from the project page (it doesn't need additional jars): <a href=\"https://github.com/v-ladynev/fluent-hibernate\" rel=\"nofollow noreferrer\">fluent-hibernate</a>.</p>\n<pre><code>String sql = &quot;select firstName, lastName from Employee&quot;;\nList&lt;Results&gt; employees = session.createSQLQuery(sql)\n        .setResultTransformer(new FluentHibernateResultTransformer(Results.class))\n        .list();\n</code></pre>\n<p>This transformer can be used for nested projections too: <a href=\"https://stackoverflow.com/a/36361630/3405171\">How to transform a flat result set using Hibernate</a></p>\n"},{"comments":[{"owner":{"account_id":8296956,"reputation":95,"user_id":6236885,"display_name":"Piyush Upadhyay"},"score":0,"creation_date":1591997054,"post_id":38092851,"comment_id":110276688,"body_markdown":"It was very helpful. Thanks!","body":"It was very helpful. Thanks!"},{"owner":{"account_id":6224322,"reputation":329,"user_id":4843095,"accept_rate":25,"display_name":"Jorge Lizaso"},"score":0,"creation_date":1598904173,"post_id":38092851,"comment_id":112602668,"body_markdown":"I love you man, if I could I would give this answer 100 points.","body":"I love you man, if I could I would give this answer 100 points."}],"tags":[],"owner":{"account_id":305493,"reputation":4238,"user_id":615686,"display_name":"Night Owl"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1467184719,"creation_date":1467184719,"answer_id":38092851,"question_id":37420401,"body_markdown":"YMMV but I&#39;ve found that the key factor is you must make sure to alias every field in your SELECT clause with the SQL &quot;AS&quot; keyword. I&#39;ve never had to use quotes around the alias names. Also, in your SELECT clause use the case and punctuation of the actual columns in your database and in the aliases use the case of the fields in your POJO. This has worked for me in Hibernate 4 and 5.\r\n    \r\n    @Autowired\r\n    private SessionFactory sessionFactory;\r\n    \r\n    ...\r\n    \r\n    String sqlQuery = &quot;SELECT firstName AS firstName,&quot; +\r\n            &quot;lastName AS lastName from Employee&quot;;\r\n    \r\n    List&lt;Results&gt; employeeList = sessionFactory\r\n            .getCurrentSession()\r\n            .createSQLQuery(sqlQuery)\r\n            .setResultTransformer(Transformers.aliasToBean(Results.class))\r\n            .list();\r\n\r\nIf you have multiple tables you can use table aliases in the SQL as well. This contrived example with an additional table named &quot;Department&quot; uses more traditional lower case and underscores in database field names with camel case in the POJO field names.\r\n\r\n    String sqlQuery = &quot;SELECT e.first_name AS firstName, &quot; +\r\n            &quot;e.last_name AS lastName, d.name as departmentName&quot; +\r\n            &quot;from Employee e, Department d&quot; +\r\n            &quot;WHERE e.department_id - d.id&quot;;\r\n    \r\n    List&lt;Results&gt; employeeList = sessionFactory\r\n            .getCurrentSession()\r\n            .createSQLQuery(sqlQuery)\r\n            .setResultTransformer(Transformers.aliasToBean(Results.class))\r\n            .list();","title":"mapping Hibernate query results to custom class?","body":"<p>YMMV but I've found that the key factor is you must make sure to alias every field in your SELECT clause with the SQL \"AS\" keyword. I've never had to use quotes around the alias names. Also, in your SELECT clause use the case and punctuation of the actual columns in your database and in the aliases use the case of the fields in your POJO. This has worked for me in Hibernate 4 and 5.</p>\n\n<pre><code>@Autowired\nprivate SessionFactory sessionFactory;\n\n...\n\nString sqlQuery = \"SELECT firstName AS firstName,\" +\n        \"lastName AS lastName from Employee\";\n\nList&lt;Results&gt; employeeList = sessionFactory\n        .getCurrentSession()\n        .createSQLQuery(sqlQuery)\n        .setResultTransformer(Transformers.aliasToBean(Results.class))\n        .list();\n</code></pre>\n\n<p>If you have multiple tables you can use table aliases in the SQL as well. This contrived example with an additional table named \"Department\" uses more traditional lower case and underscores in database field names with camel case in the POJO field names.</p>\n\n<pre><code>String sqlQuery = \"SELECT e.first_name AS firstName, \" +\n        \"e.last_name AS lastName, d.name as departmentName\" +\n        \"from Employee e, Department d\" +\n        \"WHERE e.department_id - d.id\";\n\nList&lt;Results&gt; employeeList = sessionFactory\n        .getCurrentSession()\n        .createSQLQuery(sqlQuery)\n        .setResultTransformer(Transformers.aliasToBean(Results.class))\n        .list();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":904106,"reputation":10873,"user_id":939420,"accept_rate":80,"display_name":"Lisandro"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1491486550,"creation_date":1491486550,"answer_id":43257169,"question_id":37420401,"body_markdown":"In case you have a native query, all answers here use deprecated methods for newer versions of Hibernate, so if you are using 5.1+ this is the way to go:\r\n\r\n    // Note this is a org.hibernate.query.NativeQuery NOT Query.\r\n    NativeQuery query = getCurrentSession()\r\n    \t\t\t\t.createNativeQuery(\r\n                            &quot;SELECT {y.*} , {x.*} from TableY y left join TableX x on x.id = y.id&quot;);\r\n    \r\n    \r\n    // This maps the results to entities. \r\n    query.addEntity(&quot;x&quot;, TableXEntity.class);\r\n    query.addEntity(&quot;y&quot;, TableYEntity.class);\r\n    \r\n    query.list()","title":"mapping Hibernate query results to custom class?","body":"<p>In case you have a native query, all answers here use deprecated methods for newer versions of Hibernate, so if you are using 5.1+ this is the way to go:</p>\n\n<pre><code>// Note this is a org.hibernate.query.NativeQuery NOT Query.\nNativeQuery query = getCurrentSession()\n                .createNativeQuery(\n                        \"SELECT {y.*} , {x.*} from TableY y left join TableX x on x.id = y.id\");\n\n\n// This maps the results to entities. \nquery.addEntity(\"x\", TableXEntity.class);\nquery.addEntity(\"y\", TableYEntity.class);\n\nquery.list()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8241671,"reputation":107,"user_id":6199149,"display_name":"Pankaj Shinde"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1507830189,"creation_date":1507830189,"answer_id":46715824,"question_id":37420401,"body_markdown":"`java.lang.ClassCastException: &quot;CustomClass&quot; cannot be cast to java.util.Map.`\r\n\r\nThis issue appears when the columns specified in SQL Query doesn&#39;t match with the columns of the mapping class. \r\n\r\nIt may be due to:\r\n\r\n- Non-matching casing of column name or \r\n\r\n- The column names are not matching or \r\n\r\n- column exist in query but missing in class.\r\n\r\n","title":"mapping Hibernate query results to custom class?","body":"<p><code>java.lang.ClassCastException: \"CustomClass\" cannot be cast to java.util.Map.</code></p>\n\n<p>This issue appears when the columns specified in SQL Query doesn't match with the columns of the mapping class. </p>\n\n<p>It may be due to:</p>\n\n<ul>\n<li><p>Non-matching casing of column name or </p></li>\n<li><p>The column names are not matching or </p></li>\n<li><p>column exist in query but missing in class.</p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":6010232,"reputation":2616,"user_id":4720910,"display_name":"Musa"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1547537473,"creation_date":1518973801,"answer_id":48854352,"question_id":37420401,"body_markdown":"Writing (exist this type of Challenges working with hibernate)\r\n\r\n1. Custom Queries\r\n2. Custom Queries with Optional Parameters\r\n3. Mapping Hibernate Custom query results to Custom class.\r\n\r\nI am not saying about custom EntityRepository interface which extends JpaRepository on SpringBoot which you can write custom Query with @Query -&gt; here you can&#39;t write query with optional params \r\ne.g. if param is null don&#39;t append it in query string. And you can use Criteria api of hibernate but it not recommended in their documentation because of performance issue...\r\n\r\nBut exist simple and error prone and performance good way...\r\n\r\n Write your own QueryService class which are methods will get\r\n string(answer for first and second problem) sql and will map result to\r\n Custom class (third problem) with it&#39;s any association @OneToMany, @ManyToOne ....\r\n\r\n\r\n    @Service\r\n    @Transactional\r\n    public class HibernateQueryService {\r\n    \r\n        private final Logger log = LoggerFactory.getLogger(HibernateQueryService.class);\r\n        private JpaContext jpaContext;\r\n    \r\n        public HibernateQueryService(JpaContext jpaContext) {\r\n            this.jpaContext = jpaContext;\r\n        }\r\n    \r\n        public List executeJPANativeQuery(String sql, Class entity){\r\n            log.debug(&quot;JPANativeQuery executing: &quot;+sql);\r\n            EntityManager entityManager = jpaContext.getEntityManagerByManagedType(Article.class);\r\n            return entityManager.createNativeQuery(sql, entity).getResultList();\r\n        }\r\n    \r\n    /**\r\n     * as annotation @Query -&gt; we can construct here hibernate dialect \r\n     * supported query and fetch any type of data\r\n     * with any association @OneToMany and @ManyToOne.....\r\n     */\r\n        public List executeHibernateQuery(String sql, Class entity){\r\n            log.debug(&quot;HibernateNativeQuery executing: &quot;+sql);\r\n            Session session = jpaContext.getEntityManagerByManagedType(Article.class).unwrap(Session.class);\r\n            return session.createQuery(sql, entity).getResultList();\r\n        }\r\n    \r\n    public &lt;T&gt; List&lt;T&gt; executeGenericHibernateQuery(String sql, Class&lt;T&gt; entity){\r\n        log.debug(&quot;HibernateNativeQuery executing: &quot;+sql);\r\n        Session session = jpaContext.getEntityManagerByManagedType(Article.class).unwrap(Session.class);\r\n        return session.createQuery(sql, entity).getResultList();\r\n    }\r\n    \r\n    \r\n    }\r\n\r\n    \r\n\r\n Use case - you can write any type condition about query params\r\n\r\n\r\n\r\n   \r\n\r\n     @Transactional(readOnly = true)\r\n        public List&lt;ArticleDTO&gt; findWithHibernateWay(SearchFiltersVM filter){\r\n    \r\n            Long[] stores = filter.getStores();\r\n            Long[] categories = filter.getCategories();\r\n            Long[] brands = filter.getBrands();\r\n            Long[] articles = filter.getArticles();\r\n            Long[] colors = filter.getColors();\r\n    \r\n            String query = &quot;select article from Article article &quot; +\r\n                &quot;left join fetch article.attributeOptions &quot; +\r\n                &quot;left join fetch article.brand &quot; +\r\n                &quot;left join fetch article.stocks stock &quot; +\r\n                &quot;left join fetch stock.color &quot; +\r\n                &quot;left join fetch stock.images &quot;;\r\n    \r\n    boolean isFirst = true;\r\n    \r\n            if(!isArrayEmptyOrNull(stores)){\r\n                query += isFirst ? &quot;where &quot; : &quot;and &quot;;\r\n                query += &quot;stock.store.id in (&quot;+ Arrays.stream(stores).map(store -&gt; store.toString()).collect(Collectors.joining(&quot;, &quot;))+&quot;) &quot;;\r\n                isFirst = false;\r\n            }\r\n    \r\n            if(!isArrayEmptyOrNull(brands)){\r\n                query += isFirst ? &quot;where &quot; : &quot;and &quot;;\r\n                query += &quot;article.brand.id in (&quot;+ Arrays.stream(brands).map(store -&gt; store.toString()).collect(Collectors.joining(&quot;, &quot;))+&quot;) &quot;;\r\n                isFirst = false;\r\n            }\r\n    \r\n            if(!isArrayEmptyOrNull(articles)){\r\n                query += isFirst ? &quot;where &quot; : &quot;and &quot;;\r\n                query += &quot;article.id in (&quot;+ Arrays.stream(articles).map(store -&gt; store.toString()).collect(Collectors.joining(&quot;, &quot;))+&quot;) &quot;;\r\n                isFirst = false;\r\n            }\r\n    \r\n            if(!isArrayEmptyOrNull(colors)){\r\n                query += isFirst ? &quot;where &quot; : &quot;and &quot;;\r\n                query += &quot;stock.color.id in (&quot;+ Arrays.stream(colors).map(store -&gt; store.toString()).collect(Collectors.joining(&quot;, &quot;))+&quot;) &quot;;\r\n            }\r\n    \r\n            List&lt;Article&gt; articles = hibernateQueryService.executeHibernateQuery(query, Article.class);\r\n        \r\n        \r\n          /**\r\n            *  MapStruct [http://mapstruct.org/][1]\r\n            */\r\n            return articles.stream().map(articleMapper::toDto).collect(Collectors.toList());\r\n        \r\n        }\r\n\r\n  [1]: http://mapstruct.org/\r\n","title":"mapping Hibernate query results to custom class?","body":"<p>Writing (exist this type of Challenges working with hibernate)</p>\n\n<ol>\n<li>Custom Queries</li>\n<li>Custom Queries with Optional Parameters</li>\n<li>Mapping Hibernate Custom query results to Custom class.</li>\n</ol>\n\n<p>I am not saying about custom EntityRepository interface which extends JpaRepository on SpringBoot which you can write custom Query with @Query -> here you can't write query with optional params \ne.g. if param is null don't append it in query string. And you can use Criteria api of hibernate but it not recommended in their documentation because of performance issue...</p>\n\n<p>But exist simple and error prone and performance good way...</p>\n\n<p>Write your own QueryService class which are methods will get\n string(answer for first and second problem) sql and will map result to\n Custom class (third problem) with it's any association @OneToMany, @ManyToOne ....</p>\n\n<pre><code>@Service\n@Transactional\npublic class HibernateQueryService {\n\n    private final Logger log = LoggerFactory.getLogger(HibernateQueryService.class);\n    private JpaContext jpaContext;\n\n    public HibernateQueryService(JpaContext jpaContext) {\n        this.jpaContext = jpaContext;\n    }\n\n    public List executeJPANativeQuery(String sql, Class entity){\n        log.debug(\"JPANativeQuery executing: \"+sql);\n        EntityManager entityManager = jpaContext.getEntityManagerByManagedType(Article.class);\n        return entityManager.createNativeQuery(sql, entity).getResultList();\n    }\n\n/**\n * as annotation @Query -&gt; we can construct here hibernate dialect \n * supported query and fetch any type of data\n * with any association @OneToMany and @ManyToOne.....\n */\n    public List executeHibernateQuery(String sql, Class entity){\n        log.debug(\"HibernateNativeQuery executing: \"+sql);\n        Session session = jpaContext.getEntityManagerByManagedType(Article.class).unwrap(Session.class);\n        return session.createQuery(sql, entity).getResultList();\n    }\n\npublic &lt;T&gt; List&lt;T&gt; executeGenericHibernateQuery(String sql, Class&lt;T&gt; entity){\n    log.debug(\"HibernateNativeQuery executing: \"+sql);\n    Session session = jpaContext.getEntityManagerByManagedType(Article.class).unwrap(Session.class);\n    return session.createQuery(sql, entity).getResultList();\n}\n\n\n}\n</code></pre>\n\n<p>Use case - you can write any type condition about query params</p>\n\n<pre><code> @Transactional(readOnly = true)\n    public List&lt;ArticleDTO&gt; findWithHibernateWay(SearchFiltersVM filter){\n\n        Long[] stores = filter.getStores();\n        Long[] categories = filter.getCategories();\n        Long[] brands = filter.getBrands();\n        Long[] articles = filter.getArticles();\n        Long[] colors = filter.getColors();\n\n        String query = \"select article from Article article \" +\n            \"left join fetch article.attributeOptions \" +\n            \"left join fetch article.brand \" +\n            \"left join fetch article.stocks stock \" +\n            \"left join fetch stock.color \" +\n            \"left join fetch stock.images \";\n\nboolean isFirst = true;\n\n        if(!isArrayEmptyOrNull(stores)){\n            query += isFirst ? \"where \" : \"and \";\n            query += \"stock.store.id in (\"+ Arrays.stream(stores).map(store -&gt; store.toString()).collect(Collectors.joining(\", \"))+\") \";\n            isFirst = false;\n        }\n\n        if(!isArrayEmptyOrNull(brands)){\n            query += isFirst ? \"where \" : \"and \";\n            query += \"article.brand.id in (\"+ Arrays.stream(brands).map(store -&gt; store.toString()).collect(Collectors.joining(\", \"))+\") \";\n            isFirst = false;\n        }\n\n        if(!isArrayEmptyOrNull(articles)){\n            query += isFirst ? \"where \" : \"and \";\n            query += \"article.id in (\"+ Arrays.stream(articles).map(store -&gt; store.toString()).collect(Collectors.joining(\", \"))+\") \";\n            isFirst = false;\n        }\n\n        if(!isArrayEmptyOrNull(colors)){\n            query += isFirst ? \"where \" : \"and \";\n            query += \"stock.color.id in (\"+ Arrays.stream(colors).map(store -&gt; store.toString()).collect(Collectors.joining(\", \"))+\") \";\n        }\n\n        List&lt;Article&gt; articles = hibernateQueryService.executeHibernateQuery(query, Article.class);\n\n\n      /**\n        *  MapStruct [http://mapstruct.org/][1]\n        */\n        return articles.stream().map(articleMapper::toDto).collect(Collectors.toList());\n\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4121828,"reputation":1491,"user_id":3381907,"display_name":"krozaine"},"score":0,"creation_date":1570726755,"post_id":53661558,"comment_id":103013871,"body_markdown":"Looks promising, but how do we go about using this, please provide an example","body":"Looks promising, but how do we go about using this, please provide an example"}],"tags":[],"owner":{"account_id":8003470,"reputation":46,"user_id":6037483,"display_name":"Stephen Gray"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1544141778,"creation_date":1544141778,"answer_id":53661558,"question_id":37420401,"body_markdown":"Below is a result transformer that ignores case:\r\n\r\n    package org.apec.abtc.dao.hibernate.transform;\r\n    \r\n    import java.lang.reflect.Field;\r\n    import java.util.Arrays;\r\n    import java.util.List;\r\n    \r\n    import org.hibernate.HibernateException;\r\n    import org.hibernate.property.access.internal.PropertyAccessStrategyBasicImpl;\r\n    import org.hibernate.property.access.internal.PropertyAccessStrategyChainedImpl;\r\n    import org.hibernate.property.access.internal.PropertyAccessStrategyFieldImpl;\r\n    import org.hibernate.property.access.internal.PropertyAccessStrategyMapImpl;\r\n    import org.hibernate.property.access.spi.Setter;\r\n    import org.hibernate.transform.AliasedTupleSubsetResultTransformer;\r\n    \r\n    /**\r\n     * IgnoreCaseAlias to BeanResult Transformer\r\n     * \r\n     * @author Stephen Gray\r\n     */\r\n    public class IgnoreCaseAliasToBeanResultTransformer extends AliasedTupleSubsetResultTransformer\r\n    {\r\n    \r\n        /** The serialVersionUID field. */\r\n        private static final long serialVersionUID = -3779317531110592988L;\r\n    \r\n        /** The resultClass field. */\r\n        @SuppressWarnings(&quot;rawtypes&quot;)\r\n        private final Class resultClass;\r\n        /** The setters field. */\r\n        private Setter[] setters;\r\n        /** The fields field. */\r\n        private Field[] fields;\r\n        private String[] aliases;\r\n    \r\n        /**\r\n         * @param resultClass\r\n         */\r\n        @SuppressWarnings(&quot;rawtypes&quot;)\r\n        public IgnoreCaseAliasToBeanResultTransformer(final Class resultClass)\r\n        {\r\n            if (resultClass == null)\r\n            {\r\n                throw new IllegalArgumentException(&quot;resultClass cannot be null&quot;);\r\n            }\r\n            this.resultClass = resultClass;\r\n            this.fields = this.resultClass.getDeclaredFields();\r\n        }\r\n        \r\n        @Override\r\n        public boolean isTransformedValueATupleElement(String[] aliases, int tupleLength) {\r\n            return false;\r\n        }\r\n    \r\n        /**\r\n         * {@inheritDoc}\r\n         */\r\n        @Override\r\n        public Object transformTuple(final Object[] tuple, final String[] aliases)\r\n        {\r\n            Object result;\r\n    \r\n            try\r\n            {\r\n                if (this.setters == null)\r\n                {\r\n                    this.aliases = aliases;\r\n                    \r\n                    setSetters(aliases);\r\n                }\r\n                result = this.resultClass.newInstance();\r\n    \r\n                for (int i = 0; i &lt; aliases.length; i++)\r\n                {\r\n                    if (this.setters[i] != null)\r\n                    {\r\n                        this.setters[i].set(result, tuple[i], null);\r\n                    }\r\n                }\r\n            }\r\n            catch (final InstantiationException | IllegalAccessException e)\r\n            {\r\n                throw new HibernateException(&quot;Could not instantiate resultclass: &quot; + this.resultClass.getName(), e);\r\n            }\r\n    \r\n            return result;\r\n        }\r\n    \r\n        private void setSetters(final String[] aliases)\r\n        {\r\n            PropertyAccessStrategyChainedImpl propertyAccessStrategy = new PropertyAccessStrategyChainedImpl(\r\n                                                                                                             PropertyAccessStrategyBasicImpl.INSTANCE,\r\n                                                                                                             PropertyAccessStrategyFieldImpl.INSTANCE,\r\n                                                                                                             PropertyAccessStrategyMapImpl.INSTANCE\r\n                                                                            );\r\n    \r\n            this.setters = new Setter[aliases.length];\r\n            for (int i = 0; i &lt; aliases.length; i++)\r\n            {\r\n                String alias = aliases[i];\r\n                if (alias != null)\r\n                {\r\n                    for (final Field field : this.fields)\r\n                    {\r\n                        final String fieldName = field.getName();\r\n                        if (fieldName.equalsIgnoreCase(alias))\r\n                        {\r\n                            alias = fieldName;\r\n                            break;\r\n                        }\r\n                    }\r\n                    setters[i] = propertyAccessStrategy.buildPropertyAccess( resultClass, alias ).getSetter();\r\n                }\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * {@inheritDoc}\r\n         */\r\n        @Override\r\n        @SuppressWarnings(&quot;rawtypes&quot;)\r\n        public List transformList(final List collection)\r\n        {\r\n            return collection;\r\n        }\r\n    \r\n        @Override\r\n        public boolean equals(Object o) {\r\n            if ( this == o ) {\r\n                return true;\r\n            }\r\n            if ( o == null || getClass() != o.getClass() ) {\r\n                return false;\r\n            }\r\n    \r\n            IgnoreCaseAliasToBeanResultTransformer that = ( IgnoreCaseAliasToBeanResultTransformer ) o;\r\n    \r\n            if ( ! resultClass.equals( that.resultClass ) ) {\r\n                return false;\r\n            }\r\n            if ( ! Arrays.equals( aliases, that.aliases ) ) {\r\n                return false;\r\n            }\r\n    \r\n            return true;\r\n        }\r\n    \r\n        @Override\r\n        public int hashCode() {\r\n            int result = resultClass.hashCode();\r\n            result = 31 * result + ( aliases != null ? Arrays.hashCode( aliases ) : 0 );\r\n            return result;\r\n        }\r\n    }\r\n\r\n","title":"mapping Hibernate query results to custom class?","body":"<p>Below is a result transformer that ignores case:</p>\n\n<pre><code>package org.apec.abtc.dao.hibernate.transform;\n\nimport java.lang.reflect.Field;\nimport java.util.Arrays;\nimport java.util.List;\n\nimport org.hibernate.HibernateException;\nimport org.hibernate.property.access.internal.PropertyAccessStrategyBasicImpl;\nimport org.hibernate.property.access.internal.PropertyAccessStrategyChainedImpl;\nimport org.hibernate.property.access.internal.PropertyAccessStrategyFieldImpl;\nimport org.hibernate.property.access.internal.PropertyAccessStrategyMapImpl;\nimport org.hibernate.property.access.spi.Setter;\nimport org.hibernate.transform.AliasedTupleSubsetResultTransformer;\n\n/**\n * IgnoreCaseAlias to BeanResult Transformer\n * \n * @author Stephen Gray\n */\npublic class IgnoreCaseAliasToBeanResultTransformer extends AliasedTupleSubsetResultTransformer\n{\n\n    /** The serialVersionUID field. */\n    private static final long serialVersionUID = -3779317531110592988L;\n\n    /** The resultClass field. */\n    @SuppressWarnings(\"rawtypes\")\n    private final Class resultClass;\n    /** The setters field. */\n    private Setter[] setters;\n    /** The fields field. */\n    private Field[] fields;\n    private String[] aliases;\n\n    /**\n     * @param resultClass\n     */\n    @SuppressWarnings(\"rawtypes\")\n    public IgnoreCaseAliasToBeanResultTransformer(final Class resultClass)\n    {\n        if (resultClass == null)\n        {\n            throw new IllegalArgumentException(\"resultClass cannot be null\");\n        }\n        this.resultClass = resultClass;\n        this.fields = this.resultClass.getDeclaredFields();\n    }\n\n    @Override\n    public boolean isTransformedValueATupleElement(String[] aliases, int tupleLength) {\n        return false;\n    }\n\n    /**\n     * {@inheritDoc}\n     */\n    @Override\n    public Object transformTuple(final Object[] tuple, final String[] aliases)\n    {\n        Object result;\n\n        try\n        {\n            if (this.setters == null)\n            {\n                this.aliases = aliases;\n\n                setSetters(aliases);\n            }\n            result = this.resultClass.newInstance();\n\n            for (int i = 0; i &lt; aliases.length; i++)\n            {\n                if (this.setters[i] != null)\n                {\n                    this.setters[i].set(result, tuple[i], null);\n                }\n            }\n        }\n        catch (final InstantiationException | IllegalAccessException e)\n        {\n            throw new HibernateException(\"Could not instantiate resultclass: \" + this.resultClass.getName(), e);\n        }\n\n        return result;\n    }\n\n    private void setSetters(final String[] aliases)\n    {\n        PropertyAccessStrategyChainedImpl propertyAccessStrategy = new PropertyAccessStrategyChainedImpl(\n                                                                                                         PropertyAccessStrategyBasicImpl.INSTANCE,\n                                                                                                         PropertyAccessStrategyFieldImpl.INSTANCE,\n                                                                                                         PropertyAccessStrategyMapImpl.INSTANCE\n                                                                        );\n\n        this.setters = new Setter[aliases.length];\n        for (int i = 0; i &lt; aliases.length; i++)\n        {\n            String alias = aliases[i];\n            if (alias != null)\n            {\n                for (final Field field : this.fields)\n                {\n                    final String fieldName = field.getName();\n                    if (fieldName.equalsIgnoreCase(alias))\n                    {\n                        alias = fieldName;\n                        break;\n                    }\n                }\n                setters[i] = propertyAccessStrategy.buildPropertyAccess( resultClass, alias ).getSetter();\n            }\n        }\n    }\n\n    /**\n     * {@inheritDoc}\n     */\n    @Override\n    @SuppressWarnings(\"rawtypes\")\n    public List transformList(final List collection)\n    {\n        return collection;\n    }\n\n    @Override\n    public boolean equals(Object o) {\n        if ( this == o ) {\n            return true;\n        }\n        if ( o == null || getClass() != o.getClass() ) {\n            return false;\n        }\n\n        IgnoreCaseAliasToBeanResultTransformer that = ( IgnoreCaseAliasToBeanResultTransformer ) o;\n\n        if ( ! resultClass.equals( that.resultClass ) ) {\n            return false;\n        }\n        if ( ! Arrays.equals( aliases, that.aliases ) ) {\n            return false;\n        }\n\n        return true;\n    }\n\n    @Override\n    public int hashCode() {\n        int result = resultClass.hashCode();\n        result = 31 * result + ( aliases != null ? Arrays.hashCode( aliases ) : 0 );\n        return result;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10948643,"reputation":121,"user_id":8045724,"display_name":"GiraffeTree"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1609209090,"creation_date":1609208783,"answer_id":65486568,"question_id":37420401,"body_markdown":"JPQL case from hibernate 5.4:\r\n\r\n    Query&lt;Employee&gt; queryList = session.createQuery(&quot;select new xxx.xxx.Employee(e.firstName,e.lastName) from Employee e&quot;, Employee.class);\r\n    List&lt;Employee&gt; list = queryList.list();\r\n\r\n    Query&lt;Long&gt; queryCount = session.createQuery(&quot;select count(*) from Employee&quot;, Long.class);\r\n    Long count = queryCount.getSingleResult();\r\n\r\n- The select statement in JPQL is exactly the same as for HQL except that JPQL requires a select_clause, whereas HQL does not.\r\n- setResultTransformer @Deprecated It should not be used\r\n- more on [Hibernate_User_Guide.html#hql-select][1]\r\n\r\n  [1]: https://docs.jboss.org/hibernate/orm/5.4/userguide/html_single/Hibernate_User_Guide.html#hql-select","title":"mapping Hibernate query results to custom class?","body":"<p>JPQL case from hibernate 5.4:</p>\n<pre><code>Query&lt;Employee&gt; queryList = session.createQuery(&quot;select new xxx.xxx.Employee(e.firstName,e.lastName) from Employee e&quot;, Employee.class);\nList&lt;Employee&gt; list = queryList.list();\n\nQuery&lt;Long&gt; queryCount = session.createQuery(&quot;select count(*) from Employee&quot;, Long.class);\nLong count = queryCount.getSingleResult();\n</code></pre>\n<ul>\n<li>The select statement in JPQL is exactly the same as for HQL except that JPQL requires a select_clause, whereas HQL does not.</li>\n<li>setResultTransformer @Deprecated It should not be used</li>\n<li>more on <a href=\"https://docs.jboss.org/hibernate/orm/5.4/userguide/html_single/Hibernate_User_Guide.html#hql-select\" rel=\"nofollow noreferrer\">Hibernate_User_Guide.html#hql-select</a></li>\n</ul>\n"}],"owner":{"account_id":6491447,"reputation":401,"user_id":5025389,"accept_rate":18,"display_name":"Chris"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66590,"favorite_count":0,"down_vote_count":0,"up_vote_count":21,"answer_count":9,"score":21,"last_activity_date":1692240780,"creation_date":1464111667,"question_id":37420401,"body_markdown":"Following up on a question I posted yesterday: https://stackoverflow.com/questions/37400670/how-to-populate-pojo-class-from-custom-hibernate-query\r\n\r\nCan someone show me an example of how to code the following SQL in Hibernate, and get the results correctly?\r\n\r\nSQL:\r\n\r\n    select firstName, lastName\r\n    from Employee\r\n\r\nWhat I&#39;d like to do, if it&#39;s possible in Hibernate, is to put the results in their own base class:\r\n\r\n    class Results {\r\n        private firstName;\r\n        private lastName;\r\n        // getters and setters\r\n    }\r\n\r\nI believe it&#39;s possible in JPA (using `EntityManager`), but I haven&#39;t figured out how to do it in Hibernate (using `SessionFactory` and `Session`).\r\n\r\nI&#39;m trying to learn Hibernate better, and even this &quot;simple&quot; query is proving confusing to know what form Hibernate returns the results, and how to map the results into my own (base) class.  So at the end of the DAO routine, I&#39;d do:\r\n\r\n    List&lt;Results&gt; list = query.list();\r\n\r\nreturning a `List` of `Results` (my base class).\r\n","title":"mapping Hibernate query results to custom class?","body":"<p>Following up on a question I posted yesterday: <a href=\"https://stackoverflow.com/questions/37400670/how-to-populate-pojo-class-from-custom-hibernate-query\">How to populate POJO class from custom Hibernate query?</a></p>\n\n<p>Can someone show me an example of how to code the following SQL in Hibernate, and get the results correctly?</p>\n\n<p>SQL:</p>\n\n<pre><code>select firstName, lastName\nfrom Employee\n</code></pre>\n\n<p>What I'd like to do, if it's possible in Hibernate, is to put the results in their own base class:</p>\n\n<pre><code>class Results {\n    private firstName;\n    private lastName;\n    // getters and setters\n}\n</code></pre>\n\n<p>I believe it's possible in JPA (using <code>EntityManager</code>), but I haven't figured out how to do it in Hibernate (using <code>SessionFactory</code> and <code>Session</code>).</p>\n\n<p>I'm trying to learn Hibernate better, and even this \"simple\" query is proving confusing to know what form Hibernate returns the results, and how to map the results into my own (base) class.  So at the end of the DAO routine, I'd do:</p>\n\n<pre><code>List&lt;Results&gt; list = query.list();\n</code></pre>\n\n<p>returning a <code>List</code> of <code>Results</code> (my base class).</p>\n"},{"tags":["java","maven","error-handling","codenameone","proguard"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1692172599,"post_id":76911116,"comment_id":135586249,"body_markdown":"Please don&#39;t post images of text.","body":"Please don&#39;t post images of text."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1692195318,"post_id":76911116,"comment_id":135591079,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"comments":[{"owner":{"account_id":29234559,"reputation":13,"user_id":22397453,"display_name":"Vladyslav Korshenko"},"score":0,"creation_date":1692264964,"post_id":76918094,"comment_id":135600829,"body_markdown":"Now I see. But what if I need some extra classes or packages ? How to properly add them to my project ?\nFor example, in this project I need to send GET request to certain endpoint and map the response. And packages that Codename one supports can`t fulfill my needs.","body":"Now I see. But what if I need some extra classes or packages ? How to properly add them to my project ? For example, in this project I need to send GET request to certain endpoint and map the response. And packages that Codename one supports can`t fulfill my needs."},{"owner":{"account_id":394396,"reputation":52144,"user_id":756809,"accept_rate":89,"display_name":"Shai Almog"},"score":0,"creation_date":1692327379,"post_id":76918094,"comment_id":135611195,"body_markdown":"You can include some jars but that&#39;s problematic see: https://help.codenameone.com/en-us/article/can-i-use-any-jar-1uav2ka/\nWe have multiple APIs for networking and REST. E.g. the [Rest](https://www.codenameone.com/blog/terse-rest-api.html) API is [relatively easy to use](https://www.codenameone.com/blog/new-rest-calls.html). Especially with [properties](https://www.codenameone.com/blog/properties-are-amazing.html) e.g. [this](https://www.codenameone.com/javadoc/com/codename1/io/rest/RequestBuilder.html#body-com.codename1.properties.PropertyBusinessObject-).","body":"You can include some jars but that&#39;s problematic see: <a href=\"https://help.codenameone.com/en-us/article/can-i-use-any-jar-1uav2ka/\" rel=\"nofollow noreferrer\">help.codenameone.com/en-us/article/can-i-use-any-jar-1uav2ka</a> We have multiple APIs for networking and REST. E.g. the <a href=\"https://www.codenameone.com/blog/terse-rest-api.html\" rel=\"nofollow noreferrer\">Rest</a> API is <a href=\"https://www.codenameone.com/blog/new-rest-calls.html\" rel=\"nofollow noreferrer\">relatively easy to use</a>. Especially with <a href=\"https://www.codenameone.com/blog/properties-are-amazing.html\" rel=\"nofollow noreferrer\">properties</a> e.g. <a href=\"https://www.codenameone.com/javadoc/com/codename1/io/rest/RequestBuilder.html#body-com.codename1.properties.PropertyBusinessObject-\" rel=\"nofollow noreferrer\">this</a>."}],"tags":[],"owner":{"account_id":394396,"reputation":52144,"user_id":756809,"accept_rate":89,"display_name":"Shai Almog"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1692239008,"creation_date":1692239008,"answer_id":76918094,"question_id":76911116,"body_markdown":"This error is there to indicate that you are using classes that are unsupported by the Codename One API such as `Scanner`.  You can review the supported classes in the JavaDoc [here][1].\r\n\r\nClasses like `Scanner` are mostly about user command line input which isn&#39;t relevant when running on a device.\r\n\r\n\r\n  [1]: https://www.codenameone.com/javadoc/","title":"Codename one java ios app PROGUARD warnings trouble","body":"<p>This error is there to indicate that you are using classes that are unsupported by the Codename One API such as <code>Scanner</code>.  You can review the supported classes in the JavaDoc <a href=\"https://www.codenameone.com/javadoc/\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>Classes like <code>Scanner</code> are mostly about user command line input which isn't relevant when running on a device.</p>\n"}],"owner":{"account_id":29234559,"reputation":13,"user_id":22397453,"display_name":"Vladyslav Korshenko"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76918094,"answer_count":1,"score":1,"last_activity_date":1692239008,"creation_date":1692168445,"question_id":76911116,"body_markdown":"I&#39;m writing IOS app using codename one project that I get from codename`s initializer cite.\r\nAt some point I have to use java.net, java.io and java.util packages.\r\nBut when I&#39;m trying to build project, following warnings occurs:\r\n\r\n![enter image description here](https://i.stack.imgur.com/abEBX.png)\r\n\r\n&quot;[INFO] ProGuard, version 7.2.0-beta2\r\n[INFO] Reading input...\r\n[INFO] Reading program jar [C:\\Users\\Kor\\IdeaProjects\\testapp\\common\\target\\compliance-check.jar] (filtered)\r\n[INFO] Reading library jar [C:\\Users\\Kor\\.m2\\repository\\com\\codenameone\\java-runtime\\7.0.86\\java-runtime-7.0.86.jar] (filtered)\r\n[INFO] Reading library jar [C:\\Users\\Kor\\.m2\\repository\\com\\codenameone\\codenameone-core\\7.0.117\\codenameone-core-7.0.117.jar] (filtered)\r\n[INFO] Initializing...\r\n[INFO] Warning: com.kor.testiosapp.forms.ResultsForm: can&#39;t find referenced class java.net.URL\r\n[INFO] Warning: com.kor.testiosapp.forms.ResultsForm: can&#39;t find referenced class java.net.URLConnection\r\n[INFO] Warning: com.kor.testiosapp.forms.ResultsForm: can&#39;t find referenced class java.util.Scanner\r\n[INFO] Warning: com.kor.testiosapp.forms.ResultsForm: can&#39;t find referenced class java.net.URL\r\n[INFO] Warning: com.kor.testiosapp.forms.ResultsForm: can&#39;t find referenced class java.net.URL\r\n[INFO] Warning: com.kor.testiosapp.forms.ResultsForm: can&#39;t find referenced class java.net.URLConnection\r\n[INFO] Warning: com.kor.testiosapp.forms.ResultsForm: can&#39;t find referenced class java.util.Scanner\r\n[INFO] Warning: com.kor.testiosapp.forms.ResultsForm: can&#39;t find referenced class java.util.Scanner\r\n[INFO] Warning: com.kor.testiosapp.forms.ResultsForm: can&#39;t find referenced class java.util.Scanner\r\n[INFO] Warning: com.kor.testiosapp.forms.ResultsForm: can&#39;t find referenced class java.net.URLConnection\r\n[INFO] Warning: com.kor.testiosapp.forms.ResultsForm: can&#39;t find referenced class java.util.Scanner\r\n[INFO] Warning: there were 11 unresolved references to classes or interfaces.\r\n[INFO]          You may need to add missing library jars or update their versions.\r\n[INFO]          If your code works fine without the missing classes, you can suppress\r\n[INFO]          the warnings with &#39;-dontwarn&#39; options.\r\n[INFO]          (https://www.guardsquare.com/proguard/manual/troubleshooting#unresolvedclass)\r\n[INFO] java.io.IOException: Please correct the above warnings first.&quot;\r\n\r\n\r\nThe manual to which link leads has brief description of problem cause and it&#39;s solution.\r\nBut I even can&#39;t find proguard config file to put necessary options.\r\nI guess that config file lays somewhere in codename one libs and that`s the reason I can&#39;t find it.\r\n\r\nI also read this part of manual: &quot; For example, if ProGuard complains that it can&#39;t find a java.lang class, you have to make sure that you are specifying the run-time library of your platform. For JSE, these are typically packaged in lib/rt.jar (vm.jar for IBM&#39;s JVM, and classes.jar in MacOS X) or as of Java 9, jmods/java.base.jmod.&quot;\r\n\r\nBut that didn&#39;t help me either, as _I don&#39;t understand the point of the &quot;make sure that you are specifying the run-time library of your platform&quot; part._\r\n","title":"Codename one java ios app PROGUARD warnings trouble","body":"<p>I'm writing IOS app using codename one project that I get from codename`s initializer cite.\nAt some point I have to use java.net, java.io and java.util packages.\nBut when I'm trying to build project, following warnings occurs:</p>\n<p><img src=\"https://i.stack.imgur.com/abEBX.png\" alt=\"enter image description here\" /></p>\n<p>&quot;[INFO] ProGuard, version 7.2.0-beta2\n[INFO] Reading input...\n[INFO] Reading program jar [C:\\Users\\Kor\\IdeaProjects\\testapp\\common\\target\\compliance-check.jar] (filtered)\n[INFO] Reading library jar [C:\\Users\\Kor.m2\\repository\\com\\codenameone\\java-runtime\\7.0.86\\java-runtime-7.0.86.jar] (filtered)\n[INFO] Reading library jar [C:\\Users\\Kor.m2\\repository\\com\\codenameone\\codenameone-core\\7.0.117\\codenameone-core-7.0.117.jar] (filtered)\n[INFO] Initializing...\n[INFO] Warning: com.kor.testiosapp.forms.ResultsForm: can't find referenced class java.net.URL\n[INFO] Warning: com.kor.testiosapp.forms.ResultsForm: can't find referenced class java.net.URLConnection\n[INFO] Warning: com.kor.testiosapp.forms.ResultsForm: can't find referenced class java.util.Scanner\n[INFO] Warning: com.kor.testiosapp.forms.ResultsForm: can't find referenced class java.net.URL\n[INFO] Warning: com.kor.testiosapp.forms.ResultsForm: can't find referenced class java.net.URL\n[INFO] Warning: com.kor.testiosapp.forms.ResultsForm: can't find referenced class java.net.URLConnection\n[INFO] Warning: com.kor.testiosapp.forms.ResultsForm: can't find referenced class java.util.Scanner\n[INFO] Warning: com.kor.testiosapp.forms.ResultsForm: can't find referenced class java.util.Scanner\n[INFO] Warning: com.kor.testiosapp.forms.ResultsForm: can't find referenced class java.util.Scanner\n[INFO] Warning: com.kor.testiosapp.forms.ResultsForm: can't find referenced class java.net.URLConnection\n[INFO] Warning: com.kor.testiosapp.forms.ResultsForm: can't find referenced class java.util.Scanner\n[INFO] Warning: there were 11 unresolved references to classes or interfaces.\n[INFO]          You may need to add missing library jars or update their versions.\n[INFO]          If your code works fine without the missing classes, you can suppress\n[INFO]          the warnings with '-dontwarn' options.\n[INFO]          (<a href=\"https://www.guardsquare.com/proguard/manual/troubleshooting#unresolvedclass\" rel=\"nofollow noreferrer\">https://www.guardsquare.com/proguard/manual/troubleshooting#unresolvedclass</a>)\n[INFO] java.io.IOException: Please correct the above warnings first.&quot;</p>\n<p>The manual to which link leads has brief description of problem cause and it's solution.\nBut I even can't find proguard config file to put necessary options.\nI guess that config file lays somewhere in codename one libs and that`s the reason I can't find it.</p>\n<p>I also read this part of manual: &quot; For example, if ProGuard complains that it can't find a java.lang class, you have to make sure that you are specifying the run-time library of your platform. For JSE, these are typically packaged in lib/rt.jar (vm.jar for IBM's JVM, and classes.jar in MacOS X) or as of Java 9, jmods/java.base.jmod.&quot;</p>\n<p>But that didn't help me either, as <em>I don't understand the point of the &quot;make sure that you are specifying the run-time library of your platform&quot; part.</em></p>\n"},{"tags":["java","dictionary","key"],"comments":[{"owner":{"account_id":4996428,"reputation":362,"user_id":4016860,"accept_rate":75,"display_name":"Popeye"},"score":0,"creation_date":1692085976,"post_id":76904199,"comment_id":135573683,"body_markdown":"have you tried debugging your code?","body":"have you tried debugging your code?"},{"owner":{"account_id":29227858,"reputation":21,"user_id":22392163,"display_name":"DAN"},"score":0,"creation_date":1692087059,"post_id":76904199,"comment_id":135573879,"body_markdown":"@Lenka Yes Thanks)","body":"@Lenka Yes Thanks)"}],"answers":[{"tags":[],"owner":{"account_id":11358426,"reputation":1127,"user_id":8327330,"display_name":"iamgirdhar"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1692086430,"creation_date":1692086430,"answer_id":76904267,"question_id":76904199,"body_markdown":"**Using Java 8 Stream API:**\r\n\r\n**Logic Here:**\r\n\r\nHere you can use `groupingBy` feature in java stream API and do the groupingBy based on value and then join the elements using `Collectors.joining` while collecting it.\r\n\r\n*You can try it by using java 8 stream API as shown below:*\r\n\r\n    Map&lt;String,String&gt; map = patients.entrySet().stream()\r\n                 .collect(Collectors.groupingBy(Map.Entry::getValue,\r\n                  Collectors.mapping(Map.Entry::getKey,Collectors.joining(&quot;,&quot;))));\r\n\r\n\r\n**Output:**\r\n\r\n    {Adam=555,666, PAM=66r}","title":"How to output multiple keys with one common value in Java?","body":"<p><strong>Using Java 8 Stream API:</strong></p>\n<p><strong>Logic Here:</strong></p>\n<p>Here you can use <code>groupingBy</code> feature in java stream API and do the groupingBy based on value and then join the elements using <code>Collectors.joining</code> while collecting it.</p>\n<p><em>You can try it by using java 8 stream API as shown below:</em></p>\n<pre><code>Map&lt;String,String&gt; map = patients.entrySet().stream()\n             .collect(Collectors.groupingBy(Map.Entry::getValue,\n              Collectors.mapping(Map.Entry::getKey,Collectors.joining(&quot;,&quot;))));\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>{Adam=555,666, PAM=66r}\n</code></pre>\n"}],"owner":{"account_id":29227858,"reputation":21,"user_id":22392163,"display_name":"DAN"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1692086785,"answer_count":1,"score":0,"last_activity_date":1692238940,"creation_date":1692085716,"question_id":76904199,"body_markdown":"I am working on a Java program. I am trying to output multiple keys with one common value.\r\n\r\nMy code:\r\n```\r\nMap&lt;String, String&gt; patients = new HashMap&lt;&gt;();\r\n        patients.put(&quot;555&quot;, &quot;Adam&quot;);\r\n        patients.put(&quot;666&quot;, &quot;Adam&quot;);\r\n        patients.put(&quot;66r&quot;, &quot;PAM&quot;);\r\n        Set&lt;String&gt; list = new TreeSet&lt;&gt;();\r\n        for (Map.Entry&lt;String, String&gt; listOfPatients : patients.entrySet()) {\r\n            list.add(listOfPatients.getValue() + &quot; - &quot; + String.join(&quot;,&quot;,listOfPatients.getKey()));\r\n            System.out.println(list);\r\n        }\r\n\r\n```\r\n\r\nHowever, I get the wrong output.\r\n\r\nThe output I want:\r\n~~~\r\nAdam - 555,666\r\n~~~\r\nThe output I get:\r\n~~~\r\n[Adam - 555, Adam - 666, PP - 66r]\r\n~~~","title":"How to output multiple keys with one common value in Java?","body":"<p>I am working on a Java program. I am trying to output multiple keys with one common value.</p>\n<p>My code:</p>\n<pre><code>Map&lt;String, String&gt; patients = new HashMap&lt;&gt;();\n        patients.put(&quot;555&quot;, &quot;Adam&quot;);\n        patients.put(&quot;666&quot;, &quot;Adam&quot;);\n        patients.put(&quot;66r&quot;, &quot;PAM&quot;);\n        Set&lt;String&gt; list = new TreeSet&lt;&gt;();\n        for (Map.Entry&lt;String, String&gt; listOfPatients : patients.entrySet()) {\n            list.add(listOfPatients.getValue() + &quot; - &quot; + String.join(&quot;,&quot;,listOfPatients.getKey()));\n            System.out.println(list);\n        }\n\n</code></pre>\n<p>However, I get the wrong output.</p>\n<p>The output I want:</p>\n<pre><code>Adam - 555,666\n</code></pre>\n<p>The output I get:</p>\n<pre><code>[Adam - 555, Adam - 666, PP - 66r]\n</code></pre>\n"},{"tags":["java","html","spring","jsoup"],"comments":[{"owner":{"account_id":1096470,"reputation":26066,"user_id":1089967,"accept_rate":59,"display_name":"lance-java"},"score":0,"creation_date":1692197308,"post_id":76914670,"comment_id":135591532,"body_markdown":"why do you want to do this? why not write the html how you want it in the first place?","body":"why do you want to do this? why not write the html how you want it in the first place?"},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1692197331,"post_id":76914670,"comment_id":135591537,"body_markdown":"If there is only single `&lt;p&gt;` element, do you also want to surround it in `&lt;div class=&quot;test&quot;&gt;`?","body":"If there is only single <code>&lt;p&gt;</code> element, do you also want to surround it in <code>&lt;div class=&quot;test&quot;&gt;</code>?"},{"owner":{"account_id":22864720,"reputation":33,"user_id":17008258,"display_name":"Jake Morgan"},"score":0,"creation_date":1692197464,"post_id":76914670,"comment_id":135591573,"body_markdown":"@Pshemo Yes, that&#39;s right","body":"@Pshemo Yes, that&#39;s right"},{"owner":{"account_id":22864720,"reputation":33,"user_id":17008258,"display_name":"Jake Morgan"},"score":0,"creation_date":1692197574,"post_id":76914670,"comment_id":135591598,"body_markdown":"@lance-java I need to process the html, not write it myself.","body":"@lance-java I need to process the html, not write it myself."},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1692197717,"post_id":76914670,"comment_id":135591634,"body_markdown":"Then your title is misleading since it claims you want to surround only *identical* elements. If there is only one `&lt;p&gt;` there is no *other* identical element so according to this rule it shouldn&#39;t be surrounded (just like `&lt;img&gt;` element is not surrounded in posted example).","body":"Then your title is misleading since it claims you want to surround only <i>identical</i> elements. If there is only one <code>&lt;p&gt;</code> there is no <i>other</i> identical element so according to this rule it shouldn&#39;t be surrounded (just like <code>&lt;img&gt;</code> element is not surrounded in posted example)."},{"owner":{"account_id":22864720,"reputation":33,"user_id":17008258,"display_name":"Jake Morgan"},"score":0,"creation_date":1692198121,"post_id":76914670,"comment_id":135591724,"body_markdown":"@Pshemo I have edited the example and the result for a better understanding","body":"@Pshemo I have edited the example and the result for a better understanding"}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1692238384,"creation_date":1692238384,"answer_id":76918063,"question_id":76914670,"body_markdown":"&gt; _&quot;... find identical tag elements that are not separated by other tags ...&quot;_\r\n\r\nYou can use a _[ListIterator](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/ListIterator.html)_ to mutate an _[Elements](https://jsoup.org/apidocs/org/jsoup/select/Elements.html)_ collection.  \r\nAdditionally, you can utilize the _[next](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/ListIterator.html#next())_ and _[previous](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/ListIterator.html#previous())_ methods to adjust the iterator&#39;s cursor.\r\n\r\nHere, the _element_ and _next_ variables hold the current and following elements, respectively.\r\n\r\nThe concept is to add all _p_ elements to the new _div_ element.  \r\nThe _div_ is only added when the _next_ element is _null_ or not a _p_ element.\r\n\r\n```java\r\nString string\r\n  = &quot;&lt;body&gt;\\n&quot; +\r\n    &quot;    &lt;p&gt;123124&lt;/p&gt;\\n&quot; +\r\n    &quot;    &lt;p&gt;214565&lt;/p&gt;\\n&quot; +\r\n    &quot;    &lt;p&gt;123333&lt;/p&gt;\\n&quot; +\r\n    &quot;    &lt;img src = \\&quot;aboba\\&quot;/&gt;\\n&quot; +\r\n    &quot;    &lt;p&gt;faaaa&lt;/p&gt;\\n&quot; +\r\n    &quot;    &lt;p&gt;aaaaa&lt;/p&gt;\\n&quot; +\r\n    &quot;    &lt;a href=\\&quot;src\\&quot;&gt;&lt;/a&gt;\\n&quot; +\r\n    &quot;    &lt;p&gt;1111&lt;/p&gt;\\n&quot; +\r\n    &quot;&lt;/body&gt;&quot;;\r\nDocument document = Jsoup.parse(string);\r\nElements body = document.select(&quot;body&quot;).first().children();\r\nListIterator&lt;Element&gt; iterator = body.listIterator();\r\nElement element, next, div = new Element(&quot;div&quot;).attr(&quot;class&quot;, &quot;test&quot;);\r\nwhile (iterator.hasNext()) {\r\n    element = iterator.next();\r\n    if (element.tagName().equalsIgnoreCase(&quot;p&quot;)) {\r\n        div.appendChild(element);\r\n        iterator.remove();\r\n    }\r\n    if (iterator.hasNext()) {\r\n        next = iterator.next();\r\n        iterator.previous();\r\n        if (!next.tagName().equalsIgnoreCase(&quot;p&quot;)) {\r\n            iterator.add(div);\r\n            div = new Element(&quot;div&quot;).attr(&quot;class&quot;, &quot;test&quot;);\r\n        }\r\n    } else {\r\n        iterator.add(div);\r\n    }\r\n}\r\n```\r\n\r\nHere is the output for _body_.\r\n\r\n```html\r\n&lt;div class=&quot;test&quot;&gt;\r\n &lt;p&gt;123124&lt;/p&gt;\r\n &lt;p&gt;214565&lt;/p&gt;\r\n &lt;p&gt;123333&lt;/p&gt;\r\n&lt;/div&gt;\r\n&lt;img src=&quot;aboba&quot;&gt;\r\n&lt;div class=&quot;test&quot;&gt;\r\n &lt;p&gt;faaaa&lt;/p&gt;\r\n &lt;p&gt;aaaaa&lt;/p&gt;\r\n&lt;/div&gt;\r\n&lt;a href=&quot;src&quot;&gt;&lt;/a&gt;\r\n&lt;div class=&quot;test&quot;&gt;\r\n &lt;p&gt;1111&lt;/p&gt;\r\n&lt;/div&gt;\r\n```","title":"JSOUP find identical tag elements that are not separated by other tags","body":"<blockquote>\n<p><em>&quot;... find identical tag elements that are not separated by other tags ...&quot;</em></p>\n</blockquote>\n<p>You can use a <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/ListIterator.html\" rel=\"nofollow noreferrer\">ListIterator</a></em> to mutate an <em><a href=\"https://jsoup.org/apidocs/org/jsoup/select/Elements.html\" rel=\"nofollow noreferrer\">Elements</a></em> collection.<br />\nAdditionally, you can utilize the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/ListIterator.html#next()\" rel=\"nofollow noreferrer\">next</a></em> and <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/ListIterator.html#previous()\" rel=\"nofollow noreferrer\">previous</a></em> methods to adjust the iterator's cursor.</p>\n<p>Here, the <em>element</em> and <em>next</em> variables hold the current and following elements, respectively.</p>\n<p>The concept is to add all <em>p</em> elements to the new <em>div</em> element.<br />\nThe <em>div</em> is only added when the <em>next</em> element is <em>null</em> or not a <em>p</em> element.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String string\n  = &quot;&lt;body&gt;\\n&quot; +\n    &quot;    &lt;p&gt;123124&lt;/p&gt;\\n&quot; +\n    &quot;    &lt;p&gt;214565&lt;/p&gt;\\n&quot; +\n    &quot;    &lt;p&gt;123333&lt;/p&gt;\\n&quot; +\n    &quot;    &lt;img src = \\&quot;aboba\\&quot;/&gt;\\n&quot; +\n    &quot;    &lt;p&gt;faaaa&lt;/p&gt;\\n&quot; +\n    &quot;    &lt;p&gt;aaaaa&lt;/p&gt;\\n&quot; +\n    &quot;    &lt;a href=\\&quot;src\\&quot;&gt;&lt;/a&gt;\\n&quot; +\n    &quot;    &lt;p&gt;1111&lt;/p&gt;\\n&quot; +\n    &quot;&lt;/body&gt;&quot;;\nDocument document = Jsoup.parse(string);\nElements body = document.select(&quot;body&quot;).first().children();\nListIterator&lt;Element&gt; iterator = body.listIterator();\nElement element, next, div = new Element(&quot;div&quot;).attr(&quot;class&quot;, &quot;test&quot;);\nwhile (iterator.hasNext()) {\n    element = iterator.next();\n    if (element.tagName().equalsIgnoreCase(&quot;p&quot;)) {\n        div.appendChild(element);\n        iterator.remove();\n    }\n    if (iterator.hasNext()) {\n        next = iterator.next();\n        iterator.previous();\n        if (!next.tagName().equalsIgnoreCase(&quot;p&quot;)) {\n            iterator.add(div);\n            div = new Element(&quot;div&quot;).attr(&quot;class&quot;, &quot;test&quot;);\n        }\n    } else {\n        iterator.add(div);\n    }\n}\n</code></pre>\n<p>Here is the output for <em>body</em>.</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;div class=&quot;test&quot;&gt;\n &lt;p&gt;123124&lt;/p&gt;\n &lt;p&gt;214565&lt;/p&gt;\n &lt;p&gt;123333&lt;/p&gt;\n&lt;/div&gt;\n&lt;img src=&quot;aboba&quot;&gt;\n&lt;div class=&quot;test&quot;&gt;\n &lt;p&gt;faaaa&lt;/p&gt;\n &lt;p&gt;aaaaa&lt;/p&gt;\n&lt;/div&gt;\n&lt;a href=&quot;src&quot;&gt;&lt;/a&gt;\n&lt;div class=&quot;test&quot;&gt;\n &lt;p&gt;1111&lt;/p&gt;\n&lt;/div&gt;\n</code></pre>\n"}],"owner":{"account_id":22864720,"reputation":33,"user_id":17008258,"display_name":"Jake Morgan"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1692238384,"creation_date":1692196923,"question_id":76914670,"body_markdown":"Code example:\r\n\r\n    &lt;body&gt;\r\n\t\t&lt;p&gt;123124&lt;/p&gt;\r\n\t\t&lt;p&gt;214565&lt;/p&gt;\r\n\t\t&lt;p&gt;123333&lt;/p&gt;\r\n\t\t&lt;img src = &quot;aboba&quot;/&gt;\r\n\t\t&lt;p&gt;faaaa&lt;/p&gt;\r\n\t\t&lt;p&gt;aaaaa&lt;/p&gt;\r\n\t\t&lt;a href=&quot;src&quot;&gt;&lt;/a&gt;\r\n\t\t&lt;p&gt;1111&lt;/p&gt;\r\n\t&lt;/body&gt;\r\n\r\nUsing jsoup to wrap in `&lt;div class=&quot;test&quot;&gt;&lt;/div&gt;`\r\n\r\nI expect that it will turn out something like that\r\n\r\nResult:\r\n\r\n    &lt;div class=&quot;test&quot;&gt;\r\n\t\t&lt;p&gt;123124&lt;/p&gt;\r\n\t\t&lt;p&gt;214565&lt;/p&gt;\r\n\t\t&lt;p&gt;123333&lt;/p&gt;\r\n\t&lt;/div&gt;\r\n\t&lt;img src = &quot;aboba&quot;/&gt;\r\n\t&lt;div class=&quot;test&quot;&gt;\r\n\t\t&lt;p&gt;faaaa&lt;/p&gt;\r\n\t\t&lt;p&gt;aaaaa&lt;/p&gt;\r\n\t&lt;/div&gt;\r\n\t&lt;a href=&quot;src&quot;&gt;&lt;/a&gt;\r\n\t&lt;div class=&quot;test&quot;&gt;\r\n\t\t&lt;p&gt;1111&lt;/p&gt;\r\n\t&lt;/div&gt;\r\n\r\nUPDATE: correction of the expected result","title":"JSOUP find identical tag elements that are not separated by other tags","body":"<p>Code example:</p>\n<pre><code>&lt;body&gt;\n    &lt;p&gt;123124&lt;/p&gt;\n    &lt;p&gt;214565&lt;/p&gt;\n    &lt;p&gt;123333&lt;/p&gt;\n    &lt;img src = &quot;aboba&quot;/&gt;\n    &lt;p&gt;faaaa&lt;/p&gt;\n    &lt;p&gt;aaaaa&lt;/p&gt;\n    &lt;a href=&quot;src&quot;&gt;&lt;/a&gt;\n    &lt;p&gt;1111&lt;/p&gt;\n&lt;/body&gt;\n</code></pre>\n<p>Using jsoup to wrap in <code>&lt;div class=&quot;test&quot;&gt;&lt;/div&gt;</code></p>\n<p>I expect that it will turn out something like that</p>\n<p>Result:</p>\n<pre><code>&lt;div class=&quot;test&quot;&gt;\n    &lt;p&gt;123124&lt;/p&gt;\n    &lt;p&gt;214565&lt;/p&gt;\n    &lt;p&gt;123333&lt;/p&gt;\n&lt;/div&gt;\n&lt;img src = &quot;aboba&quot;/&gt;\n&lt;div class=&quot;test&quot;&gt;\n    &lt;p&gt;faaaa&lt;/p&gt;\n    &lt;p&gt;aaaaa&lt;/p&gt;\n&lt;/div&gt;\n&lt;a href=&quot;src&quot;&gt;&lt;/a&gt;\n&lt;div class=&quot;test&quot;&gt;\n    &lt;p&gt;1111&lt;/p&gt;\n&lt;/div&gt;\n</code></pre>\n<p>UPDATE: correction of the expected result</p>\n"},{"tags":["java","caching","key-value-store","distributed-caching","infinispan-10"],"owner":{"account_id":1617839,"reputation":324,"user_id":1495021,"accept_rate":75,"display_name":"YS_NE"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692238160,"creation_date":1692198806,"question_id":76914929,"body_markdown":" I would like to understand in which scenario when a key not found in cache it throws NullPointerException and in which scenario it just silently return null. We observed sometime no issue when keys are not there, but sometime it just ends up in exception. Why there are two different outcome? Not having a key in cache, is very common and it is just counted towards cache-miss.\r\nA cache name &#39;user-mapping-cahce&#39; is \r\n```\r\n      &lt;invalidation-cache name=&quot;user-mapping-cache&quot; mode=&quot;ASYNC&quot; statistics=&quot;true&quot; configuration=&quot;invalidation-template&quot;&gt;\r\n        &lt;persistence passivation=&quot;false&quot;&gt;\r\n            &lt;remote:remote-store cache=&quot;user-mapping-cache&quot; preload=&quot;false&quot; shared=&quot;true&quot; raw-values=&quot;false&quot;&gt;\r\n               &lt;remote:connection-pool max-active=&quot;-1&quot; min-idle=&quot;1&quot; exhausted-action=&quot;WAIT&quot; min-evictable-idle-time=&quot;300000&quot; /&gt;\r\n\t\t\t   &lt;remote:async-executor factory=&quot;org.infinispan.client.hotrod.impl.async.DefaultAsyncExecutorFactory&quot; /&gt;\r\n               &lt;remote:write-behind fail-silently=&quot;false&quot; /&gt;\r\n               &lt;remote:property name=&quot;infinispan.client.hotrod.server_list&quot;&gt;{list of 3 servers }&lt;/remote:property&gt;\r\n            &lt;/remote:remote-store&gt;\r\n         &lt;/persistence&gt;\r\n\t\t&lt;expiration lifespan=&quot;900000&quot; /&gt;\r\n\t\t&lt;memory&gt;\r\n\t\t\t&lt;object size=&quot;10000&quot; strategy=&quot;REMOVE&quot; /&gt;\r\n\t\t&lt;/memory&gt;\r\n      &lt;/invalidation-cache&gt;\r\n```\r\nThis is the error : \r\n\r\n\r\n\r\n\r\n```\r\nError occured while getting cached data with cacheName: user-mapping-cache, key: 77491845&gt;\r\norg.infinispan.commons.CacheException: java.lang.NullPointerException\r\nat org.infinispan.interceptors.impl.InvocationContextInterceptor.rethrowException(InvocationContextInterceptor.java:134)\r\nat org.infinispan.interceptors.impl.InvocationContextInterceptor.lambda$new$0(InvocationContextInterceptor.java:62)\r\nat org.infinispan.interceptors.ExceptionSyncInvocationStage.andExceptionally(ExceptionSyncInvocationStage.java:40)\r\nat org.infinispan.interceptors.BaseAsyncInterceptor.invokeNextAndExceptionally(BaseAsyncInterceptor.java:133)\r\nat org.infinispan.interceptors.impl.InvocationContextInterceptor.visitCommand(InvocationContextInterceptor.java:90)\r\nat org.infinispan.interceptors.impl.AsyncInterceptorChainImpl.invoke(AsyncInterceptorChainImpl.java:244)\r\nat org.infinispan.cache.impl.CacheImpl.get(CacheImpl.java:533)\r\nat org.infinispan.cache.impl.CacheImpl.get(CacheImpl.java:526)\r\nat org.infinispan.cache.impl.AbstractDelegatingCache.get(AbstractDelegatingCache.java:440)\r\nat org.infinispan.cache.impl.EncoderCache.get(EncoderCache.java:713)\r\nat com.companyName.commons.caching.CompanyInfinispanCacheProvider.get(CompanyInfinispanCacheProvider.java:35)\r\nat com.companyName.commons.caching.CompanyCacheService.get(CompanyCacheService.java:60)\r\nat com.companyName.core.branding.CompanyCacheService.get(CompanyCacheService.java:40)\r\nat com.companyName.app.filters.CompanyServletFilter.setBrandingForChannel(CompanyServletFilter.java:170)\r\n```\r\n\r\nAlso once it starts, it just keep going. It never stops until the server restarts.\r\n","title":"A key not found in infinispan cache resulting in NullPointerException, sometime","body":"<p>I would like to understand in which scenario when a key not found in cache it throws NullPointerException and in which scenario it just silently return null. We observed sometime no issue when keys are not there, but sometime it just ends up in exception. Why there are two different outcome? Not having a key in cache, is very common and it is just counted towards cache-miss.\nA cache name 'user-mapping-cahce' is</p>\n<pre><code>      &lt;invalidation-cache name=&quot;user-mapping-cache&quot; mode=&quot;ASYNC&quot; statistics=&quot;true&quot; configuration=&quot;invalidation-template&quot;&gt;\n        &lt;persistence passivation=&quot;false&quot;&gt;\n            &lt;remote:remote-store cache=&quot;user-mapping-cache&quot; preload=&quot;false&quot; shared=&quot;true&quot; raw-values=&quot;false&quot;&gt;\n               &lt;remote:connection-pool max-active=&quot;-1&quot; min-idle=&quot;1&quot; exhausted-action=&quot;WAIT&quot; min-evictable-idle-time=&quot;300000&quot; /&gt;\n               &lt;remote:async-executor factory=&quot;org.infinispan.client.hotrod.impl.async.DefaultAsyncExecutorFactory&quot; /&gt;\n               &lt;remote:write-behind fail-silently=&quot;false&quot; /&gt;\n               &lt;remote:property name=&quot;infinispan.client.hotrod.server_list&quot;&gt;{list of 3 servers }&lt;/remote:property&gt;\n            &lt;/remote:remote-store&gt;\n         &lt;/persistence&gt;\n        &lt;expiration lifespan=&quot;900000&quot; /&gt;\n        &lt;memory&gt;\n            &lt;object size=&quot;10000&quot; strategy=&quot;REMOVE&quot; /&gt;\n        &lt;/memory&gt;\n      &lt;/invalidation-cache&gt;\n</code></pre>\n<p>This is the error :</p>\n<pre><code>Error occured while getting cached data with cacheName: user-mapping-cache, key: 77491845&gt;\norg.infinispan.commons.CacheException: java.lang.NullPointerException\nat org.infinispan.interceptors.impl.InvocationContextInterceptor.rethrowException(InvocationContextInterceptor.java:134)\nat org.infinispan.interceptors.impl.InvocationContextInterceptor.lambda$new$0(InvocationContextInterceptor.java:62)\nat org.infinispan.interceptors.ExceptionSyncInvocationStage.andExceptionally(ExceptionSyncInvocationStage.java:40)\nat org.infinispan.interceptors.BaseAsyncInterceptor.invokeNextAndExceptionally(BaseAsyncInterceptor.java:133)\nat org.infinispan.interceptors.impl.InvocationContextInterceptor.visitCommand(InvocationContextInterceptor.java:90)\nat org.infinispan.interceptors.impl.AsyncInterceptorChainImpl.invoke(AsyncInterceptorChainImpl.java:244)\nat org.infinispan.cache.impl.CacheImpl.get(CacheImpl.java:533)\nat org.infinispan.cache.impl.CacheImpl.get(CacheImpl.java:526)\nat org.infinispan.cache.impl.AbstractDelegatingCache.get(AbstractDelegatingCache.java:440)\nat org.infinispan.cache.impl.EncoderCache.get(EncoderCache.java:713)\nat com.companyName.commons.caching.CompanyInfinispanCacheProvider.get(CompanyInfinispanCacheProvider.java:35)\nat com.companyName.commons.caching.CompanyCacheService.get(CompanyCacheService.java:60)\nat com.companyName.core.branding.CompanyCacheService.get(CompanyCacheService.java:40)\nat com.companyName.app.filters.CompanyServletFilter.setBrandingForChannel(CompanyServletFilter.java:170)\n</code></pre>\n<p>Also once it starts, it just keep going. It never stops until the server restarts.</p>\n"},{"tags":["java","input","knapsack-problem"],"comments":[{"owner":{"account_id":4941598,"reputation":3927,"user_id":7946807,"accept_rate":100,"display_name":"Schidu Luca"},"score":0,"creation_date":1507724683,"post_id":46688113,"comment_id":80323747,"body_markdown":"You are splitting the ``input`` in ``String[] sar`` but you are not even using it.  You end up parsing the line, of course ``Integer`` can&#39;t parse such a string with spaces.","body":"You are splitting the <code>input</code> in <code>String[] sar</code> but you are not even using it.  You end up parsing the line, of course <code>Integer</code> can&#39;t parse such a string with spaces."},{"owner":{"account_id":11723177,"reputation":19,"user_id":8581463,"display_name":"user8581463"},"score":0,"creation_date":1507725157,"post_id":46688113,"comment_id":80324068,"body_markdown":"@SchiduLuca Is there a way to fix this? The conversion from String to integer, does not work properly. So if I dont parse the string with spaces, that should resolve it?","body":"@SchiduLuca Is there a way to fix this? The conversion from String to integer, does not work properly. So if I dont parse the string with spaces, that should resolve it?"}],"answers":[{"comments":[{"owner":{"account_id":11723177,"reputation":19,"user_id":8581463,"display_name":"user8581463"},"score":0,"creation_date":1507725293,"post_id":46688304,"comment_id":80324159,"body_markdown":"If I remove the target, what can I add to myWeights.bagOfWeights.add(target); for it to add the content?","body":"If I remove the target, what can I add to myWeights.bagOfWeights.add(target); for it to add the content?"},{"owner":{"account_id":11764737,"reputation":740,"user_id":8609718,"display_name":"Overleaf"},"score":0,"creation_date":1507725696,"post_id":46688304,"comment_id":80324418,"body_markdown":"@user8581463 It depends; what do you want to put in there? Right now `.add(target);` doesn&#39;t get reached because of the exception, and if it did get reached it wouldn&#39;t do you any good, because `target` _is not a valid int anyway_. I assume the int you want to put in there is in the `sar` array, so you get it from there.","body":"@user8581463 It depends; what do you want to put in there? Right now <code>.add(target);</code> doesn&#39;t get reached because of the exception, and if it did get reached it wouldn&#39;t do you any good, because <code>target</code> <i>is not a valid int anyway</i>. I assume the int you want to put in there is in the <code>sar</code> array, so you get it from there."},{"owner":{"account_id":11723177,"reputation":19,"user_id":8581463,"display_name":"user8581463"},"score":0,"creation_date":1507725975,"post_id":46688304,"comment_id":80324636,"body_markdown":"Inserting the sar array also leaves me with an error: ArrayIndexOutOfBoundsException: 4 for the line weights_array[i - 1] = Integer.parseInt(sar[i]);","body":"Inserting the sar array also leaves me with an error: ArrayIndexOutOfBoundsException: 4 for the line weights_array[i - 1] = Integer.parseInt(sar[i]);"},{"owner":{"account_id":11764737,"reputation":740,"user_id":8609718,"display_name":"Overleaf"},"score":0,"creation_date":1507726655,"post_id":46688304,"comment_id":80325126,"body_markdown":"@user8581463 That is caused by running the loop as many times as the length of &quot;18 7 4 6&quot;, which is 8, and `sar` only has index 0-3. This is, however, totally unrelated to the question, and pretty easy to solve by googling.","body":"@user8581463 That is caused by running the loop as many times as the length of &quot;18 7 4 6&quot;, which is 8, and <code>sar</code> only has index 0-3. This is, however, totally unrelated to the question, and pretty easy to solve by googling."},{"owner":{"account_id":11723177,"reputation":19,"user_id":8581463,"display_name":"user8581463"},"score":0,"creation_date":1507731740,"post_id":46688304,"comment_id":80329131,"body_markdown":"I have tried googling for the past hour trying to figure out why the index is out of bounds, but I cannot see why. I am not trying to access an illegal index, nor is the index a negative nor is it greater than the size of the array. The first number is not the length, it is just the target. Also, I don&#39;t understand what I am missing, because I think the code is clearly trying to access the length of the user input and use that length for the for loop","body":"I have tried googling for the past hour trying to figure out why the index is out of bounds, but I cannot see why. I am not trying to access an illegal index, nor is the index a negative nor is it greater than the size of the array. The first number is not the length, it is just the target. Also, I don&#39;t understand what I am missing, because I think the code is clearly trying to access the length of the user input and use that length for the for loop"}],"tags":[],"owner":{"account_id":11764737,"reputation":740,"user_id":8609718,"display_name":"Overleaf"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1507725102,"creation_date":1507725102,"answer_id":46688304,"question_id":46688113,"body_markdown":"You are calling the `parseInt` method with the String `18 7 4 6`. Since this isn&#39;t a valid Integer, the NumberFormatException is thrown.\r\n\r\nYou are already splitting the input into the `String[] sar`. In the `for` loop you already call `parseInt` on each value in `sar`, which are valid Integers. Seems like you have everything in place; just remove the `int target = Integer.parseInt(input);` line.","title":"Exception in thread &quot;main&quot; java.lang.NumberFormatException: For input string:","body":"<p>You are calling the <code>parseInt</code> method with the String <code>18 7 4 6</code>. Since this isn't a valid Integer, the NumberFormatException is thrown.</p>\n\n<p>You are already splitting the input into the <code>String[] sar</code>. In the <code>for</code> loop you already call <code>parseInt</code> on each value in <code>sar</code>, which are valid Integers. Seems like you have everything in place; just remove the <code>int target = Integer.parseInt(input);</code> line.</p>\n"},{"tags":[],"owner":{"account_id":10190067,"reputation":1,"user_id":7523797,"display_name":"Kevin Smith"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678951472,"creation_date":1678951472,"answer_id":75753167,"question_id":46688113,"body_markdown":"maybe this could be helpful\r\n\r\n```\r\n\r\n        //your input\r\n        String input = &quot;18 7 4 6&quot;;\r\n        //split into string array by space\r\n        String[] split = input.split(&quot; &quot;);\r\n        int[] nums = new int[split.length];\r\n        //parse each string into number\r\n        for (int i = 0; i &lt; split.length; i++) {\r\n            nums[i] = Integer.parseInt(split[i]);\r\n        }\r\n        System.out.println(Arrays.toString(nums));\r\n```","title":"Exception in thread &quot;main&quot; java.lang.NumberFormatException: For input string:","body":"<p>maybe this could be helpful</p>\n<pre><code>\n        //your input\n        String input = &quot;18 7 4 6&quot;;\n        //split into string array by space\n        String[] split = input.split(&quot; &quot;);\n        int[] nums = new int[split.length];\n        //parse each string into number\n        for (int i = 0; i &lt; split.length; i++) {\n            nums[i] = Integer.parseInt(split[i]);\n        }\n        System.out.println(Arrays.toString(nums));\n</code></pre>\n"}],"owner":{"account_id":11723177,"reputation":19,"user_id":8581463,"display_name":"user8581463"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29165,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1692238050,"creation_date":1507724516,"question_id":46688113,"body_markdown":"I am working on the knapsack problem, I am new to Java. I am able to add numbers manually like this in the main: \r\n\r\n     // Fill the bag of weights. \r\n     //myWeights.bagOfWeights.add(18);\r\n     //myWeights.bagOfWeights.add(2);\r\n     //System.out.println(&quot;Possible answers: &quot;);\r\n     //myWeights.fillKnapSack(20);\r\n\r\nHowever, I am not able to allow the user to input the numbers. &lt;br&gt;The first number should be the target followed by the weights. &lt;br&gt;So I have tried to take the user input as a string and split it up with whitespace, and then convert it to an integer.&lt;br&gt; Next, I tried to do the parseInt 2 ways, but I was unsuccessful both way.&lt;br&gt; Here is the code: \r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    import java.util.*;\r\n     \r\n      public class KnapSackWeights{\r\n     \r\n        private Sack bagOfWeights = new Sack();\r\n        private Sack knapSack = new Sack();\r\n     \r\n        public static void main(String[] args){\r\n            KnapSackWeights myWeights = new KnapSackWeights();\r\n            Scanner in = new Scanner(System.in);\r\n            System.out.println(&quot;Enter the input:&quot;);\r\n            String input = in.nextLine();\r\n            String[] sar = input.split(&quot; &quot;);\r\n            //System.out.println(inp);\r\n            int target = Integer.parseInt(input);\r\n            System.out.println(target);\r\n            \r\n            int[] weights_array = new int[26];\r\n            \r\n            int n = input.length()-1;\r\n            for(int i=1; i&lt;=n; i++)\r\n            {\r\n               weights_array[i - 1] = Integer.parseInt(sar[i]);\r\n            }\r\n            int k = weights_array[0];\r\n            myWeights.bagOfWeights.add(target);\r\n            //System.out.println(target);\r\n            System.out.println(&quot;Possible answers: &quot;);\r\n            myWeights.fillKnapSack(k);\r\n            //myWeights.fillKnapSack(Integer.parseInt(sar[0]));\r\n\r\n            // Fill the bag of weights. \r\n            //myWeights.bagOfWeights.add(11);\r\n            //myWeights.bagOfWeights.add(8);\r\n            //myWeights.bagOfWeights.add(7);\r\n            //myWeights.bagOfWeights.add(6);\r\n            //myWeights.bagOfWeights.add(5);\r\n            //myWeights.bagOfWeights.add(4);\r\n            \r\n            //System.out.println(&quot;Possible answers: &quot;);\r\n            //myWeights.fillKnapSack(20);\r\n        }\r\n        \r\n        \r\n\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nHere is the error:\r\n\r\n&gt; Exception in thread &quot;main&quot; java.lang.NumberFormatException: For input\r\n&gt; string: &quot;18 7 4 6&quot; \tat\r\n&gt; java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)\r\n&gt; \tat java.lang.Integer.parseInt(Integer.java:580) \tat\r\n&gt; java.lang.Integer.parseInt(Integer.java:615) \tat\r\n&gt; KnapSackWeights.main(KnapSackWeights.java:18)\r\n\r\nThanks for your help. \r\n","title":"Exception in thread &quot;main&quot; java.lang.NumberFormatException: For input string:","body":"<p>I am working on the knapsack problem, I am new to Java. I am able to add numbers manually like this in the main: </p>\n\n<pre><code> // Fill the bag of weights. \n //myWeights.bagOfWeights.add(18);\n //myWeights.bagOfWeights.add(2);\n //System.out.println(\"Possible answers: \");\n //myWeights.fillKnapSack(20);\n</code></pre>\n\n<p>However, I am not able to allow the user to input the numbers. <br>The first number should be the target followed by the weights. <br>So I have tried to take the user input as a string and split it up with whitespace, and then convert it to an integer.<br> Next, I tried to do the parseInt 2 ways, but I was unsuccessful both way.<br> Here is the code: </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>import java.util.*;\r\n \r\n  public class KnapSackWeights{\r\n \r\n    private Sack bagOfWeights = new Sack();\r\n    private Sack knapSack = new Sack();\r\n \r\n    public static void main(String[] args){\r\n        KnapSackWeights myWeights = new KnapSackWeights();\r\n        Scanner in = new Scanner(System.in);\r\n        System.out.println(\"Enter the input:\");\r\n        String input = in.nextLine();\r\n        String[] sar = input.split(\" \");\r\n        //System.out.println(inp);\r\n        int target = Integer.parseInt(input);\r\n        System.out.println(target);\r\n        \r\n        int[] weights_array = new int[26];\r\n        \r\n        int n = input.length()-1;\r\n        for(int i=1; i&lt;=n; i++)\r\n        {\r\n           weights_array[i - 1] = Integer.parseInt(sar[i]);\r\n        }\r\n        int k = weights_array[0];\r\n        myWeights.bagOfWeights.add(target);\r\n        //System.out.println(target);\r\n        System.out.println(\"Possible answers: \");\r\n        myWeights.fillKnapSack(k);\r\n        //myWeights.fillKnapSack(Integer.parseInt(sar[0]));\r\n\r\n        // Fill the bag of weights. \r\n        //myWeights.bagOfWeights.add(11);\r\n        //myWeights.bagOfWeights.add(8);\r\n        //myWeights.bagOfWeights.add(7);\r\n        //myWeights.bagOfWeights.add(6);\r\n        //myWeights.bagOfWeights.add(5);\r\n        //myWeights.bagOfWeights.add(4);\r\n        \r\n        //System.out.println(\"Possible answers: \");\r\n        //myWeights.fillKnapSack(20);\r\n    }\r\n    \r\n    </code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Here is the error:</p>\n\n<blockquote>\n  <p>Exception in thread \"main\" java.lang.NumberFormatException: For input\n  string: \"18 7 4 6\"    at\n  java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)\n    at java.lang.Integer.parseInt(Integer.java:580)     at\n  java.lang.Integer.parseInt(Integer.java:615)  at\n  KnapSackWeights.main(KnapSackWeights.java:18)</p>\n</blockquote>\n\n<p>Thanks for your help. </p>\n"},{"tags":["java","jersey-2.0"],"comments":[{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1502274197,"post_id":45585665,"comment_id":78134635,"body_markdown":"Probably because Jersey reads the stream before calling the resource method. You might want to look into using a [Filter](https://jersey.github.io/documentation/latest/filters-and-interceptors.html) instead, which is called before the resource method.","body":"Probably because Jersey reads the stream before calling the resource method. You might want to look into using a <a href=\"https://jersey.github.io/documentation/latest/filters-and-interceptors.html\" rel=\"nofollow noreferrer\">Filter</a> instead, which is called before the resource method."},{"owner":{"account_id":5725404,"reputation":2915,"user_id":4522512,"accept_rate":43,"display_name":"Shivkumar Mallesappa"},"score":0,"creation_date":1502274344,"post_id":45585665,"comment_id":78134752,"body_markdown":"Probably because Jersey reads the stream before calling the resource method.\nSir , could you please explain a bit more, I want to understand this behavior , and you are absolutely right , earlier I have used this method in my filter , there I did not faced this issue. In my new project I moved this section of code to my controller level.","body":"Probably because Jersey reads the stream before calling the resource method. Sir , could you please explain a bit more, I want to understand this behavior , and you are absolutely right , earlier I have used this method in my filter , there I did not faced this issue. In my new project I moved this section of code to my controller level."},{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1502274635,"post_id":45585665,"comment_id":78134943,"body_markdown":"Because before Jersey can call your resource method, it needs to read the stream so that it can pass the entity to your method when it calls it. Even if you don&#39;t have an entity parameter, it appears Jersey still reads the stream.","body":"Because before Jersey can call your resource method, it needs to read the stream so that it can pass the entity to your method when it calls it. Even if you don&#39;t have an entity parameter, it appears Jersey still reads the stream."},{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1502274765,"post_id":45585665,"comment_id":78135040,"body_markdown":"Also you are using a GET. Is there even a body for this request?","body":"Also you are using a GET. Is there even a body for this request?"},{"owner":{"account_id":5725404,"reputation":2915,"user_id":4522512,"accept_rate":43,"display_name":"Shivkumar Mallesappa"},"score":0,"creation_date":1502276184,"post_id":45585665,"comment_id":78136120,"body_markdown":"Sir I am getting this exception for all the methods , GET ,PUT,POST.","body":"Sir I am getting this exception for all the methods , GET ,PUT,POST."}],"answers":[{"tags":[],"owner":{"account_id":2091874,"reputation":36,"user_id":1861514,"display_name":"Eduardo Ponzoni"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1529277375,"creation_date":1529277375,"answer_id":50901197,"question_id":45585665,"body_markdown":"I have had a similar requirement and the way I&#39;ve worked around this issue was by kind of &quot;cloning&quot; the request entity, with a help of Apache Commons&#39; IOUtils  like the code snippet below:\r\n\r\n    //--- Create a new InputStream with the original entity ---//\r\n    ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n    IOUtils.copy(requestContext.getEntityStream(), baos);\r\n    InputStream originalEntity = new ByteArrayInputStream(baos.toByteArray()));\r\n    \r\n    //--- Reasign the original entity to Request Context ---//\r\n    requestContext.setEntityStream(new ByteArrayInputStream(baos.toByteArray()));\r\n    \r\n    //--- From this point onwards, you can do whatever you want with the original request entity ---//\r\n\r\n    . . .\r\n\r\n    //--- In my case, I am working with JsonObject as below (try/catch ommited for brevity) ---//\r\n    JsonReader jsonReader = Json.createReader(originalEntity);\r\n    JsonObject requestEntity = jsonReader.readObject();\r\n\r\n    . . .\r\n","title":"JERSEY : Error Trace : java.lang.IllegalStateException: Entity input stream has already been closed","body":"<p>I have had a similar requirement and the way I've worked around this issue was by kind of \"cloning\" the request entity, with a help of Apache Commons' IOUtils  like the code snippet below:</p>\n\n<pre><code>//--- Create a new InputStream with the original entity ---//\nByteArrayOutputStream baos = new ByteArrayOutputStream();\nIOUtils.copy(requestContext.getEntityStream(), baos);\nInputStream originalEntity = new ByteArrayInputStream(baos.toByteArray()));\n\n//--- Reasign the original entity to Request Context ---//\nrequestContext.setEntityStream(new ByteArrayInputStream(baos.toByteArray()));\n\n//--- From this point onwards, you can do whatever you want with the original request entity ---//\n\n. . .\n\n//--- In my case, I am working with JsonObject as below (try/catch ommited for brevity) ---//\nJsonReader jsonReader = Json.createReader(originalEntity);\nJsonObject requestEntity = jsonReader.readObject();\n\n. . .\n</code></pre>\n"}],"owner":{"account_id":5725404,"reputation":2915,"user_id":4522512,"accept_rate":43,"display_name":"Shivkumar Mallesappa"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9306,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1692238050,"creation_date":1502267994,"question_id":45585665,"body_markdown":"I am working with Jersey 2.x.\r\n\r\nFollowing is my controller\r\n\r\n    @GET\r\n    @Path(&quot;{id}&quot;)\r\n    @Produces(&quot;application/json&quot;)\r\n    public Response getUser(@PathParam(&quot;id&quot;) int userId, @Context ContainerRequestContext containerRequestContext) {\r\n    \r\n            \r\n            ContainerRequestContext requestContext = logRequest(containerRequestContext);\r\n            \r\n            //To further operations using requestContext\r\n    \r\n    }\r\n\r\nFollowing is my method inside the same controller class to record request\r\n\r\n    private ContainerRequestContext logRequest(ContainerRequestContext requestContext) {\r\n    \r\n            JSONObject requestData = new JSONObject();\r\n            try {\r\n    \r\n                Map bm = null;\r\n                ContainerRequest cr = (ContainerRequest) requestContext;\r\n    \r\n                cr.bufferEntity();\r\n    \r\n                bm = cr.readEntity(Map.class);\r\n    \r\n                if (!String.valueOf(bm).equalsIgnoreCase(&quot;null&quot;)) {\r\n                    requestData.put(&quot;parameters&quot;, bm.toString());\r\n                }\r\n    \r\n                requestData.put(&quot;uri&quot;, requestContext.getUriInfo().getRequestUri());\r\n                requestData.put(&quot;ClientIp&quot;, requestContext.getProperty(&quot;requesterIp&quot;));\r\n                requestContext.setProperty(&quot;requestData&quot;, requestData);\r\n    \r\n            } catch (IOException | NumberFormatException | ProcessingException ex) {\r\n                //Logging\r\n    \r\n            } catch (Exception ex) {\r\n                //Logging\r\n            }\r\n            return requestContext;\r\n        }\r\n\r\nAs you can see I am using `bufferEntity()` to read ContainerRequestContext multiple times.\r\n\r\nStill when I deploy my API on my server.\r\n\r\nI am facing this error :\r\n\r\n    Error Trace : java.lang.IllegalStateException: Entity input stream has already been closed.\r\n    \r\nWhat I am doing wrong here.\r\nI will be thankful if somebody could explain me this behavior. ","title":"JERSEY : Error Trace : java.lang.IllegalStateException: Entity input stream has already been closed","body":"<p>I am working with Jersey 2.x.</p>\n\n<p>Following is my controller</p>\n\n<pre><code>@GET\n@Path(\"{id}\")\n@Produces(\"application/json\")\npublic Response getUser(@PathParam(\"id\") int userId, @Context ContainerRequestContext containerRequestContext) {\n\n\n        ContainerRequestContext requestContext = logRequest(containerRequestContext);\n\n        //To further operations using requestContext\n\n}\n</code></pre>\n\n<p>Following is my method inside the same controller class to record request</p>\n\n<pre><code>private ContainerRequestContext logRequest(ContainerRequestContext requestContext) {\n\n        JSONObject requestData = new JSONObject();\n        try {\n\n            Map bm = null;\n            ContainerRequest cr = (ContainerRequest) requestContext;\n\n            cr.bufferEntity();\n\n            bm = cr.readEntity(Map.class);\n\n            if (!String.valueOf(bm).equalsIgnoreCase(\"null\")) {\n                requestData.put(\"parameters\", bm.toString());\n            }\n\n            requestData.put(\"uri\", requestContext.getUriInfo().getRequestUri());\n            requestData.put(\"ClientIp\", requestContext.getProperty(\"requesterIp\"));\n            requestContext.setProperty(\"requestData\", requestData);\n\n        } catch (IOException | NumberFormatException | ProcessingException ex) {\n            //Logging\n\n        } catch (Exception ex) {\n            //Logging\n        }\n        return requestContext;\n    }\n</code></pre>\n\n<p>As you can see I am using <code>bufferEntity()</code> to read ContainerRequestContext multiple times.</p>\n\n<p>Still when I deploy my API on my server.</p>\n\n<p>I am facing this error :</p>\n\n<pre><code>Error Trace : java.lang.IllegalStateException: Entity input stream has already been closed.\n</code></pre>\n\n<p>What I am doing wrong here.\nI will be thankful if somebody could explain me this behavior. </p>\n"},{"tags":["java","spring","spring-boot","spring-data"],"comments":[{"owner":{"account_id":5967997,"reputation":3627,"user_id":4691230,"accept_rate":40,"display_name":"The Coder"},"score":0,"creation_date":1527965250,"post_id":50659414,"comment_id":88330240,"body_markdown":"Updated the question. added userService code. \nI serialized the model for resolving this issue only. Because I read this as a solution.","body":"Updated the question. added userService code.  I serialized the model for resolving this issue only. Because I read this as a solution."},{"owner":{"account_id":11098274,"reputation":835,"user_id":8147680,"display_name":"Nitin Nanda"},"score":0,"creation_date":1583091307,"post_id":50659414,"comment_id":106991037,"body_markdown":"let me know if you have found an answer to this","body":"let me know if you have found an answer to this"}],"answers":[{"comments":[{"owner":{"account_id":5967997,"reputation":3627,"user_id":4691230,"accept_rate":40,"display_name":"The Coder"},"score":0,"creation_date":1527967022,"post_id":50660201,"comment_id":88330767,"body_markdown":"Added  `@ManyToMany(mappedBy = &quot;roles&quot;, fetch = FetchType.EAGER)` . Still same issue. only @JsonIgnoreProperties helps me. But this doesn&#39;t fix the problem, this is only bypassing the issue.","body":"Added  <code>@ManyToMany(mappedBy = &quot;roles&quot;, fetch = FetchType.EAGER)</code> . Still same issue. only @JsonIgnoreProperties helps me. But this doesn&#39;t fix the problem, this is only bypassing the issue."},{"owner":{"account_id":5967997,"reputation":3627,"user_id":4691230,"accept_rate":40,"display_name":"The Coder"},"score":0,"creation_date":1527967564,"post_id":50660201,"comment_id":88330887,"body_markdown":"And the reason you explained, why is it not happening with findAll() operation? why findAll() is working perfectly?","body":"And the reason you explained, why is it not happening with findAll() operation? why findAll() is working perfectly?"},{"owner":{"account_id":3498606,"reputation":5166,"user_id":2925962,"accept_rate":0,"display_name":"akortex"},"score":0,"creation_date":1527967661,"post_id":50660201,"comment_id":88330903,"body_markdown":"To be honest I have run out of ideas...I thought that what I had in mind was correct.","body":"To be honest I have run out of ideas...I thought that what I had in mind was correct."}],"tags":[],"owner":{"account_id":3498606,"reputation":5166,"user_id":2925962,"accept_rate":0,"display_name":"akortex"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1527966015,"creation_date":1527966015,"answer_id":50660201,"question_id":50659414,"body_markdown":"OK, I think that the issue arises from the lazy loading of the user collection within the Role object. When you attempt to load the `User` object you also eagerly load the list of Roles associated to this object. By doing so, you also load the list users for each role. Problem is that this action is lazy, meaning that Jackson  will attempt to serialize the object before the nested ones have been loaded. You can attempt the set this `@ManyToMany(mappedBy = &quot;roles&quot;)` to `Eager` and try again. But as mentioned in this: https://stackoverflow.com/questions/24994440/no-serializer-found-for-class-org-hibernate-proxy-pojo-javassist-javassist this is only masking the problem.","title":"com.fasterxml.jackson.databind.exc.InvalidDefinitionException for some REST operations on User entity","body":"<p>OK, I think that the issue arises from the lazy loading of the user collection within the Role object. When you attempt to load the <code>User</code> object you also eagerly load the list of Roles associated to this object. By doing so, you also load the list users for each role. Problem is that this action is lazy, meaning that Jackson  will attempt to serialize the object before the nested ones have been loaded. You can attempt the set this <code>@ManyToMany(mappedBy = \"roles\")</code> to <code>Eager</code> and try again. But as mentioned in this: <a href=\"https://stackoverflow.com/questions/24994440/no-serializer-found-for-class-org-hibernate-proxy-pojo-javassist-javassist\">No serializer found for class org.hibernate.proxy.pojo.javassist.Javassist?</a> this is only masking the problem.</p>\n"}],"owner":{"account_id":5967997,"reputation":3627,"user_id":4691230,"accept_rate":40,"display_name":"The Coder"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8002,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1692230640,"creation_date":1527960245,"question_id":50659414,"body_markdown":"I have a few entities: `User`, `Role`, `Privilege`. And for all three entities, I have three operations which are then exposed as REST api. `findOne()`, `findAll()`, and `create()`. Issue is:    \r\n`Role` : all three operations working.    \r\n`Privilege` : all three operations working.    \r\n`User` : findOne() and create() giving `com.fasterxml.jackson.databind.exc.InvalidDefinitionException`. However `findAll()` is working without exception. Below is my code\r\n     \r\n**User.java**    \r\n\r\n    @Entity\r\n    // @JsonIgnoreProperties({&quot;hibernateLazyInitializer&quot;, &quot;handler&quot;})\r\n    public class User implements Serializable {\r\n    \r\n    \t@Id\r\n    \t@GeneratedValue(strategy = GenerationType.AUTO)\r\n    \t@Column(name = &quot;USER_ID&quot;)\r\n    \tprivate Long userId;\r\n    \r\n    \t@EmailWithTld\r\n    \t@Column(nullable = false, unique = true)\r\n    \tprivate String email;\r\n    \r\n    \t@NotNull\r\n    \t@Size(min = 2, max = 255)\r\n    \tprivate String name;\r\n    \r\n    \tprivate Boolean locked;\r\n    \r\n    \t@NotNull\r\n    \t@Size(max = 255)\r\n    \tprivate String password;\r\n    \r\n    \t@ManyToMany(fetch = FetchType.EAGER)\r\n    \t@JoinTable(name = &quot;user_role&quot;, joinColumns = { @JoinColumn(name = &quot;USER_ID&quot;) }, inverseJoinColumns = {\r\n    \t\t\t@JoinColumn(name = &quot;ROLE_ID&quot;) })\r\n    \tprivate Set&lt;Role&gt; roles = new HashSet&lt;&gt;();    \r\n    \r\n        // constructor &amp; getters/setters    \r\n    }    \r\n**Role.java**    \r\n\r\n    @Entity\r\n    public class Role implements Serializable {\r\n\r\n\t  @Id\r\n\t  @GeneratedValue(strategy = GenerationType.AUTO)\r\n\t  @Column(name = &quot;ROLE_ID&quot;)\r\n\t  public Long roleId;\r\n \r\n\t  @NotNull\r\n\t  @Size(max = 255)\r\n\t  public String name;\r\n\r\n\t  @JsonIgnore\r\n\t  @ManyToMany(mappedBy = &quot;roles&quot;)\r\n\t  private Set&lt;User&gt; users = new HashSet&lt;&gt;();\r\n\t\r\n\t  @ManyToMany(cascade=CascadeType.ALL,fetch=FetchType.EAGER)\r\n\t  @JoinTable(name=&quot;role_privilege&quot;, \r\n\t  \t\t\tjoinColumns= {@JoinColumn(name=&quot;ROLE_ID&quot;)},\r\n\t\t\t\tinverseJoinColumns = {@JoinColumn(name=&quot;PRIV_ID&quot;)}\t\t\t\r\n\t  )\r\n\t  private Set&lt;Privilege&gt; privileges = new HashSet&lt;&gt;();    \r\n\r\n        // constructor &amp; getters/setters     \r\n    }    \r\n**User Controller**    \r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/users&quot;)\r\n    public class UserController {\r\n    \r\n    \t@Autowired\r\n    \tprivate UserService userService;\r\n    \r\n    \t@RequestMapping(method = RequestMethod.GET)\r\n    \tpublic List&lt;User&gt; findAll() {\r\n    \t\tSystem.out.println(userService);\r\n    \t\tList&lt;User&gt; users = userService.findAll();\t\r\n    \t\treturn users;\r\n    \t}\r\n    \r\n    \t@RequestMapping(value = &quot;/{id}&quot;, method = RequestMethod.GET)\r\n    \tpublic User findOne(@PathVariable(&quot;id&quot;) final Long userId) {\r\n    \t\treturn userService.findOne(userId);\r\n    \t}\r\n    \r\n    \t@RequestMapping(method = RequestMethod.POST)\r\n    \t@ResponseStatus(code = HttpStatus.CREATED)\r\n    \tpublic void create( @RequestBody @Valid final User user) {\r\n    \t\tuserService.create(user);\r\n    \t}\r\n    }   \r\n**User Service**:    \r\n\r\n    @Service\r\n    @Transactional\r\n    public class UserService {\r\n    \t\r\n    \t@Autowired\r\n    \tprivate UserJpaRepository userJpaRepository;\r\n    \t\r\n    \tpublic List&lt;User&gt; findAll(){\r\n    \t\treturn userJpaRepository.findAll();\r\n    \t}\r\n    \t\r\n    \tpublic User findOne(Long userId) {\r\n    \t\tUser user = userJpaRepository.getOne(userId);\r\n    \t\tif(user.getName() != null) {}\r\n    \t\treturn user;\r\n    \t}\r\n    \t\r\n    \tpublic void create(User user) {\r\n    \t\tuserJpaRepository.save(user);\r\n    \t}\r\n    \t\r\n    \t\r\n    }  \r\n\r\n  \r\n \r\nI looked many StackOverFlow threads and found a solution of using `@JsonIgnoreProperties({&quot;hibernateLazyInitializer&quot;, &quot;handler&quot;})` which works for me as well. But here are my questions:    \r\n1. What is causing this issue only for findOne() and create() operations of only the User entity.   \r\n2. Why other entities are safe from this error, even they have exactly similar operations.    \r\n3. Is `@JsonIgnoreProperties` safe to use?    \r\n\r\nComplete stack trace when I try to use `create()` or `findOne()` using REST client:    \r\n\r\n    com.fasterxml.jackson.databind.exc.InvalidDefinitionException: No serializer found for class org.hibernate.proxy.pojo.javassist.JavassistLazyInitializer and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationFeature.FAIL_ON_EMPTY_BEANS) (through reference chain: com.learn.persistence.model.User_$$_jvstdd2_3[&quot;handler&quot;])\r\n    \tat com.fasterxml.jackson.databind.exc.InvalidDefinitionException.from(InvalidDefinitionException.java:77) ~[jackson-databind-2.9.5.jar:2.9.5]\r\n    \tat com.fasterxml.jackson.databind.SerializerProvider.reportBadDefinition(SerializerProvider.java:1191) ~[jackson-databind-2.9.5.jar:2.9.5]\r\n    \tat com.fasterxml.jackson.databind.DatabindContext.reportBadDefinition(DatabindContext.java:312) ~[jackson-databind-2.9.5.jar:2.9.5]\r\n    \tat com.fasterxml.jackson.databind.ser.impl.UnknownSerializer.failForEmpty(UnknownSerializer.java:71) ~[jackson-databind-2.9.5.jar:2.9.5]\r\n    \tat com.fasterxml.jackson.databind.ser.impl.UnknownSerializer.serialize(UnknownSerializer.java:33) ~[jackson-databind-2.9.5.jar:2.9.5]\r\n    \tat com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:727) ~[jackson-databind-2.9.5.jar:2.9.5]\r\n    \tat com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:719) ~[jackson-databind-2.9.5.jar:2.9.5]\r\n    \tat com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:155) ~[jackson-databind-2.9.5.jar:2.9.5]\r\n    \tat com.fasterxml.jackson.databind.ser.DefaultSerializerProvider._serialize(DefaultSerializerProvider.java:480) ~[jackson-databind-2.9.5.jar:2.9.5]\r\n    \tat com.fasterxml.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:319) ~[jackson-databind-2.9.5.jar:2.9.5]\r\n    \tat com.fasterxml.jackson.databind.ObjectWriter$Prefetch.serialize(ObjectWriter.java:1396) ~[jackson-databind-2.9.5.jar:2.9.5]\r\n    \tat com.fasterxml.jackson.databind.ObjectWriter.writeValue(ObjectWriter.java:913) ~[jackson-databind-2.9.5.jar:2.9.5]\r\n    \tat org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.writeInternal(AbstractJackson2HttpMessageConverter.java:286) ~[spring-web-5.0.6.RELEASE.jar:5.0.6.RELEASE]\r\n    \tat org.springframework.http.converter.AbstractGenericHttpMessageConverter.write(AbstractGenericHttpMessageConverter.java:102) ~[spring-web-5.0.6.RELEASE.jar:5.0.6.RELEASE]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodProcessor.writeWithMessageConverters(AbstractMessageConverterMethodProcessor.java:272) ~[spring-webmvc-5.0.6.RELEASE.jar:5.0.6.RELEASE]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.handleReturnValue(RequestResponseBodyMethodProcessor.java:180) ~[spring-webmvc-5.0.6.RELEASE.jar:5.0.6.RELEASE]\r\n    \tat org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:82) ~[spring-web-5.0.6.RELEASE.jar:5.0.6.RELEASE]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:119) ~[spring-webmvc-5.0.6.RELEASE.jar:5.0.6.RELEASE]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:877) ~[spring-webmvc-5.0.6.RELEASE.jar:5.0.6.RELEASE]\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:783) ~[spring-webmvc-5.0.6.RELEASE.jar:5.0.6.RELEASE]\r\n    \tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.0.6.RELEASE.jar:5.0.6.RELEASE]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:991) ~[spring-webmvc-5.0.6.RELEASE.jar:5.0.6.RELEASE]\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925) ~[spring-webmvc-5.0.6.RELEASE.jar:5.0.6.RELEASE]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:974) ~[spring-webmvc-5.0.6.RELEASE.jar:5.0.6.RELEASE]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:866) ~[spring-webmvc-5.0.6.RELEASE.jar:5.0.6.RELEASE]\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:635) ~[tomcat-embed-core-8.5.31.jar:8.5.31]\r\n    \tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:851) ~[spring-webmvc-5.0.6.RELEASE.jar:5.0.6.RELEASE]\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:742) ~[tomcat-embed-core-8.5.31.jar:8.5.31]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-8.5.31.jar:8.5.31]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.31.jar:8.5.31]\r\n    \tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52) ~[tomcat-embed-websocket-8.5.31.jar:8.5.31]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-8.5.31.jar:8.5.31]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.31.jar:8.5.31]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.6.RELEASE.jar:5.0.6.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:100) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.6.RELEASE.jar:5.0.6.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:66) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.6.RELEASE.jar:5.0.6.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.6.RELEASE.jar:5.0.6.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\r\n    \tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:357) ~[spring-web-5.0.6.RELEASE.jar:5.0.6.RELEASE]\r\n    \tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:270) ~[spring-web-5.0.6.RELEASE.jar:5.0.6.RELEASE]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-8.5.31.jar:8.5.31]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.31.jar:8.5.31]\r\n    \tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) ~[spring-web-5.0.6.RELEASE.jar:5.0.6.RELEASE]\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.6.RELEASE.jar:5.0.6.RELEASE]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-8.5.31.jar:8.5.31]\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.31.jar:8.5.31]\r\n    \tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198) ~[tomcat-embed-core-8.5.31.jar:8.5.31]\r\n    \tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) [tomcat-embed-core-8.5.31.jar:8.5.31]\r\n    \tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:496) [tomcat-embed-core-8.5.31.jar:8.5.31]\r\n    \tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140) [tomcat-embed-core-8.5.31.jar:8.5.31]\r\n    \tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81) [tomcat-embed-core-8.5.31.jar:8.5.31]\r\n    \tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87) [tomcat-embed-core-8.5.31.jar:8.5.31]\r\n    \tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) [tomcat-embed-core-8.5.31.jar:8.5.31]\r\n    \tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:803) [tomcat-embed-core-8.5.31.jar:8.5.31]\r\n    \tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) [tomcat-embed-core-8.5.31.jar:8.5.31]\r\n    \tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:790) [tomcat-embed-core-8.5.31.jar:8.5.31]\r\n    \tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1468) [tomcat-embed-core-8.5.31.jar:8.5.31]\r\n    \tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat-embed-core-8.5.31.jar:8.5.31]\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [na:1.8.0_152]\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [na:1.8.0_152]\r\n    \tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-8.5.31.jar:8.5.31]\r\n    \tat java.lang.Thread.run(Thread.java:748) [na:1.8.0_152]","title":"com.fasterxml.jackson.databind.exc.InvalidDefinitionException for some REST operations on User entity","body":"<p>I have a few entities: <code>User</code>, <code>Role</code>, <code>Privilege</code>. And for all three entities, I have three operations which are then exposed as REST api. <code>findOne()</code>, <code>findAll()</code>, and <code>create()</code>. Issue is:<br>\n<code>Role</code> : all three operations working.<br>\n<code>Privilege</code> : all three operations working.<br>\n<code>User</code> : findOne() and create() giving <code>com.fasterxml.jackson.databind.exc.InvalidDefinitionException</code>. However <code>findAll()</code> is working without exception. Below is my code</p>\n\n<p><strong>User.java</strong>    </p>\n\n<pre><code>@Entity\n// @JsonIgnoreProperties({\"hibernateLazyInitializer\", \"handler\"})\npublic class User implements Serializable {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    @Column(name = \"USER_ID\")\n    private Long userId;\n\n    @EmailWithTld\n    @Column(nullable = false, unique = true)\n    private String email;\n\n    @NotNull\n    @Size(min = 2, max = 255)\n    private String name;\n\n    private Boolean locked;\n\n    @NotNull\n    @Size(max = 255)\n    private String password;\n\n    @ManyToMany(fetch = FetchType.EAGER)\n    @JoinTable(name = \"user_role\", joinColumns = { @JoinColumn(name = \"USER_ID\") }, inverseJoinColumns = {\n            @JoinColumn(name = \"ROLE_ID\") })\n    private Set&lt;Role&gt; roles = new HashSet&lt;&gt;();    \n\n    // constructor &amp; getters/setters    \n}    \n</code></pre>\n\n<p><strong>Role.java</strong>    </p>\n\n<pre><code>@Entity\npublic class Role implements Serializable {\n\n  @Id\n  @GeneratedValue(strategy = GenerationType.AUTO)\n  @Column(name = \"ROLE_ID\")\n  public Long roleId;\n\n  @NotNull\n  @Size(max = 255)\n  public String name;\n\n  @JsonIgnore\n  @ManyToMany(mappedBy = \"roles\")\n  private Set&lt;User&gt; users = new HashSet&lt;&gt;();\n\n  @ManyToMany(cascade=CascadeType.ALL,fetch=FetchType.EAGER)\n  @JoinTable(name=\"role_privilege\", \n            joinColumns= {@JoinColumn(name=\"ROLE_ID\")},\n            inverseJoinColumns = {@JoinColumn(name=\"PRIV_ID\")}          \n  )\n  private Set&lt;Privilege&gt; privileges = new HashSet&lt;&gt;();    \n\n    // constructor &amp; getters/setters     \n}    \n</code></pre>\n\n<p><strong>User Controller</strong>    </p>\n\n<pre><code>@RestController\n@RequestMapping(\"/users\")\npublic class UserController {\n\n    @Autowired\n    private UserService userService;\n\n    @RequestMapping(method = RequestMethod.GET)\n    public List&lt;User&gt; findAll() {\n        System.out.println(userService);\n        List&lt;User&gt; users = userService.findAll();   \n        return users;\n    }\n\n    @RequestMapping(value = \"/{id}\", method = RequestMethod.GET)\n    public User findOne(@PathVariable(\"id\") final Long userId) {\n        return userService.findOne(userId);\n    }\n\n    @RequestMapping(method = RequestMethod.POST)\n    @ResponseStatus(code = HttpStatus.CREATED)\n    public void create( @RequestBody @Valid final User user) {\n        userService.create(user);\n    }\n}   \n</code></pre>\n\n<p><strong>User Service</strong>:    </p>\n\n<pre><code>@Service\n@Transactional\npublic class UserService {\n\n    @Autowired\n    private UserJpaRepository userJpaRepository;\n\n    public List&lt;User&gt; findAll(){\n        return userJpaRepository.findAll();\n    }\n\n    public User findOne(Long userId) {\n        User user = userJpaRepository.getOne(userId);\n        if(user.getName() != null) {}\n        return user;\n    }\n\n    public void create(User user) {\n        userJpaRepository.save(user);\n    }\n\n\n}  \n</code></pre>\n\n<p>I looked many StackOverFlow threads and found a solution of using <code>@JsonIgnoreProperties({\"hibernateLazyInitializer\", \"handler\"})</code> which works for me as well. But here are my questions:<br>\n1. What is causing this issue only for findOne() and create() operations of only the User entity.<br>\n2. Why other entities are safe from this error, even they have exactly similar operations.<br>\n3. Is <code>@JsonIgnoreProperties</code> safe to use?    </p>\n\n<p>Complete stack trace when I try to use <code>create()</code> or <code>findOne()</code> using REST client:    </p>\n\n<pre><code>com.fasterxml.jackson.databind.exc.InvalidDefinitionException: No serializer found for class org.hibernate.proxy.pojo.javassist.JavassistLazyInitializer and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationFeature.FAIL_ON_EMPTY_BEANS) (through reference chain: com.learn.persistence.model.User_$$_jvstdd2_3[\"handler\"])\n    at com.fasterxml.jackson.databind.exc.InvalidDefinitionException.from(InvalidDefinitionException.java:77) ~[jackson-databind-2.9.5.jar:2.9.5]\n    at com.fasterxml.jackson.databind.SerializerProvider.reportBadDefinition(SerializerProvider.java:1191) ~[jackson-databind-2.9.5.jar:2.9.5]\n    at com.fasterxml.jackson.databind.DatabindContext.reportBadDefinition(DatabindContext.java:312) ~[jackson-databind-2.9.5.jar:2.9.5]\n    at com.fasterxml.jackson.databind.ser.impl.UnknownSerializer.failForEmpty(UnknownSerializer.java:71) ~[jackson-databind-2.9.5.jar:2.9.5]\n    at com.fasterxml.jackson.databind.ser.impl.UnknownSerializer.serialize(UnknownSerializer.java:33) ~[jackson-databind-2.9.5.jar:2.9.5]\n    at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:727) ~[jackson-databind-2.9.5.jar:2.9.5]\n    at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:719) ~[jackson-databind-2.9.5.jar:2.9.5]\n    at com.fasterxml.jackson.databind.ser.BeanSerializer.serialize(BeanSerializer.java:155) ~[jackson-databind-2.9.5.jar:2.9.5]\n    at com.fasterxml.jackson.databind.ser.DefaultSerializerProvider._serialize(DefaultSerializerProvider.java:480) ~[jackson-databind-2.9.5.jar:2.9.5]\n    at com.fasterxml.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:319) ~[jackson-databind-2.9.5.jar:2.9.5]\n    at com.fasterxml.jackson.databind.ObjectWriter$Prefetch.serialize(ObjectWriter.java:1396) ~[jackson-databind-2.9.5.jar:2.9.5]\n    at com.fasterxml.jackson.databind.ObjectWriter.writeValue(ObjectWriter.java:913) ~[jackson-databind-2.9.5.jar:2.9.5]\n    at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.writeInternal(AbstractJackson2HttpMessageConverter.java:286) ~[spring-web-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.http.converter.AbstractGenericHttpMessageConverter.write(AbstractGenericHttpMessageConverter.java:102) ~[spring-web-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodProcessor.writeWithMessageConverters(AbstractMessageConverterMethodProcessor.java:272) ~[spring-webmvc-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.handleReturnValue(RequestResponseBodyMethodProcessor.java:180) ~[spring-webmvc-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:82) ~[spring-web-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:119) ~[spring-webmvc-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:877) ~[spring-webmvc-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:783) ~[spring-webmvc-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:991) ~[spring-webmvc-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925) ~[spring-webmvc-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:974) ~[spring-webmvc-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:866) ~[spring-webmvc-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:635) ~[tomcat-embed-core-8.5.31.jar:8.5.31]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:851) ~[spring-webmvc-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:742) ~[tomcat-embed-core-8.5.31.jar:8.5.31]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:231) ~[tomcat-embed-core-8.5.31.jar:8.5.31]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.31.jar:8.5.31]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52) ~[tomcat-embed-websocket-8.5.31.jar:8.5.31]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-8.5.31.jar:8.5.31]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.31.jar:8.5.31]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:320) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:127) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:91) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:137) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:111) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:170) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:215) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:116) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:100) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:66) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:105) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:56) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:334) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:215) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:178) ~[spring-security-web-5.0.5.RELEASE.jar:5.0.5.RELEASE]\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:357) ~[spring-web-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:270) ~[spring-web-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-8.5.31.jar:8.5.31]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.31.jar:8.5.31]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200) ~[spring-web-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107) ~[spring-web-5.0.6.RELEASE.jar:5.0.6.RELEASE]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:193) ~[tomcat-embed-core-8.5.31.jar:8.5.31]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:166) ~[tomcat-embed-core-8.5.31.jar:8.5.31]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:198) ~[tomcat-embed-core-8.5.31.jar:8.5.31]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:96) [tomcat-embed-core-8.5.31.jar:8.5.31]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:496) [tomcat-embed-core-8.5.31.jar:8.5.31]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:140) [tomcat-embed-core-8.5.31.jar:8.5.31]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:81) [tomcat-embed-core-8.5.31.jar:8.5.31]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:87) [tomcat-embed-core-8.5.31.jar:8.5.31]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342) [tomcat-embed-core-8.5.31.jar:8.5.31]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:803) [tomcat-embed-core-8.5.31.jar:8.5.31]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:66) [tomcat-embed-core-8.5.31.jar:8.5.31]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:790) [tomcat-embed-core-8.5.31.jar:8.5.31]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1468) [tomcat-embed-core-8.5.31.jar:8.5.31]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat-embed-core-8.5.31.jar:8.5.31]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [na:1.8.0_152]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [na:1.8.0_152]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-8.5.31.jar:8.5.31]\n    at java.lang.Thread.run(Thread.java:748) [na:1.8.0_152]\n</code></pre>\n"},{"tags":["java","prometheus","optaplanner","micrometer","timefold"],"answers":[{"tags":[],"owner":{"account_id":944144,"reputation":5341,"user_id":971735,"display_name":"Jonatan Ivanov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692230393,"creation_date":1692230393,"answer_id":76917708,"question_id":76825608,"body_markdown":"It seems you have inconsistencies within your tags across your time series:\r\ne.g.:\r\n\r\n```\r\ntimefold_solver_solve_duration_seconds{tagA=&quot;a&quot;} 5\r\ntimefold_solver_solve_duration_seconds{tagB=&quot;b&quot;} 5\r\n```\r\n\r\nThis is unsupported by the Prometheus Java client and discouraged by the Prometheus server. When you add tags, you make sure all the keys are always present, if you don&#39;t have a value, you can use `none` or `unknown`, e.g.:\r\n\r\n```\r\ntimefold_solver_solve_duration_seconds{tagA=&quot;a&quot;,tagB=&quot;none&quot;} 5\r\ntimefold_solver_solve_duration_seconds{tagA=&quot;none&quot;,tagB=&quot;b&quot;} 5\r\n```","title":"optaplanner,timefold solver start failed","body":"<p>It seems you have inconsistencies within your tags across your time series:\ne.g.:</p>\n<pre><code>timefold_solver_solve_duration_seconds{tagA=&quot;a&quot;} 5\ntimefold_solver_solve_duration_seconds{tagB=&quot;b&quot;} 5\n</code></pre>\n<p>This is unsupported by the Prometheus Java client and discouraged by the Prometheus server. When you add tags, you make sure all the keys are always present, if you don't have a value, you can use <code>none</code> or <code>unknown</code>, e.g.:</p>\n<pre><code>timefold_solver_solve_duration_seconds{tagA=&quot;a&quot;,tagB=&quot;none&quot;} 5\ntimefold_solver_solve_duration_seconds{tagA=&quot;none&quot;,tagB=&quot;b&quot;} 5\n</code></pre>\n"}],"owner":{"account_id":14496895,"reputation":3,"user_id":10471177,"display_name":"naokeziteng"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692230393,"creation_date":1691046052,"question_id":76825608,"body_markdown":"I encountered an error while using timefold, and it seems to be related to registering the Collector.\r\nBelow is my code and the error message.\r\n\r\n```\r\n @Test\r\n    public void testOptaPlanner() {\r\n        List&lt;Shift&gt; shifts = Mock.generateShift();\r\n        List&lt;Employee&gt; employees = scheduleForecastService.extractEmployees(1684765798377332736L, 11111, LocalDate.of(2023, 8, 7), LocalDate.of(2023, 8, 7));\r\n        SolverConfig solverConfig = new SolverConfig()\r\n                .withSolutionClass(TimeTable.class)\r\n                .withEntityClasses(Shift.class)\r\n                .withConstraintProviderClass(TimeTableConstraintProvider.class)\r\n                .withTerminationConfig(new TerminationConfig()\r\n                        .withBestScoreLimit(&quot;0hard/-2147483648soft&quot;)\r\n                        .withSecondsSpentLimit(300L)\r\n                )\r\n                .withEnvironmentMode(EnvironmentMode.FAST_ASSERT);\r\n        //设置线程数\r\n//        solverConfig.setMoveThreadCount(&quot;16&quot;);\r\n//        solverConfig.setThreadFactoryClass(Mock.MyThreadFactory.class);\r\n        //随机种子\r\n        solverConfig.setRandomType(RandomType.MERSENNE_TWISTER);\r\n        solverConfig.setRandomSeed(RandomUtils.nextLong(new Random(), 2147483647L));\r\n\r\n        SolverFactory&lt;TimeTable&gt; solverFactory = SolverFactory\r\n                .create(solverConfig);\r\n        // Load the problem\r\n        TimeTable problem = new TimeTable(shifts, employees);\r\n        // Solve the problem\r\n        Solver&lt;TimeTable&gt; solver = solverFactory.buildSolver();\r\n        TimeTable solution = solver.solve(problem);\r\n        // Display the result\r\n        Mock.printTimetable(solution);\r\n    }\r\n```\r\n\r\n```\r\njava.lang.IllegalArgumentException: Failed to register Collector of type MicrometerCollector: The Collector exposes the same name multiple times: timefold_solver_solve_duration_seconds\r\n\r\n\tat io.prometheus.client.CollectorRegistry.assertNoDuplicateNames(CollectorRegistry.java:71)\r\n\tat io.prometheus.client.CollectorRegistry.register(CollectorRegistry.java:51)\r\n\tat io.prometheus.client.Collector.register(Collector.java:308)\r\n\tat io.micrometer.prometheus.PrometheusMeterRegistry.lambda$applyToCollector$16(PrometheusMeterRegistry.java:479)\r\n\tat java.base/java.util.concurrent.ConcurrentHashMap.compute(ConcurrentHashMap.java:1916)\r\n\tat io.micrometer.prometheus.PrometheusMeterRegistry.applyToCollector(PrometheusMeterRegistry.java:475)\r\n\tat io.micrometer.prometheus.PrometheusMeterRegistry.newLongTaskTimer(PrometheusMeterRegistry.java:288)\r\n\tat io.micrometer.core.instrument.MeterRegistry$More.lambda$longTaskTimer$0(MeterRegistry.java:883)\r\n\tat io.micrometer.core.instrument.MeterRegistry.getOrCreateMeter(MeterRegistry.java:618)\r\n\tat io.micrometer.core.instrument.MeterRegistry.registerMeterIfNecessary(MeterRegistry.java:570)\r\n\tat io.micrometer.core.instrument.MeterRegistry.access$600(MeterRegistry.java:60)\r\n\tat io.micrometer.core.instrument.MeterRegistry$More.longTaskTimer(MeterRegistry.java:880)\r\n\tat io.micrometer.core.instrument.LongTaskTimer$Builder.register(LongTaskTimer.java:421)\r\n\tat io.micrometer.core.instrument.composite.CompositeLongTaskTimer.registerNewMeter(CompositeLongTaskTimer.java:102)\r\n\tat io.micrometer.core.instrument.composite.CompositeLongTaskTimer.registerNewMeter(CompositeLongTaskTimer.java:30)\r\n\tat io.micrometer.core.instrument.composite.AbstractCompositeMeter.add(AbstractCompositeMeter.java:68)\r\n\tat java.base/java.lang.Iterable.forEach(Iterable.java:75)\r\n\tat java.base/java.util.Collections$SetFromMap.forEach(Collections.java:5700)\r\n\tat io.micrometer.core.instrument.composite.CompositeMeterRegistry.lambda$new$0(CompositeMeterRegistry.java:67)\r\n\tat io.micrometer.core.instrument.composite.CompositeMeterRegistry.lock(CompositeMeterRegistry.java:189)\r\n\tat io.micrometer.core.instrument.composite.CompositeMeterRegistry.lambda$new$1(CompositeMeterRegistry.java:67)\r\n\tat io.micrometer.core.instrument.MeterRegistry.getOrCreateMeter(MeterRegistry.java:627)\r\n\tat io.micrometer.core.instrument.MeterRegistry.registerMeterIfNecessary(MeterRegistry.java:570)\r\n\tat io.micrometer.core.instrument.MeterRegistry.access$600(MeterRegistry.java:60)\r\n\tat io.micrometer.core.instrument.MeterRegistry$More.longTaskTimer(MeterRegistry.java:880)\r\n\tat io.micrometer.core.instrument.LongTaskTimer$Builder.register(LongTaskTimer.java:421)\r\n\tat io.micrometer.core.instrument.MeterRegistry$More.longTaskTimer(MeterRegistry.java:871)\r\n\tat io.micrometer.core.instrument.MeterRegistry$More.longTaskTimer(MeterRegistry.java:861)\r\n\tat io.micrometer.core.instrument.Metrics$More.longTaskTimer(Metrics.java:246)\r\n\tat ai.timefold.solver.core.impl.solver.DefaultSolver.solve(DefaultSolver.java:178)\r\n```\r\nspringboot version: 2.6.13, timefold version: 1.0.0\r\n\r\n\r\nI tried excluding the micrometer-core dependency in timefold and also attempted to use filters to exclude metric measurements, but it didn&#39;t take effect.\r\n\r\n```\r\n@Bean\r\n    public MeterFilter customMeterFilter() {\r\n        return new MeterFilter() {\r\n            @Override\r\n            public Meter.Id map(Meter.Id id) {\r\n                // 在这里可以对指标进行过滤或修改\r\n                // 返回null表示丢弃该指标，返回id表示保留该指标\r\n                String name = id.getName();\r\n                if (name.startsWith(&quot;optaplanner.solver.&quot;)) {\r\n                    return id.withName(&quot;&quot;); // 丢弃以 &quot;optaplanner_solver_&quot; 开头的指标\r\n                }\r\n                return id; // 保留其他指标\r\n            }\r\n        };\r\n    }\r\n```\r\nI also tried switching back to OptaPlanner 9.41.0 version, but the same error still occurs.\r\n","title":"optaplanner,timefold solver start failed","body":"<p>I encountered an error while using timefold, and it seems to be related to registering the Collector.\nBelow is my code and the error message.</p>\n<pre><code> @Test\n    public void testOptaPlanner() {\n        List&lt;Shift&gt; shifts = Mock.generateShift();\n        List&lt;Employee&gt; employees = scheduleForecastService.extractEmployees(1684765798377332736L, 11111, LocalDate.of(2023, 8, 7), LocalDate.of(2023, 8, 7));\n        SolverConfig solverConfig = new SolverConfig()\n                .withSolutionClass(TimeTable.class)\n                .withEntityClasses(Shift.class)\n                .withConstraintProviderClass(TimeTableConstraintProvider.class)\n                .withTerminationConfig(new TerminationConfig()\n                        .withBestScoreLimit(&quot;0hard/-2147483648soft&quot;)\n                        .withSecondsSpentLimit(300L)\n                )\n                .withEnvironmentMode(EnvironmentMode.FAST_ASSERT);\n        //设置线程数\n//        solverConfig.setMoveThreadCount(&quot;16&quot;);\n//        solverConfig.setThreadFactoryClass(Mock.MyThreadFactory.class);\n        //随机种子\n        solverConfig.setRandomType(RandomType.MERSENNE_TWISTER);\n        solverConfig.setRandomSeed(RandomUtils.nextLong(new Random(), 2147483647L));\n\n        SolverFactory&lt;TimeTable&gt; solverFactory = SolverFactory\n                .create(solverConfig);\n        // Load the problem\n        TimeTable problem = new TimeTable(shifts, employees);\n        // Solve the problem\n        Solver&lt;TimeTable&gt; solver = solverFactory.buildSolver();\n        TimeTable solution = solver.solve(problem);\n        // Display the result\n        Mock.printTimetable(solution);\n    }\n</code></pre>\n<pre><code>java.lang.IllegalArgumentException: Failed to register Collector of type MicrometerCollector: The Collector exposes the same name multiple times: timefold_solver_solve_duration_seconds\n\n    at io.prometheus.client.CollectorRegistry.assertNoDuplicateNames(CollectorRegistry.java:71)\n    at io.prometheus.client.CollectorRegistry.register(CollectorRegistry.java:51)\n    at io.prometheus.client.Collector.register(Collector.java:308)\n    at io.micrometer.prometheus.PrometheusMeterRegistry.lambda$applyToCollector$16(PrometheusMeterRegistry.java:479)\n    at java.base/java.util.concurrent.ConcurrentHashMap.compute(ConcurrentHashMap.java:1916)\n    at io.micrometer.prometheus.PrometheusMeterRegistry.applyToCollector(PrometheusMeterRegistry.java:475)\n    at io.micrometer.prometheus.PrometheusMeterRegistry.newLongTaskTimer(PrometheusMeterRegistry.java:288)\n    at io.micrometer.core.instrument.MeterRegistry$More.lambda$longTaskTimer$0(MeterRegistry.java:883)\n    at io.micrometer.core.instrument.MeterRegistry.getOrCreateMeter(MeterRegistry.java:618)\n    at io.micrometer.core.instrument.MeterRegistry.registerMeterIfNecessary(MeterRegistry.java:570)\n    at io.micrometer.core.instrument.MeterRegistry.access$600(MeterRegistry.java:60)\n    at io.micrometer.core.instrument.MeterRegistry$More.longTaskTimer(MeterRegistry.java:880)\n    at io.micrometer.core.instrument.LongTaskTimer$Builder.register(LongTaskTimer.java:421)\n    at io.micrometer.core.instrument.composite.CompositeLongTaskTimer.registerNewMeter(CompositeLongTaskTimer.java:102)\n    at io.micrometer.core.instrument.composite.CompositeLongTaskTimer.registerNewMeter(CompositeLongTaskTimer.java:30)\n    at io.micrometer.core.instrument.composite.AbstractCompositeMeter.add(AbstractCompositeMeter.java:68)\n    at java.base/java.lang.Iterable.forEach(Iterable.java:75)\n    at java.base/java.util.Collections$SetFromMap.forEach(Collections.java:5700)\n    at io.micrometer.core.instrument.composite.CompositeMeterRegistry.lambda$new$0(CompositeMeterRegistry.java:67)\n    at io.micrometer.core.instrument.composite.CompositeMeterRegistry.lock(CompositeMeterRegistry.java:189)\n    at io.micrometer.core.instrument.composite.CompositeMeterRegistry.lambda$new$1(CompositeMeterRegistry.java:67)\n    at io.micrometer.core.instrument.MeterRegistry.getOrCreateMeter(MeterRegistry.java:627)\n    at io.micrometer.core.instrument.MeterRegistry.registerMeterIfNecessary(MeterRegistry.java:570)\n    at io.micrometer.core.instrument.MeterRegistry.access$600(MeterRegistry.java:60)\n    at io.micrometer.core.instrument.MeterRegistry$More.longTaskTimer(MeterRegistry.java:880)\n    at io.micrometer.core.instrument.LongTaskTimer$Builder.register(LongTaskTimer.java:421)\n    at io.micrometer.core.instrument.MeterRegistry$More.longTaskTimer(MeterRegistry.java:871)\n    at io.micrometer.core.instrument.MeterRegistry$More.longTaskTimer(MeterRegistry.java:861)\n    at io.micrometer.core.instrument.Metrics$More.longTaskTimer(Metrics.java:246)\n    at ai.timefold.solver.core.impl.solver.DefaultSolver.solve(DefaultSolver.java:178)\n</code></pre>\n<p>springboot version: 2.6.13, timefold version: 1.0.0</p>\n<p>I tried excluding the micrometer-core dependency in timefold and also attempted to use filters to exclude metric measurements, but it didn't take effect.</p>\n<pre><code>@Bean\n    public MeterFilter customMeterFilter() {\n        return new MeterFilter() {\n            @Override\n            public Meter.Id map(Meter.Id id) {\n                // 在这里可以对指标进行过滤或修改\n                // 返回null表示丢弃该指标，返回id表示保留该指标\n                String name = id.getName();\n                if (name.startsWith(&quot;optaplanner.solver.&quot;)) {\n                    return id.withName(&quot;&quot;); // 丢弃以 &quot;optaplanner_solver_&quot; 开头的指标\n                }\n                return id; // 保留其他指标\n            }\n        };\n    }\n</code></pre>\n<p>I also tried switching back to OptaPlanner 9.41.0 version, but the same error still occurs.</p>\n"},{"tags":["java","html","jsoup"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":2,"creation_date":1692221432,"post_id":76917170,"comment_id":135595960,"body_markdown":"What is `document1`?","body":"What is <code>document1</code>?"},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1692221499,"post_id":76917170,"comment_id":135595967,"body_markdown":"Can you [edit] and improve the question, including providing more detail about the problem and the code, and strive to improve the code&#39;s formatting and readability? The [ask] link can help guide you in this.","body":"Can you <a href=\"https://stackoverflow.com/posts/76917170/edit\">edit</a> and improve the question, including providing more detail about the problem and the code, and strive to improve the code&#39;s formatting and readability? The <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> link can help guide you in this."},{"owner":{"account_id":210406,"reputation":10453,"user_id":462006,"display_name":"scrappedcola"},"score":0,"creation_date":1692221579,"post_id":76917170,"comment_id":135595981,"body_markdown":"How are you parsing the string? Are you using Jsoup or HTMLEditorKit or something else?","body":"How are you parsing the string? Are you using Jsoup or HTMLEditorKit or something else?"},{"owner":{"account_id":1079173,"reputation":42590,"user_id":1076640,"display_name":"yshavit"},"score":2,"creation_date":1692221728,"post_id":76917170,"comment_id":135596006,"body_markdown":"I&#39;m not familiar with the library you&#39;re using (it&#39;s been a while since I did HTML parsing), but `aria-label` isn&#39;t on the div, it&#39;s on the `&lt;a&gt;` _within_ the div. Do you need to do something like `document.select(&quot;div.tertiary a&quot;).attr(&quot;aria-label&quot;)`? (And if so, I don&#39;t know how to say in your library &quot;the second `&lt;a&gt;`&quot; instead of the first, or if you need to.)","body":"I&#39;m not familiar with the library you&#39;re using (it&#39;s been a while since I did HTML parsing), but <code>aria-label</code> isn&#39;t on the div, it&#39;s on the <code>&lt;a&gt;</code> <i>within</i> the div. Do you need to do something like <code>document.select(&quot;div.tertiary a&quot;).attr(&quot;aria-label&quot;)</code>? (And if so, I don&#39;t know how to say in your library &quot;the second <code>&lt;a&gt;</code>&quot; instead of the first, or if you need to.)"},{"owner":{"account_id":29239936,"reputation":1,"user_id":22401709,"display_name":"ire_A"},"score":1,"creation_date":1692221894,"post_id":76917170,"comment_id":135596041,"body_markdown":"I am using Jsuop. Thanks yshavit this is working. Now I am getting Compare new 2024 BMW 228i 228i Gran Coupe VIN WBA53AK02R7N16670","body":"I am using Jsuop. Thanks yshavit this is working. Now I am getting Compare new 2024 BMW 228i 228i Gran Coupe VIN WBA53AK02R7N16670"},{"owner":{"account_id":1079173,"reputation":42590,"user_id":1076640,"display_name":"yshavit"},"score":0,"creation_date":1692222756,"post_id":76917170,"comment_id":135596146,"body_markdown":"Glad to hear it! :-)","body":"Glad to hear it! :-)"},{"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"score":0,"creation_date":1692225801,"post_id":76917170,"comment_id":135596472,"body_markdown":"`String result = document.split(&quot;aria\\\\-label=\\&quot;&quot;)[1].split(&quot;\\&quot; class=\\&quot;&quot;)[0];`","body":"<code>String result = document.split(&quot;aria\\\\-label=\\&quot;&quot;)[1].split(&quot;\\&quot; class=\\&quot;&quot;)[0];</code>"}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692230164,"creation_date":1692230164,"answer_id":76917697,"question_id":76917170,"body_markdown":"Here are some relevant documents regarding the _Jsoup_ _selector-syntax_.\r\n\r\n- _[Use selector-syntax to find elements: jsoup Java HTML parser](https://jsoup.org/cookbook/extracting-data/selector-syntax)_  \r\n- _[Selector (jsoup Java HTML Parser 1.16.1 API)](https://jsoup.org/apidocs/org/jsoup/select/Selector.html)_\r\n\r\nYou can use the following to return the first anchor within _div tertiary_ that contains the _aria-label_ attribute.\r\n\r\n```java\r\nDocument document1 = Jsoup.parse(document);\r\nElements elements = document1.select(&quot;div.tertiary a&quot;);\r\nString div = elements.attr(&quot;aria-label&quot;);\r\n```\r\n\r\nOutput\r\n\r\n```none\r\nCompare new 2024 BMW 228i 228i Gran Coupe VIN WBA53AK02R7N16670\r\n```","title":"How to extract aria-label value using java?","body":"<p>Here are some relevant documents regarding the <em>Jsoup</em> <em>selector-syntax</em>.</p>\n<ul>\n<li><em><a href=\"https://jsoup.org/cookbook/extracting-data/selector-syntax\" rel=\"nofollow noreferrer\">Use selector-syntax to find elements: jsoup Java HTML parser</a></em></li>\n<li><em><a href=\"https://jsoup.org/apidocs/org/jsoup/select/Selector.html\" rel=\"nofollow noreferrer\">Selector (jsoup Java HTML Parser 1.16.1 API)</a></em></li>\n</ul>\n<p>You can use the following to return the first anchor within <em>div tertiary</em> that contains the <em>aria-label</em> attribute.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Document document1 = Jsoup.parse(document);\nElements elements = document1.select(&quot;div.tertiary a&quot;);\nString div = elements.attr(&quot;aria-label&quot;);\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>Compare new 2024 BMW 228i 228i Gran Coupe VIN WBA53AK02R7N16670\n</code></pre>\n"}],"owner":{"account_id":29239936,"reputation":1,"user_id":22401709,"display_name":"ire_A"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":1,"score":-3,"last_activity_date":1692230164,"creation_date":1692221250,"question_id":76917170,"body_markdown":"This is example :\r\n\r\n    String document = &quot;&lt;div class=\\&quot;tertiary\\&quot; if=\\&quot;tertiaryHyperlinks.length\\&quot;&gt; \\n&quot; +\r\n                    &quot; &lt;a rel=\\&quot;nofollow\\&quot; data-vehicleid=\\&quot;5651083350\\&quot; data-saved=\\&quot;false\\&quot; data-action=\\&quot;save\\&quot; role=\\&quot;button\\&quot; aria-pressed=\\&quot;false\\&quot; merchandising-savelink=\\&quot;currVehicleId: 5651083350; isSaved: false; saveLabel: Save; savedLabel:Saved\\&quot; class=\\&quot;vehicle-save\\&quot; repeat=\\&quot;tertiaryHyperlinks\\&quot; name=\\&quot;a55ec147-0c31-45ff-bb61-0c56e7214967\\&quot; href data-linkid=\\&quot;a55ec147-0c31-45ff-bb61-0c56e7214967\\&quot; title=\\&quot;SAVE\\&quot; target&gt;Save&lt;/a&gt; \\n&quot; +\r\n                    &quot; &lt;a rel=\\&quot;nofollow\\&quot; aria-disabled=\\&quot;false\\&quot; role=\\&quot;button\\&quot; aria-pressed=\\&quot;false\\&quot; merchandising-comparevehicle data-vehicleid=\\&quot;5651083350\\&quot; data-action=\\&quot;compare\\&quot; data-saved=\\&quot;false\\&quot; href=\\&quot;#vehicle-compare-cart\\&quot; aria-label=\\&quot;Compare new 2024 BMW 228i 228i Gran Coupe VIN WBA53AK02R7N16670\\&quot; class=\\&quot;vehicle-compare\\&quot; repeat=\\&quot;tertiaryHyperlinks\\&quot; name=\\&quot;7534c28e-3ab6-45ab-bf5d-091698d4c5e0\\&quot; data-linkid=\\&quot;7534c28e-3ab6-45ab-bf5d-091698d4c5e0\\&quot; title=\\&quot;COMPARE\\&quot; target&gt;COMPARE&lt;/a&gt; \\n&quot; +\r\n                    &quot;&lt;/div&gt;&quot;;\r\n\r\nI tried with\r\n```\r\nDocument document1 = Jsoup.parse(document);\r\nString div = document1.select(&quot;div.tertiary&quot;).attr(&quot;aria-label&quot;).text();\r\n```\r\nBut I am getting empty response instead of &quot;Compare new 2024 BMW 228i 228i Gran Coupe VIN WBA53AK02R7N16670&quot;.","title":"How to extract aria-label value using java?","body":"<p>This is example :</p>\n<pre><code>String document = &quot;&lt;div class=\\&quot;tertiary\\&quot; if=\\&quot;tertiaryHyperlinks.length\\&quot;&gt; \\n&quot; +\n                &quot; &lt;a rel=\\&quot;nofollow\\&quot; data-vehicleid=\\&quot;5651083350\\&quot; data-saved=\\&quot;false\\&quot; data-action=\\&quot;save\\&quot; role=\\&quot;button\\&quot; aria-pressed=\\&quot;false\\&quot; merchandising-savelink=\\&quot;currVehicleId: 5651083350; isSaved: false; saveLabel: Save; savedLabel:Saved\\&quot; class=\\&quot;vehicle-save\\&quot; repeat=\\&quot;tertiaryHyperlinks\\&quot; name=\\&quot;a55ec147-0c31-45ff-bb61-0c56e7214967\\&quot; href data-linkid=\\&quot;a55ec147-0c31-45ff-bb61-0c56e7214967\\&quot; title=\\&quot;SAVE\\&quot; target&gt;Save&lt;/a&gt; \\n&quot; +\n                &quot; &lt;a rel=\\&quot;nofollow\\&quot; aria-disabled=\\&quot;false\\&quot; role=\\&quot;button\\&quot; aria-pressed=\\&quot;false\\&quot; merchandising-comparevehicle data-vehicleid=\\&quot;5651083350\\&quot; data-action=\\&quot;compare\\&quot; data-saved=\\&quot;false\\&quot; href=\\&quot;#vehicle-compare-cart\\&quot; aria-label=\\&quot;Compare new 2024 BMW 228i 228i Gran Coupe VIN WBA53AK02R7N16670\\&quot; class=\\&quot;vehicle-compare\\&quot; repeat=\\&quot;tertiaryHyperlinks\\&quot; name=\\&quot;7534c28e-3ab6-45ab-bf5d-091698d4c5e0\\&quot; data-linkid=\\&quot;7534c28e-3ab6-45ab-bf5d-091698d4c5e0\\&quot; title=\\&quot;COMPARE\\&quot; target&gt;COMPARE&lt;/a&gt; \\n&quot; +\n                &quot;&lt;/div&gt;&quot;;\n</code></pre>\n<p>I tried with</p>\n<pre><code>Document document1 = Jsoup.parse(document);\nString div = document1.select(&quot;div.tertiary&quot;).attr(&quot;aria-label&quot;).text();\n</code></pre>\n<p>But I am getting empty response instead of &quot;Compare new 2024 BMW 228i 228i Gran Coupe VIN WBA53AK02R7N16670&quot;.</p>\n"},{"tags":["java","bigdecimal"],"comments":[{"owner":{"account_id":277416,"reputation":681878,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":8,"creation_date":1575190158,"post_id":59123861,"comment_id":104476779,"body_markdown":"I guess you could transform to double, then transform back the double to BigDecimal, and see if you obtain the same value. Not sure what&#39;s the use case is though. If you use doubles, you already accept to have non-exact values. If you want exact values, then stay with BigDecimal.","body":"I guess you could transform to double, then transform back the double to BigDecimal, and see if you obtain the same value. Not sure what&#39;s the use case is though. If you use doubles, you already accept to have non-exact values. If you want exact values, then stay with BigDecimal."}],"answers":[{"comments":[{"owner":{"account_id":94193,"reputation":20589,"user_id":257299,"accept_rate":64,"display_name":"kevinarpe"},"score":0,"creation_date":1575191905,"post_id":59124029,"comment_id":104477085,"body_markdown":"Very crafty.  Exactly what I needed!  Note: You may also wish to use `Float.isFinite()` or `Float.isInfinite()`, but this is optional. `:)`","body":"Very crafty.  Exactly what I needed!  Note: You may also wish to use <code>Float.isFinite()</code> or <code>Float.isInfinite()</code>, but this is optional. <code>:)</code>"},{"owner":{"account_id":277416,"reputation":681878,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":3,"creation_date":1575193907,"post_id":59124029,"comment_id":104477493,"body_markdown":"You should also prefer compareTo over equals, because equals() in BigDecimal will consider 2.0 and 2.00 as different values.","body":"You should also prefer compareTo over equals, because equals() in BigDecimal will consider 2.0 and 2.00 as different values."},{"owner":{"account_id":94193,"reputation":20589,"user_id":257299,"accept_rate":64,"display_name":"kevinarpe"},"score":0,"creation_date":1575206364,"post_id":59124029,"comment_id":104480207,"body_markdown":"Values that cannot be precisely represented as float will not work.  Example: `123.456f`.  I guess this is due to different size of significand (mantissa) between 32-bit float and 64-bit double.  In your above code, I get better results with: `if (new BigDecimal(result, MathContext.DECIMAL32).equals(decimal)) {`.  Is this a reasonable change... or am I missing another corner case of floating point values?","body":"Values that cannot be precisely represented as float will not work.  Example: <code>123.456f</code>.  I guess this is due to different size of significand (mantissa) between 32-bit float and 64-bit double.  In your above code, I get better results with: <code>if (new BigDecimal(result, MathContext.DECIMAL32).equals(decimal)) {</code>.  Is this a reasonable change... or am I missing another corner case of floating point values?"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1575239055,"post_id":59124029,"comment_id":104489109,"body_markdown":"@kevinarpe - `123.456f` is conceptually the same as your 1.0E100 example.  It strikes me that if you *need* to check that the conversion from BigDecimal -&gt; binary floating point is exact then *that need* is the problem; i.e. the conversion should not be contemplated.","body":"@kevinarpe - <code>123.456f</code> is conceptually the same as your 1.0E100 example.  It strikes me that if you <i>need</i> to check that the conversion from BigDecimal -&gt; binary floating point is exact then <i>that need</i> is the problem; i.e. the conversion should not be contemplated."},{"owner":{"account_id":2852962,"reputation":4899,"user_id":2449744,"accept_rate":93,"display_name":"Eldar Agalarov"},"score":1,"creation_date":1592911854,"post_id":59124029,"comment_id":110588478,"body_markdown":"You must use isFinite() because also need to check for NaN.","body":"You must use isFinite() because also need to check for NaN."},{"owner":{"account_id":2389551,"reputation":40481,"user_id":2089675,"accept_rate":80,"display_name":"smac89"},"score":0,"creation_date":1593030506,"post_id":59124029,"comment_id":110640897,"body_markdown":"@EldarAgalarov Good catch. Thanks","body":"@EldarAgalarov Good catch. Thanks"}],"tags":[],"owner":{"account_id":2389551,"reputation":40481,"user_id":2089675,"accept_rate":80,"display_name":"smac89"},"comment_count":6,"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1593030493,"creation_date":1575190505,"answer_id":59124029,"question_id":59123861,"body_markdown":"From [reading][1] [the][2] [docs][3], all it does with the `numTypeValueExact` variants is to check for existence of a fraction part or if the value is too big for the numeric type and throw exceptions.\r\n\r\nAs for [**`floatValue()`**][4] and [**`doubleValue()`**][5], a similar overflow check is being done, but instead of throwing an exception, instead it returns `Double.POSITIVE_INFINITY` or `Double.NEGATIVE_INFINITY` for doubles and `Float.POSITIVE_INFINITY` or `Float.NEGATIVE_INFINITY` for floats. \r\n\r\nTherefore the most reasonable (and simplest) implementation of the `exact` methods for float and double, should simply check if the conversion returns `POSITIVE_INFINITY` or `NEGATIVE_INFINITY`.\r\n\r\n---\r\n\r\n*Furthermore*, remember that `BigDecimal` was designed to handle the lack of precision that comes from using `float` or `double` for large irrationals, therefore as [@JB Nizet][6] [*commented*][7], another check you can add to the above would be to convert the `double` or `float` back to `BigDecimal` to see if you still get the same value. This should prove the conversion was correct.\r\n\r\n\r\nHere is what such a method would look like for `floatValueExact()`:\r\n\r\n```\r\npublic static float floatValueExact(BigDecimal decimal) {\r\n    float result = decimal.floatValue();\r\n    if (!(Float.isNaN(result) || Float.isInfinite(result))) {\r\n        if (new BigDecimal(String.valueOf(result)).compareTo(decimal) == 0) {\r\n            return result;\r\n        }\r\n    }\r\n    throw new ArithmeticException(String.format(&quot;%s: Cannot be represented as float&quot;, decimal));\r\n}\r\n```\r\n---\r\n\r\n*The use of [`compareTo`][8] instead of [`equals`][9] above is intentional so as to not become too strict with the checks. `equals` will only evaluate to true when the two `BigDecimal` objects have the same value and scale (size of the fraction part of the decimal), whereas `compareTo` will overlook this difference when it does not matter. For example `2.0` vs `2.00`.*\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/math/BigDecimal.html#intValueExact--\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/math/BigDecimal.html#longValueExact--\r\n  [3]: https://docs.oracle.com/javase/8/docs/api/java/math/BigDecimal.html#shortValueExact--\r\n  [4]: https://docs.oracle.com/javase/8/docs/api/java/math/BigDecimal.html#floatValue--\r\n  [5]: https://docs.oracle.com/javase/8/docs/api/java/math/BigDecimal.html#doubleValue--\r\n  [6]: https://stackoverflow.com/users/571407/jb-nizet\r\n  [7]: https://stackoverflow.com/questions/59123861/how-to-know-if-a-bigdecimal-can-exactly-convert-to-float-or-double/59124029#comment104476779_59123861\r\n  [8]: https://docs.oracle.com/javase/8/docs/api/java/math/BigDecimal.html#compareTo-java.math.BigDecimal-\r\n  [9]: https://docs.oracle.com/javase/8/docs/api/java/math/BigDecimal.html#equals-java.lang.Object-","title":"How to know if a BigDecimal can exactly convert to float or double?","body":"<p>From <a href=\"https://docs.oracle.com/javase/8/docs/api/java/math/BigDecimal.html#intValueExact--\" rel=\"nofollow noreferrer\">reading</a> <a href=\"https://docs.oracle.com/javase/8/docs/api/java/math/BigDecimal.html#longValueExact--\" rel=\"nofollow noreferrer\">the</a> <a href=\"https://docs.oracle.com/javase/8/docs/api/java/math/BigDecimal.html#shortValueExact--\" rel=\"nofollow noreferrer\">docs</a>, all it does with the <code>numTypeValueExact</code> variants is to check for existence of a fraction part or if the value is too big for the numeric type and throw exceptions.</p>\n<p>As for <a href=\"https://docs.oracle.com/javase/8/docs/api/java/math/BigDecimal.html#floatValue--\" rel=\"nofollow noreferrer\"><strong><code>floatValue()</code></strong></a> and <a href=\"https://docs.oracle.com/javase/8/docs/api/java/math/BigDecimal.html#doubleValue--\" rel=\"nofollow noreferrer\"><strong><code>doubleValue()</code></strong></a>, a similar overflow check is being done, but instead of throwing an exception, instead it returns <code>Double.POSITIVE_INFINITY</code> or <code>Double.NEGATIVE_INFINITY</code> for doubles and <code>Float.POSITIVE_INFINITY</code> or <code>Float.NEGATIVE_INFINITY</code> for floats.</p>\n<p>Therefore the most reasonable (and simplest) implementation of the <code>exact</code> methods for float and double, should simply check if the conversion returns <code>POSITIVE_INFINITY</code> or <code>NEGATIVE_INFINITY</code>.</p>\n<hr />\n<p><em>Furthermore</em>, remember that <code>BigDecimal</code> was designed to handle the lack of precision that comes from using <code>float</code> or <code>double</code> for large irrationals, therefore as <a href=\"https://stackoverflow.com/users/571407/jb-nizet\">@JB Nizet</a> <a href=\"https://stackoverflow.com/questions/59123861/how-to-know-if-a-bigdecimal-can-exactly-convert-to-float-or-double/59124029#comment104476779_59123861\"><em>commented</em></a>, another check you can add to the above would be to convert the <code>double</code> or <code>float</code> back to <code>BigDecimal</code> to see if you still get the same value. This should prove the conversion was correct.</p>\n<p>Here is what such a method would look like for <code>floatValueExact()</code>:</p>\n<pre><code>public static float floatValueExact(BigDecimal decimal) {\n    float result = decimal.floatValue();\n    if (!(Float.isNaN(result) || Float.isInfinite(result))) {\n        if (new BigDecimal(String.valueOf(result)).compareTo(decimal) == 0) {\n            return result;\n        }\n    }\n    throw new ArithmeticException(String.format(&quot;%s: Cannot be represented as float&quot;, decimal));\n}\n</code></pre>\n<hr />\n<p><em>The use of <a href=\"https://docs.oracle.com/javase/8/docs/api/java/math/BigDecimal.html#compareTo-java.math.BigDecimal-\" rel=\"nofollow noreferrer\"><code>compareTo</code></a> instead of <a href=\"https://docs.oracle.com/javase/8/docs/api/java/math/BigDecimal.html#equals-java.lang.Object-\" rel=\"nofollow noreferrer\"><code>equals</code></a> above is intentional so as to not become too strict with the checks. <code>equals</code> will only evaluate to true when the two <code>BigDecimal</code> objects have the same value and scale (size of the fraction part of the decimal), whereas <code>compareTo</code> will overlook this difference when it does not matter. For example <code>2.0</code> vs <code>2.00</code>.</em></p>\n"},{"tags":[],"owner":{"account_id":4807436,"reputation":334,"user_id":3881993,"display_name":"Burak G&#246;k"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692229358,"creation_date":1692229358,"answer_id":76917653,"question_id":59123861,"body_markdown":"Improvements on [this answer](https://stackoverflow.com/a/59124029/3881993):\r\n\r\n1. `BigDecimal.floatValue()` is not expected to return `Float.NaN` since there is no `BigDecimal.NaN`.\r\n2. `String.valueOf(float)` —or `Float.toString(float)` to be precise— switches to scientific notation if _number_ &lt; 10&lt;sup&gt;-3&lt;/sup&gt; or _number_ &amp;geq; 10&lt;sup&gt;7&lt;/sup&gt;, which causes `new BigDecimal(String)` to fail.\r\n```java\r\npublic static float floatValueExact(BigDecimal decimal) {\r\n    float result = decimal.floatValue();\r\n    if (Float.isInfinite(result) || new BigDecimal(result).compareTo(decimal) != 0) {\r\n        throw new ArithmeticException(decimal + &quot; cannot be represented as float&quot;);\r\n    }\r\n    return result;\r\n}\r\n```","title":"How to know if a BigDecimal can exactly convert to float or double?","body":"<p>Improvements on <a href=\"https://stackoverflow.com/a/59124029/3881993\">this answer</a>:</p>\n<ol>\n<li><code>BigDecimal.floatValue()</code> is not expected to return <code>Float.NaN</code> since there is no <code>BigDecimal.NaN</code>.</li>\n<li><code>String.valueOf(float)</code> —or <code>Float.toString(float)</code> to be precise— switches to scientific notation if <em>number</em> &lt; 10<sup>-3</sup> or <em>number</em> ≥ 10<sup>7</sup>, which causes <code>new BigDecimal(String)</code> to fail.</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>public static float floatValueExact(BigDecimal decimal) {\n    float result = decimal.floatValue();\n    if (Float.isInfinite(result) || new BigDecimal(result).compareTo(decimal) != 0) {\n        throw new ArithmeticException(decimal + &quot; cannot be represented as float&quot;);\n    }\n    return result;\n}\n</code></pre>\n"}],"owner":{"account_id":94193,"reputation":20589,"user_id":257299,"accept_rate":64,"display_name":"kevinarpe"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2094,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":59124029,"answer_count":2,"score":12,"last_activity_date":1692229358,"creation_date":1575189052,"question_id":59123861,"body_markdown":"Class `BigDecimal` has some useful methods to guarantee lossless conversion:\r\n\r\n * `byteValueExact()`\r\n * `shortValueExact()`\r\n * `intValueExact()`\r\n * `longValueExact()`\r\n\r\nHowever, methods `floatValueExact()` and `doubleValueExact()` do not exist.\r\n\r\nI read the OpenJDK source code for methods `floatValue()` and `doubleValue()`.  Both appear to fallback to `Float.parseFloat()` and `Double.parseDouble()`, respectively, which may return positive or negative infinity.  For example, parsing a string of 10,000 9s will return positive infinity.  As I understand, `BigDecimal` does not have an internal concept of infinity.  Further, parsing a string of 100 9s as `double` gives `1.0E100`, which is not infinity, but loses precision.\r\n\r\nWhat is a reasonable implementation `floatValueExact()` and `doubleValueExact()`?\r\n\r\nI thought about a `double` solution by combining `BigDecimal.doubleValue()`, `BigDecial.toString()`, `Double.parseDouble(String)` and `Double.toString(double)`, but it looks messy.  I want to ask here because there may (must!) be a simpler solution.\r\n\r\nTo be clear, I don&#39;t need a high performance solution.","title":"How to know if a BigDecimal can exactly convert to float or double?","body":"<p>Class <code>BigDecimal</code> has some useful methods to guarantee lossless conversion:</p>\n\n<ul>\n<li><code>byteValueExact()</code></li>\n<li><code>shortValueExact()</code></li>\n<li><code>intValueExact()</code></li>\n<li><code>longValueExact()</code></li>\n</ul>\n\n<p>However, methods <code>floatValueExact()</code> and <code>doubleValueExact()</code> do not exist.</p>\n\n<p>I read the OpenJDK source code for methods <code>floatValue()</code> and <code>doubleValue()</code>.  Both appear to fallback to <code>Float.parseFloat()</code> and <code>Double.parseDouble()</code>, respectively, which may return positive or negative infinity.  For example, parsing a string of 10,000 9s will return positive infinity.  As I understand, <code>BigDecimal</code> does not have an internal concept of infinity.  Further, parsing a string of 100 9s as <code>double</code> gives <code>1.0E100</code>, which is not infinity, but loses precision.</p>\n\n<p>What is a reasonable implementation <code>floatValueExact()</code> and <code>doubleValueExact()</code>?</p>\n\n<p>I thought about a <code>double</code> solution by combining <code>BigDecimal.doubleValue()</code>, <code>BigDecial.toString()</code>, <code>Double.parseDouble(String)</code> and <code>Double.toString(double)</code>, but it looks messy.  I want to ask here because there may (must!) be a simpler solution.</p>\n\n<p>To be clear, I don't need a high performance solution.</p>\n"},{"tags":["java","terminal","libgdx"],"owner":{"account_id":19121633,"reputation":125,"user_id":13965488,"display_name":"Derek Li"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692229342,"creation_date":1692229342,"question_id":76917652,"body_markdown":"Running maven command on terminal to execute my Libgdx application, I get the error: `GLFW may only\r\n be used on the main thread. This check may be disabled with Configuration.GLFW_CHECK_THREAD0.` The command that I am using to run is `mvn exec:java -Dexec.mainClass=net.game.Main`.\r\n\r\nMany answers on the internet told me to use `-XstartOnFirstThread`, but I already added it by doing `export MAVEN_OPTS=&quot;-XstartOnFirstThread`. I also tried using `StartupHelper`, but it did not recognize main class.","title":"Libgdx: GLFW may only be used on the main thread. This check may be disabled with Configuration.GLFW_CHECK_THREAD0","body":"<p>Running maven command on terminal to execute my Libgdx application, I get the error: <code>GLFW may only be used on the main thread. This check may be disabled with Configuration.GLFW_CHECK_THREAD0.</code> The command that I am using to run is <code>mvn exec:java -Dexec.mainClass=net.game.Main</code>.</p>\n<p>Many answers on the internet told me to use <code>-XstartOnFirstThread</code>, but I already added it by doing <code>export MAVEN_OPTS=&quot;-XstartOnFirstThread</code>. I also tried using <code>StartupHelper</code>, but it did not recognize main class.</p>\n"},{"tags":["java","android","flutter","arch"],"answers":[{"tags":[],"owner":{"account_id":18421197,"reputation":3,"user_id":18466189,"display_name":"Niall Ryan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692229264,"creation_date":1692229103,"answer_id":76917641,"question_id":76917439,"body_markdown":"Self solved,\r\n\r\nI removed all instances of setting JAVA_HOME in my fish and bash config files, \\\r\nI `unset JAVA_OPTS` (bash) and `set -eU JAVA_OPTS` (fish) \\\r\nI switched to java-17-openjdk \\\r\nI rebooted.\r\n\r\nThen it worked perfectly!","title":"sdkmanager / flutter on arch unable to run","body":"<p>Self solved,</p>\n<p>I removed all instances of setting JAVA_HOME in my fish and bash config files, <br />\nI <code>unset JAVA_OPTS</code> (bash) and <code>set -eU JAVA_OPTS</code> (fish) <br />\nI switched to java-17-openjdk <br />\nI rebooted.</p>\n<p>Then it worked perfectly!</p>\n"}],"owner":{"account_id":18421197,"reputation":3,"user_id":18466189,"display_name":"Niall Ryan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692229264,"creation_date":1692224760,"question_id":76917439,"body_markdown":"# Goal\r\n\r\nI&#39;m currently trying to install Flutter on Arch.\r\n\r\nI have decided to go the easy route and just install Android Studio for the SDK and other related software.\r\n\r\nI have `flutter doctor`\r\n```\r\nDoctor summary (to see all details, run flutter doctor -v):\r\n[✓] Flutter (Channel stable, 3.10.6, on Arch Linux 6.1.45-1-lts, locale en_GB.UTF-8)\r\n[!] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\r\n    ✗ Android license status unknown.\r\n      Run `flutter doctor --android-licenses` to accept the SDK licenses.\r\n      See https://flutter.dev/docs/get-started/install/linux#android-setup for more details.\r\n[✗] Chrome - develop for the web (Cannot find Chrome executable at google-chrome)\r\n    ! Cannot find Chrome. Try setting CHROME_EXECUTABLE to a Chrome executable.\r\n[✓] Linux toolchain - develop for Linux desktop\r\n[✓] Android Studio (version 2022.3)\r\n[✓] Connected device (1 available)\r\n[✓] Network resources\r\n```\r\n\r\n# Problem\r\n\r\n`flutter doctor --android-licenses`.\r\n\r\nWhenever I run it, I recieve;\r\n```\r\nError occurred during initialization of boot layer\r\njava.lang.module.FindException: Module java.se.ee not found\r\nAndroid sdkmanager tool was found, but failed to run (/home/ryann62/Android/Sdk/cmdline-tools/latest/bin/sdkmanager): &quot;exited code 1&quot;.\r\nTry re-installing or updating your Android SDK,\r\nvisit https://flutter.dev/docs/get-started/install/linux#android-setup for detailed instructions.\r\n```\r\n\r\nAdditionally, trying `./sdkmanager --list` either gives me;\r\n```\r\nError occurred during initialization of boot layer\r\njava.lang.module.FindException: Module java.se.ee not found\r\n```\r\nwith java-17-openjdk\r\nor\r\n```\r\nError: Could not find or load main class java.se.ee\r\n```\r\nwith java-8-openjdk\r\n\r\nAlso, i&#39;m using Flutter v3.10, and Android-Studio Giraffe.\r\n\r\n# What have I tried?\r\n\r\nI have tried reinstalling Android-Studio, \\\r\nI have tried reinstalling my Android SDK  \\\r\nI have tried setting and unsetting JAVA_OPTS to JAVA_OPTS=&#39;-XX:+IgnoreUnrecognizedVMOptions --add-modules java.se.ee&#39; \\\r\nI have tried java-8-openjdk, java-17-openjdk, java-20-openjdk, ensuring I only have one version installed at a time and setting JAVA_HOME correctly.\r\n\r\n**I have also followed all similar-ish issues on stack overflow to no avail.**\r\n\r\nI&#39;m just lost and beyond frustrated at this point, could anyone point me in the right direction?\r\nAny help would be more than appreciated!","title":"sdkmanager / flutter on arch unable to run","body":"<h1>Goal</h1>\n<p>I'm currently trying to install Flutter on Arch.</p>\n<p>I have decided to go the easy route and just install Android Studio for the SDK and other related software.</p>\n<p>I have <code>flutter doctor</code></p>\n<pre><code>Doctor summary (to see all details, run flutter doctor -v):\n[✓] Flutter (Channel stable, 3.10.6, on Arch Linux 6.1.45-1-lts, locale en_GB.UTF-8)\n[!] Android toolchain - develop for Android devices (Android SDK version 34.0.0)\n    ✗ Android license status unknown.\n      Run `flutter doctor --android-licenses` to accept the SDK licenses.\n      See https://flutter.dev/docs/get-started/install/linux#android-setup for more details.\n[✗] Chrome - develop for the web (Cannot find Chrome executable at google-chrome)\n    ! Cannot find Chrome. Try setting CHROME_EXECUTABLE to a Chrome executable.\n[✓] Linux toolchain - develop for Linux desktop\n[✓] Android Studio (version 2022.3)\n[✓] Connected device (1 available)\n[✓] Network resources\n</code></pre>\n<h1>Problem</h1>\n<p><code>flutter doctor --android-licenses</code>.</p>\n<p>Whenever I run it, I recieve;</p>\n<pre><code>Error occurred during initialization of boot layer\njava.lang.module.FindException: Module java.se.ee not found\nAndroid sdkmanager tool was found, but failed to run (/home/ryann62/Android/Sdk/cmdline-tools/latest/bin/sdkmanager): &quot;exited code 1&quot;.\nTry re-installing or updating your Android SDK,\nvisit https://flutter.dev/docs/get-started/install/linux#android-setup for detailed instructions.\n</code></pre>\n<p>Additionally, trying <code>./sdkmanager --list</code> either gives me;</p>\n<pre><code>Error occurred during initialization of boot layer\njava.lang.module.FindException: Module java.se.ee not found\n</code></pre>\n<p>with java-17-openjdk\nor</p>\n<pre><code>Error: Could not find or load main class java.se.ee\n</code></pre>\n<p>with java-8-openjdk</p>\n<p>Also, i'm using Flutter v3.10, and Android-Studio Giraffe.</p>\n<h1>What have I tried?</h1>\n<p>I have tried reinstalling Android-Studio, <br />\nI have tried reinstalling my Android SDK  <br />\nI have tried setting and unsetting JAVA_OPTS to JAVA_OPTS='-XX:+IgnoreUnrecognizedVMOptions --add-modules java.se.ee' <br />\nI have tried java-8-openjdk, java-17-openjdk, java-20-openjdk, ensuring I only have one version installed at a time and setting JAVA_HOME correctly.</p>\n<p><strong>I have also followed all similar-ish issues on stack overflow to no avail.</strong></p>\n<p>I'm just lost and beyond frustrated at this point, could anyone point me in the right direction?\nAny help would be more than appreciated!</p>\n"},{"tags":["java","iterator","default-method"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":2,"creation_date":1692216378,"post_id":76916414,"comment_id":135595088,"body_markdown":"What version of javac are you compiling it with? btw, always use `@Override` when overriding methods","body":"What version of javac are you compiling it with? btw, always use <code>@Override</code> when overriding methods"},{"owner":{"account_id":19679938,"reputation":3,"user_id":14407271,"display_name":"Aleksandar Zizovic"},"score":0,"creation_date":1692226032,"post_id":76916414,"comment_id":135596496,"body_markdown":"Version 17.0.7. Eclipse removed annotations actually because it&#39;s rather an implementation than &#39;overriding&#39;, but I agree, it&#39;s more obvious if the @Override annotation is there","body":"Version 17.0.7. Eclipse removed annotations actually because it&#39;s rather an implementation than &#39;overriding&#39;, but I agree, it&#39;s more obvious if the @Override annotation is there"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1692226724,"post_id":76916414,"comment_id":135596564,"body_markdown":"I know what you&#39;re saying. Yes it *is* an implementation but the annotation will show errors and won&#39;t let you believe you&#39;ve overridden a method when you haven&#39;t","body":"I know what you&#39;re saying. Yes it <i>is</i> an implementation but the annotation will show errors and won&#39;t let you believe you&#39;ve overridden a method when you haven&#39;t"}],"answers":[{"comments":[{"owner":{"account_id":19679938,"reputation":3,"user_id":14407271,"display_name":"Aleksandar Zizovic"},"score":1,"creation_date":1692257018,"post_id":76917601,"comment_id":135599315,"body_markdown":"Yes, the target bytecode version was set to 7, it was a default IntelliJ setting. It compiles after I set it to 8. I started learning Java from version 8 :) thanks!","body":"Yes, the target bytecode version was set to 7, it was a default IntelliJ setting. It compiles after I set it to 8. I started learning Java from version 8 :) thanks!"}],"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1692228056,"creation_date":1692228056,"answer_id":76917601,"question_id":76916414,"body_markdown":"The `remove()` method in `java.util.Iterator` has a `default` implementation _now_, but it didn&#39;t in older versions. Specifically, it gained this in java8 (because java8 introduced `default` methods - but Iterator&#39;s `remove` is older than that).\r\n\r\nYou have configured your intellij that your source code is versioned at 7 or lower, and/or have told intellij to compile and run it all on a JDK at version 7 or below.\r\n\r\nThese versions are very very obsolete/unmaintained/outdated; the lowest java version still in common use is java 8; there is very little reason to write libraries such that they run on even that very very low version.\r\n\r\nIf you truly want to support that version, you _have to_ write `remove()` by hand - that same version (java7 or below) _did not have_ a `forEachRemaining` method at all, hence why you get no errors about it not being in your implementation: Either it wasn&#39;t there at all, _or_ it has a default impl. Unlike `remove()`, which pre-8 was there and had no `default` (because the feature didn&#39;t exist), and post-8 was still there but now with a `default`.\r\n\r\nExactly how you&#39;ve set up your project so that you ended up with something configured at 7 or below is not clear from your question. If you have issues fixing it, you should find a tutorial or ask a separate question from this one.\r\n","title":"Java 17: MenuIterator is not abstract and does not override abstract method remove() in java.util.Iterator","body":"<p>The <code>remove()</code> method in <code>java.util.Iterator</code> has a <code>default</code> implementation <em>now</em>, but it didn't in older versions. Specifically, it gained this in java8 (because java8 introduced <code>default</code> methods - but Iterator's <code>remove</code> is older than that).</p>\n<p>You have configured your intellij that your source code is versioned at 7 or lower, and/or have told intellij to compile and run it all on a JDK at version 7 or below.</p>\n<p>These versions are very very obsolete/unmaintained/outdated; the lowest java version still in common use is java 8; there is very little reason to write libraries such that they run on even that very very low version.</p>\n<p>If you truly want to support that version, you <em>have to</em> write <code>remove()</code> by hand - that same version (java7 or below) <em>did not have</em> a <code>forEachRemaining</code> method at all, hence why you get no errors about it not being in your implementation: Either it wasn't there at all, <em>or</em> it has a default impl. Unlike <code>remove()</code>, which pre-8 was there and had no <code>default</code> (because the feature didn't exist), and post-8 was still there but now with a <code>default</code>.</p>\n<p>Exactly how you've set up your project so that you ended up with something configured at 7 or below is not clear from your question. If you have issues fixing it, you should find a tutorial or ask a separate question from this one.</p>\n"}],"owner":{"account_id":19679938,"reputation":3,"user_id":14407271,"display_name":"Aleksandar Zizovic"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76917601,"answer_count":1,"score":0,"last_activity_date":1692228056,"creation_date":1692212883,"question_id":76916414,"body_markdown":"I&#39;m getting the following error while implementing the java.util.Iterator interface in my class:\r\n\r\n**java: MenuIterator is not abstract and does not override abstract method remove() in java.util.Iterator.**\r\n\r\n```\r\nimport java.util.Iterator;\r\n\r\npublic class MenuIterator implements Iterator&lt;MenuItem&gt; {\r\n    private final MenuItem[] items;\r\n    private int position = 0;\r\n\r\n    public MenuIterator(MenuItem[] menuItems) {\r\n        this.items = menuItems;\r\n    }\r\n\r\n    public boolean hasNext() {\r\n        return position &lt; items.length &amp;&amp; items[position] != null;\r\n    }\r\n\r\n    public MenuItem next() {\r\n        return items[position++];\r\n    }\r\n}\r\n```\r\n\r\nremove() method is a default method in the Iterator interface, as well as forEachRemaing() method.\r\n\r\n```\r\n    default void remove() {\r\n        throw new UnsupportedOperationException(&quot;remove&quot;);\r\n    }\r\n\r\n    default void forEachRemaining(Consumer&lt;? super E&gt; action) {\r\n        Objects.requireNonNull(action);\r\n        while (hasNext())\r\n            action.accept(next());\r\n    }\r\n```\r\n\r\nHowever, I am not forced to implement forEachRemaing(), but I do have to implement remove(). Also, the code works without implementing remove() if I run it from Eclipse, but gives an error in IntelliJ IDEA.\r\n\r\nDoes anyone know why I would need to provide an implementation for the default remove() method? Why should I provide it for one method and not for another? And why does it work without implementation in one IDE and not in another?","title":"Java 17: MenuIterator is not abstract and does not override abstract method remove() in java.util.Iterator","body":"<p>I'm getting the following error while implementing the java.util.Iterator interface in my class:</p>\n<p><strong>java: MenuIterator is not abstract and does not override abstract method remove() in java.util.Iterator.</strong></p>\n<pre><code>import java.util.Iterator;\n\npublic class MenuIterator implements Iterator&lt;MenuItem&gt; {\n    private final MenuItem[] items;\n    private int position = 0;\n\n    public MenuIterator(MenuItem[] menuItems) {\n        this.items = menuItems;\n    }\n\n    public boolean hasNext() {\n        return position &lt; items.length &amp;&amp; items[position] != null;\n    }\n\n    public MenuItem next() {\n        return items[position++];\n    }\n}\n</code></pre>\n<p>remove() method is a default method in the Iterator interface, as well as forEachRemaing() method.</p>\n<pre><code>    default void remove() {\n        throw new UnsupportedOperationException(&quot;remove&quot;);\n    }\n\n    default void forEachRemaining(Consumer&lt;? super E&gt; action) {\n        Objects.requireNonNull(action);\n        while (hasNext())\n            action.accept(next());\n    }\n</code></pre>\n<p>However, I am not forced to implement forEachRemaing(), but I do have to implement remove(). Also, the code works without implementing remove() if I run it from Eclipse, but gives an error in IntelliJ IDEA.</p>\n<p>Does anyone know why I would need to provide an implementation for the default remove() method? Why should I provide it for one method and not for another? And why does it work without implementation in one IDE and not in another?</p>\n"},{"tags":["java","spring","spring-boot","networking"],"comments":[{"owner":{"account_id":51954,"reputation":7402,"user_id":155248,"accept_rate":61,"display_name":"Onema"},"score":0,"creation_date":1692227216,"post_id":65800778,"comment_id":135596605,"body_markdown":"What you are doing won&#39;t work because your network router still needs to figure out where to send incoming requests. Opening a port won&#39;t &quot;just work&quot;. Check this article out: https://hackaday.com/2022/03/15/run-your-own-server-for-fun-and-zero-profit/ Is not spring boot but it may point you in the right direction.","body":"What you are doing won&#39;t work because your network router still needs to figure out where to send incoming requests. Opening a port won&#39;t &quot;just work&quot;. Check this article out: <a href=\"https://hackaday.com/2022/03/15/run-your-own-server-for-fun-and-zero-profit/\" rel=\"nofollow noreferrer\">hackaday.com/2022/03/15/&hellip;</a> Is not spring boot but it may point you in the right direction."}],"answers":[{"tags":[],"owner":{"account_id":6396609,"reputation":392,"user_id":4960751,"display_name":"Ja&#39;afar Naddaf"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1692226900,"creation_date":1611097630,"answer_id":65800848,"question_id":65800778,"body_markdown":"This is a network-related question. You will need to set up a few things first: \r\n\r\n - Get a static IP provided by your Internet Service Provider (ISP) \r\n - You need to configure your network gateway to forward requests to the server hosting your application","title":"How can I properly self-host my Spring Boot app on my computer?","body":"<p>This is a network-related question. You will need to set up a few things first:</p>\n<ul>\n<li>Get a static IP provided by your Internet Service Provider (ISP)</li>\n<li>You need to configure your network gateway to forward requests to the server hosting your application</li>\n</ul>\n"}],"owner":{"account_id":9047065,"reputation":564,"user_id":6738917,"accept_rate":67,"display_name":"Jonalcaide"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":658,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":65800848,"answer_count":1,"score":0,"last_activity_date":1692226900,"creation_date":1611097214,"question_id":65800778,"body_markdown":"I can&#39;t connect remotely to my SB app that I want to self-host\r\n\r\n**Introduction**\r\n\r\nI made a Spring Boot app with a &#39;my-sql&#39; container that I want to share outside my home network to test it with some friends. The app works locally but I want to use it outside my network.\r\n\r\nI have never, ever, deployed an app and I have little knowledge on this matter and I want to do it properly to avoid problems that I won&#39;t be able to handle myself. \r\n\r\n\r\n**What have I done so far**\r\n\r\n- I tried opening the 8080 port on the firewall for any connection\r\n- I added my public ip in the application.properties with port 8080\r\n- Used 0.0.0.0 to listen to any connection to 8080 as in [this solution][1]\r\n- Load the app to Heroku (success) and self-host the &#39;my-sql&#39; (that one is another question)\r\n\r\n**Problem**\r\n\r\nNone of these solutions above worked for me\r\n\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/23946369/how-to-configure-embedded-tomcat-integrated-with-spring-to-listen-requests-to-ip","title":"How can I properly self-host my Spring Boot app on my computer?","body":"<p>I can't connect remotely to my SB app that I want to self-host</p>\n<p><strong>Introduction</strong></p>\n<p>I made a Spring Boot app with a 'my-sql' container that I want to share outside my home network to test it with some friends. The app works locally but I want to use it outside my network.</p>\n<p>I have never, ever, deployed an app and I have little knowledge on this matter and I want to do it properly to avoid problems that I won't be able to handle myself.</p>\n<p><strong>What have I done so far</strong></p>\n<ul>\n<li>I tried opening the 8080 port on the firewall for any connection</li>\n<li>I added my public ip in the application.properties with port 8080</li>\n<li>Used 0.0.0.0 to listen to any connection to 8080 as in <a href=\"https://stackoverflow.com/questions/23946369/how-to-configure-embedded-tomcat-integrated-with-spring-to-listen-requests-to-ip\">this solution</a></li>\n<li>Load the app to Heroku (success) and self-host the 'my-sql' (that one is another question)</li>\n</ul>\n<p><strong>Problem</strong></p>\n<p>None of these solutions above worked for me</p>\n"},{"tags":["java","android","android-studio","jetbrains-ide"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1692078595,"post_id":76895727,"comment_id":135572698,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":29219183,"reputation":1,"user_id":22385272,"display_name":"Kristen Waterford"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692226593,"creation_date":1691973458,"question_id":76895727,"body_markdown":"Kindly check below the exception that I am facing.\r\n\r\njava.lang.IllegalAccessError: class org.jetbrains.kotlin.kapt3.base.KaptContext (in unnamed module @0x4442bba4) cannot access class com.sun.tools.javac.util.Context (in module jdk.compiler) because module jdk.compiler does not export com.sun.tools.javac.util to unnamed module @0x4442bba4\r\n\tat org.jetbrains.kotlin.kapt3.base.KaptContext.&lt;init&gt;(KaptContext.kt:29)\r\n\tat org.jetbrains.kotlin.kapt3.KaptContextForStubGeneration.&lt;init&gt;(KaptContextForStubGeneration.kt:40)\r\n\tat org.jetbrains.kotlin.kapt3.AbstractKapt3Extension.contextForStubGeneration(Kapt3Extension.kt:287)\r\n\tat org.jetbrains.kotlin.kapt3.AbstractKapt3Extension.analysisCompleted(Kapt3Extension.kt:171)\r\n\tat org.jetbrains.kotlin.kapt3.ClasspathBasedKapt3Extension.analysisCompleted(Kapt3Extension.kt:102)\r\n\tat org.jetbrains.kotlin.cli.jvm.compiler.TopDownAnalyzerFacadeForJVM.analyzeFilesWithJavaIntegration$invokeExtensionsOnAnalysisComplete(TopDownAnalyzerFacadeForJVM.kt:112)\r\n\tat org.jetbrains.kotlin.cli.jvm.compiler.TopDownAnalyzerFacadeForJVM.analyzeFilesWithJavaIntegration(TopDownAnalyzerFacadeForJVM.kt:122)\r\n\tat org.jetbrains.kotlin.cli.jvm.compiler.TopDownAnalyzerFacadeForJVM.analyzeFilesWithJavaIntegration$default(TopDownAnalyzerFacadeForJVM.kt:86)\r\n\tat org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler$analyze$1.invoke(KotlinToJVMBytecodeCompiler.kt:540)\r\n\tat org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler$analyze$1.invoke(KotlinToJVMBytecodeCompiler.kt:531)\r\n\tat org.jetbrains.kotlin.cli.common.messages.AnalyzerWithCompilerReport.analyzeAndReport(AnalyzerWithCompilerReport.kt:113)\r\n\tat org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.analyze(KotlinToJVMBytecodeCompiler.kt:531)\r\n\tat org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.compileModules$cli(KotlinToJVMBytecodeCompiler.kt:188)\r\n\tat org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.compileModules$cli$default(KotlinToJVMBytecodeCompiler.kt:154)\r\n\tat org.jetbrains.kotlin.cli.jvm.K2JVMCompiler.doExecute(K2JVMCompiler.kt:169)\r\n\tat org.jetbrains.kotlin.cli.jvm.K2JVMCompiler.doExecute(K2JVMCompiler.kt:52)\r\n\tat org.jetbrains.kotlin.cli.common.CLICompiler.execImpl(CLICompiler.kt:90)\r\n\tat org.jetbrains.kotlin.cli.common.CLICompiler.execImpl(CLICompiler.kt:44)\r\n\tat org.jetbrains.kotlin.cli.common.CLITool.exec(CLITool.kt:98)\r\n\tat org.jetbrains.kotlin.incremental.IncrementalJvmCompilerRunner.runCompiler(IncrementalJvmCompilerRunner.kt:386)\r\n\tat org.jetbrains.kotlin.incremental.IncrementalJvmCompilerRunner.runCompiler(IncrementalJvmCompilerRunner.kt:110)\r\n\tat org.jetbrains.kotlin.incremental.IncrementalCompilerRunner.compileIncrementally(IncrementalCompilerRunner.kt:303)\r\n\tat org.jetbrains.kotlin.incremental.IncrementalCompilerRunner.compileImpl$rebuild(IncrementalCompilerRunner.kt:99)\r\n\tat org.jetbrains.kotlin.incremental.IncrementalCompilerRunner.compileImpl(IncrementalCompilerRunner.kt:124)\r\n\tat org.jetbrains.kotlin.incremental.IncrementalCompilerRunner.compile(IncrementalCompilerRunner.kt:74)\r\n\tat org.jetbrains.kotlin.daemon.CompileServiceImplBase.execIncrementalCompiler(CompileServiceImpl.kt:607)\r\n\tat org.jetbrains.kotlin.daemon.CompileServiceImplBase.access$execIncrementalCompiler(CompileServiceImpl.kt:96)\r\n\tat org.jetbrains.kotlin.daemon.CompileServiceImpl.compile(CompileServiceImpl.kt:1659)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)\r\n\tat java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)\r\n\tat java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)\r\n\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:712)\r\n\tat java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)\r\n\tat java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)\r\n\tat java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)\r\n\tat java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)\r\n\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\r\n\tat java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n\tat java.base/java.lang.Thread.run(Thread.java:833)\r\n\r\n\r\n\r\nIf anyone has any advice, it would be very much appreciated.\r\n\r\nSaw that others were having a similar problem on github but their solutions did not work for me. I am very new to this, so apologies if its a simple problem.","title":"Attempting to load virtual app yet Java.lang.IllegalAccessError pops up for Android Studio","body":"<p>Kindly check below the exception that I am facing.</p>\n<p>java.lang.IllegalAccessError: class org.jetbrains.kotlin.kapt3.base.KaptContext (in unnamed module @0x4442bba4) cannot access class com.sun.tools.javac.util.Context (in module jdk.compiler) because module jdk.compiler does not export com.sun.tools.javac.util to unnamed module @0x4442bba4\nat org.jetbrains.kotlin.kapt3.base.KaptContext.(KaptContext.kt:29)\nat org.jetbrains.kotlin.kapt3.KaptContextForStubGeneration.(KaptContextForStubGeneration.kt:40)\nat org.jetbrains.kotlin.kapt3.AbstractKapt3Extension.contextForStubGeneration(Kapt3Extension.kt:287)\nat org.jetbrains.kotlin.kapt3.AbstractKapt3Extension.analysisCompleted(Kapt3Extension.kt:171)\nat org.jetbrains.kotlin.kapt3.ClasspathBasedKapt3Extension.analysisCompleted(Kapt3Extension.kt:102)\nat org.jetbrains.kotlin.cli.jvm.compiler.TopDownAnalyzerFacadeForJVM.analyzeFilesWithJavaIntegration$invokeExtensionsOnAnalysisComplete(TopDownAnalyzerFacadeForJVM.kt:112)\nat org.jetbrains.kotlin.cli.jvm.compiler.TopDownAnalyzerFacadeForJVM.analyzeFilesWithJavaIntegration(TopDownAnalyzerFacadeForJVM.kt:122)\nat org.jetbrains.kotlin.cli.jvm.compiler.TopDownAnalyzerFacadeForJVM.analyzeFilesWithJavaIntegration$default(TopDownAnalyzerFacadeForJVM.kt:86)\nat org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler$analyze$1.invoke(KotlinToJVMBytecodeCompiler.kt:540)\nat org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler$analyze$1.invoke(KotlinToJVMBytecodeCompiler.kt:531)\nat org.jetbrains.kotlin.cli.common.messages.AnalyzerWithCompilerReport.analyzeAndReport(AnalyzerWithCompilerReport.kt:113)\nat org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.analyze(KotlinToJVMBytecodeCompiler.kt:531)\nat org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.compileModules$cli(KotlinToJVMBytecodeCompiler.kt:188)\nat org.jetbrains.kotlin.cli.jvm.compiler.KotlinToJVMBytecodeCompiler.compileModules$cli$default(KotlinToJVMBytecodeCompiler.kt:154)\nat org.jetbrains.kotlin.cli.jvm.K2JVMCompiler.doExecute(K2JVMCompiler.kt:169)\nat org.jetbrains.kotlin.cli.jvm.K2JVMCompiler.doExecute(K2JVMCompiler.kt:52)\nat org.jetbrains.kotlin.cli.common.CLICompiler.execImpl(CLICompiler.kt:90)\nat org.jetbrains.kotlin.cli.common.CLICompiler.execImpl(CLICompiler.kt:44)\nat org.jetbrains.kotlin.cli.common.CLITool.exec(CLITool.kt:98)\nat org.jetbrains.kotlin.incremental.IncrementalJvmCompilerRunner.runCompiler(IncrementalJvmCompilerRunner.kt:386)\nat org.jetbrains.kotlin.incremental.IncrementalJvmCompilerRunner.runCompiler(IncrementalJvmCompilerRunner.kt:110)\nat org.jetbrains.kotlin.incremental.IncrementalCompilerRunner.compileIncrementally(IncrementalCompilerRunner.kt:303)\nat org.jetbrains.kotlin.incremental.IncrementalCompilerRunner.compileImpl$rebuild(IncrementalCompilerRunner.kt:99)\nat org.jetbrains.kotlin.incremental.IncrementalCompilerRunner.compileImpl(IncrementalCompilerRunner.kt:124)\nat org.jetbrains.kotlin.incremental.IncrementalCompilerRunner.compile(IncrementalCompilerRunner.kt:74)\nat org.jetbrains.kotlin.daemon.CompileServiceImplBase.execIncrementalCompiler(CompileServiceImpl.kt:607)\nat org.jetbrains.kotlin.daemon.CompileServiceImplBase.access$execIncrementalCompiler(CompileServiceImpl.kt:96)\nat org.jetbrains.kotlin.daemon.CompileServiceImpl.compile(CompileServiceImpl.kt:1659)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.base/java.lang.reflect.Method.invoke(Method.java:568)\nat java.rmi/sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:360)\nat java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:200)\nat java.rmi/sun.rmi.transport.Transport$1.run(Transport.java:197)\nat java.base/java.security.AccessController.doPrivileged(AccessController.java:712)\nat java.rmi/sun.rmi.transport.Transport.serviceCall(Transport.java:196)\nat java.rmi/sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:587)\nat java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:828)\nat java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.lambda$run$0(TCPTransport.java:705)\nat java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\nat java.rmi/sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:704)\nat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\nat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\nat java.base/java.lang.Thread.run(Thread.java:833)</p>\n<p>If anyone has any advice, it would be very much appreciated.</p>\n<p>Saw that others were having a similar problem on github but their solutions did not work for me. I am very new to this, so apologies if its a simple problem.</p>\n"},{"tags":["java","maven","junit"],"comments":[{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":1,"creation_date":1692231208,"post_id":76917515,"comment_id":135596964,"body_markdown":"The class is missing a [`package` declaration](https://docs.oracle.com/javase/tutorial/java/package/createpkgs.html) that matches the directory structure","body":"The class is missing a <a href=\"https://docs.oracle.com/javase/tutorial/java/package/createpkgs.html\" rel=\"nofollow noreferrer\"><code>package</code> declaration</a> that matches the directory structure"}],"owner":{"account_id":5344340,"reputation":2306,"user_id":4260303,"accept_rate":42,"display_name":"curiousengineer"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":111,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692226245,"creation_date":1692226245,"question_id":76917515,"body_markdown":"Following this stackoverflow [link][1]. I have a test class at \r\n`~/IdeaProjects/mavenproject1/src/test/java/FirstPackage/EmployeeTest.java` which looks like below\r\n\r\n```\r\n\r\nimport junit.framework.TestCase;\r\nimport org.junit.Test;\r\n\r\npublic class EmployeeTest extends TestCase{\r\n    Employee e = new Employee();\r\n\r\n    @Test\r\n    public void testSayNothing() {\r\n        assertEquals(&quot;hello&quot;,e.getEmployee(&quot;hello&quot;));\r\n    }\r\n}\r\n\r\n```\r\n\r\nHow do I run all tests in this package `FirstPackage`\r\nThe below command fails\r\n`mvn &#39;-Dtest=FirstPackage.*&#39; test` with the error:\r\n```\r\nINFO] --- surefire:3.1.2:test (default-test) @ codebase1 ---\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  0.971 s\r\n[INFO] Finished at: 2023-08-16T15:49:43-07:00\r\n[INFO] ------------------------------------------------------------------------\r\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:3.1.2:test (default-test) on project codebase1: No tests matching pattern &quot;FirstPackage.*&quot; were executed! (Set -Dsurefire.failIfNoSpecifiedTests=false to ignore this error.) -&gt; [Help 1]\r\n[ERROR]\r\n```\r\n\r\n  [1]: https://stackoverflow.com/questions/6819888/how-to-run-all-tests-in-a-particular-package-with-maven","title":"Trying to run tests in a java package using Maven","body":"<p>Following this stackoverflow <a href=\"https://stackoverflow.com/questions/6819888/how-to-run-all-tests-in-a-particular-package-with-maven\">link</a>. I have a test class at\n<code>~/IdeaProjects/mavenproject1/src/test/java/FirstPackage/EmployeeTest.java</code> which looks like below</p>\n<pre><code>\nimport junit.framework.TestCase;\nimport org.junit.Test;\n\npublic class EmployeeTest extends TestCase{\n    Employee e = new Employee();\n\n    @Test\n    public void testSayNothing() {\n        assertEquals(&quot;hello&quot;,e.getEmployee(&quot;hello&quot;));\n    }\n}\n\n</code></pre>\n<p>How do I run all tests in this package <code>FirstPackage</code>\nThe below command fails\n<code>mvn '-Dtest=FirstPackage.*' test</code> with the error:</p>\n<pre><code>INFO] --- surefire:3.1.2:test (default-test) @ codebase1 ---\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  0.971 s\n[INFO] Finished at: 2023-08-16T15:49:43-07:00\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:3.1.2:test (default-test) on project codebase1: No tests matching pattern &quot;FirstPackage.*&quot; were executed! (Set -Dsurefire.failIfNoSpecifiedTests=false to ignore this error.) -&gt; [Help 1]\n[ERROR]\n</code></pre>\n"},{"tags":["java","sqlite"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":2,"creation_date":1692232683,"post_id":76917496,"comment_id":135597076,"body_markdown":"Sometimes applications encounter this error even though there is an abundance of primary disk space because the error occurs when writing into temporary disk files on a system where temporary files are stored on a separate partition with much less space that the primary disk.","body":"Sometimes applications encounter this error even though there is an abundance of primary disk space because the error occurs when writing into temporary disk files on a system where temporary files are stored on a separate partition with much less space that the primary disk."},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1692232726,"post_id":76917496,"comment_id":135597079,"body_markdown":"Also see this answer, https://stackoverflow.com/a/46012432/2310289 and think about doing a vacuum","body":"Also see this answer, <a href=\"https://stackoverflow.com/a/46012432/2310289\">stackoverflow.com/a/46012432/2310289</a> and think about doing a vacuum"},{"owner":{"account_id":71085,"reputation":105200,"user_id":205608,"accept_rate":69,"display_name":"O. Jones"},"score":0,"creation_date":1692356906,"post_id":76917496,"comment_id":135615182,"body_markdown":"I bet you a cup of Java that your database&#39;s filename is `/tmp/something_or_other.sqlite` and that you are running your program on a Linux / FreeBSD / some other UNIX-alike operating system. The `/tmp` file systems on such systems are sometimes size-constrained RAMdisks. If my guess is correct, try `/usr/tmp` instead.","body":"I bet you a cup of Java that your database&#39;s filename is <code>&#47;tmp&#47;something_or_other.sqlite</code> and that you are running your program on a Linux / FreeBSD / some other UNIX-alike operating system. The <code>&#47;tmp</code> file systems on such systems are sometimes size-constrained RAMdisks. If my guess is correct, try <code>&#47;usr&#47;tmp</code> instead."}],"owner":{"account_id":11316261,"reputation":1,"user_id":8297934,"display_name":"WhoolieShop"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692226039,"creation_date":1692225931,"question_id":76917496,"body_markdown":"I have a small sqlite database, which currently is ~149 mb. I am using java to run a query on the database and sometimes I get the following error message:\r\n```\r\n[18:28:50 ERROR]: [MegaLogger] Couldn&#39;t execute MySQL statement: \r\norg.sqlite.SQLiteException: [SQLITE_FULL]  Insertion failed because database is full (database or disk is full)\r\n```\r\n\r\nThe Query is as follows: \r\n```\r\nSELECT *, data FROM death_log INNER JOIN items ON items.deathDate = death_log.deathDate WHERE killerUUID != &#39;N/A&#39; AND diedUUID == &#39;00000000-0000-0000-0009-01ffde9ec682&#39; GROUP BY death_log.deathDate ORDER BY death_log.deathDate ASC LIMIT 30;\r\n```\r\n\r\nRunning this same query on my local machine with DB Browser yields the following:\r\n```\r\nExecution finished without errors.\r\nResult: 1 rows returned in 3838ms\r\n```\r\nI read in another thread a user was getting a similar error and it was suggested they remove the Group By / Order By clauses, I have tried removing them and still get the same error.\r\n\r\nAny help would be appreciated, If I need to I can set up a mysql database if this is a sqlite issue but it seems silly for something that will not end up being a large database.\r\n\r\nTried removing the Order By and Group By clauses.","title":"Sqlite Issue SQLITE_FULL (database or disk is full)","body":"<p>I have a small sqlite database, which currently is ~149 mb. I am using java to run a query on the database and sometimes I get the following error message:</p>\n<pre><code>[18:28:50 ERROR]: [MegaLogger] Couldn't execute MySQL statement: \norg.sqlite.SQLiteException: [SQLITE_FULL]  Insertion failed because database is full (database or disk is full)\n</code></pre>\n<p>The Query is as follows:</p>\n<pre><code>SELECT *, data FROM death_log INNER JOIN items ON items.deathDate = death_log.deathDate WHERE killerUUID != 'N/A' AND diedUUID == '00000000-0000-0000-0009-01ffde9ec682' GROUP BY death_log.deathDate ORDER BY death_log.deathDate ASC LIMIT 30;\n</code></pre>\n<p>Running this same query on my local machine with DB Browser yields the following:</p>\n<pre><code>Execution finished without errors.\nResult: 1 rows returned in 3838ms\n</code></pre>\n<p>I read in another thread a user was getting a similar error and it was suggested they remove the Group By / Order By clauses, I have tried removing them and still get the same error.</p>\n<p>Any help would be appreciated, If I need to I can set up a mysql database if this is a sqlite issue but it seems silly for something that will not end up being a large database.</p>\n<p>Tried removing the Order By and Group By clauses.</p>\n"},{"tags":["java","android-sqlite"],"answers":[{"tags":[],"owner":{"account_id":6077735,"reputation":52951,"user_id":4744514,"accept_rate":96,"display_name":"MikeT"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1692225283,"creation_date":1692225283,"answer_id":76917462,"question_id":76911367,"body_markdown":"I believe that your issue is that the `getData` method is dependant upon the `saveWorkRecord` method (as this appears to create the database and then save to a non existent table) and that the saveWorkRecord method is dependant upon the getData method (as this appears to require that the database exists).\r\n\r\nI would suggest that you consider the following demo that utilises the `SQLiteOpenHelper` class that helps you to open the database and passes control, when the database is first opened, to the `onCreate` method.\r\n\r\nThe demo also uses a singleton for the database.\r\n\r\n\r\n**Working Demo**\r\n\r\nFirst the `DBOpenHelper` class that is an extension of the `SQLiteOpenHelper` class:-\r\n\r\n    class DBOpenHelper extends SQLiteOpenHelper {\r\n    \r\n       public static final String DATABASE_NAME = &quot;workifyDatabase&quot;;\r\n       public static final int DATABASE_VERSION = 1;\r\n    \r\n       /* Constructor  for the DBOpenHelper class, private to force use of singleton */\r\n       private DBOpenHelper(Context context) {\r\n          super(context,DATABASE_NAME,null,DATABASE_VERSION);\r\n       }\r\n    \r\n       /* Singleton approach (i.e. only 1 instance of DBOpenHelper exists)*/\r\n       private static volatile DBOpenHelper instance;\r\n       public static DBOpenHelper getInstance(Context context) {\r\n          if (instance==null) {\r\n             instance = new DBOpenHelper(context);\r\n          }\r\n          return instance;\r\n       }\r\n    \r\n       /* If the database does not exist, then this method will be called */\r\n       /* ideal place to create the table(s) */\r\n       @Override\r\n       public void onCreate(SQLiteDatabase db) {\r\n          db.execSQL(&quot;CREATE TABLE IF NOT EXISTS workifydatabase(id INTEGER PRIMARY KEY,workname VARCHAR,logoid INTEGER,year VARCHAR,workinghours INTEGER) &quot;);\r\n       }\r\n    \r\n       /* If the database version is increased, then this method will be invoked */\r\n       @Override\r\n       public void onUpgrade(SQLiteDatabase sqLiteDatabase, int i, int i1) {\r\n       }\r\n    \r\n       /* Method to insert a row, using the convenience insert method */\r\n       /* this generates the underlying SQL and furthermore returns the id of the inserted row or -1 if the row was not inserted */\r\n       public long saveWorkRecord(String workname,int logoid, String year,int workinghours) {\r\n          ContentValues cv = new ContentValues();\r\n          cv.put(&quot;workname&quot;,workname);\r\n          cv.put(&quot;logoid&quot;,logoid);\r\n          cv.put(&quot;year&quot;,year);\r\n          cv.put(&quot;workinghours&quot;,workinghours);\r\n          return this.getWritableDatabase().insert(&quot;workifydatabase&quot;,null,cv);\r\n       }\r\n    \r\n       /* Example of retrieving data (might want to adapt this to return a TaskArrayList rather than a Cursor) */\r\n       public Cursor getAllDataAsCursor() {\r\n          return this.getWritableDatabase().query(&quot;workifydatabase&quot;,null /* all columns */,null /* all rows*/,null /* no selection args */, null,null,null);\r\n       }\r\n    }\r\n\r\n- Note the two methods for accessing the database, `saveWorkRecord` for saving a row of data (returning the id of the row or -1 if the row could not be inserted and `getAllData` to return a Cursor (note the comment adapting to return a TaskArrayList). *i.e. the demo is more about circumventing the table not found issue than handling the display of the list*\r\n\r\nTo actually demonstrate some activity code that will save two records and then extract them from the database into a Cursor and then using the `DatabaseUtils` dumpCursor method to write the data in the cursor to the log:-\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n        DBOpenHelper db;\r\n        /*NOTE BAD IDEA TO STORE DATES in dd-mm-yyyy format\r\n        * 1) date is only sortable indirectly\r\n        * 2) the date, not being an SQLite recognised format, excludes simple use of SQLite&#39;s build in date functions\r\n        *  */\r\n        SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;dd-MM-yyyy&quot;, Locale.getDefault());\r\n        SimpleDateFormat beterDateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;,Locale.getDefault());\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n    \r\n            db = DBOpenHelper.getInstance(this); /* get an instance of the DBOpenHelper*/\r\n            /* Note that the database will not have been opened/created at this stage */\r\n    \r\n            /* Try to get data from the database (noting no data has been added) */\r\n            /* This will result in the database being created (opened if it exists) and therefore\r\n                the onCreate method of the DBOpenHelper instance being called, thus creating the table */\r\n            Cursor csr = db.getAllDataAsCursor();\r\n            DatabaseUtils.dumpCursor(csr); /* Dumpy the cursor (will be empty first time the app is run) */\r\n    \r\n            /* Add two records */\r\n            db.saveWorkRecord(&quot;My First Work Record&quot;,1,dateFormat.format(new Date()),0);\r\n            db.saveWorkRecord(&quot;My Other First Work Record&quot;,2,beterDateFormat.format(new Date()),10);\r\n    \r\n            /* Extract the data and dump the cursor to the log */\r\n            csr = db.getAllDataAsCursor();\r\n            DatabaseUtils.dumpCursor(csr);\r\n        }\r\n    }\r\n\r\n\r\nWhen run for the first time then the log includes:-\r\n\r\n    2023-08-17 08:19:59.993 I/System.out: &gt;&gt;&gt;&gt;&gt; Dumping cursor android.database.sqlite.SQLiteCursor@98fd0f5\r\n    2023-08-17 08:19:59.993 I/System.out: &lt;&lt;&lt;&lt;&lt;\r\n    \r\n    \r\n    \r\n    2023-08-17 08:19:59.995 I/System.out: &gt;&gt;&gt;&gt;&gt; Dumping cursor android.database.sqlite.SQLiteCursor@664ce8a\r\n    2023-08-17 08:19:59.996 I/System.out: 0 {\r\n    2023-08-17 08:19:59.996 I/System.out:    id=1\r\n    2023-08-17 08:19:59.996 I/System.out:    workname=My First Work Record\r\n    2023-08-17 08:19:59.996 I/System.out:    logoid=1\r\n    2023-08-17 08:19:59.996 I/System.out:    year=17-08-2023\r\n    2023-08-17 08:19:59.996 I/System.out:    workinghours=0\r\n    2023-08-17 08:19:59.996 I/System.out: }\r\n    2023-08-17 08:19:59.996 I/System.out: 1 {\r\n    2023-08-17 08:19:59.996 I/System.out:    id=2\r\n    2023-08-17 08:19:59.996 I/System.out:    workname=My Other First Work Record\r\n    2023-08-17 08:19:59.996 I/System.out:    logoid=2\r\n    2023-08-17 08:19:59.996 I/System.out:    year=2023-08-17\r\n    2023-08-17 08:19:59.997 I/System.out:    workinghours=10\r\n    2023-08-17 08:19:59.997 I/System.out: }\r\n    2023-08-17 08:19:59.997 I/System.out: &lt;&lt;&lt;&lt;&lt;\r\n\r\n- the first dump (first few lines) shows that there is no data in the cursor.\r\n- the second dump confirms that the data has been inserted and successfully extracted.\r\n\r\nUsing Android Studio&#39;s `App Inspection` :-\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/MT6kx.png","title":"Android Stuido sqlite database no such table error","body":"<p>I believe that your issue is that the <code>getData</code> method is dependant upon the <code>saveWorkRecord</code> method (as this appears to create the database and then save to a non existent table) and that the saveWorkRecord method is dependant upon the getData method (as this appears to require that the database exists).</p>\n<p>I would suggest that you consider the following demo that utilises the <code>SQLiteOpenHelper</code> class that helps you to open the database and passes control, when the database is first opened, to the <code>onCreate</code> method.</p>\n<p>The demo also uses a singleton for the database.</p>\n<p><strong>Working Demo</strong></p>\n<p>First the <code>DBOpenHelper</code> class that is an extension of the <code>SQLiteOpenHelper</code> class:-</p>\n<pre><code>class DBOpenHelper extends SQLiteOpenHelper {\n\n   public static final String DATABASE_NAME = &quot;workifyDatabase&quot;;\n   public static final int DATABASE_VERSION = 1;\n\n   /* Constructor  for the DBOpenHelper class, private to force use of singleton */\n   private DBOpenHelper(Context context) {\n      super(context,DATABASE_NAME,null,DATABASE_VERSION);\n   }\n\n   /* Singleton approach (i.e. only 1 instance of DBOpenHelper exists)*/\n   private static volatile DBOpenHelper instance;\n   public static DBOpenHelper getInstance(Context context) {\n      if (instance==null) {\n         instance = new DBOpenHelper(context);\n      }\n      return instance;\n   }\n\n   /* If the database does not exist, then this method will be called */\n   /* ideal place to create the table(s) */\n   @Override\n   public void onCreate(SQLiteDatabase db) {\n      db.execSQL(&quot;CREATE TABLE IF NOT EXISTS workifydatabase(id INTEGER PRIMARY KEY,workname VARCHAR,logoid INTEGER,year VARCHAR,workinghours INTEGER) &quot;);\n   }\n\n   /* If the database version is increased, then this method will be invoked */\n   @Override\n   public void onUpgrade(SQLiteDatabase sqLiteDatabase, int i, int i1) {\n   }\n\n   /* Method to insert a row, using the convenience insert method */\n   /* this generates the underlying SQL and furthermore returns the id of the inserted row or -1 if the row was not inserted */\n   public long saveWorkRecord(String workname,int logoid, String year,int workinghours) {\n      ContentValues cv = new ContentValues();\n      cv.put(&quot;workname&quot;,workname);\n      cv.put(&quot;logoid&quot;,logoid);\n      cv.put(&quot;year&quot;,year);\n      cv.put(&quot;workinghours&quot;,workinghours);\n      return this.getWritableDatabase().insert(&quot;workifydatabase&quot;,null,cv);\n   }\n\n   /* Example of retrieving data (might want to adapt this to return a TaskArrayList rather than a Cursor) */\n   public Cursor getAllDataAsCursor() {\n      return this.getWritableDatabase().query(&quot;workifydatabase&quot;,null /* all columns */,null /* all rows*/,null /* no selection args */, null,null,null);\n   }\n}\n</code></pre>\n<ul>\n<li>Note the two methods for accessing the database, <code>saveWorkRecord</code> for saving a row of data (returning the id of the row or -1 if the row could not be inserted and <code>getAllData</code> to return a Cursor (note the comment adapting to return a TaskArrayList). <em>i.e. the demo is more about circumventing the table not found issue than handling the display of the list</em></li>\n</ul>\n<p>To actually demonstrate some activity code that will save two records and then extract them from the database into a Cursor and then using the <code>DatabaseUtils</code> dumpCursor method to write the data in the cursor to the log:-</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n    DBOpenHelper db;\n    /*NOTE BAD IDEA TO STORE DATES in dd-mm-yyyy format\n    * 1) date is only sortable indirectly\n    * 2) the date, not being an SQLite recognised format, excludes simple use of SQLite's build in date functions\n    *  */\n    SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;dd-MM-yyyy&quot;, Locale.getDefault());\n    SimpleDateFormat beterDateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;,Locale.getDefault());\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        db = DBOpenHelper.getInstance(this); /* get an instance of the DBOpenHelper*/\n        /* Note that the database will not have been opened/created at this stage */\n\n        /* Try to get data from the database (noting no data has been added) */\n        /* This will result in the database being created (opened if it exists) and therefore\n            the onCreate method of the DBOpenHelper instance being called, thus creating the table */\n        Cursor csr = db.getAllDataAsCursor();\n        DatabaseUtils.dumpCursor(csr); /* Dumpy the cursor (will be empty first time the app is run) */\n\n        /* Add two records */\n        db.saveWorkRecord(&quot;My First Work Record&quot;,1,dateFormat.format(new Date()),0);\n        db.saveWorkRecord(&quot;My Other First Work Record&quot;,2,beterDateFormat.format(new Date()),10);\n\n        /* Extract the data and dump the cursor to the log */\n        csr = db.getAllDataAsCursor();\n        DatabaseUtils.dumpCursor(csr);\n    }\n}\n</code></pre>\n<p>When run for the first time then the log includes:-</p>\n<pre><code>2023-08-17 08:19:59.993 I/System.out: &gt;&gt;&gt;&gt;&gt; Dumping cursor android.database.sqlite.SQLiteCursor@98fd0f5\n2023-08-17 08:19:59.993 I/System.out: &lt;&lt;&lt;&lt;&lt;\n\n\n\n2023-08-17 08:19:59.995 I/System.out: &gt;&gt;&gt;&gt;&gt; Dumping cursor android.database.sqlite.SQLiteCursor@664ce8a\n2023-08-17 08:19:59.996 I/System.out: 0 {\n2023-08-17 08:19:59.996 I/System.out:    id=1\n2023-08-17 08:19:59.996 I/System.out:    workname=My First Work Record\n2023-08-17 08:19:59.996 I/System.out:    logoid=1\n2023-08-17 08:19:59.996 I/System.out:    year=17-08-2023\n2023-08-17 08:19:59.996 I/System.out:    workinghours=0\n2023-08-17 08:19:59.996 I/System.out: }\n2023-08-17 08:19:59.996 I/System.out: 1 {\n2023-08-17 08:19:59.996 I/System.out:    id=2\n2023-08-17 08:19:59.996 I/System.out:    workname=My Other First Work Record\n2023-08-17 08:19:59.996 I/System.out:    logoid=2\n2023-08-17 08:19:59.996 I/System.out:    year=2023-08-17\n2023-08-17 08:19:59.997 I/System.out:    workinghours=10\n2023-08-17 08:19:59.997 I/System.out: }\n2023-08-17 08:19:59.997 I/System.out: &lt;&lt;&lt;&lt;&lt;\n</code></pre>\n<ul>\n<li>the first dump (first few lines) shows that there is no data in the cursor.</li>\n<li>the second dump confirms that the data has been inserted and successfully extracted.</li>\n</ul>\n<p>Using Android Studio's <code>App Inspection</code> :-</p>\n<p><a href=\"https://i.stack.imgur.com/MT6kx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MT6kx.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":28835794,"reputation":13,"user_id":22085231,"display_name":"Yasin G."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76917462,"answer_count":1,"score":1,"last_activity_date":1692225283,"creation_date":1692170749,"question_id":76911367,"body_markdown":"I&#39;m trying to use sq lite database in android studio, but I get no such table error\r\n\r\nI created an sqlite database and I was waiting for the database I created to assign data to the recycler view and for the tasks I created to appear in the recycler view. but I got no such table error and nothing showed up in the recycler view\r\n\r\n    private void saveWorkRecord() {\r\n        \r\n        String workName = editTextTaskName.getText().toString();\r\n        int workingHours = 0; \r\n        int logoId = selectedLogoResourceId; \r\n        Date date = new Date(); \r\n        SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;dd-MM-yyyy&quot;, Locale.getDefault());\r\n        String formattedDate = dateFormat.format(date); \r\n\r\n        try {\r\n            database.execSQL(&quot;CREATE TABLE IF NOT EXISTS workifydatabase(id INTEGER PRIMARY KEY,workname VARCHAR,logoid INTEGER,year VARCHAR,workinghours INTEGER) &quot;);\r\n            String sqlString = &quot;INSERT INTO workifydatabase(workname, logoid, year, workinghours) VALUES(?,?,?,?)&quot;;\r\n            SQLiteStatement sqLiteStatement = database.compileStatement(sqlString);\r\n            sqLiteStatement.bindString(1, workName);\r\n            sqLiteStatement.bindLong(2, logoId); \r\n            sqLiteStatement.bindString(3, formattedDate);\r\n            sqLiteStatement.bindLong(4, workingHours); \r\n            sqLiteStatement.executeInsert();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        database.close();\r\n        finish();\r\n    }\r\n\r\nand this is the usage part:\r\n\r\n    private void getData() {\r\n\r\n        try {\r\n            SQLiteDatabase sqLiteDatabase = requireContext().openOrCreateDatabase(&quot;workifyDatabase&quot;,MODE_PRIVATE,null);\r\n            Cursor cursor = sqLiteDatabase.rawQuery(&quot;SELECT * FROM workifydatabase&quot;,null);\r\n            int nameIx = cursor.getColumnIndex(&quot;workname&quot;);\r\n            int idIx = cursor.getColumnIndex(&quot;id&quot;);\r\n            int hourIx = cursor.getColumnIndex(&quot;workinghours&quot;);\r\n            int yearIx = cursor.getColumnIndex(&quot;year&quot;);\r\n\r\n            while (cursor.moveToNext()){\r\n                String name = cursor.getString(nameIx);\r\n                int id= cursor.getInt(idIx);\r\n                String year = cursor.getString(yearIx);\r\n                int hour = cursor.getInt(hourIx);\r\n                Task task = new Task(name,id,hour,year);\r\n                TaskArrayList.add(task);\r\n            }\r\n\r\n            taskAdapter.notifyDataSetChanged();\r\n            cursor.close();\r\n        } catch(Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }","title":"Android Stuido sqlite database no such table error","body":"<p>I'm trying to use sq lite database in android studio, but I get no such table error</p>\n<p>I created an sqlite database and I was waiting for the database I created to assign data to the recycler view and for the tasks I created to appear in the recycler view. but I got no such table error and nothing showed up in the recycler view</p>\n<pre><code>private void saveWorkRecord() {\n    \n    String workName = editTextTaskName.getText().toString();\n    int workingHours = 0; \n    int logoId = selectedLogoResourceId; \n    Date date = new Date(); \n    SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;dd-MM-yyyy&quot;, Locale.getDefault());\n    String formattedDate = dateFormat.format(date); \n\n    try {\n        database.execSQL(&quot;CREATE TABLE IF NOT EXISTS workifydatabase(id INTEGER PRIMARY KEY,workname VARCHAR,logoid INTEGER,year VARCHAR,workinghours INTEGER) &quot;);\n        String sqlString = &quot;INSERT INTO workifydatabase(workname, logoid, year, workinghours) VALUES(?,?,?,?)&quot;;\n        SQLiteStatement sqLiteStatement = database.compileStatement(sqlString);\n        sqLiteStatement.bindString(1, workName);\n        sqLiteStatement.bindLong(2, logoId); \n        sqLiteStatement.bindString(3, formattedDate);\n        sqLiteStatement.bindLong(4, workingHours); \n        sqLiteStatement.executeInsert();\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n\n    database.close();\n    finish();\n}\n</code></pre>\n<p>and this is the usage part:</p>\n<pre><code>private void getData() {\n\n    try {\n        SQLiteDatabase sqLiteDatabase = requireContext().openOrCreateDatabase(&quot;workifyDatabase&quot;,MODE_PRIVATE,null);\n        Cursor cursor = sqLiteDatabase.rawQuery(&quot;SELECT * FROM workifydatabase&quot;,null);\n        int nameIx = cursor.getColumnIndex(&quot;workname&quot;);\n        int idIx = cursor.getColumnIndex(&quot;id&quot;);\n        int hourIx = cursor.getColumnIndex(&quot;workinghours&quot;);\n        int yearIx = cursor.getColumnIndex(&quot;year&quot;);\n\n        while (cursor.moveToNext()){\n            String name = cursor.getString(nameIx);\n            int id= cursor.getInt(idIx);\n            String year = cursor.getString(yearIx);\n            int hour = cursor.getInt(hourIx);\n            Task task = new Task(name,id,hour,year);\n            TaskArrayList.add(task);\n        }\n\n        taskAdapter.notifyDataSetChanged();\n        cursor.close();\n    } catch(Exception e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n"},{"tags":["java","gradle","jar","dependencies","noclassdeffounderror"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1692225008,"post_id":76917432,"comment_id":135596387,"body_markdown":"You&#39;d need to use something like [shadow](https://github.com/johnrengelman/shadow) but I think in the case of JavaFX, the smarter money would be on using `jpackage`","body":"You&#39;d need to use something like <a href=\"https://github.com/johnrengelman/shadow\" rel=\"nofollow noreferrer\">shadow</a> but I think in the case of JavaFX, the smarter money would be on using <code>jpackage</code>"},{"owner":{"display_name":"user9035826"},"score":0,"creation_date":1692338944,"post_id":76917432,"comment_id":135612095,"body_markdown":"How do you exactly try to run the jar? Depending on the version of Java you use, you may have to add module path and javafx modules.","body":"How do you exactly try to run the jar? Depending on the version of Java you use, you may have to add module path and javafx modules."},{"owner":{"account_id":26693238,"reputation":23,"user_id":20301502,"display_name":"jamal1aarab"},"score":0,"creation_date":1692377964,"post_id":76917432,"comment_id":135619629,"body_markdown":"@CjY i run it normally using java -jar name.jar because i dont have javafx localy i add it using gradle","body":"@CjY i run it normally using java -jar name.jar because i dont have javafx localy i add it using gradle"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1692378441,"post_id":76917432,"comment_id":135619724,"body_markdown":"That is ... confusing. If you don&#39;t have it &quot;locally&quot; then I don&#39;t see how you run it at all as it&#39;s sure not in your jar (as your error shows)","body":"That is ... confusing. If you don&#39;t have it &quot;locally&quot; then I don&#39;t see how you run it at all as it&#39;s sure not in your jar (as your error shows)"},{"owner":{"account_id":26693238,"reputation":23,"user_id":20301502,"display_name":"jamal1aarab"},"score":0,"creation_date":1692384270,"post_id":76917432,"comment_id":135620666,"body_markdown":"@g00se thank you for the suggestion earlier\nwhat confuse me is that gradle run the app successfully but when it comes to the jar file it dosent work","body":"@g00se thank you for the suggestion earlier what confuse me is that gradle run the app successfully but when it comes to the jar file it dosent work"},{"owner":{"account_id":26693238,"reputation":23,"user_id":20301502,"display_name":"jamal1aarab"},"score":0,"creation_date":1692387389,"post_id":76917432,"comment_id":135621147,"body_markdown":"@CjY I tried using this but still no result :\njava --module-path C:\\programming\\javafx-sdk-20.0.2\\lib --add-modules javafx.controls,javafx.fxml -jar systemGestionConges.jar","body":"@CjY I tried using this but still no result : java --module-path C:\\programming\\javafx-sdk-20.0.2\\lib --add-modules javafx.controls,javafx.fxml -jar systemGestionConges.jar"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1692389706,"post_id":76917432,"comment_id":135621504,"body_markdown":"*I tried using this...* You can&#39;t mix in `-jar`. That parameter is a stand-alone means of running a *self-sufficient* packaged jar. Yours is **not** self-sufficient as your default runtime doesn&#39;t have JavaFx. Therefore you either have to make it so, or run it specifying the main class and all its modules and or/classpaths","body":"<i>I tried using this...</i> You can&#39;t mix in <code>-jar</code>. That parameter is a stand-alone means of running a <i>self-sufficient</i> packaged jar. Yours is <b>not</b> self-sufficient as your default runtime doesn&#39;t have JavaFx. Therefore you either have to make it so, or run it specifying the main class and all its modules and or/classpaths"},{"owner":{"display_name":"user9035826"},"score":0,"creation_date":1692548933,"post_id":76917432,"comment_id":135635495,"body_markdown":"You still got the same error after adding the modules and path?","body":"You still got the same error after adding the modules and path?"},{"owner":{"account_id":26693238,"reputation":23,"user_id":20301502,"display_name":"jamal1aarab"},"score":0,"creation_date":1692559164,"post_id":76917432,"comment_id":135636594,"body_markdown":"@cjy yes \nError: Could not find or load main class com.jamal1aarab.Main","body":"@cjy yes  Error: Could not find or load main class com.jamal1aarab.Main"}],"owner":{"account_id":26693238,"reputation":23,"user_id":20301502,"display_name":"jamal1aarab"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1692224959,"creation_date":1692224659,"question_id":76917432,"body_markdown":"Facing &quot;NoClassDefFoundError&quot; when running Gradle-generated JAR for JavaFX app. Gradle build succeeds, but JAR execution fails due to missing &quot;javafx/application/Application&quot; class. Need help including JavaFX in JAR build.\r\n\r\nHere is the error:\r\n\r\n&gt; Error: Could not find or load main class com.jamal1aarab.Main\r\nCaused by: java.lang.NoClassDefFoundError: javafx/application/Application\r\n\r\nHere is part of my build file where I think the problem is:\r\n\r\n```\r\nmainClassName = &#39;com.jamal1aarab.Main&#39;\r\n\r\njar {\r\n  manifest {\r\n    attributes(\r\n      &#39;Main-Class&#39;: &#39;com.jamal1aarab.Main&#39;\r\n    )\r\n  }\r\n}\r\n```\r\n\r\nThe directory is correct at `src\\main\\java\\com\\jamal1aarab`\r\n\r\nI configured my Gradle build with the main class and manifest attributes. Gradle build and run work fine, but when I try running the JAR, the &quot;NoClassDefFoundError&quot; pops up. I expected my JavaFX app to run smoothly from the JAR, just like it does through Gradle. However, the missing &quot;javafx/application/Application&quot; class caused the JAR execution to fail.\r\n\r\nAlso, I&#39;ve come across numerous Stack Overflow posts discussing similar issues. However, most solutions seem to involve fixing the path, which I&#39;ve already ensured is correct in my case.\r\n","title":"Troubleshooting JavaFX NoClassDefFoundError When Running JAR File: How to Include JavaFX in Gradle-built JAR?","body":"<p>Facing &quot;NoClassDefFoundError&quot; when running Gradle-generated JAR for JavaFX app. Gradle build succeeds, but JAR execution fails due to missing &quot;javafx/application/Application&quot; class. Need help including JavaFX in JAR build.</p>\n<p>Here is the error:</p>\n<blockquote>\n<p>Error: Could not find or load main class com.jamal1aarab.Main\nCaused by: java.lang.NoClassDefFoundError: javafx/application/Application</p>\n</blockquote>\n<p>Here is part of my build file where I think the problem is:</p>\n<pre><code>mainClassName = 'com.jamal1aarab.Main'\n\njar {\n  manifest {\n    attributes(\n      'Main-Class': 'com.jamal1aarab.Main'\n    )\n  }\n}\n</code></pre>\n<p>The directory is correct at <code>src\\main\\java\\com\\jamal1aarab</code></p>\n<p>I configured my Gradle build with the main class and manifest attributes. Gradle build and run work fine, but when I try running the JAR, the &quot;NoClassDefFoundError&quot; pops up. I expected my JavaFX app to run smoothly from the JAR, just like it does through Gradle. However, the missing &quot;javafx/application/Application&quot; class caused the JAR execution to fail.</p>\n<p>Also, I've come across numerous Stack Overflow posts discussing similar issues. However, most solutions seem to involve fixing the path, which I've already ensured is correct in my case.</p>\n"},{"tags":["java","memory","compiler-construction","jvm"],"comments":[{"owner":{"account_id":15988,"reputation":872908,"user_id":34397,"accept_rate":87,"display_name":"SLaks"},"score":2,"creation_date":1347806953,"post_id":12447819,"comment_id":16738573,"body_markdown":"Read the source for the `String` class.","body":"Read the source for the <code>String</code> class."},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1347807607,"post_id":12447819,"comment_id":16738698,"body_markdown":"If you read the source for the String class you will see it stores the length which is how it knows how long the string is. BTW &quot;abc&quot; uses about 48 bytes of memory.","body":"If you read the source for the String class you will see it stores the length which is how it knows how long the string is. BTW &quot;abc&quot; uses about 48 bytes of memory."}],"answers":[{"comments":[{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":1,"creation_date":1347812910,"post_id":12447856,"comment_id":16739839,"body_markdown":"Add 38.  The 45 is to round up instead of down.","body":"Add 38.  The 45 is to round up instead of down."}],"tags":[],"owner":{"account_id":344696,"reputation":7076,"user_id":677139,"accept_rate":97,"display_name":"Dreen"},"comment_count":1,"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1347806938,"creation_date":1347806938,"answer_id":12447856,"question_id":12447819,"body_markdown":"It takes more than 3 bytes, read on for full explanation from [this page][1]\r\n\r\n&gt; For reasons we&#39;ll explore below, the minimum memory usage of a Java\r\n&gt; String (in the Hotspot Java 6 VM) is generally as follows:\r\n&gt; \r\n&gt;     Minimum String memory usage (bytes) = 8 * (int) ((((no chars) * 2) + 45) / 8)\r\n&gt; \r\n&gt; Or, put another way:\r\n&gt; \r\n&gt;  - multiply the number of characters of the String by two;\r\n&gt;  - add 38;\r\n&gt;  - if the result is not a multiple of 8, round up to the next multiple    of 8;\r\n&gt;  - the result is generally the minimum number of bytes taken up on the    heap by the String.\r\n\r\n[This page][2] from the same website also details ways in which you can save memory using classes different than `String`\r\n\r\n\r\n  [1]: http://www.javamex.com/tutorials/memory/string_memory_usage.shtml\r\n  [2]: http://www.javamex.com/tutorials/memory/string_saving_memory.shtml","title":"Does s take 3 bytes in Java? when : String s = &quot;abc&quot;; Java","body":"<p>It takes more than 3 bytes, read on for full explanation from <a href=\"http://www.javamex.com/tutorials/memory/string_memory_usage.shtml\" rel=\"noreferrer\">this page</a></p>\n\n<blockquote>\n  <p>For reasons we'll explore below, the minimum memory usage of a Java\n  String (in the Hotspot Java 6 VM) is generally as follows:</p>\n\n<pre><code>Minimum String memory usage (bytes) = 8 * (int) ((((no chars) * 2) + 45) / 8)\n</code></pre>\n  \n  <p>Or, put another way:</p>\n  \n  <ul>\n  <li>multiply the number of characters of the String by two;</li>\n  <li>add 38;</li>\n  <li>if the result is not a multiple of 8, round up to the next multiple    of 8;</li>\n  <li>the result is generally the minimum number of bytes taken up on the    heap by the String.</li>\n  </ul>\n</blockquote>\n\n<p><a href=\"http://www.javamex.com/tutorials/memory/string_saving_memory.shtml\" rel=\"noreferrer\">This page</a> from the same website also details ways in which you can save memory using classes different than <code>String</code></p>\n"},{"comments":[{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1347809250,"post_id":12447867,"comment_id":16739073,"body_markdown":"in theory it could be less than that ... if you take into account Strings that share backing arrays.","body":"in theory it could be less than that ... if you take into account Strings that share backing arrays."},{"owner":{"account_id":1038150,"reputation":2733,"user_id":1044799,"accept_rate":80,"display_name":"awm"},"score":1,"creation_date":1347813222,"post_id":12447867,"comment_id":16739912,"body_markdown":"That&#39;s something else, OP is asking about memory usage and a single string.","body":"That&#39;s something else, OP is asking about memory usage and a single string."}],"tags":[],"owner":{"account_id":1038150,"reputation":2733,"user_id":1044799,"accept_rate":80,"display_name":"awm"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1347807029,"creation_date":1347807029,"answer_id":12447867,"question_id":12447819,"body_markdown":"Minimum String memory usage (bytes) = 8 * (int) ((((num of chars) * 2) + 45) / 8) \r\n","title":"Does s take 3 bytes in Java? when : String s = &quot;abc&quot;; Java","body":"<p>Minimum String memory usage (bytes) = 8 * (int) ((((num of chars) * 2) + 45) / 8) </p>\n"},{"tags":[],"owner":{"account_id":441661,"reputation":86528,"user_id":831878,"accept_rate":92,"display_name":"Ray Toal"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1692224895,"creation_date":1347807205,"answer_id":12447891,"question_id":12447819,"body_markdown":"Short answer: no, not by a long shot.  JVM strings are well-known for being quite heavy; the object contains not only a pointer to the character array but also its length.  And the internal storage use UTF-16 codepoints, so your question could have been &quot;does it take 6 bytes?&quot; :-)\r\n\r\nA technical reference to the JVM will give you the exact size of string objects.  You can also find some interesting blog posts [such as this one](https://web.archive.org/web/20120702032839/http://lingpipe-blog.com/2010/06/22/the-unbearable-heaviness-jav-strings/) and technical articles.\r\n\r\nThere is a good deal more to the question of the exact size of string objects.  We can get in to compression of object pointers, string interning, etc.  There is also the fact that since strings are immutable, we often have sharing of string memory, as happens when you call `substring` for example.\r\n\r\nHowever, what is always true is: it&#39;s more than 3 bytes.\r\n","title":"Does s take 3 bytes in Java? when : String s = &quot;abc&quot;; Java","body":"<p>Short answer: no, not by a long shot.  JVM strings are well-known for being quite heavy; the object contains not only a pointer to the character array but also its length.  And the internal storage use UTF-16 codepoints, so your question could have been &quot;does it take 6 bytes?&quot; :-)</p>\n<p>A technical reference to the JVM will give you the exact size of string objects.  You can also find some interesting blog posts <a href=\"https://web.archive.org/web/20120702032839/http://lingpipe-blog.com/2010/06/22/the-unbearable-heaviness-jav-strings/\" rel=\"nofollow noreferrer\">such as this one</a> and technical articles.</p>\n<p>There is a good deal more to the question of the exact size of string objects.  We can get in to compression of object pointers, string interning, etc.  There is also the fact that since strings are immutable, we often have sharing of string memory, as happens when you call <code>substring</code> for example.</p>\n<p>However, what is always true is: it's more than 3 bytes.</p>\n"}],"owner":{"account_id":1469221,"reputation":3113,"user_id":1381196,"accept_rate":87,"display_name":"Al2O3"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1042,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":12447856,"answer_count":3,"score":5,"last_activity_date":1692224895,"creation_date":1347806671,"question_id":12447819,"body_markdown":"If I write this in Java:  \r\n\r\n    String s = &quot;abc&quot;;  \r\n\r\nDoes s only occupy 3 bytes in the memory?  \r\nIf true, how JVM finds the end of the String object?  \r\nDoes this take more bytes in memory?","title":"Does s take 3 bytes in Java? when : String s = &quot;abc&quot;; Java","body":"<p>If I write this in Java:  </p>\n\n<pre><code>String s = \"abc\";  \n</code></pre>\n\n<p>Does s only occupy 3 bytes in the memory?<br>\nIf true, how JVM finds the end of the String object?<br>\nDoes this take more bytes in memory?</p>\n"},{"tags":["java","serialization","file-io"],"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1692230253,"post_id":8640859,"comment_id":135596874,"body_markdown":"Add `static long serialVersionUID = ..;` to the class, with the value as shown for the stream classdesc.","body":"Add <code>static long serialVersionUID = ..;</code> to the class, with the value as shown for the stream classdesc."}],"answers":[{"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1692230130,"post_id":8640877,"comment_id":135596865,"body_markdown":"The Object Serialization Specification would be a lot more helpful, as it is a normative specification, not just some arbitrary third-party Internet junk.","body":"The Object Serialization Specification would be a lot more helpful, as it is a normative specification, not just some arbitrary third-party Internet junk."}],"tags":[],"owner":{"account_id":1128219,"reputation":58,"user_id":1114946,"accept_rate":50,"display_name":"j128"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1692224845,"creation_date":1324956488,"answer_id":8640877,"question_id":8640859,"body_markdown":"[This article](https://web.archive.org/web/20111104124500/http://lingpipe-blog.com/2010/05/04/upgrading-java-classes-backward-compatible-serialization/) may be helpful, by changing the class&#39;s method signatures, previous serialized forms are incompatible unless the classes have the same serialVersionUID.","title":"error: local class incompatible: stream classdec serialversionUID= ...., local class serialversionUID=","body":"<p><a href=\"https://web.archive.org/web/20111104124500/http://lingpipe-blog.com/2010/05/04/upgrading-java-classes-backward-compatible-serialization/\" rel=\"nofollow noreferrer\">This article</a> may be helpful, by changing the class's method signatures, previous serialized forms are incompatible unless the classes have the same serialVersionUID.</p>\n"},{"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1692230195,"post_id":8640986,"comment_id":135596871,"body_markdown":"Those incompatibilities do not cause this error. Answer is irrelevant.","body":"Those incompatibilities do not cause this error. Answer is irrelevant."}],"tags":[],"owner":{"account_id":958518,"reputation":2221,"user_id":983347,"accept_rate":87,"display_name":"Rajkumar Palani"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1479054739,"creation_date":1324958208,"answer_id":8640986,"question_id":8640859,"body_markdown":"Even Though the serialVersionUID is same, some changes are incompatible to sync with the previous serialized form.\r\n\r\n[link is here][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/8640859/error-local-class-incompatible-stream-classdec-serialversionuid-local-c%22%3E%20Versioning%20of%20serialized%20forms","title":"error: local class incompatible: stream classdec serialversionUID= ...., local class serialversionUID=","body":"<p>Even Though the serialVersionUID is same, some changes are incompatible to sync with the previous serialized form.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/8640859/error-local-class-incompatible-stream-classdec-serialversionuid-local-c%22%3E%20Versioning%20of%20serialized%20forms\">link is here</a></p>\n"},{"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1692230169,"post_id":44397704,"comment_id":135596867,"body_markdown":"That wouldn&#39;t take care of existing serializations, such as to files or databases. This is not the correct solution.","body":"That wouldn&#39;t take care of existing serializations, such as to files or databases. This is not the correct solution."}],"tags":[],"owner":{"account_id":9300759,"reputation":1,"user_id":6906316,"display_name":"PROCSIS Consultora"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1496775513,"creation_date":1496775087,"answer_id":44397704,"question_id":8640859,"body_markdown":"I solved it by doing the following:\r\n\r\nWorking in Eclipse Neon.\r\n\r\n### On Tomcat Server \r\n\r\n- Clean Tomcat Work Directory...\r\n- Clean... (to do something, just in case)\r\n        \r\nthen\r\n        \r\n### Project\r\n\r\n- &#39;Clean...&#39; select your project and click &#39;Ok&#39;","title":"error: local class incompatible: stream classdec serialversionUID= ...., local class serialversionUID=","body":"<p>I solved it by doing the following:</p>\n\n<p>Working in Eclipse Neon.</p>\n\n<h3>On Tomcat Server</h3>\n\n<ul>\n<li>Clean Tomcat Work Directory...</li>\n<li>Clean... (to do something, just in case)</li>\n</ul>\n\n<p>then</p>\n\n<h3>Project</h3>\n\n<ul>\n<li>'Clean...' select your project and click 'Ok'</li>\n</ul>\n"}],"owner":{"account_id":277924,"reputation":2454,"user_id":572207,"accept_rate":65,"display_name":"trs"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8441,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1692319438,"accepted_answer_id":8640877,"answer_count":3,"score":1,"last_activity_date":1692224845,"creation_date":1324956174,"question_id":8640859,"body_markdown":"I have a serializable java class and when I add either of the following methods. I get this error\r\n\r\n&quot; local class incompatible: stream classdec serialversionUID= ...., local class serialversionUID=...&quot;\r\n\r\n\r\nadded methods:\r\n\r\n    public HashMap&lt;Long, BookIndex&gt; getBookIndexMap() {\r\n\t\treturn bookIndexMap;\r\n\t}\r\n\r\n\tpublic String getDataFileName() {\r\n\t\treturn dataFileName;\r\n\t}\r\n\r\nwhat is causing this and how can I correct it?","title":"error: local class incompatible: stream classdec serialversionUID= ...., local class serialversionUID=","body":"<p>I have a serializable java class and when I add either of the following methods. I get this error</p>\n\n<p>\" local class incompatible: stream classdec serialversionUID= ...., local class serialversionUID=...\"</p>\n\n<p>added methods:</p>\n\n<pre><code>public HashMap&lt;Long, BookIndex&gt; getBookIndexMap() {\n    return bookIndexMap;\n}\n\npublic String getDataFileName() {\n    return dataFileName;\n}\n</code></pre>\n\n<p>what is causing this and how can I correct it?</p>\n"},{"tags":["java","lucene"],"answers":[{"comments":[{"owner":{"account_id":94058,"reputation":63524,"user_id":257022,"accept_rate":98,"display_name":"aneuryzm"},"score":0,"creation_date":1298894810,"post_id":5141560,"comment_id":5769960,"body_markdown":"ok, however totalHits is still a bit confusing. It is a method of the class TopDocs, which are the top relevant docs (in my case I&#39;ve set the limit to 20 docs. TopDocs docs = searcher.search(query, 20); So totalHits should be always 20... ?!","body":"ok, however totalHits is still a bit confusing. It is a method of the class TopDocs, which are the top relevant docs (in my case I&#39;ve set the limit to 20 docs. TopDocs docs = searcher.search(query, 20); So totalHits should be always 20... ?!"},{"owner":{"account_id":16729,"reputation":2553,"user_id":36746,"accept_rate":100,"display_name":"Paul"},"score":0,"creation_date":1298899496,"post_id":5141560,"comment_id":5770952,"body_markdown":"@Patrick, totalHits will only be 20 if there are 20 actual hits. What you have done is limit the totalHits to 20 in the case where there are more than 20 actual matches.","body":"@Patrick, totalHits will only be 20 if there are 20 actual hits. What you have done is limit the totalHits to 20 in the case where there are more than 20 actual matches."}],"tags":[],"owner":{"account_id":16729,"reputation":2553,"user_id":36746,"accept_rate":100,"display_name":"Paul"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1692224562,"creation_date":1298893691,"answer_id":5141560,"question_id":5141293,"body_markdown":"The totalHits is the number of documents that matched the query. A hit is essentially a match for the query you entered.  However a hit may be a partial match or a full match\r\n\r\n\r\ne.g. If we use Lucene to index over a set of 3 texts: { “hello world”, “hello sailor”, “goodnight moon” }, then searching for: hello world\r\n\r\ntotal hits: 2\r\n\r\n1.078 hello world\r\n\r\n0.181 hello sailor\r\n\r\nThe float value indicates the score for the hit, which is the relevance to the query string.\r\n\r\nThe following post gives more details https://web.archive.org/web/20110228/http://lingpipe-blog.com/2009/02/18/lucene-24-in-60-seconds/\r\n","title":"Lucene: what are the hits for the query?","body":"<p>The totalHits is the number of documents that matched the query. A hit is essentially a match for the query you entered.  However a hit may be a partial match or a full match</p>\n<p>e.g. If we use Lucene to index over a set of 3 texts: { “hello world”, “hello sailor”, “goodnight moon” }, then searching for: hello world</p>\n<p>total hits: 2</p>\n<p>1.078 hello world</p>\n<p>0.181 hello sailor</p>\n<p>The float value indicates the score for the hit, which is the relevance to the query string.</p>\n<p>The following post gives more details <a href=\"https://web.archive.org/web/20110228/http://lingpipe-blog.com/2009/02/18/lucene-24-in-60-seconds/\" rel=\"nofollow noreferrer\">https://web.archive.org/web/20110228/http://lingpipe-blog.com/2009/02/18/lucene-24-in-60-seconds/</a></p>\n"}],"owner":{"account_id":94058,"reputation":63524,"user_id":257022,"accept_rate":98,"display_name":"aneuryzm"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1117,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":5141560,"answer_count":1,"score":3,"last_activity_date":1692224562,"creation_date":1298892034,"question_id":5141293,"body_markdown":"I&#39;ve just seen in [1] totalHits and scoreHits return the top and total number of hits for the query respectively. \r\n\r\nWhat does &quot;hit&quot; mean exactly ? Is it the position of the searched term in a document, or the documents in which the term is included... or what ?\r\n\r\nthanks\r\n\r\n  [1]: http://lucene.apache.org/java/3_0_1/api/core/org/apache/lucene/search/TopDocs.html#scoreDocs","title":"Lucene: what are the hits for the query?","body":"<p>I've just seen in <a href=\"http://lucene.apache.org/java/3_0_1/api/core/org/apache/lucene/search/TopDocs.html#scoreDocs\" rel=\"nofollow\">1</a> totalHits and scoreHits return the top and total number of hits for the query respectively. </p>\n\n<p>What does \"hit\" mean exactly ? Is it the position of the searched term in a document, or the documents in which the term is included... or what ?</p>\n\n<p>thanks</p>\n"},{"tags":["c#","java","vb.net","serialization","proxy"],"answers":[{"comments":[{"owner":{"account_id":10340,"reputation":55904,"user_id":19479,"accept_rate":69,"display_name":"Steve B."},"score":1,"creation_date":1304999009,"post_id":5944878,"comment_id":6853220,"body_markdown":"The issues with changed-on-the-fly objects - if you change the objects signature (basically anything that would give you a different result with serialver) your serialization becomes incompatible with any previously serialized objects. Moving the serialization behavior into a separate object insulates you somewhat from that (until, of course, your proxies become incompatible).","body":"The issues with changed-on-the-fly objects - if you change the objects signature (basically anything that would give you a different result with serialver) your serialization becomes incompatible with any previously serialized objects. Moving the serialization behavior into a separate object insulates you somewhat from that (until, of course, your proxies become incompatible)."},{"owner":{"account_id":11055,"reputation":18190,"user_id":1163802,"accept_rate":83,"display_name":"Vladimir Dyuzhev"},"score":0,"creation_date":1304999241,"post_id":5944878,"comment_id":6853244,"body_markdown":"This is understood. The article though says: &quot;The problem is that you can serialize an instance, tweak the bytes representing numbers, then deserialize.&quot; This is not the same problem (not version incompatibility).","body":"This is understood. The article though says: &quot;The problem is that you can serialize an instance, tweak the bytes representing numbers, then deserialize.&quot; This is not the same problem (not version incompatibility)."},{"owner":{"account_id":316665,"reputation":87011,"user_id":632951,"accept_rate":83,"display_name":"Pacerier"},"score":0,"creation_date":1305002138,"post_id":5944878,"comment_id":6853646,"body_markdown":"i&#39;m not specifically talking about serializing a singleton. i&#39;m just serializing normal instances..","body":"i&#39;m not specifically talking about serializing a singleton. i&#39;m just serializing normal instances.."}],"tags":[],"owner":{"account_id":11055,"reputation":18190,"user_id":1163802,"accept_rate":83,"display_name":"Vladimir Dyuzhev"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1304999458,"creation_date":1304998491,"answer_id":5944878,"question_id":5944805,"body_markdown":"Default serialization:\r\n\r\n- Creates multiple instances of classes supposed to be singletons on deserialization\r\n- Supposedly has issues with changed in-the-fly deserialized objects (huh?)\r\n\r\nSecond point is arguable. Who has changed the data of the bytestream? If it could happen we have a bigger issue than deserialization: security. Signed/encrypted streams would solve the serialization issue too.\r\n\r\nFirst one is real one. Serialize the same singleton a few time, deserialize on the other side, and oops! you have multiple singletons (multitones?). That problem though is IMHO easier solved by making a singleton out of Enum, then JVM will enforce the single instance itself.\r\n\r\n**UPDATE**\r\n\r\nAs was pointed out by Steve B, the blog poster perhaps misunderstood/misrepresented what did he read. Instead of &quot;serialize, tweak bytes, then deserialize&quot; one should read &quot;serialize, deploy new version of the class, deserialize&quot;. Yes, this is known problem, and Externalizable interface allows one to solve it neatly by taking a full control over the class serialization, so even the later version of the class can deserialize own data from a stream created by a previous versions (if it possible at all).","title":"what problem does the serialization proxy pattern solves that the serialization pattern doesn&#39;t solve?","body":"<p>Default serialization:</p>\n\n<ul>\n<li>Creates multiple instances of classes supposed to be singletons on deserialization</li>\n<li>Supposedly has issues with changed in-the-fly deserialized objects (huh?)</li>\n</ul>\n\n<p>Second point is arguable. Who has changed the data of the bytestream? If it could happen we have a bigger issue than deserialization: security. Signed/encrypted streams would solve the serialization issue too.</p>\n\n<p>First one is real one. Serialize the same singleton a few time, deserialize on the other side, and oops! you have multiple singletons (multitones?). That problem though is IMHO easier solved by making a singleton out of Enum, then JVM will enforce the single instance itself.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>As was pointed out by Steve B, the blog poster perhaps misunderstood/misrepresented what did he read. Instead of \"serialize, tweak bytes, then deserialize\" one should read \"serialize, deploy new version of the class, deserialize\". Yes, this is known problem, and Externalizable interface allows one to solve it neatly by taking a full control over the class serialization, so even the later version of the class can deserialize own data from a stream created by a previous versions (if it possible at all).</p>\n"}],"owner":{"account_id":316665,"reputation":87011,"user_id":632951,"accept_rate":83,"display_name":"Pacerier"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1081,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1692224530,"creation_date":1304997645,"question_id":5944805,"body_markdown":"I need to be able to serialize a class into a string, and I know of 2 patterns:\r\n\r\n1) (normal) Serialization pattern\r\n2) Proxy Serialization pattern\r\n\r\nI&#39;ve read [this blog](https://web.archive.org/web/20110504033130/http://lingpipe-blog.com/2009/08/10/serializing-immutable-singletons-serialization-proxy/) (the only website in google that talks about the proxy-serialization pattern) and still cant find the **advantage** or **benefit** of using this pattern. Could someone explain what exactly is the proxy serialization pattern, or rather exactly what problem does the proxy-serialization pattern solves that the normal-serialization pattern doesn&#39;t solve?","title":"what problem does the serialization proxy pattern solves that the serialization pattern doesn&#39;t solve?","body":"<p>I need to be able to serialize a class into a string, and I know of 2 patterns:</p>\n<ol>\n<li>(normal) Serialization pattern</li>\n<li>Proxy Serialization pattern</li>\n</ol>\n<p>I've read <a href=\"https://web.archive.org/web/20110504033130/http://lingpipe-blog.com/2009/08/10/serializing-immutable-singletons-serialization-proxy/\" rel=\"nofollow noreferrer\">this blog</a> (the only website in google that talks about the proxy-serialization pattern) and still cant find the <strong>advantage</strong> or <strong>benefit</strong> of using this pattern. Could someone explain what exactly is the proxy serialization pattern, or rather exactly what problem does the proxy-serialization pattern solves that the normal-serialization pattern doesn't solve?</p>\n"},{"tags":["java","spring-boot","date"],"answers":[{"tags":[],"owner":{"account_id":13798611,"reputation":37885,"user_id":9959152,"display_name":"Ryuzaki L"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692224498,"creation_date":1692224498,"answer_id":76917425,"question_id":76914265,"body_markdown":"This date `2021-08-31T01:03:34Z` represents the `ISO_INSTANT` [format][1]. So you can use the [Instant][2] instead of `OffsetDateTime`\r\n\r\n    @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss&#39;Z&#39;&quot;, timezone = &quot;UTC&quot;)\r\n    private OffsetDateTime lastCommunicated;\r\n\r\nAnd also you jackson [@JsonFormat][3] with providing the format for serialization and deserialization.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/format/DateTimeFormatter.html#ISO_INSTANT\r\n  [2]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/Instant.html\r\n  [3]: https://www.javadoc.io/doc/com.fasterxml.jackson.core/jackson-annotations/2.9.8/com/fasterxml/jackson/annotation/JsonFormat.html","title":"Date-time in openapi specification not working as expected with DateTimeFormat annotation","body":"<p>This date <code>2021-08-31T01:03:34Z</code> represents the <code>ISO_INSTANT</code> <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/format/DateTimeFormatter.html#ISO_INSTANT\" rel=\"nofollow noreferrer\">format</a>. So you can use the <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/Instant.html\" rel=\"nofollow noreferrer\">Instant</a> instead of <code>OffsetDateTime</code></p>\n<pre><code>@JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;yyyy-MM-dd'T'HH:mm:ss'Z'&quot;, timezone = &quot;UTC&quot;)\nprivate OffsetDateTime lastCommunicated;\n</code></pre>\n<p>And also you jackson <a href=\"https://www.javadoc.io/doc/com.fasterxml.jackson.core/jackson-annotations/2.9.8/com/fasterxml/jackson/annotation/JsonFormat.html\" rel=\"nofollow noreferrer\">@JsonFormat</a> with providing the format for serialization and deserialization.</p>\n"}],"owner":{"account_id":152408,"reputation":6071,"user_id":366916,"accept_rate":50,"display_name":"bharathi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":124,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692224513,"creation_date":1692193924,"question_id":76914265,"body_markdown":"I have open api specification in spring boot application which generates me, \r\n\r\nOpenAPI:\r\n\r\n     lastCommunicated:\r\n           type: string\r\n           format: date-time\r\n           example: &#39;2023-06-29T04:49:38Z&#39;\r\n\r\nEmployeeDTO.java\r\n     \r\n      private Long id;\r\n      \r\n      private String name;\r\n\r\n      @DateTimeFormat(iso = DateTimeFormat.ISO.DATE_TIME)\r\n      private OffsetDateTime lastCommunicated;\r\n\r\nRequest JSON:\r\n\r\n    {\r\n     &quot;id&quot;: 1,\r\n    &quot;name&quot;: &quot;test&quot;,\r\n     &quot;lastCommunicated&quot;:&quot;2021-08-31T01:03:34Z&quot;\r\n    \r\n    }\r\n\r\nResponse:\r\n\r\n    {\r\n     &quot;id&quot;: 1,\r\n    &quot;name&quot;: &quot;test&quot;,\r\n     &quot;lastCommunicated&quot;:1630371814.000000000\r\n    \r\n    }\r\n\r\nI need &quot;lastCommunicated&quot;:&quot;2021-08-31T01:03:34Z&quot; format.\r\n\r\n","title":"Date-time in openapi specification not working as expected with DateTimeFormat annotation","body":"<p>I have open api specification in spring boot application which generates me,</p>\n<p>OpenAPI:</p>\n<pre><code> lastCommunicated:\n       type: string\n       format: date-time\n       example: '2023-06-29T04:49:38Z'\n</code></pre>\n<p>EmployeeDTO.java</p>\n<pre><code>  private Long id;\n  \n  private String name;\n\n  @DateTimeFormat(iso = DateTimeFormat.ISO.DATE_TIME)\n  private OffsetDateTime lastCommunicated;\n</code></pre>\n<p>Request JSON:</p>\n<pre><code>{\n &quot;id&quot;: 1,\n&quot;name&quot;: &quot;test&quot;,\n &quot;lastCommunicated&quot;:&quot;2021-08-31T01:03:34Z&quot;\n\n}\n</code></pre>\n<p>Response:</p>\n<pre><code>{\n &quot;id&quot;: 1,\n&quot;name&quot;: &quot;test&quot;,\n &quot;lastCommunicated&quot;:1630371814.000000000\n\n}\n</code></pre>\n<p>I need &quot;lastCommunicated&quot;:&quot;2021-08-31T01:03:34Z&quot; format.</p>\n"},{"tags":["java","wildfly-15"],"comments":[{"owner":{"account_id":9609,"reputation":92294,"user_id":17833,"display_name":"Anya Shenanigans"},"score":0,"creation_date":1692220448,"post_id":76916973,"comment_id":135595821,"body_markdown":"without more server details; I&#39;d be leaning towards the security context of execution preventing you from writing to /tmp; however you haven&#39;t given enough details of how you&#39;re running to determine what the issue might be. I&#39;d be firing up strace, or something like that to see if there is even an attempt to open up the log file","body":"without more server details; I&#39;d be leaning towards the security context of execution preventing you from writing to /tmp; however you haven&#39;t given enough details of how you&#39;re running to determine what the issue might be. I&#39;d be firing up strace, or something like that to see if there is even an attempt to open up the log file"},{"owner":{"account_id":51161,"reputation":17015,"user_id":152794,"display_name":"James R. Perkins"},"score":0,"creation_date":1692230751,"post_id":76916973,"comment_id":135596926,"body_markdown":"WildFly 15 is still rather old, however it doesn&#39;t ship with a log4j2 implementation. Are you including both the log4j 2 API and core libraries?","body":"WildFly 15 is still rather old, however it doesn&#39;t ship with a log4j2 implementation. Are you including both the log4j 2 API and core libraries?"}],"answers":[{"comments":[{"owner":{"account_id":6397346,"reputation":107,"user_id":4961252,"display_name":"Pete Long"},"score":0,"creation_date":1692257837,"post_id":76917387,"comment_id":135599440,"body_markdown":"The logging is part of the application. How can I determine whether the private ( existing ) or the JBoss log4j 2 implementation is used and how can set such that the private log4j2 is used please.","body":"The logging is part of the application. How can I determine whether the private ( existing ) or the JBoss log4j 2 implementation is used and how can set such that the private log4j2 is used please."}],"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692223913,"creation_date":1692223913,"answer_id":76917387,"question_id":76916973,"body_markdown":"Is logging part of your application or the container?\r\n\r\nWildfly 10 most likely contained a log4j 1 implementation, whereas newer versions of Wildfly come with log4j 2 installed. If you do not notice, your application might assume that log4j2 (what you see as being used) is it&#39;s private installation while in newer JBoss you&#39;d now have to decide which of the two log4j 2 implementations is getting configured and used.","title":"Logging to Log File Stopped With Java 11","body":"<p>Is logging part of your application or the container?</p>\n<p>Wildfly 10 most likely contained a log4j 1 implementation, whereas newer versions of Wildfly come with log4j 2 installed. If you do not notice, your application might assume that log4j2 (what you see as being used) is it's private installation while in newer JBoss you'd now have to decide which of the two log4j 2 implementations is getting configured and used.</p>\n"}],"owner":{"account_id":6397346,"reputation":107,"user_id":4961252,"display_name":"Pete Long"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":87,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1692223913,"creation_date":1692218736,"question_id":76916973,"body_markdown":"I am migrating a java application which was compiled using Java 8 and deployed in \r\nWildfly 10 application server. This application deploys and runs successfully. \r\n\r\nThe logging in the application uses log4j2 configuration and the logging is\r\nconfigured to write to a log file specified in the RollingFileAppender. \r\n\r\nAll the logging works fine ie can set different LOG LEVELS, define different Loggers\r\nto control logging at package level etc. \r\n\r\nSo all fine with Java 8 and with the application running in Wildfly 10.\r\n\r\nThe application is than compiled with Java 11 and deployed in Wildfly 15 and \r\nagain deploys and runs successfully.\r\n\r\nHowever, the logging to the log file has stopped working with Java 11.\r\n\r\nThe application creates the log file as before and there are no errors reported.\r\nChanging the LOG LEVELS in the log4j2 file makes no difference.\r\nIn the move to build with Java 11 and to use WIldfly 15,\r\nthere are no chnages to the dependencies or to the log4j2 configuration file.\r\n\r\nNot able to share actual code but below is a good refection of the log4j2.xml \r\nand source code.\r\n\r\n**log4j2.xml** \r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;Configuration&gt;\r\n        &lt;Appenders&gt;\r\n            &lt;Console name=&quot;Console&quot; target=&quot;SYSTEM_OUT&quot;&gt;\r\n                &lt;PatternLayout pattern=&quot;%d{HH:mm:ss.SSS} %-5level - %msg%n&quot;/&gt;\r\n            &lt;/Console&gt;\r\n            \r\n            &lt;!-- Complete definiton not provided RollingFile --&gt;\r\n            &lt;RollingFile name=&quot;File&quot; fileName=&quot;/tmp/log4j2.log&quot; &gt;\r\n                &lt;PatternLayout&gt;\r\n                    &lt;Pattern&gt;%d{HH:mm:ss.SSS} [%t] %-5level - %msg%n&lt;/Pattern&gt;\r\n                &lt;/PatternLayout&gt;\r\n            &lt;/RollingFile&gt;\r\n        &lt;/Appenders&gt;\r\n        &lt;Loggers&gt;\r\n            &lt;Logger name=&quot;com.sematext.blog&quot; level=&quot;info&quot; additivity=&quot;true&quot;&gt;\r\n                &lt;AppenderRef ref=&quot;Console&quot;/&gt;\r\n            &lt;/Logger&gt;\r\n            &lt;Root level=&quot;info&quot;&gt;\r\n                &lt;AppenderRef ref=&quot;File&quot;/&gt;\r\n            &lt;/Root&gt;\r\n        &lt;/Loggers&gt;\r\n    &lt;/Configuration&gt;\r\n\r\nSimilar source code\r\n\r\n        package com.sematext.blog.logging;\r\n\r\n        import org.apache.logging.log4j.LogManager;\r\n        import org.apache.logging.log4j.Logger;\r\n\r\n        public class Log4JDefaultConfig {\r\n                \r\n                private static final Logger LOGGER = LogManager.getLogger(Log4JDefaultConfig.class);\r\n\r\n                public  void processMessage () { \r\n                    LOGGER.info(&quot;This is an INFO level log message!&quot;);\r\n                    LOGGER.debug(&quot;This is an DEBUG level log message!&quot;);\r\n                    LOGGER.error(&quot;This is an ERROR level log message!&quot;);\r\n            }\r\n        }\r\n\r\nI am able debug through the processMessage() method and still nothing gets logged to the log file.\r\n\r\nUnder Eclipse, I use the facility to open declaration of method for info(), debug() and error().\r\n\r\nThey all take me to log4j-api-2.17.1.jar \r\n\r\nI have also added the following to the application build.gradle file this made no difference. This is a suggestion I picked up from googling this issue.\r\n\r\n    jar {\r\n        manifest {\r\n            attributes &#39;Multi-Release&#39;: &#39;true&#39;\r\n        }\r\n    }\r\n\r\nAny thoughts as to why logging to the log file has stopped please.\r\n\r\nThank you for all the help\r\n\r\nPete\r\n\r\n","title":"Logging to Log File Stopped With Java 11","body":"<p>I am migrating a java application which was compiled using Java 8 and deployed in\nWildfly 10 application server. This application deploys and runs successfully.</p>\n<p>The logging in the application uses log4j2 configuration and the logging is\nconfigured to write to a log file specified in the RollingFileAppender.</p>\n<p>All the logging works fine ie can set different LOG LEVELS, define different Loggers\nto control logging at package level etc.</p>\n<p>So all fine with Java 8 and with the application running in Wildfly 10.</p>\n<p>The application is than compiled with Java 11 and deployed in Wildfly 15 and\nagain deploys and runs successfully.</p>\n<p>However, the logging to the log file has stopped working with Java 11.</p>\n<p>The application creates the log file as before and there are no errors reported.\nChanging the LOG LEVELS in the log4j2 file makes no difference.\nIn the move to build with Java 11 and to use WIldfly 15,\nthere are no chnages to the dependencies or to the log4j2 configuration file.</p>\n<p>Not able to share actual code but below is a good refection of the log4j2.xml\nand source code.</p>\n<p><strong>log4j2.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Configuration&gt;\n    &lt;Appenders&gt;\n        &lt;Console name=&quot;Console&quot; target=&quot;SYSTEM_OUT&quot;&gt;\n            &lt;PatternLayout pattern=&quot;%d{HH:mm:ss.SSS} %-5level - %msg%n&quot;/&gt;\n        &lt;/Console&gt;\n        \n        &lt;!-- Complete definiton not provided RollingFile --&gt;\n        &lt;RollingFile name=&quot;File&quot; fileName=&quot;/tmp/log4j2.log&quot; &gt;\n            &lt;PatternLayout&gt;\n                &lt;Pattern&gt;%d{HH:mm:ss.SSS} [%t] %-5level - %msg%n&lt;/Pattern&gt;\n            &lt;/PatternLayout&gt;\n        &lt;/RollingFile&gt;\n    &lt;/Appenders&gt;\n    &lt;Loggers&gt;\n        &lt;Logger name=&quot;com.sematext.blog&quot; level=&quot;info&quot; additivity=&quot;true&quot;&gt;\n            &lt;AppenderRef ref=&quot;Console&quot;/&gt;\n        &lt;/Logger&gt;\n        &lt;Root level=&quot;info&quot;&gt;\n            &lt;AppenderRef ref=&quot;File&quot;/&gt;\n        &lt;/Root&gt;\n    &lt;/Loggers&gt;\n&lt;/Configuration&gt;\n</code></pre>\n<p>Similar source code</p>\n<pre><code>    package com.sematext.blog.logging;\n\n    import org.apache.logging.log4j.LogManager;\n    import org.apache.logging.log4j.Logger;\n\n    public class Log4JDefaultConfig {\n            \n            private static final Logger LOGGER = LogManager.getLogger(Log4JDefaultConfig.class);\n\n            public  void processMessage () { \n                LOGGER.info(&quot;This is an INFO level log message!&quot;);\n                LOGGER.debug(&quot;This is an DEBUG level log message!&quot;);\n                LOGGER.error(&quot;This is an ERROR level log message!&quot;);\n        }\n    }\n</code></pre>\n<p>I am able debug through the processMessage() method and still nothing gets logged to the log file.</p>\n<p>Under Eclipse, I use the facility to open declaration of method for info(), debug() and error().</p>\n<p>They all take me to log4j-api-2.17.1.jar</p>\n<p>I have also added the following to the application build.gradle file this made no difference. This is a suggestion I picked up from googling this issue.</p>\n<pre><code>jar {\n    manifest {\n        attributes 'Multi-Release': 'true'\n    }\n}\n</code></pre>\n<p>Any thoughts as to why logging to the log file has stopped please.</p>\n<p>Thank you for all the help</p>\n<p>Pete</p>\n"},{"tags":["java","nlp","opennlp","named-entity-recognition"],"comments":[{"owner":{"account_id":3672748,"reputation":3884,"user_id":3059517,"accept_rate":85,"display_name":"Mark Giaconia"},"score":0,"creation_date":1421617459,"post_id":28011129,"comment_id":44417538,"body_markdown":"have you tried just training for both? instead of nesting them, just maintain two different models.","body":"have you tried just training for both? instead of nesting them, just maintain two different models."}],"answers":[{"tags":[],"owner":{"account_id":1987254,"reputation":881,"user_id":1782133,"display_name":"Alejandro"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692223689,"creation_date":1421639467,"answer_id":28017721,"question_id":28011129,"body_markdown":"The short answer is: \r\n\r\n1. This cannot be achieved using openNLP NER which is suitable only for continuous entities because it use a [BIO][1] tagging scheme.\r\n2. I don&#39;t know any library in any language capable of do this.\r\n\r\n\r\nI think you are extending too much the concept of entity, which is habitually associated with persons, places, organizations, gene names etc.\r\nBut not with the identification of complex structures within text.\r\n\r\nFor that purpose you need to think in a more elaborated solution, taking into account the grammatical structure of the sentence, which can be obtained using a parser like the one in [OpenNLP][2], and maybe combine this with the output of the NER process.\r\n\r\n  [1]: https://web.archive.org/web/20170805150451/https://lingpipe-blog.com/2009/10/14/coding-chunkers-as-taggers-io-bio-bmewo-and-bmewo/\r\n  [2]: http://opennlp.apache.org/documentation/manual/opennlp.html#tools.parser","title":"How to conduct nested named entity recognition in OpenNLP?","body":"<p>The short answer is:</p>\n<ol>\n<li>This cannot be achieved using openNLP NER which is suitable only for continuous entities because it use a <a href=\"https://web.archive.org/web/20170805150451/https://lingpipe-blog.com/2009/10/14/coding-chunkers-as-taggers-io-bio-bmewo-and-bmewo/\" rel=\"nofollow noreferrer\">BIO</a> tagging scheme.</li>\n<li>I don't know any library in any language capable of do this.</li>\n</ol>\n<p>I think you are extending too much the concept of entity, which is habitually associated with persons, places, organizations, gene names etc.\nBut not with the identification of complex structures within text.</p>\n<p>For that purpose you need to think in a more elaborated solution, taking into account the grammatical structure of the sentence, which can be obtained using a parser like the one in <a href=\"http://opennlp.apache.org/documentation/manual/opennlp.html#tools.parser\" rel=\"nofollow noreferrer\">OpenNLP</a>, and maybe combine this with the output of the NER process.</p>\n"},{"tags":[],"owner":{"account_id":8768854,"reputation":109,"user_id":6556369,"display_name":"Rishav Roy"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1473670603,"creation_date":1473666741,"answer_id":39445649,"question_id":28011129,"body_markdown":"For the purpose of Name Entity Recognition (Java based) I use the following:\r\n\r\n 1. Apache UIMA\r\n 2. ClearTK\r\n\r\nhttps://github.com/merishav/cleartk-tutorials\r\n\r\nYou can train models for your use case, I have already trained for NER for person, places, date of birth, profession.\r\nClearTK gives you a wrapper on MalletCRFClassifier.","title":"How to conduct nested named entity recognition in OpenNLP?","body":"<p>For the purpose of Name Entity Recognition (Java based) I use the following:</p>\n\n<ol>\n<li>Apache UIMA</li>\n<li>ClearTK</li>\n</ol>\n\n<p><a href=\"https://github.com/merishav/cleartk-tutorials\" rel=\"nofollow\">https://github.com/merishav/cleartk-tutorials</a></p>\n\n<p>You can train models for your use case, I have already trained for NER for person, places, date of birth, profession.\nClearTK gives you a wrapper on MalletCRFClassifier.</p>\n"},{"tags":[],"owner":{"account_id":6437785,"reputation":5225,"user_id":5250620,"accept_rate":67,"display_name":"Haha TTpro"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1532491278,"creation_date":1532491278,"answer_id":51510597,"question_id":28011129,"body_markdown":"Use this python source code (Python 3) https://gist.github.com/ttpro1995/cd8c60cfc72416a02713bb93dff9ae6f \r\n\r\nIt&#39;s create multiple un-nest version of nest data for you. \r\n\r\nFor input sentence below ( input data must be tokenized first, so there are space between &lt;END&gt; and thing around it) \r\n\r\n    Remind me to &lt;START:reminder&gt; give some presents to &lt;START:contact&gt; John &lt;END&gt; and &lt;START:contact&gt; Charlie &lt;END&gt; &lt;END&gt; .\r\n\r\nIt output multiple sentence with different nest level. \r\n\r\n    Remind me to give some presents to John and Charlie .\r\n    Remind me to &lt;START:reminder&gt; give some presents to John and Charlie &lt;END&gt; .\r\n    Remind me to give some presents to &lt;START:contact&gt; John &lt;END&gt; and &lt;START:contact&gt; Charlie &lt;END&gt; .\r\n\r\nFull source code here for quick copy-paste\r\n\r\n\r\n    import sys\r\n    \r\n    END_TAG = 0\r\n    START_TAG = 1\r\n    NOT_TAG = -1\r\n    \r\n    def detect_tag(in_token):\r\n        &quot;&quot;&quot;\r\n        detect tag in token\r\n        :param in_token:\r\n        :return:\r\n        &quot;&quot;&quot;\r\n        if &quot;&lt;START:&quot; in in_token:\r\n            return START_TAG\r\n        elif &quot;&lt;END&gt;&quot; == in_token:\r\n            return END_TAG\r\n    \r\n        return NOT_TAG\r\n    \r\n    def remove_nest_tag(in_str):\r\n        &quot;&quot;&quot;\r\n        với &lt;START:ORGANIZATION&gt; Sở Cảnh s&#225;t Ph&#242;ng ch&#225;y , chữa ch&#225;y ( PCCC ) v&#224; cứu nạn , cứu hộ &lt;START:LOCATION&gt; H&#224; Nội &lt;END&gt; &lt;END&gt;\r\n        :param in_str:\r\n        :return:\r\n        &quot;&quot;&quot;\r\n        state = 0\r\n        taglist = []\r\n        tag_dict = dict()\r\n        sentence_token = in_str.split()\r\n        ## detect token tag\r\n        max_nest = 0\r\n    \r\n        for index, token in enumerate(sentence_token):\r\n            # print(token + str(detect_tag(token)))\r\n            tag = detect_tag(token)\r\n            if tag &gt; 0:\r\n                state += 1\r\n                if max_nest &lt; state:\r\n                    max_nest = state\r\n                token_info = (index, state, token)\r\n                taglist.append(token_info)\r\n                tag_dict[index] = token_info\r\n            elif tag == 0:\r\n                token_info = (index, state, token)\r\n                taglist.append(token_info)\r\n                tag_dict[index] = token_info\r\n                state -= 1\r\n    \r\n    \r\n        generate_sentences = []\r\n        for state in range(max_nest+1):\r\n            generate_sentence_token = []\r\n            for index, token in enumerate(sentence_token):\r\n                if detect_tag(token) &gt;= 0: # is a tag\r\n                    token_info = tag_dict[index]\r\n                    if token_info[1] == state:\r\n                        generate_sentence_token.append(token)\r\n                elif detect_tag(token) == -1 : # not a tag\r\n                    generate_sentence_token.append(token)\r\n            sentence = &#39; &#39;.join(generate_sentence_token)\r\n            generate_sentences.append(sentence)\r\n        return generate_sentences\r\n    \r\n    \r\n        # generate sentence\r\n        print(taglist)\r\n    \r\n    def test():\r\n        tstr2 = &quot;Remind me to &lt;START:reminder&gt; give some presents to &lt;START:contact&gt; John &lt;END&gt; and &lt;START:contact&gt; Charlie &lt;END&gt; &lt;END&gt; .&quot;\r\n        result = remove_nest_tag(tstr2)\r\n        print(&quot;-----&quot;)\r\n        for sentence in result:\r\n            print(sentence)\r\n    \r\n    if __name__ == &quot;__main__&quot;:\r\n        &quot;&quot;&quot;\r\n        un-nest dataset for opennlp name\r\n        &quot;&quot;&quot;\r\n        # test()\r\n        # test()\r\n        if len(sys.argv) &gt; 1:\r\n            inpath = sys.argv[1]\r\n            infile = open(inpath, &#39;r&#39;)\r\n            outfile = open(inpath+&quot;.out&quot;, &#39;w&#39;)\r\n            for line in infile:\r\n                sentences = remove_nest_tag(line)\r\n                for sentence in sentences:\r\n                    outfile.write(sentence+&quot;\\n&quot;)\r\n            outfile.close()\r\n        else:\r\n            print(&quot;usage: python unnest_data.py input.txt&quot;)\r\n\r\n\r\n\r\n\r\n","title":"How to conduct nested named entity recognition in OpenNLP?","body":"<p>Use this python source code (Python 3) <a href=\"https://gist.github.com/ttpro1995/cd8c60cfc72416a02713bb93dff9ae6f\" rel=\"nofollow noreferrer\">https://gist.github.com/ttpro1995/cd8c60cfc72416a02713bb93dff9ae6f</a> </p>\n\n<p>It's create multiple un-nest version of nest data for you. </p>\n\n<p>For input sentence below ( input data must be tokenized first, so there are space between  and thing around it) </p>\n\n<pre><code>Remind me to &lt;START:reminder&gt; give some presents to &lt;START:contact&gt; John &lt;END&gt; and &lt;START:contact&gt; Charlie &lt;END&gt; &lt;END&gt; .\n</code></pre>\n\n<p>It output multiple sentence with different nest level. </p>\n\n<pre><code>Remind me to give some presents to John and Charlie .\nRemind me to &lt;START:reminder&gt; give some presents to John and Charlie &lt;END&gt; .\nRemind me to give some presents to &lt;START:contact&gt; John &lt;END&gt; and &lt;START:contact&gt; Charlie &lt;END&gt; .\n</code></pre>\n\n<p>Full source code here for quick copy-paste</p>\n\n<pre><code>import sys\n\nEND_TAG = 0\nSTART_TAG = 1\nNOT_TAG = -1\n\ndef detect_tag(in_token):\n    \"\"\"\n    detect tag in token\n    :param in_token:\n    :return:\n    \"\"\"\n    if \"&lt;START:\" in in_token:\n        return START_TAG\n    elif \"&lt;END&gt;\" == in_token:\n        return END_TAG\n\n    return NOT_TAG\n\ndef remove_nest_tag(in_str):\n    \"\"\"\n    với &lt;START:ORGANIZATION&gt; Sở Cảnh sát Phòng cháy , chữa cháy ( PCCC ) và cứu nạn , cứu hộ &lt;START:LOCATION&gt; Hà Nội &lt;END&gt; &lt;END&gt;\n    :param in_str:\n    :return:\n    \"\"\"\n    state = 0\n    taglist = []\n    tag_dict = dict()\n    sentence_token = in_str.split()\n    ## detect token tag\n    max_nest = 0\n\n    for index, token in enumerate(sentence_token):\n        # print(token + str(detect_tag(token)))\n        tag = detect_tag(token)\n        if tag &gt; 0:\n            state += 1\n            if max_nest &lt; state:\n                max_nest = state\n            token_info = (index, state, token)\n            taglist.append(token_info)\n            tag_dict[index] = token_info\n        elif tag == 0:\n            token_info = (index, state, token)\n            taglist.append(token_info)\n            tag_dict[index] = token_info\n            state -= 1\n\n\n    generate_sentences = []\n    for state in range(max_nest+1):\n        generate_sentence_token = []\n        for index, token in enumerate(sentence_token):\n            if detect_tag(token) &gt;= 0: # is a tag\n                token_info = tag_dict[index]\n                if token_info[1] == state:\n                    generate_sentence_token.append(token)\n            elif detect_tag(token) == -1 : # not a tag\n                generate_sentence_token.append(token)\n        sentence = ' '.join(generate_sentence_token)\n        generate_sentences.append(sentence)\n    return generate_sentences\n\n\n    # generate sentence\n    print(taglist)\n\ndef test():\n    tstr2 = \"Remind me to &lt;START:reminder&gt; give some presents to &lt;START:contact&gt; John &lt;END&gt; and &lt;START:contact&gt; Charlie &lt;END&gt; &lt;END&gt; .\"\n    result = remove_nest_tag(tstr2)\n    print(\"-----\")\n    for sentence in result:\n        print(sentence)\n\nif __name__ == \"__main__\":\n    \"\"\"\n    un-nest dataset for opennlp name\n    \"\"\"\n    # test()\n    # test()\n    if len(sys.argv) &gt; 1:\n        inpath = sys.argv[1]\n        infile = open(inpath, 'r')\n        outfile = open(inpath+\".out\", 'w')\n        for line in infile:\n            sentences = remove_nest_tag(line)\n            for sentence in sentences:\n                outfile.write(sentence+\"\\n\")\n        outfile.close()\n    else:\n        print(\"usage: python unnest_data.py input.txt\")\n</code></pre>\n"}],"owner":{"account_id":4545909,"reputation":440,"user_id":3692525,"accept_rate":0,"display_name":"user1414202"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":985,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1692223689,"creation_date":1421593358,"question_id":28011129,"body_markdown":"I am currently working on a java web server project, that requires the use of Natural Language processing, specifically **Named Entity Recognition** (**NER**). \r\n\r\nI was using OpenNLP for java, since it was easy to add custom training data. It works perfectly. \r\n\r\nHowever, I need to also be able to extract entites inside of entities (**Nested named entity recognition**). I tried doing this in OpenNLP, but I got parsing errors. So my guess is that OpenNLP sadly does not support nested entities.\r\n\r\nHere is an example of what I need to parse:\r\n\r\nRemind me to **[START:reminder]** give some presents to **[START:contact]** John **[END]** and **[START:contact]** Charlie **[END][END]**.\r\n\r\nIf this cannot be achieved with OpenNLP, is there any other Java NLP Library that could do this. If there are no Java libraries at all, are there any NLP libraries in any other language that can do this?\r\n\r\nPlease help. Thanks!","title":"How to conduct nested named entity recognition in OpenNLP?","body":"<p>I am currently working on a java web server project, that requires the use of Natural Language processing, specifically <strong>Named Entity Recognition</strong> (<strong>NER</strong>). </p>\n\n<p>I was using OpenNLP for java, since it was easy to add custom training data. It works perfectly. </p>\n\n<p>However, I need to also be able to extract entites inside of entities (<strong>Nested named entity recognition</strong>). I tried doing this in OpenNLP, but I got parsing errors. So my guess is that OpenNLP sadly does not support nested entities.</p>\n\n<p>Here is an example of what I need to parse:</p>\n\n<p>Remind me to <strong>[START:reminder]</strong> give some presents to <strong>[START:contact]</strong> John <strong>[END]</strong> and <strong>[START:contact]</strong> Charlie <strong>[END][END]</strong>.</p>\n\n<p>If this cannot be achieved with OpenNLP, is there any other Java NLP Library that could do this. If there are no Java libraries at all, are there any NLP libraries in any other language that can do this?</p>\n\n<p>Please help. Thanks!</p>\n"},{"tags":["java","data-structures","minmax-heap"],"answers":[{"comments":[{"owner":{"account_id":12462,"reputation":162446,"user_id":24545,"accept_rate":99,"display_name":"Yuval Adam"},"score":2,"creation_date":1247062200,"post_id":1098286,"comment_id":912807,"body_markdown":"I need support for duplicate values... Set is &quot;a bit&quot; problematic in this aspect.","body":"I need support for duplicate values... Set is &quot;a bit&quot; problematic in this aspect."},{"owner":{"account_id":1207,"reputation":19992,"user_id":1605,"accept_rate":100,"display_name":"Avi"},"score":3,"creation_date":1247062364,"post_id":1098286,"comment_id":912823,"body_markdown":"-1 TreeSet implements most operations in O(log n) - the requirement was for peeking at the minimum and maximum in O(1).","body":"-1 TreeSet implements most operations in O(log n) - the requirement was for peeking at the minimum and maximum in O(1)."},{"owner":{"account_id":34025,"reputation":23628,"user_id":95725,"display_name":"NamshubWriter"},"score":0,"creation_date":1247062452,"post_id":1098286,"comment_id":912830,"body_markdown":"TreeSet also doesn&#39;t have a decreaseKey or increaseKey operation, which is one of the definitive operations of a heap. See http://en.wikipedia.org/wiki/Heap_(data_structure)","body":"TreeSet also doesn&#39;t have a decreaseKey or increaseKey operation, which is one of the definitive operations of a heap. See <a href=\"http://en.wikipedia.org/wiki/Heap_(data_structure)\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Heap_(data_structure)</a>"},{"owner":{"account_id":31622,"reputation":120351,"user_id":86989,"display_name":"newacct"},"score":1,"creation_date":1247078133,"post_id":1098286,"comment_id":914498,"body_markdown":"If you need to support duplicate values, you can use TreeBag (http://commons.apache.org/collections/api-release/org/apache/commons/collections/bag/TreeBag.html) from Apache Commons Collections, or TreeMultiset (http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/collect/TreeMultiset.html) from Google Collections. If you need to increaseKey or decreaseKey, you can simply remove the element and re-add it.","body":"If you need to support duplicate values, you can use TreeBag (<a href=\"http://commons.apache.org/collections/api-release/org/apache/commons/collections/bag/TreeBag.html\" rel=\"nofollow noreferrer\">commons.apache.org/collections/api-release/org/apache/commo&zwnj;&#8203;ns/&hellip;</a>) from Apache Commons Collections, or TreeMultiset (<a href=\"http://google-collections.googlecode.com/svn/trunk/javadoc/com/google/common/collect/TreeMultiset.html\" rel=\"nofollow noreferrer\">google-collections.googlecode.com/svn/trunk/javadoc/com/goo&zwnj;&#8203;gle/&hellip;</a>) from Google Collections. If you need to increaseKey or decreaseKey, you can simply remove the element and re-add it."},{"owner":{"account_id":876937,"reputation":9851,"user_id":99389,"display_name":"Nat"},"score":2,"creation_date":1247078290,"post_id":1098286,"comment_id":914508,"body_markdown":"Or use a TreeMap that maps keys to counts. TreeSet is actually implemented with a TreeMap under the hood.","body":"Or use a TreeMap that maps keys to counts. TreeSet is actually implemented with a TreeMap under the hood."},{"owner":{"account_id":4225608,"reputation":14192,"user_id":3459206,"accept_rate":90,"display_name":"Alex Salauyou"},"score":0,"creation_date":1467192638,"post_id":1098286,"comment_id":63625942,"body_markdown":"@YuvalAdam duplicate values and stable ordering may be implemented by replacing a key by `[key, stamp]` pair, so comparison is first performed on key, then on stamp. Though, `TreeSet` is not a replacement of max-min heap deque.","body":"@YuvalAdam duplicate values and stable ordering may be implemented by replacing a key by <code>[key, stamp]</code> pair, so comparison is first performed on key, then on stamp. Though, <code>TreeSet</code> is not a replacement of max-min heap deque."}],"tags":[],"owner":{"account_id":876937,"reputation":9851,"user_id":99389,"display_name":"Nat"},"comment_count":6,"down_vote_count":4,"up_vote_count":4,"is_accepted":false,"score":0,"last_activity_date":1247061946,"creation_date":1247061820,"answer_id":1098286,"question_id":1098277,"body_markdown":"The [java.util.TreeSet][1] class.\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/util/TreeSet.html","title":"Java implementation for Min-Max Heap?","body":"<p>The <a href=\"http://java.sun.com/javase/6/docs/api/java/util/TreeSet.html\" rel=\"nofollow noreferrer\">java.util.TreeSet</a> class.</p>\n"},{"tags":[],"owner":{"account_id":34025,"reputation":23628,"user_id":95725,"display_name":"NamshubWriter"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1692223608,"creation_date":1247063144,"answer_id":1098449,"question_id":1098277,"body_markdown":"How about [com.aliasi.util.MinMaxHeap][1]? This is part of [LingPipe][2]; unfortunately, the [licensing][3] may be a problem.\r\n\r\nSee [this related paper][4].\r\n\r\nDoesn&#39;t implement decreaseKey or increaseKey, though.\r\n\r\n\r\n  [1]: http://alias-i.com/lingpipe/docs/api/com/aliasi/util/MinMaxHeap.html\r\n  [2]: http://alias-i.com/lingpipe/\r\n  [3]: http://alias-i.com/lingpipe/web/download.html\r\n  [4]: https://web.archive.org/web/20090303072137/http://lingpipe-blog.com/2009/02/27/atkinson-sack-santoro-and-strothotte-1986-min-max-heaps-and-generalized-priority-queues-cacm/","title":"Java implementation for Min-Max Heap?","body":"<p>How about <a href=\"http://alias-i.com/lingpipe/docs/api/com/aliasi/util/MinMaxHeap.html\" rel=\"nofollow noreferrer\">com.aliasi.util.MinMaxHeap</a>? This is part of <a href=\"http://alias-i.com/lingpipe/\" rel=\"nofollow noreferrer\">LingPipe</a>; unfortunately, the <a href=\"http://alias-i.com/lingpipe/web/download.html\" rel=\"nofollow noreferrer\">licensing</a> may be a problem.</p>\n<p>See <a href=\"https://web.archive.org/web/20090303072137/http://lingpipe-blog.com/2009/02/27/atkinson-sack-santoro-and-strothotte-1986-min-max-heaps-and-generalized-priority-queues-cacm/\" rel=\"nofollow noreferrer\">this related paper</a>.</p>\n<p>Doesn't implement decreaseKey or increaseKey, though.</p>\n"},{"comments":[{"owner":{"account_id":149087,"reputation":18896,"user_id":361319,"accept_rate":62,"display_name":"dty"},"score":6,"creation_date":1284640567,"post_id":1098454,"comment_id":3934970,"body_markdown":"+1. This is a good answer given the stated requirements to peek the root in O(1) and remove it in O(log.n). Note however, that a PriorityQueue doesn&#39;t implement all heap operations (e.g. decreaseKey, increaseKey).","body":"+1. This is a good answer given the stated requirements to peek the root in O(1) and remove it in O(log.n). Note however, that a PriorityQueue doesn&#39;t implement all heap operations (e.g. decreaseKey, increaseKey)."},{"owner":{"account_id":1145527,"reputation":3387,"user_id":1128392,"accept_rate":90,"display_name":"erwaman"},"score":7,"creation_date":1464788887,"post_id":1098454,"comment_id":62628485,"body_markdown":"Note that the no-argument `remove()`, which removes from the head of the queue, is `O(log(n))`, whereas `remove(Object o)`, is `O(n)`. Reference: http://docs.oracle.com/javase/8/docs/api/java/util/PriorityQueue.html","body":"Note that the no-argument <code>remove()</code>, which removes from the head of the queue, is <code>O(log(n))</code>, whereas <code>remove(Object o)</code>, is <code>O(n)</code>. Reference: <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/PriorityQueue.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/api/java/util/PriorityQueue.ht&zwnj;&#8203;ml</a>"},{"owner":{"account_id":22848,"reputation":131598,"user_id":56778,"accept_rate":93,"display_name":"Jim Mischel"},"score":4,"creation_date":1471014835,"post_id":1098454,"comment_id":65199291,"body_markdown":"Downvoted because removal won&#39;t be O(log n) anymore. Removing the minimum from one of the queues is O(log n), but removing the identical item, which will be at the end of the other queue, is O(n).","body":"Downvoted because removal won&#39;t be O(log n) anymore. Removing the minimum from one of the queues is O(log n), but removing the identical item, which will be at the end of the other queue, is O(n)."},{"owner":{"account_id":9640511,"reputation":4079,"user_id":7154924,"accept_rate":86,"display_name":"flow2k"},"score":1,"creation_date":1533830518,"post_id":1098454,"comment_id":90501709,"body_markdown":"@JimMischel That was my thought, but then I realized we could still still make the two heap solution work in the following way. When we extract/peek max, we only do it from the max heap, and vice versa for min heap. This, of course, results in two inconsistent heaps. We keep track of the last max extracted and last min extracted, so that when they coincide, the data structure is empty. This would work if we don&#39;t need to support insertion and key changes (after extraction has been done), which the OP did not specify as requirements.","body":"@JimMischel That was my thought, but then I realized we could still still make the two heap solution work in the following way. When we extract/peek max, we only do it from the max heap, and vice versa for min heap. This, of course, results in two inconsistent heaps. We keep track of the last max extracted and last min extracted, so that when they coincide, the data structure is empty. This would work if we don&#39;t need to support insertion and key changes (after extraction has been done), which the OP did not specify as requirements."}],"tags":[],"owner":{"account_id":23164,"reputation":10784,"user_id":57827,"accept_rate":70,"display_name":"Il-Bhima"},"comment_count":4,"down_vote_count":5,"up_vote_count":33,"is_accepted":false,"score":28,"last_activity_date":1247063177,"creation_date":1247063177,"answer_id":1098454,"question_id":1098277,"body_markdown":"Instead of a max-min heap, could you use two instances of a [java.util.PriorityQueue&lt;E&gt;][1] containing the same elements?  The first instance would be passed a comparator which puts the maximum at the head, and the second instance would use a comparator which puts the minimum at the head.\r\n\r\nThe downside is that add, delete, etc would have to be performed on both structures, but it should satisfy your requirements.\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/util/PriorityQueue.html\r\n\r\n","title":"Java implementation for Min-Max Heap?","body":"<p>Instead of a max-min heap, could you use two instances of a <a href=\"http://java.sun.com/javase/6/docs/api/java/util/PriorityQueue.html\" rel=\"noreferrer\">java.util.PriorityQueue</a> containing the same elements?  The first instance would be passed a comparator which puts the maximum at the head, and the second instance would use a comparator which puts the minimum at the head.</p>\n\n<p>The downside is that add, delete, etc would have to be performed on both structures, but it should satisfy your requirements.</p>\n"},{"comments":[{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":1,"creation_date":1328219446,"post_id":9119753,"comment_id":11460583,"body_markdown":"Especially since the original question asked about google-collections, which is now Guava.","body":"Especially since the original question asked about google-collections, which is now Guava."},{"owner":{"account_id":4225608,"reputation":14192,"user_id":3459206,"accept_rate":90,"display_name":"Alex Salauyou"},"score":0,"creation_date":1467192830,"post_id":9119753,"comment_id":63626084,"body_markdown":"the only small disadvantage is lack of standard `Deque` implementation","body":"the only small disadvantage is lack of standard <code>Deque</code> implementation"},{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1467222871,"post_id":9119753,"comment_id":63647263,"body_markdown":"It doesn&#39;t satisfy the Deque contract, so that is working as intended.","body":"It doesn&#39;t satisfy the Deque contract, so that is working as intended."},{"owner":{"account_id":4225608,"reputation":14192,"user_id":3459206,"accept_rate":90,"display_name":"Alex Salauyou"},"score":0,"creation_date":1467232679,"post_id":9119753,"comment_id":63652723,"body_markdown":"could you please clarify, why? The only difficulty I&#39;m able to see is implementing `Deque#removeFirstOccurrence()` and `removeLastOccurence()` due to unstable nature of min-max heap","body":"could you please clarify, why? The only difficulty I&#39;m able to see is implementing <code>Deque#removeFirstOccurrence()</code> and <code>removeLastOccurence()</code> due to unstable nature of min-max heap"},{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":1,"creation_date":1467232782,"post_id":9119753,"comment_id":63652780,"body_markdown":"No, the issue is that deques have to stay in the order you put in the elements.  For example, the documentation of `Deque` specifies that when it is used like a queue, FIFO behavior results.  `MinMaxPriorityQueue` could technically implement the methods, but it could not satisfy the contract.","body":"No, the issue is that deques have to stay in the order you put in the elements.  For example, the documentation of <code>Deque</code> specifies that when it is used like a queue, FIFO behavior results.  <code>MinMaxPriorityQueue</code> could technically implement the methods, but it could not satisfy the contract."},{"owner":{"account_id":4148701,"reputation":15584,"user_id":3924118,"accept_rate":35,"display_name":"nbro"},"score":1,"creation_date":1489531816,"post_id":9119753,"comment_id":72710697,"body_markdown":"After having had a brief look at the Guava&#39;s `MinMaxPriorityQueue` source code, I realized that it does not implement a &quot;real&quot; _min-max heap_ (which very few people know about), but rather it simply implements a double-ended priority queue using two heaps, a min-heap and a max-heap, which are put together.","body":"After having had a brief look at the Guava&#39;s <code>MinMaxPriorityQueue</code> source code, I realized that it does not implement a &quot;real&quot; <i>min-max heap</i> (which very few people know about), but rather it simply implements a double-ended priority queue using two heaps, a min-heap and a max-heap, which are put together."}],"tags":[],"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"comment_count":6,"down_vote_count":1,"up_vote_count":41,"is_accepted":true,"score":40,"last_activity_date":1465342965,"creation_date":1328215554,"answer_id":9119753,"question_id":1098277,"body_markdown":"From Guava: [`MinMaxPriorityQueue`][1].\r\n\r\n\r\n  [1]: https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/MinMaxPriorityQueue.html","title":"Java implementation for Min-Max Heap?","body":"<p>From Guava: <a href=\"https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/collect/MinMaxPriorityQueue.html\" rel=\"noreferrer\"><code>MinMaxPriorityQueue</code></a>.</p>\n"},{"comments":[{"owner":{"account_id":8849825,"reputation":1346,"user_id":6609485,"display_name":"Michael Berdyshev"},"score":20,"creation_date":1488210793,"post_id":39681285,"comment_id":72119597,"body_markdown":"It&#39;s more convenient to use [Collections.reverseOrder()](https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#reverseOrder--) as an argument to PriorityQueue in MaxHeap class.","body":"It&#39;s more convenient to use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#reverseOrder--\" rel=\"nofollow noreferrer\">Collections.reverseOrder()</a> as an argument to PriorityQueue in MaxHeap class."},{"owner":{"account_id":7167179,"reputation":6034,"user_id":5475941,"display_name":"Mohammad"},"score":0,"creation_date":1488466150,"post_id":39681285,"comment_id":72251369,"body_markdown":"What do you mean by more convenient? Would you please explain more?","body":"What do you mean by more convenient? Would you please explain more?"},{"owner":{"account_id":8849825,"reputation":1346,"user_id":6609485,"display_name":"Michael Berdyshev"},"score":0,"creation_date":1488491804,"post_id":39681285,"comment_id":72267442,"body_markdown":"I think that _reverseOrder_ method is more clear to read and understand what it does comparing to `(x,y) -&gt; y-x`","body":"I think that <i>reverseOrder</i> method is more clear to read and understand what it does comparing to <code>(x,y) -&gt; y-x</code>"},{"owner":{"account_id":7167179,"reputation":6034,"user_id":5475941,"display_name":"Mohammad"},"score":0,"creation_date":1488510684,"post_id":39681285,"comment_id":72273757,"body_markdown":"Michael, the way that I did it, is the suggested way by Oracle. Oracle suggested using Comparator. Please look at this link: https://docs.oracle.com/javase/8/docs/api/java/util/PriorityQueue.html","body":"Michael, the way that I did it, is the suggested way by Oracle. Oracle suggested using Comparator. Please look at this link: <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/PriorityQueue.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/api/java/util/PriorityQueue.ht&zwnj;&#8203;ml</a>"},{"owner":{"account_id":8849825,"reputation":1346,"user_id":6609485,"display_name":"Michael Berdyshev"},"score":0,"creation_date":1488554605,"post_id":39681285,"comment_id":72297679,"body_markdown":"[Collections.reverseOrder()](https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#reverseOrder--) also returns a Comparator. So it can be used in the [PriorityQueue constructor](https://docs.oracle.com/javase/8/docs/api/java/util/PriorityQueue.html#PriorityQueue-java.util.Comparator-). Both methods work. But for me _reverseOrder_ is more evident. That&#39;s all.","body":"<a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html#reverseOrder--\" rel=\"nofollow noreferrer\">Collections.reverseOrder()</a> also returns a Comparator. So it can be used in the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/PriorityQueue.html#PriorityQueue-java.util.Comparator-\" rel=\"nofollow noreferrer\">PriorityQueue constructor</a>. Both methods work. But for me <i>reverseOrder</i> is more evident. That&#39;s all."},{"owner":{"account_id":7167179,"reputation":6034,"user_id":5475941,"display_name":"Mohammad"},"score":2,"creation_date":1488679890,"post_id":39681285,"comment_id":72337642,"body_markdown":"For this part, I used lambda expression (Java 8). However, this is based on preference. Your suggestion is also good. I appreciate your alternative.","body":"For this part, I used lambda expression (Java 8). However, this is based on preference. Your suggestion is also good. I appreciate your alternative."},{"owner":{"account_id":1992026,"reputation":2487,"user_id":4993386,"accept_rate":56,"display_name":"Ruifeng Ma"},"score":4,"creation_date":1524391665,"post_id":39681285,"comment_id":86945449,"body_markdown":"In the Lambda Expression, the comparison-by-subtraction trick could be easily broken due to [integer overflow](https://stackoverflow.com/questions/2728793/java-integer-compareto-why-use-comparison-vs-subtraction). Plain comparison is suggested: `(x, y) -&gt; x &lt; y ? -1 : x == y ? 0 : 1`","body":"In the Lambda Expression, the comparison-by-subtraction trick could be easily broken due to <a href=\"https://stackoverflow.com/questions/2728793/java-integer-compareto-why-use-comparison-vs-subtraction\">integer overflow</a>. Plain comparison is suggested: <code>(x, y) -&gt; x &lt; y ? -1 : x == y ? 0 : 1</code>"},{"owner":{"account_id":4185179,"reputation":1214,"user_id":3429103,"display_name":"ibra"},"score":0,"creation_date":1603717718,"post_id":39681285,"comment_id":114115641,"body_markdown":"@Mohammad ,  this is not what is required in the question. your answer is about min heap (or max heap). the Question is about min-max heap which is a data structure  that combine the positive points of min and max heap at same time to allow these operation : 1- get min  in O(1), get max in O(1). delete min in O(log n) , delete max in O(log n) .... etc. for more detail about this please see [min-max paper](http://akira.ruc.dk/~keld/teaching/algoritmedesign_f03/Artikler/02/Atkinson86.pdf)","body":"@Mohammad ,  this is not what is required in the question. your answer is about min heap (or max heap). the Question is about min-max heap which is a data structure  that combine the positive points of min and max heap at same time to allow these operation : 1- get min  in O(1), get max in O(1). delete min in O(log n) , delete max in O(log n) .... etc. for more detail about this please see <a href=\"http://akira.ruc.dk/~keld/teaching/algoritmedesign_f03/Artikler/02/Atkinson86.pdf\" rel=\"nofollow noreferrer\">min-max paper</a>"},{"owner":{"account_id":7167179,"reputation":6034,"user_id":5475941,"display_name":"Mohammad"},"score":0,"creation_date":1604265314,"post_id":39681285,"comment_id":114287807,"body_markdown":"@ibra The question asks about a data structure which can find the min and max in O(1) and remove an element in O(lgn). I am suggestion to use two heaps. One minheap and one maxheap with the same elements as a class Element. In this case, when you remove an element from maxheap, you can also remove it from the minheap. The space complexity of my solution is O(n) because we need to keep track of elements in the heap ds X2 (min and max). Also, the removing and adding elements will be O(lgn) (X2 which will be removed since 2 is a constant).","body":"@ibra The question asks about a data structure which can find the min and max in O(1) and remove an element in O(lgn). I am suggestion to use two heaps. One minheap and one maxheap with the same elements as a class Element. In this case, when you remove an element from maxheap, you can also remove it from the minheap. The space complexity of my solution is O(n) because we need to keep track of elements in the heap ds X2 (min and max). Also, the removing and adding elements will be O(lgn) (X2 which will be removed since 2 is a constant)."},{"owner":{"account_id":4185179,"reputation":1214,"user_id":3429103,"display_name":"ibra"},"score":0,"creation_date":1604321868,"post_id":39681285,"comment_id":114303601,"body_markdown":"@Mohammad, Using two heaps (min heap + max heap) doesn&#39;t work. **The problem is deleting the same element is O(log n) from first heap, but it is O(n) from the second heap**. Example: **delete the min value** which is **in the min heap** at the top, and after we rebalance the heap *this take O(log n)**. Now we have to **delete the same element form Max heap** (Max at the top), we have to search for the min value and delete it and rebalance the heap **this take (0.5 n + log n) which is O(n)**. you ended with O(log n) + O(n) which is O(n) for deletion.","body":"@Mohammad, Using two heaps (min heap + max heap) doesn&#39;t work. <b>The problem is deleting the same element is O(log n) from first heap, but it is O(n) from the second heap</b>. Example: <b>delete the min value</b> which is <b>in the min heap</b> at the top, and after we rebalance the heap <i>this take O(log n)*</i>. Now we have to <b>delete the same element form Max heap</b> (Max at the top), we have to search for the min value and delete it and rebalance the heap <b>this take (0.5 n + log n) which is O(n)</b>. you ended with O(log n) + O(n) which is O(n) for deletion."},{"owner":{"account_id":7167179,"reputation":6034,"user_id":5475941,"display_name":"Mohammad"},"score":0,"creation_date":1604360150,"post_id":39681285,"comment_id":114319212,"body_markdown":"@ibra if you keep track of the objects in a map and then you put them in both heaps, then when you remove you can also remove it from the other heap (you remove one object from two heaps). This is a nice feature of Java. Almost everything is an object. This problem can be solved by two heaps. Basically, the min-max heap is a priority queue that allows you to remove elements from both sides min or max sides. You can implement this with basic data structures.","body":"@ibra if you keep track of the objects in a map and then you put them in both heaps, then when you remove you can also remove it from the other heap (you remove one object from two heaps). This is a nice feature of Java. Almost everything is an object. This problem can be solved by two heaps. Basically, the min-max heap is a priority queue that allows you to remove elements from both sides min or max sides. You can implement this with basic data structures."},{"owner":{"account_id":4185179,"reputation":1214,"user_id":3429103,"display_name":"ibra"},"score":0,"creation_date":1604421060,"post_id":39681285,"comment_id":114339874,"body_markdown":"@Mohammad, So **you agree that the use of only the min heap + max heap alone doesn&#39;t solve the problem.** I suggest to update your post with the complete solution. **Using Map with the two min heap and max heap, doesn&#39;t solve the problem either. ** 1) Problem of duplicate values, 2) When you delete an object, it&#39;s reference will be null at the two heap, you have to find them in the two heap (one at the top, and the other search for it...) in order to balance the two heaps.","body":"@Mohammad, So <b>you agree that the use of only the min heap + max heap alone doesn&#39;t solve the problem.</b> I suggest to update your post with the complete solution. **Using Map with the two min heap and max heap, doesn&#39;t solve the problem either. ** 1) Problem of duplicate values, 2) When you delete an object, it&#39;s reference will be null at the two heap, you have to find them in the two heap (one at the top, and the other search for it...) in order to balance the two heaps."},{"owner":{"account_id":4185179,"reputation":1214,"user_id":3429103,"display_name":"ibra"},"score":0,"creation_date":1604421112,"post_id":39681285,"comment_id":114339897,"body_markdown":"@Mohammad, Possible solution\npbm 1) you can use [multimap](https://stackoverflow.com/questions/1062960/map-implementation-with-duplicate-keys));  \npbm 2) for each value, you have to keep also their references in the two heaps (or index when using array) to balance the two heap. So, whith n values, you will have 3n (value, ref in min heap, and ref in max heap). **You will end with complicated solution with 5n space**, and I don&#39;t know if it work in all cases.\nThe simplest and the efficient solution is the min-max heap as a commented before. good luck.","body":"@Mohammad, Possible solution pbm 1) you can use <a href=\"https://stackoverflow.com/questions/1062960/map-implementation-with-duplicate-keys\">multimap</a>);   pbm 2) for each value, you have to keep also their references in the two heaps (or index when using array) to balance the two heap. So, whith n values, you will have 3n (value, ref in min heap, and ref in max heap). <b>You will end with complicated solution with 5n space</b>, and I don&#39;t know if it work in all cases. The simplest and the efficient solution is the min-max heap as a commented before. good luck."},{"owner":{"account_id":7167179,"reputation":6034,"user_id":5475941,"display_name":"Mohammad"},"score":0,"creation_date":1604450852,"post_id":39681285,"comment_id":114350705,"body_markdown":"@ibra 1n or 2n or 10,000n is the O(n) space complexity. You need a data structure with complexity of O(n) for this problem. How do you think Oracle creates different complicated data structures? They mix simple ones and make the more complicated ones. Please be creative in solving problems. Not always Oracle needs to give us exactly what we want. Sometimes it is a good practice to even implement your own data structures like min or max heap. Also, for the Big O notation, please read https://en.wikipedia.org/wiki/Big_O_notation . The constants are getting removed always.","body":"@ibra 1n or 2n or 10,000n is the O(n) space complexity. You need a data structure with complexity of O(n) for this problem. How do you think Oracle creates different complicated data structures? They mix simple ones and make the more complicated ones. Please be creative in solving problems. Not always Oracle needs to give us exactly what we want. Sometimes it is a good practice to even implement your own data structures like min or max heap. Also, for the Big O notation, please read <a href=\"https://en.wikipedia.org/wiki/Big_O_notation\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Big_O_notation</a> . The constants are getting removed always."},{"owner":{"account_id":4185179,"reputation":1214,"user_id":3429103,"display_name":"ibra"},"score":0,"creation_date":1604495659,"post_id":39681285,"comment_id":114363783,"body_markdown":"Yes indeed, constant are removed from the asymptotic complexity, you are right :). My points are, 1) using two heap alone doesn&#39;t solve the problem; 2) adding other data structure, may solve the problem; the solution will be complicated. 3) **From practical perspective**, we can compare the complexity with the constant like in the [min-max paper](http://akira.ruc.dk/~keld/teaching/algoritmedesign_f03/Artikler/02/Atkinson86.pdf) in order to show the difference (example: in parallelism we say: we achieve a speed up of  20x faster....)    4) We choose the simplest solution if it exit.","body":"Yes indeed, constant are removed from the asymptotic complexity, you are right :). My points are, 1) using two heap alone doesn&#39;t solve the problem; 2) adding other data structure, may solve the problem; the solution will be complicated. 3) <b>From practical perspective</b>, we can compare the complexity with the constant like in the <a href=\"http://akira.ruc.dk/~keld/teaching/algoritmedesign_f03/Artikler/02/Atkinson86.pdf\" rel=\"nofollow noreferrer\">min-max paper</a> in order to show the difference (example: in parallelism we say: we achieve a speed up of  20x faster....)    4) We choose the simplest solution if it exit."},{"owner":{"account_id":4185179,"reputation":1214,"user_id":3429103,"display_name":"ibra"},"score":0,"creation_date":1604495738,"post_id":39681285,"comment_id":114363810,"body_markdown":"**Dear @Mohammad , thank you very much for all your responses, I really appreciate that**. And please don&#39;t be angry, my goal is only to discuss the solution in your post of using two heaps.\nThank you very much :) and good luck. ;)","body":"<b>Dear @Mohammad , thank you very much for all your responses, I really appreciate that</b>. And please don&#39;t be angry, my goal is only to discuss the solution in your post of using two heaps. Thank you very much :) and good luck. ;)"}],"tags":[],"owner":{"account_id":7167179,"reputation":6034,"user_id":5475941,"display_name":"Mohammad"},"comment_count":16,"down_vote_count":4,"up_vote_count":43,"is_accepted":false,"score":39,"last_activity_date":1647192416,"creation_date":1474753866,"answer_id":39681285,"question_id":1098277,"body_markdown":"Java has good tools in order to implement min and max heaps. My suggestion is using the priority queue data structure in order to implement these heaps. For implementing the max heap with priority queue try this: \r\n\r\n    import java.util.PriorityQueue;\r\n    \r\n    public class MaxHeapWithPriorityQueue {\r\n    \r\n        public static void main(String args[]) {\r\n        // create priority queue\r\n        PriorityQueue&lt;Integer&gt; prq = new PriorityQueue&lt;&gt;(Collections.reverseOrder());\r\n\r\n        // insert values in the queue\r\n        prq.add(6);\r\n        prq.add(9);\r\n        prq.add(5);\r\n        prq.add(64);\r\n        prq.add(6);\r\n\r\n        //print values\r\n        while (!prq.isEmpty()) {\r\n            System.out.print(prq.poll()+&quot; &quot;);\r\n        }\r\n        }\r\n    \r\n    }\r\n\r\nFor implementing the min heap with priority queue, try this:\r\n\r\n    import java.util.PriorityQueue;\r\n    \r\n    public class MinHeapWithPriorityQueue {\r\n    \r\n        public static void main(String args[]) {\r\n            // create priority queue\r\n            PriorityQueue&lt; Integer &gt; prq = new PriorityQueue &lt;&gt; ();\r\n    \r\n            // insert values in the queue\r\n            prq.add(6);\r\n            prq.add(9);\r\n            prq.add(5);\r\n            prq.add(64);\r\n            prq.add(6);\r\n    \r\n            //print values\r\n            while (!prq.isEmpty()) {\r\n                System.out.print(prq.poll()+&quot; &quot;);\r\n            }\r\n        }\r\n    \r\n    }\r\n\r\nFor more information, please visit:\r\n\r\n- [https://github.com/m-vahidalizadeh/foundations/blob/master/src/data_structures/MaxHeapWithPriorityQueue.java][1]\r\n\r\n- [https://github.com/m-vahidalizadeh/foundations/blob/master/src/data_structures/MinHeapWithPriorityQueue.java][2]\r\n\r\n\r\n  [1]: https://github.com/m-vahidalizadeh/foundations/blob/master/src/data_structures/MaxHeapWithPriorityQueue.java\r\n  [2]: https://github.com/m-vahidalizadeh/foundations/blob/master/src/data_structures/MinHeapWithPriorityQueue.java","title":"Java implementation for Min-Max Heap?","body":"<p>Java has good tools in order to implement min and max heaps. My suggestion is using the priority queue data structure in order to implement these heaps. For implementing the max heap with priority queue try this:</p>\n<pre><code>import java.util.PriorityQueue;\n\npublic class MaxHeapWithPriorityQueue {\n\n    public static void main(String args[]) {\n    // create priority queue\n    PriorityQueue&lt;Integer&gt; prq = new PriorityQueue&lt;&gt;(Collections.reverseOrder());\n\n    // insert values in the queue\n    prq.add(6);\n    prq.add(9);\n    prq.add(5);\n    prq.add(64);\n    prq.add(6);\n\n    //print values\n    while (!prq.isEmpty()) {\n        System.out.print(prq.poll()+&quot; &quot;);\n    }\n    }\n\n}\n</code></pre>\n<p>For implementing the min heap with priority queue, try this:</p>\n<pre><code>import java.util.PriorityQueue;\n\npublic class MinHeapWithPriorityQueue {\n\n    public static void main(String args[]) {\n        // create priority queue\n        PriorityQueue&lt; Integer &gt; prq = new PriorityQueue &lt;&gt; ();\n\n        // insert values in the queue\n        prq.add(6);\n        prq.add(9);\n        prq.add(5);\n        prq.add(64);\n        prq.add(6);\n\n        //print values\n        while (!prq.isEmpty()) {\n            System.out.print(prq.poll()+&quot; &quot;);\n        }\n    }\n\n}\n</code></pre>\n<p>For more information, please visit:</p>\n<ul>\n<li><p><a href=\"https://github.com/m-vahidalizadeh/foundations/blob/master/src/data_structures/MaxHeapWithPriorityQueue.java\" rel=\"noreferrer\">https://github.com/m-vahidalizadeh/foundations/blob/master/src/data_structures/MaxHeapWithPriorityQueue.java</a></p>\n</li>\n<li><p><a href=\"https://github.com/m-vahidalizadeh/foundations/blob/master/src/data_structures/MinHeapWithPriorityQueue.java\" rel=\"noreferrer\">https://github.com/m-vahidalizadeh/foundations/blob/master/src/data_structures/MinHeapWithPriorityQueue.java</a></p>\n</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":7363675,"reputation":1478,"user_id":5606133,"accept_rate":50,"display_name":"Vip"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1610780117,"creation_date":1610780117,"answer_id":65747202,"question_id":1098277,"body_markdown":"**Min Heap:**\r\nPriorityQueue&lt;Integer&gt; minHeap= new PriorityQueue&lt;&gt;();\r\n\r\n\r\n**Max Heap**\r\nPriorityQueue&lt;Integer&gt; maxHeap= new PriorityQueue&lt;&gt;(Comparator.reverseOrder());","title":"Java implementation for Min-Max Heap?","body":"<p><strong>Min Heap:</strong>\nPriorityQueue minHeap= new PriorityQueue&lt;&gt;();</p>\n<p><strong>Max Heap</strong>\nPriorityQueue maxHeap= new PriorityQueue&lt;&gt;(Comparator.reverseOrder());</p>\n"},{"tags":[],"owner":{"account_id":12592909,"reputation":1061,"user_id":9158840,"display_name":"Fahad Israr"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1651783283,"creation_date":1651783283,"answer_id":72133418,"question_id":1098277,"body_markdown":"Well you can simply pass the comparator to be used to compare elements. This will become useful even when you want to sort objects based on some attributes. Look at the following examples: \r\n\r\n\r\n- ***Min Heap :***\r\n\r\n      PriorityQueue&lt;Integer&gt; pq = new PriorityQueue&lt;&gt;((a,b) -&gt; a - b);\r\n    ----------\r\n\r\n\r\n- ***Max Heap :***\r\n\r\n      PriorityQueue&lt;Integer&gt; pq = new PriorityQueue&lt;&gt;((a,b) -&gt; b - a);\r\n----------\r\n\r\n\r\n- ***Min Heap for Objects***\r\n\r\n      PriorityQueue&lt;MyObject&gt; pq = new PriorityQueue&lt;&gt;((obj1, obj2) -&gt; obj1.getId() - obj2.getId());\r\n----------\r\n\r\n\r\n- ***Max Heap for Objects***\r\n\r\n      PriorityQueue&lt;MyObject&gt; pq = new PriorityQueue&lt;&gt;((obj1, obj2) -&gt; obj2.getId() - obj1.getId());\r\n----------\r\n\r\n\r\n","title":"Java implementation for Min-Max Heap?","body":"<p>Well you can simply pass the comparator to be used to compare elements. This will become useful even when you want to sort objects based on some attributes. Look at the following examples:</p>\n<ul>\n<li><p><em><strong>Min Heap :</strong></em></p>\n<pre><code>PriorityQueue&lt;Integer&gt; pq = new PriorityQueue&lt;&gt;((a,b) -&gt; a - b);\n</code></pre>\n<hr />\n</li>\n<li><p><em><strong>Max Heap :</strong></em></p>\n<pre><code>PriorityQueue&lt;Integer&gt; pq = new PriorityQueue&lt;&gt;((a,b) -&gt; b - a);\n</code></pre>\n</li>\n</ul>\n<hr />\n<ul>\n<li><p><em><strong>Min Heap for Objects</strong></em></p>\n<pre><code>PriorityQueue&lt;MyObject&gt; pq = new PriorityQueue&lt;&gt;((obj1, obj2) -&gt; obj1.getId() - obj2.getId());\n</code></pre>\n</li>\n</ul>\n<hr />\n<ul>\n<li><p><em><strong>Max Heap for Objects</strong></em></p>\n<pre><code>PriorityQueue&lt;MyObject&gt; pq = new PriorityQueue&lt;&gt;((obj1, obj2) -&gt; obj2.getId() - obj1.getId());\n</code></pre>\n</li>\n</ul>\n<hr />\n"}],"owner":{"account_id":12462,"reputation":162446,"user_id":24545,"accept_rate":99,"display_name":"Yuval Adam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":105867,"favorite_count":0,"down_vote_count":1,"up_vote_count":49,"accepted_answer_id":9119753,"answer_count":7,"score":48,"last_activity_date":1692223608,"creation_date":1247061726,"question_id":1098277,"body_markdown":"Do you know of a popular library (Apache, Google, etc, collections) which has a reliable Java implementation for a min-max heap, that is a heap which allows to peek its minimum and maximum value in `O(1)` and to remove an element in `O(log n)`?","title":"Java implementation for Min-Max Heap?","body":"<p>Do you know of a popular library (Apache, Google, etc, collections) which has a reliable Java implementation for a min-max heap, that is a heap which allows to peek its minimum and maximum value in <code>O(1)</code> and to remove an element in <code>O(log n)</code>?</p>\n"},{"tags":["java","performance","optimization","jvm-hotspot","bounds-check-elimination"],"comments":[{"owner":{"account_id":7351,"reputation":36092,"user_id":12748,"display_name":"ShuggyCoUk"},"score":0,"creation_date":1253013209,"post_id":1352422,"comment_id":1270189,"body_markdown":"some notes. you may want to create the cachedHashTable on construction (of the class if it is static) If this is per thread then this should be made clear in the api (I.E. the user is responsible for creating a specific instance of the compressor and that holds the cached table. The branch prediction will liekly get it right but you may get some benefit from this getting into the later generations faster as well as simplifying the code.","body":"some notes. you may want to create the cachedHashTable on construction (of the class if it is static) If this is per thread then this should be made clear in the api (I.E. the user is responsible for creating a specific instance of the compressor and that holds the cached table. The branch prediction will liekly get it right but you may get some benefit from this getting into the later generations faster as well as simplifying the code."},{"owner":{"account_id":7351,"reputation":36092,"user_id":12748,"display_name":"ShuggyCoUk"},"score":0,"creation_date":1253013443,"post_id":1352422,"comment_id":1270206,"body_markdown":"a nasty hack - but given that you&#39;re doing something nasty with it anyway. you don&#39;t need to decrement ref by 2 unless it is actually used, and it is only used ion one place after (within an if statement) so simply try: while (len &lt; maxLen &amp;&amp; in[ref + len - 2] and remove the ref -= 2","body":"a nasty hack - but given that you&#39;re doing something nasty with it anyway. you don&#39;t need to decrement ref by 2 unless it is actually used, and it is only used ion one place after (within an if statement) so simply try: while (len &lt; maxLen &amp;&amp; in[ref + len - 2] and remove the ref -= 2"},{"owner":{"account_id":33857,"reputation":19882,"user_id":95122,"accept_rate":88,"display_name":"BobMcGee"},"score":0,"creation_date":1253030517,"post_id":1352422,"comment_id":1271879,"body_markdown":"Yuck, yeah, that is kind of nasty. I&#39;ve got a couple other nasty hacks I can do too.  If you think the code is bad here, you should see the original, though!","body":"Yuck, yeah, that is kind of nasty. I&#39;ve got a couple other nasty hacks I can do too.  If you think the code is bad here, you should see the original, though!"},{"owner":{"account_id":33857,"reputation":19882,"user_id":95122,"accept_rate":88,"display_name":"BobMcGee"},"score":0,"creation_date":1253030805,"post_id":1352422,"comment_id":1271905,"body_markdown":"I&#39;ve got a version that pre-initializes the hashtable, and uses a range check on the possible backref.  But, with short in/out buffers (8192 kB is common, when compressing streams), there is a benefit to being able to quickly eliminate possible backrefs when the ref is 0.","body":"I&#39;ve got a version that pre-initializes the hashtable, and uses a range check on the possible backref.  But, with short in/out buffers (8192 kB is common, when compressing streams), there is a benefit to being able to quickly eliminate possible backrefs when the ref is 0."},{"owner":{"account_id":68904,"reputation":1177,"user_id":200802,"display_name":"charstar"},"score":0,"creation_date":1289435724,"post_id":1352422,"comment_id":4478623,"body_markdown":"+1 I have been scouring docs on several free JVMs and cannot find any clear mention of how and when SIMD (SSE etc) are used by the JVM/JIT. Only that they do indeed use them since 1.4.2. Compiler / JVM developers definitely gun down any idea of &quot;providing hints&quot; or &quot;optimizing for&quot; via code structure. There were some Snorcle JVM patches in 6u2 referencing &quot;SIMD optimizations&quot; in bug 6536652; if you follow the related bug links, it _appears_ that the JVM will do some rudimentary loop parallelization but details of the actual implementation and its use are scarce.","body":"+1 I have been scouring docs on several free JVMs and cannot find any clear mention of how and when SIMD (SSE etc) are used by the JVM/JIT. Only that they do indeed use them since 1.4.2. Compiler / JVM developers definitely gun down any idea of &quot;providing hints&quot; or &quot;optimizing for&quot; via code structure. There were some Snorcle JVM patches in 6u2 referencing &quot;SIMD optimizations&quot; in bug 6536652; if you follow the related bug links, it <i>appears</i> that the JVM will do some rudimentary loop parallelization but details of the actual implementation and its use are scarce."}],"answers":[{"comments":[{"owner":{"account_id":33857,"reputation":19882,"user_id":95122,"accept_rate":88,"display_name":"BobMcGee"},"score":0,"creation_date":1252943176,"post_id":1413484,"comment_id":1265773,"body_markdown":"Good answer (best so far)!  Do you know any sites that provide info about the cycles required for specific assembly commands?  Or advice about how bytecode maps to x86 assembly?  I don&#39;t know that much about assembly.\n\nVTune is a little beyond my budget right now (heh), although I&#39;ll keep it in mind for the future. \n \nI&#39;m working on a version with more predictable array access, and less array fetches.  There is zero object allocation, but the branches in code are more complex.  Are constant additions (var2 = var1+2, for example) likely to be optimized heavily?","body":"Good answer (best so far)!  Do you know any sites that provide info about the cycles required for specific assembly commands?  Or advice about how bytecode maps to x86 assembly?  I don&#39;t know that much about assembly.  VTune is a little beyond my budget right now (heh), although I&#39;ll keep it in mind for the future.    I&#39;m working on a version with more predictable array access, and less array fetches.  There is zero object allocation, but the branches in code are more complex.  Are constant additions (var2 = var1+2, for example) likely to be optimized heavily?"},{"owner":{"account_id":7351,"reputation":36092,"user_id":12748,"display_name":"ShuggyCoUk"},"score":0,"creation_date":1252945945,"post_id":1413484,"comment_id":1266032,"body_markdown":"cycles per instruction are no longer a meaningful metirc since it is heavily dependent on the interaction with other instructions and dependencies, cache availability, and OOE along with pipeline depth.\nThe jit mapping is *way* more complex that &quot;X byte code =&gt; Y x86&quot;.\nsequential array access is good but the branchiness may need to provide &gt; linear speed up for this to pay off significantly.\nAny compie time constants are folded by the compiler.","body":"cycles per instruction are no longer a meaningful metirc since it is heavily dependent on the interaction with other instructions and dependencies, cache availability, and OOE along with pipeline depth. The jit mapping is <i>way</i> more complex that &quot;X byte code =&gt; Y x86&quot;. sequential array access is good but the branchiness may need to provide &gt; linear speed up for this to pay off significantly. Any compie time constants are folded by the compiler."},{"owner":{"account_id":7351,"reputation":36092,"user_id":12748,"display_name":"ShuggyCoUk"},"score":0,"creation_date":1252946037,"post_id":1413484,"comment_id":1266043,"body_markdown":"Addition of a variable constant may not make a significant difference except the compiler may be able to effectively share this value in a register if it is used often. \nFree profilers are available for java. You should at least look at some of them, http://code.google.com/p/oktech-profiler/ is open source, free and has a sampling mode.","body":"Addition of a variable constant may not make a significant difference except the compiler may be able to effectively share this value in a register if it is used often.  Free profilers are available for java. You should at least look at some of them, <a href=\"http://code.google.com/p/oktech-profiler/\" rel=\"nofollow noreferrer\">code.google.com/p/oktech-profiler</a> is open source, free and has a sampling mode."},{"owner":{"account_id":33857,"reputation":19882,"user_id":95122,"accept_rate":88,"display_name":"BobMcGee"},"score":0,"creation_date":1252955685,"post_id":1413484,"comment_id":1266865,"body_markdown":"I figured the bytecode mapping might be complex -- trying to simplify dependencies here where possible, but not sure how well it will work.    \n\nGood to know that the additions do not pose problems -- they&#39;re just constants offsets relative to changing variables. \n\nI&#39;ve done profiling, but it can&#39;t help further -- roughly 99% of runtime lives in the compression loop(s) and System.arraycopy to copy literal runs to output.\n\nCan you give any more info about how to approach optimizing for the cache and maximal pipeline depth, from the end of java source?","body":"I figured the bytecode mapping might be complex -- trying to simplify dependencies here where possible, but not sure how well it will work.      Good to know that the additions do not pose problems -- they&#39;re just constants offsets relative to changing variables.   I&#39;ve done profiling, but it can&#39;t help further -- roughly 99% of runtime lives in the compression loop(s) and System.arraycopy to copy literal runs to output.  Can you give any more info about how to approach optimizing for the cache and maximal pipeline depth, from the end of java source?"},{"owner":{"account_id":7351,"reputation":36092,"user_id":12748,"display_name":"ShuggyCoUk"},"score":0,"creation_date":1252967622,"post_id":1413484,"comment_id":1267800,"body_markdown":"optimizing for cache sizes is simplest buy taking any and all buffers used and tweaking their sizes in relation to the size and associativity of your test machines and investigating the effects. (it&#39;s more complex but this can give you a start).  \npipeline usage is likely to be entirely dependent on the jit unless you can alter the algorithm to do a sort of vectorisation whereby you take something like A1B1C1A2B2C2. where C depends on B which depends on A and do A1A2B1B2C1C2 instead\narraycopy doesn&#39;t sound great, why do you have to work in scratch space, can you not work in the output buffer?","body":"optimizing for cache sizes is simplest buy taking any and all buffers used and tweaking their sizes in relation to the size and associativity of your test machines and investigating the effects. (it&#39;s more complex but this can give you a start).   pipeline usage is likely to be entirely dependent on the jit unless you can alter the algorithm to do a sort of vectorisation whereby you take something like A1B1C1A2B2C2. where C depends on B which depends on A and do A1A2B1B2C1C2 instead arraycopy doesn&#39;t sound great, why do you have to work in scratch space, can you not work in the output buffer?"},{"owner":{"account_id":33857,"reputation":19882,"user_id":95122,"accept_rate":88,"display_name":"BobMcGee"},"score":0,"creation_date":1252969550,"post_id":1413484,"comment_id":1267899,"body_markdown":"So, I can&#39;t do anything besides optimize buffers to encourage cache use? \n\nThe only buffers involved are input and output buffers. Bytes are processed in sequence from input, and either used to increase the length of an incompressible run of literals, or a backreference to previous bytes (compression).  Once either run has to end, it is written out (using arraycopy for literal runs) to the output buffer.\n----------------------------------\nI think this can be vectorized by packing to int/long, but this would make the branching extremely complex and add un-used array accesses.","body":"So, I can&#39;t do anything besides optimize buffers to encourage cache use?   The only buffers involved are input and output buffers. Bytes are processed in sequence from input, and either used to increase the length of an incompressible run of literals, or a backreference to previous bytes (compression).  Once either run has to end, it is written out (using arraycopy for literal runs) to the output buffer. ---------------------------------- I think this can be vectorized by packing to int/long, but this would make the branching extremely complex and add un-used array accesses."},{"owner":{"account_id":33857,"reputation":19882,"user_id":95122,"accept_rate":88,"display_name":"BobMcGee"},"score":0,"creation_date":1252970974,"post_id":1413484,"comment_id":1267974,"body_markdown":"I&#39;ve posted an *early* version of the code (not the most recent one, which uses a FOR loop to step through the input buffer predictably. That one is still in debugging.","body":"I&#39;ve posted an <i>early</i> version of the code (not the most recent one, which uses a FOR loop to step through the input buffer predictably. That one is still in debugging."},{"owner":{"account_id":7351,"reputation":36092,"user_id":12748,"display_name":"ShuggyCoUk"},"score":0,"creation_date":1253012589,"post_id":1413484,"comment_id":1270137,"body_markdown":"The arraycopy for literal runs is likely not something you can beat unless the common literal length is small (I would think at least less than 16bytes, perhaps less). Encouraging good cache use is about making the data you access close, It is likely in your case that the main issue is how you structure your &#39;look back&#39; strutures based on how they are interogatted","body":"The arraycopy for literal runs is likely not something you can beat unless the common literal length is small (I would think at least less than 16bytes, perhaps less). Encouraging good cache use is about making the data you access close, It is likely in your case that the main issue is how you structure your &#39;look back&#39; strutures based on how they are interogatted"},{"owner":{"account_id":33857,"reputation":19882,"user_id":95122,"accept_rate":88,"display_name":"BobMcGee"},"score":0,"creation_date":1253030401,"post_id":1413484,"comment_id":1271870,"body_markdown":"Yeah, the arraycopy is actually pretty optimal in modern JVMs. The latest HotSpot releases use hand-tuned assembly here, and are about 2x as fast copying 32 items. \n\nI don&#39;t think I can optimize look-back structures much,  without adding copying to a cache-able small buffer (additional copy cost), or something.  I&#39;ll see with the restructured loop.","body":"Yeah, the arraycopy is actually pretty optimal in modern JVMs. The latest HotSpot releases use hand-tuned assembly here, and are about 2x as fast copying 32 items.   I don&#39;t think I can optimize look-back structures much,  without adding copying to a cache-able small buffer (additional copy cost), or something.  I&#39;ll see with the restructured loop."}],"tags":[],"owner":{"account_id":7351,"reputation":36092,"user_id":12748,"display_name":"ShuggyCoUk"},"comment_count":9,"down_vote_count":0,"up_vote_count":19,"is_accepted":true,"score":19,"last_activity_date":1371989437,"creation_date":1252706414,"answer_id":1413484,"question_id":1352422,"body_markdown":"Not a full answer, I simply don&#39;t have time to do the detailed benchmarks your question needs but hopefully useful.\r\n\r\n### Know your enemy\r\nYou are targeting a combination of the JVM (in essence the JIT) and the underlying CPU/Memory subsystem. Thus &quot;This is faster on JVM X&quot; is not likely to be valid in all cases as you move into more aggressive optimisations.\r\n\r\nIf your target market/application will largely run on a particular architecture you should consider investing in tools specific to it.\r\n  * If your performance on x86 is the critical factor then intel&#39;s [VTune](http://software.intel.com/en-us/intel-vtune/) is excellent for drilling down into the sort of [jit output analysis](http://software.intel.com/en-us/articles/identifying-jvm-vectorization-simd-usage-with-the-vtunetm-performance-analyzer/) you describe. \r\n * The differences between 64 bit and 32 bit JITs can be considerable, especially on x86 platforms where calling conventions can change and [enregistering](http://en.wikipedia.org/wiki/Register_allocation) opportunities are very different.\r\n\r\n### Get the right tools\r\nYou would likely want to get a sampling profiler. The overhead of instrumentation (and the associated knock on on things like inlining, cache pollution and code size inflation) for your specific needs would be far too great. The intel VTune analyser can actually be used for Java though the integration is not so tight as others.  \r\nIf you are using the sun JVM and are happy only knowing what the latest/greatest version is doing then the options available to [investigate the output of the JIT](https://wikis.oracle.com/display/HotSpotInternals/PrintAssembly) are considerable if you know a bit of assembly.\r\nThis [article details some interesting analysis using this functionality](http://weblogs.java.net/blog/kohsuke/archive/2008/03/deep_dive_into.html)\r\n\r\n### Learn from other implementations\r\n[The Change history](http://oldhome.schmorp.de/marc/liblzf.html) change history indicates that previous inline assembly was in fact counter productive and that allowing the compiler to take total control of the output (with tweaks in *code* rather than directives in assembly) yielded better results.\r\n\r\n### Some specifics\r\n\r\nSince LZF is, in an efficient unmanaged implementation on modern desktop CPUS, largely memory bandwidth limited (hence it being compered to the speed of an unoptimised memcpy) you will need you code to remain entirely within level 1 cache.  \r\nAs such any static fields you cannot make into constants should be placed within the same class as these values will often be placed within the same area of memory devoted to the vtables and meta data associated with classes.\r\n\r\nObject allocations which cannot be trapped by [Escape Analysis]() (only in 1.6 onwards) will need to be avoided.\r\n\r\nThe [c code](http://cvs.schmorp.de/liblzf/lzf_c.c?revision=1.37&amp;view=markup) makes aggressive use of loop unrolling. However the performance of this on older (1.4 era) VM&#39;s is [heavily dependant on the mode the JVM is in](http://books.google.co.uk/books?id=iPHtCfZQyqQC&amp;pg=PA200&amp;lpg=PA200&amp;dq=java+jit+unrolling&amp;source=bl&amp;ots=tbluFR4gmP&amp;sig=rAxYqfzrChTmcxKD1gpbY5S05Po&amp;hl=en&amp;ei=xsCqSpiiJZzLjAfh6vDTBw&amp;sa=X&amp;oi=book_result&amp;ct=result&amp;resnum=2#v=onepage&amp;q=&amp;f=false). Apparently latter sun jvm versions are more aggressive at inlining and unrolling, especially in server mode.\r\n\r\nThe prefetch instrctions generated by the JIT can make all the difference on code like this which is near memory bound.\r\n\r\n### &quot;It&#39;s coming straight for us&quot;\r\nYour target is moving, and will continue to. Again Marc Lehmann&#39;s previous experience:\r\n\r\n&gt; default HLOG size is now 15 (cpu caches have increased)\r\n\r\nEven minor updates to the jvm can involve [significant compiler changes](http://java.sun.com/javase/6/webnotes/6u2.html)\r\n\r\n&gt; 6544668  Don&#39;t vecorized array operations that can&#39;t be aligned at runtime.\r\n&gt; 6536652  Implement some superword (SIMD) optimizations\r\n&gt; 6531696  don&#39;t use immediate 16-bits value store to memory on Intel cpus\r\n&gt; 6468290  Divide and allocate out of eden on a per cpu basis\r\n\r\n### Captain Obvious\r\n\r\nMeasure, Measure, Measure. IF you can get your library to include (in a separate dll) a simple and easy to execute benchmark that logs the relevant information (vm version, cpu, OS, command line switches etc) and makes this simple to send back to you you will increase your coverage, best of all you&#39;ll cover those people using it that care. ","title":"How can I code Java to allow SSE use and bounds-check elimination (or other advanced optimizations)?","body":"<p>Not a full answer, I simply don't have time to do the detailed benchmarks your question needs but hopefully useful.</p>\n\n<h3>Know your enemy</h3>\n\n<p>You are targeting a combination of the JVM (in essence the JIT) and the underlying CPU/Memory subsystem. Thus \"This is faster on JVM X\" is not likely to be valid in all cases as you move into more aggressive optimisations.</p>\n\n<p>If your target market/application will largely run on a particular architecture you should consider investing in tools specific to it.\n  * If your performance on x86 is the critical factor then intel's <a href=\"http://software.intel.com/en-us/intel-vtune/\" rel=\"noreferrer\">VTune</a> is excellent for drilling down into the sort of <a href=\"http://software.intel.com/en-us/articles/identifying-jvm-vectorization-simd-usage-with-the-vtunetm-performance-analyzer/\" rel=\"noreferrer\">jit output analysis</a> you describe. \n * The differences between 64 bit and 32 bit JITs can be considerable, especially on x86 platforms where calling conventions can change and <a href=\"http://en.wikipedia.org/wiki/Register_allocation\" rel=\"noreferrer\">enregistering</a> opportunities are very different.</p>\n\n<h3>Get the right tools</h3>\n\n<p>You would likely want to get a sampling profiler. The overhead of instrumentation (and the associated knock on on things like inlining, cache pollution and code size inflation) for your specific needs would be far too great. The intel VTune analyser can actually be used for Java though the integration is not so tight as others.<br>\nIf you are using the sun JVM and are happy only knowing what the latest/greatest version is doing then the options available to <a href=\"https://wikis.oracle.com/display/HotSpotInternals/PrintAssembly\" rel=\"noreferrer\">investigate the output of the JIT</a> are considerable if you know a bit of assembly.\nThis <a href=\"http://weblogs.java.net/blog/kohsuke/archive/2008/03/deep_dive_into.html\" rel=\"noreferrer\">article details some interesting analysis using this functionality</a></p>\n\n<h3>Learn from other implementations</h3>\n\n<p><a href=\"http://oldhome.schmorp.de/marc/liblzf.html\" rel=\"noreferrer\">The Change history</a> change history indicates that previous inline assembly was in fact counter productive and that allowing the compiler to take total control of the output (with tweaks in <em>code</em> rather than directives in assembly) yielded better results.</p>\n\n<h3>Some specifics</h3>\n\n<p>Since LZF is, in an efficient unmanaged implementation on modern desktop CPUS, largely memory bandwidth limited (hence it being compered to the speed of an unoptimised memcpy) you will need you code to remain entirely within level 1 cache.<br>\nAs such any static fields you cannot make into constants should be placed within the same class as these values will often be placed within the same area of memory devoted to the vtables and meta data associated with classes.</p>\n\n<p>Object allocations which cannot be trapped by Escape Analysis (only in 1.6 onwards) will need to be avoided.</p>\n\n<p>The <a href=\"http://cvs.schmorp.de/liblzf/lzf_c.c?revision=1.37&amp;view=markup\" rel=\"noreferrer\">c code</a> makes aggressive use of loop unrolling. However the performance of this on older (1.4 era) VM's is <a href=\"http://books.google.co.uk/books?id=iPHtCfZQyqQC&amp;pg=PA200&amp;lpg=PA200&amp;dq=java+jit+unrolling&amp;source=bl&amp;ots=tbluFR4gmP&amp;sig=rAxYqfzrChTmcxKD1gpbY5S05Po&amp;hl=en&amp;ei=xsCqSpiiJZzLjAfh6vDTBw&amp;sa=X&amp;oi=book_result&amp;ct=result&amp;resnum=2#v=onepage&amp;q=&amp;f=false\" rel=\"noreferrer\">heavily dependant on the mode the JVM is in</a>. Apparently latter sun jvm versions are more aggressive at inlining and unrolling, especially in server mode.</p>\n\n<p>The prefetch instrctions generated by the JIT can make all the difference on code like this which is near memory bound.</p>\n\n<h3>\"It's coming straight for us\"</h3>\n\n<p>Your target is moving, and will continue to. Again Marc Lehmann's previous experience:</p>\n\n<blockquote>\n  <p>default HLOG size is now 15 (cpu caches have increased)</p>\n</blockquote>\n\n<p>Even minor updates to the jvm can involve <a href=\"http://java.sun.com/javase/6/webnotes/6u2.html\" rel=\"noreferrer\">significant compiler changes</a></p>\n\n<blockquote>\n  <p>6544668  Don't vecorized array operations that can't be aligned at runtime.\n  6536652  Implement some superword (SIMD) optimizations\n  6531696  don't use immediate 16-bits value store to memory on Intel cpus\n  6468290  Divide and allocate out of eden on a per cpu basis</p>\n</blockquote>\n\n<h3>Captain Obvious</h3>\n\n<p>Measure, Measure, Measure. IF you can get your library to include (in a separate dll) a simple and easy to execute benchmark that logs the relevant information (vm version, cpu, OS, command line switches etc) and makes this simple to send back to you you will increase your coverage, best of all you'll cover those people using it that care. </p>\n"},{"comments":[{"owner":{"account_id":33857,"reputation":19882,"user_id":95122,"accept_rate":88,"display_name":"BobMcGee"},"score":0,"creation_date":1252957905,"post_id":1422330,"comment_id":1267068,"body_markdown":"This **IS** very interesting, and yet another reason JDK/JRE 1.7 will be nice, if it ever gets released.  Between this, the asynchronous I/O APIs (halfway between stream I/O and NIO), and the new concurrency APIs, it should bring java performance much closer to optimized C.  Here, have an upvote for posting something useful (even if not an answer).","body":"This <b>IS</b> very interesting, and yet another reason JDK/JRE 1.7 will be nice, if it ever gets released.  Between this, the asynchronous I/O APIs (halfway between stream I/O and NIO), and the new concurrency APIs, it should bring java performance much closer to optimized C.  Here, have an upvote for posting something useful (even if not an answer)."}],"tags":[],"owner":{"account_id":47523,"reputation":89783,"user_id":140816,"accept_rate":90,"display_name":"Jo&#227;o Silva"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1692223143,"creation_date":1252942550,"answer_id":1422330,"question_id":1352422,"body_markdown":"As far as **bounds check elimination** is concerned, I believe the new JDK will already include an improved algorithm that eliminates it, whenever it&#39;s possible. These are the two main papers on this subject:\r\n\r\n - V. Mikheev, S. Fedoseev, V. Sukharev, N. Lipsky. 2002\r\n**Effective Enhancement of Loop Versioning in Java**. [Link][1]. This paper is from the guys at Excelsior, who implemented the technique in their [Jet][2] JVM.\r\n - W&#252;rthinger, Thomas, Christian Wimmer, and Hanspeter M&#246;ssenb&#246;ck. 2007. **Array Bounds Check Elimination for the Java HotSpot Client Compiler**. PPPJ. [Link][3]. Slightly based on the above paper, this is the implementation that I believe will be included in the next [JDK][4]. The achieved *speedups* are also presented.\r\n\r\n\r\nThere is also [this][5] blog entry, which discusses one of the papers superficially, and also presents some benchmarking results, not only for arrays but also for arithmetic in the new JDK. The comments of the blog entry are also very interesting, since the authors of the above papers present some very interesting comments and discuss arguments. Also, there are some pointers to other similar blog posts on this subject.\r\n\r\n\r\n\r\n  [1]: http://www.excelsior-usa.com/ps/LoopVers.ps\r\n  [2]: http://www.excelsior-usa.com/jet.html\r\n  [3]: http://www.cs.umd.edu/~vibha/330/array-bounds.pdf\r\n  [4]: http://download.java.net/jdk7/binaries/\r\n  [5]: https://web.archive.org/web/20090828105328/http://lingpipe-blog.com/2009/03/30/jdk-7-twice-as-fast-as-jdk-6-for-arrays-and-arithmetic/","title":"How can I code Java to allow SSE use and bounds-check elimination (or other advanced optimizations)?","body":"<p>As far as <strong>bounds check elimination</strong> is concerned, I believe the new JDK will already include an improved algorithm that eliminates it, whenever it's possible. These are the two main papers on this subject:</p>\n<ul>\n<li>V. Mikheev, S. Fedoseev, V. Sukharev, N. Lipsky. 2002\n<strong>Effective Enhancement of Loop Versioning in Java</strong>. <a href=\"http://www.excelsior-usa.com/ps/LoopVers.ps\" rel=\"nofollow noreferrer\">Link</a>. This paper is from the guys at Excelsior, who implemented the technique in their <a href=\"http://www.excelsior-usa.com/jet.html\" rel=\"nofollow noreferrer\">Jet</a> JVM.</li>\n<li>Würthinger, Thomas, Christian Wimmer, and Hanspeter Mössenböck. 2007. <strong>Array Bounds Check Elimination for the Java HotSpot Client Compiler</strong>. PPPJ. <a href=\"http://www.cs.umd.edu/%7Evibha/330/array-bounds.pdf\" rel=\"nofollow noreferrer\">Link</a>. Slightly based on the above paper, this is the implementation that I believe will be included in the next <a href=\"http://download.java.net/jdk7/binaries/\" rel=\"nofollow noreferrer\">JDK</a>. The achieved <em>speedups</em> are also presented.</li>\n</ul>\n<p>There is also <a href=\"https://web.archive.org/web/20090828105328/http://lingpipe-blog.com/2009/03/30/jdk-7-twice-as-fast-as-jdk-6-for-arrays-and-arithmetic/\" rel=\"nofollow noreferrer\">this</a> blog entry, which discusses one of the papers superficially, and also presents some benchmarking results, not only for arrays but also for arithmetic in the new JDK. The comments of the blog entry are also very interesting, since the authors of the above papers present some very interesting comments and discuss arguments. Also, there are some pointers to other similar blog posts on this subject.</p>\n"},{"comments":[{"owner":{"account_id":33857,"reputation":19882,"user_id":95122,"accept_rate":88,"display_name":"BobMcGee"},"score":0,"creation_date":1252970842,"post_id":1423650,"comment_id":1267965,"body_markdown":"This is LZF, not LZW... so speed is essential.\n\nI&#39;ve edited the original post to include the most recent stable version of the compression code, and a link to the earliest version (less optimized). \n\nByte-to-int packing is used for the look-ahead, which is used in the hashtable of positions for 3-byte groups, and for checking if a candidate backref is usable.","body":"This is LZF, not LZW... so speed is essential.  I&#39;ve edited the original post to include the most recent stable version of the compression code, and a link to the earliest version (less optimized).   Byte-to-int packing is used for the look-ahead, which is used in the hashtable of positions for 3-byte groups, and for checking if a candidate backref is usable."},{"owner":{"account_id":33857,"reputation":19882,"user_id":95122,"accept_rate":88,"display_name":"BobMcGee"},"score":0,"creation_date":1252989859,"post_id":1423650,"comment_id":1268839,"body_markdown":"Also: I am absolutely positive the figure is less than 32 elements now, because it as about 2x as fast using arraycopy vs. loop with this many elements.  Then again, the loop wasn&#39;t fully optimal.","body":"Also: I am absolutely positive the figure is less than 32 elements now, because it as about 2x as fast using arraycopy vs. loop with this many elements.  Then again, the loop wasn&#39;t fully optimal."},{"owner":{"account_id":7351,"reputation":36092,"user_id":12748,"display_name":"ShuggyCoUk"},"score":1,"creation_date":1253012977,"post_id":1423650,"comment_id":1270169,"body_markdown":"I believe the jit was changed a while back to allow the array copy to be special cased. I can&#39;t pull up a reference anywhere apart from http://www.ibm.com/developerworks/java/library/j-devrtj2.html which isn&#39;t clear when it changed. Of course this is per JVM as well","body":"I believe the jit was changed a while back to allow the array copy to be special cased. I can&#39;t pull up a reference anywhere apart from <a href=\"http://www.ibm.com/developerworks/java/library/j-devrtj2.html\" rel=\"nofollow noreferrer\">ibm.com/developerworks/java/library/j-devrtj2.html</a> which isn&#39;t clear when it changed. Of course this is per JVM as well"},{"owner":{"account_id":7351,"reputation":36092,"user_id":12748,"display_name":"ShuggyCoUk"},"score":1,"creation_date":1253013022,"post_id":1423650,"comment_id":1270174,"body_markdown":"ah yes - here&#39;s some more discussion on this: http://www.mail-archive.com/classpath@gnu.org/msg10172.html","body":"ah yes - here&#39;s some more discussion on this: <a href=\"http://www.mail-archive.com/classpath@gnu.org/msg10172.html\" rel=\"nofollow noreferrer\">mail-archive.com/classpath@gnu.org/msg10172.html</a>"}],"tags":[],"owner":{"account_id":9193,"reputation":343123,"user_id":16883,"accept_rate":83,"display_name":"Michael Borgwardt"},"comment_count":4,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1252959052,"creation_date":1252959052,"answer_id":1423650,"question_id":1352422,"body_markdown":"It&#39;s rather unlikely that you need to help the JIT compiler much with optimizing a straightforward number crunching algorithm like LZW. ShuggyCoUk mentioned this, but I think it deserves extra attention:\r\n\r\n**The cache-friendliness of your code will be a big factor.**\r\n\r\nYou have to reduce the size of your woking set and improve data access locality as much as possible. You mention &quot;packing bytes into ints for performance&quot;. This sounds like using ints to hold byte values in order to have them word-aligned. Don&#39;t do that! The increased data set size will outweigh any gains (I once converted some ECC number crunching code from int[] to byte[] and got a 2x speed-up).\r\n\r\nOn the off chance that you don&#39;t know this: if you need to treat some data as both bytes and ints, you don&#39;t have to shift and |-mask it - use [`ByteBuffer.asIntBuffer()`][1] and related methods.\r\n\r\n&gt; With current 1.6 JVM, how many\r\n&gt; elements must be copied before\r\n&gt; System.arraycopy beats a copying loop?\r\n\r\nBetter do the benchmark yourself. When I did it way back when in Java 1.3 times, it was somewhere around 2000 elements.\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/nio/ByteBuffer.html#asIntBuffer()","title":"How can I code Java to allow SSE use and bounds-check elimination (or other advanced optimizations)?","body":"<p>It's rather unlikely that you need to help the JIT compiler much with optimizing a straightforward number crunching algorithm like LZW. ShuggyCoUk mentioned this, but I think it deserves extra attention:</p>\n\n<p><strong>The cache-friendliness of your code will be a big factor.</strong></p>\n\n<p>You have to reduce the size of your woking set and improve data access locality as much as possible. You mention \"packing bytes into ints for performance\". This sounds like using ints to hold byte values in order to have them word-aligned. Don't do that! The increased data set size will outweigh any gains (I once converted some ECC number crunching code from int[] to byte[] and got a 2x speed-up).</p>\n\n<p>On the off chance that you don't know this: if you need to treat some data as both bytes and ints, you don't have to shift and |-mask it - use <a href=\"http://java.sun.com/javase/6/docs/api/java/nio/ByteBuffer.html#asIntBuffer()\" rel=\"nofollow noreferrer\"><code>ByteBuffer.asIntBuffer()</code></a> and related methods.</p>\n\n<blockquote>\n  <p>With current 1.6 JVM, how many\n  elements must be copied before\n  System.arraycopy beats a copying loop?</p>\n</blockquote>\n\n<p>Better do the benchmark yourself. When I did it way back when in Java 1.3 times, it was somewhere around 2000 elements.</p>\n"},{"comments":[{"owner":{"account_id":33857,"reputation":19882,"user_id":95122,"accept_rate":88,"display_name":"BobMcGee"},"score":0,"creation_date":1260252060,"post_id":1864841,"comment_id":1761334,"body_markdown":"I&#39;m well aware of the recent H2 optimizations, and am partially  responsible: several of the optimizations are actually based on a draft version of my code I sent around the time I posted this. This includes the re-use of the &quot;hash&quot; variable when checking for a possible backref, the cleaner loop structure, and not initializing the hashtable.  Out of curiosity, what were your modifications?  \n\nAs a teaser: look for a couple higher-compression options and faster decompression in the H2 code when stuff gets out of code review.","body":"I&#39;m well aware of the recent H2 optimizations, and am partially  responsible: several of the optimizations are actually based on a draft version of my code I sent around the time I posted this. This includes the re-use of the &quot;hash&quot; variable when checking for a possible backref, the cleaner loop structure, and not initializing the hashtable.  Out of curiosity, what were your modifications?    As a teaser: look for a couple higher-compression options and faster decompression in the H2 code when stuff gets out of code review."}],"tags":[],"owner":{"account_id":23674,"reputation":114076,"user_id":59501,"accept_rate":75,"display_name":"StaxMan"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1260250730,"creation_date":1260250730,"answer_id":1864841,"question_id":1352422,"body_markdown":"Lots of answers so far, but couple of additional things:\r\n\r\n* Measure, measure, measure. As much as most Java developers warn against micro-benchmarking, make sure you compare performance between changes. Optimizations that do not result in measurable improvements are generally not worth keeping (of course, sometimes it&#39;s combination of things, and that gets trickier)\r\n* Tight loops matter as much with Java as with C (and ditto with variable allocations -- although you don&#39;t directly control it, HotSpot will eventually have to do it). I manage to practically double the speed of UTF-8 decoding by rearranging tight loop for handling single-byte case (7-bit ascii) as tight(er) inner loop, leaving other cases out.\r\n* Do not underestimate cost of allocating and/or clearing large arrays -- if you want lzf encoding/decoding to be faster for small/medium chunks too (not just megabyte sized), keep in mind that ALL allocations of byte[]/int[] are somewhat costly; not because of GC, but because JVM MUST clear the space.\r\n\r\nH2 implementation has also been optimized quite a bit (for example: it does not clear the hash array any more, this often makes sense); and I actually helped modify it for use in another Java project. My contribution was mostly just changing it do be more optimal for non-streaming case, but that did not touch the tight encode/decode loops.\r\n","title":"How can I code Java to allow SSE use and bounds-check elimination (or other advanced optimizations)?","body":"<p>Lots of answers so far, but couple of additional things:</p>\n\n<ul>\n<li>Measure, measure, measure. As much as most Java developers warn against micro-benchmarking, make sure you compare performance between changes. Optimizations that do not result in measurable improvements are generally not worth keeping (of course, sometimes it's combination of things, and that gets trickier)</li>\n<li>Tight loops matter as much with Java as with C (and ditto with variable allocations -- although you don't directly control it, HotSpot will eventually have to do it). I manage to practically double the speed of UTF-8 decoding by rearranging tight loop for handling single-byte case (7-bit ascii) as tight(er) inner loop, leaving other cases out.</li>\n<li>Do not underestimate cost of allocating and/or clearing large arrays -- if you want lzf encoding/decoding to be faster for small/medium chunks too (not just megabyte sized), keep in mind that ALL allocations of byte[]/int[] are somewhat costly; not because of GC, but because JVM MUST clear the space.</li>\n</ul>\n\n<p>H2 implementation has also been optimized quite a bit (for example: it does not clear the hash array any more, this often makes sense); and I actually helped modify it for use in another Java project. My contribution was mostly just changing it do be more optimal for non-streaming case, but that did not touch the tight encode/decode loops.</p>\n"}],"owner":{"account_id":33857,"reputation":19882,"user_id":95122,"accept_rate":88,"display_name":"BobMcGee"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11511,"favorite_count":0,"down_vote_count":1,"up_vote_count":42,"accepted_answer_id":1413484,"answer_count":4,"score":41,"last_activity_date":1692223143,"creation_date":1251581293,"question_id":1352422,"body_markdown":"## The Situation: ##\nI&#39;m optimizing a pure-java implementation of the LZF compression algorithm, which involves a lot of byte[] access and basic int mathematics for hashing and comparison.  Performance really matters, because the goal of the compression is to reduce I/O requirements.  I am not posting code because it isn&#39;t cleaned up yet, and may be restructured heavily.\n\n## The Questions: ##\n\n -  How can I write my code to allow it to JIT-compile to a form using faster SSE operations?  \n - How can I structure it so the compiler can easily eliminate array bounds checks?\n - Are there any broad references about the relative speed of specific math operations (how many increments/decrements does it take to equal a normal add/subtract, how fast is shift-or vs. an array access)?\n - How can I work on optimizing branching -- is it better to have numerous conditional statements with short bodies, or a few long ones, or short ones with nested conditions?\n - With current 1.6 JVM, how many elements must be copied before System.arraycopy beats a copying loop?\n\n## What I&#39;ve already done: ##\nBefore I get attacked for premature optimization: the basic algorithm is already excellent, but the Java implementation is less than 2/3 the speed of equivalent C.    I&#39;ve already replaced copying loops with System.arraycopy, worked on optimizing loops and eliminated un-needed operations.  \n\nI make heavy use of bit twiddling and packing bytes into ints for performance, as well as shifting &amp; masking.\n\nFor legal reasons, I can&#39;t look at implementations in similar libraries, and existing libraries have too restrictive license terms to use.\n\n## Requirements for a GOOD (accepted) answer: #\n - **Unacceptable answers:** &quot;this is faster&quot; without an explanation of how much AND why, OR hasn&#39;t been tested with a JIT compiler.\n - **Borderline answers:** have not been tested with anything before Hotspot 1.4\n - **Basic answers:** will provide a general rule and explanation of why it is faster at the compiler level, and roughly how much faster\n - **Good answers:** include a couple of samples of code to demonstrate\n - **Excellent answers:** have benchmarks with both JRE 1.5 and 1.6\n - **PERFECT answer:** Is by someone who worked on the HotSpot compiler, and can fully explain or reference the conditions for an optimization to be used, and how much faster it typically is.  Might include java code and sample assembly code generated by HotSpot.\n\nAlso: if anyone has links detailing the guts of Hotspot optimization and branching performance, those are welcome.  I know enough about bytecode that a site analyzing performance at a bytecode rather than sourcecode level would be helpful.\n\n## (Edit) Partial Answer: Bounds-Check Ellimination: ##\nThis is taken from supplied link to the HotSpot internals wiki at: [https://wikis.oracle.com/display/HotSpotInternals/RangeCheckElimination][1]\n\nHotSpot will eliminate bounds checks in all for loops with the following conditions:\n\n  - Array is loop invariant (not reallocated within the loop)\n  - Index variable has a constant stride (increases/decreases by constant amount, in only one spot if possible)\n  - Array is indexed by a linear function of the variable.  \n\n**Example:** `int val = array[index*2 + 5]` \n\n***OR:*** `int val = array[index+9]`  \n\n**NOT:** `int val = array[Math.min(var,index)+7]`\n\n\n----------\n## Early version of code: ##\nThis is a sample version.  Do not steal it, because it is an unreleased version of code for the H2 database project.  The final version will be open source.  This is an optimization upon the code here: [H2 CompressLZF code][2]\n\nLogically, this is identical to the development version, but that one uses a for(...) loop to step through input, and an if/else loop for different logic between literal and backreference modes.  It reduces array access and checks between modes.\n\n    public int compressNewer(final byte[] in, final int inLen, final byte[] out, int outPos){\n            int inPos = 0;\n            // initialize the hash table\n            if (cachedHashTable == null) {\n                cachedHashTable = new int[HASH_SIZE];\n            } else {\n                System.arraycopy(EMPTY, 0, cachedHashTable, 0, HASH_SIZE);\n            }\n            int[] hashTab = cachedHashTable;\n            // number of literals in current run\n            int literals = 0;\n            int future = first(in, inPos);\n            final int endPos = inLen-4;\n    \n            // Loop through data until all of it has been compressed\n            while (inPos &lt; endPos) {\n                    future = (future &lt;&lt; 8) | in[inPos+2] &amp; 255;\n    //                hash = next(hash,in,inPos);\n                    int off = hash(future);\n                    // ref = possible index of matching group in data\n                    int ref = hashTab[off];\n                    hashTab[off] = inPos;\n                    off = inPos - ref - 1; //dropped for speed\n    \n                    // has match if bytes at ref match bytes in future, etc\n                    // note: using ref++ rather than ref+1, ref+2, etc is about 15% faster\n                    boolean hasMatch = (ref &gt; 0 &amp;&amp; off &lt;= MAX_OFF &amp;&amp; (in[ref++] == (byte) (future &gt;&gt; 16) &amp;&amp; in[ref++] == (byte)(future &gt;&gt; 8) &amp;&amp; in[ref] == (byte)future));\n    \n                    ref -=2; // ...EVEN when I have to recover it\n                    // write out literals, if max literals reached, OR has a match\n                    if ((hasMatch &amp;&amp; literals != 0) || (literals == MAX_LITERAL)) {\n                        out[outPos++] = (byte) (literals - 1);\n                        System.arraycopy(in, inPos - literals, out, outPos, literals);\n                        outPos += literals;\n                        literals = 0;\n                    }\n    \n                    //literal copying split because this improved performance by 5%\n    \n                    if (hasMatch) { // grow match as much as possible\n                        int maxLen = inLen - inPos - 2;\n                        maxLen = maxLen &gt; MAX_REF ? MAX_REF : maxLen;\n                        int len = 3;\n                        // grow match length as possible...\n                        while (len &lt; maxLen &amp;&amp; in[ref + len] == in[inPos + len]) {\n                            len++;\n                        }\n                        len -= 2;\n    \n                        // short matches write length to first byte, longer write to 2nd too\n                        if (len &lt; 7) {\n                            out[outPos++] = (byte) ((off &gt;&gt; 8) + (len &lt;&lt; 5));\n                        } else {\n                            out[outPos++] = (byte) ((off &gt;&gt; 8) + (7 &lt;&lt; 5));\n                            out[outPos++] = (byte) (len - 7);\n                        }\n                        out[outPos++] = (byte) off;\n                        inPos += len;\n    \n                        //OPTIMIZATION: don&#39;t store hashtable entry for last byte of match and next byte\n                        // rebuild neighborhood for hashing, but don&#39;t store location for this 3-byte group\n                        // improves compress performance by ~10% or more, sacrificing ~2% compression...\n                        future = ((in[inPos+1] &amp; 255) &lt;&lt; 16) | ((in[inPos + 2] &amp; 255) &lt;&lt; 8) | (in[inPos + 3] &amp; 255);\n                        inPos += 2;\n                    } else { //grow literals\n                        literals++;\n                        inPos++;\n                    } \n            }\n            \n            // write out remaining literals\n            literals += inLen-inPos;\n            inPos = inLen-literals;\n            if(literals &gt;= MAX_LITERAL){\n                out[outPos++] = (byte)(MAX_LITERAL-1);\n                System.arraycopy(in, inPos, out, outPos, MAX_LITERAL);\n                outPos += MAX_LITERAL;\n                inPos += MAX_LITERAL;\n                literals -= MAX_LITERAL;\n            }\n            if (literals != 0) {\n                out[outPos++] = (byte) (literals - 1);\n                System.arraycopy(in, inPos, out, outPos, literals);\n                outPos += literals;\n            }\n            return outPos; \n        }\n\n\n----------\n## Final edit: ##\n**I&#39;ve marked the best answer so far as accepted, since the deadline is nearly up.  Since I took so long before deciding to post code, I will continue to upvote and respond to comments where possible.**  Apologies if the code is messy: this represented code in development, not polished up for committing.\n\n  [1]: https://wikis.oracle.com/display/HotSpotInternals/RangeCheckElimination\n  [2]: http://code.google.com/p/h2database/source/browse/trunk/h2/src/main/org/h2/compress/CompressLZF.java","title":"How can I code Java to allow SSE use and bounds-check elimination (or other advanced optimizations)?","body":"<h2>The Situation:</h2>\n<p>I'm optimizing a pure-java implementation of the LZF compression algorithm, which involves a lot of byte[] access and basic int mathematics for hashing and comparison.  Performance really matters, because the goal of the compression is to reduce I/O requirements.  I am not posting code because it isn't cleaned up yet, and may be restructured heavily.</p>\n<h2>The Questions:</h2>\n<ul>\n<li>How can I write my code to allow it to JIT-compile to a form using faster SSE operations?</li>\n<li>How can I structure it so the compiler can easily eliminate array bounds checks?</li>\n<li>Are there any broad references about the relative speed of specific math operations (how many increments/decrements does it take to equal a normal add/subtract, how fast is shift-or vs. an array access)?</li>\n<li>How can I work on optimizing branching -- is it better to have numerous conditional statements with short bodies, or a few long ones, or short ones with nested conditions?</li>\n<li>With current 1.6 JVM, how many elements must be copied before System.arraycopy beats a copying loop?</li>\n</ul>\n<h2>What I've already done:</h2>\n<p>Before I get attacked for premature optimization: the basic algorithm is already excellent, but the Java implementation is less than 2/3 the speed of equivalent C.    I've already replaced copying loops with System.arraycopy, worked on optimizing loops and eliminated un-needed operations.</p>\n<p>I make heavy use of bit twiddling and packing bytes into ints for performance, as well as shifting &amp; masking.</p>\n<p>For legal reasons, I can't look at implementations in similar libraries, and existing libraries have too restrictive license terms to use.</p>\n<h2>Requirements for a GOOD (accepted) answer:</h2>\n<ul>\n<li><strong>Unacceptable answers:</strong> &quot;this is faster&quot; without an explanation of how much AND why, OR hasn't been tested with a JIT compiler.</li>\n<li><strong>Borderline answers:</strong> have not been tested with anything before Hotspot 1.4</li>\n<li><strong>Basic answers:</strong> will provide a general rule and explanation of why it is faster at the compiler level, and roughly how much faster</li>\n<li><strong>Good answers:</strong> include a couple of samples of code to demonstrate</li>\n<li><strong>Excellent answers:</strong> have benchmarks with both JRE 1.5 and 1.6</li>\n<li><strong>PERFECT answer:</strong> Is by someone who worked on the HotSpot compiler, and can fully explain or reference the conditions for an optimization to be used, and how much faster it typically is.  Might include java code and sample assembly code generated by HotSpot.</li>\n</ul>\n<p>Also: if anyone has links detailing the guts of Hotspot optimization and branching performance, those are welcome.  I know enough about bytecode that a site analyzing performance at a bytecode rather than sourcecode level would be helpful.</p>\n<h2>(Edit) Partial Answer: Bounds-Check Ellimination:</h2>\n<p>This is taken from supplied link to the HotSpot internals wiki at: <a href=\"https://wikis.oracle.com/display/HotSpotInternals/RangeCheckElimination\" rel=\"noreferrer\">https://wikis.oracle.com/display/HotSpotInternals/RangeCheckElimination</a></p>\n<p>HotSpot will eliminate bounds checks in all for loops with the following conditions:</p>\n<ul>\n<li>Array is loop invariant (not reallocated within the loop)</li>\n<li>Index variable has a constant stride (increases/decreases by constant amount, in only one spot if possible)</li>\n<li>Array is indexed by a linear function of the variable.</li>\n</ul>\n<p><strong>Example:</strong> <code>int val = array[index*2 + 5]</code></p>\n<p><em><strong>OR:</strong></em> <code>int val = array[index+9]</code></p>\n<p><strong>NOT:</strong> <code>int val = array[Math.min(var,index)+7]</code></p>\n<hr />\n<h2>Early version of code:</h2>\n<p>This is a sample version.  Do not steal it, because it is an unreleased version of code for the H2 database project.  The final version will be open source.  This is an optimization upon the code here: <a href=\"http://code.google.com/p/h2database/source/browse/trunk/h2/src/main/org/h2/compress/CompressLZF.java\" rel=\"noreferrer\">H2 CompressLZF code</a></p>\n<p>Logically, this is identical to the development version, but that one uses a for(...) loop to step through input, and an if/else loop for different logic between literal and backreference modes.  It reduces array access and checks between modes.</p>\n<pre><code>public int compressNewer(final byte[] in, final int inLen, final byte[] out, int outPos){\n        int inPos = 0;\n        // initialize the hash table\n        if (cachedHashTable == null) {\n            cachedHashTable = new int[HASH_SIZE];\n        } else {\n            System.arraycopy(EMPTY, 0, cachedHashTable, 0, HASH_SIZE);\n        }\n        int[] hashTab = cachedHashTable;\n        // number of literals in current run\n        int literals = 0;\n        int future = first(in, inPos);\n        final int endPos = inLen-4;\n\n        // Loop through data until all of it has been compressed\n        while (inPos &lt; endPos) {\n                future = (future &lt;&lt; 8) | in[inPos+2] &amp; 255;\n//                hash = next(hash,in,inPos);\n                int off = hash(future);\n                // ref = possible index of matching group in data\n                int ref = hashTab[off];\n                hashTab[off] = inPos;\n                off = inPos - ref - 1; //dropped for speed\n\n                // has match if bytes at ref match bytes in future, etc\n                // note: using ref++ rather than ref+1, ref+2, etc is about 15% faster\n                boolean hasMatch = (ref &gt; 0 &amp;&amp; off &lt;= MAX_OFF &amp;&amp; (in[ref++] == (byte) (future &gt;&gt; 16) &amp;&amp; in[ref++] == (byte)(future &gt;&gt; 8) &amp;&amp; in[ref] == (byte)future));\n\n                ref -=2; // ...EVEN when I have to recover it\n                // write out literals, if max literals reached, OR has a match\n                if ((hasMatch &amp;&amp; literals != 0) || (literals == MAX_LITERAL)) {\n                    out[outPos++] = (byte) (literals - 1);\n                    System.arraycopy(in, inPos - literals, out, outPos, literals);\n                    outPos += literals;\n                    literals = 0;\n                }\n\n                //literal copying split because this improved performance by 5%\n\n                if (hasMatch) { // grow match as much as possible\n                    int maxLen = inLen - inPos - 2;\n                    maxLen = maxLen &gt; MAX_REF ? MAX_REF : maxLen;\n                    int len = 3;\n                    // grow match length as possible...\n                    while (len &lt; maxLen &amp;&amp; in[ref + len] == in[inPos + len]) {\n                        len++;\n                    }\n                    len -= 2;\n\n                    // short matches write length to first byte, longer write to 2nd too\n                    if (len &lt; 7) {\n                        out[outPos++] = (byte) ((off &gt;&gt; 8) + (len &lt;&lt; 5));\n                    } else {\n                        out[outPos++] = (byte) ((off &gt;&gt; 8) + (7 &lt;&lt; 5));\n                        out[outPos++] = (byte) (len - 7);\n                    }\n                    out[outPos++] = (byte) off;\n                    inPos += len;\n\n                    //OPTIMIZATION: don't store hashtable entry for last byte of match and next byte\n                    // rebuild neighborhood for hashing, but don't store location for this 3-byte group\n                    // improves compress performance by ~10% or more, sacrificing ~2% compression...\n                    future = ((in[inPos+1] &amp; 255) &lt;&lt; 16) | ((in[inPos + 2] &amp; 255) &lt;&lt; 8) | (in[inPos + 3] &amp; 255);\n                    inPos += 2;\n                } else { //grow literals\n                    literals++;\n                    inPos++;\n                } \n        }\n        \n        // write out remaining literals\n        literals += inLen-inPos;\n        inPos = inLen-literals;\n        if(literals &gt;= MAX_LITERAL){\n            out[outPos++] = (byte)(MAX_LITERAL-1);\n            System.arraycopy(in, inPos, out, outPos, MAX_LITERAL);\n            outPos += MAX_LITERAL;\n            inPos += MAX_LITERAL;\n            literals -= MAX_LITERAL;\n        }\n        if (literals != 0) {\n            out[outPos++] = (byte) (literals - 1);\n            System.arraycopy(in, inPos, out, outPos, literals);\n            outPos += literals;\n        }\n        return outPos; \n    }\n</code></pre>\n<hr />\n<h2>Final edit:</h2>\n<p><strong>I've marked the best answer so far as accepted, since the deadline is nearly up.  Since I took so long before deciding to post code, I will continue to upvote and respond to comments where possible.</strong>  Apologies if the code is messy: this represented code in development, not polished up for committing.</p>\n"},{"tags":["java","adobe","immutability","livecycle","lcds"],"answers":[{"comments":[{"owner":{"account_id":18519,"reputation":4307,"user_id":42491,"accept_rate":67,"display_name":"Brett Hannah"},"score":0,"creation_date":1257872291,"post_id":1672459,"comment_id":1586300,"body_markdown":"Thanks Graeme. I came to the same conclusion. I don&#39;t suppose you&#39;re aware of any plans for writeReplace and readResolve to be handle correctly by LCDS in the future are you?","body":"Thanks Graeme. I came to the same conclusion. I don&#39;t suppose you&#39;re aware of any plans for writeReplace and readResolve to be handle correctly by LCDS in the future are you?"}],"tags":[],"owner":{"account_id":569647,"reputation":66,"user_id":202436,"display_name":"Graeme Harker"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1257324687,"creation_date":1257324687,"answer_id":1672459,"question_id":1524326,"body_markdown":"Yes, it&#39;s a common problem. Adobe recommend that the Java type that has immutable properties implements Externalizable and the equivalent ActionScript type implements IExternalizable.","title":"Serializing immutable java classes to actionscript with LCDS","body":"<p>Yes, it's a common problem. Adobe recommend that the Java type that has immutable properties implements Externalizable and the equivalent ActionScript type implements IExternalizable.</p>\n"},{"tags":[],"owner":{"account_id":24292,"reputation":5311,"user_id":61679,"display_name":"Cornel Creanga"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1260104903,"creation_date":1260104903,"answer_id":1855354,"question_id":1524326,"body_markdown":"There is no plan to handle the writeReplace and readResolve, but you can ask for a feature request http://bugs.adobe.com/jira/browse/BLZ\r\n\r\nWhen implementing your custom serialization take care that you will lose some benefits like compressing numbers and identifying duplicate strings. One idea is to take a look on the actual serialization mechanism and to modify it accordingly. \r\n\r\nHowever, if you are interested just in serializing the read only properties this enhancement was implemented in the BlazeDS, take a look here: http://bugs.adobe.com/jira/browse/BLZ-427","title":"Serializing immutable java classes to actionscript with LCDS","body":"<p>There is no plan to handle the writeReplace and readResolve, but you can ask for a feature request <a href=\"http://bugs.adobe.com/jira/browse/BLZ\" rel=\"nofollow noreferrer\">http://bugs.adobe.com/jira/browse/BLZ</a></p>\n\n<p>When implementing your custom serialization take care that you will lose some benefits like compressing numbers and identifying duplicate strings. One idea is to take a look on the actual serialization mechanism and to modify it accordingly. </p>\n\n<p>However, if you are interested just in serializing the read only properties this enhancement was implemented in the BlazeDS, take a look here: <a href=\"http://bugs.adobe.com/jira/browse/BLZ-427\" rel=\"nofollow noreferrer\">http://bugs.adobe.com/jira/browse/BLZ-427</a></p>\n"},{"tags":[],"owner":{"display_name":"user1028723"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1320359924,"creation_date":1320359924,"answer_id":8002807,"question_id":1524326,"body_markdown":"shortest and most comprehensive answer i found: http://expertdevelopers.blogspot.com/2010/07/serializable-vs-externalizable.html","title":"Serializing immutable java classes to actionscript with LCDS","body":"<p>shortest and most comprehensive answer i found: <a href=\"http://expertdevelopers.blogspot.com/2010/07/serializable-vs-externalizable.html\" rel=\"nofollow\">http://expertdevelopers.blogspot.com/2010/07/serializable-vs-externalizable.html</a></p>\n"}],"owner":{"account_id":18519,"reputation":4307,"user_id":42491,"accept_rate":67,"display_name":"Brett Hannah"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2926,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":1672459,"answer_count":3,"score":7,"last_activity_date":1692223071,"creation_date":1254818382,"question_id":1524326,"body_markdown":"I&#39;ve got a complex object which is being managed by the LCDS DataServices data management and being created/updated etc using custom assemblers. The vast majority of the object hierarchy is being serialized/deserialized correctly but I&#39;ve hit a stumbling block when it comes to serializing immutable java classes.\r\n\r\nIn a java only world I would use the java writeReplace and readResolve methods as this excellent blog describes: [http://lingpipe-blog.com/2009/08/10/serializing-immutable-singletons-serialization-proxy/][1]\r\n\r\nThis is how I originally wrote my java class, expecting livecycle to call the writeReplace method and duly replace the immutable class with a mutable one for serialization. However it would appear that lcds knows nothing of the writeReplace method and will only call readExternal/writeExternal ignoring readResolve and writeReplace.\r\n\r\nFirstly, have other people found this to be the case, or am I missing something?\r\n\r\nSecondly, has anyone come up with an appropriate method to deserialize actionscript classes into either immutable objects or singletons?\r\n\r\n[1]: https://web.archive.org/web/20091113072714/http://lingpipe-blog.com/2009/08/10/serializing-immutable-singletons-serialization-proxy","title":"Serializing immutable java classes to actionscript with LCDS","body":"<p>I've got a complex object which is being managed by the LCDS DataServices data management and being created/updated etc using custom assemblers. The vast majority of the object hierarchy is being serialized/deserialized correctly but I've hit a stumbling block when it comes to serializing immutable java classes.</p>\n<p>In a java only world I would use the java writeReplace and readResolve methods as this excellent blog describes: <a href=\"https://web.archive.org/web/20091113072714/http://lingpipe-blog.com/2009/08/10/serializing-immutable-singletons-serialization-proxy\" rel=\"nofollow noreferrer\">http://lingpipe-blog.com/2009/08/10/serializing-immutable-singletons-serialization-proxy/</a></p>\n<p>This is how I originally wrote my java class, expecting livecycle to call the writeReplace method and duly replace the immutable class with a mutable one for serialization. However it would appear that lcds knows nothing of the writeReplace method and will only call readExternal/writeExternal ignoring readResolve and writeReplace.</p>\n<p>Firstly, have other people found this to be the case, or am I missing something?</p>\n<p>Secondly, has anyone come up with an appropriate method to deserialize actionscript classes into either immutable objects or singletons?</p>\n"},{"tags":["java","javafx","icons"],"comments":[{"owner":{"account_id":6133141,"reputation":836,"user_id":4782751,"display_name":"Manoj Vadehra"},"score":0,"creation_date":1558070661,"post_id":56180012,"comment_id":98985895,"body_markdown":"Ideally resources should not be in src directory. Please try to move Icons and FXML to resources directory (if possible). Did you try &quot;/Icons/message.png&quot; path for the Image?","body":"Ideally resources should not be in src directory. Please try to move Icons and FXML to resources directory (if possible). Did you try &quot;/Icons/message.png&quot; path for the Image?"}],"answers":[{"tags":[],"owner":{"account_id":3983409,"reputation":167,"user_id":3284759,"display_name":"Balderk"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1558071732,"creation_date":1558071732,"answer_id":56180291,"question_id":56180012,"body_markdown":"You need to remove src from the path.","title":"Error trying to change JavaFX application icon","body":"<p>You need to remove src from the path.</p>\n"},{"tags":[],"owner":{"account_id":4182358,"reputation":136,"user_id":3426988,"accept_rate":71,"display_name":"Samer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1558089155,"creation_date":1558089155,"answer_id":56184612,"question_id":56180012,"body_markdown":"try to do this \r\n\r\n    public static final String ICON_IMAGE_LOC = &quot;/icons/logo.png&quot;;\r\n    public static void setStageIcon(Stage stage) {\r\n        stage.getIcons().add(new javafx.scene.image.Image(ICON_IMAGE_LOC));\r\n        //import javafx.scene.image.Image;\r\n    }\r\nand than in the declaration of new stage add it like this \r\n\r\n     setStageIcon(stage);\r\n\r\n","title":"Error trying to change JavaFX application icon","body":"<p>try to do this </p>\n\n<pre><code>public static final String ICON_IMAGE_LOC = \"/icons/logo.png\";\npublic static void setStageIcon(Stage stage) {\n    stage.getIcons().add(new javafx.scene.image.Image(ICON_IMAGE_LOC));\n    //import javafx.scene.image.Image;\n}\n</code></pre>\n\n<p>and than in the declaration of new stage add it like this </p>\n\n<pre><code> setStageIcon(stage);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15573850,"reputation":1062,"user_id":11235449,"display_name":"NM Naufaldo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1558110034,"creation_date":1558110034,"answer_id":56190198,"question_id":56180012,"body_markdown":"Try using `File` class\r\n\r\n    String path = &quot;/src/Icons/message.png&quot;;\r\n    File fileIcon = new File(path);\r\n    Image applicationIcon = new Image(fileIcon.toURI().toString());\r\n    primaryStage.getIcons().add(applicationIcon);","title":"Error trying to change JavaFX application icon","body":"<p>Try using <code>File</code> class</p>\n\n<pre><code>String path = \"/src/Icons/message.png\";\nFile fileIcon = new File(path);\nImage applicationIcon = new Image(fileIcon.toURI().toString());\nprimaryStage.getIcons().add(applicationIcon);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1692409997,"post_id":76917308,"comment_id":135623431,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76917308/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":25713606,"reputation":1,"user_id":20657469,"display_name":"hhlk"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692222908,"creation_date":1692222908,"answer_id":76917308,"question_id":56180012,"body_markdown":"My solution is this\r\n\r\n    Path path = Paths.get(&quot;/src/Icons/message.png&quot;).toAbsolutePath();\r\n    stage.getIcons().add(new Image(path.toString()));\r\n\r\n\r\n\r\n\r\n\r\n\r\n ","title":"Error trying to change JavaFX application icon","body":"<p>My solution is this</p>\n<pre><code>Path path = Paths.get(&quot;/src/Icons/message.png&quot;).toAbsolutePath();\nstage.getIcons().add(new Image(path.toString()));\n</code></pre>\n"}],"owner":{"account_id":15395920,"reputation":15,"user_id":11107058,"display_name":"Rodrigo Albuquerque"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":649,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":56184612,"answer_count":4,"score":0,"last_activity_date":1692222908,"creation_date":1558070023,"question_id":56180012,"body_markdown":"I am developing an application in `JavaFX` and I am trying to change the icon of my application, according to the code below:\r\n\r\n    public class Login extends Application \r\n    \r\n    {\r\n    \r\n    Image applicationIcon = new Image(&quot;/src/Icons/message.png&quot;);\r\n    \r\n    @Override\r\n    public void start(Stage primaryStage) \r\n    \r\n    {\r\n    \r\n    try \r\n    \r\n        {\r\n            Parent root = FXMLLoader.load(getClass().getResource(&quot;../FXML/Login.fxml&quot;));\r\n            Scene scene = new Scene(root);\r\n            primaryStage.setTitle(&quot;Login&quot;);\r\n    \r\n            primaryStage.getIcons().add(new Image(Login.class.getResourceAsStream(&quot;src/Icons/message.png&quot;)));           \r\n            primaryStage.getIcons().add(applicationIcon);\r\n            primaryStage.setScene(scene);\r\n            primaryStage.show();\r\n    \r\n    \r\n        } \r\n    \r\n    catch (IOException e) \r\n    \r\n        {\r\n            // TODO Auto-generated catch block\r\n            e.printStackTrace();\r\n        }\r\n    \r\n    }\r\n    \r\n    public static void main(String[] args) {\r\n        launch(args);\r\n    }\r\n\r\nHowever, when running the script to change the application icon, the following error occurs:\r\n\r\n    Exception in Application constructor java.lang.reflect.InvocationTargetException \r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) \r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) \r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) \r\n    \tat java.lang.reflect.Method.invoke(Unknown Source) \r\n    \tat com.sun.javafx.application.LauncherImpl.launchApplicationWithArgs(LauncherImpl.java:389) \r\n    \tat com.sun.javafx.application.LauncherImpl.launchApplication(LauncherImpl.java:328)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) \r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) \r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) \r\n    \tat java.lang.reflect.Method.invoke(Unknown Source) \r\n    \tat sun.launcher.LauncherHelper$FXHelper.main(Unknown Source) \r\n    Caused by: java.lang.RuntimeException: Unable to construct Application instance: class application.Login \r\n    \tat com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:907)\r\n    \tat com.sun.javafx.application.LauncherImpl.lambda$launchApplication$159(LauncherImpl.java:182)\r\n    \tat java.lang.Thread.run(Unknown Source) \r\n    Caused by: java.lang.reflect.InvocationTargetException \r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source) \r\n    \tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source) \r\n    \tat java.lang.reflect.Constructor.newInstance(Unknown Source)\r\n    \tat com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$165(LauncherImpl.java:819)\r\n    \tat com.sun.javafx.application.PlatformImpl.lambda$runAndWait$179(PlatformImpl.java:326)\r\n    \tat com.sun.javafx.application.PlatformImpl.lambda$null$177(PlatformImpl.java:295)\r\n    \tat java.security.AccessController.doPrivileged(Native Method) \r\n    \tat com.sun.javafx.application.PlatformImpl.lambda$runLater$178(PlatformImpl.java:294)\r\n    \tat com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)\r\n    \tat com.sun.glass.ui.win.WinApplication._runLoop(Native Method) \r\n    \tat com.sun.glass.ui.win.WinApplication.lambda$null$152(WinApplication.java:177)\r\n    \t... 1 more \r\n    Caused by: java.lang.IllegalArgumentException: Invalid URL: Invalid URL or resource not found \r\n    \tat javafx.scene.image.Image.validateUrl(Image.java:1118) \r\n    \tat javafx.scene.image.Image.(Image.java:620) \r\n    \tat application.Login.(Login.java:24) \r\n    \t... 13 more \r\n    Caused by: java.lang.IllegalArgumentException: Invalid URL or resource not found\r\n    \tat javafx.scene.image.Image.validateUrl(Image.java:1110) \r\n    \t... 15 more\r\n    Exception running application application.Login\r\n\r\nThe files of the program that I am developing, are arranged as follows:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nDoes anyone know why this error occurs? Thank you.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/0FLUx.png","title":"Error trying to change JavaFX application icon","body":"<p>I am developing an application in <code>JavaFX</code> and I am trying to change the icon of my application, according to the code below:</p>\n\n<pre><code>public class Login extends Application \n\n{\n\nImage applicationIcon = new Image(\"/src/Icons/message.png\");\n\n@Override\npublic void start(Stage primaryStage) \n\n{\n\ntry \n\n    {\n        Parent root = FXMLLoader.load(getClass().getResource(\"../FXML/Login.fxml\"));\n        Scene scene = new Scene(root);\n        primaryStage.setTitle(\"Login\");\n\n        primaryStage.getIcons().add(new Image(Login.class.getResourceAsStream(\"src/Icons/message.png\")));           \n        primaryStage.getIcons().add(applicationIcon);\n        primaryStage.setScene(scene);\n        primaryStage.show();\n\n\n    } \n\ncatch (IOException e) \n\n    {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }\n\n}\n\npublic static void main(String[] args) {\n    launch(args);\n}\n</code></pre>\n\n<p>However, when running the script to change the application icon, the following error occurs:</p>\n\n<pre><code>Exception in Application constructor java.lang.reflect.InvocationTargetException \n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) \n    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) \n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) \n    at java.lang.reflect.Method.invoke(Unknown Source) \n    at com.sun.javafx.application.LauncherImpl.launchApplicationWithArgs(LauncherImpl.java:389) \n    at com.sun.javafx.application.LauncherImpl.launchApplication(LauncherImpl.java:328)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) \n    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) \n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) \n    at java.lang.reflect.Method.invoke(Unknown Source) \n    at sun.launcher.LauncherHelper$FXHelper.main(Unknown Source) \nCaused by: java.lang.RuntimeException: Unable to construct Application instance: class application.Login \n    at com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:907)\n    at com.sun.javafx.application.LauncherImpl.lambda$launchApplication$159(LauncherImpl.java:182)\n    at java.lang.Thread.run(Unknown Source) \nCaused by: java.lang.reflect.InvocationTargetException \n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source) \n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source) \n    at java.lang.reflect.Constructor.newInstance(Unknown Source)\n    at com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$165(LauncherImpl.java:819)\n    at com.sun.javafx.application.PlatformImpl.lambda$runAndWait$179(PlatformImpl.java:326)\n    at com.sun.javafx.application.PlatformImpl.lambda$null$177(PlatformImpl.java:295)\n    at java.security.AccessController.doPrivileged(Native Method) \n    at com.sun.javafx.application.PlatformImpl.lambda$runLater$178(PlatformImpl.java:294)\n    at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)\n    at com.sun.glass.ui.win.WinApplication._runLoop(Native Method) \n    at com.sun.glass.ui.win.WinApplication.lambda$null$152(WinApplication.java:177)\n    ... 1 more \nCaused by: java.lang.IllegalArgumentException: Invalid URL: Invalid URL or resource not found \n    at javafx.scene.image.Image.validateUrl(Image.java:1118) \n    at javafx.scene.image.Image.(Image.java:620) \n    at application.Login.(Login.java:24) \n    ... 13 more \nCaused by: java.lang.IllegalArgumentException: Invalid URL or resource not found\n    at javafx.scene.image.Image.validateUrl(Image.java:1110) \n    ... 15 more\nException running application application.Login\n</code></pre>\n\n<p>The files of the program that I am developing, are arranged as follows:</p>\n\n<p><a href=\"https://i.stack.imgur.com/0FLUx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0FLUx.png\" alt=\"enter image description here\"></a></p>\n\n<p>Does anyone know why this error occurs? Thank you.</p>\n"},{"tags":["java","android","video","ffmpeg","android-ffmpeg"],"comments":[{"owner":{"account_id":1117539,"reputation":2100,"user_id":1106547,"accept_rate":63,"display_name":"mortalis"},"score":0,"creation_date":1692224152,"post_id":76831003,"comment_id":135596307,"body_markdown":"Youd should post the entire log of your async task execution. With return code you cannot tell much, just looking their github docs it seems there&#39;s no exact meaning for error codes.","body":"Youd should post the entire log of your async task execution. With return code you cannot tell much, just looking their github docs it seems there&#39;s no exact meaning for error codes."},{"owner":{"account_id":19816490,"reputation":7,"user_id":14514055,"display_name":"Akshit"},"score":0,"creation_date":1692254236,"post_id":76831003,"comment_id":135598900,"body_markdown":"Thanks for your response This is the only error I&#39;m getting. But I solved my problem in another way. Thank you for your time.","body":"Thanks for your response This is the only error I&#39;m getting. But I solved my problem in another way. Thank you for your time."},{"owner":{"account_id":1117539,"reputation":2100,"user_id":1106547,"accept_rate":63,"display_name":"mortalis"},"score":0,"creation_date":1692297326,"post_id":76831003,"comment_id":135607745,"body_markdown":"btw, possible duplicate for https://stackoverflow.com/questions/76650778/flutter-ffmpeg-exit-code-1","body":"btw, possible duplicate for <a href=\"https://stackoverflow.com/questions/76650778/flutter-ffmpeg-exit-code-1\" title=\"flutter ffmpeg exit code 1\">stackoverflow.com/questions/76650778/flutter-ffmpeg-exit-cod&zwnj;&#8203;e-1</a>"}],"owner":{"account_id":19816490,"reputation":7,"user_id":14514055,"display_name":"Akshit"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":106,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692222169,"creation_date":1691089881,"question_id":76831003,"body_markdown":"I have the mp4 link of a video but don&#39;t have a link for the mp3 version of that mp4 video. So is there any way that I can convert that mp4 video to mp3 in Android? I saw some resources but nothing works for me. I have two ways in which I believe this can be achieved\r\n\r\n 1. Convert the mp4 link to mp3 directly. (Not Sure if this is achievable)\r\n 2. Download the mp4 on the device with the help of a link and then use some code to convert that mp4 to mp3.\r\n\r\nI also tried some solutions which are available online \r\n\r\n\r\n https://github.com/tanersener/mobile-ffmpeg\r\n\r\nI tried the above library to achieve the final goal. But got: `Async command execution failed with returnCode=1`.\r\n\r\nThis error in the code I am using is:\r\n\r\n    private class Mp4ToMp3ConverterTask extends AsyncTask&lt;String, Void, String&gt; {\r\n        @Override\r\n        protected String doInBackground(String... params) {\r\n            String mp4FilePath = params[0];\r\n            String mp3OutputPath = Environment.getExternalStorageDirectory().getAbsolutePath() + &quot;/output.mp3&quot;;\r\n\r\n            String[] ffmpegCommand = {&quot;-i&quot;, mp4FilePath, &quot;-vn&quot;, &quot;-ar&quot;, &quot;44100&quot;, &quot;-ac&quot;, &quot;2&quot;, &quot;-b:a&quot;, &quot;192k&quot;, mp3OutputPath};\r\n\r\n\r\n            Config.enableStatisticsCallback(new StatisticsCallback() {\r\n                public void apply(Statistics newStatistics) {\r\n                    Log.d(&quot;Dekh&quot;, String.format(&quot;frame: %d, time: %d&quot;, newStatistics.getVideoFrameNumber(), newStatistics.getTime()));\r\n                }\r\n            });\r\n\r\n            long executionIdd = FFmpeg.executeAsync(ffmpegCommand, new ExecuteCallback() {\r\n                @Override\r\n                public void apply(final long executionId, final int returnCode) {\r\n                    if (returnCode == RETURN_CODE_SUCCESS) {\r\n                        Log.i(&quot;Dekh&quot;, &quot;Async command execution completed successfully.&quot;);\r\n                    } else if (returnCode == RETURN_CODE_CANCEL) {\r\n                        Log.i(&quot;Dekh&quot;, &quot;Async command execution cancelled by user.&quot;);\r\n                    } else {\r\n                        Log.i(&quot;Dekh&quot;, String.format(&quot;Async command execution failed with returnCode=%d.&quot;, returnCode));\r\n                    }\r\n                }\r\n            });\r\n\r\n            FFmpeg.cancel(executionIdd);\r\n\r\n            return mp3OutputPath;\r\n        }\r\n    }\r\n\r\nSolution number 2 which I used is:\r\n\r\nhttps://androidprogrammatically425516919.wordpress.com/2020/04/21/how-to-convert-video-to-audio-in-android-programmatically/\r\n\r\nBut I got an error here also: `Failed to instantiate extractor`.  \r\nAnd another error is: `java.io.FileNotFoundException: open failed: EISDIR (Is a directory)`\r\n\r\nI tried the online available solution to solve these errors but nothing worked. Such as granting write permission. Providing a valid location to save the output.\r\n\r\nBut nothing works so far. Please help me on this. Thank you.","title":"How to convert mp4 to mp3 in Android Java?","body":"<p>I have the mp4 link of a video but don't have a link for the mp3 version of that mp4 video. So is there any way that I can convert that mp4 video to mp3 in Android? I saw some resources but nothing works for me. I have two ways in which I believe this can be achieved</p>\n<ol>\n<li>Convert the mp4 link to mp3 directly. (Not Sure if this is achievable)</li>\n<li>Download the mp4 on the device with the help of a link and then use some code to convert that mp4 to mp3.</li>\n</ol>\n<p>I also tried some solutions which are available online</p>\n<p><a href=\"https://github.com/tanersener/mobile-ffmpeg\" rel=\"nofollow noreferrer\">https://github.com/tanersener/mobile-ffmpeg</a></p>\n<p>I tried the above library to achieve the final goal. But got: <code>Async command execution failed with returnCode=1</code>.</p>\n<p>This error in the code I am using is:</p>\n<pre><code>private class Mp4ToMp3ConverterTask extends AsyncTask&lt;String, Void, String&gt; {\n    @Override\n    protected String doInBackground(String... params) {\n        String mp4FilePath = params[0];\n        String mp3OutputPath = Environment.getExternalStorageDirectory().getAbsolutePath() + &quot;/output.mp3&quot;;\n\n        String[] ffmpegCommand = {&quot;-i&quot;, mp4FilePath, &quot;-vn&quot;, &quot;-ar&quot;, &quot;44100&quot;, &quot;-ac&quot;, &quot;2&quot;, &quot;-b:a&quot;, &quot;192k&quot;, mp3OutputPath};\n\n\n        Config.enableStatisticsCallback(new StatisticsCallback() {\n            public void apply(Statistics newStatistics) {\n                Log.d(&quot;Dekh&quot;, String.format(&quot;frame: %d, time: %d&quot;, newStatistics.getVideoFrameNumber(), newStatistics.getTime()));\n            }\n        });\n\n        long executionIdd = FFmpeg.executeAsync(ffmpegCommand, new ExecuteCallback() {\n            @Override\n            public void apply(final long executionId, final int returnCode) {\n                if (returnCode == RETURN_CODE_SUCCESS) {\n                    Log.i(&quot;Dekh&quot;, &quot;Async command execution completed successfully.&quot;);\n                } else if (returnCode == RETURN_CODE_CANCEL) {\n                    Log.i(&quot;Dekh&quot;, &quot;Async command execution cancelled by user.&quot;);\n                } else {\n                    Log.i(&quot;Dekh&quot;, String.format(&quot;Async command execution failed with returnCode=%d.&quot;, returnCode));\n                }\n            }\n        });\n\n        FFmpeg.cancel(executionIdd);\n\n        return mp3OutputPath;\n    }\n}\n</code></pre>\n<p>Solution number 2 which I used is:</p>\n<p><a href=\"https://androidprogrammatically425516919.wordpress.com/2020/04/21/how-to-convert-video-to-audio-in-android-programmatically/\" rel=\"nofollow noreferrer\">https://androidprogrammatically425516919.wordpress.com/2020/04/21/how-to-convert-video-to-audio-in-android-programmatically/</a></p>\n<p>But I got an error here also: <code>Failed to instantiate extractor</code>.<br />\nAnd another error is: <code>java.io.FileNotFoundException: open failed: EISDIR (Is a directory)</code></p>\n<p>I tried the online available solution to solve these errors but nothing worked. Such as granting write permission. Providing a valid location to save the output.</p>\n<p>But nothing works so far. Please help me on this. Thank you.</p>\n"},{"tags":["java","c++","java-native-interface","metaclass"],"comments":[{"owner":{"account_id":79346,"reputation":57079,"user_id":225074,"accept_rate":91,"display_name":"Thomas Matthews"},"score":0,"creation_date":1692207724,"post_id":76915864,"comment_id":135593549,"body_markdown":"Reminder:  in C++, class names are not placed into the executable; they may be in a debug executable (or an associated debugging file).","body":"Reminder:  in C++, class names are not placed into the executable; they may be in a debug executable (or an associated debugging file)."},{"owner":{"account_id":20092701,"reputation":77,"user_id":21748514,"display_name":"UnSure"},"score":1,"creation_date":1692207866,"post_id":76915864,"comment_id":135593572,"body_markdown":"@ThomasMatthews I am trying to print all class names from a Java application from my C++ dll.","body":"@ThomasMatthews I am trying to print all class names from a Java application from my C++ dll."}],"answers":[{"comments":[{"owner":{"account_id":20092701,"reputation":77,"user_id":21748514,"display_name":"UnSure"},"score":0,"creation_date":1692208415,"post_id":76915939,"comment_id":135593660,"body_markdown":"Yes, I see how I screwed up there but I just did not notice it yet because my code did not reach that far yet since it crashes when calling ``CallObjectMethod(clazz, mid_getName)``. I added another debug statement before it got to that part to ensure it would not be my string code that was causing the crash. In my debug file &quot;Pass 2&quot; was called but it crashed before it could call &quot;Pass 3&quot;.","body":"Yes, I see how I screwed up there but I just did not notice it yet because my code did not reach that far yet since it crashes when calling <code>CallObjectMethod(clazz, mid_getName)</code>. I added another debug statement before it got to that part to ensure it would not be my string code that was causing the crash. In my debug file &quot;Pass 2&quot; was called but it crashed before it could call &quot;Pass 3&quot;."},{"owner":{"account_id":196869,"reputation":402550,"user_id":440558,"accept_rate":75,"display_name":"Some programmer dude"},"score":0,"creation_date":1692208830,"post_id":76915939,"comment_id":135593728,"body_markdown":"@UnSure Then I assume that your logger class actually flushes the output passed to the `Log` function, so you don&#39;t have a false positive? Have you used an actual [debugger](https://stackoverflow.com/questions/25385173/what-is-a-debugger-and-how-can-it-help-me-diagnose-problems) to verify?","body":"@UnSure Then I assume that your logger class actually flushes the output passed to the <code>Log</code> function, so you don&#39;t have a false positive? Have you used an actual <a href=\"https://stackoverflow.com/questions/25385173/what-is-a-debugger-and-how-can-it-help-me-diagnose-problems\">debugger</a> to verify?"},{"owner":{"account_id":20092701,"reputation":77,"user_id":21748514,"display_name":"UnSure"},"score":0,"creation_date":1692209896,"post_id":76915939,"comment_id":135593919,"body_markdown":"No, I have not tried an actual debugger however I know its not a printing issue since I have not had an issue with it ever (I included the code above). It is also crashing in the same exact spot even after I added your updated string code. Do you know of any possible issues that can occur when looping through every class and trying to print each classes name?","body":"No, I have not tried an actual debugger however I know its not a printing issue since I have not had an issue with it ever (I included the code above). It is also crashing in the same exact spot even after I added your updated string code. Do you know of any possible issues that can occur when looping through every class and trying to print each classes name?"}],"tags":[],"owner":{"account_id":196869,"reputation":402550,"user_id":440558,"accept_rate":75,"display_name":"Some programmer dude"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692208129,"creation_date":1692208129,"answer_id":76915939,"question_id":76915864,"body_markdown":"`&quot;ClassName: &quot; + *str` is the same as `&quot;ClassName: &quot; + str[0]`.\r\n\r\nI.e. it adds the numeric value of the first character of `str`, and adds it to the pointer that points to the string `&quot;ClassName&quot;`.\r\n\r\nEssentially it&#39;s equivalent to `&amp;((&quot;ClassName: &quot;)[str[0]])`. The resulting pointer will likely not be a valid string.\r\n\r\nC++ is not Java, you can&#39;t append strings like that. The pointer you pass to the `Log` function will be invalid and using it will lead to *undefined behavior*, and likely crashes.\r\n\r\nInstead of using a `const char *` for `str`, use `std::string`:\r\n```\r\nstd::string str = Env-&gt;GetStringUTFChars((jstring) classNameObj, 0);\r\nLogger::Log((&quot;ClassName: &quot; + str).c_str());  // or Logger::Log(&quot;ClassName: &quot; + str) if it accepts a std::string object\r\n```\r\n","title":"Printing class names of all loaded classes using JVMTI","body":"<p><code>&quot;ClassName: &quot; + *str</code> is the same as <code>&quot;ClassName: &quot; + str[0]</code>.</p>\n<p>I.e. it adds the numeric value of the first character of <code>str</code>, and adds it to the pointer that points to the string <code>&quot;ClassName&quot;</code>.</p>\n<p>Essentially it's equivalent to <code>&amp;((&quot;ClassName: &quot;)[str[0]])</code>. The resulting pointer will likely not be a valid string.</p>\n<p>C++ is not Java, you can't append strings like that. The pointer you pass to the <code>Log</code> function will be invalid and using it will lead to <em>undefined behavior</em>, and likely crashes.</p>\n<p>Instead of using a <code>const char *</code> for <code>str</code>, use <code>std::string</code>:</p>\n<pre><code>std::string str = Env-&gt;GetStringUTFChars((jstring) classNameObj, 0);\nLogger::Log((&quot;ClassName: &quot; + str).c_str());  // or Logger::Log(&quot;ClassName: &quot; + str) if it accepts a std::string object\n</code></pre>\n"},{"comments":[{"owner":{"account_id":20092701,"reputation":77,"user_id":21748514,"display_name":"UnSure"},"score":0,"creation_date":1692221134,"post_id":76917135,"comment_id":135595925,"body_markdown":"Yea I was just thinking about this because in Java you need to call getClass().getName() but I have no idea how to call both. Is it possible for me to do ``jmethodID getClass = Java::Env-&gt;GetMethodID(clazz, &quot;getClass&quot;, &quot;()Ljava/lang/Class;&quot;);`` and then somehow call that method and then follow it up with the getname call? Reason is the generic FindClass wont always work in my case, and I need to be able to get that class call from the class instance labeled ``clazz``.","body":"Yea I was just thinking about this because in Java you need to call getClass().getName() but I have no idea how to call both. Is it possible for me to do <code>jmethodID getClass = Java::Env-&gt;GetMethodID(clazz, &quot;getClass&quot;, &quot;()Ljava&#47;lang&#47;Class;&quot;);</code> and then somehow call that method and then follow it up with the getname call? Reason is the generic FindClass wont always work in my case, and I need to be able to get that class call from the class instance labeled <code>clazz</code>."},{"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"score":0,"creation_date":1692221184,"post_id":76917135,"comment_id":135595930,"body_markdown":"The &quot;generic&quot; FindClass will find the single `java.lang.Class` of which every `Class` object is an instance. (yes, it is an instance of itself.) If you do not trust me or the JVM you could call `Env-&gt;GetObjectClass(clazz)` and use that to look up `getName` instead.","body":"The &quot;generic&quot; FindClass will find the single <code>java.lang.Class</code> of which every <code>Class</code> object is an instance. (yes, it is an instance of itself.) If you do not trust me or the JVM you could call <code>Env-&gt;GetObjectClass(clazz)</code> and use that to look up <code>getName</code> instead."},{"owner":{"account_id":20092701,"reputation":77,"user_id":21748514,"display_name":"UnSure"},"score":0,"creation_date":1692221263,"post_id":76917135,"comment_id":135595941,"body_markdown":"Yes, you are right let me try that.","body":"Yes, you are right let me try that."},{"owner":{"account_id":20092701,"reputation":77,"user_id":21748514,"display_name":"UnSure"},"score":0,"creation_date":1692221748,"post_id":76917135,"comment_id":135596011,"body_markdown":"You are the best thanks a ton it worked!!!","body":"You are the best thanks a ton it worked!!!"}],"tags":[],"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"comment_count":4,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1692220747,"creation_date":1692220747,"answer_id":76917135,"question_id":76915864,"body_markdown":"Let us say for the sake of demonstration that `clazz` is the `Class` instance that corresponds to the `java.util.Vector` class. In Java parlance this would be a `Class&lt;Vector&gt;`.\r\n\r\nThus, this line\r\n```\r\njmethodID mid_getName = Env-&gt;GetMethodID(clazz, &quot;getName&quot;, &quot;()Ljava/lang/String;&quot;);\r\n```\r\ntries to look up the `getName` method in `java.util.Vector`. This fails because, indeed, `Vector`s do not have a `getName` method.\r\nIn the unlikely even that this would have returned a value for a given class C, you are only allowed to call that method on *instances* of class C. Yet you call it on the class C itself. That is why the JVM rightfully crashes.\r\n\r\nInstead, you want to look up the `getName` method of `Class` itself, or in Java parlance, `Class&lt;Class&gt;` (and everywhere else, a &quot;metaclass&quot;) and call that on all instances of `Class&lt;Class&gt;`, which are the  `Class` in your `classes_ptr`.\r\n\r\nThere are lots of ways to get at this, but the easiest is probably just the following:\r\n```\r\njclass cls_Class = Env-&gt;FindClass(&quot;java/lang/Class&quot;);\r\njmethodID mid_Class_getName = Env-&gt;GetMethodID(cls_Class, &quot;getName&quot;, &quot;()Ljava/lang/String;&quot;);\r\n\r\nfor (int i = 0; i &lt; class_count; i++) {\r\n   jclass clazz = classes_ptr[i];\r\n   jstring classNameObj = (jstring) Env-&gt;CallObjectMethod(clazz, mid_Class_getName);\r\n   ...\r\n}\r\n```","title":"Printing class names of all loaded classes using JVMTI","body":"<p>Let us say for the sake of demonstration that <code>clazz</code> is the <code>Class</code> instance that corresponds to the <code>java.util.Vector</code> class. In Java parlance this would be a <code>Class&lt;Vector&gt;</code>.</p>\n<p>Thus, this line</p>\n<pre><code>jmethodID mid_getName = Env-&gt;GetMethodID(clazz, &quot;getName&quot;, &quot;()Ljava/lang/String;&quot;);\n</code></pre>\n<p>tries to look up the <code>getName</code> method in <code>java.util.Vector</code>. This fails because, indeed, <code>Vector</code>s do not have a <code>getName</code> method.\nIn the unlikely even that this would have returned a value for a given class C, you are only allowed to call that method on <em>instances</em> of class C. Yet you call it on the class C itself. That is why the JVM rightfully crashes.</p>\n<p>Instead, you want to look up the <code>getName</code> method of <code>Class</code> itself, or in Java parlance, <code>Class&lt;Class&gt;</code> (and everywhere else, a &quot;metaclass&quot;) and call that on all instances of <code>Class&lt;Class&gt;</code>, which are the  <code>Class</code> in your <code>classes_ptr</code>.</p>\n<p>There are lots of ways to get at this, but the easiest is probably just the following:</p>\n<pre><code>jclass cls_Class = Env-&gt;FindClass(&quot;java/lang/Class&quot;);\njmethodID mid_Class_getName = Env-&gt;GetMethodID(cls_Class, &quot;getName&quot;, &quot;()Ljava/lang/String;&quot;);\n\nfor (int i = 0; i &lt; class_count; i++) {\n   jclass clazz = classes_ptr[i];\n   jstring classNameObj = (jstring) Env-&gt;CallObjectMethod(clazz, mid_Class_getName);\n   ...\n}\n</code></pre>\n"}],"owner":{"account_id":20092701,"reputation":77,"user_id":21748514,"display_name":"UnSure"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":109,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":76917135,"answer_count":2,"score":3,"last_activity_date":1692222142,"creation_date":1692207290,"question_id":76915864,"body_markdown":"I am using JNI and JVMTI with C++ with the goal of printing all class names of a target java application. The problem I am experiencing is that it crashes when trying to call the getName() method from inside each Java class. \r\n```\r\n\tstatic jvmtiEnv* jvmtiEnv;\r\n\tstatic JNIEnv* Env;\r\n\r\n    // The following code is located inside a method\r\n    jint class_count;\r\n    jclass* classes_ptr;\r\n    jvmtiEnv-&gt;GetLoadedClasses(&amp;class_count, &amp;classes_ptr);\r\n    Logger::Log(&quot;LoadedClassCount: &quot; + std::to_string(class_count));\r\n\r\n    for (int i = 0; i &lt; class_count; i++) {\r\n        jclass clazz = classes_ptr[i];\r\n\r\n        if (clazz) {\r\n            //Logger::Log(&quot;Class Number: &quot; + std::to_string(i));\r\n            jmethodID mid_getName = Env-&gt;GetMethodID(clazz, &quot;getName&quot;, &quot;()Ljava/lang/String;&quot;);\r\n            if (!mid_getName) continue; // This method is not always available.\r\n\r\n            Logger::Log(&quot;Pass 2&quot;);\r\n            jobject classNameObj = Env-&gt;CallObjectMethod(clazz, mid_getName); // Crashes here\r\n            if (!classNameObj) continue;\r\n            Logger::Log(&quot;Pass 3&quot;);\r\n\r\n            // Printing fix suggested by @Someprogrammerdude\r\n            std::string str = Env-&gt;GetStringUTFChars((jstring) classNameObj, 0);\r\n            Logger::Log((&quot;ClassName: &quot; + str).c_str());  // or Logger::Log(&quot;ClassName: &quot; + str)\r\n        }\r\n    }\r\n```\r\nAlso yes, the fields jvmtiEnv, and Env are initialized and work because I have been able to call other methods but cant seem to figure out how to print class names. The following is my logging method. I also print log method calls to console that is actively attached to the target java application but since my code crashes this part is useless, so I rely on also printing to a txt file. \r\n```\r\nvoid Logger::Log(std::string message)\r\n{\r\n\tif (!Logger::Initialized) Logger::Init();\r\n\tstd::cout &lt;&lt; &quot;[ LOG ] :: &quot; + message &lt;&lt; std::endl;\r\n\r\n\tstd::ofstream log(&quot;C:\\\\Users\\\\me\\\\debug.txt&quot;, std::ofstream::app | std::ofstream::out);\r\n\tlog &lt;&lt; message &lt;&lt; std::endl;\r\n}\r\n```","title":"Printing class names of all loaded classes using JVMTI","body":"<p>I am using JNI and JVMTI with C++ with the goal of printing all class names of a target java application. The problem I am experiencing is that it crashes when trying to call the getName() method from inside each Java class.</p>\n<pre><code>    static jvmtiEnv* jvmtiEnv;\n    static JNIEnv* Env;\n\n    // The following code is located inside a method\n    jint class_count;\n    jclass* classes_ptr;\n    jvmtiEnv-&gt;GetLoadedClasses(&amp;class_count, &amp;classes_ptr);\n    Logger::Log(&quot;LoadedClassCount: &quot; + std::to_string(class_count));\n\n    for (int i = 0; i &lt; class_count; i++) {\n        jclass clazz = classes_ptr[i];\n\n        if (clazz) {\n            //Logger::Log(&quot;Class Number: &quot; + std::to_string(i));\n            jmethodID mid_getName = Env-&gt;GetMethodID(clazz, &quot;getName&quot;, &quot;()Ljava/lang/String;&quot;);\n            if (!mid_getName) continue; // This method is not always available.\n\n            Logger::Log(&quot;Pass 2&quot;);\n            jobject classNameObj = Env-&gt;CallObjectMethod(clazz, mid_getName); // Crashes here\n            if (!classNameObj) continue;\n            Logger::Log(&quot;Pass 3&quot;);\n\n            // Printing fix suggested by @Someprogrammerdude\n            std::string str = Env-&gt;GetStringUTFChars((jstring) classNameObj, 0);\n            Logger::Log((&quot;ClassName: &quot; + str).c_str());  // or Logger::Log(&quot;ClassName: &quot; + str)\n        }\n    }\n</code></pre>\n<p>Also yes, the fields jvmtiEnv, and Env are initialized and work because I have been able to call other methods but cant seem to figure out how to print class names. The following is my logging method. I also print log method calls to console that is actively attached to the target java application but since my code crashes this part is useless, so I rely on also printing to a txt file.</p>\n<pre><code>void Logger::Log(std::string message)\n{\n    if (!Logger::Initialized) Logger::Init();\n    std::cout &lt;&lt; &quot;[ LOG ] :: &quot; + message &lt;&lt; std::endl;\n\n    std::ofstream log(&quot;C:\\\\Users\\\\me\\\\debug.txt&quot;, std::ofstream::app | std::ofstream::out);\n    log &lt;&lt; message &lt;&lt; std::endl;\n}\n</code></pre>\n"},{"tags":["java","gradle","intellij-idea","java-11"],"answers":[{"comments":[{"owner":{"account_id":442405,"reputation":2504,"user_id":833009,"accept_rate":50,"display_name":"jvwilge"},"score":67,"creation_date":1662107779,"post_id":72124026,"comment_id":129934206,"body_markdown":"Our team also ran into this issue. It was caused by the Gradle version of IntelliJ using another JVM. To solve this go to the preferences:\nBuild, Execution, Deployment &gt; Build Tools &gt; Gradle &gt; Gradle JVM \nand change the jvm version there","body":"Our team also ran into this issue. It was caused by the Gradle version of IntelliJ using another JVM. To solve this go to the preferences: Build, Execution, Deployment &gt; Build Tools &gt; Gradle &gt; Gradle JVM  and change the jvm version there"},{"owner":{"account_id":990530,"reputation":13072,"user_id":1007991,"accept_rate":82,"display_name":"Renato"},"score":4,"creation_date":1662725418,"post_id":72124026,"comment_id":130078302,"body_markdown":"thanks @jvwilge , just spent an hour or so scratching my head after declaring sourceCompatibility/targetCompatibility and still facing this issue!","body":"thanks @jvwilge , just spent an hour or so scratching my head after declaring sourceCompatibility/targetCompatibility and still facing this issue!"},{"owner":{"account_id":2442876,"reputation":7456,"user_id":2137269,"accept_rate":79,"display_name":"Evan Knowles"},"score":3,"creation_date":1663674049,"post_id":72124026,"comment_id":130290658,"body_markdown":"likewise, thanks @jvwilge, been fighting it for hours.","body":"likewise, thanks @jvwilge, been fighting it for hours."},{"owner":{"account_id":8907476,"reputation":400,"user_id":6648863,"accept_rate":0,"display_name":"Aiono"},"score":2,"creation_date":1664279570,"post_id":72124026,"comment_id":130430337,"body_markdown":"Thanks @jvwilge I was confused why it still mentions Java 8 even though I have set the JDK to 11 in Project Settings.","body":"Thanks @jvwilge I was confused why it still mentions Java 8 even though I have set the JDK to 11 in Project Settings."},{"owner":{"account_id":5223752,"reputation":57,"user_id":4176367,"accept_rate":100,"display_name":"dks209"},"score":1,"creation_date":1669935405,"post_id":72124026,"comment_id":131762497,"body_markdown":"@jvwilge You&#39;re my hero","body":"@jvwilge You&#39;re my hero"},{"owner":{"account_id":9473489,"reputation":323,"user_id":7043615,"display_name":"HalfLegend"},"score":0,"creation_date":1670467838,"post_id":72124026,"comment_id":131884555,"body_markdown":"@jvwilge You&#39;re my hero","body":"@jvwilge You&#39;re my hero"},{"owner":{"account_id":8638041,"reputation":598,"user_id":6467492,"display_name":"Vrian7"},"score":2,"creation_date":1673441055,"post_id":72124026,"comment_id":132498901,"body_markdown":"@jvwilge thanks man! consider please set you comment as an answer in order to help other people that don&#39;t see comments.","body":"@jvwilge thanks man! consider please set you comment as an answer in order to help other people that don&#39;t see comments."}],"tags":[],"owner":{"account_id":14804062,"reputation":2131,"user_id":10691560,"display_name":"Thomas_SO"},"comment_count":7,"down_vote_count":1,"up_vote_count":40,"is_accepted":true,"score":39,"last_activity_date":1689334241,"creation_date":1651738625,"answer_id":72124026,"question_id":72117858,"body_markdown":"I found the problem and solved it.\r\n\r\nI changed two lines defining the compatibility in the `build.gradle` file.\r\n\r\nFrom:\r\n```groovy\r\ncompileOptions {\r\n    sourceCompatibility 10\r\n    targetCompatibility 10\r\n}\r\n```\r\nTo:\r\n```groovy\r\ncompileOptions {\r\n    sourceCompatibility 11\r\n    targetCompatibility 11\r\n}\r\n```\r\n\r\n\r\n\r\n\r\n","title":"Incompatible because this component declares a component compatible with Java 11 and the consumer needed a component compatible with Java 10","body":"<p>I found the problem and solved it.</p>\n<p>I changed two lines defining the compatibility in the <code>build.gradle</code> file.</p>\n<p>From:</p>\n<pre><code>compileOptions {\n    sourceCompatibility 10\n    targetCompatibility 10\n}\n</code></pre>\n<p>To:</p>\n<pre><code>compileOptions {\n    sourceCompatibility 11\n    targetCompatibility 11\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11098590,"reputation":1075,"user_id":9290612,"display_name":"A.R.B.N"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1670919002,"creation_date":1670919002,"answer_id":74781725,"question_id":72117858,"body_markdown":"in my case, it wasn&#39;t about Java Version. it still remain **1.8 (8)**.\r\nif you&#39;re using the latest version of Kotlin, you should update your **Gradle Version** to **6.7.1** or **higher** in **Project Structure**.\r\nI recommend changing **Gradle Plugin Version** to the latest **Staible Version**.","title":"Incompatible because this component declares a component compatible with Java 11 and the consumer needed a component compatible with Java 10","body":"<p>in my case, it wasn't about Java Version. it still remain <strong>1.8 (8)</strong>.\nif you're using the latest version of Kotlin, you should update your <strong>Gradle Version</strong> to <strong>6.7.1</strong> or <strong>higher</strong> in <strong>Project Structure</strong>.\nI recommend changing <strong>Gradle Plugin Version</strong> to the latest <strong>Staible Version</strong>.</p>\n"},{"tags":[],"owner":{"account_id":5192739,"reputation":1114,"user_id":4155165,"display_name":"Karzan Kamal"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1671285111,"creation_date":1671285111,"answer_id":74834646,"question_id":72117858,"body_markdown":"it is works for me change the code in the app/build.gradle file to this:\r\n\r\n    android {\r\n        compileSdkVersion 33\r\n    \r\n        compileOptions {\r\n            sourceCompatibility JavaVersion.VERSION_11\r\n            targetCompatibility JavaVersion.VERSION_11\r\n        }\r\n        ...\r\n    }\r\nor you can change it in the File/project structure\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/7rhxL.png\r\n  [2]: https://i.stack.imgur.com/tZPVJ.png","title":"Incompatible because this component declares a component compatible with Java 11 and the consumer needed a component compatible with Java 10","body":"<p>it is works for me change the code in the app/build.gradle file to this:</p>\n<pre><code>android {\n    compileSdkVersion 33\n\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_11\n        targetCompatibility JavaVersion.VERSION_11\n    }\n    ...\n}\n</code></pre>\n<p>or you can change it in the File/project structure</p>\n<p><a href=\"https://i.stack.imgur.com/7rhxL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7rhxL.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/tZPVJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tZPVJ.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":20628958,"reputation":23,"user_id":15144199,"display_name":"Aman"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1673092706,"creation_date":1673092706,"answer_id":75040129,"question_id":72117858,"body_markdown":"Incompatible because this component declares an API of a component compatible with Java 11 and the consumer needed a runtime of a component compatible with Java 10\r\n\r\n**The meaning of this error is gradle wants to run at SDK 11 and SDK provided by your project structure is of version 10**\r\n\r\nI also faced the same issue while setting up the project in intelliJ, \r\n\r\n&quot;Incompatible because this component declares an API of a component compatible with Java 17 and the consumer needed a runtime of a component compatible with Java 11&quot;\r\n\r\nSolution : I downloaded Java SE Development kit 17 and integrate JDK 17 with project structure. Its worked.","title":"Incompatible because this component declares a component compatible with Java 11 and the consumer needed a component compatible with Java 10","body":"<p>Incompatible because this component declares an API of a component compatible with Java 11 and the consumer needed a runtime of a component compatible with Java 10</p>\n<p><strong>The meaning of this error is gradle wants to run at SDK 11 and SDK provided by your project structure is of version 10</strong></p>\n<p>I also faced the same issue while setting up the project in intelliJ,</p>\n<p>&quot;Incompatible because this component declares an API of a component compatible with Java 17 and the consumer needed a runtime of a component compatible with Java 11&quot;</p>\n<p>Solution : I downloaded Java SE Development kit 17 and integrate JDK 17 with project structure. Its worked.</p>\n"},{"comments":[{"owner":{"account_id":923404,"reputation":7408,"user_id":954643,"accept_rate":80,"display_name":"qix"},"score":3,"creation_date":1676364446,"post_id":75355554,"comment_id":133117205,"body_markdown":"Had the same problem with Android Studio (Electric Eel) in a new project. Updated the `Gradle JDK` to 11 from the default 8 to fix the project sync.","body":"Had the same problem with Android Studio (Electric Eel) in a new project. Updated the <code>Gradle JDK</code> to 11 from the default 8 to fix the project sync."},{"owner":{"account_id":235434,"reputation":2479,"user_id":502240,"display_name":"bcody"},"score":1,"creation_date":1685085351,"post_id":75355554,"comment_id":134614737,"body_markdown":"Thank you! I checked all my project specific JDK version configs and didn&#39;t find anything that still pointed to 11, and it was driving me insane. But this fixed the issue for me.","body":"Thank you! I checked all my project specific JDK version configs and didn&#39;t find anything that still pointed to 11, and it was driving me insane. But this fixed the issue for me."},{"owner":{"account_id":4497597,"reputation":181,"user_id":3657024,"display_name":"rpajaziti"},"score":1,"creation_date":1693575487,"post_id":75355554,"comment_id":135783164,"body_markdown":"thank you isr, it was this.","body":"thank you isr, it was this."},{"owner":{"account_id":15533469,"reputation":871,"user_id":11206237,"display_name":"Mon"},"score":0,"creation_date":1698590994,"post_id":75355554,"comment_id":136422138,"body_markdown":"Just reference in another version, My JAVA_HOME default ver 14 but project need ver 17 so, this picture help me solve that case to change exactly version for build\nThank you so much for your picture","body":"Just reference in another version, My JAVA_HOME default ver 14 but project need ver 17 so, this picture help me solve that case to change exactly version for build Thank you so much for your picture"}],"tags":[],"owner":{"account_id":3041402,"reputation":1476,"user_id":2578324,"display_name":"jndietz"},"comment_count":4,"down_vote_count":0,"up_vote_count":107,"is_accepted":false,"score":107,"last_activity_date":1675631667,"creation_date":1675631667,"answer_id":75355554,"question_id":72117858,"body_markdown":"With IntelliJ IDEA, I had to change which JDK Gradle used for running.  The original value was JDK 11, I changed it to JDK 17.\r\n\r\n[![Screenshot][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/bS8ZC.png","title":"Incompatible because this component declares a component compatible with Java 11 and the consumer needed a component compatible with Java 10","body":"<p>With IntelliJ IDEA, I had to change which JDK Gradle used for running.  The original value was JDK 11, I changed it to JDK 17.</p>\n<p><a href=\"https://i.stack.imgur.com/bS8ZC.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/bS8ZC.png\" alt=\"Screenshot\" /></a></p>\n"},{"comments":[{"owner":{"account_id":25946793,"reputation":99,"user_id":19665422,"display_name":"Thorbj&#248;rn Andersen - UFST"},"score":1,"creation_date":1679055989,"post_id":75588710,"comment_id":133656591,"body_markdown":"same as https://stackoverflow.com/a/75355554/19665422","body":"same as <a href=\"https://stackoverflow.com/a/75355554/19665422\">stackoverflow.com/a/75355554/19665422</a>"},{"owner":{"account_id":2544187,"reputation":569,"user_id":2209351,"accept_rate":80,"display_name":"FreakyDan"},"score":1,"creation_date":1681312871,"post_id":75588710,"comment_id":134036958,"body_markdown":"For those working on multiple projects with varying version needs, you can set it to &quot;Project SDK&quot; to default to the JDK specified by the project properties (no idea why this isn&#39;t the default).","body":"For those working on multiple projects with varying version needs, you can set it to &quot;Project SDK&quot; to default to the JDK specified by the project properties (no idea why this isn&#39;t the default)."}],"tags":[],"owner":{"account_id":14972426,"reputation":261,"user_id":10808836,"display_name":"dong liu"},"comment_count":2,"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1677567099,"creation_date":1677567099,"answer_id":75588710,"question_id":72117858,"body_markdown":"Change the java version which gradle use. As the picture shown below, choose java 11.Then it is ok. \r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/2rfUM.png","title":"Incompatible because this component declares a component compatible with Java 11 and the consumer needed a component compatible with Java 10","body":"<p>Change the java version which gradle use. As the picture shown below, choose java 11.Then it is ok.\n<a href=\"https://i.stack.imgur.com/2rfUM.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/2rfUM.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":8176903,"reputation":666,"user_id":6155363,"display_name":"johnnyasd12"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1679451809,"creation_date":1679451809,"answer_id":75807953,"question_id":72117858,"body_markdown":"With IntelliJ IDEA, for me it worked with `file` -&gt; `invalidate caches` -&gt; `invalidate and restart` after correcting the version of Gradle JDK/JVM.","title":"Incompatible because this component declares a component compatible with Java 11 and the consumer needed a component compatible with Java 10","body":"<p>With IntelliJ IDEA, for me it worked with <code>file</code> -&gt; <code>invalidate caches</code> -&gt; <code>invalidate and restart</code> after correcting the version of Gradle JDK/JVM.</p>\n"},{"tags":[],"owner":{"account_id":10176602,"reputation":71,"user_id":7515031,"display_name":"lzy187"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1682316905,"creation_date":1682316905,"answer_id":76089021,"question_id":72117858,"body_markdown":"The Java version of my JAVA_HOME configuration was 10 before. After changing to Java11, it will be fine.","title":"Incompatible because this component declares a component compatible with Java 11 and the consumer needed a component compatible with Java 10","body":"<p>The Java version of my JAVA_HOME configuration was 10 before. After changing to Java11, it will be fine.</p>\n"},{"tags":[],"owner":{"account_id":26524063,"reputation":11,"user_id":20157312,"display_name":"Josef Dula"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684335298,"creation_date":1684335298,"answer_id":76273461,"question_id":72117858,"body_markdown":"create a file in root system.properties and add there\r\njava.runtime.version=17","title":"Incompatible because this component declares a component compatible with Java 11 and the consumer needed a component compatible with Java 10","body":"<p>create a file in root system.properties and add there\njava.runtime.version=17</p>\n"},{"tags":[],"owner":{"account_id":13765969,"reputation":63,"user_id":9934537,"display_name":"Yuvraj Jagga"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686925467,"creation_date":1686925467,"answer_id":76491120,"question_id":72117858,"body_markdown":"Well, I faced a similar issue\r\n\r\n`Incompatible because this component declares a component for use during compile-time, compatible with Java 18 and the consumer needed a component for use during runtime, compatible with Java 17`\r\n\r\n**Context**: I imported my colleague&#39;s project which incorporates Gradle in the project.\r\n\r\nUpon opening it in VS code, I saw red squiggly lines. And although VS code&#39;s awesome awareness of detecting the build tool, the programming language and automatically suggesting the relevant plugins was a great help for a Gradle newbie like me, but some errors still persisted. And one of them was this.\r\n\r\nAfter skimming through basic concepts like Projects, Plugins, Tasks in the [official docs](https://docs.gradle.org/8.1.1/userguide/what_is_gradle.html), I could understand the error.\r\n\r\n**Fix**\r\nAnd the fix which worked for me was that in the Gradle Build script (`build.gradle`) in my main project, a property `sourceCompatibility` was set to 17. And I had build the project using jdk 18.\r\n\r\nThis property ensures to use a specific Java version when compiling Java source.\r\nWhen I change this to `18`, the project could be built.","title":"Incompatible because this component declares a component compatible with Java 11 and the consumer needed a component compatible with Java 10","body":"<p>Well, I faced a similar issue</p>\n<p><code>Incompatible because this component declares a component for use during compile-time, compatible with Java 18 and the consumer needed a component for use during runtime, compatible with Java 17</code></p>\n<p><strong>Context</strong>: I imported my colleague's project which incorporates Gradle in the project.</p>\n<p>Upon opening it in VS code, I saw red squiggly lines. And although VS code's awesome awareness of detecting the build tool, the programming language and automatically suggesting the relevant plugins was a great help for a Gradle newbie like me, but some errors still persisted. And one of them was this.</p>\n<p>After skimming through basic concepts like Projects, Plugins, Tasks in the <a href=\"https://docs.gradle.org/8.1.1/userguide/what_is_gradle.html\" rel=\"nofollow noreferrer\">official docs</a>, I could understand the error.</p>\n<p><strong>Fix</strong>\nAnd the fix which worked for me was that in the Gradle Build script (<code>build.gradle</code>) in my main project, a property <code>sourceCompatibility</code> was set to 17. And I had build the project using jdk 18.</p>\n<p>This property ensures to use a specific Java version when compiling Java source.\nWhen I change this to <code>18</code>, the project could be built.</p>\n"},{"tags":[],"owner":{"account_id":4839730,"reputation":134,"user_id":3905108,"display_name":"Payne Miller"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692221583,"creation_date":1692221583,"answer_id":76917197,"question_id":72117858,"body_markdown":"For Kotlin programmers using IntelliJ IDEA: I encountered this error when setting up a new project in IntelliJ. I had to specify the Java version inside of `build.gradle`, like so: \r\n\r\nChange this\r\n\r\n```\r\nkotlin {\r\n    jvmToolchain(8) // The culprit is here. Targeting the wrong, older, Java version.\r\n}\r\n``` \r\n\r\nto this\r\n\r\n```\r\nkotlin {\r\n    jvmToolchain(17)\r\n}\r\n```","title":"Incompatible because this component declares a component compatible with Java 11 and the consumer needed a component compatible with Java 10","body":"<p>For Kotlin programmers using IntelliJ IDEA: I encountered this error when setting up a new project in IntelliJ. I had to specify the Java version inside of <code>build.gradle</code>, like so:</p>\n<p>Change this</p>\n<pre><code>kotlin {\n    jvmToolchain(8) // The culprit is here. Targeting the wrong, older, Java version.\n}\n</code></pre>\n<p>to this</p>\n<pre><code>kotlin {\n    jvmToolchain(17)\n}\n</code></pre>\n"}],"owner":{"account_id":14804062,"reputation":2131,"user_id":10691560,"display_name":"Thomas_SO"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":121251,"favorite_count":0,"down_vote_count":0,"up_vote_count":108,"accepted_answer_id":72124026,"answer_count":11,"score":108,"last_activity_date":1692221583,"creation_date":1651689168,"question_id":72117858,"body_markdown":"In my build.gradle file I upgraded the version of one dependency (namely: com.db:microservice-commons).\r\nAfter loading the gradle changes, I get the following error message:\r\n\r\n```lang-none\r\n&gt; Build file &#39;C:\\Projects\\Container\\mschmidt\\mount\\booking-service\\standalone\\build.gradle&#39; line: 50\r\n\r\n   &gt; A problem occurred evaluating project &#39;:standalone&#39;.\r\n   &gt; Could not resolve all files for configuration &#39;:standalone:runtimeClasspath&#39;.\r\n   &gt; Could not resolve com.db:microservice-commons:2.4.1.\r\n     Required by:\r\n         project :standalone\r\n         project :standalone &gt; project :service\r\n      &gt; No matching variant of com.db:microservice-commons:2.4.1 was found. The consumer was configured to find a runtime of a library compatible with Java 10, packaged as a jar, preferably optimized for standard JVMs, and its dependencies declared externally but:\r\n          - Variant &#39;apiElements&#39; capability com.db:microservice-commons:2.4.1 declares a library, packaged as a jar, and its dependencies declared externally:\r\n              - Incompatible because this component declares an API of a component compatible with Java 11 and the consumer needed a runtime of a component compatible with Java 10\r\n              - Other compatible attribute:\r\n                  - Doesn&#39;t say anything about its target Java environment (preferred optimized for standard JVMs)\r\n          - Variant &#39;runtimeElements&#39; capability com.db:microservice-commons:2.4.1 declares a runtime of a library, packaged as a jar, and its dependencies declared externally:\r\n              - Incompatible because this component declares a component compatible with Java 11 and the consumer needed a component compatible with Java 10\r\n              - Other compatible attribute:\r\n                  - Doesn&#39;t say anything about its target Java environment (preferred optimized for standard JVMs)\r\n          - Variant &#39;samplessources&#39; capability com.db:microservice-commons:2.4.1:\r\n              - Incompatible because this component declares documentation and the consumer needed a library\r\n              - Other compatible attributes:\r\n                  - Doesn&#39;t say anything about how its dependencies are found (required its dependencies declared externally)\r\n                  - Doesn&#39;t say anything about its target Java environment (preferred optimized for standard JVMs)\r\n                  - Doesn&#39;t say anything about its target Java version (required compatibility with Java 10)\r\n                  - Doesn&#39;t say anything about its elements (required them packaged as a jar)\r\n                  - Doesn&#39;t say anything about its usage (required a runtime)\r\n```\r\n\r\nLine 50+ of file &#39;C:\\Projects\\Container\\mschmidt\\mount\\booking-service\\standalone\\build.gradle&#39; looks as follows:\r\n\r\n```groovy\r\nmanifest {\r\n    def manifestClasspath = configurations.runtimeClasspath.collect { it.getName() }.join(&#39; &#39;)\r\n    attributes &#39;Archiver-Version&#39;: &#39;Plexus Archiver&#39;\r\n    attributes &#39;Build-Jdk&#39;: org.gradle.internal.jvm.Jvm.current()\r\n    attributes &#39;Main-Class&#39;: &#39;com.db.service.standalone.Standalone&#39;, &#39;Class-Path&#39;: manifestClasspath\r\n    }\r\n}\r\n```\r\n\r\nI have no clue what to make of this. Project JDK and Gradle JVM are set to Java 11.\r\nThis post here:\r\n    https://stackoverflow.com/questions/68087672/the-consumer-was-configured-to-find-a-runtime-of-a-library-compatible-with-java\r\n... pertains to the same problem but didn&#39;t help me.\r\n\r\nAny ideas what&#39;s going on here? ","title":"Incompatible because this component declares a component compatible with Java 11 and the consumer needed a component compatible with Java 10","body":"<p>In my build.gradle file I upgraded the version of one dependency (namely: com.db:microservice-commons).\nAfter loading the gradle changes, I get the following error message:</p>\n<pre class=\"lang-none prettyprint-override\"><code>&gt; Build file 'C:\\Projects\\Container\\mschmidt\\mount\\booking-service\\standalone\\build.gradle' line: 50\n\n   &gt; A problem occurred evaluating project ':standalone'.\n   &gt; Could not resolve all files for configuration ':standalone:runtimeClasspath'.\n   &gt; Could not resolve com.db:microservice-commons:2.4.1.\n     Required by:\n         project :standalone\n         project :standalone &gt; project :service\n      &gt; No matching variant of com.db:microservice-commons:2.4.1 was found. The consumer was configured to find a runtime of a library compatible with Java 10, packaged as a jar, preferably optimized for standard JVMs, and its dependencies declared externally but:\n          - Variant 'apiElements' capability com.db:microservice-commons:2.4.1 declares a library, packaged as a jar, and its dependencies declared externally:\n              - Incompatible because this component declares an API of a component compatible with Java 11 and the consumer needed a runtime of a component compatible with Java 10\n              - Other compatible attribute:\n                  - Doesn't say anything about its target Java environment (preferred optimized for standard JVMs)\n          - Variant 'runtimeElements' capability com.db:microservice-commons:2.4.1 declares a runtime of a library, packaged as a jar, and its dependencies declared externally:\n              - Incompatible because this component declares a component compatible with Java 11 and the consumer needed a component compatible with Java 10\n              - Other compatible attribute:\n                  - Doesn't say anything about its target Java environment (preferred optimized for standard JVMs)\n          - Variant 'samplessources' capability com.db:microservice-commons:2.4.1:\n              - Incompatible because this component declares documentation and the consumer needed a library\n              - Other compatible attributes:\n                  - Doesn't say anything about how its dependencies are found (required its dependencies declared externally)\n                  - Doesn't say anything about its target Java environment (preferred optimized for standard JVMs)\n                  - Doesn't say anything about its target Java version (required compatibility with Java 10)\n                  - Doesn't say anything about its elements (required them packaged as a jar)\n                  - Doesn't say anything about its usage (required a runtime)\n</code></pre>\n<p>Line 50+ of file 'C:\\Projects\\Container\\mschmidt\\mount\\booking-service\\standalone\\build.gradle' looks as follows:</p>\n<pre><code>manifest {\n    def manifestClasspath = configurations.runtimeClasspath.collect { it.getName() }.join(' ')\n    attributes 'Archiver-Version': 'Plexus Archiver'\n    attributes 'Build-Jdk': org.gradle.internal.jvm.Jvm.current()\n    attributes 'Main-Class': 'com.db.service.standalone.Standalone', 'Class-Path': manifestClasspath\n    }\n}\n</code></pre>\n<p>I have no clue what to make of this. Project JDK and Gradle JVM are set to Java 11.\nThis post here:\n<a href=\"https://stackoverflow.com/questions/68087672/the-consumer-was-configured-to-find-a-runtime-of-a-library-compatible-with-java\">The consumer was configured to find a runtime of a library compatible with Java 11, packaged as a jar, and its dependencies declared externally but:</a>\n... pertains to the same problem but didn't help me.</p>\n<p>Any ideas what's going on here?</p>\n"},{"tags":["java","spring","testing"],"comments":[{"owner":{"account_id":5160779,"reputation":154,"user_id":4132541,"display_name":"Lior Derei"},"score":0,"creation_date":1692174177,"post_id":76911701,"comment_id":135586536,"body_markdown":"are you sure this is working outside the test? in order for jackson to be able to deserialize the request body, the DTO object must have no args constructor (I see you work with lombok so @NoArgsConstructor)","body":"are you sure this is working outside the test? in order for jackson to be able to deserialize the request body, the DTO object must have no args constructor (I see you work with lombok so @NoArgsConstructor)"},{"owner":{"account_id":10607023,"reputation":111,"user_id":7812031,"display_name":"HankY"},"score":0,"creation_date":1692176085,"post_id":76911701,"comment_id":135586934,"body_markdown":"@LiorDerei yes, when I run `curl -X PUT -i -H &quot;Content-Type: application/json&quot; -d &#39;{&quot;name&quot;: &quot;John&quot;, &quot;email&quot;: &quot;john@example.com&quot;}&#39; http://localhost:8080/user`, I do get 200 ok response. Then I run `curl http://localhost:8080/users` and the name and the email did appear.","body":"@LiorDerei yes, when I run <code>curl -X PUT -i -H &quot;Content-Type: application&#47;json&quot; -d &#39;{&quot;name&quot;: &quot;John&quot;, &quot;email&quot;: &quot;john@example.com&quot;}&#39; http:&#47;&#47;localhost:8080&#47;user</code>, I do get 200 ok response. Then I run <code>curl http:&#47;&#47;localhost:8080&#47;users</code> and the name and the email did appear."}],"answers":[{"tags":[],"owner":{"account_id":14879218,"reputation":383,"user_id":10744429,"display_name":"WLefever"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692176007,"creation_date":1692176007,"answer_id":76911988,"question_id":76911701,"body_markdown":"Your class `CreditCard` contains a field having the same name as a reserved keyword *user*.\r\n\r\n```\r\npublic class CreditCard {\r\n...\r\n\r\n    private int user; // the id of the user\r\n}\r\n```\r\n\r\nYou should change to `userId` for example.\r\n\r\n```\r\npublic class CreditCard {\r\n...\r\n\r\n    private int userId; // the id of the user\r\n}\r\n```","title":"String Boot test failed","body":"<p>Your class <code>CreditCard</code> contains a field having the same name as a reserved keyword <em>user</em>.</p>\n<pre><code>public class CreditCard {\n...\n\n    private int user; // the id of the user\n}\n</code></pre>\n<p>You should change to <code>userId</code> for example.</p>\n<pre><code>public class CreditCard {\n...\n\n    private int userId; // the id of the user\n}\n</code></pre>\n"}],"owner":{"account_id":10607023,"reputation":111,"user_id":7812031,"display_name":"HankY"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692220958,"creation_date":1692173756,"question_id":76911701,"body_markdown":"Here is the GitHub repo of my Spring Boot application that I have trouble with: [click me](https://github.com/HanYuanHsu/shepherd-money/tree/master). \r\n\r\nI want to test the `createUser` method:\r\n```\r\n    /**\r\n     * creates a user entity with information given in the payload, stores the user entity in the database, and\r\n     * return 200 ok response with the id of the saved user\r\n     *\r\n     * @param payload user&#39;s information\r\n     * @return 200 ok response with the id of the saved user\r\n     */\r\n    @PutMapping(&quot;/user&quot;) // handles PUT requests\r\n    public ResponseEntity&lt;Integer&gt; createUser(@RequestBody CreateUserPayload payload) {\r\n        // create a user entity with information given in the payload\r\n        User newUser = new User(payload.getName(), payload.getEmail());\r\n\r\n        // store the user entity in the database\r\n        User savedUser = this.userRepository.save(newUser);\r\n\r\n        // create a ResponseEntity with http status &#39;ok&#39;\r\n        // and return it with the id of the saved user\r\n        return ResponseEntity.ok(savedUser.getId());\r\n    }\r\n```\r\nThe payload class looks like:\r\n```\r\n@Data\r\npublic class CreateUserPayload {\r\n\r\n    private String name;\r\n\r\n    private String email;\r\n}\r\n```\r\n\r\nThe `User` class looks like:\r\n```\r\n@Entity\r\n@Getter\r\n@Setter\r\n@ToString\r\n@RequiredArgsConstructor\r\n@Table(name = &quot;MyUser&quot;)\r\npublic class User {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private int id;\r\n\r\n    private String name;\r\n\r\n    private String email;\r\n\r\n    // TODO: User&#39;s credit card\r\n    // HINT: A user can have one or more, or none at all. We want to be able to query credit cards by user\r\n    //       and user by a credit card.\r\n    private Set&lt;Integer&gt; creditCards = new HashSet&lt;Integer&gt;();\r\n\r\n    /**\r\n     * adds a credit card to this user\r\n     * @param cardId\r\n     */\r\n    public void addCreditCard(int cardId) {\r\n        creditCards.add(cardId);\r\n    }\r\n\r\n\r\n    public User(String name, String email) {\r\n        this.name = name;\r\n        this.email = email;\r\n    }\r\n\r\n    /*\r\n    public int getId() {\r\n        return this.id;\r\n    }\r\n\r\n     */\r\n}\r\n```\r\n\r\nHere is the test code. The user repository `ur` should call the save method and receive the name &quot;John&quot; and the email &quot;john@example.org&quot;:\r\n```\r\n @Test\r\n    public void shouldCreateUser() throws Exception {\r\n        mockMvc.perform(put(&quot;/user&quot;)\r\n                        .content(&quot;{\\&quot;name\\&quot;: \\&quot;John\\&quot;, \\&quot;email\\&quot;: \\&quot;john@example.org\\&quot;}&quot;)\r\n                        .contentType(MediaType.APPLICATION_JSON))\r\n                        .andExpect(status().isOk()\r\n                );\r\n\r\n        verify(ur).save(argThat(user -&gt; user.getName().equals(&quot;John&quot;) &amp;&amp;\r\n                user.getEmail().equals(&quot;john@example.org&quot;)));\r\n    }\r\n```\r\n\r\nHowever, this test didn&#39;t pass, and I got the following test result:\r\n```\r\n00:09:12.363 [Test worker] DEBUG org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Neither @ContextConfiguration nor @ContextHierarchy found for test class [InterviewProjectApplicationTests]: using SpringBootContextLoader\r\n00:09:12.403 [Test worker] DEBUG org.springframework.test.context.support.AbstractContextLoader - Could not detect default resource locations for test class [com.shepherdmoney.interviewproject.InterviewProjectApplicationTests]: no resource found for suffixes {-context.xml, Context.groovy}.\r\n00:09:12.408 [Test worker] INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.shepherdmoney.interviewproject.InterviewProjectApplicationTests]: InterviewProjectApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.\r\n00:09:12.768 [Test worker] DEBUG org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Using ContextCustomizers for test class [InterviewProjectApplicationTests]: [DisableObservabilityContextCustomizer, PropertyMappingContextCustomizer, Customizer, ImportsContextCustomizer, ExcludeFilterContextCustomizer, DuplicateJsonObjectContextCustomizer, MockitoContextCustomizer, TestRestTemplateContextCustomizer]\r\n00:09:13.353 [Test worker] DEBUG org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider - Identified candidate component class: file [/mnt/c/Users/a0306/shepherd-money/build/classes/java/main/com/shepherdmoney/interviewproject/InterviewProjectApplication.class]\r\n00:09:13.364 [Test worker] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.shepherdmoney.interviewproject.InterviewProjectApplication for test class com.shepherdmoney.interviewproject.InterviewProjectApplicationTests\r\n00:09:14.623 [Test worker] DEBUG org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Using TestExecutionListeners for test class [InterviewProjectApplicationTests]: [ServletTestExecutionListener, DirtiesContextBeforeModesTestExecutionListener, ApplicationEventsTestExecutionListener, MockitoTestExecutionListener, DependencyInjectionTestExecutionListener, DirtiesContextTestExecutionListener, TransactionalTestExecutionListener, SqlScriptsTestExecutionListener, EventPublishingTestExecutionListener, RestDocsTestExecutionListener, MockRestServiceServerResetTestExecutionListener, MockMvcPrintOnlyOnFailureTestExecutionListener, WebDriverTestExecutionListener, MockWebServiceServerTestExecutionListener, ResetMocksTestExecutionListener]\r\n00:09:14.637 [Test worker] DEBUG org.springframework.test.context.support.AbstractDirtiesContextTestExecutionListener - Before test class: class [InterviewProjectApplicationTests], class annotated with @DirtiesContext [false] with mode [null]\r\n\r\n  .   ____          _            __ _ _\r\n /\\\\ / ___&#39;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\\r\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n  &#39;  |____| .__|_| |_|_| |_\\__, | / / / /\r\n =========|_|==============|___/=/_/_/_/\r\n :: Spring Boot ::                (v3.0.2)\r\n\r\n00:09:17.460 INFO  --- [    Test worker]   c.s.i.InterviewProjectApplicationTests:51  : Starting InterviewProjectApplicationTests using Java 17.0.8 with PID 1255 (started by hankevin in /mnt/c/Users/a0306/shepherd-money)\r\n00:09:17.472 INFO  --- [    Test worker]   c.s.i.InterviewProjectApplicationTests:630 : No active profile set, falling back to 1 default profile: &quot;default&quot;\r\n00:09:21.482 INFO  --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate:291 : Multiple Spring Data modules found, entering strict repository configuration mode\r\n00:09:21.483 INFO  --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate:138 : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\r\n00:09:21.925 INFO  --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate:208 : Finished Spring Data repository scanning in 380 ms. Found 2 JPA repository interfaces.\r\n00:09:23.328 INFO  --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate:291 : Multiple Spring Data modules found, entering strict repository configuration mode\r\n00:09:23.328 INFO  --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate:138 : Bootstrapping Spring Data JDBC repositories in DEFAULT mode.\r\n00:09:23.474 INFO  --- [    Test worker] .RepositoryConfigurationExtensionSupport:320 : Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.shepherdmoney.interviewproject.repository.CreditCardRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.\r\n00:09:23.475 INFO  --- [    Test worker] .RepositoryConfigurationExtensionSupport:320 : Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.shepherdmoney.interviewproject.repository.UserRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.\r\n00:09:23.475 INFO  --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate:208 : Finished Spring Data repository scanning in 146 ms. Found 0 JDBC repository interfaces.\r\n00:09:26.214 INFO  --- [    Test worker] trationDelegate$BeanPostProcessorChecker:409 : Bean &#39;org.springframework.ws.config.annotation.DelegatingWsConfiguration&#39; of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\r\n00:09:26.373 INFO  --- [    Test worker] .w.s.a.s.AnnotationActionEndpointMapping:239 : Supporting [WS-Addressing August 2004, WS-Addressing 1.0]\r\n00:09:27.589 INFO  --- [    Test worker]  o.hibernate.jpa.internal.util.LogHelper:31  : HHH000204: Processing PersistenceUnitInfo [name: default]\r\n00:09:28.269 INFO  --- [    Test worker]                    org.hibernate.Version:44  : HHH000412: Hibernate ORM core version 6.1.6.Final\r\n00:09:30.776 WARN  --- [    Test worker]            org.hibernate.orm.deprecation:626 : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead\r\n00:09:32.569 INFO  --- [    Test worker]       com.zaxxer.hikari.HikariDataSource:110 : HikariPool-1 - Starting...\r\n00:09:35.043 INFO  --- [    Test worker]        com.zaxxer.hikari.pool.HikariPool:565 : HikariPool-1 - Added connection conn0: url=jdbc:h2:file:~/database user=SA\r\n00:09:35.059 INFO  --- [    Test worker]       com.zaxxer.hikari.HikariDataSource:123 : HikariPool-1 - Start completed.\r\n00:09:35.303 INFO  --- [    Test worker]                              SQL dialect:66  : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect\r\n00:09:43.571 WARN  --- [    Test worker]     o.h.t.s.i.ExceptionHandlerLoggedImpl:27  : GenerationTarget encountered exception accepting command : Error executing DDL &quot;alter table if exists credit_card add column user integer not null&quot; via JDBC Statement\r\norg.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL &quot;alter table if exists credit_card add column user integer not null&quot; via JDBC Statement\r\n\tat org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)\r\n\tat org.hibernate.tool.schema.internal.AbstractSchemaMigrator.applySqlString(AbstractSchemaMigrator.java:587)\r\n\tat org.hibernate.tool.schema.internal.AbstractSchemaMigrator.applySqlStrings(AbstractSchemaMigrator.java:608)\r\n\tat \r\n\t... common frames omitted\r\n00:09:43.701 INFO  --- [    Test worker]       o.h.e.t.j.p.i.JtaPlatformInitiator:51  : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\r\n00:09:43.842 INFO  --- [    Test worker] j.LocalContainerEntityManagerFactoryBean:437 : Initialized JPA EntityManagerFactory for persistence unit &#39;default&#39;\r\n00:09:46.523 WARN  --- [    Test worker] JpaBaseConfiguration$JpaWebConfiguration:227 : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning\r\n00:09:50.524 INFO  --- [    Test worker]    o.s.b.a.h2.H2ConsoleAutoConfiguration:88  : H2 console available at &#39;/h2-ui&#39;. Database available at &#39;jdbc:h2:file:~/database&#39;\r\n00:09:50.862 INFO  --- [    Test worker] o.s.b.t.m.w.SpringBootMockServletContext:435 : Initializing Spring TestDispatcherServlet &#39;&#39;\r\n00:09:50.862 INFO  --- [    Test worker]  o.s.t.web.servlet.TestDispatcherServlet:532 : Initializing Servlet &#39;&#39;\r\n00:09:50.865 INFO  --- [    Test worker]  o.s.t.web.servlet.TestDispatcherServlet:554 : Completed initialization in 0 ms\r\n00:09:50.926 INFO  --- [    Test worker]   c.s.i.InterviewProjectApplicationTests:57  : Started InterviewProjectApplicationTests in 35.689 seconds (process running for 43.199)\r\n\r\nMockHttpServletRequest:\r\n      HTTP Method = PUT\r\n      Request URI = /user\r\n       Parameters = {}\r\n          Headers = [Content-Type:&quot;application/json;charset=UTF-8&quot;, Content-Length:&quot;45&quot;]\r\n             Body = {&quot;name&quot;: &quot;John&quot;, &quot;email&quot;: &quot;john@example.org&quot;}\r\n    Session Attrs = {}\r\n\r\nHandler:\r\n             Type = com.shepherdmoney.interviewproject.controller.UserController\r\n           Method = com.shepherdmoney.interviewproject.controller.UserController#createUser(CreateUserPayload)\r\n\r\nAsync:\r\n    Async started = false\r\n     Async result = null\r\n\r\nResolved Exception:\r\n             Type = null\r\n\r\nModelAndView:\r\n        View name = null\r\n             View = null\r\n            Model = null\r\n\r\nFlashMap:\r\n       Attributes = null\r\n\r\nMockHttpServletResponse:\r\n           Status = 200\r\n    Error message = null\r\n          Headers = [Content-Type:&quot;application/json&quot;]\r\n     Content type = application/json\r\n             Body = 302\r\n    Forwarded URL = null\r\n   Redirected URL = null\r\n          Cookies = []\r\n```\r\n\r\nCan somebody interpret this result? I do not know where the problem is. Much appreciated.\r\n\r\nUpdate: actually, when I start the server by running `./gradlew bootRun`, I get the following error message:\r\n```\r\norg.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL &quot;alter table if exists credit_card add column user integer not null&quot; via JDBC Statement\r\n        at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)\r\n        at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.applySqlString(AbstractSchemaMigrator.java:587)\r\n        at ... omitted\r\n```\r\nAccording to the phrase &quot;alter table if exists credit_card add column user integer not null&quot;, I am guessing this is a problem related to the database. But I don&#39;t know anything further...\r\n\r\nUpdate 2: according to @WLefever, I changed `user` to `userId`. But the method still didn&#39;t pass the test. The report I got was shorter though. It looks like:\r\n```\r\nMockHttpServletRequest:\r\n      HTTP Method = PUT\r\n      Request URI = /user\r\n       Parameters = {}\r\n          Headers = [Content-Type:&quot;application/json;charset=UTF-8&quot;, Content-Length:&quot;45&quot;]\r\n             Body = {&quot;name&quot;: &quot;John&quot;, &quot;email&quot;: &quot;john@example.org&quot;}\r\n    Session Attrs = {}\r\n\r\nHandler:\r\n             Type = com.shepherdmoney.interviewproject.controller.UserController\r\n           Method = com.shepherdmoney.interviewproject.controller.UserController#createUser(CreateUserPayload)\r\n\r\nAsync:\r\n    Async started = false\r\n     Async result = null\r\n\r\nResolved Exception:\r\n             Type = null\r\n\r\nModelAndView:\r\n        View name = null\r\n             View = null\r\n            Model = null\r\n\r\nFlashMap:\r\n       Attributes = null\r\n\r\nMockHttpServletResponse:\r\n           Status = 200\r\n    Error message = null\r\n          Headers = [Content-Type:&quot;application/json&quot;]\r\n     Content type = application/json\r\n             Body = 452\r\n    Forwarded URL = null\r\n   Redirected URL = null\r\n          Cookies = []\r\n```\r\n","title":"String Boot test failed","body":"<p>Here is the GitHub repo of my Spring Boot application that I have trouble with: <a href=\"https://github.com/HanYuanHsu/shepherd-money/tree/master\" rel=\"nofollow noreferrer\">click me</a>.</p>\n<p>I want to test the <code>createUser</code> method:</p>\n<pre><code>    /**\n     * creates a user entity with information given in the payload, stores the user entity in the database, and\n     * return 200 ok response with the id of the saved user\n     *\n     * @param payload user's information\n     * @return 200 ok response with the id of the saved user\n     */\n    @PutMapping(&quot;/user&quot;) // handles PUT requests\n    public ResponseEntity&lt;Integer&gt; createUser(@RequestBody CreateUserPayload payload) {\n        // create a user entity with information given in the payload\n        User newUser = new User(payload.getName(), payload.getEmail());\n\n        // store the user entity in the database\n        User savedUser = this.userRepository.save(newUser);\n\n        // create a ResponseEntity with http status 'ok'\n        // and return it with the id of the saved user\n        return ResponseEntity.ok(savedUser.getId());\n    }\n</code></pre>\n<p>The payload class looks like:</p>\n<pre><code>@Data\npublic class CreateUserPayload {\n\n    private String name;\n\n    private String email;\n}\n</code></pre>\n<p>The <code>User</code> class looks like:</p>\n<pre><code>@Entity\n@Getter\n@Setter\n@ToString\n@RequiredArgsConstructor\n@Table(name = &quot;MyUser&quot;)\npublic class User {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private int id;\n\n    private String name;\n\n    private String email;\n\n    // TODO: User's credit card\n    // HINT: A user can have one or more, or none at all. We want to be able to query credit cards by user\n    //       and user by a credit card.\n    private Set&lt;Integer&gt; creditCards = new HashSet&lt;Integer&gt;();\n\n    /**\n     * adds a credit card to this user\n     * @param cardId\n     */\n    public void addCreditCard(int cardId) {\n        creditCards.add(cardId);\n    }\n\n\n    public User(String name, String email) {\n        this.name = name;\n        this.email = email;\n    }\n\n    /*\n    public int getId() {\n        return this.id;\n    }\n\n     */\n}\n</code></pre>\n<p>Here is the test code. The user repository <code>ur</code> should call the save method and receive the name &quot;John&quot; and the email &quot;john@example.org&quot;:</p>\n<pre><code> @Test\n    public void shouldCreateUser() throws Exception {\n        mockMvc.perform(put(&quot;/user&quot;)\n                        .content(&quot;{\\&quot;name\\&quot;: \\&quot;John\\&quot;, \\&quot;email\\&quot;: \\&quot;john@example.org\\&quot;}&quot;)\n                        .contentType(MediaType.APPLICATION_JSON))\n                        .andExpect(status().isOk()\n                );\n\n        verify(ur).save(argThat(user -&gt; user.getName().equals(&quot;John&quot;) &amp;&amp;\n                user.getEmail().equals(&quot;john@example.org&quot;)));\n    }\n</code></pre>\n<p>However, this test didn't pass, and I got the following test result:</p>\n<pre><code>00:09:12.363 [Test worker] DEBUG org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Neither @ContextConfiguration nor @ContextHierarchy found for test class [InterviewProjectApplicationTests]: using SpringBootContextLoader\n00:09:12.403 [Test worker] DEBUG org.springframework.test.context.support.AbstractContextLoader - Could not detect default resource locations for test class [com.shepherdmoney.interviewproject.InterviewProjectApplicationTests]: no resource found for suffixes {-context.xml, Context.groovy}.\n00:09:12.408 [Test worker] INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [com.shepherdmoney.interviewproject.InterviewProjectApplicationTests]: InterviewProjectApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.\n00:09:12.768 [Test worker] DEBUG org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Using ContextCustomizers for test class [InterviewProjectApplicationTests]: [DisableObservabilityContextCustomizer, PropertyMappingContextCustomizer, Customizer, ImportsContextCustomizer, ExcludeFilterContextCustomizer, DuplicateJsonObjectContextCustomizer, MockitoContextCustomizer, TestRestTemplateContextCustomizer]\n00:09:13.353 [Test worker] DEBUG org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider - Identified candidate component class: file [/mnt/c/Users/a0306/shepherd-money/build/classes/java/main/com/shepherdmoney/interviewproject/InterviewProjectApplication.class]\n00:09:13.364 [Test worker] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration com.shepherdmoney.interviewproject.InterviewProjectApplication for test class com.shepherdmoney.interviewproject.InterviewProjectApplicationTests\n00:09:14.623 [Test worker] DEBUG org.springframework.boot.test.context.SpringBootTestContextBootstrapper - Using TestExecutionListeners for test class [InterviewProjectApplicationTests]: [ServletTestExecutionListener, DirtiesContextBeforeModesTestExecutionListener, ApplicationEventsTestExecutionListener, MockitoTestExecutionListener, DependencyInjectionTestExecutionListener, DirtiesContextTestExecutionListener, TransactionalTestExecutionListener, SqlScriptsTestExecutionListener, EventPublishingTestExecutionListener, RestDocsTestExecutionListener, MockRestServiceServerResetTestExecutionListener, MockMvcPrintOnlyOnFailureTestExecutionListener, WebDriverTestExecutionListener, MockWebServiceServerTestExecutionListener, ResetMocksTestExecutionListener]\n00:09:14.637 [Test worker] DEBUG org.springframework.test.context.support.AbstractDirtiesContextTestExecutionListener - Before test class: class [InterviewProjectApplicationTests], class annotated with @DirtiesContext [false] with mode [null]\n\n  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::                (v3.0.2)\n\n00:09:17.460 INFO  --- [    Test worker]   c.s.i.InterviewProjectApplicationTests:51  : Starting InterviewProjectApplicationTests using Java 17.0.8 with PID 1255 (started by hankevin in /mnt/c/Users/a0306/shepherd-money)\n00:09:17.472 INFO  --- [    Test worker]   c.s.i.InterviewProjectApplicationTests:630 : No active profile set, falling back to 1 default profile: &quot;default&quot;\n00:09:21.482 INFO  --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate:291 : Multiple Spring Data modules found, entering strict repository configuration mode\n00:09:21.483 INFO  --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate:138 : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\n00:09:21.925 INFO  --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate:208 : Finished Spring Data repository scanning in 380 ms. Found 2 JPA repository interfaces.\n00:09:23.328 INFO  --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate:291 : Multiple Spring Data modules found, entering strict repository configuration mode\n00:09:23.328 INFO  --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate:138 : Bootstrapping Spring Data JDBC repositories in DEFAULT mode.\n00:09:23.474 INFO  --- [    Test worker] .RepositoryConfigurationExtensionSupport:320 : Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.shepherdmoney.interviewproject.repository.CreditCardRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.\n00:09:23.475 INFO  --- [    Test worker] .RepositoryConfigurationExtensionSupport:320 : Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.shepherdmoney.interviewproject.repository.UserRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.\n00:09:23.475 INFO  --- [    Test worker] .s.d.r.c.RepositoryConfigurationDelegate:208 : Finished Spring Data repository scanning in 146 ms. Found 0 JDBC repository interfaces.\n00:09:26.214 INFO  --- [    Test worker] trationDelegate$BeanPostProcessorChecker:409 : Bean 'org.springframework.ws.config.annotation.DelegatingWsConfiguration' of type [org.springframework.ws.config.annotation.DelegatingWsConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\n00:09:26.373 INFO  --- [    Test worker] .w.s.a.s.AnnotationActionEndpointMapping:239 : Supporting [WS-Addressing August 2004, WS-Addressing 1.0]\n00:09:27.589 INFO  --- [    Test worker]  o.hibernate.jpa.internal.util.LogHelper:31  : HHH000204: Processing PersistenceUnitInfo [name: default]\n00:09:28.269 INFO  --- [    Test worker]                    org.hibernate.Version:44  : HHH000412: Hibernate ORM core version 6.1.6.Final\n00:09:30.776 WARN  --- [    Test worker]            org.hibernate.orm.deprecation:626 : HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead\n00:09:32.569 INFO  --- [    Test worker]       com.zaxxer.hikari.HikariDataSource:110 : HikariPool-1 - Starting...\n00:09:35.043 INFO  --- [    Test worker]        com.zaxxer.hikari.pool.HikariPool:565 : HikariPool-1 - Added connection conn0: url=jdbc:h2:file:~/database user=SA\n00:09:35.059 INFO  --- [    Test worker]       com.zaxxer.hikari.HikariDataSource:123 : HikariPool-1 - Start completed.\n00:09:35.303 INFO  --- [    Test worker]                              SQL dialect:66  : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect\n00:09:43.571 WARN  --- [    Test worker]     o.h.t.s.i.ExceptionHandlerLoggedImpl:27  : GenerationTarget encountered exception accepting command : Error executing DDL &quot;alter table if exists credit_card add column user integer not null&quot; via JDBC Statement\norg.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL &quot;alter table if exists credit_card add column user integer not null&quot; via JDBC Statement\n    at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)\n    at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.applySqlString(AbstractSchemaMigrator.java:587)\n    at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.applySqlStrings(AbstractSchemaMigrator.java:608)\n    at \n    ... common frames omitted\n00:09:43.701 INFO  --- [    Test worker]       o.h.e.t.j.p.i.JtaPlatformInitiator:51  : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\n00:09:43.842 INFO  --- [    Test worker] j.LocalContainerEntityManagerFactoryBean:437 : Initialized JPA EntityManagerFactory for persistence unit 'default'\n00:09:46.523 WARN  --- [    Test worker] JpaBaseConfiguration$JpaWebConfiguration:227 : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning\n00:09:50.524 INFO  --- [    Test worker]    o.s.b.a.h2.H2ConsoleAutoConfiguration:88  : H2 console available at '/h2-ui'. Database available at 'jdbc:h2:file:~/database'\n00:09:50.862 INFO  --- [    Test worker] o.s.b.t.m.w.SpringBootMockServletContext:435 : Initializing Spring TestDispatcherServlet ''\n00:09:50.862 INFO  --- [    Test worker]  o.s.t.web.servlet.TestDispatcherServlet:532 : Initializing Servlet ''\n00:09:50.865 INFO  --- [    Test worker]  o.s.t.web.servlet.TestDispatcherServlet:554 : Completed initialization in 0 ms\n00:09:50.926 INFO  --- [    Test worker]   c.s.i.InterviewProjectApplicationTests:57  : Started InterviewProjectApplicationTests in 35.689 seconds (process running for 43.199)\n\nMockHttpServletRequest:\n      HTTP Method = PUT\n      Request URI = /user\n       Parameters = {}\n          Headers = [Content-Type:&quot;application/json;charset=UTF-8&quot;, Content-Length:&quot;45&quot;]\n             Body = {&quot;name&quot;: &quot;John&quot;, &quot;email&quot;: &quot;john@example.org&quot;}\n    Session Attrs = {}\n\nHandler:\n             Type = com.shepherdmoney.interviewproject.controller.UserController\n           Method = com.shepherdmoney.interviewproject.controller.UserController#createUser(CreateUserPayload)\n\nAsync:\n    Async started = false\n     Async result = null\n\nResolved Exception:\n             Type = null\n\nModelAndView:\n        View name = null\n             View = null\n            Model = null\n\nFlashMap:\n       Attributes = null\n\nMockHttpServletResponse:\n           Status = 200\n    Error message = null\n          Headers = [Content-Type:&quot;application/json&quot;]\n     Content type = application/json\n             Body = 302\n    Forwarded URL = null\n   Redirected URL = null\n          Cookies = []\n</code></pre>\n<p>Can somebody interpret this result? I do not know where the problem is. Much appreciated.</p>\n<p>Update: actually, when I start the server by running <code>./gradlew bootRun</code>, I get the following error message:</p>\n<pre><code>org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL &quot;alter table if exists credit_card add column user integer not null&quot; via JDBC Statement\n        at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:67)\n        at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.applySqlString(AbstractSchemaMigrator.java:587)\n        at ... omitted\n</code></pre>\n<p>According to the phrase &quot;alter table if exists credit_card add column user integer not null&quot;, I am guessing this is a problem related to the database. But I don't know anything further...</p>\n<p>Update 2: according to @WLefever, I changed <code>user</code> to <code>userId</code>. But the method still didn't pass the test. The report I got was shorter though. It looks like:</p>\n<pre><code>MockHttpServletRequest:\n      HTTP Method = PUT\n      Request URI = /user\n       Parameters = {}\n          Headers = [Content-Type:&quot;application/json;charset=UTF-8&quot;, Content-Length:&quot;45&quot;]\n             Body = {&quot;name&quot;: &quot;John&quot;, &quot;email&quot;: &quot;john@example.org&quot;}\n    Session Attrs = {}\n\nHandler:\n             Type = com.shepherdmoney.interviewproject.controller.UserController\n           Method = com.shepherdmoney.interviewproject.controller.UserController#createUser(CreateUserPayload)\n\nAsync:\n    Async started = false\n     Async result = null\n\nResolved Exception:\n             Type = null\n\nModelAndView:\n        View name = null\n             View = null\n            Model = null\n\nFlashMap:\n       Attributes = null\n\nMockHttpServletResponse:\n           Status = 200\n    Error message = null\n          Headers = [Content-Type:&quot;application/json&quot;]\n     Content type = application/json\n             Body = 452\n    Forwarded URL = null\n   Redirected URL = null\n          Cookies = []\n</code></pre>\n"},{"tags":["java","hadoop","mapreduce","hive"],"answers":[{"tags":[],"owner":{"account_id":6840333,"reputation":279,"user_id":5260951,"display_name":"seneque"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1440752316,"creation_date":1440752316,"answer_id":32267156,"question_id":32266961,"body_markdown":"It is a classpath problem\r\nRoot cause is java.lang.ClassNotFoundException: Class com.cloudera.hive.serde.JSONSerDe\r\n\r\nyou can have a look here to add hive-serdes: https://github.com/cloudera/cdh-twitter-example","title":"Hive Error : FAILED: Execution Error, return code 2 from org.apache.hadoop.hive.ql.exec.mr.MapRedTask","body":"<p>It is a classpath problem\nRoot cause is java.lang.ClassNotFoundException: Class com.cloudera.hive.serde.JSONSerDe</p>\n\n<p>you can have a look here to add hive-serdes: <a href=\"https://github.com/cloudera/cdh-twitter-example\" rel=\"nofollow\">https://github.com/cloudera/cdh-twitter-example</a></p>\n"}],"owner":{"account_id":6420919,"reputation":3,"user_id":4977685,"display_name":"Ankit Gupta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16127,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692219800,"creation_date":1440751694,"question_id":32266961,"body_markdown":"I have got twitter data using flume on HDFS. Have 3 node cluster and MySQL Metastore for hive.\r\n\r\nWhen i execute below query\r\n\r\n    select user_name.screen_name, user_name.followers_count from BBMP_election_tweets limit 10;\r\n\r\nIt is giving proper results.\r\n\r\nBut if i run below query\r\n\r\n    select user_name.screen_name, user_name.followers_count c from BBMP_election_tweets order by c desc;\r\n\r\nIt throws below error\r\n\r\n&gt; Query ID = hduser_20150827102628_15a405ae-59a4-4c90-aa47-045d58c62f02\r\n&gt; Total jobs = 1 Launching Job 1 out of 1 Number of reduce tasks\r\n&gt; determined at compile time: 1 In order to change the average load for\r\n&gt; a reducer (in bytes):   set\r\n&gt; hive.exec.reducers.bytes.per.reducer=&lt;number&gt; In order to limit the\r\n&gt; maximum number of reducers:   set hive.exec.reducers.max=&lt;number&gt; In\r\n&gt; order to set a constant number of reducers:   set\r\n&gt; mapreduce.job.reduces=&lt;number&gt; Starting Job = job_1439458788229_0016,\r\n&gt; Tracking URL =\r\n&gt; http://hdmaster:8088/proxy/application_1439458788229_0016/ Kill\r\n&gt; Command = /usr/local/hadoop/bin/hadoop job  -kill\r\n&gt; job_1439458788229_0016 Hadoop job information for Stage-1: number of\r\n&gt; mappers: 2; number of reducers: 1 2015-08-27 10:27:33,567 Stage-1 map\r\n&gt; = 0%,  reduce = 0% 2015-08-27 10:27:43,908 Stage-1 map = 50%,  reduce = 0% 2015-08-27 10:27:45,015 Stage-1 map = 0%,  reduce = 0% 2015-08-27 10:28:31,011 Stage-1 map = 100%,  reduce = 100% Ended Job =\r\n&gt; job_1439458788229_0016 with errors Error during job, obtaining\r\n&gt; debugging information... Examining task ID:\r\n&gt; task_1439458788229_0016_m_000001 (and more) from job\r\n&gt; job_1439458788229_0016\r\n&gt; \r\n&gt; Task with the most failures(4):\r\n&gt; ----- Task ID:   task_1439458788229_0016_m_000001\r\n&gt; \r\n&gt; URL:  \r\n&gt; http://hdmaster:8088/taskdetails.jsp?jobid=job_1439458788229_0016&amp;tipid=task_1439458788229_0016_m_000001\r\n&gt; ----- Diagnostic Messages for this Task: Error: java.lang.RuntimeException: Error in configuring object\r\n&gt;         at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:109)\r\n&gt;         at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:75)\r\n&gt;         at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:133)\r\n&gt;         at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:446)\r\n&gt;         at org.apache.hadoop.mapred.MapTask.run(MapTask.java:343)\r\n&gt;         at org.apache.hadoop.mapred.YarnChild$2.run(YarnChild.java:163)\r\n&gt;         at java.security.AccessController.doPrivileged(Native Method)\r\n&gt;         at javax.security.auth.Subject.doAs(Subject.java:415)\r\n&gt;         at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1628)\r\n&gt;         at org.apache.hadoop.mapred.YarnChild.main(YarnChild.java:158) Caused by: java.lang.reflect.InvocationTargetException\r\n&gt;         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n&gt;         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\r\n&gt;         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n&gt;         at java.lang.reflect.Method.invoke(Method.java:606)\r\n&gt;         at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:106)\r\n&gt;         ... 9 more Caused by: java.lang.RuntimeException: Error in configuring object\r\n&gt;         at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:109)\r\n&gt;         at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:75)\r\n&gt;         at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:133)\r\n&gt;         at org.apache.hadoop.mapred.MapRunner.configure(MapRunner.java:38)\r\n&gt;         ... 14 more Caused by: java.lang.reflect.InvocationTargetException\r\n&gt;         at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n&gt;         at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\r\n&gt;         at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n&gt;         at java.lang.reflect.Method.invoke(Method.java:606)\r\n&gt;         at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:106)\r\n&gt;         ... 17 more Caused by: java.lang.RuntimeException: Map operator initialization failed\r\n&gt;         at org.apache.hadoop.hive.ql.exec.mr.ExecMapper.configure(ExecMapper.java:140)\r\n&gt;         ... 22 more Caused by: org.apache.hadoop.hive.ql.metadata.HiveException:\r\n&gt; java.lang.ClassNotFoundException: Class\r\n&gt; com.cloudera.hive.serde.JSONSerDe not found\r\n&gt;         at org.apache.hadoop.hive.ql.exec.MapOperator.getConvertedOI(MapOperator.java:328)\r\n&gt;         at org.apache.hadoop.hive.ql.exec.MapOperator.setChildren(MapOperator.java:338)\r\n&gt;         at org.apache.hadoop.hive.ql.exec.mr.ExecMapper.configure(ExecMapper.java:109)\r\n&gt;         ... 22 more Caused by: java.lang.ClassNotFoundException: Class com.cloudera.hive.serde.JSONSerDe not found\r\n&gt;         at org.apache.hadoop.conf.Configuration.getClassByName(Configuration.java:1980)\r\n&gt;         at org.apache.hadoop.hive.ql.plan.PartitionDesc.getDeserializer(PartitionDesc.java:141)\r\n&gt;         at org.apache.hadoop.hive.ql.exec.MapOperator.getConvertedOI(MapOperator.java:302)\r\n&gt;         ... 24 more\r\n&gt; \r\n&gt; \r\n&gt; FAILED: Execution Error, return code 2 from\r\n&gt; org.apache.hadoop.hive.ql.exec.mr.MapRedTask MapReduce Jobs Launched:\r\n&gt; Stage-Stage-1: Map: 2  Reduce: 1   HDFS Read: 0 HDFS Write: 0 FAIL\r\n&gt; Total MapReduce CPU Time Spent: 0 msec\r\n\r\n\r\n**When checked the logs created. It gives below message**\r\n\r\n&gt; 2015-08-27 10:28:48,852 INFO [main]\r\n&gt; org.apache.hadoop.mapred.YarnChild: Kind: mapreduce.job, Service:\r\n&gt; job_1439458788229_0016, Ident:\r\n&gt; (org.apache.hadoop.mapreduce.security.token.JobTokenIdentifier@988145f)\r\n&gt; 2015-08-27 10:28:49,023 INFO [main]\r\n&gt; org.apache.hadoop.mapred.YarnChild: Sleeping for 0ms before retrying\r\n&gt; again. Got null now. 2015-08-27 10:28:49,627 INFO [main]\r\n&gt; org.apache.hadoop.mapred.YarnChild: mapreduce.cluster.local.dir for\r\n&gt; child:\r\n&gt; /tmp/hadoop-hduser/nm-local-dir/usercache/hduser/appcache/application_1439458788229_0016\r\n&gt; 2015-08-27 10:28:50,363 INFO [main]\r\n&gt; org.apache.hadoop.conf.Configuration.deprecation: session.id is\r\n&gt; deprecated. Instead, use dfs.metrics.session-id 2015-08-27\r\n&gt; 10:28:51,186 INFO [main] org.apache.hadoop.mapred.Task:  Using\r\n&gt; ResourceCalculatorProcessTree : [ ] 2015-08-27 10:28:51,534 INFO\r\n&gt; [main] org.apache.hadoop.mapred.MapTask: Processing split:\r\n&gt; Paths:/user/flume/tweets/BBMP_elections/2015/08/25/11/FlumeData.1440484157685:0+52974,/user/flume/tweets/BBMP_elections/2015/08/25/11/FlumeData.1440484188899:0+20119InputFormatClass:\r\n&gt; org.apache.hadoop.mapred.TextInputFormat\r\n&gt; \r\n&gt; 2015-08-27 10:28:51,701 INFO [main]\r\n&gt; org.apache.hadoop.hive.ql.exec.Utilities: PLAN PATH =\r\n&gt; hdfs://hdmaster:8020/tmp/hive/hduser/55daf291-b44e-414b-b3a5-e326134f9f24/hive_2015-08-27_10-26-28_312_5076847637673296334-1/-mr-10004/6e310852-ea63-4789-93f1-754147923e7f/map.xml\r\n&gt; 2015-08-27 10:28:51,701 INFO [main]\r\n&gt; org.apache.hadoop.hive.ql.exec.Utilities: ***************non-local\r\n&gt; mode*************** 2015-08-27 10:28:51,701 INFO [main]\r\n&gt; org.apache.hadoop.hive.ql.exec.Utilities: local path =\r\n&gt; hdfs://hdmaster:8020/tmp/hive/hduser/55daf291-b44e-414b-b3a5-e326134f9f24/hive_2015-08-27_10-26-28_312_5076847637673296334-1/-mr-10004/6e310852-ea63-4789-93f1-754147923e7f/map.xml\r\n&gt; 2015-08-27 10:28:51,701 INFO [main]\r\n&gt; org.apache.hadoop.hive.ql.exec.Utilities: Open file to read in plan:\r\n&gt; hdfs://hdmaster:8020/tmp/hive/hduser/55daf291-b44e-414b-b3a5-e326134f9f24/hive_2015-08-27_10-26-28_312_5076847637673296334-1/-mr-10004/6e310852-ea63-4789-93f1-754147923e7f/map.xml\r\n&gt; 2015-08-27 10:28:51,719 INFO [main]\r\n&gt; org.apache.hadoop.hive.ql.log.PerfLogger: &lt;PERFLOG\r\n&gt; method=deserializePlan from=org.apache.hadoop.hive.ql.exec.Utilities&gt;\r\n&gt; 2015-08-27 10:28:51,720 INFO [main]\r\n&gt; org.apache.hadoop.hive.ql.exec.Utilities: Deserializing MapWork via\r\n&gt; kryo 2015-08-27 10:28:52,043 INFO [main]\r\n&gt; org.apache.hadoop.hive.ql.log.PerfLogger: &lt;/PERFLOG\r\n&gt; method=deserializePlan start=1440651531719 end=1440651532043\r\n&gt; duration=324 from=org.apache.hadoop.hive.ql.exec.Utilities&gt; 2015-08-27\r\n&gt; 10:28:52,080 INFO [main]\r\n&gt; org.apache.hadoop.hive.ql.io.HiveContextAwareRecordReader: Processing\r\n&gt; file\r\n&gt; hdfs://hdmaster:8020/user/flume/tweets/BBMP_elections/2015/08/25/11/FlumeData.1440484157685\r\n&gt; 2015-08-27 10:28:52,080 INFO [main]\r\n&gt; org.apache.hadoop.conf.Configuration.deprecation: map.input.file is\r\n&gt; deprecated. Instead, use mapreduce.map.input.file 2015-08-27\r\n&gt; 10:28:52,080 INFO [main]\r\n&gt; org.apache.hadoop.conf.Configuration.deprecation: map.input.start is\r\n&gt; deprecated. Instead, use mapreduce.map.input.start 2015-08-27\r\n&gt; 10:28:52,080 INFO [main]\r\n&gt; org.apache.hadoop.conf.Configuration.deprecation: map.input.length is\r\n&gt; deprecated. Instead, use mapreduce.map.input.length 2015-08-27\r\n&gt; 10:28:52,080 INFO [main] org.apache.hadoop.mapred.MapTask:\r\n&gt; numReduceTasks: 1 2015-08-27 10:28:52,228 INFO [main]\r\n&gt; org.apache.hadoop.mapred.MapTask: (EQUATOR) 0 kvi 26214396(104857584)\r\n&gt; 2015-08-27 10:28:52,228 INFO [main] org.apache.hadoop.mapred.MapTask:\r\n&gt; mapreduce.task.io.sort.mb: 100 2015-08-27 10:28:52,228 INFO [main]\r\n&gt; org.apache.hadoop.mapred.MapTask: soft limit at 83886080 2015-08-27\r\n&gt; 10:28:52,228 INFO [main] org.apache.hadoop.mapred.MapTask: bufstart =\r\n&gt; 0; bufvoid = 104857600 2015-08-27 10:28:52,228 INFO [main]\r\n&gt; org.apache.hadoop.mapred.MapTask: kvstart = 26214396; length = 6553600\r\n&gt; \r\n&gt; \r\n&gt; 2015-08-27 10:28:52,243 INFO [main]\r\n&gt; org.apache.hadoop.hive.ql.exec.MapOperator: Initializing operator\r\n&gt; MAP[3] 2015-08-27 10:28:52,243 INFO [main]\r\n&gt; org.apache.hadoop.hive.ql.exec.MapOperator: Initialization Done 3 MAP\r\n&gt; 2015-08-27 10:28:52,243 INFO [main]\r\n&gt; org.apache.hadoop.hive.ql.exec.MapOperator: Operator 3 MAP initialized\r\n&gt; 2015-08-27 10:28:52,262 WARN [main]\r\n&gt; org.apache.hadoop.mapred.YarnChild: Exception running child :\r\n&gt; java.lang.RuntimeException: Error in configuring object \tat\r\n&gt; org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:109)\r\n&gt; \tat\r\n&gt; org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:75)\r\n&gt; \tat\r\n&gt; org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:133)\r\n&gt; \tat org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:446)\r\n&gt; \tat org.apache.hadoop.mapred.MapTask.run(MapTask.java:343) \tat\r\n&gt; org.apache.hadoop.mapred.YarnChild$2.run(YarnChild.java:163) \tat\r\n&gt; java.security.AccessController.doPrivileged(Native Method) \tat\r\n&gt; javax.security.auth.Subject.doAs(Subject.java:415) \tat\r\n&gt; org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1628)\r\n&gt; \tat org.apache.hadoop.mapred.YarnChild.main(YarnChild.java:158) Caused\r\n&gt; by: java.lang.reflect.InvocationTargetException \tat\r\n&gt; sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) \tat\r\n&gt; sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\r\n&gt; \tat\r\n&gt; sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n&gt; \tat java.lang.reflect.Method.invoke(Method.java:606) \tat\r\n&gt; org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:106)\r\n&gt; \t... 9 more Caused by: java.lang.RuntimeException: Error in\r\n&gt; configuring object \tat\r\n&gt; org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:109)\r\n&gt; \tat\r\n&gt; org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:75)\r\n&gt; \tat\r\n&gt; org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:133)\r\n&gt; \tat org.apache.hadoop.mapred.MapRunner.configure(MapRunner.java:38)\r\n&gt; \t... 14 more Caused by: java.lang.reflect.InvocationTargetException\r\n&gt; \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) \tat\r\n&gt; sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\r\n&gt; \tat\r\n&gt; sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n&gt; \tat java.lang.reflect.Method.invoke(Method.java:606) \tat\r\n&gt; org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:106)\r\n&gt; \t... 17 more Caused by: java.lang.RuntimeException: Map operator\r\n&gt; initialization failed \tat\r\n&gt; org.apache.hadoop.hive.ql.exec.mr.ExecMapper.configure(ExecMapper.java:140)\r\n&gt; \t... 22 more Caused by:\r\n&gt; org.apache.hadoop.hive.ql.metadata.HiveException:\r\n&gt; java.lang.ClassNotFoundException: Class\r\n&gt; com.cloudera.hive.serde.JSONSerDe not found \tat\r\n&gt; org.apache.hadoop.hive.ql.exec.MapOperator.getConvertedOI(MapOperator.java:328)\r\n&gt; \tat\r\n&gt; org.apache.hadoop.hive.ql.exec.MapOperator.setChildren(MapOperator.java:338)\r\n&gt; \tat\r\n&gt; org.apache.hadoop.hive.ql.exec.mr.ExecMapper.configure(ExecMapper.java:109)\r\n&gt; \t... 22 more Caused by: java.lang.ClassNotFoundException: Class\r\n&gt; com.cloudera.hive.serde.JSONSerDe not found \tat\r\n&gt; org.apache.hadoop.conf.Configuration.getClassByName(Configuration.java:1980)\r\n&gt; \tat\r\n&gt; org.apache.hadoop.hive.ql.plan.PartitionDesc.getDeserializer(PartitionDesc.java:141)\r\n&gt; \tat\r\n&gt; org.apache.hadoop.hive.ql.exec.MapOperator.getConvertedOI(MapOperator.java:302)\r\n&gt; \t... 24 more\r\n&gt; \r\n&gt; 2015-08-27 10:28:52,269 INFO [main] org.apache.hadoop.mapred.Task:\r\n&gt; Runnning cleanup for the task 2015-08-27 10:28:52,278 INFO [main]\r\n&gt; org.apache.hadoop.metrics2.impl.MetricsSystemImpl: Stopping MapTask\r\n&gt; metrics system... 2015-08-27 10:28:52,278 INFO [main]\r\n&gt; org.apache.hadoop.metrics2.impl.MetricsSystemImpl: MapTask metrics\r\n&gt; system stopped. 2015-08-27 10:28:52,279 INFO [main]\r\n&gt; org.apache.hadoop.metrics2.impl.MetricsSystemImpl: MapTask metrics\r\n&gt; system shutdown complete.\r\n\r\n\r\n\r\nPlease suggest. How can this issue be resolved. and why is it occuring.\r\n\r\nThanks","title":"Hive Error : FAILED: Execution Error, return code 2 from org.apache.hadoop.hive.ql.exec.mr.MapRedTask","body":"<p>I have got twitter data using flume on HDFS. Have 3 node cluster and MySQL Metastore for hive.</p>\n\n<p>When i execute below query</p>\n\n<pre><code>select user_name.screen_name, user_name.followers_count from BBMP_election_tweets limit 10;\n</code></pre>\n\n<p>It is giving proper results.</p>\n\n<p>But if i run below query</p>\n\n<pre><code>select user_name.screen_name, user_name.followers_count c from BBMP_election_tweets order by c desc;\n</code></pre>\n\n<p>It throws below error</p>\n\n<blockquote>\n  <p>Query ID = hduser_20150827102628_15a405ae-59a4-4c90-aa47-045d58c62f02\n  Total jobs = 1 Launching Job 1 out of 1 Number of reduce tasks\n  determined at compile time: 1 In order to change the average load for\n  a reducer (in bytes):   set\n  hive.exec.reducers.bytes.per.reducer= In order to limit the\n  maximum number of reducers:   set hive.exec.reducers.max= In\n  order to set a constant number of reducers:   set\n  mapreduce.job.reduces= Starting Job = job_1439458788229_0016,\n  Tracking URL =\n  <a href=\"http://hdmaster:8088/proxy/application_1439458788229_0016/\" rel=\"nofollow\">http://hdmaster:8088/proxy/application_1439458788229_0016/</a> Kill\n  Command = /usr/local/hadoop/bin/hadoop job  -kill\n  job_1439458788229_0016 Hadoop job information for Stage-1: number of\n  mappers: 2; number of reducers: 1 2015-08-27 10:27:33,567 Stage-1 map\n  = 0%,  reduce = 0% 2015-08-27 10:27:43,908 Stage-1 map = 50%,  reduce = 0% 2015-08-27 10:27:45,015 Stage-1 map = 0%,  reduce = 0% 2015-08-27 10:28:31,011 Stage-1 map = 100%,  reduce = 100% Ended Job =\n  job_1439458788229_0016 with errors Error during job, obtaining\n  debugging information... Examining task ID:\n  task_1439458788229_0016_m_000001 (and more) from job\n  job_1439458788229_0016</p>\n  \n  <p>Task with the most failures(4):\n  ----- Task ID:   task_1439458788229_0016_m_000001</p>\n  \n  <p>URL:<br>\n  <a href=\"http://hdmaster:8088/taskdetails.jsp?jobid=job_1439458788229_0016&amp;tipid=task_1439458788229_0016_m_000001\" rel=\"nofollow\">http://hdmaster:8088/taskdetails.jsp?jobid=job_1439458788229_0016&amp;tipid=task_1439458788229_0016_m_000001</a>\n  ----- Diagnostic Messages for this Task: Error: java.lang.RuntimeException: Error in configuring object\n          at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:109)\n          at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:75)\n          at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:133)\n          at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:446)\n          at org.apache.hadoop.mapred.MapTask.run(MapTask.java:343)\n          at org.apache.hadoop.mapred.YarnChild$2.run(YarnChild.java:163)\n          at java.security.AccessController.doPrivileged(Native Method)\n          at javax.security.auth.Subject.doAs(Subject.java:415)\n          at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1628)\n          at org.apache.hadoop.mapred.YarnChild.main(YarnChild.java:158) Caused by: java.lang.reflect.InvocationTargetException\n          at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n          at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n          at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n          at java.lang.reflect.Method.invoke(Method.java:606)\n          at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:106)\n          ... 9 more Caused by: java.lang.RuntimeException: Error in configuring object\n          at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:109)\n          at org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:75)\n          at org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:133)\n          at org.apache.hadoop.mapred.MapRunner.configure(MapRunner.java:38)\n          ... 14 more Caused by: java.lang.reflect.InvocationTargetException\n          at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n          at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n          at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n          at java.lang.reflect.Method.invoke(Method.java:606)\n          at org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:106)\n          ... 17 more Caused by: java.lang.RuntimeException: Map operator initialization failed\n          at org.apache.hadoop.hive.ql.exec.mr.ExecMapper.configure(ExecMapper.java:140)\n          ... 22 more Caused by: org.apache.hadoop.hive.ql.metadata.HiveException:\n  java.lang.ClassNotFoundException: Class\n  com.cloudera.hive.serde.JSONSerDe not found\n          at org.apache.hadoop.hive.ql.exec.MapOperator.getConvertedOI(MapOperator.java:328)\n          at org.apache.hadoop.hive.ql.exec.MapOperator.setChildren(MapOperator.java:338)\n          at org.apache.hadoop.hive.ql.exec.mr.ExecMapper.configure(ExecMapper.java:109)\n          ... 22 more Caused by: java.lang.ClassNotFoundException: Class com.cloudera.hive.serde.JSONSerDe not found\n          at org.apache.hadoop.conf.Configuration.getClassByName(Configuration.java:1980)\n          at org.apache.hadoop.hive.ql.plan.PartitionDesc.getDeserializer(PartitionDesc.java:141)\n          at org.apache.hadoop.hive.ql.exec.MapOperator.getConvertedOI(MapOperator.java:302)\n          ... 24 more</p>\n  \n  <p>FAILED: Execution Error, return code 2 from\n  org.apache.hadoop.hive.ql.exec.mr.MapRedTask MapReduce Jobs Launched:\n  Stage-Stage-1: Map: 2  Reduce: 1   HDFS Read: 0 HDFS Write: 0 FAIL\n  Total MapReduce CPU Time Spent: 0 msec</p>\n</blockquote>\n\n<p><strong>When checked the logs created. It gives below message</strong></p>\n\n<blockquote>\n  <p>2015-08-27 10:28:48,852 INFO [main]\n  org.apache.hadoop.mapred.YarnChild: Kind: mapreduce.job, Service:\n  job_1439458788229_0016, Ident:\n  (org.apache.hadoop.mapreduce.security.token.JobTokenIdentifier@988145f)\n  2015-08-27 10:28:49,023 INFO [main]\n  org.apache.hadoop.mapred.YarnChild: Sleeping for 0ms before retrying\n  again. Got null now. 2015-08-27 10:28:49,627 INFO [main]\n  org.apache.hadoop.mapred.YarnChild: mapreduce.cluster.local.dir for\n  child:\n  /tmp/hadoop-hduser/nm-local-dir/usercache/hduser/appcache/application_1439458788229_0016\n  2015-08-27 10:28:50,363 INFO [main]\n  org.apache.hadoop.conf.Configuration.deprecation: session.id is\n  deprecated. Instead, use dfs.metrics.session-id 2015-08-27\n  10:28:51,186 INFO [main] org.apache.hadoop.mapred.Task:  Using\n  ResourceCalculatorProcessTree : [ ] 2015-08-27 10:28:51,534 INFO\n  [main] org.apache.hadoop.mapred.MapTask: Processing split:\n  Paths:/user/flume/tweets/BBMP_elections/2015/08/25/11/FlumeData.1440484157685:0+52974,/user/flume/tweets/BBMP_elections/2015/08/25/11/FlumeData.1440484188899:0+20119InputFormatClass:\n  org.apache.hadoop.mapred.TextInputFormat</p>\n  \n  <p>2015-08-27 10:28:51,701 INFO [main]\n  org.apache.hadoop.hive.ql.exec.Utilities: PLAN PATH =\n  hdfs://hdmaster:8020/tmp/hive/hduser/55daf291-b44e-414b-b3a5-e326134f9f24/hive_2015-08-27_10-26-28_312_5076847637673296334-1/-mr-10004/6e310852-ea63-4789-93f1-754147923e7f/map.xml\n  2015-08-27 10:28:51,701 INFO [main]\n  org.apache.hadoop.hive.ql.exec.Utilities: ***************non-local\n  mode*************** 2015-08-27 10:28:51,701 INFO [main]\n  org.apache.hadoop.hive.ql.exec.Utilities: local path =\n  hdfs://hdmaster:8020/tmp/hive/hduser/55daf291-b44e-414b-b3a5-e326134f9f24/hive_2015-08-27_10-26-28_312_5076847637673296334-1/-mr-10004/6e310852-ea63-4789-93f1-754147923e7f/map.xml\n  2015-08-27 10:28:51,701 INFO [main]\n  org.apache.hadoop.hive.ql.exec.Utilities: Open file to read in plan:\n  hdfs://hdmaster:8020/tmp/hive/hduser/55daf291-b44e-414b-b3a5-e326134f9f24/hive_2015-08-27_10-26-28_312_5076847637673296334-1/-mr-10004/6e310852-ea63-4789-93f1-754147923e7f/map.xml\n  2015-08-27 10:28:51,719 INFO [main]\n  org.apache.hadoop.hive.ql.log.PerfLogger: \n  2015-08-27 10:28:51,720 INFO [main]\n  org.apache.hadoop.hive.ql.exec.Utilities: Deserializing MapWork via\n  kryo 2015-08-27 10:28:52,043 INFO [main]\n  org.apache.hadoop.hive.ql.log.PerfLogger:  2015-08-27\n  10:28:52,080 INFO [main]\n  org.apache.hadoop.hive.ql.io.HiveContextAwareRecordReader: Processing\n  file\n  hdfs://hdmaster:8020/user/flume/tweets/BBMP_elections/2015/08/25/11/FlumeData.1440484157685\n  2015-08-27 10:28:52,080 INFO [main]\n  org.apache.hadoop.conf.Configuration.deprecation: map.input.file is\n  deprecated. Instead, use mapreduce.map.input.file 2015-08-27\n  10:28:52,080 INFO [main]\n  org.apache.hadoop.conf.Configuration.deprecation: map.input.start is\n  deprecated. Instead, use mapreduce.map.input.start 2015-08-27\n  10:28:52,080 INFO [main]\n  org.apache.hadoop.conf.Configuration.deprecation: map.input.length is\n  deprecated. Instead, use mapreduce.map.input.length 2015-08-27\n  10:28:52,080 INFO [main] org.apache.hadoop.mapred.MapTask:\n  numReduceTasks: 1 2015-08-27 10:28:52,228 INFO [main]\n  org.apache.hadoop.mapred.MapTask: (EQUATOR) 0 kvi 26214396(104857584)\n  2015-08-27 10:28:52,228 INFO [main] org.apache.hadoop.mapred.MapTask:\n  mapreduce.task.io.sort.mb: 100 2015-08-27 10:28:52,228 INFO [main]\n  org.apache.hadoop.mapred.MapTask: soft limit at 83886080 2015-08-27\n  10:28:52,228 INFO [main] org.apache.hadoop.mapred.MapTask: bufstart =\n  0; bufvoid = 104857600 2015-08-27 10:28:52,228 INFO [main]\n  org.apache.hadoop.mapred.MapTask: kvstart = 26214396; length = 6553600</p>\n  \n  <p>2015-08-27 10:28:52,243 INFO [main]\n  org.apache.hadoop.hive.ql.exec.MapOperator: Initializing operator\n  MAP[3] 2015-08-27 10:28:52,243 INFO [main]\n  org.apache.hadoop.hive.ql.exec.MapOperator: Initialization Done 3 MAP\n  2015-08-27 10:28:52,243 INFO [main]\n  org.apache.hadoop.hive.ql.exec.MapOperator: Operator 3 MAP initialized\n  2015-08-27 10:28:52,262 WARN [main]\n  org.apache.hadoop.mapred.YarnChild: Exception running child :\n  java.lang.RuntimeException: Error in configuring object   at\n  org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:109)\n    at\n  org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:75)\n    at\n  org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:133)\n    at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:446)\n    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:343)   at\n  org.apache.hadoop.mapred.YarnChild$2.run(YarnChild.java:163)  at\n  java.security.AccessController.doPrivileged(Native Method)    at\n  javax.security.auth.Subject.doAs(Subject.java:415)    at\n  org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1628)\n    at org.apache.hadoop.mapred.YarnChild.main(YarnChild.java:158) Caused\n  by: java.lang.reflect.InvocationTargetException   at\n  sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)   at\n  sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n    at\n  sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:606)     at\n  org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:106)\n    ... 9 more Caused by: java.lang.RuntimeException: Error in\n  configuring object    at\n  org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:109)\n    at\n  org.apache.hadoop.util.ReflectionUtils.setConf(ReflectionUtils.java:75)\n    at\n  org.apache.hadoop.util.ReflectionUtils.newInstance(ReflectionUtils.java:133)\n    at org.apache.hadoop.mapred.MapRunner.configure(MapRunner.java:38)\n    ... 14 more Caused by: java.lang.reflect.InvocationTargetException\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)  at\n  sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n    at\n  sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:606)     at\n  org.apache.hadoop.util.ReflectionUtils.setJobConf(ReflectionUtils.java:106)\n    ... 17 more Caused by: java.lang.RuntimeException: Map operator\n  initialization failed     at\n  org.apache.hadoop.hive.ql.exec.mr.ExecMapper.configure(ExecMapper.java:140)\n    ... 22 more Caused by:\n  org.apache.hadoop.hive.ql.metadata.HiveException:\n  java.lang.ClassNotFoundException: Class\n  com.cloudera.hive.serde.JSONSerDe not found   at\n  org.apache.hadoop.hive.ql.exec.MapOperator.getConvertedOI(MapOperator.java:328)\n    at\n  org.apache.hadoop.hive.ql.exec.MapOperator.setChildren(MapOperator.java:338)\n    at\n  org.apache.hadoop.hive.ql.exec.mr.ExecMapper.configure(ExecMapper.java:109)\n    ... 22 more Caused by: java.lang.ClassNotFoundException: Class\n  com.cloudera.hive.serde.JSONSerDe not found   at\n  org.apache.hadoop.conf.Configuration.getClassByName(Configuration.java:1980)\n    at\n  org.apache.hadoop.hive.ql.plan.PartitionDesc.getDeserializer(PartitionDesc.java:141)\n    at\n  org.apache.hadoop.hive.ql.exec.MapOperator.getConvertedOI(MapOperator.java:302)\n    ... 24 more</p>\n  \n  <p>2015-08-27 10:28:52,269 INFO [main] org.apache.hadoop.mapred.Task:\n  Runnning cleanup for the task 2015-08-27 10:28:52,278 INFO [main]\n  org.apache.hadoop.metrics2.impl.MetricsSystemImpl: Stopping MapTask\n  metrics system... 2015-08-27 10:28:52,278 INFO [main]\n  org.apache.hadoop.metrics2.impl.MetricsSystemImpl: MapTask metrics\n  system stopped. 2015-08-27 10:28:52,279 INFO [main]\n  org.apache.hadoop.metrics2.impl.MetricsSystemImpl: MapTask metrics\n  system shutdown complete.</p>\n</blockquote>\n\n<p>Please suggest. How can this issue be resolved. and why is it occuring.</p>\n\n<p>Thanks</p>\n"},{"tags":["java","gson"],"comments":[{"owner":{"account_id":5384013,"reputation":6035,"user_id":4288506,"accept_rate":77,"display_name":"Marcono1234"},"score":0,"creation_date":1692130792,"post_id":76902675,"comment_id":135581937,"body_markdown":"Can the `switch_mgmt` value be any JSON value, such as boolean or maybe even a non-empty string? If so, what parsed value do you expect in these cases? Or will it only ever be either an empty JSON string or a JSON object? Also, can&#39;t the user just fix the payload they are sending? If you are the one who provides this service which consumes the data, you should be the one who defines the structure of the JSON data, and if the user provides malformed JSON it would normally be their fault and not something you have to account for.","body":"Can the <code>switch_mgmt</code> value be any JSON value, such as boolean or maybe even a non-empty string? If so, what parsed value do you expect in these cases? Or will it only ever be either an empty JSON string or a JSON object? Also, can&#39;t the user just fix the payload they are sending? If you are the one who provides this service which consumes the data, you should be the one who defines the structure of the JSON data, and if the user provides malformed JSON it would normally be their fault and not something you have to account for."},{"owner":{"account_id":3824966,"reputation":426,"user_id":3171992,"accept_rate":71,"display_name":"Jay Nirgudkar"},"score":0,"creation_date":1692217339,"post_id":76902675,"comment_id":135595276,"body_markdown":"switch_mgmt is used throughout the code only as a map. Example:(Updated the ticket with a sample value). But the user is able to pass a &quot;&quot; when performing a PUT using the API(directly Via postman). Yes, we have given sample examples for the users to view and use and have also mentioned its type but the users rarely see documentations.","body":"switch_mgmt is used throughout the code only as a map. Example:(Updated the ticket with a sample value). But the user is able to pass a &quot;&quot; when performing a PUT using the API(directly Via postman). Yes, we have given sample examples for the users to view and use and have also mentioned its type but the users rarely see documentations."}],"answers":[{"comments":[{"owner":{"account_id":3824966,"reputation":426,"user_id":3171992,"accept_rate":71,"display_name":"Jay Nirgudkar"},"score":0,"creation_date":1693329921,"post_id":76917058,"comment_id":135745426,"body_markdown":"Thank you. I was able to create a deserializer class which was then used by gson typeadapter based on your answer.","body":"Thank you. I was able to create a deserializer class which was then used by gson typeadapter based on your answer."}],"tags":[],"owner":{"account_id":5384013,"reputation":6035,"user_id":4288506,"accept_rate":77,"display_name":"Marcono1234"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692219746,"creation_date":1692219746,"answer_id":76917058,"question_id":76902675,"body_markdown":"This can be solved with a custom [`TypeAdapterFactory`](https://javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/TypeAdapterFactory.html) which obtains the default adapter for the type of the field, but wraps it and first checks the JSON data to detect invalid values, such as an empty string in your example.\r\nFor example:\r\n```java\r\nclass SwitchMgmtAdapterFactory implements TypeAdapterFactory {\r\n    // Constructor called by Gson using reflection\r\n    public SwitchMgmtAdapterFactory() {\r\n    }\r\n\r\n    @Override\r\n    public &lt;T&gt; TypeAdapter&lt;T&gt; create(Gson gson, TypeToken&lt;T&gt; type) {\r\n        // Obtain the default adapter for the type of the field\r\n        // Uses getAdapter instead of getDelegateAdapter due to https://github.com/google/gson/issues/1028\r\n        TypeAdapter&lt;T&gt; delegate = gson.getAdapter(type);\r\n\r\n        return new TypeAdapter&lt;T&gt;() {\r\n            @Override\r\n            public T read(JsonReader in) throws IOException {\r\n                if (in.peek() == JsonToken.BEGIN_OBJECT) {\r\n                    return delegate.read(in);\r\n                }\r\n\r\n                // Otherwise handle malformed value\r\n                // In this example here the value is skipped and `null` is returned,\r\n                // but could instead also inspect the JSON value and use it in some way\r\n                in.skipValue();\r\n                return null;\r\n            }\r\n\r\n            @Override\r\n            public void write(JsonWriter out, T value) throws IOException {\r\n                delegate.write(out, value);\r\n            }\r\n        };\r\n    }\r\n}\r\n```\r\n\r\n\r\nYou can then register that adapter factory on the field using [`@JsonAdapter`](https://javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/annotations/JsonAdapter.html):\r\n```java\r\npublic class Site \r\n{\r\n    @JsonAdapter(SwitchMgmtAdapterFactory.class)\r\n    @SerializedName(&quot;switch_mgmt&quot;)\r\n    Map&lt;String, Object&gt; switchMgmt;\r\n\r\n    ...\r\n}\r\n```\r\n\r\nHowever, as mentioned in the comments personally I think it would be better to require that the client provides valid data. That makes it easier for you to maintain the code, and also easier for the client to notice that the data they are sending is malformed. Otherwise they might waste hours trying to understand why the value they provided is ignored.\r\nThough also note that Gson currently [does not detect unknown fields](https://github.com/google/gson/issues/188) and [missing fields](https://github.com/google/gson/issues/61).","title":"How to ignore type mismatch when using gson to parse input payload","body":"<p>This can be solved with a custom <a href=\"https://javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/TypeAdapterFactory.html\" rel=\"nofollow noreferrer\"><code>TypeAdapterFactory</code></a> which obtains the default adapter for the type of the field, but wraps it and first checks the JSON data to detect invalid values, such as an empty string in your example.\nFor example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class SwitchMgmtAdapterFactory implements TypeAdapterFactory {\n    // Constructor called by Gson using reflection\n    public SwitchMgmtAdapterFactory() {\n    }\n\n    @Override\n    public &lt;T&gt; TypeAdapter&lt;T&gt; create(Gson gson, TypeToken&lt;T&gt; type) {\n        // Obtain the default adapter for the type of the field\n        // Uses getAdapter instead of getDelegateAdapter due to https://github.com/google/gson/issues/1028\n        TypeAdapter&lt;T&gt; delegate = gson.getAdapter(type);\n\n        return new TypeAdapter&lt;T&gt;() {\n            @Override\n            public T read(JsonReader in) throws IOException {\n                if (in.peek() == JsonToken.BEGIN_OBJECT) {\n                    return delegate.read(in);\n                }\n\n                // Otherwise handle malformed value\n                // In this example here the value is skipped and `null` is returned,\n                // but could instead also inspect the JSON value and use it in some way\n                in.skipValue();\n                return null;\n            }\n\n            @Override\n            public void write(JsonWriter out, T value) throws IOException {\n                delegate.write(out, value);\n            }\n        };\n    }\n}\n</code></pre>\n<p>You can then register that adapter factory on the field using <a href=\"https://javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/annotations/JsonAdapter.html\" rel=\"nofollow noreferrer\"><code>@JsonAdapter</code></a>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Site \n{\n    @JsonAdapter(SwitchMgmtAdapterFactory.class)\n    @SerializedName(&quot;switch_mgmt&quot;)\n    Map&lt;String, Object&gt; switchMgmt;\n\n    ...\n}\n</code></pre>\n<p>However, as mentioned in the comments personally I think it would be better to require that the client provides valid data. That makes it easier for you to maintain the code, and also easier for the client to notice that the data they are sending is malformed. Otherwise they might waste hours trying to understand why the value they provided is ignored.\nThough also note that Gson currently <a href=\"https://github.com/google/gson/issues/188\" rel=\"nofollow noreferrer\">does not detect unknown fields</a> and <a href=\"https://github.com/google/gson/issues/61\" rel=\"nofollow noreferrer\">missing fields</a>.</p>\n"}],"owner":{"account_id":3824966,"reputation":426,"user_id":3171992,"accept_rate":71,"display_name":"Jay Nirgudkar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692219746,"creation_date":1692055385,"question_id":76902675,"body_markdown":"Class:\r\n\r\n    public class Site \r\n    {\r\n\r\n        @JsonProperty(&quot;id&quot;)\r\n        String id;\r\n\r\n        @JsonProperty(&quot;name&quot;)\r\n        String name;\r\n\r\n        @SerializedName(&quot;switch_mgmt&quot;)\r\n        Map&lt;String, Object&gt; switchMgmt;\r\n    \r\n    }\r\n\r\n    String = &quot;{&quot; +\r\n            &quot; \\&quot;switch_mgmt\\&quot;: \\&quot;\\&quot;,\\&quot;id\\&quot;: \\&quot;16fc48fa-5a5f-4b0b-882c-5347ef5e3969\\&quot;\r\n            &quot;}&quot;;\r\n\r\nHere I am trying to use gson to parse the string above in the following way:\r\n\r\n    Site data = gson.fromJson(jsonString, new Site().getClass());\r\n\r\nBut I keep getting the exception: \r\n\r\n    [redis] get /internal/sites redis exception: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 1 column 18 path $.switch_mgmt\r\n\r\n\r\nI understand that there is a type mismatch which is why it&#39;s looking for a BEGIN_OBJECT but encountered a String. This payload is being set by the user through postman API and I have no control over the input given by the user.\r\n\r\nIs there a way that gson can ignore this type mismatch?\r\n\r\n\r\nSample(ideal) example for switch_mgmt:\r\n\r\n    &quot;switch_mgmt&quot;: {\r\n        &quot;proxy&quot;: false,\r\n        &quot;port&quot;: &quot;2222&quot;,\r\n        &quot;root_password&quot;: &quot;abc&quot;\r\n    },","title":"How to ignore type mismatch when using gson to parse input payload","body":"<p>Class:</p>\n<pre><code>public class Site \n{\n\n    @JsonProperty(&quot;id&quot;)\n    String id;\n\n    @JsonProperty(&quot;name&quot;)\n    String name;\n\n    @SerializedName(&quot;switch_mgmt&quot;)\n    Map&lt;String, Object&gt; switchMgmt;\n\n}\n\nString = &quot;{&quot; +\n        &quot; \\&quot;switch_mgmt\\&quot;: \\&quot;\\&quot;,\\&quot;id\\&quot;: \\&quot;16fc48fa-5a5f-4b0b-882c-5347ef5e3969\\&quot;\n        &quot;}&quot;;\n</code></pre>\n<p>Here I am trying to use gson to parse the string above in the following way:</p>\n<pre><code>Site data = gson.fromJson(jsonString, new Site().getClass());\n</code></pre>\n<p>But I keep getting the exception:</p>\n<pre><code>[redis] get /internal/sites redis exception: java.lang.IllegalStateException: Expected BEGIN_OBJECT but was STRING at line 1 column 18 path $.switch_mgmt\n</code></pre>\n<p>I understand that there is a type mismatch which is why it's looking for a BEGIN_OBJECT but encountered a String. This payload is being set by the user through postman API and I have no control over the input given by the user.</p>\n<p>Is there a way that gson can ignore this type mismatch?</p>\n<p>Sample(ideal) example for switch_mgmt:</p>\n<pre><code>&quot;switch_mgmt&quot;: {\n    &quot;proxy&quot;: false,\n    &quot;port&quot;: &quot;2222&quot;,\n    &quot;root_password&quot;: &quot;abc&quot;\n},\n</code></pre>\n"},{"tags":["java","rest","rest-assured"],"comments":[{"owner":{"account_id":3084600,"reputation":5860,"user_id":2612030,"display_name":"ewramner"},"score":0,"creation_date":1595848756,"post_id":63114006,"comment_id":111606525,"body_markdown":"See https://github.com/rest-assured/rest-assured/issues/805 for examples, you are dealing with an array and need to select a specific instance or do the assert for all instances.","body":"See <a href=\"https://github.com/rest-assured/rest-assured/issues/805\" rel=\"nofollow noreferrer\">github.com/rest-assured/rest-assured/issues/805</a> for examples, you are dealing with an array and need to select a specific instance or do the assert for all instances."},{"owner":{"account_id":18116982,"reputation":33,"user_id":13173513,"display_name":"bioinformatic98"},"score":0,"creation_date":1595849741,"post_id":63114006,"comment_id":111606999,"body_markdown":"I have tried: find body(&quot; find {it.id==&#39;346&#39;}.personDependencies.name&quot;, hasItems(&quot;json&quot;, &quot;jackson&quot;)) but this returns a null","body":"I have tried: find body(&quot; find {it.id==&#39;346&#39;}.personDependencies.name&quot;, hasItems(&quot;json&quot;, &quot;jackson&quot;)) but this returns a null"},{"owner":{"account_id":3850681,"reputation":2684,"user_id":3190953,"accept_rate":62,"display_name":"Wilfred Clement"},"score":0,"creation_date":1595852944,"post_id":63114006,"comment_id":111608636,"body_markdown":"What exactly is your requirement ?","body":"What exactly is your requirement ?"},{"owner":{"account_id":18116982,"reputation":33,"user_id":13173513,"display_name":"bioinformatic98"},"score":0,"creation_date":1595853134,"post_id":63114006,"comment_id":111608744,"body_markdown":"As you can see, it is only one id in the output JSON file, but what I want to achieve is to be able to select one of the objects with for example id=400 and make assertion if that object has certain values in personDependencies. I have tried: find body(&quot; find {it.id==&#39;346&#39;}.personDependencies.name&quot;, hasItems(&quot;json&quot;, &quot;jackson&quot;)) but this returns a null","body":"As you can see, it is only one id in the output JSON file, but what I want to achieve is to be able to select one of the objects with for example id=400 and make assertion if that object has certain values in personDependencies. I have tried: find body(&quot; find {it.id==&#39;346&#39;}.personDependencies.name&quot;, hasItems(&quot;json&quot;, &quot;jackson&quot;)) but this returns a null"}],"answers":[{"comments":[{"owner":{"account_id":18116982,"reputation":33,"user_id":13173513,"display_name":"bioinformatic98"},"score":0,"creation_date":1595849620,"post_id":63114311,"comment_id":111606937,"body_markdown":"&quot;hasItems&quot; is not causing problems.","body":"&quot;hasItems&quot; is not causing problems."},{"owner":{"account_id":15095197,"reputation":1792,"user_id":10893827,"display_name":"Norayr Sargsyan"},"score":0,"creation_date":1595849670,"post_id":63114311,"comment_id":111606964,"body_markdown":"And what is the problem?","body":"And what is the problem?"},{"owner":{"account_id":18116982,"reputation":33,"user_id":13173513,"display_name":"bioinformatic98"},"score":0,"creation_date":1595849907,"post_id":63114311,"comment_id":111607069,"body_markdown":"I have to select a specific instance in my array for the one specific user as @ewramner suggested above, but I do not know how.","body":"I have to select a specific instance in my array for the one specific user as @ewramner suggested above, but I do not know how."}],"tags":[],"owner":{"account_id":15095197,"reputation":1792,"user_id":10893827,"display_name":"Norayr Sargsyan"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1595854654,"creation_date":1595849170,"answer_id":63114311,"question_id":63114006,"body_markdown":"The first problem you don&#39;t need to check the presence of an item with `hasItems`, you should use `hasItem`\r\n\r\n \r\n\r\n    when().\r\n           get(&quot;/api/personsByID/{id}/{count}&quot;, 262, 2).\r\n           then().\r\n           statusCode(200).\r\n           body(&quot;personDependencies.name&quot;, hasItem(&quot;json&quot;));\r\n\r\nThen if you need to add more message to the assertion when the test fails you can do such way:\r\n\r\n     when().\r\n            get(&quot;/api/personsByID/{id}/{count}&quot;, 262, 2).\r\n            then().\r\n            statusCode(200).\r\n            body(&quot;personDependencies.name&quot;,  describedAs(&quot;Array not containing the provided item&quot;,hasItem(&quot;json&quot;)));\r\n\r\nIn your case you can validate such a way:\r\n\r\n    when().\r\n           get(&quot;/api/personsByID/{id}/{count}&quot;, 262, 2).\r\n           then().\r\n           statusCode(200).\r\n           body(&quot;personDependencies[*].name&quot;, hasItem(&quot;json&quot;));","title":"Problem with checking values of JSON array using Rest Assured","body":"<p>The first problem you don't need to check the presence of an item with <code>hasItems</code>, you should use <code>hasItem</code></p>\n<pre><code>when().\n       get(&quot;/api/personsByID/{id}/{count}&quot;, 262, 2).\n       then().\n       statusCode(200).\n       body(&quot;personDependencies.name&quot;, hasItem(&quot;json&quot;));\n</code></pre>\n<p>Then if you need to add more message to the assertion when the test fails you can do such way:</p>\n<pre><code> when().\n        get(&quot;/api/personsByID/{id}/{count}&quot;, 262, 2).\n        then().\n        statusCode(200).\n        body(&quot;personDependencies.name&quot;,  describedAs(&quot;Array not containing the provided item&quot;,hasItem(&quot;json&quot;)));\n</code></pre>\n<p>In your case you can validate such a way:</p>\n<pre><code>when().\n       get(&quot;/api/personsByID/{id}/{count}&quot;, 262, 2).\n       then().\n       statusCode(200).\n       body(&quot;personDependencies[*].name&quot;, hasItem(&quot;json&quot;));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3850681,"reputation":2684,"user_id":3190953,"accept_rate":62,"display_name":"Wilfred Clement"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1595856469,"creation_date":1595856469,"answer_id":63116371,"question_id":63114006,"body_markdown":"If I am reading your question right you need to check if a certain values are present in a list that is returned for a particular ID\r\n\r\nThe below should work for you\r\n\r\n    given().when().get().then().body(&quot;find {it.id == 346}.personDependencies.name&quot;, hasItems(&quot;json&quot;, &quot;jackson&quot;));","title":"Problem with checking values of JSON array using Rest Assured","body":"<p>If I am reading your question right you need to check if a certain values are present in a list that is returned for a particular ID</p>\n<p>The below should work for you</p>\n<pre><code>given().when().get().then().body(&quot;find {it.id == 346}.personDependencies.name&quot;, hasItems(&quot;json&quot;, &quot;jackson&quot;));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6084504,"reputation":2356,"user_id":4749074,"display_name":"Rib47"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692219676,"creation_date":1692219676,"answer_id":76917051,"question_id":63114006,"body_markdown":"Wilfred Clement&#39;s answer is great. Just want to add 1 more example for better understanding concept and syntax.\r\nUse next syntax if you have to make similar search in some array which is not on &#39;root&#39; level of JSON:\r\n\r\n    .body(&quot;problems.find {it.property == &#39;boardUrl&#39;}.details&quot;, is(&quot;size must be between 1 and 256&quot;))\r\n\r\nThis path is created for the JSON structure below:\r\n\r\n    {\r\n    &quot;title&quot;: &quot;Bad Request&quot;,\r\n    &quot;status&quot;: 400,\r\n    &quot;problems&quot;: [\r\n        {\r\n            &quot;property&quot;: &quot;tag&quot;,\r\n            &quot;value&quot;: &quot;too-big-tag-value&quot;,\r\n            &quot;details&quot;: &quot;size must be between 1 and 10&quot;\r\n        },\r\n        {\r\n            &quot;property&quot;: &quot;name&quot;,\r\n            &quot;value&quot;: &quot;Very big name for testing purposes&quot;,\r\n            &quot;details&quot;: &quot;size must be between 1 and 20&quot;\r\n        }\r\n      ]\r\n    }\r\n\r\n","title":"Problem with checking values of JSON array using Rest Assured","body":"<p>Wilfred Clement's answer is great. Just want to add 1 more example for better understanding concept and syntax.\nUse next syntax if you have to make similar search in some array which is not on 'root' level of JSON:</p>\n<pre><code>.body(&quot;problems.find {it.property == 'boardUrl'}.details&quot;, is(&quot;size must be between 1 and 256&quot;))\n</code></pre>\n<p>This path is created for the JSON structure below:</p>\n<pre><code>{\n&quot;title&quot;: &quot;Bad Request&quot;,\n&quot;status&quot;: 400,\n&quot;problems&quot;: [\n    {\n        &quot;property&quot;: &quot;tag&quot;,\n        &quot;value&quot;: &quot;too-big-tag-value&quot;,\n        &quot;details&quot;: &quot;size must be between 1 and 10&quot;\n    },\n    {\n        &quot;property&quot;: &quot;name&quot;,\n        &quot;value&quot;: &quot;Very big name for testing purposes&quot;,\n        &quot;details&quot;: &quot;size must be between 1 and 20&quot;\n    }\n  ]\n}\n</code></pre>\n"}],"owner":{"account_id":18116982,"reputation":33,"user_id":13173513,"display_name":"bioinformatic98"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1469,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":63116371,"answer_count":3,"score":3,"last_activity_date":1692219676,"creation_date":1595847942,"question_id":63114006,"body_markdown":"I&#39;m trying to add some tests with Rest-Assured to my application, but I can&#39;t figure out how to assert some nested values. The error message is :\r\n&gt;Expected: (a collection containing &quot;json&quot;)\r\n  Actual: [[json, spring, gulp, path etc...]]\r\n\r\nHere is the code :\r\n```\r\n when().\r\n       get(&quot;/api/personsByID/{id}/{count}&quot;, 262, 2).\r\n       then().\r\n       statusCode(200).\r\n       body(&quot;personDependencies.name&quot;, hasItems(&quot;json&quot;));\r\n```\r\nAnd here is the JSON file that is returned by rest controller:\r\n```\r\n[\r\n    {\r\n        &quot;id&quot;: 346,\r\n        &quot;verified&quot;: true,\r\n        &quot;displayName&quot;: &quot;eda656a2c3cb59ae840e40a28ba4ab50bfb9de0185abcb901c6af6dc59d6668f&quot;,\r\n        &quot;emails&quot;: [\r\n            {\r\n                &quot;email&quot;: &quot;16a23f2e5477df0bbcad718c3abc235b2cb8a1b6648d14f58d42a7be13df2b6e&quot;\r\n            }\r\n        ],\r\n        &quot;personDependencies&quot;: [\r\n            {\r\n                &quot;name&quot;: &quot;json&quot;\r\n            },\r\n            {\r\n                &quot;name&quot;: &quot;spring&quot;\r\n            },\r\n            {\r\n                &quot;name&quot;: &quot;gulp&quot;\r\n            },\r\n            {\r\n                &quot;name&quot;: &quot;path&quot;\r\n            },\r\n            {\r\n                &quot;name&quot;: &quot;junit&quot;\r\n            },\r\n            {\r\n                &quot;name&quot;: &quot;activemq&quot;\r\n            },\r\n            {\r\n                &quot;name&quot;: &quot;hibernate&quot;\r\n            },\r\n            {\r\n                &quot;name&quot;: &quot;jstl&quot;\r\n            },\r\n            {\r\n                &quot;name&quot;: &quot;phantomjs&quot;\r\n            },\r\n            {\r\n                &quot;name&quot;: &quot;activiti&quot;\r\n            },\r\n            {\r\n                &quot;name&quot;: &quot;commons&quot;\r\n            },\r\n            {\r\n                &quot;name&quot;: &quot;h2&quot;\r\n            },\r\n            {\r\n                &quot;name&quot;: &quot;joda&quot;\r\n            },\r\n            {\r\n                &quot;name&quot;: &quot;log4j&quot;\r\n            },\r\n            {\r\n                &quot;name&quot;: &quot;exec&quot;\r\n            },\r\n            {\r\n                &quot;name&quot;: &quot;admin&quot;\r\n            },\r\n            {\r\n                &quot;name&quot;: &quot;coveralls&quot;\r\n            },\r\n            {\r\n                &quot;name&quot;: &quot;cxf&quot;\r\n            },\r\n            {\r\n                &quot;name&quot;: &quot;cglib&quot;\r\n            },\r\n            {\r\n                &quot;name&quot;: &quot;camel&quot;\r\n            },\r\n            {\r\n                &quot;name&quot;: &quot;sugaronrest&quot;\r\n            },\r\n            {\r\n                &quot;name&quot;: &quot;tslint&quot;\r\n            },\r\n            {\r\n                &quot;name&quot;: &quot;httpclient&quot;\r\n            },\r\n            {\r\n                &quot;name&quot;: &quot;guava&quot;\r\n            },\r\n            {\r\n                &quot;name&quot;: &quot;inventory&quot;\r\n            },\r\n            {\r\n                &quot;name&quot;: &quot;jackson&quot;\r\n            },\r\n            {\r\n                &quot;name&quot;: &quot;gson&quot;\r\n            },\r\n            {\r\n                &quot;name&quot;: &quot;event&quot;\r\n            },\r\n            {\r\n                &quot;name&quot;: &quot;OTRS&quot;\r\n            },\r\n            {\r\n                &quot;name&quot;: &quot;maven&quot;\r\n            },\r\n            {\r\n                &quot;name&quot;: &quot;karma&quot;\r\n            },\r\n            {\r\n                &quot;name&quot;: &quot;slf4j&quot;\r\n            },\r\n            {\r\n                &quot;name&quot;: &quot;postgresql&quot;\r\n            },\r\n            {\r\n                &quot;name&quot;: &quot;typescript&quot;\r\n            },\r\n            {\r\n                &quot;name&quot;: &quot;jasmine&quot;\r\n            },\r\n            {\r\n                &quot;name&quot;: &quot;spa&quot;\r\n            },\r\n            {\r\n                &quot;name&quot;: &quot;javax.servlet&quot;\r\n            }\r\n        ],\r\n        &quot;countries&quot;: [],\r\n        &quot;member_of&quot;: [],\r\n        &quot;projects&quot;: [],\r\n        &quot;employee_type&quot;: [],\r\n        &quot;languages&quot;: [\r\n            {\r\n                &quot;language&quot;: &quot;reStructuredText&quot;,\r\n                &quot;sum&quot;: 575\r\n            },\r\n            {\r\n                &quot;language&quot;: &quot;JSON&quot;,\r\n                &quot;sum&quot;: 21\r\n            },\r\n            {\r\n                &quot;language&quot;: &quot;JavaScript&quot;,\r\n                &quot;sum&quot;: 4467\r\n            },\r\n            {\r\n                &quot;language&quot;: &quot;Java&quot;,\r\n                &quot;sum&quot;: 7958\r\n            },\r\n            {\r\n                &quot;language&quot;: &quot;Python&quot;,\r\n                &quot;sum&quot;: 2\r\n            },\r\n            {\r\n                &quot;language&quot;: &quot;XML&quot;,\r\n                &quot;sum&quot;: 477\r\n            },\r\n            {\r\n                &quot;language&quot;: &quot;Plain Text&quot;,\r\n                &quot;sum&quot;: 41\r\n            }\r\n        ],\r\n        &quot;distance&quot;: 0.6028837702084446\r\n    }\r\n]\r\n```\r\nI have no idea how to make proper assertions, any help would be great. Thanks!","title":"Problem with checking values of JSON array using Rest Assured","body":"<p>I'm trying to add some tests with Rest-Assured to my application, but I can't figure out how to assert some nested values. The error message is :</p>\n<blockquote>\n<p>Expected: (a collection containing &quot;json&quot;)\nActual: [[json, spring, gulp, path etc...]]</p>\n</blockquote>\n<p>Here is the code :</p>\n<pre><code> when().\n       get(&quot;/api/personsByID/{id}/{count}&quot;, 262, 2).\n       then().\n       statusCode(200).\n       body(&quot;personDependencies.name&quot;, hasItems(&quot;json&quot;));\n</code></pre>\n<p>And here is the JSON file that is returned by rest controller:</p>\n<pre><code>[\n    {\n        &quot;id&quot;: 346,\n        &quot;verified&quot;: true,\n        &quot;displayName&quot;: &quot;eda656a2c3cb59ae840e40a28ba4ab50bfb9de0185abcb901c6af6dc59d6668f&quot;,\n        &quot;emails&quot;: [\n            {\n                &quot;email&quot;: &quot;16a23f2e5477df0bbcad718c3abc235b2cb8a1b6648d14f58d42a7be13df2b6e&quot;\n            }\n        ],\n        &quot;personDependencies&quot;: [\n            {\n                &quot;name&quot;: &quot;json&quot;\n            },\n            {\n                &quot;name&quot;: &quot;spring&quot;\n            },\n            {\n                &quot;name&quot;: &quot;gulp&quot;\n            },\n            {\n                &quot;name&quot;: &quot;path&quot;\n            },\n            {\n                &quot;name&quot;: &quot;junit&quot;\n            },\n            {\n                &quot;name&quot;: &quot;activemq&quot;\n            },\n            {\n                &quot;name&quot;: &quot;hibernate&quot;\n            },\n            {\n                &quot;name&quot;: &quot;jstl&quot;\n            },\n            {\n                &quot;name&quot;: &quot;phantomjs&quot;\n            },\n            {\n                &quot;name&quot;: &quot;activiti&quot;\n            },\n            {\n                &quot;name&quot;: &quot;commons&quot;\n            },\n            {\n                &quot;name&quot;: &quot;h2&quot;\n            },\n            {\n                &quot;name&quot;: &quot;joda&quot;\n            },\n            {\n                &quot;name&quot;: &quot;log4j&quot;\n            },\n            {\n                &quot;name&quot;: &quot;exec&quot;\n            },\n            {\n                &quot;name&quot;: &quot;admin&quot;\n            },\n            {\n                &quot;name&quot;: &quot;coveralls&quot;\n            },\n            {\n                &quot;name&quot;: &quot;cxf&quot;\n            },\n            {\n                &quot;name&quot;: &quot;cglib&quot;\n            },\n            {\n                &quot;name&quot;: &quot;camel&quot;\n            },\n            {\n                &quot;name&quot;: &quot;sugaronrest&quot;\n            },\n            {\n                &quot;name&quot;: &quot;tslint&quot;\n            },\n            {\n                &quot;name&quot;: &quot;httpclient&quot;\n            },\n            {\n                &quot;name&quot;: &quot;guava&quot;\n            },\n            {\n                &quot;name&quot;: &quot;inventory&quot;\n            },\n            {\n                &quot;name&quot;: &quot;jackson&quot;\n            },\n            {\n                &quot;name&quot;: &quot;gson&quot;\n            },\n            {\n                &quot;name&quot;: &quot;event&quot;\n            },\n            {\n                &quot;name&quot;: &quot;OTRS&quot;\n            },\n            {\n                &quot;name&quot;: &quot;maven&quot;\n            },\n            {\n                &quot;name&quot;: &quot;karma&quot;\n            },\n            {\n                &quot;name&quot;: &quot;slf4j&quot;\n            },\n            {\n                &quot;name&quot;: &quot;postgresql&quot;\n            },\n            {\n                &quot;name&quot;: &quot;typescript&quot;\n            },\n            {\n                &quot;name&quot;: &quot;jasmine&quot;\n            },\n            {\n                &quot;name&quot;: &quot;spa&quot;\n            },\n            {\n                &quot;name&quot;: &quot;javax.servlet&quot;\n            }\n        ],\n        &quot;countries&quot;: [],\n        &quot;member_of&quot;: [],\n        &quot;projects&quot;: [],\n        &quot;employee_type&quot;: [],\n        &quot;languages&quot;: [\n            {\n                &quot;language&quot;: &quot;reStructuredText&quot;,\n                &quot;sum&quot;: 575\n            },\n            {\n                &quot;language&quot;: &quot;JSON&quot;,\n                &quot;sum&quot;: 21\n            },\n            {\n                &quot;language&quot;: &quot;JavaScript&quot;,\n                &quot;sum&quot;: 4467\n            },\n            {\n                &quot;language&quot;: &quot;Java&quot;,\n                &quot;sum&quot;: 7958\n            },\n            {\n                &quot;language&quot;: &quot;Python&quot;,\n                &quot;sum&quot;: 2\n            },\n            {\n                &quot;language&quot;: &quot;XML&quot;,\n                &quot;sum&quot;: 477\n            },\n            {\n                &quot;language&quot;: &quot;Plain Text&quot;,\n                &quot;sum&quot;: 41\n            }\n        ],\n        &quot;distance&quot;: 0.6028837702084446\n    }\n]\n</code></pre>\n<p>I have no idea how to make proper assertions, any help would be great. Thanks!</p>\n"},{"tags":["java","android","video","android-videoview"],"answers":[{"comments":[{"owner":{"account_id":3406202,"reputation":1346,"user_id":2857193,"accept_rate":70,"display_name":"James Tan"},"score":0,"creation_date":1603022678,"post_id":53953865,"comment_id":113899038,"body_markdown":"setOnCompletionListener did not trigger, even with loop set to false","body":"setOnCompletionListener did not trigger, even with loop set to false"}],"tags":[],"owner":{"account_id":14739732,"reputation":184,"user_id":10644658,"display_name":"Deepak J"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1545973692,"creation_date":1545973310,"answer_id":53953865,"question_id":34173439,"body_markdown":"You can use a counter and increment the value of it as soon as the first video has stopped playing. This can be achieved by using the `MediaPlayer.OnCompletionListener`.\r\n\r\nBelow worked for me:\r\n\r\n    private static int currentVideo = 0;\r\n    private List&lt;String&gt; fileData = new ArrayList&lt;String&gt;();\r\n    \r\n    videoView.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {\r\n        @Override\r\n        public void onCompletion(MediaPlayer mp) {\r\n            if(!(currentPosition &lt; fileData.size())) {\r\n                return;\r\n            }\r\n            Uri nextUri = Uri.parse(fileData.get(currentPosition++));\r\n            videoView.setVideoURI(nextUri);\r\n            videoView.start();\r\n            //to keep looping into the list, reset the counter to 0.\r\n            //in case you need to stop playing after the list is completed remove the code.\r\n            if(currentPosition == fileData.size()) {\r\n                currentPosition = 0;\r\n            }\r\n        }\r\n    });\r\n\r\nThough the post is too old to answer, the beginner developers who end up here will get as much help as I did.","title":"VideoView Add a multiple videos and play","body":"<p>You can use a counter and increment the value of it as soon as the first video has stopped playing. This can be achieved by using the <code>MediaPlayer.OnCompletionListener</code>.</p>\n\n<p>Below worked for me:</p>\n\n<pre><code>private static int currentVideo = 0;\nprivate List&lt;String&gt; fileData = new ArrayList&lt;String&gt;();\n\nvideoView.setOnCompletionListener(new MediaPlayer.OnCompletionListener() {\n    @Override\n    public void onCompletion(MediaPlayer mp) {\n        if(!(currentPosition &lt; fileData.size())) {\n            return;\n        }\n        Uri nextUri = Uri.parse(fileData.get(currentPosition++));\n        videoView.setVideoURI(nextUri);\n        videoView.start();\n        //to keep looping into the list, reset the counter to 0.\n        //in case you need to stop playing after the list is completed remove the code.\n        if(currentPosition == fileData.size()) {\n            currentPosition = 0;\n        }\n    }\n});\n</code></pre>\n\n<p>Though the post is too old to answer, the beginner developers who end up here will get as much help as I did.</p>\n"}],"owner":{"account_id":6999884,"reputation":160,"user_id":5366239,"accept_rate":83,"display_name":"Jude Bautista"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2269,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1692219423,"creation_date":1449647616,"question_id":34173439,"body_markdown":"Lets pretend that a 5 videos in sdcard or internal storage.  \r\nnow I already get the file path, my problem is how can i insert a multiple videos in VIDEO VIEW ?\r\n\r\n**The next or previous button is not functioning**\r\n\r\nhere is my code \r\n\r\n     public void getFile()\r\n    {\r\n\r\n        urls = getIntent().getStringArrayListExtra(&quot;url_videoAll&quot;);\r\n        keys = getIntent().getStringArrayListExtra(&quot;key_videoAll&quot;);\r\n\r\n        for(int i = 0; i&lt;urls.size();i++) {\r\n            String FileName = URLUtil.guessFileName(urls.get(0), null, MimeTypeMap.getFileExtensionFromUrl(urls.get(0)));\r\n            String yourFilePath = getBaseContext().getFilesDir() + &quot;/&quot; + FileName;\r\n            fileList.add(new File(yourFilePath));\r\n\r\n        }\r\n        playallvideo(fileList);\r\n    }\r\n in this CODE ARE WORKING IN SINGLE VIDEO how about if i have 5 videos ? \r\n          \r\n    private void playallvideo(final List&lt;File&gt; file)\r\n        {\r\n        mediaController = new MediaController(this);\r\n\r\n        video.setMediaController(mediaController);\r\n        video.setVideoPath(file.get(0).toString());\r\n        video.start();\r\n\r\n        mediaController.setPrevNextListeners(new View.OnClickListener() {\r\n            public void onClick(View v) {\r\n                video.setMediaController(mediaController);\r\n                video.setVideoPath(file.get(1).toString());\r\n                video.requestFocus();\r\n                video.start();\r\n                // code for next\r\n            }\r\n        }, new View.OnClickListener() {\r\n            public void onClick(View v) {\r\n                video.setMediaController(mediaController);\r\n                video.setVideoPath(file.get(1).toString());\r\n                video.requestFocus();\r\n                video.start();\r\n                // code for previous\r\n            }\r\n        });\r\n    }\r\n**I need this because I will use MediaController and press the next video**\r\n\r\n","title":"VideoView Add a multiple videos and play","body":"<p>Lets pretend that a 5 videos in sdcard or internal storage.<br>\nnow I already get the file path, my problem is how can i insert a multiple videos in VIDEO VIEW ?</p>\n\n<p><strong>The next or previous button is not functioning</strong></p>\n\n<p>here is my code </p>\n\n<pre><code> public void getFile()\n{\n\n    urls = getIntent().getStringArrayListExtra(\"url_videoAll\");\n    keys = getIntent().getStringArrayListExtra(\"key_videoAll\");\n\n    for(int i = 0; i&lt;urls.size();i++) {\n        String FileName = URLUtil.guessFileName(urls.get(0), null, MimeTypeMap.getFileExtensionFromUrl(urls.get(0)));\n        String yourFilePath = getBaseContext().getFilesDir() + \"/\" + FileName;\n        fileList.add(new File(yourFilePath));\n\n    }\n    playallvideo(fileList);\n}\n</code></pre>\n\n<p>in this CODE ARE WORKING IN SINGLE VIDEO how about if i have 5 videos ? </p>\n\n<pre><code>private void playallvideo(final List&lt;File&gt; file)\n    {\n    mediaController = new MediaController(this);\n\n    video.setMediaController(mediaController);\n    video.setVideoPath(file.get(0).toString());\n    video.start();\n\n    mediaController.setPrevNextListeners(new View.OnClickListener() {\n        public void onClick(View v) {\n            video.setMediaController(mediaController);\n            video.setVideoPath(file.get(1).toString());\n            video.requestFocus();\n            video.start();\n            // code for next\n        }\n    }, new View.OnClickListener() {\n        public void onClick(View v) {\n            video.setMediaController(mediaController);\n            video.setVideoPath(file.get(1).toString());\n            video.requestFocus();\n            video.start();\n            // code for previous\n        }\n    });\n}\n</code></pre>\n\n<p><strong>I need this because I will use MediaController and press the next video</strong></p>\n"},{"tags":["java","android","firebase","firebase-realtime-database"],"answers":[{"comments":[{"owner":{"account_id":44937,"reputation":6553,"user_id":132127,"accept_rate":33,"display_name":"anta40"},"score":0,"creation_date":1513935798,"post_id":47937968,"comment_id":82847445,"body_markdown":"Hi Peter. Sorry, my app didn&#39;t displayed the Firebase content... turns out I forgot to adjust rule. Should be &quot;.read&quot;: true. Anway, yeah it works fine :)","body":"Hi Peter. Sorry, my app didn&#39;t displayed the Firebase content... turns out I forgot to adjust rule. Should be &quot;.read&quot;: true. Anway, yeah it works fine :)"},{"owner":{"account_id":9432262,"reputation":79450,"user_id":7015400,"accept_rate":38,"display_name":"Peter Haddad"},"score":0,"creation_date":1513935847,"post_id":47937968,"comment_id":82847480,"body_markdown":"yes , read and write:true until you authenticate users you can change it then, and okay great! happy coding!","body":"yes , read and write:true until you authenticate users you can change it then, and okay great! happy coding!"}],"tags":[],"owner":{"account_id":9432262,"reputation":79450,"user_id":7015400,"accept_rate":38,"display_name":"Peter Haddad"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1513930304,"creation_date":1513930304,"answer_id":47937968,"question_id":47937873,"body_markdown":"To iterate in each node, do this:\r\n\r\n    DatabaseReference ref=FirebaseDatabase.getInstance().getReference().child(&quot;kos_putra&quot;);\r\n    ref.addValueEventListener(new ValueEventListener(){\r\n      @Override\r\n    public void onDataChange(DataSnapshot dataSnapshot){\r\n      for(DataSnapshot data: dataSnapshot.getChildren()){\r\n           String deskripsi=data.child(&quot;deskripsi&quot;).getValue().toString();\r\n           String nama=data.child(&quot;nama&quot;).getValue().toString();\r\n        }\r\n      }\r\n          @Override\r\n       public void onCancelled(FirebaseError firebaseError) {\r\n\r\n            }\r\n       });\r\n\r\nHere your datasnapshot is on `kos_putra`, add a listener on that location will iterate on all nodes(1,2,3,4) and with the for loop it will get the values that are inside all nodes also.","title":"How to iterate a node in Firebase database?","body":"<p>To iterate in each node, do this:</p>\n\n<pre><code>DatabaseReference ref=FirebaseDatabase.getInstance().getReference().child(\"kos_putra\");\nref.addValueEventListener(new ValueEventListener(){\n  @Override\npublic void onDataChange(DataSnapshot dataSnapshot){\n  for(DataSnapshot data: dataSnapshot.getChildren()){\n       String deskripsi=data.child(\"deskripsi\").getValue().toString();\n       String nama=data.child(\"nama\").getValue().toString();\n    }\n  }\n      @Override\n   public void onCancelled(FirebaseError firebaseError) {\n\n        }\n   });\n</code></pre>\n\n<p>Here your datasnapshot is on <code>kos_putra</code>, add a listener on that location will iterate on all nodes(1,2,3,4) and with the for loop it will get the values that are inside all nodes also.</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1660382369,"post_id":73295068,"comment_id":129523516,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/73295068/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":20076809,"reputation":11,"user_id":14720383,"display_name":"MOHAMMED SHAHBAZ"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660061963,"creation_date":1660061963,"answer_id":73295068,"question_id":47937873,"body_markdown":"myRef.child(&quot;users&quot;).child(firebaseAuth.uid.toString()).addValueEventListener(object:ValueEventListener{\r\n                    override fun onDataChange(snapshot: DataSnapshot) {\r\n\r\n                        try {\r\n                            var td=snapshot.value as HashMap&lt;String,Any&gt;\r\n                            for(key in td.keys){\r\n                                var userInfo=td[key] as String\r\n                                if(key.equals(&quot;imageUrl&quot;)){\r\n                                    Picasso.get().load(userInfo).into(myView.imageProfilePhoto);\r\n                                }else if(key.equals(&quot;name&quot;)){\r\n                                    myView.username.setText(userInfo)\r\n                                }\r\n\r\n                            }\r\n\r\n\r\n                        }catch (ex:Exception){}\r\n                    }\r\n\r\n                    override fun onCancelled(error: DatabaseError) {\r\n\r\n                    }\r\n                })","title":"How to iterate a node in Firebase database?","body":"<p>myRef.child(&quot;users&quot;).child(firebaseAuth.uid.toString()).addValueEventListener(object:ValueEventListener{\noverride fun onDataChange(snapshot: DataSnapshot) {</p>\n<pre><code>                    try {\n                        var td=snapshot.value as HashMap&lt;String,Any&gt;\n                        for(key in td.keys){\n                            var userInfo=td[key] as String\n                            if(key.equals(&quot;imageUrl&quot;)){\n                                Picasso.get().load(userInfo).into(myView.imageProfilePhoto);\n                            }else if(key.equals(&quot;name&quot;)){\n                                myView.username.setText(userInfo)\n                            }\n\n                        }\n\n\n                    }catch (ex:Exception){}\n                }\n\n                override fun onCancelled(error: DatabaseError) {\n\n                }\n            })\n</code></pre>\n"},{"comments":[{"owner":{"account_id":17848421,"reputation":658,"user_id":12964643,"display_name":"KingsDev"},"score":0,"creation_date":1692498037,"post_id":76916975,"comment_id":135630946,"body_markdown":"Thank you for contributing to the Stack Overflow community. This may be a correct answer, but it’d be really useful to provide additional explanation of your code so developers can understand your reasoning. This is especially useful for new developers who aren’t as familiar with the syntax or struggling to understand the concepts. **Would you kindly [edit](https://stackoverflow.com/posts/76916975/edit) your answer to include additional details for the benefit of the community?**","body":"Thank you for contributing to the Stack Overflow community. This may be a correct answer, but it’d be really useful to provide additional explanation of your code so developers can understand your reasoning. This is especially useful for new developers who aren’t as familiar with the syntax or struggling to understand the concepts. <b>Would you kindly <a href=\"https://stackoverflow.com/posts/76916975/edit\">edit</a> your answer to include additional details for the benefit of the community?</b>"}],"tags":[],"owner":{"account_id":20076809,"reputation":11,"user_id":14720383,"display_name":"MOHAMMED SHAHBAZ"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692218751,"creation_date":1692218751,"answer_id":76916975,"question_id":47937873,"body_markdown":"    fun iterateFirebaseNodes() {\r\n        val database = FirebaseDatabase.getInstance()\r\n        val ref = database.reference.child(&quot;your-node-path&quot;)\r\n        ref.addListenerForSingleValueEvent(object : ValueEventListener {\r\n            override fun onDataChange(snapshot: DataSnapshot) {\r\n                for (childSnapshot in snapshot.children) {\r\n                    // This gives you the value of the child node\r\n                    val childData = childSnapshot.value \r\n                    println(childData)\r\n                }\r\n            }\r\n            override fun onCancelled(error: DatabaseError) {\r\n                println(&quot;Failed to read value: ${error.toException()}&quot;)\r\n            }\r\n        })`\r\n    } \r\n","title":"How to iterate a node in Firebase database?","body":"<pre><code>fun iterateFirebaseNodes() {\n    val database = FirebaseDatabase.getInstance()\n    val ref = database.reference.child(&quot;your-node-path&quot;)\n    ref.addListenerForSingleValueEvent(object : ValueEventListener {\n        override fun onDataChange(snapshot: DataSnapshot) {\n            for (childSnapshot in snapshot.children) {\n                // This gives you the value of the child node\n                val childData = childSnapshot.value \n                println(childData)\n            }\n        }\n        override fun onCancelled(error: DatabaseError) {\n            println(&quot;Failed to read value: ${error.toException()}&quot;)\n        }\n    })`\n} \n</code></pre>\n"}],"owner":{"account_id":44937,"reputation":6553,"user_id":132127,"accept_rate":33,"display_name":"anta40"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":868,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":47937968,"answer_count":3,"score":0,"last_activity_date":1692218751,"creation_date":1513929869,"question_id":47937873,"body_markdown":"I&#39;ve a simple database in Firebase like this:\r\n[![enter image description here][1]][1]\r\n\r\nThe following code currently reads a resource fill and render each item read to a RecyclerView.\r\n\r\n    public class kos_putra extends Fragment {\r\n    \r\n        ArrayList&lt;Kost&gt; mList = new ArrayList&lt;&gt;();\r\n        KostAdapter mAdapter;\r\n        DatabaseReference mFirebaseDatabase;\r\n        FirebaseDatabase mFirebaseInstance;\r\n    \r\n        public kos_putra() {\r\n            // Required empty public constructor\r\n        }\r\n    \r\n    \r\n        @Override\r\n        public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                                 Bundle savedInstanceState) {\r\n            // Inflate the layout for this fragment\r\n            View view = inflater.inflate(R.layout.kos_putra, container, false);\r\n    \r\n            RecyclerView recyclerView = (RecyclerView) view.findViewById(R.id.recyclerView);\r\n            LinearLayoutManager layoutManager = new LinearLayoutManager(getActivity());\r\n            recyclerView.setLayoutManager(layoutManager);\r\n            mAdapter = new KostAdapter(mList);\r\n            recyclerView.setAdapter(mAdapter);\r\n    \r\n            fillData();\r\n            return view;\r\n        }\r\n    \r\n    \r\n        private void fillData() {\r\n            Resources resources = getResources();\r\n            String[] arJudul = resources.getStringArray(R.array.places);\r\n            String[] arDeskripsi = resources.getStringArray(R.array.place_desc);\r\n            String[] arLokasi = resources.getStringArray(R.array.place_locations);\r\n            TypedArray a = resources.obtainTypedArray(R.array.places_picture);\r\n            Drawable[] arFoto = new Drawable[a.length()];\r\n            for (int i = 0; i &lt; arFoto.length; i++) {\r\n                BitmapDrawable bd = (BitmapDrawable) a.getDrawable(i);\r\n                RoundedBitmapDrawable rbd =\r\n                        RoundedBitmapDrawableFactory.create(getResources(), bd.getBitmap());\r\n                rbd.setCircular(true);\r\n                arFoto[i] = rbd;\r\n            }\r\n            a.recycle();\r\n    \r\n            for (int i = 0; i &lt; arJudul.length; i++) {\r\n                mList.add(new Kost(arJudul[i], arDeskripsi[i], arLokasi[i], arFoto[i]));\r\n            }\r\n            mAdapter.notifyDataSetChanged();\r\n        }\r\n    \r\n        private void fetchDataFromFirebase(){\r\n            mFirebaseInstance = FirebaseDatabase.getInstance();\r\n            mFirebaseDatabase = mFirebaseInstance.getReference(&quot;kos_putra&quot;);\r\n        }\r\n    }\r\n\r\nNow instead of reading from a file, I want to read from Firebase instead. How do I iterate each node under **kos_putra**? In the picture below, there are 4 objects. Logically, I&#39;m thinking of getting the data count first, then do a for-loop. Still not clear how to do it, though.\r\n\r\n  [1]: https://i.stack.imgur.com/nK0gF.jpg\r\n","title":"How to iterate a node in Firebase database?","body":"<p>I've a simple database in Firebase like this:\n<a href=\"https://i.stack.imgur.com/nK0gF.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nK0gF.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>The following code currently reads a resource fill and render each item read to a RecyclerView.</p>\n\n<pre><code>public class kos_putra extends Fragment {\n\n    ArrayList&lt;Kost&gt; mList = new ArrayList&lt;&gt;();\n    KostAdapter mAdapter;\n    DatabaseReference mFirebaseDatabase;\n    FirebaseDatabase mFirebaseInstance;\n\n    public kos_putra() {\n        // Required empty public constructor\n    }\n\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\n                             Bundle savedInstanceState) {\n        // Inflate the layout for this fragment\n        View view = inflater.inflate(R.layout.kos_putra, container, false);\n\n        RecyclerView recyclerView = (RecyclerView) view.findViewById(R.id.recyclerView);\n        LinearLayoutManager layoutManager = new LinearLayoutManager(getActivity());\n        recyclerView.setLayoutManager(layoutManager);\n        mAdapter = new KostAdapter(mList);\n        recyclerView.setAdapter(mAdapter);\n\n        fillData();\n        return view;\n    }\n\n\n    private void fillData() {\n        Resources resources = getResources();\n        String[] arJudul = resources.getStringArray(R.array.places);\n        String[] arDeskripsi = resources.getStringArray(R.array.place_desc);\n        String[] arLokasi = resources.getStringArray(R.array.place_locations);\n        TypedArray a = resources.obtainTypedArray(R.array.places_picture);\n        Drawable[] arFoto = new Drawable[a.length()];\n        for (int i = 0; i &lt; arFoto.length; i++) {\n            BitmapDrawable bd = (BitmapDrawable) a.getDrawable(i);\n            RoundedBitmapDrawable rbd =\n                    RoundedBitmapDrawableFactory.create(getResources(), bd.getBitmap());\n            rbd.setCircular(true);\n            arFoto[i] = rbd;\n        }\n        a.recycle();\n\n        for (int i = 0; i &lt; arJudul.length; i++) {\n            mList.add(new Kost(arJudul[i], arDeskripsi[i], arLokasi[i], arFoto[i]));\n        }\n        mAdapter.notifyDataSetChanged();\n    }\n\n    private void fetchDataFromFirebase(){\n        mFirebaseInstance = FirebaseDatabase.getInstance();\n        mFirebaseDatabase = mFirebaseInstance.getReference(\"kos_putra\");\n    }\n}\n</code></pre>\n\n<p>Now instead of reading from a file, I want to read from Firebase instead. How do I iterate each node under <strong>kos_putra</strong>? In the picture below, there are 4 objects. Logically, I'm thinking of getting the data count first, then do a for-loop. Still not clear how to do it, though.</p>\n"},{"tags":["java","java-time","datetime-parsing","datetimeformatter"],"answers":[{"tags":[],"owner":{"account_id":2179728,"reputation":73077,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1692217378,"creation_date":1692217020,"answer_id":76916806,"question_id":76916757,"body_markdown":"You do not need any `DateTimeFormatter` because both of your date-time strings are in [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601) format which is the default format used by `java.time` types.\r\n\r\n    public static void main(String[] args) {\r\n        for (var input : inputArray) {\r\n            var ignore = LocalDateTime.parse(input);\r\n        }\r\n        System.out.println(&quot;No exception occured!&quot;);\r\n    }\r\n**Output:**\r\n\r\n    No exception occurred!\r\n\r\nIn case, you want to use your `DateTimeFormatter`, change it to make just the fraction-of-second part optional.\r\n\r\n    DateTimeFormatter dateTimeFormats = DateTimeFormatter.ofPattern(\r\n                        &quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss[.[SSSSSS][SSS]]&quot;);\r\n\r\n[Online Demo](https://ideone.com/orxQNG)\r\n\r\n\r\nLearn more about the modern Date-Time API from **[Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**.","title":"DateTimeFormatter with multiple pattern not working","body":"<p>You do not need any <code>DateTimeFormatter</code> because both of your date-time strings are in <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO 8601</a> format which is the default format used by <code>java.time</code> types.</p>\n<pre><code>public static void main(String[] args) {\n    for (var input : inputArray) {\n        var ignore = LocalDateTime.parse(input);\n    }\n    System.out.println(&quot;No exception occured!&quot;);\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>No exception occurred!\n</code></pre>\n<p>In case, you want to use your <code>DateTimeFormatter</code>, change it to make just the fraction-of-second part optional.</p>\n<pre><code>DateTimeFormatter dateTimeFormats = DateTimeFormatter.ofPattern(\n                    &quot;yyyy-MM-dd'T'HH:mm:ss[.[SSSSSS][SSS]]&quot;);\n</code></pre>\n<p><a href=\"https://ideone.com/orxQNG\" rel=\"nofollow noreferrer\">Online Demo</a></p>\n<p>Learn more about the modern Date-Time API from <strong><a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">Trail: Date Time</a></strong>.</p>\n"},{"tags":[],"owner":{"account_id":1656564,"reputation":31,"user_id":1525969,"display_name":"Ch.K."},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1692217316,"creation_date":1692217316,"answer_id":76916839,"question_id":76916757,"body_markdown":"If you change the order of the pattern to \r\n\r\n&gt; private static final DateTimeFormatter dateTimeFormats =\r\n&gt; DateTimeFormatter.ofPattern(\r\n&gt;             &quot;[yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSSSS]&quot; + //: Year, month, day, &#39;T&#39; separator, hour, minute, second, and microseconds (e.g.,\r\n&gt; 2023-05-21T12:34:56.123456)\r\n&gt;             &quot;[yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSS]&quot;  //: Year, month, day, &#39;T&#39; separator, hour, minute, second, and milliseconds (e.g.,\r\n&gt; 2023-05-21T12:34:56.789)\r\n&gt;     );\r\n\r\nthis should do the trick.\r\n\r\nSo the timestamp with microseconds will be handled first with the parser for microseconds. In our example the microsecond timestamp is handled first by the millisecond parser, which complaints about the microsecond part he cannot handle.","title":"DateTimeFormatter with multiple pattern not working","body":"<p>If you change the order of the pattern to</p>\n<blockquote>\n<p>private static final DateTimeFormatter dateTimeFormats =\nDateTimeFormatter.ofPattern(\n&quot;[yyyy-MM-dd'T'HH:mm:ss.SSSSSS]&quot; + //: Year, month, day, 'T' separator, hour, minute, second, and microseconds (e.g.,\n2023-05-21T12:34:56.123456)\n&quot;[yyyy-MM-dd'T'HH:mm:ss.SSS]&quot;  //: Year, month, day, 'T' separator, hour, minute, second, and milliseconds (e.g.,\n2023-05-21T12:34:56.789)\n);</p>\n</blockquote>\n<p>this should do the trick.</p>\n<p>So the timestamp with microseconds will be handled first with the parser for microseconds. In our example the microsecond timestamp is handled first by the millisecond parser, which complaints about the microsecond part he cannot handle.</p>\n"}],"owner":{"account_id":3529693,"reputation":1020,"user_id":2949645,"display_name":"Sahib Yar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76916806,"answer_count":2,"score":1,"last_activity_date":1692217818,"creation_date":1692216519,"question_id":76916757,"body_markdown":"Both of these patterns working fine when tested separately but they are not working together in a single `ofPattern { &quot;[]&quot; + &quot;[]&quot;}` statement. \r\n\r\nPlease guide what am I missing here\r\n```java\r\nimport java.time.format.DateTimeFormatter;\r\nimport java.time.format.DateTimeFormatterBuilder;\r\nimport java.time.LocalDate;\r\nimport java.time.LocalDateTime;\r\nimport java.time.LocalTime;\r\n\r\npublic class SampleProgram {\r\n    \r\n    private static final DateTimeFormatter dateTimeFormats = DateTimeFormatter.ofPattern(\r\n            &quot;[yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSS]&quot; + //: Year, month, day, &#39;T&#39; separator, hour, minute, second, and milliseconds (e.g., 2023-05-21T12:34:56.789)\r\n            &quot;[yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSSSS]&quot;  //: Year, month, day, &#39;T&#39; separator, hour, minute, second, and microseconds (e.g., 2023-05-21T12:34:56.123456)\r\n    );\r\n\r\n    private static final String[] inputArray = new String[]{\r\n        &quot;2021-01-30T23:45:00.123&quot;,\r\n        &quot;2023-08-15T12:34:56.789123&quot;,\r\n    };\r\n\r\n    \r\n    public static void main(String[] args) {\r\n        \r\n        for (var input : inputArray) {\r\n            var ignore = LocalDateTime.parse(input, dateTimeFormats);\r\n        }\r\n        System.out.println(&quot;No exception occured!&quot;);\r\n    }\r\n}\r\n```\r\n\r\nOutput:\r\n```\r\nException in thread &quot;main&quot; java.time.format.DateTimeParseException: Text &#39;2023-08-15T12:34:56.789123&#39; could not be parsed, unparsed text found at index 23\r\nat java.base/java.time.format.DateTimeFormatter.parseResolved0(DateTimeFormatter.java:2049)\r\n\tat java.base/java.time.format.DateTimeFormatter.parse(DateTimeFormatter.java:1948)at java.base/java.time.LocalDateTime.parse(LocalDateTime.java:492)\r\n\tat SampleProgram.main(SampleProgram.java:25)\r\n```","title":"DateTimeFormatter with multiple pattern not working","body":"<p>Both of these patterns working fine when tested separately but they are not working together in a single <code>ofPattern { &quot;[]&quot; + &quot;[]&quot;}</code> statement.</p>\n<p>Please guide what am I missing here</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.time.format.DateTimeFormatter;\nimport java.time.format.DateTimeFormatterBuilder;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.time.LocalTime;\n\npublic class SampleProgram {\n    \n    private static final DateTimeFormatter dateTimeFormats = DateTimeFormatter.ofPattern(\n            &quot;[yyyy-MM-dd'T'HH:mm:ss.SSS]&quot; + //: Year, month, day, 'T' separator, hour, minute, second, and milliseconds (e.g., 2023-05-21T12:34:56.789)\n            &quot;[yyyy-MM-dd'T'HH:mm:ss.SSSSSS]&quot;  //: Year, month, day, 'T' separator, hour, minute, second, and microseconds (e.g., 2023-05-21T12:34:56.123456)\n    );\n\n    private static final String[] inputArray = new String[]{\n        &quot;2021-01-30T23:45:00.123&quot;,\n        &quot;2023-08-15T12:34:56.789123&quot;,\n    };\n\n    \n    public static void main(String[] args) {\n        \n        for (var input : inputArray) {\n            var ignore = LocalDateTime.parse(input, dateTimeFormats);\n        }\n        System.out.println(&quot;No exception occured!&quot;);\n    }\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>Exception in thread &quot;main&quot; java.time.format.DateTimeParseException: Text '2023-08-15T12:34:56.789123' could not be parsed, unparsed text found at index 23\nat java.base/java.time.format.DateTimeFormatter.parseResolved0(DateTimeFormatter.java:2049)\n    at java.base/java.time.format.DateTimeFormatter.parse(DateTimeFormatter.java:1948)at java.base/java.time.LocalDateTime.parse(LocalDateTime.java:492)\n    at SampleProgram.main(SampleProgram.java:25)\n</code></pre>\n"},{"tags":["java","mapstruct"],"comments":[{"owner":{"account_id":3052937,"reputation":17914,"user_id":2587166,"accept_rate":83,"display_name":"Luca Basso Ricci"},"score":0,"creation_date":1692253388,"post_id":76913421,"comment_id":135598767,"body_markdown":"You need to rewrite `Client clientFrom(ParcelDto parcel)` adding `@Context` parameter so mapstruct is able to match call","body":"You need to rewrite <code>Client clientFrom(ParcelDto parcel)</code> adding <code>@Context</code> parameter so mapstruct is able to match call"}],"owner":{"account_id":27195162,"reputation":33,"user_id":20728182,"display_name":"JsbDev"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":148,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692217766,"creation_date":1692187817,"question_id":76913421,"body_markdown":"I&#39;m using MapStruct version 1.4.2, Java 17 and Spring-boot 3.1.0.\r\nHere I&#39;m trying to use some fields in the source to get a value from a cache which is passed using @Context.\r\n\r\n    @Mapper(componentModel = &quot;spring&quot;, uses = {UrlMapper.class, UserDataCache.class})\r\n    public interface PackageMapper { \r\n        PackageMapper INSTANCE = Mappers.getMapper(PackageMapper.class);\r\n\t\r\n\t\t@Mapping(target = &quot;childClientId&quot;, source = &quot;childClientId&quot;, defaultValue = &quot;0&quot;)\r\n\t\t@Mapping(target = &quot;userData&quot;, source = &quot;parcel&quot;, qualifiedByName = &quot;userDataTestMapping&quot;)\r\n\t\tClient clientFrom(ParcelDto parcel);\r\n\r\n\t\t@Named(&quot;userDataTestMapping&quot;)\r\n\t\tdefault UserData clientDataFrom(ParcelDto parcel, @Context UserDataCache userDataCache) {\r\n\t\t\treturn userDataCache.getUserDetails(parcel.getClientId(), parcel.getChildClientId());\r\n\t\t}\r\n\t\r\n    }\r\n\r\n    public class UserDataCache {\r\n      private final Cache&lt;String, UserData&gt; userDataCache;\r\n\t\r\n\t  public UserData getUserDetails(Integer clientId, Integer childClientId) {\r\n        String key = String.format(&quot;%d_%d&quot;, clientId, childClientId);\r\n        return clientsDataCache.getIfPresent(key);\r\n      }\r\n\t\r\n    }\r\n\r\n    public class ParcelDto { \r\n\t\t@JsonProperty(&quot;clientId&quot;)\r\n        private String clientId;\r\n\t\t\r\n\t\t@JsonProperty(&quot;childClientId&quot;)\r\n        private String childClientId;\r\n\t}\r\n\t\r\n    public class PackageProgress { \r\n\t    private Sender sender;\r\n    }\r\n\t\r\n    public class Sender {\r\n        private Client client;\r\n    }\r\n\r\n    public class Client {\r\n        private Integer childClientId;\r\n        private UserData userData;\r\n    }\r\n\r\nBut end up having below error where it cant resolve the `@Named` method. If I remove the `@Context` parameter I no longer have the error. What could be the reason not being able to use `@Context` here?\r\nIs there an alternative to do this?\r\n\r\nThanks.","title":"MapStruct cant find method annotated with @Named#value when @Context is used","body":"<p>I'm using MapStruct version 1.4.2, Java 17 and Spring-boot 3.1.0.\nHere I'm trying to use some fields in the source to get a value from a cache which is passed using @Context.</p>\n<pre><code>@Mapper(componentModel = &quot;spring&quot;, uses = {UrlMapper.class, UserDataCache.class})\npublic interface PackageMapper { \n    PackageMapper INSTANCE = Mappers.getMapper(PackageMapper.class);\n\n    @Mapping(target = &quot;childClientId&quot;, source = &quot;childClientId&quot;, defaultValue = &quot;0&quot;)\n    @Mapping(target = &quot;userData&quot;, source = &quot;parcel&quot;, qualifiedByName = &quot;userDataTestMapping&quot;)\n    Client clientFrom(ParcelDto parcel);\n\n    @Named(&quot;userDataTestMapping&quot;)\n    default UserData clientDataFrom(ParcelDto parcel, @Context UserDataCache userDataCache) {\n        return userDataCache.getUserDetails(parcel.getClientId(), parcel.getChildClientId());\n    }\n\n}\n\npublic class UserDataCache {\n  private final Cache&lt;String, UserData&gt; userDataCache;\n\n  public UserData getUserDetails(Integer clientId, Integer childClientId) {\n    String key = String.format(&quot;%d_%d&quot;, clientId, childClientId);\n    return clientsDataCache.getIfPresent(key);\n  }\n\n}\n\npublic class ParcelDto { \n    @JsonProperty(&quot;clientId&quot;)\n    private String clientId;\n    \n    @JsonProperty(&quot;childClientId&quot;)\n    private String childClientId;\n}\n\npublic class PackageProgress { \n    private Sender sender;\n}\n\npublic class Sender {\n    private Client client;\n}\n\npublic class Client {\n    private Integer childClientId;\n    private UserData userData;\n}\n</code></pre>\n<p>But end up having below error where it cant resolve the <code>@Named</code> method. If I remove the <code>@Context</code> parameter I no longer have the error. What could be the reason not being able to use <code>@Context</code> here?\nIs there an alternative to do this?</p>\n<p>Thanks.</p>\n"},{"tags":["java","spring-boot","mapstruct"],"comments":[{"owner":{"account_id":27195162,"reputation":33,"user_id":20728182,"display_name":"JsbDev"},"score":0,"creation_date":1692217729,"post_id":76916812,"comment_id":135595347,"body_markdown":"@S&#246;ren my mistake, yes.","body":"@S&#246;ren my mistake, yes."}],"owner":{"account_id":27195162,"reputation":33,"user_id":20728182,"display_name":"JsbDev"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":193,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692217687,"creation_date":1692217058,"question_id":76916812,"body_markdown":"I&#39;m using MapStruct version 1.4.2, Java 17 and Spring-boot 3.1.0.\r\nHere I&#39;m trying to map into a nested object by passing source to the mapper method as below. \r\n\r\n    public class PackageProgress { \r\n\t    private Sender sender;\r\n    }\r\n\t\r\n    public class Sender {\r\n        private Client client;\r\n    }\r\n\r\n    public class Client {\r\n        private Integer childClientId;\r\n        private ClientCacheData clientCacheData;\r\n    }\r\n\r\n    public class ClientCacheData {\r\n        private String clientName;\r\n        private String clientAddress;\r\n    }\r\n\r\n    public class ClientData {\r\n        private String clientName;\r\n        private String clientAddress;\r\n    }\r\n\r\n    public class PackageGateway {\r\n\r\n        private final ClientDataCache clientDataCache;\r\n        private final ParcelConnector connector;\r\n        private final PackageMapper packageMapper;\r\n        public Mono&lt;PackageProgress&gt; getUserById(ResolvedPackageId uid) {\r\n            return connector.getById(uid)\r\n               .map(parcel -&gt; {\r\n                   ClientData clientData = clientDataCache.getClientDetails(parcel.getClientId(), parcel.getChildClientId());\r\n                   PackageProgress packageProgress = packageMapper.from(parcel, uid, clientData);\r\n                   return packageProgress;\r\n              });\r\n        }\r\n\t\r\n    }\r\n\r\n    @Mapper(componentModel = &quot;spring&quot;, uses = UrlMapper.class)\r\n    public interface PackageMapper {\r\n\r\n        PackageMapper INSTANCE = Mappers.getMapper(PackageMapper.class);\r\n\r\n        @Mapping(target = &quot;sender&quot;, source = &quot;parcel&quot;)\r\n        @Mapping(target = &quot;sender.client.clientCacheData&quot;, source = &quot;clientData&quot;)\r\n        PackageProgress from(ParcelDto parcel, ResolvedPackageId uid, ClientData clientData);\r\n\t\r\n\t    @Mapping(target = &quot;childClientId&quot;, source = &quot;childClientId&quot;, defaultValue = &quot;0&quot;)\r\n        Client clientFrom(ParcelDto parcel);\r\n\r\n        @Mapping(target = &quot;client&quot;, source = &quot;parcel&quot;)\r\n        Sender senderFrom(ParcelDto parcel);\r\n\t\r\n    }\r\n\r\nBut when I introduced new mapping `@Mapping(target = &quot;sender.client.clientCacheData&quot;, source = &quot;clientData&quot;)` end up having below errors. \r\n\r\n    java: No read accessor found for property &quot;sender&quot; in target type.\r\n    java: No target bean properties found: can&#39;t map property &quot;ParcelDto parcel&quot; to &quot;Sender sender&quot;. Consider to declare/implement a mapping method: &quot;Sender map(ParcelDto value)&quot;.\r\n    java: Unknown property &quot;client&quot; in type Sender for target name &quot;sender.client.clientCacheData&quot;. Did you mean &quot;sender.client&quot;?\r\n\r\nIs this nested mapping scenario not possible using `@Mapping`?\r\nWhat could be missing here?","title":"Mapstruct is unable to map into multiple levels of nested objects","body":"<p>I'm using MapStruct version 1.4.2, Java 17 and Spring-boot 3.1.0.\nHere I'm trying to map into a nested object by passing source to the mapper method as below.</p>\n<pre><code>public class PackageProgress { \n    private Sender sender;\n}\n\npublic class Sender {\n    private Client client;\n}\n\npublic class Client {\n    private Integer childClientId;\n    private ClientCacheData clientCacheData;\n}\n\npublic class ClientCacheData {\n    private String clientName;\n    private String clientAddress;\n}\n\npublic class ClientData {\n    private String clientName;\n    private String clientAddress;\n}\n\npublic class PackageGateway {\n\n    private final ClientDataCache clientDataCache;\n    private final ParcelConnector connector;\n    private final PackageMapper packageMapper;\n    public Mono&lt;PackageProgress&gt; getUserById(ResolvedPackageId uid) {\n        return connector.getById(uid)\n           .map(parcel -&gt; {\n               ClientData clientData = clientDataCache.getClientDetails(parcel.getClientId(), parcel.getChildClientId());\n               PackageProgress packageProgress = packageMapper.from(parcel, uid, clientData);\n               return packageProgress;\n          });\n    }\n\n}\n\n@Mapper(componentModel = &quot;spring&quot;, uses = UrlMapper.class)\npublic interface PackageMapper {\n\n    PackageMapper INSTANCE = Mappers.getMapper(PackageMapper.class);\n\n    @Mapping(target = &quot;sender&quot;, source = &quot;parcel&quot;)\n    @Mapping(target = &quot;sender.client.clientCacheData&quot;, source = &quot;clientData&quot;)\n    PackageProgress from(ParcelDto parcel, ResolvedPackageId uid, ClientData clientData);\n\n    @Mapping(target = &quot;childClientId&quot;, source = &quot;childClientId&quot;, defaultValue = &quot;0&quot;)\n    Client clientFrom(ParcelDto parcel);\n\n    @Mapping(target = &quot;client&quot;, source = &quot;parcel&quot;)\n    Sender senderFrom(ParcelDto parcel);\n\n}\n</code></pre>\n<p>But when I introduced new mapping <code>@Mapping(target = &quot;sender.client.clientCacheData&quot;, source = &quot;clientData&quot;)</code> end up having below errors.</p>\n<pre><code>java: No read accessor found for property &quot;sender&quot; in target type.\njava: No target bean properties found: can't map property &quot;ParcelDto parcel&quot; to &quot;Sender sender&quot;. Consider to declare/implement a mapping method: &quot;Sender map(ParcelDto value)&quot;.\njava: Unknown property &quot;client&quot; in type Sender for target name &quot;sender.client.clientCacheData&quot;. Did you mean &quot;sender.client&quot;?\n</code></pre>\n<p>Is this nested mapping scenario not possible using <code>@Mapping</code>?\nWhat could be missing here?</p>\n"},{"tags":["java","maven","jpa","datasource","helidon"],"comments":[{"owner":{"account_id":72101,"reputation":15566,"user_id":208288,"accept_rate":67,"display_name":"Laird Nelson"},"score":0,"creation_date":1692636273,"post_id":76916860,"comment_id":135647595,"body_markdown":"At root, this is a `DataSource` discovery problem and you should be able to isolate it without reference to all the JPA stuff. Specifically, to me it looks like project B has no `META-INF/beans.xml` classpath resource, and is thus not a CDI bean archive, and so CDI cannot &quot;see&quot; the `DataSource` that you know to be in it. See also https://github.com/helidon-io/helidon/wiki/FAQ#how-do-i-make-a-class-a-cdi-bean","body":"At root, this is a <code>DataSource</code> discovery problem and you should be able to isolate it without reference to all the JPA stuff. Specifically, to me it looks like project B has no <code>META-INF&#47;beans.xml</code> classpath resource, and is thus not a CDI bean archive, and so CDI cannot &quot;see&quot; the <code>DataSource</code> that you know to be in it. See also <a href=\"https://github.com/helidon-io/helidon/wiki/FAQ#how-do-i-make-a-class-a-cdi-bean\" rel=\"nofollow noreferrer\">github.com/helidon-io/helidon/wiki/&hellip;</a>"}],"owner":{"account_id":7352110,"reputation":253,"user_id":8728919,"accept_rate":50,"display_name":"swing1234"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692217532,"creation_date":1692217532,"question_id":76916860,"body_markdown":"I have a basic database JPA setup with the following structure in project A:\r\n\r\n```\r\n└── src\r\n    ├── main\r\n    │&#160;&#160; ├── java\r\n    │&#160;&#160; │&#160;&#160; └── com\r\n    │&#160;&#160; │&#160;&#160;     └── my\r\n    │&#160;&#160; │&#160;&#160;         └── apps\r\n    │&#160;&#160; │&#160;&#160;             └── org\r\n    │&#160;&#160; │&#160;&#160;                 └── helidonapp\r\n    │&#160;&#160; │&#160;&#160;                     ├── Application.java\r\n    │&#160;&#160; │&#160;&#160;                     ├── application\r\n    │&#160;&#160; │&#160;&#160;                     │&#160;&#160; ├── Employee\r\n    │&#160;&#160; │&#160;&#160;                     │&#160;&#160; │&#160;&#160; ├── EmployeeController.java\r\n    │&#160;&#160; │&#160;&#160;                     │&#160;&#160; │&#160;&#160; └── EmployeeRepository.java\r\n    │&#160;&#160; │&#160;&#160;                     │&#160;&#160; ├── MyDataSource.java\r\n    │&#160;&#160; │&#160;&#160;                     ├── domain\r\n    │&#160;&#160; │&#160;&#160;                     │&#160;&#160; └── model\r\n    │&#160;&#160; │&#160;&#160;                     │&#160;&#160;     └── Employee.java\r\n    │&#160;&#160; └── resources\r\n    │&#160;&#160;     ├── META-INF\r\n    │&#160;&#160;     │&#160;&#160; ├── beans.xml\r\n    │&#160;&#160;     │&#160;&#160; ├── microprofile-config-local.properties\r\n    │&#160;&#160;     │&#160;&#160; ├── microprofile-config.properties\r\n    │&#160;&#160;     │&#160;&#160; └── persistence.xml\r\n    │&#160;&#160;     └── log4j2.xml\r\n```\r\n\r\nWhich, when I compile and run project A, it connects to the database and I can make REST calls to the API without any issues.\r\n\r\nHowever, I want to shift the database configuration to an external maven library (let&#39;s call this project B).\r\n\r\nProject B now has the following structure:\r\n\r\n```\r\ndatabase-utils\r\n   ├── pom.xml\r\n   └── src\r\n       ├── main\r\n          ├── java\r\n          │   └── com\r\n          │       └── my\r\n          │           └── apps\r\n          │               └── ic\r\n          │                   ├── Entity\r\n      &#160; &#160;&#160; |                   │&#160;&#160;  &#160;&#160; ├── GenericController.java\r\n    &#160;&#160;  &#160;&#160; |                    │&#160;&#160;  &#160;&#160; └── GenericRepository.java\r\n            |                    ├── domain\r\n    &#160;&#160;  &#160;&#160; |                    │&#160;&#160; └── model\r\n    &#160;&#160;  &#160;&#160; |                    │&#160;&#160;     └── AbstractEntity.java\r\n          │                   ├──\r\n          │                   └── persistence\r\n          │                       └── jpa\r\n          │                           └── MyDataSource.java\r\n          └── resources\r\n              └── META-INF\r\n                  ├── persistence.xml\r\n                   \r\n```\r\n\r\nAnd my child project (Project A) now has this structure:\r\n\r\n```\r\nsrc\r\n    ├── main\r\n    │&#160;&#160; ├── java\r\n    │&#160;&#160; │&#160;&#160; └── com\r\n    │&#160;&#160; │&#160;&#160;     └──  my\r\n    │&#160;&#160; │&#160;&#160;         └── apps\r\n    │&#160;&#160; │&#160;&#160;             └── org\r\n    │&#160;&#160; │&#160;&#160;                 └── helidon\r\n    │&#160;&#160; │&#160;&#160;                     ├── Application.java\r\n    │&#160;&#160; │&#160;&#160;                     ├── application\r\n    │&#160;&#160; │&#160;&#160;                     │&#160;&#160; └── Employee\r\n    │&#160;&#160; │&#160;&#160;                     │&#160;&#160;     ├── EmployeeController.java \r\n    │&#160;&#160; │&#160;&#160;                     │&#160;&#160;     └── EmployeeRepository.java\r\n                                ├── domain\r\n    &#160;&#160;  &#160;&#160;                     │&#160;&#160; └── model\r\n    &#160;&#160;  &#160;&#160;                     │&#160;&#160;     └── Employee.java\r\n    │&#160;&#160; └── resources\r\n    │&#160;&#160;     ├── META-INF\r\n    │&#160;&#160;     │&#160;&#160; ├── beans.xml\r\n    │&#160;&#160;     │&#160;&#160; ├── microprofile-config-local.properties\r\n    │&#160;&#160;     │&#160;&#160; └── microprofile-config.properties\r\n\r\n```\r\n\r\n(Note: EmployeeController and EmployeeRepository both extend their Generic equivalents from project B)\r\n\r\nHowever, when I compile and run newly configured Project A I get the following error:\r\n\r\n```\r\nException in thread &quot;main&quot; jakarta.persistence.PersistenceException: Exception [EclipseLink-28018] (Eclipse Persistence Services - 3.0.3.v202208191135): org.eclipse.persistence.exceptions.EntityManagerSetupException\r\nException Description: Predeployment of PersistenceUnit [myPu] failed.\r\nInternal Exception: org.jboss.weld.exceptions.UnsatisfiedResolutionException: WELD-001334: Unsatisfied dependencies for type DataSource with qualifiers @Default @Named\r\n\tat org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.createPredeployFailedPersistenceException(EntityManagerSetupImpl.java:2153)\r\n\tat org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.predeploy(EntityManagerSetupImpl.java:2129)\r\n\tat org.eclipse.persistence.jpa.PersistenceProvider.createContainerEntityManagerFactoryImpl(PersistenceProvider.java:350)\r\n```\r\n\r\nI am unsure why the above error is happening, I looked up possible causes but could not find anything regarding having a db setup on an external library. \r\n\r\nMy theory is the persistence.xml cannot find the DataSource class, but I checked to see that my project B&#39;s module .jar file is included under target/libs in project A. I also looked inside the .jar file and did see the DataSource, persistence.xml, and other controller/repository class files are available. I double checked that the @Named annotation value in my datasource class matches the &lt;jta-data-source&gt; tag in persistence.xml\r\n\r\n\r\n","title":"Helidon MP 3.2.1: Predeployment of PersistenceUnit fails when DataSource class and persistence.xml are in an external library","body":"<p>I have a basic database JPA setup with the following structure in project A:</p>\n<pre><code>└── src\n    ├── main\n    │   ├── java\n    │   │   └── com\n    │   │       └── my\n    │   │           └── apps\n    │   │               └── org\n    │   │                   └── helidonapp\n    │   │                       ├── Application.java\n    │   │                       ├── application\n    │   │                       │   ├── Employee\n    │   │                       │   │   ├── EmployeeController.java\n    │   │                       │   │   └── EmployeeRepository.java\n    │   │                       │   ├── MyDataSource.java\n    │   │                       ├── domain\n    │   │                       │   └── model\n    │   │                       │       └── Employee.java\n    │   └── resources\n    │       ├── META-INF\n    │       │   ├── beans.xml\n    │       │   ├── microprofile-config-local.properties\n    │       │   ├── microprofile-config.properties\n    │       │   └── persistence.xml\n    │       └── log4j2.xml\n</code></pre>\n<p>Which, when I compile and run project A, it connects to the database and I can make REST calls to the API without any issues.</p>\n<p>However, I want to shift the database configuration to an external maven library (let's call this project B).</p>\n<p>Project B now has the following structure:</p>\n<pre><code>database-utils\n   ├── pom.xml\n   └── src\n       ├── main\n          ├── java\n          │   └── com\n          │       └── my\n          │           └── apps\n          │               └── ic\n          │                   ├── Entity\n           |                   │       ├── GenericController.java\n           |                    │       └── GenericRepository.java\n            |                    ├── domain\n           |                    │   └── model\n           |                    │       └── AbstractEntity.java\n          │                   ├──\n          │                   └── persistence\n          │                       └── jpa\n          │                           └── MyDataSource.java\n          └── resources\n              └── META-INF\n                  ├── persistence.xml\n                   \n</code></pre>\n<p>And my child project (Project A) now has this structure:</p>\n<pre><code>src\n    ├── main\n    │   ├── java\n    │   │   └── com\n    │   │       └──  my\n    │   │           └── apps\n    │   │               └── org\n    │   │                   └── helidon\n    │   │                       ├── Application.java\n    │   │                       ├── application\n    │   │                       │   └── Employee\n    │   │                       │       ├── EmployeeController.java \n    │   │                       │       └── EmployeeRepository.java\n                                ├── domain\n                               │   └── model\n                               │       └── Employee.java\n    │   └── resources\n    │       ├── META-INF\n    │       │   ├── beans.xml\n    │       │   ├── microprofile-config-local.properties\n    │       │   └── microprofile-config.properties\n\n</code></pre>\n<p>(Note: EmployeeController and EmployeeRepository both extend their Generic equivalents from project B)</p>\n<p>However, when I compile and run newly configured Project A I get the following error:</p>\n<pre><code>Exception in thread &quot;main&quot; jakarta.persistence.PersistenceException: Exception [EclipseLink-28018] (Eclipse Persistence Services - 3.0.3.v202208191135): org.eclipse.persistence.exceptions.EntityManagerSetupException\nException Description: Predeployment of PersistenceUnit [myPu] failed.\nInternal Exception: org.jboss.weld.exceptions.UnsatisfiedResolutionException: WELD-001334: Unsatisfied dependencies for type DataSource with qualifiers @Default @Named\n    at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.createPredeployFailedPersistenceException(EntityManagerSetupImpl.java:2153)\n    at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.predeploy(EntityManagerSetupImpl.java:2129)\n    at org.eclipse.persistence.jpa.PersistenceProvider.createContainerEntityManagerFactoryImpl(PersistenceProvider.java:350)\n</code></pre>\n<p>I am unsure why the above error is happening, I looked up possible causes but could not find anything regarding having a db setup on an external library.</p>\n<p>My theory is the persistence.xml cannot find the DataSource class, but I checked to see that my project B's module .jar file is included under target/libs in project A. I also looked inside the .jar file and did see the DataSource, persistence.xml, and other controller/repository class files are available. I double checked that the @Named annotation value in my datasource class matches the  tag in persistence.xml</p>\n"},{"tags":["java","hibernate","jpa","identifying-relationship"],"answers":[{"tags":[],"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692217517,"creation_date":1692217517,"answer_id":76916858,"question_id":75769991,"body_markdown":"Use this model:\r\n\r\n```java\r\n@Entity(name = &quot;parent&quot;)\r\n@Table(schema = &quot;XXX&quot;, name = &quot;PARENT&quot;)\r\npublic class Parent {\r\n\r\n    @Id\r\n    @GeneratedValue\r\n    @Column(name = &quot;ID_PARENT&quot;, nullable = false)\r\n    private int idParent;\r\n\r\n    @OneToMany(mappedBy = &quot;parent&quot;, fetch = FetchType.LAZY, cascade = CascadeType.ALL, orphanRemoval = true)\r\n    private List&lt;Child&gt; childList = new ArrayList&lt;&gt;();\r\n\r\n}\r\n\r\n@Entity(name = &quot;child&quot;)\r\n@Table(schema = &quot;XXX&quot;, name = &quot;CHILD&quot;)\r\n@IdClass(ChildPrimaryKey.class)\r\npublic class Child {\r\n\r\n    @Id\r\n    @Column(name = &quot;ID_CHILD&quot;, nullable = false)\r\n    private int idChild;\r\n \r\n    @Id\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;ID_PARENT&quot;)\r\n    private Parent parent;\r\n}\r\npublic class ChildPrimaryKey implements Serializable {\r\n\r\n    private static final long serialVersionUID = XXXL;\r\n   \r\n    private int idChild;\r\n    private int parent;\r\n}\r\n```","title":"JPA : initializing simultaneously both entities in a parent/child relations","body":"<p>Use this model:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity(name = &quot;parent&quot;)\n@Table(schema = &quot;XXX&quot;, name = &quot;PARENT&quot;)\npublic class Parent {\n\n    @Id\n    @GeneratedValue\n    @Column(name = &quot;ID_PARENT&quot;, nullable = false)\n    private int idParent;\n\n    @OneToMany(mappedBy = &quot;parent&quot;, fetch = FetchType.LAZY, cascade = CascadeType.ALL, orphanRemoval = true)\n    private List&lt;Child&gt; childList = new ArrayList&lt;&gt;();\n\n}\n\n@Entity(name = &quot;child&quot;)\n@Table(schema = &quot;XXX&quot;, name = &quot;CHILD&quot;)\n@IdClass(ChildPrimaryKey.class)\npublic class Child {\n\n    @Id\n    @Column(name = &quot;ID_CHILD&quot;, nullable = false)\n    private int idChild;\n \n    @Id\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;ID_PARENT&quot;)\n    private Parent parent;\n}\npublic class ChildPrimaryKey implements Serializable {\n\n    private static final long serialVersionUID = XXXL;\n   \n    private int idChild;\n    private int parent;\n}\n</code></pre>\n"}],"owner":{"account_id":23989262,"reputation":1,"user_id":17975656,"display_name":"MatthiasN"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":154,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1692217517,"creation_date":1679070482,"question_id":75769991,"body_markdown":"I&#39;m new to JPA and I can&#39;t find a way to correctly initialize a set of child entities when saving the parent using its own repository. \r\n\r\nI have this Parent entity which contains a list of child that I want to instantiate when creating the parent such as :\r\n\r\n```\r\n@Entity(name = &quot;parent&quot;)\r\n@Table(schema = &quot;XXX&quot;, name = &quot;PARENT&quot;)\r\npublic class Parent {\r\n\r\n    @Id\r\n    @GeneratedValue\r\n    @Column(name = &quot;ID_PARENT&quot;, nullable = false)\r\n    private int idParent;\r\n\r\n    @OneToMany(targetEntity = Child.class, fetch = FetchType.LAZY, cascade = CascadeType.ALL, orphanRemoval = true)\r\n    @JoinColumn(name = &quot;ID_PARENT&quot;, referencedColumnName = &quot;ID_PARENT&quot;)\r\n    private List&lt;Child&gt; childList= new ArrayList&lt;&gt;();\r\n\r\n    // Constructor + getters/setters...\r\n```\r\n\r\nThe child class (the key of the table is composed of a parent id + its own id, don&#39;t ask why) : \r\n\r\n```\r\n@Entity(name = &quot;child&quot;)\r\n@Table(schema = &quot;XXX&quot;, name = &quot;CHILD&quot;)\r\n@IdClass(ChildPrimaryKey.class)\r\npublic class Child{\r\n\r\n    @Id\r\n    @Column(name = &quot;ID_CHILD&quot;, nullable = false)\r\n    private int idChild;\r\n\r\n    @Id\r\n    @Column(name = &quot;ID_PARENT&quot;, nullable = false)\r\n    private int idParent;\r\n\r\n\r\n    @ManyToOne(fetch = FetchType.LAZY, targetEntity = Parent.class)\r\n    @JoinColumn(name = &quot;ID_PARENT&quot;, nullable = false, insertable = false, updatable = false)\r\n    private Parent parent;\r\n\r\n    // Constructor + getters/setters...\r\n```\r\n\r\nAnd finally the ChildPrimaryKey class :\r\n\r\n```\r\npublic class ChildPrimaryKey implements Serializable {\r\n\r\n    private static final long serialVersionUID = XXXL;\r\n   \r\n    private int idChild;\r\n\r\n    private int idParent;\r\n\r\n    // Constructors + getters/setters\r\n    \r\n```\r\n\r\nThe problem I&#39;m facing is that there isn&#39;t a direct link between the parentId field of the Child class and its parent field. So when I save a Parent entity (with a list of Child initialized inside the childList field) using its repository (basic CrudRepository with some custom queries), then the Parent is correctly saved with its ID getting a generated value, as wanted. But then the Child entities are saved but without the correct ID generated for the parent (by default 0 since it&#39;s an int I guess ?), resulting in a constraint violation exception since the column ID_PARENT should refer to an actual Parent id.\r\n\r\nI&#39;ve tried using @PrimaryKeyJoinColumn like this : \r\n\r\n```\r\n@Entity(name = &quot;child&quot;)\r\n@Table(schema = &quot;XXX&quot;, name = &quot;CHILD&quot;)\r\n@IdClass(ChildPrimaryKey.class)\r\npublic class Child{\r\n\r\n    @Id\r\n    @Column(name = &quot;ID_CHILD&quot;, nullable = false)\r\n    private int idChild;\r\n \r\n    @Id\r\n    @ManyToOne(fetch = FetchType.LAZY, targetEntity = Parent.class)\r\n    @PrimaryKeyJoinColumn(name = &quot;ID_PARENT&quot;, referencedColumnName = &quot;ID_PARENT&quot;)\r\n    private Parent parent;\r\n\r\n   // Constructor + getters/setters...\r\n```\r\n\r\nIn this case, since the field idParent doesn&#39;t exist in the Child class, I get a compilation error because the ChildPrimaryKey class expects the field to be present, plus I need it for my repository queries. (I&#39;ve also tried adding a int field as before but it still doesn&#39;t get any value)\r\n\r\nCan anyone explain me what am I doing wrong ? How can I correctly transfer the generated id of the parent when the children are created ?\r\n\r\nI would like to avoid having to create the parent first, then getting it&#39;s ID to then create the children individually giving them the correct one.\r\n\r\n\r\n","title":"JPA : initializing simultaneously both entities in a parent/child relations","body":"<p>I'm new to JPA and I can't find a way to correctly initialize a set of child entities when saving the parent using its own repository.</p>\n<p>I have this Parent entity which contains a list of child that I want to instantiate when creating the parent such as :</p>\n<pre><code>@Entity(name = &quot;parent&quot;)\n@Table(schema = &quot;XXX&quot;, name = &quot;PARENT&quot;)\npublic class Parent {\n\n    @Id\n    @GeneratedValue\n    @Column(name = &quot;ID_PARENT&quot;, nullable = false)\n    private int idParent;\n\n    @OneToMany(targetEntity = Child.class, fetch = FetchType.LAZY, cascade = CascadeType.ALL, orphanRemoval = true)\n    @JoinColumn(name = &quot;ID_PARENT&quot;, referencedColumnName = &quot;ID_PARENT&quot;)\n    private List&lt;Child&gt; childList= new ArrayList&lt;&gt;();\n\n    // Constructor + getters/setters...\n</code></pre>\n<p>The child class (the key of the table is composed of a parent id + its own id, don't ask why) :</p>\n<pre><code>@Entity(name = &quot;child&quot;)\n@Table(schema = &quot;XXX&quot;, name = &quot;CHILD&quot;)\n@IdClass(ChildPrimaryKey.class)\npublic class Child{\n\n    @Id\n    @Column(name = &quot;ID_CHILD&quot;, nullable = false)\n    private int idChild;\n\n    @Id\n    @Column(name = &quot;ID_PARENT&quot;, nullable = false)\n    private int idParent;\n\n\n    @ManyToOne(fetch = FetchType.LAZY, targetEntity = Parent.class)\n    @JoinColumn(name = &quot;ID_PARENT&quot;, nullable = false, insertable = false, updatable = false)\n    private Parent parent;\n\n    // Constructor + getters/setters...\n</code></pre>\n<p>And finally the ChildPrimaryKey class :</p>\n<pre><code>public class ChildPrimaryKey implements Serializable {\n\n    private static final long serialVersionUID = XXXL;\n   \n    private int idChild;\n\n    private int idParent;\n\n    // Constructors + getters/setters\n    \n</code></pre>\n<p>The problem I'm facing is that there isn't a direct link between the parentId field of the Child class and its parent field. So when I save a Parent entity (with a list of Child initialized inside the childList field) using its repository (basic CrudRepository with some custom queries), then the Parent is correctly saved with its ID getting a generated value, as wanted. But then the Child entities are saved but without the correct ID generated for the parent (by default 0 since it's an int I guess ?), resulting in a constraint violation exception since the column ID_PARENT should refer to an actual Parent id.</p>\n<p>I've tried using @PrimaryKeyJoinColumn like this :</p>\n<pre><code>@Entity(name = &quot;child&quot;)\n@Table(schema = &quot;XXX&quot;, name = &quot;CHILD&quot;)\n@IdClass(ChildPrimaryKey.class)\npublic class Child{\n\n    @Id\n    @Column(name = &quot;ID_CHILD&quot;, nullable = false)\n    private int idChild;\n \n    @Id\n    @ManyToOne(fetch = FetchType.LAZY, targetEntity = Parent.class)\n    @PrimaryKeyJoinColumn(name = &quot;ID_PARENT&quot;, referencedColumnName = &quot;ID_PARENT&quot;)\n    private Parent parent;\n\n   // Constructor + getters/setters...\n</code></pre>\n<p>In this case, since the field idParent doesn't exist in the Child class, I get a compilation error because the ChildPrimaryKey class expects the field to be present, plus I need it for my repository queries. (I've also tried adding a int field as before but it still doesn't get any value)</p>\n<p>Can anyone explain me what am I doing wrong ? How can I correctly transfer the generated id of the parent when the children are created ?</p>\n<p>I would like to avoid having to create the parent first, then getting it's ID to then create the children individually giving them the correct one.</p>\n"},{"tags":["java","postgresql","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":2124329,"reputation":612,"user_id":1886904,"display_name":"egeorge"},"score":1,"creation_date":1679092558,"post_id":75771518,"comment_id":133665454,"body_markdown":"This question has a few possibilities for you: https://stackoverflow.com/questions/851758/java-enums-jpa-and-postgres-enums-how-do-i-make-them-work-together","body":"This question has a few possibilities for you: <a href=\"https://stackoverflow.com/questions/851758/java-enums-jpa-and-postgres-enums-how-do-i-make-them-work-together\" title=\"java enums jpa and postgres enums how do i make them work together\">stackoverflow.com/questions/851758/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":28045447,"reputation":11,"user_id":21422318,"display_name":"Mayank Gupta"},"score":0,"creation_date":1679083777,"post_id":75771801,"comment_id":133663882,"body_markdown":"Can you give any example I tried name() also which returns string but still shrows error","body":"Can you give any example I tried name() also which returns string but still shrows error"},{"owner":{"account_id":27536973,"reputation":1,"user_id":21014430,"display_name":"AndOliver46"},"score":0,"creation_date":1679084365,"post_id":75771801,"comment_id":133664024,"body_markdown":"The same error?","body":"The same error?"},{"owner":{"account_id":28045447,"reputation":11,"user_id":21422318,"display_name":"Mayank Gupta"},"score":0,"creation_date":1679084749,"post_id":75771801,"comment_id":133664118,"body_markdown":"Yes same error it shows.","body":"Yes same error it shows."},{"owner":{"account_id":27536973,"reputation":1,"user_id":21014430,"display_name":"AndOliver46"},"score":0,"creation_date":1679085756,"post_id":75771801,"comment_id":133664318,"body_markdown":"Try the update at the main answer.","body":"Try the update at the main answer."},{"owner":{"account_id":28045447,"reputation":11,"user_id":21422318,"display_name":"Mayank Gupta"},"score":0,"creation_date":1679086314,"post_id":75771801,"comment_id":133664455,"body_markdown":"Does not work still throws error","body":"Does not work still throws error"},{"owner":{"account_id":27536973,"reputation":1,"user_id":21014430,"display_name":"AndOliver46"},"score":0,"creation_date":1679087995,"post_id":75771801,"comment_id":133664738,"body_markdown":"Try this query: UPDATE UserAccount u SET u.status::text = :status WHERE u.userId = :userId AND (u.status::text IN (:statuses))&quot;","body":"Try this query: UPDATE UserAccount u SET u.status::text = :status WHERE u.userId = :userId AND (u.status::text IN (:statuses))&quot;"}],"tags":[],"owner":{"account_id":27536973,"reputation":1,"user_id":21014430,"display_name":"AndOliver46"},"comment_count":6,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679085672,"creation_date":1679083601,"answer_id":75771801,"question_id":75771518,"body_markdown":"I think you should try to force convert the status enum like this:\r\n\r\n    public int updateUser(UserStatus status, UserStatus[] statuses) {\r\n            Query query = entityManager.createQuery(&quot;UPDATE UserAccount u SET u.status = :status WHERE u.userId = :userId AND (u.status IN (:statuses))&quot;);\r\n            query.setParameter(&quot;status&quot;, (UserStatus)Enum.Parse(typeof(UserStatus), status));\r\n            query.setParameter(&quot;userId&quot;, userId);\r\n            query.setParameter(&quot;statuses&quot;, Arrays.asList(statuses));\r\n            return query.executeUpdate();\r\n        }\r\n    \r\n\r\nYou&#39;re comparing u.status(VARCHAR) with :status(UserStatus).","title":"Java Enum to Postgres Enum Conversation","body":"<p>I think you should try to force convert the status enum like this:</p>\n<pre><code>public int updateUser(UserStatus status, UserStatus[] statuses) {\n        Query query = entityManager.createQuery(&quot;UPDATE UserAccount u SET u.status = :status WHERE u.userId = :userId AND (u.status IN (:statuses))&quot;);\n        query.setParameter(&quot;status&quot;, (UserStatus)Enum.Parse(typeof(UserStatus), status));\n        query.setParameter(&quot;userId&quot;, userId);\n        query.setParameter(&quot;statuses&quot;, Arrays.asList(statuses));\n        return query.executeUpdate();\n    }\n</code></pre>\n<p>You're comparing u.status(VARCHAR) with :status(UserStatus).</p>\n"},{"tags":[],"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692216920,"creation_date":1692216920,"answer_id":76916792,"question_id":75771518,"body_markdown":"The easiest way forward would be to upgrade to Hibernate 6.2, as that supports database native enum types out of the box.","title":"Java Enum to Postgres Enum Conversation","body":"<p>The easiest way forward would be to upgrade to Hibernate 6.2, as that supports database native enum types out of the box.</p>\n"}],"owner":{"account_id":28045447,"reputation":11,"user_id":21422318,"display_name":"Mayank Gupta"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":205,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1692216920,"creation_date":1679081427,"question_id":75771518,"body_markdown":"Below is my query\r\n\r\n```\r\npublic int updateUser(UserStatus status, UserStatus[] statuses) {\r\n        Query query = entityManager.createQuery(&quot;UPDATE UserAccount u SET u.status = :status WHERE u.userId = :userId AND (u.status IN (:statuses))&quot;);\r\n        query.setParameter(&quot;status&quot;, status);\r\n        query.setParameter(&quot;userId&quot;, userId);\r\n        query.setParameter(&quot;statuses&quot;, Arrays.asList(statuses));\r\n        return query.executeUpdate();\r\n    }\r\n```\r\n\r\nI am passing status as `UserStatus` type but still I am getting error\r\n\r\noperator does not exist: user_status = character varying\r\n\r\n\r\nI have column in my entity as \r\n\r\n```\r\n@Column(name = &quot;status&quot;)\r\n    @Enumerated(EnumType.STRING)\r\n    private UserStatus status;   // tried using columnTransformer\r\n\r\n```\r\n\r\n@ColumnTransformer also I tried its not working for update query. Its working in case of insert.\r\n\r\nHow can I update enum column.\r\n\r\nThank you.\r\n\r\n","title":"Java Enum to Postgres Enum Conversation","body":"<p>Below is my query</p>\n<pre><code>public int updateUser(UserStatus status, UserStatus[] statuses) {\n        Query query = entityManager.createQuery(&quot;UPDATE UserAccount u SET u.status = :status WHERE u.userId = :userId AND (u.status IN (:statuses))&quot;);\n        query.setParameter(&quot;status&quot;, status);\n        query.setParameter(&quot;userId&quot;, userId);\n        query.setParameter(&quot;statuses&quot;, Arrays.asList(statuses));\n        return query.executeUpdate();\n    }\n</code></pre>\n<p>I am passing status as <code>UserStatus</code> type but still I am getting error</p>\n<p>operator does not exist: user_status = character varying</p>\n<p>I have column in my entity as</p>\n<pre><code>@Column(name = &quot;status&quot;)\n    @Enumerated(EnumType.STRING)\n    private UserStatus status;   // tried using columnTransformer\n\n</code></pre>\n<p>@ColumnTransformer also I tried its not working for update query. Its working in case of insert.</p>\n<p>How can I update enum column.</p>\n<p>Thank you.</p>\n"},{"tags":["java","spring","calendar"],"owner":{"account_id":7718592,"reputation":119,"user_id":5845487,"display_name":"Hassan Golshani"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":160,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1692215964,"creation_date":1669027147,"question_id":74517596,"body_markdown":"I want to integrate my web application with calendar provider like **Google-Calendar**, **Microsoft-Outlook** and **Apple-Calendar**.\r\nI could to integrate my web application with Google and Microsoft. Steps for each of them is:\r\n\r\n1. Create an App in Provider console/portal and get Client-Id and Client-Secret.\r\n2. Config my web application for connecting to Provider in OAuth2 standard.\r\n3. User authenticate with own username (email) and password and return `refresh_token` and `access_token` to my web application.\r\n4. Use the `access_token` and `refresh_token` for get Calendar events.\r\n\r\nBut for Apple Calendar I am confused. I could not find Apple OAuth2 or any API for get Calendar Events.\r\n\r\nCan anyone help me? \r\n\r\n:(\r\n\r\nOf course read an article about Apple app-specific-password but I don&#39;t know how it&#39;s working and could not find any example with this option.","title":"How to integrate a java web application with Apple Calendar","body":"<p>I want to integrate my web application with calendar provider like <strong>Google-Calendar</strong>, <strong>Microsoft-Outlook</strong> and <strong>Apple-Calendar</strong>.\nI could to integrate my web application with Google and Microsoft. Steps for each of them is:</p>\n<ol>\n<li>Create an App in Provider console/portal and get Client-Id and Client-Secret.</li>\n<li>Config my web application for connecting to Provider in OAuth2 standard.</li>\n<li>User authenticate with own username (email) and password and return <code>refresh_token</code> and <code>access_token</code> to my web application.</li>\n<li>Use the <code>access_token</code> and <code>refresh_token</code> for get Calendar events.</li>\n</ol>\n<p>But for Apple Calendar I am confused. I could not find Apple OAuth2 or any API for get Calendar Events.</p>\n<p>Can anyone help me?</p>\n<p>:(</p>\n<p>Of course read an article about Apple app-specific-password but I don't know how it's working and could not find any example with this option.</p>\n"},{"tags":["java","rest","url"],"answers":[{"comments":[{"owner":{"display_name":"user22253296"},"score":0,"creation_date":1692204461,"post_id":76915386,"comment_id":135593029,"body_markdown":"i have already try it but not working","body":"i have already try it but not working"}],"tags":[],"owner":{"account_id":17553626,"reputation":35,"user_id":12733532,"display_name":"Maksym Ivanov"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692202584,"creation_date":1692202584,"answer_id":76915386,"question_id":76915178,"body_markdown":"Try http://localhost:8080/rest/getuser instead of \r\nhttp://localhost:8080/ProvaMaven-0.0.1-SNAPSHOT/rest/getuser\r\nDon&#39;t need ProvaMaven-0.0.1-SNAPSHOT","title":"Error not found when i call my rest service","body":"<p>Try http://localhost:8080/rest/getuser instead of\nhttp://localhost:8080/ProvaMaven-0.0.1-SNAPSHOT/rest/getuser\nDon't need ProvaMaven-0.0.1-SNAPSHOT</p>\n"},{"comments":[{"owner":{"display_name":"user22253296"},"score":0,"creation_date":1692224001,"post_id":76916698,"comment_id":135596290,"body_markdown":"where is the additional rest?","body":"where is the additional rest?"},{"owner":{"account_id":29239600,"reputation":1,"user_id":22401444,"display_name":"Junior Mendez"},"score":0,"creation_date":1692398170,"post_id":76916698,"comment_id":135622614,"body_markdown":"Hello sorry try http://localhost:8080/ProvaMaven/rest/getuser","body":"Hello sorry try <a href=\"http://localhost:8080/ProvaMaven/rest/getuser\" rel=\"nofollow noreferrer\">localhost:8080/ProvaMaven/rest/getuser</a>"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1692424195,"post_id":76916698,"comment_id":135624137,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/76916698/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":29239600,"reputation":1,"user_id":22401444,"display_name":"Junior Mendez"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1692215886,"creation_date":1692215886,"answer_id":76916698,"question_id":76915178,"body_markdown":"I see you have an additional /rest try this http://localhost:8080/rest/rest/getuser","title":"Error not found when i call my rest service","body":"<p>I see you have an additional /rest try this http://localhost:8080/rest/rest/getuser</p>\n"}],"owner":{"display_name":"user22253296"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1692215886,"creation_date":1692200725,"question_id":76915178,"body_markdown":"I&#39;m trying to call a rest service specifically get but when I type the URL it gives me not found, I have already set up a web service soap in this maven project and it works for me by any chance am I missing some dependency or error in the web file?\r\n\r\nMy url: http://localhost:8080/ProvaMaven-0.0.1-SNAPSHOT/rest/getuser\r\n\r\nHere is my pom.xml:\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n      &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n      &lt;groupId&gt;MavenRest&lt;/groupId&gt;\r\n      &lt;artifactId&gt;ProvaMaven&lt;/artifactId&gt;\r\n      &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n      &lt;packaging&gt;war&lt;/packaging&gt;\r\n            \r\n      &lt;dependencies&gt;    \t  \r\n    \t  \r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.glassfish.jersey.core&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jersey-client&lt;/artifactId&gt;\r\n        &lt;version&gt;3.1.3&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n    &lt;!-- https://mvnrepository.com/artifact/jakarta.jws/jakarta.jws-api --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;jakarta.jws&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jakarta.jws-api&lt;/artifactId&gt;\r\n        &lt;version&gt;3.0.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n            \r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.glassfish.jersey.core&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jersey-server&lt;/artifactId&gt;\r\n        &lt;version&gt;3.1.3&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n        \r\n    &lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n        &lt;version&gt;8.0.33&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n        \r\n    &lt;!-- https://mvnrepository.com/artifact/org.glassfish.jersey.containers/jersey-container-servlet-core --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.glassfish.jersey.containers&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jersey-container-servlet-core&lt;/artifactId&gt;\r\n        &lt;version&gt;3.1.3&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n    \t  &lt;!-- https://mvnrepository.com/artifact/org.glassfish.jersey.inject/jersey-hk2 --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.glassfish.jersey.inject&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jersey-hk2&lt;/artifactId&gt;\r\n        &lt;version&gt;3.1.3&lt;/version&gt;\r\n    &lt;/dependency&gt;    \r\n    \t  \r\n      &lt;/dependencies&gt;\r\n           \r\n        &lt;build&gt;\r\n    \t  \r\n    \t  &lt;pluginManagement&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.3.2&lt;/version&gt;\r\n                &lt;/plugin&gt;\r\n                \r\n                &lt;plugin&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;19&lt;/source&gt;\r\n                    &lt;target&gt;19&lt;/target&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n                \r\n            &lt;/plugins&gt;\r\n        &lt;/pluginManagement&gt;    \r\n    \r\n      &lt;/build&gt;\r\n                  \r\n    &lt;/project&gt;\r\n\r\nHere is my web.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;https://jakarta.ee/xml/ns/jakartaee&quot; xmlns:web=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot; xsi:schemaLocation=&quot;https://jakarta.ee/xml/ns/jakartaee https://jakarta.ee/xml/ns/jakartaee/web-app_5_0.xsd http://xmlns.jcp.org/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot; id=&quot;WebApp_ID&quot; version=&quot;5.0&quot;&gt;\r\n      &lt;display-name&gt;ProvaMaven&lt;/display-name&gt;\r\n      &lt;welcome-file-list&gt;\r\n        &lt;welcome-file&gt;index.html&lt;/welcome-file&gt;\r\n        &lt;welcome-file&gt;index.htm&lt;/welcome-file&gt;\r\n        &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;\r\n        &lt;welcome-file&gt;default.html&lt;/welcome-file&gt;\r\n        &lt;welcome-file&gt;default.htm&lt;/welcome-file&gt;\r\n        &lt;welcome-file&gt;default.jsp&lt;/welcome-file&gt;\r\n      &lt;/welcome-file-list&gt;\r\n      \r\n         &lt;servlet&gt;\r\n            &lt;servlet-name&gt;jersey-servlet&lt;/servlet-name&gt;\r\n            &lt;servlet-class&gt;org.glassfish.jersey.servlet.ServletContainer&lt;/servlet-class&gt;\r\n            &lt;init-param&gt;\r\n                &lt;param-name&gt;org.glassfish.jersey.config.property.packages&lt;/param-name&gt;\r\n                &lt;param-value&gt;com&lt;/param-value&gt;\r\n            &lt;/init-param&gt;\r\n            &lt;init-param&gt;\r\n                &lt;param-name&gt;org.glassfish.jersey.api.json.POJOMappingFeature&lt;/param-name&gt;\r\n                &lt;param-value&gt;true&lt;/param-value&gt;\r\n            &lt;/init-param&gt;\r\n            &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\r\n        &lt;/servlet&gt;\r\n    \t&lt;servlet-mapping&gt;\r\n    \t\t&lt;servlet-name&gt;Jersey Web Application&lt;/servlet-name&gt;\r\n    \t\t&lt;url-pattern&gt;/rest/*&lt;/url-pattern&gt;\r\n    \t&lt;/servlet-mapping&gt;  \r\n                  \r\n    &lt;/web-app&gt;\r\n\r\nHere is my class:\r\n\r\n    package com;\r\n    \r\n    import jakarta.ws.rs.GET; \r\n    import jakarta.ws.rs.Path;\r\n    import jakarta.ws.rs.Produces;\r\n    import jakarta.ws.rs.core.MediaType;\r\n    \r\n    @Path(&quot;/rest&quot;)\r\n    public class Rest\r\n    {\r\n    \t@GET\r\n    \t@Path(&quot;/getuser&quot;)\r\n    \t@Produces(MediaType.APPLICATION_JSON)\r\n    \tpublic User getUser()\r\n    \t{\r\n    \t\tUser u = new User();\r\n    \t\tu.setName(&quot;carmine&quot;);\r\n    \t\tu.setSurname(&quot;armenante&quot;);\r\n    \t\t\r\n    \t\tSystem.out.println(&quot;sono dentro&quot;);\r\n    \t\treturn u;\r\n    \t}\r\n    }\r\n\r\n","title":"Error not found when i call my rest service","body":"<p>I'm trying to call a rest service specifically get but when I type the URL it gives me not found, I have already set up a web service soap in this maven project and it works for me by any chance am I missing some dependency or error in the web file?</p>\n<p>My url: http://localhost:8080/ProvaMaven-0.0.1-SNAPSHOT/rest/getuser</p>\n<p>Here is my pom.xml:</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;MavenRest&lt;/groupId&gt;\n  &lt;artifactId&gt;ProvaMaven&lt;/artifactId&gt;\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n  &lt;packaging&gt;war&lt;/packaging&gt;\n        \n  &lt;dependencies&gt;          \n      \n&lt;dependency&gt;\n    &lt;groupId&gt;org.glassfish.jersey.core&lt;/groupId&gt;\n    &lt;artifactId&gt;jersey-client&lt;/artifactId&gt;\n    &lt;version&gt;3.1.3&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;!-- https://mvnrepository.com/artifact/jakarta.jws/jakarta.jws-api --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;jakarta.jws&lt;/groupId&gt;\n    &lt;artifactId&gt;jakarta.jws-api&lt;/artifactId&gt;\n    &lt;version&gt;3.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n        \n&lt;dependency&gt;\n    &lt;groupId&gt;org.glassfish.jersey.core&lt;/groupId&gt;\n    &lt;artifactId&gt;jersey-server&lt;/artifactId&gt;\n    &lt;version&gt;3.1.3&lt;/version&gt;\n&lt;/dependency&gt;\n    \n&lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;mysql&lt;/groupId&gt;\n    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n    &lt;version&gt;8.0.33&lt;/version&gt;\n&lt;/dependency&gt;\n    \n&lt;!-- https://mvnrepository.com/artifact/org.glassfish.jersey.containers/jersey-container-servlet-core --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.glassfish.jersey.containers&lt;/groupId&gt;\n    &lt;artifactId&gt;jersey-container-servlet-core&lt;/artifactId&gt;\n    &lt;version&gt;3.1.3&lt;/version&gt;\n&lt;/dependency&gt;\n\n      &lt;!-- https://mvnrepository.com/artifact/org.glassfish.jersey.inject/jersey-hk2 --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.glassfish.jersey.inject&lt;/groupId&gt;\n    &lt;artifactId&gt;jersey-hk2&lt;/artifactId&gt;\n    &lt;version&gt;3.1.3&lt;/version&gt;\n&lt;/dependency&gt;    \n      \n  &lt;/dependencies&gt;\n       \n    &lt;build&gt;\n      \n      &lt;pluginManagement&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.3.2&lt;/version&gt;\n            &lt;/plugin&gt;\n            \n            &lt;plugin&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;19&lt;/source&gt;\n                &lt;target&gt;19&lt;/target&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n            \n        &lt;/plugins&gt;\n    &lt;/pluginManagement&gt;    \n\n  &lt;/build&gt;\n              \n&lt;/project&gt;\n</code></pre>\n<p>Here is my web.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;web-app xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;https://jakarta.ee/xml/ns/jakartaee&quot; xmlns:web=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot; xsi:schemaLocation=&quot;https://jakarta.ee/xml/ns/jakartaee https://jakarta.ee/xml/ns/jakartaee/web-app_5_0.xsd http://xmlns.jcp.org/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&quot; id=&quot;WebApp_ID&quot; version=&quot;5.0&quot;&gt;\n  &lt;display-name&gt;ProvaMaven&lt;/display-name&gt;\n  &lt;welcome-file-list&gt;\n    &lt;welcome-file&gt;index.html&lt;/welcome-file&gt;\n    &lt;welcome-file&gt;index.htm&lt;/welcome-file&gt;\n    &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;\n    &lt;welcome-file&gt;default.html&lt;/welcome-file&gt;\n    &lt;welcome-file&gt;default.htm&lt;/welcome-file&gt;\n    &lt;welcome-file&gt;default.jsp&lt;/welcome-file&gt;\n  &lt;/welcome-file-list&gt;\n  \n     &lt;servlet&gt;\n        &lt;servlet-name&gt;jersey-servlet&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;org.glassfish.jersey.servlet.ServletContainer&lt;/servlet-class&gt;\n        &lt;init-param&gt;\n            &lt;param-name&gt;org.glassfish.jersey.config.property.packages&lt;/param-name&gt;\n            &lt;param-value&gt;com&lt;/param-value&gt;\n        &lt;/init-param&gt;\n        &lt;init-param&gt;\n            &lt;param-name&gt;org.glassfish.jersey.api.json.POJOMappingFeature&lt;/param-name&gt;\n            &lt;param-value&gt;true&lt;/param-value&gt;\n        &lt;/init-param&gt;\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n    &lt;/servlet&gt;\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;Jersey Web Application&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/rest/*&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;  \n              \n&lt;/web-app&gt;\n</code></pre>\n<p>Here is my class:</p>\n<pre><code>package com;\n\nimport jakarta.ws.rs.GET; \nimport jakarta.ws.rs.Path;\nimport jakarta.ws.rs.Produces;\nimport jakarta.ws.rs.core.MediaType;\n\n@Path(&quot;/rest&quot;)\npublic class Rest\n{\n    @GET\n    @Path(&quot;/getuser&quot;)\n    @Produces(MediaType.APPLICATION_JSON)\n    public User getUser()\n    {\n        User u = new User();\n        u.setName(&quot;carmine&quot;);\n        u.setSurname(&quot;armenante&quot;);\n        \n        System.out.println(&quot;sono dentro&quot;);\n        return u;\n    }\n}\n</code></pre>\n"},{"tags":["java","android-studio","android-package-managers"],"owner":{"account_id":26502896,"reputation":1,"user_id":20139545,"display_name":"Selfi Dwi Syahrani"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1692215792,"creation_date":1692215792,"question_id":76916686,"body_markdown":"How can I suspend all apps on my fully managed device?\r\n\r\n\r\nI&#39;ve already tried using `ResolveInfo` and `queryIntentActivity`, but it only suspends some of the basic user apps (camera, gallery, calendar, etc.), and not apps like Spotify, YouTube, Netflix, Play Store, Gmail, etc. Is there a solution to this problem?\r\n\r\nHere is the code I&#39;ve been using to suspend apps except for some allowed ones:\r\n\r\n```\r\nprivate void suspendAllAppsExceptAllowedApps(DevicePolicyManager dpm, ComponentName adminComponent) {\r\n    PackageManager pm = getPackageManager();\r\n    List&lt;String&gt; exemptPackages = Arrays.asList(&quot;com.android.settings&quot;, &quot;com.example.MyAppsSuspend&quot;, &quot;com.android.contacts&quot;, &quot;com.android.phone&quot;);\r\n    Intent mainIntent = new Intent(Intent.ACTION_MAIN, null);\r\n    mainIntent.addCategory(Intent.CATEGORY_LAUNCHER);\r\n    List&lt;ResolveInfo&gt; packages = pm.queryIntentActivities(mainIntent, 0);\r\n\r\n    for (ResolveInfo resolveInfo : packages) {\r\n        try {\r\n            String package_name = resolveInfo.activityInfo.packageName;\r\n            if (!exemptPackages.contains(package_name)) {\r\n                String[] suspended = dpm.setPackagesSuspended(adminComponent, new String[]{package_name}, true);\r\n                if (suspended != null) {\r\n                    // Log.i(&quot;AppSuspend&quot;, &quot;Package suspended: &quot; + suspended);\r\n                } else {\r\n                    Log.i(&quot;AppSuspend&quot;, &quot;Failed to suspend package: &quot; + package_name);\r\n                }\r\n            }\r\n        } catch (Exception e) {\r\n            Log.e(&quot;AppSuspend&quot;, &quot;Error: &quot; + e.getMessage());\r\n        }\r\n    }\r\n}\r\n```","title":"Suspend Apps Using Package Manager Android Studio","body":"<p>How can I suspend all apps on my fully managed device?</p>\n<p>I've already tried using <code>ResolveInfo</code> and <code>queryIntentActivity</code>, but it only suspends some of the basic user apps (camera, gallery, calendar, etc.), and not apps like Spotify, YouTube, Netflix, Play Store, Gmail, etc. Is there a solution to this problem?</p>\n<p>Here is the code I've been using to suspend apps except for some allowed ones:</p>\n<pre><code>private void suspendAllAppsExceptAllowedApps(DevicePolicyManager dpm, ComponentName adminComponent) {\n    PackageManager pm = getPackageManager();\n    List&lt;String&gt; exemptPackages = Arrays.asList(&quot;com.android.settings&quot;, &quot;com.example.MyAppsSuspend&quot;, &quot;com.android.contacts&quot;, &quot;com.android.phone&quot;);\n    Intent mainIntent = new Intent(Intent.ACTION_MAIN, null);\n    mainIntent.addCategory(Intent.CATEGORY_LAUNCHER);\n    List&lt;ResolveInfo&gt; packages = pm.queryIntentActivities(mainIntent, 0);\n\n    for (ResolveInfo resolveInfo : packages) {\n        try {\n            String package_name = resolveInfo.activityInfo.packageName;\n            if (!exemptPackages.contains(package_name)) {\n                String[] suspended = dpm.setPackagesSuspended(adminComponent, new String[]{package_name}, true);\n                if (suspended != null) {\n                    // Log.i(&quot;AppSuspend&quot;, &quot;Package suspended: &quot; + suspended);\n                } else {\n                    Log.i(&quot;AppSuspend&quot;, &quot;Failed to suspend package: &quot; + package_name);\n                }\n            }\n        } catch (Exception e) {\n            Log.e(&quot;AppSuspend&quot;, &quot;Error: &quot; + e.getMessage());\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-security","basic-authentication"],"comments":[{"owner":{"account_id":6463892,"reputation":15974,"user_id":5277820,"accept_rate":68,"display_name":"dur"},"score":1,"creation_date":1692304813,"post_id":76914181,"comment_id":135608998,"body_markdown":"The default implementation of the basic auth filter validates the header if present. The filter doesn&#39;t know the authorisation rules. Authentication is always applied before authorisation. If you want to change it, you have to write your own basic auth filter.","body":"The default implementation of the basic auth filter validates the header if present. The filter doesn&#39;t know the authorisation rules. Authentication is always applied before authorisation. If you want to change it, you have to write your own basic auth filter."},{"owner":{"account_id":19987292,"reputation":424,"user_id":14649181,"display_name":"Oskar"},"score":1,"creation_date":1692777992,"post_id":76914181,"comment_id":135669152,"body_markdown":"I also thought so at the moment, in order to avoid it, I adopted a form with an ignored path.","body":"I also thought so at the moment, in order to avoid it, I adopted a form with an ignored path."}],"answers":[{"comments":[{"owner":{"account_id":19987292,"reputation":424,"user_id":14649181,"display_name":"Oskar"},"score":0,"creation_date":1692195330,"post_id":76914288,"comment_id":135591081,"body_markdown":"Still getting unathorized in other requests (not actuator endpoints)","body":"Still getting unathorized in other requests (not actuator endpoints)"},{"owner":{"account_id":19987292,"reputation":424,"user_id":14649181,"display_name":"Oskar"},"score":0,"creation_date":1692195397,"post_id":76914288,"comment_id":135591104,"body_markdown":"In other words, only actuator can make successful request that is passed by spring security","body":"In other words, only actuator can make successful request that is passed by spring security"},{"owner":{"account_id":7427975,"reputation":537,"user_id":9862795,"display_name":"GoranLegenda"},"score":0,"creation_date":1692196057,"post_id":76914288,"comment_id":135591243,"body_markdown":"for development purpose you can chain the following methods to the end (after httpBasic() ) : `.and().csrf().disable();`","body":"for development purpose you can chain the following methods to the end (after httpBasic() ) : <code>.and().csrf().disable();</code>"},{"owner":{"account_id":19987292,"reputation":424,"user_id":14649181,"display_name":"Oskar"},"score":0,"creation_date":1692205851,"post_id":76914288,"comment_id":135593255,"body_markdown":"well yes, it may look a bit more clearly","body":"well yes, it may look a bit more clearly"},{"owner":{"account_id":7427975,"reputation":537,"user_id":9862795,"display_name":"GoranLegenda"},"score":0,"creation_date":1692211080,"post_id":76914288,"comment_id":135594168,"body_markdown":"in my example I didn’t add that piece of code, and if you add that it should work as expected","body":"in my example I didn’t add that piece of code, and if you add that it should work as expected"}],"tags":[],"owner":{"account_id":7427975,"reputation":537,"user_id":9862795,"display_name":"GoranLegenda"},"comment_count":5,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1692215536,"creation_date":1692194070,"answer_id":76914288,"question_id":76914181,"body_markdown":"You were close but this should work for your use case:\r\n\r\n```java\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http\r\n            .authorizeRequests()\r\n                .antMatchers(&quot;/actuator/**&quot;).hasRole(&quot;ACTUATOR&quot;) \r\n                .anyRequest().permitAll()\r\n            .and()\r\n            .httpBasic()\r\n            .and()\r\n            .csrf().disable();\r\n    }\r\n```","title":"Spring security - check authentication only in 1 endpoint","body":"<p>You were close but this should work for your use case:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http\n            .authorizeRequests()\n                .antMatchers(&quot;/actuator/**&quot;).hasRole(&quot;ACTUATOR&quot;) \n                .anyRequest().permitAll()\n            .and()\n            .httpBasic()\n            .and()\n            .csrf().disable();\n    }\n</code></pre>\n"}],"owner":{"account_id":19987292,"reputation":424,"user_id":14649181,"display_name":"Oskar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":90,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1692215536,"creation_date":1692193361,"question_id":76914181,"body_markdown":"I have to following configuration:\r\n\r\n```java\r\n@AllArgsConstructor\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n    private ActuatorProperties actuatorProperties;\r\n\r\n    @Override\r\n    protected void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n        auth.inMemoryAuthentication()\r\n            .passwordEncoder(new BCryptPasswordEncoder())\r\n            .withUser(actuatorProperties.getUser())\r\n            .password(actuatorProperties.getPassword())\r\n            .roles(&quot;ACTUATOR&quot;);\r\n    }\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http.authorizeRequests()\r\n            .antMatchers(&quot;/actuator/**&quot;).hasRole(&quot;ACTUATOR&quot;)\r\n            .and().httpBasic();\r\n    }\r\n}\r\n```\r\n\r\nAs you can see I would like to secure only the actuators endpoint and make other application endpoints public. But when any Basic auth is passed it is also validated (401 returned when any other basic auth is provided that does not match to actuator). In my business case I will always have any basic auth header, and I would like to ignore it (simply pass) when it is not actuator.\r\n\r\nI also tried things like:\r\n```java\r\n@Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http.authorizeRequests()\r\n            .antMatchers(&quot;/actuator/**&quot;).hasRole(&quot;ACTUATOR&quot;)\r\n            .antMatchers(&quot;/**&quot;).permitAll()\r\n            .and().httpBasic();\r\n    }\r\n```\r\n\r\nBut it also does not work.\r\n\r\nStack:\r\n- Java 17\r\n- Spring boot 2.7.12\r\n\r\nUpdate:\r\nI made a version that actually works as I want, but I&#39;m still looking for more &quot;elegant version&quot;\r\n```java\r\n@EnableWebSecurity\r\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n    @Override\r\n    public void configure(WebSecurity web) {\r\n        web.ignoring()\r\n           .regexMatchers(&quot;^(?!/actuator).*$&quot;);\r\n    }\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http.authorizeRequests()\r\n            .antMatchers(&quot;/actuator/**&quot;)\r\n            .hasRole(&quot;ACTUATOR&quot;)\r\n            .and()\r\n            .httpBasic();\r\n    }\r\n}\r\n```","title":"Spring security - check authentication only in 1 endpoint","body":"<p>I have to following configuration:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@AllArgsConstructor\n@Configuration\n@EnableWebSecurity\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n    private ActuatorProperties actuatorProperties;\n\n    @Override\n    protected void configure(AuthenticationManagerBuilder auth) throws Exception {\n        auth.inMemoryAuthentication()\n            .passwordEncoder(new BCryptPasswordEncoder())\n            .withUser(actuatorProperties.getUser())\n            .password(actuatorProperties.getPassword())\n            .roles(&quot;ACTUATOR&quot;);\n    }\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.authorizeRequests()\n            .antMatchers(&quot;/actuator/**&quot;).hasRole(&quot;ACTUATOR&quot;)\n            .and().httpBasic();\n    }\n}\n</code></pre>\n<p>As you can see I would like to secure only the actuators endpoint and make other application endpoints public. But when any Basic auth is passed it is also validated (401 returned when any other basic auth is provided that does not match to actuator). In my business case I will always have any basic auth header, and I would like to ignore it (simply pass) when it is not actuator.</p>\n<p>I also tried things like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.authorizeRequests()\n            .antMatchers(&quot;/actuator/**&quot;).hasRole(&quot;ACTUATOR&quot;)\n            .antMatchers(&quot;/**&quot;).permitAll()\n            .and().httpBasic();\n    }\n</code></pre>\n<p>But it also does not work.</p>\n<p>Stack:</p>\n<ul>\n<li>Java 17</li>\n<li>Spring boot 2.7.12</li>\n</ul>\n<p>Update:\nI made a version that actually works as I want, but I'm still looking for more &quot;elegant version&quot;</p>\n<pre class=\"lang-java prettyprint-override\"><code>@EnableWebSecurity\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Override\n    public void configure(WebSecurity web) {\n        web.ignoring()\n           .regexMatchers(&quot;^(?!/actuator).*$&quot;);\n    }\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.authorizeRequests()\n            .antMatchers(&quot;/actuator/**&quot;)\n            .hasRole(&quot;ACTUATOR&quot;)\n            .and()\n            .httpBasic();\n    }\n}\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9890,"page":244,"page_size":100}
