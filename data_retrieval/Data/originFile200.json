{"items":[{"tags":["java","data-structures","hashmap"],"comments":[{"owner":{"account_id":21534,"reputation":59456,"user_id":52443,"display_name":"Welbog"},"score":5,"creation_date":1694018037,"post_id":77053810,"comment_id":135837098,"body_markdown":"`new ArrayList&lt;&gt;(int n)` does not work the way you think it does. https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/ArrayList.html#%3Cinit%3E(int)","body":"<code>new ArrayList&lt;&gt;(int n)</code> does not work the way you think it does. <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/ArrayList.html#%3Cinit%3E(int)\" rel=\"nofollow noreferrer\">docs.oracle.com/en/java/javase/17/docs/api/java.base/java/ut&zwnj;&#8203;il/&hellip;</a>"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":3,"creation_date":1694018277,"post_id":77053810,"comment_id":135837135,"body_markdown":"`new ArrayList&lt;&gt;(n.val)` creates an *empty* `ArrayList` with an initial capacity of `n.val`. Not an `ArrayList` containing `n.val`. [Documentation](https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/ArrayList.html#%3Cinit%3E(int)). Try `new ArrayList&lt;&gt;(List.of(n.val))`.","body":"<code>new ArrayList&lt;&gt;(n.val)</code> creates an <i>empty</i> <code>ArrayList</code> with an initial capacity of <code>n.val</code>. Not an <code>ArrayList</code> containing <code>n.val</code>. <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/ArrayList.html#%3Cinit%3E(int)\" rel=\"nofollow noreferrer\">Documentation</a>. Try <code>new ArrayList&lt;&gt;(List.of(n.val))</code>."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":2,"creation_date":1694018450,"post_id":77053810,"comment_id":135837170,"body_markdown":"It’s an interesting question. You may want to train creating a [mre], though.","body":"It’s an interesting question. You may want to train creating a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, though."},{"owner":{"account_id":11149567,"reputation":83,"user_id":8183261,"display_name":"Bernadette"},"score":0,"creation_date":1694018975,"post_id":77053810,"comment_id":135837284,"body_markdown":"@OleV.V. Thanks, using &quot;List.of(n.val)&quot; fixed the first approach. Still need to step through it but its is making more sense now.","body":"@OleV.V. Thanks, using &quot;List.of(n.val)&quot; fixed the first approach. Still need to step through it but its is making more sense now."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1694018776,"creation_date":1694018776,"answer_id":77053896,"question_id":77053810,"body_markdown":"`new ArrayList&lt;Integer&gt;(5)` creates a new __empty__ list with initial capacity 5, which isn&#39;t at all what you want. What you wanted was:\r\n\r\n```\r\nvar list = new ArrayList&lt;Integer&gt;();\r\nlist.add(5);\r\n```\r\n\r\nOr possibly if you want to one-liner it `new ArrayList&lt;Integer&gt;(List.of(5))`.\r\n\r\nMore generally this concept (&#39;map a key to a list of values; create the list upon inserting the first value and add to an existing list otherwise&#39;) comes a ton, and there&#39;s a nicer way to do it:\r\n\r\n```\r\nMap&lt;Integer, ArrayList&lt;Integer&gt;&gt; map = new HashMap&lt;&gt;();\r\n\r\nmap.computeIfAbsent(col, k -&gt; new ArrayList&lt;Integer&gt;()).add(n.val);\r\n```\r\n\r\nAs the name suggests, `computeIfAbsent` will run the provided lambda (the stuff after the arrow) __only__ if key `col` is absent (is not in the map at all). In this case, it runs the code, and sets it as the value to go with key `col`. The method call itself (`computeIfAbsent`) returns the generated value if that happened, or the existing value if that happened. Either way, that&#39;s the list you want to add to. Hence, one line, no need for `if` shenanigans.","title":"Why is my hashmap clearing some of its values?","body":"<p><code>new ArrayList&lt;Integer&gt;(5)</code> creates a new <strong>empty</strong> list with initial capacity 5, which isn't at all what you want. What you wanted was:</p>\n<pre><code>var list = new ArrayList&lt;Integer&gt;();\nlist.add(5);\n</code></pre>\n<p>Or possibly if you want to one-liner it <code>new ArrayList&lt;Integer&gt;(List.of(5))</code>.</p>\n<p>More generally this concept ('map a key to a list of values; create the list upon inserting the first value and add to an existing list otherwise') comes a ton, and there's a nicer way to do it:</p>\n<pre><code>Map&lt;Integer, ArrayList&lt;Integer&gt;&gt; map = new HashMap&lt;&gt;();\n\nmap.computeIfAbsent(col, k -&gt; new ArrayList&lt;Integer&gt;()).add(n.val);\n</code></pre>\n<p>As the name suggests, <code>computeIfAbsent</code> will run the provided lambda (the stuff after the arrow) <strong>only</strong> if key <code>col</code> is absent (is not in the map at all). In this case, it runs the code, and sets it as the value to go with key <code>col</code>. The method call itself (<code>computeIfAbsent</code>) returns the generated value if that happened, or the existing value if that happened. Either way, that's the list you want to add to. Hence, one line, no need for <code>if</code> shenanigans.</p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694032341,"creation_date":1694030653,"answer_id":77054962,"question_id":77053810,"body_markdown":"_&quot;... So I have this block that works, but I don&#39;t understand why the first one doesn&#39;t ...&quot;_\r\n\r\nYou&#39;ve misinterpreted the _[ArrayList](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/ArrayList.html#constructor-summary)_ constructor parameter.\r\n\r\nHere is an excerpt of the _JavaDoc_.\r\n\r\n&gt; _public ArrayList(int initialCapacity)_\r\n&gt;\r\n&gt; _Constructs an empty list with the specified initial capacity._\r\n&gt;\r\n&gt; _**Parameters**:_  \r\n&gt; _initialCapacity - the initial capacity of the list_\r\n\r\nThus, supplying an _int_ will not append the value.\r\n\r\nA quick solution to this is to wrap the value in a _[List#of](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/List.html#of(E))_ call.\r\n\r\n```java\r\nArrayList&lt;Integer&gt; array = new ArrayList&lt;&gt;(List.of(n.val));\r\n```\r\n\r\nYou can also use a class initializer, which I&#39;m failing to find a resource for.\r\n\r\n```java\r\nArrayList&lt;Integer&gt; array = new ArrayList&lt;&gt;() {{ add(n.val); }};\r\n```","title":"Why is my hashmap clearing some of its values?","body":"<p><em>&quot;... So I have this block that works, but I don't understand why the first one doesn't ...&quot;</em></p>\n<p>You've misinterpreted the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/ArrayList.html#constructor-summary\" rel=\"nofollow noreferrer\">ArrayList</a></em> constructor parameter.</p>\n<p>Here is an excerpt of the <em>JavaDoc</em>.</p>\n<blockquote>\n<p><em>public ArrayList(int initialCapacity)</em></p>\n<p><em>Constructs an empty list with the specified initial capacity.</em></p>\n<p><em><strong>Parameters</strong>:</em><br />\n<em>initialCapacity - the initial capacity of the list</em></p>\n</blockquote>\n<p>Thus, supplying an <em>int</em> will not append the value.</p>\n<p>A quick solution to this is to wrap the value in a <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/List.html#of(E)\" rel=\"nofollow noreferrer\">List#of</a></em> call.</p>\n<pre class=\"lang-java prettyprint-override\"><code>ArrayList&lt;Integer&gt; array = new ArrayList&lt;&gt;(List.of(n.val));\n</code></pre>\n<p>You can also use a class initializer, which I'm failing to find a resource for.</p>\n<pre class=\"lang-java prettyprint-override\"><code>ArrayList&lt;Integer&gt; array = new ArrayList&lt;&gt;() {{ add(n.val); }};\n</code></pre>\n"}],"owner":{"account_id":11149567,"reputation":83,"user_id":8183261,"display_name":"Bernadette"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1694032341,"creation_date":1694017944,"question_id":77053810,"body_markdown":"I am trying to create a map for a tree. It maps the column number (horizontal depth) to the list of nodes with that horizontal depth.\r\n\r\nWhen I use the below code, somehow the map gets overwritten by the else block.\r\n\r\nThe tree I am testing on:\r\nInput: `root = [3,9,20,null,null,15,7]`, from https://leetcode.com/problems/binary-tree-vertical-order-traversal/\r\n\r\n```java\r\nMap&lt;Integer, ArrayList&lt;Integer&gt;&gt; map = new HashMap&lt;&gt;();\r\nif (!map.containsKey(col)) {\r\n    ArrayList&lt;Integer&gt; array = new ArrayList&lt;&gt;(n.val);\r\n    map.put(col, array); \r\n} else {\r\n    map.get(col).add(n.val);\r\n}\r\n```\r\n\r\nOutput: ```[[],[15],[],[]]```\r\nThe other lists on the map were cleared...\r\n\r\nWhen I use this block, the map is built as expected:\r\n```java\r\nMap&lt;Integer, ArrayList&lt;Integer&gt;&gt; map = new HashMap&lt;&gt;();\r\nif (!map.containsKey(col)) {\r\n    ArrayList&lt;Integer&gt; array = new ArrayList&lt;&gt;();\r\n    map.put(col, array); \r\n}\r\nmap.get(col).add(n.val);\r\n```\r\nOutput: [[9],[3,15],[20],[7]]\r\n\r\n\r\nSo I have this block that works, but I don&#39;t understand why the first one doesn&#39;t","title":"Why is my hashmap clearing some of its values?","body":"<p>I am trying to create a map for a tree. It maps the column number (horizontal depth) to the list of nodes with that horizontal depth.</p>\n<p>When I use the below code, somehow the map gets overwritten by the else block.</p>\n<p>The tree I am testing on:\nInput: <code>root = [3,9,20,null,null,15,7]</code>, from <a href=\"https://leetcode.com/problems/binary-tree-vertical-order-traversal/\" rel=\"nofollow noreferrer\">https://leetcode.com/problems/binary-tree-vertical-order-traversal/</a></p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;Integer, ArrayList&lt;Integer&gt;&gt; map = new HashMap&lt;&gt;();\nif (!map.containsKey(col)) {\n    ArrayList&lt;Integer&gt; array = new ArrayList&lt;&gt;(n.val);\n    map.put(col, array); \n} else {\n    map.get(col).add(n.val);\n}\n</code></pre>\n<p>Output: <code>[[],[15],[],[]]</code>\nThe other lists on the map were cleared...</p>\n<p>When I use this block, the map is built as expected:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;Integer, ArrayList&lt;Integer&gt;&gt; map = new HashMap&lt;&gt;();\nif (!map.containsKey(col)) {\n    ArrayList&lt;Integer&gt; array = new ArrayList&lt;&gt;();\n    map.put(col, array); \n}\nmap.get(col).add(n.val);\n</code></pre>\n<p>Output: [[9],[3,15],[20],[7]]</p>\n<p>So I have this block that works, but I don't understand why the first one doesn't</p>\n"},{"tags":["java","amazon-web-services","amazon-s3","aws-sdk"],"comments":[{"owner":{"account_id":112931,"reputation":77772,"user_id":297696,"accept_rate":100,"display_name":"wkl"},"score":0,"creation_date":1656306513,"post_id":72767076,"comment_id":128530163,"body_markdown":"Make sure you [have permissions to actually access the bucket and create resigned URLs](https://docs.aws.amazon.com/AmazonS3/latest/userguide/using-presigned-url.html#who-presigned-url)","body":"Make sure you <a href=\"https://docs.aws.amazon.com/AmazonS3/latest/userguide/using-presigned-url.html#who-presigned-url\" rel=\"nofollow noreferrer\">have permissions to actually access the bucket and create resigned URLs</a>"},{"owner":{"account_id":16217112,"reputation":334,"user_id":11709663,"display_name":"Sabu Shakya"},"score":0,"creation_date":1656417320,"post_id":72767076,"comment_id":128562324,"body_markdown":"@wkl Thank you for helping. It was actually permissions issue.","body":"@wkl Thank you for helping. It was actually permissions issue."}],"answers":[{"tags":[],"owner":{"account_id":25505095,"reputation":11,"user_id":19297691,"display_name":"Faisal Iqbal"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694032181,"creation_date":1694032181,"answer_id":77055118,"question_id":72767076,"body_markdown":"I guess the issue was resolved. Posting a solution for anyone&#39;s future references.\r\n\r\nThe issue that I can see with this is while creating S3Presigner instance you are not actually providing the credentials.\r\n\r\n    presigner = S3Presigner.create();\r\n\r\nIf you create presigner instance using this approach, in reality what it actually do is go through all the possible ways of creating presigner instance. For example one of the approach would be to create using IAM role, one would be get the credentials from the config and many more. But it can fail if these are not done correctly. For a better approach what we can do is to create the presigner instance similar to creating S3Client instance.\r\n\r\n    S3Presigner.builder().region(Region.of(BUCKET_REGION))\r\n\t\t\t\t.credentialsProvider(awsCredentialProvider).build();\r\n\r\nAnd the way to create awsCredentialProvider is\r\n\r\n    AwsBasicCredentials awsBasicCredentials = AwsBasicCredentials.create(SECRET_KEY, ACCESS_KEY);\r\n\t\treturn StaticCredentialsProvider.create(awsBasicCredentials);\r\n\r\nCollectively:\r\n\r\n```\r\nprivate AwsCredentialsProvider getAwsCredentialProvider() {\r\n\tAwsBasicCredentials awsBasicCredentials = AwsBasicCredentials.create(SECRET_KEY, ACCESS_KEY);\r\n\treturn StaticCredentialsProvider.create(awsBasicCredentials);\r\n}\r\n\r\npublic S3Presigner buildS3PresignerInstance(AwsCredentialsProvider awsCredentialProvider) {\r\n\treturn S3Presigner.builder().region(Region.of(BUCKET_REGION))\r\n                      .credentialsProvider(awsCredentialProvider).build();\r\n}\r\n```","title":"AWS S3 Presigned Url generated shows access denied when using AWS SDK version 2","body":"<p>I guess the issue was resolved. Posting a solution for anyone's future references.</p>\n<p>The issue that I can see with this is while creating S3Presigner instance you are not actually providing the credentials.</p>\n<pre><code>presigner = S3Presigner.create();\n</code></pre>\n<p>If you create presigner instance using this approach, in reality what it actually do is go through all the possible ways of creating presigner instance. For example one of the approach would be to create using IAM role, one would be get the credentials from the config and many more. But it can fail if these are not done correctly. For a better approach what we can do is to create the presigner instance similar to creating S3Client instance.</p>\n<pre><code>S3Presigner.builder().region(Region.of(BUCKET_REGION))\n            .credentialsProvider(awsCredentialProvider).build();\n</code></pre>\n<p>And the way to create awsCredentialProvider is</p>\n<pre><code>AwsBasicCredentials awsBasicCredentials = AwsBasicCredentials.create(SECRET_KEY, ACCESS_KEY);\n    return StaticCredentialsProvider.create(awsBasicCredentials);\n</code></pre>\n<p>Collectively:</p>\n<pre><code>private AwsCredentialsProvider getAwsCredentialProvider() {\n    AwsBasicCredentials awsBasicCredentials = AwsBasicCredentials.create(SECRET_KEY, ACCESS_KEY);\n    return StaticCredentialsProvider.create(awsBasicCredentials);\n}\n\npublic S3Presigner buildS3PresignerInstance(AwsCredentialsProvider awsCredentialProvider) {\n    return S3Presigner.builder().region(Region.of(BUCKET_REGION))\n                      .credentialsProvider(awsCredentialProvider).build();\n}\n</code></pre>\n"}],"owner":{"account_id":16217112,"reputation":334,"user_id":11709663,"display_name":"Sabu Shakya"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1346,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1694032181,"creation_date":1656304891,"question_id":72767076,"body_markdown":"I&#39;m trying to generate presigned url to get access to objects in my bucket and have used AWS SDK version 2 for it. I&#39;ve followed the process as mentioned in the [aws docs][1] .\r\n\r\nI&#39;ve used the given dependency:\r\n```xml\r\n         &lt;dependency&gt;\r\n            &lt;artifactId&gt;bom&lt;/artifactId&gt;\r\n            &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\r\n            &lt;scope&gt;import&lt;/scope&gt;\r\n            &lt;type&gt;pom&lt;/type&gt;\r\n            &lt;version&gt;2.17.136&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\r\n            &lt;artifactId&gt;s3&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n```\r\nMy source code to generate the presigned URL is given below.\r\n\r\n```java\r\n     public String getTempUrl(String keyName, Long minutes) {\r\n        try {\r\n            S3Presigner s3Presigner = connection.getS3Presigner();\r\n\r\n            GetObjectRequest getObjectRequest =\r\n                GetObjectRequest.builder()\r\n                                .bucket(s3BucketName)\r\n                                .key(keyName)\r\n                                .build();\r\n\r\n            GetObjectPresignRequest getObjectPresignRequest = GetObjectPresignRequest.builder()\r\n                                                                                     .signatureDuration(\r\n                                                                                         Duration.ofMinutes(minutes))\r\n                                                                                     .getObjectRequest(getObjectRequest)\r\n                                                                                     .build();\r\n            PresignedGetObjectRequest presignedGetObjectRequest =\r\n                s3Presigner.presignGetObject(getObjectPresignRequest);\r\n\r\n            return presignedGetObjectRequest.url().toExternalForm();\r\n        } catch (Exception ex) {\r\n            log.warn(&quot;Error downloading the document URL: {}&quot;, ex);\r\n            throw new InternalServerError(&quot;Error downloading the document URL&quot;, ex);\r\n        }\r\n```\r\n\r\n```java\r\npublic class ConnectionProvider {\r\n\r\n    private static S3Client client;\r\n    private static S3Presigner presigner;\r\n\r\n    @Inject\r\n    @Property(&quot;storage.aws.s3.access.key&quot;)\r\n    private String s3AccessKey;\r\n\r\n    @Inject\r\n    @Property(&quot;storage.aws.s3.secret.key&quot;)\r\n    private String s3SecretKey;\r\n\r\n    @Inject\r\n    @Property(&quot;storage.aws.s3.region&quot;)\r\n    protected String region;\r\n\r\n    public S3Presigner getS3Presigner() {\r\n        if (presigner == null) {\r\n\r\n            if (isNullOrEmpty(region)) {\r\n                presigner = S3Presigner.create();\r\n            }\r\n\r\n            presigner = S3Presigner.builder()\r\n                                   .region(Region.of(region))\r\n                                   .build();\r\n            return presigner;\r\n        }\r\n\r\n        return presigner;\r\n    }\r\n\r\n\r\n    public S3Client getS3Client() {\r\n        if (client == null) {\r\n\r\n            if (isNullOrEmpty(s3AccessKey) || isNullOrEmpty(s3SecretKey) || isNullOrEmpty(region)) {\r\n                client = S3Client.create();\r\n                return client;\r\n            }\r\n\r\n            AwsCredentialsProvider credential = StaticCredentialsProvider\r\n                .create(AwsBasicCredentials.create(s3AccessKey, s3SecretKey));\r\n\r\n\r\n            client = S3Client.builder()\r\n                             .region(Region.of(region))\r\n                             .credentialsProvider(credential)\r\n                             .build();\r\n\r\n            return client;\r\n        }\r\n\r\n        return client;\r\n    }\r\n}\r\n```\r\n\r\nCode to upload to s3 bucket:\r\n```java\r\n public Document upload(Document document) {\r\n        try {\r\n\r\n            S3Client s3Client = connection.getS3Client();\r\n            S3Waiter s3Waiter = s3Client.waiter();\r\n\r\n\r\n            PutObjectRequest objectRequest = PutObjectRequest.builder()\r\n                                                             .bucket(s3BucketName)\r\n                                                             .key(document.getKey())\r\n                                                             .acl(ObjectCannedACL.PRIVATE)\r\n                                                             .contentType(document.getContentType())\r\n                                                             .build();\r\n\r\n            log.info(&quot;Uploading the document with key : [{}]&quot;, document.getKey());\r\n\r\n            s3Client.putObject(objectRequest, RequestBody.fromBytes(document.getBase64EncodedFile()));\r\n\r\n            HeadObjectRequest headObjectRequest =\r\n                HeadObjectRequest.builder().bucket(s3BucketName).key(document.getKey()).build();\r\n\r\n            s3Waiter.waitUntilObjectExists(headObjectRequest);\r\n            log.info((&quot;Document with key :[{}] uploaded successfully.&quot;), document.getKey());\r\n            return document;\r\n        } catch (Exception ex) {\r\n            log.warn(&quot;Error uploading the document: {}&quot;, ex);\r\n            throw new InternalServerError(&quot;Error uploading the document&quot;, ex);\r\n        }\r\n    }\r\n```\r\nThe upload portion is working fine and it&#39;s also generating the presigned url. But when trying to access the url, I&#39;m getting access denied error.\r\n\r\n[![enter image description here][2]][2]\r\n\r\nWhen I used [AWS SDK version 1][3] dependency given below and generated url using it, the url is working fine.\r\n\r\n```xml\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\r\n            &lt;artifactId&gt;aws-java-sdk-s3&lt;/artifactId&gt;\r\n            &lt;version&gt;1.12.245&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n```\r\nI&#39;ve tried taking reference of this :\r\n\r\nhttps://stackoverflow.com/questions/48493657/aws-java-sdk-2-0-create-a-presigned-url-for-a-s3-object\r\n\r\nSo far I&#39;m not able to generate a valid presigned url using the AWS SDK version 2. Can anyone help me with it? \r\n\r\n\r\n  [1]: https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/examples-s3-presign.html\r\n  [2]: https://i.stack.imgur.com/KQiC9.png\r\n  [3]: https://docs.aws.amazon.com/AmazonS3/latest/userguide/ShareObjectPreSignedURL.html","title":"AWS S3 Presigned Url generated shows access denied when using AWS SDK version 2","body":"<p>I'm trying to generate presigned url to get access to objects in my bucket and have used AWS SDK version 2 for it. I've followed the process as mentioned in the <a href=\"https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/examples-s3-presign.html\" rel=\"nofollow noreferrer\">aws docs</a> .</p>\n<p>I've used the given dependency:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>         &lt;dependency&gt;\n            &lt;artifactId&gt;bom&lt;/artifactId&gt;\n            &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\n            &lt;scope&gt;import&lt;/scope&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n            &lt;version&gt;2.17.136&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\n            &lt;artifactId&gt;s3&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>My source code to generate the presigned URL is given below.</p>\n<pre class=\"lang-java prettyprint-override\"><code>     public String getTempUrl(String keyName, Long minutes) {\n        try {\n            S3Presigner s3Presigner = connection.getS3Presigner();\n\n            GetObjectRequest getObjectRequest =\n                GetObjectRequest.builder()\n                                .bucket(s3BucketName)\n                                .key(keyName)\n                                .build();\n\n            GetObjectPresignRequest getObjectPresignRequest = GetObjectPresignRequest.builder()\n                                                                                     .signatureDuration(\n                                                                                         Duration.ofMinutes(minutes))\n                                                                                     .getObjectRequest(getObjectRequest)\n                                                                                     .build();\n            PresignedGetObjectRequest presignedGetObjectRequest =\n                s3Presigner.presignGetObject(getObjectPresignRequest);\n\n            return presignedGetObjectRequest.url().toExternalForm();\n        } catch (Exception ex) {\n            log.warn(&quot;Error downloading the document URL: {}&quot;, ex);\n            throw new InternalServerError(&quot;Error downloading the document URL&quot;, ex);\n        }\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class ConnectionProvider {\n\n    private static S3Client client;\n    private static S3Presigner presigner;\n\n    @Inject\n    @Property(&quot;storage.aws.s3.access.key&quot;)\n    private String s3AccessKey;\n\n    @Inject\n    @Property(&quot;storage.aws.s3.secret.key&quot;)\n    private String s3SecretKey;\n\n    @Inject\n    @Property(&quot;storage.aws.s3.region&quot;)\n    protected String region;\n\n    public S3Presigner getS3Presigner() {\n        if (presigner == null) {\n\n            if (isNullOrEmpty(region)) {\n                presigner = S3Presigner.create();\n            }\n\n            presigner = S3Presigner.builder()\n                                   .region(Region.of(region))\n                                   .build();\n            return presigner;\n        }\n\n        return presigner;\n    }\n\n\n    public S3Client getS3Client() {\n        if (client == null) {\n\n            if (isNullOrEmpty(s3AccessKey) || isNullOrEmpty(s3SecretKey) || isNullOrEmpty(region)) {\n                client = S3Client.create();\n                return client;\n            }\n\n            AwsCredentialsProvider credential = StaticCredentialsProvider\n                .create(AwsBasicCredentials.create(s3AccessKey, s3SecretKey));\n\n\n            client = S3Client.builder()\n                             .region(Region.of(region))\n                             .credentialsProvider(credential)\n                             .build();\n\n            return client;\n        }\n\n        return client;\n    }\n}\n</code></pre>\n<p>Code to upload to s3 bucket:</p>\n<pre class=\"lang-java prettyprint-override\"><code> public Document upload(Document document) {\n        try {\n\n            S3Client s3Client = connection.getS3Client();\n            S3Waiter s3Waiter = s3Client.waiter();\n\n\n            PutObjectRequest objectRequest = PutObjectRequest.builder()\n                                                             .bucket(s3BucketName)\n                                                             .key(document.getKey())\n                                                             .acl(ObjectCannedACL.PRIVATE)\n                                                             .contentType(document.getContentType())\n                                                             .build();\n\n            log.info(&quot;Uploading the document with key : [{}]&quot;, document.getKey());\n\n            s3Client.putObject(objectRequest, RequestBody.fromBytes(document.getBase64EncodedFile()));\n\n            HeadObjectRequest headObjectRequest =\n                HeadObjectRequest.builder().bucket(s3BucketName).key(document.getKey()).build();\n\n            s3Waiter.waitUntilObjectExists(headObjectRequest);\n            log.info((&quot;Document with key :[{}] uploaded successfully.&quot;), document.getKey());\n            return document;\n        } catch (Exception ex) {\n            log.warn(&quot;Error uploading the document: {}&quot;, ex);\n            throw new InternalServerError(&quot;Error uploading the document&quot;, ex);\n        }\n    }\n</code></pre>\n<p>The upload portion is working fine and it's also generating the presigned url. But when trying to access the url, I'm getting access denied error.</p>\n<p><a href=\"https://i.stack.imgur.com/KQiC9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KQiC9.png\" alt=\"enter image description here\" /></a></p>\n<p>When I used <a href=\"https://docs.aws.amazon.com/AmazonS3/latest/userguide/ShareObjectPreSignedURL.html\" rel=\"nofollow noreferrer\">AWS SDK version 1</a> dependency given below and generated url using it, the url is working fine.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>        &lt;dependency&gt;\n            &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\n            &lt;artifactId&gt;aws-java-sdk-s3&lt;/artifactId&gt;\n            &lt;version&gt;1.12.245&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>I've tried taking reference of this :</p>\n<p><a href=\"https://stackoverflow.com/questions/48493657/aws-java-sdk-2-0-create-a-presigned-url-for-a-s3-object\">AWS Java SDK 2.0 create a presigned URL for a S3 object</a></p>\n<p>So far I'm not able to generate a valid presigned url using the AWS SDK version 2. Can anyone help me with it?</p>\n"},{"tags":["java","spring","maven"],"comments":[{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1546787902,"post_id":54062210,"comment_id":94958877,"body_markdown":"Always when you have a null pointer exception find out what variable is null.  That helps you pinpoint the problem.","body":"Always when you have a null pointer exception find out what variable is null.  That helps you pinpoint the problem."}],"answers":[{"comments":[{"owner":{"account_id":6679591,"reputation":233,"user_id":5153230,"display_name":"Nishi Bansal"},"score":0,"creation_date":1546784647,"post_id":54062312,"comment_id":94957945,"body_markdown":"When I autowired jdbcUserDAO in userController class, then I am getting below error: `Context initialization failed\norg.springframework.beans.factory.UnsatisfiedDependencyException:Error creating bean with name &#39;userController&#39;: Unsatisfied dependency expressed through field &#39;jdbcUserDAO&#39;: No qualifying bean of type [***.JdbcUserDAO] found for dependency [***.JdbcUserDAO]: expected at least 1 bean which qualifies as autowire candidate for this dependency.Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)};exception is NoSuchBeanDefinitionException`","body":"When I autowired jdbcUserDAO in userController class, then I am getting below error: <code>Context initialization failed org.springframework.beans.factory.UnsatisfiedDependencyExcep&zwnj;&#8203;tion:Error creating bean with name &#39;userController&#39;: Unsatisfied dependency expressed through field &#39;jdbcUserDAO&#39;: No qualifying bean of type [***.JdbcUserDAO] found for dependency [***.JdbcUserDAO]: expected at least 1 bean which qualifies as autowire candidate for this dependency.Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(req&zwnj;&#8203;uired=true)};excepti&zwnj;&#8203;on is NoSuchBeanDefinitionException</code>"},{"owner":{"account_id":2793517,"reputation":3819,"user_id":2403253,"accept_rate":88,"display_name":"Justin Albano"},"score":0,"creation_date":1546784989,"post_id":54062312,"comment_id":94958062,"body_markdown":"@NishiBansal It looks like Spring is not accounting for your `application_config.xml`. I have updated the answer to include a fix.","body":"@NishiBansal It looks like Spring is not accounting for your <code>application_config.xml</code>. I have updated the answer to include a fix."}],"tags":[],"owner":{"account_id":2793517,"reputation":3819,"user_id":2403253,"accept_rate":88,"display_name":"Justin Albano"},"comment_count":2,"down_vote_count":0,"up_vote_count":21,"is_accepted":true,"score":21,"last_activity_date":1546784944,"creation_date":1546783673,"answer_id":54062312,"question_id":54062210,"body_markdown":"Although you have defined the `jdbcUserDAO` bean, you have not wired it into the `UserController` class. This causes a `NullPointerException` because the `jdbcUserDAO` field is `null`, which results in the exception when `jdbcUserDAO.getAllUsers()` is called. To solve this, annotate the `jdbcUserDAO` setter in the `UserController` with `@Autowired`, as in:\r\n\r\n    @RestController\r\n    public class UserController {\r\n    \r\n        private JdbcUserDAO jdbcUserDAO;\r\n    \r\n        public JdbcUserDAO getJdbcUserDAO() {\r\n            return jdbcUserDAO;\r\n        }\r\n    \r\n        @Autowired\r\n        public void setJdbcUserDAO(JdbcUserDAO jdbcUserDAO) {\r\n            this.jdbcUserDAO = jdbcUserDAO;\r\n        }\r\n    \r\n        @RequestMapping(&quot;/&quot;)\r\n        @ResponseBody\r\n        public String welcome() {\r\n            return &quot;Welcome to RestTemplate Example.&quot;;\r\n        }\r\n    \r\n        @RequestMapping(value=&quot;/users&quot;, method=RequestMethod.GET, produces=MediaType.APPLICATION_JSON_VALUE)\r\n        @ResponseBody   \r\n        public List&lt;User&gt; getAllUsers() {\r\n            System.out.println(&quot;jdbcUserDAO&quot;+jdbcUserDAO);\r\n            List&lt;User&gt; userList = jdbcUserDAO.getAllUsers();\r\n            System.out.println(userList);\r\n            return userList;\r\n        }\r\n    \r\n    }\r\n\r\nThe `@Autowired` annotation tells Spring that a bean that matches the interface of the parameter for the setter (in this case, `JdbcUserDAO`) should be injected into the setter, which results in the `jdbcUserDAO` field being set to your `JdbcUserDAO` bean defined in `application_config.xml`.\r\n\r\nYou could also simplify your `UserController` and annotate the field (removing the getter and setter):\r\n\r\n    @RestController\r\n    public class UserController {\r\n    \r\n        @Autowired\r\n        private JdbcUserDAO jdbcUserDAO;\r\n    \r\n        @RequestMapping(&quot;/&quot;)\r\n        @ResponseBody\r\n        public String welcome() {\r\n            return &quot;Welcome to RestTemplate Example.&quot;;\r\n        }\r\n    \r\n        @RequestMapping(value=&quot;/users&quot;, method=RequestMethod.GET, produces=MediaType.APPLICATION_JSON_VALUE)\r\n        @ResponseBody   \r\n        public List&lt;User&gt; getAllUsers() {\r\n            System.out.println(&quot;jdbcUserDAO&quot;+jdbcUserDAO);\r\n            List&lt;User&gt; userList = jdbcUserDAO.getAllUsers();\r\n            System.out.println(userList);\r\n            return userList;\r\n        }\r\n    \r\n    }\r\n\r\nFor more information, see [Guide to Spring @Autowired][1].\r\n\r\n----------\r\n\r\nIt also looks like your `application_config.xml` is not being included in Spring&#39;s application context. To include this XML file, change your `ApplicationConfiguration` class to resemble the following:\r\n\r\n    @ComponentScan(basePackages = {&quot;com.ganeshTrading.riceAppService&quot;})\r\n    @Configuration\r\n    @EnableWebMvc\r\n    @ImportResource(&quot;classpath:/path/to/application_config.xml&quot;)\r\n    public class ApplicationConfiguration {\r\n    \r\n    }\r\n\r\nNote that `classpath:/path/to/application_config.xml` is an example and the actual location of your `application_config.xml` file should be used instead.\r\n\r\n  [1]: https://www.baeldung.com/spring-autowire","title":"Servlet.service() for servlet [dispatcher] in context with path [/***] threw exception","body":"<p>Although you have defined the <code>jdbcUserDAO</code> bean, you have not wired it into the <code>UserController</code> class. This causes a <code>NullPointerException</code> because the <code>jdbcUserDAO</code> field is <code>null</code>, which results in the exception when <code>jdbcUserDAO.getAllUsers()</code> is called. To solve this, annotate the <code>jdbcUserDAO</code> setter in the <code>UserController</code> with <code>@Autowired</code>, as in:</p>\n\n<pre><code>@RestController\npublic class UserController {\n\n    private JdbcUserDAO jdbcUserDAO;\n\n    public JdbcUserDAO getJdbcUserDAO() {\n        return jdbcUserDAO;\n    }\n\n    @Autowired\n    public void setJdbcUserDAO(JdbcUserDAO jdbcUserDAO) {\n        this.jdbcUserDAO = jdbcUserDAO;\n    }\n\n    @RequestMapping(\"/\")\n    @ResponseBody\n    public String welcome() {\n        return \"Welcome to RestTemplate Example.\";\n    }\n\n    @RequestMapping(value=\"/users\", method=RequestMethod.GET, produces=MediaType.APPLICATION_JSON_VALUE)\n    @ResponseBody   \n    public List&lt;User&gt; getAllUsers() {\n        System.out.println(\"jdbcUserDAO\"+jdbcUserDAO);\n        List&lt;User&gt; userList = jdbcUserDAO.getAllUsers();\n        System.out.println(userList);\n        return userList;\n    }\n\n}\n</code></pre>\n\n<p>The <code>@Autowired</code> annotation tells Spring that a bean that matches the interface of the parameter for the setter (in this case, <code>JdbcUserDAO</code>) should be injected into the setter, which results in the <code>jdbcUserDAO</code> field being set to your <code>JdbcUserDAO</code> bean defined in <code>application_config.xml</code>.</p>\n\n<p>You could also simplify your <code>UserController</code> and annotate the field (removing the getter and setter):</p>\n\n<pre><code>@RestController\npublic class UserController {\n\n    @Autowired\n    private JdbcUserDAO jdbcUserDAO;\n\n    @RequestMapping(\"/\")\n    @ResponseBody\n    public String welcome() {\n        return \"Welcome to RestTemplate Example.\";\n    }\n\n    @RequestMapping(value=\"/users\", method=RequestMethod.GET, produces=MediaType.APPLICATION_JSON_VALUE)\n    @ResponseBody   \n    public List&lt;User&gt; getAllUsers() {\n        System.out.println(\"jdbcUserDAO\"+jdbcUserDAO);\n        List&lt;User&gt; userList = jdbcUserDAO.getAllUsers();\n        System.out.println(userList);\n        return userList;\n    }\n\n}\n</code></pre>\n\n<p>For more information, see <a href=\"https://www.baeldung.com/spring-autowire\" rel=\"noreferrer\">Guide to Spring @Autowired</a>.</p>\n\n<hr>\n\n<p>It also looks like your <code>application_config.xml</code> is not being included in Spring's application context. To include this XML file, change your <code>ApplicationConfiguration</code> class to resemble the following:</p>\n\n<pre><code>@ComponentScan(basePackages = {\"com.ganeshTrading.riceAppService\"})\n@Configuration\n@EnableWebMvc\n@ImportResource(\"classpath:/path/to/application_config.xml\")\npublic class ApplicationConfiguration {\n\n}\n</code></pre>\n\n<p>Note that <code>classpath:/path/to/application_config.xml</code> is an example and the actual location of your <code>application_config.xml</code> file should be used instead.</p>\n"},{"tags":[],"owner":{"account_id":17733622,"reputation":11,"user_id":12875553,"display_name":"ozz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694031830,"creation_date":1694031682,"answer_id":77055073,"question_id":54062210,"body_markdown":"This worked for me all I had to do was go to my Controller class and put @Autowired on top of my private StudentInfoService studentInfoService;\r\n\r\nAlso, you can make your instance of the class final instead of putting @Autowired, do private final StudentInfoService studentInfoService;\r\nSO just put final.","title":"Servlet.service() for servlet [dispatcher] in context with path [/***] threw exception","body":"<p>This worked for me all I had to do was go to my Controller class and put @Autowired on top of my private StudentInfoService studentInfoService;</p>\n<p>Also, you can make your instance of the class final instead of putting @Autowired, do private final StudentInfoService studentInfoService;\nSO just put final.</p>\n"}],"owner":{"account_id":6679591,"reputation":233,"user_id":5153230,"display_name":"Nishi Bansal"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":234577,"favorite_count":0,"down_vote_count":1,"up_vote_count":23,"accepted_answer_id":54062312,"answer_count":2,"score":22,"last_activity_date":1694031830,"creation_date":1546783029,"question_id":54062210,"body_markdown":"I am getting below error while creating spring maven rest webservice. When trying to call DAO class with bean name defined in application_config.xml, getting NullPointerException\r\n\r\n    SEVERE: Servlet.service() for servlet [dispatcher] in context with path [/riceAppService] threw exception [Request processing failed; nested exception is java.lang.NullPointerException] with root cause\r\n    java.lang.NullPointerException\r\n    \tat com.ganeshTrading.riceAppService.controller.UserController.getAllUsers(UserController.java:46)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:114)\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:827)\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:738)\r\n    \tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:897)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:970)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:861)\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:622)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:846)\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:292)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n    \tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\r\n    \tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:212)\r\n    \tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)\r\n    \tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)\r\n    \tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:141)\r\n    \tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)\r\n    \tat org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:616)\r\n    \tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)\r\n    \tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:528)\r\n    \tat org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1099)\r\n    \tat org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:670)\r\n    \tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1520)\r\n    \tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1476)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n    \tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n    \tat java.lang.Thread.run(Thread.java:748)\r\n\r\nHere, is my code\r\n\r\n**UserController.java**\r\n\r\n        @RestController\r\n    public class UserController {\r\n    \r\n    \tprivate JdbcUserDAO jdbcUserDAO;\r\n    \r\n    \t\r\n    \tpublic JdbcUserDAO getJdbcUserDAO() {\r\n    \t\treturn jdbcUserDAO;\r\n    \t}\r\n    \r\n    \tpublic void setJdbcUserDAO(JdbcUserDAO jdbcUserDAO) {\r\n    \t\tthis.jdbcUserDAO = jdbcUserDAO;\r\n    \t}\r\n    \r\n    \t@RequestMapping(&quot;/&quot;)\r\n        @ResponseBody\r\n        public String welcome() {\r\n            return &quot;Welcome to RestTemplate Example.&quot;;\r\n        }\r\n    \t\r\n    \t@RequestMapping(value=&quot;/users&quot;, method=RequestMethod.GET, produces=MediaType.APPLICATION_JSON_VALUE)\r\n    \t@ResponseBody\t\r\n    \tpublic List&lt;User&gt; getAllUsers() {\r\n    \t\tSystem.out.println(&quot;jdbcUserDAO&quot;+jdbcUserDAO);\r\n    \t\tList&lt;User&gt; userList = jdbcUserDAO.getAllUsers();\r\n    \t\tSystem.out.println(userList);\r\n    \t\treturn userList;\r\n    \t}\r\n    \r\n    }\r\n\r\n**UserDAO.java**\r\n\r\n    public interface UserDAO {\r\n    \r\n    \tpublic List&lt;User&gt; getAllUsers();\r\n    }\r\n\r\n**JdbcUserDAO.java**\r\n\r\n    public class JdbcUserDAO implements UserDAO {\r\n    \r\n    \tDataSource dataSource;\r\n    \t\r\n    \t\r\n    \tpublic void setDataSource(DataSource dataSource) {\r\n    \t\tthis.dataSource = dataSource;\r\n    \t}\r\n    \r\n    \r\n    \t@Override\r\n    \tpublic List&lt;User&gt; getAllUsers() {\r\n    \t\tString sql = &quot;select * from customer&quot;;\r\n    \t\tJdbcTemplate jdbcTemplate = new JdbcTemplate(dataSource);\r\n    \t\tSystem.out.println(&quot;getJdbcTemplate() &quot;+jdbcTemplate);\r\n    \t\tList&lt;User&gt; userList = jdbcTemplate.query(sql, new UserMapper());\r\n    \t\treturn userList;\r\n    \t}\r\n    \r\n    }\r\n\r\n**servlet-context.xml**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; \r\n    xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n    xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;\r\n     xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; \r\n     xsi:schemaLocation=&quot; http://www.springframework.org/schema/beans  \r\n     http://www.springframework.org/schema/beans/spring-beans-4.3.xsd \r\n     http://www.springframework.org/schema/context \r\n     http://www.springframework.org/schema/context/spring-context-4.3.xsd\r\n     http://www.springframework.org/schema/mvc \r\n     http://www.springframework.org/schema/mvc/spring-mvc-4.3.xsd&quot;&gt;\r\n    \r\n    \r\n    \r\n    &lt;context:annotation-config /&gt;\r\n    &lt;mvc:annotation-driven /&gt;\r\n    \r\n    &lt;import resource=&quot;classpath:application_config.xml&quot; /&gt; \r\n    &lt;context:component-scan base-package=&quot;com.ganeshTrading.riceAppService&quot; /&gt;\r\n    \r\n    &lt;/beans&gt;\r\n\r\n**application_config.xml**\r\n\r\n        &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n    \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\r\n    \thttp://www.springframework.org/schema/beans/spring-beans-4.3.xsd&quot;&gt;\r\n        \r\n          \r\n        &lt;bean id=&quot;jdbcUserDAO&quot; class=&quot;com.ganeshTrading.riceAppService.dao.impl.JdbcUserDAO&quot;&gt;\r\n       \t\t&lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot; /&gt;\r\n        &lt;/bean&gt;\r\n       \r\n       &lt;bean id=&quot;dataSource&quot; class=&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;&gt;\r\n       \t&lt;property name=&quot;driverClassName&quot; value=&quot;com.mysql.jdbc.Driver&quot;&gt;&lt;/property&gt;\r\n       \t&lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/ganeshricetrading&quot;&gt;&lt;/property&gt;\r\n       \t&lt;property name=&quot;username&quot; value=&quot;root&quot;&gt;&lt;/property&gt;\r\n       \t&lt;property name=&quot;password&quot; value=&quot;sql&quot;&gt;&lt;/property&gt;\r\n       &lt;/bean&gt;    \r\n        \r\n    &lt;/beans&gt;\r\n\r\n**web.xml**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    \r\n    &lt;web-app xmlns:xsi=&quot;w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;xmlns.jcp.org/xml/ns/javaee&quot; xsi:schemaLocation=&quot;xmlns.jcp.org/xml/ns/javaee xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd&quot; id=&quot;WebApp_ID&quot; version=&quot;3.1&quot;&gt;\r\n          &lt;display-name&gt;Archetype Created Web Application&lt;/display-name&gt;\r\n      &lt;servlet&gt;\r\n      \t&lt;servlet-name&gt;appServlet&lt;/servlet-name&gt;\r\n      \t&lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\r\n      \t&lt;init-param&gt;\r\n      \t\t&lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\r\n      \t\t&lt;param-value&gt;/WEB-INF/servlet-context.xml&lt;/param-value&gt;\r\n      \t&lt;/init-param&gt;\r\n      \t&lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\r\n      &lt;/servlet&gt;\r\n      &lt;servlet-mapping&gt;\r\n      \t&lt;servlet-name&gt;appServlet&lt;/servlet-name&gt;\r\n      \t&lt;url-pattern&gt;/&lt;/url-pattern&gt;\r\n      &lt;/servlet-mapping&gt;\r\n    &lt;/web-app&gt;\r\n\r\n**ApplicationConfiguration.java**\r\n\r\n    @ComponentScan(basePackages = {&quot;com.ganeshTrading.riceAppService&quot;})\r\n    @Configuration\r\n    @EnableWebMvc\r\n    public class ApplicationConfiguration {\r\n    \r\n    }\r\n\r\nWhat is wrong with my code?","title":"Servlet.service() for servlet [dispatcher] in context with path [/***] threw exception","body":"<p>I am getting below error while creating spring maven rest webservice. When trying to call DAO class with bean name defined in application_config.xml, getting NullPointerException</p>\n<pre><code>SEVERE: Servlet.service() for servlet [dispatcher] in context with path [/riceAppService] threw exception [Request processing failed; nested exception is java.lang.NullPointerException] with root cause\njava.lang.NullPointerException\n    at com.ganeshTrading.riceAppService.controller.UserController.getAllUsers(UserController.java:46)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:221)\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:114)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:827)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:738)\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:85)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:963)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:897)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:970)\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:861)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:622)\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:846)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:292)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:52)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:240)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:207)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:212)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:106)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:502)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:141)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:79)\n    at org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:616)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:88)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:528)\n    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1099)\n    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:670)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1520)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1476)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    at java.lang.Thread.run(Thread.java:748)\n</code></pre>\n<p>Here, is my code</p>\n<p><strong>UserController.java</strong></p>\n<pre><code>    @RestController\npublic class UserController {\n\n    private JdbcUserDAO jdbcUserDAO;\n\n    \n    public JdbcUserDAO getJdbcUserDAO() {\n        return jdbcUserDAO;\n    }\n\n    public void setJdbcUserDAO(JdbcUserDAO jdbcUserDAO) {\n        this.jdbcUserDAO = jdbcUserDAO;\n    }\n\n    @RequestMapping(&quot;/&quot;)\n    @ResponseBody\n    public String welcome() {\n        return &quot;Welcome to RestTemplate Example.&quot;;\n    }\n    \n    @RequestMapping(value=&quot;/users&quot;, method=RequestMethod.GET, produces=MediaType.APPLICATION_JSON_VALUE)\n    @ResponseBody   \n    public List&lt;User&gt; getAllUsers() {\n        System.out.println(&quot;jdbcUserDAO&quot;+jdbcUserDAO);\n        List&lt;User&gt; userList = jdbcUserDAO.getAllUsers();\n        System.out.println(userList);\n        return userList;\n    }\n\n}\n</code></pre>\n<p><strong>UserDAO.java</strong></p>\n<pre><code>public interface UserDAO {\n\n    public List&lt;User&gt; getAllUsers();\n}\n</code></pre>\n<p><strong>JdbcUserDAO.java</strong></p>\n<pre><code>public class JdbcUserDAO implements UserDAO {\n\n    DataSource dataSource;\n    \n    \n    public void setDataSource(DataSource dataSource) {\n        this.dataSource = dataSource;\n    }\n\n\n    @Override\n    public List&lt;User&gt; getAllUsers() {\n        String sql = &quot;select * from customer&quot;;\n        JdbcTemplate jdbcTemplate = new JdbcTemplate(dataSource);\n        System.out.println(&quot;getJdbcTemplate() &quot;+jdbcTemplate);\n        List&lt;User&gt; userList = jdbcTemplate.query(sql, new UserMapper());\n        return userList;\n    }\n\n}\n</code></pre>\n<p><strong>servlet-context.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot; \nxmlns:context=&quot;http://www.springframework.org/schema/context&quot;\nxmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;\n xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; \n xsi:schemaLocation=&quot; http://www.springframework.org/schema/beans  \n http://www.springframework.org/schema/beans/spring-beans-4.3.xsd \n http://www.springframework.org/schema/context \n http://www.springframework.org/schema/context/spring-context-4.3.xsd\n http://www.springframework.org/schema/mvc \n http://www.springframework.org/schema/mvc/spring-mvc-4.3.xsd&quot;&gt;\n\n\n\n&lt;context:annotation-config /&gt;\n&lt;mvc:annotation-driven /&gt;\n\n&lt;import resource=&quot;classpath:application_config.xml&quot; /&gt; \n&lt;context:component-scan base-package=&quot;com.ganeshTrading.riceAppService&quot; /&gt;\n\n&lt;/beans&gt;\n</code></pre>\n<p><strong>application_config.xml</strong></p>\n<pre><code>    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\n    http://www.springframework.org/schema/beans/spring-beans-4.3.xsd&quot;&gt;\n    \n      \n    &lt;bean id=&quot;jdbcUserDAO&quot; class=&quot;com.ganeshTrading.riceAppService.dao.impl.JdbcUserDAO&quot;&gt;\n        &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot; /&gt;\n    &lt;/bean&gt;\n   \n   &lt;bean id=&quot;dataSource&quot; class=&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;&gt;\n    &lt;property name=&quot;driverClassName&quot; value=&quot;com.mysql.jdbc.Driver&quot;&gt;&lt;/property&gt;\n    &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/ganeshricetrading&quot;&gt;&lt;/property&gt;\n    &lt;property name=&quot;username&quot; value=&quot;root&quot;&gt;&lt;/property&gt;\n    &lt;property name=&quot;password&quot; value=&quot;sql&quot;&gt;&lt;/property&gt;\n   &lt;/bean&gt;    \n    \n&lt;/beans&gt;\n</code></pre>\n<p><strong>web.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;web-app xmlns:xsi=&quot;w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;xmlns.jcp.org/xml/ns/javaee&quot; xsi:schemaLocation=&quot;xmlns.jcp.org/xml/ns/javaee xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd&quot; id=&quot;WebApp_ID&quot; version=&quot;3.1&quot;&gt;\n      &lt;display-name&gt;Archetype Created Web Application&lt;/display-name&gt;\n  &lt;servlet&gt;\n    &lt;servlet-name&gt;appServlet&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n    &lt;init-param&gt;\n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n        &lt;param-value&gt;/WEB-INF/servlet-context.xml&lt;/param-value&gt;\n    &lt;/init-param&gt;\n    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n  &lt;/servlet&gt;\n  &lt;servlet-mapping&gt;\n    &lt;servlet-name&gt;appServlet&lt;/servlet-name&gt;\n    &lt;url-pattern&gt;/&lt;/url-pattern&gt;\n  &lt;/servlet-mapping&gt;\n&lt;/web-app&gt;\n</code></pre>\n<p><strong>ApplicationConfiguration.java</strong></p>\n<pre><code>@ComponentScan(basePackages = {&quot;com.ganeshTrading.riceAppService&quot;})\n@Configuration\n@EnableWebMvc\npublic class ApplicationConfiguration {\n\n}\n</code></pre>\n<p>What is wrong with my code?</p>\n"},{"tags":["java","arrays","hashmap","java-8","java-stream"],"comments":[{"owner":{"account_id":2478127,"reputation":19514,"user_id":2158288,"display_name":"ZhongYu"},"score":3,"creation_date":1485815177,"post_id":41946327,"comment_id":71073389,"body_markdown":"better just use good old `for` loop:)","body":"better just use good old <code>for</code> loop:)"},{"owner":{"account_id":9553438,"reputation":3539,"user_id":7096763,"display_name":"MikaelF"},"score":2,"creation_date":1485834025,"post_id":41946327,"comment_id":71078450,"body_markdown":"You might find what you&#39;re looking for here: [Collect successive pairs from a stream](http://stackoverflow.com/questions/20470010/collect-successive-pairs-from-a-stream).","body":"You might find what you&#39;re looking for here: <a href=\"http://stackoverflow.com/questions/20470010/collect-successive-pairs-from-a-stream\">Collect successive pairs from a stream</a>."},{"owner":{"account_id":453872,"reputation":316,"user_id":851116,"display_name":"Yang Hailong"},"score":0,"creation_date":1502167131,"post_id":41946327,"comment_id":78078149,"body_markdown":"Reference https://stackoverflow.com/questions/31693781/convert-string-array-to-map-using-java-8-lambda-expressions","body":"Reference <a href=\"https://stackoverflow.com/questions/31693781/convert-string-array-to-map-using-java-8-lambda-expressions\" title=\"convert string array to map using java 8 lambda expressions\">stackoverflow.com/questions/31693781/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":4120139,"reputation":1,"user_id":3380739,"display_name":"user_3380739"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1674194856,"creation_date":1485815898,"answer_id":41946663,"question_id":41946327,"body_markdown":"Here is my idea by JDK 8 stream:\r\n\r\n    public static &lt;K, V&gt; Map&lt;K, V&gt; toMap(final Object... entries) {\r\n        // Requirements:\r\n        // entries must be K1, V1, K2, V2, .... ( even length )\r\n        if (entries.length % 2 == 1) {\r\n            throw new IllegalArgumentException(&quot;Invalid entries&quot;);\r\n        }\r\n\r\n        final Map&lt;K, V&gt; map = new HashMap&lt;&gt;((int) (entries.length / 2 * 1.25 + 1));\r\n        IntStream.range(0, entries.length / 2).forEach(i -&gt; map.put((K) entries[i * 2], (V) entries[i * 2 + 1]));\r\n        return map;\r\n\r\n        // OR: \r\n        //    return IntStream.range(0, entries.length / 2).boxed().reduce(new HashMap&lt;K, V&gt;(), (m, i) -&gt; {\r\n        //        m.put((K) entries[i * 2], (V) entries[i * 2 + 1]);\r\n        //        return m;\r\n        //    }, (a, b) -&gt; {\r\n        //        a.putAll(b);\r\n        //        return b;\r\n        //    });\r\n    }\r\n\r\nIf you don&#39;t mind use third-party library [abacus-common][1], the code could be simplified to:\r\n\r\n    public static &lt;K, V&gt; Map&lt;K, V&gt; toMap2(final Object... entries) {\r\n        // Requirements:\r\n        // entries must be K1, V1, K2, V2, .... ( even length )\r\n        if (entries.length % 2 == 1) {\r\n            throw new IllegalArgumentException(&quot;Invalid entries&quot;);\r\n        }\r\n\r\n        return Stream.of(entries).split0(2).toMap(e -&gt; (K) e.get(0), e -&gt; (V) e.get(1));\r\n    }\r\n\r\nAnd I think the most efficient way to do it is by for loop, if you not particularly pursue using Stream API\r\n\r\n    public static &lt;K, V&gt; Map&lt;K, V&gt; toMap3(final Object... entries) {\r\n        // Requirements:\r\n        // entries must be K1, V1, K2, V2, .... ( even length )\r\n        if (entries.length % 2 == 1) {\r\n            throw new IllegalArgumentException(&quot;Invalid entries&quot;);\r\n        }\r\n\r\n        final Map&lt;K, V&gt; map = new HashMap&lt;&gt;((int) (entries.length / 2 * 1.25 + 1));\r\n\r\n        for (int i = 0, len = entries.length; i &lt; len; i++) {\r\n            map.put((K) entries[i], (V) entries[++i]);\r\n        }\r\n\r\n        return map;\r\n\r\n        // OR just call the method in abacus-common.       \r\n        // return N.asMap(entries);\r\n    }\r\n\r\n  [1]: https://github.com/landawn/abacus-common","title":"How to convert Array to HashMap using Java 8 Stream","body":"<p>Here is my idea by JDK 8 stream:</p>\n<pre><code>public static &lt;K, V&gt; Map&lt;K, V&gt; toMap(final Object... entries) {\n    // Requirements:\n    // entries must be K1, V1, K2, V2, .... ( even length )\n    if (entries.length % 2 == 1) {\n        throw new IllegalArgumentException(&quot;Invalid entries&quot;);\n    }\n\n    final Map&lt;K, V&gt; map = new HashMap&lt;&gt;((int) (entries.length / 2 * 1.25 + 1));\n    IntStream.range(0, entries.length / 2).forEach(i -&gt; map.put((K) entries[i * 2], (V) entries[i * 2 + 1]));\n    return map;\n\n    // OR: \n    //    return IntStream.range(0, entries.length / 2).boxed().reduce(new HashMap&lt;K, V&gt;(), (m, i) -&gt; {\n    //        m.put((K) entries[i * 2], (V) entries[i * 2 + 1]);\n    //        return m;\n    //    }, (a, b) -&gt; {\n    //        a.putAll(b);\n    //        return b;\n    //    });\n}\n</code></pre>\n<p>If you don't mind use third-party library <a href=\"https://github.com/landawn/abacus-common\" rel=\"nofollow noreferrer\">abacus-common</a>, the code could be simplified to:</p>\n<pre><code>public static &lt;K, V&gt; Map&lt;K, V&gt; toMap2(final Object... entries) {\n    // Requirements:\n    // entries must be K1, V1, K2, V2, .... ( even length )\n    if (entries.length % 2 == 1) {\n        throw new IllegalArgumentException(&quot;Invalid entries&quot;);\n    }\n\n    return Stream.of(entries).split0(2).toMap(e -&gt; (K) e.get(0), e -&gt; (V) e.get(1));\n}\n</code></pre>\n<p>And I think the most efficient way to do it is by for loop, if you not particularly pursue using Stream API</p>\n<pre><code>public static &lt;K, V&gt; Map&lt;K, V&gt; toMap3(final Object... entries) {\n    // Requirements:\n    // entries must be K1, V1, K2, V2, .... ( even length )\n    if (entries.length % 2 == 1) {\n        throw new IllegalArgumentException(&quot;Invalid entries&quot;);\n    }\n\n    final Map&lt;K, V&gt; map = new HashMap&lt;&gt;((int) (entries.length / 2 * 1.25 + 1));\n\n    for (int i = 0, len = entries.length; i &lt; len; i++) {\n        map.put((K) entries[i], (V) entries[++i]);\n    }\n\n    return map;\n\n    // OR just call the method in abacus-common.       \n    // return N.asMap(entries);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3619169,"reputation":9458,"user_id":3018377,"accept_rate":64,"display_name":"LHA"},"score":0,"creation_date":1485872395,"post_id":41946690,"comment_id":71098442,"body_markdown":"Thank you. I still prefer passing keys, values instead of Pair.","body":"Thank you. I still prefer passing keys, values instead of Pair."}],"tags":[],"owner":{"account_id":6874,"reputation":2729,"user_id":11699,"accept_rate":71,"display_name":"Michael Bar-Sinai"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1485816024,"creation_date":1485816024,"answer_id":41946690,"question_id":41946327,"body_markdown":"Getting exactly what you want will probably not work for maps whose key type differs from their value type. This is because Java&#39;s variable arity declaration (the `Object... entries` part) supports only one type.\r\n\r\nSome options come to mind:\r\n\r\n1. You could do the checks dynamically and throw an illegal argument exception if the values don&#39;t match. But you&#39;ll lose the compiler type-checking.\r\n\r\n2. You could define a `Pair` class, and play a bit with static import to get almost what you want:\r\n\r\n\r\ne.g.: \r\n\r\n    class Pair&lt;K,V&gt; {\r\n        final K k;\r\n        final V v;\r\n        Pair( K ak, V av) {\r\n            k=ak;\r\n            v=av;\r\n        }\r\n        static &lt;A,B&gt; Pair&lt;A,B&gt; p(A a, B b) {\r\n            return new Pair(a,b);\r\n        }\r\n    }\r\n    \r\n    public class JavaTest8 {\r\n        \r\n        &lt;K,V&gt; Map&lt;K,V&gt; toMap( Pair&lt;K,V&gt;... pairs ) {\r\n            return Arrays.stream(pairs).collect(Collectors.toMap(p-&gt;p.k, p-&gt;p.v));\r\n        }\r\n        \r\n        public static void main(String[] args) {\r\n            // Usage\r\n            Map&lt;String,Integer&gt; sti = toMap( p(&quot;A&quot;,1), p(&quot;B&quot;,2) );\r\n            Map&lt;Integer,Boolean&gt; itb = toMap( p(1,true), p(42,false) );\r\n        }\r\n    }\r\n","title":"How to convert Array to HashMap using Java 8 Stream","body":"<p>Getting exactly what you want will probably not work for maps whose key type differs from their value type. This is because Java's variable arity declaration (the <code>Object... entries</code> part) supports only one type.</p>\n\n<p>Some options come to mind:</p>\n\n<ol>\n<li><p>You could do the checks dynamically and throw an illegal argument exception if the values don't match. But you'll lose the compiler type-checking.</p></li>\n<li><p>You could define a <code>Pair</code> class, and play a bit with static import to get almost what you want:</p></li>\n</ol>\n\n<p>e.g.: </p>\n\n<pre><code>class Pair&lt;K,V&gt; {\n    final K k;\n    final V v;\n    Pair( K ak, V av) {\n        k=ak;\n        v=av;\n    }\n    static &lt;A,B&gt; Pair&lt;A,B&gt; p(A a, B b) {\n        return new Pair(a,b);\n    }\n}\n\npublic class JavaTest8 {\n\n    &lt;K,V&gt; Map&lt;K,V&gt; toMap( Pair&lt;K,V&gt;... pairs ) {\n        return Arrays.stream(pairs).collect(Collectors.toMap(p-&gt;p.k, p-&gt;p.v));\n    }\n\n    public static void main(String[] args) {\n        // Usage\n        Map&lt;String,Integer&gt; sti = toMap( p(\"A\",1), p(\"B\",2) );\n        Map&lt;Integer,Boolean&gt; itb = toMap( p(1,true), p(42,false) );\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3619169,"reputation":9458,"user_id":3018377,"accept_rate":64,"display_name":"LHA"},"score":0,"creation_date":1485872384,"post_id":41946744,"comment_id":71098431,"body_markdown":"Thank you. I still prefer passing keys, values instead of Map.Entry.","body":"Thank you. I still prefer passing keys, values instead of Map.Entry."}],"tags":[],"owner":{"account_id":1622089,"reputation":17709,"user_id":1498427,"accept_rate":89,"display_name":"catch23"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1485816605,"creation_date":1485816262,"answer_id":41946744,"question_id":41946327,"body_markdown":"You can use something like map literals.  \r\nFor achieving this you can use a factory method:\r\n\r\n    // Creates a map from a list of entries\r\n    @SafeVarargs\r\n    public static &lt;K, V&gt; Map&lt;K, V&gt; mapOf(Map.Entry&lt;K, V&gt;... entries) {\r\n        LinkedHashMap&lt;K, V&gt; map = new LinkedHashMap&lt;&gt;();\r\n        for (Map.Entry&lt;K, V&gt; entry : entries) {\r\n            map.put(entry.getKey(), entry.getValue());\r\n        }\r\n        return map;\r\n    }\r\n    \r\n    // Creates a map entry\r\n    public static &lt;K, V&gt; Map.Entry&lt;K, V&gt; entry(K key, V value) {\r\n        return new AbstractMap.SimpleEntry&lt;&gt;(key, value);\r\n    }\r\n\r\nFinally, you can do something like following:\r\n\r\n    public static void main(String[] args) {\r\n        Map&lt;String, Integer&gt; map = mapOf(entry(&quot;a&quot;, 1), entry(&quot;b&quot;, 2), entry(&quot;c&quot;, 3));\r\n        System.out.println(map);\r\n    }\r\n\r\n**Output:**\r\n\r\n&gt;{a=1, b=2, c=3}\r\n\r\nI hope that this gives to you the right way.","title":"How to convert Array to HashMap using Java 8 Stream","body":"<p>You can use something like map literals.<br>\nFor achieving this you can use a factory method:</p>\n\n<pre><code>// Creates a map from a list of entries\n@SafeVarargs\npublic static &lt;K, V&gt; Map&lt;K, V&gt; mapOf(Map.Entry&lt;K, V&gt;... entries) {\n    LinkedHashMap&lt;K, V&gt; map = new LinkedHashMap&lt;&gt;();\n    for (Map.Entry&lt;K, V&gt; entry : entries) {\n        map.put(entry.getKey(), entry.getValue());\n    }\n    return map;\n}\n\n// Creates a map entry\npublic static &lt;K, V&gt; Map.Entry&lt;K, V&gt; entry(K key, V value) {\n    return new AbstractMap.SimpleEntry&lt;&gt;(key, value);\n}\n</code></pre>\n\n<p>Finally, you can do something like following:</p>\n\n<pre><code>public static void main(String[] args) {\n    Map&lt;String, Integer&gt; map = mapOf(entry(\"a\", 1), entry(\"b\", 2), entry(\"c\", 3));\n    System.out.println(map);\n}\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<blockquote>\n  <p>{a=1, b=2, c=3}</p>\n</blockquote>\n\n<p>I hope that this gives to you the right way.</p>\n"},{"tags":[],"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"comment_count":0,"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1485862424,"creation_date":1485862122,"answer_id":41956412,"question_id":41946327,"body_markdown":"You may use\r\n\r\n    public static &lt;K, V&gt; Map&lt;K, V&gt; toMap(Object... entries) {\r\n        if(entries.length % 2 == 1)\r\n            throw new IllegalArgumentException(&quot;Invalid entries&quot;);\r\n        return (Map&lt;K, V&gt;)IntStream.range(0, entries.length/2).map(i -&gt; i*2)\r\n            .collect(HashMap::new, (m,i)-&gt;m.put(entries[i], entries[i+1]), Map::putAll);\r\n    }\r\nbut it will give you a (founded) *unchecked* warning. Your method can’t hold the promise to return a correctly typed `Map&lt;K, V&gt;` for an array of arbitrary objects and, even worse, it will not fail with an exception, but silently return an inconsistent map if you pass in objects of the wrong type.\r\n\r\nA cleaner, commonly used, solution is\r\n\r\n    public static &lt;K, V&gt; Map&lt;K, V&gt; toMap(\r\n                                   Class&lt;K&gt; keyType, Class&lt;V&gt; valueType, Object... entries) {\r\n        if(entries.length % 2 == 1)\r\n            throw new IllegalArgumentException(&quot;Invalid entries&quot;);\r\n        return IntStream.range(0, entries.length/2).map(i -&gt; i*2)\r\n            .collect(HashMap::new,\r\n                     (m,i)-&gt;m.put(keyType.cast(entries[i]), valueType.cast(entries[i+1])),\r\n                     Map::putAll);\r\n    }\r\nThis can be compiled without a warning, as the correctness will be checked at runtime. The calling code has to be adapted:\r\n\r\n    Map&lt;String, Integer&gt; map1 = toMap(String.class, Integer.class, &quot;k1&quot;, 1, &quot;k2&quot;, 2);\r\n    Map&lt;String, String&gt; map2 = toMap(\r\n                               String.class, String.class, &quot;k1&quot;, &quot;v1&quot;, &quot;k2&quot;, &quot;v2&quot;, &quot;k3&quot;, &quot;v3&quot;);\r\n\r\nBesides the need to specify the actual types as class literals, it has the disadvantage of not supporting generic key or value types (as they can’t be expressed as `Class`) and still having no compile-time safety, only a runtime check.\r\n\r\n---\r\n\r\nIt’s worth [looking at Java&#160;9](http://download.java.net/java/jdk9/docs/api/?java/util/Map.html). There, you will be able to do:\r\n\r\n    Map&lt;String, Integer&gt; map1 = Map.of(&quot;k1&quot;, 1, &quot;k2&quot;, 2);\r\n    Map&lt;String, String&gt;  map2 = Map.of(&quot;k1&quot;, &quot;v1&quot;, &quot;k2&quot;, &quot;v2&quot;, &quot;k3&quot;, &quot;v3&quot;);\r\n\r\nThis will create an *immutable* map of an unspecified type, rather than a `HashMap`, but the interesting point is the API.\r\n\r\nThere is a method `&lt;K,V&gt; Map.Entry&lt;K,V&gt;\tentry(K k, V v)` which can be combined with  \r\n`&lt;K,V&gt; Map&lt;K,V&gt;\tofEntries(Map.Entry&lt;? extends K,? extends V&gt;... entries)` to create a map of a variable length (varargs are still limited to 255 parameters, though).\r\n\r\nYou can implement a similar thing:\r\n\r\n    public static &lt;K,V&gt; Map.Entry&lt;K,V&gt; entry(K k, V v) {\r\n        return new AbstractMap.SimpleImmutableEntry&lt;&gt;(k, v);\r\n    }\r\n    public static &lt;K,V&gt; Map&lt;K,V&gt; ofEntries(Map.Entry&lt;? extends K,? extends V&gt;... entries) {\r\n        return Arrays.stream(entries)\r\n            .collect(Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue));\r\n    }\r\nThe convenience method(s) `of` are implemented the only way, this can be done with type safety: as overloaded methods with different numbers of arguments, like\r\n\r\n    public static &lt;K,V&gt; Map&lt;K,V&gt; of() {\r\n        return new HashMap&lt;&gt;();// or Collections.emptyMap() to create immutable maps\r\n    }\r\n    static &lt;K,V&gt; Map&lt;K,V&gt; of(K k1, V v1) {\r\n        return ofEntries(entry(k1, v1));\r\n    }\r\n    static &lt;K,V&gt; Map&lt;K,V&gt; of(K k1, V v1, K k2, V v2) {\r\n        return ofEntries(entry(k1, v1), entry(k2, v2));\r\n    }\r\n    static &lt;K,V&gt; Map&lt;K,V&gt; of(K k1, V v1, K k2, V v2, K k3, V v3) {\r\n        return ofEntries(entry(k1, v1), entry(k2, v2), entry(k3, v3));\r\n    }\r\n    static &lt;K,V&gt; Map&lt;K,V&gt; of(K k1, V v1, K k2, V v2, K k3, V v3, K k4, V v4) {\r\n        return ofEntries(entry(k1, v1), entry(k2, v2), entry(k3, v3), entry(k4, v4));\r\n    }\t\r\n    static &lt;K,V&gt; Map&lt;K,V&gt; of(K k1, V v1, K k2, V v2, K k3, V v3, K k4, V v4, K k5, V v5) {\r\n        return ofEntries(entry(k1, v1), entry(k2, v2), entry(k3, v3), entry(k4, v4));\r\n    }\t\r\n(Java&#160;9 makes the cut at ten mappings, if you have more, you have to use the `ofEntries(entry(k1, v1), …)` variant).\r\n\r\nIf you follow this pattern, you should keep your `toMap` name or use just `map`, rather than calling at “`of`”, as you are not writing the `Map` interface.\r\n\r\nThese overloads might not look very elegant, but they solve all problems. You can write the code just as in your question, without specifying `Class` objects, but gain compile-time type safety and even rejection of attempts to call it with an odd number of arguments.\r\n\r\nYou have to make a cut at a certain number of parameters, but, as already noted, even varargs do not support unlimited parameters. And the `ofEntries(entry(…), …)` form isn’t so bad for larger maps.\r\n\r\n---\r\n\r\nThe collector `Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue)` returns an unspecified map type, which might even be immutable (though it’s a `HashMap`in the current version). If you want to have a guaranty that a `HashMap` instance is returned, you have to use `Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue, (v1,v2)-&gt;{throw new IllegalArgumentException(&quot;duplicate key&quot;);}, HashMap::new)` instead.","title":"How to convert Array to HashMap using Java 8 Stream","body":"<p>You may use</p>\n\n<pre><code>public static &lt;K, V&gt; Map&lt;K, V&gt; toMap(Object... entries) {\n    if(entries.length % 2 == 1)\n        throw new IllegalArgumentException(\"Invalid entries\");\n    return (Map&lt;K, V&gt;)IntStream.range(0, entries.length/2).map(i -&gt; i*2)\n        .collect(HashMap::new, (m,i)-&gt;m.put(entries[i], entries[i+1]), Map::putAll);\n}\n</code></pre>\n\n<p>but it will give you a (founded) <em>unchecked</em> warning. Your method can’t hold the promise to return a correctly typed <code>Map&lt;K, V&gt;</code> for an array of arbitrary objects and, even worse, it will not fail with an exception, but silently return an inconsistent map if you pass in objects of the wrong type.</p>\n\n<p>A cleaner, commonly used, solution is</p>\n\n<pre><code>public static &lt;K, V&gt; Map&lt;K, V&gt; toMap(\n                               Class&lt;K&gt; keyType, Class&lt;V&gt; valueType, Object... entries) {\n    if(entries.length % 2 == 1)\n        throw new IllegalArgumentException(\"Invalid entries\");\n    return IntStream.range(0, entries.length/2).map(i -&gt; i*2)\n        .collect(HashMap::new,\n                 (m,i)-&gt;m.put(keyType.cast(entries[i]), valueType.cast(entries[i+1])),\n                 Map::putAll);\n}\n</code></pre>\n\n<p>This can be compiled without a warning, as the correctness will be checked at runtime. The calling code has to be adapted:</p>\n\n<pre><code>Map&lt;String, Integer&gt; map1 = toMap(String.class, Integer.class, \"k1\", 1, \"k2\", 2);\nMap&lt;String, String&gt; map2 = toMap(\n                           String.class, String.class, \"k1\", \"v1\", \"k2\", \"v2\", \"k3\", \"v3\");\n</code></pre>\n\n<p>Besides the need to specify the actual types as class literals, it has the disadvantage of not supporting generic key or value types (as they can’t be expressed as <code>Class</code>) and still having no compile-time safety, only a runtime check.</p>\n\n<hr>\n\n<p>It’s worth <a href=\"http://download.java.net/java/jdk9/docs/api/?java/util/Map.html\" rel=\"noreferrer\">looking at Java 9</a>. There, you will be able to do:</p>\n\n<pre><code>Map&lt;String, Integer&gt; map1 = Map.of(\"k1\", 1, \"k2\", 2);\nMap&lt;String, String&gt;  map2 = Map.of(\"k1\", \"v1\", \"k2\", \"v2\", \"k3\", \"v3\");\n</code></pre>\n\n<p>This will create an <em>immutable</em> map of an unspecified type, rather than a <code>HashMap</code>, but the interesting point is the API.</p>\n\n<p>There is a method <code>&lt;K,V&gt; Map.Entry&lt;K,V&gt; entry(K k, V v)</code> which can be combined with<br>\n<code>&lt;K,V&gt; Map&lt;K,V&gt; ofEntries(Map.Entry&lt;? extends K,? extends V&gt;... entries)</code> to create a map of a variable length (varargs are still limited to 255 parameters, though).</p>\n\n<p>You can implement a similar thing:</p>\n\n<pre><code>public static &lt;K,V&gt; Map.Entry&lt;K,V&gt; entry(K k, V v) {\n    return new AbstractMap.SimpleImmutableEntry&lt;&gt;(k, v);\n}\npublic static &lt;K,V&gt; Map&lt;K,V&gt; ofEntries(Map.Entry&lt;? extends K,? extends V&gt;... entries) {\n    return Arrays.stream(entries)\n        .collect(Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue));\n}\n</code></pre>\n\n<p>The convenience method(s) <code>of</code> are implemented the only way, this can be done with type safety: as overloaded methods with different numbers of arguments, like</p>\n\n<pre><code>public static &lt;K,V&gt; Map&lt;K,V&gt; of() {\n    return new HashMap&lt;&gt;();// or Collections.emptyMap() to create immutable maps\n}\nstatic &lt;K,V&gt; Map&lt;K,V&gt; of(K k1, V v1) {\n    return ofEntries(entry(k1, v1));\n}\nstatic &lt;K,V&gt; Map&lt;K,V&gt; of(K k1, V v1, K k2, V v2) {\n    return ofEntries(entry(k1, v1), entry(k2, v2));\n}\nstatic &lt;K,V&gt; Map&lt;K,V&gt; of(K k1, V v1, K k2, V v2, K k3, V v3) {\n    return ofEntries(entry(k1, v1), entry(k2, v2), entry(k3, v3));\n}\nstatic &lt;K,V&gt; Map&lt;K,V&gt; of(K k1, V v1, K k2, V v2, K k3, V v3, K k4, V v4) {\n    return ofEntries(entry(k1, v1), entry(k2, v2), entry(k3, v3), entry(k4, v4));\n}   \nstatic &lt;K,V&gt; Map&lt;K,V&gt; of(K k1, V v1, K k2, V v2, K k3, V v3, K k4, V v4, K k5, V v5) {\n    return ofEntries(entry(k1, v1), entry(k2, v2), entry(k3, v3), entry(k4, v4));\n}   \n</code></pre>\n\n<p>(Java 9 makes the cut at ten mappings, if you have more, you have to use the <code>ofEntries(entry(k1, v1), …)</code> variant).</p>\n\n<p>If you follow this pattern, you should keep your <code>toMap</code> name or use just <code>map</code>, rather than calling at “<code>of</code>”, as you are not writing the <code>Map</code> interface.</p>\n\n<p>These overloads might not look very elegant, but they solve all problems. You can write the code just as in your question, without specifying <code>Class</code> objects, but gain compile-time type safety and even rejection of attempts to call it with an odd number of arguments.</p>\n\n<p>You have to make a cut at a certain number of parameters, but, as already noted, even varargs do not support unlimited parameters. And the <code>ofEntries(entry(…), …)</code> form isn’t so bad for larger maps.</p>\n\n<hr>\n\n<p>The collector <code>Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue)</code> returns an unspecified map type, which might even be immutable (though it’s a <code>HashMap</code>in the current version). If you want to have a guaranty that a <code>HashMap</code> instance is returned, you have to use <code>Collectors.toMap(Map.Entry::getKey, Map.Entry::getValue, (v1,v2)-&gt;{throw new IllegalArgumentException(\"duplicate key\");}, HashMap::new)</code> instead.</p>\n"},{"tags":[],"owner":{"display_name":"user9159521"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1548199149,"creation_date":1548195181,"answer_id":54317238,"question_id":41946327,"body_markdown":"```\r\npublic static &lt;K, V, E&gt; Map&lt;K, V&gt; toMap(Function&lt;E, K&gt; toKey, Function&lt;E, V&gt; toValue, E[][] e){\r\n        \r\n        final Map&lt;K, V&gt; newMap = new HashMap&lt;&gt;();\r\n        \r\n        Arrays\r\n                .stream(e, 0, e.length - 1)\r\n                .forEach(s -&gt;\r\n                {\r\n                    if (s[0] != null || s[1] != null)\r\n                        newMap.put(toKey.apply(s[0]), toValue.apply(s[1]));\r\n                }\r\n                );\r\n        \r\n        return newMap;\r\n\r\n}\r\n\r\n\r\n\r\n\r\npublic static void main(String[] args) {\r\n\r\n        Object[][] objects = new Object[10][2];\r\n        objects[0][0] =&quot;Ahmet&quot;;\r\n        objects[0][1] =28;\r\n        objects[1][0] =&quot;Mehmet&quot;;\r\n        objects[1][1] =18;\r\n        objects[2][0] =&quot;Kemal&quot;;\r\n        objects[2][1] =55;\r\n\r\nMap&lt;String, Integer&gt; newMap = toMap((Object::toString), (Object v) -&gt; Integer.parseInt(v.toString()), objects);\r\n        \r\nSystem.out.println(newMap.get(&quot;Ahmet&quot;) + &quot; &quot; + newMap.get(&quot;Kemal&quot;));\r\n\r\n\r\n}\r\n```","title":"How to convert Array to HashMap using Java 8 Stream","body":"<pre><code>public static &lt;K, V, E&gt; Map&lt;K, V&gt; toMap(Function&lt;E, K&gt; toKey, Function&lt;E, V&gt; toValue, E[][] e){\n\n        final Map&lt;K, V&gt; newMap = new HashMap&lt;&gt;();\n\n        Arrays\n                .stream(e, 0, e.length - 1)\n                .forEach(s -&gt;\n                {\n                    if (s[0] != null || s[1] != null)\n                        newMap.put(toKey.apply(s[0]), toValue.apply(s[1]));\n                }\n                );\n\n        return newMap;\n\n}\n\n\n\n\npublic static void main(String[] args) {\n\n        Object[][] objects = new Object[10][2];\n        objects[0][0] =\"Ahmet\";\n        objects[0][1] =28;\n        objects[1][0] =\"Mehmet\";\n        objects[1][1] =18;\n        objects[2][0] =\"Kemal\";\n        objects[2][1] =55;\n\nMap&lt;String, Integer&gt; newMap = toMap((Object::toString), (Object v) -&gt; Integer.parseInt(v.toString()), objects);\n\nSystem.out.println(newMap.get(\"Ahmet\") + \" \" + newMap.get(\"Kemal\"));\n\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5644474,"reputation":451,"user_id":4467091,"display_name":"Oleg Maksymuk"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694031541,"creation_date":1694031541,"answer_id":77055062,"question_id":41946327,"body_markdown":"I solved similar problem with listIterator\r\nargs: [-arg1 val1 -arg2 val2 -arg3 -arg4 val4]\r\n\r\n```\r\nMap&lt;String, String&gt; argsMap = new HashMap&lt;&gt;();\r\n        ListIterator&lt;String&gt; listIterator = Arrays.stream(args).toList().listIterator();\r\n        while(listIterator.hasNext()) {\r\n            String current = listIterator.next();;\r\n            if (current.startsWith(&quot;-&quot;)) {\r\n                if (listIterator.hasNext()) {\r\n                    String next = listIterator.next();\r\n                    if (!next.startsWith(&quot;-&quot;)) {\r\n                        argsMap.put(current, next);\r\n                    } else {\r\n                        argsMap.put(current, &quot;&quot;);\r\n                        listIterator.previous();\r\n                    }\r\n                    \r\n                }\r\n            }\r\n        }\r\n```","title":"How to convert Array to HashMap using Java 8 Stream","body":"<p>I solved similar problem with listIterator\nargs: [-arg1 val1 -arg2 val2 -arg3 -arg4 val4]</p>\n<pre><code>Map&lt;String, String&gt; argsMap = new HashMap&lt;&gt;();\n        ListIterator&lt;String&gt; listIterator = Arrays.stream(args).toList().listIterator();\n        while(listIterator.hasNext()) {\n            String current = listIterator.next();;\n            if (current.startsWith(&quot;-&quot;)) {\n                if (listIterator.hasNext()) {\n                    String next = listIterator.next();\n                    if (!next.startsWith(&quot;-&quot;)) {\n                        argsMap.put(current, next);\n                    } else {\n                        argsMap.put(current, &quot;&quot;);\n                        listIterator.previous();\n                    }\n                    \n                }\n            }\n        }\n</code></pre>\n"}],"owner":{"account_id":3619169,"reputation":9458,"user_id":3018377,"accept_rate":64,"display_name":"LHA"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28189,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":41956412,"answer_count":6,"score":13,"last_activity_date":1694031541,"creation_date":1485814360,"question_id":41946327,"body_markdown":"I am writing a function to convert array to Map using Java 8 Stream.\r\n\r\nHere is what I wanted\r\n\r\n\tpublic static &lt;K, V&gt; Map&lt;K, V&gt; toMap(Object... entries) {\r\n        // Requirements:\r\n        // entries must be K1, V1, K2, V2, .... ( even length )\r\n        if (entries.length % 2 == 1) {\r\n            throw new IllegalArgumentException(&quot;Invalid entries&quot;);\r\n        }\r\n\r\n        // TODO\r\n        Arrays.stream(entries).????\r\n\t}\r\n\r\nValid usages\r\n\r\n    Map&lt;String, Integer&gt; map1 = toMap(&quot;k1&quot;, 1, &quot;k2&quot;, 2);\r\n\r\n    Map&lt;String, String&gt; map2 = toMap(&quot;k1&quot;, &quot;v1&quot;, &quot;k2&quot;, &quot;v2&quot;, &quot;k3&quot;, &quot;v3&quot;);\r\n\r\nInvalid usages\r\n\r\n    Map&lt;String, Integer&gt; map1 = toMap(&quot;k1&quot;, 1, &quot;k2&quot;, 2, &quot;k3&quot;);\r\n\r\nAny helps?\r\n\r\nThanks!\r\n\r\n","title":"How to convert Array to HashMap using Java 8 Stream","body":"<p>I am writing a function to convert array to Map using Java 8 Stream.</p>\n\n<p>Here is what I wanted</p>\n\n<pre><code>public static &lt;K, V&gt; Map&lt;K, V&gt; toMap(Object... entries) {\n    // Requirements:\n    // entries must be K1, V1, K2, V2, .... ( even length )\n    if (entries.length % 2 == 1) {\n        throw new IllegalArgumentException(\"Invalid entries\");\n    }\n\n    // TODO\n    Arrays.stream(entries).????\n}\n</code></pre>\n\n<p>Valid usages</p>\n\n<pre><code>Map&lt;String, Integer&gt; map1 = toMap(\"k1\", 1, \"k2\", 2);\n\nMap&lt;String, String&gt; map2 = toMap(\"k1\", \"v1\", \"k2\", \"v2\", \"k3\", \"v3\");\n</code></pre>\n\n<p>Invalid usages</p>\n\n<pre><code>Map&lt;String, Integer&gt; map1 = toMap(\"k1\", 1, \"k2\", 2, \"k3\");\n</code></pre>\n\n<p>Any helps?</p>\n\n<p>Thanks!</p>\n"},{"tags":["java","audio","wav","javax.sound.sampled"],"comments":[{"owner":{"account_id":12157861,"reputation":1714,"user_id":8876321,"display_name":"fdcpp"},"score":0,"creation_date":1694089980,"post_id":77055054,"comment_id":135847232,"body_markdown":"My recommendation would be to start by generating some audio, maybe a test tone of 1000Hz, encoding it and then decoding it. There is definitely something intelligible in the test audio, but something seems off with the values.","body":"My recommendation would be to start by generating some audio, maybe a test tone of 1000Hz, encoding it and then decoding it. There is definitely something intelligible in the test audio, but something seems off with the values."}],"owner":{"account_id":22112469,"reputation":74,"user_id":16367144,"display_name":"SquidXTV"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694031424,"creation_date":1694031424,"question_id":77055054,"body_markdown":"I am trying to store a converted audio to a wave file and the file is not working correctly as it is not playing any sound and seems corrupted.\r\n\r\nI first read a `base64.txt` as an `ulaw` audio and then convert it to `pcm` format afterward. The conversion seems fine as playing the audio works, but the writing to file is failing somehow. I tried some debugging and found out that the bytes written are way less than the actual audio stream contains.\r\n\r\nThis is the calculation I found in `WaveFileWriter#write` -\\&gt; `getAudioFileFormat` :\r\n\r\n```\r\nfileSize = (int) stream.getFrameLength() * streamFormat.getFrameSize() + WaveFileFormat.getHeaderSize(waveType);\r\n```\r\n\r\nthe `getFrameLength` is `659` and `getFrameSize` is `2` (see images)\r\n\r\n[![enter image description here](https://i.stack.imgur.com/AGg5t.png)](https://i.stack.imgur.com/AGg5t.png)\r\n\r\n[![enter image description here](https://i.stack.imgur.com/mGkAL.png)](https://i.stack.imgur.com/mGkAL.png)\r\n\r\nwhich makes sense if you look at the code. Do I maybe have a wrong frameSize set in the pcmFormat? I tried others like `160` as well but all those gave me `Unsupported conversion` .\r\n\r\nI am guessing that the problem is that the calculated file size is way smaller than the actual size of the stream and thus its only writing the data till that calculated file size. These are the outputs from print lines:\r\n\r\n```\r\nAvailable: 116480\r\n```\r\n\r\n```\r\nActually written: 1500\r\n```\r\n\r\nThis is the main method:\r\n\r\n```java\r\n    public static void main(String[] args) throws Exception {\r\n        Path base64 = Path.of(Main.class.getResource(&quot;/base64.txt&quot;).toURI());\r\n        byte[] decodedAudioBytes = Base64.getDecoder().decode(Files.readAllBytes(base64));\r\n\r\n        ByteArrayInputStream inputStream = new ByteArrayInputStream(decodedAudioBytes);\r\n        AudioFormat audioFormat = new AudioFormat(\r\n                AudioFormat.Encoding.ULAW,  // Audio format details here\r\n                8000,\r\n                8,\r\n                1,\r\n                160,\r\n                50,\r\n                false\r\n        );\r\n        AudioInputStream ulawAudioInputStream = new AudioInputStream(inputStream, audioFormat, decodedAudioBytes.length / audioFormat.getFrameSize());\r\n        AudioFormat ulawFormat = ulawAudioInputStream.getFormat();\r\n        AudioFormat pcmFormat = new AudioFormat(\r\n                AudioFormat.Encoding.PCM_SIGNED,\r\n                ulawFormat.getSampleRate(),\r\n                16, // 16-bit sample size\r\n                ulawFormat.getChannels(),\r\n                ulawFormat.getChannels() * 2, // Frame size\r\n                ulawFormat.getSampleRate(),\r\n                false // Little endian\r\n        );\r\n\r\n        try (inputStream; ulawAudioInputStream; AudioInputStream pcmAudioInputStream = AudioSystem.getAudioInputStream(pcmFormat, ulawAudioInputStream)) {\r\n\r\n//        playAudio(pcmAudioInputStream, pcmAudioInputStream.getFormat());\r\n\r\n            System.out.println(&quot;Available: &quot; + pcmAudioInputStream.available());\r\n            System.out.println(&quot;Actually written: &quot; + AudioSystem.write(pcmAudioInputStream, AudioFileFormat.Type.WAVE, Files.newOutputStream(Path.of(&quot;D://test.wav&quot;), StandardOpenOption.CREATE)));\r\n        }\r\n    }\r\n\r\n    private static void playAudio(AudioInputStream audio, AudioFormat format) throws Exception {\r\n        DataLine.Info info = new DataLine.Info(SourceDataLine.class, format);\r\n        SourceDataLine line = (SourceDataLine) AudioSystem.getLine(info);\r\n        line.open(format);\r\n        line.start();\r\n        byte[] buffer = new byte[4096];\r\n        int bytesRead;\r\n        while ((bytesRead = audio.read(buffer)) != -1) {\r\n            line.write(buffer, 0, bytesRead);\r\n        }\r\n    }\r\n```\r\n\r\nwith this base64.txt (be careful its kinda loud and just an example audio):\r\n\r\nhttps://gist.github.com/SquidXTV/4a696ef4d714cf0043727ae4c141e8f3\r\n\r\nthanks for your help","title":"store ulaw to pcm converted sound to a wave file","body":"<p>I am trying to store a converted audio to a wave file and the file is not working correctly as it is not playing any sound and seems corrupted.</p>\n<p>I first read a <code>base64.txt</code> as an <code>ulaw</code> audio and then convert it to <code>pcm</code> format afterward. The conversion seems fine as playing the audio works, but the writing to file is failing somehow. I tried some debugging and found out that the bytes written are way less than the actual audio stream contains.</p>\n<p>This is the calculation I found in <code>WaveFileWriter#write</code> -&gt; <code>getAudioFileFormat</code> :</p>\n<pre><code>fileSize = (int) stream.getFrameLength() * streamFormat.getFrameSize() + WaveFileFormat.getHeaderSize(waveType);\n</code></pre>\n<p>the <code>getFrameLength</code> is <code>659</code> and <code>getFrameSize</code> is <code>2</code> (see images)</p>\n<p><a href=\"https://i.stack.imgur.com/AGg5t.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AGg5t.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/mGkAL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mGkAL.png\" alt=\"enter image description here\" /></a></p>\n<p>which makes sense if you look at the code. Do I maybe have a wrong frameSize set in the pcmFormat? I tried others like <code>160</code> as well but all those gave me <code>Unsupported conversion</code> .</p>\n<p>I am guessing that the problem is that the calculated file size is way smaller than the actual size of the stream and thus its only writing the data till that calculated file size. These are the outputs from print lines:</p>\n<pre><code>Available: 116480\n</code></pre>\n<pre><code>Actually written: 1500\n</code></pre>\n<p>This is the main method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static void main(String[] args) throws Exception {\n        Path base64 = Path.of(Main.class.getResource(&quot;/base64.txt&quot;).toURI());\n        byte[] decodedAudioBytes = Base64.getDecoder().decode(Files.readAllBytes(base64));\n\n        ByteArrayInputStream inputStream = new ByteArrayInputStream(decodedAudioBytes);\n        AudioFormat audioFormat = new AudioFormat(\n                AudioFormat.Encoding.ULAW,  // Audio format details here\n                8000,\n                8,\n                1,\n                160,\n                50,\n                false\n        );\n        AudioInputStream ulawAudioInputStream = new AudioInputStream(inputStream, audioFormat, decodedAudioBytes.length / audioFormat.getFrameSize());\n        AudioFormat ulawFormat = ulawAudioInputStream.getFormat();\n        AudioFormat pcmFormat = new AudioFormat(\n                AudioFormat.Encoding.PCM_SIGNED,\n                ulawFormat.getSampleRate(),\n                16, // 16-bit sample size\n                ulawFormat.getChannels(),\n                ulawFormat.getChannels() * 2, // Frame size\n                ulawFormat.getSampleRate(),\n                false // Little endian\n        );\n\n        try (inputStream; ulawAudioInputStream; AudioInputStream pcmAudioInputStream = AudioSystem.getAudioInputStream(pcmFormat, ulawAudioInputStream)) {\n\n//        playAudio(pcmAudioInputStream, pcmAudioInputStream.getFormat());\n\n            System.out.println(&quot;Available: &quot; + pcmAudioInputStream.available());\n            System.out.println(&quot;Actually written: &quot; + AudioSystem.write(pcmAudioInputStream, AudioFileFormat.Type.WAVE, Files.newOutputStream(Path.of(&quot;D://test.wav&quot;), StandardOpenOption.CREATE)));\n        }\n    }\n\n    private static void playAudio(AudioInputStream audio, AudioFormat format) throws Exception {\n        DataLine.Info info = new DataLine.Info(SourceDataLine.class, format);\n        SourceDataLine line = (SourceDataLine) AudioSystem.getLine(info);\n        line.open(format);\n        line.start();\n        byte[] buffer = new byte[4096];\n        int bytesRead;\n        while ((bytesRead = audio.read(buffer)) != -1) {\n            line.write(buffer, 0, bytesRead);\n        }\n    }\n</code></pre>\n<p>with this base64.txt (be careful its kinda loud and just an example audio):</p>\n<p><a href=\"https://gist.github.com/SquidXTV/4a696ef4d714cf0043727ae4c141e8f3\" rel=\"nofollow noreferrer\">https://gist.github.com/SquidXTV/4a696ef4d714cf0043727ae4c141e8f3</a></p>\n<p>thanks for your help</p>\n"},{"tags":["java","hibernate"],"comments":[{"owner":{"account_id":1203915,"reputation":10209,"user_id":1174024,"accept_rate":85,"display_name":"Nicholas DiPiazza"},"score":0,"creation_date":1446135086,"post_id":33415331,"comment_id":54628129,"body_markdown":"We decided that this feature in hibernate is for when you never want to customize the timestamp like i am trying to do now.","body":"We decided that this feature in hibernate is for when you never want to customize the timestamp like i am trying to do now."},{"owner":{"account_id":2123818,"reputation":969,"user_id":1886510,"display_name":"darw"},"score":0,"creation_date":1610375848,"post_id":33415331,"comment_id":116105712,"body_markdown":"Never even in tests?","body":"Never even in tests?"}],"answers":[{"tags":[],"owner":{"account_id":1203915,"reputation":10209,"user_id":1174024,"accept_rate":85,"display_name":"Nicholas DiPiazza"},"comment_count":0,"down_vote_count":1,"up_vote_count":6,"is_accepted":true,"score":5,"last_activity_date":1694031368,"creation_date":1446135139,"answer_id":33419377,"question_id":33415331,"body_markdown":"i think the answer is - this feature in hibernate is not meant for when you want to customize the values. it is just meant for when you want strictly created/updated values during database saves.\r\n\r\ni need to make a new column. ","title":"Override the CreationTimestamp/UpdateTimestamp in hibernate?","body":"<p>i think the answer is - this feature in hibernate is not meant for when you want to customize the values. it is just meant for when you want strictly created/updated values during database saves.</p>\n<p>i need to make a new column.</p>\n"}],"owner":{"account_id":1203915,"reputation":10209,"user_id":1174024,"accept_rate":85,"display_name":"Nicholas DiPiazza"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2485,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":33419377,"answer_count":1,"score":10,"last_activity_date":1694031368,"creation_date":1446124627,"question_id":33415331,"body_markdown":"In Hibernate you can use\r\n\r\n    @CreationTimestamp\r\n\r\nand\r\n\r\n    @UpdateTimestamp\r\n\r\nTo automatically set date fields when saving entities.\r\n\r\nBut now I have one of those entities and I want to manually set the created/updated field myself. \r\n\r\nCan I manually set my own or will it over-ride me? \r\n","title":"Override the CreationTimestamp/UpdateTimestamp in hibernate?","body":"<p>In Hibernate you can use</p>\n\n<pre><code>@CreationTimestamp\n</code></pre>\n\n<p>and</p>\n\n<pre><code>@UpdateTimestamp\n</code></pre>\n\n<p>To automatically set date fields when saving entities.</p>\n\n<p>But now I have one of those entities and I want to manually set the created/updated field myself. </p>\n\n<p>Can I manually set my own or will it over-ride me? </p>\n"},{"tags":["java","validation","thymeleaf"],"comments":[{"owner":{"account_id":10408148,"reputation":1398,"user_id":7674438,"accept_rate":100,"display_name":"Lore"},"score":0,"creation_date":1693908638,"post_id":77043397,"comment_id":135818274,"body_markdown":"Why &quot;creat&quot; and not &quot;create&quot;?","body":"Why &quot;creat&quot; and not &quot;create&quot;?"},{"owner":{"account_id":29163172,"reputation":1,"user_id":22502623,"display_name":"Денис Шульженко"},"score":1,"creation_date":1693919410,"post_id":77043397,"comment_id":135820636,"body_markdown":"this does not affect the error in any way","body":"this does not affect the error in any way"},{"owner":{"account_id":29163172,"reputation":1,"user_id":22502623,"display_name":"Денис Шульженко"},"score":0,"creation_date":1693987532,"post_id":77043397,"comment_id":135830436,"body_markdown":"Comrades, I found it. You need to remove the @Validated annotation from the controller class","body":"Comrades, I found it. You need to remove the @Validated annotation from the controller class"},{"owner":{"account_id":10408148,"reputation":1398,"user_id":7674438,"accept_rate":100,"display_name":"Lore"},"score":0,"creation_date":1693989089,"post_id":77043397,"comment_id":135830746,"body_markdown":"you might want to write it as a response","body":"you might want to write it as a response"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1694039255,"post_id":77043397,"comment_id":135840535,"body_markdown":"(1) HTTP status 500 isn&#39;t intended to provide *any* information to the client. (2) As it *is* an error, there is *no* HTML for anything to be displayed in.","body":"(1) HTTP status 500 isn&#39;t intended to provide <i>any</i> information to the client. (2) As it <i>is</i> an error, there is <i>no</i> HTML for anything to be displayed in."}],"answers":[{"tags":[],"owner":{"account_id":29163172,"reputation":1,"user_id":22502623,"display_name":"Денис Шульженко"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694031282,"creation_date":1694031282,"answer_id":77055032,"question_id":77043397,"body_markdown":"Comrades, I found it. You need to remove the `@Validated` annotation from the controller class","title":"BindingResult errors are not displayed in HTML","body":"<p>Comrades, I found it. You need to remove the <code>@Validated</code> annotation from the controller class</p>\n"}],"owner":{"account_id":29163172,"reputation":1,"user_id":22502623,"display_name":"Денис Шульженко"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1694031282,"creation_date":1693906759,"question_id":77043397,"body_markdown":"After filling out the form and sending the POST request, I receive an error message on the page\r\n\r\n`type=Internal Server Error, status=500`\r\n\r\nAnd the console displays the following\r\n\r\n```\r\njakarta.validation.ConstraintViolationException: creatPost.post.heading: Заголовок не может быть пустым\r\n\tat org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:138) ~[spring-context-6.0.9.jar:6.0.9]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.9.jar:6.0.9]\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-6.0.9.jar:6.0.9]\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:702) ~[spring-aop-6.0.9.jar:6.0.9]\r\n```\r\n\r\nMy controller class\r\n\r\n```\r\n@Controller\r\n@Validated\r\n@RequiredArgsConstructor\r\npublic class PostController {\r\n    private final PostService postService;\r\n    @GetMapping(&quot;/&quot;)\r\n    public String posts(@RequestParam(name = &quot;heading&quot;, required = false) String heading, Model model) {\r\n        List&lt;Post&gt; posts = postService.listPosts(heading);\r\n        Map&lt;Long, String&gt; times = postService.timeFromPosts(posts);\r\n        model.addAttribute(&quot;posts&quot;, posts);\r\n        model.addAttribute(&quot;times&quot;, times);\r\n        return &quot;index&quot;;\r\n    }\r\n\r\n    @GetMapping(&quot;/post/creat&quot;)\r\n    public String pageCreatPost(Model model) {\r\n        model.addAttribute(&quot;post&quot;, new Post());\r\n        return &quot;add&quot;;\r\n    }\r\n\r\n    @PostMapping(&quot;/post/creat&quot;)\r\n    public String creatPost(@Valid @ModelAttribute(&quot;post&quot;) Post post,\r\n                            BindingResult bindingResult,\r\n                            @RequestParam(&quot;file&quot;) MultipartFile multipartFile) throws IOException {\r\n        if (bindingResult.hasErrors()) {\r\n            return &quot;add&quot;;\r\n        }\r\n        postService.savePost(multipartFile, post);\r\n        return &quot;redirect:/&quot;;\r\n    }\r\n\r\n    @PostMapping(&quot;/post/delete/{id}&quot;)\r\n    public String deletePost(@PathVariable Long id) {\r\n        postService.deletePost(id);\r\n        return &quot;redirect:/&quot;;\r\n    }\r\n\r\n    @GetMapping(&quot;/post/{id}&quot;)\r\n    public String postInfo(@PathVariable Long id, Model model) {\r\n        Post post = postService.getPostById(id);\r\n        String data = postService.timeFormatting(post.getDateTime());\r\n        List&lt;ImageDto&gt; imageDtos = postService.listImagesDtos(post);\r\n        model.addAttribute(&quot;post&quot;, post);\r\n        model.addAttribute(&quot;data&quot;, data);\r\n        model.addAttribute(&quot;images&quot;, imageDtos);\r\n        return &quot;post-info&quot;;\r\n    }\r\n}\r\n```\r\n\r\nEntity\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;posts&quot;)\r\n@Data\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\npublic class Post {\r\n    @Id\r\n    @Column(name = &quot;id&quot;)\r\n    @GeneratedValue(strategy = GenerationType.AUTO)\r\n    private Long id;\r\n\r\n    @Column(name = &quot;heading&quot;)\r\n    @NotEmpty(message = &quot;Заголовок не может быть пустым&quot;)\r\n    @Size(max = 50, message = &quot;Заголовок не должен превышать 50 символов&quot;)\r\n    private String heading;\r\n\r\n    @Column(name = &quot;description&quot;, columnDefinition = &quot;text&quot;)\r\n    @NotEmpty(message = &quot;Описание не может быть пустым&quot;)\r\n    private String description;\r\n\r\n    @Column(name = &quot;price&quot;)\r\n    @Min(value = 1, message = &quot;Цена должна быть больше 0&quot;)\r\n    private int price;\r\n\r\n    @Column(name = &quot;address&quot;)\r\n    @NotEmpty(message = &quot;Адрес не может быть пустым&quot;)\r\n    private String address;\r\n\r\n    @Column(name = &quot;phone_number&quot;)\r\n    @Pattern(regexp = &quot;^\\\\+?[0-9]*$&quot;, message = &quot;Номер телефона должен содержать только цифры и символ &#39;+&#39;&quot;)\r\n    private String phoneNumber;\r\n\r\n    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = &quot;post&quot;)\r\n    private List&lt;Image&gt; images = new ArrayList&lt;&gt;();\r\n\r\n    private LocalDateTime dateTime;\r\n\r\n    @PrePersist\r\n    private void init() {\r\n        dateTime = LocalDateTime.now();\r\n    }\r\n\r\n    public void addImageToPost(Image image) {\r\n        image.setPost(this);\r\n        images.add(image);\r\n    }\r\n}\r\n```\r\n\r\nView\r\n\r\n```\r\n&lt;div class=&quot;col-9&quot;&gt;\r\n    &lt;div class=&quot;form-outline mb-4&quot;&gt;\r\n        &lt;input type=&quot;text&quot; id=&quot;heading&quot; name=&quot;heading&quot; class=&quot;form-control&quot; th:field=&quot;*{post.heading}&quot; /&gt;\r\n        &lt;span class=&quot;error&quot; th:if=&quot;${#fields.hasErrors(&#39;heading&#39;)}&quot; th:errors=&quot;*{post.heading}&quot;&gt;&lt;/span&gt;\r\n    &lt;/div&gt;\r\n&lt;/div&gt;\r\n```\r\n\r\npom.xml\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;3.1.0&lt;/version&gt;\r\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    &lt;/parent&gt;\r\n    &lt;groupId&gt;ru.bulletin_board&lt;/groupId&gt;\r\n    &lt;artifactId&gt;bulletin_board&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    &lt;name&gt;bulletin board&lt;/name&gt;\r\n    &lt;description&gt;bulletin board&lt;/description&gt;\r\n    &lt;properties&gt;\r\n        &lt;java.version&gt;17&lt;/java.version&gt;\r\n    &lt;/properties&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n            &lt;optional&gt;true&lt;/optional&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;!--        &lt;dependency&gt;--&gt;\r\n&lt;!--            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;--&gt;\r\n&lt;!--            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;--&gt;\r\n&lt;!--        &lt;/dependency&gt;--&gt;\r\n\r\n&lt;!--        &lt;dependency&gt;--&gt;\r\n&lt;!--            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;--&gt;\r\n&lt;!--            &lt;artifactId&gt;spring-security-core&lt;/artifactId&gt;--&gt;\r\n&lt;!--        &lt;/dependency&gt;--&gt;\r\n\r\n&lt;!--        &lt;dependency&gt;--&gt;\r\n&lt;!--            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;--&gt;\r\n&lt;!--            &lt;artifactId&gt;spring-security-web&lt;/artifactId&gt;--&gt;\r\n&lt;!--        &lt;/dependency&gt;--&gt;\r\n\r\n&lt;!--        &lt;dependency&gt;--&gt;\r\n&lt;!--            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;--&gt;\r\n&lt;!--            &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;--&gt;\r\n&lt;!--            &lt;scope&gt;provided&lt;/scope&gt;--&gt;\r\n&lt;!--        &lt;/dependency&gt;--&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;excludes&gt;\r\n                        &lt;exclude&gt;\r\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                        &lt;/exclude&gt;\r\n                    &lt;/excludes&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nAfter sending a POST request, validation errors should be displayed in the view if validation is violated\r\n\r\nin most sources , such an implementation","title":"BindingResult errors are not displayed in HTML","body":"<p>After filling out the form and sending the POST request, I receive an error message on the page</p>\n<p><code>type=Internal Server Error, status=500</code></p>\n<p>And the console displays the following</p>\n<pre><code>jakarta.validation.ConstraintViolationException: creatPost.post.heading: Заголовок не может быть пустым\n    at org.springframework.validation.beanvalidation.MethodValidationInterceptor.invoke(MethodValidationInterceptor.java:138) ~[spring-context-6.0.9.jar:6.0.9]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.9.jar:6.0.9]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750) ~[spring-aop-6.0.9.jar:6.0.9]\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:702) ~[spring-aop-6.0.9.jar:6.0.9]\n</code></pre>\n<p>My controller class</p>\n<pre><code>@Controller\n@Validated\n@RequiredArgsConstructor\npublic class PostController {\n    private final PostService postService;\n    @GetMapping(&quot;/&quot;)\n    public String posts(@RequestParam(name = &quot;heading&quot;, required = false) String heading, Model model) {\n        List&lt;Post&gt; posts = postService.listPosts(heading);\n        Map&lt;Long, String&gt; times = postService.timeFromPosts(posts);\n        model.addAttribute(&quot;posts&quot;, posts);\n        model.addAttribute(&quot;times&quot;, times);\n        return &quot;index&quot;;\n    }\n\n    @GetMapping(&quot;/post/creat&quot;)\n    public String pageCreatPost(Model model) {\n        model.addAttribute(&quot;post&quot;, new Post());\n        return &quot;add&quot;;\n    }\n\n    @PostMapping(&quot;/post/creat&quot;)\n    public String creatPost(@Valid @ModelAttribute(&quot;post&quot;) Post post,\n                            BindingResult bindingResult,\n                            @RequestParam(&quot;file&quot;) MultipartFile multipartFile) throws IOException {\n        if (bindingResult.hasErrors()) {\n            return &quot;add&quot;;\n        }\n        postService.savePost(multipartFile, post);\n        return &quot;redirect:/&quot;;\n    }\n\n    @PostMapping(&quot;/post/delete/{id}&quot;)\n    public String deletePost(@PathVariable Long id) {\n        postService.deletePost(id);\n        return &quot;redirect:/&quot;;\n    }\n\n    @GetMapping(&quot;/post/{id}&quot;)\n    public String postInfo(@PathVariable Long id, Model model) {\n        Post post = postService.getPostById(id);\n        String data = postService.timeFormatting(post.getDateTime());\n        List&lt;ImageDto&gt; imageDtos = postService.listImagesDtos(post);\n        model.addAttribute(&quot;post&quot;, post);\n        model.addAttribute(&quot;data&quot;, data);\n        model.addAttribute(&quot;images&quot;, imageDtos);\n        return &quot;post-info&quot;;\n    }\n}\n</code></pre>\n<p>Entity</p>\n<pre><code>@Entity\n@Table(name = &quot;posts&quot;)\n@Data\n@AllArgsConstructor\n@NoArgsConstructor\npublic class Post {\n    @Id\n    @Column(name = &quot;id&quot;)\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Long id;\n\n    @Column(name = &quot;heading&quot;)\n    @NotEmpty(message = &quot;Заголовок не может быть пустым&quot;)\n    @Size(max = 50, message = &quot;Заголовок не должен превышать 50 символов&quot;)\n    private String heading;\n\n    @Column(name = &quot;description&quot;, columnDefinition = &quot;text&quot;)\n    @NotEmpty(message = &quot;Описание не может быть пустым&quot;)\n    private String description;\n\n    @Column(name = &quot;price&quot;)\n    @Min(value = 1, message = &quot;Цена должна быть больше 0&quot;)\n    private int price;\n\n    @Column(name = &quot;address&quot;)\n    @NotEmpty(message = &quot;Адрес не может быть пустым&quot;)\n    private String address;\n\n    @Column(name = &quot;phone_number&quot;)\n    @Pattern(regexp = &quot;^\\\\+?[0-9]*$&quot;, message = &quot;Номер телефона должен содержать только цифры и символ '+'&quot;)\n    private String phoneNumber;\n\n    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = &quot;post&quot;)\n    private List&lt;Image&gt; images = new ArrayList&lt;&gt;();\n\n    private LocalDateTime dateTime;\n\n    @PrePersist\n    private void init() {\n        dateTime = LocalDateTime.now();\n    }\n\n    public void addImageToPost(Image image) {\n        image.setPost(this);\n        images.add(image);\n    }\n}\n</code></pre>\n<p>View</p>\n<pre><code>&lt;div class=&quot;col-9&quot;&gt;\n    &lt;div class=&quot;form-outline mb-4&quot;&gt;\n        &lt;input type=&quot;text&quot; id=&quot;heading&quot; name=&quot;heading&quot; class=&quot;form-control&quot; th:field=&quot;*{post.heading}&quot; /&gt;\n        &lt;span class=&quot;error&quot; th:if=&quot;${#fields.hasErrors('heading')}&quot; th:errors=&quot;*{post.heading}&quot;&gt;&lt;/span&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n<p>pom.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.1.0&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;ru.bulletin_board&lt;/groupId&gt;\n    &lt;artifactId&gt;bulletin_board&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;bulletin board&lt;/name&gt;\n    &lt;description&gt;bulletin board&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;!--        &lt;dependency&gt;--&gt;\n&lt;!--            &lt;groupId&gt;org.hibernate&lt;/groupId&gt;--&gt;\n&lt;!--            &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;--&gt;\n&lt;!--        &lt;/dependency&gt;--&gt;\n\n&lt;!--        &lt;dependency&gt;--&gt;\n&lt;!--            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;--&gt;\n&lt;!--            &lt;artifactId&gt;spring-security-core&lt;/artifactId&gt;--&gt;\n&lt;!--        &lt;/dependency&gt;--&gt;\n\n&lt;!--        &lt;dependency&gt;--&gt;\n&lt;!--            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;--&gt;\n&lt;!--            &lt;artifactId&gt;spring-security-web&lt;/artifactId&gt;--&gt;\n&lt;!--        &lt;/dependency&gt;--&gt;\n\n&lt;!--        &lt;dependency&gt;--&gt;\n&lt;!--            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;--&gt;\n&lt;!--            &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;--&gt;\n&lt;!--            &lt;scope&gt;provided&lt;/scope&gt;--&gt;\n&lt;!--        &lt;/dependency&gt;--&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>After sending a POST request, validation errors should be displayed in the view if validation is violated</p>\n<p>in most sources , such an implementation</p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"comments":[{"owner":{"account_id":10483819,"reputation":1431,"user_id":7728038,"display_name":"Steven W. Klassen"},"score":1,"creation_date":1554322301,"post_id":55500788,"comment_id":97713299,"body_markdown":"First, I want to thank you for this answer - it does exactly what I was hoping it would do. To make it work in my environment (configured using gradle), I needed to add the line `runtime(&quot;org.slf4j:jul-to-slf4j&quot;)` to my dependancies list.","body":"First, I want to thank you for this answer - it does exactly what I was hoping it would do. To make it work in my environment (configured using gradle), I needed to add the line <code>runtime(&quot;org.slf4j:jul-to-slf4j&quot;)</code> to my dependancies list."},{"owner":{"account_id":10483819,"reputation":1431,"user_id":7728038,"display_name":"Steven W. Klassen"},"score":1,"creation_date":1554322376,"post_id":55500788,"comment_id":97713338,"body_markdown":"Unfortunately, for me at least, it didn&#39;t solve my actual problem. In digger a bit deeper it seems the library I&#39;m using isn&#39;t using java logging but is just manually writing to the standard output device. Annoying and I will probably log (pun intended) it to the author. But your answer did exactly what it was supposed to, so I&#39;m going to mark it as accepted.","body":"Unfortunately, for me at least, it didn&#39;t solve my actual problem. In digger a bit deeper it seems the library I&#39;m using isn&#39;t using java logging but is just manually writing to the standard output device. Annoying and I will probably log (pun intended) it to the author. But your answer did exactly what it was supposed to, so I&#39;m going to mark it as accepted."},{"owner":{"account_id":1971682,"reputation":2496,"user_id":1770433,"display_name":"mle"},"score":0,"creation_date":1554325617,"post_id":55500788,"comment_id":97714694,"body_markdown":"Yeah, just saw your new issue in Github. That is really a mess, just logging to the stdout. However it should not be a big deal for the maintainer to switch this to JUL or even better SLF4J. May be the jlibmodbus community accepts pull requests so you could contribute your preferred solution. :-)","body":"Yeah, just saw your new issue in Github. That is really a mess, just logging to the stdout. However it should not be a big deal for the maintainer to switch this to JUL or even better SLF4J. May be the jlibmodbus community accepts pull requests so you could contribute your preferred solution. :-)"},{"owner":{"account_id":10483819,"reputation":1431,"user_id":7728038,"display_name":"Steven W. Klassen"},"score":0,"creation_date":1554331236,"post_id":55500788,"comment_id":97716584,"body_markdown":"I suppose we are getting off topic here, but my preferred solution would actually be JUL over SLF4J, then relying on a bridge when used in Spring. My key reasoning is that I don&#39;t like having to add libraries I wouldn&#39;t otherwise care about in order to use one that I need. Not every application I write will necessarily be a Spring app.","body":"I suppose we are getting off topic here, but my preferred solution would actually be JUL over SLF4J, then relying on a bridge when used in Spring. My key reasoning is that I don&#39;t like having to add libraries I wouldn&#39;t otherwise care about in order to use one that I need. Not every application I write will necessarily be a Spring app."},{"owner":{"account_id":343146,"reputation":11083,"user_id":674669,"accept_rate":58,"display_name":"user674669"},"score":1,"creation_date":1693923126,"post_id":55500788,"comment_id":135821518,"body_markdown":"The first link mentioned in the answer does not work any more. https://github.com/spring-projects/spring-boot/blob/main/spring-boot-project/spring-boot-dependencies/build.gradle seems to work.","body":"The first link mentioned in the answer does not work any more. <a href=\"https://github.com/spring-projects/spring-boot/blob/main/spring-boot-project/spring-boot-dependencies/build.gradle\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-boot/blob/main/&hellip;</a> seems to work."},{"owner":{"account_id":1971682,"reputation":2496,"user_id":1770433,"display_name":"mle"},"score":0,"creation_date":1694030922,"post_id":55500788,"comment_id":135839472,"body_markdown":"Thanks @user674669, updated this one.","body":"Thanks @user674669, updated this one."}],"tags":[],"owner":{"account_id":1971682,"reputation":2496,"user_id":1770433,"display_name":"mle"},"comment_count":6,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1694030900,"creation_date":1554311846,"answer_id":55500788,"question_id":55496995,"body_markdown":"If I understand you correctly, you want to configure the logging of a lib which uses Java Util Logging.\r\n\r\nSpring Boot comes already with a [managed dependency](https://github.com/spring-projects/spring-boot/blob/d9af7cec141190fb32e20de6a64c2d3b03b644e4/spring-boot-project/spring-boot-dependencies/build.gradle#L1465) which helps you to fix your issue.\r\n\r\nPlease add or verify that you&#39;ve already added the JUL to SLF4J bridge:\r\n\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jul-to-slf4j&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nPlease check also, that you put your logger configurations in the [correct config file](https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-logging.html#boot-features-custom-log-configuration), especially referencing:\r\n\r\n* Logback – logback-spring.xml, …\r\n* Log4j2 – log4j2-spring.xml, …\r\n* JDK (Java Util Logging) – logging.properties","title":"can I configure Java logging to make use of Spring Boot logging?","body":"<p>If I understand you correctly, you want to configure the logging of a lib which uses Java Util Logging.</p>\n<p>Spring Boot comes already with a <a href=\"https://github.com/spring-projects/spring-boot/blob/d9af7cec141190fb32e20de6a64c2d3b03b644e4/spring-boot-project/spring-boot-dependencies/build.gradle#L1465\" rel=\"nofollow noreferrer\">managed dependency</a> which helps you to fix your issue.</p>\n<p>Please add or verify that you've already added the JUL to SLF4J bridge:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n    &lt;artifactId&gt;jul-to-slf4j&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Please check also, that you put your logger configurations in the <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-logging.html#boot-features-custom-log-configuration\" rel=\"nofollow noreferrer\">correct config file</a>, especially referencing:</p>\n<ul>\n<li>Logback – logback-spring.xml, …</li>\n<li>Log4j2 – log4j2-spring.xml, …</li>\n<li>JDK (Java Util Logging) – logging.properties</li>\n</ul>\n"}],"owner":{"account_id":10483819,"reputation":1431,"user_id":7728038,"display_name":"Steven W. Klassen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1092,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":55500788,"answer_count":1,"score":2,"last_activity_date":1694030900,"creation_date":1554300000,"question_id":55496995,"body_markdown":"My use case is as follows. I&#39;m developing a large spring based application and we are using spring boot logging throughout. However, for various reasons I need to use a third-party library that uses java.util.Logger in its internals. This causes the two separate loggers to both send their output to our console.\r\n\r\nI&#39;ve found many examples on how to configure spring boot logging to use java logging as its output, but I haven&#39;t been able to determine how to go the other way.\r\n\r\nThe library in question - JLibModbus - includes API access to set it&#39;s logging level or to turn it off, but I don&#39;t see any way to actually tell it to use a different logger. Presumably this should be possible. I&#39;m hoping that someone else has already done this.\r\n\r\n(Actually I&#39;m working in Kotlin, not Java, but any answer that works in one I should be able to convert to the other.)","title":"can I configure Java logging to make use of Spring Boot logging?","body":"<p>My use case is as follows. I'm developing a large spring based application and we are using spring boot logging throughout. However, for various reasons I need to use a third-party library that uses java.util.Logger in its internals. This causes the two separate loggers to both send their output to our console.</p>\n\n<p>I've found many examples on how to configure spring boot logging to use java logging as its output, but I haven't been able to determine how to go the other way.</p>\n\n<p>The library in question - JLibModbus - includes API access to set it's logging level or to turn it off, but I don't see any way to actually tell it to use a different logger. Presumably this should be possible. I'm hoping that someone else has already done this.</p>\n\n<p>(Actually I'm working in Kotlin, not Java, but any answer that works in one I should be able to convert to the other.)</p>\n"},{"tags":["java","solr","rhel"],"owner":{"account_id":8338251,"reputation":1,"user_id":22511619,"display_name":"asmox"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694030698,"creation_date":1694030698,"question_id":77054967,"body_markdown":"We recently upgraded several servers from RHEL 7.9 to RHEL 8.8 and are now attempting to perform clean installations of Solr 9.3 with OpenJDK 11. RHEL is running in FIPS mode with SELinux enabled but our particular Solr environment does not require any crypto, so we&#39;ve disabled FIPS and SSL within Solr by adding the following to /etc/default/solr.in.sh -\r\n\r\nSOLR_OPTS=&quot;$SOLR_OPTS -Dcom.redhat.fips=false&quot;\r\n\r\nSOLR_SSL_ENABLED=false\r\n\r\n--\r\n\r\nSolr itself starts normally but attempting to create a core errors out with this - \r\n\r\n&gt; ERROR: java.lang.IllegalStateException: /var/solr/NONE is not a valid keystore\r\n&gt; \r\n&gt; java.lang.RuntimeException: java.lang.IllegalStateException: /var/solr/NONE is not a valid keystore\r\n&gt; at org.apache.solr.client.solrj.impl.Http2SolrClient.createHttpClient(Http2SolrClient.java:290)\r\n&gt; at org.apache.solr.client.solrj.impl.Http2SolrClient.&lt;init&gt;(Http2SolrClient.java:180)\r\n&gt; at org.apache.solr.client.solrj.impl.Http2SolrClient$Builder.build(Http2SolrClient.java:1052)\r\n&gt; at org.apache.solr.cli.SolrCLI.getSolrClient(SolrCLI.java:426)\r\n&gt; at org.apache.solr.cli.CreateCoreTool.runImpl(CreateCoreTool.java:109)\r\n&gt; at org.apache.solr.cli.ToolBase.runTool(ToolBase.java:52)\r\n&gt; at org.apache.solr.cli.SolrCLI.main(SolrCLI.java:156)\r\n&gt; Caused by: java.lang.IllegalStateException: /var/solr/NONE is not a valid keystore\r\n&gt; at org.eclipse.jetty.util.security.CertificateUtils.getKeyStore(CertificateUtils.java:45)\r\n&gt; at org.eclipse.jetty.util.ssl.SslContextFactory.loadKeyStore(SslContextFactory.java:1121)\r\n&gt; at org.eclipse.jetty.util.ssl.SslContextFactory.load(SslContextFactory.java:291)\r\n&gt; at org.eclipse.jetty.util.ssl.SslContextFactory.doStart(SslContextFactory.java:213)\r\n&gt; at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:93)\r\n&gt; at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:171)\r\n&gt; at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:121)\r\n&gt; at org.eclipse.jetty.io.ClientConnector.doStart(ClientConnector.java:376)\r\n&gt; at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:93)\r\n&gt; at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:171)\r\n&gt; at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:121)\r\n&gt; at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:93)\r\n&gt; at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:171)\r\n&gt; at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:121)\r\n&gt; at org.eclipse.jetty.http2.client.http.HttpClientTransportOverHTTP2.doStart(HttpClientTransportOverHTTP2.java:100)\r\n&gt; at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:93)\r\n&gt; at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:171)\r\n&gt; at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:121)\r\n&gt; at org.eclipse.jetty.client.HttpClient.doStart(HttpClient.java:232)\r\n&gt; at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:93)\r\n&gt; at org.apache.solr.client.solrj.impl.Http2SolrClient.createHttpClient(Http2SolrClient.java:287)\r\n&gt; 6 more\r\n\r\n--\r\n\r\nWith SSL explicitly disabled, we would have expected all SSL-specific requirements to be ignored, but seems like they are not. The same process works as expected in our old environment with Solr 8.8. Are there other parameters or configuration files we&#39;ve missed which may be specific to Solr 9.x?\r\n\r\nTo clarify - Solr itself starts without issues and bypasses FIPS requirements as expected. It&#39;s only core creation which behaves this way.\r\n\r\nThanks for any insight.","title":"Solr 9.3 without SSL on RHEL 8.8 - cannot create core","body":"<p>We recently upgraded several servers from RHEL 7.9 to RHEL 8.8 and are now attempting to perform clean installations of Solr 9.3 with OpenJDK 11. RHEL is running in FIPS mode with SELinux enabled but our particular Solr environment does not require any crypto, so we've disabled FIPS and SSL within Solr by adding the following to /etc/default/solr.in.sh -</p>\n<p>SOLR_OPTS=&quot;$SOLR_OPTS -Dcom.redhat.fips=false&quot;</p>\n<p>SOLR_SSL_ENABLED=false</p>\n<p>--</p>\n<p>Solr itself starts normally but attempting to create a core errors out with this -</p>\n<blockquote>\n<p>ERROR: java.lang.IllegalStateException: /var/solr/NONE is not a valid keystore</p>\n<p>java.lang.RuntimeException: java.lang.IllegalStateException: /var/solr/NONE is not a valid keystore\nat org.apache.solr.client.solrj.impl.Http2SolrClient.createHttpClient(Http2SolrClient.java:290)\nat org.apache.solr.client.solrj.impl.Http2SolrClient.(Http2SolrClient.java:180)\nat org.apache.solr.client.solrj.impl.Http2SolrClient$Builder.build(Http2SolrClient.java:1052)\nat org.apache.solr.cli.SolrCLI.getSolrClient(SolrCLI.java:426)\nat org.apache.solr.cli.CreateCoreTool.runImpl(CreateCoreTool.java:109)\nat org.apache.solr.cli.ToolBase.runTool(ToolBase.java:52)\nat org.apache.solr.cli.SolrCLI.main(SolrCLI.java:156)\nCaused by: java.lang.IllegalStateException: /var/solr/NONE is not a valid keystore\nat org.eclipse.jetty.util.security.CertificateUtils.getKeyStore(CertificateUtils.java:45)\nat org.eclipse.jetty.util.ssl.SslContextFactory.loadKeyStore(SslContextFactory.java:1121)\nat org.eclipse.jetty.util.ssl.SslContextFactory.load(SslContextFactory.java:291)\nat org.eclipse.jetty.util.ssl.SslContextFactory.doStart(SslContextFactory.java:213)\nat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:93)\nat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:171)\nat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:121)\nat org.eclipse.jetty.io.ClientConnector.doStart(ClientConnector.java:376)\nat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:93)\nat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:171)\nat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:121)\nat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:93)\nat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:171)\nat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:121)\nat org.eclipse.jetty.http2.client.http.HttpClientTransportOverHTTP2.doStart(HttpClientTransportOverHTTP2.java:100)\nat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:93)\nat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:171)\nat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:121)\nat org.eclipse.jetty.client.HttpClient.doStart(HttpClient.java:232)\nat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:93)\nat org.apache.solr.client.solrj.impl.Http2SolrClient.createHttpClient(Http2SolrClient.java:287)\n6 more</p>\n</blockquote>\n<p>--</p>\n<p>With SSL explicitly disabled, we would have expected all SSL-specific requirements to be ignored, but seems like they are not. The same process works as expected in our old environment with Solr 8.8. Are there other parameters or configuration files we've missed which may be specific to Solr 9.x?</p>\n<p>To clarify - Solr itself starts without issues and bypasses FIPS requirements as expected. It's only core creation which behaves this way.</p>\n<p>Thanks for any insight.</p>\n"},{"tags":["java","spring-boot","maven","google-cloud-platform","spring-cloud-gcp"],"comments":[{"owner":{"account_id":15760814,"reputation":68973,"user_id":11372593,"display_name":"guillaume blaquiere"},"score":1,"creation_date":1694071959,"post_id":77054939,"comment_id":135843625,"body_markdown":"Do you want to share the commons module with different app and have it stored centrally to be able to import it easily?","body":"Do you want to share the commons module with different app and have it stored centrally to be able to import it easily?"},{"owner":{"account_id":17168363,"reputation":334,"user_id":12426044,"display_name":"Akash Sharma"},"score":0,"creation_date":1694078689,"post_id":77054939,"comment_id":135844998,"body_markdown":"@guillaumeblaquiere yes, right","body":"@guillaumeblaquiere yes, right"},{"owner":{"account_id":15760814,"reputation":68973,"user_id":11372593,"display_name":"guillaume blaquiere"},"score":0,"creation_date":1694079392,"post_id":77054939,"comment_id":135845170,"body_markdown":"Publish your module in Artifact Registry. You have a maven repository managed for you. It&#39;s the best place. https://cloud.google.com/artifact-registry/docs/java/store-java","body":"Publish your module in Artifact Registry. You have a maven repository managed for you. It&#39;s the best place. <a href=\"https://cloud.google.com/artifact-registry/docs/java/store-java\" rel=\"nofollow noreferrer\">cloud.google.com/artifact-registry/docs/java/store-java</a>"}],"owner":{"account_id":17168363,"reputation":334,"user_id":12426044,"display_name":"Akash Sharma"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694030362,"creation_date":1694030362,"question_id":77054939,"body_markdown":"I am setting up a new multi-module Springboot project.\r\n\r\n**MyApp(root)**\r\n - **my-app-commons**\r\n - **my-app-api-a**\r\n\r\nThe **my-app-commons** module will have the model classes and so Application(Main) class isn&#39;t required and it can be used as a library (dependency) in other modules.\r\n\r\nI intend to connect to GCP bucket from the **my-app-api-a** module.In future I will have to add more child modules to MyApp. I was thinking if I can have my GCP storage related configuration inside the **my-app-commons** module and use it as spring managed dependency (autowired) in **my-app-api-a** module, and possibly in future modules, instead of repeating the configuration related code in multiple modules.\r\n\r\nAs I am a beginner, I am not sure if its a good approach. I also think I will need Application(Main) class and have component scan to read the configuration.\r\n\r\nPlease can you suggest the best practice for what I am trying to achieve here.","title":"Sharing configuration across modules in Springboot multi-module project","body":"<p>I am setting up a new multi-module Springboot project.</p>\n<p><strong>MyApp(root)</strong></p>\n<ul>\n<li><strong>my-app-commons</strong></li>\n<li><strong>my-app-api-a</strong></li>\n</ul>\n<p>The <strong>my-app-commons</strong> module will have the model classes and so Application(Main) class isn't required and it can be used as a library (dependency) in other modules.</p>\n<p>I intend to connect to GCP bucket from the <strong>my-app-api-a</strong> module.In future I will have to add more child modules to MyApp. I was thinking if I can have my GCP storage related configuration inside the <strong>my-app-commons</strong> module and use it as spring managed dependency (autowired) in <strong>my-app-api-a</strong> module, and possibly in future modules, instead of repeating the configuration related code in multiple modules.</p>\n<p>As I am a beginner, I am not sure if its a good approach. I also think I will need Application(Main) class and have component scan to read the configuration.</p>\n<p>Please can you suggest the best practice for what I am trying to achieve here.</p>\n"},{"tags":["java","spring","maven","cron"],"answers":[{"comments":[{"owner":{"account_id":11204808,"reputation":43,"user_id":8220741,"display_name":"Marco Arnone"},"score":0,"creation_date":1498575697,"post_id":44783272,"comment_id":76548033,"body_markdown":"I forgot to write that I created another class like you can see at the [the following link](https://gist.github.com/marnone9/01a2dabe39632e6885c0fd4a11f3c725)","body":"I forgot to write that I created another class like you can see at the <a href=\"https://gist.github.com/marnone9/01a2dabe39632e6885c0fd4a11f3c725\" rel=\"nofollow noreferrer\">the following link</a>"},{"owner":{"account_id":4279009,"reputation":7633,"user_id":3498962,"display_name":"Essex Boy"},"score":0,"creation_date":1498576235,"post_id":44783272,"comment_id":76548418,"body_markdown":"Do you have your logging set up correctly, add a System.out or step through it in the debugger.","body":"Do you have your logging set up correctly, add a System.out or step through it in the debugger."},{"owner":{"account_id":11204808,"reputation":43,"user_id":8220741,"display_name":"Marco Arnone"},"score":0,"creation_date":1498577622,"post_id":44783272,"comment_id":76549440,"body_markdown":"I&#39;ve tried to make a log in a rest service of the same package and it works","body":"I&#39;ve tried to make a log in a rest service of the same package and it works"}],"tags":[],"owner":{"account_id":4279009,"reputation":7633,"user_id":3498962,"display_name":"Essex Boy"},"comment_count":3,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1498574696,"creation_date":1498574696,"answer_id":44783272,"question_id":44783048,"body_markdown":"You need EnableScheduling in your main config\r\n\r\n    @EnableScheduling\r\n    .....\r\n    ..... other config annotaions\r\n    public class ApplicationConfig {\r\n    }","title":"Configure a scheduled task on .war file created by Spring/Maven","body":"<p>You need EnableScheduling in your main config</p>\n\n<pre><code>@EnableScheduling\n.....\n..... other config annotaions\npublic class ApplicationConfig {\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5943234,"reputation":3917,"user_id":4684539,"accept_rate":98,"display_name":"AndreaM16"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1498659927,"creation_date":1498659927,"answer_id":44805341,"question_id":44783048,"body_markdown":"You should fix by replacing `@Component` with `@Service` and `@EnableScheduling`.\r\n\r\n    @Service\r\n    @EnableScheduling\r\n    public class ScheduledTasks {\r\n        . . .\r\n    }","title":"Configure a scheduled task on .war file created by Spring/Maven","body":"<p>You should fix by replacing <code>@Component</code> with <code>@Service</code> and <code>@EnableScheduling</code>.</p>\n\n<pre><code>@Service\n@EnableScheduling\npublic class ScheduledTasks {\n    . . .\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1387308,"reputation":733,"user_id":1319039,"display_name":"d2k2"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694029660,"creation_date":1694029660,"answer_id":77054870,"question_id":44783048,"body_markdown":"you have to add `@EnableScheduling` and `SpringBootServletInitializer` in your Spring Boot application class to make the scheduler work when you deploy the war file on tomcat.\r\n\r\n    @SpringBootApplication\r\n    @EnableScheduling\r\n    public class MyApplication extends SpringBootServletInitializer{\r\n    \r\n    }\r\n\r\nthen just add a method with @Scheduled annotation in a spring managed bean.\r\n\r\n    @Service\r\n    public class MyService{\r\n    \r\n        @Scheduled(fixedRate = 60_000)\r\n        public void runEveryMinute(){\r\n            System.out.println(&quot;hello&quot;);\r\n        }\r\n    }\r\n\r\n","title":"Configure a scheduled task on .war file created by Spring/Maven","body":"<p>you have to add <code>@EnableScheduling</code> and <code>SpringBootServletInitializer</code> in your Spring Boot application class to make the scheduler work when you deploy the war file on tomcat.</p>\n<pre><code>@SpringBootApplication\n@EnableScheduling\npublic class MyApplication extends SpringBootServletInitializer{\n\n}\n</code></pre>\n<p>then just add a method with @Scheduled annotation in a spring managed bean.</p>\n<pre><code>@Service\npublic class MyService{\n\n    @Scheduled(fixedRate = 60_000)\n    public void runEveryMinute(){\n        System.out.println(&quot;hello&quot;);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":11204808,"reputation":43,"user_id":8220741,"display_name":"Marco Arnone"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1632,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":44805341,"answer_count":3,"score":4,"last_activity_date":1694029660,"creation_date":1498574131,"question_id":44783048,"body_markdown":"I have an application developed on **spring framework** with **maven**. I have many modules (each one has its own **pom.xml** file) and I have the generic **pom.xml** to compile the entire project.\r\n\r\nUsing **maven** I compile a `.war` file and I deploy this one in a **Jetty** server, but now I have another problem. I need to configure a function that will execute some code every couple of minutes.\r\nI tried to configure it like [at the following link](https://spring.io/guides/gs/scheduling-tasks), so having:\r\n\r\nI edited the specific pom.xml file and I add this:\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n      &lt;version&gt;1.2.1.RELEASE&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nOn dependencies list, I added this in plugin list:\r\n\r\n    &lt;plugin&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    &lt;/plugin&gt;\r\n\r\nI created in the same module one file that defined this class:\r\n\r\n    @Component\r\n    public class ScheduledTasks {\r\n      private static final Logger log = LoggerFactory.getLogger(ScheduledTasks.class);\r\n    \r\n        private static final SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;HH:mm:ss&quot;);\r\n    \r\n        @Scheduled(fixedDelay = 5000)\r\n        public void reportCurrentTime() {\r\n            log.info(&quot;The time is now {}&quot;, dateFormat.format(new Date()));\r\n        }\r\n    }\r\n\r\nbut it doesn&#39;t work for me. Logs don&#39;t print anything.\r\nI&#39;ve been struggling with this issue for a while but I didn&#39;t manage to find any solution also taking a look at other related Q/A on StackOverflow.\r\n\r\n**What Am I doing wrong? How can I fix this?**\r\n\r\nThanks in advance.\r\n\r\n","title":"Configure a scheduled task on .war file created by Spring/Maven","body":"<p>I have an application developed on <strong>spring framework</strong> with <strong>maven</strong>. I have many modules (each one has its own <strong>pom.xml</strong> file) and I have the generic <strong>pom.xml</strong> to compile the entire project.</p>\n\n<p>Using <strong>maven</strong> I compile a <code>.war</code> file and I deploy this one in a <strong>Jetty</strong> server, but now I have another problem. I need to configure a function that will execute some code every couple of minutes.\nI tried to configure it like <a href=\"https://spring.io/guides/gs/scheduling-tasks\" rel=\"nofollow noreferrer\">at the following link</a>, so having:</p>\n\n<p>I edited the specific pom.xml file and I add this:</p>\n\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n  &lt;version&gt;1.2.1.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>On dependencies list, I added this in plugin list:</p>\n\n<pre><code>&lt;plugin&gt;\n  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>I created in the same module one file that defined this class:</p>\n\n<pre><code>@Component\npublic class ScheduledTasks {\n  private static final Logger log = LoggerFactory.getLogger(ScheduledTasks.class);\n\n    private static final SimpleDateFormat dateFormat = new SimpleDateFormat(\"HH:mm:ss\");\n\n    @Scheduled(fixedDelay = 5000)\n    public void reportCurrentTime() {\n        log.info(\"The time is now {}\", dateFormat.format(new Date()));\n    }\n}\n</code></pre>\n\n<p>but it doesn't work for me. Logs don't print anything.\nI've been struggling with this issue for a while but I didn't manage to find any solution also taking a look at other related Q/A on StackOverflow.</p>\n\n<p><strong>What Am I doing wrong? How can I fix this?</strong></p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["java","mongodb","spring-boot","mongotemplate"],"comments":[{"owner":{"account_id":26391128,"reputation":4716,"user_id":20042973,"display_name":"user20042973"},"score":0,"creation_date":1694029915,"post_id":77054837,"comment_id":135839290,"body_markdown":"What database context (&#39;namespace&#39;) are you running the command against? The error suggests that it currently isn&#39;t `admin`, and that adjusting that would resolve the problem. Note also that `adminCommand()` is a special form of the `runCommand()` function that automatically routes the command to the `admin` database regardless of what context is currently set in the shell","body":"What database context (&#39;namespace&#39;) are you running the command against? The error suggests that it currently isn&#39;t <code>admin</code>, and that adjusting that would resolve the problem. Note also that <code>adminCommand()</code> is a special form of the <code>runCommand()</code> function that automatically routes the command to the <code>admin</code> database regardless of what context is currently set in the shell"},{"owner":{"account_id":16489162,"reputation":69,"user_id":11913587,"display_name":"Kaushik Mahadevan"},"score":0,"creation_date":1694076666,"post_id":77054837,"comment_id":135844586,"body_markdown":"`not authorized on admin to execute command { replSetGetStatus: \\&quot;1\\&quot;, $db: \\&quot;admin\\&quot;, $clusterTime: { clusterTime: Timestamp(1694076477, 1), signature: { hash: BinData(0, 8483708B704532E3D90E8E986C60262553B18A79), keyId: 7231366454078078978 } }, lsid: { id: UUID(\\&quot;4c1f1d45-a000-40c6-a212-b86a5b5873c2\\&quot;) }`  as you see here it is the admin database I am running it against","body":"<code>not authorized on admin to execute command { replSetGetStatus: \\&quot;1\\&quot;, $db: \\&quot;admin\\&quot;, $clusterTime: { clusterTime: Timestamp(1694076477, 1), signature: { hash: BinData(0, 8483708B704532E3D90E8E986C60262553B18A79), keyId: 7231366454078078978 } }, lsid: { id: UUID(\\&quot;4c1f1d45-a000-40c6-a212-b86a5b5873c2\\&quot;) }</code>  as you see here it is the admin database I am running it against"},{"owner":{"account_id":26391128,"reputation":4716,"user_id":20042973,"display_name":"user20042973"},"score":0,"creation_date":1694098488,"post_id":77054837,"comment_id":135849372,"body_markdown":"Have you authenticated with a user who has appropriate privileges to run the command?","body":"Have you authenticated with a user who has appropriate privileges to run the command?"},{"owner":{"account_id":16489162,"reputation":69,"user_id":11913587,"display_name":"Kaushik Mahadevan"},"score":0,"creation_date":1694099598,"post_id":77054837,"comment_id":135849650,"body_markdown":"Yup, I used the same db / user to query the command directly against the mongo db and it works. Just is not working through the code","body":"Yup, I used the same db / user to query the command directly against the mongo db and it works. Just is not working through the code"}],"owner":{"account_id":16489162,"reputation":69,"user_id":11913587,"display_name":"Kaushik Mahadevan"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694029405,"creation_date":1694029405,"question_id":77054837,"body_markdown":"I am writing some code to periodically check db connectivity and find status of each individual member of the mongo replica set. \r\n\r\nI want the result of the following mongo command to be accessed through spring boot&#39;s mongo template. \r\n\r\n```db.adminCommand({replSetGetStatus: 1})```\r\n\r\nWhen I try to access this from mongo template I am getting unauthorized error:\r\n\r\n```\r\nBson ping = new BasicDBObject(&quot;replSetGetStatus&quot;, &quot;1&quot;);\r\nString test = mongoTemplate.getDb().runCommand(ping).toString();\r\n```\r\n```\r\nCommand failed with error 13 (Unauthorized): &#39;replSetGetStatus may only be run against the admin database.&#39; \r\n```\r\nIs there any other way to achieve what I am looking for? Thanks","title":"How do I get individual mongo server status from mongo template in spring boot?","body":"<p>I am writing some code to periodically check db connectivity and find status of each individual member of the mongo replica set.</p>\n<p>I want the result of the following mongo command to be accessed through spring boot's mongo template.</p>\n<p><code>db.adminCommand({replSetGetStatus: 1})</code></p>\n<p>When I try to access this from mongo template I am getting unauthorized error:</p>\n<pre><code>Bson ping = new BasicDBObject(&quot;replSetGetStatus&quot;, &quot;1&quot;);\nString test = mongoTemplate.getDb().runCommand(ping).toString();\n</code></pre>\n<pre><code>Command failed with error 13 (Unauthorized): 'replSetGetStatus may only be run against the admin database.' \n</code></pre>\n<p>Is there any other way to achieve what I am looking for? Thanks</p>\n"},{"tags":["java","azure-purview","azure-sdk-for-java"],"owner":{"account_id":29381983,"reputation":1,"user_id":22512273,"display_name":"GGranados"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694029339,"creation_date":1694029284,"question_id":77054823,"body_markdown":"I&#39;m have to update BusinessAttributes metadata in an entity in Azure Purview\r\n\r\nBy [Purview API](https://learn.microsoft.com/en-us/rest/api/purview/catalogdataplane/entity/add-or-update-business-metadata-attributes?tabs=HTTP#examples) I have to call:\r\n\r\n`POST {Endpoint}/catalog/api/atlas/v2/entity/guid/{guid}/businessmetadata/{bmName}`\r\n\r\nAnd send attributes to be updated in body request:\r\n```\r\n{\r\n  &quot;bizAttr1&quot;: &quot;bizAttr1&quot;\r\n}\r\n```\r\n\r\nDocumentation for [azure-sdk-for-java](https://azuresdkartifacts.blob.core.windows.net//staging/apidocs/com/azure/analytics/purview/catalog/EntityClient.htmlazure-sdk-for-java) mentions over-loaded method **addOrUpdateBusinessMetadataAttributesWithResponse**:\r\n\r\n\r\nOne having parameters: `(String bmName, String guid, RequestOptions requestOptions)`\r\n\r\nand: `(String guid, RequestOptions requestOptions)`\r\n\r\nThey have no **BinaryData** parameter, how should Body Request JSON object be passed?","title":"How to pass Body Request passed to addOrUpdateBusinessMetadataAttributesWithResponse of a Purview Entity with azure-sdk-for-java?","body":"<p>I'm have to update BusinessAttributes metadata in an entity in Azure Purview</p>\n<p>By <a href=\"https://learn.microsoft.com/en-us/rest/api/purview/catalogdataplane/entity/add-or-update-business-metadata-attributes?tabs=HTTP#examples\" rel=\"nofollow noreferrer\">Purview API</a> I have to call:</p>\n<p><code>POST {Endpoint}/catalog/api/atlas/v2/entity/guid/{guid}/businessmetadata/{bmName}</code></p>\n<p>And send attributes to be updated in body request:</p>\n<pre><code>{\n  &quot;bizAttr1&quot;: &quot;bizAttr1&quot;\n}\n</code></pre>\n<p>Documentation for <a href=\"https://azuresdkartifacts.blob.core.windows.net//staging/apidocs/com/azure/analytics/purview/catalog/EntityClient.htmlazure-sdk-for-java\" rel=\"nofollow noreferrer\">azure-sdk-for-java</a> mentions over-loaded method <strong>addOrUpdateBusinessMetadataAttributesWithResponse</strong>:</p>\n<p>One having parameters: <code>(String bmName, String guid, RequestOptions requestOptions)</code></p>\n<p>and: <code>(String guid, RequestOptions requestOptions)</code></p>\n<p>They have no <strong>BinaryData</strong> parameter, how should Body Request JSON object be passed?</p>\n"},{"tags":["java","spring-boot","spring-webflux","controller-advice"],"owner":{"account_id":8611883,"reputation":43,"user_id":22504890,"display_name":"user22504890"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1694029121,"creation_date":1694029005,"question_id":77054796,"body_markdown":"I have controller like this:\r\n\r\n\r\n```\r\n    @PostMapping(consumes = &quot;application/json&quot;, value = &quot;id&quot;)\r\n    public Mono&lt;MyResponse&gt; filtering(@Valid @RequestBody MyRequest request) {\r\n        return Mono.fromCallable(() -&gt;peopleFiltering.filter(\r\n                        request.getEntity()))\r\n                .flatMap(result -&gt; result.map(MyResponseMapper::mapToResponse));\r\n}\r\n```\r\n\r\n\r\n\r\nAnd this is my controller advice:\r\n\r\n   \r\n```\r\n@ControllerAdvice\r\n   public class CustomExceptionHandler {`\r\n\r\n    @ExceptionHandler({NotFoundException.class})\r\n    @ResponseStatus(HttpStatus.NOT_FOUND)\r\n    @ResponseBody\r\n    public Mono&lt;BankFilteringError&gt; handleNotFound(NotFoundException ex) {\r\n        MyError error = new MyError();\r\n        error.setCode(&quot;404&quot;);\r\n        error.setDescription(&quot;404 NOT_FOUND&quot;);\r\n       error.setInstance(&quot;instance&quot;);\r\n       error.setMessage(&quot;Not Found&quot;);\r\n\r\n       return Mono.just(error);\r\n    }\r\n\r\n    @ExceptionHandler({BadRequestException.class})\r\n    @ResponseStatus(HttpStatus.BAD_REQUEST)\r\n    @ResponseBody\r\n    public BankFilteringError handleBadRequest(BadRequestException ex) {\r\n        MyError error = new MyError();\r\n        error.setCode(&quot;400&quot;);\r\n        error.setDescription(&quot;Invalid Request Body&quot;);\r\n        error.setInstance(&quot;instance&quot;);\r\n        error.setMessage(&quot;Bad Request&quot;); // Include the specific error message\r\n        return error;\r\n    }\r\n  }\r\n```\r\n\r\n\r\n\r\n\r\nThese are my custom exception classes:\r\n\r\n\r\n```\r\npublic class NotFoundException extends RuntimeException {\r\n    public NotFoundException(String errorMessage) {\r\n        super(errorMessage);\r\n    }\r\n}\r\n```\r\n\r\n\r\nand \r\n\r\n```\r\npublic class BadRequestException extends RuntimeException {\r\n    public BadRequestException(String message) {\r\n        super(message);\r\n    }\r\n}\r\n```\r\n\r\nBut when I hit my url in postman I am getting 404 and 400 without my body.\r\n\r\nI tried with \r\n\r\n```\r\n.switchIfEmpty(Mono.error(request.gEntity() == null ?\r\n                        new BadRequestException(&quot;Invalid Request Body&quot;) :\r\n                        new NotFoundException(&quot;Not Found&quot;)));\r\n```\r\n\r\n\r\nBut without luck. Only time when this worked is when I put \r\n\r\n```\r\n@ExceptionHandler({RunTimeException.class}) //so, not my class\r\n   @ResponseStatus(HttpStatus.BAD_REQUEST)\r\n    @ResponseBody\r\n    public BankFilteringError handleBadRequest(BadRequestException ex) {\r\n        MyError error = new MyError();\r\n        error.setCode(&quot;400&quot;);\r\n        error.setDescription(&quot;Invalid Request Body&quot;);\r\n        error.setInstance(&quot;instance&quot;);\r\n        error.setMessage(&quot;Bad Request&quot;); // Include the specific error message\r\n        return error;\r\n    }\r\n  }\r\n```\r\n\r\nBut otherwise getting default spring errors 400 and 404 without my body. What am I doing wrong?","title":"Why my controller advice does not work properly with Mono?","body":"<p>I have controller like this:</p>\n<pre><code>    @PostMapping(consumes = &quot;application/json&quot;, value = &quot;id&quot;)\n    public Mono&lt;MyResponse&gt; filtering(@Valid @RequestBody MyRequest request) {\n        return Mono.fromCallable(() -&gt;peopleFiltering.filter(\n                        request.getEntity()))\n                .flatMap(result -&gt; result.map(MyResponseMapper::mapToResponse));\n}\n</code></pre>\n<p>And this is my controller advice:</p>\n<pre><code>@ControllerAdvice\n   public class CustomExceptionHandler {`\n\n    @ExceptionHandler({NotFoundException.class})\n    @ResponseStatus(HttpStatus.NOT_FOUND)\n    @ResponseBody\n    public Mono&lt;BankFilteringError&gt; handleNotFound(NotFoundException ex) {\n        MyError error = new MyError();\n        error.setCode(&quot;404&quot;);\n        error.setDescription(&quot;404 NOT_FOUND&quot;);\n       error.setInstance(&quot;instance&quot;);\n       error.setMessage(&quot;Not Found&quot;);\n\n       return Mono.just(error);\n    }\n\n    @ExceptionHandler({BadRequestException.class})\n    @ResponseStatus(HttpStatus.BAD_REQUEST)\n    @ResponseBody\n    public BankFilteringError handleBadRequest(BadRequestException ex) {\n        MyError error = new MyError();\n        error.setCode(&quot;400&quot;);\n        error.setDescription(&quot;Invalid Request Body&quot;);\n        error.setInstance(&quot;instance&quot;);\n        error.setMessage(&quot;Bad Request&quot;); // Include the specific error message\n        return error;\n    }\n  }\n</code></pre>\n<p>These are my custom exception classes:</p>\n<pre><code>public class NotFoundException extends RuntimeException {\n    public NotFoundException(String errorMessage) {\n        super(errorMessage);\n    }\n}\n</code></pre>\n<p>and</p>\n<pre><code>public class BadRequestException extends RuntimeException {\n    public BadRequestException(String message) {\n        super(message);\n    }\n}\n</code></pre>\n<p>But when I hit my url in postman I am getting 404 and 400 without my body.</p>\n<p>I tried with</p>\n<pre><code>.switchIfEmpty(Mono.error(request.gEntity() == null ?\n                        new BadRequestException(&quot;Invalid Request Body&quot;) :\n                        new NotFoundException(&quot;Not Found&quot;)));\n</code></pre>\n<p>But without luck. Only time when this worked is when I put</p>\n<pre><code>@ExceptionHandler({RunTimeException.class}) //so, not my class\n   @ResponseStatus(HttpStatus.BAD_REQUEST)\n    @ResponseBody\n    public BankFilteringError handleBadRequest(BadRequestException ex) {\n        MyError error = new MyError();\n        error.setCode(&quot;400&quot;);\n        error.setDescription(&quot;Invalid Request Body&quot;);\n        error.setInstance(&quot;instance&quot;);\n        error.setMessage(&quot;Bad Request&quot;); // Include the specific error message\n        return error;\n    }\n  }\n</code></pre>\n<p>But otherwise getting default spring errors 400 and 404 without my body. What am I doing wrong?</p>\n"},{"tags":["java","junit","request","jersey","request-headers"],"answers":[{"comments":[{"owner":{"account_id":14672099,"reputation":1179,"user_id":10596295,"display_name":"Martin"},"score":0,"creation_date":1568028435,"post_id":57852330,"comment_id":102132361,"body_markdown":"It did not bring a desirable effect because of these two methods bases on a method getHeaders(). On the first screen we can see that there are x-app-id and x-app-key not present after getHeaders(), getMetadata() or getStringHeaders() usage.","body":"It did not bring a desirable effect because of these two methods bases on a method getHeaders(). On the first screen we can see that there are x-app-id and x-app-key not present after getHeaders(), getMetadata() or getStringHeaders() usage."}],"tags":[],"owner":{"account_id":15284220,"reputation":3452,"user_id":11027700,"display_name":"i.bondarenko"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1568025483,"creation_date":1568025483,"answer_id":57852330,"question_id":57851388,"body_markdown":"You could try following:\r\n\r\n1) `builder.get().getMetadata()`\r\n\r\n2) `builder.get().getStringHeaders()`\r\n\r\n3) if previous two fail\r\n`((ClientResponse)ReflectionTestUtils.getField(builder.get(), &quot;context&quot;)).getHeaders()`","title":"How to get header from InvocationBuilder object from request in JUnit 5 test","body":"<p>You could try following:</p>\n\n<p>1) <code>builder.get().getMetadata()</code></p>\n\n<p>2) <code>builder.get().getStringHeaders()</code></p>\n\n<p>3) if previous two fail\n<code>((ClientResponse)ReflectionTestUtils.getField(builder.get(), \"context\")).getHeaders()</code></p>\n"},{"tags":[],"owner":{"account_id":6705297,"reputation":11,"user_id":5170498,"display_name":"Eric Driggs"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694028948,"creation_date":1694028948,"answer_id":77054791,"question_id":57851388,"body_markdown":"```\r\nField requestContextField = JerseyInvocation.Builder.class.getDeclaredField(&quot;requestContext&quot;);\r\nrequestContextField.setAccessible(true);\r\nClientRequest clientRequest = (ClientRequest)requestContextField.get(invocationBuilder);\r\nMultivaluedMap&lt;String, Object&gt; actualHeaders = clientRequest.getHeaders();\r\n```","title":"How to get header from InvocationBuilder object from request in JUnit 5 test","body":"<pre><code>Field requestContextField = JerseyInvocation.Builder.class.getDeclaredField(&quot;requestContext&quot;);\nrequestContextField.setAccessible(true);\nClientRequest clientRequest = (ClientRequest)requestContextField.get(invocationBuilder);\nMultivaluedMap&lt;String, Object&gt; actualHeaders = clientRequest.getHeaders();\n</code></pre>\n"}],"owner":{"account_id":14672099,"reputation":1179,"user_id":10596295,"display_name":"Martin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1697,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1694028948,"creation_date":1568021798,"question_id":57851388,"body_markdown":"I want to test a method which is adding a header in a request to outside public API. \r\n\r\nThe method looks like:\r\n\r\n\r\n```\r\n@Service\r\n@AllArgsConstructor\r\nclass ProductsFacadeImpl implements ProductsFacade {\r\n\r\n  private NutritionixHeader nutritionixHeader;\r\n\r\n  @Override\r\n  public Invocation.Builder prepareHeaderForApiCall(String query) {\r\n    Client client = ClientBuilder.newClient();\r\n    WebTarget webTarget =\r\n        client.target(&quot;https://trackapi.nutritionix.com/v2/search/instant?query=&quot; + query);\r\n    Invocation.Builder invocationBuilder = webTarget.request(MediaType.APPLICATION_JSON_VALUE);\r\n    invocationBuilder.header(&quot;x-app-id&quot;, nutritionixHeader.getNutritionixAppId());\r\n    invocationBuilder.header(&quot;x-app-key&quot;, nutritionixHeader.getNutritionixAppKey());\r\n    return invocationBuilder;\r\n  }\r\n}\r\n```\r\n\r\nnew version method for EDIT purpose:\r\n\r\n```\r\n  @Override\r\n  public Invocation prepareHeaderForApiCall(String query) {\r\n    Client client = ClientBuilder.newClient();\r\n    WebTarget webTarget =\r\n        client.target(&quot;https://trackapi.nutritionix.com/v2/search/instant?query=&quot; + query);\r\n    Invocation.Builder invocationBuilder = webTarget.request(MediaType.APPLICATION_JSON_VALUE);\r\n    invocationBuilder.header(&quot;x-app-id&quot;, nutritionixHeader.getNutritionixAppId());\r\n    invocationBuilder.header(&quot;x-app-key&quot;, nutritionixHeader.getNutritionixAppKey());\r\n    return invocationBuilder.buildGet();\r\n  }\r\n```\r\n\r\nIn my JUnit 5 test, I want to check if my header contains two objects which are required by public API. It&#39;s: \r\n```\r\n&quot;x-app-id&quot;\r\n```\r\nand\r\n```\r\n&quot;x-app-key&quot;\r\n```\r\n\r\nMy test looks like:\r\n\r\n```\r\n@Test\r\n  void prepareHeaderForApiCall() {\r\n    var query = &quot;query&quot;;\r\n\r\n    given(nutritionixHeader.getNutritionixAppId()).willReturn(appId);\r\n    given(nutritionixHeader.getNutritionixAppKey()).willReturn(appKey);\r\n\r\n    Invocation.Builder builder = productsFacade.prepareHeaderForApiCall(query);\r\n\r\n    builder.get();\r\n\r\n    assertEquals(appId, builder.get().getHeaders().entrySet().stream().filter(entry -&gt; entry.getKey().equals(&quot;x-app-id&quot;)).map(Map.Entry::getValue).findFirst().orElse(null));\r\n\r\n  }\r\n```\r\n\r\nThe problem is that the method\r\n``` \r\ngetHeaders()\r\n```\r\nin my stream does not contain headers which I added and it looks like:\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\nI want to know how I can get a header params objects which are placed in a requestContext object as a header objects like below: \r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\nEDIT:\r\n\r\nI found one interesting thing with debugger and evaluate expression in IntelliJ, namely: \r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/FOTLN.png\r\n  [2]: https://i.stack.imgur.com/Tv2SN.png\r\n  [3]: https://i.stack.imgur.com/LVYCm.png\r\nwith this above expression, I can find out my two added headers but I cannot use the same expression in a code. \r\n\r\nI will be grateful for a suggestion about how to reach a goal by getting headers object from the requestContext object. ","title":"How to get header from InvocationBuilder object from request in JUnit 5 test","body":"<p>I want to test a method which is adding a header in a request to outside public API. </p>\n\n<p>The method looks like:</p>\n\n<pre><code>@Service\n@AllArgsConstructor\nclass ProductsFacadeImpl implements ProductsFacade {\n\n  private NutritionixHeader nutritionixHeader;\n\n  @Override\n  public Invocation.Builder prepareHeaderForApiCall(String query) {\n    Client client = ClientBuilder.newClient();\n    WebTarget webTarget =\n        client.target(\"https://trackapi.nutritionix.com/v2/search/instant?query=\" + query);\n    Invocation.Builder invocationBuilder = webTarget.request(MediaType.APPLICATION_JSON_VALUE);\n    invocationBuilder.header(\"x-app-id\", nutritionixHeader.getNutritionixAppId());\n    invocationBuilder.header(\"x-app-key\", nutritionixHeader.getNutritionixAppKey());\n    return invocationBuilder;\n  }\n}\n</code></pre>\n\n<p>new version method for EDIT purpose:</p>\n\n<pre><code>  @Override\n  public Invocation prepareHeaderForApiCall(String query) {\n    Client client = ClientBuilder.newClient();\n    WebTarget webTarget =\n        client.target(\"https://trackapi.nutritionix.com/v2/search/instant?query=\" + query);\n    Invocation.Builder invocationBuilder = webTarget.request(MediaType.APPLICATION_JSON_VALUE);\n    invocationBuilder.header(\"x-app-id\", nutritionixHeader.getNutritionixAppId());\n    invocationBuilder.header(\"x-app-key\", nutritionixHeader.getNutritionixAppKey());\n    return invocationBuilder.buildGet();\n  }\n</code></pre>\n\n<p>In my JUnit 5 test, I want to check if my header contains two objects which are required by public API. It's: </p>\n\n<pre><code>\"x-app-id\"\n</code></pre>\n\n<p>and</p>\n\n<pre><code>\"x-app-key\"\n</code></pre>\n\n<p>My test looks like:</p>\n\n<pre><code>@Test\n  void prepareHeaderForApiCall() {\n    var query = \"query\";\n\n    given(nutritionixHeader.getNutritionixAppId()).willReturn(appId);\n    given(nutritionixHeader.getNutritionixAppKey()).willReturn(appKey);\n\n    Invocation.Builder builder = productsFacade.prepareHeaderForApiCall(query);\n\n    builder.get();\n\n    assertEquals(appId, builder.get().getHeaders().entrySet().stream().filter(entry -&gt; entry.getKey().equals(\"x-app-id\")).map(Map.Entry::getValue).findFirst().orElse(null));\n\n  }\n</code></pre>\n\n<p>The problem is that the method</p>\n\n<pre><code>getHeaders()\n</code></pre>\n\n<p>in my stream does not contain headers which I added and it looks like:</p>\n\n<p><a href=\"https://i.stack.imgur.com/FOTLN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FOTLN.png\" alt=\"enter image description here\"></a></p>\n\n<p>I want to know how I can get a header params objects which are placed in a requestContext object as a header objects like below: </p>\n\n<p><a href=\"https://i.stack.imgur.com/Tv2SN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Tv2SN.png\" alt=\"enter image description here\"></a></p>\n\n<p>EDIT:</p>\n\n<p>I found one interesting thing with debugger and evaluate expression in IntelliJ, namely: </p>\n\n<p><a href=\"https://i.stack.imgur.com/LVYCm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LVYCm.png\" alt=\"enter image description here\"></a></p>\n\n<p>with this above expression, I can find out my two added headers but I cannot use the same expression in a code. </p>\n\n<p>I will be grateful for a suggestion about how to reach a goal by getting headers object from the requestContext object. </p>\n"},{"tags":["java","android","photo-picker"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1673889374,"post_id":75137426,"comment_id":132593073,"body_markdown":"Which error are you talking about?","body":"Which error are you talking about?"}],"answers":[{"comments":[{"owner":{"account_id":27545120,"reputation":1,"user_id":21021198,"display_name":"Saleem Manasfi"},"score":0,"creation_date":1673893293,"post_id":75137790,"comment_id":132594213,"body_markdown":"Error : Required type:\nVisualMediaType\nProvided:\nImageAndVideo","body":"Error : Required type: VisualMediaType Provided: ImageAndVideo"},{"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1673893690,"post_id":75137790,"comment_id":132594323,"body_markdown":"@SaleemManasfi: Sorry, try the updated answer. I do not reference Kotlin code from Java much, so I am rusty on the &quot;interop&quot; process. I recommend that you learn Kotlin and switch to that, as Android is steadily moving away from Java for mainstream programming.","body":"@SaleemManasfi: Sorry, try the updated answer. I do not reference Kotlin code from Java much, so I am rusty on the &quot;interop&quot; process. I recommend that you learn Kotlin and switch to that, as Android is steadily moving away from Java for mainstream programming."},{"owner":{"account_id":27545120,"reputation":1,"user_id":21021198,"display_name":"Saleem Manasfi"},"score":0,"creation_date":1673944236,"post_id":75137790,"comment_id":132603845,"body_markdown":"Thank you , the Kotelin Code worked , yet the Java Code is not working , weird how google never noticed this !! is there a way to make it work in java that im missing ?","body":"Thank you , the Kotelin Code worked , yet the Java Code is not working , weird how google never noticed this !! is there a way to make it work in java that im missing ?"}],"tags":[],"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673893415,"creation_date":1673890749,"answer_id":75137790,"question_id":75137426,"body_markdown":"Try replacing:\r\n\r\n```java\r\nnew ActivityResultContracts.PickVisualMedia.ImageAndVideo()\r\n```\r\n\r\nwith:\r\n\r\n```java\r\nActivityResultContracts.PickVisualMedia.Companion.getImageAndVideo()\r\n```\r\n\r\n`ImageAndVideo` is a Kotlin `object` &amp;mdash; it is not a class that you instantiate yourself. However, the source code lacks the `@JvmField` annotation, so I think that just referring to `ActivityResultContracts.PickVisualMedia.ImageAndVideo` will fail, as outlined in [the docs](https://developer.android.com/kotlin/interop#companion_constants).\r\n","title":"How to solve Photopicker error in android Studio?","body":"<p>Try replacing:</p>\n<pre class=\"lang-java prettyprint-override\"><code>new ActivityResultContracts.PickVisualMedia.ImageAndVideo()\n</code></pre>\n<p>with:</p>\n<pre class=\"lang-java prettyprint-override\"><code>ActivityResultContracts.PickVisualMedia.Companion.getImageAndVideo()\n</code></pre>\n<p><code>ImageAndVideo</code> is a Kotlin <code>object</code> — it is not a class that you instantiate yourself. However, the source code lacks the <code>@JvmField</code> annotation, so I think that just referring to <code>ActivityResultContracts.PickVisualMedia.ImageAndVideo</code> will fail, as outlined in <a href=\"https://developer.android.com/kotlin/interop#companion_constants\" rel=\"nofollow noreferrer\">the docs</a>.</p>\n"},{"tags":[],"owner":{"account_id":14404359,"reputation":1,"user_id":10404933,"display_name":"Uroos Fatima"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687760406,"creation_date":1687759743,"answer_id":76553922,"question_id":75137426,"body_markdown":"I just worked this out yesterday. It is very simple code of few lines yet took me entire day to figure out what was wrong.Just add the following snippet of your code outside the clicklistener on the top. Seems like the variable doesn&#39;t initialize in time for it to launch hence the error.\r\n\r\n```\r\nActivityResultLauncher&lt;PickVisualMediaRequest&gt; pickMedia =\r\n                       registerForActivityResult(new ActivityResultContracts.PickVisualMedia(), uri -&gt; {\r\n                           // Callback is invoked after the user selects a media item or closes the\r\n                           // photo picker.\r\n                           if (uri != null) {\r\n                               Log.d(&quot;PhotoPicker&quot;, &quot;Selected URI: &quot; + uri);\r\n                           } else {\r\n                               Log.d(&quot;PhotoPicker&quot;, &quot;No media selected&quot;);\r\n                           }\r\n                       });\r\n\r\n-------------------------------------------------------------\r\n************** MY CODE FOR REFERENCE*************************\r\n-------------------------------------------------------------\r\nclass MainActivity : AppCompatActivity() {\r\n\r\n    private lateinit var appBarConfiguration: AppBarConfiguration\r\n    private lateinit var binding: ActivityMainBinding\r\n    private val REQUEST_CODE_SINGLE_SELECT = 1\r\n    private var pickMedia = registerForActivityResult(ActivityResultContracts.PickVisualMedia()) { uri -&gt;\r\n        // Callback is invoked after the user selects a media item or closes the\r\n        // photo picker.\r\n        if (uri != null) {\r\n            Log.d(&quot;PhotoPicker&quot;, &quot;Selected URI: $uri&quot;)\r\n        } else {\r\n            Log.d(&quot;PhotoPicker&quot;, &quot;No media selected&quot;)\r\n        }\r\n    }\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        WindowCompat.setDecorFitsSystemWindows(window, false)\r\n        super.onCreate(savedInstanceState)\r\n\r\n        binding = ActivityMainBinding.inflate(layoutInflater)\r\n        setContentView(binding.root)\r\n\r\n        setSupportActionBar(binding.toolbar)\r\n\r\n        val navController = findNavController(R.id.nav_host_fragment_content_main)\r\n        appBarConfiguration = AppBarConfiguration(navController.graph)\r\n        setupActionBarWithNavController(navController, appBarConfiguration)\r\n\r\n        binding.fab.setOnClickListener {\r\n            // Launch the photo picker and let the user choose only images.\r\n            pickMedia.launch(PickVisualMediaRequest(ActivityResultContracts.PickVisualMedia.ImageOnly))\r\n        }\r\n    }\r\n```","title":"How to solve Photopicker error in android Studio?","body":"<p>I just worked this out yesterday. It is very simple code of few lines yet took me entire day to figure out what was wrong.Just add the following snippet of your code outside the clicklistener on the top. Seems like the variable doesn't initialize in time for it to launch hence the error.</p>\n<pre><code>ActivityResultLauncher&lt;PickVisualMediaRequest&gt; pickMedia =\n                       registerForActivityResult(new ActivityResultContracts.PickVisualMedia(), uri -&gt; {\n                           // Callback is invoked after the user selects a media item or closes the\n                           // photo picker.\n                           if (uri != null) {\n                               Log.d(&quot;PhotoPicker&quot;, &quot;Selected URI: &quot; + uri);\n                           } else {\n                               Log.d(&quot;PhotoPicker&quot;, &quot;No media selected&quot;);\n                           }\n                       });\n\n-------------------------------------------------------------\n************** MY CODE FOR REFERENCE*************************\n-------------------------------------------------------------\nclass MainActivity : AppCompatActivity() {\n\n    private lateinit var appBarConfiguration: AppBarConfiguration\n    private lateinit var binding: ActivityMainBinding\n    private val REQUEST_CODE_SINGLE_SELECT = 1\n    private var pickMedia = registerForActivityResult(ActivityResultContracts.PickVisualMedia()) { uri -&gt;\n        // Callback is invoked after the user selects a media item or closes the\n        // photo picker.\n        if (uri != null) {\n            Log.d(&quot;PhotoPicker&quot;, &quot;Selected URI: $uri&quot;)\n        } else {\n            Log.d(&quot;PhotoPicker&quot;, &quot;No media selected&quot;)\n        }\n    }\n    override fun onCreate(savedInstanceState: Bundle?) {\n        WindowCompat.setDecorFitsSystemWindows(window, false)\n        super.onCreate(savedInstanceState)\n\n        binding = ActivityMainBinding.inflate(layoutInflater)\n        setContentView(binding.root)\n\n        setSupportActionBar(binding.toolbar)\n\n        val navController = findNavController(R.id.nav_host_fragment_content_main)\n        appBarConfiguration = AppBarConfiguration(navController.graph)\n        setupActionBarWithNavController(navController, appBarConfiguration)\n\n        binding.fab.setOnClickListener {\n            // Launch the photo picker and let the user choose only images.\n            pickMedia.launch(PickVisualMediaRequest(ActivityResultContracts.PickVisualMedia.ImageOnly))\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16445373,"reputation":613,"user_id":11880323,"display_name":"cmak"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694028877,"creation_date":1694028877,"answer_id":77054780,"question_id":75137426,"body_markdown":"Use this:\r\n```\r\nnew PickVisualMediaRequest.Builder()\r\n    .setMediaType(PickVisualMedia.ImageAndVideo.INSTANCE)\r\n    .build()\r\n```\r\n\r\nIt may show an error, but it will still compile fine.","title":"How to solve Photopicker error in android Studio?","body":"<p>Use this:</p>\n<pre><code>new PickVisualMediaRequest.Builder()\n    .setMediaType(PickVisualMedia.ImageAndVideo.INSTANCE)\n    .build()\n</code></pre>\n<p>It may show an error, but it will still compile fine.</p>\n"}],"owner":{"account_id":27545120,"reputation":1,"user_id":21021198,"display_name":"Saleem Manasfi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":824,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1694028877,"creation_date":1673888605,"question_id":75137426,"body_markdown":"I have the following code , im receiving an error :\r\n\r\n[enter image description here](https://i.stack.imgur.com/ZG54k.png)\r\n\r\n\r\n```\r\npackage com.example.photopicker;\r\nimport androidx.activity.result.ActivityResultLauncher;\r\nimport androidx.activity.result.PickVisualMediaRequest;\r\nimport androidx.activity.result.contract.ActivityResultContracts;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n    Button addimage;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        addimage=findViewById(R.id.button_pick_photo);\r\n       addimage.setOnClickListener(new View.OnClickListener() {\r\n           @Override\r\n           public void onClick(View v) {\r\n            // Registers a photo picker activity launcher in single-select mode.\r\n               ActivityResultLauncher&lt;PickVisualMediaRequest&gt; pickMedia =\r\n                       registerForActivityResult(new ActivityResultContracts.PickVisualMedia(), uri -&gt; {\r\n                           // Callback is invoked after the user selects a media item or closes the\r\n                           // photo picker.\r\n                           if (uri != null) {\r\n                               Log.d(&quot;PhotoPicker&quot;, &quot;Selected URI: &quot; + uri);\r\n                           } else {\r\n                               Log.d(&quot;PhotoPicker&quot;, &quot;No media selected&quot;);\r\n                           }\r\n                       });\r\n\r\n            // Include only one of the following calls to launch(), depending on the types\r\n            // of media that you want to allow the user to choose from.\r\n\r\n             // Launch the photo picker and allow the user to choose images and videos.\r\n               pickMedia.launch(new PickVisualMediaRequest.Builder()\r\n                       **.setMediaType(new  ActivityResultContracts.PickVisualMedia.ImageAndVideo())**\r\n                       .build());\r\n           }\r\n       });\r\n    }\r\n}\r\n\r\n```\r\n\r\nThis code i got it from the Android developer Website :\r\nhttps://developer.android.com/training/data-storage/shared/photopicker\r\n\r\nbut Doesnt seem to work , and im not able to find any online solution.","title":"How to solve Photopicker error in android Studio?","body":"<p>I have the following code , im receiving an error :</p>\n<p><a href=\"https://i.stack.imgur.com/ZG54k.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<pre><code>package com.example.photopicker;\nimport androidx.activity.result.ActivityResultLauncher;\nimport androidx.activity.result.PickVisualMediaRequest;\nimport androidx.activity.result.contract.ActivityResultContracts;\nimport androidx.appcompat.app.AppCompatActivity;\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.view.View;\nimport android.widget.Button;\n\npublic class MainActivity extends AppCompatActivity {\n    Button addimage;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        addimage=findViewById(R.id.button_pick_photo);\n       addimage.setOnClickListener(new View.OnClickListener() {\n           @Override\n           public void onClick(View v) {\n            // Registers a photo picker activity launcher in single-select mode.\n               ActivityResultLauncher&lt;PickVisualMediaRequest&gt; pickMedia =\n                       registerForActivityResult(new ActivityResultContracts.PickVisualMedia(), uri -&gt; {\n                           // Callback is invoked after the user selects a media item or closes the\n                           // photo picker.\n                           if (uri != null) {\n                               Log.d(&quot;PhotoPicker&quot;, &quot;Selected URI: &quot; + uri);\n                           } else {\n                               Log.d(&quot;PhotoPicker&quot;, &quot;No media selected&quot;);\n                           }\n                       });\n\n            // Include only one of the following calls to launch(), depending on the types\n            // of media that you want to allow the user to choose from.\n\n             // Launch the photo picker and allow the user to choose images and videos.\n               pickMedia.launch(new PickVisualMediaRequest.Builder()\n                       **.setMediaType(new  ActivityResultContracts.PickVisualMedia.ImageAndVideo())**\n                       .build());\n           }\n       });\n    }\n}\n\n</code></pre>\n<p>This code i got it from the Android developer Website :\n<a href=\"https://developer.android.com/training/data-storage/shared/photopicker\" rel=\"nofollow noreferrer\">https://developer.android.com/training/data-storage/shared/photopicker</a></p>\n<p>but Doesnt seem to work , and im not able to find any online solution.</p>\n"},{"tags":["java","apache-spark","apache-spark-sql"],"comments":[{"owner":{"account_id":8324450,"reputation":17075,"user_id":6933993,"accept_rate":97,"display_name":"thebluephantom"},"score":0,"creation_date":1564141194,"post_id":57218528,"comment_id":100942864,"body_markdown":"pls show your .explain","body":"pls show your .explain"},{"owner":{"account_id":12496416,"reputation":78,"user_id":9096240,"display_name":"markbackhouse"},"score":0,"creation_date":1564160545,"post_id":57218528,"comment_id":100953044,"body_markdown":"This is theoretical. I don&#39;t have any code or operations to `.explain` but the schema and example problem above should suffice.","body":"This is theoretical. I don&#39;t have any code or operations to <code>.explain</code> but the schema and example problem above should suffice."},{"owner":{"account_id":8324450,"reputation":17075,"user_id":6933993,"accept_rate":97,"display_name":"thebluephantom"},"score":0,"creation_date":1564162995,"post_id":57218528,"comment_id":100953958,"body_markdown":"But clarify the term deeply nested? I missed the array","body":"But clarify the term deeply nested? I missed the array"},{"owner":{"account_id":12496416,"reputation":78,"user_id":9096240,"display_name":"markbackhouse"},"score":0,"creation_date":1564394339,"post_id":57218528,"comment_id":101002696,"body_markdown":"Well the list that contains the join term might be very far down inside my struct. Far enough down that exploding the struct fully would create a much larger number of rows than I had within my original Dataset.","body":"Well the list that contains the join term might be very far down inside my struct. Far enough down that exploding the struct fully would create a much larger number of rows than I had within my original Dataset."},{"owner":{"account_id":8324450,"reputation":17075,"user_id":6933993,"accept_rate":97,"display_name":"thebluephantom"},"score":0,"creation_date":1564395400,"post_id":57218528,"comment_id":101003269,"body_markdown":"Is not the number of occurrences  of nesting more a deciding factor? In any event you may need to explode more than once. If you do not know how many levels in advance I would talk to provider of data.","body":"Is not the number of occurrences  of nesting more a deciding factor? In any event you may need to explode more than once. If you do not know how many levels in advance I would talk to provider of data."},{"owner":{"account_id":8324450,"reputation":17075,"user_id":6933993,"accept_rate":97,"display_name":"thebluephantom"},"score":0,"creation_date":1564395733,"post_id":57218528,"comment_id":101003461,"body_markdown":"From the example provided I could not discern a deep nesting ...","body":"From the example provided I could not discern a deep nesting ..."},{"owner":{"account_id":8324450,"reputation":17075,"user_id":6933993,"accept_rate":97,"display_name":"thebluephantom"},"score":0,"creation_date":1564420359,"post_id":57218528,"comment_id":101016455,"body_markdown":"I am adding to the answer - I think this map help, but I am not sure as the question is not entirely clear.","body":"I am adding to the answer - I think this map help, but I am not sure as the question is not entirely clear."}],"answers":[{"comments":[{"owner":{"account_id":12496416,"reputation":78,"user_id":9096240,"display_name":"markbackhouse"},"score":0,"creation_date":1564160291,"post_id":57219536,"comment_id":100952931,"body_markdown":"But what if it&#39;s a _list_ of nested columns from a type struct? So one row might contain six &quot;joinable&quot; fields, but the next row contains seven, the next row contains one, and so on.\n\nThe example you&#39;ve provided contains a &quot;definite&quot; subcolumn and doesn&#39;t work for my shopping list problem.","body":"But what if it&#39;s a <i>list</i> of nested columns from a type struct? So one row might contain six &quot;joinable&quot; fields, but the next row contains seven, the next row contains one, and so on.  The example you&#39;ve provided contains a &quot;definite&quot; subcolumn and doesn&#39;t work for my shopping list problem."}],"tags":[],"owner":{"account_id":8324450,"reputation":17075,"user_id":6933993,"accept_rate":97,"display_name":"thebluephantom"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1564567693,"creation_date":1564141995,"answer_id":57219536,"question_id":57218528,"body_markdown":"**With nesting and no repeating groups**\r\n\r\nYou are dealing with a JOIN on DFs with one element being a column from a type struct. \r\n\r\n&gt; There is no issue doing that, i.e. you do not need to explode at all.\r\n&gt; You just need the . approach to get to that column.\r\n\r\nExecution issue are also not evident if you have sufficient resources allocated and fit within partitioning limits.\r\n\r\nFor guidance you can look at this post on this site: https://stackoverflow.com/questions/52013371/how-to-join-nested-columns-in-spark-with-usingcolumns\r\n\r\n**With a Nested Array**\r\n\r\nHowever, your theory is correct in that with a nested array that needs atomic JOINing you must use an explode. It&#39;s that simple. May be more than once. \r\n\r\nOnce again, no issues with performance provided enough resources and suitable partition sizes. Just takes time.\r\n\r\n***EDIT - although thrust of question not entirely clear***\r\n\r\nIf you are concerned that one needs to explode all the way down to desired element level, then that is not always the case. Consider this two level structure:\r\n\r\n    root\r\n     |-- director: string (nullable = true)\r\n     |-- films: array (nullable = true)\r\n     |    |-- element: struct (containsNull = true)\r\n     |    |    |-- actors: array (nullable = true)\r\n     |    |    |    |-- element: string (containsNull = true)\r\n     |    |    |-- name: string (nullable = true)\r\n\r\nYou can just explode 1) directly down to desired level first and then 2) possibly issue a final 2nd explode if that level was nested as well.\r\n\r\nBut I am not sure if this is your concern. POINT is therefore: navigate to lowest level, explode and than possibly another explode - if required, but it should be at max only two iterations required.\r\n\r\n    val flattened2 = df.select($&quot;director&quot;, explode($&quot;films.actors&quot;).as(&quot;actors_flat&quot;))\r\n     \r\n    val flattened3 = flattened2.select($&quot;director&quot;, explode($&quot;actors_flat&quot;).as(&quot;actors_flattened&quot;))\r\n\r\nWith a level deeper as well as well ok, but there are some finnicky Spark things for sure to consider, e.g. successive DFs and column naming issues that seem to rear their ugly head here and elsewhere.\r\n\r\n**General**\r\n\r\nFor Large - Large table JOINs (is this really the case here?) there is no quick efficient fix. MergeScan is normally what is used behind the scenes from my experience, but things keep changing per release.","title":"Is there an efficient way to join two large Datasets with (deeper) nested array field?","body":"<p><strong>With nesting and no repeating groups</strong></p>\n\n<p>You are dealing with a JOIN on DFs with one element being a column from a type struct. </p>\n\n<blockquote>\n  <p>There is no issue doing that, i.e. you do not need to explode at all.\n  You just need the . approach to get to that column.</p>\n</blockquote>\n\n<p>Execution issue are also not evident if you have sufficient resources allocated and fit within partitioning limits.</p>\n\n<p>For guidance you can look at this post on this site: <a href=\"https://stackoverflow.com/questions/52013371/how-to-join-nested-columns-in-spark-with-usingcolumns\">How to join nested columns in spark with usingColumns</a></p>\n\n<p><strong>With a Nested Array</strong></p>\n\n<p>However, your theory is correct in that with a nested array that needs atomic JOINing you must use an explode. It's that simple. May be more than once. </p>\n\n<p>Once again, no issues with performance provided enough resources and suitable partition sizes. Just takes time.</p>\n\n<p><strong><em>EDIT - although thrust of question not entirely clear</em></strong></p>\n\n<p>If you are concerned that one needs to explode all the way down to desired element level, then that is not always the case. Consider this two level structure:</p>\n\n<pre><code>root\n |-- director: string (nullable = true)\n |-- films: array (nullable = true)\n |    |-- element: struct (containsNull = true)\n |    |    |-- actors: array (nullable = true)\n |    |    |    |-- element: string (containsNull = true)\n |    |    |-- name: string (nullable = true)\n</code></pre>\n\n<p>You can just explode 1) directly down to desired level first and then 2) possibly issue a final 2nd explode if that level was nested as well.</p>\n\n<p>But I am not sure if this is your concern. POINT is therefore: navigate to lowest level, explode and than possibly another explode - if required, but it should be at max only two iterations required.</p>\n\n<pre><code>val flattened2 = df.select($\"director\", explode($\"films.actors\").as(\"actors_flat\"))\n\nval flattened3 = flattened2.select($\"director\", explode($\"actors_flat\").as(\"actors_flattened\"))\n</code></pre>\n\n<p>With a level deeper as well as well ok, but there are some finnicky Spark things for sure to consider, e.g. successive DFs and column naming issues that seem to rear their ugly head here and elsewhere.</p>\n\n<p><strong>General</strong></p>\n\n<p>For Large - Large table JOINs (is this really the case here?) there is no quick efficient fix. MergeScan is normally what is used behind the scenes from my experience, but things keep changing per release.</p>\n"}],"owner":{"account_id":12496416,"reputation":78,"user_id":9096240,"display_name":"markbackhouse"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":216,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1694028506,"creation_date":1564138208,"question_id":57218528,"body_markdown":"I&#39;m using Apache Spark with Java to join two big datasets. I&#39;ll try to give an example pair of datasets to lay out my problem. Let&#39;s say I have Table A and Table B, with schemas that look like:\r\n\r\n```\r\nTable A\r\nroot\r\n|-- shopper_name: string\r\n|-- shopping_list: struct\r\n|---|-- date: date \r\n|---|-- shopping_items: array\r\n|---|---|-- item_name: string\r\n```\r\n\r\nand\r\n\r\n```\r\nTable B\r\nroot\r\n|-- item_name: string\r\n|-- item_price: double\r\n```\r\n\r\nSo I want to join these two tables on the deeply nested field `item_name` so that I can work out the price of each shopper&#39;s shopping list. The problem is that I can&#39;t just create an additional column on Table A called `item_name`, as there could be many `item_name` objects within the `shopping_items` array.\r\n\r\nOne simple solution would be to explode Table A (de-normalise it), so that I have a single row for every `item_name`, do the join, then group by `shopper_name` and sum. \r\n\r\nMy question is: does Spark (and more specifically Spark for Java &#128556;) have a better way of doing this that doesn&#39;t feel so inefficient? Can Spark do this sort of explosion on two datasets with hundreds of millions/billions of rows and parallelise it nicely? ","title":"Is there an efficient way to join two large Datasets with (deeper) nested array field?","body":"<p>I'm using Apache Spark with Java to join two big datasets. I'll try to give an example pair of datasets to lay out my problem. Let's say I have Table A and Table B, with schemas that look like:</p>\n\n<pre><code>Table A\nroot\n|-- shopper_name: string\n|-- shopping_list: struct\n|---|-- date: date \n|---|-- shopping_items: array\n|---|---|-- item_name: string\n</code></pre>\n\n<p>and</p>\n\n<pre><code>Table B\nroot\n|-- item_name: string\n|-- item_price: double\n</code></pre>\n\n<p>So I want to join these two tables on the deeply nested field <code>item_name</code> so that I can work out the price of each shopper's shopping list. The problem is that I can't just create an additional column on Table A called <code>item_name</code>, as there could be many <code>item_name</code> objects within the <code>shopping_items</code> array.</p>\n\n<p>One simple solution would be to explode Table A (de-normalise it), so that I have a single row for every <code>item_name</code>, do the join, then group by <code>shopper_name</code> and sum. </p>\n\n<p>My question is: does Spark (and more specifically Spark for Java 😬) have a better way of doing this that doesn't feel so inefficient? Can Spark do this sort of explosion on two datasets with hundreds of millions/billions of rows and parallelise it nicely? </p>\n"},{"tags":["java","kubernetes","jboss","wildfly","keycloak"],"comments":[{"owner":{"account_id":3214004,"reputation":1859,"user_id":4871676,"accept_rate":90,"display_name":"Plain_Dude_Sleeping_Alone"},"score":0,"creation_date":1652760234,"post_id":72267969,"comment_id":127677612,"body_markdown":"In the first error looks like there is something not proper in the standalone.xml, could be the address definition is not defined (missing).","body":"In the first error looks like there is something not proper in the standalone.xml, could be the address definition is not defined (missing)."},{"owner":{"account_id":219754,"reputation":12930,"user_id":476828,"accept_rate":51,"display_name":"Subodh Joshi"},"score":0,"creation_date":1652760401,"post_id":72267969,"comment_id":127677631,"body_markdown":"@Plain_Dude_Sleeping_Alone This Deployment Through the Helm Chart ,Downloaded from https://github.com/codecentric/helm-charts/releases/download/keycloak-18.1.0/keycloak-18.1.0.tgz.If u want standalone.xml i will add that also.","body":"@Plain_Dude_Sleeping_Alone This Deployment Through the Helm Chart ,Downloaded from <a href=\"https://github.com/codecentric/helm-charts/releases/download/keycloak-18.1.0/keycloak-18.1.0.tgz.If\" rel=\"nofollow noreferrer\">github.com/codecentric/helm-charts/releases/download/&hellip;</a> u want standalone.xml i will add that also."},{"owner":{"account_id":3214004,"reputation":1859,"user_id":4871676,"accept_rate":90,"display_name":"Plain_Dude_Sleeping_Alone"},"score":0,"creation_date":1652760783,"post_id":72267969,"comment_id":127677676,"body_markdown":"It&#39;s just a hint (sort of). Something is not configured correctly in the definition. I have no idea about the Keyloack. But if you see the error it complained about something with `&lt;Interface ..&gt;` and  `&lt;inet-address..&gt;` in the standalone.xml. Look at  that `Failed to start advertise listener: java.net.SocketException: bad argument for IP_MULTICAST_IF: address not bound to any interface at java.base/java.net.`","body":"It&#39;s just a hint (sort of). Something is not configured correctly in the definition. I have no idea about the Keyloack. But if you see the error it complained about something with <code>&lt;Interface ..&gt;</code> and  <code>&lt;inet-address..&gt;</code> in the standalone.xml. Look at  that <code>Failed to start advertise listener: java.net.SocketException: bad argument for IP_MULTICAST_IF: address not bound to any interface at java.base&#47;java.net.</code>"},{"owner":{"account_id":219754,"reputation":12930,"user_id":476828,"accept_rate":51,"display_name":"Subodh Joshi"},"score":0,"creation_date":1652760873,"post_id":72267969,"comment_id":127677690,"body_markdown":"In standalone.xml ..its something like this `&lt;interfaces&gt;\n        &lt;interface name=&quot;management&quot;&gt;\n            &lt;inet-address value=&quot;${jboss.bind.address.management:127.0.0.1}&quot;/&gt;\n        &lt;/interface&gt;\n        &lt;interface name=&quot;public&quot;&gt;\n            &lt;inet-address value=&quot;${jboss.bind.address:127.0.0.1}&quot;/&gt;\n        &lt;/interface&gt;\n    &lt;/interfaces&gt;`","body":"In standalone.xml ..its something like this <code>&lt;interfaces&gt;         &lt;interface name=&quot;management&quot;&gt;             &lt;inet-address value=&quot;${jboss.bind.address.management:127.0.0.1}&quot;&#47;&gt;         &lt;&#47;interface&gt;         &lt;interface name=&quot;public&quot;&gt;             &lt;inet-address value=&quot;${jboss.bind.address:127.0.0.1}&quot;&#47;&gt;         &lt;&#47;interface&gt;     &lt;&#47;interfaces&gt;</code>"}],"answers":[{"comments":[{"owner":{"account_id":219754,"reputation":12930,"user_id":476828,"accept_rate":51,"display_name":"Subodh Joshi"},"score":0,"creation_date":1653364761,"post_id":72339202,"comment_id":127827914,"body_markdown":"In Single machine deployment ,it can be done .But how it can be achieve in Kubernetes environment ?","body":"In Single machine deployment ,it can be done .But how it can be achieve in Kubernetes environment ?"}],"tags":[],"owner":{"account_id":11905637,"reputation":101,"user_id":8712266,"display_name":"yousef"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1653235306,"creation_date":1653235306,"answer_id":72339202,"question_id":72267969,"body_markdown":"Try to add a new private interface in the interfaces section.\r\n\r\n        &lt;interface name=&quot;private&quot;&gt;\r\n            &lt;inet-address value=&quot;&lt;your private address&gt;&quot;/&gt;\r\n        &lt;/interface&gt;","title":"java.net.SocketException: bad argument for IP_MULTICAST_IF: address not bound to any interface","body":"<p>Try to add a new private interface in the interfaces section.</p>\n<pre><code>    &lt;interface name=&quot;private&quot;&gt;\n        &lt;inet-address value=&quot;&lt;your private address&gt;&quot;/&gt;\n    &lt;/interface&gt;\n</code></pre>\n"}],"owner":{"account_id":219754,"reputation":12930,"user_id":476828,"accept_rate":51,"display_name":"Subodh Joshi"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1562,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1694028116,"creation_date":1652759031,"question_id":72267969,"body_markdown":"I am deploying Keycloak with the help of Helm Chart But Wildfly Stop with the following errors\r\n\r\n&gt; [0m[0m03:34:19,891 INFO  [org.jboss.as.patching] (MSC service thread\r\n&gt; 1-2) WFLYPAT0050: Keycloak cumulative patch ID is: base, one-off\r\n&gt; patches include: none [0m[0m03:34:20,086 INFO \r\n&gt; [org.jboss.modcluster] (ServerService Thread Pool -- 56)\r\n&gt; MODCLUSTER000001: Initializing mod_cluster version 1.4.4.Final\r\n&gt; [0m[31m03:34:20,089 ERROR [org.jboss.modcluster] (ServerService\r\n&gt; Thread Pool -- 56) MODCLUSTER000034: Failed to start advertise\r\n&gt; listener: java.net.SocketException: bad argument for IP_MULTICAST_IF:\r\n&gt; address not bound to any interface \tat\r\n&gt; java.base/java.net.PlainDatagramSocketImpl.socketSetOption0(Native\r\n&gt; Method) \tat\r\n&gt; java.base/java.net.PlainDatagramSocketImpl.socketSetOption(PlainDatagramSocketImpl.java:91)\r\n&gt; \tat\r\n&gt; java.base/java.net.AbstractPlainDatagramSocketImpl.setOption(AbstractPlainDatagramSocketImpl.java:371)\r\n&gt; \tat\r\n&gt; java.base/java.net.MulticastSocket.setInterface(MulticastSocket.java:477)\r\n&gt; \tat\r\n&gt; org.jboss.mod_cluster.core@1.4.4.Final//org.jboss.modcluster.advertise.impl.AdvertiseListenerImpl.init(AdvertiseListenerImpl.java:151)\r\n&gt; \tat\r\n&gt; org.jboss.mod_cluster.core@1.4.4.Final//org.jboss.modcluster.advertise.impl.AdvertiseListenerImpl.start(AdvertiseListenerImpl.java:161)\r\n&gt; \tat\r\n&gt; org.jboss.mod_cluster.core@1.4.4.Final//org.jboss.modcluster.ModClusterService.init(ModClusterService.java:166)\r\n&gt; \tat\r\n&gt; org.wildfly.mod_cluster.undertow@26.0.1.Final//org.wildfly.mod_cluster.undertow.UndertowEventHandlerAdapterService.start(UndertowEventHandlerAdapterService.java:83)\r\n&gt; \tat\r\n&gt; org.wildfly.clustering.service@26.0.1.Final//org.wildfly.clustering.service.AsyncServiceConfigurator$AsyncService.lambda$start$0(AsyncServiceConfigurator.java:117)\r\n&gt; \tat\r\n&gt; org.jboss.threads@2.4.0.Final//org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\r\n&gt; \tat\r\n&gt; org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)\r\n&gt; \tat\r\n&gt; org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)\r\n&gt; \tat\r\n&gt; org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)\r\n&gt; \tat java.base/java.lang.Thread.run(Thread.java:829) \tat\r\n&gt; org.jboss.threads@2.4.0.Final//org.jboss.threads.JBossThread.run(JBossThread.java:513)\r\n&gt; \r\n&gt; [0m[0m03:34:20,095 INFO  [org.wildfly.extension.undertow] (MSC\r\n&gt; service thread 1-2) WFLYUT0006: Undertow HTTPS listener https\r\n&gt; listening on [0:0:0:0:0:0:0:0]:8443 [0m[0m03:34:20,095 INFO \r\n&gt; [org.jboss.as.ejb3] (MSC service thread 1-2) WFLYEJB0493: Jakarta\r\n&gt; Enterprise Beans subsystem suspension complete [0m[0m03:34:20,194\r\n&gt; INFO  [org.jboss.as.server.deployment] (MSC service thread 1-1)\r\n&gt; WFLYSRV0027: Starting deployment of &quot;keycloak-server.war&quot;\r\n&gt; (runtime-name: &quot;keycloak-server.war&quot;) [0m[0m03:34:20,197 INFO \r\n&gt; [org.jboss.as.server.deployment.scanner] (MSC service thread 1-1)\r\n&gt; WFLYDS0013: Started FileSystemDeploymentService for directory\r\n&gt; /opt/jboss/keycloak/standalone/deployments [0m[0m03:34:20,599 INFO \r\n&gt; [org.jboss.as.connector.subsystems.datasources] (MSC service thread\r\n&gt; 1-2) WFLYJCA0001: Bound data source [java:jboss/datasources/ExampleDS]\r\n&gt; [0m[0m03:34:20,599 INFO \r\n&gt; [org.jboss.as.connector.subsystems.datasources] (MSC service thread\r\n&gt; 1-2) WFLYJCA0001: Bound data source\r\n&gt; [java:jboss/datasources/KeycloakDS] [0m[33m03:34:22,285 WARN \r\n&gt; [org.jgroups.protocols.UDP] (ServerService Thread Pool -- 56)\r\n&gt; JGRP000015: the receive buffer of socket ManagedMulticastSocketBinding\r\n&gt; was set to 20.00MB, but the OS only allocated 16.78MB\r\n&gt; [0m[33m03:34:22,286 WARN  [org.jgroups.protocols.UDP] (ServerService\r\n&gt; Thread Pool -- 56) JGRP000015: the receive buffer of socket\r\n&gt; ManagedMulticastSocketBinding was set to 25.00MB, but the OS only\r\n&gt; allocated 16.78MB [0m[0m03:34:25,293 INFO \r\n&gt; [org.jgroups.protocols.pbcast.GMS] (ServerService Thread Pool -- 56)\r\n&gt; keycloak-v6-0: no members discovered after 3003 ms: creating cluster\r\n&gt; as coordinator\r\n\r\nIn my Value.yaml i added \r\n\r\n     - name: JAVA_OPTS\r\n                  value: &#39;-Djboss.bind.address=0.0.0.0&#39;\r\n\r\nIf i remove `JAVA_OPTS` it will fail to connect with DB as well and fail with following error\r\n\r\n&gt; 03:42:21,999 ERROR [org.jboss.msc.service.fail] (MSC service thread\r\n&gt; 1-2) MSC000001: Failed to start service\r\n&gt; org.wildfly.network.interface.private:\r\n&gt; org.jboss.msc.service.StartException in service\r\n&gt; org.wildfly.network.interface.private: WFLYSRV0082: failed to resolve\r\n&gt; interface private \tat\r\n&gt; org.jboss.as.server@18.0.4.Final//org.jboss.as.server.services.net.NetworkInterfaceService.start(NetworkInterfaceService.java:98)\r\n&gt; \tat\r\n&gt; org.jboss.msc@1.4.13.Final//org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1739)\r\n&gt; \tat\r\n&gt; org.jboss.msc@1.4.13.Final//org.jboss.msc.service.ServiceControllerImpl$StartTask.execute(ServiceControllerImpl.java:1701)\r\n&gt; \tat\r\n&gt; org.jboss.msc@1.4.13.Final//org.jboss.msc.service.ServiceControllerImpl$ControllerTask.run(ServiceControllerImpl.java:1559)\r\n&gt; \tat\r\n&gt; org.jboss.threads@2.4.0.Final//org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\r\n&gt; \tat\r\n&gt; org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)\r\n&gt; \tat\r\n&gt; org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)\r\n&gt; \tat\r\n&gt; org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1363)\r\n&gt; \tat java.base/java.lang.Thread.run(Thread.java:829) 03:42:22,092 ERROR\r\n&gt; [org.jboss.as.controller.management-operation] (Controller Boot\r\n&gt; Thread) WFLYCTL0013: Operation (&quot;add&quot;) failed - address:\r\n&gt; ([(&quot;interface&quot; =&gt; &quot;private&quot;)]) - failure description: {&quot;WFLYCTL0080:\r\n&gt; Failed services&quot; =&gt; {&quot;org.wildfly.network.interface.private&quot; =&gt;\r\n&gt; &quot;WFLYSRV0082: failed to resolve interface private&quot;}} 03:42:22,391 INFO\r\n&gt; [org.jboss.as.server] (ServerService Thread Pool -- 45) WFLYSRV0010:\r\n&gt; Deployed &quot;keycloak-server.war&quot; (runtime-name : &quot;keycloak-server.war&quot;)\r\n&gt; 03:42:22,392 INFO  [org.jboss.as.controller] (Controller Boot Thread)\r\n&gt; WFLYCTL0183: Service status report WFLYCTL0186:   Services which\r\n&gt; failed to start:      service org.wildfly.network.interface.private:\r\n&gt; WFLYSRV0082: failed to resolve interface private WFLYCTL0448: 47\r\n&gt; additional services are down due to their dependencies being missing\r\n&gt; or failed 03:42:22,702 INFO  [org.jboss.as.server] (Controller Boot\r\n&gt; Thread) WFLYSRV0212: Resuming server 03:42:22,785 ERROR [org.jboss.as]\r\n&gt; (Controller Boot Thread) WFLYSRV0026: Keycloak 16.1.1 (WildFly Core\r\n&gt; 18.0.4.Final) started (with errors) in 18700ms - Started 471 of 930 services (54 services failed or missing dependencies, 694 services are\r\n&gt; lazy, passive or on-demand)\r\n\r\n - Keycloak 16.1.1 \r\n - WildFly Core 18.0.4.Final\r\n - Kubernets ","title":"java.net.SocketException: bad argument for IP_MULTICAST_IF: address not bound to any interface","body":"<p>I am deploying Keycloak with the help of Helm Chart But Wildfly Stop with the following errors</p>\n<blockquote>\n<p>[0m[0m03:34:19,891 INFO  [org.jboss.as.patching] (MSC service thread\n1-2) WFLYPAT0050: Keycloak cumulative patch ID is: base, one-off\npatches include: none [0m[0m03:34:20,086 INFO\n[org.jboss.modcluster] (ServerService Thread Pool -- 56)\nMODCLUSTER000001: Initializing mod_cluster version 1.4.4.Final\n[0m[31m03:34:20,089 ERROR [org.jboss.modcluster] (ServerService\nThread Pool -- 56) MODCLUSTER000034: Failed to start advertise\nlistener: java.net.SocketException: bad argument for IP_MULTICAST_IF:\naddress not bound to any interface    at\njava.base/java.net.PlainDatagramSocketImpl.socketSetOption0(Native\nMethod)   at\njava.base/java.net.PlainDatagramSocketImpl.socketSetOption(PlainDatagramSocketImpl.java:91)\nat\njava.base/java.net.AbstractPlainDatagramSocketImpl.setOption(AbstractPlainDatagramSocketImpl.java:371)\nat\njava.base/java.net.MulticastSocket.setInterface(MulticastSocket.java:477)\nat\norg.jboss.mod_cluster.core@1.4.4.Final//org.jboss.modcluster.advertise.impl.AdvertiseListenerImpl.init(AdvertiseListenerImpl.java:151)\nat\norg.jboss.mod_cluster.core@1.4.4.Final//org.jboss.modcluster.advertise.impl.AdvertiseListenerImpl.start(AdvertiseListenerImpl.java:161)\nat\norg.jboss.mod_cluster.core@1.4.4.Final//org.jboss.modcluster.ModClusterService.init(ModClusterService.java:166)\nat\norg.wildfly.mod_cluster.undertow@26.0.1.Final//org.wildfly.mod_cluster.undertow.UndertowEventHandlerAdapterService.start(UndertowEventHandlerAdapterService.java:83)\nat\norg.wildfly.clustering.service@26.0.1.Final//org.wildfly.clustering.service.AsyncServiceConfigurator$AsyncService.lambda$start$0(AsyncServiceConfigurator.java:117)\nat\norg.jboss.threads@2.4.0.Final//org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\nat\norg.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)\nat\norg.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)\nat\norg.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)\nat java.base/java.lang.Thread.run(Thread.java:829)  at\norg.jboss.threads@2.4.0.Final//org.jboss.threads.JBossThread.run(JBossThread.java:513)</p>\n<p>[0m[0m03:34:20,095 INFO  [org.wildfly.extension.undertow] (MSC\nservice thread 1-2) WFLYUT0006: Undertow HTTPS listener https\nlistening on [0:0:0:0:0:0:0:0]:8443 [0m[0m03:34:20,095 INFO\n[org.jboss.as.ejb3] (MSC service thread 1-2) WFLYEJB0493: Jakarta\nEnterprise Beans subsystem suspension complete [0m[0m03:34:20,194\nINFO  [org.jboss.as.server.deployment] (MSC service thread 1-1)\nWFLYSRV0027: Starting deployment of &quot;keycloak-server.war&quot;\n(runtime-name: &quot;keycloak-server.war&quot;) [0m[0m03:34:20,197 INFO\n[org.jboss.as.server.deployment.scanner] (MSC service thread 1-1)\nWFLYDS0013: Started FileSystemDeploymentService for directory\n/opt/jboss/keycloak/standalone/deployments [0m[0m03:34:20,599 INFO\n[org.jboss.as.connector.subsystems.datasources] (MSC service thread\n1-2) WFLYJCA0001: Bound data source [java:jboss/datasources/ExampleDS]\n[0m[0m03:34:20,599 INFO\n[org.jboss.as.connector.subsystems.datasources] (MSC service thread\n1-2) WFLYJCA0001: Bound data source\n[java:jboss/datasources/KeycloakDS] [0m[33m03:34:22,285 WARN\n[org.jgroups.protocols.UDP] (ServerService Thread Pool -- 56)\nJGRP000015: the receive buffer of socket ManagedMulticastSocketBinding\nwas set to 20.00MB, but the OS only allocated 16.78MB\n[0m[33m03:34:22,286 WARN  [org.jgroups.protocols.UDP] (ServerService\nThread Pool -- 56) JGRP000015: the receive buffer of socket\nManagedMulticastSocketBinding was set to 25.00MB, but the OS only\nallocated 16.78MB [0m[0m03:34:25,293 INFO\n[org.jgroups.protocols.pbcast.GMS] (ServerService Thread Pool -- 56)\nkeycloak-v6-0: no members discovered after 3003 ms: creating cluster\nas coordinator</p>\n</blockquote>\n<p>In my Value.yaml i added</p>\n<pre><code> - name: JAVA_OPTS\n              value: '-Djboss.bind.address=0.0.0.0'\n</code></pre>\n<p>If i remove <code>JAVA_OPTS</code> it will fail to connect with DB as well and fail with following error</p>\n<blockquote>\n<p>03:42:21,999 ERROR [org.jboss.msc.service.fail] (MSC service thread\n1-2) MSC000001: Failed to start service\norg.wildfly.network.interface.private:\norg.jboss.msc.service.StartException in service\norg.wildfly.network.interface.private: WFLYSRV0082: failed to resolve\ninterface private     at\norg.jboss.as.server@18.0.4.Final//org.jboss.as.server.services.net.NetworkInterfaceService.start(NetworkInterfaceService.java:98)\nat\norg.jboss.msc@1.4.13.Final//org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1739)\nat\norg.jboss.msc@1.4.13.Final//org.jboss.msc.service.ServiceControllerImpl$StartTask.execute(ServiceControllerImpl.java:1701)\nat\norg.jboss.msc@1.4.13.Final//org.jboss.msc.service.ServiceControllerImpl$ControllerTask.run(ServiceControllerImpl.java:1559)\nat\norg.jboss.threads@2.4.0.Final//org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\nat\norg.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)\nat\norg.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)\nat\norg.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1363)\nat java.base/java.lang.Thread.run(Thread.java:829) 03:42:22,092 ERROR\n[org.jboss.as.controller.management-operation] (Controller Boot\nThread) WFLYCTL0013: Operation (&quot;add&quot;) failed - address:\n([(&quot;interface&quot; =&gt; &quot;private&quot;)]) - failure description: {&quot;WFLYCTL0080:\nFailed services&quot; =&gt; {&quot;org.wildfly.network.interface.private&quot; =&gt;\n&quot;WFLYSRV0082: failed to resolve interface private&quot;}} 03:42:22,391 INFO\n[org.jboss.as.server] (ServerService Thread Pool -- 45) WFLYSRV0010:\nDeployed &quot;keycloak-server.war&quot; (runtime-name : &quot;keycloak-server.war&quot;)\n03:42:22,392 INFO  [org.jboss.as.controller] (Controller Boot Thread)\nWFLYCTL0183: Service status report WFLYCTL0186:   Services which\nfailed to start:      service org.wildfly.network.interface.private:\nWFLYSRV0082: failed to resolve interface private WFLYCTL0448: 47\nadditional services are down due to their dependencies being missing\nor failed 03:42:22,702 INFO  [org.jboss.as.server] (Controller Boot\nThread) WFLYSRV0212: Resuming server 03:42:22,785 ERROR [org.jboss.as]\n(Controller Boot Thread) WFLYSRV0026: Keycloak 16.1.1 (WildFly Core\n18.0.4.Final) started (with errors) in 18700ms - Started 471 of 930 services (54 services failed or missing dependencies, 694 services are\nlazy, passive or on-demand)</p>\n</blockquote>\n<ul>\n<li>Keycloak 16.1.1</li>\n<li>WildFly Core 18.0.4.Final</li>\n<li>Kubernets</li>\n</ul>\n"},{"tags":["java","windows","scala"],"answers":[{"tags":[],"owner":{"account_id":7034556,"reputation":12335,"user_id":5389127,"display_name":"Ga&#235;l J"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694028087,"creation_date":1694028087,"answer_id":77054724,"question_id":77049265,"body_markdown":"&gt; Illegal char &lt;:&gt; at index 2:  C:\\Java\\\r\n\r\nIf you pay attention to the error message, you&#39;ll see that `:` being at index 2 means the path that Java is trying to parse is actually starting with ` C:`, i.e. there&#39;s an extra character in position 0.\r\n\r\nCheck your `JAVA_HOME` environment variable or whatever place this path is defined and remove the extra first character.\r\n\r\n-----\r\n\r\nRelated to:\r\n- https://stackoverflow.com/questions/9834776/java-nio-file-path-issue\r\n- https://stackoverflow.com/questions/56736003/why-am-i-getting-this-invalidpathexception","title":"When issuing scala from cmd the InvalidPathException occured","body":"<blockquote>\n<p>Illegal char &lt;:&gt; at index 2:  C:\\Java\\</p>\n</blockquote>\n<p>If you pay attention to the error message, you'll see that <code>:</code> being at index 2 means the path that Java is trying to parse is actually starting with <code> C:</code>, i.e. there's an extra character in position 0.</p>\n<p>Check your <code>JAVA_HOME</code> environment variable or whatever place this path is defined and remove the extra first character.</p>\n<hr />\n<p>Related to:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/9834776/java-nio-file-path-issue\">Java NIO file path issue</a></li>\n<li><a href=\"https://stackoverflow.com/questions/56736003/why-am-i-getting-this-invalidpathexception\">Why am I getting this InvalidPathException</a></li>\n</ul>\n"}],"owner":{"account_id":29376516,"reputation":1,"user_id":22507926,"display_name":"EltonZhang"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1694028103,"creation_date":1693979083,"question_id":77049265,"body_markdown":"When I tried to issued scala from cmd, the following exception was reported.\r\nI have tried different version of Java, from JDK20, JDK17 to this old JDK1.8, but the error persisted.\r\n\r\n\r\n```\r\nException in thread &quot;main&quot; java.nio.file.InvalidPathException: Illegal char &lt;:&gt; at index 2:  C:\\Java\\jdk1.8.0_341\\lib\\tools.jar\r\n    at sun.nio.fs.WindowsPathParser.normalize(WindowsPathParser.java:182)\r\n    at sun.nio.fs.WindowsPathParser.parse(WindowsPathParser.java:153)\r\n    at sun.nio.fs.WindowsPathParser.parse(WindowsPathParser.java:77)\r\n    at sun.nio.fs.WindowsPath.parse(WindowsPath.java:94)\r\n    at sun.nio.fs.WindowsFileSystem.getPath(WindowsFileSystem.java:255)\r\n    at java.nio.file.Paths.get(Paths.java:84)\r\n    at dotty.tools.dotc.core.MacroClassLoader$.$anonfun$1(MacroClassLoader.scala:25)\r\n    at scala.collection.immutable.List.map(List.scala:250)\r\n    at dotty.tools.dotc.core.MacroClassLoader$.makeMacroClassLoader(MacroClassLoader.scala:25)\r\n    at dotty.tools.dotc.core.MacroClassLoader$.init(MacroClassLoader.scala:19)\r\n    at dotty.tools.dotc.Driver.setup(Driver.scala:77)\r\n    at dotty.tools.repl.ReplDriver.setupRootCtx(ReplDriver.scala:89)\r\n    at dotty.tools.repl.ReplDriver.initialCtx(ReplDriver.scala:85)\r\n    at dotty.tools.repl.ReplDriver.resetToInitial(ReplDriver.scala:111)\r\n    at dotty.tools.repl.ReplDriver.&lt;init&gt;(ReplDriver.scala:126)\r\n    at dotty.tools.repl.Main$.main(Main.scala:7)\r\n    at dotty.tools.MainGenericRunner$.run$1(MainGenericRunner.scala:193)\r\n    at dotty.tools.MainGenericRunner$.process(MainGenericRunner.scala:270)\r\n    at dotty.tools.MainGenericRunner$.main(MainGenericRunner.scala:281)\r\n    at dotty.tools.MainGenericRunner.main(MainGenericRunner.scala)\r\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    at java.lang.reflect.Method.invoke(Method.java:498)\r\n    at coursier.bootstrap.launcher.a.a(Unknown Source)\r\n    at coursier.bootstrap.launcher.Launcher.main(Unknown Source)\r\n```\r\n\r\nI have reinstalled Java and Scala, but cannot resolve the problem.","title":"When issuing scala from cmd the InvalidPathException occured","body":"<p>When I tried to issued scala from cmd, the following exception was reported.\nI have tried different version of Java, from JDK20, JDK17 to this old JDK1.8, but the error persisted.</p>\n<pre><code>Exception in thread &quot;main&quot; java.nio.file.InvalidPathException: Illegal char &lt;:&gt; at index 2:  C:\\Java\\jdk1.8.0_341\\lib\\tools.jar\n    at sun.nio.fs.WindowsPathParser.normalize(WindowsPathParser.java:182)\n    at sun.nio.fs.WindowsPathParser.parse(WindowsPathParser.java:153)\n    at sun.nio.fs.WindowsPathParser.parse(WindowsPathParser.java:77)\n    at sun.nio.fs.WindowsPath.parse(WindowsPath.java:94)\n    at sun.nio.fs.WindowsFileSystem.getPath(WindowsFileSystem.java:255)\n    at java.nio.file.Paths.get(Paths.java:84)\n    at dotty.tools.dotc.core.MacroClassLoader$.$anonfun$1(MacroClassLoader.scala:25)\n    at scala.collection.immutable.List.map(List.scala:250)\n    at dotty.tools.dotc.core.MacroClassLoader$.makeMacroClassLoader(MacroClassLoader.scala:25)\n    at dotty.tools.dotc.core.MacroClassLoader$.init(MacroClassLoader.scala:19)\n    at dotty.tools.dotc.Driver.setup(Driver.scala:77)\n    at dotty.tools.repl.ReplDriver.setupRootCtx(ReplDriver.scala:89)\n    at dotty.tools.repl.ReplDriver.initialCtx(ReplDriver.scala:85)\n    at dotty.tools.repl.ReplDriver.resetToInitial(ReplDriver.scala:111)\n    at dotty.tools.repl.ReplDriver.&lt;init&gt;(ReplDriver.scala:126)\n    at dotty.tools.repl.Main$.main(Main.scala:7)\n    at dotty.tools.MainGenericRunner$.run$1(MainGenericRunner.scala:193)\n    at dotty.tools.MainGenericRunner$.process(MainGenericRunner.scala:270)\n    at dotty.tools.MainGenericRunner$.main(MainGenericRunner.scala:281)\n    at dotty.tools.MainGenericRunner.main(MainGenericRunner.scala)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at coursier.bootstrap.launcher.a.a(Unknown Source)\n    at coursier.bootstrap.launcher.Launcher.main(Unknown Source)\n</code></pre>\n<p>I have reinstalled Java and Scala, but cannot resolve the problem.</p>\n"},{"tags":["java","c#","multithreading","winforms"],"comments":[{"owner":{"account_id":5973279,"reputation":3739,"user_id":4695007,"accept_rate":75,"display_name":"Alex"},"score":0,"creation_date":1507615727,"post_id":46659411,"comment_id":80267858,"body_markdown":"In c# events are synchronous. You must use TPL in order not to block the UI thread.\nAbout the second point, i have no idea what frame means in your context. Show some code.","body":"In c# events are synchronous. You must use TPL in order not to block the UI thread. About the second point, i have no idea what frame means in your context. Show some code."},{"owner":{"account_id":3990120,"reputation":963,"user_id":3563533,"accept_rate":50,"display_name":"Ali Kianinejad"},"score":0,"creation_date":1507617911,"post_id":46659411,"comment_id":80268833,"body_markdown":"@Alex Each Camera Frame is just a Bitmap Image","body":"@Alex Each Camera Frame is just a Bitmap Image"}],"answers":[{"comments":[{"owner":{"account_id":74289,"reputation":28069,"user_id":213550,"accept_rate":100,"display_name":"VMAtm"},"score":0,"creation_date":1507654089,"post_id":46660362,"comment_id":80292261,"body_markdown":"`TPL Dataflow` is also an option instead of `Akka.Net`","body":"<code>TPL Dataflow</code> is also an option instead of <code>Akka.Net</code>"}],"tags":[],"owner":{"account_id":3380710,"reputation":544,"user_id":2837810,"accept_rate":100,"display_name":"Jigar"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1507618506,"creation_date":1507618506,"answer_id":46660362,"question_id":46659411,"body_markdown":"You can use [Rx.Net][1] for event driven non blocking applications. \r\n\r\nYou can also consider using `async` and `await` language constructs in C#. \r\n\r\nIf you want to do Actor based programming you can use [Akka.NET][2]\r\n\r\n\r\n  [1]: https://github.com/Reactive-Extensions/Rx.NET\r\n  [2]: http://getakka.net/","title":"Delivery guarantee and automatic threading publisher/subscriber c#","body":"<p>You can use <a href=\"https://github.com/Reactive-Extensions/Rx.NET\" rel=\"nofollow noreferrer\">Rx.Net</a> for event driven non blocking applications. </p>\n\n<p>You can also consider using <code>async</code> and <code>await</code> language constructs in C#. </p>\n\n<p>If you want to do Actor based programming you can use <a href=\"http://getakka.net/\" rel=\"nofollow noreferrer\">Akka.NET</a></p>\n"}],"owner":{"account_id":3990120,"reputation":963,"user_id":3563533,"accept_rate":50,"display_name":"Ali Kianinejad"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":120,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1694027439,"creation_date":1507614486,"question_id":46659411,"body_markdown":"I am Java programmer and for a project, I should start C# Windows Forms application programming.\r\n\r\nIn java we have frameworks such as dropwizard. These frameworks manage threading individually or in vertx we have event bus and with that, we can implement pub/sub and producer/consumer in an easiest way and we have delivery guarantee and automatic thread management (for each message create new thread if needed)\r\n\r\nI should solve this problem:\r\n\r\n    Frame Captured By Camera, do IO, do another IO -&gt; First DoSome Image Processing -&gt; Show on Form Picture Box -&gt; Second Image Processing -&gt; Match Similar Frames And Save in Data Structure\r\n\r\neach Image Processing has a lot&#39;s of computation and each Frame have its own flow frames can process simultaneously and each processing Unit can work separately.\r\n\r\nI decided to use event-based programming in C#; after image captured an event raised by a function this event registered by First Image Processing Module and after First Image Processing Module done its work rise event to show image on Form and rise another event to pass data to Second Image Processing Unit \r\n\r\nBut I have a different problem: \r\n\r\n1. I know captured image will be shown with delay because of first image processing unit computation time but I see a lot of lags in showing image \r\n2. I missed some frames but I don&#39;t know why\r\n\r\nWhat is the best solution to solve these problems?\r\n\r\nEach camera frame is just a bitmap image.\r\n\r\nI have an event `MyEvent` and I have a static int id that starts with 0 and increments when raising event.\r\n\r\nAnd register 4 function to handle this event.\r\n\r\nAnd print id in event handler but missing some ids in some handlers randomly","title":"Delivery guarantee and automatic threading publisher/subscriber c#","body":"<p>I am Java programmer and for a project, I should start C# Windows Forms application programming.</p>\n<p>In java we have frameworks such as dropwizard. These frameworks manage threading individually or in vertx we have event bus and with that, we can implement pub/sub and producer/consumer in an easiest way and we have delivery guarantee and automatic thread management (for each message create new thread if needed)</p>\n<p>I should solve this problem:</p>\n<pre><code>Frame Captured By Camera, do IO, do another IO -&gt; First DoSome Image Processing -&gt; Show on Form Picture Box -&gt; Second Image Processing -&gt; Match Similar Frames And Save in Data Structure\n</code></pre>\n<p>each Image Processing has a lot's of computation and each Frame have its own flow frames can process simultaneously and each processing Unit can work separately.</p>\n<p>I decided to use event-based programming in C#; after image captured an event raised by a function this event registered by First Image Processing Module and after First Image Processing Module done its work rise event to show image on Form and rise another event to pass data to Second Image Processing Unit</p>\n<p>But I have a different problem:</p>\n<ol>\n<li>I know captured image will be shown with delay because of first image processing unit computation time but I see a lot of lags in showing image</li>\n<li>I missed some frames but I don't know why</li>\n</ol>\n<p>What is the best solution to solve these problems?</p>\n<p>Each camera frame is just a bitmap image.</p>\n<p>I have an event <code>MyEvent</code> and I have a static int id that starts with 0 and increments when raising event.</p>\n<p>And register 4 function to handle this event.</p>\n<p>And print id in event handler but missing some ids in some handlers randomly</p>\n"},{"tags":["java","android","in-app-purchase","in-app-billing"],"answers":[{"tags":[],"owner":{"account_id":466455,"reputation":304,"user_id":871221,"accept_rate":100,"display_name":"Ted Yu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1390054468,"creation_date":1390054468,"answer_id":21205262,"question_id":21155061,"body_markdown":"Please check your google wallet settings.\r\nhttp://productforums.google.com/forum/#!topic/wallet/hJNGInC9m3I%5B1-25-true%5D","title":"Android in app billing error:&quot;error processing purchase bm-cch-17&quot;","body":"<p>Please check your google wallet settings.\n<a href=\"http://productforums.google.com/forum/#!topic/wallet/hJNGInC9m3I%5B1-25-true%5D\" rel=\"nofollow\">http://productforums.google.com/forum/#!topic/wallet/hJNGInC9m3I%5B1-25-true%5D</a></p>\n"},{"tags":[],"owner":{"account_id":5269665,"reputation":1,"user_id":4208355,"display_name":"Sean Reid"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1414960681,"creation_date":1414960681,"answer_id":26704106,"question_id":21155061,"body_markdown":"Go to your settings then google, remove one of your email account s by simply clicking on it than it gives you an option to remove account, then it has to work 100% sure.","title":"Android in app billing error:&quot;error processing purchase bm-cch-17&quot;","body":"<p>Go to your settings then google, remove one of your email account s by simply clicking on it than it gives you an option to remove account, then it has to work 100% sure.</p>\n"}],"owner":{"account_id":2292068,"reputation":914,"user_id":2014570,"accept_rate":11,"display_name":"Prosanto"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":7970,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1694027165,"creation_date":1389854943,"question_id":21155061,"body_markdown":"I am trying to add the functionality on &quot;**android in app billing**&quot; in my android apps.All method and functionality are okay and it work well for some android device.But it does not work well in my client device when he test the apps then he got a error.The error are &quot;**error processing purchase bm-cch-17**&quot;.For checking the problem i also test it another my device the i got the error.But now yet i can not able to solve the problem.I also shared a screenshot which i get the error.\r\n\r\n![enter image description here][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/tk0mt.png\r\n\r\n\r\nPlease help to me how i can solve the issue.","title":"Android in app billing error:&quot;error processing purchase bm-cch-17&quot;","body":"<p>I am trying to add the functionality on \"<strong>android in app billing</strong>\" in my android apps.All method and functionality are okay and it work well for some android device.But it does not work well in my client device when he test the apps then he got a error.The error are \"<strong>error processing purchase bm-cch-17</strong>\".For checking the problem i also test it another my device the i got the error.But now yet i can not able to solve the problem.I also shared a screenshot which i get the error.</p>\n\n<p><img src=\"https://i.stack.imgur.com/tk0mt.png\" alt=\"enter image description here\"></p>\n\n<p>Please help to me how i can solve the issue.</p>\n"},{"tags":["java","apache-spark","apache-spark-sql","apache-calcite"],"comments":[{"owner":{"account_id":10408148,"reputation":1398,"user_id":7674438,"accept_rate":100,"display_name":"Lore"},"score":0,"creation_date":1693908155,"post_id":77039637,"comment_id":135818166,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}],"answers":[{"comments":[{"owner":{"account_id":29365169,"reputation":1,"user_id":22499036,"display_name":"roronaozoro"},"score":0,"creation_date":1694115069,"post_id":77054647,"comment_id":135852472,"body_markdown":"Is there ongoing work already on this? I can probably try contributing if you could give some examples of adapters already written for other engines. I do see an existing similar requirement someone else has posted too -&gt; https://issues.apache.org/jira/browse/CALCITE-1737","body":"Is there ongoing work already on this? I can probably try contributing if you could give some examples of adapters already written for other engines. I do see an existing similar requirement someone else has posted too -&gt; <a href=\"https://issues.apache.org/jira/browse/CALCITE-1737\" rel=\"nofollow noreferrer\">issues.apache.org/jira/browse/CALCITE-1737</a>"},{"owner":{"account_id":57693,"reputation":1274,"user_id":172836,"display_name":"Julian Hyde"},"score":0,"creation_date":1694203696,"post_id":77054647,"comment_id":135865517,"body_markdown":"I don&#39;t know enough about Spark to say whether CALCITE-1737 is the same or different. If your case is different, log a new case, but reference the old one.\n\nIf you need help, you should join the Calcite dev list and ask for help there.","body":"I don&#39;t know enough about Spark to say whether CALCITE-1737 is the same or different. If your case is different, log a new case, but reference the old one.  If you need help, you should join the Calcite dev list and ask for help there."}],"tags":[],"owner":{"account_id":57693,"reputation":1274,"user_id":172836,"display_name":"Julian Hyde"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694027081,"creation_date":1694027081,"answer_id":77054647,"question_id":77039637,"body_markdown":"Calcite doesn&#39;t currently support this, but it would make sense to include it in Calcite&#39;s Spark adapter if someone were to contribute it.\r\n\r\nIf you have time, please log a [Calcite Jira case][1] describing the requirements. You will not be committing yourself to implementing the feature, but it will help gather requirements, and will make it more likely that someone else will implement it.\r\n\r\n  [1]: https://issues.apache.org/jira/projects/CALCITE/summary","title":"Converting Calcite RelNode to Spark Logical Plan","body":"<p>Calcite doesn't currently support this, but it would make sense to include it in Calcite's Spark adapter if someone were to contribute it.</p>\n<p>If you have time, please log a <a href=\"https://issues.apache.org/jira/projects/CALCITE/summary\" rel=\"nofollow noreferrer\">Calcite Jira case</a> describing the requirements. You will not be committing yourself to implementing the feature, but it will help gather requirements, and will make it more likely that someone else will implement it.</p>\n"}],"owner":{"account_id":29365169,"reputation":1,"user_id":22499036,"display_name":"roronaozoro"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":101,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694027081,"creation_date":1693848257,"question_id":77039637,"body_markdown":"I am using Apache Calcite to convert/parse a SQL String to SQLNode and parsing the SQLNode to translate it to Spark Dataset API&#39;s.\r\nI don&#39;t want to directly use Spark SQL parser to convert SQL to Spark SQL dialects.\r\n\r\n\r\nWhat I am looking for is to use Calcite&#39;s parser and do the translation to Spark Java Dataset API.\r\nCurrently the way I have been trying out is use Calcite Visitor interface to walk through - SqlSelect, SqlJoin, SQLIdentifier etc and translate that to Spark Dataset API&#39;s.\r\n\r\nI just wanted advise on if there is a better way to do this.\r\nWill converting SqlNode to RelNode help ? Is there a way to convert RelNode to Spark Logical Plan and execute that logical Plan on Spark Engine? Does anyone have any ideas on how to do it?\r\nAny other ideas appreciated too!","title":"Converting Calcite RelNode to Spark Logical Plan","body":"<p>I am using Apache Calcite to convert/parse a SQL String to SQLNode and parsing the SQLNode to translate it to Spark Dataset API's.\nI don't want to directly use Spark SQL parser to convert SQL to Spark SQL dialects.</p>\n<p>What I am looking for is to use Calcite's parser and do the translation to Spark Java Dataset API.\nCurrently the way I have been trying out is use Calcite Visitor interface to walk through - SqlSelect, SqlJoin, SQLIdentifier etc and translate that to Spark Dataset API's.</p>\n<p>I just wanted advise on if there is a better way to do this.\nWill converting SqlNode to RelNode help ? Is there a way to convert RelNode to Spark Logical Plan and execute that logical Plan on Spark Engine? Does anyone have any ideas on how to do it?\nAny other ideas appreciated too!</p>\n"},{"tags":["java","unique-key","sequence-generators"],"comments":[{"owner":{"account_id":277416,"reputation":681878,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":1,"creation_date":1509519922,"post_id":47049718,"comment_id":81046542,"body_markdown":"Yu haven&#39;t tols us much about your architecture. But if you use a relational database, define a sequence in the database, and use it to generate IDs.","body":"Yu haven&#39;t tols us much about your architecture. But if you use a relational database, define a sequence in the database, and use it to generate IDs."},{"owner":{"account_id":6661882,"reputation":355,"user_id":5140713,"display_name":"Konrad"},"score":0,"creation_date":1509520204,"post_id":47049718,"comment_id":81046642,"body_markdown":"This looks like bad design. You need to sync the ID generation between your servers/clients. This cause a performance problem. Why you want do this?","body":"This looks like bad design. You need to sync the ID generation between your servers/clients. This cause a performance problem. Why you want do this?"},{"owner":{"account_id":6553906,"reputation":133,"user_id":5067295,"accept_rate":33,"display_name":"Sivapandian Jayakumar"},"score":0,"creation_date":1509520228,"post_id":47049718,"comment_id":81046650,"body_markdown":"Yes, we do have relational database. But is there any other way, just to keep it as a objects in java, rather than storing it in DB.","body":"Yes, we do have relational database. But is there any other way, just to keep it as a objects in java, rather than storing it in DB."},{"owner":{"account_id":1223835,"reputation":75878,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1509520332,"post_id":47049718,"comment_id":81046701,"body_markdown":"Use a UUID instead.","body":"Use a UUID instead."},{"owner":{"account_id":277416,"reputation":681878,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":0,"creation_date":1509520796,"post_id":47049718,"comment_id":81046893,"body_markdown":"@SivapandianJayakumar if you went to keep this design, you can&#39;t possibly know what the other servers have already sent, so you need some way of knowing, and a central place responsible to handle the counter and incrementing it is the easiest way to do that.","body":"@SivapandianJayakumar if you went to keep this design, you can&#39;t possibly know what the other servers have already sent, so you need some way of knowing, and a central place responsible to handle the counter and incrementing it is the easiest way to do that."}],"answers":[{"tags":[],"owner":{"account_id":6923944,"reputation":534,"user_id":5315559,"display_name":"sanoop sandy"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1509519798,"creation_date":1509519798,"answer_id":47049794,"question_id":47049718,"body_markdown":"Instead of keeping a uniqueID in the request and increasing the complexity. I would rather suggest of handling creation of uniqueId logic in your Controller endpoint. In that way your request need not worry about the uniqueID and can function independently as all request are supposed to be.","title":"How to set the unique integer id in java for each request in the clustered environment?","body":"<p>Instead of keeping a uniqueID in the request and increasing the complexity. I would rather suggest of handling creation of uniqueId logic in your Controller endpoint. In that way your request need not worry about the uniqueID and can function independently as all request are supposed to be.</p>\n"}],"owner":{"account_id":6553906,"reputation":133,"user_id":5067295,"accept_rate":33,"display_name":"Sivapandian Jayakumar"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":167,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694027068,"creation_date":1509519444,"question_id":47049718,"body_markdown":"I want to set the unique integer id in each request, that we will send to other system. This id should start from 1 and should increment until 2147483647. Once it reached 2147483647, it should again start from 1.\r\n\r\nWe have a clustered environment and request could come from any servers. So from whichever server the request may come from, the unique id should always get the latest value set and should increment it by 1 and need to set the new value in the request.\r\n\r\nHow can I achieve this ?","title":"How to set the unique integer id in java for each request in the clustered environment?","body":"<p>I want to set the unique integer id in each request, that we will send to other system. This id should start from 1 and should increment until 2147483647. Once it reached 2147483647, it should again start from 1.</p>\n<p>We have a clustered environment and request could come from any servers. So from whichever server the request may come from, the unique id should always get the latest value set and should increment it by 1 and need to set the new value in the request.</p>\n<p>How can I achieve this ?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":0,"creation_date":1576430455,"post_id":59346006,"comment_id":104888748,"body_markdown":"Create a class with `name` and `age` and declare an array of those.","body":"Create a class with <code>name</code> and <code>age</code> and declare an array of those."}],"answers":[{"tags":[],"owner":{"account_id":14045408,"reputation":132,"user_id":10145793,"display_name":"Romeo Bahoumda"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694026879,"creation_date":1576430442,"answer_id":59346299,"question_id":59346006,"body_markdown":"Multidimensional Arrays in Java are of the same type. You can&#39;t have a 2D array with a row of strings and another of integers. \r\nYou can either \r\n 1. have two separate arrays one `String[]` the names and one `int[]` with the ages having corresponding indexes\r\n 2. use a `Pair&lt;String, int&gt;[]` to bundle both values together.\r\n 3. If you can guarantee uniqueness in your strings, a map wouldn&#39;t be a bad idea either\r\n","title":"How can I change the values of this matrix in a way that can have an array with numbers and an array with words?","body":"<p>Multidimensional Arrays in Java are of the same type. You can't have a 2D array with a row of strings and another of integers.\nYou can either</p>\n<ol>\n<li>have two separate arrays one <code>String[]</code> the names and one <code>int[]</code> with the ages having corresponding indexes</li>\n<li>use a <code>Pair&lt;String, int&gt;[]</code> to bundle both values together.</li>\n<li>If you can guarantee uniqueness in your strings, a map wouldn't be a bad idea either</li>\n</ol>\n"}],"owner":{"account_id":17161965,"reputation":37,"user_id":12421384,"display_name":"John"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694026879,"creation_date":1576428604,"question_id":59346006,"body_markdown":"I am creating a matrix that has a row of names and another of ages, I want to change the values of the first row of &quot;names&quot; to convert them from numbers to letters. (But I have to guarantee that 1 will always be John for example)\r\n\r\n    private static int matrixNameAge[][] = new {1,2,3},{30,10,25};\r\n    \r\n    }\r\n    \r\n        static String obtainNumbersPerIndex(int pIndex){\r\n    \r\n            String name = &quot;&quot;;\r\n    \r\n            switch(pIndex){\r\n               case 1:    \r\n                    name = &quot;John&quot;;\r\n                    break;\r\n                case 2:    \r\n                    name = &quot;Cristine&quot;;\r\n                    break;\r\n                case 3:    \r\n                    name = &quot;Peter&quot;;\r\n                    break;\r\n     default:\r\n                    name = &quot;Nombre not found&quot;; \r\n                    break;\r\n            }\r\n    \r\n            return name;\r\n        }    \r\n\r\n\r\n\r\n","title":"How can I change the values of this matrix in a way that can have an array with numbers and an array with words?","body":"<p>I am creating a matrix that has a row of names and another of ages, I want to change the values of the first row of \"names\" to convert them from numbers to letters. (But I have to guarantee that 1 will always be John for example)</p>\n\n<pre><code>private static int matrixNameAge[][] = new {1,2,3},{30,10,25};\n\n}\n\n    static String obtainNumbersPerIndex(int pIndex){\n\n        String name = \"\";\n\n        switch(pIndex){\n           case 1:    \n                name = \"John\";\n                break;\n            case 2:    \n                name = \"Cristine\";\n                break;\n            case 3:    \n                name = \"Peter\";\n                break;\n default:\n                name = \"Nombre not found\"; \n                break;\n        }\n\n        return name;\n    }    \n</code></pre>\n"},{"tags":["java","selenium-webdriver","cucumber","screenshot"],"comments":[{"owner":{"account_id":11380920,"reputation":8254,"user_id":8343843,"display_name":"Alexey R."},"score":0,"creation_date":1694027423,"post_id":77054567,"comment_id":135838856,"body_markdown":"What does `corrupted` mean in the context of your situation?","body":"What does <code>corrupted</code> mean in the context of your situation?"},{"owner":{"account_id":15388514,"reputation":11,"user_id":11101959,"display_name":"Said"},"score":0,"creation_date":1694087261,"post_id":77054567,"comment_id":135846617,"body_markdown":"In my cucumber.html file the images are in a tag like this &lt;img alt=&quot;Embedded Image&quot; src=&quot;data:image/png;base64,iVBORw0KGgohIAAAAASUVORK5CYII=&quot; class=&quot;ORaS_8RRNPuyNQTWStAR&quot;&gt;.\nThe part between the quotes is not correct to display the image. I can fix it via this site: https://base64.guru/converter/decode/image/png. This site gives an error for corrupted images and offers to fix it.","body":"In my cucumber.html file the images are in a tag like this &lt;img alt=&quot;Embedded Image&quot; src=&quot;data:image/png;base64,iVBORw0KGgohIAAAAASUVORK5CYII=&quot; class=&quot;ORaS_8RRNPuyNQTWStAR&quot;&gt;. The part between the quotes is not correct to display the image. I can fix it via this site: <a href=\"https://base64.guru/converter/decode/image/png\" rel=\"nofollow noreferrer\">base64.guru/converter/decode/image/png</a>. This site gives an error for corrupted images and offers to fix it."},{"owner":{"account_id":3043203,"reputation":1034,"user_id":2579652,"accept_rate":77,"display_name":"Dhru &#39;soni"},"score":0,"creation_date":1694151975,"post_id":77054567,"comment_id":135856226,"body_markdown":"@Said does it necessary for you to take outputType as a bytes ?","body":"@Said does it necessary for you to take outputType as a bytes ?"}],"owner":{"account_id":15388514,"reputation":11,"user_id":11101959,"display_name":"Said"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694026282,"creation_date":1694026282,"question_id":77054567,"body_markdown":"I have an issue in my Selenum test project: my cucumber report sometimes does not display anything in the browser. The cause of this: sometimes the embedded screen shot (included for failed scenarios) is corrupt.\r\n\r\nThis is my code to capture the screenshot:\r\n\r\n```\r\nprivate void takeScreenshotIfScenarioFailed() {\r\n\tif (Context.scenario.isFailed()) {\r\n\t\tfinal byte[] screenshot = ((TakesScreenshot) Context.driver)\r\n\t\t\t\t.getScreenshotAs(OutputType.BYTES);\r\n\t\tContext.scenario.attach(screenshot, &quot;image/png&quot;, &quot;screenshot&quot;);\r\n\t}\r\n}\r\n\r\n```\r\nAny suggestion for to fix (occasional) corrupted screenshot?\r\n\r\n\r\n\r\n\r\nI tried running the test headless, but the issue still occurs from time to time.","title":"Selenium TakesScreenshot creates corrupted image","body":"<p>I have an issue in my Selenum test project: my cucumber report sometimes does not display anything in the browser. The cause of this: sometimes the embedded screen shot (included for failed scenarios) is corrupt.</p>\n<p>This is my code to capture the screenshot:</p>\n<pre><code>private void takeScreenshotIfScenarioFailed() {\n    if (Context.scenario.isFailed()) {\n        final byte[] screenshot = ((TakesScreenshot) Context.driver)\n                .getScreenshotAs(OutputType.BYTES);\n        Context.scenario.attach(screenshot, &quot;image/png&quot;, &quot;screenshot&quot;);\n    }\n}\n\n</code></pre>\n<p>Any suggestion for to fix (occasional) corrupted screenshot?</p>\n<p>I tried running the test headless, but the issue still occurs from time to time.</p>\n"},{"tags":["java","zoneddatetime"],"comments":[{"owner":{"account_id":1328773,"reputation":37883,"user_id":1273080,"accept_rate":100,"display_name":"Petr Janeček"},"score":6,"creation_date":1694008039,"post_id":77052487,"comment_id":135834772,"body_markdown":"Instants will be the same regardless of Zones, that&#39;s what they mean. It&#39;s an instant point on the global (universal) time-line. The number of seconds and nanos since a point in time. It is the same across the whole planet.\nThe thing that changes is OffsetDateTime / ZonedDateTime as that&#39;s the time you&#39;d observe at a specific instant while being on different places on Earth.\nIn other words, the Instant never changes and is the same everywhere. If you want time specific for a place, use Offset/Zoned*.","body":"Instants will be the same regardless of Zones, that&#39;s what they mean. It&#39;s an instant point on the global (universal) time-line. The number of seconds and nanos since a point in time. It is the same across the whole planet. The thing that changes is OffsetDateTime / ZonedDateTime as that&#39;s the time you&#39;d observe at a specific instant while being on different places on Earth. In other words, the Instant never changes and is the same everywhere. If you want time specific for a place, use Offset/Zoned*."},{"owner":{"account_id":22651,"reputation":13651,"user_id":56076,"accept_rate":72,"display_name":"Don Branson"},"score":2,"creation_date":1694008118,"post_id":77052487,"comment_id":135834788,"body_markdown":"Epoch time in millis is the number of millis from January 1, 1970 at Greenwich. So, the time zone doesn&#39;t matter, and epochET should be the same as the input.","body":"Epoch time in millis is the number of millis from January 1, 1970 at Greenwich. So, the time zone doesn&#39;t matter, and epochET should be the same as the input."},{"owner":{"account_id":2168880,"reputation":15313,"user_id":1921385,"display_name":"Moob"},"score":0,"creation_date":1694008207,"post_id":77052487,"comment_id":135834806,"body_markdown":"clues here: https://stackoverflow.com/questions/62879021/zoneddatetime-toinstant-toepochmilli-losing-zone-data","body":"clues here: <a href=\"https://stackoverflow.com/questions/62879021/zoneddatetime-toinstant-toepochmilli-losing-zone-data\" title=\"zoneddatetime toinstant toepochmilli losing zone data\">stackoverflow.com/questions/62879021/&hellip;</a>"},{"owner":{"account_id":20964920,"reputation":1,"user_id":15403482,"display_name":"Rohan"},"score":0,"creation_date":1694008230,"post_id":77052487,"comment_id":135834813,"body_markdown":"Thank you. So is there any other way to get convert long time from UTC to ET (without using ZonedDateTime)?","body":"Thank you. So is there any other way to get convert long time from UTC to ET (without using ZonedDateTime)?"},{"owner":{"account_id":22651,"reputation":13651,"user_id":56076,"accept_rate":72,"display_name":"Don Branson"},"score":1,"creation_date":1694008924,"post_id":77052487,"comment_id":135834997,"body_markdown":"@Rohan There&#39;s no conversion, because they have the same value. It&#39;s the same regardless of what time zone you&#39;re in, because the begginning of the epoch is based on UTC, not the local time zone.","body":"@Rohan There&#39;s no conversion, because they have the same value. It&#39;s the same regardless of what time zone you&#39;re in, because the begginning of the epoch is based on UTC, not the local time zone."},{"owner":{"account_id":20964920,"reputation":1,"user_id":15403482,"display_name":"Rohan"},"score":1,"creation_date":1694008982,"post_id":77052487,"comment_id":135835015,"body_markdown":"Makes sense . Thanks @DonBranson","body":"Makes sense . Thanks @DonBranson"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":2,"creation_date":1694012217,"post_id":77052487,"comment_id":135835851,"body_markdown":"“EST” and “ET” are not real time zones. Real time zones have a name in format of `Continent/Region` such as `America/New_York` and `America/Montreal`.","body":"“EST” and “ET” are not real time zones. Real time zones have a name in format of <code>Continent&#47;Region</code> such as <code>America&#47;New_York</code> and <code>America&#47;Montreal</code>."}],"answers":[{"comments":[{"owner":{"account_id":20964920,"reputation":1,"user_id":15403482,"display_name":"Rohan"},"score":0,"creation_date":1694011285,"post_id":77052743,"comment_id":135835617,"body_markdown":"I am expecting output to be in long as well. But my understanding is long will be same as input and won&#39;t change.","body":"I am expecting output to be in long as well. But my understanding is long will be same as input and won&#39;t change."},{"owner":{"account_id":2179728,"reputation":73077,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"score":1,"creation_date":1694011897,"post_id":77052743,"comment_id":135835765,"body_markdown":"@Rohan That&#39;s correct. The `long` timestamp is independent of the timezone. The documentation and tutorial I have linked in my answer will be very helpful to you if you want to understand date-time-related concepts.","body":"@Rohan That&#39;s correct. The <code>long</code> timestamp is independent of the timezone. The documentation and tutorial I have linked in my answer will be very helpful to you if you want to understand date-time-related concepts."}],"tags":[],"owner":{"account_id":2179728,"reputation":73077,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1694009566,"creation_date":1694009566,"answer_id":77052743,"question_id":77052487,"body_markdown":"[`Instant`](https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html) represents just a moment in time and is independent of the timezone.\r\n\r\nYou can use [`Instant#atZone`](https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html#atZone-java.time.ZoneId-) to get the desired result.\r\n\r\n**Demo:** \r\n\r\n    class Main {\r\n        public static void main(String[] args) {\r\n            long timestamp = 1693932120000L;\r\n            Instant instant = Instant.ofEpochMilli(timestamp);\r\n            ZonedDateTime zdt = instant.atZone(ZoneId.of(&quot;America/New_York&quot;));\r\n            System.out.println(zdt);\r\n        }\r\n    }\r\n**Output:**\r\n\r\n    2023-09-05T12:42-04:00[America/New_York]\r\n\r\n[Online Demo](https://ideone.com/ELynbL)\r\n\r\nLearn about the modern date-time API from **[Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**","title":"Convert time in long format from UTC to EST","body":"<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html\" rel=\"nofollow noreferrer\"><code>Instant</code></a> represents just a moment in time and is independent of the timezone.</p>\n<p>You can use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html#atZone-java.time.ZoneId-\" rel=\"nofollow noreferrer\"><code>Instant#atZone</code></a> to get the desired result.</p>\n<p><strong>Demo:</strong></p>\n<pre><code>class Main {\n    public static void main(String[] args) {\n        long timestamp = 1693932120000L;\n        Instant instant = Instant.ofEpochMilli(timestamp);\n        ZonedDateTime zdt = instant.atZone(ZoneId.of(&quot;America/New_York&quot;));\n        System.out.println(zdt);\n    }\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>2023-09-05T12:42-04:00[America/New_York]\n</code></pre>\n<p><a href=\"https://ideone.com/ELynbL\" rel=\"nofollow noreferrer\">Online Demo</a></p>\n<p>Learn about the modern date-time API from <strong><a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">Trail: Date Time</a></strong></p>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694025301,"creation_date":1694009699,"answer_id":77052765,"question_id":77052487,"body_markdown":"&gt; So is there any other way to get convert long time from UTC to ET (without using ZonedDateTime)?\r\n\r\nIf you&#39;re talking about long from one `TZ` to long in another, no.  Instants and epochs don&#39;t have time zones (although `Instant` is treated as `Zulu` for adjustment purposes).\r\n\r\nIf you just want to get a time object and don&#39;t care about `timezone` information and just want `long milli` adjusted for some `timezone` in a `LocalDateTime` this will work.  If you want `timezones` to be included in the output, simply replace the calls using `LocalDateTime` with `ZonedDateTime` Try it like this but use your specific Zones.  Note that if you print out an `Instant` it defaults to `Zulu` or `UTC`.  So any `TZ` adjustment will be made from that point.\r\n```\r\nLong millis = 1694009579442L;\r\nInstant instant = Instant.ofEpochMilli(millis);\r\n\r\n\r\nLocalDateTime ldt1 = LocalDateTime.ofInstant(instant,\r\n        ZoneId.of(&quot;US/Eastern&quot;));\r\nLocalDateTime ldt2 = LocalDateTime.ofInstant(instant,\r\n        ZoneId.of(&quot;Europe/Paris&quot;));\r\nSystem.out.println(ldt1);\r\nSystem.out.println(ldt2);\r\n\r\n```\r\nprints\r\n```\r\n2023-09-06T10:12:59.442\r\n2023-09-06T16:12:59.442\r\n","title":"Convert time in long format from UTC to EST","body":"<blockquote>\n<p>So is there any other way to get convert long time from UTC to ET (without using ZonedDateTime)?</p>\n</blockquote>\n<p>If you're talking about long from one <code>TZ</code> to long in another, no.  Instants and epochs don't have time zones (although <code>Instant</code> is treated as <code>Zulu</code> for adjustment purposes).</p>\n<p>If you just want to get a time object and don't care about <code>timezone</code> information and just want <code>long milli</code> adjusted for some <code>timezone</code> in a <code>LocalDateTime</code> this will work.  If you want <code>timezones</code> to be included in the output, simply replace the calls using <code>LocalDateTime</code> with <code>ZonedDateTime</code> Try it like this but use your specific Zones.  Note that if you print out an <code>Instant</code> it defaults to <code>Zulu</code> or <code>UTC</code>.  So any <code>TZ</code> adjustment will be made from that point.</p>\n<pre><code>Long millis = 1694009579442L;\nInstant instant = Instant.ofEpochMilli(millis);\n\n\nLocalDateTime ldt1 = LocalDateTime.ofInstant(instant,\n        ZoneId.of(&quot;US/Eastern&quot;));\nLocalDateTime ldt2 = LocalDateTime.ofInstant(instant,\n        ZoneId.of(&quot;Europe/Paris&quot;));\nSystem.out.println(ldt1);\nSystem.out.println(ldt2);\n\n</code></pre>\n<p>prints</p>\n<pre><code>2023-09-06T10:12:59.442\n2023-09-06T16:12:59.442\n</code></pre>\n"}],"owner":{"account_id":20964920,"reputation":1,"user_id":15403482,"display_name":"Rohan"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1694025301,"creation_date":1694007734,"question_id":77052487,"body_markdown":"Looking for ideas to convert time in long (millis) from UTC to EST\r\nTried in the below manner and did not work. I am seeing epcohET is same as input parameter. \r\n\r\n```\r\nlong time = 1693932120000\r\nInstant dateTime = Instant.ofEpochMilli(time);\r\nZoneId usET = ServerTimeZone.TimeZone.getTimeZone(&quot;America/New_York&quot;).toZoneId();\r\nZonedDateTime zdt = ZonedDateTime.ofInstant(dateTime, usET);\r\nlong epochET = zdt.toInstant().toEpochMilli();\r\n```\r\n","title":"Convert time in long format from UTC to EST","body":"<p>Looking for ideas to convert time in long (millis) from UTC to EST\nTried in the below manner and did not work. I am seeing epcohET is same as input parameter.</p>\n<pre><code>long time = 1693932120000\nInstant dateTime = Instant.ofEpochMilli(time);\nZoneId usET = ServerTimeZone.TimeZone.getTimeZone(&quot;America/New_York&quot;).toZoneId();\nZonedDateTime zdt = ZonedDateTime.ofInstant(dateTime, usET);\nlong epochET = zdt.toInstant().toEpochMilli();\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-security","basic-authentication"],"answers":[{"tags":[],"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694024840,"creation_date":1694024840,"answer_id":77054428,"question_id":77049796,"body_markdown":"You can create a helper method that create an `AuthorizationManager` that match with certain IP:\r\n\r\n``` java\r\nprivate AuthorizationManager&lt;RequestAuthorizationContext&gt; hasIpAddress(String ipAddress) {\r\n    IpAddressMatcher ipAddressMatcher = new IpAddressMatcher(ipAddress);\r\n    return (authentication, context) -&gt; {\r\n        HttpServletRequest request = context.getRequest();\r\n        return new AuthorizationDecision(ipAddressMatcher.matches(request));\r\n    };\r\n}\r\n```\r\n\r\nTogether with these static import :\r\n\r\n```\r\nimport static org.springframework.security.authorization.AuthenticatedAuthorizationManager.authenticated;\r\nimport static org.springframework.security.authorization.AuthorizationManagers.allOf;\r\n```\r\n\r\nYou could then polish the codes to :\r\n\r\n``` java\r\nhttp.authorizeHttpRequests()\r\n    .requestMatchers(&quot;/test&quot;).access(allOf(authenticated(), hasIpAddress(&quot;127.0.0.1&quot;)))\r\n    .anyRequest().permitAll();\r\n```","title":"Securing endpoint with basic auth and additional conditions in springboot 3","body":"<p>You can create a helper method that create an <code>AuthorizationManager</code> that match with certain IP:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private AuthorizationManager&lt;RequestAuthorizationContext&gt; hasIpAddress(String ipAddress) {\n    IpAddressMatcher ipAddressMatcher = new IpAddressMatcher(ipAddress);\n    return (authentication, context) -&gt; {\n        HttpServletRequest request = context.getRequest();\n        return new AuthorizationDecision(ipAddressMatcher.matches(request));\n    };\n}\n</code></pre>\n<p>Together with these static import :</p>\n<pre><code>import static org.springframework.security.authorization.AuthenticatedAuthorizationManager.authenticated;\nimport static org.springframework.security.authorization.AuthorizationManagers.allOf;\n</code></pre>\n<p>You could then polish the codes to :</p>\n<pre class=\"lang-java prettyprint-override\"><code>http.authorizeHttpRequests()\n    .requestMatchers(&quot;/test&quot;).access(allOf(authenticated(), hasIpAddress(&quot;127.0.0.1&quot;)))\n    .anyRequest().permitAll();\n</code></pre>\n"}],"owner":{"account_id":10458031,"reputation":35,"user_id":7709706,"display_name":"Yakimget"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":215,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1694024840,"creation_date":1693985100,"question_id":77049796,"body_markdown":"I want to secure one endpoint with basic auth and allow requests only from specific IP addresses. Filter for basic auth:\r\n\r\n```\r\nSecurityFilterChain basicAuthSecurityFilterChain(HttpSecurity http) throws Exception {\r\n        http\r\n                .authorizeHttpRequests((authorize) -&gt; authorize\r\n                                               .requestMatchers(&quot;/test&quot;).authenticated()\r\n                                               .anyRequest().permitAll()\r\n                                      )\r\n                .csrf().disable()\r\n                .httpBasic();\r\n\r\n        return http.build();\r\n    }\r\n```\r\n\r\nFilter for IP address:\r\n\r\n```\r\nSecurityFilterChain ipSecurityFilterChain(HttpSecurity http) throws Exception {\r\n        http\r\n                .authorizeHttpRequests((authorize) -&gt; authorize\r\n                                               .requestMatchers(&quot;/test&quot;).access(hasIpAddress(&quot;127.0.0.1&quot;))\r\n                                               .anyRequest().permitAll()\r\n                                      )\r\n                .csrf().disable();\r\n\r\n        return http.build();\r\n    }\r\n\r\nprivate AuthorizationManager&lt;RequestAuthorizationContext&gt; hasIpAddress(String ipAddress) {\r\n        IpAddressMatcher ipAddressMatcher = new IpAddressMatcher(ipAddress);\r\n        return (authentication, context) -&gt; {\r\n            HttpServletRequest request = context.getRequest();\r\n            return new AuthorizationDecision(ipAddressMatcher.matches(request));\r\n        };\r\n    }\r\n```\r\n\r\nProblem is with combining these solutions. With older Spring I could use\r\n```\r\n.access(&quot;isAuthenticated() and hasIpAddress(&#39;127.0.0.1&#39;)&quot;)\r\n```\r\nbut now this method accepts only AuthorizationManager instead of String.","title":"Securing endpoint with basic auth and additional conditions in springboot 3","body":"<p>I want to secure one endpoint with basic auth and allow requests only from specific IP addresses. Filter for basic auth:</p>\n<pre><code>SecurityFilterChain basicAuthSecurityFilterChain(HttpSecurity http) throws Exception {\n        http\n                .authorizeHttpRequests((authorize) -&gt; authorize\n                                               .requestMatchers(&quot;/test&quot;).authenticated()\n                                               .anyRequest().permitAll()\n                                      )\n                .csrf().disable()\n                .httpBasic();\n\n        return http.build();\n    }\n</code></pre>\n<p>Filter for IP address:</p>\n<pre><code>SecurityFilterChain ipSecurityFilterChain(HttpSecurity http) throws Exception {\n        http\n                .authorizeHttpRequests((authorize) -&gt; authorize\n                                               .requestMatchers(&quot;/test&quot;).access(hasIpAddress(&quot;127.0.0.1&quot;))\n                                               .anyRequest().permitAll()\n                                      )\n                .csrf().disable();\n\n        return http.build();\n    }\n\nprivate AuthorizationManager&lt;RequestAuthorizationContext&gt; hasIpAddress(String ipAddress) {\n        IpAddressMatcher ipAddressMatcher = new IpAddressMatcher(ipAddress);\n        return (authentication, context) -&gt; {\n            HttpServletRequest request = context.getRequest();\n            return new AuthorizationDecision(ipAddressMatcher.matches(request));\n        };\n    }\n</code></pre>\n<p>Problem is with combining these solutions. With older Spring I could use</p>\n<pre><code>.access(&quot;isAuthenticated() and hasIpAddress('127.0.0.1')&quot;)\n</code></pre>\n<p>but now this method accepts only AuthorizationManager instead of String.</p>\n"},{"tags":["java","android"],"owner":{"account_id":29381686,"reputation":1,"user_id":22512056,"display_name":"akony mike"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694024734,"creation_date":1694024682,"question_id":77054412,"body_markdown":"When i migrate android billing version 4 to 5 . I get a error about QueryPurchases.\r\n\r\nMy code error\r\n\r\n    public boolean isSubscriptionRunning() {\r\n        return billingClient.queryPurchases(BillingClient.SkuType.SUBS).getPurchasesList() != null\r\n                &amp;&amp; !billingClient.queryPurchases(BillingClient.SkuType.SUBS).getPurchasesList().isEmpty();\r\n    }\r\n\r\nError: Cannot resolve method &#39;queryPurchases&#39; in &#39;BillingClient&#39;.\r\nPlease help me migrate this.\r\n","title":"Migrate android billing 4 to 5 - , queryPurchases, getPurchasesList, getSku","body":"<p>When i migrate android billing version 4 to 5 . I get a error about QueryPurchases.</p>\n<p>My code error</p>\n<pre><code>public boolean isSubscriptionRunning() {\n    return billingClient.queryPurchases(BillingClient.SkuType.SUBS).getPurchasesList() != null\n            &amp;&amp; !billingClient.queryPurchases(BillingClient.SkuType.SUBS).getPurchasesList().isEmpty();\n}\n</code></pre>\n<p>Error: Cannot resolve method 'queryPurchases' in 'BillingClient'.\nPlease help me migrate this.</p>\n"},{"tags":["java","node.js","amazon-web-services","aws-lambda"],"answers":[{"comments":[{"owner":{"account_id":1845098,"reputation":171677,"user_id":1695906,"display_name":"Michael - sqlbot"},"score":1,"creation_date":1462932544,"post_id":37139162,"comment_id":61841451,"body_markdown":"That default route more properly be would be expressed as `0.0.0.0/0`.","body":"That default route more properly be would be expressed as <code>0.0.0.0&#47;0</code>."}],"tags":[],"owner":{"account_id":5966457,"reputation":3452,"user_id":4690135,"accept_rate":65,"display_name":"gi&#242;"},"comment_count":1,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1463486199,"creation_date":1462884771,"answer_id":37139162,"question_id":37135725,"body_markdown":"I found the error, the NAT Gateway should be added to a public subnet (not a private one).    \r\nA public subnet is the subnet with the Internet Gatway route associated to `0.0.0.0/0`","title":"AWS Lambda connecting to Internet","body":"<p>I found the error, the NAT Gateway should be added to a public subnet (not a private one).<br>\nA public subnet is the subnet with the Internet Gatway route associated to <code>0.0.0.0/0</code></p>\n"},{"comments":[{"owner":{"account_id":1170899,"reputation":728,"user_id":1148118,"accept_rate":84,"display_name":"Chris Rice"},"score":0,"creation_date":1616076635,"post_id":47132315,"comment_id":117894446,"body_markdown":"When i do this, it has a status of &#39;blackhole&#39;.","body":"When i do this, it has a status of &#39;blackhole&#39;."},{"owner":{"account_id":2429382,"reputation":1163,"user_id":2120647,"accept_rate":53,"display_name":"public static void"},"score":1,"creation_date":1643121051,"post_id":47132315,"comment_id":125251737,"body_markdown":"I think that means the NAT Gateway has been deleted","body":"I think that means the NAT Gateway has been deleted"}],"tags":[],"owner":{"account_id":2784842,"reputation":67281,"user_id":2396539,"accept_rate":78,"display_name":"Aniket Thakur"},"comment_count":2,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1509955642,"creation_date":1509955642,"answer_id":47132315,"question_id":37135725,"body_markdown":"Since I faced the same issue adding a bit more clarity to the above answer -\r\n \r\n 1. Add NAT Gateway or NAT instance to public subnet (the one that has an \r\n `0.0.0.0/0` entry to internet gateway in corresponding (public) subnets route table)\r\n 2. Edit route table of private subnet (where you are running your lambda) to have an entry for `0.0.0.0/0` to the NAT gateway in the public subnet.\r\n 3. Make sure security group assigned to lambda allows outbound connections.","title":"AWS Lambda connecting to Internet","body":"<p>Since I faced the same issue adding a bit more clarity to the above answer -</p>\n\n<ol>\n<li>Add NAT Gateway or NAT instance to public subnet (the one that has an \n<code>0.0.0.0/0</code> entry to internet gateway in corresponding (public) subnets route table)</li>\n<li>Edit route table of private subnet (where you are running your lambda) to have an entry for <code>0.0.0.0/0</code> to the NAT gateway in the public subnet.</li>\n<li>Make sure security group assigned to lambda allows outbound connections.</li>\n</ol>\n"},{"comments":[{"owner":{"account_id":224350,"reputation":2946,"user_id":484108,"accept_rate":93,"display_name":"Phillippe Santana"},"score":1,"creation_date":1553108142,"post_id":55267891,"comment_id":97267598,"body_markdown":"I devised this method from this page: https://aws.amazon.com/premiumsupport/knowledge-center/internet-access-lambda-function/","body":"I devised this method from this page: <a href=\"https://aws.amazon.com/premiumsupport/knowledge-center/internet-access-lambda-function/\" rel=\"nofollow noreferrer\">aws.amazon.com/premiumsupport/knowledge-center/&hellip;</a>"},{"owner":{"account_id":2654075,"reputation":407,"user_id":2295137,"display_name":"vimmi"},"score":0,"creation_date":1581506300,"post_id":55267891,"comment_id":106455098,"body_markdown":"I have used same approach but not able to connect","body":"I have used same approach but not able to connect"},{"owner":{"account_id":438462,"reputation":199,"user_id":1138044,"display_name":"Shravan Hebbar"},"score":0,"creation_date":1600357963,"post_id":55267891,"comment_id":113069391,"body_markdown":"Tried exactly same steps ! Works like charm","body":"Tried exactly same steps ! Works like charm"},{"owner":{"account_id":6709774,"reputation":3507,"user_id":5173575,"accept_rate":100,"display_name":"PdevG"},"score":0,"creation_date":1601982702,"post_id":55267891,"comment_id":113569356,"body_markdown":"This had me struggling a year ago, if only this guide wouldve existed back then. Works perfectly","body":"This had me struggling a year ago, if only this guide wouldve existed back then. Works perfectly"},{"owner":{"account_id":909471,"reputation":6198,"user_id":943646,"accept_rate":74,"display_name":"rjv"},"score":0,"creation_date":1606836923,"post_id":55267891,"comment_id":115079479,"body_markdown":"What if i need to connect to something in default VPC, say a EC2 DB server? and the internet ofcourse","body":"What if i need to connect to something in default VPC, say a EC2 DB server? and the internet ofcourse"},{"owner":{"account_id":224350,"reputation":2946,"user_id":484108,"accept_rate":93,"display_name":"Phillippe Santana"},"score":0,"creation_date":1625849597,"post_id":55267891,"comment_id":120745753,"body_markdown":"Dineshs91 I don&#39;t know a way to solve this w/o a NAT. Also, the official guidance from AWS, which I used as a base for this solution, has NAT all over it. You can find a link to the article in my first comment, above.","body":"Dineshs91 I don&#39;t know a way to solve this w/o a NAT. Also, the official guidance from AWS, which I used as a base for this solution, has NAT all over it. You can find a link to the article in my first comment, above."},{"owner":{"account_id":3353428,"reputation":2314,"user_id":2816949,"accept_rate":92,"display_name":"hummmingbear"},"score":1,"creation_date":1631790887,"post_id":55267891,"comment_id":122320471,"body_markdown":"An upvote for you sir, thank you. This worked like a charm. I wish AWS would lay it out as simple as this. Much appreciated.","body":"An upvote for you sir, thank you. This worked like a charm. I wish AWS would lay it out as simple as this. Much appreciated."},{"owner":{"account_id":14425375,"reputation":334,"user_id":10420300,"display_name":"suliman"},"score":2,"creation_date":1654359019,"post_id":55267891,"comment_id":128074405,"body_markdown":"It  took me hours trying to figure it out, many thanks","body":"It  took me hours trying to figure it out, many thanks"},{"owner":{"account_id":1923894,"reputation":1914,"user_id":1734785,"display_name":"Christophe Vidal"},"score":1,"creation_date":1659609384,"post_id":55267891,"comment_id":129337461,"body_markdown":"That seems accurate, but there are so many pitfalls for someone not laser focussed: for the Lambda configuration, only private subnet shall be selected (like mentioned) - selecting public subnets for the Lambda *will* cause local connection to VPC resources to fail (somehow) - more is not better (!). The NAT Gateway shall be created in the public subnet but be in the private route table ... while the Internet Gateway shall be in the public route table (... :-) )","body":"That seems accurate, but there are so many pitfalls for someone not laser focussed: for the Lambda configuration, only private subnet shall be selected (like mentioned) - selecting public subnets for the Lambda <i>will</i> cause local connection to VPC resources to fail (somehow) - more is not better (!). The NAT Gateway shall be created in the public subnet but be in the private route table ... while the Internet Gateway shall be in the public route table (... :-) )"},{"owner":{"account_id":1146141,"reputation":103,"user_id":1128846,"accept_rate":42,"display_name":"MDWar"},"score":1,"creation_date":1671042801,"post_id":55267891,"comment_id":132014448,"body_markdown":"I came here to upvote this because you literally saved my coworkers life.","body":"I came here to upvote this because you literally saved my coworkers life."},{"owner":{"account_id":1005555,"reputation":974,"user_id":1020391,"display_name":"Rey Abolofia"},"score":0,"creation_date":1681626153,"post_id":55267891,"comment_id":134084738,"body_markdown":"In the decade that I&#39;ve been using stackoverflow, this answer is by far the one I am the most grateful for. I never never would have been able to come up with this on my own, but this answer stepped me through each and every step. Thank you so much.","body":"In the decade that I&#39;ve been using stackoverflow, this answer is by far the one I am the most grateful for. I never never would have been able to come up with this on my own, but this answer stepped me through each and every step. Thank you so much."},{"owner":{"account_id":1695351,"reputation":3510,"user_id":1556820,"accept_rate":50,"display_name":"mangusta"},"score":0,"creation_date":1689642872,"post_id":55267891,"comment_id":135239512,"body_markdown":"why do we need NAT? can&#39;t we just create an internet gateway, add it to the main routing table and use public subnets in lambda?","body":"why do we need NAT? can&#39;t we just create an internet gateway, add it to the main routing table and use public subnets in lambda?"},{"owner":{"account_id":1695351,"reputation":3510,"user_id":1556820,"accept_rate":50,"display_name":"mangusta"},"score":0,"creation_date":1689648653,"post_id":55267891,"comment_id":135239958,"body_markdown":"also why do we need to make NAT public and assign EIP to it, if it is still going to route the traffic to public subnet which in turn is connected to internet gateway?","body":"also why do we need to make NAT public and assign EIP to it, if it is still going to route the traffic to public subnet which in turn is connected to internet gateway?"}],"tags":[],"owner":{"account_id":224350,"reputation":2946,"user_id":484108,"accept_rate":93,"display_name":"Phillippe Santana"},"comment_count":13,"down_vote_count":0,"up_vote_count":89,"is_accepted":true,"score":89,"last_activity_date":1553106781,"creation_date":1553106781,"answer_id":55267891,"question_id":37135725,"body_markdown":"By default, a lambda function is not bounded to a VPC, which enables it to have internet access, but prevents it from accessing resources in a VPC, such as RDS instances.\r\n\r\nIf you attach the lambda to a VPC, you&#39;ll loose internet access, which prevents you from accessing resources such S3 and Dynamo, and from making HTTP requests.\r\n\r\nIf you need both, then I&#39;ll have to set up the VPC for internet access, which is a mess (hey AWS guys, if you have a well-defined process for it, please make it simple: turn it into a checkbox or button ;)\r\n\r\n**Create a new VPC**\r\n\r\nI find it&#39;s best to leave the default VPC alone, so you don&#39;t take the risk of breaking something that&#39;s already working in that VPC (in case you already have resources there), and also because you can use the default VPC as configuration reference in the future.\r\n\r\nUse the wizard for creating the VPC.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n**Create the Route Tables**\r\n\r\n1. Name the first `public-subnet` (if it&#39;s not already there);\r\n2. Name the second `private-lambda`. AWS support recommends having a separate subnet just for the lambda, and this Route Table is going to be attached to it.\r\n\r\n[![enter image description here][2]][2]\r\n\r\n**Create the subnets**\r\n\r\nBy default, when you create a VPC, it will create a public subnet for you. If you used default values, its name should be `Public subnet`. Leave it at that.\r\n\r\nNow you are going to create the private subnets. Is recommended to have several private subnets for your Lambda if you want it to have high availability.\r\n\r\nEach of these private subnets will be linked to the VPC you just created. Now, supposing you left the VPC IP as `10.0.0.0/16`, and that you run your resources in Virginia (`us-east-1`), here is a template for creating six private subnets, each in a different availability zone (for high availability):\r\n\r\n1. `private-lambda-us-east-1a`, availability zone `us-east-1a`, IP block `10.0.16.0/24`\r\n2. `private-lambda-us-east-1b`, availability zone `us-east-1b`, IP block `10.0.32.0/24`\r\n3. `private-lambda-us-east-1c`, availability zone `us-east-1c`, IP block `10.0.48.0/24`\r\n4. `private-lambda-us-east-1d`, availability zone `us-east-1d`, IP block `10.0.64.0/24`\r\n5. `private-lambda-us-east-1e`, availability zone `us-east-1e`, IP block `10.0.80.0/24`\r\n6. `private-lambda-us-east-1f`, availability zone `us-east-1f`, IP block `10.0.92.0/24`\r\n\r\nBut you can see the pattern:\r\n- There&#39;s a 16 increment in the 3rd position of the IP block;\r\n- The names indicate the selected availability zone in your region.\r\n\r\n[![enter image description here][3]][3]\r\n\r\n**Ensure Route Table vs Subnet associations**\r\n\r\n- Go to the Route Tables panel;\r\n- Select the public-subnet table, review its associations and make sure it&#39;s associated to the Public Subnet;\r\n- Select the private-lambda table, review its associations and make sure It&#39;s associated to all the `private-lambda-*` subnets you just created.\r\n\r\n[![enter image description here][4]][4]\r\n\r\n**Create an Internet Gateway**\r\n\r\nJust create one and attach it to the VPC.\r\n\r\n**Configure the routes for the Public Subnet**\r\n\r\nIn my case it came configured, but just make sure that the Route Table for your Public Subnet has an entry from `0.0.0.0/0` to your just-created Internet Gateway.\r\n\r\n[![enter image description here][5]][5]\r\n\r\n**Create a NAT (network address translator)**\r\n\r\nCreate a new NAT and select your Public Subnet. Allocate a new EIP.\r\n\r\n**Configure the routes for the Private Subnets**\r\n\r\nEnsure that the Route Table for your Private Subnets has an entry from `0.0.0.0/0` to your new NAT.\r\n\r\n[![enter image description here][6]][6]\r\n\r\nAnd with these steps, you should now have an Internet-enabled VPC.\r\n\r\n----------\r\n\r\n### Use Case: configuring a Lambda for internet and RDS access\r\n\r\n**Create a Security Group for the lambda**\r\n\r\n- New up a SG and configure Outbound -&gt; All Trafic -&gt; to `0.0.0.0/0` and `::/0`\r\n\r\n**Modify the Security Group of your RDS instance to allow**\r\n\r\n- Inbound -&gt; All trafic -&gt; from the lambda SG\r\n\r\n**Configure the lambda**\r\n\r\n- Create a new lambda or select an existing one;\r\n- Select your new VPC;\r\n- Select all your private subnets (`private-lambda-*`) for high availability;\r\n- Select your lambda Security Group.\r\n\r\nAnd that&#39;s it. You should now have a lambda function that can access both VPC and Internet resources :)\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/5nZTg.png\r\n  [2]: https://i.stack.imgur.com/6JLmy.png\r\n  [3]: https://i.stack.imgur.com/7sbVB.png\r\n  [4]: https://i.stack.imgur.com/TSjZ1.png\r\n  [5]: https://i.stack.imgur.com/FsqL9.png\r\n  [6]: https://i.stack.imgur.com/lgb3E.png","title":"AWS Lambda connecting to Internet","body":"<p>By default, a lambda function is not bounded to a VPC, which enables it to have internet access, but prevents it from accessing resources in a VPC, such as RDS instances.</p>\n\n<p>If you attach the lambda to a VPC, you'll loose internet access, which prevents you from accessing resources such S3 and Dynamo, and from making HTTP requests.</p>\n\n<p>If you need both, then I'll have to set up the VPC for internet access, which is a mess (hey AWS guys, if you have a well-defined process for it, please make it simple: turn it into a checkbox or button ;)</p>\n\n<p><strong>Create a new VPC</strong></p>\n\n<p>I find it's best to leave the default VPC alone, so you don't take the risk of breaking something that's already working in that VPC (in case you already have resources there), and also because you can use the default VPC as configuration reference in the future.</p>\n\n<p>Use the wizard for creating the VPC.</p>\n\n<p><a href=\"https://i.stack.imgur.com/5nZTg.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/5nZTg.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Create the Route Tables</strong></p>\n\n<ol>\n<li>Name the first <code>public-subnet</code> (if it's not already there);</li>\n<li>Name the second <code>private-lambda</code>. AWS support recommends having a separate subnet just for the lambda, and this Route Table is going to be attached to it.</li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/6JLmy.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/6JLmy.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Create the subnets</strong></p>\n\n<p>By default, when you create a VPC, it will create a public subnet for you. If you used default values, its name should be <code>Public subnet</code>. Leave it at that.</p>\n\n<p>Now you are going to create the private subnets. Is recommended to have several private subnets for your Lambda if you want it to have high availability.</p>\n\n<p>Each of these private subnets will be linked to the VPC you just created. Now, supposing you left the VPC IP as <code>10.0.0.0/16</code>, and that you run your resources in Virginia (<code>us-east-1</code>), here is a template for creating six private subnets, each in a different availability zone (for high availability):</p>\n\n<ol>\n<li><code>private-lambda-us-east-1a</code>, availability zone <code>us-east-1a</code>, IP block <code>10.0.16.0/24</code></li>\n<li><code>private-lambda-us-east-1b</code>, availability zone <code>us-east-1b</code>, IP block <code>10.0.32.0/24</code></li>\n<li><code>private-lambda-us-east-1c</code>, availability zone <code>us-east-1c</code>, IP block <code>10.0.48.0/24</code></li>\n<li><code>private-lambda-us-east-1d</code>, availability zone <code>us-east-1d</code>, IP block <code>10.0.64.0/24</code></li>\n<li><code>private-lambda-us-east-1e</code>, availability zone <code>us-east-1e</code>, IP block <code>10.0.80.0/24</code></li>\n<li><code>private-lambda-us-east-1f</code>, availability zone <code>us-east-1f</code>, IP block <code>10.0.92.0/24</code></li>\n</ol>\n\n<p>But you can see the pattern:\n- There's a 16 increment in the 3rd position of the IP block;\n- The names indicate the selected availability zone in your region.</p>\n\n<p><a href=\"https://i.stack.imgur.com/7sbVB.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/7sbVB.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Ensure Route Table vs Subnet associations</strong></p>\n\n<ul>\n<li>Go to the Route Tables panel;</li>\n<li>Select the public-subnet table, review its associations and make sure it's associated to the Public Subnet;</li>\n<li>Select the private-lambda table, review its associations and make sure It's associated to all the <code>private-lambda-*</code> subnets you just created.</li>\n</ul>\n\n<p><a href=\"https://i.stack.imgur.com/TSjZ1.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/TSjZ1.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Create an Internet Gateway</strong></p>\n\n<p>Just create one and attach it to the VPC.</p>\n\n<p><strong>Configure the routes for the Public Subnet</strong></p>\n\n<p>In my case it came configured, but just make sure that the Route Table for your Public Subnet has an entry from <code>0.0.0.0/0</code> to your just-created Internet Gateway.</p>\n\n<p><a href=\"https://i.stack.imgur.com/FsqL9.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/FsqL9.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Create a NAT (network address translator)</strong></p>\n\n<p>Create a new NAT and select your Public Subnet. Allocate a new EIP.</p>\n\n<p><strong>Configure the routes for the Private Subnets</strong></p>\n\n<p>Ensure that the Route Table for your Private Subnets has an entry from <code>0.0.0.0/0</code> to your new NAT.</p>\n\n<p><a href=\"https://i.stack.imgur.com/lgb3E.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/lgb3E.png\" alt=\"enter image description here\"></a></p>\n\n<p>And with these steps, you should now have an Internet-enabled VPC.</p>\n\n<hr>\n\n<h3>Use Case: configuring a Lambda for internet and RDS access</h3>\n\n<p><strong>Create a Security Group for the lambda</strong></p>\n\n<ul>\n<li>New up a SG and configure Outbound -> All Trafic -> to <code>0.0.0.0/0</code> and <code>::/0</code></li>\n</ul>\n\n<p><strong>Modify the Security Group of your RDS instance to allow</strong></p>\n\n<ul>\n<li>Inbound -> All trafic -> from the lambda SG</li>\n</ul>\n\n<p><strong>Configure the lambda</strong></p>\n\n<ul>\n<li>Create a new lambda or select an existing one;</li>\n<li>Select your new VPC;</li>\n<li>Select all your private subnets (<code>private-lambda-*</code>) for high availability;</li>\n<li>Select your lambda Security Group.</li>\n</ul>\n\n<p>And that's it. You should now have a lambda function that can access both VPC and Internet resources :)</p>\n"},{"tags":[],"owner":{"account_id":3043316,"reputation":5893,"user_id":2579733,"display_name":"Max Ivanov"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1618695125,"creation_date":1618695125,"answer_id":67143141,"question_id":37135725,"body_markdown":"If you are to do this with Terraform, here are the resources that you will need to configure (in addition to Lambda resources):\r\n\r\n- `aws_vpc`\r\n- `aws_subnet` (public and private; multiple for high availability)\r\n- `aws_internet_gateway` for outbound connection to the internet\r\n- `aws_route_table` (x2 for public and private subnets)\r\n- `aws_route_table_association`\r\n- `aws_eip` (Elastic IP for the NAT Gateway)\r\n- `aws_nat_gateway`\r\n- `aws_default_network_acl` to manage the default NACL with Terraform\r\n- `aws_default_security_group` to manage the default Security Group with Terraform\r\n- `aws_iam_role_policy_attachment` to attach `AWSLambdaVPCAccessExecutionRole` policy\r\n\r\n[Deploy AWS Lambda to VPC with Terraform](https://www.maxivanov.io/deploy-aws-lambda-to-vpc-with-terraform/).\r\n","title":"AWS Lambda connecting to Internet","body":"<p>If you are to do this with Terraform, here are the resources that you will need to configure (in addition to Lambda resources):</p>\n<ul>\n<li><code>aws_vpc</code></li>\n<li><code>aws_subnet</code> (public and private; multiple for high availability)</li>\n<li><code>aws_internet_gateway</code> for outbound connection to the internet</li>\n<li><code>aws_route_table</code> (x2 for public and private subnets)</li>\n<li><code>aws_route_table_association</code></li>\n<li><code>aws_eip</code> (Elastic IP for the NAT Gateway)</li>\n<li><code>aws_nat_gateway</code></li>\n<li><code>aws_default_network_acl</code> to manage the default NACL with Terraform</li>\n<li><code>aws_default_security_group</code> to manage the default Security Group with Terraform</li>\n<li><code>aws_iam_role_policy_attachment</code> to attach <code>AWSLambdaVPCAccessExecutionRole</code> policy</li>\n</ul>\n<p><a href=\"https://www.maxivanov.io/deploy-aws-lambda-to-vpc-with-terraform/\" rel=\"nofollow noreferrer\">Deploy AWS Lambda to VPC with Terraform</a>.</p>\n"},{"tags":[],"owner":{"account_id":23152783,"reputation":21,"user_id":17254510,"display_name":"Azeem Ayaz"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1635277659,"creation_date":1635277659,"answer_id":69729123,"question_id":37135725,"body_markdown":"For the ease if you are starting use the VPC launch template on the VPC home page to deploy the VPC. This will create public subnet, private subnet, NAT GW, IGW and all the required routes to access internet from private subnet.","title":"AWS Lambda connecting to Internet","body":"<p>For the ease if you are starting use the VPC launch template on the VPC home page to deploy the VPC. This will create public subnet, private subnet, NAT GW, IGW and all the required routes to access internet from private subnet.</p>\n"},{"tags":[],"owner":{"account_id":22860432,"reputation":21,"user_id":17004612,"display_name":"Michael B&#246;hm"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1650622856,"creation_date":1650622856,"answer_id":71967172,"question_id":37135725,"body_markdown":"&gt; If you need both, then I&#39;ll have to set up the VPC for internet access, which is a mess (hey AWS guys, if you have a well-defined process for it, please make it simple: turn it into a checkbox or button ;)\r\n\r\nYour prayers have been heard and AWS now has an &quot;Resources to create&quot; -&gt; &quot;VPC, subnets, etc.&quot; option when creating a new VPC where you can just choose the amount of subnets, AZs, NAT Gateways etc. in the wizard and it creates everything you described for you:\r\n[Create VPC][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/D7NtZ.png","title":"AWS Lambda connecting to Internet","body":"<blockquote>\n<p>If you need both, then I'll have to set up the VPC for internet access, which is a mess (hey AWS guys, if you have a well-defined process for it, please make it simple: turn it into a checkbox or button ;)</p>\n</blockquote>\n<p>Your prayers have been heard and AWS now has an &quot;Resources to create&quot; -&gt; &quot;VPC, subnets, etc.&quot; option when creating a new VPC where you can just choose the amount of subnets, AZs, NAT Gateways etc. in the wizard and it creates everything you described for you:\n<a href=\"https://i.stack.imgur.com/D7NtZ.png\" rel=\"nofollow noreferrer\">Create VPC</a></p>\n"},{"tags":[],"owner":{"account_id":10822741,"reputation":479,"user_id":7959689,"display_name":"Molossus"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671009544,"creation_date":1670975201,"answer_id":74792133,"question_id":37135725,"body_markdown":"I had a similar problem when trying to access the Secrets Manager after adding the Lambda function to a VPC. On this thread it discusses a NAT solution but also using a VPC endpoint:  \r\nhttps://stackoverflow.com/questions/62274069/aws-lambda-access-secrets-manager-from-within-vpc\r\n\r\nMore information:  \r\n[Access an AWS service using an interface VPC endpoint][1]\r\n\r\n\r\n  [1]: https://docs.aws.amazon.com/vpc/latest/privatelink/create-interface-endpoint.html#create-interface-endpoint","title":"AWS Lambda connecting to Internet","body":"<p>I had a similar problem when trying to access the Secrets Manager after adding the Lambda function to a VPC. On this thread it discusses a NAT solution but also using a VPC endpoint:<br />\n<a href=\"https://stackoverflow.com/questions/62274069/aws-lambda-access-secrets-manager-from-within-vpc\">AWS Lambda access Secrets Manager from within VPC</a></p>\n<p>More information:<br />\n<a href=\"https://docs.aws.amazon.com/vpc/latest/privatelink/create-interface-endpoint.html#create-interface-endpoint\" rel=\"nofollow noreferrer\">Access an AWS service using an interface VPC endpoint</a></p>\n"},{"tags":[],"owner":{"account_id":2896780,"reputation":1440,"user_id":2484361,"accept_rate":100,"display_name":"GarryOne"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694023576,"creation_date":1693957091,"answer_id":77048269,"question_id":37135725,"body_markdown":"If you want to keep the Lambda outside a `VPC` (having internet access), but you still need a specific service from the VPC, then you can follow my recommendation:\r\n\r\nSome services like `ElastiCache` (which was my case) will not be able to be exposed publicly, no matter how *public* you make your VPC, because that&#39;s how it was designed. \r\n\r\nBut there is a workaround which I managed to use it successfully for achieving that. \r\n\r\nYou can use a `EC2` instance deployed in that VPC (being it even private) and act as a *bastion*. \r\n\r\nYou&#39;ll need to use `socat` to make your `EC2` instance to act as a reverse-proxy.\r\n\r\n---\r\n\r\n**Steps:**\r\n\r\n1. Install socat: \r\n\r\n```sudo yum install -y socat```\r\n\r\n2. Run socat to forward traffic from the EC2 instance to the Redis cluster (update `redis-host` with your Redis Cluster host from AWS):\r\n\r\n`sudo socat TCP-LISTEN:6379,fork,reuseaddr TCP:redis-host:6379 &amp;\r\n`\r\n\r\nThat&#39;s all.\r\n\r\n---\r\nExtra:\r\n**Persisting across reboots:**\r\n\r\n1. Create a systemd service for socat:\r\n```sudo nano /etc/systemd/system/socat-redis.service```\r\n\r\n2. Add the following to the file:\r\n```\r\n[Unit]\r\nDescription=Socat Redis Forwarding\r\nAfter=network.target\r\n\r\n[Service]\r\nExecStart=/usr/bin/socat TCP-LISTEN:6379,fork,reuseaddr TCP:redis-demo.v4422l.clustercfg.use1.cache.amazonaws.com:6379\r\nRestart=always\r\nUser=root\r\n\r\n[Install]\r\nWantedBy=multi-user.target\r\n```\r\n\r\n3. Enable and start the service:\r\n```\r\nsudo systemctl enable socat-redis\r\nsudo systemctl start socat-redis\r\n```\r\n\r\nThis will ensure that the socat process starts on boot and will attempt to restart if it dies for any reason.\r\n","title":"AWS Lambda connecting to Internet","body":"<p>If you want to keep the Lambda outside a <code>VPC</code> (having internet access), but you still need a specific service from the VPC, then you can follow my recommendation:</p>\n<p>Some services like <code>ElastiCache</code> (which was my case) will not be able to be exposed publicly, no matter how <em>public</em> you make your VPC, because that's how it was designed.</p>\n<p>But there is a workaround which I managed to use it successfully for achieving that.</p>\n<p>You can use a <code>EC2</code> instance deployed in that VPC (being it even private) and act as a <em>bastion</em>.</p>\n<p>You'll need to use <code>socat</code> to make your <code>EC2</code> instance to act as a reverse-proxy.</p>\n<hr />\n<p><strong>Steps:</strong></p>\n<ol>\n<li>Install socat:</li>\n</ol>\n<p><code>sudo yum install -y socat</code></p>\n<ol start=\"2\">\n<li>Run socat to forward traffic from the EC2 instance to the Redis cluster (update <code>redis-host</code> with your Redis Cluster host from AWS):</li>\n</ol>\n<p><code>sudo socat TCP-LISTEN:6379,fork,reuseaddr TCP:redis-host:6379 &amp; </code></p>\n<p>That's all.</p>\n<hr />\n<p>Extra:\n<strong>Persisting across reboots:</strong></p>\n<ol>\n<li><p>Create a systemd service for socat:\n<code>sudo nano /etc/systemd/system/socat-redis.service</code></p>\n</li>\n<li><p>Add the following to the file:</p>\n</li>\n</ol>\n<pre><code>[Unit]\nDescription=Socat Redis Forwarding\nAfter=network.target\n\n[Service]\nExecStart=/usr/bin/socat TCP-LISTEN:6379,fork,reuseaddr TCP:redis-demo.v4422l.clustercfg.use1.cache.amazonaws.com:6379\nRestart=always\nUser=root\n\n[Install]\nWantedBy=multi-user.target\n</code></pre>\n<ol start=\"3\">\n<li>Enable and start the service:</li>\n</ol>\n<pre><code>sudo systemctl enable socat-redis\nsudo systemctl start socat-redis\n</code></pre>\n<p>This will ensure that the socat process starts on boot and will attempt to restart if it dies for any reason.</p>\n"}],"owner":{"account_id":5966457,"reputation":3452,"user_id":4690135,"accept_rate":65,"display_name":"gi&#242;"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36378,"favorite_count":0,"down_vote_count":0,"up_vote_count":36,"accepted_answer_id":55267891,"answer_count":8,"score":36,"last_activity_date":1694023576,"creation_date":1462875816,"question_id":37135725,"body_markdown":"TL;TR\r\n-\r\n\r\nI am trying to connect to internet from AWS Lambda, I have a private subnet with a NAT Gateway but still the function cannot connect to internet...\r\n\r\nFull Question\r\n-\r\n\r\nSo I am trying to access internet with my AWS Lambda function. I have tried both Java and NodeJS 4 with no luck.\r\n\r\nI have a private VPC with a subnet: 10.0.10.0/24\r\n\r\n[![enter image description here][1]][1]\r\n\r\nAs you can see I have added a rule to my NAT Gateway:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nI configured my AWS Lambda like this:\r\n\r\n[![enter image description here][3]][3]\r\n\r\nSelecting that subnet (10.0.10.0) and with a security group that is open to everything (both inbound and outbound)\r\n\r\nBut yet when I try to download something from internet, the lambda times out:\r\n\r\n    &#39;use strict&#39;;\r\n    console.log(&#39;Loading function&#39;);\r\n    \r\n    var http = require(&quot;http&quot;);\r\n    \r\n    exports.handler = (event, context, callback) =&gt; {\r\n        //console.log(&#39;Received event:&#39;, JSON.stringify(event, null, 2));\r\n        console.log(&#39;value1 =&#39;, event.key1);\r\n        console.log(&#39;value2 =&#39;, event.key2);\r\n        console.log(&#39;value3 =&#39;, event.key3);\r\n        \r\n        var options = {\r\n          host: &#39;www.virgilio.it&#39;,\r\n          port: 80,\r\n          path: &#39;/&#39;\r\n        };\r\n        \r\n        http.get(options, function(res) {\r\n          console.log(&quot;Got response: &quot; + res.statusCode);\r\n        }).on(&#39;error&#39;, function(e) {\r\n          console.log(&quot;Got error: &quot; + e.message);\r\n        });\r\n        \r\n        callback(null, event.key1);  // Echo back the first key value\r\n        // callback(&#39;Something went wrong&#39;);\r\n    };\r\n\r\n&gt; {\r\n&gt;  &quot;errorMessage&quot;: &quot;2016-05-10T10:11:46.936Z 79968883-1697-11e6-9e17-1f46a366f324 Task timed out after 55.00\r\n&gt; seconds&quot;\r\n&gt;  }\r\n\r\nIs this a bug?\r\n\r\n  [1]: http://i.stack.imgur.com/GZr78.png\r\n  [2]: http://i.stack.imgur.com/5ACF5.png\r\n  [3]: http://i.stack.imgur.com/w1Sy8.png\r\n\r\n\r\n**Note: the same function works If I don&#39;t select my VPC**","title":"AWS Lambda connecting to Internet","body":"<h2>TL;TR</h2>\n\n<p>I am trying to connect to internet from AWS Lambda, I have a private subnet with a NAT Gateway but still the function cannot connect to internet...</p>\n\n<h2>Full Question</h2>\n\n<p>So I am trying to access internet with my AWS Lambda function. I have tried both Java and NodeJS 4 with no luck.</p>\n\n<p>I have a private VPC with a subnet: 10.0.10.0/24</p>\n\n<p><a href=\"https://i.stack.imgur.com/GZr78.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/GZr78.png\" alt=\"enter image description here\"></a></p>\n\n<p>As you can see I have added a rule to my NAT Gateway:</p>\n\n<p><a href=\"https://i.stack.imgur.com/5ACF5.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/5ACF5.png\" alt=\"enter image description here\"></a></p>\n\n<p>I configured my AWS Lambda like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/w1Sy8.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/w1Sy8.png\" alt=\"enter image description here\"></a></p>\n\n<p>Selecting that subnet (10.0.10.0) and with a security group that is open to everything (both inbound and outbound)</p>\n\n<p>But yet when I try to download something from internet, the lambda times out:</p>\n\n<pre><code>'use strict';\nconsole.log('Loading function');\n\nvar http = require(\"http\");\n\nexports.handler = (event, context, callback) =&gt; {\n    //console.log('Received event:', JSON.stringify(event, null, 2));\n    console.log('value1 =', event.key1);\n    console.log('value2 =', event.key2);\n    console.log('value3 =', event.key3);\n\n    var options = {\n      host: 'www.virgilio.it',\n      port: 80,\n      path: '/'\n    };\n\n    http.get(options, function(res) {\n      console.log(\"Got response: \" + res.statusCode);\n    }).on('error', function(e) {\n      console.log(\"Got error: \" + e.message);\n    });\n\n    callback(null, event.key1);  // Echo back the first key value\n    // callback('Something went wrong');\n};\n</code></pre>\n\n<blockquote>\n  <p>{\n   \"errorMessage\": \"2016-05-10T10:11:46.936Z 79968883-1697-11e6-9e17-1f46a366f324 Task timed out after 55.00\n  seconds\"\n   }</p>\n</blockquote>\n\n<p>Is this a bug?</p>\n\n<p><strong>Note: the same function works If I don't select my VPC</strong></p>\n"},{"tags":["java","android","android-constraintlayout"],"owner":{"account_id":28226064,"reputation":55,"user_id":21576056,"display_name":"peque&#241;aluna"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694023507,"creation_date":1694023507,"question_id":77054299,"body_markdown":"I have read from the official guide the following: \r\n\r\nTo constrain one specific side based on the dimensions of another, you can pre append W,&quot; or H, to constrain the width or height respectively. For example, If one dimension is constrained by two targets (e.g. width is 0dp and centered on parent) you can indicate which side should be constrained, by adding the letter W (for constraining the width) or H (for constraining the height) in front of the ratio, separated by a comma\r\n\r\n\r\nIn conclusion if I use `app:layout_constraintDimensionRatio=&quot;H,1:1&quot;` it means that the height will be fixed and the width will be set to be the same size as the height? For example if my element has more width than height, if I use `app:layout_constraintDimensionRatio=&quot;H,1:1&quot;` that width now will become smaller to be the samesize as the height but if I use `app:layout_constraintDimensionRatio=&quot;W,1:1&quot;` now what will grow will be the height to be width and height the same size as the width now is fixed?\r\n\r\n","title":"Difference between app:layout_constraintDimensionRatio=&quot;H,1:1&quot; and app:layout_constraintDimensionRatio=&quot;W,1:1&quot;","body":"<p>I have read from the official guide the following:</p>\n<p>To constrain one specific side based on the dimensions of another, you can pre append W,&quot; or H, to constrain the width or height respectively. For example, If one dimension is constrained by two targets (e.g. width is 0dp and centered on parent) you can indicate which side should be constrained, by adding the letter W (for constraining the width) or H (for constraining the height) in front of the ratio, separated by a comma</p>\n<p>In conclusion if I use <code>app:layout_constraintDimensionRatio=&quot;H,1:1&quot;</code> it means that the height will be fixed and the width will be set to be the same size as the height? For example if my element has more width than height, if I use <code>app:layout_constraintDimensionRatio=&quot;H,1:1&quot;</code> that width now will become smaller to be the samesize as the height but if I use <code>app:layout_constraintDimensionRatio=&quot;W,1:1&quot;</code> now what will grow will be the height to be width and height the same size as the width now is fixed?</p>\n"},{"tags":["java","postgresql","hibernate"],"answers":[{"tags":[],"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694023418,"creation_date":1694023418,"answer_id":77054291,"question_id":77054090,"body_markdown":"The table with which an entity class is associated is a characteristic of the entity class itself, not of other classes that have a relationship with it.  So no, in a given persistence unit, you cannot have one entity class mapped to multiple different tables.\r\n\r\nBut maybe you can get close to what you want with a mapped superclass of multiple distinct entities.  You could have:\r\n```\r\n// Not an entity, but contains mapping information for entity subclasses\r\n@MappedSuperclass\r\n@Getter\r\n@Setter\r\npublic class Settings {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Integer id;\r\n}\r\n\r\n@Entity\r\n@Table(schema = &quot;company&quot;, name = &quot;company_settings&quot;)\r\n@Getter\r\n@Setter\r\npublic class CompanySettings extends Settings {\r\n\r\n    @ManyToOne\r\n    private Company company;\r\n}\r\n\r\n@Entity\r\n@Table(schema = &quot;company&quot;, name = &quot;user_settings&quot;)\r\n@Getter\r\n@Setter\r\npublic class UserSettings extends Settings {\r\n\r\n    @ManyToOne\r\n    private User user;\r\n}\r\n```\r\nThe `Company` and `User` entities would need to map their relationships to their respective varieties of `Settings`, but you could nevertheless reduce code duplication between the settings entities this way. For example,\r\n```\r\npublic class Company  {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Integer id;\r\n\r\n    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER, mappedBy = &quot;company&quot;)\r\n    private List&lt;CompanySettings&gt; settings;\r\n}\r\n```\r\nAnd you could handle `CompanySettings`es and `UserSettings`es generically as `Settings`es wherever, if anywhere, it makes sense to do so (which does not include in `Company` or `User`).","title":"How to map one entity to two tables","body":"<p>The table with which an entity class is associated is a characteristic of the entity class itself, not of other classes that have a relationship with it.  So no, in a given persistence unit, you cannot have one entity class mapped to multiple different tables.</p>\n<p>But maybe you can get close to what you want with a mapped superclass of multiple distinct entities.  You could have:</p>\n<pre><code>// Not an entity, but contains mapping information for entity subclasses\n@MappedSuperclass\n@Getter\n@Setter\npublic class Settings {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Integer id;\n}\n\n@Entity\n@Table(schema = &quot;company&quot;, name = &quot;company_settings&quot;)\n@Getter\n@Setter\npublic class CompanySettings extends Settings {\n\n    @ManyToOne\n    private Company company;\n}\n\n@Entity\n@Table(schema = &quot;company&quot;, name = &quot;user_settings&quot;)\n@Getter\n@Setter\npublic class UserSettings extends Settings {\n\n    @ManyToOne\n    private User user;\n}\n</code></pre>\n<p>The <code>Company</code> and <code>User</code> entities would need to map their relationships to their respective varieties of <code>Settings</code>, but you could nevertheless reduce code duplication between the settings entities this way. For example,</p>\n<pre><code>public class Company  {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Integer id;\n\n    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER, mappedBy = &quot;company&quot;)\n    private List&lt;CompanySettings&gt; settings;\n}\n</code></pre>\n<p>And you could handle <code>CompanySettings</code>es and <code>UserSettings</code>es generically as <code>Settings</code>es wherever, if anywhere, it makes sense to do so (which does not include in <code>Company</code> or <code>User</code>).</p>\n"}],"owner":{"account_id":14195569,"reputation":805,"user_id":10254976,"display_name":"Самир Шахмурадлы"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694023418,"creation_date":1694021151,"question_id":77054090,"body_markdown":"    public class Company  {\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Integer id;\r\n   \r\n    \r\n        @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER)\r\n        @JoinTable(schema = &quot;company&quot;,\r\n            name = &quot;company_settings&quot;,\r\n            joinColumns = @JoinColumn(name = &quot;company_id&quot;))\r\n        private List&lt;Settings&gt; settings;\r\n    }\r\nmigration on flyway\r\n\r\n        CREATE TABLE company.company_settings (\r\n                                                    id serial primary key,\r\n                                                    ...\r\n    );\r\nSettings class\r\n\r\n    @Entity\r\n    @Table(schema = &quot;company&quot;)\r\n    @Getter\r\n    @Setter\r\n    public class Settings {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Integer id;\r\n    \r\n    }\r\n\r\nproblem what i see\r\n\r\n    Caused by: org.postgresql.util.PSQLException: ERROR: relation &quot;company.settings&quot; does not exist\r\n\r\nwhy i dont want to use table name in @Table - i will need to use Settings class for another table as well. It will be the same table but for user.\r\n\r\n    public class User  {\r\n\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        private Integer id;\r\n   \r\n    \r\n        @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER)\r\n        @JoinTable(schema = &quot;user&quot;,\r\n            name = &quot;user_settings&quot;,\r\n            joinColumns = @JoinColumn(name = &quot;user_id&quot;))\r\n        private List&lt;Settings&gt; settings;\r\n    }\r\n\r\ni want to have 2 table `user_settings` and `company_settings` in different schemas.\r\nis it possible to do with `@JoinTable`?\r\nI can use one class and extend it for user and company, or i can have 1 table for both of them.","title":"How to map one entity to two tables","body":"<pre><code>public class Company  {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Integer id;\n\n\n    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER)\n    @JoinTable(schema = &quot;company&quot;,\n        name = &quot;company_settings&quot;,\n        joinColumns = @JoinColumn(name = &quot;company_id&quot;))\n    private List&lt;Settings&gt; settings;\n}\n</code></pre>\n<p>migration on flyway</p>\n<pre><code>    CREATE TABLE company.company_settings (\n                                                id serial primary key,\n                                                ...\n);\n</code></pre>\n<p>Settings class</p>\n<pre><code>@Entity\n@Table(schema = &quot;company&quot;)\n@Getter\n@Setter\npublic class Settings {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Integer id;\n\n}\n</code></pre>\n<p>problem what i see</p>\n<pre><code>Caused by: org.postgresql.util.PSQLException: ERROR: relation &quot;company.settings&quot; does not exist\n</code></pre>\n<p>why i dont want to use table name in @Table - i will need to use Settings class for another table as well. It will be the same table but for user.</p>\n<pre><code>public class User  {\n\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Integer id;\n\n\n    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER)\n    @JoinTable(schema = &quot;user&quot;,\n        name = &quot;user_settings&quot;,\n        joinColumns = @JoinColumn(name = &quot;user_id&quot;))\n    private List&lt;Settings&gt; settings;\n}\n</code></pre>\n<p>i want to have 2 table <code>user_settings</code> and <code>company_settings</code> in different schemas.\nis it possible to do with <code>@JoinTable</code>?\nI can use one class and extend it for user and company, or i can have 1 table for both of them.</p>\n"},{"tags":["java","dataset","virtual","gdal"],"comments":[{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1694018476,"post_id":77053826,"comment_id":135837177,"body_markdown":"You can use [GDAL Java Library](https://gdal.org/api/java/index.html)","body":"You can use <a href=\"https://gdal.org/api/java/index.html\" rel=\"nofollow noreferrer\">GDAL Java Library</a>"},{"owner":{"account_id":5971936,"reputation":11,"user_id":4694028,"display_name":"m3lter"},"score":0,"creation_date":1694018767,"post_id":77053826,"comment_id":135837247,"body_markdown":"I know that there exists Java library but what I don&#39;t know is how to use it to get that virtual dataset.","body":"I know that there exists Java library but what I don&#39;t know is how to use it to get that virtual dataset."},{"owner":{"account_id":5971936,"reputation":11,"user_id":4694028,"display_name":"m3lter"},"score":0,"creation_date":1694019266,"post_id":77053826,"comment_id":135837351,"body_markdown":"@DiegoBorba Can you help me with this?","body":"@DiegoBorba Can you help me with this?"},{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1694019860,"post_id":77053826,"comment_id":135837472,"body_markdown":"I promisse that I will try!","body":"I promisse that I will try!"}],"answers":[{"tags":[],"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694022677,"creation_date":1694019802,"answer_id":77053988,"question_id":77053826,"body_markdown":"From what I read in the [documentation][1] you can do it this way:\r\n\r\nFirst, you register the drivers:\r\n\r\n```java\r\ngdal.AllRegister();\r\n```\r\n\r\n&gt; This function should generally be called once at the beginning of the application. - [Class gdal][2]\r\n\r\nThen, you use [`gdal.GetDriverByName`][3] to get the driver and [`Driver.Create`][4] to create the dataset:\r\n\r\n```java\r\n// Sample dataset\r\nDataset vrtDataset = gdal.GetDriverByName(&quot;VRT&quot;).Create(&quot;allFiles.vrt&quot;, 0, 0, 0, gdalconst.GDT_Unknown);\r\n```\r\n\r\n**Note:** You should change the [`GDT_Unknown`][5] and the size/band values.\r\n\r\n\r\n  [1]: https://gdal.org/java/index.html\r\n  [2]: https://gdal.org/java/org/gdal/gdal/gdal.html#AllRegister()\r\n  [3]: https://gdal.org/java/org/gdal/gdal/gdal.html#GetDriverByName(java.lang.String)\r\n  [4]: https://gdal.org/java/org/gdal/gdal/Driver.html#Create(java.lang.String,int,int,int)\r\n  [5]: https://gdal.org/java/org/gdal/gdalconst/gdalconstConstants.html#GDT_Unknown","title":"How to create gdal virtual dataset in Java?","body":"<p>From what I read in the <a href=\"https://gdal.org/java/index.html\" rel=\"nofollow noreferrer\">documentation</a> you can do it this way:</p>\n<p>First, you register the drivers:</p>\n<pre class=\"lang-java prettyprint-override\"><code>gdal.AllRegister();\n</code></pre>\n<blockquote>\n<p>This function should generally be called once at the beginning of the application. - <a href=\"https://gdal.org/java/org/gdal/gdal/gdal.html#AllRegister()\" rel=\"nofollow noreferrer\">Class gdal</a></p>\n</blockquote>\n<p>Then, you use <a href=\"https://gdal.org/java/org/gdal/gdal/gdal.html#GetDriverByName(java.lang.String)\" rel=\"nofollow noreferrer\"><code>gdal.GetDriverByName</code></a> to get the driver and <a href=\"https://gdal.org/java/org/gdal/gdal/Driver.html#Create(java.lang.String,int,int,int)\" rel=\"nofollow noreferrer\"><code>Driver.Create</code></a> to create the dataset:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Sample dataset\nDataset vrtDataset = gdal.GetDriverByName(&quot;VRT&quot;).Create(&quot;allFiles.vrt&quot;, 0, 0, 0, gdalconst.GDT_Unknown);\n</code></pre>\n<p><strong>Note:</strong> You should change the <a href=\"https://gdal.org/java/org/gdal/gdalconst/gdalconstConstants.html#GDT_Unknown\" rel=\"nofollow noreferrer\"><code>GDT_Unknown</code></a> and the size/band values.</p>\n"}],"owner":{"account_id":5971936,"reputation":11,"user_id":4694028,"display_name":"m3lter"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1694022677,"creation_date":1694018080,"question_id":77053826,"body_markdown":"By command line virtual dataset is created like this\r\n\r\n`$ gdalbuildvrt allFiles.vrt file1.tif file2.tif file3.tif file4.tif`\r\n\r\nand I know there is Java library but how do I create virtual dataset?\r\n\r\nI have investigated web site https://gdal.org/java/index.html and used internet search engines but didn&#39;t find help.","title":"How to create gdal virtual dataset in Java?","body":"<p>By command line virtual dataset is created like this</p>\n<p><code>$ gdalbuildvrt allFiles.vrt file1.tif file2.tif file3.tif file4.tif</code></p>\n<p>and I know there is Java library but how do I create virtual dataset?</p>\n<p>I have investigated web site <a href=\"https://gdal.org/java/index.html\" rel=\"nofollow noreferrer\">https://gdal.org/java/index.html</a> and used internet search engines but didn't find help.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":350117,"reputation":8663,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":2,"creation_date":1694011269,"post_id":77052860,"comment_id":135835609,"body_markdown":"Does this answer your question? [Sonar: Disable XML external entity (XXE) processing](https://stackoverflow.com/questions/63501145/sonar-disable-xml-external-entity-xxe-processing)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/63501145/sonar-disable-xml-external-entity-xxe-processing\">Sonar: Disable XML external entity (XXE) processing</a>"},{"owner":{"account_id":22003694,"reputation":45,"user_id":16275037,"display_name":"Pkdrc "},"score":0,"creation_date":1694019696,"post_id":77052860,"comment_id":135837443,"body_markdown":"Could you please suggest how to do this for TransformerFactory?","body":"Could you please suggest how to do this for TransformerFactory?"}],"answers":[{"comments":[{"owner":{"account_id":22003694,"reputation":45,"user_id":16275037,"display_name":"Pkdrc "},"score":0,"creation_date":1694071201,"post_id":77054185,"comment_id":135843482,"body_markdown":"Thanks for your answer. 1st issue got resolved. But, now I am facing &quot;A malicious xslt could be provided to trigger remote code execution&quot; vulnerability for the below code: Transformer ts= factory.newTransformer(ss); could you please suggest any resolution on this.","body":"Thanks for your answer. 1st issue got resolved. But, now I am facing &quot;A malicious xslt could be provided to trigger remote code execution&quot; vulnerability for the below code: Transformer ts= factory.newTransformer(ss); could you please suggest any resolution on this."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":1,"creation_date":1694088319,"post_id":77054185,"comment_id":135846880,"body_markdown":"Use Class.getResource instead of ClassLoader.getResource.  And place the XSLT in the same package as your class, so it is unlikely to be shadowed (deliberately or accidentally) by another library.","body":"Use Class.getResource instead of ClassLoader.getResource.  And place the XSLT in the same package as your class, so it is unlikely to be shadowed (deliberately or accidentally) by another library."}],"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1694022242,"creation_date":1694022242,"answer_id":77054185,"question_id":77052860,"body_markdown":"The [documentation of TransformerFactory.setFeature](https://docs.oracle.com/en/java/javase/20/docs/api/java.xml/javax/xml/transform/TransformerFactory.html#setFeature(java.lang.String,boolean)) says:\r\n\r\n&gt;All implementations are required to support the `XMLConstants.FEATURE_SECURE_PROCESSING` feature.\r\n\r\nSo all you need to do is:\r\n\r\n    TransformerFactory factory = TransformerFactory.newInstance();\r\n    factory.setFeature(XMLConstants.FEATURE_SECURE_PROCESSING, true);\r\n    Transformer ts = factory.newTransformer(ss);\r\n","title":"Vulnerability due to TransformerFactory","body":"<p>The <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.xml/javax/xml/transform/TransformerFactory.html#setFeature(java.lang.String,boolean)\" rel=\"nofollow noreferrer\">documentation of TransformerFactory.setFeature</a> says:</p>\n<blockquote>\n<p>All implementations are required to support the <code>XMLConstants.FEATURE_SECURE_PROCESSING</code> feature.</p>\n</blockquote>\n<p>So all you need to do is:</p>\n<pre><code>TransformerFactory factory = TransformerFactory.newInstance();\nfactory.setFeature(XMLConstants.FEATURE_SECURE_PROCESSING, true);\nTransformer ts = factory.newTransformer(ss);\n</code></pre>\n"}],"owner":{"account_id":22003694,"reputation":45,"user_id":16275037,"display_name":"Pkdrc "},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":109,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77054185,"answer_count":1,"score":0,"last_activity_date":1694022242,"creation_date":1694010319,"question_id":77052860,"body_markdown":"I am getting vulnerability issue due to below code:\r\n\r\nStreamSource ss=new StreamSource(this.getClass().getClassLoader().getResourceAsStream(template));\r\n\r\nTransformer ts=TransformerFactory.newInstance().newTransformer(ss);\r\n\r\nI am facing vulnerability issue in sonarqube for 2nd line(Disable access to external entities in XML parsing).\r\nCan anyone please help me to resolve this vulnerability issue \r\n","title":"Vulnerability due to TransformerFactory","body":"<p>I am getting vulnerability issue due to below code:</p>\n<p>StreamSource ss=new StreamSource(this.getClass().getClassLoader().getResourceAsStream(template));</p>\n<p>Transformer ts=TransformerFactory.newInstance().newTransformer(ss);</p>\n<p>I am facing vulnerability issue in sonarqube for 2nd line(Disable access to external entities in XML parsing).\nCan anyone please help me to resolve this vulnerability issue</p>\n"},{"tags":["java","spring-boot","docker","dockerfile","docker-entrypoint"],"comments":[{"owner":{"account_id":1223835,"reputation":75878,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1561773946,"post_id":56814400,"comment_id":100183112,"body_markdown":"Have you tried using the environment variable `SPRING_PROFILES_ACTIVE`?","body":"Have you tried using the environment variable <code>SPRING_PROFILES_ACTIVE</code>?"}],"answers":[{"comments":[{"owner":{"account_id":3896094,"reputation":1983,"user_id":3225105,"accept_rate":14,"display_name":"TechiRik"},"score":0,"creation_date":1562010856,"post_id":56814432,"comment_id":100235351,"body_markdown":"Sorry, as clarified above, I don&#39;t want to mention this in the docker file. Else I would need a separate docker file for each environment I am running it in","body":"Sorry, as clarified above, I don&#39;t want to mention this in the docker file. Else I would need a separate docker file for each environment I am running it in"}],"tags":[],"owner":{"account_id":7187217,"reputation":261,"user_id":5488802,"accept_rate":50,"display_name":"Sharan"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1561770792,"creation_date":1561770792,"answer_id":56814432,"question_id":56814400,"body_markdown":"you have to provide the JAVA_OPTS inside the docker file, example of a docker file is below.\r\n\r\n    FROM {{ env &quot;DOCKER_REGISTRY&quot; }}/asdf/osX-jre8:{{ env &quot;BASE_IMAGE_VERSION&quot; }}\r\n    \r\n    ADD target/yourapp.jar /app.jar\r\n    \r\n    #Environment vars\r\n    ENV NO_PREFIX true\r\n    ENV APP_NAME &quot;xxx&quot;\r\n    ENV APP_UUID &quot;81b35e09-2a10-48c3-a091-xxxxxxxxx&quot;\r\n    ENV HEALTH_CHECK_URL http://localhost:9000/health\r\n    ENV SERVICE_PORT 8080\r\n    \r\n    ENV JAVA_OPTS &quot;-Dsun.net.client.defaultConnectTimeout=2000 -Dsun.net.client.defaultReadTimeout=20000 -XX:+PrintGC -XX:+PrintGCTimeStamps -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/alloc/logs&quot;\r\n\r\n","title":"How to pass Java options/variables to Springboot app in docker run command","body":"<p>you have to provide the JAVA_OPTS inside the docker file, example of a docker file is below.</p>\n\n<pre><code>FROM {{ env \"DOCKER_REGISTRY\" }}/asdf/osX-jre8:{{ env \"BASE_IMAGE_VERSION\" }}\n\nADD target/yourapp.jar /app.jar\n\n#Environment vars\nENV NO_PREFIX true\nENV APP_NAME \"xxx\"\nENV APP_UUID \"81b35e09-2a10-48c3-a091-xxxxxxxxx\"\nENV HEALTH_CHECK_URL http://localhost:9000/health\nENV SERVICE_PORT 8080\n\nENV JAVA_OPTS \"-Dsun.net.client.defaultConnectTimeout=2000 -Dsun.net.client.defaultReadTimeout=20000 -XX:+PrintGC -XX:+PrintGCTimeStamps -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/alloc/logs\"\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3896094,"reputation":1983,"user_id":3225105,"accept_rate":14,"display_name":"TechiRik"},"score":0,"creation_date":1562009769,"post_id":56815217,"comment_id":100234944,"body_markdown":"Thanks, michalk and @Chrylis. The SPRING_PROFILES_ACTIVE solution did work. However, solution #1, setting $JAVA_OPTS did not work. I updated the docker file as you have mentioned, and then used the following command: `docker run -p 8000:80 demo-app --rm -e JAVA_OPTS=&#39;-Dspring.profiles.active=dockerdev&#39;`, but it could not pick up the JAVA_OPTS. Where am I going wrong?","body":"Thanks, michalk and @Chrylis. The SPRING_PROFILES_ACTIVE solution did work. However, solution #1, setting $JAVA_OPTS did not work. I updated the docker file as you have mentioned, and then used the following command: <code>docker run -p 8000:80 demo-app --rm -e JAVA_OPTS=&#39;-Dspring.profiles.active=dockerdev&#39;</code>, but it could not pick up the JAVA_OPTS. Where am I going wrong?"},{"owner":{"account_id":9697932,"reputation":1242,"user_id":7193786,"accept_rate":87,"display_name":"Sahbaz"},"score":1,"creation_date":1584397630,"post_id":56815217,"comment_id":107420245,"body_markdown":"Solution 1 seems clean and can be easily updated to be dynamic","body":"Solution 1 seems clean and can be easily updated to be dynamic"},{"owner":{"account_id":252657,"reputation":356,"user_id":530846,"accept_rate":100,"display_name":"KramKroc"},"score":2,"creation_date":1590574439,"post_id":56815217,"comment_id":109728551,"body_markdown":"@TechiRik you should accept the answer or indicate if more help is needed.","body":"@TechiRik you should accept the answer or indicate if more help is needed."},{"owner":{"account_id":4279009,"reputation":7633,"user_id":3498962,"display_name":"Essex Boy"},"score":2,"creation_date":1620794313,"post_id":56815217,"comment_id":119303159,"body_markdown":"ENTRYPOINT [&quot;java&quot;,&quot;-Dspring.profiles.active=${SPRING_PROFILE}&quot;,&quot;-jar&quot;,&quot;/opt/lib/demo-app.jar&quot;] didn&#39;t work for me, it wouldn&#39;t expand the ${SPRING_PROFILE} until I got rid of the []","body":"ENTRYPOINT [&quot;java&quot;,&quot;-Dspring.profiles.active=${SPRING_PROFILE}&quot;,&quot;-jar&quot;,&zwnj;&#8203;&quot;/opt/lib/demo-app.j&zwnj;&#8203;ar&quot;] didn&#39;t work for me, it wouldn&#39;t expand the ${SPRING_PROFILE} until I got rid of the []"}],"tags":[],"owner":{"account_id":6390592,"reputation":16008,"user_id":4956907,"display_name":"Michał Krzywański"},"comment_count":4,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1694021861,"creation_date":1561784951,"answer_id":56815217,"question_id":56814400,"body_markdown":"# Solution 1\r\n\r\nYou can override any property from your configuration by passing it to docker container using `-e` option. As explained in [`Externalized configuration`](https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-external-config) the environment variable name should be uppercased and splitted using underscore. So for example to pass `spring.profiles.active` property you could use `SPRING_PROFILES_ACTIVE` environment variable during container run :\r\n````\r\ndocker run -p 8000:80 -e SPRING_PROFILES_ACTIVE=dockerdev demo-app\r\n````\r\nAnd this variable should be picked automatically by Spring from environment.\r\n\r\n# Solution 2\r\n\r\nChange Dockerfile to :\r\n````\r\nFROM openjdk:8-jdk-alpine\r\nARG JAR_FILE=target/demo-app-1.0-SNAPSHOT.jar\r\n\r\n# environment variable with default value\r\nENV SPRING_PROFILE=dev\r\n\r\nCOPY ${JAR_FILE} /opt/lib/demo-app.jar\r\n\r\nEXPOSE 80\r\n\r\n#run with environment variable\r\nENTRYPOINT java -Dspring.profiles.active=$SPRING_PROFILE -jar /opt/lib/demo-app.jar\r\n````\r\nand then run the container passing the environment variable :\r\n````\r\ndocker run -p 8000:80 --rm -e SPRING_PROFILE=dockerdev demo-app\r\n````","title":"How to pass Java options/variables to Springboot app in docker run command","body":"<h1>Solution 1</h1>\n<p>You can override any property from your configuration by passing it to docker container using <code>-e</code> option. As explained in <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-external-config\" rel=\"nofollow noreferrer\"><code>Externalized configuration</code></a> the environment variable name should be uppercased and splitted using underscore. So for example to pass <code>spring.profiles.active</code> property you could use <code>SPRING_PROFILES_ACTIVE</code> environment variable during container run :</p>\n<pre><code>docker run -p 8000:80 -e SPRING_PROFILES_ACTIVE=dockerdev demo-app\n</code></pre>\n<p>And this variable should be picked automatically by Spring from environment.</p>\n<h1>Solution 2</h1>\n<p>Change Dockerfile to :</p>\n<pre><code>FROM openjdk:8-jdk-alpine\nARG JAR_FILE=target/demo-app-1.0-SNAPSHOT.jar\n\n# environment variable with default value\nENV SPRING_PROFILE=dev\n\nCOPY ${JAR_FILE} /opt/lib/demo-app.jar\n\nEXPOSE 80\n\n#run with environment variable\nENTRYPOINT java -Dspring.profiles.active=$SPRING_PROFILE -jar /opt/lib/demo-app.jar\n</code></pre>\n<p>and then run the container passing the environment variable :</p>\n<pre><code>docker run -p 8000:80 --rm -e SPRING_PROFILE=dockerdev demo-app\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9128149,"reputation":11117,"user_id":6790948,"accept_rate":0,"display_name":"mchawre"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1561812281,"creation_date":1561812281,"answer_id":56817646,"question_id":56814400,"body_markdown":"Make use of [application.properties][1] in springboot to override any variables from outside. We heavily use this in our production environments.\r\n\r\nYou need to:\r\n\r\n - Change your `ENTRYPOINT` to:\r\n\r\n```\r\nENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/opt/lib/demo-app.jar&quot;,&quot;--spring.config.additional-location=/application.properties&quot;]\r\n```\r\n\r\n - Create `application.properties` file with contents:\r\n```\r\nspring.profiles.active=dockerdev\r\n```\r\nYou can also override any variables used in your springboot code using `application.properties` and can also override springboot specific variables as mentioned [here][1].\r\n\r\n - Also change your `docker run` command to:\r\n```\r\ndocker run -itd -v /path/to/application.properties:/application.properties image-name\r\n```\r\n   So that `application.properties` from your host will get mounted\r\n   inside your docker container.\r\n\r\n**NOTE:** If `--spring.config.additional-location` don&#39;t works then try `--spring.config.location` option.\r\n\r\nHope this helps.\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html","title":"How to pass Java options/variables to Springboot app in docker run command","body":"<p>Make use of <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html\" rel=\"noreferrer\">application.properties</a> in springboot to override any variables from outside. We heavily use this in our production environments.</p>\n\n<p>You need to:</p>\n\n<ul>\n<li>Change your <code>ENTRYPOINT</code> to:</li>\n</ul>\n\n<pre><code>ENTRYPOINT [\"java\",\"-jar\",\"/opt/lib/demo-app.jar\",\"--spring.config.additional-location=/application.properties\"]\n</code></pre>\n\n<ul>\n<li>Create <code>application.properties</code> file with contents:</li>\n</ul>\n\n<pre><code>spring.profiles.active=dockerdev\n</code></pre>\n\n<p>You can also override any variables used in your springboot code using <code>application.properties</code> and can also override springboot specific variables as mentioned <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/common-application-properties.html\" rel=\"noreferrer\">here</a>.</p>\n\n<ul>\n<li>Also change your <code>docker run</code> command to:</li>\n</ul>\n\n<pre><code>docker run -itd -v /path/to/application.properties:/application.properties image-name\n</code></pre>\n\n<p>So that <code>application.properties</code> from your host will get mounted\n   inside your docker container.</p>\n\n<p><strong>NOTE:</strong> If <code>--spring.config.additional-location</code> don't works then try <code>--spring.config.location</code> option.</p>\n\n<p>Hope this helps.</p>\n"},{"tags":[],"owner":{"account_id":13261077,"reputation":2382,"user_id":9575631,"display_name":"Ousama"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1594741496,"creation_date":1594741496,"answer_id":62898928,"question_id":56814400,"body_markdown":"You should add the env variable JAVA_OPTS to your Dockerfile\r\n\r\n    FROM tomcat:8.5.47-jdk8-openjdk\r\n    \r\n    LABEL build_date=&quot;2020-07-14&quot; \\\r\n    \t  name=&quot;Ousama EL IDRISSI&quot; \\\r\n    \t  version=&quot;1.0&quot; \\\r\n    \t  description=&quot;Docker Image made by la7ya&quot;\r\n    \r\n    EXPOSE 8080\r\n    \r\n    COPY ./target/la7yaman-0.0.1-SNAPSHOT.war /usr/local/tomcat/webapps/ROOT.war\r\n    \r\n    ENV JAVA_OPTS=&quot;-Dspring.profiles.active=docker-demo&quot;\r\n    \r\n    CMD [&quot;catalina.sh&quot;, &quot;run&quot;]\r\n\r\n","title":"How to pass Java options/variables to Springboot app in docker run command","body":"<p>You should add the env variable JAVA_OPTS to your Dockerfile</p>\n<pre><code>FROM tomcat:8.5.47-jdk8-openjdk\n\nLABEL build_date=&quot;2020-07-14&quot; \\\n      name=&quot;Ousama EL IDRISSI&quot; \\\n      version=&quot;1.0&quot; \\\n      description=&quot;Docker Image made by la7ya&quot;\n\nEXPOSE 8080\n\nCOPY ./target/la7yaman-0.0.1-SNAPSHOT.war /usr/local/tomcat/webapps/ROOT.war\n\nENV JAVA_OPTS=&quot;-Dspring.profiles.active=docker-demo&quot;\n\nCMD [&quot;catalina.sh&quot;, &quot;run&quot;]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19153837,"reputation":31,"user_id":13991128,"display_name":"Subhashis Chattejee"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1595630705,"creation_date":1595630705,"answer_id":63082353,"question_id":56814400,"body_markdown":"People who are looking for the answer for non Spring (Plain Java Applications)\r\n\r\nThis is how to send System properties/arguments: Change the Dockerfile to\r\n\r\n```\r\nFROM openjdk:8-jdk-alpine\r\nCOPY target/demo-app-1.0-SNAPSHOT.jar demo-app.jar\r\n\r\nEXPOSE 8080\r\n\r\nENTRYPOINT java -jar demo-app.jar\r\n```\r\nBuild the image:\r\n```\r\ndocker build -t demo-app .\r\n```\r\nThen run the docker container using following command:\r\n```\r\ndocker run -e &quot;JAVA_TOOL_OPTIONS=-Xms1024m -Xmx2048m -Dspring.profiles.active=dockerdev&quot; -p 8080:8080 demo-app\r\n```\r\n","title":"How to pass Java options/variables to Springboot app in docker run command","body":"<p>People who are looking for the answer for non Spring (Plain Java Applications)</p>\n<p>This is how to send System properties/arguments: Change the Dockerfile to</p>\n<pre><code>FROM openjdk:8-jdk-alpine\nCOPY target/demo-app-1.0-SNAPSHOT.jar demo-app.jar\n\nEXPOSE 8080\n\nENTRYPOINT java -jar demo-app.jar\n</code></pre>\n<p>Build the image:</p>\n<pre><code>docker build -t demo-app .\n</code></pre>\n<p>Then run the docker container using following command:</p>\n<pre><code>docker run -e &quot;JAVA_TOOL_OPTIONS=-Xms1024m -Xmx2048m -Dspring.profiles.active=dockerdev&quot; -p 8080:8080 demo-app\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20570015,"reputation":71,"user_id":15098558,"display_name":"Peng Zhu"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1611834518,"creation_date":1611834518,"answer_id":65936534,"question_id":56814400,"body_markdown":"JAVA_TOOL_OPTIONS maybe the right answer.\r\n\r\n    docker run -p 8000:80 -e JAVA_TOOL_OPTIONS=&#39;-Dspring.profiles.active=dockerdev&#39; demo-app","title":"How to pass Java options/variables to Springboot app in docker run command","body":"<p>JAVA_TOOL_OPTIONS maybe the right answer.</p>\n<pre><code>docker run -p 8000:80 -e JAVA_TOOL_OPTIONS='-Dspring.profiles.active=dockerdev' demo-app\n</code></pre>\n"}],"owner":{"account_id":3896094,"reputation":1983,"user_id":3225105,"accept_rate":14,"display_name":"TechiRik"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51112,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"answer_count":6,"score":19,"last_activity_date":1694021861,"creation_date":1561770188,"question_id":56814400,"body_markdown":"I have a Spring Boot application which uses profiles to configure in different environments. I want to pass this profile information as a parameter to my `docker run` command. How do I go about doing it?\r\n\r\nHere is my dockerfile\r\n\r\n    FROM openjdk:8-jdk-alpine\r\n    ARG JAR_FILE=target/demo-app-1.0-SNAPSHOT.jar\r\n    \r\n    COPY ${JAR_FILE} /opt/lib/demo-app.jar\r\n    \r\n    EXPOSE 80\r\n    \r\n    # ENTRYPOINT [&quot;java&quot;,&quot;-Dspring.profiles.active=dockerdev&quot;,&quot;-jar&quot;,&quot;/opt/lib/demo-app.jar&quot;]\r\n    # Above line works, but not desired as profile will change in diff envs\r\n    ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/opt/lib/demo-app.jar&quot;]\r\n\r\n\r\nI have tried the following, but, none works\r\n\r\n`docker run -p 8000:80 demo-app -Dspring.profiles.active=dockerdev`\r\n\r\n`docker run -p 8000:80 demo-app --rm -e JAVA_OPTS=&#39;-Dspring.profiles.active=dockerdev&#39;`\r\n\r\nPlease help.\r\n\r\n**Clarification:** I am using multiple profiles. Hence I do not want the active profile to be mentioned within the application or the docker file. Instead, I want to use the same application and docker file and run it in different environments, and pass the active profile to be used in the docker run command. Apologies if anything above did not clarify that.\r\n","title":"How to pass Java options/variables to Springboot app in docker run command","body":"<p>I have a Spring Boot application which uses profiles to configure in different environments. I want to pass this profile information as a parameter to my <code>docker run</code> command. How do I go about doing it?</p>\n\n<p>Here is my dockerfile</p>\n\n<pre><code>FROM openjdk:8-jdk-alpine\nARG JAR_FILE=target/demo-app-1.0-SNAPSHOT.jar\n\nCOPY ${JAR_FILE} /opt/lib/demo-app.jar\n\nEXPOSE 80\n\n# ENTRYPOINT [\"java\",\"-Dspring.profiles.active=dockerdev\",\"-jar\",\"/opt/lib/demo-app.jar\"]\n# Above line works, but not desired as profile will change in diff envs\nENTRYPOINT [\"java\",\"-jar\",\"/opt/lib/demo-app.jar\"]\n</code></pre>\n\n<p>I have tried the following, but, none works</p>\n\n<p><code>docker run -p 8000:80 demo-app -Dspring.profiles.active=dockerdev</code></p>\n\n<p><code>docker run -p 8000:80 demo-app --rm -e JAVA_OPTS='-Dspring.profiles.active=dockerdev'</code></p>\n\n<p>Please help.</p>\n\n<p><strong>Clarification:</strong> I am using multiple profiles. Hence I do not want the active profile to be mentioned within the application or the docker file. Instead, I want to use the same application and docker file and run it in different environments, and pass the active profile to be used in the docker run command. Apologies if anything above did not clarify that.</p>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":1102504,"reputation":66096,"user_id":1094597,"accept_rate":94,"display_name":"kosa"},"score":0,"creation_date":1332532592,"post_id":9845677,"comment_id":12548114,"body_markdown":"Did you set compilation level? It should be set to 1.4 as well. I guess you just added JRE.","body":"Did you set compilation level? It should be set to 1.4 as well. I guess you just added JRE."},{"owner":{"account_id":147580,"reputation":3670,"user_id":358794,"accept_rate":72,"display_name":"jeff"},"score":0,"creation_date":1332533160,"post_id":9845677,"comment_id":12548292,"body_markdown":"I do have the compiler comliance level set to 1.4.  But installed on my PC is 1.6.  As ajozwik pointed out I probably need to have JDK 1.4 installed on my PC so when coding locally I get the RED X if the Class is out of scope","body":"I do have the compiler comliance level set to 1.4.  But installed on my PC is 1.6.  As ajozwik pointed out I probably need to have JDK 1.4 installed on my PC so when coding locally I get the RED X if the Class is out of scope"}],"answers":[{"tags":[],"owner":{"account_id":1134402,"reputation":2079,"user_id":1119778,"display_name":"Mike Bockus"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1332532702,"creation_date":1332532702,"answer_id":9845735,"question_id":9845677,"body_markdown":"Right click on your project and go to Properties.  Check the Java Compiler options to make sure the jdk compliance is with 1.4.","title":"Force Eclipse use only Java 1.4","body":"<p>Right click on your project and go to Properties.  Check the Java Compiler options to make sure the jdk compliance is with 1.4.</p>\n"},{"tags":[],"owner":{"account_id":402809,"reputation":415,"user_id":770187,"display_name":"ScottShamus"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1332532754,"creation_date":1332532754,"answer_id":9845750,"question_id":9845677,"body_markdown":"Go to Project Properties -&gt; Java Compiler and make sure all of your JDK compliance settings are at 1.4","title":"Force Eclipse use only Java 1.4","body":"<p>Go to Project Properties -> Java Compiler and make sure all of your JDK compliance settings are at 1.4</p>\n"},{"comments":[{"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"score":0,"creation_date":1332533547,"post_id":9845759,"comment_id":12548408,"body_markdown":"This won&#39;t work if all that is installed are later JDKs. The compiler doesn&#39;t know what was in each version of the libraries (classes.jar).","body":"This won&#39;t work if all that is installed are later JDKs. The compiler doesn&#39;t know what was in each version of the libraries (classes.jar)."}],"tags":[],"owner":{"account_id":1036092,"reputation":8846,"user_id":1043352,"accept_rate":81,"display_name":"Jakub Zaverka"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1332532781,"creation_date":1332532781,"answer_id":9845759,"question_id":9845677,"body_markdown":"Go to project settings --&gt; Java compiler, uncheck the default code compliance and select the 1.4.","title":"Force Eclipse use only Java 1.4","body":"<p>Go to project settings --> Java compiler, uncheck the default code compliance and select the 1.4.</p>\n"},{"comments":[{"owner":{"account_id":147580,"reputation":3670,"user_id":358794,"accept_rate":72,"display_name":"jeff"},"score":0,"creation_date":1332532954,"post_id":9845765,"comment_id":12548215,"body_markdown":"This is sounding right. IT keeps our PC right up to date with JDK but on our webserver they still have 1.4","body":"This is sounding right. IT keeps our PC right up to date with JDK but on our webserver they still have 1.4"},{"owner":{"account_id":328273,"reputation":14391,"user_id":651140,"display_name":"Andrzej Jozwik"},"score":0,"creation_date":1332533127,"post_id":9845765,"comment_id":12548279,"body_markdown":"In eclipse preference-&gt; java -&gt; installed jre and add jdk 1.4. Next go to Execution environment and choose J2SE-1.4 and check jdk 1.4","body":"In eclipse preference-&gt; java -&gt; installed jre and add jdk 1.4. Next go to Execution environment and choose J2SE-1.4 and check jdk 1.4"},{"owner":{"account_id":147580,"reputation":3670,"user_id":358794,"accept_rate":72,"display_name":"jeff"},"score":0,"creation_date":1332533605,"post_id":9845765,"comment_id":12548427,"body_markdown":"Isn&#39;t this the way it is described in the link in my Question? But without actually downloading jdk 1.4? Right now I have selected J2SE-1.4 (jdk1.6.0_22) If I download 1.4 will it read J2SE-1.4 (jdk1.4.2) ?  I thought the point of the execution environment was to be able to downgrade the version without having to actually download and install that version.","body":"Isn&#39;t this the way it is described in the link in my Question? But without actually downloading jdk 1.4? Right now I have selected J2SE-1.4 (jdk1.6.0_22) If I download 1.4 will it read J2SE-1.4 (jdk1.4.2) ?  I thought the point of the execution environment was to be able to downgrade the version without having to actually download and install that version."},{"owner":{"account_id":328273,"reputation":14391,"user_id":651140,"display_name":"Andrzej Jozwik"},"score":0,"creation_date":1332577288,"post_id":9845765,"comment_id":12554986,"body_markdown":"rt.jar in normal library. If it contains new methods - eclipse see it. It is not difference between commons-lang.jar and rt.jar for eclipse (and java compiler)","body":"rt.jar in normal library. If it contains new methods - eclipse see it. It is not difference between commons-lang.jar and rt.jar for eclipse (and java compiler)"}],"tags":[],"owner":{"account_id":328273,"reputation":14391,"user_id":651140,"display_name":"Andrzej Jozwik"},"comment_count":4,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1332532795,"creation_date":1332532795,"answer_id":9845765,"question_id":9845677,"body_markdown":"You have to install java version 1.4.2 on your computer and define jre 1.4.2. It is not enough to set compilance with 1.4, because you still see 1.5 api","title":"Force Eclipse use only Java 1.4","body":"<p>You have to install java version 1.4.2 on your computer and define jre 1.4.2. It is not enough to set compilance with 1.4, because you still see 1.5 api</p>\n"},{"tags":[],"owner":{"account_id":320962,"reputation":31681,"user_id":639520,"accept_rate":72,"display_name":"E-Riz"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1332533491,"creation_date":1332533491,"answer_id":9845914,"question_id":9845677,"body_markdown":"Unless you actually have JDK 1.4 installed, Eclipse&#39;s compiler can&#39;t know that things like String.contains() weren&#39;t in that version. Specifying the Execution Environment just tells it that it can only do Java 1.4 compatible compilation, but things like methods in the String class are part of the library (classes.jar), not inherent to the Java language level. So if all you have is later JDKs, the compiler sees String.contains() in classes.jar and hence compiles your code against it.\r\n\r\nSo, install JDK 1.4 and then set it up in the Installed JREs section of Preferences; also make sure it is set as the default for the 1.4 Execution Environment.","title":"Force Eclipse use only Java 1.4","body":"<p>Unless you actually have JDK 1.4 installed, Eclipse's compiler can't know that things like String.contains() weren't in that version. Specifying the Execution Environment just tells it that it can only do Java 1.4 compatible compilation, but things like methods in the String class are part of the library (classes.jar), not inherent to the Java language level. So if all you have is later JDKs, the compiler sees String.contains() in classes.jar and hence compiles your code against it.</p>\n\n<p>So, install JDK 1.4 and then set it up in the Installed JREs section of Preferences; also make sure it is set as the default for the 1.4 Execution Environment.</p>\n"},{"tags":[],"owner":{"account_id":2851165,"reputation":3623,"user_id":2448356,"accept_rate":56,"display_name":"Kalher"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1424523071,"creation_date":1424523071,"answer_id":28645998,"question_id":9845677,"body_markdown":"You can force eclipse to use any previous java version following these steps:\r\n\r\n**Steps**\r\n\r\n1. **Right click project** and open properties clicking **Properties** option.\r\n2. Select **Java Compiler** option.\r\n3. In **JDK Compliance** category uncheck **Use Compliance from execution ...** option\r\n4. Now select desired java version (1.4) in **Compiler compliance level:** option\r\n5. And click **OK**\r\n\r\n**Result**\r\n\r\nNow eclipse will use desired previous version (say 1.4) without installing it explicitly even if you have 1.7 or 8.0 installed/configured.\r\n","title":"Force Eclipse use only Java 1.4","body":"<p>You can force eclipse to use any previous java version following these steps:</p>\n\n<p><strong>Steps</strong></p>\n\n<ol>\n<li><strong>Right click project</strong> and open properties clicking <strong>Properties</strong> option.</li>\n<li>Select <strong>Java Compiler</strong> option.</li>\n<li>In <strong>JDK Compliance</strong> category uncheck <strong>Use Compliance from execution ...</strong> option</li>\n<li>Now select desired java version (1.4) in <strong>Compiler compliance level:</strong> option</li>\n<li>And click <strong>OK</strong></li>\n</ol>\n\n<p><strong>Result</strong></p>\n\n<p>Now eclipse will use desired previous version (say 1.4) without installing it explicitly even if you have 1.7 or 8.0 installed/configured.</p>\n"},{"tags":[],"owner":{"account_id":4669748,"reputation":15,"user_id":4061733,"display_name":"Malith Hirantha"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694021809,"creation_date":1694021809,"answer_id":77054143,"question_id":9845677,"body_markdown":"You have two option : \r\nFirst : Go to project settings --&gt; Java compiler, uncheck the default code compliance and select the 1.4.\r\nSecond : downgrad your project java version to 1.4 by install and maintain alternative java versions in your case its 1.5 and 1.4. \r\n\r\nI prefer send because unless you not able run the project with even error.\r\n","title":"Force Eclipse use only Java 1.4","body":"<p>You have two option :\nFirst : Go to project settings --&gt; Java compiler, uncheck the default code compliance and select the 1.4.\nSecond : downgrad your project java version to 1.4 by install and maintain alternative java versions in your case its 1.5 and 1.4.</p>\n<p>I prefer send because unless you not able run the project with even error.</p>\n"}],"owner":{"account_id":147580,"reputation":3670,"user_id":358794,"accept_rate":72,"display_name":"jeff"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2851,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":9845765,"answer_count":7,"score":0,"last_activity_date":1694021809,"creation_date":1332532373,"question_id":9845677,"body_markdown":"Locally I need to code against Java 1.4.\r\n\r\nI tried the suggestion in this post\r\nhttps://stackoverflow.com/questions/3100713/how-to-restrict-jdk-api-version-in-eclipse\r\n\r\nhowever Eclipse still provides code completion for `String.contains` which is only available in Java 1.5 Nor did it provide the Red X error marker.\r\n\r\nHow can I get Eclipse to only provide code completion for Java 1.4 Classes and Methods and warn me with the Red X that I can&#39;t use something above version 1.4?\r\n\r\n\r\n","title":"Force Eclipse use only Java 1.4","body":"<p>Locally I need to code against Java 1.4.</p>\n\n<p>I tried the suggestion in this post\n<a href=\"https://stackoverflow.com/questions/3100713/how-to-restrict-jdk-api-version-in-eclipse\">how to restrict jdk api version in eclipse</a></p>\n\n<p>however Eclipse still provides code completion for <code>String.contains</code> which is only available in Java 1.5 Nor did it provide the Red X error marker.</p>\n\n<p>How can I get Eclipse to only provide code completion for Java 1.4 Classes and Methods and warn me with the Red X that I can't use something above version 1.4?</p>\n"},{"tags":["java","spring","spring-boot","jsp"],"comments":[{"owner":{"account_id":27549421,"reputation":11,"user_id":21024752,"display_name":"ketan2jangid"},"score":0,"creation_date":1685462132,"post_id":76366583,"comment_id":134661938,"body_markdown":"WARN 65189 --- [nio-8080-exec-1] o.s.w.s.r.ResourceHttpRequestHandler     : &quot;Path with &quot;WEB-INF&quot; or &quot;META-INF&quot;: [WEB-INF/jsp/index.jsp]&quot; \nThis is what I get in the terminal","body":"WARN 65189 --- [nio-8080-exec-1] o.s.w.s.r.ResourceHttpRequestHandler     : &quot;Path with &quot;WEB-INF&quot; or &quot;META-INF&quot;: [WEB-INF/jsp/index.jsp]&quot;  This is what I get in the terminal"},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1685462428,"post_id":76366583,"comment_id":134662005,"body_markdown":"`WEB-INF.JSP` is not the same as a nested directory `WEB-INF/JSP`--can&#39;t tell from the screenshot which it is.","body":"<code>WEB-INF.JSP</code> is not the same as a nested directory <code>WEB-INF&#47;JSP</code>--can&#39;t tell from the screenshot which it is."},{"owner":{"account_id":27549421,"reputation":11,"user_id":21024752,"display_name":"ketan2jangid"},"score":0,"creation_date":1685462855,"post_id":76366583,"comment_id":134662108,"body_markdown":"I added the jsp sub-directory inside WEB-INF directory. How is it different?","body":"I added the jsp sub-directory inside WEB-INF directory. How is it different?"},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1685463385,"post_id":76366583,"comment_id":134662240,"body_markdown":"Re-worded: A directory named `WEB-INF.JSP` is not the same as a directory named `JSP` in the directory named `WEB-INF`. It&#39;s not clear what you had *(or have now)*.","body":"Re-worded: A directory named <code>WEB-INF.JSP</code> is not the same as a directory named <code>JSP</code> in the directory named <code>WEB-INF</code>. It&#39;s not clear what you had <i>(or have now)</i>."},{"owner":{"account_id":27549421,"reputation":11,"user_id":21024752,"display_name":"ketan2jangid"},"score":2,"creation_date":1685468814,"post_id":76366583,"comment_id":134663378,"body_markdown":"WEB-INF has only one dir in it i.e. jsp, that&#39;s why in the screenshot it is appearing as WEB-INF.jsp, but actually it is a directory","body":"WEB-INF has only one dir in it i.e. jsp, that&#39;s why in the screenshot it is appearing as WEB-INF.jsp, but actually it is a directory"}],"answers":[{"tags":[],"owner":{"account_id":13356416,"reputation":372,"user_id":9639790,"display_name":"shreeramaute"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685463974,"creation_date":1685463974,"answer_id":76366844,"question_id":76366583,"body_markdown":"**better check that the jsp created is under right path**\r\n\r\nyou can learn about spring boot from [HowTodoInJava][1]\r\n\r\n\r\n  [1]: https://howtodoinjava.com/series/spring-boot-tutorial/","title":"Why isn&#39;t my JSP file mapping to my Spring controller?","body":"<p><strong>better check that the jsp created is under right path</strong></p>\n<p>you can learn about spring boot from <a href=\"https://howtodoinjava.com/series/spring-boot-tutorial/\" rel=\"nofollow noreferrer\">HowTodoInJava</a></p>\n"},{"tags":[],"owner":{"account_id":434398,"reputation":473,"user_id":820345,"display_name":"Lokesh Gupta"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694020994,"creation_date":1694020994,"answer_id":77054079,"question_id":76366583,"body_markdown":"In Spring boot,JSPs on embedded server and Jar packaging do not play well.\r\n\r\nWith Jetty and Tomcat, JSPs should work if you use war packaging. An executable war will work when launched with java -jar, and will also be deployable to any standard container. JSPs are not supported when using an executable jar. \r\n[Reference][1]\r\n\r\nYou can check out a working example [here][2].\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#web.servlet.embedded-container.jsp-limitations\r\n  [2]: https://howtodoinjava.com/spring-boot/spring-boot-jsp-view-example/","title":"Why isn&#39;t my JSP file mapping to my Spring controller?","body":"<p>In Spring boot,JSPs on embedded server and Jar packaging do not play well.</p>\n<p>With Jetty and Tomcat, JSPs should work if you use war packaging. An executable war will work when launched with java -jar, and will also be deployable to any standard container. JSPs are not supported when using an executable jar.\n<a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#web.servlet.embedded-container.jsp-limitations\" rel=\"nofollow noreferrer\">Reference</a></p>\n<p>You can check out a working example <a href=\"https://howtodoinjava.com/spring-boot/spring-boot-jsp-view-example/\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}],"owner":{"account_id":27549421,"reputation":11,"user_id":21024752,"display_name":"ketan2jangid"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":95,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1694020994,"creation_date":1685461933,"question_id":76366583,"body_markdown":"I have just began learning spring and I have added a jsp file to my project but the controller can&#39;t map to it. My controller is in *src --\\&gt; main --\\&gt; java --\\&gt; com.example.todo --\\&gt; controller --\\&gt; **UserController.java***  and my jsp file is in src --\\&gt; main --\\&gt; resources --\\&gt; WEB-INF --\\&gt; jsp --\\&gt; ***index.jsp.*** I am following a video in which the person adds jsp file to spring project and the controller maps it. But in my case it is not doing.\r\n\r\n[![enter image description here](https://i.stack.imgur.com/YtJvG.png)](https://i.stack.imgur.com/YtJvG.png)\r\n\r\n[![enter image description here](https://i.stack.imgur.com/ngi2J.png)](https://i.stack.imgur.com/ngi2J.png)\r\n\r\nThis is my code -\r\n\r\n**TodoApplication.java**\r\n\r\n```\r\npackage com.example.todo;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n@SpringBootApplication\r\npublic class TodoApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(TodoApplication.class, args);\r\n\t}\r\n\r\n}\r\n```\r\n\r\n**UserController.java**\r\n\r\n```\r\npackage com.example.todo.controller;\r\n\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.web.bind.annotation.*;\r\n\r\n@Controller\r\npublic class UserController {\r\n\r\n    @GetMapping(&quot;/index&quot;)\r\n    public String ind(){\r\n        return &quot;index&quot;;\r\n    }\r\n\r\n    @GetMapping(&quot;/index-html&quot;)\r\n    @ResponseBody\r\n    public String indexHTML(){\r\n        StringBuilder body = new StringBuilder();\r\n\r\n        body.append(&quot;&lt;!DOCTYPE html&gt;&quot;);\r\n        body.append(&quot;&lt;html&gt;&quot;);\r\n        body.append(&quot;&lt;body&gt;&quot;);\r\n        body.append(&quot;&lt;h1&gt;HTML page&lt;/h1&gt;&quot;);\r\n        body.append(&quot;&lt;p&gt;This is a random text&lt;/p&gt;&quot;);\r\n        body.append(&quot;&lt;/body&gt;&quot;);\r\n        body.append(&quot;&lt;/html&gt;&quot;);\r\n\r\n        return body.toString();\r\n    }\r\n}\r\n```\r\n\r\n**index.jsp**\r\n\r\n```\r\n&lt;!DOCTYPE html&gt;\r\n\r\n&lt;html&gt;\r\n    &lt;body&gt;\r\n        &lt;h1 style=&quot;color: blue;&quot;&gt;This is jsp file&lt;/h1&gt;\r\n    &lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\n**pom.xml**\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.1.0&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;todo&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;todo&lt;/name&gt;\r\n\t&lt;description&gt;A To-Do list application&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;19&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\n**application.properties**\r\n\r\n```\r\nspring.mvc.view.prefix=/WEB-INF/jsp/\r\nspring.mvc.view.suffix=.jsp\r\n\r\nspring.datasource.url=jdbc:h2:mem:db\r\n```\r\n\r\nI am using IntelliJ IDEA Community with JDK 19 and spring 3.1 on Ubuntu 22.04. When I goto **localhost:8080/index-html** it renders the html code and performs as expected, but it isn;t the case when I go to **localhost:8080/index.**\r\n\r\nI have also made changes to application.properties, added the prefix and suffix, and added the tomcat-jasper dependency.\r\n\r\nPlease help. Also will be glad if you can provide a good online resource for learning spring boot.","title":"Why isn&#39;t my JSP file mapping to my Spring controller?","body":"<p>I have just began learning spring and I have added a jsp file to my project but the controller can't map to it. My controller is in <em>src --&gt; main --&gt; java --&gt; com.example.todo --&gt; controller --&gt; <strong>UserController.java</strong></em>  and my jsp file is in src --&gt; main --&gt; resources --&gt; WEB-INF --&gt; jsp --&gt; <em><strong>index.jsp.</strong></em> I am following a video in which the person adds jsp file to spring project and the controller maps it. But in my case it is not doing.</p>\n<p><a href=\"https://i.stack.imgur.com/YtJvG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YtJvG.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/ngi2J.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ngi2J.png\" alt=\"enter image description here\" /></a></p>\n<p>This is my code -</p>\n<p><strong>TodoApplication.java</strong></p>\n<pre><code>package com.example.todo;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class TodoApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(TodoApplication.class, args);\n    }\n\n}\n</code></pre>\n<p><strong>UserController.java</strong></p>\n<pre><code>package com.example.todo.controller;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.*;\n\n@Controller\npublic class UserController {\n\n    @GetMapping(&quot;/index&quot;)\n    public String ind(){\n        return &quot;index&quot;;\n    }\n\n    @GetMapping(&quot;/index-html&quot;)\n    @ResponseBody\n    public String indexHTML(){\n        StringBuilder body = new StringBuilder();\n\n        body.append(&quot;&lt;!DOCTYPE html&gt;&quot;);\n        body.append(&quot;&lt;html&gt;&quot;);\n        body.append(&quot;&lt;body&gt;&quot;);\n        body.append(&quot;&lt;h1&gt;HTML page&lt;/h1&gt;&quot;);\n        body.append(&quot;&lt;p&gt;This is a random text&lt;/p&gt;&quot;);\n        body.append(&quot;&lt;/body&gt;&quot;);\n        body.append(&quot;&lt;/html&gt;&quot;);\n\n        return body.toString();\n    }\n}\n</code></pre>\n<p><strong>index.jsp</strong></p>\n<pre><code>&lt;!DOCTYPE html&gt;\n\n&lt;html&gt;\n    &lt;body&gt;\n        &lt;h1 style=&quot;color: blue;&quot;&gt;This is jsp file&lt;/h1&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p><strong>pom.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.1.0&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;todo&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;todo&lt;/name&gt;\n    &lt;description&gt;A To-Do list application&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;19&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\n            &lt;artifactId&gt;tomcat-embed-jasper&lt;/artifactId&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p><strong>application.properties</strong></p>\n<pre><code>spring.mvc.view.prefix=/WEB-INF/jsp/\nspring.mvc.view.suffix=.jsp\n\nspring.datasource.url=jdbc:h2:mem:db\n</code></pre>\n<p>I am using IntelliJ IDEA Community with JDK 19 and spring 3.1 on Ubuntu 22.04. When I goto <strong>localhost:8080/index-html</strong> it renders the html code and performs as expected, but it isn;t the case when I go to <strong>localhost:8080/index.</strong></p>\n<p>I have also made changes to application.properties, added the prefix and suffix, and added the tomcat-jasper dependency.</p>\n<p>Please help. Also will be glad if you can provide a good online resource for learning spring boot.</p>\n"},{"tags":["java","android","microphone"],"owner":{"account_id":20232829,"reputation":61,"user_id":14838922,"display_name":"Syed Muzammil Ali"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694020517,"creation_date":1694020517,"question_id":77054045,"body_markdown":"I am calling from phone A to phone B, phone A has an app through which I call phone B, I want my voice to merge with music so phone B can hear it too.\r\n\r\nI have implemented soundpool and mediaplayer but that doesn&#39;t seem to work. \r\n\r\n\r\n```\r\n        soundPool = new SoundPool(10, AudioManager.STREAM_VOICE_CALL, 0);\r\n\r\n        // Load the sound effects.\r\n        babycryId = soundPool.load(context, R.raw.baby_cry, 1);\r\n\r\n        soundPool.setOnLoadCompleteListener(new SoundPool.OnLoadCompleteListener() {\r\n            public void onLoadComplete(SoundPool soundPool, int sampleId,int status) {\r\n                Log.d(&quot;SOUND POOL&quot;, &quot;SOUND LOADED&quot;);\r\n                soundPool.play(babycryId, 0.2f, 0.2f, 1, 100, 1);\r\n            }\r\n        });\r\n```\r\n\r\nReference app: https://www.noise-me.com/","title":"How can I play music in background while talking to another person","body":"<p>I am calling from phone A to phone B, phone A has an app through which I call phone B, I want my voice to merge with music so phone B can hear it too.</p>\n<p>I have implemented soundpool and mediaplayer but that doesn't seem to work.</p>\n<pre><code>        soundPool = new SoundPool(10, AudioManager.STREAM_VOICE_CALL, 0);\n\n        // Load the sound effects.\n        babycryId = soundPool.load(context, R.raw.baby_cry, 1);\n\n        soundPool.setOnLoadCompleteListener(new SoundPool.OnLoadCompleteListener() {\n            public void onLoadComplete(SoundPool soundPool, int sampleId,int status) {\n                Log.d(&quot;SOUND POOL&quot;, &quot;SOUND LOADED&quot;);\n                soundPool.play(babycryId, 0.2f, 0.2f, 1, 100, 1);\n            }\n        });\n</code></pre>\n<p>Reference app: <a href=\"https://www.noise-me.com/\" rel=\"nofollow noreferrer\">https://www.noise-me.com/</a></p>\n"},{"tags":["java","kotlin","annotations","kotlinc"],"comments":[{"owner":{"account_id":5559956,"reputation":13829,"user_id":9840318,"display_name":"Madhu Bhat"},"score":0,"creation_date":1609748608,"post_id":65549219,"comment_id":115909505,"body_markdown":"Try using a descriptor other than `PropertyDescriptor`","body":"Try using a descriptor other than <code>PropertyDescriptor</code>"},{"owner":{"account_id":2358514,"reputation":9644,"user_id":2065796,"accept_rate":62,"display_name":"Sasha Shpota"},"score":0,"creation_date":1609753768,"post_id":65549219,"comment_id":115911391,"body_markdown":"@MadhuBhat which one would you suggest?","body":"@MadhuBhat which one would you suggest?"}],"answers":[{"comments":[{"owner":{"account_id":2358514,"reputation":9644,"user_id":2065796,"accept_rate":62,"display_name":"Sasha Shpota"},"score":0,"creation_date":1680028216,"post_id":75775719,"comment_id":133826091,"body_markdown":"Thank you (+1), would this work for older Kotlin versions as well? Like 1.5, 1.6, 1.7?","body":"Thank you (+1), would this work for older Kotlin versions as well? Like 1.5, 1.6, 1.7?"}],"tags":[],"owner":{"account_id":15198661,"reputation":21,"user_id":10967267,"display_name":"MrGewurz"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1679140471,"creation_date":1679140471,"answer_id":75775719,"question_id":65549219,"body_markdown":"I guess my answer won&#39;t help you, but for anyone with a future problem.\r\nFor field annotations without a [Target][1] the compiler will generate a function that has the annotation.\r\nSo,\r\n```kt\r\ndata class User(@MyAnnotation val name: String)\r\n```\r\nwill compile to the following functions:\r\n* `getName`\r\n* `getName$annotations`\r\n* ...\r\n\r\nAs the name suggests, the annotation `@MyAnnotation` is located in `getName$annotations`.\r\n\r\nYou can avoid this by specifying a Target:\r\n```kt\r\ndata class User(@field:MyAnnotation val name: String)\r\n```\r\nWith the target, you can reference it directly via `newField` function; otherwise you have to access it via the `newMethod` function and extract the field. If you develop a plugin for end-user you probably should implement both methods, as the end-user might(not) add a target\r\n\r\n\r\n  [1]: https://kotlinlang.org/docs/annotations.html#annotation-use-site-targets","title":"Kotlin Compiler Plugin: How to check if a property has an annotation?","body":"<p>I guess my answer won't help you, but for anyone with a future problem.\nFor field annotations without a <a href=\"https://kotlinlang.org/docs/annotations.html#annotation-use-site-targets\" rel=\"nofollow noreferrer\">Target</a> the compiler will generate a function that has the annotation.\nSo,</p>\n<pre><code>data class User(@MyAnnotation val name: String)\n</code></pre>\n<p>will compile to the following functions:</p>\n<ul>\n<li><code>getName</code></li>\n<li><code>getName$annotations</code></li>\n<li>...</li>\n</ul>\n<p>As the name suggests, the annotation <code>@MyAnnotation</code> is located in <code>getName$annotations</code>.</p>\n<p>You can avoid this by specifying a Target:</p>\n<pre><code>data class User(@field:MyAnnotation val name: String)\n</code></pre>\n<p>With the target, you can reference it directly via <code>newField</code> function; otherwise you have to access it via the <code>newMethod</code> function and extract the field. If you develop a plugin for end-user you probably should implement both methods, as the end-user might(not) add a target</p>\n"},{"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1693551594,"post_id":77019309,"comment_id":135778665,"body_markdown":"How about some explanation as to how your code solves the problem?","body":"How about some explanation as to how your code solves the problem?"}],"tags":[],"owner":{"account_id":17720239,"reputation":1,"user_id":12865460,"display_name":"&#205;talo Oliveira"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694020498,"creation_date":1693516403,"answer_id":77019309,"question_id":65549219,"body_markdown":"Try this:\r\n\r\n    myObject::class\r\n        .memberProperties\r\n        .forEach {\r\n            if (it.hasAnnotation&lt;FooBar&gt;()) {\r\n                 val annotation = it.findAnnotation&lt;FooBar&gt;() \r\n                 // doYourStuff()\r\n            }\r\n                \r\n    \r\n\r\nand in the data class:\r\n\r\n    @property:FooBar\r\n    val myField: Any\r\n\r\nThe target @property grants the annotation won&#39;t end up over a getter but over the property itself, and makes it readable to the &#39;memberProperties&#39; KClass property. Thereby iterate through the class properties, find the property, and check if it has the annotation by using the &#39;`hasAnnotation&lt;FooBar&gt;()`&#39; KProperty1 method. In order to get the annotation object, use &#39;`findAnnotation&lt;FooBar&gt;()`&#39; KProperty1 method.","title":"Kotlin Compiler Plugin: How to check if a property has an annotation?","body":"<p>Try this:</p>\n<pre><code>myObject::class\n    .memberProperties\n    .forEach {\n        if (it.hasAnnotation&lt;FooBar&gt;()) {\n             val annotation = it.findAnnotation&lt;FooBar&gt;() \n             // doYourStuff()\n        }\n            \n</code></pre>\n<p>and in the data class:</p>\n<pre><code>@property:FooBar\nval myField: Any\n</code></pre>\n<p>The target @property grants the annotation won't end up over a getter but over the property itself, and makes it readable to the 'memberProperties' KClass property. Thereby iterate through the class properties, find the property, and check if it has the annotation by using the '<code>hasAnnotation&lt;FooBar&gt;()</code>' KProperty1 method. In order to get the annotation object, use '<code>findAnnotation&lt;FooBar&gt;()</code>' KProperty1 method.</p>\n"}],"owner":{"account_id":2358514,"reputation":9644,"user_id":2065796,"accept_rate":62,"display_name":"Sasha Shpota"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":406,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1694020498,"creation_date":1609672794,"question_id":65549219,"body_markdown":"I am creating a Kotlin compiler plugin in which I need to check if a property of a data class has an annotation:\r\n\r\n    data class User(\r\n         @MyAnnotation\r\n         val name: String\r\n    )\r\nI override `DelegatingClassBuilder.newField` in the following way:\r\n\r\n    internal class MyClassBuilder(\r\n        delegateBuilder: ClassBuilder\r\n    ) : DelegatingClassBuilder(delegateBuilder) {\r\n        override fun newField(\r\n            origin: JvmDeclarationOrigin,\r\n            access: Int,\r\n            name: String,\r\n            desc: String,\r\n            signature: String?,\r\n            value: Any?\r\n        ): FieldVisitor {\r\n            val visitor = super.newField(origin, access, name, desc, signature, value)\r\n            val descriptor = origin.descriptor as? PropertyDescriptor ?: return visitor\r\n            if (descriptor.annotations.hasAnnotation(FqName(&quot;com.example.MyAnnotation&quot;))) {\r\n                // I never get here\r\n            }\r\n            return visitor\r\n        }\r\n    }\r\n\r\n**Problem:** No matter if my property is annotated or not `descriptor.annotations` would not contain my annotation. If I change the annotations use target to anything else I still don&#39;t get the annotation.\r\n\r\nAt the same time, if I annotate a function and override `newMethod`, I can get annotations of of this function with pretty similar code.\r\n\r\n**Question:** How to get annotations of a property in a data class? \r\n\r\n","title":"Kotlin Compiler Plugin: How to check if a property has an annotation?","body":"<p>I am creating a Kotlin compiler plugin in which I need to check if a property of a data class has an annotation:</p>\n<pre><code>data class User(\n     @MyAnnotation\n     val name: String\n)\n</code></pre>\n<p>I override <code>DelegatingClassBuilder.newField</code> in the following way:</p>\n<pre><code>internal class MyClassBuilder(\n    delegateBuilder: ClassBuilder\n) : DelegatingClassBuilder(delegateBuilder) {\n    override fun newField(\n        origin: JvmDeclarationOrigin,\n        access: Int,\n        name: String,\n        desc: String,\n        signature: String?,\n        value: Any?\n    ): FieldVisitor {\n        val visitor = super.newField(origin, access, name, desc, signature, value)\n        val descriptor = origin.descriptor as? PropertyDescriptor ?: return visitor\n        if (descriptor.annotations.hasAnnotation(FqName(&quot;com.example.MyAnnotation&quot;))) {\n            // I never get here\n        }\n        return visitor\n    }\n}\n</code></pre>\n<p><strong>Problem:</strong> No matter if my property is annotated or not <code>descriptor.annotations</code> would not contain my annotation. If I change the annotations use target to anything else I still don't get the annotation.</p>\n<p>At the same time, if I annotate a function and override <code>newMethod</code>, I can get annotations of of this function with pretty similar code.</p>\n<p><strong>Question:</strong> How to get annotations of a property in a data class?</p>\n"},{"tags":["java","arrays","arraylist"],"comments":[{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1694019968,"post_id":77053991,"comment_id":135837500,"body_markdown":"`int[] array = arrList.stream().mapToInt(i -&gt; i).toArray();`","body":"<code>int[] array = arrList.stream().mapToInt(i -&gt; i).toArray();</code>"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":1,"creation_date":1694022942,"post_id":77053991,"comment_id":135838052,"body_markdown":"Consider utilizing _Integer_ arrays when converting to and from _Collection_ objects.","body":"Consider utilizing <i>Integer</i> arrays when converting to and from <i>Collection</i> objects."}],"answers":[{"tags":[],"owner":{"account_id":29120678,"reputation":301,"user_id":22308196,"display_name":"Beulah Evanjalin"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1694020302,"creation_date":1694020302,"answer_id":77054027,"question_id":77053991,"body_markdown":"    int[] intArray = arrlist.stream()\r\n                    .mapToInt(Integer::intValue)\r\n                    .toArray();","title":"How to convert Integer ArrayList in Java to int array in single line","body":"<pre><code>int[] intArray = arrlist.stream()\n                .mapToInt(Integer::intValue)\n                .toArray();\n</code></pre>\n"}],"owner":{"account_id":29377626,"reputation":1,"user_id":22508831,"display_name":"sadu-sadd"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1694020217,"answer_count":1,"score":0,"last_activity_date":1694020302,"creation_date":1694019895,"question_id":77053991,"body_markdown":"I want to convert the following ArrayList of Integer type to array of type int in java\r\n\r\n\r\n```\r\nArrayList&lt;Integer&gt; arrlist = new ArrayList&lt;Integer&gt;(5);  \r\narrlist.add(10);  \r\narrlist.add(20);  \r\narrlist.add(30);  \r\narrlist.add(40);\r\n```\r\n\r\n\r\nOutput:\r\n\r\n```\r\n[10, 20, 30, 40]\r\n```\r\n\r\n\r\n\r\n","title":"How to convert Integer ArrayList in Java to int array in single line","body":"<p>I want to convert the following ArrayList of Integer type to array of type int in java</p>\n<pre><code>ArrayList&lt;Integer&gt; arrlist = new ArrayList&lt;Integer&gt;(5);  \narrlist.add(10);  \narrlist.add(20);  \narrlist.add(30);  \narrlist.add(40);\n</code></pre>\n<p>Output:</p>\n<pre><code>[10, 20, 30, 40]\n</code></pre>\n"},{"tags":["java","spring","spring-mvc","pom.xml","jakarta-migration"],"answers":[{"tags":[],"owner":{"account_id":29331078,"reputation":1,"user_id":22472522,"display_name":"Nathan S"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694020066,"creation_date":1694020038,"answer_id":77054005,"question_id":77023913,"body_markdown":"Answering my own question to hopefully save someone else a headache in the future\r\n\r\nThe source of this error was due to a misunderstanding of Spring Framework\r\n\r\nVersion 5.3.29 that I was using does not implement Jakarta, and is still using the old JavaX packages\r\n\r\nThe first version of Spring Framework that uses Jakarta is 6.0, which is not compatible prior to JDK 17, causing any interactions between the updated Tomcat 10 and Spring Framework 5 to break\r\n\r\nTherefore the functionality I was trying to implement here was impossible","title":"Spring-Security-Web import errors","body":"<p>Answering my own question to hopefully save someone else a headache in the future</p>\n<p>The source of this error was due to a misunderstanding of Spring Framework</p>\n<p>Version 5.3.29 that I was using does not implement Jakarta, and is still using the old JavaX packages</p>\n<p>The first version of Spring Framework that uses Jakarta is 6.0, which is not compatible prior to JDK 17, causing any interactions between the updated Tomcat 10 and Spring Framework 5 to break</p>\n<p>Therefore the functionality I was trying to implement here was impossible</p>\n"}],"owner":{"account_id":29331078,"reputation":1,"user_id":22472522,"display_name":"Nathan S"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694020066,"creation_date":1693578274,"question_id":77023913,"body_markdown":"I&#39;m currently tasked with upgrading our codebase to Java 11 (Still out of date, I know, but that&#39;s the requirement)\r\n\r\nI changed out all of the old javax packages for Jakarta, and updated all of the Spring and Spring-Security packages, but I&#39;m still running into an error\r\n\r\nOne of the classes is extending `org.springframework.security.web.authentication.preauth.AbstractPreAuthenticatedProcessingFilter`, but that package in particular is still looking for `javax.servlet.Filter` and causing the compilation to fail and an error of `The hierarchy of the type &lt;class name&gt; is inconsistent`\r\n\r\nI have spring-security-web at version 5.8.6, so I&#39;m not sure why it&#39;s still trying to look for javax when the rest of the Spring and Spring-Security packages seem to be using Jakarta without issue","title":"Spring-Security-Web import errors","body":"<p>I'm currently tasked with upgrading our codebase to Java 11 (Still out of date, I know, but that's the requirement)</p>\n<p>I changed out all of the old javax packages for Jakarta, and updated all of the Spring and Spring-Security packages, but I'm still running into an error</p>\n<p>One of the classes is extending <code>org.springframework.security.web.authentication.preauth.AbstractPreAuthenticatedProcessingFilter</code>, but that package in particular is still looking for <code>javax.servlet.Filter</code> and causing the compilation to fail and an error of <code>The hierarchy of the type &lt;class name&gt; is inconsistent</code></p>\n<p>I have spring-security-web at version 5.8.6, so I'm not sure why it's still trying to look for javax when the rest of the Spring and Spring-Security packages seem to be using Jakarta without issue</p>\n"},{"tags":["java","spring","spring-boot","docker","maven"],"comments":[{"owner":{"account_id":12270,"reputation":4865,"user_id":24069,"accept_rate":89,"display_name":"Anthony Dahanne"},"score":1,"creation_date":1694006574,"post_id":77048749,"comment_id":135834428,"body_markdown":"you already got the right answer when you asked https://stackoverflow.com/a/77048691/24069 -  please take a look at the official documentation: https://docs.spring.io/spring-boot/docs/current/maven-plugin/reference/htmlsingle/#build-image.customization","body":"you already got the right answer when you asked <a href=\"https://stackoverflow.com/a/77048691/24069\">stackoverflow.com/a/77048691/24069</a> -  please take a look at the official documentation: <a href=\"https://docs.spring.io/spring-boot/docs/current/maven-plugin/reference/htmlsingle/#build-image.customization\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/current/maven-plugin/referen&zwnj;&#8203;ce/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":1362416,"reputation":4479,"user_id":1299533,"display_name":"Scott Frederick"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694019982,"creation_date":1694019982,"answer_id":77053998,"question_id":77048749,"body_markdown":"The equivalent to what you are doing in the `Dockerfile` when using `spring-boot:build-image` with Paketo buildpacks would be to set runtime environment variables  for the Paketo Environment Variables buildpack as [documented by the Paketo project][1]: \r\n\r\n    &lt;project&gt;\r\n      &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;image&gt;\r\n                        &lt;env&gt; \r\n                            &lt;BPE_SPRING_DATASOURCE_URL&gt;\r\n                                ${env.SPRING_DATASOURCE_URL}\r\n                            &lt;/BPE_SPRING_DATASOURCE_URL&gt;\r\n                        &lt;/env&gt;\r\n                    &lt;/image&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n  &lt;/project&gt;\r\n\r\nHowever, putting sensitive values like usernames and passwords in an image like this is not a good idea, as anyone who can download the image can see the values of the environment variables. You should consider setting the values when the image is run instead of when it is built. \r\n\r\nOne way to do this is to use bindings as [described in the Paketo documentation][2]. Some bindings are consumed automatically by the [Spring Cloud Bindings][3] library that the Paketo buildpacks will automatically add to an image. The [Spring Boot `configtree` feature][4] can also be used to read bindings files in an image at runtime.\r\n\r\n\r\n  [1]: https://paketo.io/docs/howto/configuration/#runtime-environment-variables\r\n  [2]: https://paketo.io/docs/howto/configuration/#bindings\r\n  [3]: https://github.com/spring-cloud/spring-cloud-bindings\r\n  [4]: https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#features.external-config.files.configtree","title":"Spring Boot native image plugin: mvn -Pnative spring-boot:build-image How to pass argument and environment variables?","body":"<p>The equivalent to what you are doing in the <code>Dockerfile</code> when using <code>spring-boot:build-image</code> with Paketo buildpacks would be to set runtime environment variables  for the Paketo Environment Variables buildpack as <a href=\"https://paketo.io/docs/howto/configuration/#runtime-environment-variables\" rel=\"nofollow noreferrer\">documented by the Paketo project</a>:</p>\n<pre><code>&lt;project&gt;\n  &lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;image&gt;\n                    &lt;env&gt; \n                        &lt;BPE_SPRING_DATASOURCE_URL&gt;\n                            ${env.SPRING_DATASOURCE_URL}\n                        &lt;/BPE_SPRING_DATASOURCE_URL&gt;\n                    &lt;/env&gt;\n                &lt;/image&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n  \n<p>However, putting sensitive values like usernames and passwords in an image like this is not a good idea, as anyone who can download the image can see the values of the environment variables. You should consider setting the values when the image is run instead of when it is built.</p>\n<p>One way to do this is to use bindings as <a href=\"https://paketo.io/docs/howto/configuration/#bindings\" rel=\"nofollow noreferrer\">described in the Paketo documentation</a>. Some bindings are consumed automatically by the <a href=\"https://github.com/spring-cloud/spring-cloud-bindings\" rel=\"nofollow noreferrer\">Spring Cloud Bindings</a> library that the Paketo buildpacks will automatically add to an image. The <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#features.external-config.files.configtree\" rel=\"nofollow noreferrer\">Spring Boot <code>configtree</code> feature</a> can also be used to read bindings files in an image at runtime.</p>\n"}],"owner":{"account_id":4597208,"reputation":48209,"user_id":3728901,"accept_rate":58,"display_name":"Vy Do"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77053998,"answer_count":1,"score":0,"last_activity_date":1694019982,"creation_date":1693968501,"question_id":77048749,"body_markdown":"Spring Boot native image plugin: `mvn -Pnative spring-boot:build-image` How to pass argument and environment variables?\r\n\r\nIf I use Dockerfile, I can config arg and environment variables like\r\n\r\n```\r\nFROM openjdk:17-jdk-slim-buster\r\nRUN apt-get update -y\r\nRUN apt-get install -y libfreetype6\r\n\r\nARG SPRING_DATASOURCE_URL\r\nENV SPRING_DATASOURCE_URL $SPRING_DATASOURCE_URL\r\nEXPOSE ${SPRING_DATASOURCE_URL}\r\n\r\nARG SPRING_DATASOURCE_USERNAME\r\nENV SPRING_DATASOURCE_USERNAME $SPRING_DATASOURCE_USERNAME\r\nEXPOSE ${SPRING_DATASOURCE_USERNAME}\r\n\r\nARG SPRING_DATASOURCE_PASSWORD\r\nENV SPRING_DATASOURCE_PASSWORD $SPRING_DATASOURCE_PASSWORD\r\nEXPOSE ${SPRING_DATASOURCE_PASSWORD}\r\n\r\nARG SPRING_JPA_HIBERNATE_DDL_AUTO\r\nENV SPRING_JPA_HIBERNATE_DDL_AUTO $SPRING_JPA_HIBERNATE_DDL_AUTO\r\nEXPOSE ${SPRING_JPA_HIBERNATE_DDL_AUTO}\r\n\r\nCOPY ./target/demo-0.0.1-SNAPSHOT.jar /opt/demo-0.0.1-SNAPSHOT.jar\r\nENV TZ=Asia/Ho_Chi_Minh\r\nENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/opt/demo-0.0.1-SNAPSHOT.jar&quot;]\r\n```\r\n\r\nSpring Boot native image plugin, I didn&#39;t see Dockerfile, how to set ARG, env variables?\r\n","title":"Spring Boot native image plugin: mvn -Pnative spring-boot:build-image How to pass argument and environment variables?","body":"<p>Spring Boot native image plugin: <code>mvn -Pnative spring-boot:build-image</code> How to pass argument and environment variables?</p>\n<p>If I use Dockerfile, I can config arg and environment variables like</p>\n<pre><code>FROM openjdk:17-jdk-slim-buster\nRUN apt-get update -y\nRUN apt-get install -y libfreetype6\n\nARG SPRING_DATASOURCE_URL\nENV SPRING_DATASOURCE_URL $SPRING_DATASOURCE_URL\nEXPOSE ${SPRING_DATASOURCE_URL}\n\nARG SPRING_DATASOURCE_USERNAME\nENV SPRING_DATASOURCE_USERNAME $SPRING_DATASOURCE_USERNAME\nEXPOSE ${SPRING_DATASOURCE_USERNAME}\n\nARG SPRING_DATASOURCE_PASSWORD\nENV SPRING_DATASOURCE_PASSWORD $SPRING_DATASOURCE_PASSWORD\nEXPOSE ${SPRING_DATASOURCE_PASSWORD}\n\nARG SPRING_JPA_HIBERNATE_DDL_AUTO\nENV SPRING_JPA_HIBERNATE_DDL_AUTO $SPRING_JPA_HIBERNATE_DDL_AUTO\nEXPOSE ${SPRING_JPA_HIBERNATE_DDL_AUTO}\n\nCOPY ./target/demo-0.0.1-SNAPSHOT.jar /opt/demo-0.0.1-SNAPSHOT.jar\nENV TZ=Asia/Ho_Chi_Minh\nENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/opt/demo-0.0.1-SNAPSHOT.jar&quot;]\n</code></pre>\n<p>Spring Boot native image plugin, I didn't see Dockerfile, how to set ARG, env variables?</p>\n"},{"tags":["java","spring","cors","swagger","railway"],"comments":[{"owner":{"account_id":21986233,"reputation":73,"user_id":16260442,"display_name":"Houssem Salem"},"score":0,"creation_date":1693945071,"post_id":77047394,"comment_id":135825877,"body_markdown":"I think this may help you : https://stackoverflow.com/questions/70843940/springdoc-openapi-ui-how-do-i-set-the-request-to-https","body":"I think this may help you : <a href=\"https://stackoverflow.com/questions/70843940/springdoc-openapi-ui-how-do-i-set-the-request-to-https\" title=\"springdoc openapi ui how do i set the request to https\">stackoverflow.com/questions/70843940/&hellip;</a>"},{"owner":{"account_id":27243768,"reputation":1,"user_id":22506016,"display_name":"Michael Sanguinete"},"score":0,"creation_date":1694004205,"post_id":77047394,"comment_id":135833828,"body_markdown":"Thank you buddy, the link helped me, I managed to solve the problem!","body":"Thank you buddy, the link helped me, I managed to solve the problem!"}],"owner":{"account_id":27243768,"reputation":1,"user_id":22506016,"display_name":"Michael Sanguinete"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694018260,"creation_date":1693943603,"question_id":77047394,"body_markdown":"I published an api in SpringBoot on railway. The domain is in https, but swagger-ui triggers the request by http and I&#39;m having CORS problem. I guess that&#39;s why, because when I try to send a GET request directly through the browser through the railway domain, I have no problems. I tried to free Cors from diverse forms that I will list below:\r\n\r\n```\r\n@Configuration\r\n@EnableWebMvc\r\npublic class CorsConfig implements WebMvcConfigurer {\r\n\r\n    @Override\r\n    public void addCorsMappings(CorsRegistry registry) {\r\n        registry.addMapping(&quot;/**&quot;)\r\n            .allowedOrigins(&quot;*&quot;)\r\n            .allowedMethods(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;)\r\n            .allowedHeaders(&quot;Authorization&quot;, &quot;Content-Type&quot;)\r\n            .maxAge(3600); // Define o tempo m&#225;ximo que o navegador deve armazenar a configura&#231;&#227;o CORS em cache (em segundos).\r\n    }\r\n}\r\n```\r\n\r\nNone of these attempts above worked:\r\n\r\n- `@CrossOrigin(origins = &quot;*&quot;)`\r\n- `@CrossOrigin(origins = &quot;my domain&quot;)`\r\n- `@CrossOrigin(&quot;my domain&quot;)`\r\n","title":"How do I make the swagger request be triggered by https?","body":"<p>I published an api in SpringBoot on railway. The domain is in https, but swagger-ui triggers the request by http and I'm having CORS problem. I guess that's why, because when I try to send a GET request directly through the browser through the railway domain, I have no problems. I tried to free Cors from diverse forms that I will list below:</p>\n<pre><code>@Configuration\n@EnableWebMvc\npublic class CorsConfig implements WebMvcConfigurer {\n\n    @Override\n    public void addCorsMappings(CorsRegistry registry) {\n        registry.addMapping(&quot;/**&quot;)\n            .allowedOrigins(&quot;*&quot;)\n            .allowedMethods(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;)\n            .allowedHeaders(&quot;Authorization&quot;, &quot;Content-Type&quot;)\n            .maxAge(3600); // Define o tempo máximo que o navegador deve armazenar a configuração CORS em cache (em segundos).\n    }\n}\n</code></pre>\n<p>None of these attempts above worked:</p>\n<ul>\n<li><code>@CrossOrigin(origins = &quot;*&quot;)</code></li>\n<li><code>@CrossOrigin(origins = &quot;my domain&quot;)</code></li>\n<li><code>@CrossOrigin(&quot;my domain&quot;)</code></li>\n</ul>\n"},{"tags":["java","spring-boot","spring-cloud","netflix"],"comments":[{"owner":{"account_id":1368060,"reputation":24601,"user_id":2730527,"display_name":"spencergibb"},"score":0,"creation_date":1694021010,"post_id":77051267,"comment_id":135837702,"body_markdown":"Can you describe what is happening exactly? Log errors? Client errors?","body":"Can you describe what is happening exactly? Log errors? Client errors?"}],"owner":{"account_id":29378575,"reputation":21,"user_id":22509582,"display_name":"ReTriBleT"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":0,"score":1,"last_activity_date":1694018093,"creation_date":1693997850,"question_id":77051267,"body_markdown":"My `application.yml` is :\r\n```yaml\r\nserver:\r\n  port: 9700\r\n\r\nspring:\r\n  application:\r\n    name: SERVER-ALPHA\r\n\r\neureka:\r\n  instance:\r\n    prefer-ip-address: false\r\n    hostname: SERVER-ALPHA\r\n  client:\r\n    register-with-eureka: true\r\n    fetch-registry: true\r\n    service-url:\r\n      defaultZone: http://172.22.58.174:9800/eureka/\r\n    enabled: true\r\n  server:\r\n    enable-self-preservation: false\r\n    renewal-percent-threshold: 0.85\r\n    eviction-interval-timer-in-ms: 1000\r\n    use-read-only-response-cache: false\r\n    response-cache-update-interval-ms: 1000\r\n```\r\n\r\nThe anothor one is:\r\n```yaml\r\nserver:\r\n  port: 9800\r\n\r\nspring:\r\n  application:\r\n    name: SERVER-BETA\r\n\r\neureka:\r\n  instance:\r\n    prefer-ip-address: false\r\n    hostname: SERVER-BETA\r\n  client:\r\n    register-with-eureka: true\r\n    fetch-registry: true\r\n    service-url:\r\n      defaultZone: http://172.22.58.174:9700/eureka/\r\n    enabled: true\r\n  server:\r\n    enable-self-preservation: false\r\n    renewal-percent-threshold: 0.85\r\n    eviction-interval-timer-in-ms: 1000\r\n    use-read-only-response-cache: false\r\n    response-cache-update-interval-ms: 1000\r\n```\r\n\r\nAnd The Page of eureka is:\r\n![](https://i.stack.imgur.com/fJP5S.png)\r\n\r\nand I can&#39;t use the server to do the discovery.\r\n\r\nthe version is:\r\n![](https://i.stack.imgur.com/s71fY.png)\r\n\r\nHow to resolve this problem?\r\n\r\nthx\r\n\r\nFirst I try to use the `eureka.client.enable` is true, but I found that the default value is true.\r\nSo I try to find the answer but I found the most of them the spring cloud version is below 2021, I use the spring boot 2.6.7 or 2.6.13, so I didn&#39;t find the resolve way.","title":"The Eureka Server has become unavailable, version is 3.1.4","body":"<p>My <code>application.yml</code> is :</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>server:\n  port: 9700\n\nspring:\n  application:\n    name: SERVER-ALPHA\n\neureka:\n  instance:\n    prefer-ip-address: false\n    hostname: SERVER-ALPHA\n  client:\n    register-with-eureka: true\n    fetch-registry: true\n    service-url:\n      defaultZone: http://172.22.58.174:9800/eureka/\n    enabled: true\n  server:\n    enable-self-preservation: false\n    renewal-percent-threshold: 0.85\n    eviction-interval-timer-in-ms: 1000\n    use-read-only-response-cache: false\n    response-cache-update-interval-ms: 1000\n</code></pre>\n<p>The anothor one is:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>server:\n  port: 9800\n\nspring:\n  application:\n    name: SERVER-BETA\n\neureka:\n  instance:\n    prefer-ip-address: false\n    hostname: SERVER-BETA\n  client:\n    register-with-eureka: true\n    fetch-registry: true\n    service-url:\n      defaultZone: http://172.22.58.174:9700/eureka/\n    enabled: true\n  server:\n    enable-self-preservation: false\n    renewal-percent-threshold: 0.85\n    eviction-interval-timer-in-ms: 1000\n    use-read-only-response-cache: false\n    response-cache-update-interval-ms: 1000\n</code></pre>\n<p>And The Page of eureka is:\n<img src=\"https://i.stack.imgur.com/fJP5S.png\" alt=\"\" /></p>\n<p>and I can't use the server to do the discovery.</p>\n<p>the version is:\n<img src=\"https://i.stack.imgur.com/s71fY.png\" alt=\"\" /></p>\n<p>How to resolve this problem?</p>\n<p>thx</p>\n<p>First I try to use the <code>eureka.client.enable</code> is true, but I found that the default value is true.\nSo I try to find the answer but I found the most of them the spring cloud version is below 2021, I use the spring boot 2.6.7 or 2.6.13, so I didn't find the resolve way.</p>\n"},{"tags":["java","xslt","apache-fop"],"answers":[{"comments":[{"owner":{"account_id":1133651,"reputation":655,"user_id":1119165,"accept_rate":68,"display_name":"Ragnar"},"score":0,"creation_date":1442480675,"post_id":27416447,"comment_id":53102600,"body_markdown":"I have fop.jar but it does not contain xmgraphics-commons and I still have this issue. can you help me ?","body":"I have fop.jar but it does not contain xmgraphics-commons and I still have this issue. can you help me ?"},{"owner":{"account_id":2176106,"reputation":5850,"user_id":1926762,"accept_rate":60,"display_name":"Oomph Fortuity"},"score":0,"creation_date":1442829327,"post_id":27416447,"comment_id":53227777,"body_markdown":"which version of FOP are you using?","body":"which version of FOP are you using?"}],"tags":[],"owner":{"account_id":2176106,"reputation":5850,"user_id":1926762,"accept_rate":60,"display_name":"Oomph Fortuity"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1418278224,"creation_date":1418278224,"answer_id":27416447,"question_id":27401158,"body_markdown":" I got solution from stackoverflow only. I am giving special thanks to author of this post\r\n https://stackoverflow.com/questions/26139301/apache-fop-in-a-java-applet-no-imagepreloader-found-for-data \r\n\r\n \r\n\r\n    With reference from above post , To give precedence to XmlGraphics\r\n    API , \r\n      1. I have excluded XML-graphics API from FOP jar\r\n      2. added new maven dependency XmlGraphics API and placed above FOP dependancy\r\n      3. so that POM will give priority\r\n\r\n\r\n       &lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;xmlgraphics-commons&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;xmlgraphics-commons&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;1.4&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n    \r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.apache.xmlgraphics&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;fop&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;1.1&lt;/version&gt;\r\n    \t\t&lt;exclusions&gt;\r\n    \t\t\t&lt;exclusion&gt;\r\n    \t\t\t\t&lt;artifactId&gt;xmlgraphics-commons&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.apache.xmlgraphics&lt;/groupId&gt;\r\n    \t\t\t&lt;/exclusion&gt;\r\n    \t\t&lt;/exclusions&gt;\r\n    \t&lt;/dependency&gt;\r\n    \r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.apache.avalon.framework&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;avalon-framework-api&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;4.3.1&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n    \r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.apache.avalon.framework&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;avalon-framework-impl&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;4.3.1&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n\r\nThank you","title":"org.apache.xmlgraphics.image.loader.ImageException: The file format is not supported. No ImagePreloader found","body":"<p>I got solution from stackoverflow only. I am giving special thanks to author of this post\n <a href=\"https://stackoverflow.com/questions/26139301/apache-fop-in-a-java-applet-no-imagepreloader-found-for-data\">Apache FOP in a Java Applet - No ImagePreloader found for data</a> </p>\n\n<pre><code>With reference from above post , To give precedence to XmlGraphics\nAPI , \n  1. I have excluded XML-graphics API from FOP jar\n  2. added new maven dependency XmlGraphics API and placed above FOP dependancy\n  3. so that POM will give priority\n\n\n   &lt;dependency&gt;\n        &lt;groupId&gt;xmlgraphics-commons&lt;/groupId&gt;\n        &lt;artifactId&gt;xmlgraphics-commons&lt;/artifactId&gt;\n        &lt;version&gt;1.4&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.xmlgraphics&lt;/groupId&gt;\n        &lt;artifactId&gt;fop&lt;/artifactId&gt;\n        &lt;version&gt;1.1&lt;/version&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;artifactId&gt;xmlgraphics-commons&lt;/artifactId&gt;\n                &lt;groupId&gt;org.apache.xmlgraphics&lt;/groupId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.avalon.framework&lt;/groupId&gt;\n        &lt;artifactId&gt;avalon-framework-api&lt;/artifactId&gt;\n        &lt;version&gt;4.3.1&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.avalon.framework&lt;/groupId&gt;\n        &lt;artifactId&gt;avalon-framework-impl&lt;/artifactId&gt;\n        &lt;version&gt;4.3.1&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n\n<p>Thank you</p>\n"},{"comments":[{"owner":{"account_id":464362,"reputation":1084,"user_id":867816,"display_name":"Gernot"},"score":0,"creation_date":1675334684,"post_id":47780494,"comment_id":132908213,"body_markdown":"That answer pointed me into the right direction. We encountered that problem with the SVG Image Preloader. The dirty solution was to abuse classpath precendence and load Apache FOP 2.7 *before* xmlgraphics-commons-2.7. We had different behaviours when starting it on our Test-Environments and Eclipse: it worked in Eclipse and nowhere else.","body":"That answer pointed me into the right direction. We encountered that problem with the SVG Image Preloader. The dirty solution was to abuse classpath precendence and load Apache FOP 2.7 <i>before</i> xmlgraphics-commons-2.7. We had different behaviours when starting it on our Test-Environments and Eclipse: it worked in Eclipse and nowhere else."}],"tags":[],"owner":{"account_id":409461,"reputation":2960,"user_id":780733,"display_name":"Vincent Biragnet"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1513108267,"creation_date":1513108267,"answer_id":47780494,"question_id":27401158,"body_markdown":"The problem is a conflict between configuration files existing in `META-INF/services/` both in `fop` jar file and `xmlgraphics-commons` jar file. \r\n\r\nIf you&#39;re using maven and want to avoid exclusion that may sometimes cause troubles, you can use the **maven shade plugin** to build a jar and force the concatenation of configuration files in `META-INF/services/`. A snippet like this one works for me:\r\n\r\n       &lt;build&gt;\r\n    \t    &lt;finalName&gt;desired_jar_name&lt;/finalName&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;3.1.0&lt;/version&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;transformers&gt;\r\n    \t\t\t\t\t\t&lt;transformer\r\n    \t\t\t\t\t\t\timplementation=&quot;org.apache.maven.plugins.shade.resource.ServicesResourceTransformer&quot; /&gt;\r\n    \t\t\t\t\t\t&lt;transformer\r\n    \t\t\t\t\t\t\timplementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\r\n    \t\t\t\t\t\t\t&lt;mainClass&gt;my.main.class&lt;/mainClass&gt;\r\n    \t\t\t\t\t\t&lt;/transformer&gt;\r\n    \t\t\t\t\t&lt;/transformers&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t\t&lt;executions&gt;\r\n    \t\t\t\t\t&lt;execution&gt;\r\n    \t\t\t\t\t\t&lt;phase&gt;package&lt;/phase&gt;\r\n    \t\t\t\t\t\t&lt;goals&gt;\r\n    \t\t\t\t\t\t\t&lt;goal&gt;shade&lt;/goal&gt;\r\n    \t\t\t\t\t\t&lt;/goals&gt;\r\n    \t\t\t\t\t&lt;/execution&gt;\r\n    \t\t\t\t&lt;/executions&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;","title":"org.apache.xmlgraphics.image.loader.ImageException: The file format is not supported. No ImagePreloader found","body":"<p>The problem is a conflict between configuration files existing in <code>META-INF/services/</code> both in <code>fop</code> jar file and <code>xmlgraphics-commons</code> jar file. </p>\n\n<p>If you're using maven and want to avoid exclusion that may sometimes cause troubles, you can use the <strong>maven shade plugin</strong> to build a jar and force the concatenation of configuration files in <code>META-INF/services/</code>. A snippet like this one works for me:</p>\n\n<pre><code>   &lt;build&gt;\n        &lt;finalName&gt;desired_jar_name&lt;/finalName&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.1.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;transformers&gt;\n                        &lt;transformer\n                            implementation=\"org.apache.maven.plugins.shade.resource.ServicesResourceTransformer\" /&gt;\n                        &lt;transformer\n                            implementation=\"org.apache.maven.plugins.shade.resource.ManifestResourceTransformer\"&gt;\n                            &lt;mainClass&gt;my.main.class&lt;/mainClass&gt;\n                        &lt;/transformer&gt;\n                    &lt;/transformers&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;shade&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8924310,"reputation":59,"user_id":6659482,"display_name":"Iikka"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1612097748,"creation_date":1612097748,"answer_id":65979337,"question_id":27401158,"body_markdown":"The equivalent solution for gradle would be:\r\n```\r\nshadowJar{\r\n    mergeServiceFiles()\r\n}\r\n```\r\n\r\n","title":"org.apache.xmlgraphics.image.loader.ImageException: The file format is not supported. No ImagePreloader found","body":"<p>The equivalent solution for gradle would be:</p>\n<pre><code>shadowJar{\n    mergeServiceFiles()\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":10555285,"reputation":1221,"user_id":7776688,"display_name":"IEE1394"},"score":0,"creation_date":1694118284,"post_id":77053811,"comment_id":135852974,"body_markdown":"do you have some maven or gradle dependencies available?","body":"do you have some maven or gradle dependencies available?"}],"tags":[],"owner":{"account_id":5919796,"reputation":311,"user_id":4657422,"display_name":"P.Zaccaria"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694017944,"creation_date":1694017944,"answer_id":77053811,"question_id":27401158,"body_markdown":"The above solutions did not work for me, but this one worked:\r\n\r\nAdding xml-apis-ext.jar from https://xerces.apache.org/xml-commons/index.html","title":"org.apache.xmlgraphics.image.loader.ImageException: The file format is not supported. No ImagePreloader found","body":"<p>The above solutions did not work for me, but this one worked:</p>\n<p>Adding xml-apis-ext.jar from <a href=\"https://xerces.apache.org/xml-commons/index.html\" rel=\"nofollow noreferrer\">https://xerces.apache.org/xml-commons/index.html</a></p>\n"}],"owner":{"account_id":2176106,"reputation":5850,"user_id":1926762,"accept_rate":60,"display_name":"Oomph Fortuity"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9693,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":27416447,"answer_count":4,"score":4,"last_activity_date":1694017944,"creation_date":1418214913,"question_id":27401158,"body_markdown":"I am using Apache FOP 1.1(Java) to generate PDF files. \r\nIt is working fine on windows machine but when I used Ubuntu machine I got this error \r\n\r\n   \r\n\r\n    org.apache.xmlgraphics.image.loader.ImageException: The file format is not supported.  No ImagePreloader found\r\n\r\nI am little bit confused. Please give me solution to sort out this problem.\r\nThank you","title":"org.apache.xmlgraphics.image.loader.ImageException: The file format is not supported. No ImagePreloader found","body":"<p>I am using Apache FOP 1.1(Java) to generate PDF files. \nIt is working fine on windows machine but when I used Ubuntu machine I got this error </p>\n\n<pre><code>org.apache.xmlgraphics.image.loader.ImageException: The file format is not supported.  No ImagePreloader found\n</code></pre>\n\n<p>I am little bit confused. Please give me solution to sort out this problem.\nThank you</p>\n"},{"tags":["java","spring-boot","gradle","cucumber"],"comments":[{"owner":{"account_id":4895787,"reputation":10858,"user_id":3945473,"display_name":"M.P. Korstanje"},"score":1,"creation_date":1686925637,"post_id":76490880,"comment_id":134869889,"body_markdown":"Please don&#39;t use screenshots *and* include the full error message.","body":"Please don&#39;t use screenshots <i>and</i> include the full error message."}],"owner":{"account_id":28834492,"reputation":1,"user_id":22084173,"display_name":"Gina Meidina"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694017837,"creation_date":1686923658,"question_id":76490880,"body_markdown":"Im newbie, im starting learnig springboot with cucumber and gradle and im facing this issue can someone resolve this issue\r\n\r\n![](https://i.stack.imgur.com/KSXLY.png)\r\n\r\n![](https://i.stack.imgur.com/FXC5z.png)\r\n\r\n![](https://i.stack.imgur.com/0DVqo.png)\r\n\r\n![](https://i.stack.imgur.com/qe7ns.png)\r\n\r\n![](https://i.stack.imgur.com/6hUjI.png)\r\n\r\n![](https://i.stack.imgur.com/K3mai.png)\r\n\r\n![](https://i.stack.imgur.com/0i8cQ.png)","title":"SpringBoot Cucumber - It appears there was a problem with the step definition. The converted arguments types were ()","body":"<p>Im newbie, im starting learnig springboot with cucumber and gradle and im facing this issue can someone resolve this issue</p>\n<p><img src=\"https://i.stack.imgur.com/KSXLY.png\" alt=\"\" /></p>\n<p><img src=\"https://i.stack.imgur.com/FXC5z.png\" alt=\"\" /></p>\n<p><img src=\"https://i.stack.imgur.com/0DVqo.png\" alt=\"\" /></p>\n<p><img src=\"https://i.stack.imgur.com/qe7ns.png\" alt=\"\" /></p>\n<p><img src=\"https://i.stack.imgur.com/6hUjI.png\" alt=\"\" /></p>\n<p><img src=\"https://i.stack.imgur.com/K3mai.png\" alt=\"\" /></p>\n<p><img src=\"https://i.stack.imgur.com/0i8cQ.png\" alt=\"\" /></p>\n"},{"tags":["java","iso8583","j8583"],"answers":[{"comments":[{"owner":{"account_id":6117,"reputation":5165,"user_id":10165,"display_name":"Chochos"},"score":0,"creation_date":1446655488,"post_id":32866051,"comment_id":54835958,"body_markdown":"so this TPDU thing is something that goes right at the beginning of the message, but after the length header? I guess I could add a TPDU property to `IsoMessage`... feel free to open an issue on github.com/chochos/j8583","body":"so this TPDU thing is something that goes right at the beginning of the message, but after the length header? I guess I could add a TPDU property to <code>IsoMessage</code>... feel free to open an issue on github.com/chochos/j8583"},{"owner":{"account_id":6423201,"reputation":309,"user_id":4979285,"accept_rate":78,"display_name":"Nico"},"score":1,"creation_date":1446663203,"post_id":32866051,"comment_id":54841053,"body_markdown":"@Chocos, Yes you can. If you are working with TCP/IP protocol don&#39;t confuse this length with the length of TCP package.","body":"@Chocos, Yes you can. If you are working with TCP/IP protocol don&#39;t confuse this length with the length of TCP package."}],"tags":[],"owner":{"account_id":6423201,"reputation":309,"user_id":4979285,"accept_rate":78,"display_name":"Nico"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1443615941,"creation_date":1443615941,"answer_id":32866051,"question_id":32847866,"body_markdown":"Unfortunately I had the same issue but i found a solution. Simply you need to &quot;pack&quot; your message and calculate the TPDU in other variable byte[]. I assume  your TDPU consist in:\r\n\r\n    &lt;2 bytes length of the messages&gt;&lt;1 byte: 60&gt;&lt;2 bytes origin&gt;&lt;2 bytes destiny&gt;\r\n\r\nIf you have packed your message in a byte[] and your TPDU in other byte[] simply create a new byte[] and concatenate with System.arraycopy. I assume you know how to implement this.\r\n\r\nRegards\r\n","title":"J8583 How set TPDU as Binary","body":"<p>Unfortunately I had the same issue but i found a solution. Simply you need to \"pack\" your message and calculate the TPDU in other variable byte[]. I assume  your TDPU consist in:</p>\n\n<pre><code>&lt;2 bytes length of the messages&gt;&lt;1 byte: 60&gt;&lt;2 bytes origin&gt;&lt;2 bytes destiny&gt;\n</code></pre>\n\n<p>If you have packed your message in a byte[] and your TPDU in other byte[] simply create a new byte[] and concatenate with System.arraycopy. I assume you know how to implement this.</p>\n\n<p>Regards</p>\n"}],"owner":{"account_id":937131,"reputation":161,"user_id":5025299,"accept_rate":25,"display_name":"Jonathan Cordero Duarte"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":910,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1694017318,"creation_date":1443540107,"question_id":32847866,"body_markdown":"I am using j8583 Library, and I need prepend a TPDU (10 digits in binary BCD Packed) to the message.\r\n\r\nIt&#180;s possible ?\r\n\r\nThe header of J8583 messages only use String in ASCII.\r\n\r\n","title":"J8583 How set TPDU as Binary","body":"<p>I am using j8583 Library, and I need prepend a TPDU (10 digits in binary BCD Packed) to the message.</p>\n\n<p>It´s possible ?</p>\n\n<p>The header of J8583 messages only use String in ASCII.</p>\n"},{"tags":["java","database","netbeans","derby"],"owner":{"account_id":25309411,"reputation":1,"user_id":19132350,"display_name":"mahmoud"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1694016915,"answer_count":0,"score":0,"last_activity_date":1694016975,"creation_date":1694016239,"question_id":77053637,"body_markdown":"I have made an app with netbeans using embedded derby database. The app work well when I run it in netbeans but I made clean and build jar file it make error saying \r\n\r\n&gt;&quot;No suitable driver found jdbc:derby:database;create = true&quot;\r\n\r\nthat is how i connect to database\r\n```\r\nString databaseURL = &quot;jdbc:derby:booksdb;create=true&quot;;\r\n \r\nConnection conn = DriverManager.getConnection(databaseURL);\r\nStatement statement = conn.createStatement();\r\n``` ","title":"No suitable driver found for jdbc embedded derby database","body":"<p>I have made an app with netbeans using embedded derby database. The app work well when I run it in netbeans but I made clean and build jar file it make error saying</p>\n<blockquote>\n<p>&quot;No suitable driver found jdbc:derby:database;create = true&quot;</p>\n</blockquote>\n<p>that is how i connect to database</p>\n<pre><code>String databaseURL = &quot;jdbc:derby:booksdb;create=true&quot;;\n \nConnection conn = DriverManager.getConnection(databaseURL);\nStatement statement = conn.createStatement();\n</code></pre>\n"},{"tags":["java","generics","diamond-operator"],"comments":[{"owner":{"account_id":2366187,"reputation":60162,"user_id":2071828,"accept_rate":88,"display_name":"Boris the Spider"},"score":4,"creation_date":1395579483,"post_id":22591201,"comment_id":34393228,"body_markdown":"This is the difference between type inference and raw types. As always the answer is &quot;backwards compatibility&quot;.","body":"This is the difference between type inference and raw types. As always the answer is &quot;backwards compatibility&quot;."}],"answers":[{"tags":[],"owner":{"account_id":136796,"reputation":14752,"user_id":340556,"accept_rate":88,"display_name":"Cephalopod"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1395580861,"creation_date":1395580861,"answer_id":22591448,"question_id":22591201,"body_markdown":"The following code compiles and runs without error.\r\n\r\n    SoftReference&lt;String&gt; ref = new SoftReference(new Integer(1));\r\n    Object o = ref.get();\r\n    System.out.println(o); // prints &quot;1&quot;\r\n\r\nA raw instance of `SoftReference` is created. &quot;Raw&quot; means that there is no generic type checking, which is required to allow to mix generics with pre-generics code. \r\n\r\nBy making the diamond operator implicit, you would break it.","title":"Why Diamond operator was not missed from Right hand side in Java 7?","body":"<p>The following code compiles and runs without error.</p>\n\n<pre><code>SoftReference&lt;String&gt; ref = new SoftReference(new Integer(1));\nObject o = ref.get();\nSystem.out.println(o); // prints \"1\"\n</code></pre>\n\n<p>A raw instance of <code>SoftReference</code> is created. \"Raw\" means that there is no generic type checking, which is required to allow to mix generics with pre-generics code. </p>\n\n<p>By making the diamond operator implicit, you would break it.</p>\n"}],"owner":{"account_id":422964,"reputation":33652,"user_id":802050,"accept_rate":89,"display_name":"M Sach"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":697,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":22591448,"answer_count":1,"score":2,"last_activity_date":1694016818,"creation_date":1395579361,"question_id":22591201,"body_markdown":"Java 7 has improved the diamond operator\r\n\r\nIn Java 6:\r\n```java\r\nMap&lt;String, String&gt; myMap = new HashMap&lt;String, String&gt;();\r\n```\r\n\r\n\r\nIn Java 7:\r\n```java\r\nMap&lt;String, String&gt; myMap = new HashMap&lt;&gt;();\r\n```\r\n\r\nIn Java 7  Types have been removed from the diamond operator on the right-hand side(RHS). My question why don&#39;t remove the complete diamond operator from RHS?\r\nI know it will throw the warning, but Java 7 could have removed the warning too.\r\n\r\n\r\n&gt; - Type safety: The expression of type HashMap needs unchecked conversion to conform to Map&lt;String,String&gt;\r\n&gt; - HashMap is a raw type. References to generic type HashMap&lt;K,V&gt; should be parameterized\r\n\t\r\n\t\r\nThe logic behind my thinking:  \r\nAs we have already defined the map will have a string as a key and an object with Map&lt;String, String&gt; myMap on LHS.\r\nWith this compiler has sufficient info. So why does it throw a warning if you miss the diamond operator altogether?\r\n\r\nI am sure there must be a reason behind it but I am not getting it.","title":"Why Diamond operator was not missed from Right hand side in Java 7?","body":"<p>Java 7 has improved the diamond operator</p>\n<p>In Java 6:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String, String&gt; myMap = new HashMap&lt;String, String&gt;();\n</code></pre>\n<p>In Java 7:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String, String&gt; myMap = new HashMap&lt;&gt;();\n</code></pre>\n<p>In Java 7  Types have been removed from the diamond operator on the right-hand side(RHS). My question why don't remove the complete diamond operator from RHS?\nI know it will throw the warning, but Java 7 could have removed the warning too.</p>\n<blockquote>\n<ul>\n<li>Type safety: The expression of type HashMap needs unchecked conversion to conform to Map&lt;String,String&gt;</li>\n<li>HashMap is a raw type. References to generic type HashMap&lt;K,V&gt; should be parameterized</li>\n</ul>\n</blockquote>\n<p>The logic behind my thinking:<br />\nAs we have already defined the map will have a string as a key and an object with Map&lt;String, String&gt; myMap on LHS.\nWith this compiler has sufficient info. So why does it throw a warning if you miss the diamond operator altogether?</p>\n<p>I am sure there must be a reason behind it but I am not getting it.</p>\n"},{"tags":["java","websocket","jboss","wildfly"],"answers":[{"comments":[{"owner":{"account_id":51161,"reputation":17015,"user_id":152794,"display_name":"James R. Perkins"},"score":0,"creation_date":1694020453,"post_id":77053604,"comment_id":135837591,"body_markdown":"Also, annotations from interfaces are not inherited.","body":"Also, annotations from interfaces are not inherited."},{"owner":{"account_id":938600,"reputation":566,"user_id":967088,"display_name":"Will Tatam"},"score":0,"creation_date":1694173065,"post_id":77053604,"comment_id":135859940,"body_markdown":"Every class in java gets a public no-args constructor implicitly by default","body":"Every class in java gets a public no-args constructor implicitly by default"},{"owner":{"account_id":1491171,"reputation":3291,"user_id":1398228,"display_name":"ehsavoie"},"score":0,"creation_date":1694173590,"post_id":77053604,"comment_id":135860042,"body_markdown":"@WillTatam not pertinent here since we are talking interface","body":"@WillTatam not pertinent here since we are talking interface"}],"tags":[],"owner":{"account_id":1491171,"reputation":3291,"user_id":1398228,"display_name":"ehsavoie"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694015989,"creation_date":1694015989,"answer_id":77053604,"question_id":77051459,"body_markdown":"Reading the Javadoc it doesn&#39;t seem possible:\r\nhttps://docs.oracle.com/javaee/7/api/javax/websocket/server/ServerEndpoint.html:\r\n\r\n&gt; The annotated class must have a public no-arg constructor. ","title":"Define implementation of websocket interface in Jboss 7.4","body":"<p>Reading the Javadoc it doesn't seem possible:\n<a href=\"https://docs.oracle.com/javaee/7/api/javax/websocket/server/ServerEndpoint.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javaee/7/api/javax/websocket/server/ServerEndpoint.html</a>:</p>\n<blockquote>\n<p>The annotated class must have a public no-arg constructor.</p>\n</blockquote>\n"}],"owner":{"account_id":3110318,"reputation":1280,"user_id":2632210,"accept_rate":23,"display_name":"quindimildev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694015989,"creation_date":1693999658,"question_id":77051459,"body_markdown":"Following the jBoss 7.4 documentation I can define a websocket with the required annotations\r\n\r\n```\r\n@ServerEndpoint(&quot;/websocket/helloworld&quot;)\r\npublic class MyService {\r\n\r\n    @OnMessage\r\n    String sayHello(String name){ ... };\r\n\r\n    @OnOpen\r\n    void helloOnOpen(Session session){ ... };\r\n\r\n    @OnClose\r\n    void helloOnClose(CloseReason reason){ ... };\r\n\r\n}\r\n```\r\n\r\nI would like to have the contract of that websocket in an interface in an external repository, and add that dependency to the project in which I have the implementation.\r\n\r\nSo in this scenario I would have the chat-api dependency in which I implement the interface\r\n\r\n```\r\n@ServerEndpoint(&quot;/websocket/helloworld&quot;)\r\npublic interface MyServiceInterface {\r\n\r\n    @OnMessage\r\n    String sayHello(String name);\r\n\r\n    @OnOpen\r\n    void helloOnOpen(Session session);\r\n\r\n    @OnClose\r\n    void helloOnClose(CloseReason reason);\r\n\r\n}\r\n```\r\nAnd my implementation will use this interface\r\n\r\n```\r\npublic class MyServiceImpl implements MyServiceInterface {\r\n\r\n    @Override\r\n    String sayHello(String name){ ... };\r\n\r\n    @Override\r\n    void helloOnOpen(Session session){ ... };\r\n\r\n    @Override\r\n    void helloOnClose(CloseReason reason){ ... };\r\n\r\n}\r\n```\r\n\r\nBut if I do this, Wildfly is not handling the websocket and it does not work. (you can see the problem that I had [here](https://stackoverflow.com/questions/77014109/websocket-is-not-handled-correctly-in-jboss-7-4/77027555#77027555))\r\n\r\nIs there any way I can set this up?\r\n","title":"Define implementation of websocket interface in Jboss 7.4","body":"<p>Following the jBoss 7.4 documentation I can define a websocket with the required annotations</p>\n<pre><code>@ServerEndpoint(&quot;/websocket/helloworld&quot;)\npublic class MyService {\n\n    @OnMessage\n    String sayHello(String name){ ... };\n\n    @OnOpen\n    void helloOnOpen(Session session){ ... };\n\n    @OnClose\n    void helloOnClose(CloseReason reason){ ... };\n\n}\n</code></pre>\n<p>I would like to have the contract of that websocket in an interface in an external repository, and add that dependency to the project in which I have the implementation.</p>\n<p>So in this scenario I would have the chat-api dependency in which I implement the interface</p>\n<pre><code>@ServerEndpoint(&quot;/websocket/helloworld&quot;)\npublic interface MyServiceInterface {\n\n    @OnMessage\n    String sayHello(String name);\n\n    @OnOpen\n    void helloOnOpen(Session session);\n\n    @OnClose\n    void helloOnClose(CloseReason reason);\n\n}\n</code></pre>\n<p>And my implementation will use this interface</p>\n<pre><code>public class MyServiceImpl implements MyServiceInterface {\n\n    @Override\n    String sayHello(String name){ ... };\n\n    @Override\n    void helloOnOpen(Session session){ ... };\n\n    @Override\n    void helloOnClose(CloseReason reason){ ... };\n\n}\n</code></pre>\n<p>But if I do this, Wildfly is not handling the websocket and it does not work. (you can see the problem that I had <a href=\"https://stackoverflow.com/questions/77014109/websocket-is-not-handled-correctly-in-jboss-7-4/77027555#77027555\">here</a>)</p>\n<p>Is there any way I can set this up?</p>\n"},{"tags":["java","jackson","localdate"],"answers":[{"comments":[{"owner":{"account_id":16211352,"reputation":4324,"user_id":11713777,"display_name":"dariosicily"},"score":4,"creation_date":1635866188,"post_id":69811985,"comment_id":123403622,"body_markdown":"@noumenal If you are using a version 2.x before 2.9 the code is `ObjectMapper mapper = new ObjectMapper();\nmapper.registerModule(new JavaTimeModule());`, both methods with equivalent alternatives are present in the link. I&#39;m seeing you are using 2.13 module, checks if this is the version you are currently using, because these are the methods from official documentation.","body":"@noumenal If you are using a version 2.x before 2.9 the code is <code>ObjectMapper mapper = new ObjectMapper(); mapper.registerModule(new JavaTimeModule());</code>, both methods with equivalent alternatives are present in the link. I&#39;m seeing you are using 2.13 module, checks if this is the version you are currently using, because these are the methods from official documentation."},{"owner":{"account_id":40774,"reputation":28739,"user_id":118228,"accept_rate":85,"display_name":"djangofan"},"score":0,"creation_date":1651264966,"post_id":69811985,"comment_id":127331752,"body_markdown":"Wow. Learned something new. Thanks.","body":"Wow. Learned something new. Thanks."},{"owner":{"account_id":16211352,"reputation":4324,"user_id":11713777,"display_name":"dariosicily"},"score":0,"creation_date":1651266583,"post_id":69811985,"comment_id":127332105,"body_markdown":"@djangofan Glad to have helped.","body":"@djangofan Glad to have helped."},{"owner":{"account_id":1972832,"reputation":378,"user_id":1771344,"accept_rate":75,"display_name":"MetaCoder"},"score":0,"creation_date":1670409722,"post_id":69811985,"comment_id":131868481,"body_markdown":"@dariosicily should this work with spring boot 2.7.x I&#39;ve tried this while trying to serialize an object from elasticseaech with a Instant field and I&#39;m getting the same error","body":"@dariosicily should this work with spring boot 2.7.x I&#39;ve tried this while trying to serialize an object from elasticseaech with a Instant field and I&#39;m getting the same error"},{"owner":{"account_id":16211352,"reputation":4324,"user_id":11713777,"display_name":"dariosicily"},"score":3,"creation_date":1670414023,"post_id":69811985,"comment_id":131869966,"body_markdown":"@MetaCoder For spring boot there is a specific [`spring-boot-starter-json`](https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-json) json starter that includes the `jackson-datatype-jsr310`.","body":"@MetaCoder For spring boot there is a specific <a href=\"https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-json\" rel=\"nofollow noreferrer\"><code>spring-boot-starter-json</code></a> json starter that includes the <code>jackson-datatype-jsr310</code>."},{"owner":{"account_id":1972832,"reputation":378,"user_id":1771344,"accept_rate":75,"display_name":"MetaCoder"},"score":0,"creation_date":1670415002,"post_id":69811985,"comment_id":131870311,"body_markdown":"Thanks for that. Strangely enough even without adding the dependancy if I just remove any and all object mapper configs and when creating the elasticsearch client just do this ```ElasticsearchTransport transport = new RestClientTransport(restClient, new JacksonJsonpMapper(objectMapper));``` it works...where as ```ElasticsearchTransport transport = new RestClientTransport(restClient, new JacksonJsonpMapper());``` causes it to fail","body":"Thanks for that. Strangely enough even without adding the dependancy if I just remove any and all object mapper configs and when creating the elasticsearch client just do this <code>ElasticsearchTransport transport = new RestClientTransport(restClient, new JacksonJsonpMapper(objectMapper));</code> it works...where as <code>ElasticsearchTransport transport = new RestClientTransport(restClient, new JacksonJsonpMapper());</code> causes it to fail"},{"owner":{"account_id":16211352,"reputation":4324,"user_id":11713777,"display_name":"dariosicily"},"score":1,"creation_date":1670429402,"post_id":69811985,"comment_id":131875707,"body_markdown":"@MetaCoder Glad to have helped, without exploring the source code a possible way to explain about the success or fail is that when with the import of the `ObjectMapper` it automatically imports all modules including the datetime module.","body":"@MetaCoder Glad to have helped, without exploring the source code a possible way to explain about the success or fail is that when with the import of the <code>ObjectMapper</code> it automatically imports all modules including the datetime module."}],"tags":[],"owner":{"account_id":16211352,"reputation":4324,"user_id":11713777,"display_name":"dariosicily"},"comment_count":7,"down_vote_count":0,"up_vote_count":32,"is_accepted":false,"score":32,"last_activity_date":1635862845,"creation_date":1635862845,"answer_id":69811985,"question_id":69811740,"body_markdown":"The error is indicative and explains you haven&#39;t registered the `JavaTimeModule` module like documented at [`datetime`](https://github.com/FasterXML/jackson-modules-java8/tree/2.14/datetime) : to register it you can for example do in this way (or other equivalent way explained in the link I added previously, dependly from the jackson library version you are using) :\r\n\r\n~~~\r\nObjectMapper mapper = JsonMapper.builder()\r\n    .addModule(new JavaTimeModule())\r\n    .build();\r\n~~~","title":"How do I enable the JSR310 support for LocalDate using Jackson?","body":"<p>The error is indicative and explains you haven't registered the <code>JavaTimeModule</code> module like documented at <a href=\"https://github.com/FasterXML/jackson-modules-java8/tree/2.14/datetime\" rel=\"noreferrer\"><code>datetime</code></a> : to register it you can for example do in this way (or other equivalent way explained in the link I added previously, dependly from the jackson library version you are using) :</p>\n<pre><code>ObjectMapper mapper = JsonMapper.builder()\n    .addModule(new JavaTimeModule())\n    .build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14324952,"reputation":169,"user_id":10347294,"display_name":"Shivam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694015534,"creation_date":1694015534,"answer_id":77053548,"question_id":69811740,"body_markdown":"`java.time.LocalDate` is not supported by default so we have to register the module. Add this line for registering -\r\n\r\n    DatabindCodec.mapper().registerModule(new JavaTimeModule());","title":"How do I enable the JSR310 support for LocalDate using Jackson?","body":"<p><code>java.time.LocalDate</code> is not supported by default so we have to register the module. Add this line for registering -</p>\n<pre><code>DatabindCodec.mapper().registerModule(new JavaTimeModule());\n</code></pre>\n"}],"owner":{"account_id":1113629,"reputation":1117,"user_id":1103558,"accept_rate":68,"display_name":"noumenal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26407,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"answer_count":2,"score":15,"last_activity_date":1694015534,"creation_date":1635861646,"question_id":69811740,"body_markdown":"I have added the JS310 dependency to Maven and refreshed the dependencies:\r\n\r\n    &lt;dependency&gt;\r\n                &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\r\n                &lt;version&gt;2.13.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nIn the domain:\r\n\r\n\r\n    @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;yyyy-MM-dd&quot;)\r\n    LocalDate start;\r\n\r\nHowever, I am receiving this error:\r\n\r\n`com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Java 8 date/time type java.time.LocalDate not supported by default: add Module &quot;com.fasterxml.jackson.datatype:jackson-datatype-jsr310&quot; to enable handling`\r\n","title":"How do I enable the JSR310 support for LocalDate using Jackson?","body":"<p>I have added the JS310 dependency to Maven and refreshed the dependencies:</p>\n<pre><code>&lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\n            &lt;version&gt;2.13.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>In the domain:</p>\n<pre><code>@JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;yyyy-MM-dd&quot;)\nLocalDate start;\n</code></pre>\n<p>However, I am receiving this error:</p>\n<p><code>com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Java 8 date/time type java.time.LocalDate not supported by default: add Module &quot;com.fasterxml.jackson.datatype:jackson-datatype-jsr310&quot; to enable handling</code></p>\n"},{"tags":["java","session","servlets"],"comments":[{"owner":{"account_id":2829929,"reputation":5163,"user_id":2431702,"display_name":"DanielBarbarian"},"score":1,"creation_date":1694004745,"post_id":77052064,"comment_id":135833964,"body_markdown":"There is nowhere in the code you have posted where you invoke `javax.servlet.http.HttpSession.getAttribute(String)`. If you post the relevant code in the question it will increase our possibilities to help you.","body":"There is nowhere in the code you have posted where you invoke <code>javax.servlet.http.HttpSession.getAttribute(String)</code>. If you post the relevant code in the question it will increase our possibilities to help you."},{"owner":{"account_id":15637170,"reputation":53,"user_id":11281686,"display_name":"user987376746090"},"score":0,"creation_date":1694005064,"post_id":77052064,"comment_id":135834069,"body_markdown":"In this method I am only setting setAttribute not getting any Attribute","body":"In this method I am only setting setAttribute not getting any Attribute"},{"owner":{"account_id":2829929,"reputation":5163,"user_id":2431702,"display_name":"DanielBarbarian"},"score":0,"creation_date":1694009129,"post_id":77052064,"comment_id":135835059,"body_markdown":"And your exception says session is null when you are invoking `getAttribute(String)`. So it is much better that you show us the code where you get the error. It is not in the code you have in the question.","body":"And your exception says session is null when you are invoking <code>getAttribute(String)</code>. So it is much better that you show us the code where you get the error. It is not in the code you have in the question."},{"owner":{"account_id":15637170,"reputation":53,"user_id":11281686,"display_name":"user987376746090"},"score":0,"creation_date":1694010876,"post_id":77052064,"comment_id":135835521,"body_markdown":"You are absolutely right this is error due to getAttribute(String). I have posted my relevant code in my question. please check it","body":"You are absolutely right this is error due to getAttribute(String). I have posted my relevant code in my question. please check it"},{"owner":{"account_id":2829929,"reputation":5163,"user_id":2431702,"display_name":"DanielBarbarian"},"score":0,"creation_date":1694011797,"post_id":77052064,"comment_id":135835732,"body_markdown":"`HttpSession session = request.getSession(false);` so this line then returns null. According to the javadoc this can happen when you set the argument create to `false`: &quot;If create is false and the request has no valid HttpSession, this method returns null.&quot;\n\nSee https://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getSession(boolean)","body":"<code>HttpSession session = request.getSession(false);</code> so this line then returns null. According to the javadoc this can happen when you set the argument create to <code>false</code>: &quot;If create is false and the request has no valid HttpSession, this method returns null.&quot;  See <a href=\"https://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getSession(boolean)\" rel=\"nofollow noreferrer\">docs.oracle.com/javaee/6/api/javax/servlet/http/&hellip;</a>"},{"owner":{"account_id":2829929,"reputation":5163,"user_id":2431702,"display_name":"DanielBarbarian"},"score":0,"creation_date":1694011921,"post_id":77052064,"comment_id":135835777,"body_markdown":"Most likely you want to create a session if none exist in that case you need to set the create parameter to true instead of false.","body":"Most likely you want to create a session if none exist in that case you need to set the create parameter to true instead of false."}],"answers":[{"comments":[{"owner":{"account_id":15637170,"reputation":53,"user_id":11281686,"display_name":"user987376746090"},"score":0,"creation_date":1694017422,"post_id":77053533,"comment_id":135836997,"body_markdown":"May I do like this:`HttpSession session = request.getSession(false);\n\t\t\tif(session == null || session.equals(null)) {\n\t\t\t\tresponse.sendRedirect(&quot;adminLogin&quot;);\n\t\t\t}\n\t\t\telse {`","body":"May I do like this:<code>HttpSession session = request.getSession(false); \t\t\tif(session == null || session.equals(null)) { \t\t\t\tresponse.sendRedirect(&quot;adminLogin&quot;); \t\t\t} \t\t\telse {</code>"},{"owner":{"account_id":2829929,"reputation":5163,"user_id":2431702,"display_name":"DanielBarbarian"},"score":0,"creation_date":1694067593,"post_id":77053533,"comment_id":135842870,"body_markdown":"You can do something like that but reduce `session == null || session.equals(null)` to `session == null`. `session.equals(null)` can never be true as it will cause a NullPointerException if session is null and that you have already covered with `session == null`.","body":"You can do something like that but reduce <code>session == null || session.equals(null)</code> to <code>session == null</code>. <code>session.equals(null)</code> can never be true as it will cause a NullPointerException if session is null and that you have already covered with <code>session == null</code>."}],"tags":[],"owner":{"account_id":200728,"reputation":3833,"user_id":446738,"accept_rate":71,"display_name":"worpet"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694015400,"creation_date":1694015400,"answer_id":77053533,"question_id":77052064,"body_markdown":"This is happening because of your line:\r\n```\r\nHttpSession session = request.getSession(false);\r\n```\r\n\r\nFrom [the documentation][1]:\r\n\r\n&gt; If `create` is `false` and the request has no valid `HttpSession`,\r\n&gt; this method returns null.\r\n\r\nThis indicates the request has no session, so `request.getSession(false)` is returning null and setting your variable `session` to null.\r\n\r\nYou should check if your variable `session` is null before calling methods on it. It looks like your code is trying to clear the session on logout, but if there is no session there is nothing to clear.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServletRequest.html#getSession-boolean-","title":"Cannot invoke &quot;javax.servlet.http.HttpSession.getAttribute(String)&quot; because &quot;session&quot; is null","body":"<p>This is happening because of your line:</p>\n<pre><code>HttpSession session = request.getSession(false);\n</code></pre>\n<p>From <a href=\"https://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServletRequest.html#getSession-boolean-\" rel=\"nofollow noreferrer\">the documentation</a>:</p>\n<blockquote>\n<p>If <code>create</code> is <code>false</code> and the request has no valid <code>HttpSession</code>,\nthis method returns null.</p>\n</blockquote>\n<p>This indicates the request has no session, so <code>request.getSession(false)</code> is returning null and setting your variable <code>session</code> to null.</p>\n<p>You should check if your variable <code>session</code> is null before calling methods on it. It looks like your code is trying to clear the session on logout, but if there is no session there is nothing to clear.</p>\n"}],"owner":{"account_id":15637170,"reputation":53,"user_id":11281686,"display_name":"user987376746090"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":165,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1694015400,"creation_date":1694004482,"question_id":77052064,"body_markdown":"I am getting `Cannot invoke &quot;javax.servlet.http.HttpSession.getAttribute(String)&quot; because &quot;session&quot; is null`\r\n\r\n\r\n      protected void doGet(HttpServletRequest request, HttpServletResponse response)\r\n\t\t\tthrows ServletException, IOException {\r\n\t\tServlet.setContentType(request, response);\r\n\t\t\r\n\t\ttry {\r\n\t\t\tHttpSession session = request.getSession(false);\r\n\t\t\tif (session.getAttribute(&quot;userCategory&quot;) != null &amp;&amp; session.getAttribute(&quot;userId&quot;) != null\r\n\t\t\t\t\t&amp;&amp; session.getAttribute(&quot;userName&quot;) != null) {\r\n\r\n\t\t\t\t// remove session\r\n\t\t\t\tsession.removeAttribute(&quot;userCategory&quot;);\r\n\t\t\t\tsession.removeAttribute(&quot;userId&quot;);\r\n\t\t\t\tsession.removeAttribute(&quot;userName&quot;);\r\n\t\t\t\tsession.invalidate();\r\n\r\n\t\t\t\t// back button or F5 not show secure pages back to the user\r\n\t\t\t\tresponse.setHeader(&quot;Cache-Control&quot;, &quot;private, no-store, no-cache, must-revalidate&quot;);\r\n\t\t\t\tresponse.setHeader(&quot;Pragma&quot;, &quot;no-cache&quot;);\r\n\t\t\t\tresponse.setDateHeader(&quot;Expires&quot;, 0);\r\n\r\n\t\t\t\t// logout and forward a page\r\n\t\t\t\tresponse.sendRedirect(&quot;/&quot;);\r\n\t\t\t\treturn;\r\n\r\n\t\t\t\t/*\r\n\t\t\t\t * return; &lt;-- is important Otherwise the code will continue to run and hit some\r\n\t\t\t\t * session.getAttribute() method further down in the block causing exactly this\r\n\t\t\t\t * exception.\r\n\t\t\t\t */\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t} catch (Exception e) {\r\n\t\t\tEmailErrorsToAdmin.setMsg(this.getClass().getCanonicalName(), e);\r\n\t\t}\r\n\t}\r\n\r\n\r\nI am extremely sorry I just found this piece of code is throwing error Cannot invoke &quot;javax.servlet.http.HttpSession.getAttribute(String)&quot; because &quot;session&quot; is null\r\n\r\nPreviously I was having doubt that when I am creating session then its throwing Cannot invoke &quot;javax.servlet.http.HttpSession.getAttribute(String)&quot; because &quot;session&quot; is null but just found its giving error in Logout class\r\n\r\n\r\nPlease advise where I am making mistake?\r\n\r\nBest Regards","title":"Cannot invoke &quot;javax.servlet.http.HttpSession.getAttribute(String)&quot; because &quot;session&quot; is null","body":"<p>I am getting <code>Cannot invoke &quot;javax.servlet.http.HttpSession.getAttribute(String)&quot; because &quot;session&quot; is null</code></p>\n<pre><code>  protected void doGet(HttpServletRequest request, HttpServletResponse response)\n        throws ServletException, IOException {\n    Servlet.setContentType(request, response);\n    \n    try {\n        HttpSession session = request.getSession(false);\n        if (session.getAttribute(&quot;userCategory&quot;) != null &amp;&amp; session.getAttribute(&quot;userId&quot;) != null\n                &amp;&amp; session.getAttribute(&quot;userName&quot;) != null) {\n\n            // remove session\n            session.removeAttribute(&quot;userCategory&quot;);\n            session.removeAttribute(&quot;userId&quot;);\n            session.removeAttribute(&quot;userName&quot;);\n            session.invalidate();\n\n            // back button or F5 not show secure pages back to the user\n            response.setHeader(&quot;Cache-Control&quot;, &quot;private, no-store, no-cache, must-revalidate&quot;);\n            response.setHeader(&quot;Pragma&quot;, &quot;no-cache&quot;);\n            response.setDateHeader(&quot;Expires&quot;, 0);\n\n            // logout and forward a page\n            response.sendRedirect(&quot;/&quot;);\n            return;\n\n            /*\n             * return; &lt;-- is important Otherwise the code will continue to run and hit some\n             * session.getAttribute() method further down in the block causing exactly this\n             * exception.\n             */\n            \n        }\n        \n    } catch (Exception e) {\n        EmailErrorsToAdmin.setMsg(this.getClass().getCanonicalName(), e);\n    }\n}\n</code></pre>\n<p>I am extremely sorry I just found this piece of code is throwing error Cannot invoke &quot;javax.servlet.http.HttpSession.getAttribute(String)&quot; because &quot;session&quot; is null</p>\n<p>Previously I was having doubt that when I am creating session then its throwing Cannot invoke &quot;javax.servlet.http.HttpSession.getAttribute(String)&quot; because &quot;session&quot; is null but just found its giving error in Logout class</p>\n<p>Please advise where I am making mistake?</p>\n<p>Best Regards</p>\n"},{"tags":["java","json","jackson","vert.x"],"comments":[{"owner":{"account_id":8641099,"reputation":3709,"user_id":6469772,"display_name":"LHCHIN"},"score":0,"creation_date":1635321220,"post_id":69733697,"comment_id":123263002,"body_markdown":"Hi, it seems that you asked 2 questions and `JsonObject` is belong to `Gson` not in `Jackson`, did you mix the use of them?","body":"Hi, it seems that you asked 2 questions and <code>JsonObject</code> is belong to <code>Gson</code> not in <code>Jackson</code>, did you mix the use of them?"},{"owner":{"account_id":16211352,"reputation":4324,"user_id":11713777,"display_name":"dariosicily"},"score":0,"creation_date":1635321881,"post_id":69733697,"comment_id":123263281,"body_markdown":"The error is due to the fact that `issuedAt` receives an object that cannot be parsed, as @LHCHIN observed are you using `Jackson` for deserialization ?","body":"The error is due to the fact that <code>issuedAt</code> receives an object that cannot be parsed, as @LHCHIN observed are you using <code>Jackson</code> for deserialization ?"},{"owner":{"account_id":1466355,"reputation":803,"user_id":1379059,"accept_rate":63,"display_name":"ZAJ"},"score":0,"creation_date":1635322698,"post_id":69733697,"comment_id":123263577,"body_markdown":"thanks for your comments. I am using the JsonObject in Vertx package `import io.vertx.core.json.JsonObject;`","body":"thanks for your comments. I am using the JsonObject in Vertx package <code>import io.vertx.core.json.JsonObject;</code>"},{"owner":{"account_id":16211352,"reputation":4324,"user_id":11713777,"display_name":"dariosicily"},"score":0,"creation_date":1635323363,"post_id":69733697,"comment_id":123263820,"body_markdown":"You are welcome. If you are not using `jackson` for deserialization I cannot help, probably if the serialization as iso string is available can simplify your problem.","body":"You are welcome. If you are not using <code>jackson</code> for deserialization I cannot help, probably if the serialization as iso string is available can simplify your problem."},{"owner":{"account_id":8641099,"reputation":3709,"user_id":6469772,"display_name":"LHCHIN"},"score":0,"creation_date":1635324175,"post_id":69733697,"comment_id":123264135,"body_markdown":"Hi, if you are using `Vert.x`, why `jackson-databind-2.11.4.jar:2.11.4` is shown in your error message?","body":"Hi, if you are using <code>Vert.x</code>, why <code>jackson-databind-2.11.4.jar:2.11.4</code> is shown in your error message?"},{"owner":{"account_id":1466355,"reputation":803,"user_id":1379059,"accept_rate":63,"display_name":"ZAJ"},"score":0,"creation_date":1635324403,"post_id":69733697,"comment_id":123264213,"body_markdown":"@LHCHIN because internally it uses Jackson-databind","body":"@LHCHIN because internally it uses Jackson-databind"}],"answers":[{"comments":[{"owner":{"account_id":1466355,"reputation":803,"user_id":1379059,"accept_rate":63,"display_name":"ZAJ"},"score":0,"creation_date":1635326719,"post_id":69736004,"comment_id":123265263,"body_markdown":"Thanks for your comments. I managed to import everything from this code except DatabindCodec. where is this class from?","body":"Thanks for your comments. I managed to import everything from this code except DatabindCodec. where is this class from?"},{"owner":{"account_id":8641099,"reputation":3709,"user_id":6469772,"display_name":"LHCHIN"},"score":0,"creation_date":1635327013,"post_id":69736004,"comment_id":123265409,"body_markdown":"Once adding the dependency of `vertx-core`, you can use it by `import io.vertx.core.json.jackson.DatabindCodec;`.","body":"Once adding the dependency of <code>vertx-core</code>, you can use it by <code>import io.vertx.core.json.jackson.DatabindCodec;</code>."}],"tags":[],"owner":{"account_id":8641099,"reputation":3709,"user_id":6469772,"display_name":"LHCHIN"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1635327239,"creation_date":1635326586,"answer_id":69736004,"question_id":69733697,"body_markdown":"I am not familiar with `Vert.x`. But according to our discussion under the post, I simply add following 2 line of code before `mapTo()` and got no error.\r\n\r\n```java\r\nObjectMapper objectMapper = DatabindCodec.mapper();\r\nobjectMapper.registerModule(new JavaTimeModule());\r\n```\r\n\r\nConsole output:  \r\n\r\n&gt; RefreshToken{id=null, userID=0, deviceID=0, refreshToken=&#39;9da220ce-bc66-4561-b924-988c7f394f2d&#39;, issuedAt=2021-10-27T17:21:28, expiresAt=2021-10-28T17:21:28}\r\n\r\n\r\n----------\r\nAnd in my experience, you can also configure `ObjectMapper` to handle the output format of `LocalDateTime` as you want while serialization as follows:\r\n```java\r\nobjectMapper.configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false);\r\n```\r\n\r\n","title":"JSON Java 8 LocalDateTime format using Jackson in Vert.x","body":"<p>I am not familiar with <code>Vert.x</code>. But according to our discussion under the post, I simply add following 2 line of code before <code>mapTo()</code> and got no error.</p>\n<pre class=\"lang-java prettyprint-override\"><code>ObjectMapper objectMapper = DatabindCodec.mapper();\nobjectMapper.registerModule(new JavaTimeModule());\n</code></pre>\n<p>Console output:</p>\n<blockquote>\n<p>RefreshToken{id=null, userID=0, deviceID=0, refreshToken='9da220ce-bc66-4561-b924-988c7f394f2d', issuedAt=2021-10-27T17:21:28, expiresAt=2021-10-28T17:21:28}</p>\n</blockquote>\n<hr />\n<p>And in my experience, you can also configure <code>ObjectMapper</code> to handle the output format of <code>LocalDateTime</code> as you want while serialization as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>objectMapper.configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1466355,"reputation":803,"user_id":1379059,"accept_rate":63,"display_name":"ZAJ"},"score":0,"creation_date":1635330632,"post_id":69736237,"comment_id":123266914,"body_markdown":"Thanks for your comment, but I am not using Spring. I am using vert.x","body":"Thanks for your comment, but I am not using Spring. I am using vert.x"},{"owner":{"account_id":7655262,"reputation":7506,"user_id":5802417,"display_name":"Michael Gantman"},"score":1,"creation_date":1635331884,"post_id":69736237,"comment_id":123267481,"body_markdown":"The question was asked in context of Spring. The solution is not dependant on Spring. It is related to JSON libraries and annotations. So the solution in that question (the first answer) is general and not Spring specific. So it will work for you just fine.","body":"The question was asked in context of Spring. The solution is not dependant on Spring. It is related to JSON libraries and annotations. So the solution in that question (the first answer) is general and not Spring specific. So it will work for you just fine."}],"tags":[],"owner":{"account_id":7655262,"reputation":7506,"user_id":5802417,"display_name":"Michael Gantman"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1635327565,"creation_date":1635327565,"answer_id":69736237,"question_id":69733697,"body_markdown":"You will need to annotate your LocalDateTime member as follows:\r\n\r\n    @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss&quot;)\r\n    LocalDateTime myTime\r\n\r\nHere is the link to full answer that explains all the details: [https://stackoverflow.com/questions/31627992/spring-data-jpa-zoneddatetime-format-for-json-serialization][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/31627992/spring-data-jpa-zoneddatetime-format-for-json-serialization","title":"JSON Java 8 LocalDateTime format using Jackson in Vert.x","body":"<p>You will need to annotate your LocalDateTime member as follows:</p>\n<pre><code>@JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;yyyy-MM-dd'T'HH:mm:ss&quot;)\nLocalDateTime myTime\n</code></pre>\n<p>Here is the link to full answer that explains all the details: <a href=\"https://stackoverflow.com/questions/31627992/spring-data-jpa-zoneddatetime-format-for-json-serialization\">Spring Data JPA - ZonedDateTime format for json serialization</a></p>\n"},{"tags":[],"owner":{"account_id":14324952,"reputation":169,"user_id":10347294,"display_name":"Shivam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694015308,"creation_date":1694015308,"answer_id":77053525,"question_id":69733697,"body_markdown":"`java.time.LocalDateTime` is not supported by default so we have to register the module before using `mapTo()` function.\r\nAdd this line before `json.mapTo(RefreshToken.class);` -\r\n\r\n    DatabindCodec.mapper().registerModule(new JavaTimeModule());","title":"JSON Java 8 LocalDateTime format using Jackson in Vert.x","body":"<p><code>java.time.LocalDateTime</code> is not supported by default so we have to register the module before using <code>mapTo()</code> function.\nAdd this line before <code>json.mapTo(RefreshToken.class);</code> -</p>\n<pre><code>DatabindCodec.mapper().registerModule(new JavaTimeModule());\n</code></pre>\n"}],"owner":{"account_id":1466355,"reputation":803,"user_id":1379059,"accept_rate":63,"display_name":"ZAJ"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1449,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69736004,"answer_count":3,"score":0,"last_activity_date":1694015308,"creation_date":1635315522,"question_id":69733697,"body_markdown":"I am trying to create json object from LocaLDateTime but for some reason it is creating json like so, look for issueAt and expireAt key\r\n\r\n&gt; json {&quot;userID&quot;:0,&quot;deviceID&quot;:0,&quot;refreshToken&quot;:&quot;93180548-23b3-4d1b-8b5b-a105b7cff7f9&quot;,**&quot;issuedAt&quot;**:{&quot;year&quot;:2021,&quot;monthValue&quot;:10,&quot;dayOfMonth&quot;:27,&quot;hour&quot;:9,&quot;minute&quot;:22,&quot;second&quot;:31,&quot;nano&quot;:0,&quot;month&quot;:&quot;OCTOBER&quot;,&quot;dayOfWeek&quot;:&quot;WEDNESDAY&quot;,&quot;dayOfYear&quot;:300,&quot;chronology&quot;:{&quot;id&quot;:&quot;ISO&quot;,&quot;calendarType&quot;:&quot;iso8601&quot;}},**&quot;expiresAt&quot;**:{&quot;year&quot;:2021,&quot;monthValue&quot;:10,&quot;dayOfMonth&quot;:28,&quot;hour&quot;:9,&quot;minute&quot;:22,&quot;second&quot;:31,&quot;nano&quot;:0,&quot;month&quot;:&quot;OCTOBER&quot;,&quot;dayOfWeek&quot;:&quot;THURSDAY&quot;,&quot;dayOfYear&quot;:301,&quot;chronology&quot;:{&quot;id&quot;:&quot;ISO&quot;,&quot;calendarType&quot;:&quot;iso8601&quot;}}}\r\n&gt; \r\n&gt; \r\nI want it to be like so\r\n\r\nbatch: [0,0,29a1bf70-648e-4cb5-aef8-5377cf702875,**2021-10-26T12:36:10,2021-10-27T12:36:10**] .\r\n\r\nMy code for creating the 2 dates is below\r\n\r\n        String randomString = UUID.randomUUID().toString();\r\n\t\tInstant myInstant1 = Instant.now().truncatedTo(ChronoUnit.SECONDS);\r\n\t\tLocalDateTime issuedAt = LocalDateTime.ofInstant(myInstant1, ZoneId.systemDefault());\r\n\t\tSystem.out.println(&quot;issued_at : &quot; + issuedAt);\r\n\t\tLocalDateTime expiresAt = issuedAt.plusDays(1);\r\n\t\tSystem.out.println(&quot;expires_at: &quot; + expiresAt.plusDays(1));\r\n\r\nIn the below code is where I get the error when I try to use mapto to add the json object to my class object.\r\n\r\n    JsonObject json = new JsonObject()\r\n\t\t        \t\t.put(&quot;userID&quot;, userID)\r\n\t\t        \t\t.put(&quot;deviceID&quot;, deviceID)\r\n\t\t        \t\t.put(&quot;refreshToken&quot;, randomString)\r\n\t\t\t\t        .put(&quot;issuedAt&quot;, issuedAt)\r\n\t\t\t\t        .put(&quot;expiresAt&quot;, expiresAt);\r\n\t\t        \t\t\t\t\t\t\r\n\t\t        \t\t\t\t\t\r\n\tLOG.info(&quot;json {}&quot;, json.encode());\r\n\r\n\tRefreshToken refreshTokenObj = json.mapTo(RefreshToken.class); //here I am trying to mapTo my class and I get the error\r\n\tLOG.info(&quot;refreshTokenObj {}&quot;, refreshTokenObj);\r\n\r\nThe error I get is\r\n\r\n&gt; 2021-10-27 09:22:31.133+0330 [vert.x-eventloop-thread-1] ERROR com.galiy.main.MainVerticle - Unhandled:\r\njava.lang.IllegalArgumentException: Cannot construct instance of `java.time.LocalDateTime` (no Creators, like default constructor, exist): cannot deserialize from Object value (no delegate- or property-based Creator)\r\n at [Source: UNKNOWN; line: -1, column: -1] (through reference chain: com.galiy.security.refreshToken.RefreshToken[&quot;issuedAt&quot;])\r\n\tat com.fasterxml.jackson.databind.ObjectMapper._convert(ObjectMapper.java:4236) ~[jackson-databind-2.11.4.jar:2.11.4]\r\n\r\nand my RefreshToken model is like so,\r\n\r\n    public class RefreshToken {\r\n\t\r\n\tprivate Integer id;\r\n\tprivate Integer userID;\r\n\tprivate Integer deviceID;\r\n\tprivate String refreshToken;\r\n\tprivate LocalDateTime issuedAt;\r\n\tprivate LocalDateTime expiresAt;\r\n\r\n","title":"JSON Java 8 LocalDateTime format using Jackson in Vert.x","body":"<p>I am trying to create json object from LocaLDateTime but for some reason it is creating json like so, look for issueAt and expireAt key</p>\n<blockquote>\n<p>json {&quot;userID&quot;:0,&quot;deviceID&quot;:0,&quot;refreshToken&quot;:&quot;93180548-23b3-4d1b-8b5b-a105b7cff7f9&quot;,<strong>&quot;issuedAt&quot;</strong>:{&quot;year&quot;:2021,&quot;monthValue&quot;:10,&quot;dayOfMonth&quot;:27,&quot;hour&quot;:9,&quot;minute&quot;:22,&quot;second&quot;:31,&quot;nano&quot;:0,&quot;month&quot;:&quot;OCTOBER&quot;,&quot;dayOfWeek&quot;:&quot;WEDNESDAY&quot;,&quot;dayOfYear&quot;:300,&quot;chronology&quot;:{&quot;id&quot;:&quot;ISO&quot;,&quot;calendarType&quot;:&quot;iso8601&quot;}},<strong>&quot;expiresAt&quot;</strong>:{&quot;year&quot;:2021,&quot;monthValue&quot;:10,&quot;dayOfMonth&quot;:28,&quot;hour&quot;:9,&quot;minute&quot;:22,&quot;second&quot;:31,&quot;nano&quot;:0,&quot;month&quot;:&quot;OCTOBER&quot;,&quot;dayOfWeek&quot;:&quot;THURSDAY&quot;,&quot;dayOfYear&quot;:301,&quot;chronology&quot;:{&quot;id&quot;:&quot;ISO&quot;,&quot;calendarType&quot;:&quot;iso8601&quot;}}}</p>\n</blockquote>\n<p>I want it to be like so</p>\n<p>batch: [0,0,29a1bf70-648e-4cb5-aef8-5377cf702875,<strong>2021-10-26T12:36:10,2021-10-27T12:36:10</strong>] .</p>\n<p>My code for creating the 2 dates is below</p>\n<pre><code>    String randomString = UUID.randomUUID().toString();\n    Instant myInstant1 = Instant.now().truncatedTo(ChronoUnit.SECONDS);\n    LocalDateTime issuedAt = LocalDateTime.ofInstant(myInstant1, ZoneId.systemDefault());\n    System.out.println(&quot;issued_at : &quot; + issuedAt);\n    LocalDateTime expiresAt = issuedAt.plusDays(1);\n    System.out.println(&quot;expires_at: &quot; + expiresAt.plusDays(1));\n</code></pre>\n<p>In the below code is where I get the error when I try to use mapto to add the json object to my class object.</p>\n<pre><code>JsonObject json = new JsonObject()\n                    .put(&quot;userID&quot;, userID)\n                    .put(&quot;deviceID&quot;, deviceID)\n                    .put(&quot;refreshToken&quot;, randomString)\n                    .put(&quot;issuedAt&quot;, issuedAt)\n                    .put(&quot;expiresAt&quot;, expiresAt);\n                                    \n                                \nLOG.info(&quot;json {}&quot;, json.encode());\n\nRefreshToken refreshTokenObj = json.mapTo(RefreshToken.class); //here I am trying to mapTo my class and I get the error\nLOG.info(&quot;refreshTokenObj {}&quot;, refreshTokenObj);\n</code></pre>\n<p>The error I get is</p>\n<blockquote>\n<p>2021-10-27 09:22:31.133+0330 [vert.x-eventloop-thread-1] ERROR com.galiy.main.MainVerticle - Unhandled:\njava.lang.IllegalArgumentException: Cannot construct instance of <code>java.time.LocalDateTime</code> (no Creators, like default constructor, exist): cannot deserialize from Object value (no delegate- or property-based Creator)\nat [Source: UNKNOWN; line: -1, column: -1] (through reference chain: com.galiy.security.refreshToken.RefreshToken[&quot;issuedAt&quot;])\nat com.fasterxml.jackson.databind.ObjectMapper._convert(ObjectMapper.java:4236) ~[jackson-databind-2.11.4.jar:2.11.4]</p>\n</blockquote>\n<p>and my RefreshToken model is like so,</p>\n<pre><code>public class RefreshToken {\n\nprivate Integer id;\nprivate Integer userID;\nprivate Integer deviceID;\nprivate String refreshToken;\nprivate LocalDateTime issuedAt;\nprivate LocalDateTime expiresAt;\n</code></pre>\n"},{"tags":["java","android","gradle","android-gradle-plugin"],"comments":[{"owner":{"account_id":19757645,"reputation":457,"user_id":14467573,"display_name":"Rohan Pande"},"score":0,"creation_date":1694015908,"post_id":77053476,"comment_id":135836688,"body_markdown":"If any information is required to answer this please post will clarify your doubt.","body":"If any information is required to answer this please post will clarify your doubt."},{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1694072936,"post_id":77053476,"comment_id":135843812,"body_markdown":"Android Gradle Plugin is open source, but AFAIK most &quot;commands&quot; are simply implemented as Java code not by calling an external tool. https://android.googlesource.com/platform/tools/base/+/studio-master-dev/build-system/README.md","body":"Android Gradle Plugin is open source, but AFAIK most &quot;commands&quot; are simply implemented as Java code not by calling an external tool. <a href=\"https://android.googlesource.com/platform/tools/base/+/studio-master-dev/build-system/README.md\" rel=\"nofollow noreferrer\">android.googlesource.com/platform/tools/base/+/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":19757645,"reputation":457,"user_id":14467573,"display_name":"Rohan Pande"},"score":0,"creation_date":1694015789,"post_id":77053518,"comment_id":135836665,"body_markdown":"I wanted to know about the commands for example, if we say &quot;Process resources&quot; what is that gradle is running in this step?","body":"I wanted to know about the commands for example, if we say &quot;Process resources&quot; what is that gradle is running in this step?"},{"owner":{"account_id":1096470,"reputation":26066,"user_id":1089967,"accept_rate":59,"display_name":"lance-java"},"score":0,"creation_date":1694016325,"post_id":77053518,"comment_id":135836779,"body_markdown":"The gradle docs for the java plugin have a [tasks](https://docs.gradle.org/current/userguide/java_plugin.html#sec:java_tasks) section which outlines the task names and their types. Perhaps the android docs have similar?","body":"The gradle docs for the java plugin have a <a href=\"https://docs.gradle.org/current/userguide/java_plugin.html#sec:java_tasks\" rel=\"nofollow noreferrer\">tasks</a> section which outlines the task names and their types. Perhaps the android docs have similar?"},{"owner":{"account_id":19757645,"reputation":457,"user_id":14467573,"display_name":"Rohan Pande"},"score":0,"creation_date":1694051719,"post_id":77053518,"comment_id":135841573,"body_markdown":"But every task is running some commands to complete that task can we know about that?","body":"But every task is running some commands to complete that task can we know about that?"},{"owner":{"account_id":1096470,"reputation":26066,"user_id":1089967,"accept_rate":59,"display_name":"lance-java"},"score":1,"creation_date":1694071639,"post_id":77053518,"comment_id":135843567,"body_markdown":"Click through to the docs for each task (eg [ProcessResources docs](https://docs.gradle.org/current/dsl/org.gradle.language.jvm.tasks.ProcessResources.html) or [ProcessResources javadocs](https://docs.gradle.org/current/javadoc/org/gradle/language/jvm/tasks/ProcessResources.html)). Perhaps find the source code for each task (eg [ProcessResources.java](https://github.com/gradle/gradle/blob/master/platforms/jvm/language-jvm/src/main/java/org/gradle/language/jvm/tasks/ProcessResources.java))","body":"Click through to the docs for each task (eg <a href=\"https://docs.gradle.org/current/dsl/org.gradle.language.jvm.tasks.ProcessResources.html\" rel=\"nofollow noreferrer\">ProcessResources docs</a> or <a href=\"https://docs.gradle.org/current/javadoc/org/gradle/language/jvm/tasks/ProcessResources.html\" rel=\"nofollow noreferrer\">ProcessResources javadocs</a>). Perhaps find the source code for each task (eg <a href=\"https://github.com/gradle/gradle/blob/master/platforms/jvm/language-jvm/src/main/java/org/gradle/language/jvm/tasks/ProcessResources.java\" rel=\"nofollow noreferrer\">ProcessResources.java</a>)"}],"tags":[],"owner":{"account_id":1096470,"reputation":26066,"user_id":1089967,"accept_rate":59,"display_name":"lance-java"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694015264,"creation_date":1694015264,"answer_id":77053518,"question_id":77053476,"body_markdown":"I like to add the [task tree plugin](https://github.com/dorongold/gradle-task-tree) to my build.gradle\r\n\r\n```\r\nplugins {\r\n    id &quot;com.dorongold.task-tree&quot; version &quot;2.1.1&quot;\r\n}\r\n```\r\n\r\nYou can then run the following which will show a task tree for the &quot;build&quot; task\r\n```\r\ngradle build taskTree\r\n```\r\n\r\nFor a java project the output looks like\r\n```\r\n:build\r\n+--- :assemble\r\n|    \\--- :jar\r\n|         \\--- :classes\r\n|              +--- :compileJava\r\n|              \\--- :processResources\r\n\\--- :check\r\n     \\--- :test\r\n          +--- :classes\r\n          |    +--- :compileJava\r\n          |    \\--- :processResources\r\n          \\--- :testClasses\r\n               +--- :compileTestJava\r\n               |    \\--- :classes\r\n               |         +--- :compileJava\r\n               |         \\--- :processResources\r\n               \\--- :processTestResources\r\n```\r\n","title":"Can we know what gradle runs internal commands to build an android application?","body":"<p>I like to add the <a href=\"https://github.com/dorongold/gradle-task-tree\" rel=\"nofollow noreferrer\">task tree plugin</a> to my build.gradle</p>\n<pre><code>plugins {\n    id &quot;com.dorongold.task-tree&quot; version &quot;2.1.1&quot;\n}\n</code></pre>\n<p>You can then run the following which will show a task tree for the &quot;build&quot; task</p>\n<pre><code>gradle build taskTree\n</code></pre>\n<p>For a java project the output looks like</p>\n<pre><code>:build\n+--- :assemble\n|    \\--- :jar\n|         \\--- :classes\n|              +--- :compileJava\n|              \\--- :processResources\n\\--- :check\n     \\--- :test\n          +--- :classes\n          |    +--- :compileJava\n          |    \\--- :processResources\n          \\--- :testClasses\n               +--- :compileTestJava\n               |    \\--- :classes\n               |         +--- :compileJava\n               |         \\--- :processResources\n               \\--- :processTestResources\n</code></pre>\n"}],"owner":{"account_id":19757645,"reputation":457,"user_id":14467573,"display_name":"Rohan Pande"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1694015264,"creation_date":1694014965,"question_id":77053476,"body_markdown":"I am just curious and wanted to know about gradle the set of commands it runs internally to build an APK. \r\n\r\nIs that possible to know where I can read about this? I tried to pass the debug and info flag while doing &#39;assembleDebug&#39; task but couldn&#39;t get any much information what commands it runs internally.\r\n\r\nHelp would be appreciated.","title":"Can we know what gradle runs internal commands to build an android application?","body":"<p>I am just curious and wanted to know about gradle the set of commands it runs internally to build an APK.</p>\n<p>Is that possible to know where I can read about this? I tried to pass the debug and info flag while doing 'assembleDebug' task but couldn't get any much information what commands it runs internally.</p>\n<p>Help would be appreciated.</p>\n"},{"tags":["java","spring","gradle","git-bash"],"comments":[{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1495255655,"post_id":44081972,"comment_id":75187359,"body_markdown":"Do you have Java installed in that folder?","body":"Do you have Java installed in that folder?"}],"answers":[{"tags":[],"owner":{"account_id":7595189,"reputation":44576,"user_id":5761558,"display_name":"ernest_k"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1495256351,"creation_date":1495256351,"answer_id":44082086,"question_id":44081972,"body_markdown":"Looks like your JAVA_HOME variable resolves to a JRE installation directory. But as you&#39;re talking about Gradle, you&#39;re surely trying to build/compile code.\r\n\r\nIf you have a JDK installed, change JAVA_HOME variable to point to it. The folder name should typically start with &quot;jdk&quot;. Otherwise, you have to install a Java Development Kit.\r\n\r\nYou could also try exporting the variable manually before running gradle on the command line (`SET JAVA_HOME=&lt;path to the jdk directory&gt;`)","title":"Windows 10 Gradle: JAVA_HOME is set to an invalid directory","body":"<p>Looks like your JAVA_HOME variable resolves to a JRE installation directory. But as you're talking about Gradle, you're surely trying to build/compile code.</p>\n\n<p>If you have a JDK installed, change JAVA_HOME variable to point to it. The folder name should typically start with \"jdk\". Otherwise, you have to install a Java Development Kit.</p>\n\n<p>You could also try exporting the variable manually before running gradle on the command line (<code>SET JAVA_HOME=&lt;path to the jdk directory&gt;</code>)</p>\n"},{"comments":[{"owner":{"account_id":4635155,"reputation":536,"user_id":3756599,"accept_rate":75,"display_name":"TravisChambers"},"score":3,"creation_date":1554757375,"post_id":50053110,"comment_id":97861742,"body_markdown":"THIS was what solved it for me. I didn&#39;t realize this.","body":"THIS was what solved it for me. I didn&#39;t realize this."}],"tags":[],"owner":{"account_id":13453103,"reputation":250,"user_id":9707379,"display_name":"Kyrei"},"comment_count":1,"down_vote_count":0,"up_vote_count":25,"is_accepted":false,"score":25,"last_activity_date":1524784336,"creation_date":1524784336,"answer_id":50053110,"question_id":44081972,"body_markdown":"In addition to Ernest&#39;s answer, the JAVA_HOME it wants is the actual directory, not the bin folder like the path wants for javac. Took me a while to work that out","title":"Windows 10 Gradle: JAVA_HOME is set to an invalid directory","body":"<p>In addition to Ernest's answer, the JAVA_HOME it wants is the actual directory, not the bin folder like the path wants for javac. Took me a while to work that out</p>\n"},{"tags":[],"owner":{"account_id":3356679,"reputation":101,"user_id":2819446,"display_name":"artie"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1598885287,"creation_date":1598885287,"answer_id":63673048,"question_id":44081972,"body_markdown":"I&#39;ve found myself with the same issue, although my JAVA_HOME was set to the correct JDK path.\r\nHowever Windows 10 appended a semicolon at the end of the path.\r\nThis way the JAVA_HOME variable would work anywhere but not with Gradle.\r\nI&#39;m posting this, because it might spare someone else the time I&#39;ve been looking for it ;)","title":"Windows 10 Gradle: JAVA_HOME is set to an invalid directory","body":"<p>I've found myself with the same issue, although my JAVA_HOME was set to the correct JDK path.\nHowever Windows 10 appended a semicolon at the end of the path.\nThis way the JAVA_HOME variable would work anywhere but not with Gradle.\nI'm posting this, because it might spare someone else the time I've been looking for it ;)</p>\n"},{"tags":[],"owner":{"account_id":2327294,"reputation":623,"user_id":2041475,"display_name":"MikkelT"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1599815341,"creation_date":1599815341,"answer_id":63844018,"question_id":44081972,"body_markdown":"Found a solution I hadn&#39;t seen before in my googling.\r\n\r\nOpen up your gradlew.bat in some editor. On line 34-ish you will see this:\r\n\r\n```\r\n:findJavaFromJavaHome\r\nset JAVA_HOME=%JAVA_HOME:&quot;=%\r\nset JAVA_EXE=%JAVA_HOME%\\bin\\java.exe\r\n\r\nif exist &quot;%JAVA_EXE%&quot; goto init\r\n\r\necho.\r\necho ERROR: JAVA_HOME is set to an invalid directory: %JAVA_HOME%\r\necho.\r\necho Please set the JAVA_HOME variable in your environment to match the\r\necho location of your Java installation.\r\n```\r\n\r\nadd this line to the error message: `echo %JAVA_EXE%`\r\n\r\nso it looks like this\r\n\r\n```\r\necho ERROR: JAVA_HOME is set to an invalid directory: %JAVA_HOME%\r\necho %JAVA_EXE%\r\necho.\r\necho Please set the JAVA_HOME variable in your environment to match the\r\necho location of your Java installation.\r\n```\r\n\r\nThen run your gradlew.bat file.\r\n\r\nThe error should now appear again, but with the added echo of the path to JAVA_EXE. In my case it was echoing `\\bin\\java.exe` and NOT the full path `C:\\...\\Java\\jre1.8.0_251\\bin\\java.exe`\r\n\r\nto fix this, I changed \r\n\r\n`set JAVA_EXE=%JAVA_HOME%\\bin\\java.exe`\r\n\r\nto\r\n\r\n`set JAVA_EXE=C:\\...\\Java\\jdk1.8.0_261\\bin\\java.exe` \r\n\r\nThe value is now hardcoded, true, but it worked. I don&#39;t know why gradle doesn&#39;t concat the variable name into the path.\r\n\r\n\r\n","title":"Windows 10 Gradle: JAVA_HOME is set to an invalid directory","body":"<p>Found a solution I hadn't seen before in my googling.</p>\n<p>Open up your gradlew.bat in some editor. On line 34-ish you will see this:</p>\n<pre><code>:findJavaFromJavaHome\nset JAVA_HOME=%JAVA_HOME:&quot;=%\nset JAVA_EXE=%JAVA_HOME%\\bin\\java.exe\n\nif exist &quot;%JAVA_EXE%&quot; goto init\n\necho.\necho ERROR: JAVA_HOME is set to an invalid directory: %JAVA_HOME%\necho.\necho Please set the JAVA_HOME variable in your environment to match the\necho location of your Java installation.\n</code></pre>\n<p>add this line to the error message: <code>echo %JAVA_EXE%</code></p>\n<p>so it looks like this</p>\n<pre><code>echo ERROR: JAVA_HOME is set to an invalid directory: %JAVA_HOME%\necho %JAVA_EXE%\necho.\necho Please set the JAVA_HOME variable in your environment to match the\necho location of your Java installation.\n</code></pre>\n<p>Then run your gradlew.bat file.</p>\n<p>The error should now appear again, but with the added echo of the path to JAVA_EXE. In my case it was echoing <code>\\bin\\java.exe</code> and NOT the full path <code>C:\\...\\Java\\jre1.8.0_251\\bin\\java.exe</code></p>\n<p>to fix this, I changed</p>\n<p><code>set JAVA_EXE=%JAVA_HOME%\\bin\\java.exe</code></p>\n<p>to</p>\n<p><code>set JAVA_EXE=C:\\...\\Java\\jdk1.8.0_261\\bin\\java.exe</code></p>\n<p>The value is now hardcoded, true, but it worked. I don't know why gradle doesn't concat the variable name into the path.</p>\n"},{"tags":[],"owner":{"account_id":16458154,"reputation":113,"user_id":11889864,"display_name":"Jitendra Asawa"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1633778029,"creation_date":1633778029,"answer_id":69506207,"question_id":44081972,"body_markdown":"Please set the JAVA_HOME variable location to the path to JDK instead of JRE.\r\n\r\nIf that is correctly set, check the environment variables in Edit mode.\r\nIn my case, I found that a semicolon was appended to the JAVA_HOME environment variable at the end.\r\n\r\nTo check:\r\n1. Open the environment variables list.\r\n2. Select the variable and click Edit.\r\n3. Remove the semicolon and Save.\r\n\r\nClosed the settings and checked the path in cmd using **echo %JAVA_HOME%**, and ran **gradle -v**.\r\n\r\nIt ran perfectly.\r\n\r\n**Note**: Check the variable value by clicking the Edit button as we cannot see the semicolon instead. Windows adds a semicolon so that the same variable can be used as the path to multiple locations.\r\n\r\nAdded picture for reference:\r\n[![Environment variable in Edit mode][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/5a6UG.png","title":"Windows 10 Gradle: JAVA_HOME is set to an invalid directory","body":"<p>Please set the JAVA_HOME variable location to the path to JDK instead of JRE.</p>\n<p>If that is correctly set, check the environment variables in Edit mode.\nIn my case, I found that a semicolon was appended to the JAVA_HOME environment variable at the end.</p>\n<p>To check:</p>\n<ol>\n<li>Open the environment variables list.</li>\n<li>Select the variable and click Edit.</li>\n<li>Remove the semicolon and Save.</li>\n</ol>\n<p>Closed the settings and checked the path in cmd using <strong>echo %JAVA_HOME%</strong>, and ran <strong>gradle -v</strong>.</p>\n<p>It ran perfectly.</p>\n<p><strong>Note</strong>: Check the variable value by clicking the Edit button as we cannot see the semicolon instead. Windows adds a semicolon so that the same variable can be used as the path to multiple locations.</p>\n<p>Added picture for reference:\n<a href=\"https://i.stack.imgur.com/5a6UG.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/5a6UG.png\" alt=\"Environment variable in Edit mode\" /></a></p>\n"},{"tags":[],"owner":{"account_id":5039122,"reputation":51,"user_id":4047099,"display_name":"kpamu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662596161,"creation_date":1662596161,"answer_id":73642568,"question_id":44081972,"body_markdown":"If you didn&#39;t have admin rights, override the JAVA_HOME in User Environment Variable. Avoid typo by selecting the Java home folder. You must include folder before the bin ( do not include /bin) for java home.","title":"Windows 10 Gradle: JAVA_HOME is set to an invalid directory","body":"<p>If you didn't have admin rights, override the JAVA_HOME in User Environment Variable. Avoid typo by selecting the Java home folder. You must include folder before the bin ( do not include /bin) for java home.</p>\n"},{"comments":[{"owner":{"account_id":8876308,"reputation":2910,"user_id":9128086,"display_name":"coturiv"},"score":0,"creation_date":1667815239,"post_id":74287187,"comment_id":131249209,"body_markdown":"This does not really answer the question. If you have a different question, you can ask it by clicking [Ask Question](https://stackoverflow.com/questions/ask). To get notified when this question gets new answers, you can [follow this question](https://meta.stackexchange.com/q/345661). Once you have enough [reputation](https://stackoverflow.com/help/whats-reputation), you can also [add a bounty](https://stackoverflow.com/help/privileges/set-bounties) to draw more attention to this question. - [From Review](/review/late-answers/33086490)","body":"This does not really answer the question. If you have a different question, you can ask it by clicking <a href=\"https://stackoverflow.com/questions/ask\">Ask Question</a>. To get notified when this question gets new answers, you can <a href=\"https://meta.stackexchange.com/q/345661\">follow this question</a>. Once you have enough <a href=\"https://stackoverflow.com/help/whats-reputation\">reputation</a>, you can also <a href=\"https://stackoverflow.com/help/privileges/set-bounties\">add a bounty</a> to draw more attention to this question. - <a href=\"/review/late-answers/33086490\">From Review</a>"}],"tags":[],"owner":{"account_id":6595569,"reputation":1,"user_id":14256551,"display_name":"Tyler Harris"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667382591,"creation_date":1667382380,"answer_id":74287187,"question_id":44081972,"body_markdown":"[][1]If none of the above works open the gradle.bat file in an editor and make sure that IT is correct , in my case gradle was the problem\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/eYmdQ.png","title":"Windows 10 Gradle: JAVA_HOME is set to an invalid directory","body":"<p><a href=\"https://i.stack.imgur.com/eYmdQ.png\" rel=\"nofollow noreferrer\"></a>If none of the above works open the gradle.bat file in an editor and make sure that IT is correct , in my case gradle was the problem</p>\n"},{"tags":[],"owner":{"account_id":13748620,"reputation":1,"user_id":9921443,"display_name":"M.Soumen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686023276,"creation_date":1685724692,"answer_id":76392094,"question_id":44081972,"body_markdown":"The pictorial representation of @Kyrei answer is :\r\n\r\n    [JAVA_HOME variable data (C:\\your\\java\\folder\\loc\\\\)][1]\r\n\r\nAnd I also removed semicolon(;) from the last part which is inserted by default by windows.\r\n\r\n\r\n**P.S:** as my reputaion is very low that&#39;s why I can&#39;t put this image in the &quot;comment&quot; section.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/CDYpI.jpg\r\n","title":"Windows 10 Gradle: JAVA_HOME is set to an invalid directory","body":"<p>The pictorial representation of @Kyrei answer is :</p>\n<pre><code>[JAVA_HOME variable data (C:\\your\\java\\folder\\loc\\\\)][1]\n</code></pre>\n<p>And I also removed semicolon(;) from the last part which is inserted by default by windows.</p>\n<p><strong>P.S:</strong> as my reputaion is very low that's why I can't put this image in the &quot;comment&quot; section.</p>\n"},{"tags":[],"owner":{"account_id":3809857,"reputation":10074,"user_id":3161139,"accept_rate":12,"display_name":"Antonin GAVREL"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694015240,"creation_date":1694015240,"answer_id":77053514,"question_id":44081972,"body_markdown":"### If you have installed Android Studio\r\n\r\nIt ships with Java already.\r\n\r\nWindows 10/11 access the \r\nSelect new environment variable and add the following value/path:\r\n```\r\nJAVA_HOME\r\nC:\\Program Files\\Android\\Android Studio\\jbr\\bin\\java\r\n```\r\n\r\nAlso I recommend downloading gradle from https://services.gradle.org/distributions/ ( https://services.gradle.org/distributions/gradle-8.3-all.zip to be specific or more recent ) and extract it to:\r\n```\r\nC:\\Users\\{your username}\\.gradle\\wrapper\\dists\r\n```\r\nAnd then add it to your (system) path environment variable","title":"Windows 10 Gradle: JAVA_HOME is set to an invalid directory","body":"<h3>If you have installed Android Studio</h3>\n<p>It ships with Java already.</p>\n<p>Windows 10/11 access the\nSelect new environment variable and add the following value/path:</p>\n<pre><code>JAVA_HOME\nC:\\Program Files\\Android\\Android Studio\\jbr\\bin\\java\n</code></pre>\n<p>Also I recommend downloading gradle from <a href=\"https://services.gradle.org/distributions/\" rel=\"nofollow noreferrer\">https://services.gradle.org/distributions/</a> ( <a href=\"https://services.gradle.org/distributions/gradle-8.3-all.zip\" rel=\"nofollow noreferrer\">https://services.gradle.org/distributions/gradle-8.3-all.zip</a> to be specific or more recent ) and extract it to:</p>\n<pre><code>C:\\Users\\{your username}\\.gradle\\wrapper\\dists\n</code></pre>\n<p>And then add it to your (system) path environment variable</p>\n"}],"owner":{"account_id":3951945,"reputation":307,"user_id":3261923,"accept_rate":75,"display_name":"hanabi_noir"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32962,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":44082086,"answer_count":9,"score":12,"last_activity_date":1694015240,"creation_date":1495255262,"question_id":44081972,"body_markdown":"I was trying to run `./gradlew bootRun` in both **Git Bash** and **PowerShell**, and got this error: `ERROR: JAVA_HOME is set to an invalid directory: C:\\Program Files\\Java\\jre1.8.0_121`\r\n\r\nThe **gradlew** file is inside the project directory that cloned from git. It is a practice project from **Spring official guide**. There&#39;s also a **gradle.bat** file with these lines: \r\n\r\n    :findJavaFromJavaHome\r\n    set JAVA_HOME=%JAVA_HOME:&quot;=%\r\n    set JAVA_EXE=%JAVA_HOME%\\bin\\java.exe \r\n\r\nI also tried to run **Eclipse EE**, which got no problem. The environment setting should be no problem.","title":"Windows 10 Gradle: JAVA_HOME is set to an invalid directory","body":"<p>I was trying to run <code>./gradlew bootRun</code> in both <strong>Git Bash</strong> and <strong>PowerShell</strong>, and got this error: <code>ERROR: JAVA_HOME is set to an invalid directory: C:\\Program Files\\Java\\jre1.8.0_121</code></p>\n\n<p>The <strong>gradlew</strong> file is inside the project directory that cloned from git. It is a practice project from <strong>Spring official guide</strong>. There's also a <strong>gradle.bat</strong> file with these lines: </p>\n\n<pre><code>:findJavaFromJavaHome\nset JAVA_HOME=%JAVA_HOME:\"=%\nset JAVA_EXE=%JAVA_HOME%\\bin\\java.exe \n</code></pre>\n\n<p>I also tried to run <strong>Eclipse EE</strong>, which got no problem. The environment setting should be no problem.</p>\n"},{"tags":["java","intellij-idea","javafx"],"comments":[{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1694008938,"post_id":77052624,"comment_id":135835000,"body_markdown":"Can you repost all your code and stack trace, [properly formatted](https://meta.stackoverflow.com/questions/251361/how-do-i-format-my-code-blocks), without all the HTML `&lt;br/&gt;` elements added?","body":"Can you repost all your code and stack trace, <a href=\"https://meta.stackoverflow.com/questions/251361/how-do-i-format-my-code-blocks\">properly formatted</a>, without all the HTML <code>&lt;br&#47;&gt;</code> elements added?"},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":2,"creation_date":1694009059,"post_id":77052624,"comment_id":135835041,"body_markdown":"Anyway, why do you think the location of the FXML file is the problem? The stack trace clearly indicates the issue is on line 7 of the FXML (which it couldn&#39;t possibly say if it couldn&#39;t find the FXML file). It says the issue is that your controller class `HelloController` doesn&#39;t have a no-argument constructor.","body":"Anyway, why do you think the location of the FXML file is the problem? The stack trace clearly indicates the issue is on line 7 of the FXML (which it couldn&#39;t possibly say if it couldn&#39;t find the FXML file). It says the issue is that your controller class <code>HelloController</code> doesn&#39;t have a no-argument constructor."},{"owner":{"account_id":29379758,"reputation":1,"user_id":22510537,"display_name":"wan1796"},"score":0,"creation_date":1694010896,"post_id":77052624,"comment_id":135835523,"body_markdown":"Pardon my formatting, and I am still pretty new to JavaFX. When I started up the project, I didn&#39;t see a no-argument constructor within HelloController yet it still ran so I assumed it just wasn&#39;t required.","body":"Pardon my formatting, and I am still pretty new to JavaFX. When I started up the project, I didn&#39;t see a no-argument constructor within HelloController yet it still ran so I assumed it just wasn&#39;t required."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":3,"creation_date":1694013567,"post_id":77052624,"comment_id":135836164,"body_markdown":"If you don&#39;t define any constructor, a default no-arg constructor is defined by default. (This is just base Java, nothing to do with JAvaFX or FXML. A class needs a constructor otherwise instances of it cannot be created.) If you define your own constructor, of any signature, then you don&#39;t get the default one for free.","body":"If you don&#39;t define any constructor, a default no-arg constructor is defined by default. (This is just base Java, nothing to do with JAvaFX or FXML. A class needs a constructor otherwise instances of it cannot be created.) If you define your own constructor, of any signature, then you don&#39;t get the default one for free."},{"owner":{"account_id":29379758,"reputation":1,"user_id":22510537,"display_name":"wan1796"},"score":0,"creation_date":1694014910,"post_id":77052624,"comment_id":135836472,"body_markdown":"Just edited my question - added HelloController.java. I did define a constructor that requires a string parameter, so yes instances of it should be able to be created - not in this case apparently..","body":"Just edited my question - added HelloController.java. I did define a constructor that requires a string parameter, so yes instances of it should be able to be created - not in this case apparently.."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":2,"creation_date":1694016516,"post_id":77052624,"comment_id":135836819,"body_markdown":"You&#39;re missing the point. A controller *must have* a no-argument constructor (under default usage). (Just think about it: the controller instance is created by the `FXMLLoader` when you load the FXML. How do you expect the `FXMLLoader` to know what to pass to the constructor if it has a parameter?) By defining a constructor which takes a parameter, you no longer have a no-argument constructor, so the code fails when the `FXMLLoader` tries to load it. You can see this from the stack trace, where `FXMLLoader.processAttribute()` tries to invoke a constructor.","body":"You&#39;re missing the point. A controller <i>must have</i> a no-argument constructor (under default usage). (Just think about it: the controller instance is created by the <code>FXMLLoader</code> when you load the FXML. How do you expect the <code>FXMLLoader</code> to know what to pass to the constructor if it has a parameter?) By defining a constructor which takes a parameter, you no longer have a no-argument constructor, so the code fails when the <code>FXMLLoader</code> tries to load it. You can see this from the stack trace, where <code>FXMLLoader.processAttribute()</code> tries to invoke a constructor."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1694033244,"post_id":77052624,"comment_id":135839803,"body_markdown":"If you want to know how to provide a parameter to your controller (e.g. how to set the `String path` parameter that your controller requires to operate), see: [Passing Parameters JavaFX FXML](https://stackoverflow.com/questions/14187963/passing-parameters-javafx-fxml)","body":"If you want to know how to provide a parameter to your controller (e.g. how to set the <code>String path</code> parameter that your controller requires to operate), see: <a href=\"https://stackoverflow.com/questions/14187963/passing-parameters-javafx-fxml\">Passing Parameters JavaFX FXML</a>"}],"owner":{"account_id":29379758,"reputation":1,"user_id":22510537,"display_name":"wan1796"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1694009425,"answer_count":0,"score":0,"last_activity_date":1694014944,"creation_date":1694008652,"question_id":77052624,"body_markdown":"I am working on a JavaFX project in IntelliJ IDEA. I swear that I have never changed the location of main-db.fxml, and it used to run smoothly before. But now all of a sudden it&#39;s giving me a LoadException error, help!\r\n\r\nHelloApplication.java:\r\n\r\n```\r\npublic class HelloApplication extends Application {\r\n\r\n\r\n    FileChooser fc = new FileChooser(); \r\n\r\n\r\n\r\n    public void start(Stage stage) throws Exception, InvalidFormatException {\r\n\r\n        fc.setTitle(&quot;Select the Excel file&quot;);\r\n\r\n        fc.getExtensionFilters().addAll(new FileChooser.ExtensionFilter(&quot;Excel file&quot;,&quot;*.xlsx&quot;));\r\n\r\n        File sheet = fc.showOpenDialog(new Stage());\r\n\r\n\r\n        String sheetPath = sheet.getPath();\r\n\r\n\r\n        if (sheet != null) {\r\n\r\n            FXMLLoader loader = new FXMLLoader(HelloApplication.class.getResource(&quot;main-db.fxml&quot;));\r\n\r\n\r\n            **Scene scene = new Scene(loader.load(), 600, 480);**\r\n\r\n            stage.setTitle(&quot;Welcome&quot;);\r\n\r\n            stage.setScene(scene);\r\n\r\n            stage.show();\r\n\r\n\r\n            }\r\n\r\n\r\n        }\r\n    }\r\n```\r\n\r\nHelloController.java:\r\n```\r\npublic class HelloController {\r\n\r\n    @FXML\r\n    public Pane DBPane;\r\n\r\n    @FXML\r\n    private Label studentCount;\r\n\r\n    @FXML\r\n    private Label testLabel;\r\n\r\n    // method to allow access to a label from other classes\r\n    private final String path;\r\n    private File sheet;\r\n\r\n\r\n    public HelloController(String path) {\r\n\r\n        this.path = path;\r\n        this.sheet = new File(path);\r\n    }\r\n\r\n    public void showCount() throws IOException {\r\n        FileInputStream fisDB = new FileInputStream(sheet);\r\n        Workbook wb = new XSSFWorkbook(fisDB);\r\n        Sheet names = wb.getSheetAt(0);\r\n        int count = names.getPhysicalNumberOfRows();\r\n\r\n        studentCount.setText(String.valueOf(count));\r\n    }\r\n```\r\n\r\nmain-db.fxml (Users\\PC\\IdeaProjects\\IA_real_2\\src\\main\\resources\\com\\example\\IA_real_2\\main-db.fxml):\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n\r\n&lt;?import javafx.scene.control.Label?&gt;\r\n\r\n&lt;?import javafx.scene.layout.Pane?&gt;\r\n\r\n&lt;?import javafx.scene.text.Font?&gt;\r\n\r\n\r\n**&lt;Pane fx:id=&quot;DBPane&quot; maxHeight=&quot;-Infinity&quot; maxWidth=&quot;-Infinity&quot; minHeight=&quot;-Infinity&quot; minWidth=&quot;-Infinity&quot; prefHeight=&quot;500.0&quot; prefWidth=&quot;800.0&quot; xmlns=&quot;http://javafx.com/javafx/20.0.1&quot; xmlns:fx=&quot;http://javafx.com/fxml/1&quot; fx:controller=&quot;com.example.ia_real_2.HelloController&quot;&gt;**\r\n\r\n   &lt;children&gt;\r\n\r\n      &lt;Label fx:id=&quot;studentCount&quot; layoutX=&quot;53.0&quot; layoutY=&quot;64.0&quot; text=&quot;Count here&quot;&gt;\r\n\r\n         &lt;font&gt;\r\n\r\n            &lt;Font size=&quot;41.0&quot; /&gt;\r\n\r\n         &lt;/font&gt;&lt;/Label&gt;\r\n\r\n   &lt;/children&gt;\r\n\r\n&lt;/Pane&gt;\r\n```\r\n\r\nIntelliJ flagged the lines that I&#39;ve boldened as being the root of the cause. Any help would be appreciated!!!\r\n\r\nHere&#39;s the exception log:\r\n```\r\nException in Application start method\r\n\r\njava.lang.reflect.InvocationTargetException\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:119)\r\n\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:578)\r\n\r\n\tat javafx.graphics@20/com.sun.javafx.application.LauncherImpl.launchApplicationWithArgs(LauncherImpl.java:464)\r\n\r\n\tat javafx.graphics@20/com.sun.javafx.application.LauncherImpl.launchApplication(LauncherImpl.java:363)\r\n\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\r\n\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:578)\r\n\r\n\tat java.base/sun.launcher.LauncherHelper$FXHelper.main(LauncherHelper.java:1081)\r\n\r\nCaused by: java.lang.RuntimeException: Exception in Application start method\r\n\r\n\tat javafx.graphics@20/com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:893)\r\n\r\n\tat javafx.graphics@20/com.sun.javafx.application.LauncherImpl.lambda$launchApplication$2(LauncherImpl.java:195)\r\n\r\n\tat java.base/java.lang.Thread.run(Thread.java:1623)\r\n\r\nCaused by: javafx.fxml.LoadException: \r\n/C:/Users/PC/IdeaProjects/IA_real_2/target/classes/com/example/ia_real_2/main-db.fxml:7\r\n\r\n\r\n\tat javafx.fxml@20/javafx.fxml.FXMLLoader.constructLoadException(FXMLLoader.java:2722)\r\n\r\n\tat javafx.fxml@20/javafx.fxml.FXMLLoader$ValueElement.processAttribute(FXMLLoader.java:946)\r\n\r\n\tat javafx.fxml@20/javafx.fxml.FXMLLoader$InstanceDeclarationElement.processAttribute(FXMLLoader.java:983)\r\n\r\n\tat javafx.fxml@20/javafx.fxml.FXMLLoader$Element.processStartElement(FXMLLoader.java:230)\r\n\r\n\tat javafx.fxml@20/javafx.fxml.FXMLLoader$ValueElement.processStartElement(FXMLLoader.java:757)\r\n\r\n\tat javafx.fxml@20/javafx.fxml.FXMLLoader.processStartElement(FXMLLoader.java:2853)\r\n\r\n\tat javafx.fxml@20/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2649)\r\n\r\n\tat javafx.fxml@20/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2563)\r\n\r\n\tat javafx.fxml@20/javafx.fxml.FXMLLoader.load(FXMLLoader.java:2531)\r\n\r\n\tat com.example.ia_real/com.example.ia_real_2.HelloApplication.start(HelloApplication.java:45)\r\n\r\n\tat javafx.graphics@20/com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$9(LauncherImpl.java:839)\r\n\r\n\tat javafx.graphics@20/com.sun.javafx.application.PlatformImpl.lambda$runAndWait$12(PlatformImpl.java:483)\r\n\r\n\tat javafx.graphics@20/com.sun.javafx.application.PlatformImpl.lambda$runLater$10(PlatformImpl.java:456)\r\n\r\n\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:400)\r\n\r\n\tat javafx.graphics@20/com.sun.javafx.application.PlatformImpl.lambda$runLater$11(PlatformImpl.java:455)\r\n\r\n\tat javafx.graphics@20/com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)\r\n\r\n\tat javafx.graphics@20/com.sun.glass.ui.win.WinApplication._runLoop(Native Method)\r\n\r\n\tat javafx.graphics@20/com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185)\r\n\r\n\t... 1 more\r\n\r\nCaused by: java.lang.NoSuchMethodException: com.example.ia_real_2.HelloController.&lt;init&gt;()\r\n\r\n\tat java.base/java.lang.Class.getConstructor0(Class.java:3685)\r\n\r\n\tat java.base/java.lang.Class.getDeclaredConstructor(Class.java:2854)\r\n\r\n\tat javafx.fxml@20/javafx.fxml.FXMLLoader$ValueElement.processAttribute(FXMLLoader.java:941)\r\n\t... 17 more\r\n\r\nException running application com.example.ia_real_2.HelloApplication\r\n```\r\n\r\n\r\nI&#39;ve tried to reformat the path of the fxml file to &quot;/com/example/ia_real_2.fxml&quot; but to no avail. I&#39;ve also looked around the dependencies but nothing sus has came up either. I&#39;ve looked at the project structure of a default JavaFX project and it seems to be identical - the only difference being that the default project runs while mine doesn&#39;t.","title":"I am getting a LoadException error here, despite never changing the location of the .fxml file","body":"<p>I am working on a JavaFX project in IntelliJ IDEA. I swear that I have never changed the location of main-db.fxml, and it used to run smoothly before. But now all of a sudden it's giving me a LoadException error, help!</p>\n<p>HelloApplication.java:</p>\n<pre><code>public class HelloApplication extends Application {\n\n\n    FileChooser fc = new FileChooser(); \n\n\n\n    public void start(Stage stage) throws Exception, InvalidFormatException {\n\n        fc.setTitle(&quot;Select the Excel file&quot;);\n\n        fc.getExtensionFilters().addAll(new FileChooser.ExtensionFilter(&quot;Excel file&quot;,&quot;*.xlsx&quot;));\n\n        File sheet = fc.showOpenDialog(new Stage());\n\n\n        String sheetPath = sheet.getPath();\n\n\n        if (sheet != null) {\n\n            FXMLLoader loader = new FXMLLoader(HelloApplication.class.getResource(&quot;main-db.fxml&quot;));\n\n\n            **Scene scene = new Scene(loader.load(), 600, 480);**\n\n            stage.setTitle(&quot;Welcome&quot;);\n\n            stage.setScene(scene);\n\n            stage.show();\n\n\n            }\n\n\n        }\n    }\n</code></pre>\n<p>HelloController.java:</p>\n<pre><code>public class HelloController {\n\n    @FXML\n    public Pane DBPane;\n\n    @FXML\n    private Label studentCount;\n\n    @FXML\n    private Label testLabel;\n\n    // method to allow access to a label from other classes\n    private final String path;\n    private File sheet;\n\n\n    public HelloController(String path) {\n\n        this.path = path;\n        this.sheet = new File(path);\n    }\n\n    public void showCount() throws IOException {\n        FileInputStream fisDB = new FileInputStream(sheet);\n        Workbook wb = new XSSFWorkbook(fisDB);\n        Sheet names = wb.getSheetAt(0);\n        int count = names.getPhysicalNumberOfRows();\n\n        studentCount.setText(String.valueOf(count));\n    }\n</code></pre>\n<p>main-db.fxml (Users\\PC\\IdeaProjects\\IA_real_2\\src\\main\\resources\\com\\example\\IA_real_2\\main-db.fxml):</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n\n&lt;?import javafx.scene.control.Label?&gt;\n\n&lt;?import javafx.scene.layout.Pane?&gt;\n\n&lt;?import javafx.scene.text.Font?&gt;\n\n\n**&lt;Pane fx:id=&quot;DBPane&quot; maxHeight=&quot;-Infinity&quot; maxWidth=&quot;-Infinity&quot; minHeight=&quot;-Infinity&quot; minWidth=&quot;-Infinity&quot; prefHeight=&quot;500.0&quot; prefWidth=&quot;800.0&quot; xmlns=&quot;http://javafx.com/javafx/20.0.1&quot; xmlns:fx=&quot;http://javafx.com/fxml/1&quot; fx:controller=&quot;com.example.ia_real_2.HelloController&quot;&gt;**\n\n   &lt;children&gt;\n\n      &lt;Label fx:id=&quot;studentCount&quot; layoutX=&quot;53.0&quot; layoutY=&quot;64.0&quot; text=&quot;Count here&quot;&gt;\n\n         &lt;font&gt;\n\n            &lt;Font size=&quot;41.0&quot; /&gt;\n\n         &lt;/font&gt;&lt;/Label&gt;\n\n   &lt;/children&gt;\n\n&lt;/Pane&gt;\n</code></pre>\n<p>IntelliJ flagged the lines that I've boldened as being the root of the cause. Any help would be appreciated!!!</p>\n<p>Here's the exception log:</p>\n<pre><code>Exception in Application start method\n\njava.lang.reflect.InvocationTargetException\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:119)\n\n    at java.base/java.lang.reflect.Method.invoke(Method.java:578)\n\n    at javafx.graphics@20/com.sun.javafx.application.LauncherImpl.launchApplicationWithArgs(LauncherImpl.java:464)\n\n    at javafx.graphics@20/com.sun.javafx.application.LauncherImpl.launchApplication(LauncherImpl.java:363)\n\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104)\n\n    at java.base/java.lang.reflect.Method.invoke(Method.java:578)\n\n    at java.base/sun.launcher.LauncherHelper$FXHelper.main(LauncherHelper.java:1081)\n\nCaused by: java.lang.RuntimeException: Exception in Application start method\n\n    at javafx.graphics@20/com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:893)\n\n    at javafx.graphics@20/com.sun.javafx.application.LauncherImpl.lambda$launchApplication$2(LauncherImpl.java:195)\n\n    at java.base/java.lang.Thread.run(Thread.java:1623)\n\nCaused by: javafx.fxml.LoadException: \n/C:/Users/PC/IdeaProjects/IA_real_2/target/classes/com/example/ia_real_2/main-db.fxml:7\n\n\n    at javafx.fxml@20/javafx.fxml.FXMLLoader.constructLoadException(FXMLLoader.java:2722)\n\n    at javafx.fxml@20/javafx.fxml.FXMLLoader$ValueElement.processAttribute(FXMLLoader.java:946)\n\n    at javafx.fxml@20/javafx.fxml.FXMLLoader$InstanceDeclarationElement.processAttribute(FXMLLoader.java:983)\n\n    at javafx.fxml@20/javafx.fxml.FXMLLoader$Element.processStartElement(FXMLLoader.java:230)\n\n    at javafx.fxml@20/javafx.fxml.FXMLLoader$ValueElement.processStartElement(FXMLLoader.java:757)\n\n    at javafx.fxml@20/javafx.fxml.FXMLLoader.processStartElement(FXMLLoader.java:2853)\n\n    at javafx.fxml@20/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2649)\n\n    at javafx.fxml@20/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2563)\n\n    at javafx.fxml@20/javafx.fxml.FXMLLoader.load(FXMLLoader.java:2531)\n\n    at com.example.ia_real/com.example.ia_real_2.HelloApplication.start(HelloApplication.java:45)\n\n    at javafx.graphics@20/com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$9(LauncherImpl.java:839)\n\n    at javafx.graphics@20/com.sun.javafx.application.PlatformImpl.lambda$runAndWait$12(PlatformImpl.java:483)\n\n    at javafx.graphics@20/com.sun.javafx.application.PlatformImpl.lambda$runLater$10(PlatformImpl.java:456)\n\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:400)\n\n    at javafx.graphics@20/com.sun.javafx.application.PlatformImpl.lambda$runLater$11(PlatformImpl.java:455)\n\n    at javafx.graphics@20/com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)\n\n    at javafx.graphics@20/com.sun.glass.ui.win.WinApplication._runLoop(Native Method)\n\n    at javafx.graphics@20/com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185)\n\n    ... 1 more\n\nCaused by: java.lang.NoSuchMethodException: com.example.ia_real_2.HelloController.&lt;init&gt;()\n\n    at java.base/java.lang.Class.getConstructor0(Class.java:3685)\n\n    at java.base/java.lang.Class.getDeclaredConstructor(Class.java:2854)\n\n    at javafx.fxml@20/javafx.fxml.FXMLLoader$ValueElement.processAttribute(FXMLLoader.java:941)\n    ... 17 more\n\nException running application com.example.ia_real_2.HelloApplication\n</code></pre>\n<p>I've tried to reformat the path of the fxml file to &quot;/com/example/ia_real_2.fxml&quot; but to no avail. I've also looked around the dependencies but nothing sus has came up either. I've looked at the project structure of a default JavaFX project and it seems to be identical - the only difference being that the default project runs while mine doesn't.</p>\n"},{"tags":["java","spring-boot","rest","exceptionhandler"],"answers":[{"tags":[],"owner":{"account_id":28338707,"reputation":21,"user_id":21684610,"display_name":"velmurugan A"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1694014103,"creation_date":1694014103,"answer_id":77053375,"question_id":77053156,"body_markdown":"Inorder to identify which default error method we need to override, `ResponseEntityExceptionHandler.java` base class and identify the method to override.\r\nHere `NoHandlerFoundException`and `handleNoHandlerFoundException()` need to be overridden.\r\nabove code properly overridden. please add `@EnableWebMvc` in the application.java or @configuration class to identify override methods.","title":"How to modify default spring boot not found url exception with custom message","body":"<p>Inorder to identify which default error method we need to override, <code>ResponseEntityExceptionHandler.java</code> base class and identify the method to override.\nHere <code>NoHandlerFoundException</code>and <code>handleNoHandlerFoundException()</code> need to be overridden.\nabove code properly overridden. please add <code>@EnableWebMvc</code> in the application.java or @configuration class to identify override methods.</p>\n"},{"tags":[],"owner":{"account_id":13796789,"reputation":13,"user_id":9957807,"display_name":"artem baltser"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694014639,"creation_date":1694014639,"answer_id":77053451,"question_id":77053156,"body_markdown":"You should put this line \r\n\r\n    spring.mvc.throw-exception-if-no-handler-found=true\r\n    \r\nto your application.properties and add `@EnableWebMvc` in your configuration bean","title":"How to modify default spring boot not found url exception with custom message","body":"<p>You should put this line</p>\n<pre><code>spring.mvc.throw-exception-if-no-handler-found=true\n</code></pre>\n<p>to your application.properties and add <code>@EnableWebMvc</code> in your configuration bean</p>\n"}],"owner":{"account_id":28338707,"reputation":21,"user_id":21684610,"display_name":"velmurugan A"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":174,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77053375,"answer_count":2,"score":1,"last_activity_date":1694014639,"creation_date":1694012507,"question_id":77053156,"body_markdown":"I&#39;m trying to modify the default error message and status code for all non supported rest end points.\r\n\r\nHow to do it ?\r\n\r\nMy Customer error message\r\n```\r\npublic class ApiErrorResponse {\r\n\r\n    private int code;\r\n    private String message;\r\n\r\n    public ApiErrorResponse(int code, String message) {\r\n        this.code = code;\r\n        this.message = message;\r\n    }\r\n\r\n    public String getMessage() {\r\n        return message;\r\n    }\r\n\r\n    public int getCode() {\r\n        return code;\r\n    }\r\n}\r\n```\r\n\r\nCustom error handling logic:\r\n\r\n```\r\n@ControllerAdvice\r\npublic class ApiExceptionHandler {\r\n\r\n    @ExceptionHandler({NoHandlerFoundException.class})\r\n    public ResponseEntity&lt;ApiErrorResponse&gt; handleNoHandlerFoundException(\r\n            NoHandlerFoundException ex, HttpServletRequest httpServletRequest) {\r\n        ApiErrorResponse apiErrorResponse = new ApiErrorResponse(404, &quot;Resource not found&quot;);\r\n        return ResponseEntity.status(HttpStatus.NOT_FOUND).contentType(MediaType.APPLICATION_JSON).body(apiErrorResponse);\r\n    }\r\n}\r\n```\r\n\r\nand now tried like curl --location &#39;localhost:8080/some/invalid/url&#39;\r\nBut it gives default 404 status code and error message. not custom message . What I&#39;m missing here ?","title":"How to modify default spring boot not found url exception with custom message","body":"<p>I'm trying to modify the default error message and status code for all non supported rest end points.</p>\n<p>How to do it ?</p>\n<p>My Customer error message</p>\n<pre><code>public class ApiErrorResponse {\n\n    private int code;\n    private String message;\n\n    public ApiErrorResponse(int code, String message) {\n        this.code = code;\n        this.message = message;\n    }\n\n    public String getMessage() {\n        return message;\n    }\n\n    public int getCode() {\n        return code;\n    }\n}\n</code></pre>\n<p>Custom error handling logic:</p>\n<pre><code>@ControllerAdvice\npublic class ApiExceptionHandler {\n\n    @ExceptionHandler({NoHandlerFoundException.class})\n    public ResponseEntity&lt;ApiErrorResponse&gt; handleNoHandlerFoundException(\n            NoHandlerFoundException ex, HttpServletRequest httpServletRequest) {\n        ApiErrorResponse apiErrorResponse = new ApiErrorResponse(404, &quot;Resource not found&quot;);\n        return ResponseEntity.status(HttpStatus.NOT_FOUND).contentType(MediaType.APPLICATION_JSON).body(apiErrorResponse);\n    }\n}\n</code></pre>\n<p>and now tried like curl --location 'localhost:8080/some/invalid/url'\nBut it gives default 404 status code and error message. not custom message . What I'm missing here ?</p>\n"},{"tags":["java","jpa","unique","multiple-columns"],"comments":[{"owner":{"display_name":"user6073886"},"score":1,"creation_date":1694010379,"post_id":77052752,"comment_id":135835375,"body_markdown":"Have you looked in your database if the unqiue constraint  uk_5cesgns8lwu884yww505jep8t got created the way you expected it to be?","body":"Have you looked in your database if the unqiue constraint  uk_5cesgns8lwu884yww505jep8t got created the way you expected it to be?"},{"owner":{"account_id":12427367,"reputation":101,"user_id":9051442,"display_name":"Gianm30"},"score":0,"creation_date":1694010380,"post_id":77052752,"comment_id":135835376,"body_markdown":"Hi dusk, I think the problem is the design. According to what you did. The values are unique but individually. So, if you want to make a unique key from multiple fields, you could create a composite key of those values.","body":"Hi dusk, I think the problem is the design. According to what you did. The values are unique but individually. So, if you want to make a unique key from multiple fields, you could create a composite key of those values."},{"owner":{"account_id":14116326,"reputation":13,"user_id":10198012,"display_name":"dusk"},"score":0,"creation_date":1694012018,"post_id":77052752,"comment_id":135835796,"body_markdown":"Hi, thanks for your answers ! \n@OHGODSPIDERS\nthe constraint uk_5cesgns8lwu884yww505jep8t is created, but only with science_id\n\nIt was the uk5fhot0c188tnjuw933pl27gch wich contains user_id, exploration_id and difficulty\n\nthanks a lot !","body":"Hi, thanks for your answers !  @OHGODSPIDERS the constraint uk_5cesgns8lwu884yww505jep8t is created, but only with science_id  It was the uk5fhot0c188tnjuw933pl27gch wich contains user_id, exploration_id and difficulty  thanks a lot !"},{"owner":{"account_id":14116326,"reputation":13,"user_id":10198012,"display_name":"dusk"},"score":0,"creation_date":1694012083,"post_id":77052752,"comment_id":135835817,"body_markdown":"@Gianm30 thanks !\nHm, ok, a composite key which contains the three values and which is unique, isn&#39;t it ?","body":"@Gianm30 thanks ! Hm, ok, a composite key which contains the three values and which is unique, isn&#39;t it ?"},{"owner":{"account_id":1107169,"reputation":6727,"user_id":1098361,"accept_rate":86,"display_name":"Zack Macomber"},"score":0,"creation_date":1694013907,"post_id":77052752,"comment_id":135836252,"body_markdown":"I think it&#39;s because of your `OneToOne` mappings. `OneToOne` means you can only have one `UserBasket` that relates to one `User` for instance.","body":"I think it&#39;s because of your <code>OneToOne</code> mappings. <code>OneToOne</code> means you can only have one <code>UserBasket</code> that relates to one <code>User</code> for instance."}],"answers":[{"comments":[{"owner":{"account_id":14116326,"reputation":13,"user_id":10198012,"display_name":"dusk"},"score":1,"creation_date":1694015177,"post_id":77053412,"comment_id":135836538,"body_markdown":"Thanks a lot for your answer ! It works perfectly !  \nHave a good day to everyone !","body":"Thanks a lot for your answer ! It works perfectly !   Have a good day to everyone !"}],"tags":[],"owner":{"account_id":1107169,"reputation":6727,"user_id":1098361,"accept_rate":86,"display_name":"Zack Macomber"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1694014399,"creation_date":1694014399,"answer_id":77053412,"question_id":77052752,"body_markdown":"I think it&#39;s because of your `OneToOne` mappings. If I change those to `@ManyToOne(fetch = FetchType.EAGER)` I&#39;m able to successfully insert two records with only `Difficulty` being different. If I try to do a third record with the same `Difficulty` I get the unique key constraint error. ","title":"Unique constraint on multiple columns with JPA annotation","body":"<p>I think it's because of your <code>OneToOne</code> mappings. If I change those to <code>@ManyToOne(fetch = FetchType.EAGER)</code> I'm able to successfully insert two records with only <code>Difficulty</code> being different. If I try to do a third record with the same <code>Difficulty</code> I get the unique key constraint error.</p>\n"}],"owner":{"account_id":14116326,"reputation":13,"user_id":10198012,"display_name":"dusk"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77053412,"answer_count":1,"score":0,"last_activity_date":1694014399,"creation_date":1694009638,"question_id":77052752,"body_markdown":"I have a problem when i add a unique constraint on multiple columns with JPA annotation.  \r\nI use PostgresSQL\r\n\r\nI&#39;d like to add unique constraint on 3 columns : &quot;user_id&quot;, &quot;science_id&quot; and &quot;difficulty&quot;\r\n\r\nIn other words : I can have \r\n\r\n0, 1, &quot;EASY&quot;  \r\n0, 1, &quot;HARD&quot; &lt;= because difficulty is different  \r\n0, 2, &quot;EASY&quot;  \r\n1, 2, &quot;EASY&quot;  \r\n\r\nBut not  \r\n0, 1, &quot;EASY&quot;  \r\n0, 1, &quot;EASY&quot; &lt;= Not unique  \r\n0, 2, &quot;EASY&quot;  \r\n1, 2, &quot;EASY&quot;  \r\n\r\n\r\nHere is my Entity :\r\n\r\n\r\n```\r\n@Data\r\n@Builder\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Entity\r\n@Table(name = &quot;user_basket&quot;,\r\n        uniqueConstraints = { @UniqueConstraint(\r\n                columnNames = { &quot;user_id&quot;, &quot;science_id&quot;, &quot;difficulty&quot; }) })\r\npublic class UserBasket {\r\n\r\n    @Id\r\n    @GeneratedValue\r\n    private Integer id;\r\n\r\n    @JsonIgnore\r\n    @OneToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;user_id&quot;)\r\n    private User user;\r\n\r\n    @JsonIgnore\r\n    @OneToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;science_id&quot;)\r\n    private Science science;\r\n\r\n    @Enumerated(EnumType.STRING)\r\n    private Difficulty difficulty;\r\n\r\n    @Column(nullable = false, updatable = false)\r\n    @CreationTimestamp\r\n    private Timestamp addToBasket;\r\n\r\n}\r\n```\r\n\r\nSo, i add with postman :\r\n\r\n\r\n```\r\n{\r\n    &quot;scienceId&quot;: 1,\r\n    &quot;difficulty&quot;: &quot;EASY&quot;\r\n}\r\n```\r\n\r\nAnd add an other but with an other difficulty :\r\n\r\n\r\n```\r\n{\r\n    &quot;scienceId&quot;: 1,\r\n    &quot;difficulty&quot;: &quot;HARD&quot;\r\n}\r\n```\r\n\r\nI got error when second is inserted :\r\n\r\n\r\n```\r\n2023-09-06T16:04:00,284 ERROR [http-nio-8080-exec-4] o.h.e.j.s.SqlExceptionHelper: ERREUR: la valeur d&#39;une cl&#233; dupliqu&#233;e rompt la contrainte unique &#171; uk_5cesgns8lwu884yww505jep8t &#187;\r\n  D&#233;tail&#160;: La cl&#233; &#171; (science_id)=(1) &#187; existe d&#233;j&#224;.\r\n2023-09-06T16:04:00,295 ERROR [http-nio-8080-exec-4] c.d.x.ExceptionHandler: could not execute statement [ERREUR: la valeur d&#39;une cl&#233; dupliqu&#233;e rompt la contrainte unique &#171; uk_5cesgns8lwu884yww505jep8t &#187;\r\n  D&#233;tail&#160;: La cl&#233; &#171; (science_id)=(1) &#187; existe d&#233;j&#224;.] [insert into user_basket (add_to_basket,difficulty,science_id,user_id,id) values (?,?,?,?,?)]\r\n2023-09-06T16:04:00,295 ERROR [http-nio-8080-exec-4] c.d.x.ExceptionHandler: org.springframework.dao.DataIntegrityViolationException: could not execute statement [ERREUR: la valeur d&#39;une cl&#233; dupliqu&#233;e rompt la contrainte unique &#171; uk_5cesgns8lwu884yww505jep8t &#187;\r\n  D&#233;tail&#160;: La cl&#233; &#171; (science_id)=(1) &#187; existe d&#233;j&#224;.] [insert into user_basket (add_to_basket,difficulty,science_id,user_id,id) values (?,?,?,?,?)]; SQL [insert into user_basket (add_to_basket,difficulty,science_id,user_id,id) values (?,?,?,?,?)]; constraint [null]\r\n\r\n```\r\n\r\nThanks a lot,\r\nBest regards","title":"Unique constraint on multiple columns with JPA annotation","body":"<p>I have a problem when i add a unique constraint on multiple columns with JPA annotation.<br />\nI use PostgresSQL</p>\n<p>I'd like to add unique constraint on 3 columns : &quot;user_id&quot;, &quot;science_id&quot; and &quot;difficulty&quot;</p>\n<p>In other words : I can have</p>\n<p>0, 1, &quot;EASY&quot;<br />\n0, 1, &quot;HARD&quot; &lt;= because difficulty is different<br />\n0, 2, &quot;EASY&quot;<br />\n1, 2, &quot;EASY&quot;</p>\n<p>But not<br />\n0, 1, &quot;EASY&quot;<br />\n0, 1, &quot;EASY&quot; &lt;= Not unique<br />\n0, 2, &quot;EASY&quot;<br />\n1, 2, &quot;EASY&quot;</p>\n<p>Here is my Entity :</p>\n<pre><code>@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\n@Entity\n@Table(name = &quot;user_basket&quot;,\n        uniqueConstraints = { @UniqueConstraint(\n                columnNames = { &quot;user_id&quot;, &quot;science_id&quot;, &quot;difficulty&quot; }) })\npublic class UserBasket {\n\n    @Id\n    @GeneratedValue\n    private Integer id;\n\n    @JsonIgnore\n    @OneToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;user_id&quot;)\n    private User user;\n\n    @JsonIgnore\n    @OneToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;science_id&quot;)\n    private Science science;\n\n    @Enumerated(EnumType.STRING)\n    private Difficulty difficulty;\n\n    @Column(nullable = false, updatable = false)\n    @CreationTimestamp\n    private Timestamp addToBasket;\n\n}\n</code></pre>\n<p>So, i add with postman :</p>\n<pre><code>{\n    &quot;scienceId&quot;: 1,\n    &quot;difficulty&quot;: &quot;EASY&quot;\n}\n</code></pre>\n<p>And add an other but with an other difficulty :</p>\n<pre><code>{\n    &quot;scienceId&quot;: 1,\n    &quot;difficulty&quot;: &quot;HARD&quot;\n}\n</code></pre>\n<p>I got error when second is inserted :</p>\n<pre><code>2023-09-06T16:04:00,284 ERROR [http-nio-8080-exec-4] o.h.e.j.s.SqlExceptionHelper: ERREUR: la valeur d'une clé dupliquée rompt la contrainte unique « uk_5cesgns8lwu884yww505jep8t »\n  Détail : La clé « (science_id)=(1) » existe déjà.\n2023-09-06T16:04:00,295 ERROR [http-nio-8080-exec-4] c.d.x.ExceptionHandler: could not execute statement [ERREUR: la valeur d'une clé dupliquée rompt la contrainte unique « uk_5cesgns8lwu884yww505jep8t »\n  Détail : La clé « (science_id)=(1) » existe déjà.] [insert into user_basket (add_to_basket,difficulty,science_id,user_id,id) values (?,?,?,?,?)]\n2023-09-06T16:04:00,295 ERROR [http-nio-8080-exec-4] c.d.x.ExceptionHandler: org.springframework.dao.DataIntegrityViolationException: could not execute statement [ERREUR: la valeur d'une clé dupliquée rompt la contrainte unique « uk_5cesgns8lwu884yww505jep8t »\n  Détail : La clé « (science_id)=(1) » existe déjà.] [insert into user_basket (add_to_basket,difficulty,science_id,user_id,id) values (?,?,?,?,?)]; SQL [insert into user_basket (add_to_basket,difficulty,science_id,user_id,id) values (?,?,?,?,?)]; constraint [null]\n\n</code></pre>\n<p>Thanks a lot,\nBest regards</p>\n"},{"tags":["java","apache-kafka","avro","confluent-schema-registry"],"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1693866094,"post_id":77040397,"comment_id":135813390,"body_markdown":"What do you mean &quot;Kafka side&quot;? The broker doesn&#39;t hold schemas... This isn&#39;t exactly a Kafka problem. Have you tried sending your schema directly to the registry api? Have you looked at the server logs? What version of the registry are you using?","body":"What do you mean &quot;Kafka side&quot;? The broker doesn&#39;t hold schemas... This isn&#39;t exactly a Kafka problem. Have you tried sending your schema directly to the registry api? Have you looked at the server logs? What version of the registry are you using?"},{"owner":{"account_id":10592234,"reputation":776,"user_id":7802372,"accept_rate":50,"display_name":"f.trajkovski"},"score":0,"creation_date":1693895187,"post_id":77040397,"comment_id":135815758,"body_markdown":"@OneCricketeer I don&#39;t get your part: kafka doesn&#39;t hold schemas. If I go to the kafka control center then I am able to see the kafka schema of type avro and being backward compatible. It&#39;s the one that I used and add it to my consumer. I&#39;ve been doing this many times.","body":"@OneCricketeer I don&#39;t get your part: kafka doesn&#39;t hold schemas. If I go to the kafka control center then I am able to see the kafka schema of type avro and being backward compatible. It&#39;s the one that I used and add it to my consumer. I&#39;ve been doing this many times."},{"owner":{"account_id":10592234,"reputation":776,"user_id":7802372,"accept_rate":50,"display_name":"f.trajkovski"},"score":0,"creation_date":1693895244,"post_id":77040397,"comment_id":135815767,"body_markdown":"@OneCricketeer as I understand my error appears since my producer had differences in the schema (maybe I am pronouncing wrong now) that the kafka is holding up.","body":"@OneCricketeer as I understand my error appears since my producer had differences in the schema (maybe I am pronouncing wrong now) that the kafka is holding up."},{"owner":{"account_id":10592234,"reputation":776,"user_id":7802372,"accept_rate":50,"display_name":"f.trajkovski"},"score":0,"creation_date":1693917481,"post_id":77040397,"comment_id":135820147,"body_markdown":"@OneCricketeer as I was suspecting the issue was the order of the values in my enum. I tried with the same order I was able to send kafka message, tried switching the position of one of the values and I got the error above mentioned","body":"@OneCricketeer as I was suspecting the issue was the order of the values in my enum. I tried with the same order I was able to send kafka message, tried switching the position of one of the values and I got the error above mentioned"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1694014037,"post_id":77040397,"comment_id":135836279,"body_markdown":"Control Center links to the Confluent Schema Registry. There are no schemas &quot;in Kafka / that topic&quot; , only an ID number... In any case, evolution rules are determine by the Avro spec, not the Registry or Kafka, that&#39;s why I said it&#39;s not a Kafka problem. The Schema Registry is failing the request before the producer data reaches the broker.","body":"Control Center links to the Confluent Schema Registry. There are no schemas &quot;in Kafka / that topic&quot; , only an ID number... In any case, evolution rules are determine by the Avro spec, not the Registry or Kafka, that&#39;s why I said it&#39;s not a Kafka problem. The Schema Registry is failing the request before the producer data reaches the broker."}],"answers":[{"comments":[{"owner":{"account_id":10592234,"reputation":776,"user_id":7802372,"accept_rate":50,"display_name":"f.trajkovski"},"score":0,"creation_date":1696447366,"post_id":77053388,"comment_id":136155710,"body_markdown":"Btw the answer from kafka guys: This is as designed. The schema text needs to match exactly. You can use use.latest.version=true on the producer to not have to send the exact schema.","body":"Btw the answer from kafka guys: This is as designed. The schema text needs to match exactly. You can use use.latest.version=true on the producer to not have to send the exact schema."},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1696521766,"post_id":77053388,"comment_id":136166876,"body_markdown":"I&#39;m not sure what you mean by &quot;kafka guys&quot; since Schema Registry isn&#39;t part of the Apache Kafka project","body":"I&#39;m not sure what you mean by &quot;kafka guys&quot; since Schema Registry isn&#39;t part of the Apache Kafka project"},{"owner":{"account_id":10592234,"reputation":776,"user_id":7802372,"accept_rate":50,"display_name":"f.trajkovski"},"score":0,"creation_date":1696535723,"post_id":77053388,"comment_id":136169491,"body_markdown":"These guys: https://github.com/confluentinc/schema-registry/issues","body":"These guys: <a href=\"https://github.com/confluentinc/schema-registry/issues\" rel=\"nofollow noreferrer\">github.com/confluentinc/schema-registry/issues</a>"}],"tags":[],"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694014191,"creation_date":1694014191,"answer_id":77053388,"question_id":77040397,"body_markdown":"If you change any part of the Avro schema itself, it&#39;ll create a new MD5 hash that the registry uses to do a lookup. This is related to [Avro fingerprinting](https://avro.apache.org/docs/1.11.1/specification/#schema-fingerprints). When that hash changes, it can no longer &quot;find that subject/schema&quot;. \r\n\r\nChanging the order of an enum is a backwards compatible change since the schema itself is compatible, but the implementation of the Registry won&#39;t accept that change. \r\n\r\nYou can report bugs at https://github.com/confluentinc/schema-registry/issues\r\n","title":"Can different order of values in enum between producer schema and kafka schema return 40403","body":"<p>If you change any part of the Avro schema itself, it'll create a new MD5 hash that the registry uses to do a lookup. This is related to <a href=\"https://avro.apache.org/docs/1.11.1/specification/#schema-fingerprints\" rel=\"nofollow noreferrer\">Avro fingerprinting</a>. When that hash changes, it can no longer &quot;find that subject/schema&quot;.</p>\n<p>Changing the order of an enum is a backwards compatible change since the schema itself is compatible, but the implementation of the Registry won't accept that change.</p>\n<p>You can report bugs at <a href=\"https://github.com/confluentinc/schema-registry/issues\" rel=\"nofollow noreferrer\">https://github.com/confluentinc/schema-registry/issues</a></p>\n"}],"owner":{"account_id":10592234,"reputation":776,"user_id":7802372,"accept_rate":50,"display_name":"f.trajkovski"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77053388,"answer_count":1,"score":0,"last_activity_date":1694014191,"creation_date":1693858659,"question_id":77040397,"body_markdown":"I am using kafka and spring boot application. I had some issues with the producer not being able to send messages to kafka, was getting \r\n\r\n`Caused by: io.confluent.kafka.schemaregistry.client.rest.exceptions.RestClientException: Schema not found; error code: 40403`\r\n\r\nAs I understand this is not that the schema is not there but I have some differences. The difference was that in the schema on the kafka I had one enum that had one value which was missing in the avro schema in the producer. Now I added that value in the enum but I am still getting the same error.\r\n\r\nOn the kafka side I have the following:\r\n\r\n`enum Test {\r\nA,\r\nB,\r\nC\r\n}`\r\n\r\nand on the producer side I have the following:\r\n\r\n`enum Test {\r\nA,\r\nC,\r\nB\r\n}`\r\n\r\nCan this be the issue in my scenario?","title":"Can different order of values in enum between producer schema and kafka schema return 40403","body":"<p>I am using kafka and spring boot application. I had some issues with the producer not being able to send messages to kafka, was getting</p>\n<p><code>Caused by: io.confluent.kafka.schemaregistry.client.rest.exceptions.RestClientException: Schema not found; error code: 40403</code></p>\n<p>As I understand this is not that the schema is not there but I have some differences. The difference was that in the schema on the kafka I had one enum that had one value which was missing in the avro schema in the producer. Now I added that value in the enum but I am still getting the same error.</p>\n<p>On the kafka side I have the following:</p>\n<p><code>enum Test { A, B, C }</code></p>\n<p>and on the producer side I have the following:</p>\n<p><code>enum Test { A, C, B }</code></p>\n<p>Can this be the issue in my scenario?</p>\n"},{"tags":["java","android","kotlin","android-studio","font-size"],"comments":[{"owner":{"account_id":27699053,"reputation":2348,"user_id":21144042,"display_name":"Diego Borba"},"score":0,"creation_date":1694011440,"post_id":77052969,"comment_id":135835652,"body_markdown":"Please, [do not upload images of code/data/error](https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors/285557#285557)","body":"Please, <a href=\"https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors/285557#285557\">do not upload images of code/data/error</a>"},{"owner":{"account_id":13358151,"reputation":123,"user_id":9641046,"display_name":"Markus"},"score":0,"creation_date":1694012639,"post_id":77052969,"comment_id":135835940,"body_markdown":"Possible duplicate: [How to change the input font size in TextField of Android Jetpack Compose](https://stackoverflow.com/q/72901072/9641046)","body":"Possible duplicate: <a href=\"https://stackoverflow.com/q/72901072/9641046\">How to change the input font size in TextField of Android Jetpack Compose</a>"}],"answers":[{"tags":[],"owner":{"account_id":29004116,"reputation":337,"user_id":22217083,"display_name":"Sarah"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1694014112,"creation_date":1694013595,"answer_id":77053302,"question_id":77052969,"body_markdown":"Just try this:\r\n\r\n    @Composable\r\n    fun GreetingText(\r\n        message: String,\r\n        from: String,\r\n        modifier: Modifier = Modifier,\r\n    ) {\r\n        Text(\r\n            text = message,\r\n            fontSize = 100.sp,\r\n        )\r\n        Text(\r\n            text = from,\r\n            fontSize = 36.sp\r\n        )\r\n    }\r\n\r\nI think you missed `,`. And `Text` does not have `textHeight` property, so please check what you need.\r\n\r\nGood luck!","title":"fontSize and textHeight don&#39;t work how do i fix this?","body":"<p>Just try this:</p>\n<pre><code>@Composable\nfun GreetingText(\n    message: String,\n    from: String,\n    modifier: Modifier = Modifier,\n) {\n    Text(\n        text = message,\n        fontSize = 100.sp,\n    )\n    Text(\n        text = from,\n        fontSize = 36.sp\n    )\n}\n</code></pre>\n<p>I think you missed <code>,</code>. And <code>Text</code> does not have <code>textHeight</code> property, so please check what you need.</p>\n<p>Good luck!</p>\n"}],"owner":{"account_id":29380122,"reputation":5,"user_id":22510820,"display_name":"Erkan &#214;zkan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77053302,"answer_count":1,"score":0,"last_activity_date":1694014112,"creation_date":1694011128,"question_id":77052969,"body_markdown":"[Screenshot of the issue][1] fontSize and TextHeight look red and say unresolved reference but it doesn&#39;t tell me which package I have to import to use them on android studio. I am a beginner so I don&#39;t know how to fix this problem without the help of sufficient descriptions. \r\n\r\nI was only able to check the syntax as I am a beginner and I don&#39;t know what to do in these situations. :P\r\n\r\n    @Composable\r\nfun GreetingText(message: String, from: String, modifier: Modifier = Modifier){\r\n    Text(\r\n        text = message\r\n        fontSize = 100.sp\r\n        textHeight = 116.sp\r\n    )\r\n    Text(\r\n        text = from\r\n        fontSize = 36.sp\r\n\r\n    )\r\n\r\n}\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/LnYFH.png","title":"fontSize and textHeight don&#39;t work how do i fix this?","body":"<p><a href=\"https://i.stack.imgur.com/LnYFH.png\" rel=\"nofollow noreferrer\">Screenshot of the issue</a> fontSize and TextHeight look red and say unresolved reference but it doesn't tell me which package I have to import to use them on android studio. I am a beginner so I don't know how to fix this problem without the help of sufficient descriptions.</p>\n<p>I was only able to check the syntax as I am a beginner and I don't know what to do in these situations. :P</p>\n<pre><code>@Composable\n</code></pre>\n<p>fun GreetingText(message: String, from: String, modifier: Modifier = Modifier){\nText(\ntext = message\nfontSize = 100.sp\ntextHeight = 116.sp\n)\nText(\ntext = from\nfontSize = 36.sp</p>\n<pre><code>)\n</code></pre>\n<p>}</p>\n"},{"tags":["java","spring","properties-file"],"answers":[{"comments":[{"owner":{"account_id":1131348,"reputation":1118,"user_id":1117347,"accept_rate":65,"display_name":"mevada.yogesh"},"score":4,"creation_date":1436516571,"post_id":31335245,"comment_id":50656267,"body_markdown":"Thanks for the answer. But this is something I know. I want to do it through some method in spring only.","body":"Thanks for the answer. But this is something I know. I want to do it through some method in spring only."},{"owner":{"account_id":4824832,"reputation":499,"user_id":3894536,"display_name":"Deh"},"score":0,"creation_date":1436517480,"post_id":31335245,"comment_id":50656739,"body_markdown":"@Yogesh is that what you mean by spring method?","body":"@Yogesh is that what you mean by spring method?"},{"owner":{"account_id":62234,"reputation":19819,"user_id":185034,"accept_rate":100,"display_name":"Paul"},"score":2,"creation_date":1438022260,"post_id":31335245,"comment_id":51266147,"body_markdown":"@Yogesh, the Javadoc for [DefaultPropertiesPersister](http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/util/DefaultPropertiesPersister.html) reads, &quot;As of JDK 1.6, Properties.load/store will also be used for readers/writers, effectively turning this class into a plain backwards compatibility adapter&quot;, so even Spring isn&#39;t using a Spring-only method...it uses the JDK method. You should accept Deh&#39;s answer.","body":"@Yogesh, the Javadoc for <a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/util/DefaultPropertiesPersister.html\" rel=\"nofollow noreferrer\">DefaultPropertiesPersister</a> reads, &quot;As of JDK 1.6, Properties.load/store will also be used for readers/writers, effectively turning this class into a plain backwards compatibility adapter&quot;, so even Spring isn&#39;t using a Spring-only method...it uses the JDK method. You should accept Deh&#39;s answer."},{"owner":{"account_id":1661844,"reputation":952,"user_id":1529983,"accept_rate":61,"display_name":"hirosht"},"score":2,"creation_date":1504507459,"post_id":31335245,"comment_id":79022942,"body_markdown":"Isnt there a SPRING endemic approach from an annotation, like using @value keyword for reading the parameters from the property file?","body":"Isnt there a SPRING endemic approach from an annotation, like using @value keyword for reading the parameters from the property file?"},{"owner":{"account_id":4547683,"reputation":3756,"user_id":3693726,"accept_rate":92,"display_name":"Deniss M."},"score":1,"creation_date":1518166239,"post_id":31335245,"comment_id":84402167,"body_markdown":"@hirosht I don&#39;t think there is. And this is a bummer as it seems you have to keep a separate file for manipulations with dynamic parameters.","body":"@hirosht I don&#39;t think there is. And this is a bummer as it seems you have to keep a separate file for manipulations with dynamic parameters."},{"owner":{"account_id":3541397,"reputation":373,"user_id":2958399,"accept_rate":75,"display_name":"Sip"},"score":0,"creation_date":1524039160,"post_id":31335245,"comment_id":86804324,"body_markdown":"shouldn&#39;t the app-properties.properties file be saved in resource directory?","body":"shouldn&#39;t the app-properties.properties file be saved in resource directory?"},{"owner":{"account_id":39584,"reputation":3154,"user_id":114265,"accept_rate":58,"display_name":"Brian S"},"score":1,"creation_date":1602872787,"post_id":31335245,"comment_id":113867534,"body_markdown":"Is there a way to know where the properties were read from and write back over that?\n\nAlso is there a way to write a class out, rather then specify props?","body":"Is there a way to know where the properties were read from and write back over that?  Also is there a way to write a class out, rather then specify props?"}],"tags":[],"owner":{"account_id":4824832,"reputation":499,"user_id":3894536,"display_name":"Deh"},"comment_count":7,"down_vote_count":0,"up_vote_count":22,"is_accepted":true,"score":22,"last_activity_date":1694014110,"creation_date":1436514435,"answer_id":31335245,"question_id":31334977,"body_markdown":"You can achieve that like this :\r\n\r\n    public void saveParamChanges() {\r\n       try {\r\n         // create and set properties into properties object\r\n         Properties props = new Properties();\r\n         props.setProperty(&quot;Prop1&quot;, &quot;toto&quot;);\r\n         props.setProperty(&quot;Prop2&quot;, &quot;test&quot;);\r\n         props.setProperty(&quot;Prop3&quot;, &quot;tata&quot;);\r\n         // get or create the file\r\n         File f = new File(&quot;app-properties.properties&quot;);\r\n         OutputStream out = new FileOutputStream( f );\r\n         // write into it\r\n         DefaultPropertiesPersister p = new DefaultPropertiesPersister();\r\n\t     p.store(props, out, &quot;Header Comment&quot;);\r\n       } catch (Exception e ) {\r\n        e.printStackTrace();\r\n       }\r\n    }\r\n\r\n[source][1]\r\n\r\n\r\n  [1]: http://docs.spring.io/spring-framework/docs/2.0.8/api/org/springframework/util/DefaultPropertiesPersister.html\r\n\r\n**EDIT : updated with the defaultPropertiesPersiter from org.springframework.Util**","title":"Write/Update properties file value in spring","body":"<p>You can achieve that like this :</p>\n<pre><code>public void saveParamChanges() {\n   try {\n     // create and set properties into properties object\n     Properties props = new Properties();\n     props.setProperty(&quot;Prop1&quot;, &quot;toto&quot;);\n     props.setProperty(&quot;Prop2&quot;, &quot;test&quot;);\n     props.setProperty(&quot;Prop3&quot;, &quot;tata&quot;);\n     // get or create the file\n     File f = new File(&quot;app-properties.properties&quot;);\n     OutputStream out = new FileOutputStream( f );\n     // write into it\n     DefaultPropertiesPersister p = new DefaultPropertiesPersister();\n     p.store(props, out, &quot;Header Comment&quot;);\n   } catch (Exception e ) {\n    e.printStackTrace();\n   }\n}\n</code></pre>\n<p><a href=\"http://docs.spring.io/spring-framework/docs/2.0.8/api/org/springframework/util/DefaultPropertiesPersister.html\" rel=\"nofollow noreferrer\">source</a></p>\n<p><strong>EDIT : updated with the defaultPropertiesPersiter from org.springframework.Util</strong></p>\n"},{"tags":[],"owner":{"account_id":87016,"reputation":68348,"user_id":241590,"accept_rate":99,"display_name":"stacker"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685607090,"creation_date":1685607090,"answer_id":76379892,"question_id":31334977,"body_markdown":"Extending the existing answer by @deh, read and write using spring-boot.\r\nNote it is not using the typical classpath: in @PropertySource.\r\nTo automate writing of more properties you could enumerate all fields with reflection.\r\n\r\n    @Data\r\n    @Configuration\r\n    @PropertySource(&quot;file:offset.properties&quot;)\r\n    public class Offset {\r\n    \r\n        @Value(&quot;${offset:0}&quot;)\r\n        private int offset;\r\n    \r\n        public void save(int newOffset) {\r\n            try {\r\n                Properties props = new Properties();\r\n                props.setProperty(&quot;offset&quot;, &quot;&quot; + newOffset);\r\n                File f = new File(&quot;offset.properties&quot;);\r\n                OutputStream out = new FileOutputStream( f );\r\n                DefaultPropertiesPersister p = new DefaultPropertiesPersister();\r\n                p.store(props, out, null);\r\n            } catch (Exception e ) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }","title":"Write/Update properties file value in spring","body":"<p>Extending the existing answer by @deh, read and write using spring-boot.\nNote it is not using the typical classpath: in @PropertySource.\nTo automate writing of more properties you could enumerate all fields with reflection.</p>\n<pre><code>@Data\n@Configuration\n@PropertySource(&quot;file:offset.properties&quot;)\npublic class Offset {\n\n    @Value(&quot;${offset:0}&quot;)\n    private int offset;\n\n    public void save(int newOffset) {\n        try {\n            Properties props = new Properties();\n            props.setProperty(&quot;offset&quot;, &quot;&quot; + newOffset);\n            File f = new File(&quot;offset.properties&quot;);\n            OutputStream out = new FileOutputStream( f );\n            DefaultPropertiesPersister p = new DefaultPropertiesPersister();\n            p.store(props, out, null);\n        } catch (Exception e ) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1131348,"reputation":1118,"user_id":1117347,"accept_rate":65,"display_name":"mevada.yogesh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21650,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":31335245,"answer_count":2,"score":16,"last_activity_date":1694014110,"creation_date":1436513405,"question_id":31334977,"body_markdown":"I have some requirement where I want to write/update the value in the properties file I am using the my spring application.\r\n\r\nI have googled it but I have not found a direct way of doing it using Spring.\r\n\r\nDoes any one aware of how to do it or is there any best way to do it.\r\n\r\nThanks in advance.","title":"Write/Update properties file value in spring","body":"<p>I have some requirement where I want to write/update the value in the properties file I am using the my spring application.</p>\n\n<p>I have googled it but I have not found a direct way of doing it using Spring.</p>\n\n<p>Does any one aware of how to do it or is there any best way to do it.</p>\n\n<p>Thanks in advance.</p>\n"},{"tags":["java","spring","spring-boot","spring-webflux","project-reactor"],"answers":[{"comments":[{"owner":{"account_id":4277579,"reputation":665,"user_id":3497844,"display_name":"Avinash Anand"},"score":0,"creation_date":1566292213,"post_id":57568031,"comment_id":101601058,"body_markdown":"the `doThisAsync()` method needs whole data, and then do the processing on it separately.","body":"the <code>doThisAsync()</code> method needs whole data, and then do the processing on it separately."},{"owner":{"display_name":"user11868214"},"score":0,"creation_date":1566294760,"post_id":57568031,"comment_id":101602533,"body_markdown":"I&#39;ve updated my example so that the doThisAsync() method now receives all the data in a list.","body":"I&#39;ve updated my example so that the doThisAsync() method now receives all the data in a list."},{"owner":{"account_id":4277579,"reputation":665,"user_id":3497844,"display_name":"Avinash Anand"},"score":0,"creation_date":1566296649,"post_id":57568031,"comment_id":101603564,"body_markdown":"It&#39;s not exactly what I was looking for, but it is close. Thanks a lot. :)","body":"It&#39;s not exactly what I was looking for, but it is close. Thanks a lot. :)"}],"tags":[],"owner":{"display_name":"user11868214"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1566295252,"creation_date":1566283604,"answer_id":57568031,"question_id":57566465,"body_markdown":"Have you considered running the processing in separate threads using publishOn like in the example below?\r\nThis may not be exactly what you are asking for but allows you to continue with other matters while the processing of the results in the flux is done by one or more threads, four in my example, from a dedicated scheduler (theFourThreadScheduler).\r\n\r\n```\r\n    @Test\r\n    public void processingInSeparateThreadTest() {\r\n        final Scheduler theFourThreadScheduler = Schedulers.newParallel(&quot;FourThreads&quot;, 4);\r\n        final Flux&lt;String&gt; theResultFlux = Flux.just(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;, &quot;four&quot;, &quot;five&quot;, &quot;six&quot;, &quot;seven&quot;, &quot;eight&quot;);\r\n\r\n        theResultFlux.log()\r\n            .collectList()\r\n            .publishOn(theFourThreadScheduler)\r\n            .subscribe(theStringList -&gt; {\r\n                doThisAsync(theStringList);\r\n            });\r\n\r\n        System.out.println(&quot;Subscribed to the result flux&quot;);\r\n\r\n        for (int i = 0; i &lt; 20; i++) {\r\n            System.out.println(&quot;Waiting for completion: &quot; + i);\r\n            try {\r\n                Thread.sleep(300);\r\n            } catch (final InterruptedException theException) {\r\n            }\r\n        }\r\n    }\r\n\r\n    private void doThisAsync(final List&lt;String&gt; inStringList) {\r\n        for (final String theString : inStringList) {\r\n            System.out.println(&quot;Processing in doThisAsync: &quot; + theString);\r\n            try {\r\n                Thread.sleep(500);\r\n            } catch (final InterruptedException theException) {\r\n            }\r\n        }\r\n    }\r\n```\r\n\r\nRunning the example produce the following output, showing that the processing performed in doThisAsync() is performed in the background.\r\n```\r\nSubscribed to the result flux\r\nWaiting for completion: 0\r\nProcessing in doThisAsync: one\r\nWaiting for completion: 1\r\nProcessing in doThisAsync: two\r\nWaiting for completion: 2\r\nWaiting for completion: 3\r\nProcessing in doThisAsync: three\r\nWaiting for completion: 4\r\nWaiting for completion: 5\r\nProcessing in doThisAsync: four\r\nWaiting for completion: 6\r\nProcessing in doThisAsync: five\r\nWaiting for completion: 7\r\nWaiting for completion: 8\r\nProcessing in doThisAsync: six\r\nWaiting for completion: 9\r\nProcessing in doThisAsync: seven\r\nWaiting for completion: 10\r\nWaiting for completion: 11\r\nProcessing in doThisAsync: eight\r\nWaiting for completion: 12\r\nWaiting for completion: 13\r\nWaiting for completion: 14\r\nWaiting for completion: 15\r\nWaiting for completion: 16\r\nWaiting for completion: 17\r\nWaiting for completion: 18\r\nWaiting for completion: 19\r\n```\r\n\r\nReferences:\r\n[Reactor 3 Reference: Schedulers][1]\r\n\r\n\r\n  [1]: https://projectreactor.io/docs/core/release/reference/#schedulers\r\n","title":"Fire and forget with reactor","body":"<p>Have you considered running the processing in separate threads using publishOn like in the example below?\nThis may not be exactly what you are asking for but allows you to continue with other matters while the processing of the results in the flux is done by one or more threads, four in my example, from a dedicated scheduler (theFourThreadScheduler).</p>\n\n<pre><code>    @Test\n    public void processingInSeparateThreadTest() {\n        final Scheduler theFourThreadScheduler = Schedulers.newParallel(\"FourThreads\", 4);\n        final Flux&lt;String&gt; theResultFlux = Flux.just(\"one\", \"two\", \"three\", \"four\", \"five\", \"six\", \"seven\", \"eight\");\n\n        theResultFlux.log()\n            .collectList()\n            .publishOn(theFourThreadScheduler)\n            .subscribe(theStringList -&gt; {\n                doThisAsync(theStringList);\n            });\n\n        System.out.println(\"Subscribed to the result flux\");\n\n        for (int i = 0; i &lt; 20; i++) {\n            System.out.println(\"Waiting for completion: \" + i);\n            try {\n                Thread.sleep(300);\n            } catch (final InterruptedException theException) {\n            }\n        }\n    }\n\n    private void doThisAsync(final List&lt;String&gt; inStringList) {\n        for (final String theString : inStringList) {\n            System.out.println(\"Processing in doThisAsync: \" + theString);\n            try {\n                Thread.sleep(500);\n            } catch (final InterruptedException theException) {\n            }\n        }\n    }\n</code></pre>\n\n<p>Running the example produce the following output, showing that the processing performed in doThisAsync() is performed in the background.</p>\n\n<pre><code>Subscribed to the result flux\nWaiting for completion: 0\nProcessing in doThisAsync: one\nWaiting for completion: 1\nProcessing in doThisAsync: two\nWaiting for completion: 2\nWaiting for completion: 3\nProcessing in doThisAsync: three\nWaiting for completion: 4\nWaiting for completion: 5\nProcessing in doThisAsync: four\nWaiting for completion: 6\nProcessing in doThisAsync: five\nWaiting for completion: 7\nWaiting for completion: 8\nProcessing in doThisAsync: six\nWaiting for completion: 9\nProcessing in doThisAsync: seven\nWaiting for completion: 10\nWaiting for completion: 11\nProcessing in doThisAsync: eight\nWaiting for completion: 12\nWaiting for completion: 13\nWaiting for completion: 14\nWaiting for completion: 15\nWaiting for completion: 16\nWaiting for completion: 17\nWaiting for completion: 18\nWaiting for completion: 19\n</code></pre>\n\n<p>References:\n<a href=\"https://projectreactor.io/docs/core/release/reference/#schedulers\" rel=\"nofollow noreferrer\">Reactor 3 Reference: Schedulers</a></p>\n"},{"comments":[{"owner":{"account_id":4277579,"reputation":665,"user_id":3497844,"display_name":"Avinash Anand"},"score":0,"creation_date":1566292022,"post_id":57569541,"comment_id":101600956,"body_markdown":"In approach 2, will the search method not wait until .doOnNext is executed completely?","body":"In approach 2, will the search method not wait until .doOnNext is executed completely?"},{"owner":{"account_id":8023174,"reputation":9194,"user_id":6051176,"display_name":"Martin Tarj&#225;nyi"},"score":0,"creation_date":1566293274,"post_id":57569541,"comment_id":101601658,"body_markdown":"No, it won&#39;t if it is really async.","body":"No, it won&#39;t if it is really async."},{"owner":{"account_id":4277579,"reputation":665,"user_id":3497844,"display_name":"Avinash Anand"},"score":0,"creation_date":1566294176,"post_id":57569541,"comment_id":101602169,"body_markdown":"sorry, I think I explained it wrong. The `doThisAsync()` is a normal method that runs some long db queries and some reporting services. All these are heavy call and blocking in nature. So, I want it to run separately and the `search` method should return its response.","body":"sorry, I think I explained it wrong. The <code>doThisAsync()</code> is a normal method that runs some long db queries and some reporting services. All these are heavy call and blocking in nature. So, I want it to run separately and the <code>search</code> method should return its response."},{"owner":{"account_id":8023174,"reputation":9194,"user_id":6051176,"display_name":"Martin Tarj&#225;nyi"},"score":0,"creation_date":1566294488,"post_id":57569541,"comment_id":101602372,"body_markdown":"But isn&#39;t it annotated with @Async as you described? If it is then you are fine with the above solution. Of course, you need to test it to make sure it works as expected.","body":"But isn&#39;t it annotated with @Async as you described? If it is then you are fine with the above solution. Of course, you need to test it to make sure it works as expected."},{"owner":{"account_id":4277579,"reputation":665,"user_id":3497844,"display_name":"Avinash Anand"},"score":0,"creation_date":1566294607,"post_id":57569541,"comment_id":101602441,"body_markdown":"That&#39;s what I was coming to. Instead of `@Async`, is there any method in Mono or flux that does this. Using `@Async` didn&#39;t felt correct here.","body":"That&#39;s what I was coming to. Instead of <code>@Async</code>, is there any method in Mono or flux that does this. Using <code>@Async</code> didn&#39;t felt correct here."},{"owner":{"account_id":8023174,"reputation":9194,"user_id":6051176,"display_name":"Martin Tarj&#225;nyi"},"score":1,"creation_date":1566294915,"post_id":57569541,"comment_id":101602629,"body_markdown":"I see, I&#39;ve added a third option to the answer. Please, check it. It moves the blocking code to a separate thread pool.","body":"I see, I&#39;ve added a third option to the answer. Please, check it. It moves the blocking code to a separate thread pool."},{"owner":{"account_id":8023174,"reputation":9194,"user_id":6051176,"display_name":"Martin Tarj&#225;nyi"},"score":0,"creation_date":1586937790,"post_id":57569541,"comment_id":108309189,"body_markdown":"After comments, I&#39;ve simplified and narrowed down the possible options.","body":"After comments, I&#39;ve simplified and narrowed down the possible options."},{"owner":{"account_id":360879,"reputation":2866,"user_id":703139,"accept_rate":58,"display_name":"tsar2512"},"score":0,"creation_date":1630777923,"post_id":57569541,"comment_id":122050945,"body_markdown":"@MartinTarj&#225;nyi doesn&#39;t `collectList()` convert the flux to a mono, and hence will wait for all the events to be completed. The flux which is returned is being created from this Mono. Doesn&#39;t that any subscriber on the response `Flux&lt;Data&gt;` will only get events when the mono is complete?","body":"@MartinTarj&#225;nyi doesn&#39;t <code>collectList()</code> convert the flux to a mono, and hence will wait for all the events to be completed. The flux which is returned is being created from this Mono. Doesn&#39;t that any subscriber on the response <code>Flux&lt;Data&gt;</code> will only get events when the mono is complete?"},{"owner":{"account_id":360879,"reputation":2866,"user_id":703139,"accept_rate":58,"display_name":"tsar2512"},"score":0,"creation_date":1630777937,"post_id":57569541,"comment_id":122050949,"body_markdown":"I would have thought something along the lines of `Flux&lt;Data&gt; result =  searchService.search(request); result.collectList().doOnNext(...); return result;` would work fine? Again this is a question rather than a suggestion, since I&#39;m a newbie in this as well. This solution basically doesn&#39;t change the result object at all for the async operation","body":"I would have thought something along the lines of <code>Flux&lt;Data&gt; result =  searchService.search(request); result.collectList().doOnNext(...); return result;</code> would work fine? Again this is a question rather than a suggestion, since I&#39;m a newbie in this as well. This solution basically doesn&#39;t change the result object at all for the async operation"},{"owner":{"account_id":8023174,"reputation":9194,"user_id":6051176,"display_name":"Martin Tarj&#225;nyi"},"score":0,"creation_date":1630829436,"post_id":57569541,"comment_id":122057975,"body_markdown":"@tsar2512 no, that wouldn&#39;t work as intended. 1. A subscribe is missing on the second line, side effect wouldn&#39;t be executed without it. 2. Even if subscribe is there, the search would be executed twice due to two subscriptions... An alternative could be to use cache operator on the first line which would prevent the double execution.","body":"@tsar2512 no, that wouldn&#39;t work as intended. 1. A subscribe is missing on the second line, side effect wouldn&#39;t be executed without it. 2. Even if subscribe is there, the search would be executed twice due to two subscriptions... An alternative could be to use cache operator on the first line which would prevent the double execution."},{"owner":{"account_id":360879,"reputation":2866,"user_id":703139,"accept_rate":58,"display_name":"tsar2512"},"score":0,"creation_date":1630900653,"post_id":57569541,"comment_id":122071707,"body_markdown":"@MartinTarj&#225;nyi - can you give an example of a cache operator? Also for (2), maybe I misunderstand, but isn&#39;t the publish-&gt;subscribe principle a push based one here? i.e. I can have multiple subscribers for a single producer, that shouldn&#39;t force it to execute twice on the producer? In this case search response is basically the producer right?","body":"@MartinTarj&#225;nyi - can you give an example of a cache operator? Also for (2), maybe I misunderstand, but isn&#39;t the publish-&gt;subscribe principle a push based one here? i.e. I can have multiple subscribers for a single producer, that shouldn&#39;t force it to execute twice on the producer? In this case search response is basically the producer right?"},{"owner":{"account_id":360879,"reputation":2866,"user_id":703139,"accept_rate":58,"display_name":"tsar2512"},"score":0,"creation_date":1630900871,"post_id":57569541,"comment_id":122071740,"body_markdown":"@MartinTarj&#225;nyi - here is a gist which shows what I am doing. What am I missing? https://gist.github.com/nipunarora/a9bd3a3867fea61a6b227144067e045c","body":"@MartinTarj&#225;nyi - here is a gist which shows what I am doing. What am I missing? <a href=\"https://gist.github.com/nipunarora/a9bd3a3867fea61a6b227144067e045c\" rel=\"nofollow noreferrer\">gist.github.com/nipunarora/a9bd3a3867fea61a6b227144067e045c</a>"},{"owner":{"account_id":20782759,"reputation":235,"user_id":15262752,"display_name":"Grogu"},"score":0,"creation_date":1698165587,"post_id":57569541,"comment_id":136369570,"body_markdown":"@Martin Tarj&#225;nyi What do you mean by &quot;blocking I/O&quot;?","body":"@Martin Tarj&#225;nyi What do you mean by &quot;blocking I/O&quot;?"},{"owner":{"account_id":20782759,"reputation":235,"user_id":15262752,"display_name":"Grogu"},"score":0,"creation_date":1698165856,"post_id":57569541,"comment_id":136369613,"body_markdown":"@Martin Tarj&#225;nyi Also What do you think about intellij warning &quot;Calling &#39;subscribe&#39; in non-blocking context is not recommended&quot; in the first case, and correcting it adding a .publishOn(Schedulers.boundedElastic()) just before the .doOnNext. Is it useless?","body":"@Martin Tarj&#225;nyi Also What do you think about intellij warning &quot;Calling &#39;subscribe&#39; in non-blocking context is not recommended&quot; in the first case, and correcting it adding a .publishOn(Schedulers.boundedElastic()) just before the .doOnNext. Is it useless?"},{"owner":{"account_id":20782759,"reputation":235,"user_id":15262752,"display_name":"Grogu"},"score":0,"creation_date":1698166126,"post_id":57569541,"comment_id":136369660,"body_markdown":"@Martin Tarj&#225;nyi and also why using `Schedulers.elastic()` vs `Schedulers.boundedElastic()`? The reactor doc says `An unbounded elastic thread pool (Schedulers.elastic()). This one is no longer preferred with the introduction of Schedulers.boundedElastic(), as it has a tendency to hide backpressure problems and lead to too many threads` https://projectreactor.io/docs/core/release/reference/#schedulers","body":"@Martin Tarj&#225;nyi and also why using <code>Schedulers.elastic()</code> vs <code>Schedulers.boundedElastic()</code>? The reactor doc says <code>An unbounded elastic thread pool (Schedulers.elastic()). This one is no longer preferred with the introduction of Schedulers.boundedElastic(), as it has a tendency to hide backpressure problems and lead to too many threads</code> <a href=\"https://projectreactor.io/docs/core/release/reference/#schedulers\" rel=\"nofollow noreferrer\">projectreactor.io/docs/core/release/reference/#schedulers</a>"}],"tags":[],"owner":{"account_id":8023174,"reputation":9194,"user_id":6051176,"display_name":"Martin Tarj&#225;nyi"},"comment_count":15,"down_vote_count":0,"up_vote_count":28,"is_accepted":true,"score":28,"last_activity_date":1586937750,"creation_date":1566289593,"answer_id":57569541,"question_id":57566465,"body_markdown":"1, If your *fire-and-forget* is already async returning `Mono`/`Flux`\r\n------------------------------------------------------------------------\r\n\r\n```java\r\npublic Flux&lt;Data&gt; search(SearchRequest request)\r\n{\r\n    return searchService.search(request)\r\n                        .collectList()\r\n                        .doOnNext(data -&gt; doThisAsync(data).subscribe())  // add error logging here or inside doThisAsync\r\n                        .flatMapMany(Flux::fromIterable);\r\n}\r\n\r\npublic Mono&lt;Void&gt; doThisAsync(List&lt;Data&gt; data) {\r\n    //do some async/non-blocking processing here like calling WebClient\r\n}\r\n```\r\n\r\n2, If your *fire-and-forget* does blocking I/O\r\n------------------------------------------------------------------------\r\n\r\n```java\r\npublic Flux&lt;Data&gt; search(SearchRequest request)\r\n{\r\n    return searchService.search(request)\r\n                        .collectList()\r\n                        .doOnNext(data -&gt; Mono.fromRunnable(() -&gt; doThisAsync(data))\r\n                                              .subscribeOn(Schedulers.elastic())  // delegate to proper thread to not block main flow\r\n                                              .subscribe())  // add error logging here or inside doThisAsync\r\n                        .flatMapMany(Flux::fromIterable);\r\n}\r\n\r\npublic void doThisAsync(List&lt;Data&gt; data) {\r\n    //do some blocking I/O on calling thread\r\n}\r\n```\r\n\r\nNote that in both of the above cases you lose backpressure support. If the `doAsyncThis` slows down for some reason, then the data producer won&#39;t care and keep producing items. This is a natural consequence of the fire-and-foget mechanism.\r\n\r\n\r\n  [1]: https://projectreactor.io/docs/core/release/reference/#advanced-broadcast-multiple-subscribers-connectableflux","title":"Fire and forget with reactor","body":"<h2>1, If your <em>fire-and-forget</em> is already async returning <code>Mono</code>/<code>Flux</code></h2>\n\n<pre class=\"lang-java prettyprint-override\"><code>public Flux&lt;Data&gt; search(SearchRequest request)\n{\n    return searchService.search(request)\n                        .collectList()\n                        .doOnNext(data -&gt; doThisAsync(data).subscribe())  // add error logging here or inside doThisAsync\n                        .flatMapMany(Flux::fromIterable);\n}\n\npublic Mono&lt;Void&gt; doThisAsync(List&lt;Data&gt; data) {\n    //do some async/non-blocking processing here like calling WebClient\n}\n</code></pre>\n\n<h2>2, If your <em>fire-and-forget</em> does blocking I/O</h2>\n\n<pre class=\"lang-java prettyprint-override\"><code>public Flux&lt;Data&gt; search(SearchRequest request)\n{\n    return searchService.search(request)\n                        .collectList()\n                        .doOnNext(data -&gt; Mono.fromRunnable(() -&gt; doThisAsync(data))\n                                              .subscribeOn(Schedulers.elastic())  // delegate to proper thread to not block main flow\n                                              .subscribe())  // add error logging here or inside doThisAsync\n                        .flatMapMany(Flux::fromIterable);\n}\n\npublic void doThisAsync(List&lt;Data&gt; data) {\n    //do some blocking I/O on calling thread\n}\n</code></pre>\n\n<p>Note that in both of the above cases you lose backpressure support. If the <code>doAsyncThis</code> slows down for some reason, then the data producer won't care and keep producing items. This is a natural consequence of the fire-and-foget mechanism.</p>\n"},{"comments":[{"owner":{"account_id":20782759,"reputation":235,"user_id":15262752,"display_name":"Grogu"},"score":0,"creation_date":1698166598,"post_id":75301517,"comment_id":136369742,"body_markdown":"for pple, as me, wondering what CPU Bound and IO bound are: https://stackoverflow.com/a/868577/15262752","body":"for pple, as me, wondering what CPU Bound and IO bound are: <a href=\"https://stackoverflow.com/a/868577/15262752\">stackoverflow.com/a/868577/15262752</a>"},{"owner":{"account_id":20782759,"reputation":235,"user_id":15262752,"display_name":"Grogu"},"score":0,"creation_date":1698167239,"post_id":75301517,"comment_id":136369851,"body_markdown":"When doing `.doOnNext(data -&gt; fireAndForgetOperation(data).subscribe())`, intellij puts a warning and tries to  fix that with `.publishOn(Schedulers.boundedElastic()).doOnNext(data -&gt; fireAndForgetOperation(data).subscribe())`. What is the difference with your first solution?","body":"When doing <code>.doOnNext(data -&gt; fireAndForgetOperation(data).subscribe())</code>, intellij puts a warning and tries to  fix that with <code>.publishOn(Schedulers.boundedElastic()).doOnNext(data -&gt; fireAndForgetOperation(data).subscribe())</code>. What is the difference with your first solution?"}],"tags":[],"owner":{"account_id":19395247,"reputation":3208,"user_id":14183092,"display_name":"kerbermeister"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1675192415,"creation_date":1675189217,"answer_id":75301517,"question_id":57566465,"body_markdown":"## UPDATE 2023/01/31\r\n\r\nActually you anyway should use [.subscribeOn()][1] because even if you call your *fire-and-forget* function which returns `Mono&lt;Void&gt;` **it is not guaranteed that within that reactive chain will be switching of executing thread or it will happen immediately** (depends on the code inside that *fire-and-forget* function, more specificaly, operators that used on the chain).\r\n\r\nSo you may run into situation when your *fire-and-forget* function will be executed on the same thread that called this function, so your method will not return until this function is completed.\r\n\r\nThe case when *fire-and-forget* function returns `Publisher&lt;Void&gt;`:\r\n\r\n    public Flux&lt;Data&gt; search(SearchRequest request) {\r\n        return searchService.search(request)\r\n                .collectList()\r\n                .doOnNext(data -&gt;\r\n                        // anyway call subscribeOn(...)\r\n                        fireAndForgetOperation(data)\r\n                                .subscribeOn(...)\r\n                                .subscribe()\r\n                )\r\n                .flatMapMany(Flux::fromIterable);\r\n    }\r\n\r\n    public Mono&lt;Void&gt; fireAndForgetOperation(List&lt;String&gt; list) {\r\n        ...\r\n    }\r\n\r\nThe case when *fire-and-forget* function is just a common `void` returning method:\r\n\r\n    public Flux&lt;Data&gt; search(SearchRequest request) {\r\n        return searchService.search(request)\r\n                .collectList()\r\n                .doOnNext(data -&gt;\r\n                        Mono.fromRunnable(() -&gt; fireAndForgetOperation(data))\r\n                                .subscribeOn(...)\r\n                                .subscribe()\r\n                )\r\n                .flatMapMany(Flux::fromIterable);\r\n    }\r\n\r\n    public void fireAndForgetOperation(List&lt;String&gt; list) {\r\n        ...\r\n    }\r\n\r\n\r\nAlso you should consider what `Scheduler` you need to provide, depending on the nature of your *fire-and-forget* function.\r\n\r\nBasically there are two scenarios:\r\n\r\n**1)** If your *fire-and-forget* function does **CPU-Bound** work.\r\nThen you want to specify `Schedulers.parallel()` inside `subsribeOn()`\r\n\r\n**2)** If your *fire-and-forget* function does **IO** work (actually no matter in this case if it would be blocking or non-blocking IO).\r\nThen you want to specify `Schedulers.boundedElastic()` inside `subsribeOn()`\r\n\r\n\r\nSo, using this approach you will truly return immediately after firing your *fire-and-forget* function\r\n\r\n\r\n  [1]: https://projectreactor.io/docs/core/release/reference/#schedulers","title":"Fire and forget with reactor","body":"<h2>UPDATE 2023/01/31</h2>\n<p>Actually you anyway should use <a href=\"https://projectreactor.io/docs/core/release/reference/#schedulers\" rel=\"nofollow noreferrer\">.subscribeOn()</a> because even if you call your <em>fire-and-forget</em> function which returns <code>Mono&lt;Void&gt;</code> <strong>it is not guaranteed that within that reactive chain will be switching of executing thread or it will happen immediately</strong> (depends on the code inside that <em>fire-and-forget</em> function, more specificaly, operators that used on the chain).</p>\n<p>So you may run into situation when your <em>fire-and-forget</em> function will be executed on the same thread that called this function, so your method will not return until this function is completed.</p>\n<p>The case when <em>fire-and-forget</em> function returns <code>Publisher&lt;Void&gt;</code>:</p>\n<pre><code>public Flux&lt;Data&gt; search(SearchRequest request) {\n    return searchService.search(request)\n            .collectList()\n            .doOnNext(data -&gt;\n                    // anyway call subscribeOn(...)\n                    fireAndForgetOperation(data)\n                            .subscribeOn(...)\n                            .subscribe()\n            )\n            .flatMapMany(Flux::fromIterable);\n}\n\npublic Mono&lt;Void&gt; fireAndForgetOperation(List&lt;String&gt; list) {\n    ...\n}\n</code></pre>\n<p>The case when <em>fire-and-forget</em> function is just a common <code>void</code> returning method:</p>\n<pre><code>public Flux&lt;Data&gt; search(SearchRequest request) {\n    return searchService.search(request)\n            .collectList()\n            .doOnNext(data -&gt;\n                    Mono.fromRunnable(() -&gt; fireAndForgetOperation(data))\n                            .subscribeOn(...)\n                            .subscribe()\n            )\n            .flatMapMany(Flux::fromIterable);\n}\n\npublic void fireAndForgetOperation(List&lt;String&gt; list) {\n    ...\n}\n</code></pre>\n<p>Also you should consider what <code>Scheduler</code> you need to provide, depending on the nature of your <em>fire-and-forget</em> function.</p>\n<p>Basically there are two scenarios:</p>\n<p><strong>1)</strong> If your <em>fire-and-forget</em> function does <strong>CPU-Bound</strong> work.\nThen you want to specify <code>Schedulers.parallel()</code> inside <code>subsribeOn()</code></p>\n<p><strong>2)</strong> If your <em>fire-and-forget</em> function does <strong>IO</strong> work (actually no matter in this case if it would be blocking or non-blocking IO).\nThen you want to specify <code>Schedulers.boundedElastic()</code> inside <code>subsribeOn()</code></p>\n<p>So, using this approach you will truly return immediately after firing your <em>fire-and-forget</em> function</p>\n"}],"owner":{"account_id":4277579,"reputation":665,"user_id":3497844,"display_name":"Avinash Anand"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13444,"favorite_count":0,"down_vote_count":0,"up_vote_count":17,"accepted_answer_id":57569541,"answer_count":3,"score":17,"last_activity_date":1694014032,"creation_date":1566272891,"question_id":57566465,"body_markdown":"I have a method like below in my Spring boot app.\r\n```java\r\npublic Flux&lt;Data&gt; search(SearchRequest request) {\r\n  Flux&lt;Data&gt; result = searchService.search(request);//this returns Flux&lt;Data&gt;\r\n  Mono&lt;List&lt;Data&gt;&gt; listOfData = result.collectList();\r\n//  doThisAsync() // here I want to pass this list and run some processing on it\r\n// the processing should happen async and the search method should return immediately.\r\n  return result;\r\n}\r\n\r\n//this method uses the complete List&lt;Data&gt; returned by above method\r\npublic void doThisAsync(List&lt;Data&gt; data) {\r\n  //do some processing here\r\n}\r\n\r\n```\r\n\r\nCurrently, I&#39;m using `@Async` annotated service class with `doThisAsync`, but don&#39;t know how to pass the `List&lt;Data&gt;`, because I don&#39;t want to call `block`.\r\nAll I have is `Mono&lt;List&lt;Data&gt;&gt;`.\r\n\r\nMy main problem is how to process this Mono separately and the `search` method should return the `Flux&lt;Data&gt;`.","title":"Fire and forget with reactor","body":"<p>I have a method like below in my Spring boot app.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public Flux&lt;Data&gt; search(SearchRequest request) {\n  Flux&lt;Data&gt; result = searchService.search(request);//this returns Flux&lt;Data&gt;\n  Mono&lt;List&lt;Data&gt;&gt; listOfData = result.collectList();\n//  doThisAsync() // here I want to pass this list and run some processing on it\n// the processing should happen async and the search method should return immediately.\n  return result;\n}\n\n//this method uses the complete List&lt;Data&gt; returned by above method\npublic void doThisAsync(List&lt;Data&gt; data) {\n  //do some processing here\n}\n\n</code></pre>\n\n<p>Currently, I'm using <code>@Async</code> annotated service class with <code>doThisAsync</code>, but don't know how to pass the <code>List&lt;Data&gt;</code>, because I don't want to call <code>block</code>.\nAll I have is <code>Mono&lt;List&lt;Data&gt;&gt;</code>.</p>\n\n<p>My main problem is how to process this Mono separately and the <code>search</code> method should return the <code>Flux&lt;Data&gt;</code>.</p>\n"},{"tags":["java","android","react-native","kotlin","grpc"],"comments":[{"owner":{"account_id":5967476,"reputation":24635,"user_id":4690866,"display_name":"Eric Anderson"},"score":0,"creation_date":1694016781,"post_id":77053343,"comment_id":135836867,"body_markdown":"There should have been a &quot;Caused by&quot; exception with potentially more info. Most likely the key is not of a supported type. If you have the openssl command, `openssl pkey -text_pub -noout -in YOUR.KEY` might help answer which key type it is (the longer blobs of data aren&#39;t likely important).","body":"There should have been a &quot;Caused by&quot; exception with potentially more info. Most likely the key is not of a supported type. If you have the openssl command, <code>openssl pkey -text_pub -noout -in YOUR.KEY</code> might help answer which key type it is (the longer blobs of data aren&#39;t likely important)."},{"owner":{"account_id":2600873,"reputation":7574,"user_id":2253323,"accept_rate":82,"display_name":"Nikk"},"score":0,"creation_date":1694016929,"post_id":77053343,"comment_id":135836907,"body_markdown":"@EricAnderson you mean this `ASN1 OID: prime256v1` `NIST CURVE: P-256`? Do not have Caused by...","body":"@EricAnderson you mean this <code>ASN1 OID: prime256v1</code> <code>NIST CURVE: P-256</code>? Do not have Caused by..."},{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1694020643,"post_id":77053343,"comment_id":135837634,"body_markdown":"Usually Java software expects certificates as part of a `java.security.KeyStore`. You can create a Java KeyStore instance at run-time and insert the loaded certificate into it.","body":"Usually Java software expects certificates as part of a <code>java.security.KeyStore</code>. You can create a Java KeyStore instance at run-time and insert the loaded certificate into it."},{"owner":{"account_id":5967476,"reputation":24635,"user_id":4690866,"display_name":"Eric Anderson"},"score":0,"creation_date":1694040460,"post_id":77053343,"comment_id":135840634,"body_markdown":"I can create such a key with `openssl genpkey -algorithm EC -out out.pem -pkeyopt ec_paramgen_curve:P-256 -pkeyopt ec_param_enc:named_curve`. On Java 8 and OkHttp, that works fine. I think this is Android-specific. Are you using the Dynamic Security Provider or Conscrypt? https://github.com/grpc/grpc-java/blob/master/SECURITY.md#tls-on-android","body":"I can create such a key with <code>openssl genpkey -algorithm EC -out out.pem -pkeyopt ec_paramgen_curve:P-256 -pkeyopt ec_param_enc:named_curve</code>. On Java 8 and OkHttp, that works fine. I think this is Android-specific. Are you using the Dynamic Security Provider or Conscrypt? <a href=\"https://github.com/grpc/grpc-java/blob/master/SECURITY.md#tls-on-android\" rel=\"nofollow noreferrer\">github.com/grpc/grpc-java/blob/master/&hellip;</a>"},{"owner":{"account_id":2600873,"reputation":7574,"user_id":2253323,"accept_rate":82,"display_name":"Nikk"},"score":0,"creation_date":1694164687,"post_id":77053343,"comment_id":135858366,"body_markdown":"@EricAnderson I&#39;ve tried `Security.insertProviderAt(Conscrypt.newProvider(), 1);`, still getting the same error. It&#39;s just that I&#39;m reading the certificate data through react native and passing it as a string to the kotlin backend so that I can establish a grpc connection. However I cannot seem to get the certificate to be read.","body":"@EricAnderson I&#39;ve tried <code>Security.insertProviderAt(Conscrypt.newProvider(), 1);</code>, still getting the same error. It&#39;s just that I&#39;m reading the certificate data through react native and passing it as a string to the kotlin backend so that I can establish a grpc connection. However I cannot seem to get the certificate to be read."}],"owner":{"account_id":2600873,"reputation":7574,"user_id":2253323,"accept_rate":82,"display_name":"Nikk"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694013849,"creation_date":1694013849,"question_id":77053343,"body_markdown":"The error I get:\r\n\r\n    io.grpc.ManagedChannelRegistry$ProviderNotFoundException: io.grpc.okhttp.OkHttpChannelProvider: Unable to load private key: Neither RSA nor EC worked\r\n\r\nI am trying to load pass the certificate as a string instead of reading a file, because it is dynamic. In order to establish a gRPC connection.\r\n\r\n\r\n    class GrpcModule(\r\n            private val certificateRoot: String,\r\n            private val certificateStr: String,\r\n            private val privateKeyStr: String,\r\n    ) {\r\n        val channel: ManagedChannel by lazy {\r\n    \r\n            val pk: InputStream = privateKeyStr.byteInputStream()\r\n            val cu: InputStream = certificateStr.byteInputStream()\r\n            val cr: InputStream = certificateRoot.byteInputStream()\r\n    \r\n            val credentials =\r\n                    TlsChannelCredentials.newBuilder()\r\n                            .keyManager(\r\n                                pk,\r\n                                cu\r\n                            )\r\n                            .trustManager(cr)\r\n                            .build()\r\n    \r\n            Grpc.newChannelBuilder(&quot;localhost:50001&quot;, credentials)\r\n                    .executor(Dispatchers.IO.asExecutor())\r\n                    .build()\r\n        }\r\n        private val stub = ReceivingGrpcKt.ReceivingCoroutineStub(channel)\r\n    \r\n        suspend fun checkId(id: String) =\r\n                try {\r\n                    val request = checkRequest { this.id = id }\r\n                    val response = stub.check(request)\r\n                    Log.d(&quot;Grpc&quot;, &quot;Success --- $response&quot;)\r\n                } catch (e: Exception) {\r\n                    Log.d(&quot;Grpc&quot;, &quot;Error --- $e&quot;)\r\n                }\r\n    \r\n        fun close() {\r\n            channel.shutdownNow()\r\n        }\r\n    }\r\n\r\nAnd I&#39;ll be calling it from a ReactNative module, like so:\r\n\r\n    class Grpc(reactContext: ReactApplicationContext) : ReactContextBaseJavaModule(reactContext) {\r\n    \r\n        override fun getName() = &quot;Grpc&quot;\r\n    \r\n        @ReactMethod\r\n        fun test() {\r\n    \r\n            var g =\r\n                    GrpcModule(\r\n                    &quot;&quot;&quot;\r\n                         -----BEGIN CERTIFICATE-----\r\n                         -----END CERTIFICATE-----\r\n                    &quot;&quot;&quot;.trimIndent(),\r\n                        &quot;&quot;&quot;\r\n                        -----BEGIN CERTIFICATE-----\r\n                        -----END CERTIFICATE-----\r\n                    &quot;&quot;&quot;.trimIndent(),\r\n                        &quot;&quot;&quot;\r\n                        -----BEGIN PRIVATE KEY-----\r\n                        -----END PRIVATE KEY-----\r\n                    &quot;&quot;&quot;.trimIndent(),\r\n                    )\r\n    \r\n            Log.d(&quot;Grpc&quot;, &quot;--- $g&quot;)\r\n    \r\n            runBlocking {\r\n                g.checkId(&quot;222&quot;)\r\n            }\r\n    \r\n            g.close()\r\n        }\r\n    }\r\n\r\nWhat am I doing wrong here and how can I fix this?\r\n\r\nIs this even the right way to go about it?","title":"Issues loading TLS from a string instead of a file","body":"<p>The error I get:</p>\n<pre><code>io.grpc.ManagedChannelRegistry$ProviderNotFoundException: io.grpc.okhttp.OkHttpChannelProvider: Unable to load private key: Neither RSA nor EC worked\n</code></pre>\n<p>I am trying to load pass the certificate as a string instead of reading a file, because it is dynamic. In order to establish a gRPC connection.</p>\n<pre><code>class GrpcModule(\n        private val certificateRoot: String,\n        private val certificateStr: String,\n        private val privateKeyStr: String,\n) {\n    val channel: ManagedChannel by lazy {\n\n        val pk: InputStream = privateKeyStr.byteInputStream()\n        val cu: InputStream = certificateStr.byteInputStream()\n        val cr: InputStream = certificateRoot.byteInputStream()\n\n        val credentials =\n                TlsChannelCredentials.newBuilder()\n                        .keyManager(\n                            pk,\n                            cu\n                        )\n                        .trustManager(cr)\n                        .build()\n\n        Grpc.newChannelBuilder(&quot;localhost:50001&quot;, credentials)\n                .executor(Dispatchers.IO.asExecutor())\n                .build()\n    }\n    private val stub = ReceivingGrpcKt.ReceivingCoroutineStub(channel)\n\n    suspend fun checkId(id: String) =\n            try {\n                val request = checkRequest { this.id = id }\n                val response = stub.check(request)\n                Log.d(&quot;Grpc&quot;, &quot;Success --- $response&quot;)\n            } catch (e: Exception) {\n                Log.d(&quot;Grpc&quot;, &quot;Error --- $e&quot;)\n            }\n\n    fun close() {\n        channel.shutdownNow()\n    }\n}\n</code></pre>\n<p>And I'll be calling it from a ReactNative module, like so:</p>\n<pre><code>class Grpc(reactContext: ReactApplicationContext) : ReactContextBaseJavaModule(reactContext) {\n\n    override fun getName() = &quot;Grpc&quot;\n\n    @ReactMethod\n    fun test() {\n\n        var g =\n                GrpcModule(\n                &quot;&quot;&quot;\n                     -----BEGIN CERTIFICATE-----\n                     -----END CERTIFICATE-----\n                &quot;&quot;&quot;.trimIndent(),\n                    &quot;&quot;&quot;\n                    -----BEGIN CERTIFICATE-----\n                    -----END CERTIFICATE-----\n                &quot;&quot;&quot;.trimIndent(),\n                    &quot;&quot;&quot;\n                    -----BEGIN PRIVATE KEY-----\n                    -----END PRIVATE KEY-----\n                &quot;&quot;&quot;.trimIndent(),\n                )\n\n        Log.d(&quot;Grpc&quot;, &quot;--- $g&quot;)\n\n        runBlocking {\n            g.checkId(&quot;222&quot;)\n        }\n\n        g.close()\n    }\n}\n</code></pre>\n<p>What am I doing wrong here and how can I fix this?</p>\n<p>Is this even the right way to go about it?</p>\n"},{"tags":["java","spring-boot","flyway"],"comments":[{"owner":{"account_id":2871379,"reputation":2214,"user_id":2464657,"accept_rate":100,"display_name":"Adam"},"score":1,"creation_date":1481735831,"post_id":41147768,"comment_id":69499233,"body_markdown":"Possible duplicate of [Flyway on production database - Migration Checksum mismatch](http://stackoverflow.com/questions/29920122/flyway-on-production-database-migration-checksum-mismatch)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/29920122/flyway-on-production-database-migration-checksum-mismatch\">Flyway on production database - Migration Checksum mismatch</a>"},{"owner":{"account_id":922578,"reputation":6875,"user_id":953975,"accept_rate":69,"display_name":"Seyed Morteza Mousavi"},"score":2,"creation_date":1600436862,"post_id":41147768,"comment_id":113096647,"body_markdown":"`mvn flyway:repair` solved my problem. It seems even you have not successful migration you need to remove it. Thanks to  https://stackoverflow.com/questions/41147768/caused-by-org-flywaydb-core-api-flywayexception-validate-failed-migration-che#answer-50718584","body":"<code>mvn flyway:repair</code> solved my problem. It seems even you have not successful migration you need to remove it. Thanks to  <a href=\"https://stackoverflow.com/questions/41147768/caused-by-org-flywaydb-core-api-flywayexception-validate-failed-migration-che#answer-50718584\" title=\"caused by org flywaydb core api flywayexception validate failed migration che%23answer 50718584\">stackoverflow.com/questions/41147768/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"display_name":"user5707585"},"score":0,"creation_date":1481734395,"post_id":41147917,"comment_id":69498371,"body_markdown":"I simply migrate database from H2 DB to MYSQL. Then I simply updated the V2__create_shipwreck.sql. Please guide how I can solve it. I edited V2__create_shipwreck.sql in the above post. Even shipwreck table not created in MYSQL.","body":"I simply migrate database from H2 DB to MYSQL. Then I simply updated the V2__create_shipwreck.sql. Please guide how I can solve it. I edited V2__create_shipwreck.sql in the above post. Even shipwreck table not created in MYSQL."},{"owner":{"account_id":1081784,"reputation":6851,"user_id":1078565,"accept_rate":50,"display_name":"Kyle Anderson"},"score":1,"creation_date":1481738114,"post_id":41147917,"comment_id":69500505,"body_markdown":"Drop the database and rerun Flyway and it&#39;ll rebuild it from scratch.","body":"Drop the database and rerun Flyway and it&#39;ll rebuild it from scratch."},{"owner":{"account_id":1195219,"reputation":1031,"user_id":1167110,"display_name":"Djalas"},"score":22,"creation_date":1507555539,"post_id":41147917,"comment_id":80244199,"body_markdown":"Drop database ? If you have a lot of test data ? Drop is not the solution. It works but its not how to fix the issue.","body":"Drop database ? If you have a lot of test data ? Drop is not the solution. It works but its not how to fix the issue."},{"owner":{"account_id":1081784,"reputation":6851,"user_id":1078565,"accept_rate":50,"display_name":"Kyle Anderson"},"score":0,"creation_date":1507557966,"post_id":41147917,"comment_id":80245894,"body_markdown":"@Djalas As my answer indicates, changes should always be added to new SQL scripts, not existing SQL scripts.","body":"@Djalas As my answer indicates, changes should always be added to new SQL scripts, not existing SQL scripts."},{"owner":{"account_id":1195219,"reputation":1031,"user_id":1167110,"display_name":"Djalas"},"score":0,"creation_date":1507562667,"post_id":41147917,"comment_id":80248818,"body_markdown":"I get what you mean. But if you you have ran a bunch of integration tests prior to checksum error. Dropping the database will wipe out your database and perhaps useful test data. Applying migrations wont give you test data, Integration tests will. I have dropped my times in the past but only for when I dont care about the data I have stored in my local postgres instance.","body":"I get what you mean. But if you you have ran a bunch of integration tests prior to checksum error. Dropping the database will wipe out your database and perhaps useful test data. Applying migrations wont give you test data, Integration tests will. I have dropped my times in the past but only for when I dont care about the data I have stored in my local postgres instance."},{"owner":{"account_id":80581,"reputation":3955,"user_id":227779,"accept_rate":38,"display_name":"Per Lundberg"},"score":0,"creation_date":1686314297,"post_id":41147917,"comment_id":134785555,"body_markdown":"@Djalas Late to the party, but your integration tests should preferably be fully automated and &quot;stateless&quot; (between runs). Built up your integration DB data with e.g. pre-seeded SQL or similar (or even populate it from Java code), then run Flyway migrations towards that DB. Testcontainers is of great help for this, https://testcontainers.com/","body":"@Djalas Late to the party, but your integration tests should preferably be fully automated and &quot;stateless&quot; (between runs). Built up your integration DB data with e.g. pre-seeded SQL or similar (or even populate it from Java code), then run Flyway migrations towards that DB. Testcontainers is of great help for this, <a href=\"https://testcontainers.com/\" rel=\"nofollow noreferrer\">testcontainers.com</a>"}],"tags":[],"owner":{"account_id":1081784,"reputation":6851,"user_id":1078565,"accept_rate":50,"display_name":"Kyle Anderson"},"comment_count":6,"down_vote_count":4,"up_vote_count":127,"is_accepted":false,"score":123,"last_activity_date":1481734088,"creation_date":1481734088,"answer_id":41147917,"question_id":41147768,"body_markdown":"Flyway is comparing the checksum of the SQL script with that of the previously run checksum.  This exception typically occurs if you change a SQL script that has already been applied by Flyway, thus causing a checksum mismatch.\r\n\r\nIf this is development, you can drop your database and start the migrations from scratch.\r\n\r\nIf you&#39;re in production, never edit SQL scripts that have already been applied.  Only create new SQL scripts going forward.","title":"Caused by: org.flywaydb.core.api.FlywayException: Validate failed. Migration Checksum mismatch for migration 2","body":"<p>Flyway is comparing the checksum of the SQL script with that of the previously run checksum.  This exception typically occurs if you change a SQL script that has already been applied by Flyway, thus causing a checksum mismatch.</p>\n\n<p>If this is development, you can drop your database and start the migrations from scratch.</p>\n\n<p>If you're in production, never edit SQL scripts that have already been applied.  Only create new SQL scripts going forward.</p>\n"},{"comments":[{"owner":{"account_id":8346196,"reputation":333,"user_id":6269836,"accept_rate":75,"display_name":"T&#252;rkmen Mustafa Demirci"},"score":0,"creation_date":1596617208,"post_id":43119929,"comment_id":111865808,"body_markdown":"This is it my friend ! the best solution  regarding this error in dev env. thanks","body":"This is it my friend ! the best solution  regarding this error in dev env. thanks"}],"tags":[],"owner":{"account_id":2894488,"reputation":6352,"user_id":2482582,"accept_rate":80,"display_name":"Moebius"},"comment_count":1,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1586350539,"creation_date":1490881967,"answer_id":43119929,"question_id":41147768,"body_markdown":"IF YOU ARE NOT IN PRODUCTION, you can look in your `flywayTable` in the data base and remove the line which contain the name of the script which has been applied.\r\n\r\n`flywayTable` is a project option which define the name of the table in the db used by flyway which contain information about the version of this db, already applied scripts...","title":"Caused by: org.flywaydb.core.api.FlywayException: Validate failed. Migration Checksum mismatch for migration 2","body":"<p>IF YOU ARE NOT IN PRODUCTION, you can look in your <code>flywayTable</code> in the data base and remove the line which contain the name of the script which has been applied.</p>\n\n<p><code>flywayTable</code> is a project option which define the name of the table in the db used by flyway which contain information about the version of this db, already applied scripts...</p>\n"},{"comments":[{"owner":{"account_id":4363097,"reputation":1,"user_id":4142152,"accept_rate":91,"display_name":"Pavel"},"score":0,"creation_date":1518075347,"post_id":43343967,"comment_id":84357035,"body_markdown":"I can&#39;t delete schema_version. what should i do?","body":"I can&#39;t delete schema_version. what should i do?"},{"owner":{"account_id":1851074,"reputation":690,"user_id":1677638,"display_name":"planben"},"score":3,"creation_date":1522740034,"post_id":43343967,"comment_id":86255693,"body_markdown":"you can delete just the row that you are having troubles with, e.g : delete from schema_version where version = 2;","body":"you can delete just the row that you are having troubles with, e.g : delete from schema_version where version = 2;"},{"owner":{"account_id":4284001,"reputation":183,"user_id":3502456,"display_name":"Kashif Ibrahim"},"score":1,"creation_date":1548968475,"post_id":43343967,"comment_id":95746161,"body_markdown":"Use this instead:\n\ndrop table &quot;schema_version&quot;;","body":"Use this instead:  drop table &quot;schema_version&quot;;"},{"owner":{"account_id":6997939,"reputation":731,"user_id":5365001,"display_name":"LHM"},"score":1,"creation_date":1551295442,"post_id":43343967,"comment_id":96592498,"body_markdown":"This fixed mine, however, I needed to use: drop table &quot;flyway_schema_version&quot;;","body":"This fixed mine, however, I needed to use: drop table &quot;flyway_schema_version&quot;;"}],"tags":[],"owner":{"account_id":3579176,"reputation":4110,"user_id":2987780,"accept_rate":50,"display_name":"Indrajeet Gour"},"comment_count":4,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1491908570,"creation_date":1491908186,"answer_id":43343967,"question_id":41147768,"body_markdown":"The best solution would be to do these steps :\r\n\r\n 1. Delete the file called - V2__create_shipwreck.sql, clean and\r\n    build the project again. \r\n 2. Run the project again, login into h2 and\r\n    delete the table called &quot;schema_version&quot;.\r\n\r\n    &gt; drop table schema_version;\r\n\r\n 3. Now make V2__create_shipwreck.sql file with ddl and rerun the project again.\r\n\r\n 4. Do remember this, add version 4.1.2 for flyway-core in pom.xml like \r\n\r\n    \t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.flywaydb&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;flyway-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.1.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\nIt should work now. Hope this will help.\r\n\r\n\r\n","title":"Caused by: org.flywaydb.core.api.FlywayException: Validate failed. Migration Checksum mismatch for migration 2","body":"<p>The best solution would be to do these steps :</p>\n\n<ol>\n<li>Delete the file called - V2__create_shipwreck.sql, clean and\nbuild the project again. </li>\n<li><p>Run the project again, login into h2 and\ndelete the table called \"schema_version\".</p>\n\n<blockquote>\n  <p>drop table schema_version;</p>\n</blockquote></li>\n<li><p>Now make V2__create_shipwreck.sql file with ddl and rerun the project again.</p></li>\n<li><p>Do remember this, add version 4.1.2 for flyway-core in pom.xml like </p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.flywaydb&lt;/groupId&gt;\n    &lt;artifactId&gt;flyway-core&lt;/artifactId&gt;\n    &lt;version&gt;4.1.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre></li>\n</ol>\n\n<p>It should work now. Hope this will help.</p>\n"},{"comments":[{"owner":{"account_id":396320,"reputation":1747,"user_id":759806,"display_name":"Rob Bailey"},"score":2,"creation_date":1537461410,"post_id":46647820,"comment_id":91802754,"body_markdown":"@user5707585 This should be the accepted answer, as it actually helps provide a solution to your problem, rather than condescending general counsel on what you shouldn&#39;t have done to begin with.","body":"@user5707585 This should be the accepted answer, as it actually helps provide a solution to your problem, rather than condescending general counsel on what you shouldn&#39;t have done to begin with."}],"tags":[],"owner":{"account_id":1195219,"reputation":1031,"user_id":1167110,"display_name":"Djalas"},"comment_count":1,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1522414235,"creation_date":1507556139,"answer_id":46647820,"question_id":41147768,"body_markdown":"I would simply delete from schema_version the migration/s that deviates from migrations to be applied. This way you don&#39;t throw away any test data that you might have.\r\n\r\nFor example:\r\n\r\n    SELECT * from schema_version order by installed_on desc\r\n\r\n    V_005_five.sql\r\n    V_004_four.sql\r\n    V_003_three.sql\r\n    V_002_two.sql\r\n    V_001_one.sql\r\n\r\nMigrations to be applied\r\n\r\n    V_005_five.sql\r\n    * V_004_addUserTable.sql *\r\n    V_003_three.sql\r\n    V_002_two.sql\r\n    V_001_one.sql\r\n\r\n\r\nSolution here is to delete from schema_version\r\n\r\n    V_005_five.sql\r\n    V_004_four.sql\r\n\r\nAND revert any database changes caused. for example if schema created new table then you must drop that table before you run you migrations.\r\n\r\nwhen you run flyway it will only re apply\r\n\r\n    V_005_five.sql\r\n    * V_004_addUserTable.sql *\r\n\r\nnew schema_version will be\r\n\r\n    V_005_five.sql\r\n    * V_004_addUserTable.sql *\r\n    V_003_three.sql\r\n    V_002_two.sql\r\n    V_001_one.sql\r\n\r\n\r\nHope it helps\r\n","title":"Caused by: org.flywaydb.core.api.FlywayException: Validate failed. Migration Checksum mismatch for migration 2","body":"<p>I would simply delete from schema_version the migration/s that deviates from migrations to be applied. This way you don't throw away any test data that you might have.</p>\n\n<p>For example:</p>\n\n<pre><code>SELECT * from schema_version order by installed_on desc\n\nV_005_five.sql\nV_004_four.sql\nV_003_three.sql\nV_002_two.sql\nV_001_one.sql\n</code></pre>\n\n<p>Migrations to be applied</p>\n\n<pre><code>V_005_five.sql\n* V_004_addUserTable.sql *\nV_003_three.sql\nV_002_two.sql\nV_001_one.sql\n</code></pre>\n\n<p>Solution here is to delete from schema_version</p>\n\n<pre><code>V_005_five.sql\nV_004_four.sql\n</code></pre>\n\n<p>AND revert any database changes caused. for example if schema created new table then you must drop that table before you run you migrations.</p>\n\n<p>when you run flyway it will only re apply</p>\n\n<pre><code>V_005_five.sql\n* V_004_addUserTable.sql *\n</code></pre>\n\n<p>new schema_version will be</p>\n\n<pre><code>V_005_five.sql\n* V_004_addUserTable.sql *\nV_003_three.sql\nV_002_two.sql\nV_001_one.sql\n</code></pre>\n\n<p>Hope it helps</p>\n"},{"tags":[],"owner":{"account_id":10934234,"reputation":31,"user_id":8036465,"display_name":"barnold"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1516619316,"creation_date":1516619316,"answer_id":48380197,"question_id":41147768,"body_markdown":"Update your schema_version record to mach the &quot;Resolved locally&quot; value which in your case is -1729781252","title":"Caused by: org.flywaydb.core.api.FlywayException: Validate failed. Migration Checksum mismatch for migration 2","body":"<p>Update your schema_version record to mach the \"Resolved locally\" value which in your case is -1729781252</p>\n"},{"tags":[],"owner":{"account_id":2965843,"reputation":21,"user_id":2518993,"display_name":"M&#225;rton Szab&#243;"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1516622464,"creation_date":1516622464,"answer_id":48381150,"question_id":41147768,"body_markdown":"Actually there is another solution, but it&#39;s a workaround, that should not be done in a properly managed project. However I met a situation, where it was not possible to go down the better road :)\r\n\r\nYou can update the schame_version table, and actually change the checksum to the new one. This will cause the migration to go through, but can have other side effects. \r\n\r\nWhen deploying to different environments (test, uat, prod, etc) then it might happen, that you have to update the same checksum on more environments. And when it comes to gitflow, and release branches, you can easily mix up the whole.  ","title":"Caused by: org.flywaydb.core.api.FlywayException: Validate failed. Migration Checksum mismatch for migration 2","body":"<p>Actually there is another solution, but it's a workaround, that should not be done in a properly managed project. However I met a situation, where it was not possible to go down the better road :)</p>\n\n<p>You can update the schame_version table, and actually change the checksum to the new one. This will cause the migration to go through, but can have other side effects. </p>\n\n<p>When deploying to different environments (test, uat, prod, etc) then it might happen, that you have to update the same checksum on more environments. And when it comes to gitflow, and release branches, you can easily mix up the whole.  </p>\n"},{"comments":[{"owner":{"account_id":2307243,"reputation":2294,"user_id":2026280,"accept_rate":78,"display_name":"Sandeep R"},"score":1,"creation_date":1533043849,"post_id":50718584,"comment_id":90194453,"body_markdown":"where did you write this script.?","body":"where did you write this script.?"},{"owner":{"account_id":1709965,"reputation":1324,"user_id":1568224,"display_name":"dave"},"score":2,"creation_date":1533132391,"post_id":50718584,"comment_id":90235097,"body_markdown":"That was after initializing Flyway, e.g. \n    Flyway flyway = new Flyway();\n    flyway.setDataSource(dataSource);\n    flyway.repair();\n    flyway.migrate();","body":"That was after initializing Flyway, e.g.      Flyway flyway = new Flyway();     flyway.setDataSource(dataSource);     flyway.repair();     flyway.migrate();"},{"owner":{"account_id":1268826,"reputation":7565,"user_id":1225551,"accept_rate":75,"display_name":"Raf"},"score":6,"creation_date":1576985651,"post_id":50718584,"comment_id":105066564,"body_markdown":"If you are using gradle then `./gradlew flywayRepair` does the trick","body":"If you are using gradle then <code>.&#47;gradlew flywayRepair</code> does the trick"},{"owner":{"account_id":12269088,"reputation":12370,"user_id":8954773,"display_name":"bereket gebredingle"},"score":1,"creation_date":1627285596,"post_id":50718584,"comment_id":121105400,"body_markdown":"Thanks, this answer should be on the top.","body":"Thanks, this answer should be on the top."}],"tags":[],"owner":{"account_id":1709965,"reputation":1324,"user_id":1568224,"display_name":"dave"},"comment_count":4,"down_vote_count":0,"up_vote_count":38,"is_accepted":false,"score":38,"last_activity_date":1577093299,"creation_date":1528282348,"answer_id":50718584,"question_id":41147768,"body_markdown":"I had the same issue and deleted the complete schema from the database, yet the issue remained.\r\n\r\nI solved this by running the `repair()` command of flyway:\r\n\r\n    flyway.repair();\r\n\r\nAlternatively with Flyway Maven plugin:\r\n\r\n    mvn flyway:repair\r\n\r\n\r\nMaven plugin addition into pom.xml:\r\n\r\n    &lt;plugin&gt;\r\n\t    &lt;groupId&gt;org.flywaydb&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;flyway-maven-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;5.2.4&lt;/version&gt;\r\n    &lt;/plugin&gt;\r\n\r\nBTW: I did not find what exactly went wrong.\r\n\r\n\r\nWith Gradle (as per comment from [Raf][1]):\r\n\r\n    ./gradlew flywayRepair\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/1225551/raf","title":"Caused by: org.flywaydb.core.api.FlywayException: Validate failed. Migration Checksum mismatch for migration 2","body":"<p>I had the same issue and deleted the complete schema from the database, yet the issue remained.</p>\n\n<p>I solved this by running the <code>repair()</code> command of flyway:</p>\n\n<pre><code>flyway.repair();\n</code></pre>\n\n<p>Alternatively with Flyway Maven plugin:</p>\n\n<pre><code>mvn flyway:repair\n</code></pre>\n\n<p>Maven plugin addition into pom.xml:</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.flywaydb&lt;/groupId&gt;\n    &lt;artifactId&gt;flyway-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;5.2.4&lt;/version&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>BTW: I did not find what exactly went wrong.</p>\n\n<p>With Gradle (as per comment from <a href=\"https://stackoverflow.com/users/1225551/raf\">Raf</a>):</p>\n\n<pre><code>./gradlew flywayRepair\n</code></pre>\n"},{"tags":[],"owner":{"account_id":49931,"reputation":25463,"user_id":148844,"accept_rate":67,"display_name":"Chloe"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1533147062,"creation_date":1533147062,"answer_id":51639758,"question_id":41147768,"body_markdown":"Flyway changed the way it calculates the checksums from version 3 to version 5. You can re-calculate the checksums. Since the Flyway plugin doesn&#39;t properly read the Spring datasource properties, you have to manually specify them on the command line ([or one of the other various ways Flyway accepts](https://flywaydb.org/documentation/maven/#system-properties)). \r\n\r\n    mvn flyway:repair -Dflyway.user=root -Dflyway.password= -Dflyway.url=jdbc:mysql://localhost:3306/mydatabase -Dflyway.table=schema_version\r\n\r\nFlyway also changed the table it stores the checksums, so you also have to specify `flyway-table=schema_version` to use your old table, or else it will give you a warning (and probably an error in version 6).\r\n\r\n\r\n    [INFO] Repairing Schema History table for version 2 (Description: create sources, Type: SQL, Checksum: 2125962141)  ...\r\n    [INFO] Repairing Schema History table for version 3 (Description: create stats, Type: SQL, Checksum: 389912194)  ...\r\n    [INFO] Repairing Schema History table for version 4 (Description: add user encrypted, Type: SQL, Checksum: 182607572)  ...\r\n    ","title":"Caused by: org.flywaydb.core.api.FlywayException: Validate failed. Migration Checksum mismatch for migration 2","body":"<p>Flyway changed the way it calculates the checksums from version 3 to version 5. You can re-calculate the checksums. Since the Flyway plugin doesn't properly read the Spring datasource properties, you have to manually specify them on the command line (<a href=\"https://flywaydb.org/documentation/maven/#system-properties\" rel=\"nofollow noreferrer\">or one of the other various ways Flyway accepts</a>). </p>\n\n<pre><code>mvn flyway:repair -Dflyway.user=root -Dflyway.password= -Dflyway.url=jdbc:mysql://localhost:3306/mydatabase -Dflyway.table=schema_version\n</code></pre>\n\n<p>Flyway also changed the table it stores the checksums, so you also have to specify <code>flyway-table=schema_version</code> to use your old table, or else it will give you a warning (and probably an error in version 6).</p>\n\n<pre><code>[INFO] Repairing Schema History table for version 2 (Description: create sources, Type: SQL, Checksum: 2125962141)  ...\n[INFO] Repairing Schema History table for version 3 (Description: create stats, Type: SQL, Checksum: 389912194)  ...\n[INFO] Repairing Schema History table for version 4 (Description: add user encrypted, Type: SQL, Checksum: 182607572)  ...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":927996,"reputation":12046,"user_id":958373,"accept_rate":63,"display_name":"Stephane"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1548270175,"creation_date":1548270175,"answer_id":54334026,"question_id":41147768,"body_markdown":"If you are sure that the modification in the SQL file has no impact on your existing schema, you can also update the checksum of the existing schema.\r\n\r\nI did this following a slight change in the sql file.\r\n\r\nHere is how I updated the checksum:\r\n\r\n    update flyway_schema_history set checksum = &#39;-1934991199&#39; where installed_rank = &#39;1&#39;;\r\n\r\n","title":"Caused by: org.flywaydb.core.api.FlywayException: Validate failed. Migration Checksum mismatch for migration 2","body":"<p>If you are sure that the modification in the SQL file has no impact on your existing schema, you can also update the checksum of the existing schema.</p>\n\n<p>I did this following a slight change in the sql file.</p>\n\n<p>Here is how I updated the checksum:</p>\n\n<pre><code>update flyway_schema_history set checksum = '-1934991199' where installed_rank = '1';\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3957080,"reputation":21,"user_id":3265213,"display_name":"Eliran_Mesika"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1554547223,"creation_date":1554547223,"answer_id":55548255,"question_id":41147768,"body_markdown":"simple solution will be change spring.datasource.url=jdbc:h2:file:~/dasboot in application.properties to new file name like : spring.datasource.url=jdbc:h2:file:~/**dasboots**\r\n\r\n","title":"Caused by: org.flywaydb.core.api.FlywayException: Validate failed. Migration Checksum mismatch for migration 2","body":"<p>simple solution will be change spring.datasource.url=jdbc:h2:file:~/dasboot in application.properties to new file name like : spring.datasource.url=jdbc:h2:file:~/<strong>dasboots</strong></p>\n"},{"tags":[],"owner":{"account_id":7320129,"reputation":390,"user_id":7023095,"display_name":"R0b0t0"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1561232527,"creation_date":1561232527,"answer_id":56718600,"question_id":41147768,"body_markdown":"1-Delete the migration file.\r\n2-connect to your database and drop the table created by the migration.\r\n3-recreate the file of the migration with the the right sql.\r\n","title":"Caused by: org.flywaydb.core.api.FlywayException: Validate failed. Migration Checksum mismatch for migration 2","body":"<p>1-Delete the migration file.\n2-connect to your database and drop the table created by the migration.\n3-recreate the file of the migration with the the right sql.</p>\n"},{"tags":[],"owner":{"account_id":12523187,"reputation":31,"user_id":9113895,"display_name":"agent74"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1561270605,"creation_date":1561270605,"answer_id":56721505,"question_id":41147768,"body_markdown":"I had the same issue and I believe this occurred because of checksum between linux and windows (also mac).\r\nyou can `use repair()` command in flyway.\r\n\r\n    flyway.repair();\r\n\r\nBe careful , if you are in production environment , make sure that you did not change the migration SQL file; because when you run the `flyway.repair();` it means you saying to flyway that your are sure about the migration version and their checksum and then the flyway repair them !","title":"Caused by: org.flywaydb.core.api.FlywayException: Validate failed. Migration Checksum mismatch for migration 2","body":"<p>I had the same issue and I believe this occurred because of checksum between linux and windows (also mac).\nyou can <code>use repair()</code> command in flyway.</p>\n\n<pre><code>flyway.repair();\n</code></pre>\n\n<p>Be careful , if you are in production environment , make sure that you did not change the migration SQL file; because when you run the <code>flyway.repair();</code> it means you saying to flyway that your are sure about the migration version and their checksum and then the flyway repair them !</p>\n"},{"comments":[{"owner":{"account_id":10907051,"reputation":123,"user_id":8017480,"display_name":"shiuu"},"score":4,"creation_date":1610509595,"post_id":57725089,"comment_id":116153810,"body_markdown":"In my case, the table&#39;s name is schema_version.","body":"In my case, the table&#39;s name is schema_version."},{"owner":{"account_id":18618594,"reputation":158,"user_id":13569349,"display_name":"Mateus Nogueira"},"score":2,"creation_date":1660740439,"post_id":57725089,"comment_id":129603461,"body_markdown":"how can i do at H2?","body":"how can i do at H2?"},{"owner":{"account_id":1866573,"reputation":1130,"user_id":1689987,"accept_rate":100,"display_name":"user1689987"},"score":0,"creation_date":1669922852,"post_id":57725089,"comment_id":131759081,"body_markdown":"deleting the row didn&#39;t work in my case, i needed to delete the whole db schema and recreate from scratch","body":"deleting the row didn&#39;t work in my case, i needed to delete the whole db schema and recreate from scratch"}],"tags":[],"owner":{"account_id":2802343,"reputation":621,"user_id":2410353,"display_name":"Deepak Nair"},"comment_count":3,"down_vote_count":0,"up_vote_count":61,"is_accepted":false,"score":61,"last_activity_date":1567161151,"creation_date":1567161151,"answer_id":57725089,"question_id":41147768,"body_markdown":"Here the solution which worked for me when I had this issue in my local system.\r\n\r\n 1. Go to flyway_schema_history in your DB \r\n 2. Delete the row containing the sql migration script","title":"Caused by: org.flywaydb.core.api.FlywayException: Validate failed. Migration Checksum mismatch for migration 2","body":"<p>Here the solution which worked for me when I had this issue in my local system.</p>\n\n<ol>\n<li>Go to flyway_schema_history in your DB </li>\n<li>Delete the row containing the sql migration script</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":16810797,"reputation":1,"user_id":12153866,"display_name":"Turco"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1570747134,"creation_date":1570747134,"answer_id":58331999,"question_id":41147768,"body_markdown":"If you have your problem in production, you must have **V2__create_shipwreck.sql** identically to the one you have in your latest version where it has not been modified.\r\n\r\nThen the checksum will be correct again","title":"Caused by: org.flywaydb.core.api.FlywayException: Validate failed. Migration Checksum mismatch for migration 2","body":"<p>If you have your problem in production, you must have <strong>V2__create_shipwreck.sql</strong> identically to the one you have in your latest version where it has not been modified.</p>\n\n<p>Then the checksum will be correct again</p>\n"},{"tags":[],"owner":{"account_id":10984830,"reputation":41,"user_id":8070899,"display_name":"Vinesh Gowda"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1581674641,"creation_date":1581674641,"answer_id":60224095,"question_id":41147768,"body_markdown":"Just add\r\n\r\n    spring.flyway.enabled=false\r\n\r\nin application.properties file if you do not want flyway to check the checksum every time you run the application. ","title":"Caused by: org.flywaydb.core.api.FlywayException: Validate failed. Migration Checksum mismatch for migration 2","body":"<p>Just add</p>\n\n<pre><code>spring.flyway.enabled=false\n</code></pre>\n\n<p>in application.properties file if you do not want flyway to check the checksum every time you run the application. </p>\n"},{"tags":[],"owner":{"account_id":10452784,"reputation":41,"user_id":7705847,"display_name":"Prudvi Raj"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1582760648,"creation_date":1582745366,"answer_id":60421170,"question_id":41147768,"body_markdown":"use this query in your local DB.\r\n\r\n1. select * from schema_version\r\n   delete from schema_version where **checksum Column** =  -1729781252;\r\n\r\n Note: -1729781252 is the &quot;Resolved locally&quot; value.\r\n\r\n1. Build and start the server.         ","title":"Caused by: org.flywaydb.core.api.FlywayException: Validate failed. Migration Checksum mismatch for migration 2","body":"<p>use this query in your local DB.</p>\n\n<ol>\n<li><p>select * from schema_version\ndelete from schema_version where <strong>checksum Column</strong> =  -1729781252;</p>\n\n<p>Note: -1729781252 is the \"Resolved locally\" value.</p></li>\n<li><p>Build and start the server.         </p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":2294433,"reputation":75,"user_id":2016255,"display_name":"Alvaro"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1589069670,"creation_date":1589069670,"answer_id":61705533,"question_id":41147768,"body_markdown":"What I did when faced this issue, was connect to DB and update the checksum field correspondent to the mistaken version, putting there the value resolved locally by FlyWay.\r\n\r\nFor the following error:\r\n\r\n    nested exception is org.flywaydb.core.api.FlywayException: Validate failed.\r\n    Migration Checksum mismatch for migration 1.12\r\n        -&gt; Applied to database : 1029320280\r\n        -&gt; Resolved locally    : -236187247\r\n\r\nI simply did this:\r\n\r\n    UPDATE schema_version SET checksum = -236187247 WHERE version_rank = 12 AND checksum = 1029320280;\r\n\r\nAnd problem solved..\r\n\r\n**NOTE:** You have to be sure your schema is actually correct, check your tables and their structure, if everything is OK, then you can apply this solution; otherwise, you should repair your schema manually first using plain and native SQL.\r\n","title":"Caused by: org.flywaydb.core.api.FlywayException: Validate failed. Migration Checksum mismatch for migration 2","body":"<p>What I did when faced this issue, was connect to DB and update the checksum field correspondent to the mistaken version, putting there the value resolved locally by FlyWay.</p>\n\n<p>For the following error:</p>\n\n<pre><code>nested exception is org.flywaydb.core.api.FlywayException: Validate failed.\nMigration Checksum mismatch for migration 1.12\n    -&gt; Applied to database : 1029320280\n    -&gt; Resolved locally    : -236187247\n</code></pre>\n\n<p>I simply did this:</p>\n\n<pre><code>UPDATE schema_version SET checksum = -236187247 WHERE version_rank = 12 AND checksum = 1029320280;\n</code></pre>\n\n<p>And problem solved..</p>\n\n<p><strong>NOTE:</strong> You have to be sure your schema is actually correct, check your tables and their structure, if everything is OK, then you can apply this solution; otherwise, you should repair your schema manually first using plain and native SQL.</p>\n"},{"tags":[],"owner":{"account_id":11439295,"reputation":679,"user_id":8385477,"display_name":"srp"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1589214586,"creation_date":1589214586,"answer_id":61734578,"question_id":41147768,"body_markdown":"I had the same issue and tried all the options (delete schema, delete specific row, update checksum) but nothing works.  \r\n\r\nIn my case flyway-core dependency got corrupted somehow.\r\n\r\n\r\n\r\nSolution:\r\n\r\n\r\n1. Delete flyway-core folder from ~\\.m2\\local repository path...\\org\\flywaydb\\flyway-core. \r\n\r\n\r\n\r\n2. Execute &quot;maven clean install&quot; so that it will download new one and add it into a project.\r\n\r\n\r\n\r\nI hope this will help.","title":"Caused by: org.flywaydb.core.api.FlywayException: Validate failed. Migration Checksum mismatch for migration 2","body":"<p>I had the same issue and tried all the options (delete schema, delete specific row, update checksum) but nothing works.  </p>\n\n<p>In my case flyway-core dependency got corrupted somehow.</p>\n\n<p>Solution:</p>\n\n<ol>\n<li><p>Delete flyway-core folder from ~.m2\\local repository path...\\org\\flywaydb\\flyway-core. </p></li>\n<li><p>Execute \"maven clean install\" so that it will download new one and add it into a project.</p></li>\n</ol>\n\n<p>I hope this will help.</p>\n"},{"tags":[],"owner":{"account_id":1652456,"reputation":1,"user_id":1522754,"display_name":"Krishna"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1589429595,"creation_date":1589429595,"answer_id":61789188,"question_id":41147768,"body_markdown":"There are 3 ways to solve this issue while development. Any one from below can solve this issue.&lt;BR&gt;\r\n1) provide the changes in new migration sql file with incrementing version &lt;BR&gt;\r\n2) change the schema name in db url we provide &lt;BR&gt;\r\n   datasource.flyway.url=jdbc:h2:file:~/cart3  &lt;BR&gt;\r\n   datasource.flyway.url=jdbc:h2:file:~/cart4  &lt;BR&gt;\r\n3) delete the .mv and .trace files in users home directory    &lt;BR&gt;\r\n   ex: cart3.mv  and cart3.trace   under c://users/username/","title":"Caused by: org.flywaydb.core.api.FlywayException: Validate failed. Migration Checksum mismatch for migration 2","body":"<p>There are 3 ways to solve this issue while development. Any one from below can solve this issue.<BR>\n1) provide the changes in new migration sql file with incrementing version <BR>\n2) change the schema name in db url we provide <BR>\n   datasource.flyway.url=jdbc:h2:file:~/cart3  <BR>\n   datasource.flyway.url=jdbc:h2:file:~/cart4  <BR>\n3) delete the .mv and .trace files in users home directory    <BR>\n   ex: cart3.mv  and cart3.trace   under c://users/username/</p>\n"},{"comments":[{"owner":{"account_id":179306,"reputation":2770,"user_id":411871,"accept_rate":67,"display_name":"Anil Bharadia"},"score":0,"creation_date":1590704718,"post_id":62064909,"comment_id":109789843,"body_markdown":"That is not a good practice. Because if the migration is already applied, any change into that migration won&#39;t be reflected into DB, and you won&#39;t even get error, if you skip validation.","body":"That is not a good practice. Because if the migration is already applied, any change into that migration won&#39;t be reflected into DB, and you won&#39;t even get error, if you skip validation."},{"owner":{"account_id":13771751,"reputation":49,"user_id":9939009,"display_name":"Ch&#226;nh&#233;ng Seang"},"score":0,"creation_date":1590796601,"post_id":62064909,"comment_id":109826334,"body_markdown":"yes, but in case you have upgraded flyway version and found out it causes error, this can help.","body":"yes, but in case you have upgraded flyway version and found out it causes error, this can help."}],"tags":[],"owner":{"account_id":13771751,"reputation":49,"user_id":9939009,"display_name":"Ch&#226;nh&#233;ng Seang"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1590669532,"creation_date":1590669532,"answer_id":62064909,"question_id":41147768,"body_markdown":"just don&#39;t validate:\r\n```java\r\nflyway.setValidateOnMigrate(false);\r\n```","title":"Caused by: org.flywaydb.core.api.FlywayException: Validate failed. Migration Checksum mismatch for migration 2","body":"<p>just don't validate:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>flyway.setValidateOnMigrate(false);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24238330,"reputation":442,"user_id":18191094,"display_name":"Henry S."},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1644693124,"creation_date":1644693124,"answer_id":71095020,"question_id":41147768,"body_markdown":"After your .sql applied to DB, you edited the .sql, flyway may show this error.\r\n\r\nIf using Postgresql, a quick solution\r\n\r\nAfter dropping tables &quot;flyway_schema_histrory&quot; and the table my .sql created, the error disappeared.\r\n[delete table][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/bjJZM.png","title":"Caused by: org.flywaydb.core.api.FlywayException: Validate failed. Migration Checksum mismatch for migration 2","body":"<p>After your .sql applied to DB, you edited the .sql, flyway may show this error.</p>\n<p>If using Postgresql, a quick solution</p>\n<p>After dropping tables &quot;flyway_schema_histrory&quot; and the table my .sql created, the error disappeared.\n<a href=\"https://i.stack.imgur.com/bjJZM.png\" rel=\"nofollow noreferrer\">delete table</a></p>\n"},{"tags":[],"owner":{"account_id":482463,"reputation":6669,"user_id":896886,"accept_rate":41,"display_name":"Andrew Koper"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1694013640,"creation_date":1651089606,"answer_id":72034622,"question_id":41147768,"body_markdown":"I fixed this error with these steps:\r\n\r\n 1. In your database, go to the flyway_schema_history table \r\n 2. Delete the last row containing the most recent flyway migration script (&quot;V6__xxx&quot; or whatever)\r\n 3. Start your application.  I got another flyway error message that was kind of a dump of SQL to insert some rows in some tables.\r\n 4. Go to those tables and delete those new rows.\r\n\r\nI think the flyway migration script was trying to run, but it had already run once.  It was trying to do the same thing again - insert the same rows - and that was the final conflict/error.  Deleting those rows allowed it to run normally/successfully","title":"Caused by: org.flywaydb.core.api.FlywayException: Validate failed. Migration Checksum mismatch for migration 2","body":"<p>I fixed this error with these steps:</p>\n<ol>\n<li>In your database, go to the flyway_schema_history table</li>\n<li>Delete the last row containing the most recent flyway migration script (&quot;V6__xxx&quot; or whatever)</li>\n<li>Start your application.  I got another flyway error message that was kind of a dump of SQL to insert some rows in some tables.</li>\n<li>Go to those tables and delete those new rows.</li>\n</ol>\n<p>I think the flyway migration script was trying to run, but it had already run once.  It was trying to do the same thing again - insert the same rows - and that was the final conflict/error.  Deleting those rows allowed it to run normally/successfully</p>\n"},{"tags":[],"owner":{"account_id":12975493,"reputation":1,"user_id":9379640,"display_name":"Sanjeev Kumar"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1655217853,"creation_date":1655217853,"answer_id":72618993,"question_id":41147768,"body_markdown":"I have faced similar issue once. And the solution was... \r\n\r\nDon&#39;t do any changes to DAO classes.. .It will try to change the database and flyway will not allow. ","title":"Caused by: org.flywaydb.core.api.FlywayException: Validate failed. Migration Checksum mismatch for migration 2","body":"<p>I have faced similar issue once. And the solution was...</p>\n<p>Don't do any changes to DAO classes.. .It will try to change the database and flyway will not allow.</p>\n"},{"tags":[],"owner":{"account_id":24204123,"reputation":19,"user_id":18161563,"display_name":"husnitdin"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1674838529,"creation_date":1674838529,"answer_id":75261104,"question_id":41147768,"body_markdown":"Believe or not, adding flyway dependency version solved my issue","title":"Caused by: org.flywaydb.core.api.FlywayException: Validate failed. Migration Checksum mismatch for migration 2","body":"<p>Believe or not, adding flyway dependency version solved my issue</p>\n"},{"tags":[],"owner":{"account_id":16256396,"reputation":94,"user_id":11738929,"display_name":"Shreyansh Jain"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1680274735,"creation_date":1680274735,"answer_id":75899986,"question_id":41147768,"body_markdown":"As of writing this in 2023, I am using **Flyway 8.5.13** and I faced this issue when I tried to change the script that had already executed.\r\n\r\n**What caused the issue:**\r\n\r\nI changed name of the primary key column in V1 SQL script (after it had already been executed).\r\n\r\n**How I resolved it:**\r\n1. By undoing the changes I made to primary key column. Basically making V1 script same as it was before execution.\r\n2. Added a new V2 sql file for changing the primary key column name.\r\n3. Execute\r\n\r\nHope it helps\r\n","title":"Caused by: org.flywaydb.core.api.FlywayException: Validate failed. Migration Checksum mismatch for migration 2","body":"<p>As of writing this in 2023, I am using <strong>Flyway 8.5.13</strong> and I faced this issue when I tried to change the script that had already executed.</p>\n<p><strong>What caused the issue:</strong></p>\n<p>I changed name of the primary key column in V1 SQL script (after it had already been executed).</p>\n<p><strong>How I resolved it:</strong></p>\n<ol>\n<li>By undoing the changes I made to primary key column. Basically making V1 script same as it was before execution.</li>\n<li>Added a new V2 sql file for changing the primary key column name.</li>\n<li>Execute</li>\n</ol>\n<p>Hope it helps</p>\n"}],"owner":{"display_name":"user5707585"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":239822,"favorite_count":0,"down_vote_count":0,"up_vote_count":112,"answer_count":25,"score":112,"last_activity_date":1694013640,"creation_date":1481733696,"question_id":41147768,"body_markdown":"I tried to find the solution for the below problem, but none of them worked for me. I am developing **Angular + Spring Boot** application using **MySQL + flyway**. Please guide whats going wrong here.\r\n\r\n\r\n    org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;flywayInitializer&#39; defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed; nested exception is org.flywaydb.core.api.FlywayException: Validate failed. Migration Checksum mismatch for migration 2\r\n    -&gt; Applied to database : 1499248173\r\n    -&gt; Resolved locally    : -1729781252\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1578) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:545) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:482) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:296) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1054) ~[spring-context-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:829) ~[spring-context-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:538) ~[spring-context-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:118) ~[spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:764) [spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.doRun(SpringApplication.java:357) [spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:305) [spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1124) [spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1113) [spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\r\n    \tat com.boot.App.main(App.java:9) [classes/:na]\r\n    Caused by: org.flywaydb.core.api.FlywayException: Validate failed. Migration Checksum mismatch for migration 2\r\n    -&gt; Applied to database : 1499248173\r\n    -&gt; Resolved locally    : -1729781252\r\n    \tat org.flywaydb.core.Flyway.doValidate(Flyway.java:1108) ~[flyway-core-3.2.1.jar:na]\r\n    \tat org.flywaydb.core.Flyway.access$300(Flyway.java:62) ~[flyway-core-3.2.1.jar:na]\r\n    \tat org.flywaydb.core.Flyway$1.execute(Flyway.java:1012) ~[flyway-core-3.2.1.jar:na]\r\n    \tat org.flywaydb.core.Flyway$1.execute(Flyway.java:1006) ~[flyway-core-3.2.1.jar:na]\r\n    \tat org.flywaydb.core.Flyway.execute(Flyway.java:1418) ~[flyway-core-3.2.1.jar:na]\r\n    \tat org.flywaydb.core.Flyway.migrate(Flyway.java:1006) ~[flyway-core-3.2.1.jar:na]\r\n    \tat org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66) ~[spring-boot-autoconfigure-1.3.1.RELEASE.jar:1.3.1.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1637) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1574) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\r\n    \t... 18 common frames omitted\r\n\r\n**application.properties**\r\n\r\n    logging.level.org.springframework.web=DEBUG\r\n    \r\n    server.port=8080\r\n    \r\n    spring.h2.console.enabled=true\r\n    spring.h2.console.path=/h2\r\n    \r\n    ## For H2 DB\r\n    #spring.datasource.url=jdbc:h2:file:~/dasboot\r\n    #spring.datasource.username=sa\r\n    #spring.datasource.password=\r\n    #spring.datasource.driver-class-name=org.h2.Driver\r\n    \r\n    ## For MYSQL DB\r\n    spring.datasource.url=jdbc:mysql://localhost:3306/dasboot\r\n    spring.datasource.username=root\r\n    spring.datasource.password=root\r\n    spring.datasource.driver-class-name=com.mysql.jdbc.Driver\r\n    \r\n    spring.datasource.max-active=10\r\n    spring.datasource.max-idle=8\r\n    spring.datasource.max-wait=10000\r\n    spring.datasource.min-evictable-idle-time-millis=1000\r\n    spring.datasource.min-idle=8\r\n    spring.datasource.time-between-eviction-runs-millis=1\r\n    \r\n    flyway.baseline-on-migrate=true\r\n    spring.jpa.hibernate.ddl-auto=false;\r\n    \r\n    #datasource.flyway.url=jdbc:h2:file:~/dasboot\r\n    #datasource.flyway.username=sa\r\n    #datasource.flyway.password=\r\n    #datasource.flyway.driver-class-name=org.h2.Driver\r\n    \r\n    \r\n    datasource.flyway.url=jdbc:mysql://localhost:3306/dasboot\r\n    datasource.flyway.username=root\r\n    datasource.flyway.password=root\r\n    datasource.flyway.driver-class-name=com.mysql.jdbc.Driver\r\n\r\n**pom.xml**\r\n\r\n    &lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;1.3.1.RELEASE&lt;/version&gt;\r\n    \t&lt;/parent&gt;\r\n    \r\n    \t&lt;name&gt;das-boot&lt;/name&gt;\r\n    \t&lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n    \r\n    \t&lt;properties&gt;\r\n    \t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    \t&lt;/properties&gt;\r\n    \r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.flywaydb&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;flyway-core&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n\r\n\r\n**V2__create_shipwreck.sql**\r\n\r\n    -- For H2 DB\r\n    --CREATE TABLE SHIPWRECK(\r\n    --\tID INT AUTO_INCREMENT,\r\n    --\tNAME VARCHAR(255),\r\n    --\tDESCRIPTION VARCHAR(2000),\r\n    --\tCONDITION VARCHAR(255),\r\n    --\tDEPTH INT,\r\n    --\tLATITUDE DOUBLE,\r\n    --\tLONGITUDE DOUBLE,\r\n    --\tYEAR_DISCOVERED INT\r\n    --);\r\n    \r\n    CREATE TABLE `dasboot`.`shipwreck` (\r\n      `ID` INT NOT NULL AUTO_INCREMENT,\r\n      `NAME` VARCHAR(255) NULL,\r\n      `DESCRIPTION` VARCHAR(2000) NULL,\r\n      `CONDITION` VARCHAR(255) NULL,\r\n      `DEPTH` INT NULL,\r\n      `LATITUDE` DOUBLE NULL,\r\n      `LONGITUDE` DOUBLE NULL,\r\n      `YEAR_DISCOVERED` INT NULL,\r\n      PRIMARY KEY (`ID`));\r\n\r\n\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/QXWut.png","title":"Caused by: org.flywaydb.core.api.FlywayException: Validate failed. Migration Checksum mismatch for migration 2","body":"<p>I tried to find the solution for the below problem, but none of them worked for me. I am developing <strong>Angular + Spring Boot</strong> application using <strong>MySQL + flyway</strong>. Please guide whats going wrong here.</p>\n\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flywayInitializer' defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]: Invocation of init method failed; nested exception is org.flywaydb.core.api.FlywayException: Validate failed. Migration Checksum mismatch for migration 2\n-&gt; Applied to database : 1499248173\n-&gt; Resolved locally    : -1729781252\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1578) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:545) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:482) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:296) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1054) ~[spring-context-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:829) ~[spring-context-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:538) ~[spring-context-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:118) ~[spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:764) [spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\n    at org.springframework.boot.SpringApplication.doRun(SpringApplication.java:357) [spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:305) [spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1124) [spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1113) [spring-boot-1.3.1.RELEASE.jar:1.3.1.RELEASE]\n    at com.boot.App.main(App.java:9) [classes/:na]\nCaused by: org.flywaydb.core.api.FlywayException: Validate failed. Migration Checksum mismatch for migration 2\n-&gt; Applied to database : 1499248173\n-&gt; Resolved locally    : -1729781252\n    at org.flywaydb.core.Flyway.doValidate(Flyway.java:1108) ~[flyway-core-3.2.1.jar:na]\n    at org.flywaydb.core.Flyway.access$300(Flyway.java:62) ~[flyway-core-3.2.1.jar:na]\n    at org.flywaydb.core.Flyway$1.execute(Flyway.java:1012) ~[flyway-core-3.2.1.jar:na]\n    at org.flywaydb.core.Flyway$1.execute(Flyway.java:1006) ~[flyway-core-3.2.1.jar:na]\n    at org.flywaydb.core.Flyway.execute(Flyway.java:1418) ~[flyway-core-3.2.1.jar:na]\n    at org.flywaydb.core.Flyway.migrate(Flyway.java:1006) ~[flyway-core-3.2.1.jar:na]\n    at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66) ~[spring-boot-autoconfigure-1.3.1.RELEASE.jar:1.3.1.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1637) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1574) ~[spring-beans-4.2.4.RELEASE.jar:4.2.4.RELEASE]\n    ... 18 common frames omitted\n</code></pre>\n\n<p><strong>application.properties</strong></p>\n\n<pre><code>logging.level.org.springframework.web=DEBUG\n\nserver.port=8080\n\nspring.h2.console.enabled=true\nspring.h2.console.path=/h2\n\n## For H2 DB\n#spring.datasource.url=jdbc:h2:file:~/dasboot\n#spring.datasource.username=sa\n#spring.datasource.password=\n#spring.datasource.driver-class-name=org.h2.Driver\n\n## For MYSQL DB\nspring.datasource.url=jdbc:mysql://localhost:3306/dasboot\nspring.datasource.username=root\nspring.datasource.password=root\nspring.datasource.driver-class-name=com.mysql.jdbc.Driver\n\nspring.datasource.max-active=10\nspring.datasource.max-idle=8\nspring.datasource.max-wait=10000\nspring.datasource.min-evictable-idle-time-millis=1000\nspring.datasource.min-idle=8\nspring.datasource.time-between-eviction-runs-millis=1\n\nflyway.baseline-on-migrate=true\nspring.jpa.hibernate.ddl-auto=false;\n\n#datasource.flyway.url=jdbc:h2:file:~/dasboot\n#datasource.flyway.username=sa\n#datasource.flyway.password=\n#datasource.flyway.driver-class-name=org.h2.Driver\n\n\ndatasource.flyway.url=jdbc:mysql://localhost:3306/dasboot\ndatasource.flyway.username=root\ndatasource.flyway.password=root\ndatasource.flyway.driver-class-name=com.mysql.jdbc.Driver\n</code></pre>\n\n<p><strong>pom.xml</strong></p>\n\n<pre><code>&lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;1.3.1.RELEASE&lt;/version&gt;\n    &lt;/parent&gt;\n\n    &lt;name&gt;das-boot&lt;/name&gt;\n    &lt;url&gt;http://maven.apache.org&lt;/url&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.flywaydb&lt;/groupId&gt;\n            &lt;artifactId&gt;flyway-core&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n\n<p><strong>V2__create_shipwreck.sql</strong></p>\n\n<pre><code>-- For H2 DB\n--CREATE TABLE SHIPWRECK(\n--  ID INT AUTO_INCREMENT,\n--  NAME VARCHAR(255),\n--  DESCRIPTION VARCHAR(2000),\n--  CONDITION VARCHAR(255),\n--  DEPTH INT,\n--  LATITUDE DOUBLE,\n--  LONGITUDE DOUBLE,\n--  YEAR_DISCOVERED INT\n--);\n\nCREATE TABLE `dasboot`.`shipwreck` (\n  `ID` INT NOT NULL AUTO_INCREMENT,\n  `NAME` VARCHAR(255) NULL,\n  `DESCRIPTION` VARCHAR(2000) NULL,\n  `CONDITION` VARCHAR(255) NULL,\n  `DEPTH` INT NULL,\n  `LATITUDE` DOUBLE NULL,\n  `LONGITUDE` DOUBLE NULL,\n  `YEAR_DISCOVERED` INT NULL,\n  PRIMARY KEY (`ID`));\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/QXWut.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/QXWut.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":["java","rest","jersey","jax-rs","spring-restcontroller"],"answers":[{"tags":[],"owner":{"account_id":1014158,"reputation":2646,"user_id":1026104,"display_name":"jan.supol"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693994512,"creation_date":1693994512,"answer_id":77050914,"question_id":77047969,"body_markdown":"Instead of working directly with Servlet Classes, you could rely on the [Jersey Multipart feature][2] that Jersey offers. That should make your life easier.\r\n\r\nThe documentation describes two ways, one Jersey proprietary way for Jersey 2.x and 3.0, and one Jakarta REST 3.1 way, implemented by Jersey 3.1, depending on what Jersey you are on.\r\n\r\n  [2]: https://eclipse-ee4j.github.io/jersey.github.io/documentation/latest31x/media.html#multipart","title":"Cannot get the name of zip file created by jersy api","body":"<p>Instead of working directly with Servlet Classes, you could rely on the <a href=\"https://eclipse-ee4j.github.io/jersey.github.io/documentation/latest31x/media.html#multipart\" rel=\"nofollow noreferrer\">Jersey Multipart feature</a> that Jersey offers. That should make your life easier.</p>\n<p>The documentation describes two ways, one Jersey proprietary way for Jersey 2.x and 3.0, and one Jakarta REST 3.1 way, implemented by Jersey 3.1, depending on what Jersey you are on.</p>\n"},{"tags":[],"owner":{"account_id":28986638,"reputation":29,"user_id":22203324,"display_name":"abdel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1694013631,"creation_date":1694013631,"answer_id":77053315,"question_id":77047969,"body_markdown":"I was resolved the problem like this: \r\n\r\n    httpServletResponse.status = HttpStatus.OK.value()\r\n                httpServletResponse.contentType = &quot;application/octet-stream&quot;\r\n                httpServletResponse.setHeader(&quot;Content-Disposition&quot;, &quot;attachment; filename=\\&quot;&quot; + tmpFile.name + &quot;\\&quot;&quot;)\r\n                Files.newInputStream(tmpFile.toPath()).transferTo(httpServletResponse.outputStream)\r\n                httpServletResponse.outputStream.flush()","title":"Cannot get the name of zip file created by jersy api","body":"<p>I was resolved the problem like this:</p>\n<pre><code>httpServletResponse.status = HttpStatus.OK.value()\n            httpServletResponse.contentType = &quot;application/octet-stream&quot;\n            httpServletResponse.setHeader(&quot;Content-Disposition&quot;, &quot;attachment; filename=\\&quot;&quot; + tmpFile.name + &quot;\\&quot;&quot;)\n            Files.newInputStream(tmpFile.toPath()).transferTo(httpServletResponse.outputStream)\n            httpServletResponse.outputStream.flush()\n</code></pre>\n"}],"owner":{"account_id":28986638,"reputation":29,"user_id":22203324,"display_name":"abdel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77053315,"answer_count":2,"score":0,"last_activity_date":1694013631,"creation_date":1693951082,"question_id":77047969,"body_markdown":"I created jersey rest post api with spring boot to return a zip file with such a filename, with postman i can download the zip file but not with real filename and in the response headers i can&#39;t find Content-disposition key.\r\n\r\nMy code is: \r\n\r\n        @Context\r\n        lateinit var httpServletResponse: HttpServletResponse\r\n    \r\n        @POST\r\n        @Path(&quot;/getRecord&quot;)\r\n        @Produces(&quot;application/zip&quot;, MediaType.APPLICATION_JSON)\r\n        fun getRecord(@RequestBody recordIdentification: RecordIdentificationRequest) {\r\n            val compositeRecord: CompositeRecord = service.getRecordFromRequest(recordIdentification)\r\n            var tmpFile: File? = service.getRecordZip(compositeRecord)\r\n    \r\n            if (tmpFile != null) {\r\n                Files.newInputStream(tmpFile.toPath()).transferTo(httpServletResponse.outputStream)\r\n    \r\n                httpServletResponse.status = HttpStatus.OK.value()\r\n                httpServletResponse.contentType = &quot;application/zip&quot;\r\n                val contentDisposition: ContentDisposition = ContentDisposition.attachment()\r\n                        .filename(tmpFile.name)\r\n                        .build()\r\n                httpServletResponse.setHeader(HttpHeaders.CONTENT_DISPOSITION, contentDisposition.toString())\r\n                httpServletResponse.outputStream.flush()\r\n            }\r\n    \r\n        }\r\n\r\nthe response headers in postman are: \r\n[![enter image description here][1]][1]\r\n\r\nthank&#39;s!\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/VooKU.png","title":"Cannot get the name of zip file created by jersy api","body":"<p>I created jersey rest post api with spring boot to return a zip file with such a filename, with postman i can download the zip file but not with real filename and in the response headers i can't find Content-disposition key.</p>\n<p>My code is:</p>\n<pre><code>    @Context\n    lateinit var httpServletResponse: HttpServletResponse\n\n    @POST\n    @Path(&quot;/getRecord&quot;)\n    @Produces(&quot;application/zip&quot;, MediaType.APPLICATION_JSON)\n    fun getRecord(@RequestBody recordIdentification: RecordIdentificationRequest) {\n        val compositeRecord: CompositeRecord = service.getRecordFromRequest(recordIdentification)\n        var tmpFile: File? = service.getRecordZip(compositeRecord)\n\n        if (tmpFile != null) {\n            Files.newInputStream(tmpFile.toPath()).transferTo(httpServletResponse.outputStream)\n\n            httpServletResponse.status = HttpStatus.OK.value()\n            httpServletResponse.contentType = &quot;application/zip&quot;\n            val contentDisposition: ContentDisposition = ContentDisposition.attachment()\n                    .filename(tmpFile.name)\n                    .build()\n            httpServletResponse.setHeader(HttpHeaders.CONTENT_DISPOSITION, contentDisposition.toString())\n            httpServletResponse.outputStream.flush()\n        }\n\n    }\n</code></pre>\n<p>the response headers in postman are:\n<a href=\"https://i.stack.imgur.com/VooKU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VooKU.png\" alt=\"enter image description here\" /></a></p>\n<p>thank's!</p>\n"},{"tags":["java","oracle19c","ojdbc"],"answers":[{"tags":[],"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694013358,"creation_date":1694012897,"answer_id":77053206,"question_id":77052735,"body_markdown":"You&#39;re not supposed to use `MutableStruct` directly either (probably, if it&#39;s a driver class). The correct way is to use the implementing classes through the Java interfaces, like `java.sql.Struct`. You can see that `oracle.sql.STRUCT` implements `java.sql.Struct`, so you&#39;ll be using that anyway, just through the JDBC interface.\r\n\r\nNothing _prevents_ you from just using the actual classes, but you might use some semi-internal operations that are removed or changed in another version, whereas the JDBC standard interface stays the same.\r\n\r\nLike your linked javadoc says, you can create a JDBC struct with `java.sql.Struct struct = connection.createStruct(...);`, but if you need to use `MutableStruct` then you might have to stick to the driver specific classes.","title":"How to replace oracle.sql.STRUCT with java.sql.Struct, which is used by oracle.jpub.runtime.MutableStruct","body":"<p>You're not supposed to use <code>MutableStruct</code> directly either (probably, if it's a driver class). The correct way is to use the implementing classes through the Java interfaces, like <code>java.sql.Struct</code>. You can see that <code>oracle.sql.STRUCT</code> implements <code>java.sql.Struct</code>, so you'll be using that anyway, just through the JDBC interface.</p>\n<p>Nothing <em>prevents</em> you from just using the actual classes, but you might use some semi-internal operations that are removed or changed in another version, whereas the JDBC standard interface stays the same.</p>\n<p>Like your linked javadoc says, you can create a JDBC struct with <code>java.sql.Struct struct = connection.createStruct(...);</code>, but if you need to use <code>MutableStruct</code> then you might have to stick to the driver specific classes.</p>\n"}],"owner":{"account_id":17426774,"reputation":23,"user_id":12631545,"display_name":"Bittnutz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":151,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":77053206,"answer_count":1,"score":-1,"last_activity_date":1694013358,"creation_date":1694009538,"question_id":77052735,"body_markdown":"Long story short, I have a project, which uses JPublisher to generate code from a PL/SQL package. At the moment, the project is running with ojdbc14.jar + the respective companion jars. However, I have to upgrade the driver to ojdbc8.jar + its&#39; companion jars. At some point, in one of the classes I have the following code snippet:\r\n\r\n    oracle.sql.Datum d = &lt;some value here&gt;;\r\n    MutableStruct struct = new MutableStruct((STRUCT)d, sqlType, factory);\r\n\r\nThe constructor of the MutableStruct takes such arguments: \r\n(STRUCT arg0, int[] arg1, ORADataFactory[] arg2)\r\n\r\nI checked this [article][1] and as you can see, it proposes to use java.sql.Struct instead. However, in this case the MutableStruct doesn&#39;t take such an argument and doesn&#39;t work.\r\n\r\nSo, my question is, whether there is any workaround of avoiding the deprecated STRUCT object in such cases?\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/database/121/JAJDB/oracle/sql/STRUCT.html","title":"How to replace oracle.sql.STRUCT with java.sql.Struct, which is used by oracle.jpub.runtime.MutableStruct","body":"<p>Long story short, I have a project, which uses JPublisher to generate code from a PL/SQL package. At the moment, the project is running with ojdbc14.jar + the respective companion jars. However, I have to upgrade the driver to ojdbc8.jar + its' companion jars. At some point, in one of the classes I have the following code snippet:</p>\n<pre><code>oracle.sql.Datum d = &lt;some value here&gt;;\nMutableStruct struct = new MutableStruct((STRUCT)d, sqlType, factory);\n</code></pre>\n<p>The constructor of the MutableStruct takes such arguments:\n(STRUCT arg0, int[] arg1, ORADataFactory[] arg2)</p>\n<p>I checked this <a href=\"https://docs.oracle.com/database/121/JAJDB/oracle/sql/STRUCT.html\" rel=\"nofollow noreferrer\">article</a> and as you can see, it proposes to use java.sql.Struct instead. However, in this case the MutableStruct doesn't take such an argument and doesn't work.</p>\n<p>So, my question is, whether there is any workaround of avoiding the deprecated STRUCT object in such cases?</p>\n"},{"tags":["java","pdfbox","signature"],"comments":[{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":1,"creation_date":1694014212,"post_id":77053254,"comment_id":135836325,"body_markdown":"Hhmmm, your code is weird, it looks like plugged together only based on matching types, not on semantics... you may want to look at the answers to [this question](https://stackoverflow.com/q/76969040/1729265) and other answers referenced from there.","body":"Hhmmm, your code is weird, it looks like plugged together only based on matching types, not on semantics... you may want to look at the answers to <a href=\"https://stackoverflow.com/q/76969040/1729265\">this question</a> and other answers referenced from there."},{"owner":{"account_id":29380281,"reputation":1,"user_id":22510943,"display_name":"Roshan Pal"},"score":0,"creation_date":1694067852,"post_id":77053254,"comment_id":135842913,"body_markdown":"Thank you so much mkl. I looked at the answers referenced by you. Now I am able to fix the error &quot;Signature is invalid&quot;. Again thanks for your help &#128591;","body":"Thank you so much mkl. I looked at the answers referenced by you. Now I am able to fix the error &quot;Signature is invalid&quot;. Again thanks for your help 🙏"},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1694105353,"post_id":77053254,"comment_id":135850795,"body_markdown":"Great that that helped. Is it ok to mark your question as duplicate of that other question then?","body":"Great that that helped. Is it ok to mark your question as duplicate of that other question then?"},{"owner":{"account_id":29380281,"reputation":1,"user_id":22510943,"display_name":"Roshan Pal"},"score":0,"creation_date":1694148596,"post_id":77053254,"comment_id":135855881,"body_markdown":"Sure sir, you can mark my question  as a duplicate","body":"Sure sir, you can mark my question  as a duplicate"}],"owner":{"account_id":29380281,"reputation":1,"user_id":22510943,"display_name":"Roshan Pal"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1694150104,"answer_count":0,"score":0,"last_activity_date":1694013243,"creation_date":1694013243,"question_id":77053254,"body_markdown":"We are using pdfbox library to sign a document and also integrated HSM service to sign document hash and get signed hash. But the problem is that we are getting an error in Adobe Reader saying &quot;invalid signature as document has been altered since signature was applied.&quot;\r\n\r\nHere is the code snippet for the signature:\r\n\r\n```java\r\npublic void signPdfExternally() throws Exception {\r\n    PDDocument document;\r\n    File pdfToBeSigned;\r\n    File signedPdfFile;\r\n    FileOutputStream output = null;\r\n    byte[] cmsSignature;\r\n    ExternalSigningSupport externalSigningSupport;\r\n    try {\r\n        pdfToBeSigned = new File(&quot;testPdf.pdf&quot;);\r\n        signedPdfFile = new File(pdfToBeSigned.getParent(), pdfToBeSigned.getName().substring(0, pdfToBeSigned.getName().lastIndexOf(&#39;.&#39;)) + &quot;_signed.pdf&quot;);\r\n        document = Loader.loadPDF(pdfToBeSigned);\r\n        output = new FileOutputStream(signedPdfFile);\r\n        loadExternalCert(eSignCertProvider.getCertificateChain());\r\n        extractPrivateKey();\r\n        document.addSignature(signature());\r\n        externalSigningSupport = document.saveIncrementalForExternalSigning(output);\r\n        cmsSignature = sign(externalSigningSupport.getContent());\r\n        externalSigningSupport.setSignature(cmsSignature);\r\n    } catch (Exception ex) {\r\n        ex.printStackTrace();\r\n        throw ex;\r\n    } finally {\r\n        if (output != null) {\r\n            try {\r\n                output.close();\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nprivate PDSignature signature() {\r\n    PDSignature signature = new PDSignature();\r\n    signature.setFilter(PDSignature.FILTER_ADOBE_PPKLITE);\r\n    signature.setSubFilter(PDSignature.SUBFILTER_ADBE_PKCS7_DETACHED);\r\n    signature.setName(&quot;Test User&quot;);\r\n    signature.setLocation(&quot;Some location&quot;);\r\n    signature.setReason(&quot;Testing&quot;);\r\n    signature.setSignDate(Calendar.getInstance());\r\n    return signature;\r\n}\r\n\r\n// Signing document and attaching certificate to the pdf\r\npublic byte[] sign(InputStream content) throws IOException {\r\n    try {\r\n        loadExternalCert(eSignCertProvider.getCertificateChain());\r\n        Security.addProvider(new BouncyCastleProvider());\r\n        // External service that signs document hash and gives back signed hash as a signature\r\n        byte[] signature = HsmServiceProvider.signContent(content.readAllBytes(), &quot;Testing1234&quot;);\r\n        CMSSignedDataGenerator gen = new CMSSignedDataGenerator();\r\n\r\n        List&lt;Certificate&gt; certList = Arrays.asList(externalCertificateChain);\r\n        JcaCertStore certs = new JcaCertStore(certList);\r\n        Attribute attr = new Attribute(NISTObjectIdentifiers.id_sha256, new DERSet(new DEROctetString(content.readAllBytes())));\r\n        ASN1EncodableVector v = new ASN1EncodableVector();\r\n        v.add(attr);\r\n        SignerInfoGeneratorBuilder builder = new SignerInfoGeneratorBuilder(new BcDigestCalculatorProvider()).setSignedAttributeGenerator(new DefaultSignedAttributeTableGenerator(new AttributeTable(v)));\r\n        AlgorithmIdentifier sha256withRSA = new DefaultSignatureAlgorithmIdentifierFinder().find(&quot;SHA256withRSA&quot;);\r\n        CertificateFactory certFactory = CertificateFactory.getInstance(&quot;X.509&quot;);\r\n        InputStream in = new ByteArrayInputStream(externalCertificateChain[0].getEncoded());\r\n        X509Certificate cert = (X509Certificate) certFactory.generateCertificate(in);\r\n        gen.addSignerInfoGenerator(builder.build(new BcRSAContentSignerBuilder(sha256withRSA, new DefaultDigestAlgorithmIdentifierFinder().find(sha256withRSA)).build(PrivateKeyFactory.createKey(this.privateKey.getEncoded())), new JcaX509CertificateHolder(cert)));\r\n        gen.addCertificates(certs);\r\n        CMSSignedData s = gen.generate(new CMSProcessableByteArray(signature), false);\r\n        return s.getEncoded();\r\n    } catch (Exception e) {\r\n        e.printStackTrace();\r\n        throw new IOException(e);\r\n    }\r\n}\r\n\r\nhow to solve document has been altered error","title":"pdfbox external signing. After signing document, open it in adobe reader it says invalid signature as document has been altered","body":"<p>We are using pdfbox library to sign a document and also integrated HSM service to sign document hash and get signed hash. But the problem is that we are getting an error in Adobe Reader saying &quot;invalid signature as document has been altered since signature was applied.&quot;</p>\n<p>Here is the code snippet for the signature:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void signPdfExternally() throws Exception {\n    PDDocument document;\n    File pdfToBeSigned;\n    File signedPdfFile;\n    FileOutputStream output = null;\n    byte[] cmsSignature;\n    ExternalSigningSupport externalSigningSupport;\n    try {\n        pdfToBeSigned = new File(&quot;testPdf.pdf&quot;);\n        signedPdfFile = new File(pdfToBeSigned.getParent(), pdfToBeSigned.getName().substring(0, pdfToBeSigned.getName().lastIndexOf('.')) + &quot;_signed.pdf&quot;);\n        document = Loader.loadPDF(pdfToBeSigned);\n        output = new FileOutputStream(signedPdfFile);\n        loadExternalCert(eSignCertProvider.getCertificateChain());\n        extractPrivateKey();\n        document.addSignature(signature());\n        externalSigningSupport = document.saveIncrementalForExternalSigning(output);\n        cmsSignature = sign(externalSigningSupport.getContent());\n        externalSigningSupport.setSignature(cmsSignature);\n    } catch (Exception ex) {\n        ex.printStackTrace();\n        throw ex;\n    } finally {\n        if (output != null) {\n            try {\n                output.close();\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n}\n\nprivate PDSignature signature() {\n    PDSignature signature = new PDSignature();\n    signature.setFilter(PDSignature.FILTER_ADOBE_PPKLITE);\n    signature.setSubFilter(PDSignature.SUBFILTER_ADBE_PKCS7_DETACHED);\n    signature.setName(&quot;Test User&quot;);\n    signature.setLocation(&quot;Some location&quot;);\n    signature.setReason(&quot;Testing&quot;);\n    signature.setSignDate(Calendar.getInstance());\n    return signature;\n}\n\n// Signing document and attaching certificate to the pdf\npublic byte[] sign(InputStream content) throws IOException {\n    try {\n        loadExternalCert(eSignCertProvider.getCertificateChain());\n        Security.addProvider(new BouncyCastleProvider());\n        // External service that signs document hash and gives back signed hash as a signature\n        byte[] signature = HsmServiceProvider.signContent(content.readAllBytes(), &quot;Testing1234&quot;);\n        CMSSignedDataGenerator gen = new CMSSignedDataGenerator();\n\n        List&lt;Certificate&gt; certList = Arrays.asList(externalCertificateChain);\n        JcaCertStore certs = new JcaCertStore(certList);\n        Attribute attr = new Attribute(NISTObjectIdentifiers.id_sha256, new DERSet(new DEROctetString(content.readAllBytes())));\n        ASN1EncodableVector v = new ASN1EncodableVector();\n        v.add(attr);\n        SignerInfoGeneratorBuilder builder = new SignerInfoGeneratorBuilder(new BcDigestCalculatorProvider()).setSignedAttributeGenerator(new DefaultSignedAttributeTableGenerator(new AttributeTable(v)));\n        AlgorithmIdentifier sha256withRSA = new DefaultSignatureAlgorithmIdentifierFinder().find(&quot;SHA256withRSA&quot;);\n        CertificateFactory certFactory = CertificateFactory.getInstance(&quot;X.509&quot;);\n        InputStream in = new ByteArrayInputStream(externalCertificateChain[0].getEncoded());\n        X509Certificate cert = (X509Certificate) certFactory.generateCertificate(in);\n        gen.addSignerInfoGenerator(builder.build(new BcRSAContentSignerBuilder(sha256withRSA, new DefaultDigestAlgorithmIdentifierFinder().find(sha256withRSA)).build(PrivateKeyFactory.createKey(this.privateKey.getEncoded())), new JcaX509CertificateHolder(cert)));\n        gen.addCertificates(certs);\n        CMSSignedData s = gen.generate(new CMSProcessableByteArray(signature), false);\n        return s.getEncoded();\n    } catch (Exception e) {\n        e.printStackTrace();\n        throw new IOException(e);\n    }\n}\n\nhow to solve document has been altered error\n</code></pre>\n"},{"tags":["java","maven","dependencies"],"comments":[{"owner":{"account_id":15608330,"reputation":1466,"user_id":11260467,"display_name":"Xiidref"},"score":0,"creation_date":1694013551,"post_id":77053213,"comment_id":135836161,"body_markdown":"You can try a `mvn install -nsu` (nsu for no snapshot updates) it should force to use the local repo instead of trying to update each dependency from a remote repository","body":"You can try a <code>mvn install -nsu</code> (nsu for no snapshot updates) it should force to use the local repo instead of trying to update each dependency from a remote repository"},{"owner":{"account_id":13010918,"reputation":462,"user_id":11532975,"display_name":"Adrian Lagartera"},"score":0,"creation_date":1694014226,"post_id":77053213,"comment_id":135836329,"body_markdown":"I think its a few problems, the first one its your settings, the other one its you need user the argument in maven to force it to use the local. A good idea could use a local repository, put your library and all the libraries you need there, The following article explain it step by step https://manios.org/2019/08/21/force-maven-offline-execute-goal-dependencies","body":"I think its a few problems, the first one its your settings, the other one its you need user the argument in maven to force it to use the local. A good idea could use a local repository, put your library and all the libraries you need there, The following article explain it step by step <a href=\"https://manios.org/2019/08/21/force-maven-offline-execute-goal-dependencies\" rel=\"nofollow noreferrer\">manios.org/2019/08/21/&hellip;</a>"},{"owner":{"account_id":350117,"reputation":8663,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":1,"creation_date":1694014335,"post_id":77053213,"comment_id":135836354,"body_markdown":"If you have copied the whole repository and you don&#39;t need anything else, try to compile from the command line using the `-o` switch to force the offline mode.","body":"If you have copied the whole repository and you don&#39;t need anything else, try to compile from the command line using the <code>-o</code> switch to force the offline mode."}],"owner":{"account_id":411369,"reputation":1235,"user_id":783773,"accept_rate":42,"display_name":"Michele"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694012941,"creation_date":1694012941,"question_id":77053213,"body_markdown":"for a customer I should connected to a VPN, connect to a Virtual Remote Desktop (VRD) and finally develop the code from here. The VRD is simply slow, develop the code is frustrating.\r\n\r\nConsidering that the project needs a connection to customer-Nexus repository, I tryed to copy the whole Maven repository from the VRD to the Maven repository in my PC.\r\nBut when I try to compile the project (in IntelliJ) I receive this error:\r\n\r\n    com.foo:bar:pom:1.0 was not found in https://repo.maven.apache.org/maven2 ...\r\n\r\nThe dependency com.foo:bar:1.0 is one downloaded from the customer Nexus repository and it is correctly present in my local Maven repository (by manual copy).\r\n\r\nWhy do Maven start to look for the dependency from the remote repository instead of look for inside my local repository? How can I fix this behaviour?\r\n\r\nMany thanks","title":"How copy dependencies from a Maven repository to another","body":"<p>for a customer I should connected to a VPN, connect to a Virtual Remote Desktop (VRD) and finally develop the code from here. The VRD is simply slow, develop the code is frustrating.</p>\n<p>Considering that the project needs a connection to customer-Nexus repository, I tryed to copy the whole Maven repository from the VRD to the Maven repository in my PC.\nBut when I try to compile the project (in IntelliJ) I receive this error:</p>\n<pre><code>com.foo:bar:pom:1.0 was not found in https://repo.maven.apache.org/maven2 ...\n</code></pre>\n<p>The dependency com.foo:bar:1.0 is one downloaded from the customer Nexus repository and it is correctly present in my local Maven repository (by manual copy).</p>\n<p>Why do Maven start to look for the dependency from the remote repository instead of look for inside my local repository? How can I fix this behaviour?</p>\n<p>Many thanks</p>\n"},{"tags":["java","selenium-webdriver","appium","appium-android","appium-java"],"answers":[{"tags":[],"owner":{"account_id":24958929,"reputation":26,"user_id":18823076,"display_name":"Reyan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694012632,"creation_date":1694010525,"answer_id":77052886,"question_id":77043671,"body_markdown":"Instead of using &quot;appium:app&quot; capability to launch the app, use &quot;appium:appPackage&quot; and &quot;appium:appActivity&quot; to launch specific activity of the app. You can use apps like &quot;Apkinfo&quot; to get the name of activities of the app and provide the desire activity for &quot;appium:appActivity&quot; capcability. Refer the below code snippet for Android App:\r\n\r\n\r\n    UiAutomator2Options op = new UiAutomator2Options();\r\n    \r\n    op.setCapability(&quot;appPackage&quot;, app_package_name);\r\n    op.setCapability(&quot;appActivity&quot;, app_activity_name);\r\n\r\nFor more details you can refer the documentation available here:\r\nhttps://github.com/appium/appium-uiautomator2-driver#app\r\n","title":"How to launch an inbuild app like(Any feature from settings of the device) with the current activity using the appium driver","body":"<p>Instead of using &quot;appium:app&quot; capability to launch the app, use &quot;appium:appPackage&quot; and &quot;appium:appActivity&quot; to launch specific activity of the app. You can use apps like &quot;Apkinfo&quot; to get the name of activities of the app and provide the desire activity for &quot;appium:appActivity&quot; capcability. Refer the below code snippet for Android App:</p>\n<pre><code>UiAutomator2Options op = new UiAutomator2Options();\n\nop.setCapability(&quot;appPackage&quot;, app_package_name);\nop.setCapability(&quot;appActivity&quot;, app_activity_name);\n</code></pre>\n<p>For more details you can refer the documentation available here:\n<a href=\"https://github.com/appium/appium-uiautomator2-driver#app\" rel=\"nofollow noreferrer\">https://github.com/appium/appium-uiautomator2-driver#app</a></p>\n"}],"owner":{"account_id":29370189,"reputation":1,"user_id":22502959,"display_name":"saideep vempati"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694012632,"creation_date":1693909357,"question_id":77043671,"body_markdown":"When I am launching an inbuild app in Android. It navigates to the home page of that application. I want to open the current activity of that application and perform some automation in that page. Is this possible?\r\n\r\nI tried with different methods to launch the app with current activity. But unable to get it. Its navigating to home page when launching the app. I am expecting like is there any way like to set any preferred capabilities to launch the inbuild app in Android with current activity?\r\n","title":"How to launch an inbuild app like(Any feature from settings of the device) with the current activity using the appium driver","body":"<p>When I am launching an inbuild app in Android. It navigates to the home page of that application. I want to open the current activity of that application and perform some automation in that page. Is this possible?</p>\n<p>I tried with different methods to launch the app with current activity. But unable to get it. Its navigating to home page when launching the app. I am expecting like is there any way like to set any preferred capabilities to launch the inbuild app in Android with current activity?</p>\n"},{"tags":["java","spring","jersey","jax-rs"],"answers":[{"tags":[],"owner":{"account_id":1014158,"reputation":2646,"user_id":1026104,"display_name":"jan.supol"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694012146,"creation_date":1694012146,"answer_id":77053099,"question_id":76545953,"body_markdown":"Both [javax.annotation.PostConstruct][1] and [javax.annotation.PreDestroy][2] work for beans managed by Jersey.\r\n\r\nFor the `@Beans` alternatives, you can use [HK2 mechanism][3] for creating beans, or you can use Jersey alternatives with the same names, for instance in [this tutorial][4].\r\n\r\nOr you could have CDI managed environment (such as in the application server), where you can use [CDI producers][5] to produce CDI beans, that could be injected with `@Inject`.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javaee/5/api/javax/annotation/PostConstruct.html\r\n  [2]: https://docs.oracle.com/javaee/5/api/javax/annotation/PreDestroy.html\r\n  [3]: https://eclipse-ee4j.github.io/jersey.github.io/documentation/latest31x/ioc.html#d0e17546\r\n  [4]: https://riptutorial.com/jersey/example/23632/basic-dependency-injection-using-jersey-s-hk2\r\n  [5]: https://docs.jboss.org/cdi/spec/2.0/cdi-spec.html#producer_method","title":"@Bean alternative in jersey","body":"<p>Both <a href=\"https://docs.oracle.com/javaee/5/api/javax/annotation/PostConstruct.html\" rel=\"nofollow noreferrer\">javax.annotation.PostConstruct</a> and <a href=\"https://docs.oracle.com/javaee/5/api/javax/annotation/PreDestroy.html\" rel=\"nofollow noreferrer\">javax.annotation.PreDestroy</a> work for beans managed by Jersey.</p>\n<p>For the <code>@Beans</code> alternatives, you can use <a href=\"https://eclipse-ee4j.github.io/jersey.github.io/documentation/latest31x/ioc.html#d0e17546\" rel=\"nofollow noreferrer\">HK2 mechanism</a> for creating beans, or you can use Jersey alternatives with the same names, for instance in <a href=\"https://riptutorial.com/jersey/example/23632/basic-dependency-injection-using-jersey-s-hk2\" rel=\"nofollow noreferrer\">this tutorial</a>.</p>\n<p>Or you could have CDI managed environment (such as in the application server), where you can use <a href=\"https://docs.jboss.org/cdi/spec/2.0/cdi-spec.html#producer_method\" rel=\"nofollow noreferrer\">CDI producers</a> to produce CDI beans, that could be injected with <code>@Inject</code>.</p>\n"}],"owner":{"account_id":15343705,"reputation":29,"user_id":11069868,"display_name":"Rohit Raj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694012146,"creation_date":1687607900,"question_id":76545953,"body_markdown":"I want to create a bean of thread pools using Executor. In spring I can use @Bean inside @Configuration annotated class. What is the **alternative** in Jersey?\r\n\r\nAlso when the application shuts off then in Spring I can use @PreDestroy in that same configuration class to shut down the thread pool, any alternative to this in Jersey?","title":"@Bean alternative in jersey","body":"<p>I want to create a bean of thread pools using Executor. In spring I can use @Bean inside @Configuration annotated class. What is the <strong>alternative</strong> in Jersey?</p>\n<p>Also when the application shuts off then in Spring I can use @PreDestroy in that same configuration class to shut down the thread pool, any alternative to this in Jersey?</p>\n"},{"tags":["java","ajax","spring","form-data"],"answers":[{"comments":[{"owner":{"account_id":21625975,"reputation":52,"user_id":15950321,"display_name":"jadekim"},"score":0,"creation_date":1693949613,"post_id":77047809,"comment_id":135826588,"body_markdown":"thanks for your comment. as you said, I was able to get key, value.\n`key: &quot;objs&quot;, value: &quot;[{&quot;name&quot;:&quot;n1&quot;, &quot;age&quot;:10}, {&quot;name&quot;:&quot;n2&quot;, &quot;age&quot;:20}];&quot;`\nbut objs still has a null value on the controller.","body":"thanks for your comment. as you said, I was able to get key, value. <code>key: &quot;objs&quot;, value: &quot;[{&quot;name&quot;:&quot;n1&quot;, &quot;age&quot;:10}, {&quot;name&quot;:&quot;n2&quot;, &quot;age&quot;:20}];&quot;</code> but objs still has a null value on the controller."},{"owner":{"account_id":29226450,"reputation":58,"user_id":22391023,"display_name":"Yusuf Khan"},"score":0,"creation_date":1694012032,"post_id":77047809,"comment_id":135835798,"body_markdown":"I just noticed this now - you are using multipart/form-data is your main issue. You should not be using that. multipart/form-data is for file-based requests (like an upload). You should be using application/json.","body":"I just noticed this now - you are using multipart/form-data is your main issue. You should not be using that. multipart/form-data is for file-based requests (like an upload). You should be using application/json."}],"tags":[],"owner":{"account_id":29226450,"reputation":58,"user_id":22391023,"display_name":"Yusuf Khan"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694012120,"creation_date":1693948801,"answer_id":77047809,"question_id":77047244,"body_markdown":"Your request on your Spring backend is expecting a List of &quot;OBJ&quot;. Instead, you are giving multiple &quot;OBJ&quot; objects separately which would construct this:\r\n\r\n - key: &quot;objs[0]&quot;, value: &quot;{&quot;name&quot;:&quot;n1&quot;, &quot;age&quot;:10}\r\n - key: &quot;objs[1]&quot;, value: &quot;{&quot;name&quot;:&quot;n2&quot;, &quot;age&quot;:20}\r\n\r\nInstead, you should be doing:\r\n\r\n    formData.append(&quot;objs&quot;, JSON.stringify(objs));\r\n\r\nWhich will give you what you want:\r\n\r\n - key: &quot;objs&quot;, value: &quot;[{&quot;name&quot;:&quot;n1&quot;, &quot;age&quot;:10}, {&quot;name&quot;:&quot;n2&quot;, &quot;age&quot;:20}];&quot;\r\n\r\nSpring will then know that this is a List of &quot;OBJ&quot; when it is mapping the data in the params to the expected object.\r\n\r\nAdditionally, you are using **multipart/form-data** for *enctype*, which is intended for file-based requests (like a file upload). This should be &quot;application/json&quot; instead.","title":"How to add list of objects when sending formData to a spring server with ajax","body":"<p>Your request on your Spring backend is expecting a List of &quot;OBJ&quot;. Instead, you are giving multiple &quot;OBJ&quot; objects separately which would construct this:</p>\n<ul>\n<li>key: &quot;objs[0]&quot;, value: &quot;{&quot;name&quot;:&quot;n1&quot;, &quot;age&quot;:10}</li>\n<li>key: &quot;objs[1]&quot;, value: &quot;{&quot;name&quot;:&quot;n2&quot;, &quot;age&quot;:20}</li>\n</ul>\n<p>Instead, you should be doing:</p>\n<pre><code>formData.append(&quot;objs&quot;, JSON.stringify(objs));\n</code></pre>\n<p>Which will give you what you want:</p>\n<ul>\n<li>key: &quot;objs&quot;, value: &quot;[{&quot;name&quot;:&quot;n1&quot;, &quot;age&quot;:10}, {&quot;name&quot;:&quot;n2&quot;, &quot;age&quot;:20}];&quot;</li>\n</ul>\n<p>Spring will then know that this is a List of &quot;OBJ&quot; when it is mapping the data in the params to the expected object.</p>\n<p>Additionally, you are using <strong>multipart/form-data</strong> for <em>enctype</em>, which is intended for file-based requests (like a file upload). This should be &quot;application/json&quot; instead.</p>\n"}],"owner":{"account_id":21625975,"reputation":52,"user_id":15950321,"display_name":"jadekim"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":116,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694012120,"creation_date":1693941852,"question_id":77047244,"body_markdown":"The objs value is null in the code written as below. I tried various things, but as a result objs is null. How to add list of objects in FormData??\r\n\r\nWhen checking the payload on the Network tab, objs is as follows.\r\n```\r\nobj[0]: {&quot;name&quot;:&quot;n1&quot;, &quot;age&quot;:10}\r\nobj[1]: {&quot;name&quot;:&quot;n2&quot;, &quot;age&quot;:20}\r\n```\r\n\r\nAlso, the value of objs is as follows when i check from `HttpServletRequest request` and `request.getParameterMap()`.\r\n```\r\n[&quot;{&quot;name&quot;:&quot;n1&quot;, &quot;age&quot;:10}&quot;, &quot;{&quot;name&quot;:&quot;n2&quot;, &quot;age&quot;:20}&quot;]\r\n```\r\n\r\n### javascript\r\n\r\n```\r\n$(&#39;#submit-button&#39;).click(\r\n      function () {\r\n        var objs = [{&quot;name&quot;:&quot;n1&quot;, &quot;age&quot;:10}, {&quot;name&quot;:&quot;n2&quot;, &quot;age&quot;:20}];\r\n      \r\n        var formData = new FormData();\r\n        formData.append(&quot;title&quot;, $(&#39;#title&#39;).val());\r\n        formData.append(&quot;summary&quot;, $(&#39;#summary&#39;).val());\r\n        formData.append(&quot;content&quot;, $(&#39;#content&#39;).val());\r\n        for (var i=0; i &lt; objs.length; i++) {\r\n          formData.append(&quot;objs[&quot; + i + &quot;]&quot;, JSON.stringify(objs[i])); //this is not working\r\n          //formData.append(&quot;objs&quot;, objs[i]); //this is not working\r\n          //formData.append(&quot;objs[&quot; + i + &quot;].name&quot;, objs[i].name); //this is not working\r\n        }\r\n\r\n        $.ajax({\r\n          url: &quot;/example&quot;,\r\n          type: &quot;POST&quot;,\r\n          data: formData,\r\n          enctype: &quot;multipart/form-data&quot;,\r\n          contentType: false,\r\n          processData: false\r\n        });\r\n      }\r\n    )\r\n```\r\n\r\n### DTO in java spring\r\n\r\n```\r\npublic record ExampleRequest(\r\n        @NotBlank\r\n        String title,\r\n        @NotBlank\r\n        String summary,\r\n        @NotBlank\r\n        String content,\r\n        @NotNull\r\n        List&lt;OBJ&gt; objs,\r\n){}\r\n```\r\n\r\n```\r\npublic record OBJ(\r\n    String name,\r\n    Integer age\r\n) {}\r\n```\r\n\r\n### Controller\r\n```\r\n    @PostMapping(&quot;/example&quot;)\r\n    public String example(\r\n            @Validated @ModelAttribute ExampleRequest exampleRequest, //request.objs is null...\r\n            BindingResult bindingResult\r\n    ) {}\r\n```\r\n\r\nI want `var objs = [{&quot;name&quot;:&quot;n1&quot;, &quot;age&quot;:10}, {&quot;name&quot;:&quot;n2&quot;, &quot;age&quot;:20}];` in javascript to be `List&lt;OBJ&gt;` in spring. Help me...\r\n","title":"How to add list of objects when sending formData to a spring server with ajax","body":"<p>The objs value is null in the code written as below. I tried various things, but as a result objs is null. How to add list of objects in FormData??</p>\n<p>When checking the payload on the Network tab, objs is as follows.</p>\n<pre><code>obj[0]: {&quot;name&quot;:&quot;n1&quot;, &quot;age&quot;:10}\nobj[1]: {&quot;name&quot;:&quot;n2&quot;, &quot;age&quot;:20}\n</code></pre>\n<p>Also, the value of objs is as follows when i check from <code>HttpServletRequest request</code> and <code>request.getParameterMap()</code>.</p>\n<pre><code>[&quot;{&quot;name&quot;:&quot;n1&quot;, &quot;age&quot;:10}&quot;, &quot;{&quot;name&quot;:&quot;n2&quot;, &quot;age&quot;:20}&quot;]\n</code></pre>\n<h3>javascript</h3>\n<pre><code>$('#submit-button').click(\n      function () {\n        var objs = [{&quot;name&quot;:&quot;n1&quot;, &quot;age&quot;:10}, {&quot;name&quot;:&quot;n2&quot;, &quot;age&quot;:20}];\n      \n        var formData = new FormData();\n        formData.append(&quot;title&quot;, $('#title').val());\n        formData.append(&quot;summary&quot;, $('#summary').val());\n        formData.append(&quot;content&quot;, $('#content').val());\n        for (var i=0; i &lt; objs.length; i++) {\n          formData.append(&quot;objs[&quot; + i + &quot;]&quot;, JSON.stringify(objs[i])); //this is not working\n          //formData.append(&quot;objs&quot;, objs[i]); //this is not working\n          //formData.append(&quot;objs[&quot; + i + &quot;].name&quot;, objs[i].name); //this is not working\n        }\n\n        $.ajax({\n          url: &quot;/example&quot;,\n          type: &quot;POST&quot;,\n          data: formData,\n          enctype: &quot;multipart/form-data&quot;,\n          contentType: false,\n          processData: false\n        });\n      }\n    )\n</code></pre>\n<h3>DTO in java spring</h3>\n<pre><code>public record ExampleRequest(\n        @NotBlank\n        String title,\n        @NotBlank\n        String summary,\n        @NotBlank\n        String content,\n        @NotNull\n        List&lt;OBJ&gt; objs,\n){}\n</code></pre>\n<pre><code>public record OBJ(\n    String name,\n    Integer age\n) {}\n</code></pre>\n<h3>Controller</h3>\n<pre><code>    @PostMapping(&quot;/example&quot;)\n    public String example(\n            @Validated @ModelAttribute ExampleRequest exampleRequest, //request.objs is null...\n            BindingResult bindingResult\n    ) {}\n</code></pre>\n<p>I want <code>var objs = [{&quot;name&quot;:&quot;n1&quot;, &quot;age&quot;:10}, {&quot;name&quot;:&quot;n2&quot;, &quot;age&quot;:20}];</code> in javascript to be <code>List&lt;OBJ&gt;</code> in spring. Help me...</p>\n"},{"tags":["java","pdf"],"answers":[{"tags":[],"owner":{"account_id":96438,"reputation":2390,"user_id":262114,"accept_rate":69,"display_name":"HamoriZ"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1289314452,"creation_date":1289314452,"answer_id":4135048,"question_id":4134949,"body_markdown":"If you generates the PDF with FOP, then you can use \r\nhttp://xmlgraphics.apache.org/fop/\r\n\r\nYou can count the pages with the help of fop tags.\r\n\r\nIf it is just a simple pdf file from an external source, then you should check iText API.\r\n\r\n\r\n","title":"Determine the number of pages in a PDF file","body":"<p>If you generates the PDF with FOP, then you can use \n<a href=\"http://xmlgraphics.apache.org/fop/\" rel=\"nofollow\">http://xmlgraphics.apache.org/fop/</a></p>\n\n<p>You can count the pages with the help of fop tags.</p>\n\n<p>If it is just a simple pdf file from an external source, then you should check iText API.</p>\n"},{"comments":[{"owner":{"account_id":487921,"reputation":1196,"user_id":1360042,"display_name":"dvlcube"},"score":0,"creation_date":1692333930,"post_id":4135057,"comment_id":135611643,"body_markdown":"Note: you&#39;ll run out of memory if your PDF is larger than the available memory. You can pass a `ReaderProperties` with `setPartialRead(true)` to the constructor so the whole file won&#39;t be loaded into memory.","body":"Note: you&#39;ll run out of memory if your PDF is larger than the available memory. You can pass a <code>ReaderProperties</code> with <code>setPartialRead(true)</code> to the constructor so the whole file won&#39;t be loaded into memory."}],"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"comment_count":1,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1349254606,"creation_date":1289314507,"answer_id":4135057,"question_id":4134949,"body_markdown":"You should be able to do this with &lt;a href=&quot;http://itextpdf.com&quot;&gt;iText&lt;/a&gt;. See &lt;a href=&quot;http://itext-general.2136553.n4.nabble.com/find-the-number-of-pages-of-a-pdf-file-td2165768.html&quot;&gt;this thread&lt;/a&gt; for how to solve the problem&lt;/a&gt;. &lt;a href=&quot;http://itextpdf.com/book/chapter.php?id=2&quot;&gt;Here&lt;/a&gt; is chapter 2, which is incorrectly linked in the thread&lt;/a&gt;:\r\n\r\n\r\n    PdfReader reader = new PdfReader(&quot;SimpleRegistrationForm.pdf&quot;);\r\n    int pages = reader.getNumberOfPages();\r\n","title":"Determine the number of pages in a PDF file","body":"<p>You should be able to do this with <a href=\"http://itextpdf.com\" rel=\"noreferrer\">iText</a>. See <a href=\"http://itext-general.2136553.n4.nabble.com/find-the-number-of-pages-of-a-pdf-file-td2165768.html\" rel=\"noreferrer\">this thread</a> for how to solve the problem. <a href=\"http://itextpdf.com/book/chapter.php?id=2\" rel=\"noreferrer\">Here</a> is chapter 2, which is incorrectly linked in the thread:</p>\n\n<pre><code>PdfReader reader = new PdfReader(\"SimpleRegistrationForm.pdf\");\nint pages = reader.getNumberOfPages();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3877283,"reputation":714,"user_id":3210924,"display_name":"Frank Buss"},"score":3,"creation_date":1552852243,"post_id":4135059,"comment_id":97158357,"body_markdown":"I used this in a utility method to check which documents had less than some number of pages to delete this. But then I had to close the doc with doc.close(), otherwise I couldn&#39;t delete it, because then it is closed only after some time when the doc object is deleted by the GC.","body":"I used this in a utility method to check which documents had less than some number of pages to delete this. But then I had to close the doc with doc.close(), otherwise I couldn&#39;t delete it, because then it is closed only after some time when the doc object is deleted by the GC."},{"owner":{"account_id":487921,"reputation":1196,"user_id":1360042,"display_name":"dvlcube"},"score":0,"creation_date":1692333066,"post_id":4135059,"comment_id":135611580,"body_markdown":"Note: you&#39;ll run out of memory if your PDF is larger than the available memory.","body":"Note: you&#39;ll run out of memory if your PDF is larger than the available memory."},{"owner":{"account_id":1927984,"reputation":357,"user_id":1738007,"display_name":"Tugalsan Karabacak"},"score":0,"creation_date":1693124390,"post_id":4135059,"comment_id":135716589,"body_markdown":"On pdfbox 3.0.0 u may choose to use &quot;var doc = Loader.loadPDF(new RandomAccessReadBufferedFile(pdfFile.toAbsolutePath().toString()))&quot;","body":"On pdfbox 3.0.0 u may choose to use &quot;var doc = Loader.loadPDF(new RandomAccessReadBufferedFile(pdfFile.toAbsolutePath().toStri&zwnj;&#8203;ng()))&quot;"}],"tags":[],"owner":{"account_id":4804,"reputation":268589,"user_id":7412,"accept_rate":96,"display_name":"dogbane"},"comment_count":3,"down_vote_count":1,"up_vote_count":87,"is_accepted":true,"score":86,"last_activity_date":1482764439,"creation_date":1289314530,"answer_id":4135059,"question_id":4134949,"body_markdown":"You can use [Apache PDFBox][2] to load a PDF document and then call the [`getNumberOfPages`][1] method to return the page count.\r\n\r\n    PDDocument doc = PDDocument.load(new File(&quot;file.pdf&quot;));\r\n    int count = doc.getNumberOfPages();\r\n\r\n\r\n[1]: http://pdfbox.apache.org/docs/2.0.3/javadocs/org/apache/pdfbox/pdmodel/PDDocument.html#getNumberOfPages()\r\n[2]: http://pdfbox.apache.org/index.html","title":"Determine the number of pages in a PDF file","body":"<p>You can use <a href=\"http://pdfbox.apache.org/index.html\" rel=\"noreferrer\">Apache PDFBox</a> to load a PDF document and then call the <a href=\"http://pdfbox.apache.org/docs/2.0.3/javadocs/org/apache/pdfbox/pdmodel/PDDocument.html#getNumberOfPages()\" rel=\"noreferrer\"><code>getNumberOfPages</code></a> method to return the page count.</p>\n\n<pre><code>PDDocument doc = PDDocument.load(new File(\"file.pdf\"));\nint count = doc.getNumberOfPages();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":2,"creation_date":1544507339,"post_id":53717864,"comment_id":94289891,"body_markdown":"You might want to add the class of `document` (and the library that class is from).","body":"You might want to add the class of <code>document</code> (and the library that class is from)."},{"owner":{"account_id":4903002,"reputation":1493,"user_id":3950587,"accept_rate":100,"display_name":"Shailesh Vikram Singh"},"score":1,"creation_date":1544507994,"post_id":53717864,"comment_id":94290102,"body_markdown":"@mkl thanks you for valuable suggestion. I have added required information.","body":"@mkl thanks you for valuable suggestion. I have added required information."},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":1,"creation_date":1544509630,"post_id":53717864,"comment_id":94290593,"body_markdown":"Ah, PDFBox. So you essentially propose the same approach as the accepted answer does.","body":"Ah, PDFBox. So you essentially propose the same approach as the accepted answer does."},{"owner":{"account_id":9199016,"reputation":922,"user_id":8860467,"display_name":"Vetrivel PS"},"score":1,"creation_date":1655406162,"post_id":53717864,"comment_id":128331066,"body_markdown":"This should be the accepted answer as it provides clearly the expected answer for OP&#39;s question and gives details about IMPORTS and much more information helpful to many other users. Thanks for this @ShaileshVikramSingh :-)","body":"This should be the accepted answer as it provides clearly the expected answer for OP&#39;s question and gives details about IMPORTS and much more information helpful to many other users. Thanks for this @ShaileshVikramSingh :-)"}],"tags":[],"owner":{"account_id":4903002,"reputation":1493,"user_id":3950587,"accept_rate":100,"display_name":"Shailesh Vikram Singh"},"comment_count":4,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1544507929,"creation_date":1544505951,"answer_id":53717864,"question_id":4134949,"body_markdown":"If you want to get more information about PDF, please use below code. If document does not contain any of the information, it returns null.\r\nThis is pdfbox library of apache.\r\n\r\n    import org.apache.pdfbox.pdmodel.PDDocument;\r\n    import org.apache.pdfbox.pdmodel.PDDocumentInformation;\r\n    \r\n    public class DocumentService {\r\n    \r\n        public void showDocumentInfo(){\r\n    \t\tPDDocument document= PDDocument.load(new File(&quot;file.pdf&quot;));\r\n    \t\tPDDocumentInformation info = document.getDocumentInformation();\r\n    \t\tSystem.out.println( &quot;Page Count=&quot; + document.getNumberOfPages() );\r\n    \t\tSystem.out.println( &quot;Title=&quot; + info.getTitle() );\r\n    \t\tSystem.out.println( &quot;Author=&quot; + info.getAuthor() );\r\n    \t\tSystem.out.println( &quot;Subject=&quot; + info.getSubject() );\r\n    \t\tSystem.out.println( &quot;Keywords=&quot; + info.getKeywords() );\r\n    \t\tSystem.out.println( &quot;Creator=&quot; + info.getCreator() );\r\n    \t\tSystem.out.println( &quot;Producer=&quot; + info.getProducer() );\r\n    \t\tSystem.out.println( &quot;Creation Date=&quot; + info.getCreationDate() );\r\n    \t\tSystem.out.println( &quot;Modification Date=&quot; + info.getModificationDate());\r\n    \t\tSystem.out.println( &quot;Trapped=&quot; + info.getTrapped() ); \r\n        }\r\n    }\r\n\r\n","title":"Determine the number of pages in a PDF file","body":"<p>If you want to get more information about PDF, please use below code. If document does not contain any of the information, it returns null.\nThis is pdfbox library of apache.</p>\n\n<pre><code>import org.apache.pdfbox.pdmodel.PDDocument;\nimport org.apache.pdfbox.pdmodel.PDDocumentInformation;\n\npublic class DocumentService {\n\n    public void showDocumentInfo(){\n        PDDocument document= PDDocument.load(new File(\"file.pdf\"));\n        PDDocumentInformation info = document.getDocumentInformation();\n        System.out.println( \"Page Count=\" + document.getNumberOfPages() );\n        System.out.println( \"Title=\" + info.getTitle() );\n        System.out.println( \"Author=\" + info.getAuthor() );\n        System.out.println( \"Subject=\" + info.getSubject() );\n        System.out.println( \"Keywords=\" + info.getKeywords() );\n        System.out.println( \"Creator=\" + info.getCreator() );\n        System.out.println( \"Producer=\" + info.getProducer() );\n        System.out.println( \"Creation Date=\" + info.getCreationDate() );\n        System.out.println( \"Modification Date=\" + info.getModificationDate());\n        System.out.println( \"Trapped=\" + info.getTrapped() ); \n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22413426,"reputation":11,"user_id":16621843,"display_name":"Anubhav Rawat"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1628498771,"creation_date":1628483363,"answer_id":68706874,"question_id":4134949,"body_markdown":"    int totalPages = 0;\r\n    using (var pdfStream = file.OpenReadStream())\r\n    {\r\n         PdfReader reader = new PdfReader(pdfStream);\r\n         totalPages = reader.NumberOfPages;\r\n    }","title":"Determine the number of pages in a PDF file","body":"<pre><code>int totalPages = 0;\nusing (var pdfStream = file.OpenReadStream())\n{\n     PdfReader reader = new PdfReader(pdfStream);\n     totalPages = reader.NumberOfPages;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13770490,"reputation":107,"user_id":9938083,"display_name":"Sudhir Gaurav"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694011563,"creation_date":1694011563,"answer_id":77053029,"question_id":4134949,"body_markdown":"I have found a solution over google . Please find the solution bellow.\r\n\r\n1.Either download the artifact &quot;spire.pdf&quot; or use the bellow dependency and repo into your pom.xml ,\r\n \r\n \r\n\r\n    &lt;repositories&gt;\r\n        &lt;repository&gt;\r\n            &lt;id&gt;com.e-iceblue&lt;/id&gt;\r\n            &lt;name&gt;e-iceblue&lt;/name&gt;\r\n            &lt;url&gt;https://repo.e-iceblue.com/nexus/content/groups/public/&lt;/url&gt;\r\n        &lt;/repository&gt;\r\n     &lt;/repositories&gt;\r\n    \r\n      &lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;e-iceblue&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spire.pdf&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;9.7.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nuse this link to find latest maven dependency.\r\n[enter link description here][1]\r\n\r\n2. Use java code as bellow ,\r\n\r\n \r\n\r\n       PdfDocument pdf = new PdfDocument(Balance_Sheet_Blank-1.pdf&quot;);\r\n        int numberOfPages=pdf.getPages().getCount();\r\n\r\nHere numberOfPages is the total no of pdf page count .\r\n\r\n\r\n  [1]: https://mvnrepository.com/artifact/e-iceblue/spire.pdf?repo=e-iceblue-maven-public","title":"Determine the number of pages in a PDF file","body":"<p>I have found a solution over google . Please find the solution bellow.</p>\n<p>1.Either download the artifact &quot;spire.pdf&quot; or use the bellow dependency and repo into your pom.xml ,</p>\n<pre><code>&lt;repositories&gt;\n    &lt;repository&gt;\n        &lt;id&gt;com.e-iceblue&lt;/id&gt;\n        &lt;name&gt;e-iceblue&lt;/name&gt;\n        &lt;url&gt;https://repo.e-iceblue.com/nexus/content/groups/public/&lt;/url&gt;\n    &lt;/repository&gt;\n &lt;/repositories&gt;\n\n  &lt;dependency&gt;\n        &lt;groupId&gt;e-iceblue&lt;/groupId&gt;\n        &lt;artifactId&gt;spire.pdf&lt;/artifactId&gt;\n        &lt;version&gt;9.7.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>use this link to find latest maven dependency.\n<a href=\"https://mvnrepository.com/artifact/e-iceblue/spire.pdf?repo=e-iceblue-maven-public\" rel=\"nofollow noreferrer\">enter link description here</a></p>\n<ol start=\"2\">\n<li><p>Use java code as bellow ,</p>\n<pre><code>PdfDocument pdf = new PdfDocument(Balance_Sheet_Blank-1.pdf&quot;);\n int numberOfPages=pdf.getPages().getCount();\n</code></pre>\n</li>\n</ol>\n<p>Here numberOfPages is the total no of pdf page count .</p>\n"}],"owner":{"account_id":25928,"reputation":40525,"user_id":67063,"accept_rate":98,"display_name":"Tony the Pony"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59218,"favorite_count":0,"down_vote_count":0,"up_vote_count":46,"accepted_answer_id":4135059,"answer_count":6,"score":46,"last_activity_date":1694011563,"creation_date":1289313941,"question_id":4134949,"body_markdown":"How can I determine the number of pages in a given PDF file, using a free/open source Java API?","title":"Determine the number of pages in a PDF file","body":"<p>How can I determine the number of pages in a given PDF file, using a free/open source Java API?</p>\n"},{"tags":["java","jakarta-ee","dependency-injection","cdi"],"comments":[{"owner":{"account_id":2843847,"reputation":55833,"user_id":2442804,"accept_rate":80,"display_name":"luk2302"},"score":4,"creation_date":1503846446,"post_id":45906368,"comment_id":78771090,"body_markdown":"What is stopping you from simply trying it?","body":"What is stopping you from simply trying it?"},{"owner":{"account_id":6539656,"reputation":11090,"user_id":5057736,"accept_rate":84,"display_name":"Pavel_K"},"score":0,"creation_date":1503846484,"post_id":45906368,"comment_id":78771105,"body_markdown":"@luk2302 I want to get canonical answer. I searched but couldn&#39;t find.","body":"@luk2302 I want to get canonical answer. I searched but couldn&#39;t find."}],"answers":[{"comments":[{"owner":{"account_id":161255,"reputation":1895,"user_id":381865,"display_name":"Darsstar"},"score":0,"creation_date":1504097348,"post_id":45907999,"comment_id":78879846,"body_markdown":"Initializer methods available in CDI 1.0 too!","body":"Initializer methods available in CDI 1.0 too!"}],"tags":[],"owner":{"account_id":1663022,"reputation":20609,"user_id":1530938,"display_name":"kolossus"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1503857974,"creation_date":1503857974,"answer_id":45907999,"question_id":45906368,"body_markdown":"[`@PostConstruct`](http://docs.jboss.org/cdi/spec/2.0/cdi-spec.html#fields_initializer_methods) is the *last* thing to get executed in the initialization of a given managed bean, relative to its position in the inheritance chain. From the spec\r\n\r\n&gt; The container must ensure that:\r\n&gt;\r\n- Initializer methods (i.e. `@PostConstruct`) declared by a class X in the type hierarchy of the bean are called after all injected fields declared by X or by superclasses of X have been initialized.\r\n&gt;\r\n- Any `@PostConstruct` callback declared by a class X in the type hierarchy of the bean is **called after all initializer methods declared by X or by superclasses of X have been called**, after all injected fields declared by X or by superclasses of X have been initialized.\r\n\r\n**Pro Tip:** With CDI 2.0, [you can use `@Inject` to declare an initializer method](http://docs.jboss.org/cdi/spec/2.0/cdi-spec.html#initializer_methods) as an alternative `@PostConstruct` and the restriction that you can have only one in a given class. The difference here is that `@PostConstruct` is *still* executed last and is the only place you can be guaranteed that all injected components will be available.","title":"Order of @PostConstruct and inheritance","body":"<p><a href=\"http://docs.jboss.org/cdi/spec/2.0/cdi-spec.html#fields_initializer_methods\" rel=\"noreferrer\"><code>@PostConstruct</code></a> is the <em>last</em> thing to get executed in the initialization of a given managed bean, relative to its position in the inheritance chain. From the spec</p>\n\n<blockquote>\n  <p>The container must ensure that:</p>\n  \n  <ul>\n  <li><p>Initializer methods (i.e. <code>@PostConstruct</code>) declared by a class X in the type hierarchy of the bean are called after all injected fields declared by X or by superclasses of X have been initialized.</p></li>\n  <li><p>Any <code>@PostConstruct</code> callback declared by a class X in the type hierarchy of the bean is <strong>called after all initializer methods declared by X or by superclasses of X have been called</strong>, after all injected fields declared by X or by superclasses of X have been initialized.</p></li>\n  </ul>\n</blockquote>\n\n<p><strong>Pro Tip:</strong> With CDI 2.0, <a href=\"http://docs.jboss.org/cdi/spec/2.0/cdi-spec.html#initializer_methods\" rel=\"noreferrer\">you can use <code>@Inject</code> to declare an initializer method</a> as an alternative <code>@PostConstruct</code> and the restriction that you can have only one in a given class. The difference here is that <code>@PostConstruct</code> is <em>still</em> executed last and is the only place you can be guaranteed that all injected components will be available.</p>\n"},{"tags":[],"owner":{"account_id":5697191,"reputation":33,"user_id":4503351,"display_name":"Martin Večeřa"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1620589817,"creation_date":1620589817,"answer_id":67461797,"question_id":45906368,"body_markdown":"I believe that `@PostConstruct` on the parent class is not called. There can be only one `@PostConstruct` method. So the methods of the parent class are not inspected. You need to explicitly call it by `super.doIt()`","title":"Order of @PostConstruct and inheritance","body":"<p>I believe that <code>@PostConstruct</code> on the parent class is not called. There can be only one <code>@PostConstruct</code> method. So the methods of the parent class are not inspected. You need to explicitly call it by <code>super.doIt()</code></p>\n"},{"tags":[],"owner":{"account_id":27601793,"reputation":121,"user_id":21134303,"display_name":"Fhuvi"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1694011394,"creation_date":1694011394,"answer_id":77053004,"question_id":45906368,"body_markdown":"I did some tests and got a different behavior than what was expected after reading the 2 existing answers.\r\n\r\nIn your case, **ONLY** `Foo.doIt()` will be called via the `@PostConstruct`, but it is because of the overriding, not the annotation.\r\n\r\nIf you give different names to the methods of the parent and the child classes (so that there is no method overriding), then **BOTH** methods will be called via the `@PostConstruct` annotation, and the order will be : method from parent class first, and method from child class after.\r\n\r\n(note: i was using Java 8 for this test, but maybe this could depend on the version ?)","title":"Order of @PostConstruct and inheritance","body":"<p>I did some tests and got a different behavior than what was expected after reading the 2 existing answers.</p>\n<p>In your case, <strong>ONLY</strong> <code>Foo.doIt()</code> will be called via the <code>@PostConstruct</code>, but it is because of the overriding, not the annotation.</p>\n<p>If you give different names to the methods of the parent and the child classes (so that there is no method overriding), then <strong>BOTH</strong> methods will be called via the <code>@PostConstruct</code> annotation, and the order will be : method from parent class first, and method from child class after.</p>\n<p>(note: i was using Java 8 for this test, but maybe this could depend on the version ?)</p>\n"}],"owner":{"account_id":6539656,"reputation":11090,"user_id":5057736,"accept_rate":84,"display_name":"Pavel_K"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5493,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":45907999,"answer_count":3,"score":7,"last_activity_date":1694011394,"creation_date":1503846332,"question_id":45906368,"body_markdown":"Let&#39;s suppose we have the following classes\r\n\r\n    public abstract class AbstractFoo {\r\n    \r\n        @PostConstruct\r\n        private void doIt() {\r\n           //\r\n        }\r\n    }\r\n    \r\n    public class Foo extends AbstractFoo {\r\n    \r\n        @PostConstruct\r\n        private void doIt() {\r\n           //\r\n        }\r\n    }\r\nWhen AbstractFoo.doIt() and Foo.doIt() will be called - what is the order?","title":"Order of @PostConstruct and inheritance","body":"<p>Let's suppose we have the following classes</p>\n\n<pre><code>public abstract class AbstractFoo {\n\n    @PostConstruct\n    private void doIt() {\n       //\n    }\n}\n\npublic class Foo extends AbstractFoo {\n\n    @PostConstruct\n    private void doIt() {\n       //\n    }\n}\n</code></pre>\n\n<p>When AbstractFoo.doIt() and Foo.doIt() will be called - what is the order?</p>\n"},{"tags":["java","date"],"comments":[{"owner":{"account_id":3282070,"reputation":3837,"user_id":2762432,"accept_rate":69,"display_name":"steven35"},"score":3,"creation_date":1632223456,"post_id":69267710,"comment_id":122429214,"body_markdown":"That was it. My default locale is `en_GB`. Not sure if this change in behaviour is intentional (it probably is) but it&#39;s very inconvenient.","body":"That was it. My default locale is <code>en_GB</code>. Not sure if this change in behaviour is intentional (it probably is) but it&#39;s very inconvenient."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":4,"creation_date":1632244961,"post_id":69267710,"comment_id":122438466,"body_markdown":"This is why you should use [standardized date formats](https://en.wikipedia.org/wiki/ISO_8601) rather than localiser strings when exchanging date-time values textually.","body":"This is why you should use <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">standardized date formats</a> rather than localiser strings when exchanging date-time values textually."},{"owner":{"account_id":3282070,"reputation":3837,"user_id":2762432,"accept_rate":69,"display_name":"steven35"},"score":1,"creation_date":1636542164,"post_id":69267710,"comment_id":123582935,"body_markdown":"@BasilBourque I&#39;m parsing this from some HTML so obviously it&#39;s not my choice.","body":"@BasilBourque I&#39;m parsing this from some HTML so obviously it&#39;s not my choice."},{"owner":{"account_id":39564,"reputation":10494,"user_id":114196,"accept_rate":80,"display_name":"Niels Basjes"},"score":0,"creation_date":1643795302,"post_id":69267710,"comment_id":125431571,"body_markdown":"Related question: https://stackoverflow.com/questions/70928852/customize-a-locale-in-java/","body":"Related question: <a href=\"https://stackoverflow.com/questions/70928852/customize-a-locale-in-java/\" title=\"customize a locale in java\">stackoverflow.com/questions/70928852/customize-a-locale-in-j&zwnj;&#8203;ava</a>"}],"answers":[{"comments":[{"owner":{"account_id":3282070,"reputation":3837,"user_id":2762432,"accept_rate":69,"display_name":"steven35"},"score":0,"creation_date":1632225192,"post_id":69268271,"comment_id":122429849,"body_markdown":"All of our production servers have GB locale and the code is full of date parsing. I&#39;d vote for consistency over &quot;what looks right&quot; but I guess that&#39;s just my opinion. I appreciate the links.","body":"All of our production servers have GB locale and the code is full of date parsing. I&#39;d vote for consistency over &quot;what looks right&quot; but I guess that&#39;s just my opinion. I appreciate the links."},{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":3,"creation_date":1632225497,"post_id":69268271,"comment_id":122429965,"body_markdown":"@steven35: the problem with consistency in this is that locales can never improve if we value consistency above all else. Basically parsing free-form text dates without very precise specifications (which tend to use numbers) is a risky thing to do no matter what library you use.","body":"@steven35: the problem with consistency in this is that locales can never improve if we value consistency above all else. Basically parsing free-form text dates without very precise specifications (which tend to use numbers) is a risky thing to do no matter what library you use."},{"owner":{"account_id":2139538,"reputation":42521,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":2,"creation_date":1632225807,"post_id":69268271,"comment_id":122430101,"body_markdown":"@steven35 You say you want consistency but locale-related stuff is constantly evolving. Currencies, countries, language, etc, etc, are all fluid. Keeping the data static might make it consistent *between Java versions*, but it becomes inconsistent with reality. They need to update it at some point.","body":"@steven35 You say you want consistency but locale-related stuff is constantly evolving. Currencies, countries, language, etc, etc, are all fluid. Keeping the data static might make it consistent <i>between Java versions</i>, but it becomes inconsistent with reality. They need to update it at some point."},{"owner":{"account_id":7172249,"reputation":8197,"user_id":5479362,"accept_rate":48,"display_name":"9ilsdx 9rvj 0lo"},"score":3,"creation_date":1632227394,"post_id":69268271,"comment_id":122430853,"body_markdown":"@Michael if data were saved in a sane format, thez wouldn&#39;t need update","body":"@Michael if data were saved in a sane format, thez wouldn&#39;t need update"},{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":2,"creation_date":1632228519,"post_id":69268271,"comment_id":122431344,"body_markdown":"Agree with @9ilsdx9rvj0lo here – I don&#39;t expect, for example, the format `uuuu-MM-dd&#39;T&#39;HH:mm:ss` to change for a while.","body":"Agree with @9ilsdx9rvj0lo here – I don&#39;t expect, for example, the format <code>uuuu-MM-dd&#39;T&#39;HH:mm:ss</code> to change for a while."},{"owner":{"account_id":3282070,"reputation":3837,"user_id":2762432,"accept_rate":69,"display_name":"steven35"},"score":0,"creation_date":1636481026,"post_id":69268271,"comment_id":123566934,"body_markdown":"@Michael it&#39;s not always an option","body":"@Michael it&#39;s not always an option"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1636532210,"post_id":69268271,"comment_id":123579053,"body_markdown":"@steven35 name just one comprehensible reason not to use a format like ISO 8601 for persistence.","body":"@steven35 name just one comprehensible reason not to use a format like ISO 8601 for persistence."},{"owner":{"account_id":3282070,"reputation":3837,"user_id":2762432,"accept_rate":69,"display_name":"steven35"},"score":2,"creation_date":1636541978,"post_id":69268271,"comment_id":123582856,"body_markdown":"@Holger Who said this format was for persistence? It&#39;s parsed from a HTML page not a database. Do you know that dates are not always displayed in ISO format?","body":"@Holger Who said this format was for persistence? It&#39;s parsed from a HTML page not a database. Do you know that dates are not always displayed in ISO format?"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1636544803,"post_id":69268271,"comment_id":123583948,"body_markdown":"@steven35 an HTML page that you are trying to parse *is* persistent data. And obviously the wrong approach for what you are trying to do. Yes, “dates are not always displayed in ISO format”. But since you are trying to *parse* that page, that’s irrelevant.","body":"@steven35 an HTML page that you are trying to parse <i>is</i> persistent data. And obviously the wrong approach for what you are trying to do. Yes, “dates are not always displayed in ISO format”. But since you are trying to <i>parse</i> that page, that’s irrelevant."},{"owner":{"account_id":2139538,"reputation":42521,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":1,"creation_date":1636545279,"post_id":69268271,"comment_id":123584113,"body_markdown":"@Holger have to agree with Steven on this. There are obviously valid reasons to parse dates in all forms and they&#39;re not always normalized for a computer. Yes, scraping a website designed for humans is always going to be somewhat brittle, but that doesn&#39;t make it wrong or necessarily suboptimal. If you have no control over the source of your data then sometimes you have to deal with data that&#39;s presented in a way that&#39;s different than you&#39;d ideally like. You can&#39;t just whine to the producer to change it. That&#39;s something most people learn in their first year being a professional developer.","body":"@Holger have to agree with Steven on this. There are obviously valid reasons to parse dates in all forms and they&#39;re not always normalized for a computer. Yes, scraping a website designed for humans is always going to be somewhat brittle, but that doesn&#39;t make it wrong or necessarily suboptimal. If you have no control over the source of your data then sometimes you have to deal with data that&#39;s presented in a way that&#39;s different than you&#39;d ideally like. You can&#39;t just whine to the producer to change it. That&#39;s something most people learn in their first year being a professional developer."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1636546691,"post_id":69268271,"comment_id":123584634,"body_markdown":"@Michael if you know what you are doing, you know that you can’t expect external data to match exactly the pattern provided by the locale implementation of your local system. Otherwise, you end up with a software that breaks when a date string contains “Sept” instead of “Sep” or vice versa.","body":"@Michael if you know what you are doing, you know that you can’t expect external data to match exactly the pattern provided by the locale implementation of your local system. Otherwise, you end up with a software that breaks when a date string contains “Sept” instead of “Sep” or vice versa."},{"owner":{"account_id":2139538,"reputation":42521,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":1,"creation_date":1636547721,"post_id":69268271,"comment_id":123585072,"body_markdown":"@Holger Yes, so the probable solution to that would be to specify a Locale which matches the source. Your parser will still be subject the source data changing format (when scraping something designed for humans, that&#39;s unavoidable), but at least *your code* is portable. Omitting a Locale is a common mistake that&#39;s easily made because the API doesn&#39;t rigidly enforce you to do so. The solution is **not** necessarily anything to do with changing the format (e.g. to ISO), because there are perfectly valid scenarios when you simply can&#39;t.","body":"@Holger Yes, so the probable solution to that would be to specify a Locale which matches the source. Your parser will still be subject the source data changing format (when scraping something designed for humans, that&#39;s unavoidable), but at least <i>your code</i> is portable. Omitting a Locale is a common mistake that&#39;s easily made because the API doesn&#39;t rigidly enforce you to do so. The solution is <b>not</b> necessarily anything to do with changing the format (e.g. to ISO), because there are perfectly valid scenarios when you simply can&#39;t."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1636548237,"post_id":69268271,"comment_id":123585279,"body_markdown":"Well, obviously, specifying the locale wasn’t sufficient in the OP’s case. And [you said yourself](https://stackoverflow.com/questions/69267710/69268271?noredirect=1#comment122430101_69268271) why such an approach isn’t sufficient.","body":"Well, obviously, specifying the locale wasn’t sufficient in the OP’s case. And <a href=\"https://stackoverflow.com/questions/69267710/69268271?noredirect=1#comment122430101_69268271\">you said yourself</a> why such an approach isn’t sufficient."},{"owner":{"account_id":2139538,"reputation":42521,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":2,"creation_date":1636549120,"post_id":69268271,"comment_id":123585643,"body_markdown":"@Holger Suppose OP is in the UK where we use &#39;Sept&#39;, and the source website they are trying to scrape is American where they use &#39;Sep&#39;. In that case, the bug is that they were relying on their default Locale for parsing which did not match the source Locale. What I was saying in that comment is that, because language is fluid, of course you can&#39;t expect a solution like this to work forever. But tasks like scraping websites are not solutions you should *ever* expect to work forever. They are *inherently* brittle. That does not invalidate them. Sometimes scraping a website is the best you can do","body":"@Holger Suppose OP is in the UK where we use &#39;Sept&#39;, and the source website they are trying to scrape is American where they use &#39;Sep&#39;. In that case, the bug is that they were relying on their default Locale for parsing which did not match the source Locale. What I was saying in that comment is that, because language is fluid, of course you can&#39;t expect a solution like this to work forever. But tasks like scraping websites are not solutions you should <i>ever</i> expect to work forever. They are <i>inherently</i> brittle. That does not invalidate them. Sometimes scraping a website is the best you can do"},{"owner":{"account_id":2139538,"reputation":42521,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":1,"creation_date":1636549358,"post_id":69268271,"comment_id":123585758,"body_markdown":"@Holger Have you seriously never parsed anything with a computer that wasn&#39;t *specifically designed* to be parsed by a computer?","body":"@Holger Have you seriously never parsed anything with a computer that wasn&#39;t <i>specifically designed</i> to be parsed by a computer?"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1636550887,"post_id":69268271,"comment_id":123586455,"body_markdown":"@Michael you are saying “you can&#39;t expect a solution like this to work forever” and I’m saying “you can&#39;t even expect a solution like this to work a second time&#185;”. Not so much different in the context of an OP assuming that this worked forever. The problem is not that the OP had to parse data not designed to be parsed by a computer. The problem is the approach chosen for the task.&#160;—&#160;&#185; because what happened with updating to Java&#160;17 could have happened with any other tiny change in the environment too (some Java implementations use the operating system’s locale data, for example).","body":"@Michael you are saying “you can&#39;t expect a solution like this to work forever” and I’m saying “you can&#39;t even expect a solution like this to work a second time&#185;”. Not so much different in the context of an OP assuming that this worked forever. The problem is not that the OP had to parse data not designed to be parsed by a computer. The problem is the approach chosen for the task. — &#185; because what happened with updating to Java 17 could have happened with any other tiny change in the environment too (some Java implementations use the operating system’s locale data, for example)."},{"owner":{"account_id":2139538,"reputation":42521,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":1,"creation_date":1636551874,"post_id":69268271,"comment_id":123586917,"body_markdown":"@Holger &quot;*The problem is not that the OP had to parse data not designed to be parsed by a computer*&quot; That is quite literally the problem. If you can&#39;t see that then we are just wasting each other&#39;s time. &quot;*The problem is the approach chosen for the task*&quot; Name a solution for parsing a human-readable string that doesn&#39;t suffer from the same issues. There isn&#39;t one, but I&#39;ll wait.","body":"@Holger &quot;<i>The problem is not that the OP had to parse data not designed to be parsed by a computer</i>&quot; That is quite literally the problem. If you can&#39;t see that then we are just wasting each other&#39;s time. &quot;<i>The problem is the approach chosen for the task</i>&quot; Name a solution for parsing a human-readable string that doesn&#39;t suffer from the same issues. There isn&#39;t one, but I&#39;ll wait."},{"owner":{"account_id":3282070,"reputation":3837,"user_id":2762432,"accept_rate":69,"display_name":"steven35"},"score":0,"creation_date":1636552961,"post_id":69268271,"comment_id":123587486,"body_markdown":"@Michael this question and the accepted answer have the potential to help a lot of people in the UK as the adoption of Java 17 grows but Holger managed to turn the comment section into an irrelevant generic lecture on how to persist dates in a database which most people are already familiar with.","body":"@Michael this question and the accepted answer have the potential to help a lot of people in the UK as the adoption of Java 17 grows but Holger managed to turn the comment section into an irrelevant generic lecture on how to persist dates in a database which most people are already familiar with."}],"tags":[],"owner":{"account_id":2139538,"reputation":42521,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"comment_count":18,"down_vote_count":1,"up_vote_count":33,"is_accepted":true,"score":32,"last_activity_date":1632244552,"creation_date":1632224456,"answer_id":69268271,"question_id":69267710,"body_markdown":"It seems to be that in the en_GB locale, the short form of September is now &quot;Sept&quot;, not &quot;Sep&quot;. All the other months are the same 3 letters abbreviations as in en_US. Kind of makes sense. As a Brit, &quot;Sep&quot; looks wrong to me.\r\n\r\nThis is the ticket: https://bugs.openjdk.java.net/browse/JDK-8251317\r\n\r\nIt wasn&#39;t a conscious decision by the JDK authors. The locale data used by default in Java comes from [*Common Locale Data Repository (CLDR)*](https://en.wikipedia.org/wiki/Common_Locale_Data_Repository), which is a project by the [Unicode Consortium](https://en.wikipedia.org/wiki/Unicode_Consortium). Newer versions of Java come with newer versions of the CLDR. So you may occasionally see a change in locale behavior. So the change you encountered is a feature, not a bug. \r\n\r\nYours is just one of many small tweaks.\r\n\r\nHere&#39;s the specific change in the PR which broke it for you: \r\nhttps://github.com/openjdk/jdk/pull/1279/files#diff-97210acd6f77c4f4979c43445d60ba1c369f058230e41177dceca697800b1fa2R116 \r\n","title":"September&#39;s short form &quot;Sep&quot; no longer parses in Java 17 in en_GB locale","body":"<p>It seems to be that in the en_GB locale, the short form of September is now &quot;Sept&quot;, not &quot;Sep&quot;. All the other months are the same 3 letters abbreviations as in en_US. Kind of makes sense. As a Brit, &quot;Sep&quot; looks wrong to me.</p>\n<p>This is the ticket: <a href=\"https://bugs.openjdk.java.net/browse/JDK-8251317\" rel=\"noreferrer\">https://bugs.openjdk.java.net/browse/JDK-8251317</a></p>\n<p>It wasn't a conscious decision by the JDK authors. The locale data used by default in Java comes from <a href=\"https://en.wikipedia.org/wiki/Common_Locale_Data_Repository\" rel=\"noreferrer\"><em>Common Locale Data Repository (CLDR)</em></a>, which is a project by the <a href=\"https://en.wikipedia.org/wiki/Unicode_Consortium\" rel=\"noreferrer\">Unicode Consortium</a>. Newer versions of Java come with newer versions of the CLDR. So you may occasionally see a change in locale behavior. So the change you encountered is a feature, not a bug.</p>\n<p>Yours is just one of many small tweaks.</p>\n<p>Here's the specific change in the PR which broke it for you:\n<a href=\"https://github.com/openjdk/jdk/pull/1279/files#diff-97210acd6f77c4f4979c43445d60ba1c369f058230e41177dceca697800b1fa2R116\" rel=\"noreferrer\">https://github.com/openjdk/jdk/pull/1279/files#diff-97210acd6f77c4f4979c43445d60ba1c369f058230e41177dceca697800b1fa2R116</a></p>\n"},{"tags":[],"owner":{"account_id":2073393,"reputation":2457,"user_id":1847378,"display_name":"AndrewL"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1659716800,"creation_date":1659716800,"answer_id":73252782,"question_id":69267710,"body_markdown":"Aside from the arguments of whether parsing text (from external legacy sources) for date/times is a good thing, or whether standards should be allowed to evolve versus backward compatibility...\r\n\r\na practical fix is to switch `Locale.UK` to `Locale.US`, for parsing `Sep 29, 1988` or `30-Sep-2020` etc.","title":"September&#39;s short form &quot;Sep&quot; no longer parses in Java 17 in en_GB locale","body":"<p>Aside from the arguments of whether parsing text (from external legacy sources) for date/times is a good thing, or whether standards should be allowed to evolve versus backward compatibility...</p>\n<p>a practical fix is to switch <code>Locale.UK</code> to <code>Locale.US</code>, for parsing <code>Sep 29, 1988</code> or <code>30-Sep-2020</code> etc.</p>\n"},{"comments":[{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":2,"creation_date":1694024433,"post_id":77052861,"comment_id":135838284,"body_markdown":"It may seem like nitpicking, but I find its consequences important: When you mention `Date` and `java.text.ParseException`, it sounds like you are assuming `SimpleDateFormat` and/or `DateFormat` for formatting and parsing. The OP did not use them, and you should not either. They are notoriously troublesome classes and fortunately supplanted by java.time, the modern Java date and time API, a decade ago, so long outdated.","body":"It may seem like nitpicking, but I find its consequences important: When you mention <code>Date</code> and <code>java.text.ParseException</code>, it sounds like you are assuming <code>SimpleDateFormat</code> and/or <code>DateFormat</code> for formatting and parsing. The OP did not use them, and you should not either. They are notoriously troublesome classes and fortunately supplanted by java.time, the modern Java date and time API, a decade ago, so long outdated."}],"tags":[],"owner":{"account_id":29380069,"reputation":1,"user_id":22510776,"display_name":"Kapil Garg"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694010726,"creation_date":1694010324,"answer_id":77052861,"question_id":69267710,"body_markdown":"There are other potential cases where you will face issues issues due to this\r\nlike communicating between 2 versions of Java.\r\n\r\nIf your Java 17 Application is serializing an entity which has a Date field, and if your default locale is set to UK, the serialized data field in Pojo will be &quot;DD Sept YYYY&quot;.\r\n\r\nWhen this POJO is transferred over wire for consumption by another application build on lower version of Java, it will throw a java.text.ParseException exception.\r\n\r\nBefore publishing any data - Message or API request, you need to explicitly use a locale which does not convert your date fields to &quot;Sept&quot;","title":"September&#39;s short form &quot;Sep&quot; no longer parses in Java 17 in en_GB locale","body":"<p>There are other potential cases where you will face issues issues due to this\nlike communicating between 2 versions of Java.</p>\n<p>If your Java 17 Application is serializing an entity which has a Date field, and if your default locale is set to UK, the serialized data field in Pojo will be &quot;DD Sept YYYY&quot;.</p>\n<p>When this POJO is transferred over wire for consumption by another application build on lower version of Java, it will throw a java.text.ParseException exception.</p>\n<p>Before publishing any data - Message or API request, you need to explicitly use a locale which does not convert your date fields to &quot;Sept&quot;</p>\n"}],"owner":{"account_id":3282070,"reputation":3837,"user_id":2762432,"accept_rate":69,"display_name":"steven35"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6202,"favorite_count":0,"down_vote_count":0,"up_vote_count":26,"accepted_answer_id":69268271,"answer_count":3,"score":26,"last_activity_date":1694010726,"creation_date":1632221891,"question_id":69267710,"body_markdown":"This works with Java 11 but does not work with Java 17\r\n\r\n    DateTimeFormatter format = DateTimeFormatter.ofPattern(&quot;MMM dd, yyyy&quot;)\r\n        .withLocale(Locale.UK);\r\n    format.parse(&quot;Sep 29, 1988&quot;);\r\n\r\nJava 17 stacktrace:\r\n\r\n    Exception in thread &quot;main&quot; java.time.format.DateTimeParseException: Text &#39;Sep 29, 1988&#39; could not be parsed at index 0\r\n\tat java.base/java.time.format.DateTimeFormatter.parseResolved0(DateTimeFormatter.java:2052)\r\n\tat java.base/java.time.format.DateTimeFormatter.parse(DateTimeFormatter.java:1880)\r\n\r\nMy Java version:\r\n\r\n    openjdk version &quot;17&quot; 2021-09-14 LTS\r\n    OpenJDK Runtime Environment Zulu17.28+13-CA (build 17+35-LTS)\r\n    OpenJDK 64-Bit Server VM Zulu17.28+13-CA (build 17+35-LTS, mixed mode, sharing)\r\n\r\nWhat has changed?","title":"September&#39;s short form &quot;Sep&quot; no longer parses in Java 17 in en_GB locale","body":"<p>This works with Java 11 but does not work with Java 17</p>\n<pre><code>DateTimeFormatter format = DateTimeFormatter.ofPattern(&quot;MMM dd, yyyy&quot;)\n    .withLocale(Locale.UK);\nformat.parse(&quot;Sep 29, 1988&quot;);\n</code></pre>\n<p>Java 17 stacktrace:</p>\n<pre><code>Exception in thread &quot;main&quot; java.time.format.DateTimeParseException: Text 'Sep 29, 1988' could not be parsed at index 0\nat java.base/java.time.format.DateTimeFormatter.parseResolved0(DateTimeFormatter.java:2052)\nat java.base/java.time.format.DateTimeFormatter.parse(DateTimeFormatter.java:1880)\n</code></pre>\n<p>My Java version:</p>\n<pre><code>openjdk version &quot;17&quot; 2021-09-14 LTS\nOpenJDK Runtime Environment Zulu17.28+13-CA (build 17+35-LTS)\nOpenJDK 64-Bit Server VM Zulu17.28+13-CA (build 17+35-LTS, mixed mode, sharing)\n</code></pre>\n<p>What has changed?</p>\n"},{"tags":["java","postgresql","kotlin","spring-data-jpa","type-conversion"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1694000831,"post_id":77051101,"comment_id":135833051,"body_markdown":"*... which is BIGINT type in database* It shouldn&#39;t be. That makes no sense, since phone numbers are not numbers. They are strings","body":"<i>... which is BIGINT type in database</i> It shouldn&#39;t be. That makes no sense, since phone numbers are not numbers. They are strings"}],"answers":[{"comments":[{"owner":{"account_id":29378475,"reputation":11,"user_id":22509514,"display_name":"Алексей Тавадян"},"score":0,"creation_date":1693997823,"post_id":77051139,"comment_id":135832518,"body_markdown":"Seems like I don&#39;t have required `javax.persistence` library, but I&#39;ve found org.springframework.data.convert.WritingConverter and ReadingConverter, can I use them in my case?","body":"Seems like I don&#39;t have required <code>javax.persistence</code> library, but I&#39;ve found org.springframework.data.convert.WritingConverter and ReadingConverter, can I use them in my case?"},{"owner":{"account_id":16368999,"reputation":796,"user_id":11822687,"display_name":"Amjad Shahzad"},"score":0,"creation_date":1693999398,"post_id":77051139,"comment_id":135832786,"body_markdown":"Yes, you can use Spring Data&#39;s `WritingConverter` and `ReadingConverter` annotations to define custom converters for your data types in Spring Data applications. While these annotations are typically used for converting data between your domain objects and database representations, they can also be used for other types of data conversion needs within your application.","body":"Yes, you can use Spring Data&#39;s <code>WritingConverter</code> and <code>ReadingConverter</code> annotations to define custom converters for your data types in Spring Data applications. While these annotations are typically used for converting data between your domain objects and database representations, they can also be used for other types of data conversion needs within your application."},{"owner":{"account_id":29378475,"reputation":11,"user_id":22509514,"display_name":"Алексей Тавадян"},"score":0,"creation_date":1693999573,"post_id":77051139,"comment_id":135832826,"body_markdown":"Can you please provide an example? I can&#39;t figure out how to apply them","body":"Can you please provide an example? I can&#39;t figure out how to apply them"},{"owner":{"account_id":16368999,"reputation":796,"user_id":11822687,"display_name":"Amjad Shahzad"},"score":0,"creation_date":1693999646,"post_id":77051139,"comment_id":135832838,"body_markdown":"`@WritingConverter\nclass YourWritingConverter : Converter&lt;YourSourceType, YourTargetType&gt; {\n    override fun convert(source: YourSourceType): YourTargetType {\n        // Implement your conversion logic here\n    }\n}\n\n@ReadingConverter\nclass YourReadingConverter : Converter&lt;YourSourceType, YourTargetType&gt; {\n    override fun convert(source: YourSourceType): YourTargetType {\n        // Implement your conversion logic here\n    }\n}`","body":"<code>@WritingConverter class YourWritingConverter : Converter&lt;YourSourceType, YourTargetType&gt; {     override fun convert(source: YourSourceType): YourTargetType {         &#47;&#47; Implement your conversion logic here     } }  @ReadingConverter class YourReadingConverter : Converter&lt;YourSourceType, YourTargetType&gt; {     override fun convert(source: YourSourceType): YourTargetType {         &#47;&#47; Implement your conversion logic here     } }</code>"},{"owner":{"account_id":29378475,"reputation":11,"user_id":22509514,"display_name":"Алексей Тавадян"},"score":0,"creation_date":1693999812,"post_id":77051139,"comment_id":135832866,"body_markdown":"And they will work automatically?","body":"And they will work automatically?"},{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":0,"creation_date":1694000115,"post_id":77051139,"comment_id":135832918,"body_markdown":"No they won&#39;t work, because the error is coming from Postgres, not Spring. The smartest thing to do would be to change the column type to `TEXT` and fire the guy who thinks that phone numbers are to be stored as numbers.","body":"No they won&#39;t work, because the error is coming from Postgres, not Spring. The smartest thing to do would be to change the column type to <code>TEXT</code> and fire the guy who thinks that phone numbers are to be stored as numbers."},{"owner":{"account_id":29378475,"reputation":11,"user_id":22509514,"display_name":"Алексей Тавадян"},"score":0,"creation_date":1694000238,"post_id":77051139,"comment_id":135832944,"body_markdown":"this was done in order to optimize performance while searching by phone column.","body":"this was done in order to optimize performance while searching by phone column."}],"tags":[],"owner":{"account_id":16368999,"reputation":796,"user_id":11822687,"display_name":"Amjad Shahzad"},"comment_count":7,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693996797,"creation_date":1693996797,"answer_id":77051139,"question_id":77051101,"body_markdown":"To map a PostgreSQL BIGINT column to a Kotlin String field in Spring Data without changing types, you can use a custom attribute converter. Attribute converters are used to convert database column types to Java/Kotlin types and vice versa.\r\n\r\nHere&#39;s how you can create a custom attribute converter for your case:\r\n\r\n1. Create a Kotlin class for your custom attribute converter. This class should implement the `javax.persistence.AttributeConverter` interface. In your case, you want to convert between `Long` (BIGINT in Kotlin) and `String`. Here&#39;s an example:\r\n\r\n```kotlin\r\nimport javax.persistence.AttributeConverter\r\nimport javax.persistence.Converter\r\n\r\n@Converter(autoApply = true)\r\nclass BigIntToStringConverter : AttributeConverter&lt;Long, String&gt; {\r\n\r\n    override fun convertToDatabaseColumn(attribute: Long?): String? {\r\n        return attribute?.toString()\r\n    }\r\n\r\n    override fun convertToEntityAttribute(dbData: String?): Long? {\r\n        return dbData?.toLong()\r\n    }\r\n}\r\n```\r\n\r\n2. Annotate the `BigIntToStringConverter` class with `@Converter` and `autoApply = true`. This tells JPA to automatically apply this converter to all attributes of type `Long` that are mapped to `String` in your entities.\r\n\r\n3. In your entity class, annotate the `phone` field with `@Column` to specify the column name if it&#39;s different from the attribute name. Here&#39;s an example:\r\n\r\n```kotlin\r\nimport javax.persistence.Column\r\nimport javax.persistence.Entity\r\nimport javax.persistence.Id\r\nimport javax.persistence.Table\r\n\r\n@Entity\r\n@Table(name = &quot;your_table_name&quot;)\r\ndata class YourEntity(\r\n    @Id\r\n    val id: Long,\r\n\r\n    @Column(name = &quot;phone&quot;)\r\n    val phone: String\r\n)\r\n```\r\n\r\nWith this setup, Spring Data should be able to handle the conversion between BIGINT and String automatically when you retrieve data from the database.\r\n\r\nMake sure to replace `your_table_name` with the actual name of your table and adapt the entity class to match your specific database schema.","title":"How to write bigint value from Postgres to String kotlin field?","body":"<p>To map a PostgreSQL BIGINT column to a Kotlin String field in Spring Data without changing types, you can use a custom attribute converter. Attribute converters are used to convert database column types to Java/Kotlin types and vice versa.</p>\n<p>Here's how you can create a custom attribute converter for your case:</p>\n<ol>\n<li>Create a Kotlin class for your custom attribute converter. This class should implement the <code>javax.persistence.AttributeConverter</code> interface. In your case, you want to convert between <code>Long</code> (BIGINT in Kotlin) and <code>String</code>. Here's an example:</li>\n</ol>\n<pre class=\"lang-kotlin prettyprint-override\"><code>import javax.persistence.AttributeConverter\nimport javax.persistence.Converter\n\n@Converter(autoApply = true)\nclass BigIntToStringConverter : AttributeConverter&lt;Long, String&gt; {\n\n    override fun convertToDatabaseColumn(attribute: Long?): String? {\n        return attribute?.toString()\n    }\n\n    override fun convertToEntityAttribute(dbData: String?): Long? {\n        return dbData?.toLong()\n    }\n}\n</code></pre>\n<ol start=\"2\">\n<li><p>Annotate the <code>BigIntToStringConverter</code> class with <code>@Converter</code> and <code>autoApply = true</code>. This tells JPA to automatically apply this converter to all attributes of type <code>Long</code> that are mapped to <code>String</code> in your entities.</p>\n</li>\n<li><p>In your entity class, annotate the <code>phone</code> field with <code>@Column</code> to specify the column name if it's different from the attribute name. Here's an example:</p>\n</li>\n</ol>\n<pre class=\"lang-kotlin prettyprint-override\"><code>import javax.persistence.Column\nimport javax.persistence.Entity\nimport javax.persistence.Id\nimport javax.persistence.Table\n\n@Entity\n@Table(name = &quot;your_table_name&quot;)\ndata class YourEntity(\n    @Id\n    val id: Long,\n\n    @Column(name = &quot;phone&quot;)\n    val phone: String\n)\n</code></pre>\n<p>With this setup, Spring Data should be able to handle the conversion between BIGINT and String automatically when you retrieve data from the database.</p>\n<p>Make sure to replace <code>your_table_name</code> with the actual name of your table and adapt the entity class to match your specific database schema.</p>\n"}],"owner":{"account_id":29378475,"reputation":11,"user_id":22509514,"display_name":"Алексей Тавадян"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":99,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1694010704,"creation_date":1693996459,"question_id":77051101,"body_markdown":"I&#39;m using kotlin with spring data. I have a table with column &quot;phone&quot; which is **BIGINT** type in database, but in my @Table class this field has **String** type (`val phone: String`). \r\nSo when I try to get some records from DB using spring data repository, I get `PostgresqlBadGrammarException: operator does not exist: bigint = character varying`. \r\nHow can I fix it without changing types? I believe there must be some annotation converters or something.  \r\n\r\nI&#39;ve tried to create custom query in spring data repository and cast selection result to varchar - &quot;`SELECT phone::varchar from table...`&quot; but it does not work.\r\n\r\n**UPD**\r\nI managed to configure custom converter: \r\n\r\n    @Configuration\r\n    @EnableR2dbcRepositories\r\n    class R2dbcConfiguration {\r\n        @Bean\r\n        fun r2dbcCustomConversions(\r\n            stringToBigIntConverter: StringToBigIntConverter,\r\n            bigIntToStringConverter: BigIntToStringConverter\r\n        ): R2dbcCustomConversions {\r\n            return R2dbcCustomConversions(listOf(stringToBigIntConverter, bigIntToStringConverter))\r\n        }\r\n    }\r\nCustom converters: \r\n\r\n    @Component\r\n    @WritingConverter\r\n    class BigIntToStringConverter: Converter&lt;Long, String&gt; {\r\n        override fun convert(source: Long): String {\r\n            return source.toString()\r\n        }\r\n\r\n    @Component\r\n    @WritingConverter\r\n    class StringToBigIntConverter: Converter&lt;String, Long&gt; {\r\n        override fun convert(source: String): Long {\r\n            return source.toLong()\r\n        }\r\n    }\r\n\r\nBut now it tries to convert every String field to BIGINT and vice versa. How can I apply converter only for specific field in specific entity?","title":"How to write bigint value from Postgres to String kotlin field?","body":"<p>I'm using kotlin with spring data. I have a table with column &quot;phone&quot; which is <strong>BIGINT</strong> type in database, but in my @Table class this field has <strong>String</strong> type (<code>val phone: String</code>).\nSo when I try to get some records from DB using spring data repository, I get <code>PostgresqlBadGrammarException: operator does not exist: bigint = character varying</code>.\nHow can I fix it without changing types? I believe there must be some annotation converters or something.</p>\n<p>I've tried to create custom query in spring data repository and cast selection result to varchar - &quot;<code>SELECT phone::varchar from table...</code>&quot; but it does not work.</p>\n<p><strong>UPD</strong>\nI managed to configure custom converter:</p>\n<pre><code>@Configuration\n@EnableR2dbcRepositories\nclass R2dbcConfiguration {\n    @Bean\n    fun r2dbcCustomConversions(\n        stringToBigIntConverter: StringToBigIntConverter,\n        bigIntToStringConverter: BigIntToStringConverter\n    ): R2dbcCustomConversions {\n        return R2dbcCustomConversions(listOf(stringToBigIntConverter, bigIntToStringConverter))\n    }\n}\n</code></pre>\n<p>Custom converters:</p>\n<pre><code>@Component\n@WritingConverter\nclass BigIntToStringConverter: Converter&lt;Long, String&gt; {\n    override fun convert(source: Long): String {\n        return source.toString()\n    }\n\n@Component\n@WritingConverter\nclass StringToBigIntConverter: Converter&lt;String, Long&gt; {\n    override fun convert(source: String): Long {\n        return source.toLong()\n    }\n}\n</code></pre>\n<p>But now it tries to convert every String field to BIGINT and vice versa. How can I apply converter only for specific field in specific entity?</p>\n"},{"tags":["java","ssl","kubernetes-ingress","sni","ssl-handshake"],"answers":[{"tags":[],"owner":{"account_id":1956083,"reputation":4432,"user_id":1759063,"accept_rate":53,"display_name":"Eljah"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694010554,"creation_date":1694010554,"answer_id":77052893,"question_id":77052892,"body_markdown":"https://bugs.openjdk.org/browse/JDK-8220723 this was the root cause of the problem\r\n\r\nTo work it around we forced the TLS1.2 to work to avoid using TLS1.3 through\r\n\r\nadding \r\n\r\n    -Djdk.tls.client.protocols=TLSv1.2\r\n\r\nor\r\n\r\n    -Dhttps.protocols=TLSv1.2","title":"Why with apache-http-client at some point our Https calls are treated as calls without DNS name, but with IP address?","body":"<p><a href=\"https://bugs.openjdk.org/browse/JDK-8220723\" rel=\"nofollow noreferrer\">https://bugs.openjdk.org/browse/JDK-8220723</a> this was the root cause of the problem</p>\n<p>To work it around we forced the TLS1.2 to work to avoid using TLS1.3 through</p>\n<p>adding</p>\n<pre><code>-Djdk.tls.client.protocols=TLSv1.2\n</code></pre>\n<p>or</p>\n<pre><code>-Dhttps.protocols=TLSv1.2\n</code></pre>\n"}],"owner":{"account_id":1956083,"reputation":4432,"user_id":1759063,"accept_rate":53,"display_name":"Eljah"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77052893,"answer_count":1,"score":1,"last_activity_date":1694010554,"creation_date":1694010554,"question_id":77052892,"body_markdown":"We have a problem with doing a handshake for the certificate like\r\n\r\n    javax.net.ssl.SSLPeerUnverifiedException: Certificate for &lt;g.i.t.n.c.com&gt; doesn&#39;t match any of the subject alternative names: [*.t.n.c.com]\r\n\r\nOur ingress is configured to provide a certificate with alternative name `g.i.t.n.c.com` if we access it through DNS name and `*.t.n.c.com` if we access through the IP.\r\n\r\nBut in our code we just have a `Spring WS` client using `Apache Http Client` under the hood.\r\n\r\n    Caused by: javax.net.ssl.SSLPeerUnverifiedException: Certificate for &lt;g.i.t.n.c.com&gt; doesn&#39;t match any of the subject alternative names: [*.t.n.c.com]\r\n    \tat org.apache.http.conn.ssl.SSLConnectionSocketFactory.verifyHostname(SSLConnectionSocketFactory.java:507)\r\n    \tat org.apache.http.conn.ssl.SSLConnectionSocketFactory.createLayeredSocket(SSLConnectionSocketFactory.java:437)\r\n    \tat org.apache.http.conn.ssl.SSLConnectionSocketFactory.connectSocket(SSLConnectionSocketFactory.java:384)\r\n    \tat org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)\r\n    \tat org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:374)\r\n    \tat org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)\r\n    \tat org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)\r\n    \tat org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)\r\n    \tat org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)\r\n    \tat org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)\r\n    \tat org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)\r\n    \tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)\r\n    \tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:108)\r\n    \tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)\r\n    \tat org.springframework.ws.transport.http.HttpComponentsConnection.onSendAfterWrite(HttpComponentsConnection.java:121)\r\n    \tat org.springframework.ws.transport.AbstractWebServiceConnection.send(AbstractWebServiceConnection.java:48)\r\n    \tat org.springframework.ws.client.core.WebServiceTemplate.sendRequest(WebServiceTemplate.java:658)\r\n    \tat org.springframework.ws.client.core.WebServiceTemplate.doSendAndReceive(WebServiceTemplate.java:606)\r\n    \tat org.springframework.ws.client.core.WebServiceTemplate.sendAndReceive(WebServiceTemplate.java:555)\r\n\r\nAnd for unknown reason that started happening at some time, and at some time it was ok and `SslSocket` was established retrieving the right certificate (like it was accessing our `Ingress` via `DNS` hostname with `SNI` hostname data) and at some point (causing the above exception) the call for establishing connection was using IP without `DNS hostname` and no `SNI` data, and we got the broken certificate that appears only if our ingress is accessed without `DNS name` in `SNI`. \r\n\r\nTo get `SNI` details (`ClientHello` message) you may run Java app with \r\n\r\n    -Djavax.net.debug=ssl:handshake:verbose:keymanager:trustmanager\r\n\r\nAnd you will have extra loggin to `std.out` like\r\n\r\n    javax.net.ssl|DEBUG|02 14|XNIO-1 task-9|2023-09-04 12:48:06.626 MSK|Finished.java:860|Consuming server Finished handshake message (\r\n\r\nHow to force it to use only one way to connect, using the DNS name at any time? \r\n\r\nWe use Java 11.","title":"Why with apache-http-client at some point our Https calls are treated as calls without DNS name, but with IP address?","body":"<p>We have a problem with doing a handshake for the certificate like</p>\n<pre><code>javax.net.ssl.SSLPeerUnverifiedException: Certificate for &lt;g.i.t.n.c.com&gt; doesn't match any of the subject alternative names: [*.t.n.c.com]\n</code></pre>\n<p>Our ingress is configured to provide a certificate with alternative name <code>g.i.t.n.c.com</code> if we access it through DNS name and <code>*.t.n.c.com</code> if we access through the IP.</p>\n<p>But in our code we just have a <code>Spring WS</code> client using <code>Apache Http Client</code> under the hood.</p>\n<pre><code>Caused by: javax.net.ssl.SSLPeerUnverifiedException: Certificate for &lt;g.i.t.n.c.com&gt; doesn't match any of the subject alternative names: [*.t.n.c.com]\n    at org.apache.http.conn.ssl.SSLConnectionSocketFactory.verifyHostname(SSLConnectionSocketFactory.java:507)\n    at org.apache.http.conn.ssl.SSLConnectionSocketFactory.createLayeredSocket(SSLConnectionSocketFactory.java:437)\n    at org.apache.http.conn.ssl.SSLConnectionSocketFactory.connectSocket(SSLConnectionSocketFactory.java:384)\n    at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)\n    at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:374)\n    at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)\n    at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)\n    at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)\n    at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)\n    at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)\n    at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)\n    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)\n    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:108)\n    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)\n    at org.springframework.ws.transport.http.HttpComponentsConnection.onSendAfterWrite(HttpComponentsConnection.java:121)\n    at org.springframework.ws.transport.AbstractWebServiceConnection.send(AbstractWebServiceConnection.java:48)\n    at org.springframework.ws.client.core.WebServiceTemplate.sendRequest(WebServiceTemplate.java:658)\n    at org.springframework.ws.client.core.WebServiceTemplate.doSendAndReceive(WebServiceTemplate.java:606)\n    at org.springframework.ws.client.core.WebServiceTemplate.sendAndReceive(WebServiceTemplate.java:555)\n</code></pre>\n<p>And for unknown reason that started happening at some time, and at some time it was ok and <code>SslSocket</code> was established retrieving the right certificate (like it was accessing our <code>Ingress</code> via <code>DNS</code> hostname with <code>SNI</code> hostname data) and at some point (causing the above exception) the call for establishing connection was using IP without <code>DNS hostname</code> and no <code>SNI</code> data, and we got the broken certificate that appears only if our ingress is accessed without <code>DNS name</code> in <code>SNI</code>.</p>\n<p>To get <code>SNI</code> details (<code>ClientHello</code> message) you may run Java app with</p>\n<pre><code>-Djavax.net.debug=ssl:handshake:verbose:keymanager:trustmanager\n</code></pre>\n<p>And you will have extra loggin to <code>std.out</code> like</p>\n<pre><code>javax.net.ssl|DEBUG|02 14|XNIO-1 task-9|2023-09-04 12:48:06.626 MSK|Finished.java:860|Consuming server Finished handshake message (\n</code></pre>\n<p>How to force it to use only one way to connect, using the DNS name at any time?</p>\n<p>We use Java 11.</p>\n"},{"tags":["java","exception","javafx"],"comments":[{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":1,"creation_date":1622060112,"post_id":67711920,"comment_id":119684973,"body_markdown":"The stack trace is pretty clear. The problem is that you are loading an FXML file which specifies a controller class that doesn&#39;t have a no-argument constructor. If you want to instantiate a controller class directly (in code) and have it load the FXML, use the [Custom Component Pattern](https://openjfx.io/javadoc/15/javafx.fxml/javafx/fxml/doc-files/introduction_to_fxml.html#custom_components)","body":"The stack trace is pretty clear. The problem is that you are loading an FXML file which specifies a controller class that doesn&#39;t have a no-argument constructor. If you want to instantiate a controller class directly (in code) and have it load the FXML, use the <a href=\"https://openjfx.io/javadoc/15/javafx.fxml/javafx/fxml/doc-files/introduction_to_fxml.html#custom_components\" rel=\"nofollow noreferrer\">Custom Component Pattern</a>"},{"owner":{"account_id":17879660,"reputation":3,"user_id":12988814,"display_name":"mihailaza"},"score":0,"creation_date":1622061572,"post_id":67711920,"comment_id":119685463,"body_markdown":"So, @James_D you are telling me that the approach of StageSuperclass constructor &lt;public StageSuperclass(Stage stage, String fxmlFilePath)&gt; isn&#39;t good? It&#39;s my first JavaFX project and I am a newbie ... I need that stage and the path to the file to instantiate another stages during runtime ...\nIs my understanding correct? If so, can you help me with an alternative approach of mine?","body":"So, @James_D you are telling me that the approach of StageSuperclass constructor &lt;public StageSuperclass(Stage stage, String fxmlFilePath)&gt; isn&#39;t good? It&#39;s my first JavaFX project and I am a newbie ... I need that stage and the path to the file to instantiate another stages during runtime ... Is my understanding correct? If so, can you help me with an alternative approach of mine?"},{"owner":{"account_id":17879660,"reputation":3,"user_id":12988814,"display_name":"mihailaza"},"score":0,"creation_date":1622062531,"post_id":67711920,"comment_id":119685764,"body_markdown":"@James_D I&#39;ve added some blank constructors there, and now the app is running, but when I attempt to drag and move it, I get NullPointerExceptions, targeting this part of code here:\nroot.setOnMouseDragged(new EventHandler&lt;MouseEvent&gt;() {\n..\nstage.setX(mouseEvent.getScreenX() - xOffset);\n..\n}\nI assume stage is causing the NPE. Do you have any suggestion to make that drag and move code work?","body":"@James_D I&#39;ve added some blank constructors there, and now the app is running, but when I attempt to drag and move it, I get NullPointerExceptions, targeting this part of code here: root.setOnMouseDragged(new EventHandler&lt;MouseEvent&gt;() { .. stage.setX(mouseEvent.getScreenX() - xOffset); .. } I assume stage is causing the NPE. Do you have any suggestion to make that drag and move code work?"},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1622062535,"post_id":67711920,"comment_id":119685766,"body_markdown":"The actual problem is that `LoginController` doesn&#39;t have a no-argument constructor. But it&#39;s really unclear why you are subclassing `Stage` or why you have an inheritance hierarchy for your controllers. If this is your first time using JavaFX, why not use the same approach as in any of the basic examples? I.e. don&#39;t instantiate the controller (the `FXMLLoader` does that for you), just load the FXML directly, place the result in a `Scene` and the `Scene` in a stage.","body":"The actual problem is that <code>LoginController</code> doesn&#39;t have a no-argument constructor. But it&#39;s really unclear why you are subclassing <code>Stage</code> or why you have an inheritance hierarchy for your controllers. If this is your first time using JavaFX, why not use the same approach as in any of the basic examples? I.e. don&#39;t instantiate the controller (the <code>FXMLLoader</code> does that for you), just load the FXML directly, place the result in a <code>Scene</code> and the <code>Scene</code> in a stage."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1622062614,"post_id":67711920,"comment_id":119685786,"body_markdown":"You don&#39;t need to subclass `Stage` or pass the `Stage` around. You can get a reference to the `Stage` in your event handler with, e.g. `Window stage = root.getScene().getWindow();`.","body":"You don&#39;t need to subclass <code>Stage</code> or pass the <code>Stage</code> around. You can get a reference to the <code>Stage</code> in your event handler with, e.g. <code>Window stage = root.getScene().getWindow();</code>."},{"owner":{"account_id":17879660,"reputation":3,"user_id":12988814,"display_name":"mihailaza"},"score":0,"creation_date":1622062733,"post_id":67711920,"comment_id":119685828,"body_markdown":"I am trying to build an app with multiple stages and all of them should be without that default system minimize/close buttons and I need all those Stages to have that .setOnMouseDragged event there so I can move the app on the screen. And I thought that would be a good approach, instead of reusing that code everywhere in every screen.","body":"I am trying to build an app with multiple stages and all of them should be without that default system minimize/close buttons and I need all those Stages to have that .setOnMouseDragged event there so I can move the app on the screen. And I thought that would be a good approach, instead of reusing that code everywhere in every screen."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1622062775,"post_id":67711920,"comment_id":119685845,"body_markdown":"Why not just put that code in a separate class, and use it from each of the controllers that need it? Don&#39;t overuse or abuse inheritance. This is not what it&#39;s for.","body":"Why not just put that code in a separate class, and use it from each of the controllers that need it? Don&#39;t overuse or abuse inheritance. This is not what it&#39;s for."}],"answers":[{"comments":[{"owner":{"account_id":17879660,"reputation":3,"user_id":12988814,"display_name":"mihailaza"},"score":0,"creation_date":1622101217,"post_id":67712865,"comment_id":119694713,"body_markdown":"I&#39;ve done that, removed that inheritance and now it works pretty good, with multiple stages. But there&#39;s a weird movement of the Stage when I drag it with the mouse. Please see it in the imgur album: https://imgur.com/a/0sYLxen\nDo you have any suggestion or do you know the cause of that movement of all Stages to the start of the screen when I drag them?","body":"I&#39;ve done that, removed that inheritance and now it works pretty good, with multiple stages. But there&#39;s a weird movement of the Stage when I drag it with the mouse. Please see it in the imgur album: <a href=\"https://imgur.com/a/0sYLxen\" rel=\"nofollow noreferrer\">imgur.com/a/0sYLxen</a> Do you have any suggestion or do you know the cause of that movement of all Stages to the start of the screen when I drag them?"},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1622117808,"post_id":67712865,"comment_id":119701910,"body_markdown":"@mihailaza I had `getSceneX()` (and Y) in the drag handler, instead of `getScreenX()`. Should work smoothly with the fix.","body":"@mihailaza I had <code>getSceneX()</code> (and Y) in the drag handler, instead of <code>getScreenX()</code>. Should work smoothly with the fix."},{"owner":{"account_id":17879660,"reputation":3,"user_id":12988814,"display_name":"mihailaza"},"score":0,"creation_date":1622131516,"post_id":67712865,"comment_id":119709213,"body_markdown":"My bad there, I don&#39;t know how that slipped there :)). Thank you a lot! Have nice day!","body":"My bad there, I don&#39;t know how that slipped there :)). Thank you a lot! Have nice day!"}],"tags":[],"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1694010552,"creation_date":1622064006,"answer_id":67712865,"question_id":67711920,"body_markdown":"The exception is caused because your FXML file specifies `fx:controller=&quot;application.LoginController&quot;`. This will cause the `FXMLLoader` to create an instance of `application.LoginController` by (effectively) calling its no-argument constructor. However, your `LoginController` class doesn&#39;t have a no-argument constructor: hence the exception:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    Caused by: java.lang.NoSuchMethodException: application.LoginController.&lt;init&gt;()\r\n\r\n\r\n\r\nThe typical approach is to load the FXML file, and let the `FXMLLoader` create the controller for you. Except in quite advanced usage, you should not instantiate the controller class yourself, because the `FXMLLoader` does that for you.\r\n\r\nGet rid of the inheritance in `LoginController` (i.e. it doesn&#39;t need to be a subclass of your other controller class, and certainly should not be a subclass of `Stage`). Then just do\r\n\r\n\r\n    public class MyApplication extends Application {\r\n    \r\n        private double xOffset = 0 ;\r\n        private double yOffset = 0 ;\r\n    \r\n        public static void main(String[] args) {\r\n            launch(args);\r\n        }\r\n        \r\n        @Override\r\n        public void start(Stage primaryStage) throws Exception {\r\n            FXMLLoader loader = new FXMLLoader(getClass().getResource(LOGIN_FXML_PATH));\r\n            Parent root = loader.load();\r\n            Scene scene = new Scene(root);\r\n            stage.setScene(scene);\r\n            stage.initStyle(StageStyle.UNDECORATED);\r\n            root.setOnMousePressed(mouseEvent -&gt; {\r\n                xOffset = mouseEvent.getSceneX();\r\n                yOffset = mouseEvent.getSceneY();\r\n            });\r\n        \r\n            root.setOnMouseDragged(mouseEvent -&gt;  {\r\n                stage.setX(mouseEvent.getScreenX() - xOffset);\r\n                stage.setY(mouseEvent.getScreenY() - yOffset);\r\n            });\r\n    \r\n            primaryStage.show();\r\n        }\r\n    }\r\n\r\nIf you need to reuse the same functionality repeatedly, just create a separate class in the normal way:\r\n\r\n    public class StageDragHandler {\r\n    \r\n        private double xOffset = 0 ;\r\n        private double yOffset = 0 ;\r\n    \r\n        public Stage createStage(Parent root) {\r\n            Stage stage = new Stage();\r\n            configureStage(root, stage);\r\n            return stage ;\r\n        }\r\n    \r\n        public void configureStage(Parent root, Stage stage) {\r\n            Scene scene = new Scene(root);\r\n            primaryStage.setScene(scene);\r\n            primaryStage.initStyle(StageStyle.UNDECORATED);\r\n            root.setOnMousePressed(mouseEvent -&gt; {\r\n                xOffset = mouseEvent.getSceneX();\r\n                yOffset = mouseEvent.getSceneY();\r\n            });\r\n        \r\n            root.setOnMouseDragged(mouseEvent -&gt; {\r\n                stage.setX(mouseEvent.getScreenX() - xOffset);\r\n                stage.setY(mouseEvent.getScreenY() - yOffset);\r\n            });\r\n        }\r\n    }\r\n\r\nThen your application class reduces to:\r\n\r\n    public class MyApplication extends Application {\r\n    \r\n        public static void main(String[] args) {\r\n            launch(args);\r\n        }\r\n        \r\n        @Override\r\n        public void start(Stage primaryStage) throws Exception {\r\n            FXMLLoader loader = new FXMLLoader(getClass().getResource(LOGIN_FXML_PATH));\r\n            Parent root = loader.load();\r\n            new StageDragHandler().configureStage(root, primaryStage);   \r\n            primaryStage.show();\r\n        }\r\n    }\r\n\r\nand you can use similar code anywhere you need it.","title":"Unknown cause of javafx.fxml.LoadException","body":"<p>The exception is caused because your FXML file specifies <code>fx:controller=&quot;application.LoginController&quot;</code>. This will cause the <code>FXMLLoader</code> to create an instance of <code>application.LoginController</code> by (effectively) calling its no-argument constructor. However, your <code>LoginController</code> class doesn't have a no-argument constructor: hence the exception:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Caused by: java.lang.NoSuchMethodException: application.LoginController.&lt;init&gt;()\n</code></pre>\n<p>The typical approach is to load the FXML file, and let the <code>FXMLLoader</code> create the controller for you. Except in quite advanced usage, you should not instantiate the controller class yourself, because the <code>FXMLLoader</code> does that for you.</p>\n<p>Get rid of the inheritance in <code>LoginController</code> (i.e. it doesn't need to be a subclass of your other controller class, and certainly should not be a subclass of <code>Stage</code>). Then just do</p>\n<pre><code>public class MyApplication extends Application {\n\n    private double xOffset = 0 ;\n    private double yOffset = 0 ;\n\n    public static void main(String[] args) {\n        launch(args);\n    }\n    \n    @Override\n    public void start(Stage primaryStage) throws Exception {\n        FXMLLoader loader = new FXMLLoader(getClass().getResource(LOGIN_FXML_PATH));\n        Parent root = loader.load();\n        Scene scene = new Scene(root);\n        stage.setScene(scene);\n        stage.initStyle(StageStyle.UNDECORATED);\n        root.setOnMousePressed(mouseEvent -&gt; {\n            xOffset = mouseEvent.getSceneX();\n            yOffset = mouseEvent.getSceneY();\n        });\n    \n        root.setOnMouseDragged(mouseEvent -&gt;  {\n            stage.setX(mouseEvent.getScreenX() - xOffset);\n            stage.setY(mouseEvent.getScreenY() - yOffset);\n        });\n\n        primaryStage.show();\n    }\n}\n</code></pre>\n<p>If you need to reuse the same functionality repeatedly, just create a separate class in the normal way:</p>\n<pre><code>public class StageDragHandler {\n\n    private double xOffset = 0 ;\n    private double yOffset = 0 ;\n\n    public Stage createStage(Parent root) {\n        Stage stage = new Stage();\n        configureStage(root, stage);\n        return stage ;\n    }\n\n    public void configureStage(Parent root, Stage stage) {\n        Scene scene = new Scene(root);\n        primaryStage.setScene(scene);\n        primaryStage.initStyle(StageStyle.UNDECORATED);\n        root.setOnMousePressed(mouseEvent -&gt; {\n            xOffset = mouseEvent.getSceneX();\n            yOffset = mouseEvent.getSceneY();\n        });\n    \n        root.setOnMouseDragged(mouseEvent -&gt; {\n            stage.setX(mouseEvent.getScreenX() - xOffset);\n            stage.setY(mouseEvent.getScreenY() - yOffset);\n        });\n    }\n}\n</code></pre>\n<p>Then your application class reduces to:</p>\n<pre><code>public class MyApplication extends Application {\n\n    public static void main(String[] args) {\n        launch(args);\n    }\n    \n    @Override\n    public void start(Stage primaryStage) throws Exception {\n        FXMLLoader loader = new FXMLLoader(getClass().getResource(LOGIN_FXML_PATH));\n        Parent root = loader.load();\n        new StageDragHandler().configureStage(root, primaryStage);   \n        primaryStage.show();\n    }\n}\n</code></pre>\n<p>and you can use similar code anywhere you need it.</p>\n"}],"owner":{"account_id":17879660,"reputation":3,"user_id":12988814,"display_name":"mihailaza"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1478,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":67712865,"answer_count":1,"score":-1,"last_activity_date":1694010552,"creation_date":1622059103,"question_id":67711920,"body_markdown":"I have a three stages JavaFX app (right now only the login/register/blank view) and I tried to communicate between them. I&#39;ve created a super class and all stages extend that super class.\r\nNow, when I run the main class like below, I get the runtime errors:\r\n\r\n    public static void main(String[] args) {\r\n\t\tlaunch(args);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void start(Stage primaryStage) throws Exception {\r\n\t\tconn = DBUtils.connectToDB(DB_SCHEMA);\r\n\t\tnew LoginController(primaryStage);\r\n\t}\r\n\r\nException:\r\n\r\n    Exception in Application start method\r\n    java.lang.reflect.InvocationTargetException\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n    \tat javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplicationWithArgs(LauncherImpl.java:464)\r\n    \tat javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplication(LauncherImpl.java:363)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n    \tat java.base/sun.launcher.LauncherHelper$FXHelper.main(LauncherHelper.java:1051)\r\n    Caused by: java.lang.RuntimeException: Exception in Application start method\r\n    \tat javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:900)\r\n    \tat javafx.graphics/com.sun.javafx.application.LauncherImpl.lambda$launchApplication$2(LauncherImpl.java:195)\r\n    \tat java.base/java.lang.Thread.run(Thread.java:834)\r\n    Caused by: javafx.fxml.LoadException: \r\n    /C:/Mihai/Faculta/Anul%203/Licenta/Aplicatie/licenta-mihai-laza/out/production/licenta-mihai-laza/application/login.fxml:7\r\n\r\n\tat javafx.fxml/javafx.fxml.FXMLLoader.constructLoadException(FXMLLoader.java:2625)\r\n\tat javafx.fxml/javafx.fxml.FXMLLoader.access$700(FXMLLoader.java:105)\r\n\tat javafx.fxml/javafx.fxml.FXMLLoader$ValueElement.processAttribute(FXMLLoader.java:941)\r\n\tat javafx.fxml/javafx.fxml.FXMLLoader$InstanceDeclarationElement.processAttribute(FXMLLoader.java:980)\r\n\tat javafx.fxml/javafx.fxml.FXMLLoader$Element.processStartElement(FXMLLoader.java:227)\r\n\tat javafx.fxml/javafx.fxml.FXMLLoader$ValueElement.processStartElement(FXMLLoader.java:752)\r\n\tat javafx.fxml/javafx.fxml.FXMLLoader.processStartElement(FXMLLoader.java:2722)\r\n\tat javafx.fxml/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2552)\r\n\tat javafx.fxml/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2466)\r\n\tat javafx.fxml/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:3237)\r\n\tat javafx.fxml/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:3194)\r\n\tat javafx.fxml/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:3163)\r\n\tat javafx.fxml/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:3136)\r\n\tat javafx.fxml/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:3113)\r\n\tat javafx.fxml/javafx.fxml.FXMLLoader.load(FXMLLoader.java:3106)\r\n\tat licenta.mihai.laza/application.superclasses.StageSuperclass.&lt;init&gt;(StageSuperclass.java:20)\r\n\tat licenta.mihai.laza/application.LoginController.&lt;init&gt;(LoginController.java:45)\r\n\tat licenta.mihai.laza/application.Main.start(Main.java:21)\r\n\tat javafx.graphics/com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$9(LauncherImpl.java:846)\r\n\tat javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runAndWait$12(PlatformImpl.java:455)\r\n\tat javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runLater$10(PlatformImpl.java:428)\r\n\tat java.base/java.security.AccessController.doPrivileged(Native Method)\r\n\tat javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runLater$11(PlatformImpl.java:427)\r\n\tat javafx.graphics/com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:96)\r\n\tat javafx.graphics/com.sun.glass.ui.win.WinApplication._runLoop(Native Method)\r\n\tat javafx.graphics/com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:174)\r\n\t... 1 more\r\n    Caused by: java.lang.InstantiationException: application.LoginController\r\n    \tat java.base/java.lang.Class.newInstance(Class.java:571)\r\n    \tat javafx.fxml/javafx.fxml.FXMLLoader$ValueElement.processAttribute(FXMLLoader.java:936)\r\n    \t... 24 more\r\n    Caused by: java.lang.NoSuchMethodException: application.LoginController.&lt;init&gt;()\r\n    \tat java.base/java.lang.Class.getConstructor0(Class.java:3350)\r\n    \tat java.base/java.lang.Class.newInstance(Class.java:556)\r\n    \t... 25 more\r\n    [INFO] Connection to database closed\r\n    Exception running application application.Main\r\n\r\n\r\n**StageSuperclass.java:**\r\n\r\n    public class StageSuperclass extends Stage {\r\n\t// Frame window\r\n\tprivate Stage stage;\r\n\tprivate double xOffset = 0;\r\n\tprivate double yOffset = 0;\r\n\r\n\tpublic StageSuperclass(Stage stage, String fxmlFilePath) throws java.io.IOException {\r\n\t\tthis.stage = stage;\r\n\t\tParent root = FXMLLoader.load(getClass().getResource(fxmlFilePath));\r\n\t\tScene scene = new Scene(root, Color.TRANSPARENT);\r\n\t\troot.setStyle(&quot;-fx-background-color: transparent;&quot;);\r\n\t\tthis.initStyle(StageStyle.UNDECORATED);\r\n\t\troot.setOnMousePressed(new EventHandler&lt;MouseEvent&gt;() {\r\n\t\t\t@Override\r\n\t\t\tpublic void handle(MouseEvent mouseEvent) {\r\n\t\t\t\txOffset = mouseEvent.getSceneX();\r\n\t\t\t\tyOffset = mouseEvent.getSceneY();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\troot.setOnMouseDragged(new EventHandler&lt;MouseEvent&gt;() {\r\n\t\t\t@Override\r\n\t\t\tpublic void handle(MouseEvent mouseEvent) {\r\n\t\t\t\tstage.setX(mouseEvent.getScreenX() - xOffset);\r\n\t\t\t\tstage.setY(mouseEvent.getScreenY() - yOffset);\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.setScene(scene);\r\n\t\tthis.show();\r\n\t}\r\n\r\n\tpublic Stage getStage() {\r\n\t\treturn this.stage;\r\n\t}\r\n\r\n**LoginController.java:**\r\n\r\n    public class LoginController extends StageSuperclass {\r\n\t// Constants\r\n\tprivate static final String LOGIN_FXML_PATH = &quot;/application/login.fxml&quot;;\r\n\tprivate static final String WRONG_CREDENTIALS_MSG = &quot;Datele de logare sunt gresite!&quot;;\r\n\tprivate static final String BLANK_CREDENTIALS_MSG = &quot;Introduceti username si parola!&quot;;\r\n\r\n\t// PageObjects\r\n\tRegisterController registerPage;\r\n\r\n\t// FXML Objects\r\n\t@FXML\r\n\tprivate Button btnLogin;\r\n\t@FXML\r\n\tprivate Button btnIesire;\r\n\t@FXML\r\n\tprivate TextField tfdUsername;\r\n\t@FXML\r\n\tprivate TextField tfdParola;\r\n\t@FXML\r\n\tprivate Label lblInvalid;\r\n\t@FXML\r\n\tprivate Hyperlink lnkInregistrare;\r\n\r\n\t// Constructor\r\n\tpublic LoginController(Stage stage) throws IOException {\r\n\t\tsuper(stage, LOGIN_FXML_PATH);\r\n\t}\r\n\r\n\tpublic void inregistrareLinkOnAction(ActionEvent event) throws IOException {\r\n\t\tnew RegisterController(this.getStage());\r\n\t}\r\n\r\n\tpublic void loginButtonOnAction(ActionEvent event) throws IOException {\r\n\t\tif (!tfdUsername.getText().isBlank() &amp;&amp; !tfdParola.getText().isBlank()) {\r\n\t\t\tif (validareLogin()) {\r\n\t\t\t\tnew MainWindowController(this.getStage());\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tlblInvalid.setText(BLANK_CREDENTIALS_MSG);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic void iesireButtonOnAction(ActionEvent event) {\r\n\t\tStage stage = (Stage) btnIesire.getScene().getWindow();\r\n\t\tstage.close();\r\n\t}\r\n\r\n\tprivate boolean validareLogin() {\r\n\t\tList&lt;String&gt; columns = Arrays.asList(COL_USERNAME, COL_PAROLA);\r\n\t\tList&lt;String&gt; whereValues = Arrays.asList(tfdUsername.getText(), tfdParola.getText());\r\n\t\tif (DBUtils.select(columns, columns, whereValues, DBUtils.TABEL_UTILIZATORI.TABLE_NAME, Main.conn).size() == 1) {\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\tlblInvalid.setText(WRONG_CREDENTIALS_MSG);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n    }\r\n\r\n**login.fxml:**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n    &lt;?import javafx.scene.control.*?&gt;\r\n    &lt;?import javafx.scene.layout.AnchorPane?&gt;\r\n    &lt;?import javafx.scene.text.*?&gt;\r\n    &lt;AnchorPane prefHeight=&quot;300.0&quot; prefWidth=&quot;300.0&quot; xmlns=&quot;http://javafx.com/javafx/11.0.1&quot;\r\n                xmlns:fx=&quot;http://javafx.com/fxml/1&quot; fx:controller=&quot;application.LoginController&quot;&gt;\r\n        &lt;AnchorPane prefHeight=&quot;60.0&quot; prefWidth=&quot;300.0&quot; style=&quot;-fx-background-color: #0084b8;&quot;&gt;\r\n            &lt;children&gt;\r\n                &lt;Label alignment=&quot;CENTER&quot; contentDisplay=&quot;CENTER&quot; layoutY=&quot;17.0&quot; prefHeight=&quot;17.0&quot; prefWidth=&quot;300.0&quot;\r\n                       text=&quot;LOGIN&quot; textAlignment=&quot;CENTER&quot; textFill=&quot;WHITE&quot;&gt;\r\n                    &lt;font&gt;\r\n                        &lt;Font name=&quot;System Bold&quot; size=&quot;18.0&quot;/&gt;\r\n                    &lt;/font&gt;\r\n                &lt;/Label&gt;\r\n            &lt;/children&gt;\r\n        &lt;/AnchorPane&gt;\r\n        &lt;Button id=&quot;btnLogin&quot; fx:id=&quot;btnLogin&quot; layoutX=&quot;33.0&quot; layoutY=&quot;216.0&quot; mnemonicParsing=&quot;false&quot;\r\n                onAction=&quot;#loginButtonOnAction&quot; prefHeight=&quot;25.0&quot; prefWidth=&quot;233.0&quot; style=&quot;-fx-background-color: #0084b8;&quot;\r\n                text=&quot;Login&quot; textFill=&quot;WHITE&quot;&gt;\r\n            &lt;font&gt;\r\n                &lt;Font size=&quot;13.0&quot;/&gt;\r\n            &lt;/font&gt;\r\n        &lt;/Button&gt;\r\n        &lt;TextField id=&quot;tfdUsername&quot; fx:id=&quot;tfdUsername&quot; layoutX=&quot;89.0&quot; layoutY=&quot;82.0&quot; promptText=&quot;User&quot;&gt;\r\n            &lt;font&gt;\r\n                &lt;Font size=&quot;14.0&quot;/&gt;\r\n            &lt;/font&gt;\r\n        &lt;/TextField&gt;\r\n        &lt;PasswordField id=&quot;tfdParola&quot; fx:id=&quot;tfdParola&quot; layoutX=&quot;89.0&quot; layoutY=&quot;123.0&quot; promptText=&quot;Parola&quot;&gt;\r\n            &lt;font&gt;\r\n                &lt;Font size=&quot;14.0&quot;/&gt;\r\n            &lt;/font&gt;\r\n        &lt;/PasswordField&gt;\r\n        &lt;Hyperlink id=&quot;lnkInregistrare&quot; fx:id=&quot;lnkInregistrare&quot; layoutX=&quot;118.0&quot; layoutY=&quot;153.0&quot;\r\n                   onAction=&quot;#inregistrareLinkOnAction&quot; text=&quot;Nu ai cont? Inregistreaza-te!&quot;&gt;\r\n            &lt;font&gt;\r\n                &lt;Font size=&quot;11.0&quot;/&gt;\r\n            &lt;/font&gt;\r\n        &lt;/Hyperlink&gt;\r\n        &lt;Label layoutX=&quot;33.0&quot; layoutY=&quot;87.0&quot; text=&quot;User&quot;&gt;\r\n            &lt;font&gt;\r\n                &lt;Font size=&quot;14.0&quot;/&gt;\r\n            &lt;/font&gt;\r\n        &lt;/Label&gt;\r\n        &lt;Label layoutX=&quot;32.0&quot; layoutY=&quot;128.0&quot; text=&quot;Parola&quot;&gt;\r\n            &lt;font&gt;\r\n                &lt;Font size=&quot;14.0&quot;/&gt;\r\n            &lt;/font&gt;\r\n        &lt;/Label&gt;\r\n        &lt;Button id=&quot;btnCancel&quot; fx:id=&quot;btnIesire&quot; layoutX=&quot;33.0&quot; layoutY=&quot;254.0&quot; mnemonicParsing=&quot;false&quot;\r\n                onAction=&quot;#iesireButtonOnAction&quot; prefHeight=&quot;25.0&quot; prefWidth=&quot;233.0&quot; style=&quot;-fx-background-color: #0084b8;&quot;\r\n                text=&quot;Iesire&quot; textFill=&quot;WHITE&quot;&gt;\r\n            &lt;font&gt;\r\n                &lt;Font size=&quot;13.0&quot;/&gt;\r\n            &lt;/font&gt;\r\n        &lt;/Button&gt;\r\n        &lt;Label id=&quot;lblInvalid&quot; fx:id=&quot;lblInvalid&quot; alignment=&quot;TOP_CENTER&quot; contentDisplay=&quot;CENTER&quot; layoutX=&quot;44.0&quot;\r\n               layoutY=&quot;194.0&quot; prefHeight=&quot;16.0&quot; prefWidth=&quot;233.0&quot; textAlignment=&quot;CENTER&quot; textFill=&quot;RED&quot;&gt;\r\n            &lt;font&gt;\r\n                &lt;Font size=&quot;11.0&quot;/&gt;\r\n            &lt;/font&gt;\r\n        &lt;/Label&gt;\r\n    &lt;/AnchorPane&gt;\r\n\r\n\r\nDo you have any suggestions solving this exception?\r\n\r\n","title":"Unknown cause of javafx.fxml.LoadException","body":"<p>I have a three stages JavaFX app (right now only the login/register/blank view) and I tried to communicate between them. I've created a super class and all stages extend that super class.\nNow, when I run the main class like below, I get the runtime errors:</p>\n<pre><code>public static void main(String[] args) {\n    launch(args);\n}\n\n@Override\npublic void start(Stage primaryStage) throws Exception {\n    conn = DBUtils.connectToDB(DB_SCHEMA);\n    new LoginController(primaryStage);\n}\n</code></pre>\n<p>Exception:</p>\n<pre><code>Exception in Application start method\njava.lang.reflect.InvocationTargetException\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplicationWithArgs(LauncherImpl.java:464)\n    at javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplication(LauncherImpl.java:363)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at java.base/sun.launcher.LauncherHelper$FXHelper.main(LauncherHelper.java:1051)\nCaused by: java.lang.RuntimeException: Exception in Application start method\n    at javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:900)\n    at javafx.graphics/com.sun.javafx.application.LauncherImpl.lambda$launchApplication$2(LauncherImpl.java:195)\n    at java.base/java.lang.Thread.run(Thread.java:834)\nCaused by: javafx.fxml.LoadException: \n/C:/Mihai/Faculta/Anul%203/Licenta/Aplicatie/licenta-mihai-laza/out/production/licenta-mihai-laza/application/login.fxml:7\n\nat javafx.fxml/javafx.fxml.FXMLLoader.constructLoadException(FXMLLoader.java:2625)\nat javafx.fxml/javafx.fxml.FXMLLoader.access$700(FXMLLoader.java:105)\nat javafx.fxml/javafx.fxml.FXMLLoader$ValueElement.processAttribute(FXMLLoader.java:941)\nat javafx.fxml/javafx.fxml.FXMLLoader$InstanceDeclarationElement.processAttribute(FXMLLoader.java:980)\nat javafx.fxml/javafx.fxml.FXMLLoader$Element.processStartElement(FXMLLoader.java:227)\nat javafx.fxml/javafx.fxml.FXMLLoader$ValueElement.processStartElement(FXMLLoader.java:752)\nat javafx.fxml/javafx.fxml.FXMLLoader.processStartElement(FXMLLoader.java:2722)\nat javafx.fxml/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2552)\nat javafx.fxml/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2466)\nat javafx.fxml/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:3237)\nat javafx.fxml/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:3194)\nat javafx.fxml/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:3163)\nat javafx.fxml/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:3136)\nat javafx.fxml/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:3113)\nat javafx.fxml/javafx.fxml.FXMLLoader.load(FXMLLoader.java:3106)\nat licenta.mihai.laza/application.superclasses.StageSuperclass.&lt;init&gt;(StageSuperclass.java:20)\nat licenta.mihai.laza/application.LoginController.&lt;init&gt;(LoginController.java:45)\nat licenta.mihai.laza/application.Main.start(Main.java:21)\nat javafx.graphics/com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$9(LauncherImpl.java:846)\nat javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runAndWait$12(PlatformImpl.java:455)\nat javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runLater$10(PlatformImpl.java:428)\nat java.base/java.security.AccessController.doPrivileged(Native Method)\nat javafx.graphics/com.sun.javafx.application.PlatformImpl.lambda$runLater$11(PlatformImpl.java:427)\nat javafx.graphics/com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:96)\nat javafx.graphics/com.sun.glass.ui.win.WinApplication._runLoop(Native Method)\nat javafx.graphics/com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:174)\n... 1 more\nCaused by: java.lang.InstantiationException: application.LoginController\n    at java.base/java.lang.Class.newInstance(Class.java:571)\n    at javafx.fxml/javafx.fxml.FXMLLoader$ValueElement.processAttribute(FXMLLoader.java:936)\n    ... 24 more\nCaused by: java.lang.NoSuchMethodException: application.LoginController.&lt;init&gt;()\n    at java.base/java.lang.Class.getConstructor0(Class.java:3350)\n    at java.base/java.lang.Class.newInstance(Class.java:556)\n    ... 25 more\n[INFO] Connection to database closed\nException running application application.Main\n</code></pre>\n<p><strong>StageSuperclass.java:</strong></p>\n<pre><code>public class StageSuperclass extends Stage {\n// Frame window\nprivate Stage stage;\nprivate double xOffset = 0;\nprivate double yOffset = 0;\n\npublic StageSuperclass(Stage stage, String fxmlFilePath) throws java.io.IOException {\n    this.stage = stage;\n    Parent root = FXMLLoader.load(getClass().getResource(fxmlFilePath));\n    Scene scene = new Scene(root, Color.TRANSPARENT);\n    root.setStyle(&quot;-fx-background-color: transparent;&quot;);\n    this.initStyle(StageStyle.UNDECORATED);\n    root.setOnMousePressed(new EventHandler&lt;MouseEvent&gt;() {\n        @Override\n        public void handle(MouseEvent mouseEvent) {\n            xOffset = mouseEvent.getSceneX();\n            yOffset = mouseEvent.getSceneY();\n        }\n    });\n\n    root.setOnMouseDragged(new EventHandler&lt;MouseEvent&gt;() {\n        @Override\n        public void handle(MouseEvent mouseEvent) {\n            stage.setX(mouseEvent.getScreenX() - xOffset);\n            stage.setY(mouseEvent.getScreenY() - yOffset);\n        }\n    });\n    this.setScene(scene);\n    this.show();\n}\n\npublic Stage getStage() {\n    return this.stage;\n}\n</code></pre>\n<p><strong>LoginController.java:</strong></p>\n<pre><code>public class LoginController extends StageSuperclass {\n// Constants\nprivate static final String LOGIN_FXML_PATH = &quot;/application/login.fxml&quot;;\nprivate static final String WRONG_CREDENTIALS_MSG = &quot;Datele de logare sunt gresite!&quot;;\nprivate static final String BLANK_CREDENTIALS_MSG = &quot;Introduceti username si parola!&quot;;\n\n// PageObjects\nRegisterController registerPage;\n\n// FXML Objects\n@FXML\nprivate Button btnLogin;\n@FXML\nprivate Button btnIesire;\n@FXML\nprivate TextField tfdUsername;\n@FXML\nprivate TextField tfdParola;\n@FXML\nprivate Label lblInvalid;\n@FXML\nprivate Hyperlink lnkInregistrare;\n\n// Constructor\npublic LoginController(Stage stage) throws IOException {\n    super(stage, LOGIN_FXML_PATH);\n}\n\npublic void inregistrareLinkOnAction(ActionEvent event) throws IOException {\n    new RegisterController(this.getStage());\n}\n\npublic void loginButtonOnAction(ActionEvent event) throws IOException {\n    if (!tfdUsername.getText().isBlank() &amp;&amp; !tfdParola.getText().isBlank()) {\n        if (validareLogin()) {\n            new MainWindowController(this.getStage());\n        }\n    } else {\n        lblInvalid.setText(BLANK_CREDENTIALS_MSG);\n    }\n}\n\npublic void iesireButtonOnAction(ActionEvent event) {\n    Stage stage = (Stage) btnIesire.getScene().getWindow();\n    stage.close();\n}\n\nprivate boolean validareLogin() {\n    List&lt;String&gt; columns = Arrays.asList(COL_USERNAME, COL_PAROLA);\n    List&lt;String&gt; whereValues = Arrays.asList(tfdUsername.getText(), tfdParola.getText());\n    if (DBUtils.select(columns, columns, whereValues, DBUtils.TABEL_UTILIZATORI.TABLE_NAME, Main.conn).size() == 1) {\n        return true;\n    } else {\n        lblInvalid.setText(WRONG_CREDENTIALS_MSG);\n        return false;\n    }\n}\n}\n</code></pre>\n<p><strong>login.fxml:</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;?import javafx.scene.control.*?&gt;\n&lt;?import javafx.scene.layout.AnchorPane?&gt;\n&lt;?import javafx.scene.text.*?&gt;\n&lt;AnchorPane prefHeight=&quot;300.0&quot; prefWidth=&quot;300.0&quot; xmlns=&quot;http://javafx.com/javafx/11.0.1&quot;\n            xmlns:fx=&quot;http://javafx.com/fxml/1&quot; fx:controller=&quot;application.LoginController&quot;&gt;\n    &lt;AnchorPane prefHeight=&quot;60.0&quot; prefWidth=&quot;300.0&quot; style=&quot;-fx-background-color: #0084b8;&quot;&gt;\n        &lt;children&gt;\n            &lt;Label alignment=&quot;CENTER&quot; contentDisplay=&quot;CENTER&quot; layoutY=&quot;17.0&quot; prefHeight=&quot;17.0&quot; prefWidth=&quot;300.0&quot;\n                   text=&quot;LOGIN&quot; textAlignment=&quot;CENTER&quot; textFill=&quot;WHITE&quot;&gt;\n                &lt;font&gt;\n                    &lt;Font name=&quot;System Bold&quot; size=&quot;18.0&quot;/&gt;\n                &lt;/font&gt;\n            &lt;/Label&gt;\n        &lt;/children&gt;\n    &lt;/AnchorPane&gt;\n    &lt;Button id=&quot;btnLogin&quot; fx:id=&quot;btnLogin&quot; layoutX=&quot;33.0&quot; layoutY=&quot;216.0&quot; mnemonicParsing=&quot;false&quot;\n            onAction=&quot;#loginButtonOnAction&quot; prefHeight=&quot;25.0&quot; prefWidth=&quot;233.0&quot; style=&quot;-fx-background-color: #0084b8;&quot;\n            text=&quot;Login&quot; textFill=&quot;WHITE&quot;&gt;\n        &lt;font&gt;\n            &lt;Font size=&quot;13.0&quot;/&gt;\n        &lt;/font&gt;\n    &lt;/Button&gt;\n    &lt;TextField id=&quot;tfdUsername&quot; fx:id=&quot;tfdUsername&quot; layoutX=&quot;89.0&quot; layoutY=&quot;82.0&quot; promptText=&quot;User&quot;&gt;\n        &lt;font&gt;\n            &lt;Font size=&quot;14.0&quot;/&gt;\n        &lt;/font&gt;\n    &lt;/TextField&gt;\n    &lt;PasswordField id=&quot;tfdParola&quot; fx:id=&quot;tfdParola&quot; layoutX=&quot;89.0&quot; layoutY=&quot;123.0&quot; promptText=&quot;Parola&quot;&gt;\n        &lt;font&gt;\n            &lt;Font size=&quot;14.0&quot;/&gt;\n        &lt;/font&gt;\n    &lt;/PasswordField&gt;\n    &lt;Hyperlink id=&quot;lnkInregistrare&quot; fx:id=&quot;lnkInregistrare&quot; layoutX=&quot;118.0&quot; layoutY=&quot;153.0&quot;\n               onAction=&quot;#inregistrareLinkOnAction&quot; text=&quot;Nu ai cont? Inregistreaza-te!&quot;&gt;\n        &lt;font&gt;\n            &lt;Font size=&quot;11.0&quot;/&gt;\n        &lt;/font&gt;\n    &lt;/Hyperlink&gt;\n    &lt;Label layoutX=&quot;33.0&quot; layoutY=&quot;87.0&quot; text=&quot;User&quot;&gt;\n        &lt;font&gt;\n            &lt;Font size=&quot;14.0&quot;/&gt;\n        &lt;/font&gt;\n    &lt;/Label&gt;\n    &lt;Label layoutX=&quot;32.0&quot; layoutY=&quot;128.0&quot; text=&quot;Parola&quot;&gt;\n        &lt;font&gt;\n            &lt;Font size=&quot;14.0&quot;/&gt;\n        &lt;/font&gt;\n    &lt;/Label&gt;\n    &lt;Button id=&quot;btnCancel&quot; fx:id=&quot;btnIesire&quot; layoutX=&quot;33.0&quot; layoutY=&quot;254.0&quot; mnemonicParsing=&quot;false&quot;\n            onAction=&quot;#iesireButtonOnAction&quot; prefHeight=&quot;25.0&quot; prefWidth=&quot;233.0&quot; style=&quot;-fx-background-color: #0084b8;&quot;\n            text=&quot;Iesire&quot; textFill=&quot;WHITE&quot;&gt;\n        &lt;font&gt;\n            &lt;Font size=&quot;13.0&quot;/&gt;\n        &lt;/font&gt;\n    &lt;/Button&gt;\n    &lt;Label id=&quot;lblInvalid&quot; fx:id=&quot;lblInvalid&quot; alignment=&quot;TOP_CENTER&quot; contentDisplay=&quot;CENTER&quot; layoutX=&quot;44.0&quot;\n           layoutY=&quot;194.0&quot; prefHeight=&quot;16.0&quot; prefWidth=&quot;233.0&quot; textAlignment=&quot;CENTER&quot; textFill=&quot;RED&quot;&gt;\n        &lt;font&gt;\n            &lt;Font size=&quot;11.0&quot;/&gt;\n        &lt;/font&gt;\n    &lt;/Label&gt;\n&lt;/AnchorPane&gt;\n</code></pre>\n<p>Do you have any suggestions solving this exception?</p>\n"},{"tags":["java","eclipse","maven","xtext"],"owner":{"account_id":2835172,"reputation":933,"user_id":2435911,"accept_rate":47,"display_name":"harsh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1694008868,"answer_count":0,"score":0,"last_activity_date":1694010224,"creation_date":1694008632,"question_id":77052620,"body_markdown":"I have xtext language server project configured to build with maven. I want to connect the VS Code language client to the server via socket for debugging. In my `xtext.ide/pom.xml`, I have made the following change\r\n```xml\r\n&lt;mainClass&gt;org.eclipse.xtext.ide.server.SocketServerLauncher&lt;/mainClass&gt;\r\n```\r\nand now I can run the jar file on command line\r\n```bash\r\njava -jar xtext.ide-1.0.0-SNAPSHOT-ls.jar -port 5008 -host 0.0.0.0\r\n0    [main] INFO  ext.ide.server.SocketServerLauncher  - Started server socket at /0.0.0.0:5008\r\n```\r\nAnd in my VS Code extension.ts, I have the following\r\n```js\r\n var client: LanguageClient;\r\n\r\n    let connectionInfo = {\r\n      port: 5008,\r\n      host: &quot;0.0.0.0&quot;\r\n    };\r\n\r\n    let serverInfo = () =&gt; {\r\n      // Connect to language server via socket\r\n      let socket = net.connect(connectionInfo);\r\n      let result: StreamInfo = {\r\n          writer: socket,\r\n          reader: socket\r\n      };\r\n      return Promise.resolve(result);\r\n  };\r\n```\r\nOnce I start the extension, my server crashes with the error\r\n```bash\r\njava.lang.NoSuchMethodError: &#39;boolean org.eclipse.xtext.xbase.lib.ArrayExtensions.contains(java.lang.Object[], java.lang.Object)&#39;\r\n\tat org.eclipse.xtext.ide.server.SocketServerLauncher.getTrace(SocketServerLauncher.java:85)\r\n\tat org.eclipse.xtext.ide.server.SocketServerLauncher.launch(SocketServerLauncher.java:64)\r\n\tat org.eclipse.xtext.ide.server.SocketServerLauncher.main(SocketServerLauncher.java:52)\r\n```\r\nBut seems that the version of `org.eclipse.xtext.xbase.lib.ArrayExtensions` I have on my classpath is correct:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n(It was introduced [here](https://github.com/eclipse/xtext-lib/pull/229) which got released in `2.20`\r\n\r\n**Edit 1:** I noticed that the version in `xtext/META-INF/MANIFEST.MF` was not as expected:\r\n```\r\nRequire-Bundle: org.eclipse.xtext.xbase.lib;bundle-version=&quot;2.14.0&quot;\r\n```\r\nI now updated that to `2.25.0`, but the error is still the same.\r\n\r\n  [1]: https://i.stack.imgur.com/cNXmO.png","title":"java.lang.NoSuchMethodError: &#39;boolean org.eclipse.xtext.xbase.lib.ArrayExtensions.contains(java.lang.Object[], java.lang.Object)&#39;","body":"<p>I have xtext language server project configured to build with maven. I want to connect the VS Code language client to the server via socket for debugging. In my <code>xtext.ide/pom.xml</code>, I have made the following change</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;mainClass&gt;org.eclipse.xtext.ide.server.SocketServerLauncher&lt;/mainClass&gt;\n</code></pre>\n<p>and now I can run the jar file on command line</p>\n<pre class=\"lang-bash prettyprint-override\"><code>java -jar xtext.ide-1.0.0-SNAPSHOT-ls.jar -port 5008 -host 0.0.0.0\n0    [main] INFO  ext.ide.server.SocketServerLauncher  - Started server socket at /0.0.0.0:5008\n</code></pre>\n<p>And in my VS Code extension.ts, I have the following</p>\n<pre class=\"lang-js prettyprint-override\"><code> var client: LanguageClient;\n\n    let connectionInfo = {\n      port: 5008,\n      host: &quot;0.0.0.0&quot;\n    };\n\n    let serverInfo = () =&gt; {\n      // Connect to language server via socket\n      let socket = net.connect(connectionInfo);\n      let result: StreamInfo = {\n          writer: socket,\n          reader: socket\n      };\n      return Promise.resolve(result);\n  };\n</code></pre>\n<p>Once I start the extension, my server crashes with the error</p>\n<pre class=\"lang-bash prettyprint-override\"><code>java.lang.NoSuchMethodError: 'boolean org.eclipse.xtext.xbase.lib.ArrayExtensions.contains(java.lang.Object[], java.lang.Object)'\n    at org.eclipse.xtext.ide.server.SocketServerLauncher.getTrace(SocketServerLauncher.java:85)\n    at org.eclipse.xtext.ide.server.SocketServerLauncher.launch(SocketServerLauncher.java:64)\n    at org.eclipse.xtext.ide.server.SocketServerLauncher.main(SocketServerLauncher.java:52)\n</code></pre>\n<p>But seems that the version of <code>org.eclipse.xtext.xbase.lib.ArrayExtensions</code> I have on my classpath is correct:</p>\n<p><a href=\"https://i.stack.imgur.com/cNXmO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cNXmO.png\" alt=\"enter image description here\" /></a></p>\n<p>(It was introduced <a href=\"https://github.com/eclipse/xtext-lib/pull/229\" rel=\"nofollow noreferrer\">here</a> which got released in <code>2.20</code></p>\n<p><strong>Edit 1:</strong> I noticed that the version in <code>xtext/META-INF/MANIFEST.MF</code> was not as expected:</p>\n<pre><code>Require-Bundle: org.eclipse.xtext.xbase.lib;bundle-version=&quot;2.14.0&quot;\n</code></pre>\n<p>I now updated that to <code>2.25.0</code>, but the error is still the same.</p>\n"},{"tags":["java","docker","tcp","port","jedis"],"answers":[{"tags":[],"owner":{"account_id":6983402,"reputation":165,"user_id":5355354,"display_name":"Jordan Sheinfeld"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694010142,"creation_date":1694010142,"answer_id":77052834,"question_id":76429724,"body_markdown":"Try to run your docker on the host network, i.e. use:\r\n\r\ndocker run --network host\r\n\r\nTo reach your local running Redis.","title":"Jedis DockerFile : Failed to connect to any host resolved for DNS name","body":"<p>Try to run your docker on the host network, i.e. use:</p>\n<p>docker run --network host</p>\n<p>To reach your local running Redis.</p>\n"}],"owner":{"account_id":28652526,"reputation":13,"user_id":21939232,"display_name":"vincent_01"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":223,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694010142,"creation_date":1686210777,"question_id":76429724,"body_markdown":"so I&#39;m trying to dockerize my class , and when running the container I keep getting this Exception .\r\n\r\nHere is my DockerFile : \r\n\r\n\r\n```\r\nFROM ubuntu\r\n\r\nRUN apt-get update &amp;&amp; apt-get install -y openjdk-17-jdk\r\nWORKDIR app\r\n\r\n#COPY target/streams-101-1.0-SNAPSHOT.jar red.jar\r\n\r\nCOPY target/prototype-1.0-SNAPSHOT-jar-with-dependencies.jar app.jar\r\n\r\nCMD [&quot;java&quot;, &quot;-jar&quot;,&quot;app.jar&quot;,&lt;My IP address&gt;,&quot;6379&quot;]\r\n```\r\n\r\n\r\nand I create my Jedis client like this : \r\n```\r\n\r\nhost = args[0]\r\nport = args[1]\r\nHostAndPort config = new HostAndPort(host, port);\r\n        PooledConnectionProvider provider = new PooledConnectionProvider(config);\r\n        UnifiedJedis client = new UnifiedJedis(provider);\r\n```\r\n\r\n\r\nI tried to change ports and ip address from localhost to my actual machine Ip address and nothing works .","title":"Jedis DockerFile : Failed to connect to any host resolved for DNS name","body":"<p>so I'm trying to dockerize my class , and when running the container I keep getting this Exception .</p>\n<p>Here is my DockerFile :</p>\n<pre><code>FROM ubuntu\n\nRUN apt-get update &amp;&amp; apt-get install -y openjdk-17-jdk\nWORKDIR app\n\n#COPY target/streams-101-1.0-SNAPSHOT.jar red.jar\n\nCOPY target/prototype-1.0-SNAPSHOT-jar-with-dependencies.jar app.jar\n\nCMD [&quot;java&quot;, &quot;-jar&quot;,&quot;app.jar&quot;,&lt;My IP address&gt;,&quot;6379&quot;]\n</code></pre>\n<p>and I create my Jedis client like this :</p>\n<pre><code>\nhost = args[0]\nport = args[1]\nHostAndPort config = new HostAndPort(host, port);\n        PooledConnectionProvider provider = new PooledConnectionProvider(config);\n        UnifiedJedis client = new UnifiedJedis(provider);\n</code></pre>\n<p>I tried to change ports and ip address from localhost to my actual machine Ip address and nothing works .</p>\n"},{"tags":["java","ant","wildfly","ejbca"],"comments":[{"owner":{"account_id":4076597,"reputation":4537,"user_id":3348112,"accept_rate":75,"display_name":"CAustin"},"score":0,"creation_date":1693880563,"post_id":77038374,"comment_id":135814467,"body_markdown":"It looks like you need to specify a value for `appserver.home`","body":"It looks like you need to specify a value for <code>appserver.home</code>"},{"owner":{"account_id":25600556,"reputation":11,"user_id":19375640,"display_name":"codemaster1101"},"score":0,"creation_date":1693992671,"post_id":77038374,"comment_id":135831486,"body_markdown":"i solved it by adding a -D appserver.home=/path/to/my/wildfly/home/dir","body":"i solved it by adding a -D appserver.home=/path/to/my/wildfly/home/dir"}],"answers":[{"tags":[],"owner":{"account_id":3305966,"reputation":524,"user_id":2787839,"display_name":"primetomas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694010031,"creation_date":1694010031,"answer_id":77052817,"question_id":77038374,"body_markdown":"deploydb is not a valid command. You should read the installation instructions in the documentation. PostgreSQL is mentioned there.\r\nhttps://doc.primekey.com/ejbca/ejbca-installation\r\n","title":"EJBCA 7_4_3_2 database connectivity problem","body":"<p>deploydb is not a valid command. You should read the installation instructions in the documentation. PostgreSQL is mentioned there.\n<a href=\"https://doc.primekey.com/ejbca/ejbca-installation\" rel=\"nofollow noreferrer\">https://doc.primekey.com/ejbca/ejbca-installation</a></p>\n"}],"owner":{"account_id":25600556,"reputation":11,"user_id":19375640,"display_name":"codemaster1101"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694010031,"creation_date":1693836014,"question_id":77038374,"body_markdown":"I am using EJBCA 7_4_3_2.\r\nMy goal is to connect to a postgres database\r\nbut I keep on getting the following error output:\r\n\r\n```\r\nroot@guardian:/opt/kais/mes/install/guardian/ejbca/ejbca_ce_7_4_3_2# ant deploydb -Ddatabase=/opt/kais/mes/install/guardian/ejbca/ejbca_ce_7_4_3_2/conf/database.properties\r\nBuildfile: /opt/kais/mes/install/guardian/ejbca/ejbca_ce_7_4_3_2/build.xml\r\n\r\ncustomejbca.message:\r\n     [echo] No custom changes to merge.\r\n\r\nappserver.error.message:\r\n     [echo] &#39;appserver.type&#39; could not be detected or is not configured. Glassfish 3.1, Glassfish 4.0, JBoss 7.1.1, JBoss EAP 6.1, 6.2, 6.3, 6.4, WildFly 8, 9, 10 can be detected. (Is &#39;appserver.home&#39; configured?)\r\n\r\nBUILD FAILED\r\nTarget &quot;deploydb&quot; does not exist in the project &quot;ejbca&quot;.\r\n```\r\nI took a look at the build.xml file but i am not sure which target is used to connect to a database.\r\n\r\nCan someone help me out?\r\n","title":"EJBCA 7_4_3_2 database connectivity problem","body":"<p>I am using EJBCA 7_4_3_2.\nMy goal is to connect to a postgres database\nbut I keep on getting the following error output:</p>\n<pre><code>root@guardian:/opt/kais/mes/install/guardian/ejbca/ejbca_ce_7_4_3_2# ant deploydb -Ddatabase=/opt/kais/mes/install/guardian/ejbca/ejbca_ce_7_4_3_2/conf/database.properties\nBuildfile: /opt/kais/mes/install/guardian/ejbca/ejbca_ce_7_4_3_2/build.xml\n\ncustomejbca.message:\n     [echo] No custom changes to merge.\n\nappserver.error.message:\n     [echo] 'appserver.type' could not be detected or is not configured. Glassfish 3.1, Glassfish 4.0, JBoss 7.1.1, JBoss EAP 6.1, 6.2, 6.3, 6.4, WildFly 8, 9, 10 can be detected. (Is 'appserver.home' configured?)\n\nBUILD FAILED\nTarget &quot;deploydb&quot; does not exist in the project &quot;ejbca&quot;.\n</code></pre>\n<p>I took a look at the build.xml file but i am not sure which target is used to connect to a database.</p>\n<p>Can someone help me out?</p>\n"},{"tags":["java","linux","tcp","system-calls","serversocket"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":2,"creation_date":1692960184,"post_id":76976026,"comment_id":135699035,"body_markdown":"Wrap it with a `BufferedOutputStream`, you don&#39;t want to care about whether you&#39;re writing one or more bytes.","body":"Wrap it with a <code>BufferedOutputStream</code>, you don&#39;t want to care about whether you&#39;re writing one or more bytes."},{"owner":{"account_id":25357233,"reputation":41,"user_id":19173162,"display_name":"SadMan"},"score":0,"creation_date":1693463269,"post_id":76976026,"comment_id":135764767,"body_markdown":"Yes, sure. However, I still want to know the underlying mechanisms between them.","body":"Yes, sure. However, I still want to know the underlying mechanisms between them."}],"answers":[{"comments":[{"owner":{"account_id":25357233,"reputation":41,"user_id":19173162,"display_name":"SadMan"},"score":0,"creation_date":1694163778,"post_id":77052794,"comment_id":135858197,"body_markdown":"In my opinion, write(int b) is also invoke write(int[] bytes) and finally invoke native socketWrite0. I am not sure if my understanding is right.","body":"In my opinion, write(int b) is also invoke write(int[] bytes) and finally invoke native socketWrite0. I am not sure if my understanding is right."}],"tags":[],"owner":{"account_id":6983402,"reputation":165,"user_id":5355354,"display_name":"Jordan Sheinfeld"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694009881,"creation_date":1694009881,"answer_id":77052794,"question_id":76976026,"body_markdown":"This totally makes sense.\r\nSay you need to write 1000 bytes to the socket.\r\n\r\n    byte[] b = new byte[1000];\r\n\r\nDoing a for-loop on **b** and writing to the stream one by one will leave you looping inside the &quot;JVM&quot; thus &quot;suffering&quot; from the JVM performance.\r\n\r\nBut, calling directly to the **write (b)** method will trigger the underlying native socketWrite0 which will use a native way to write the buffer directly to the socket file descriptor which obviously not in the JVM and is natively faster.","title":"Performance gap between write(int b) and write(byte b[]) in Java","body":"<p>This totally makes sense.\nSay you need to write 1000 bytes to the socket.</p>\n<pre><code>byte[] b = new byte[1000];\n</code></pre>\n<p>Doing a for-loop on <strong>b</strong> and writing to the stream one by one will leave you looping inside the &quot;JVM&quot; thus &quot;suffering&quot; from the JVM performance.</p>\n<p>But, calling directly to the <strong>write (b)</strong> method will trigger the underlying native socketWrite0 which will use a native way to write the buffer directly to the socket file descriptor which obviously not in the JVM and is natively faster.</p>\n"}],"owner":{"account_id":25357233,"reputation":41,"user_id":19173162,"display_name":"SadMan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694009881,"creation_date":1692956401,"question_id":76976026,"body_markdown":"I find that, when I use `Socket socket = new Socket(); OutputStream outputStream = socket.getOutputStream();` and invoke write method, there are two choices: write(int b) and write(byte b[])， and I write code to test the performance of them. I found that write(byte b[]) is faster than write(int b). \r\nI read the source code and guess the difference maybe lead by the cost of applying a buffer and release the buffer. \r\nBut I am not sure I find the right answer because it may because the **system call** and the mechanism of **TCP/IP**.\r\n\r\nI tried to coding to test and read the source code, I guess it may because the using of `char BUF[MAX_BUFFER_LEN];`. I tried to apply space b.length times in java every time write(bytes[] b) is invoked and compare the differences of the two method, the result is the performance gap seems not so big.","title":"Performance gap between write(int b) and write(byte b[]) in Java","body":"<p>I find that, when I use <code>Socket socket = new Socket(); OutputStream outputStream = socket.getOutputStream();</code> and invoke write method, there are two choices: write(int b) and write(byte b[])， and I write code to test the performance of them. I found that write(byte b[]) is faster than write(int b).\nI read the source code and guess the difference maybe lead by the cost of applying a buffer and release the buffer.\nBut I am not sure I find the right answer because it may because the <strong>system call</strong> and the mechanism of <strong>TCP/IP</strong>.</p>\n<p>I tried to coding to test and read the source code, I guess it may because the using of <code>char BUF[MAX_BUFFER_LEN];</code>. I tried to apply space b.length times in java every time write(bytes[] b) is invoked and compare the differences of the two method, the result is the performance gap seems not so big.</p>\n"},{"tags":["java","security","oauth-2.0","csrf","owasp"],"comments":[{"owner":{"account_id":22226004,"reputation":13342,"user_id":16462950,"display_name":"Heiko Thei&#223;en"},"score":0,"creation_date":1672132384,"post_id":74917368,"comment_id":132225738,"body_markdown":"If I don&#39;t understand why this would be a security risk (which I don&#39;t in your case) I would ask the security team to describe a possible attack that is enabled by it.","body":"If I don&#39;t understand why this would be a security risk (which I don&#39;t in your case) I would ask the security team to describe a possible attack that is enabled by it."},{"owner":{"account_id":1457199,"reputation":4503,"user_id":1629242,"accept_rate":56,"display_name":"Amogh"},"score":0,"creation_date":1672139858,"post_id":74917368,"comment_id":132227364,"body_markdown":"@HeikoThei&#223;en Yes, I did asked this question and answer was, in this case CSRF token is being exposed in query parameter which is not recommended, malicious users can steal this token and perform CSRF for other non-oauth requests as I am using the same token. Their say is for OAuth request separate UUID should be generated,used and disposed once it&#39;s work is done.","body":"@HeikoThei&#223;en Yes, I did asked this question and answer was, in this case CSRF token is being exposed in query parameter which is not recommended, malicious users can steal this token and perform CSRF for other non-oauth requests as I am using the same token. Their say is for OAuth request separate UUID should be generated,used and disposed once it&#39;s work is done."},{"owner":{"account_id":22226004,"reputation":13342,"user_id":16462950,"display_name":"Heiko Thei&#223;en"},"score":1,"creation_date":1672140755,"post_id":74917368,"comment_id":132227551,"body_markdown":"CSRF tokens are not a measure against _malicious_ users, but against _victimised_ users. They offer a protection for the user against themselves, you might say. Malicious users can always ignore that. I do not yet see the possible attack here.","body":"CSRF tokens are not a measure against <i>malicious</i> users, but against <i>victimised</i> users. They offer a protection for the user against themselves, you might say. Malicious users can always ignore that. I do not yet see the possible attack here."}],"answers":[{"tags":[],"owner":{"account_id":11299340,"reputation":5234,"user_id":8285811,"display_name":"Akaisteph7"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694009347,"creation_date":1694009347,"answer_id":77052710,"question_id":74917368,"body_markdown":"It depends.\r\n\r\nYou can use the CSRF token publicly **only** if it has been implemented using the [Double Submit Cookie][1] (DSC) pattern. In this case, as you note, the token is passed in GET request headers.\r\n\r\nHowever, if your site uses the [Synchronizer Token Pattern][2] (STP), then this token **must be kept secret** at all times.\r\n\r\nIn your situation, your company seems to be using the DSC pattern so it is fine to use its value for the `state` parameter. As a general rule though, I would say it is generally safer to create a new secret to avoid the potential issue based on the token pattern used.\r\n\r\n\r\n  [1]: https://cheatsheetseries.owasp.org/cheatsheets/Cross-Site_Request_Forgery_Prevention_Cheat_Sheet.html#double-submit-cookie\r\n  [2]: https://cheatsheetseries.owasp.org/cheatsheets/Cross-Site_Request_Forgery_Prevention_Cheat_Sheet.html#synchronizer-token-pattern","title":"Can I use CSRF token as value for state parameter in OAuth flow?","body":"<p>It depends.</p>\n<p>You can use the CSRF token publicly <strong>only</strong> if it has been implemented using the <a href=\"https://cheatsheetseries.owasp.org/cheatsheets/Cross-Site_Request_Forgery_Prevention_Cheat_Sheet.html#double-submit-cookie\" rel=\"nofollow noreferrer\">Double Submit Cookie</a> (DSC) pattern. In this case, as you note, the token is passed in GET request headers.</p>\n<p>However, if your site uses the <a href=\"https://cheatsheetseries.owasp.org/cheatsheets/Cross-Site_Request_Forgery_Prevention_Cheat_Sheet.html#synchronizer-token-pattern\" rel=\"nofollow noreferrer\">Synchronizer Token Pattern</a> (STP), then this token <strong>must be kept secret</strong> at all times.</p>\n<p>In your situation, your company seems to be using the DSC pattern so it is fine to use its value for the <code>state</code> parameter. As a general rule though, I would say it is generally safer to create a new secret to avoid the potential issue based on the token pattern used.</p>\n"}],"owner":{"account_id":1457199,"reputation":4503,"user_id":1629242,"accept_rate":56,"display_name":"Amogh"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":287,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1694009347,"creation_date":1672030399,"question_id":74917368,"body_markdown":"While implementing Azure OAuth flow I have used `state` parameter, Azure docs says about `state` param:\r\n\r\n&gt; A value included in the request that is also returned in the token response. It can be a string of any content that you wish. A randomly generated unique value is typically used for preventing cross-site request forgery attacks. The value can also encode information about the user&#39;s state in the app before the authentication request occurred. For instance, it could encode the page or view they were on.\r\n\r\nSo, My web application is already generating such unique string and that is a CSRf token (UUID). So I used the same CSRF token (UUID) and passed to `state` parameter. When response comes from OAuth provider I have crossed with the CSRF token from session.\r\n\r\nBut, recently security team in my company said CSRF token should not used in this way. According to them\r\n\r\n&gt; A CRSF token is a secret that should not be shared. Using it as a state value is therefore improper use of the CSRF token and introduces a (small) security risk.\r\n\r\n\r\nBut, if I look closely at other normal (non-Oauth) requests then the same CSRF token is passed in request header, so I asked them that if CSRF token is secret then why it is being passed in request header that could also &quot;introduces a (small) security risk.&quot; the answer I received is not convincing. Hence asking this question on this large forum:\r\n\r\nCan we use CSRF token as a value for `state` parameter in OAuth request? Is there any security risk involve if we use CSRF token as `state` parameter?","title":"Can I use CSRF token as value for state parameter in OAuth flow?","body":"<p>While implementing Azure OAuth flow I have used <code>state</code> parameter, Azure docs says about <code>state</code> param:</p>\n<blockquote>\n<p>A value included in the request that is also returned in the token response. It can be a string of any content that you wish. A randomly generated unique value is typically used for preventing cross-site request forgery attacks. The value can also encode information about the user's state in the app before the authentication request occurred. For instance, it could encode the page or view they were on.</p>\n</blockquote>\n<p>So, My web application is already generating such unique string and that is a CSRf token (UUID). So I used the same CSRF token (UUID) and passed to <code>state</code> parameter. When response comes from OAuth provider I have crossed with the CSRF token from session.</p>\n<p>But, recently security team in my company said CSRF token should not used in this way. According to them</p>\n<blockquote>\n<p>A CRSF token is a secret that should not be shared. Using it as a state value is therefore improper use of the CSRF token and introduces a (small) security risk.</p>\n</blockquote>\n<p>But, if I look closely at other normal (non-Oauth) requests then the same CSRF token is passed in request header, so I asked them that if CSRF token is secret then why it is being passed in request header that could also &quot;introduces a (small) security risk.&quot; the answer I received is not convincing. Hence asking this question on this large forum:</p>\n<p>Can we use CSRF token as a value for <code>state</code> parameter in OAuth request? Is there any security risk involve if we use CSRF token as <code>state</code> parameter?</p>\n"},{"tags":["java","sockets","server","client"],"comments":[{"owner":{"account_id":6388606,"reputation":589,"user_id":4955612,"accept_rate":60,"display_name":"Andrew Kor"},"score":0,"creation_date":1689106422,"post_id":76665283,"comment_id":135165584,"body_markdown":"Yes, doesn&#39;t fix it","body":"Yes, doesn&#39;t fix it"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":0,"creation_date":1689107766,"post_id":76665283,"comment_id":135165880,"body_markdown":"server is not sending end of line while client is expecting one - and I don&#39;t like the idea of having a `PrintWriter` instance created for each message","body":"server is not sending end of line while client is expecting one - and I don&#39;t like the idea of having a <code>PrintWriter</code> instance created for each message"},{"owner":{"account_id":6388606,"reputation":589,"user_id":4955612,"accept_rate":60,"display_name":"Andrew Kor"},"score":0,"creation_date":1689108934,"post_id":76665283,"comment_id":135166115,"body_markdown":"@user16320675 Simply changing it to `out.println()` fixed the issue. Thanks!","body":"@user16320675 Simply changing it to <code>out.println()</code> fixed the issue. Thanks!"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1689120213,"post_id":76665283,"comment_id":135167407,"body_markdown":"Get rid of the `sleep()` before `accept()`. It is literally a waste of time.","body":"Get rid of the <code>sleep()</code> before <code>accept()</code>. It is literally a waste of time."}],"answers":[{"tags":[],"owner":{"account_id":6983402,"reputation":165,"user_id":5355354,"display_name":"Jordan Sheinfeld"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694009344,"creation_date":1694009344,"answer_id":77052709,"question_id":76665283,"body_markdown":"In this method: you are using **out.print (message)** , but this will not flush the data since flush happens only on *printf, format or println* in **PrintWriter** when you initialize it with &quot;true&quot;.\r\n\r\nYou should add &quot;out.flush();&quot; just after out.print. \r\n\r\n    public static void sendMessageToPlayer(String playerID, String message) throws IOException {\r\n            System.out.println(&quot;Sending message..&quot;);\r\n            Socket socket = playerIDToSocket.get(playerID);\r\n            PrintWriter out = new PrintWriter(socket.getOutputStream(), true);\r\n            out.print(message);\r\n            out.flush();\r\n        }","title":"Client doesn&#39;t receive message from server (Socket programming)","body":"<p>In this method: you are using <strong>out.print (message)</strong> , but this will not flush the data since flush happens only on <em>printf, format or println</em> in <strong>PrintWriter</strong> when you initialize it with &quot;true&quot;.</p>\n<p>You should add &quot;out.flush();&quot; just after out.print.</p>\n<pre><code>public static void sendMessageToPlayer(String playerID, String message) throws IOException {\n        System.out.println(&quot;Sending message..&quot;);\n        Socket socket = playerIDToSocket.get(playerID);\n        PrintWriter out = new PrintWriter(socket.getOutputStream(), true);\n        out.print(message);\n        out.flush();\n    }\n</code></pre>\n"}],"owner":{"account_id":6388606,"reputation":589,"user_id":4955612,"accept_rate":60,"display_name":"Andrew Kor"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694009344,"creation_date":1689104625,"question_id":76665283,"body_markdown":"Every game tick, a server wishes to send each connected client a message, using the `sendGameWorldSections()` method. It does this in a new thread, so that the game ticker keeps running and doesn&#39;t block the thread. When the static method `Server.sendMessageToPlayer(playerID,gameWorldSectionString);` is called, the method is meant to get the `Socket` of the `HashMap&lt;String,Socket&gt; playerIDToSocket` , then get its `OutputStream`, and send the message to that client. The `playerIDToSocket` map maps the `playerID` (as a string) to a `Socket`. The way it stores the playerID and Socket is: the server accepts the connection from the client, the client separately sends a message as a `JSONObject` which just states the PlayerID of the player who just connected, and then the server stores it, along with the `Socket`, into the hashmap. The client is  supposed to print each message it receives onto the console. When the server sends the message to the client (The game world section), the client never receives the message. But sometimes, when I stop the Client program, it will just print every single message it received since it connected, all in one batch. Is it blocking somewhere? I can&#39;t seem to solve the problem.\r\n\r\nGameTicker class:\r\n\r\n    package GameEngine;\r\n    \r\n    import GameEngine.Game.PlayerManager;\r\n    import GameEngine.Game.World;\r\n    import GameEngine.Network.Server;\r\n    import org.json.JSONException;\r\n    import org.json.JSONObject;\r\n    \r\n    import java.io.IOException;\r\n    \r\n    \r\n    public class GameTicker extends Thread{\r\n    \r\n        public final long GAME_TICK = 2000000000; // The smallest unit of time in the game. (0.2s)\r\n        public int ticksPassed = 0;\r\n    \r\n    \r\n        /**\r\n         * This is the beating heart of the game engine. It controls the game state, receives inputs, and informs the outputter\r\n         * to send stuff to clients.\r\n         *\r\n         * Takes inputs of the current tick and then processes them (same thread)\r\n         *\r\n         * After each tick end, send messages to all clients informing them of the new sections.\r\n         *\r\n         *\r\n         */\r\n        @Override\r\n        public void run() {\r\n            long gameStartTime = System.nanoTime();\r\n            long lastTickEnd = System.nanoTime();\r\n            while(true){\r\n                if(System.nanoTime() - lastTickEnd &gt;= GAME_TICK){\r\n    \r\n                    //GameStateManager.performPlayerActions();\r\n                    //GameStateManager.performGameWorldActions(); //\r\n                    new Thread(new Runnable() {\r\n                        @Override\r\n                        public void run() {\r\n                            try {\r\n                                sendGameWorldSections();\r\n                            } catch (JSONException e) {\r\n                                throw new RuntimeException(e);\r\n                            }\r\n                        }\r\n                    }).start();\r\n                    lastTickEnd = System.nanoTime();\r\n                    ticksPassed++;\r\n                    System.out.println(&quot;&gt;&gt;GAME TICKER: Tick passed. #&quot; + ticksPassed );\r\n                }\r\n            }\r\n        }\r\n    \r\n        /**\r\n         * Sends  sections of the game to each player that is logged in.\r\n         * @throws JSONException\r\n         */\r\n        public void sendGameWorldSections() throws JSONException {\r\n            System.out.println(&quot;Sending game world sections..&quot;);\r\n            for(int i = 0; i &lt; PlayerManager.loggedInPlayerIDs.size(); i++){\r\n    \r\n                String playerID = PlayerManager.loggedInPlayerIDs.get(i);\r\n    \r\n                int xP = PlayerManager.players.get(playerID).getX(); // Position x of player\r\n                int yP = PlayerManager.players.get(playerID).getY(); // Position y of player\r\n                int zP = PlayerManager.players.get(playerID).getZ();\r\n    \r\n                long start = System.currentTimeMillis();\r\n                JSONObject gameWorldSectionJSON = null;\r\n                try {\r\n                    gameWorldSectionJSON = World.getGameWorldSection(zP,xP,yP);\r\n                } catch (JSONException e) {\r\n                    throw new RuntimeException(e);\r\n                }\r\n                System.out.println(System.currentTimeMillis() - start + &quot;MS to get JSON of section.&quot;);\r\n                try {\r\n                    gameWorldSectionJSON.put(&quot;RESULT&quot;,&quot;GAME_WORLD_SECTION&quot;);\r\n                } catch (JSONException e) {\r\n                    throw new RuntimeException(e);\r\n                }\r\n                String gameWorldSectionString = gameWorldSectionJSON.toString();\r\n                try {\r\n                    Server.sendMessageToPlayer(playerID,gameWorldSectionString);\r\n                } catch (IOException e) {\r\n                    throw new RuntimeException(e);\r\n                }\r\n            }\r\n    \r\n        }\r\n    \r\n    }\r\n\r\nServer class:\r\n\r\n    package GameEngine.Network;\r\n    \r\n    import GameEngine.Game.Player;\r\n    import GameEngine.Game.PlayerManager;\r\n    import org.json.JSONException;\r\n    import org.json.JSONObject;\r\n    \r\n    import java.io.*;\r\n    import java.net.*;\r\n    import java.util.ArrayList;\r\n    import java.util.HashMap;\r\n    \r\n    // Server class\r\n\r\n    public class Server extends Thread{\r\n        /**\r\n         * We must have:\r\n         * - Player ID -&gt; InetAddress\r\n         */\r\n    \r\n        /**\r\n         * STEP 1: Client connects to the server.\r\n         * STEP 2: Client sends its user ID. The server then adds its inetaddress to the list. This is called Logging in.\r\n         *\r\n         * STEP 3..n:\r\n         * - Client makes requests to the server, which the ClientHandler handles the message then replies\r\n         * - Server can send message to a client or multiple clients.\r\n         */\r\n    \r\n        public static HashMap&lt;String, Socket&gt;  playerIDToSocket = new HashMap&lt;&gt;(); // THESE ARE LOGGED IN.\r\n    \r\n        public void run()\r\n        {\r\n            listenForConnections();\r\n        }\r\n        private void listenForConnections(){\r\n            ServerSocket server = null;\r\n            try {\r\n    \r\n                server = new ServerSocket(1234);\r\n                server.setReuseAddress(true);\r\n    \r\n                while (true) {\r\n                    Thread.sleep(1);\r\n    \r\n                    Socket client = server.accept();\r\n    \r\n    \r\n                    System.out.println(&quot;New client connected&quot;\r\n                            + client.getInetAddress()\r\n                            .getHostAddress());\r\n    \r\n                    ClientHandler connectedClient = new ClientHandler(client);\r\n    \r\n                    connectedClient.start();\r\n                }\r\n            }\r\n            catch (IOException e) {\r\n                e.printStackTrace();\r\n            } catch (InterruptedException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n    \r\n    \r\n        }\r\n    //    public void sendMessagesToPlayers() throws InterruptedException, IOException {\r\n    //        while(true){\r\n    //            Thread.sleep(1);\r\n    //            for(int i = 0; i &lt; messagesToPlayers.size(); i++){\r\n    //                ClientMessage clientMessage = messagesToPlayers.get(i);\r\n    //                PrintWriter out = new PrintWriter(clientMessage.getSocket().getOutputStream(), true);\r\n    //                out.print(clientMessage.getMessage());\r\n    //                out.flush();\r\n    //            }\r\n    //        }\r\n    //    }\r\n    \r\n        public static void sendMessageToPlayer(String playerID, String message) throws IOException {\r\n            System.out.println(&quot;Sending message..&quot;);\r\n            Socket socket = playerIDToSocket.get(playerID);\r\n            PrintWriter out = new PrintWriter(socket.getOutputStream(), true);\r\n            out.print(message);\r\n        }\r\n    \r\n    \r\n    \r\n        private class ClientHandler extends Thread {\r\n            private final Socket clientSocket;\r\n    \r\n            // Constructor\r\n            public ClientHandler(Socket socket)\r\n            {\r\n                this.clientSocket = socket;\r\n            }\r\n    \r\n            public void run()\r\n            {\r\n    \r\n                try {\r\n    \r\n                    PrintWriter out = new PrintWriter(clientSocket.getOutputStream(), true);\r\n                    BufferedReader in = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));\r\n    \r\n                    String line;\r\n                    while(true) {\r\n                        Thread.sleep(1);\r\n                        while ((line = in.readLine()) != null) {\r\n    \r\n                            // writing the received message from\r\n                            // client\r\n                            System.out.printf(&quot; Sent from client &quot;+ clientSocket +&quot;: %s\\n&quot;, line);\r\n                            JSONObject request = new JSONObject(line);\r\n                            switch (request.getString(&quot;COMMAND&quot;)) {\r\n                                case &quot;SEND_SOCKET_DATA&quot;:\r\n                                    String playerID = request.getString(&quot;PLAYER_ID&quot;);\r\n                                    playerIDToSocket.put(playerID, clientSocket);\r\n                                    PlayerManager.loggedInPlayerIDs.add(playerID);\r\n                                    break;\r\n                            }\r\n                            out.println(&quot;You are now logged in.&quot;);\r\n                        }\r\n                    }\r\n                }\r\n                catch (IOException e) {\r\n                    e.printStackTrace();\r\n                } catch (JSONException e) {\r\n                    throw new RuntimeException(e);\r\n                } catch (InterruptedException e) {\r\n                    throw new RuntimeException(e);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nClient class:\r\n\r\n    package Network;\r\n    \r\n    import Game.Entities.Doorway;\r\n    import Game.Entities.EmptyBlock;\r\n    import Game.Entities.GraphicEntity;\r\n    import Game.GameWorldSection;\r\n    import Game.Player;\r\n    import Game.Tile;\r\n    import Graphics.SpriteData;\r\n    import jdk.jshell.execution.Util;\r\n    import org.json.JSONArray;\r\n    import org.json.JSONException;\r\n    import org.json.JSONObject;\r\n    \r\n    import javax.swing.text.Utilities;\r\n    import java.io.*;\r\n    import java.net.Socket;\r\n    import java.net.UnknownHostException;\r\n    import java.util.ArrayList;\r\n    import java.util.Iterator;\r\n    import java.util.Scanner;\r\n    \r\n    public class Client extends Thread{\r\n    \r\n    \r\n        // driver code\r\n    \r\n        private static Socket socket;\r\n        public static boolean isJSONValid(String test) {\r\n            try {\r\n                new JSONObject(test);\r\n            } catch (JSONException ex) {\r\n                // edited, to include @Arthur&#39;s comment\r\n                // e.g. in case JSONArray is valid as well...\r\n                try {\r\n                    new JSONArray(test);\r\n                } catch (JSONException ex1) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n    \r\n        public void listen(BufferedReader in){\r\n    \r\n            // Listening for server messages\r\n            try {\r\n                String message = in.readLine();\r\n                System.out.println(&quot;[SERVER]: &quot;\r\n                        +message);\r\n                if(isJSONValid(message)){\r\n                    JSONObject json = new JSONObject(message);\r\n                    switch(json.getString(&quot;RESULT&quot;)) {\r\n                        case &quot;GAME_WORLD_SECTION&quot;:\r\n                            // Clear the tiles\r\n                            GameWorldSection.clearTiles();\r\n                            Tile[][] tiles = GameWorldSection.getTiles();\r\n                            JSONObject coordinates = json.getJSONObject(&quot;COORDINATES&quot;);\r\n                            Iterator&lt;String&gt; coordinatesIterator = coordinates.keys();\r\n                            while (coordinatesIterator.hasNext()) {\r\n                                String coordinateKey = coordinatesIterator.next();\r\n                                JSONObject coordinateJSON = coordinates.getJSONObject(coordinateKey);\r\n                                int real_x = Integer.parseInt(coordinateKey.split(&quot;,&quot;)[0]);\r\n                                int real_y = Integer.parseInt(coordinateKey.split(&quot;,&quot;)[1]);\r\n                                int painted_x = real_x - json.getInt(&quot;LOWEST_X&quot;);\r\n                                int painted_y = real_y - json.getInt(&quot;LOWEST_Y&quot;);\r\n                                JSONArray entities = coordinateJSON.getJSONArray(&quot;ENTITIES&quot;);\r\n                                for (int i = 0; i &lt; entities.length(); i++) {\r\n                                    JSONObject playerObj = entities.getJSONObject(i);\r\n                                    switch (playerObj.getString(&quot;NAME&quot;)) {\r\n                                        case &quot;EMPTY_BLOCK&quot;:\r\n                                            tiles[painted_x][painted_y].addEntity(new EmptyBlock());\r\n                                            break;\r\n                                        case &quot;TUTORIAL_FLOOR&quot;:\r\n                                            tiles[painted_x][painted_y].addEntity(new GraphicEntity(SpriteData.SPRITE_NAME.TUTORIAL_GROUND));\r\n                                            break;\r\n                                        case &quot;DOORWAY&quot;:\r\n                                            tiles[painted_x][painted_y].addEntity(new Doorway(SpriteData.SPRITE_NAME.DOORWAY));\r\n                                            break;\r\n                                        case &quot;PLAYER&quot;:\r\n                                            SpriteData.SPRITE_NAME spriteName = null;\r\n    \r\n                                            boolean isMoving = playerObj.getBoolean(&quot;IS_MOVING&quot;);\r\n                                            switch (playerObj.getString(&quot;DIRECTION_FACING&quot;)) {\r\n                                                case &quot;NORTH&quot;:\r\n                                                    if (isMoving) {\r\n                                                        spriteName = (SpriteData.SPRITE_NAME.CHARACTER_WALKING_NORTH);\r\n                                                    } else {\r\n                                                        spriteName = (SpriteData.SPRITE_NAME.CHARACTER_FACING_NORTH);\r\n                                                    }\r\n                                                    break;\r\n                                                case &quot;WEST&quot;:\r\n                                                    if (isMoving) {\r\n                                                        spriteName = (SpriteData.SPRITE_NAME.CHARACTER_WALKING_WEST);\r\n                                                    } else {\r\n                                                        spriteName = (SpriteData.SPRITE_NAME.CHARACTER_FACING_WEST);\r\n                                                    }\r\n                                                    break;\r\n                                                case &quot;SOUTH&quot;:\r\n                                                    if (isMoving) {\r\n                                                        spriteName = (SpriteData.SPRITE_NAME.CHARACTER_WALKING_SOUTH);\r\n                                                    } else {\r\n                                                        spriteName = (SpriteData.SPRITE_NAME.CHARACTER_FACING_SOUTH);\r\n                                                    }\r\n                                                    break;\r\n                                                case &quot;EAST&quot;:\r\n                                                    if (isMoving) {\r\n                                                        spriteName = (SpriteData.SPRITE_NAME.CHARACTER_WALKING_EAST);\r\n                                                    } else {\r\n                                                        spriteName = (SpriteData.SPRITE_NAME.CHARACTER_FACING_EAST);\r\n                                                    }\r\n                                                    break;\r\n                                            }\r\n                                            tiles[painted_x][painted_y].addEntity(new Player(spriteName));\r\n                                            break;\r\n                                    }\r\n                                }\r\n                            }\r\n                    }\r\n                }\r\n                else{\r\n                    //\r\n                }\r\n    \r\n                } catch (IOException e) {\r\n                throw new RuntimeException(e);\r\n            } catch (JSONException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        }\r\n        public void run()\r\n        {\r\n            // establish a connection by providing host and port\r\n            // number\r\n    \r\n    \r\n            try {\r\n                socket = new Socket(&quot;localhost&quot;, 1234);\r\n                PrintWriter out = new PrintWriter(socket.getOutputStream(), true);\r\n                // reading from server\r\n                BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));\r\n    \r\n    \r\n                JSONObject clientData = new JSONObject();\r\n                clientData.put(&quot;COMMAND&quot;,&quot;SEND_SOCKET_DATA&quot;);\r\n                clientData.put(&quot;PLAYER_ID&quot;,&quot;123&quot;);\r\n                out.println(clientData.toString());\r\n                out.flush();\r\n                while(true) {\r\n                    listen(in);\r\n                }\r\n            } catch (IOException e) {\r\n                throw new RuntimeException(e);\r\n            }catch(JSONException e) {\r\n            }\r\n            // writing to server\r\n        }\r\n    \r\n    }\r\n\r\n","title":"Client doesn&#39;t receive message from server (Socket programming)","body":"<p>Every game tick, a server wishes to send each connected client a message, using the <code>sendGameWorldSections()</code> method. It does this in a new thread, so that the game ticker keeps running and doesn't block the thread. When the static method <code>Server.sendMessageToPlayer(playerID,gameWorldSectionString);</code> is called, the method is meant to get the <code>Socket</code> of the <code>HashMap&lt;String,Socket&gt; playerIDToSocket</code> , then get its <code>OutputStream</code>, and send the message to that client. The <code>playerIDToSocket</code> map maps the <code>playerID</code> (as a string) to a <code>Socket</code>. The way it stores the playerID and Socket is: the server accepts the connection from the client, the client separately sends a message as a <code>JSONObject</code> which just states the PlayerID of the player who just connected, and then the server stores it, along with the <code>Socket</code>, into the hashmap. The client is  supposed to print each message it receives onto the console. When the server sends the message to the client (The game world section), the client never receives the message. But sometimes, when I stop the Client program, it will just print every single message it received since it connected, all in one batch. Is it blocking somewhere? I can't seem to solve the problem.</p>\n<p>GameTicker class:</p>\n<pre><code>package GameEngine;\n\nimport GameEngine.Game.PlayerManager;\nimport GameEngine.Game.World;\nimport GameEngine.Network.Server;\nimport org.json.JSONException;\nimport org.json.JSONObject;\n\nimport java.io.IOException;\n\n\npublic class GameTicker extends Thread{\n\n    public final long GAME_TICK = 2000000000; // The smallest unit of time in the game. (0.2s)\n    public int ticksPassed = 0;\n\n\n    /**\n     * This is the beating heart of the game engine. It controls the game state, receives inputs, and informs the outputter\n     * to send stuff to clients.\n     *\n     * Takes inputs of the current tick and then processes them (same thread)\n     *\n     * After each tick end, send messages to all clients informing them of the new sections.\n     *\n     *\n     */\n    @Override\n    public void run() {\n        long gameStartTime = System.nanoTime();\n        long lastTickEnd = System.nanoTime();\n        while(true){\n            if(System.nanoTime() - lastTickEnd &gt;= GAME_TICK){\n\n                //GameStateManager.performPlayerActions();\n                //GameStateManager.performGameWorldActions(); //\n                new Thread(new Runnable() {\n                    @Override\n                    public void run() {\n                        try {\n                            sendGameWorldSections();\n                        } catch (JSONException e) {\n                            throw new RuntimeException(e);\n                        }\n                    }\n                }).start();\n                lastTickEnd = System.nanoTime();\n                ticksPassed++;\n                System.out.println(&quot;&gt;&gt;GAME TICKER: Tick passed. #&quot; + ticksPassed );\n            }\n        }\n    }\n\n    /**\n     * Sends  sections of the game to each player that is logged in.\n     * @throws JSONException\n     */\n    public void sendGameWorldSections() throws JSONException {\n        System.out.println(&quot;Sending game world sections..&quot;);\n        for(int i = 0; i &lt; PlayerManager.loggedInPlayerIDs.size(); i++){\n\n            String playerID = PlayerManager.loggedInPlayerIDs.get(i);\n\n            int xP = PlayerManager.players.get(playerID).getX(); // Position x of player\n            int yP = PlayerManager.players.get(playerID).getY(); // Position y of player\n            int zP = PlayerManager.players.get(playerID).getZ();\n\n            long start = System.currentTimeMillis();\n            JSONObject gameWorldSectionJSON = null;\n            try {\n                gameWorldSectionJSON = World.getGameWorldSection(zP,xP,yP);\n            } catch (JSONException e) {\n                throw new RuntimeException(e);\n            }\n            System.out.println(System.currentTimeMillis() - start + &quot;MS to get JSON of section.&quot;);\n            try {\n                gameWorldSectionJSON.put(&quot;RESULT&quot;,&quot;GAME_WORLD_SECTION&quot;);\n            } catch (JSONException e) {\n                throw new RuntimeException(e);\n            }\n            String gameWorldSectionString = gameWorldSectionJSON.toString();\n            try {\n                Server.sendMessageToPlayer(playerID,gameWorldSectionString);\n            } catch (IOException e) {\n                throw new RuntimeException(e);\n            }\n        }\n\n    }\n\n}\n</code></pre>\n<p>Server class:</p>\n<pre><code>package GameEngine.Network;\n\nimport GameEngine.Game.Player;\nimport GameEngine.Game.PlayerManager;\nimport org.json.JSONException;\nimport org.json.JSONObject;\n\nimport java.io.*;\nimport java.net.*;\nimport java.util.ArrayList;\nimport java.util.HashMap;\n\n// Server class\n\npublic class Server extends Thread{\n    /**\n     * We must have:\n     * - Player ID -&gt; InetAddress\n     */\n\n    /**\n     * STEP 1: Client connects to the server.\n     * STEP 2: Client sends its user ID. The server then adds its inetaddress to the list. This is called Logging in.\n     *\n     * STEP 3..n:\n     * - Client makes requests to the server, which the ClientHandler handles the message then replies\n     * - Server can send message to a client or multiple clients.\n     */\n\n    public static HashMap&lt;String, Socket&gt;  playerIDToSocket = new HashMap&lt;&gt;(); // THESE ARE LOGGED IN.\n\n    public void run()\n    {\n        listenForConnections();\n    }\n    private void listenForConnections(){\n        ServerSocket server = null;\n        try {\n\n            server = new ServerSocket(1234);\n            server.setReuseAddress(true);\n\n            while (true) {\n                Thread.sleep(1);\n\n                Socket client = server.accept();\n\n\n                System.out.println(&quot;New client connected&quot;\n                        + client.getInetAddress()\n                        .getHostAddress());\n\n                ClientHandler connectedClient = new ClientHandler(client);\n\n                connectedClient.start();\n            }\n        }\n        catch (IOException e) {\n            e.printStackTrace();\n        } catch (InterruptedException e) {\n            throw new RuntimeException(e);\n        }\n\n\n    }\n//    public void sendMessagesToPlayers() throws InterruptedException, IOException {\n//        while(true){\n//            Thread.sleep(1);\n//            for(int i = 0; i &lt; messagesToPlayers.size(); i++){\n//                ClientMessage clientMessage = messagesToPlayers.get(i);\n//                PrintWriter out = new PrintWriter(clientMessage.getSocket().getOutputStream(), true);\n//                out.print(clientMessage.getMessage());\n//                out.flush();\n//            }\n//        }\n//    }\n\n    public static void sendMessageToPlayer(String playerID, String message) throws IOException {\n        System.out.println(&quot;Sending message..&quot;);\n        Socket socket = playerIDToSocket.get(playerID);\n        PrintWriter out = new PrintWriter(socket.getOutputStream(), true);\n        out.print(message);\n    }\n\n\n\n    private class ClientHandler extends Thread {\n        private final Socket clientSocket;\n\n        // Constructor\n        public ClientHandler(Socket socket)\n        {\n            this.clientSocket = socket;\n        }\n\n        public void run()\n        {\n\n            try {\n\n                PrintWriter out = new PrintWriter(clientSocket.getOutputStream(), true);\n                BufferedReader in = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));\n\n                String line;\n                while(true) {\n                    Thread.sleep(1);\n                    while ((line = in.readLine()) != null) {\n\n                        // writing the received message from\n                        // client\n                        System.out.printf(&quot; Sent from client &quot;+ clientSocket +&quot;: %s\\n&quot;, line);\n                        JSONObject request = new JSONObject(line);\n                        switch (request.getString(&quot;COMMAND&quot;)) {\n                            case &quot;SEND_SOCKET_DATA&quot;:\n                                String playerID = request.getString(&quot;PLAYER_ID&quot;);\n                                playerIDToSocket.put(playerID, clientSocket);\n                                PlayerManager.loggedInPlayerIDs.add(playerID);\n                                break;\n                        }\n                        out.println(&quot;You are now logged in.&quot;);\n                    }\n                }\n            }\n            catch (IOException e) {\n                e.printStackTrace();\n            } catch (JSONException e) {\n                throw new RuntimeException(e);\n            } catch (InterruptedException e) {\n                throw new RuntimeException(e);\n            }\n        }\n    }\n}\n</code></pre>\n<p>Client class:</p>\n<pre><code>package Network;\n\nimport Game.Entities.Doorway;\nimport Game.Entities.EmptyBlock;\nimport Game.Entities.GraphicEntity;\nimport Game.GameWorldSection;\nimport Game.Player;\nimport Game.Tile;\nimport Graphics.SpriteData;\nimport jdk.jshell.execution.Util;\nimport org.json.JSONArray;\nimport org.json.JSONException;\nimport org.json.JSONObject;\n\nimport javax.swing.text.Utilities;\nimport java.io.*;\nimport java.net.Socket;\nimport java.net.UnknownHostException;\nimport java.util.ArrayList;\nimport java.util.Iterator;\nimport java.util.Scanner;\n\npublic class Client extends Thread{\n\n\n    // driver code\n\n    private static Socket socket;\n    public static boolean isJSONValid(String test) {\n        try {\n            new JSONObject(test);\n        } catch (JSONException ex) {\n            // edited, to include @Arthur's comment\n            // e.g. in case JSONArray is valid as well...\n            try {\n                new JSONArray(test);\n            } catch (JSONException ex1) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    public void listen(BufferedReader in){\n\n        // Listening for server messages\n        try {\n            String message = in.readLine();\n            System.out.println(&quot;[SERVER]: &quot;\n                    +message);\n            if(isJSONValid(message)){\n                JSONObject json = new JSONObject(message);\n                switch(json.getString(&quot;RESULT&quot;)) {\n                    case &quot;GAME_WORLD_SECTION&quot;:\n                        // Clear the tiles\n                        GameWorldSection.clearTiles();\n                        Tile[][] tiles = GameWorldSection.getTiles();\n                        JSONObject coordinates = json.getJSONObject(&quot;COORDINATES&quot;);\n                        Iterator&lt;String&gt; coordinatesIterator = coordinates.keys();\n                        while (coordinatesIterator.hasNext()) {\n                            String coordinateKey = coordinatesIterator.next();\n                            JSONObject coordinateJSON = coordinates.getJSONObject(coordinateKey);\n                            int real_x = Integer.parseInt(coordinateKey.split(&quot;,&quot;)[0]);\n                            int real_y = Integer.parseInt(coordinateKey.split(&quot;,&quot;)[1]);\n                            int painted_x = real_x - json.getInt(&quot;LOWEST_X&quot;);\n                            int painted_y = real_y - json.getInt(&quot;LOWEST_Y&quot;);\n                            JSONArray entities = coordinateJSON.getJSONArray(&quot;ENTITIES&quot;);\n                            for (int i = 0; i &lt; entities.length(); i++) {\n                                JSONObject playerObj = entities.getJSONObject(i);\n                                switch (playerObj.getString(&quot;NAME&quot;)) {\n                                    case &quot;EMPTY_BLOCK&quot;:\n                                        tiles[painted_x][painted_y].addEntity(new EmptyBlock());\n                                        break;\n                                    case &quot;TUTORIAL_FLOOR&quot;:\n                                        tiles[painted_x][painted_y].addEntity(new GraphicEntity(SpriteData.SPRITE_NAME.TUTORIAL_GROUND));\n                                        break;\n                                    case &quot;DOORWAY&quot;:\n                                        tiles[painted_x][painted_y].addEntity(new Doorway(SpriteData.SPRITE_NAME.DOORWAY));\n                                        break;\n                                    case &quot;PLAYER&quot;:\n                                        SpriteData.SPRITE_NAME spriteName = null;\n\n                                        boolean isMoving = playerObj.getBoolean(&quot;IS_MOVING&quot;);\n                                        switch (playerObj.getString(&quot;DIRECTION_FACING&quot;)) {\n                                            case &quot;NORTH&quot;:\n                                                if (isMoving) {\n                                                    spriteName = (SpriteData.SPRITE_NAME.CHARACTER_WALKING_NORTH);\n                                                } else {\n                                                    spriteName = (SpriteData.SPRITE_NAME.CHARACTER_FACING_NORTH);\n                                                }\n                                                break;\n                                            case &quot;WEST&quot;:\n                                                if (isMoving) {\n                                                    spriteName = (SpriteData.SPRITE_NAME.CHARACTER_WALKING_WEST);\n                                                } else {\n                                                    spriteName = (SpriteData.SPRITE_NAME.CHARACTER_FACING_WEST);\n                                                }\n                                                break;\n                                            case &quot;SOUTH&quot;:\n                                                if (isMoving) {\n                                                    spriteName = (SpriteData.SPRITE_NAME.CHARACTER_WALKING_SOUTH);\n                                                } else {\n                                                    spriteName = (SpriteData.SPRITE_NAME.CHARACTER_FACING_SOUTH);\n                                                }\n                                                break;\n                                            case &quot;EAST&quot;:\n                                                if (isMoving) {\n                                                    spriteName = (SpriteData.SPRITE_NAME.CHARACTER_WALKING_EAST);\n                                                } else {\n                                                    spriteName = (SpriteData.SPRITE_NAME.CHARACTER_FACING_EAST);\n                                                }\n                                                break;\n                                        }\n                                        tiles[painted_x][painted_y].addEntity(new Player(spriteName));\n                                        break;\n                                }\n                            }\n                        }\n                }\n            }\n            else{\n                //\n            }\n\n            } catch (IOException e) {\n            throw new RuntimeException(e);\n        } catch (JSONException e) {\n            throw new RuntimeException(e);\n        }\n    }\n    public void run()\n    {\n        // establish a connection by providing host and port\n        // number\n\n\n        try {\n            socket = new Socket(&quot;localhost&quot;, 1234);\n            PrintWriter out = new PrintWriter(socket.getOutputStream(), true);\n            // reading from server\n            BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));\n\n\n            JSONObject clientData = new JSONObject();\n            clientData.put(&quot;COMMAND&quot;,&quot;SEND_SOCKET_DATA&quot;);\n            clientData.put(&quot;PLAYER_ID&quot;,&quot;123&quot;);\n            out.println(clientData.toString());\n            out.flush();\n            while(true) {\n                listen(in);\n            }\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }catch(JSONException e) {\n        }\n        // writing to server\n    }\n\n}\n</code></pre>\n"},{"tags":["java","eclipse","macos","jvm"],"comments":[{"owner":{"account_id":3159259,"reputation":109678,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1694009391,"post_id":77052686,"comment_id":135835121,"body_markdown":"Why are you using an old version of Eclipse? Use the current 2023-06 and make sure the Eclipse and Java are both aarm64 or both x86_64","body":"Why are you using an old version of Eclipse? Use the current 2023-06 and make sure the Eclipse and Java are both aarm64 or both x86_64"},{"owner":{"account_id":29379635,"reputation":1,"user_id":22510443,"display_name":"Daniel"},"score":0,"creation_date":1694011297,"post_id":77052686,"comment_id":135835623,"body_markdown":"Thanks for your kind reply.\nI am a beginner and downloaded 2022 although it is an older version to get started with the textbook.\nAfter some research I found that I downloaded the package including the Japanese plugin and perhaps there was a problem there.\nI will use the latest official version.","body":"Thanks for your kind reply. I am a beginner and downloaded 2022 although it is an older version to get started with the textbook. After some research I found that I downloaded the package including the Japanese plugin and perhaps there was a problem there. I will use the latest official version."}],"owner":{"account_id":29379635,"reputation":1,"user_id":22510443,"display_name":"Daniel"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1694009729,"answer_count":0,"score":0,"last_activity_date":1694009190,"creation_date":1694009190,"question_id":77052686,"body_markdown":"When I downloaded Eclipse IDE (Version 2022-12) and actually tried to open it on MacOS Ventura 13.4(arm64), I got the image &quot;The JVM shared library &quot;/Library/Java/JavaVirtualMachines/jdk-20.jdk/Contents/Home/bin/. /lib/server/libjvm.dylib&quot;does not contain the JNI_CreateJavaVM symbol.\r\n[enter image description here](https://i.stack.imgur.com/Uz3I7.png)\r\n\r\nI have looked at other sites to find the jvm home path and rewritten info.plst but still get the same error message as before.\r\n[enter image description here](https://i.stack.imgur.com/IcNmx.png)  [enter image description here](https://i.stack.imgur.com/19Bfg.png)\r\n\r\nI would be glad to know how to solve this problem.\r\n\r\nthanks for the help","title":"EclipseIDE(2022-12): JVM shared library does not contain the JNI_CreateJavaVM symbol","body":"<p>When I downloaded Eclipse IDE (Version 2022-12) and actually tried to open it on MacOS Ventura 13.4(arm64), I got the image &quot;The JVM shared library &quot;/Library/Java/JavaVirtualMachines/jdk-20.jdk/Contents/Home/bin/. /lib/server/libjvm.dylib&quot;does not contain the JNI_CreateJavaVM symbol.\n<a href=\"https://i.stack.imgur.com/Uz3I7.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>I have looked at other sites to find the jvm home path and rewritten info.plst but still get the same error message as before.\n<a href=\"https://i.stack.imgur.com/IcNmx.png\" rel=\"nofollow noreferrer\">enter image description here</a>  <a href=\"https://i.stack.imgur.com/19Bfg.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>I would be glad to know how to solve this problem.</p>\n<p>thanks for the help</p>\n"},{"tags":["java","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":16341513,"reputation":209,"user_id":11802330,"display_name":"Eric"},"score":0,"creation_date":1693372819,"post_id":77001805,"comment_id":135750248,"body_markdown":"You can try [this](https://stackoverflow.com/questions/76591604/how-to-write-a-native-query-in-jpa-for-update/76619735#76619735)","body":"You can try <a href=\"https://stackoverflow.com/questions/76591604/how-to-write-a-native-query-in-jpa-for-update/76619735#76619735\">this</a>"},{"owner":{"account_id":16341513,"reputation":209,"user_id":11802330,"display_name":"Eric"},"score":0,"creation_date":1693459123,"post_id":77001805,"comment_id":135764258,"body_markdown":"How about when you extend `JpaRepository` instead? i.e. change `extends CrudRepository&lt;Person, String&gt; ` to `extends JpaRepository&lt;Person, Long&gt; ` . Can you also add source code of `Person` entity to the question?","body":"How about when you extend <code>JpaRepository</code> instead? i.e. change <code>extends CrudRepository&lt;Person, String&gt; </code> to <code>extends JpaRepository&lt;Person, Long&gt; </code> . Can you also add source code of <code>Person</code> entity to the question?"},{"owner":{"account_id":16341513,"reputation":209,"user_id":11802330,"display_name":"Eric"},"score":0,"creation_date":1694065709,"post_id":77001805,"comment_id":135842645,"body_markdown":"Doesn&#39;t `Person` entity have an auto incremented field `private Long id`?","body":"Doesn&#39;t <code>Person</code> entity have an auto incremented field <code>private Long id</code>?"},{"owner":{"account_id":427236,"reputation":2709,"user_id":808891,"accept_rate":97,"display_name":"Somebody"},"score":0,"creation_date":1694094536,"post_id":77001805,"comment_id":135848306,"body_markdown":"no, `personId` is a hash generated string value","body":"no, <code>personId</code> is a hash generated string value"}],"answers":[{"comments":[{"owner":{"account_id":427236,"reputation":2709,"user_id":808891,"accept_rate":97,"display_name":"Somebody"},"score":0,"creation_date":1693327580,"post_id":77001891,"comment_id":135744964,"body_markdown":"Unfortunately none of the suggestions you provided seem to work in my case, even adding the `DEBUG` level for the logs keep showing the same error information as before.","body":"Unfortunately none of the suggestions you provided seem to work in my case, even adding the <code>DEBUG</code> level for the logs keep showing the same error information as before."},{"owner":{"account_id":8512226,"reputation":97,"user_id":6387070,"accept_rate":80,"display_name":"Deepak Negi"},"score":0,"creation_date":1693329212,"post_id":77001891,"comment_id":135745281,"body_markdown":"Try to see if from db side if you have privilege to update.","body":"Try to see if from db side if you have privilege to update."},{"owner":{"account_id":427236,"reputation":2709,"user_id":808891,"accept_rate":97,"display_name":"Somebody"},"score":0,"creation_date":1693331528,"post_id":77001891,"comment_id":135745737,"body_markdown":"@DeepakNegi I do have access to update from db side","body":"@DeepakNegi I do have access to update from db side"}],"tags":[],"owner":{"account_id":6871126,"reputation":930,"user_id":6070546,"display_name":"Yusuf Ganiyu"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1693325398,"creation_date":1693325398,"answer_id":77001891,"question_id":77001805,"body_markdown":"This is a bit tricky because you did not add any code that generated this error message.\r\n\r\nYou can try to debug with the following:\r\n\r\n 1. Try adding the JPA repositories and transaction management with `@EnableJpaRepositories` and `@EnableTransactionManagement` to see if it makes any difference. Something like:\r\n\r\n```java\r\n@SpringBootApplication\r\n@EnableJpaRepositories\r\n@EnableTransactionManagement\r\npublic class MyApplication {\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(MyApplication.class, args);\r\n    }\r\n}\r\n```\r\n\r\n2. There are sometimes issues with proxying with Spring interface which can lead to transaction annotations not being processed. Try to perform the update operation through a Service class instead of doing it directly in the main class or another component, an example:\r\n\r\n```java\r\n@Service\r\npublic class PersonService {\r\n    \r\n    @Autowired\r\n    private PersonRepo personRepo;\r\n    \r\n    @Transactional\r\n    public void updatePersonStatusToActive(String status) {\r\n        personRepo.updatePersonStatusToActive(status);\r\n    }\r\n}\r\n```\r\n\r\n3. You can also add transaction logging for more visibility into the root cause `logging.level.org.springframework.transaction=DEBUG`","title":"javax.persistence.TransactionRequiredException: Executing an update/delete query : Spring boot 2.7.5","body":"<p>This is a bit tricky because you did not add any code that generated this error message.</p>\n<p>You can try to debug with the following:</p>\n<ol>\n<li>Try adding the JPA repositories and transaction management with <code>@EnableJpaRepositories</code> and <code>@EnableTransactionManagement</code> to see if it makes any difference. Something like:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootApplication\n@EnableJpaRepositories\n@EnableTransactionManagement\npublic class MyApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(MyApplication.class, args);\n    }\n}\n</code></pre>\n<ol start=\"2\">\n<li>There are sometimes issues with proxying with Spring interface which can lead to transaction annotations not being processed. Try to perform the update operation through a Service class instead of doing it directly in the main class or another component, an example:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class PersonService {\n    \n    @Autowired\n    private PersonRepo personRepo;\n    \n    @Transactional\n    public void updatePersonStatusToActive(String status) {\n        personRepo.updatePersonStatusToActive(status);\n    }\n}\n</code></pre>\n<ol start=\"3\">\n<li>You can also add transaction logging for more visibility into the root cause <code>logging.level.org.springframework.transaction=DEBUG</code></li>\n</ol>\n"}],"owner":{"account_id":427236,"reputation":2709,"user_id":808891,"accept_rate":97,"display_name":"Somebody"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":218,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694008893,"creation_date":1693324649,"question_id":77001805,"body_markdown":"I&#39;m having below error while trying to do an `update` using `Spring Boot 2.7.5`. I&#39;ve tried different approach suggested in different places but still getting the same issue. There&#39;s one issue regarding this for `spring-boot.1.2.5.RELASE` as stated in this [page][1]. I wonder if the same happens with `Spring Boot 2.7.5`. Below is my code:\r\n\r\n    import org.springframework.transaction.annotation.Transactional;\r\n    \r\n    @Repository\r\n    public interface PersonRepo extends CrudRepository&lt;Person, String&gt; {\r\n    \t\t\r\n    \t@Modifying\r\n    \t@Transactional\r\n    \t@Query(value = &quot;UPDATE PERSON SET STATUS = &#39;ACTIVE&#39; WHERE STATUS = :status&quot;, nativeQuery = true)\r\n    \tvoid updatePersonStatusToActive(@Param(&quot;status&quot;) String status);\r\n    }\r\n\r\nI&#39;ve also tried putting the `@Transactional` at the interface level right below the `@Repository`, same issue.\r\n\r\n**Stacktrace:**\r\n\r\n    Caused by: org.springframework.dao.InvalidDataAccessApiUsageException: Executing an update/delete query; nested exception is javax.persistence.TransactionRequiredException: Executing an update/delete query\r\n    \tat org.springframework.orm.jpa.EntityManagerFactoryUtils.convertJpaAccessExceptionIfPossible(EntityManagerFactoryUtils.java:403)\r\n    \tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:235)\r\n    \tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:551)\r\n    \tat org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)\r\n    \tat org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)\r\n    \tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    \tat org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:145)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    \tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    \tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)\r\n    \tat com.sun.proxy.$Proxy113.updatePersonStatusToActive(Unknown Source)\r\n    \tat com.people.PeopleApplication.processPerson(PeopleApplication.java:304)\r\n    \tat com.people.PeopleApplication.run(PeopleApplication.java:205)\r\n    \tat org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:771)\r\n    \t... 5 common frames omitted\r\n    Caused by: javax.persistence.TransactionRequiredException: Executing an update/delete query\r\n    \tat org.hibernate.internal.AbstractSharedSessionContract.checkTransactionNeededForUpdateOperation(AbstractSharedSessionContract.java:445)\r\n    \tat org.hibernate.query.internal.AbstractProducedQuery.executeUpdate(AbstractProducedQuery.java:1692)\r\n    \tat org.springframework.data.jpa.repository.query.JpaQueryExecution$ModifyingExecution.doExecute(JpaQueryExecution.java:241)\r\n    \tat org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:90)\r\n    \tat org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:156)\r\n    \tat org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:144)\r\n    \tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)\r\n    \tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)\r\n    \tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:160)\r\n    \tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:139)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    \tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n    \tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n    \tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    \tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)\r\n    \t... 15 common frames omitted\r\n\r\n**Person.java**\r\n\r\n    @Entity\r\n    @Table(schema = &quot;APP_OWNER&quot;, name = &quot;PERSON&quot;)\r\n    @Data\r\n    public class Person {\t\r\n    \t@Id\r\n    \t@Column(name = &quot;PERSON_ID&quot;)\r\n    \tprivate String personId;\r\n    \t\r\n    \t@Column(name = &quot;FULL_NAME&quot;)\r\n    \tprivate String fullName;\r\n    \t\r\n    \t@Column(name = &quot;ADDRESS&quot;)\r\n    \tprivate String address;\r\n    \t\r\n    \t@Column(name = &quot;STATUS&quot;)\r\n    \tprivate String status;\r\n    \t\r\n    \t@Column(name = &quot;CREATED_DATE&quot;)\r\n    \tprivate Date createdDate;\r\n    }\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-boot/issues/3576","title":"javax.persistence.TransactionRequiredException: Executing an update/delete query : Spring boot 2.7.5","body":"<p>I'm having below error while trying to do an <code>update</code> using <code>Spring Boot 2.7.5</code>. I've tried different approach suggested in different places but still getting the same issue. There's one issue regarding this for <code>spring-boot.1.2.5.RELASE</code> as stated in this <a href=\"https://github.com/spring-projects/spring-boot/issues/3576\" rel=\"nofollow noreferrer\">page</a>. I wonder if the same happens with <code>Spring Boot 2.7.5</code>. Below is my code:</p>\n<pre><code>import org.springframework.transaction.annotation.Transactional;\n\n@Repository\npublic interface PersonRepo extends CrudRepository&lt;Person, String&gt; {\n        \n    @Modifying\n    @Transactional\n    @Query(value = &quot;UPDATE PERSON SET STATUS = 'ACTIVE' WHERE STATUS = :status&quot;, nativeQuery = true)\n    void updatePersonStatusToActive(@Param(&quot;status&quot;) String status);\n}\n</code></pre>\n<p>I've also tried putting the <code>@Transactional</code> at the interface level right below the <code>@Repository</code>, same issue.</p>\n<p><strong>Stacktrace:</strong></p>\n<pre><code>Caused by: org.springframework.dao.InvalidDataAccessApiUsageException: Executing an update/delete query; nested exception is javax.persistence.TransactionRequiredException: Executing an update/delete query\n    at org.springframework.orm.jpa.EntityManagerFactoryUtils.convertJpaAccessExceptionIfPossible(EntityManagerFactoryUtils.java:403)\n    at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:235)\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:551)\n    at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)\n    at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:145)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)\n    at com.sun.proxy.$Proxy113.updatePersonStatusToActive(Unknown Source)\n    at com.people.PeopleApplication.processPerson(PeopleApplication.java:304)\n    at com.people.PeopleApplication.run(PeopleApplication.java:205)\n    at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:771)\n    ... 5 common frames omitted\nCaused by: javax.persistence.TransactionRequiredException: Executing an update/delete query\n    at org.hibernate.internal.AbstractSharedSessionContract.checkTransactionNeededForUpdateOperation(AbstractSharedSessionContract.java:445)\n    at org.hibernate.query.internal.AbstractProducedQuery.executeUpdate(AbstractProducedQuery.java:1692)\n    at org.springframework.data.jpa.repository.query.JpaQueryExecution$ModifyingExecution.doExecute(JpaQueryExecution.java:241)\n    at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:90)\n    at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:156)\n    at org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:144)\n    at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)\n    at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:160)\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:139)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)\n    ... 15 common frames omitted\n</code></pre>\n<p><strong>Person.java</strong></p>\n<pre><code>@Entity\n@Table(schema = &quot;APP_OWNER&quot;, name = &quot;PERSON&quot;)\n@Data\npublic class Person {   \n    @Id\n    @Column(name = &quot;PERSON_ID&quot;)\n    private String personId;\n    \n    @Column(name = &quot;FULL_NAME&quot;)\n    private String fullName;\n    \n    @Column(name = &quot;ADDRESS&quot;)\n    private String address;\n    \n    @Column(name = &quot;STATUS&quot;)\n    private String status;\n    \n    @Column(name = &quot;CREATED_DATE&quot;)\n    private Date createdDate;\n}\n</code></pre>\n"},{"tags":["java","maven","jersey","maven-assembly-plugin"],"comments":[{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1694527155,"post_id":77050539,"comment_id":135900678,"body_markdown":"Consider using the maven-shade-plugin instead of assembly-plugin for this","body":"Consider using the maven-shade-plugin instead of assembly-plugin for this"}],"answers":[{"tags":[],"owner":{"account_id":6983402,"reputation":165,"user_id":5355354,"display_name":"Jordan Sheinfeld"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694008341,"creation_date":1694008341,"answer_id":77052576,"question_id":77050539,"body_markdown":"You could use a workaround like this:\r\n    \r\nCreate a file named **${PROJECT_DIR}/AutoDiscoverable.txt** with the content you wish like:\r\n    \r\n\r\n&gt; a.b.client.sdk.common.client.AutoConfigService \r\n&gt; org.glassfish.jersey.jackson.internal.JacksonAutoDiscoverable\r\n\r\nThen run **mvn package** using the following section instead of the assembly-plugin in pom.xml:\r\n\r\nThis will exclude the original *org.glassfish.jersey.internal.spi.AutoDiscoverable* file from the package and replace it with your manually created one.\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.2.4&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;phase&gt;package&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;shade&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;filters&gt;\r\n                                &lt;filter&gt;\r\n                                    &lt;artifact&gt;*:*&lt;/artifact&gt;\r\n                                    &lt;excludes&gt;\r\n                                        &lt;exclude&gt;META-INF/services/org.glassfish.jersey.internal.spi.AutoDiscoverable&lt;/exclude&gt;\r\n                                    &lt;/excludes&gt;\r\n                                &lt;/filter&gt;\r\n                            &lt;/filters&gt;\r\n                            &lt;transformers&gt;\r\n                                &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.IncludeResourceTransformer&quot;&gt;\r\n                                    &lt;resource&gt;META-INF/services/org.glassfish.jersey.internal.spi.AutoDiscoverable&lt;/resource&gt;\r\n                                    &lt;file&gt;AutoDiscoverable.txt&lt;/file&gt;\r\n                                &lt;/transformer&gt;\r\n                            &lt;/transformers&gt;\r\n\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;","title":"maven Assembly plugin is not appending/merging META-INF/services/ spi.AutoDiscoverable","body":"<p>You could use a workaround like this:</p>\n<p>Create a file named <strong>${PROJECT_DIR}/AutoDiscoverable.txt</strong> with the content you wish like:</p>\n<blockquote>\n<p>a.b.client.sdk.common.client.AutoConfigService\norg.glassfish.jersey.jackson.internal.JacksonAutoDiscoverable</p>\n</blockquote>\n<p>Then run <strong>mvn package</strong> using the following section instead of the assembly-plugin in pom.xml:</p>\n<p>This will exclude the original <em>org.glassfish.jersey.internal.spi.AutoDiscoverable</em> file from the package and replace it with your manually created one.</p>\n<pre><code>&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.2.4&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;phase&gt;package&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;shade&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;filters&gt;\n                            &lt;filter&gt;\n                                &lt;artifact&gt;*:*&lt;/artifact&gt;\n                                &lt;excludes&gt;\n                                    &lt;exclude&gt;META-INF/services/org.glassfish.jersey.internal.spi.AutoDiscoverable&lt;/exclude&gt;\n                                &lt;/excludes&gt;\n                            &lt;/filter&gt;\n                        &lt;/filters&gt;\n                        &lt;transformers&gt;\n                            &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.IncludeResourceTransformer&quot;&gt;\n                                &lt;resource&gt;META-INF/services/org.glassfish.jersey.internal.spi.AutoDiscoverable&lt;/resource&gt;\n                                &lt;file&gt;AutoDiscoverable.txt&lt;/file&gt;\n                            &lt;/transformer&gt;\n                        &lt;/transformers&gt;\n\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n"}],"owner":{"account_id":9039732,"reputation":1,"user_id":6734382,"display_name":"Srujan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694008341,"creation_date":1693991425,"question_id":77050539,"body_markdown":"We are using &lt;maven-assembly-plugin&gt; and the jar build with dependencies will have \r\nMETA-INF/services/org.glassfish.jersey.internal.spi.AutoDiscoverable with value &quot;a.b.client.sdk.common.client.AutoConfigService&quot;\r\n\r\nBasically it should also have the value of &quot;org.glassfish.jersey.jackson.internal.JacksonAutoDiscoverable&quot;\r\n\r\nLooks like there is no appending or merging of values happening for the key of org.glassfish.jersey.internal.spi.AutoDiscoverable.\r\n\r\nHow we can achieve so that it should have both values one after another? \r\n\r\nBelow is how the plugin we are using.\r\n\r\n     &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.1.1&lt;/version&gt;\r\n\r\n        &lt;executions&gt;\r\n          &lt;execution&gt;\r\n            &lt;id&gt;assemble-all&lt;/id&gt;\r\n            &lt;phase&gt;package&lt;/phase&gt;\r\n            &lt;goals&gt;\r\n              &lt;goal&gt;single&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n            &lt;configuration&gt;\r\n              &lt;descriptorRefs&gt;\r\n                &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\r\n              &lt;/descriptorRefs&gt;\r\n              &lt;archive&gt;\r\n                &lt;manifestEntries&gt;\r\n                  &lt;Multi-Release&gt;true&lt;/Multi-Release&gt;\r\n                &lt;/manifestEntries&gt;\r\n              &lt;/archive&gt;\r\n            &lt;/configuration&gt;\r\n          &lt;/execution&gt;\r\n          &lt;execution&gt;\r\n            &lt;id&gt;assemble-dist-zip&lt;/id&gt;\r\n            &lt;phase&gt;verify&lt;/phase&gt;\r\n            &lt;goals&gt;\r\n              &lt;goal&gt;single&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n            &lt;configuration&gt;\r\n              &lt;appendAssemblyId&gt;false&lt;/appendAssemblyId&gt;\r\n              &lt;descriptors&gt;\r\n                &lt;descriptor&gt;src/main/assembly/app-zip-assemble.xml&lt;/descriptor&gt;\r\n              &lt;/descriptors&gt;\r\n            &lt;/configuration&gt;\r\n          &lt;/execution&gt;\r\n        &lt;/executions&gt;\r\n      &lt;/plugin&gt;\r\n\r\n\r\n\r\n\r\nHow to achieve with maven plugin, so my expectation is, \r\nMETA-INF/services/org.glassfish.jersey.internal.spi.AutoDiscoverable to retain the values coming from different artifacts like below.\r\n\r\na.b.client.sdk.common.client.AutoConfigService\r\norg.glassfish.jersey.jackson.internal.JacksonAutoDiscoverable","title":"maven Assembly plugin is not appending/merging META-INF/services/ spi.AutoDiscoverable","body":"<p>We are using  and the jar build with dependencies will have\nMETA-INF/services/org.glassfish.jersey.internal.spi.AutoDiscoverable with value &quot;a.b.client.sdk.common.client.AutoConfigService&quot;</p>\n<p>Basically it should also have the value of &quot;org.glassfish.jersey.jackson.internal.JacksonAutoDiscoverable&quot;</p>\n<p>Looks like there is no appending or merging of values happening for the key of org.glassfish.jersey.internal.spi.AutoDiscoverable.</p>\n<p>How we can achieve so that it should have both values one after another?</p>\n<p>Below is how the plugin we are using.</p>\n<pre><code> &lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.1.1&lt;/version&gt;\n\n    &lt;executions&gt;\n      &lt;execution&gt;\n        &lt;id&gt;assemble-all&lt;/id&gt;\n        &lt;phase&gt;package&lt;/phase&gt;\n        &lt;goals&gt;\n          &lt;goal&gt;single&lt;/goal&gt;\n        &lt;/goals&gt;\n        &lt;configuration&gt;\n          &lt;descriptorRefs&gt;\n            &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n          &lt;/descriptorRefs&gt;\n          &lt;archive&gt;\n            &lt;manifestEntries&gt;\n              &lt;Multi-Release&gt;true&lt;/Multi-Release&gt;\n            &lt;/manifestEntries&gt;\n          &lt;/archive&gt;\n        &lt;/configuration&gt;\n      &lt;/execution&gt;\n      &lt;execution&gt;\n        &lt;id&gt;assemble-dist-zip&lt;/id&gt;\n        &lt;phase&gt;verify&lt;/phase&gt;\n        &lt;goals&gt;\n          &lt;goal&gt;single&lt;/goal&gt;\n        &lt;/goals&gt;\n        &lt;configuration&gt;\n          &lt;appendAssemblyId&gt;false&lt;/appendAssemblyId&gt;\n          &lt;descriptors&gt;\n            &lt;descriptor&gt;src/main/assembly/app-zip-assemble.xml&lt;/descriptor&gt;\n          &lt;/descriptors&gt;\n        &lt;/configuration&gt;\n      &lt;/execution&gt;\n    &lt;/executions&gt;\n  &lt;/plugin&gt;\n</code></pre>\n<p>How to achieve with maven plugin, so my expectation is,\nMETA-INF/services/org.glassfish.jersey.internal.spi.AutoDiscoverable to retain the values coming from different artifacts like below.</p>\n<p>a.b.client.sdk.common.client.AutoConfigService\norg.glassfish.jersey.jackson.internal.JacksonAutoDiscoverable</p>\n"},{"tags":["java","javafx","fxml"],"answers":[{"comments":[{"owner":{"account_id":16903554,"reputation":509,"user_id":12224591,"display_name":"Runsva"},"score":0,"creation_date":1694034088,"post_id":77052251,"comment_id":135839927,"body_markdown":"Thanks for this detailed answer. The first solution appeared to work well for me, and I&#39;m able to draw `canvas` inside the `Center` section of my `BorderPane`. However, I wish to learn more about the proper, second method you described, using the controller for the `BorderPane` object. I already have a controller for the `App` class that I&#39;m running this program off of, however I&#39;m unsure how to set another controller for just the `BorderPane` object here. In the SceneBuilder, with which I built the FXML file, I can&#39;t see a `Controller` property I can edit... Where is that in the SceneBuilder?","body":"Thanks for this detailed answer. The first solution appeared to work well for me, and I&#39;m able to draw <code>canvas</code> inside the <code>Center</code> section of my <code>BorderPane</code>. However, I wish to learn more about the proper, second method you described, using the controller for the <code>BorderPane</code> object. I already have a controller for the <code>App</code> class that I&#39;m running this program off of, however I&#39;m unsure how to set another controller for just the <code>BorderPane</code> object here. In the SceneBuilder, with which I built the FXML file, I can&#39;t see a <code>Controller</code> property I can edit... Where is that in the SceneBuilder?"},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":1,"creation_date":1694034517,"post_id":77052251,"comment_id":135839980,"body_markdown":"@Runsva In the bottom left is a &quot;controller&quot; section you can expand. If you select a component (e.g. the `BorderPane`), then the bottom right has a &quot;Code&quot; section you can expand, and there is an `fx:id` field there. Note the controller class is a property of the FXML file, not of an individual component. I recommend reading the documentation I linked in the answer. (Or really any tutorial on FXML will explain this.)","body":"@Runsva In the bottom left is a &quot;controller&quot; section you can expand. If you select a component (e.g. the <code>BorderPane</code>), then the bottom right has a &quot;Code&quot; section you can expand, and there is an <code>fx:id</code> field there. Note the controller class is a property of the FXML file, not of an individual component. I recommend reading the documentation I linked in the answer. (Or really any tutorial on FXML will explain this.)"}],"tags":[],"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1694008336,"creation_date":1694005942,"answer_id":77052251,"question_id":77050600,"body_markdown":"```\r\nscene.getRoot()\r\n```\r\n\r\nwill return the root of the scene, which you set via the call to the `Scene` constructor:\r\n\r\n```\r\nScene scene = new Scene(loadFXML(&quot;primary&quot;), 1280, 720);\r\n```\r\n\r\nIn other words, `scene.getRoot()` is the object returned from `load.FXML(...)`. You haven&#39;t shown us that method definition, so we cannot know for sure, but it is reasonable to assume it returns the result of calling `FXMLLoader.load(...)`, which would be the `BorderPane` (the root element, in the XML sense, of the FXML file).\r\n\r\nSo you could cast the result of `scene.getRoot()` to a `BorderPane` and then call `setCenter(...)` (or, obviously better, just keep a reference to the result of `loadFXML(...)` in the first place).\r\n\r\n\r\nThe code\r\n\r\n```\r\nscene.getRoot().getChildrenUnmodifiable()\r\n```\r\n\r\nwill return a list of the child nodes of the `BorderPane`, i.e. a list containing just the `TabPane`, and so\r\n\r\n```\r\nscene.getRoot().getChildrenUnmodifiable().get(0)\r\n```\r\n\r\nis a reference to the `TabPane`, and\r\n\r\n```\r\nscene.getRoot().getChildrenUnmodifiable().get(0).getChildren()\r\n```\r\n\r\n(with appropriate casts added) is a list of the child nodes of the `TabPane`. The content of that list is basically an implementation detail of the `TabPane` and its skin.\r\n\r\n---\r\n\r\nNone of this is the way the API designers intended this to be used, though. Instead, define a [controller class](https://openjfx.io/javadoc/20/javafx.fxml/javafx/fxml/doc-files/introduction_to_fxml.html#controllers) for the FXML, and inject the `BorderPane` into it:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n&lt;?import javafx.scene.control.Tab?&gt;\r\n&lt;?import javafx.scene.control.TabPane?&gt;\r\n&lt;?import javafx.scene.layout.AnchorPane?&gt;\r\n&lt;?import javafx.scene.layout.BorderPane?&gt;\r\n&lt;?import javafx.scene.shape.Line?&gt;\r\n\r\n\r\n&lt;BorderPane \r\n    maxHeight=&quot;-Infinity&quot; maxWidth=&quot;-Infinity&quot; \r\n    minHeight=&quot;-Infinity&quot; minWidth=&quot;-Infinity&quot; \r\n    prefHeight=&quot;720.0&quot; prefWidth=&quot;1280.0&quot; \r\n    xmlns=&quot;&quot; xmlns:fx=&quot;&quot;\r\n    fx:controller=&quot;my.package.MyController&quot;\r\n    fx:id=&quot;borderPane&quot; \r\n&gt;\r\n\r\n    &lt;!-- ... --&gt;\r\n\r\n&lt;/BorderPane&gt;\r\n```\r\n\r\nThen define the controller, and modify the border pane in the `initialize()` method (if you want to add the canvas immediately), or in an event handler (if you want to modify the scene graph in response to user actions):\r\n\r\n```\r\npackage my.package;\r\n\r\n// imports ...\r\n\r\npublic class MyController {\r\n\r\n    @FXML\r\n    private BorderPane borderPane;\r\n\r\n    @FXML\r\n    private void initialize() {\r\n        \r\n        Canvas canvas = new Canvas(300, 250);\r\n        GraphicsContext gc = canvas.getGraphicsContext2D();\r\n        drawShapes(gc);\r\n        borderPane.setCenter(canvas);\r\n\r\n    }\r\n\r\n    private void drawShapes(GraphicsContext gc) {\r\n        // ...\r\n    }\r\n}\r\n```\r\n\r\n","title":"Modifying JavaFX Scene Loaded via FXML File?","body":"<pre><code>scene.getRoot()\n</code></pre>\n<p>will return the root of the scene, which you set via the call to the <code>Scene</code> constructor:</p>\n<pre><code>Scene scene = new Scene(loadFXML(&quot;primary&quot;), 1280, 720);\n</code></pre>\n<p>In other words, <code>scene.getRoot()</code> is the object returned from <code>load.FXML(...)</code>. You haven't shown us that method definition, so we cannot know for sure, but it is reasonable to assume it returns the result of calling <code>FXMLLoader.load(...)</code>, which would be the <code>BorderPane</code> (the root element, in the XML sense, of the FXML file).</p>\n<p>So you could cast the result of <code>scene.getRoot()</code> to a <code>BorderPane</code> and then call <code>setCenter(...)</code> (or, obviously better, just keep a reference to the result of <code>loadFXML(...)</code> in the first place).</p>\n<p>The code</p>\n<pre><code>scene.getRoot().getChildrenUnmodifiable()\n</code></pre>\n<p>will return a list of the child nodes of the <code>BorderPane</code>, i.e. a list containing just the <code>TabPane</code>, and so</p>\n<pre><code>scene.getRoot().getChildrenUnmodifiable().get(0)\n</code></pre>\n<p>is a reference to the <code>TabPane</code>, and</p>\n<pre><code>scene.getRoot().getChildrenUnmodifiable().get(0).getChildren()\n</code></pre>\n<p>(with appropriate casts added) is a list of the child nodes of the <code>TabPane</code>. The content of that list is basically an implementation detail of the <code>TabPane</code> and its skin.</p>\n<hr />\n<p>None of this is the way the API designers intended this to be used, though. Instead, define a <a href=\"https://openjfx.io/javadoc/20/javafx.fxml/javafx/fxml/doc-files/introduction_to_fxml.html#controllers\" rel=\"nofollow noreferrer\">controller class</a> for the FXML, and inject the <code>BorderPane</code> into it:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;?import javafx.scene.control.Tab?&gt;\n&lt;?import javafx.scene.control.TabPane?&gt;\n&lt;?import javafx.scene.layout.AnchorPane?&gt;\n&lt;?import javafx.scene.layout.BorderPane?&gt;\n&lt;?import javafx.scene.shape.Line?&gt;\n\n\n&lt;BorderPane \n    maxHeight=&quot;-Infinity&quot; maxWidth=&quot;-Infinity&quot; \n    minHeight=&quot;-Infinity&quot; minWidth=&quot;-Infinity&quot; \n    prefHeight=&quot;720.0&quot; prefWidth=&quot;1280.0&quot; \n    xmlns=&quot;&quot; xmlns:fx=&quot;&quot;\n    fx:controller=&quot;my.package.MyController&quot;\n    fx:id=&quot;borderPane&quot; \n&gt;\n\n    &lt;!-- ... --&gt;\n\n&lt;/BorderPane&gt;\n</code></pre>\n<p>Then define the controller, and modify the border pane in the <code>initialize()</code> method (if you want to add the canvas immediately), or in an event handler (if you want to modify the scene graph in response to user actions):</p>\n<pre><code>package my.package;\n\n// imports ...\n\npublic class MyController {\n\n    @FXML\n    private BorderPane borderPane;\n\n    @FXML\n    private void initialize() {\n        \n        Canvas canvas = new Canvas(300, 250);\n        GraphicsContext gc = canvas.getGraphicsContext2D();\n        drawShapes(gc);\n        borderPane.setCenter(canvas);\n\n    }\n\n    private void drawShapes(GraphicsContext gc) {\n        // ...\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":16903554,"reputation":509,"user_id":12224591,"display_name":"Runsva"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77052251,"answer_count":1,"score":1,"last_activity_date":1694008336,"creation_date":1693991859,"question_id":77050600,"body_markdown":"I&#39;m attempting to modify a JavaFX scene, loaded via a FXML file, in the Java code of the application I&#39;m running.\r\n\r\nI have the following test FXML file, created with SceneBuilder:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n&lt;?import javafx.scene.control.Tab?&gt;\r\n&lt;?import javafx.scene.control.TabPane?&gt;\r\n&lt;?import javafx.scene.layout.AnchorPane?&gt;\r\n&lt;?import javafx.scene.layout.BorderPane?&gt;\r\n&lt;?import javafx.scene.shape.Line?&gt;\r\n\r\n\r\n&lt;BorderPane maxHeight=&quot;-Infinity&quot; maxWidth=&quot;-Infinity&quot; minHeight=&quot;-Infinity&quot; minWidth=&quot;-Infinity&quot; prefHeight=&quot;720.0&quot; prefWidth=&quot;1280.0&quot; xmlns=&quot;&quot; xmlns:fx=&quot;&quot;&gt;\r\n   &lt;top&gt;\r\n      &lt;TabPane prefHeight=&quot;100.0&quot; prefWidth=&quot;200.0&quot; tabClosingPolicy=&quot;UNAVAILABLE&quot; BorderPane.alignment=&quot;CENTER&quot;&gt;\r\n        &lt;tabs&gt;\r\n          &lt;Tab text=&quot;Untitled Tab 1&quot;&gt;\r\n            &lt;content&gt;\r\n              &lt;AnchorPane prefHeight=&quot;100.0&quot; prefWidth=&quot;200.0&quot; /&gt;\r\n            &lt;/content&gt;\r\n          &lt;/Tab&gt;\r\n          &lt;Tab text=&quot;Untitled Tab 2&quot;&gt;\r\n            &lt;content&gt;\r\n              &lt;AnchorPane prefHeight=&quot;100.0&quot; prefWidth=&quot;200.0&quot; /&gt;\r\n            &lt;/content&gt;\r\n          &lt;/Tab&gt;\r\n        &lt;/tabs&gt;\r\n      &lt;/TabPane&gt;\r\n   &lt;/top&gt;\r\n   &lt;center&gt;\r\n   &lt;/center&gt;\r\n&lt;/BorderPane&gt;\r\n```\r\n\r\nWhich is just a `BorderPane` with two empty tabs in the `Top` section, and an empty `Center` section. I wish to be able to draw some shapes in the `Center` section. I took [the following example code][1] for drawing some random shapes in a `Canvas` window, and made sure the example code works by-itself:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nI then wanted to insert that same exact drawn `Canvas`, with the exact same shapes, into the `Center` section of my `BorderPane` declared in the FXML file shown above.\r\n\r\nHowever, I&#39;m a bit confused as to how I&#39;m supposed to properly reference the various children of the scene loaded by the FXML loader. If I try the following code in my `start` function:\r\n\r\n```\r\npublic void start(Stage stage) throws IOException \r\n{\r\n    stage.setTitle(&quot;Drawing Operations Test&quot;);\r\n    Scene scene = new Scene(loadFXML(&quot;primary&quot;), 1280, 720);\r\n        \r\n    Canvas canvas = new Canvas(300, 250);\r\n    GraphicsContext gc = canvas.getGraphicsContext2D();\r\n    drawShapes(gc);\r\n    scene.getRoot().getChildrenUnmodifiable().get(0).getChildren().add(canvas);\r\n        \r\n    stage.setScene(scene);\r\n    stage.show();\r\n}\r\n```\r\n\r\nWhere `drawShapes` is the function that draws the shapes on the `Canvas`, the line:\r\n\r\n```\r\nscene.getRoot().getChildrenUnmodifiable().get(0).getChildren().add(canvas);\r\n```\r\n\r\nIs listed as erroneous, because the class-function `getChildren` cannot be found in the `Node` class.\r\n\r\nNow, my initial assumption for the cause of that error was because I&#39;m supposed to typecast the `Node` object into the respective class that I&#39;m wanting to add `canvas` to, in my case the `BorderPane` class. However, I wanted to clarify exactly what the `getChildren` class-function will return me here.\r\n\r\nDoes `getChildren` return the `BorderPane` object, as that&#39;s the first object that&#39;s declared in the FXML file? Or is that element parented under something else? What would be the proper way of adding my `Canvas` to the `Center` section of my `BorderPane`?\r\n\r\nThanks for reading my post, any guidance is appreciated.\r\n\r\n  [1]: https://docs.oracle.com/javafx/2/canvas/jfxpub-canvas.htm\r\n  [2]: https://i.stack.imgur.com/Vjf2nl.png","title":"Modifying JavaFX Scene Loaded via FXML File?","body":"<p>I'm attempting to modify a JavaFX scene, loaded via a FXML file, in the Java code of the application I'm running.</p>\n<p>I have the following test FXML file, created with SceneBuilder:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;?import javafx.scene.control.Tab?&gt;\n&lt;?import javafx.scene.control.TabPane?&gt;\n&lt;?import javafx.scene.layout.AnchorPane?&gt;\n&lt;?import javafx.scene.layout.BorderPane?&gt;\n&lt;?import javafx.scene.shape.Line?&gt;\n\n\n&lt;BorderPane maxHeight=&quot;-Infinity&quot; maxWidth=&quot;-Infinity&quot; minHeight=&quot;-Infinity&quot; minWidth=&quot;-Infinity&quot; prefHeight=&quot;720.0&quot; prefWidth=&quot;1280.0&quot; xmlns=&quot;&quot; xmlns:fx=&quot;&quot;&gt;\n   &lt;top&gt;\n      &lt;TabPane prefHeight=&quot;100.0&quot; prefWidth=&quot;200.0&quot; tabClosingPolicy=&quot;UNAVAILABLE&quot; BorderPane.alignment=&quot;CENTER&quot;&gt;\n        &lt;tabs&gt;\n          &lt;Tab text=&quot;Untitled Tab 1&quot;&gt;\n            &lt;content&gt;\n              &lt;AnchorPane prefHeight=&quot;100.0&quot; prefWidth=&quot;200.0&quot; /&gt;\n            &lt;/content&gt;\n          &lt;/Tab&gt;\n          &lt;Tab text=&quot;Untitled Tab 2&quot;&gt;\n            &lt;content&gt;\n              &lt;AnchorPane prefHeight=&quot;100.0&quot; prefWidth=&quot;200.0&quot; /&gt;\n            &lt;/content&gt;\n          &lt;/Tab&gt;\n        &lt;/tabs&gt;\n      &lt;/TabPane&gt;\n   &lt;/top&gt;\n   &lt;center&gt;\n   &lt;/center&gt;\n&lt;/BorderPane&gt;\n</code></pre>\n<p>Which is just a <code>BorderPane</code> with two empty tabs in the <code>Top</code> section, and an empty <code>Center</code> section. I wish to be able to draw some shapes in the <code>Center</code> section. I took <a href=\"https://docs.oracle.com/javafx/2/canvas/jfxpub-canvas.htm\" rel=\"nofollow noreferrer\">the following example code</a> for drawing some random shapes in a <code>Canvas</code> window, and made sure the example code works by-itself:</p>\n<p><a href=\"https://i.stack.imgur.com/Vjf2nl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Vjf2nl.png\" alt=\"enter image description here\" /></a></p>\n<p>I then wanted to insert that same exact drawn <code>Canvas</code>, with the exact same shapes, into the <code>Center</code> section of my <code>BorderPane</code> declared in the FXML file shown above.</p>\n<p>However, I'm a bit confused as to how I'm supposed to properly reference the various children of the scene loaded by the FXML loader. If I try the following code in my <code>start</code> function:</p>\n<pre><code>public void start(Stage stage) throws IOException \n{\n    stage.setTitle(&quot;Drawing Operations Test&quot;);\n    Scene scene = new Scene(loadFXML(&quot;primary&quot;), 1280, 720);\n        \n    Canvas canvas = new Canvas(300, 250);\n    GraphicsContext gc = canvas.getGraphicsContext2D();\n    drawShapes(gc);\n    scene.getRoot().getChildrenUnmodifiable().get(0).getChildren().add(canvas);\n        \n    stage.setScene(scene);\n    stage.show();\n}\n</code></pre>\n<p>Where <code>drawShapes</code> is the function that draws the shapes on the <code>Canvas</code>, the line:</p>\n<pre><code>scene.getRoot().getChildrenUnmodifiable().get(0).getChildren().add(canvas);\n</code></pre>\n<p>Is listed as erroneous, because the class-function <code>getChildren</code> cannot be found in the <code>Node</code> class.</p>\n<p>Now, my initial assumption for the cause of that error was because I'm supposed to typecast the <code>Node</code> object into the respective class that I'm wanting to add <code>canvas</code> to, in my case the <code>BorderPane</code> class. However, I wanted to clarify exactly what the <code>getChildren</code> class-function will return me here.</p>\n<p>Does <code>getChildren</code> return the <code>BorderPane</code> object, as that's the first object that's declared in the FXML file? Or is that element parented under something else? What would be the proper way of adding my <code>Canvas</code> to the <code>Center</code> section of my <code>BorderPane</code>?</p>\n<p>Thanks for reading my post, any guidance is appreciated.</p>\n"},{"tags":["java","groovy","jwt","x509certificate","x509"],"comments":[{"owner":{"account_id":12368896,"reputation":24924,"user_id":9019885,"display_name":"Gary Archer"},"score":0,"creation_date":1694193043,"post_id":77052509,"comment_id":135863843,"body_markdown":"Have a look at [this answer](https://stackoverflow.com/questions/72798809/how-to-generate-jwk-from-a-x-509-pem-certificate-in-jose4j) to use classes that deal correctly with certificate formats.","body":"Have a look at <a href=\"https://stackoverflow.com/questions/72798809/how-to-generate-jwk-from-a-x-509-pem-certificate-in-jose4j\">this answer</a> to use classes that deal correctly with certificate formats."}],"owner":{"account_id":1549010,"reputation":1170,"user_id":1441851,"accept_rate":53,"display_name":"Ashley Kilgour"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694008166,"creation_date":1694007869,"question_id":77052509,"body_markdown":"I am trying to create a x5c from a JWT, I have the public key.  Every time I try &quot;generateCertificate&quot; I always get an error.\r\n```\r\nstatic String Getx5cValue() {\r\n    try {\r\n \r\n\r\n        def certificateData = &quot;-----BEGIN CERTIFICATE-----\\n&quot; + // This has five - before and after         \r\n\t\t&quot;TU[Loads of other test]Cg\\n&quot; +\r\n                &quot;-----END CERTIFICATE-----&quot; // This has five - before and after\r\n        certificateData = certificateData.trim()\r\n        \r\n        System.out.println(&quot; Convert the certificate string to a byte array&quot;)\r\n        def certificateBytes = certificateData.getBytes();\r\n\r\n        System.out.println(&quot; Create a ByteArrayInputStream to read from the byte array&quot;)\r\n        def byteArrayInputStream = new ByteArrayInputStream(certificateBytes);\r\n\t\t//https://stackoverflow.com/questions/11621414/reading-an-x-509-certificate-with-java\r\n\r\n        System.out.println(&quot;  getInstance( X.509 &quot;)\r\n        def certificateFactory = CertificateFactory.getInstance(&quot;X.509&quot;);\r\n\r\n        Certificate certificate\r\n        while (byteArrayInputStream.available() &gt; 0) {\r\n            System.out.println(&quot;Im in a while loop&quot;)\r\n            // https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/security/cert/CertificateFactory.html\r\n\t\t\t// The next line will throw an error\r\n\t\t\t// java.security.cert.CertificateException: Unable to initialize, java.io.IOException: extra data at the end\r\n            certificate  = certificateFactory.generateCertificate(byteArrayInputStream);\r\n            System.out.println(certificate.toString());\r\n        }\r\n        System.out.println(&quot;  Iterate through the certificates and print them&quot;)\r\n        Iterator&lt;? extends Certificate&gt; iterator = certificate.iterator();\r\n        while (iterator.hasNext()) {\r\n            Certificate cert = iterator.next();\r\n            System.out.println(cert);\r\n        }\r\n    } catch (Exception e) {\r\n        e.printStackTrace();\r\n        System.out.println(&quot; e.getMessage() &quot; + e.getMessage());\r\n    }\r\n}\r\n```\r\n\r\nI get given the following error.  I have cut the code up, removed and added /n to the certificateData, trimmed it, removed the BEGIN CERTIFICATE and END CERTIFICATE.   I seem to keep getting the following error.\r\n\r\n    java.security.cert.CertificateException: Unable to initialize, java.io.IOException: extra data at the end\r\n    \tat java.base/sun.security.x509.X509CertImpl.&lt;init&gt;(X509CertImpl.java:186)\r\n    \tat java.base/sun.security.provider.X509Factory.engineGenerateCertificate(X509Factory.java:105)\r\n    \tat java.base/java.security.cert.CertificateFactory.generateCertificate(CertificateFactory.java:355)\r\n    \tat org.codehaus.groovy.vmplugin.v8.IndyInterface.fromCache(IndyInterface.java:321)\r\n    \tat Main.Getx5cValue(Main.groovy:157)\r\n    \tat org.codehaus.groovy.vmplugin.v8.IndyInterface.fromCache(IndyInterface.java:321)\r\n    \tat Main.run(Main.groovy:19)\r\n    \tat groovy.lang.GroovyShell.runScriptOrMainOrTestOrRunnable(GroovyShell.java:287)\r\n    \tat groovy.lang.GroovyShell.run(GroovyShell.java:393)\r\n    \tat groovy.lang.GroovyShell.run(GroovyShell.java:382)\r\n    \tat groovy.ui.GroovyMain.processOnce(GroovyMain.java:649)\r\n    \tat groovy.ui.GroovyMain.run(GroovyMain.java:389)\r\n    \tat groovy.ui.GroovyMain.access$1400(GroovyMain.java:67)\r\n    \tat groovy.ui.GroovyMain$GroovyCommand.process(GroovyMain.java:313)\r\n    \tat groovy.ui.GroovyMain.processArgs(GroovyMain.java:141)\r\n    \tat groovy.ui.GroovyMain.main(GroovyMain.java:114)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n    \tat org.codehaus.groovy.tools.GroovyStarter.rootLoader(GroovyStarter.java:115)\r\n    \tat org.codehaus.groovy.tools.GroovyStarter.main(GroovyStarter.java:37)\r\n    Caused by: java.io.IOException: extra data at the end\r\n    \tat java.base/sun.security.util.DerValue.&lt;init&gt;(DerValue.java:428)\r\n    \tat java.base/sun.security.util.DerValue.&lt;init&gt;(DerValue.java:340)\r\n    \tat java.base/sun.security.x509.X509CertImpl.&lt;init&gt;(X509CertImpl.java:183)\r\n    \t... 21 more","title":"Generate Certificate x5c from a JWT in Java/Groovy","body":"<p>I am trying to create a x5c from a JWT, I have the public key.  Every time I try &quot;generateCertificate&quot; I always get an error.</p>\n<pre><code>static String Getx5cValue() {\n    try {\n \n\n        def certificateData = &quot;-----BEGIN CERTIFICATE-----\\n&quot; + // This has five - before and after         \n        &quot;TU[Loads of other test]Cg\\n&quot; +\n                &quot;-----END CERTIFICATE-----&quot; // This has five - before and after\n        certificateData = certificateData.trim()\n        \n        System.out.println(&quot; Convert the certificate string to a byte array&quot;)\n        def certificateBytes = certificateData.getBytes();\n\n        System.out.println(&quot; Create a ByteArrayInputStream to read from the byte array&quot;)\n        def byteArrayInputStream = new ByteArrayInputStream(certificateBytes);\n        //https://stackoverflow.com/questions/11621414/reading-an-x-509-certificate-with-java\n\n        System.out.println(&quot;  getInstance( X.509 &quot;)\n        def certificateFactory = CertificateFactory.getInstance(&quot;X.509&quot;);\n\n        Certificate certificate\n        while (byteArrayInputStream.available() &gt; 0) {\n            System.out.println(&quot;Im in a while loop&quot;)\n            // https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/security/cert/CertificateFactory.html\n            // The next line will throw an error\n            // java.security.cert.CertificateException: Unable to initialize, java.io.IOException: extra data at the end\n            certificate  = certificateFactory.generateCertificate(byteArrayInputStream);\n            System.out.println(certificate.toString());\n        }\n        System.out.println(&quot;  Iterate through the certificates and print them&quot;)\n        Iterator&lt;? extends Certificate&gt; iterator = certificate.iterator();\n        while (iterator.hasNext()) {\n            Certificate cert = iterator.next();\n            System.out.println(cert);\n        }\n    } catch (Exception e) {\n        e.printStackTrace();\n        System.out.println(&quot; e.getMessage() &quot; + e.getMessage());\n    }\n}\n</code></pre>\n<p>I get given the following error.  I have cut the code up, removed and added /n to the certificateData, trimmed it, removed the BEGIN CERTIFICATE and END CERTIFICATE.   I seem to keep getting the following error.</p>\n<pre><code>java.security.cert.CertificateException: Unable to initialize, java.io.IOException: extra data at the end\n    at java.base/sun.security.x509.X509CertImpl.&lt;init&gt;(X509CertImpl.java:186)\n    at java.base/sun.security.provider.X509Factory.engineGenerateCertificate(X509Factory.java:105)\n    at java.base/java.security.cert.CertificateFactory.generateCertificate(CertificateFactory.java:355)\n    at org.codehaus.groovy.vmplugin.v8.IndyInterface.fromCache(IndyInterface.java:321)\n    at Main.Getx5cValue(Main.groovy:157)\n    at org.codehaus.groovy.vmplugin.v8.IndyInterface.fromCache(IndyInterface.java:321)\n    at Main.run(Main.groovy:19)\n    at groovy.lang.GroovyShell.runScriptOrMainOrTestOrRunnable(GroovyShell.java:287)\n    at groovy.lang.GroovyShell.run(GroovyShell.java:393)\n    at groovy.lang.GroovyShell.run(GroovyShell.java:382)\n    at groovy.ui.GroovyMain.processOnce(GroovyMain.java:649)\n    at groovy.ui.GroovyMain.run(GroovyMain.java:389)\n    at groovy.ui.GroovyMain.access$1400(GroovyMain.java:67)\n    at groovy.ui.GroovyMain$GroovyCommand.process(GroovyMain.java:313)\n    at groovy.ui.GroovyMain.processArgs(GroovyMain.java:141)\n    at groovy.ui.GroovyMain.main(GroovyMain.java:114)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.codehaus.groovy.tools.GroovyStarter.rootLoader(GroovyStarter.java:115)\n    at org.codehaus.groovy.tools.GroovyStarter.main(GroovyStarter.java:37)\nCaused by: java.io.IOException: extra data at the end\n    at java.base/sun.security.util.DerValue.&lt;init&gt;(DerValue.java:428)\n    at java.base/sun.security.util.DerValue.&lt;init&gt;(DerValue.java:340)\n    at java.base/sun.security.x509.X509CertImpl.&lt;init&gt;(X509CertImpl.java:183)\n    ... 21 more\n</code></pre>\n"},{"tags":["java","http","http2"],"comments":[{"owner":{"account_id":9760,"reputation":85860,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":1,"creation_date":1693960059,"post_id":77048294,"comment_id":135827572,"body_markdown":"It sounds like you are leaking connections instead.  Make sure you clean up each connection when done, and keep track of the high watermark. When you get the exception, that will tell you what the server&#39;s maximum is.","body":"It sounds like you are leaking connections instead.  Make sure you clean up each connection when done, and keep track of the high watermark. When you get the exception, that will tell you what the server&#39;s maximum is."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1693965648,"post_id":77048294,"comment_id":135828101,"body_markdown":"I&#39;m no expert, but that looks like a value set in your client library, not your server. I followed back to this [this constant](https://github.com/AdoptOpenJDK/openjdk-jdk11/blob/19fb8f93c59dfd791f62d41f332db9e306bc1422/src/java.net.http/share/classes/jdk/internal/net/http/frame/SettingsFrame.java#L69C29-L69C58).","body":"I&#39;m no expert, but that looks like a value set in your client library, not your server. I followed back to this <a href=\"https://github.com/AdoptOpenJDK/openjdk-jdk11/blob/19fb8f93c59dfd791f62d41f332db9e306bc1422/src/java.net.http/share/classes/jdk/internal/net/http/frame/SettingsFrame.java#L69C29-L69C58\" rel=\"nofollow noreferrer\">this constant</a>."},{"owner":{"account_id":50894,"reputation":1634,"user_id":151915,"accept_rate":84,"display_name":"juan2raid"},"score":0,"creation_date":1694015487,"post_id":77048294,"comment_id":135836597,"body_markdown":"@BasilBourque nope, it has a default value of Integer.MAX_VALUE set by the client but once a connection is made the server will change that value.","body":"@BasilBourque nope, it has a default value of Integer.MAX_VALUE set by the client but once a connection is made the server will change that value."}],"answers":[{"tags":[],"owner":{"account_id":1255537,"reputation":17242,"user_id":1215076,"display_name":"sbordet"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694008015,"creation_date":1694008015,"answer_id":77052533,"question_id":77048294,"body_markdown":"Unfortunately `java.net.http.HttpClient` does not expose the value for `MAX_CONCURRENT_STREAMS` sent by the server.\r\n\r\nYou may try and guess it and then use a `Semaphore` to avoid exceeding it, but that is a lot of work you should not be doing as a user of `java.net.http.HttpClient`.\r\n\r\n[Disclaimer: I am a Jetty maintainer.]\r\n\r\nYou can switch and use Jetty&#39;s `HttpClient`, which does not suffer from this problem, as it carefully handles the `MAX_CONCURRENT_STREAMS` value, allowing that many concurrent requests per connection, and if that value is exceeded, opens a new connection for the excess concurrent requests.\r\n\r\nJetty&#39;s `HttpClient` also offers many more features and configuration options than JDK&#39;s `HttpClient`, so the switch may help you in other ways.\r\n\r\nYou can find the documentation about Jetty&#39;s `HttpClient` here:\r\nhttps://eclipse.dev/jetty/documentation/jetty-12/programming-guide/index.html#pg-client-http\r\n\r\n","title":"How to find the server provided MAX_CONCURRENT_STREAMS value?","body":"<p>Unfortunately <code>java.net.http.HttpClient</code> does not expose the value for <code>MAX_CONCURRENT_STREAMS</code> sent by the server.</p>\n<p>You may try and guess it and then use a <code>Semaphore</code> to avoid exceeding it, but that is a lot of work you should not be doing as a user of <code>java.net.http.HttpClient</code>.</p>\n<p>[Disclaimer: I am a Jetty maintainer.]</p>\n<p>You can switch and use Jetty's <code>HttpClient</code>, which does not suffer from this problem, as it carefully handles the <code>MAX_CONCURRENT_STREAMS</code> value, allowing that many concurrent requests per connection, and if that value is exceeded, opens a new connection for the excess concurrent requests.</p>\n<p>Jetty's <code>HttpClient</code> also offers many more features and configuration options than JDK's <code>HttpClient</code>, so the switch may help you in other ways.</p>\n<p>You can find the documentation about Jetty's <code>HttpClient</code> here:\n<a href=\"https://eclipse.dev/jetty/documentation/jetty-12/programming-guide/index.html#pg-client-http\" rel=\"nofollow noreferrer\">https://eclipse.dev/jetty/documentation/jetty-12/programming-guide/index.html#pg-client-http</a></p>\n"}],"owner":{"account_id":50894,"reputation":1634,"user_id":151915,"accept_rate":84,"display_name":"juan2raid"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1694008015,"creation_date":1693957876,"question_id":77048294,"body_markdown":"I am using [java.net.http][1] to make some http calls to a server. However, sometimes I get a &quot;too many concurrent streams&quot; exception from here: https://github.com/AdoptOpenJDK/openjdk-jdk11/blob/master/src/java.net.http/share/classes/jdk/internal/net/http/Http2Connection.java#L440.\r\n\r\nIt appears my client is exceeding the `MAX_CONCURRENT_STREAMS` value that the server has set. From other sources, it sounds like I need to set up a semaphore to ensure I don&#39;t exceed that value.\r\n\r\nThe problem is that I have no idea what the server&#39;s value for `MAX_CONCURRENT_STREAMS` is. It doesn&#39;t appear to be accessible via the java.net.http API.\r\n\r\nAnyone know how I can figure out the `MAX_CONCURRENT_STREAMS` the server is setting?\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/20/docs/api/java.net.http/module-summary.html","title":"How to find the server provided MAX_CONCURRENT_STREAMS value?","body":"<p>I am using <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.net.http/module-summary.html\" rel=\"nofollow noreferrer\">java.net.http</a> to make some http calls to a server. However, sometimes I get a &quot;too many concurrent streams&quot; exception from here: <a href=\"https://github.com/AdoptOpenJDK/openjdk-jdk11/blob/master/src/java.net.http/share/classes/jdk/internal/net/http/Http2Connection.java#L440\" rel=\"nofollow noreferrer\">https://github.com/AdoptOpenJDK/openjdk-jdk11/blob/master/src/java.net.http/share/classes/jdk/internal/net/http/Http2Connection.java#L440</a>.</p>\n<p>It appears my client is exceeding the <code>MAX_CONCURRENT_STREAMS</code> value that the server has set. From other sources, it sounds like I need to set up a semaphore to ensure I don't exceed that value.</p>\n<p>The problem is that I have no idea what the server's value for <code>MAX_CONCURRENT_STREAMS</code> is. It doesn't appear to be accessible via the java.net.http API.</p>\n<p>Anyone know how I can figure out the <code>MAX_CONCURRENT_STREAMS</code> the server is setting?</p>\n"},{"tags":["javascript","java"],"comments":[{"owner":{"account_id":5827135,"reputation":8117,"user_id":4593057,"display_name":"Vignesh Raja"},"score":0,"creation_date":1581281504,"post_id":60141168,"comment_id":106369536,"body_markdown":"```var a=&quot;javascripit&quot;; console.log(a[&lt;index&gt;]);``` This works","body":"<code>var a=&quot;javascripit&quot;; console.log(a[&lt;index&gt;]);</code> This works"},{"owner":{"account_id":6411938,"reputation":4104,"user_id":4971422,"display_name":"FredK"},"score":1,"creation_date":1581283921,"post_id":60141168,"comment_id":106370152,"body_markdown":"Don&#39;t use &quot;magic numbers&quot; like &quot;97&quot;.Use &#39;a&#39; instead. Also, be aware that while this works in Java, it may not work in other languages. For example, in C there is no guarantee that the letters of the alphabet are in exact sequential order","body":"Don&#39;t use &quot;magic numbers&quot; like &quot;97&quot;.Use &#39;a&#39; instead. Also, be aware that while this works in Java, it may not work in other languages. For example, in C there is no guarantee that the letters of the alphabet are in exact sequential order"},{"owner":{"account_id":2662746,"reputation":11456,"user_id":2302032,"display_name":"Stefanov.sm"},"score":0,"creation_date":1640296886,"post_id":60141168,"comment_id":124566088,"body_markdown":"This will not work for unicode.","body":"This will not work for unicode."}],"answers":[{"tags":[],"owner":{"account_id":5272138,"reputation":2107,"user_id":4210091,"display_name":"Renato"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1581281519,"creation_date":1581281519,"answer_id":60141198,"question_id":60141168,"body_markdown":"Try with this:\r\n\r\n    &quot;a&quot;.charCodeAt(0) - 97","title":"Get index position of an alphabet","body":"<p>Try with this:</p>\n\n<pre><code>\"a\".charCodeAt(0) - 97\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12307174,"reputation":136,"user_id":8979864,"display_name":"Jina Jita"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1581281967,"creation_date":1581281967,"answer_id":60141269,"question_id":60141168,"body_markdown":"If you don&#39;t care about the case of the letter try:\r\n\r\n    var idx = s.toLowerCase().charCodeAt(i) - 97;\r\n\r\nIf you care about the case you can try\r\n\r\n    var idx = s.charCodeAt(i) - 97;\r\n\r\nBut for capital letters this will result in negative numbers. The second option is the one which has the same behavior as the Java sample you provided.","title":"Get index position of an alphabet","body":"<p>If you don't care about the case of the letter try:</p>\n\n<pre><code>var idx = s.toLowerCase().charCodeAt(i) - 97;\n</code></pre>\n\n<p>If you care about the case you can try</p>\n\n<pre><code>var idx = s.charCodeAt(i) - 97;\n</code></pre>\n\n<p>But for capital letters this will result in negative numbers. The second option is the one which has the same behavior as the Java sample you provided.</p>\n"},{"tags":[],"owner":{"account_id":12824773,"reputation":1,"user_id":9278259,"display_name":"Daisy222"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681293109,"creation_date":1680827599,"answer_id":75954681,"question_id":60141168,"body_markdown":"For me this worked:\r\n\r\n    int idx = s.charAt(i) - 96;\r\n\r\n***Note 96, not 97.***\r\n\r\n\r\nReference Link: https://dev.to/bladesensei/get-alphabet-position-value-of-a-letter-javascript-70p","title":"Get index position of an alphabet","body":"<p>For me this worked:</p>\n<pre><code>int idx = s.charAt(i) - 96;\n</code></pre>\n<p><em><strong>Note 96, not 97.</strong></em></p>\n<p>Reference Link: <a href=\"https://dev.to/bladesensei/get-alphabet-position-value-of-a-letter-javascript-70p\" rel=\"nofollow noreferrer\">https://dev.to/bladesensei/get-alphabet-position-value-of-a-letter-javascript-70p</a></p>\n"},{"tags":[],"owner":{"account_id":10920339,"reputation":1029,"user_id":12160227,"display_name":"bytrangle"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694007631,"creation_date":1694007201,"answer_id":77052436,"question_id":60141168,"body_markdown":"Whether to subtract the code unit by 96 or 97 depends on the context.\r\n\r\nIf you don&#39;t want to remember whether the magic number is 96 or 97, let&#39;s use the first letter in the alphabet (&quot;a&quot;) as the anchor and find the offset of your target letter from that anchor.\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    const example = &quot;abcdefg&quot;\r\n    const anchor = &quot;a&quot;.charCodeAt(0)\r\n    for (let i = 0; i &lt; example.length; i++) {\r\n      const index = example.charCodeAt(i) - anchor\r\n      console.log(`Letter ${example[i]} is at index ${index} in the alphabet`)\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nIf you want to use one-based index, add 1 after each calculation.\r\n\r\n```\r\nconst index = example.charCodeAt(i) - &quot;a&quot;.charCodeAt(0) + 1\r\n```","title":"Get index position of an alphabet","body":"<p>Whether to subtract the code unit by 96 or 97 depends on the context.</p>\n<p>If you don't want to remember whether the magic number is 96 or 97, let's use the first letter in the alphabet (&quot;a&quot;) as the anchor and find the offset of your target letter from that anchor.</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const example = \"abcdefg\"\nconst anchor = \"a\".charCodeAt(0)\nfor (let i = 0; i &lt; example.length; i++) {\n  const index = example.charCodeAt(i) - anchor\n  console.log(`Letter ${example[i]} is at index ${index} in the alphabet`)\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>If you want to use one-based index, add 1 after each calculation.</p>\n<pre><code>const index = example.charCodeAt(i) - &quot;a&quot;.charCodeAt(0) + 1\n</code></pre>\n"}],"owner":{"account_id":3837342,"reputation":6111,"user_id":3181365,"accept_rate":70,"display_name":"learner"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1029,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":60141198,"answer_count":4,"score":0,"last_activity_date":1694007631,"creation_date":1581281292,"question_id":60141168,"body_markdown":"In java we can get the index position of an alphabet using below code :\r\n\r\n    int idx = s.charAt(i) - 97;\r\n\r\nNow I am looking for similar code in JavaScript:\r\n\r\n    var idx = s.charAt(i) - 97;\r\n\r\nBut in javascript I getting `isNaN` error message; What is the correct way to do this.\r\n","title":"Get index position of an alphabet","body":"<p>In java we can get the index position of an alphabet using below code :</p>\n\n<pre><code>int idx = s.charAt(i) - 97;\n</code></pre>\n\n<p>Now I am looking for similar code in JavaScript:</p>\n\n<pre><code>var idx = s.charAt(i) - 97;\n</code></pre>\n\n<p>But in javascript I getting <code>isNaN</code> error message; What is the correct way to do this.</p>\n"},{"tags":["java","spring","rest","spring-restcontroller"],"comments":[{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":1,"creation_date":1694007831,"post_id":77052461,"comment_id":135834721,"body_markdown":"Because the mapping pattern matches the specified url.","body":"Because the mapping pattern matches the specified url."},{"owner":{"account_id":2168880,"reputation":15313,"user_id":1921385,"display_name":"Moob"},"score":0,"creation_date":1694008741,"post_id":77052461,"comment_id":135834945,"body_markdown":"There&#39;s a question from someone wanting the opposite behaviour to you. Looks like its a config thing: https://stackoverflow.com/questions/32791179/spring-request-mapping-with-extensions","body":"There&#39;s a question from someone wanting the opposite behaviour to you. Looks like its a config thing: <a href=\"https://stackoverflow.com/questions/32791179/spring-request-mapping-with-extensions\" title=\"spring request mapping with extensions\">stackoverflow.com/questions/32791179/&hellip;</a>"},{"owner":{"account_id":2168880,"reputation":15313,"user_id":1921385,"display_name":"Moob"},"score":0,"creation_date":1694008916,"post_id":77052461,"comment_id":135834994,"body_markdown":"Also, adding trailing slash should work: `@GetMapping(&quot;/preferences/&quot;)`","body":"Also, adding trailing slash should work: <code>@GetMapping(&quot;&#47;preferences&#47;&quot;)</code>"}],"owner":{"account_id":6392837,"reputation":11,"user_id":6782755,"display_name":"Diego"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1694007604,"creation_date":1694007464,"question_id":77052461,"body_markdown":"I am working on a project that uses Spring Framework for Rest services (version 4.3.11.RELEASE and java 1.7). \r\nI have a service like this\r\n\r\n```\r\n\t@GetMapping(&quot;/preferences&quot;)\r\n\tpublic @ResponseBody ResponseEntity&lt;UserPreference&gt; resetUserPreferences() {\r\n\t\treturn null; // actually it returns a UserPreference object but I would keep it short\r\n\t}\r\n```\r\n\r\nIf I make a call to the services using the path /preferences then it works and that is just fine.  Strange thing is that it keep working in case I make a call to the path /preferences.somethinghere. I cannot understand why! Why just adding a dot and something at the end of the path the service keeps working? I&#39;d expect a 404. \r\n\r\n","title":"Why does @GetMapping(&quot;/myurl&quot;) still work if the url is called as /myurl.anything?","body":"<p>I am working on a project that uses Spring Framework for Rest services (version 4.3.11.RELEASE and java 1.7).\nI have a service like this</p>\n<pre><code>    @GetMapping(&quot;/preferences&quot;)\n    public @ResponseBody ResponseEntity&lt;UserPreference&gt; resetUserPreferences() {\n        return null; // actually it returns a UserPreference object but I would keep it short\n    }\n</code></pre>\n<p>If I make a call to the services using the path /preferences then it works and that is just fine.  Strange thing is that it keep working in case I make a call to the path /preferences.somethinghere. I cannot understand why! Why just adding a dot and something at the end of the path the service keeps working? I'd expect a 404.</p>\n"},{"tags":["java","spring-boot","generics","functional-interface"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1691619362,"post_id":76871518,"comment_id":135517800,"body_markdown":"There seems to be some duplicate text in your question, but more importantly, you haven&#39;t asked one. Where are you stuck? Please read [ask].","body":"There seems to be some duplicate text in your question, but more importantly, you haven&#39;t asked one. Where are you stuck? Please read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1691677614,"post_id":76871518,"comment_id":135526291,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"answers":[{"comments":[{"owner":{"account_id":21401913,"reputation":13,"user_id":15763848,"display_name":"Wes"},"score":0,"creation_date":1692826113,"post_id":76958102,"comment_id":135678595,"body_markdown":"Thanks for reply. That&#39;s what I end up doing.","body":"Thanks for reply. That&#39;s what I end up doing."}],"tags":[],"owner":{"account_id":4647011,"reputation":41835,"user_id":3764965,"accept_rate":94,"display_name":"Nikolas Charalambidis"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1692761979,"creation_date":1692761979,"answer_id":76958102,"question_id":76871518,"body_markdown":"How about a simple method with a `Supplier` as a parameter where you can put literally anything?\r\n\r\n```\r\n@Retryable(...)\r\npublic &lt;T&gt; T retry(Supplier&lt;T&gt; supplier) {\r\n\treturn supplier.get();\r\n}\r\n```\r\nUsage:\r\n```java\r\nEmployee employee = retry(() -&gt; repository.findById(&quot;2ed21&quot;));\r\nRecord record = retry(() -&gt; repository.findbyNumber(311));\r\n```\r\n\r\nFew notes:\r\n- You need to invoke a method annotated with `@Retryable` from a different bean to overcome a limitation of Spring AOP. To be honest I have never worked with `@Retryable` but I guess it would work the same way as `@Transactional`, related: https://stackoverflow.com/q/3423972/3764965\r\n- I haven&#39;t tested the solution.","title":"How can I pass a method into a functional interface for a retry and have it be generic?","body":"<p>How about a simple method with a <code>Supplier</code> as a parameter where you can put literally anything?</p>\n<pre><code>@Retryable(...)\npublic &lt;T&gt; T retry(Supplier&lt;T&gt; supplier) {\n    return supplier.get();\n}\n</code></pre>\n<p>Usage:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Employee employee = retry(() -&gt; repository.findById(&quot;2ed21&quot;));\nRecord record = retry(() -&gt; repository.findbyNumber(311));\n</code></pre>\n<p>Few notes:</p>\n<ul>\n<li>You need to invoke a method annotated with <code>@Retryable</code> from a different bean to overcome a limitation of Spring AOP. To be honest I have never worked with <code>@Retryable</code> but I guess it would work the same way as <code>@Transactional</code>, related: <a href=\"https://stackoverflow.com/q/3423972/3764965\">Spring @Transaction method call by the method within the same class, does not work?</a></li>\n<li>I haven't tested the solution.</li>\n</ul>\n"}],"owner":{"account_id":21401913,"reputation":13,"user_id":15763848,"display_name":"Wes"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76958102,"answer_count":1,"score":1,"last_activity_date":1694007451,"creation_date":1691618144,"question_id":76871518,"body_markdown":"I want to a create a functional interface or default method where I pass in a jpa repository method such as `findById` or `findByNumber` and have it return a generic type; this way I annotate it with `@Retryable` if the application fails to connect to db. Below are examples of methods I want passed through the functional interface:\r\n```\r\nEmployee employee = repository.findById(&quot;2ed21&quot;);\r\nRecord record = repository.findbyNumber(311);\r\n```\r\n","title":"How can I pass a method into a functional interface for a retry and have it be generic?","body":"<p>I want to a create a functional interface or default method where I pass in a jpa repository method such as <code>findById</code> or <code>findByNumber</code> and have it return a generic type; this way I annotate it with <code>@Retryable</code> if the application fails to connect to db. Below are examples of methods I want passed through the functional interface:</p>\n<pre><code>Employee employee = repository.findById(&quot;2ed21&quot;);\nRecord record = repository.findbyNumber(311);\n</code></pre>\n"},{"tags":["java","maven","netbeans","struts2","classnotfoundexception"],"comments":[{"owner":{"account_id":1879878,"reputation":24286,"user_id":1700321,"display_name":"Aleksandr M"},"score":1,"creation_date":1454579954,"post_id":35197763,"comment_id":58111874,"body_markdown":"It is S2 filter but S1 dtd. Which Struts are you using?","body":"It is S2 filter but S1 dtd. Which Struts are you using?"},{"owner":{"account_id":7333216,"reputation":31,"user_id":5585443,"accept_rate":0,"display_name":"Padma egrove"},"score":0,"creation_date":1454581245,"post_id":35197763,"comment_id":58112801,"body_markdown":"I think there are two struts file in the config folder...so i think we have used both s1 and s2.. can you help on this..i am new to struts..","body":"I think there are two struts file in the config folder...so i think we have used both s1 and s2.. can you help on this..i am new to struts.."},{"owner":{"account_id":7333216,"reputation":31,"user_id":5585443,"accept_rate":0,"display_name":"Padma egrove"},"score":0,"creation_date":1454581305,"post_id":35197763,"comment_id":58112845,"body_markdown":"Please refer this image ..","body":"Please refer this image .."},{"owner":{"account_id":7333216,"reputation":31,"user_id":5585443,"accept_rate":0,"display_name":"Padma egrove"},"score":0,"creation_date":1454581334,"post_id":35197763,"comment_id":58112866,"body_markdown":"http://opentestdrive.com/demo/test/4.png,   http://opentestdrive.com/demo/test/3.png   http://opentestdrive.com/demo/test/2.png    http://opentestdrive.com/demo/test/1.png","body":"<a href=\"http://opentestdrive.com/demo/test/4.png\" rel=\"nofollow noreferrer\">opentestdrive.com/demo/test/4.png</a>,   <a href=\"http://opentestdrive.com/demo/test/3.png\" rel=\"nofollow noreferrer\">opentestdrive.com/demo/test/3.png</a>   <a href=\"http://opentestdrive.com/demo/test/2.png\" rel=\"nofollow noreferrer\">opentestdrive.com/demo/test/2.png</a>    <a href=\"http://opentestdrive.com/demo/test/1.png\" rel=\"nofollow noreferrer\">opentestdrive.com/demo/test/1.png</a>"},{"owner":{"account_id":7333216,"reputation":31,"user_id":5585443,"accept_rate":0,"display_name":"Padma egrove"},"score":0,"creation_date":1454585152,"post_id":35197763,"comment_id":58115533,"body_markdown":"waiting for a your help.......","body":"waiting for a your help......."},{"owner":{"account_id":7333216,"reputation":31,"user_id":5585443,"accept_rate":0,"display_name":"Padma egrove"},"score":0,"creation_date":1454585378,"post_id":35197763,"comment_id":58115660,"body_markdown":"can you see the image i have posted?","body":"can you see the image i have posted?"}],"answers":[{"comments":[{"owner":{"account_id":7333216,"reputation":31,"user_id":5585443,"accept_rate":0,"display_name":"Padma egrove"},"score":0,"creation_date":1454597438,"post_id":35203079,"comment_id":58123822,"body_markdown":"Hi i have added struts2-core2.3.24.1                                                                                                                                                                                                But it throws    org.apache.catalina.core.StandardContext filterStart\nSEVERE: Exception starting filter struts2\njava.lang.ClassNotFoundException: org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter","body":"Hi i have added struts2-core2.3.24.1                                                                                                                                                                                                But it throws    org.apache.catalina.core.StandardContext filterStart SEVERE: Exception starting filter struts2 java.lang.ClassNotFoundException: org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExec&zwnj;&#8203;uteFilter"},{"owner":{"account_id":7333216,"reputation":31,"user_id":5585443,"accept_rate":0,"display_name":"Padma egrove"},"score":0,"creation_date":1454597508,"post_id":35203079,"comment_id":58123868,"body_markdown":"i have added to libraries folder...is it necessary to add dependency? and how to add and link the jar file","body":"i have added to libraries folder...is it necessary to add dependency? and how to add and link the jar file"},{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1454597667,"post_id":35203079,"comment_id":58123979,"body_markdown":"you should download jar files and add them to war file in WEB-INF/lib. Either you do it manually or Netbeans can do it for you.","body":"you should download jar files and add them to war file in WEB-INF/lib. Either you do it manually or Netbeans can do it for you."},{"owner":{"account_id":7333216,"reputation":31,"user_id":5585443,"accept_rate":0,"display_name":"Padma egrove"},"score":0,"creation_date":1454597687,"post_id":35203079,"comment_id":58123998,"body_markdown":"&lt;filter&gt;\n        &lt;filter-name&gt;struts2&lt;/filter-name&gt;\n        &lt;filter-class&gt;org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter&lt;/filter-class&gt;\n        \n        &lt;init-param&gt;\n    &lt;param-name&gt;config&lt;/param-name&gt;\n    &lt;param-value&gt;struts-default.xml,struts-plugin.xml,struts.xml&lt;/param-value&gt;\n&lt;/init-param&gt;\n    &lt;/filter&gt;\n    \n    &lt;filter-mapping&gt;\n        &lt;filter-name&gt;struts2&lt;/filter-name&gt;\n        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n    &lt;/filter-mapping&gt;","body":"&lt;filter&gt;         &lt;filter-name&gt;struts2&lt;/filter-name&gt;         &lt;filter-class&gt;org.apache.struts2.dispatcher.ng.filter.Struts&zwnj;&#8203;PrepareAndExecuteFil&zwnj;&#8203;ter&lt;/filter-class&gt;                  &lt;init-param&gt;     &lt;param-name&gt;config&lt;/param-name&gt;     &lt;param-value&gt;struts-default.xml,struts-plugin.xml,struts.xml&zwnj;&#8203;&lt;/param-value&gt; &lt;/init-param&gt;     &lt;/filter&gt;          &lt;filter-mapping&gt;         &lt;filter-name&gt;struts2&lt;/filter-name&gt;         &lt;url-pattern&gt;/*&lt;/url-pattern&gt;     &lt;/filter-mapping&gt;"},{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1454598075,"post_id":35203079,"comment_id":58124299,"body_markdown":"there&#39;s no issue with the code but you can use above","body":"there&#39;s no issue with the code but you can use above"},{"owner":{"account_id":7333216,"reputation":31,"user_id":5585443,"accept_rate":0,"display_name":"Padma egrove"},"score":0,"creation_date":1454598248,"post_id":35203079,"comment_id":58124430,"body_markdown":"but im still facing the issue of   SEVERE: Exception starting filter struts2 java.lang.ClassNotFoundException: how to solve this..im new to struts","body":"but im still facing the issue of   SEVERE: Exception starting filter struts2 java.lang.ClassNotFoundException: how to solve this..im new to struts"},{"owner":{"account_id":7333216,"reputation":31,"user_id":5585443,"accept_rate":0,"display_name":"Padma egrove"},"score":0,"creation_date":1454598548,"post_id":35203079,"comment_id":58124699,"body_markdown":"I did not add any dependency ...is the cause for the error?..i just copy the jar and paste it in library folder of the project","body":"I did not add any dependency ...is the cause for the error?..i just copy the jar and paste it in library folder of the project"},{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1458595143,"post_id":35203079,"comment_id":59921841,"body_markdown":"it&#39;s your problem that brings you to face the errors because you didn&#39;t follow this answer.","body":"it&#39;s your problem that brings you to face the errors because you didn&#39;t follow this answer."}],"tags":[],"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"comment_count":8,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1558212134,"creation_date":1454594555,"answer_id":35203079,"question_id":35197763,"body_markdown":"You cannot deploy Struts2 web application without Struts2 *core* libraries. The filter class declared in the `web.xml` can&#39;t be found on the classpath by web application classloader.\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;web-app id=&quot;WebApp_9&quot; version=&quot;2.4&quot;\r\n        xmlns=&quot;http://java.sun.com/xml/ns/j2ee&quot;\r\n        xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n        xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd&quot;&gt;\r\n     \r\n        &lt;filter&gt;\r\n            &lt;filter-name&gt;struts2&lt;/filter-name&gt;\r\n            &lt;filter-class&gt;org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter&lt;/filter-class&gt;\r\n        &lt;/filter&gt;\r\n     \r\n        &lt;filter-mapping&gt;\r\n            &lt;filter-name&gt;struts2&lt;/filter-name&gt;\r\n            &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\r\n        &lt;/filter-mapping&gt;\r\n     \r\n        &lt;!-- ... --&gt;\r\n     \r\n    &lt;/web-app&gt;\r\n\r\nHow to resolve such issue. First you could try searching the internet for the class `org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter`. Even if the first result from Google points to [`web.xml`][1] there&#39;s a lot of usable information but nothing about core libraries used by the framework. Ok, trying to search the class name on the [struts.apache.org][2] and it&#39;s giving the second result [Create Struts 2 Web Application Using Maven To Manage Artifacts and To Build The Application][3]. It&#39;s created with Maven as a build tool. if you are not familiar with it you should read [maven.apache.org][4]. In `pom.xml` it uses a dependency\r\n\r\n&gt;     &lt;dependency&gt;\r\n&gt;         &lt;groupId&gt;org.apache.struts&lt;/groupId&gt;\r\n&gt;         &lt;artifactId&gt;struts2-core&lt;/artifactId&gt;\r\n&gt;         &lt;version&gt;X.X.X.X&lt;/version&gt;\r\n&gt;     &lt;/dependency&gt;\r\n&gt; \r\n&gt; Of course replace the X.X.X.X with the current Struts 2 version. Maven\r\n&gt; will get the struts2-core jar and the other jar files struts2-core\r\n&gt; requires (transitive dependencies).\r\n\r\nNetbeans has full support for Maven:\r\n\r\n&gt;NetBeans includes full Maven support since 6.7, including Maven 3 support in 7.0+. You can open any Maven project in the IDE and start coding immediately.\r\n\r\n&gt;For more information see the [NetBeans.org wiki page][5].\r\n\r\nIf you don&#39;t know how to find dependency for your project, you should read FAQ.\r\n\r\n&gt;[How to find dependencies on public Maven repositories?][6]\r\n&gt; \r\n&gt;     You could use the following search engines:\r\n&gt; \r\n&gt;    - [http://search.maven.org][6]\r\n&gt;    - [http://repository.apache.org][6]\r\n&gt;    - [http://mvnrepository.com][6]\r\n\r\nHere you will find [search for `struts2-core`][7] all required libraries depending on the version you need `2.3.12` I&#39;d recommend the latest stable release at the moment [2.3.24.1][8]. \r\n\r\nYou can use Maven in your project to download required library and add them to dependencies. If you decide to manage your project dependencies manually you can get information about `struts2-core` dependencies on the maven site.\r\n\r\n  [1]: https://struts.apache.org/docs/webxml.html\r\n  [2]: https://struts.apache.org\r\n  [3]: https://struts.apache.org/getting-started/how-to-create-a-struts2-web-application.html\r\n  [4]: http://maven.apache.org/\r\n  [5]: http://wiki.netbeans.org/Maven\r\n  [6]: http://maven.apache.org/general.html#How_to_find_dependencies\r\n  [7]: http://search.maven.org/#search%7Cgav%7C1%7Cg%3A%22org.apache.struts%22%20AND%20a%3A%22struts2-core%22\r\n  [8]: http://search.maven.org/#artifactdetails%7Corg.apache.struts%7Cstruts2-core%7C2.3.24.1%7Cjar","title":"Netbeans error: Exception starting filter struts2 ClassNotFoundException: org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter","body":"<p>You cannot deploy Struts2 web application without Struts2 <em>core</em> libraries. The filter class declared in the <code>web.xml</code> can't be found on the classpath by web application classloader.</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;web-app id=\"WebApp_9\" version=\"2.4\"\n    xmlns=\"http://java.sun.com/xml/ns/j2ee\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xsi:schemaLocation=\"http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd\"&gt;\n\n    &lt;filter&gt;\n        &lt;filter-name&gt;struts2&lt;/filter-name&gt;\n        &lt;filter-class&gt;org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter&lt;/filter-class&gt;\n    &lt;/filter&gt;\n\n    &lt;filter-mapping&gt;\n        &lt;filter-name&gt;struts2&lt;/filter-name&gt;\n        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n    &lt;/filter-mapping&gt;\n\n    &lt;!-- ... --&gt;\n\n&lt;/web-app&gt;\n</code></pre>\n\n<p>How to resolve such issue. First you could try searching the internet for the class <code>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</code>. Even if the first result from Google points to <a href=\"https://struts.apache.org/docs/webxml.html\" rel=\"nofollow noreferrer\"><code>web.xml</code></a> there's a lot of usable information but nothing about core libraries used by the framework. Ok, trying to search the class name on the <a href=\"https://struts.apache.org\" rel=\"nofollow noreferrer\">struts.apache.org</a> and it's giving the second result <a href=\"https://struts.apache.org/getting-started/how-to-create-a-struts2-web-application.html\" rel=\"nofollow noreferrer\">Create Struts 2 Web Application Using Maven To Manage Artifacts and To Build The Application</a>. It's created with Maven as a build tool. if you are not familiar with it you should read <a href=\"http://maven.apache.org/\" rel=\"nofollow noreferrer\">maven.apache.org</a>. In <code>pom.xml</code> it uses a dependency</p>\n\n<blockquote>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.struts&lt;/groupId&gt;\n    &lt;artifactId&gt;struts2-core&lt;/artifactId&gt;\n    &lt;version&gt;X.X.X.X&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n  \n  <p>Of course replace the X.X.X.X with the current Struts 2 version. Maven\n  will get the struts2-core jar and the other jar files struts2-core\n  requires (transitive dependencies).</p>\n</blockquote>\n\n<p>Netbeans has full support for Maven:</p>\n\n<blockquote>\n  <p>NetBeans includes full Maven support since 6.7, including Maven 3 support in 7.0+. You can open any Maven project in the IDE and start coding immediately.</p>\n  \n  <p>For more information see the <a href=\"http://wiki.netbeans.org/Maven\" rel=\"nofollow noreferrer\">NetBeans.org wiki page</a>.</p>\n</blockquote>\n\n<p>If you don't know how to find dependency for your project, you should read FAQ.</p>\n\n<blockquote>\n  <p><a href=\"http://maven.apache.org/general.html#How_to_find_dependencies\" rel=\"nofollow noreferrer\">How to find dependencies on public Maven repositories?</a></p>\n\n<pre><code>You could use the following search engines:\n</code></pre>\n  \n  <ul>\n  <li><a href=\"http://maven.apache.org/general.html#How_to_find_dependencies\" rel=\"nofollow noreferrer\">http://search.maven.org</a></li>\n  <li><a href=\"http://maven.apache.org/general.html#How_to_find_dependencies\" rel=\"nofollow noreferrer\">http://repository.apache.org</a></li>\n  <li><a href=\"http://maven.apache.org/general.html#How_to_find_dependencies\" rel=\"nofollow noreferrer\">http://mvnrepository.com</a></li>\n  </ul>\n</blockquote>\n\n<p>Here you will find <a href=\"http://search.maven.org/#search%7Cgav%7C1%7Cg%3A%22org.apache.struts%22%20AND%20a%3A%22struts2-core%22\" rel=\"nofollow noreferrer\">search for <code>struts2-core</code></a> all required libraries depending on the version you need <code>2.3.12</code> I'd recommend the latest stable release at the moment <a href=\"http://search.maven.org/#artifactdetails%7Corg.apache.struts%7Cstruts2-core%7C2.3.24.1%7Cjar\" rel=\"nofollow noreferrer\">2.3.24.1</a>. </p>\n\n<p>You can use Maven in your project to download required library and add them to dependencies. If you decide to manage your project dependencies manually you can get information about <code>struts2-core</code> dependencies on the maven site.</p>\n"}],"owner":{"account_id":7333216,"reputation":31,"user_id":5585443,"accept_rate":0,"display_name":"Padma egrove"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":571,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1613018740,"answer_count":1,"score":-1,"last_activity_date":1694007329,"creation_date":1454579780,"question_id":35197763,"body_markdown":"I have run the web application done using Struts. I not able to run the application I have faced the error while starting Apache tomcat errors and while run the web application it also throws error .I have post the error log below.\r\n\r\nError in starting Apache Tomcat server:\r\n\r\n   \r\n   \r\n\r\n        Feb 04, 2016 3:19:55 PM org.apache.catalina.core.StandardContext filterStart\r\n    SEVERE: Exception starting filter struts2\r\n    java.lang.ClassNotFoundException: org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter\r\n    \tat org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)\r\n    \tat org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)\r\n    \tat org.apache.catalina.core.DefaultInstanceManager.loadClass(DefaultInstanceManager.java:532)\r\n    \tat org.apache.catalina.core.DefaultInstanceManager.loadClassMaybePrivileged(DefaultInstanceManager.java:514)\r\n    \tat org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:133)\r\n    \tat org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:257)\r\n    \tat org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:383)\r\n    \tat org.apache.catalina.core.ApplicationFilterConfig.&lt;init&gt;(ApplicationFilterConfig.java:104)\r\n    \tat org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4650)\r\n    \tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5306)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\r\n    \tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)\r\n    \tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)\r\n    \tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633)\r\n    \tat org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:657)\r\n    \tat org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1637)\r\n    \tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)\r\n    \tat java.util.concurrent.FutureTask.run(FutureTask.java:262)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\r\n    \tat java.lang.Thread.run(Thread.java:744)\r\n\r\n\r\nError while running the web application:\r\n\r\n  \r\n\r\n     Undeploying ...\r\n    undeploy?path=/Loyalty4Salon\r\n    OK - Undeployed application at context path /Loyalty4Salon\r\n    In-place deployment at /home/revathy/Documents/Esa netbeans/loyalty_salon/loyalty_salon/build/web\r\n    Deployment is in progress...\r\n    deploy?config=file%3A%2Ftmp%2Fcontext2062383266810619779.xml&amp;path=/Loyalty4Salon\r\n    FAIL - Deployed application at context path /Loyalty4Salon but context failed to start\r\n    /home/revathy/Documents/Esa netbeans/loyalty_salon/loyalty_salon/nbproject/build-impl.xml:1125: The module has not been deployed.\r\n    See the server log for details.\r\n    BUILD FAILED (total time: 2 seconds)\r\n\r\nThis is the `struts-config.xml`:\r\n\r\n   \r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;\r\n    \r\n    &lt;!DOCTYPE struts-config PUBLIC\r\n              &quot;-//Apache Software Foundation//DTD Struts Configuration 1.3//EN&quot;\r\n              &quot;http://jakarta.apache.org/struts/dtds/struts-config_1_3.dtd&quot;&gt;\r\n    &lt;struts-config&gt;\r\n        &lt;form-beans&gt;\r\n        \r\n        &lt;/form-beans&gt;\r\n        \r\n        &lt;global-exceptions&gt;\r\n        \r\n        &lt;/global-exceptions&gt;\r\n    \r\n        &lt;global-forwards&gt;\r\n            &lt;forward name=&quot;welcome&quot;  path=&quot;/Welcome.do&quot;/&gt;\r\n        &lt;/global-forwards&gt;\r\n    \r\n        &lt;action-mappings&gt;\r\n            &lt;action path=&quot;/Welcome&quot; forward=&quot;/welcomeStruts.jsp&quot;/&gt;\r\n        &lt;/action-mappings&gt;\r\n        \r\n        &lt;controller processorClass=&quot;org.apache.struts.tiles.TilesRequestProcessor&quot;/&gt;\r\n    \r\n        &lt;message-resources parameter=&quot;com/myapp/struts/ApplicationResource&quot;/&gt;    \r\n        \r\n        &lt;!-- ========================= Tiles plugin ===============================--&gt;\r\n        &lt;!--\r\n        This plugin initialize Tiles definition factory. This later can takes some\r\n        parameters explained here after. The plugin first read parameters from\r\n        web.xml, thenoverload them with parameters defined here. All parameters\r\n        are optional.\r\n        The plugin should be declared in each struts-config file.\r\n        - definitions-config: (optional)\r\n        Specify configuration file names. There can be several comma\r\n        separated file names (default: ?? )\r\n        - moduleAware: (optional - struts1.1)\r\n        Specify if the Tiles definition factory is module aware. If true\r\n        (default), there will be one factory for each Struts module.\r\n        If false, there will be one common factory for all module. In this\r\n        later case, it is still needed to declare one plugin per module.\r\n        The factory will be initialized with parameters found in the first\r\n        initialized plugin (generally the one associated with the default\r\n        module).\r\n        true : One factory per module. (default)\r\n        false : one single shared factory for all modules\r\n        - definitions-parser-validate: (optional)\r\n        Specify if xml parser should validate the Tiles configuration file.\r\n        true : validate. DTD should be specified in file header (default)\r\n        false : no validation\r\n    \r\n        Paths found in Tiles definitions are relative to the main context.\r\n        --&gt;\r\n        &lt;plug-in className=&quot;org.apache.struts.tiles.TilesPlugin&quot; &gt;\r\n            &lt;set-property property=&quot;definitions-config&quot; value=&quot;/WEB-INF/tiles-defs.xml&quot; /&gt;      \r\n            &lt;set-property property=&quot;moduleAware&quot; value=&quot;true&quot; /&gt;\r\n        &lt;/plug-in&gt;\r\n        \r\n        &lt;!-- ========================= Validator plugin ================================= --&gt;\r\n        &lt;plug-in className=&quot;org.apache.struts.validator.ValidatorPlugIn&quot;&gt;\r\n            &lt;set-property\r\n                property=&quot;pathnames&quot;\r\n                value=&quot;/WEB-INF/validator-rules.xml,/WEB-INF/validation.xml&quot;/&gt;\r\n        &lt;/plug-in&gt;\r\n      \r\n    &lt;/struts-config&gt;\r\n\r\n\r\nThis is the `struts.xml`:\r\n\r\n\r\n\r\n\r\n            &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt; \r\n            &lt;result name=&quot;success&quot;&gt;/coupon_index.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\r\n        &lt;/action&gt;\r\n        &lt;action name=&quot;c_cpnDetail&quot;\r\n                class=&quot;com.Customer.Action&quot;\r\n                method=&quot;c_cpnDetail&quot; &gt; \r\n            &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;success&quot;&gt;/cmpny_couponDetail.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\r\n        &lt;/action&gt; \r\n        &lt;action name=&quot;coupon_index&quot;\r\n                class=&quot;com.Customer.Action&quot;\r\n                method=&quot;couponCode&quot; &gt; \r\n            &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;success&quot;&gt;/coupon_create.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\r\n        &lt;/action&gt; \r\n        &lt;action name=&quot;createCoupon&quot;\r\n                class=&quot;com.Customer.Action&quot;\r\n                method=&quot;create_Coupon&quot; &gt;\r\n              \r\n            &lt;interceptor-ref name=&quot;tokenSession&quot;/&gt;                  \r\n            &lt;interceptor-ref name=&quot;fileUpload&quot;&gt;\r\n                &lt;param name=&quot;allowedTypes&quot;&gt;\r\n                    image/png,image/gif,image/jpeg,image/pjpeg\r\n                &lt;/param&gt;\r\n            &lt;/interceptor-ref&gt;\r\n            &lt;interceptor-ref name=&quot;defaultStack&quot;&gt;&lt;/interceptor-ref&gt; \r\n            &lt;result name=&quot;invalid.token&quot; type=&quot;redirect&quot;&gt;coupon&lt;/result&gt;\r\n            &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt; \r\n            &lt;result name=&quot;success&quot;&gt;/coupon_index.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;input&quot;&gt;/ImageFileUploadError.jsp&lt;/result&gt;\r\n        &lt;/action&gt;  \r\n      \r\n        &lt;!--&lt;action name=&quot;couponAssignPage&quot;\r\n        class=&quot;com.Customer.Action&quot;\r\n         method=&quot;advSrch&quot; &gt; \r\n            &lt;result name=&quot;success&quot;&gt;./coupon_Assign.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;error&quot;&gt;./error.jsp&lt;/result&gt;\r\n        &lt;/action&gt; --&gt;\r\n       \r\n        &lt;action name=&quot;couponAssignPage&quot;\r\n                class=&quot;com.Customer.Action&quot;\r\n                method=&quot;cpn_assignPage&quot; &gt; \r\n            &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;success&quot;&gt;/coupon_Assign.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\r\n        &lt;/action&gt;\r\n        &lt;action name=&quot;cpn_getUsers&quot;\r\n                class=&quot;com.Customer.Action&quot;\r\n                method=&quot;cpn_getUsers&quot; &gt; \r\n            &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;success&quot;&gt;/coupon_Assign.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\r\n        &lt;/action&gt;\r\n       \r\n        &lt;action name=&quot;coupon_assign&quot;\r\n                class=&quot;com.Customer.Action&quot;\r\n                method=&quot;assign_coupon&quot; &gt; \r\n            &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;success&quot;&gt;/coupon_index.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\r\n        &lt;/action&gt;\r\n       \r\n       \r\n        &lt;action name=&quot;couponAssign&quot;\r\n                class=&quot;com.Customer.Action&quot;\r\n                method=&quot;coupon_assign&quot;&gt; \r\n            &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;success&quot;&gt;/coupon_index.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\r\n        &lt;/action&gt; \r\n        &lt;action name=&quot;csvExport&quot;\r\n                class=&quot;com.Customer.Action&quot;\r\n                method=&quot;csvExport&quot;&gt; \r\n            &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;success&quot;&gt;/csvDownload.jsp&lt;/result&gt;\r\n          \r\n            &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\r\n        &lt;/action&gt;        \r\n        &lt;action name=&quot;search_usr&quot;\r\n                class=&quot;com.Customer.Action&quot;\r\n                method=&quot;srch_usr1&quot; &gt; \r\n            &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;success&quot;&gt;/coupon_assign.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\r\n        &lt;/action&gt;\r\n        &lt;action name=&quot;deleteCoupon&quot;\r\n                class=&quot;com.Customer.Action&quot;\r\n                method=&quot;dltCoupon&quot; &gt; \r\n            &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;success&quot;&gt;/coupon_index.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\r\n        &lt;/action&gt; \r\n        &lt;action name=&quot;del_cpn&quot;\r\n                class=&quot;com.Customer.Action&quot;\r\n                method=&quot;bulk_cpn_del&quot; &gt; \r\n            &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;success&quot;&gt;/coupon_index.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\r\n        &lt;/action&gt;\r\n        &lt;action name=&quot;c_edit&quot;\r\n                class=&quot;com.Customer.Action&quot;\r\n                method=&quot;editCouponretrieve&quot; &gt; \r\n            &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;success&quot;&gt;/coupon_edit.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\r\n        &lt;/action&gt; \r\n        &lt;action name=&quot;editCoupon&quot;\r\n                class=&quot;com.Customer.Action&quot;\r\n                method=&quot;editCoupon&quot; &gt; \r\n            &lt;interceptor-ref name=&quot;fileUpload&quot;&gt;\r\n                &lt;param name=&quot;allowedTypes&quot;&gt;\r\n                    image/png,image/gif,image/jpeg,image/pjpeg\r\n                &lt;/param&gt;\r\n            &lt;/interceptor-ref&gt;\r\n            &lt;interceptor-ref name=&quot;defaultStack&quot;&gt;&lt;/interceptor-ref&gt;\r\n            &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;             \r\n            &lt;result name=&quot;success&quot;&gt;/coupon_index.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;input&quot;&gt;/ImageFileUploadError.jsp&lt;/result&gt;\r\n        &lt;/action&gt;\r\n        &lt;action name=&quot;couponSearchPage&quot;\r\n                class=&quot;com.Customer.Action&quot;\r\n                method=&quot;couponSearchPage&quot; &gt; \r\n            &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;success&quot;&gt;/Coupon_search.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\r\n        &lt;/action&gt;\r\n         \r\n        &lt;action name=&quot;couponSearch&quot;\r\n                class=&quot;com.Customer.Action&quot;\r\n                method=&quot;coupon_search&quot; &gt; \r\n            &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;success&quot;&gt;/coupon_searchResult.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\r\n        &lt;/action&gt;\r\n       \r\n       \r\n       \r\n        &lt;!-- Super Admin--&gt;\r\n        &lt;action name=&quot;create_company&quot;\r\n                class=&quot;com.Customer.Action&quot;\r\n                method=&quot;create_company&quot; &gt; \r\n            &lt;result name=&quot;success&quot;&gt;/sa_cmpny_create.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\r\n        &lt;/action&gt;\r\n        &lt;action name=&quot;gen_key&quot;\r\n                class=&quot;com.Customer.Action&quot;\r\n                method=&quot;couponCode&quot; &gt; \r\n            &lt;result name=&quot;success&quot;&gt;/sa_cmpny_create.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\r\n        &lt;/action&gt; \r\n        &lt;action name=&quot;sa_cmpnyDetail&quot;\r\n                class=&quot;com.Customer.Action&quot;\r\n                method=&quot;sa_cmpnyDetail&quot; &gt; \r\n            &lt;result name=&quot;success&quot;&gt;/sa_cmpnyDetail.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\r\n        &lt;/action&gt; \r\n        &lt;action name=&quot;sa_userDetail&quot;\r\n                class=&quot;com.Customer.Action&quot;\r\n                method=&quot;sa_userDetail&quot; &gt; \r\n            &lt;result name=&quot;success&quot;&gt;/sa_cmpnyDetail.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\r\n        &lt;/action&gt;\r\n        &lt;action name=&quot;sa_createCmpny&quot;\r\n                class=&quot;com.Customer.Action&quot;\r\n                method=&quot;sa_createCmpny&quot; &gt; \r\n            &lt;result name=&quot;invalid.token&quot; type=&quot;redirect&quot;&gt;sa_companyList&lt;/result&gt;\r\n            &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\r\n            &lt;interceptor-ref name=&quot;tokenSession&quot;/&gt; \r\n            &lt;interceptor-ref name=&quot;defaultStack&quot;&gt;&lt;/interceptor-ref&gt; \r\n            &lt;result name=&quot;success&quot;&gt;/sa_cmpny_list.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\r\n        &lt;/action&gt; \r\n        &lt;action name=&quot;sa_companyList&quot;\r\n                class=&quot;com.Customer.Action&quot;\r\n                method=&quot;sa_listCmpny&quot;&gt; \r\n            &lt;result name=&quot;success&quot;&gt;/sa_cmpny_list.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\r\n        &lt;/action&gt;\r\n        &lt;action name=&quot;sa_subCmpnyList&quot;\r\n                class=&quot;com.Customer.Action&quot;\r\n                method=&quot;sa_listSubCmpny&quot; &gt; \r\n            &lt;result name=&quot;success&quot;&gt;/sa_subcmpny_list.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\r\n        &lt;/action&gt;\r\n        &lt;action name=&quot;sa_cmpny_status&quot;\r\n                class=&quot;com.Customer.Action&quot;\r\n                method=&quot;sa_cmpny_status&quot; &gt; \r\n            &lt;result name=&quot;success&quot;&gt;/sa_cmpny_list.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\r\n        &lt;/action&gt; \r\n        &lt;action name=&quot;sa_subcmpny_status&quot;\r\n                class=&quot;com.Customer.Action&quot;\r\n                method=&quot;sa_subcmpny_status&quot; &gt; \r\n            &lt;result name=&quot;success&quot;&gt;/sa_subcmpny_list.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\r\n        &lt;/action&gt; \r\n        &lt;action name=&quot;sa_cmpny_delete&quot;\r\n                class=&quot;com.Customer.Action&quot;\r\n                method=&quot;sa_cmpny_delete&quot; &gt; \r\n            &lt;result name=&quot;success&quot;&gt;/sa_cmpny_list.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\r\n        &lt;/action&gt; \r\n        &lt;action name=&quot;sa_subcmpny_delete&quot;\r\n                class=&quot;com.Customer.Action&quot;\r\n                method=&quot;sa_subcmpny_delete&quot; &gt; \r\n            &lt;result name=&quot;success&quot;&gt;/sa_subcmpny_list.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\r\n        &lt;/action&gt; \r\n        &lt;action name=&quot;sa_cmpny_editRetrieve&quot;\r\n                class=&quot;com.Customer.Action&quot;\r\n                method=&quot;sa_cmpny_editRetrieve&quot; &gt; \r\n            &lt;result name=&quot;success&quot;&gt;/sa_cmpny_edit.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\r\n        &lt;/action&gt; \r\n        &lt;action name=&quot;sa_subcmpny_editRetrieve&quot;\r\n                class=&quot;com.Customer.Action&quot;\r\n                method=&quot;sa_subcmpny_editRetrieve&quot; &gt; \r\n            &lt;result name=&quot;success&quot;&gt;/sa_subcmpny_edit.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\r\n        &lt;/action&gt; \r\n        &lt;action name=&quot;sa_cmpny_edit&quot;\r\n                class=&quot;com.Customer.Action&quot;\r\n                method=&quot;sa_cmpny_edit&quot; &gt; \r\n            &lt;result name=&quot;success&quot;&gt;/sa_cmpny_list.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\r\n        &lt;/action&gt;\r\n        &lt;action name=&quot;sa_cmpny_planedit&quot;\r\n                class=&quot;com.Customer.Action&quot;\r\n                method=&quot;sa_cmpny_planedit&quot; &gt; \r\n            &lt;result name=&quot;success&quot;&gt;/sa_cmpny_list.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\r\n        &lt;/action&gt; \r\n        &lt;action name=&quot;sa_subcmpny_edit&quot;\r\n                class=&quot;com.Customer.Action&quot;\r\n                method=&quot;sa_subcmpny_edit&quot; &gt; \r\n            &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;success&quot;&gt;/sa_subcmpny_list.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\r\n        &lt;/action&gt; \r\n        &lt;action name=&quot;sa_login&quot;\r\n                class=&quot;com.Customer.Action&quot;\r\n                method=&quot;sa_login&quot; &gt; \r\n            &lt;interceptor-ref name=&quot;tokenSession&quot;/&gt; \r\n            &lt;interceptor-ref name=&quot;defaultStack&quot;&gt;&lt;/interceptor-ref&gt;\r\n            &lt;result name=&quot;invalid.token&quot; type=&quot;redirect&quot;&gt;/sa_login.jsp&lt;/result&gt; \r\n            &lt;result name=&quot;sa_success&quot;&gt;/sa_start.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;success&quot;&gt;/start.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\r\n            &lt;!--&lt;result name=&quot;graph&quot;&gt;./Graph.jsp&lt;/result&gt;--&gt;\r\n            &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\r\n        &lt;/action&gt; \r\n       \r\n        &lt;action name=&quot;logout&quot;\r\n                class=&quot;com.Customer.Action&quot;\r\n                method=&quot;logout&quot; &gt; \r\n            &lt;result name=&quot;sa_success&quot;&gt;/sa_start.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;success&quot;&gt;/sa_login.jsp&lt;/result&gt;\r\n            &lt;!--&lt;result name=&quot;success&quot;&gt;/sample.jsp&lt;/result&gt;--&gt;\r\n            &lt;result name=&quot;Success&quot;&gt;/start.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\r\n        &lt;/action&gt;\r\n       \r\n        &lt;action name=&quot;sa_logout&quot;\r\n                class=&quot;com.Customer.Action&quot;\r\n                method=&quot;sa_logout&quot;&gt;          \r\n            &lt;result name=&quot;success&quot;&gt;/sa_login.jsp&lt;/result&gt;           \r\n            &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\r\n        &lt;/action&gt;\r\n       \r\n        &lt;action name=&quot;settings&quot;\r\n                class=&quot;com.Customer.Action&quot;\r\n                method=&quot;settings&quot; &gt; \r\n            &lt;result name=&quot;success&quot;&gt;/sa_start.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\r\n        &lt;/action&gt;\r\n       \r\n        \r\n        \r\n        &lt;!--REV SOURCE--&gt;\r\n        &lt;!--Deals action result --&gt;  \r\n        &lt;action name=&quot;importCsv&quot; class=&quot;com.Customer.Action&quot; method=&quot;importcsv&quot;&gt;\r\n            &lt;result name=&quot;success&quot;&gt;/index.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;wrong_csv&quot;&gt;/index.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\r\n        &lt;/action&gt;\r\n                  \r\n        &lt;action name=&quot;click_Deals&quot;\r\n                class=&quot;com.Customer.Struts_Action&quot;\r\n                method=&quot;click_Deals&quot; &gt; \r\n            &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;success&quot;&gt;/list_Deals.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\r\n        &lt;/action&gt;\r\n       \r\n        &lt;action name=&quot;addDeals&quot;\r\n                class=&quot;com.Customer.Deals&quot;\r\n                method=&quot;execute&quot;&gt; \r\n            &lt;interceptor-ref name=&quot;tokenSession&quot;/&gt;                    \r\n            &lt;interceptor-ref name=&quot;fileUpload&quot;&gt;\r\n                &lt;param name=&quot;allowedTypes&quot;&gt;\r\n                    image/png,image/gif,image/jpeg,image/pjpeg\r\n                &lt;/param&gt;\r\n            &lt;/interceptor-ref&gt;\r\n            &lt;interceptor-ref name=&quot;defaultStack&quot;&gt;&lt;/interceptor-ref&gt; \r\n            &lt;result name=&quot;invalid.token&quot; type=&quot;redirect&quot;&gt;click_Deals&lt;/result&gt;\r\n            &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;success&quot;&gt;/Deals_submit.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;reached-deals&quot;&gt;/list_Deals.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;input&quot;&gt;/ImageFileUploadError.jsp&lt;/result&gt;\r\n        &lt;/action&gt;  \r\n      \r\n        &lt;action name=&quot;addDeals_first&quot;\r\n                class=&quot;com.Customer.Deals&quot;\r\n                method=&quot;execute_list&quot;&gt;\r\n            &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;success&quot;&gt;/Deals_submit.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;reached-deals&quot;&gt;/list_Deals.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\r\n        &lt;/action&gt;    \r\n     \r\n     \r\n        &lt;action name=&quot;d_status&quot;\r\n                class=&quot;com.Customer.Struts_Action&quot;\r\n                method=&quot;d_status&quot; &gt; \r\n            &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;success&quot;&gt;/list_Deals.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\r\n        &lt;/action&gt;\r\n        &lt;action name=&quot;activate_deal&quot;\r\n                class=&quot;com.Customer.Struts_Action&quot;\r\n                method=&quot;bulk_activate_deal&quot; &gt; \r\n            &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;success&quot;&gt;/list_Deals.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\r\n        &lt;/action&gt;\r\n        &lt;action name=&quot;inactivate_deal&quot;\r\n                class=&quot;com.Customer.Struts_Action&quot;\r\n                method=&quot;bulk_inactivate_deal&quot; &gt;\r\n            &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt; \r\n            &lt;result name=&quot;success&quot;&gt;/list_Deals.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\r\n        &lt;/action&gt;\r\n       \r\n       \r\n        &lt;action name=&quot;edit_Deal&quot;\r\n                class=&quot;com.Customer.Struts_Action&quot;\r\n                method=&quot;edit_Deal&quot;&gt;\r\n            &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;success&quot;&gt;/Deals_edit.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\r\n        &lt;/action&gt;\r\n      \r\n      \r\n        &lt;action name=&quot;editDealsData&quot;\r\n                class=&quot;com.Customer.Struts_Action&quot;\r\n                method=&quot;edit_Deal_Data&quot;&gt;                    \r\n            &lt;interceptor-ref name=&quot;fileUpload&quot;&gt;\r\n                \r\n                &lt;param name=&quot;allowedTypes&quot;&gt;\r\n                    image/png,image/gif,image/jpeg,image/pjpeg\r\n                &lt;/param&gt;\r\n            &lt;/interceptor-ref&gt;\r\n            &lt;interceptor-ref name=&quot;defaultStack&quot;&gt;&lt;/interceptor-ref&gt;  \r\n            &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;success&quot;&gt;/list_Deals.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;input&quot;&gt;/ImageFileUploadError.jsp&lt;/result&gt;\r\n        &lt;/action&gt;\r\n      \r\n        &lt;action name=&quot;Delete_Deal&quot;\r\n                class=&quot;com.Customer.Struts_Action&quot;\r\n                method=&quot;Delete_Deal&quot;&gt;\r\n            &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;success&quot;&gt;/list_Deals.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\r\n        &lt;/action&gt;\r\n        &lt;action name=&quot;del_deal&quot;\r\n                class=&quot;com.Customer.Struts_Action&quot;\r\n                method=&quot;bulk_del_deal&quot;&gt;\r\n            &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;success&quot;&gt;/list_Deals.jsp&lt;/result&gt;\r\n            &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\r\n        &lt;/action&gt;\r\n      \r\n        \r\n        \r\n    \r\n    &lt;/struts&gt;\r\n\r\n","title":"Netbeans error: Exception starting filter struts2 ClassNotFoundException: org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter","body":"<p>I have run the web application done using Struts. I not able to run the application I have faced the error while starting Apache tomcat errors and while run the web application it also throws error .I have post the error log below.</p>\n<p>Error in starting Apache Tomcat server:</p>\n<pre><code>    Feb 04, 2016 3:19:55 PM org.apache.catalina.core.StandardContext filterStart\nSEVERE: Exception starting filter struts2\njava.lang.ClassNotFoundException: org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter\n    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)\n    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)\n    at org.apache.catalina.core.DefaultInstanceManager.loadClass(DefaultInstanceManager.java:532)\n    at org.apache.catalina.core.DefaultInstanceManager.loadClassMaybePrivileged(DefaultInstanceManager.java:514)\n    at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:133)\n    at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:257)\n    at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:383)\n    at org.apache.catalina.core.ApplicationFilterConfig.&lt;init&gt;(ApplicationFilterConfig.java:104)\n    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4650)\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5306)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)\n    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)\n    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633)\n    at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:657)\n    at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1637)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:262)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n    at java.lang.Thread.run(Thread.java:744)\n</code></pre>\n<p>Error while running the web application:</p>\n<pre><code> Undeploying ...\nundeploy?path=/Loyalty4Salon\nOK - Undeployed application at context path /Loyalty4Salon\nIn-place deployment at /home/revathy/Documents/Esa netbeans/loyalty_salon/loyalty_salon/build/web\nDeployment is in progress...\ndeploy?config=file%3A%2Ftmp%2Fcontext2062383266810619779.xml&amp;path=/Loyalty4Salon\nFAIL - Deployed application at context path /Loyalty4Salon but context failed to start\n/home/revathy/Documents/Esa netbeans/loyalty_salon/loyalty_salon/nbproject/build-impl.xml:1125: The module has not been deployed.\nSee the server log for details.\nBUILD FAILED (total time: 2 seconds)\n</code></pre>\n<p>This is the <code>struts-config.xml</code>:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;\n\n&lt;!DOCTYPE struts-config PUBLIC\n          &quot;-//Apache Software Foundation//DTD Struts Configuration 1.3//EN&quot;\n          &quot;http://jakarta.apache.org/struts/dtds/struts-config_1_3.dtd&quot;&gt;\n&lt;struts-config&gt;\n    &lt;form-beans&gt;\n    \n    &lt;/form-beans&gt;\n    \n    &lt;global-exceptions&gt;\n    \n    &lt;/global-exceptions&gt;\n\n    &lt;global-forwards&gt;\n        &lt;forward name=&quot;welcome&quot;  path=&quot;/Welcome.do&quot;/&gt;\n    &lt;/global-forwards&gt;\n\n    &lt;action-mappings&gt;\n        &lt;action path=&quot;/Welcome&quot; forward=&quot;/welcomeStruts.jsp&quot;/&gt;\n    &lt;/action-mappings&gt;\n    \n    &lt;controller processorClass=&quot;org.apache.struts.tiles.TilesRequestProcessor&quot;/&gt;\n\n    &lt;message-resources parameter=&quot;com/myapp/struts/ApplicationResource&quot;/&gt;    \n    \n    &lt;!-- ========================= Tiles plugin ===============================--&gt;\n    &lt;!--\n    This plugin initialize Tiles definition factory. This later can takes some\n    parameters explained here after. The plugin first read parameters from\n    web.xml, thenoverload them with parameters defined here. All parameters\n    are optional.\n    The plugin should be declared in each struts-config file.\n    - definitions-config: (optional)\n    Specify configuration file names. There can be several comma\n    separated file names (default: ?? )\n    - moduleAware: (optional - struts1.1)\n    Specify if the Tiles definition factory is module aware. If true\n    (default), there will be one factory for each Struts module.\n    If false, there will be one common factory for all module. In this\n    later case, it is still needed to declare one plugin per module.\n    The factory will be initialized with parameters found in the first\n    initialized plugin (generally the one associated with the default\n    module).\n    true : One factory per module. (default)\n    false : one single shared factory for all modules\n    - definitions-parser-validate: (optional)\n    Specify if xml parser should validate the Tiles configuration file.\n    true : validate. DTD should be specified in file header (default)\n    false : no validation\n\n    Paths found in Tiles definitions are relative to the main context.\n    --&gt;\n    &lt;plug-in className=&quot;org.apache.struts.tiles.TilesPlugin&quot; &gt;\n        &lt;set-property property=&quot;definitions-config&quot; value=&quot;/WEB-INF/tiles-defs.xml&quot; /&gt;      \n        &lt;set-property property=&quot;moduleAware&quot; value=&quot;true&quot; /&gt;\n    &lt;/plug-in&gt;\n    \n    &lt;!-- ========================= Validator plugin ================================= --&gt;\n    &lt;plug-in className=&quot;org.apache.struts.validator.ValidatorPlugIn&quot;&gt;\n        &lt;set-property\n            property=&quot;pathnames&quot;\n            value=&quot;/WEB-INF/validator-rules.xml,/WEB-INF/validation.xml&quot;/&gt;\n    &lt;/plug-in&gt;\n  \n&lt;/struts-config&gt;\n</code></pre>\n<p>This is the <code>struts.xml</code>:</p>\n<pre><code>        &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt; \n        &lt;result name=&quot;success&quot;&gt;/coupon_index.jsp&lt;/result&gt;\n        &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\n    &lt;/action&gt;\n    &lt;action name=&quot;c_cpnDetail&quot;\n            class=&quot;com.Customer.Action&quot;\n            method=&quot;c_cpnDetail&quot; &gt; \n        &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\n        &lt;result name=&quot;success&quot;&gt;/cmpny_couponDetail.jsp&lt;/result&gt;\n        &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\n    &lt;/action&gt; \n    &lt;action name=&quot;coupon_index&quot;\n            class=&quot;com.Customer.Action&quot;\n            method=&quot;couponCode&quot; &gt; \n        &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\n        &lt;result name=&quot;success&quot;&gt;/coupon_create.jsp&lt;/result&gt;\n        &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\n    &lt;/action&gt; \n    &lt;action name=&quot;createCoupon&quot;\n            class=&quot;com.Customer.Action&quot;\n            method=&quot;create_Coupon&quot; &gt;\n          \n        &lt;interceptor-ref name=&quot;tokenSession&quot;/&gt;                  \n        &lt;interceptor-ref name=&quot;fileUpload&quot;&gt;\n            &lt;param name=&quot;allowedTypes&quot;&gt;\n                image/png,image/gif,image/jpeg,image/pjpeg\n            &lt;/param&gt;\n        &lt;/interceptor-ref&gt;\n        &lt;interceptor-ref name=&quot;defaultStack&quot;&gt;&lt;/interceptor-ref&gt; \n        &lt;result name=&quot;invalid.token&quot; type=&quot;redirect&quot;&gt;coupon&lt;/result&gt;\n        &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt; \n        &lt;result name=&quot;success&quot;&gt;/coupon_index.jsp&lt;/result&gt;\n        &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\n        &lt;result name=&quot;input&quot;&gt;/ImageFileUploadError.jsp&lt;/result&gt;\n    &lt;/action&gt;  \n  \n    &lt;!--&lt;action name=&quot;couponAssignPage&quot;\n    class=&quot;com.Customer.Action&quot;\n     method=&quot;advSrch&quot; &gt; \n        &lt;result name=&quot;success&quot;&gt;./coupon_Assign.jsp&lt;/result&gt;\n        &lt;result name=&quot;error&quot;&gt;./error.jsp&lt;/result&gt;\n    &lt;/action&gt; --&gt;\n   \n    &lt;action name=&quot;couponAssignPage&quot;\n            class=&quot;com.Customer.Action&quot;\n            method=&quot;cpn_assignPage&quot; &gt; \n        &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\n        &lt;result name=&quot;success&quot;&gt;/coupon_Assign.jsp&lt;/result&gt;\n        &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\n    &lt;/action&gt;\n    &lt;action name=&quot;cpn_getUsers&quot;\n            class=&quot;com.Customer.Action&quot;\n            method=&quot;cpn_getUsers&quot; &gt; \n        &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\n        &lt;result name=&quot;success&quot;&gt;/coupon_Assign.jsp&lt;/result&gt;\n        &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\n    &lt;/action&gt;\n   \n    &lt;action name=&quot;coupon_assign&quot;\n            class=&quot;com.Customer.Action&quot;\n            method=&quot;assign_coupon&quot; &gt; \n        &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\n        &lt;result name=&quot;success&quot;&gt;/coupon_index.jsp&lt;/result&gt;\n        &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\n    &lt;/action&gt;\n   \n   \n    &lt;action name=&quot;couponAssign&quot;\n            class=&quot;com.Customer.Action&quot;\n            method=&quot;coupon_assign&quot;&gt; \n        &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\n        &lt;result name=&quot;success&quot;&gt;/coupon_index.jsp&lt;/result&gt;\n        &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\n    &lt;/action&gt; \n    &lt;action name=&quot;csvExport&quot;\n            class=&quot;com.Customer.Action&quot;\n            method=&quot;csvExport&quot;&gt; \n        &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\n        &lt;result name=&quot;success&quot;&gt;/csvDownload.jsp&lt;/result&gt;\n      \n        &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\n    &lt;/action&gt;        \n    &lt;action name=&quot;search_usr&quot;\n            class=&quot;com.Customer.Action&quot;\n            method=&quot;srch_usr1&quot; &gt; \n        &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\n        &lt;result name=&quot;success&quot;&gt;/coupon_assign.jsp&lt;/result&gt;\n        &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\n    &lt;/action&gt;\n    &lt;action name=&quot;deleteCoupon&quot;\n            class=&quot;com.Customer.Action&quot;\n            method=&quot;dltCoupon&quot; &gt; \n        &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\n        &lt;result name=&quot;success&quot;&gt;/coupon_index.jsp&lt;/result&gt;\n        &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\n    &lt;/action&gt; \n    &lt;action name=&quot;del_cpn&quot;\n            class=&quot;com.Customer.Action&quot;\n            method=&quot;bulk_cpn_del&quot; &gt; \n        &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\n        &lt;result name=&quot;success&quot;&gt;/coupon_index.jsp&lt;/result&gt;\n        &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\n    &lt;/action&gt;\n    &lt;action name=&quot;c_edit&quot;\n            class=&quot;com.Customer.Action&quot;\n            method=&quot;editCouponretrieve&quot; &gt; \n        &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\n        &lt;result name=&quot;success&quot;&gt;/coupon_edit.jsp&lt;/result&gt;\n        &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\n    &lt;/action&gt; \n    &lt;action name=&quot;editCoupon&quot;\n            class=&quot;com.Customer.Action&quot;\n            method=&quot;editCoupon&quot; &gt; \n        &lt;interceptor-ref name=&quot;fileUpload&quot;&gt;\n            &lt;param name=&quot;allowedTypes&quot;&gt;\n                image/png,image/gif,image/jpeg,image/pjpeg\n            &lt;/param&gt;\n        &lt;/interceptor-ref&gt;\n        &lt;interceptor-ref name=&quot;defaultStack&quot;&gt;&lt;/interceptor-ref&gt;\n        &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;             \n        &lt;result name=&quot;success&quot;&gt;/coupon_index.jsp&lt;/result&gt;\n        &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\n        &lt;result name=&quot;input&quot;&gt;/ImageFileUploadError.jsp&lt;/result&gt;\n    &lt;/action&gt;\n    &lt;action name=&quot;couponSearchPage&quot;\n            class=&quot;com.Customer.Action&quot;\n            method=&quot;couponSearchPage&quot; &gt; \n        &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\n        &lt;result name=&quot;success&quot;&gt;/Coupon_search.jsp&lt;/result&gt;\n        &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\n    &lt;/action&gt;\n     \n    &lt;action name=&quot;couponSearch&quot;\n            class=&quot;com.Customer.Action&quot;\n            method=&quot;coupon_search&quot; &gt; \n        &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\n        &lt;result name=&quot;success&quot;&gt;/coupon_searchResult.jsp&lt;/result&gt;\n        &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\n    &lt;/action&gt;\n   \n   \n   \n    &lt;!-- Super Admin--&gt;\n    &lt;action name=&quot;create_company&quot;\n            class=&quot;com.Customer.Action&quot;\n            method=&quot;create_company&quot; &gt; \n        &lt;result name=&quot;success&quot;&gt;/sa_cmpny_create.jsp&lt;/result&gt;\n        &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\n        &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\n    &lt;/action&gt;\n    &lt;action name=&quot;gen_key&quot;\n            class=&quot;com.Customer.Action&quot;\n            method=&quot;couponCode&quot; &gt; \n        &lt;result name=&quot;success&quot;&gt;/sa_cmpny_create.jsp&lt;/result&gt;\n        &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\n        &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\n    &lt;/action&gt; \n    &lt;action name=&quot;sa_cmpnyDetail&quot;\n            class=&quot;com.Customer.Action&quot;\n            method=&quot;sa_cmpnyDetail&quot; &gt; \n        &lt;result name=&quot;success&quot;&gt;/sa_cmpnyDetail.jsp&lt;/result&gt;\n        &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\n        &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\n    &lt;/action&gt; \n    &lt;action name=&quot;sa_userDetail&quot;\n            class=&quot;com.Customer.Action&quot;\n            method=&quot;sa_userDetail&quot; &gt; \n        &lt;result name=&quot;success&quot;&gt;/sa_cmpnyDetail.jsp&lt;/result&gt;\n        &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\n        &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\n    &lt;/action&gt;\n    &lt;action name=&quot;sa_createCmpny&quot;\n            class=&quot;com.Customer.Action&quot;\n            method=&quot;sa_createCmpny&quot; &gt; \n        &lt;result name=&quot;invalid.token&quot; type=&quot;redirect&quot;&gt;sa_companyList&lt;/result&gt;\n        &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\n        &lt;interceptor-ref name=&quot;tokenSession&quot;/&gt; \n        &lt;interceptor-ref name=&quot;defaultStack&quot;&gt;&lt;/interceptor-ref&gt; \n        &lt;result name=&quot;success&quot;&gt;/sa_cmpny_list.jsp&lt;/result&gt;\n        &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\n        &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\n    &lt;/action&gt; \n    &lt;action name=&quot;sa_companyList&quot;\n            class=&quot;com.Customer.Action&quot;\n            method=&quot;sa_listCmpny&quot;&gt; \n        &lt;result name=&quot;success&quot;&gt;/sa_cmpny_list.jsp&lt;/result&gt;\n        &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\n        &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\n    &lt;/action&gt;\n    &lt;action name=&quot;sa_subCmpnyList&quot;\n            class=&quot;com.Customer.Action&quot;\n            method=&quot;sa_listSubCmpny&quot; &gt; \n        &lt;result name=&quot;success&quot;&gt;/sa_subcmpny_list.jsp&lt;/result&gt;\n        &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\n        &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\n    &lt;/action&gt;\n    &lt;action name=&quot;sa_cmpny_status&quot;\n            class=&quot;com.Customer.Action&quot;\n            method=&quot;sa_cmpny_status&quot; &gt; \n        &lt;result name=&quot;success&quot;&gt;/sa_cmpny_list.jsp&lt;/result&gt;\n        &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\n        &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\n    &lt;/action&gt; \n    &lt;action name=&quot;sa_subcmpny_status&quot;\n            class=&quot;com.Customer.Action&quot;\n            method=&quot;sa_subcmpny_status&quot; &gt; \n        &lt;result name=&quot;success&quot;&gt;/sa_subcmpny_list.jsp&lt;/result&gt;\n        &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\n        &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\n    &lt;/action&gt; \n    &lt;action name=&quot;sa_cmpny_delete&quot;\n            class=&quot;com.Customer.Action&quot;\n            method=&quot;sa_cmpny_delete&quot; &gt; \n        &lt;result name=&quot;success&quot;&gt;/sa_cmpny_list.jsp&lt;/result&gt;\n        &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\n        &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\n    &lt;/action&gt; \n    &lt;action name=&quot;sa_subcmpny_delete&quot;\n            class=&quot;com.Customer.Action&quot;\n            method=&quot;sa_subcmpny_delete&quot; &gt; \n        &lt;result name=&quot;success&quot;&gt;/sa_subcmpny_list.jsp&lt;/result&gt;\n        &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\n        &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\n    &lt;/action&gt; \n    &lt;action name=&quot;sa_cmpny_editRetrieve&quot;\n            class=&quot;com.Customer.Action&quot;\n            method=&quot;sa_cmpny_editRetrieve&quot; &gt; \n        &lt;result name=&quot;success&quot;&gt;/sa_cmpny_edit.jsp&lt;/result&gt;\n        &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\n        &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\n    &lt;/action&gt; \n    &lt;action name=&quot;sa_subcmpny_editRetrieve&quot;\n            class=&quot;com.Customer.Action&quot;\n            method=&quot;sa_subcmpny_editRetrieve&quot; &gt; \n        &lt;result name=&quot;success&quot;&gt;/sa_subcmpny_edit.jsp&lt;/result&gt;\n        &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\n        &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\n    &lt;/action&gt; \n    &lt;action name=&quot;sa_cmpny_edit&quot;\n            class=&quot;com.Customer.Action&quot;\n            method=&quot;sa_cmpny_edit&quot; &gt; \n        &lt;result name=&quot;success&quot;&gt;/sa_cmpny_list.jsp&lt;/result&gt;\n        &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\n        &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\n    &lt;/action&gt;\n    &lt;action name=&quot;sa_cmpny_planedit&quot;\n            class=&quot;com.Customer.Action&quot;\n            method=&quot;sa_cmpny_planedit&quot; &gt; \n        &lt;result name=&quot;success&quot;&gt;/sa_cmpny_list.jsp&lt;/result&gt;\n        &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\n        &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\n    &lt;/action&gt; \n    &lt;action name=&quot;sa_subcmpny_edit&quot;\n            class=&quot;com.Customer.Action&quot;\n            method=&quot;sa_subcmpny_edit&quot; &gt; \n        &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\n        &lt;result name=&quot;success&quot;&gt;/sa_subcmpny_list.jsp&lt;/result&gt;\n        &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\n    &lt;/action&gt; \n    &lt;action name=&quot;sa_login&quot;\n            class=&quot;com.Customer.Action&quot;\n            method=&quot;sa_login&quot; &gt; \n        &lt;interceptor-ref name=&quot;tokenSession&quot;/&gt; \n        &lt;interceptor-ref name=&quot;defaultStack&quot;&gt;&lt;/interceptor-ref&gt;\n        &lt;result name=&quot;invalid.token&quot; type=&quot;redirect&quot;&gt;/sa_login.jsp&lt;/result&gt; \n        &lt;result name=&quot;sa_success&quot;&gt;/sa_start.jsp&lt;/result&gt;\n        &lt;result name=&quot;success&quot;&gt;/start.jsp&lt;/result&gt;\n        &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\n        &lt;!--&lt;result name=&quot;graph&quot;&gt;./Graph.jsp&lt;/result&gt;--&gt;\n        &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\n    &lt;/action&gt; \n   \n    &lt;action name=&quot;logout&quot;\n            class=&quot;com.Customer.Action&quot;\n            method=&quot;logout&quot; &gt; \n        &lt;result name=&quot;sa_success&quot;&gt;/sa_start.jsp&lt;/result&gt;\n        &lt;result name=&quot;success&quot;&gt;/sa_login.jsp&lt;/result&gt;\n        &lt;!--&lt;result name=&quot;success&quot;&gt;/sample.jsp&lt;/result&gt;--&gt;\n        &lt;result name=&quot;Success&quot;&gt;/start.jsp&lt;/result&gt;\n        &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\n    &lt;/action&gt;\n   \n    &lt;action name=&quot;sa_logout&quot;\n            class=&quot;com.Customer.Action&quot;\n            method=&quot;sa_logout&quot;&gt;          \n        &lt;result name=&quot;success&quot;&gt;/sa_login.jsp&lt;/result&gt;           \n        &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\n    &lt;/action&gt;\n   \n    &lt;action name=&quot;settings&quot;\n            class=&quot;com.Customer.Action&quot;\n            method=&quot;settings&quot; &gt; \n        &lt;result name=&quot;success&quot;&gt;/sa_start.jsp&lt;/result&gt;\n        &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\n        &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\n    &lt;/action&gt;\n   \n    \n    \n    &lt;!--REV SOURCE--&gt;\n    &lt;!--Deals action result --&gt;  \n    &lt;action name=&quot;importCsv&quot; class=&quot;com.Customer.Action&quot; method=&quot;importcsv&quot;&gt;\n        &lt;result name=&quot;success&quot;&gt;/index.jsp&lt;/result&gt;\n        &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\n        &lt;result name=&quot;wrong_csv&quot;&gt;/index.jsp&lt;/result&gt;\n        &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\n    &lt;/action&gt;\n              \n    &lt;action name=&quot;click_Deals&quot;\n            class=&quot;com.Customer.Struts_Action&quot;\n            method=&quot;click_Deals&quot; &gt; \n        &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\n        &lt;result name=&quot;success&quot;&gt;/list_Deals.jsp&lt;/result&gt;\n        &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\n    &lt;/action&gt;\n   \n    &lt;action name=&quot;addDeals&quot;\n            class=&quot;com.Customer.Deals&quot;\n            method=&quot;execute&quot;&gt; \n        &lt;interceptor-ref name=&quot;tokenSession&quot;/&gt;                    \n        &lt;interceptor-ref name=&quot;fileUpload&quot;&gt;\n            &lt;param name=&quot;allowedTypes&quot;&gt;\n                image/png,image/gif,image/jpeg,image/pjpeg\n            &lt;/param&gt;\n        &lt;/interceptor-ref&gt;\n        &lt;interceptor-ref name=&quot;defaultStack&quot;&gt;&lt;/interceptor-ref&gt; \n        &lt;result name=&quot;invalid.token&quot; type=&quot;redirect&quot;&gt;click_Deals&lt;/result&gt;\n        &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\n        &lt;result name=&quot;success&quot;&gt;/Deals_submit.jsp&lt;/result&gt;\n        &lt;result name=&quot;reached-deals&quot;&gt;/list_Deals.jsp&lt;/result&gt;\n        &lt;result name=&quot;input&quot;&gt;/ImageFileUploadError.jsp&lt;/result&gt;\n    &lt;/action&gt;  \n  \n    &lt;action name=&quot;addDeals_first&quot;\n            class=&quot;com.Customer.Deals&quot;\n            method=&quot;execute_list&quot;&gt;\n        &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\n        &lt;result name=&quot;success&quot;&gt;/Deals_submit.jsp&lt;/result&gt;\n        &lt;result name=&quot;reached-deals&quot;&gt;/list_Deals.jsp&lt;/result&gt;\n        &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\n    &lt;/action&gt;    \n \n \n    &lt;action name=&quot;d_status&quot;\n            class=&quot;com.Customer.Struts_Action&quot;\n            method=&quot;d_status&quot; &gt; \n        &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\n        &lt;result name=&quot;success&quot;&gt;/list_Deals.jsp&lt;/result&gt;\n        &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\n    &lt;/action&gt;\n    &lt;action name=&quot;activate_deal&quot;\n            class=&quot;com.Customer.Struts_Action&quot;\n            method=&quot;bulk_activate_deal&quot; &gt; \n        &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\n        &lt;result name=&quot;success&quot;&gt;/list_Deals.jsp&lt;/result&gt;\n        &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\n    &lt;/action&gt;\n    &lt;action name=&quot;inactivate_deal&quot;\n            class=&quot;com.Customer.Struts_Action&quot;\n            method=&quot;bulk_inactivate_deal&quot; &gt;\n        &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt; \n        &lt;result name=&quot;success&quot;&gt;/list_Deals.jsp&lt;/result&gt;\n        &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\n    &lt;/action&gt;\n   \n   \n    &lt;action name=&quot;edit_Deal&quot;\n            class=&quot;com.Customer.Struts_Action&quot;\n            method=&quot;edit_Deal&quot;&gt;\n        &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\n        &lt;result name=&quot;success&quot;&gt;/Deals_edit.jsp&lt;/result&gt;\n        &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\n    &lt;/action&gt;\n  \n  \n    &lt;action name=&quot;editDealsData&quot;\n            class=&quot;com.Customer.Struts_Action&quot;\n            method=&quot;edit_Deal_Data&quot;&gt;                    \n        &lt;interceptor-ref name=&quot;fileUpload&quot;&gt;\n            \n            &lt;param name=&quot;allowedTypes&quot;&gt;\n                image/png,image/gif,image/jpeg,image/pjpeg\n            &lt;/param&gt;\n        &lt;/interceptor-ref&gt;\n        &lt;interceptor-ref name=&quot;defaultStack&quot;&gt;&lt;/interceptor-ref&gt;  \n        &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\n        &lt;result name=&quot;success&quot;&gt;/list_Deals.jsp&lt;/result&gt;\n        &lt;result name=&quot;input&quot;&gt;/ImageFileUploadError.jsp&lt;/result&gt;\n    &lt;/action&gt;\n  \n    &lt;action name=&quot;Delete_Deal&quot;\n            class=&quot;com.Customer.Struts_Action&quot;\n            method=&quot;Delete_Deal&quot;&gt;\n        &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\n        &lt;result name=&quot;success&quot;&gt;/list_Deals.jsp&lt;/result&gt;\n        &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\n    &lt;/action&gt;\n    &lt;action name=&quot;del_deal&quot;\n            class=&quot;com.Customer.Struts_Action&quot;\n            method=&quot;bulk_del_deal&quot;&gt;\n        &lt;result name=&quot;logoutPage&quot;&gt;/sa_login.jsp&lt;/result&gt;\n        &lt;result name=&quot;success&quot;&gt;/list_Deals.jsp&lt;/result&gt;\n        &lt;result name=&quot;error&quot;&gt;/error.jsp&lt;/result&gt;\n    &lt;/action&gt;\n  \n    \n    \n\n&lt;/struts&gt;\n</code></pre>\n"},{"tags":["java","sockets","exception","jdbc","mariadb"],"comments":[{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1694008215,"post_id":77052367,"comment_id":135834811,"body_markdown":"Try to change the hostname or port.","body":"Try to change the hostname or port."}],"owner":{"account_id":29245173,"reputation":11,"user_id":22405796,"display_name":"Agustin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":547,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1694006815,"creation_date":1694006779,"question_id":77052367,"body_markdown":"I&#39;m facing an issue while connecting to a remote MariaDB database from my work using Java. I have to use an SSH connection.\r\n\r\nFor the SSH part, I&#39;m using the dependency Jsch\r\n\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.github.mwiede&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jsch&lt;/artifactId&gt;\r\n    &lt;version&gt;0.2.11&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nand I&#39;m using for the connection with MariaDB the dependency:\r\n\r\n```\r\n     &lt;dependency&gt;\r\n         &lt;groupId&gt;org.mariadb.jdbc&lt;/groupId&gt;\r\n         &lt;artifactId&gt;mariadb-java-client&lt;/artifactId&gt;\r\n         &lt;version&gt;3.1.4&lt;/version&gt;\r\n     &lt;/dependency&gt;\r\n```\r\n\r\nI can connect with the server using SSH with Jsch with the following code:\r\n\r\n```\r\nJSch jsch = new JSch();\r\njsch.setKnownHosts(System.getProperty(&quot;user.home&quot;)+&quot;/.ssh/known_hosts&quot;);\r\njsch.addIdentity(publicKey);\r\nsession = jsch.getSession(sshUserName, sshServer, remoteSSHPort);\r\nsession.setConfig(&quot;StrictHostKeyChecking&quot;, &quot;yes&quot;);\r\nsession.connect();\r\n```\r\n\r\nBut when I&#39;m trying to connect with the Database using this code,\r\n\r\n```\r\npublic Connection connectToDB() throws Exception {\r\n\r\n    int assignedPort = session.setPortForwardingL(localPort,serverHost,remoteSSHPort);\r\n    String url = &quot;jdbc:mariadb://&quot; + serverHost + &quot;:&quot; + assignedPort + &quot;/&quot; + database;\r\n\r\n    return DriverManager.getConnection(url,userSQL,passwordSql);\r\n}\r\n```\r\n\r\nIt fails in the `DriverManager.getConnection()` part with the error: `SQLNonTransientConnectionException: Socket fail to connect to host:address=(host=database)(port=3306)(type=primary). database`.\r\n\r\nFor some reason, when I use DBeaver to connect to this Database I don&#39;t have any issue, it connects smoothly.\r\n\r\nTrying to solve this issue, I have tried different types of solutions.\r\n\r\nFor example:\r\n\r\nUsing the different ways of sending the information in DriverManager.getConnection() method:\r\n\r\n- `getConnection(String url, String user, String password)`\r\n\r\n- `getConnection(String url)`\r\n\r\n- `getConnection(String url, java.util.Properties info)`\r\n\r\nFinally, I have tried without results using the code:\r\n\r\n```\r\nwhile(session.isConnected()){\r\n    Connection connection = connectToDB();\r\n    System.out.println(&quot;connected to DB...&quot;);\r\n    Statement statement = connection.createStatement();\r\n}\r\n```\r\n\r\nAny suggestion on how to solve this?","title":"SQLNonTransientConnectionException: Socket fail to connect to host. Error when trying to connect to remote MariaDB with Java","body":"<p>I'm facing an issue while connecting to a remote MariaDB database from my work using Java. I have to use an SSH connection.</p>\n<p>For the SSH part, I'm using the dependency Jsch</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.github.mwiede&lt;/groupId&gt;\n    &lt;artifactId&gt;jsch&lt;/artifactId&gt;\n    &lt;version&gt;0.2.11&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>and I'm using for the connection with MariaDB the dependency:</p>\n<pre><code>     &lt;dependency&gt;\n         &lt;groupId&gt;org.mariadb.jdbc&lt;/groupId&gt;\n         &lt;artifactId&gt;mariadb-java-client&lt;/artifactId&gt;\n         &lt;version&gt;3.1.4&lt;/version&gt;\n     &lt;/dependency&gt;\n</code></pre>\n<p>I can connect with the server using SSH with Jsch with the following code:</p>\n<pre><code>JSch jsch = new JSch();\njsch.setKnownHosts(System.getProperty(&quot;user.home&quot;)+&quot;/.ssh/known_hosts&quot;);\njsch.addIdentity(publicKey);\nsession = jsch.getSession(sshUserName, sshServer, remoteSSHPort);\nsession.setConfig(&quot;StrictHostKeyChecking&quot;, &quot;yes&quot;);\nsession.connect();\n</code></pre>\n<p>But when I'm trying to connect with the Database using this code,</p>\n<pre><code>public Connection connectToDB() throws Exception {\n\n    int assignedPort = session.setPortForwardingL(localPort,serverHost,remoteSSHPort);\n    String url = &quot;jdbc:mariadb://&quot; + serverHost + &quot;:&quot; + assignedPort + &quot;/&quot; + database;\n\n    return DriverManager.getConnection(url,userSQL,passwordSql);\n}\n</code></pre>\n<p>It fails in the <code>DriverManager.getConnection()</code> part with the error: <code>SQLNonTransientConnectionException: Socket fail to connect to host:address=(host=database)(port=3306)(type=primary). database</code>.</p>\n<p>For some reason, when I use DBeaver to connect to this Database I don't have any issue, it connects smoothly.</p>\n<p>Trying to solve this issue, I have tried different types of solutions.</p>\n<p>For example:</p>\n<p>Using the different ways of sending the information in DriverManager.getConnection() method:</p>\n<ul>\n<li><p><code>getConnection(String url, String user, String password)</code></p>\n</li>\n<li><p><code>getConnection(String url)</code></p>\n</li>\n<li><p><code>getConnection(String url, java.util.Properties info)</code></p>\n</li>\n</ul>\n<p>Finally, I have tried without results using the code:</p>\n<pre><code>while(session.isConnected()){\n    Connection connection = connectToDB();\n    System.out.println(&quot;connected to DB...&quot;);\n    Statement statement = connection.createStatement();\n}\n</code></pre>\n<p>Any suggestion on how to solve this?</p>\n"},{"tags":["java","visual-studio-code","terminal"],"comments":[{"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"score":2,"creation_date":1693937527,"post_id":77046816,"comment_id":135824630,"body_markdown":"Do not include screenshots of code. Copy and paste the code into your post.","body":"Do not include screenshots of code. Copy and paste the code into your post."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1693982202,"post_id":77046816,"comment_id":135829537,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"comments":[{"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"score":0,"creation_date":1693980531,"post_id":77047036,"comment_id":135829310,"body_markdown":"You should accept the answer by clicking on tick icon ✅ which is at left of the answer, so that community can understand that the question has been answered.","body":"You should accept the answer by clicking on tick icon ✅ which is at left of the answer, so that community can understand that the question has been answered."}],"tags":[],"owner":{"account_id":23030736,"reputation":11,"user_id":17150258,"display_name":"ahmed mohamed"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1694006664,"creation_date":1693939679,"answer_id":77047036,"question_id":77046816,"body_markdown":"I solved the problem by downloading the `code runner extension`, but the result appeared in output, not in the terminal. [Solve the problem.](https://i.stack.imgur.com/K3QfR.jpg)\r\n\r\nThank you!\r\n\r\n  \r\n  [1]: https://i.stack.imgur.com/K3QfR.jpg","title":"Why doesn&#39;t the result of running java file appear in the terminal","body":"<p>I solved the problem by downloading the <code>code runner extension</code>, but the result appeared in output, not in the terminal. <a href=\"https://i.stack.imgur.com/K3QfR.jpg\" rel=\"nofollow noreferrer\">Solve the problem.</a></p>\n<p>Thank you!</p>\n"}],"owner":{"account_id":23030736,"reputation":11,"user_id":17150258,"display_name":"ahmed mohamed"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694006664,"creation_date":1693937117,"question_id":77046816,"body_markdown":"I have downloaded the 6 required extensions as mentioned on the vsc website\r\nand download jdk-20\r\nAnd when I press run, a notification of the process of building and running comes below the program, but the terminal tab does not appear to show the result of the code\r\nWhen I deleted jdk, vsc told me, so I downloaded it again\r\n\r\n-- The problem is not that there are errors, but that the result of the operation does not appear. why?\r\n\r\nI tried to run a very simple java file on vsc but the code result is not shown\r\n\r\nThe number on the run and debug flag is the number of times the file has been run but there was no result:\r\n\r\n![The number on the run and debug flag is the number of times the file has been run but there was no result](https://i.stack.imgur.com/zm0ZP.jpg)\r\n\r\nThe operation ends with no result:\r\n\r\n![The operation ends with no result](https://i.stack.imgur.com/Qm8Hk.jpg)","title":"Why doesn&#39;t the result of running java file appear in the terminal","body":"<p>I have downloaded the 6 required extensions as mentioned on the vsc website\nand download jdk-20\nAnd when I press run, a notification of the process of building and running comes below the program, but the terminal tab does not appear to show the result of the code\nWhen I deleted jdk, vsc told me, so I downloaded it again</p>\n<p>-- The problem is not that there are errors, but that the result of the operation does not appear. why?</p>\n<p>I tried to run a very simple java file on vsc but the code result is not shown</p>\n<p>The number on the run and debug flag is the number of times the file has been run but there was no result:</p>\n<p><img src=\"https://i.stack.imgur.com/zm0ZP.jpg\" alt=\"The number on the run and debug flag is the number of times the file has been run but there was no result\" /></p>\n<p>The operation ends with no result:</p>\n<p><img src=\"https://i.stack.imgur.com/Qm8Hk.jpg\" alt=\"The operation ends with no result\" /></p>\n"},{"tags":["java","excel","exception","microsoft-graph-api"],"owner":{"account_id":367805,"reputation":143,"user_id":714212,"display_name":"rread"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694006633,"creation_date":1694006633,"question_id":77052351,"body_markdown":"I have a piece of code in java using the microsoft graphapi, i need to detect if a workbook has a worksheet with the name &quot;centralData&quot;, but it is working but placing some errors in the log\r\n\r\n\r\n\t\ttry {\r\n\t\t\tWorkbookWorksheetRequestBuilder worksheetReq = workbookreq.worksheets(&quot;centralData&quot;);\r\n\t\t\tWorkbookWorksheet worksheet = worksheetReq.buildRequest().get();\r\n\t\t\tif (worksheet != null) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}catch (Exception ex){}\r\n\t\treturn false;\r\n\r\neven when i catch the exception i when this code run i get this message in the log\r\n\r\n    SEVERE: Throwable detail: com.microsoft.graph.http.GraphServiceException: Error code: ItemNotFound\r\n    Error message: The requested resource doesn&#39;t exist.\r\n    \r\n    GET https://graph.microsoft.com/v1.0/drives/&lt;driveId&gt;/items/&lt;itemId&gt;/workbook/worksheets/fundamental\r\n    SdkVersion : graph-java/v5.46.0\r\n    \r\n    \r\n    404 : Not Found\r\n    [...]\r\n\r\ni want to avoid this in my log because if its not there i know its going to fail but my exception catching is not working","title":"Detect If workbook has Worksheet, Avoiding error message in log","body":"<p>I have a piece of code in java using the microsoft graphapi, i need to detect if a workbook has a worksheet with the name &quot;centralData&quot;, but it is working but placing some errors in the log</p>\n<pre><code>    try {\n        WorkbookWorksheetRequestBuilder worksheetReq = workbookreq.worksheets(&quot;centralData&quot;);\n        WorkbookWorksheet worksheet = worksheetReq.buildRequest().get();\n        if (worksheet != null) {\n            return true;\n        }\n    }catch (Exception ex){}\n    return false;\n</code></pre>\n<p>even when i catch the exception i when this code run i get this message in the log</p>\n<pre><code>SEVERE: Throwable detail: com.microsoft.graph.http.GraphServiceException: Error code: ItemNotFound\nError message: The requested resource doesn't exist.\n\nGET https://graph.microsoft.com/v1.0/drives/&lt;driveId&gt;/items/&lt;itemId&gt;/workbook/worksheets/fundamental\nSdkVersion : graph-java/v5.46.0\n\n\n404 : Not Found\n[...]\n</code></pre>\n<p>i want to avoid this in my log because if its not there i know its going to fail but my exception catching is not working</p>\n"},{"tags":["java","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":1355771,"reputation":1302,"user_id":1294193,"display_name":"Rex Charles"},"score":0,"creation_date":1694005235,"post_id":77052112,"comment_id":135834119,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"comments":[{"owner":{"account_id":29102352,"reputation":1,"user_id":22293921,"display_name":"Abrar"},"score":0,"creation_date":1694058676,"post_id":77052329,"comment_id":135842071,"body_markdown":"You are right here but What if I want all users names based on the selected regions and both the regions and users have separate tables but are joined using the keys?","body":"You are right here but What if I want all users names based on the selected regions and both the regions and users have separate tables but are joined using the keys?"},{"owner":{"account_id":22650899,"reputation":355,"user_id":16825573,"display_name":"Lejdi Prifti"},"score":0,"creation_date":1694071597,"post_id":77052329,"comment_id":135843556,"body_markdown":"The faster way is to use as you said the `@Query` annotation, otherwise you will need to do some complex jpa syntax naming,","body":"The faster way is to use as you said the <code>@Query</code> annotation, otherwise you will need to do some complex jpa syntax naming,"}],"tags":[],"owner":{"account_id":22650899,"reputation":355,"user_id":16825573,"display_name":"Lejdi Prifti"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694006468,"creation_date":1694006468,"answer_id":77052329,"question_id":77052112,"body_markdown":"Imagine you have a repository that searches for a User with a certain username. \r\n\r\n    public interface UserRepository extends JpaRepository&lt;User, Long&gt; {\r\n         User findByName(String name);\r\n    }\r\n\r\nAs you can see above, the findByName gets translated to a `SELECT .... WHERE name = :name` query clause.","title":"Spring boot jpa method to Retrive all the departments for a repective locations or all the customers assigned to a user","body":"<p>Imagine you have a repository that searches for a User with a certain username.</p>\n<pre><code>public interface UserRepository extends JpaRepository&lt;User, Long&gt; {\n     User findByName(String name);\n}\n</code></pre>\n<p>As you can see above, the findByName gets translated to a <code>SELECT .... WHERE name = :name</code> query clause.</p>\n"}],"owner":{"account_id":29102352,"reputation":1,"user_id":22293921,"display_name":"Abrar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1694006468,"creation_date":1694004878,"question_id":77052112,"body_markdown":"I know how it can be done using Query but I&#39;m searching for methods in simples words I want to know how to create a method for Spring JPA for the Query which uses &quot;where&quot; condition...\r\n\r\nI searched for documentation but didn&#39;t found any &quot;where&quot; type method for Spring jpa.","title":"Spring boot jpa method to Retrive all the departments for a repective locations or all the customers assigned to a user","body":"<p>I know how it can be done using Query but I'm searching for methods in simples words I want to know how to create a method for Spring JPA for the Query which uses &quot;where&quot; condition...</p>\n<p>I searched for documentation but didn't found any &quot;where&quot; type method for Spring jpa.</p>\n"},{"tags":["java","hibernate-6.x","spring-boot-3"],"owner":{"account_id":18598762,"reputation":21,"user_id":13554088,"display_name":"Magomed"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":117,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694006405,"creation_date":1694006405,"question_id":77052315,"body_markdown":"folks!\r\nWe are trying to migrate from 5 version Hibernate to 6 version.\r\nWe use several dialects to work with different dbs and we use same entities for it.\r\nFor postgres we don&#39;t make any additional type contribution, but for MSSQL we use pair of CharJdbcType and UUIDJavaType as a new BasicType.\r\n\r\n``\r\n\r\n```\r\n    import java.util.UUID;\r\nimport org.hibernate.type.AbstractSingleColumnStandardBasicType;\r\nimport org.hibernate.type.descriptor.java.UUIDJavaType;\r\nimport org.hibernate.type.descriptor.jdbc.CharJdbcType;\r\n\r\npublic class MssqlUUIDType extends AbstractSingleColumnStandardBasicType&lt;UUID&gt; {\r\n    public static final MssqlUUIDType INSTANCE = new MssqlUUIDType();\r\n\r\n    public SQLServerUUIDType() {\r\n        super( CharJdbcType.INSTANCE, UUIDJavaType.INSTANCE );\r\n    }\r\n\r\n    @Override\r\n    protected boolean registerUnderJavaType() {\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public String getName() {\r\n        return &quot;uuid-binary&quot;;\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\n```\r\n    @Override\r\n    public void contributeTypes(TypeContributions typeContributions, ServiceRegistry serviceRegistry) {\r\n        super.contributeTypes(typeContributions, serviceRegistry);\r\n        typeContributions.contributeType(SQLServerUUIDType.INSTANCE);\r\n    }\r\n```\r\n\r\nI&#39;m trying to contribute a new BasicType to Hibernate 6, but TypeContributions.contributeType(BasicType&lt;T&gt; basicType) is deprecated and AbstractSingleColumnStandardBasicType is also deprecated. I found there a working method for UserType and JavaType contribution, but I don&#39;t know how to do it in the right way. \r\nMaybe hibernate 6 already has a support of such functionality from the box.\r\nIn docs I found such solution:\r\n\r\n```\r\npublic class MssqlUUIDType extends AbstractClassJavaType&lt;MssqlUUIDType&gt; {\r\n....\r\n}\r\n```\r\n\r\nbut then they use such code to make it work:\r\n\r\n```\r\n @JavaType(MssqlUUIDType.class)\r\n private UUID id;\r\n```\r\n\r\nBut I want usage of the new type without additional annotations. Is it possible?\r\nCould you help me to find solution for this?","title":"Contribute basic type Hibernate 6 deprecated alternatives","body":"<p>folks!\nWe are trying to migrate from 5 version Hibernate to 6 version.\nWe use several dialects to work with different dbs and we use same entities for it.\nFor postgres we don't make any additional type contribution, but for MSSQL we use pair of CharJdbcType and UUIDJavaType as a new BasicType.</p>\n<p>``</p>\n<pre><code>    import java.util.UUID;\nimport org.hibernate.type.AbstractSingleColumnStandardBasicType;\nimport org.hibernate.type.descriptor.java.UUIDJavaType;\nimport org.hibernate.type.descriptor.jdbc.CharJdbcType;\n\npublic class MssqlUUIDType extends AbstractSingleColumnStandardBasicType&lt;UUID&gt; {\n    public static final MssqlUUIDType INSTANCE = new MssqlUUIDType();\n\n    public SQLServerUUIDType() {\n        super( CharJdbcType.INSTANCE, UUIDJavaType.INSTANCE );\n    }\n\n    @Override\n    protected boolean registerUnderJavaType() {\n        return true;\n    }\n\n    @Override\n    public String getName() {\n        return &quot;uuid-binary&quot;;\n    }\n\n}\n</code></pre>\n<pre><code>    @Override\n    public void contributeTypes(TypeContributions typeContributions, ServiceRegistry serviceRegistry) {\n        super.contributeTypes(typeContributions, serviceRegistry);\n        typeContributions.contributeType(SQLServerUUIDType.INSTANCE);\n    }\n</code></pre>\n<p>I'm trying to contribute a new BasicType to Hibernate 6, but TypeContributions.contributeType(BasicType basicType) is deprecated and AbstractSingleColumnStandardBasicType is also deprecated. I found there a working method for UserType and JavaType contribution, but I don't know how to do it in the right way.\nMaybe hibernate 6 already has a support of such functionality from the box.\nIn docs I found such solution:</p>\n<pre><code>public class MssqlUUIDType extends AbstractClassJavaType&lt;MssqlUUIDType&gt; {\n....\n}\n</code></pre>\n<p>but then they use such code to make it work:</p>\n<pre><code> @JavaType(MssqlUUIDType.class)\n private UUID id;\n</code></pre>\n<p>But I want usage of the new type without additional annotations. Is it possible?\nCould you help me to find solution for this?</p>\n"},{"tags":["java","spring-boot","exception","jackson","spring-batch"],"answers":[{"tags":[],"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694006262,"creation_date":1694006262,"answer_id":77052297,"question_id":77045754,"body_markdown":"The error means you are adding a `java.io.File` attribute in the execution context, which is by default not safe to serialize/deserialize. Adding the path to the file in the execution context is probably a better option (ie serialize a pointer to the file as a string rather than the file itself as a `java.io.File`).\r\n\r\nYou need to add `java.io.File` to the list of trusted classes in the `Jackson2ExecutionContextStringSerializer`. You can do that by passing the fully qualified name of the class to the [constructor of the serializer](https://docs.spring.io/spring-batch/docs/current/api/org/springframework/batch/core/repository/dao/Jackson2ExecutionContextStringSerializer.html#%3Cinit%3E(java.lang.String...)) and register the customized serializer in the job repository and job explorer.","title":"How to solve &quot;The class with java.io.File and name of java.io.File is not trusted.&quot; Spring batch test error?","body":"<p>The error means you are adding a <code>java.io.File</code> attribute in the execution context, which is by default not safe to serialize/deserialize. Adding the path to the file in the execution context is probably a better option (ie serialize a pointer to the file as a string rather than the file itself as a <code>java.io.File</code>).</p>\n<p>You need to add <code>java.io.File</code> to the list of trusted classes in the <code>Jackson2ExecutionContextStringSerializer</code>. You can do that by passing the fully qualified name of the class to the <a href=\"https://docs.spring.io/spring-batch/docs/current/api/org/springframework/batch/core/repository/dao/Jackson2ExecutionContextStringSerializer.html#%3Cinit%3E(java.lang.String...)\" rel=\"nofollow noreferrer\">constructor of the serializer</a> and register the customized serializer in the job repository and job explorer.</p>\n"}],"owner":{"account_id":29313193,"reputation":11,"user_id":22458485,"display_name":"Jeet_dev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":127,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1694006262,"creation_date":1693927130,"question_id":77045754,"body_markdown":"I have a spring batch application and I am writing test cases for it. The application runs without any error. I could also unit tests the `Steps` in the application without any problem. However when I try to lauch the `Job` and test the `Job` end to end, I face a problem as given below -\r\n\r\n```\r\nCaused by: java.lang.IllegalArgumentException: The class with java.io.File and name of java.io.File is not trusted. If you believe this class is safe to deserialize, you can add it to the base set of trusted classes at construction time or provide an explicit mapping using Jackson annotations or a custom ObjectMapper. If the serialization is only done by a trusted source, you can also enable default typing.\r\n\tat org.springframework.batch.core.repository.dao.Jackson2ExecutionContextStringSerializer$TrustedTypeIdResolver.typeFromId(Jackson2ExecutionContextStringSerializer.java:353) ~[spring-batch-core-4.3.8.jar:4.3.8]\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.TypeDeserializerBase._findDeserializer(TypeDeserializerBase.java:159) ~[jackson-databind-2.13.5.jar:2.13.5]\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer._deserialize(AsArrayTypeDeserializer.java:97) ~[jackson-databind-2.13.5.jar:2.13.5]\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer.deserializeTypedFromArray(AsArrayTypeDeserializer.java:53) ~[jackson-databind-2.13.5.jar:2.13.5]\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer.deserializeTypedFromAny(AsPropertyTypeDeserializer.java:211) ~[jackson-databind-2.13.5.jar:2.13.5]\r\n\tat com.fasterxml.jackson.databind.deser.std.UntypedObjectDeserializer$Vanilla.deserializeWithType(UntypedObjectDeserializer.java:781) ~[jackson-databind-2.13.5.jar:2.13.5]\r\n\tat com.fasterxml.jackson.databind.deser.std.MapDeserializer._readAndBindStringKeyMap(MapDeserializer.java:611) ~[jackson-databind-2.13.5.jar:2.13.5]\r\n\tat com.fasterxml.jackson.databind.deser.std.MapDeserializer.deserialize(MapDeserializer.java:437) ~[jackson-databind-2.13.5.jar:2.13.5]\r\n\tat com.fasterxml.jackson.databind.deser.std.MapDeserializer.deserialize(MapDeserializer.java:32) ~[jackson-databind-2.13.5.jar:2.13.5]\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer._deserializeTypedForId(AsPropertyTypeDeserializer.java:144) ~[jackson-databind-2.13.5.jar:2.13.5]\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer.deserializeTypedFromObject(AsPropertyTypeDeserializer.java:110) ~[jackson-databind-2.13.5.jar:2.13.5]\r\n\tat com.fasterxml.jackson.databind.deser.std.MapDeserializer.deserializeWithType(MapDeserializer.java:482) ~[jackson-databind-2.13.5.jar:2.13.5]\r\n\tat com.fasterxml.jackson.databind.deser.impl.TypeWrappedDeserializer.deserialize(TypeWrappedDeserializer.java:74) ~[jackson-databind-2.13.5.jar:2.13.5]\r\n\tat com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:323) ~[jackson-databind-2.13.5.jar:2.13.5]\r\n\tat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4674) ~[jackson-databind-2.13.5.jar:2.13.5]\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3674) ~[jackson-databind-2.13.5.jar:2.13.5]\r\n\tat org.springframework.batch.core.repository.dao.Jackson2ExecutionContextStringSerializer.deserialize(Jackson2ExecutionContextStringSerializer.java:133) ~[spring-batch-core-4.3.8.jar:4.3.8]\r\n\tat org.springframework.batch.core.repository.dao.Jackson2ExecutionContextStringSerializer.deserialize(Jackson2ExecutionContextStringSerializer.java:104) ~[spring-batch-core-4.3.8.jar:4.3.8]\r\n\tat org.springframework.batch.core.repository.dao.JdbcExecutionContextDao$ExecutionContextRowMapper.mapRow(JdbcExecutionContextDao.java:324) ~[spring-batch-core-4.3.8.jar:4.3.8]\r\n\tat org.springframework.batch.core.repository.dao.JdbcExecutionContextDao$ExecutionContextRowMapper.mapRow(JdbcExecutionContextDao.java:312) ~[spring-batch-core-4.3.8.jar:4.3.8]\r\n\tat org.springframework.jdbc.core.RowMapperResultSetExtractor.extractData(RowMapperResultSetExtractor.java:94) ~[spring-jdbc-5.3.25.jar:5.3.25]\r\n\tat org.springframework.jdbc.core.RowMapperResultSetExtractor.extractData(RowMapperResultSetExtractor.java:61) ~[spring-jdbc-5.3.25.jar:5.3.25]\r\n\tat org.springframework.jdbc.core.JdbcTemplate$1.doInPreparedStatement(JdbcTemplate.java:723) ~[spring-jdbc-5.3.25.jar:5.3.25]\r\n\t... 86 more\r\njava.lang.AssertionError: expected:&lt;exitCode=FAILED;exitDescription=&gt; but was:&lt;exitCode=FAILED;exitDescription=org.springframework.batch.core.JobExecutionException: Flow execution ended unexpectedly\r\n\tat org.springframework.batch.core.job.flow.FlowJob.doExecute(FlowJob.java:145)\r\n\tat org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320)\r\n\tat org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149)\r\n\tat org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)\r\n\tat org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\nCaused by: org.springframework.batch.core.job.flow.FlowExecutionException: Ended flow=xxFlow at state=xxFlow.step3 with exception\r\n\tat org.springframework.batch.core.job.flow.support.SimpleFlow.resume(SimpleFlow.java:178)\r\n\tat org.springframework.batch.core.job.flow.support.SimpleFlow.start(SimpleFlow.java:144)\r\n\tat org.springframework.batch.core.job.flow.support.state.FlowState.handle(FlowState.java:56)\r\n\tat org.springframework.batch.core.job.flow.support.SimpleFlow.resume(SimpleFlow.java:169)\r\n\tat org.springframework.batch.core.job.flow.support.SimpleFlow.start(SimpleFlow.java:144)\r\n\tat org.springframework.batch.core.job.flow.FlowJob.doExecute(FlowJob.java:139)\r\n\t... 86 more\r\nCaused by: java.lang.IllegalArgumentException: Unable to deserialize the execution context\r\n\tat org.springframework.batch.core.repository.dao.JdbcExecutionContextDao$ExecutionContextRowMapper.mapRow(JdbcExecutionContextDao.java:327)\r\n\tat org.springframework.batch.core.repository.dao.JdbcExecutionContextDao$ExecutionContextRowMapper.mapRow(JdbcExecutionContextDao.java:312)\r\n\tat org.springframework.jdbc.core.RowMapperResultSetExtractor.extractData(RowMapperResultSetExtractor.java:94)\r\n\tat org.springframework.jdbc.core.RowMapperResultSetExtractor.extractData(RowMapperResultSetExtractor.java:61)\r\n\tat org.springframework.jdbc.core.JdbcTemplate$1.doInPreparedStatement(JdbcTemplate.java:723)\r\n\tat org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:651)\r\n\tat org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:713)\r\n\tat org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:744)\r\n\tat org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:757)\r\n\tat org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:815)\r\n\tat org.springframework.batch.core.repository.dao.JdbcExecutionContextDao.getExecutionContext(JdbcExecutionContextDao.java:114)\r\n\tat org.springframework.batch.core.repository.support.SimpleJobRepository.getLastStepExecution(SimpleJobRepository.java:240)\r\n\tat jdk.internal.reflect.GeneratedMethodAccessor31.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\t... 91 more\r\nCaused by: com.fasterxml.jackson.databind.JsonMappingException: The class with java.io.File and name of java.io.File is not trusted. If you believe this class is safe to deserialize, you can add it to the base set of trusted classes at construction time or provide an explicit mapping using Jackson annotations or a custom ObjectMapper. If the serialization is only done by a trusted source, you can also enable default typing. (through reference chain: java.util.HashMap[&quot;tempFile&quot;])\r\n\tat com.fasterxml.jackson.databind.JsonMappingException.wrapWithPath(JsonMappingException.java:392)\r\n\tat com.fasterxml.jackson.databind.JsonMappingException.wrapWithPath(JsonMappingException.java:351)\r\n\tat com.fasterxml.jackson.databind.deser.std.ContainerDeserializerBase.wrapAndThrow(ContainerDeserializerBase.java:190)\r\n\tat com.fasterxml.jackson.databind.deser.std.MapDeserializer._readAndBindStringKeyMap(MapDeserializer.java:621)\r\n\tat com.fasterxml.jackson.databind.deser.std.MapDeserializer.deserialize(MapDeserializer.java:437)\r\n\tat com.fasterxml.jackson.databind.deser.std.MapDeserializer.deserialize(MapDeserializer.java:32)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer._deserializeTypedForId(AsPropertyTypeDeserializer.java:144)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer.deserializeTypedFromObject(AsPropertyTypeDeserializer.java:110)\r\n\tat com.fasterxml.jackson.databind.deser.std.MapDeserializer.deserializeWithType(MapDeserializer.java:482)\r\n\tat com.fasterxml.jackson.databind.deser.impl.TypeWrappedDeserializer.deserialize(TypeWrappedDeserializer.java:74)\r\n\tat com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:323)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4674)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3674)\r\n\tat org.springframework.batch.core.repository.dao.Jackson2ExecutionContextStringSerializer.deserialize(Jackson2ExecutionContextStringSerializer.java:133)\r\n\tat org.springframework.batch.core.repository.dao.Jackson2ExecutionContextStringSerializer.deserialize(Jackson2ExecutionContextStringSerializer.java:104)\r\n\tat org.springframework.batch.core.repository.dao.JdbcExecutionContextDao$ExecutionContextRowMapper.mapRow(JdbcExecutionContextDao.java:324)\r\n\t... 128 more\r\nCaused by: java.lang.IllegalArgumentException: The class with java.io.File and name of java.io.File is not trusted. If you believe this class is safe to deserialize, you can add it to the base set of trusted classes at construction time or provide an explicit mapping using Jackson annotations or a custom ObjectMapper. If the serialization is only done by a trusted source, you can also enable default typing.\r\n\tat org.springframework.batch.core.repository.dao.Jackson2ExecutionContextStringSerializer$TrustedTypeIdResolver.typeFromId(Jackson2ExecutionContextStringSerializer.java:353)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.TypeDeserializerBase._findDeserializer(TypeDeserializerBase.java:159)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer._deserialize(AsArrayTypeDeserializer.java:97)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer.deserializeTypedFromArray(AsArrayTypeDeserializer.java:53)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer.deserializeTypedFromAny(AsPropertyTypeDeserializer.java:211)\r\n\tat com.fasterxml.jackson.databind.deser.std.UntypedObjectDeserializer$Vanilla.deserializeWithType(UntypedObjectDeserializer.java:781)\r\n\tat com.fasterxml.jackson.databind.deser.std.MapDeserializer._readAndBindStringKeyMap(MapDeserializer.java:611)\r\n\t... 140 more\r\n\tat org.junit.Assert.fail(Assert.java:89)\r\n\tat org.junit.Assert.failNotEquals(Assert.java:835)\r\n\tat org.junit.Assert.assertEquals(Assert.java:120)\r\n\tat org.junit.Assert.assertEquals(Assert.java:146)\r\n\tat JobTest.inlandFlowTest(JobTest.java:71)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:725)\r\n\tat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\r\n\r\n\r\n```\r\n\r\nThe test for testing the job looks as follow -\r\n\r\n```\r\n\r\nimport org.junit.Assert;\r\nimport org.junit.jupiter.api.Test;\r\nimport org.junit.jupiter.api.extension.ExtendWith;\r\nimport org.springframework.batch.core.ExitStatus;\r\nimport org.springframework.batch.core.JobExecution;\r\nimport org.springframework.batch.core.JobParameters;\r\nimport org.springframework.batch.test.JobLauncherTestUtils;\r\nimport org.springframework.batch.test.JobRepositoryTestUtils;\r\nimport org.springframework.batch.test.context.SpringBatchTest;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.beans.factory.annotation.Qualifier;\r\nimport org.springframework.boot.test.mock.mockito.MockBean;\r\nimport org.springframework.data.jpa.repository.config.EnableJpaRepositories;\r\nimport org.springframework.test.context.ActiveProfiles;\r\nimport org.springframework.test.context.TestPropertySource;\r\nimport org.springframework.test.context.junit.jupiter.SpringExtension;\r\nimport org.springframework.test.context.junit.jupiter.SpringJUnitConfig;\r\nimport org.springframework.batch.core.job.flow.Flow;\r\nimport javax.sql.DataSource;\r\n\r\n@ExtendWith(SpringExtension.class)\r\n@SpringBatchTest\r\n@SpringJUnitConfig({xxxConfiguration.class})\r\n@TestPropertySource( locations = &quot;/application-localtest.properties&quot;)\r\n@EnableJpaRepositories(&quot;xx.xx.xx.xxx.xx&quot;)\r\n@ActiveProfiles(&quot;localtest&quot;)\r\npublic class JobTest {\r\n\r\n\r\n    @MockBean\r\n    SpringEmailService emailService;\r\n\r\n    @Autowired\r\n    private JobLauncherTestUtils jobLauncherTestUtils;\r\n\r\n    @Autowired\r\n    DataSource datasource;\r\n\r\n    static {\r\n        System.setProperty(&quot;abcd&quot;, &quot;1&quot;);\r\n        System.setProperty(&quot;efgh&quot;, &quot;xx.x.xx&quot;);\r\n    }\r\n\r\n    @Test\r\n    public void FlowTest()throws Exception{\r\n\r\n        JobParameters jobParameters = this.jobLauncherTestUtils.getUniqueJobParameters();\r\n\r\n\r\n        JobExecution jobExecution = this.jobLauncherTestUtils.launchJob(jobParameters);\r\n        Assert.assertEquals(ExitStatus.FAILED, jobExecution.getExitStatus());\r\n\r\n\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n```\r\n\r\nI have tried a few of the solutions present in the stackoverflow but nothing worked out. I am confused how to resolve this error and how to proceed ahead.","title":"How to solve &quot;The class with java.io.File and name of java.io.File is not trusted.&quot; Spring batch test error?","body":"<p>I have a spring batch application and I am writing test cases for it. The application runs without any error. I could also unit tests the <code>Steps</code> in the application without any problem. However when I try to lauch the <code>Job</code> and test the <code>Job</code> end to end, I face a problem as given below -</p>\n<pre><code>Caused by: java.lang.IllegalArgumentException: The class with java.io.File and name of java.io.File is not trusted. If you believe this class is safe to deserialize, you can add it to the base set of trusted classes at construction time or provide an explicit mapping using Jackson annotations or a custom ObjectMapper. If the serialization is only done by a trusted source, you can also enable default typing.\n    at org.springframework.batch.core.repository.dao.Jackson2ExecutionContextStringSerializer$TrustedTypeIdResolver.typeFromId(Jackson2ExecutionContextStringSerializer.java:353) ~[spring-batch-core-4.3.8.jar:4.3.8]\n    at com.fasterxml.jackson.databind.jsontype.impl.TypeDeserializerBase._findDeserializer(TypeDeserializerBase.java:159) ~[jackson-databind-2.13.5.jar:2.13.5]\n    at com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer._deserialize(AsArrayTypeDeserializer.java:97) ~[jackson-databind-2.13.5.jar:2.13.5]\n    at com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer.deserializeTypedFromArray(AsArrayTypeDeserializer.java:53) ~[jackson-databind-2.13.5.jar:2.13.5]\n    at com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer.deserializeTypedFromAny(AsPropertyTypeDeserializer.java:211) ~[jackson-databind-2.13.5.jar:2.13.5]\n    at com.fasterxml.jackson.databind.deser.std.UntypedObjectDeserializer$Vanilla.deserializeWithType(UntypedObjectDeserializer.java:781) ~[jackson-databind-2.13.5.jar:2.13.5]\n    at com.fasterxml.jackson.databind.deser.std.MapDeserializer._readAndBindStringKeyMap(MapDeserializer.java:611) ~[jackson-databind-2.13.5.jar:2.13.5]\n    at com.fasterxml.jackson.databind.deser.std.MapDeserializer.deserialize(MapDeserializer.java:437) ~[jackson-databind-2.13.5.jar:2.13.5]\n    at com.fasterxml.jackson.databind.deser.std.MapDeserializer.deserialize(MapDeserializer.java:32) ~[jackson-databind-2.13.5.jar:2.13.5]\n    at com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer._deserializeTypedForId(AsPropertyTypeDeserializer.java:144) ~[jackson-databind-2.13.5.jar:2.13.5]\n    at com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer.deserializeTypedFromObject(AsPropertyTypeDeserializer.java:110) ~[jackson-databind-2.13.5.jar:2.13.5]\n    at com.fasterxml.jackson.databind.deser.std.MapDeserializer.deserializeWithType(MapDeserializer.java:482) ~[jackson-databind-2.13.5.jar:2.13.5]\n    at com.fasterxml.jackson.databind.deser.impl.TypeWrappedDeserializer.deserialize(TypeWrappedDeserializer.java:74) ~[jackson-databind-2.13.5.jar:2.13.5]\n    at com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:323) ~[jackson-databind-2.13.5.jar:2.13.5]\n    at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4674) ~[jackson-databind-2.13.5.jar:2.13.5]\n    at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3674) ~[jackson-databind-2.13.5.jar:2.13.5]\n    at org.springframework.batch.core.repository.dao.Jackson2ExecutionContextStringSerializer.deserialize(Jackson2ExecutionContextStringSerializer.java:133) ~[spring-batch-core-4.3.8.jar:4.3.8]\n    at org.springframework.batch.core.repository.dao.Jackson2ExecutionContextStringSerializer.deserialize(Jackson2ExecutionContextStringSerializer.java:104) ~[spring-batch-core-4.3.8.jar:4.3.8]\n    at org.springframework.batch.core.repository.dao.JdbcExecutionContextDao$ExecutionContextRowMapper.mapRow(JdbcExecutionContextDao.java:324) ~[spring-batch-core-4.3.8.jar:4.3.8]\n    at org.springframework.batch.core.repository.dao.JdbcExecutionContextDao$ExecutionContextRowMapper.mapRow(JdbcExecutionContextDao.java:312) ~[spring-batch-core-4.3.8.jar:4.3.8]\n    at org.springframework.jdbc.core.RowMapperResultSetExtractor.extractData(RowMapperResultSetExtractor.java:94) ~[spring-jdbc-5.3.25.jar:5.3.25]\n    at org.springframework.jdbc.core.RowMapperResultSetExtractor.extractData(RowMapperResultSetExtractor.java:61) ~[spring-jdbc-5.3.25.jar:5.3.25]\n    at org.springframework.jdbc.core.JdbcTemplate$1.doInPreparedStatement(JdbcTemplate.java:723) ~[spring-jdbc-5.3.25.jar:5.3.25]\n    ... 86 more\njava.lang.AssertionError: expected:&lt;exitCode=FAILED;exitDescription=&gt; but was:&lt;exitCode=FAILED;exitDescription=org.springframework.batch.core.JobExecutionException: Flow execution ended unexpectedly\n    at org.springframework.batch.core.job.flow.FlowJob.doExecute(FlowJob.java:145)\n    at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:320)\n    at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149)\n    at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)\n    at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\nCaused by: org.springframework.batch.core.job.flow.FlowExecutionException: Ended flow=xxFlow at state=xxFlow.step3 with exception\n    at org.springframework.batch.core.job.flow.support.SimpleFlow.resume(SimpleFlow.java:178)\n    at org.springframework.batch.core.job.flow.support.SimpleFlow.start(SimpleFlow.java:144)\n    at org.springframework.batch.core.job.flow.support.state.FlowState.handle(FlowState.java:56)\n    at org.springframework.batch.core.job.flow.support.SimpleFlow.resume(SimpleFlow.java:169)\n    at org.springframework.batch.core.job.flow.support.SimpleFlow.start(SimpleFlow.java:144)\n    at org.springframework.batch.core.job.flow.FlowJob.doExecute(FlowJob.java:139)\n    ... 86 more\nCaused by: java.lang.IllegalArgumentException: Unable to deserialize the execution context\n    at org.springframework.batch.core.repository.dao.JdbcExecutionContextDao$ExecutionContextRowMapper.mapRow(JdbcExecutionContextDao.java:327)\n    at org.springframework.batch.core.repository.dao.JdbcExecutionContextDao$ExecutionContextRowMapper.mapRow(JdbcExecutionContextDao.java:312)\n    at org.springframework.jdbc.core.RowMapperResultSetExtractor.extractData(RowMapperResultSetExtractor.java:94)\n    at org.springframework.jdbc.core.RowMapperResultSetExtractor.extractData(RowMapperResultSetExtractor.java:61)\n    at org.springframework.jdbc.core.JdbcTemplate$1.doInPreparedStatement(JdbcTemplate.java:723)\n    at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:651)\n    at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:713)\n    at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:744)\n    at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:757)\n    at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:815)\n    at org.springframework.batch.core.repository.dao.JdbcExecutionContextDao.getExecutionContext(JdbcExecutionContextDao.java:114)\n    at org.springframework.batch.core.repository.support.SimpleJobRepository.getLastStepExecution(SimpleJobRepository.java:240)\n    at jdk.internal.reflect.GeneratedMethodAccessor31.invoke(Unknown Source)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    ... 91 more\nCaused by: com.fasterxml.jackson.databind.JsonMappingException: The class with java.io.File and name of java.io.File is not trusted. If you believe this class is safe to deserialize, you can add it to the base set of trusted classes at construction time or provide an explicit mapping using Jackson annotations or a custom ObjectMapper. If the serialization is only done by a trusted source, you can also enable default typing. (through reference chain: java.util.HashMap[&quot;tempFile&quot;])\n    at com.fasterxml.jackson.databind.JsonMappingException.wrapWithPath(JsonMappingException.java:392)\n    at com.fasterxml.jackson.databind.JsonMappingException.wrapWithPath(JsonMappingException.java:351)\n    at com.fasterxml.jackson.databind.deser.std.ContainerDeserializerBase.wrapAndThrow(ContainerDeserializerBase.java:190)\n    at com.fasterxml.jackson.databind.deser.std.MapDeserializer._readAndBindStringKeyMap(MapDeserializer.java:621)\n    at com.fasterxml.jackson.databind.deser.std.MapDeserializer.deserialize(MapDeserializer.java:437)\n    at com.fasterxml.jackson.databind.deser.std.MapDeserializer.deserialize(MapDeserializer.java:32)\n    at com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer._deserializeTypedForId(AsPropertyTypeDeserializer.java:144)\n    at com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer.deserializeTypedFromObject(AsPropertyTypeDeserializer.java:110)\n    at com.fasterxml.jackson.databind.deser.std.MapDeserializer.deserializeWithType(MapDeserializer.java:482)\n    at com.fasterxml.jackson.databind.deser.impl.TypeWrappedDeserializer.deserialize(TypeWrappedDeserializer.java:74)\n    at com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:323)\n    at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4674)\n    at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3674)\n    at org.springframework.batch.core.repository.dao.Jackson2ExecutionContextStringSerializer.deserialize(Jackson2ExecutionContextStringSerializer.java:133)\n    at org.springframework.batch.core.repository.dao.Jackson2ExecutionContextStringSerializer.deserialize(Jackson2ExecutionContextStringSerializer.java:104)\n    at org.springframework.batch.core.repository.dao.JdbcExecutionContextDao$ExecutionContextRowMapper.mapRow(JdbcExecutionContextDao.java:324)\n    ... 128 more\nCaused by: java.lang.IllegalArgumentException: The class with java.io.File and name of java.io.File is not trusted. If you believe this class is safe to deserialize, you can add it to the base set of trusted classes at construction time or provide an explicit mapping using Jackson annotations or a custom ObjectMapper. If the serialization is only done by a trusted source, you can also enable default typing.\n    at org.springframework.batch.core.repository.dao.Jackson2ExecutionContextStringSerializer$TrustedTypeIdResolver.typeFromId(Jackson2ExecutionContextStringSerializer.java:353)\n    at com.fasterxml.jackson.databind.jsontype.impl.TypeDeserializerBase._findDeserializer(TypeDeserializerBase.java:159)\n    at com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer._deserialize(AsArrayTypeDeserializer.java:97)\n    at com.fasterxml.jackson.databind.jsontype.impl.AsArrayTypeDeserializer.deserializeTypedFromArray(AsArrayTypeDeserializer.java:53)\n    at com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer.deserializeTypedFromAny(AsPropertyTypeDeserializer.java:211)\n    at com.fasterxml.jackson.databind.deser.std.UntypedObjectDeserializer$Vanilla.deserializeWithType(UntypedObjectDeserializer.java:781)\n    at com.fasterxml.jackson.databind.deser.std.MapDeserializer._readAndBindStringKeyMap(MapDeserializer.java:611)\n    ... 140 more\n    at org.junit.Assert.fail(Assert.java:89)\n    at org.junit.Assert.failNotEquals(Assert.java:835)\n    at org.junit.Assert.assertEquals(Assert.java:120)\n    at org.junit.Assert.assertEquals(Assert.java:146)\n    at JobTest.inlandFlowTest(JobTest.java:71)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:725)\n    at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\n\n\n</code></pre>\n<p>The test for testing the job looks as follow -</p>\n<pre><code>\nimport org.junit.Assert;\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport org.springframework.batch.core.ExitStatus;\nimport org.springframework.batch.core.JobExecution;\nimport org.springframework.batch.core.JobParameters;\nimport org.springframework.batch.test.JobLauncherTestUtils;\nimport org.springframework.batch.test.JobRepositoryTestUtils;\nimport org.springframework.batch.test.context.SpringBatchTest;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.beans.factory.annotation.Qualifier;\nimport org.springframework.boot.test.mock.mockito.MockBean;\nimport org.springframework.data.jpa.repository.config.EnableJpaRepositories;\nimport org.springframework.test.context.ActiveProfiles;\nimport org.springframework.test.context.TestPropertySource;\nimport org.springframework.test.context.junit.jupiter.SpringExtension;\nimport org.springframework.test.context.junit.jupiter.SpringJUnitConfig;\nimport org.springframework.batch.core.job.flow.Flow;\nimport javax.sql.DataSource;\n\n@ExtendWith(SpringExtension.class)\n@SpringBatchTest\n@SpringJUnitConfig({xxxConfiguration.class})\n@TestPropertySource( locations = &quot;/application-localtest.properties&quot;)\n@EnableJpaRepositories(&quot;xx.xx.xx.xxx.xx&quot;)\n@ActiveProfiles(&quot;localtest&quot;)\npublic class JobTest {\n\n\n    @MockBean\n    SpringEmailService emailService;\n\n    @Autowired\n    private JobLauncherTestUtils jobLauncherTestUtils;\n\n    @Autowired\n    DataSource datasource;\n\n    static {\n        System.setProperty(&quot;abcd&quot;, &quot;1&quot;);\n        System.setProperty(&quot;efgh&quot;, &quot;xx.x.xx&quot;);\n    }\n\n    @Test\n    public void FlowTest()throws Exception{\n\n        JobParameters jobParameters = this.jobLauncherTestUtils.getUniqueJobParameters();\n\n\n        JobExecution jobExecution = this.jobLauncherTestUtils.launchJob(jobParameters);\n        Assert.assertEquals(ExitStatus.FAILED, jobExecution.getExitStatus());\n\n\n    }\n}\n\n\n\n\n</code></pre>\n<p>I have tried a few of the solutions present in the stackoverflow but nothing worked out. I am confused how to resolve this error and how to proceed ahead.</p>\n"},{"tags":["java","ssl","apache-kafka","ssl-certificate","pem"],"answers":[{"tags":[],"owner":{"account_id":1531501,"reputation":487,"user_id":1428596,"accept_rate":100,"display_name":"DoNuT"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1694006215,"creation_date":1693922974,"answer_id":77045256,"question_id":77045144,"body_markdown":"I&#39;ve found that OpenJDK and lack of support for PBES2-formatted keys in an internal library is the issue.\r\n\r\nSee also: https://stackoverflow.com/questions/65870378/kafka-wont-start-with-pem-certificate\r\n\r\nSo, there are two options as of today\r\n\r\n**1.) Convert the key** \r\n\r\nSomething like \r\n\r\n    openssl pkcs8 -in old_kafka.key -passout &quot;pass:password&quot; -topk8 -v1 PBE-SHA1-3DES -out kafka.key\r\n\r\nshould do the trick. My scenario actually included loading a remote keystore, extracting the key and passing it in-memory, so this possibly includes lots of specific command-line action with *openssl* and *keytool* such as converting/reimporting the key or initially creating a proper key. \r\n\r\nIf you have third-party users providing certificates in your Kafka-based stack, you will have to be transparent about this limitation (or convert every incompatible key provided), also be aware of concerns raised in the JDK issue:\r\n\r\n&gt; If encrypted with legacy PBKDF1+SHA1+3DES the encoding works, but these algorithms are deprecated and insecure.\r\n\r\n**2.) Use the ssl.keystore/truststore.location options and a temporary keystore file**\r\n\r\nWhen using keystores to initialize Kafka, this goes through a different code path in Java libraries and we don&#39;t hit *javax.crypto.EncryptedPrivateKeyInfo* failing to parse a PBES2-encoded key.\r\n\r\nMy scenario allowed to dump the key into the production containers */tmp* filesystem, initialize Kafka and then delete the keystore file to avoid file system growth (or certificates exposed).\r\n\r\n*KafkaProducer* internally does a *KeyStore.load* and the stores are held in-memory, so you can delete it after your producer was created.\r\n\r\n----------\r\n\r\nGoing forward [JDK-8231581][1], might get fixed but when I checked last ([jdk-22+13][2]), it was still the same old code from 2007 (or even before).\r\n\r\n  [1]: https://bugs.openjdk.org/browse/JDK-8231581\r\n  [2]: https://github.com/openjdk/jdk/blame/jdk-22%2B13/src/java.base/share/classes/com/sun/crypto/provider/EncryptedPrivateKeyInfo.java#L68","title":"Apache Kafka client/producer: Invalid PEM keystore configs","body":"<p>I've found that OpenJDK and lack of support for PBES2-formatted keys in an internal library is the issue.</p>\n<p>See also: <a href=\"https://stackoverflow.com/questions/65870378/kafka-wont-start-with-pem-certificate\">Kafka won&#39;t start with PEM certificate</a></p>\n<p>So, there are two options as of today</p>\n<p><strong>1.) Convert the key</strong></p>\n<p>Something like</p>\n<pre><code>openssl pkcs8 -in old_kafka.key -passout &quot;pass:password&quot; -topk8 -v1 PBE-SHA1-3DES -out kafka.key\n</code></pre>\n<p>should do the trick. My scenario actually included loading a remote keystore, extracting the key and passing it in-memory, so this possibly includes lots of specific command-line action with <em>openssl</em> and <em>keytool</em> such as converting/reimporting the key or initially creating a proper key.</p>\n<p>If you have third-party users providing certificates in your Kafka-based stack, you will have to be transparent about this limitation (or convert every incompatible key provided), also be aware of concerns raised in the JDK issue:</p>\n<blockquote>\n<p>If encrypted with legacy PBKDF1+SHA1+3DES the encoding works, but these algorithms are deprecated and insecure.</p>\n</blockquote>\n<p><strong>2.) Use the ssl.keystore/truststore.location options and a temporary keystore file</strong></p>\n<p>When using keystores to initialize Kafka, this goes through a different code path in Java libraries and we don't hit <em>javax.crypto.EncryptedPrivateKeyInfo</em> failing to parse a PBES2-encoded key.</p>\n<p>My scenario allowed to dump the key into the production containers <em>/tmp</em> filesystem, initialize Kafka and then delete the keystore file to avoid file system growth (or certificates exposed).</p>\n<p><em>KafkaProducer</em> internally does a <em>KeyStore.load</em> and the stores are held in-memory, so you can delete it after your producer was created.</p>\n<hr />\n<p>Going forward <a href=\"https://bugs.openjdk.org/browse/JDK-8231581\" rel=\"nofollow noreferrer\">JDK-8231581</a>, might get fixed but when I checked last (<a href=\"https://github.com/openjdk/jdk/blame/jdk-22%2B13/src/java.base/share/classes/com/sun/crypto/provider/EncryptedPrivateKeyInfo.java#L68\" rel=\"nofollow noreferrer\">jdk-22+13</a>), it was still the same old code from 2007 (or even before).</p>\n"}],"owner":{"account_id":1531501,"reputation":487,"user_id":1428596,"accept_rate":100,"display_name":"DoNuT"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":139,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77045256,"answer_count":1,"score":0,"last_activity_date":1694006215,"creation_date":1693922188,"question_id":77045144,"body_markdown":"I&#39;m trying to implement a Kafka Producer including SSL configuration. Since we run the service in containers and shipping keystores in the local file system is not possible (using the *ssl.keystore.location* and *ssl.truststore.location* options), I have to pass keys and certificates in PEM format using the corresponding/alternate options -  as available since version 2.7.0 (I&#39;m running Kafka 3.5.0 and kafka-clients:3.5.0 on JDK8)\r\n\r\nHere&#39;s my full client configuration (keys are for testing only)\r\n\r\n```\r\nsecurity.protocol=SSL\r\nssl.enabled.protocols=TLSv1.3\r\n\r\nssl.keystore.type=PEM\r\nssl.key.password=test1234\r\nssl.keystore.key=-----BEGIN RSA PRIVATE KEY----- \\\r\nMIIEpQIBAAKCAQEAq2UXYa2I/ebR89f9Y7IA7u9PIKOAz2jyK4Y+Zm3lNzIj+7Sf \\\r\n1zVFt8KwIG+KSOpvS7i3FoUZhqSr6KnkOZnd5QBuNkAo+20J1FTGSMlHHxxvYSb/ \\\r\n03M1Ehwu5FO87jGX4KhZdiFO4glaC+ww7X3Rk9NFcONI+/r7YRS6lmux/yZ45bJb \\\r\nNYg7dIkVdl2evZOM3qu+uLbeAU/R7gu2G94XpKPe7OqdIwN5oNch41eoj1Mucm4j \\\r\nBT0b4BrJXsB82pHsKtDfpRWw+HjSvysgGhietcj8AfiO9U3SU7frRaFnQg6qrYzd \\\r\n6QxQlvBa2T62hoJvfjctXoHTuywpbAQTEzpLlwIDAQABAoIBACMJ+au4ZGczxvxI \\\r\nzb6R52rxdYXAp1a/p7KKMTuTf+a203BjzsGaXHRi0sruwqCBfNtIGfX6o+tIwvQ/ \\\r\nty6nbBui6OUiXL553iaQZjD/JRERKRv9cxNxXAolxNhc3iT78oa1JATobk37h3Mk \\\r\niCQlMrE74dhgPs100+tW54ZU4gC9L9OY8M7tQuXFOOK7cydTMmuiC1SMQEHR9WUD \\\r\nCJQMyn8zcPxHPGcfyc5Sr7W54FQ2quvWNmxTDGAp80bYl/wuAEbuig3QRyLv055G \\\r\nGRMZN0nAM6J3LWbFx/NtWEErN6RoFvc4C0h+H3V+DYiQ2SQNrmBKb3N9gQqs5mXM \\\r\n3c/DnYECgYEA+MY3WRDeD1DjHK/q2/NLHLGmSqoQ2hN7ea0j+8VLvu7X4r1TrQJ4 \\\r\nqv5j9v4vRnXRW5dCo7tyWmwbY9g93foPGmtYFD6UzaZRu0jO6oyWL2rsEm015NuT \\\r\n9Faf5oDMkAlWrVusUTHsnMlwTKCDWRqqa6Jum1wfqsRm0hGGqs7ZiGECgYEAsF+D \\\r\ne/ldvxfWdCIK24AQOrKcYgIy0iwTuDrvfkhA0v9I578U15/odBoXLyrUuvJuxWUa \\\r\naQl8oaxvOS5jw/f5nraquOXUECllwMoh1GNkMxX7zTaLtt16JkSHzXZjBZ8QDFAt \\\r\nKRRXOqtsDLgrpSvRjHAxltNmPSNKxCzp8cBbdvcCgYEA8cdDV46rItuMPv9CFM6Z \\\r\nu6N0aLBsfGXe5Vy+0hzoBwL+UmGLB2SVfiqLYSudKq+q74dMvvCYrQTQgfNR/YDg \\\r\nWN7m1ZYU7OGuIYUbhJ1qAV+7XBVEAc7eNuRRt6aKKZrJ4OZtzOPmgGLOf8qonVrr \\\r\nMnzFXrzkEgWboKJj7XHnvUECgYEAmZ3HTp6GOV9QyPuxizcCa62PqYmSrB352vdy \\\r\nCwJxe5Uf8cErLRc5Bo6G7O0YNe/b7Q+/Lgc2RzaB9ULjYBdGkic1kS+UQbNczcsA \\\r\nJhWfeyNFmppMnCxRLK15vsnDO20sNB1NCD+QLiiKRpXOZeFBdVlux5g+rzdi8nTQ \\\r\nGmDZCUcCgYEA2X6cJ4uCngOv7tQdILZpzYeZAb2crNa9vlngcfLbi8+7zTyS4Lop \\\r\n8Nmn979OrmCtHKgrMOcfFiObIBgnFPSufr+svp/y9Jd5TXE6dVmNLX13rki3HHgS \\\r\nuvxYM9UV5XdtSSb4BPYgBYmuXP8QjiK+V7TqU6Cc0ZK/Ma8DoBi3IEY= \\\r\n-----END RSA PRIVATE KEY-----\r\nssl.keystore.certificate.chain=-----BEGIN CERTIFICATE----- \\\r\nMIIDODCCAiACFBB23JdRC3qHpoGeo+qFdT2pGgOYMA0GCSqGSIb3DQEBCwUAMEUx \\\r\nCzAJBgNVBAYTAmF0MRMwEQYDVQQIDApTb21lLVN0YXRlMSEwHwYDVQQKDBhJbnRl \\\r\ncm5ldCBXaWRnaXRzIFB0eSBMdGQwHhcNMjMwODE3MDgyMDQzWhcNMjQwODE2MDgy \\\r\nMDQzWjBsMRAwDgYDVQQGEwdVbmtub3duMRAwDgYDVQQIEwdVbmtub3duMRAwDgYD \\\r\nVQQHEwdVbmtub3duMRAwDgYDVQQKEwdVbmtub3duMRAwDgYDVQQLEwdVbmtub3du \\\r\nMRAwDgYDVQQDEwdVbmtub3duMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKC \\\r\nAQEAq2UXYa2I/ebR89f9Y7IA7u9PIKOAz2jyK4Y+Zm3lNzIj+7Sf1zVFt8KwIG+K \\\r\nSOpvS7i3FoUZhqSr6KnkOZnd5QBuNkAo+20J1FTGSMlHHxxvYSb/03M1Ehwu5FO8 \\\r\n7jGX4KhZdiFO4glaC+ww7X3Rk9NFcONI+/r7YRS6lmux/yZ45bJbNYg7dIkVdl2e \\\r\nvZOM3qu+uLbeAU/R7gu2G94XpKPe7OqdIwN5oNch41eoj1Mucm4jBT0b4BrJXsB8 \\\r\n2pHsKtDfpRWw+HjSvysgGhietcj8AfiO9U3SU7frRaFnQg6qrYzd6QxQlvBa2T62 \\\r\nhoJvfjctXoHTuywpbAQTEzpLlwIDAQABMA0GCSqGSIb3DQEBCwUAA4IBAQBciKIN \\\r\nKCPTnSTPJEMHHunhC12WvbfF//BGqh3gn1eviGHRB1pnylQLPQXBIOJlTtgdlt0h \\\r\n0xSYgvWouD4UwctWTZoVRV/yHhMuZ99LXl8OKKCpZKGXfYTB2QjSkdWN+BIBhPz5 \\\r\nL7PIsNQJVmY/FpV8Es93lsjS2nH8fqaCOpVLsc604GDVD4cbUJEbCmB6faZ1Fy7x \\\r\nGX7yBkqTSEwE9TAJAgsPIWZZNsGD44ZGj0VAy/kRCEHigcToOvxPN+3nVWE3qacu \\\r\nQFyxNNX6waCc7rwxiIYarbxiGWxZo9pMEQC5ilxOzu1dShxbZNha8pyk3ClcGpCo \\\r\nnaBeqW3X6uSM7CMr \\\r\n-----END CERTIFICATE----- \\\r\n-----BEGIN CERTIFICATE----- \\\r\nMIIDazCCAlOgAwIBAgIUEGrJ27wUi2LZ+2dE2DVJyDsPkwowDQYJKoZIhvcNAQEL \\\r\nBQAwRTELMAkGA1UEBhMCYXQxEzARBgNVBAgMClNvbWUtU3RhdGUxITAfBgNVBAoM \\\r\nGEludGVybmV0IFdpZGdpdHMgUHR5IEx0ZDAeFw0yMzA4MTcwODE0MDRaFw0yNDA4 \\\r\nMTYwODE0MDRaMEUxCzAJBgNVBAYTAmF0MRMwEQYDVQQIDApTb21lLVN0YXRlMSEw \\\r\nHwYDVQQKDBhJbnRlcm5ldCBXaWRnaXRzIFB0eSBMdGQwggEiMA0GCSqGSIb3DQEB \\\r\nAQUAA4IBDwAwggEKAoIBAQDbCz4asRwDChWKL6VMX6STMugfn2X+QISSrad21VFH \\\r\nG9GHgRY36CpD/dd1AmoJKHChe5idR+Wq/522rg0AWDcSRF0ueI092JIYhEicnLIa \\\r\ncu5CehQwrFp+eaWh+ycgun9o1BXoUZVwBz/8I+02PqsgdpPfWdzIEvMd3xGYyI0w \\\r\ndarsrWrvOxfzmtZcNtj5OWyRX6Gx0ql3eq5i423BHAkKKzMwLw8TLtoIC+7i0fkR \\\r\n7BckDexgdEMAPBgLxMwc9/ZI5LPad4BwizNiFxIkA38vwVHpgeNLD58aZNh0wlOB \\\r\nc/Vk/Lq8zK3YHHLcXASudUvjR8cDMRNYwcHmrWjl5S1PAgMBAAGjUzBRMB0GA1Ud \\\r\nDgQWBBQtJjgJdIYZyJqTACDjVBoD5hPtoTAfBgNVHSMEGDAWgBQtJjgJdIYZyJqT \\\r\nACDjVBoD5hPtoTAPBgNVHRMBAf8EBTADAQH/MA0GCSqGSIb3DQEBCwUAA4IBAQAQ \\\r\n/CS0lo8QiK/6oCyo6rcsh3XjTvbBXTW/h25RNXkQbEDmMErCI9UVHNFA+JtxfTW4 \\\r\nYDyp7ccfXdqEVzYGMlqfVeWxVSw3PvC+PCuJeAc2l8PtW9gMfmoM/N6Lg6ckw4Dy \\\r\nvEhLy34s0x+mtPQM9owxiPlKMYIzUnGhbdGF4cb+IYDONgrsBIQVa7UHrw8r43DE \\\r\n41pVFUqVvgrbHs3Oao8lEPJLyolPLuHdgVafp2urXRCqkWEwM9pTiffWDR2USX5B \\\r\nmL3mVNTnVXSpOErpjkQvp73zOjSG/h4CEgGdrLc8kjv1jkSyi3R8c3MRDhKlZnWK \\\r\nomAr3CbvLmjrFWnzDN7d \\\r\n-----END CERTIFICATE-----\r\n\r\nssl.truststore.type=PEM\r\nssl.truststore.certificates=-----BEGIN CERTIFICATE----- \\\r\nMIIDazCCAlOgAwIBAgIUEGrJ27wUi2LZ+2dE2DVJyDsPkwowDQYJKoZIhvcNAQEL \\\r\nBQAwRTELMAkGA1UEBhMCYXQxEzARBgNVBAgMClNvbWUtU3RhdGUxITAfBgNVBAoM \\\r\nGEludGVybmV0IFdpZGdpdHMgUHR5IEx0ZDAeFw0yMzA4MTcwODE0MDRaFw0yNDA4 \\\r\nMTYwODE0MDRaMEUxCzAJBgNVBAYTAmF0MRMwEQYDVQQIDApTb21lLVN0YXRlMSEw \\\r\nHwYDVQQKDBhJbnRlcm5ldCBXaWRnaXRzIFB0eSBMdGQwggEiMA0GCSqGSIb3DQEB \\\r\nAQUAA4IBDwAwggEKAoIBAQDbCz4asRwDChWKL6VMX6STMugfn2X+QISSrad21VFH \\\r\nG9GHgRY36CpD/dd1AmoJKHChe5idR+Wq/522rg0AWDcSRF0ueI092JIYhEicnLIa \\\r\ncu5CehQwrFp+eaWh+ycgun9o1BXoUZVwBz/8I+02PqsgdpPfWdzIEvMd3xGYyI0w \\\r\ndarsrWrvOxfzmtZcNtj5OWyRX6Gx0ql3eq5i423BHAkKKzMwLw8TLtoIC+7i0fkR \\\r\n7BckDexgdEMAPBgLxMwc9/ZI5LPad4BwizNiFxIkA38vwVHpgeNLD58aZNh0wlOB \\\r\nc/Vk/Lq8zK3YHHLcXASudUvjR8cDMRNYwcHmrWjl5S1PAgMBAAGjUzBRMB0GA1Ud \\\r\nDgQWBBQtJjgJdIYZyJqTACDjVBoD5hPtoTAfBgNVHSMEGDAWgBQtJjgJdIYZyJqT \\\r\nACDjVBoD5hPtoTAPBgNVHRMBAf8EBTADAQH/MA0GCSqGSIb3DQEBCwUAA4IBAQAQ \\\r\n/CS0lo8QiK/6oCyo6rcsh3XjTvbBXTW/h25RNXkQbEDmMErCI9UVHNFA+JtxfTW4 \\\r\nYDyp7ccfXdqEVzYGMlqfVeWxVSw3PvC+PCuJeAc2l8PtW9gMfmoM/N6Lg6ckw4Dy \\\r\nvEhLy34s0x+mtPQM9owxiPlKMYIzUnGhbdGF4cb+IYDONgrsBIQVa7UHrw8r43DE \\\r\n41pVFUqVvgrbHs3Oao8lEPJLyolPLuHdgVafp2urXRCqkWEwM9pTiffWDR2USX5B \\\r\nmL3mVNTnVXSpOErpjkQvp73zOjSG/h4CEgGdrLc8kjv1jkSyi3R8c3MRDhKlZnWK \\\r\nomAr3CbvLmjrFWnzDN7d \\\r\n-----END CERTIFICATE-----\r\n```\r\n\r\nHowever, when I&#39;m trying to run the producer, I&#39;m always getting the following error, indicating that something is wrong with the private key provided but I&#39;m not sure what...\r\n\r\n(The trust chain works when I skip client authentication).\r\n\r\n```\r\norg.apache.kafka.common.KafkaException: Failed to construct kafka consumer\r\n        at org.apache.kafka.clients.consumer.KafkaConsumer.&lt;init&gt;(KafkaConsumer.java:837)\r\n        at org.apache.kafka.clients.consumer.KafkaConsumer.&lt;init&gt;(KafkaConsumer.java:671)\r\n        at org.apache.kafka.clients.consumer.KafkaConsumer.&lt;init&gt;(KafkaConsumer.java:652)\r\n        at kafka.tools.ConsoleConsumer$.run(ConsoleConsumer.scala:67)\r\n        at kafka.tools.ConsoleConsumer$.main(ConsoleConsumer.scala:54)\r\n        at kafka.tools.ConsoleConsumer.main(ConsoleConsumer.scala)\r\nCaused by: org.apache.kafka.common.errors.InvalidConfigurationException: Invalid PEM keystore configs\r\nCaused by: java.io.IOException: overrun, bytes = 925\r\n        at java.base/javax.crypto.EncryptedPrivateKeyInfo.&lt;init&gt;(EncryptedPrivateKeyInfo.java:98)\r\n        at org.apache.kafka.common.security.ssl.DefaultSslEngineFactory$PemStore.privateKey(DefaultSslEngineFactory.java:510)\r\n        at org.apache.kafka.common.security.ssl.DefaultSslEngineFactory$PemStore.createKeyStoreFromPem(DefaultSslEngineFactory.java:460)\r\n        at org.apache.kafka.common.security.ssl.DefaultSslEngineFactory$PemStore.&lt;init&gt;(DefaultSslEngineFactory.java:433)\r\n        at org.apache.kafka.common.security.ssl.DefaultSslEngineFactory.createKeystore(DefaultSslEngineFactory.java:284)\r\n        at org.apache.kafka.common.security.ssl.DefaultSslEngineFactory.configure(DefaultSslEngineFactory.java:161)\r\n        at org.apache.kafka.common.security.ssl.SslFactory.instantiateSslEngineFactory(SslFactory.java:140)\r\n```\r\n\r\nMy real-life application set properties at runtime and converts the key from a keystore that is loaded via remote API call (using [Bouncy castle][1])\r\n\r\n```\r\nKey clientPrivateKey = keyStore.getKey(clientCertAlias, keyStorePassword.toCharArray());\r\ntry (Writer writer = new StringWriter(); JcaPEMWriter pemWriter = new JcaPEMWriter(writer)) {\r\n   pemWriter.writeObject(clientPrivateKey);\r\n   pemWriter.flush();\r\n   properties.put(&quot;ssl.keystore.key&quot;, writer.toString());\r\n}\r\n```\r\n\r\nWhen I use the JKS keystore options with the same keystore (including both the trusted key and my private key), initialization works, so something must be flawed with the way the private key gets exported/converted into PEM format\r\n\r\n```\r\nsecurity.protocol=SSL\r\nssl.truststore.type=JKS\r\nssl.truststore.location=/tmp/client.keystore.jks\r\nssl.enabled.protocols=TLSv1.3\r\nssl.truststore.password=test1234\r\nssl.keystore.type=JKS\r\nssl.keystore.location=/tmp/client.keystore.jks\r\nssl.keystore.password=test1234\r\nssl.endpoint.identification.algorithm=\r\n```\r\n\r\n\r\n  [1]: https://www.bouncycastle.org/","title":"Apache Kafka client/producer: Invalid PEM keystore configs","body":"<p>I'm trying to implement a Kafka Producer including SSL configuration. Since we run the service in containers and shipping keystores in the local file system is not possible (using the <em>ssl.keystore.location</em> and <em>ssl.truststore.location</em> options), I have to pass keys and certificates in PEM format using the corresponding/alternate options -  as available since version 2.7.0 (I'm running Kafka 3.5.0 and kafka-clients:3.5.0 on JDK8)</p>\n<p>Here's my full client configuration (keys are for testing only)</p>\n<pre><code>security.protocol=SSL\nssl.enabled.protocols=TLSv1.3\n\nssl.keystore.type=PEM\nssl.key.password=test1234\nssl.keystore.key=-----BEGIN RSA PRIVATE KEY----- \\\nMIIEpQIBAAKCAQEAq2UXYa2I/ebR89f9Y7IA7u9PIKOAz2jyK4Y+Zm3lNzIj+7Sf \\\n1zVFt8KwIG+KSOpvS7i3FoUZhqSr6KnkOZnd5QBuNkAo+20J1FTGSMlHHxxvYSb/ \\\n03M1Ehwu5FO87jGX4KhZdiFO4glaC+ww7X3Rk9NFcONI+/r7YRS6lmux/yZ45bJb \\\nNYg7dIkVdl2evZOM3qu+uLbeAU/R7gu2G94XpKPe7OqdIwN5oNch41eoj1Mucm4j \\\nBT0b4BrJXsB82pHsKtDfpRWw+HjSvysgGhietcj8AfiO9U3SU7frRaFnQg6qrYzd \\\n6QxQlvBa2T62hoJvfjctXoHTuywpbAQTEzpLlwIDAQABAoIBACMJ+au4ZGczxvxI \\\nzb6R52rxdYXAp1a/p7KKMTuTf+a203BjzsGaXHRi0sruwqCBfNtIGfX6o+tIwvQ/ \\\nty6nbBui6OUiXL553iaQZjD/JRERKRv9cxNxXAolxNhc3iT78oa1JATobk37h3Mk \\\niCQlMrE74dhgPs100+tW54ZU4gC9L9OY8M7tQuXFOOK7cydTMmuiC1SMQEHR9WUD \\\nCJQMyn8zcPxHPGcfyc5Sr7W54FQ2quvWNmxTDGAp80bYl/wuAEbuig3QRyLv055G \\\nGRMZN0nAM6J3LWbFx/NtWEErN6RoFvc4C0h+H3V+DYiQ2SQNrmBKb3N9gQqs5mXM \\\n3c/DnYECgYEA+MY3WRDeD1DjHK/q2/NLHLGmSqoQ2hN7ea0j+8VLvu7X4r1TrQJ4 \\\nqv5j9v4vRnXRW5dCo7tyWmwbY9g93foPGmtYFD6UzaZRu0jO6oyWL2rsEm015NuT \\\n9Faf5oDMkAlWrVusUTHsnMlwTKCDWRqqa6Jum1wfqsRm0hGGqs7ZiGECgYEAsF+D \\\ne/ldvxfWdCIK24AQOrKcYgIy0iwTuDrvfkhA0v9I578U15/odBoXLyrUuvJuxWUa \\\naQl8oaxvOS5jw/f5nraquOXUECllwMoh1GNkMxX7zTaLtt16JkSHzXZjBZ8QDFAt \\\nKRRXOqtsDLgrpSvRjHAxltNmPSNKxCzp8cBbdvcCgYEA8cdDV46rItuMPv9CFM6Z \\\nu6N0aLBsfGXe5Vy+0hzoBwL+UmGLB2SVfiqLYSudKq+q74dMvvCYrQTQgfNR/YDg \\\nWN7m1ZYU7OGuIYUbhJ1qAV+7XBVEAc7eNuRRt6aKKZrJ4OZtzOPmgGLOf8qonVrr \\\nMnzFXrzkEgWboKJj7XHnvUECgYEAmZ3HTp6GOV9QyPuxizcCa62PqYmSrB352vdy \\\nCwJxe5Uf8cErLRc5Bo6G7O0YNe/b7Q+/Lgc2RzaB9ULjYBdGkic1kS+UQbNczcsA \\\nJhWfeyNFmppMnCxRLK15vsnDO20sNB1NCD+QLiiKRpXOZeFBdVlux5g+rzdi8nTQ \\\nGmDZCUcCgYEA2X6cJ4uCngOv7tQdILZpzYeZAb2crNa9vlngcfLbi8+7zTyS4Lop \\\n8Nmn979OrmCtHKgrMOcfFiObIBgnFPSufr+svp/y9Jd5TXE6dVmNLX13rki3HHgS \\\nuvxYM9UV5XdtSSb4BPYgBYmuXP8QjiK+V7TqU6Cc0ZK/Ma8DoBi3IEY= \\\n-----END RSA PRIVATE KEY-----\nssl.keystore.certificate.chain=-----BEGIN CERTIFICATE----- \\\nMIIDODCCAiACFBB23JdRC3qHpoGeo+qFdT2pGgOYMA0GCSqGSIb3DQEBCwUAMEUx \\\nCzAJBgNVBAYTAmF0MRMwEQYDVQQIDApTb21lLVN0YXRlMSEwHwYDVQQKDBhJbnRl \\\ncm5ldCBXaWRnaXRzIFB0eSBMdGQwHhcNMjMwODE3MDgyMDQzWhcNMjQwODE2MDgy \\\nMDQzWjBsMRAwDgYDVQQGEwdVbmtub3duMRAwDgYDVQQIEwdVbmtub3duMRAwDgYD \\\nVQQHEwdVbmtub3duMRAwDgYDVQQKEwdVbmtub3duMRAwDgYDVQQLEwdVbmtub3du \\\nMRAwDgYDVQQDEwdVbmtub3duMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKC \\\nAQEAq2UXYa2I/ebR89f9Y7IA7u9PIKOAz2jyK4Y+Zm3lNzIj+7Sf1zVFt8KwIG+K \\\nSOpvS7i3FoUZhqSr6KnkOZnd5QBuNkAo+20J1FTGSMlHHxxvYSb/03M1Ehwu5FO8 \\\n7jGX4KhZdiFO4glaC+ww7X3Rk9NFcONI+/r7YRS6lmux/yZ45bJbNYg7dIkVdl2e \\\nvZOM3qu+uLbeAU/R7gu2G94XpKPe7OqdIwN5oNch41eoj1Mucm4jBT0b4BrJXsB8 \\\n2pHsKtDfpRWw+HjSvysgGhietcj8AfiO9U3SU7frRaFnQg6qrYzd6QxQlvBa2T62 \\\nhoJvfjctXoHTuywpbAQTEzpLlwIDAQABMA0GCSqGSIb3DQEBCwUAA4IBAQBciKIN \\\nKCPTnSTPJEMHHunhC12WvbfF//BGqh3gn1eviGHRB1pnylQLPQXBIOJlTtgdlt0h \\\n0xSYgvWouD4UwctWTZoVRV/yHhMuZ99LXl8OKKCpZKGXfYTB2QjSkdWN+BIBhPz5 \\\nL7PIsNQJVmY/FpV8Es93lsjS2nH8fqaCOpVLsc604GDVD4cbUJEbCmB6faZ1Fy7x \\\nGX7yBkqTSEwE9TAJAgsPIWZZNsGD44ZGj0VAy/kRCEHigcToOvxPN+3nVWE3qacu \\\nQFyxNNX6waCc7rwxiIYarbxiGWxZo9pMEQC5ilxOzu1dShxbZNha8pyk3ClcGpCo \\\nnaBeqW3X6uSM7CMr \\\n-----END CERTIFICATE----- \\\n-----BEGIN CERTIFICATE----- \\\nMIIDazCCAlOgAwIBAgIUEGrJ27wUi2LZ+2dE2DVJyDsPkwowDQYJKoZIhvcNAQEL \\\nBQAwRTELMAkGA1UEBhMCYXQxEzARBgNVBAgMClNvbWUtU3RhdGUxITAfBgNVBAoM \\\nGEludGVybmV0IFdpZGdpdHMgUHR5IEx0ZDAeFw0yMzA4MTcwODE0MDRaFw0yNDA4 \\\nMTYwODE0MDRaMEUxCzAJBgNVBAYTAmF0MRMwEQYDVQQIDApTb21lLVN0YXRlMSEw \\\nHwYDVQQKDBhJbnRlcm5ldCBXaWRnaXRzIFB0eSBMdGQwggEiMA0GCSqGSIb3DQEB \\\nAQUAA4IBDwAwggEKAoIBAQDbCz4asRwDChWKL6VMX6STMugfn2X+QISSrad21VFH \\\nG9GHgRY36CpD/dd1AmoJKHChe5idR+Wq/522rg0AWDcSRF0ueI092JIYhEicnLIa \\\ncu5CehQwrFp+eaWh+ycgun9o1BXoUZVwBz/8I+02PqsgdpPfWdzIEvMd3xGYyI0w \\\ndarsrWrvOxfzmtZcNtj5OWyRX6Gx0ql3eq5i423BHAkKKzMwLw8TLtoIC+7i0fkR \\\n7BckDexgdEMAPBgLxMwc9/ZI5LPad4BwizNiFxIkA38vwVHpgeNLD58aZNh0wlOB \\\nc/Vk/Lq8zK3YHHLcXASudUvjR8cDMRNYwcHmrWjl5S1PAgMBAAGjUzBRMB0GA1Ud \\\nDgQWBBQtJjgJdIYZyJqTACDjVBoD5hPtoTAfBgNVHSMEGDAWgBQtJjgJdIYZyJqT \\\nACDjVBoD5hPtoTAPBgNVHRMBAf8EBTADAQH/MA0GCSqGSIb3DQEBCwUAA4IBAQAQ \\\n/CS0lo8QiK/6oCyo6rcsh3XjTvbBXTW/h25RNXkQbEDmMErCI9UVHNFA+JtxfTW4 \\\nYDyp7ccfXdqEVzYGMlqfVeWxVSw3PvC+PCuJeAc2l8PtW9gMfmoM/N6Lg6ckw4Dy \\\nvEhLy34s0x+mtPQM9owxiPlKMYIzUnGhbdGF4cb+IYDONgrsBIQVa7UHrw8r43DE \\\n41pVFUqVvgrbHs3Oao8lEPJLyolPLuHdgVafp2urXRCqkWEwM9pTiffWDR2USX5B \\\nmL3mVNTnVXSpOErpjkQvp73zOjSG/h4CEgGdrLc8kjv1jkSyi3R8c3MRDhKlZnWK \\\nomAr3CbvLmjrFWnzDN7d \\\n-----END CERTIFICATE-----\n\nssl.truststore.type=PEM\nssl.truststore.certificates=-----BEGIN CERTIFICATE----- \\\nMIIDazCCAlOgAwIBAgIUEGrJ27wUi2LZ+2dE2DVJyDsPkwowDQYJKoZIhvcNAQEL \\\nBQAwRTELMAkGA1UEBhMCYXQxEzARBgNVBAgMClNvbWUtU3RhdGUxITAfBgNVBAoM \\\nGEludGVybmV0IFdpZGdpdHMgUHR5IEx0ZDAeFw0yMzA4MTcwODE0MDRaFw0yNDA4 \\\nMTYwODE0MDRaMEUxCzAJBgNVBAYTAmF0MRMwEQYDVQQIDApTb21lLVN0YXRlMSEw \\\nHwYDVQQKDBhJbnRlcm5ldCBXaWRnaXRzIFB0eSBMdGQwggEiMA0GCSqGSIb3DQEB \\\nAQUAA4IBDwAwggEKAoIBAQDbCz4asRwDChWKL6VMX6STMugfn2X+QISSrad21VFH \\\nG9GHgRY36CpD/dd1AmoJKHChe5idR+Wq/522rg0AWDcSRF0ueI092JIYhEicnLIa \\\ncu5CehQwrFp+eaWh+ycgun9o1BXoUZVwBz/8I+02PqsgdpPfWdzIEvMd3xGYyI0w \\\ndarsrWrvOxfzmtZcNtj5OWyRX6Gx0ql3eq5i423BHAkKKzMwLw8TLtoIC+7i0fkR \\\n7BckDexgdEMAPBgLxMwc9/ZI5LPad4BwizNiFxIkA38vwVHpgeNLD58aZNh0wlOB \\\nc/Vk/Lq8zK3YHHLcXASudUvjR8cDMRNYwcHmrWjl5S1PAgMBAAGjUzBRMB0GA1Ud \\\nDgQWBBQtJjgJdIYZyJqTACDjVBoD5hPtoTAfBgNVHSMEGDAWgBQtJjgJdIYZyJqT \\\nACDjVBoD5hPtoTAPBgNVHRMBAf8EBTADAQH/MA0GCSqGSIb3DQEBCwUAA4IBAQAQ \\\n/CS0lo8QiK/6oCyo6rcsh3XjTvbBXTW/h25RNXkQbEDmMErCI9UVHNFA+JtxfTW4 \\\nYDyp7ccfXdqEVzYGMlqfVeWxVSw3PvC+PCuJeAc2l8PtW9gMfmoM/N6Lg6ckw4Dy \\\nvEhLy34s0x+mtPQM9owxiPlKMYIzUnGhbdGF4cb+IYDONgrsBIQVa7UHrw8r43DE \\\n41pVFUqVvgrbHs3Oao8lEPJLyolPLuHdgVafp2urXRCqkWEwM9pTiffWDR2USX5B \\\nmL3mVNTnVXSpOErpjkQvp73zOjSG/h4CEgGdrLc8kjv1jkSyi3R8c3MRDhKlZnWK \\\nomAr3CbvLmjrFWnzDN7d \\\n-----END CERTIFICATE-----\n</code></pre>\n<p>However, when I'm trying to run the producer, I'm always getting the following error, indicating that something is wrong with the private key provided but I'm not sure what...</p>\n<p>(The trust chain works when I skip client authentication).</p>\n<pre><code>org.apache.kafka.common.KafkaException: Failed to construct kafka consumer\n        at org.apache.kafka.clients.consumer.KafkaConsumer.&lt;init&gt;(KafkaConsumer.java:837)\n        at org.apache.kafka.clients.consumer.KafkaConsumer.&lt;init&gt;(KafkaConsumer.java:671)\n        at org.apache.kafka.clients.consumer.KafkaConsumer.&lt;init&gt;(KafkaConsumer.java:652)\n        at kafka.tools.ConsoleConsumer$.run(ConsoleConsumer.scala:67)\n        at kafka.tools.ConsoleConsumer$.main(ConsoleConsumer.scala:54)\n        at kafka.tools.ConsoleConsumer.main(ConsoleConsumer.scala)\nCaused by: org.apache.kafka.common.errors.InvalidConfigurationException: Invalid PEM keystore configs\nCaused by: java.io.IOException: overrun, bytes = 925\n        at java.base/javax.crypto.EncryptedPrivateKeyInfo.&lt;init&gt;(EncryptedPrivateKeyInfo.java:98)\n        at org.apache.kafka.common.security.ssl.DefaultSslEngineFactory$PemStore.privateKey(DefaultSslEngineFactory.java:510)\n        at org.apache.kafka.common.security.ssl.DefaultSslEngineFactory$PemStore.createKeyStoreFromPem(DefaultSslEngineFactory.java:460)\n        at org.apache.kafka.common.security.ssl.DefaultSslEngineFactory$PemStore.&lt;init&gt;(DefaultSslEngineFactory.java:433)\n        at org.apache.kafka.common.security.ssl.DefaultSslEngineFactory.createKeystore(DefaultSslEngineFactory.java:284)\n        at org.apache.kafka.common.security.ssl.DefaultSslEngineFactory.configure(DefaultSslEngineFactory.java:161)\n        at org.apache.kafka.common.security.ssl.SslFactory.instantiateSslEngineFactory(SslFactory.java:140)\n</code></pre>\n<p>My real-life application set properties at runtime and converts the key from a keystore that is loaded via remote API call (using <a href=\"https://www.bouncycastle.org/\" rel=\"nofollow noreferrer\">Bouncy castle</a>)</p>\n<pre><code>Key clientPrivateKey = keyStore.getKey(clientCertAlias, keyStorePassword.toCharArray());\ntry (Writer writer = new StringWriter(); JcaPEMWriter pemWriter = new JcaPEMWriter(writer)) {\n   pemWriter.writeObject(clientPrivateKey);\n   pemWriter.flush();\n   properties.put(&quot;ssl.keystore.key&quot;, writer.toString());\n}\n</code></pre>\n<p>When I use the JKS keystore options with the same keystore (including both the trusted key and my private key), initialization works, so something must be flawed with the way the private key gets exported/converted into PEM format</p>\n<pre><code>security.protocol=SSL\nssl.truststore.type=JKS\nssl.truststore.location=/tmp/client.keystore.jks\nssl.enabled.protocols=TLSv1.3\nssl.truststore.password=test1234\nssl.keystore.type=JKS\nssl.keystore.location=/tmp/client.keystore.jks\nssl.keystore.password=test1234\nssl.endpoint.identification.algorithm=\n</code></pre>\n"},{"tags":["java","sockets","proxy","vert.x"],"owner":{"account_id":29379401,"reputation":1,"user_id":22510253,"display_name":"chobo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1694005958,"creation_date":1694005958,"question_id":77052254,"body_markdown":"I am creating a socket proxy with vert.x version 3.9.\r\nMysql is working fine, but mongodb is not, where should I look?\r\n\r\nThe code looks like this\r\n\r\n```\r\npublic class VertxProxy extends AbstractVerticle {\r\n\r\n\t// Convenience method so you can run it in your IDE\r\n\tpublic static void main(String[] args) {\r\n\t\tVertx vertx = Vertx.vertx();\r\n\t\tvertx.deployVerticle(new VertxProxy(), new Handler&lt;AsyncResult&lt;String&gt;&gt;() {\r\n\t\t\t@Override\r\n\t\t\tpublic void handle(AsyncResult&lt;String&gt; asyncResult) {\r\n\t\t\t\tif (asyncResult.succeeded()) {\r\n\t\t\t\t\tSystem.out.println(&quot;====&gt;  SUC&quot;);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tSystem.out.println(&quot;====&gt;  FAIL&quot;);\r\n\t\t\t\t\tasyncResult.cause().printStackTrace();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void start() throws Exception {\r\n\t\tNetServer netServer = vertx.createNetServer();\r\n\t\tNetClient netClient = vertx.createNetClient();\r\n\r\n\t\tnetServer.connectHandler(socket -&gt; {\r\n\t\t\tnetClient.connect(27017, &quot;127.0.0.1&quot;, result -&gt; {\r\n\t\t\t\tNetSocket clientSocket = socket;\r\n\t\t\t\tNetSocket serverSocket = result.result();\r\n\r\n\t\t\t\t// user -&gt; localserver:port\r\n\t\t\t\tclientSocket.handler(buffer -&gt; {\r\n\t\t\t\t\tSystem.out.println(&quot;send clint to server&quot;);\r\n\t\t\t\t\tbyte[] _byteBuff = buffer.getByteBuf().array();\r\n\r\n\t\t\t\t\tserverSocket.write(buffer);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tserverSocket.handler(buffer -&gt; {\r\n\t\t\t\t\tSystem.out.println(&quot;send server to clinet &quot;);\r\n\t\t\t\t\tbyte[] _byteBuff = buffer.getByteBuf().array();\r\n\r\n\t\t\t\t\tclientSocket.write(buffer);\r\n\t\t\t\t});\r\n\r\n\t\t\t});\r\n\t\t}).listen(33404, listenResult -&gt; {\r\n\t\t\tif (listenResult.succeeded()) {\r\n\t\t\t\tSystem.out.println(&quot;-&gt;  succ&quot;);\r\n\t\t\t} else {\r\n\t\t\t\tSystem.out.println(&quot;-&gt; fail&quot;);\r\n\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t}\r\n}\r\n```\r\n\r\nMysql works fine, but mongodb does not work with the proxy.  Where should I look?","title":"I&#39;m creating a socket proxy with vert.x and it&#39;s not working well","body":"<p>I am creating a socket proxy with vert.x version 3.9.\nMysql is working fine, but mongodb is not, where should I look?</p>\n<p>The code looks like this</p>\n<pre><code>public class VertxProxy extends AbstractVerticle {\n\n    // Convenience method so you can run it in your IDE\n    public static void main(String[] args) {\n        Vertx vertx = Vertx.vertx();\n        vertx.deployVerticle(new VertxProxy(), new Handler&lt;AsyncResult&lt;String&gt;&gt;() {\n            @Override\n            public void handle(AsyncResult&lt;String&gt; asyncResult) {\n                if (asyncResult.succeeded()) {\n                    System.out.println(&quot;====&gt;  SUC&quot;);\n                } else {\n                    System.out.println(&quot;====&gt;  FAIL&quot;);\n                    asyncResult.cause().printStackTrace();\n                }\n            }\n        });\n    }\n\n    @Override\n    public void start() throws Exception {\n        NetServer netServer = vertx.createNetServer();\n        NetClient netClient = vertx.createNetClient();\n\n        netServer.connectHandler(socket -&gt; {\n            netClient.connect(27017, &quot;127.0.0.1&quot;, result -&gt; {\n                NetSocket clientSocket = socket;\n                NetSocket serverSocket = result.result();\n\n                // user -&gt; localserver:port\n                clientSocket.handler(buffer -&gt; {\n                    System.out.println(&quot;send clint to server&quot;);\n                    byte[] _byteBuff = buffer.getByteBuf().array();\n\n                    serverSocket.write(buffer);\n                });\n\n                serverSocket.handler(buffer -&gt; {\n                    System.out.println(&quot;send server to clinet &quot;);\n                    byte[] _byteBuff = buffer.getByteBuf().array();\n\n                    clientSocket.write(buffer);\n                });\n\n            });\n        }).listen(33404, listenResult -&gt; {\n            if (listenResult.succeeded()) {\n                System.out.println(&quot;-&gt;  succ&quot;);\n            } else {\n                System.out.println(&quot;-&gt; fail&quot;);\n\n            }\n        });\n\n    }\n}\n</code></pre>\n<p>Mysql works fine, but mongodb does not work with the proxy.  Where should I look?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9934,"page":200,"page_size":100}
