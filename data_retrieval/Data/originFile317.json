{"items":[{"tags":["java","string","rounding","precision","floating-accuracy"],"comments":[{"owner":{"account_id":1967112,"reputation":162,"user_id":1767050,"display_name":"Red wine"},"score":0,"creation_date":1642586507,"post_id":2301047,"comment_id":125107692,"body_markdown":"And in Kotlin your &quot;something like&quot; would be rather more elegant:\nval foo = &quot;%.${precision}f&quot;.format(my_double)","body":"And in Kotlin your &quot;something like&quot; would be rather more elegant: val foo = &quot;%.${precision}f&quot;.format(my_double)"}],"answers":[{"tags":[],"owner":{"account_id":73747,"reputation":5497,"user_id":212215,"accept_rate":87,"display_name":"vicatcu"},"down_vote_count":1,"up_vote_count":20,"is_accepted":true,"score":19,"last_activity_date":1266640779,"creation_date":1266640779,"answer_id":2301066,"question_id":2301047,"body_markdown":"You sort of answered your own question - build your format string dynamically... valid format strings follow the conventions outlined here: http://java.sun.com/j2se/1.5.0/docs/api/java/util/Formatter.html#syntax.\r\n\r\nIf you want a formatted decimal that occupies 8 total characters (including the decimal point) and you wanted 4 digits after the decimal point, your format string should look like &quot;%8.4f&quot;... \r\n\r\nTo my knowledge there is no &quot;native support&quot; in Java beyond format strings being flexible.","title":"How to Java String.format with a variable precision?","body":"<p>You sort of answered your own question - build your format string dynamically... valid format strings follow the conventions outlined here: <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/util/Formatter.html#syntax\" rel=\"noreferrer\">http://java.sun.com/j2se/1.5.0/docs/api/java/util/Formatter.html#syntax</a>.</p>\n\n<p>If you want a formatted decimal that occupies 8 total characters (including the decimal point) and you wanted 4 digits after the decimal point, your format string should look like \"%8.4f\"... </p>\n\n<p>To my knowledge there is no \"native support\" in Java beyond format strings being flexible.</p>\n"},{"tags":[],"owner":{"account_id":7085674,"reputation":53,"user_id":5422558,"display_name":"Gerdi"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1468502371,"creation_date":1467287370,"answer_id":38122245,"question_id":2301047,"body_markdown":"Why not :\r\n\r\n    String form = &quot;%.&quot;+precision+&quot;f\\n&quot;;\r\n    String foo = String.format(form, my_double);\r\n\r\n\r\nor :\r\n\r\n    public static String myFormat(String src, int precision, Object args...)\r\n    {\r\n        String form = &quot;%.&quot;+precision+&quot;f\\n&quot;;\r\n        return String.format(form, args);\r\n    }","title":"How to Java String.format with a variable precision?","body":"<p>Why not :</p>\n\n<pre><code>String form = \"%.\"+precision+\"f\\n\";\nString foo = String.format(form, my_double);\n</code></pre>\n\n<p>or :</p>\n\n<pre><code>public static String myFormat(String src, int precision, Object args...)\n{\n    String form = \"%.\"+precision+\"f\\n\";\n    return String.format(form, args);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1995799,"reputation":28352,"user_id":1788806,"accept_rate":94,"display_name":"Willi Mentzel"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1467287753,"creation_date":1467287753,"answer_id":38122388,"question_id":2301047,"body_markdown":"You can use the [DecimalFormat][1] class.\r\n\r\n    double d1 = 3.14159;\r\n    double d2 = 1.235;\r\n    \r\n    DecimalFormat df = new DecimalFormat(&quot;#.##&quot;);\r\n    \r\n    double roundedD1 = df.format(d); // 3.14\r\n    double roundedD2 = df.format(d); // 1.24\r\n\r\nIf you want to set the precision at run time call:\r\n\r\n\tdf.setMaximumFractionDigits(precision)\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/text/DecimalFormat.html","title":"How to Java String.format with a variable precision?","body":"<p>You can use the <a href=\"https://docs.oracle.com/javase/7/docs/api/java/text/DecimalFormat.html\" rel=\"noreferrer\">DecimalFormat</a> class.</p>\n\n<pre><code>double d1 = 3.14159;\ndouble d2 = 1.235;\n\nDecimalFormat df = new DecimalFormat(\"#.##\");\n\ndouble roundedD1 = df.format(d); // 3.14\ndouble roundedD2 = df.format(d); // 1.24\n</code></pre>\n\n<p>If you want to set the precision at run time call:</p>\n\n<pre><code>df.setMaximumFractionDigits(precision)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18552013,"reputation":11,"user_id":13518055,"display_name":"swaraj_gore"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1611238282,"creation_date":1611238282,"answer_id":65829219,"question_id":2301047,"body_markdown":"    \r\n    double pi = Math.PI; // 3.141592653589793\r\n    int n = 5;\r\n    DecimalFormat df = new DecimalFormat();\r\n    df.setMaximumFractionDigits(n);\r\n    System.out.printf(df.format(pi)); // 3.14159\r\nYou can set value of **n** at runtime. Here from the above code given **n = 5** will print **3.14159**","title":"How to Java String.format with a variable precision?","body":"<pre><code>double pi = Math.PI; // 3.141592653589793\nint n = 5;\nDecimalFormat df = new DecimalFormat();\ndf.setMaximumFractionDigits(n);\nSystem.out.printf(df.format(pi)); // 3.14159\n</code></pre>\n<p>You can set value of <strong>n</strong> at runtime. Here from the above code given <strong>n = 5</strong> will print <strong>3.14159</strong></p>\n"},{"tags":[],"owner":{"account_id":6068289,"reputation":3592,"user_id":4737909,"accept_rate":45,"display_name":"Lorenzo Lerate"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687358255,"creation_date":1687358255,"answer_id":76524495,"question_id":2301047,"body_markdown":"Willi Mentzel solution updated for Java 17:\r\n\r\n    double d1 = 3.14159;\r\n    double d2 = 1.235;\r\n    \r\n    DecimalFormat df = new DecimalFormat(&quot;#.##&quot;);\r\n    \r\n    String roundedD1 = df.format(d); // 3.14\r\n    String roundedD2 = df.format(d); // 1.24","title":"How to Java String.format with a variable precision?","body":"<p>Willi Mentzel solution updated for Java 17:</p>\n<pre><code>double d1 = 3.14159;\ndouble d2 = 1.235;\n\nDecimalFormat df = new DecimalFormat(&quot;#.##&quot;);\n\nString roundedD1 = df.format(d); // 3.14\nString roundedD2 = df.format(d); // 1.24\n</code></pre>\n"}],"owner":{"account_id":31686,"reputation":6454,"user_id":87207,"accept_rate":70,"display_name":"Willi Ballenthin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31865,"favorite_count":0,"down_vote_count":0,"up_vote_count":32,"accepted_answer_id":2301066,"answer_count":5,"score":32,"last_activity_date":1689048528,"creation_date":1266639972,"question_id":2301047,"body_markdown":"I&#39;d like to allow the user to vary the precision of a `String` generated from a `double`. Right now, I&#39;m trying something like\r\n\r\n    String foo = String.format(&quot;%.*f\\n&quot;, precision, my_double);\r\n\r\nHowever, I receive a `java.util.UnknownFormatConversionException`. My inspiration for this approach was C *printf* and [this resource][1] (section 1.3.1). \r\n\r\nDo I have a simple syntax error somewhere, does Java support this case, or is there a better approach?\r\n\r\n**Edit:**\r\n\r\nI suppose I could do something like\r\n\r\n    String foo = String.format(&quot;%.&quot; + precision + &quot;f\\n&quot;, my_double);\r\n\r\nbut I&#39;d still be interested in native support for such an operation.\r\n\r\n  [1]: http://sharkysoft.com/archive/printf/docs/javadocs/lava/clib/stdio/doc-files/specification.htm","title":"How to Java String.format with a variable precision?","body":"<p>I'd like to allow the user to vary the precision of a <code>String</code> generated from a <code>double</code>. Right now, I'm trying something like</p>\n<pre><code>String foo = String.format(&quot;%.*f\\n&quot;, precision, my_double);\n</code></pre>\n<p>However, I receive a <code>java.util.UnknownFormatConversionException</code>. My inspiration for this approach was C <em>printf</em> and <a href=\"http://sharkysoft.com/archive/printf/docs/javadocs/lava/clib/stdio/doc-files/specification.htm\" rel=\"nofollow noreferrer\">this resource</a> (section 1.3.1).</p>\n<p>Do I have a simple syntax error somewhere, does Java support this case, or is there a better approach?</p>\n<p><strong>Edit:</strong></p>\n<p>I suppose I could do something like</p>\n<pre><code>String foo = String.format(&quot;%.&quot; + precision + &quot;f\\n&quot;, my_double);\n</code></pre>\n<p>but I'd still be interested in native support for such an operation.</p>\n"},{"tags":["java","android","android-studio","mapbox","mapbox-android"],"answers":[{"tags":[],"owner":{"account_id":27984489,"reputation":3,"user_id":21371640,"display_name":"Meziane"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689048301,"creation_date":1688724788,"answer_id":76636020,"question_id":76070182,"body_markdown":"Maybe you can use `fillExtrusionLayer.bindTo(style)`. Furthermore the calls `mapView.onStart()`, `onStop()`, and so forth are not useful now because [version 10 of the Mapbox SDK now manages the `mapView` lifecycle](https://docs.mapbox.com/android/maps/guides/migrate-to-v10/#simplified-lifecycle-management).","title":"Adding a FillExtrusionLayer to a Mapbox Map in Android using Mapbox SDK v10.12.2","body":"<p>Maybe you can use <code>fillExtrusionLayer.bindTo(style)</code>. Furthermore the calls <code>mapView.onStart()</code>, <code>onStop()</code>, and so forth are not useful now because <a href=\"https://docs.mapbox.com/android/maps/guides/migrate-to-v10/#simplified-lifecycle-management\" rel=\"nofollow noreferrer\">version 10 of the Mapbox SDK now manages the <code>mapView</code> lifecycle</a>.</p>\n"}],"owner":{"account_id":11077786,"reputation":87,"user_id":8133934,"accept_rate":71,"display_name":"MSD"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":192,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689048301,"creation_date":1682055303,"question_id":76070182,"body_markdown":"I am attempting to create a 3D Map in Android and having issues utilizing the correct style.addStyle(fillExtrusionLayer);. I have looked at the documentation to no avail. Any help would be appreciated. \r\n\r\nDocumentation: https://docs.mapbox.com/android/maps/examples/fill-extrusion/\r\n\r\nThe error I receive is: \r\n\r\n&gt; Cannot resolve method &#39;addStyle&#39; in &#39;Style&#39;\r\n\r\n\r\nMap.java:\r\n\r\n   \r\n\r\n     package edu.test.it.finalproject;\r\n        import androidx.appcompat.app.AppCompatActivity;\r\n        import android.graphics.Color;\r\n        import android.os.Bundle;  \r\n        import com.mapbox.geojson.Point;\r\n        import com.mapbox.maps.CameraOptions;\r\n        import com.mapbox.maps.LayerPosition;\r\n        import com.mapbox.maps.MapView;\r\n        import com.mapbox.maps.MapboxMap;\r\n        import com.mapbox.maps.Style;\r\n        import com.mapbox.maps.extension.style.expressions.generated.Expression;\r\n        import com.mapbox.maps.extension.style.layers.generated.FillExtrusionLayer;\r\n        import com.mapbox.maps.extension.style.layers.properties.generated.Visibility;\r\n        import com.mapbox.maps.extension.style.layers.Layer;\r\n        //import com.mapbox.maps.testapp.databinding.ActivityFillExtrusionBinding;\r\n         \r\n         \r\n        public class Map extends AppCompatActivity {\r\n         \r\n            private MapView mapView;\r\n            private MapboxMap mapboxMap;\r\n         \r\n            @Override\r\n            protected void onCreate(Bundle savedInstanceState) {\r\n                super.onCreate(savedInstanceState);\r\n                setContentView(R.layout.activity_building_3d);\r\n         \r\n                mapView = findViewById(R.id.mapView);\r\n                mapView.getMapboxMap().loadStyleUri(Style.MAPBOX_STREETS, style -&gt; {\r\n                    mapboxMap = mapView.getMapboxMap();\r\n                    add3DBuildings(style);\r\n         \r\n                    // Set initial camera position\r\n                    CameraOptions cameraOptions = new CameraOptions.Builder()\r\n                            .center(Point.fromLngLat(-77.860001, 40.793394))\r\n                            .zoom(15.0)\r\n                            .build();\r\n                    mapboxMap.setCamera(cameraOptions);\r\n                });\r\n            }\r\n         \r\n            private void add3DBuildings(Style style) {\r\n                FillExtrusionLayer fillExtrusionLayer = new FillExtrusionLayer(&quot;3d- \r\n       buildings&quot;, &quot;composite&quot;);\r\n         \r\n                fillExtrusionLayer.sourceLayer(&quot;building&quot;);\r\n                fillExtrusionLayer.filter(Expression.eq(Expression.get(&quot;extrude&quot;), \r\n        Expression.literal(&quot;true&quot;)));\r\n                fillExtrusionLayer.minZoom(15.0);\r\n                fillExtrusionLayer.visibility(Visibility.VISIBLE);\r\n                fillExtrusionLayer.fillExtrusionColor(Color.LTGRAY);\r\n                fillExtrusionLayer.fillExtrusionHeight(Expression.get(&quot;height&quot;));\r\n                fillExtrusionLayer.fillExtrusionBase(Expression.get(&quot;min_height&quot;));\r\n                fillExtrusionLayer.fillExtrusionOpacity(0.6f);\r\n                style.addStyle(fillExtrusionLayer);\r\n         \r\n            }\r\n         \r\n         \r\n            @Override\r\n            protected void onStart() {\r\n                super.onStart();\r\n                mapView.onStart();\r\n            }\r\n         \r\n            @Override\r\n            protected void onStop() {\r\n                super.onStop();\r\n                mapView.onStop();\r\n            }\r\n         \r\n            @Override\r\n            public void onLowMemory() {\r\n                super.onLowMemory();\r\n                mapView.onLowMemory();\r\n            }\r\n         \r\n            @Override\r\n            protected void onDestroy() {\r\n                super.onDestroy();\r\n                mapView.onDestroy();\r\n            }\r\n        }\r\n\r\n \r\n\r\n\r\n\r\n    activity_building_3D:\r\n        &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n        &lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:id=&quot;@+id/map_container&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        tools:context=&quot;.Map&quot;&gt;\r\n        &lt;!-- Other UI elements --&gt;\r\n     \r\n        &lt;com.mapbox.maps.MapView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n            xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n            xmlns:mapbox=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n            android:id=&quot;@+id/mapView&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            mapbox:mapbox_cameraTargetLat=&quot;40.793072&quot;\r\n            mapbox:mapbox_cameraTargetLng=&quot;-77.865516&quot;\r\n            mapbox:mapbox_cameraZoom=&quot;9.0&quot;\r\n            mapbox:mapbox_resourcesAccessToken=&quot;//TOKEN GOES HERE&quot; /&gt;\r\n     \r\n        &lt;/RelativeLayout&gt;\r\n     \r\n\r\n\r\n\r\n","title":"Adding a FillExtrusionLayer to a Mapbox Map in Android using Mapbox SDK v10.12.2","body":"<p>I am attempting to create a 3D Map in Android and having issues utilizing the correct style.addStyle(fillExtrusionLayer);. I have looked at the documentation to no avail. Any help would be appreciated.</p>\n<p>Documentation: <a href=\"https://docs.mapbox.com/android/maps/examples/fill-extrusion/\" rel=\"nofollow noreferrer\">https://docs.mapbox.com/android/maps/examples/fill-extrusion/</a></p>\n<p>The error I receive is:</p>\n<blockquote>\n<p>Cannot resolve method 'addStyle' in 'Style'</p>\n</blockquote>\n<p>Map.java:</p>\n<pre><code> package edu.test.it.finalproject;\n    import androidx.appcompat.app.AppCompatActivity;\n    import android.graphics.Color;\n    import android.os.Bundle;  \n    import com.mapbox.geojson.Point;\n    import com.mapbox.maps.CameraOptions;\n    import com.mapbox.maps.LayerPosition;\n    import com.mapbox.maps.MapView;\n    import com.mapbox.maps.MapboxMap;\n    import com.mapbox.maps.Style;\n    import com.mapbox.maps.extension.style.expressions.generated.Expression;\n    import com.mapbox.maps.extension.style.layers.generated.FillExtrusionLayer;\n    import com.mapbox.maps.extension.style.layers.properties.generated.Visibility;\n    import com.mapbox.maps.extension.style.layers.Layer;\n    //import com.mapbox.maps.testapp.databinding.ActivityFillExtrusionBinding;\n     \n     \n    public class Map extends AppCompatActivity {\n     \n        private MapView mapView;\n        private MapboxMap mapboxMap;\n     \n        @Override\n        protected void onCreate(Bundle savedInstanceState) {\n            super.onCreate(savedInstanceState);\n            setContentView(R.layout.activity_building_3d);\n     \n            mapView = findViewById(R.id.mapView);\n            mapView.getMapboxMap().loadStyleUri(Style.MAPBOX_STREETS, style -&gt; {\n                mapboxMap = mapView.getMapboxMap();\n                add3DBuildings(style);\n     \n                // Set initial camera position\n                CameraOptions cameraOptions = new CameraOptions.Builder()\n                        .center(Point.fromLngLat(-77.860001, 40.793394))\n                        .zoom(15.0)\n                        .build();\n                mapboxMap.setCamera(cameraOptions);\n            });\n        }\n     \n        private void add3DBuildings(Style style) {\n            FillExtrusionLayer fillExtrusionLayer = new FillExtrusionLayer(&quot;3d- \n   buildings&quot;, &quot;composite&quot;);\n     \n            fillExtrusionLayer.sourceLayer(&quot;building&quot;);\n            fillExtrusionLayer.filter(Expression.eq(Expression.get(&quot;extrude&quot;), \n    Expression.literal(&quot;true&quot;)));\n            fillExtrusionLayer.minZoom(15.0);\n            fillExtrusionLayer.visibility(Visibility.VISIBLE);\n            fillExtrusionLayer.fillExtrusionColor(Color.LTGRAY);\n            fillExtrusionLayer.fillExtrusionHeight(Expression.get(&quot;height&quot;));\n            fillExtrusionLayer.fillExtrusionBase(Expression.get(&quot;min_height&quot;));\n            fillExtrusionLayer.fillExtrusionOpacity(0.6f);\n            style.addStyle(fillExtrusionLayer);\n     \n        }\n     \n     \n        @Override\n        protected void onStart() {\n            super.onStart();\n            mapView.onStart();\n        }\n     \n        @Override\n        protected void onStop() {\n            super.onStop();\n            mapView.onStop();\n        }\n     \n        @Override\n        public void onLowMemory() {\n            super.onLowMemory();\n            mapView.onLowMemory();\n        }\n     \n        @Override\n        protected void onDestroy() {\n            super.onDestroy();\n            mapView.onDestroy();\n        }\n    }\n\n\n\n\n\nactivity_building_3D:\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n    &lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:id=&quot;@+id/map_container&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.Map&quot;&gt;\n    &lt;!-- Other UI elements --&gt;\n \n    &lt;com.mapbox.maps.MapView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n        xmlns:mapbox=&quot;http://schemas.android.com/apk/res-auto&quot;\n        android:id=&quot;@+id/mapView&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        mapbox:mapbox_cameraTargetLat=&quot;40.793072&quot;\n        mapbox:mapbox_cameraTargetLng=&quot;-77.865516&quot;\n        mapbox:mapbox_cameraZoom=&quot;9.0&quot;\n        mapbox:mapbox_resourcesAccessToken=&quot;//TOKEN GOES HERE&quot; /&gt;\n \n    &lt;/RelativeLayout&gt;\n \n</code></pre>\n"},{"tags":["java","spring-boot","elasticsearch"],"owner":{"account_id":11847379,"reputation":977,"user_id":8669584,"accept_rate":0,"display_name":"Rohit Suthar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1689047996,"creation_date":1688982951,"question_id":76652626,"body_markdown":"I have a java spring boot application that uses Elasticsearch to store articles. In micro-service, I listen for update and delete events of article, and based on that I am updating or deleting that article in the elastic search.\r\n\r\n**Issue:** However, I&#39;m facing an issue when both an update and a delete event are received for the same article. If the delete event is processed first, the article is correctly deleted from Elasticsearch. However, when the update event is subsequently processed, the article is recreated in Elasticsearch.\r\n\r\nHere is the brief code for my update logic\r\n```\r\nprivate final RestHighLevelClient client;\r\n\r\n// Creating index update request\r\nIndexRequest request = new IndexRequest(index, &quot;article&quot;, article.getId()).source(article);\r\nrequest.versionType(VersionType.EXTERNAL);\r\nrequest.version(article.getVersion());\r\n\r\n// Making ES index call\r\nIndexResponse response = client.index(request, RequestOptions.DEFAULT);\r\n```\r\nIn the above code, I am using external versioning and index request for my update event because I receive full entity details in the update event.\r\n\r\nHere is the brief code for my delete logic\r\n```\r\nprivate final RestHighLevelClient client;\r\n\r\n// Creating delete request\r\nDeleteRequest deleteRequest = new DeleteRequest(index, &quot;article&quot;, article.getId());\r\n\r\n// Making ES delete call\r\nDeleteResponse response = client.delete(deleteRequest, RequestOptions.DEFAULT);\r\n```\r\nOne possible solution is to modify my update logic to first check if the article exists.\r\nIf it does not exist, I can simply ignore the event. However, if the article is present, I can proceed with the update. But in this approach every time I am making two requests one for GET and then one for updating the article, which can be inefficient.\r\n\r\nI have also check for elastic search update API and implemented the below code\r\n```\r\nprivate final RestHighLevelClient client;\r\n\r\n// Creating update request\r\nUpdateRequest request = new UpdateRequest(index, &quot;article&quot;, article.getId()).doc(article);\r\nrequest.versionType(VersionType.EXTERNAL);\r\nrequest.version(entity.getVersion());\r\n\r\n// Making ES update call\r\nUpdateResponse response = client.update(request, RequestOptions.DEFAULT);\r\n```\r\n\r\nBut this is giving me error as external versioning is not supported by ES update API.\r\n\r\nCan anyone please share any solution to solve this issue.","title":"How to prevent inconsistency due to simultaneous update and delete events for an entity in Elasticsearch","body":"<p>I have a java spring boot application that uses Elasticsearch to store articles. In micro-service, I listen for update and delete events of article, and based on that I am updating or deleting that article in the elastic search.</p>\n<p><strong>Issue:</strong> However, I'm facing an issue when both an update and a delete event are received for the same article. If the delete event is processed first, the article is correctly deleted from Elasticsearch. However, when the update event is subsequently processed, the article is recreated in Elasticsearch.</p>\n<p>Here is the brief code for my update logic</p>\n<pre><code>private final RestHighLevelClient client;\n\n// Creating index update request\nIndexRequest request = new IndexRequest(index, &quot;article&quot;, article.getId()).source(article);\nrequest.versionType(VersionType.EXTERNAL);\nrequest.version(article.getVersion());\n\n// Making ES index call\nIndexResponse response = client.index(request, RequestOptions.DEFAULT);\n</code></pre>\n<p>In the above code, I am using external versioning and index request for my update event because I receive full entity details in the update event.</p>\n<p>Here is the brief code for my delete logic</p>\n<pre><code>private final RestHighLevelClient client;\n\n// Creating delete request\nDeleteRequest deleteRequest = new DeleteRequest(index, &quot;article&quot;, article.getId());\n\n// Making ES delete call\nDeleteResponse response = client.delete(deleteRequest, RequestOptions.DEFAULT);\n</code></pre>\n<p>One possible solution is to modify my update logic to first check if the article exists.\nIf it does not exist, I can simply ignore the event. However, if the article is present, I can proceed with the update. But in this approach every time I am making two requests one for GET and then one for updating the article, which can be inefficient.</p>\n<p>I have also check for elastic search update API and implemented the below code</p>\n<pre><code>private final RestHighLevelClient client;\n\n// Creating update request\nUpdateRequest request = new UpdateRequest(index, &quot;article&quot;, article.getId()).doc(article);\nrequest.versionType(VersionType.EXTERNAL);\nrequest.version(entity.getVersion());\n\n// Making ES update call\nUpdateResponse response = client.update(request, RequestOptions.DEFAULT);\n</code></pre>\n<p>But this is giving me error as external versioning is not supported by ES update API.</p>\n<p>Can anyone please share any solution to solve this issue.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1689038351,"post_id":76658167,"comment_id":135153521,"body_markdown":"1. Confirm that on Linux it will display an icon at all for a &quot;normal&quot; `JFrame`.  I&#39;m not sure how you&#39;re doing it, but the child frames seem to be using a customised look and feel and/or frame delegate; 2. I&#39;d look at [`JFrame#setIconImages`](https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/java/awt/Window.html#setIconImages(java.util.List)) which allows you to supply a number of differently sized icons which might help ([for example](https://stackoverflow.com/questions/18224184/sizes-of-frame-icons-used-in-swing))","body":"1. Confirm that on Linux it will display an icon at all for a &quot;normal&quot; <code>JFrame</code>.  I&#39;m not sure how you&#39;re doing it, but the child frames seem to be using a customised look and feel and/or frame delegate; 2. I&#39;d look at <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.desktop/java/awt/Window.html#setIconImages(java.util.List)\" rel=\"nofollow noreferrer\"><code>JFrame#setIconImages</code></a> which allows you to supply a number of differently sized icons which might help (<a href=\"https://stackoverflow.com/questions/18224184/sizes-of-frame-icons-used-in-swing\">for example</a>)"},{"owner":{"account_id":28971666,"reputation":1,"user_id":22191818,"display_name":"Tompac"},"score":0,"creation_date":1689041817,"post_id":76658167,"comment_id":135153808,"body_markdown":"MadProgrammer, thanks for the comments.  I made another minimum example that got rid of the SFrame and ChildFrame classes entirely.  I created two JFrames and then added icons to both.  Under Linux the first JFrame does not get the icon but the second JFrame does.  Both JFrames look identical to what is shown for Linux in the graphic I posted earlier.","body":"MadProgrammer, thanks for the comments.  I made another minimum example that got rid of the SFrame and ChildFrame classes entirely.  I created two JFrames and then added icons to both.  Under Linux the first JFrame does not get the icon but the second JFrame does.  Both JFrames look identical to what is shown for Linux in the graphic I posted earlier."}],"answers":[{"tags":[],"owner":{"account_id":28971666,"reputation":1,"user_id":22191818,"display_name":"Tompac"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689046880,"creation_date":1689046392,"answer_id":76658554,"question_id":76658167,"body_markdown":"So, apparently instantiating the first JFrame (or SFrame) without assigning it to a variable does not work properly as far as assigning the icon.  I found that if I declared a JFrame/SFrame variable first, called setDefaultLookAndFeelDecorated(true) on that JFrame/SFrame variable before even instantiating the object, and then instantiated the JFrame/SFrame and assigned it to the variable that things work as desired (the first JFrame/SFrame does get the icon).  I can&#39;t say I understand why I need to do that, but I do get the behavior that I want.","title":"JFrame icon renders properly on Windows but not on particular Linux distribution","body":"<p>So, apparently instantiating the first JFrame (or SFrame) without assigning it to a variable does not work properly as far as assigning the icon.  I found that if I declared a JFrame/SFrame variable first, called setDefaultLookAndFeelDecorated(true) on that JFrame/SFrame variable before even instantiating the object, and then instantiated the JFrame/SFrame and assigned it to the variable that things work as desired (the first JFrame/SFrame does get the icon).  I can't say I understand why I need to do that, but I do get the behavior that I want.</p>\n"}],"owner":{"account_id":28971666,"reputation":1,"user_id":22191818,"display_name":"Tompac"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689046880,"creation_date":1689037783,"question_id":76658167,"body_markdown":"I could use some help regarding the setting of an icon on a JFrame.  I have a Java 8 application that is typically used in both Windows and Linux environments.  The application is composed of a number of &quot;SFrames&quot;, which are a custom class that extends a JFrame and includes the setting of a custom icon for the frame.  There is one main &quot;SFrame&quot; for the application, and then other &quot;SFrames&quot; are brought up as needed depending on the actions of the user.  All &quot;SFrames&quot; have the same icon displayed.  \r\n\r\nIn the past when running this application on both Windows and Linux the correct icon appeared on all &quot;SFrames&quot; (the main application &quot;SFrame&quot;, and then all subsequent frames that were brought up).  The execution environment for Linux was recently updated from an older version of Fedora (with the Mate desktop environment) to a recent version of Red Hat Enterprise Linux (also with the Mate desktop environment).  In this new Linux environment the icon was not appearing on any of the &quot;SFrames&quot;, either the main frame or any subsequent frames that appear.  \r\n\r\nI did see this Stackoverflow entry (https://stackoverflow.com/questions/13979754/jframe-icon-not-displaying-in-ubuntu-12-04), and setting setDefaultLookAndFeelDecorated to &quot;true&quot; in the &quot;SFrame&quot; constructor does cause the icon to appear on subsequent SFrames that are brought up under Linux, but not the first frame.  The first SFrame continues to have no icon on it, and appears very similar to the default appearance of other Mate windows.  Later experimentation showed that it is always the first SFrame that is left at the default appearance with no icon, regardless of whether subsequent SFrames are called from the first SFrame (i.e., subsequent SFrames are like &quot;children&quot; of the first SFrame, as shown in the example below), or whether multiple SFrames are called sequentially (i.e., subsequent SFrames are like &quot;younger siblings&quot; of the first SFrame).\r\n\r\nWith the minimum reproducible example given below, the attached graphic shows the results on Windows and Linux.  For Windows, both SFrames have an icon displayed, in this case the letter &quot;A&quot;.  These results are produced on Windows regardless of whether the call to setDefaultLookAndFeelDecorated is made or not.  For Linux, the first SFrame is displayed with no icon, the second SFrame with an icon.  If the call to setDefaultLookAndFeelDecorated is not made then neither SFrame has the icon on Linux.\r\n\r\nGraphic: [click here][1]\r\n\r\n```\r\nimport javax.swing.*;\r\n\r\nclass SFrame extends JFrame {\r\n\r\n     private static final ImageIcon image = new ImageIcon(&quot;icon.png&quot;);\r\n\r\n     public SFrame() {\r\n\r\n        setDefaultLookAndFeelDecorated(true);\r\n        \r\n        if (image != null)\r\n\t    {\r\n\t     setIconImage(image.getImage());\r\n        }\r\n\r\n     }\r\n}\r\n\r\n\r\nclass ChildFrame extends SFrame {\r\n   \r\n     public ChildFrame() {\r\n         \r\n        // Dimensions set so two windows do not overlap\r\n        setBounds(350, 100, 200, 400);\r\n        setTitle(&quot;CHILD&quot;);\r\n                \r\n    }\r\n}\r\n\r\npublic class MinimumExample extends SFrame {\r\n\r\n    private SFrame childFrame_;\r\n  \r\n    public MinimumExample() {\r\n        \r\n        // Dimensions set so two windows do not overlap\r\n        this.setBounds(100, 100, 200, 400);\r\n        this.setTitle(&quot;PARENT&quot;);\r\n\t    this.setVisible(true);\r\n      \r\n        childFrame_ = new ChildFrame();\r\n        childFrame_.setVisible(true);\r\n   }\r\n\r\n    public static void main(String args[]) {\r\n\r\n        new MinimumExample();\r\n    }\r\n\r\n}\r\n\r\n\r\n```\r\n\r\n\r\nCould somebody point me in the right direction for a fix?  Thanks\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/dirvV.png","title":"JFrame icon renders properly on Windows but not on particular Linux distribution","body":"<p>I could use some help regarding the setting of an icon on a JFrame.  I have a Java 8 application that is typically used in both Windows and Linux environments.  The application is composed of a number of &quot;SFrames&quot;, which are a custom class that extends a JFrame and includes the setting of a custom icon for the frame.  There is one main &quot;SFrame&quot; for the application, and then other &quot;SFrames&quot; are brought up as needed depending on the actions of the user.  All &quot;SFrames&quot; have the same icon displayed.</p>\n<p>In the past when running this application on both Windows and Linux the correct icon appeared on all &quot;SFrames&quot; (the main application &quot;SFrame&quot;, and then all subsequent frames that were brought up).  The execution environment for Linux was recently updated from an older version of Fedora (with the Mate desktop environment) to a recent version of Red Hat Enterprise Linux (also with the Mate desktop environment).  In this new Linux environment the icon was not appearing on any of the &quot;SFrames&quot;, either the main frame or any subsequent frames that appear.</p>\n<p>I did see this Stackoverflow entry (<a href=\"https://stackoverflow.com/questions/13979754/jframe-icon-not-displaying-in-ubuntu-12-04\">JFrame icon not displaying in Ubuntu 12.04</a>), and setting setDefaultLookAndFeelDecorated to &quot;true&quot; in the &quot;SFrame&quot; constructor does cause the icon to appear on subsequent SFrames that are brought up under Linux, but not the first frame.  The first SFrame continues to have no icon on it, and appears very similar to the default appearance of other Mate windows.  Later experimentation showed that it is always the first SFrame that is left at the default appearance with no icon, regardless of whether subsequent SFrames are called from the first SFrame (i.e., subsequent SFrames are like &quot;children&quot; of the first SFrame, as shown in the example below), or whether multiple SFrames are called sequentially (i.e., subsequent SFrames are like &quot;younger siblings&quot; of the first SFrame).</p>\n<p>With the minimum reproducible example given below, the attached graphic shows the results on Windows and Linux.  For Windows, both SFrames have an icon displayed, in this case the letter &quot;A&quot;.  These results are produced on Windows regardless of whether the call to setDefaultLookAndFeelDecorated is made or not.  For Linux, the first SFrame is displayed with no icon, the second SFrame with an icon.  If the call to setDefaultLookAndFeelDecorated is not made then neither SFrame has the icon on Linux.</p>\n<p>Graphic: <a href=\"https://i.stack.imgur.com/dirvV.png\" rel=\"nofollow noreferrer\">click here</a></p>\n<pre><code>import javax.swing.*;\n\nclass SFrame extends JFrame {\n\n     private static final ImageIcon image = new ImageIcon(&quot;icon.png&quot;);\n\n     public SFrame() {\n\n        setDefaultLookAndFeelDecorated(true);\n        \n        if (image != null)\n        {\n         setIconImage(image.getImage());\n        }\n\n     }\n}\n\n\nclass ChildFrame extends SFrame {\n   \n     public ChildFrame() {\n         \n        // Dimensions set so two windows do not overlap\n        setBounds(350, 100, 200, 400);\n        setTitle(&quot;CHILD&quot;);\n                \n    }\n}\n\npublic class MinimumExample extends SFrame {\n\n    private SFrame childFrame_;\n  \n    public MinimumExample() {\n        \n        // Dimensions set so two windows do not overlap\n        this.setBounds(100, 100, 200, 400);\n        this.setTitle(&quot;PARENT&quot;);\n        this.setVisible(true);\n      \n        childFrame_ = new ChildFrame();\n        childFrame_.setVisible(true);\n   }\n\n    public static void main(String args[]) {\n\n        new MinimumExample();\n    }\n\n}\n\n\n</code></pre>\n<p>Could somebody point me in the right direction for a fix?  Thanks</p>\n"},{"tags":["java","javac","java-module","module-info","java-package"],"comments":[{"owner":{"account_id":362885,"reputation":37256,"user_id":706317,"accept_rate":70,"display_name":"ZhekaKozlov"},"score":0,"creation_date":1592056552,"post_id":62360613,"comment_id":110290567,"body_markdown":"Does `module-info.java` contain line `exports myPackage`? If yes, what is surprising that javac cannot find a nonexistent package?","body":"Does <code>module-info.java</code> contain line <code>exports myPackage</code>? If yes, what is surprising that javac cannot find a nonexistent package?"},{"owner":{"account_id":1657393,"reputation":1826,"user_id":1526545,"accept_rate":63,"display_name":"Joseph_Marzbani"},"score":0,"creation_date":1592056739,"post_id":62360613,"comment_id":110290614,"body_markdown":"The package is right there in the current directory with Main.class in it (Next to module-info.java itself)","body":"The package is right there in the current directory with Main.class in it (Next to module-info.java itself)"},{"owner":{"account_id":362885,"reputation":37256,"user_id":706317,"accept_rate":70,"display_name":"ZhekaKozlov"},"score":0,"creation_date":1592057031,"post_id":62360613,"comment_id":110290682,"body_markdown":"It&#39;s there but if you run `javac module-info.java`, javac only knows about module-info and nothing else.","body":"It&#39;s there but if you run <code>javac module-info.java</code>, javac only knows about module-info and nothing else."},{"owner":{"account_id":1657393,"reputation":1826,"user_id":1526545,"accept_rate":63,"display_name":"Joseph_Marzbani"},"score":0,"creation_date":1592057284,"post_id":62360613,"comment_id":110290765,"body_markdown":"So, it doesn&#39;t matter which of the *.java files inside the package gets compiled as long as it informs the javac that such a package exist. Is that right? If yes, what if I want to export a package of which I don&#39;t have source codes?","body":"So, it doesn&#39;t matter which of the *.java files inside the package gets compiled as long as it informs the javac that such a package exist. Is that right? If yes, what if I want to export a package of which I don&#39;t have source codes?"}],"answers":[{"tags":[],"owner":{"account_id":5640884,"reputation":1954,"user_id":4465539,"accept_rate":33,"display_name":"deduper"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1602021253,"creation_date":1602021253,"answer_id":64234325,"question_id":62360613,"body_markdown":"***TL;DR*** — A *module-info.java* file is not designed to be a stand-alone thing. It is designed to be part of a multi-source file compilation unit. A unit which includes the module descriptor, ***plus*** *at least* one other ***source*** file.\r\n\r\n----\r\n\r\n***The long-winded version***\r\n\r\n&gt; „*…there&#39;s another folder called `myPackage` in which my `Main.class` exists…*“\r\n\r\nI&#39;m gonna assume you meant to type *`Main.java`* and that *`Main.class`* is an oversight since… \r\n\r\n1. You don&#39;t mention anything about it being an already-compiled byte code file. \r\n2. I can&#39;t think of a reason why anybody would *intentionally* put a *.class* file in a source directory.\r\n\r\nI&#39;m also gonna assume — *although you didn&#39;t mention it at all in your question* — that you&#39;re intentionally following the convention recommended in the [*Project Jigsaw: Module System Quick-Start Guide*](https://openjdk.java.net/projects/jigsaw/quick-start)…\r\n\r\n&gt;&gt; „*…By convention, the source code for the module is in a directory that is the name of the module…*“ \r\n\r\nI&#39;ve established that compilation would succeed if your *`myModule`* module is just an empty *`module{}`* block. That is, if it doesn&#39;t declare that it *`exports myPackage`*.  So I&#39;m gonna also assume your *module-info.java*, like my experimental one, contains…\r\n\r\n```java\r\nmodule myModule { \r\n    exports myPackage;\r\n}\r\n```\r\n\r\nKeep in mind what the *`javac`* tool [*is designed to do*](https://docs.oracle.com/en/java/javase/15/docs/specs/man/javac.html#description)…\r\n\r\n&gt;&gt; ***Description***\r\n&gt;&gt; \r\n&gt;&gt; *The `javac` command reads ***source files*** that contain module, package and type declarations written in the Java programming language…*\r\n\r\nAlso consider the [*reliable configuration goal*](http://cr.openjdk.java.net/~mr/jigsaw/spec/) of the JPMS…\r\n\r\n&gt;&gt; *Reliable configuration, to replace the brittle, error-prone class-path mechanism with a means for program components to declare explicit dependences upon one another*\r\n&gt;&gt;\r\n\r\nIf I sign a contract to mow your lawn every Saturday but then never turn up, how reliable am I? Imagine if it were legal for *`javac`* to compile a module-info.java file for a module that *claimed* to export a package, but that package had no classes in it. How *reliable* is such a module? \r\n\r\nIf my build downloaded your hypothetical *`myModule`* artifact from Maven Central, I could have an *`import myPackage.*`* in my class only to find there&#39;s nothing in it. What use is a package with nothing in it?\r\n\r\n\r\n&gt; „*The problem is when I want to compile my module-info.java with the following command:*“\r\n&gt;\r\n&gt; ```bash\r\n&gt; javac module-info.java\r\n&gt; ```\r\n\r\nThe clue to the mystery is the fact that the above command results in the same error when the *`myPackage`* directory contains legal source code.\r\n\r\nThe error message isn&#39;t telling you that the ***file system directory*** is empty. It&#39;s telling you that the ***package*** that you claim the module exports is empty. Empty as in: ***The compiler doesn&#39;t know anything about source code you never pass to it as part of a compilation unit***.\r\n\r\n&gt; „*…the error disappears. I can&#39;t understand why this should happen?…*“\r\n\r\nBy executing: *`javac module-info.java myPackage/Main.java`*, you&#39;re composing a compilation unit made up of the things the module declares it exports. Which is [*the way the JPMS documentation*](https://openjdk.java.net/projects/jigsaw/quick-start#greetings) specifies the system is *expected to be* used…\r\n\r\n```bash\r\n$ javac -d mods/com.greetings \\\r\n        src/com.greetings/module-info.java \\\r\n        src/com.greetings/com/greetings/Main.java\r\n```\r\n\r\nSo typos notwithstanding, the cause of the error you report is pretty simple: ***Compiling a module that doesn&#39;t contain any source files is not only pointless, as far as the compiler is concerned it is a malformed module. Therefore, it&#39;s illegal.*** ","title":"module-info not compiled unless package classes are compiled with the same command","body":"<p><em><strong>TL;DR</strong></em> — A <em>module-info.java</em> file is not designed to be a stand-alone thing. It is designed to be part of a multi-source file compilation unit. A unit which includes the module descriptor, <em><strong>plus</strong></em> <em>at least</em> one other <em><strong>source</strong></em> file.</p>\n<hr />\n<p><em><strong>The long-winded version</strong></em></p>\n<blockquote>\n<p>„<em>…there's another folder called <code>myPackage</code> in which my <code>Main.class</code> exists…</em>“</p>\n</blockquote>\n<p>I'm gonna assume you meant to type <em><code>Main.java</code></em> and that <em><code>Main.class</code></em> is an oversight since…</p>\n<ol>\n<li>You don't mention anything about it being an already-compiled byte code file.</li>\n<li>I can't think of a reason why anybody would <em>intentionally</em> put a <em>.class</em> file in a source directory.</li>\n</ol>\n<p>I'm also gonna assume — <em>although you didn't mention it at all in your question</em> — that you're intentionally following the convention recommended in the <a href=\"https://openjdk.java.net/projects/jigsaw/quick-start\" rel=\"nofollow noreferrer\"><em>Project Jigsaw: Module System Quick-Start Guide</em></a>…</p>\n<blockquote>\n<blockquote>\n<p>„<em>…By convention, the source code for the module is in a directory that is the name of the module…</em>“</p>\n</blockquote>\n</blockquote>\n<p>I've established that compilation would succeed if your <em><code>myModule</code></em> module is just an empty <em><code>module{}</code></em> block. That is, if it doesn't declare that it <em><code>exports myPackage</code></em>.  So I'm gonna also assume your <em>module-info.java</em>, like my experimental one, contains…</p>\n<pre class=\"lang-java prettyprint-override\"><code>module myModule { \n    exports myPackage;\n}\n</code></pre>\n<p>Keep in mind what the <em><code>javac</code></em> tool <a href=\"https://docs.oracle.com/en/java/javase/15/docs/specs/man/javac.html#description\" rel=\"nofollow noreferrer\"><em>is designed to do</em></a>…</p>\n<blockquote>\n<blockquote>\n<p><em><strong>Description</strong></em></p>\n<p><em>The <code>javac</code> command reads <em><strong>source files</strong></em> that contain module, package and type declarations written in the Java programming language…</em></p>\n</blockquote>\n</blockquote>\n<p>Also consider the <a href=\"http://cr.openjdk.java.net/%7Emr/jigsaw/spec/\" rel=\"nofollow noreferrer\"><em>reliable configuration goal</em></a> of the JPMS…</p>\n<blockquote>\n<blockquote>\n<p><em>Reliable configuration, to replace the brittle, error-prone class-path mechanism with a means for program components to declare explicit dependences upon one another</em></p>\n</blockquote>\n</blockquote>\n<p>If I sign a contract to mow your lawn every Saturday but then never turn up, how reliable am I? Imagine if it were legal for <em><code>javac</code></em> to compile a module-info.java file for a module that <em>claimed</em> to export a package, but that package had no classes in it. How <em>reliable</em> is such a module?</p>\n<p>If my build downloaded your hypothetical <em><code>myModule</code></em> artifact from Maven Central, I could have an <em><code>import myPackage.*</code></em> in my class only to find there's nothing in it. What use is a package with nothing in it?</p>\n<blockquote>\n<p>„<em>The problem is when I want to compile my module-info.java with the following command:</em>“</p>\n<pre class=\"lang-sh prettyprint-override\"><code>javac module-info.java\n</code></pre>\n</blockquote>\n<p>The clue to the mystery is the fact that the above command results in the same error when the <em><code>myPackage</code></em> directory contains legal source code.</p>\n<p>The error message isn't telling you that the <em><strong>file system directory</strong></em> is empty. It's telling you that the <em><strong>package</strong></em> that you claim the module exports is empty. Empty as in: <em><strong>The compiler doesn't know anything about source code you never pass to it as part of a compilation unit</strong></em>.</p>\n<blockquote>\n<p>„<em>…the error disappears. I can't understand why this should happen?…</em>“</p>\n</blockquote>\n<p>By executing: <em><code>javac module-info.java myPackage/Main.java</code></em>, you're composing a compilation unit made up of the things the module declares it exports. Which is <a href=\"https://openjdk.java.net/projects/jigsaw/quick-start#greetings\" rel=\"nofollow noreferrer\"><em>the way the JPMS documentation</em></a> specifies the system is <em>expected to be</em> used…</p>\n<pre class=\"lang-sh prettyprint-override\"><code>$ javac -d mods/com.greetings \\\n        src/com.greetings/module-info.java \\\n        src/com.greetings/com/greetings/Main.java\n</code></pre>\n<p>So typos notwithstanding, the cause of the error you report is pretty simple: <em><strong>Compiling a module that doesn't contain any source files is not only pointless, as far as the compiler is concerned it is a malformed module. Therefore, it's illegal.</strong></em></p>\n"},{"tags":[],"owner":{"account_id":15697684,"reputation":164,"user_id":11326662,"display_name":"Liam Bloom"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689046598,"creation_date":1689046598,"answer_id":76658568,"question_id":62360613,"body_markdown":"Okay, so today I ran into this exact issue, and I had the same problem as you: I didn&#39;t have the source code. However, I discovered that `javac` doesn&#39;t require you to have the actual source code, just *a* java source file in each exported package.\r\n\r\nMy solution was to create a powershell script that makes a copy of the file hierarchy, adds dummy java files to each directory whose name is a valid java package name, and compiles it\r\n\r\n``` sh\r\n# Initial folder heirarchy:\r\n# \r\n# --  staging\r\n# --  myModule\r\n#     --  myPackage\r\n#         --  Main.class\r\n#     --  module-info.java\r\n\r\n# copy folder hierarchy (without files) from myModule to staging\r\nxcopy myModule\\* staging /t /e\r\n\r\n# don&#39;t forget to copy the module-info.java file\r\nCopy-Item myModule/module-info.java staging\r\n\r\n# Get an array of all directories in staging\r\n$Packages = Get-ChildItem staging -Directory -Recurse\r\n\r\n# Iterate over those directories\r\n:packageLoop foreach ($Package in $Packages) {\r\n    # Each dummy file needs a package declaration at the top, so this generates the package name\r\n    $PackageName = &#39;&#39;\r\n    $PackageDir = $Package\r\n    while ($PackageDir.FullName -ne (Get-Item staging).FullName) {\r\n        if (-Not ($PackageDir.Name | Select-String -Pattern &#39;^[a-z$_][a-z$_0-9]*$&#39; -Quiet)) {\r\n            # skips over this directory if package name is invalid\r\n            continue packageLoop\r\n        }\r\n\r\n        $PackageName = &quot;$($PackageDir.Name).$PackageName&quot;\r\n        $PackageDir = $PackageDir.Parent\r\n    }\r\n\r\n    $PackageName = $PackageName.Substring(0, $PackageName.Length - 1)\r\n\r\n    # Creates the dummy file Foo.java\r\n    New-Item &quot;$($Package.FullName)/Foo.java&quot; -ItemType File -Value &quot;package $PackageName ; public class Foo { }&quot; | Out-Null\r\n}\r\n\r\n# Compiles entire staging directory, including module-info.java\r\njavac -d staging (Get-ChildItem staging\\* -Recurse -File | Select-Object -ExpandProperty FullName)\r\n\r\n# module-info.class can now be found at staging/module-info.class\r\n```","title":"module-info not compiled unless package classes are compiled with the same command","body":"<p>Okay, so today I ran into this exact issue, and I had the same problem as you: I didn't have the source code. However, I discovered that <code>javac</code> doesn't require you to have the actual source code, just <em>a</em> java source file in each exported package.</p>\n<p>My solution was to create a powershell script that makes a copy of the file hierarchy, adds dummy java files to each directory whose name is a valid java package name, and compiles it</p>\n<pre class=\"lang-bash prettyprint-override\"><code># Initial folder heirarchy:\n# \n# --  staging\n# --  myModule\n#     --  myPackage\n#         --  Main.class\n#     --  module-info.java\n\n# copy folder hierarchy (without files) from myModule to staging\nxcopy myModule\\* staging /t /e\n\n# don't forget to copy the module-info.java file\nCopy-Item myModule/module-info.java staging\n\n# Get an array of all directories in staging\n$Packages = Get-ChildItem staging -Directory -Recurse\n\n# Iterate over those directories\n:packageLoop foreach ($Package in $Packages) {\n    # Each dummy file needs a package declaration at the top, so this generates the package name\n    $PackageName = ''\n    $PackageDir = $Package\n    while ($PackageDir.FullName -ne (Get-Item staging).FullName) {\n        if (-Not ($PackageDir.Name | Select-String -Pattern '^[a-z$_][a-z$_0-9]*$' -Quiet)) {\n            # skips over this directory if package name is invalid\n            continue packageLoop\n        }\n\n        $PackageName = &quot;$($PackageDir.Name).$PackageName&quot;\n        $PackageDir = $PackageDir.Parent\n    }\n\n    $PackageName = $PackageName.Substring(0, $PackageName.Length - 1)\n\n    # Creates the dummy file Foo.java\n    New-Item &quot;$($Package.FullName)/Foo.java&quot; -ItemType File -Value &quot;package $PackageName ; public class Foo { }&quot; | Out-Null\n}\n\n# Compiles entire staging directory, including module-info.java\njavac -d staging (Get-ChildItem staging\\* -Recurse -File | Select-Object -ExpandProperty FullName)\n\n# module-info.class can now be found at staging/module-info.class\n</code></pre>\n"}],"owner":{"account_id":1657393,"reputation":1826,"user_id":1526545,"accept_rate":63,"display_name":"Joseph_Marzbani"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2111,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1689046598,"creation_date":1592055905,"question_id":62360613,"body_markdown":"I&#39;ve got a folder called `myModule`. Inside it, there&#39;s another folder called `myPackage` in which my `Main.class` exists.\r\n\r\nNext to `myPackage` I have my `module-info.java` which I&#39;d like to compile. First take a look at the folders hierarchy:\r\n\r\n    --  myModule\r\n        --  myPackage\r\n            --  Main.class\r\n        --  module-info.java\r\n\r\nThe problem is when I want to compile my `module-info.java` with the following command:\r\n\r\n    javac module-info.java\r\n\r\nI get the following error:\r\n\r\n    package is empty or does not exist: myPackage\r\n\r\nBut, when I put Main.java inside myPackage and then compile both files with the same command:\r\n\r\n    javac module-info.java myPackage/Main.java\r\n\r\nthe error disappears. I can&#39;t understand why this should happen?","title":"module-info not compiled unless package classes are compiled with the same command","body":"<p>I've got a folder called <code>myModule</code>. Inside it, there's another folder called <code>myPackage</code> in which my <code>Main.class</code> exists.</p>\n\n<p>Next to <code>myPackage</code> I have my <code>module-info.java</code> which I'd like to compile. First take a look at the folders hierarchy:</p>\n\n<pre><code>--  myModule\n    --  myPackage\n        --  Main.class\n    --  module-info.java\n</code></pre>\n\n<p>The problem is when I want to compile my <code>module-info.java</code> with the following command:</p>\n\n<pre><code>javac module-info.java\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>package is empty or does not exist: myPackage\n</code></pre>\n\n<p>But, when I put Main.java inside myPackage and then compile both files with the same command:</p>\n\n<pre><code>javac module-info.java myPackage/Main.java\n</code></pre>\n\n<p>the error disappears. I can't understand why this should happen?</p>\n"},{"tags":["java","multithreading","volatile","java-memory-model","happens-before"],"comments":[{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1658499251,"post_id":73080402,"comment_id":129073725,"body_markdown":"Did you try reversing the order of running2 and running in your loop condition? Also, can you explain *why* 17.4.5 says that auxillary variables, `running` in this case, are also updated when *any* volatile variable is read? I think a synchronized block would cause that.","body":"Did you try reversing the order of running2 and running in your loop condition? Also, can you explain <i>why</i> 17.4.5 says that auxillary variables, <code>running</code> in this case, are also updated when <i>any</i> volatile variable is read? I think a synchronized block would cause that."},{"owner":{"account_id":4808299,"reputation":1399,"user_id":3882565,"accept_rate":81,"display_name":"stonar96"},"score":0,"creation_date":1658499695,"post_id":73080402,"comment_id":129073947,"body_markdown":"@matt reversing the order of the variables entirely misses the purpose of the question, but the answer is that no happens-before relationship occurs because the `volatile` field isn&#39;t read. And yes, reading any `volatile` field ensures a happens-before relationship for all changes that happened before due to the example in the linked paragraph: https://docs.oracle.com/javase/specs/jls/se8/html/jls-8.html#jls-8.3.1.4","body":"@matt reversing the order of the variables entirely misses the purpose of the question, but the answer is that no happens-before relationship occurs because the <code>volatile</code> field isn&#39;t read. And yes, reading any <code>volatile</code> field ensures a happens-before relationship for all changes that happened before due to the example in the linked paragraph: <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-8.html#jls-8.3.1.4\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/specs/jls/se8/html/&hellip;</a>"},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1658499875,"post_id":73080402,"comment_id":129074015,"body_markdown":"I think you&#39;re drawing the wrong conclussion. If you have `while( running2 || running )` then &quot;running&quot; never gets read because &quot;||&quot; is a short circuit operator. Therefore it never gets optimized out. You set running2 to false, and running2 is volatile so it has to be updated (happens-before) *then* `running` gets read for the first time and the loop ends.","body":"I think you&#39;re drawing the wrong conclussion. If you have <code>while( running2 || running )</code> then &quot;running&quot; never gets read because &quot;||&quot; is a short circuit operator. Therefore it never gets optimized out. You set running2 to false, and running2 is volatile so it has to be updated (happens-before) <i>then</i> <code>running</code> gets read for the first time and the loop ends."},{"owner":{"account_id":4808299,"reputation":1399,"user_id":3882565,"accept_rate":81,"display_name":"stonar96"},"score":0,"creation_date":1658500571,"post_id":73080402,"comment_id":129074266,"body_markdown":"@matt sorry I linked the wrong example, alternatively see this https://stackoverflow.com/a/17108892/3882565 an many other answers on stackoverflow.","body":"@matt sorry I linked the wrong example, alternatively see this <a href=\"https://stackoverflow.com/a/17108892/3882565\">stackoverflow.com/a/17108892/3882565</a> an many other answers on stackoverflow."},{"owner":{"account_id":4808299,"reputation":1399,"user_id":3882565,"accept_rate":81,"display_name":"stonar96"},"score":0,"creation_date":1658500802,"post_id":73080402,"comment_id":129074356,"body_markdown":"@matt &quot;I think you&#39;re drawing the wrong conclussion. ...&quot; No, what you are saying is exactly what I want to show with this example, plus the fact that `running` is read correctly as `false` (due to the happens-before relationship) as soon as it&#39;s actually read.","body":"@matt &quot;I think you&#39;re drawing the wrong conclussion. ...&quot; No, what you are saying is exactly what I want to show with this example, plus the fact that <code>running</code> is read correctly as <code>false</code> (due to the happens-before relationship) as soon as it&#39;s actually read."},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1658501832,"post_id":73080402,"comment_id":129074759,"body_markdown":"The answer you link there is directly contradicted in the JLS you link. &quot;Thread 1 writes to s happens before Thread 1 writes to b (program order rule)&quot; The JLS says that if nothing is affected it is ok to re-order that write.","body":"The answer you link there is directly contradicted in the JLS you link. &quot;Thread 1 writes to s happens before Thread 1 writes to b (program order rule)&quot; The JLS says that if nothing is affected it is ok to re-order that write."},{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":1,"creation_date":1658502298,"post_id":73080402,"comment_id":129074912,"body_markdown":"@stonar96 what platform are you on? I can&#39;t reproduce third case on MacOS x86/Java 17, moreover, `running2 = false` is not required.","body":"@stonar96 what platform are you on? I can&#39;t reproduce third case on MacOS x86/Java 17, moreover, <code>running2 = false</code> is not required."},{"owner":{"account_id":4808299,"reputation":1399,"user_id":3882565,"accept_rate":81,"display_name":"stonar96"},"score":0,"creation_date":1658502640,"post_id":73080402,"comment_id":129075025,"body_markdown":"@matt &quot;To show what you want to show, ...&quot; But that&#39;s not what I want to show. What you are saying is correct. &quot;Then when you set `running` to false, it will not stop the loop. ...&quot; Yes, but for two reasons actually: 1) because `running2` is still `true` and 2) because the thread isn&#39;t guaranteed to see `running` as `false`","body":"@matt &quot;To show what you want to show, ...&quot; But that&#39;s not what I want to show. What you are saying is correct. &quot;Then when you set <code>running</code> to false, it will not stop the loop. ...&quot; Yes, but for two reasons actually: 1) because <code>running2</code> is still <code>true</code> and 2) because the thread isn&#39;t guaranteed to see <code>running</code> as <code>false</code>"},{"owner":{"account_id":4808299,"reputation":1399,"user_id":3882565,"accept_rate":81,"display_name":"stonar96"},"score":0,"creation_date":1658509736,"post_id":73080402,"comment_id":129077545,"body_markdown":"@AndreyB.Panfilov I&#39;m using the Eclipse JDT core compiler with compiler compliance level 1.8 and execution environment JavaSE-1.8 (jdk-17.0.1.12-hotspot) on Windows 10 64 bit to test this. The write `running2 = false;` is required afaik to ensure a happens-before relationship.","body":"@AndreyB.Panfilov I&#39;m using the Eclipse JDT core compiler with compiler compliance level 1.8 and execution environment JavaSE-1.8 (jdk-17.0.1.12-hotspot) on Windows 10 64 bit to test this. The write <code>running2 = false;</code> is required afaik to ensure a happens-before relationship."},{"owner":{"account_id":78868,"reputation":336965,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"score":1,"creation_date":1658509859,"post_id":73080402,"comment_id":129077586,"body_markdown":"So you&#39;re hoping that reading a `volatile` will act as a compile-time memory barrier (like GNU C `asm(&quot;&quot; ::: &quot;memory&quot;)`) and force the JVM to make asm that re-reads the non-volatile as well.  (Because that happens after a load that might have synced-with.)  Yeah, this sounds reasonable, if the compiler can&#39;t optimize away the volatile read even though its value isn&#39;t needed (only controlling an empty if).  So basically the question is whether the JLS allows removing such loads, removing the only thing that could be syncing with another thread.","body":"So you&#39;re hoping that reading a <code>volatile</code> will act as a compile-time memory barrier (like GNU C <code>asm(&quot;&quot; ::: &quot;memory&quot;)</code>) and force the JVM to make asm that re-reads the non-volatile as well.  (Because that happens after a load that might have synced-with.)  Yeah, this sounds reasonable, if the compiler can&#39;t optimize away the volatile read even though its value isn&#39;t needed (only controlling an empty if).  So basically the question is whether the JLS allows removing such loads, removing the only thing that could be syncing with another thread."},{"owner":{"account_id":4808299,"reputation":1399,"user_id":3882565,"accept_rate":81,"display_name":"stonar96"},"score":0,"creation_date":1658509986,"post_id":73080402,"comment_id":129077624,"body_markdown":"@PeterCordes yes exactly, and that&#39;s what I would expect to happen according to the JLS.","body":"@PeterCordes yes exactly, and that&#39;s what I would expect to happen according to the JLS."},{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":1,"creation_date":1658510623,"post_id":73080402,"comment_id":129077809,"body_markdown":"@stonar96 just checked, the same code compiled by OpenJDK and Eclipse JDT behaves differently, OpenJDK behaviour meets your expectations.","body":"@stonar96 just checked, the same code compiled by OpenJDK and Eclipse JDT behaves differently, OpenJDK behaviour meets your expectations."},{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1658514206,"post_id":73080402,"comment_id":129078895,"body_markdown":"@stonar96 `The write running2 = false; is required afaik to ensure a happens-before relationship` - where is the local value of `running` visible to `main` thread stored after exiting `#main` method (i.e. after `main` thread exited)? we have written it, we can&#39;t lose it.","body":"@stonar96 <code>The write running2 = false; is required afaik to ensure a happens-before relationship</code> - where is the local value of <code>running</code> visible to <code>main</code> thread stored after exiting <code>#main</code> method (i.e. after <code>main</code> thread exited)? we have written it, we can&#39;t lose it."},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1658518338,"post_id":73080402,"comment_id":129080091,"body_markdown":"In your example with the `if(running2) {}`, you claim Thread doesn&#39;t finish execution because the if statement is optimized out. Therefore there is never a volatile read, so the while loop coninues execution. You&#39;re claiming this is a bug because the volatile read should act like a memory barrier and both `running` and `running2` should be updated. I don&#39;t think this is a bug because I don&#39;t think `running` needs to be updated when there is an update to `running2`. It would help your question if you can show that with the JLS. Also, the if example exits fine for me, `openjdk version &quot;11.0.15&quot;`","body":"In your example with the <code>if(running2) {}</code>, you claim Thread doesn&#39;t finish execution because the if statement is optimized out. Therefore there is never a volatile read, so the while loop coninues execution. You&#39;re claiming this is a bug because the volatile read should act like a memory barrier and both <code>running</code> and <code>running2</code> should be updated. I don&#39;t think this is a bug because I don&#39;t think <code>running</code> needs to be updated when there is an update to <code>running2</code>. It would help your question if you can show that with the JLS. Also, the if example exits fine for me, <code>openjdk version &quot;11.0.15&quot;</code>"},{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":0,"creation_date":1658520470,"post_id":73080402,"comment_id":129080604,"body_markdown":"[This answer](https://stackoverflow.com/a/17109277/2067492) claims that JCIP says that all the changes should be visible. It would be good if there was a reference to the JLS though.","body":"<a href=\"https://stackoverflow.com/a/17109277/2067492\">This answer</a> claims that JCIP says that all the changes should be visible. It would be good if there was a reference to the JLS though."},{"owner":{"account_id":292208,"reputation":10665,"user_id":2245707,"accept_rate":17,"display_name":"pveentjer"},"score":1,"creation_date":1658677440,"post_id":73080402,"comment_id":129105133,"body_markdown":"@PeterCordes the compiler is allowed to remove a volatile load/store (or synchronized block) if the sole purpose is to act like a memory fence. For examples see https://github.com/openjdk/jcstress/blob/master/jcstress-samples/src/main/java/org/openjdk/jcstress/samples/jmm/advanced/AdvancedJMM_15_VolatilesAreNotFences.java. Therefor I&#39;m pretty sure that in the last example, the empty `if (running2) {}` could be optimized out.","body":"@PeterCordes the compiler is allowed to remove a volatile load/store (or synchronized block) if the sole purpose is to act like a memory fence. For examples see <a href=\"https://github.com/openjdk/jcstress/blob/master/jcstress-samples/src/main/java/org/openjdk/jcstress/samples/jmm/advanced/AdvancedJMM_15_VolatilesAreNotFences.java\" rel=\"nofollow noreferrer\">github.com/openjdk/jcstress/blob/master/jcstress-samples/src&zwnj;&#8203;/&hellip;</a>. Therefor I&#39;m pretty sure that in the last example, the empty <code>if (running2) {}</code> could be optimized out."},{"owner":{"account_id":78868,"reputation":336965,"user_id":224132,"accept_rate":83,"display_name":"Peter Cordes"},"score":0,"creation_date":1658678334,"post_id":73080402,"comment_id":129105344,"body_markdown":"@pveentjer: Interesting, that sounds like an answer, especially if you know where to look in the JLS to justify that.  (Hopefully it&#39;s not like user19607013&#39;s answer suggests, and based on allowing an infinite delay in visibility of a volatile write.)","body":"@pveentjer: Interesting, that sounds like an answer, especially if you know where to look in the JLS to justify that.  (Hopefully it&#39;s not like user19607013&#39;s answer suggests, and based on allowing an infinite delay in visibility of a volatile write.)"}],"answers":[{"tags":[],"owner":{"account_id":25877269,"reputation":19,"user_id":19607013,"display_name":"user19607013"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1658579958,"creation_date":1658579958,"answer_id":73090830,"question_id":73080402,"body_markdown":"&gt;  Is this a JVM bug, or does the JLS allow it to remove a volatile read when the value isn&#39;t needed?\r\n\r\nIt&#39;s neither.\r\n\r\nThis execution is valid according to the JLS.\r\n\r\nThe second thread must finish shortly after it reads `running2 == true`.  \r\nBut the JLS provides no guarantees about the time it takes for a write in one thread to become visible in another thread.  \r\nAs a result, your program execution is valid, because it corresponds to the case when the write `running2 = false` takes a very long time to propagate to another thread.\r\n\r\nBy the way on my java version (OpenJDK 64-Bit Server VM (build 17.0.3+7-suse-1.4-x8664, mixed mode)) the program finishes in about 1 second.  \r\nThis is also a valid execution — this corresponds to the case when the write `running2 = false` propagate to the second thread quicker.\r\n\r\nPS you mentioned &quot;memory barrier&quot;.  \r\nFor a memory barrier there typically exists some max time, after which it is guaranteed to propagate to other threads.  \r\nBut the JLS doesn&#39;t operate in terms of memory barriers, doesn&#39;t have to use them, and actually guarantees only [this](https://docs.oracle.com/javase/specs/jls/se17/html/jls-17.html#jls-17.4):\r\n&gt; An implementation is free to produce any code it likes, as long as all resulting executions of a program produce a result that can be predicted by the memory model.\r\n\r\nPSS If you want to see the real assembly code that the JVM produced for your program you can use [+PrintAssembly](https://wiki.openjdk.org/display/HotSpot/PrintAssembly).","title":"Does Java allow a volatile read to be optimized away if the value isn&#39;t needed, also removing the happens-before synchronization?","body":"<blockquote>\n<p>Is this a JVM bug, or does the JLS allow it to remove a volatile read when the value isn't needed?</p>\n</blockquote>\n<p>It's neither.</p>\n<p>This execution is valid according to the JLS.</p>\n<p>The second thread must finish shortly after it reads <code>running2 == true</code>.<br />\nBut the JLS provides no guarantees about the time it takes for a write in one thread to become visible in another thread.<br />\nAs a result, your program execution is valid, because it corresponds to the case when the write <code>running2 = false</code> takes a very long time to propagate to another thread.</p>\n<p>By the way on my java version (OpenJDK 64-Bit Server VM (build 17.0.3+7-suse-1.4-x8664, mixed mode)) the program finishes in about 1 second.<br />\nThis is also a valid execution — this corresponds to the case when the write <code>running2 = false</code> propagate to the second thread quicker.</p>\n<p>PS you mentioned &quot;memory barrier&quot;.<br />\nFor a memory barrier there typically exists some max time, after which it is guaranteed to propagate to other threads.<br />\nBut the JLS doesn't operate in terms of memory barriers, doesn't have to use them, and actually guarantees only <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-17.html#jls-17.4\" rel=\"nofollow noreferrer\">this</a>:</p>\n<blockquote>\n<p>An implementation is free to produce any code it likes, as long as all resulting executions of a program produce a result that can be predicted by the memory model.</p>\n</blockquote>\n<p>PSS If you want to see the real assembly code that the JVM produced for your program you can use <a href=\"https://wiki.openjdk.org/display/HotSpot/PrintAssembly\" rel=\"nofollow noreferrer\">+PrintAssembly</a>.</p>\n"},{"tags":[],"owner":{"account_id":25918640,"reputation":41,"user_id":19641690,"display_name":"qwerty"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1659056925,"creation_date":1659021760,"answer_id":73155300,"question_id":73080402,"body_markdown":"&gt;  ... **does the JLS allow it to remove a volatile read when the value isn&#39;t needed?** (It&#39;s only controlling an empty if body, so the program behaviour doesn&#39;t depend on the value read, only on creating a happens-before.)\r\n\r\nAccording to [17.4. Memory Model](https://docs.oracle.com/javase/specs/jls/se17/html/jls-17.html#jls-17.4) of the JLS:\r\n&gt; The memory model describes possible behaviors of a program. An implementation is free to produce any code it likes, as long as all resulting executions of a program produce a result that can be predicted by the memory model.\r\n\r\nSo the JLS permits literally anything in runtime as long as result of the execution is &quot;legal&quot;.\r\n\r\nBy &quot;result of the execution&quot; the JLS means all the external actions that the program performs: operations with files and network sockets, various system calls (e.g. reading current time), etc.  \r\nI believe that [17.4.9. Observable Behavior and Nonterminating Executions](https://docs.oracle.com/javase/specs/jls/se17/html/jls-17.html#jls-17.4.9) of the JLS is about that (or something like that).\r\n\r\nIn your example the only external action is sleeping for 1s, so your program can be &quot;optimized&quot; to:\r\n```java\r\n    public static void main(String[] args){\r\n        Thread.sleep(1000);\r\n    }\r\n```\r\n\r\nIf [the answer above](https://stackoverflow.com/a/73090830) is correct in that an infinite loop is also a legal execution, then, I guess, your program can be &quot;optimized&quot; to:\r\n```java\r\n    public static void main(String[] args){\r\n        while(true);\r\n    }\r\n```\r\n\r\n---\r\n\r\nOne more time: the runtime is allowed to do anything as long as it performs the same external actions as one of the legal executions allowed by the JLS.\r\n\r\nTo clarify things more, let&#39;s get legal executions for our example.\r\n\r\n**General Algorithm**\r\n\r\nThe general algorithm is described in [17.4. Memory Model](https://docs.oracle.com/javase/specs/jls/se17/html/jls-17.html#jls-17.4) of the JLS.\r\n\r\n&gt; The actions of each thread in isolation must behave as governed by the semantics of that thread, with the exception that the values seen by each read are determined by the memory model.\r\n\r\nSo we assume that actions in each thread are executed sequentially, one-by-one.  \r\nThe only difference from a single-threaded program is that for a variable accessed from multiple threads a read might return an &quot;unexpected&quot; value.\r\n\r\nThe rule to to get all possible values for a read is this:\r\n&gt; Informally, a read `r` is allowed to see the result of a write `w` if there is no happens-before ordering to prevent that read.\r\n\r\nIn other words, a read of some variable returns:\r\n- either the last write to than variable in `happens-before` order\r\n- or any write to than variable, that is not related to the read by `happens-before`\r\n\r\nNote that the algorithm doesn&#39;t allow to &quot;optimize out&quot; anything.\r\n\r\n**Legal Executions For The Example**\r\n\r\nNow let&#39;s apply the algorithm to our example to find legal executions.  \r\n(Note: for simplicity we&#39;ll omit cases like unexpected `Error` and termination of the program by the OS)\r\n\r\nThe main thread has no reads of shared variables, so it behaves just like a single-threaded program.  \r\nIt&#39;s actions:\r\n```java\r\nnew Thread(){...}.start();\r\nThread.sleep(1000);\r\nrunning = false;\r\nrunning2 = false;\r\n```\r\n\r\nThe second thread is a loop with 2 reads.  \r\nSo we get a sequence of actions:\r\n```java\r\nread(running == true)\r\nread(running2 == ?)\r\nread(running == true)\r\nread(running2 == ?)\r\n...\r\nread(running == false)\r\n```\r\nThe sequence ends as soon as a read of `running` returns `false`.\r\n\r\nWhat values can the reads return according to the JLS?  \r\nLet&#39;s first note that `running2` is volatile, which means that reads ands writes to it happen in a global order (it&#39;s called [synchronization order](https://docs.oracle.com/javase/specs/jls/se17/html/jls-17.html#jls-17.4.4)) and are visible to all threads in that order.  \r\nSo:\r\n* before the write `running2 = false` becomes visible to the second thread:\r\n  * `running2 == true`  \r\n    This is the initial write (the only visible write).\r\n  * `running == true` or `running == false`  \r\n    For every read of `running`:\r\n    * the initial write (`running = true`) `happens-before` the read\r\n    * the write `running = false` is not related by `happens-before` with the read\r\n\r\n    So each read `running == ?` can return any of the two writes randomly.  \r\n    ```java\r\n    Main Thread              Thread2                 \r\n                                                     \r\n    [...]                    [...]                   \r\n      ↓ (happens-before)       ↓ (happens-before)    \r\n    running = false;         running2 == true;       \r\n      ↓ (happens-before)       ↓ (happens-before)    \r\n    running2 = false;        running == true | false \r\n    ```\r\n* after the write `running2 = false` becomes visible to the second thread:\r\n  * `running2 == false`  \r\n    This is the latest visible write.\r\n  * `running == false`  \r\n    Because `running2 == false`  \r\n    =&gt; `running2 = false` `happens-before` `running2 == false`  \r\n    =&gt; transitively  `running = false` `happens-before` `running == false`\r\n    ```java\r\n    Main Thread              Thread2              \r\n                                                  \r\n    [...]                                         \r\n      ↓ (happens-before)                          \r\n    running = false;                              \r\n      ↓ (happens-before)     [...]                \r\n    running2 = false;          ↓ (happens-before) \r\n      └--------------------&gt; running2 == false;   \r\n          (happens-before)     ↓ (happens-before) \r\n                             running == false;    \r\n    ```\r\n    As a result, the second thread finishes when the write `running2 = false` becomes visible to it.\r\n\r\nTo sum up, all legal executions of the second thread:\r\n1. can start with this sequence:\r\n  ```java\r\n  read(running == true)\r\n  read(running2 == true)\r\n  [... repeat the fragment above ...]\r\n  ```\r\n2. end with:\r\n  * either:\r\n    ```java\r\n    ...\r\n    read(running2 == false)\r\n    read(running == false)\r\n    ```\r\n    This is the case when the thread sees `running2 = false` and then is guaranteed to see `running = false`.\r\n  * or with:\r\n    ```java\r\n    ...\r\n    read(running == false)\r\n    ```\r\n    This is the case when the thread doesn&#39;t see `running2 = false`, but the sees `running = false`.\r\n  * or never ends.  \r\n    This is the case when the thread sees neither `running2 = false` nor `running = false`.\r\n\r\nIf you can &quot;optimize out&quot; a volatile read and the result of the execution will be the same as the results of some legal executions described above, then this optimization is legal.\r\n\r\n---\r\n\r\nRegarding the [AdvancedJMM_15_VolatilesAreNotFences](https://github.com/openjdk/jcstress/blob/master/jcstress-samples/src/main/java/org/openjdk/jcstress/samples/jmm/advanced/AdvancedJMM_15_VolatilesAreNotFences.java) test mentioned in the comments.\r\n\r\nIt doesn&#39;t seem to me that this test demonstrates that the compiler is allowed to remove a volatile load/store if the value isn&#39;t used.\r\n\r\nIMO it shows that `volatile` is weaker than `UNSAFE.storeFence() + UNSAFE.loadFence()`.  \r\nBasically it&#39;s a demonstration of the [Roach Motel](https://shipilev.net/blog/2014/jmm-pragmatics/#_jmm_interpretation_roach_motel) optimization:  \r\n[![write can be reordered before release](https://i.stack.imgur.com/fv7gA.png)](https://shipilev.net/blog/2014/jmm-pragmatics/page-098.png)  \r\n[![read can be reordered after acquire](https://i.stack.imgur.com/peQuM.png)](https://shipilev.net/blog/2014/jmm-pragmatics/page-099.png)  \r\n[![read/write can be moved inside acquire+release blocks](https://i.stack.imgur.com/bLrvz.png)](https://shipilev.net/blog/2014/jmm-pragmatics/page-100.png)\r\n\r\n\r\n[AdvancedJMM_14_SynchronizedAreNotFences](https://github.com/openjdk/jcstress/blob/master/jcstress-samples/src/main/java/org/openjdk/jcstress/samples/jmm/advanced/AdvancedJMM_14_SynchronizedAreNotFences.java) is different because it uses `synchronized (new Object()) {}` — there are no shared variables and no `happens-before` relations.\r\n\r\n---\r\n\r\nP.S. @pveentjer [mentioned](https://stackoverflow.com/posts/comments/129105510) in the comments this:\r\n&gt; The non-normative section of the JVM does talk about visibility; so a change should become visible to other threads at some point.\r\n\r\nDoes anyone have a link and a quote to support that?  \r\nI cannot find it anywhere, but, as [noted](https://stackoverflow.com/posts/comments/129105344) by Peter Cordes, it would be really usefull to know that Java (or even only some JVMs) doesn&#39;t allow an infinite delay in visibility of a volatile write.","title":"Does Java allow a volatile read to be optimized away if the value isn&#39;t needed, also removing the happens-before synchronization?","body":"<blockquote>\n<p>... <strong>does the JLS allow it to remove a volatile read when the value isn't needed?</strong> (It's only controlling an empty if body, so the program behaviour doesn't depend on the value read, only on creating a happens-before.)</p>\n</blockquote>\n<p>According to <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-17.html#jls-17.4\" rel=\"nofollow noreferrer\">17.4. Memory Model</a> of the JLS:</p>\n<blockquote>\n<p>The memory model describes possible behaviors of a program. An implementation is free to produce any code it likes, as long as all resulting executions of a program produce a result that can be predicted by the memory model.</p>\n</blockquote>\n<p>So the JLS permits literally anything in runtime as long as result of the execution is &quot;legal&quot;.</p>\n<p>By &quot;result of the execution&quot; the JLS means all the external actions that the program performs: operations with files and network sockets, various system calls (e.g. reading current time), etc.<br />\nI believe that <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-17.html#jls-17.4.9\" rel=\"nofollow noreferrer\">17.4.9. Observable Behavior and Nonterminating Executions</a> of the JLS is about that (or something like that).</p>\n<p>In your example the only external action is sleeping for 1s, so your program can be &quot;optimized&quot; to:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static void main(String[] args){\n        Thread.sleep(1000);\n    }\n</code></pre>\n<p>If <a href=\"https://stackoverflow.com/a/73090830\">the answer above</a> is correct in that an infinite loop is also a legal execution, then, I guess, your program can be &quot;optimized&quot; to:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static void main(String[] args){\n        while(true);\n    }\n</code></pre>\n<hr />\n<p>One more time: the runtime is allowed to do anything as long as it performs the same external actions as one of the legal executions allowed by the JLS.</p>\n<p>To clarify things more, let's get legal executions for our example.</p>\n<p><strong>General Algorithm</strong></p>\n<p>The general algorithm is described in <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-17.html#jls-17.4\" rel=\"nofollow noreferrer\">17.4. Memory Model</a> of the JLS.</p>\n<blockquote>\n<p>The actions of each thread in isolation must behave as governed by the semantics of that thread, with the exception that the values seen by each read are determined by the memory model.</p>\n</blockquote>\n<p>So we assume that actions in each thread are executed sequentially, one-by-one.<br />\nThe only difference from a single-threaded program is that for a variable accessed from multiple threads a read might return an &quot;unexpected&quot; value.</p>\n<p>The rule to to get all possible values for a read is this:</p>\n<blockquote>\n<p>Informally, a read <code>r</code> is allowed to see the result of a write <code>w</code> if there is no happens-before ordering to prevent that read.</p>\n</blockquote>\n<p>In other words, a read of some variable returns:</p>\n<ul>\n<li>either the last write to than variable in <code>happens-before</code> order</li>\n<li>or any write to than variable, that is not related to the read by <code>happens-before</code></li>\n</ul>\n<p>Note that the algorithm doesn't allow to &quot;optimize out&quot; anything.</p>\n<p><strong>Legal Executions For The Example</strong></p>\n<p>Now let's apply the algorithm to our example to find legal executions.<br />\n(Note: for simplicity we'll omit cases like unexpected <code>Error</code> and termination of the program by the OS)</p>\n<p>The main thread has no reads of shared variables, so it behaves just like a single-threaded program.<br />\nIt's actions:</p>\n<pre class=\"lang-java prettyprint-override\"><code>new Thread(){...}.start();\nThread.sleep(1000);\nrunning = false;\nrunning2 = false;\n</code></pre>\n<p>The second thread is a loop with 2 reads.<br />\nSo we get a sequence of actions:</p>\n<pre class=\"lang-java prettyprint-override\"><code>read(running == true)\nread(running2 == ?)\nread(running == true)\nread(running2 == ?)\n...\nread(running == false)\n</code></pre>\n<p>The sequence ends as soon as a read of <code>running</code> returns <code>false</code>.</p>\n<p>What values can the reads return according to the JLS?<br />\nLet's first note that <code>running2</code> is volatile, which means that reads ands writes to it happen in a global order (it's called <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-17.html#jls-17.4.4\" rel=\"nofollow noreferrer\">synchronization order</a>) and are visible to all threads in that order.<br />\nSo:</p>\n<ul>\n<li>before the write <code>running2 = false</code> becomes visible to the second thread:\n<ul>\n<li><p><code>running2 == true</code><br />\nThis is the initial write (the only visible write).</p>\n</li>\n<li><p><code>running == true</code> or <code>running == false</code><br />\nFor every read of <code>running</code>:</p>\n<ul>\n<li>the initial write (<code>running = true</code>) <code>happens-before</code> the read</li>\n<li>the write <code>running = false</code> is not related by <code>happens-before</code> with the read</li>\n</ul>\n<p>So each read <code>running == ?</code> can return any of the two writes randomly.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Main Thread              Thread2                 \n\n[...]                    [...]                   \n  ↓ (happens-before)       ↓ (happens-before)    \nrunning = false;         running2 == true;       \n  ↓ (happens-before)       ↓ (happens-before)    \nrunning2 = false;        running == true | false \n</code></pre>\n</li>\n</ul>\n</li>\n<li>after the write <code>running2 = false</code> becomes visible to the second thread:\n<ul>\n<li><code>running2 == false</code><br />\nThis is the latest visible write.</li>\n<li><code>running == false</code><br />\nBecause <code>running2 == false</code><br />\n=&gt; <code>running2 = false</code> <code>happens-before</code> <code>running2 == false</code><br />\n=&gt; transitively  <code>running = false</code> <code>happens-before</code> <code>running == false</code>\n<pre class=\"lang-java prettyprint-override\"><code>Main Thread              Thread2              \n\n[...]                                         \n  ↓ (happens-before)                          \nrunning = false;                              \n  ↓ (happens-before)     [...]                \nrunning2 = false;          ↓ (happens-before) \n  └--------------------&gt; running2 == false;   \n      (happens-before)     ↓ (happens-before) \n                         running == false;    \n</code></pre>\nAs a result, the second thread finishes when the write <code>running2 = false</code> becomes visible to it.</li>\n</ul>\n</li>\n</ul>\n<p>To sum up, all legal executions of the second thread:</p>\n<ol>\n<li>can start with this sequence:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>read(running == true)\nread(running2 == true)\n[... repeat the fragment above ...]\n</code></pre>\n<ol start=\"2\">\n<li>end with:</li>\n</ol>\n<ul>\n<li>either:\n<pre class=\"lang-java prettyprint-override\"><code>...\nread(running2 == false)\nread(running == false)\n</code></pre>\nThis is the case when the thread sees <code>running2 = false</code> and then is guaranteed to see <code>running = false</code>.</li>\n<li>or with:\n<pre class=\"lang-java prettyprint-override\"><code>...\nread(running == false)\n</code></pre>\nThis is the case when the thread doesn't see <code>running2 = false</code>, but the sees <code>running = false</code>.</li>\n<li>or never ends.<br />\nThis is the case when the thread sees neither <code>running2 = false</code> nor <code>running = false</code>.</li>\n</ul>\n<p>If you can &quot;optimize out&quot; a volatile read and the result of the execution will be the same as the results of some legal executions described above, then this optimization is legal.</p>\n<hr />\n<p>Regarding the <a href=\"https://github.com/openjdk/jcstress/blob/master/jcstress-samples/src/main/java/org/openjdk/jcstress/samples/jmm/advanced/AdvancedJMM_15_VolatilesAreNotFences.java\" rel=\"nofollow noreferrer\">AdvancedJMM_15_VolatilesAreNotFences</a> test mentioned in the comments.</p>\n<p>It doesn't seem to me that this test demonstrates that the compiler is allowed to remove a volatile load/store if the value isn't used.</p>\n<p>IMO it shows that <code>volatile</code> is weaker than <code>UNSAFE.storeFence() + UNSAFE.loadFence()</code>.<br />\nBasically it's a demonstration of the <a href=\"https://shipilev.net/blog/2014/jmm-pragmatics/#_jmm_interpretation_roach_motel\" rel=\"nofollow noreferrer\">Roach Motel</a> optimization:<br />\n<a href=\"https://shipilev.net/blog/2014/jmm-pragmatics/page-098.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fv7gA.png\" alt=\"write can be reordered before release\" /></a><br />\n<a href=\"https://shipilev.net/blog/2014/jmm-pragmatics/page-099.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/peQuM.png\" alt=\"read can be reordered after acquire\" /></a><br />\n<a href=\"https://shipilev.net/blog/2014/jmm-pragmatics/page-100.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bLrvz.png\" alt=\"read/write can be moved inside acquire+release blocks\" /></a></p>\n<p><a href=\"https://github.com/openjdk/jcstress/blob/master/jcstress-samples/src/main/java/org/openjdk/jcstress/samples/jmm/advanced/AdvancedJMM_14_SynchronizedAreNotFences.java\" rel=\"nofollow noreferrer\">AdvancedJMM_14_SynchronizedAreNotFences</a> is different because it uses <code>synchronized (new Object()) {}</code> — there are no shared variables and no <code>happens-before</code> relations.</p>\n<hr />\n<p>P.S. @pveentjer <a href=\"https://stackoverflow.com/posts/comments/129105510\">mentioned</a> in the comments this:</p>\n<blockquote>\n<p>The non-normative section of the JVM does talk about visibility; so a change should become visible to other threads at some point.</p>\n</blockquote>\n<p>Does anyone have a link and a quote to support that?<br />\nI cannot find it anywhere, but, as <a href=\"https://stackoverflow.com/posts/comments/129105344\">noted</a> by Peter Cordes, it would be really usefull to know that Java (or even only some JVMs) doesn't allow an infinite delay in visibility of a volatile write.</p>\n"},{"tags":[],"owner":{"account_id":28963478,"reputation":11,"user_id":22185495,"display_name":"user22185495"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1688651360,"creation_date":1688651360,"answer_id":76629555,"question_id":73080402,"body_markdown":"Both other answers say the main reason for the behavior in the question is the fact that the JMM doesn&#39;t guarantee a volatile write to become visible to other thread in some finite time.\r\n\r\nRecently I&#39;ve stumbled upon some additional information related to this topic and I would like to share it here because it might be useful to people interested in this topic.  \r\nThe information is from [&quot;The Java Memory Model&quot;](https://rsim.cs.uiuc.edu/Pubs/popl05.pdf) article written by the authors of the JMM:\r\n\r\n&gt; ```java\r\n&gt;                     Initially, v is volatile and v = false                 \r\n&gt; Thread 1                             | Thread 2                            \r\n&gt; -------------------------------------+-------------------------------------\r\n&gt; while (!v);                          | v = true;                           \r\n&gt; System.out.println(&quot;Thread 1 done&quot;); | System.out.println(&quot;Thread 2 done&quot;);\r\n&gt; ```\r\n&gt; If we observe print message by thread 2, Thread 1 must see write to v, print its message and terminate. But program can also be observed to hang and not print any messages.\r\n&gt; \r\n&gt; **Figure 9: Fairness Example**\r\n&gt; \r\n&gt; ...\r\n&gt; \r\n&gt; ... in Figure 9, if we observe the print message from Thread 2, and no threads other than Threads 1 and 2 are running, then Thread 1 must see the write to v, print its message and terminate. This prevents the compiler from hoisting the volatile read of v out of the loop in Thread 1.  \r\n&gt; The fact that Thread 1 must terminate if the print by Thread 2 is observed follows from the rules on observable actions. If the print by Thread 2 is in a set of observable actions _O_, then the write to v and all reads of v that see the value 0 must also be in _O_. Additionally, the program cannot perform an unbounded amount of additional actions that are not in _O_. Therefore, the only observable behavior of this program in which the program _hangs_ (runs forever without performing additional external actions) is one in which it performs no observable external actions other than hanging. This includes the print action.\r\n\r\nAs you can see in some cases (such as the example in Figure 9) volatile writes must become visible to other threads because of the rules in [17.4.9. Observable Behavior and Nonterminating Executions](https://docs.oracle.com/javase/specs/jls/se17/html/jls-17.html#jls-17.4.9).","title":"Does Java allow a volatile read to be optimized away if the value isn&#39;t needed, also removing the happens-before synchronization?","body":"<p>Both other answers say the main reason for the behavior in the question is the fact that the JMM doesn't guarantee a volatile write to become visible to other thread in some finite time.</p>\n<p>Recently I've stumbled upon some additional information related to this topic and I would like to share it here because it might be useful to people interested in this topic.<br />\nThe information is from <a href=\"https://rsim.cs.uiuc.edu/Pubs/popl05.pdf\" rel=\"nofollow noreferrer\">&quot;The Java Memory Model&quot;</a> article written by the authors of the JMM:</p>\n<blockquote>\n<pre class=\"lang-java prettyprint-override\"><code>                    Initially, v is volatile and v = false                 \nThread 1                             | Thread 2                            \n-------------------------------------+-------------------------------------\nwhile (!v);                          | v = true;                           \nSystem.out.println(&quot;Thread 1 done&quot;); | System.out.println(&quot;Thread 2 done&quot;);\n</code></pre>\n<p>If we observe print message by thread 2, Thread 1 must see write to v, print its message and terminate. But program can also be observed to hang and not print any messages.</p>\n<p><strong>Figure 9: Fairness Example</strong></p>\n<p>...</p>\n<p>... in Figure 9, if we observe the print message from Thread 2, and no threads other than Threads 1 and 2 are running, then Thread 1 must see the write to v, print its message and terminate. This prevents the compiler from hoisting the volatile read of v out of the loop in Thread 1.<br />\nThe fact that Thread 1 must terminate if the print by Thread 2 is observed follows from the rules on observable actions. If the print by Thread 2 is in a set of observable actions <em>O</em>, then the write to v and all reads of v that see the value 0 must also be in <em>O</em>. Additionally, the program cannot perform an unbounded amount of additional actions that are not in <em>O</em>. Therefore, the only observable behavior of this program in which the program <em>hangs</em> (runs forever without performing additional external actions) is one in which it performs no observable external actions other than hanging. This includes the print action.</p>\n</blockquote>\n<p>As you can see in some cases (such as the example in Figure 9) volatile writes must become visible to other threads because of the rules in <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-17.html#jls-17.4.9\" rel=\"nofollow noreferrer\">17.4.9. Observable Behavior and Nonterminating Executions</a>.</p>\n"}],"owner":{"account_id":4808299,"reputation":1399,"user_id":3882565,"accept_rate":81,"display_name":"stonar96"},"comment_count":17,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":508,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"answer_count":3,"score":16,"last_activity_date":1689046517,"creation_date":1658493051,"question_id":73080402,"body_markdown":"The following code sample shows a common way to demonstrate concurrency issues caused by a missing happens-before relationship.\r\n\r\n```java\r\nprivate static /*volatile*/ boolean running = true;\r\n    \r\npublic static void main(String[] args) throws InterruptedException {\r\n    new Thread() {\r\n        @Override\r\n        public void run() {\r\n            while (running) {\r\n                // Do nothing\r\n            }\r\n        }\r\n    }.start();\r\n    Thread.sleep(1000);\r\n    running = false;\r\n}\r\n```\r\n\r\nIf `running` is `volatile`, the program is guaranteed to terminate after approximately one second. However, if `running` isn&#39;t `volatile`, the program isn&#39;t guaranteed to terminate at all (since there is no happens-before relationship or guarantee for visibility of changes to the variable `running` in this case) and that&#39;s exactly what happens in my tests.\r\n\r\nAccording to [JLS 17.4.5][1] one can also enforce a happens-before relationship by writing to and reading another `volatile` variable `running2`, as shown in the following code sample.\r\n\r\n```java\r\nprivate static boolean running = true;\r\nprivate static volatile boolean running2 = true;\r\n    \r\npublic static void main(String[] args) throws InterruptedException {\r\n    new Thread() {\r\n        @Override\r\n        public void run() {\r\n            while (running2 || running) {\r\n                // Do nothing\r\n            }\r\n        }\r\n    }.start();\r\n    Thread.sleep(1000);\r\n    running = false;\r\n    running2 = false;\r\n}\r\n```\r\n\r\nThe `volatile` variable `running2` is read in each loop iteration and when it is read as `false` after approximately one second, it is also guaranteed that the variable `running` is read as `false` subsequently, due to the happens-before relationship. Thus the program is guaranteed to terminate after approximately one second and that&#39;s exactly what happens in my tests.\r\n\r\nHowever, when I put the read of the variable `running2` into an empty `if` statement inside the `while` loop, as shown in the following code sample, the program doesn&#39;t terminate in my tests.\r\n\r\n```java\r\nprivate static boolean running = true;\r\nprivate static volatile boolean running2 = true;\r\n    \r\npublic static void main(String[] args) throws InterruptedException {\r\n    new Thread() {\r\n        @Override\r\n        public void run() {\r\n            while (running) {\r\n                if (running2) {\r\n                    // Do nothing\r\n                }\r\n            }\r\n        }\r\n    }.start();\r\n    Thread.sleep(1000);\r\n    running = false;\r\n    running2 = false;\r\n}\r\n```\r\n\r\nThe idea here is that a `volatile` read of `running2` is like a compiler memory barrier: the compiler has to make asm that re-reads non-`volatile` variables because the read of `running2` might have synchronized-with a release operation in another thread. That would guarantee visibility of new values in non-volatile variables like `running`.\r\n\r\nBut my JVM seems not to be doing that.  **Is this a compiler or JVM bug, or does the JLS allow such optimizations where a `volatile` read is removed when the value isn&#39;t needed?** (It&#39;s only controlling an empty `if` body, so the program behaviour doesn&#39;t depend on the value being read, only on creating a happens-before relationship.)\r\n\r\nI thought the JLS applies to the source code and since `running2` is `volatile`, the effect of reading the variable shouldn&#39;t be allowed to be removed due to an optimization. Is this a compiler or JVM bug, or is there a specification, which actually allows such optimizations?\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/specs/jls/se8/html/jls-17.html#jls-17.4.5","title":"Does Java allow a volatile read to be optimized away if the value isn&#39;t needed, also removing the happens-before synchronization?","body":"<p>The following code sample shows a common way to demonstrate concurrency issues caused by a missing happens-before relationship.</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static /*volatile*/ boolean running = true;\n    \npublic static void main(String[] args) throws InterruptedException {\n    new Thread() {\n        @Override\n        public void run() {\n            while (running) {\n                // Do nothing\n            }\n        }\n    }.start();\n    Thread.sleep(1000);\n    running = false;\n}\n</code></pre>\n<p>If <code>running</code> is <code>volatile</code>, the program is guaranteed to terminate after approximately one second. However, if <code>running</code> isn't <code>volatile</code>, the program isn't guaranteed to terminate at all (since there is no happens-before relationship or guarantee for visibility of changes to the variable <code>running</code> in this case) and that's exactly what happens in my tests.</p>\n<p>According to <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-17.html#jls-17.4.5\" rel=\"nofollow noreferrer\">JLS 17.4.5</a> one can also enforce a happens-before relationship by writing to and reading another <code>volatile</code> variable <code>running2</code>, as shown in the following code sample.</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static boolean running = true;\nprivate static volatile boolean running2 = true;\n    \npublic static void main(String[] args) throws InterruptedException {\n    new Thread() {\n        @Override\n        public void run() {\n            while (running2 || running) {\n                // Do nothing\n            }\n        }\n    }.start();\n    Thread.sleep(1000);\n    running = false;\n    running2 = false;\n}\n</code></pre>\n<p>The <code>volatile</code> variable <code>running2</code> is read in each loop iteration and when it is read as <code>false</code> after approximately one second, it is also guaranteed that the variable <code>running</code> is read as <code>false</code> subsequently, due to the happens-before relationship. Thus the program is guaranteed to terminate after approximately one second and that's exactly what happens in my tests.</p>\n<p>However, when I put the read of the variable <code>running2</code> into an empty <code>if</code> statement inside the <code>while</code> loop, as shown in the following code sample, the program doesn't terminate in my tests.</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static boolean running = true;\nprivate static volatile boolean running2 = true;\n    \npublic static void main(String[] args) throws InterruptedException {\n    new Thread() {\n        @Override\n        public void run() {\n            while (running) {\n                if (running2) {\n                    // Do nothing\n                }\n            }\n        }\n    }.start();\n    Thread.sleep(1000);\n    running = false;\n    running2 = false;\n}\n</code></pre>\n<p>The idea here is that a <code>volatile</code> read of <code>running2</code> is like a compiler memory barrier: the compiler has to make asm that re-reads non-<code>volatile</code> variables because the read of <code>running2</code> might have synchronized-with a release operation in another thread. That would guarantee visibility of new values in non-volatile variables like <code>running</code>.</p>\n<p>But my JVM seems not to be doing that.  <strong>Is this a compiler or JVM bug, or does the JLS allow such optimizations where a <code>volatile</code> read is removed when the value isn't needed?</strong> (It's only controlling an empty <code>if</code> body, so the program behaviour doesn't depend on the value being read, only on creating a happens-before relationship.)</p>\n<p>I thought the JLS applies to the source code and since <code>running2</code> is <code>volatile</code>, the effect of reading the variable shouldn't be allowed to be removed due to an optimization. Is this a compiler or JVM bug, or is there a specification, which actually allows such optimizations?</p>\n"},{"tags":["java","kotlin","ktor","spigot"],"comments":[{"owner":{"account_id":16493669,"reputation":3050,"user_id":11916773,"display_name":"Lucan"},"score":0,"creation_date":1688943670,"post_id":76649797,"comment_id":135138615,"body_markdown":"You should edit your question to include all _relevant_ code as per [&quot;How do I ask a good question?&quot;](https://stackoverflow.com/help/how-to-ask)","body":"You should edit your question to include all <i>relevant</i> code as per <a href=\"https://stackoverflow.com/help/how-to-ask\">&quot;How do I ask a good question?&quot;</a>"},{"owner":{"account_id":28381167,"reputation":1,"user_id":21708417,"display_name":"Plag"},"score":0,"creation_date":1688950205,"post_id":76649797,"comment_id":135139117,"body_markdown":"I don&#39;t have enough characters to write done the entire JsonItemStack class","body":"I don&#39;t have enough characters to write done the entire JsonItemStack class"},{"owner":{"account_id":16493669,"reputation":3050,"user_id":11916773,"display_name":"Lucan"},"score":0,"creation_date":1688951403,"post_id":76649797,"comment_id":135139184,"body_markdown":"The whole class wouldn&#39;t be relevant code. You would only need to include the segment referred to in the error. It&#39;s for your benefit as it reduces the effort for someone to answer.","body":"The whole class wouldn&#39;t be relevant code. You would only need to include the segment referred to in the error. It&#39;s for your benefit as it reduces the effort for someone to answer."},{"owner":{"account_id":28381167,"reputation":1,"user_id":21708417,"display_name":"Plag"},"score":0,"creation_date":1689043016,"post_id":76649797,"comment_id":135153873,"body_markdown":"I modified it, is it good now?","body":"I modified it, is it good now?"}],"owner":{"account_id":28381167,"reputation":1,"user_id":21708417,"display_name":"Plag"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":100,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689045911,"creation_date":1688941813,"question_id":76649797,"body_markdown":"I&#39;m making a KTOR server that aims to allow the player to buy IG items with IG money. For this, I use the spigot API in 1.20. I also use this class, but I get the error below when I use the getItemMeta() method or in Kotlin .itemMeta. I&#39;d like to know how to get rid of this error so that the fromJson(string: String?):ItemStack? method works normally. Note that I also get a NullPointerException when I use the toJson(itemStack: ItemStack) method: String if needed [here][1] is my project that I put on GitHub. Thank you in advance for your time in finding a solution.\r\n\r\n\r\n```\r\njava.lang.NullPointerException: null\r\n    at org.bukkit.Bukkit.getItemFactory(Bukkit.java:1608)\r\n    at org.bukkit.inventory.ItemStack.getItemMeta(ItemStack.java:550)\r\n    at fr.plaglefleau.serialization.JsonItemStack.fromJson(JsonItemStack.kt:278)\r\n    at fr.plaglefleau.bdd_MySql.Gestion.updateInventory(Gestion.kt:815)\r\n    at fr.plaglefleau.plugins.RoutingKt$configureRouting$1$3$1$1$7.invokeSuspend(Routing.kt:588)\r\n    at kotlin.coroutines.jvm.internal.BaseContinuationImpl.resumeWith(ContinuationImpl.kt:33)\r\n    at kotlinx.coroutines.internal.DispatchedContinuation.resumeWith(DispatchedContinuation.kt:205)\r\n    at io.ktor.util.pipeline.SuspendFunctionGun.resumeRootWith(SuspendFunctionGun.kt:135)\r\n    at io.ktor.util.pipeline.SuspendFunctionGun.loop(SuspendFunctionGun.kt:109)\r\n    at io.ktor.util.pipeline.SuspendFunctionGun.access$loop(SuspendFunctionGun.kt:11)\r\n    at io.ktor.util.pipeline.SuspendFunctionGun$continuation$1.resumeWith(SuspendFunctionGun.kt:59)\r\n    at kotlin.coroutines.jvm.internal.BaseContinuationImpl.resumeWith(ContinuationImpl.kt:46)\r\n    at kotlinx.coroutines.DispatchedTask.run(DispatchedTask.kt:106)\r\n    at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:174)\r\n    at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:167)\r\n    at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)\r\n    at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:569)\r\n    at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\r\n    at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\r\n    at io.ktor.server.netty.EventLoopGroupProxy$Companion.create$lambda$1$lambda$0(NettyApplicationEngine.kt:296)\r\n    at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\r\n    at java.base/java.lang.Thread.run(Thread.java:834)\r\n2023-07-09 03:46:51.495 [eventLoopGroupProxy-4-1] TRACE io.ktor.server.sessions.Sessions - Sending session data for /api/client/updateInventory: connect\r\n2023-07-09 03:46:51.496 [eventLoopGroupProxy-4-1] TRACE i.k.s.p.c.ContentNegotiation - Skipping response body transformation from HttpStatusCode to OutgoingContent for the PUT /api/client/updateInventory request because the HttpStatusCode type is ignored. See [ContentNegotiationConfig::ignoreType].\r\n```\r\n\r\nGestion updateInventory:\r\n```kotlin\r\n    fun updateInventory(inventory: ArrayList&lt;ItemSlotPair&gt;, username: String) {\r\n        val laConnexion = Connexion(url, this.username, password)\r\n        var preparedStatement = laConnexion.getConnexion().prepareStatement(\r\n            &quot;SELECT id FROM user WHERE username = ?&quot;\r\n        )\r\n        preparedStatement.setString(1,username)\r\n        var rs = preparedStatement.executeQuery()\r\n        val userID = if(rs.next()) {\r\n            rs.getInt(&quot;id&quot;)\r\n        } else {\r\n            null\r\n        }\r\n        if(userID == null) {\r\n            return\r\n        }\r\n        for(i in 0..inventory.size) {\r\n            val item = JsonItemStack.fromJson(inventory[i].item) ?: return\r\n            addItemIfNotExist(item)\r\n            preparedStatement = laConnexion.getConnexion().prepareStatement(\r\n                &quot;UPDATE inventaire SET article_id = ?, quantit&#233; = ? WHERE slot_number = ? AND user_id = ?&quot;\r\n            )\r\n            preparedStatement.setInt(1,item.type.id)\r\n            preparedStatement.setInt(2,item.amount)\r\n            preparedStatement.setInt(3, inventory[i].slot)\r\n            preparedStatement.setInt(4,userID)\r\n            preparedStatement.executeUpdate()\r\n        }\r\n        laConnexion.fermerConnexion()\r\n    }\r\n```\r\n\r\nJsonItemStack.kt:218\r\n```kotlin\r\nval meta = itemStack.itemMeta\r\n```\r\nRouting.kt:put(&quot;updateInventory&quot;)\r\n```kotlin\r\nput(&quot;updateInventory&quot;) {\r\n    val receive = call.receive&lt;InventoryReceive&gt;()\r\n    gestion.updateInventory(receive.inventory, receive.username)\r\n    call.respond(HttpStatusCode.OK, &quot;Good&quot;)\r\n}\r\n```\r\n\r\nI think I have found where the problem may come from so to get the itemmeta of an itemStack we need the ItemFactory interfaces but to get the ItemFactory interface we need to do Server.getItemFactory() and here is my probleme i don&#39;t run it on a minecraft server so if I want the ItemMeta i need a minecraft serveur to run the spigot api so the solution to use a class that convert to json an itemStack don&#39;t work\r\nI will probably use a custom class to stock the data of my ItemStack.\r\n\r\n  [1]: https://github.com/LouisDufourd/Boutique","title":"Ktor server when i create an itemStack the ItemMeta is null","body":"<p>I'm making a KTOR server that aims to allow the player to buy IG items with IG money. For this, I use the spigot API in 1.20. I also use this class, but I get the error below when I use the getItemMeta() method or in Kotlin .itemMeta. I'd like to know how to get rid of this error so that the fromJson(string: String?):ItemStack? method works normally. Note that I also get a NullPointerException when I use the toJson(itemStack: ItemStack) method: String if needed <a href=\"https://github.com/LouisDufourd/Boutique\" rel=\"nofollow noreferrer\">here</a> is my project that I put on GitHub. Thank you in advance for your time in finding a solution.</p>\n<pre><code>java.lang.NullPointerException: null\n    at org.bukkit.Bukkit.getItemFactory(Bukkit.java:1608)\n    at org.bukkit.inventory.ItemStack.getItemMeta(ItemStack.java:550)\n    at fr.plaglefleau.serialization.JsonItemStack.fromJson(JsonItemStack.kt:278)\n    at fr.plaglefleau.bdd_MySql.Gestion.updateInventory(Gestion.kt:815)\n    at fr.plaglefleau.plugins.RoutingKt$configureRouting$1$3$1$1$7.invokeSuspend(Routing.kt:588)\n    at kotlin.coroutines.jvm.internal.BaseContinuationImpl.resumeWith(ContinuationImpl.kt:33)\n    at kotlinx.coroutines.internal.DispatchedContinuation.resumeWith(DispatchedContinuation.kt:205)\n    at io.ktor.util.pipeline.SuspendFunctionGun.resumeRootWith(SuspendFunctionGun.kt:135)\n    at io.ktor.util.pipeline.SuspendFunctionGun.loop(SuspendFunctionGun.kt:109)\n    at io.ktor.util.pipeline.SuspendFunctionGun.access$loop(SuspendFunctionGun.kt:11)\n    at io.ktor.util.pipeline.SuspendFunctionGun$continuation$1.resumeWith(SuspendFunctionGun.kt:59)\n    at kotlin.coroutines.jvm.internal.BaseContinuationImpl.resumeWith(ContinuationImpl.kt:46)\n    at kotlinx.coroutines.DispatchedTask.run(DispatchedTask.kt:106)\n    at io.netty.util.concurrent.AbstractEventExecutor.runTask(AbstractEventExecutor.java:174)\n    at io.netty.util.concurrent.AbstractEventExecutor.safeExecute(AbstractEventExecutor.java:167)\n    at io.netty.util.concurrent.SingleThreadEventExecutor.runAllTasks(SingleThreadEventExecutor.java:470)\n    at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:569)\n    at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)\n    at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)\n    at io.ktor.server.netty.EventLoopGroupProxy$Companion.create$lambda$1$lambda$0(NettyApplicationEngine.kt:296)\n    at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\n    at java.base/java.lang.Thread.run(Thread.java:834)\n2023-07-09 03:46:51.495 [eventLoopGroupProxy-4-1] TRACE io.ktor.server.sessions.Sessions - Sending session data for /api/client/updateInventory: connect\n2023-07-09 03:46:51.496 [eventLoopGroupProxy-4-1] TRACE i.k.s.p.c.ContentNegotiation - Skipping response body transformation from HttpStatusCode to OutgoingContent for the PUT /api/client/updateInventory request because the HttpStatusCode type is ignored. See [ContentNegotiationConfig::ignoreType].\n</code></pre>\n<p>Gestion updateInventory:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>    fun updateInventory(inventory: ArrayList&lt;ItemSlotPair&gt;, username: String) {\n        val laConnexion = Connexion(url, this.username, password)\n        var preparedStatement = laConnexion.getConnexion().prepareStatement(\n            &quot;SELECT id FROM user WHERE username = ?&quot;\n        )\n        preparedStatement.setString(1,username)\n        var rs = preparedStatement.executeQuery()\n        val userID = if(rs.next()) {\n            rs.getInt(&quot;id&quot;)\n        } else {\n            null\n        }\n        if(userID == null) {\n            return\n        }\n        for(i in 0..inventory.size) {\n            val item = JsonItemStack.fromJson(inventory[i].item) ?: return\n            addItemIfNotExist(item)\n            preparedStatement = laConnexion.getConnexion().prepareStatement(\n                &quot;UPDATE inventaire SET article_id = ?, quantité = ? WHERE slot_number = ? AND user_id = ?&quot;\n            )\n            preparedStatement.setInt(1,item.type.id)\n            preparedStatement.setInt(2,item.amount)\n            preparedStatement.setInt(3, inventory[i].slot)\n            preparedStatement.setInt(4,userID)\n            preparedStatement.executeUpdate()\n        }\n        laConnexion.fermerConnexion()\n    }\n</code></pre>\n<p>JsonItemStack.kt:218</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val meta = itemStack.itemMeta\n</code></pre>\n<p>Routing.kt:put(&quot;updateInventory&quot;)</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>put(&quot;updateInventory&quot;) {\n    val receive = call.receive&lt;InventoryReceive&gt;()\n    gestion.updateInventory(receive.inventory, receive.username)\n    call.respond(HttpStatusCode.OK, &quot;Good&quot;)\n}\n</code></pre>\n<p>I think I have found where the problem may come from so to get the itemmeta of an itemStack we need the ItemFactory interfaces but to get the ItemFactory interface we need to do Server.getItemFactory() and here is my probleme i don't run it on a minecraft server so if I want the ItemMeta i need a minecraft serveur to run the spigot api so the solution to use a class that convert to json an itemStack don't work\nI will probably use a custom class to stock the data of my ItemStack.</p>\n"},{"tags":["java","android","bitmap","face-detection","google-mlkit"],"comments":[{"owner":{"account_id":18323102,"reputation":587,"user_id":13343432,"display_name":"Chenxi Song"},"score":0,"creation_date":1623693365,"post_id":67927295,"comment_id":120146119,"body_markdown":"ML Kit InputImage. fromByteArray only support yv12 and nv21 formats. You will need to convert the bitmap to one of these formats in order for ML kit pipeline to process. Also, if the original image you have is a bitmap, you can probably just use InputImage.fromBitmap to construct an InputImage. It shouldn&#39;t be slower than your current approach.","body":"ML Kit InputImage. fromByteArray only support yv12 and nv21 formats. You will need to convert the bitmap to one of these formats in order for ML kit pipeline to process. Also, if the original image you have is a bitmap, you can probably just use InputImage.fromBitmap to construct an InputImage. It shouldn&#39;t be slower than your current approach."}],"answers":[{"tags":[],"owner":{"account_id":18323102,"reputation":587,"user_id":13343432,"display_name":"Chenxi Song"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1624000372,"creation_date":1624000372,"answer_id":68030854,"question_id":67927295,"body_markdown":"ML Kit InputImage. fromByteArray only support yv12 and nv21 formats. You will need to convert the bitmap to one of these formats in order for ML kit pipeline to process. Also, if the original image you have is a bitmap, you can probably just use InputImage.fromBitmap to construct an InputImage. It shouldn&#39;t be slower than your current approach. ","title":"Android MLKit face detection not detecting faces when using Bitmap","body":"<p>ML Kit InputImage. fromByteArray only support yv12 and nv21 formats. You will need to convert the bitmap to one of these formats in order for ML kit pipeline to process. Also, if the original image you have is a bitmap, you can probably just use InputImage.fromBitmap to construct an InputImage. It shouldn't be slower than your current approach.</p>\n"},{"tags":[],"owner":{"account_id":1718595,"reputation":686,"user_id":1575133,"accept_rate":75,"display_name":"jobernas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1641397372,"creation_date":1641397372,"answer_id":70595682,"question_id":67927295,"body_markdown":"I was having the same issue use ImageInput.fromMediaImage(..., ...)\r\n\r\n    override fun analyze(image: ImageProxy) {\r\n    \r\n         val mediaImage: Image = image.image.takeIf { it != null } ?: run {\r\n                    image.close()\r\n                    return\r\n                }\r\n         val inputImage = InputImage.fromMediaImage(mediaImage, image.imageInfo.rotationDegrees)\r\n         // TODO: Your ML Code\r\n    }\r\n\r\nCheck here for more details \r\nhttps://developers.google.com/ml-kit/vision/image-labeling/android\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Android MLKit face detection not detecting faces when using Bitmap","body":"<p>I was having the same issue use ImageInput.fromMediaImage(..., ...)</p>\n<pre><code>override fun analyze(image: ImageProxy) {\n\n     val mediaImage: Image = image.image.takeIf { it != null } ?: run {\n                image.close()\n                return\n            }\n     val inputImage = InputImage.fromMediaImage(mediaImage, image.imageInfo.rotationDegrees)\n     // TODO: Your ML Code\n}\n</code></pre>\n<p>Check here for more details\n<a href=\"https://developers.google.com/ml-kit/vision/image-labeling/android\" rel=\"nofollow noreferrer\">https://developers.google.com/ml-kit/vision/image-labeling/android</a></p>\n"}],"owner":{"account_id":293508,"reputation":3874,"user_id":596841,"accept_rate":64,"display_name":"pookie"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2007,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1689044370,"creation_date":1623352892,"question_id":67927295,"body_markdown":"I have an XR app, where display shows the camera (rear) feed. As such, capturing the screen is pretty much the same as capturing the camera feed...\r\nAs such, I take screenshots (Bitmaps) and then try to detect faces within them using Googles MLKit.\r\n\r\nI&#39;m following the [official guide][1] to detect faces.\r\n\r\nTo do this, I first init my face detector:\r\n\r\n    FaceDetector detector;\r\n\r\n    public MyFaceDetector(){\r\n        FaceDetectorOptions realTimeOpts =\r\n                new FaceDetectorOptions.Builder()\r\n                        .setContourMode(FaceDetectorOptions.CONTOUR_MODE_ALL)\r\n                        .build();\r\n        detector = FaceDetection.getClient(realTimeOpts);\r\n    }\r\n\r\nI then have a function which passes in a bitmap. I first convert the bitmap to a byte array. I do this because `InputImage.fromBitmap` is very slow, and MLKit actually tells me that I should use a byte array:\r\n\r\n    ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();\r\n    bitmap.compress(Bitmap.CompressFormat.JPEG, 85, byteArrayOutputStream);\r\n    byte[] byteArray = byteArrayOutputStream .toByteArray();\r\n\r\nNext I make a mutable copy of the Bitmap (so that I can draw onto it), and set up a Canvas object, along with a color that will be used when drawing on to the Bitmap:\r\n\r\n    BitmapFactory.Options options = new BitmapFactory.Options();\r\n    options.inMutable = true;\r\n    Bitmap bmp = BitmapFactory.decodeByteArray(byteArray, 0, byteArray.length, options);\r\n    Canvas canvas = new Canvas(bmp);\r\n    Paint p = new Paint();\r\n    p.setColor(Color.RED);\r\n\r\nAfter all is set up, I create an `InputImage` (used by the FaceDetector), using the byte array:\r\n\r\n    InputImage image = InputImage.fromByteArray(byteArray, bmp.getWidth(), bmp.getHeight(),0, InputImage.IMAGE_FORMAT_NV21);\r\n\r\nNote the image format... There is a `InputImage.IMAGE_FORMAT_BITMAP`, but using this throws an IllegalArgumentException. Anyway, I next try to process the Bitmap, detect faces, fill each detected face with the color defined earlier, and then save the Bitmap to disk:\r\n\r\n    Task&lt;List&lt;Face&gt;&gt; result = detector.process(image).addOnSuccessListener(\r\n                new OnSuccessListener&lt;List&lt;Face&gt;&gt;() {\r\n                    @Override\r\n                    public void onSuccess(List&lt;Face&gt; faces) {\r\n                        Log.e(&quot;FACE DETECTION APP&quot;, &quot;NUMBER OF FACES: &quot; + faces.size());\r\n\r\n                        Thread processor = new Thread(new Runnable() {\r\n                            @Override\r\n                            public void run() {\r\n                                for (Face face : faces) {\r\n                                    Rect destinationRect = face.getBoundingBox();\r\n                                    canvas.drawRect(destinationRect, p);\r\n                                    canvas.save();\r\n                                    Log.e(&quot;FACE DETECTION APP&quot;, &quot;WE GOT SOME FACCES!!!&quot;);\r\n\r\n                                }\r\n                                File file = new File(someFilePath);\r\n                                try {\r\n                                    FileOutputStream fOut = new FileOutputStream(file);\r\n                                    bmp.compress(Bitmap.CompressFormat.JPEG, 85, fOut);\r\n                                    fOut.flush();\r\n                                    fOut.close();\r\n                                } catch (Exception e) {\r\n                                    e.printStackTrace();\r\n                                }\r\n                            }\r\n                        });\r\n\r\n                        processor.start();\r\n                    }\r\n                })\r\n                .addOnFailureListener(\r\n                        new OnFailureListener() {\r\n                            @Override\r\n                            public void onFailure(@NonNull Exception e) {\r\n                                // Task failed with an exception\r\n                                // ...\r\n                            }\r\n                        });\r\n    }\r\n\r\nWhile this code runs (i.e. no exceptions) and the bitmap is correctly written to disk, no faces are ever detected (`faces.size() is always 0`). I&#39;ve tried rotating the image. I&#39;ve tried changing the quality of the Bitmap. I&#39;ve tried with and without the thread to process any detected faces. I&#39;ve tried everything I can think of.\r\n\r\nAnyone have any ideas?\r\n\r\n\r\n  [1]: https://developers.google.com/ml-kit/vision/face-detection/android#using-a-bytebuffer-or-bytearray","title":"Android MLKit face detection not detecting faces when using Bitmap","body":"<p>I have an XR app, where display shows the camera (rear) feed. As such, capturing the screen is pretty much the same as capturing the camera feed...\nAs such, I take screenshots (Bitmaps) and then try to detect faces within them using Googles MLKit.</p>\n<p>I'm following the <a href=\"https://developers.google.com/ml-kit/vision/face-detection/android#using-a-bytebuffer-or-bytearray\" rel=\"nofollow noreferrer\">official guide</a> to detect faces.</p>\n<p>To do this, I first init my face detector:</p>\n<pre><code>FaceDetector detector;\n\npublic MyFaceDetector(){\n    FaceDetectorOptions realTimeOpts =\n            new FaceDetectorOptions.Builder()\n                    .setContourMode(FaceDetectorOptions.CONTOUR_MODE_ALL)\n                    .build();\n    detector = FaceDetection.getClient(realTimeOpts);\n}\n</code></pre>\n<p>I then have a function which passes in a bitmap. I first convert the bitmap to a byte array. I do this because <code>InputImage.fromBitmap</code> is very slow, and MLKit actually tells me that I should use a byte array:</p>\n<pre><code>ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();\nbitmap.compress(Bitmap.CompressFormat.JPEG, 85, byteArrayOutputStream);\nbyte[] byteArray = byteArrayOutputStream .toByteArray();\n</code></pre>\n<p>Next I make a mutable copy of the Bitmap (so that I can draw onto it), and set up a Canvas object, along with a color that will be used when drawing on to the Bitmap:</p>\n<pre><code>BitmapFactory.Options options = new BitmapFactory.Options();\noptions.inMutable = true;\nBitmap bmp = BitmapFactory.decodeByteArray(byteArray, 0, byteArray.length, options);\nCanvas canvas = new Canvas(bmp);\nPaint p = new Paint();\np.setColor(Color.RED);\n</code></pre>\n<p>After all is set up, I create an <code>InputImage</code> (used by the FaceDetector), using the byte array:</p>\n<pre><code>InputImage image = InputImage.fromByteArray(byteArray, bmp.getWidth(), bmp.getHeight(),0, InputImage.IMAGE_FORMAT_NV21);\n</code></pre>\n<p>Note the image format... There is a <code>InputImage.IMAGE_FORMAT_BITMAP</code>, but using this throws an IllegalArgumentException. Anyway, I next try to process the Bitmap, detect faces, fill each detected face with the color defined earlier, and then save the Bitmap to disk:</p>\n<pre><code>Task&lt;List&lt;Face&gt;&gt; result = detector.process(image).addOnSuccessListener(\n            new OnSuccessListener&lt;List&lt;Face&gt;&gt;() {\n                @Override\n                public void onSuccess(List&lt;Face&gt; faces) {\n                    Log.e(&quot;FACE DETECTION APP&quot;, &quot;NUMBER OF FACES: &quot; + faces.size());\n\n                    Thread processor = new Thread(new Runnable() {\n                        @Override\n                        public void run() {\n                            for (Face face : faces) {\n                                Rect destinationRect = face.getBoundingBox();\n                                canvas.drawRect(destinationRect, p);\n                                canvas.save();\n                                Log.e(&quot;FACE DETECTION APP&quot;, &quot;WE GOT SOME FACCES!!!&quot;);\n\n                            }\n                            File file = new File(someFilePath);\n                            try {\n                                FileOutputStream fOut = new FileOutputStream(file);\n                                bmp.compress(Bitmap.CompressFormat.JPEG, 85, fOut);\n                                fOut.flush();\n                                fOut.close();\n                            } catch (Exception e) {\n                                e.printStackTrace();\n                            }\n                        }\n                    });\n\n                    processor.start();\n                }\n            })\n            .addOnFailureListener(\n                    new OnFailureListener() {\n                        @Override\n                        public void onFailure(@NonNull Exception e) {\n                            // Task failed with an exception\n                            // ...\n                        }\n                    });\n}\n</code></pre>\n<p>While this code runs (i.e. no exceptions) and the bitmap is correctly written to disk, no faces are ever detected (<code>faces.size() is always 0</code>). I've tried rotating the image. I've tried changing the quality of the Bitmap. I've tried with and without the thread to process any detected faces. I've tried everything I can think of.</p>\n<p>Anyone have any ideas?</p>\n"},{"tags":["java","spring","struts2","struts-action","struts2-config-browser"],"comments":[{"owner":{"account_id":1820003,"reputation":49625,"user_id":1654265,"accept_rate":93,"display_name":"Andrea Ligios"},"score":1,"creation_date":1436444803,"post_id":31315521,"comment_id":50622045,"body_markdown":"Can you show a real world (fake) example of what and how it should do ?","body":"Can you show a real world (fake) example of what and how it should do ?"},{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":1,"creation_date":1436456517,"post_id":31315521,"comment_id":50631183,"body_markdown":"For the menu you only need to store action paths, and build URLs for links with URL Helper. Annotations aren&#39;t so flexible against object model that you can use for the subj, but it is a key point to extract the path for the menu component.","body":"For the menu you only need to store action paths, and build URLs for links with URL Helper. Annotations aren&#39;t so flexible against object model that you can use for the subj, but it is a key point to extract the path for the menu component."},{"owner":{"account_id":1655816,"reputation":283,"user_id":1525430,"accept_rate":100,"display_name":"Mats"},"score":0,"creation_date":1436457149,"post_id":31315521,"comment_id":50631611,"body_markdown":"@Roman all the annotations buisness and info needed is pretty clear, what I can&#39;t figure out is how to get hold of the info from Struts. I&#39;m looking into overriding the StrutsPrepareAndExecuteFilter.","body":"@Roman all the annotations buisness and info needed is pretty clear, what I can&#39;t figure out is how to get hold of the info from Struts. I&#39;m looking into overriding the StrutsPrepareAndExecuteFilter."},{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":2,"creation_date":1436457595,"post_id":31315521,"comment_id":50631893,"body_markdown":"It&#39;s a bad idea, you don&#39;t need *override* Struts2, but you can *extend* it with a plugin, and if you look inside it you can get more information.","body":"It&#39;s a bad idea, you don&#39;t need <i>override</i> Struts2, but you can <i>extend</i> it with a plugin, and if you look inside it you can get more information."},{"owner":{"account_id":1655816,"reputation":283,"user_id":1525430,"accept_rate":100,"display_name":"Mats"},"score":0,"creation_date":1436457666,"post_id":31315521,"comment_id":50631944,"body_markdown":"@Roman, I&#39;m looking into both alternatived","body":"@Roman, I&#39;m looking into both alternatived"},{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":1,"creation_date":1436457835,"post_id":31315521,"comment_id":50632067,"body_markdown":"Here you are, start with your approach and return to my when you rollback. Ah, forgot [this](http://stackoverflow.com/q/16441028/573032) won&#39;t solve your task but can help.","body":"Here you are, start with your approach and return to my when you rollback. Ah, forgot <a href=\"http://stackoverflow.com/q/16441028/573032\">this</a> won&#39;t solve your task but can help."},{"owner":{"account_id":1655816,"reputation":283,"user_id":1525430,"accept_rate":100,"display_name":"Mats"},"score":0,"creation_date":1436459339,"post_id":31315521,"comment_id":50632955,"body_markdown":"I guess this is the line that is the beginning of my sollution: `PackageConfig packageConfig = Dispatcher.getInstance().getConfigurationManager().getConfiguration().getPackageConfig(&quot;default&quot;);`. I&#39;ll start there and I&#39;ll get back to you.","body":"I guess this is the line that is the beginning of my sollution: <code>PackageConfig packageConfig = Dispatcher.getInstance().getConfigurationManager().getConfig&zwnj;&#8203;uration().getPackage&zwnj;&#8203;Config(&quot;default&quot;);</code>. I&#39;ll start there and I&#39;ll get back to you."}],"answers":[{"tags":[],"owner":{"account_id":1820003,"reputation":49625,"user_id":1654265,"accept_rate":93,"display_name":"Andrea Ligios"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1542873021,"creation_date":1436443510,"answer_id":31316954,"question_id":31315521,"body_markdown":"You are free of building this thing for your personal growth, but **beware that it already exist**.\r\n\r\nIt is called [Config Browser Plugin][1] (`struts2-config-browser-plugin-2.3.20.jar`).\r\n\r\nIt is included by default with the Maven archetypes, and you must remember of removing it before going in production.\r\n\r\nOnce imported it is available at the URL:\r\n\r\n&gt;   //www.SERVER_NAME.com:8080/WEBAPP_NAME/**config-browser/actionNames**\r\n\r\nIt gives you the exact informations you are looking for: actions, methods, results, parameters, mappings etc. and it looks like this:\r\n\r\n![enter image description here][2]\r\n\r\n\r\n\r\n  [1]: https://struts.apache.org/plugins/config-browser/\r\n  [2]: http://i.stack.imgur.com/frgzs.png","title":"Getting a list of configured actions in Struts2","body":"<p>You are free of building this thing for your personal growth, but <strong>beware that it already exist</strong>.</p>\n\n<p>It is called <a href=\"https://struts.apache.org/plugins/config-browser/\" rel=\"nofollow noreferrer\">Config Browser Plugin</a> (<code>struts2-config-browser-plugin-2.3.20.jar</code>).</p>\n\n<p>It is included by default with the Maven archetypes, and you must remember of removing it before going in production.</p>\n\n<p>Once imported it is available at the URL:</p>\n\n<blockquote>\n  <p>//www.SERVER_NAME.com:8080/WEBAPP_NAME/<strong>config-browser/actionNames</strong></p>\n</blockquote>\n\n<p>It gives you the exact informations you are looking for: actions, methods, results, parameters, mappings etc. and it looks like this:</p>\n\n<p><img src=\"https://i.stack.imgur.com/frgzs.png\" alt=\"enter image description here\"></p>\n"},{"tags":[],"owner":{"account_id":1879878,"reputation":24286,"user_id":1700321,"display_name":"Aleksandr M"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1436467139,"creation_date":1436467139,"answer_id":31325651,"question_id":31315521,"body_markdown":"First of all you need to hook into application initialization process after the configurations are loaded and parsed. One of the ways is to implement `DispatcherListener` which you need to add to the `Dispatcher`. This you can do in `ServletContextListener#contextInitialized` method.\r\n\r\nThe second piece of the puzzle is to get action configurations. This is pretty simple because the instance of the `Dispatcher` is passed as argument into `dispatcherInitialized` method. To get all current action configurations get `RuntimeConfiguration` which holds data in `Map&lt;String, Map&lt;String, ActionConfig&gt;&gt;`, where the first map key is package namespace, the second map key is action name and `ActionConfig` holds all info about action. Since you need a class name then use `getClassName()` method of it.\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    public class ActionMenuBuilderListener implements ServletContextListener,DispatcherListener {\r\n\r\n\t    @Override\r\n\t    public void contextInitialized(ServletContextEvent sce) {\r\n\t\t    Dispatcher.addDispatcherListener(this);\r\n\t    }\r\n\r\n\t\t@Override\r\n\t    public void dispatcherInitialized(Dispatcher du) {\r\n\t\t    Map&lt;String, Map&lt;String, ActionConfig&gt;&gt; runtimeActionConfigs = du\r\n\t\t\t\t.getConfigurationManager().getConfiguration().getRuntimeConfiguration()\r\n\t\t\t\t.getActionConfigs();\r\n\t    }\r\n        // other methods\r\n    }\r\n\r\nAnd of course don&#39;t forget to register your listener in web.xml.","title":"Getting a list of configured actions in Struts2","body":"<p>First of all you need to hook into application initialization process after the configurations are loaded and parsed. One of the ways is to implement <code>DispatcherListener</code> which you need to add to the <code>Dispatcher</code>. This you can do in <code>ServletContextListener#contextInitialized</code> method.</p>\n\n<p>The second piece of the puzzle is to get action configurations. This is pretty simple because the instance of the <code>Dispatcher</code> is passed as argument into <code>dispatcherInitialized</code> method. To get all current action configurations get <code>RuntimeConfiguration</code> which holds data in <code>Map&lt;String, Map&lt;String, ActionConfig&gt;&gt;</code>, where the first map key is package namespace, the second map key is action name and <code>ActionConfig</code> holds all info about action. Since you need a class name then use <code>getClassName()</code> method of it.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class ActionMenuBuilderListener implements ServletContextListener,DispatcherListener {\n\n    @Override\n    public void contextInitialized(ServletContextEvent sce) {\n        Dispatcher.addDispatcherListener(this);\n    }\n\n    @Override\n    public void dispatcherInitialized(Dispatcher du) {\n        Map&lt;String, Map&lt;String, ActionConfig&gt;&gt; runtimeActionConfigs = du\n            .getConfigurationManager().getConfiguration().getRuntimeConfiguration()\n            .getActionConfigs();\n    }\n    // other methods\n}\n</code></pre>\n\n<p>And of course don't forget to register your listener in web.xml.</p>\n"}],"owner":{"account_id":1655816,"reputation":283,"user_id":1525430,"accept_rate":100,"display_name":"Mats"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2084,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":31325651,"answer_count":2,"score":5,"last_activity_date":1689044368,"creation_date":1436439751,"question_id":31315521,"body_markdown":"In a project using Struts2 (2.3.20) I would like to run through the\r\nconfigured actions (name, class, namespace, method) at application startup. \r\n\r\nI&#39;m using\r\n\r\n - Struts 2.3.20\r\n - struts-spring-plugin\r\n - struts-convention-plugin\r\n\r\nFor reference: I&#39;ve done some work with beans and Struts injection before so not entirely fresh on this, but I&#39;m stuck solving the problem stated here.\r\n\r\nAny pointers on how to obtain this would be appreciated.\r\n\r\nFurther explanation\r\n-------------------\r\n\r\nReading Andrea&#39;s answer below I see I need to explain what I need. \r\n\r\nI&#39;m building a application menu builder feature for the application. My plan is to obtain the action configurations and build a tree of &quot;menu nodes&quot; from information in annotations on selected action classes and methods.\r\n\r\nMy problem with the code from the config-browser is that the `Configuration` (xwork) doesn&#39;t seem to be available outside of Struts components. Since this is an application startup task it doesn&#39;t really fit Struts&#39; MVC component model. I&#39;d like to put the menu building initialization in a `ServletContextListener`.\r\n\r\nFake example\r\n------------\r\n\r\nPer request here is just the connection actionconfig &lt;-&gt; annotation &lt;-&gt; my_custom_menu. From this I could produce a menu structure provided from the annotations on action classes and methods. \r\n\r\n    public class ActionMenuBuilderListener implements ServletContextListener {\r\n      @Override\r\n      public void contextInitialized(ServletContextEvent arg0) {\r\n        List&lt;ActionCfg&gt; actions = Struts.getConfiguredActions(); // thisi is where I&#39;d like some help\r\n        for(ActionCfg action : actions) {\r\n          MenuAnnotation annotation = getAnnotationFromMethodOrClass(action);\r\n          if(annotation != null) {\r\n            addMenuItem(action, annotation);\r\n          }\r\n        }\r\n      }\r\n    }\r\n   \r\nHere `ActionCfg`is whatever class Struts would return for action configuration, `Struts.getConfiguredActions()` would be one or more calls to Struts components and `addMenu(...)` is where I add a menu item node to my structure. The structure is later the target from JSP-s to build menus.\r\n\r\nI don&#39;t know how much more code to write.\r\n\r\nMy solution\r\n------------\r\n\r\nFor completeness I thought I&#39;ll include what came out of this.\r\n\r\nFirst, I  to plugged in into Struts through this\r\n`ServletContextListener`:\r\n```\r\npublic class ActionMenuBuilderListener implements\r\n\tServletContextListener {\r\n\r\n\t@Override\r\n\tpublic void contextDestroyed(ServletContextEvent arg0) {\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void contextInitialized(ServletContextEvent event) {\r\n\r\n\t    ActionMenuDispatcherListener listener =\r\n\t\tnew ActionMenuDispatcherListener(); \r\n\t    ServletContext context = event.getServletContext();\r\n\t    listener.setServletContext(context);\r\n\r\n\t    Dispatcher.addDispatcherListener(listener);\r\n\r\n\t}\r\n}\r\n```\r\n\r\nThen, I wrote the `DispatcherListener`:\r\n\r\n\r\n    public class ActionMenuDispatcherListener implements DispatcherListener {\r\n\r\n\tprivate ServletContext servletContext;\r\n\r\n\t...\r\n\r\n\t@Override\r\n\tpublic void dispatcherInitialized(Dispatcher dispatcher) {\r\n\r\n\t    Map&lt;String, PackageConfig&gt; packages = dispatcher\r\n\t\t    .getConfigurationManager().getConfiguration()\r\n\t\t    .getPackageConfigs();\r\n\r\n\t    Map&lt;String, Map&lt;String, ActionConfig&gt;&gt; runtimeActionConfigs = dispatcher\r\n\t\t    .getConfigurationManager().getConfiguration()\r\n\t\t    .getRuntimeConfiguration().getActionConfigs();\r\n\r\n\t    for (String packageKey : runtimeActionConfigs.keySet()) {\r\n\r\n\t\tMap&lt;String, ActionConfig&gt; actionConfigs = runtimeActionConfigs\r\n\t\t\t.get(packageKey);\r\n\r\n\t\tfor (String actionKey : actionConfigs.keySet()) {\r\n\t\t    ActionConfig actionConfig = actionConfigs.get(actionKey);\r\n\t\t    PackageConfig packageConfig = packages.get(actionConfig\r\n\t\t\t    .getPackageName());\r\n\r\n\t\t    if (packageConfig != null) {\r\n\t\t\tString actionName = actionConfig.getName();\r\n\t\t\tString namespace = packageConfig.getNamespace();\r\n\t\t\ttry {\r\n\r\n\t\t\t    ActionMenu methodAnnotation = getMethodAnnotation(actionConfig);\r\n\r\n\t\t\t    if (methodAnnotation != null) {\r\n\t\t\t\tString annotationInfo = methodAnnotation.value();\r\n\t\t\t\tlog.debug(&quot;[{}, {}, {}]&quot;, namespace, actionName,\r\n\t\t\t\t\tannotationInfo);\r\n\t\t\t    }\r\n\r\n\t\t\t} catch (ClassNotFoundException e) {\r\n\t\t\t    log.error(&quot;{}: {}&quot;, e.getClass().getSimpleName(),\r\n\t\t\t\t    e.getMessage());\r\n\t\t\t}\r\n\t\t    }\r\n\t\t}\r\n\t    }\r\n\t}\r\n\r\n\tprotected ActionMenu getMethodAnnotation(ActionConfig actionConfig)\r\n\t\tthrows ClassNotFoundException {\r\n\t    String className = actionConfig.getClassName();\r\n\t    String methodName = actionConfig.getMethodName();\r\n\t    Class&lt;?&gt; actionClass = Class.forName(className);\r\n\t    try {\r\n\t\tMethod method = actionClass.getDeclaredMethod(methodName, null);\r\n\t\tActionMenu annotation = method.getAnnotation(ActionMenu.class);\r\n\t\treturn annotation;\r\n\t    } catch (NoSuchMethodException | SecurityException e) {\r\n\t\t// log.error(&quot;{}: {}&quot;, e.getClass().getSimpleName(),\r\n\t\t// e.getMessage());\r\n\t    }\r\n\t    return null;\r\n\t}\r\n\r\n    }\r\n\r\nJust in case someone else is thinking along those line :)\r\n\r\n","title":"Getting a list of configured actions in Struts2","body":"<p>In a project using Struts2 (2.3.20) I would like to run through the\nconfigured actions (name, class, namespace, method) at application startup.</p>\n<p>I'm using</p>\n<ul>\n<li>Struts 2.3.20</li>\n<li>struts-spring-plugin</li>\n<li>struts-convention-plugin</li>\n</ul>\n<p>For reference: I've done some work with beans and Struts injection before so not entirely fresh on this, but I'm stuck solving the problem stated here.</p>\n<p>Any pointers on how to obtain this would be appreciated.</p>\n<h2>Further explanation</h2>\n<p>Reading Andrea's answer below I see I need to explain what I need.</p>\n<p>I'm building a application menu builder feature for the application. My plan is to obtain the action configurations and build a tree of &quot;menu nodes&quot; from information in annotations on selected action classes and methods.</p>\n<p>My problem with the code from the config-browser is that the <code>Configuration</code> (xwork) doesn't seem to be available outside of Struts components. Since this is an application startup task it doesn't really fit Struts' MVC component model. I'd like to put the menu building initialization in a <code>ServletContextListener</code>.</p>\n<h2>Fake example</h2>\n<p>Per request here is just the connection actionconfig &lt;-&gt; annotation &lt;-&gt; my_custom_menu. From this I could produce a menu structure provided from the annotations on action classes and methods.</p>\n<pre><code>public class ActionMenuBuilderListener implements ServletContextListener {\n  @Override\n  public void contextInitialized(ServletContextEvent arg0) {\n    List&lt;ActionCfg&gt; actions = Struts.getConfiguredActions(); // thisi is where I'd like some help\n    for(ActionCfg action : actions) {\n      MenuAnnotation annotation = getAnnotationFromMethodOrClass(action);\n      if(annotation != null) {\n        addMenuItem(action, annotation);\n      }\n    }\n  }\n}\n</code></pre>\n<p>Here <code>ActionCfg</code>is whatever class Struts would return for action configuration, <code>Struts.getConfiguredActions()</code> would be one or more calls to Struts components and <code>addMenu(...)</code> is where I add a menu item node to my structure. The structure is later the target from JSP-s to build menus.</p>\n<p>I don't know how much more code to write.</p>\n<h2>My solution</h2>\n<p>For completeness I thought I'll include what came out of this.</p>\n<p>First, I  to plugged in into Struts through this\n<code>ServletContextListener</code>:</p>\n<pre><code>public class ActionMenuBuilderListener implements\n    ServletContextListener {\n\n    @Override\n    public void contextDestroyed(ServletContextEvent arg0) {\n    }\n\n    @Override\n    public void contextInitialized(ServletContextEvent event) {\n\n        ActionMenuDispatcherListener listener =\n        new ActionMenuDispatcherListener(); \n        ServletContext context = event.getServletContext();\n        listener.setServletContext(context);\n\n        Dispatcher.addDispatcherListener(listener);\n\n    }\n}\n</code></pre>\n<p>Then, I wrote the <code>DispatcherListener</code>:</p>\n<pre><code>public class ActionMenuDispatcherListener implements DispatcherListener {\n\nprivate ServletContext servletContext;\n\n...\n\n@Override\npublic void dispatcherInitialized(Dispatcher dispatcher) {\n\n    Map&lt;String, PackageConfig&gt; packages = dispatcher\n        .getConfigurationManager().getConfiguration()\n        .getPackageConfigs();\n\n    Map&lt;String, Map&lt;String, ActionConfig&gt;&gt; runtimeActionConfigs = dispatcher\n        .getConfigurationManager().getConfiguration()\n        .getRuntimeConfiguration().getActionConfigs();\n\n    for (String packageKey : runtimeActionConfigs.keySet()) {\n\n    Map&lt;String, ActionConfig&gt; actionConfigs = runtimeActionConfigs\n        .get(packageKey);\n\n    for (String actionKey : actionConfigs.keySet()) {\n        ActionConfig actionConfig = actionConfigs.get(actionKey);\n        PackageConfig packageConfig = packages.get(actionConfig\n            .getPackageName());\n\n        if (packageConfig != null) {\n        String actionName = actionConfig.getName();\n        String namespace = packageConfig.getNamespace();\n        try {\n\n            ActionMenu methodAnnotation = getMethodAnnotation(actionConfig);\n\n            if (methodAnnotation != null) {\n            String annotationInfo = methodAnnotation.value();\n            log.debug(&quot;[{}, {}, {}]&quot;, namespace, actionName,\n                annotationInfo);\n            }\n\n        } catch (ClassNotFoundException e) {\n            log.error(&quot;{}: {}&quot;, e.getClass().getSimpleName(),\n                e.getMessage());\n        }\n        }\n    }\n    }\n}\n\nprotected ActionMenu getMethodAnnotation(ActionConfig actionConfig)\n    throws ClassNotFoundException {\n    String className = actionConfig.getClassName();\n    String methodName = actionConfig.getMethodName();\n    Class&lt;?&gt; actionClass = Class.forName(className);\n    try {\n    Method method = actionClass.getDeclaredMethod(methodName, null);\n    ActionMenu annotation = method.getAnnotation(ActionMenu.class);\n    return annotation;\n    } catch (NoSuchMethodException | SecurityException e) {\n    // log.error(&quot;{}: {}&quot;, e.getClass().getSimpleName(),\n    // e.getMessage());\n    }\n    return null;\n}\n\n}\n</code></pre>\n<p>Just in case someone else is thinking along those line :)</p>\n"},{"tags":["java","spring-boot","maven","vscode-extensions"],"comments":[{"owner":{"account_id":3430916,"reputation":3799,"user_id":3059385,"accept_rate":40,"display_name":"Christopher Schneider"},"score":2,"creation_date":1689048483,"post_id":76658422,"comment_id":135154217,"body_markdown":"You are looking for `mvn package`. `mvn install` installs the jar to your local repository (the `.m2` directory)","body":"You are looking for <code>mvn package</code>. <code>mvn install</code> installs the jar to your local repository (the <code>.m2</code> directory)"},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1689078225,"post_id":76658422,"comment_id":135159446,"body_markdown":"You seem to be confusing Maven install goal with the output folders of the build.","body":"You seem to be confusing Maven install goal with the output folders of the build."},{"owner":{"account_id":22556709,"reputation":1,"user_id":16744957,"display_name":"kcalixto"},"score":0,"creation_date":1690138374,"post_id":76658422,"comment_id":135308277,"body_markdown":"thanks @ChristopherSchneider and @aled!! I did have confused the objectives of package and install, now i&#39;ve got wat i wanted!!","body":"thanks @ChristopherSchneider and @aled!! I did have confused the objectives of package and install, now i&#39;ve got wat i wanted!!"}],"owner":{"account_id":22556709,"reputation":1,"user_id":16744957,"display_name":"kcalixto"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1690138242,"answer_count":0,"score":0,"last_activity_date":1689043657,"creation_date":1689043657,"question_id":76658422,"body_markdown":"I&#39;m using default VsCode Java Spring profile to create my multi-module application.\r\n\r\nBut when i run Maven install (following this answer: https://stackoverflow.com/a/72598461/16744957) it exports my .jar files in this path: ~/.m2/repository/com/myAppParent/myAppModule/0.0.1-SNAPSHOT/myAppModule-0.0.1-SNAPSHOT.jar\r\n\r\nAnyone knows how can i set it to export in my project folder? Like java build does with ${workspaceFolder}/${workspaceFolderBasename}.jar\r\n\r\n\r\nI&#39;ve already tried to check &quot;Maven For Java&quot; extension settings, but haven&#39;t found anything...","title":"How can i update export path for VsCode &quot;maven install&quot; in MacOS?","body":"<p>I'm using default VsCode Java Spring profile to create my multi-module application.</p>\n<p>But when i run Maven install (following this answer: <a href=\"https://stackoverflow.com/a/72598461/16744957\">https://stackoverflow.com/a/72598461/16744957</a>) it exports my .jar files in this path: ~/.m2/repository/com/myAppParent/myAppModule/0.0.1-SNAPSHOT/myAppModule-0.0.1-SNAPSHOT.jar</p>\n<p>Anyone knows how can i set it to export in my project folder? Like java build does with ${workspaceFolder}/${workspaceFolderBasename}.jar</p>\n<p>I've already tried to check &quot;Maven For Java&quot; extension settings, but haven't found anything...</p>\n"},{"tags":["java","httprequest","ktor","spigot"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1688948074,"post_id":76650001,"comment_id":135138945,"body_markdown":"What&#39;s the status of the response?","body":"What&#39;s the status of the response?"},{"owner":{"account_id":28381167,"reputation":1,"user_id":21708417,"display_name":"Plag"},"score":0,"creation_date":1688949791,"post_id":76650001,"comment_id":135139085,"body_markdown":"the respond status is 415 and that what he said in the log i think because he say he could&#39;nt convert the json to the class","body":"the respond status is 415 and that what he said in the log i think because he say he could&#39;nt convert the json to the class"}],"owner":{"account_id":28381167,"reputation":1,"user_id":21708417,"display_name":"Plag"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":225,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689043217,"creation_date":1688947241,"question_id":76650001,"body_markdown":"I am making a KTOR server that aims to allow the player to buy/sell IG items for money in game item. To do this, the person must be able to connect/register to the site. But, as I&#39;m using the Minecraft nickname to facilitate the item give, it&#39;s imperative that the player registers via the Minecraft server. However, when I send my request, I get an error telling me that the response from the KTOR server is empty (the body, to be precise). I&#39;ve run some tests and it turns out that the server doesn&#39;t do anything when I send the request. You can also see that when the KTOR server receives the request, it can&#39;t convert the JOIN into the desired object. I wanted to check whether the problem came from the JSON with postman, but the server responded and executed my request. So here&#39;s my error message, my register method and the log of the KTOR server when it receives my request and [here](https://github.com/LouisDufourd/Boutique)&#39;s my KTOR server on GitHub.\r\n\r\nError:\r\n```\r\n[08:54:25] [Server thread/WARN]: java.lang.NullPointerException: Cannot invoke &quot;fr.plaglefleau.inventorytojson.models.ClientRegisterReceive.isRegister()&quot; because &quot;clientRegisterReceive&quot; is null\r\n[08:54:25] [Server thread/WARN]:        at fr.plaglefleau.inventorytojson.listeners.ConnectListener$2.run(ConnectListener.java:214)\r\n[08:54:25] [Server thread/WARN]:        at org.bukkit.craftbukkit.v1_20_R1.scheduler.CraftTask.run(CraftTask.java:82)\r\n[08:54:25] [Server thread/WARN]:        at org.bukkit.craftbukkit.v1_20_R1.scheduler.CraftScheduler.mainThreadHeartbeat(CraftScheduler.java:415)\r\n[08:54:25] [Server thread/WARN]:        at net.minecraft.server.MinecraftServer.b(MinecraftServer.java:1257)\r\n[08:54:25] [Server thread/WARN]:        at net.minecraft.server.dedicated.DedicatedServer.b(DedicatedServer.java:388)\r\n[08:54:25] [Server thread/WARN]:        at net.minecraft.server.MinecraftServer.a(MinecraftServer.java:1198)\r\n[08:54:25] [Server thread/WARN]:        at net.minecraft.server.MinecraftServer.w(MinecraftServer.java:1015)\r\n[08:54:25] [Server thread/WARN]:        at net.minecraft.server.MinecraftServer.lambda$0(MinecraftServer.java:304)\r\n[08:54:25] [Server thread/WARN]:        at java.base/java.lang.Thread.run(Thread.java:833)\r\n```\r\n\r\nJava class:\r\n```\r\npublic void register(Player player, String message) {\r\n        String[] register = message.replace(&quot;&gt;&quot;,&quot;&quot;).replace(&quot;&lt;&quot;,&quot;&quot;).split(&quot;;&quot;);\r\n        String json = new Gson().toJson(\r\n                new Register(\r\n                        player.getName(),\r\n                        register[0],\r\n                        register[1]\r\n                )\r\n        );\r\n        System.out.println(ConsoleColor.YELLOW + json + ConsoleColor.RESET);\r\n        new BukkitRunnable() {\r\n            public void run() {\r\n                URI uri = URI.create(&quot;http://127.0.0.1/api/client/register&quot;);\r\n                HttpClient client = HttpClient.newHttpClient();\r\n                HttpRequest request = HttpRequest.newBuilder(uri)\r\n                        .POST(HttpRequest.BodyPublishers.ofString(json))\r\n                        .header(&quot;Authorization&quot;, &quot;Bearer &quot; + Token.TOKEN)\r\n                        .build();\r\n                try {\r\n                    //send and get the response\r\n                    HttpResponse&lt;String&gt; response = client.send(request, HttpResponse.BodyHandlers.ofString());\r\n                    System.out.println(ConsoleColor.YELLOW + response.body() + ConsoleColor.RESET);\r\n                    if(response.body().isBlank()) {\r\n                        System.out.println(ConsoleColor.YELLOW + &quot;The body is Blank&quot; + ConsoleColor.RESET);\r\n                    }\r\n                    ClientRegisterReceive clientRegisterReceive = new Gson().fromJson(response.body(), ClientRegisterReceive.class);\r\n                    if(clientRegisterReceive.isRegister()) {\r\n                        player.sendMessage(ChatColor.GREEN + clientRegisterReceive.getMessage() + &quot;\\nWelcome &quot; + player.getName() + ChatColor.RESET);\r\n                        registerPlayers.remove(player.getUniqueId());\r\n                        players.remove(player.getUniqueId());\r\n                    } else {\r\n                        player.sendMessage(ChatColor.DARK_RED + clientRegisterReceive.getMessage() + ChatColor.RESET);\r\n                        player.sendMessage(ChatColor.YELLOW + &quot;Please type your password and email like this : &lt;password&gt;;&lt;email&gt;&quot; + ChatColor.RESET);\r\n                    }\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n        }.runTask(this.plugin);\r\n    }\r\n```\r\n\r\nKtor Log:\r\n```\r\n2023-07-09 09:07:52.911 [eventLoopGroupProxy-4-1] TRACE io.ktor.server.sessions.Sessions - Sessions found for /api/client/register: connect\r\n2023-07-09 09:07:52.966 [eventLoopGroupProxy-4-1] TRACE io.ktor.routing.Routing - Trace for [api, client, register]\r\n/, segment:0 -&gt; SUCCESS @ /\r\n  /, segment:0 -&gt; SUCCESS @ /\r\n    /(method:GET), segment:0 -&gt; FAILURE &quot;Selector didn&#39;t match&quot; @ /(method:GET)\r\n    /connect, segment:0 -&gt; FAILURE &quot;Selector didn&#39;t match&quot; @ /connect\r\n    /register, segment:0 -&gt; FAILURE &quot;Selector didn&#39;t match&quot; @ /register\r\n    /(authenticate user-session), segment:0 -&gt; SUCCESS @ /(authenticate user-session)\r\n      /(authenticate user-session)/profile, segment:0 -&gt; FAILURE &quot;Selector didn&#39;t match&quot; @ /(authenticate user-session)/profile\r\n      /(authenticate user-session)/stores, segment:0 -&gt; FAILURE &quot;Selector didn&#39;t match&quot; @ /(authenticate user-session)/stores\r\n      /(authenticate user-session)/editUser, segment:0 -&gt; FAILURE &quot;Selector didn&#39;t match&quot; @ /(authenticate user-session)/editUser\r\n      /(authenticate user-session)/editSalary, segment:0 -&gt; FAILURE &quot;Selector didn&#39;t match&quot; @ /(authenticate user-session)/editSalary\r\n      /(authenticate user-session)/editMember, segment:0 -&gt; FAILURE &quot;Selector didn&#39;t match&quot; @ /(authenticate user-session)/editMember\r\n      /(authenticate user-session)/editStock, segment:0 -&gt; FAILURE &quot;Selector didn&#39;t match&quot; @ /(authenticate user-session)/editStock\r\n      /(authenticate user-session)/bailoutStock, segment:0 -&gt; FAILURE &quot;Selector didn&#39;t match&quot; @ /(authenticate user-session)/bailoutStock\r\n      /(authenticate user-session)/addStock, segment:0 -&gt; FAILURE &quot;Selector didn&#39;t match&quot; @ /(authenticate user-session)/addStock\r\n      /(authenticate user-session)/ajouterUnMembre, segment:0 -&gt; FAILURE &quot;Selector didn&#39;t match&quot; @ /(authenticate user-session)/ajouterUnMembre\r\n      /(authenticate user-session)/createShop, segment:0 -&gt; FAILURE &quot;Selector didn&#39;t match&quot; @ /(authenticate user-session)/createShop\r\n      /(authenticate user-session)/removeMember, segment:0 -&gt; FAILURE &quot;Selector didn&#39;t match&quot; @ /(authenticate user-session)/removeMember\r\n      /(authenticate user-session)/disconnect, segment:0 -&gt; FAILURE &quot;Selector didn&#39;t match&quot; @ /(authenticate user-session)/disconnect\r\n  /assets, segment:0 -&gt; FAILURE &quot;Selector didn&#39;t match&quot; @ /assets\r\n  /(authenticate api-bearer), segment:0 -&gt; SUCCESS @ /(authenticate api-bearer)\r\n    /(authenticate api-bearer)/api, segment:1 -&gt; SUCCESS @ /(authenticate api-bearer)/api\r\n      /(authenticate api-bearer)/api/, segment:1 -&gt; SUCCESS @ /(authenticate api-bearer)/api/\r\n        /(authenticate api-bearer)/api/client, segment:2 -&gt; SUCCESS @ /(authenticate api-bearer)/api/client\r\n          /(authenticate api-bearer)/api/client/, segment:2 -&gt; SUCCESS @ /(authenticate api-bearer)/api/client/\r\n            /(authenticate api-bearer)/api/client/connect, segment:2 -&gt; FAILURE &quot;Selector didn&#39;t match&quot; @ /(authenticate api-bearer)/api/client/connect\r\n            /(authenticate api-bearer)/api/client/inventory, segment:2 -&gt; FAILURE &quot;Selector didn&#39;t match&quot; @ /(authenticate api-bearer)/api/client/inventory\r\n            /(authenticate api-bearer)/api/client/register, segment:3 -&gt; SUCCESS @ /(authenticate api-bearer)/api/client/register\r\n              /(authenticate api-bearer)/api/client/register/(method:POST), segment:3 -&gt; SUCCESS @ /(authenticate api-bearer)/api/client/register/(method:POST)\r\n            /(authenticate api-bearer)/api/client/debit, segment:2 -&gt; FAILURE &quot;Selector didn&#39;t match&quot; @ /(authenticate api-bearer)/api/client/debit\r\n            /(authenticate api-bearer)/api/client/credit, segment:2 -&gt; FAILURE &quot;Selector didn&#39;t match&quot; @ /(authenticate api-bearer)/api/client/credit\r\n            /(authenticate api-bearer)/api/client/pay, segment:2 -&gt; FAILURE &quot;Selector didn&#39;t match&quot; @ /(authenticate api-bearer)/api/client/pay\r\n            /(authenticate api-bearer)/api/client/updateInventory, segment:2 -&gt; FAILURE &quot;Selector didn&#39;t match&quot; @ /(authenticate api-bearer)/api/client/updateInventory\r\n        /(authenticate api-bearer)/api/store, segment:1 -&gt; FAILURE &quot;Selector didn&#39;t match&quot; @ /(authenticate api-bearer)/api/store\r\nMatched routes:\r\n  &quot;&quot; -&gt; &quot;(authenticate api-bearer)&quot; -&gt; &quot;api&quot; -&gt; &quot;&lt;slash&gt;&quot; -&gt; &quot;client&quot; -&gt; &quot;&lt;slash&gt;&quot; -&gt; &quot;register&quot; -&gt; &quot;(method:POST)&quot;\r\nRoute resolve result:\r\n  SUCCESS @ /(authenticate api-bearer)/api/client/register/(method:POST)\r\n2023-07-09 09:07:52.985 [eventLoopGroupProxy-4-1] TRACE io.ktor.server.auth.Authentication - Trying to authenticate /api/client/register with api-bearer\r\n2023-07-09 09:07:53.008 [eventLoopGroupProxy-4-1] TRACE io.ktor.server.auth.Authentication - Authentication succeeded for /api/client/register with provider io.ktor.server.auth.BearerAuthenticationProvider@5adad75b\r\n2023-07-09 09:07:53.084 [eventLoopGroupProxy-4-1] TRACE i.k.server.engine.DefaultTransform - No Default Transformations found for class io.ktor.utils.io.ByteBufferChannel and expected type TypeInfo(type=class fr.plaglefleau.models.api.client.receive.RegisterReceive, reifiedType=class fr.plaglefleau.models.api.client.receive.RegisterReceive, kotlinType=fr.plaglefleau.models.api.client.receive.RegisterReceive) for call /api/client/register\r\n2023-07-09 09:07:53.121 [eventLoopGroupProxy-4-1] TRACE i.k.s.p.c.ContentNegotiation - Skipping content converter for request type class fr.plaglefleau.models.api.client.receive.RegisterReceive because content type */* does not match application/json\r\n2023-07-09 09:07:53.121 [eventLoopGroupProxy-4-1] TRACE i.k.s.p.c.ContentNegotiation - No suitable content converter found for request type class fr.plaglefleau.models.api.client.receive.RegisterReceive\r\n2023-07-09 09:07:53.138 [eventLoopGroupProxy-4-1] TRACE io.ktor.server.sessions.Sessions - Sending session data for /api/client/register: connect\r\n2023-07-09 09:07:53.141 [eventLoopGroupProxy-4-1] TRACE i.k.s.p.c.ContentNegotiation - Skipping response body transformation from HttpStatusCode to OutgoingContent for the POST /api/client/register request because the HttpStatusCode type is ignored. See [ContentNegotiationConfig::ignoreType].\r\n```\r\n\r\nHere is my JSON in postman and in my plugin.\r\n```json\r\n{\r\n    &quot;username&quot;:&quot;PlagLeFleau&quot;,\r\n    &quot;password&quot;:&quot;PlagLeFleau0745&quot;,\r\n    &quot;email&quot;:&quot;louisdufourd@gmail.com&quot;\r\n}\r\n```\r\n\r\nI found were the probl&#232;me is it&#39;s simple i just don&#39;t tell the server that my request content is a json so with HttpRequest i should create my request like this\r\n```java\r\nHttpRequest request = HttpRequest.newBuilder(uri)\r\n                        .POST(HttpRequest.BodyPublishers.ofString(json))\r\n                        .header(&quot;Authorization&quot;, &quot;Bearer &quot; + Token.TOKEN)\r\n                        .header(&quot;Content-Type&quot;, &quot;application/json&quot;)\r\n                        .build();\r\n```","title":"The KTOR server refuses my plugin&#39;s register request Solved","body":"<p>I am making a KTOR server that aims to allow the player to buy/sell IG items for money in game item. To do this, the person must be able to connect/register to the site. But, as I'm using the Minecraft nickname to facilitate the item give, it's imperative that the player registers via the Minecraft server. However, when I send my request, I get an error telling me that the response from the KTOR server is empty (the body, to be precise). I've run some tests and it turns out that the server doesn't do anything when I send the request. You can also see that when the KTOR server receives the request, it can't convert the JOIN into the desired object. I wanted to check whether the problem came from the JSON with postman, but the server responded and executed my request. So here's my error message, my register method and the log of the KTOR server when it receives my request and <a href=\"https://github.com/LouisDufourd/Boutique\" rel=\"nofollow noreferrer\">here</a>'s my KTOR server on GitHub.</p>\n<p>Error:</p>\n<pre><code>[08:54:25] [Server thread/WARN]: java.lang.NullPointerException: Cannot invoke &quot;fr.plaglefleau.inventorytojson.models.ClientRegisterReceive.isRegister()&quot; because &quot;clientRegisterReceive&quot; is null\n[08:54:25] [Server thread/WARN]:        at fr.plaglefleau.inventorytojson.listeners.ConnectListener$2.run(ConnectListener.java:214)\n[08:54:25] [Server thread/WARN]:        at org.bukkit.craftbukkit.v1_20_R1.scheduler.CraftTask.run(CraftTask.java:82)\n[08:54:25] [Server thread/WARN]:        at org.bukkit.craftbukkit.v1_20_R1.scheduler.CraftScheduler.mainThreadHeartbeat(CraftScheduler.java:415)\n[08:54:25] [Server thread/WARN]:        at net.minecraft.server.MinecraftServer.b(MinecraftServer.java:1257)\n[08:54:25] [Server thread/WARN]:        at net.minecraft.server.dedicated.DedicatedServer.b(DedicatedServer.java:388)\n[08:54:25] [Server thread/WARN]:        at net.minecraft.server.MinecraftServer.a(MinecraftServer.java:1198)\n[08:54:25] [Server thread/WARN]:        at net.minecraft.server.MinecraftServer.w(MinecraftServer.java:1015)\n[08:54:25] [Server thread/WARN]:        at net.minecraft.server.MinecraftServer.lambda$0(MinecraftServer.java:304)\n[08:54:25] [Server thread/WARN]:        at java.base/java.lang.Thread.run(Thread.java:833)\n</code></pre>\n<p>Java class:</p>\n<pre><code>public void register(Player player, String message) {\n        String[] register = message.replace(&quot;&gt;&quot;,&quot;&quot;).replace(&quot;&lt;&quot;,&quot;&quot;).split(&quot;;&quot;);\n        String json = new Gson().toJson(\n                new Register(\n                        player.getName(),\n                        register[0],\n                        register[1]\n                )\n        );\n        System.out.println(ConsoleColor.YELLOW + json + ConsoleColor.RESET);\n        new BukkitRunnable() {\n            public void run() {\n                URI uri = URI.create(&quot;http://127.0.0.1/api/client/register&quot;);\n                HttpClient client = HttpClient.newHttpClient();\n                HttpRequest request = HttpRequest.newBuilder(uri)\n                        .POST(HttpRequest.BodyPublishers.ofString(json))\n                        .header(&quot;Authorization&quot;, &quot;Bearer &quot; + Token.TOKEN)\n                        .build();\n                try {\n                    //send and get the response\n                    HttpResponse&lt;String&gt; response = client.send(request, HttpResponse.BodyHandlers.ofString());\n                    System.out.println(ConsoleColor.YELLOW + response.body() + ConsoleColor.RESET);\n                    if(response.body().isBlank()) {\n                        System.out.println(ConsoleColor.YELLOW + &quot;The body is Blank&quot; + ConsoleColor.RESET);\n                    }\n                    ClientRegisterReceive clientRegisterReceive = new Gson().fromJson(response.body(), ClientRegisterReceive.class);\n                    if(clientRegisterReceive.isRegister()) {\n                        player.sendMessage(ChatColor.GREEN + clientRegisterReceive.getMessage() + &quot;\\nWelcome &quot; + player.getName() + ChatColor.RESET);\n                        registerPlayers.remove(player.getUniqueId());\n                        players.remove(player.getUniqueId());\n                    } else {\n                        player.sendMessage(ChatColor.DARK_RED + clientRegisterReceive.getMessage() + ChatColor.RESET);\n                        player.sendMessage(ChatColor.YELLOW + &quot;Please type your password and email like this : &lt;password&gt;;&lt;email&gt;&quot; + ChatColor.RESET);\n                    }\n                } catch (Exception e) {\n                    e.printStackTrace();\n                }\n            }\n        }.runTask(this.plugin);\n    }\n</code></pre>\n<p>Ktor Log:</p>\n<pre><code>2023-07-09 09:07:52.911 [eventLoopGroupProxy-4-1] TRACE io.ktor.server.sessions.Sessions - Sessions found for /api/client/register: connect\n2023-07-09 09:07:52.966 [eventLoopGroupProxy-4-1] TRACE io.ktor.routing.Routing - Trace for [api, client, register]\n/, segment:0 -&gt; SUCCESS @ /\n  /, segment:0 -&gt; SUCCESS @ /\n    /(method:GET), segment:0 -&gt; FAILURE &quot;Selector didn't match&quot; @ /(method:GET)\n    /connect, segment:0 -&gt; FAILURE &quot;Selector didn't match&quot; @ /connect\n    /register, segment:0 -&gt; FAILURE &quot;Selector didn't match&quot; @ /register\n    /(authenticate user-session), segment:0 -&gt; SUCCESS @ /(authenticate user-session)\n      /(authenticate user-session)/profile, segment:0 -&gt; FAILURE &quot;Selector didn't match&quot; @ /(authenticate user-session)/profile\n      /(authenticate user-session)/stores, segment:0 -&gt; FAILURE &quot;Selector didn't match&quot; @ /(authenticate user-session)/stores\n      /(authenticate user-session)/editUser, segment:0 -&gt; FAILURE &quot;Selector didn't match&quot; @ /(authenticate user-session)/editUser\n      /(authenticate user-session)/editSalary, segment:0 -&gt; FAILURE &quot;Selector didn't match&quot; @ /(authenticate user-session)/editSalary\n      /(authenticate user-session)/editMember, segment:0 -&gt; FAILURE &quot;Selector didn't match&quot; @ /(authenticate user-session)/editMember\n      /(authenticate user-session)/editStock, segment:0 -&gt; FAILURE &quot;Selector didn't match&quot; @ /(authenticate user-session)/editStock\n      /(authenticate user-session)/bailoutStock, segment:0 -&gt; FAILURE &quot;Selector didn't match&quot; @ /(authenticate user-session)/bailoutStock\n      /(authenticate user-session)/addStock, segment:0 -&gt; FAILURE &quot;Selector didn't match&quot; @ /(authenticate user-session)/addStock\n      /(authenticate user-session)/ajouterUnMembre, segment:0 -&gt; FAILURE &quot;Selector didn't match&quot; @ /(authenticate user-session)/ajouterUnMembre\n      /(authenticate user-session)/createShop, segment:0 -&gt; FAILURE &quot;Selector didn't match&quot; @ /(authenticate user-session)/createShop\n      /(authenticate user-session)/removeMember, segment:0 -&gt; FAILURE &quot;Selector didn't match&quot; @ /(authenticate user-session)/removeMember\n      /(authenticate user-session)/disconnect, segment:0 -&gt; FAILURE &quot;Selector didn't match&quot; @ /(authenticate user-session)/disconnect\n  /assets, segment:0 -&gt; FAILURE &quot;Selector didn't match&quot; @ /assets\n  /(authenticate api-bearer), segment:0 -&gt; SUCCESS @ /(authenticate api-bearer)\n    /(authenticate api-bearer)/api, segment:1 -&gt; SUCCESS @ /(authenticate api-bearer)/api\n      /(authenticate api-bearer)/api/, segment:1 -&gt; SUCCESS @ /(authenticate api-bearer)/api/\n        /(authenticate api-bearer)/api/client, segment:2 -&gt; SUCCESS @ /(authenticate api-bearer)/api/client\n          /(authenticate api-bearer)/api/client/, segment:2 -&gt; SUCCESS @ /(authenticate api-bearer)/api/client/\n            /(authenticate api-bearer)/api/client/connect, segment:2 -&gt; FAILURE &quot;Selector didn't match&quot; @ /(authenticate api-bearer)/api/client/connect\n            /(authenticate api-bearer)/api/client/inventory, segment:2 -&gt; FAILURE &quot;Selector didn't match&quot; @ /(authenticate api-bearer)/api/client/inventory\n            /(authenticate api-bearer)/api/client/register, segment:3 -&gt; SUCCESS @ /(authenticate api-bearer)/api/client/register\n              /(authenticate api-bearer)/api/client/register/(method:POST), segment:3 -&gt; SUCCESS @ /(authenticate api-bearer)/api/client/register/(method:POST)\n            /(authenticate api-bearer)/api/client/debit, segment:2 -&gt; FAILURE &quot;Selector didn't match&quot; @ /(authenticate api-bearer)/api/client/debit\n            /(authenticate api-bearer)/api/client/credit, segment:2 -&gt; FAILURE &quot;Selector didn't match&quot; @ /(authenticate api-bearer)/api/client/credit\n            /(authenticate api-bearer)/api/client/pay, segment:2 -&gt; FAILURE &quot;Selector didn't match&quot; @ /(authenticate api-bearer)/api/client/pay\n            /(authenticate api-bearer)/api/client/updateInventory, segment:2 -&gt; FAILURE &quot;Selector didn't match&quot; @ /(authenticate api-bearer)/api/client/updateInventory\n        /(authenticate api-bearer)/api/store, segment:1 -&gt; FAILURE &quot;Selector didn't match&quot; @ /(authenticate api-bearer)/api/store\nMatched routes:\n  &quot;&quot; -&gt; &quot;(authenticate api-bearer)&quot; -&gt; &quot;api&quot; -&gt; &quot;&lt;slash&gt;&quot; -&gt; &quot;client&quot; -&gt; &quot;&lt;slash&gt;&quot; -&gt; &quot;register&quot; -&gt; &quot;(method:POST)&quot;\nRoute resolve result:\n  SUCCESS @ /(authenticate api-bearer)/api/client/register/(method:POST)\n2023-07-09 09:07:52.985 [eventLoopGroupProxy-4-1] TRACE io.ktor.server.auth.Authentication - Trying to authenticate /api/client/register with api-bearer\n2023-07-09 09:07:53.008 [eventLoopGroupProxy-4-1] TRACE io.ktor.server.auth.Authentication - Authentication succeeded for /api/client/register with provider io.ktor.server.auth.BearerAuthenticationProvider@5adad75b\n2023-07-09 09:07:53.084 [eventLoopGroupProxy-4-1] TRACE i.k.server.engine.DefaultTransform - No Default Transformations found for class io.ktor.utils.io.ByteBufferChannel and expected type TypeInfo(type=class fr.plaglefleau.models.api.client.receive.RegisterReceive, reifiedType=class fr.plaglefleau.models.api.client.receive.RegisterReceive, kotlinType=fr.plaglefleau.models.api.client.receive.RegisterReceive) for call /api/client/register\n2023-07-09 09:07:53.121 [eventLoopGroupProxy-4-1] TRACE i.k.s.p.c.ContentNegotiation - Skipping content converter for request type class fr.plaglefleau.models.api.client.receive.RegisterReceive because content type */* does not match application/json\n2023-07-09 09:07:53.121 [eventLoopGroupProxy-4-1] TRACE i.k.s.p.c.ContentNegotiation - No suitable content converter found for request type class fr.plaglefleau.models.api.client.receive.RegisterReceive\n2023-07-09 09:07:53.138 [eventLoopGroupProxy-4-1] TRACE io.ktor.server.sessions.Sessions - Sending session data for /api/client/register: connect\n2023-07-09 09:07:53.141 [eventLoopGroupProxy-4-1] TRACE i.k.s.p.c.ContentNegotiation - Skipping response body transformation from HttpStatusCode to OutgoingContent for the POST /api/client/register request because the HttpStatusCode type is ignored. See [ContentNegotiationConfig::ignoreType].\n</code></pre>\n<p>Here is my JSON in postman and in my plugin.</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;username&quot;:&quot;PlagLeFleau&quot;,\n    &quot;password&quot;:&quot;PlagLeFleau0745&quot;,\n    &quot;email&quot;:&quot;louisdufourd@gmail.com&quot;\n}\n</code></pre>\n<p>I found were the problème is it's simple i just don't tell the server that my request content is a json so with HttpRequest i should create my request like this</p>\n<pre class=\"lang-java prettyprint-override\"><code>HttpRequest request = HttpRequest.newBuilder(uri)\n                        .POST(HttpRequest.BodyPublishers.ofString(json))\n                        .header(&quot;Authorization&quot;, &quot;Bearer &quot; + Token.TOKEN)\n                        .header(&quot;Content-Type&quot;, &quot;application/json&quot;)\n                        .build();\n</code></pre>\n"},{"tags":["java","maven","gradle"],"comments":[{"owner":{"account_id":367578,"reputation":3080,"user_id":713861,"accept_rate":72,"display_name":"GreenSaguaro"},"score":0,"creation_date":1689053962,"post_id":76658392,"comment_id":135154729,"body_markdown":"What do you get when you compare the contents of the 2 WARs?","body":"What do you get when you compare the contents of the 2 WARs?"},{"owner":{"account_id":969227,"reputation":1332,"user_id":992094,"accept_rate":43,"display_name":"Gaurav"},"score":0,"creation_date":1689077675,"post_id":76658392,"comment_id":135159320,"body_markdown":"WARs are exactly the same. With Gradle changes only my tomcat APIs are not working. Rest all application is working fine","body":"WARs are exactly the same. With Gradle changes only my tomcat APIs are not working. Rest all application is working fine"},{"owner":{"account_id":367578,"reputation":3080,"user_id":713861,"accept_rate":72,"display_name":"GreenSaguaro"},"score":0,"creation_date":1689103649,"post_id":76658392,"comment_id":135165144,"body_markdown":"If your WARs from Maven and Gradle have exactly the same contents. Literally the exact same files and file contents, then your problem is not with Gradle. If you take each of them and deploy them locally to the exact same Tomcat instance, and the Maven works and Gradle does not, then there is a difference between the two WARs that is being over looked. I would suggest unzippling both of them and comparing the two folders with Beyond Compare.","body":"If your WARs from Maven and Gradle have exactly the same contents. Literally the exact same files and file contents, then your problem is not with Gradle. If you take each of them and deploy them locally to the exact same Tomcat instance, and the Maven works and Gradle does not, then there is a difference between the two WARs that is being over looked. I would suggest unzippling both of them and comparing the two folders with Beyond Compare."}],"owner":{"account_id":969227,"reputation":1332,"user_id":992094,"accept_rate":43,"display_name":"Gaurav"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689042863,"creation_date":1689042863,"question_id":76658392,"body_markdown":"I am migrating from Maven to Gradle(8.0.2) and seeing this error when I deploy my application. `gradle clean build` is successful and generating war file. I compared the gradle build with the maven, all the dependencies are same, hadoop jar is there in the `war` file under libs folder. This is how my generating war:\r\n\r\n```\r\ntasks.withType(Copy).all { duplicatesStrategy &#39;exclude&#39; }\r\n\r\nconfigurations {\r\nimplementation {\r\n    canBeResolved = true\r\n    canBeConsumed = true\r\n}\r\n}\r\n\r\nwar {\r\n    archiveFileName = &quot;test.war&quot;\r\n    webAppDirectory = file(&#39;src/main/webapp&#39;)\r\n    classpath configurations.runtimeClasspath + configurations.implementation\r\n}\r\n\r\ndependencies {\r\n// all my dependencies... \r\nimplementation //dependencies\r\n}\r\n```\r\n\r\nCan someone please help with this issue?","title":"&quot;errMsg&quot;: &quot;Handler dispatch failed; nested exception is java.lang.NoClassDefFoundError: Could not initialize class org.apache.hadoop.security","body":"<p>I am migrating from Maven to Gradle(8.0.2) and seeing this error when I deploy my application. <code>gradle clean build</code> is successful and generating war file. I compared the gradle build with the maven, all the dependencies are same, hadoop jar is there in the <code>war</code> file under libs folder. This is how my generating war:</p>\n<pre><code>tasks.withType(Copy).all { duplicatesStrategy 'exclude' }\n\nconfigurations {\nimplementation {\n    canBeResolved = true\n    canBeConsumed = true\n}\n}\n\nwar {\n    archiveFileName = &quot;test.war&quot;\n    webAppDirectory = file('src/main/webapp')\n    classpath configurations.runtimeClasspath + configurations.implementation\n}\n\ndependencies {\n// all my dependencies... \nimplementation //dependencies\n}\n</code></pre>\n<p>Can someone please help with this issue?</p>\n"},{"tags":["java","nashorn"],"comments":[{"owner":{"account_id":6598344,"reputation":226,"user_id":5097384,"display_name":"haupz"},"score":2,"creation_date":1575232548,"post_id":59126867,"comment_id":104487289,"body_markdown":"Hello - it&#39;s unclear what it is exactly that you want to achieve. In any case, the Nashorn JavaScript implementation is no longer part of Java since version 11. See https://openjdk.java.net/jeps/335 for details. Which Java version did you work with before installing 11?","body":"Hello - it&#39;s unclear what it is exactly that you want to achieve. In any case, the Nashorn JavaScript implementation is no longer part of Java since version 11. See <a href=\"https://openjdk.java.net/jeps/335\" rel=\"nofollow noreferrer\">openjdk.java.net/jeps/335</a> for details. Which Java version did you work with before installing 11?"},{"owner":{"account_id":1614042,"reputation":7468,"user_id":1492229,"accept_rate":100,"display_name":"asmgx"},"score":1,"creation_date":1575238186,"post_id":59126867,"comment_id":104488861,"body_markdown":"the open source seems since 2017, is there a way to include nashorn to the current java version","body":"the open source seems since 2017, is there a way to include nashorn to the current java version"},{"owner":{"account_id":12908744,"reputation":3232,"user_id":9335205,"accept_rate":50,"display_name":"JGleason"},"score":0,"creation_date":1589295369,"post_id":59126867,"comment_id":109233093,"body_markdown":"Same issue any solution?","body":"Same issue any solution?"},{"owner":{"account_id":5941047,"reputation":818,"user_id":4672238,"accept_rate":60,"display_name":"jeninja"},"score":0,"creation_date":1617740242,"post_id":59126867,"comment_id":118388869,"body_markdown":"Luckily in my case the import wasn&#39;t being used, so I deleted it and this solved my problem.","body":"Luckily in my case the import wasn&#39;t being used, so I deleted it and this solved my problem."}],"answers":[{"tags":[],"owner":{"account_id":8177883,"reputation":670,"user_id":6156080,"display_name":"Richard"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1595805277,"creation_date":1595805277,"answer_id":63106743,"question_id":59126867,"body_markdown":"Not sure if this will help you so many months later, I think you used the spring web initializer to create a new project, at the test class you will find you are importing that class, delete the import statement and then delete the test case, then try to re build the project and it should run, as it was mentioned at the comments the class is not longer part of Java 11, probably later on you can try to use Junit for some of your test cases","title":"jdk.nashorn.internal.ir.annotations does not exist","body":"<p>Not sure if this will help you so many months later, I think you used the spring web initializer to create a new project, at the test class you will find you are importing that class, delete the import statement and then delete the test case, then try to re build the project and it should run, as it was mentioned at the comments the class is not longer part of Java 11, probably later on you can try to use Junit for some of your test cases</p>\n"},{"tags":[],"owner":{"account_id":21110409,"reputation":1,"user_id":15518487,"display_name":"Dru"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666928310,"creation_date":1666928310,"answer_id":74230382,"question_id":59126867,"body_markdown":"Adding `JAVA_HOME` on my env fixed the issue.","title":"jdk.nashorn.internal.ir.annotations does not exist","body":"<p>Adding <code>JAVA_HOME</code> on my env fixed the issue.</p>\n"},{"tags":[],"owner":{"account_id":28872439,"reputation":1,"user_id":22113694,"display_name":"Jayanta Karmakar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689006416,"creation_date":1689006416,"answer_id":76655651,"question_id":59126867,"body_markdown":"jdk.nashorn is removed in java 15","title":"jdk.nashorn.internal.ir.annotations does not exist","body":"<p>jdk.nashorn is removed in java 15</p>\n"},{"tags":[],"owner":{"account_id":8186639,"reputation":127,"user_id":6162262,"display_name":"tbotalla"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689041770,"creation_date":1689041770,"answer_id":76658341,"question_id":59126867,"body_markdown":"In my case the problem was running a Gradle task from the command line instead of from Intellij IDEA. Switching the JAVA_HOME to the correct one (Java 8 in my case) solved the problem","title":"jdk.nashorn.internal.ir.annotations does not exist","body":"<p>In my case the problem was running a Gradle task from the command line instead of from Intellij IDEA. Switching the JAVA_HOME to the correct one (Java 8 in my case) solved the problem</p>\n"}],"owner":{"account_id":1614042,"reputation":7468,"user_id":1492229,"accept_rate":100,"display_name":"asmgx"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20343,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":63106743,"answer_count":4,"score":6,"last_activity_date":1689041770,"creation_date":1575213314,"question_id":59126867,"body_markdown":"I am very new to Java and using IntelliJ\r\nI am running an open source file.\r\n\r\nbut the building giving this error\r\n\r\n&gt; Error:(21, 43) java: package jdk.nashorn.internal.ir.annotations does\r\n&gt; not exist\r\n\r\nI tried installing JDK 11 but still getting the same error.\r\n\r\nWhat I have to do so the system recognize this library?","title":"jdk.nashorn.internal.ir.annotations does not exist","body":"<p>I am very new to Java and using IntelliJ\nI am running an open source file.</p>\n\n<p>but the building giving this error</p>\n\n<blockquote>\n  <p>Error:(21, 43) java: package jdk.nashorn.internal.ir.annotations does\n  not exist</p>\n</blockquote>\n\n<p>I tried installing JDK 11 but still getting the same error.</p>\n\n<p>What I have to do so the system recognize this library?</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1688990797,"creation_date":1688990027,"answer_id":76653476,"question_id":76653429,"body_markdown":"The first argument to replaceAll has to be a correctly-formed regular expression, not any old character string.  Your complex piece of HTML is not a regular expression.\r\n\r\nIt might be simpler to handle this &#39;manually&#39; by using `indexOf` to locate the string you want to remove, and then `substring` to remove it.\r\n\r\n[Documentation for String](https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#replaceAll-java.lang.String-java.lang.String-).\r\n\r\nAlternatively, and I have not tried this, consider wrapping the entire &#39;divPrefix&#39; string in `\\Q` and `\\E`. \r\n\r\n[Documentation for Pattern](https://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html).\r\n\r\nPersonally, I don&#39;t like that approach; I find regular expressions to be somewhat overused, and in this case we are using a regular expression where we don&#39;t actually want a regular expression, so we&#39;re finding a way to make it be treated as &#39;not really a regular expression&#39;.\r\n","title":"Illegal repetition near index error when using replaceAll in string","body":"<p>The first argument to replaceAll has to be a correctly-formed regular expression, not any old character string.  Your complex piece of HTML is not a regular expression.</p>\n<p>It might be simpler to handle this 'manually' by using <code>indexOf</code> to locate the string you want to remove, and then <code>substring</code> to remove it.</p>\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#replaceAll-java.lang.String-java.lang.String-\" rel=\"nofollow noreferrer\">Documentation for String</a>.</p>\n<p>Alternatively, and I have not tried this, consider wrapping the entire 'divPrefix' string in <code>\\Q</code> and <code>\\E</code>.</p>\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html\" rel=\"nofollow noreferrer\">Documentation for Pattern</a>.</p>\n<p>Personally, I don't like that approach; I find regular expressions to be somewhat overused, and in this case we are using a regular expression where we don't actually want a regular expression, so we're finding a way to make it be treated as 'not really a regular expression'.</p>\n"},{"tags":[],"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1688991461,"creation_date":1688991461,"answer_id":76653665,"question_id":76653429,"body_markdown":"The `replaceAll` method takes a regex as the first argument. You just want it to match a regular substring. For that, use [String.replace][1] instead.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#replace(java.lang.CharSequence,java.lang.CharSequence)","title":"Illegal repetition near index error when using replaceAll in string","body":"<p>The <code>replaceAll</code> method takes a regex as the first argument. You just want it to match a regular substring. For that, use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html#replace(java.lang.CharSequence,java.lang.CharSequence)\" rel=\"nofollow noreferrer\">String.replace</a> instead.</p>\n"},{"tags":[],"owner":{"account_id":28020964,"reputation":1205,"user_id":21401783,"display_name":"Dinux"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689011200,"creation_date":1688993986,"answer_id":76653994,"question_id":76653429,"body_markdown":"When you use the the replaceAll() function, you need to pass a regex(regular expression) as the first argument. For achieving your purpose, you need to use the replace() function. Modified code:\r\n~~~\r\nrequest=request.replace(divPrefix,&quot;&quot;);\r\nrequest=request.replace(&quot;&lt;/div&gt;&quot;,&quot;&quot;);\r\n~~~","title":"Illegal repetition near index error when using replaceAll in string","body":"<p>When you use the the replaceAll() function, you need to pass a regex(regular expression) as the first argument. For achieving your purpose, you need to use the replace() function. Modified code:</p>\n<pre><code>request=request.replace(divPrefix,&quot;&quot;);\nrequest=request.replace(&quot;&lt;/div&gt;&quot;,&quot;&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689039988,"creation_date":1689039988,"answer_id":76658259,"question_id":76653429,"body_markdown":"Use the _[String#replace](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#replace(java.lang.CharSequence,java.lang.CharSequence))_ method, and not the _[String#replaceAll](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#replaceAll(java.lang.String,java.lang.String))_ method.\r\n\r\nThe latter will interpret your argument as a _[regular expression pattern](https://en.wikipedia.org/wiki/Regular_expression)_.\r\n\r\n```java\r\nString request = &quot;&lt;div class=\\&quot;artemis-editor\\&quot; style=\\&quot;font-family:Arial,sans-serif!important;font-size: 11px!important;\\&quot;&gt;&lt;style&gt;.artemis-editor,.artemis-editor * {font-family:Arial,sans-serif!important;font-size: 11px!important;}&lt;/style&gt;&lt;p&gt;Paragraph content&lt;/p&gt;&lt;/div&gt;&quot;;\r\nString divPrefix = &quot;&lt;div class=\\&quot;artemis-editor\\&quot; style=\\&quot;font-family:Arial,sans-serif!important;font-size: 11px!important;\\&quot;&gt;&lt;style&gt;.artemis-editor,.artemis-editor * {font-family:Arial,sans-serif!important;font-size: 11px!important;}&lt;/style&gt;&quot;;\r\nrequest=request.replace(divPrefix,&quot;&quot;);\r\nrequest=request.replace(&quot;&lt;/div&gt;&quot;,&quot;&quot;);\r\n\r\nSystem.out.println(request);\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n&lt;p&gt;Paragraph content&lt;/p&gt;\r\n```","title":"Illegal repetition near index error when using replaceAll in string","body":"<p>Use the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#replace(java.lang.CharSequence,java.lang.CharSequence)\" rel=\"nofollow noreferrer\">String#replace</a></em> method, and not the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#replaceAll(java.lang.String,java.lang.String)\" rel=\"nofollow noreferrer\">String#replaceAll</a></em> method.</p>\n<p>The latter will interpret your argument as a <em><a href=\"https://en.wikipedia.org/wiki/Regular_expression\" rel=\"nofollow noreferrer\">regular expression pattern</a></em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String request = &quot;&lt;div class=\\&quot;artemis-editor\\&quot; style=\\&quot;font-family:Arial,sans-serif!important;font-size: 11px!important;\\&quot;&gt;&lt;style&gt;.artemis-editor,.artemis-editor * {font-family:Arial,sans-serif!important;font-size: 11px!important;}&lt;/style&gt;&lt;p&gt;Paragraph content&lt;/p&gt;&lt;/div&gt;&quot;;\nString divPrefix = &quot;&lt;div class=\\&quot;artemis-editor\\&quot; style=\\&quot;font-family:Arial,sans-serif!important;font-size: 11px!important;\\&quot;&gt;&lt;style&gt;.artemis-editor,.artemis-editor * {font-family:Arial,sans-serif!important;font-size: 11px!important;}&lt;/style&gt;&quot;;\nrequest=request.replace(divPrefix,&quot;&quot;);\nrequest=request.replace(&quot;&lt;/div&gt;&quot;,&quot;&quot;);\n\nSystem.out.println(request);\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>&lt;p&gt;Paragraph content&lt;/p&gt;\n</code></pre>\n"}],"owner":{"account_id":21209365,"reputation":37,"user_id":15598320,"display_name":"iswarya"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":4,"score":1,"last_activity_date":1689039988,"creation_date":1688989702,"question_id":76653429,"body_markdown":"   I want to remove the divPrefix string from request string, but I am getting &quot;illegal repetition near index 142&quot; error message. Could you please help to resolve this issue.\r\n\r\nNote : This divPrefix is in the json request, so it will be there in multiple places. Is there a change to replace it in one shot?\r\n    \r\n    String request=&quot;&lt;div class=&quot;artemis-editor&quot; style=&quot;font-family:Arial,sans-serif!important;font-size: 11px!important;&quot;&gt;&lt;style&gt;.artemis-editor,.artemis-editor * {font-family:Arial,sans-serif!important;font-size: 11px!important;}&lt;/style&gt;&lt;p&gt;Paragraph content&lt;/p&gt;&lt;/div&gt;&quot;;\r\n    \r\n    String divPrefix=&quot;&lt;div class=&quot;artemis-editor&quot; style=&quot;font-family:Arial,sans-serif!important;font-size: 11px!important;&quot;&gt;&lt;style&gt;.artemis-editor,.artemis-editor * {font-family:Arial,sans-serif!important;font-size: 11px!important;}&lt;/style&gt;&quot;;\r\n    \r\n    request=request.replaceAll(divPrefix,&quot;&quot;);\r\n    request=request.replaceAll(&quot;&lt;/div&gt;&quot;,&quot;&quot;);\r\n    \r\n    Expected output:\r\n    &lt;p&gt;Paragraph content&lt;/p&gt;","title":"Illegal repetition near index error when using replaceAll in string","body":"<p>I want to remove the divPrefix string from request string, but I am getting &quot;illegal repetition near index 142&quot; error message. Could you please help to resolve this issue.</p>\n<p>Note : This divPrefix is in the json request, so it will be there in multiple places. Is there a change to replace it in one shot?</p>\n<pre><code>String request=&quot;&lt;div class=&quot;artemis-editor&quot; style=&quot;font-family:Arial,sans-serif!important;font-size: 11px!important;&quot;&gt;&lt;style&gt;.artemis-editor,.artemis-editor * {font-family:Arial,sans-serif!important;font-size: 11px!important;}&lt;/style&gt;&lt;p&gt;Paragraph content&lt;/p&gt;&lt;/div&gt;&quot;;\n\nString divPrefix=&quot;&lt;div class=&quot;artemis-editor&quot; style=&quot;font-family:Arial,sans-serif!important;font-size: 11px!important;&quot;&gt;&lt;style&gt;.artemis-editor,.artemis-editor * {font-family:Arial,sans-serif!important;font-size: 11px!important;}&lt;/style&gt;&quot;;\n\nrequest=request.replaceAll(divPrefix,&quot;&quot;);\nrequest=request.replaceAll(&quot;&lt;/div&gt;&quot;,&quot;&quot;);\n\nExpected output:\n&lt;p&gt;Paragraph content&lt;/p&gt;\n</code></pre>\n"},{"tags":["java","javafx","tableview","focus","controlsfx"],"answers":[{"tags":[],"owner":{"account_id":3769835,"reputation":964,"user_id":3132351,"display_name":"EverNight"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688908035,"creation_date":1688908035,"answer_id":76647631,"question_id":76603768,"body_markdown":"There&#39;s no such thing as a &quot;drop-in replacement&quot; ... it&#39;s a fairy tale.\r\n\r\nwhat you did there is create a table view, fill it with some stuff, and plop it in a scene container of a window. nothing else.\r\n\r\nto handle specific key listener stuff, you need to use `table.setOnKeyPressed(some_event_handler)` in order to assign a specific `javafx.event.EventHandler` which would do what you tell it to.\r\n\r\ni advise you to use a `javafx.scene.control.TableView` instance in debug mode in whatever case you have going on which actually works... figure out where that `onKeyPressed/Released` thing is being declared *(as in ... where the code block that gets executed once the listener kicks in a.k.a. handler)* ... and go from there ... then duplicate that block of code more or less after you declare your instance of `tableView2`\r\n\r\nit should look something like\r\n\r\n    tableView.setOnKeyReleased((KeyEvent t)-&gt; { // or key pressed ... or key down... \r\n        KeyCode key=t.getCode();\r\n        if (key==KeyCode.DOWN){\r\n            int pos=tableView.getSelectionModel().getSelectedIndex();\r\n            System.out.println(&quot;key released while at position :: &quot;+ pos);\r\n        }\r\n\r\n        // add similar for UP ... maybe left or right \r\n\r\n    });\r\n\r\n\r\n\r\n","title":"How do I get keyboard navigation for the SelectedRow in controlsfx.TableView2?","body":"<p>There's no such thing as a &quot;drop-in replacement&quot; ... it's a fairy tale.</p>\n<p>what you did there is create a table view, fill it with some stuff, and plop it in a scene container of a window. nothing else.</p>\n<p>to handle specific key listener stuff, you need to use <code>table.setOnKeyPressed(some_event_handler)</code> in order to assign a specific <code>javafx.event.EventHandler</code> which would do what you tell it to.</p>\n<p>i advise you to use a <code>javafx.scene.control.TableView</code> instance in debug mode in whatever case you have going on which actually works... figure out where that <code>onKeyPressed/Released</code> thing is being declared <em>(as in ... where the code block that gets executed once the listener kicks in a.k.a. handler)</em> ... and go from there ... then duplicate that block of code more or less after you declare your instance of <code>tableView2</code></p>\n<p>it should look something like</p>\n<pre><code>tableView.setOnKeyReleased((KeyEvent t)-&gt; { // or key pressed ... or key down... \n    KeyCode key=t.getCode();\n    if (key==KeyCode.DOWN){\n        int pos=tableView.getSelectionModel().getSelectedIndex();\n        System.out.println(&quot;key released while at position :: &quot;+ pos);\n    }\n\n    // add similar for UP ... maybe left or right \n\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7717111,"reputation":8764,"user_id":5844477,"display_name":"Sai Dandem"},"down_vote_count":1,"up_vote_count":3,"is_accepted":true,"score":2,"last_activity_date":1689038749,"creation_date":1689038749,"answer_id":76658199,"question_id":76603768,"body_markdown":"What you have observed is correct. It is indeed, that the default behaviour that is available in TableView is supressed or removed in TableView2.\r\n\r\nThe general key mapping behavior of TableView is implemented in **TableViewBehaviorBase.java** as below:\r\n\r\n    addDefaultMapping(tableViewInputMap,\r\n                    new KeyMapping(TAB, FocusTraversalInputMap::traverseNext),\r\n                    new KeyMapping(new KeyBinding(TAB).shift(), FocusTraversalInputMap::traversePrevious),\r\n    \r\n                    new KeyMapping(HOME, e -&gt; selectFirstRow()),\r\n                    new KeyMapping(END, e -&gt; selectLastRow()),\r\n    \r\n                    new KeyMapping(PAGE_UP, e -&gt; scrollUp()),\r\n                    new KeyMapping(PAGE_DOWN, e -&gt; scrollDown()),\r\n    \r\n                    new KeyMapping(LEFT, e -&gt; { if(isRTL()) selectRightCell(); else selectLeftCell(); }),\r\n                    new KeyMapping(KP_LEFT,e -&gt; { if(isRTL()) selectRightCell(); else selectLeftCell(); }),\r\n                    new KeyMapping(RIGHT, e -&gt; { if(isRTL()) selectLeftCell(); else selectRightCell(); }),\r\n                    new KeyMapping(KP_RIGHT, e -&gt; { if(isRTL()) selectLeftCell(); else selectRightCell(); }),\r\n    \r\n                    new KeyMapping(UP, e -&gt; selectPreviousRow()),\r\n                    new KeyMapping(KP_UP, e -&gt; selectPreviousRow()),\r\n                    new KeyMapping(DOWN, e -&gt; selectNextRow()),\r\n                    new KeyMapping(KP_DOWN, e -&gt; selectNextRow()),\r\n    \r\n                    new KeyMapping(LEFT,   e -&gt; { if(isRTL()) focusTraverseRight(); else focusTraverseLeft(); }),\r\n                    new KeyMapping(KP_LEFT, e -&gt; { if(isRTL()) focusTraverseRight(); else focusTraverseLeft(); }),\r\n                    new KeyMapping(RIGHT, e -&gt; { if(isRTL()) focusTraverseLeft(); else focusTraverseRight(); }),\r\n                    new KeyMapping(KP_RIGHT, e -&gt; { if(isRTL()) focusTraverseLeft(); else focusTraverseRight(); }),\r\n                    new KeyMapping(UP, FocusTraversalInputMap::traverseUp),\r\n                    new KeyMapping(KP_UP, FocusTraversalInputMap::traverseUp),\r\n                    new KeyMapping(DOWN, FocusTraversalInputMap::traverseDown),\r\n                    new KeyMapping(KP_DOWN, FocusTraversalInputMap::traverseDown),\r\n    \r\n                    new KeyMapping(new KeyBinding(HOME).shift(), e -&gt; selectAllToFirstRow()),\r\n                    new KeyMapping(new KeyBinding(END).shift(), e -&gt; selectAllToLastRow()),\r\n                    new KeyMapping(new KeyBinding(PAGE_UP).shift(), e -&gt; selectAllPageUp()),\r\n                    new KeyMapping(new KeyBinding(PAGE_DOWN).shift(), e -&gt; selectAllPageDown()),\r\n    \r\n                    new KeyMapping(new KeyBinding(UP).shift(), e -&gt; alsoSelectPrevious()),\r\n                    new KeyMapping(new KeyBinding(KP_UP).shift(), e -&gt; alsoSelectPrevious()),\r\n                    new KeyMapping(new KeyBinding(DOWN).shift(), e -&gt; alsoSelectNext()),\r\n                    new KeyMapping(new KeyBinding(KP_DOWN).shift(), e -&gt; alsoSelectNext()),\r\n    \r\n                    new KeyMapping(new KeyBinding(SPACE).shift(), e -&gt; selectAllToFocus(false)),\r\n                    new KeyMapping(new KeyBinding(SPACE).shortcut().shift(), e -&gt; selectAllToFocus(true)),\r\n    \r\n                    new KeyMapping(new KeyBinding(LEFT).shift(), e -&gt; { if(isRTL()) alsoSelectRightCell(); else alsoSelectLeftCell(); }),\r\n                    new KeyMapping(new KeyBinding(KP_LEFT).shift(),  e -&gt; { if(isRTL()) alsoSelectRightCell(); else alsoSelectLeftCell(); }),\r\n                    new KeyMapping(new KeyBinding(RIGHT).shift(),  e -&gt; { if(isRTL()) alsoSelectLeftCell(); else alsoSelectRightCell(); }),\r\n                    new KeyMapping(new KeyBinding(KP_RIGHT).shift(), e -&gt; { if(isRTL()) alsoSelectLeftCell(); else alsoSelectRightCell(); }),\r\n    \r\n                    new KeyMapping(new KeyBinding(UP).shortcut(), e -&gt; focusPreviousRow()),\r\n                    new KeyMapping(new KeyBinding(DOWN).shortcut(), e -&gt; focusNextRow()),\r\n                    new KeyMapping(new KeyBinding(RIGHT).shortcut(), e -&gt; { if(isRTL()) focusLeftCell(); else focusRightCell(); }),\r\n                    new KeyMapping(new KeyBinding(KP_RIGHT).shortcut(), e -&gt; { if(isRTL()) focusLeftCell(); else focusRightCell(); }),\r\n                    new KeyMapping(new KeyBinding(LEFT).shortcut(), e -&gt; { if(isRTL()) focusRightCell(); else focusLeftCell(); }),\r\n                    new KeyMapping(new KeyBinding(KP_LEFT).shortcut(), e -&gt; { if(isRTL()) focusRightCell(); else focusLeftCell(); }),\r\n    \r\n                    new KeyMapping(new KeyBinding(A).shortcut(), e -&gt; selectAll()),\r\n                    new KeyMapping(new KeyBinding(HOME).shortcut(), e -&gt; focusFirstRow()),\r\n                    new KeyMapping(new KeyBinding(END).shortcut(), e -&gt; focusLastRow()),\r\n                    new KeyMapping(new KeyBinding(PAGE_UP).shortcut(), e -&gt; focusPageUp()),\r\n                    new KeyMapping(new KeyBinding(PAGE_DOWN).shortcut(), e -&gt; focusPageDown()),\r\n    \r\n                    new KeyMapping(new KeyBinding(UP).shortcut().shift(), e -&gt; discontinuousSelectPreviousRow()),\r\n                    new KeyMapping(new KeyBinding(DOWN).shortcut().shift(), e -&gt; discontinuousSelectNextRow()),\r\n                    new KeyMapping(new KeyBinding(LEFT).shortcut().shift(), e -&gt; { if(isRTL()) discontinuousSelectNextColumn(); else discontinuousSelectPreviousColumn(); }),\r\n                    new KeyMapping(new KeyBinding(RIGHT).shortcut().shift(), e -&gt; { if(isRTL()) discontinuousSelectPreviousColumn(); else discontinuousSelectNextColumn(); }),\r\n                    new KeyMapping(new KeyBinding(PAGE_UP).shortcut().shift(), e -&gt; discontinuousSelectPageUp()),\r\n                    new KeyMapping(new KeyBinding(PAGE_DOWN).shortcut().shift(), e -&gt; discontinuousSelectPageDown()),\r\n                    new KeyMapping(new KeyBinding(HOME).shortcut().shift(), e -&gt; discontinuousSelectAllToFirstRow()),\r\n                    new KeyMapping(new KeyBinding(END).shortcut().shift(), e -&gt; discontinuousSelectAllToLastRow()),\r\n    \r\n                    enterKeyActivateMapping = new KeyMapping(ENTER, this::activate),\r\n                    new KeyMapping(SPACE, this::activate),\r\n                    new KeyMapping(F2, this::activate),\r\n                    escapeKeyCancelEditMapping = new KeyMapping(ESCAPE, this::cancelEdit),\r\n    \r\n                    new InputMap.MouseMapping(MouseEvent.MOUSE_PRESSED, this::mousePressed)\r\n            );\r\n\r\nAnd this behavior implementation is set to TableView in **TableViewSkin** class. (Please note that it is **not in** TableViewSkinBase).\r\n\r\nNow coming to TableView2 implementation, the skin of TableView2 is TableView2Skin which also extends TableViewSkinBase. But there is no **behavior** defined in this TableView2Skin. This is the reason why you cannot see the same behavior.\r\n\r\nIn short, TableView2 is **definitely not a complete extension** to TableView. Though TableView2 extends TableView, the TableView2Skin is not extending TableViewSkin. So you will not get all the features of TableView. And I am not sure whether this is an intended decision or not :).\r\n\r\nAnd to get the things work as expected, it is not as easy as just adding a key handler to TableView like `tableView.setOnKeyPressed(e-&gt;...select next row...);`. This will work for basic implementation. But don&#39;t expect to be as same as TableView. Because in TableVieBehavior a lot of stuff is handled to do the row selection.\r\n\r\nBelow is the code that will be executed, when a key press is done in TableView.\r\n\r\n \r\n\r\n    new KeyMapping(DOWN, e -&gt; selectNextRow()),\r\n    \r\n    protected void selectNextRow() {\r\n            selectCell(1, 0);\r\n            if (onSelectNextRow != null) onSelectNextRow.run();\r\n        }\r\n    \r\n    protected void selectCell(int rowDiff, int columnDiff) {\r\n            TableSelectionModel sm = getSelectionModel();\r\n            if (sm == null) return;\r\n    \r\n            TableFocusModel fm = getFocusModel();\r\n            if (fm == null) return;\r\n    \r\n            TablePositionBase&lt;TC&gt; focusedCell = getFocusedCell();\r\n            int currentRow = focusedCell.getRow();\r\n            int currentColumn = getVisibleLeafIndex(focusedCell.getTableColumn());\r\n    \r\n            if (rowDiff &gt; 0 &amp;&amp; currentRow &gt;= getItemCount() - 1) return;\r\n            else if (columnDiff &lt; 0 &amp;&amp; currentColumn &lt;= 0) return;\r\n            else if (columnDiff &gt; 0 &amp;&amp; currentColumn &gt;= getVisibleLeafColumns().size() - 1) return;\r\n            else if (columnDiff &gt; 0 &amp;&amp; currentColumn == -1) return;\r\n    \r\n            TableColumnBase tc = focusedCell.getTableColumn();\r\n            tc = getColumn(tc, columnDiff);\r\n    \r\n            //JDK-8222214: Moved this &quot;if&quot; here because the first row might be focused and not selected, so\r\n            // this makes sure it gets selected when the users presses UP. If not it ends calling\r\n            // VirtualFlow.scrollTo(-1) at and the content of the TableView disappears.\r\n            int row = (currentRow &lt;= 0 &amp;&amp; rowDiff &lt;= 0) ? 0 : focusedCell.getRow() + rowDiff;\r\n            sm.clearAndSelect(row, tc);\r\n            setAnchor(row, tc);\r\n        }\r\n    \r\n     protected void setAnchor(int row, TableColumnBase col) {\r\n            setAnchor(row == -1 &amp;&amp; col == null ? null : getTablePosition(row, col));\r\n        }\r\n    \r\n    public static &lt;T&gt; void setAnchor(Control control, T anchor, boolean isDefaultAnchor) {\r\n            if (control == null) return;\r\n            if (anchor == null) {\r\n                removeAnchor(control);\r\n            } else {\r\n                control.getProperties().put(ANCHOR_PROPERTY_KEY, anchor);\r\n                control.getProperties().put(IS_DEFAULT_ANCHOR_KEY, isDefaultAnchor);\r\n            }\r\n        }\r\n\r\nIt is up to you to take the decision of which TableView to use for your needs. If you need TableView2, then you need to somehow include the above code to your TableView2. At a basic level you can include the below one:\r\n\r\n    tableView2.addEventHandler(KeyEvent.KEY_PRESSED, e -&gt; {\r\n                int index = tableView2.getSelectionModel().getSelectedIndex();\r\n                if (e.getCode() == KeyCode.DOWN) {\r\n                    if (index &lt; tableView2.getItems().size() - 1) {\r\n                        index++;\r\n                    }\r\n                } else if (e.getCode() == KeyCode.UP) {\r\n                    if (index &gt; 0) {\r\n                        index--;\r\n                    }\r\n                }\r\n                tableView2.getSelectionModel().select(index);\r\n    \r\n                // If I don&#39;t consume this event, the focus will move away to next control.\r\n                e.consume();\r\n            });\r\n\r\nBelow is a quick demo that demonstrates this solution on TableView2.\r\n[![enter image description here][1]][1]\r\n\r\n    import javafx.application.Application;\r\n    import javafx.beans.property.SimpleStringProperty;\r\n    import javafx.beans.property.StringProperty;\r\n    import javafx.collections.FXCollections;\r\n    import javafx.collections.ObservableList;\r\n    import javafx.geometry.Insets;\r\n    import javafx.geometry.Pos;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.Label;\r\n    import javafx.scene.control.TableColumn;\r\n    import javafx.scene.control.TableView;\r\n    import javafx.scene.input.KeyCode;\r\n    import javafx.scene.input.KeyEvent;\r\n    import javafx.scene.input.MouseEvent;\r\n    import javafx.scene.layout.Priority;\r\n    import javafx.scene.layout.VBox;\r\n    import javafx.stage.Stage;\r\n    import org.controlsfx.control.tableview2.TableView2;\r\n    \r\n    import java.util.stream.Stream;\r\n    \r\n    public class TableView2Demo extends Application {\r\n        @Override\r\n        public void start(final Stage stage) throws Exception {\r\n            ObservableList&lt;Person&gt; persons = FXCollections.observableArrayList();\r\n            persons.add(new Person(&quot;Harry&quot;, &quot;John&quot;, &quot;LS&quot;));\r\n            persons.add(new Person(&quot;Mary&quot;, &quot;King&quot;, &quot;MS&quot;));\r\n            persons.add(new Person(&quot;Don&quot;, &quot;Bon&quot;, &quot;CAT&quot;));\r\n    \r\n            VBox root = new VBox();\r\n            root.setSpacing(5);\r\n            root.setPadding(new Insets(5));\r\n    \r\n            TableView&lt;Person&gt; tableView1 = new TableView&lt;&gt;();\r\n            tableView1.setId(&quot;TableView&quot;);\r\n    \r\n            TableView2&lt;Person&gt; tableView2 = new TableView2&lt;&gt;();\r\n            tableView2.setId(&quot;TableView2&quot;);\r\n    \r\n            Stream.of(tableView1, tableView2).forEach(tableView -&gt; {\r\n                TableColumn&lt;Person, String&gt; fnCol = new TableColumn&lt;&gt;(&quot;First Name&quot;);\r\n                fnCol.setCellValueFactory(param -&gt; param.getValue().firstNameProperty());\r\n    \r\n                TableColumn&lt;Person, String&gt; lnCol = new TableColumn&lt;&gt;(&quot;Last Name&quot;);\r\n                lnCol.setCellValueFactory(param -&gt; param.getValue().lastNameProperty());\r\n    \r\n                TableColumn&lt;Person, String&gt; cityCol = new TableColumn&lt;&gt;(&quot;City&quot;);\r\n                cityCol.setCellValueFactory(param -&gt; param.getValue().cityProperty());\r\n    \r\n                fnCol.setPrefWidth(150);\r\n                lnCol.setPrefWidth(100);\r\n                cityCol.setPrefWidth(200);\r\n    \r\n                tableView.getColumns().addAll(fnCol, lnCol, cityCol);\r\n                tableView.setItems(persons);\r\n                Label lbl = new Label(tableView.getId());\r\n                lbl.setMinHeight(30);\r\n                lbl.setAlignment(Pos.BOTTOM_LEFT);\r\n                lbl.setStyle(&quot;-fx-font-weight:bold;-fx-font-size:16px;&quot;);\r\n                root.getChildren().addAll(lbl, tableView);\r\n                VBox.setVgrow(tableView, Priority.ALWAYS);\r\n            });\r\n    \r\n            // You need to add a handler to get focused when mouse clicked.\r\n            tableView2.addEventHandler(MouseEvent.MOUSE_CLICKED, e -&gt; tableView2.requestFocus());\r\n    \r\n            // And another handler for row selection\r\n            tableView2.addEventHandler(KeyEvent.KEY_PRESSED, e -&gt; {\r\n                int index = tableView2.getSelectionModel().getSelectedIndex();\r\n                if (e.getCode() == KeyCode.DOWN) {\r\n                    if (index &lt; tableView2.getItems().size() - 1) {\r\n                        index++;\r\n                    }\r\n                } else if (e.getCode() == KeyCode.UP) {\r\n                    if (index &gt; 0) {\r\n                        index--;\r\n                    }\r\n                }\r\n                tableView2.getSelectionModel().select(index);\r\n    \r\n                // If I don&#39;t consume this event, the focus will move away to next control.\r\n                e.consume();\r\n            });\r\n    \r\n            Scene scene = new Scene(root, 500, 400);\r\n            stage.setScene(scene);\r\n            stage.setTitle(&quot;TableView2 Demo&quot;);\r\n            stage.show();\r\n        }\r\n    \r\n        class Person {\r\n            private StringProperty firstName = new SimpleStringProperty();\r\n            private StringProperty lastName = new SimpleStringProperty();\r\n            private StringProperty city = new SimpleStringProperty();\r\n    \r\n            public Person(String fn, String ln, String cty) {\r\n                setFirstName(fn);\r\n                setLastName(ln);\r\n                setCity(cty);\r\n            }\r\n    \r\n            public String getFirstName() {\r\n                return firstName.get();\r\n            }\r\n    \r\n            public StringProperty firstNameProperty() {\r\n                return firstName;\r\n            }\r\n    \r\n            public void setFirstName(String firstName) {\r\n                this.firstName.set(firstName);\r\n            }\r\n    \r\n            public String getLastName() {\r\n                return lastName.get();\r\n            }\r\n    \r\n            public StringProperty lastNameProperty() {\r\n                return lastName;\r\n            }\r\n    \r\n            public void setLastName(String lastName) {\r\n                this.lastName.set(lastName);\r\n            }\r\n    \r\n            public String getCity() {\r\n                return city.get();\r\n            }\r\n    \r\n            public StringProperty cityProperty() {\r\n                return city;\r\n            }\r\n    \r\n            public void setCity(String city) {\r\n                this.city.set(city);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/bjmiF.gif","title":"How do I get keyboard navigation for the SelectedRow in controlsfx.TableView2?","body":"<p>What you have observed is correct. It is indeed, that the default behaviour that is available in TableView is supressed or removed in TableView2.</p>\n<p>The general key mapping behavior of TableView is implemented in <strong>TableViewBehaviorBase.java</strong> as below:</p>\n<pre><code>addDefaultMapping(tableViewInputMap,\n                new KeyMapping(TAB, FocusTraversalInputMap::traverseNext),\n                new KeyMapping(new KeyBinding(TAB).shift(), FocusTraversalInputMap::traversePrevious),\n\n                new KeyMapping(HOME, e -&gt; selectFirstRow()),\n                new KeyMapping(END, e -&gt; selectLastRow()),\n\n                new KeyMapping(PAGE_UP, e -&gt; scrollUp()),\n                new KeyMapping(PAGE_DOWN, e -&gt; scrollDown()),\n\n                new KeyMapping(LEFT, e -&gt; { if(isRTL()) selectRightCell(); else selectLeftCell(); }),\n                new KeyMapping(KP_LEFT,e -&gt; { if(isRTL()) selectRightCell(); else selectLeftCell(); }),\n                new KeyMapping(RIGHT, e -&gt; { if(isRTL()) selectLeftCell(); else selectRightCell(); }),\n                new KeyMapping(KP_RIGHT, e -&gt; { if(isRTL()) selectLeftCell(); else selectRightCell(); }),\n\n                new KeyMapping(UP, e -&gt; selectPreviousRow()),\n                new KeyMapping(KP_UP, e -&gt; selectPreviousRow()),\n                new KeyMapping(DOWN, e -&gt; selectNextRow()),\n                new KeyMapping(KP_DOWN, e -&gt; selectNextRow()),\n\n                new KeyMapping(LEFT,   e -&gt; { if(isRTL()) focusTraverseRight(); else focusTraverseLeft(); }),\n                new KeyMapping(KP_LEFT, e -&gt; { if(isRTL()) focusTraverseRight(); else focusTraverseLeft(); }),\n                new KeyMapping(RIGHT, e -&gt; { if(isRTL()) focusTraverseLeft(); else focusTraverseRight(); }),\n                new KeyMapping(KP_RIGHT, e -&gt; { if(isRTL()) focusTraverseLeft(); else focusTraverseRight(); }),\n                new KeyMapping(UP, FocusTraversalInputMap::traverseUp),\n                new KeyMapping(KP_UP, FocusTraversalInputMap::traverseUp),\n                new KeyMapping(DOWN, FocusTraversalInputMap::traverseDown),\n                new KeyMapping(KP_DOWN, FocusTraversalInputMap::traverseDown),\n\n                new KeyMapping(new KeyBinding(HOME).shift(), e -&gt; selectAllToFirstRow()),\n                new KeyMapping(new KeyBinding(END).shift(), e -&gt; selectAllToLastRow()),\n                new KeyMapping(new KeyBinding(PAGE_UP).shift(), e -&gt; selectAllPageUp()),\n                new KeyMapping(new KeyBinding(PAGE_DOWN).shift(), e -&gt; selectAllPageDown()),\n\n                new KeyMapping(new KeyBinding(UP).shift(), e -&gt; alsoSelectPrevious()),\n                new KeyMapping(new KeyBinding(KP_UP).shift(), e -&gt; alsoSelectPrevious()),\n                new KeyMapping(new KeyBinding(DOWN).shift(), e -&gt; alsoSelectNext()),\n                new KeyMapping(new KeyBinding(KP_DOWN).shift(), e -&gt; alsoSelectNext()),\n\n                new KeyMapping(new KeyBinding(SPACE).shift(), e -&gt; selectAllToFocus(false)),\n                new KeyMapping(new KeyBinding(SPACE).shortcut().shift(), e -&gt; selectAllToFocus(true)),\n\n                new KeyMapping(new KeyBinding(LEFT).shift(), e -&gt; { if(isRTL()) alsoSelectRightCell(); else alsoSelectLeftCell(); }),\n                new KeyMapping(new KeyBinding(KP_LEFT).shift(),  e -&gt; { if(isRTL()) alsoSelectRightCell(); else alsoSelectLeftCell(); }),\n                new KeyMapping(new KeyBinding(RIGHT).shift(),  e -&gt; { if(isRTL()) alsoSelectLeftCell(); else alsoSelectRightCell(); }),\n                new KeyMapping(new KeyBinding(KP_RIGHT).shift(), e -&gt; { if(isRTL()) alsoSelectLeftCell(); else alsoSelectRightCell(); }),\n\n                new KeyMapping(new KeyBinding(UP).shortcut(), e -&gt; focusPreviousRow()),\n                new KeyMapping(new KeyBinding(DOWN).shortcut(), e -&gt; focusNextRow()),\n                new KeyMapping(new KeyBinding(RIGHT).shortcut(), e -&gt; { if(isRTL()) focusLeftCell(); else focusRightCell(); }),\n                new KeyMapping(new KeyBinding(KP_RIGHT).shortcut(), e -&gt; { if(isRTL()) focusLeftCell(); else focusRightCell(); }),\n                new KeyMapping(new KeyBinding(LEFT).shortcut(), e -&gt; { if(isRTL()) focusRightCell(); else focusLeftCell(); }),\n                new KeyMapping(new KeyBinding(KP_LEFT).shortcut(), e -&gt; { if(isRTL()) focusRightCell(); else focusLeftCell(); }),\n\n                new KeyMapping(new KeyBinding(A).shortcut(), e -&gt; selectAll()),\n                new KeyMapping(new KeyBinding(HOME).shortcut(), e -&gt; focusFirstRow()),\n                new KeyMapping(new KeyBinding(END).shortcut(), e -&gt; focusLastRow()),\n                new KeyMapping(new KeyBinding(PAGE_UP).shortcut(), e -&gt; focusPageUp()),\n                new KeyMapping(new KeyBinding(PAGE_DOWN).shortcut(), e -&gt; focusPageDown()),\n\n                new KeyMapping(new KeyBinding(UP).shortcut().shift(), e -&gt; discontinuousSelectPreviousRow()),\n                new KeyMapping(new KeyBinding(DOWN).shortcut().shift(), e -&gt; discontinuousSelectNextRow()),\n                new KeyMapping(new KeyBinding(LEFT).shortcut().shift(), e -&gt; { if(isRTL()) discontinuousSelectNextColumn(); else discontinuousSelectPreviousColumn(); }),\n                new KeyMapping(new KeyBinding(RIGHT).shortcut().shift(), e -&gt; { if(isRTL()) discontinuousSelectPreviousColumn(); else discontinuousSelectNextColumn(); }),\n                new KeyMapping(new KeyBinding(PAGE_UP).shortcut().shift(), e -&gt; discontinuousSelectPageUp()),\n                new KeyMapping(new KeyBinding(PAGE_DOWN).shortcut().shift(), e -&gt; discontinuousSelectPageDown()),\n                new KeyMapping(new KeyBinding(HOME).shortcut().shift(), e -&gt; discontinuousSelectAllToFirstRow()),\n                new KeyMapping(new KeyBinding(END).shortcut().shift(), e -&gt; discontinuousSelectAllToLastRow()),\n\n                enterKeyActivateMapping = new KeyMapping(ENTER, this::activate),\n                new KeyMapping(SPACE, this::activate),\n                new KeyMapping(F2, this::activate),\n                escapeKeyCancelEditMapping = new KeyMapping(ESCAPE, this::cancelEdit),\n\n                new InputMap.MouseMapping(MouseEvent.MOUSE_PRESSED, this::mousePressed)\n        );\n</code></pre>\n<p>And this behavior implementation is set to TableView in <strong>TableViewSkin</strong> class. (Please note that it is <strong>not in</strong> TableViewSkinBase).</p>\n<p>Now coming to TableView2 implementation, the skin of TableView2 is TableView2Skin which also extends TableViewSkinBase. But there is no <strong>behavior</strong> defined in this TableView2Skin. This is the reason why you cannot see the same behavior.</p>\n<p>In short, TableView2 is <strong>definitely not a complete extension</strong> to TableView. Though TableView2 extends TableView, the TableView2Skin is not extending TableViewSkin. So you will not get all the features of TableView. And I am not sure whether this is an intended decision or not :).</p>\n<p>And to get the things work as expected, it is not as easy as just adding a key handler to TableView like <code>tableView.setOnKeyPressed(e-&gt;...select next row...);</code>. This will work for basic implementation. But don't expect to be as same as TableView. Because in TableVieBehavior a lot of stuff is handled to do the row selection.</p>\n<p>Below is the code that will be executed, when a key press is done in TableView.</p>\n<pre><code>new KeyMapping(DOWN, e -&gt; selectNextRow()),\n\nprotected void selectNextRow() {\n        selectCell(1, 0);\n        if (onSelectNextRow != null) onSelectNextRow.run();\n    }\n\nprotected void selectCell(int rowDiff, int columnDiff) {\n        TableSelectionModel sm = getSelectionModel();\n        if (sm == null) return;\n\n        TableFocusModel fm = getFocusModel();\n        if (fm == null) return;\n\n        TablePositionBase&lt;TC&gt; focusedCell = getFocusedCell();\n        int currentRow = focusedCell.getRow();\n        int currentColumn = getVisibleLeafIndex(focusedCell.getTableColumn());\n\n        if (rowDiff &gt; 0 &amp;&amp; currentRow &gt;= getItemCount() - 1) return;\n        else if (columnDiff &lt; 0 &amp;&amp; currentColumn &lt;= 0) return;\n        else if (columnDiff &gt; 0 &amp;&amp; currentColumn &gt;= getVisibleLeafColumns().size() - 1) return;\n        else if (columnDiff &gt; 0 &amp;&amp; currentColumn == -1) return;\n\n        TableColumnBase tc = focusedCell.getTableColumn();\n        tc = getColumn(tc, columnDiff);\n\n        //JDK-8222214: Moved this &quot;if&quot; here because the first row might be focused and not selected, so\n        // this makes sure it gets selected when the users presses UP. If not it ends calling\n        // VirtualFlow.scrollTo(-1) at and the content of the TableView disappears.\n        int row = (currentRow &lt;= 0 &amp;&amp; rowDiff &lt;= 0) ? 0 : focusedCell.getRow() + rowDiff;\n        sm.clearAndSelect(row, tc);\n        setAnchor(row, tc);\n    }\n\n protected void setAnchor(int row, TableColumnBase col) {\n        setAnchor(row == -1 &amp;&amp; col == null ? null : getTablePosition(row, col));\n    }\n\npublic static &lt;T&gt; void setAnchor(Control control, T anchor, boolean isDefaultAnchor) {\n        if (control == null) return;\n        if (anchor == null) {\n            removeAnchor(control);\n        } else {\n            control.getProperties().put(ANCHOR_PROPERTY_KEY, anchor);\n            control.getProperties().put(IS_DEFAULT_ANCHOR_KEY, isDefaultAnchor);\n        }\n    }\n</code></pre>\n<p>It is up to you to take the decision of which TableView to use for your needs. If you need TableView2, then you need to somehow include the above code to your TableView2. At a basic level you can include the below one:</p>\n<pre><code>tableView2.addEventHandler(KeyEvent.KEY_PRESSED, e -&gt; {\n            int index = tableView2.getSelectionModel().getSelectedIndex();\n            if (e.getCode() == KeyCode.DOWN) {\n                if (index &lt; tableView2.getItems().size() - 1) {\n                    index++;\n                }\n            } else if (e.getCode() == KeyCode.UP) {\n                if (index &gt; 0) {\n                    index--;\n                }\n            }\n            tableView2.getSelectionModel().select(index);\n\n            // If I don't consume this event, the focus will move away to next control.\n            e.consume();\n        });\n</code></pre>\n<p>Below is a quick demo that demonstrates this solution on TableView2.\n<a href=\"https://i.stack.imgur.com/bjmiF.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bjmiF.gif\" alt=\"enter image description here\" /></a></p>\n<pre><code>import javafx.application.Application;\nimport javafx.beans.property.SimpleStringProperty;\nimport javafx.beans.property.StringProperty;\nimport javafx.collections.FXCollections;\nimport javafx.collections.ObservableList;\nimport javafx.geometry.Insets;\nimport javafx.geometry.Pos;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Label;\nimport javafx.scene.control.TableColumn;\nimport javafx.scene.control.TableView;\nimport javafx.scene.input.KeyCode;\nimport javafx.scene.input.KeyEvent;\nimport javafx.scene.input.MouseEvent;\nimport javafx.scene.layout.Priority;\nimport javafx.scene.layout.VBox;\nimport javafx.stage.Stage;\nimport org.controlsfx.control.tableview2.TableView2;\n\nimport java.util.stream.Stream;\n\npublic class TableView2Demo extends Application {\n    @Override\n    public void start(final Stage stage) throws Exception {\n        ObservableList&lt;Person&gt; persons = FXCollections.observableArrayList();\n        persons.add(new Person(&quot;Harry&quot;, &quot;John&quot;, &quot;LS&quot;));\n        persons.add(new Person(&quot;Mary&quot;, &quot;King&quot;, &quot;MS&quot;));\n        persons.add(new Person(&quot;Don&quot;, &quot;Bon&quot;, &quot;CAT&quot;));\n\n        VBox root = new VBox();\n        root.setSpacing(5);\n        root.setPadding(new Insets(5));\n\n        TableView&lt;Person&gt; tableView1 = new TableView&lt;&gt;();\n        tableView1.setId(&quot;TableView&quot;);\n\n        TableView2&lt;Person&gt; tableView2 = new TableView2&lt;&gt;();\n        tableView2.setId(&quot;TableView2&quot;);\n\n        Stream.of(tableView1, tableView2).forEach(tableView -&gt; {\n            TableColumn&lt;Person, String&gt; fnCol = new TableColumn&lt;&gt;(&quot;First Name&quot;);\n            fnCol.setCellValueFactory(param -&gt; param.getValue().firstNameProperty());\n\n            TableColumn&lt;Person, String&gt; lnCol = new TableColumn&lt;&gt;(&quot;Last Name&quot;);\n            lnCol.setCellValueFactory(param -&gt; param.getValue().lastNameProperty());\n\n            TableColumn&lt;Person, String&gt; cityCol = new TableColumn&lt;&gt;(&quot;City&quot;);\n            cityCol.setCellValueFactory(param -&gt; param.getValue().cityProperty());\n\n            fnCol.setPrefWidth(150);\n            lnCol.setPrefWidth(100);\n            cityCol.setPrefWidth(200);\n\n            tableView.getColumns().addAll(fnCol, lnCol, cityCol);\n            tableView.setItems(persons);\n            Label lbl = new Label(tableView.getId());\n            lbl.setMinHeight(30);\n            lbl.setAlignment(Pos.BOTTOM_LEFT);\n            lbl.setStyle(&quot;-fx-font-weight:bold;-fx-font-size:16px;&quot;);\n            root.getChildren().addAll(lbl, tableView);\n            VBox.setVgrow(tableView, Priority.ALWAYS);\n        });\n\n        // You need to add a handler to get focused when mouse clicked.\n        tableView2.addEventHandler(MouseEvent.MOUSE_CLICKED, e -&gt; tableView2.requestFocus());\n\n        // And another handler for row selection\n        tableView2.addEventHandler(KeyEvent.KEY_PRESSED, e -&gt; {\n            int index = tableView2.getSelectionModel().getSelectedIndex();\n            if (e.getCode() == KeyCode.DOWN) {\n                if (index &lt; tableView2.getItems().size() - 1) {\n                    index++;\n                }\n            } else if (e.getCode() == KeyCode.UP) {\n                if (index &gt; 0) {\n                    index--;\n                }\n            }\n            tableView2.getSelectionModel().select(index);\n\n            // If I don't consume this event, the focus will move away to next control.\n            e.consume();\n        });\n\n        Scene scene = new Scene(root, 500, 400);\n        stage.setScene(scene);\n        stage.setTitle(&quot;TableView2 Demo&quot;);\n        stage.show();\n    }\n\n    class Person {\n        private StringProperty firstName = new SimpleStringProperty();\n        private StringProperty lastName = new SimpleStringProperty();\n        private StringProperty city = new SimpleStringProperty();\n\n        public Person(String fn, String ln, String cty) {\n            setFirstName(fn);\n            setLastName(ln);\n            setCity(cty);\n        }\n\n        public String getFirstName() {\n            return firstName.get();\n        }\n\n        public StringProperty firstNameProperty() {\n            return firstName;\n        }\n\n        public void setFirstName(String firstName) {\n            this.firstName.set(firstName);\n        }\n\n        public String getLastName() {\n            return lastName.get();\n        }\n\n        public StringProperty lastNameProperty() {\n            return lastName;\n        }\n\n        public void setLastName(String lastName) {\n            this.lastName.set(lastName);\n        }\n\n        public String getCity() {\n            return city.get();\n        }\n\n        public StringProperty cityProperty() {\n            return city;\n        }\n\n        public void setCity(String city) {\n            this.city.set(city);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":149036,"reputation":405,"user_id":361227,"accept_rate":60,"display_name":"bobndrew"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":142,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":76658199,"answer_count":2,"score":1,"last_activity_date":1689038749,"creation_date":1688379040,"question_id":76603768,"body_markdown":"I&#39;m using the TableView2 component from the library ControlsFX. In an simple example (see sourcecode below) the ArrowKey-Navigation in the table is gone after changing `import javafx.scene.control.TableView` to `import org.controlsfx.control.tableview2.TableView2`. \r\n\r\n# Done &#39;Research&#39; #\r\n\r\nI read in the JavaDocs that `TableView2` is a drop-in-replacement and so I&#39;m asking what I can do to bring back the functionality of the core-component. \r\n\r\n- The broken navigation is observable in the [ControlsFX Sampler][1] application as well. \r\n- Maybe unrelated: There is also an `SpreadsheetView` example which is using a different looking CellSelection-style. \r\n\r\n# Description of the problem # \r\n\r\nThe example code is from the Oracle-Tutorials, I just deleted some unnecessary stuff. \r\nTry mouseclicking a table cell and press the arrow-down key. The TableSelection is not moving one row down, but the whole Focus is traversed to the TextField.\r\n\r\n![2]\r\n\r\nI&#39;m using Windows 10 Pro 22H2, JDK corretto-17.0.7, JavaFX 20.0.1 and controlsfx-11.1.2\r\n\r\n## Example Code ##\r\n\r\nIf you change `new TableView2()` to `new TableView()` everything works as expected.  \r\n\r\n\r\n    import javafx.application.Application;\r\n    import javafx.beans.property.SimpleStringProperty;\r\n    import javafx.collections.FXCollections;\r\n    import javafx.collections.ObservableList;\r\n    import javafx.scene.Group;\r\n    import javafx.scene.Scene;\r\n    import javafx.scene.control.TableColumn;\r\n    import javafx.scene.control.TableView;\r\n    import javafx.scene.control.TextField;\r\n    import javafx.scene.control.cell.PropertyValueFactory;\r\n    import javafx.scene.layout.VBox;\r\n    import javafx.stage.Stage;\r\n    import org.controlsfx.control.tableview2.TableView2;\r\n    \r\n    /**\r\n     * Reduced from https://docs.oracle.com/javafx/2/ui_controls/table-view.htm.\r\n     */\r\n    public class TableView2KeyboardNavigation extends Application\r\n    {\r\n      static class Main\r\n      {\r\n        public static void main( String[] args )\r\n        {\r\n          Application.launch( TableView2KeyboardNavigation.class, args );\r\n        }\r\n      }\r\n    \r\n      \r\n      private       TableView&lt;Person&gt;      table = new TableView2&lt;&gt;();\r\n      private final ObservableList&lt;Person&gt; data  =\r\n          FXCollections.observableArrayList(\r\n              new Person( &quot;Jacob&quot;, &quot;Smith&quot; ),\r\n              new Person( &quot;Isabella&quot;, &quot;Johnson&quot; ),\r\n              new Person( &quot;Ethan&quot;, &quot;Williams&quot; )\r\n          );\r\n    \r\n    \r\n      @Override\r\n      public void start( Stage stage )\r\n      {\r\n        final var scene = new Scene( new Group() );\r\n        stage.setTitle( &quot;TableView2 Sample&quot; );\r\n    \r\n        final var firstNameCol = new TableColumn( &quot;First Name&quot; );\r\n        firstNameCol.setCellValueFactory(\r\n            new PropertyValueFactory&lt;Person, String&gt;( &quot;firstName&quot; ) );\r\n        final var lastNameCol = new TableColumn( &quot;Last Name&quot; );\r\n        lastNameCol.setCellValueFactory(\r\n            new PropertyValueFactory&lt;Person, String&gt;( &quot;lastName&quot; ) );\r\n    \r\n        table.setItems( data );\r\n        table.getColumns().addAll( firstNameCol, lastNameCol );\r\n    \r\n        final var vbox = new VBox();\r\n        vbox.getChildren().addAll( table, new TextField( &quot;Focus lands here after ArrowDown-Key...&quot; ) );\r\n    \r\n        ( (Group) scene.getRoot() ).getChildren().addAll( vbox );\r\n        stage.setScene( scene );\r\n        stage.show();\r\n      }\r\n      \r\n      \r\n      public static class Person\r\n      {\r\n        private final SimpleStringProperty firstName;\r\n        private final SimpleStringProperty lastName;\r\n    \r\n        private Person( String fName, String lName )\r\n        {\r\n          this.firstName = new SimpleStringProperty( fName );\r\n          this.lastName = new SimpleStringProperty( lName );\r\n        }\r\n    \r\n        public String getFirstName()\r\n        {\r\n          return firstName.get();\r\n        }\r\n        public void setFirstName( String fName )\r\n        {\r\n          firstName.set( fName );\r\n        }\r\n    \r\n        public String getLastName()\r\n        {\r\n          return lastName.get();\r\n        }\r\n        public void setLastName( String fName )\r\n        {\r\n          lastName.set( fName );\r\n        }\r\n      }\r\n    \r\n    }\r\n\r\n\r\n  [1]: https://github.com/controlsfx/controlsfx/tree/master/fxsampler\r\n  [2]: https://i.stack.imgur.com/aEldA.png","title":"How do I get keyboard navigation for the SelectedRow in controlsfx.TableView2?","body":"<p>I'm using the TableView2 component from the library ControlsFX. In an simple example (see sourcecode below) the ArrowKey-Navigation in the table is gone after changing <code>import javafx.scene.control.TableView</code> to <code>import org.controlsfx.control.tableview2.TableView2</code>.</p>\n<h1>Done 'Research'</h1>\n<p>I read in the JavaDocs that <code>TableView2</code> is a drop-in-replacement and so I'm asking what I can do to bring back the functionality of the core-component.</p>\n<ul>\n<li>The broken navigation is observable in the <a href=\"https://github.com/controlsfx/controlsfx/tree/master/fxsampler\" rel=\"nofollow noreferrer\">ControlsFX Sampler</a> application as well.</li>\n<li>Maybe unrelated: There is also an <code>SpreadsheetView</code> example which is using a different looking CellSelection-style.</li>\n</ul>\n<h1>Description of the problem</h1>\n<p>The example code is from the Oracle-Tutorials, I just deleted some unnecessary stuff.\nTry mouseclicking a table cell and press the arrow-down key. The TableSelection is not moving one row down, but the whole Focus is traversed to the TextField.</p>\n<p><img src=\"https://i.stack.imgur.com/aEldA.png\" alt=\"2\" /></p>\n<p>I'm using Windows 10 Pro 22H2, JDK corretto-17.0.7, JavaFX 20.0.1 and controlsfx-11.1.2</p>\n<h2>Example Code</h2>\n<p>If you change <code>new TableView2()</code> to <code>new TableView()</code> everything works as expected.</p>\n<pre><code>import javafx.application.Application;\nimport javafx.beans.property.SimpleStringProperty;\nimport javafx.collections.FXCollections;\nimport javafx.collections.ObservableList;\nimport javafx.scene.Group;\nimport javafx.scene.Scene;\nimport javafx.scene.control.TableColumn;\nimport javafx.scene.control.TableView;\nimport javafx.scene.control.TextField;\nimport javafx.scene.control.cell.PropertyValueFactory;\nimport javafx.scene.layout.VBox;\nimport javafx.stage.Stage;\nimport org.controlsfx.control.tableview2.TableView2;\n\n/**\n * Reduced from https://docs.oracle.com/javafx/2/ui_controls/table-view.htm.\n */\npublic class TableView2KeyboardNavigation extends Application\n{\n  static class Main\n  {\n    public static void main( String[] args )\n    {\n      Application.launch( TableView2KeyboardNavigation.class, args );\n    }\n  }\n\n  \n  private       TableView&lt;Person&gt;      table = new TableView2&lt;&gt;();\n  private final ObservableList&lt;Person&gt; data  =\n      FXCollections.observableArrayList(\n          new Person( &quot;Jacob&quot;, &quot;Smith&quot; ),\n          new Person( &quot;Isabella&quot;, &quot;Johnson&quot; ),\n          new Person( &quot;Ethan&quot;, &quot;Williams&quot; )\n      );\n\n\n  @Override\n  public void start( Stage stage )\n  {\n    final var scene = new Scene( new Group() );\n    stage.setTitle( &quot;TableView2 Sample&quot; );\n\n    final var firstNameCol = new TableColumn( &quot;First Name&quot; );\n    firstNameCol.setCellValueFactory(\n        new PropertyValueFactory&lt;Person, String&gt;( &quot;firstName&quot; ) );\n    final var lastNameCol = new TableColumn( &quot;Last Name&quot; );\n    lastNameCol.setCellValueFactory(\n        new PropertyValueFactory&lt;Person, String&gt;( &quot;lastName&quot; ) );\n\n    table.setItems( data );\n    table.getColumns().addAll( firstNameCol, lastNameCol );\n\n    final var vbox = new VBox();\n    vbox.getChildren().addAll( table, new TextField( &quot;Focus lands here after ArrowDown-Key...&quot; ) );\n\n    ( (Group) scene.getRoot() ).getChildren().addAll( vbox );\n    stage.setScene( scene );\n    stage.show();\n  }\n  \n  \n  public static class Person\n  {\n    private final SimpleStringProperty firstName;\n    private final SimpleStringProperty lastName;\n\n    private Person( String fName, String lName )\n    {\n      this.firstName = new SimpleStringProperty( fName );\n      this.lastName = new SimpleStringProperty( lName );\n    }\n\n    public String getFirstName()\n    {\n      return firstName.get();\n    }\n    public void setFirstName( String fName )\n    {\n      firstName.set( fName );\n    }\n\n    public String getLastName()\n    {\n      return lastName.get();\n    }\n    public void setLastName( String fName )\n    {\n      lastName.set( fName );\n    }\n  }\n\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":17083727,"reputation":21,"user_id":12361548,"display_name":"user12361548"},"score":0,"creation_date":1689037929,"post_id":76654233,"comment_id":135153472,"body_markdown":"In spring-boot with spring-data-jpa  application, the default transactionManager is JpaTransactionManager,  I can&#39;t substitute DataSourceTransactionManager for JpaTransactionManager.It will be error if i change the default JpaTransactionManager to DataSourceTransactionManager","body":"In spring-boot with spring-data-jpa  application, the default transactionManager is JpaTransactionManager,  I can&#39;t substitute DataSourceTransactionManager for JpaTransactionManager.It will be error if i change the default JpaTransactionManager to DataSourceTransactionManager"}],"answers":[{"tags":[],"owner":{"account_id":9505499,"reputation":158,"user_id":7065173,"display_name":"Michael Wurster"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688996402,"creation_date":1688996402,"answer_id":76654331,"question_id":76654233,"body_markdown":"have you tried exposing your implementation as a bean of type `TransactionManager`? \r\n\r\nFrom what I see in Spring Boot&#39;s `DataSourceTransactionManagerAutoConfiguration` class, the default transaction manager is only instantiated when there is no bean of type `TransactionManager` on the classpath. \r\n\r\nHowever, I haven&#39;t checked what other auto-config classes do, but I think it&#39;s worth a try :-)\r\n","title":"how to execute Statement before commit when use jpa","body":"<p>have you tried exposing your implementation as a bean of type <code>TransactionManager</code>?</p>\n<p>From what I see in Spring Boot's <code>DataSourceTransactionManagerAutoConfiguration</code> class, the default transaction manager is only instantiated when there is no bean of type <code>TransactionManager</code> on the classpath.</p>\n<p>However, I haven't checked what other auto-config classes do, but I think it's worth a try :-)</p>\n"}],"owner":{"account_id":17083727,"reputation":21,"user_id":12361548,"display_name":"user12361548"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689038500,"creation_date":1688995666,"question_id":76654233,"body_markdown":"I want to use PolarDB-X with jpa.\r\nbut I can not to use JpaTransactionManager.\r\n\r\nwhen use PolarDB-X with jdbc , it must be create TransactionManager like this.\r\n\r\n```\r\nimport java.sql.Connection;\r\nimport java.sql.SQLException;\r\nimport java.sql.Statement;\r\nimport javax.sql.DataSource;\r\nimport org.springframework.jdbc.datasource.DataSourceTransactionManager;\r\nimport org.springframework.transaction.TransactionDefinition;\r\n\r\npublic class DrdsTransactionManager extends DataSourceTransactionManager {\r\n    public DrdsTransactionManager(DataSource dataSource) {\r\n        super(dataSource);\r\n    }\r\n\r\n    @Override\r\n    protected void prepareTransactionalConnection(Connection con, TransactionDefinition definition) throws SQLException {\r\n        try (Statement stmt = con.createStatement()) {\r\n            stmt.executeUpdate(&quot;SET drds_transaction_policy = &#39;2PC&#39;&quot;);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nthis PolarDB-X doc is here \r\n\r\nhttps://help.aliyun.com/apsara/enterprise/v_3_12_0_20200630/drds/user-guide/distributed-transactions-based-on-mysql-5-6.html?spm=a2c4g.14484438.10001.100\r\n\r\nbut I can not find how to set this with JpaTransactionManager.\r\n\r\nIn my application,if i change the default JpaTransactionManager to DataSourceTransactionManager, it can not be save anything. the TransactionManager is not work.\r\n\r\nare there some way to execute &quot;SET drds_transaction_policy = &#39;2PC&#39;&quot; in \r\nJpaTransactionManager when begin a transaction?\r\n\r\nAre there some body help me ?\r\n","title":"how to execute Statement before commit when use jpa","body":"<p>I want to use PolarDB-X with jpa.\nbut I can not to use JpaTransactionManager.</p>\n<p>when use PolarDB-X with jdbc , it must be create TransactionManager like this.</p>\n<pre><code>import java.sql.Connection;\nimport java.sql.SQLException;\nimport java.sql.Statement;\nimport javax.sql.DataSource;\nimport org.springframework.jdbc.datasource.DataSourceTransactionManager;\nimport org.springframework.transaction.TransactionDefinition;\n\npublic class DrdsTransactionManager extends DataSourceTransactionManager {\n    public DrdsTransactionManager(DataSource dataSource) {\n        super(dataSource);\n    }\n\n    @Override\n    protected void prepareTransactionalConnection(Connection con, TransactionDefinition definition) throws SQLException {\n        try (Statement stmt = con.createStatement()) {\n            stmt.executeUpdate(&quot;SET drds_transaction_policy = '2PC'&quot;);\n        }\n    }\n}\n</code></pre>\n<p>this PolarDB-X doc is here</p>\n<p><a href=\"https://help.aliyun.com/apsara/enterprise/v_3_12_0_20200630/drds/user-guide/distributed-transactions-based-on-mysql-5-6.html?spm=a2c4g.14484438.10001.100\" rel=\"nofollow noreferrer\">https://help.aliyun.com/apsara/enterprise/v_3_12_0_20200630/drds/user-guide/distributed-transactions-based-on-mysql-5-6.html?spm=a2c4g.14484438.10001.100</a></p>\n<p>but I can not find how to set this with JpaTransactionManager.</p>\n<p>In my application,if i change the default JpaTransactionManager to DataSourceTransactionManager, it can not be save anything. the TransactionManager is not work.</p>\n<p>are there some way to execute &quot;SET drds_transaction_policy = '2PC'&quot; in\nJpaTransactionManager when begin a transaction?</p>\n<p>Are there some body help me ?</p>\n"},{"tags":["java","apache-kafka","apache-kafka-streams"],"comments":[{"owner":{"account_id":12181645,"reputation":183,"user_id":14014537,"display_name":"Karsten Schnitter"},"score":0,"creation_date":1648135384,"post_id":71573832,"comment_id":126552634,"body_markdown":"This behaviour might be dependent on the partitions/tasks the events are routed in. Kafka Streams will create separate stores for each partition. If events A and B are not in the same partition, the window timestamp of A is not influenced by the B event. Can you elaborate on your setup with regards to that?","body":"This behaviour might be dependent on the partitions/tasks the events are routed in. Kafka Streams will create separate stores for each partition. If events A and B are not in the same partition, the window timestamp of A is not influenced by the B event. Can you elaborate on your setup with regards to that?"},{"owner":{"account_id":67793,"reputation":3092,"user_id":198164,"accept_rate":80,"display_name":"Eugene S"},"score":1,"creation_date":1648135876,"post_id":71573832,"comment_id":126552852,"body_markdown":"@KarstenSchnitter Session Windows are segregated by the event key. A session window will only close when a new event shows up for that session (so same key) with an event time &gt; inactivity gap + grace period.\n\nThrough experiments I found that the kafka partition is unimportant;  it&#39;s the key that determines which session window the event goes to, which in turn drives the stream time and closing behavior for that window.","body":"@KarstenSchnitter Session Windows are segregated by the event key. A session window will only close when a new event shows up for that session (so same key) with an event time &gt; inactivity gap + grace period.  Through experiments I found that the kafka partition is unimportant;  it&#39;s the key that determines which session window the event goes to, which in turn drives the stream time and closing behavior for that window."}],"answers":[{"tags":[],"owner":{"account_id":6384814,"reputation":60263,"user_id":4953079,"display_name":"Matthias J. Sax"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689036092,"creation_date":1689036092,"answer_id":76658079,"question_id":71573832,"body_markdown":"&gt; This will close the window with key B, but the window with key A will remain open. That is to say, when an event for a given key is received, only the stream time for the windows that have that key will advance. Is my understanding here correct?\r\n\r\nNot totally correct. Stream-time is a per-partition (not per-key concept). Thus, if A and B are in the same partition, the second B record would indeed close both windows. If B is on a different partitions, the window of A won&#39;t be closed though.\r\n\r\n&gt; If so, then this behavior is not exactly what I need. What I need is if I never see another event with key A then for the key A window to eventually close.\r\n\r\nIt should be save to assume, that there will be data in all partitions, and thus the window would close eventually.\r\n\r\n","title":"Kafka Streams Session Windows with Punctuator","body":"<blockquote>\n<p>This will close the window with key B, but the window with key A will remain open. That is to say, when an event for a given key is received, only the stream time for the windows that have that key will advance. Is my understanding here correct?</p>\n</blockquote>\n<p>Not totally correct. Stream-time is a per-partition (not per-key concept). Thus, if A and B are in the same partition, the second B record would indeed close both windows. If B is on a different partitions, the window of A won't be closed though.</p>\n<blockquote>\n<p>If so, then this behavior is not exactly what I need. What I need is if I never see another event with key A then for the key A window to eventually close.</p>\n</blockquote>\n<p>It should be save to assume, that there will be data in all partitions, and thus the window would close eventually.</p>\n"}],"owner":{"account_id":67793,"reputation":3092,"user_id":198164,"accept_rate":80,"display_name":"Eugene S"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":511,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1689036092,"creation_date":1647959448,"question_id":71573832,"body_markdown":"I&#39;m building a Kafka Streams application where I want to make use of Session Windows.\r\n\r\nSay my session is configured as follows:\r\n\r\n```java\r\n// Inactivity gap is 5 seconds\r\n// Grace period is 1 second\r\nDuration inactivityGapDuration = Duration.ofSeconds(5);\r\nDuration graceDuration         = Duration.ofSeconds(1);\r\nKStream&lt;Windowed&lt;String&gt;, EventData&gt; windowedListKStream = groupedStream.windowedBy(\r\n            SessionWindows.ofInactivityGapAndGrace(inactivityGapDuration, graceDuration))\r\n    .aggregate(...)\r\n    .suppress(Suppressed.untilWindowCloses(BufferConfig.unbounded()))\r\n    .toStream();\r\n```\r\n\r\nAnd given the following stream events:\r\n\r\n|Event Key | Time\r\n|----------| ----\r\n| A        | 10\r\n| B        | 12\r\n\r\nBased on reading the docs and experiments I expect this will create 2 session windows: one with key **A** and one with key **B**.\r\n\r\nNow say I receive this next event:\r\n\r\n|Event Key | Time\r\n|----------| ----\r\n| B        | 20\r\n\r\nThis will close the window with key **B**, *but the window with key A will remain open*. That is to say, when an event for a given key is received, only the stream time for the windows that have that key will advance. Is my understanding here correct?\r\n\r\nIf so, then this behavior is not exactly what I need. What I need is if I never see another event with key **A** then for the key **A** window to *eventually* close.\r\n\r\nI think this is where the Punctuator can come in. However, if I read the docs correctly then I would need to basically re-implement the Session Window logic using the Processor API if I want to add a Punctuator. As far as I can tell I can&#39;t inject a Punctuator event into the session window DSL implementation in order to move the stream time along.\r\n\r\nIf all of the above is correct, then this seems like a big lift for what seems like a simple operation. Am I missing some other feature that would make this a simpler implementation?\r\n\r\nThank you!","title":"Kafka Streams Session Windows with Punctuator","body":"<p>I'm building a Kafka Streams application where I want to make use of Session Windows.</p>\n<p>Say my session is configured as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Inactivity gap is 5 seconds\n// Grace period is 1 second\nDuration inactivityGapDuration = Duration.ofSeconds(5);\nDuration graceDuration         = Duration.ofSeconds(1);\nKStream&lt;Windowed&lt;String&gt;, EventData&gt; windowedListKStream = groupedStream.windowedBy(\n            SessionWindows.ofInactivityGapAndGrace(inactivityGapDuration, graceDuration))\n    .aggregate(...)\n    .suppress(Suppressed.untilWindowCloses(BufferConfig.unbounded()))\n    .toStream();\n</code></pre>\n<p>And given the following stream events:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Event Key</th>\n<th>Time</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>A</td>\n<td>10</td>\n</tr>\n<tr>\n<td>B</td>\n<td>12</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>Based on reading the docs and experiments I expect this will create 2 session windows: one with key <strong>A</strong> and one with key <strong>B</strong>.</p>\n<p>Now say I receive this next event:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Event Key</th>\n<th>Time</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>B</td>\n<td>20</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>This will close the window with key <strong>B</strong>, <em>but the window with key A will remain open</em>. That is to say, when an event for a given key is received, only the stream time for the windows that have that key will advance. Is my understanding here correct?</p>\n<p>If so, then this behavior is not exactly what I need. What I need is if I never see another event with key <strong>A</strong> then for the key <strong>A</strong> window to <em>eventually</em> close.</p>\n<p>I think this is where the Punctuator can come in. However, if I read the docs correctly then I would need to basically re-implement the Session Window logic using the Processor API if I want to add a Punctuator. As far as I can tell I can't inject a Punctuator event into the session window DSL implementation in order to move the stream time along.</p>\n<p>If all of the above is correct, then this seems like a big lift for what seems like a simple operation. Am I missing some other feature that would make this a simpler implementation?</p>\n<p>Thank you!</p>\n"},{"tags":["java","android","whatsapp"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1677673714,"post_id":75603709,"comment_id":133383402,"body_markdown":"What is WhatsApp click?","body":"What is WhatsApp click?"},{"owner":{"account_id":25662530,"reputation":31,"user_id":19428099,"display_name":"Philip Franklin"},"score":0,"creation_date":1677673971,"post_id":75603709,"comment_id":133383491,"body_markdown":"the link which can instantly start a chat with any number available on WhatsApp.","body":"the link which can instantly start a chat with any number available on WhatsApp."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1677674336,"post_id":75603709,"comment_id":133383615,"body_markdown":"Where do you see that link?","body":"Where do you see that link?"},{"owner":{"account_id":25662530,"reputation":31,"user_id":19428099,"display_name":"Philip Franklin"},"score":0,"creation_date":1677674475,"post_id":75603709,"comment_id":133383665,"body_markdown":"https://faq.whatsapp.com/5913398998672934 - this will help","body":"<a href=\"https://faq.whatsapp.com/5913398998672934\" rel=\"nofollow noreferrer\">faq.whatsapp.com/5913398998672934</a> - this will help"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1677674552,"post_id":75603709,"comment_id":133383690,"body_markdown":"Does not help as we do not follow links. Just answer.","body":"Does not help as we do not follow links. Just answer."},{"owner":{"account_id":1589881,"reputation":912,"user_id":1473454,"display_name":"Konrad Talik"},"score":0,"creation_date":1677776525,"post_id":75603709,"comment_id":133408741,"body_markdown":"From what I read, I think it would be better for you to specify more, why would you like to send this PDF file via WhatsApp? How is this PDF generated and why should it be delivered to recipient of &quot;click to chat&quot;?","body":"From what I read, I think it would be better for you to specify more, why would you like to send this PDF file via WhatsApp? How is this PDF generated and why should it be delivered to recipient of &quot;click to chat&quot;?"},{"owner":{"account_id":25662530,"reputation":31,"user_id":19428099,"display_name":"Philip Franklin"},"score":0,"creation_date":1678159187,"post_id":75603709,"comment_id":133475338,"body_markdown":"I am generating a ticket from my website. The website will  take its screen shot and then I wanted to send this image or pdf with WhatsApp click to chat feature.","body":"I am generating a ticket from my website. The website will  take its screen shot and then I wanted to send this image or pdf with WhatsApp click to chat feature."}],"answers":[{"tags":[],"owner":{"account_id":4879257,"reputation":9602,"user_id":3933502,"accept_rate":67,"display_name":"quemeful"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689035559,"creation_date":1689035559,"answer_id":76658063,"question_id":75603709,"body_markdown":"No, only text is supported.\r\n\r\nLearn more: https://faq.whatsapp.com/5913398998672934\r\n","title":"Can we send media or files from WhatsApp click to chat?","body":"<p>No, only text is supported.</p>\n<p>Learn more: <a href=\"https://faq.whatsapp.com/5913398998672934\" rel=\"nofollow noreferrer\">https://faq.whatsapp.com/5913398998672934</a></p>\n"}],"owner":{"account_id":25662530,"reputation":31,"user_id":19428099,"display_name":"Philip Franklin"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":293,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1689035559,"creation_date":1677673454,"question_id":75603709,"body_markdown":"I am able to send text messages and links with WhatsApp click to chat.\r\n\r\nI&#39;ve researched a lot about this but I&#39;m unable to figure out how to send pdf or other media as messages to people with WhatsApp click to chat.\r\n\r\nhttps://wa.me/44XXXXXXXXXX?text=Hello%World\r\n\r\nI&#39;ve seen this implementation in an app. The app makes pdf of the context and redirects to the WhatsApp app and opens a specific contact with that pdf attached.\r\n\r\nBut I am not sure that whether that app is using some kind of api or not.\r\n\r\nI just wanted to know from experts that is it possible to send media files/ documents with WhatsApp click to chat? \r\n\r\nhttps://wa.me/44XXXXXXXXXX?text=Hello%World?data=...\r\n\r\nhttps://wa.me/44XXXXXXXXXX?text=Hello%World?image=...\r\n\r\n??","title":"Can we send media or files from WhatsApp click to chat?","body":"<p>I am able to send text messages and links with WhatsApp click to chat.</p>\n<p>I've researched a lot about this but I'm unable to figure out how to send pdf or other media as messages to people with WhatsApp click to chat.</p>\n<p><a href=\"https://wa.me/44XXXXXXXXXX?text=Hello%World\" rel=\"nofollow noreferrer\">https://wa.me/44XXXXXXXXXX?text=Hello%World</a></p>\n<p>I've seen this implementation in an app. The app makes pdf of the context and redirects to the WhatsApp app and opens a specific contact with that pdf attached.</p>\n<p>But I am not sure that whether that app is using some kind of api or not.</p>\n<p>I just wanted to know from experts that is it possible to send media files/ documents with WhatsApp click to chat?</p>\n<p><a href=\"https://wa.me/44XXXXXXXXXX?text=Hello%World?data=..\" rel=\"nofollow noreferrer\">https://wa.me/44XXXXXXXXXX?text=Hello%World?data=..</a>.</p>\n<p><a href=\"https://wa.me/44XXXXXXXXXX?text=Hello%World?image=..\" rel=\"nofollow noreferrer\">https://wa.me/44XXXXXXXXXX?text=Hello%World?image=..</a>.</p>\n<p>??</p>\n"},{"tags":["java","jvm","yocto","openembedded"],"answers":[{"tags":[],"owner":{"account_id":23124922,"reputation":1,"user_id":17230866,"display_name":"visibog"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689033633,"creation_date":1689033633,"answer_id":76657980,"question_id":62000944,"body_markdown":"Hi Are you tried to skip file deps to jvm recipe\r\n\r\n    SKIP_FILEDEPS:${PN} = &#39;1&#39;\r\n\r\n ","title":"Installing jvm files using Yocto","body":"<p>Hi Are you tried to skip file deps to jvm recipe</p>\n<pre><code>SKIP_FILEDEPS:${PN} = '1'\n</code></pre>\n"}],"owner":{"account_id":179991,"reputation":1445,"user_id":413023,"accept_rate":24,"display_name":"Milan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":142,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689033633,"creation_date":1590403984,"question_id":62000944,"body_markdown":"Trying to install JVM files into rootfs but seeing following errors:\r\n\r\n    --&gt; Starting dependency resolution\r\n    --&gt; Finished dependency resolution\r\n    Error: \r\n    Problem: conflicting requests\r\n    - nothing provides libgif.so.7()(64bit) needed by jvm-1.0-r0.aarch64\r\n    - nothing provides libjpeg.so.62()(64bit) needed by jvm-1.0-r0.aarch64\r\n    - nothing provides libjpeg.so.62(LIBJPEG_6.2)(64bit) needed by jvm-1.0-r0.aarch64\r\n     (try to add &#39;--skip-broken&#39; to skip uninstallable packages or &#39;--nobest&#39; to use not only best c \r\n     candidate packages) \r\n     ERROR: core-image-minimal-1.0-r0 do_rootfs: \r\n     ERROR: core-image-minimal-1.0-r0 do_rootfs: Function failed: do_rootfs\r\n\r\nIts just custom recipe file jvm.bb which compiled well but while installing into rootfs seeing about issue.\r\n\r\nIs there a workaround for it ?","title":"Installing jvm files using Yocto","body":"<p>Trying to install JVM files into rootfs but seeing following errors:</p>\n\n<pre><code>--&gt; Starting dependency resolution\n--&gt; Finished dependency resolution\nError: \nProblem: conflicting requests\n- nothing provides libgif.so.7()(64bit) needed by jvm-1.0-r0.aarch64\n- nothing provides libjpeg.so.62()(64bit) needed by jvm-1.0-r0.aarch64\n- nothing provides libjpeg.so.62(LIBJPEG_6.2)(64bit) needed by jvm-1.0-r0.aarch64\n (try to add '--skip-broken' to skip uninstallable packages or '--nobest' to use not only best c \n candidate packages) \n ERROR: core-image-minimal-1.0-r0 do_rootfs: \n ERROR: core-image-minimal-1.0-r0 do_rootfs: Function failed: do_rootfs\n</code></pre>\n\n<p>Its just custom recipe file jvm.bb which compiled well but while installing into rootfs seeing about issue.</p>\n\n<p>Is there a workaround for it ?</p>\n"},{"tags":["java","macos","intellij-idea","lwjgl"],"comments":[{"owner":{"account_id":7756158,"reputation":884,"user_id":5870394,"display_name":"CConard96"},"score":1,"creation_date":1466632476,"post_id":37978702,"comment_id":63403737,"body_markdown":"Possible duplicate of [GLFW Window Crashing Even With &quot;-XstartOnFirstThread&quot; In VM Arguments](http://stackoverflow.com/questions/37333723/glfw-window-crashing-even-with-xstartonfirstthread-in-vm-arguments)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/37333723/glfw-window-crashing-even-with-xstartonfirstthread-in-vm-arguments\">GLFW Window Crashing Even With &quot;-XstartOnFirstThread&quot; In VM Arguments</a>"},{"owner":{"account_id":7756158,"reputation":884,"user_id":5870394,"display_name":"CConard96"},"score":0,"creation_date":1466632731,"post_id":37978702,"comment_id":63403836,"body_markdown":"How can I be more specific? This issue was solved in another post, and the answer I provided there is pretty self explanatory.","body":"How can I be more specific? This issue was solved in another post, and the answer I provided there is pretty self explanatory."},{"owner":{"account_id":6836822,"reputation":65,"user_id":5258441,"accept_rate":83,"display_name":"Boo"},"score":0,"creation_date":1466633687,"post_id":37978702,"comment_id":63404128,"body_markdown":"I changed it to run it all on the main thread. I have it exactly like they show it here: https://www.lwjgl.org/guide still the same error","body":"I changed it to run it all on the main thread. I have it exactly like they show it here: <a href=\"https://www.lwjgl.org/guide\" rel=\"nofollow noreferrer\">lwjgl.org/guide</a> still the same error"},{"owner":{"account_id":3771489,"reputation":5627,"user_id":3133545,"accept_rate":75,"display_name":"Onur"},"score":0,"creation_date":1466634333,"post_id":37978702,"comment_id":63404353,"body_markdown":"@NikBabinchuk Did you notice **&quot;WARNING: The code below requires the latest nightly build to compile and run.&quot;** at that link? I dont think you are using the lastest nightly build.","body":"@NikBabinchuk Did you notice <b>&quot;WARNING: The code below requires the latest nightly build to compile and run.&quot;</b> at that link? I dont think you are using the lastest nightly build."},{"owner":{"account_id":6836822,"reputation":65,"user_id":5258441,"accept_rate":83,"display_name":"Boo"},"score":0,"creation_date":1466634861,"post_id":37978702,"comment_id":63404494,"body_markdown":"So whats the f&#39;n solution? I&#39;ve changed it back to the code above, got rid of the thread I&#39;ve created and am running everything on the main thread. Still get the same error.....","body":"So whats the f&#39;n solution? I&#39;ve changed it back to the code above, got rid of the thread I&#39;ve created and am running everything on the main thread. Still get the same error....."},{"owner":{"account_id":6836822,"reputation":65,"user_id":5258441,"accept_rate":83,"display_name":"Boo"},"score":0,"creation_date":1466634960,"post_id":37978702,"comment_id":63404521,"body_markdown":"Can someone please post a way they would write that code correctly?","body":"Can someone please post a way they would write that code correctly?"},{"owner":{"account_id":3771489,"reputation":5627,"user_id":3133545,"accept_rate":75,"display_name":"Onur"},"score":0,"creation_date":1466635425,"post_id":37978702,"comment_id":63404662,"body_markdown":"@NikBabinchuk how about a full tutorial? [Lightweight Java Game Library 3 Tutorial](https://github.com/SilverTiger/lwjgl3-tutorial/wiki) And a book? [lwjglbook](https://github.com/lwjglgamedev/lwjglbook)","body":"@NikBabinchuk how about a full tutorial? <a href=\"https://github.com/SilverTiger/lwjgl3-tutorial/wiki\" rel=\"nofollow noreferrer\">Lightweight Java Game Library 3 Tutorial</a> And a book? <a href=\"https://github.com/lwjglgamedev/lwjglbook\" rel=\"nofollow noreferrer\">lwjglbook</a>"},{"owner":{"account_id":7756158,"reputation":884,"user_id":5870394,"display_name":"CConard96"},"score":0,"creation_date":1466637127,"post_id":37978702,"comment_id":63405158,"body_markdown":"As long as you still have the -XstartOnFirstThread flag, the code on lwjgl.org/guide should work just fine. Also, relooking at your post, it isn&#39;t supposed to be a Program argument, but a VM Argument (Or whatever IntelliJ calls it).","body":"As long as you still have the -XstartOnFirstThread flag, the code on lwjgl.org/guide should work just fine. Also, relooking at your post, it isn&#39;t supposed to be a Program argument, but a VM Argument (Or whatever IntelliJ calls it)."},{"owner":{"account_id":6836822,"reputation":65,"user_id":5258441,"accept_rate":83,"display_name":"Boo"},"score":0,"creation_date":1466642671,"post_id":37978702,"comment_id":63406548,"body_markdown":"Finally fixed it. The -XstartOnFirstThread needed to be in the VM Options section in Intellij and it works with the lwjgl.org/guide code....","body":"Finally fixed it. The -XstartOnFirstThread needed to be in the VM Options section in Intellij and it works with the lwjgl.org/guide code...."}],"answers":[{"tags":[],"owner":{"account_id":3771489,"reputation":5627,"user_id":3133545,"accept_rate":75,"display_name":"Onur"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1466632525,"creation_date":1466632525,"answer_id":37978932,"question_id":37978702,"body_markdown":"The exception you got is very clear about the issue, your `init()` method which calls `glfwCreateWindow()` to create `GLFW Window` should be called from a `main thread`. So make your `init()` method public and remove the `init();` call inside the `run()` method. Instead change your main method to this;\r\n\r\n    public static void main(String[] args){\r\n       Main main = new Main();\r\n       main.init();\r\n       main.start();\r\n    }","title":"GLFW engine and the main thread issue IntelliJ","body":"<p>The exception you got is very clear about the issue, your <code>init()</code> method which calls <code>glfwCreateWindow()</code> to create <code>GLFW Window</code> should be called from a <code>main thread</code>. So make your <code>init()</code> method public and remove the <code>init();</code> call inside the <code>run()</code> method. Instead change your main method to this;</p>\n\n<pre><code>public static void main(String[] args){\n   Main main = new Main();\n   main.init();\n   main.start();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2181695,"reputation":321,"user_id":1931020,"display_name":"AlexZenadi"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1495727830,"creation_date":1495727830,"answer_id":44184837,"question_id":37978702,"body_markdown":"I met the same error with Intellij 2017.1.3; mac os 10.12.4; lwjgl-release-3.1\r\n\r\nIt solved by click Menu - Run -&gt; Edit Configurations... and then add the parameter -XstartOnFirstThread to the text box beside VM options:\r\n\r\nScreen print:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/GLO1Y.png","title":"GLFW engine and the main thread issue IntelliJ","body":"<p>I met the same error with Intellij 2017.1.3; mac os 10.12.4; lwjgl-release-3.1</p>\n\n<p>It solved by click Menu - Run -> Edit Configurations... and then add the parameter -XstartOnFirstThread to the text box beside VM options:</p>\n\n<p>Screen print:\n<a href=\"https://i.stack.imgur.com/GLO1Y.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/GLO1Y.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":[],"owner":{"account_id":5304825,"reputation":464,"user_id":4382595,"display_name":"deyanm"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1636643466,"creation_date":1636643466,"answer_id":69930613,"question_id":37978702,"body_markdown":"For those with missing VM options, this field is hidden, here:\r\n\r\nRun -&gt; Edit Configurations... -&gt; Modify options dropdown -&gt; Add VM options -&gt; -XstartOnFirstThread\r\n\r\n[![screen print][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/AROhu.png","title":"GLFW engine and the main thread issue IntelliJ","body":"<p>For those with missing VM options, this field is hidden, here:</p>\n<p>Run -&gt; Edit Configurations... -&gt; Modify options dropdown -&gt; Add VM options -&gt; -XstartOnFirstThread</p>\n<p><a href=\"https://i.stack.imgur.com/AROhu.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/AROhu.png\" alt=\"screen print\" /></a></p>\n"},{"tags":[],"owner":{"account_id":1296863,"reputation":879,"user_id":1458638,"accept_rate":80,"display_name":"Donald.McLean"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689032077,"creation_date":1689032077,"answer_id":76657903,"question_id":37978702,"body_markdown":"If you&#39;re using the build.gradle file built the The Initializer, you can add this section, to specify the Java command line option:\r\n\r\n    application {\r\n        applicationDefaultJvmArgs = [&#39;-XstartOnFirstThread&#39;]\r\n    }\r\n\r\n","title":"GLFW engine and the main thread issue IntelliJ","body":"<p>If you're using the build.gradle file built the The Initializer, you can add this section, to specify the Java command line option:</p>\n<pre><code>application {\n    applicationDefaultJvmArgs = ['-XstartOnFirstThread']\n}\n</code></pre>\n"}],"owner":{"account_id":6836822,"reputation":65,"user_id":5258441,"accept_rate":83,"display_name":"Boo"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5403,"favorite_count":0,"down_vote_count":1,"up_vote_count":6,"answer_count":4,"score":5,"last_activity_date":1689032077,"creation_date":1466631427,"question_id":37978702,"body_markdown":"I am using a Mac OS x. My IDE is Intellij. For some reason I get an error when trying to run this code. The code is an lwjgl game engine.\r\n\r\n    import org.lwjgl.glfw.*;\r\n    import org.lwjgl.opengl.*;\r\n\r\n    import static org.lwjgl.glfw.GLFW.*;\r\n    import static org.lwjgl.opengl.GL11.*;\r\n    import static org.lwjgl.system.MemoryUtil.*;\r\n    import static org.lwjgl.glfw.Callbacks.*;\r\n    import org.lwjgl.*;\r\n\r\n    import java.awt.*;\r\n    import java.util.*;\r\n    import java.text.DateFormat;\r\n    import java.applet.Applet;\r\n\r\n    public class Main implements Runnable{\r\n\r\n    private int width = 1280;\r\n    private int height =720;\r\n    private String title = &quot;Flappy&quot;;\r\n\r\n    private boolean running = false;\r\n    private Thread thread;\r\n    private long window;\r\n\r\n    public void start(){\r\n        running = true;\r\n\r\n        thread = new Thread(this, &quot;Display&quot;);\r\n        //this will call the run method that we created below by using our implemented Runnable\r\n        thread.start();\r\n    }\r\n\r\n    public void run(){\r\n        init();\r\n        running = true;\r\n          while(running){\r\n            update();\r\n            render();\r\n            if(glfwWindowShouldClose(window)){\r\n                running = false;\r\n            }\r\n        }\r\n    }\r\n\r\n    //init initializes all of our stuff\r\n    private void init(){\r\n\r\n        if(!glfwInit()){\r\n            throw new IllegalStateException(&quot;Unable to initialize GLFW YOOO&quot;);\r\n        }\r\n\r\n        // Configure our window\r\n        glfwWindowHint(GLFW_VISIBLE, GLFW_FALSE); // the window will stay hidden after creation\r\n        glfwWindowHint(GLFW_RESIZABLE, GLFW_TRUE); // the window will be resizable\r\n\r\n        window = glfwCreateWindow(width, height, title, NULL, NULL);\r\n\r\n        if(window == NULL){\r\n            throw new RuntimeException(&quot;Failed to create the GLFW window&quot;);\r\n        }\r\n\r\n\r\n        GLFWVidMode vidmode = glfwGetVideoMode(glfwGetPrimaryMonitor());\r\n        glfwSetWindowPos(window, (vidmode.width() - width) / 2, (vidmode.height() - height) / 2);\r\n        // Make the OpenGL context current\r\n        glfwMakeContextCurrent(window);\r\n        // Enable v-sync\r\n        glfwSwapInterval(1);\r\n\r\n        // Make the window visible\r\n        glfwShowWindow(window);\r\n\r\n    }\r\n\r\n\r\n\r\n    public void update(){\r\n        glfwPollEvents();\r\n    }\r\n\r\n    public void render(){\r\n        glfwSwapBuffers(window);\r\n    }\r\n\r\n\r\n    public static void main(String[] args){\r\n        new Main().start();\r\n    }\r\n    }\r\nReading some posts I tried adding -XstartOnFirstThread to Edit Configure and program argument but that didn&#39;t help. My error if below. If anyone could help, thanks... Again using a Mac with Intellij. The error is added below: \r\n\r\n    Caused by: java.lang.IllegalStateException: GLFW windows may only be created on the main thread and that thread must be the first thread in the process. Please run the JVM with -XstartOnFirstThread. For offscreen rendering, make sure another window toolkit (e.g. AWT or JavaFX) is initialized before GLFW.\r\n\r\n","title":"GLFW engine and the main thread issue IntelliJ","body":"<p>I am using a Mac OS x. My IDE is Intellij. For some reason I get an error when trying to run this code. The code is an lwjgl game engine.</p>\n<pre><code>import org.lwjgl.glfw.*;\nimport org.lwjgl.opengl.*;\n\nimport static org.lwjgl.glfw.GLFW.*;\nimport static org.lwjgl.opengl.GL11.*;\nimport static org.lwjgl.system.MemoryUtil.*;\nimport static org.lwjgl.glfw.Callbacks.*;\nimport org.lwjgl.*;\n\nimport java.awt.*;\nimport java.util.*;\nimport java.text.DateFormat;\nimport java.applet.Applet;\n\npublic class Main implements Runnable{\n\nprivate int width = 1280;\nprivate int height =720;\nprivate String title = &quot;Flappy&quot;;\n\nprivate boolean running = false;\nprivate Thread thread;\nprivate long window;\n\npublic void start(){\n    running = true;\n\n    thread = new Thread(this, &quot;Display&quot;);\n    //this will call the run method that we created below by using our implemented Runnable\n    thread.start();\n}\n\npublic void run(){\n    init();\n    running = true;\n      while(running){\n        update();\n        render();\n        if(glfwWindowShouldClose(window)){\n            running = false;\n        }\n    }\n}\n\n//init initializes all of our stuff\nprivate void init(){\n\n    if(!glfwInit()){\n        throw new IllegalStateException(&quot;Unable to initialize GLFW YOOO&quot;);\n    }\n\n    // Configure our window\n    glfwWindowHint(GLFW_VISIBLE, GLFW_FALSE); // the window will stay hidden after creation\n    glfwWindowHint(GLFW_RESIZABLE, GLFW_TRUE); // the window will be resizable\n\n    window = glfwCreateWindow(width, height, title, NULL, NULL);\n\n    if(window == NULL){\n        throw new RuntimeException(&quot;Failed to create the GLFW window&quot;);\n    }\n\n\n    GLFWVidMode vidmode = glfwGetVideoMode(glfwGetPrimaryMonitor());\n    glfwSetWindowPos(window, (vidmode.width() - width) / 2, (vidmode.height() - height) / 2);\n    // Make the OpenGL context current\n    glfwMakeContextCurrent(window);\n    // Enable v-sync\n    glfwSwapInterval(1);\n\n    // Make the window visible\n    glfwShowWindow(window);\n\n}\n\n\n\npublic void update(){\n    glfwPollEvents();\n}\n\npublic void render(){\n    glfwSwapBuffers(window);\n}\n\n\npublic static void main(String[] args){\n    new Main().start();\n}\n}\n</code></pre>\n<p>Reading some posts I tried adding -XstartOnFirstThread to Edit Configure and program argument but that didn't help. My error if below. If anyone could help, thanks... Again using a Mac with Intellij. The error is added below:</p>\n<pre><code>Caused by: java.lang.IllegalStateException: GLFW windows may only be created on the main thread and that thread must be the first thread in the process. Please run the JVM with -XstartOnFirstThread. For offscreen rendering, make sure another window toolkit (e.g. AWT or JavaFX) is initialized before GLFW.\n</code></pre>\n"},{"tags":["java","swing","nullpointerexception","jdatechooser"],"answers":[{"tags":[],"owner":{"account_id":216120,"reputation":49213,"user_id":471160,"accept_rate":90,"display_name":"marcinj"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1689019156,"creation_date":1689019156,"answer_id":76656954,"question_id":76656779,"body_markdown":"In this line:\r\n\r\n    Termin.setDate(sdl.format(dateChooser.getDate()));\r\n\r\ndateChooser.getDate() returns null because because no date has yet been selected. You need to detect when user has changed the date. You should use code as in this SO: https://stackoverflow.com/questions/4156305/is-it-possible-to-detect-a-date-change-on-a-jcalendar-jdatechooser-field\r\n\r\nIt should look something like:\r\n\r\n    dateChooser.getDateEditor().addPropertyChangeListener(\r\n        new PropertyChangeListener() {\r\n            @Override\r\n            public void propertyChange(PropertyChangeEvent e) {\r\n               if (&quot;date&quot;.equals(e.getPropertyName())) {\r\n                    java.util.Date date = (java.util.Date)e.getNewValue();\r\n                    Termin.setDate(sdl.format(date));\r\n                }\r\n            }\r\n        }\r\n    );","title":"Date Must not be null","body":"<p>In this line:</p>\n<pre><code>Termin.setDate(sdl.format(dateChooser.getDate()));\n</code></pre>\n<p>dateChooser.getDate() returns null because because no date has yet been selected. You need to detect when user has changed the date. You should use code as in this SO: <a href=\"https://stackoverflow.com/questions/4156305/is-it-possible-to-detect-a-date-change-on-a-jcalendar-jdatechooser-field\">Is it possible to detect a date change on a JCalendar JDateChooser field?</a></p>\n<p>It should look something like:</p>\n<pre><code>dateChooser.getDateEditor().addPropertyChangeListener(\n    new PropertyChangeListener() {\n        @Override\n        public void propertyChange(PropertyChangeEvent e) {\n           if (&quot;date&quot;.equals(e.getPropertyName())) {\n                java.util.Date date = (java.util.Date)e.getNewValue();\n                Termin.setDate(sdl.format(date));\n            }\n        }\n    }\n);\n</code></pre>\n"}],"owner":{"account_id":28989514,"reputation":11,"user_id":22205606,"display_name":"Pitergann"},"comment_count":0,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":213,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1689031151,"accepted_answer_id":76656954,"answer_count":1,"score":0,"last_activity_date":1689030989,"creation_date":1689017515,"question_id":76656779,"body_markdown":"I want to use the DateChooser in my application. I have already installed and implemented everything in my code and there are no compilation errors, but when I try to run the code the console shows an error that, &quot;Date Must not be Null&quot;.  What am I doing wrong? Do I have to implement a &quot;base&quot; date first?\r\n\r\n\r\n```\r\nkalender = new JPanel();\r\nkalender.setBackground(new Color(135, 206, 235));\r\nkalender.setBounds(0, 0, 506, 250);\r\nLayeredPane.add(kalender);\r\nkalender.setLayout(null);\r\n\t\r\nTermin = new Termin();\r\n\t\r\nSimpleDateFormat sdl = new SimpleDateFormat(&quot;dd-MM-yyyy&quot;);\r\nJDateChooser dateChooser = new JDateChooser();\r\ndateChooser.setBounds(169, 119, 70, 20);\r\nTermin.setDate(sdl.format(dateChooser.getDate())); // the erro must be here because with out this     \r\nkalender.add(dateChooser);                          //line everything works\r\nSystem.out.println(Termin);\r\n\t\r\nJButton btnNext3 = new JButton(&quot;Next&quot;);\r\nbtnNext3.setBounds(215, 200, 70, 20);\r\nkalender.add(btnNext3);\r\nbtnNext3.addActionListener(new ActionListener() {\r\n\r\n\t\tpublic void actionPerformed(ActionEvent e) {\r\n\t\t\tLayeredPane.moveToFront(kontakt);\r\n\t\t\tkalender.removeAll();\r\n\t\t}\r\n\t\t\r\n\t});\r\n```\r\n\r\n\r\nSo I have a separate Class &quot;Termin&quot; to define all the attributes of an appointment, and I want to set the attributes date to whatever the user chooses in the Date Chooser.\r\n\r\nI have tried to set the date in the attribute by hard coding it, but then it would not change when the user makes a selection with the date chooser.\r\n","title":"Date Must not be null","body":"<p>I want to use the DateChooser in my application. I have already installed and implemented everything in my code and there are no compilation errors, but when I try to run the code the console shows an error that, &quot;Date Must not be Null&quot;.  What am I doing wrong? Do I have to implement a &quot;base&quot; date first?</p>\n<pre><code>kalender = new JPanel();\nkalender.setBackground(new Color(135, 206, 235));\nkalender.setBounds(0, 0, 506, 250);\nLayeredPane.add(kalender);\nkalender.setLayout(null);\n    \nTermin = new Termin();\n    \nSimpleDateFormat sdl = new SimpleDateFormat(&quot;dd-MM-yyyy&quot;);\nJDateChooser dateChooser = new JDateChooser();\ndateChooser.setBounds(169, 119, 70, 20);\nTermin.setDate(sdl.format(dateChooser.getDate())); // the erro must be here because with out this     \nkalender.add(dateChooser);                          //line everything works\nSystem.out.println(Termin);\n    \nJButton btnNext3 = new JButton(&quot;Next&quot;);\nbtnNext3.setBounds(215, 200, 70, 20);\nkalender.add(btnNext3);\nbtnNext3.addActionListener(new ActionListener() {\n\n        public void actionPerformed(ActionEvent e) {\n            LayeredPane.moveToFront(kontakt);\n            kalender.removeAll();\n        }\n        \n    });\n</code></pre>\n<p>So I have a separate Class &quot;Termin&quot; to define all the attributes of an appointment, and I want to set the attributes date to whatever the user chooses in the Date Chooser.</p>\n<p>I have tried to set the date in the attribute by hard coding it, but then it would not change when the user makes a selection with the date chooser.</p>\n"},{"tags":["java","android","android-databinding"],"owner":{"account_id":28806042,"reputation":21,"user_id":22061899,"display_name":"DPRCode"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689030443,"creation_date":1689030443,"question_id":76657815,"body_markdown":"this is my first time developing a small Android application.\r\nI&#39;ve got a weird Problem where a EditText field seems to duplicate when trying to use a two way data binding.\r\n[![enter image description here](https://i.stack.imgur.com/rOrUD.jpg)](https://i.stack.imgur.com/rOrUD.jpg)\r\nIts only possible to edit the text of the EditText field without the databinding therefore it is not possible to receive the Data.\r\n[![enter image description here](https://i.stack.imgur.com/2yXCh.jpg)](https://i.stack.imgur.com/2yXCh.jpg)\r\n\r\nThe fragment layout:\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;layout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    tools:context=&quot;.view.StartView&quot;&gt;\r\n\r\n\r\n    &lt;data&gt;\r\n        &lt;variable\r\n            name=&quot;viewmodel&quot;\r\n            type=&quot;com.example.emitester2.viewModel.StartViewModel&quot; /&gt;\r\n    &lt;/data&gt;\r\n    &lt;LinearLayout\r\n        android:id=&quot;@+id/StartWrapper&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:orientation=&quot;vertical&quot;\r\n        &gt;\r\n\r\n        &lt;EditText\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;@={viewmodel.username}&quot;\r\n            android:hint=&quot;@string/UsernameHint&quot;\r\n            android:layout_marginTop=&quot;200dp&quot;/&gt;\r\n\r\n        &lt;TextView\r\n            android:id=&quot;@+id/usernameTextView&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_gravity=&quot;center&quot;\r\n            android:text=&quot;@{viewmodel.username}&quot;\r\n            android:textSize=&quot;20sp&quot;\r\n            android:layout_marginTop=&quot;30dp&quot;/&gt;\r\n\r\n        &lt;Button\r\n            android:id=&quot;@+id/startQuizButton&quot;\r\n            android:layout_width=&quot;100dp&quot;\r\n            android:layout_height=&quot;70dp&quot;\r\n            android:layout_gravity=&quot;center&quot;\r\n            android:text=&quot;@string/start_quiz&quot;\r\n            android:layout_marginTop=&quot;30dp&quot;\r\n            /&gt;\r\n    &lt;/LinearLayout&gt;\r\n&lt;/layout&gt;\r\n```\r\n\r\nThe Fragment Java source file:\r\n\r\n```java\r\npackage com.example.emitester2.view;\r\n\r\nimport android.os.Bundle;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.databinding.DataBindingUtil;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.navigation.NavController;\r\nimport androidx.navigation.Navigation;\r\n\r\nimport com.example.emitester2.R;\r\nimport com.example.emitester2.databinding.FragmentStartViewBinding;\r\nimport com.example.emitester2.viewModel.StartViewModel;\r\n\r\npublic class StartView extends Fragment {\r\n\r\n    private StartViewModel startViewModel;\r\n\r\n\r\n    public static StartView newInstance() {\r\n        return new StartView();\r\n    }\r\n\r\n    @Override\r\n    public View onCreateView(@NonNull LayoutInflater inflater,@Nullable ViewGroup container,\r\n                             @Nullable Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        return inflater.inflate(R.layout.fragment_start_view, container, false);\r\n    }\r\n\r\n    @Override\r\n    public void onViewCreated(View view, Bundle savedInstanceState) {\r\n        super.onViewCreated(view, savedInstanceState);\r\n        FragmentStartViewBinding binding = DataBindingUtil.setContentView(this.getActivity(), R.layout.fragment_start_view);\r\n        startViewModel = new StartViewModel();\r\n        binding.setViewmodel(startViewModel);\r\n        binding.executePendingBindings();\r\n        Button button = (Button) view.findViewById(R.id.startQuizButton);\r\n        button.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                startQuiz(v);\r\n            }\r\n        });\r\n    }\r\n\r\n    public void startQuiz(View view) {\r\n        // This is probably not the right way to do this, but it works for now\r\n\r\n        Bundle bundle = new Bundle();\r\n        String username = this.startViewModel.getStringUsername();\r\n        bundle.putString(&quot;username&quot;,username);\r\n        NavController navController;\r\n        navController = Navigation.findNavController(view);\r\n        navController.navigate(R.id.action_startView_to_quizView,bundle);\r\n    }\r\n\r\n}\r\n```\r\n\r\nThe Viewmodel:\r\n\r\n```java\r\npackage com.example.emitester2.viewModel;\r\n\r\nimport androidx.databinding.ObservableField;\r\nimport androidx.navigation.NavController;\r\nimport androidx.navigation.Navigation;\r\n\r\npublic class StartViewModel {\r\n    public ObservableField&lt;String&gt; username;\r\n\r\n    public StartViewModel() {\r\n        username = new ObservableField&lt;&gt;(&quot;John Doe&quot;);\r\n    }\r\n\r\n    public String getStringUsername() {\r\n        System.out.println(username);\r\n        //for testing purposes\r\n        username.set(&quot;Jane Doe&quot;);\r\n        return username.get();\r\n    }\r\n\r\n    public void demofunction(){\r\n        System.out.println(username);\r\n        getStringUsername();\r\n    }\r\n}\r\n```\r\n\r\nI am navigating via a NavGraph where this fragment is the initial starting point.\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;navigation xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:id=&quot;@+id/nav_graph&quot;\r\n    app:startDestination=&quot;@id/startView&quot;&gt;\r\n    &lt;fragment\r\n        android:id=&quot;@+id/startView&quot;\r\n        android:name=&quot;com.example.emitester2.view.StartView&quot;\r\n        android:label=&quot;fragment_start_view&quot;\r\n        tools:layout=&quot;@layout/fragment_start_view&quot; &gt;\r\n        &lt;action\r\n            android:id=&quot;@+id/action_startView_to_quizView&quot;\r\n            app:destination=&quot;@id/quizView&quot; /&gt;\r\n    &lt;/fragment&gt;\r\n    &lt;fragment\r\n        android:id=&quot;@+id/quizView&quot;\r\n        android:name=&quot;com.example.emitester2.view.QuizView&quot;\r\n        android:label=&quot;fragment_quiz_view&quot;\r\n        tools:layout=&quot;@layout/fragment_quiz_view&quot; /&gt;\r\n&lt;/navigation&gt;\r\n```\r\n\r\nI use a second fragment with similar structure where the EditText Field works fine with a two way databinding and the IDE throws no error when building the project. I&#39;ve got no clue where to search anymore and I would be happy if anyone could point me in the right direction.","title":"EditText duplication issue with two-way data binding in Android application","body":"<p>this is my first time developing a small Android application.\nI've got a weird Problem where a EditText field seems to duplicate when trying to use a two way data binding.\n<a href=\"https://i.stack.imgur.com/rOrUD.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rOrUD.jpg\" alt=\"enter image description here\" /></a>\nIts only possible to edit the text of the EditText field without the databinding therefore it is not possible to receive the Data.\n<a href=\"https://i.stack.imgur.com/2yXCh.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2yXCh.jpg\" alt=\"enter image description here\" /></a></p>\n<p>The fragment layout:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;layout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    tools:context=&quot;.view.StartView&quot;&gt;\n\n\n    &lt;data&gt;\n        &lt;variable\n            name=&quot;viewmodel&quot;\n            type=&quot;com.example.emitester2.viewModel.StartViewModel&quot; /&gt;\n    &lt;/data&gt;\n    &lt;LinearLayout\n        android:id=&quot;@+id/StartWrapper&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        android:orientation=&quot;vertical&quot;\n        &gt;\n\n        &lt;EditText\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:text=&quot;@={viewmodel.username}&quot;\n            android:hint=&quot;@string/UsernameHint&quot;\n            android:layout_marginTop=&quot;200dp&quot;/&gt;\n\n        &lt;TextView\n            android:id=&quot;@+id/usernameTextView&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_gravity=&quot;center&quot;\n            android:text=&quot;@{viewmodel.username}&quot;\n            android:textSize=&quot;20sp&quot;\n            android:layout_marginTop=&quot;30dp&quot;/&gt;\n\n        &lt;Button\n            android:id=&quot;@+id/startQuizButton&quot;\n            android:layout_width=&quot;100dp&quot;\n            android:layout_height=&quot;70dp&quot;\n            android:layout_gravity=&quot;center&quot;\n            android:text=&quot;@string/start_quiz&quot;\n            android:layout_marginTop=&quot;30dp&quot;\n            /&gt;\n    &lt;/LinearLayout&gt;\n&lt;/layout&gt;\n</code></pre>\n<p>The Fragment Java source file:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.emitester2.view;\n\nimport android.os.Bundle;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.Button;\n\nimport androidx.annotation.NonNull;\nimport androidx.annotation.Nullable;\nimport androidx.databinding.DataBindingUtil;\nimport androidx.fragment.app.Fragment;\nimport androidx.navigation.NavController;\nimport androidx.navigation.Navigation;\n\nimport com.example.emitester2.R;\nimport com.example.emitester2.databinding.FragmentStartViewBinding;\nimport com.example.emitester2.viewModel.StartViewModel;\n\npublic class StartView extends Fragment {\n\n    private StartViewModel startViewModel;\n\n\n    public static StartView newInstance() {\n        return new StartView();\n    }\n\n    @Override\n    public View onCreateView(@NonNull LayoutInflater inflater,@Nullable ViewGroup container,\n                             @Nullable Bundle savedInstanceState) {\n        // Inflate the layout for this fragment\n        return inflater.inflate(R.layout.fragment_start_view, container, false);\n    }\n\n    @Override\n    public void onViewCreated(View view, Bundle savedInstanceState) {\n        super.onViewCreated(view, savedInstanceState);\n        FragmentStartViewBinding binding = DataBindingUtil.setContentView(this.getActivity(), R.layout.fragment_start_view);\n        startViewModel = new StartViewModel();\n        binding.setViewmodel(startViewModel);\n        binding.executePendingBindings();\n        Button button = (Button) view.findViewById(R.id.startQuizButton);\n        button.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                startQuiz(v);\n            }\n        });\n    }\n\n    public void startQuiz(View view) {\n        // This is probably not the right way to do this, but it works for now\n\n        Bundle bundle = new Bundle();\n        String username = this.startViewModel.getStringUsername();\n        bundle.putString(&quot;username&quot;,username);\n        NavController navController;\n        navController = Navigation.findNavController(view);\n        navController.navigate(R.id.action_startView_to_quizView,bundle);\n    }\n\n}\n</code></pre>\n<p>The Viewmodel:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.emitester2.viewModel;\n\nimport androidx.databinding.ObservableField;\nimport androidx.navigation.NavController;\nimport androidx.navigation.Navigation;\n\npublic class StartViewModel {\n    public ObservableField&lt;String&gt; username;\n\n    public StartViewModel() {\n        username = new ObservableField&lt;&gt;(&quot;John Doe&quot;);\n    }\n\n    public String getStringUsername() {\n        System.out.println(username);\n        //for testing purposes\n        username.set(&quot;Jane Doe&quot;);\n        return username.get();\n    }\n\n    public void demofunction(){\n        System.out.println(username);\n        getStringUsername();\n    }\n}\n</code></pre>\n<p>I am navigating via a NavGraph where this fragment is the initial starting point.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;navigation xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:id=&quot;@+id/nav_graph&quot;\n    app:startDestination=&quot;@id/startView&quot;&gt;\n    &lt;fragment\n        android:id=&quot;@+id/startView&quot;\n        android:name=&quot;com.example.emitester2.view.StartView&quot;\n        android:label=&quot;fragment_start_view&quot;\n        tools:layout=&quot;@layout/fragment_start_view&quot; &gt;\n        &lt;action\n            android:id=&quot;@+id/action_startView_to_quizView&quot;\n            app:destination=&quot;@id/quizView&quot; /&gt;\n    &lt;/fragment&gt;\n    &lt;fragment\n        android:id=&quot;@+id/quizView&quot;\n        android:name=&quot;com.example.emitester2.view.QuizView&quot;\n        android:label=&quot;fragment_quiz_view&quot;\n        tools:layout=&quot;@layout/fragment_quiz_view&quot; /&gt;\n&lt;/navigation&gt;\n</code></pre>\n<p>I use a second fragment with similar structure where the EditText Field works fine with a two way databinding and the IDE throws no error when building the project. I've got no clue where to search anymore and I would be happy if anyone could point me in the right direction.</p>\n"},{"tags":["java","android","firebase","kotlin","google-cloud-firestore"],"comments":[{"owner":{"account_id":426109,"reputation":302012,"user_id":807126,"display_name":"Doug Stevenson"},"score":1,"creation_date":1586187377,"post_id":61058997,"comment_id":108029532,"body_markdown":"It&#39;s worth noting that indexes are not free. All indexes **do occupy space**, and this counts toward the overall size of the database, for the purpose of billing, even if it doesn&#39;t affect the total size of each individual document.","body":"It&#39;s worth noting that indexes are not free. All indexes <b>do occupy space</b>, and this counts toward the overall size of the database, for the purpose of billing, even if it doesn&#39;t affect the total size of each individual document."},{"owner":{"account_id":13601044,"reputation":179,"user_id":9811716,"display_name":"Pathis Patel"},"score":0,"creation_date":1586187760,"post_id":61058997,"comment_id":108029793,"body_markdown":"Thank you very much @DougStevenson for this information. Is exactly what I was looking for, to be sure it doesn&#39;t count from each document quota.","body":"Thank you very much @DougStevenson for this information. Is exactly what I was looking for, to be sure it doesn&#39;t count from each document quota."}],"answers":[{"tags":[],"owner":{"account_id":12601597,"reputation":12580,"user_id":9164141,"accept_rate":93,"display_name":"Gast&#243;n Saill&#233;n"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689029028,"creation_date":1586173531,"answer_id":61059051,"question_id":61058997,"body_markdown":"The query does not take space for the document. The space of the document is in the document itself below your users collection; each document will have its own size, and this size will not be affected with the index for each field\r\n\r\nThe index is created for the documents your query matches, but you are only billed for the documents you access with that condition only.\r\n\r\nFrom [documentation][1]:\r\n\r\n&gt; An index behind every query If no index exists for a query, most\r\n&gt; databases crawl through their contents item by item, a slow process\r\n&gt; that slows down even more as the database grows. Cloud Firestore\r\n&gt; guarantees high query performance by using indexes for all queries. As\r\n&gt; a result, query performance depends on the size of the result set and\r\n&gt; not on the number of items in the database.\r\n&gt; \r\n&gt; Less index management, more app development Cloud Firestore includes\r\n&gt; features that reduce the amount of time you need to spend managing\r\n&gt; indexes. The indexes required for the most basic queries are\r\n&gt; automatically created for you. As you use and test your app, Cloud\r\n&gt; Firestore helps you identify and create additional indexes your app\r\n&gt; requires.\r\n\r\n\r\n  [1]: https://firebase.google.com/docs/firestore/query-data/index-overview#single-field-indexes","title":"Does the index in Firestore count?","body":"<p>The query does not take space for the document. The space of the document is in the document itself below your users collection; each document will have its own size, and this size will not be affected with the index for each field</p>\n<p>The index is created for the documents your query matches, but you are only billed for the documents you access with that condition only.</p>\n<p>From <a href=\"https://firebase.google.com/docs/firestore/query-data/index-overview#single-field-indexes\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n<blockquote>\n<p>An index behind every query If no index exists for a query, most\ndatabases crawl through their contents item by item, a slow process\nthat slows down even more as the database grows. Cloud Firestore\nguarantees high query performance by using indexes for all queries. As\na result, query performance depends on the size of the result set and\nnot on the number of items in the database.</p>\n<p>Less index management, more app development Cloud Firestore includes\nfeatures that reduce the amount of time you need to spend managing\nindexes. The indexes required for the most basic queries are\nautomatically created for you. As you use and test your app, Cloud\nFirestore helps you identify and create additional indexes your app\nrequires.</p>\n</blockquote>\n"}],"owner":{"account_id":13601044,"reputation":179,"user_id":9811716,"display_name":"Pathis Patel"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":219,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":61059051,"answer_count":1,"score":0,"last_activity_date":1689029028,"creation_date":1586173366,"question_id":61058997,"body_markdown":"I&#39;ve read that for every query an index is automatically created. So if I create this query:\r\n\r\n    db.collection(&quot;users&quot;).whereEqualTo(&quot;admin&quot;, true);\r\n\r\nAnd I get one result, is an index created for **admin** property? If yes, does this take space from the document quota?","title":"Does the index in Firestore count?","body":"<p>I've read that for every query an index is automatically created. So if I create this query:</p>\n\n<pre><code>db.collection(\"users\").whereEqualTo(\"admin\", true);\n</code></pre>\n\n<p>And I get one result, is an index created for <strong>admin</strong> property? If yes, does this take space from the document quota?</p>\n"},{"tags":["java","apache-camel","ehcache","jcache","caffeine-cache"],"owner":{"account_id":5072657,"reputation":3280,"user_id":4071001,"display_name":"lcnicolau"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":224,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689028791,"creation_date":1689022568,"question_id":76657292,"body_markdown":"What is the main difference between [jcache-component][1], [ehcache-component][2] and [caffeine-cache-component][3] (or any other); and which one would be the most appropriate for a simple use case in Apache Camel?\r\n\r\n----------\r\n\r\nThe problem: \r\n\r\nI need to read a relatively large `CSV` file, `split` it and insert each row somewhere via a `REST` service. The service requires an authentication token that expires in a few minutes, so it is possible to insert multiple records with the same token, but not all. \r\n\r\nTherefore, I want to `cache` the authentication `token` (a simple string) to reuse it (say for 100 records, or maybe 1 minute) and then get a new token. Note that since the `split` creates a new `exchange` for each iteration, you cannot use `headers` or `properties` to share information (the authentication token) between iterations.\r\n\r\n    from(&quot;timer://runOnce?repeatCount=1&quot;)\r\n        .to(&quot;direct:read-csv-data&quot;)\r\n        .split(body())\r\n            .to(&quot;direct:set-authorization&quot;)\r\n            .to(&quot;direct:insert-data-rest&quot;)\r\n        .end();\r\n    \r\n    from(&quot;direct:set-authorization&quot;)\r\n        .choice()\r\n            .when(this::requiresAuthorizationRenewal).to(&quot;direct:get-authorization-and-save-in-cache&quot;)\r\n            .otherwise().to(&quot;direct:get-authorization-from-cache&quot;)\r\n        .end();\r\n\r\n*(The `requiresAuthorizationRenewal` predicate uses the `CamelSplitIndex` exchange property to determine when to renew the token, e.g., every 100 records)*\r\n\r\n\r\n  [1]: https://camel.apache.org/components/3.20.x/jcache-component.html\r\n  [2]: https://camel.apache.org/components/3.20.x/ehcache-component.html\r\n  [3]: https://camel.apache.org/components/3.20.x/caffeine-cache-component.html","title":"Apache Camel components: jcache vs ehcache vs caffeine-cache","body":"<p>What is the main difference between <a href=\"https://camel.apache.org/components/3.20.x/jcache-component.html\" rel=\"nofollow noreferrer\">jcache-component</a>, <a href=\"https://camel.apache.org/components/3.20.x/ehcache-component.html\" rel=\"nofollow noreferrer\">ehcache-component</a> and <a href=\"https://camel.apache.org/components/3.20.x/caffeine-cache-component.html\" rel=\"nofollow noreferrer\">caffeine-cache-component</a> (or any other); and which one would be the most appropriate for a simple use case in Apache Camel?</p>\n<hr />\n<p>The problem:</p>\n<p>I need to read a relatively large <code>CSV</code> file, <code>split</code> it and insert each row somewhere via a <code>REST</code> service. The service requires an authentication token that expires in a few minutes, so it is possible to insert multiple records with the same token, but not all.</p>\n<p>Therefore, I want to <code>cache</code> the authentication <code>token</code> (a simple string) to reuse it (say for 100 records, or maybe 1 minute) and then get a new token. Note that since the <code>split</code> creates a new <code>exchange</code> for each iteration, you cannot use <code>headers</code> or <code>properties</code> to share information (the authentication token) between iterations.</p>\n<pre><code>from(&quot;timer://runOnce?repeatCount=1&quot;)\n    .to(&quot;direct:read-csv-data&quot;)\n    .split(body())\n        .to(&quot;direct:set-authorization&quot;)\n        .to(&quot;direct:insert-data-rest&quot;)\n    .end();\n\nfrom(&quot;direct:set-authorization&quot;)\n    .choice()\n        .when(this::requiresAuthorizationRenewal).to(&quot;direct:get-authorization-and-save-in-cache&quot;)\n        .otherwise().to(&quot;direct:get-authorization-from-cache&quot;)\n    .end();\n</code></pre>\n<p><em>(The <code>requiresAuthorizationRenewal</code> predicate uses the <code>CamelSplitIndex</code> exchange property to determine when to renew the token, e.g., every 100 records)</em></p>\n"},{"tags":["java","image","pdf","pdf-generation"],"comments":[{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1689020672,"post_id":76656620,"comment_id":135151569,"body_markdown":"What library are you using?","body":"What library are you using?"},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1689025949,"post_id":76656620,"comment_id":135152263,"body_markdown":"I saw it, but I don&#39;t understand the rest of your statement. The OP&#39;s PDF-generating code does not look like `Java` to me. Also, that code most likely uses a library, even if it&#39;s built into whatever language the OP is using. I asked the question, thinking that I can maybe sniff out the link between how the posted code deals with Java. Anyway, I hope you can be of better help than I was. lol, Good luck!","body":"I saw it, but I don&#39;t understand the rest of your statement. The OP&#39;s PDF-generating code does not look like <code>Java</code> to me. Also, that code most likely uses a library, even if it&#39;s built into whatever language the OP is using. I asked the question, thinking that I can maybe sniff out the link between how the posted code deals with Java. Anyway, I hope you can be of better help than I was. lol, Good luck!"},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":1,"creation_date":1689026516,"post_id":76656620,"comment_id":135152344,"body_markdown":"@KJ, Good answer. It simply means this question was out of my league.","body":"@KJ, Good answer. It simply means this question was out of my league."}],"answers":[{"tags":[],"owner":{"account_id":14313923,"reputation":8884,"user_id":10802527,"display_name":"K J"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1689028515,"creation_date":1689025618,"answer_id":76657530,"question_id":76656620,"body_markdown":"Your code is generally PURR-effect. Here is the result when code and image are added together correctly in MS Notepad and image via command line. It is short of one essential feature (the `xref` table before the trailer) but Acrobat Reader will ignore that and write its own.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nPersonally I tend to abbreviate the entries as it easier to see what is happening inside the PDF.\r\n\r\n```\r\n%PDF-1.7\r\n\r\n1 0 obj &lt;&lt;/Type/Catalog/Pages 2 0 R&gt;&gt; endobj\r\n2 0 obj &lt;&lt;/Type/Pages/Count 1/Kids [3 0 R]&gt;&gt; endobj\r\n3 0 obj &lt;&lt;/Type/Page/Parent 2 0 R/MediaBox [0 0 595 842]/Contents [5 0 R]/Resources&lt;&lt;/XObject&lt;&lt;/Im1 4 0 R&gt;&gt;&gt;&gt;&gt;&gt; endobj\r\n5 0 obj &lt;&lt;/Length 35&gt;&gt;\r\nstream \r\nq \r\n209 0 0 241 0 0 cm\r\n/Im1 Do \r\nQ \r\n\r\nendstream \r\nendobj\r\n\r\n4 0 obj &lt;&lt;/Type/XObject/Filter/DCTDecode/Length 8000/ColorSpace/DeviceRGB/Height 241/Width 209/Subtype/Image/BitsPerComponent 8&gt;&gt;\r\nstream\r\n*** Image goes here\r\nendstream\r\nendobj\r\n\r\ntrailer &lt;&lt;/Root 1 0 R/Size 5&gt;&gt;\r\n%%EOF\r\n```\r\n\r\nIn that state it will be 8,527 bytes( so only 527 more than the raw image), However Acrobat READER will save it as 12,665 bytes because it adjusts to be more compliant with web usage etc.\r\n\r\nThus we see its totally different  (not all necessarily better) so now starts\r\n```\r\n%PDF-1.7\r\n%&#226;&#227;&#207;&#211;\r\n7 0 obj\r\n&lt;&lt;/Linearized 1/L 12665/O 9/E 9017/N 1/T 12376/H [ 435 131]&gt;&gt;\r\nendobj\r\n                     \r\n12 0 obj\r\n&lt;&lt;/DecodeParms&lt;&lt;/Columns 3/Predictor 12&gt;&gt;/Filter/FlateDecode/ID[&lt;84AE98C0D1CB3C4D9543B24450B2D64C&gt;&lt;84AE98C0D1CB3C4D9543B24450B2D64C&gt;]/Index[7 7]/Info 6 0 R/Length 36/Prev 12377/Root 8 0 R/Size 14/Type/XRef/W[1 2 0]&gt;&gt;stream\r\nh&#222;bbd`b`Rcb`&#176;ab`œ\r\n&#164;C™&#254;J &#217;&#246;  0&#196;\r\nendstream\r\nendobj\r\nstartxref\r\n0\r\n%%EOF\r\n        \r\n13 0 obj\r\n&lt;&lt;/Filter/FlateDecode/I 66/Length 52/S 36&gt;&gt;stream\r\nh&#222;b```f``|&#207; \r\n&#199;0ŠBx™&#236;&#160;&#162;&#250;&#251;4#&#207;0 &#161;&#185;,\r\nendstream\r\nendobj\r\n8 0 obj\r\n&lt;&lt;/Metadata 1 0 R/Pages 5 0 R/Type/Catalog&gt;&gt;\r\n```\r\n\r\n!!!\r\n\r\nTo avoid such adjustments you need to include a `xref` of your own. For a very rough example in JScript see below.\r\n\r\nNote:- The copy and paste here will break the binary.\r\n```\r\nvar ByteStream = new ActiveXObject(&quot;ADODB.Stream&quot;);\r\nByteStream.Type = 2; // Writer\r\nByteStream.Charset = &quot;Windows-1252&quot;; //Best for PDF writer\r\nvar BS = ByteStream; // Abreviate for ease of edit\r\nBS.Open();\r\nBS.Position = 0;\r\n\r\nBS.WriteText(&quot;%PDF-1.0\\n&quot;);\r\nBS.WriteText(&quot;%&#197;&#209;&#167;&#161;\\n&quot;);\r\n\r\nBS.WriteText(&quot;1 0 obj &lt;&lt;/Type/Catalog/Pages 2 0 R&gt;&gt; endobj\\n&quot;);\r\nBS.WriteText(&quot;2 0 obj &lt;&lt;/Type/Pages/Count 1/Kids[3 0 R]&gt;&gt; endobj\\n&quot;);\r\nBS.WriteText(&quot;3 0 obj &lt;&lt;/Type/Page/MediaBox[0 0 144 144]/Rotate 0/Resources&lt;&lt;/XObject&lt;&lt;/Img0 4 0 R&gt;&gt;&gt;&gt;/Contents 5 0 R/Parent 2 0 R&gt;&gt; endobj\\n&quot;);\r\nBS.WriteText(&quot;4 0 obj &lt;&lt;/Type/XObject/Subtype/Image/Height 25/Width 24/BitsPerComponent 1/Length 75/ColorSpace/DeviceGray&gt;&gt; stream\\n&quot;);\r\nBS.WriteText(&#39;&#255;&#255;&#255;&#255;&#255;&#255;&#192;m&#223;[}&#209;oE&#209;[E&#209;qE&#223;E}&#192;U&#255;&#241;&#255;&#193;&#171;&#193;&#172;&#219;Zc&#253;&#214;&#199;&#200;&quot;}&#255;&#213;&#239;&#192;Ms&#223;`&#167;&#209;]9&#209;N&#209;E&#183;&#223;L&#199;&#192;A[&#255;&#255;&#255;&#255;&#255;&#255;&#39;);\r\nBS.WriteText(&quot;\\nendstream\\nendobj\\n&quot;);\r\nvar Pos1 = &quot;000000000&quot;+BS.Position\r\nBS.WriteText(&quot;5 0 obj &lt;&lt;/Length 101&gt;&gt; stream\\n&quot;);\r\nBS.WriteText(&quot;q\\n1 0 0 -1 18 54 cm\\n35 0 0 -36 0 36 cm\\n/Img0 Do\\nQ\\nq\\n1 0 0 -1 71 144 cm\\n70 0 0 -72 0 72 cm\\n/Img0 Do\\nQ\\n&quot;);\r\nBS.WriteText(&quot;\\nendstream\\nendobj\\n\\n&quot;);\r\nvar Pos2 = BS.Position\r\nBS.WriteText(&quot;xref\\n0 6\\n&quot;);\r\nBS.WriteText(&quot;0000000000 00001 f \\n0000000015 00000 n \\n0000000060 00000 n \\n0000000111 00000 n \\n0000000237 00000 n \\n&quot;+Pos1.slice(-10)+&quot; 00000 n \\n&quot;);\r\nBS.WriteText(&quot;\\ntrailer\\n&lt;&lt;/Size 6/Info&lt;&lt;/Producer(JScrip2pdf)&gt;&gt;/Root 1 0 R&gt;&gt;\\nstartxref\\n&quot;+Pos2+&quot;\\n%%EOF\\n&quot;);\r\n\r\nBS.SaveToFile(&quot;HelloWorldB&amp;W.pdf&quot;, 2);\r\nBS.Close();\r\n```\r\n\r\nA simple means to fix such missing trailer is often solved using MuPDF-GL but that is windows only, so use command line MuTool for cross platform cleaning.\r\n\r\nIt too will alter the file to a cleaner 8,653 bytes format (so very few additions)\r\n\r\n[![enter image description here][2]][2]\r\n```\r\n%PDF-1.7\r\n%&#194;&#181;&#194;&#182;\r\n\r\n1 0 obj\r\n&lt;&lt;/Type/Catalog/Pages 2 0 R&gt;&gt;\r\nendobj\r\n\r\n2 0 obj\r\n&lt;&lt;/Type/Pages/Count 1/Kids[3 0 R]&gt;&gt;\r\nendobj\r\n\r\n3 0 obj\r\n&lt;&lt;/Type/Page/Parent 2 0 R/MediaBox[0 0 595 842]/Contents 5 0 R/Resources&lt;&lt;/XObject&lt;&lt;/Im1 4 0 R&gt;&gt;&gt;&gt;&gt;&gt;\r\nendobj\r\n\r\n4 0 obj\r\n&lt;&lt;/Type/XObject/Filter/DCTDecode/Length 8000/ColorSpace/DeviceRGB/Height 241/Width 209/Subtype/Image/BitsPerComponent 8&gt;&gt;\r\nstream\r\n&#255;&#216;&#255;&#224; JFIF      &#255;&#219; „\r\n\r\nblah blah CAT Image bytes\r\n\r\nNI dI$&#166;’I$ ’I$ ’I$&#199;(\\’H&#39;&#168;+h’I/&#161;&#227;&#177;Œ&#208;&#168;Ÿ&#161;I%&#196;&#251;:Y]&#219;+&#248;BI-}&#232;&quot;&#221;–&#179;€&#166;V&#193;&#236;ž^‚‰&#205;I%&#212;s&#169;$„k{@I$’I%&#160;&#255;&#217;\r\nendstream\r\nendobj\r\n\r\n5 0 obj\r\n&lt;&lt;/Length 35&gt;&gt;\r\nstream\r\nq\r\n209 0 0 241 0 0 cm\r\n/Im1 Do\r\nQ\r\nq\r\nQ\r\n\r\nendstream\r\nendobj\r\n\r\nxref\r\n0 6\r\n0000000000 65536 f \r\n0000000016 00000 n \r\n0000000062 00000 n \r\n0000000114 00000 n \r\n0000000231 00000 n \r\n0000008387 00000 n \r\n\r\ntrailer\r\n&lt;&lt;/Size 6/Root 1 0 R&gt;&gt;\r\nstartxref\r\n8471\r\n%%EOF\r\n```\r\n\r\n  [1]: https://i.stack.imgur.com/yndGo.png\r\n  [2]: https://i.stack.imgur.com/WHJUq.png","title":"How to insert image in pdf using Java","body":"<p>Your code is generally PURR-effect. Here is the result when code and image are added together correctly in MS Notepad and image via command line. It is short of one essential feature (the <code>xref</code> table before the trailer) but Acrobat Reader will ignore that and write its own.</p>\n<p><a href=\"https://i.stack.imgur.com/yndGo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yndGo.png\" alt=\"enter image description here\" /></a></p>\n<p>Personally I tend to abbreviate the entries as it easier to see what is happening inside the PDF.</p>\n<pre><code>%PDF-1.7\n\n1 0 obj &lt;&lt;/Type/Catalog/Pages 2 0 R&gt;&gt; endobj\n2 0 obj &lt;&lt;/Type/Pages/Count 1/Kids [3 0 R]&gt;&gt; endobj\n3 0 obj &lt;&lt;/Type/Page/Parent 2 0 R/MediaBox [0 0 595 842]/Contents [5 0 R]/Resources&lt;&lt;/XObject&lt;&lt;/Im1 4 0 R&gt;&gt;&gt;&gt;&gt;&gt; endobj\n5 0 obj &lt;&lt;/Length 35&gt;&gt;\nstream \nq \n209 0 0 241 0 0 cm\n/Im1 Do \nQ \n\nendstream \nendobj\n\n4 0 obj &lt;&lt;/Type/XObject/Filter/DCTDecode/Length 8000/ColorSpace/DeviceRGB/Height 241/Width 209/Subtype/Image/BitsPerComponent 8&gt;&gt;\nstream\n*** Image goes here\nendstream\nendobj\n\ntrailer &lt;&lt;/Root 1 0 R/Size 5&gt;&gt;\n%%EOF\n</code></pre>\n<p>In that state it will be 8,527 bytes( so only 527 more than the raw image), However Acrobat READER will save it as 12,665 bytes because it adjusts to be more compliant with web usage etc.</p>\n<p>Thus we see its totally different  (not all necessarily better) so now starts</p>\n<pre><code>%PDF-1.7\n%âãÏÓ\n7 0 obj\n&lt;&lt;/Linearized 1/L 12665/O 9/E 9017/N 1/T 12376/H [ 435 131]&gt;&gt;\nendobj\n                     \n12 0 obj\n&lt;&lt;/DecodeParms&lt;&lt;/Columns 3/Predictor 12&gt;&gt;/Filter/FlateDecode/ID[&lt;84AE98C0D1CB3C4D9543B24450B2D64C&gt;&lt;84AE98C0D1CB3C4D9543B24450B2D64C&gt;]/Index[7 7]/Info 6 0 R/Length 36/Prev 12377/Root 8 0 R/Size 14/Type/XRef/W[1 2 0]&gt;&gt;stream\nhÞbbd`b`Rcb`°ab`œ\n¤C™þJ Ùö  0Ä\nendstream\nendobj\nstartxref\n0\n%%EOF\n        \n13 0 obj\n&lt;&lt;/Filter/FlateDecode/I 66/Length 52/S 36&gt;&gt;stream\nhÞb```f``|Ï \nÇ0ŠBx™ì ¢úû4#Ï0 ¡¹,\nendstream\nendobj\n8 0 obj\n&lt;&lt;/Metadata 1 0 R/Pages 5 0 R/Type/Catalog&gt;&gt;\n</code></pre>\n<p>!!!</p>\n<p>To avoid such adjustments you need to include a <code>xref</code> of your own. For a very rough example in JScript see below.</p>\n<p>Note:- The copy and paste here will break the binary.</p>\n<pre><code>var ByteStream = new ActiveXObject(&quot;ADODB.Stream&quot;);\nByteStream.Type = 2; // Writer\nByteStream.Charset = &quot;Windows-1252&quot;; //Best for PDF writer\nvar BS = ByteStream; // Abreviate for ease of edit\nBS.Open();\nBS.Position = 0;\n\nBS.WriteText(&quot;%PDF-1.0\\n&quot;);\nBS.WriteText(&quot;%ÅÑ§¡\\n&quot;);\n\nBS.WriteText(&quot;1 0 obj &lt;&lt;/Type/Catalog/Pages 2 0 R&gt;&gt; endobj\\n&quot;);\nBS.WriteText(&quot;2 0 obj &lt;&lt;/Type/Pages/Count 1/Kids[3 0 R]&gt;&gt; endobj\\n&quot;);\nBS.WriteText(&quot;3 0 obj &lt;&lt;/Type/Page/MediaBox[0 0 144 144]/Rotate 0/Resources&lt;&lt;/XObject&lt;&lt;/Img0 4 0 R&gt;&gt;&gt;&gt;/Contents 5 0 R/Parent 2 0 R&gt;&gt; endobj\\n&quot;);\nBS.WriteText(&quot;4 0 obj &lt;&lt;/Type/XObject/Subtype/Image/Height 25/Width 24/BitsPerComponent 1/Length 75/ColorSpace/DeviceGray&gt;&gt; stream\\n&quot;);\nBS.WriteText('ÿÿÿÿÿÿÀmß[}ÑoEÑ[EÑqEßE}ÀUÿñÿÁ«Á¬ÛZcýÖÇÈ&quot;}ÿÕïÀMsß`§Ñ]9ÑNÑE·ßLÇÀA[ÿÿÿÿÿÿ');\nBS.WriteText(&quot;\\nendstream\\nendobj\\n&quot;);\nvar Pos1 = &quot;000000000&quot;+BS.Position\nBS.WriteText(&quot;5 0 obj &lt;&lt;/Length 101&gt;&gt; stream\\n&quot;);\nBS.WriteText(&quot;q\\n1 0 0 -1 18 54 cm\\n35 0 0 -36 0 36 cm\\n/Img0 Do\\nQ\\nq\\n1 0 0 -1 71 144 cm\\n70 0 0 -72 0 72 cm\\n/Img0 Do\\nQ\\n&quot;);\nBS.WriteText(&quot;\\nendstream\\nendobj\\n\\n&quot;);\nvar Pos2 = BS.Position\nBS.WriteText(&quot;xref\\n0 6\\n&quot;);\nBS.WriteText(&quot;0000000000 00001 f \\n0000000015 00000 n \\n0000000060 00000 n \\n0000000111 00000 n \\n0000000237 00000 n \\n&quot;+Pos1.slice(-10)+&quot; 00000 n \\n&quot;);\nBS.WriteText(&quot;\\ntrailer\\n&lt;&lt;/Size 6/Info&lt;&lt;/Producer(JScrip2pdf)&gt;&gt;/Root 1 0 R&gt;&gt;\\nstartxref\\n&quot;+Pos2+&quot;\\n%%EOF\\n&quot;);\n\nBS.SaveToFile(&quot;HelloWorldB&amp;W.pdf&quot;, 2);\nBS.Close();\n</code></pre>\n<p>A simple means to fix such missing trailer is often solved using MuPDF-GL but that is windows only, so use command line MuTool for cross platform cleaning.</p>\n<p>It too will alter the file to a cleaner 8,653 bytes format (so very few additions)</p>\n<p><a href=\"https://i.stack.imgur.com/WHJUq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WHJUq.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>%PDF-1.7\n%ÂµÂ¶\n\n1 0 obj\n&lt;&lt;/Type/Catalog/Pages 2 0 R&gt;&gt;\nendobj\n\n2 0 obj\n&lt;&lt;/Type/Pages/Count 1/Kids[3 0 R]&gt;&gt;\nendobj\n\n3 0 obj\n&lt;&lt;/Type/Page/Parent 2 0 R/MediaBox[0 0 595 842]/Contents 5 0 R/Resources&lt;&lt;/XObject&lt;&lt;/Im1 4 0 R&gt;&gt;&gt;&gt;&gt;&gt;\nendobj\n\n4 0 obj\n&lt;&lt;/Type/XObject/Filter/DCTDecode/Length 8000/ColorSpace/DeviceRGB/Height 241/Width 209/Subtype/Image/BitsPerComponent 8&gt;&gt;\nstream\nÿØÿà JFIF      ÿÛ „\n\nblah blah CAT Image bytes\n\nNI dI$¦’I$ ’I$ ’I$Ç(\\’H'¨+h’I/¡ã±ŒÐ¨Ÿ¡I%Äû:Y]Û+øBI-}è&quot;Ý–³€¦VÁìž^‚‰ÍI%Ôs©$„k{@I$’I% ÿÙ\nendstream\nendobj\n\n5 0 obj\n&lt;&lt;/Length 35&gt;&gt;\nstream\nq\n209 0 0 241 0 0 cm\n/Im1 Do\nQ\nq\nQ\n\nendstream\nendobj\n\nxref\n0 6\n0000000000 65536 f \n0000000016 00000 n \n0000000062 00000 n \n0000000114 00000 n \n0000000231 00000 n \n0000008387 00000 n \n\ntrailer\n&lt;&lt;/Size 6/Root 1 0 R&gt;&gt;\nstartxref\n8471\n%%EOF\n</code></pre>\n"}],"owner":{"account_id":15556413,"reputation":81,"user_id":11222727,"display_name":"Casperca"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":125,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689028515,"creation_date":1689015898,"question_id":76656620,"body_markdown":"I am trying to create pdfs with Java. I do not want to use libraries like ITextPdf but want to generate the raw code of the pdf with Java. I got the basics down and am able to create some pdfs. The thing I am struggling with is inserting images in the pdf. As far as I understand JPEG&#39;s are the easiest ones to use since the raw data can be inserten in de the pdf. When I am trying this, it does not work however. I am reading the JPEG data with java ad inserting this in the pdf.\r\n\r\nThe generated PDF code looks like this:\r\n```\r\n%PDF-1.7\r\n\r\n1 0 obj\r\n  &lt;&lt;\r\n\r\n    /Type /Catalog\r\n    /Pages 2 0 R\r\n  &gt;&gt;\r\nendobj\r\n\r\n2 0 obj\r\n  &lt;&lt;\r\n\r\n    /Type /Pages\r\n    /Count 1\r\n    /Kids [3 0 R]\r\n  &gt;&gt;\r\nendobj\r\n\r\n---------------------------------------------\r\n\r\n3 0 obj\r\n  &lt;&lt;\r\n\r\n    /Type /Page\r\n    /Parent 2 0 R\r\n    /MediaBox [0 0 595 842]\r\n    /Contents [5 0 R]\r\n    /Resources\r\n    &lt;&lt;\r\n\r\n    /XObject\r\n      &lt;&lt;\r\n        /Im1 4 0 R\r\n      &gt;&gt;\r\n    &gt;&gt;\r\n  &gt;&gt;\r\nendobj\r\n\r\n\r\n5 0 obj \r\n  &lt;&lt;\r\n    /Length 35 \r\n  &gt;&gt; \r\n  stream \r\n    q \r\n    209 0 0 241 0 0 cm\r\n    /Im1 Do \r\n    Q \r\n  endstream \r\nendobj\r\n\r\n4 0 obj\r\n  &lt;&lt;\r\n\r\n    /Type /XObject\r\n    /Filter /DCTDecode\r\n    /Length 8000\r\n    /ColorSpace /DeviceRGB\r\n    /Height 241\r\n    /Width 209\r\n    /Subtype /Image\r\n    /BitsPerComponent 8\r\n  &gt;&gt;\r\n    stream\r\n      ***\r\n    endstream\r\nendobj\r\n\r\n---------------------------------------------\r\n\r\ntrailer\r\n  &lt;&lt;\r\n\r\n    /Root 1 0 R\r\n    /Size 5\r\n  &gt;&gt;\r\n%%EOF\r\n```\r\n\r\nthe stream data marked as &quot;***&quot; are the image bytes I got by using (this is inserted in the file by java):\r\n```\r\njava.nio.file.Files.readAllBytes(Paths.get(image.getPath())))\r\n```\r\n\r\nWhen viewig the pdf it does not display the image. The image I used can be found here: https://rp-do-not-delete.s3.eu-central-1.amazonaws.com/download.jpeg.\r\n\r\nI read the image width, height and byte length by reading the BufferedImage.getData() data, so, as far as I know, it should be correct.\r\n\r\nDoes anyone know what is wrong or what way I can approach this problem? Feel free to ask additional information like Java code I used etc.","title":"How to insert image in pdf using Java","body":"<p>I am trying to create pdfs with Java. I do not want to use libraries like ITextPdf but want to generate the raw code of the pdf with Java. I got the basics down and am able to create some pdfs. The thing I am struggling with is inserting images in the pdf. As far as I understand JPEG's are the easiest ones to use since the raw data can be inserten in de the pdf. When I am trying this, it does not work however. I am reading the JPEG data with java ad inserting this in the pdf.</p>\n<p>The generated PDF code looks like this:</p>\n<pre><code>%PDF-1.7\n\n1 0 obj\n  &lt;&lt;\n\n    /Type /Catalog\n    /Pages 2 0 R\n  &gt;&gt;\nendobj\n\n2 0 obj\n  &lt;&lt;\n\n    /Type /Pages\n    /Count 1\n    /Kids [3 0 R]\n  &gt;&gt;\nendobj\n\n---------------------------------------------\n\n3 0 obj\n  &lt;&lt;\n\n    /Type /Page\n    /Parent 2 0 R\n    /MediaBox [0 0 595 842]\n    /Contents [5 0 R]\n    /Resources\n    &lt;&lt;\n\n    /XObject\n      &lt;&lt;\n        /Im1 4 0 R\n      &gt;&gt;\n    &gt;&gt;\n  &gt;&gt;\nendobj\n\n\n5 0 obj \n  &lt;&lt;\n    /Length 35 \n  &gt;&gt; \n  stream \n    q \n    209 0 0 241 0 0 cm\n    /Im1 Do \n    Q \n  endstream \nendobj\n\n4 0 obj\n  &lt;&lt;\n\n    /Type /XObject\n    /Filter /DCTDecode\n    /Length 8000\n    /ColorSpace /DeviceRGB\n    /Height 241\n    /Width 209\n    /Subtype /Image\n    /BitsPerComponent 8\n  &gt;&gt;\n    stream\n      ***\n    endstream\nendobj\n\n---------------------------------------------\n\ntrailer\n  &lt;&lt;\n\n    /Root 1 0 R\n    /Size 5\n  &gt;&gt;\n%%EOF\n</code></pre>\n<p>the stream data marked as &quot;***&quot; are the image bytes I got by using (this is inserted in the file by java):</p>\n<pre><code>java.nio.file.Files.readAllBytes(Paths.get(image.getPath())))\n</code></pre>\n<p>When viewig the pdf it does not display the image. The image I used can be found here: <a href=\"https://rp-do-not-delete.s3.eu-central-1.amazonaws.com/download.jpeg\" rel=\"nofollow noreferrer\">https://rp-do-not-delete.s3.eu-central-1.amazonaws.com/download.jpeg</a>.</p>\n<p>I read the image width, height and byte length by reading the BufferedImage.getData() data, so, as far as I know, it should be correct.</p>\n<p>Does anyone know what is wrong or what way I can approach this problem? Feel free to ask additional information like Java code I used etc.</p>\n"},{"tags":["java","spring","spring-boot","spring-rabbit"],"comments":[{"owner":{"account_id":6180360,"reputation":1697,"user_id":4816061,"display_name":"jst"},"score":0,"creation_date":1437671011,"post_id":31589401,"comment_id":51139379,"body_markdown":"what does your amqp-context.xml look like?","body":"what does your amqp-context.xml look like?"},{"owner":{"account_id":2031159,"reputation":391,"user_id":2115479,"display_name":"Adi"},"score":0,"creation_date":1437899179,"post_id":31589401,"comment_id":51216788,"body_markdown":"@jst I added it to the content of the question","body":"@jst I added it to the content of the question"}],"answers":[{"tags":[],"owner":{"account_id":304234,"reputation":32207,"user_id":613628,"accept_rate":100,"display_name":"Stephane Nicoll"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1437661736,"creation_date":1437661736,"answer_id":31590318,"question_id":31589401,"body_markdown":"Good catch! I&#39;ve created [#3587](https://github.com/spring-projects/spring-boot/issues/3587) which will be addressed for Spring Boot 1.3\r\n\r\nThanks!","title":"Disabling the listening to rabbit queues from spring application.properties","body":"<p>Good catch! I've created <a href=\"https://github.com/spring-projects/spring-boot/issues/3587\" rel=\"nofollow\">#3587</a> which will be addressed for Spring Boot 1.3</p>\n\n<p>Thanks!</p>\n"},{"tags":[],"owner":{"account_id":6180360,"reputation":1697,"user_id":4816061,"display_name":"jst"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1438006979,"creation_date":1438006979,"answer_id":31655738,"question_id":31589401,"body_markdown":"As an alternative to waiting for Boot 1.3, you can add your own key to application-development.properties like \r\n\r\n    rabbit.auto-startup=false\r\n\r\nThen modify your amqp-context.xml like this\r\n\r\n    &lt;rabbit:listener-container connection-factory=&quot;connectionFactory&quot; requeue-rejected=&quot;false&quot; concurrency=&quot;10&quot; auto-startup=${rabbit.auto-startup}&gt;","title":"Disabling the listening to rabbit queues from spring application.properties","body":"<p>As an alternative to waiting for Boot 1.3, you can add your own key to application-development.properties like </p>\n\n<pre><code>rabbit.auto-startup=false\n</code></pre>\n\n<p>Then modify your amqp-context.xml like this</p>\n\n<pre><code>&lt;rabbit:listener-container connection-factory=\"connectionFactory\" requeue-rejected=\"false\" concurrency=\"10\" auto-startup=${rabbit.auto-startup}&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10599416,"reputation":61,"user_id":7806799,"display_name":"Zhenya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637305020,"creation_date":1637301612,"answer_id":70030487,"question_id":31589401,"body_markdown":"This one &quot;`spring.autoconfigure.exclude: org.springframework.boot.autoconfigure.amqp.RabbitAutoConfiguration`&quot; doesn&#39;t help me. So I just remove all properties start with `spring.cloud.stream.*` and spring.rabbitmq.addresses. Also add to your logback \r\n\r\n    &lt;logger name=&quot;org.springframework.amqp&quot; level=&quot;ERROR&quot;/&gt;\r\n    &lt;logger name=&quot;org.springframework.boot.actuate.amqp&quot; level=&quot;ERROR&quot;/&gt;.\r\n\r\nBecause when you remove the properties, spring output a lot of WARN logs.","title":"Disabling the listening to rabbit queues from spring application.properties","body":"<p>This one &quot;<code>spring.autoconfigure.exclude: org.springframework.boot.autoconfigure.amqp.RabbitAutoConfiguration</code>&quot; doesn't help me. So I just remove all properties start with <code>spring.cloud.stream.*</code> and spring.rabbitmq.addresses. Also add to your logback</p>\n<pre><code>&lt;logger name=&quot;org.springframework.amqp&quot; level=&quot;ERROR&quot;/&gt;\n&lt;logger name=&quot;org.springframework.boot.actuate.amqp&quot; level=&quot;ERROR&quot;/&gt;.\n</code></pre>\n<p>Because when you remove the properties, spring output a lot of WARN logs.</p>\n"},{"tags":[],"owner":{"account_id":2759956,"reputation":6055,"user_id":2377044,"accept_rate":31,"display_name":"cnmuc"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689025755,"creation_date":1689025755,"answer_id":76657540,"question_id":31589401,"body_markdown":"    spring.rabbitmq.listener.direct.auto-startup=false\r\n    spring.rabbitmq.listener.simple.auto-startup=false\r\n    spring.rabbitmq.listener.stream.auto-startup=false","title":"Disabling the listening to rabbit queues from spring application.properties","body":"<pre><code>spring.rabbitmq.listener.direct.auto-startup=false\nspring.rabbitmq.listener.simple.auto-startup=false\nspring.rabbitmq.listener.stream.auto-startup=false\n</code></pre>\n"}],"owner":{"account_id":2031159,"reputation":391,"user_id":2115479,"display_name":"Adi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21032,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"answer_count":4,"score":16,"last_activity_date":1689025755,"creation_date":1437659466,"question_id":31589401,"body_markdown":"I want to create an application-development.properties file in spring to define a dev environment. In this environment want to disable the listening to the rabbit queues because I don&#39;t want to interfere with the staging queues while debugging etc. \r\n\r\nProblem is - I can&#39;t find a property that controls this. No &quot;active&quot; property or &quot;enabled&quot; property or anything..\r\n\r\nThese are the properties I found in the [Spring docs][1]:\r\n\r\n    # RABBIT (RabbitProperties)\r\n    spring.rabbitmq.addresses= # connection addresses (e.g. myhost:9999,otherhost:1111)\r\n    spring.rabbitmq.dynamic=true # create an AmqpAdmin bean\r\n    spring.rabbitmq.host= # connection host\r\n    spring.rabbitmq.port= # connection port\r\n    spring.rabbitmq.password= # login password\r\n    spring.rabbitmq.requested-heartbeat= # requested heartbeat timeout, in seconds; zero for none\r\n    spring.rabbitmq.listener.acknowledge-mode= # acknowledge mode of container\r\n    spring.rabbitmq.listener.concurrency= # minimum number of consumers\r\n    spring.rabbitmq.listener.max-concurrency= # maximum number of consumers\r\n    spring.rabbitmq.listener.prefetch= # number of messages to be handled in a single request\r\n    spring.rabbitmq.listener.transaction-size= # number of messages to be processed in a transaction\r\n    spring.rabbitmq.ssl.enabled=false # enable SSL support\r\n    spring.rabbitmq.ssl.key-store= # path to the key store that holds the SSL certificate\r\n    spring.rabbitmq.ssl.key-store-password= # password used to access the key store\r\n    spring.rabbitmq.ssl.trust-store= # trust store that holds SSL certificates\r\n    spring.rabbitmq.ssl.trust-store-password= # password used to access the trust store\r\n    spring.rabbitmq.username= # login user\r\n    spring.rabbitmq.virtual-host= # virtual host to use when connecting to the broker\r\n\r\nI did find a way not to load the amqp-context.xml beans that contain the listener definitions by using [Spring profiles][2] and add `&lt;beans profile=&quot;development&quot;&gt; .. &lt;/beans&gt;` to the xml but this is much less flexible as I have to define different profiles, and changing what they include involves changing the code.\r\n\r\n**EDIT** this is how my amqp-context.xml looks like:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n    \txmlns:task=&quot;http://www.springframework.org/schema/task&quot; \r\n    \txmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n    \txmlns:p=&quot;http://www.springframework.org/schema/p&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txmlns:rabbit=&quot;http://www.springframework.org/schema/rabbit&quot;\r\n    \txsi:schemaLocation=&quot;http://www.springframework.org/schema/beans \r\n    \t\thttp://www.springframework.org/schema/beans/spring-beans.xsd\r\n    \t\thttp://www.springframework.org/schema/task\r\n       \t\thttp://www.springframework.org/schema/task/spring-task-3.0.xsd\r\n    \t\thttp://www.springframework.org/schema/context \r\n    \t\thttp://www.springframework.org/schema/context/spring-context.xsd\r\n    \t\thttp://www.springframework.org/schema/rabbit \r\n    \t\thttp://www.springframework.org/schema/rabbit/spring-rabbit-1.3.xsd&quot;&gt;\r\n    \r\n    \t&lt;bean class=&quot;org.springframework.beans.factory.config.PropertyPlaceholderConfigurer&quot;&gt;\r\n    \t\t&lt;property name=&quot;ignoreResourceNotFound&quot; value=&quot;true&quot; /&gt;\r\n    \t\t&lt;property name=&quot;locations&quot;&gt;\r\n    \t\t\t&lt;list&gt;\r\n    \t\t\t\t&lt;value&gt;application.${env:xxxx}.properties&lt;/value&gt;\r\n    \t\t\t&lt;/list&gt;\r\n    \t\t&lt;/property&gt;\r\n    \t&lt;/bean&gt;\r\n    \t&lt;rabbit:connection-factory id=&quot;connectionFactory&quot; host=&quot;${rabbit_host}&quot;\r\n    \t\tvirtual-host=&quot;${rabbit_virtual_host}&quot; username=&quot;${rabbit_username}&quot; password=&quot;${rabbit_password}&quot; port=&quot;${rabbit_port}&quot;/&gt;\t\r\n    \r\n    \t&lt;!-- Connection Factory --&gt;\r\n    \t&lt;bean id=&quot;rabbitConnFactory&quot;\r\n    \t\tclass=&quot;org.springframework.amqp.rabbit.connection.CachingConnectionFactory&quot;&gt;\r\n    \t&lt;/bean&gt;\r\n    \r\n    \r\n    \t&lt;!-- Spring AMQP Template --&gt;\r\n    \t&lt;bean id=&quot;template&quot; class=&quot;org.springframework.amqp.rabbit.core.RabbitTemplate&quot;&gt;\r\n    \t\t&lt;property name=&quot;connectionFactory&quot; ref=&quot;connectionFactory&quot; /&gt;\r\n    \t\t&lt;property name=&quot;routingKey&quot; value=&quot;${my_queue}&quot; /&gt;\r\n    \t\t&lt;property name=&quot;queue&quot; value=&quot;${my_queue}&quot; /&gt;\r\n    \t&lt;/bean&gt;\r\n    \r\n    \t&lt;!-- Spring AMQP Admin --&gt;\r\n    \t&lt;bean id=&quot;admin&quot; class=&quot;org.springframework.amqp.rabbit.core.RabbitAdmin&quot;&gt;\r\n    \t\t&lt;constructor-arg ref=&quot;rabbitConnFactory&quot; /&gt;\r\n    \t&lt;/bean&gt;\r\n    \r\n     \t&lt;rabbit:listener-container connection-factory=&quot;connectionFactory&quot; requeue-rejected=&quot;false&quot; concurrency=&quot;10&quot;&gt;\r\n    \t\t&lt;rabbit:listener ref=&quot;ProcessMessage&quot;\r\n    \t\t\tqueue-names=&quot;${queue_name}&quot; /&gt;\r\n    \t&lt;/rabbit:listener-container&gt; \r\n    \r\n    \t&lt;bean id=&quot;ProcessStuff&quot; class=&quot;Process&quot; /&gt;\r\n    \r\n    \t\r\n    \t\r\n    &lt;/beans&gt;\r\n\r\nDoes anyone have an idea on how I can manage the listening to queues directly from the application.properties file? please?\r\n\r\n\r\n  [1]: http://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/html/common-application-properties.html\r\n  [2]: http://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-profiles.html","title":"Disabling the listening to rabbit queues from spring application.properties","body":"<p>I want to create an application-development.properties file in spring to define a dev environment. In this environment want to disable the listening to the rabbit queues because I don't want to interfere with the staging queues while debugging etc. </p>\n\n<p>Problem is - I can't find a property that controls this. No \"active\" property or \"enabled\" property or anything..</p>\n\n<p>These are the properties I found in the <a href=\"http://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/html/common-application-properties.html\" rel=\"noreferrer\">Spring docs</a>:</p>\n\n<pre><code># RABBIT (RabbitProperties)\nspring.rabbitmq.addresses= # connection addresses (e.g. myhost:9999,otherhost:1111)\nspring.rabbitmq.dynamic=true # create an AmqpAdmin bean\nspring.rabbitmq.host= # connection host\nspring.rabbitmq.port= # connection port\nspring.rabbitmq.password= # login password\nspring.rabbitmq.requested-heartbeat= # requested heartbeat timeout, in seconds; zero for none\nspring.rabbitmq.listener.acknowledge-mode= # acknowledge mode of container\nspring.rabbitmq.listener.concurrency= # minimum number of consumers\nspring.rabbitmq.listener.max-concurrency= # maximum number of consumers\nspring.rabbitmq.listener.prefetch= # number of messages to be handled in a single request\nspring.rabbitmq.listener.transaction-size= # number of messages to be processed in a transaction\nspring.rabbitmq.ssl.enabled=false # enable SSL support\nspring.rabbitmq.ssl.key-store= # path to the key store that holds the SSL certificate\nspring.rabbitmq.ssl.key-store-password= # password used to access the key store\nspring.rabbitmq.ssl.trust-store= # trust store that holds SSL certificates\nspring.rabbitmq.ssl.trust-store-password= # password used to access the trust store\nspring.rabbitmq.username= # login user\nspring.rabbitmq.virtual-host= # virtual host to use when connecting to the broker\n</code></pre>\n\n<p>I did find a way not to load the amqp-context.xml beans that contain the listener definitions by using <a href=\"http://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-profiles.html\" rel=\"noreferrer\">Spring profiles</a> and add <code>&lt;beans profile=\"development\"&gt; .. &lt;/beans&gt;</code> to the xml but this is much less flexible as I have to define different profiles, and changing what they include involves changing the code.</p>\n\n<p><strong>EDIT</strong> this is how my amqp-context.xml looks like:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:task=\"http://www.springframework.org/schema/task\" \n    xmlns:context=\"http://www.springframework.org/schema/context\"\n    xmlns:p=\"http://www.springframework.org/schema/p\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns:rabbit=\"http://www.springframework.org/schema/rabbit\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans \n        http://www.springframework.org/schema/beans/spring-beans.xsd\n        http://www.springframework.org/schema/task\n        http://www.springframework.org/schema/task/spring-task-3.0.xsd\n        http://www.springframework.org/schema/context \n        http://www.springframework.org/schema/context/spring-context.xsd\n        http://www.springframework.org/schema/rabbit \n        http://www.springframework.org/schema/rabbit/spring-rabbit-1.3.xsd\"&gt;\n\n    &lt;bean class=\"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer\"&gt;\n        &lt;property name=\"ignoreResourceNotFound\" value=\"true\" /&gt;\n        &lt;property name=\"locations\"&gt;\n            &lt;list&gt;\n                &lt;value&gt;application.${env:xxxx}.properties&lt;/value&gt;\n            &lt;/list&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n    &lt;rabbit:connection-factory id=\"connectionFactory\" host=\"${rabbit_host}\"\n        virtual-host=\"${rabbit_virtual_host}\" username=\"${rabbit_username}\" password=\"${rabbit_password}\" port=\"${rabbit_port}\"/&gt;   \n\n    &lt;!-- Connection Factory --&gt;\n    &lt;bean id=\"rabbitConnFactory\"\n        class=\"org.springframework.amqp.rabbit.connection.CachingConnectionFactory\"&gt;\n    &lt;/bean&gt;\n\n\n    &lt;!-- Spring AMQP Template --&gt;\n    &lt;bean id=\"template\" class=\"org.springframework.amqp.rabbit.core.RabbitTemplate\"&gt;\n        &lt;property name=\"connectionFactory\" ref=\"connectionFactory\" /&gt;\n        &lt;property name=\"routingKey\" value=\"${my_queue}\" /&gt;\n        &lt;property name=\"queue\" value=\"${my_queue}\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;!-- Spring AMQP Admin --&gt;\n    &lt;bean id=\"admin\" class=\"org.springframework.amqp.rabbit.core.RabbitAdmin\"&gt;\n        &lt;constructor-arg ref=\"rabbitConnFactory\" /&gt;\n    &lt;/bean&gt;\n\n    &lt;rabbit:listener-container connection-factory=\"connectionFactory\" requeue-rejected=\"false\" concurrency=\"10\"&gt;\n        &lt;rabbit:listener ref=\"ProcessMessage\"\n            queue-names=\"${queue_name}\" /&gt;\n    &lt;/rabbit:listener-container&gt; \n\n    &lt;bean id=\"ProcessStuff\" class=\"Process\" /&gt;\n\n\n\n&lt;/beans&gt;\n</code></pre>\n\n<p>Does anyone have an idea on how I can manage the listening to queues directly from the application.properties file? please?</p>\n"},{"tags":["java","spring-boot","spring-security","oauth-2.0","auth0"],"comments":[{"owner":{"account_id":8104679,"reputation":1650,"user_id":6106641,"accept_rate":80,"display_name":"Archmede"},"score":1,"creation_date":1666730004,"post_id":72362533,"comment_id":131004673,"body_markdown":"Here&#39;s another example of how this can be solved https://github.com/spring-projects/spring-security/issues/11783","body":"Here&#39;s another example of how this can be solved <a href=\"https://github.com/spring-projects/spring-security/issues/11783\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-security/issues/11783</a>"}],"answers":[{"tags":[],"owner":{"account_id":1674328,"reputation":2652,"user_id":1540177,"display_name":"grekier"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1653467809,"creation_date":1653467809,"answer_id":72374400,"question_id":72362533,"body_markdown":"I believe you need to use `ServerOAuth2AuthorizedClientExchangeFilterFunction` instead of `ServletOAuth2AuthorizedClientExchangeFilterFunction` for the `WebClient` configuration.\r\n\r\n`Servletxxxxx` only works in blocking environment if I remember correctly but most have a `Serverxxxxx` alternative for non-blocking..","title":"OAuth2 client with extra parameters in body (Audience)","body":"<p>I believe you need to use <code>ServerOAuth2AuthorizedClientExchangeFilterFunction</code> instead of <code>ServletOAuth2AuthorizedClientExchangeFilterFunction</code> for the <code>WebClient</code> configuration.</p>\n<p><code>Servletxxxxx</code> only works in blocking environment if I remember correctly but most have a <code>Serverxxxxx</code> alternative for non-blocking..</p>\n"},{"tags":[],"owner":{"account_id":3654799,"reputation":573,"user_id":3046117,"display_name":"supik"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1653994549,"creation_date":1653994549,"answer_id":72446522,"question_id":72362533,"body_markdown":"The argument of `clientCredentials()` is a builder `Consumer`. This means that the function you provide takes a builder as an argument that you then need to use for futher configuration, i.e. configure it to use your newly created client. You are doing nothing with the builder in your code, hence whatever you create in the function is just a local variable that is never used.\r\n\r\n    var authorizedClientProvider =\r\n           OAuth2AuthorizedClientProviderBuilder.builder()\r\n                     .refreshToken()\r\n                     .clientCredentials(clientCredentialsGrantBuilder -&gt; {\r\n                                 var clientCredentialsTokenResponseClient = new DefaultClientCredentialsTokenResponseClient();\r\n                                 clientCredentialsTokenResponseClient.setRequestEntityConverter(customRequestEntityConverter); \r\n                                 clientCredentialsGrantBuilder.accessTokenResponseClient(clientCredentialsTokenResponseClient);\r\n                      })\r\n                     .build();\r\n\r\nNote the `clientCredentialsGrantBuilder.accessTokenResponseClient()` line.\r\n","title":"OAuth2 client with extra parameters in body (Audience)","body":"<p>The argument of <code>clientCredentials()</code> is a builder <code>Consumer</code>. This means that the function you provide takes a builder as an argument that you then need to use for futher configuration, i.e. configure it to use your newly created client. You are doing nothing with the builder in your code, hence whatever you create in the function is just a local variable that is never used.</p>\n<pre><code>var authorizedClientProvider =\n       OAuth2AuthorizedClientProviderBuilder.builder()\n                 .refreshToken()\n                 .clientCredentials(clientCredentialsGrantBuilder -&gt; {\n                             var clientCredentialsTokenResponseClient = new DefaultClientCredentialsTokenResponseClient();\n                             clientCredentialsTokenResponseClient.setRequestEntityConverter(customRequestEntityConverter); \n                             clientCredentialsGrantBuilder.accessTokenResponseClient(clientCredentialsTokenResponseClient);\n                  })\n                 .build();\n</code></pre>\n<p>Note the <code>clientCredentialsGrantBuilder.accessTokenResponseClient()</code> line.</p>\n"},{"tags":[],"owner":{"account_id":17045705,"reputation":112,"user_id":19623995,"display_name":"Maxime Dutaut"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1688984494,"creation_date":1688984494,"answer_id":76652811,"question_id":72362533,"body_markdown":"As several classes got deprecated since the last answer, I am posting my solution in Spring 2.7.13 / 3.1.1\r\n\r\n    @Bean(&quot;apiGatewayWebClient&quot;)\r\n\tpublic WebClient apiGatewayWebClient(ReactiveClientRegistrationRepository clientRegistrations) {\r\n\t\tInMemoryReactiveOAuth2AuthorizedClientService clientService =\r\n\t\t\t\tnew InMemoryReactiveOAuth2AuthorizedClientService(clientRegistrations);\r\n\t\tAuthorizedClientServiceReactiveOAuth2AuthorizedClientManager authorizedClientManager =\r\n\t\t\t\tnew AuthorizedClientServiceReactiveOAuth2AuthorizedClientManager(clientRegistrations, clientService);\r\n\t\tauthorizedClientManager.setAuthorizedClientProvider(authorizedClientProvider());\r\n\r\n\t\tServerOAuth2AuthorizedClientExchangeFilterFunction oauth =\r\n\t\t\t\tnew ServerOAuth2AuthorizedClientExchangeFilterFunction(authorizedClientManager);\r\n\t\toauth.setDefaultClientRegistrationId(&quot;adfs&quot;);\r\n\r\n\t\treturn WebClient.builder()\r\n\t\t\t\t.filter(oauth)\r\n\t\t\t\t.build();\r\n\t}\r\n\r\n\tprivate ReactiveOAuth2AuthorizedClientProvider authorizedClientProvider() {\r\n\t\tWebClientReactiveClientCredentialsTokenResponseClient responseClient =\r\n\t\t\t\tnew WebClientReactiveClientCredentialsTokenResponseClient();\r\n\r\n\t\t// Spring does not provide a configuration only way to add &#39;resource&#39; to the message body\r\n\t\t// See https://docs.spring.io/spring-security/reference/servlet/oauth2/client/authorization-grants.html#_customizing_the_access_token_request_2\r\n\t\tresponseClient.addParametersConverter(\r\n\t\t\t\tsource -&gt; {\r\n\t\t\t\t\tLinkedMultiValueMap&lt;String, String&gt; map = new LinkedMultiValueMap&lt;&gt;();\r\n\t\t\t\t\tmap.add(&quot;audience&quot;, &quot;myAudience&quot;);\r\n\t\t\t\t\treturn map;\r\n\t\t\t\t}\r\n\t\t);\r\n\r\n\t\treturn ReactiveOAuth2AuthorizedClientProviderBuilder.builder()\r\n\t\t\t\t.clientCredentials(clientCredentialsGrantBuilder -&gt;\r\n\t\t\t\t\t\tclientCredentialsGrantBuilder.accessTokenResponseClient(responseClient))\r\n\t\t\t\t.build();\r\n\t}\r\n\r\nWith application.yml\r\n\r\n    spring:\r\n    security:\r\n        oauth2:\r\n            client:\r\n                registration:\r\n                    adfs:\r\n                        client-id: &#39;client:id&#39;\r\n                        client-secret: &#39;???????&#39;\r\n                        authorization-grant-type: &#39;client_credentials&#39;\r\n                provider:\r\n                    adfs:\r\n                        token-uri: &#39;https://domain.eu.auth0.com/oauth/token&#39;\r\n\r\n","title":"OAuth2 client with extra parameters in body (Audience)","body":"<p>As several classes got deprecated since the last answer, I am posting my solution in Spring 2.7.13 / 3.1.1</p>\n<pre><code>@Bean(&quot;apiGatewayWebClient&quot;)\npublic WebClient apiGatewayWebClient(ReactiveClientRegistrationRepository clientRegistrations) {\n    InMemoryReactiveOAuth2AuthorizedClientService clientService =\n            new InMemoryReactiveOAuth2AuthorizedClientService(clientRegistrations);\n    AuthorizedClientServiceReactiveOAuth2AuthorizedClientManager authorizedClientManager =\n            new AuthorizedClientServiceReactiveOAuth2AuthorizedClientManager(clientRegistrations, clientService);\n    authorizedClientManager.setAuthorizedClientProvider(authorizedClientProvider());\n\n    ServerOAuth2AuthorizedClientExchangeFilterFunction oauth =\n            new ServerOAuth2AuthorizedClientExchangeFilterFunction(authorizedClientManager);\n    oauth.setDefaultClientRegistrationId(&quot;adfs&quot;);\n\n    return WebClient.builder()\n            .filter(oauth)\n            .build();\n}\n\nprivate ReactiveOAuth2AuthorizedClientProvider authorizedClientProvider() {\n    WebClientReactiveClientCredentialsTokenResponseClient responseClient =\n            new WebClientReactiveClientCredentialsTokenResponseClient();\n\n    // Spring does not provide a configuration only way to add 'resource' to the message body\n    // See https://docs.spring.io/spring-security/reference/servlet/oauth2/client/authorization-grants.html#_customizing_the_access_token_request_2\n    responseClient.addParametersConverter(\n            source -&gt; {\n                LinkedMultiValueMap&lt;String, String&gt; map = new LinkedMultiValueMap&lt;&gt;();\n                map.add(&quot;audience&quot;, &quot;myAudience&quot;);\n                return map;\n            }\n    );\n\n    return ReactiveOAuth2AuthorizedClientProviderBuilder.builder()\n            .clientCredentials(clientCredentialsGrantBuilder -&gt;\n                    clientCredentialsGrantBuilder.accessTokenResponseClient(responseClient))\n            .build();\n}\n</code></pre>\n<p>With application.yml</p>\n<pre><code>spring:\nsecurity:\n    oauth2:\n        client:\n            registration:\n                adfs:\n                    client-id: 'client:id'\n                    client-secret: '???????'\n                    authorization-grant-type: 'client_credentials'\n            provider:\n                adfs:\n                    token-uri: 'https://domain.eu.auth0.com/oauth/token'\n</code></pre>\n"},{"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689025228,"creation_date":1689025228,"answer_id":76657505,"question_id":72362533,"body_markdown":"I maintain a [Spring Boot starter][1] which enables to define in application properties any additional parameter to authorization_code requests:\r\n```xml\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t&lt;!-- For a reactive application, use spring-boot-starter-webflux instead --&gt;\r\n\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-boot-starter-oauth2-client&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;com.c4-soft.springaddons&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-addons-starter-oidc&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n```\r\n```yaml\r\nauth0-issuer: https://domain.eu.auth0.com/\r\nauth0-client-id: change-me\r\nauth0-client-secret: change-me\r\nauth0-aud: http://localhost:8080\r\n\r\nspring:\r\n  security:\r\n    oauth2:\r\n      client:\r\n        provider:\r\n          auth0:\r\n            issuer-uri: ${auth0-issuer}\r\n        registration:\r\n          auth0-authorization-code:\r\n            authorization-grant-type: authorization_code\r\n            client-id: ${auth0-client-id}\r\n            client-secret: ${auth0-client-secret}\r\n            provider: auth0\r\n            scope: openid,profile,email,offline_access\r\ncom:\r\n  c4-soft:\r\n    springaddons:\r\n      oidc:\r\n        ops:\r\n        - iss: ${auth0-issuer}\r\n          # You can replace it to a JSON path to any claim, even a nested private claim like $[&#39;https://c4-soft.com&#39;][&#39;name&#39;]\r\n          username-claim: $.sub\r\n          authorities:\r\n          - path: roles\r\n          - path: permissions\r\n          - path: $[&#39;https://c4-soft.com&#39;][&#39;authorities&#39;]\r\n        client:\r\n          security-matchers:\r\n          - /**\r\n          permit-all:\r\n          - /login/**\r\n          - /oauth2/**\r\n          - /\r\n          # By default, Auth0 does not follow strictly the OpenID RP-Initiated Logout spec and needs specific configuration\r\n          oauth2-logout:\r\n            auth0-authorization-code:\r\n              uri: ${auth0-issuer}v2/logout\r\n              client-id-request-param: client_id\r\n              post-logout-uri-request-param: returnTo\r\n          # Auth0 requires an &quot;audience&quot; parameter in authorization-code request to deliver JWTs\r\n          authorization-request-params:\r\n            auth0-authorization-code:\r\n            - name: audience\r\n              value: ${auth0-aud}\r\n```\r\nAnd that&#39;s it, no Java conf required.\r\n\r\nThe [tutorials][2] section of the repo linked above, include an [Auth0 configuration README][3] with instructions to create an &quot;action&quot; adding user details to access tokens.\r\n\r\n\r\n  [1]: https://github.com/ch4mpy/spring-addons\r\n  [2]: https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials\r\n  [3]: https://github.com/ch4mpy/spring-addons/blob/master/samples/tutorials/auth0.md","title":"OAuth2 client with extra parameters in body (Audience)","body":"<p>I maintain a <a href=\"https://github.com/ch4mpy/spring-addons\" rel=\"nofollow noreferrer\">Spring Boot starter</a> which enables to define in application properties any additional parameter to authorization_code requests:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;!-- For a reactive application, use spring-boot-starter-webflux instead --&gt;\n    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-oauth2-client&lt;/artifactId&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;com.c4-soft.springaddons&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-addons-starter-oidc&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<pre class=\"lang-yaml prettyprint-override\"><code>auth0-issuer: https://domain.eu.auth0.com/\nauth0-client-id: change-me\nauth0-client-secret: change-me\nauth0-aud: http://localhost:8080\n\nspring:\n  security:\n    oauth2:\n      client:\n        provider:\n          auth0:\n            issuer-uri: ${auth0-issuer}\n        registration:\n          auth0-authorization-code:\n            authorization-grant-type: authorization_code\n            client-id: ${auth0-client-id}\n            client-secret: ${auth0-client-secret}\n            provider: auth0\n            scope: openid,profile,email,offline_access\ncom:\n  c4-soft:\n    springaddons:\n      oidc:\n        ops:\n        - iss: ${auth0-issuer}\n          # You can replace it to a JSON path to any claim, even a nested private claim like $['https://c4-soft.com']['name']\n          username-claim: $.sub\n          authorities:\n          - path: roles\n          - path: permissions\n          - path: $['https://c4-soft.com']['authorities']\n        client:\n          security-matchers:\n          - /**\n          permit-all:\n          - /login/**\n          - /oauth2/**\n          - /\n          # By default, Auth0 does not follow strictly the OpenID RP-Initiated Logout spec and needs specific configuration\n          oauth2-logout:\n            auth0-authorization-code:\n              uri: ${auth0-issuer}v2/logout\n              client-id-request-param: client_id\n              post-logout-uri-request-param: returnTo\n          # Auth0 requires an &quot;audience&quot; parameter in authorization-code request to deliver JWTs\n          authorization-request-params:\n            auth0-authorization-code:\n            - name: audience\n              value: ${auth0-aud}\n</code></pre>\n<p>And that's it, no Java conf required.</p>\n<p>The <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials\" rel=\"nofollow noreferrer\">tutorials</a> section of the repo linked above, include an <a href=\"https://github.com/ch4mpy/spring-addons/blob/master/samples/tutorials/auth0.md\" rel=\"nofollow noreferrer\">Auth0 configuration README</a> with instructions to create an &quot;action&quot; adding user details to access tokens.</p>\n"}],"owner":{"account_id":441129,"reputation":2872,"user_id":831061,"accept_rate":75,"display_name":"luso"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4997,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":72446522,"answer_count":4,"score":6,"last_activity_date":1689025228,"creation_date":1653393585,"question_id":72362533,"body_markdown":"Seems that with Auth0, when in a M2M flow, we need to pass the `audience` parameter in the authorization request, and the the token will be issued for such `audience`\r\n\r\n    curl --request POST \\\r\n      --url https://domain.eu.auth0.com/oauth/token \\\r\n      --header &#39;content-type: application/json&#39; \\\r\n      --data &#39;{&quot;client_id&quot;:&quot;xxxxx&quot;,&quot;client_secret&quot;:&quot;xxxxx&quot;,&quot;audience&quot;:&quot;my-api-audience&quot;,&quot;grant_type&quot;:&quot;client_credentials&quot;}&#39;\r\n\r\notherwise, an error is thrown\r\n\r\n    403 Forbidden: &quot;{&quot;error&quot;:&quot;access_denied&quot;,&quot;error_description&quot;:&quot;No audience parameter was provided, and no default audience has been configured&quot;}&quot;\r\n\r\nI try to implement a `Client Credentials` flow with Spring Boot using the new Spring Security 5 approach with webflux using WebClient. \r\n\r\nhttps://github.com/spring-projects/spring-security-samples/tree/main/servlet/spring-boot/java/oauth2/webclient\r\n\r\nSpring doesn&#39;t provide a way to add custom parameters to the Auth requests so as by this post \r\n\r\nhttps://github.com/spring-projects/spring-security/issues/6569\r\n\r\nI have to implement a custom converter.\r\n\r\nEverything seems to be injected fine on startup but the converted is never invoked when accessing the client&#39;s endpoint `localhost/api/explicit` so I keep stuck with the `audience` problem.\r\n\r\n\r\n### WebClientConfig.java \r\n\r\n    @Configuration\r\n    public class WebClientConfig {\r\n        @Value(&quot;${resource-uri}&quot;)\r\n        String resourceUri;\r\n    \r\n        @Value(&quot;${wallet-audience}&quot;)\r\n        String audience;\r\n    \r\n           @Bean\r\n            WebClient webClient(OAuth2AuthorizedClientManager authorizedClientManager) {\r\n    \r\n                var oauth2 = new ServletOAuth2AuthorizedClientExchangeFilterFunction(authorizedClientManager);\r\n    \r\n                return WebClient.builder()\r\n                        .filter(oauth2)\r\n                        // TRIED BOTH\r\n                        //.apply(oauth2.oauth2Configuration())\r\n                        .build();\r\n            }\r\n    \r\n            @Bean\r\n            OAuth2AuthorizedClientManager authorizedClientManager(ClientRegistrationRepository clientRegistrationRepository, OAuth2AuthorizedClientRepository authorizedClientRepository) {\r\n    \r\n                Converter&lt;OAuth2ClientCredentialsGrantRequest, RequestEntity&lt;?&gt;&gt; customRequestEntityConverter = new Auth0ClientCredentialsGrantRequestEntityConverter(audience);\r\n    \r\n                // @formatter:off\r\n                var authorizedClientProvider =\r\n                        OAuth2AuthorizedClientProviderBuilder.builder()\r\n                                                             .refreshToken()\r\n                                                             .clientCredentials(clientCredentialsGrantBuilder -&gt; {\r\n                                                                 var clientCredentialsTokenResponseClient = new DefaultClientCredentialsTokenResponseClient();\r\n                                                                 clientCredentialsTokenResponseClient.setRequestEntityConverter(customRequestEntityConverter);\r\n                                                             })\r\n                                                             .build();\r\n                // @formatter:on\r\n    \r\n                var authorizedClientManager = new DefaultOAuth2AuthorizedClientManager(clientRegistrationRepository, authorizedClientRepository);\r\n                authorizedClientManager.setAuthorizedClientProvider(authorizedClientProvider);\r\n    \r\n                return authorizedClientManager;\r\n            }\r\n\r\n### Auth0ClientCredentialsGrantRequestEntityConverter.java\r\n\r\nthanks to https://www.aheritier.net/spring-boot-app-client-of-an-auth0-protected-service-jwt/\r\n\r\n\r\n    import org.springframework.core.convert.converter.Converter;\r\n    import org.springframework.http.HttpHeaders;\r\n    import org.springframework.http.HttpMethod;\r\n    import org.springframework.http.MediaType;\r\n    import org.springframework.http.RequestEntity;\r\n    import org.springframework.security.oauth2.client.endpoint.OAuth2ClientCredentialsGrantRequest;\r\n    import org.springframework.security.oauth2.client.registration.ClientRegistration;\r\n    import org.springframework.security.oauth2.core.ClientAuthenticationMethod;\r\n    import org.springframework.security.oauth2.core.endpoint.OAuth2ParameterNames;\r\n    import org.springframework.util.CollectionUtils;\r\n    import org.springframework.util.LinkedMultiValueMap;\r\n    import org.springframework.util.MultiValueMap;\r\n    import org.springframework.util.StringUtils;\r\n    import org.springframework.web.util.UriComponentsBuilder;\r\n    \r\n    import java.util.Collections;\r\n    \r\n    public final class Auth0ClientCredentialsGrantRequestEntityConverter implements Converter&lt;OAuth2ClientCredentialsGrantRequest, RequestEntity&lt;?&gt;&gt; {\r\n    \r\n        private static final HttpHeaders DEFAULT_TOKEN_REQUEST_HEADERS = getDefaultTokenRequestHeaders();\r\n    \r\n        private final String audience;\r\n    \r\n        /**\r\n         * @param audience The audience to pass to Auth0\r\n         */\r\n        public Auth0ClientCredentialsGrantRequestEntityConverter(String audience) {\r\n            this.audience = audience;\r\n        }\r\n    \r\n        /**\r\n         * Returns the {@link RequestEntity} used for the Access Token Request.\r\n         *\r\n         * @param clientCredentialsGrantRequest the client credentials grant request\r\n         * @return the {@link RequestEntity} used for the Access Token Request\r\n         */\r\n        @Override\r\n        public RequestEntity&lt;?&gt; convert(OAuth2ClientCredentialsGrantRequest clientCredentialsGrantRequest) {\r\n            var clientRegistration = clientCredentialsGrantRequest.getClientRegistration();\r\n            var headers = getTokenRequestHeaders(clientRegistration);\r\n            var formParameters = this.buildFormParameters(clientCredentialsGrantRequest);\r\n            var uri = UriComponentsBuilder.fromUriString(clientRegistration.getProviderDetails().getTokenUri())\r\n                                          .build()\r\n                                          .toUri();\r\n            return new RequestEntity&lt;&gt;(formParameters, headers, HttpMethod.POST, uri);\r\n        }\r\n    \r\n        /**\r\n         * Returns a {@link MultiValueMap} of the form parameters used for the Access Token\r\n         * Request body.\r\n         *\r\n         * @param clientCredentialsGrantRequest the client credentials grant request\r\n         * @return a {@link MultiValueMap} of the form parameters used for the Access Token\r\n         * Request body\r\n         */\r\n        private MultiValueMap&lt;String, String&gt; buildFormParameters(OAuth2ClientCredentialsGrantRequest clientCredentialsGrantRequest) {\r\n            var clientRegistration = clientCredentialsGrantRequest.getClientRegistration();\r\n            MultiValueMap&lt;String, String&gt; formParameters = new LinkedMultiValueMap&lt;&gt;();\r\n            formParameters.add(OAuth2ParameterNames.GRANT_TYPE, clientCredentialsGrantRequest.getGrantType().getValue());\r\n    \r\n            if (!CollectionUtils.isEmpty(clientRegistration.getScopes())) {\r\n                formParameters.add(OAuth2ParameterNames.SCOPE,\r\n                        StringUtils.collectionToDelimitedString(clientRegistration.getScopes(), &quot; &quot;));\r\n            }\r\n    \r\n            if (ClientAuthenticationMethod.POST.equals(clientRegistration.getClientAuthenticationMethod())) {\r\n                formParameters.add(OAuth2ParameterNames.CLIENT_ID, clientRegistration.getClientId());\r\n                formParameters.add(OAuth2ParameterNames.CLIENT_SECRET, clientRegistration.getClientSecret());\r\n            }\r\n    \r\n            formParameters.add(&quot;audience&quot;, this.audience);\r\n            return formParameters;\r\n        }\r\n    \r\n        private static HttpHeaders getTokenRequestHeaders(ClientRegistration clientRegistration) {\r\n            var headers = new HttpHeaders();\r\n            headers.addAll(DEFAULT_TOKEN_REQUEST_HEADERS);\r\n            if (ClientAuthenticationMethod.BASIC.equals(clientRegistration.getClientAuthenticationMethod())) {\r\n                headers.setBasicAuth(clientRegistration.getClientId(), clientRegistration.getClientSecret());\r\n            }\r\n            return headers;\r\n        }\r\n    \r\n        private static HttpHeaders getDefaultTokenRequestHeaders() {\r\n            var headers = new HttpHeaders();\r\n            final var contentType = MediaType.valueOf(MediaType.APPLICATION_FORM_URLENCODED_VALUE + &quot;;charset=UTF-8&quot;);\r\n    \r\n            headers.setAccept(Collections.singletonList(MediaType.APPLICATION_JSON));\r\n            headers.setContentType(contentType);\r\n    \r\n            return headers;\r\n        }\r\n    \r\n    }\r\n\r\n### Controller.java\r\n\r\n@RestController\r\npublic class PrivateController {\r\n\r\n    private final WebClient webClient;\r\n\r\n    public PrivateController(WebClient webClient) {\r\n        this.webClient = webClient;\r\n    }\r\n\r\n    @GetMapping(&quot;/explicit&quot;)\r\n    String explicit(Model model, @RegisteredOAuth2AuthorizedClient(&quot;wallet&quot;) OAuth2AuthorizedClient authorizedClient) {\r\n\r\n        String body = this.webClient\r\n                .get()\r\n                .attributes(oauth2AuthorizedClient(authorizedClient))\r\n                .retrieve()\r\n                .bodyToMono(String.class)\r\n                .block();\r\n\r\n        model.addAttribute(&quot;body&quot;, body);\r\n        return &quot;response&quot;;\r\n    }\r\n}\r\n\r\n\r\n### application.properties\r\n\r\n    spring.security.oauth2.client.registration.wallet.client-id                = \r\n    spring.security.oauth2.client.registration.wallet.client-secret            =\r\n    spring.security.oauth2.client.registration.wallet.scope[]                  = read:transaction,write:transaction\r\n    spring.security.oauth2.client.registration.wallet.authorization-grant-type = client_credentials\r\n    \r\n    spring.security.oauth2.client.provider.wallet.issuer-uri                   = https://domain.eu.auth0.com/\r\n    \r\n    resource-uri                                                               = http://localhost:8081/api/wallet\r\n    wallet-audience                                                            = https://wallet\r\n\r\n","title":"OAuth2 client with extra parameters in body (Audience)","body":"<p>Seems that with Auth0, when in a M2M flow, we need to pass the <code>audience</code> parameter in the authorization request, and the the token will be issued for such <code>audience</code></p>\n<pre><code>curl --request POST \\\n  --url https://domain.eu.auth0.com/oauth/token \\\n  --header 'content-type: application/json' \\\n  --data '{&quot;client_id&quot;:&quot;xxxxx&quot;,&quot;client_secret&quot;:&quot;xxxxx&quot;,&quot;audience&quot;:&quot;my-api-audience&quot;,&quot;grant_type&quot;:&quot;client_credentials&quot;}'\n</code></pre>\n<p>otherwise, an error is thrown</p>\n<pre><code>403 Forbidden: &quot;{&quot;error&quot;:&quot;access_denied&quot;,&quot;error_description&quot;:&quot;No audience parameter was provided, and no default audience has been configured&quot;}&quot;\n</code></pre>\n<p>I try to implement a <code>Client Credentials</code> flow with Spring Boot using the new Spring Security 5 approach with webflux using WebClient.</p>\n<p><a href=\"https://github.com/spring-projects/spring-security-samples/tree/main/servlet/spring-boot/java/oauth2/webclient\" rel=\"noreferrer\">https://github.com/spring-projects/spring-security-samples/tree/main/servlet/spring-boot/java/oauth2/webclient</a></p>\n<p>Spring doesn't provide a way to add custom parameters to the Auth requests so as by this post</p>\n<p><a href=\"https://github.com/spring-projects/spring-security/issues/6569\" rel=\"noreferrer\">https://github.com/spring-projects/spring-security/issues/6569</a></p>\n<p>I have to implement a custom converter.</p>\n<p>Everything seems to be injected fine on startup but the converted is never invoked when accessing the client's endpoint <code>localhost/api/explicit</code> so I keep stuck with the <code>audience</code> problem.</p>\n<h3>WebClientConfig.java</h3>\n<pre><code>@Configuration\npublic class WebClientConfig {\n    @Value(&quot;${resource-uri}&quot;)\n    String resourceUri;\n\n    @Value(&quot;${wallet-audience}&quot;)\n    String audience;\n\n       @Bean\n        WebClient webClient(OAuth2AuthorizedClientManager authorizedClientManager) {\n\n            var oauth2 = new ServletOAuth2AuthorizedClientExchangeFilterFunction(authorizedClientManager);\n\n            return WebClient.builder()\n                    .filter(oauth2)\n                    // TRIED BOTH\n                    //.apply(oauth2.oauth2Configuration())\n                    .build();\n        }\n\n        @Bean\n        OAuth2AuthorizedClientManager authorizedClientManager(ClientRegistrationRepository clientRegistrationRepository, OAuth2AuthorizedClientRepository authorizedClientRepository) {\n\n            Converter&lt;OAuth2ClientCredentialsGrantRequest, RequestEntity&lt;?&gt;&gt; customRequestEntityConverter = new Auth0ClientCredentialsGrantRequestEntityConverter(audience);\n\n            // @formatter:off\n            var authorizedClientProvider =\n                    OAuth2AuthorizedClientProviderBuilder.builder()\n                                                         .refreshToken()\n                                                         .clientCredentials(clientCredentialsGrantBuilder -&gt; {\n                                                             var clientCredentialsTokenResponseClient = new DefaultClientCredentialsTokenResponseClient();\n                                                             clientCredentialsTokenResponseClient.setRequestEntityConverter(customRequestEntityConverter);\n                                                         })\n                                                         .build();\n            // @formatter:on\n\n            var authorizedClientManager = new DefaultOAuth2AuthorizedClientManager(clientRegistrationRepository, authorizedClientRepository);\n            authorizedClientManager.setAuthorizedClientProvider(authorizedClientProvider);\n\n            return authorizedClientManager;\n        }\n</code></pre>\n<h3>Auth0ClientCredentialsGrantRequestEntityConverter.java</h3>\n<p>thanks to <a href=\"https://www.aheritier.net/spring-boot-app-client-of-an-auth0-protected-service-jwt/\" rel=\"noreferrer\">https://www.aheritier.net/spring-boot-app-client-of-an-auth0-protected-service-jwt/</a></p>\n<pre><code>import org.springframework.core.convert.converter.Converter;\nimport org.springframework.http.HttpHeaders;\nimport org.springframework.http.HttpMethod;\nimport org.springframework.http.MediaType;\nimport org.springframework.http.RequestEntity;\nimport org.springframework.security.oauth2.client.endpoint.OAuth2ClientCredentialsGrantRequest;\nimport org.springframework.security.oauth2.client.registration.ClientRegistration;\nimport org.springframework.security.oauth2.core.ClientAuthenticationMethod;\nimport org.springframework.security.oauth2.core.endpoint.OAuth2ParameterNames;\nimport org.springframework.util.CollectionUtils;\nimport org.springframework.util.LinkedMultiValueMap;\nimport org.springframework.util.MultiValueMap;\nimport org.springframework.util.StringUtils;\nimport org.springframework.web.util.UriComponentsBuilder;\n\nimport java.util.Collections;\n\npublic final class Auth0ClientCredentialsGrantRequestEntityConverter implements Converter&lt;OAuth2ClientCredentialsGrantRequest, RequestEntity&lt;?&gt;&gt; {\n\n    private static final HttpHeaders DEFAULT_TOKEN_REQUEST_HEADERS = getDefaultTokenRequestHeaders();\n\n    private final String audience;\n\n    /**\n     * @param audience The audience to pass to Auth0\n     */\n    public Auth0ClientCredentialsGrantRequestEntityConverter(String audience) {\n        this.audience = audience;\n    }\n\n    /**\n     * Returns the {@link RequestEntity} used for the Access Token Request.\n     *\n     * @param clientCredentialsGrantRequest the client credentials grant request\n     * @return the {@link RequestEntity} used for the Access Token Request\n     */\n    @Override\n    public RequestEntity&lt;?&gt; convert(OAuth2ClientCredentialsGrantRequest clientCredentialsGrantRequest) {\n        var clientRegistration = clientCredentialsGrantRequest.getClientRegistration();\n        var headers = getTokenRequestHeaders(clientRegistration);\n        var formParameters = this.buildFormParameters(clientCredentialsGrantRequest);\n        var uri = UriComponentsBuilder.fromUriString(clientRegistration.getProviderDetails().getTokenUri())\n                                      .build()\n                                      .toUri();\n        return new RequestEntity&lt;&gt;(formParameters, headers, HttpMethod.POST, uri);\n    }\n\n    /**\n     * Returns a {@link MultiValueMap} of the form parameters used for the Access Token\n     * Request body.\n     *\n     * @param clientCredentialsGrantRequest the client credentials grant request\n     * @return a {@link MultiValueMap} of the form parameters used for the Access Token\n     * Request body\n     */\n    private MultiValueMap&lt;String, String&gt; buildFormParameters(OAuth2ClientCredentialsGrantRequest clientCredentialsGrantRequest) {\n        var clientRegistration = clientCredentialsGrantRequest.getClientRegistration();\n        MultiValueMap&lt;String, String&gt; formParameters = new LinkedMultiValueMap&lt;&gt;();\n        formParameters.add(OAuth2ParameterNames.GRANT_TYPE, clientCredentialsGrantRequest.getGrantType().getValue());\n\n        if (!CollectionUtils.isEmpty(clientRegistration.getScopes())) {\n            formParameters.add(OAuth2ParameterNames.SCOPE,\n                    StringUtils.collectionToDelimitedString(clientRegistration.getScopes(), &quot; &quot;));\n        }\n\n        if (ClientAuthenticationMethod.POST.equals(clientRegistration.getClientAuthenticationMethod())) {\n            formParameters.add(OAuth2ParameterNames.CLIENT_ID, clientRegistration.getClientId());\n            formParameters.add(OAuth2ParameterNames.CLIENT_SECRET, clientRegistration.getClientSecret());\n        }\n\n        formParameters.add(&quot;audience&quot;, this.audience);\n        return formParameters;\n    }\n\n    private static HttpHeaders getTokenRequestHeaders(ClientRegistration clientRegistration) {\n        var headers = new HttpHeaders();\n        headers.addAll(DEFAULT_TOKEN_REQUEST_HEADERS);\n        if (ClientAuthenticationMethod.BASIC.equals(clientRegistration.getClientAuthenticationMethod())) {\n            headers.setBasicAuth(clientRegistration.getClientId(), clientRegistration.getClientSecret());\n        }\n        return headers;\n    }\n\n    private static HttpHeaders getDefaultTokenRequestHeaders() {\n        var headers = new HttpHeaders();\n        final var contentType = MediaType.valueOf(MediaType.APPLICATION_FORM_URLENCODED_VALUE + &quot;;charset=UTF-8&quot;);\n\n        headers.setAccept(Collections.singletonList(MediaType.APPLICATION_JSON));\n        headers.setContentType(contentType);\n\n        return headers;\n    }\n\n}\n</code></pre>\n<h3>Controller.java</h3>\n<p>@RestController\npublic class PrivateController {</p>\n<pre><code>private final WebClient webClient;\n\npublic PrivateController(WebClient webClient) {\n    this.webClient = webClient;\n}\n\n@GetMapping(&quot;/explicit&quot;)\nString explicit(Model model, @RegisteredOAuth2AuthorizedClient(&quot;wallet&quot;) OAuth2AuthorizedClient authorizedClient) {\n\n    String body = this.webClient\n            .get()\n            .attributes(oauth2AuthorizedClient(authorizedClient))\n            .retrieve()\n            .bodyToMono(String.class)\n            .block();\n\n    model.addAttribute(&quot;body&quot;, body);\n    return &quot;response&quot;;\n}\n</code></pre>\n<p>}</p>\n<h3>application.properties</h3>\n<pre><code>spring.security.oauth2.client.registration.wallet.client-id                = \nspring.security.oauth2.client.registration.wallet.client-secret            =\nspring.security.oauth2.client.registration.wallet.scope[]                  = read:transaction,write:transaction\nspring.security.oauth2.client.registration.wallet.authorization-grant-type = client_credentials\n\nspring.security.oauth2.client.provider.wallet.issuer-uri                   = https://domain.eu.auth0.com/\n\nresource-uri                                                               = http://localhost:8081/api/wallet\nwallet-audience                                                            = https://wallet\n</code></pre>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":51299,"reputation":2814,"user_id":153258,"display_name":"Nikolaos Georgiou"},"score":0,"creation_date":1390989869,"post_id":21427608,"comment_id":32327453,"body_markdown":"You should be able to use the &quot;[0-9]+&quot; regex to match the first number in your string.","body":"You should be able to use the &quot;[0-9]+&quot; regex to match the first number in your string."},{"owner":{"account_id":337158,"reputation":57563,"user_id":665261,"accept_rate":70,"display_name":"Billy Moon"},"score":0,"creation_date":1390989929,"post_id":21427608,"comment_id":32327499,"body_markdown":"Would be better to do a regex match on sequences of numbers, and select the index of the one you want. If you continue the way you are doing it, this regex could work... `Customer.+|[^0-9]`","body":"Would be better to do a regex match on sequences of numbers, and select the index of the one you want. If you continue the way you are doing it, this regex could work... <code>Customer.+|[^0-9]</code>"}],"answers":[{"tags":[],"owner":{"display_name":"user330315"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1390990300,"creation_date":1390989932,"answer_id":21427729,"question_id":21427608,"body_markdown":"I can&#39;t think of a single line that would accomplish this, but the following should work:\r\n\r\n    String orderString = &quot;Order Number: 1509596 Customer Number: 8&quot;;\r\n    Pattern p = Pattern.compile(&quot;[0-9]+&quot;);\r\n    Matcher m = p.matcher(orderString);\r\n    if (m.find())\r\n    {\r\n      String orderNr = m.group();\r\n      System.out.println(orderNr);\r\n    }\r\n\r\n","title":"regex getting the first instance of a number from a string","body":"<p>I can't think of a single line that would accomplish this, but the following should work:</p>\n\n<pre><code>String orderString = \"Order Number: 1509596 Customer Number: 8\";\nPattern p = Pattern.compile(\"[0-9]+\");\nMatcher m = p.matcher(orderString);\nif (m.find())\n{\n  String orderNr = m.group();\n  System.out.println(orderNr);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2902843,"reputation":774,"user_id":2489072,"accept_rate":50,"display_name":"Pulah Nandha"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1390989941,"creation_date":1390989941,"answer_id":21427730,"question_id":21427608,"body_markdown":"if you change `orderNumber.replaceAll(&quot;[^0-9]&quot;, &quot;&quot;)`  \r\n\r\nto \r\n\r\n`orderNumber.replaceAll(&quot;[^0-9]&quot;, &quot;,&quot;)` hence\r\n\r\n you will get `,1509596,8` as an answer, \r\n\r\n\r\nI think this is probably help you to solve ans.","title":"regex getting the first instance of a number from a string","body":"<p>if you change <code>orderNumber.replaceAll(\"[^0-9]\", \"\")</code>  </p>\n\n<p>to </p>\n\n<p><code>orderNumber.replaceAll(\"[^0-9]\", \",\")</code> hence</p>\n\n<p>you will get <code>,1509596,8</code> as an answer, </p>\n\n<p>I think this is probably help you to solve ans.</p>\n"},{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1689024950,"creation_date":1390989984,"answer_id":21427741,"question_id":21427608,"body_markdown":"Use a regex that matches the whole input, capturing the part you want, then replace everything captured to &quot;extract&quot; what you want.\r\n\r\n    String firstNumber = str.replaceAll(&quot;^\\\\D*(\\\\d+).*&quot;, &quot;$1&quot;);\r\n\r\nSee [live demo][1].\r\n\r\nThe regex matches all leading non-digits (if any), then as many digits as are found next as capture group 1, then matches to the end. `$1` is a *back reference* to capture group 1.\r\n\r\n---\r\n\r\nIf newlines (which dot does not match by default) are in the input, enable DOTALL flag by adding `(?s)` to the regex:\r\n\r\n    String firstNumber = str.replaceAll(&quot;(?s)^\\\\D*(\\\\d+).*&quot;, &quot;$1&quot;);\r\n\r\n  [1]: https://ideone.com/lkggQq","title":"regex getting the first instance of a number from a string","body":"<p>Use a regex that matches the whole input, capturing the part you want, then replace everything captured to &quot;extract&quot; what you want.</p>\n<pre><code>String firstNumber = str.replaceAll(&quot;^\\\\D*(\\\\d+).*&quot;, &quot;$1&quot;);\n</code></pre>\n<p>See <a href=\"https://ideone.com/lkggQq\" rel=\"nofollow noreferrer\">live demo</a>.</p>\n<p>The regex matches all leading non-digits (if any), then as many digits as are found next as capture group 1, then matches to the end. <code>$1</code> is a <em>back reference</em> to capture group 1.</p>\n<hr />\n<p>If newlines (which dot does not match by default) are in the input, enable DOTALL flag by adding <code>(?s)</code> to the regex:</p>\n<pre><code>String firstNumber = str.replaceAll(&quot;(?s)^\\\\D*(\\\\d+).*&quot;, &quot;$1&quot;);\n</code></pre>\n"}],"owner":{"account_id":2583616,"reputation":1317,"user_id":2239784,"accept_rate":21,"display_name":"Doctor Who"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4641,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":21427741,"answer_count":3,"score":4,"last_activity_date":1689024950,"creation_date":1390989631,"question_id":21427608,"body_markdown":"I return the following string from a webpage \r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    Order Number: 1509596 Customer Number: 8\r\n\r\nbut it could also be \r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    Order ID 1509596 Customer 8\r\n\r\nI want to use regex so in my method I just return the order number, I was doing \r\n\r\n    orderNumber.replaceAll(&quot;[^0-9]&quot;, &quot;&quot;)\r\n\r\n but that obviously doesn&#39;t work because I then have an 8 on the end of my order number. Can somebody help me how I would just the order number as I&#39;m rubbish at reg ex! \r\n\r\nThe string will always be 50 characters long but the order number is dynamic so I don&#39;t know how long it will be, is it possible to just return the first number in the string? ","title":"regex getting the first instance of a number from a string","body":"<p>I return the following string from a webpage </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Order Number: 1509596 Customer Number: 8\n</code></pre>\n\n<p>but it could also be </p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Order ID 1509596 Customer 8\n</code></pre>\n\n<p>I want to use regex so in my method I just return the order number, I was doing </p>\n\n<pre><code>orderNumber.replaceAll(\"[^0-9]\", \"\")\n</code></pre>\n\n<p>but that obviously doesn't work because I then have an 8 on the end of my order number. Can somebody help me how I would just the order number as I'm rubbish at reg ex! </p>\n\n<p>The string will always be 50 characters long but the order number is dynamic so I don't know how long it will be, is it possible to just return the first number in the string? </p>\n"},{"tags":["java","spring-boot","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":17750,"reputation":25470,"user_id":40064,"accept_rate":69,"display_name":"Wim Deblauwe"},"score":0,"creation_date":1574843205,"post_id":59065939,"comment_id":104370292,"body_markdown":"Can you add the code of `Employer` to see the JPA annotations?","body":"Can you add the code of <code>Employer</code> to see the JPA annotations?"},{"owner":{"display_name":"user5959252"},"score":0,"creation_date":1574843376,"post_id":59065939,"comment_id":104370391,"body_markdown":"@WimDeblauwe I added the Employer entity","body":"@WimDeblauwe I added the Employer entity"},{"owner":{"account_id":17750,"reputation":25470,"user_id":40064,"accept_rate":69,"display_name":"Wim Deblauwe"},"score":0,"creation_date":1574843477,"post_id":59065939,"comment_id":104370456,"body_markdown":"How are you testing this? Via a unit/integration test or in an application? Are you using transactions?","body":"How are you testing this? Via a unit/integration test or in an application? Are you using transactions?"},{"owner":{"display_name":"user5959252"},"score":0,"creation_date":1574843735,"post_id":59065939,"comment_id":104370589,"body_markdown":"I am testing in an application, the service method is called in every 2 minutes and I check database every time. In the first case where I build the entity and save it doesn&#39;t work however, in the latter case when I retrieve data from the database and update its fields and save again it updates.","body":"I am testing in an application, the service method is called in every 2 minutes and I check database every time. In the first case where I build the entity and save it doesn&#39;t work however, in the latter case when I retrieve data from the database and update its fields and save again it updates."},{"owner":{"account_id":5694623,"reputation":6528,"user_id":4501480,"accept_rate":55,"display_name":"Vikrant Kashyap"},"score":0,"creation_date":1574845825,"post_id":59065939,"comment_id":104371638,"body_markdown":"try `@Transactional` annotation on `update()` method. Hope this might work..","body":"try <code>@Transactional</code> annotation on <code>update()</code> method. Hope this might work.."}],"answers":[{"tags":[],"owner":{"account_id":5278004,"reputation":6696,"user_id":4214241,"display_name":"R.G"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1574847097,"creation_date":1574846530,"answer_id":59066834,"question_id":59065939,"body_markdown":"To update an existing entity object through JPA it should be made available to the entity manager first. \r\n\r\nRead through the article\r\n\r\nhttps://www.objectdb.com/java/jpa/query/jpql/update\r\n\r\nexcerpt from the same\r\n\r\n    1.Retrieving the entity objects into an EntityManager.\r\n    2.Updating the relevant entity object fields within an active transaction.\r\n    3.Applying changes to the database by calling the commit method.\r\n\r\nI assume for the case where update does not happen , the entity is not a managed entity yet.\r\n\r\nMore on managed entity : https://www.baeldung.com/hibernate-entity-lifecycle#managed-entity\r\n","title":"Jpa Repository save() doesn&#39;t update existing data","body":"<p>To update an existing entity object through JPA it should be made available to the entity manager first. </p>\n\n<p>Read through the article</p>\n\n<p><a href=\"https://www.objectdb.com/java/jpa/query/jpql/update\" rel=\"nofollow noreferrer\">https://www.objectdb.com/java/jpa/query/jpql/update</a></p>\n\n<p>excerpt from the same</p>\n\n<pre><code>1.Retrieving the entity objects into an EntityManager.\n2.Updating the relevant entity object fields within an active transaction.\n3.Applying changes to the database by calling the commit method.\n</code></pre>\n\n<p>I assume for the case where update does not happen , the entity is not a managed entity yet.</p>\n\n<p>More on managed entity : <a href=\"https://www.baeldung.com/hibernate-entity-lifecycle#managed-entity\" rel=\"nofollow noreferrer\">https://www.baeldung.com/hibernate-entity-lifecycle#managed-entity</a></p>\n"},{"tags":[],"owner":{"account_id":14129921,"reputation":1051,"user_id":10208183,"display_name":"codeworks elegant"},"down_vote_count":0,"up_vote_count":25,"is_accepted":true,"score":25,"last_activity_date":1574847058,"creation_date":1574847058,"answer_id":59067006,"question_id":59065939,"body_markdown":"Your Entity `Employer` looks to be in detached/Transient state and you are passing `id` value manually which is not permitted, as it is marked as `@GeneratedValue(strategy = GenerationType.IDENTITY)`. \r\n\r\nWhat you need to do is when you know the primary key value i.e `id` value, first you fetch the Entity from the database using findById() method, by which Entity comes into Managed state and then try to update the Entity by calling save() method. This will update your Entity.\r\n\r\nFor more info on Entity state you can refer this:\r\n   https://vladmihalcea.com/a-beginners-guide-to-jpa-hibernate-entity-state-transitions/","title":"Jpa Repository save() doesn&#39;t update existing data","body":"<p>Your Entity <code>Employer</code> looks to be in detached/Transient state and you are passing <code>id</code> value manually which is not permitted, as it is marked as <code>@GeneratedValue(strategy = GenerationType.IDENTITY)</code>. </p>\n\n<p>What you need to do is when you know the primary key value i.e <code>id</code> value, first you fetch the Entity from the database using findById() method, by which Entity comes into Managed state and then try to update the Entity by calling save() method. This will update your Entity.</p>\n\n<p>For more info on Entity state you can refer this:\n   <a href=\"https://vladmihalcea.com/a-beginners-guide-to-jpa-hibernate-entity-state-transitions/\" rel=\"noreferrer\">https://vladmihalcea.com/a-beginners-guide-to-jpa-hibernate-entity-state-transitions/</a></p>\n"},{"tags":[],"owner":{"account_id":11826622,"reputation":27,"user_id":8654378,"display_name":"Nitin Sharma"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1596187250,"creation_date":1596187250,"answer_id":63189088,"question_id":59065939,"body_markdown":"*This question is already been answered but this is my understanding of topic, as I recently started working on it.*\r\n\r\n**This can be answered on basis of Transient and Persistent/managed entities.**\r\n\r\n**Transient entity** : A new entity object created which is not associated with any session till now. This object is not related to any stored data in database since it is freshly created.\r\n\r\nWhen you fetch a record from db it is fetched in **managed or persistent** state and any changes made to it will be reflected back to the record that it is mapped to.\r\n\r\nSuggestion 1 : You should not be manually adding primary key values since it is already AutoIncremented.\r\n\r\nSuggestion 2 : If you already have recirds id, fetch it from db first and then update it.\r\n\r\n\r\nHere is a Stackoverflow discussion on the topic to get you some more insight : https://stackoverflow.com/questions/2573739/what-are-detached-persistent-and-transient-objects-in-hibernate","title":"Jpa Repository save() doesn&#39;t update existing data","body":"<p><em>This question is already been answered but this is my understanding of topic, as I recently started working on it.</em></p>\n<p><strong>This can be answered on basis of Transient and Persistent/managed entities.</strong></p>\n<p><strong>Transient entity</strong> : A new entity object created which is not associated with any session till now. This object is not related to any stored data in database since it is freshly created.</p>\n<p>When you fetch a record from db it is fetched in <strong>managed or persistent</strong> state and any changes made to it will be reflected back to the record that it is mapped to.</p>\n<p>Suggestion 1 : You should not be manually adding primary key values since it is already AutoIncremented.</p>\n<p>Suggestion 2 : If you already have recirds id, fetch it from db first and then update it.</p>\n<p>Here is a Stackoverflow discussion on the topic to get you some more insight : <a href=\"https://stackoverflow.com/questions/2573739/what-are-detached-persistent-and-transient-objects-in-hibernate\">What are detached, persistent and transient objects in hibernate?</a></p>\n"},{"tags":[],"owner":{"account_id":16608611,"reputation":123,"user_id":12002311,"display_name":"Prince"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682411951,"creation_date":1682411951,"answer_id":76099169,"question_id":59065939,"body_markdown":"I was also facing the same issue. The thing is JPA doesn&#39;t update your data if **new data is same as old one**. If there is no change in the modified data, it won&#39;t run the update query.","title":"Jpa Repository save() doesn&#39;t update existing data","body":"<p>I was also facing the same issue. The thing is JPA doesn't update your data if <strong>new data is same as old one</strong>. If there is no change in the modified data, it won't run the update query.</p>\n"},{"tags":[],"owner":{"account_id":12110694,"reputation":53,"user_id":8847608,"display_name":"IncogVito"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689024248,"creation_date":1689024248,"answer_id":76657434,"question_id":59065939,"body_markdown":"For these who&#39;s struggling this issue with ReactiveMongoRepository.\r\nThere&#39;s a better way to handle it faster without unnecessary loading entity from database. You would have to implement *Persistable* interface to indicate if the entity should be inserted or updated. \r\n\r\n*SimpleReactiveMongoRepository#save* looks like this\r\n\r\n\t@Override\r\n\tpublic &lt;S extends T&gt; Mono&lt;S&gt; save(S entity) {\r\n\r\n\t\tAssert.notNull(entity, &quot;Entity must not be null&quot;);\r\n\r\n\t\tif (entityInformation.isNew(entity)) {\r\n\t\t\treturn mongoOperations.insert(entity, entityInformation.getCollectionName());\r\n\t\t}\r\n\r\n\t\treturn mongoOperations.save(entity, entityInformation.getCollectionName());\r\n\t}\r\n\r\nSo in your entity you need to provide information whether the Entity is a new one to be inserted or is the old one just to be updated.\r\n\r\n    @Data\r\n    @Document(&quot;ActionRequest&quot;)\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    public class ActionRequestEntity implements Persistable&lt;String&gt; {\r\n    @Id\r\n    private String requestId;\r\n    {...}\r\n\r\n    @Override\r\n    public String getId() {\r\n        return requestId;\r\n    }\r\n\r\n    @Override\r\n    public boolean isNew() {\r\n        return requestId == null;\r\n    }\r\n    }\r\n\r\nThen JPARepository will know how to handle your entity during the save operation.\r\n\r\n\r\n\r\n","title":"Jpa Repository save() doesn&#39;t update existing data","body":"<p>For these who's struggling this issue with ReactiveMongoRepository.\nThere's a better way to handle it faster without unnecessary loading entity from database. You would have to implement <em>Persistable</em> interface to indicate if the entity should be inserted or updated.</p>\n<p><em>SimpleReactiveMongoRepository#save</em> looks like this</p>\n<pre><code>@Override\npublic &lt;S extends T&gt; Mono&lt;S&gt; save(S entity) {\n\n    Assert.notNull(entity, &quot;Entity must not be null&quot;);\n\n    if (entityInformation.isNew(entity)) {\n        return mongoOperations.insert(entity, entityInformation.getCollectionName());\n    }\n\n    return mongoOperations.save(entity, entityInformation.getCollectionName());\n}\n</code></pre>\n<p>So in your entity you need to provide information whether the Entity is a new one to be inserted or is the old one just to be updated.</p>\n<pre><code>@Data\n@Document(&quot;ActionRequest&quot;)\n@NoArgsConstructor\n@AllArgsConstructor\npublic class ActionRequestEntity implements Persistable&lt;String&gt; {\n@Id\nprivate String requestId;\n{...}\n\n@Override\npublic String getId() {\n    return requestId;\n}\n\n@Override\npublic boolean isNew() {\n    return requestId == null;\n}\n}\n</code></pre>\n<p>Then JPARepository will know how to handle your entity during the save operation.</p>\n"}],"owner":{"display_name":"user5959252"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49987,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":59067006,"answer_count":5,"score":10,"last_activity_date":1689024248,"creation_date":1574843069,"question_id":59065939,"body_markdown":"I am trying to update data and as I know save() method saves entity if the id is null or update an existing entity in the database if the given id is found in DB.\r\n\r\nHowever, when I try to save data it is not updated:\r\n\r\n    public Employer update() {\r\n        Employer emp = Employer.builder()\r\n            .id(2L) // it exists in database\r\n            .name(&#39;new company name&#39;)\r\n            .build();\r\n\r\n        return repository.save(emp);\r\n    }\r\n\r\nBut, when I retrieve data from the database and update its fields and save again it updates:\r\n\r\n    public Employer update() {\r\n        Employer emp = repository.getOne(2L);\r\n        emp.setName(&#39;new company name&#39;);\r\n\r\n        return repository.save(emp);\r\n    }\r\n\r\nCan anyone explain the reason for this behavior? I read the documentation but couldn&#39;t find anything related to that.\r\n\r\nHere is my repository:\r\n\r\n    import org.springframework.data.jpa.repository.JpaRepository;\r\n    import org.springframework.stereotype.Repository;\r\n    \r\n    @Repository\r\n    public interface Employer extends JpaRepository&lt;Employer, Long&gt; {\r\n    \r\n    }\r\n\r\nand entity:\r\n\r\n    @Data\r\n    @Entity\r\n    @Builder\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @Table(schema = &quot;public&quot;, name = &quot;employer&quot;)\r\n    public class Employer {\r\n    \r\n      @Id\r\n      @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n      private Long id;\r\n    \r\n      @NotBlank\r\n      @Size(max = 50)\r\n      private String name;\r\n    \r\n    }\r\n\r\n","title":"Jpa Repository save() doesn&#39;t update existing data","body":"<p>I am trying to update data and as I know save() method saves entity if the id is null or update an existing entity in the database if the given id is found in DB.</p>\n\n<p>However, when I try to save data it is not updated:</p>\n\n<pre><code>public Employer update() {\n    Employer emp = Employer.builder()\n        .id(2L) // it exists in database\n        .name('new company name')\n        .build();\n\n    return repository.save(emp);\n}\n</code></pre>\n\n<p>But, when I retrieve data from the database and update its fields and save again it updates:</p>\n\n<pre><code>public Employer update() {\n    Employer emp = repository.getOne(2L);\n    emp.setName('new company name');\n\n    return repository.save(emp);\n}\n</code></pre>\n\n<p>Can anyone explain the reason for this behavior? I read the documentation but couldn't find anything related to that.</p>\n\n<p>Here is my repository:</p>\n\n<pre><code>import org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\n\n@Repository\npublic interface Employer extends JpaRepository&lt;Employer, Long&gt; {\n\n}\n</code></pre>\n\n<p>and entity:</p>\n\n<pre><code>@Data\n@Entity\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\n@Table(schema = \"public\", name = \"employer\")\npublic class Employer {\n\n  @Id\n  @GeneratedValue(strategy = GenerationType.IDENTITY)\n  private Long id;\n\n  @NotBlank\n  @Size(max = 50)\n  private String name;\n\n}\n</code></pre>\n"},{"tags":["java","class","object","exception"],"owner":{"account_id":27220194,"reputation":13,"user_id":20749607,"display_name":"Ad270"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1689023827,"answer_count":0,"score":0,"last_activity_date":1689023678,"creation_date":1689023678,"question_id":76657388,"body_markdown":"I am trying to throw custom exceptions in a class, however I keep getting symbol not found even though I have defined a custom exception which extends from exception. Both this class and the exception are in the same package and directory so I do not understand why it doesn&#39;t work.\r\n\r\n   \r\n\r\n    public class Account {\r\n\tArrayList&lt;String&gt; accountArray = new ArrayList&lt;String&gt;();\r\n\tArrayList&lt;Integer&gt; idArray = new ArrayList&lt;Integer&gt;();\r\n\t\r\n\tprivate int createAccount(String handle) throws IllegalHandleException, InvalidHandleException {\r\n\t\tif (!accountArray.contains(handle)) {\r\n\t\t\tif (handle.length() &gt; 0 &amp;&amp; handle.length() &lt; 30 ){\r\n\t\t\t\tif (!handle.contains(&quot;  &quot;)) {\r\n\t\t\t\t\taccountArray.add(handle);\r\n\t\t\t\t\tint id = accountArray.indexOf(handle);\r\n\t\t\t\t\tidArray.add(id);\r\n\t\t\t\t\treturn id;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthrow new IllegalHandleException();\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthrow new IllegalHandleException();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tthrow new InvalidHandleException();\r\n\t\t}\r\n\t   }\r\n     }\r\n\r\nBoth of the exceptions (IllegalHandle and InvalidHandle) extend exception and call its constructor, they dont add any of their own code.\r\n","title":"Symbol not found with custom exception in same directory","body":"<p>I am trying to throw custom exceptions in a class, however I keep getting symbol not found even though I have defined a custom exception which extends from exception. Both this class and the exception are in the same package and directory so I do not understand why it doesn't work.</p>\n<pre><code>public class Account {\nArrayList&lt;String&gt; accountArray = new ArrayList&lt;String&gt;();\nArrayList&lt;Integer&gt; idArray = new ArrayList&lt;Integer&gt;();\n\nprivate int createAccount(String handle) throws IllegalHandleException, InvalidHandleException {\n    if (!accountArray.contains(handle)) {\n        if (handle.length() &gt; 0 &amp;&amp; handle.length() &lt; 30 ){\n            if (!handle.contains(&quot;  &quot;)) {\n                accountArray.add(handle);\n                int id = accountArray.indexOf(handle);\n                idArray.add(id);\n                return id;\n            } else {\n                throw new IllegalHandleException();\n            }\n        } else {\n            throw new IllegalHandleException();\n        }\n    } else {\n        throw new InvalidHandleException();\n    }\n   }\n }\n</code></pre>\n<p>Both of the exceptions (IllegalHandle and InvalidHandle) extend exception and call its constructor, they dont add any of their own code.</p>\n"},{"tags":["java","selenium-webdriver","webdriver","google-chrome-devtools"],"answers":[{"tags":[],"owner":{"account_id":3782717,"reputation":927,"user_id":3141682,"accept_rate":75,"display_name":"Adi Ohana"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1689023626,"creation_date":1556818640,"answer_id":55957586,"question_id":55957240,"body_markdown":"For each log entry, the total time taken to complete a request is :\r\n`message.params.response.timing.sendStart - message.params.response.timing.sendEnd`.\r\n\r\nThe performance log should be filtered for only those messages which have `message.method = &quot;Network.responseReceived&quot;`.\r\n\r\n----\r\n\r\nRegarding understanding `message.params.response.timing` section, for instance something as follows:\r\n\r\n```json\r\n{&quot;message&quot;: {\r\n    ...\r\n     &quot;params&quot;: {\r\n        ...\r\n          &quot;response&quot;: {\r\n             &quot;timing&quot;: {\r\n                 &quot;sendEnd&quot;: 1.132,\r\n                 &quot;sendStart&quot;: 0.96,\r\n                 ...\r\n        },\r\n        &quot;url&quot;: &quot;https://example.com/GetBlah&quot;\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\nlook here: https://groups.google.com/g/google-chrome-developer-tools/c/FCCV2J7BaIY\r\n\r\n\r\n\r\n----\r\n\r\nAfter enabling the PERFORMANCE logs, you can iterate the log entries using:\r\n\r\n    List&lt;LogEntry&gt; entries = this.driver.manage().logs().get(LogType.PERFORMANCE).getAll();\r\n\r\nThen, you can get the json with the following values:\r\n\r\n    private String url;\r\n    private Boolean timing;\r\n    private Long connectEnd;\r\n    private Long connectStart;\r\n    private Long dnsEnd;\r\n    private Long dnsStart;\r\n    private Long receiveHeadersEnd;\r\n    private Long sslStart;\r\n    private Long sslEnd;\r\n    private Long proxyStart;\r\n    private Long proxyEnd;\r\n    private Long sendStart;\r\n    private Long sendEnd;\r\n    private String mimeType;\r\n    private String requestStatus;\r\n    private String method;\r\n\r\nto get the total time for a single request you can use:\r\n\r\n`sendStart - sendEnd`\r\n\r\n\r\nCreation of the Chrome Driver:\r\n\r\n        DesiredCapabilities capabilities = new DesiredCapabilities();\r\n        LoggingPreferences logPrefs = new LoggingPreferences();\r\n        logPrefs.enable(LogType.PERFORMANCE, Level.ALL);\r\n        logPrefs.enable(LogType.DRIVER, Level.ALL);\r\n        capabilities.setCapability(CapabilityType.LOGGING_PREFS, logPrefs);\r\n\r\n        Map&lt;String, Object&gt; perfLogPrefs = new HashMap&lt;String, Object&gt;();\r\n        perfLogPrefs.put(&quot;traceCategories&quot;, &quot;browser,devtools.timeline,devtools&quot;);\r\n        ChromeOptions options = new ChromeOptions();\r\n        options.setExperimentalOption(&quot;perfLoggingPrefs&quot;, perfLogPrefs);\r\n        capabilities.setCapability(ChromeOptions.CAPABILITY, options);\r\n\r\n        WebDriver driver = new ChromeDriver(capabilities);\r\n\r\n\r\n","title":"how to calculate total time for one request from chrome driver PERFORMANCE logs?","body":"<p>For each log entry, the total time taken to complete a request is :\n<code>message.params.response.timing.sendStart - message.params.response.timing.sendEnd</code>.</p>\n<p>The performance log should be filtered for only those messages which have <code>message.method = &quot;Network.responseReceived&quot;</code>.</p>\n<hr />\n<p>Regarding understanding <code>message.params.response.timing</code> section, for instance something as follows:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{&quot;message&quot;: {\n    ...\n     &quot;params&quot;: {\n        ...\n          &quot;response&quot;: {\n             &quot;timing&quot;: {\n                 &quot;sendEnd&quot;: 1.132,\n                 &quot;sendStart&quot;: 0.96,\n                 ...\n        },\n        &quot;url&quot;: &quot;https://example.com/GetBlah&quot;\n      }\n    }\n  }\n}\n</code></pre>\n<p>look here: <a href=\"https://groups.google.com/g/google-chrome-developer-tools/c/FCCV2J7BaIY\" rel=\"nofollow noreferrer\">https://groups.google.com/g/google-chrome-developer-tools/c/FCCV2J7BaIY</a></p>\n<hr />\n<p>After enabling the PERFORMANCE logs, you can iterate the log entries using:</p>\n<pre><code>List&lt;LogEntry&gt; entries = this.driver.manage().logs().get(LogType.PERFORMANCE).getAll();\n</code></pre>\n<p>Then, you can get the json with the following values:</p>\n<pre><code>private String url;\nprivate Boolean timing;\nprivate Long connectEnd;\nprivate Long connectStart;\nprivate Long dnsEnd;\nprivate Long dnsStart;\nprivate Long receiveHeadersEnd;\nprivate Long sslStart;\nprivate Long sslEnd;\nprivate Long proxyStart;\nprivate Long proxyEnd;\nprivate Long sendStart;\nprivate Long sendEnd;\nprivate String mimeType;\nprivate String requestStatus;\nprivate String method;\n</code></pre>\n<p>to get the total time for a single request you can use:</p>\n<p><code>sendStart - sendEnd</code></p>\n<p>Creation of the Chrome Driver:</p>\n<pre><code>    DesiredCapabilities capabilities = new DesiredCapabilities();\n    LoggingPreferences logPrefs = new LoggingPreferences();\n    logPrefs.enable(LogType.PERFORMANCE, Level.ALL);\n    logPrefs.enable(LogType.DRIVER, Level.ALL);\n    capabilities.setCapability(CapabilityType.LOGGING_PREFS, logPrefs);\n\n    Map&lt;String, Object&gt; perfLogPrefs = new HashMap&lt;String, Object&gt;();\n    perfLogPrefs.put(&quot;traceCategories&quot;, &quot;browser,devtools.timeline,devtools&quot;);\n    ChromeOptions options = new ChromeOptions();\n    options.setExperimentalOption(&quot;perfLoggingPrefs&quot;, perfLogPrefs);\n    capabilities.setCapability(ChromeOptions.CAPABILITY, options);\n\n    WebDriver driver = new ChromeDriver(capabilities);\n</code></pre>\n"}],"owner":{"account_id":3497363,"reputation":2011,"user_id":2925133,"accept_rate":32,"display_name":"Pankaj Badukale"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1176,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":55957586,"answer_count":1,"score":4,"last_activity_date":1689023626,"creation_date":1556817020,"question_id":55957240,"body_markdown":"I am working on selenium to track network traffic for website.\r\n\r\nI have followed referred two links:\r\n1. https://stackoverflow.com/questions/45847035/using-selenium-how-to-get-network-request\r\n2. http://chromedriver.chromium.org/logging/performance-log\r\n\r\nI got log data as after configuration.\r\nyou can refer point 2 for example data:\r\nHere is what i got\r\n\r\n```json\r\n[2015-03-21T16:50:20+0400] [INFO] {&quot;message&quot;:{&quot;method&quot;:&quot;Network.responseReceived&quot;,&quot;params&quot;:{&quot;frameId&quot;:&quot;28480.1&quot;,&quot;loaderId&quot;:&quot;28480.2&quot;,&quot;requestId&quot;:&quot;28480.1&quot;,&quot;response&quot;:{&quot;connectionId&quot;:0,&quot;connectionReused&quot;:false,&quot;encodedDataLength&quot;:-1,&quot;fromDiskCache&quot;:false,&quot;fromServiceWorker&quot;:false,&quot;headers&quot;:{&quot;Access-Control-Allow-Origin&quot;:&quot;*&quot;,&quot;Content-Type&quot;:&quot;text/plain;charset=US-ASCII&quot;},&quot;mimeType&quot;:&quot;text/plain&quot;,&quot;protocol&quot;:&quot;data&quot;,&quot;status&quot;:200,&quot;statusText&quot;:&quot;OK&quot;,&quot;url&quot;:&quot;data:,&quot;},&quot;timestamp&quot;:1426942217.5344,&quot;type&quot;:&quot;Other&quot;}},&quot;webview&quot;:&quot;C359224A-06E5-42B6-8D1B-52687733920A&quot;}\r\n[2015-03-21T16:50:20+0400] [INFO] {&quot;message&quot;:{&quot;method&quot;:&quot;Network.loadingFinished&quot;,&quot;params&quot;:{&quot;encodedDataLength&quot;:0,&quot;requestId&quot;:&quot;28480.1&quot;,&quot;timestamp&quot;:1426942217.5344}},&quot;webview&quot;:&quot;C359224A-06E5-42B6-8D1B-52687733920A&quot;}\r\n[2015-03-21T16:50:20+0400] [INFO] {&quot;message&quot;:{&quot;method&quot;:&quot;Page.frameNavigated&quot;,&quot;params&quot;:{&quot;frame&quot;:{&quot;id&quot;:&quot;28480.1&quot;,&quot;loaderId&quot;:&quot;28480.2&quot;,&quot;mimeType&quot;:&quot;text/plain&quot;,&quot;securityOrigin&quot;:&quot;://&quot;,&quot;url&quot;:&quot;data:,&quot;}}},&quot;webview&quot;:&quot;C359224A-06E5-42B6-8D1B-52687733920A&quot;}\r\n[2015-03-21T16:50:21+0400] [INFO] {&quot;message&quot;:{&quot;method&quot;:&quot;Page.loadEventFired&quot;,&quot;params&quot;:{&quot;timestamp&quot;:1426942220.99924}},&quot;webview&quot;:&quot;C359224A-06E5-42B6-8D1B-52687733920A&quot;}\r\n[2015-03-21T16:50:21+0400] [INFO] {&quot;message&quot;:{&quot;method&quot;:&quot;Page.frameStoppedLoading&quot;,&quot;params&quot;:{&quot;frameId&quot;:&quot;28480.1&quot;}},&quot;webview&quot;:&quot;C359224A-06E5-42B6-8D1B-52687733920A&quot;}\r\n[2015-03-21T16:50:21+0400] [INFO] {&quot;message&quot;:{&quot;method&quot;:&quot;Page.domContentEventFired&quot;,&quot;params&quot;:{&quot;timestamp&quot;:1426942220.99927}},&quot;webview&quot;:&quot;C359224A-06E5-42B6-8D1B-52687733920A&quot;}\r\n....\r\n```\r\n\r\n\r\nBut i dont know how to calculate time of one request xhr request?\r\n\r\nI have searched for it but now luck...","title":"how to calculate total time for one request from chrome driver PERFORMANCE logs?","body":"<p>I am working on selenium to track network traffic for website.</p>\n<p>I have followed referred two links:</p>\n<ol>\n<li><a href=\"https://stackoverflow.com/questions/45847035/using-selenium-how-to-get-network-request\">Using Selenium how to get network request</a></li>\n<li><a href=\"http://chromedriver.chromium.org/logging/performance-log\" rel=\"nofollow noreferrer\">http://chromedriver.chromium.org/logging/performance-log</a></li>\n</ol>\n<p>I got log data as after configuration.\nyou can refer point 2 for example data:\nHere is what i got</p>\n<pre class=\"lang-json prettyprint-override\"><code>[2015-03-21T16:50:20+0400] [INFO] {&quot;message&quot;:{&quot;method&quot;:&quot;Network.responseReceived&quot;,&quot;params&quot;:{&quot;frameId&quot;:&quot;28480.1&quot;,&quot;loaderId&quot;:&quot;28480.2&quot;,&quot;requestId&quot;:&quot;28480.1&quot;,&quot;response&quot;:{&quot;connectionId&quot;:0,&quot;connectionReused&quot;:false,&quot;encodedDataLength&quot;:-1,&quot;fromDiskCache&quot;:false,&quot;fromServiceWorker&quot;:false,&quot;headers&quot;:{&quot;Access-Control-Allow-Origin&quot;:&quot;*&quot;,&quot;Content-Type&quot;:&quot;text/plain;charset=US-ASCII&quot;},&quot;mimeType&quot;:&quot;text/plain&quot;,&quot;protocol&quot;:&quot;data&quot;,&quot;status&quot;:200,&quot;statusText&quot;:&quot;OK&quot;,&quot;url&quot;:&quot;data:,&quot;},&quot;timestamp&quot;:1426942217.5344,&quot;type&quot;:&quot;Other&quot;}},&quot;webview&quot;:&quot;C359224A-06E5-42B6-8D1B-52687733920A&quot;}\n[2015-03-21T16:50:20+0400] [INFO] {&quot;message&quot;:{&quot;method&quot;:&quot;Network.loadingFinished&quot;,&quot;params&quot;:{&quot;encodedDataLength&quot;:0,&quot;requestId&quot;:&quot;28480.1&quot;,&quot;timestamp&quot;:1426942217.5344}},&quot;webview&quot;:&quot;C359224A-06E5-42B6-8D1B-52687733920A&quot;}\n[2015-03-21T16:50:20+0400] [INFO] {&quot;message&quot;:{&quot;method&quot;:&quot;Page.frameNavigated&quot;,&quot;params&quot;:{&quot;frame&quot;:{&quot;id&quot;:&quot;28480.1&quot;,&quot;loaderId&quot;:&quot;28480.2&quot;,&quot;mimeType&quot;:&quot;text/plain&quot;,&quot;securityOrigin&quot;:&quot;://&quot;,&quot;url&quot;:&quot;data:,&quot;}}},&quot;webview&quot;:&quot;C359224A-06E5-42B6-8D1B-52687733920A&quot;}\n[2015-03-21T16:50:21+0400] [INFO] {&quot;message&quot;:{&quot;method&quot;:&quot;Page.loadEventFired&quot;,&quot;params&quot;:{&quot;timestamp&quot;:1426942220.99924}},&quot;webview&quot;:&quot;C359224A-06E5-42B6-8D1B-52687733920A&quot;}\n[2015-03-21T16:50:21+0400] [INFO] {&quot;message&quot;:{&quot;method&quot;:&quot;Page.frameStoppedLoading&quot;,&quot;params&quot;:{&quot;frameId&quot;:&quot;28480.1&quot;}},&quot;webview&quot;:&quot;C359224A-06E5-42B6-8D1B-52687733920A&quot;}\n[2015-03-21T16:50:21+0400] [INFO] {&quot;message&quot;:{&quot;method&quot;:&quot;Page.domContentEventFired&quot;,&quot;params&quot;:{&quot;timestamp&quot;:1426942220.99927}},&quot;webview&quot;:&quot;C359224A-06E5-42B6-8D1B-52687733920A&quot;}\n....\n</code></pre>\n<p>But i dont know how to calculate time of one request xhr request?</p>\n<p>I have searched for it but now luck...</p>\n"},{"tags":["java","multithreading","hash"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1352685039,"post_id":13337426,"comment_id":18199636,"body_markdown":"The `hashCode()` method is inherited from Object, and so is as unique as Object&#39;s is. So that shouldn&#39;t be an issue, but whether or how long the Thread object will persist or be meaningful may be an issue.","body":"The <code>hashCode()</code> method is inherited from Object, and so is as unique as Object&#39;s is. So that shouldn&#39;t be an issue, but whether or how long the Thread object will persist or be meaningful may be an issue."},{"owner":{"account_id":14531,"reputation":118870,"user_id":29995,"accept_rate":77,"display_name":"Rob Hruska"},"score":1,"creation_date":1352685155,"post_id":13337426,"comment_id":18199652,"body_markdown":"You could also consider just using the thread&#39;s [id property](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#getId()) as the key.","body":"You could also consider just using the thread&#39;s <a href=\"http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#getId()\" rel=\"nofollow noreferrer\">id property</a> as the key."},{"owner":{"account_id":395272,"reputation":24521,"user_id":758133,"accept_rate":100,"display_name":"Martin James"},"score":0,"creation_date":1352713411,"post_id":13337426,"comment_id":18205707,"body_markdown":"This requirement has a sort of whiff about it...","body":"This requirement has a sort of whiff about it..."}],"answers":[{"tags":[],"owner":{"account_id":76511,"reputation":44893,"user_id":218978,"accept_rate":100,"display_name":"irreputable"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1352685153,"creation_date":1352685153,"answer_id":13337447,"question_id":13337426,"body_markdown":"Yes, people did that before Java had `ThreadLocal`.\r\n\r\nBut now you probably should use `ThreadLocal`.","title":"Using Thread as a key in Collection","body":"<p>Yes, people did that before Java had <code>ThreadLocal</code>.</p>\n\n<p>But now you probably should use <code>ThreadLocal</code>.</p>\n"}],"owner":{"account_id":1833467,"reputation":7501,"user_id":1664315,"accept_rate":59,"display_name":"Arian"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1032,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":13337447,"answer_count":1,"score":4,"last_activity_date":1689023288,"creation_date":1352684919,"question_id":13337426,"body_markdown":"Is it possible to use Threads (Thread.getCurrentThread()) as keys in a collection (e.g. HashMap&lt;Thread,Integer&gt;). I know it&#39;s possible! I&#39;d like to know that whether Java creates unique hashCodes for threads.","title":"Using Thread as a key in Collection","body":"<p>Is it possible to use Threads (Thread.getCurrentThread()) as keys in a collection (e.g. HashMap&lt;Thread,Integer&gt;). I know it's possible! I'd like to know that whether Java creates unique hashCodes for threads.</p>\n"},{"tags":["java","javafx","launch4j","jlink","jdeps"],"comments":[{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":2,"creation_date":1689015476,"post_id":76652961,"comment_id":135150669,"body_markdown":"`jdk.crypto.cryptoki` provides some cryptography algorithms used by some Java SSL implementations. If you used SSL or HTTPS in Java, you have probably used it without knowing so.  MySQL can be connected to over SSL, which may be why you need the cryptoki module.  I don’t have advice on how to determine dependency requirements for such modules.","body":"<code>jdk.crypto.cryptoki</code> provides some cryptography algorithms used by some Java SSL implementations. If you used SSL or HTTPS in Java, you have probably used it without knowing so.  MySQL can be connected to over SSL, which may be why you need the cryptoki module.  I don’t have advice on how to determine dependency requirements for such modules."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1689023239,"post_id":76652961,"comment_id":135151922,"body_markdown":"My guess for why [`jdk.crypto.cryptoki`](https://docs.oracle.com/en/java/javase/20/docs/api/jdk.crypto.cryptoki/module-summary.html) didn&#39;t show up with `jdeps` is because that module is a simple service-provider for [`java.security.Provider`](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/security/Provider.html) and thus is not directly referenced by any code that uses it. I don&#39;t see how `jdeps` could figure out some non-modular JAR needs that specific provider and not others, considering service-providers are meant to be drop-in plugins.","body":"My guess for why <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/jdk.crypto.cryptoki/module-summary.html\" rel=\"nofollow noreferrer\"><code>jdk.crypto.cryptoki</code></a> didn&#39;t show up with <code>jdeps</code> is because that module is a simple service-provider for <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/security/Provider.html\" rel=\"nofollow noreferrer\"><code>java.security.Provider</code></a> and thus is not directly referenced by any code that uses it. I don&#39;t see how <code>jdeps</code> could figure out some non-modular JAR needs that specific provider and not others, considering service-providers are meant to be drop-in plugins."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1689023322,"post_id":76652961,"comment_id":135151932,"body_markdown":"So, unfortunately, I also don&#39;t have any advice on how to determine dependencies on service-provider modules. Nor am I sure why [`java.naming`](https://docs.oracle.com/en/java/javase/20/docs/api/java.naming/module-summary.html) apparently didn&#39;t show up with `jdeps`.","body":"So, unfortunately, I also don&#39;t have any advice on how to determine dependencies on service-provider modules. Nor am I sure why <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.naming/module-summary.html\" rel=\"nofollow noreferrer\"><code>java.naming</code></a> apparently didn&#39;t show up with <code>jdeps</code>."}],"owner":{"account_id":27470264,"reputation":23,"user_id":21161705,"display_name":"Алексей Благодатских"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1689023051,"creation_date":1688985939,"question_id":76652961,"body_markdown":"I wrote small program with JavaFX, and MySQL worked through JDBC. It works well, was compiled well to jar and works from jar also well. To deliver this application to users I packed this to exe with launch4j and build custom small JRE. Exe file was created well and work, but only with full package of JRE. When I start it with my custom JRE I&#39;ve got this message:\r\n\r\n\r\n```none\r\n[10-Jul-2023 15:40] FATAL - DbConnection.java - Communications link failure\r\n\r\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\r\n←[mException in Application start method\r\njava.lang.reflect.InvocationTargetException\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n        at java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n        at javafx.graphics@19.0.2.1/com.sun.javafx.application.LauncherImpl.launchApplicationWithArgs(LauncherImpl.java:465)\r\n        at javafx.graphics@19.0.2.1/com.sun.javafx.application.LauncherImpl.launchApplication(LauncherImpl.java:364)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n        at java.base/java.lang.reflect.Method.invoke(Unknown Source)\r\n        at java.base/sun.launcher.LauncherHelper$FXHelper.main(Unknown Source)\r\nCaused by: java.lang.RuntimeException: Exception in Application start method\r\n```\r\n\r\n[full console text here:](https://docs.google.com/document/d/1sfw5-jAqSKVF2EqoHR1uvUtw51dmtOnGYJcMqqLAj24/edit?usp=sharing)\r\n\r\n\r\nAs I understand the application has a problem with MySQL module (but I&#39;m not sure). To build a custom JRE I use first `jdeps`:\r\n\r\n```none\r\njdeps --ignore-missing-deps --list-deps --multi-release 11 --module-path javafx\\lib;libs --add-modules ALL-MODULE-PATH ExpensesViewer.jar\r\n```\r\n\r\nIt shows following dependencies:\r\n\r\n```none\r\njava.base\r\n   java.datatransfer\r\n   java.desktop\r\n   java.logging\r\n   java.management\r\n   java.net.http\r\n   java.scripting\r\n   java.sql\r\n   java.transaction.xa\r\n   java.xml\r\n\r\n   ...\r\n   here lots of javafx modules\r\n   ...\r\n\r\n   jdk.jsobject\r\n   jdk.unsupported\r\n   jdk.unsupported.desktop\r\n   jdk.xml.dom\r\n   org.junit.platform.commons/org.junit.platform.commons.logging\r\n   org.junit.platform.commons/org.junit.platform.commons.util\r\n```\r\n\r\n[full list dependencies][1]\r\n\r\nSo, I created custom JRE with `jlink`: \r\n\r\n```none\r\njlink --no-header-files --no-man-pages --compress=2 --strip-debug --module-path libs;javafx/lib --add-modules java.base,java.naming,java.datatransfer,java.desktop,java.logging,java.management,java.net.http,java.scripting,java.sql,java.transaction.xa,java.xml,jdk.jsobject,jdk.unsupported,jdk.unsupported.desktop,jdk.xml.dom --output java-runtime\r\n```\r\n\r\nAs I understand I need to add something else to modules list (because if I do not use custom but full system JRE everything works well).\r\n\r\nAnd I don&#39;t understand how to find all mandatory module names that I need include (`jdeps` doesn&#39;t show all the necessary dependencies; for example, `java.naming` was mandatory, but `jdeps` doesn&#39;t show it).\r\n\r\nmodule-info.java:\r\n\r\n```java\r\nmodule ru.viewer.expensesviewer {\r\n    requires javafx.controls;\r\n    requires javafx.fxml;\r\n    requires java.sql;\r\n    requires mysql.connector.j;\r\n    requires org.apache.logging.log4j;\r\n    //requires rt;\r\n\r\n    opens ru.viewer.expensesviewer to javafx.fxml;\r\n    exports ru.viewer.expensesviewer;\r\n\r\n    opens ru.viewer.expensesviewer.model to javafx.fxml;\r\n    exports ru.viewer.expensesviewer.model;\r\n\r\n    opens ru.viewer.expensesviewer.controller to javafx.fxml;\r\n    exports ru.viewer.expensesviewer.controller;\r\n\r\n    exports ru.viewer.expensesviewer.model.objects;\r\n    opens ru.viewer.expensesviewer.model.objects to javafx.fxml;\r\n\r\n    exports ru.viewer.expensesviewer.controller.settings;\r\n    opens ru.viewer.expensesviewer.controller.settings to javafx.fxml;\r\n\r\n    exports ru.viewer.expensesviewer.controller.reports;\r\n    opens ru.viewer.expensesviewer.controller.reports to javafx.fxml;\r\n\r\n    exports ru.viewer.expensesviewer.model.objects.settings;\r\n    opens ru.viewer.expensesviewer.model.objects.settings to javafx.fxml;\r\n}\r\n```\r\n\r\nadded after couple hours:\r\nI tried to add all possible modules, looks like this:\r\n\r\n```none\r\njlink --no-header-files --no-man-pages --compress=2 --strip-debug --module-path libs;javafx/lib --add-modules java.base,java.compiler,java.datatransfer,java.desktop,java.instrument,java.logging,java.management,java.management.rmi,java.naming,java.net.http,java.prefs,java.rmi,java.scripting,java.se,java.security.jgss,java.security.sasl,java.smartcardio,java.sql,java.sql.rowset,java.transaction.xa,java.xml,java.xml.crypto,jdk.accessibility,jdk.attach,jdk.charsets,jdk.compiler,jdk.crypto.cryptoki,jdk.crypto.ec,jdk.crypto.mscapi,jdk.dynalink,jdk.editpad,jdk.hotspot.agent,jdk.httpserver,jdk.incubator.foreign,jdk.incubator.vector,jdk.internal.ed,jdk.internal.jvmstat,jdk.internal.le,jdk.internal.opt,jdk.internal.vm.ci,jdk.internal.vm.compiler,jdk.internal.vm.compiler.management,jdk.jartool,jdk.javadoc,jdk.jcmd,jdk.jconsole,jdk.jdeps,jdk.jdi,jdk.jdwp.agent,jdk.jfr,jdk.jlink,jdk.jpackage,jdk.jshell,jdk.jsobject,jdk.jstatd,jdk.localedata,jdk.management,jdk.management.agent,jdk.management.jfr,jdk.naming.dns,jdk.naming.rmi,jdk.net,jdk.nio.mapmode,jdk.random,jdk.sctp,jdk.security.auth,jdk.security.jgss,jdk.unsupported,jdk.unsupported.desktop,jdk.xml.dom,jdk.zipfs, --output java-runtime \r\n```\r\n\r\nAND IT WORKS! now I exactly know that I need to discover mandatory module.\r\n\r\nI managed find needed module with method &quot;shot in the dark&quot;, how only I added `jdk.crypto.cryptoki` my custom JRE started work. But why does my program need this module? I&#39;ve never use this... something for security... how should I discover this dependence?\r\n\r\n  [1]: https://docs.google.com/document/d/1nznSMWitZGtvAFLiI_EZWIeZfUX4JiiR18vtZIox6Hw/edit?usp=sharing","title":"JavaFX module program with MySQL doesn&#39;t work with custom JRE","body":"<p>I wrote small program with JavaFX, and MySQL worked through JDBC. It works well, was compiled well to jar and works from jar also well. To deliver this application to users I packed this to exe with launch4j and build custom small JRE. Exe file was created well and work, but only with full package of JRE. When I start it with my custom JRE I've got this message:</p>\n<pre class=\"lang-none prettyprint-override\"><code>[10-Jul-2023 15:40] FATAL - DbConnection.java - Communications link failure\n\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\n←[mException in Application start method\njava.lang.reflect.InvocationTargetException\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n        at java.base/java.lang.reflect.Method.invoke(Unknown Source)\n        at javafx.graphics@19.0.2.1/com.sun.javafx.application.LauncherImpl.launchApplicationWithArgs(LauncherImpl.java:465)\n        at javafx.graphics@19.0.2.1/com.sun.javafx.application.LauncherImpl.launchApplication(LauncherImpl.java:364)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n        at java.base/java.lang.reflect.Method.invoke(Unknown Source)\n        at java.base/sun.launcher.LauncherHelper$FXHelper.main(Unknown Source)\nCaused by: java.lang.RuntimeException: Exception in Application start method\n</code></pre>\n<p><a href=\"https://docs.google.com/document/d/1sfw5-jAqSKVF2EqoHR1uvUtw51dmtOnGYJcMqqLAj24/edit?usp=sharing\" rel=\"nofollow noreferrer\">full console text here:</a></p>\n<p>As I understand the application has a problem with MySQL module (but I'm not sure). To build a custom JRE I use first <code>jdeps</code>:</p>\n<pre class=\"lang-none prettyprint-override\"><code>jdeps --ignore-missing-deps --list-deps --multi-release 11 --module-path javafx\\lib;libs --add-modules ALL-MODULE-PATH ExpensesViewer.jar\n</code></pre>\n<p>It shows following dependencies:</p>\n<pre class=\"lang-none prettyprint-override\"><code>java.base\n   java.datatransfer\n   java.desktop\n   java.logging\n   java.management\n   java.net.http\n   java.scripting\n   java.sql\n   java.transaction.xa\n   java.xml\n\n   ...\n   here lots of javafx modules\n   ...\n\n   jdk.jsobject\n   jdk.unsupported\n   jdk.unsupported.desktop\n   jdk.xml.dom\n   org.junit.platform.commons/org.junit.platform.commons.logging\n   org.junit.platform.commons/org.junit.platform.commons.util\n</code></pre>\n<p><a href=\"https://docs.google.com/document/d/1nznSMWitZGtvAFLiI_EZWIeZfUX4JiiR18vtZIox6Hw/edit?usp=sharing\" rel=\"nofollow noreferrer\">full list dependencies</a></p>\n<p>So, I created custom JRE with <code>jlink</code>:</p>\n<pre class=\"lang-none prettyprint-override\"><code>jlink --no-header-files --no-man-pages --compress=2 --strip-debug --module-path libs;javafx/lib --add-modules java.base,java.naming,java.datatransfer,java.desktop,java.logging,java.management,java.net.http,java.scripting,java.sql,java.transaction.xa,java.xml,jdk.jsobject,jdk.unsupported,jdk.unsupported.desktop,jdk.xml.dom --output java-runtime\n</code></pre>\n<p>As I understand I need to add something else to modules list (because if I do not use custom but full system JRE everything works well).</p>\n<p>And I don't understand how to find all mandatory module names that I need include (<code>jdeps</code> doesn't show all the necessary dependencies; for example, <code>java.naming</code> was mandatory, but <code>jdeps</code> doesn't show it).</p>\n<p>module-info.java:</p>\n<pre class=\"lang-java prettyprint-override\"><code>module ru.viewer.expensesviewer {\n    requires javafx.controls;\n    requires javafx.fxml;\n    requires java.sql;\n    requires mysql.connector.j;\n    requires org.apache.logging.log4j;\n    //requires rt;\n\n    opens ru.viewer.expensesviewer to javafx.fxml;\n    exports ru.viewer.expensesviewer;\n\n    opens ru.viewer.expensesviewer.model to javafx.fxml;\n    exports ru.viewer.expensesviewer.model;\n\n    opens ru.viewer.expensesviewer.controller to javafx.fxml;\n    exports ru.viewer.expensesviewer.controller;\n\n    exports ru.viewer.expensesviewer.model.objects;\n    opens ru.viewer.expensesviewer.model.objects to javafx.fxml;\n\n    exports ru.viewer.expensesviewer.controller.settings;\n    opens ru.viewer.expensesviewer.controller.settings to javafx.fxml;\n\n    exports ru.viewer.expensesviewer.controller.reports;\n    opens ru.viewer.expensesviewer.controller.reports to javafx.fxml;\n\n    exports ru.viewer.expensesviewer.model.objects.settings;\n    opens ru.viewer.expensesviewer.model.objects.settings to javafx.fxml;\n}\n</code></pre>\n<p>added after couple hours:\nI tried to add all possible modules, looks like this:</p>\n<pre class=\"lang-none prettyprint-override\"><code>jlink --no-header-files --no-man-pages --compress=2 --strip-debug --module-path libs;javafx/lib --add-modules java.base,java.compiler,java.datatransfer,java.desktop,java.instrument,java.logging,java.management,java.management.rmi,java.naming,java.net.http,java.prefs,java.rmi,java.scripting,java.se,java.security.jgss,java.security.sasl,java.smartcardio,java.sql,java.sql.rowset,java.transaction.xa,java.xml,java.xml.crypto,jdk.accessibility,jdk.attach,jdk.charsets,jdk.compiler,jdk.crypto.cryptoki,jdk.crypto.ec,jdk.crypto.mscapi,jdk.dynalink,jdk.editpad,jdk.hotspot.agent,jdk.httpserver,jdk.incubator.foreign,jdk.incubator.vector,jdk.internal.ed,jdk.internal.jvmstat,jdk.internal.le,jdk.internal.opt,jdk.internal.vm.ci,jdk.internal.vm.compiler,jdk.internal.vm.compiler.management,jdk.jartool,jdk.javadoc,jdk.jcmd,jdk.jconsole,jdk.jdeps,jdk.jdi,jdk.jdwp.agent,jdk.jfr,jdk.jlink,jdk.jpackage,jdk.jshell,jdk.jsobject,jdk.jstatd,jdk.localedata,jdk.management,jdk.management.agent,jdk.management.jfr,jdk.naming.dns,jdk.naming.rmi,jdk.net,jdk.nio.mapmode,jdk.random,jdk.sctp,jdk.security.auth,jdk.security.jgss,jdk.unsupported,jdk.unsupported.desktop,jdk.xml.dom,jdk.zipfs, --output java-runtime \n</code></pre>\n<p>AND IT WORKS! now I exactly know that I need to discover mandatory module.</p>\n<p>I managed find needed module with method &quot;shot in the dark&quot;, how only I added <code>jdk.crypto.cryptoki</code> my custom JRE started work. But why does my program need this module? I've never use this... something for security... how should I discover this dependence?</p>\n"},{"tags":["java","visual-studio-code","directory","project","working-directory"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1689028180,"post_id":76656349,"comment_id":135152561,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"score":0,"creation_date":1690769066,"post_id":76656349,"comment_id":135394503,"body_markdown":"May I know what&#39;s going on with the problem? If it has been solved, can you change the status of the answer to help more people with similar problems.","body":"May I know what&#39;s going on with the problem? If it has been solved, can you change the status of the answer to help more people with similar problems."}],"answers":[{"tags":[],"owner":{"account_id":15396644,"reputation":25735,"user_id":11107541,"display_name":"starball"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689022979,"creation_date":1689019183,"answer_id":76656959,"question_id":76656349,"body_markdown":"You can temporarily edit the workspace settings&#39; `search.exclude` setting to exclude paths from search functionality. It&#39;s not an ideal solution especially if you track the workspace settings in version control, but it&#39;s a workaround. If you want to &quot;ignore&quot; things at a deeper level, use the `files.exclude` setting.\r\n\r\nUnfortunately, `files.exclude` does not seem to affect the SCM View. You can right click repositories there and select &quot;close repository&quot; and then later reopen then using the `Git: Open Repository` or `Git: Reopen Closed Repositories` commands in the command palette.\r\n\r\nIf you&#39;re using the Search View, you can expand the search details and edit the &quot;files to include&quot; and &quot;files to exclude&quot; fields, which take comma-separated lists of glob patterns.","title":"How to &quot;close&quot;/&quot;disable&quot; root folder temporarily without removing it from workspace in VS Code?","body":"<p>You can temporarily edit the workspace settings' <code>search.exclude</code> setting to exclude paths from search functionality. It's not an ideal solution especially if you track the workspace settings in version control, but it's a workaround. If you want to &quot;ignore&quot; things at a deeper level, use the <code>files.exclude</code> setting.</p>\n<p>Unfortunately, <code>files.exclude</code> does not seem to affect the SCM View. You can right click repositories there and select &quot;close repository&quot; and then later reopen then using the <code>Git: Open Repository</code> or <code>Git: Reopen Closed Repositories</code> commands in the command palette.</p>\n<p>If you're using the Search View, you can expand the search details and edit the &quot;files to include&quot; and &quot;files to exclude&quot; fields, which take comma-separated lists of glob patterns.</p>\n"}],"owner":{"account_id":28989193,"reputation":1,"user_id":22205373,"display_name":"Jocular"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1689022979,"creation_date":1689013280,"question_id":76656349,"body_markdown":"Do you guys know the way to disable certain folders temporarily (to exclude them from searches, only see the git repo linked to open folder, only run Java build task with open folder etc.), but without removing it from workspace and still show up on the list of folders, so it can easily be re-enabled.\r\n\r\nIf you have the similar situation and no good solution, please upvote the feature request at:\r\nhttps://github.com/microsoft/vscode/issues/182803\r\n\r\n\r\nOnly way for now is to remove the folder from VScode completely. ","title":"How to &quot;close&quot;/&quot;disable&quot; root folder temporarily without removing it from workspace in VS Code?","body":"<p>Do you guys know the way to disable certain folders temporarily (to exclude them from searches, only see the git repo linked to open folder, only run Java build task with open folder etc.), but without removing it from workspace and still show up on the list of folders, so it can easily be re-enabled.</p>\n<p>If you have the similar situation and no good solution, please upvote the feature request at:\n<a href=\"https://github.com/microsoft/vscode/issues/182803\" rel=\"nofollow noreferrer\">https://github.com/microsoft/vscode/issues/182803</a></p>\n<p>Only way for now is to remove the folder from VScode completely.</p>\n"},{"tags":["java","spring","spring-boot","mybatis","pojo"],"comments":[{"owner":{"account_id":2994830,"reputation":1,"user_id":2541560,"display_name":"Kayaman"},"score":1,"creation_date":1605626128,"post_id":64877868,"comment_id":114704541,"body_markdown":"That&#39;s not a problem, that&#39;s a warning. You&#39;re saying you don&#39;t want to suppress the warning, and you don&#39;t want to change the code to make the warning disappear. I guess your only option is to ignore the warning with your mind then?","body":"That&#39;s not a problem, that&#39;s a warning. You&#39;re saying you don&#39;t want to suppress the warning, and you don&#39;t want to change the code to make the warning disappear. I guess your only option is to ignore the warning with your mind then?"}],"answers":[{"tags":[],"owner":{"account_id":15216511,"reputation":61,"user_id":10979744,"display_name":"Doron Cohen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1605630360,"creation_date":1605630360,"answer_id":64879238,"question_id":64877868,"body_markdown":"**javac** will not complain on this.\r\n```\r\njavac -cp *.jar com/example/mssqlserver/model/NameModel.java\r\n```\r\n\r\nSo it is likely be the IDE being used.\r\nIt may have a configuration Errors/Warnings option for this specific case.\r\nUnfortunately couldn&#39;t find such an option in my Eclipse IDE - though I remember there was one - so  cannot point the exact option.\r\n\r\nA related question: https://stackoverflow.com/questions/19732929/why-no-field-is-never-assigned-warning-with-mock","title":"How to avoid &#39;Private field is never assigned&#39; which is caused by using MyBatis and Immutable POJO?","body":"<p><strong>javac</strong> will not complain on this.</p>\n<pre><code>javac -cp *.jar com/example/mssqlserver/model/NameModel.java\n</code></pre>\n<p>So it is likely be the IDE being used.\nIt may have a configuration Errors/Warnings option for this specific case.\nUnfortunately couldn't find such an option in my Eclipse IDE - though I remember there was one - so  cannot point the exact option.</p>\n<p>A related question: <a href=\"https://stackoverflow.com/questions/19732929/why-no-field-is-never-assigned-warning-with-mock\">Why no &quot;field is never assigned&quot; warning with @Mock</a></p>\n"},{"tags":[],"owner":{"account_id":22236819,"reputation":21,"user_id":16472018,"display_name":"Jati Srono"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689014965,"creation_date":1626670287,"answer_id":68435243,"question_id":64877868,"body_markdown":"the first is like this\r\n\r\n```java\r\npublic class MainActivity extends AppCompatActivity {\r\n    private PDFView pdfView;\r\n\r\n    public MainActivity(PDFView pdfView) {\r\n        this.pdfView = pdfView;\r\n    }\r\n}\r\n```\r\n\r\nand I edit like this\r\n\r\n```\r\npublic class MainActivity extends AppCompatActivity {\r\n    private final PDFView pdfView;\r\n\r\n    public MainActivity(PDFView pdfView) {\r\n        this.pdfView = pdfView;\r\n    }\r\n}\r\n```\r\n\r\nand the problem solved. thanks","title":"How to avoid &#39;Private field is never assigned&#39; which is caused by using MyBatis and Immutable POJO?","body":"<p>the first is like this</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MainActivity extends AppCompatActivity {\n    private PDFView pdfView;\n\n    public MainActivity(PDFView pdfView) {\n        this.pdfView = pdfView;\n    }\n}\n</code></pre>\n<p>and I edit like this</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n    private final PDFView pdfView;\n\n    public MainActivity(PDFView pdfView) {\n        this.pdfView = pdfView;\n    }\n}\n</code></pre>\n<p>and the problem solved. thanks</p>\n"},{"tags":[],"owner":{"account_id":28969902,"reputation":61,"user_id":22190461,"display_name":"Guillem Chesa"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689022757,"creation_date":1689022757,"answer_id":76657311,"question_id":64877868,"body_markdown":"This is normally an IDE warning, you can change the settings from the IDE to not receive this kind of warnings without tweaking your code. I don&#39;t know what IDE are you using but I think it might be IntelliJ. In that case, you can do the following:\r\n\r\nGo to File &gt; Settings &gt; Editor &gt; Inspections &gt; Java &gt; Declaration Redundancy &gt; Unused declaration. And there, you can choose which elements you want to get this warning, on which privacy scope and you can even change the type of warning to a soft warning or just disable it.\r\n\r\nIn other IDEs there might be a similar option.","title":"How to avoid &#39;Private field is never assigned&#39; which is caused by using MyBatis and Immutable POJO?","body":"<p>This is normally an IDE warning, you can change the settings from the IDE to not receive this kind of warnings without tweaking your code. I don't know what IDE are you using but I think it might be IntelliJ. In that case, you can do the following:</p>\n<p>Go to File &gt; Settings &gt; Editor &gt; Inspections &gt; Java &gt; Declaration Redundancy &gt; Unused declaration. And there, you can choose which elements you want to get this warning, on which privacy scope and you can even change the type of warning to a soft warning or just disable it.</p>\n<p>In other IDEs there might be a similar option.</p>\n"}],"owner":{"account_id":18250480,"reputation":1681,"user_id":13285583,"display_name":"Jason Rich Darmawan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2797,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1689022757,"creation_date":1605625645,"question_id":64877868,"body_markdown":"my goal is to avoid problem &#39;Private field is never assigned&#39; without using @SupressWarnings or creating a defined constructor.\r\n\r\nI am aware using annotation will lead to technical debt for the long run. However, I can&#39;t not justify the Java verbosity (although I love it at times when debugging a bug), this code is easier to read.\r\n\r\nMethod that I do not wish to use:\r\n1. `SupressWarnings(&quot;unused&quot;)` written above the class statement.\r\n2. Creating a defined constructor which is not necessary since MyBatis can modify the object attribute regardless there is a setters or not for example when you use `@SelectKey`.\r\n3. Creating a setter which will never be used.\r\n\r\nThis is the sample code for the model I am going to standardize for MyBatis.\r\n\r\nmodel/NameModel.java\r\n```\r\npackage com.example.mssqlserver.model;\r\n\r\nimport com.fasterxml.jackson.annotation.JsonInclude;\r\n\r\n@SuppressWarnings(&quot;unused&quot;) // MyBatis does not need a defined constructor nor a setters.\r\n@JsonInclude(JsonInclude.Include.NON_NULL) // filter: only non_null, alternative: spring.jackson.default-property-inclusion=NON_NULL in application.properties\r\npublic class NameModel {\r\n  private Integer id;\r\n  private String name;\r\n  private String newid;\r\n\r\n  public Integer getId() {\r\n    return id;\r\n  }\r\n\r\n  public String getName() {\r\n    return name;\r\n  }\r\n\r\n  public String getNewid() {\r\n    return newid;\r\n  }\r\n\r\n  public boolean requestIsValid() {\r\n    return !this.name.isEmpty();\r\n  }\r\n}\r\n```","title":"How to avoid &#39;Private field is never assigned&#39; which is caused by using MyBatis and Immutable POJO?","body":"<p>my goal is to avoid problem 'Private field is never assigned' without using @SupressWarnings or creating a defined constructor.</p>\n<p>I am aware using annotation will lead to technical debt for the long run. However, I can't not justify the Java verbosity (although I love it at times when debugging a bug), this code is easier to read.</p>\n<p>Method that I do not wish to use:</p>\n<ol>\n<li><code>SupressWarnings(&quot;unused&quot;)</code> written above the class statement.</li>\n<li>Creating a defined constructor which is not necessary since MyBatis can modify the object attribute regardless there is a setters or not for example when you use <code>@SelectKey</code>.</li>\n<li>Creating a setter which will never be used.</li>\n</ol>\n<p>This is the sample code for the model I am going to standardize for MyBatis.</p>\n<p>model/NameModel.java</p>\n<pre><code>package com.example.mssqlserver.model;\n\nimport com.fasterxml.jackson.annotation.JsonInclude;\n\n@SuppressWarnings(&quot;unused&quot;) // MyBatis does not need a defined constructor nor a setters.\n@JsonInclude(JsonInclude.Include.NON_NULL) // filter: only non_null, alternative: spring.jackson.default-property-inclusion=NON_NULL in application.properties\npublic class NameModel {\n  private Integer id;\n  private String name;\n  private String newid;\n\n  public Integer getId() {\n    return id;\n  }\n\n  public String getName() {\n    return name;\n  }\n\n  public String getNewid() {\n    return newid;\n  }\n\n  public boolean requestIsValid() {\n    return !this.name.isEmpty();\n  }\n}\n</code></pre>\n"},{"tags":["java","optaplanner","timefold"],"answers":[{"tags":[],"owner":{"account_id":9133364,"reputation":4450,"user_id":6794063,"display_name":"Luk&#225;š Petrovick&#253;"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689022650,"creation_date":1689022650,"answer_id":76657305,"question_id":76637503,"body_markdown":"Initializing score trend isn&#39;t really related to over-constrained planning. The only thing that matters for the trend is the score. \r\n\r\nThere is no way for me to answer your question in a specific manner - I do not have insight on your scoring function. That said, if you say that hard score is *always* zero and therefore only the medium score matters, I&#39;d argue you have to use `InitializingScoreTrend.ANY` (the default). \r\n\r\nHowever, I question what would such a scoring function be for. Why even have a hard score, if it&#39;s always zero? (And if it&#39;s sometimes not zero, than hard score is the key factor for the trend, not the medium score.)\r\n\r\nEven if I disregard that aspect, I would be very curious about the reasons why you&#39;re worried about `InitializingScoreTrend` at all. Yes, it can bring some performance benefits, but if you&#39;re running into such large construction heuristics performance issues, you&#39;d be better off writing a custom initializer anyway.","title":"Timefold Over Constrained Planning Initializing Score Trend","body":"<p>Initializing score trend isn't really related to over-constrained planning. The only thing that matters for the trend is the score.</p>\n<p>There is no way for me to answer your question in a specific manner - I do not have insight on your scoring function. That said, if you say that hard score is <em>always</em> zero and therefore only the medium score matters, I'd argue you have to use <code>InitializingScoreTrend.ANY</code> (the default).</p>\n<p>However, I question what would such a scoring function be for. Why even have a hard score, if it's always zero? (And if it's sometimes not zero, than hard score is the key factor for the trend, not the medium score.)</p>\n<p>Even if I disregard that aspect, I would be very curious about the reasons why you're worried about <code>InitializingScoreTrend</code> at all. Yes, it can bring some performance benefits, but if you're running into such large construction heuristics performance issues, you'd be better off writing a custom initializer anyway.</p>\n"}],"owner":{"account_id":3689370,"reputation":2805,"user_id":3072366,"accept_rate":59,"display_name":"Pezetter"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":113,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76657305,"answer_count":1,"score":0,"last_activity_date":1689022650,"creation_date":1688737179,"question_id":76637503,"body_markdown":"I have a single entity and a sing planning value. The planning value is nullable. Hard/Medium/Soft score configuration.\r\n\r\nAll of the constraints are penalties/negative.\r\n\r\nI&#39;m trying to figure out if InitializingScoreTrend is applicable to over-constrained planning, and if it is, how I should configure it.\r\n\r\nUpon startSolving, the Medium score will be very negative, hard score is 0, soft score is 0. As values are assigned, the medium score will move closer to 0. The soft score will generally move more negative, but can fluctuate. If one value is assigned, and another gets assigned, the soft score can move closer to zero. ","title":"Timefold Over Constrained Planning Initializing Score Trend","body":"<p>I have a single entity and a sing planning value. The planning value is nullable. Hard/Medium/Soft score configuration.</p>\n<p>All of the constraints are penalties/negative.</p>\n<p>I'm trying to figure out if InitializingScoreTrend is applicable to over-constrained planning, and if it is, how I should configure it.</p>\n<p>Upon startSolving, the Medium score will be very negative, hard score is 0, soft score is 0. As values are assigned, the medium score will move closer to 0. The soft score will generally move more negative, but can fluctuate. If one value is assigned, and another gets assigned, the soft score can move closer to zero.</p>\n"},{"tags":["java","android","android-studio","ionic-framework","capacitor"],"comments":[{"owner":{"account_id":10388625,"reputation":761,"user_id":7660727,"display_name":"Mohammad Atif Aftab"},"score":0,"creation_date":1698226062,"post_id":76572367,"comment_id":136377120,"body_markdown":"have you find solution to it ?","body":"have you find solution to it ?"}],"answers":[{"tags":[],"owner":{"account_id":241336,"reputation":10223,"user_id":512089,"accept_rate":66,"display_name":"Bas van Dijk"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689022261,"creation_date":1689015159,"answer_id":76656545,"question_id":76572367,"body_markdown":"For me it worked to change the `targetSDK` and `compileSDK` to 33. Of course you also need to have Android SDK 33 (TIRAMISU) installed\r\n\r\n[![enter image description here][1]][1]\r\n\r\n  [1]: https://i.stack.imgur.com/JqAPB.png","title":"Trouble with dependencies in Android project within Android Studio","body":"<p>For me it worked to change the <code>targetSDK</code> and <code>compileSDK</code> to 33. Of course you also need to have Android SDK 33 (TIRAMISU) installed</p>\n<p><a href=\"https://i.stack.imgur.com/JqAPB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JqAPB.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":8699696,"reputation":628,"user_id":6510020,"accept_rate":56,"display_name":"Jimy Weiss"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":258,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689022261,"creation_date":1687948719,"question_id":76572367,"body_markdown":"After upgrading the capacitor version of my project to `5.0.5` I&#39;ve got two problems with the `InternalUtils.Java` Class:\r\n\r\n    public static PackageInfo getPackageInfo(PackageManager pm, String packageName, long flags)\r\n        throws PackageManager.NameNotFoundException {\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.TIRAMISU) {\r\n            return pm.getPackageInfo(packageName, PackageManager.PackageInfoFlags.of(flags));\r\n        } else {\r\n            return getPackageInfoLegacy(pm, packageName, (int) flags);\r\n        }\r\n    }\r\n\r\n&gt; Cannot resolve symbol &#39;TIRAMISU&#39;\r\n\r\n&gt; Cannot resolve symbol &#39;PackageInfoFlags&#39;\r\n\r\nThe version of compileSdkVersion and targetSdkVersion in `build.gradle` both is `33`\r\n\r\n    android {\r\n    namespace &quot;com.getcapacitor.android&quot;\r\n    compileSdkVersion project.hasProperty(&#39;compileSdkVersion&#39;) ? rootProject.ext.compileSdkVersion : 33\r\n    defaultConfig {\r\n        minSdkVersion project.hasProperty(&#39;minSdkVersion&#39;) ? rootProject.ext.minSdkVersion : 22\r\n        targetSdkVersion project.hasProperty(&#39;targetSdkVersion&#39;) ? rootProject.ext.targetSdkVersion : 33\r\n        versionCode 1\r\n        versionName &quot;1.0&quot;\r\n        consumerProguardFiles &#39;proguard-rules.pro&#39;\r\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n    }\r\n\t...}\r\n\r\nI did update also my Android Studio to the latest version and grandle to `8.0.2`.\r\n\r\nDoes anyone know the problem or can help me solve it?\r\n\r\nBtw. actually I can build the project, but i still see this error in Android Studio.\r\n\r\nHere also the version of Java `17.x.x`:\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/G6oXt.png","title":"Trouble with dependencies in Android project within Android Studio","body":"<p>After upgrading the capacitor version of my project to <code>5.0.5</code> I've got two problems with the <code>InternalUtils.Java</code> Class:</p>\n<pre><code>public static PackageInfo getPackageInfo(PackageManager pm, String packageName, long flags)\n    throws PackageManager.NameNotFoundException {\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.TIRAMISU) {\n        return pm.getPackageInfo(packageName, PackageManager.PackageInfoFlags.of(flags));\n    } else {\n        return getPackageInfoLegacy(pm, packageName, (int) flags);\n    }\n}\n</code></pre>\n<blockquote>\n<p>Cannot resolve symbol 'TIRAMISU'</p>\n</blockquote>\n<blockquote>\n<p>Cannot resolve symbol 'PackageInfoFlags'</p>\n</blockquote>\n<p>The version of compileSdkVersion and targetSdkVersion in <code>build.gradle</code> both is <code>33</code></p>\n<pre><code>android {\nnamespace &quot;com.getcapacitor.android&quot;\ncompileSdkVersion project.hasProperty('compileSdkVersion') ? rootProject.ext.compileSdkVersion : 33\ndefaultConfig {\n    minSdkVersion project.hasProperty('minSdkVersion') ? rootProject.ext.minSdkVersion : 22\n    targetSdkVersion project.hasProperty('targetSdkVersion') ? rootProject.ext.targetSdkVersion : 33\n    versionCode 1\n    versionName &quot;1.0&quot;\n    consumerProguardFiles 'proguard-rules.pro'\n    testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n}\n...}\n</code></pre>\n<p>I did update also my Android Studio to the latest version and grandle to <code>8.0.2</code>.</p>\n<p>Does anyone know the problem or can help me solve it?</p>\n<p>Btw. actually I can build the project, but i still see this error in Android Studio.</p>\n<p>Here also the version of Java <code>17.x.x</code>:\n<a href=\"https://i.stack.imgur.com/G6oXt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/G6oXt.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","string"],"comments":[{"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"score":0,"creation_date":1689020380,"post_id":76657043,"comment_id":135151533,"body_markdown":"Are you going to handle annotation manually via Reflection? In such case If yes, then all the power is available to you and you can get all annotation both from same method and its class","body":"Are you going to handle annotation manually via Reflection? In such case If yes, then all the power is available to you and you can get all annotation both from same method and its class"}],"answers":[{"tags":[],"owner":{"account_id":25926563,"reputation":119,"user_id":19648355,"display_name":"Irremediable"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689021947,"creation_date":1689021947,"answer_id":76657231,"question_id":76657043,"body_markdown":"Annotations is just for metadata purpose, so you can&#39;t assign work to it. If you wish you can use it as marker for search in the Spring context:\r\n\r\n    \r\n        @Autowired\r\n        private ApplicationContext applicationContext;\r\n        ...\r\n        ...\r\n        \r\n    var beanNames = applicationContext.getBeanNamesForAnnotation(ToTake.class);\r\n    for(String beanName : beanNames) {\r\n      Object bean = applicationContext.getBean(beanName);\r\n      Class&lt;?&gt; clazz = bean.getClass();\r\n\r\n      if(clazz.isAnnotationPresent(RestController.class)) {\r\n        RestController annotation = clazz.getAnnotation(RestController.class);\r\n        System.out.println(annotation.value());\r\n      }\r\n\r\n      for(Method method : clazz.getMethods()) {\r\n        if(method.isAnnotationPresent(PutMapping.class)) {\r\n          PutMapping annotation = method.getAnnotation(PutMapping.class);\r\n          System.out.println(annotation.value());\r\n        }\r\n      }\r\n    }\r\n  \r\nYou should note that `applicationContext.getBean(beanName);` will trigger resolving bean according its scope and proxy mode.\r\n\r\n You&#39;re also able to use any classpath scanning libs for searching for annotation at runtime, or to use list of classes known at compile time ","title":"Annotation to get value of another annotation","body":"<p>Annotations is just for metadata purpose, so you can't assign work to it. If you wish you can use it as marker for search in the Spring context:</p>\n<pre><code>    @Autowired\n    private ApplicationContext applicationContext;\n    ...\n    ...\n    \nvar beanNames = applicationContext.getBeanNamesForAnnotation(ToTake.class);\nfor(String beanName : beanNames) {\n  Object bean = applicationContext.getBean(beanName);\n  Class&lt;?&gt; clazz = bean.getClass();\n\n  if(clazz.isAnnotationPresent(RestController.class)) {\n    RestController annotation = clazz.getAnnotation(RestController.class);\n    System.out.println(annotation.value());\n  }\n\n  for(Method method : clazz.getMethods()) {\n    if(method.isAnnotationPresent(PutMapping.class)) {\n      PutMapping annotation = method.getAnnotation(PutMapping.class);\n      System.out.println(annotation.value());\n    }\n  }\n}\n</code></pre>\n<p>You should note that <code>applicationContext.getBean(beanName);</code> will trigger resolving bean according its scope and proxy mode.</p>\n<p>You're also able to use any classpath scanning libs for searching for annotation at runtime, or to use list of classes known at compile time</p>\n"}],"owner":{"account_id":1103468,"reputation":5324,"user_id":1095362,"accept_rate":43,"display_name":"robert trudel"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689021947,"creation_date":1689020047,"question_id":76657043,"body_markdown":"In spring boot 3 I have many controller\r\n\r\n    @RestController\r\n    @RequestMapping(value = &quot;/queries&quot;)\r\n    @RequiredArgsConstructor\r\n    public class QueriesController {\r\n    \r\n     @ToTake\r\n     @PutMapping(&quot;/{id}&quot;)\r\n     ....\r\n    \r\n    }\r\n\r\nIf i create annotation to take, is it possible to get value of the RequestMapping and PutMapping annotation?\r\n\r\n","title":"Annotation to get value of another annotation","body":"<p>In spring boot 3 I have many controller</p>\n<pre><code>@RestController\n@RequestMapping(value = &quot;/queries&quot;)\n@RequiredArgsConstructor\npublic class QueriesController {\n\n @ToTake\n @PutMapping(&quot;/{id}&quot;)\n ....\n\n}\n</code></pre>\n<p>If i create annotation to take, is it possible to get value of the RequestMapping and PutMapping annotation?</p>\n"},{"tags":["java","bufferedimage"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689019475,"post_id":76656811,"comment_id":135151382,"body_markdown":"Make sure that the layout manager sizes it so it&#39;s visible","body":"Make sure that the layout manager sizes it so it&#39;s visible"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689020780,"post_id":76656811,"comment_id":135151587,"body_markdown":"Also, there might be unintentional transparency, so do `img.setRGB(i, j, 0xFF000000 | rnd.nextInt(16777216));\n`","body":"Also, there might be unintentional transparency, so do <code>img.setRGB(i, j, 0xFF000000 | rnd.nextInt(16777216)); </code>"},{"owner":{"account_id":28989587,"reputation":3,"user_id":22205665,"display_name":"King Bipo"},"score":0,"creation_date":1689021142,"post_id":76656811,"comment_id":135151634,"body_markdown":"Thank you apparently there was some sort of unintentional transparency now it works.","body":"Thank you apparently there was some sort of unintentional transparency now it works."},{"owner":{"account_id":2396133,"reputation":2128,"user_id":2638227,"display_name":"Mustafa &#214;z&#231;etin"},"score":0,"creation_date":1689021352,"post_id":76656811,"comment_id":135151679,"body_markdown":"@g00se You may want to write your solution as an answer so that the OP will mark it as the accepted answer.","body":"@g00se You may want to write your solution as an answer so that the OP will mark it as the accepted answer."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689021583,"post_id":76656811,"comment_id":135151711,"body_markdown":"@Mustafa&#214;z&#231;etin thanks","body":"@Mustafa&#214;z&#231;etin thanks"}],"answers":[{"tags":[],"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689021532,"creation_date":1689021532,"answer_id":76657189,"question_id":76656811,"body_markdown":"`BufferedImage.setRGB` actually works with ARGB, so there might be unintentional transparency, so do\r\n```\r\nimg.setRGB(i, j, 0xFF000000 | rnd.nextInt(16777216)); \r\n```","title":"Why is my newly generated BufferedImage not drawn on my JPanel?","body":"<p><code>BufferedImage.setRGB</code> actually works with ARGB, so there might be unintentional transparency, so do</p>\n<pre><code>img.setRGB(i, j, 0xFF000000 | rnd.nextInt(16777216)); \n</code></pre>\n"}],"owner":{"account_id":28989587,"reputation":3,"user_id":22205665,"display_name":"King Bipo"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76657189,"answer_count":1,"score":0,"last_activity_date":1689021532,"creation_date":1689017849,"question_id":76656811,"body_markdown":"I am trying to display a newly generated `BufferedImage` on a `JPanel` but its not showing. Other components like Buttons or Rectangles can be displayed without problems, and I can&#39;t figure it out.\r\n\r\nThis is my code:\r\n```\r\npublic class panelsa extends JPanel{\r\n\tBufferedImage img;\r\n\t\r\n\tpublic panelsa(){\r\n\t\tsetPreferredSize(new Dimension(400,400));\r\n\t\tinitImg();\r\n\t}\r\n\r\n\tprivate void initImg()\r\n\t{\r\n\t\tRandom rnd = new Random();\r\n\t\timg = new BufferedImage(400, 400, BufferedImage.TYPE_INT_ARGB);\r\n\t\tfor (int i = 0; i &lt; img.getHeight(); i++){\r\n\t\t\tfor (int j = 0; j &lt; img.getWidth(); j++){\r\n\t\t\t\timg.setRGB(i, j, rnd.nextInt(16777216));\r\n\t\t\t}\r\n\t\t}\t\t\r\n\t}\r\n\r\n\t@Override\r\n\tprotected void paintComponent(Graphics aG){\r\n\t\tsuper.paintComponent(aG);\r\n\t\taG.drawImage(img, 0, 0, null);\r\n\t}\r\n}\r\n```\r\n","title":"Why is my newly generated BufferedImage not drawn on my JPanel?","body":"<p>I am trying to display a newly generated <code>BufferedImage</code> on a <code>JPanel</code> but its not showing. Other components like Buttons or Rectangles can be displayed without problems, and I can't figure it out.</p>\n<p>This is my code:</p>\n<pre><code>public class panelsa extends JPanel{\n    BufferedImage img;\n    \n    public panelsa(){\n        setPreferredSize(new Dimension(400,400));\n        initImg();\n    }\n\n    private void initImg()\n    {\n        Random rnd = new Random();\n        img = new BufferedImage(400, 400, BufferedImage.TYPE_INT_ARGB);\n        for (int i = 0; i &lt; img.getHeight(); i++){\n            for (int j = 0; j &lt; img.getWidth(); j++){\n                img.setRGB(i, j, rnd.nextInt(16777216));\n            }\n        }       \n    }\n\n    @Override\n    protected void paintComponent(Graphics aG){\n        super.paintComponent(aG);\n        aG.drawImage(img, 0, 0, null);\n    }\n}\n</code></pre>\n"},{"tags":["java","selenium-webdriver","bdd"],"comments":[{"owner":{"account_id":4723951,"reputation":191,"user_id":3821144,"accept_rate":86,"display_name":"Divakar Ragupathy"},"score":0,"creation_date":1689870119,"post_id":76657135,"comment_id":135277848,"body_markdown":"Can someone please help?","body":"Can someone please help?"}],"owner":{"account_id":4723951,"reputation":191,"user_id":3821144,"accept_rate":86,"display_name":"Divakar Ragupathy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689020905,"creation_date":1689020905,"question_id":76657135,"body_markdown":"I have a BDD Cucumber framework and 6 tests are in feature file. I want to execute 6 tests in 2 devices so that 3 test cases will be executed in each devices to reduce the overall run time by 50%\r\n\r\nHowever the current framework runs all 6 test cases in each devices i.e. runs 12 tests.\r\n\r\nHere is my testng.. Can you please help\r\n\r\n```&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;\r\n&lt;!DOCTYPE suite PUBLIC &quot;SYSTEM&quot; &quot;http://testng.org/testng-1.0.dtd&quot;&gt;\r\n&lt;suite name=&quot;Suite&quot; thread-count=&quot;2&quot; verbose=&quot;1&quot; parallel=&quot;tests&quot;&gt;\r\n    &lt;test name=&quot;emulator5554&quot;&gt;\r\n        &lt;parameter name=&quot;udid&quot; value=&quot;emulator-5554&quot;/&gt;\r\n        &lt;classes&gt;\r\n            &lt;class name=&quot;com.qa.runners.DeviceTestRunner&quot;/&gt;\r\n        &lt;/classes&gt;\r\n    &lt;/test&gt;\r\n    &lt;test name=&quot;emulator5558&quot;&gt;\r\n        &lt;parameter name=&quot;udid&quot; value=&quot;emulator-5558&quot;/&gt;\r\n        &lt;classes&gt;\r\n            &lt;class name=&quot;com.qa.runners.DeviceTestRunner&quot;/&gt;\r\n        &lt;/classes&gt;\r\n    &lt;/test&gt;\r\n&lt;/suite&gt;```","title":"How to run BDD Cucumber Mobile Test in parallel Thread","body":"<p>I have a BDD Cucumber framework and 6 tests are in feature file. I want to execute 6 tests in 2 devices so that 3 test cases will be executed in each devices to reduce the overall run time by 50%</p>\n<p>However the current framework runs all 6 test cases in each devices i.e. runs 12 tests.</p>\n<p>Here is my testng.. Can you please help</p>\n<pre><code>&lt;!DOCTYPE suite PUBLIC &quot;SYSTEM&quot; &quot;http://testng.org/testng-1.0.dtd&quot;&gt;\n&lt;suite name=&quot;Suite&quot; thread-count=&quot;2&quot; verbose=&quot;1&quot; parallel=&quot;tests&quot;&gt;\n    &lt;test name=&quot;emulator5554&quot;&gt;\n        &lt;parameter name=&quot;udid&quot; value=&quot;emulator-5554&quot;/&gt;\n        &lt;classes&gt;\n            &lt;class name=&quot;com.qa.runners.DeviceTestRunner&quot;/&gt;\n        &lt;/classes&gt;\n    &lt;/test&gt;\n    &lt;test name=&quot;emulator5558&quot;&gt;\n        &lt;parameter name=&quot;udid&quot; value=&quot;emulator-5558&quot;/&gt;\n        &lt;classes&gt;\n            &lt;class name=&quot;com.qa.runners.DeviceTestRunner&quot;/&gt;\n        &lt;/classes&gt;\n    &lt;/test&gt;\n&lt;/suite&gt;```\n</code></pre>\n"},{"tags":["java","android","android-recyclerview"],"owner":{"account_id":22324320,"reputation":13,"user_id":16546524,"display_name":"Osin94"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689019793,"creation_date":1689019793,"question_id":76657016,"body_markdown":"When I use scroll down the recycler view my data are showing as I plan but when recyleview goes to end and I am sliding back to top, the sum for the day are broken. I can&#39;t figure how my data could being as good as being slide down for the first time.\r\n\r\nHere is the code for the Adapter of the RecylerView:\r\n\r\n```\r\n\r\n   public class TimeOverallAdapter extends RecyclerView.Adapter&lt;TimeOverallAdapter.MyViewHolder&gt; {\r\n\r\n    private Context context;\r\n    private ArrayList&lt;TimeModel&gt; list;\r\n    int positionOfTheNextDay =0;\r\n    // I commented this 16:58 - 10.07.2023\r\n    int previousPosition = 0;\r\n\r\n    boolean flag = false;\r\n\r\n    public TimeOverallAdapter(Context context, ArrayList&lt;TimeModel&gt; list) {\r\n        this.context = context;\r\n        this.list = list;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public TimeOverallAdapter.MyViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\r\n        LayoutInflater layoutInflater = LayoutInflater.from(parent.getContext());\r\n        View inflate = layoutInflater.inflate(R.layout.adapter_user_time,parent,false);\r\n\r\n\r\n        return new MyViewHolder(inflate);\r\n    }\r\n\r\n    @Override\r\n    public void onBindViewHolder(@NonNull TimeOverallAdapter.MyViewHolder holder, int position) {\r\n\r\n        //Hiding the LinearLayout for last record of the day\r\n        holder.linearLayoutLastRecord.setVisibility(View.GONE);\r\n        //Hiding the LinearLayout for last record of the month\r\n        holder.linearLayoutSummingRecord.setVisibility(View.GONE);\r\n        //Getting date from getTimeAdded\r\n        Date date = list.get(position).getTimeAdded().toDate();\r\n\r\n        //Setting date\r\n        holder.date.setText(formattedDate(date));\r\n\r\n        //Setting lasting time of the current record in String\r\n        holder.hourInDay.setText(list.get(position).getTimeOverall());\r\n        holder.beginTime.setText(list.get(position).getTimeBegin());\r\n        holder.endTime.setText(list.get(position).getTimeEnd());\r\n\r\n\r\n        // Comparing days\r\n        if(list.size()&gt;=2&amp;&amp; position&lt;list.size()-1) {\r\n\r\n            // Comparing work with this format\r\n            SimpleDateFormat simpleDateFormat = new SimpleDateFormat(&quot;yyyyMMdd&quot;);\r\n            Date first = list.get(position).getTimeAdded().toDate();\r\n            Date second = list.get((position+1)).getTimeAdded().toDate();\r\n\r\n            if((simpleDateFormat.format(first).equals(simpleDateFormat.format(second))))\r\n            {\r\n               Log.i(&quot;THE SAME DAY&quot;,position+&quot;&quot;);\r\n            }\r\n\r\n            // 1 Comparing days, if the next day is different than current day, make summing\r\n            if(!(simpleDateFormat.format(first).equals(simpleDateFormat.format(second))))\r\n            {\r\n\r\n                Log.i(&quot;THE Other DAY&quot;,position+&quot;&quot;);\r\n\r\n                // Assigning the position of the next day.\r\n                positionOfTheNextDay = position + 1;\r\n\r\n\r\n                //Showhing the LinearLayout for last record of the day\r\n                holder.linearLayoutLastRecord.setVisibility(View.VISIBLE);\r\n                holder.linearLayoutLastRecord.setBackgroundColor(Color.GREEN);\r\n\r\n                Date date1 = list.get(position).getTimeAdded().toDate();\r\n                holder.dateLastRecord.setText(formattedDateWithNameDay(date1));\r\n\r\n                holder.dateLastRecord.setTextColor(Color.WHITE);\r\n                holder.hours_last_record.setText(&quot;H&quot;);\r\n                holder.hours_last_record.setTextColor(Color.WHITE);\r\n\r\n                /*if(flag)\r\n                {\r\n                    previousPosition = position;\r\n                    Log.i(&quot;TAG&quot;,previousPosition+&quot;&quot;);\r\n                }*/\r\n\r\n\r\n                // summing time in the last day\r\n                long sum = 0;\r\n                for(int i = previousPosition;i&lt;=position;i++)\r\n                {\r\n                    sum += list.get(i).getTimeOverallInLong();\r\n                }\r\n\r\n                previousPosition+= positionOfTheNextDay-previousPosition;\r\n\r\n                String formattedTimeToLastRecord = formattedTime(sum);\r\n                //sum=0;\r\n\r\n\r\n                holder.hoursInDayLastRecord.setText(formattedTimeToLastRecord);\r\n                holder.hoursInDayLastRecord.setTextColor(Color.WHITE);\r\n\r\n            }\r\n        }\r\n\r\n        //Month overall\r\n        if(position==(getItemCount()-1))\r\n        {\r\n\r\n            // Summing for all the record in ArrayList\r\n            long sum = 0;\r\n            for(TimeModel timeModel : list)\r\n            {\r\n                sum += timeModel.getTimeOverallInLong();\r\n            }\r\n\r\n            flag = true;\r\n\r\n            holder.linearLayoutSummingRecord.setVisibility(View.VISIBLE);\r\n            holder.linearLayoutSummingRecord.setBackgroundColor(Color.YELLOW);\r\n\r\n\r\n            // Formatting date to &quot;LIPIEC 2023&quot; and seting to last record\r\n            SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;LLLL yyyy&quot;, Locale.getDefault());\r\n            Date date1 = list.get(position).getTimeAdded().toDate();\r\n\r\n\r\n            holder.dateSumming.setText(dateFormat.format(date1));\r\n            holder.dateSumming.setTextColor(Color.BLACK);\r\n            holder.hoursSumming.setText(&quot;H&quot;);\r\n            holder.hoursSumming.setTextColor(Color.BLACK);\r\n\r\n\r\n            String formattedTimeToLastRecord = formattedTime(sum);\r\n\r\n\r\n            holder.hoursInMonthSumming.setText(formattedTimeToLastRecord);\r\n            holder.hoursInMonthSumming.setTextColor(Color.BLACK);\r\n\r\n            // Summing first record of the day for one day only\r\n\r\n            holder.linearLayoutLastRecord.setVisibility(View.VISIBLE);\r\n            holder.linearLayoutLastRecord.setBackgroundColor(Color.GREEN);\r\n\r\n            Date date2 = list.get(position).getTimeAdded().toDate();\r\n            holder.dateLastRecord.setText(formattedDateWithNameDay(date1));\r\n\r\n            holder.hoursInDayLastRecord.setText(list.get(position).getTimeOverall());\r\n\r\n            holder.dateLastRecord.setTextColor(Color.WHITE);\r\n            holder.hours_last_record.setText(&quot;H&quot;);\r\n            holder.hours_last_record.setTextColor(Color.WHITE);\r\n\r\n\r\n\r\n            // Checking if list size is more than 1 cous I need make a comparssion.\r\n            // Checking in if(position==(getItemCount()-1)) cous I need to make comparssion in the last record\r\n            if(list.size()&gt;1) {\r\n\r\n                //summing for the day\r\n                // Work with this format\r\n                SimpleDateFormat simpleDateFormat = new SimpleDateFormat(&quot;yyyyMMdd&quot;);\r\n\r\n                Date first = list.get(position).getTimeAdded().toDate();\r\n                Date second = list.get((position - 1)).getTimeAdded().toDate();\r\n\r\n\r\n                if ((simpleDateFormat.format(first).equals(simpleDateFormat.format(second)))) {\r\n\r\n\r\n                    holder.linearLayoutLastRecord.setBackgroundColor(Color.GREEN);\r\n                    holder.linearLayoutLastRecord.setVisibility(View.VISIBLE);\r\n\r\n                    Date date3 = list.get(position).getTimeAdded().toDate();\r\n                    holder.dateLastRecord.setText(formattedDateWithNameDay(date3));\r\n\r\n                    holder.dateLastRecord.setTextColor(Color.WHITE);\r\n                    holder.hours_last_record.setText(&quot;H&quot;);\r\n                    holder.hours_last_record.setTextColor(Color.WHITE);\r\n\r\n                }\r\n\r\n                // summing for the current day\r\n                long sum2 = 0;\r\n                for (int i = positionOfTheNextDay; i &lt; list.size(); i++) {\r\n                    sum2 += list.get(i).getTimeOverallInLong();\r\n\r\n                }\r\n\r\n                String formattedTimeToLastRecord2 = formattedTime(sum2);\r\n\r\n\r\n                holder.hoursInDayLastRecord.setText(formattedTimeToLastRecord2);\r\n                holder.hoursInDayLastRecord.setTextColor(Color.WHITE);\r\n\r\n                //previousPosition =4;\r\n\r\n            }\r\n            else {\r\n                holder.linearLayoutLastRecord.setBackgroundColor(Color.GREEN);\r\n                holder.linearLayoutLastRecord.setVisibility(View.VISIBLE);\r\n\r\n                Date date4 = list.get(position).getTimeAdded().toDate();\r\n                holder.dateLastRecord.setText(formattedDateWithNameDay(date1));\r\n\r\n                holder.dateLastRecord.setTextColor(Color.WHITE);\r\n                holder.hours_last_record.setText(&quot;H&quot;);\r\n                holder.hours_last_record.setTextColor(Color.WHITE);\r\n\r\n                long sum3 = 0;\r\n                for (int i = positionOfTheNextDay; i &lt; list.size(); i++) {\r\n                    sum3 += list.get(i).getTimeOverallInLong();\r\n\r\n                }\r\n\r\n                //previousPosition =4;\r\n\r\n                String formattedTimeToLastRecord2 = formattedTime(sum3);\r\n\r\n\r\n                holder.hoursInDayLastRecord.setText(formattedTimeToLastRecord2);\r\n                holder.hoursInDayLastRecord.setTextColor(Color.WHITE);\r\n\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n\r\n\r\n    private String formattedTime(long sum) {\r\n        long seconds = sum / 1000;\r\n        long minutes = seconds / 60;\r\n        long hours = minutes / 60;\r\n\r\n        seconds %= 60;\r\n        minutes %= 60;\r\n\r\n        String formattedTime = String.format(&quot;%02d:%02d:%02d&quot;, hours, minutes, seconds);\r\n        return formattedTime;\r\n    }\r\n\r\n    private String formattedDate(Date date)\r\n    {\r\n\r\n        SimpleDateFormat format = new SimpleDateFormat(&quot;dd/MM/yy&quot;,Locale.getDefault());\r\n\r\n        return format.format(date);\r\n    }\r\n\r\n    private String formattedDateWithNameDay(Date date)\r\n    {\r\n\r\n        SimpleDateFormat format = new SimpleDateFormat(&quot;EEEE dd/MM/yy&quot;,Locale.getDefault());\r\n\r\n        return format.format(date);\r\n    }\r\n    @Override\r\n    public int getItemCount() {\r\n        return list.size();\r\n    }\r\n\r\n    public class MyViewHolder extends RecyclerView.ViewHolder{\r\n        TextView date,beginTime, endTime,hourInDay,dateLastRecord,hoursInDayLastRecord,hours_last_record,dateSumming,hoursInMonthSumming,hoursSumming;\r\n        LinearLayout linearLayoutLastRecord,linearLayoutSummingRecord;\r\n\r\n    public  MyViewHolder (@NonNull View itemView) {\r\n        super(itemView);\r\n\r\n        date = itemView.findViewById(R.id.date);\r\n        beginTime = itemView.findViewById(R.id.startTime);\r\n        endTime = itemView.findViewById(R.id.endTime);\r\n        hourInDay = itemView.findViewById(R.id.hoursInDay);\r\n        dateLastRecord = itemView.findViewById(R.id.date_last_record);\r\n        hoursInDayLastRecord = itemView.findViewById(R.id.hoursInDay_last_record);\r\n        linearLayoutLastRecord = itemView.findViewById(R.id.linearLayout);\r\n        hours_last_record = itemView.findViewById(R.id.hours_last_record);\r\n\r\n        linearLayoutSummingRecord = itemView.findViewById(R.id.summinglinearLayout);\r\n        dateSumming = itemView.findViewById(R.id.date_summing);\r\n        hoursInMonthSumming = itemView.findViewById(R.id.hoursInDay_summing);\r\n        hoursSumming = itemView.findViewById(R.id.hours_summing);\r\n\r\n    }\r\n}\r\n\r\n}\r\n```\r\n\r\nand xml for the layout:\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;androidx.appcompat.widget.LinearLayoutCompat xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;wrap_content&quot;\r\n    android:padding=&quot;6dp&quot;\r\n    android:orientation=&quot;vertical&quot;\r\n    android:gravity=&quot;center_horizontal&quot;&gt;\r\n    &lt;LinearLayout\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        android:orientation=&quot;horizontal&quot;&gt;\r\n    &lt;TextView\r\n        android:id=&quot;@+id/date&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;22.05.2023 r&quot;\r\n        android:padding=&quot;10dp&quot;/&gt;\r\n    &lt;TextView\r\n        android:id=&quot;@+id/startTime&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;8 00&quot;\r\n        android:padding=&quot;10dp&quot;/&gt;\r\n    &lt;TextView\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;-&quot;\r\n        android:textSize=&quot;20sp&quot;/&gt;\r\n    &lt;TextView\r\n        android:id=&quot;@+id/endTime&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;16 00&quot;\r\n        android:padding=&quot;10dp&quot;/&gt;\r\n    &lt;TextView\r\n        android:id=&quot;@+id/hoursInDay&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot;8&quot;/&gt;\r\n    &lt;TextView\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:text=&quot; H&quot; /&gt;\r\n    &lt;/LinearLayout&gt;\r\n    &lt;LinearLayout\r\n        android:id=&quot;@+id/linearLayout&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:gravity=&quot;center&quot;&gt;\r\n        &lt;TextView\r\n            android:id=&quot;@+id/date_last_record&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:padding=&quot;10dp&quot;/&gt;\r\n        &lt;TextView\r\n            android:id=&quot;@+id/hoursInDay_last_record&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;/&gt;\r\n        &lt;TextView\r\n            android:id=&quot;@+id/hours_last_record&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot; /&gt;\r\n    &lt;/LinearLayout&gt;\r\n    &lt;LinearLayout\r\n        android:id=&quot;@+id/summinglinearLayout&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:gravity=&quot;center&quot;&gt;\r\n        &lt;TextView\r\n            android:id=&quot;@+id/date_summing&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:padding=&quot;10dp&quot;/&gt;\r\n        &lt;TextView\r\n            android:id=&quot;@+id/hoursInDay_summing&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;/&gt;\r\n        &lt;TextView\r\n            android:id=&quot;@+id/hours_summing&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot; /&gt;\r\n    &lt;/LinearLayout&gt;\r\n\r\n&lt;/androidx.appcompat.widget.LinearLayoutCompat&gt;\r\n```\r\n\r\nI try many things, as seting previousPosition to some values but seems to be random due to resolution of the screen.","title":"Problem withback sliding back on recyclerView","body":"<p>When I use scroll down the recycler view my data are showing as I plan but when recyleview goes to end and I am sliding back to top, the sum for the day are broken. I can't figure how my data could being as good as being slide down for the first time.</p>\n<p>Here is the code for the Adapter of the RecylerView:</p>\n<pre><code>\n   public class TimeOverallAdapter extends RecyclerView.Adapter&lt;TimeOverallAdapter.MyViewHolder&gt; {\n\n    private Context context;\n    private ArrayList&lt;TimeModel&gt; list;\n    int positionOfTheNextDay =0;\n    // I commented this 16:58 - 10.07.2023\n    int previousPosition = 0;\n\n    boolean flag = false;\n\n    public TimeOverallAdapter(Context context, ArrayList&lt;TimeModel&gt; list) {\n        this.context = context;\n        this.list = list;\n    }\n\n    @NonNull\n    @Override\n    public TimeOverallAdapter.MyViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n        LayoutInflater layoutInflater = LayoutInflater.from(parent.getContext());\n        View inflate = layoutInflater.inflate(R.layout.adapter_user_time,parent,false);\n\n\n        return new MyViewHolder(inflate);\n    }\n\n    @Override\n    public void onBindViewHolder(@NonNull TimeOverallAdapter.MyViewHolder holder, int position) {\n\n        //Hiding the LinearLayout for last record of the day\n        holder.linearLayoutLastRecord.setVisibility(View.GONE);\n        //Hiding the LinearLayout for last record of the month\n        holder.linearLayoutSummingRecord.setVisibility(View.GONE);\n        //Getting date from getTimeAdded\n        Date date = list.get(position).getTimeAdded().toDate();\n\n        //Setting date\n        holder.date.setText(formattedDate(date));\n\n        //Setting lasting time of the current record in String\n        holder.hourInDay.setText(list.get(position).getTimeOverall());\n        holder.beginTime.setText(list.get(position).getTimeBegin());\n        holder.endTime.setText(list.get(position).getTimeEnd());\n\n\n        // Comparing days\n        if(list.size()&gt;=2&amp;&amp; position&lt;list.size()-1) {\n\n            // Comparing work with this format\n            SimpleDateFormat simpleDateFormat = new SimpleDateFormat(&quot;yyyyMMdd&quot;);\n            Date first = list.get(position).getTimeAdded().toDate();\n            Date second = list.get((position+1)).getTimeAdded().toDate();\n\n            if((simpleDateFormat.format(first).equals(simpleDateFormat.format(second))))\n            {\n               Log.i(&quot;THE SAME DAY&quot;,position+&quot;&quot;);\n            }\n\n            // 1 Comparing days, if the next day is different than current day, make summing\n            if(!(simpleDateFormat.format(first).equals(simpleDateFormat.format(second))))\n            {\n\n                Log.i(&quot;THE Other DAY&quot;,position+&quot;&quot;);\n\n                // Assigning the position of the next day.\n                positionOfTheNextDay = position + 1;\n\n\n                //Showhing the LinearLayout for last record of the day\n                holder.linearLayoutLastRecord.setVisibility(View.VISIBLE);\n                holder.linearLayoutLastRecord.setBackgroundColor(Color.GREEN);\n\n                Date date1 = list.get(position).getTimeAdded().toDate();\n                holder.dateLastRecord.setText(formattedDateWithNameDay(date1));\n\n                holder.dateLastRecord.setTextColor(Color.WHITE);\n                holder.hours_last_record.setText(&quot;H&quot;);\n                holder.hours_last_record.setTextColor(Color.WHITE);\n\n                /*if(flag)\n                {\n                    previousPosition = position;\n                    Log.i(&quot;TAG&quot;,previousPosition+&quot;&quot;);\n                }*/\n\n\n                // summing time in the last day\n                long sum = 0;\n                for(int i = previousPosition;i&lt;=position;i++)\n                {\n                    sum += list.get(i).getTimeOverallInLong();\n                }\n\n                previousPosition+= positionOfTheNextDay-previousPosition;\n\n                String formattedTimeToLastRecord = formattedTime(sum);\n                //sum=0;\n\n\n                holder.hoursInDayLastRecord.setText(formattedTimeToLastRecord);\n                holder.hoursInDayLastRecord.setTextColor(Color.WHITE);\n\n            }\n        }\n\n        //Month overall\n        if(position==(getItemCount()-1))\n        {\n\n            // Summing for all the record in ArrayList\n            long sum = 0;\n            for(TimeModel timeModel : list)\n            {\n                sum += timeModel.getTimeOverallInLong();\n            }\n\n            flag = true;\n\n            holder.linearLayoutSummingRecord.setVisibility(View.VISIBLE);\n            holder.linearLayoutSummingRecord.setBackgroundColor(Color.YELLOW);\n\n\n            // Formatting date to &quot;LIPIEC 2023&quot; and seting to last record\n            SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;LLLL yyyy&quot;, Locale.getDefault());\n            Date date1 = list.get(position).getTimeAdded().toDate();\n\n\n            holder.dateSumming.setText(dateFormat.format(date1));\n            holder.dateSumming.setTextColor(Color.BLACK);\n            holder.hoursSumming.setText(&quot;H&quot;);\n            holder.hoursSumming.setTextColor(Color.BLACK);\n\n\n            String formattedTimeToLastRecord = formattedTime(sum);\n\n\n            holder.hoursInMonthSumming.setText(formattedTimeToLastRecord);\n            holder.hoursInMonthSumming.setTextColor(Color.BLACK);\n\n            // Summing first record of the day for one day only\n\n            holder.linearLayoutLastRecord.setVisibility(View.VISIBLE);\n            holder.linearLayoutLastRecord.setBackgroundColor(Color.GREEN);\n\n            Date date2 = list.get(position).getTimeAdded().toDate();\n            holder.dateLastRecord.setText(formattedDateWithNameDay(date1));\n\n            holder.hoursInDayLastRecord.setText(list.get(position).getTimeOverall());\n\n            holder.dateLastRecord.setTextColor(Color.WHITE);\n            holder.hours_last_record.setText(&quot;H&quot;);\n            holder.hours_last_record.setTextColor(Color.WHITE);\n\n\n\n            // Checking if list size is more than 1 cous I need make a comparssion.\n            // Checking in if(position==(getItemCount()-1)) cous I need to make comparssion in the last record\n            if(list.size()&gt;1) {\n\n                //summing for the day\n                // Work with this format\n                SimpleDateFormat simpleDateFormat = new SimpleDateFormat(&quot;yyyyMMdd&quot;);\n\n                Date first = list.get(position).getTimeAdded().toDate();\n                Date second = list.get((position - 1)).getTimeAdded().toDate();\n\n\n                if ((simpleDateFormat.format(first).equals(simpleDateFormat.format(second)))) {\n\n\n                    holder.linearLayoutLastRecord.setBackgroundColor(Color.GREEN);\n                    holder.linearLayoutLastRecord.setVisibility(View.VISIBLE);\n\n                    Date date3 = list.get(position).getTimeAdded().toDate();\n                    holder.dateLastRecord.setText(formattedDateWithNameDay(date3));\n\n                    holder.dateLastRecord.setTextColor(Color.WHITE);\n                    holder.hours_last_record.setText(&quot;H&quot;);\n                    holder.hours_last_record.setTextColor(Color.WHITE);\n\n                }\n\n                // summing for the current day\n                long sum2 = 0;\n                for (int i = positionOfTheNextDay; i &lt; list.size(); i++) {\n                    sum2 += list.get(i).getTimeOverallInLong();\n\n                }\n\n                String formattedTimeToLastRecord2 = formattedTime(sum2);\n\n\n                holder.hoursInDayLastRecord.setText(formattedTimeToLastRecord2);\n                holder.hoursInDayLastRecord.setTextColor(Color.WHITE);\n\n                //previousPosition =4;\n\n            }\n            else {\n                holder.linearLayoutLastRecord.setBackgroundColor(Color.GREEN);\n                holder.linearLayoutLastRecord.setVisibility(View.VISIBLE);\n\n                Date date4 = list.get(position).getTimeAdded().toDate();\n                holder.dateLastRecord.setText(formattedDateWithNameDay(date1));\n\n                holder.dateLastRecord.setTextColor(Color.WHITE);\n                holder.hours_last_record.setText(&quot;H&quot;);\n                holder.hours_last_record.setTextColor(Color.WHITE);\n\n                long sum3 = 0;\n                for (int i = positionOfTheNextDay; i &lt; list.size(); i++) {\n                    sum3 += list.get(i).getTimeOverallInLong();\n\n                }\n\n                //previousPosition =4;\n\n                String formattedTimeToLastRecord2 = formattedTime(sum3);\n\n\n                holder.hoursInDayLastRecord.setText(formattedTimeToLastRecord2);\n                holder.hoursInDayLastRecord.setTextColor(Color.WHITE);\n\n            }\n\n        }\n    }\n\n\n\n    private String formattedTime(long sum) {\n        long seconds = sum / 1000;\n        long minutes = seconds / 60;\n        long hours = minutes / 60;\n\n        seconds %= 60;\n        minutes %= 60;\n\n        String formattedTime = String.format(&quot;%02d:%02d:%02d&quot;, hours, minutes, seconds);\n        return formattedTime;\n    }\n\n    private String formattedDate(Date date)\n    {\n\n        SimpleDateFormat format = new SimpleDateFormat(&quot;dd/MM/yy&quot;,Locale.getDefault());\n\n        return format.format(date);\n    }\n\n    private String formattedDateWithNameDay(Date date)\n    {\n\n        SimpleDateFormat format = new SimpleDateFormat(&quot;EEEE dd/MM/yy&quot;,Locale.getDefault());\n\n        return format.format(date);\n    }\n    @Override\n    public int getItemCount() {\n        return list.size();\n    }\n\n    public class MyViewHolder extends RecyclerView.ViewHolder{\n        TextView date,beginTime, endTime,hourInDay,dateLastRecord,hoursInDayLastRecord,hours_last_record,dateSumming,hoursInMonthSumming,hoursSumming;\n        LinearLayout linearLayoutLastRecord,linearLayoutSummingRecord;\n\n    public  MyViewHolder (@NonNull View itemView) {\n        super(itemView);\n\n        date = itemView.findViewById(R.id.date);\n        beginTime = itemView.findViewById(R.id.startTime);\n        endTime = itemView.findViewById(R.id.endTime);\n        hourInDay = itemView.findViewById(R.id.hoursInDay);\n        dateLastRecord = itemView.findViewById(R.id.date_last_record);\n        hoursInDayLastRecord = itemView.findViewById(R.id.hoursInDay_last_record);\n        linearLayoutLastRecord = itemView.findViewById(R.id.linearLayout);\n        hours_last_record = itemView.findViewById(R.id.hours_last_record);\n\n        linearLayoutSummingRecord = itemView.findViewById(R.id.summinglinearLayout);\n        dateSumming = itemView.findViewById(R.id.date_summing);\n        hoursInMonthSumming = itemView.findViewById(R.id.hoursInDay_summing);\n        hoursSumming = itemView.findViewById(R.id.hours_summing);\n\n    }\n}\n\n}\n</code></pre>\n<p>and xml for the layout:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.appcompat.widget.LinearLayoutCompat xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:padding=&quot;6dp&quot;\n    android:orientation=&quot;vertical&quot;\n    android:gravity=&quot;center_horizontal&quot;&gt;\n    &lt;LinearLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        android:orientation=&quot;horizontal&quot;&gt;\n    &lt;TextView\n        android:id=&quot;@+id/date&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;22.05.2023 r&quot;\n        android:padding=&quot;10dp&quot;/&gt;\n    &lt;TextView\n        android:id=&quot;@+id/startTime&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;8 00&quot;\n        android:padding=&quot;10dp&quot;/&gt;\n    &lt;TextView\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;-&quot;\n        android:textSize=&quot;20sp&quot;/&gt;\n    &lt;TextView\n        android:id=&quot;@+id/endTime&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;16 00&quot;\n        android:padding=&quot;10dp&quot;/&gt;\n    &lt;TextView\n        android:id=&quot;@+id/hoursInDay&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;8&quot;/&gt;\n    &lt;TextView\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot; H&quot; /&gt;\n    &lt;/LinearLayout&gt;\n    &lt;LinearLayout\n        android:id=&quot;@+id/linearLayout&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:gravity=&quot;center&quot;&gt;\n        &lt;TextView\n            android:id=&quot;@+id/date_last_record&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:padding=&quot;10dp&quot;/&gt;\n        &lt;TextView\n            android:id=&quot;@+id/hoursInDay_last_record&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;/&gt;\n        &lt;TextView\n            android:id=&quot;@+id/hours_last_record&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot; /&gt;\n    &lt;/LinearLayout&gt;\n    &lt;LinearLayout\n        android:id=&quot;@+id/summinglinearLayout&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:gravity=&quot;center&quot;&gt;\n        &lt;TextView\n            android:id=&quot;@+id/date_summing&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:padding=&quot;10dp&quot;/&gt;\n        &lt;TextView\n            android:id=&quot;@+id/hoursInDay_summing&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;/&gt;\n        &lt;TextView\n            android:id=&quot;@+id/hours_summing&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot; /&gt;\n    &lt;/LinearLayout&gt;\n\n&lt;/androidx.appcompat.widget.LinearLayoutCompat&gt;\n</code></pre>\n<p>I try many things, as seting previousPosition to some values but seems to be random due to resolution of the screen.</p>\n"},{"tags":["java","orm","nullpointerexception","hibernate-5.x"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1583243793,"post_id":60508788,"comment_id":107044875,"body_markdown":"Take a debugger and look whih value is null `types[i]` or `f`","body":"Take a debugger and look whih value is null <code>types[i]</code> or <code>f</code>"},{"owner":{"account_id":15404372,"reputation":781,"user_id":11112873,"display_name":"Johannes Hinkov"},"score":0,"creation_date":1583244081,"post_id":60508788,"comment_id":107045065,"body_markdown":"types[i] is null, because getDataType() from NullNode is returning always null","body":"types[i] is null, because getDataType() from NullNode is returning always null"},{"owner":{"account_id":2580719,"reputation":5582,"user_id":2237467,"accept_rate":60,"display_name":"Snackoverflow"},"score":0,"creation_date":1623909472,"post_id":60508788,"comment_id":120212262,"body_markdown":"Did you ever solve this?","body":"Did you ever solve this?"},{"owner":{"account_id":15404372,"reputation":781,"user_id":11112873,"display_name":"Johannes Hinkov"},"score":0,"creation_date":1624049427,"post_id":60508788,"comment_id":120260948,"body_markdown":"Sadly, no. I ended up removing null from the select statement and dealing differently with the result.","body":"Sadly, no. I ended up removing null from the select statement and dealing differently with the result."}],"answers":[{"tags":[],"owner":{"account_id":8034641,"reputation":123,"user_id":6058222,"display_name":"tscz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1629207306,"creation_date":1629207306,"answer_id":68818342,"question_id":60508788,"body_markdown":"Both the hql and jpql BNF specifications do not allow a NULL value directly for a column in the select clause (only in the update statement BNF I could find NULL as an allowed value).\r\n\r\nHowever, hibernate seems to support the null column if you specify the intended datatype, I successfully could use: \r\n```sql\r\nselect cast(null as string) from Employer\r\n```\r\n\r\nIn my case hibernate 5.4.32 was also pointing into this direction. I did not receive a NPE, rather then the following error:\r\n```\r\nCaused by: org.hibernate.QueryException: No data type for node: org.hibernate.hql.internal.ast.tree.NullNode \r\n \\-[NULL] NullNode: &#39;null&#39;\r\n [select null from com.example.demo.Employer]\r\n```\r\n\r\n","title":"NullpointerException with hql query in Hibernate NameGenerator","body":"<p>Both the hql and jpql BNF specifications do not allow a NULL value directly for a column in the select clause (only in the update statement BNF I could find NULL as an allowed value).</p>\n<p>However, hibernate seems to support the null column if you specify the intended datatype, I successfully could use:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>select cast(null as string) from Employer\n</code></pre>\n<p>In my case hibernate 5.4.32 was also pointing into this direction. I did not receive a NPE, rather then the following error:</p>\n<pre><code>Caused by: org.hibernate.QueryException: No data type for node: org.hibernate.hql.internal.ast.tree.NullNode \n \\-[NULL] NullNode: 'null'\n [select null from com.example.demo.Employer]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28989779,"reputation":21,"user_id":22205817,"display_name":"user22205817"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1689019768,"creation_date":1689019768,"answer_id":76657015,"question_id":60508788,"body_markdown":"In my case this was happening after I added a join to another entity to the query and didn&#39;t prefix all the field names in the select clause with an entity alias","title":"NullpointerException with hql query in Hibernate NameGenerator","body":"<p>In my case this was happening after I added a join to another entity to the query and didn't prefix all the field names in the select clause with an entity alias</p>\n"}],"owner":{"account_id":15404372,"reputation":781,"user_id":11112873,"display_name":"Johannes Hinkov"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3162,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":68818342,"answer_count":2,"score":6,"last_activity_date":1689019768,"creation_date":1583243656,"question_id":60508788,"body_markdown":"i have an issue with hql queries which contain a null in the select, for example:\r\n&quot;select firstname, lastname, null from Employer&quot;\r\n\r\nThe Nullpointer comes from:\r\n\r\n    Caused by: java.lang.NullPointerException\r\n\tat org.hibernate.hql.internal.NameGenerator.generateColumnNames(NameGenerator.java:27)\r\n\r\n\r\nSo the code in NameGenerator at that line:\r\n\r\n    public static String[][] generateColumnNames(Type[] types, SessionFactoryImplementor f) throws MappingException {\r\n\t\tString[][] columnNames = new String[types.length][];\r\n\t\tfor ( int i = 0; i &lt; types.length; i++ ) {\r\n\t\t\tint span = types[i].getColumnSpan( f );  // &lt;-- line 27\r\n\t\t\tcolumnNames[i] = new String[span];\r\n\t\t\tfor ( int j = 0; j &lt; span; j++ ) {\r\n\t\t\t\tcolumnNames[i][j] = NameGenerator.scalarName( i, j );\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn columnNames;\r\n\t}\r\n\r\nI narrowed it down to the new Class [NullNode][1] (added since Hibernate 5), which simply returns null for getType():\r\n\r\n    public class NullNode extends AbstractSelectExpression {\r\n\r\n\t   public Type getDataType() {\r\n\t\t   return null;\r\n\t   } \r\n     ....\r\n    }\r\n\r\n\r\nSo my question is.. is this a bug in hibernate or am i missusing hibernate at that place?\r\n\r\n\r\n  [1]: https://github.com/hibernate/hibernate-orm/blob/master/hibernate-core/src/main/java/org/hibernate/hql/internal/ast/tree/NullNode.java","title":"NullpointerException with hql query in Hibernate NameGenerator","body":"<p>i have an issue with hql queries which contain a null in the select, for example:\n\"select firstname, lastname, null from Employer\"</p>\n\n<p>The Nullpointer comes from:</p>\n\n<pre><code>Caused by: java.lang.NullPointerException\nat org.hibernate.hql.internal.NameGenerator.generateColumnNames(NameGenerator.java:27)\n</code></pre>\n\n<p>So the code in NameGenerator at that line:</p>\n\n<pre><code>public static String[][] generateColumnNames(Type[] types, SessionFactoryImplementor f) throws MappingException {\n    String[][] columnNames = new String[types.length][];\n    for ( int i = 0; i &lt; types.length; i++ ) {\n        int span = types[i].getColumnSpan( f );  // &lt;-- line 27\n        columnNames[i] = new String[span];\n        for ( int j = 0; j &lt; span; j++ ) {\n            columnNames[i][j] = NameGenerator.scalarName( i, j );\n        }\n    }\n    return columnNames;\n}\n</code></pre>\n\n<p>I narrowed it down to the new Class <a href=\"https://github.com/hibernate/hibernate-orm/blob/master/hibernate-core/src/main/java/org/hibernate/hql/internal/ast/tree/NullNode.java\" rel=\"noreferrer\">NullNode</a> (added since Hibernate 5), which simply returns null for getType():</p>\n\n<pre><code>public class NullNode extends AbstractSelectExpression {\n\n   public Type getDataType() {\n       return null;\n   } \n ....\n}\n</code></pre>\n\n<p>So my question is.. is this a bug in hibernate or am i missusing hibernate at that place?</p>\n"},{"tags":["java","spring","unit-testing","spock"],"answers":[{"tags":[],"owner":{"account_id":67966,"reputation":12546,"user_id":2145769,"accept_rate":67,"display_name":"Leonard Br&#252;nings"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689018743,"creation_date":1689018743,"answer_id":76656908,"question_id":76653458,"body_markdown":"Don&#39;t use `static` blocks, use testcontainers with [jdbc support][1] for a seamless integration.\r\n\r\n\r\n  [1]: https://java.testcontainers.org/modules/databases/jdbc/","title":"How to exclude class from being initialized in tests","body":"<p>Don't use <code>static</code> blocks, use testcontainers with <a href=\"https://java.testcontainers.org/modules/databases/jdbc/\" rel=\"nofollow noreferrer\">jdbc support</a> for a seamless integration.</p>\n"}],"owner":{"account_id":13945116,"reputation":199,"user_id":10070050,"display_name":"Dzak"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689018743,"creation_date":1688989918,"question_id":76653458,"body_markdown":"I&#39;m using mysql and elastic in my project. There are two base classes to set up docker needed for unit tests.\r\n\r\nTests classes structure\r\n```\r\n    BaseDBTest\r\n    - ExampleDBTest\r\n    -....\r\n    BaseElasticTest\r\n     - ExampleElasticTest\r\n     -.... \r\n```\r\n\r\nStatic blocks to configure containers that look like (elastic one is pretty much the same, just with different naming/docker image).\r\n```\r\n    static {\r\n        MYSQL_CONTAINER = createContainer() //set up params/passwords etc.\r\n        MYSQL_CONTAINER.start();\r\n    }\r\n```\r\nStatic blocks are needed because I have to use `@DynamicPropertySource` which requires static method. \r\n\r\nFor now elastic is no longer supported, though it might be, so I don&#39;t want to delete all elastic tests. \r\nInstead, I wonder whether it&#39;s possible not to initialize them. I know that I can use `@Ignore` to ignore tests, but the static block in `BaseElasticTest` would still be called. That causes some issues in CICD as sometimes it takes too long and fails build. \r\nI&#39;ve tried setting up different `@ActiveProfile` / `@IfProfileValue` / `@EnabledIf` etc. but even if tests are not run - the static method is still called. \r\n\r\nAny idea how to stop the initialization of any class that matches the name `..ElasticTest` or have custom annotation?","title":"How to exclude class from being initialized in tests","body":"<p>I'm using mysql and elastic in my project. There are two base classes to set up docker needed for unit tests.</p>\n<p>Tests classes structure</p>\n<pre><code>    BaseDBTest\n    - ExampleDBTest\n    -....\n    BaseElasticTest\n     - ExampleElasticTest\n     -.... \n</code></pre>\n<p>Static blocks to configure containers that look like (elastic one is pretty much the same, just with different naming/docker image).</p>\n<pre><code>    static {\n        MYSQL_CONTAINER = createContainer() //set up params/passwords etc.\n        MYSQL_CONTAINER.start();\n    }\n</code></pre>\n<p>Static blocks are needed because I have to use <code>@DynamicPropertySource</code> which requires static method.</p>\n<p>For now elastic is no longer supported, though it might be, so I don't want to delete all elastic tests.\nInstead, I wonder whether it's possible not to initialize them. I know that I can use <code>@Ignore</code> to ignore tests, but the static block in <code>BaseElasticTest</code> would still be called. That causes some issues in CICD as sometimes it takes too long and fails build.\nI've tried setting up different <code>@ActiveProfile</code> / <code>@IfProfileValue</code> / <code>@EnabledIf</code> etc. but even if tests are not run - the static method is still called.</p>\n<p>Any idea how to stop the initialization of any class that matches the name <code>..ElasticTest</code> or have custom annotation?</p>\n"},{"tags":["java","sql","apache-spark","apache-spark-sql","spark-java"],"comments":[{"owner":{"account_id":6740011,"reputation":46650,"user_id":5193536,"display_name":"nbk"},"score":0,"creation_date":1689019396,"post_id":76656862,"comment_id":135151360,"body_markdown":"how many columns are there, why not catch all of them and then take the arry and extract the data that you want, so sql isn&#39;t made for dynamics","body":"how many columns are there, why not catch all of them and then take the arry and extract the data that you want, so sql isn&#39;t made for dynamics"},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1689020024,"post_id":76656862,"comment_id":135151476,"body_markdown":"I agree with @nbk. This sounds like something that should be done in `Java` code. Read all the data from the table and store it in an object and use code `If-statements` or `streams` to extract data or do what you need.","body":"I agree with @nbk. This sounds like something that should be done in <code>Java</code> code. Read all the data from the table and store it in an object and use code <code>If-statements</code> or <code>streams</code> to extract data or do what you need."},{"owner":{"account_id":12182705,"reputation":10096,"user_id":8893686,"display_name":"Oli"},"score":0,"creation_date":1689189054,"post_id":76656862,"comment_id":135179826,"body_markdown":"What&#39;s the expected output? Your are saying &quot;also select the respective columns that are included in References&quot;. All rows of a dataframe always have the same columns though. Dataframes are basically tables. Therefore, for a given row, what should be done if the reference column does not contain a given column? Set it to null?","body":"What&#39;s the expected output? Your are saying &quot;also select the respective columns that are included in References&quot;. All rows of a dataframe always have the same columns though. Dataframes are basically tables. Therefore, for a given row, what should be done if the reference column does not contain a given column? Set it to null?"}],"owner":{"account_id":16917353,"reputation":117,"user_id":12235037,"display_name":"chingu"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689018300,"creation_date":1689018300,"question_id":76656862,"body_markdown":"I am using Spark SQL Java (Not scala or python). Here is a simplified example of my dataset (it has many more columns than this):\r\n\r\n| ID       | References     | E_id           | F_id | G_id\r\n| -------- | -------------- | -------------- | ------- | ---------- |\r\n| 0    |[E_id]            | 0000 | | \r\n| 1   | [E_id, F_id, G_id]            | 0010 | 1000 | 1111\r\n\r\nThere is a column called `References` which contains an array of column names that this row of data has. So the first row only has a `Ex_1` column and would not have the columns `Ex_2` or `Ex_3` while the second row has all 3 columns. For each row, I need to select relevant columns (Like `References` and `ID` which all rows of data have) and then also select the respective columns that are included in `References`.\r\n\r\nAt the moment, this is my code:\r\n```\r\nfinal Dataset&lt;Row&gt; partitionedDf = df.select(col(&quot;id&quot;), col(&quot;references));\r\n```\r\n\r\nI can&#39;t hardcode any of the `Ex_1, Ex_2...etc` columns into my select because the possible columns inside References are dynamic. I need to figure out a way to get References for each row and then select the columns inside References as well so it&#39;s all included in my Dataset&lt;Row&gt;. \r\n\r\n**One thing to note is that the columns inside reference do all follow a pattern (they all end with &quot;_id&quot;) so I&#39;m not sure if regex matching could be used here as well, rather than relying on what is inside the References array.** ","title":"Dynamically selecting column based on if that column exists in another column&#39;s value (Java Spark SQL)","body":"<p>I am using Spark SQL Java (Not scala or python). Here is a simplified example of my dataset (it has many more columns than this):</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>ID</th>\n<th>References</th>\n<th>E_id</th>\n<th>F_id</th>\n<th>G_id</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>0</td>\n<td>[E_id]</td>\n<td>0000</td>\n<td></td>\n<td></td>\n</tr>\n<tr>\n<td>1</td>\n<td>[E_id, F_id, G_id]</td>\n<td>0010</td>\n<td>1000</td>\n<td>1111</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>There is a column called <code>References</code> which contains an array of column names that this row of data has. So the first row only has a <code>Ex_1</code> column and would not have the columns <code>Ex_2</code> or <code>Ex_3</code> while the second row has all 3 columns. For each row, I need to select relevant columns (Like <code>References</code> and <code>ID</code> which all rows of data have) and then also select the respective columns that are included in <code>References</code>.</p>\n<p>At the moment, this is my code:</p>\n<pre><code>final Dataset&lt;Row&gt; partitionedDf = df.select(col(&quot;id&quot;), col(&quot;references));\n</code></pre>\n<p>I can't hardcode any of the <code>Ex_1, Ex_2...etc</code> columns into my select because the possible columns inside References are dynamic. I need to figure out a way to get References for each row and then select the columns inside References as well so it's all included in my Dataset.</p>\n<p><strong>One thing to note is that the columns inside reference do all follow a pattern (they all end with &quot;_id&quot;) so I'm not sure if regex matching could be used here as well, rather than relying on what is inside the References array.</strong></p>\n"},{"tags":["java","servlets","cdi"],"comments":[{"owner":{"account_id":81495,"reputation":3962,"user_id":229743,"display_name":"Taylor"},"score":1,"creation_date":1495153327,"post_id":44059122,"comment_id":75144265,"body_markdown":"This is similar to, though not the same as a question I asked: http://stackoverflow.com/questions/29380888/how-to-check-for-request-scope-availability-in-spring  My question was spring specific, but I link to it here in the hopes it may help.","body":"This is similar to, though not the same as a question I asked: <a href=\"http://stackoverflow.com/questions/29380888/how-to-check-for-request-scope-availability-in-spring\" title=\"how to check for request scope availability in spring\">stackoverflow.com/questions/29380888/&hellip;</a>  My question was spring specific, but I link to it here in the hopes it may help."},{"owner":{"account_id":5718675,"reputation":1905,"user_id":4517895,"accept_rate":69,"display_name":"Mikhail Chibel"},"score":0,"creation_date":1495159634,"post_id":44059122,"comment_id":75145566,"body_markdown":"@Taylor indeed it similar. And unfortunately pure JEE not so convenient as Spring. My current workaround is to use try catch. Actully I don&#39;t think there is any proper solution for that. I can figure out if thread started by Quartz based name of thread group but it is far from ideal.","body":"@Taylor indeed it similar. And unfortunately pure JEE not so convenient as Spring. My current workaround is to use try catch. Actully I don&#39;t think there is any proper solution for that. I can figure out if thread started by Quartz based name of thread group but it is far from ideal."}],"answers":[{"tags":[],"owner":{"account_id":28967434,"reputation":1,"user_id":22188497,"display_name":"Ranjith"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689018219,"creation_date":1688705107,"answer_id":76634013,"question_id":44059122,"body_markdown":"```\r\npublic class WorkOrderList1Action extends Action{\r\n\t\r\n\tprotected ArrayList getreceipt1() {\r\n\t\tArrayList FIRSTNAME=new ArrayList();\r\n\t\treturn FIRSTNAME;\t\t\t\r\n\t}\r\n}\r\n```","title":"How to check if code executed in Servlet context","body":"<pre><code>public class WorkOrderList1Action extends Action{\n    \n    protected ArrayList getreceipt1() {\n        ArrayList FIRSTNAME=new ArrayList();\n        return FIRSTNAME;           \n    }\n}\n</code></pre>\n"}],"owner":{"account_id":5718675,"reputation":1905,"user_id":4517895,"accept_rate":69,"display_name":"Mikhail Chibel"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":934,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689018219,"creation_date":1495148881,"question_id":44059122,"body_markdown":"I have a code which may be executed from normal servlet thread or from the Quartz job. The code is basically error logger and I want to add request information if available to the log message. The problem is when the code executed from the scheduled task there is obviously no request available, which is fine. The request information comes from injected instance (CDI) which underneath uses injected instance of servlet request. \r\n\r\n    @Inject\r\n    private HttpServletRequest servletRequest;\r\n\r\nAttempt to inject HttpServletRequest from the thread running outside of servlet results in `org.jboss.weld.exceptions.IllegalStateException: WELD-000710: Cannot inject HttpServletRequest outside of a Servlet request`\r\n\r\nMy question how can I detect if the current thread running in the servlet context or not and avoid trying to inject the request object. ","title":"How to check if code executed in Servlet context","body":"<p>I have a code which may be executed from normal servlet thread or from the Quartz job. The code is basically error logger and I want to add request information if available to the log message. The problem is when the code executed from the scheduled task there is obviously no request available, which is fine. The request information comes from injected instance (CDI) which underneath uses injected instance of servlet request. </p>\n\n<pre><code>@Inject\nprivate HttpServletRequest servletRequest;\n</code></pre>\n\n<p>Attempt to inject HttpServletRequest from the thread running outside of servlet results in <code>org.jboss.weld.exceptions.IllegalStateException: WELD-000710: Cannot inject HttpServletRequest outside of a Servlet request</code></p>\n\n<p>My question how can I detect if the current thread running in the servlet context or not and avoid trying to inject the request object. </p>\n"},{"tags":["java","esper"],"answers":[{"tags":[],"owner":{"account_id":4438616,"reputation":816,"user_id":3613754,"display_name":"user3613754"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689017773,"creation_date":1688986260,"answer_id":76652992,"question_id":76643825,"body_markdown":"There is a bunch of ways to do this. With insert-into you can pipe the output of one statement into another.\r\n\r\nFor example...\r\n\r\n```sql\r\ninsert into HighPriceOrder select * from Order(price &gt; 100)\r\ninsert into HighPriceHighQtyOrder select * from HighPriceOrder(quantity &gt; 1000)\r\n```\r\n\r\nIf you want to change the individual stages of filtering at runtime you could use &quot;create schema HighPriceOrder as Order&quot; so the type of events is known for a given stream name. So for example, let&#39;s assume you want to change &quot;Order(price &gt; 100)&quot; to &quot;Order(price &gt; 200)&quot; you could un-deploy the first insert-into EPL and deploy a new insert-into EPL. However since the second EPL depends on the stream HighPriceOrder that the first EPL defined, a &quot;create schema HighPriceOrder as Order&quot; could be used to define name and type of the stream upfront.\r\n\r\n","title":"Apply rules sequentially on an event stream","body":"<p>There is a bunch of ways to do this. With insert-into you can pipe the output of one statement into another.</p>\n<p>For example...</p>\n<pre class=\"lang-sql prettyprint-override\"><code>insert into HighPriceOrder select * from Order(price &gt; 100)\ninsert into HighPriceHighQtyOrder select * from HighPriceOrder(quantity &gt; 1000)\n</code></pre>\n<p>If you want to change the individual stages of filtering at runtime you could use &quot;create schema HighPriceOrder as Order&quot; so the type of events is known for a given stream name. So for example, let's assume you want to change &quot;Order(price &gt; 100)&quot; to &quot;Order(price &gt; 200)&quot; you could un-deploy the first insert-into EPL and deploy a new insert-into EPL. However since the second EPL depends on the stream HighPriceOrder that the first EPL defined, a &quot;create schema HighPriceOrder as Order&quot; could be used to define name and type of the stream upfront.</p>\n"}],"owner":{"account_id":446781,"reputation":1826,"user_id":840039,"accept_rate":50,"display_name":"gaurawerma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689017773,"creation_date":1688832359,"question_id":76643825,"body_markdown":"I have a set of select statements, each statement serving as a rule with just one property filter in where clause. I want to do a logical AND on all those statements which are loaded at runtime. It’s like a set of rules applied on a stream of event A, output of one statement going into another an so on. \r\n\r\nThe order of execution of these statements should be determined by the statement priority.\r\n\r\nIs this possible using esper? If yes, what is the ideal way to achieve this?","title":"Apply rules sequentially on an event stream","body":"<p>I have a set of select statements, each statement serving as a rule with just one property filter in where clause. I want to do a logical AND on all those statements which are loaded at runtime. It’s like a set of rules applied on a stream of event A, output of one statement going into another an so on.</p>\n<p>The order of execution of these statements should be determined by the statement priority.</p>\n<p>Is this possible using esper? If yes, what is the ideal way to achieve this?</p>\n"},{"tags":["java","firebase","firebase-realtime-database","firebase-admin"],"comments":[{"owner":{"account_id":426109,"reputation":302012,"user_id":807126,"display_name":"Doug Stevenson"},"score":2,"creation_date":1689013774,"post_id":76656372,"comment_id":135150330,"body_markdown":"On Stack Overflow, please [don&#39;t show pictures of text and code](https://overflow.tips/write-good-question/formatting-text-code#dont-use-screenshots-of-text). Copy the text into the question itself and format it so that it&#39;s easy to read, copy, and search. You can edit the question to correct this using the edit link at the bottom.","body":"On Stack Overflow, please <a href=\"https://overflow.tips/write-good-question/formatting-text-code#dont-use-screenshots-of-text\" rel=\"nofollow noreferrer\">don&#39;t show pictures of text and code</a>. Copy the text into the question itself and format it so that it&#39;s easy to read, copy, and search. You can edit the question to correct this using the edit link at the bottom."},{"owner":{"account_id":426109,"reputation":302012,"user_id":807126,"display_name":"Doug Stevenson"},"score":0,"creation_date":1689013933,"post_id":76656372,"comment_id":135150363,"body_markdown":"Also, it&#39;s unclear from your question what the problem is. I suggest [reviewing this checklist](https://overflow.tips/write-good-question/checklist) for some practical steps to take to improve your question. Questions that just say &quot;[it doesn&#39;t work](https://overflow.tips/problematic-questions#why-doesnt-it-work--what-am-i-missing-here)&quot; are not helpful enough to get a good answer.","body":"Also, it&#39;s unclear from your question what the problem is. I suggest <a href=\"https://overflow.tips/write-good-question/checklist\" rel=\"nofollow noreferrer\">reviewing this checklist</a> for some practical steps to take to improve your question. Questions that just say &quot;<a href=\"https://overflow.tips/problematic-questions#why-doesnt-it-work--what-am-i-missing-here\" rel=\"nofollow noreferrer\">it doesn&#39;t work</a>&quot; are not helpful enough to get a good answer."},{"owner":{"account_id":72426,"reputation":573714,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"score":0,"creation_date":1689014348,"post_id":76656372,"comment_id":135150450,"body_markdown":"Is your code explicitly waiting for the operation to complete? If not, the process may exit before the read has happened. See https://stackoverflow.com/questions/45253891/why-firebase-java-sdk-cant-terminate-after-set","body":"Is your code explicitly waiting for the operation to complete? If not, the process may exit before the read has happened. See <a href=\"https://stackoverflow.com/questions/45253891/why-firebase-java-sdk-cant-terminate-after-set\" title=\"why firebase java sdk cant terminate after set\">stackoverflow.com/questions/45253891/&hellip;</a>"},{"owner":{"account_id":21940210,"reputation":1,"user_id":16220861,"display_name":"Fidelio Rainbow"},"score":0,"creation_date":1689015922,"post_id":76656372,"comment_id":135150753,"body_markdown":"@FrankvanPuffelen I cannot communicate with the server in any way. it&#39;s same code in Firebase docs.","body":"@FrankvanPuffelen I cannot communicate with the server in any way. it&#39;s same code in Firebase docs."},{"owner":{"account_id":21940210,"reputation":1,"user_id":16220861,"display_name":"Fidelio Rainbow"},"score":0,"creation_date":1689016626,"post_id":76656372,"comment_id":135150866,"body_markdown":"@FrankvanPuffelen Maybe the program is ending before getting the data. if it is, how to solve this problem.","body":"@FrankvanPuffelen Maybe the program is ending before getting the data. if it is, how to solve this problem."}],"answers":[{"tags":[],"owner":{"account_id":21940210,"reputation":1,"user_id":16220861,"display_name":"Fidelio Rainbow"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689017240,"creation_date":1689017240,"answer_id":76656746,"question_id":76656372,"body_markdown":"Problem solved. \r\nI gave the listener some time to get the data. here is the code:\r\n\r\n            ref.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(DataSnapshot snapshot) {\r\n                System.out.println(snapshot);\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(DatabaseError error) {\r\n\r\n            }\r\n        });\r\n        TimeUnit.MINUTES.sleep(1);","title":"Firebase Admin Sdk for Java not working. I can&#39;t get any result or data","body":"<p>Problem solved.\nI gave the listener some time to get the data. here is the code:</p>\n<pre><code>        ref.addValueEventListener(new ValueEventListener() {\n        @Override\n        public void onDataChange(DataSnapshot snapshot) {\n            System.out.println(snapshot);\n        }\n\n        @Override\n        public void onCancelled(DatabaseError error) {\n\n        }\n    });\n    TimeUnit.MINUTES.sleep(1);\n</code></pre>\n"}],"owner":{"account_id":21940210,"reputation":1,"user_id":16220861,"display_name":"Fidelio Rainbow"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1689029406,"accepted_answer_id":76656746,"answer_count":1,"score":0,"last_activity_date":1689017240,"creation_date":1689013559,"question_id":76656372,"body_markdown":"I have a firebase admin sdk project in java. I have a problem, I cannot get any data or result from my firebase server. here is my project: [[[enter image description here](https://i.stack.imgur.com/ViZlK.png)](https://i.stack.imgur.com/Gn8XU.png)](https://i.stack.imgur.com/V9ZyJ.png)\r\n\r\n\r\nI tried at python and program working as normal. My Firebase Database Rules are public.","title":"Firebase Admin Sdk for Java not working. I can&#39;t get any result or data","body":"<p>I have a firebase admin sdk project in java. I have a problem, I cannot get any data or result from my firebase server. here is my project: [[<a href=\"https://i.stack.imgur.com/ViZlK.png\" rel=\"nofollow noreferrer\">enter image description here</a>](<a href=\"https://i.stack.imgur.com/Gn8XU.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/Gn8XU.png</a>)](<a href=\"https://i.stack.imgur.com/V9ZyJ.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/V9ZyJ.png</a>)</p>\n<p>I tried at python and program working as normal. My Firebase Database Rules are public.</p>\n"},{"tags":["java","apache-nifi"],"comments":[{"owner":{"account_id":1333316,"reputation":26958,"user_id":1276664,"accept_rate":17,"display_name":"daggett"},"score":0,"creation_date":1689014974,"post_id":76655092,"comment_id":135150581,"body_markdown":"What java and nifi versions you are using? Did you change any nifi configurations after download?","body":"What java and nifi versions you are using? Did you change any nifi configurations after download?"},{"owner":{"account_id":28988046,"reputation":1,"user_id":22204485,"display_name":"MWM"},"score":0,"creation_date":1689055474,"post_id":76655092,"comment_id":135154926,"body_markdown":"I am using java 11 and nifi 1.21.0","body":"I am using java 11 and nifi 1.21.0"},{"owner":{"account_id":28988046,"reputation":1,"user_id":22204485,"display_name":"MWM"},"score":0,"creation_date":1689055625,"post_id":76655092,"comment_id":135154954,"body_markdown":"I didn&#39;t change anything in nifi.properties, I made changes in bootstrap.conf because I had a problem with memory - I changed JVM memory settings to:\njava.arg.2=-Xms4096m\njava.arg.3=-Xmx8192m","body":"I didn&#39;t change anything in nifi.properties, I made changes in bootstrap.conf because I had a problem with memory - I changed JVM memory settings to: java.arg.2=-Xms4096m java.arg.3=-Xmx8192m"},{"owner":{"account_id":2567554,"reputation":1043,"user_id":3810086,"display_name":"tonykoval"},"score":0,"creation_date":1689068322,"post_id":76655092,"comment_id":135157393,"body_markdown":"@MWM Please show variables in `nifi.properties` in section `# web properties #`","body":"@MWM Please show variables in <code>nifi.properties</code> in section <code># web properties #</code>"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1689074318,"post_id":76655092,"comment_id":135158646,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":1333316,"reputation":26958,"user_id":1276664,"accept_rate":17,"display_name":"daggett"},"score":0,"creation_date":1689080985,"post_id":76655092,"comment_id":135160172,"body_markdown":"error: `Caused by: org.apache.nifi.security.util.TlsException: The truststore properties are not valid` sounds like you changed `nifi.security...` or truststore  parameters...","body":"error: <code>Caused by: org.apache.nifi.security.util.TlsException: The truststore properties are not valid</code> sounds like you changed <code>nifi.security...</code> or truststore  parameters..."}],"owner":{"account_id":28988046,"reputation":1,"user_id":22204485,"display_name":"MWM"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":345,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689017142,"creation_date":1689001778,"question_id":76655092,"body_markdown":"I&#39;m new to nifi, I downloaded nifi, I&#39;m trying to log in, but I can&#39;t enter the address:https://127.0.0.1:8443/\r\n\r\nLogs:\r\n```\r\n 2023-07-10 16:16:34,682 WARN [main] org.apache.nifi.web.server.JettyServer Failed to start web server... shutting down.\r\njava.lang.IllegalStateException: Invalid nifi.web.https configuration in nifi.properties\r\nat org.apache.nifi.web.server.connector.FrameworkServerConnectorFactory.&lt;init&gt;(FrameworkServerConnectorFactory.java:89)\r\nat org.apache.nifi.web.server.JettyServer.configureConnectors(JettyServer.java:738)\r\nat org.apache.nifi.web.server.JettyServer.init(JettyServer.java:207)\r\nat org.apache.nifi.web.server.JettyServer.initialize(JettyServer.java:1074)\r\nat org.apache.nifi.NiFi.&lt;init&gt;(NiFi.java:164)\r\nat org.apache.nifi.NiFi.&lt;init&gt;(NiFi.java:83)\r\nat org.apache.nifi.NiFi.main(NiFi.java:332)\r\nCaused by: org.apache.nifi.security.util.TlsException: The truststore properties are not valid\r\nat org.apache.nifi.security.util.SslContextFactory.getTrustManagers(SslContextFactory.java:181)\r\nat org.apache.nifi.security.util.SslContextFactory.createSslContext(SslContextFactory.java:67)\r\nat org.apache.nifi.web.server.connector.FrameworkServerConnectorFactory.&lt;init&gt;(FrameworkServerConnectorFactory.java:86)\r\n6 common frames omitted\r\n2023-07-10 16:16:34,685 INFO [Thread-0] org.apache.nifi.NiFi Application Server shutdown started\r\n2023-07-10 16:16:34,686 INFO [Thread-0] org.apache.nifi.NiFi Application Server shutdown completed\r\n `\r\n```\r\n\r\nMaybe someone knows why it&#39;s not working?\r\n","title":"Invalid nifi.web.https configuration in nifi.properties when trying log in nifi","body":"<p>I'm new to nifi, I downloaded nifi, I'm trying to log in, but I can't enter the address:<a href=\"https://127.0.0.1:8443/\" rel=\"nofollow noreferrer\">https://127.0.0.1:8443/</a></p>\n<p>Logs:</p>\n<pre><code> 2023-07-10 16:16:34,682 WARN [main] org.apache.nifi.web.server.JettyServer Failed to start web server... shutting down.\njava.lang.IllegalStateException: Invalid nifi.web.https configuration in nifi.properties\nat org.apache.nifi.web.server.connector.FrameworkServerConnectorFactory.&lt;init&gt;(FrameworkServerConnectorFactory.java:89)\nat org.apache.nifi.web.server.JettyServer.configureConnectors(JettyServer.java:738)\nat org.apache.nifi.web.server.JettyServer.init(JettyServer.java:207)\nat org.apache.nifi.web.server.JettyServer.initialize(JettyServer.java:1074)\nat org.apache.nifi.NiFi.&lt;init&gt;(NiFi.java:164)\nat org.apache.nifi.NiFi.&lt;init&gt;(NiFi.java:83)\nat org.apache.nifi.NiFi.main(NiFi.java:332)\nCaused by: org.apache.nifi.security.util.TlsException: The truststore properties are not valid\nat org.apache.nifi.security.util.SslContextFactory.getTrustManagers(SslContextFactory.java:181)\nat org.apache.nifi.security.util.SslContextFactory.createSslContext(SslContextFactory.java:67)\nat org.apache.nifi.web.server.connector.FrameworkServerConnectorFactory.&lt;init&gt;(FrameworkServerConnectorFactory.java:86)\n6 common frames omitted\n2023-07-10 16:16:34,685 INFO [Thread-0] org.apache.nifi.NiFi Application Server shutdown started\n2023-07-10 16:16:34,686 INFO [Thread-0] org.apache.nifi.NiFi Application Server shutdown completed\n `\n</code></pre>\n<p>Maybe someone knows why it's not working?</p>\n"},{"tags":["java","maven","io-redirection","heideltime"],"comments":[{"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"score":0,"creation_date":1617708145,"post_id":66966445,"comment_id":118373981,"body_markdown":"In Log4j you can configure the log level for different loggers. So you can define the log level differently for loggers coming from the Java packages of HeidelTime.","body":"In Log4j you can configure the log level for different loggers. So you can define the log level differently for loggers coming from the Java packages of HeidelTime."},{"owner":{"account_id":12163171,"reputation":160,"user_id":8880180,"display_name":"Nelly Barret"},"score":0,"creation_date":1617710990,"post_id":66966445,"comment_id":118375176,"body_markdown":"@JFabianMeier thanks for your interesting answer, I will try to do something with Log4J!","body":"@JFabianMeier thanks for your interesting answer, I will try to do something with Log4J!"},{"owner":{"account_id":12163171,"reputation":160,"user_id":8880180,"display_name":"Nelly Barret"},"score":0,"creation_date":1617714838,"post_id":66966445,"comment_id":118376972,"body_markdown":"I still need some help if possible. I tried to set the HeidelTime&#39;s logger to Level.OFF but Heideltime continues to be verbose, like if `Logger.getLogger(de.unihd.dbs.heideltime.standalone.HeidelTimeStandalone.class).setLevel(Level.OFF);` didn&#39;t work. Any ideas? Thanks!","body":"I still need some help if possible. I tried to set the HeidelTime&#39;s logger to Level.OFF but Heideltime continues to be verbose, like if <code>Logger.getLogger(de.unihd.dbs.heideltime.standalone.HeidelTi&zwnj;&#8203;meStandalone.class).&zwnj;&#8203;setLevel(Level.OFF);</code> didn&#39;t work. Any ideas? Thanks!"}],"answers":[{"tags":[],"owner":{"account_id":27195274,"reputation":1,"user_id":20728263,"display_name":"user20728263"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689016523,"creation_date":1689016523,"answer_id":76656679,"question_id":66966445,"body_markdown":"Turning off the heideltime&#39;s logger can be achieved like this (taken from https://github.com/HeidelTime/heideltime/issues/86)\r\n\r\n    HeidelTimeStandalone heidelTime = new HeidelTimeStandalone();\r\n    \r\n    java.util.logging.logger htLogger = java.utillogging.LogManager.getLogManager().getLogger(&quot;HeidelTimeStandalone&quot;);\r\n        htLogger.setLevel(java.util.logging.Level.OFF);\r\n    \r\n    heidelTime = new HeidelTimeStandalone(\r\n        Language.ENGLISH,\r\n        DocumnetType.NARRATIVES,\r\n        OutputType.TIMEML,\r\n        &quot;./config.props&quot;,\r\n        POSTagger.NO);","title":"Redirect output (to file) from Maven dependency in Java","body":"<p>Turning off the heideltime's logger can be achieved like this (taken from <a href=\"https://github.com/HeidelTime/heideltime/issues/86\" rel=\"nofollow noreferrer\">https://github.com/HeidelTime/heideltime/issues/86</a>)</p>\n<pre><code>HeidelTimeStandalone heidelTime = new HeidelTimeStandalone();\n\njava.util.logging.logger htLogger = java.utillogging.LogManager.getLogManager().getLogger(&quot;HeidelTimeStandalone&quot;);\n    htLogger.setLevel(java.util.logging.Level.OFF);\n\nheidelTime = new HeidelTimeStandalone(\n    Language.ENGLISH,\n    DocumnetType.NARRATIVES,\n    OutputType.TIMEML,\n    &quot;./config.props&quot;,\n    POSTagger.NO);\n</code></pre>\n"}],"owner":{"account_id":12163171,"reputation":160,"user_id":8880180,"display_name":"Nelly Barret"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":160,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689016523,"creation_date":1617702904,"question_id":66966445,"body_markdown":"In my project, I&#39;m working with the [HeidelTime framework](https://github.com/HeidelTime/heideltime), that I included as a Maven dependency. This framework is very verbose, so I would like to **redirect its output to a file** (but not all outputs from my application). The constraints are the following:\r\n\r\n- HeidelTime uses a Logger (Log4J), so I can&#39;t simply redirect the standard output to a file. \r\n- I can&#39;t access the logger because it&#39;s private to the main class (`HeidelTimeStandalone.java`). \r\n- I included HeidelTime in my project as a Maven dependency and I prefer to keep it as is (even if I could download the code and modify directly the source code to make the logger public...)\r\n- Finally, I don&#39;t want to simply redirect all outputs (`java -jar myApplication.jar &gt; file.txt`) because I would like to preserve my standard output apart from HeidelTime&#39;s output...\r\n\r\nDoes anybody have an idea to redirect HeidelTime&#39;s output in a file? Hope this at least is possible!","title":"Redirect output (to file) from Maven dependency in Java","body":"<p>In my project, I'm working with the <a href=\"https://github.com/HeidelTime/heideltime\" rel=\"nofollow noreferrer\">HeidelTime framework</a>, that I included as a Maven dependency. This framework is very verbose, so I would like to <strong>redirect its output to a file</strong> (but not all outputs from my application). The constraints are the following:</p>\n<ul>\n<li>HeidelTime uses a Logger (Log4J), so I can't simply redirect the standard output to a file.</li>\n<li>I can't access the logger because it's private to the main class (<code>HeidelTimeStandalone.java</code>).</li>\n<li>I included HeidelTime in my project as a Maven dependency and I prefer to keep it as is (even if I could download the code and modify directly the source code to make the logger public...)</li>\n<li>Finally, I don't want to simply redirect all outputs (<code>java -jar myApplication.jar &gt; file.txt</code>) because I would like to preserve my standard output apart from HeidelTime's output...</li>\n</ul>\n<p>Does anybody have an idea to redirect HeidelTime's output in a file? Hope this at least is possible!</p>\n"},{"tags":["java","android","samsung-health"],"owner":{"account_id":13468129,"reputation":119,"user_id":9717646,"display_name":"Chris Fodor"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689016090,"creation_date":1689016090,"question_id":76656635,"body_markdown":"I&#180;ve downloaded the SimpleHealth sample project from the Samsung Developer site.\r\nLink:\r\nhttps://developer.samsung.com/health/android/sample/simple-health.html\r\n\r\nIn the sample app StepCount permission is requested, which works:\r\n\r\n        private void requestPermission() {\r\n        PermissionKey permKey = new PermissionKey(StepCount.HEALTH_DATA_TYPE, PermissionType.READ);\r\n        HealthPermissionManager pmsManager = new HealthPermissionManager(mStore);\r\n\r\n\r\n        try {\r\n            // Show user permission UI for allowing user to change options\r\n            pmsManager.requestPermissions(Collections.singleton(permKey), MainActivity.this)\r\n                .setResultListener(result -&gt; {\r\n                    Log.d(APP_TAG, &quot;Permission callback is received.&quot;);\r\n                    Map&lt;PermissionKey, Boolean&gt; resultMap = result.getResultMap();\r\n\r\n                    if (resultMap.containsValue(Boolean.FALSE)) {\r\n                        updateHeartRateView(&quot;&quot;);\r\n                        showPermissionAlarmDialog();\r\n                    } else {\r\n                        // Get the current heart rate and display it\r\n                        hrReporter.start();\r\n                    }\r\n                });\r\n        } catch (Exception e) {\r\n            Log.e(APP_TAG, &quot;Permission setting fails.&quot;, e);\r\n        }\r\n    }\r\n\r\nThe following prompt opens where I can toggle all permissions and step count **works**:\r\n\r\n[![Prompt1][1]][1]\r\n\r\nHowever, when I change the code to request HeartRate data:\r\n\r\n        private void requestPermission() {\r\n        PermissionKey permKey = new PermissionKey(HeartRate.HEALTH_DATA_TYPE, PermissionType.READ);\r\n        HealthPermissionManager pmsManager = new HealthPermissionManager(mStore);\r\n\r\n\r\n        try {\r\n            // Show user permission UI for allowing user to change options\r\n            pmsManager.requestPermissions(Collections.singleton(permKey), MainActivity.this)\r\n                .setResultListener(result -&gt; {\r\n                    Log.d(APP_TAG, &quot;Permission callback is received.&quot;);\r\n                    Map&lt;PermissionKey, Boolean&gt; resultMap = result.getResultMap();\r\n\r\n                    if (resultMap.containsValue(Boolean.FALSE)) {\r\n                        updateHeartRateView(&quot;&quot;);\r\n                        showPermissionAlarmDialog();\r\n                    } else {\r\n                        // Get the current heart rate and display it\r\n                        hrReporter.start();\r\n                    }\r\n                });\r\n        } catch (Exception e) {\r\n            Log.e(APP_TAG, &quot;Permission setting fails.&quot;, e);\r\n        }\r\n    }\r\n\r\nThe following prompt opens but all permission **cannot** be toggled:\r\n\r\n[![Prompt2][2]][2]\r\n\r\nAndroidManifest:\r\n\r\n    &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    package=&quot;com.samsung.android.simplehealth&quot;\r\n    android:versionCode=&quot;1&quot;\r\n    android:versionName=&quot;1.0&quot;&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.BODY_SENSORS&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;com.samsung.android.health.permission.read&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACTIVITY_RECOGNITION&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.FOREGROUND_SERVICE&quot; /&gt;\r\n\r\n    &lt;queries&gt;\r\n        &lt;package android:name=&quot;com.sec.android.app.shealth&quot; /&gt;\r\n    &lt;/queries&gt;\r\n\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:icon=&quot;@drawable/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:theme=&quot;@style/AppTheme&quot;&gt;\r\n\r\n        &lt;meta-data android:name=&quot;com.samsung.android.health.permission.read&quot;\r\n            android:value=&quot;com.samsung.health.heart_rate&quot; /&gt;\r\n        &lt;activity\r\n            android:name=&quot;com.samsung.android.simplehealth.MainActivity&quot;\r\n            android:label=&quot;@string/app_name&quot;\r\n            android:exported=&quot;true&quot;\r\n            &gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n    &lt;/application&gt;\r\n\r\n&lt;/manifest&gt;\r\n\r\nWhy does StepCount work in the sample application but Heart Rate does not?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/mkNjk.jpg\r\n  [2]: https://i.stack.imgur.com/mFmbb.jpg","title":"Permission request for Samsung SDK not working for Heart Rate","body":"<p>I´ve downloaded the SimpleHealth sample project from the Samsung Developer site.\nLink:\n<a href=\"https://developer.samsung.com/health/android/sample/simple-health.html\" rel=\"nofollow noreferrer\">https://developer.samsung.com/health/android/sample/simple-health.html</a></p>\n<p>In the sample app StepCount permission is requested, which works:</p>\n<pre><code>    private void requestPermission() {\n    PermissionKey permKey = new PermissionKey(StepCount.HEALTH_DATA_TYPE, PermissionType.READ);\n    HealthPermissionManager pmsManager = new HealthPermissionManager(mStore);\n\n\n    try {\n        // Show user permission UI for allowing user to change options\n        pmsManager.requestPermissions(Collections.singleton(permKey), MainActivity.this)\n            .setResultListener(result -&gt; {\n                Log.d(APP_TAG, &quot;Permission callback is received.&quot;);\n                Map&lt;PermissionKey, Boolean&gt; resultMap = result.getResultMap();\n\n                if (resultMap.containsValue(Boolean.FALSE)) {\n                    updateHeartRateView(&quot;&quot;);\n                    showPermissionAlarmDialog();\n                } else {\n                    // Get the current heart rate and display it\n                    hrReporter.start();\n                }\n            });\n    } catch (Exception e) {\n        Log.e(APP_TAG, &quot;Permission setting fails.&quot;, e);\n    }\n}\n</code></pre>\n<p>The following prompt opens where I can toggle all permissions and step count <strong>works</strong>:</p>\n<p><a href=\"https://i.stack.imgur.com/mkNjk.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mkNjk.jpg\" alt=\"Prompt1\" /></a></p>\n<p>However, when I change the code to request HeartRate data:</p>\n<pre><code>    private void requestPermission() {\n    PermissionKey permKey = new PermissionKey(HeartRate.HEALTH_DATA_TYPE, PermissionType.READ);\n    HealthPermissionManager pmsManager = new HealthPermissionManager(mStore);\n\n\n    try {\n        // Show user permission UI for allowing user to change options\n        pmsManager.requestPermissions(Collections.singleton(permKey), MainActivity.this)\n            .setResultListener(result -&gt; {\n                Log.d(APP_TAG, &quot;Permission callback is received.&quot;);\n                Map&lt;PermissionKey, Boolean&gt; resultMap = result.getResultMap();\n\n                if (resultMap.containsValue(Boolean.FALSE)) {\n                    updateHeartRateView(&quot;&quot;);\n                    showPermissionAlarmDialog();\n                } else {\n                    // Get the current heart rate and display it\n                    hrReporter.start();\n                }\n            });\n    } catch (Exception e) {\n        Log.e(APP_TAG, &quot;Permission setting fails.&quot;, e);\n    }\n}\n</code></pre>\n<p>The following prompt opens but all permission <strong>cannot</strong> be toggled:</p>\n<p><a href=\"https://i.stack.imgur.com/mFmbb.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mFmbb.jpg\" alt=\"Prompt2\" /></a></p>\n<p>AndroidManifest:</p>\n<pre><code>&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\npackage=&quot;com.samsung.android.simplehealth&quot;\nandroid:versionCode=&quot;1&quot;\nandroid:versionName=&quot;1.0&quot;&gt;\n\n&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.BODY_SENSORS&quot; /&gt;\n&lt;uses-permission android:name=&quot;com.samsung.android.health.permission.read&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.ACTIVITY_RECOGNITION&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.FOREGROUND_SERVICE&quot; /&gt;\n\n&lt;queries&gt;\n    &lt;package android:name=&quot;com.sec.android.app.shealth&quot; /&gt;\n&lt;/queries&gt;\n\n&lt;application\n    android:allowBackup=&quot;true&quot;\n    android:icon=&quot;@drawable/ic_launcher&quot;\n    android:label=&quot;@string/app_name&quot;\n    android:theme=&quot;@style/AppTheme&quot;&gt;\n\n    &lt;meta-data android:name=&quot;com.samsung.android.health.permission.read&quot;\n        android:value=&quot;com.samsung.health.heart_rate&quot; /&gt;\n    &lt;activity\n        android:name=&quot;com.samsung.android.simplehealth.MainActivity&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:exported=&quot;true&quot;\n        &gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n            &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n        &lt;/intent-filter&gt;\n    &lt;/activity&gt;\n&lt;/application&gt;\n</code></pre>\n\n<p>Why does StepCount work in the sample application but Heart Rate does not?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1689026652,"post_id":76656613,"comment_id":135152365,"body_markdown":"You should be looking into kiosk mode.","body":"You should be looking into kiosk mode."},{"owner":{"account_id":24532734,"reputation":1,"user_id":21143328,"display_name":"Jesus Liscano"},"score":0,"creation_date":1689086002,"post_id":76656613,"comment_id":135161528,"body_markdown":"Apart from that way, is there another way?","body":"Apart from that way, is there another way?"}],"owner":{"account_id":24532734,"reputation":1,"user_id":21143328,"display_name":"Jesus Liscano"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689015884,"creation_date":1689015769,"question_id":76656613,"body_markdown":"I want to create a launcher, where access to the device settings is blocked, but I don&#39;t have much idea how to do it.\r\nI&#39;m investigating what can be done with\r\n\r\n```\r\nsetContentView(R.layout.activity_main);\r\n        DevicePolicyManager dpm = (DevicePolicyManager) getSystemService(Context.DEVICE_POLICY_SERVICE);\r\n        ComponentName adminComponent = new ComponentName(this, testclass.class);\r\n\r\n        dpm.setSettingsProviderDisabled(adminComponent, true);\r\n```\r\n\r\nbut the setSettingsProviderDisabled appears as rename, correctly import the DevicePolicyManager class and the test class extends from DeviceAdminReceiver,\r\nIs there any other way to do it or what do you recommend?\r\n","title":"How can I create a launcher and Block java status bar and settings app?","body":"<p>I want to create a launcher, where access to the device settings is blocked, but I don't have much idea how to do it.\nI'm investigating what can be done with</p>\n<pre><code>setContentView(R.layout.activity_main);\n        DevicePolicyManager dpm = (DevicePolicyManager) getSystemService(Context.DEVICE_POLICY_SERVICE);\n        ComponentName adminComponent = new ComponentName(this, testclass.class);\n\n        dpm.setSettingsProviderDisabled(adminComponent, true);\n</code></pre>\n<p>but the setSettingsProviderDisabled appears as rename, correctly import the DevicePolicyManager class and the test class extends from DeviceAdminReceiver,\nIs there any other way to do it or what do you recommend?</p>\n"},{"tags":["java","routes","wicket","wicket-6"],"comments":[{"owner":{"account_id":232499,"reputation":17233,"user_id":497381,"display_name":"martin-g"},"score":1,"creation_date":1650482825,"post_id":71931577,"comment_id":127130244,"body_markdown":"See the source code of AjaxHashLink, copy it and adapt it!","body":"See the source code of AjaxHashLink, copy it and adapt it!"},{"owner":{"account_id":232499,"reputation":17233,"user_id":497381,"display_name":"martin-g"},"score":0,"creation_date":1650482853,"post_id":71931577,"comment_id":127130252,"body_markdown":"BTW what is \\ in `\\edit` ? Maybe you mean `/` ?!","body":"BTW what is \\ in <code>\\edit</code> ? Maybe you mean <code>&#47;</code> ?!"},{"owner":{"account_id":22681491,"reputation":39,"user_id":16851799,"display_name":"syl-oh"},"score":0,"creation_date":1650546155,"post_id":71931577,"comment_id":127147096,"body_markdown":"Yes, `/edit` I updated my question. Ok we had a custom implementation of it that I didn&#39;t dig into. I&#39;ll see what I can find, would you know the name of the boolean or method making it a markup tag with `#` instead of a `/` ?","body":"Yes, <code>&#47;edit</code> I updated my question. Ok we had a custom implementation of it that I didn&#39;t dig into. I&#39;ll see what I can find, would you know the name of the boolean or method making it a markup tag with <code>#</code> instead of a <code>&#47;</code> ?"},{"owner":{"account_id":232499,"reputation":17233,"user_id":497381,"display_name":"martin-g"},"score":1,"creation_date":1650953171,"post_id":71931577,"comment_id":127239009,"body_markdown":"I guess AjaxHashLink overrides method `onComponentTag(ComponentTag)` and calls `tag.put(&quot;href&quot;, &quot;link#hash&quot;)`","body":"I guess AjaxHashLink overrides method <code>onComponentTag(ComponentTag)</code> and calls <code>tag.put(&quot;href&quot;, &quot;link#hash&quot;)</code>"},{"owner":{"account_id":22681491,"reputation":39,"user_id":16851799,"display_name":"syl-oh"},"score":0,"creation_date":1653657098,"post_id":71931577,"comment_id":127910181,"body_markdown":"It worked but I&#39;ve forsaken the idea since our wicket routing is based on hash, changing that broke everything &#129335;‍♂️","body":"It worked but I&#39;ve forsaken the idea since our wicket routing is based on hash, changing that broke everything 🤷‍♂️"}],"answers":[{"tags":[],"owner":{"account_id":10512827,"reputation":6163,"user_id":7747942,"display_name":"Sylhare"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689015447,"creation_date":1689015447,"answer_id":76656578,"question_id":71931577,"body_markdown":"If it&#39;s to route to an external resource, you may use the [RedirectToUrlException](https://nightlies.apache.org/wicket/apidocs/8.x/org/apache/wicket/request/flow/RedirectToUrlException.html) in this case which\r\n\r\n&gt; Causes Wicket to interrupt current request processing and send a redirect to the given url. Use this if you want to redirect to an external or none Wicket url. If you want to redirect to a page use the RestartResponseException\r\n\r\nYou could use [RequestCycle](https://nightlies.apache.org/wicket/apidocs/8.x/org/apache/wicket/request/cycle/RequestCycle.html) to get help resolve the url of the current wicket page and throw the exception:\r\n\r\n```java\r\nthrow new RedirectToUrlException(currentUrl + &quot;#edit&quot;);\r\n```\r\n\r\n","title":"How to change the href of a wicket container?","body":"<p>If it's to route to an external resource, you may use the <a href=\"https://nightlies.apache.org/wicket/apidocs/8.x/org/apache/wicket/request/flow/RedirectToUrlException.html\" rel=\"nofollow noreferrer\">RedirectToUrlException</a> in this case which</p>\n<blockquote>\n<p>Causes Wicket to interrupt current request processing and send a redirect to the given url. Use this if you want to redirect to an external or none Wicket url. If you want to redirect to a page use the RestartResponseException</p>\n</blockquote>\n<p>You could use <a href=\"https://nightlies.apache.org/wicket/apidocs/8.x/org/apache/wicket/request/cycle/RequestCycle.html\" rel=\"nofollow noreferrer\">RequestCycle</a> to get help resolve the url of the current wicket page and throw the exception:</p>\n<pre class=\"lang-java prettyprint-override\"><code>throw new RedirectToUrlException(currentUrl + &quot;#edit&quot;);\n</code></pre>\n"}],"owner":{"account_id":22681491,"reputation":39,"user_id":16851799,"display_name":"syl-oh"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76656578,"answer_count":1,"score":1,"last_activity_date":1689015511,"creation_date":1650403777,"question_id":71931577,"body_markdown":"With wicket 6.18.0 and Java 8.\r\nI have a simple wicket panel:\r\n\r\n```xml\r\n&lt;!DOCTYPE HTML&gt;\r\n&lt;html xmlns:wicket=&quot;http://wicket.apache.org&quot;&gt;\r\n&lt;wicket:panel&gt;\r\n  &lt;wicket:container wicket:id=&quot;editSection&quot;&gt;\r\n       &lt;div class=&quot;item&quot;&gt;&lt;a wicket:id=&quot;edit&quot;&gt;&lt;wicket:message key=&quot;edit&quot; /&gt;&lt;/a&lt;/div&gt;\r\n  &lt;/wicket:container&gt;\r\n&lt;/wicket:panel&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\nAnd in my webpage I have something like that:\r\n\r\n```java\r\npublic class MainPage extends WebPage {\r\n   public MaintPage() {\r\n      WebMarkupContainer edit = new WebMarkupContainer(&quot;editSection&quot;);\r\n      edit.add(new AjaxHashLink(&quot;edit&quot;, &quot;edit&quot;));\r\n      add(edit.setVisible(true));\r\n   }\r\n}\r\n```\r\n\r\nBut on the url I have `#edit` at the end of the page when I click on my edit link due certain to the `AjaxHashLink`.\r\n\r\nBut I would like it to be `/edit`, but so I am thinking there&#39;s something that can be done to modify the `href` of the link.","title":"How to change the href of a wicket container?","body":"<p>With wicket 6.18.0 and Java 8.\nI have a simple wicket panel:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;!DOCTYPE HTML&gt;\n&lt;html xmlns:wicket=&quot;http://wicket.apache.org&quot;&gt;\n&lt;wicket:panel&gt;\n  &lt;wicket:container wicket:id=&quot;editSection&quot;&gt;\n       &lt;div class=&quot;item&quot;&gt;&lt;a wicket:id=&quot;edit&quot;&gt;&lt;wicket:message key=&quot;edit&quot; /&gt;&lt;/a&lt;/div&gt;\n  &lt;/wicket:container&gt;\n&lt;/wicket:panel&gt;\n&lt;/html&gt;\n</code></pre>\n<p>And in my webpage I have something like that:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MainPage extends WebPage {\n   public MaintPage() {\n      WebMarkupContainer edit = new WebMarkupContainer(&quot;editSection&quot;);\n      edit.add(new AjaxHashLink(&quot;edit&quot;, &quot;edit&quot;));\n      add(edit.setVisible(true));\n   }\n}\n</code></pre>\n<p>But on the url I have <code>#edit</code> at the end of the page when I click on my edit link due certain to the <code>AjaxHashLink</code>.</p>\n<p>But I would like it to be <code>/edit</code>, but so I am thinking there's something that can be done to modify the <code>href</code> of the link.</p>\n"},{"tags":["java","spring-boot","dependency-properties"],"answers":[{"tags":[],"owner":{"account_id":11719774,"reputation":44,"user_id":8579083,"display_name":"Aditya Ajmera"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689014869,"creation_date":1689014408,"answer_id":76656471,"question_id":76655892,"body_markdown":"Welcome to stack over flow community.\r\n\r\nI have tried running your sample code here assuming you are providing absolute path in value field of @PropertySource. \r\nYou have configured the annotations correctly, and everything spring is doing is as expected.\r\n\r\nTo understand what is happening, we need to understand the order of external properties which gets considered by [spring][1]\r\n\r\nYou are putting properties in 2 places:\r\n\r\n 1. external file (credentials.json &amp; secret.id.properties not named as ```application.properties or application-{profile}.properties```)\r\n 2.```application.properties``` inside your jar\r\n\r\nSo as per order of preference of property, ```application.properties``` in your jar gets precedence over the external property not named as ```application.properties``` (credentials.json &amp; secret.id.properties i.e. @PropertySource annotations on your @Configuration classes.).\r\n\r\nTo verify this, you can comment out property in ```application.properties``` in your jar, and the properties from external files will be loaded.\r\n\r\n \r\n\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/2.1.9.RELEASE/reference/html/boot-features-external-config.html","title":"@PropertySource returns &#39;Properties location not resolvable: (No such file or directory)&#39;","body":"<p>Welcome to stack over flow community.</p>\n<p>I have tried running your sample code here assuming you are providing absolute path in value field of @PropertySource.\nYou have configured the annotations correctly, and everything spring is doing is as expected.</p>\n<p>To understand what is happening, we need to understand the order of external properties which gets considered by <a href=\"https://docs.spring.io/spring-boot/docs/2.1.9.RELEASE/reference/html/boot-features-external-config.html\" rel=\"nofollow noreferrer\">spring</a></p>\n<p>You are putting properties in 2 places:</p>\n<ol>\n<li>external file (credentials.json &amp; secret.id.properties not named as <code>application.properties or application-{profile}.properties</code>)\n2.<code>application.properties</code> inside your jar</li>\n</ol>\n<p>So as per order of preference of property, <code>application.properties</code> in your jar gets precedence over the external property not named as <code>application.properties</code> (credentials.json &amp; secret.id.properties i.e. @PropertySource annotations on your @Configuration classes.).</p>\n<p>To verify this, you can comment out property in <code>application.properties</code> in your jar, and the properties from external files will be loaded.</p>\n"}],"owner":{"account_id":28881527,"reputation":3,"user_id":22120911,"display_name":"Rachel Kim"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":225,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76656471,"answer_count":1,"score":0,"last_activity_date":1689014869,"creation_date":1689008643,"question_id":76655892,"body_markdown":"I have a config file that is meant to use @PropertySource to set values. However it seems like it is not working (below)\r\n\r\n```java\r\n\r\n@Configuration\r\n@PropertySources({\r\n        @PropertySource(value = &quot;file:/Users/myUser/etc/secrets/credentials.json&quot;,\r\n                ignoreResourceNotFound = true),\r\n        @PropertySource(value = &quot;file:/Users/myUser/etc/secrets/secret.id.properties&quot;,\r\n                ignoreResourceNotFound = true)})\r\npublic class SpringConfig {\r\n    @Value(&quot;${secret.id}&quot;)\r\n    private String projectID;\r\n\r\n    @Autowired\r\n    private Environment env;\r\n\r\n    @Bean\r\n    public static PropertySourcesPlaceholderConfigurer propertySourcesPlaceholderConfigurer() {\r\n        return new PropertySourcesPlaceholderConfigurer();\r\n    }\r\n\r\n    public String getId() {\r\n        return env.getProperty(&quot;secret.id&quot;);\r\n    }\r\n}\r\n\r\n```\r\nI have set up dummy files in /Users/myUser/etc/secrets and have defined both credentials.json and secret.id.properties files. \r\nHowever when I run the application and call the config file&#39;s getId() method, it returns the id that is defined in the application.properties file, not in the @PropertySource path &#39;/Users/myUser/etc/secrets/secret.id.properties&#39; I suspect it can&#39;t find the path. (same for credentials.json)\r\nBut the path file is definitely correct. \r\n\r\nBy the way, the inside of secret.id.properties file is:\r\n```\r\nspring.cloud.gcp.bigquery.project-id=project-id\r\n```\r\n\r\nHow can I have the code actually fetch from the files in etc/secrets/ instead of from my applications.properties (or have my secrets/secret.id.properties be put into ```spring.cloud.gcp.bigquery.project-id=${spring.cloud.gcp.bigquery.project-id}``` in my application.properties?\r\n\r\nI also tried to define in my applications.properties file\r\n```\r\nspring.cloud.gcp.bigquery.project-id=${secret.id}\r\n```\r\nand tried \r\n```\r\nspring.cloud.gcp.bigquery.project-id=${spring.cloud.gcp.bigquery.project-id}\r\n```\r\nbut they both don&#39;t work and gives me an error.\r\n\r\nI also checked file path","title":"@PropertySource returns &#39;Properties location not resolvable: (No such file or directory)&#39;","body":"<p>I have a config file that is meant to use @PropertySource to set values. However it seems like it is not working (below)</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n@Configuration\n@PropertySources({\n        @PropertySource(value = &quot;file:/Users/myUser/etc/secrets/credentials.json&quot;,\n                ignoreResourceNotFound = true),\n        @PropertySource(value = &quot;file:/Users/myUser/etc/secrets/secret.id.properties&quot;,\n                ignoreResourceNotFound = true)})\npublic class SpringConfig {\n    @Value(&quot;${secret.id}&quot;)\n    private String projectID;\n\n    @Autowired\n    private Environment env;\n\n    @Bean\n    public static PropertySourcesPlaceholderConfigurer propertySourcesPlaceholderConfigurer() {\n        return new PropertySourcesPlaceholderConfigurer();\n    }\n\n    public String getId() {\n        return env.getProperty(&quot;secret.id&quot;);\n    }\n}\n\n</code></pre>\n<p>I have set up dummy files in /Users/myUser/etc/secrets and have defined both credentials.json and secret.id.properties files.\nHowever when I run the application and call the config file's getId() method, it returns the id that is defined in the application.properties file, not in the @PropertySource path '/Users/myUser/etc/secrets/secret.id.properties' I suspect it can't find the path. (same for credentials.json)\nBut the path file is definitely correct.</p>\n<p>By the way, the inside of secret.id.properties file is:</p>\n<pre><code>spring.cloud.gcp.bigquery.project-id=project-id\n</code></pre>\n<p>How can I have the code actually fetch from the files in etc/secrets/ instead of from my applications.properties (or have my secrets/secret.id.properties be put into <code>spring.cloud.gcp.bigquery.project-id=${spring.cloud.gcp.bigquery.project-id}</code> in my application.properties?</p>\n<p>I also tried to define in my applications.properties file</p>\n<pre><code>spring.cloud.gcp.bigquery.project-id=${secret.id}\n</code></pre>\n<p>and tried</p>\n<pre><code>spring.cloud.gcp.bigquery.project-id=${spring.cloud.gcp.bigquery.project-id}\n</code></pre>\n<p>but they both don't work and gives me an error.</p>\n<p>I also checked file path</p>\n"},{"tags":["java","spring-boot","spring-security"],"owner":{"account_id":21212970,"reputation":86,"user_id":15601177,"display_name":"berry.11"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689014817,"creation_date":1688979307,"question_id":76652191,"body_markdown":"I have a code below which is an appoinment Hospital System for users.\r\nBut securityConfig part didn&#39;t work. I get the error:\r\n\r\nThe bean &#39;delegatingApplicationListener&#39;, defined in class path resource [userManagementSystemHospital/hospitalSystem/config/SecurityConfig.class], could not be registered. A bean with that name has already been defined in class path resource [org/springframework/security/config/annotation/web/configuration/WebSecurityConfiguration.class] and overriding is disabled.\r\n\r\nHere the code;\r\n```\r\n@Bean\r\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n    http.authorizeRequests(authorize -&gt; authorize\r\n                    .anyRequest().authenticated())\r\n            .formLogin(withDefaults())\r\n            .httpBasic(withDefaults());\r\n    return http.build();\r\n}\r\n\r\n@Bean\r\npublic BCryptPasswordEncoder passwordEncoder() {\r\n    return new BCryptPasswordEncoder();\r\n}\r\n```\r\n\r\npom.xml:\r\n\r\n```\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-boot-starter-oauth2-authorization-server&lt;/artifactId&gt;\r\n&lt;/dependency\r\n\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\r\n\t&lt;scope&gt;test&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n```","title":"java spring security config","body":"<p>I have a code below which is an appoinment Hospital System for users.\nBut securityConfig part didn't work. I get the error:</p>\n<p>The bean 'delegatingApplicationListener', defined in class path resource [userManagementSystemHospital/hospitalSystem/config/SecurityConfig.class], could not be registered. A bean with that name has already been defined in class path resource [org/springframework/security/config/annotation/web/configuration/WebSecurityConfiguration.class] and overriding is disabled.</p>\n<p>Here the code;</p>\n<pre><code>@Bean\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n    http.authorizeRequests(authorize -&gt; authorize\n                    .anyRequest().authenticated())\n            .formLogin(withDefaults())\n            .httpBasic(withDefaults());\n    return http.build();\n}\n\n@Bean\npublic BCryptPasswordEncoder passwordEncoder() {\n    return new BCryptPasswordEncoder();\n}\n</code></pre>\n<p>pom.xml:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-oauth2-authorization-server&lt;/artifactId&gt;\n&lt;/dependency\n\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","spring","database","asynchronous","transactions"],"comments":[{"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"score":0,"creation_date":1689019803,"post_id":76656509,"comment_id":135151443,"body_markdown":"Some DBMS&#39;s allow you to execute a statement like, `LOCK TABLE some_table`.   I don&#39;t know what you&#39;re using, but you could look into whether it supports lock and unlock.  In a clustered app, you&#39;re going to want something simple like this","body":"Some DBMS&#39;s allow you to execute a statement like, <code>LOCK TABLE some_table</code>.   I don&#39;t know what you&#39;re using, but you could look into whether it supports lock and unlock.  In a clustered app, you&#39;re going to want something simple like this"}],"owner":{"account_id":20972956,"reputation":9,"user_id":15409697,"display_name":"Limbo1111"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689014752,"creation_date":1689014752,"question_id":76656509,"body_markdown":"Please let me know what is the best way to do it. The case is as follows: I need to upload an excel file, parse it based on the data in it, make a call to an external service, and then aggregate all the information and put it into tables in the database. The method will be called asynchronously in order to release the frontend, a quick response is not needed, but there is a problem. At the time of data processing, I cannot allow anyone to write to certain tables in the database, that is, if the client wants to send the same file again until it has been processed, I cannot allow this. The problem is exacerbated by the fact that I have several servers running outside the cluster, but with a common database. Accordingly, I need to do synchronization through the database. What is the best way to do this? So far, I have not come up with anything better than to make a separate transactional method. Anyone have any ideas?","title":"Plain Spring @Async @Transactionl with database lock","body":"<p>Please let me know what is the best way to do it. The case is as follows: I need to upload an excel file, parse it based on the data in it, make a call to an external service, and then aggregate all the information and put it into tables in the database. The method will be called asynchronously in order to release the frontend, a quick response is not needed, but there is a problem. At the time of data processing, I cannot allow anyone to write to certain tables in the database, that is, if the client wants to send the same file again until it has been processed, I cannot allow this. The problem is exacerbated by the fact that I have several servers running outside the cluster, but with a common database. Accordingly, I need to do synchronization through the database. What is the best way to do this? So far, I have not come up with anything better than to make a separate transactional method. Anyone have any ideas?</p>\n"},{"tags":["java","json","jackson","mixins"],"comments":[{"owner":{"account_id":19205353,"reputation":5498,"user_id":14032355,"display_name":"ikhvjs"},"score":0,"creation_date":1688655548,"post_id":76623846,"comment_id":135105934,"body_markdown":"Have a look of [objectMapper.registerSubtypes()](https://fasterxml.github.io/jackson-databind/javadoc/2.7/com/fasterxml/jackson/databind/ObjectMapper.html#registerSubtypes(java.lang.Class...))","body":"Have a look of <a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.7/com/fasterxml/jackson/databind/ObjectMapper.html#registerSubtypes(java.lang.Class...)\" rel=\"nofollow noreferrer\">objectMapper.registerSubtypes()</a>"},{"owner":{"account_id":19205353,"reputation":5498,"user_id":14032355,"display_name":"ikhvjs"},"score":0,"creation_date":1688656269,"post_id":76623846,"comment_id":135106088,"body_markdown":"Related question: https://stackoverflow.com/q/34079050/14032355","body":"Related question: <a href=\"https://stackoverflow.com/q/34079050/14032355\">stackoverflow.com/q/34079050/14032355</a>"},{"owner":{"account_id":1198068,"reputation":81,"user_id":1169369,"display_name":"nomusicnolife"},"score":0,"creation_date":1689014531,"post_id":76623846,"comment_id":135150481,"body_markdown":"Thanks @ikhvjs, that related question helped me to find the answer I needed, which I posted below.","body":"Thanks @ikhvjs, that related question helped me to find the answer I needed, which I posted below."}],"answers":[{"tags":[],"owner":{"account_id":1198068,"reputation":81,"user_id":1169369,"display_name":"nomusicnolife"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689014468,"creation_date":1689014468,"answer_id":76656479,"question_id":76623846,"body_markdown":"Inspired by [the example here](https://stackoverflow.com/questions/34079050/add-subtype-information-at-runtime-using-jackson-for-polymorphism), I was able to achieve the desired behavior:\r\n\r\nFirst, use `@JsonTypeInfo` in the interface implemented by all my classes:\r\n\r\n```java\r\n@JsonTypeInfo(use = JsonTypeInfo.Id.NAME)\r\npublic interface Figure {\r\n  // ...\r\n}\r\n```\r\n\r\nThen, register all my classes as subtypes into the ObjectMapper:\r\n\r\n```java\r\npublic void configure(final ObjectMapper mapper) {\r\n  mapper.registerSubtypes(new NamedType(Triangle.class));\r\n  mapper.registerSubtypes(new NamedType(Square.class));\r\n  mapper.registerSubtypes(new NamedType(Circle.class));\r\n}\r\n```\r\n\r\nOf course the calls to `registerSubtypes(...)` can be placed in different methods if needed.","title":"Alternative to Jackson mixins for a variable number of subtypes?","body":"<p>Inspired by <a href=\"https://stackoverflow.com/questions/34079050/add-subtype-information-at-runtime-using-jackson-for-polymorphism\">the example here</a>, I was able to achieve the desired behavior:</p>\n<p>First, use <code>@JsonTypeInfo</code> in the interface implemented by all my classes:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@JsonTypeInfo(use = JsonTypeInfo.Id.NAME)\npublic interface Figure {\n  // ...\n}\n</code></pre>\n<p>Then, register all my classes as subtypes into the ObjectMapper:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void configure(final ObjectMapper mapper) {\n  mapper.registerSubtypes(new NamedType(Triangle.class));\n  mapper.registerSubtypes(new NamedType(Square.class));\n  mapper.registerSubtypes(new NamedType(Circle.class));\n}\n</code></pre>\n<p>Of course the calls to <code>registerSubtypes(...)</code> can be placed in different methods if needed.</p>\n"}],"owner":{"account_id":1198068,"reputation":81,"user_id":1169369,"display_name":"nomusicnolife"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689014468,"creation_date":1688588983,"question_id":76623846,"body_markdown":"I am writing a library, intended to be used by other apps, containing a bunch of classes that implement the same interface, like in this example:\r\n\r\n```java\r\npublic interface Figure {\r\n  // ...\r\n}\r\n\r\npublic class Triangle implements Figure {\r\n  // ...\r\n}\r\n\r\npublic class Square implements Figure {\r\n  // ...\r\n}\r\n\r\npublic class Circle implements Figure {\r\n  // ...\r\n}\r\n```\r\n\r\nAnd then I have a mixin for all the classes above:\r\n\r\n```java\r\n  @JsonTypeInfo(use = JsonTypeInfo.Id.NAME)\r\n  @JsonSubTypes({\r\n      @JsonSubTypes.Type(Triangle.class),\r\n      @JsonSubTypes.Type(Square.class),\r\n      @JsonSubTypes.Type(Circle.class)\r\n  })\r\n  public interface FigureMixin {\r\n\r\n  }\r\n```\r\n\r\nI can add this mixin to the `ObjectMapper` as usual:\r\n\r\n```java\r\nObjectMapper mapper = new ObjectMapper();\r\nmapper.addMixIn(Figure.class, FigureMixin.class);\r\n```\r\n\r\nThe problem is that users of the library might want to provide their own classes that implement `Figure`. Therefore, the annotation approach is not suitable, because I don&#39;t know at compile time how many JSON subtypes (i.e. classes implementing `Figure`) there will be.\r\n\r\nIs there any way to register the subtypes at runtime for all available classes implementing the common interface, i.e. achieve the same mixin configuration but without using annotations?\r\n\r\nThanks in advance.","title":"Alternative to Jackson mixins for a variable number of subtypes?","body":"<p>I am writing a library, intended to be used by other apps, containing a bunch of classes that implement the same interface, like in this example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface Figure {\n  // ...\n}\n\npublic class Triangle implements Figure {\n  // ...\n}\n\npublic class Square implements Figure {\n  // ...\n}\n\npublic class Circle implements Figure {\n  // ...\n}\n</code></pre>\n<p>And then I have a mixin for all the classes above:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  @JsonTypeInfo(use = JsonTypeInfo.Id.NAME)\n  @JsonSubTypes({\n      @JsonSubTypes.Type(Triangle.class),\n      @JsonSubTypes.Type(Square.class),\n      @JsonSubTypes.Type(Circle.class)\n  })\n  public interface FigureMixin {\n\n  }\n</code></pre>\n<p>I can add this mixin to the <code>ObjectMapper</code> as usual:</p>\n<pre class=\"lang-java prettyprint-override\"><code>ObjectMapper mapper = new ObjectMapper();\nmapper.addMixIn(Figure.class, FigureMixin.class);\n</code></pre>\n<p>The problem is that users of the library might want to provide their own classes that implement <code>Figure</code>. Therefore, the annotation approach is not suitable, because I don't know at compile time how many JSON subtypes (i.e. classes implementing <code>Figure</code>) there will be.</p>\n<p>Is there any way to register the subtypes at runtime for all available classes implementing the common interface, i.e. achieve the same mixin configuration but without using annotations?</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","spring","spring-boot","patch"],"comments":[{"owner":{"account_id":17741504,"reputation":1083,"user_id":12881733,"display_name":"Bill Mair"},"score":0,"creation_date":1689008732,"post_id":76655858,"comment_id":135149448,"body_markdown":"Have you tried &quot;curl -X PATCH ...&quot;, just to make sure it isn&#39;t your JS code/browser?","body":"Have you tried &quot;curl -X PATCH ...&quot;, just to make sure it isn&#39;t your JS code/browser?"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1689009497,"post_id":76655858,"comment_id":135149595,"body_markdown":"Please read: [Why should I not upload images of code/data/errors?](https://meta.stackoverflow.com/questions/285551/why-not-upload-images-of-code-errors-when-asking-a-question) --- &quot;*`&lt;form method=&quot;post&quot; ....`*&quot; - This part is executing a `POST`, not a `PATCH`.","body":"Please read: <a href=\"https://meta.stackoverflow.com/questions/285551/why-not-upload-images-of-code-errors-when-asking-a-question\">Why should I not upload images of code/data/errors?</a> --- &quot;<i><code>&lt;form method=&quot;post&quot; ....</code></i>&quot; - This part is executing a <code>POST</code>, not a <code>PATCH</code>."},{"owner":{"account_id":28971703,"reputation":1,"user_id":22191849,"display_name":"verabezf"},"score":0,"creation_date":1689013019,"post_id":76655858,"comment_id":135150193,"body_markdown":"@BillMair I tried it right now and I see that it&#39;s not a server problem, because the server responded correctly. Thank you, now I&#39;ll try to understand what the problem really is","body":"@BillMair I tried it right now and I see that it&#39;s not a server problem, because the server responded correctly. Thank you, now I&#39;ll try to understand what the problem really is"},{"owner":{"account_id":28971703,"reputation":1,"user_id":22191849,"display_name":"verabezf"},"score":0,"creation_date":1689013239,"post_id":76655858,"comment_id":135150246,"body_markdown":"@Turing85 thanks for your note about the screenshot! Yes, that part is executing a POST, but I use js for preventing the default logic, so requests are sent with PATCH. And it turned out that the problem is actually not in the server.","body":"@Turing85 thanks for your note about the screenshot! Yes, that part is executing a POST, but I use js for preventing the default logic, so requests are sent with PATCH. And it turned out that the problem is actually not in the server."}],"owner":{"account_id":28971703,"reputation":1,"user_id":22191849,"display_name":"verabezf"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689014021,"creation_date":1689008317,"question_id":76655858,"body_markdown":"I need to have an opportunity to handle Patch request, namely getting a person to update from an HTML form.\r\n\r\nTo do this, I declared this method that handles patch requests:\r\n\r\n```\r\n @PatchMapping(path = &quot;/person/update&quot;, consumes = &quot;application/json&quot;)\r\n    public ResponseEntity&lt;Person&gt; updatePerson(@RequestBody Person person) {\r\n        try {\r\n            var updatedUser = service.update(person);\r\n            return ResponseEntity.ok(updatedUser);\r\n        } catch (Exception e) {\r\n            //\r\n            return null;\r\n        }\r\n    }\r\n```\r\n\r\nAnd here is the HTML form for updating Person:\r\n\r\n```\r\n&lt;!DOCTYPE html &gt;\r\n&lt;html lang=&quot;en&quot;&gt;\r\n&lt;head&gt;\r\n    &lt;title&gt;Update user&lt;/title&gt;\r\n    &lt;script src=&quot;/js/updateUserHandler.js&quot;&gt;&lt;/script&gt;\r\n&lt;/head&gt;\r\n&lt;body&gt;\r\n&lt;div&gt;\r\n    &lt;form method=&quot;post&quot; action=&quot;/person/update&quot; th:object=&quot;${person}&quot; id=&quot;updateUser&quot;&gt;\r\n        &lt;nobr&gt;PERSON DATA&lt;/nobr&gt;\r\n        &lt;input type=&quot;submit&quot; name=&quot;save&quot; value=&quot;save&quot;&gt;\r\n        &lt;input type=&quot;text&quot; id=&quot;name&quot; name=&quot;name&quot; th:value=&quot;${person.getName()}&quot;&gt;\r\n        &lt;br&gt;\r\n        &lt;nobr&gt;User name:&lt;/nobr&gt;\r\n        &lt;input type=&quot;text&quot; name=&quot;surname&quot; th:value=&quot;${person.getSurname()}&quot;&gt;\r\n        &lt;br&gt;\r\n    &lt;/form&gt;\r\n&lt;/div&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\nI know I can&#39;t directly send data from an HTML form using the Patch method, so I override the default logic of sending form data with the Post method using the following JS:\r\n\r\n```\r\nwindow.addEventListener(&#39;load&#39;,\r\n    () =&gt; {\r\n        const myForm = document.getElementById(&#39;updateUser&#39;);\r\n        myForm.addEventListener(&#39;submit&#39;,\r\n            (event) =&gt; {\r\n                event.preventDefault();\r\n                const data = new FormData(myForm);\r\n\r\n                const json = {};\r\n                data.forEach((value, key) =&gt; json[key] = value);\r\n                const jsonStr = JSON.stringify(json);\r\n\r\n                const endpoint = `/person/update`;\r\n\r\n                fetch(endpoint, { // THIS LINE THROWS AN ERROR THAT THE METHOD IS NOT ALLOWED\r\n                    method: &#39;patch&#39;,\r\n                    body: jsonStr,\r\n                    headers: {&#39;Content-Type&#39;: &#39;application/json&#39;}\r\n                })            \r\n          })\r\n    })\r\n```\r\n\r\nSo, the problem is that after doing all the above steps, I get this response:\r\n\r\n    {\r\n        &quot;timestamp&quot;: &quot;2023-07-10T18:24:53.019+00:00&quot;,\r\n        &quot;status&quot;: 405,\r\n        &quot;error&quot;: &quot;Method Not Allowed&quot;,\r\n        &quot;path&quot;: &quot;/person/update&quot;\r\n    }\r\n\r\nAt the same time, the server returns the correct response if I send a request by curl:\r\n\r\n    curl -X PATCH --header &quot;Content-Type: application/json&quot; --header &#39;Accept: application/json&#39; \\\r\n      --data &#39;{&quot;name&quot;: &quot;Vanes&quot;, &quot;surname&quot;: &quot;Kann&quot;, &quot;age&quot;: &quot;25&quot;}&#39; \\\r\n     http://localhost:8080/person/update\r\n\r\n","title":"Method Patch isn&#39;t allowed in Spring Boot","body":"<p>I need to have an opportunity to handle Patch request, namely getting a person to update from an HTML form.</p>\n<p>To do this, I declared this method that handles patch requests:</p>\n<pre><code> @PatchMapping(path = &quot;/person/update&quot;, consumes = &quot;application/json&quot;)\n    public ResponseEntity&lt;Person&gt; updatePerson(@RequestBody Person person) {\n        try {\n            var updatedUser = service.update(person);\n            return ResponseEntity.ok(updatedUser);\n        } catch (Exception e) {\n            //\n            return null;\n        }\n    }\n</code></pre>\n<p>And here is the HTML form for updating Person:</p>\n<pre><code>&lt;!DOCTYPE html &gt;\n&lt;html lang=&quot;en&quot;&gt;\n&lt;head&gt;\n    &lt;title&gt;Update user&lt;/title&gt;\n    &lt;script src=&quot;/js/updateUserHandler.js&quot;&gt;&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;div&gt;\n    &lt;form method=&quot;post&quot; action=&quot;/person/update&quot; th:object=&quot;${person}&quot; id=&quot;updateUser&quot;&gt;\n        &lt;nobr&gt;PERSON DATA&lt;/nobr&gt;\n        &lt;input type=&quot;submit&quot; name=&quot;save&quot; value=&quot;save&quot;&gt;\n        &lt;input type=&quot;text&quot; id=&quot;name&quot; name=&quot;name&quot; th:value=&quot;${person.getName()}&quot;&gt;\n        &lt;br&gt;\n        &lt;nobr&gt;User name:&lt;/nobr&gt;\n        &lt;input type=&quot;text&quot; name=&quot;surname&quot; th:value=&quot;${person.getSurname()}&quot;&gt;\n        &lt;br&gt;\n    &lt;/form&gt;\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>I know I can't directly send data from an HTML form using the Patch method, so I override the default logic of sending form data with the Post method using the following JS:</p>\n<pre><code>window.addEventListener('load',\n    () =&gt; {\n        const myForm = document.getElementById('updateUser');\n        myForm.addEventListener('submit',\n            (event) =&gt; {\n                event.preventDefault();\n                const data = new FormData(myForm);\n\n                const json = {};\n                data.forEach((value, key) =&gt; json[key] = value);\n                const jsonStr = JSON.stringify(json);\n\n                const endpoint = `/person/update`;\n\n                fetch(endpoint, { // THIS LINE THROWS AN ERROR THAT THE METHOD IS NOT ALLOWED\n                    method: 'patch',\n                    body: jsonStr,\n                    headers: {'Content-Type': 'application/json'}\n                })            \n          })\n    })\n</code></pre>\n<p>So, the problem is that after doing all the above steps, I get this response:</p>\n<pre><code>{\n    &quot;timestamp&quot;: &quot;2023-07-10T18:24:53.019+00:00&quot;,\n    &quot;status&quot;: 405,\n    &quot;error&quot;: &quot;Method Not Allowed&quot;,\n    &quot;path&quot;: &quot;/person/update&quot;\n}\n</code></pre>\n<p>At the same time, the server returns the correct response if I send a request by curl:</p>\n<pre><code>curl -X PATCH --header &quot;Content-Type: application/json&quot; --header 'Accept: application/json' \\\n  --data '{&quot;name&quot;: &quot;Vanes&quot;, &quot;surname&quot;: &quot;Kann&quot;, &quot;age&quot;: &quot;25&quot;}' \\\n http://localhost:8080/person/update\n</code></pre>\n"},{"tags":["java","pdfbox"],"comments":[{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":3,"creation_date":1688965450,"post_id":76649060,"comment_id":135140236,"body_markdown":"In PDFDebugger you found the definition of the page labels of the document. In RUPS you looked at how it interprets that definition. You can also find the raw definition using RUPS by navigating to the corresponding document node. PDFDebugger on the other hand does not interpret the page label devotion. If you want to interpret the meaning of the definition, simply look at the pdf specification.","body":"In PDFDebugger you found the definition of the page labels of the document. In RUPS you looked at how it interprets that definition. You can also find the raw definition using RUPS by navigating to the corresponding document node. PDFDebugger on the other hand does not interpret the page label devotion. If you want to interpret the meaning of the definition, simply look at the pdf specification."},{"owner":{"account_id":3142733,"reputation":616,"user_id":2657875,"accept_rate":77,"display_name":"menteith"},"score":0,"creation_date":1688995541,"post_id":76649060,"comment_id":135146263,"body_markdown":"@TilmanHausherr I&#39;ve fixed the link.","body":"@TilmanHausherr I&#39;ve fixed the link."},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":3,"creation_date":1689006873,"post_id":76649060,"comment_id":135149095,"body_markdown":"PDFDebugger displays the page labels properly when in page view mode. What you&#39;re seeing is the raw page labels. &quot;Cove&quot; is a prefix. &quot;St&quot; 18 means the &quot;r&quot; after &quot;Cove&quot;. The &quot;r&quot; is the numbering style &quot;roman&quot;. Yes, it looks weird, but it&#39;s valid.","body":"PDFDebugger displays the page labels properly when in page view mode. What you&#39;re seeing is the raw page labels. &quot;Cove&quot; is a prefix. &quot;St&quot; 18 means the &quot;r&quot; after &quot;Cove&quot;. The &quot;r&quot; is the numbering style &quot;roman&quot;. Yes, it looks weird, but it&#39;s valid."},{"owner":{"account_id":3142733,"reputation":616,"user_id":2657875,"accept_rate":77,"display_name":"menteith"},"score":0,"creation_date":1689100106,"post_id":76649060,"comment_id":135164473,"body_markdown":"Thank you guys. Long story short, ISO 32000 for the rescue.","body":"Thank you guys. Long story short, ISO 32000 for the rescue."},{"owner":{"account_id":3142733,"reputation":616,"user_id":2657875,"accept_rate":77,"display_name":"menteith"},"score":0,"creation_date":1689287378,"post_id":76649060,"comment_id":135196179,"body_markdown":"@mkl and Tilman Hausherr\nThanks to your comments I&#39;ve written my own interpreter of page labels. Would you be so kind to do code review on appropriate SO page?","body":"@mkl and Tilman Hausherr Thanks to your comments I&#39;ve written my own interpreter of page labels. Would you be so kind to do code review on appropriate SO page?"},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1689312733,"post_id":76649060,"comment_id":135198341,"body_markdown":"Which SO page exactly?","body":"Which SO page exactly?"},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1689325296,"post_id":76649060,"comment_id":135200448,"body_markdown":"Why write your own interpreter when you could use the existing PDFBox code? `PDPageLabels pageLabels = document.getDocumentCatalog().getPageLabels(); String[] labels = pageLabels.getLabelsByPageIndices();`","body":"Why write your own interpreter when you could use the existing PDFBox code? <code>PDPageLabels pageLabels = document.getDocumentCatalog().getPageLabels(); String[] labels = pageLabels.getLabelsByPageIndices();</code>"},{"owner":{"account_id":3142733,"reputation":616,"user_id":2657875,"accept_rate":77,"display_name":"menteith"},"score":0,"creation_date":1689325994,"post_id":76649060,"comment_id":135200588,"body_markdown":"@mkl I&#39;d like to show my code on `https://codereview.stackexchange.com`.","body":"@mkl I&#39;d like to show my code on <code>https:&#47;&#47;codereview.stackexchange.com</code>."},{"owner":{"account_id":3142733,"reputation":616,"user_id":2657875,"accept_rate":77,"display_name":"menteith"},"score":1,"creation_date":1689326080,"post_id":76649060,"comment_id":135200601,"body_markdown":"@TilmanHausherr I want to remove some pages in PDF documents and have page labels adjusted. Interpreting page labels is a first step towards this goal.","body":"@TilmanHausherr I want to remove some pages in PDF documents and have page labels adjusted. Interpreting page labels is a first step towards this goal."},{"owner":{"account_id":3142733,"reputation":616,"user_id":2657875,"accept_rate":77,"display_name":"menteith"},"score":0,"creation_date":1689429636,"post_id":76649060,"comment_id":135213986,"body_markdown":"If somebody is interested in the actual code, here it is: https://codereview.stackexchange.com/questions/286078/java-code-showing-page-labels-from-pdf-files","body":"If somebody is interested in the actual code, here it is: <a href=\"https://codereview.stackexchange.com/questions/286078/java-code-showing-page-labels-from-pdf-files\" title=\"java code showing page labels from pdf files\">codereview.stackexchange.com/questions/286078/&hellip;</a>"},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":0,"creation_date":1689604956,"post_id":76649060,"comment_id":135233389,"body_markdown":"*&quot;the actual code&quot;* - @J_H already did a nice first review.","body":"<i>&quot;the actual code&quot;</i> - @J_H already did a nice first review."}],"owner":{"account_id":3142733,"reputation":616,"user_id":2657875,"accept_rate":77,"display_name":"menteith"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689013515,"creation_date":1688929173,"question_id":76649060,"body_markdown":"I&#39;m writing simple application changing page labels in pdf files. I can quite easily change (or add) page labels but I don&#39;t understand the way how they are shown by `PDFBox`. Let&#39;s take for example a [sample pdf file][1].\r\n\r\n`iText RUPS` shows quite easy to understand page labels:\r\n\r\n[![enter image description here][2]][2] \r\n\r\n`PDFBox PDFDebugger`, on the other hand, shows:\r\n\r\n[![enter image description here][3]][3]\r\n\r\nFirst page, labelled `Empty` is shown the same way in both debug application. However, When it comes to second label, `iText RUPS` shows `Cover` while `PDFBox PDFDebugger` some hard to interpret data. So, my question is: how do I interpret data given by `PDFBox` (API and debug application)?\r\n\r\n\r\n  [1]: https://easyupload.io/q60e1s\r\n  [2]: https://i.stack.imgur.com/2SLlE.png\r\n  [3]: https://i.stack.imgur.com/3WuW4.png","title":"Interpreting page labels from pdfbox","body":"<p>I'm writing simple application changing page labels in pdf files. I can quite easily change (or add) page labels but I don't understand the way how they are shown by <code>PDFBox</code>. Let's take for example a <a href=\"https://easyupload.io/q60e1s\" rel=\"nofollow noreferrer\">sample pdf file</a>.</p>\n<p><code>iText RUPS</code> shows quite easy to understand page labels:</p>\n<p><a href=\"https://i.stack.imgur.com/2SLlE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2SLlE.png\" alt=\"enter image description here\" /></a></p>\n<p><code>PDFBox PDFDebugger</code>, on the other hand, shows:</p>\n<p><a href=\"https://i.stack.imgur.com/3WuW4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3WuW4.png\" alt=\"enter image description here\" /></a></p>\n<p>First page, labelled <code>Empty</code> is shown the same way in both debug application. However, When it comes to second label, <code>iText RUPS</code> shows <code>Cover</code> while <code>PDFBox PDFDebugger</code> some hard to interpret data. So, my question is: how do I interpret data given by <code>PDFBox</code> (API and debug application)?</p>\n"},{"tags":["java","spring","spring-boot","spring-security","thymeleaf"],"comments":[{"owner":{"account_id":17750,"reputation":25470,"user_id":40064,"accept_rate":69,"display_name":"Wim Deblauwe"},"score":0,"creation_date":1689140721,"post_id":76656070,"comment_id":135169116,"body_markdown":"Try using `@AuthenticationPrincipal(errorOnInvalidType=true) User user`. That should give you an error most likely that the principal is not of the class `User`, but some other class.","body":"Try using <code>@AuthenticationPrincipal(errorOnInvalidType=true) User user</code>. That should give you an error most likely that the principal is not of the class <code>User</code>, but some other class."},{"owner":{"account_id":23369527,"reputation":73,"user_id":17440626,"display_name":"ruben"},"score":0,"creation_date":1689604930,"post_id":76656070,"comment_id":135233380,"body_markdown":"Hi @WimDeblauwe and thank you for your answer. You are right it isn&#39;t the class `User` which is expected but another one , in my case it is `UserDetails`. If my understanding of Spring Security is good, the expected class of `@AuthenticationPrincipal` is defined in the SpringSecurityConfig class, am I right ?","body":"Hi @WimDeblauwe and thank you for your answer. You are right it isn&#39;t the class <code>User</code> which is expected but another one , in my case it is <code>UserDetails</code>. If my understanding of Spring Security is good, the expected class of <code>@AuthenticationPrincipal</code> is defined in the SpringSecurityConfig class, am I right ?"}],"owner":{"account_id":23369527,"reputation":73,"user_id":17440626,"display_name":"ruben"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1689013422,"creation_date":1689010367,"question_id":76656070,"body_markdown":"I am trying to build an application where users can post products.\r\nDatabase looks like this :\r\n\r\n```\r\nuser     \r\n--------\r\nusername\r\npassword\r\n```\r\n```\r\nproduct\r\n-------\r\nname\r\nprice\r\nidUser\r\n```\r\nI try to use spring security 6. So far I managed to succeed subscription, login, logout and filters.\r\n\r\nThe problem is when I try to post a new product I can&#39;t find a way to set the user ID.\r\n\r\nUserController :\r\n```\r\n    @PostMapping(value = &quot;/add_product&quot;)\r\n    public String addProduct(@Validated @ModelAttribute(&quot;product&quot;) ProductDto productDto,\r\n                             @AuthenticationPrincipal User user)\r\n    {\r\n        User userConnected = userRepository.findOneByIdUser(user.getIdUser());\r\n        productDto.setUser(userConnected);\r\n        productService.save(productDto);\r\n\r\n        return &quot;redirect:/&quot;;\r\n    }\r\n```\r\n\r\nForm (which is reachable only if authenticated) :\r\n```\r\n&lt;form th:action=&quot;@{/add_product}&quot; th:object=&quot;${product}&quot; method=&quot;post&quot;&gt;\r\n    &lt;div class=&quot;form-group&quot;&gt;\r\n      &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;name&quot; placeholder=&quot;Titre&quot; th:field=&quot;*{name}&quot;&gt;\r\n    &lt;/div&gt;\r\n    &lt;div class=&quot;form-group&quot;&gt;\r\n      &lt;input type=&quot;number&quot; class=&quot;form-control&quot; id=&quot;price&quot; placeholder=&quot;Prix&quot; th:field=&quot;*{price}&quot;&gt;\r\n    &lt;/div&gt;\r\n    &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary&quot;&gt;Valider&lt;/button&gt;\r\n&lt;/form&gt;\r\n```\r\n\r\nSpringSecurity :\r\n\r\n```\r\n@Bean\r\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n    http\r\n            .authorizeHttpRequests((auth) -&gt; auth\r\n                    .requestMatchers(&quot;/&quot;, &quot;/subscribe&quot;).permitAll()\r\n                    .requestMatchers(&quot;/add_product&quot;).authenticated()\r\n                    .anyRequest().authenticated()\r\n            )\r\n            .formLogin((form) -&gt; form\r\n                    .loginPage(&quot;/&quot;)\r\n                    .defaultSuccessUrl(&quot;/&quot;)\r\n                    .loginProcessingUrl(&quot;/login&quot;)\r\n                    .failureUrl(&quot;/?error&quot;)\r\n                    .permitAll()\r\n            )\r\n            .logout((logout) -&gt; logout\r\n                    .logoutSuccessUrl(&quot;/?logout&quot;)\r\n                    .permitAll()\r\n            );\r\n     return http.build();\r\n}\r\n```\r\n\r\nThe error I get when I post the form :\r\n```\r\nCannot invoke &quot;com.project.mesi.entity.User.getIdUser()&quot; because &quot;user&quot; is null\r\nat com.project.mesi.controller.UserController.addProduct(UserController.java:101)\r\n```\r\n\r\nThe thing I do not understand is that I can display the name of the authenticated user on homepage with HTML navbar thymeleaf fragment but when I go on the add product page the user is null (it says &quot;Hello null !&quot;)\r\n\r\n```\r\n&lt;li class=&quot;nav-item&quot; sec:authorize=&quot;isAuthenticated()&quot;&gt;\r\n    &lt;p class=&quot;nav-link text-body m-0&quot; th:text=&quot;&#39;Hello&#39; + ${user} + &#39; !&#39;&quot;&gt;&lt;/p&gt;\r\n&lt;/li&gt;\r\n```\r\nThe user seems to be null no matter what I have tried, like instantiate:\r\n\r\n```Authentication auth = SecurityContextHolder.getContext().getAuthentication();```\r\n\r\nwhich do the trick when the username needs to be displayd on homepage.\r\n\r\nI also tried to cast `auth.getPrincipal();` to my User entity but that is a no go.\r\n\r\nNow my questions are: is there a way to share the authenticated user through the whole application? Is there something I am doing wrong here? Please ask if you need more infos. Thank you in advance","title":"share authenticated user in whole app spring security","body":"<p>I am trying to build an application where users can post products.\nDatabase looks like this :</p>\n<pre><code>user     \n--------\nusername\npassword\n</code></pre>\n<pre><code>product\n-------\nname\nprice\nidUser\n</code></pre>\n<p>I try to use spring security 6. So far I managed to succeed subscription, login, logout and filters.</p>\n<p>The problem is when I try to post a new product I can't find a way to set the user ID.</p>\n<p>UserController :</p>\n<pre><code>    @PostMapping(value = &quot;/add_product&quot;)\n    public String addProduct(@Validated @ModelAttribute(&quot;product&quot;) ProductDto productDto,\n                             @AuthenticationPrincipal User user)\n    {\n        User userConnected = userRepository.findOneByIdUser(user.getIdUser());\n        productDto.setUser(userConnected);\n        productService.save(productDto);\n\n        return &quot;redirect:/&quot;;\n    }\n</code></pre>\n<p>Form (which is reachable only if authenticated) :</p>\n<pre><code>&lt;form th:action=&quot;@{/add_product}&quot; th:object=&quot;${product}&quot; method=&quot;post&quot;&gt;\n    &lt;div class=&quot;form-group&quot;&gt;\n      &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;name&quot; placeholder=&quot;Titre&quot; th:field=&quot;*{name}&quot;&gt;\n    &lt;/div&gt;\n    &lt;div class=&quot;form-group&quot;&gt;\n      &lt;input type=&quot;number&quot; class=&quot;form-control&quot; id=&quot;price&quot; placeholder=&quot;Prix&quot; th:field=&quot;*{price}&quot;&gt;\n    &lt;/div&gt;\n    &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary&quot;&gt;Valider&lt;/button&gt;\n&lt;/form&gt;\n</code></pre>\n<p>SpringSecurity :</p>\n<pre><code>@Bean\npublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n    http\n            .authorizeHttpRequests((auth) -&gt; auth\n                    .requestMatchers(&quot;/&quot;, &quot;/subscribe&quot;).permitAll()\n                    .requestMatchers(&quot;/add_product&quot;).authenticated()\n                    .anyRequest().authenticated()\n            )\n            .formLogin((form) -&gt; form\n                    .loginPage(&quot;/&quot;)\n                    .defaultSuccessUrl(&quot;/&quot;)\n                    .loginProcessingUrl(&quot;/login&quot;)\n                    .failureUrl(&quot;/?error&quot;)\n                    .permitAll()\n            )\n            .logout((logout) -&gt; logout\n                    .logoutSuccessUrl(&quot;/?logout&quot;)\n                    .permitAll()\n            );\n     return http.build();\n}\n</code></pre>\n<p>The error I get when I post the form :</p>\n<pre><code>Cannot invoke &quot;com.project.mesi.entity.User.getIdUser()&quot; because &quot;user&quot; is null\nat com.project.mesi.controller.UserController.addProduct(UserController.java:101)\n</code></pre>\n<p>The thing I do not understand is that I can display the name of the authenticated user on homepage with HTML navbar thymeleaf fragment but when I go on the add product page the user is null (it says &quot;Hello null !&quot;)</p>\n<pre><code>&lt;li class=&quot;nav-item&quot; sec:authorize=&quot;isAuthenticated()&quot;&gt;\n    &lt;p class=&quot;nav-link text-body m-0&quot; th:text=&quot;'Hello' + ${user} + ' !'&quot;&gt;&lt;/p&gt;\n&lt;/li&gt;\n</code></pre>\n<p>The user seems to be null no matter what I have tried, like instantiate:</p>\n<p><code>Authentication auth = SecurityContextHolder.getContext().getAuthentication();</code></p>\n<p>which do the trick when the username needs to be displayd on homepage.</p>\n<p>I also tried to cast <code>auth.getPrincipal();</code> to my User entity but that is a no go.</p>\n<p>Now my questions are: is there a way to share the authenticated user through the whole application? Is there something I am doing wrong here? Please ask if you need more infos. Thank you in advance</p>\n"},{"tags":["java","graphql"],"answers":[{"tags":[],"owner":{"account_id":12015704,"reputation":714,"user_id":8790942,"display_name":"Danil Kuznetsov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689013295,"creation_date":1689013295,"answer_id":76656350,"question_id":76652116,"body_markdown":"This is a wrapper around standard `graphql.schema.DataFetchingEnvironment`\r\n\r\nThe `DgsDataFetchingEnvironment` gives access to the context, the query itself, data loaders, and the source object. \r\n\r\n[docs can be found here][2]\r\n\r\n[source code can be found here][1]\r\n\r\n\r\n  [1]: https://github.com/Netflix/dgs-framework/blob/master/graphql-dgs/src/main/kotlin/com/netflix/graphql/dgs/DgsDataFetchingEnvironment.kt\r\n[2]: https://netflix.github.io/dgs/datafetching/","title":"What is the return type of DgsDataFetchingEnvironment.getSelectionSet?","body":"<p>This is a wrapper around standard <code>graphql.schema.DataFetchingEnvironment</code></p>\n<p>The <code>DgsDataFetchingEnvironment</code> gives access to the context, the query itself, data loaders, and the source object.</p>\n<p><a href=\"https://netflix.github.io/dgs/datafetching/\" rel=\"nofollow noreferrer\">docs can be found here</a></p>\n<p><a href=\"https://github.com/Netflix/dgs-framework/blob/master/graphql-dgs/src/main/kotlin/com/netflix/graphql/dgs/DgsDataFetchingEnvironment.kt\" rel=\"nofollow noreferrer\">source code can be found here</a></p>\n"}],"owner":{"account_id":18355810,"reputation":11,"user_id":13368888,"display_name":"Jian Hui"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":242,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689013295,"creation_date":1688978724,"question_id":76652116,"body_markdown":"I am working with the the lib &quot;com.netflix.graphql.dgs.DgsDataFetchingEnvironment&quot;.\r\nWhen writing the unit test, I need to mock dfe.getSelectionSet(). So I need to know the return type of dfe.getSelectionSet().\r\nMy IntelliJ IDE can&#39;t work with this lib well, I have to query the function by javadoc.\r\nHowever, after search the internet, I can&#39;t find its API doc.\r\nIf its API doc is absent, is there any way I can know the return type of this function?\r\n[![DgsDataFetchingEnvironment not resolved](https://i.stack.imgur.com/LaWV5.png)](https://i.stack.imgur.com/LaWV5.png)\r\n\r\n1, viewed the doc https://netflix.github.io/dgs/getting-started/, https://github.com/netflix/dgs-framework. Not able to find any API doc\r\n2, try to configure the IDE, but not succeeded. \r\n","title":"What is the return type of DgsDataFetchingEnvironment.getSelectionSet?","body":"<p>I am working with the the lib &quot;com.netflix.graphql.dgs.DgsDataFetchingEnvironment&quot;.\nWhen writing the unit test, I need to mock dfe.getSelectionSet(). So I need to know the return type of dfe.getSelectionSet().\nMy IntelliJ IDE can't work with this lib well, I have to query the function by javadoc.\nHowever, after search the internet, I can't find its API doc.\nIf its API doc is absent, is there any way I can know the return type of this function?\n<a href=\"https://i.stack.imgur.com/LaWV5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LaWV5.png\" alt=\"DgsDataFetchingEnvironment not resolved\" /></a></p>\n<p>1, viewed the doc <a href=\"https://netflix.github.io/dgs/getting-started/\" rel=\"nofollow noreferrer\">https://netflix.github.io/dgs/getting-started/</a>, <a href=\"https://github.com/netflix/dgs-framework\" rel=\"nofollow noreferrer\">https://github.com/netflix/dgs-framework</a>. Not able to find any API doc\n2, try to configure the IDE, but not succeeded.</p>\n"},{"tags":["java","android","android-recyclerview","android-adapter"],"answers":[{"tags":[],"owner":{"account_id":13368336,"reputation":725,"user_id":9647713,"display_name":"Siddharth Shakya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689011691,"creation_date":1689011691,"answer_id":76656196,"question_id":76656171,"body_markdown":"You can create a separate model of CombinedData, you can evaluate address using for loop against the ids, you must have ids to create the new class","title":"How to show distance between two locations in recyclerview items?","body":"<p>You can create a separate model of CombinedData, you can evaluate address using for loop against the ids, you must have ids to create the new class</p>\n"},{"tags":[],"owner":{"account_id":216120,"reputation":49213,"user_id":471160,"accept_rate":90,"display_name":"marcinj"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689012946,"creation_date":1689012434,"answer_id":76656269,"question_id":76656171,"body_markdown":"You could pass a reference of `User` instance to your `RecyclerView.Adapter` derived class. Then inside in `onBindViewHolder` override you will have access to both `User` and `School` instances which will allow you to calculate distance. \r\n\r\nTo calculate distance you can use: Location.distanceBetween https://developer.android.com/reference/android/location/Location#distanceBetween(double,%20double,%20double,%20double,%20float[])\r\n","title":"How to show distance between two locations in recyclerview items?","body":"<p>You could pass a reference of <code>User</code> instance to your <code>RecyclerView.Adapter</code> derived class. Then inside in <code>onBindViewHolder</code> override you will have access to both <code>User</code> and <code>School</code> instances which will allow you to calculate distance.</p>\n<p>To calculate distance you can use: Location.distanceBetween <a href=\"https://developer.android.com/reference/android/location/Location#distanceBetween(double,%20double,%20double,%20double,%20float%5B%5D)\" rel=\"nofollow noreferrer\">https://developer.android.com/reference/android/location/Location#distanceBetween(double,%20double,%20double,%20double,%20float[])</a></p>\n"}],"owner":{"account_id":27761018,"reputation":71,"user_id":21193451,"display_name":"user21193451"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":76656269,"answer_count":2,"score":-2,"last_activity_date":1689012946,"creation_date":1689011432,"question_id":76656171,"body_markdown":"I have two classes `User` and `School` as follow:\r\n\r\n`User: name, age, latitude, longitude`\r\n\r\n`School: name, latitude, longitude, level, address, rating`\r\n\r\nAnd I have an adapter for lists of schools that comes from server. Everything is OK but I don&#39;t know how\r\nto show distance of user from school in each item of recyclerview. Because adapter is a list of Schools and inside the adapter I can&#39;t access to current user data. (Can I?)\r\n\r\nI tried to access the distance TextView of RecyclerView Item model from fragment but couldn&#39;t find any reference for this.","title":"How to show distance between two locations in recyclerview items?","body":"<p>I have two classes <code>User</code> and <code>School</code> as follow:</p>\n<p><code>User: name, age, latitude, longitude</code></p>\n<p><code>School: name, latitude, longitude, level, address, rating</code></p>\n<p>And I have an adapter for lists of schools that comes from server. Everything is OK but I don't know how\nto show distance of user from school in each item of recyclerview. Because adapter is a list of Schools and inside the adapter I can't access to current user data. (Can I?)</p>\n<p>I tried to access the distance TextView of RecyclerView Item model from fragment but couldn't find any reference for this.</p>\n"},{"tags":["java","web-services","file-upload","spring-boot","multifile-uploader"],"comments":[{"owner":{"account_id":9435286,"reputation":1400,"user_id":7017439,"accept_rate":86,"display_name":"Narandhran Thangavel"},"score":0,"creation_date":1490682701,"post_id":36005436,"comment_id":73208371,"body_markdown":"I also facing the same problem, and its only work in postman not working with other tools like &quot;Advance rest client&quot;. may I know why??","body":"I also facing the same problem, and its only work in postman not working with other tools like &quot;Advance rest client&quot;. may I know why??"},{"owner":{"account_id":4307476,"reputation":2427,"user_id":3519504,"display_name":"Sandeep Kumar"},"score":1,"creation_date":1576403573,"post_id":36005436,"comment_id":104882783,"body_markdown":"@Narendhran, we can upload files from ARC now, which will eliminate this problem. Please check this: https://stackoverflow.com/a/59342761/3519504","body":"@Narendhran, we can upload files from ARC now, which will eliminate this problem. Please check this: <a href=\"https://stackoverflow.com/a/59342761/3519504\">stackoverflow.com/a/59342761/3519504</a>"}],"answers":[{"tags":[],"owner":{"account_id":38575,"reputation":3054,"user_id":110807,"accept_rate":33,"display_name":"de.la.ru"},"down_vote_count":2,"up_vote_count":161,"is_accepted":false,"score":159,"last_activity_date":1573159751,"creation_date":1466771645,"answer_id":38013585,"question_id":36005436,"body_markdown":"The problem is that you are setting the `Content-Type` by yourself, let it be blank. Google Chrome will do it for you. The multipart `Content-Type` needs to know the file boundary, and when you remove the `Content-Type`, Postman will do it automagically for you. ","title":"The request was rejected because no multipart boundary was found in springboot","body":"<p>The problem is that you are setting the <code>Content-Type</code> by yourself, let it be blank. Google Chrome will do it for you. The multipart <code>Content-Type</code> needs to know the file boundary, and when you remove the <code>Content-Type</code>, Postman will do it automagically for you. </p>\n"},{"tags":[],"owner":{"account_id":8698875,"reputation":17,"user_id":6509443,"display_name":"tomeokin"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1466782294,"creation_date":1466781764,"answer_id":38016883,"question_id":36005436,"body_markdown":"The &quot;Postman - REST Client&quot; is not suitable for doing post action with setting content-type.You can try to use &quot;Advanced REST client&quot; or others.\r\n\r\nAdditionally, headers was replace by consumes and produces since Spring 3.1 M2, see https://spring.io/blog/2011/06/13/spring-3-1-m2-spring-mvc-enhancements. And you can directly use `produces = MediaType.MULTIPART_FORM_DATA_VALUE`.","title":"The request was rejected because no multipart boundary was found in springboot","body":"<p>The \"Postman - REST Client\" is not suitable for doing post action with setting content-type.You can try to use \"Advanced REST client\" or others.</p>\n\n<p>Additionally, headers was replace by consumes and produces since Spring 3.1 M2, see <a href=\"https://spring.io/blog/2011/06/13/spring-3-1-m2-spring-mvc-enhancements\" rel=\"nofollow\">https://spring.io/blog/2011/06/13/spring-3-1-m2-spring-mvc-enhancements</a>. And you can directly use <code>produces = MediaType.MULTIPART_FORM_DATA_VALUE</code>.</p>\n"},{"tags":[],"owner":{"account_id":3788825,"reputation":23829,"user_id":3145960,"accept_rate":100,"display_name":"Reaz Murshed"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1499947347,"creation_date":1499947347,"answer_id":45080052,"question_id":36005436,"body_markdown":"I was having the same problem while making a POST request from Postman and later I could solve the problem by setting a custom Content-Type with a boundary value set along with it like this. \r\n\r\nI thought people can run into similar problem and hence, I&#39;m sharing my solution. \r\n\r\n[![postman][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/oInim.png","title":"The request was rejected because no multipart boundary was found in springboot","body":"<p>I was having the same problem while making a POST request from Postman and later I could solve the problem by setting a custom Content-Type with a boundary value set along with it like this. </p>\n\n<p>I thought people can run into similar problem and hence, I'm sharing my solution. </p>\n\n<p><a href=\"https://i.stack.imgur.com/oInim.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oInim.png\" alt=\"postman\"></a></p>\n"},{"tags":[],"owner":{"account_id":11598306,"reputation":391,"user_id":8496330,"display_name":"Bala"},"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1565683953,"creation_date":1503989057,"answer_id":45932419,"question_id":36005436,"body_markdown":"Unchecked the content type in Postman and postman automatically detect the content type based on your input in the run time.\r\n\r\n[![Sample][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/jSuH0.jpg","title":"The request was rejected because no multipart boundary was found in springboot","body":"<p>Unchecked the content type in Postman and postman automatically detect the content type based on your input in the run time.</p>\n\n<p><a href=\"https://i.stack.imgur.com/jSuH0.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/jSuH0.jpg\" alt=\"Sample\"></a></p>\n"},{"tags":[],"owner":{"account_id":3191536,"reputation":1984,"user_id":2695666,"display_name":"gorjanz"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1513239512,"creation_date":1513239512,"answer_id":47808745,"question_id":36005436,"body_markdown":"This worked for me:\r\nUploading a file via Postman, to a SpringMVC backend webapp:\r\n\r\nBackend:\r\n[![Endpoint controller definition][1]][1]\r\n\r\n\r\nPostman:\r\n[![Headers setup][2]][2]\r\n[![POST Body setup][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/wn8Ns.png\r\n  [2]: https://i.stack.imgur.com/eXips.png\r\n  [3]: https://i.stack.imgur.com/eeW06.png","title":"The request was rejected because no multipart boundary was found in springboot","body":"<p>This worked for me:\nUploading a file via Postman, to a SpringMVC backend webapp:</p>\n\n<p>Backend:\n<a href=\"https://i.stack.imgur.com/wn8Ns.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/wn8Ns.png\" alt=\"Endpoint controller definition\"></a></p>\n\n<p>Postman:\n<a href=\"https://i.stack.imgur.com/eXips.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/eXips.png\" alt=\"Headers setup\"></a>\n<a href=\"https://i.stack.imgur.com/eeW06.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/eeW06.png\" alt=\"POST Body setup\"></a></p>\n"},{"tags":[],"owner":{"account_id":10925310,"reputation":1,"user_id":8030201,"display_name":"hao huang"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1576406040,"creation_date":1544238996,"answer_id":53679186,"question_id":36005436,"body_markdown":"When I use postman to send a file which is 5.6M to an external network,  I faced the same issue. The same action is succeeded on my own computer and local testing environment.\r\n\r\nAfter checking all the server configs and HTTP headers, I found that the reason is Postman may have some trouble simulating requests to external HTTP requests.\r\nFinally, I did the sendfile request on the chrome HTML page successfully.\r\nJust as a reference :)","title":"The request was rejected because no multipart boundary was found in springboot","body":"<p>When I use postman to send a file which is 5.6M to an external network,  I faced the same issue. The same action is succeeded on my own computer and local testing environment.</p>\n\n<p>After checking all the server configs and HTTP headers, I found that the reason is Postman may have some trouble simulating requests to external HTTP requests.\nFinally, I did the sendfile request on the chrome HTML page successfully.\nJust as a reference :)</p>\n"},{"tags":[],"owner":{"account_id":8583699,"reputation":254,"user_id":6430538,"display_name":"Hanz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1557408545,"creation_date":1557408545,"answer_id":56060545,"question_id":36005436,"body_markdown":"I met this problem because I use request.js which writen base on axios    \r\nAnd I already set a defaults.headers in request.js\r\n\r\n    import axios from &#39;axios&#39;\r\n    const request = axios.create({\r\n      baseURL: &#39;&#39;, \r\n      timeout: 15000 \r\n    })\r\n    service.defaults.headers.post[&#39;Content-Type&#39;] = &#39;application/x-www-form-urlencoded&#39;\r\n\r\n\r\nhere is how I solve this     \r\ninstead of \r\n\r\n    request.post(&#39;/manage/product/upload.do&#39;,\r\n          param,config\r\n        )\r\n\r\nI use axios directly send request,and didn&#39;t add config\r\n\r\n    axios.post(&#39;/manage/product/upload.do&#39;,\r\n          param\r\n        )\r\n\r\nhope this can solve your problem","title":"The request was rejected because no multipart boundary was found in springboot","body":"<p>I met this problem because I use request.js which writen base on axios<br>\nAnd I already set a defaults.headers in request.js</p>\n\n<pre><code>import axios from 'axios'\nconst request = axios.create({\n  baseURL: '', \n  timeout: 15000 \n})\nservice.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded'\n</code></pre>\n\n<p>here is how I solve this<br>\ninstead of </p>\n\n<pre><code>request.post('/manage/product/upload.do',\n      param,config\n    )\n</code></pre>\n\n<p>I use axios directly send request,and didn't add config</p>\n\n<pre><code>axios.post('/manage/product/upload.do',\n      param\n    )\n</code></pre>\n\n<p>hope this can solve your problem</p>\n"},{"tags":[],"owner":{"account_id":1505484,"reputation":125,"user_id":1408954,"display_name":"Bitzu"},"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1591102478,"creation_date":1591102478,"answer_id":62152496,"question_id":36005436,"body_markdown":"Heard you can do this in postman:\r\n\r\n[![placeholders][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/incef.png","title":"The request was rejected because no multipart boundary was found in springboot","body":"<p>Heard you can do this in postman:</p>\n\n<p><a href=\"https://i.stack.imgur.com/incef.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/incef.png\" alt=\"placeholders\"></a></p>\n"},{"tags":[],"owner":{"account_id":21599958,"reputation":41,"user_id":15928285,"display_name":"Mr.A"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1641662171,"creation_date":1641661832,"answer_id":70634610,"question_id":36005436,"body_markdown":"You can try with below simple code, it should work. I tested on Advanced REST Client and below attached screenshot will help for configuration.\r\n\r\n\r\n````\r\npackage com.example.demo;\r\n\r\nimport java.io.FileOutputStream;\r\nimport java.io.IOException;\r\n\r\nimport org.springframework.web.bind.annotation.PostMapping;\r\nimport org.springframework.web.bind.annotation.RequestParam;\r\nimport org.springframework.web.bind.annotation.RestController;\r\nimport org.springframework.web.multipart.MultipartFile;\r\n\r\n@RestController\r\npublic class ImageUploadController {\r\n\r\n\t@PostMapping(&quot;image-upload&quot;)\r\n\tpublic String uploadImage(@RequestParam MultipartFile myFile) throws IOException {\r\n\t\t\r\n\t\tbyte[] bytes = myFile.getBytes();\r\n\r\n\t\tFileOutputStream fileOutputStream = new FileOutputStream(&quot;image.jpg&quot;);\r\n\r\n\t\tfileOutputStream.write(bytes);\r\n\t\tfileOutputStream.close();\r\n\t\t\r\n\t\treturn &quot;Image uploaded successfully..!&quot;;\r\n\r\n\t}\r\n}\r\n````\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nyou can find uploaded image on below location in project.\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\nAlso please note that if your controller should be within the package of @SpringBootApplication package. You can refer below image.\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/lwypy.png\r\n  [2]: https://i.stack.imgur.com/3EOQV.png\r\n  [3]: https://i.stack.imgur.com/wu1B6.png","title":"The request was rejected because no multipart boundary was found in springboot","body":"<p>You can try with below simple code, it should work. I tested on Advanced REST Client and below attached screenshot will help for configuration.</p>\n<pre><code>package com.example.demo;\n\nimport java.io.FileOutputStream;\nimport java.io.IOException;\n\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestParam;\nimport org.springframework.web.bind.annotation.RestController;\nimport org.springframework.web.multipart.MultipartFile;\n\n@RestController\npublic class ImageUploadController {\n\n    @PostMapping(&quot;image-upload&quot;)\n    public String uploadImage(@RequestParam MultipartFile myFile) throws IOException {\n        \n        byte[] bytes = myFile.getBytes();\n\n        FileOutputStream fileOutputStream = new FileOutputStream(&quot;image.jpg&quot;);\n\n        fileOutputStream.write(bytes);\n        fileOutputStream.close();\n        \n        return &quot;Image uploaded successfully..!&quot;;\n\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/lwypy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lwypy.png\" alt=\"enter image description here\" /></a></p>\n<p>you can find uploaded image on below location in project.</p>\n<p><a href=\"https://i.stack.imgur.com/3EOQV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3EOQV.png\" alt=\"enter image description here\" /></a></p>\n<p>Also please note that if your controller should be within the package of @SpringBootApplication package. You can refer below image.</p>\n<p><a href=\"https://i.stack.imgur.com/wu1B6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wu1B6.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":2353308,"reputation":381,"user_id":2061690,"display_name":"Sanjay Amin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689011841,"creation_date":1689011841,"answer_id":76656213,"question_id":36005436,"body_markdown":"You do not need to send `Content-Type` in Postman, leave the default setting as in `Headers` section. It should automatically calculate. \r\n[![enter image description here][1]][1]\r\n\r\nIn Body, you can select file as:\r\n[![enter image description here][2]][2]\r\n\r\nAt Spring controller side, you can add following code:\r\n\r\n     @PostMapping(&quot;/upload&quot;)  \r\n     public ResponseEntity&lt;MyResponseObject&gt; uploadFile(@RequestParam(&quot;file&quot;) MultipartFile myFile)\r\n      throws IOException {...}\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/7rLPc.png\r\n  [2]: https://i.stack.imgur.com/lgp1j.png","title":"The request was rejected because no multipart boundary was found in springboot","body":"<p>You do not need to send <code>Content-Type</code> in Postman, leave the default setting as in <code>Headers</code> section. It should automatically calculate.\n<a href=\"https://i.stack.imgur.com/7rLPc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7rLPc.png\" alt=\"enter image description here\" /></a></p>\n<p>In Body, you can select file as:\n<a href=\"https://i.stack.imgur.com/lgp1j.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/lgp1j.png\" alt=\"enter image description here\" /></a></p>\n<p>At Spring controller side, you can add following code:</p>\n<pre><code> @PostMapping(&quot;/upload&quot;)  \n public ResponseEntity&lt;MyResponseObject&gt; uploadFile(@RequestParam(&quot;file&quot;) MultipartFile myFile)\n  throws IOException {...}\n</code></pre>\n"}],"owner":{"account_id":7637947,"reputation":963,"user_id":5790953,"display_name":"Mohammed Javed"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":257528,"favorite_count":0,"down_vote_count":0,"up_vote_count":95,"answer_count":10,"score":95,"last_activity_date":1689011841,"creation_date":1458028616,"question_id":36005436,"body_markdown":"As I am trying this with spring boot and webservices with postman chrome add-ons.\r\n\r\nIn postman `content-type=&quot;multipart/form-data&quot;` and I am getting the below exception.\r\n\r\n    HTTP Status 500 - Request processing failed; \r\n    nested exception is org.springframework.web.multipart.MultipartException: Could not parse multipart servlet request; \r\n    nested exception is java.io.IOException: \r\n    org.apache.tomcat.util.http.fileupload.FileUploadException: the request was rejected because no multipart boundary was found\r\n\r\nIn Controller I specified the below code\r\n\r\n    @ResponseBody\r\n\t@RequestMapping(value = &quot;/file&quot;, headers = &quot;Content-Type= multipart/form-data&quot;, method = RequestMethod.POST)\r\n\r\n\tpublic String upload(@RequestParam(&quot;name&quot;) String name,\r\n\t\t\t@RequestParam(value = &quot;file&quot;, required = true) MultipartFile file)\r\n\t//@RequestParam ()CommonsMultipartFile[] fileUpload\r\n\t{\r\n\t\t// @RequestMapping(value=&quot;/newDocument&quot;, , method = RequestMethod.POST)\r\n\t\tif (!file.isEmpty()) {\r\n\t\t\ttry {\r\n\t\t\t\tbyte[] fileContent = file.getBytes();\r\n\t\t\t\tfileSystemHandler.create(123, fileContent, name);\r\n\t\t\t\treturn &quot;You successfully uploaded &quot; + name + &quot;!&quot;;\r\n\t\t\t} catch (Exception e) {\r\n\t\t\t\treturn &quot;You failed to upload &quot; + name + &quot; =&gt; &quot; + e.getMessage();\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn &quot;You failed to upload &quot; + name + &quot; because the file was empty.&quot;;\r\n\t\t}\r\n\t}\r\n\r\n\r\nHere I specify the file handler code\r\n\r\n    public String create(int jonId, byte[] fileContent, String name) {\r\n\t\tString status = &quot;Created file...&quot;;\r\n\t\ttry {\r\n\t\t\tString path = env.getProperty(&quot;file.uploadPath&quot;) + name;\r\n\t\t\tFile newFile = new File(path);\r\n\t\t\tnewFile.createNewFile();\r\n\t\t\tBufferedOutputStream stream = new BufferedOutputStream(new FileOutputStream(newFile));\r\n\t\t\tstream.write(fileContent);\r\n\t\t\tstream.close();\r\n\t\t} catch (IOException ex) {\r\n\t\t\tstatus = &quot;Failed to create file...&quot;;\r\n\t\t\tLogger.getLogger(FileSystemHandler.class.getName()).log(Level.SEVERE, null, ex);\r\n\t\t}\r\n\t\treturn status;\r\n\t}","title":"The request was rejected because no multipart boundary was found in springboot","body":"<p>As I am trying this with spring boot and webservices with postman chrome add-ons.</p>\n\n<p>In postman <code>content-type=\"multipart/form-data\"</code> and I am getting the below exception.</p>\n\n<pre><code>HTTP Status 500 - Request processing failed; \nnested exception is org.springframework.web.multipart.MultipartException: Could not parse multipart servlet request; \nnested exception is java.io.IOException: \norg.apache.tomcat.util.http.fileupload.FileUploadException: the request was rejected because no multipart boundary was found\n</code></pre>\n\n<p>In Controller I specified the below code</p>\n\n<pre><code>@ResponseBody\n@RequestMapping(value = \"/file\", headers = \"Content-Type= multipart/form-data\", method = RequestMethod.POST)\n\npublic String upload(@RequestParam(\"name\") String name,\n        @RequestParam(value = \"file\", required = true) MultipartFile file)\n//@RequestParam ()CommonsMultipartFile[] fileUpload\n{\n    // @RequestMapping(value=\"/newDocument\", , method = RequestMethod.POST)\n    if (!file.isEmpty()) {\n        try {\n            byte[] fileContent = file.getBytes();\n            fileSystemHandler.create(123, fileContent, name);\n            return \"You successfully uploaded \" + name + \"!\";\n        } catch (Exception e) {\n            return \"You failed to upload \" + name + \" =&gt; \" + e.getMessage();\n        }\n    } else {\n        return \"You failed to upload \" + name + \" because the file was empty.\";\n    }\n}\n</code></pre>\n\n<p>Here I specify the file handler code</p>\n\n<pre><code>public String create(int jonId, byte[] fileContent, String name) {\n    String status = \"Created file...\";\n    try {\n        String path = env.getProperty(\"file.uploadPath\") + name;\n        File newFile = new File(path);\n        newFile.createNewFile();\n        BufferedOutputStream stream = new BufferedOutputStream(new FileOutputStream(newFile));\n        stream.write(fileContent);\n        stream.close();\n    } catch (IOException ex) {\n        status = \"Failed to create file...\";\n        Logger.getLogger(FileSystemHandler.class.getName()).log(Level.SEVERE, null, ex);\n    }\n    return status;\n}\n</code></pre>\n"},{"tags":["java","unit-testing","testing","junit"],"comments":[{"owner":{"account_id":11104856,"reputation":1527,"user_id":8152324,"display_name":"ndc85430"},"score":0,"creation_date":1689010852,"post_id":76656096,"comment_id":135149827,"body_markdown":"Yes, one would assume the factory method for `LocalDate` throws an exception in that case. But the function you want to test seems to take _two_ dates. What are the behaviours of that function? That is, what is it supposed to do? You should be testing those things.","body":"Yes, one would assume the factory method for <code>LocalDate</code> throws an exception in that case. But the function you want to test seems to take <i>two</i> dates. What are the behaviours of that function? That is, what is it supposed to do? You should be testing those things."},{"owner":{"account_id":28630571,"reputation":39,"user_id":21921697,"display_name":"TrySoHard"},"score":0,"creation_date":1689011247,"post_id":76656096,"comment_id":135149894,"body_markdown":"Thing is, it seems like a not possible scenario, because i cant call the method by passing to it _a non valid date._ The error would be on a higher level. Think about this:\n\nLocalDate date = LocalDate.of(2024-40-40);\nLocalDate date2 = LocalDate.of(2024-60-60);\n\nverifyCorrectDates(date, date2);\n\nThis would simply not compile, since the LocalDate.of(...) would give me error. So i cannot test it in my method.","body":"Thing is, it seems like a not possible scenario, because i cant call the method by passing to it <i>a non valid date.</i> The error would be on a higher level. Think about this:  LocalDate date = LocalDate.of(2024-40-40); LocalDate date2 = LocalDate.of(2024-60-60);  verifyCorrectDates(date, date2);  This would simply not compile, since the LocalDate.of(...) would give me error. So i cannot test it in my method."},{"owner":{"account_id":28630571,"reputation":39,"user_id":21921697,"display_name":"TrySoHard"},"score":0,"creation_date":1689011530,"post_id":76656096,"comment_id":135149947,"body_markdown":"Oh yeah, i get it. Since my method does not accept a String, but a LocalDate, i shouldn&#39;t test this. If my method accepted two Strings that would be the case i&#39;m imagining.","body":"Oh yeah, i get it. Since my method does not accept a String, but a LocalDate, i shouldn&#39;t test this. If my method accepted two Strings that would be the case i&#39;m imagining."}],"answers":[{"tags":[],"owner":{"account_id":216120,"reputation":49213,"user_id":471160,"accept_rate":90,"display_name":"marcinj"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1689011503,"creation_date":1689011503,"answer_id":76656176,"question_id":76656096,"body_markdown":"You should not create invalid LocalDate instances, as those will throw exceptions, so its not practical in case of testing your function. You can still come up with valid test scenerios, like check correctness of function call if its called when:\r\n\r\n1. both dates are null\r\n2. first date is null, the second date is valid.\r\n3. first date is valid, the second date is null.\r\n4. both dates are valid, and the first date is after the second date. \r\n5. both dates are valid, and the first date is before the second date \r\n6. dates are valid, and the first date is the same as the second date.","title":"JUnit, how can i test if a LocalDate is not valid?","body":"<p>You should not create invalid LocalDate instances, as those will throw exceptions, so its not practical in case of testing your function. You can still come up with valid test scenerios, like check correctness of function call if its called when:</p>\n<ol>\n<li>both dates are null</li>\n<li>first date is null, the second date is valid.</li>\n<li>first date is valid, the second date is null.</li>\n<li>both dates are valid, and the first date is after the second date.</li>\n<li>both dates are valid, and the first date is before the second date</li>\n<li>dates are valid, and the first date is the same as the second date.</li>\n</ol>\n"}],"owner":{"account_id":28630571,"reputation":39,"user_id":21921697,"display_name":"TrySoHard"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689011503,"creation_date":1689010644,"question_id":76656096,"body_markdown":"I&#39;m doing some testing for a university project.\r\n\r\nI wanted to test a method *verifyCorrectDates(LocalDate firstDate, LocalDate lastDate)*.\r\n\r\nIn general, i think we could see these possible scenarios:\r\n- a LocalDate is null\r\n- a LocalDate is not valid (for example, 2023-40-40)\r\n- a LocalDate is valid\r\n\r\nSince i have two LocalDates as input, there should be 9 test to comprehend every situation.\r\n\r\nThing is: i don&#39;t know how can i test this method using a &#39;non valid date&#39;.\r\nIf i use LocalDate.of(2023,40,40) it simply gives me an error, of course. I&#39;m starting to think it&#39;s simply not possible to insert a non valid LocalDate.\r\n\r\nAny ideas?","title":"JUnit, how can i test if a LocalDate is not valid?","body":"<p>I'm doing some testing for a university project.</p>\n<p>I wanted to test a method <em>verifyCorrectDates(LocalDate firstDate, LocalDate lastDate)</em>.</p>\n<p>In general, i think we could see these possible scenarios:</p>\n<ul>\n<li>a LocalDate is null</li>\n<li>a LocalDate is not valid (for example, 2023-40-40)</li>\n<li>a LocalDate is valid</li>\n</ul>\n<p>Since i have two LocalDates as input, there should be 9 test to comprehend every situation.</p>\n<p>Thing is: i don't know how can i test this method using a 'non valid date'.\nIf i use LocalDate.of(2023,40,40) it simply gives me an error, of course. I'm starting to think it's simply not possible to insert a non valid LocalDate.</p>\n<p>Any ideas?</p>\n"},{"tags":["java","android","gradle","errorprone"],"answers":[{"tags":[],"owner":{"account_id":10003966,"reputation":5309,"user_id":7399050,"accept_rate":60,"display_name":"ADev"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1487328455,"creation_date":1487328455,"answer_id":42295936,"question_id":39561334,"body_markdown":"Use the flag `-XepDisableWarningsInGeneratedCode`\r\n\r\nSee this [issue](https://github.com/google/error-prone/issues/463) on GitHub","title":"How do I make error-prone ignore my generated source code?","body":"<p>Use the flag <code>-XepDisableWarningsInGeneratedCode</code></p>\n\n<p>See this <a href=\"https://github.com/google/error-prone/issues/463\" rel=\"nofollow noreferrer\">issue</a> on GitHub</p>\n"},{"tags":[],"owner":{"account_id":5906169,"reputation":10565,"user_id":4647853,"accept_rate":74,"display_name":"Michal Kordas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1553508664,"creation_date":1553508664,"answer_id":55335407,"question_id":39561334,"body_markdown":"In my case classes were annotated with `@AvroGenerated` and ```-XepDisableWarningsInGeneratedCode``` didn&#39;t work. \r\n\r\nThe solution was to exclude `build` directory from checks via `-XepExcludedPaths:.*/build/.*`","title":"How do I make error-prone ignore my generated source code?","body":"<p>In my case classes were annotated with <code>@AvroGenerated</code> and <code>-XepDisableWarningsInGeneratedCode</code> didn't work. </p>\n\n<p>The solution was to exclude <code>build</code> directory from checks via <code>-XepExcludedPaths:.*/build/.*</code></p>\n"},{"tags":[],"owner":{"account_id":105656,"reputation":10424,"user_id":281815,"display_name":"rbento"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689010972,"creation_date":1688936468,"answer_id":76649506,"question_id":39561334,"body_markdown":"Below a sample configuration tested while building gRPC protos, which is a scenario similar to the OPs with code generated into a target directory: `build/generated/*`\r\n\r\nGenerated protos are not marked with `@Generated`, so the aforementioned flag `-XepDisableWarningsInGeneratedCode` has no effect on the generated code and warnings are still issued.\r\n\r\nAlso the command line flag has to be prepended by `-XDcompilePolicy` as per Gradle output and by `-Xplugin:ErrorProne` as per the [documentation][1].\r\n\r\n**ErrorProne Gradle Plugin via command line args**\r\n\r\n```\r\ncompileJava {\r\n\toptions.compilerArgs &lt;&lt; &#39;-XDcompilePolicy=simple -Xplugin:ErrorProne -XepDisableWarningsInGeneratedCode&#39;\r\n}\r\n```\r\n\r\nThe command line approach do not seem to have an effect with modern Gradle, but the next approach does.\r\n\r\n**ErrorProne Gradle Plugin via options**\r\n\r\n```\r\nplugins {\r\n\tid &#39;java&#39;\r\n\tid &#39;net.ltgt.errorprone&#39; version &#39;3.1.0&#39; // https://github.com/tbroyer/gradle-errorprone-plugin\r\n}\r\n\r\ndependencies {\r\n\terrorprone &quot;com.google.errorprone:error_prone_core:2.20.0&quot; // https://github.com/google/error-prone\r\n}\r\n\r\ncompileJava {\r\n\toptions.errorprone.disableWarningsInGeneratedCode = true   // for @Generated\r\n\toptions.errorprone.excludedPaths = &quot;.*/build/generated/.*&quot; // for other generated scenarios, e.g. Protobuf\r\n}\r\n```\r\n\r\n**Environment**\r\n - ErrorProne Gradle Plugin: [https://github.com/tbroyer/gradle-errorprone-plugin][2]\r\n - ErrorProne Core: [https://github.com/google/error-prone][3]\r\n - OS Mac OS X 13.4.1 aarch64\r\n - JVM 17.0.6 (Azul Systems, Inc. 17.0.6+10-LTS)\r\n - Gradle 8.2\r\n\r\n  [1]: http://errorprone.info/docs/flags\r\n  [2]: https://github.com/tbroyer/gradle-errorprone-plugin\r\n  [3]: https://github.com/google/error-prone","title":"How do I make error-prone ignore my generated source code?","body":"<p>Below a sample configuration tested while building gRPC protos, which is a scenario similar to the OPs with code generated into a target directory: <code>build/generated/*</code></p>\n<p>Generated protos are not marked with <code>@Generated</code>, so the aforementioned flag <code>-XepDisableWarningsInGeneratedCode</code> has no effect on the generated code and warnings are still issued.</p>\n<p>Also the command line flag has to be prepended by <code>-XDcompilePolicy</code> as per Gradle output and by <code>-Xplugin:ErrorProne</code> as per the <a href=\"http://errorprone.info/docs/flags\" rel=\"nofollow noreferrer\">documentation</a>.</p>\n<p><strong>ErrorProne Gradle Plugin via command line args</strong></p>\n<pre><code>compileJava {\n    options.compilerArgs &lt;&lt; '-XDcompilePolicy=simple -Xplugin:ErrorProne -XepDisableWarningsInGeneratedCode'\n}\n</code></pre>\n<p>The command line approach do not seem to have an effect with modern Gradle, but the next approach does.</p>\n<p><strong>ErrorProne Gradle Plugin via options</strong></p>\n<pre><code>plugins {\n    id 'java'\n    id 'net.ltgt.errorprone' version '3.1.0' // https://github.com/tbroyer/gradle-errorprone-plugin\n}\n\ndependencies {\n    errorprone &quot;com.google.errorprone:error_prone_core:2.20.0&quot; // https://github.com/google/error-prone\n}\n\ncompileJava {\n    options.errorprone.disableWarningsInGeneratedCode = true   // for @Generated\n    options.errorprone.excludedPaths = &quot;.*/build/generated/.*&quot; // for other generated scenarios, e.g. Protobuf\n}\n</code></pre>\n<p><strong>Environment</strong></p>\n<ul>\n<li>ErrorProne Gradle Plugin: <a href=\"https://github.com/tbroyer/gradle-errorprone-plugin\" rel=\"nofollow noreferrer\">https://github.com/tbroyer/gradle-errorprone-plugin</a></li>\n<li>ErrorProne Core: <a href=\"https://github.com/google/error-prone\" rel=\"nofollow noreferrer\">https://github.com/google/error-prone</a></li>\n<li>OS Mac OS X 13.4.1 aarch64</li>\n<li>JVM 17.0.6 (Azul Systems, Inc. 17.0.6+10-LTS)</li>\n<li>Gradle 8.2</li>\n</ul>\n"}],"owner":{"account_id":42943,"reputation":3354,"user_id":125320,"accept_rate":77,"display_name":"Argyle"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3514,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":42295936,"answer_count":3,"score":7,"last_activity_date":1689010972,"creation_date":1474224269,"question_id":39561334,"body_markdown":"I&#39;ve recently discovered [Error Prone](http://errorprone.info) and am integrating it into my Android build using the [Gradle plugin](https://github.com/tbroyer/gradle-errorprone-plugin) linked on their page.\r\n\r\nSince our project is using Icepick (and some other code generating annotation processors), we have generated source code, which gets compiled in.  Unfortunately, some of the generated code triggers warnings in Error Prone, and I&#39;d like to filter that noise out somehow. \r\n\r\nThe generated code shows up in the `app/build/generated/source/apt/debug` directory.  How can I exempt this code from Error Prone&#39;s steely gaze?","title":"How do I make error-prone ignore my generated source code?","body":"<p>I've recently discovered <a href=\"http://errorprone.info\" rel=\"noreferrer\">Error Prone</a> and am integrating it into my Android build using the <a href=\"https://github.com/tbroyer/gradle-errorprone-plugin\" rel=\"noreferrer\">Gradle plugin</a> linked on their page.</p>\n\n<p>Since our project is using Icepick (and some other code generating annotation processors), we have generated source code, which gets compiled in.  Unfortunately, some of the generated code triggers warnings in Error Prone, and I'd like to filter that noise out somehow. </p>\n\n<p>The generated code shows up in the <code>app/build/generated/source/apt/debug</code> directory.  How can I exempt this code from Error Prone's steely gaze?</p>\n"},{"tags":["java","android","android-studio","android-intent","android-pendingintent"],"answers":[{"tags":[],"owner":{"account_id":13762909,"reputation":1124,"user_id":9932194,"display_name":"K M Rejowan Ahmmed"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1689010885,"creation_date":1689010885,"answer_id":76656125,"question_id":76655730,"body_markdown":"&gt; **FLAG_IMMUTABLE** : \r\n&gt; Flag indicating that the created PendingIntent should be immutable.\r\n&gt; This means that the **additional intent argument passed to** the send\r\n&gt; methods to fill in unpopulated properties of this **intent will be\r\n&gt; ignored.**\r\n&gt; \r\n&gt; **FLAG_IMMUTABLE only limits the ability to alter the semantics** of the\r\n&gt; intent that is sent by send() by the invoker of send(). The creator of\r\n&gt; the PendingIntent can always update the PendingIntent itself via\r\n&gt; FLAG_UPDATE_CURRENT.\r\n\r\nAs per Android Documentation, FLAG_IMMUTABLE removes the ability of altering the semantics, as here the the info of NFC tag is not send with the intent. \r\n\r\nBut for FLAG_MUTABLE,\r\n\r\n&gt; FLAG_MUTABLE should only be used when some functionality relies on\r\n&gt; modifying the underlying intent, e.g. any PendingIntent that needs to\r\n&gt; be used with inline reply or bubbles.\r\n\r\nMutable Flag allows to modify. \r\n\r\nThat could be the reason for working with Mutable and Not working with Immutable. \r\nThat&#39;s&#39; why when you set the PendingIntent flag to IMMUTABLE, your app crashes because the NFC intent cannot be added to your PendingIntent, leading to a null intent value in your onNewIntent() method.\r\n\r\n1. [FLAG_MUTABLE][1]\r\n2. [FLAG_IMMUTABLE][2]\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/app/PendingIntent#FLAG_MUTABLE\r\n  [2]: https://developer.android.com/reference/android/app/PendingIntent#FLAG_IMMUTABLE","title":"Why NFC works with PendingIntent.FLAG_MUTABLE and not with PendingIntent.FLAG_IMMUTABLE","body":"<blockquote>\n<p><strong>FLAG_IMMUTABLE</strong> :\nFlag indicating that the created PendingIntent should be immutable.\nThis means that the <strong>additional intent argument passed to</strong> the send\nmethods to fill in unpopulated properties of this <strong>intent will be\nignored.</strong></p>\n<p><strong>FLAG_IMMUTABLE only limits the ability to alter the semantics</strong> of the\nintent that is sent by send() by the invoker of send(). The creator of\nthe PendingIntent can always update the PendingIntent itself via\nFLAG_UPDATE_CURRENT.</p>\n</blockquote>\n<p>As per Android Documentation, FLAG_IMMUTABLE removes the ability of altering the semantics, as here the the info of NFC tag is not send with the intent.</p>\n<p>But for FLAG_MUTABLE,</p>\n<blockquote>\n<p>FLAG_MUTABLE should only be used when some functionality relies on\nmodifying the underlying intent, e.g. any PendingIntent that needs to\nbe used with inline reply or bubbles.</p>\n</blockquote>\n<p>Mutable Flag allows to modify.</p>\n<p>That could be the reason for working with Mutable and Not working with Immutable.\nThat's' why when you set the PendingIntent flag to IMMUTABLE, your app crashes because the NFC intent cannot be added to your PendingIntent, leading to a null intent value in your onNewIntent() method.</p>\n<ol>\n<li><a href=\"https://developer.android.com/reference/android/app/PendingIntent#FLAG_MUTABLE\" rel=\"nofollow noreferrer\">FLAG_MUTABLE</a></li>\n<li><a href=\"https://developer.android.com/reference/android/app/PendingIntent#FLAG_IMMUTABLE\" rel=\"nofollow noreferrer\">FLAG_IMMUTABLE</a></li>\n</ol>\n"}],"owner":{"account_id":13753395,"reputation":40,"user_id":9924942,"display_name":"M. Cahyna"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":210,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76656125,"answer_count":1,"score":0,"last_activity_date":1689010885,"creation_date":1689007200,"question_id":76655730,"body_markdown":"I have a question about NFC and Pending Intent function. I am building an app, which reads content of NDEF Tag and send value to server.\r\nAfter much searching I found a bug in the code, specifically in a function PendingIntent.\r\n\r\nThis is code of *MainActivity.java*. When I change FLAG_MUTABLE to IMMUTABLE, value of intent is **null** and app crash. When it is MUTABLE, value of intent is **android.nfc.action.NDEF_DISCOVERED** and everything works. I want to know, why it is, because every example and even somewhere in docs I found, that it should be IMMUTABLE.\r\n\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    \r\n    import android.app.PendingIntent;\r\n    import android.content.Intent;\r\n    import android.nfc.FormatException;\r\n    import android.nfc.NdefMessage;\r\n    import android.nfc.NdefRecord;\r\n    import android.nfc.NfcAdapter;\r\n    import android.nfc.Tag;\r\n    import android.nfc.tech.Ndef;\r\n    import android.os.Bundle;\r\n    import android.provider.Settings;\r\n    import android.util.Log;\r\n    import android.widget.Toast;\r\n    \r\n    import java.io.IOException;\r\n    import java.io.UnsupportedEncodingException;\r\n    import java.util.Arrays;\r\n    \r\n    public class MainActivity extends AppCompatActivity {\r\n        private NfcAdapter nfcAdapter;\r\n        private PendingIntent pendingIntent;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n    \r\n            nfcAdapter = NfcAdapter.getDefaultAdapter(this);\r\n    \r\n            if (nfcAdapter == null) {\r\n                Toast.makeText(this, &quot;Nepodporovan&#253; telefon&quot;, Toast.LENGTH_LONG).show();\r\n            } else if (!nfcAdapter.isEnabled()) {\r\n                Toast.makeText(this, &quot;NFC je vypnut&#233;&quot;, Toast.LENGTH_LONG).show();\r\n                startActivity(new Intent(Settings.ACTION_NFC_SETTINGS));\r\n            }\r\n    \r\n            pendingIntent = PendingIntent.getActivity(this, 0, new Intent(this, getClass()).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP), PendingIntent.FLAG_MUTABLE);\r\n        }\r\n    \r\n        @Override\r\n        protected void onResume() {\r\n            super.onResume();\r\n            if (nfcAdapter != null) {\r\n                nfcAdapter.enableForegroundDispatch(this, pendingIntent, null, null);\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        protected void onPause() {\r\n            super.onPause();\r\n            if (nfcAdapter != null) {\r\n                nfcAdapter.disableForegroundDispatch(this);\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        protected void onNewIntent(Intent intent) {\r\n            super.onNewIntent(intent);\r\n            Log.d(&quot;INTENT ACTION&quot;, intent.getAction());\r\n            Tag tag = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG);\r\n            if (tag != null) {\r\n                Ndef ndef = Ndef.get(tag);\r\n                if (ndef == null) {\r\n                    Toast.makeText(this, &quot;Pr&#225;zdn&#253; NFC Tag&quot;, Toast.LENGTH_SHORT).show();\r\n                    return;\r\n                }\r\n    \r\n                try {\r\n                    ndef.connect();\r\n    \r\n                    NdefMessage ndefMessage = ndef.getNdefMessage();\r\n                    if (ndefMessage != null) {\r\n                        NdefRecord[] records = ndefMessage.getRecords();\r\n                        for (NdefRecord record : records) {\r\n                            if (record.getTnf() == NdefRecord.TNF_WELL_KNOWN &amp;&amp; Arrays.equals(record.getType(), NdefRecord.RTD_TEXT)) {\r\n                                String text = readText(record);\r\n                                // TODO: Odeslat data do Google Sheets\r\n                                Toast.makeText(this, text, Toast.LENGTH_SHORT).show();\r\n                            }\r\n                        }\r\n                    }\r\n                } catch (IOException | FormatException e) {\r\n                    e.printStackTrace();\r\n                } finally {\r\n                    try {\r\n                        ndef.close();\r\n                    } catch (IOException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n            } else {\r\n                Toast.makeText(this, &quot;Poškozen&#253; NFC Tag&quot;, Toast.LENGTH_LONG).show();\r\n            }\r\n        }\r\n    \r\n        private String readText(NdefRecord record) throws UnsupportedEncodingException {\r\n            byte[] payload = record.getPayload();\r\n    \r\n            String textEncoding = ((payload[0] &amp; 128) == 0) ? &quot;UTF-8&quot; : &quot;UTF-16&quot;;\r\n            int languageCodeLength = payload[0] &amp; 63;\r\n    \r\n            return new String(payload, languageCodeLength + 1, payload.length - languageCodeLength - 1, textEncoding);\r\n        }\r\n    }\r\n\r\n*Manifest.xml*\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.NFC&quot;/&gt;\r\n        &lt;uses-feature android:name=&quot;android.hardware.nfc&quot; android:required=&quot;true&quot;/&gt;\r\n        &lt;application\r\n            android:allowBackup=&quot;true&quot;\r\n            android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\r\n            android:fullBackupContent=&quot;@xml/backup_rules&quot;\r\n            android:icon=&quot;@mipmap/ic_launcher&quot;\r\n            android:label=&quot;@string/app_name&quot;\r\n            android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n            android:supportsRtl=&quot;true&quot;\r\n            android:theme=&quot;@style/Theme.APPNFC&quot;\r\n            tools:targetApi=&quot;31&quot;&gt;\r\n            &lt;activity\r\n                android:name=&quot;.MainActivity&quot;\r\n                android:exported=&quot;true&quot;&gt;\r\n                &lt;intent-filter&gt;\r\n                    &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n    \r\n                    &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n                &lt;/intent-filter&gt;\r\n            &lt;/activity&gt;\r\n        &lt;/application&gt;\r\n    \r\n    &lt;/manifest&gt;","title":"Why NFC works with PendingIntent.FLAG_MUTABLE and not with PendingIntent.FLAG_IMMUTABLE","body":"<p>I have a question about NFC and Pending Intent function. I am building an app, which reads content of NDEF Tag and send value to server.\nAfter much searching I found a bug in the code, specifically in a function PendingIntent.</p>\n<p>This is code of <em>MainActivity.java</em>. When I change FLAG_MUTABLE to IMMUTABLE, value of intent is <strong>null</strong> and app crash. When it is MUTABLE, value of intent is <strong>android.nfc.action.NDEF_DISCOVERED</strong> and everything works. I want to know, why it is, because every example and even somewhere in docs I found, that it should be IMMUTABLE.</p>\n<pre><code>import androidx.appcompat.app.AppCompatActivity;\n\nimport android.app.PendingIntent;\nimport android.content.Intent;\nimport android.nfc.FormatException;\nimport android.nfc.NdefMessage;\nimport android.nfc.NdefRecord;\nimport android.nfc.NfcAdapter;\nimport android.nfc.Tag;\nimport android.nfc.tech.Ndef;\nimport android.os.Bundle;\nimport android.provider.Settings;\nimport android.util.Log;\nimport android.widget.Toast;\n\nimport java.io.IOException;\nimport java.io.UnsupportedEncodingException;\nimport java.util.Arrays;\n\npublic class MainActivity extends AppCompatActivity {\n    private NfcAdapter nfcAdapter;\n    private PendingIntent pendingIntent;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        nfcAdapter = NfcAdapter.getDefaultAdapter(this);\n\n        if (nfcAdapter == null) {\n            Toast.makeText(this, &quot;Nepodporovaný telefon&quot;, Toast.LENGTH_LONG).show();\n        } else if (!nfcAdapter.isEnabled()) {\n            Toast.makeText(this, &quot;NFC je vypnuté&quot;, Toast.LENGTH_LONG).show();\n            startActivity(new Intent(Settings.ACTION_NFC_SETTINGS));\n        }\n\n        pendingIntent = PendingIntent.getActivity(this, 0, new Intent(this, getClass()).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP), PendingIntent.FLAG_MUTABLE);\n    }\n\n    @Override\n    protected void onResume() {\n        super.onResume();\n        if (nfcAdapter != null) {\n            nfcAdapter.enableForegroundDispatch(this, pendingIntent, null, null);\n        }\n    }\n\n    @Override\n    protected void onPause() {\n        super.onPause();\n        if (nfcAdapter != null) {\n            nfcAdapter.disableForegroundDispatch(this);\n        }\n    }\n\n    @Override\n    protected void onNewIntent(Intent intent) {\n        super.onNewIntent(intent);\n        Log.d(&quot;INTENT ACTION&quot;, intent.getAction());\n        Tag tag = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG);\n        if (tag != null) {\n            Ndef ndef = Ndef.get(tag);\n            if (ndef == null) {\n                Toast.makeText(this, &quot;Prázdný NFC Tag&quot;, Toast.LENGTH_SHORT).show();\n                return;\n            }\n\n            try {\n                ndef.connect();\n\n                NdefMessage ndefMessage = ndef.getNdefMessage();\n                if (ndefMessage != null) {\n                    NdefRecord[] records = ndefMessage.getRecords();\n                    for (NdefRecord record : records) {\n                        if (record.getTnf() == NdefRecord.TNF_WELL_KNOWN &amp;&amp; Arrays.equals(record.getType(), NdefRecord.RTD_TEXT)) {\n                            String text = readText(record);\n                            // TODO: Odeslat data do Google Sheets\n                            Toast.makeText(this, text, Toast.LENGTH_SHORT).show();\n                        }\n                    }\n                }\n            } catch (IOException | FormatException e) {\n                e.printStackTrace();\n            } finally {\n                try {\n                    ndef.close();\n                } catch (IOException e) {\n                    e.printStackTrace();\n                }\n            }\n        } else {\n            Toast.makeText(this, &quot;Poškozený NFC Tag&quot;, Toast.LENGTH_LONG).show();\n        }\n    }\n\n    private String readText(NdefRecord record) throws UnsupportedEncodingException {\n        byte[] payload = record.getPayload();\n\n        String textEncoding = ((payload[0] &amp; 128) == 0) ? &quot;UTF-8&quot; : &quot;UTF-16&quot;;\n        int languageCodeLength = payload[0] &amp; 63;\n\n        return new String(payload, languageCodeLength + 1, payload.length - languageCodeLength - 1, textEncoding);\n    }\n}\n</code></pre>\n<p><em>Manifest.xml</em></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;\n    &lt;uses-permission android:name=&quot;android.permission.NFC&quot;/&gt;\n    &lt;uses-feature android:name=&quot;android.hardware.nfc&quot; android:required=&quot;true&quot;/&gt;\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.APPNFC&quot;\n        tools:targetApi=&quot;31&quot;&gt;\n        &lt;activity\n            android:name=&quot;.MainActivity&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n"},{"tags":["java","java-11","pdf-reactor"],"answers":[{"tags":[],"owner":{"account_id":13704422,"reputation":1323,"user_id":9888512,"display_name":"MatterOfFact"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689010480,"creation_date":1689010480,"answer_id":76656081,"question_id":76628209,"body_markdown":"I have contacted support. Unfortunately there is no way (yet) to create a PDF from multiple HTMLs. You have to create all PDFs separately and then use [a workaround][1] with an empty HTML and the overlay option to merge the previously created PDFs.\r\n\r\n\r\n  [1]: https://support.realobjects.com/support/solutions/articles/7000018262-can-i-merge-a-set-of-existing-pdfs-without-converting-an-additional-html-","title":"How to create a single pdf from multiple html using pdfreactor","body":"<p>I have contacted support. Unfortunately there is no way (yet) to create a PDF from multiple HTMLs. You have to create all PDFs separately and then use <a href=\"https://support.realobjects.com/support/solutions/articles/7000018262-can-i-merge-a-set-of-existing-pdfs-without-converting-an-additional-html-\" rel=\"nofollow noreferrer\">a workaround</a> with an empty HTML and the overlay option to merge the previously created PDFs.</p>\n"}],"owner":{"account_id":13704422,"reputation":1323,"user_id":9888512,"display_name":"MatterOfFact"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76656081,"answer_count":1,"score":0,"last_activity_date":1689010480,"creation_date":1688641935,"question_id":76628209,"body_markdown":"In my code I have a dynamic list of html strings and want to create a single pdf out of it using pdfreactor.\r\nThe `configuration.setMergeDocuments` method only accepts pdf files as input, not html. \r\nWhat is the best way to get a single pdf out of multiple html strings using pdfreactor?","title":"How to create a single pdf from multiple html using pdfreactor","body":"<p>In my code I have a dynamic list of html strings and want to create a single pdf out of it using pdfreactor.\nThe <code>configuration.setMergeDocuments</code> method only accepts pdf files as input, not html.\nWhat is the best way to get a single pdf out of multiple html strings using pdfreactor?</p>\n"},{"tags":["java","spring","web","initializr"],"owner":{"account_id":26376291,"reputation":21,"user_id":20030192,"display_name":"Pervaiz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":103,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":0,"score":1,"last_activity_date":1689010308,"creation_date":1689010308,"question_id":76656060,"body_markdown":"When I try to create a Springboot project from https://start.spring.io/. I am getting this error\r\n&quot;Could not connect to the server. Please check your server&quot;. Downloading of project artifacts stops.\r\n[screen shot of error][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/eTitu.png","title":"Spring Initializr error &quot;Could not connect to the server. Please check your server&quot;","body":"<p>When I try to create a Springboot project from <a href=\"https://start.spring.io/\" rel=\"nofollow noreferrer\">https://start.spring.io/</a>. I am getting this error\n&quot;Could not connect to the server. Please check your server&quot;. Downloading of project artifacts stops.\n<a href=\"https://i.stack.imgur.com/eTitu.png\" rel=\"nofollow noreferrer\">screen shot of error</a></p>\n"},{"tags":["java","kubernetes","kubernetes-helm","amazon-eks","apache-pulsar"],"comments":[{"owner":{"account_id":13863020,"reputation":137023,"user_id":10008173,"display_name":"David Maze"},"score":0,"creation_date":1688988269,"post_id":76650809,"comment_id":135144488,"body_markdown":"It seems unlikely to me that a standalone `java -version` invocation would honor a `PULSAR_MEM` environment variable.  Can you add the `-XX:+PrintFlagsFinal` into the `PULSAR_MEM` setting instead; then its output should be in `kubectl logs`?","body":"It seems unlikely to me that a standalone <code>java -version</code> invocation would honor a <code>PULSAR_MEM</code> environment variable.  Can you add the <code>-XX:+PrintFlagsFinal</code> into the <code>PULSAR_MEM</code> setting instead; then its output should be in <code>kubectl logs</code>?"},{"owner":{"account_id":14370996,"reputation":900,"user_id":10380766,"display_name":"Hofbr"},"score":0,"creation_date":1689009839,"post_id":76650809,"comment_id":135149664,"body_markdown":"@DavidMaze Thanks for the suggestion, I did try and the logs didn&#39;t show the PULSAR_MEM variables. I&#39;ve posted the output in my question above.","body":"@DavidMaze Thanks for the suggestion, I did try and the logs didn&#39;t show the PULSAR_MEM variables. I&#39;ve posted the output in my question above."}],"owner":{"account_id":14370996,"reputation":900,"user_id":10380766,"display_name":"Hofbr"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":156,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689009864,"creation_date":1688966009,"question_id":76650809,"body_markdown":"I have a Pulsar cluster running an EKS (kubernetes) cluster. I&#39;ve been advised to try and increase the JVM heap size on of the pods (called toolset) as advised by one of our support vendors:\r\n\r\n&gt; You are running this directly from the toolset pod, and the toolset pod&#39;s JVM heap allocation is very small compared to the RAM\r\n&gt; allocated to the pod. Because the Pulsar Producers need to use a\r\n&gt; buffer to batch messages, if the JVM heap is small, it will be less\r\n&gt; efficient at sending messages at high traffic. We recommend increasing\r\n&gt; the JVM heap size using the new JVM ops to control their size by\r\n&gt; percentages:\r\n&gt; https://www.baeldung.com/java-jvm-parameters-rampercentage. Once set,\r\n&gt; please restart the pod.\r\n\r\nFollowing the baeldung site above I&#39;m trying to set the parameters:\r\n\r\n - `XX:InitialRAMPercentage=50.0`\r\n - `XX:MinRAMPercentage=80.0`\r\n - `XX:MaxRAMPercentage=60.0`\r\n\r\nI set these variables in my `values.yaml` and I can see after applying these changes that they are reflected in the configmap:\r\n```bash\r\n➜ kubectl -n pulsar describe configmap event-platform-pulsar-0-sn-toolset \r\n...\r\nData\r\n====\r\nPULSAR_MEM:\r\n----\r\n-XX:MaxDirectMemorySize=128M -XX:InitialRAMPercentage=50.0 -XX:MinRAMPercentage=80.0 -XX:MaxRAMPercentage=60.0\r\nhttpServerPort:\r\n----\r\n8000\r\nlog4j2.yaml:\r\n----\r\n...\r\n```\r\n\r\nHowever, when I try and check the value of `MaxRAMPercentage` on the toolset pod, I see the original value.\r\n```\r\n➜ kubectl exec -it event-platform-pulsar-0-sn-toolset-0 -n pulsar -- java -XX:+PrintFlagsFinal -version | grep -E &quot;MaxRAMPercentage&quot;\r\n\r\n   double MaxRAMPercentage                         = 25.000000                                 {product} {default}\r\n```\r\n\r\nDespite the JVM memory parameters being correctly set in the ConfigMap and appearing in the Kubernetes manifest, they do not seem to be applied to the running JVM, as indicated by the `MaxRAMPercentage` still being set to the default value. What could be causing this issue, and how can I correctly set these parameters?\r\n\r\n## Further Troubleshooting Results\r\nI added the environment variable `-XX:+PrintFlagsFinal`\r\n```\r\n    PULSAR_MEM: &gt;\r\n      -XX:MaxDirectMemorySize=128M\r\n      -XX:InitialRAMPercentage=50.0\r\n      -XX:MinRAMPercentage=80.0\r\n      -XX:MaxRAMPercentage=60.0\r\n      -XX:+PrintFlagsFinal\r\n```\r\nThis the startup logs:\r\n```\r\n➜ kubectl logs event-platform-pulsar-0-sn-toolset-0 -n pulsar\r\n[conf/client.conf] Applying config authParams = {&quot;privateKey&quot;:&quot;file:///pulsar/oauth2_keys/OAUTH2BROKERCREDS&quot;,&quot;issuerUrl&quot;:&quot;https://api.climate.com/api/oauth&quot;,&quot;audience&quot;:&quot;platform.climate.com&quot;,&quot;scope&quot;:&quot;&quot;}\r\n[conf/client.conf] Applying config authPlugin = org.apache.pulsar.client.impl.auth.oauth2.AuthenticationOAuth2\r\n[conf/client.conf] Applying config brokerServiceUrl = pulsar://event-platform-pulsar-0-sn-broker:6650/\r\n[conf/client.conf] Applying config webServiceUrl = http://event-platform-pulsar-0-sn-broker:8080/\r\n[conf/bookkeeper.conf] Applying config httpServerEnabled = true\r\n[conf/bookkeeper.conf] Applying config httpServerPort = 8000\r\n[conf/bookkeeper.conf] Applying config statsProviderClass = org.apache.bookkeeper.stats.prometheus.PrometheusMetricsProvider\r\n[conf/bookkeeper.conf] Applying config useHostNameAsBookieID = true\r\n[conf/bookkeeper.conf] Applying config zkLedgersRootPath = /ledgers\r\n[conf/bookkeeper.conf] Applying config zkServers = event-platform-pulsar-0-sn-zookeeper:2181\r\nConfiguring pulsarctl context ...\r\nSuccessfully configured pulsarctl context.\r\n```\r\n","title":"JVM Parameters Not Being Applied Despite Being Set in Kubernetes ConfigMap","body":"<p>I have a Pulsar cluster running an EKS (kubernetes) cluster. I've been advised to try and increase the JVM heap size on of the pods (called toolset) as advised by one of our support vendors:</p>\n<blockquote>\n<p>You are running this directly from the toolset pod, and the toolset pod's JVM heap allocation is very small compared to the RAM\nallocated to the pod. Because the Pulsar Producers need to use a\nbuffer to batch messages, if the JVM heap is small, it will be less\nefficient at sending messages at high traffic. We recommend increasing\nthe JVM heap size using the new JVM ops to control their size by\npercentages:\n<a href=\"https://www.baeldung.com/java-jvm-parameters-rampercentage\" rel=\"nofollow noreferrer\">https://www.baeldung.com/java-jvm-parameters-rampercentage</a>. Once set,\nplease restart the pod.</p>\n</blockquote>\n<p>Following the baeldung site above I'm trying to set the parameters:</p>\n<ul>\n<li><code>XX:InitialRAMPercentage=50.0</code></li>\n<li><code>XX:MinRAMPercentage=80.0</code></li>\n<li><code>XX:MaxRAMPercentage=60.0</code></li>\n</ul>\n<p>I set these variables in my <code>values.yaml</code> and I can see after applying these changes that they are reflected in the configmap:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>➜ kubectl -n pulsar describe configmap event-platform-pulsar-0-sn-toolset \n...\nData\n====\nPULSAR_MEM:\n----\n-XX:MaxDirectMemorySize=128M -XX:InitialRAMPercentage=50.0 -XX:MinRAMPercentage=80.0 -XX:MaxRAMPercentage=60.0\nhttpServerPort:\n----\n8000\nlog4j2.yaml:\n----\n...\n</code></pre>\n<p>However, when I try and check the value of <code>MaxRAMPercentage</code> on the toolset pod, I see the original value.</p>\n<pre><code>➜ kubectl exec -it event-platform-pulsar-0-sn-toolset-0 -n pulsar -- java -XX:+PrintFlagsFinal -version | grep -E &quot;MaxRAMPercentage&quot;\n\n   double MaxRAMPercentage                         = 25.000000                                 {product} {default}\n</code></pre>\n<p>Despite the JVM memory parameters being correctly set in the ConfigMap and appearing in the Kubernetes manifest, they do not seem to be applied to the running JVM, as indicated by the <code>MaxRAMPercentage</code> still being set to the default value. What could be causing this issue, and how can I correctly set these parameters?</p>\n<h2>Further Troubleshooting Results</h2>\n<p>I added the environment variable <code>-XX:+PrintFlagsFinal</code></p>\n<pre><code>    PULSAR_MEM: &gt;\n      -XX:MaxDirectMemorySize=128M\n      -XX:InitialRAMPercentage=50.0\n      -XX:MinRAMPercentage=80.0\n      -XX:MaxRAMPercentage=60.0\n      -XX:+PrintFlagsFinal\n</code></pre>\n<p>This the startup logs:</p>\n<pre><code>➜ kubectl logs event-platform-pulsar-0-sn-toolset-0 -n pulsar\n[conf/client.conf] Applying config authParams = {&quot;privateKey&quot;:&quot;file:///pulsar/oauth2_keys/OAUTH2BROKERCREDS&quot;,&quot;issuerUrl&quot;:&quot;https://api.climate.com/api/oauth&quot;,&quot;audience&quot;:&quot;platform.climate.com&quot;,&quot;scope&quot;:&quot;&quot;}\n[conf/client.conf] Applying config authPlugin = org.apache.pulsar.client.impl.auth.oauth2.AuthenticationOAuth2\n[conf/client.conf] Applying config brokerServiceUrl = pulsar://event-platform-pulsar-0-sn-broker:6650/\n[conf/client.conf] Applying config webServiceUrl = http://event-platform-pulsar-0-sn-broker:8080/\n[conf/bookkeeper.conf] Applying config httpServerEnabled = true\n[conf/bookkeeper.conf] Applying config httpServerPort = 8000\n[conf/bookkeeper.conf] Applying config statsProviderClass = org.apache.bookkeeper.stats.prometheus.PrometheusMetricsProvider\n[conf/bookkeeper.conf] Applying config useHostNameAsBookieID = true\n[conf/bookkeeper.conf] Applying config zkLedgersRootPath = /ledgers\n[conf/bookkeeper.conf] Applying config zkServers = event-platform-pulsar-0-sn-zookeeper:2181\nConfiguring pulsarctl context ...\nSuccessfully configured pulsarctl context.\n</code></pre>\n"},{"tags":["java","maven","log4j2"],"answers":[{"tags":[],"owner":{"account_id":44601,"reputation":20150,"user_id":131021,"accept_rate":86,"display_name":"stwissel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689009204,"creation_date":1687296151,"answer_id":76518467,"question_id":76518432,"body_markdown":"Log4j2 is looking for its configuration on the classpath. For Maven based projects that usually means `[projectroot]/src/main/resources` and `[projectroot]/src/test/resources` (for test). That should work for both inside IntelliJ and the maven command line `mvn clean test`.\r\n\r\nYou can also set the system property `log4j2.configurationFile` to point to the configuration you wish to use.\r\n\r\nFor Maven that would be:\r\n\r\n```bash\r\nmvn -Dlog4j.configurationFile=/fully-qualified-path/log4j2.properties\r\n```\r\n\r\nFull details can be found here: https://logging.apache.org/log4j/2.x/manual/configuration.html\r\n\r\n**Update**:\r\n\r\nI created a [working gist](https://gist.github.com/Stwissel/06e5c11bf5829fcdbbbd7318d5da85b0) for reference.\r\n\r\nNote: path needs to be absolute, `~` won&#39;t work. Not tested on windows. Tested with Maven 3.9.2","title":"Log4j2 does not log to file when test project is executed using Maven (mvn clean test)","body":"<p>Log4j2 is looking for its configuration on the classpath. For Maven based projects that usually means <code>[projectroot]/src/main/resources</code> and <code>[projectroot]/src/test/resources</code> (for test). That should work for both inside IntelliJ and the maven command line <code>mvn clean test</code>.</p>\n<p>You can also set the system property <code>log4j2.configurationFile</code> to point to the configuration you wish to use.</p>\n<p>For Maven that would be:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>mvn -Dlog4j.configurationFile=/fully-qualified-path/log4j2.properties\n</code></pre>\n<p>Full details can be found here: <a href=\"https://logging.apache.org/log4j/2.x/manual/configuration.html\" rel=\"nofollow noreferrer\">https://logging.apache.org/log4j/2.x/manual/configuration.html</a></p>\n<p><strong>Update</strong>:</p>\n<p>I created a <a href=\"https://gist.github.com/Stwissel/06e5c11bf5829fcdbbbd7318d5da85b0\" rel=\"nofollow noreferrer\">working gist</a> for reference.</p>\n<p>Note: path needs to be absolute, <code>~</code> won't work. Not tested on windows. Tested with Maven 3.9.2</p>\n"}],"owner":{"account_id":10836930,"reputation":37,"user_id":7969625,"accept_rate":50,"display_name":"Glenn P"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76518467,"answer_count":1,"score":0,"last_activity_date":1689009204,"creation_date":1687295573,"question_id":76518432,"body_markdown":"When running using mvn clean test from IntelliJ terminal, Log4j2 does not write to the log file. But when tests are run using TestNG play button inside IntelliJ, logs are getting written.\r\n\r\nThis happened after I published the test automation framework to a JAR file.\r\n\r\nIn the previous version where the framework classes are still within the test project and not published as jar file, it is able to write logs when running using mvn clean test.\r\n\r\nAny ideas? Thanks","title":"Log4j2 does not log to file when test project is executed using Maven (mvn clean test)","body":"<p>When running using mvn clean test from IntelliJ terminal, Log4j2 does not write to the log file. But when tests are run using TestNG play button inside IntelliJ, logs are getting written.</p>\n<p>This happened after I published the test automation framework to a JAR file.</p>\n<p>In the previous version where the framework classes are still within the test project and not published as jar file, it is able to write logs when running using mvn clean test.</p>\n<p>Any ideas? Thanks</p>\n"},{"tags":["java","hibernate","setter","throws"],"answers":[{"tags":[],"owner":{"account_id":12264773,"reputation":146,"user_id":10266818,"display_name":"Matthias"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689008007,"creation_date":1689008007,"answer_id":76655830,"question_id":76655815,"body_markdown":"From your description it sounds perfectly safe to remove the throws declaration. A guess would be that the setter originally took a `String` and parsed it. If you have source control, a check in the history might confirm this.","title":"Setter only does assignment, yet declares that it throws a ParseException; in Hibernate","body":"<p>From your description it sounds perfectly safe to remove the throws declaration. A guess would be that the setter originally took a <code>String</code> and parsed it. If you have source control, a check in the history might confirm this.</p>\n"}],"owner":{"account_id":1615458,"reputation":7096,"user_id":1493294,"accept_rate":60,"display_name":"candied_orange"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76655830,"answer_count":1,"score":0,"last_activity_date":1689008007,"creation_date":1689007886,"question_id":76655815,"body_markdown":"Discovered a `Date` setter that only does the typical assignment, yet has a `throws ParseException` for what seems like no good reason. No `Date` construction is happening in the body of the setter. Just assignment.\r\n\r\nThis is on a Hibernate entity. The setters field is annotated with @Column as nullable, insertable, and updateable. Not sure if that matters.\r\n\r\nIs this obviously wrong and should be fixed by removing the `throws` or is there more research to do before deciding to remove this?\r\n\r\n","title":"Setter only does assignment, yet declares that it throws a ParseException; in Hibernate","body":"<p>Discovered a <code>Date</code> setter that only does the typical assignment, yet has a <code>throws ParseException</code> for what seems like no good reason. No <code>Date</code> construction is happening in the body of the setter. Just assignment.</p>\n<p>This is on a Hibernate entity. The setters field is annotated with @Column as nullable, insertable, and updateable. Not sure if that matters.</p>\n<p>Is this obviously wrong and should be fixed by removing the <code>throws</code> or is there more research to do before deciding to remove this?</p>\n"},{"tags":["java","button","jframe"],"comments":[{"owner":{"account_id":27957120,"reputation":19,"user_id":21349725,"display_name":"Jon doe"},"score":0,"creation_date":1689008691,"post_id":76655817,"comment_id":135149439,"body_markdown":"@5f3bde39-70a2-4df1-afa2-47f61b Tried this already and it produces the same result as the code above","body":"@5f3bde39-70a2-4df1-afa2-47f61b Tried this already and it produces the same result as the code above"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689008829,"post_id":76655817,"comment_id":135149468,"body_markdown":"[Avoid null layouts in Swing](https://technojeeves.com/index.php/aliasjava1/114-avoid-null-layouts-in-swing)\nAlso, you should really only have one `JFrame` per app. If you want extra windows, they would normally be dialog types, not application windows","body":"<a href=\"https://technojeeves.com/index.php/aliasjava1/114-avoid-null-layouts-in-swing\" rel=\"nofollow noreferrer\">Avoid null layouts in Swing</a> Also, you should really only have one <code>JFrame</code> per app. If you want extra windows, they would normally be dialog types, not application windows"},{"owner":{"account_id":27957120,"reputation":19,"user_id":21349725,"display_name":"Jon doe"},"score":0,"creation_date":1689009199,"post_id":76655817,"comment_id":135149537,"body_markdown":"@g00se The layout was there temporarily I just noticed I have forgotten to delete it but thanks for the reminder. And yes you think it is simply easier to just reload/repaint the original Jframe?","body":"@g00se The layout was there temporarily I just noticed I have forgotten to delete it but thanks for the reminder. And yes you think it is simply easier to just reload/repaint the original Jframe?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689010688,"post_id":76655817,"comment_id":135149800,"body_markdown":"Well it looks like you&#39;ve got a &#39;roving interface&#39; so as @user16320675 said, a `CardLayout` might be the thing.","body":"Well it looks like you&#39;ve got a &#39;roving interface&#39; so as @user16320675 said, a <code>CardLayout</code> might be the thing."},{"owner":{"account_id":27957120,"reputation":19,"user_id":21349725,"display_name":"Jon doe"},"score":0,"creation_date":1689011734,"post_id":76655817,"comment_id":135149981,"body_markdown":"@user16320675 many thanks, will google around about how to use card layout.","body":"@user16320675 many thanks, will google around about how to use card layout."},{"owner":{"account_id":27957120,"reputation":19,"user_id":21349725,"display_name":"Jon doe"},"score":0,"creation_date":1689012075,"post_id":76655817,"comment_id":135150039,"body_markdown":"Many thanks @g00se (I was unable to ping both in single comment)","body":"Many thanks @g00se (I was unable to ping both in single comment)"}],"owner":{"account_id":27957120,"reputation":19,"user_id":21349725,"display_name":"Jon doe"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689008006,"creation_date":1689007920,"question_id":76655817,"body_markdown":"I am currently trying to open a new Jframe when a button is pressed and this is the easy part. But there is a slight delay opening the new Jframe. \r\n\r\n    import java.awt.event.ActionEvent;\r\n    import java.awt.event.ActionListener;\r\n    import javax.swing.*;    \r\n    import javax.swing.JFrame;\r\n\r\n     public class Aframe implements ActionListener {   \r\n\r\n    public void frame() {\r\n\tJFrame frame = new JFrame(&quot;1&quot;);\r\n        JButton button =new JButton(&quot;Start&quot;);  \r\n        JButton button2 =new JButton(&quot;Help&quot;);  \r\n        button.setBounds(50,100,110,30); \r\n        button2.setBounds(50,150,110,30); \r\n\tframe.setSize(890,700);\r\n\tframe.setLocation(300,60);\r\n        frame.setLayout(null);  //tillf&#228;lligt \r\n\tframe.setResizable(false);\r\n\tframe.setVisible(true);\r\n\tframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n\r\n        frame.add(button);\r\n        frame.add(button2);\r\n\r\n        button.addActionListener(new ActionListener(){  \r\n            public void actionPerformed(ActionEvent e){  \r\n                frame.dispose();\r\n                JFrame frame2 = new JFrame(&quot;2&quot;);\r\n                frame2.setSize(890,700);\r\n                frame2.setLocation(300,60);\r\n                frame2.setVisible(true);\r\n                frame.dispose();\r\n                frame2.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n                    }  \r\n                });  \r\n\r\n\t}\r\n\r\n    public static void main(String[] args) {\r\n\t\tstart.frame();\r\n    }\r\n\r\n    @Override\r\n    public void actionPerformed(ActionEvent arg0) {\r\n        \r\n    }\r\n\r\n    }\r\n\r\nI would like to have it appear instantly when the button is pressed or at least make it seem so. I guess it actually might be easier to repaint the entire frame rather than opening a new one? But I feel like asking here first.","title":"Java opening a new Jframe instantly so it appears without a delay","body":"<p>I am currently trying to open a new Jframe when a button is pressed and this is the easy part. But there is a slight delay opening the new Jframe.</p>\n<pre><code>import java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport javax.swing.*;    \nimport javax.swing.JFrame;\n\n public class Aframe implements ActionListener {   \n\npublic void frame() {\nJFrame frame = new JFrame(&quot;1&quot;);\n    JButton button =new JButton(&quot;Start&quot;);  \n    JButton button2 =new JButton(&quot;Help&quot;);  \n    button.setBounds(50,100,110,30); \n    button2.setBounds(50,150,110,30); \nframe.setSize(890,700);\nframe.setLocation(300,60);\n    frame.setLayout(null);  //tillfälligt \nframe.setResizable(false);\nframe.setVisible(true);\nframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n\n    frame.add(button);\n    frame.add(button2);\n\n    button.addActionListener(new ActionListener(){  \n        public void actionPerformed(ActionEvent e){  \n            frame.dispose();\n            JFrame frame2 = new JFrame(&quot;2&quot;);\n            frame2.setSize(890,700);\n            frame2.setLocation(300,60);\n            frame2.setVisible(true);\n            frame.dispose();\n            frame2.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n                }  \n            });  \n\n}\n\npublic static void main(String[] args) {\n    start.frame();\n}\n\n@Override\npublic void actionPerformed(ActionEvent arg0) {\n    \n}\n\n}\n</code></pre>\n<p>I would like to have it appear instantly when the button is pressed or at least make it seem so. I guess it actually might be easier to repaint the entire frame rather than opening a new one? But I feel like asking here first.</p>\n"},{"tags":["java","spring-boot-security"],"answers":[{"tags":[],"owner":{"account_id":21144793,"reputation":75,"user_id":15546361,"display_name":"Pabasara Rathnayake"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689007897,"creation_date":1689007897,"answer_id":76655816,"question_id":76655432,"body_markdown":"You have used Spring Security to manage authentication and permission in your web project based on the code you gave. You need help because you want to make the `/api/v1/accounts/register` endpoint publicly available, but it requires a valid token to access.\r\n\r\nYou must alter your `SecurityConfig` class to make the `/api/v1/accounts/register` endpoint available without authentication. This endpoint is now included in the `excludeFromCheck` list, which implies that authentication checks should not be performed on it. It is still viewed as an authenticated request though.\r\n\r\nTo resolve this, try out updating the `SecurityConfig` class in this way,\r\n\r\n    //... \r\n    public SecurityFilterChain securityFilterChain(HttpSecurity http, AccountRepository accountRepository) throws Exception {\r\n        List&lt;AntPathRequestMatcher&gt; excludeFromCheck = List.of(\r\n            //...\r\n    \r\n            new AntPathRequestMatcher(&quot;/api/v1/accounts/register&quot;)\r\n        );\r\n    \r\n        return http\r\n            //...\r\n            .authorizeHttpRequests(requests -&gt; requests\r\n                .requestMatchers(excludeFromCheck.toArray(new AntPathRequestMatcher[0])).permitAll()\r\n                .anyRequest().authenticated()\r\n            )\r\n            //...\r\n    } \r\n\r\n","title":"I get Error 401 when I send a POST request to an excluded endpoint","body":"<p>You have used Spring Security to manage authentication and permission in your web project based on the code you gave. You need help because you want to make the <code>/api/v1/accounts/register</code> endpoint publicly available, but it requires a valid token to access.</p>\n<p>You must alter your <code>SecurityConfig</code> class to make the <code>/api/v1/accounts/register</code> endpoint available without authentication. This endpoint is now included in the <code>excludeFromCheck</code> list, which implies that authentication checks should not be performed on it. It is still viewed as an authenticated request though.</p>\n<p>To resolve this, try out updating the <code>SecurityConfig</code> class in this way,</p>\n<pre><code>//... \npublic SecurityFilterChain securityFilterChain(HttpSecurity http, AccountRepository accountRepository) throws Exception {\n    List&lt;AntPathRequestMatcher&gt; excludeFromCheck = List.of(\n        //...\n\n        new AntPathRequestMatcher(&quot;/api/v1/accounts/register&quot;)\n    );\n\n    return http\n        //...\n        .authorizeHttpRequests(requests -&gt; requests\n            .requestMatchers(excludeFromCheck.toArray(new AntPathRequestMatcher[0])).permitAll()\n            .anyRequest().authenticated()\n        )\n        //...\n} \n</code></pre>\n"}],"owner":{"account_id":25397835,"reputation":9,"user_id":19207835,"display_name":"Count"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":157,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689007897,"creation_date":1689004576,"question_id":76655432,"body_markdown":"I&#39;m developing a web app where user can authenticate with OAuth2. In the web app there are a list of endpoints that are accessible only by sending requests (GET-POST-PUT-DELETE) including a valid token.\r\nNow I want to implement my web app by allowing users to authenticate with username and password. There is a form where user can Signup to the web app (they need to fill the form with the required data). \r\nSo, once an user clicked on Signup, a POST request is sent to the URL **localhost:8080/api/v1/accounts/register** and their data are stored into the db.\r\nMy problem is that the POST request works only if a valid token is included into the request. If I don&#39;t specify a valid token, I get an &quot;error 401 unauthorized&quot;. If I send the request by including the token, I got 201.\r\nWhat I tried to do was to make the endpoint (/api/v1/accounts/register) accessible to everyone. But I still get the error 401.\r\n\r\nThose are the classes involved into the authorization:\r\n\r\nSecurityConfig.java:\r\n\r\n    package it.app.demoaimeetingroombe.configuration;\r\n    \r\n    import it.app.demoaimeetingroombe.csrf.CsrfTokenCustom;\r\n    import it.app.demoaimeetingroombe.filter.AccountCheckFilterChain;\r\n    import it.app.demoaimeetingroombe.repository.AccountRepository;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\n    import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\n    import org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter;\r\n    import org.springframework.security.web.SecurityFilterChain;\r\n    import org.springframework.security.web.csrf.CsrfTokenRepository;\r\n    import org.springframework.security.web.util.matcher.AntPathRequestMatcher;\r\n    import org.springframework.web.cors.CorsConfiguration;\r\n    \r\n    import java.util.Collections;\r\n    import java.util.List;\r\n    \r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class SecurityConfig {\r\n        @Bean\r\n        public SecurityFilterChain securityFilterChain(HttpSecurity http, AccountRepository accountRepository) throws Exception {\r\n            List&lt;AntPathRequestMatcher&gt; excludeFromCheck = List.of(\r\n                    new AntPathRequestMatcher(&quot;/api/v1/accounts/authenticate&quot;),\r\n                    new AntPathRequestMatcher(&quot;/api/v1/rooms/*/bookings/daily/*&quot;),\r\n                    new AntPathRequestMatcher(&quot;/swagger-ui/**&quot;),\r\n                    new AntPathRequestMatcher(&quot;/swagger-ui.html&quot;),\r\n                    new AntPathRequestMatcher(&quot;/api/v1/accounts/register&quot;),\r\n                    new AntPathRequestMatcher(&quot;/v3/api-docs/**&quot;),\r\n                    new AntPathRequestMatcher(&quot;/api/v1/webauthn/**&quot;)\r\n            );\r\n    \r\n            return http\r\n                    .csrf().csrfTokenRepository(customCsrfTokenRepository())\r\n                    .ignoringRequestMatchers(new AntPathRequestMatcher(&quot;/api/v1/webauthn/**&quot;))\r\n                    .and()\r\n                    .authorizeHttpRequests(requests -&gt; requests\r\n                            .requestMatchers(\r\n                                    new AntPathRequestMatcher(&quot;/api/v1/rooms/*/bookings/daily/*&quot;),\r\n                                    new AntPathRequestMatcher(&quot;/swagger-ui/**&quot;),\r\n                                    new AntPathRequestMatcher(&quot;/swagger-ui.html&quot;),\r\n                                    new AntPathRequestMatcher(&quot;/api/v1/accounts/register&quot;),\r\n                                    new AntPathRequestMatcher(&quot;/v3/api-docs/**&quot;),\r\n                                    new AntPathRequestMatcher(&quot;/api/v1/webauthn/**&quot;)).permitAll()\r\n                            .anyRequest().authenticated()\r\n                    )\r\n                    .addFilterAfter(new AccountCheckFilterChain(accountRepository, excludeFromCheck), BearerTokenAuthenticationFilter.class)\r\n                    .oauth2ResourceServer()\r\n                    .jwt()\r\n                    .and()\r\n                    .and().cors().configurationSource(httpServletRequest -&gt; {\r\n                        CorsConfiguration corsConfiguration = new CorsConfiguration();\r\n                        corsConfiguration.setAllowedOriginPatterns(Collections.singletonList(&quot;http://localhost:3000&quot;));\r\n                        corsConfiguration.setAllowedMethods(Collections.singletonList(&quot;*&quot;));\r\n                        corsConfiguration.setAllowCredentials(true);\r\n                        corsConfiguration.setAllowedHeaders(Collections.singletonList(&quot;*&quot;));\r\n                        corsConfiguration.setExposedHeaders(Collections.singletonList(&quot;Authorization&quot;));\r\n                        corsConfiguration.setMaxAge(3600L);\r\n                        return corsConfiguration;\r\n                    })\r\n                    .and().build();\r\n        }\r\n    \r\n        private CsrfTokenRepository customCsrfTokenRepository() {\r\n            return new CsrfTokenCustom();\r\n        }\r\n    }\r\n\r\nAccountCheckFilterChain.java:\r\n\r\n    package it.app.demoaimeetingroombe.filter;\r\n    \r\n    \r\n    import it.app.demoaimeetingroombe.repository.AccountRepository;\r\n    import jakarta.servlet.*;\r\n    import jakarta.servlet.http.HttpServletRequest;\r\n    import jakarta.servlet.http.HttpServletResponse;\r\n    import org.apache.commons.lang3.StringUtils;\r\n    import org.springframework.security.core.Authentication;\r\n    import org.springframework.security.core.context.SecurityContextHolder;\r\n    import org.springframework.security.web.util.matcher.AntPathRequestMatcher;\r\n    \r\n    import java.io.IOException;\r\n    import java.util.List;\r\n    \r\n    public class AccountCheckFilterChain implements Filter {\r\n        private final AccountRepository accountRepository;\r\n        private final List&lt;AntPathRequestMatcher&gt; excludeFromCheck;\r\n    \r\n        public AccountCheckFilterChain(AccountRepository accountRepository, List&lt;AntPathRequestMatcher&gt; excludeFromCheck) {\r\n            this.accountRepository = accountRepository;\r\n            this.excludeFromCheck = excludeFromCheck;\r\n        }\r\n    \r\n        @Override\r\n        public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)\r\n                throws IOException, ServletException {\r\n            HttpServletRequest httpRequest = ((HttpServletRequest) servletRequest);\r\n            HttpServletResponse httpResponse = ((HttpServletResponse) servletResponse);\r\n            boolean shouldExclude = excludeFromCheck.stream().anyMatch(exclude -&gt; exclude.matches(httpRequest));\r\n            if (!shouldExclude) {\r\n                Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\r\n                if (authentication == null) {\r\n                    setUnauthorized(httpResponse);\r\n                    return;\r\n                }\r\n                String accountId = authentication.getName();\r\n                if (StringUtils.isBlank(accountId) || !accountRepository.existsByIdAndIsActiveTrue(accountId)) {\r\n                    setUnauthorized(httpResponse);\r\n                    return;\r\n                }\r\n            }\r\n            filterChain.doFilter(servletRequest, servletResponse);\r\n        }\r\n    \r\n        private static void setUnauthorized(HttpServletResponse httpResponse) {\r\n            httpResponse.setStatus(HttpServletResponse.SC_UNAUTHORIZED);\r\n            httpResponse.setContentType(&quot;application/json&quot;);\r\n            httpResponse.setContentLength(0);\r\n        }\r\n    }\r\n\r\nCsrfTokenCustom.java:\r\n\r\n    package it.app.demoaimeetingroombe.csrf;\r\n    \r\n    import jakarta.servlet.http.HttpServletRequest;\r\n    import jakarta.servlet.http.HttpServletResponse;\r\n    import org.springframework.security.web.csrf.CookieCsrfTokenRepository;\r\n    import org.springframework.security.web.csrf.CsrfToken;\r\n    import org.springframework.security.web.csrf.CsrfTokenRepository;\r\n    import org.springframework.security.web.csrf.DefaultCsrfToken;\r\n    \r\n    public class CsrfTokenCustom implements CsrfTokenRepository {\r\n        private final CookieCsrfTokenRepository delegate = CookieCsrfTokenRepository.withHttpOnlyFalse();\r\n    \r\n        @Override\r\n        public CsrfToken generateToken(HttpServletRequest request) {\r\n            return delegate.generateToken(request);\r\n        }\r\n    \r\n        @Override\r\n        public void saveToken(CsrfToken token, HttpServletRequest request, HttpServletResponse response) {\r\n            delegate.saveToken(token, request, response);\r\n        }\r\n    \r\n        @Override\r\n        public CsrfToken loadToken(HttpServletRequest request) {\r\n            CsrfToken token = delegate.loadToken(request);\r\n            if (isWebAuthnEndpoint(request)) {\r\n                String newToken = &quot;ALLOW_ALL&quot;;\r\n                return new DefaultCsrfToken(token.getHeaderName(), token.getParameterName(), newToken);\r\n            }\r\n            return token;\r\n        }\r\n    \r\n        private boolean isWebAuthnEndpoint(HttpServletRequest request) {\r\n            String requestURI = request.getRequestURI();\r\n            return requestURI.startsWith(&quot;/api/v1/webauthn/&quot;);\r\n        }\r\n    }","title":"I get Error 401 when I send a POST request to an excluded endpoint","body":"<p>I'm developing a web app where user can authenticate with OAuth2. In the web app there are a list of endpoints that are accessible only by sending requests (GET-POST-PUT-DELETE) including a valid token.\nNow I want to implement my web app by allowing users to authenticate with username and password. There is a form where user can Signup to the web app (they need to fill the form with the required data).\nSo, once an user clicked on Signup, a POST request is sent to the URL <strong>localhost:8080/api/v1/accounts/register</strong> and their data are stored into the db.\nMy problem is that the POST request works only if a valid token is included into the request. If I don't specify a valid token, I get an &quot;error 401 unauthorized&quot;. If I send the request by including the token, I got 201.\nWhat I tried to do was to make the endpoint (/api/v1/accounts/register) accessible to everyone. But I still get the error 401.</p>\n<p>Those are the classes involved into the authorization:</p>\n<p>SecurityConfig.java:</p>\n<pre><code>package it.app.demoaimeetingroombe.configuration;\n\nimport it.app.demoaimeetingroombe.csrf.CsrfTokenCustom;\nimport it.app.demoaimeetingroombe.filter.AccountCheckFilterChain;\nimport it.app.demoaimeetingroombe.repository.AccountRepository;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter;\nimport org.springframework.security.web.SecurityFilterChain;\nimport org.springframework.security.web.csrf.CsrfTokenRepository;\nimport org.springframework.security.web.util.matcher.AntPathRequestMatcher;\nimport org.springframework.web.cors.CorsConfiguration;\n\nimport java.util.Collections;\nimport java.util.List;\n\n@Configuration\n@EnableWebSecurity\npublic class SecurityConfig {\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http, AccountRepository accountRepository) throws Exception {\n        List&lt;AntPathRequestMatcher&gt; excludeFromCheck = List.of(\n                new AntPathRequestMatcher(&quot;/api/v1/accounts/authenticate&quot;),\n                new AntPathRequestMatcher(&quot;/api/v1/rooms/*/bookings/daily/*&quot;),\n                new AntPathRequestMatcher(&quot;/swagger-ui/**&quot;),\n                new AntPathRequestMatcher(&quot;/swagger-ui.html&quot;),\n                new AntPathRequestMatcher(&quot;/api/v1/accounts/register&quot;),\n                new AntPathRequestMatcher(&quot;/v3/api-docs/**&quot;),\n                new AntPathRequestMatcher(&quot;/api/v1/webauthn/**&quot;)\n        );\n\n        return http\n                .csrf().csrfTokenRepository(customCsrfTokenRepository())\n                .ignoringRequestMatchers(new AntPathRequestMatcher(&quot;/api/v1/webauthn/**&quot;))\n                .and()\n                .authorizeHttpRequests(requests -&gt; requests\n                        .requestMatchers(\n                                new AntPathRequestMatcher(&quot;/api/v1/rooms/*/bookings/daily/*&quot;),\n                                new AntPathRequestMatcher(&quot;/swagger-ui/**&quot;),\n                                new AntPathRequestMatcher(&quot;/swagger-ui.html&quot;),\n                                new AntPathRequestMatcher(&quot;/api/v1/accounts/register&quot;),\n                                new AntPathRequestMatcher(&quot;/v3/api-docs/**&quot;),\n                                new AntPathRequestMatcher(&quot;/api/v1/webauthn/**&quot;)).permitAll()\n                        .anyRequest().authenticated()\n                )\n                .addFilterAfter(new AccountCheckFilterChain(accountRepository, excludeFromCheck), BearerTokenAuthenticationFilter.class)\n                .oauth2ResourceServer()\n                .jwt()\n                .and()\n                .and().cors().configurationSource(httpServletRequest -&gt; {\n                    CorsConfiguration corsConfiguration = new CorsConfiguration();\n                    corsConfiguration.setAllowedOriginPatterns(Collections.singletonList(&quot;http://localhost:3000&quot;));\n                    corsConfiguration.setAllowedMethods(Collections.singletonList(&quot;*&quot;));\n                    corsConfiguration.setAllowCredentials(true);\n                    corsConfiguration.setAllowedHeaders(Collections.singletonList(&quot;*&quot;));\n                    corsConfiguration.setExposedHeaders(Collections.singletonList(&quot;Authorization&quot;));\n                    corsConfiguration.setMaxAge(3600L);\n                    return corsConfiguration;\n                })\n                .and().build();\n    }\n\n    private CsrfTokenRepository customCsrfTokenRepository() {\n        return new CsrfTokenCustom();\n    }\n}\n</code></pre>\n<p>AccountCheckFilterChain.java:</p>\n<pre><code>package it.app.demoaimeetingroombe.filter;\n\n\nimport it.app.demoaimeetingroombe.repository.AccountRepository;\nimport jakarta.servlet.*;\nimport jakarta.servlet.http.HttpServletRequest;\nimport jakarta.servlet.http.HttpServletResponse;\nimport org.apache.commons.lang3.StringUtils;\nimport org.springframework.security.core.Authentication;\nimport org.springframework.security.core.context.SecurityContextHolder;\nimport org.springframework.security.web.util.matcher.AntPathRequestMatcher;\n\nimport java.io.IOException;\nimport java.util.List;\n\npublic class AccountCheckFilterChain implements Filter {\n    private final AccountRepository accountRepository;\n    private final List&lt;AntPathRequestMatcher&gt; excludeFromCheck;\n\n    public AccountCheckFilterChain(AccountRepository accountRepository, List&lt;AntPathRequestMatcher&gt; excludeFromCheck) {\n        this.accountRepository = accountRepository;\n        this.excludeFromCheck = excludeFromCheck;\n    }\n\n    @Override\n    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)\n            throws IOException, ServletException {\n        HttpServletRequest httpRequest = ((HttpServletRequest) servletRequest);\n        HttpServletResponse httpResponse = ((HttpServletResponse) servletResponse);\n        boolean shouldExclude = excludeFromCheck.stream().anyMatch(exclude -&gt; exclude.matches(httpRequest));\n        if (!shouldExclude) {\n            Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\n            if (authentication == null) {\n                setUnauthorized(httpResponse);\n                return;\n            }\n            String accountId = authentication.getName();\n            if (StringUtils.isBlank(accountId) || !accountRepository.existsByIdAndIsActiveTrue(accountId)) {\n                setUnauthorized(httpResponse);\n                return;\n            }\n        }\n        filterChain.doFilter(servletRequest, servletResponse);\n    }\n\n    private static void setUnauthorized(HttpServletResponse httpResponse) {\n        httpResponse.setStatus(HttpServletResponse.SC_UNAUTHORIZED);\n        httpResponse.setContentType(&quot;application/json&quot;);\n        httpResponse.setContentLength(0);\n    }\n}\n</code></pre>\n<p>CsrfTokenCustom.java:</p>\n<pre><code>package it.app.demoaimeetingroombe.csrf;\n\nimport jakarta.servlet.http.HttpServletRequest;\nimport jakarta.servlet.http.HttpServletResponse;\nimport org.springframework.security.web.csrf.CookieCsrfTokenRepository;\nimport org.springframework.security.web.csrf.CsrfToken;\nimport org.springframework.security.web.csrf.CsrfTokenRepository;\nimport org.springframework.security.web.csrf.DefaultCsrfToken;\n\npublic class CsrfTokenCustom implements CsrfTokenRepository {\n    private final CookieCsrfTokenRepository delegate = CookieCsrfTokenRepository.withHttpOnlyFalse();\n\n    @Override\n    public CsrfToken generateToken(HttpServletRequest request) {\n        return delegate.generateToken(request);\n    }\n\n    @Override\n    public void saveToken(CsrfToken token, HttpServletRequest request, HttpServletResponse response) {\n        delegate.saveToken(token, request, response);\n    }\n\n    @Override\n    public CsrfToken loadToken(HttpServletRequest request) {\n        CsrfToken token = delegate.loadToken(request);\n        if (isWebAuthnEndpoint(request)) {\n            String newToken = &quot;ALLOW_ALL&quot;;\n            return new DefaultCsrfToken(token.getHeaderName(), token.getParameterName(), newToken);\n        }\n        return token;\n    }\n\n    private boolean isWebAuthnEndpoint(HttpServletRequest request) {\n        String requestURI = request.getRequestURI();\n        return requestURI.startsWith(&quot;/api/v1/webauthn/&quot;);\n    }\n}\n</code></pre>\n"},{"tags":["java","flutter","exception","connection-timeout"],"comments":[{"owner":{"account_id":20453177,"reputation":116,"user_id":15007469,"display_name":"Naqeeb Abid"},"score":0,"creation_date":1689011109,"post_id":76655769,"comment_id":135149872,"body_markdown":"Are you connected to the internet? Please make sure that your internet connection is working and if possible, use a different network to test it out.","body":"Are you connected to the internet? Please make sure that your internet connection is working and if possible, use a different network to test it out."},{"owner":{"account_id":27374023,"reputation":11,"user_id":20879647,"display_name":"sandika dassanayake"},"score":0,"creation_date":1689036539,"post_id":76655769,"comment_id":135153349,"body_markdown":"@NaqeebAbid yes i checked using different networks but not works same error","body":"@NaqeebAbid yes i checked using different networks but not works same error"},{"owner":{"account_id":27374023,"reputation":11,"user_id":20879647,"display_name":"sandika dassanayake"},"score":0,"creation_date":1692851277,"post_id":76655769,"comment_id":135680736,"body_markdown":"it was a connection problem..i was able to fix the problem by changing the network thank @NaqeebAbid for answering","body":"it was a connection problem..i was able to fix the problem by changing the network thank @NaqeebAbid for answering"}],"owner":{"account_id":27374023,"reputation":11,"user_id":20879647,"display_name":"sandika dassanayake"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689007512,"creation_date":1689007512,"question_id":76655769,"body_markdown":"when running a flutter project following error comes and running fails\r\n\r\n```\r\nException in thread &quot;main&quot; java.net.ConnectException: Connection timed out: connect\r\n        at java.base/sun.nio.ch.Net.connect0(Native Method)\r\n        at java.base/sun.nio.ch.Net.connect(Net.java:579)\r\n        at java.base/sun.nio.ch.Net.connect(Net.java:568)\r\n        at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:588)\r\n        at java.base/java.net.Socket.connect(Socket.java:633)\r\n        at java.base/java.net.Socket.connect(Socket.java:583)\r\n        at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:183)\r\n        at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:531)\r\n        at java.base/sun.net.www.http.HttpClient$1.run(HttpClient.java:590)\r\n        at java.base/sun.net.www.http.HttpClient$1.run(HttpClient.java:588)\r\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:569)\r\n        at java.base/sun.net.www.http.HttpClient.privilegedOpenServer(HttpClient.java:587)\r\n        at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:631)\r\n        at java.base/sun.net.www.protocol.https.HttpsClient.&lt;init&gt;(HttpsClient.java:266)\r\n        at java.base/sun.net.www.protocol.https.HttpsClient.New(HttpsClient.java:380)\r\n        at java.base/sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.getNewHttpClient(AbstractDelegateHttpsURLConnection.java:202)\r\n        at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1263)     \r\n        at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1128)      \r\n        at java.base/sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:179)\r\n        at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1665)   \r\n        at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1589)    \r\n        at java.base/sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:224)\r\n        at org.gradle.wrapper.Download.downloadInternal(Download.java:58)\r\n        at org.gradle.wrapper.Download.download(Download.java:44)\r\n        at org.gradle.wrapper.Install$1.call(Install.java:61)\r\n        at org.gradle.wrapper.Install$1.call(Install.java:48)\r\n        at org.gradle.wrapper.ExclusiveFileAccessManager.access(ExclusiveFileAccessManager.java:65)\r\n        at org.gradle.wrapper.Install.createDist(Install.java:48)\r\n        at org.gradle.wrapper.WrapperExecutor.execute(WrapperExecutor.java:128)\r\n        at org.gradle.wrapper.GradleWrapperMain.main(GradleWrapperMain.java:61)\r\nRunning Gradle task &#39;assembleDebug&#39;...                             45.9s\r\nException: Gradle task assembleDebug failed with exit code 1\r\n```\r\n\r\n\r\n\r\nI tried changing java version of my computer and I checked the connection but none of them works..","title":"Exception: Gradle task assembleDebug failed with exit code 1 when running a flutter app","body":"<p>when running a flutter project following error comes and running fails</p>\n<pre><code>Exception in thread &quot;main&quot; java.net.ConnectException: Connection timed out: connect\n        at java.base/sun.nio.ch.Net.connect0(Native Method)\n        at java.base/sun.nio.ch.Net.connect(Net.java:579)\n        at java.base/sun.nio.ch.Net.connect(Net.java:568)\n        at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:588)\n        at java.base/java.net.Socket.connect(Socket.java:633)\n        at java.base/java.net.Socket.connect(Socket.java:583)\n        at java.base/sun.net.NetworkClient.doConnect(NetworkClient.java:183)\n        at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:531)\n        at java.base/sun.net.www.http.HttpClient$1.run(HttpClient.java:590)\n        at java.base/sun.net.www.http.HttpClient$1.run(HttpClient.java:588)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:569)\n        at java.base/sun.net.www.http.HttpClient.privilegedOpenServer(HttpClient.java:587)\n        at java.base/sun.net.www.http.HttpClient.openServer(HttpClient.java:631)\n        at java.base/sun.net.www.protocol.https.HttpsClient.&lt;init&gt;(HttpsClient.java:266)\n        at java.base/sun.net.www.protocol.https.HttpsClient.New(HttpsClient.java:380)\n        at java.base/sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.getNewHttpClient(AbstractDelegateHttpsURLConnection.java:202)\n        at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect0(HttpURLConnection.java:1263)     \n        at java.base/sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:1128)      \n        at java.base/sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:179)\n        at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream0(HttpURLConnection.java:1665)   \n        at java.base/sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1589)    \n        at java.base/sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:224)\n        at org.gradle.wrapper.Download.downloadInternal(Download.java:58)\n        at org.gradle.wrapper.Download.download(Download.java:44)\n        at org.gradle.wrapper.Install$1.call(Install.java:61)\n        at org.gradle.wrapper.Install$1.call(Install.java:48)\n        at org.gradle.wrapper.ExclusiveFileAccessManager.access(ExclusiveFileAccessManager.java:65)\n        at org.gradle.wrapper.Install.createDist(Install.java:48)\n        at org.gradle.wrapper.WrapperExecutor.execute(WrapperExecutor.java:128)\n        at org.gradle.wrapper.GradleWrapperMain.main(GradleWrapperMain.java:61)\nRunning Gradle task 'assembleDebug'...                             45.9s\nException: Gradle task assembleDebug failed with exit code 1\n</code></pre>\n<p>I tried changing java version of my computer and I checked the connection but none of them works..</p>\n"},{"tags":["java","selenium-webdriver","selenium-chromedriver"],"comments":[{"owner":{"account_id":10299692,"reputation":5719,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"score":0,"creation_date":1679497861,"post_id":75813824,"comment_id":133733367,"body_markdown":"Refer this - https://stackoverflow.com/questions/75718422/org-openqa-selenium-remote-http-connectionfailedexception-unable-to-establish-w","body":"Refer this - <a href=\"https://stackoverflow.com/questions/75718422/org-openqa-selenium-remote-http-connectionfailedexception-unable-to-establish-w\" title=\"org openqa selenium remote http connectionfailedexception unable to establish w\">stackoverflow.com/questions/75718422/&hellip;</a>"},{"owner":{"account_id":468289,"reputation":178176,"user_id":874188,"accept_rate":62,"display_name":"tripleee"},"score":0,"creation_date":1679566694,"post_id":75813824,"comment_id":133745926,"body_markdown":"Does this answer your question? [org.openqa.selenium.remote.http.ConnectionFailedException: Unable to establish websocket connection Selenium ChromeDriver and Chrome v111](https://stackoverflow.com/questions/75718422/org-openqa-selenium-remote-http-connectionfailedexception-unable-to-establish-w)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/75718422/org-openqa-selenium-remote-http-connectionfailedexception-unable-to-establish-w\">org.openqa.selenium.remote.http.ConnectionFailedException: Unable to establish websocket connection Selenium ChromeDriver and Chrome v111</a>"}],"answers":[{"tags":[],"owner":{"account_id":28102140,"reputation":11,"user_id":21471146,"display_name":"Aleena"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1679566494,"creation_date":1679566494,"answer_id":75821723,"question_id":75813824,"body_markdown":"https://www.youtube.com/watch?v=7ZdlSW4S7h4\r\njust add the argument for chrome, it will work. For me firefox issue still exists.\r\nChromeOptions options = new ChromeOptions();\r\n options.addArguments(&quot;--remote-allow-origins=*&quot;);","title":"Getting error for selenium - both for chrome &amp; firefox","body":"<p><a href=\"https://www.youtube.com/watch?v=7ZdlSW4S7h4\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=7ZdlSW4S7h4</a>\njust add the argument for chrome, it will work. For me firefox issue still exists.\nChromeOptions options = new ChromeOptions();\noptions.addArguments(&quot;--remote-allow-origins=*&quot;);</p>\n"},{"tags":[],"owner":{"account_id":28988631,"reputation":1,"user_id":22204937,"display_name":"Maku"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689007370,"creation_date":1689007323,"answer_id":76655751,"question_id":75813824,"body_markdown":"If you still having error, try adding argument options to ChromeDriver method. \r\n\r\n    ChromeOptions options = new ChromeOptions();\r\n        options.addArguments(&quot;--remote-allow-origins=*&quot;);\r\n        WebDriver driver = new ChromeDriver(options);","title":"Getting error for selenium - both for chrome &amp; firefox","body":"<p>If you still having error, try adding argument options to ChromeDriver method.</p>\n<pre><code>ChromeOptions options = new ChromeOptions();\n    options.addArguments(&quot;--remote-allow-origins=*&quot;);\n    WebDriver driver = new ChromeDriver(options);\n</code></pre>\n"}],"owner":{"account_id":14186544,"reputation":1,"user_id":21456627,"display_name":"user184630"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":730,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1689007370,"creation_date":1679496737,"question_id":75813824,"body_markdown":"I have gone through the available issues but not being able to identify the problem. Posting here to get help. OS - windows -10 browser - firefox - 107.0.1 selenium java - 4.8.1\r\n\r\ntesting for firefox - browser is not launching -\r\n\r\nCode:\r\n````\r\npackage demo;\r\n\r\nimport org.openqa.selenium.WebDriver; //import org.openqa.selenium.chrome.ChromeDriver; import org.openqa.selenium.firefox.FirefoxDriver;\r\n\r\npublic class FirstSeleniumTC {\r\n\r\npublic static void main(String[] args) {\r\n    \r\n    //System.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;C:\\\\selenium-java\\\\chromeDriver\\\\chromedriver.exe&quot;);\r\n    //WebDriver driver = new ChromeDriver();\r\n    //driver.get(&quot;https://www.facebook.com/&quot;);\r\n    \r\n    System.setProperty(&quot;webdriver.gecko.driver&quot;,&quot;C:\\\\selenium-java\\\\firefoxDriver\\\\geckodriver.exe&quot;);\r\n    WebDriver driver = new FirefoxDriver();\r\n    driver.get(&quot;https://www.facebook.com/&quot;);\r\n    \r\n}\r\n````\r\nConsole Error:\r\n````\r\nException in thread &quot;main&quot; org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Possible causes are invalid address of the remote server or browser start-up failure. Host info: host: &#39;DESKTOP-QKEHO5U&#39;, ip: &#39;192.168.56.1&#39; at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:561) at org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:229) at org.openqa.selenium.remote.RemoteWebDriver.(RemoteWebDriver.java:157) at org.openqa.selenium.firefox.FirefoxDriver.(FirefoxDriver.java:130) at org.openqa.selenium.firefox.FirefoxDriver.(FirefoxDriver.java:111) at org.openqa.selenium.firefox.FirefoxDriver.(FirefoxDriver.java:101) at demo.FirstSeleniumTC.main(FirstSeleniumTC.java:17) Caused by: org.openqa.selenium.WebDriverException: Timed out waiting for driver process to start. Build info: version: &#39;4.8.1&#39;, revision: &#39;8ebccac989&#39; System info: os.name: &#39;Windows 10&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;10.0&#39;, java.version: &#39;17.0.2&#39; Driver info: driver.version: FirefoxDriver at org.openqa.selenium.remote.service.DriverService.start(DriverService.java:218) at org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:98) at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:543) ... 6 more\r\n````\r\nFor chrome - the browser is launched but the url is not used- showing as - not secure data-\r\n````\r\nStarting ChromeDriver 111.0.5563.64 (c710e93d5b63b7095afe8c2c17df34408078439d-refs/branch-heads/5563@{#995}) on port 8431 Only local connections are allowed. Please see https://chromedriver.chromium.org/security-considerations for suggestions on keeping ChromeDriver safe. ChromeDriver was started successfully. Mar 22, 2023 6:43:58 PM org.openqa.selenium.remote.http.WebSocket$Listener onError WARNING: Invalid Status code=403 text=Forbidden java.io.IOException: Invalid Status code=403 text=Forbidden at org.asynchttpclient.netty.handler.WebSocketHandler.abort(WebSocketHandler.java:92) at org.asynchttpclient.netty.handler.WebSocketHandler.handleRead(WebSocketHandler.java:118) at org.asynchttpclient.netty.handler.AsyncHttpClientHandler.channelRead(AsyncHttpClientHandler.java:78) at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:436) at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:346) at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:333) at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:454) at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:290) at io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:251) at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442) at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410) at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440) at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919) at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166) at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788) at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724) at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650) at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) at java.base/java.lang.Thread.run(Thread.java:833)\r\n\r\nException in thread &quot;main&quot; org.openqa.selenium.remote.http.ConnectionFailedException: Unable to establish websocket connection to http://localhost:54687/devtools/browser/b8f002dc-36c4-48db-8c52-f3943bef0598 Build info: version: &#39;4.8.1&#39;, revision: &#39;8ebccac989&#39; System info: os.name: &#39;Windows 10&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;10.0&#39;, java.version: &#39;17.0.2&#39; Driver info: driver.version: ChromeDriver at org.openqa.selenium.remote.http.netty.NettyWebSocket.(NettyWebSocket.java:102) at org.openqa.selenium.remote.http.netty.NettyWebSocket.lambda$create$3(NettyWebSocket.java:128) at org.openqa.selenium.remote.http.netty.NettyClient.openSocket(NettyClient.java:107) at org.openqa.selenium.devtools.Connection.(Connection.java:78) at org.openqa.selenium.chromium.ChromiumDriver.lambda$new$2(ChromiumDriver.java:116) at java.base/java.util.Optional.map(Optional.java:260) at org.openqa.selenium.chromium.ChromiumDriver.(ChromiumDriver.java:114) at org.openqa.selenium.chrome.ChromeDriver.(ChromeDriver.java:82) at org.openqa.selenium.chrome.ChromeDriver.(ChromeDriver.java:50) at demo.FirstSeleniumTC.main(FirstSeleniumTC.java:13)\r\n````\r\nPlease help. I am a beginner.","title":"Getting error for selenium - both for chrome &amp; firefox","body":"<p>I have gone through the available issues but not being able to identify the problem. Posting here to get help. OS - windows -10 browser - firefox - 107.0.1 selenium java - 4.8.1</p>\n<p>testing for firefox - browser is not launching -</p>\n<p>Code:</p>\n<pre><code>package demo;\n\nimport org.openqa.selenium.WebDriver; //import org.openqa.selenium.chrome.ChromeDriver; import org.openqa.selenium.firefox.FirefoxDriver;\n\npublic class FirstSeleniumTC {\n\npublic static void main(String[] args) {\n    \n    //System.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;C:\\\\selenium-java\\\\chromeDriver\\\\chromedriver.exe&quot;);\n    //WebDriver driver = new ChromeDriver();\n    //driver.get(&quot;https://www.facebook.com/&quot;);\n    \n    System.setProperty(&quot;webdriver.gecko.driver&quot;,&quot;C:\\\\selenium-java\\\\firefoxDriver\\\\geckodriver.exe&quot;);\n    WebDriver driver = new FirefoxDriver();\n    driver.get(&quot;https://www.facebook.com/&quot;);\n    \n}\n</code></pre>\n<p>Console Error:</p>\n<pre><code>Exception in thread &quot;main&quot; org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Possible causes are invalid address of the remote server or browser start-up failure. Host info: host: 'DESKTOP-QKEHO5U', ip: '192.168.56.1' at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:561) at org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:229) at org.openqa.selenium.remote.RemoteWebDriver.(RemoteWebDriver.java:157) at org.openqa.selenium.firefox.FirefoxDriver.(FirefoxDriver.java:130) at org.openqa.selenium.firefox.FirefoxDriver.(FirefoxDriver.java:111) at org.openqa.selenium.firefox.FirefoxDriver.(FirefoxDriver.java:101) at demo.FirstSeleniumTC.main(FirstSeleniumTC.java:17) Caused by: org.openqa.selenium.WebDriverException: Timed out waiting for driver process to start. Build info: version: '4.8.1', revision: '8ebccac989' System info: os.name: 'Windows 10', os.arch: 'amd64', os.version: '10.0', java.version: '17.0.2' Driver info: driver.version: FirefoxDriver at org.openqa.selenium.remote.service.DriverService.start(DriverService.java:218) at org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:98) at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:543) ... 6 more\n</code></pre>\n<p>For chrome - the browser is launched but the url is not used- showing as - not secure data-</p>\n<pre><code>Starting ChromeDriver 111.0.5563.64 (c710e93d5b63b7095afe8c2c17df34408078439d-refs/branch-heads/5563@{#995}) on port 8431 Only local connections are allowed. Please see https://chromedriver.chromium.org/security-considerations for suggestions on keeping ChromeDriver safe. ChromeDriver was started successfully. Mar 22, 2023 6:43:58 PM org.openqa.selenium.remote.http.WebSocket$Listener onError WARNING: Invalid Status code=403 text=Forbidden java.io.IOException: Invalid Status code=403 text=Forbidden at org.asynchttpclient.netty.handler.WebSocketHandler.abort(WebSocketHandler.java:92) at org.asynchttpclient.netty.handler.WebSocketHandler.handleRead(WebSocketHandler.java:118) at org.asynchttpclient.netty.handler.AsyncHttpClientHandler.channelRead(AsyncHttpClientHandler.java:78) at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) at io.netty.channel.CombinedChannelDuplexHandler$DelegatingChannelHandlerContext.fireChannelRead(CombinedChannelDuplexHandler.java:436) at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:346) at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:333) at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:454) at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:290) at io.netty.channel.CombinedChannelDuplexHandler.channelRead(CombinedChannelDuplexHandler.java:251) at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442) at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410) at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440) at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919) at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166) at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788) at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724) at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650) at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) at java.base/java.lang.Thread.run(Thread.java:833)\n\nException in thread &quot;main&quot; org.openqa.selenium.remote.http.ConnectionFailedException: Unable to establish websocket connection to http://localhost:54687/devtools/browser/b8f002dc-36c4-48db-8c52-f3943bef0598 Build info: version: '4.8.1', revision: '8ebccac989' System info: os.name: 'Windows 10', os.arch: 'amd64', os.version: '10.0', java.version: '17.0.2' Driver info: driver.version: ChromeDriver at org.openqa.selenium.remote.http.netty.NettyWebSocket.(NettyWebSocket.java:102) at org.openqa.selenium.remote.http.netty.NettyWebSocket.lambda$create$3(NettyWebSocket.java:128) at org.openqa.selenium.remote.http.netty.NettyClient.openSocket(NettyClient.java:107) at org.openqa.selenium.devtools.Connection.(Connection.java:78) at org.openqa.selenium.chromium.ChromiumDriver.lambda$new$2(ChromiumDriver.java:116) at java.base/java.util.Optional.map(Optional.java:260) at org.openqa.selenium.chromium.ChromiumDriver.(ChromiumDriver.java:114) at org.openqa.selenium.chrome.ChromeDriver.(ChromeDriver.java:82) at org.openqa.selenium.chrome.ChromeDriver.(ChromeDriver.java:50) at demo.FirstSeleniumTC.main(FirstSeleniumTC.java:13)\n</code></pre>\n<p>Please help. I am a beginner.</p>\n"},{"tags":["java","apache-spark","apache-spark-sql","amazon-emr","emr-serverless"],"answers":[{"tags":[],"owner":{"account_id":8894158,"reputation":129,"user_id":6639778,"display_name":"Shai Barak"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689007115,"creation_date":1689007115,"answer_id":76655724,"question_id":76628542,"body_markdown":"For anyone encounter the same problem, i found the problem was quite simple - it appears that &#39;spark.setMaster(local[*])&#39; should only be used when you run locally and not to run on the cluster.","title":"Executors not seem to be created or scaling up on Spark Application on AWS EMR Serverless","body":"<p>For anyone encounter the same problem, i found the problem was quite simple - it appears that 'spark.setMaster(local[*])' should only be used when you run locally and not to run on the cluster.</p>\n"}],"owner":{"account_id":8894158,"reputation":129,"user_id":6639778,"display_name":"Shai Barak"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":615,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76655724,"answer_count":1,"score":0,"last_activity_date":1689007115,"creation_date":1688644320,"question_id":76628542,"body_markdown":"I would appreciate your help with my problem.\r\n\r\nI&#39;m running a spark application on AWS EMR serverless with emr 6.11 release.\r\nI&#39;m using Spark 3.3.2 with java 17, with configuration: maximum recourses of 200 vCPU and 1600gb memory.\r\nMy application is structured to read records from s3 and saving into a broadcast variable,\r\nThen have reading some other records from s3 and iterating over them with parallelize rdd\r\nand checking them against the first records, and saving them at last.\r\nTo simplify it is something like this :\r\n\r\n```java\r\nDataset&lt;Row&gt; groupA = readAllRecords();\r\ngroupA = manipulateData(groupA);\r\nDataset&lt;Row&gt; groupB = readAllRecords();\r\n\r\ngroupB.parallelize( recordB -&gt; {\r\n   checkRecord(groupA, recordB) \r\n   saveRecord(record)      \r\n});\r\n```\r\nMy problem is I don&#39;t see in any stage that spark is scaling up any executors,\r\nalthough I have heavy workloads.\r\n\r\nThis is my dashboard : \r\n[![cloudwatch dashboard](https://i.stack.imgur.com/EDuxU.jpg)](https://i.stack.imgur.com/EDuxU.jpg)\r\nServer UI history while running local:\r\n[![Server UI history](https://i.stack.imgur.com/GL05a.jpg)](https://i.stack.imgur.com/GL05a.jpg)\r\n\r\nIs it possible it is all running on the driver ? \r\nwhat it is i don&#39;t see ?\r\n\r\nPlease let me know if more information is needed.\r\nI attached some of the log at start of the app.\r\nI noticed this error : \r\n\r\n`Caused by: java.lang.NullPointerException: Cannot invoke &quot;org.apache.spark.storage.BlockManagerId.executorId()&quot; because &quot;idWithoutTopologyInfo&quot; is null`\r\n\r\nbut it is ignored and i&#39;m not sure it&#39;s related.\r\n\r\n&gt; ``` 23/07/05 11:17:44 INFO SparkContext: Running Spark version\r\n&gt; 3.3.2-amzn-0 23/07/05 11:17:44 INFO ResourceUtils: ============================================================== 23/07/05 11:17:44 INFO ResourceUtils: No custom resources configured\r\n&gt; for spark.driver. 23/07/05 11:17:44 INFO ResourceUtils:\r\n&gt; ============================================================== 23/07/05 11:17:44 INFO SparkContext: Submitted application: FusionApp\r\n&gt; 23/07/05 11:17:44 INFO ResourceProfile: Default ResourceProfile\r\n&gt; created, executor resources: Map(cores -&gt; name: cores, amount: 4,\r\n&gt; script: , vendor: , memory -&gt; name: memory, amount: 14336, script: ,\r\n&gt; vendor: , offHeap -&gt; name: offHeap, amount: 0, script: , vendor: ),\r\n&gt; task resources: Map(cpus -&gt; name: cpus, amount: 1.0) 23/07/05 11:17:44\r\n&gt; INFO ResourceProfile: Limiting resource is cpus at 4 tasks per\r\n&gt; executor 23/07/05 11:17:44 INFO ResourceProfileManager: Added\r\n&gt; ResourceProfile id: 0 23/07/05 11:17:44 INFO SecurityManager: Changing\r\n&gt; view acls to: hadoop 23/07/05 11:17:44 INFO SecurityManager: Changing\r\n&gt; modify acls to: hadoop 23/07/05 11:17:44 INFO SecurityManager:\r\n&gt; Changing view acls groups to:  23/07/05 11:17:44 INFO SecurityManager:\r\n&gt; Changing modify acls groups to:  23/07/05 11:17:44 INFO\r\n&gt; SecurityManager: SecurityManager: authentication enabled; ui acls\r\n&gt; disabled; users  with view permissions: Set(hadoop); groups with view\r\n&gt; permissions: Set(); users  with modify permissions: Set(hadoop);\r\n&gt; groups with modify permissions: Set() 23/07/05 11:17:45 INFO Utils:\r\n&gt; Successfully started service &#39;sparkDriver&#39; on port 41285. 23/07/05\r\n&gt; 11:17:45 INFO SparkEnv: Registering MapOutputTracker 23/07/05 11:17:45\r\n&gt; INFO SparkEnv: Registering BlockManagerMaster 23/07/05 11:17:45 INFO\r\n&gt; BlockManagerMasterEndpoint: Using\r\n&gt; org.apache.spark.storage.DefaultTopologyMapper for getting topology\r\n&gt; information 23/07/05 11:17:45 INFO BlockManagerMasterEndpoint:\r\n&gt; BlockManagerMasterEndpoint up 23/07/05 11:17:45 INFO SparkEnv:\r\n&gt; Registering BlockManagerMasterHeartbeat 23/07/05 11:17:45 INFO\r\n&gt; DiskBlockManager: Created local directory at\r\n&gt; /tmp/blockmgr-98a76adc-5862-4053-93a5-584fec796959 23/07/05 11:17:45\r\n&gt; INFO MemoryStore: MemoryStore started with capacity 8.2 GiB 23/07/05\r\n&gt; 11:17:45 INFO SparkEnv: Registering OutputCommitCoordinator 23/07/05\r\n&gt; 11:17:45 INFO SubResultCacheManager: Sub-result caches are disabled.\r\n&gt; 23/07/05 11:17:45 INFO Utils: Successfully started service &#39;SparkUI&#39;\r\n&gt; on port 4040. 23/07/05 11:17:45 INFO SparkContext: Added JAR\r\n&gt; s3://jobjars/fusion/fusion-job-1.0.0--29114-SNAPSHOT-jar-with-dependencies.jar\r\n&gt; at\r\n&gt; s3://jobjars/fusion/fusion-job-1.0.0-29114-SNAPSHOT-jar-with-dependencies.jar\r\n&gt; with timestamp 1688555864852 23/07/05 11:17:45 INFO Executor: Starting\r\n&gt; executor ID driver on host ip-172-31.ec2.internal 23/07/05 11:17:45\r\n&gt; INFO Executor: Starting executor with user classpath\r\n&gt; (userClassPathFirst = false):\r\n&gt; &#39;file:/usr/lib/hadoop-lzo/lib/*,file:/usr/lib/hadoop/hadoop-aws.jar,file:/usr/share/aws/aws-java-sdk/*,file:/usr/share/aws/emr/emrfs/conf/,file:/usr/share/aws/emr/emrfs/lib/*,file:/usr/share/aws/emr/emrfs/auxlib/*,file:/usr/share/aws/emr/goodies/lib/emr-spark-goodies.jar,file:/usr/share/aws/emr/goodies/lib/emr-serverless-spark-goodies.jar,file:/usr/share/aws/emr/security/conf,file:/usr/share/aws/emr/security/lib/*,file:/usr/share/aws/hmclient/lib/aws-glue-datacatalog-spark-client.jar,file:/usr/share/java/Hive-JSON-Serde/hive-openx-serde.jar,file:/usr/share/aws/sagemaker-spark-sdk/lib/sagemaker-spark-sdk.jar,file:/usr/share/aws/emr/s3select/lib/emr-s3-select-spark-connector.jar,file:/docker/usr/lib/hadoop-lzo/lib/*,file:/docker/usr/lib/hadoop/hadoop-aws.jar,file:/docker/usr/share/aws/aws-java-sdk/*,file:/docker/usr/share/aws/emr/emrfs/conf,file:/docker/usr/share/aws/emr/emrfs/lib/*,file:/docker/usr/share/aws/emr/emrfs/auxlib/*,file:/docker/usr/share/aws/emr/goodies/lib/emr-spark-goodies.jar,file:/docker/usr/share/aws/emr/security/conf,file:/docker/usr/share/aws/emr/security/lib/*,file:/docker/usr/share/aws/hmclient/lib/aws-glue-datacatalog-spark-client.jar,file:/docker/usr/share/java/Hive-JSON-Serde/hive-openx-serde.jar,file:/docker/usr/share/aws/sagemaker-spark-sdk/lib/sagemaker-spark-sdk.jar,file:/docker/usr/share/aws/emr/s3select/lib/emr-s3-select-spark-connector.jar,file:/usr/share/aws/redshift/jdbc/RedshiftJDBC.jar,file:/usr/share/aws/redshift/spark-redshift/lib/*,file:/home/hadoop/conf,file:/home/hadoop/emr-serverless-spark-goodies.jar,file:/home/hadoop/emr-spark-goodies.jar,file:/home/hadoop/*,file:/home/hadoop/aws-glue-datacatalog-spark-client.jar,file:/home/hadoop/hive-openx-serde.jar,file:/home/hadoop/sagemaker-spark-sdk.jar,file:/home/hadoop/hadoop-aws.jar,file:/home/hadoop/RedshiftJDBC.jar,file:/home/hadoop/emr-s3-select-spark-connector.jar&#39;\r\n&gt; 23/07/05 11:17:45 INFO Executor: Fetching\r\n&gt; s3://jobjars-/fusion/yyyy-fusion-job-1.0.0--29114-SNAPSHOT-jar-with-dependencies.jar\r\n&gt; with timestamp 1688555864852 23/07/05 11:17:45 INFO\r\n&gt; S3NativeFileSystem: Opening\r\n&gt; &#39;s3://jobjars-29114/fusion/xxx-fusion-job-1.0.0--29114-SNAPSHOT-jar-with-dependencies.jar&#39;\r\n&gt; for reading 23/07/05 11:17:45 INFO Utils: Fetching\r\n&gt; s3://jobjars-/fusion/fusion-job-1.0.0--29114-SNAPSHOT-jar-with-dependencies.jar\r\n&gt; to\r\n&gt; /tmp/spark-fd0b8589-fbd6-4b4a-b69f-98955f2f906f/userFiles-7edecef0-92cd-46c4-9ca8-bdabe9c64f86/fetchFileTemp15434886852656050499.tmp\r\n&gt; 23/07/05 11:17:57 INFO Executor: Told to re-register on heartbeat\r\n&gt; 23/07/05 11:17:57 INFO BlockManager: BlockManager null re-registering\r\n&gt; with master 23/07/05 11:17:57 INFO BlockManagerMaster: Registering\r\n&gt; BlockManager null 23/07/05 11:17:57 WARN Executor: Issue communicating\r\n&gt; with driver in heartbeater org.apache.spark.SparkException: Exception\r\n&gt; thrown in awaitResult:  \tat\r\n&gt; org.apache.spark.util.ThreadUtils$.awaitResult(ThreadUtils.scala:301)\r\n&gt; ~[spark-core_2.12-3.3.2-amzn-0.jar:3.3.2-amzn-0] \tat\r\n&gt; org.apache.spark.rpc.RpcTimeout.awaitResult(RpcTimeout.scala:75)\r\n&gt; ~[spark-core_2.12-3.3.2-amzn-0.jar:3.3.2-amzn-0] \tat\r\n&gt; org.apache.spark.rpc.RpcEndpointRef.askSync(RpcEndpointRef.scala:103)\r\n&gt; ~[spark-core_2.12-3.3.2-amzn-0.jar:3.3.2-amzn-0] \tat\r\n&gt; org.apache.spark.rpc.RpcEndpointRef.askSync(RpcEndpointRef.scala:87)\r\n&gt; ~[spark-core_2.12-3.3.2-amzn-0.jar:3.3.2-amzn-0] \tat\r\n&gt; org.apache.spark.storage.BlockManagerMaster.registerBlockManager(BlockManagerMaster.scala:89)\r\n&gt; ~[spark-core_2.12-3.3.2-amzn-0.jar:3.3.2-amzn-0] \tat\r\n&gt; org.apache.spark.storage.BlockManager.reregister(BlockManager.scala:643)\r\n&gt; ~[spark-core_2.12-3.3.2-amzn-0.jar:3.3.2-amzn-0] \tat\r\n&gt; org.apache.spark.executor.Executor.reportHeartBeat(Executor.scala:1057)\r\n&gt; ~[spark-core_2.12-3.3.2-amzn-0.jar:3.3.2-amzn-0] \tat\r\n&gt; org.apache.spark.executor.Executor.$anonfun$heartbeater$1(Executor.scala:238)\r\n&gt; ~[spark-core_2.12-3.3.2-amzn-0.jar:3.3.2-amzn-0] \tat\r\n&gt; scala.runtime.java8.JFunction0$mcV$sp.apply(JFunction0$mcV$sp.java:23)\r\n&gt; ~[scala-library-2.12.15.jar:?] \tat\r\n&gt; org.apache.spark.util.Utils$.logUncaughtExceptions(Utils.scala:2100)\r\n&gt; ~[spark-core_2.12-3.3.2-amzn-0.jar:3.3.2-amzn-0] \tat\r\n&gt; org.apache.spark.Heartbeater$$anon$1.run(Heartbeater.scala:46)\r\n&gt; ~[spark-core_2.12-3.3.2-amzn-0.jar:3.3.2-amzn-0] \tat\r\n&gt; java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)\r\n&gt; ~[?:?] \tat\r\n&gt; java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)\r\n&gt; ~[?:?] \tat\r\n&gt; java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)\r\n&gt; ~[?:?] \tat\r\n&gt; java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n&gt; ~[?:?] \tat\r\n&gt; java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n&gt; ~[?:?] \tat java.lang.Thread.run(Thread.java:833) ~[?:?] Caused by:\r\n&gt; java.lang.NullPointerException: Cannot invoke\r\n&gt; &quot;org.apache.spark.storage.BlockManagerId.executorId()&quot; because\r\n&gt; &quot;idWithoutTopologyInfo&quot; is null \tat\r\n&gt; org.apache.spark.storage.BlockManagerMasterEndpoint.org$apache$spark$storage$BlockManagerMasterEndpoint$$register(BlockManagerMasterEndpoint.scala:591)\r\n&gt; ~[spark-core_2.12-3.3.2-amzn-0.jar:3.3.2-amzn-0] \tat\r\n&gt; org.apache.spark.storage.BlockManagerMasterEndpoint$$anonfun$receiveAndReply$1.applyOrElse(BlockManagerMasterEndpoint.scala:123)\r\n&gt; ~[spark-core_2.12-3.3.2-amzn-0.jar:3.3.2-amzn-0] \tat\r\n&gt; org.apache.spark.rpc.netty.Inbox.$anonfun$process$1(Inbox.scala:103)\r\n&gt; ~[spark-core_2.12-3.3.2-amzn-0.jar:3.3.2-amzn-0] \tat\r\n&gt; org.apache.spark.rpc.netty.Inbox.safelyCall(Inbox.scala:213)\r\n&gt; ~[spark-core_2.12-3.3.2-amzn-0.jar:3.3.2-amzn-0] \tat\r\n&gt; org.apache.spark.rpc.netty.Inbox.process(Inbox.scala:100)\r\n&gt; ~[spark-core_2.12-3.3.2-amzn-0.jar:3.3.2-amzn-0] \tat\r\n&gt; org.apache.spark.rpc.netty.MessageLoop.org$apache$spark$rpc$netty$MessageLoop$$receiveLoop(MessageLoop.scala:75)\r\n&gt; ~[spark-core_2.12-3.3.2-amzn-0.jar:3.3.2-amzn-0] \tat\r\n&gt; org.apache.spark.rpc.netty.MessageLoop$$anon$1.run(MessageLoop.scala:41)\r\n&gt; ~[spark-core_2.12-3.3.2-amzn-0.jar:3.3.2-amzn-0] \tat\r\n&gt; java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)\r\n&gt; ~[?:?] \tat java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n&gt; ~[?:?] 3 more 23/07/05 11:17:57 ERROR Inbox: Ignoring error\r\n&gt; java.lang.NullPointerException: Cannot invoke\r\n&gt; &quot;org.apache.spark.storage.BlockManagerId.executorId()&quot; because\r\n&gt; &quot;idWithoutTopologyInfo&quot; is null \tat\r\n&gt; org.apache.spark.storage.BlockManagerMasterEndpoint.org$apache$spark$storage$BlockManagerMasterEndpoint$$register(BlockManagerMasterEndpoint.scala:591)\r\n&gt; ~[spark-core_2.12-3.3.2-amzn-0.jar:3.3.2-amzn-0] \tat\r\n&gt; org.apache.spark.storage.BlockManagerMasterEndpoint$$anonfun$receiveAndReply$1.applyOrElse(BlockManagerMasterEndpoint.scala:123)\r\n&gt; ~[spark-core_2.12-3.3.2-amzn-0.jar:3.3.2-amzn-0] \tat\r\n&gt; org.apache.spark.rpc.netty.Inbox.$anonfun$process$1(Inbox.scala:103)\r\n&gt; ~[spark-core_2.12-3.3.2-amzn-0.jar:3.3.2-amzn-0] \tat\r\n&gt; org.apache.spark.rpc.netty.Inbox.safelyCall(Inbox.scala:213)\r\n&gt; ~[spark-core_2.12-3.3.2-amzn-0.jar:3.3.2-amzn-0] \tat\r\n&gt; org.apache.spark.rpc.netty.Inbox.process(Inbox.scala:100)\r\n&gt; ~[spark-core_2.12-3.3.2-amzn-0.jar:3.3.2-amzn-0] \tat\r\n&gt; org.apache.spark.rpc.netty.MessageLoop.org$apache$spark$rpc$netty$MessageLoop$$receiveLoop(MessageLoop.scala:75)\r\n&gt; ~[spark-core_2.12-3.3.2-amzn-0.jar:3.3.2-amzn-0] \tat\r\n&gt; org.apache.spark.rpc.netty.MessageLoop$$anon$1.run(MessageLoop.scala:41)\r\n&gt; ~[spark-core_2.12-3.3.2-amzn-0.jar:3.3.2-amzn-0] \tat\r\n&gt; java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)\r\n&gt; ~[?:?] \tat java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n&gt; ~[?:?] \tat\r\n&gt; java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n&gt; ~[?:?] \tat\r\n&gt; java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n&gt; ~[?:?] \tat java.lang.Thread.run(Thread.java:833) ~[?:?] 23/07/05\r\n&gt; 11:18:00 INFO Executor: Adding\r\n&gt; file:/tmp/spark-fd0b8589-fbd6-4b4a-b69f-98955f2f906f/userFiles-92cd-46c4-9ca8-/fusion-job-1.0.0-29114-SNAPSHOT-jar-with-dependencies.jar\r\n&gt; to class loader 23/07/05 11:18:00 INFO Utils: Successfully started\r\n&gt; service &#39;org.apache.spark.network.netty.NettyBlockTransferService&#39; on\r\n&gt; port 35657. 23/07/05 11:18:00 INFO NettyBlockTransferService: Server\r\n&gt; created on [2600:1f18:6a92:2601:18f2:3af:f80f:4dab]:35657 23/07/05\r\n&gt; 11:18:00 INFO BlockManager: Using\r\n&gt; org.apache.spark.storage.RandomBlockReplicationPolicy for block\r\n&gt; replication policy 23/07/05 11:18:00 INFO BlockManagerMaster:\r\n&gt; Registering BlockManager BlockManagerId(driver,\r\n&gt; [2600:1f18:6a92:2601:18f2:3af:f80f:4dab], 35657, None) 23/07/05\r\n&gt; 11:18:00 INFO BlockManagerMasterEndpoint: Registering block manager\r\n&gt; [2600:1f18:6a92:2601:18f2:3af:f80f:4dab]:35657 with 8.2 GiB RAM,\r\n&gt; BlockManagerId(driver, [2600:1f18:6a92:2601:18f2:3af:f80f:4dab],\r\n&gt; 35657, None) 23/07/05 11:18:00 INFO BlockManagerMaster: Registered\r\n&gt; BlockManager BlockManagerId(driver,\r\n&gt; [2600:1f18:6a92:2601:18f2:3af:f80f:4dab], 35657, None) 23/07/05\r\n&gt; 11:18:00 INFO BlockManager: Initialized BlockManager:\r\n&gt; BlockManagerId(driver, [2600:1f18:6a92:2601:18f2:3af:f80f:4dab],\r\n&gt; 35657, None) 23/07/05 11:18:00 INFO SingleEventLogFileWriter: Logging\r\n&gt; events to file:/var/log/spark/apps/local-1688555865619.inprogress\r\n&gt; 23/07/05 11:18:00 INFO SharedState: Setting\r\n&gt; hive.metastore.warehouse.dir (&#39;null&#39;) to the value of\r\n&gt; spark.sql.warehouse.dir. 23/07/05 11:18:00 INFO SharedState: Warehouse\r\n&gt; path is &#39;file:/home/hadoop/spark-warehouse&#39;. 23/07/05 11:18:01 INFO\r\n&gt; MemoryStore: Block broadcast_0 stored as values in memory (estimated\r\n&gt; size 72.0 B, free 8.2 GiB) 23/07/05 11:18:01 INFO MemoryStore: Block\r\n&gt; broadcast_0_piece0 stored as bytes in memory (estimated size 124.0 B,\r\n&gt; free 8.2 GiB) 23/07/05 11:18:01 INFO BlockManagerInfo: Added\r\n&gt; broadcast_0_piece0 in memory on\r\n&gt; [2600:1f18:6a92:2601:18f2:3af:f80f:4dab]:35657 (size: 124.0 B, free:\r\n&gt; 8.2 GiB) 23/07/05 11:18:01 INFO SparkContext: Created broadcast 0 from broadcast at Transformer.java:76 23/07/05 11:18:01 INFO MemoryStore:\r\n&gt; Block broadcast_1 stored as values in memory (estimated size 168.0 B,\r\n&gt; free 8.2 GiB) 23/07/05 11:18:01 INFO MemoryStore: Block\r\n&gt; broadcast_1_piece0 stored as bytes in memory (estimated size 304.0 B,\r\n&gt; free 8.2 GiB) 23/07/05 11:18:01 INFO BlockManagerInfo: Added\r\n&gt; broadcast_1_piece0 in memory on\r\n&gt; [2600:1f18:6a92:2601:18f2:3af:f80f:4dab]:35657 (size: 304.0 B, free:\r\n&gt; 8.2 GiB) 23/07/05 11:18:01 INFO SparkContext: Created broadcast 1 from broadcast at Transformer.java:80 23/07/05 11:18:02 INFO SparkContext:\r\n&gt; Starting job: collect at Transformer.java:123 23/07/05 11:18:02 INFO\r\n&gt; DAGScheduler: Got job 0 (collect at Transformer.java:123) with 52\r\n&gt; output partitions 23/07/05 11:18:02 INFO DAGScheduler: Final stage:\r\n&gt; ResultStage 0 (collect at Transformer.java:123) 23/07/05 11:18:02 INFO\r\n&gt; DAGScheduler: Parents of final stage: List() 23/07/05 11:18:02 INFO\r\n&gt; DAGScheduler: Missing parents: List() 23/07/05 11:18:02 INFO\r\n&gt; DAGScheduler: Submitting ResultStage 0 (ParallelCollectionRDD[0] at\r\n&gt; parallelize at Transformer.java:122), which has no missing parents\r\n&gt; 23/07/05 11:18:02 INFO MemoryStore: Block broadcast_2 stored as values\r\n&gt; in memory (estimated size 3.2 KiB, free 8.2 GiB) 23/07/05 11:18:02\r\n&gt; INFO MemoryStore: Block broadcast_2_piece0 stored as bytes in memory\r\n&gt; (estimated size 1899.0 B, free 8.2 GiB) 23/07/05 11:18:02 INFO\r\n&gt; BlockManagerInfo: Added broadcast_2_piece0 in memory on\r\n&gt; [2600:1f18:6a92:2601:18f2:3af:f80f:4dab]:35657 (size: 1899.0 B, free:\r\n&gt; 8.2 GiB) 23/07/05 11:18:02 INFO SparkContext: Created broadcast 2 from broadcast at DAGScheduler.scala:1570 23/07/05 11:18:02 INFO\r\n&gt; DAGScheduler: Submitting 52 missing tasks from ResultStage 0\r\n&gt; (ParallelCollectionRDD[0] at parallelize at Transformer.java:122)\r\n&gt; (first 15 tasks are for partitions Vector(0, 1, 2, 3, 4, 5, 6, 7, 8,\r\n&gt; 9, 10, 11, 12, 13, 14)) 23/07/05 11:18:02 INFO TaskSchedulerImpl:\r\n&gt; Adding task set 0.0 with 52 tasks resource profile 0 23/07/05 11:18:02\r\n&gt; INFO TaskSetManager: Starting task 0.0 in stage 0.0 (TID 0)\r\n&gt; (ip-172-31.ec2.internal, executor driver, partition 0, PROCESS_LOCAL,\r\n&gt; 5097 bytes) taskResourceAssignments Map() 23/07/05 11:18:02 INFO\r\n&gt; TaskSetManager: Starting task 1.0 in stage 0.0 (TID 1)\r\n&gt; (ip-172-31.ec2.internal, executor driver, partition 1, PROCESS_LOCAL,\r\n&gt; 5097 bytes) taskResourceAssignments Map() 23/07/05 11:18:02 INFO\r\n&gt; TaskSetManager: Starting task 2.0 in stage 0.0 (TID 2)\r\n&gt; (ip-172-31.ec2.internal, executor driver, partition 2, PROCESS_LOCAL,\r\n&gt; 5097 bytes) taskResourceAssignments Map() 23/07/05 11:18:02 INFO\r\n&gt; TaskSetManager: Starting task 3.0 in stage 0.0 (TID 3)\r\n&gt; (ip-172-31.ec2.internal, executor driver, partition 3, PROCESS_LOCAL,\r\n&gt; 5097 bytes) taskResourceAssignments Map() 23/07/05 11:18:02 INFO\r\n&gt; Executor: Running task 1.0 in stage 0.0 (TID 1) 23/07/05 11:18:02 INFO\r\n&gt; Executor: Running task 2.0 in stage 0.0 (TID 2) 23/07/05 11:18:02 INFO\r\n&gt; Executor: Running task 3.0 in stage 0.0 (TID 3) 23/07/05 11:18:02 INFO\r\n&gt; Executor: Running task 0.0 in stage 0.0 (TID 0) 23/07/05 11:18:02 INFO\r\n&gt; Executor: Finished task 2.0 in stage 0.0 (TID 2). 1496 bytes result\r\n&gt; sent to driver 23/07/05 11:18:02 INFO Executor: Finished task 3.0 in\r\n&gt; stage 0.0 (TID 3). 1496 bytes result sent to driver 23/07/05 11:18:02\r\n&gt; INFO Executor: Finished task 0.0 in stage 0.0 (TID 0). 1496 bytes\r\n&gt; result sent to driver 23/07/05 11:18:02 INFO TaskSetManager: Starting\r\n&gt; task 4.0 in stage 0.0 (TID 4) (ip-172-31.ec2.internal, executor\r\n&gt; driver, partition 4, PROCESS_LOCAL, 5097 bytes)\r\n&gt; taskResourceAssignments Map() 23/07/05 11:18:02 INFO Executor: Running\r\n&gt; task 4.0 in stage 0.0 (TID 4) 23/07/05 11:18:02 INFO Executor:\r\n&gt; Finished task 1.0 in stage 0.0 (TID 1). 1496 bytes result sent to\r\n&gt; driver 23/07/05 11:18:02 INFO Executor: Finished task 4.0 in stage 0.0\r\n&gt; (TID 4). 1496 bytes result sent to driver 23/07/05 11:18:02 INFO\r\n&gt; TaskSetManager: Starting task 5.0 in stage 0.0 (TID 5)\r\n&gt; (ip-172-31.ec2.internal, executor driver, partition 5, PROCESS_LOCAL,\r\n&gt; 5097 bytes) taskResourceAssignments Map() 23/07/05 11:18:02 INFO\r\n&gt; Executor: Running task 5.0 in stage 0.0 (TID 5) 23/07/05 11:18:02 INFO\r\n&gt; Executor: Finished task 5.0 in stage 0.0 (TID 5). 1496 bytes result\r\n&gt; sent to driver 23/07/05 11:18:02 INFO TaskSetManager: Starting task\r\n&gt; 6.0 in stage 0.0 (TID 6) (ip-172-31.ec2.internal, executor driver, partition 6, PROCESS_LOCAL, 5097 bytes) taskResourceAssignments Map()\r\n&gt; 23/07/05 11:18:02 INFO Executor: Running task 6.0 in stage 0.0 (TID 6)\r\n&gt; 23/07/05 11:18:02 INFO TaskSetManager: Starting task 7.0 in stage 0.0\r\n&gt; (TID 7) (ip-172-31.ec2.internal, executor driver, partition 7,\r\n&gt; PROCESS_LOCAL, 5097 bytes) taskResourceAssignments Map() 23/07/05\r\n&gt; 11:18:02 INFO Executor: Running task 7.0 in stage 0.0 (TID 7) 23/07/05\r\n&gt; 11:18:02 INFO TaskSetManager: Starting task 8.0 in stage 0.0 (TID 8)\r\n&gt; (ip-172-31.ec2.internal, executor driver, partition 8, PROCESS_LOCAL,\r\n&gt; 5097 bytes) taskResourceAssignments Map() 23/07/05 11:18:02 INFO\r\n&gt; Executor: Running task 8.0 in stage 0.0 (TID 8) 23/07/05 11:18:02 INFO\r\n&gt; TaskSetManager: Starting task 9.0 in stage 0.0 (TID 9)\r\n&gt; (ip-172-31.ec2.internal, executor driver, partition 9, PROCESS_LOCAL,\r\n&gt; 5097 bytes) taskResourceAssignments Map() 23/07/05 11:18:02 INFO\r\n&gt; Executor: Finished task 6.0 in stage 0.0 (TID 6). 1496 bytes result\r\n&gt; sent to driver 23/07/05 11:18:02 INFO Executor: Running task 9.0 in\r\n&gt; stage 0.0 (TID 9) 23/07/05 11:18:02 INFO TaskSetManager: Starting task\r\n&gt; 10.0 in stage 0.0 (TID 10) (ip-172-31.ec2.internal, executor driver, partition 10, PROCESS_LOCAL, 5097 bytes) taskResourceAssignments Map()\r\n&gt; 23/07/05 11:18:02 INFO Executor: Running task 10.0 in stage 0.0 (TID\r\n&gt; 10) 23/07/05 11:18:02 INFO TaskSetManager: Finished task 0.0 in stage\r\n&gt; 0.0 (TID 0) in 143 ms on ip-172-31.ec2.internal (executor driver) (1/52) 23/07/05 11:18:02 INFO TaskSetManager: Finished task 3.0 in\r\n&gt; stage 0.0 (TID 3) in 122 ms on ip-172-31.ec2.internal (executor\r\n&gt; driver) (2/52) 23/07/05 11:18:02 INFO TaskSetManager: Finished task\r\n&gt; 4.0 in stage 0.0 (TID 4) in 33 ms on ip-172-31.ec2.internal (executor driver) (3/52) 23/07/05 11:18:02 INFO Executor: Finished task 9.0 in\r\n&gt; stage 0.0 (TID 9). 1496 bytes result sent to driver 23/07/05 11:18:02\r\n&gt; INFO TaskSetManager: Finished task 5.0 in stage 0.0 (TID 5) in 25 ms\r\n&gt; on ip-172-31.ec2.internal (executor driver) (4/52) 23/07/05 11:18:02\r\n&gt; INFO TaskSetManager: Finished task 2.0 in stage 0.0 (TID 2) in 124 ms\r\n&gt; on ip-172-31.ec2.internal (executor driver) (5/52) 23/07/05 11:18:02\r\n&gt; INFO Executor: Finished task 10.0 in stage 0.0 (TID 10). 1496 bytes\r\n&gt; result sent to driver 23/07/05 11:18:02 INFO Executor: Finished task\r\n&gt; 8.0 in stage 0.0 (TID 8). 1496 bytes result sent to driver 23/07/05 11:18:02 INFO TaskSetManager: Finished task 1.0 in stage 0.0 (TID 1)\r\n&gt; in 140 ms on ip-172-31.ec2.internal (executor driver) (6/52) 23/07/05\r\n&gt; 11:18:02 INFO TaskSetManager: Starting task 11.0 in stage 0.0 (TID 11)\r\n&gt; (ip-172-31.ec2.internal, executor driver, partition 11, PROCESS_LOCAL,\r\n&gt; 5097 bytes) taskResourceAssignments Map() 23/07/05 11:18:02 INFO\r\n&gt; Executor: Running task 11.0 in stage 0.0 (TID 11) 23/07/05 11:18:02\r\n&gt; INFO Executor: Finished task 7.0 in stage 0.0 (TID 7). 1496 bytes\r\n&gt; result sent to driver 23/07/05 11:18:02 INFO TaskSetManager: Finished\r\n&gt; task 6.0 in stage 0.0 (TID 6) in 34 ms on ip-172-31.ec2.internal\r\n&gt; (executor driver) (7/52) 23/07/05 11:18:02 INFO Executor: Finished\r\n&gt; task 11.0 in stage 0.0 (TID 11). 1496 bytes result sent to driver\r\n&gt; 23/07/05 11:18:02 INFO TaskSetManager: Starting task 12.0 in stage 0.0\r\n&gt; (TID 12) (ip-172-31.ec2.internal, executor driver, partition 12,\r\n&gt; PROCESS_LOCAL, 5097 bytes) taskResourceAssignments Map() 23/07/05\r\n&gt; 11:18:02 INFO TaskSetManager: Finished task 9.0 in stage 0.0 (TID 9)\r\n&gt; in 30 ms on ip-172-31.ec2.internal (executor driver) (8/52) 23/07/05\r\n&gt; 11:18:02 INFO TaskSetManager: Finished task 10.0 in stage 0.0 (TID 10)\r\n&gt; in 29 ms on ip-172-31.ec2.internal (executor driver) (9/52) 23/07/05\r\n&gt; 11:18:02 INFO Executor: Running task 12.0 in stage 0.0 (TID 12)\r\n&gt; 23/07/05 11:18:02 INFO TaskSetManager: Starting task 13.0 in stage 0.0\r\n&gt; (TID 13) (ip-172-31.ec2.internal, executor driver, partition 13,\r\n&gt; PROCESS_LOCAL, 5097 bytes) taskResourceAssignments Map() 23/07/05\r\n&gt; 11:18:02 INFO Executor: Finished task 12.0 in stage 0.0 (TID 12). 1496\r\n&gt; bytes result sent to driver 23/07/05 11:18:02 INFO Executor: Running\r\n&gt; task 13.0 in stage 0.0 (TID 13) 23/07/05 11:18:02 INFO TaskSetManager:\r\n&gt; Finished task 8.0 in stage 0.0 (TID 8) in 39 ms on\r\n&gt; ip-172-31.ec2.internal (executor driver) (10/52) 23/07/05 11:18:02\r\n&gt; INFO TaskSetManager: Finished task 7.0 in stage 0.0 (TID 7) in 42 ms\r\n&gt; on ip-172-31.ec2.internal (executor driver) (11/52) 23/07/05 11:18:02\r\n&gt; INFO TaskSetManager: Starting task 14.0 in stage 0.0 (TID 14)\r\n&gt; (ip-172-31.ec2.internal, executor driver, partition 14, PROCESS_LOCAL,\r\n&gt; 5097 bytes) taskResourceAssignments Map() 23/07/05 11:18:02 INFO\r\n&gt; Executor: Finished task 13.0 in stage 0.0 (TID 13). 1496 bytes result\r\n&gt; sent to driver 23/07/05 11:18:02 INFO Executor: Running task 14.0 in\r\n&gt; stage 0.0 (TID 14) 23/07/05 11:18:02 INFO TaskSetManager: Starting\r\n&gt; task 15.0 in stage 0.0 (TID 15) (ip-172-31.ec2.internal, executor\r\n&gt; driver, partition 15, PROCESS_LOCAL, 5097 bytes)\r\n&gt; taskResourceAssignments Map() 23/07/05 11:18:02 INFO Executor: Running\r\n&gt; task 15.0 in stage 0.0 (TID 15) 23/07/05 11:18:02 INFO TaskSetManager:\r\n&gt; Finished task 11.0 in stage 0.0 (TID 11) in 21 ms on\r\n&gt; ip-172-31.ec2.internal (executor driver) (12/52) 23/07/05 11:18:02\r\n&gt; INFO Executor: Finished task 14.0 in stage 0.0 (TID 14). 1496 bytes\r\n&gt; result sent to driver 23/07/05 11:18:02 INFO Executor: Finished task\r\n&gt; 15.0 in stage 0.0 (TID 15). 1496 bytes result sent to driver 23/07/05 11:18:02 INFO TaskSetManager: Starting task 16.0 in stage 0.0 (TID 16)\r\n&gt; (ip-172-31.ec2.internal, executor driver, partition 16, PROCESS_LOCAL,\r\n&gt; 5097 bytes) taskResourceAssignments Map() 23/07/05 11:18:02 INFO\r\n&gt; TaskSetManager: Finished task 12.0 in stage 0.0 (TID 12) in 24 ms on\r\n&gt; ip-172-31.ec2.internal (executor driver) (13/52) 23/07/05 11:18:02\r\n&gt; INFO TaskSetManager: Finished task 13.0 in stage 0.0 (TID 13) in 18 ms\r\n&gt; on ip-172-31.ec2.internal (executor driver) (14/52) 23/07/05 11:18:02\r\n&gt; INFO Executor: Running task 16.0 in stage 0.0 (TID 16) 23/07/05\r\n&gt; 11:18:02 INFO TaskSetManager: Starting task 17.0 in stage 0.0 (TID 17)\r\n&gt; (ip-172-31.ec2.internal, executor driver, partition 17, PROCESS_LOCAL,\r\n&gt; 5097 bytes) taskResourceAssignments Map() 23/07/05 11:18:02 INFO\r\n&gt; Executor: Finished task 16.0 in stage 0.0 (TID 16). 1496 bytes result\r\n&gt; sent to driver 23/07/05 11:18:02 INFO TaskSetManager: Starting task\r\n&gt; 18.0 in stage 0.0 (TID 18) (ip-172-31.ec2.internal, executor driver, partition 18, PROCESS_LOCAL, 5097 bytes) taskResourceAssignments Map()\r\n&gt; 23/07/05 11:18:02 INFO Executor: Running task 18.0 in stage 0.0 (TID\r\n&gt; 18) 23/07/05 11:18:02 INFO TaskSetManager: Finished task 14.0 in stage\r\n&gt; 0.0 (TID 14) in 20 ms on ip-172-31.ec2.internal (executor driver) (15/52) 23/07/05 11:18:02 INFO Executor: Finished task 18.0 in stage\r\n&gt; 0.0 (TID 18). 1496 bytes result sent to driver 23/07/05 11:18:02 INFO TaskSetManager: Finished task 15.0 in stage 0.0 (TID 15) in 22 ms on\r\n&gt; ip-172-31.ec2.internal (executor driver) (16/52) 23/07/05 11:18:02\r\n&gt; INFO Executor: Running task 17.0 in stage 0.0 (TID 17) 23/07/05\r\n&gt; 11:18:02 INFO TaskSetManager: Starting task 19.0 in stage 0.0 (TID 19)\r\n&gt; (ip-172-31.ec2.internal, executor driver, partition 19, PROCESS_LOCAL,\r\n&gt; 5097 bytes) taskResourceAssignments Map() 23/07/05 11:18:02 INFO\r\n&gt; Executor: Running task 19.0 in stage 0.0 (TID 19) 23/07/05 11:18:02\r\n&gt; INFO TaskSetManager: Finished task 16.0 in stage 0.0 (TID 16) in 16 ms\r\n&gt; on ip-172-31.ec2.internal (executor driver) (17/52) 23/07/05 11:18:02\r\n&gt; INFO TaskSetManager: Starting task 20.0 in stage 0.0 (TID 20)\r\n&gt; (ip-172-31.ec2.internal, executor driver, partition 20, PROCESS_LOCAL,\r\n&gt; 5097 bytes) taskResourceAssignments Map() 23/07/05 11:18:02 INFO\r\n&gt; Executor: Running task 20.0 in stage 0.0 (TID 20) 23/07/05 11:18:02\r\n&gt; INFO TaskSetManager: Starting task 21.0 in stage 0.0 (TID 21)\r\n&gt; (ip-172-31.ec2.internal, executor driver, partition 21, PROCESS_LOCAL,\r\n&gt; 5097 bytes) taskResourceAssignments Map() 23/07/05 11:18:02 INFO\r\n&gt; Executor: Finished task 17.0 in stage 0.0 (TID 17). 1496 bytes result\r\n&gt; sent to driver 23/07/05 11:18:02 INFO Executor: Finished task 19.0 in\r\n&gt; stage 0.0 (TID 19). 1453 bytes result sent to driver 23/07/05 11:18:02\r\n&gt; INFO Executor: Running task 21.0 in stage 0.0 (TID 21) 23/07/05\r\n&gt; 11:18:02 INFO TaskSetManager: Starting task 22.0 in stage 0.0 (TID 22)\r\n&gt; (ip-172-31.ec2.internal, executor driver, partition 22, PROCESS_LOCAL,\r\n&gt; 5097 bytes) taskResourceAssignments Map() 23/07/05 11:18:02 INFO\r\n&gt; Executor: Running task 22.0 in stage 0.0 (TID 22) ```\r\n\r\n\r\nAny insight would be precious :)\r\nThanks a lot!\r\n\r\n\r\nI already was trying to add executors.instances and dynamicAllocation = true \r\nalso tried Dataset recordsDF.repartition(100) for example","title":"Executors not seem to be created or scaling up on Spark Application on AWS EMR Serverless","body":"<p>I would appreciate your help with my problem.</p>\n<p>I'm running a spark application on AWS EMR serverless with emr 6.11 release.\nI'm using Spark 3.3.2 with java 17, with configuration: maximum recourses of 200 vCPU and 1600gb memory.\nMy application is structured to read records from s3 and saving into a broadcast variable,\nThen have reading some other records from s3 and iterating over them with parallelize rdd\nand checking them against the first records, and saving them at last.\nTo simplify it is something like this :</p>\n<pre class=\"lang-java prettyprint-override\"><code>Dataset&lt;Row&gt; groupA = readAllRecords();\ngroupA = manipulateData(groupA);\nDataset&lt;Row&gt; groupB = readAllRecords();\n\ngroupB.parallelize( recordB -&gt; {\n   checkRecord(groupA, recordB) \n   saveRecord(record)      \n});\n</code></pre>\n<p>My problem is I don't see in any stage that spark is scaling up any executors,\nalthough I have heavy workloads.</p>\n<p>This is my dashboard :\n<a href=\"https://i.stack.imgur.com/EDuxU.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EDuxU.jpg\" alt=\"cloudwatch dashboard\" /></a>\nServer UI history while running local:\n<a href=\"https://i.stack.imgur.com/GL05a.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GL05a.jpg\" alt=\"Server UI history\" /></a></p>\n<p>Is it possible it is all running on the driver ?\nwhat it is i don't see ?</p>\n<p>Please let me know if more information is needed.\nI attached some of the log at start of the app.\nI noticed this error :</p>\n<p><code>Caused by: java.lang.NullPointerException: Cannot invoke &quot;org.apache.spark.storage.BlockManagerId.executorId()&quot; because &quot;idWithoutTopologyInfo&quot; is null</code></p>\n<p>but it is ignored and i'm not sure it's related.</p>\n<blockquote>\n<pre><code>3.3.2-amzn-0 23/07/05 11:17:44 INFO ResourceUtils: ============================================================== 23/07/05 11:17:44 INFO ResourceUtils: No custom resources configured\nfor spark.driver. 23/07/05 11:17:44 INFO ResourceUtils:\n============================================================== 23/07/05 11:17:44 INFO SparkContext: Submitted application: FusionApp\n23/07/05 11:17:44 INFO ResourceProfile: Default ResourceProfile\ncreated, executor resources: Map(cores -&gt; name: cores, amount: 4,\nscript: , vendor: , memory -&gt; name: memory, amount: 14336, script: ,\nvendor: , offHeap -&gt; name: offHeap, amount: 0, script: , vendor: ),\ntask resources: Map(cpus -&gt; name: cpus, amount: 1.0) 23/07/05 11:17:44\nINFO ResourceProfile: Limiting resource is cpus at 4 tasks per\nexecutor 23/07/05 11:17:44 INFO ResourceProfileManager: Added\nResourceProfile id: 0 23/07/05 11:17:44 INFO SecurityManager: Changing\nview acls to: hadoop 23/07/05 11:17:44 INFO SecurityManager: Changing\nmodify acls to: hadoop 23/07/05 11:17:44 INFO SecurityManager:\nChanging view acls groups to:  23/07/05 11:17:44 INFO SecurityManager:\nChanging modify acls groups to:  23/07/05 11:17:44 INFO\nSecurityManager: SecurityManager: authentication enabled; ui acls\ndisabled; users  with view permissions: Set(hadoop); groups with view\npermissions: Set(); users  with modify permissions: Set(hadoop);\ngroups with modify permissions: Set() 23/07/05 11:17:45 INFO Utils:\nSuccessfully started service 'sparkDriver' on port 41285. 23/07/05\n11:17:45 INFO SparkEnv: Registering MapOutputTracker 23/07/05 11:17:45\nINFO SparkEnv: Registering BlockManagerMaster 23/07/05 11:17:45 INFO\nBlockManagerMasterEndpoint: Using\norg.apache.spark.storage.DefaultTopologyMapper for getting topology\ninformation 23/07/05 11:17:45 INFO BlockManagerMasterEndpoint:\nBlockManagerMasterEndpoint up 23/07/05 11:17:45 INFO SparkEnv:\nRegistering BlockManagerMasterHeartbeat 23/07/05 11:17:45 INFO\nDiskBlockManager: Created local directory at\n/tmp/blockmgr-98a76adc-5862-4053-93a5-584fec796959 23/07/05 11:17:45\nINFO MemoryStore: MemoryStore started with capacity 8.2 GiB 23/07/05\n11:17:45 INFO SparkEnv: Registering OutputCommitCoordinator 23/07/05\n11:17:45 INFO SubResultCacheManager: Sub-result caches are disabled.\n23/07/05 11:17:45 INFO Utils: Successfully started service 'SparkUI'\non port 4040. 23/07/05 11:17:45 INFO SparkContext: Added JAR\ns3://jobjars/fusion/fusion-job-1.0.0--29114-SNAPSHOT-jar-with-dependencies.jar\nat\ns3://jobjars/fusion/fusion-job-1.0.0-29114-SNAPSHOT-jar-with-dependencies.jar\nwith timestamp 1688555864852 23/07/05 11:17:45 INFO Executor: Starting\nexecutor ID driver on host ip-172-31.ec2.internal 23/07/05 11:17:45\nINFO Executor: Starting executor with user classpath\n(userClassPathFirst = false):\n'file:/usr/lib/hadoop-lzo/lib/*,file:/usr/lib/hadoop/hadoop-aws.jar,file:/usr/share/aws/aws-java-sdk/*,file:/usr/share/aws/emr/emrfs/conf/,file:/usr/share/aws/emr/emrfs/lib/*,file:/usr/share/aws/emr/emrfs/auxlib/*,file:/usr/share/aws/emr/goodies/lib/emr-spark-goodies.jar,file:/usr/share/aws/emr/goodies/lib/emr-serverless-spark-goodies.jar,file:/usr/share/aws/emr/security/conf,file:/usr/share/aws/emr/security/lib/*,file:/usr/share/aws/hmclient/lib/aws-glue-datacatalog-spark-client.jar,file:/usr/share/java/Hive-JSON-Serde/hive-openx-serde.jar,file:/usr/share/aws/sagemaker-spark-sdk/lib/sagemaker-spark-sdk.jar,file:/usr/share/aws/emr/s3select/lib/emr-s3-select-spark-connector.jar,file:/docker/usr/lib/hadoop-lzo/lib/*,file:/docker/usr/lib/hadoop/hadoop-aws.jar,file:/docker/usr/share/aws/aws-java-sdk/*,file:/docker/usr/share/aws/emr/emrfs/conf,file:/docker/usr/share/aws/emr/emrfs/lib/*,file:/docker/usr/share/aws/emr/emrfs/auxlib/*,file:/docker/usr/share/aws/emr/goodies/lib/emr-spark-goodies.jar,file:/docker/usr/share/aws/emr/security/conf,file:/docker/usr/share/aws/emr/security/lib/*,file:/docker/usr/share/aws/hmclient/lib/aws-glue-datacatalog-spark-client.jar,file:/docker/usr/share/java/Hive-JSON-Serde/hive-openx-serde.jar,file:/docker/usr/share/aws/sagemaker-spark-sdk/lib/sagemaker-spark-sdk.jar,file:/docker/usr/share/aws/emr/s3select/lib/emr-s3-select-spark-connector.jar,file:/usr/share/aws/redshift/jdbc/RedshiftJDBC.jar,file:/usr/share/aws/redshift/spark-redshift/lib/*,file:/home/hadoop/conf,file:/home/hadoop/emr-serverless-spark-goodies.jar,file:/home/hadoop/emr-spark-goodies.jar,file:/home/hadoop/*,file:/home/hadoop/aws-glue-datacatalog-spark-client.jar,file:/home/hadoop/hive-openx-serde.jar,file:/home/hadoop/sagemaker-spark-sdk.jar,file:/home/hadoop/hadoop-aws.jar,file:/home/hadoop/RedshiftJDBC.jar,file:/home/hadoop/emr-s3-select-spark-connector.jar'\n23/07/05 11:17:45 INFO Executor: Fetching\ns3://jobjars-/fusion/yyyy-fusion-job-1.0.0--29114-SNAPSHOT-jar-with-dependencies.jar\nwith timestamp 1688555864852 23/07/05 11:17:45 INFO\nS3NativeFileSystem: Opening\n's3://jobjars-29114/fusion/xxx-fusion-job-1.0.0--29114-SNAPSHOT-jar-with-dependencies.jar'\nfor reading 23/07/05 11:17:45 INFO Utils: Fetching\ns3://jobjars-/fusion/fusion-job-1.0.0--29114-SNAPSHOT-jar-with-dependencies.jar\nto\n/tmp/spark-fd0b8589-fbd6-4b4a-b69f-98955f2f906f/userFiles-7edecef0-92cd-46c4-9ca8-bdabe9c64f86/fetchFileTemp15434886852656050499.tmp\n23/07/05 11:17:57 INFO Executor: Told to re-register on heartbeat\n23/07/05 11:17:57 INFO BlockManager: BlockManager null re-registering\nwith master 23/07/05 11:17:57 INFO BlockManagerMaster: Registering\nBlockManager null 23/07/05 11:17:57 WARN Executor: Issue communicating\nwith driver in heartbeater org.apache.spark.SparkException: Exception\nthrown in awaitResult:    at\norg.apache.spark.util.ThreadUtils$.awaitResult(ThreadUtils.scala:301)\n~[spark-core_2.12-3.3.2-amzn-0.jar:3.3.2-amzn-0]  at\norg.apache.spark.rpc.RpcTimeout.awaitResult(RpcTimeout.scala:75)\n~[spark-core_2.12-3.3.2-amzn-0.jar:3.3.2-amzn-0]  at\norg.apache.spark.rpc.RpcEndpointRef.askSync(RpcEndpointRef.scala:103)\n~[spark-core_2.12-3.3.2-amzn-0.jar:3.3.2-amzn-0]  at\norg.apache.spark.rpc.RpcEndpointRef.askSync(RpcEndpointRef.scala:87)\n~[spark-core_2.12-3.3.2-amzn-0.jar:3.3.2-amzn-0]  at\norg.apache.spark.storage.BlockManagerMaster.registerBlockManager(BlockManagerMaster.scala:89)\n~[spark-core_2.12-3.3.2-amzn-0.jar:3.3.2-amzn-0]  at\norg.apache.spark.storage.BlockManager.reregister(BlockManager.scala:643)\n~[spark-core_2.12-3.3.2-amzn-0.jar:3.3.2-amzn-0]  at\norg.apache.spark.executor.Executor.reportHeartBeat(Executor.scala:1057)\n~[spark-core_2.12-3.3.2-amzn-0.jar:3.3.2-amzn-0]  at\norg.apache.spark.executor.Executor.$anonfun$heartbeater$1(Executor.scala:238)\n~[spark-core_2.12-3.3.2-amzn-0.jar:3.3.2-amzn-0]  at\nscala.runtime.java8.JFunction0$mcV$sp.apply(JFunction0$mcV$sp.java:23)\n~[scala-library-2.12.15.jar:?]    at\norg.apache.spark.util.Utils$.logUncaughtExceptions(Utils.scala:2100)\n~[spark-core_2.12-3.3.2-amzn-0.jar:3.3.2-amzn-0]  at\norg.apache.spark.Heartbeater$$anon$1.run(Heartbeater.scala:46)\n~[spark-core_2.12-3.3.2-amzn-0.jar:3.3.2-amzn-0]  at\njava.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)\n~[?:?]    at\njava.util.concurrent.FutureTask.runAndReset(FutureTask.java:305)\n~[?:?]    at\njava.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305)\n~[?:?]    at\njava.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\n~[?:?]    at\njava.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n~[?:?]    at java.lang.Thread.run(Thread.java:833) ~[?:?] Caused by:\njava.lang.NullPointerException: Cannot invoke\n&quot;org.apache.spark.storage.BlockManagerId.executorId()&quot; because\n&quot;idWithoutTopologyInfo&quot; is null   at\norg.apache.spark.storage.BlockManagerMasterEndpoint.org$apache$spark$storage$BlockManagerMasterEndpoint$$register(BlockManagerMasterEndpoint.scala:591)\n~[spark-core_2.12-3.3.2-amzn-0.jar:3.3.2-amzn-0]  at\norg.apache.spark.storage.BlockManagerMasterEndpoint$$anonfun$receiveAndReply$1.applyOrElse(BlockManagerMasterEndpoint.scala:123)\n~[spark-core_2.12-3.3.2-amzn-0.jar:3.3.2-amzn-0]  at\norg.apache.spark.rpc.netty.Inbox.$anonfun$process$1(Inbox.scala:103)\n~[spark-core_2.12-3.3.2-amzn-0.jar:3.3.2-amzn-0]  at\norg.apache.spark.rpc.netty.Inbox.safelyCall(Inbox.scala:213)\n~[spark-core_2.12-3.3.2-amzn-0.jar:3.3.2-amzn-0]  at\norg.apache.spark.rpc.netty.Inbox.process(Inbox.scala:100)\n~[spark-core_2.12-3.3.2-amzn-0.jar:3.3.2-amzn-0]  at\norg.apache.spark.rpc.netty.MessageLoop.org$apache$spark$rpc$netty$MessageLoop$$receiveLoop(MessageLoop.scala:75)\n~[spark-core_2.12-3.3.2-amzn-0.jar:3.3.2-amzn-0]  at\norg.apache.spark.rpc.netty.MessageLoop$$anon$1.run(MessageLoop.scala:41)\n~[spark-core_2.12-3.3.2-amzn-0.jar:3.3.2-amzn-0]  at\njava.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)\n~[?:?]    at java.util.concurrent.FutureTask.run(FutureTask.java:264)\n~[?:?] 3 more 23/07/05 11:17:57 ERROR Inbox: Ignoring error\njava.lang.NullPointerException: Cannot invoke\n&quot;org.apache.spark.storage.BlockManagerId.executorId()&quot; because\n&quot;idWithoutTopologyInfo&quot; is null   at\norg.apache.spark.storage.BlockManagerMasterEndpoint.org$apache$spark$storage$BlockManagerMasterEndpoint$$register(BlockManagerMasterEndpoint.scala:591)\n~[spark-core_2.12-3.3.2-amzn-0.jar:3.3.2-amzn-0]  at\norg.apache.spark.storage.BlockManagerMasterEndpoint$$anonfun$receiveAndReply$1.applyOrElse(BlockManagerMasterEndpoint.scala:123)\n~[spark-core_2.12-3.3.2-amzn-0.jar:3.3.2-amzn-0]  at\norg.apache.spark.rpc.netty.Inbox.$anonfun$process$1(Inbox.scala:103)\n~[spark-core_2.12-3.3.2-amzn-0.jar:3.3.2-amzn-0]  at\norg.apache.spark.rpc.netty.Inbox.safelyCall(Inbox.scala:213)\n~[spark-core_2.12-3.3.2-amzn-0.jar:3.3.2-amzn-0]  at\norg.apache.spark.rpc.netty.Inbox.process(Inbox.scala:100)\n~[spark-core_2.12-3.3.2-amzn-0.jar:3.3.2-amzn-0]  at\norg.apache.spark.rpc.netty.MessageLoop.org$apache$spark$rpc$netty$MessageLoop$$receiveLoop(MessageLoop.scala:75)\n~[spark-core_2.12-3.3.2-amzn-0.jar:3.3.2-amzn-0]  at\norg.apache.spark.rpc.netty.MessageLoop$$anon$1.run(MessageLoop.scala:41)\n~[spark-core_2.12-3.3.2-amzn-0.jar:3.3.2-amzn-0]  at\njava.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)\n~[?:?]    at java.util.concurrent.FutureTask.run(FutureTask.java:264)\n~[?:?]    at\njava.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\n~[?:?]    at\njava.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n~[?:?]    at java.lang.Thread.run(Thread.java:833) ~[?:?] 23/07/05\n11:18:00 INFO Executor: Adding\nfile:/tmp/spark-fd0b8589-fbd6-4b4a-b69f-98955f2f906f/userFiles-92cd-46c4-9ca8-/fusion-job-1.0.0-29114-SNAPSHOT-jar-with-dependencies.jar\nto class loader 23/07/05 11:18:00 INFO Utils: Successfully started\nservice 'org.apache.spark.network.netty.NettyBlockTransferService' on\nport 35657. 23/07/05 11:18:00 INFO NettyBlockTransferService: Server\ncreated on [2600:1f18:6a92:2601:18f2:3af:f80f:4dab]:35657 23/07/05\n11:18:00 INFO BlockManager: Using\norg.apache.spark.storage.RandomBlockReplicationPolicy for block\nreplication policy 23/07/05 11:18:00 INFO BlockManagerMaster:\nRegistering BlockManager BlockManagerId(driver,\n[2600:1f18:6a92:2601:18f2:3af:f80f:4dab], 35657, None) 23/07/05\n11:18:00 INFO BlockManagerMasterEndpoint: Registering block manager\n[2600:1f18:6a92:2601:18f2:3af:f80f:4dab]:35657 with 8.2 GiB RAM,\nBlockManagerId(driver, [2600:1f18:6a92:2601:18f2:3af:f80f:4dab],\n35657, None) 23/07/05 11:18:00 INFO BlockManagerMaster: Registered\nBlockManager BlockManagerId(driver,\n[2600:1f18:6a92:2601:18f2:3af:f80f:4dab], 35657, None) 23/07/05\n11:18:00 INFO BlockManager: Initialized BlockManager:\nBlockManagerId(driver, [2600:1f18:6a92:2601:18f2:3af:f80f:4dab],\n35657, None) 23/07/05 11:18:00 INFO SingleEventLogFileWriter: Logging\nevents to file:/var/log/spark/apps/local-1688555865619.inprogress\n23/07/05 11:18:00 INFO SharedState: Setting\nhive.metastore.warehouse.dir ('null') to the value of\nspark.sql.warehouse.dir. 23/07/05 11:18:00 INFO SharedState: Warehouse\npath is 'file:/home/hadoop/spark-warehouse'. 23/07/05 11:18:01 INFO\nMemoryStore: Block broadcast_0 stored as values in memory (estimated\nsize 72.0 B, free 8.2 GiB) 23/07/05 11:18:01 INFO MemoryStore: Block\nbroadcast_0_piece0 stored as bytes in memory (estimated size 124.0 B,\nfree 8.2 GiB) 23/07/05 11:18:01 INFO BlockManagerInfo: Added\nbroadcast_0_piece0 in memory on\n[2600:1f18:6a92:2601:18f2:3af:f80f:4dab]:35657 (size: 124.0 B, free:\n8.2 GiB) 23/07/05 11:18:01 INFO SparkContext: Created broadcast 0 from broadcast at Transformer.java:76 23/07/05 11:18:01 INFO MemoryStore:\nBlock broadcast_1 stored as values in memory (estimated size 168.0 B,\nfree 8.2 GiB) 23/07/05 11:18:01 INFO MemoryStore: Block\nbroadcast_1_piece0 stored as bytes in memory (estimated size 304.0 B,\nfree 8.2 GiB) 23/07/05 11:18:01 INFO BlockManagerInfo: Added\nbroadcast_1_piece0 in memory on\n[2600:1f18:6a92:2601:18f2:3af:f80f:4dab]:35657 (size: 304.0 B, free:\n8.2 GiB) 23/07/05 11:18:01 INFO SparkContext: Created broadcast 1 from broadcast at Transformer.java:80 23/07/05 11:18:02 INFO SparkContext:\nStarting job: collect at Transformer.java:123 23/07/05 11:18:02 INFO\nDAGScheduler: Got job 0 (collect at Transformer.java:123) with 52\noutput partitions 23/07/05 11:18:02 INFO DAGScheduler: Final stage:\nResultStage 0 (collect at Transformer.java:123) 23/07/05 11:18:02 INFO\nDAGScheduler: Parents of final stage: List() 23/07/05 11:18:02 INFO\nDAGScheduler: Missing parents: List() 23/07/05 11:18:02 INFO\nDAGScheduler: Submitting ResultStage 0 (ParallelCollectionRDD[0] at\nparallelize at Transformer.java:122), which has no missing parents\n23/07/05 11:18:02 INFO MemoryStore: Block broadcast_2 stored as values\nin memory (estimated size 3.2 KiB, free 8.2 GiB) 23/07/05 11:18:02\nINFO MemoryStore: Block broadcast_2_piece0 stored as bytes in memory\n(estimated size 1899.0 B, free 8.2 GiB) 23/07/05 11:18:02 INFO\nBlockManagerInfo: Added broadcast_2_piece0 in memory on\n[2600:1f18:6a92:2601:18f2:3af:f80f:4dab]:35657 (size: 1899.0 B, free:\n8.2 GiB) 23/07/05 11:18:02 INFO SparkContext: Created broadcast 2 from broadcast at DAGScheduler.scala:1570 23/07/05 11:18:02 INFO\nDAGScheduler: Submitting 52 missing tasks from ResultStage 0\n(ParallelCollectionRDD[0] at parallelize at Transformer.java:122)\n(first 15 tasks are for partitions Vector(0, 1, 2, 3, 4, 5, 6, 7, 8,\n9, 10, 11, 12, 13, 14)) 23/07/05 11:18:02 INFO TaskSchedulerImpl:\nAdding task set 0.0 with 52 tasks resource profile 0 23/07/05 11:18:02\nINFO TaskSetManager: Starting task 0.0 in stage 0.0 (TID 0)\n(ip-172-31.ec2.internal, executor driver, partition 0, PROCESS_LOCAL,\n5097 bytes) taskResourceAssignments Map() 23/07/05 11:18:02 INFO\nTaskSetManager: Starting task 1.0 in stage 0.0 (TID 1)\n(ip-172-31.ec2.internal, executor driver, partition 1, PROCESS_LOCAL,\n5097 bytes) taskResourceAssignments Map() 23/07/05 11:18:02 INFO\nTaskSetManager: Starting task 2.0 in stage 0.0 (TID 2)\n(ip-172-31.ec2.internal, executor driver, partition 2, PROCESS_LOCAL,\n5097 bytes) taskResourceAssignments Map() 23/07/05 11:18:02 INFO\nTaskSetManager: Starting task 3.0 in stage 0.0 (TID 3)\n(ip-172-31.ec2.internal, executor driver, partition 3, PROCESS_LOCAL,\n5097 bytes) taskResourceAssignments Map() 23/07/05 11:18:02 INFO\nExecutor: Running task 1.0 in stage 0.0 (TID 1) 23/07/05 11:18:02 INFO\nExecutor: Running task 2.0 in stage 0.0 (TID 2) 23/07/05 11:18:02 INFO\nExecutor: Running task 3.0 in stage 0.0 (TID 3) 23/07/05 11:18:02 INFO\nExecutor: Running task 0.0 in stage 0.0 (TID 0) 23/07/05 11:18:02 INFO\nExecutor: Finished task 2.0 in stage 0.0 (TID 2). 1496 bytes result\nsent to driver 23/07/05 11:18:02 INFO Executor: Finished task 3.0 in\nstage 0.0 (TID 3). 1496 bytes result sent to driver 23/07/05 11:18:02\nINFO Executor: Finished task 0.0 in stage 0.0 (TID 0). 1496 bytes\nresult sent to driver 23/07/05 11:18:02 INFO TaskSetManager: Starting\ntask 4.0 in stage 0.0 (TID 4) (ip-172-31.ec2.internal, executor\ndriver, partition 4, PROCESS_LOCAL, 5097 bytes)\ntaskResourceAssignments Map() 23/07/05 11:18:02 INFO Executor: Running\ntask 4.0 in stage 0.0 (TID 4) 23/07/05 11:18:02 INFO Executor:\nFinished task 1.0 in stage 0.0 (TID 1). 1496 bytes result sent to\ndriver 23/07/05 11:18:02 INFO Executor: Finished task 4.0 in stage 0.0\n(TID 4). 1496 bytes result sent to driver 23/07/05 11:18:02 INFO\nTaskSetManager: Starting task 5.0 in stage 0.0 (TID 5)\n(ip-172-31.ec2.internal, executor driver, partition 5, PROCESS_LOCAL,\n5097 bytes) taskResourceAssignments Map() 23/07/05 11:18:02 INFO\nExecutor: Running task 5.0 in stage 0.0 (TID 5) 23/07/05 11:18:02 INFO\nExecutor: Finished task 5.0 in stage 0.0 (TID 5). 1496 bytes result\nsent to driver 23/07/05 11:18:02 INFO TaskSetManager: Starting task\n6.0 in stage 0.0 (TID 6) (ip-172-31.ec2.internal, executor driver, partition 6, PROCESS_LOCAL, 5097 bytes) taskResourceAssignments Map()\n23/07/05 11:18:02 INFO Executor: Running task 6.0 in stage 0.0 (TID 6)\n23/07/05 11:18:02 INFO TaskSetManager: Starting task 7.0 in stage 0.0\n(TID 7) (ip-172-31.ec2.internal, executor driver, partition 7,\nPROCESS_LOCAL, 5097 bytes) taskResourceAssignments Map() 23/07/05\n11:18:02 INFO Executor: Running task 7.0 in stage 0.0 (TID 7) 23/07/05\n11:18:02 INFO TaskSetManager: Starting task 8.0 in stage 0.0 (TID 8)\n(ip-172-31.ec2.internal, executor driver, partition 8, PROCESS_LOCAL,\n5097 bytes) taskResourceAssignments Map() 23/07/05 11:18:02 INFO\nExecutor: Running task 8.0 in stage 0.0 (TID 8) 23/07/05 11:18:02 INFO\nTaskSetManager: Starting task 9.0 in stage 0.0 (TID 9)\n(ip-172-31.ec2.internal, executor driver, partition 9, PROCESS_LOCAL,\n5097 bytes) taskResourceAssignments Map() 23/07/05 11:18:02 INFO\nExecutor: Finished task 6.0 in stage 0.0 (TID 6). 1496 bytes result\nsent to driver 23/07/05 11:18:02 INFO Executor: Running task 9.0 in\nstage 0.0 (TID 9) 23/07/05 11:18:02 INFO TaskSetManager: Starting task\n10.0 in stage 0.0 (TID 10) (ip-172-31.ec2.internal, executor driver, partition 10, PROCESS_LOCAL, 5097 bytes) taskResourceAssignments Map()\n23/07/05 11:18:02 INFO Executor: Running task 10.0 in stage 0.0 (TID\n10) 23/07/05 11:18:02 INFO TaskSetManager: Finished task 0.0 in stage\n0.0 (TID 0) in 143 ms on ip-172-31.ec2.internal (executor driver) (1/52) 23/07/05 11:18:02 INFO TaskSetManager: Finished task 3.0 in\nstage 0.0 (TID 3) in 122 ms on ip-172-31.ec2.internal (executor\ndriver) (2/52) 23/07/05 11:18:02 INFO TaskSetManager: Finished task\n4.0 in stage 0.0 (TID 4) in 33 ms on ip-172-31.ec2.internal (executor driver) (3/52) 23/07/05 11:18:02 INFO Executor: Finished task 9.0 in\nstage 0.0 (TID 9). 1496 bytes result sent to driver 23/07/05 11:18:02\nINFO TaskSetManager: Finished task 5.0 in stage 0.0 (TID 5) in 25 ms\non ip-172-31.ec2.internal (executor driver) (4/52) 23/07/05 11:18:02\nINFO TaskSetManager: Finished task 2.0 in stage 0.0 (TID 2) in 124 ms\non ip-172-31.ec2.internal (executor driver) (5/52) 23/07/05 11:18:02\nINFO Executor: Finished task 10.0 in stage 0.0 (TID 10). 1496 bytes\nresult sent to driver 23/07/05 11:18:02 INFO Executor: Finished task\n8.0 in stage 0.0 (TID 8). 1496 bytes result sent to driver 23/07/05 11:18:02 INFO TaskSetManager: Finished task 1.0 in stage 0.0 (TID 1)\nin 140 ms on ip-172-31.ec2.internal (executor driver) (6/52) 23/07/05\n11:18:02 INFO TaskSetManager: Starting task 11.0 in stage 0.0 (TID 11)\n(ip-172-31.ec2.internal, executor driver, partition 11, PROCESS_LOCAL,\n5097 bytes) taskResourceAssignments Map() 23/07/05 11:18:02 INFO\nExecutor: Running task 11.0 in stage 0.0 (TID 11) 23/07/05 11:18:02\nINFO Executor: Finished task 7.0 in stage 0.0 (TID 7). 1496 bytes\nresult sent to driver 23/07/05 11:18:02 INFO TaskSetManager: Finished\ntask 6.0 in stage 0.0 (TID 6) in 34 ms on ip-172-31.ec2.internal\n(executor driver) (7/52) 23/07/05 11:18:02 INFO Executor: Finished\ntask 11.0 in stage 0.0 (TID 11). 1496 bytes result sent to driver\n23/07/05 11:18:02 INFO TaskSetManager: Starting task 12.0 in stage 0.0\n(TID 12) (ip-172-31.ec2.internal, executor driver, partition 12,\nPROCESS_LOCAL, 5097 bytes) taskResourceAssignments Map() 23/07/05\n11:18:02 INFO TaskSetManager: Finished task 9.0 in stage 0.0 (TID 9)\nin 30 ms on ip-172-31.ec2.internal (executor driver) (8/52) 23/07/05\n11:18:02 INFO TaskSetManager: Finished task 10.0 in stage 0.0 (TID 10)\nin 29 ms on ip-172-31.ec2.internal (executor driver) (9/52) 23/07/05\n11:18:02 INFO Executor: Running task 12.0 in stage 0.0 (TID 12)\n23/07/05 11:18:02 INFO TaskSetManager: Starting task 13.0 in stage 0.0\n(TID 13) (ip-172-31.ec2.internal, executor driver, partition 13,\nPROCESS_LOCAL, 5097 bytes) taskResourceAssignments Map() 23/07/05\n11:18:02 INFO Executor: Finished task 12.0 in stage 0.0 (TID 12). 1496\nbytes result sent to driver 23/07/05 11:18:02 INFO Executor: Running\ntask 13.0 in stage 0.0 (TID 13) 23/07/05 11:18:02 INFO TaskSetManager:\nFinished task 8.0 in stage 0.0 (TID 8) in 39 ms on\nip-172-31.ec2.internal (executor driver) (10/52) 23/07/05 11:18:02\nINFO TaskSetManager: Finished task 7.0 in stage 0.0 (TID 7) in 42 ms\non ip-172-31.ec2.internal (executor driver) (11/52) 23/07/05 11:18:02\nINFO TaskSetManager: Starting task 14.0 in stage 0.0 (TID 14)\n(ip-172-31.ec2.internal, executor driver, partition 14, PROCESS_LOCAL,\n5097 bytes) taskResourceAssignments Map() 23/07/05 11:18:02 INFO\nExecutor: Finished task 13.0 in stage 0.0 (TID 13). 1496 bytes result\nsent to driver 23/07/05 11:18:02 INFO Executor: Running task 14.0 in\nstage 0.0 (TID 14) 23/07/05 11:18:02 INFO TaskSetManager: Starting\ntask 15.0 in stage 0.0 (TID 15) (ip-172-31.ec2.internal, executor\ndriver, partition 15, PROCESS_LOCAL, 5097 bytes)\ntaskResourceAssignments Map() 23/07/05 11:18:02 INFO Executor: Running\ntask 15.0 in stage 0.0 (TID 15) 23/07/05 11:18:02 INFO TaskSetManager:\nFinished task 11.0 in stage 0.0 (TID 11) in 21 ms on\nip-172-31.ec2.internal (executor driver) (12/52) 23/07/05 11:18:02\nINFO Executor: Finished task 14.0 in stage 0.0 (TID 14). 1496 bytes\nresult sent to driver 23/07/05 11:18:02 INFO Executor: Finished task\n15.0 in stage 0.0 (TID 15). 1496 bytes result sent to driver 23/07/05 11:18:02 INFO TaskSetManager: Starting task 16.0 in stage 0.0 (TID 16)\n(ip-172-31.ec2.internal, executor driver, partition 16, PROCESS_LOCAL,\n5097 bytes) taskResourceAssignments Map() 23/07/05 11:18:02 INFO\nTaskSetManager: Finished task 12.0 in stage 0.0 (TID 12) in 24 ms on\nip-172-31.ec2.internal (executor driver) (13/52) 23/07/05 11:18:02\nINFO TaskSetManager: Finished task 13.0 in stage 0.0 (TID 13) in 18 ms\non ip-172-31.ec2.internal (executor driver) (14/52) 23/07/05 11:18:02\nINFO Executor: Running task 16.0 in stage 0.0 (TID 16) 23/07/05\n11:18:02 INFO TaskSetManager: Starting task 17.0 in stage 0.0 (TID 17)\n(ip-172-31.ec2.internal, executor driver, partition 17, PROCESS_LOCAL,\n5097 bytes) taskResourceAssignments Map() 23/07/05 11:18:02 INFO\nExecutor: Finished task 16.0 in stage 0.0 (TID 16). 1496 bytes result\nsent to driver 23/07/05 11:18:02 INFO TaskSetManager: Starting task\n18.0 in stage 0.0 (TID 18) (ip-172-31.ec2.internal, executor driver, partition 18, PROCESS_LOCAL, 5097 bytes) taskResourceAssignments Map()\n23/07/05 11:18:02 INFO Executor: Running task 18.0 in stage 0.0 (TID\n18) 23/07/05 11:18:02 INFO TaskSetManager: Finished task 14.0 in stage\n0.0 (TID 14) in 20 ms on ip-172-31.ec2.internal (executor driver) (15/52) 23/07/05 11:18:02 INFO Executor: Finished task 18.0 in stage\n0.0 (TID 18). 1496 bytes result sent to driver 23/07/05 11:18:02 INFO TaskSetManager: Finished task 15.0 in stage 0.0 (TID 15) in 22 ms on\nip-172-31.ec2.internal (executor driver) (16/52) 23/07/05 11:18:02\nINFO Executor: Running task 17.0 in stage 0.0 (TID 17) 23/07/05\n11:18:02 INFO TaskSetManager: Starting task 19.0 in stage 0.0 (TID 19)\n(ip-172-31.ec2.internal, executor driver, partition 19, PROCESS_LOCAL,\n5097 bytes) taskResourceAssignments Map() 23/07/05 11:18:02 INFO\nExecutor: Running task 19.0 in stage 0.0 (TID 19) 23/07/05 11:18:02\nINFO TaskSetManager: Finished task 16.0 in stage 0.0 (TID 16) in 16 ms\non ip-172-31.ec2.internal (executor driver) (17/52) 23/07/05 11:18:02\nINFO TaskSetManager: Starting task 20.0 in stage 0.0 (TID 20)\n(ip-172-31.ec2.internal, executor driver, partition 20, PROCESS_LOCAL,\n5097 bytes) taskResourceAssignments Map() 23/07/05 11:18:02 INFO\nExecutor: Running task 20.0 in stage 0.0 (TID 20) 23/07/05 11:18:02\nINFO TaskSetManager: Starting task 21.0 in stage 0.0 (TID 21)\n(ip-172-31.ec2.internal, executor driver, partition 21, PROCESS_LOCAL,\n5097 bytes) taskResourceAssignments Map() 23/07/05 11:18:02 INFO\nExecutor: Finished task 17.0 in stage 0.0 (TID 17). 1496 bytes result\nsent to driver 23/07/05 11:18:02 INFO Executor: Finished task 19.0 in\nstage 0.0 (TID 19). 1453 bytes result sent to driver 23/07/05 11:18:02\nINFO Executor: Running task 21.0 in stage 0.0 (TID 21) 23/07/05\n11:18:02 INFO TaskSetManager: Starting task 22.0 in stage 0.0 (TID 22)\n(ip-172-31.ec2.internal, executor driver, partition 22, PROCESS_LOCAL,\n5097 bytes) taskResourceAssignments Map() 23/07/05 11:18:02 INFO\nExecutor: Running task 22.0 in stage 0.0 (TID 22) ```\n</code></pre>\n</blockquote>\n<p>Any insight would be precious :)\nThanks a lot!</p>\n<p>I already was trying to add executors.instances and dynamicAllocation = true\nalso tried Dataset recordsDF.repartition(100) for example</p>\n"},{"tags":["java","android","maven"],"comments":[{"owner":{"account_id":6082188,"reputation":17560,"user_id":4747587,"accept_rate":64,"display_name":"Henry"},"score":0,"creation_date":1510817678,"post_id":47323909,"comment_id":81598559,"body_markdown":"Do you have a valid internet connection? In your android studio preferences -&gt; Build, Execution -&gt; Gradle, is the &quot;Offline Work&quot; turned off?","body":"Do you have a valid internet connection? In your android studio preferences -&gt; Build, Execution -&gt; Gradle, is the &quot;Offline Work&quot; turned off?"},{"owner":{"account_id":5237756,"reputation":2929,"user_id":4185813,"accept_rate":58,"display_name":"Ajay Kulkarni"},"score":0,"creation_date":1510818057,"post_id":47323909,"comment_id":81598747,"body_markdown":"Yes, `Offline Work` is turned off...","body":"Yes, <code>Offline Work</code> is turned off..."},{"owner":{"account_id":6082188,"reputation":17560,"user_id":4747587,"accept_rate":64,"display_name":"Henry"},"score":0,"creation_date":1510881866,"post_id":47323909,"comment_id":81635910,"body_markdown":"Are you behind a Firewall? Are you able to download this file `https://dl.google.com/dl/android/maven2/com/android/support/appcompat-v7/26.1.0/appcompat-v7-26.1.0.pom` on the browser?","body":"Are you behind a Firewall? Are you able to download this file <code>https:&#47;&#47;dl.google.com&#47;dl&#47;android&#47;maven2&#47;com&#47;android&#47;support&#47;&zwnj;&#8203;appcompat-v7&#47;26.1.0&#47;&zwnj;&#8203;appcompat-v7-26.1.0.&zwnj;&#8203;pom</code> on the browser?"},{"owner":{"account_id":5237756,"reputation":2929,"user_id":4185813,"accept_rate":58,"display_name":"Ajay Kulkarni"},"score":0,"creation_date":1510901387,"post_id":47323909,"comment_id":81641400,"body_markdown":"No, it returns a `404` error in browser.","body":"No, it returns a <code>404</code> error in browser."},{"owner":{"account_id":6322747,"reputation":1995,"user_id":4910154,"accept_rate":72,"display_name":"Farzad"},"score":0,"creation_date":1510973038,"post_id":47323909,"comment_id":81676862,"body_markdown":"i have this error. fix it? help me","body":"i have this error. fix it? help me"},{"owner":{"account_id":9457882,"reputation":461,"user_id":7032579,"display_name":"Jek"},"score":0,"creation_date":1631213831,"post_id":47323909,"comment_id":122174003,"body_markdown":"I just opened the link in my browser, after that it worked without errors","body":"I just opened the link in my browser, after that it worked without errors"}],"answers":[{"tags":[],"owner":{"account_id":11984859,"reputation":73,"user_id":8769618,"display_name":"AndyJJ"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1510817779,"creation_date":1510817779,"answer_id":47324028,"question_id":47323909,"body_markdown":"try replace with\r\n\r\n    repositories {\r\n        maven { url &#39;http://repo1.maven.org/maven2&#39; }\r\n    }","title":"How to resolve repository certificate error in Gradle build","body":"<p>try replace with</p>\n\n<pre><code>repositories {\n    maven { url 'http://repo1.maven.org/maven2' }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9094295,"reputation":1988,"user_id":6768769,"accept_rate":40,"display_name":"Dileep Patel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1510831752,"creation_date":1510821815,"answer_id":47325101,"question_id":47323909,"body_markdown":"Modify in project level gradle according below\r\n\r\n    // Top-level build file where you can add configuration options common to all sub-projects/modules.\r\n\r\n    buildscript {\r\n    \r\n    repositories {\r\n        google()\r\n        jcenter()\r\n    }\r\n    \r\n    dependencies {\r\n        classpath &#39;com.android.tools.build:gradle:3.0.0&#39;\r\n        \r\n\r\n        // NOTE: Do not place your application dependencies here; they belong\r\n        // in the individual module build.gradle files\r\n        }\r\n     }\r\n\r\n    allprojects {\r\n         repositories {\r\n          google()\r\n          jcenter()\r\n       }\r\n     }\r\n\r\n     task clean(type: Delete) {\r\n      delete rootProject.buildDir\r\n    }\r\n\r\n\r\nThen, remove appcompat-v7:26.1.0 dependency from app level gradle then next \r\nGo to Android Studio File &gt; Project Structure &gt; app &gt;Dependencies &gt; tap on + &gt; Library Dependencies &gt; add dependenceis as per your requirements then OK.\r\n\r\nAlso you can try to tap on synchronize project with gradle file\r\n\r\n[![synchronize with gradle file][1]][1]\r\n\r\nFor more please go for below link\r\n\r\nhttps://developer.android.com/studio/build/gradle-plugin-3-0-0.html\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/vWG1i.png\r\n\r\n**Edited**\r\n\r\nI think your problem is different so please go with below links,\r\n\r\nhttps://stackoverflow.com/questions/21076179/pkix-path-building-failed-and-unable-to-find-valid-certification-path-to-requ\r\n\r\nhttps://stackoverflow.com/questions/9619030/resolving-javax-net-ssl-sslhandshakeexception-sun-security-validator-validatore\r\n\r\nhttps://github.com/appscode-ci/cibox/issues/16\r\n\r\nhttps://www.mkyong.com/webservices/jax-ws/suncertpathbuilderexception-unable-to-find-valid-certification-path-to-requested-target/","title":"How to resolve repository certificate error in Gradle build","body":"<p>Modify in project level gradle according below</p>\n\n<pre><code>// Top-level build file where you can add configuration options common to all sub-projects/modules.\n\nbuildscript {\n\nrepositories {\n    google()\n    jcenter()\n}\n\ndependencies {\n    classpath 'com.android.tools.build:gradle:3.0.0'\n\n\n    // NOTE: Do not place your application dependencies here; they belong\n    // in the individual module build.gradle files\n    }\n }\n\nallprojects {\n     repositories {\n      google()\n      jcenter()\n   }\n }\n\n task clean(type: Delete) {\n  delete rootProject.buildDir\n}\n</code></pre>\n\n<p>Then, remove appcompat-v7:26.1.0 dependency from app level gradle then next \nGo to Android Studio File > Project Structure > app >Dependencies > tap on + > Library Dependencies > add dependenceis as per your requirements then OK.</p>\n\n<p>Also you can try to tap on synchronize project with gradle file</p>\n\n<p><a href=\"https://i.stack.imgur.com/vWG1i.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vWG1i.png\" alt=\"synchronize with gradle file\"></a></p>\n\n<p>For more please go for below link</p>\n\n<p><a href=\"https://developer.android.com/studio/build/gradle-plugin-3-0-0.html\" rel=\"nofollow noreferrer\">https://developer.android.com/studio/build/gradle-plugin-3-0-0.html</a></p>\n\n<p><strong>Edited</strong></p>\n\n<p>I think your problem is different so please go with below links,</p>\n\n<p><a href=\"https://stackoverflow.com/questions/21076179/pkix-path-building-failed-and-unable-to-find-valid-certification-path-to-requ\">&quot;PKIX path building failed&quot; and &quot;unable to find valid certification path to requested target&quot;</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/9619030/resolving-javax-net-ssl-sslhandshakeexception-sun-security-validator-validatore\">Resolving javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed Error?</a></p>\n\n<p><a href=\"https://github.com/appscode-ci/cibox/issues/16\" rel=\"nofollow noreferrer\">https://github.com/appscode-ci/cibox/issues/16</a></p>\n\n<p><a href=\"https://www.mkyong.com/webservices/jax-ws/suncertpathbuilderexception-unable-to-find-valid-certification-path-to-requested-target/\" rel=\"nofollow noreferrer\">https://www.mkyong.com/webservices/jax-ws/suncertpathbuilderexception-unable-to-find-valid-certification-path-to-requested-target/</a></p>\n"},{"tags":[],"owner":{"account_id":12375880,"reputation":211,"user_id":9023744,"display_name":"towa"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1511952022,"creation_date":1511932704,"answer_id":47545556,"question_id":47323909,"body_markdown":"Below steps may help:\r\n\r\n**1. Add certificate to keystore-** \r\n\r\nImport some certifications into Android Studio JDK cacerts from Android Studio’s cacerts.\r\n\r\nAndroid Studio’s cacerts may be located in\r\n\r\n    {your-home-directory}/.AndroidStudio3.0/system/tasks/cacerts\r\n\r\nI used the following import command.\r\n\r\n    $ keytool -importkeystore -v -srckeystore {src cacerts} -destkeystore {dest cacerts}\r\n\r\n **2. Add modified cacert path to gradle.properties-**\r\n\r\n    systemProp.javax.net.ssl.trustStore={your-android-studio-directory}\\\\jre\\\\jre\\\\lib\\\\security\\\\cacerts\r\n    systemProp.javax.net.ssl.trustStorePassword=changeit\r\n\r\nRef : [https://www.cresco.co.jp/blog/entry/2014/][1]/\r\n\r\n\r\n  [1]: https://www.cresco.co.jp/blog/entry/2014/","title":"How to resolve repository certificate error in Gradle build","body":"<p>Below steps may help:</p>\n\n<p><strong>1. Add certificate to keystore-</strong> </p>\n\n<p>Import some certifications into Android Studio JDK cacerts from Android Studio’s cacerts.</p>\n\n<p>Android Studio’s cacerts may be located in</p>\n\n<pre><code>{your-home-directory}/.AndroidStudio3.0/system/tasks/cacerts\n</code></pre>\n\n<p>I used the following import command.</p>\n\n<pre><code>$ keytool -importkeystore -v -srckeystore {src cacerts} -destkeystore {dest cacerts}\n</code></pre>\n\n<p><strong>2. Add modified cacert path to gradle.properties-</strong></p>\n\n<pre><code>systemProp.javax.net.ssl.trustStore={your-android-studio-directory}\\\\jre\\\\jre\\\\lib\\\\security\\\\cacerts\nsystemProp.javax.net.ssl.trustStorePassword=changeit\n</code></pre>\n\n<p>Ref : <a href=\"https://www.cresco.co.jp/blog/entry/2014/\" rel=\"noreferrer\">https://www.cresco.co.jp/blog/entry/2014/</a>/</p>\n"},{"tags":[],"owner":{"account_id":12541029,"reputation":427,"user_id":9125940,"display_name":"Sucheth Shivakumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1561702060,"creation_date":1560129647,"answer_id":56519570,"question_id":47323909,"body_markdown":"Your Java is not trusting the link you are using to download library.\r\nBefore proceeding on to step 2, Try step 1.\r\n\r\n1. Check if your internet is behind any firewall, Your company internet could be blocking the website you are trying to access. connect your PC to your mobile internet and trying building.\r\n\r\n2. Add certificate manually to your jdk cert strore.\r\n       - Visit the website for example https://example.com\r\n       - download the certificate from browser.\r\n       - Find your jdk installation directory.\r\n       - add cert manually to cacerts using below command,\r\n       - `sudo keytool -import -alias shibbolethnet -keystore  \r\n/Library/Java/JavaVirtualMachines/jdk1.8.0_65.jdk/Contents/Home/jre/lib/security/cacerts -file &lt;downloadedcert.cer&gt;`\r\n\r\n      \r\n\r\n\r\n   \r\n\r\n \r\n","title":"How to resolve repository certificate error in Gradle build","body":"<p>Your Java is not trusting the link you are using to download library.\nBefore proceeding on to step 2, Try step 1.</p>\n\n<ol>\n<li><p>Check if your internet is behind any firewall, Your company internet could be blocking the website you are trying to access. connect your PC to your mobile internet and trying building.</p></li>\n<li><p>Add certificate manually to your jdk cert strore.</p>\n\n<ul>\n<li>Visit the website for example <a href=\"https://example.com\" rel=\"nofollow noreferrer\">https://example.com</a></li>\n<li>download the certificate from browser.</li>\n<li>Find your jdk installation directory.</li>\n<li>add cert manually to cacerts using below command,</li>\n<li><code>sudo keytool -import -alias shibbolethnet -keystore<br>\n/Library/Java/JavaVirtualMachines/jdk1.8.0_65.jdk/Contents/Home/jre/lib/security/cacerts -file &lt;downloadedcert.cer&gt;</code></li>\n</ul></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":1497395,"reputation":830,"user_id":1403009,"display_name":"Naveen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1578160703,"creation_date":1578160703,"answer_id":59593396,"question_id":47323909,"body_markdown":"You can try changing the path for the Gradle wrapper going to Eclipse &gt; Preferences &gt; Gradle. Choose Local Installation directory instead of Gradle Wrapper.","title":"How to resolve repository certificate error in Gradle build","body":"<p>You can try changing the path for the Gradle wrapper going to Eclipse > Preferences > Gradle. Choose Local Installation directory instead of Gradle Wrapper.</p>\n"},{"tags":[],"owner":{"account_id":2937936,"reputation":59,"user_id":2516469,"display_name":"Janardhan B. Chinta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1609263771,"creation_date":1609263771,"answer_id":65496398,"question_id":47323909,"body_markdown":"I installed key for `plugins.gradle.org` and was able to download the following, `https://plugins.gradle.org/m2/org/springframework/boot/spring-boot-gradle-plugin/2.4.1/`\r\n\r\nHowever, failed to download `https://plugins.gradle.org/m2/org/springframework/boot/spring-boot-gradle-plugin/2.4.1/spring-boot-gradle-plugin-2.4.1.module`, which my browser is able to download.\r\n\r\nSpent a day and figured out, the url is being redirected, `spring-boot-gradle-plugin-2.4.1.module` ⟶ `https://jcenter.bintray.com/org/springframework/boot/spring-boot-gradle-plugin/2.4.1/spring-boot-gradle-plugin-2.4.1.module`\r\n\r\nAdded `jcenter.bintray.com` to my keystore and it worked. Twisted world.\r\n\r\n","title":"How to resolve repository certificate error in Gradle build","body":"<p>I installed key for <code>plugins.gradle.org</code> and was able to download the following, <code>https://plugins.gradle.org/m2/org/springframework/boot/spring-boot-gradle-plugin/2.4.1/</code></p>\n<p>However, failed to download <code>https://plugins.gradle.org/m2/org/springframework/boot/spring-boot-gradle-plugin/2.4.1/spring-boot-gradle-plugin-2.4.1.module</code>, which my browser is able to download.</p>\n<p>Spent a day and figured out, the url is being redirected, <code>spring-boot-gradle-plugin-2.4.1.module</code> ⟶ <code>https://jcenter.bintray.com/org/springframework/boot/spring-boot-gradle-plugin/2.4.1/spring-boot-gradle-plugin-2.4.1.module</code></p>\n<p>Added <code>jcenter.bintray.com</code> to my keystore and it worked. Twisted world.</p>\n"},{"tags":[],"owner":{"account_id":7206455,"reputation":11,"user_id":5501908,"display_name":"Č&#237;ma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655972007,"creation_date":1655972007,"answer_id":72726757,"question_id":47323909,"body_markdown":"# TL;DR\r\nThere are known JDK&#39;s with buggy HTTP client that fails during TLS v1.3 (enforced by many servers) with this misleading exception.\r\n\r\n**Update your JDK to newest possible version.**\r\n\r\n# Long story\r\n\r\nVersion of JDK might be the cause. As the time progresses and the Internet evolves servers starting to narrow down the set of transport protocols. Some may only offer TLS v1.2 and TLS v1.3. HTTP Clients (including the one in Java) might be buggy.\r\n\r\nMy experience was that truststore and certificates were OK but as Java HTTP client from OpenJDK 11.0.0 (downloaded from official OpenJDK website) had a bug in TLS v1.3 it always ended up in exception `PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target`. Which is just exception thrown. Not the real problem.\r\n\r\nSolution was to tak the freshest JDK from major version I had to use. It is fixed in 11.0.3 and by the time of writing 11.0.15 was available.\r\n                                              ","title":"How to resolve repository certificate error in Gradle build","body":"<h1>TL;DR</h1>\n<p>There are known JDK's with buggy HTTP client that fails during TLS v1.3 (enforced by many servers) with this misleading exception.</p>\n<p><strong>Update your JDK to newest possible version.</strong></p>\n<h1>Long story</h1>\n<p>Version of JDK might be the cause. As the time progresses and the Internet evolves servers starting to narrow down the set of transport protocols. Some may only offer TLS v1.2 and TLS v1.3. HTTP Clients (including the one in Java) might be buggy.</p>\n<p>My experience was that truststore and certificates were OK but as Java HTTP client from OpenJDK 11.0.0 (downloaded from official OpenJDK website) had a bug in TLS v1.3 it always ended up in exception <code>PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target</code>. Which is just exception thrown. Not the real problem.</p>\n<p>Solution was to tak the freshest JDK from major version I had to use. It is fixed in 11.0.3 and by the time of writing 11.0.15 was available.</p>\n"},{"tags":[],"owner":{"account_id":13404374,"reputation":1,"user_id":20778604,"display_name":"emily"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689006635,"creation_date":1688583419,"answer_id":76623311,"question_id":47323909,"body_markdown":"I was getting this error for a freshly cloned repo with a dependency was used successfully in another repo, so I knew it wasn&#39;t a key cert problem. Eventually I was able to resolve it by changing the gradle settings in intelliJ by going to `Preferences -&gt;Gradle -&gt; Gradle JVM` and setting it to the right JDK I wanted to use (I wanted java 1.8 but it was set to azul 15)","title":"How to resolve repository certificate error in Gradle build","body":"<p>I was getting this error for a freshly cloned repo with a dependency was used successfully in another repo, so I knew it wasn't a key cert problem. Eventually I was able to resolve it by changing the gradle settings in intelliJ by going to <code>Preferences -&gt;Gradle -&gt; Gradle JVM</code> and setting it to the right JDK I wanted to use (I wanted java 1.8 but it was set to azul 15)</p>\n"}],"owner":{"account_id":5237756,"reputation":2929,"user_id":4185813,"accept_rate":58,"display_name":"Ajay Kulkarni"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53134,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"answer_count":8,"score":13,"last_activity_date":1689006635,"creation_date":1510817306,"question_id":47323909,"body_markdown":"I installed latest version of android studio. I had jdk 8 which was already installed. When I opened android studio, I got below error.\r\n\r\n    Unable to resolve dependency for &#39;:app@debugUnitTest/compileClasspath&#39;: Could not resolve com.android.support:appcompat-v7:26.1.0.\r\n    \r\n    Could not resolve com.android.support:appcompat-v7:26.1.0.\r\n    Required by:\r\n        project :app\r\n     &gt; Could not resolve com.android.support:appcompat-v7:26.1.0.\r\n        &gt; Could not get resource &#39;https://dl.google.com/dl/android/maven2/com/android/support/appcompat-v7/26.1.0/appcompat-v7-26.1.0.pom&#39;.\r\n              &gt; Could not GET &#39;https://dl.google.com/dl/android/maven2/com/android/support/appcompat-v7/26.1.0/appcompat-v7-26.1.0.pom&#39;.\r\n                       &gt; sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n                                   &gt; PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\r\n                                                  &gt; unable to find valid certification path to requested target  \r\nSo I removed JDK 8 and installed JDK 9, added environment variables (in windows 10). Then I restarted my system and started android studio, I still got above error. I even added  \r\n\r\n    repositories {\r\n        maven { url &quot;https://maven.google.com&quot; }\r\n    }  \r\nto gradle script. But I&#39;m still getting same error. How do I fix this error? ","title":"How to resolve repository certificate error in Gradle build","body":"<p>I installed latest version of android studio. I had jdk 8 which was already installed. When I opened android studio, I got below error.</p>\n\n<pre><code>Unable to resolve dependency for ':app@debugUnitTest/compileClasspath': Could not resolve com.android.support:appcompat-v7:26.1.0.\n\nCould not resolve com.android.support:appcompat-v7:26.1.0.\nRequired by:\n    project :app\n &gt; Could not resolve com.android.support:appcompat-v7:26.1.0.\n    &gt; Could not get resource 'https://dl.google.com/dl/android/maven2/com/android/support/appcompat-v7/26.1.0/appcompat-v7-26.1.0.pom'.\n          &gt; Could not GET 'https://dl.google.com/dl/android/maven2/com/android/support/appcompat-v7/26.1.0/appcompat-v7-26.1.0.pom'.\n                   &gt; sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n                               &gt; PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n                                              &gt; unable to find valid certification path to requested target  \n</code></pre>\n\n<p>So I removed JDK 8 and installed JDK 9, added environment variables (in windows 10). Then I restarted my system and started android studio, I still got above error. I even added  </p>\n\n<pre><code>repositories {\n    maven { url \"https://maven.google.com\" }\n}  \n</code></pre>\n\n<p>to gradle script. But I'm still getting same error. How do I fix this error? </p>\n"},{"tags":["java","algorithm","image-processing","opencv"],"comments":[{"owner":{"account_id":330103,"reputation":17394,"user_id":654019,"accept_rate":56,"display_name":"mans"},"score":1,"creation_date":1447422834,"post_id":14418983,"comment_id":55159941,"body_markdown":"The link to pixelated image is broken. can you please fix it or upload the image here. I am not sure what do you mean by pixelated :(","body":"The link to pixelated image is broken. can you please fix it or upload the image here. I am not sure what do you mean by pixelated :("}],"answers":[{"tags":[],"owner":{"account_id":81564,"reputation":3843,"user_id":229896,"accept_rate":93,"display_name":"Καrτhικ"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1358689287,"creation_date":1358630735,"answer_id":14419059,"question_id":14418983,"body_markdown":"Some approaches:\r\n\r\n1) Implement canny or other edge detection and vary the edge threshold to see if the result is a grid. A grid can be detected by applying Hough line detector to the resulting edge image. See (2) below.\r\n\r\n2) (This is really thresholding the image before edge detection; also suggest smoothing image with median filter or other noise removal filter). Scan from left to right and at each pixel color change assign either black or white to the pixel. Continue with black/white until the color changes and toggle from black to white or white to black. If pixelated you will end up with a grid like image. You can run a standard line detection on the iamge (which you can do for [1] as well) and see if the slopes of the resulting lines are vertical and parallel and if the lines are fairly equidistant. There are sample line detection algorithms on the internet (even Java implementations).\r\n\r\nThis [website][1] has references to line detection and edge detection algorithms.\r\n\r\nEDIT: In response to question from mmgp (+1 for the challenge, I like that!), this is what I did with the sample image in the question:\r\n1) Edge detection\r\n2) Gray-scale\r\n3) Hugh-transform (high threshold)\r\nAttached is the hugh-transform output. By evaluating all lines that have horizontal/vertical slope and computing distance between them, a grid pattern can be discerned. This does not automatically mean the image is pixelated (a chess board would show up as pixelated). There can be false positives.\r\n\r\n![enter image description here][2]\r\n\r\n\r\n  [1]: http://codebazaar.blogspot.com/2011/08/chess-board-recognition-project-part-1.html\r\n  [2]: http://i.stack.imgur.com/ePJoK.png","title":"How to detect if an image is pixelated","body":"<p>Some approaches:</p>\n\n<p>1) Implement canny or other edge detection and vary the edge threshold to see if the result is a grid. A grid can be detected by applying Hough line detector to the resulting edge image. See (2) below.</p>\n\n<p>2) (This is really thresholding the image before edge detection; also suggest smoothing image with median filter or other noise removal filter). Scan from left to right and at each pixel color change assign either black or white to the pixel. Continue with black/white until the color changes and toggle from black to white or white to black. If pixelated you will end up with a grid like image. You can run a standard line detection on the iamge (which you can do for <a href=\"http://codebazaar.blogspot.com/2011/08/chess-board-recognition-project-part-1.html\" rel=\"nofollow noreferrer\">1</a> as well) and see if the slopes of the resulting lines are vertical and parallel and if the lines are fairly equidistant. There are sample line detection algorithms on the internet (even Java implementations).</p>\n\n<p>This <a href=\"http://codebazaar.blogspot.com/2011/08/chess-board-recognition-project-part-1.html\" rel=\"nofollow noreferrer\">website</a> has references to line detection and edge detection algorithms.</p>\n\n<p>EDIT: In response to question from mmgp (+1 for the challenge, I like that!), this is what I did with the sample image in the question:\n1) Edge detection\n2) Gray-scale\n3) Hugh-transform (high threshold)\nAttached is the hugh-transform output. By evaluating all lines that have horizontal/vertical slope and computing distance between them, a grid pattern can be discerned. This does not automatically mean the image is pixelated (a chess board would show up as pixelated). There can be false positives.</p>\n\n<p><img src=\"https://i.stack.imgur.com/ePJoK.png\" alt=\"enter image description here\"></p>\n"},{"tags":[],"owner":{"account_id":1205307,"reputation":34600,"user_id":1175101,"accept_rate":82,"display_name":"fraxel"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1358638570,"creation_date":1358638570,"answer_id":14420092,"question_id":14418983,"body_markdown":"Here is a fairly simple approach which could work:\r\n\r\n 1. Subtract the image from a copy translated by 1 pixel in both x, and y.\r\n 2. Sum the pixels in columns and rows (I only show columns below).\r\n 3. Figure out the frequency and standard deviation of the peak positions.\r\n 4. If the standard deviation is below some threshold then the image is pixellated.\r\n\r\nYour image after step 1:\r\n\r\n![enter image description here][1]\r\n\r\nShowing a clear grid pattern. Now if we sum the pixels columnarly we get:\r\n\r\n![enter image description here][2]\r\nNow if we can figure out the regularity of the peak column spacing, and use this as a threshold to determine if the image is pixelated or not.\r\n\r\nHere is some quick and rough python code, to give an idea of an approach:\r\n\r\n    import numpy as np\r\n    import Image, ImageChops\r\n\r\n    im = Image.open(&#39;fireworks-pixelate-02.gif&#39;)    \r\n    im2 = im.transform(im.size, Image.AFFINE, (1,0,1,0,1,1))\r\n    im3 = ImageChops.subtract(im, im2)\r\n    im3 = np.asarray(im3)\r\n    im3 = np.sum(im3,axis=0)[:-1]\r\n    mean = np.mean(im3)\r\n    peak_spacing = np.diff([i for i,v in enumerate(im3) if v &gt; mean*2])\r\n    mean_spacing = np.mean(peak_spacing)\r\n    std_spacing = np.std(peak_spacing)\r\n    print &#39;mean gap:&#39;, mean_spacing, &#39;std&#39;, std_spacing\r\n\r\nOutput:\r\n\r\n    mean gap: 14.6944444444 std: 3.23882218342\r\n\r\nLow std = pixelated image\r\n\r\nThis unpixelated image:\r\n![enter image description here][3]\r\n\r\nHas a corresponding graph like this:\r\n\r\n![enter image description here][4]\r\nyeilding a much higher std:\r\n\r\n\r\n    mean gap: 16.1666666667 std: 26.8416136293\r\n\r\nNote here, that the &quot;mean gap&quot; is meaningless becuase the std is much higher.\r\n\r\nHopefully this is enough to illustrate that this approach could work quite nicely.\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/KDOIs.png\r\n  [2]: http://i.stack.imgur.com/9HFJS.png\r\n  [3]: http://i.stack.imgur.com/2KAdQ.gif\r\n  [4]: http://i.stack.imgur.com/8phde.png","title":"How to detect if an image is pixelated","body":"<p>Here is a fairly simple approach which could work:</p>\n\n<ol>\n<li>Subtract the image from a copy translated by 1 pixel in both x, and y.</li>\n<li>Sum the pixels in columns and rows (I only show columns below).</li>\n<li>Figure out the frequency and standard deviation of the peak positions.</li>\n<li>If the standard deviation is below some threshold then the image is pixellated.</li>\n</ol>\n\n<p>Your image after step 1:</p>\n\n<p><img src=\"https://i.stack.imgur.com/KDOIs.png\" alt=\"enter image description here\"></p>\n\n<p>Showing a clear grid pattern. Now if we sum the pixels columnarly we get:</p>\n\n<p><img src=\"https://i.stack.imgur.com/9HFJS.png\" alt=\"enter image description here\">\nNow if we can figure out the regularity of the peak column spacing, and use this as a threshold to determine if the image is pixelated or not.</p>\n\n<p>Here is some quick and rough python code, to give an idea of an approach:</p>\n\n<pre><code>import numpy as np\nimport Image, ImageChops\n\nim = Image.open('fireworks-pixelate-02.gif')    \nim2 = im.transform(im.size, Image.AFFINE, (1,0,1,0,1,1))\nim3 = ImageChops.subtract(im, im2)\nim3 = np.asarray(im3)\nim3 = np.sum(im3,axis=0)[:-1]\nmean = np.mean(im3)\npeak_spacing = np.diff([i for i,v in enumerate(im3) if v &gt; mean*2])\nmean_spacing = np.mean(peak_spacing)\nstd_spacing = np.std(peak_spacing)\nprint 'mean gap:', mean_spacing, 'std', std_spacing\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>mean gap: 14.6944444444 std: 3.23882218342\n</code></pre>\n\n<p>Low std = pixelated image</p>\n\n<p>This unpixelated image:\n<img src=\"https://i.stack.imgur.com/2KAdQ.gif\" alt=\"enter image description here\"></p>\n\n<p>Has a corresponding graph like this:</p>\n\n<p><img src=\"https://i.stack.imgur.com/8phde.png\" alt=\"enter image description here\">\nyeilding a much higher std:</p>\n\n<pre><code>mean gap: 16.1666666667 std: 26.8416136293\n</code></pre>\n\n<p>Note here, that the \"mean gap\" is meaningless becuase the std is much higher.</p>\n\n<p>Hopefully this is enough to illustrate that this approach could work quite nicely.</p>\n"},{"tags":[],"owner":{"account_id":2053832,"reputation":18961,"user_id":1832154,"display_name":"mmgp"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1358694453,"creation_date":1358694453,"answer_id":14425857,"question_id":14418983,"body_markdown":"This is going to be problematic, there are many ways to pixelate images. Even using a single method, you can have it arbitrarily rotated. In theory this rotation shouldn&#39;t affect methods like Hough, but in practice it does because you cannot have perfectly rasterized lines at arbitrary angles. My approach is simplistic, it is not going to work every time (it will probably fail most of time), but you really have to better define what you want to do. Are you going to tell the user: &quot;hey, your image is pixelated, I don&#39;t want it&quot; ? What you want to do is not clear, the scope is not clear too.\r\n\r\nSo here is the approach. Split your image into its color channels, your example one is a palleted GIF but that can be easily seen as a RGB image. If it is a grayscale then you mostly like have one channel, that is fine. If your image have an alpha channel, either blend it or ignore it. With this separated color channels, apply a morphological gradient in each one, binarize each one by Otsu (since it is automatic, relatively good, easily available), and combine the n binary channels into one by adding them. The morphological gradient will give a high response for strong edges (including noise), and the binarization step will keep them. Now you remove components that are too small and do a thinning to get one-pixel-wide edges. Here is what we get with your example image after these steps:\r\n\r\n![enter image description here][1] ![enter image description here][2]\r\n\r\n    f = Import[&quot;http://www.caughtinthefire.com/wp-content/uploads/2009/03/\\\r\n         fireworks-pixelate-02.gif&quot;]\r\n    split = Binarize[ImageSubtract[Dilation[#, 1], Erosion[#, 1]]] &amp; /@ \r\n      ColorSeparate[f, &quot;RGB&quot;]\r\n    thin = Thinning[SelectComponents[Fold[ImageAdd, split[[1]], split[[2 ;;]]], \r\n      &quot;Count&quot;, # &gt; 10 &amp;]]\r\n\r\nNow we proceed to detect the lines in this thinned binary image. The expectation is that it will form many rectangular areas when the image is pixelated, but there is no guarantee that we can actually form these rectangular areas. Supposing we can, consider each of these areas as a connected component. Then if we perform a simply component analysis as: if the ratio between the area of its convex hull and the area of its bounding box is greater than some value, then this area is a rectangular area. If we end up with many rectangular areas, then you say your image is pixelated (but actually there is no confidence on saying such thing). Next we see the original image with the detected lines overlaid, at right we see the connected components (points that are not black) that remain after considering the analysis mentioned using a ratio &gt; 95%. In this case, there were 542 connected components in total, which were reduced to 483. This means nearly 90% of the components are rectangular. You could also take into consideration the area of the remaining components, or combine this analysis with other ones, but I&#39;m not doing this here.\r\n\r\n![enter image description here][3] ![enter image description here][4]\r\n\r\n    lines = ImageLines[thin, 0.05, Method -&gt; &quot;RANSAC&quot;];\r\n    Show[f, Graphics[{Thick, Blue, Line /@ lines}]] (* The left image above. *)\r\n    blank = Image[ConstantArray[255, Reverse@ImageDimensions[thin]]];\r\n    blankcc = ImagePad[Binarize[Image[Show[blank, \r\n      Graphics[{Thick, Black, Line /@ lines}]]]], 1, Black]\r\n    ccrect = SelectComponents[MorphologicalComponents[blankcc], {&quot;BoundingBoxArea&quot;, \r\n      &quot;ConvexArea&quot;}, #2/#1 &gt; 0.95 &amp;];\r\n    Colorize[ccrect, ColorFunction -&gt; &quot;DarkRainbow&quot;] (* The right image above. *)\r\n\r\nThis is your indication of &quot;pixelated&quot;.\r\n\r\nHere are other results considering other images. This is always a sequence of three images in this order: original, result as above without changing anything, result as above after changing the threshold for line detection.\r\n\r\nEverything detected as rectangular. But a threshold of `0.05` for line detection is too high here, after reducing it to `0.01` we get a better division of the components.\r\n\r\n![enter image description here][5] ![enter image description here][6] ![enter image description here][7]\r\n\r\nNext we consider an image which is outside of what we expect, so we end up with very few components. There is no threshold for line detection that will give a greater amount of rectangular components, so the third image is empty (or fully black, since no component remains).\r\n\r\n![enter image description here][8] ![enter image description here][9]\r\n\r\nLastly, a pixelation where the squares are rotated. The process for generating the following image might have been different than the one used in the example image, but I have no idea since I&#39;m not the author. The right image is the result of raising the line threshold to `0.08`. The problem here is that the regions are relatively large, which I wouldn&#39;t consider for detection of pixelated images.\r\n\r\n![enter image description here][10] ![enter image description here][11] ![enter image description here][12]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/1QTlnm.gif\r\n  [2]: http://i.stack.imgur.com/Uj96Zm.png\r\n  [3]: http://i.stack.imgur.com/PgYzMm.png\r\n  [4]: http://i.stack.imgur.com/pXuTzm.png\r\n  [5]: http://i.stack.imgur.com/ifmoGm.jpg\r\n  [6]: http://i.stack.imgur.com/XAj11m.png\r\n  [7]: http://i.stack.imgur.com/GrLefm.png\r\n  [8]: http://i.stack.imgur.com/cCDY8m.jpg\r\n  [9]: http://i.stack.imgur.com/5iFQIm.png\r\n  [10]: http://i.stack.imgur.com/EJpMam.jpg\r\n  [11]: http://i.stack.imgur.com/J4TFlm.png\r\n  [12]: http://i.stack.imgur.com/RklP5m.png","title":"How to detect if an image is pixelated","body":"<p>This is going to be problematic, there are many ways to pixelate images. Even using a single method, you can have it arbitrarily rotated. In theory this rotation shouldn't affect methods like Hough, but in practice it does because you cannot have perfectly rasterized lines at arbitrary angles. My approach is simplistic, it is not going to work every time (it will probably fail most of time), but you really have to better define what you want to do. Are you going to tell the user: \"hey, your image is pixelated, I don't want it\" ? What you want to do is not clear, the scope is not clear too.</p>\n\n<p>So here is the approach. Split your image into its color channels, your example one is a palleted GIF but that can be easily seen as a RGB image. If it is a grayscale then you mostly like have one channel, that is fine. If your image have an alpha channel, either blend it or ignore it. With this separated color channels, apply a morphological gradient in each one, binarize each one by Otsu (since it is automatic, relatively good, easily available), and combine the n binary channels into one by adding them. The morphological gradient will give a high response for strong edges (including noise), and the binarization step will keep them. Now you remove components that are too small and do a thinning to get one-pixel-wide edges. Here is what we get with your example image after these steps:</p>\n\n<p><img src=\"https://i.stack.imgur.com/1QTlnm.gif\" alt=\"enter image description here\"> <img src=\"https://i.stack.imgur.com/Uj96Zm.png\" alt=\"enter image description here\"></p>\n\n<pre><code>f = Import[\"http://www.caughtinthefire.com/wp-content/uploads/2009/03/\\\n     fireworks-pixelate-02.gif\"]\nsplit = Binarize[ImageSubtract[Dilation[#, 1], Erosion[#, 1]]] &amp; /@ \n  ColorSeparate[f, \"RGB\"]\nthin = Thinning[SelectComponents[Fold[ImageAdd, split[[1]], split[[2 ;;]]], \n  \"Count\", # &gt; 10 &amp;]]\n</code></pre>\n\n<p>Now we proceed to detect the lines in this thinned binary image. The expectation is that it will form many rectangular areas when the image is pixelated, but there is no guarantee that we can actually form these rectangular areas. Supposing we can, consider each of these areas as a connected component. Then if we perform a simply component analysis as: if the ratio between the area of its convex hull and the area of its bounding box is greater than some value, then this area is a rectangular area. If we end up with many rectangular areas, then you say your image is pixelated (but actually there is no confidence on saying such thing). Next we see the original image with the detected lines overlaid, at right we see the connected components (points that are not black) that remain after considering the analysis mentioned using a ratio > 95%. In this case, there were 542 connected components in total, which were reduced to 483. This means nearly 90% of the components are rectangular. You could also take into consideration the area of the remaining components, or combine this analysis with other ones, but I'm not doing this here.</p>\n\n<p><img src=\"https://i.stack.imgur.com/PgYzMm.png\" alt=\"enter image description here\"> <img src=\"https://i.stack.imgur.com/pXuTzm.png\" alt=\"enter image description here\"></p>\n\n<pre><code>lines = ImageLines[thin, 0.05, Method -&gt; \"RANSAC\"];\nShow[f, Graphics[{Thick, Blue, Line /@ lines}]] (* The left image above. *)\nblank = Image[ConstantArray[255, Reverse@ImageDimensions[thin]]];\nblankcc = ImagePad[Binarize[Image[Show[blank, \n  Graphics[{Thick, Black, Line /@ lines}]]]], 1, Black]\nccrect = SelectComponents[MorphologicalComponents[blankcc], {\"BoundingBoxArea\", \n  \"ConvexArea\"}, #2/#1 &gt; 0.95 &amp;];\nColorize[ccrect, ColorFunction -&gt; \"DarkRainbow\"] (* The right image above. *)\n</code></pre>\n\n<p>This is your indication of \"pixelated\".</p>\n\n<p>Here are other results considering other images. This is always a sequence of three images in this order: original, result as above without changing anything, result as above after changing the threshold for line detection.</p>\n\n<p>Everything detected as rectangular. But a threshold of <code>0.05</code> for line detection is too high here, after reducing it to <code>0.01</code> we get a better division of the components.</p>\n\n<p><img src=\"https://i.stack.imgur.com/ifmoGm.jpg\" alt=\"enter image description here\"> <img src=\"https://i.stack.imgur.com/XAj11m.png\" alt=\"enter image description here\"> <img src=\"https://i.stack.imgur.com/GrLefm.png\" alt=\"enter image description here\"></p>\n\n<p>Next we consider an image which is outside of what we expect, so we end up with very few components. There is no threshold for line detection that will give a greater amount of rectangular components, so the third image is empty (or fully black, since no component remains).</p>\n\n<p><img src=\"https://i.stack.imgur.com/cCDY8m.jpg\" alt=\"enter image description here\"> <img src=\"https://i.stack.imgur.com/5iFQIm.png\" alt=\"enter image description here\"></p>\n\n<p>Lastly, a pixelation where the squares are rotated. The process for generating the following image might have been different than the one used in the example image, but I have no idea since I'm not the author. The right image is the result of raising the line threshold to <code>0.08</code>. The problem here is that the regions are relatively large, which I wouldn't consider for detection of pixelated images.</p>\n\n<p><img src=\"https://i.stack.imgur.com/EJpMam.jpg\" alt=\"enter image description here\"> <img src=\"https://i.stack.imgur.com/J4TFlm.png\" alt=\"enter image description here\"> <img src=\"https://i.stack.imgur.com/RklP5m.png\" alt=\"enter image description here\"></p>\n"}],"owner":{"account_id":44661,"reputation":9356,"user_id":131194,"accept_rate":63,"display_name":"birdy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8219,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":3,"score":9,"last_activity_date":1689006418,"creation_date":1358630268,"question_id":14418983,"body_markdown":"There is a question like this asked on SO earlier: https://stackoverflow.com/questions/12942365/detecting-a-pixelated-image-in-python and also on [quora][1]\r\n\r\nI&#39;m trying to find out whether an image uploaded by a user can be detected as &#39;pixelated&#39;. By pixelated I mean images [like these][2]: In my case I don&#39;t have access to the original (non-pixelated) version. \r\n\r\n**My approach**: \r\n\r\nNot sure how effective this approach would be but if I could get RGB of each pixel in the image and then compare it to its neighbors to see if they are similar then I could detect that the image is pixelated? I can get the RGB of pixels but don&#39;t know how to go about comparing them to their neighbors. \r\n\r\nAre there algorithms for doing something like this available already? Are there some other approaches I could take? I&#39;m not bound to any specific language. \r\n\r\n\r\n  [1]: http://www.quora.com/How-do-I-detect-if-an-image-is-pixelated\r\n  [2]: http://www.caughtinthefire.com/wp-content/uploads/2009/03/fireworks-pixelate-02.gif?","title":"How to detect if an image is pixelated","body":"<p>There is a question like this asked on SO earlier: <a href=\"https://stackoverflow.com/questions/12942365/detecting-a-pixelated-image-in-python\">Detecting a pixelated image in python</a> and also on <a href=\"http://www.quora.com/How-do-I-detect-if-an-image-is-pixelated\" rel=\"nofollow noreferrer\">quora</a></p>\n\n<p>I'm trying to find out whether an image uploaded by a user can be detected as 'pixelated'. By pixelated I mean images <a href=\"http://www.caughtinthefire.com/wp-content/uploads/2009/03/fireworks-pixelate-02.gif?\" rel=\"nofollow noreferrer\">like these</a>: In my case I don't have access to the original (non-pixelated) version. </p>\n\n<p><strong>My approach</strong>: </p>\n\n<p>Not sure how effective this approach would be but if I could get RGB of each pixel in the image and then compare it to its neighbors to see if they are similar then I could detect that the image is pixelated? I can get the RGB of pixels but don't know how to go about comparing them to their neighbors. </p>\n\n<p>Are there algorithms for doing something like this available already? Are there some other approaches I could take? I'm not bound to any specific language. </p>\n"},{"tags":["java","spring","spring-security","oauth-2.0"],"comments":[{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1689024051,"post_id":76655527,"comment_id":135152033,"body_markdown":"You could find [this tutorial](https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/resource-server_multitenant_dynamic) useful. It is a servlet, but adapting it to a reactive application is straight forward.","body":"You could find <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/resource-server_multitenant_dynamic\" rel=\"nofollow noreferrer\">this tutorial</a> useful. It is a servlet, but adapting it to a reactive application is straight forward."},{"owner":{"account_id":963620,"reputation":2688,"user_id":987457,"accept_rate":100,"display_name":"Jonathan"},"score":0,"creation_date":1689100232,"post_id":76655527,"comment_id":135164493,"body_markdown":"Thanks for the hint. While it is not the solution I am looking for, it helped me to get a working idea. I will elaborate on that one and assuming it works out, I will post it.","body":"Thanks for the hint. While it is not the solution I am looking for, it helped me to get a working idea. I will elaborate on that one and assuming it works out, I will post it."}],"owner":{"account_id":963620,"reputation":2688,"user_id":987457,"accept_rate":100,"display_name":"Jonathan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":113,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689005322,"creation_date":1689005322,"question_id":76655527,"body_markdown":"I would like to build a multi-tenant OAuth2 Resource Server with Spring Boot (still 2.7).\r\n\r\nBasically, my requests are of the form `server:port/tenant/...` so I have to resolve the relevant auth server from the request URL. I have found this article [article from spring][1]. The issue here is, that you have to provide a list of valid auth servers which are then all valid for any request - which is wrong in my case.\r\n\r\nI have found the `ServerWebExchangeDelegatingReactiveAuthenticationManagerResolver`, which is not documented at all. Its method signature seems to imply, it is possible to dynamically return a `ReactiveAuthenticationManager` instance depending on the request URL.\r\n\r\nI am, however, unsure, how to generate the `ReactiveAuthenticationManager` instance. I have taken a look at the predefined classes which do not seem to solve the issue &quot;resolve JWT relative to a given issuer&quot;. Best bet seems to be the `JwtReactiveAuthenticationManager`, but this class only validates the JWT in itself, so any valid JWT is accepted and it is not verified, it came from the correct server.\r\n\r\nI now see different possibilities to proceed.\r\n\r\n 1. Generate my own instance of the `ReactiveAuthenticationManagerResolver`\r\n 2. Use the `ServerWebExchangeDelegatingReactiveAuthenticationManagerResolver` and provide my own instance of the enclosed `ReactiveAuthenticationManager`\r\n 3. Use the default `JwtReactiveAuthenticationManager` and fumble my own `ReactiveJwtDecoder`\r\n\r\nI think, all the paths my lead to an eventual success, but I am unsure, how it was meant to be done.\r\n\r\nAny hints?\r\n\r\n  [1]: https://docs.spring.io/spring-security/reference/reactive/oauth2/resource-server/multitenancy.html","title":"Multi Tenancy OAuth Resource Server","body":"<p>I would like to build a multi-tenant OAuth2 Resource Server with Spring Boot (still 2.7).</p>\n<p>Basically, my requests are of the form <code>server:port/tenant/...</code> so I have to resolve the relevant auth server from the request URL. I have found this article <a href=\"https://docs.spring.io/spring-security/reference/reactive/oauth2/resource-server/multitenancy.html\" rel=\"nofollow noreferrer\">article from spring</a>. The issue here is, that you have to provide a list of valid auth servers which are then all valid for any request - which is wrong in my case.</p>\n<p>I have found the <code>ServerWebExchangeDelegatingReactiveAuthenticationManagerResolver</code>, which is not documented at all. Its method signature seems to imply, it is possible to dynamically return a <code>ReactiveAuthenticationManager</code> instance depending on the request URL.</p>\n<p>I am, however, unsure, how to generate the <code>ReactiveAuthenticationManager</code> instance. I have taken a look at the predefined classes which do not seem to solve the issue &quot;resolve JWT relative to a given issuer&quot;. Best bet seems to be the <code>JwtReactiveAuthenticationManager</code>, but this class only validates the JWT in itself, so any valid JWT is accepted and it is not verified, it came from the correct server.</p>\n<p>I now see different possibilities to proceed.</p>\n<ol>\n<li>Generate my own instance of the <code>ReactiveAuthenticationManagerResolver</code></li>\n<li>Use the <code>ServerWebExchangeDelegatingReactiveAuthenticationManagerResolver</code> and provide my own instance of the enclosed <code>ReactiveAuthenticationManager</code></li>\n<li>Use the default <code>JwtReactiveAuthenticationManager</code> and fumble my own <code>ReactiveJwtDecoder</code></li>\n</ol>\n<p>I think, all the paths my lead to an eventual success, but I am unsure, how it was meant to be done.</p>\n<p>Any hints?</p>\n"},{"tags":["java","spring-boot","microservices"],"answers":[{"tags":[],"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689005295,"creation_date":1689005295,"answer_id":76655522,"question_id":76654733,"body_markdown":"SocketUtils has been removed in Spring Boot 6. It was never intended for use on production, only for integration tests. Spring docu discourage to read available ports. For random port setting server.port=0 is the correct way. Letting server to provide one for you.","title":"How to setup a micro service to run in any available port with in a particular range in spring boot","body":"<p>SocketUtils has been removed in Spring Boot 6. It was never intended for use on production, only for integration tests. Spring docu discourage to read available ports. For random port setting server.port=0 is the correct way. Letting server to provide one for you.</p>\n"}],"owner":{"account_id":28987702,"reputation":1,"user_id":22204202,"display_name":"Kiran Patel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":208,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689005295,"creation_date":1688999229,"question_id":76654733,"body_markdown":"I am trying to implement a microservice in SpringBoot that will have several instances running on the same virtual server for load balancing. Rather than assigning a specific port at deployment time, I want to configure the microservice to dynamically use an unused port from a preconfigured  range of ports. \r\n\r\nI have not yet tried anything to solve the issue","title":"How to setup a micro service to run in any available port with in a particular range in spring boot","body":"<p>I am trying to implement a microservice in SpringBoot that will have several instances running on the same virtual server for load balancing. Rather than assigning a specific port at deployment time, I want to configure the microservice to dynamically use an unused port from a preconfigured  range of ports.</p>\n<p>I have not yet tried anything to solve the issue</p>\n"},{"tags":["java","sql","spring","spring-data-jpa"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1688991072,"post_id":76653589,"comment_id":135145102,"body_markdown":"Please format the stacktrace correctly","body":"Please format the stacktrace correctly"},{"owner":{"account_id":22137140,"reputation":11,"user_id":16387706,"display_name":"Jboyd34"},"score":0,"creation_date":1689005316,"post_id":76653589,"comment_id":135148731,"body_markdown":"@Jens Is that better or is there another way to format it?","body":"@Jens Is that better or is there another way to format it?"}],"answers":[{"tags":[],"owner":{"account_id":26758492,"reputation":46,"user_id":20356781,"display_name":"Pyaeth"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1688994414,"creation_date":1688993641,"answer_id":76653950,"question_id":76653589,"body_markdown":"is the database you use H2 or any database that has USER as a reserved keyword? From the error stack trace this is what I am suspecting. Try to rename your table to something custom, like *UserSummary*, and see if this is still reproducible.\r\nOr you can use this in application.properties:\r\n````\r\nspring.jpa.properties.hibernate.globally_quoted_identifiers=true\r\n````\r\n\r\nMore about this [here][1].\r\n\r\n\r\n  [1]: https://www.baeldung.com/spring-boot-h2-jdbcsqlsyntaxerrorexception-expected-identifier","title":"Spring JPA find by method is getting SQL statement error","body":"<p>is the database you use H2 or any database that has USER as a reserved keyword? From the error stack trace this is what I am suspecting. Try to rename your table to something custom, like <em>UserSummary</em>, and see if this is still reproducible.\nOr you can use this in application.properties:</p>\n<pre><code>spring.jpa.properties.hibernate.globally_quoted_identifiers=true\n</code></pre>\n<p>More about this <a href=\"https://www.baeldung.com/spring-boot-h2-jdbcsqlsyntaxerrorexception-expected-identifier\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}],"owner":{"account_id":22137140,"reputation":11,"user_id":16387706,"display_name":"Jboyd34"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1689005238,"creation_date":1688990908,"question_id":76653589,"body_markdown":"I am creating a API for a dining review. I am using spring MVC method and trying to add a user to my database using a post method at the url of http://localhost:8080/user/add . I am able to connect to my spring app and I see that everything is working as expected until my application attempts to run the findByUsername method I&#39;ve created in my repo. \r\nHere is my model class \r\n\r\n```\r\npackage com.dining.model;\r\n\r\nimport org.springframework.stereotype.Component;\r\n\r\nimport jakarta.persistence.Entity;\r\nimport jakarta.persistence.GeneratedValue;\r\nimport jakarta.persistence.GenerationType;\r\nimport jakarta.persistence.Id;\r\nimport jakarta.persistence.Table;\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Data;\r\nimport lombok.NoArgsConstructor;\r\n\r\n@Component\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Data\r\n@Entity(name = &quot;User&quot;)\r\n@Table(name = &quot;User&quot;)\r\npublic class User {\r\n\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\tprivate int id;\r\n\tprivate String username;\r\n\tprivate String city;\r\n\tprivate String state;\r\n\tprivate String zip;\r\n\tprivate boolean peanutAll;\r\n\tprivate boolean eggAll;\r\n\tprivate boolean dairyAll;\r\n\t\r\n\r\n\t\r\n\t\r\n}\r\n```\r\nController \r\n\r\n```\r\npackage com.dining.controller;\r\n\r\nimport java.util.Optional;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.web.bind.annotation.PostMapping;\r\nimport org.springframework.web.bind.annotation.RequestBody;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\nimport com.dining.exceptions.UserAlreadyExistsException;\r\nimport com.dining.model.User;\r\nimport com.dining.service.UserService;\r\n\r\nimport jakarta.validation.Valid;\r\n\r\n@RestController\r\n\r\n@RequestMapping(path=&quot;/user&quot;)\r\npublic class UserController {\r\n\t@Autowired UserService userv;\r\n\t@Autowired User returnUser;\r\n\t@PostMapping(&quot;/add&quot;)\r\n\tpublic ResponseEntity&lt;User&gt; addUser(@Valid @RequestBody User user){\r\n\t\tSystem.out.print(user.getUsername());\r\n\tOptional&lt;User&gt; tempUser =\tuserv.getUser(user.getUsername());\r\n\tif(tempUser.isEmpty()) {\r\n\t\treturnUser = userv.addUser(user);\r\n\t\treturn ResponseEntity.ok(returnUser);\r\n\t}\r\n\telse {\r\n\t\tthrow new UserAlreadyExistsException(String.format(&quot;User %s already exists&quot;, user.getUsername()));\r\n\t}\r\n\r\n\t}\r\n}\r\n\r\n```\r\nService layer \r\n\r\n```\r\npackage com.dining.service;\r\n\r\nimport java.util.Optional;\r\nimport java.util.logging.Logger;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport com.dining.data.UserRepo;\r\nimport com.dining.exceptions.ChangeUsernameException;\r\nimport com.dining.exceptions.UserNotFoundException;\r\nimport com.dining.model.User;\r\n\r\n@Service\r\npublic class UserService {\r\n\r\n\t@Autowired UserRepo userRepo;\r\n\t@Autowired User tempUser;\r\n\t\r\n\t\r\n\tpublic User addUser(User user) {\r\n\t\ttry {\r\n\t\t\tif(userRepo.findByUsername(user.getUsername()) != null) {\r\n\t\t\t\tthrow new SecurityException();\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\ttempUser = userRepo.save(user);\r\n\t\t\t\t//future implementation is to add security (password)\r\n\t\t\t\treturn tempUser;\r\n\t\t\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tcatch(SecurityException ex) {\r\n\t\t\tex.printStackTrace();\r\n\t\t\tSystem.out.printf(&quot;Username %s&quot;, user.getUsername())\r\n\t\t\t\r\n\t\t}\r\n\t\tcatch(Exception ex) {\r\n\t\t\tex.printStackTrace();\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t}\r\n\t\r\n\tpublic Optional&lt;User&gt; getUser(String username) {\r\n\t\t\r\n\t\tOptional &lt;User&gt; tempUser = userRepo.findByUsername(username);\r\n\t\tif(tempUser.isEmpty()){\r\n\t\t\tthrow new UserNotFoundException(String.format(&quot;Unable to find user: %s&quot;, username));\r\n\t\t\t\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn tempUser;\r\n\t\t}\r\n\t\r\n\t\r\n    }\r\n\r\n}\r\n```\r\n\r\n```\r\npackage com.dining.data;\r\n\r\nimport java.util.Optional;\r\n\r\nimport org.springframework.data.jpa.repository.JpaRepository;\r\nimport org.springframework.data.jpa.repository.Query;\r\nimport org.springframework.stereotype.Repository;\r\n\r\nimport com.dining.model.User;\r\n@Repository\r\npublic interface UserRepo extends JpaRepository&lt;User, Integer&gt;{\r\n\t\r\n\r\n\r\n\tOptional&lt;User&gt; findByUsername(String username);\r\n}\r\n\r\n```\r\n\r\n\r\nI have tried sending this JSON object as my body of my request. I believe the sql error comes from username value not being read. It shows username=? in the sql statement\r\n```\r\n{\r\n    &quot;id&quot;: 1,\r\n    &quot;username&quot;:&quot;Jb&quot;,\r\n    &quot;city&quot;: &quot;toledo&quot;,\r\n    &quot;state&quot;: &quot;NC&quot;,\r\n    &quot;zip&quot;: &quot;43706&quot;,\r\n    &quot;peanutAll&quot;:&quot;false&quot;,\r\n    &quot;eggAll&quot;:&quot;false&quot;,\r\n    &quot;dairyAll&quot;:&quot;false&quot;\r\n}\r\n```\r\nI am noticing that if I mispell the username key in my object it isn&#39;t throwing an error. It still attempts to run the sql statement but shows username=null . Here is the error stack tracing im getting \r\n\r\n\r\norg.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Syntax error in SQL statement \\&quot;select u1_0.id,u1_0.city,u1_0.dairy_all,u1_0.egg_all,u1_0.peanut_all,u1_0.state,u1_0.username,u1_0.zip from [*]user u1_0 where u1_0.username=?\\&quot;; expected \\&quot;identifier\\&quot;; SQL statement:\\nselect u1_0.id,u1_0.city,u1_0.dairy_all,u1_0.egg_all,u1_0.peanut_all,u1_0.state,u1_0.username,u1_0.zip from user u1_0 where u1_0.username=? [42001-214]] [select u1_0.id,u1_0.city,u1_0.dairy_all,u1_0.egg_all,u1_0.peanut_all,u1_0.state,u1_0.username,u1_0.zip from user u1_0 where u1_0.username=?]; SQL [select u1_0.id,u1_0.city,u1_0.dairy_all,u1_0.egg_all,u1_0.peanut_all,u1_0.state,u1_0.username,u1_0.zip from user u1_0 where u1_0.username=?]\\r\\n\\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:256)\\r\\n\\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:229)\\r\\n\\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)\\r\\n\\tat org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)\\r\\n\\tat org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)\\r\\n\\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)\\r\\n\\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\\r\\n\\tat org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)\\r\\n\\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\\r\\n\\tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\\r\\n\\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\\r\\n\\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:244)\\r\\n\\tat jdk.proxy5/jdk.proxy5.$Proxy120.findByUsername(Unknown Source)\\r\\n\\tat com.dining.service.UserService.getUser(UserService.java:48)\r\n\r\n","title":"Spring JPA find by method is getting SQL statement error","body":"<p>I am creating a API for a dining review. I am using spring MVC method and trying to add a user to my database using a post method at the url of http://localhost:8080/user/add . I am able to connect to my spring app and I see that everything is working as expected until my application attempts to run the findByUsername method I've created in my repo.\nHere is my model class</p>\n<pre><code>package com.dining.model;\n\nimport org.springframework.stereotype.Component;\n\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.GenerationType;\nimport jakarta.persistence.Id;\nimport jakarta.persistence.Table;\nimport lombok.AllArgsConstructor;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\n@Component\n@NoArgsConstructor\n@AllArgsConstructor\n@Data\n@Entity(name = &quot;User&quot;)\n@Table(name = &quot;User&quot;)\npublic class User {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private int id;\n    private String username;\n    private String city;\n    private String state;\n    private String zip;\n    private boolean peanutAll;\n    private boolean eggAll;\n    private boolean dairyAll;\n    \n\n    \n    \n}\n</code></pre>\n<p>Controller</p>\n<pre><code>package com.dining.controller;\n\nimport java.util.Optional;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport com.dining.exceptions.UserAlreadyExistsException;\nimport com.dining.model.User;\nimport com.dining.service.UserService;\n\nimport jakarta.validation.Valid;\n\n@RestController\n\n@RequestMapping(path=&quot;/user&quot;)\npublic class UserController {\n    @Autowired UserService userv;\n    @Autowired User returnUser;\n    @PostMapping(&quot;/add&quot;)\n    public ResponseEntity&lt;User&gt; addUser(@Valid @RequestBody User user){\n        System.out.print(user.getUsername());\n    Optional&lt;User&gt; tempUser =   userv.getUser(user.getUsername());\n    if(tempUser.isEmpty()) {\n        returnUser = userv.addUser(user);\n        return ResponseEntity.ok(returnUser);\n    }\n    else {\n        throw new UserAlreadyExistsException(String.format(&quot;User %s already exists&quot;, user.getUsername()));\n    }\n\n    }\n}\n\n</code></pre>\n<p>Service layer</p>\n<pre><code>package com.dining.service;\n\nimport java.util.Optional;\nimport java.util.logging.Logger;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Service;\n\nimport com.dining.data.UserRepo;\nimport com.dining.exceptions.ChangeUsernameException;\nimport com.dining.exceptions.UserNotFoundException;\nimport com.dining.model.User;\n\n@Service\npublic class UserService {\n\n    @Autowired UserRepo userRepo;\n    @Autowired User tempUser;\n    \n    \n    public User addUser(User user) {\n        try {\n            if(userRepo.findByUsername(user.getUsername()) != null) {\n                throw new SecurityException();\n            }\n            else {\n                tempUser = userRepo.save(user);\n                //future implementation is to add security (password)\n                return tempUser;\n                        \n            }\n        }\n        \n        catch(SecurityException ex) {\n            ex.printStackTrace();\n            System.out.printf(&quot;Username %s&quot;, user.getUsername())\n            \n        }\n        catch(Exception ex) {\n            ex.printStackTrace();\n        }\n        \n        \n    }\n    \n    public Optional&lt;User&gt; getUser(String username) {\n        \n        Optional &lt;User&gt; tempUser = userRepo.findByUsername(username);\n        if(tempUser.isEmpty()){\n            throw new UserNotFoundException(String.format(&quot;Unable to find user: %s&quot;, username));\n            \n        }\n        else {\n            return tempUser;\n        }\n    \n    \n    }\n\n}\n</code></pre>\n<pre><code>package com.dining.data;\n\nimport java.util.Optional;\n\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.data.jpa.repository.Query;\nimport org.springframework.stereotype.Repository;\n\nimport com.dining.model.User;\n@Repository\npublic interface UserRepo extends JpaRepository&lt;User, Integer&gt;{\n    \n\n\n    Optional&lt;User&gt; findByUsername(String username);\n}\n\n</code></pre>\n<p>I have tried sending this JSON object as my body of my request. I believe the sql error comes from username value not being read. It shows username=? in the sql statement</p>\n<pre><code>{\n    &quot;id&quot;: 1,\n    &quot;username&quot;:&quot;Jb&quot;,\n    &quot;city&quot;: &quot;toledo&quot;,\n    &quot;state&quot;: &quot;NC&quot;,\n    &quot;zip&quot;: &quot;43706&quot;,\n    &quot;peanutAll&quot;:&quot;false&quot;,\n    &quot;eggAll&quot;:&quot;false&quot;,\n    &quot;dairyAll&quot;:&quot;false&quot;\n}\n</code></pre>\n<p>I am noticing that if I mispell the username key in my object it isn't throwing an error. It still attempts to run the sql statement but shows username=null . Here is the error stack tracing im getting</p>\n<p>org.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement [Syntax error in SQL statement &quot;select u1_0.id,u1_0.city,u1_0.dairy_all,u1_0.egg_all,u1_0.peanut_all,u1_0.state,u1_0.username,u1_0.zip from [*]user u1_0 where u1_0.username=?&quot;; expected &quot;identifier&quot;; SQL statement:\\nselect u1_0.id,u1_0.city,u1_0.dairy_all,u1_0.egg_all,u1_0.peanut_all,u1_0.state,u1_0.username,u1_0.zip from user u1_0 where u1_0.username=? [42001-214]] [select u1_0.id,u1_0.city,u1_0.dairy_all,u1_0.egg_all,u1_0.peanut_all,u1_0.state,u1_0.username,u1_0.zip from user u1_0 where u1_0.username=?]; SQL [select u1_0.id,u1_0.city,u1_0.dairy_all,u1_0.egg_all,u1_0.peanut_all,u1_0.state,u1_0.username,u1_0.zip from user u1_0 where u1_0.username=?]\\r\\n\\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:256)\\r\\n\\tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:229)\\r\\n\\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)\\r\\n\\tat org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)\\r\\n\\tat org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)\\r\\n\\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)\\r\\n\\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\\r\\n\\tat org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:135)\\r\\n\\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\\r\\n\\tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\\r\\n\\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\\r\\n\\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:244)\\r\\n\\tat jdk.proxy5/jdk.proxy5.$Proxy120.findByUsername(Unknown Source)\\r\\n\\tat com.dining.service.UserService.getUser(UserService.java:48)</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1689061968,"post_id":76655441,"comment_id":135156025,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":12806374,"reputation":26,"user_id":9265910,"display_name":"呼延十"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689004629,"creation_date":1689004629,"question_id":76655441,"body_markdown":"my code is:\r\n\r\n```\r\n       OHCache&lt;Integer, String&gt; cache = OHCacheBuilder.&lt;Integer, String&gt;newBuilder()\r\n                .keySerializer(new IntSerializer())\r\n                .valueSerializer(new StringSerializer())\r\n                .capacity(64 * 1024 * 1024)\r\n                .eviction(Eviction.LRU)\r\n                .throwOOME(true)\r\n                .build();\r\n        byte[] _1mb = new byte[1 * 1024 * 1024];\r\n        for (int i = 0; i &lt; 10000; i++) {\r\n            // cache.remove(1)\r\n            cache.put(1, new String(_1mb));\r\n        }\r\n```\r\n\r\n\r\nDirect Memory will always increase more than 64M. actually, in my prod. It increased 200G.\r\nIf I open line &#39;remove(1)&#39;. It will work under 64M. \r\nCan someone help me?\r\n\r\nwork under capacity.\r\nrelease memory  hold by  replaced old values.\r\nhttps://github.com/snazy/ohc","title":"why OHC cache not released replaced values?","body":"<p>my code is:</p>\n<pre><code>       OHCache&lt;Integer, String&gt; cache = OHCacheBuilder.&lt;Integer, String&gt;newBuilder()\n                .keySerializer(new IntSerializer())\n                .valueSerializer(new StringSerializer())\n                .capacity(64 * 1024 * 1024)\n                .eviction(Eviction.LRU)\n                .throwOOME(true)\n                .build();\n        byte[] _1mb = new byte[1 * 1024 * 1024];\n        for (int i = 0; i &lt; 10000; i++) {\n            // cache.remove(1)\n            cache.put(1, new String(_1mb));\n        }\n</code></pre>\n<p>Direct Memory will always increase more than 64M. actually, in my prod. It increased 200G.\nIf I open line 'remove(1)'. It will work under 64M.\nCan someone help me?</p>\n<p>work under capacity.\nrelease memory  hold by  replaced old values.\n<a href=\"https://github.com/snazy/ohc\" rel=\"nofollow noreferrer\">https://github.com/snazy/ohc</a></p>\n"},{"tags":["java","android","xml","android-studio","android-layout"],"comments":[{"owner":{"account_id":26487448,"reputation":206,"user_id":20125791,"display_name":"Android Newbie A"},"score":0,"creation_date":1667904802,"post_id":74358252,"comment_id":131273826,"body_markdown":"You shall place the .png file in the Resources/drawable folder as a fallback plan.","body":"You shall place the .png file in the Resources/drawable folder as a fallback plan."},{"owner":{"account_id":26487448,"reputation":206,"user_id":20125791,"display_name":"Android Newbie A"},"score":0,"creation_date":1667904863,"post_id":74358252,"comment_id":131273848,"body_markdown":"I believe the splash_icon.png is not found since the device does not recognise what DPI it is using or somehow it is a &quot;new&quot; DPI. So it will try to lookup the drawable folder (default) for the resource.","body":"I believe the splash_icon.png is not found since the device does not recognise what DPI it is using or somehow it is a &quot;new&quot; DPI. So it will try to lookup the drawable folder (default) for the resource."},{"owner":{"account_id":7981156,"reputation":122,"user_id":6022444,"display_name":"Sanjay S"},"score":0,"creation_date":1667919847,"post_id":74358252,"comment_id":131279787,"body_markdown":"I tried to put splash_icon.png in drawable, drawable-nodpi, drawable-anydpi but still error persist. so I removed from these folders.","body":"I tried to put splash_icon.png in drawable, drawable-nodpi, drawable-anydpi but still error persist. so I removed from these folders."}],"answers":[{"tags":[],"owner":{"account_id":18702501,"reputation":23,"user_id":13634409,"display_name":"Hatem Darwish"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667915993,"creation_date":1667915993,"answer_id":74361989,"question_id":74358252,"body_markdown":"In My Opinion, You Need to Use Difference sizes of image drawable like (drawable-hdpi,drawable-mdpi,drawable-xhdpi, drawable-xxhdpi , etc..)\r\n\r\nalso you can use [Android Drawable Important][1] to import Drawable with difference size. \r\n\r\nmay be found an issue with importing this library in the latest version of an android studio so you can see this [solve][2] and use it. \r\n\r\n\r\n  [1]: https://plugins.jetbrains.com/plugin/7658-android-drawable-importer\r\n  [2]: https://stackoverflow.com/questions/60412216/android-drawable-importer-plugin-not-working-in-android-studio-3-6","title":"Fatal Exception: java.lang.RuntimeException Unable to start activity ComponentInfo{SplashActivity}","body":"<p>In My Opinion, You Need to Use Difference sizes of image drawable like (drawable-hdpi,drawable-mdpi,drawable-xhdpi, drawable-xxhdpi , etc..)</p>\n<p>also you can use <a href=\"https://plugins.jetbrains.com/plugin/7658-android-drawable-importer\" rel=\"nofollow noreferrer\">Android Drawable Important</a> to import Drawable with difference size.</p>\n<p>may be found an issue with importing this library in the latest version of an android studio so you can see this <a href=\"https://stackoverflow.com/questions/60412216/android-drawable-importer-plugin-not-working-in-android-studio-3-6\">solve</a> and use it.</p>\n"}],"owner":{"account_id":7981156,"reputation":122,"user_id":6022444,"display_name":"Sanjay S"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2403,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1689004190,"creation_date":1667899025,"question_id":74358252,"body_markdown":"    Fatal Exception: java.lang.RuntimeException\r\n    Unable to start activity ComponentInfo{com.packageName/com.packageName.SplashActivity}: \r\n    android.content.res.Resources$NotFoundException: Drawable \r\n    com.packageName:drawable/splash_background with resource ID #0x7f07015d\r\n    android.app.ActivityThread.performLaunchActivity (ActivityThread.java:3900)\r\n    android.app.ActivityThread.handleLaunchActivity (ActivityThread.java:4057)\r\n    android.app.servertransaction.LaunchActivityItem.execute (LaunchActivityItem.java:103)\r\n    android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\r\n    android.app.servertransaction.TransactionExecutor.execute (TransactionExecutor.java:95)\r\n    android.app.ActivityThread$H.handleMessage (ActivityThread.java:2407)\r\n    android.os.Handler.dispatchMessage (Handler.java:106)\r\n    android.os.Looper.loopOnce (Looper.java:233)\r\n    android.os.Looper.loop (Looper.java:334)\r\n    android.app.ActivityThread.main (ActivityThread.java:8278)\r\n    java.lang.reflect.Method.invoke (Method.java)\r\n    com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run (RuntimeInit.java:582)\r\n    com.android.internal.os.ZygoteInit.main (ZygoteInit.java:1065)\r\n\r\nFirebase Crashlytics show error like this \r\n\r\n&gt; Fatal Exception: java.lang.RuntimeException\r\nUnable to start activity ComponentInfo{com.packageName/com.packageName.SplashActivity}: android.content.res.Resources$NotFoundException: Drawable com.packageName:drawable/splash_background with resource ID #0x7f07015d\r\n\r\nand, next is \r\n\r\n&gt; Caused by android.content.res.Resources$NotFoundException\r\nDrawable (missing name) with resource ID #0x7f07015e\r\n\r\nI&#39;ve custom SplashActivity with just background and drawable in center on it. Using SplashTheme style like this\r\n\r\n    &lt;style name=&quot;SplashTheme&quot; parent=&quot;@style/Theme.AppCompat.NoActionBar&quot;&gt;\r\n        &lt;item name=&quot;android:windowBackground&quot;&gt;@drawable/splash_background&lt;/item&gt; &lt;!-- Resource ID #0x7f07015d --&gt;\r\n    &lt;/style&gt;\r\n\r\nHere is my splash_background.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;layer-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:opacity=&quot;opaque&quot;&gt;\r\n        &lt;item android:drawable=&quot;@drawable/gradient_splash&quot; /&gt; &lt;!-- Resource ID #0x7f0700af --&gt;\r\n        \r\n        &lt;item android:drawable=&quot;@drawable/splash_icon&quot; android:gravity=&quot;center&quot; /&gt; &lt;!-- Resource ID #0x7f07015e --&gt;\r\n    &lt;/layer-list&gt;\r\n\r\nHere is my build.gradle configuration\r\n\r\n    apply plugin: &#39;com.android.application&#39;\r\n    apply plugin: &#39;com.google.gms.google-services&#39;\r\n    apply plugin: &#39;com.google.firebase.crashlytics&#39;\r\n\r\n    android {\r\n    compileSdkVersion 33\r\n    defaultConfig {\r\n        multiDexEnabled true\r\n        applicationId &quot;com.packageName&quot;\r\n        minSdkVersion 19\r\n        targetSdkVersion 33\r\n        versionCode &quot;VERSION_CODE&quot;\r\n        versionName &quot;VERSION_NAME&quot;\r\n        vectorDrawables.useSupportLibrary = true\r\n    }\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility 1.8\r\n        targetCompatibility 1.8\r\n    }\r\n    namespace &#39;com.packageName&#39;\r\n    }\r\n    dependencies {\r\n    implementation fileTree(dir: &#39;libs&#39;, include: [&#39;*.jar&#39;])\r\n    implementation &#39;androidx.appcompat:appcompat:1.5.1&#39;\r\n    implementation &#39;androidx.core:core:1.9.0&#39;\r\n    implementation &#39;androidx.constraintlayout:constraintlayout:2.1.4&#39;\r\n    implementation &#39;com.google.android.material:material:1.7.0&#39;\r\n    implementation &#39;androidx.vectordrawable:vectordrawable:1.1.0&#39;\r\n    implementation &#39;androidx.browser:browser:1.4.0&#39;\r\n    implementation &#39;androidx.palette:palette:1.0.0&#39;\r\n    implementation &#39;androidx.cardview:cardview:1.0.0&#39;\r\n    implementation &#39;androidx.media:media:1.6.0&#39;\r\n    implementation &#39;androidx.multidex:multidex:2.0.1&#39;\r\n    implementation &#39;androidx.legacy:legacy-support-v4:1.0.0&#39;\r\n    implementation &#39;androidx.work:work-runtime:2.7.1&#39;\r\n\r\n    implementation &#39;com.google.android.play:core:1.10.3&#39;\r\n\r\n    implementation &#39;com.google.firebase:firebase-core:21.1.1&#39;\r\n    implementation &#39;com.google.firebase:firebase-analytics:21.2.0&#39;\r\n    implementation &#39;com.google.firebase:firebase-messaging:23.1.0&#39;\r\n    implementation &#39;com.google.firebase:firebase-config:21.2.0&#39;\r\n    implementation &#39;com.google.firebase:firebase-ads:21.3.0&#39;\r\n    implementation &#39;com.google.firebase:firebase-crashlytics:18.3.1&#39;\r\n\r\n    implementation &#39;com.android.volley:volley:1.2.1&#39;\r\n    implementation &#39;com.google.code.gson:gson:2.8.6&#39;\r\n    implementation &#39;org.jsoup:jsoup:1.11.3&#39;\r\n    implementation &#39;com.facebook.shimmer:shimmer:0.4.0&#39;\r\n    implementation &#39;com.synnapps:carouselview:0.1.5&#39;\r\n    implementation &#39;com.squareup.picasso:picasso:2.5.2&#39;\r\n    implementation &#39;saschpe.android:customtabs:2.0.3&#39;\r\n    implementation &#39;com.mikhaellopez:circularfillableloaders:1.3.2&#39;\r\n    implementation &#39;io.github.inflationx:calligraphy3:3.1.1&#39;\r\n    implementation &#39;io.github.inflationx:viewpump:2.0.3&#39;\r\n    }\r\n\r\nFor your information splash_background.xml is available in drawable folder, gradient_splash.xml is available in drawable folder and splash_icon.png is available in drawable-ldpi, drawable-mdpi, drawable-hdpi, drawable-xhdpi, drawable-xxhdpi, drawable-xxxhdpi folders.","title":"Fatal Exception: java.lang.RuntimeException Unable to start activity ComponentInfo{SplashActivity}","body":"<pre><code>Fatal Exception: java.lang.RuntimeException\nUnable to start activity ComponentInfo{com.packageName/com.packageName.SplashActivity}: \nandroid.content.res.Resources$NotFoundException: Drawable \ncom.packageName:drawable/splash_background with resource ID #0x7f07015d\nandroid.app.ActivityThread.performLaunchActivity (ActivityThread.java:3900)\nandroid.app.ActivityThread.handleLaunchActivity (ActivityThread.java:4057)\nandroid.app.servertransaction.LaunchActivityItem.execute (LaunchActivityItem.java:103)\nandroid.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\nandroid.app.servertransaction.TransactionExecutor.execute (TransactionExecutor.java:95)\nandroid.app.ActivityThread$H.handleMessage (ActivityThread.java:2407)\nandroid.os.Handler.dispatchMessage (Handler.java:106)\nandroid.os.Looper.loopOnce (Looper.java:233)\nandroid.os.Looper.loop (Looper.java:334)\nandroid.app.ActivityThread.main (ActivityThread.java:8278)\njava.lang.reflect.Method.invoke (Method.java)\ncom.android.internal.os.RuntimeInit$MethodAndArgsCaller.run (RuntimeInit.java:582)\ncom.android.internal.os.ZygoteInit.main (ZygoteInit.java:1065)\n</code></pre>\n<p>Firebase Crashlytics show error like this</p>\n<blockquote>\n<p>Fatal Exception: java.lang.RuntimeException\nUnable to start activity ComponentInfo{com.packageName/com.packageName.SplashActivity}: android.content.res.Resources$NotFoundException: Drawable com.packageName:drawable/splash_background with resource ID #0x7f07015d</p>\n</blockquote>\n<p>and, next is</p>\n<blockquote>\n<p>Caused by android.content.res.Resources$NotFoundException\nDrawable (missing name) with resource ID #0x7f07015e</p>\n</blockquote>\n<p>I've custom SplashActivity with just background and drawable in center on it. Using SplashTheme style like this</p>\n<pre><code>&lt;style name=&quot;SplashTheme&quot; parent=&quot;@style/Theme.AppCompat.NoActionBar&quot;&gt;\n    &lt;item name=&quot;android:windowBackground&quot;&gt;@drawable/splash_background&lt;/item&gt; &lt;!-- Resource ID #0x7f07015d --&gt;\n&lt;/style&gt;\n</code></pre>\n<p>Here is my splash_background.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;layer-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\nandroid:opacity=&quot;opaque&quot;&gt;\n    &lt;item android:drawable=&quot;@drawable/gradient_splash&quot; /&gt; &lt;!-- Resource ID #0x7f0700af --&gt;\n    \n    &lt;item android:drawable=&quot;@drawable/splash_icon&quot; android:gravity=&quot;center&quot; /&gt; &lt;!-- Resource ID #0x7f07015e --&gt;\n&lt;/layer-list&gt;\n</code></pre>\n<p>Here is my build.gradle configuration</p>\n<pre><code>apply plugin: 'com.android.application'\napply plugin: 'com.google.gms.google-services'\napply plugin: 'com.google.firebase.crashlytics'\n\nandroid {\ncompileSdkVersion 33\ndefaultConfig {\n    multiDexEnabled true\n    applicationId &quot;com.packageName&quot;\n    minSdkVersion 19\n    targetSdkVersion 33\n    versionCode &quot;VERSION_CODE&quot;\n    versionName &quot;VERSION_NAME&quot;\n    vectorDrawables.useSupportLibrary = true\n}\nbuildTypes {\n    release {\n        minifyEnabled false\n        proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n    }\n}\ncompileOptions {\n    sourceCompatibility 1.8\n    targetCompatibility 1.8\n}\nnamespace 'com.packageName'\n}\ndependencies {\nimplementation fileTree(dir: 'libs', include: ['*.jar'])\nimplementation 'androidx.appcompat:appcompat:1.5.1'\nimplementation 'androidx.core:core:1.9.0'\nimplementation 'androidx.constraintlayout:constraintlayout:2.1.4'\nimplementation 'com.google.android.material:material:1.7.0'\nimplementation 'androidx.vectordrawable:vectordrawable:1.1.0'\nimplementation 'androidx.browser:browser:1.4.0'\nimplementation 'androidx.palette:palette:1.0.0'\nimplementation 'androidx.cardview:cardview:1.0.0'\nimplementation 'androidx.media:media:1.6.0'\nimplementation 'androidx.multidex:multidex:2.0.1'\nimplementation 'androidx.legacy:legacy-support-v4:1.0.0'\nimplementation 'androidx.work:work-runtime:2.7.1'\n\nimplementation 'com.google.android.play:core:1.10.3'\n\nimplementation 'com.google.firebase:firebase-core:21.1.1'\nimplementation 'com.google.firebase:firebase-analytics:21.2.0'\nimplementation 'com.google.firebase:firebase-messaging:23.1.0'\nimplementation 'com.google.firebase:firebase-config:21.2.0'\nimplementation 'com.google.firebase:firebase-ads:21.3.0'\nimplementation 'com.google.firebase:firebase-crashlytics:18.3.1'\n\nimplementation 'com.android.volley:volley:1.2.1'\nimplementation 'com.google.code.gson:gson:2.8.6'\nimplementation 'org.jsoup:jsoup:1.11.3'\nimplementation 'com.facebook.shimmer:shimmer:0.4.0'\nimplementation 'com.synnapps:carouselview:0.1.5'\nimplementation 'com.squareup.picasso:picasso:2.5.2'\nimplementation 'saschpe.android:customtabs:2.0.3'\nimplementation 'com.mikhaellopez:circularfillableloaders:1.3.2'\nimplementation 'io.github.inflationx:calligraphy3:3.1.1'\nimplementation 'io.github.inflationx:viewpump:2.0.3'\n}\n</code></pre>\n<p>For your information splash_background.xml is available in drawable folder, gradient_splash.xml is available in drawable folder and splash_icon.png is available in drawable-ldpi, drawable-mdpi, drawable-hdpi, drawable-xhdpi, drawable-xxhdpi, drawable-xxxhdpi folders.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":339859,"reputation":13331,"user_id":669576,"accept_rate":85,"display_name":"001"},"score":1,"creation_date":1689004258,"post_id":76655348,"comment_id":135148484,"body_markdown":"`sarr` is declared inside the `if` block, but you are trying to use it outside of its scope.","body":"<code>sarr</code> is declared inside the <code>if</code> block, but you are trying to use it outside of its scope."},{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1689004331,"post_id":76655348,"comment_id":135148506,"body_markdown":"`sarr` is declared inside the if-statement, it exist only there, read up on variable scope. And `c` is only declared, it&#39;s initialized inside the `if`, there are cases when it might not get initialized, you will get compilation error about it as well. Last, but not least, take care to properly format your code, those errors would be obvious, if the code was formatted correctly.","body":"<code>sarr</code> is declared inside the if-statement, it exist only there, read up on variable scope. And <code>c</code> is only declared, it&#39;s initialized inside the <code>if</code>, there are cases when it might not get initialized, you will get compilation error about it as well. Last, but not least, take care to properly format your code, those errors would be obvious, if the code was formatted correctly."}],"owner":{"account_id":26710645,"reputation":1,"user_id":20316080,"display_name":"Sagarika"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1689004561,"answer_count":0,"score":0,"last_activity_date":1689004093,"creation_date":1689003953,"question_id":76655348,"body_markdown":"This is my code .. When I am compiling it it says sarr is an undeclared variable...please help me sort this problem out.\r\n```\r\nimport java.util.*;\r\npublic class StringPractise2 {\r\n  public static void main() {\r\n    String temp;\r\n    Scanner sc = new Scanner(System.in);\r\n    System.out.println(&quot;Enter the sentence:&quot;);\r\n    String s = sc.nextLine();\r\n    s = s.toUpperCase();\r\n    int l = s.length();\r\n    int c; //String sarr[];\r\n    if (s.charAt(l - 1) == &#39;@&#39; || s.charAt(l - 1) == &#39;.&#39;) {\r\n      StringTokenizer str = new StringTokenizer(s, &quot;@.&quot;);\r\n      c = str.countTokens();\r\n      String sarr[] = new String[c];\r\n      for (int i = 0; i &lt; c; i++)\r\n        sarr[i] = str.nextToken();\r\n      for (int i = 0; i &lt; c; i++) {\r\n        for (int j = i + 1; j &lt; c; j++) {\r\n          if (sarr[i].compareTo(sarr[j]) &gt; 0) {\r\n            temp = sarr[i];\r\n            sarr[i] = sarr[j];\r\n            sarr[j] = temp;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    System.out.println(&quot;The original sentence:&quot; + s);\r\n    System.out.println(&quot;The array is alphabetical order:&quot;);\r\n    for (int i = 0; i &lt; c; i++) {\r\n      System.out.println(sarr[i] + &quot; &quot;);\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n\r\n","title":"I am arranging the words in the sentence in alphabetical order","body":"<p>This is my code .. When I am compiling it it says sarr is an undeclared variable...please help me sort this problem out.</p>\n<pre><code>import java.util.*;\npublic class StringPractise2 {\n  public static void main() {\n    String temp;\n    Scanner sc = new Scanner(System.in);\n    System.out.println(&quot;Enter the sentence:&quot;);\n    String s = sc.nextLine();\n    s = s.toUpperCase();\n    int l = s.length();\n    int c; //String sarr[];\n    if (s.charAt(l - 1) == '@' || s.charAt(l - 1) == '.') {\n      StringTokenizer str = new StringTokenizer(s, &quot;@.&quot;);\n      c = str.countTokens();\n      String sarr[] = new String[c];\n      for (int i = 0; i &lt; c; i++)\n        sarr[i] = str.nextToken();\n      for (int i = 0; i &lt; c; i++) {\n        for (int j = i + 1; j &lt; c; j++) {\n          if (sarr[i].compareTo(sarr[j]) &gt; 0) {\n            temp = sarr[i];\n            sarr[i] = sarr[j];\n            sarr[j] = temp;\n          }\n        }\n      }\n    }\n    System.out.println(&quot;The original sentence:&quot; + s);\n    System.out.println(&quot;The array is alphabetical order:&quot;);\n    for (int i = 0; i &lt; c; i++) {\n      System.out.println(sarr[i] + &quot; &quot;);\n    }\n  }\n}\n</code></pre>\n"},{"tags":["java","xslt","xpath"],"answers":[{"tags":[],"owner":{"account_id":10030,"reputation":333803,"user_id":18771,"accept_rate":87,"display_name":"Tomalak"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1689004092,"creation_date":1359884337,"answer_id":14671163,"question_id":14670936,"body_markdown":"    &lt;xsl:stylesheet version=&quot;2.0&quot;\r\n        xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;\r\n        xmlns:a=&quot;http://example.com/abc&quot;\r\n        exclude-result-prefixes=&quot;a&quot;\r\n    &gt;\r\n        &lt;xsl:output method=&quot;xml&quot; indent=&quot;yes&quot;/&gt;\r\n    \r\n        &lt;xsl:template match=&quot;@* | node()&quot;&gt;\r\n            &lt;xsl:copy&gt;\r\n              &lt;xsl:apply-templates select=&quot;@* | node()&quot; /&gt;\r\n            &lt;/xsl:copy&gt;\r\n        &lt;/xsl:template&gt;\r\n    \r\n        &lt;xsl:template match=&quot;a:* | @a:*&quot; /&gt;\r\n    &lt;/xsl:stylesheet&gt;\r\n\r\nEmpty templates match nodes but do not output anything, effectively removing what they match.","title":"XSLT: how can I filter out all elements with a specific namespace","body":"<pre><code>&lt;xsl:stylesheet version=&quot;2.0&quot;\n    xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;\n    xmlns:a=&quot;http://example.com/abc&quot;\n    exclude-result-prefixes=&quot;a&quot;\n&gt;\n    &lt;xsl:output method=&quot;xml&quot; indent=&quot;yes&quot;/&gt;\n\n    &lt;xsl:template match=&quot;@* | node()&quot;&gt;\n        &lt;xsl:copy&gt;\n          &lt;xsl:apply-templates select=&quot;@* | node()&quot; /&gt;\n        &lt;/xsl:copy&gt;\n    &lt;/xsl:template&gt;\n\n    &lt;xsl:template match=&quot;a:* | @a:*&quot; /&gt;\n&lt;/xsl:stylesheet&gt;\n</code></pre>\n<p>Empty templates match nodes but do not output anything, effectively removing what they match.</p>\n"},{"tags":[],"owner":{"account_id":216950,"reputation":20103,"user_id":472495,"accept_rate":92,"display_name":"halfer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1688938206,"creation_date":1688938206,"answer_id":76649604,"question_id":14670936,"body_markdown":"_(Posted solution on behalf of the question author to move the answer to the answer space)_.\r\n\r\nMany thanks to Tomalak for the correct XSL syntax, and to Ian Roberts for pointing out that in order to use namespaces in my XSLT, I need to call &quot;setNamespaceAware(true)&quot; at the very beginning, in my DocumentBuilderFactory.\r\n\r\nXSLT (thanks to Tomalak):\r\n\r\n    &lt;xsl:stylesheet version=&quot;2.0&quot;\r\n        xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;\r\n        xmlns:a=&quot;http://example.com/abc&quot;\r\n        exclude-result-prefixes=&quot;a&quot;\r\n    &gt;\r\n        &lt;xsl:output method=&quot;xml&quot; indent=&quot;yes&quot;/&gt;\r\n    \r\n        &lt;xsl:template match=&quot;@* | node()&quot;&gt;\r\n            &lt;xsl:copy&gt;\r\n              &lt;xsl:apply-templates select=&quot;@* | node()&quot; /&gt;\r\n            &lt;/xsl:copy&gt;\r\n        &lt;/xsl:template&gt;\r\n    \r\n        &lt;xsl:template match=&quot;a:* | @a:*&quot; /&gt;\r\n    &lt;/xsl:stylesheet&gt;\r\n\r\nJava program that successfully does the XSLT filtering by namespace:\r\n\r\n    import java.io.*;\r\n    import org.w3c.dom.*; // XML DOM\r\n    import javax.xml.parsers.*; // DocumentBuilder, etc\r\n    import javax.xml.transform.*; // Transformer, etc\r\n    import javax.xml.transform.stream.*; // StreamResult, StreamSource, etc\r\n    import javax.xml.transform.dom.DOMSource;\r\n    \r\n    public class Test {\r\n\r\n        public static void main(String[] args) {\r\n            new Test().testZoo();\r\n        }\r\n\r\n\tpublic void testZoo () {\r\n\t\tString zooXml = Test.readXmlFile (&quot;zoo.xml&quot;);\r\n\t\tif (zooXml == null)\r\n\t\t\treturn;\r\n\t\t\r\n\t\ttry {\r\n\t\t\t// Create a new document builder factory, and make sure it[s namespace-aware \r\n\t\t\tDocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();\r\n\t\t\tdbf.setNamespaceAware(true);\r\n\t\t\tDocumentBuilder docBuilder = dbf.newDocumentBuilder ();\r\n\r\n\t\t\t// Read XFDD input string into DOM\r\n\t\t\tDocument xfddDoc = \r\n\t\t\t\tdocBuilder.parse(new StringBufferInputStream (zooXml));\r\n\t\t\r\n\t\t\t// Filter out all elements in &quot;http://example.com/abc&quot; namespace\r\n\t\t\tStreamSource styleSource = new StreamSource (new File (&quot;zoo.xsl&quot;));\r\n\t\t\tTransformer transformer =\r\n\t\t\t\tTransformerFactory.newInstance().newTransformer (styleSource);\r\n\t\t\r\n\t\t\t// Convert final DOM back to String\r\n\t\t\tStringWriter buffer = new StringWriter ();\r\n\t\t\ttransformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION,  &quot;yes&quot;); // Remember: we want to insert this XML as a subnode\r\n\t\t\ttransformer.setOutputProperty(OutputKeys.INDENT,  &quot;yes&quot;);\r\n\t\t\ttransformer.transform(new DOMSource(xfddDoc), new StreamResult (buffer));\r\n\t\t\tString translatedXml = buffer.toString();\r\n\t\t}\r\n\t\tcatch (Exception e) {\r\n\t\t\tSystem.out.println (&quot;convertTransactionData error: &quot; + e.getMessage());\r\n\t\t\te.printStackTrace ();\r\n\t\t}\r\n\t}\r\n","title":"XSLT: how can I filter out all elements with a specific namespace","body":"<p><em>(Posted solution on behalf of the question author to move the answer to the answer space)</em>.</p>\n<p>Many thanks to Tomalak for the correct XSL syntax, and to Ian Roberts for pointing out that in order to use namespaces in my XSLT, I need to call &quot;setNamespaceAware(true)&quot; at the very beginning, in my DocumentBuilderFactory.</p>\n<p>XSLT (thanks to Tomalak):</p>\n<pre><code>&lt;xsl:stylesheet version=&quot;2.0&quot;\n    xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;\n    xmlns:a=&quot;http://example.com/abc&quot;\n    exclude-result-prefixes=&quot;a&quot;\n&gt;\n    &lt;xsl:output method=&quot;xml&quot; indent=&quot;yes&quot;/&gt;\n\n    &lt;xsl:template match=&quot;@* | node()&quot;&gt;\n        &lt;xsl:copy&gt;\n          &lt;xsl:apply-templates select=&quot;@* | node()&quot; /&gt;\n        &lt;/xsl:copy&gt;\n    &lt;/xsl:template&gt;\n\n    &lt;xsl:template match=&quot;a:* | @a:*&quot; /&gt;\n&lt;/xsl:stylesheet&gt;\n</code></pre>\n<p>Java program that successfully does the XSLT filtering by namespace:</p>\n<pre><code>import java.io.*;\nimport org.w3c.dom.*; // XML DOM\nimport javax.xml.parsers.*; // DocumentBuilder, etc\nimport javax.xml.transform.*; // Transformer, etc\nimport javax.xml.transform.stream.*; // StreamResult, StreamSource, etc\nimport javax.xml.transform.dom.DOMSource;\n\npublic class Test {\n\n    public static void main(String[] args) {\n        new Test().testZoo();\n    }\n\npublic void testZoo () {\n    String zooXml = Test.readXmlFile (&quot;zoo.xml&quot;);\n    if (zooXml == null)\n        return;\n    \n    try {\n        // Create a new document builder factory, and make sure it[s namespace-aware \n        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();\n        dbf.setNamespaceAware(true);\n        DocumentBuilder docBuilder = dbf.newDocumentBuilder ();\n\n        // Read XFDD input string into DOM\n        Document xfddDoc = \n            docBuilder.parse(new StringBufferInputStream (zooXml));\n    \n        // Filter out all elements in &quot;http://example.com/abc&quot; namespace\n        StreamSource styleSource = new StreamSource (new File (&quot;zoo.xsl&quot;));\n        Transformer transformer =\n            TransformerFactory.newInstance().newTransformer (styleSource);\n    \n        // Convert final DOM back to String\n        StringWriter buffer = new StringWriter ();\n        transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION,  &quot;yes&quot;); // Remember: we want to insert this XML as a subnode\n        transformer.setOutputProperty(OutputKeys.INDENT,  &quot;yes&quot;);\n        transformer.transform(new DOMSource(xfddDoc), new StreamResult (buffer));\n        String translatedXml = buffer.toString();\n    }\n    catch (Exception e) {\n        System.out.println (&quot;convertTransactionData error: &quot; + e.getMessage());\n        e.printStackTrace ();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":184870,"reputation":118711,"user_id":421195,"accept_rate":83,"display_name":"paulsm4"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2067,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":14671163,"answer_count":2,"score":4,"last_activity_date":1689004092,"creation_date":1359882255,"question_id":14670936,"body_markdown":"I have an XML file that looks like this:\r\n\r\n    &lt;zoo xmlns=&quot;http://myurl.com/wsdl/myservice&quot;&gt;\r\n      &lt;animal&gt;elephant&lt;/animal&gt;\r\n      &lt;exhibit&gt;\r\n        &lt;animal&gt;walrus&lt;/animal&gt;\r\n        &lt;animal&gt;sea otter&lt;/animal&gt;\r\n        &lt;trainer xmlns=&quot;http://example.com/abc&quot;&gt;Jack&lt;/trainer&gt;\r\n      &lt;/exhibit&gt;\r\n      &lt;exhibit xmlns=&quot;http://example.com/abc&quot;&gt;\r\n        &lt;animal&gt;lion&lt;/animal&gt;\r\n        &lt;animal&gt;tiger&lt;/animal&gt;\r\n      &lt;/exhibit&gt;\r\n    &lt;/zoo&gt;\r\n\r\nHow can I write an XSLT stylesheet that filters out all elements and/or all node trees in the &quot;http://example.com/abc&quot; namespace?\r\n\r\nDesired result XML:\r\n\r\n    &lt;zoo xmlns=&quot;http://myurl.com/wsdl/myservice&quot;&gt;\r\n      &lt;animal&gt;elephant&lt;/animal&gt;\r\n      &lt;exhibit&gt;\r\n        &lt;animal&gt;walrus&lt;/animal&gt;\r\n        &lt;animal&gt;sea otter&lt;/animal&gt;\r\n      &lt;/exhibit&gt;\r\n    &lt;/zoo&gt;\r\n\r\nI&#39;m trying something like this, but it just isn&#39;t working:\r\n\r\nFailed XSLT:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;xsl:stylesheet version=&quot;2.0&quot;\r\n    \txmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;\r\n    \txmlns:a=&quot;http://example.com/abc&quot;\r\n    \texclude-result-prefixes=&quot;a&quot;&gt;\r\n        &lt;xsl:output method=&quot;xml&quot; indent=&quot;yes&quot;/&gt;\r\n     \t&lt;xsl:template match=&quot;@*|node()&quot;&gt;\r\n    \t\t&lt;xsl:copy&gt;\r\n    \t\t  &lt;xsl:apply-templates select=&quot;@*|node()&quot; /&gt;\r\n    \t\t&lt;/xsl:copy&gt;\r\n    \t&lt;/xsl:template&gt;\r\n    &lt;/xsl:stylesheet&gt;\r\n\r\nUpdate\r\n---\r\n\r\nI got a good suggestion, but it&#39;s still not working. Here&#39;s the Java code I&#39;m using to do the XSLT translation:\r\n\r\n    import java.io.*;\r\n    import org.w3c.dom.*; // XML DOM\r\n    import javax.xml.parsers.*; // DocumentBuilder, etc\r\n    import javax.xml.transform.*; // Transformer, etc\r\n    import javax.xml.transform.stream.*; // StreamResult, StreamSource, etc\r\n    import javax.xml.transform.dom.DOMSource;\r\n    \r\n    public class Test {\r\n\r\n        public static void main(String[] args) {\r\n            new Test().testZoo();\r\n        }\r\n\r\n    \tpublic void testZoo () {\r\n    System.out.println (&quot;Reading zoo.xml&quot;);\t\t\r\n    \t\tString zooXml = MassageXfddXml.readXmlFile (&quot;zoo.xml&quot;);\r\n    \t\tif (zooXml == null)\r\n    \t\t\treturn;\r\n    \t\t\r\n    \t\ttry {\r\n    \t\t\t// Read XFDD input string into DOM\r\n    \t\t\tDocumentBuilder docBuilder =\r\n    \t\t\t\tDocumentBuilderFactory.newInstance().newDocumentBuilder ();\r\n    \t\t\tDocument xfddDoc = \r\n    \t\t\t\tdocBuilder.parse(new StringBufferInputStream (zooXml));\r\n    \t\t\r\n    \t\t\t// Filter out all elements in &quot;http://example.com/abc&quot; namespace\r\n    \t\t\tStreamSource styleSource = new StreamSource (new File (&quot;zoo.xsl&quot;));\r\n    \t\t\tTransformer transformer =\r\n    \t\t\t\tTransformerFactory.newInstance().newTransformer (styleSource);\r\n    \t\t\r\n    \t\t\t// Convert final DOM back to String\r\n    \t\t\tStringWriter buffer = new StringWriter ();\r\n    \t\t\ttransformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION,  &quot;yes&quot;); // Remember: we want to insert this XML as a subnode\r\n    \t\t\ttransformer.setOutputProperty(OutputKeys.INDENT,  &quot;yes&quot;);\r\n    \t\t\ttransformer.transform(new DOMSource(xfddDoc), new StreamResult (buffer));\r\n    \t\t\tString translatedXml = buffer.toString();\r\n    System.out.println (&quot;initial XML:\\n&quot; + zooXml + &quot;\\nfinal XML:\\n&quot; + translatedXml);\t\t\t\r\n    \t\t}\r\n    \t\tcatch (Exception e) {\r\n    \t\t\tSystem.out.println (&quot;convertTransactionData error: &quot; + e.getMessage());\r\n    \t\t\te.printStackTrace ();\r\n    \t\t}\r\n    \t}\r\n\r\n\r\nHere&#39;s the new stylesheet:\r\n\r\n    &lt;xsl:stylesheet version=&quot;2.0&quot;\r\n        xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;\r\n        xmlns:a=&quot;http://example.com/abc&quot;\r\n        exclude-result-prefixes=&quot;a&quot;\r\n    &gt;\r\n        &lt;xsl:output method=&quot;xml&quot; indent=&quot;yes&quot;/&gt;\r\n    \r\n        &lt;xsl:template match=&quot;@* | node()&quot;&gt;\r\n            &lt;xsl:copy&gt;\r\n              &lt;xsl:apply-templates select=&quot;@* | node()&quot; /&gt;\r\n            &lt;/xsl:copy&gt;\r\n        &lt;/xsl:template&gt;\r\n    \r\n        &lt;xsl:template match=&quot;a:* | @a:*&quot; /&gt;\r\n    &lt;/xsl:stylesheet&gt;\r\n\r\nAnd here&#39;s the output:\r\n\r\n    Reading zoo.xml\r\n    bytes read=337\r\n    initial XML:\r\n    &lt;zoo xmlns=&quot;http://myurl.com/wsdl/myservice&quot;&gt;\r\n      &lt;animal&gt;elephant&lt;/animal&gt;\r\n      &lt;exhibit&gt;\r\n        &lt;animal&gt;walrus&lt;/animal&gt;\r\n        &lt;animal&gt;sea otter&lt;/animal&gt;\r\n        &lt;trainer xmlns=&quot;http://example.com/abc&quot;&gt;Jack&lt;/trainer&gt;\r\n      &lt;/exhibit&gt;\r\n      &lt;exhibit xmlns=&quot;http://example.com/abc&quot;&gt;\r\n        &lt;animal&gt;lion&lt;/animal&gt;\r\n        &lt;animal&gt;tiger&lt;/animal&gt;\r\n      &lt;/exhibit&gt;\r\n    &lt;/zoo&gt;\r\n    \r\n    final XML:\r\n    &lt;zoo xmlns=&quot;http://myurl.com/wsdl/myservice&quot;&gt;\r\n      &lt;animal&gt;elephant&lt;/animal&gt;\r\n      &lt;exhibit&gt;\r\n        &lt;animal&gt;walrus&lt;/animal&gt;\r\n        &lt;animal&gt;sea otter&lt;/animal&gt;\r\n        &lt;trainer xmlns=&quot;http://example.com/abc&quot;&gt;Jack&lt;/trainer&gt;\r\n      &lt;/exhibit&gt;\r\n      &lt;exhibit xmlns=&quot;http://example.com/abc&quot;&gt;\r\n        &lt;animal&gt;lion&lt;/animal&gt;\r\n        &lt;animal&gt;tiger&lt;/animal&gt;\r\n      &lt;/exhibit&gt;\r\n    &lt;/zoo&gt;\r\n","title":"XSLT: how can I filter out all elements with a specific namespace","body":"<p>I have an XML file that looks like this:</p>\n<pre><code>&lt;zoo xmlns=&quot;http://myurl.com/wsdl/myservice&quot;&gt;\n  &lt;animal&gt;elephant&lt;/animal&gt;\n  &lt;exhibit&gt;\n    &lt;animal&gt;walrus&lt;/animal&gt;\n    &lt;animal&gt;sea otter&lt;/animal&gt;\n    &lt;trainer xmlns=&quot;http://example.com/abc&quot;&gt;Jack&lt;/trainer&gt;\n  &lt;/exhibit&gt;\n  &lt;exhibit xmlns=&quot;http://example.com/abc&quot;&gt;\n    &lt;animal&gt;lion&lt;/animal&gt;\n    &lt;animal&gt;tiger&lt;/animal&gt;\n  &lt;/exhibit&gt;\n&lt;/zoo&gt;\n</code></pre>\n<p>How can I write an XSLT stylesheet that filters out all elements and/or all node trees in the &quot;http://example.com/abc&quot; namespace?</p>\n<p>Desired result XML:</p>\n<pre><code>&lt;zoo xmlns=&quot;http://myurl.com/wsdl/myservice&quot;&gt;\n  &lt;animal&gt;elephant&lt;/animal&gt;\n  &lt;exhibit&gt;\n    &lt;animal&gt;walrus&lt;/animal&gt;\n    &lt;animal&gt;sea otter&lt;/animal&gt;\n  &lt;/exhibit&gt;\n&lt;/zoo&gt;\n</code></pre>\n<p>I'm trying something like this, but it just isn't working:</p>\n<p>Failed XSLT:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;xsl:stylesheet version=&quot;2.0&quot;\n    xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;\n    xmlns:a=&quot;http://example.com/abc&quot;\n    exclude-result-prefixes=&quot;a&quot;&gt;\n    &lt;xsl:output method=&quot;xml&quot; indent=&quot;yes&quot;/&gt;\n    &lt;xsl:template match=&quot;@*|node()&quot;&gt;\n        &lt;xsl:copy&gt;\n          &lt;xsl:apply-templates select=&quot;@*|node()&quot; /&gt;\n        &lt;/xsl:copy&gt;\n    &lt;/xsl:template&gt;\n&lt;/xsl:stylesheet&gt;\n</code></pre>\n<h2>Update</h2>\n<p>I got a good suggestion, but it's still not working. Here's the Java code I'm using to do the XSLT translation:</p>\n<pre><code>import java.io.*;\nimport org.w3c.dom.*; // XML DOM\nimport javax.xml.parsers.*; // DocumentBuilder, etc\nimport javax.xml.transform.*; // Transformer, etc\nimport javax.xml.transform.stream.*; // StreamResult, StreamSource, etc\nimport javax.xml.transform.dom.DOMSource;\n\npublic class Test {\n\n    public static void main(String[] args) {\n        new Test().testZoo();\n    }\n\n    public void testZoo () {\nSystem.out.println (&quot;Reading zoo.xml&quot;);     \n        String zooXml = MassageXfddXml.readXmlFile (&quot;zoo.xml&quot;);\n        if (zooXml == null)\n            return;\n        \n        try {\n            // Read XFDD input string into DOM\n            DocumentBuilder docBuilder =\n                DocumentBuilderFactory.newInstance().newDocumentBuilder ();\n            Document xfddDoc = \n                docBuilder.parse(new StringBufferInputStream (zooXml));\n        \n            // Filter out all elements in &quot;http://example.com/abc&quot; namespace\n            StreamSource styleSource = new StreamSource (new File (&quot;zoo.xsl&quot;));\n            Transformer transformer =\n                TransformerFactory.newInstance().newTransformer (styleSource);\n        \n            // Convert final DOM back to String\n            StringWriter buffer = new StringWriter ();\n            transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION,  &quot;yes&quot;); // Remember: we want to insert this XML as a subnode\n            transformer.setOutputProperty(OutputKeys.INDENT,  &quot;yes&quot;);\n            transformer.transform(new DOMSource(xfddDoc), new StreamResult (buffer));\n            String translatedXml = buffer.toString();\nSystem.out.println (&quot;initial XML:\\n&quot; + zooXml + &quot;\\nfinal XML:\\n&quot; + translatedXml);          \n        }\n        catch (Exception e) {\n            System.out.println (&quot;convertTransactionData error: &quot; + e.getMessage());\n            e.printStackTrace ();\n        }\n    }\n</code></pre>\n<p>Here's the new stylesheet:</p>\n<pre><code>&lt;xsl:stylesheet version=&quot;2.0&quot;\n    xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;\n    xmlns:a=&quot;http://example.com/abc&quot;\n    exclude-result-prefixes=&quot;a&quot;\n&gt;\n    &lt;xsl:output method=&quot;xml&quot; indent=&quot;yes&quot;/&gt;\n\n    &lt;xsl:template match=&quot;@* | node()&quot;&gt;\n        &lt;xsl:copy&gt;\n          &lt;xsl:apply-templates select=&quot;@* | node()&quot; /&gt;\n        &lt;/xsl:copy&gt;\n    &lt;/xsl:template&gt;\n\n    &lt;xsl:template match=&quot;a:* | @a:*&quot; /&gt;\n&lt;/xsl:stylesheet&gt;\n</code></pre>\n<p>And here's the output:</p>\n<pre><code>Reading zoo.xml\nbytes read=337\ninitial XML:\n&lt;zoo xmlns=&quot;http://myurl.com/wsdl/myservice&quot;&gt;\n  &lt;animal&gt;elephant&lt;/animal&gt;\n  &lt;exhibit&gt;\n    &lt;animal&gt;walrus&lt;/animal&gt;\n    &lt;animal&gt;sea otter&lt;/animal&gt;\n    &lt;trainer xmlns=&quot;http://example.com/abc&quot;&gt;Jack&lt;/trainer&gt;\n  &lt;/exhibit&gt;\n  &lt;exhibit xmlns=&quot;http://example.com/abc&quot;&gt;\n    &lt;animal&gt;lion&lt;/animal&gt;\n    &lt;animal&gt;tiger&lt;/animal&gt;\n  &lt;/exhibit&gt;\n&lt;/zoo&gt;\n\nfinal XML:\n&lt;zoo xmlns=&quot;http://myurl.com/wsdl/myservice&quot;&gt;\n  &lt;animal&gt;elephant&lt;/animal&gt;\n  &lt;exhibit&gt;\n    &lt;animal&gt;walrus&lt;/animal&gt;\n    &lt;animal&gt;sea otter&lt;/animal&gt;\n    &lt;trainer xmlns=&quot;http://example.com/abc&quot;&gt;Jack&lt;/trainer&gt;\n  &lt;/exhibit&gt;\n  &lt;exhibit xmlns=&quot;http://example.com/abc&quot;&gt;\n    &lt;animal&gt;lion&lt;/animal&gt;\n    &lt;animal&gt;tiger&lt;/animal&gt;\n  &lt;/exhibit&gt;\n&lt;/zoo&gt;\n</code></pre>\n"},{"tags":["java","spring-boot","pagination","spring-webflux","spring-data-r2dbc"],"answers":[{"tags":[],"owner":{"account_id":11880376,"reputation":1028,"user_id":8694239,"display_name":"Andrianekena Moise"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689004068,"creation_date":1689004068,"answer_id":76655365,"question_id":76654530,"body_markdown":"1. searchParam should be corretly substituted in the query. `:searchParam` is a correct way to refere to a parameter in the context of spring data query.\r\n2. In the context of spring data r2dbc, the query `select f from file f ...` won&#39;t work&#39;. This is a JPQL syntax related to spring data JPA. With spring data r2dbc, the annnotation @Query is expecting a native sql query (`select * from file`). There is no ORM mapping. So a mapper should be implemented manually for a join query.","title":"Pagination with filter in Spring Data R2DBC","body":"<ol>\n<li>searchParam should be corretly substituted in the query. <code>:searchParam</code> is a correct way to refere to a parameter in the context of spring data query.</li>\n<li>In the context of spring data r2dbc, the query <code>select f from file f ...</code> won't work'. This is a JPQL syntax related to spring data JPA. With spring data r2dbc, the annnotation @Query is expecting a native sql query (<code>select * from file</code>). There is no ORM mapping. So a mapper should be implemented manually for a join query.</li>\n</ol>\n"}],"owner":{"account_id":3386007,"reputation":647,"user_id":2841947,"accept_rate":50,"display_name":"Rahul"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":342,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689004068,"creation_date":1688997746,"question_id":76654530,"body_markdown":"I have 2 tables in postgres DB:\r\n\r\nsystem:\r\nid,\r\nsystem_id,\r\nsystem_title\r\n\r\nfile:\r\nid,\r\nfile_name,\r\nuploaded_date_time,\r\nsystem_id references id column of system table.\r\n...etc.\r\n\r\n\r\nAll the system and file details from DB are shown to the user on home page of the application. User can use a search option to search for the system title or file name. I need to return all system and file details where the given search_parameter is present in system_title or file_name.\r\n\r\nWe are using Spring webflux and Spring Data R2DBC and code looks something like below:\r\n\r\nRequestHandler method:\r\n\r\n    public Mono&lt;ServerResponse&gt; handleFilteredFileList(final ServerRequest request){\r\n      return ServerResponse.ok()\r\n    .contentType(APPLICATIOn_JSON)\r\n    .body(Bodyinserters.fromProducer(service.filterFileList(request.queryParam(&quot;searchParam&quot;).get(), PageRequest.of(Integer.parseInt(request.queryParam(&quot;page&quot;).get())\r\n    , Integer.parseInt(request.queryParam(&quot;size&quot;).get()))),Page.class));\r\n    \r\n    }\r\n\r\n\r\nService method(here uploadDateTime is the property of the Java entity object):\r\n\r\n    {\r\n      repository.getFilteredFileList(searchParam, pageRequest.withSort(Sort.by(&quot;uploadDateTime&quot;).descending()))\r\n    .collectList()\r\n    .zipWith(repository.count())\r\n    .flatMap(e-&gt; Mono.just(new PageImpl&lt;&gt;(e.getT1(), pageRequest. e.getT2())));\r\n    }\r\n\r\nRepository method:\r\n\r\n    @Query(&quot;select f from file f inner join system p on f.project_id=p.id where f.is_deleted=false AND (f.file_name LIKE CONCAT(&#39;%&#39;, :searchParam, &#39;%&#39;) OR p.syetem_title LIKE CONCAT(&#39;%&#39;, :searchParam, &#39;%&#39;))&quot;)\r\n    Flux&lt;File&gt; getFilteredFileList(@Param(&quot;searchParam&quot; String searchParam, Pageable pageable))\r\n\r\nI&#39;m facing 2 issues:\r\n\r\n1. I&#39;m not sure if searchParam value is correctly substituted in the query at runtime/execution.\r\n2. This code isn&#39;t working as expected. I&#39;m getting list of null elements.\r\n\r\nI tried to implement it by adding LIMIT and OFFSET to the query itself but it didn&#39;t work as well.\r\n\r\n\r\nAny idea what I might be missing here?\r\n\r\nThanks in advance!","title":"Pagination with filter in Spring Data R2DBC","body":"<p>I have 2 tables in postgres DB:</p>\n<p>system:\nid,\nsystem_id,\nsystem_title</p>\n<p>file:\nid,\nfile_name,\nuploaded_date_time,\nsystem_id references id column of system table.\n...etc.</p>\n<p>All the system and file details from DB are shown to the user on home page of the application. User can use a search option to search for the system title or file name. I need to return all system and file details where the given search_parameter is present in system_title or file_name.</p>\n<p>We are using Spring webflux and Spring Data R2DBC and code looks something like below:</p>\n<p>RequestHandler method:</p>\n<pre><code>public Mono&lt;ServerResponse&gt; handleFilteredFileList(final ServerRequest request){\n  return ServerResponse.ok()\n.contentType(APPLICATIOn_JSON)\n.body(Bodyinserters.fromProducer(service.filterFileList(request.queryParam(&quot;searchParam&quot;).get(), PageRequest.of(Integer.parseInt(request.queryParam(&quot;page&quot;).get())\n, Integer.parseInt(request.queryParam(&quot;size&quot;).get()))),Page.class));\n\n}\n</code></pre>\n<p>Service method(here uploadDateTime is the property of the Java entity object):</p>\n<pre><code>{\n  repository.getFilteredFileList(searchParam, pageRequest.withSort(Sort.by(&quot;uploadDateTime&quot;).descending()))\n.collectList()\n.zipWith(repository.count())\n.flatMap(e-&gt; Mono.just(new PageImpl&lt;&gt;(e.getT1(), pageRequest. e.getT2())));\n}\n</code></pre>\n<p>Repository method:</p>\n<pre><code>@Query(&quot;select f from file f inner join system p on f.project_id=p.id where f.is_deleted=false AND (f.file_name LIKE CONCAT('%', :searchParam, '%') OR p.syetem_title LIKE CONCAT('%', :searchParam, '%'))&quot;)\nFlux&lt;File&gt; getFilteredFileList(@Param(&quot;searchParam&quot; String searchParam, Pageable pageable))\n</code></pre>\n<p>I'm facing 2 issues:</p>\n<ol>\n<li>I'm not sure if searchParam value is correctly substituted in the query at runtime/execution.</li>\n<li>This code isn't working as expected. I'm getting list of null elements.</li>\n</ol>\n<p>I tried to implement it by adding LIMIT and OFFSET to the query itself but it didn't work as well.</p>\n<p>Any idea what I might be missing here?</p>\n<p>Thanks in advance!</p>\n"},{"tags":["java","regex"],"answers":[{"tags":[],"owner":{"account_id":1063012,"reputation":71986,"user_id":1064245,"accept_rate":82,"display_name":"M A"},"down_vote_count":0,"up_vote_count":29,"is_accepted":true,"score":29,"last_activity_date":1456519062,"creation_date":1456517141,"answer_id":35660761,"question_id":35660688,"body_markdown":"Try the following:\r\n\r\n    Pattern.matches(&quot;.*\\\\p{InCyrillic}.*&quot;, text)\r\n\r\nYou may also avoid a regex and use the class [`Character.UnicodeBlock`](https://docs.oracle.com/javase/7/docs/api/java/lang/Character.UnicodeBlock.html):\r\n\r\n    for(int i = 0; i &lt; text.length(); i++) {\r\n\t\tif(Character.UnicodeBlock.of(text.charAt(i)).equals(Character.UnicodeBlock.CYRILLIC)) {\r\n\t\t\t// contains Cyrillic\r\n\t\t}\r\n\t}","title":"How to detect in Java if string contains Cyrillic?","body":"<p>Try the following:</p>\n\n<pre><code>Pattern.matches(\".*\\\\p{InCyrillic}.*\", text)\n</code></pre>\n\n<p>You may also avoid a regex and use the class <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Character.UnicodeBlock.html\" rel=\"noreferrer\"><code>Character.UnicodeBlock</code></a>:</p>\n\n<pre><code>for(int i = 0; i &lt; text.length(); i++) {\n    if(Character.UnicodeBlock.of(text.charAt(i)).equals(Character.UnicodeBlock.CYRILLIC)) {\n        // contains Cyrillic\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5532882,"reputation":103,"user_id":4392303,"accept_rate":100,"display_name":"Alexander Druzhynin"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1565897561,"creation_date":1565897561,"answer_id":57515163,"question_id":35660688,"body_markdown":"Here is another way to do the same with streams in java 8:\r\n\r\n    text.chars()\r\n            .mapToObj(Character.UnicodeBlock::of)\r\n            .filter(Character.UnicodeBlock.CYRILLIC::equals)\r\n            .findAny()\r\n            .ifPresent(character -&gt; ));\r\nOr another way, keeping the index:\r\n\r\n    char[] textChars = text.toCharArray();\r\n    IntStream.range(0, textChars.length)\r\n                     .filter(index -&gt; Character.UnicodeBlock.of(textChars[index])\r\n                                    .equals(Character.UnicodeBlock.CYRILLIC))\r\n                     .findAny() // can use findFirst()\r\n                     .ifPresent(index -&gt; );\r\n*Please note:* I&#39;m using char array here rather than String due to performance advantage of getting an element by index.","title":"How to detect in Java if string contains Cyrillic?","body":"<p>Here is another way to do the same with streams in java 8:</p>\n\n<pre><code>text.chars()\n        .mapToObj(Character.UnicodeBlock::of)\n        .filter(Character.UnicodeBlock.CYRILLIC::equals)\n        .findAny()\n        .ifPresent(character -&gt; ));\n</code></pre>\n\n<p>Or another way, keeping the index:</p>\n\n<pre><code>char[] textChars = text.toCharArray();\nIntStream.range(0, textChars.length)\n                 .filter(index -&gt; Character.UnicodeBlock.of(textChars[index])\n                                .equals(Character.UnicodeBlock.CYRILLIC))\n                 .findAny() // can use findFirst()\n                 .ifPresent(index -&gt; );\n</code></pre>\n\n<p><em>Please note:</em> I'm using char array here rather than String due to performance advantage of getting an element by index.</p>\n"},{"tags":[],"owner":{"account_id":169763,"reputation":7117,"user_id":2103602,"accept_rate":59,"display_name":"sigpwned"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689003965,"creation_date":1689002994,"answer_id":76655237,"question_id":35660688,"body_markdown":"The above examples using `UnicodeBlock` will work just fine, but can also use the [`Character.UnicodeScript`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Character.UnicodeScript.html) `enum` if you prefer:\r\n\r\n    boolean containsCyrillic = &quot;Your String Goes Here&quot;.codePoints()\r\n        .mapToObj(Character.UnicodeScript::of)\r\n        .anyMatch(Character.UnicodeScript.CYRILLIC::equals);\r\n\r\nIf you don&#39;t trust your input, you can be more defensive using [`Character.isValidCodePoint`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Character.html#isValidCodePoint(int)):\r\n\r\n    boolean containsCyrillic =\r\n        &quot;Your Untrusted String Goes Here&quot;.codePoints()\r\n            .filter(Character::isValidCodePoint)\r\n            .mapToObj(Character.UnicodeScript::of)\r\n            .anyMatch(s -&gt; s == Character.UnicodeScript.CYRILLIC);\r\n\r\nIf you&#39;re interested in analyzing the various scripts in your text, for example to determine the predominant script of your text, you can keep track of the number of code points in various scripts:\r\n\r\n    Map&lt;Character.UnicodeScript,Long&gt; scripts = \r\n        &quot;Your Untrusted String Goes Here&quot;.codePoints()\r\n            .filter(Character::isValidCodePoint)\r\n            .mapToObj(Character.UnicodeScript::of)\r\n            .collect(groupingBy(\r\n                Function.identity(),\r\n                counting()));\r\n\r\nWe can also be a titch more efficient and use an [`EnumMap`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/EnumMap.html), since `Character.UnicodeScript` is an `enum`:\r\n\r\n    Map&lt;Character.UnicodeScript,Long&gt; scripts = \r\n        &quot;Your Untrusted String Goes Here&quot;.codePoints()\r\n            .filter(Character::isValidCodePoint)\r\n            .mapToObj(Character.UnicodeScript::of)\r\n            .collect(groupingBy(\r\n                Function.identity(),\r\n                () -&gt; new EnumMap&lt;&gt;(Character.UnicodeScript.class),\r\n                counting()));\r\n\r\nIf you&#39;re just interested in the majority vote, then you can try this:\r\n\r\n    Optional&lt;Character.UnicodeScript&gt; predominantScript = \r\n        &quot;Your Untrusted String Goes Here&quot;.codePoints()\r\n            .filter(Character::isValidCodePoint)\r\n            .mapToObj(Character.UnicodeScript::of)\r\n            .filter(s -&gt; s != Character.UnicodeScript.COMMON\r\n                &amp;&amp; s != Character.UnicodeScript.INHERITED\r\n                &amp;&amp; s != Character.UnicodeScript.UNKNOWN)\r\n            .collect(groupingBy(\r\n                Function.identity(),\r\n                () -&gt; new EnumMap&lt;&gt;(Character.UnicodeScript.class),\r\n                counting()))\r\n            .entrySet()\r\n            .stream()\r\n            .sorted(\r\n                Comparator\r\n                .&lt;Map.Entry&lt;Character.UnicodeScript, Long&gt;&gt;comparingLong(Map.Entry::getValue)\r\n                .reversed()\r\n                .thenComparing(Map.Entry::getKey))\r\n            .map(Map.Entry::getKey)\r\n            .findFirst();\r\n\r\nWe filter out `Character.UnicodeScript.COMMON`, `Character.UnicodeScript.INHERITED`, and `Character.UnicodeScript.UNKNOWN` because they are &quot;catch-all&quot; categories used for shared code points, mapped to all code points, or simply unrecognized code points (per [the spec](https://www.unicode.org/reports/tr24/#Classification_by_Script)), as opposed to individual scripts.","title":"How to detect in Java if string contains Cyrillic?","body":"<p>The above examples using <code>UnicodeBlock</code> will work just fine, but can also use the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Character.UnicodeScript.html\" rel=\"nofollow noreferrer\"><code>Character.UnicodeScript</code></a> <code>enum</code> if you prefer:</p>\n<pre><code>boolean containsCyrillic = &quot;Your String Goes Here&quot;.codePoints()\n    .mapToObj(Character.UnicodeScript::of)\n    .anyMatch(Character.UnicodeScript.CYRILLIC::equals);\n</code></pre>\n<p>If you don't trust your input, you can be more defensive using <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Character.html#isValidCodePoint(int)\" rel=\"nofollow noreferrer\"><code>Character.isValidCodePoint</code></a>:</p>\n<pre><code>boolean containsCyrillic =\n    &quot;Your Untrusted String Goes Here&quot;.codePoints()\n        .filter(Character::isValidCodePoint)\n        .mapToObj(Character.UnicodeScript::of)\n        .anyMatch(s -&gt; s == Character.UnicodeScript.CYRILLIC);\n</code></pre>\n<p>If you're interested in analyzing the various scripts in your text, for example to determine the predominant script of your text, you can keep track of the number of code points in various scripts:</p>\n<pre><code>Map&lt;Character.UnicodeScript,Long&gt; scripts = \n    &quot;Your Untrusted String Goes Here&quot;.codePoints()\n        .filter(Character::isValidCodePoint)\n        .mapToObj(Character.UnicodeScript::of)\n        .collect(groupingBy(\n            Function.identity(),\n            counting()));\n</code></pre>\n<p>We can also be a titch more efficient and use an <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/EnumMap.html\" rel=\"nofollow noreferrer\"><code>EnumMap</code></a>, since <code>Character.UnicodeScript</code> is an <code>enum</code>:</p>\n<pre><code>Map&lt;Character.UnicodeScript,Long&gt; scripts = \n    &quot;Your Untrusted String Goes Here&quot;.codePoints()\n        .filter(Character::isValidCodePoint)\n        .mapToObj(Character.UnicodeScript::of)\n        .collect(groupingBy(\n            Function.identity(),\n            () -&gt; new EnumMap&lt;&gt;(Character.UnicodeScript.class),\n            counting()));\n</code></pre>\n<p>If you're just interested in the majority vote, then you can try this:</p>\n<pre><code>Optional&lt;Character.UnicodeScript&gt; predominantScript = \n    &quot;Your Untrusted String Goes Here&quot;.codePoints()\n        .filter(Character::isValidCodePoint)\n        .mapToObj(Character.UnicodeScript::of)\n        .filter(s -&gt; s != Character.UnicodeScript.COMMON\n            &amp;&amp; s != Character.UnicodeScript.INHERITED\n            &amp;&amp; s != Character.UnicodeScript.UNKNOWN)\n        .collect(groupingBy(\n            Function.identity(),\n            () -&gt; new EnumMap&lt;&gt;(Character.UnicodeScript.class),\n            counting()))\n        .entrySet()\n        .stream()\n        .sorted(\n            Comparator\n            .&lt;Map.Entry&lt;Character.UnicodeScript, Long&gt;&gt;comparingLong(Map.Entry::getValue)\n            .reversed()\n            .thenComparing(Map.Entry::getKey))\n        .map(Map.Entry::getKey)\n        .findFirst();\n</code></pre>\n<p>We filter out <code>Character.UnicodeScript.COMMON</code>, <code>Character.UnicodeScript.INHERITED</code>, and <code>Character.UnicodeScript.UNKNOWN</code> because they are &quot;catch-all&quot; categories used for shared code points, mapped to all code points, or simply unrecognized code points (per <a href=\"https://www.unicode.org/reports/tr24/#Classification_by_Script\" rel=\"nofollow noreferrer\">the spec</a>), as opposed to individual scripts.</p>\n"}],"owner":{"account_id":1437583,"reputation":517,"user_id":1358631,"accept_rate":50,"display_name":"knezmilos"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10299,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":35660761,"answer_count":3,"score":10,"last_activity_date":1689003965,"creation_date":1456516925,"question_id":35660688,"body_markdown":"I want to detect if a string contains Cyrillic letters.\r\n\r\nIn PHP I did something like this:\r\n\r\n    preg_match(&#39;/\\p{Cyrillic}+/ui&#39;, $text)\r\n\r\nWhat would work the same in Java?","title":"How to detect in Java if string contains Cyrillic?","body":"<p>I want to detect if a string contains Cyrillic letters.</p>\n\n<p>In PHP I did something like this:</p>\n\n<pre><code>preg_match('/\\p{Cyrillic}+/ui', $text)\n</code></pre>\n\n<p>What would work the same in Java?</p>\n"},{"tags":["java","spring-boot","out-of-memory","openshift","forkjoinpool"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1688509106,"post_id":76615132,"comment_id":135082446,"body_markdown":"You haven&#39;t asked a question.","body":"You haven&#39;t asked a question."},{"owner":{"account_id":3166758,"reputation":31,"user_id":2676594,"display_name":"user2676594"},"score":0,"creation_date":1688511996,"post_id":76615132,"comment_id":135082679,"body_markdown":"maybe its not clear, i wanted to ask if there is an issue with the version 2.7.11 of springboot. In fact, under the same circumstances and conditions, we never had this error with the version 2.6.6 .","body":"maybe its not clear, i wanted to ask if there is an issue with the version 2.7.11 of springboot. In fact, under the same circumstances and conditions, we never had this error with the version 2.6.6 ."},{"owner":{"account_id":3449131,"reputation":12148,"user_id":2889165,"accept_rate":73,"display_name":"Andreas Lundgren"},"score":1,"creation_date":1688550416,"post_id":76615132,"comment_id":135087079,"body_markdown":"Maybe it just consumes more memory? Check your memory usage before and after, maybe you were very close to the limit before? If you get any memory metrics (before and after), please add them to your question.","body":"Maybe it just consumes more memory? Check your memory usage before and after, maybe you were very close to the limit before? If you get any memory metrics (before and after), please add them to your question."},{"owner":{"account_id":5277236,"reputation":8320,"user_id":4213662,"accept_rate":80,"display_name":"Persixty"},"score":0,"creation_date":1688987340,"post_id":76615132,"comment_id":135144308,"body_markdown":"The ForkJoinPool is creating over 300 Threads and you only require 5 parallel threads. How did the previous version behave in that specific area? As others point out it may be that you were close to failure before but it may also be the case that settings on the VM or in the libraries have upped to requirements.","body":"The ForkJoinPool is creating over 300 Threads and you only require 5 parallel threads. How did the previous version behave in that specific area? As others point out it may be that you were close to failure before but it may also be the case that settings on the VM or in the libraries have upped to requirements."},{"owner":{"account_id":3166758,"reputation":31,"user_id":2676594,"display_name":"user2676594"},"score":1,"creation_date":1688988960,"post_id":76615132,"comment_id":135144635,"body_markdown":"The forkjoinpool is  also creating  more threads than expected in the previous version, i have no idea about the root cause of that behavior.","body":"The forkjoinpool is  also creating  more threads than expected in the previous version, i have no idea about the root cause of that behavior."},{"owner":{"account_id":5277236,"reputation":8320,"user_id":4213662,"accept_rate":80,"display_name":"Persixty"},"score":1,"creation_date":1688990943,"post_id":76615132,"comment_id":135145072,"body_markdown":"@user2676594 That sounds like where to look. The default Stack Size for a Thread is typically 512K so 300 will be soaking up over 150 MiB. The default constructor for `java.util.concurrent.ForJoinPool` creates a pool with the same number of threads as `Runtime.AvailableProcessors()`. But it sounds like the Application Code should be trying to set it...","body":"@user2676594 That sounds like where to look. The default Stack Size for a Thread is typically 512K so 300 will be soaking up over 150 MiB. The default constructor for <code>java.util.concurrent.ForJoinPool</code> creates a pool with the same number of threads as <code>Runtime.AvailableProcessors()</code>. But it sounds like the Application Code should be trying to set it..."}],"answers":[{"tags":[],"owner":{"account_id":2978050,"reputation":23,"user_id":2528680,"display_name":"OMARoun"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689001891,"creation_date":1689001891,"answer_id":76655102,"question_id":76615132,"body_markdown":"If your tasks take a long time to execute, there&#39;s a risk that ForkJoinPool could create additional threads to maintain a degree of parallelism.","title":"Unhandled exception &#39;java.lang.OutOfMemoryError: unable to create native thread: possibly out of memory or process/resource limits reached","body":"<p>If your tasks take a long time to execute, there's a risk that ForkJoinPool could create additional threads to maintain a degree of parallelism.</p>\n"},{"tags":[],"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689003841,"creation_date":1689003841,"answer_id":76655335,"question_id":76615132,"body_markdown":"Just because you have 300 threads in the ThreadGroup named &quot;ForkJoinPool&quot;, it doesn&#39;t mean all of those threads were created by the ForkJoinPool. If the runnable tasks themselves create separate (sub-) threads, those threads will also be in the same thread group. Given that your ForkJoinPool has a parallelism of only 5, it is the most likely case that your threads are themselves creating other threads. Check the code of the threads created by your ForkJoinPool.","title":"Unhandled exception &#39;java.lang.OutOfMemoryError: unable to create native thread: possibly out of memory or process/resource limits reached","body":"<p>Just because you have 300 threads in the ThreadGroup named &quot;ForkJoinPool&quot;, it doesn't mean all of those threads were created by the ForkJoinPool. If the runnable tasks themselves create separate (sub-) threads, those threads will also be in the same thread group. Given that your ForkJoinPool has a parallelism of only 5, it is the most likely case that your threads are themselves creating other threads. Check the code of the threads created by your ForkJoinPool.</p>\n"}],"owner":{"account_id":3166758,"reputation":31,"user_id":2676594,"display_name":"user2676594"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":371,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1689003841,"creation_date":1688495682,"question_id":76615132,"body_markdown":"We have recently migrated a springboot application to **2.7.11** version, and while performing a load test, a nasty error raised :\r\n\r\n&gt; &quot;Unhandled exception &#39;java.lang.OutOfMemoryError: unable to create native thread: possibly out of memory or process/resource limits reached\r\n\r\nwe noticed that the app now consumes a bit more memory than lhe last version, so i tried to collect some profiling infos through visualvm, and i noticed that a forkjoinpool (a custom thread pool with parallelism is set to 5) is creating many thread than expected (300 thread instead of 5):\r\n[![enter image description here][1]][1]\r\n\r\nRoughly speaking, the app parse a big json file and cuts it into several pieces, and foreach part we send a task to the forkjoinpool through executor.execute().\r\n\r\nNoting that we are serving this application on openshift V4, and we&#39;ve never got this weird error when using springboot **2.6.6**.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/uzvp2.png\r\n  [2]: https://i.stack.imgur.com/Liopt.png","title":"Unhandled exception &#39;java.lang.OutOfMemoryError: unable to create native thread: possibly out of memory or process/resource limits reached","body":"<p>We have recently migrated a springboot application to <strong>2.7.11</strong> version, and while performing a load test, a nasty error raised :</p>\n<blockquote>\n<p>&quot;Unhandled exception 'java.lang.OutOfMemoryError: unable to create native thread: possibly out of memory or process/resource limits reached</p>\n</blockquote>\n<p>we noticed that the app now consumes a bit more memory than lhe last version, so i tried to collect some profiling infos through visualvm, and i noticed that a forkjoinpool (a custom thread pool with parallelism is set to 5) is creating many thread than expected (300 thread instead of 5):\n<a href=\"https://i.stack.imgur.com/uzvp2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uzvp2.png\" alt=\"enter image description here\" /></a></p>\n<p>Roughly speaking, the app parse a big json file and cuts it into several pieces, and foreach part we send a task to the forkjoinpool through executor.execute().</p>\n<p>Noting that we are serving this application on openshift V4, and we've never got this weird error when using springboot <strong>2.6.6</strong>.</p>\n"},{"tags":["java","tomcat"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":1,"creation_date":1689002755,"post_id":76655152,"comment_id":135148133,"body_markdown":"You could submit a patch to the Tomcat project itself... Otherwise, you&#39;re basically maintaining a fork, and have to edit each release, yes. Without more details, it&#39;s hard to answer for your use case. Maybe &quot;Composition over Inheritance&quot; helps you","body":"You could submit a patch to the Tomcat project itself... Otherwise, you&#39;re basically maintaining a fork, and have to edit each release, yes. Without more details, it&#39;s hard to answer for your use case. Maybe &quot;Composition over Inheritance&quot; helps you"},{"owner":{"account_id":1976470,"reputation":874,"user_id":1774159,"accept_rate":80,"display_name":"Atul"},"score":0,"creation_date":1689003642,"post_id":76655152,"comment_id":135148351,"body_markdown":"@OneCricketeer hi, added more details and replyin edit.","body":"@OneCricketeer hi, added more details and replyin edit."}],"answers":[{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1689002792,"creation_date":1689002792,"answer_id":76655211,"question_id":76655152,"body_markdown":"You should not modify the Tomcat-delivered files. Currently you are perceiving the pain of applying the wrong process.\r\n\r\nInstead, create your own library that implements the same interface as Tomcat&#39;s library. Internally, run your own code or just call the functions that are supplied by the original one from Tomcat.\r\n\r\nFinally configure Tomcat such that it would make use of your library instead of the builtin one. This should be possible via server.xml, but you did not disclose exactly which library and why you need to replace. Hence your good friend should be the [Tomcat configuration reference documentation][1].\r\n\r\n\r\n  [1]: https://tomcat.apache.org/tomcat-10.1-doc/config/index.html","title":"How to update functions in java without editing/inheriting the file","body":"<p>You should not modify the Tomcat-delivered files. Currently you are perceiving the pain of applying the wrong process.</p>\n<p>Instead, create your own library that implements the same interface as Tomcat's library. Internally, run your own code or just call the functions that are supplied by the original one from Tomcat.</p>\n<p>Finally configure Tomcat such that it would make use of your library instead of the builtin one. This should be possible via server.xml, but you did not disclose exactly which library and why you need to replace. Hence your good friend should be the <a href=\"https://tomcat.apache.org/tomcat-10.1-doc/config/index.html\" rel=\"nofollow noreferrer\">Tomcat configuration reference documentation</a>.</p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689003223,"creation_date":1689002914,"answer_id":76655230,"question_id":76655152,"body_markdown":"In theory you could do this with some &quot;bytecode engineering&quot; that rewrites or replaces bytecodes for specific methods at build or run time.  \r\n\r\nIn practice, it would be simpler to make the changes at the source code level; e.g. by using a patch script, or by using GIT merging or similar.\r\n\r\nIn either case, the process is going to be fragile; i.e. future changes to the Tomcat codebase may mean your procedure for patching may stop working.\r\n\r\n----------------------\r\n\r\n&lt;sup&gt;I won&#39;t comment on whether what you are doing is a good idea.  That will depend on what your changes are doing and whether there are viable alternatives.&lt;/sup&gt;","title":"How to update functions in java without editing/inheriting the file","body":"<p>In theory you could do this with some &quot;bytecode engineering&quot; that rewrites or replaces bytecodes for specific methods at build or run time.</p>\n<p>In practice, it would be simpler to make the changes at the source code level; e.g. by using a patch script, or by using GIT merging or similar.</p>\n<p>In either case, the process is going to be fragile; i.e. future changes to the Tomcat codebase may mean your procedure for patching may stop working.</p>\n<hr />\n<p><sup>I won't comment on whether what you are doing is a good idea.  That will depend on what your changes are doing and whether there are viable alternatives.</sup></p>\n"}],"owner":{"account_id":1976470,"reputation":874,"user_id":1774159,"accept_rate":80,"display_name":"Atul"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":2,"score":-1,"last_activity_date":1689003504,"creation_date":1689002323,"question_id":76655152,"body_markdown":"I have a use-case to update java tomcat library for my project. We do this by going to individual functions in each of the classes and editing them. This becomes a pain because we have to perform same activity with every tomcat release. Is there a way to update a function of a class without editing them directly or inheriting them?\r\n\r\nExample -&gt;\r\nlibrary -&gt; class A -&gt; function f1\r\n\r\nAdd a behavior change to function f1 of class A (without extending). \r\nNow when function f1 is called, it&#39;s definition is that of a new one. \r\n\r\nI am not sure how to search for answer to this question.\r\n\r\nEdit 1: Adding more details \r\n 1. Changes are specific to project, submitting a patch to tomcat itself won&#39;t work.\r\n 2. Changes are made to almost 6-7 generated jars (catalina, coyote, servlet etc)\r\n 3. I could think of crude approach to edit those files via a script, but I thought I would ask for a better alternatives first.","title":"How to update functions in java without editing/inheriting the file","body":"<p>I have a use-case to update java tomcat library for my project. We do this by going to individual functions in each of the classes and editing them. This becomes a pain because we have to perform same activity with every tomcat release. Is there a way to update a function of a class without editing them directly or inheriting them?</p>\n<p>Example -&gt;\nlibrary -&gt; class A -&gt; function f1</p>\n<p>Add a behavior change to function f1 of class A (without extending).\nNow when function f1 is called, it's definition is that of a new one.</p>\n<p>I am not sure how to search for answer to this question.</p>\n<p>Edit 1: Adding more details</p>\n<ol>\n<li>Changes are specific to project, submitting a patch to tomcat itself won't work.</li>\n<li>Changes are made to almost 6-7 generated jars (catalina, coyote, servlet etc)</li>\n<li>I could think of crude approach to edit those files via a script, but I thought I would ask for a better alternatives first.</li>\n</ol>\n"},{"tags":["java","spring","hibernate","spring-boot","jpa"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1554748329,"post_id":55575505,"comment_id":97857884,"body_markdown":"No because both are different properties. Set the `spring.jpa.hibernate.ddl-auto` property to `none` then it should take precedence.","body":"No because both are different properties. Set the <code>spring.jpa.hibernate.ddl-auto</code> property to <code>none</code> then it should take precedence."},{"owner":{"account_id":1100252,"reputation":10087,"user_id":1092818,"display_name":"crizzis"},"score":0,"creation_date":1554754962,"post_id":55575505,"comment_id":97860819,"body_markdown":"Out of curiosity, why would you *not* want the schema to be generated for an in-memory database?","body":"Out of curiosity, why would you <i>not</i> want the schema to be generated for an in-memory database?"},{"owner":{"account_id":4081547,"reputation":4204,"user_id":3351924,"accept_rate":89,"display_name":"secondbreakfast"},"score":0,"creation_date":1554819019,"post_id":55575505,"comment_id":97886289,"body_markdown":"@crizzis Well I was having errors with the auto generation so I needed to turn it off while I figured it out and worked on other things","body":"@crizzis Well I was having errors with the auto generation so I needed to turn it off while I figured it out and worked on other things"},{"owner":{"account_id":4508336,"reputation":15533,"user_id":3665178,"accept_rate":73,"display_name":"Manuel Jordan"},"score":0,"creation_date":1689002149,"post_id":55575505,"comment_id":135147991,"body_markdown":"@crizzis a scenario is when already exists either the `schema.sql` or `schema-h2.sql` files. Therefore the schema already exists.","body":"@crizzis a scenario is when already exists either the <code>schema.sql</code> or <code>schema-h2.sql</code> files. Therefore the schema already exists."},{"owner":{"account_id":4508336,"reputation":15533,"user_id":3665178,"accept_rate":73,"display_name":"Manuel Jordan"},"score":0,"creation_date":1689002310,"post_id":55575505,"comment_id":135148036,"body_markdown":"@M.Deinum even when `spring.jpa.hibernate.ddl-auto` as **none** works as expected - Why is available the `spring.jpa.generate-ddl` property if  the `spring.jpa.hibernate.ddl-auto` property handles the same approach to reach the same goal?- is not clear when is mandatory use `spring.jpa.generate-ddl` over `spring.jpa.hibernate.ddl-auto`","body":"@M.Deinum even when <code>spring.jpa.hibernate.ddl-auto</code> as <b>none</b> works as expected - Why is available the <code>spring.jpa.generate-ddl</code> property if  the <code>spring.jpa.hibernate.ddl-auto</code> property handles the same approach to reach the same goal?- is not clear when is mandatory use <code>spring.jpa.generate-ddl</code> over <code>spring.jpa.hibernate.ddl-auto</code>"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1689012203,"post_id":55575505,"comment_id":135150061,"body_markdown":"`generate-ddl` is only `true` and `false` which works with any provider. Whereas `spring.jpa.hibernate.ddl-auto` allows you to specify the specify hibernate mode.","body":"<code>generate-ddl</code> is only <code>true</code> and <code>false</code> which works with any provider. Whereas <code>spring.jpa.hibernate.ddl-auto</code> allows you to specify the specify hibernate mode."},{"owner":{"account_id":1100252,"reputation":10087,"user_id":1092818,"display_name":"crizzis"},"score":0,"creation_date":1689086509,"post_id":55575505,"comment_id":135161656,"body_markdown":"@ManuelJordan you do realize that the question asked was about an **in-memory** database?","body":"@ManuelJordan you do realize that the question asked was about an <b>in-memory</b> database?"},{"owner":{"account_id":4508336,"reputation":15533,"user_id":3665178,"accept_rate":73,"display_name":"Manuel Jordan"},"score":0,"creation_date":1689090344,"post_id":55575505,"comment_id":135162619,"body_markdown":"@crizzis - Yes, but it could be applied to in a disk database as MySQL for _pre-production_ profile ... it to test with the target DB","body":"@crizzis - Yes, but it could be applied to in a disk database as MySQL for <i>pre-production</i> profile ... it to test with the target DB"},{"owner":{"account_id":4508336,"reputation":15533,"user_id":3665178,"accept_rate":73,"display_name":"Manuel Jordan"},"score":0,"creation_date":1689090383,"post_id":55575505,"comment_id":135162631,"body_markdown":"@M.Deinum thanks for the reply, yes the former is generic and the latter has more options.","body":"@M.Deinum thanks for the reply, yes the former is generic and the latter has more options."}],"answers":[{"tags":[],"owner":{"account_id":367739,"reputation":1068,"user_id":714104,"accept_rate":20,"display_name":"Dominik"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1689003219,"creation_date":1632573600,"answer_id":69326241,"question_id":55575505,"body_markdown":"This behavior is described in the Spring Boot Reference Documentation at the [Creating and Dropping JPA Databases](https://docs.spring.io/spring-boot/docs/current/reference/html/data.html#data.sql.jpa-and-spring-data.creating-and-dropping) section as follows:\r\n\r\n&gt; By default, the DDL execution (or validation) is deferred until the\r\n&gt; `ApplicationContext` has started. There is also a\r\n&gt; `spring.jpa.generate-ddl` flag, but it is not used if Hibernate\r\n&gt; auto-configuration is active, because the `ddl-auto` settings are more\r\n&gt; fine-grained.\r\n\r\nSince the `spring.jpa.hibernate.ddl-auto` property is set by default when Hibernate is used, therefore the `spring.jpa.generate-ddl` property is ignored, at least with a H2 in-memory database\r\n\r\n","title":"H2 schema still generated when spring.jpa.generate-ddl=false","body":"<p>This behavior is described in the Spring Boot Reference Documentation at the <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/data.html#data.sql.jpa-and-spring-data.creating-and-dropping\" rel=\"nofollow noreferrer\">Creating and Dropping JPA Databases</a> section as follows:</p>\n<blockquote>\n<p>By default, the DDL execution (or validation) is deferred until the\n<code>ApplicationContext</code> has started. There is also a\n<code>spring.jpa.generate-ddl</code> flag, but it is not used if Hibernate\nauto-configuration is active, because the <code>ddl-auto</code> settings are more\nfine-grained.</p>\n</blockquote>\n<p>Since the <code>spring.jpa.hibernate.ddl-auto</code> property is set by default when Hibernate is used, therefore the <code>spring.jpa.generate-ddl</code> property is ignored, at least with a H2 in-memory database</p>\n"}],"owner":{"account_id":4081547,"reputation":4204,"user_id":3351924,"accept_rate":89,"display_name":"secondbreakfast"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1141,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":69326241,"answer_count":1,"score":1,"last_activity_date":1689003219,"creation_date":1554732958,"question_id":55575505,"body_markdown":"I am using Spring Boot 2.1.3 with an H2 in memory database for testing. When I run my tests, the schema gets generated even when I specify the following property. \r\n\r\n    spring.jpa.generate-ddl=false\r\n\r\n\r\nIt seems that because Spring Boot defaults the following property when using H2\r\n\r\n    spring.jpa.hibernate.ddl-auto=create-drop\r\n\r\nThat this takes precedence over `spring.jpa.generate-ddl=false`\r\n\r\nIs this a bug?","title":"H2 schema still generated when spring.jpa.generate-ddl=false","body":"<p>I am using Spring Boot 2.1.3 with an H2 in memory database for testing. When I run my tests, the schema gets generated even when I specify the following property. </p>\n\n<pre><code>spring.jpa.generate-ddl=false\n</code></pre>\n\n<p>It seems that because Spring Boot defaults the following property when using H2</p>\n\n<pre><code>spring.jpa.hibernate.ddl-auto=create-drop\n</code></pre>\n\n<p>That this takes precedence over <code>spring.jpa.generate-ddl=false</code></p>\n\n<p>Is this a bug?</p>\n"},{"tags":["java","maven","google-cloud-platform","google-bigquery"],"answers":[{"tags":[],"owner":{"account_id":25604480,"reputation":1167,"user_id":19378826,"display_name":"Nestor"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689003022,"creation_date":1689003022,"answer_id":76655243,"question_id":76652504,"body_markdown":"If it is in the official documentation it must be the correct numbers of jars needed for dependencies, or try this that pom content that described in the [before you begin][1] section of BigQuery API&#39;s reference.:\r\n```\r\n&lt;dependencyManagement&gt;\r\n  &lt;dependencies&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\r\n      &lt;artifactId&gt;libraries-bom&lt;/artifactId&gt;\r\n      &lt;version&gt;26.18.0&lt;/version&gt;\r\n      &lt;type&gt;pom&lt;/type&gt;\r\n      &lt;scope&gt;import&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n  &lt;/dependencies&gt;\r\n&lt;/dependencyManagement&gt;\r\n\r\n&lt;dependencies&gt;\r\n  &lt;dependency&gt;\r\n    &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\r\n    &lt;artifactId&gt;google-cloud-storage&lt;/artifactId&gt;\r\n  &lt;/dependency&gt;\r\n```\r\n\r\nIf you scroll down a bit more you will find IDE plugins for using client libraries(that might be helpful to your use case):\r\n\r\n&gt;If you&#39;re using Visual Studio Code, IntelliJ, or Eclipse, you can add client libraries to your project using the following IDE plugins:\r\n&gt;\r\n&gt; - Cloud Code for VS Code\r\n&gt; - Cloud Code for IntelliJ\r\n&gt; - Cloud Tools for Eclipse\r\n\r\n\r\n  [1]: https://cloud.google.com/bigquery/docs/reference/libraries#install","title":"Dependency Jars required for querying data from GCP Bigquery using java","body":"<p>If it is in the official documentation it must be the correct numbers of jars needed for dependencies, or try this that pom content that described in the <a href=\"https://cloud.google.com/bigquery/docs/reference/libraries#install\" rel=\"nofollow noreferrer\">before you begin</a> section of BigQuery API's reference.:</p>\n<pre><code>&lt;dependencyManagement&gt;\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\n      &lt;artifactId&gt;libraries-bom&lt;/artifactId&gt;\n      &lt;version&gt;26.18.0&lt;/version&gt;\n      &lt;type&gt;pom&lt;/type&gt;\n      &lt;scope&gt;import&lt;/scope&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n&lt;/dependencyManagement&gt;\n\n&lt;dependencies&gt;\n  &lt;dependency&gt;\n    &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\n    &lt;artifactId&gt;google-cloud-storage&lt;/artifactId&gt;\n  &lt;/dependency&gt;\n</code></pre>\n<p>If you scroll down a bit more you will find IDE plugins for using client libraries(that might be helpful to your use case):</p>\n<blockquote>\n<p>If you're using Visual Studio Code, IntelliJ, or Eclipse, you can add client libraries to your project using the following IDE plugins:</p>\n<ul>\n<li>Cloud Code for VS Code</li>\n<li>Cloud Code for IntelliJ</li>\n<li>Cloud Tools for Eclipse</li>\n</ul>\n</blockquote>\n"}],"owner":{"account_id":16609354,"reputation":324,"user_id":12002856,"display_name":"DAK"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":127,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76655243,"answer_count":1,"score":0,"last_activity_date":1689003022,"creation_date":1688981929,"question_id":76652504,"body_markdown":"Dependency Jars required for querying data from GCP Bigquery using java.\r\n\r\ni have to query data from gcp bigquery for that I chose java client libraries of GCP instead of REST API. I added a maven pom.xml to get the required dependencies like \r\n\r\n```\r\n      &lt;dependencyManagement&gt;\r\n        &lt;dependencies&gt;\r\n\r\n            &lt;!-- https://mvnrepository.com/artifact/com.google.cloud/libraries-bom --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\r\n                &lt;artifactId&gt;libraries-bom&lt;/artifactId&gt;\r\n                &lt;version&gt;26.17.0&lt;/version&gt;\r\n                &lt;type&gt;pom&lt;/type&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    &lt;/dependencyManagement&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\r\n            &lt;artifactId&gt;google-cloud-bigquery&lt;/artifactId&gt;\r\n            &lt;version&gt;2.27.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n```\r\n\r\nIt gave the 74 jars. truely all those jars required??\r\nor any correction required? ","title":"Dependency Jars required for querying data from GCP Bigquery using java","body":"<p>Dependency Jars required for querying data from GCP Bigquery using java.</p>\n<p>i have to query data from gcp bigquery for that I chose java client libraries of GCP instead of REST API. I added a maven pom.xml to get the required dependencies like</p>\n<pre><code>      &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n\n            &lt;!-- https://mvnrepository.com/artifact/com.google.cloud/libraries-bom --&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\n                &lt;artifactId&gt;libraries-bom&lt;/artifactId&gt;\n                &lt;version&gt;26.17.0&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;google-cloud-bigquery&lt;/artifactId&gt;\n            &lt;version&gt;2.27.1&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n<p>It gave the 74 jars. truely all those jars required??\nor any correction required?</p>\n"},{"tags":["python","java","apache-spark","oop","amazon-s3"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1688564738,"post_id":76620125,"comment_id":135090391,"body_markdown":"Guessing file encodings of text files is a wicked problem. You can take it as practicably impossible","body":"Guessing file encodings of text files is a wicked problem. You can take it as practicably impossible"}],"answers":[{"tags":[],"owner":{"account_id":15267555,"reputation":21,"user_id":11015663,"display_name":"Vishal Sain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689002785,"creation_date":1689002785,"answer_id":76655209,"question_id":76620125,"body_markdown":"Was not really able to achieve the same in a single line, but this is how i did it in python. Followed the same approach in java as well.\r\n\r\n&gt; chardet_detector was the tool which made it possible.\r\n\r\n    import chardet.universaldetector as chardet_detector\r\n\r\n    def get_dataframe(spark, path, schema, delimiter):\r\n        &quot;&quot;&quot;Return a dataframe setup to read a CSV file&quot;&quot;&quot;\r\n        s3_file_content = spark.sparkContext.binaryFiles(path).flatMap(lambda x: x[1].splitlines()).collect()\r\n        file_encoding = detect_file_encoding(s3_file_content)\r\n        options = {&quot;encoding&quot;: file_encoding}\r\n        data_frame = spark.read.schema(schema).options(**options).csv(path).toDF(\r\n            *[f.metadata.get(&quot;alias&quot;) for f in schema])\r\n        data_frame.show()\r\n        return data_frame\r\n    \r\n    \r\n    def detect_file_encoding(content):\r\n        detector = chardet_detector.UniversalDetector()\r\n        for line in content:\r\n            detector.feed(line)\r\n            if detector.done:\r\n                break\r\n        detector.close()\r\n        return detector.result[&#39;encoding&#39;]\r\n\r\nPlease let me know in the comments if explanation is required. I think the code is quite self explanatory.","title":"How to use the encoding as per the file, while reading from spark","body":"<p>Was not really able to achieve the same in a single line, but this is how i did it in python. Followed the same approach in java as well.</p>\n<blockquote>\n<p>chardet_detector was the tool which made it possible.</p>\n</blockquote>\n<pre><code>import chardet.universaldetector as chardet_detector\n\ndef get_dataframe(spark, path, schema, delimiter):\n    &quot;&quot;&quot;Return a dataframe setup to read a CSV file&quot;&quot;&quot;\n    s3_file_content = spark.sparkContext.binaryFiles(path).flatMap(lambda x: x[1].splitlines()).collect()\n    file_encoding = detect_file_encoding(s3_file_content)\n    options = {&quot;encoding&quot;: file_encoding}\n    data_frame = spark.read.schema(schema).options(**options).csv(path).toDF(\n        *[f.metadata.get(&quot;alias&quot;) for f in schema])\n    data_frame.show()\n    return data_frame\n\n\ndef detect_file_encoding(content):\n    detector = chardet_detector.UniversalDetector()\n    for line in content:\n        detector.feed(line)\n        if detector.done:\n            break\n    detector.close()\n    return detector.result['encoding']\n</code></pre>\n<p>Please let me know in the comments if explanation is required. I think the code is quite self explanatory.</p>\n"}],"owner":{"account_id":15267555,"reputation":21,"user_id":11015663,"display_name":"Vishal Sain"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76655209,"answer_count":1,"score":0,"last_activity_date":1689002785,"creation_date":1688558541,"question_id":76620125,"body_markdown":"I am trying to figure out a way to get the fileEncoding of each text file while i am reading it from the spark and use it as `.option(&quot;encoding&quot;,fileEncoding)`.\r\nP.S - No need to have all the code in a single line.\r\n\r\nCan some one please help me with the same?","title":"How to use the encoding as per the file, while reading from spark","body":"<p>I am trying to figure out a way to get the fileEncoding of each text file while i am reading it from the spark and use it as <code>.option(&quot;encoding&quot;,fileEncoding)</code>.\nP.S - No need to have all the code in a single line.</p>\n<p>Can some one please help me with the same?</p>\n"},{"tags":["java","spring","cron"],"answers":[{"tags":[],"owner":{"account_id":1853886,"reputation":210597,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"down_vote_count":0,"up_vote_count":50,"is_accepted":true,"score":50,"last_activity_date":1425331019,"creation_date":1425331019,"answer_id":28819596,"question_id":28819560,"body_markdown":"Just use the following cron:\r\n\r\n    @Scheduled(cron = &quot;0 0/15 * * * *&quot;)\r\n\r\nSpring cron expression syntax slightly differs from unix cron expression. One immediate difference - it supports 1 less field (6 rather than 7).","title":"Spring execute method every 15 minutes","body":"<p>Just use the following cron:</p>\n\n<pre><code>@Scheduled(cron = \"0 0/15 * * * *\")\n</code></pre>\n\n<p>Spring cron expression syntax slightly differs from unix cron expression. One immediate difference - it supports 1 less field (6 rather than 7).</p>\n"},{"tags":[],"owner":{"account_id":22195690,"reputation":51,"user_id":16437129,"display_name":"Azaan Wani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689002724,"creation_date":1689002724,"answer_id":76655200,"question_id":28819560,"body_markdown":"    @Scheduled(cron = &quot;0 0/15 * * * ?&quot;)\r\nIn springboot i used this!","title":"Spring execute method every 15 minutes","body":"<pre><code>@Scheduled(cron = &quot;0 0/15 * * * ?&quot;)\n</code></pre>\n<p>In springboot i used this!</p>\n"}],"owner":{"account_id":5585617,"reputation":3922,"user_id":4426075,"accept_rate":50,"display_name":"Semyon Tikhonenko"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37492,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":28819596,"answer_count":2,"score":16,"last_activity_date":1689002724,"creation_date":1425330861,"question_id":28819560,"body_markdown":"I tried to use cron expression from this site http://www.cronmaker.com/\r\n\r\n```java\r\n@Scheduled(cron = &quot;0 0/15 * 1/1 * ? *&quot;)\r\npublic void clearRps() {\r\n            \r\n}\r\n```\r\nBut it throws: java.lang.IllegalStateException: Encountered invalid @Scheduled method &#39;clearRps&#39;: Cron expression must consist of 6 fields (found 7 in &quot;0 0/15 * 1/1 * ? *&quot;)","title":"Spring execute method every 15 minutes","body":"<p>I tried to use cron expression from this site <a href=\"http://www.cronmaker.com/\" rel=\"nofollow noreferrer\">http://www.cronmaker.com/</a></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Scheduled(cron = &quot;0 0/15 * 1/1 * ? *&quot;)\npublic void clearRps() {\n            \n}\n</code></pre>\n<p>But it throws: java.lang.IllegalStateException: Encountered invalid @Scheduled method 'clearRps': Cron expression must consist of 6 fields (found 7 in &quot;0 0/15 * 1/1 * ? *&quot;)</p>\n"},{"tags":["java","apache-kafka","vert.x"],"owner":{"account_id":25469099,"reputation":1,"user_id":22193286,"display_name":"Jonathan Castellanos"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689002620,"creation_date":1688780450,"question_id":76641022,"body_markdown":"I need to create a POST request with vertx, following the example &quot;parallel-consumer-example-vertx&quot; I created a &quot;webClient&quot; to later invoke &quot;parallelConsumer.vertxHttpRequestStream&quot;. But at the moment of sending a Json as body, the flow of the application breaks; because the POST request is done infinitely because the commit to the kafka queue record is not done.\r\n\r\nCode fragment in method &quot;run()&quot;:\r\n\r\n```\r\nthis.parallelConsumer = JStreamVertxParallelStreamProcessor.createEosStreamProcessor(options);\r\nparallelConsumer.subscribe(of(inputTopic));\r\n\r\nStream resultStream = parallelConsumer.vertxHttpRequestStream((webClient, rec) -&gt; {\r\n            \r\n            System.out.println(&quot;Msg recibido&quot;);\r\n            \r\n            ConsumerRecord consumerRecord = rec.getSingleConsumerRecord();\r\n            \r\n            Map&lt;String, String&gt; params = new HashMap();\r\n\r\n            JsonObject payload = new JsonObject(consumerRecord.value().toString());\r\n            System.out.println(&quot;Payload&quot; + payload);\r\n            \r\n            RequestInfo reqInf = new RequestInfo(&quot;localhost&quot;, port, &quot;/send-message&quot;, params);\r\n\r\n            HttpRequest&lt;Buffer&gt; req = (HttpRequest&lt;Buffer&gt;) webClient.post(reqInf.getPort(), reqInf.getHost(), reqInf.getContextPath());\r\n                   /* Error */\r\n                   /* \r\n                    .sendJsonObject(new JsonObject(&quot;{\\&quot;hola\\&quot;:\\&quot;mundo\\&quot;}&quot;));\r\n                    .onSuccess(res -&gt; {\r\n                        System.out.println(res.bodyAsString());\r\n                    });\r\n                   */\r\n\r\n            return req;\r\n});\r\n```\r\n\r\n\r\nI was expecting the application to commit to kafka&#39;s record, just like it does when sending a webClient without body.\r\n\r\nThank you for your help\r\n\r\nDocumentation: https://github.com/confluentinc/parallel-consumer\r\n\r\nExample: https://github.com/confluentinc/parallel-consumer/blob/master/parallel-consumer-examples/parallel-consumer-example-vertx/src/main/java/io/confluent/parallelconsumer/examples/vertx/VertxApp.java","title":"Error when making a POST request with Confluent parallel-consumer and vertx","body":"<p>I need to create a POST request with vertx, following the example &quot;parallel-consumer-example-vertx&quot; I created a &quot;webClient&quot; to later invoke &quot;parallelConsumer.vertxHttpRequestStream&quot;. But at the moment of sending a Json as body, the flow of the application breaks; because the POST request is done infinitely because the commit to the kafka queue record is not done.</p>\n<p>Code fragment in method &quot;run()&quot;:</p>\n<pre><code>this.parallelConsumer = JStreamVertxParallelStreamProcessor.createEosStreamProcessor(options);\nparallelConsumer.subscribe(of(inputTopic));\n\nStream resultStream = parallelConsumer.vertxHttpRequestStream((webClient, rec) -&gt; {\n            \n            System.out.println(&quot;Msg recibido&quot;);\n            \n            ConsumerRecord consumerRecord = rec.getSingleConsumerRecord();\n            \n            Map&lt;String, String&gt; params = new HashMap();\n\n            JsonObject payload = new JsonObject(consumerRecord.value().toString());\n            System.out.println(&quot;Payload&quot; + payload);\n            \n            RequestInfo reqInf = new RequestInfo(&quot;localhost&quot;, port, &quot;/send-message&quot;, params);\n\n            HttpRequest&lt;Buffer&gt; req = (HttpRequest&lt;Buffer&gt;) webClient.post(reqInf.getPort(), reqInf.getHost(), reqInf.getContextPath());\n                   /* Error */\n                   /* \n                    .sendJsonObject(new JsonObject(&quot;{\\&quot;hola\\&quot;:\\&quot;mundo\\&quot;}&quot;));\n                    .onSuccess(res -&gt; {\n                        System.out.println(res.bodyAsString());\n                    });\n                   */\n\n            return req;\n});\n</code></pre>\n<p>I was expecting the application to commit to kafka's record, just like it does when sending a webClient without body.</p>\n<p>Thank you for your help</p>\n<p>Documentation: <a href=\"https://github.com/confluentinc/parallel-consumer\" rel=\"nofollow noreferrer\">https://github.com/confluentinc/parallel-consumer</a></p>\n<p>Example: <a href=\"https://github.com/confluentinc/parallel-consumer/blob/master/parallel-consumer-examples/parallel-consumer-example-vertx/src/main/java/io/confluent/parallelconsumer/examples/vertx/VertxApp.java\" rel=\"nofollow noreferrer\">https://github.com/confluentinc/parallel-consumer/blob/master/parallel-consumer-examples/parallel-consumer-example-vertx/src/main/java/io/confluent/parallelconsumer/examples/vertx/VertxApp.java</a></p>\n"},{"tags":["java","spring-mvc"],"answers":[{"tags":[],"owner":{"account_id":419537,"reputation":4992,"user_id":796761,"accept_rate":50,"display_name":"dbreaux"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689002540,"creation_date":1689002540,"answer_id":76655178,"question_id":76636898,"body_markdown":"I suspect it has to do with you replacing the `bindingResult` parameter with a new instance. For troubleshooting, I&#39;d try either looking at the Spring source code or logging the elements of `bindingResult` that _aren&#39;t_ the two &quot;notEmpty&quot; cases you&#39;re looking for. Maybe there are others you need to add back to the new instance unchanged, to keep the default behavior.","title":"SpringMvc custom binding result break date format","body":"<p>I suspect it has to do with you replacing the <code>bindingResult</code> parameter with a new instance. For troubleshooting, I'd try either looking at the Spring source code or logging the elements of <code>bindingResult</code> that <em>aren't</em> the two &quot;notEmpty&quot; cases you're looking for. Maybe there are others you need to add back to the new instance unchanged, to keep the default behavior.</p>\n"}],"owner":{"account_id":22249270,"reputation":45,"user_id":16482462,"display_name":"FalAn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689002540,"creation_date":1688732064,"question_id":76636898,"body_markdown":"i am practicing validating form with spring mvc binding result, when i validating the form, i got a result like this:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nBut i don&#39;t want the field name to just pop 2 error, i want it to pop error one at a time to an order i want, so i custom my bindingResult, here is the code:\r\n\r\nController:\r\n\r\n\t\r\n\r\n        @RequestMapping(value = {&quot;create&quot;}, method = RequestMethod.POST)\r\n    \tpublic String create(ModelMap modelMap, HttpSession session, RedirectAttributes ra, @ModelAttribute(&quot;product&quot;) @Valid Product product, BindingResult bindingResult) {\r\n    \t\tif(bindingResult.hasErrors()) {\r\n    \t\t\tvar errors = customErrorMessageOrder(bindingResult.getFieldErrors());\r\n    \t\t\tbindingResult = new BeanPropertyBindingResult(product, &quot;product&quot;);\r\n    \t\t\tfor(var e : errors) {\r\n    \t\t\t\tbindingResult.addError(e);\r\n    \t\t\t}\r\n    \t\t\tmodelMap.put(&quot;org.springframework.validation.BindingResult.product&quot;, bindingResult);\r\n    \t\t\t\r\n    \t\t\tmodelMap.put(&quot;categories&quot;, categoryService.findAll());\r\n    \t\t\treturn &quot;admin/product/create&quot;;\r\n    \t\t}\r\n    \r\n    \t\treturn &quot;redirect:/admin/product/index&quot;;\r\n    \t}\r\n    \t\r\n    \tprivate List&lt;FieldError&gt; customErrorMessageOrder(List&lt;FieldError&gt; listErrors){\r\n    \t\tvar notEmptyListErrors = listErrors\r\n    \t\t\t\t\t\t\t\t\t.stream()\r\n    \t\t\t\t\t\t\t\t\t.filter(e -&gt; e.getCode().equals(&quot;NotEmpty&quot;) || e.getCode().equals(&quot;password.notEmpty&quot;))\r\n    \t\t\t\t\t\t\t\t\t.collect(Collectors.toList());\t\r\n    \t\tif(notEmptyListErrors.size()==0) {\r\n    \t\t\treturn listErrors;\r\n    \t\t}\r\n    \t\t\r\n    \t\tvar alterListErrors = listErrors.stream().collect(Collectors.toList());\r\n    \t\t\r\n    \t\tfor(var e : notEmptyListErrors) {\r\n    \t\t\talterListErrors.removeIf(e1-&gt;e1.getField().equals(e.getField()));\r\n    \t\t}\r\n    \t\t\r\n    \t\tnotEmptyListErrors.addAll(alterListErrors);\r\n    \t\t\r\n    \t\treturn notEmptyListErrors;\r\n    \t}\r\n\r\nEverything work as i expect, but there is 1 minor problem, when i test the validation again, the ***created*** field some how became like this:\r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nMbn8.png\r\n  [2]: https://i.stack.imgur.com/di47N.png\r\n\r\nI have already put ***@DateTimeFormat(pattern = &quot;dd/MM/yyyy&quot;)*** in my ***created*** field of the ***Product*** model, and if i remove the custom ***bindingResult*** part:\r\n\r\n        @RequestMapping(value = {&quot;create&quot;}, method = RequestMethod.POST)\r\n    \tpublic String create(ModelMap modelMap, HttpSession session, RedirectAttributes ra, @ModelAttribute(&quot;product&quot;) @Valid Product product, BindingResult bindingResult) {\r\n    \t\tif(bindingResult.hasErrors()) {\r\n    \t\t\tmodelMap.put(&quot;categories&quot;, categoryService.findAll());\r\n    \t\t\treturn &quot;admin/product/create&quot;;\r\n    \t\t}\r\n    \r\n    \t\treturn &quot;redirect:/admin/product/index&quot;;\r\n    \t}\r\n\r\nThe ***created*** field&#39;s format is back to normal, so it must have something to do with my custom ***bindingResult***, but i don&#39;t know where is the problem and how to fix it, please help :(","title":"SpringMvc custom binding result break date format","body":"<p>i am practicing validating form with spring mvc binding result, when i validating the form, i got a result like this:</p>\n<p><a href=\"https://i.stack.imgur.com/nMbn8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nMbn8.png\" alt=\"enter image description here\" /></a></p>\n<p>But i don't want the field name to just pop 2 error, i want it to pop error one at a time to an order i want, so i custom my bindingResult, here is the code:</p>\n<p>Controller:</p>\n<pre><code>    @RequestMapping(value = {&quot;create&quot;}, method = RequestMethod.POST)\n    public String create(ModelMap modelMap, HttpSession session, RedirectAttributes ra, @ModelAttribute(&quot;product&quot;) @Valid Product product, BindingResult bindingResult) {\n        if(bindingResult.hasErrors()) {\n            var errors = customErrorMessageOrder(bindingResult.getFieldErrors());\n            bindingResult = new BeanPropertyBindingResult(product, &quot;product&quot;);\n            for(var e : errors) {\n                bindingResult.addError(e);\n            }\n            modelMap.put(&quot;org.springframework.validation.BindingResult.product&quot;, bindingResult);\n            \n            modelMap.put(&quot;categories&quot;, categoryService.findAll());\n            return &quot;admin/product/create&quot;;\n        }\n\n        return &quot;redirect:/admin/product/index&quot;;\n    }\n    \n    private List&lt;FieldError&gt; customErrorMessageOrder(List&lt;FieldError&gt; listErrors){\n        var notEmptyListErrors = listErrors\n                                    .stream()\n                                    .filter(e -&gt; e.getCode().equals(&quot;NotEmpty&quot;) || e.getCode().equals(&quot;password.notEmpty&quot;))\n                                    .collect(Collectors.toList());  \n        if(notEmptyListErrors.size()==0) {\n            return listErrors;\n        }\n        \n        var alterListErrors = listErrors.stream().collect(Collectors.toList());\n        \n        for(var e : notEmptyListErrors) {\n            alterListErrors.removeIf(e1-&gt;e1.getField().equals(e.getField()));\n        }\n        \n        notEmptyListErrors.addAll(alterListErrors);\n        \n        return notEmptyListErrors;\n    }\n</code></pre>\n<p>Everything work as i expect, but there is 1 minor problem, when i test the validation again, the <em><strong>created</strong></em> field some how became like this:</p>\n<p><a href=\"https://i.stack.imgur.com/di47N.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/di47N.png\" alt=\"enter image description here\" /></a></p>\n<p>I have already put <em><strong>@DateTimeFormat(pattern = &quot;dd/MM/yyyy&quot;)</strong></em> in my <em><strong>created</strong></em> field of the <em><strong>Product</strong></em> model, and if i remove the custom <em><strong>bindingResult</strong></em> part:</p>\n<pre><code>    @RequestMapping(value = {&quot;create&quot;}, method = RequestMethod.POST)\n    public String create(ModelMap modelMap, HttpSession session, RedirectAttributes ra, @ModelAttribute(&quot;product&quot;) @Valid Product product, BindingResult bindingResult) {\n        if(bindingResult.hasErrors()) {\n            modelMap.put(&quot;categories&quot;, categoryService.findAll());\n            return &quot;admin/product/create&quot;;\n        }\n\n        return &quot;redirect:/admin/product/index&quot;;\n    }\n</code></pre>\n<p>The <em><strong>created</strong></em> field's format is back to normal, so it must have something to do with my custom <em><strong>bindingResult</strong></em>, but i don't know where is the problem and how to fix it, please help :(</p>\n"},{"tags":["java","spring","join","specifications","many-to-one"],"comments":[{"owner":{"account_id":449256,"reputation":2122,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"score":0,"creation_date":1688807028,"post_id":76637836,"comment_id":135125653,"body_markdown":"Hey, I did not get your question.","body":"Hey, I did not get your question."},{"owner":{"account_id":10578739,"reputation":31,"user_id":7793324,"display_name":"Michele Genchi"},"score":0,"creation_date":1688845200,"post_id":76637836,"comment_id":135129725,"body_markdown":"This class implements Specification when criteria.getKey().contains(&quot;.&quot;)) so filter Will work on joint table city/country In This way, I can have all cities for &gt; each country in Array payload {&quot;country_code&quot;: [&quot;IT&quot;, &quot;FR&quot;]}","body":"This class implements Specification when criteria.getKey().contains(&quot;.&quot;)) so filter Will work on joint table city/country In This way, I can have all cities for &gt; each country in Array payload {&quot;country_code&quot;: [&quot;IT&quot;, &quot;FR&quot;]}"},{"owner":{"account_id":449256,"reputation":2122,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"score":0,"creation_date":1688896260,"post_id":76637836,"comment_id":135133226,"body_markdown":"Hm, this is no question. Are you aware that we expect to have a question how to solve a problem?","body":"Hm, this is no question. Are you aware that we expect to have a question how to solve a problem?"},{"owner":{"account_id":10578739,"reputation":31,"user_id":7793324,"display_name":"Michele Genchi"},"score":0,"creation_date":1688974779,"post_id":76637836,"comment_id":135141664,"body_markdown":"this is a example about my response, bad response and good response [link here](https://drive.google.com/drive/folders/1pEWZ3TbJ6qf0kWdRVDMTIG9N9Nnrn5YS?usp=drive_link)","body":"this is a example about my response, bad response and good response <a href=\"https://drive.google.com/drive/folders/1pEWZ3TbJ6qf0kWdRVDMTIG9N9Nnrn5YS?usp=drive_link\" rel=\"nofollow noreferrer\">link here</a>"}],"answers":[{"tags":[],"owner":{"account_id":10578739,"reputation":31,"user_id":7793324,"display_name":"Michele Genchi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689002535,"creation_date":1689002535,"answer_id":76655177,"question_id":76637836,"body_markdown":"    enter code here    \r\n    @Data\r\n    @Entity\r\n    @Table(name=&quot;countries&quot;) //table is cities (this is a problem)\r\n    @Validated\r\n    public class City {\r\n\r\nMy code is ok\r\n","title":"Specification&lt;T&gt; used for filtering join table with relationship @ManyToOne","body":"<pre><code>enter code here    \n@Data\n@Entity\n@Table(name=&quot;countries&quot;) //table is cities (this is a problem)\n@Validated\npublic class City {\n</code></pre>\n<p>My code is ok</p>\n"}],"owner":{"account_id":10578739,"reputation":31,"user_id":7793324,"display_name":"Michele Genchi"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689002535,"creation_date":1688740034,"question_id":76637836,"body_markdown":"[!(https://i.stack.imgur.com/p5Tjt.png)](https://i.stack.imgur.com/p5Tjt.png)\r\n```\r\n    {\r\n        &quot;country_code&quot;:[&quot;IT&quot;, &quot;FR&quot;, &quot;EG&quot;]\r\n    }\r\n```\r\n&gt; In this way I can filter all cities for specific country_code\r\n&gt; here model City and Country\r\n```\r\n\tpackage comgenchi.geotools.model;\r\n\r\n\timport javax.persistence.Entity;\r\n\timport javax.persistence.GeneratedValue;\r\n\timport javax.persistence.Id;\r\n\timport javax.persistence.JoinColumn;\r\n\timport javax.persistence.ManyToOne;\r\n\timport javax.persistence.Table;\r\n\timport javax.validation.constraints.NotBlank;\r\n\timport javax.validation.constraints.Pattern;\r\n\r\n\timport org.hibernate.validator.constraints.Range;\r\n\timport org.springframework.validation.annotation.Validated;\r\n\r\n\timport lombok.Data;\r\n\r\n\t@Data\r\n\t@Entity\r\n\t@Table(name=&quot;countries&quot;)\r\n\t@Validated\r\n\tpublic class City {\r\n\t\t\r\n\t\t@Id\r\n\t\t@GeneratedValue\r\n\t\tprotected int Id;\r\n\r\n\t\t@ManyToOne\r\n\t\t@JoinColumn(name=&quot;country_code&quot;)\r\n\t\tprotected Country country;\r\n\r\n\t\tprotected String postal_code;\r\n\t\t\r\n\t\t@NotBlank(message=&quot;position can not be blank&quot;)\r\n\t\tprotected String position;\r\n\r\n\t\t@NotBlank(message=&quot;region can not be blank&quot;)\r\n\t\tprotected String region;\r\n\r\n\t\t@NotBlank(message=&quot;region_code can not be blank&quot;)\r\n\t\tprotected String region_code;\r\n\r\n\t\t@NotBlank(message=&quot;province can not be blank&quot;)\r\n\t\tprotected String province;\r\n\t\t\r\n\t\t@Pattern(regexp=&quot;^([A-Z]{2,3})|([/d]{0,5})|(^$)$&quot;, message=&quot;sigle province format error&quot;)\r\n\t\tprotected String sigle_province;\r\n\r\n\t\t@Range(min=-90, max=90, message=&quot;Range for latitude must be from -90 to 90&quot;)\r\n\t\tprotected String latitude;\r\n\r\n\t\t@Range(min=-180, max=180, message=&quot;Range for longitude must be from -90 to 90&quot;)\r\n\t\tprotected String longitude;\r\n\r\n\t}\r\n\r\n\tpackage comgenchi.geotools.model;\r\n\r\n\timport javax.persistence.Column;\r\n\timport javax.persistence.Entity;\r\n\timport javax.persistence.Id;\r\n\timport javax.persistence.Table;\r\n\timport javax.validation.constraints.NotBlank;\r\n\timport javax.validation.constraints.Pattern;\r\n\r\n\timport org.springframework.validation.annotation.Validated;\r\n\r\n\timport lombok.Data;\r\n\r\n\t@Data\r\n\t@Entity\r\n\t@Table(name=&quot;countries&quot;)\r\n\t@Validated\r\n\tpublic class Country {\r\n\r\n\t\t@Id\r\n\t\t@Column(name=&quot;country_code&quot;, unique=true, nullable=false)\r\n\t\t@Pattern(regexp=&quot;^[A-Za-z]{2}$&quot;, message=&quot;country_code must be have 2 letters&quot;)\r\n\t\t@NotBlank(message = &quot;country_code not blank&quot;)\r\n\t\tprotected String country_code;\r\n\r\n\t\t@Column(name=&quot;country&quot;, unique=true, nullable=false)\r\n\t\t@NotBlank(message = &quot;country name not blank&quot;)\r\n\t\tprotected String name;\r\n\r\n\t}\r\n\r\n```\r\n\r\n&gt; This class implements Specification&lt;T&gt;\r\n&gt; resolve joint table city/country\r\n&gt; In This way, I can have all cities for &gt; each country in Array payload\r\n&gt; {&quot;country_code&quot;: [&quot;IT&quot;, &quot;FR&quot;, &quot;EG&quot;]}\r\nthis is my Json Response, bad e good\r\n[JsonResponse][1]\r\n\r\n\r\n \r\n\r\n```\r\n\tpackage comgenchi.geotools.controller;\r\n\r\n\timport javax.persistence.criteria.CriteriaBuilder;\r\n\timport javax.persistence.criteria.CriteriaQuery;\r\n\timport javax.persistence.criteria.Path;\r\n\timport javax.persistence.criteria.Predicate;\r\n\timport javax.persistence.criteria.Root;\r\n\r\n\timport org.springframework.data.jpa.domain.Specification;\r\n\timport org.springframework.lang.Nullable;\r\n\r\n\timport comgenchi.geotools.model.SearchCriteria;\r\n\r\n\t// return in all method un specification&lt;Country&gt;\r\n\tpublic final class Specs&lt;T&gt; implements Specification&lt;T&gt; {\r\n\r\n\t  private final SearchCriteria criteria;\r\n\r\n\t  public Specs(SearchCriteria searchCriteria) {\r\n\t\tthis.criteria = searchCriteria;\r\n\t  }\r\n\r\n\t  @Override\r\n\t  @Nullable\r\n\t  public Predicate toPredicate(\r\n\t\tRoot&lt;T&gt; root,\r\n\t\tCriteriaQuery&lt;?&gt; query,\r\n\t\tCriteriaBuilder builder\r\n\t  ) {\r\n\t\t\r\n\t\tPath&lt;Object&gt; key = null;\r\n\t\t//here resolve join Join Country/City\r\n&gt; \r\n\r\n\t\tswitch (criteria.getOperation()) {\r\n\t\t  case &quot;:&quot;:\r\n\t\t\tif (key.getJavaType() == String.class) {\r\n\t\t\t  return builder.like(\r\n\t\t\t\troot.&lt;String&gt;get(criteria.getKey()),\r\n\t\t\t\t&quot;%&quot; + criteria.getValue() + &quot;%&quot;\r\n\t\t\t  );\r\n\t\t\t} else {\r\n\t\t\t  return builder.equal(key, criteria.getValue());\r\n\t\t\t}\r\n\t\t  case &quot;=&quot;:\r\n\t\t\treturn builder.equal(key, criteria.getValue());\r\n\t\t  case &quot;in&quot;:\r\n\t\t\treturn builder.in(key).value(criteria.getValue());\r\n\t\t  default:\r\n\t\t\treturn null;\r\n\t\t}\r\n\t  }\r\n\t}\r\n\r\n```\r\n\r\n\r\n  [1]: https://drive.google.com/drive/folders/1pEWZ3TbJ6qf0kWdRVDMTIG9N9Nnrn5YS?usp=drive_link","title":"Specification&lt;T&gt; used for filtering join table with relationship @ManyToOne","body":"<p><a href=\"https://i.stack.imgur.com/p5Tjt.png\" rel=\"nofollow noreferrer\">!(https://i.stack.imgur.com/p5Tjt.png)</a></p>\n<pre><code>    {\n        &quot;country_code&quot;:[&quot;IT&quot;, &quot;FR&quot;, &quot;EG&quot;]\n    }\n</code></pre>\n<blockquote>\n<p>In this way I can filter all cities for specific country_code\nhere model City and Country</p>\n</blockquote>\n<pre><code>    package comgenchi.geotools.model;\n\n    import javax.persistence.Entity;\n    import javax.persistence.GeneratedValue;\n    import javax.persistence.Id;\n    import javax.persistence.JoinColumn;\n    import javax.persistence.ManyToOne;\n    import javax.persistence.Table;\n    import javax.validation.constraints.NotBlank;\n    import javax.validation.constraints.Pattern;\n\n    import org.hibernate.validator.constraints.Range;\n    import org.springframework.validation.annotation.Validated;\n\n    import lombok.Data;\n\n    @Data\n    @Entity\n    @Table(name=&quot;countries&quot;)\n    @Validated\n    public class City {\n        \n        @Id\n        @GeneratedValue\n        protected int Id;\n\n        @ManyToOne\n        @JoinColumn(name=&quot;country_code&quot;)\n        protected Country country;\n\n        protected String postal_code;\n        \n        @NotBlank(message=&quot;position can not be blank&quot;)\n        protected String position;\n\n        @NotBlank(message=&quot;region can not be blank&quot;)\n        protected String region;\n\n        @NotBlank(message=&quot;region_code can not be blank&quot;)\n        protected String region_code;\n\n        @NotBlank(message=&quot;province can not be blank&quot;)\n        protected String province;\n        \n        @Pattern(regexp=&quot;^([A-Z]{2,3})|([/d]{0,5})|(^$)$&quot;, message=&quot;sigle province format error&quot;)\n        protected String sigle_province;\n\n        @Range(min=-90, max=90, message=&quot;Range for latitude must be from -90 to 90&quot;)\n        protected String latitude;\n\n        @Range(min=-180, max=180, message=&quot;Range for longitude must be from -90 to 90&quot;)\n        protected String longitude;\n\n    }\n\n    package comgenchi.geotools.model;\n\n    import javax.persistence.Column;\n    import javax.persistence.Entity;\n    import javax.persistence.Id;\n    import javax.persistence.Table;\n    import javax.validation.constraints.NotBlank;\n    import javax.validation.constraints.Pattern;\n\n    import org.springframework.validation.annotation.Validated;\n\n    import lombok.Data;\n\n    @Data\n    @Entity\n    @Table(name=&quot;countries&quot;)\n    @Validated\n    public class Country {\n\n        @Id\n        @Column(name=&quot;country_code&quot;, unique=true, nullable=false)\n        @Pattern(regexp=&quot;^[A-Za-z]{2}$&quot;, message=&quot;country_code must be have 2 letters&quot;)\n        @NotBlank(message = &quot;country_code not blank&quot;)\n        protected String country_code;\n\n        @Column(name=&quot;country&quot;, unique=true, nullable=false)\n        @NotBlank(message = &quot;country name not blank&quot;)\n        protected String name;\n\n    }\n\n</code></pre>\n<blockquote>\n<p>This class implements Specification\nresolve joint table city/country\nIn This way, I can have all cities for &gt; each country in Array payload\n{&quot;country_code&quot;: [&quot;IT&quot;, &quot;FR&quot;, &quot;EG&quot;]}\nthis is my Json Response, bad e good\n<a href=\"https://drive.google.com/drive/folders/1pEWZ3TbJ6qf0kWdRVDMTIG9N9Nnrn5YS?usp=drive_link\" rel=\"nofollow noreferrer\">JsonResponse</a></p>\n</blockquote>\n<pre><code>    package comgenchi.geotools.controller;\n\n    import javax.persistence.criteria.CriteriaBuilder;\n    import javax.persistence.criteria.CriteriaQuery;\n    import javax.persistence.criteria.Path;\n    import javax.persistence.criteria.Predicate;\n    import javax.persistence.criteria.Root;\n\n    import org.springframework.data.jpa.domain.Specification;\n    import org.springframework.lang.Nullable;\n\n    import comgenchi.geotools.model.SearchCriteria;\n\n    // return in all method un specification&lt;Country&gt;\n    public final class Specs&lt;T&gt; implements Specification&lt;T&gt; {\n\n      private final SearchCriteria criteria;\n\n      public Specs(SearchCriteria searchCriteria) {\n        this.criteria = searchCriteria;\n      }\n\n      @Override\n      @Nullable\n      public Predicate toPredicate(\n        Root&lt;T&gt; root,\n        CriteriaQuery&lt;?&gt; query,\n        CriteriaBuilder builder\n      ) {\n        \n        Path&lt;Object&gt; key = null;\n        //here resolve join Join Country/City\n&gt; \n\n        switch (criteria.getOperation()) {\n          case &quot;:&quot;:\n            if (key.getJavaType() == String.class) {\n              return builder.like(\n                root.&lt;String&gt;get(criteria.getKey()),\n                &quot;%&quot; + criteria.getValue() + &quot;%&quot;\n              );\n            } else {\n              return builder.equal(key, criteria.getValue());\n            }\n          case &quot;=&quot;:\n            return builder.equal(key, criteria.getValue());\n          case &quot;in&quot;:\n            return builder.in(key).value(criteria.getValue());\n          default:\n            return null;\n        }\n      }\n    }\n\n</code></pre>\n"},{"tags":["java","spring-boot","slf4j","lombok"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1689002948,"post_id":76654902,"comment_id":135148181,"body_markdown":"Did you try reading the Javadoc on those annotations?","body":"Did you try reading the Javadoc on those annotations?"},{"owner":{"account_id":150121,"reputation":768,"user_id":363075,"accept_rate":100,"display_name":"Tarun"},"score":0,"creation_date":1690338484,"post_id":76654902,"comment_id":135338164,"body_markdown":"Yes, the javadoc did not explained why and when to use this @XSlf4 annotation.","body":"Yes, the javadoc did not explained why and when to use this @XSlf4 annotation."}],"answers":[{"tags":[],"owner":{"account_id":75804,"reputation":94815,"user_id":217324,"accept_rate":96,"display_name":"Nathan Hughes"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1689002481,"creation_date":1689001651,"answer_id":76655075,"question_id":76654902,"body_markdown":"One annotation results in a normal logger, the other results in an extended logger. \r\n\r\nLombok generates this code for the xslf4j annotation (this code came from https://projectlombok.org/api/lombok/extern/slf4j/XSlf4j):\r\n\r\n     private static final org.slf4j.ext.XLogger log = org.slf4j.ext.XLoggerFactory.getXLogger(LogExample.class);\r\n\r\n\r\n\r\nXLogger is an extended logger, see https://www.slf4j.org/extensions.html, it has a description starting with this summary: \r\n\r\n&gt; The XLogger class provides a few extra logging methods that are quite useful for following the execution path of applications. These methods generate logging events that can be filtered separately from other debug logging. Liberal use of these methods is encouraged as the output has been found to \r\n&gt;* aid in problem diagnosis in development without requiring a debug session\r\n&gt;* aid in problem diagnosis in production where no debugging is possible\r\n&gt;* help educate new developers in learning the application.\r\n\r\n","title":"What is difference between @XSlf4j and @Slf4j annotation in Lombok?","body":"<p>One annotation results in a normal logger, the other results in an extended logger.</p>\n<p>Lombok generates this code for the xslf4j annotation (this code came from <a href=\"https://projectlombok.org/api/lombok/extern/slf4j/XSlf4j\" rel=\"nofollow noreferrer\">https://projectlombok.org/api/lombok/extern/slf4j/XSlf4j</a>):</p>\n<pre><code> private static final org.slf4j.ext.XLogger log = org.slf4j.ext.XLoggerFactory.getXLogger(LogExample.class);\n</code></pre>\n<p>XLogger is an extended logger, see <a href=\"https://www.slf4j.org/extensions.html\" rel=\"nofollow noreferrer\">https://www.slf4j.org/extensions.html</a>, it has a description starting with this summary:</p>\n<blockquote>\n<p>The XLogger class provides a few extra logging methods that are quite useful for following the execution path of applications. These methods generate logging events that can be filtered separately from other debug logging. Liberal use of these methods is encouraged as the output has been found to</p>\n<ul>\n<li>aid in problem diagnosis in development without requiring a debug session</li>\n<li>aid in problem diagnosis in production where no debugging is possible</li>\n<li>help educate new developers in learning the application.</li>\n</ul>\n</blockquote>\n"}],"owner":{"account_id":150121,"reputation":768,"user_id":363075,"accept_rate":100,"display_name":"Tarun"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":624,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":76655075,"answer_count":1,"score":2,"last_activity_date":1689002481,"creation_date":1689000507,"question_id":76654902,"body_markdown":"Can someone please explain the difference between `lombok.extern.slf4j.XSlf4j` and `lombok.extern.slf4j.Slf4j`? Looks like `XSlf4j` is a new addition, why was this new annotation added to Lombok library.","title":"What is difference between @XSlf4j and @Slf4j annotation in Lombok?","body":"<p>Can someone please explain the difference between <code>lombok.extern.slf4j.XSlf4j</code> and <code>lombok.extern.slf4j.Slf4j</code>? Looks like <code>XSlf4j</code> is a new addition, why was this new annotation added to Lombok library.</p>\n"},{"tags":["java","spring-security"],"comments":[{"owner":{"account_id":11092824,"reputation":484,"user_id":8144061,"accept_rate":100,"display_name":"Wing Kui Tsoi"},"score":0,"creation_date":1688989760,"post_id":76653380,"comment_id":135144793,"body_markdown":"you can encrypt your username and password?","body":"you can encrypt your username and password?"},{"owner":{"account_id":16435976,"reputation":162,"user_id":11873562,"display_name":"IceMajor"},"score":0,"creation_date":1688990616,"post_id":76653380,"comment_id":135144988,"body_markdown":"`headers.setBasicAuth(loggedUser.getUsername(), loggedUser.getPassword());` &lt;-- hashed password.\n\n\n`HttpEntity request = new HttpEntity(headers);` &lt;-- creating Http entity with above header\n\n\n`var response = restTemplate.exchange(&quot;/api/admin/entity&quot;, HttpMethod.GET, request, String.class);` &lt;-- and making an HTTP request.\nProviding hashed password as password to Authorization Basic header does not work","body":"<code>headers.setBasicAuth(loggedUser.getUsername(), loggedUser.getPassword());</code> &lt;-- hashed password.   <code>HttpEntity request = new HttpEntity(headers);</code> &lt;-- creating Http entity with above header   <code>var response = restTemplate.exchange(&quot;&#47;api&#47;admin&#47;entity&quot;, HttpMethod.GET, request, String.class);</code> &lt;-- and making an HTTP request. Providing hashed password as password to Authorization Basic header does not work"},{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1688999051,"post_id":76653380,"comment_id":135147155,"body_markdown":"`However, I don&#39;t want to explicitly state username and password in the code` so what do you actually want to do?","body":"<code>However, I don&#39;t want to explicitly state username and password in the code</code> so what do you actually want to do?"},{"owner":{"account_id":16435976,"reputation":162,"user_id":11873562,"display_name":"IceMajor"},"score":0,"creation_date":1688999872,"post_id":76653380,"comment_id":135147375,"body_markdown":"@Toerktumlare\nI&#39;m using Vaadin for frontend and I&#39;d like some of my views (pages) to have slighlty different content depending on the currently logged-in user.\n\nFor example, I&#39;ve got a grid which contains some entities. When noone is logged-in, then I&#39;d like to fetch these entities from `/api/entity`. However, if it&#39;s admin visiting this view, then the entities should be acquired from `/api/admin/entity` endpoint.\n\nObviously `/api/admin/entity` is secured, thus I need to provide admin&#39;s credentials. I don&#39;t want to do it explicitly, but I can - for example - provide it with `UserDetails`.","body":"@Toerktumlare I&#39;m using Vaadin for frontend and I&#39;d like some of my views (pages) to have slighlty different content depending on the currently logged-in user.  For example, I&#39;ve got a grid which contains some entities. When noone is logged-in, then I&#39;d like to fetch these entities from <code>&#47;api&#47;entity</code>. However, if it&#39;s admin visiting this view, then the entities should be acquired from <code>&#47;api&#47;admin&#47;entity</code> endpoint.  Obviously <code>&#47;api&#47;admin&#47;entity</code> is secured, thus I need to provide admin&#39;s credentials. I don&#39;t want to do it explicitly, but I can - for example - provide it with <code>UserDetails</code>."},{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1689000640,"post_id":76653380,"comment_id":135147558,"body_markdown":"please update your question with your actual intent istead of writing it in the comments","body":"please update your question with your actual intent istead of writing it in the comments"},{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1689000718,"post_id":76653380,"comment_id":135147578,"body_markdown":"`However, if it&#39;s admin visiting this view,` if an admin is visiting he must first login, so he should then provide his username and password.","body":"<code>However, if it&#39;s admin visiting this view,</code> if an admin is visiting he must first login, so he should then provide his username and password."},{"owner":{"account_id":16435976,"reputation":162,"user_id":11873562,"display_name":"IceMajor"},"score":0,"creation_date":1689001106,"post_id":76653380,"comment_id":135147685,"body_markdown":"@Toerktumlare Yes, admin provides credentials what results in successful authentication. But in view class, `RestTemplate` (I&#39;ve tried also `WebClient`) needs to have admin credentials passed: it does not detect them automatically. Here&#39;s where I&#39;m stuck :/","body":"@Toerktumlare Yes, admin provides credentials what results in successful authentication. But in view class, <code>RestTemplate</code> (I&#39;ve tried also <code>WebClient</code>) needs to have admin credentials passed: it does not detect them automatically. Here&#39;s where I&#39;m stuck :/"},{"owner":{"account_id":16435976,"reputation":162,"user_id":11873562,"display_name":"IceMajor"},"score":0,"creation_date":1689001924,"post_id":76653380,"comment_id":135147918,"body_markdown":"@Toerktumlare I&#39;ve updated main post. Thanks! I&#39;d be grateful, if you had taken a look :)","body":"@Toerktumlare I&#39;ve updated main post. Thanks! I&#39;d be grateful, if you had taken a look :)"},{"owner":{"account_id":18535178,"reputation":340,"user_id":13505007,"display_name":"Spyros Palaiokostas"},"score":0,"creation_date":1689006630,"post_id":76653380,"comment_id":135149043,"body_markdown":"If I understand correctly, you want to get the logged-in user and then perform a REST API call with the user&#39;s credentials. You can use the security context to obtain the credentials of the logged-in user `SecurityContextHolder.getContext().getAuthentication().getCredentials()`. The credentials are set by the `AuthenticationManager` that you have configured.","body":"If I understand correctly, you want to get the logged-in user and then perform a REST API call with the user&#39;s credentials. You can use the security context to obtain the credentials of the logged-in user <code>SecurityContextHolder.getContext().getAuthentication().getCr&zwnj;&#8203;edentials()</code>. The credentials are set by the <code>AuthenticationManager</code> that you have configured."},{"owner":{"account_id":16435976,"reputation":162,"user_id":11873562,"display_name":"IceMajor"},"score":0,"creation_date":1689170422,"post_id":76653380,"comment_id":135175771,"body_markdown":"@spyrospal Yes, you got it, but the `SecurityContextHolder.getContext().getAuthentication().getCredentials()` returned `null`. Correct me if I&#39;m wrong, but after the authentication Spring erases the credentials. As you suggested, I&#39;ve configured `AuthenticationManager` and made it *not* erase the credentials through `authenticationManagerBuilder.eraseCredentials(false);`. Now I can use RestTemplate, but I feel like this approach - with credentials not erased - is bad practice. Did you have another concept in mind in terms of `AuthenticationManager` config?","body":"@spyrospal Yes, you got it, but the <code>SecurityContextHolder.getContext().getAuthentication().getCr&zwnj;&#8203;edentials()</code> returned <code>null</code>. Correct me if I&#39;m wrong, but after the authentication Spring erases the credentials. As you suggested, I&#39;ve configured <code>AuthenticationManager</code> and made it <i>not</i> erase the credentials through <code>authenticationManagerBuilder.eraseCredentials(false);</code>. Now I can use RestTemplate, but I feel like this approach - with credentials not erased - is bad practice. Did you have another concept in mind in terms of <code>AuthenticationManager</code> config?"},{"owner":{"account_id":18535178,"reputation":340,"user_id":13505007,"display_name":"Spyros Palaiokostas"},"score":0,"creation_date":1689172261,"post_id":76653380,"comment_id":135176241,"body_markdown":"You can set the username and password on the `UserDetails` object by configuring the `AuthenticationManager` to populate those values so it is available there instead of on the `Credentials` object. I am not sure that this is a good practice tho","body":"You can set the username and password on the <code>UserDetails</code> object by configuring the <code>AuthenticationManager</code> to populate those values so it is available there instead of on the <code>Credentials</code> object. I am not sure that this is a good practice tho"},{"owner":{"account_id":16435976,"reputation":162,"user_id":11873562,"display_name":"IceMajor"},"score":0,"creation_date":1689186338,"post_id":76653380,"comment_id":135179276,"body_markdown":"Yeah, right that&#39;s also possible. But as you said, I don&#39;t think this is a good practice...\n\nUntil I find the solution to the question&#39;s problem, I&#39;ll use services to communicate with back-end, not controllers.","body":"Yeah, right that&#39;s also possible. But as you said, I don&#39;t think this is a good practice...  Until I find the solution to the question&#39;s problem, I&#39;ll use services to communicate with back-end, not controllers."}],"owner":{"account_id":16435976,"reputation":162,"user_id":11873562,"display_name":"IceMajor"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689002399,"creation_date":1688989276,"question_id":76653380,"body_markdown":"I&#39;d like to make an HTTP request to one of the secured endpoints in my rest controller.\r\n\r\nI&#39;d like it to do that with `RestTemplate` and use basic auth to authenticate. However, I don&#39;t want to explicitly state username and password in the code. Thus:\r\n```\r\nHttpHeaders headers = new HttpHeaders();\r\nheaders.setBasicAuth(&quot;admin&quot;, &quot;admin&quot;);\r\n```\r\nis something I want to avoid.\r\n\r\nCan someone please help me do so?\r\n\r\n**EDIT**: I realize I need to give more context, the above is way too little.\r\n\r\nI&#39;m making a full-stack web app. I use Spring Boot for backend and Vaadin for frontend. I do have 2 endpoints and both of them retrieve a list of `Entity` objects.\r\n\r\n1. `/api/entity` - retrives a part of `Entity` objects from database.\r\n2. `/api/admin/entity` - retrives all `Entity` objects.\r\n\r\nThere&#39;s `EntityView` class which is essentially a Vaadin class responsible for graphical displaying of the `Entity` data. Now, this view is restricted to **AUTHENTICATED** users only.\r\n\r\nSo, a user logs into the application. Then, user accesses the page (through `/entity` endpoint). Then, on the page there&#39;s a grid which is supposed to have `Entity` objects in it.\r\n\r\nSo, I&#39;ve written an `updateList` method which is supposed to fill the grid with data.\r\n```\r\nprivate void updateList(UserDetails loggedUser) {\r\n    if(loggedUser.getAuthorities().contains(new SimpleGrantedAuthority(Roles.ADMIN))) {\r\n        ResponseEntity&lt;List&lt;Entity&gt;&gt; response = restTemplate.\r\n               exchange(&quot;/api/admin/entity&quot;, HttpMethod.GET, HttpEntity.EMPTY, new ParameterizedTypeReference&lt;List&lt;Entity&gt;&gt;() {});\r\n        this.grid.setItems(response.getBody());\r\n    } else {\r\n        ResponseEntity&lt;List&lt;Entity&gt;&gt; response = restTemplate.\r\n               exchange(&quot;/api/entity&quot;, HttpMethod.GET, HttpEntity.EMPTY, new ParameterizedTypeReference&lt;List&lt;Entity&gt;&gt;() {}); \r\n        this.grid.setItems(response.getBody());\r\n    }\r\n```\r\n\r\nHow do I provide `RestTemplate` with the `loggedUser` credentials?\r\n\r\n**EDIT 2:** I&#39;m looking forward to any feedback on the actual practice of connecting the backend with frontend this way. For example, in Vaadin&#39;s official tutorials, they used services to connect with backend. I use (well, I&#39;m trying to) controller to do so as I intuitively think that&#39;s better?\r\n\r\nI&#39;m, however, looking for discussion on this subject as well. Maybe I should use `EntityService` instead of `EntityController`? Why so?","title":"RestTemplate and HTTP Basic but with hidden credentials","body":"<p>I'd like to make an HTTP request to one of the secured endpoints in my rest controller.</p>\n<p>I'd like it to do that with <code>RestTemplate</code> and use basic auth to authenticate. However, I don't want to explicitly state username and password in the code. Thus:</p>\n<pre><code>HttpHeaders headers = new HttpHeaders();\nheaders.setBasicAuth(&quot;admin&quot;, &quot;admin&quot;);\n</code></pre>\n<p>is something I want to avoid.</p>\n<p>Can someone please help me do so?</p>\n<p><strong>EDIT</strong>: I realize I need to give more context, the above is way too little.</p>\n<p>I'm making a full-stack web app. I use Spring Boot for backend and Vaadin for frontend. I do have 2 endpoints and both of them retrieve a list of <code>Entity</code> objects.</p>\n<ol>\n<li><code>/api/entity</code> - retrives a part of <code>Entity</code> objects from database.</li>\n<li><code>/api/admin/entity</code> - retrives all <code>Entity</code> objects.</li>\n</ol>\n<p>There's <code>EntityView</code> class which is essentially a Vaadin class responsible for graphical displaying of the <code>Entity</code> data. Now, this view is restricted to <strong>AUTHENTICATED</strong> users only.</p>\n<p>So, a user logs into the application. Then, user accesses the page (through <code>/entity</code> endpoint). Then, on the page there's a grid which is supposed to have <code>Entity</code> objects in it.</p>\n<p>So, I've written an <code>updateList</code> method which is supposed to fill the grid with data.</p>\n<pre><code>private void updateList(UserDetails loggedUser) {\n    if(loggedUser.getAuthorities().contains(new SimpleGrantedAuthority(Roles.ADMIN))) {\n        ResponseEntity&lt;List&lt;Entity&gt;&gt; response = restTemplate.\n               exchange(&quot;/api/admin/entity&quot;, HttpMethod.GET, HttpEntity.EMPTY, new ParameterizedTypeReference&lt;List&lt;Entity&gt;&gt;() {});\n        this.grid.setItems(response.getBody());\n    } else {\n        ResponseEntity&lt;List&lt;Entity&gt;&gt; response = restTemplate.\n               exchange(&quot;/api/entity&quot;, HttpMethod.GET, HttpEntity.EMPTY, new ParameterizedTypeReference&lt;List&lt;Entity&gt;&gt;() {}); \n        this.grid.setItems(response.getBody());\n    }\n</code></pre>\n<p>How do I provide <code>RestTemplate</code> with the <code>loggedUser</code> credentials?</p>\n<p><strong>EDIT 2:</strong> I'm looking forward to any feedback on the actual practice of connecting the backend with frontend this way. For example, in Vaadin's official tutorials, they used services to connect with backend. I use (well, I'm trying to) controller to do so as I intuitively think that's better?</p>\n<p>I'm, however, looking for discussion on this subject as well. Maybe I should use <code>EntityService</code> instead of <code>EntityController</code>? Why so?</p>\n"},{"tags":["java","spring","spring-aop"],"comments":[{"owner":{"account_id":255453,"reputation":3554,"user_id":535515,"accept_rate":100,"display_name":"Gus"},"score":1,"creation_date":1689004186,"post_id":76655150,"comment_id":135148460,"body_markdown":"Spring has a way to configure singleton-style proxies at startup, and on-demand proxies for other scopes.  It almost certainly affects execution time in some way; I&#39;m pretty sure Spring doesn&#39;t claim aspects are zero-cost.","body":"Spring has a way to configure singleton-style proxies at startup, and on-demand proxies for other scopes.  It almost certainly affects execution time in some way; I&#39;m pretty sure Spring doesn&#39;t claim aspects are zero-cost."},{"owner":{"account_id":5278004,"reputation":6696,"user_id":4214241,"display_name":"R.G"},"score":0,"creation_date":1689094757,"post_id":76655150,"comment_id":135163473,"body_markdown":"The point to note here is that , proxy object creation is not before the invocation of a method , rather it is on the proxy object , a method is getting called. Which negates point 2 and 3 . Do read through [Understanding AOP Proxies](https://docs.spring.io/spring-framework/reference/core/aop/proxying.html#aop-understanding-aop-proxies) - paragraph starting with `The key thing to understand here..` . Also , not every bean is proxied by the Spring Container .","body":"The point to note here is that , proxy object creation is not before the invocation of a method , rather it is on the proxy object , a method is getting called. Which negates point 2 and 3 . Do read through <a href=\"https://docs.spring.io/spring-framework/reference/core/aop/proxying.html#aop-understanding-aop-proxies\" rel=\"nofollow noreferrer\">Understanding AOP Proxies</a> - paragraph starting with <code>The key thing to understand here..</code> . Also , not every bean is proxied by the Spring Container ."}],"owner":{"account_id":397984,"reputation":535,"user_id":762421,"accept_rate":36,"display_name":"user762421"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689002318,"creation_date":1689002318,"question_id":76655150,"body_markdown":"I have been reading about Spring AOP and have a very basic question. When does Spring AOP creates a proxy object? \r\n\r\n- Is it during the application start time when beans are created? \r\n\r\nOR\r\n- Is it any time between application start(inclusive) and before invocation of a method of the object?\r\n\r\nOR\r\n- It could be either?\r\n\r\nIf its the 2nd/3rd point then it must be true that it can add to the execution time of a method call since first it may need to create Proxy object? ","title":"When are proxy objects created in Spring AOP?","body":"<p>I have been reading about Spring AOP and have a very basic question. When does Spring AOP creates a proxy object?</p>\n<ul>\n<li>Is it during the application start time when beans are created?</li>\n</ul>\n<p>OR</p>\n<ul>\n<li>Is it any time between application start(inclusive) and before invocation of a method of the object?</li>\n</ul>\n<p>OR</p>\n<ul>\n<li>It could be either?</li>\n</ul>\n<p>If its the 2nd/3rd point then it must be true that it can add to the execution time of a method call since first it may need to create Proxy object?</p>\n"},{"tags":["java","android","xml","animation","android-6.0-marshmallow"],"comments":[{"owner":{"account_id":2128241,"reputation":3579,"user_id":1889768,"accept_rate":85,"display_name":"Abbas"},"score":0,"creation_date":1472734352,"post_id":39271662,"comment_id":65878594,"body_markdown":"What is the recyclerview version you are using?","body":"What is the recyclerview version you are using?"},{"owner":{"account_id":6341826,"reputation":300,"user_id":4923485,"accept_rate":80,"display_name":"Velrest"},"score":0,"creation_date":1472734555,"post_id":39271662,"comment_id":65878765,"body_markdown":"recycleview-v7-23.4.0 is it that what you mean?","body":"recycleview-v7-23.4.0 is it that what you mean?"},{"owner":{"account_id":2128241,"reputation":3579,"user_id":1889768,"accept_rate":85,"display_name":"Abbas"},"score":0,"creation_date":1472735184,"post_id":39271662,"comment_id":65879209,"body_markdown":"Try overriding `onMeasure` of `RecyclerView` and set max-height.","body":"Try overriding <code>onMeasure</code> of <code>RecyclerView</code> and set max-height."},{"owner":{"account_id":2128241,"reputation":3579,"user_id":1889768,"accept_rate":85,"display_name":"Abbas"},"score":1,"creation_date":1472735568,"post_id":39271662,"comment_id":65879512,"body_markdown":"Also check if anywhere in the view heirarchy a parent has height=&quot;wrap_content&quot;","body":"Also check if anywhere in the view heirarchy a parent has height=&quot;wrap_content&quot;"},{"owner":{"account_id":6341826,"reputation":300,"user_id":4923485,"accept_rate":80,"display_name":"Velrest"},"score":0,"creation_date":1472737542,"post_id":39271662,"comment_id":65881069,"body_markdown":"@Abbas if i try to override RecyclerView I always get:\nandroid.view.InflateException: Binary XML file line #65: Binary XML file line #11: Error inflating class","body":"@Abbas if i try to override RecyclerView I always get: android.view.InflateException: Binary XML file line #65: Binary XML file line #11: Error inflating class"},{"owner":{"account_id":2128241,"reputation":3579,"user_id":1889768,"accept_rate":85,"display_name":"Abbas"},"score":0,"creation_date":1472742976,"post_id":39271662,"comment_id":65885195,"body_markdown":"That could be for multiple reasons, add your updated `xml` for `RecyclerView` and also the *extended* `RecyclerView` in Java code.","body":"That could be for multiple reasons, add your updated <code>xml</code> for <code>RecyclerView</code> and also the <i>extended</i> <code>RecyclerView</code> in Java code."}],"answers":[{"tags":[],"owner":{"account_id":6341826,"reputation":300,"user_id":4923485,"accept_rate":80,"display_name":"Velrest"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1554704139,"creation_date":1473342053,"answer_id":39392550,"question_id":39271662,"body_markdown":"So I finally found out what the problem was.  \r\nIt actually was the `NestedScrollView` which resizes it&#39;s children.  \r\nSo what you need to do is to simply add `android:fillViewport=&quot;true&quot;` to your `NestedScrollView`.  \r\n\r\nThats it. I hope it helps someone although it&#39;s not a really difficult bug. I just searched at the wrong places.","title":"Android Recycler View notifyItemRemoved animation cut off","body":"<p>So I finally found out what the problem was.<br>\nIt actually was the <code>NestedScrollView</code> which resizes it's children.<br>\nSo what you need to do is to simply add <code>android:fillViewport=\"true\"</code> to your <code>NestedScrollView</code>.  </p>\n\n<p>Thats it. I hope it helps someone although it's not a really difficult bug. I just searched at the wrong places.</p>\n"}],"owner":{"account_id":6341826,"reputation":300,"user_id":4923485,"accept_rate":80,"display_name":"Velrest"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1027,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":39392550,"answer_count":1,"score":3,"last_activity_date":1689002262,"creation_date":1472733061,"question_id":39271662,"body_markdown":"I&#39;m currently working on a Grade Manager for school written in Java for Android 6. I just started with Android so I&#39;m no expert.\r\n\r\n__The Problem:__  \r\nIf I call the method `notifyItemRemoved()` on my RecycleView Adapter and the last CardView moves from the left bottom place to the upper right place, the View is resized and the animation is cut of.  \r\n\r\nNow I don&#39;t know why that view is resized because RecycleView&#39;s `layout_height` attribute is `match_parent`.\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;android.support.v4.widget.NestedScrollView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        app:layout_behavior=&quot;@string/appbar_scrolling_view_behavior&quot;\r\n        tools:context=&quot;.SemesterActivity&quot;\r\n        tools:showIn=&quot;@layout/activity_semester&quot;&gt;\r\n    \r\n        &lt;android.support.v7.widget.RecyclerView\r\n            android:id=&quot;@+id/subject_list_view&quot;\r\n            android:padding=&quot;20dp&quot;\r\n            android:layout_below=&quot;@+id/title&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:orientation=&quot;vertical&quot;/&gt;\r\n    \r\n    &lt;/android.support.v4.widget.NestedScrollView&gt;\r\n\r\nI took a `GridLayoutManager` as LayoutManager for the RecycleView.\r\n\r\n    subjectListView.setLayoutManager(new GridLayoutManager(ActivityContext, 2));\r\n\r\nHow i update the RecycleView:\r\n\r\n    SubjectAdapterObj.notifyItemRemoved(viewHolder.getAdapterPosition());\r\n\r\nThe animation is the default animation.\r\n\r\nCould the `GridLayoutManager` be the problem?\r\n\r\n\r\n__Video Example:__\r\n\r\n\r\n\r\n[![Animation cut off][1]][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/oqqsi.gif\r\n","title":"Android Recycler View notifyItemRemoved animation cut off","body":"<p>I'm currently working on a Grade Manager for school written in Java for Android 6. I just started with Android so I'm no expert.</p>\n<p><strong>The Problem:</strong><br />\nIf I call the method <code>notifyItemRemoved()</code> on my RecycleView Adapter and the last CardView moves from the left bottom place to the upper right place, the View is resized and the animation is cut of.</p>\n<p>Now I don't know why that view is resized because RecycleView's <code>layout_height</code> attribute is <code>match_parent</code>.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;android.support.v4.widget.NestedScrollView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    app:layout_behavior=&quot;@string/appbar_scrolling_view_behavior&quot;\n    tools:context=&quot;.SemesterActivity&quot;\n    tools:showIn=&quot;@layout/activity_semester&quot;&gt;\n\n    &lt;android.support.v7.widget.RecyclerView\n        android:id=&quot;@+id/subject_list_view&quot;\n        android:padding=&quot;20dp&quot;\n        android:layout_below=&quot;@+id/title&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        android:orientation=&quot;vertical&quot;/&gt;\n\n&lt;/android.support.v4.widget.NestedScrollView&gt;\n</code></pre>\n<p>I took a <code>GridLayoutManager</code> as LayoutManager for the RecycleView.</p>\n<pre><code>subjectListView.setLayoutManager(new GridLayoutManager(ActivityContext, 2));\n</code></pre>\n<p>How i update the RecycleView:</p>\n<pre><code>SubjectAdapterObj.notifyItemRemoved(viewHolder.getAdapterPosition());\n</code></pre>\n<p>The animation is the default animation.</p>\n<p>Could the <code>GridLayoutManager</code> be the problem?</p>\n<p><strong>Video Example:</strong></p>\n<p><a href=\"https://i.stack.imgur.com/oqqsi.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oqqsi.gif\" alt=\"Animation cut off\" /></a></p>\n"},{"tags":["java","spring","hibernate","jpa"],"owner":{"account_id":1014308,"reputation":204,"user_id":1026216,"accept_rate":75,"display_name":"talkshowhost"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689002180,"creation_date":1689002180,"question_id":76655130,"body_markdown":"I have the following entity\r\n\r\n```java\r\n@Table(name = &quot;companies&quot;)\r\npublic class Company {\r\n\r\n    @Id\r\n    @GeneratedValue\r\n    @Column(insertable = false, updatable = false, name = &quot;id&quot;, columnDefinition = &quot;uuid&quot;)\r\n    private UUID id;\r\n\r\n    private UUID parentId;\r\n\r\n    @OneToMany(targetEntity = Company.class, fetch = FetchType.EAGER, mappedBy = Fields.parentId)\r\n    @Where(clause = &quot;deleted_at is null&quot;)\r\n    private List&lt;Company&gt; childCompanies;\r\n\r\n    private Instant deletedAt;\r\n    private UUID deletedBy;\r\n}\r\n```\r\n\r\nThe problem I am having is in the scenario when all child companies have been deleted, and calling `repository.findById(parentCompanyId)` returns an empty optional, because the join clause created by hibernate on the resulting query returns no results, which makes sense based on the query it creates, but it is not what I was expecting from this functionality.\r\n\r\nIs this by design or am I doing something wrong? What other approach could I follow here?\r\nMany thanks","title":"Hibernate @Where not returning parent entity if child collection query returns no results","body":"<p>I have the following entity</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Table(name = &quot;companies&quot;)\npublic class Company {\n\n    @Id\n    @GeneratedValue\n    @Column(insertable = false, updatable = false, name = &quot;id&quot;, columnDefinition = &quot;uuid&quot;)\n    private UUID id;\n\n    private UUID parentId;\n\n    @OneToMany(targetEntity = Company.class, fetch = FetchType.EAGER, mappedBy = Fields.parentId)\n    @Where(clause = &quot;deleted_at is null&quot;)\n    private List&lt;Company&gt; childCompanies;\n\n    private Instant deletedAt;\n    private UUID deletedBy;\n}\n</code></pre>\n<p>The problem I am having is in the scenario when all child companies have been deleted, and calling <code>repository.findById(parentCompanyId)</code> returns an empty optional, because the join clause created by hibernate on the resulting query returns no results, which makes sense based on the query it creates, but it is not what I was expecting from this functionality.</p>\n<p>Is this by design or am I doing something wrong? What other approach could I follow here?\nMany thanks</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9675,"page":317,"page_size":100}
